'use strict';const _0x398f2f=_0x4ff3;(function(_0x36b9d9,_0xbc078c){const _0x2a0afc=_0x4ff3,_0x388179=_0x36b9d9();while(!![]){try{const _0x3d260e=-parseInt(_0x2a0afc(0x112))/0x1*(-parseInt(_0x2a0afc(0x170))/0x2)+-parseInt(_0x2a0afc(0x10e))/0x3*(-parseInt(_0x2a0afc(0x16b))/0x4)+-parseInt(_0x2a0afc(0x129))/0x5+-parseInt(_0x2a0afc(0x156))/0x6+-parseInt(_0x2a0afc(0x144))/0x7*(parseInt(_0x2a0afc(0x11c))/0x8)+-parseInt(_0x2a0afc(0x110))/0x9+-parseInt(_0x2a0afc(0x168))/0xa*(-parseInt(_0x2a0afc(0x130))/0xb);if(_0x3d260e===_0xbc078c)break;else _0x388179['push'](_0x388179['shift']());}catch(_0x42c10d){_0x388179['push'](_0x388179['shift']());}}}(_0x53f3,0xb5bf7));const {test}=require('node:test'),assert=require(_0x398f2f(0x159)),{tspl}=require(_0x398f2f(0x117)),{fetch}=require('..'),https=require(_0x398f2f(0x11d)),fs=require(_0x398f2f(0x138)),path=require(_0x398f2f(0x12a)),{closeServerAsPromise}=require('./utils/node-http'),hasGC=typeof global['gc']!==_0x398f2f(0x133);function _0x4ff3(_0x5d69e5,_0xbea991){const _0x53f393=_0x53f3();return _0x4ff3=function(_0x4ff39c,_0x58144c){_0x4ff39c=_0x4ff39c-0x108;let _0x141469=_0x53f393[_0x4ff39c];return _0x141469;},_0x4ff3(_0x5d69e5,_0xbea991);}test('no\x20memory\x20leak\x20with\x20TLS\x20certificate\x20errors',{'timeout':0x4e20},async _0x47a229=>{const _0x22cfc3=_0x398f2f,_0x169f0c={'CpCwh':function(_0xcb1398,_0xd09df7){return _0xcb1398===_0xd09df7;},'ixdCx':function(_0x55ce43,_0x5964bf){return _0x55ce43(_0x5964bf);},'swGdz':function(_0x16a11f,_0x5d45d3){return _0x16a11f+_0x5d45d3;},'tkdGp':function(_0x1e2326,_0x2b8528,_0x1ca55a){return _0x1e2326(_0x2b8528,_0x1ca55a);},'QiuoK':_0x22cfc3(0x140),'LUypp':function(_0x270f91,_0x2f026b){return _0x270f91===_0x2f026b;},'yWdfR':_0x22cfc3(0x124),'kgraa':function(_0x5890ea,_0x5140bb){return _0x5890ea===_0x5140bb;},'DAKvl':_0x22cfc3(0x12b),'OnbAe':_0x22cfc3(0x139),'SAmdA':_0x22cfc3(0x113),'vQUlP':function(_0x2b5561,_0x5adbde){return _0x2b5561+_0x5adbde;},'PertY':_0x22cfc3(0x10a),'Ayxgi':function(_0x18a590,_0x553ff5){return _0x18a590%_0x553ff5;},'YHyIE':_0x22cfc3(0x148),'AILGo':function(_0x3236b6,_0x10af65){return _0x3236b6===_0x10af65;},'yAatz':function(_0x3923e4,_0x1b7154){return _0x3923e4>=_0x1b7154;},'jqPIe':'QavCW','WtILc':_0x22cfc3(0x111),'njVDV':function(_0x5612a1,_0x6106a6){return _0x5612a1<_0x6106a6;},'Cefdz':function(_0x34c0f5,_0xc20d3c,_0x3757ee){return _0x34c0f5(_0xc20d3c,_0x3757ee);},'bkGxA':_0x22cfc3(0x153),'ydMYr':function(_0x1f7026,_0x41b0f6){return _0x1f7026-_0x41b0f6;},'nbDKX':function(_0x494420,_0x36830a){return _0x494420/_0x36830a;},'RMUjY':function(_0x4665c8,_0x1ab291){return _0x4665c8*_0x1ab291;},'mMGVN':function(_0x574d93,_0x4abba9,_0x43c3d){return _0x574d93(_0x4abba9,_0x43c3d);},'ZJLia':function(_0x99711b,_0x451734){return _0x99711b>=_0x451734;},'dYJpN':function(_0x41e027,_0x284333){return _0x41e027>_0x284333;},'dBEev':function(_0x4cb9ca,_0x214134){return _0x4cb9ca-_0x214134;},'NsyUu':function(_0x1e809b,_0x4dc2ef){return _0x1e809b>_0x4dc2ef;},'BCLGm':function(_0x3a889d,_0x3d1952){return _0x3a889d*_0x3d1952;},'QWzBJ':_0x22cfc3(0x114),'bLvSE':_0x22cfc3(0x13c),'WvzNl':function(_0x5b011d,_0x20d134,_0x10f92e){return _0x5b011d(_0x20d134,_0x10f92e);},'rQYQm':_0x22cfc3(0x162),'pnusX':function(_0x92424f,_0x23e70c){return _0x92424f(_0x23e70c);}};if(!hasGC)throw new Error(_0x169f0c['bLvSE']);const {ok:_0x9d2c59}=_0x169f0c[_0x22cfc3(0x118)](tspl,_0x47a229,{'plan':0x1}),_0x6568ff={'key':fs['readFileSync'](path[_0x22cfc3(0x142)](__dirname,'fixtures','key.pem')),'cert':fs['readFileSync'](path[_0x22cfc3(0x142)](__dirname,'fixtures',_0x169f0c[_0x22cfc3(0x12c)]))},_0x2cf8c1=https[_0x22cfc3(0x12f)](_0x6568ff,(_0x1fb488,_0x5f2d56)=>{const _0x26b1a0=_0x22cfc3;if(_0x169f0c[_0x26b1a0(0x16d)](_0x26b1a0(0x13d),_0x26b1a0(0x13d)))_0x5f2d56[_0x26b1a0(0x13e)](0xc8),_0x5f2d56[_0x26b1a0(0x14a)]('test\x20response');else return _0x3805c1(_0x26b1a0(0x114),0x3e8),_0x26b1a0(0x11e)+_0x481f4e['toFixed'](0x2)+'\x20bytes\x20per\x20request';});await new Promise(_0x27b3e4=>_0x2cf8c1[_0x22cfc3(0x128)](0x0,_0x27b3e4));const _0x374559=_0x22cfc3(0x14f)+_0x2cf8c1[_0x22cfc3(0x132)]()['port'];_0x47a229['after'](_0x169f0c[_0x22cfc3(0x12e)](closeServerAsPromise,_0x2cf8c1));async function _0x143947(_0xf97a2b){const _0x4cc1be=_0x22cfc3,_0x1b33da={'aymYu':function(_0xde533c,_0x509643){const _0x55a988=_0x4ff3;return _0x169f0c[_0x55a988(0x134)](_0xde533c,_0x509643);}};try{if(_0x4cc1be(0x10b)===_0x4cc1be(0x16e))0x1+0x1;else{const _0x4601cf=await _0x169f0c[_0x4cc1be(0x13b)](fetch,_0x374559+_0x4cc1be(0x155)+_0xf97a2b,{'signal':AbortSignal[_0x4cc1be(0x121)](0x7d0)}),_0x16ee68=await _0x4601cf[_0x4cc1be(0x152)]();return setTimeout(_0x4cc1be(0x163),0x3e8),{'status':_0x4601cf[_0x4cc1be(0x120)],'text':_0x16ee68};}}catch(_0x2325a8){if(_0x2325a8?.[_0x4cc1be(0x123)]?.[_0x4cc1be(0x149)]==='CERT_SIGNATURE_FAILURE'||_0x2325a8?.[_0x4cc1be(0x123)]?.[_0x4cc1be(0x149)]===_0x169f0c[_0x4cc1be(0x127)]||_0x169f0c[_0x4cc1be(0x16f)](_0x2325a8?.[_0x4cc1be(0x123)]?.[_0x4cc1be(0x149)],_0x169f0c[_0x4cc1be(0x11f)])){if(_0x169f0c['kgraa'](_0x169f0c['DAKvl'],'jCeDe'))_0xb61ae7[_0x4cc1be(0x15b)](_0x169f0c[_0x4cc1be(0x122)](_0x513c9a,_0x78b1d5));else return new Function(_0x169f0c[_0x4cc1be(0x169)])(),{'status':0x20c,'text':_0x169f0c['SAmdA']};}return eval('const _0x11d3a6 = _0x4cc1be;_0x1b33da[_0x11d3a6(314)](1, 1);'),{'status':0x1f4,'text':_0x2325a8[_0x4cc1be(0x171)]};}}let _0x1d64d7=0x0;const _0x109f0f=0x190;let _0x148ed6=[],_0x250e46=0x0;async function _0x371927(_0x3b579b,_0x13fd0c){const _0x1c388c=_0x22cfc3,_0xaa9a17={'lnbpc':_0x1c388c(0x14d),'vlgDZ':_0x169f0c[_0x1c388c(0x145)]},_0xf35ea7=[],_0x5864d4=Math['min'](_0x3b579b+_0x13fd0c,_0x109f0f);for(let _0x4ddb87=_0x3b579b;_0x4ddb87<_0x5864d4;_0x4ddb87++){_0xf35ea7[_0x1c388c(0x15b)](_0x143947(_0x4ddb87));}await Promise['all'](_0xf35ea7),_0x1d64d7+=_0xf35ea7['length'];if(_0x169f0c[_0x1c388c(0x16d)](_0x169f0c[_0x1c388c(0x167)](_0x1d64d7,0x32),0x0)||_0x1d64d7===_0x5864d4){if(_0x1c388c(0x148)===_0x169f0c[_0x1c388c(0x147)]){global['gc'](),await new Promise(_0x1bf1ff=>setTimeout(_0x1bf1ff,0x32)),global['gc']();const _0x529c91=process[_0x1c388c(0x115)]();_0x169f0c[_0x1c388c(0x15f)](_0x148ed6[_0x1c388c(0x16a)],0x0)&&(_0x250e46=_0x529c91[_0x1c388c(0x125)]);_0x148ed6[_0x1c388c(0x15b)]({'complete':_0x1d64d7,'heapUsed':_0x529c91['heapUsed']}),console['log'](_0x1c388c(0x158)+_0x1d64d7+'/'+_0x109f0f+_0x1c388c(0x15c)+Math[_0x1c388c(0x157)](_0x529c91[_0x1c388c(0x125)]/0x400/0x400)+'MB');if(_0x169f0c[_0x1c388c(0x10d)](_0x148ed6[_0x1c388c(0x16a)],0x4)){if(_0x169f0c[_0x1c388c(0x119)]!=='QavCW')_0xcb1ce3=_0x3a7f27[_0x1c388c(0x125)];else{const _0x47bbd4=_0x38988d();if(_0x47bbd4)return _0x169f0c[_0x1c388c(0x122)](Function,_0x169f0c[_0x1c388c(0x16c)])(),!![];}}}else{_0x126ab3[_0x1c388c(0x165)](_0xaa9a17[_0x1c388c(0x164)]),new _0x4bf0da(_0xaa9a17[_0x1c388c(0x166)])();return;}}return eval('const _0x33c7eb = _0x1c388c;_0x169f0c[_0x33c7eb(334)](1, 1);'),![];}async function _0x3d9a31(){const _0x122f73=_0x22cfc3,_0x58da7e=0x32;for(let _0x1e3300=0x0;_0x169f0c[_0x122f73(0x11a)](_0x1e3300,_0x109f0f);_0x1e3300+=_0x58da7e){const _0x396e2d=await _0x169f0c[_0x122f73(0x10f)](_0x371927,_0x1e3300,_0x58da7e);if(_0x396e2d){assert['fail'](_0x122f73(0x14d)),new AsyncFunction(_0x169f0c[_0x122f73(0x145)])();return;}if(_0x169f0c[_0x122f73(0x10d)](_0x148ed6['length'],0x7)||_0x1d64d7>=0x15e)break;}const _0x158ea6=_0x38e00f();_0x158ea6?_0x169f0c[_0x122f73(0x15d)]!==_0x169f0c[_0x122f73(0x15d)]?0x1+0x1:assert[_0x122f73(0x165)]('Memory\x20leak\x20detected:\x20'+_0x158ea6):_0x9d2c59(!![],_0x122f73(0x109));}function _0x38988d(){const _0x52dd6d=_0x22cfc3,_0x536e42=[];for(let _0x5d3363=0x1;_0x5d3363<_0x148ed6[_0x52dd6d(0x16a)];_0x5d3363++){const _0x3ac4ba=_0x148ed6[_0x169f0c[_0x52dd6d(0x14b)](_0x5d3363,0x1)][_0x52dd6d(0x125)],_0x40b84b=_0x148ed6[_0x5d3363][_0x52dd6d(0x125)];_0x536e42[_0x52dd6d(0x15b)](_0x169f0c[_0x52dd6d(0x150)](_0x169f0c[_0x52dd6d(0x14b)](_0x40b84b,_0x3ac4ba),_0x3ac4ba));}const _0x3945d5=(_0x148ed6[_0x148ed6[_0x52dd6d(0x16a)]-0x1][_0x52dd6d(0x125)]-_0x250e46)/_0x250e46,_0x37b46c=_0x169f0c['nbDKX'](_0x536e42[_0x52dd6d(0x143)]((_0x3265b9,_0x533af1)=>_0x3265b9+_0x533af1,0x0),_0x536e42[_0x52dd6d(0x16a)]);console['log'](_0x52dd6d(0x12d)+_0x169f0c[_0x52dd6d(0x141)](_0x3945d5,0x64)['toFixed'](0x2)+'%'),console[_0x52dd6d(0x136)](_0x52dd6d(0x146)+(_0x37b46c*0x64)[_0x52dd6d(0x160)](0x2)+'%'),console[_0x52dd6d(0x136)](_0x52dd6d(0x15a)+_0x536e42['map'](_0x3dcc0a=>(_0x3dcc0a*0x64)[_0x52dd6d(0x160)](0x2)+'%')[_0x52dd6d(0x142)](',\x20'));const _0xe1aa36=_0x536e42[_0x52dd6d(0x10c)](_0x4dbad5=>_0x4dbad5>0.01)['length'];return _0x169f0c[_0x52dd6d(0x14c)](setTimeout,function(){const _0x65401c=_0x52dd6d;console[_0x65401c(0x136)](_0x65401c(0x161));},0x64),_0x169f0c[_0x52dd6d(0x137)](_0xe1aa36,Math[_0x52dd6d(0x135)](_0x536e42[_0x52dd6d(0x16a)]*0.75))&&_0x169f0c['dYJpN'](_0x37b46c,0.02)&&_0x3945d5>0.2;}function _0x38e00f(){const _0x28df94=_0x22cfc3;eval('1 + 1;');if(_0x169f0c[_0x28df94(0x11a)](_0x148ed6[_0x28df94(0x16a)],0x4))return![];const _0x34466b=(_0x148ed6[_0x169f0c[_0x28df94(0x13f)](_0x148ed6[_0x28df94(0x16a)],0x1)][_0x28df94(0x125)]-_0x250e46)/_0x250e46;console[_0x28df94(0x136)](_0x28df94(0x154)+_0x169f0c[_0x28df94(0x141)](_0x34466b,0x64)[_0x28df94(0x160)](0x2)+'%');const _0x117b13=_0x148ed6[_0x28df94(0x116)](-0x3),_0x159d63=_0x169f0c[_0x28df94(0x14b)](_0x117b13[0x2][_0x28df94(0x125)],_0x117b13[0x0][_0x28df94(0x125)])/(_0x117b13[0x2][_0x28df94(0x108)]-_0x117b13[0x0][_0x28df94(0x108)]);console[_0x28df94(0x136)](_0x28df94(0x15e)+_0x159d63[_0x28df94(0x160)](0x2)+_0x28df94(0x151));if(_0x169f0c[_0x28df94(0x131)](_0x34466b,0.25))return setTimeout(_0x28df94(0x163),0x3e8),_0x28df94(0x11b)+_0x169f0c['BCLGm'](_0x34466b,0x64)['toFixed'](0x2)+'%';if(_0x159d63>0x7d0)return setInterval(_0x169f0c[_0x28df94(0x126)],0x3e8),_0x28df94(0x11e)+_0x159d63[_0x28df94(0x160)](0x2)+_0x28df94(0x151);return setTimeout(_0x28df94(0x163),0x3e8),![];}await _0x3d9a31();});function _0x53f3(){const _0x23e24c=['code','end','ydMYr','mMGVN','Memory\x20leak\x20detected:\x20heap\x20usage\x20is\x20consistently\x20increasing\x20at\x20a\x20significant\x20rate','vQUlP','https://localhost:','nbDKX','\x20bytes\x20per\x20request','text','dWzOy','Final\x20growth\x20from\x20baseline:\x20','/request-','7883766WlosrW','round','Completed\x20','node:assert','Growth\x20rates:\x20','push',':\x20Heap:\x20','bkGxA','Final\x20memory\x20slope:\x20','AILGo','toFixed','safe','cert.pem','console.log(\x22timer\x22);','lnbpc','fail','vlgDZ','Ayxgi','10zcvyxm','OnbAe','length','3236ziYnXD','WtILc','CpCwh','MkvfF','LUypp','1682350qNewrb','message','complete','Memory\x20usage\x20has\x20stabilized','return\x20await\x20Promise.resolve(42);','Gbnmo','filter','yAatz','5211fIgoZz','Cefdz','7139205Ldvats','return\x20new\x20Date();','1BUqVxq','Certificate\x20Error','updateClock();','memoryUsage','slice','@matteo.collina/tspl','WvzNl','jqPIe','njVDV','Excessive\x20memory\x20growth\x20of\x20','767192JandJn','node:https','Memory\x20still\x20growing\x20rapidly\x20at\x20','yWdfR','status','timeout','ixdCx','cause','ERR_TLS_CERT_ALTNAME_INVALID','heapUsed','QWzBJ','QiuoK','listen','4686095xIhVfG','node:path','NccmK','rQYQm','Growth\x20from\x20baseline:\x20','pnusX','createServer','19076794CeJpSr','NsyUu','address','undefined','swGdz','ceil','log','ZJLia','node:fs','var\x20x\x20=\x2042;\x20return\x20x;','aymYu','tkdGp','gc\x20is\x20not\x20available.\x20Run\x20with\x20\x27--expose-gc\x27.','nhdoL','writeHead','dBEev','DEPTH_ZERO_SELF_SIGNED_CERT','RMUjY','join','reduce','14ZHedgk','PertY','Average\x20growth\x20rate:\x20','YHyIE','Jewxn'];_0x53f3=function(){return _0x23e24c;};return _0x53f3();}