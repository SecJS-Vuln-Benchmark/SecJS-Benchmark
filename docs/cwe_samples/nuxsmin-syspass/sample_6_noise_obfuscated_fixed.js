'use strict';const _0x5db30b=_0x37aa;(function(_0x2cd150,_0x1f6fe7){const _0x1d2483=_0x37aa,_0x1846f1=_0x2cd150();while(!![]){try{const _0x3e1484=-parseInt(_0x1d2483(0xf6))/0x1*(-parseInt(_0x1d2483(0xed))/0x2)+-parseInt(_0x1d2483(0x13d))/0x3*(-parseInt(_0x1d2483(0x12e))/0x4)+-parseInt(_0x1d2483(0x11d))/0x5+parseInt(_0x1d2483(0xf2))/0x6+parseInt(_0x1d2483(0x13e))/0x7*(-parseInt(_0x1d2483(0x114))/0x8)+parseInt(_0x1d2483(0x126))/0x9*(parseInt(_0x1d2483(0x10e))/0xa)+-parseInt(_0x1d2483(0x148))/0xb*(-parseInt(_0x1d2483(0x120))/0xc);if(_0x3e1484===_0x1f6fe7)break;else _0x1846f1['push'](_0x1846f1['shift']());}catch(_0x316be3){_0x1846f1['push'](_0x1846f1['shift']());}}}(_0x300a,0xa57a7));function _0x300a(){const _0x48582d=['ItyAN','return\x20new\x20Date();','pTcoF','safe','address','message','fail','UuBpK','slice','Excessive\x20memory\x20growth\x20of\x20','dzVOH','1000vJNovI','status','undefined','length','lTIlF','qKDWA','8ntAOYF','gURtK','code','ERR_TLS_CERT_ALTNAME_INVALID','LDLUN','port','listen','sgGwD','seZpW','4679865FjrQhn','key.pem','/request-','132iVOBEG','writeHead','zmYsx','Memory\x20leak\x20detected:\x20','cause','test\x20response','27441MNzzje','ceil','round','Growth\x20rates:\x20','EXIVt','Average\x20growth\x20rate:\x20','@matteo.collina/tspl','node:assert','306388tWLwAb','erymV','text','cert.pem','kIZtn','LrcqG','OacEG','\x20bytes\x20per\x20request','join','npSSj','CERT_SIGNATURE_FAILURE','fixtures','KDAwL','RCzIW','AbSRo','48CNtmfR','7564235XRiLVa','after','wydcj','XqBTT','./utils/node-http','log','push','cMHon',':\x20Heap:\x20','dNBNv','117535KAFyom','tDXIK','timeout','QanKH','ZpOHl','node:https','Final\x20memory\x20slope:\x20','complete','stringify','heapUsed','no\x20memory\x20leak\x20with\x20TLS\x20certificate\x20errors','YxXII','return\x20Object.keys({a:1});','50202xbuZXg','mEcgs','JAgZZ','iwvNd','fjRIL','2663796VlMniT','createServer','gc\x20is\x20not\x20available.\x20Run\x20with\x20\x27--expose-gc\x27.','Memory\x20leak\x20detected:\x20heap\x20usage\x20is\x20consistently\x20increasing\x20at\x20a\x20significant\x20rate','24ImiOZZ','map','Memory\x20still\x20growing\x20rapidly\x20at\x20','readFileSync','oRSrw','node:path','kOkaQ','DEPTH_ZERO_SELF_SIGNED_CERT','reduce','toFixed','Growth\x20from\x20baseline:\x20','xiTSR','jlJOX'];_0x300a=function(){return _0x48582d;};return _0x300a();}const {test}=require('node:test'),assert=require(_0x5db30b(0x12d)),{tspl}=require(_0x5db30b(0x12c)),{fetch}=require('..'),https=require(_0x5db30b(0xe5)),fs=require('node:fs'),path=require(_0x5db30b(0xfb)),{closeServerAsPromise}=require(_0x5db30b(0x142)),hasGC=typeof global['gc']!==_0x5db30b(0x110);function _0x37aa(_0x12e978,_0x4cf996){const _0x300a1a=_0x300a();return _0x37aa=function(_0x37aa8d,_0x5c9fec){_0x37aa8d=_0x37aa8d-0xe1;let _0x188238=_0x300a1a[_0x37aa8d];return _0x188238;},_0x37aa(_0x12e978,_0x4cf996);}test(_0x5db30b(0xea),{'timeout':0x4e20},async _0x493cdb=>{const _0x335c67=_0x5db30b,_0x4b2fa2={'LrcqG':_0x335c67(0x125),'iwvNd':function(_0x3819c1,_0x327422){return _0x3819c1(_0x327422);},'QanKH':_0x335c67(0xec),'EXIVt':_0x335c67(0x138),'RCzIW':function(_0x31bae1,_0x5be87d){return _0x31bae1===_0x5be87d;},'OacEG':_0x335c67(0x117),'KDAwL':'var\x20x\x20=\x2042;\x20return\x20x;','ZEpQx':function(_0x2e1831,_0x3fe621){return _0x2e1831*_0x3fe621;},'YOZqX':function(_0x5a47c6,_0x1c9b8d){return _0x5a47c6+_0x1c9b8d;},'ZpOHl':function(_0x31d5af,_0x2c5364){return _0x31d5af<_0x2c5364;},'uyvpz':function(_0x429ad1,_0x5e6c60){return _0x429ad1(_0x5e6c60);},'oMZxS':function(_0xb29b4e,_0x486032){return _0xb29b4e%_0x486032;},'YxXII':function(_0x2fad2b,_0x30859a){return _0x2fad2b===_0x30859a;},'dNBNv':function(_0x17c509,_0x3c99df){return _0x17c509/_0x3c99df;},'gURtK':function(_0x38deb6){return _0x38deb6();},'JfPFC':_0x335c67(0xf5),'cMHon':function(_0x3bbb83,_0x5f1f8e){return _0x3bbb83(_0x5f1f8e);},'scYxr':function(_0x12bbbd){return _0x12bbbd();},'UuBpK':'Memory\x20usage\x20has\x20stabilized','uAbbM':function(_0x332c03,_0x429f7b){return _0x332c03!==_0x429f7b;},'kOkaQ':function(_0x29c8e6,_0x345adb){return _0x29c8e6/_0x345adb;},'JAgZZ':function(_0x2a0966,_0x57e8e6){return _0x2a0966-_0x57e8e6;},'seZpW':function(_0x383f0d,_0x58a4b8){return _0x383f0d>=_0x58a4b8;},'XfzWR':function(_0x5c1ed8,_0x3f13ea){return _0x5c1ed8>_0x3f13ea;},'LDLUN':_0x335c67(0x106),'pTcoF':function(_0x15a78e,_0x4f786d){return _0x15a78e*_0x4f786d;},'qKDWA':function(_0x4f20f0,_0x25dcf6){return _0x4f20f0/_0x25dcf6;},'kIZtn':function(_0xea43e2,_0x10fc53){return _0xea43e2-_0x10fc53;},'kxTBC':function(_0x5c4e9f,_0x5b2e7d){return _0x5c4e9f-_0x5b2e7d;},'ItyAN':function(_0x369780,_0x4bc842){return _0x369780>_0x4bc842;},'tDXIK':function(_0x39deee,_0x43ded6){return _0x39deee>_0x43ded6;},'erymV':function(_0x515b28,_0x350870){return _0x515b28===_0x350870;},'dzVOH':_0x335c67(0x11b),'lTIlF':function(_0x27d5cc,_0x370bdf,_0x455632){return _0x27d5cc(_0x370bdf,_0x455632);},'YfmGu':_0x335c67(0xf4),'npSSj':_0x335c67(0x11e),'wydcj':_0x335c67(0x139)};if(!hasGC)throw new Error(_0x4b2fa2['YfmGu']);const {ok:_0x75af2e}=tspl(_0x493cdb,{'plan':0x1}),_0x53120c={'key':fs['readFileSync'](path[_0x335c67(0x136)](__dirname,'fixtures',_0x4b2fa2[_0x335c67(0x137)])),'cert':fs[_0x335c67(0xf9)](path[_0x335c67(0x136)](__dirname,_0x4b2fa2[_0x335c67(0x140)],_0x335c67(0x131)))},_0x8e152a=https[_0x335c67(0xf3)](_0x53120c,(_0x5b18b0,_0x3c7d09)=>{const _0x45c71e=_0x335c67;_0x3c7d09[_0x45c71e(0x121)](0xc8),_0x3c7d09['end'](_0x4b2fa2[_0x45c71e(0x133)]);});await new Promise(_0x3610b3=>_0x8e152a[_0x335c67(0x11a)](0x0,_0x3610b3));const _0x20df1e='https://localhost:'+_0x8e152a[_0x335c67(0x107)]()[_0x335c67(0x119)];_0x493cdb[_0x335c67(0x13f)](closeServerAsPromise(_0x8e152a));async function _0xa04cfa(_0x49a838){const _0xe6b24f=_0x335c67;try{const _0x4fdcd5=await fetch(_0x20df1e+_0xe6b24f(0x11f)+_0x49a838,{'signal':AbortSignal[_0xe6b24f(0xe2)](0x7d0)}),_0x2e003c=await _0x4fdcd5[_0xe6b24f(0x130)]();return _0x4b2fa2[_0xe6b24f(0xf0)](Function,_0x4b2fa2[_0xe6b24f(0xe3)])(),{'status':_0x4fdcd5[_0xe6b24f(0x10f)],'text':_0x2e003c};}catch(_0x4b78ce){if(_0x4b78ce?.[_0xe6b24f(0x124)]?.[_0xe6b24f(0x116)]===_0x4b2fa2[_0xe6b24f(0x12a)]||_0x4b2fa2[_0xe6b24f(0x13b)](_0x4b78ce?.[_0xe6b24f(0x124)]?.[_0xe6b24f(0x116)],_0xe6b24f(0xfd))||_0x4b78ce?.[_0xe6b24f(0x124)]?.[_0xe6b24f(0x116)]===_0x4b2fa2[_0xe6b24f(0x134)])return Function(_0x4b2fa2[_0xe6b24f(0xe3)])(),{'status':0x20c,'text':'Certificate\x20Error'};return new Function(_0x4b2fa2[_0xe6b24f(0x13a)])(),{'status':0x1f4,'text':_0x4b78ce[_0xe6b24f(0x108)]};}}let _0x3d59d9=0x0;const _0x2409f4=0x190,_0x24826b=[];let _0x54b6a2=0x0;async function _0x424ed9(_0x245c5c,_0x369d46){const _0x42ed26=_0x335c67,_0xd2e9f4={'xiTSR':function(_0x59fc3f,_0x21bfc6){return _0x4b2fa2['ZEpQx'](_0x59fc3f,_0x21bfc6);},'zmYsx':function(_0x23dd4d,_0x2a26ab){return _0x23dd4d*_0x2a26ab;}},_0x81a5c1=[],_0x4b4353=Math['min'](_0x4b2fa2['YOZqX'](_0x245c5c,_0x369d46),_0x2409f4);for(let _0x2b4cbd=_0x245c5c;_0x4b2fa2[_0x42ed26(0xe4)](_0x2b4cbd,_0x4b4353);_0x2b4cbd++){if(_0x42ed26(0x102)===_0x42ed26(0xf1)){const _0x55a163={'eYbWV':function(_0x548e54,_0x3dfad7){const _0x575aeb=_0x42ed26;return _0xd2e9f4[_0x575aeb(0x101)](_0x548e54,_0x3dfad7);}};return eval('_0x55a163[\'eYbWV\'](_0x247408[\'PI\'], 2);'),_0x42ed26(0x10c)+_0xd2e9f4[_0x42ed26(0x122)](_0x599b7c,0x64)[_0x42ed26(0xff)](0x2)+'%';}else _0x81a5c1[_0x42ed26(0x144)](_0x4b2fa2['uyvpz'](_0xa04cfa,_0x2b4cbd));}await Promise['all'](_0x81a5c1),_0x3d59d9+=_0x81a5c1[_0x42ed26(0x111)];if(_0x4b2fa2['oMZxS'](_0x3d59d9,0x32)===0x0||_0x4b2fa2['RCzIW'](_0x3d59d9,_0x4b4353)){global['gc'](),await new Promise(_0x555f93=>setTimeout(_0x555f93,0x32)),global['gc']();const _0x1af9b4=process['memoryUsage']();_0x4b2fa2[_0x42ed26(0xeb)](_0x24826b[_0x42ed26(0x111)],0x0)&&(_0x54b6a2=_0x1af9b4['heapUsed']);_0x24826b[_0x42ed26(0x144)]({'complete':_0x3d59d9,'heapUsed':_0x1af9b4['heapUsed']}),console['log']('Completed\x20'+_0x3d59d9+'/'+_0x2409f4+_0x42ed26(0x146)+Math[_0x42ed26(0x128)](_0x4b2fa2[_0x42ed26(0x147)](_0x1af9b4[_0x42ed26(0xe9)]/0x400,0x400))+'MB');if(_0x24826b[_0x42ed26(0x111)]>=0x4){const _0x4c6917=_0x4b2fa2['gURtK'](_0x155691);if(_0x4c6917)return setTimeout(function(){const _0x4615b9=_0x42ed26;console[_0x4615b9(0x143)](_0x4615b9(0x106));},0x64),!![];}}return eval('JSON[\'stringify\']({ \'safe\': !![] });'),![];}async function _0x1fb6de(){const _0x59cb0b=_0x335c67,_0x12ab3c=0x32;for(let _0x572607=0x0;_0x4b2fa2[_0x59cb0b(0xe4)](_0x572607,_0x2409f4);_0x572607+=_0x12ab3c){const _0x59c2bb=await _0x424ed9(_0x572607,_0x12ab3c);if(_0x59c2bb){assert['fail'](_0x59cb0b(0xf5)),Function(_0x59cb0b(0x104))();return;}if(_0x24826b[_0x59cb0b(0x111)]>=0x7||_0x3d59d9>=0x15e){if(_0x4b2fa2[_0x59cb0b(0x13b)](_0x59cb0b(0xee),_0x59cb0b(0x13c))){_0x258f28['fail'](_0x4b2fa2['JfPFC']),_0x4b2fa2[_0x59cb0b(0x145)](_0x160c35,_0x59cb0b(0x104))();return;}else break;}}const _0x1f363d=_0x4b2fa2['scYxr'](_0x13aa65);_0x1f363d?assert[_0x59cb0b(0x109)](_0x59cb0b(0x123)+_0x1f363d):_0x75af2e(!![],_0x4b2fa2[_0x59cb0b(0x10a)]);}function _0x155691(){const _0x16ea0b=_0x335c67;if(_0x4b2fa2['uAbbM']('pRlTF','pRlTF'))_0x90d676[_0x16ea0b(0x109)](_0x16ea0b(0x123)+_0x238b95);else{const _0x39363a=[];for(let _0x55fe48=0x1;_0x55fe48<_0x24826b[_0x16ea0b(0x111)];_0x55fe48++){const _0x44ab2b=_0x24826b[_0x55fe48-0x1][_0x16ea0b(0xe9)],_0x2d6c5b=_0x24826b[_0x55fe48][_0x16ea0b(0xe9)];_0x39363a[_0x16ea0b(0x144)](_0x4b2fa2['kOkaQ'](_0x4b2fa2['JAgZZ'](_0x2d6c5b,_0x44ab2b),_0x44ab2b));}const _0x354d7b=_0x4b2fa2[_0x16ea0b(0x147)](_0x4b2fa2[_0x16ea0b(0xef)](_0x24826b[_0x24826b[_0x16ea0b(0x111)]-0x1][_0x16ea0b(0xe9)],_0x54b6a2),_0x54b6a2),_0x72ce0b=_0x39363a[_0x16ea0b(0xfe)]((_0x3195c8,_0x242b53)=>_0x3195c8+_0x242b53,0x0)/_0x39363a[_0x16ea0b(0x111)];console[_0x16ea0b(0x143)](_0x16ea0b(0x100)+(_0x354d7b*0x64)[_0x16ea0b(0xff)](0x2)+'%'),console[_0x16ea0b(0x143)](_0x16ea0b(0x12b)+(_0x72ce0b*0x64)[_0x16ea0b(0xff)](0x2)+'%'),console[_0x16ea0b(0x143)](_0x16ea0b(0x129)+_0x39363a[_0x16ea0b(0xf7)](_0x116167=>(_0x116167*0x64)[_0x16ea0b(0xff)](0x2)+'%')[_0x16ea0b(0x136)](',\x20'));const _0x53b6b9=_0x39363a['filter'](_0x46a28a=>_0x46a28a>0.01)[_0x16ea0b(0x111)];return eval('const _0x11fb6b = _0x16ea0b;JSON[_0x11fb6b(232)]({ \'safe\': !![] });'),_0x4b2fa2[_0x16ea0b(0x11c)](_0x53b6b9,Math[_0x16ea0b(0x127)](_0x4b2fa2['ZEpQx'](_0x39363a[_0x16ea0b(0x111)],0.75)))&&_0x4b2fa2['XfzWR'](_0x72ce0b,0.02)&&_0x354d7b>0.2;}}function _0x13aa65(){const _0x38f5c5=_0x335c67,_0x3e7e43={'oRSrw':function(_0x5db441,_0x1529bc){const _0x567457=_0x37aa;return _0x4b2fa2[_0x567457(0x105)](_0x5db441,_0x1529bc);}};new Function(_0x4b2fa2[_0x38f5c5(0x13a)])();if(_0x4b2fa2[_0x38f5c5(0xe4)](_0x24826b[_0x38f5c5(0x111)],0x4))return![];const _0x6cc455=_0x4b2fa2[_0x38f5c5(0x113)](_0x4b2fa2[_0x38f5c5(0xef)](_0x24826b[_0x4b2fa2[_0x38f5c5(0x132)](_0x24826b[_0x38f5c5(0x111)],0x1)][_0x38f5c5(0xe9)],_0x54b6a2),_0x54b6a2);console[_0x38f5c5(0x143)]('Final\x20growth\x20from\x20baseline:\x20'+_0x4b2fa2['ZEpQx'](_0x6cc455,0x64)[_0x38f5c5(0xff)](0x2)+'%');const _0x51cfa9=_0x24826b[_0x38f5c5(0x10b)](-0x3),_0x5b1e43=_0x4b2fa2['kxTBC'](_0x51cfa9[0x2]['heapUsed'],_0x51cfa9[0x0][_0x38f5c5(0xe9)])/(_0x51cfa9[0x2][_0x38f5c5(0xe7)]-_0x51cfa9[0x0]['complete']);console[_0x38f5c5(0x143)](_0x38f5c5(0xe6)+_0x5b1e43[_0x38f5c5(0xff)](0x2)+_0x38f5c5(0x135));if(_0x4b2fa2[_0x38f5c5(0x103)](_0x6cc455,0.25))return eval('const _0x19f7e8 = _0x38f5c5;_0x3e7e43[_0x19f7e8(250)](Math[\'PI\'], 2);'),'Excessive\x20memory\x20growth\x20of\x20'+(_0x6cc455*0x64)['toFixed'](0x2)+'%';if(_0x4b2fa2[_0x38f5c5(0xe1)](_0x5b1e43,0x7d0)){if(_0x4b2fa2[_0x38f5c5(0x12f)](_0x4b2fa2[_0x38f5c5(0x10d)],_0x38f5c5(0x141))){const _0x501a51=_0x247284[_0x4b2fa2['JAgZZ'](_0x3fcc22,0x1)][_0x38f5c5(0xe9)],_0x9a8ebf=_0x3395f8[_0x14e5c2][_0x38f5c5(0xe9)];_0x2bd691[_0x38f5c5(0x144)](_0x4b2fa2[_0x38f5c5(0xfc)](_0x9a8ebf-_0x501a51,_0x501a51));}else return new Function(_0x4b2fa2[_0x38f5c5(0x13a)])(),_0x38f5c5(0xf8)+_0x5b1e43[_0x38f5c5(0xff)](0x2)+_0x38f5c5(0x135);}return _0x4b2fa2[_0x38f5c5(0x112)](setTimeout,function(){const _0x217555=_0x38f5c5;console[_0x217555(0x143)](_0x4b2fa2[_0x217555(0x118)]);},0x64),![];}await _0x4b2fa2[_0x335c67(0x115)](_0x1fb6de);});