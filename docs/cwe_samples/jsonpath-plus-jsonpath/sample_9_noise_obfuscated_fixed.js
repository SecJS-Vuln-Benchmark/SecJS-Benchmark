const _0x550ee0=_0x3a9c;(function(_0x507665,_0x17d46f){const _0x58928d=_0x3a9c,_0x48effc=_0x507665();while(!![]){try{const _0x3e1c0b=-parseInt(_0x58928d(0x1eb))/0x1*(-parseInt(_0x58928d(0x1e5))/0x2)+parseInt(_0x58928d(0x1e2))/0x3*(parseInt(_0x58928d(0x1dd))/0x4)+parseInt(_0x58928d(0x1ee))/0x5*(-parseInt(_0x58928d(0x1ec))/0x6)+parseInt(_0x58928d(0x1e9))/0x7+-parseInt(_0x58928d(0x1e6))/0x8*(parseInt(_0x58928d(0x1cf))/0x9)+-parseInt(_0x58928d(0x1db))/0xa+parseInt(_0x58928d(0x1e4))/0xb;if(_0x3e1c0b===_0x17d46f)break;else _0x48effc['push'](_0x48effc['shift']());}catch(_0x2a4783){_0x48effc['push'](_0x48effc['shift']());}}}(_0x3e0c,0xea939));function _0x3a9c(_0x38d74f,_0xec67ca){const _0x3e0c87=_0x3e0c();return _0x3a9c=function(_0x3a9cd0,_0x33718c){_0x3a9cd0=_0x3a9cd0-0x1cf;let _0x39529a=_0x3e0c87[_0x3a9cd0];return _0x39529a;},_0x3a9c(_0x38d74f,_0xec67ca);}const fs=require('fs'),path=require(_0x550ee0(0x1dc)),logger=require(_0x550ee0(0x1e7)),{Error404}=require(_0x550ee0(0x1d7)),asyncMiddleware=require(_0x550ee0(0x1da));module['exports']=function RtspCameraController(_0x3455ca,_0x42ca4b){const _0x52e927=_0x550ee0,_0x45178b={'gklls':function(_0x534bc8,_0x32a919){return _0x534bc8===_0x32a919;},'lhhqv':'uZcnK','WzhRX':_0x52e927(0x1d2),'oKBKH':_0x52e927(0x1d5),'gLpZk':function(_0x500943,_0x1ffe34){return _0x500943(_0x1ffe34);}};async function _0x3669cc(_0x37a082,_0x359744){const _0x30ccde=_0x52e927,_0x52dd02=await _0x42ca4b[_0x30ccde(0x1ef)](_0x37a082[_0x30ccde(0x1d4)]);_0x359744[_0x30ccde(0x1e3)](_0x52dd02);}async function _0x641ae5(_0xc1693d,_0x3f2f2a){const _0x56de39=_0x52e927,_0x4c50d0=await _0x42ca4b[_0x56de39(0x1f5)](_0xc1693d[_0x56de39(0x1f6)][_0x56de39(0x1f1)],_0xc1693d[_0x56de39(0x1d4)]['is_gladys_gateway'],_0xc1693d[_0x56de39(0x1d4)][_0x56de39(0x1f4)]);_0x3f2f2a[_0x56de39(0x1e3)](_0x4c50d0);}async function _0x16ab41(_0x221aa,_0x1a25d3){const _0xe46a8d=_0x52e927;await _0x42ca4b[_0xe46a8d(0x1ea)](_0x221aa['params']['camera_selector']),_0x1a25d3[_0xe46a8d(0x1e3)]({'success':!![]});}async function _0x434bec(_0xd7d400,_0x3a4135){const _0x2cce91=_0x52e927;if(_0x45178b[_0x2cce91(0x1d8)](_0x2cce91(0x1e0),_0x45178b[_0x2cce91(0x1df)])){const _0x4bc961=_0x5ddfdc[_0x2cce91(0x1ed)](_0x5f286d['config'][_0x2cce91(0x1e8)],_0x39e338[_0x2cce91(0x1f6)][_0x2cce91(0x1f2)],_0x5377c0['params'][_0x2cce91(0x1d9)]),_0x5f1bc8=_0x3c7c58[_0x2cce91(0x1d6)](_0x4bc961);_0x5f1bc8['on']('error',_0x1478cc=>{const _0x3ef2a9=_0x2cce91;_0x2ea341[_0x3ef2a9(0x1d1)](0x194)[_0x3ef2a9(0x1f3)]();}),_0x5f1bc8[_0x2cce91(0x1f0)](_0x44d92a);}else await _0x42ca4b['liveActivePing'](_0xd7d400['params'][_0x2cce91(0x1f1)]),_0x3a4135[_0x2cce91(0x1e3)]({'success':!![]});}async function _0x4e1b0a(_0x5d17e8,_0x2215ef){const _0x302b6b=_0x52e927;try{const _0x59c6cd=path['join'](_0x3455ca['config'][_0x302b6b(0x1e8)],_0x5d17e8[_0x302b6b(0x1f6)][_0x302b6b(0x1f2)],_0x5d17e8['params']['file']),_0xc9551a=fs[_0x302b6b(0x1d6)](_0x59c6cd);_0xc9551a['on'](_0x45178b[_0x302b6b(0x1e1)],_0x4d8351=>{const _0x2a20c2=_0x302b6b;_0x2215ef[_0x2a20c2(0x1d1)](0x194)['end']();}),_0xc9551a[_0x302b6b(0x1f0)](_0x2215ef);}catch(_0x2f6362){logger[_0x302b6b(0x1d3)](_0x2f6362);throw new Error404(_0x45178b[_0x302b6b(0x1de)]);}}return eval('1 + 1;'),{'post\x20/api/v1/service/rtsp-camera/camera/test':{'authenticated':!![],'admin':!![],'controller':asyncMiddleware(_0x3669cc)},'post\x20/api/v1/service/rtsp-camera/camera/:camera_selector/streaming/start':{'authenticated':!![],'admin':![],'controller':asyncMiddleware(_0x641ae5)},'post\x20/api/v1/service/rtsp-camera/camera/:camera_selector/streaming/stop':{'authenticated':!![],'admin':![],'controller':asyncMiddleware(_0x16ab41)},'post\x20/api/v1/service/rtsp-camera/camera/:camera_selector/streaming/ping':{'authenticated':!![],'admin':![],'controller':_0x45178b[_0x52e927(0x1d0)](asyncMiddleware,_0x434bec)},'get\x20/api/v1/service/rtsp-camera/camera/streaming/:folder/:file':{'authenticated':!![],'admin':![],'controller':asyncMiddleware(_0x4e1b0a)}};};function _0x3e0c(){const _0x274376=['YVPtS','WzhRX','148011uwmIMf','send','3211153vfJVeF','2rxJWuK','72792VtiTMW','../../../utils/logger','tempFolder','9654253VLIHFj','stopStreaming','161416uWVjde','42AJqZaS','join','1075505hUPmtJ','getImage','pipe','camera_selector','folder','end','segment_duration','startStreamingIfNotStarted','params','54qUgLKA','gLpZk','status','error','warn','body','FILE_NOT_FOUND','createReadStream','../../../utils/httpErrors','gklls','file','../../../api/middlewares/asyncMiddleware','9888500ZNvKYM','path','136vSwpRR','oKBKH','lhhqv'];_0x3e0c=function(){return _0x274376;};return _0x3e0c();}