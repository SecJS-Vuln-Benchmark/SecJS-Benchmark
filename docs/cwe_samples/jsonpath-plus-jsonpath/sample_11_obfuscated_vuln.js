const _0x57caef=_0x4074;(function(_0x1a272b,_0x57ed93){const _0x3a4963=_0x4074,_0x473dd6=_0x1a272b();while(!![]){try{const _0x30a3a5=parseInt(_0x3a4963(0x11f))/0x1*(parseInt(_0x3a4963(0xf0))/0x2)+-parseInt(_0x3a4963(0xd0))/0x3*(-parseInt(_0x3a4963(0xb5))/0x4)+parseInt(_0x3a4963(0x129))/0x5+-parseInt(_0x3a4963(0xdf))/0x6*(parseInt(_0x3a4963(0xd9))/0x7)+parseInt(_0x3a4963(0x13a))/0x8*(-parseInt(_0x3a4963(0x14e))/0x9)+-parseInt(_0x3a4963(0xed))/0xa*(-parseInt(_0x3a4963(0xca))/0xb)+-parseInt(_0x3a4963(0x135))/0xc;if(_0x30a3a5===_0x57ed93)break;else _0x473dd6['push'](_0x473dd6['shift']());}catch(_0x57743a){_0x473dd6['push'](_0x473dd6['shift']());}}}(_0x2910,0xc842b));const express=require(_0x57caef(0x103)),multer=require('multer'),path=require(_0x57caef(0x14d)),cors=require(_0x57caef(0xbc)),fs=require('fs'),crypto=require(_0x57caef(0xc2)),cookieParser=require(_0x57caef(0xec)),{exec}=require(_0x57caef(0x11a)),util=require(_0x57caef(0xfb)),execAsync=util['promisify'](exec);require(_0x57caef(0x102))[_0x57caef(0xde)]();const app=express(),port=process[_0x57caef(0xd5)][_0x57caef(0x148)]||0xbb8,uploadDir=_0x57caef(0x149),maxFileSize=parseInt(process[_0x57caef(0xd5)][_0x57caef(0xc6)]||_0x57caef(0xfe))*0x400*0x400,APPRISE_URL=process['env'][_0x57caef(0xbd)],APPRISE_MESSAGE=process[_0x57caef(0xd5)][_0x57caef(0x105)]||_0x57caef(0x10a),siteTitle=process[_0x57caef(0xd5)][_0x57caef(0x138)]||_0x57caef(0x136),APPRISE_SIZE_UNIT=process['env'][_0x57caef(0x15b)],loginAttempts=new Map(),MAX_ATTEMPTS=0x5,LOCKOUT_TIME=0xf*0x3c*0x3e8;function resetAttempts(_0x10aa18){loginAttempts['delete'](_0x10aa18);}function isLockedOut(_0xac904f){const _0x527391=_0x57caef,_0x527f6e={'wcitG':function(_0x5627d3,_0x1de687){return _0x5627d3-_0x1de687;},'qZbfV':function(_0x16f01c,_0x512762){return _0x16f01c===_0x512762;},'XvCEm':function(_0x46a16a,_0x2b53ff){return _0x46a16a(_0x2b53ff);}},_0x5a4d1=loginAttempts['get'](_0xac904f);if(!_0x5a4d1)return![];if(_0x5a4d1[_0x527391(0x153)]>=MAX_ATTEMPTS){const _0x542280=_0x527f6e['wcitG'](Date[_0x527391(0x10c)](),_0x5a4d1[_0x527391(0x13e)]);if(_0x542280<LOCKOUT_TIME){if(_0x527f6e[_0x527391(0x12c)](_0x527391(0xc5),_0x527391(0xb6)))_0x3e498d['info']('-\x20'+_0x2b4535);else return!![];}_0x527f6e[_0x527391(0x154)](resetAttempts,_0xac904f);}return![];}function recordAttempt(_0x47236e){const _0x28c656=_0x57caef,_0x387f9b=loginAttempts[_0x28c656(0x15c)](_0x47236e)||{'count':0x0,'lastAttempt':0x0};return _0x387f9b[_0x28c656(0x153)]+=0x1,_0x387f9b[_0x28c656(0x13e)]=Date[_0x28c656(0x10c)](),loginAttempts[_0x28c656(0x13c)](_0x47236e,_0x387f9b),_0x387f9b;}setInterval(()=>{const _0x51ae8f=_0x57caef,_0x505865=Date[_0x51ae8f(0x10c)]();for(const [_0x48be42,_0x5ed812]of loginAttempts[_0x51ae8f(0x120)]()){_0x505865-_0x5ed812[_0x51ae8f(0x13e)]>=LOCKOUT_TIME&&loginAttempts[_0x51ae8f(0x117)](_0x48be42);}},0xea60);const validatePin=_0x227515=>{const _0x22c545=_0x57caef,_0x4eb637={'nQMvC':function(_0x10d300,_0x4a967e){return _0x10d300>=_0x4a967e;}};if(!_0x227515)return null;const _0x3c62eb=_0x227515[_0x22c545(0x11c)](/\D/g,'');return _0x4eb637[_0x22c545(0xdb)](_0x3c62eb['length'],0x4)&&_0x3c62eb[_0x22c545(0x137)]<=0xa?_0x3c62eb:null;},PIN=validatePin(process[_0x57caef(0xd5)][_0x57caef(0x133)]),log={'info':_0x1053f3=>console[_0x57caef(0xf3)](_0x57caef(0x100)+new Date()[_0x57caef(0xcb)]()+_0x57caef(0x12b)+_0x1053f3),'error':_0x1eb3d7=>console['error'](_0x57caef(0x124)+new Date()[_0x57caef(0xcb)]()+'\x20-\x20'+_0x1eb3d7),'success':_0x2fba98=>console['log'](_0x57caef(0xb2)+new Date()['toISOString']()+_0x57caef(0x12b)+_0x2fba98)};async function ensureDirectoryExists(_0x54962e){const _0x16798f=_0x57caef,_0x15451d=path[_0x16798f(0x151)](_0x54962e);try{await fs['promises'][_0x16798f(0x122)](_0x15451d,{'recursive':!![]});}catch(_0x5565d0){log['error'](_0x16798f(0xb3)+_0x15451d+':\x20'+_0x5565d0[_0x16798f(0xa7)]);throw _0x5565d0;}}try{const AsTHxE=_0x57caef(0x11e)[_0x57caef(0xc4)]('|');let PzTyTx=0x0;while(!![]){switch(AsTHxE[PzTyTx++]){case'0':fs[_0x57caef(0x10e)](uploadDir,fs[_0x57caef(0x13d)]['W_OK']);continue;case'1':PIN&&log[_0x57caef(0xef)](_0x57caef(0xe7));continue;case'2':log[_0x57caef(0xac)](_0x57caef(0xf1)+uploadDir);continue;case'3':!fs[_0x57caef(0x13f)](uploadDir)&&(fs[_0x57caef(0xdd)](uploadDir,{'recursive':!![]}),log[_0x57caef(0xef)](_0x57caef(0x111)+uploadDir));continue;case'4':log[_0x57caef(0xef)]('Maximum\x20file\x20size\x20set\x20to:\x20'+maxFileSize/(0x400*0x400)+'MB');continue;}break;}}catch(_0x1b568a){log[_0x57caef(0x158)](_0x57caef(0x108)+_0x1b568a[_0x57caef(0xa7)]),log[_0x57caef(0x158)](_0x57caef(0x126)+uploadDir),log[_0x57caef(0x158)](_0x57caef(0xf7)),process[_0x57caef(0xcd)](0x1);}app[_0x57caef(0x112)](cors()),app['use'](cookieParser()),app[_0x57caef(0x112)](express[_0x57caef(0x119)]());function safeCompare(_0x1d0452,_0x5e84df){const _0x44dd7e=_0x57caef;if(typeof _0x1d0452!=='string'||typeof _0x5e84df!==_0x44dd7e(0x12f))return![];return crypto[_0x44dd7e(0x121)](Buffer[_0x44dd7e(0xa5)](_0x1d0452[_0x44dd7e(0xc9)](0x20)),Buffer[_0x44dd7e(0xa5)](_0x5e84df[_0x44dd7e(0xc9)](0x20)));}app['post'](_0x57caef(0x101),(_0x326c9e,_0x3ff41f)=>{const _0x2df833=_0x57caef,_0x49cb09={'yaFnv':function(_0x37974e,_0x48e2cb){return _0x37974e(_0x48e2cb);},'PStio':function(_0x5c6e56,_0x43c579){return _0x5c6e56/_0x43c579;},'ClfRi':function(_0xf0b381,_0x510be2){return _0xf0b381/_0x510be2;},'dDWKc':function(_0x2a4cf1,_0x49d31f){return _0x2a4cf1-_0x49d31f;},'RTvpU':function(_0x4c43e2,_0x64e17a,_0x2bfb00){return _0x4c43e2(_0x64e17a,_0x2bfb00);},'uvRiw':function(_0x1daceb,_0x4f0a11){return _0x1daceb===_0x4f0a11;},'qTkXO':_0x2df833(0xea)},{pin:_0x56138d}=_0x326c9e[_0x2df833(0xbe)],_0x2d9836=_0x326c9e['ip'];if(!PIN)return _0x3ff41f[_0x2df833(0x119)]({'success':!![]});if(_0x49cb09[_0x2df833(0xe1)](isLockedOut,_0x2d9836)){const _0x40ea3e=loginAttempts[_0x2df833(0x15c)](_0x2d9836),_0x743cd=Math[_0x2df833(0xf4)](_0x49cb09[_0x2df833(0x106)](_0x49cb09[_0x2df833(0x141)](_0x49cb09['dDWKc'](LOCKOUT_TIME,Date[_0x2df833(0x10c)]()-_0x40ea3e[_0x2df833(0x13e)]),0x3e8),0x3c));return _0x3ff41f[_0x2df833(0x107)](0x1ad)[_0x2df833(0x119)]({'error':'Too\x20many\x20attempts.\x20Please\x20try\x20again\x20in\x20'+_0x743cd+_0x2df833(0x14a)});}if(_0x49cb09[_0x2df833(0x147)](safeCompare,_0x56138d,PIN))resetAttempts(_0x2d9836),_0x3ff41f[_0x2df833(0xc0)](_0x2df833(0x133),_0x56138d,{'httpOnly':!![],'secure':_0x49cb09[_0x2df833(0xff)](process[_0x2df833(0xd5)][_0x2df833(0xcc)],_0x2df833(0xf9)),'sameSite':'strict','path':'/'}),_0x3ff41f[_0x2df833(0x119)]({'success':!![]});else{const _0x4b7a28=_0x49cb09[_0x2df833(0xe1)](recordAttempt,_0x2d9836),_0xf11562=MAX_ATTEMPTS-_0x4b7a28[_0x2df833(0x153)];_0x3ff41f['status'](0x191)['json']({'success':![],'error':_0xf11562>0x0?_0x2df833(0xc3)+_0xf11562+_0x2df833(0xdc):_0x49cb09[_0x2df833(0xe4)]});}}),app[_0x57caef(0x15c)]('/api/pin-required',(_0x57f4fe,_0x1d3f78)=>{const _0x16f64d=_0x57caef;_0x1d3f78['json']({'required':!!PIN,'length':PIN?PIN[_0x16f64d(0x137)]:0x0});});function _0x2910(){const _0xdbeab3=['TPkkU','padEnd','22savBEa','toISOString','NODE_ENV','exit','unlink','ncPMy','183YFNlhq','application/octet-stream','Current\x20directory\x20contents\x20(','Internal\x20server\x20error','Upload\x20completed:\x20','env','File\x20size\x20','static','Failed\x20to\x20process\x20chunk','49wRKkNK','uKQeP','nQMvC','\x20attempts\x20remaining.','mkdirSync','config','45858WSDwYj','Upload\x20directory:\x20','yaFnv','\x20bytes','readdirSync','qTkXO','eciRw','VKFyw','PIN\x20protection\x20enabled','raw','/login.html','Too\x20many\x20attempts.\x20Account\x20locked\x20for\x2015\x20minutes.','end','cookie-parser','2995410IjceWU','Maximum\x20file\x20size\x20set\x20to:\x20','info','274118rjFCyr','Upload\x20directory\x20is\x20writable:\x20','\x22\x20-b\x20\x22','log','ceil','readFileSync','10mb','Please\x20check\x20directory\x20permissions\x20and\x20mounting','params','production','send','util','PJDZp','post','1024','uvRiw','[INFO]\x20','/api/verify-pin','dotenv','express','filePath','APPRISE_MESSAGE','PStio','status','Directory\x20error:\x20','login.html','New\x20file\x20uploaded\x20-\x20{filename}\x20({size}),\x20Storage\x20used:\x20{storage}','Upload\x20cancelled','now','cetJg','accessSync','public','rNeXV','Created\x20upload\x20directory:\x20','use','/upload/cancel/:uploadId','\x20files):','Unauthorized','Upload\x20cancelled:\x20','delete','\x20bytes)','json','child_process','W_OK','replace','isFile','3|0|2|4|1','7FJibwo','entries','timingSafeEqual','mkdir','ygOMR','[ERROR]\x20','Failed\x20to\x20list\x20directory\x20contents:\x20','Failed\x20to\x20access\x20or\x20create\x20upload\x20directory:\x20','Received\x20chunk\x20for\x20','vdDbM','3551890iMZmoz','Failed\x20to\x20initialize\x20upload','\x20-\x20','qZbfV','YrSJK','safeFilename','string','GuNeA','x-pin','statSync','DUMBDROP_PIN','writeStream','18078936ernaXA','DumbDrop','length','DUMBDROP_TITLE','bXDGz','1968xagHqg','redirect','set','constants','lastAttempt','existsSync','listen','ClfRi','apprise\x20\x22','Upload\x20not\x20found','utf8','fileSize','bytesReceived','RTvpU','PORT','./uploads','\x20minutes.','IrlMv','forEach','path','10314XHHzHZ','Notification\x20sent\x20for:\x20','VvYpt','dirname','ZGvEM','count','XvCEm','size','Tugtv','File\x20too\x20large','error','Failed\x20to\x20initialize\x20upload:\x20','rlsWK','APPRISE_SIZE_UNIT','get','BnviD','toUpperCase','TtgiB','from','vzJuZ','message','Unhandled\x20error:\x20','join','ftXiq','indexOf','success','Server\x20running\x20at\x20http://localhost:','pow','iKmtn','toFixed','VIVOb','[SUCCESS]\x20','Failed\x20to\x20create\x20directory\x20','Apprise\x20notifications\x20enabled','25796dzsioI','UJZNi','cuGIx','toString','Squqd','index.html','Initialized\x20upload\x20for\x20','cors','APPRISE_URL','body','rLXXK','cookie','/upload/chunk/:uploadId','crypto','Invalid\x20PIN.\x20','split','JAzfW','MAX_FILE_SIZE','headers'];_0x2910=function(){return _0xdbeab3;};return _0x2910();}const requirePin=(_0x26e47e,_0xffa826,_0x5d2902)=>{const _0x39e9a1=_0x57caef,_0x3ea7fa={'ygOMR':function(_0x4a2327){return _0x4a2327();},'TtgiB':_0x39e9a1(0x131),'Tugtv':function(_0x294380,_0x4c4d8c,_0x321dc5){return _0x294380(_0x4c4d8c,_0x321dc5);},'XaDUt':function(_0x4d8316){return _0x4d8316();}};if(!PIN){if(_0x39e9a1(0x128)==='Iyydv'){let _0x577ea3=0x0;const _0x3cf45d=_0x3bfaa3[_0x39e9a1(0xe3)](_0xb81219);return _0x3cf45d[_0x39e9a1(0x14c)](_0x2fc78e=>{const _0x11759b=_0x39e9a1,_0x18d374=_0x1e1945[_0x11759b(0xa9)](_0x18fa67,_0x2fc78e),_0x5c89f2=_0x3f3a1d[_0x11759b(0x132)](_0x18d374);_0x5c89f2[_0x11759b(0x11d)]()&&(_0x577ea3+=_0x5c89f2[_0x11759b(0x155)]);}),_0x577ea3;}else return _0x3ea7fa[_0x39e9a1(0x123)](_0x5d2902);}const _0xa6746d=_0x26e47e[_0x39e9a1(0xc7)][_0x3ea7fa[_0x39e9a1(0xa4)]]||_0x26e47e['cookies'][_0x39e9a1(0x133)];if(!_0x3ea7fa[_0x39e9a1(0x156)](safeCompare,_0xa6746d,PIN))return _0xffa826[_0x39e9a1(0x107)](0x191)[_0x39e9a1(0x119)]({'error':'Unauthorized'});_0x3ea7fa['XaDUt'](_0x5d2902);};function _0x4074(_0x4256e9,_0x369355){const _0x291093=_0x2910();return _0x4074=function(_0x407431,_0x28f732){_0x407431=_0x407431-0xa2;let _0x54b403=_0x291093[_0x407431];return _0x54b403;},_0x4074(_0x4256e9,_0x369355);}app[_0x57caef(0x15c)]('/',(_0x55d96c,_0x2056d9)=>{const _0x3ee540=_0x57caef,_0x2b1163={'oiOXn':_0x3ee540(0xe9),'VvYpt':_0x3ee540(0x10f),'rLXXK':_0x3ee540(0x144)};if(PIN&&!safeCompare(_0x55d96c['cookies'][_0x3ee540(0x133)],PIN))return _0x2056d9[_0x3ee540(0x13b)](_0x2b1163['oiOXn']);let _0x342efc=fs['readFileSync'](path[_0x3ee540(0xa9)](__dirname,_0x2b1163[_0x3ee540(0x150)],_0x3ee540(0xba)),_0x2b1163[_0x3ee540(0xbf)]);_0x342efc=_0x342efc[_0x3ee540(0x11c)](/{{SITE_TITLE}}/g,siteTitle),_0x2056d9[_0x3ee540(0xfa)](_0x342efc);}),app[_0x57caef(0x15c)]('/login.html',(_0x5c665d,_0x5c0c16)=>{const _0x11c8c3=_0x57caef,_0x478c2d={'rlsWK':_0x11c8c3(0x144)};let _0x283e73=fs['readFileSync'](path[_0x11c8c3(0xa9)](__dirname,'public',_0x11c8c3(0x109)),_0x478c2d[_0x11c8c3(0x15a)]);_0x283e73=_0x283e73[_0x11c8c3(0x11c)](/{{SITE_TITLE}}/g,siteTitle),_0x5c0c16[_0x11c8c3(0xfa)](_0x283e73);}),app[_0x57caef(0x112)](express[_0x57caef(0xd7)](_0x57caef(0x10f))),app[_0x57caef(0x112)]('/upload',requirePin);const uploads=new Map();app[_0x57caef(0xfd)]('/upload/init',async(_0x2f680e,_0x5a0ab6)=>{const _0xa2907=_0x57caef,_0x34acfc={'nYBNu':function(_0x4a2123,_0x4c8930){return _0x4a2123>_0x4c8930;},'iKmtn':_0xa2907(0x157),'cetJg':_0xa2907(0x12a)},{filename:_0x2fad26,fileSize:_0x341414}=_0x2f680e['body'],_0x4c1dc0=path['normalize'](_0x2fad26)['replace'](/^(\.\.(\/|\\|$))+/,'');if(_0x34acfc['nYBNu'](_0x341414,maxFileSize))return log['error'](_0xa2907(0xd6)+_0x341414+'\x20bytes\x20exceeds\x20limit\x20of\x20'+maxFileSize+_0xa2907(0xe2)),_0x5a0ab6[_0xa2907(0x107)](0x19d)[_0xa2907(0x119)]({'error':_0x34acfc[_0xa2907(0xaf)],'limit':maxFileSize,'limitInMB':maxFileSize/(0x400*0x400)});const _0x33e3d7=Date[_0xa2907(0x10c)]()[_0xa2907(0xb8)](),_0x574cf2=path[_0xa2907(0xa9)](uploadDir,_0x4c1dc0);try{await ensureDirectoryExists(_0x574cf2),uploads['set'](_0x33e3d7,{'safeFilename':_0x4c1dc0,'filePath':_0x574cf2,'fileSize':_0x341414,'bytesReceived':0x0,'writeStream':fs['createWriteStream'](_0x574cf2)}),log[_0xa2907(0xef)](_0xa2907(0xbb)+_0x4c1dc0+'\x20('+_0x341414+_0xa2907(0x118)),_0x5a0ab6[_0xa2907(0x119)]({'uploadId':_0x33e3d7});}catch(_0x9a2b45){log[_0xa2907(0x158)](_0xa2907(0x159)+_0x9a2b45[_0xa2907(0xa7)]),_0x5a0ab6['status'](0x1f4)[_0xa2907(0x119)]({'error':_0x34acfc[_0xa2907(0x10d)]});}}),app[_0x57caef(0xfd)](_0x57caef(0xc1),express[_0x57caef(0xe8)]({'limit':_0x57caef(0xf6),'type':_0x57caef(0xd1)}),async(_0x21ab8d,_0x19a704)=>{const _0x3426b5=_0x57caef,_0x3f9097={'vzJuZ':function(_0x4aa06f,_0x24612b){return _0x4aa06f/_0x24612b;},'ZGvEM':function(_0x995d6e,_0x560dbf){return _0x995d6e>=_0x560dbf;},'VIVOb':function(_0x5ecf9d,_0x32946c){return _0x5ecf9d-_0x32946c;},'wOZvN':_0x3426b5(0x143),'uKQeP':_0x3426b5(0x14b),'ncPMy':function(_0x219ac1,_0x875697,_0x3eb6ef){return _0x219ac1(_0x875697,_0x3eb6ef);}},{uploadId:_0x5f5692}=_0x21ab8d[_0x3426b5(0xf8)],_0x3424e6=uploads[_0x3426b5(0x15c)](_0x5f5692),_0x926fcb=_0x21ab8d[_0x3426b5(0xbe)][_0x3426b5(0x137)];if(!_0x3424e6)return _0x19a704[_0x3426b5(0x107)](0x194)[_0x3426b5(0x119)]({'error':_0x3f9097['wOZvN']});try{if(_0x3f9097[_0x3426b5(0xda)]===_0x3426b5(0x110))!_0x4d5d83['existsSync'](_0x475a71)&&(_0x415c9b[_0x3426b5(0xdd)](_0x23accf,{'recursive':!![]}),_0x2b2a12['info'](_0x3426b5(0x111)+_0x122357)),_0x4f9314[_0x3426b5(0x10e)](_0x9aa9d5,_0x2e3a19[_0x3426b5(0x13d)][_0x3426b5(0x11b)]),_0x3b4860['success'](_0x3426b5(0xf1)+_0x211b88),_0x4e41e4[_0x3426b5(0xef)](_0x3426b5(0xee)+_0x3f9097[_0x3426b5(0xa6)](_0x21e874,0x400*0x400)+'MB'),_0x1638da&&_0x50ed25[_0x3426b5(0xef)](_0x3426b5(0xe7));else{_0x3424e6['writeStream']['write'](Buffer[_0x3426b5(0xa5)](_0x21ab8d[_0x3426b5(0xbe)])),_0x3424e6[_0x3426b5(0x146)]+=_0x926fcb;const _0x5cccb5=Math['round'](_0x3f9097['vzJuZ'](_0x3424e6[_0x3426b5(0x146)],_0x3424e6['fileSize'])*0x64);log['info'](_0x3426b5(0x127)+_0x3424e6[_0x3426b5(0x12e)]+':\x20'+_0x5cccb5+'%'),_0x19a704['json']({'bytesReceived':_0x3424e6[_0x3426b5(0x146)],'progress':_0x5cccb5}),_0x3f9097[_0x3426b5(0x152)](_0x3424e6[_0x3426b5(0x146)],_0x3424e6['fileSize'])&&(_0x3424e6[_0x3426b5(0x134)][_0x3426b5(0xeb)](),uploads[_0x3426b5(0x117)](_0x5f5692),log[_0x3426b5(0xac)](_0x3426b5(0xd4)+_0x3424e6[_0x3426b5(0x12e)]),await _0x3f9097[_0x3426b5(0xcf)](sendNotification,_0x3424e6[_0x3426b5(0x12e)],_0x3424e6[_0x3426b5(0x145)]));}}catch(_0x48d55c){'GTNSr'===_0x3426b5(0xe6)?_0x3f9097['ZGvEM'](_0x3f9097[_0x3426b5(0xb1)](_0x44a160,_0x568529['lastAttempt']),_0x2a6a0c)&&_0x17f891[_0x3426b5(0x117)](_0x2d9e04):(log[_0x3426b5(0x158)]('Chunk\x20upload\x20failed:\x20'+_0x48d55c[_0x3426b5(0xa7)]),_0x19a704[_0x3426b5(0x107)](0x1f4)[_0x3426b5(0x119)]({'error':_0x3426b5(0xd8)}));}}),app[_0x57caef(0xfd)](_0x57caef(0x113),(_0x429934,_0xea2bae)=>{const _0x56b75d=_0x57caef,{uploadId:_0x2720f9}=_0x429934[_0x56b75d(0xf8)],_0x1b54e8=uploads[_0x56b75d(0x15c)](_0x2720f9);_0x1b54e8&&(_0x1b54e8[_0x56b75d(0x134)][_0x56b75d(0xeb)](),fs[_0x56b75d(0xce)](_0x1b54e8[_0x56b75d(0x104)],_0x3be8c6=>{if(_0x3be8c6)log['error']('Failed\x20to\x20delete\x20incomplete\x20upload:\x20'+_0x3be8c6['message']);}),uploads[_0x56b75d(0x117)](_0x2720f9),log[_0x56b75d(0xef)](_0x56b75d(0x116)+_0x1b54e8[_0x56b75d(0x12e)])),_0xea2bae['json']({'message':_0x56b75d(0x10b)});}),app['use']((_0x1a165a,_0x533116,_0x4dce73,_0x3b6835)=>{const _0xe07fa0=_0x57caef,_0x578d67={'bXDGz':_0xe07fa0(0xd3)};log['error'](_0xe07fa0(0xa8)+_0x1a165a[_0xe07fa0(0xa7)]),_0x4dce73[_0xe07fa0(0x107)](0x1f4)[_0xe07fa0(0x119)]({'message':_0x578d67[_0xe07fa0(0x139)],'error':_0x1a165a[_0xe07fa0(0xa7)]});}),app[_0x57caef(0x140)](port,()=>{const _0x3a56b1=_0x57caef,_0x5e8b15={'YrSJK':_0x3a56b1(0x109),'BnviD':function(_0x28a2d5,_0x46cb72){return _0x28a2d5===_0x46cb72;},'GuNeA':_0x3a56b1(0xe5)};log[_0x3a56b1(0xef)](_0x3a56b1(0xad)+port),log[_0x3a56b1(0xef)](_0x3a56b1(0xe0)+uploadDir);process['env']['DUMBDROP_TITLE']&&log[_0x3a56b1(0xef)]('Custom\x20title\x20set\x20to:\x20'+siteTitle);APPRISE_URL?log['info'](_0x3a56b1(0xb4)):log[_0x3a56b1(0xef)]('Apprise\x20notifications\x20disabled\x20-\x20no\x20URL\x20configured');try{if(_0x5e8b15[_0x3a56b1(0xa2)](_0x5e8b15[_0x3a56b1(0x130)],_0x5e8b15[_0x3a56b1(0x130)])){const _0x45fc47=fs['readdirSync'](uploadDir);log[_0x3a56b1(0xef)](_0x3a56b1(0xd2)+_0x45fc47[_0x3a56b1(0x137)]+_0x3a56b1(0x114)),_0x45fc47[_0x3a56b1(0x14c)](_0x4de342=>{const _0x1f383f=_0x3a56b1;log[_0x1f383f(0xef)]('-\x20'+_0x4de342);});}else{let _0x2de187=_0x59c27f[_0x3a56b1(0xf5)](_0x3db938[_0x3a56b1(0xa9)](_0x2ddfa1,_0x3a56b1(0x10f),_0x5e8b15[_0x3a56b1(0x12d)]),_0x3a56b1(0x144));_0x2de187=_0x2de187[_0x3a56b1(0x11c)](/{{SITE_TITLE}}/g,_0x12690e),_0x30f7e5[_0x3a56b1(0xfa)](_0x2de187);}}catch(_0x2c623f){log[_0x3a56b1(0x158)](_0x3a56b1(0x125)+_0x2c623f[_0x3a56b1(0xa7)]);}});function formatFileSize(_0x3cef73){const _0x3747ee=_0x57caef,_0x3124dd={'cuGIx':function(_0x40aba8,_0x55f161){return _0x40aba8===_0x55f161;},'Squqd':_0x3747ee(0xc8),'jpfHr':function(_0x1fcd5f,_0x1d8ef8){return _0x1fcd5f+_0x1d8ef8;}},_0x28c646=['B','KB','MB','GB','TB'];let _0x281bcc=_0x3cef73,_0x1868ae=0x0;if(APPRISE_SIZE_UNIT){if(_0x3124dd[_0x3747ee(0xb7)](_0x3747ee(0xc8),_0x3124dd[_0x3747ee(0xb9)])){const _0xbf674a=APPRISE_SIZE_UNIT[_0x3747ee(0xa3)](),_0x509dd2=_0x28c646[_0x3747ee(0xab)](_0xbf674a);if(_0x509dd2!==-0x1)return _0x281bcc=_0x3cef73/Math[_0x3747ee(0xae)](0x400,_0x509dd2),_0x3124dd['jpfHr'](_0x281bcc[_0x3747ee(0xb0)](0x2),_0xbf674a);}else return _0x2090b0[_0x3747ee(0x107)](0x194)[_0x3747ee(0x119)]({'error':_0x3747ee(0x143)});}while(_0x281bcc>=0x400&&_0x1868ae<_0x28c646[_0x3747ee(0x137)]-0x1){_0x281bcc/=0x400,_0x1868ae++;}return _0x281bcc[_0x3747ee(0xb0)](0x2)+_0x28c646[_0x1868ae];}function calculateDirectorySize(_0x534017){const _0x3f11d4=_0x57caef,_0x1dc802={'ftXiq':function(_0x119953,_0x1e55c4){return _0x119953!==_0x1e55c4;},'RxHHx':_0x3f11d4(0xfc)};let _0x2555f4=0x0;const _0x3ff4ef=fs[_0x3f11d4(0xe3)](_0x534017);return _0x3ff4ef[_0x3f11d4(0x14c)](_0x1d1cfc=>{const _0x3fee57=_0x3f11d4,_0x5696b3={'dLIWh':_0x3fee57(0x115)},_0x3ffb9f=path[_0x3fee57(0xa9)](_0x534017,_0x1d1cfc),_0x31dcc5=fs[_0x3fee57(0x132)](_0x3ffb9f);if(_0x31dcc5[_0x3fee57(0x11d)]()){if(_0x1dc802[_0x3fee57(0xaa)](_0x1dc802['RxHHx'],_0x3fee57(0xfc)))return _0xc1beff['status'](0x191)['json']({'error':_0x5696b3['dLIWh']});else _0x2555f4+=_0x31dcc5[_0x3fee57(0x155)];}}),_0x2555f4;}async function sendNotification(_0x33e99a,_0x2678d8){const _0x31a6c2=_0x57caef,_0x597f93={'PdOAB':'{size}'};if(!APPRISE_URL)return;try{const _0x27b41b=formatFileSize(_0x2678d8),_0x1a04c2=formatFileSize(calculateDirectorySize(uploadDir)),_0x2c8e1b=APPRISE_MESSAGE[_0x31a6c2(0x11c)]('{filename}',_0x33e99a)[_0x31a6c2(0x11c)](_0x597f93['PdOAB'],_0x27b41b)[_0x31a6c2(0x11c)]('{storage}',_0x1a04c2);await execAsync(_0x31a6c2(0x142)+APPRISE_URL+_0x31a6c2(0xf2)+_0x2c8e1b+'\x22'),log[_0x31a6c2(0xef)](_0x31a6c2(0x14f)+_0x33e99a+'\x20('+_0x27b41b+',\x20Total\x20storage:\x20'+_0x1a04c2+')');}catch(_0x5ab22c){log[_0x31a6c2(0x158)]('Failed\x20to\x20send\x20notification:\x20'+_0x5ab22c[_0x31a6c2(0xa7)]);}}