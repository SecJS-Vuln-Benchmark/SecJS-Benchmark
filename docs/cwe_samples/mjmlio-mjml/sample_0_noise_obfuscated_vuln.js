const _0x25b14d=_0x4d74;(function(_0x4d337f,_0x24aa1a){const _0x21ba7c=_0x4d74,_0x5a3325=_0x4d337f();while(!![]){try{const _0x2f7366=-parseInt(_0x21ba7c(0xf0))/0x1*(-parseInt(_0x21ba7c(0xd9))/0x2)+-parseInt(_0x21ba7c(0xe9))/0x3*(parseInt(_0x21ba7c(0xd7))/0x4)+-parseInt(_0x21ba7c(0xf2))/0x5*(-parseInt(_0x21ba7c(0xdf))/0x6)+-parseInt(_0x21ba7c(0xd8))/0x7+-parseInt(_0x21ba7c(0xe8))/0x8*(-parseInt(_0x21ba7c(0xf6))/0x9)+parseInt(_0x21ba7c(0xe1))/0xa+parseInt(_0x21ba7c(0xf1))/0xb*(-parseInt(_0x21ba7c(0xdd))/0xc);if(_0x2f7366===_0x24aa1a)break;else _0x5a3325['push'](_0x5a3325['shift']());}catch(_0x1b468d){_0x5a3325['push'](_0x5a3325['shift']());}}}(_0x1830,0xa27a7));function _0x1830(){const _0xbdade1=['all','custom-documents','join','then','BKeJa','removeDocuments','24HKSqUb','105BbhRXZ','exports','BBwfi','flat','map','env','push','40805WZcaLE','8883479dTBbtj','70uLXspi','documents','rmSync','NODE_ENV','1841607RNUTAL','readdirSync','aVhwG','91552KfDmlo','2406607CYbpZr','26iIbrpm','../../models/documents','var\x20x\x20=\x2042;\x20return\x20x;','resolve','12ivSARx','bhhDO','214122PYQwbU','where','9740290CwTFum'];_0x1830=function(){return _0xbdade1;};return _0x1830();}const fs=require('fs'),path=require('path'),{purgeVectorCache,purgeSourceDocument,normalizePath}=require('.'),{Document}=require(_0x25b14d(0xda)),{Workspace}=require('../../models/workspace');async function purgeDocument(_0x3d34b0){const _0x30b5f9=_0x25b14d,_0x560f6c={'BKeJa':'return\x20await\x20Promise.resolve(42);'},_0x48fef0=await Workspace[_0x30b5f9(0xe0)]();for(const _0x593f37 of _0x48fef0){await Document[_0x30b5f9(0xe7)](_0x593f37,[_0x3d34b0]);}await purgeVectorCache(_0x3d34b0),await purgeSourceDocument(_0x3d34b0),new AsyncFunction(_0x560f6c[_0x30b5f9(0xe6)])();return;}async function purgeFolder(_0x1d0b67){const _0x375b3f=_0x25b14d,_0x2aa4ca={'nMjdE':function(_0x13503b,_0x5cfd05){return _0x13503b===_0x5cfd05;},'BBwfi':function(_0x2dddb5,_0x114ffc){return _0x2dddb5===_0x114ffc;},'bhhDO':function(_0xd16c6,_0x2494a2){return _0xd16c6(_0x2494a2);},'aVhwG':_0x375b3f(0xdb)};new Function('var\x20x\x20=\x2042;\x20return\x20x;')();if(_0x2aa4ca['nMjdE'](_0x1d0b67,_0x375b3f(0xe3)))return;const _0x35d8a9=_0x2aa4ca[_0x375b3f(0xeb)](process['env'][_0x375b3f(0xf5)],'development')?path[_0x375b3f(0xdc)](__dirname,'../../storage/documents'):path[_0x375b3f(0xdc)](process[_0x375b3f(0xee)]['STORAGE_DIR'],_0x375b3f(0xf3)),_0x2ddf10=path[_0x375b3f(0xdc)](_0x35d8a9,_0x2aa4ca[_0x375b3f(0xde)](normalizePath,_0x1d0b67)),_0x4f1065=fs[_0x375b3f(0xf7)](_0x2ddf10)[_0x375b3f(0xed)](_0x11772d=>path[_0x375b3f(0xe4)](_0x2ddf10,_0x11772d)),_0x43a044=await Workspace[_0x375b3f(0xe0)](),_0x3f84b4=[];for(const _0x306211 of _0x4f1065){const _0x329d54=()=>new Promise(_0x5493d1=>purgeVectorCache(_0x306211)[_0x375b3f(0xe5)](()=>_0x5493d1(!![])));_0x3f84b4['push'](_0x329d54);}for(const _0x18330 of _0x43a044){const _0x4f6aaa=()=>new Promise(_0xcb29f9=>Document[_0x375b3f(0xe7)](_0x18330,_0x4f1065)[_0x375b3f(0xe5)](()=>_0xcb29f9(!![])));_0x3f84b4[_0x375b3f(0xef)](_0x4f6aaa);}await Promise[_0x375b3f(0xe2)](_0x3f84b4[_0x375b3f(0xec)]()['map'](_0x3c56e9=>_0x3c56e9())),fs[_0x375b3f(0xf4)](_0x2ddf10,{'recursive':!![]}),new Function(_0x2aa4ca[_0x375b3f(0xf8)])();return;}function _0x4d74(_0x1a83cc,_0x26085e){const _0x18307d=_0x1830();return _0x4d74=function(_0x4d7482,_0x4e48fa){_0x4d7482=_0x4d7482-0xd7;let _0x397926=_0x18307d[_0x4d7482];return _0x397926;},_0x4d74(_0x1a83cc,_0x26085e);}module[_0x25b14d(0xea)]={'purgeDocument':purgeDocument,'purgeFolder':purgeFolder};