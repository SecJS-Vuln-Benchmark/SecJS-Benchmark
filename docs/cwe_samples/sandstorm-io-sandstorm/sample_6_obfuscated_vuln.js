(function(_0x4cfdb5,_0x1e872d){const _0x368615=_0x84b2,_0x505539=_0x4cfdb5();while(!![]){try{const _0x38033e=parseInt(_0x368615(0x11b))/0x1+-parseInt(_0x368615(0x10b))/0x2*(-parseInt(_0x368615(0x121))/0x3)+-parseInt(_0x368615(0x100))/0x4+parseInt(_0x368615(0x114))/0x5*(parseInt(_0x368615(0x11f))/0x6)+parseInt(_0x368615(0xf0))/0x7*(parseInt(_0x368615(0x105))/0x8)+parseInt(_0x368615(0x11c))/0x9*(parseInt(_0x368615(0xf9))/0xa)+-parseInt(_0x368615(0xe9))/0xb;if(_0x38033e===_0x1e872d)break;else _0x505539['push'](_0x505539['shift']());}catch(_0x3e5ebd){_0x505539['push'](_0x505539['shift']());}}}(_0x4022,0xae5d8));function _0x84b2(_0x4171fc,_0x20af49){const _0x4022b7=_0x4022();return _0x84b2=function(_0x84b2bc,_0x466c58){_0x84b2bc=_0x84b2bc-0xe7;let _0x125540=_0x4022b7[_0x84b2bc];return _0x125540;},_0x84b2(_0x4171fc,_0x20af49);}import{PubNubError,createValidationError}from'../../components/endpoint';const sendFile=function({generateUploadUrl:_0xd153e3,publishFile:_0x129daa,modules:{PubNubFile:_0x2b0e21,config:_0x4d0f0e,cryptography:_0x53631c,cryptoModule:_0x4d067b,networking:_0x262ecd}}){const _0x13de65=_0x84b2,_0xaf96c1={'UtrAc':'Validation\x20failed,\x20check\x20status\x20for\x20details','PcQCM':function(_0x712023,_0x45cbca){return _0x712023!==_0x45cbca;},'alHci':_0x13de65(0xfc),'gRxYX':_0x13de65(0x106),'jexgc':function(_0xdbc31e,_0x4cde4a){return _0xdbc31e!==_0x4cde4a;},'LaACO':_0x13de65(0xfe),'dCAwc':_0x13de65(0xe7),'bEbXY':_0x13de65(0x108),'cpzio':'Unsupported\x20environment','NKKXR':_0x13de65(0xfa),'kfckc':function(_0x28e3ea,_0x3694e2){return _0x28e3ea(_0x3694e2);},'IJowD':function(_0x37552a,_0x221941){return _0x37552a>_0x221941;},'XaMkc':_0x13de65(0x115)};return async({channel:_0x2614f4,file:_0x16e3aa,message:_0x16b5d2,cipherKey:_0x2aa40f,meta:_0x352524,ttl:_0x11b8a4,storeInHistory:_0x24140e})=>{const _0x14a2b6=_0x13de65,_0x4ebe41={'ztbrL':'Upload\x20to\x20bucket\x20was\x20unsuccessful'};if(!_0x2614f4)throw new PubNubError(_0x14a2b6(0x120),createValidationError(_0x14a2b6(0x10c)));if(!_0x16e3aa)throw new PubNubError(_0xaf96c1['UtrAc'],createValidationError(_0x14a2b6(0xef)));let _0x55f980=_0x2b0e21[_0x14a2b6(0x104)](_0x16e3aa);const {file_upload_request:{url:_0x29e75e,form_fields:_0x43d41d},data:{id:_0x2f84aa,name:_0x5687b1}}=await _0xd153e3({'channel':_0x2614f4,'name':_0x55f980[_0x14a2b6(0xec)]});_0x2b0e21[_0x14a2b6(0xea)]&&(_0x2aa40f||_0x4d067b)&&(_0x55f980=_0x2aa40f==null?await _0x4d067b[_0x14a2b6(0x10a)](_0x55f980,_0x2b0e21):await _0x53631c[_0x14a2b6(0x10a)](_0x2aa40f,_0x55f980,_0x2b0e21));let _0x39112c=_0x43d41d;if(_0x55f980['mimeType']){if(_0xaf96c1[_0x14a2b6(0x11a)](_0xaf96c1[_0x14a2b6(0x109)],_0xaf96c1[_0x14a2b6(0xf2)]))_0x39112c=_0x43d41d[_0x14a2b6(0x10f)](_0x1cdb5e=>{const _0x24629f=_0x14a2b6;if(_0x1cdb5e[_0x24629f(0xf8)]===_0x24629f(0xfb))return{'key':_0x1cdb5e['key'],'value':_0x55f980[_0x24629f(0xf4)]};return _0x1cdb5e;});else throw new _0xe98724(_0x4ebe41[_0x14a2b6(0xe8)],_0x59135f);}let _0x50a9a9;try{if(_0x14a2b6(0xee)!==_0x14a2b6(0x118)){if(_0x2b0e21['supportsFileUri']&&_0x16e3aa[_0x14a2b6(0xff)]){if(_0xaf96c1[_0x14a2b6(0x117)](_0xaf96c1['LaACO'],_0x14a2b6(0xfe)))return _0x5b6bae[_0x14a2b6(0x101)](_0x2f5a51=>_0x446f42(null,_0x2f5a51))[_0x14a2b6(0x11d)](_0x4b0c06=>_0x35ffc9(_0x4b0c06,null)),_0x407adc;else _0x50a9a9=await _0x262ecd[_0x14a2b6(0x116)](_0x29e75e,_0x39112c,await _0x55f980['toFileUri']());}else{if(_0x2b0e21['supportsFile']){if(_0xaf96c1[_0x14a2b6(0xf3)]===_0xaf96c1[_0x14a2b6(0x10e)]){if(_0x365aa0[_0x14a2b6(0xf8)]===_0x14a2b6(0xfb))return{'key':_0x5b0a34[_0x14a2b6(0xf8)],'value':_0x189424[_0x14a2b6(0xf4)]};return _0x23cc0b;}else _0x50a9a9=await _0x262ecd[_0x14a2b6(0x116)](_0x29e75e,_0x39112c,await _0x55f980['toFile']());}else{if(_0x2b0e21[_0x14a2b6(0x11e)])_0x50a9a9=await _0x262ecd[_0x14a2b6(0x116)](_0x29e75e,_0x39112c,await _0x55f980['toBuffer']());else{if(_0x2b0e21[_0x14a2b6(0x10d)])_0x50a9a9=await _0x262ecd[_0x14a2b6(0x116)](_0x29e75e,_0x39112c,await _0x55f980['toBlob']());else{if(_0xaf96c1[_0x14a2b6(0x117)](_0x14a2b6(0x110),'bkAQt')){const _0x2c1059=_0x23c1b8[_0x14a2b6(0xf6)][_0x14a2b6(0xf7)],_0x3769ec=/<Message>(.*)<\/Message>/gi[_0x14a2b6(0xf1)](_0x2c1059);throw new _0x5c6003(_0x3769ec?'Upload\x20to\x20bucket\x20failed:\x20'+_0x3769ec[0x1]:_0x14a2b6(0xfa),_0x211331);}else throw new Error(_0xaf96c1[_0x14a2b6(0xed)]);}}}}}else throw new _0x1b274c(_0x14a2b6(0x115),{'channel':_0x20a4de,'id':_0x288046,'name':_0x4685f6});}catch(_0x36637f){if(_0x36637f[_0x14a2b6(0xf6)]&&typeof _0x36637f[_0x14a2b6(0xf6)][_0x14a2b6(0xf7)]==='string'){const _0x20d1ea=_0x36637f[_0x14a2b6(0xf6)][_0x14a2b6(0xf7)],_0x498801=/<Message>(.*)<\/Message>/gi[_0x14a2b6(0xf1)](_0x20d1ea);throw new PubNubError(_0x498801?_0x14a2b6(0x111)+_0x498801[0x1]:_0x14a2b6(0xfa),_0x36637f);}else throw new PubNubError(_0xaf96c1[_0x14a2b6(0xfd)],_0x36637f);}if(_0xaf96c1['PcQCM'](_0x50a9a9[_0x14a2b6(0x102)],0xcc))throw new PubNubError('Upload\x20to\x20bucket\x20was\x20unsuccessful',_0x50a9a9);let _0x4f90d0=_0x4d0f0e[_0x14a2b6(0x119)],_0xef379e=![],_0x5f05f0={'timetoken':'0'};do{try{_0x5f05f0=await _0xaf96c1[_0x14a2b6(0x113)](_0x129daa,{'channel':_0x2614f4,'message':_0x16b5d2,'fileId':_0x2f84aa,'fileName':_0x5687b1,'meta':_0x352524,'storeInHistory':_0x24140e,'ttl':_0x11b8a4}),_0xef379e=!![];}catch(_0x3c2bcf){_0x4f90d0-=0x1;}}while(!_0xef379e&&_0xaf96c1[_0x14a2b6(0xeb)](_0x4f90d0,0x0));if(!_0xef379e)throw new PubNubError(_0xaf96c1['XaMkc'],{'channel':_0x2614f4,'id':_0x2f84aa,'name':_0x5687b1});else return{'timetoken':_0x5f05f0[_0x14a2b6(0xf5)],'id':_0x2f84aa,'name':_0x5687b1};};};function _0x4022(){const _0x19dddc=['Upload\x20to\x20bucket\x20failed.','Content-Type','CqQSc','NKKXR','PCeYO','uri','708968ZaAWAo','then','status','hgtIy','create','64tXaPGc','EnzRs','function','hKbmI','alHci','encryptFile','254YfijHC','channel\x20can\x27t\x20be\x20empty','supportsBlob','bEbXY','map','bkAQt','Upload\x20to\x20bucket\x20failed:\x20','yUdwO','kfckc','1185cirNrS','Publish\x20failed.\x20You\x20may\x20want\x20to\x20execute\x20that\x20operation\x20manually\x20using\x20pubnub.publishFile','POSTFILE','jexgc','MlvAc','fileUploadPublishRetryLimit','PcQCM','1399576nXUbjl','72bhIHOp','catch','supportsBuffer','27174ykbHnB','Validation\x20failed,\x20check\x20status\x20for\x20details','19299LvriXm','GBEvM','eFDzt','ztbrL','48252534wLIlFK','supportsEncryptFile','IJowD','name','cpzio','ICWxs','file\x20can\x27t\x20be\x20empty','603463UEKKNe','exec','gRxYX','dCAwc','mimeType','timetoken','response','text','key','1623030RGFiAH'];_0x4022=function(){return _0x19dddc;};return _0x4022();}export default _0x51ab44=>{const _0x3b764a=_0x84b2,_0x576c0e={'yUdwO':function(_0x4a9657,_0x202f52){return _0x4a9657!==_0x202f52;},'QPBPv':_0x3b764a(0x103),'augrj':_0x3b764a(0x122),'VfHyb':function(_0x270f20,_0x4b76f2){return _0x270f20(_0x4b76f2);}},_0x9598b7=_0x576c0e['VfHyb'](sendFile,_0x51ab44);return(_0x3b82af,_0x363f50)=>{const _0x2e5250=_0x3b764a;if(_0x576c0e[_0x2e5250(0x112)](_0x576c0e['QPBPv'],_0x576c0e['augrj'])){const _0x33fc70=_0x9598b7(_0x3b82af);if(typeof _0x363f50===_0x2e5250(0x107))return _0x33fc70[_0x2e5250(0x101)](_0x2a71=>_0x363f50(null,_0x2a71))[_0x2e5250(0x11d)](_0x2ae066=>_0x363f50(_0x2ae066,null)),_0x33fc70;return _0x33fc70;}else _0x16df22=_0x4a991c[_0x2e5250(0x10f)](_0xe7de3=>{const _0x50bb1d=_0x2e5250;if(_0xe7de3['key']===_0x50bb1d(0xfb))return{'key':_0xe7de3[_0x50bb1d(0xf8)],'value':_0x558fc2[_0x50bb1d(0xf4)]};return _0xe7de3;});};};