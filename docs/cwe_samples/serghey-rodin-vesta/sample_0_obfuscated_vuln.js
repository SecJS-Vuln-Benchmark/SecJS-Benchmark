const _0x501cb0=_0x354e;(function(_0x396a12,_0x5f1725){const _0x2f9962=_0x354e,_0x3a6d4e=_0x396a12();while(!![]){try{const _0x556937=-parseInt(_0x2f9962(0x88))/0x1+-parseInt(_0x2f9962(0x83))/0x2*(parseInt(_0x2f9962(0xd1))/0x3)+-parseInt(_0x2f9962(0xb5))/0x4+parseInt(_0x2f9962(0xe3))/0x5+-parseInt(_0x2f9962(0x7d))/0x6+parseInt(_0x2f9962(0xdd))/0x7*(-parseInt(_0x2f9962(0xa7))/0x8)+-parseInt(_0x2f9962(0x97))/0x9*(-parseInt(_0x2f9962(0xd2))/0xa);if(_0x556937===_0x5f1725)break;else _0x3a6d4e['push'](_0x3a6d4e['shift']());}catch(_0x51d58d){_0x3a6d4e['push'](_0x3a6d4e['shift']());}}}(_0x6463,0x7e4b4));function _0x6463(){const _0x23512b=['uDgYx','jNWnP','../../helpers/graph','findById','ZdVQm','split','You\x20are\x20not\x20authorized\x20to\x20assign\x20a\x20user\x20to\x20this\x20elevated\x20group.','revokeUserTokens','Cannot\x20assign\x20the\x20Guest\x20user\x20to\x20a\x20group.','groups','tLtIL','5|3|1|4|2|0|6','pageRules','data','theme','first','checkExclusiveAccess','$relatedQuery','path','write:groups','137829UCXiID','3589730RaPstX','permissions','navigation','REGEX','Invalid\x20User\x20ID','Invalid\x20Group\x20ID','FLxxG','user','gYwHY','stringify','reloadGroups','1250228ZtVMqm','BizLm','oyceG','relatedQuery','User\x20has\x20been\x20unassigned\x20from\x20group.','defaultPageRules','134120zOtRCH','Nincz','unrelate','Group\x20has\x20been\x20updated.','rPbOv','api','where','query','insertAndFetch','groupId','2196444uelLla','lGjCD','relate','ihMuN','gWWbb','models','2IRBEdq','Cannot\x20unassign\x20Administrator\x20user\x20from\x20Administrators\x20group.','deleteById','select','User\x20is\x20already\x20assigned\x20to\x20group.','106230JWcvhK','includes','count','match','auth','generateSuccess','You\x20are\x20not\x20authorized\x20to\x20manage\x20this\x20group\x20or\x20assign\x20the\x20manage:system\x20permissions.','userId','fvgDp','graphql','MzyqF','User\x20has\x20been\x20assigned\x20to\x20group.','LsrGr','last','groups.*','63ZRvwZN','users','addAuthRevoke','events','system','name','YsGnk','peWlF','ZEAfe','rjnrV','iQJBf','bPiWW','Some\x20Page\x20Rules\x20contains\x20unsafe\x20or\x20exponential\x20time\x20regex.','some','ZcHRH','outbound','40aYGLUu','redirectOnLogin','XMNlD','TKebF','manage:system','manage:groups','svpOM','Cannot\x20unassign\x20Guest\x20user','emit','defaultPermissions','QUage','RvVSJ','userGroups','pUHmt','2444272rzyaZA','EjeRA','patch','WQSox','LBHnQ','exports','Cannot\x20delete\x20this\x20group.','GraphQLError'];_0x6463=function(){return _0x23512b;};return _0x6463();}function _0x354e(_0x529e66,_0x6bbe58){const _0x646376=_0x6463();return _0x354e=function(_0x354e28,_0x5a65ce){_0x354e28=_0x354e28-0x76;let _0x4c008a=_0x646376[_0x354e28];return _0x4c008a;},_0x354e(_0x529e66,_0x6bbe58);}const graphHelper=require(_0x501cb0(0xbf)),safeRegex=require('safe-regex'),_=require('lodash'),gql=require(_0x501cb0(0x91));module[_0x501cb0(0xba)]={'Query':{async 'groups'(){return{};}},'Mutation':{async 'groups'(){return{};}},'GroupQuery':{async 'list'(){const _0x2c1890=_0x501cb0;return WIKI[_0x2c1890(0x82)]['groups'][_0x2c1890(0x7a)]()[_0x2c1890(0x86)](_0x2c1890(0x96),WIKI['models'][_0x2c1890(0xc6)][_0x2c1890(0xe0)](_0x2c1890(0x98))[_0x2c1890(0x8a)]()['as']('userCount'));},async 'single'(_0x55135d,_0x285fc3){const _0x4ca0fb=_0x501cb0;return WIKI[_0x4ca0fb(0x82)][_0x4ca0fb(0xc6)][_0x4ca0fb(0x7a)]()[_0x4ca0fb(0xc0)](_0x285fc3['id']);}},'GroupMutation':{async 'assignUser'(_0x1b8167,_0x51e3e0,{req:_0x11e04c}){const _0xcbb535=_0x501cb0,_0x4f6f84={'EjeRA':_0xcbb535(0xcb),'gWWbb':function(_0x46b781,_0x1fd12b){return _0x46b781===_0x1fd12b;},'QUage':_0xcbb535(0xc5),'rPbOv':_0xcbb535(0xab),'BMQOg':_0xcbb535(0xc3),'MzyqF':_0xcbb535(0xd6),'iQJBf':_0xcbb535(0x87),'oISOz':_0xcbb535(0x99)};if(_0x4f6f84[_0xcbb535(0x81)](_0x51e3e0[_0xcbb535(0x8f)],0x2))throw new gql[(_0xcbb535(0xbc))](_0x4f6f84[_0xcbb535(0xb1)]);const _0x29d1b0=await WIKI[_0xcbb535(0x82)]['groups'][_0xcbb535(0x7a)]()[_0xcbb535(0xc0)](_0x51e3e0[_0xcbb535(0x7c)]);if(!_0x29d1b0)throw new gql[(_0xcbb535(0xbc))](_0xcbb535(0xd7));if(WIKI[_0xcbb535(0x8c)][_0xcbb535(0xcd)](_0x11e04c[_0xcbb535(0xd9)],[_0xcbb535(0xd0)],[_0xcbb535(0xac),_0x4f6f84[_0xcbb535(0x77)]])&&_0x29d1b0[_0xcbb535(0xd3)][_0xcbb535(0xa4)](_0x50697e=>{const _0xafe35d=_0xcbb535,_0x3f0e6f=_[_0xafe35d(0x95)](_0x50697e[_0xafe35d(0xc2)](':'));return[_0xafe35d(0x98),_0xafe35d(0xc6),_0xafe35d(0xd4),_0x4f6f84[_0xafe35d(0xb6)],_0xafe35d(0x78),_0xafe35d(0x9b)][_0xafe35d(0x89)](_0x3f0e6f);}))throw new gql[(_0xcbb535(0xbc))](_0x4f6f84['BMQOg']);const _0x16b80f=await WIKI[_0xcbb535(0x82)][_0xcbb535(0x98)][_0xcbb535(0x7a)]()[_0xcbb535(0xc0)](_0x51e3e0[_0xcbb535(0x8f)]);if(!_0x16b80f)throw new gql[(_0xcbb535(0xbc))](_0x4f6f84[_0xcbb535(0x92)]);const _0x8d6475=await WIKI[_0xcbb535(0x82)]['knex'](_0xcbb535(0xb3))[_0xcbb535(0x79)]({'userId':_0x51e3e0[_0xcbb535(0x8f)],'groupId':_0x51e3e0[_0xcbb535(0x7c)]})[_0xcbb535(0xcc)]();if(_0x8d6475)throw new gql[(_0xcbb535(0xbc))](_0x4f6f84[_0xcbb535(0xa1)]);return await _0x29d1b0['$relatedQuery'](_0xcbb535(0x98))[_0xcbb535(0x7f)](_0x16b80f['id']),WIKI['auth'][_0xcbb535(0xc4)]({'id':_0x16b80f['id'],'kind':'u'}),WIKI[_0xcbb535(0x9a)][_0xcbb535(0xa6)]['emit'](_0x4f6f84['oISOz'],{'id':_0x16b80f['id'],'kind':'u'}),{'responseResult':graphHelper[_0xcbb535(0x8d)](_0xcbb535(0x93))};},async 'create'(_0xb4f075,_0x70cbb,{req:_0x407d45}){const _0x50754c=_0x501cb0,_0x2b75d4={'peWlF':'Group\x20created\x20successfully.'},_0x6ec6c8=await WIKI['models'][_0x50754c(0xc6)][_0x50754c(0x7a)]()[_0x50754c(0x7b)]({'name':_0x70cbb[_0x50754c(0x9c)],'permissions':JSON[_0x50754c(0xdb)](WIKI[_0x50754c(0xca)][_0x50754c(0xc6)][_0x50754c(0xb0)]),'pageRules':JSON['stringify'](WIKI[_0x50754c(0xca)][_0x50754c(0xc6)][_0x50754c(0xe2)]),'isSystem':![]});return await WIKI[_0x50754c(0x8c)][_0x50754c(0xdc)](),WIKI['events'][_0x50754c(0xa6)][_0x50754c(0xaf)](_0x50754c(0xdc)),{'responseResult':graphHelper['generateSuccess'](_0x2b75d4[_0x50754c(0x9e)]),'group':_0x6ec6c8};},async 'delete'(_0x26b2d9,_0x4a202b){const _0x2fa3bf=_0x501cb0,_0x52436b={'ZEAfe':_0x2fa3bf(0xc8),'gYwHY':_0x2fa3bf(0xdc),'ihMuN':function(_0x44670a,_0x1c63f6){return _0x44670a===_0x1c63f6;},'YkhPn':'Group\x20has\x20been\x20deleted.'},_0x530235=_0x52436b[_0x2fa3bf(0x9f)][_0x2fa3bf(0xc2)]('|');let _0x3b2354=0x0;while(!![]){switch(_0x530235[_0x3b2354++]){case'0':WIKI[_0x2fa3bf(0x9a)][_0x2fa3bf(0xa6)][_0x2fa3bf(0xaf)](_0x52436b[_0x2fa3bf(0xda)]);continue;case'1':WIKI['auth'][_0x2fa3bf(0xc4)]({'id':_0x4a202b['id'],'kind':'g'});continue;case'2':await WIKI['auth'][_0x2fa3bf(0xdc)]();continue;case'3':await WIKI[_0x2fa3bf(0x82)][_0x2fa3bf(0xc6)]['query']()[_0x2fa3bf(0x85)](_0x4a202b['id']);continue;case'4':WIKI['events'][_0x2fa3bf(0xa6)]['emit']('addAuthRevoke',{'id':_0x4a202b['id'],'kind':'g'});continue;case'5':if(_0x52436b['ihMuN'](_0x4a202b['id'],0x1)||_0x52436b[_0x2fa3bf(0x80)](_0x4a202b['id'],0x2))throw new gql[(_0x2fa3bf(0xbc))](_0x2fa3bf(0xbb));continue;case'6':return{'responseResult':graphHelper['generateSuccess'](_0x52436b['YkhPn'])};}break;}},async 'unassignUser'(_0x17c746,_0x4cc328){const _0x3031ad=_0x501cb0,_0x329959={'FLxxG':_0x3031ad(0x84),'Nincz':_0x3031ad(0xd7),'LBHnQ':_0x3031ad(0x98),'uDgYx':'addAuthRevoke','TQubB':_0x3031ad(0xe1)};if(_0x4cc328[_0x3031ad(0x8f)]===0x2)throw new gql[(_0x3031ad(0xbc))](_0x3031ad(0xae));if(_0x4cc328['userId']===0x1&&_0x4cc328[_0x3031ad(0x7c)]===0x1)throw new gql[(_0x3031ad(0xbc))](_0x329959[_0x3031ad(0xd8)]);const _0x50171d=await WIKI[_0x3031ad(0x82)]['groups'][_0x3031ad(0x7a)]()['findById'](_0x4cc328['groupId']);if(!_0x50171d)throw new gql[(_0x3031ad(0xbc))](_0x329959[_0x3031ad(0xe4)]);const _0x547d0c=await WIKI[_0x3031ad(0x82)][_0x3031ad(0x98)]['query']()[_0x3031ad(0xc0)](_0x4cc328[_0x3031ad(0x8f)]);if(!_0x547d0c)throw new gql[(_0x3031ad(0xbc))]('Invalid\x20User\x20ID');return await _0x50171d['$relatedQuery'](_0x329959[_0x3031ad(0xb9)])[_0x3031ad(0xe5)]()[_0x3031ad(0x79)](_0x3031ad(0x8f),_0x547d0c['id']),WIKI[_0x3031ad(0x8c)][_0x3031ad(0xc4)]({'id':_0x547d0c['id'],'kind':'u'}),WIKI[_0x3031ad(0x9a)]['outbound'][_0x3031ad(0xaf)](_0x329959[_0x3031ad(0xbd)],{'id':_0x547d0c['id'],'kind':'u'}),{'responseResult':graphHelper[_0x3031ad(0x8d)](_0x329959['TQubB'])};},async 'update'(_0x1ab810,_0x5cf2df,{req:_0xa7dce3}){const _0x3f1817=_0x501cb0,_0x2bd9c2={'LsrGr':function(_0x58ba28,_0x283665){return _0x58ba28===_0x283665;},'EHoNO':_0x3f1817(0x87),'Pysps':_0x3f1817(0xdf),'ZcHRH':_0x3f1817(0x98),'bPiWW':_0x3f1817(0xd4),'XMNlD':'theme','BizLm':_0x3f1817(0x78),'jNWnP':_0x3f1817(0x9b),'svpOM':function(_0x195330,_0x5368e8){return _0x195330===_0x5368e8;},'RvVSJ':_0x3f1817(0xa0),'TKebF':_0x3f1817(0xa3),'YsGnk':function(_0xa8ff1c,_0x550154){return _0xa8ff1c===_0x550154;},'fvgDp':_0x3f1817(0xd0),'pUHmt':_0x3f1817(0xab),'ZdVQm':_0x3f1817(0x99),'WQSox':_0x3f1817(0x76)};if(_[_0x3f1817(0xa4)](_0x5cf2df[_0x3f1817(0xc9)],_0x146010=>{const _0x5f1c24=_0x3f1817;return _0x2bd9c2[_0x5f1c24(0x94)](_0x146010[_0x5f1c24(0x8b)],_0x5f1c24(0xd5))&&!safeRegex(_0x146010[_0x5f1c24(0xcf)]);})){if(_0x2bd9c2[_0x3f1817(0xad)](_0x2bd9c2[_0x3f1817(0xb2)],_0x2bd9c2[_0x3f1817(0xb2)]))throw new gql[(_0x3f1817(0xbc))](_0x2bd9c2[_0x3f1817(0xaa)]);else throw new _0x41ff3e[(_0x3f1817(0xbc))](_0x2bd9c2['EHoNO']);}if(_['isEmpty'](_0x5cf2df[_0x3f1817(0xa8)])){if(_0x2bd9c2[_0x3f1817(0x9d)](_0x3f1817(0xc7),_0x3f1817(0xc7)))_0x5cf2df[_0x3f1817(0xa8)]='/';else throw new _0x4fdb2c['GraphQLError'](_0x3f1817(0x84));}if(WIKI[_0x3f1817(0x8c)][_0x3f1817(0xcd)](_0xa7dce3[_0x3f1817(0xd9)],[_0x2bd9c2[_0x3f1817(0x90)]],['manage:groups',_0x3f1817(0xab)])&&_0x5cf2df[_0x3f1817(0xd3)][_0x3f1817(0xa4)](_0x11f58a=>{const _0x275859=_0x3f1817;if(_0x2bd9c2[_0x275859(0x94)](_0x275859(0xdf),_0x2bd9c2['Pysps'])){const _0x29aece=_[_0x275859(0x95)](_0x11f58a[_0x275859(0xc2)](':'));return[_0x2bd9c2[_0x275859(0xa5)],_0x275859(0xc6),_0x2bd9c2[_0x275859(0xa2)],_0x2bd9c2[_0x275859(0xa9)],_0x2bd9c2[_0x275859(0xde)],_0x2bd9c2[_0x275859(0xbe)]]['includes'](_0x29aece);}else throw new _0x50e465[(_0x275859(0xbc))](_0x275859(0xd7));}))throw new gql[(_0x3f1817(0xbc))]('You\x20are\x20not\x20authorized\x20to\x20manage\x20this\x20group\x20or\x20assign\x20these\x20permissions.');if(WIKI[_0x3f1817(0x8c)][_0x3f1817(0xcd)](_0xa7dce3[_0x3f1817(0xd9)],[_0x3f1817(0xac)],[_0x2bd9c2[_0x3f1817(0xb4)]])&&_0x5cf2df[_0x3f1817(0xd3)][_0x3f1817(0xa4)](_0x4a652b=>_['last'](_0x4a652b[_0x3f1817(0xc2)](':'))===_0x3f1817(0x9b)))throw new gql[(_0x3f1817(0xbc))](_0x3f1817(0x8e));return await WIKI['models'][_0x3f1817(0xc6)][_0x3f1817(0x7a)]()[_0x3f1817(0xb7)]({'name':_0x5cf2df['name'],'redirectOnLogin':_0x5cf2df[_0x3f1817(0xa8)],'permissions':JSON[_0x3f1817(0xdb)](_0x5cf2df['permissions']),'pageRules':JSON[_0x3f1817(0xdb)](_0x5cf2df[_0x3f1817(0xc9)])})[_0x3f1817(0x79)]('id',_0x5cf2df['id']),WIKI[_0x3f1817(0x8c)][_0x3f1817(0xc4)]({'id':_0x5cf2df['id'],'kind':'g'}),WIKI['events'][_0x3f1817(0xa6)][_0x3f1817(0xaf)](_0x2bd9c2[_0x3f1817(0xc1)],{'id':_0x5cf2df['id'],'kind':'g'}),await WIKI[_0x3f1817(0x8c)][_0x3f1817(0xdc)](),WIKI[_0x3f1817(0x9a)][_0x3f1817(0xa6)][_0x3f1817(0xaf)](_0x3f1817(0xdc)),{'responseResult':graphHelper[_0x3f1817(0x8d)](_0x2bd9c2[_0x3f1817(0xb8)])};}},'Group':{'users'(_0x1641ae){const _0x28201c=_0x501cb0,_0x256831={'lGjCD':'users'};return _0x1641ae[_0x28201c(0xce)](_0x256831[_0x28201c(0x7e)]);}}};