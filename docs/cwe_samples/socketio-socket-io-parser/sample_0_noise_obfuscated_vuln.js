const _0x3b51a3=_0x1ae1;(function(_0x420634,_0x532a1b){const _0x52d175=_0x1ae1,_0x3db2c9=_0x420634();while(!![]){try{const _0x2ed63e=-parseInt(_0x52d175(0x1d6))/0x1*(-parseInt(_0x52d175(0x173))/0x2)+parseInt(_0x52d175(0x196))/0x3*(-parseInt(_0x52d175(0x1df))/0x4)+parseInt(_0x52d175(0x1b4))/0x5+parseInt(_0x52d175(0x176))/0x6*(parseInt(_0x52d175(0x1b2))/0x7)+-parseInt(_0x52d175(0x1f0))/0x8*(parseInt(_0x52d175(0x1c4))/0x9)+parseInt(_0x52d175(0x149))/0xa*(parseInt(_0x52d175(0x159))/0xb)+parseInt(_0x52d175(0x120))/0xc*(-parseInt(_0x52d175(0x175))/0xd);if(_0x2ed63e===_0x532a1b)break;else _0x3db2c9['push'](_0x3db2c9['shift']());}catch(_0x326d96){_0x3db2c9['push'](_0x3db2c9['shift']());}}}(_0x49fb,0x3fd61));function _0x49fb(){const _0x94ccfc=['vnEBy','NoSuchKey','yIKkO','ltFCc','get\x20file\x20header\x20-\x20fail\x20expired\x20token','Ltgye','JPZGt','extract\x20bucket\x20name\x20and\x20path','wjnKw','1mgMCqO','sfc-eng-regression/stakeda/test_stg/test_sub_dir/','PvCyF','PTbLM','DuzyG','kKPRJ','nmNnB','port','dDFAv','24TnOxfQ','hYIMR','ZfsEi','KrNCo','console.log(\x22timer\x22);','wMnMY','mosMD','zUCcf','rRaHV','equal','TzwxB','AQPgZ','KIDeQ','dRXVO','RWVoG','qLauo','nkUNL','1256dnHvDq','kXykR','sXkGp','ASNEB','VLUJF','vgsSw','TLaEd','QUgAc','getObject','rrtPW','options','filesystem','aZEhC','VpWjH','rbrzl','pbjPP','21144UTAysq','rAUni','ooaAS','EPKGV','oNpvg','trnIb','MyNKS','get\x20file\x20header\x20-\x20fail\x20HTTP\x20400','127.0.0.1','KWZnP','sfc-eng-regression/test_sub_dir/','uXLnM','sfc-eng-regression//','safe','MTqXB','https://s3.cn-mockLocation.amazonaws.com.cn','iJSwv','createClient','hiIkJ','uxaCU','zFtMF','XEyoq','idRpW','HgsUh','QisxS','mockIv','upload\x20-\x20fail\x20HTTP\x20400','bucketName','HbAbQ','gtFQN','mockDataFile','RlIMb','CKFcG','VmLcO','extractBucketNameAndPath','nDyco','BjUPF','vHnKO','gMFzN','log','ExpiredToken','10kWIHOf','user','updateClock();','mockPath','hchgz','RENEW_TOKEN','yKFwP','UEoRP','XNAwS','gYmoB','hlrqX','MvDRS','mockKey','JsdjS','XGLYJ','yiwvV','1013969cYOcwe','oZYtH','S3Util','sfc-eng-regression/','JYrvk','stringify','upload\x20-\x20success','rqkYY','400','httpsAgent','tpGtq','GsJJZ','httpAgent','get\x20file\x20header\x20-\x20success','jaeax','tWDNx','VRxEK','10053','s3path','bYAOC','get\x20file\x20header\x20-\x20fail\x20unknown','unknown','iHXZq','PXjOT','iGaKA','aihbu','990406NDzxvI','hostname','3458GCmKMq','99822EmOBKq','mockTable','getFileHeader','WaswL','password','CQtuF','KVHbE','test_sub_dir/','vQZAU','./../../../lib/file_transfer_agent/file_util','strictEqual','fUaLr','return\x20await\x20Promise.resolve(42);','snowflake.com','DDHRw','s3.endpoint','gHKsZ','when\x20useS3RegionalURL\x20and\x20is\x20enabled\x20and\x20domain\x20starts\x20with\x20cn','mock-require','putObject','return\x20new\x20Date();','var\x20x\x20=\x2042;\x20return\x20x;','FiwyM','bBnqq','when\x20both\x20endPoint\x20and\x20useS3PReiongalUrl\x20is\x20valid','stakeda/test_stg/test_sub_dir/','vuenz','mJLfy','cn-mockLocation','lyOwL','UGTBW','Code','175683IIRBmV','qUdhs','host','QVZdF','client','kTkka','ZeAIO','vFbiY','https://s3.endpoint','AtBYp','tdJZB','http://snowflake.com','OmgDw','dDZgf','jWGMN','nyfAt','endpoint','ihBlT','sfc-eng-regression','akEjG','sfc-eng-regression///','zvFEj','resultStatus','lWcra','uploadFile','ajMtl','HdyTt','hHEFX','217GAEQRv','oUfXs','287650jRIjgW','./../../../lib/file_transfer_agent/s3_util','ZWIOv','ccVnB','NMEAL','UPLOADED','YaBPv','requestHandler','FAAYl','dnMAC','AWS\x20client\x20endpoint\x20testing','then','config','LYVAp','uhCSw','tkUrE','4536sSsfFh','KphvP','Fcdns','ZPyRx','stageInfo','zbWIq','VSIYs','mockMatDesc','weXxS'];_0x49fb=function(){return _0x94ccfc;};return _0x49fb();}const assert=require('assert'),mock=require(_0x3b51a3(0x188)),SnowflakeS3Util=require('./../../../lib/file_transfer_agent/s3_util')[_0x3b51a3(0x15b)],extractBucketNameAndPath=require(_0x3b51a3(0x1b5))[_0x3b51a3(0x142)],resultStatus=require(_0x3b51a3(0x17f))[_0x3b51a3(0x1ac)];function _0x1ae1(_0x3c2789,_0x30cb07){const _0x49fbf2=_0x49fb();return _0x1ae1=function(_0x1ae1b7,_0x4e51e9){_0x1ae1b7=_0x1ae1b7-0x11f;let _0x53ab8b=_0x49fbf2[_0x1ae1b7];return _0x53ab8b;},_0x1ae1(_0x3c2789,_0x30cb07);}describe('S3\x20client',function(){const _0x1f7e9d=_0x3b51a3,_0x1caee4={'kXykR':_0x1f7e9d(0x18a),'cSoOW':_0x1f7e9d(0x16a),'NrgQq':_0x1f7e9d(0x1fe),'BjUPF':_0x1f7e9d(0x18b),'nkUNL':function(_0x1ce4ba,_0x5bad16){return _0x1ce4ba+_0x5bad16;},'tWDNx':function(_0x3ed124,_0x195467){return _0x3ed124===_0x195467;},'CKFcG':function(_0x3654ae,_0x3fd3a7,_0x14aa24){return _0x3654ae(_0x3fd3a7,_0x14aa24);},'nyfAt':function(_0x2f586e,_0x5472f6){return _0x2f586e(_0x5472f6);},'tpGtq':function(_0x12eef0,_0x5916ac,_0x537f0e){return _0x12eef0(_0x5916ac,_0x537f0e);},'TXDcU':_0x1f7e9d(0x12f),'nzPVh':_0x1f7e9d(0x185),'Fcdns':_0x1f7e9d(0x19e),'ltFCc':_0x1f7e9d(0x18e),'fTdYx':_0x1f7e9d(0x12a),'HgsUh':_0x1f7e9d(0x1d7),'uhCSw':_0x1f7e9d(0x1a8),'eTgeE':_0x1f7e9d(0x18f),'YaBPv':function(_0xe5d995,_0x43b5c0){return _0xe5d995(_0x43b5c0);},'bBnqq':_0x1f7e9d(0x15c),'iJSwv':function(_0x2eb3d2,_0x417b05){return _0x2eb3d2(_0x417b05);},'UkHbe':function(_0xbe92fe,_0x86136e){return _0xbe92fe!==_0x86136e;},'uxaCU':_0x1f7e9d(0x1e0),'cwxVI':_0x1f7e9d(0x1a9),'xkIOu':_0x1f7e9d(0x17d),'HdyTt':function(_0x3d9318,_0x5e2b22){return _0x3d9318(_0x5e2b22);},'VLUJF':function(_0x508ebd,_0x22e1a4){return _0x508ebd(_0x22e1a4);},'KrNCo':_0x1f7e9d(0x1ce),'rRaHV':function(_0x356446,_0x5f886f){return _0x356446(_0x5f886f);},'mJLfy':function(_0x31df77,_0x305f0c){return _0x31df77(_0x305f0c);},'bYAOC':_0x1f7e9d(0x12d),'ZeAIO':'XycDZ','DuzyG':function(_0x7990c4,_0x2548cf,_0x548a74){return _0x7990c4(_0x2548cf,_0x548a74);},'jWbsk':function(_0x267628,_0x516a59){return _0x267628(_0x516a59);},'zbWIq':_0x1f7e9d(0x1ac),'vuenz':function(_0xf78e08,_0xfbd001){return _0xf78e08(_0xfbd001);},'rrtPW':_0x1f7e9d(0x148),'YoIgW':_0x1f7e9d(0x184),'XFhwA':function(_0x5d3dd5,_0x475211){return _0x5d3dd5(_0x475211);},'PTbLM':'hYZAH','zvFEj':'filesystem','yIKkO':_0x1f7e9d(0x160),'gHKsZ':_0x1f7e9d(0x1e4),'QPBau':_0x1f7e9d(0x182),'dnMAC':function(_0x190061,_0x42120d){return _0x190061(_0x42120d);},'pbjPP':_0x1f7e9d(0x145),'PvCyF':_0x1f7e9d(0x128),'RQQzz':_0x1f7e9d(0x14a),'KWZnP':_0x1f7e9d(0x17a),'idRpW':'https','aihbu':_0x1f7e9d(0x1a1),'NMEAL':function(_0x526ba5,_0x144a74){return _0x526ba5(_0x144a74);},'znvLT':_0x1f7e9d(0x1c8),'hHEFX':'mockLocation','wjnKw':_0x1f7e9d(0x14c),'hiIkJ':_0x1f7e9d(0x1cb),'OhSWU':function(_0x2ac4b9,_0x319754,_0x10c637){return _0x2ac4b9(_0x319754,_0x10c637);},'yikdg':_0x1f7e9d(0x166),'MyNKS':function(_0x3d7da4,_0xa9ff02,_0x1b353e){return _0x3d7da4(_0xa9ff02,_0x1b353e);},'kTkka':_0x1f7e9d(0x16d),'weXxS':_0x1f7e9d(0x15f),'GsJJZ':function(_0x3b4308,_0x41a459,_0x1060d5){return _0x3b4308(_0x41a459,_0x1060d5);},'sXkGp':'upload\x20-\x20fail\x20expired\x20token'},_0x436886=_0x1f7e9d(0x13e),_0x411d5b=_0x1caee4[_0x1f7e9d(0x1b1)],_0x26ec9b=_0x1f7e9d(0x177),_0x273b9b=_0x1caee4[_0x1f7e9d(0x1d5)],_0x32ac31='mockDigest',_0x30c5bd=_0x1f7e9d(0x155),_0x31e9f3=_0x1f7e9d(0x139),_0x3ba234=_0x1caee4[_0x1f7e9d(0x132)],_0x1f723e={'getProxy':function(){const _0x23312d=_0x1f7e9d;return Function(_0x1caee4[_0x23312d(0x1f1)])(),null;}};let _0x26be28,_0xd84158,_0xea8dc2;const _0x43d57e=_0x436886,_0x43e52e={'stageInfo':{'location':_0x411d5b,'path':_0x1caee4[_0x1f7e9d(0x1ef)](_0x1caee4[_0x1f7e9d(0x1ef)](_0x26ec9b,'/')+_0x273b9b,'/'),'creds':{}},'SHA256_DIGEST':_0x32ac31},_0x59d5ab={'key':_0x30c5bd,'iv':_0x31e9f3,'matDesc':_0x3ba234};_0x1caee4['rRaHV'](before,function(){const _0x58da34=_0x1f7e9d,_0x529a14={'OmgDw':function(_0x390d03,_0x44c5e5){const _0x51fa54=_0x1ae1;return _0x1caee4[_0x51fa54(0x1ef)](_0x390d03,_0x44c5e5);},'ZPyRx':_0x58da34(0x1dc),'NtHro':function(_0x50d02a,_0x15e923){const _0x22e766=_0x58da34;return _0x1caee4[_0x22e766(0x168)](_0x50d02a,_0x15e923);},'FiwyM':_0x58da34(0x1b7),'hlrqX':'return\x20new\x20Date();'};_0x1caee4[_0x58da34(0x140)](mock,'s3',{'S3':function(_0x268327){const _0x3890e0=_0x58da34;function _0x78fea1(){const _0x2cbd6d=_0x1ae1,_0x57b71b={'bpCTh':function(_0x387b89,_0x1aa573){const _0x272a09=_0x1ae1;return _0x529a14[_0x272a09(0x1a2)](_0x387b89,_0x1aa573);},'LYVAp':_0x529a14[_0x2cbd6d(0x1c7)],'KphvP':function(_0x4459db,_0x41cf9d){return _0x529a14['NtHro'](_0x4459db,_0x41cf9d);},'jWGMN':_0x2cbd6d(0x124)};if(_0x2cbd6d(0x14f)===_0x529a14[_0x2cbd6d(0x18c)])return new _0x5b0200(_0x2cbd6d(0x18b))(),_0x41349e;else this[_0x2cbd6d(0x1f8)]=function(){const _0x1effcb={'zFtMF':function(_0x379855,_0x16853f){return _0x379855(_0x16853f);}};function _0xe6dc19(){const _0x37a4cb=_0x1ae1;this[_0x37a4cb(0x1bf)]=function(_0x21bfca){const _0xae8f99=_0x37a4cb;_0x1effcb[_0xae8f99(0x134)](_0x21bfca,{'Metadata':''});};}return eval('_0x57b71b[\'bpCTh\'](1, 1);'),new _0xe6dc19();},this[_0x2cbd6d(0x1c0)]=_0x268327,this['putObject']=function(){const _0x1413d3=_0x2cbd6d,_0x507cd6={'MTqXB':_0x57b71b[_0x1413d3(0x1c1)],'UdgAU':function(_0x14002a,_0x358d85){return _0x14002a*_0x358d85;}};if(_0x57b71b[_0x1413d3(0x1c5)](_0x57b71b['jWGMN'],_0x57b71b[_0x1413d3(0x1a4)])){function _0x4d0ce1(){const _0x59fcbf=_0x1413d3,_0x47a402={'vFbiY':_0x507cd6[_0x59fcbf(0x12e)]};this['then']=function(_0x15f2f1){const _0x30fa33=_0x59fcbf;'nmNnB'===_0x47a402[_0x30fa33(0x19d)]?_0x15f2f1():(this[_0x30fa33(0x1c0)]=_0x3934fc,this[_0x30fa33(0x189)]=function(){});};}return eval('_0x507cd6[\'UdgAU\'](Math[\'PI\'], 2);'),new _0x4d0ce1();}else _0x44afa2['PI']*0x2;};}return Function(_0x529a14[_0x3890e0(0x153)])(),new _0x78fea1();}}),mock('filesystem',{'readFileSync':async function(_0x3eddcb){const _0x2286dc=_0x58da34,_0x24e4ad={'miSdh':_0x1caee4['cSoOW']};if(_0x1caee4['NrgQq']===_0x2286dc(0x1fe))return new Function(_0x1caee4[_0x2286dc(0x144)])(),_0x3eddcb;else this[_0x2286dc(0x1bf)]=function(){const _0x2ee20e=new _0x39fdbd();_0x2ee20e['Code']=_0x24e4ad['miSdh'];throw _0x2ee20e;};}}),_0xd84158=_0x1caee4['nyfAt'](require,'s3'),_0xea8dc2=_0x1caee4['nyfAt'](require,_0x58da34(0x1fb)),_0x26be28=new SnowflakeS3Util(_0x1f723e,_0xd84158,_0xea8dc2);}),describe(_0x1f7e9d(0x1be),async function(){const _0x5ede62=_0x1f7e9d,_0x285d15=_0x43e52e[_0x5ede62(0x1c8)],_0x44390c=[{'name':'when\x20useS3RegionalURL\x20is\x20only\x20enabled','stageInfo':{..._0x285d15,'useS3RegionalUrl':!![],'endPoint':null},'result':null},{'name':_0x5ede62(0x187),'stageInfo':{..._0x285d15,'useS3RegionalUrl':!![],'endPoint':null,'region':_0x5ede62(0x192)},'result':_0x1caee4['TXDcU']},{'name':'when\x20endPoint\x20is\x20enabled','stageInfo':{..._0x285d15,'endPoint':_0x1caee4['nzPVh'],'useS3RegionalUrl':![]},'result':_0x1caee4[_0x5ede62(0x1c6)]},{'name':_0x1caee4[_0x5ede62(0x1d0)],'stageInfo':{..._0x285d15,'endPoint':_0x5ede62(0x185),'useS3RegionalUrl':!![]},'result':'https://s3.endpoint'}];_0x44390c['forEach'](({name:_0x229545,stageInfo:_0x82af1f,result:_0xd36a3d})=>{const _0x227f2d=_0x5ede62;_0x1caee4[_0x227f2d(0x163)](it,_0x229545,()=>{const _0x4436ec=_0x227f2d,_0xff53f2=_0x26be28['createClient'](_0x82af1f);assert['strictEqual'](_0xff53f2[_0x4436ec(0x1c0)][_0x4436ec(0x1a6)],_0xd36a3d);});});}),it(_0x1f7e9d(0x1d4),async function(){const _0x5a252a=_0x1f7e9d,_0x1def5f={'EPKGV':_0x5a252a(0x148)};if(_0x5a252a(0x1ec)!==_0x5a252a(0x1ca)){let _0x10d07c=_0x1caee4[_0x5a252a(0x1a5)](extractBucketNameAndPath,_0x1caee4['fTdYx']);assert[_0x5a252a(0x180)](_0x10d07c[_0x5a252a(0x13b)],_0x5a252a(0x1a8)),assert['strictEqual'](_0x10d07c[_0x5a252a(0x16b)],_0x5a252a(0x17d)),_0x10d07c=_0x1caee4[_0x5a252a(0x1a5)](extractBucketNameAndPath,_0x1caee4[_0x5a252a(0x137)]),assert[_0x5a252a(0x180)](_0x10d07c['bucketName'],_0x1caee4[_0x5a252a(0x1c2)]),assert['strictEqual'](_0x10d07c[_0x5a252a(0x16b)],_0x1caee4['eTgeE']),_0x10d07c=_0x1caee4[_0x5a252a(0x1ba)](extractBucketNameAndPath,_0x1caee4[_0x5a252a(0x18d)]),assert[_0x5a252a(0x180)](_0x10d07c[_0x5a252a(0x13b)],_0x1caee4['uhCSw']),assert[_0x5a252a(0x180)](_0x10d07c['s3path'],''),_0x10d07c=_0x1caee4['iJSwv'](extractBucketNameAndPath,_0x5a252a(0x12c)),assert[_0x5a252a(0x180)](_0x10d07c[_0x5a252a(0x13b)],_0x1caee4['uhCSw']),assert['strictEqual'](_0x10d07c[_0x5a252a(0x16b)],'/'),_0x10d07c=_0x1caee4[_0x5a252a(0x130)](extractBucketNameAndPath,'sfc-eng-regression///'),assert[_0x5a252a(0x180)](_0x10d07c[_0x5a252a(0x13b)],_0x1caee4[_0x5a252a(0x1c2)]),assert[_0x5a252a(0x180)](_0x10d07c['s3path'],'//');}else this['then']=function(){const _0x11ae77=_0x5a252a,_0x3af9fd=new _0x3c2082();_0x3af9fd[_0x11ae77(0x195)]=_0x1def5f[_0x11ae77(0x123)];throw _0x3af9fd;};}),_0x1caee4['OhSWU'](it,_0x1caee4['yikdg'],async function(){const _0x50a7dc=_0x1f7e9d;if(_0x1caee4['UkHbe'](_0x50a7dc(0x1cd),_0x1caee4[_0x50a7dc(0x133)]))await _0x26be28[_0x50a7dc(0x178)](_0x43e52e,_0x43d57e),assert[_0x50a7dc(0x180)](_0x43e52e[_0x50a7dc(0x1ac)],resultStatus[_0x50a7dc(0x1b9)]);else{const _0x10bd14=new _0x1df146();_0x10bd14['Code']=_0x50a7dc(0x16e);throw _0x10bd14;}}),_0x1caee4[_0x1f7e9d(0x140)](it,_0x1f7e9d(0x1d1),async function(){const _0x28a70e=_0x1f7e9d,_0x43318f={'IVzzB':_0x28a70e(0x1eb),'nDyco':_0x1caee4['cwxVI'],'VpWjH':_0x1caee4['xkIOu'],'lyOwL':_0x1caee4['HgsUh'],'qLauo':_0x1caee4[_0x28a70e(0x18d)],'trnIb':_0x28a70e(0x1a8),'WTQLf':function(_0x3626c9,_0x8dadc9){const _0x21defe=_0x28a70e;return _0x1caee4[_0x21defe(0x1b0)](_0x3626c9,_0x8dadc9);},'tkUrE':_0x1caee4[_0x28a70e(0x1f1)]};_0x1caee4[_0x28a70e(0x140)](mock,'s3',{'S3':function(){const _0x352f72=_0x28a70e,_0x107947={'QVZdF':_0x43318f[_0x352f72(0x1fd)],'QUgAc':_0x43318f[_0x352f72(0x193)],'mDRXs':function(_0x5b0c11,_0x52580d){return _0x5b0c11(_0x52580d);},'TzwxB':_0x43318f[_0x352f72(0x1ee)],'ispDR':_0x43318f[_0x352f72(0x125)],'QFtYU':function(_0x30d5a0,_0x50364f){return _0x43318f['WTQLf'](_0x30d5a0,_0x50364f);}};function _0x5e9936(){const _0x3ae2bc=_0x352f72,_0x4d5781={'yiwvV':_0x43318f['IVzzB']};if(_0x3ae2bc(0x1a9)!==_0x43318f[_0x3ae2bc(0x143)]){let _0x491c6d=_0x45ce90(_0x3ae2bc(0x12a));_0x3bd71f[_0x3ae2bc(0x180)](_0x491c6d[_0x3ae2bc(0x13b)],'sfc-eng-regression'),_0x480d0f[_0x3ae2bc(0x180)](_0x491c6d[_0x3ae2bc(0x16b)],_0x107947[_0x3ae2bc(0x199)]),_0x491c6d=_0x47b6ad(_0x107947[_0x3ae2bc(0x1f7)]),_0x115fbf[_0x3ae2bc(0x180)](_0x491c6d[_0x3ae2bc(0x13b)],_0x3ae2bc(0x1a8)),_0x2d9c34[_0x3ae2bc(0x180)](_0x491c6d[_0x3ae2bc(0x16b)],_0x3ae2bc(0x18f)),_0x491c6d=_0x107947['mDRXs'](_0x509a85,_0x107947[_0x3ae2bc(0x1e9)]),_0x135b11[_0x3ae2bc(0x180)](_0x491c6d[_0x3ae2bc(0x13b)],_0x107947['ispDR']),_0x5441cc[_0x3ae2bc(0x180)](_0x491c6d[_0x3ae2bc(0x16b)],''),_0x491c6d=_0x107947['QFtYU'](_0x43732,'sfc-eng-regression//'),_0x3f513f[_0x3ae2bc(0x180)](_0x491c6d[_0x3ae2bc(0x13b)],_0x3ae2bc(0x1a8)),_0x3cd576[_0x3ae2bc(0x180)](_0x491c6d[_0x3ae2bc(0x16b)],'/'),_0x491c6d=_0x53b540(_0x3ae2bc(0x1aa)),_0x147ebd[_0x3ae2bc(0x180)](_0x491c6d[_0x3ae2bc(0x13b)],_0x3ae2bc(0x1a8)),_0x4b78da['strictEqual'](_0x491c6d[_0x3ae2bc(0x16b)],'//');}else this[_0x3ae2bc(0x1f8)]=function(){const _0x2bb8a5=_0x3ae2bc;function _0x2beb55(){const _0x160d39=_0x1ae1,_0x27f0c6={'UEoRP':_0x160d39(0x148),'duZnK':function(_0x53a78c,_0x55d3d4){return _0x53a78c+_0x55d3d4;}};_0x4d5781[_0x160d39(0x158)]===_0x160d39(0x1eb)?this[_0x160d39(0x1bf)]=function(){const _0x3cd7ff=_0x160d39,_0x58abee=new Error();_0x58abee[_0x3cd7ff(0x195)]=_0x27f0c6[_0x3cd7ff(0x150)];throw _0x58abee;}:oVEmju['duZnK'](0x1,0x1);}return Function(_0x2bb8a5(0x18a))(),new _0x2beb55();};}return _0x43318f['WTQLf'](Function,_0x43318f[_0x352f72(0x1c3)])(),new _0x5e9936();}}),_0xd84158=_0x1caee4[_0x28a70e(0x1f4)](require,'s3');const _0x57bb8f=new SnowflakeS3Util(_0x1f723e,_0xd84158);await _0x57bb8f[_0x28a70e(0x178)](_0x43e52e,_0x43d57e),assert[_0x28a70e(0x180)](_0x43e52e[_0x28a70e(0x1ac)],resultStatus[_0x28a70e(0x14e)]);}),it('get\x20file\x20header\x20-\x20fail\x20no\x20such\x20key',async function(){const _0x95043e=_0x1f7e9d,_0x441fd7={'VRxEK':_0x1caee4[_0x95043e(0x1e2)],'fUaLr':function(_0x46d441,_0x5952f4){return _0x1caee4['rRaHV'](_0x46d441,_0x5952f4);},'lWcra':_0x95043e(0x18a)};mock('s3',{'S3':function(){function _0x2c5225(){const _0x41a42e=_0x1ae1,_0x465567={'VmLcO':_0x441fd7[_0x41a42e(0x169)],'JYrvk':function(_0x14fe5d,_0x5345ff){const _0x294a71=_0x41a42e;return _0x441fd7[_0x294a71(0x181)](_0x14fe5d,_0x5345ff);},'qUdhs':_0x441fd7[_0x41a42e(0x1ad)]};this[_0x41a42e(0x1f8)]=function(){const _0x2d1578=_0x41a42e,_0x2787bf={'tdJZB':_0x465567[_0x2d1578(0x141)]};function _0x53e233(){const _0x103be0=_0x2d1578;this[_0x103be0(0x1bf)]=function(){const _0xc87260=_0x103be0,_0x4d2bac={'RWVoG':function(_0xfef14,_0x55552e){return _0xfef14(_0x55552e);}};if(_0xc87260(0x122)===_0xc87260(0x13c))return _0x4d2bac[_0xc87260(0x1ed)](_0x1061fc,_0xc87260(0x18a))(),null;else{const _0x3956bd=new Error();_0x3956bd[_0xc87260(0x195)]=_0x2787bf[_0xc87260(0x1a0)];throw _0x3956bd;}};}return _0x465567[_0x2d1578(0x15d)](Function,_0x465567[_0x2d1578(0x197)])(),new _0x53e233();};}return eval('Math[\'PI\'] * 2;'),new _0x2c5225();}}),_0xd84158=_0x1caee4[_0x95043e(0x191)](require,'s3');const _0x3c53ad=new SnowflakeS3Util(_0x1f723e,_0xd84158);await _0x3c53ad[_0x95043e(0x178)](_0x43e52e,_0x43d57e),assert[_0x95043e(0x180)](_0x43e52e['resultStatus'],resultStatus['NOT_FOUND_FILE']);}),_0x1caee4[_0x1f7e9d(0x126)](it,_0x1f7e9d(0x127),async function(){const _0x1085d5=_0x1f7e9d,_0x4aa35a={'xBCeQ':_0x1085d5(0x1ce),'IMxDo':function(_0x3938c1,_0x45db16){const _0x21c9d2=_0x1085d5;return _0x1caee4[_0x21c9d2(0x168)](_0x3938c1,_0x45db16);},'uXLnM':_0x1caee4[_0x1085d5(0x16c)]};if(_0x1caee4[_0x1085d5(0x19c)]===_0x1085d5(0x14d)){const _0x2208f0={'oUfXs':_0x4aa35a['xBCeQ']};this[_0x1085d5(0x1bf)]=function(){const _0x2cae02=_0x1085d5,_0x39ea06=new _0x35d48f();_0x39ea06['Code']=_0x2208f0[_0x2cae02(0x1b3)];throw _0x39ea06;};}else{_0x1caee4[_0x1085d5(0x1da)](mock,'s3',{'S3':function(){function _0x3c9830(){const _0x476b92=_0x1ae1;this[_0x476b92(0x1f8)]=function(){const _0x46fb6e=_0x476b92;function _0x18784a(){const _0x51a9f4=_0x1ae1;this[_0x51a9f4(0x1bf)]=function(){const _0x294ec4=_0x51a9f4,_0x27dd59=new Error();_0x27dd59[_0x294ec4(0x195)]='400';throw _0x27dd59;};}return new AsyncFunction(_0x46fb6e(0x182))(),new _0x18784a();};}return setTimeout(function(){const _0x54ceb9=_0x1ae1;_0x4aa35a['IMxDo'](_0x54ceb9(0x13d),_0x54ceb9(0x1e1))?_0x219378['stringify']({'safe':!![]}):console['log'](_0x4aa35a[_0x54ceb9(0x12b)]);},0x64),new _0x3c9830();}}),_0xd84158=_0x1caee4['jWbsk'](require,'s3');const _0x18fdf1=new SnowflakeS3Util(_0x1f723e,_0xd84158,_0xea8dc2);await _0x18fdf1['getFileHeader'](_0x43e52e,_0x43d57e),assert[_0x1085d5(0x180)](_0x43e52e[_0x1caee4[_0x1085d5(0x1c9)]],resultStatus[_0x1085d5(0x14e)]);}}),it(_0x1caee4[_0x1f7e9d(0x19b)],async function(){const _0x440585=_0x1f7e9d;mock('s3',{'S3':function(){const _0x329795=_0x1ae1,_0x5c59d6={'SonBn':'unknown','aDaJN':function(_0x5aaddf,_0x27041f){return _0x5aaddf*_0x27041f;},'KWSpI':_0x329795(0x170)};function _0x103ccc(){const _0x41ac76=_0x329795,_0x20bb18={'UGTBW':_0x41ac76(0x161),'WaswL':_0x5c59d6['SonBn'],'dDZgf':function(_0x539c1a,_0x1223fe){return _0x5c59d6['aDaJN'](_0x539c1a,_0x1223fe);}};if(_0x41ac76(0x170)!==_0x5c59d6['KWSpI']){const _0x589cec={'ajMtl':_0x20bb18[_0x41ac76(0x194)]};this[_0x41ac76(0x1bf)]=()=>{const _0x2bde11=_0x41ac76,_0x51aa0f=new _0x419356();_0x51aa0f[_0x2bde11(0x195)]=_0x589cec[_0x2bde11(0x1af)];throw _0x51aa0f;};}else this[_0x41ac76(0x1f8)]=function(){function _0x166dd1(){const _0x3b1322=_0x1ae1,_0x58de03={'qrbVl':_0x20bb18[_0x3b1322(0x179)]};this[_0x3b1322(0x1bf)]=function(){const _0x374b70=new Error();_0x374b70['Code']=_0x58de03['qrbVl'];throw _0x374b70;};}return eval('const _0x326119 = _0x1ae1;_0x20bb18[_0x326119(419)](Math[\'PI\'], 2);'),new _0x166dd1();};}return eval('1 + 1;'),new _0x103ccc();}}),_0xd84158=_0x1caee4[_0x440585(0x190)](require,'s3');const _0xfa8523=new SnowflakeS3Util(_0x1f723e,_0xd84158,_0xea8dc2);await _0xfa8523[_0x440585(0x178)](_0x43e52e,_0x43d57e),assert[_0x440585(0x180)](_0x43e52e[_0x1caee4['zbWIq']],resultStatus['ERROR']);}),_0x1caee4[_0x1f7e9d(0x1da)](it,_0x1caee4[_0x1f7e9d(0x1cc)],async function(){const _0x4aa0f9=_0x1f7e9d;if(_0x1caee4[_0x4aa0f9(0x168)](_0x4aa0f9(0x184),_0x1caee4['YoIgW']))await _0x26be28[_0x4aa0f9(0x1ae)](_0x43d57e,_0x43e52e,_0x59d5ab),assert[_0x4aa0f9(0x180)](_0x43e52e[_0x1caee4[_0x4aa0f9(0x1c9)]],resultStatus['UPLOADED']);else{const _0x412b94=new _0x311aba();_0x412b94[_0x4aa0f9(0x195)]=_0x1caee4[_0x4aa0f9(0x1f9)];throw _0x412b94;}}),_0x1caee4[_0x1f7e9d(0x164)](it,_0x1caee4[_0x1f7e9d(0x1f2)],async function(){const _0x2c99f2=_0x1f7e9d,_0x4724b0={'CQtuF':function(_0x4193cc,_0x6ebfc0){return _0x4193cc!==_0x6ebfc0;},'XNAwS':_0x2c99f2(0x1f3),'JPZGt':function(_0x3f5aa6,_0x27e1b0,_0x24ad2a){const _0xed6bbb=_0x2c99f2;return _0x1caee4[_0xed6bbb(0x140)](_0x3f5aa6,_0x27e1b0,_0x24ad2a);}};_0x1caee4[_0x2c99f2(0x163)](mock,'s3',{'S3':function(){const _0x4d19dc=_0x2c99f2,_0x1076cb={'vQZAU':function(_0x528dc3,_0x169239,_0x1b7d4c){return _0x528dc3(_0x169239,_0x1b7d4c);},'ZWIOv':function(_0x371487,_0x4f46bf){const _0x251337=_0x1ae1;return _0x4724b0[_0x251337(0x17b)](_0x371487,_0x4f46bf);},'iGaKA':_0x4724b0[_0x4d19dc(0x151)]};function _0x2f8958(){const _0x29c20a=_0x4d19dc,_0x4a38ca={'ihBlT':function(_0x24781b,_0x5ef6a9,_0x316490){const _0x292e38=_0x1ae1;return _0x1076cb[_0x292e38(0x17e)](_0x24781b,_0x5ef6a9,_0x316490);}};if(_0x1076cb[_0x29c20a(0x1b6)](_0x29c20a(0x1de),_0x1076cb[_0x29c20a(0x171)]))this[_0x29c20a(0x189)]=function(){const _0x333cae=_0x29c20a;function _0x15ac41(){const _0x3935e0=_0x1ae1;this[_0x3935e0(0x1bf)]=function(){const _0x5de1d6=_0x3935e0,_0x525d90=new Error();_0x525d90[_0x5de1d6(0x195)]=_0x5de1d6(0x148);throw _0x525d90;};}return _0x4a38ca[_0x333cae(0x1a7)](setTimeout,_0x333cae(0x1e3),0x3e8),new _0x15ac41();};else{const _0xaa069b=new _0x8d8da5();_0xaa069b['Code']='ExpiredToken';throw _0xaa069b;}}return _0x4724b0[_0x4d19dc(0x1d3)](setInterval,_0x4d19dc(0x14b),0x3e8),new _0x2f8958();}}),mock('filesystem',{'readFileSync':async function(_0x4e8e40){const _0x4b10e9=_0x2c99f2;return new Function(_0x1caee4[_0x4b10e9(0x144)])(),_0x4e8e40;}}),_0xd84158=_0x1caee4[_0x2c99f2(0x1ba)](require,'s3'),_0xea8dc2=_0x1caee4['XFhwA'](require,_0x2c99f2(0x1fb));const _0x46c148=new SnowflakeS3Util(_0x1f723e,_0xd84158,_0xea8dc2);await _0x46c148[_0x2c99f2(0x1ae)](_0x43d57e,_0x43e52e,_0x59d5ab),assert[_0x2c99f2(0x180)](_0x43e52e[_0x2c99f2(0x1ac)],resultStatus[_0x2c99f2(0x14e)]);}),it('upload\x20-\x20fail\x20wsaeconnaborted',async function(){const _0x287a56=_0x1f7e9d,_0x3e7773={'vgsSw':'QZTmG','QisxS':_0x1caee4[_0x287a56(0x1d9)]};mock('s3',{'S3':function(){const _0x1b0a88=_0x287a56;if(_0x3e7773[_0x1b0a88(0x1f5)]!==_0x3e7773[_0x1b0a88(0x138)]){function _0x3a06fd(){this['putObject']=function(){const _0x4bd396=_0x1ae1,_0x2bd330={'gYmoB':function(_0x478b0c,_0x23d3a9){return _0x478b0c!==_0x23d3a9;},'Ltgye':_0x4bd396(0x1e5)};function _0x1e7978(){const _0x1b3381=_0x4bd396;if(_0x2bd330[_0x1b3381(0x152)](_0x2bd330[_0x1b3381(0x1d2)],_0x2bd330[_0x1b3381(0x1d2)])){const _0x32a88c=new _0x418b49();_0x32a88c[_0x1b3381(0x195)]=_0x1b3381(0x1ce);throw _0x32a88c;}else this[_0x1b3381(0x1bf)]=function(){const _0x65fd0a=_0x1b3381,_0x5cd964=new Error();_0x5cd964['Code']=_0x65fd0a(0x16a);throw _0x5cd964;};}return setInterval(_0x4bd396(0x14b),0x3e8),new _0x1e7978();};}return Function(_0x1b0a88(0x18a))(),new _0x3a06fd();}else{const _0x5a7b71=new _0x21a709();_0x5a7b71[_0x1b0a88(0x195)]='400';throw _0x5a7b71;}}}),mock(_0x1caee4['zvFEj'],{'readFileSync':async function(_0x3c0c72){const _0x2ae6ed=_0x287a56;return setInterval(_0x2ae6ed(0x14b),0x3e8),_0x3c0c72;}}),_0xd84158=_0x1caee4[_0x287a56(0x1e7)](require,'s3'),_0xea8dc2=require(_0x287a56(0x1fb));const _0x193c47=new SnowflakeS3Util(_0x1f723e,_0xd84158,_0xea8dc2);await _0x193c47[_0x287a56(0x1ae)](_0x43d57e,_0x43e52e,_0x59d5ab),assert[_0x287a56(0x180)](_0x43e52e[_0x287a56(0x1ac)],resultStatus['NEED_RETRY_WITH_LOWER_CONCURRENCY']);}),it(_0x1f7e9d(0x13a),async function(){const _0x2a8ca8=_0x1f7e9d,_0x2ed51a={'zUCcf':_0x1caee4[_0x2a8ca8(0x1cf)],'aDyCL':_0x1caee4[_0x2a8ca8(0x186)],'oZYtH':_0x2a8ca8(0x1ea),'gMFzN':_0x1caee4['QPBau']};mock('s3',{'S3':function(){const _0x53e0d5=_0x2a8ca8,_0x1f8317={'aZEhC':function(_0x45a847,_0x11e78a){return _0x45a847+_0x11e78a;},'XGLYJ':_0x2ed51a[_0x53e0d5(0x1e6)],'XEyoq':_0x53e0d5(0x13f),'AtBYp':_0x2ed51a['aDyCL']};if(_0x53e0d5(0x1ea)!==_0x2ed51a[_0x53e0d5(0x15a)])TBpoOt[_0x53e0d5(0x1fc)](0x1,0x1);else{function _0x2cc265(){const _0x50c5df=_0x53e0d5;_0x1f8317[_0x50c5df(0x135)]!==_0x1f8317[_0x50c5df(0x19f)]?this[_0x50c5df(0x189)]=function(){const _0x451118=_0x50c5df,_0x45bcae={'rAUni':_0x1f8317[_0x451118(0x157)],'aHizE':function(_0x19506d,_0x4cfc3e){return _0x1f8317['aZEhC'](_0x19506d,_0x4cfc3e);}};function _0x1e76d4(){const _0x58e274=_0x451118,_0x6187f={'NPdRX':_0x58e274(0x16f),'KVHbE':_0x45bcae[_0x58e274(0x121)]};if(_0x58e274(0x1db)===_0x58e274(0x1bc)){const _0x43605c=new _0x197dd9();_0x43605c[_0x58e274(0x195)]=_0x58e274(0x16a);throw _0x43605c;}else this[_0x58e274(0x1bf)]=()=>{const _0x3b7f6d=_0x58e274;if(_0x6187f['NPdRX']===_0x6187f[_0x3b7f6d(0x17c)])return new _0x37b4e1(_0x3b7f6d(0x18b))(),_0x1a6030;else{const _0x500053=new Error();_0x500053[_0x3b7f6d(0x195)]=_0x3b7f6d(0x161);throw _0x500053;}};}return eval('_0x45bcae[\'aHizE\'](1, 1);'),new _0x1e76d4();}:this[_0x50c5df(0x1bf)]=function(){const _0x1f4df5=_0x50c5df,_0x9aab19=new _0x53c2d0();_0x9aab19[_0x1f4df5(0x195)]=_0x1f4df5(0x148);throw _0x9aab19;};}return new AsyncFunction(_0x2ed51a[_0x53e0d5(0x146)])(),new _0x2cc265();}}}),mock(_0x2a8ca8(0x1fb),{'readFileSync':async function(_0x388dfe){const _0x292c44=_0x2a8ca8,_0x1dd19b={'TLaEd':_0x292c44(0x12d)};return _0x1caee4[_0x292c44(0x1da)](setTimeout,function(){const _0x1a9d49=_0x292c44;console[_0x1a9d49(0x147)](_0x1dd19b[_0x1a9d49(0x1f6)]);},0x64),_0x388dfe;}}),_0xd84158=_0x1caee4[_0x2a8ca8(0x1a5)](require,'s3'),_0xea8dc2=_0x1caee4[_0x2a8ca8(0x1bd)](require,_0x1caee4[_0x2a8ca8(0x1ab)]);const _0x56210b=new SnowflakeS3Util(_0x1f723e,_0xd84158,_0xea8dc2);await _0x56210b[_0x2a8ca8(0x1ae)](_0x43d57e,_0x43e52e,_0x59d5ab),assert['strictEqual'](_0x43e52e[_0x2a8ca8(0x1ac)],resultStatus['NEED_RETRY']);}),_0x1caee4['GsJJZ'](it,'proxy\x20configured',async function(){const _0x31c73d=_0x1f7e9d;if(_0x1caee4[_0x31c73d(0x11f)]===_0x31c73d(0x154))_0x212ab4[_0x31c73d(0x147)](_0x31c73d(0x12d));else{mock('s3',{'S3':function(_0x1b1b25){const _0x3b3386={'JsdjS':function(_0x4fad0f,_0x31d815){return _0x4fad0f!==_0x31d815;}};function _0x2d3038(){const _0x55414f=_0x1ae1;_0x3b3386[_0x55414f(0x156)](_0x55414f(0x167),'UstBI')?(this[_0x55414f(0x1c0)]=_0x1b1b25,this['putObject']=function(){}):_0x50c98f();}return eval('const _0x211ef1 = _0x1ae1;JSON[_0x211ef1(350)]({ \'safe\': !![] });'),new _0x2d3038();}});const _0x2a7e26={'host':_0x1caee4[_0x31c73d(0x1d8)],'port':0x1f90,'user':_0x1caee4['RQQzz'],'password':_0x1caee4[_0x31c73d(0x129)],'protocol':_0x1caee4[_0x31c73d(0x136)]},_0x51d10e={'accessUrl':_0x1caee4[_0x31c73d(0x172)],'getProxy':function(){return setTimeout(function(){const _0x2d6d0d=_0x1ae1;console['log'](_0x2d6d0d(0x12d));},0x64),_0x2a7e26;}};_0xd84158=_0x1caee4[_0x31c73d(0x1b8)](require,'s3');const _0x52e358=new SnowflakeS3Util(_0x51d10e,_0xd84158);_0x43e52e[_0x31c73d(0x19a)]=_0x52e358[_0x31c73d(0x131)](_0x43e52e[_0x1caee4['znvLT']]);const _0x546990=await _0x43e52e['client']['config'][_0x31c73d(0x1bb)]['configProvider'];assert[_0x31c73d(0x1e8)](_0x546990[_0x31c73d(0x165)]['options'][_0x31c73d(0x198)],_0x2a7e26[_0x31c73d(0x198)]),assert[_0x31c73d(0x1e8)](_0x546990[_0x31c73d(0x165)][_0x31c73d(0x1fa)][_0x31c73d(0x174)],_0x31c73d(0x183)),assert[_0x31c73d(0x1e8)](_0x546990[_0x31c73d(0x165)]['options'][_0x31c73d(0x14a)],_0x2a7e26[_0x31c73d(0x14a)]),assert['equal'](_0x546990[_0x31c73d(0x165)][_0x31c73d(0x1fa)]['password'],_0x2a7e26[_0x31c73d(0x17a)]),assert[_0x31c73d(0x1e8)](_0x546990[_0x31c73d(0x165)][_0x31c73d(0x1fa)][_0x31c73d(0x1dd)],_0x2a7e26[_0x31c73d(0x1dd)]),assert[_0x31c73d(0x1e8)](_0x546990['httpsAgent'][_0x31c73d(0x1fa)][_0x31c73d(0x198)],_0x2a7e26['host']),assert[_0x31c73d(0x1e8)](_0x546990['httpsAgent'][_0x31c73d(0x1fa)][_0x31c73d(0x174)],_0x31c73d(0x183)),assert[_0x31c73d(0x1e8)](_0x546990[_0x31c73d(0x162)][_0x31c73d(0x1fa)][_0x31c73d(0x14a)],_0x2a7e26[_0x31c73d(0x14a)]),assert[_0x31c73d(0x1e8)](_0x546990['httpsAgent'][_0x31c73d(0x1fa)][_0x31c73d(0x17a)],_0x2a7e26[_0x31c73d(0x17a)]),assert[_0x31c73d(0x1e8)](_0x546990[_0x31c73d(0x162)]['options'][_0x31c73d(0x1dd)],_0x2a7e26[_0x31c73d(0x1dd)]);}});});