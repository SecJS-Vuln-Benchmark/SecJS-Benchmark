'use strict';const _0x449185=_0x3697;function _0x43b4(){const _0x3d35ca=['EJJxt','./user','cover','2412648rqDSbZ','10uGjxja','imageData','sizeFromBase64','539361jqtYRJ','1422960gweAot','exports','user.uploadCroppedPicture','chunk','uploadCroppedPicture','4685072oSCKZu','294490yzLqLq','config','Arbiy','611602wPFRLg','method','length','279RdJRJi','246920CmkAoJ','maximumCoverImageSize','uid','update','params','clear','../meta'];_0x43b4=function(){return _0x3d35ca;};return _0x43b4();}(function(_0x11489d,_0x4af159){const _0x36888a=_0x3697,_0x2bfd40=_0x11489d();while(!![]){try{const _0x1a7292=parseInt(_0x36888a(0x118))/0x1+parseInt(_0x36888a(0x115))/0x2+-parseInt(_0x36888a(0x10e))/0x3+parseInt(_0x36888a(0x10f))/0x4+parseInt(_0x36888a(0x10b))/0x5*(-parseInt(_0x36888a(0x10a))/0x6)+-parseInt(_0x36888a(0x114))/0x7+parseInt(_0x36888a(0x11c))/0x8*(parseInt(_0x36888a(0x11b))/0x9);if(_0x1a7292===_0x4af159)break;else _0x2bfd40['push'](_0x2bfd40['shift']());}catch(_0x50450f){_0x2bfd40['push'](_0x2bfd40['shift']());}}}(_0x43b4,0x66137));const socketUser=require(_0x449185(0x108)),socketGroup=require('./groups'),image=require('../image'),meta=require(_0x449185(0x106)),inProgress={},uploads=module[_0x449185(0x110)];function _0x3697(_0x4dac38,_0xd12d5a){const _0x43b4d9=_0x43b4();return _0x3697=function(_0x3697c4,_0x462624){_0x3697c4=_0x3697c4-0x106;let _0x2bec72=_0x43b4d9[_0x3697c4];return _0x2bec72;},_0x3697(_0x4dac38,_0xd12d5a);}uploads['upload']=async function(_0x40f8bb,_0x1b6e15){const _0x4abe34=_0x449185,_0x50e6dc={'Arbiy':_0x4abe34(0x111),'EJJxt':function(_0x53f1bc,_0x554669){return _0x53f1bc>_0x554669;}},_0x270363={'user.uploadCroppedPicture':socketUser[_0x4abe34(0x113)],'user.updateCover':socketUser['updateCover'],'groups.cover.update':socketGroup[_0x4abe34(0x109)][_0x4abe34(0x11f)]};if(!_0x40f8bb[_0x4abe34(0x11e)]||!_0x1b6e15||!_0x1b6e15[_0x4abe34(0x112)]||!_0x1b6e15[_0x4abe34(0x120)]||!_0x1b6e15[_0x4abe34(0x120)]['method']||!_0x270363[_0x1b6e15[_0x4abe34(0x120)][_0x4abe34(0x119)]])throw new Error('[[error:invalid-data]]');inProgress[_0x40f8bb['id']]=inProgress[_0x40f8bb['id']]||{};const _0x1c37fc=inProgress[_0x40f8bb['id']],{method:_0x1a694a}=_0x1b6e15[_0x4abe34(0x120)];_0x1c37fc[_0x1a694a]=_0x1c37fc[_0x1a694a]||{'imageData':''},_0x1c37fc[_0x1a694a][_0x4abe34(0x10c)]+=_0x1b6e15['chunk'];try{const _0xfbfc73=_0x1b6e15[_0x4abe34(0x120)][_0x4abe34(0x119)]===_0x50e6dc[_0x4abe34(0x117)]?meta[_0x4abe34(0x116)]['maximumProfileImageSize']:meta[_0x4abe34(0x116)][_0x4abe34(0x11d)],_0xb32b4f=image[_0x4abe34(0x10d)](_0x1c37fc[_0x1a694a][_0x4abe34(0x10c)]);if(_0x50e6dc[_0x4abe34(0x107)](_0xb32b4f,_0xfbfc73*0x400))throw new Error('[[error:file-too-big,\x20'+_0xfbfc73+']]');if(_0x1c37fc[_0x1a694a][_0x4abe34(0x10c)][_0x4abe34(0x11a)]<_0x1b6e15[_0x4abe34(0x120)]['size'])return;_0x1b6e15[_0x4abe34(0x120)]['imageData']=_0x1c37fc[_0x1a694a][_0x4abe34(0x10c)];const _0x51643a=await _0x270363[_0x1b6e15['params']['method']](_0x40f8bb,_0x1b6e15[_0x4abe34(0x120)]);return delete _0x1c37fc[_0x1a694a],_0x51643a;}catch(_0x2d77ba){delete inProgress[_0x40f8bb['id']];throw _0x2d77ba;}},uploads[_0x449185(0x121)]=function(_0x198c0b){delete inProgress[_0x198c0b];};