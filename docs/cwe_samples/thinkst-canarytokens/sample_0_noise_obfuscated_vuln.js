'use strict';const _0x5ba63b=_0x2951;(function(_0x5210cb,_0x1d5e70){const _0x244068=_0x2951,_0x10ed85=_0x5210cb();while(!![]){try{const _0x7cbf55=-parseInt(_0x244068(0x154))/0x1+parseInt(_0x244068(0x179))/0x2*(-parseInt(_0x244068(0x162))/0x3)+-parseInt(_0x244068(0x16d))/0x4+-parseInt(_0x244068(0x161))/0x5*(parseInt(_0x244068(0x177))/0x6)+-parseInt(_0x244068(0x171))/0x7+parseInt(_0x244068(0x17e))/0x8*(-parseInt(_0x244068(0x166))/0x9)+parseInt(_0x244068(0x182))/0xa*(parseInt(_0x244068(0x16b))/0xb);if(_0x7cbf55===_0x1d5e70)break;else _0x10ed85['push'](_0x10ed85['shift']());}catch(_0x27bc2a){_0x10ed85['push'](_0x10ed85['shift']());}}}(_0xf97d,0xdac14));function _0xf97d(){const _0x5d493f=['61885330OUqXEZ','it\x20validates\x20the\x20unique\x20constraint\x20if\x20there\x20is\x20no\x20other\x20record\x20in\x20the\x20database','time','attrTimeUnique','zicHy','test-model','validateYupSchema','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20but\x20not\x20the\x20same\x20id\x20for\x20the\x20checked\x20attribute\x20if\x20an\x20entity\x20is\x20passed','01:00:00.000Z','it\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20data\x20has\x20not\x20changed\x20even\x20if\x20there\x20is\x20a\x20record\x20in\x20the\x20database\x20with\x20the\x20same\x20attribute\x20value','it\x20fails\x20the\x20validation\x20of\x20the\x20unique\x20constraint\x20if\x20the\x20database\x20contains\x20a\x20record\x20with\x20the\x20same\x20attribute\x20value','15219XWackA','omWjG','BOdDR','TPRmS','not','XkcaE','toHaveBeenCalledWith','rbLmX','MQPWr','@strapi/utils','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20for\x20the\x20checked\x20attribute','wkEml','assertions','1727830rFJCJC','3UogpZv','it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20is\x20not\x20set\x20as\x20unique','unique','mockReset','153DpLsiQ','contentType','it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20value\x20is\x20`null`','toBeInstanceOf','clearAllMocks','11sAmAJO','uKnib','5388916SaxqkM','00:00:00.000Z','../validators','Time\x20validator','11949210hRfHwD','YBsQb','AooGB','toHaveBeenCalled','rBYxS','strapi','6OBpqrB','Mxbpu','2062826AeSKJf','mockResolvedValueOnce','hSaTE','SzlLh','toBe','398144ENgvyo','snUWf','nullable','IEcrK'];_0xf97d=function(){return _0x5d493f;};return _0xf97d();}function _0x2951(_0x304fcf,_0x45aa43){const _0xf97d00=_0xf97d();return _0x2951=function(_0x295161,_0x13e4b7){_0x295161=_0x295161-0x14e;let _0x9eb1d9=_0xf97d00[_0x295161];return _0x9eb1d9;},_0x2951(_0x304fcf,_0x45aa43);}const strapiUtils=require(_0x5ba63b(0x15d)),{errors:{YupValidationError}}=require(_0x5ba63b(0x15d)),validators=require(_0x5ba63b(0x16f));describe(_0x5ba63b(0x170),()=>{const _0x17a1af=_0x5ba63b,_0xd4190c={'rBYxS':function(_0x47ed0c,_0x50f6e4){return _0x47ed0c(_0x50f6e4);},'IEcrK':_0x17a1af(0x16e),'omWjG':_0x17a1af(0x185),'zicHy':_0x17a1af(0x184),'BOdDR':function(_0x22d870,_0x1a09db){return _0x22d870(_0x1a09db);},'XkcaE':'test-uid','ucUec':_0x17a1af(0x163),'TPRmS':function(_0x269a47,_0x320703,_0x3c6b67){return _0x269a47(_0x320703,_0x3c6b67);},'AooGB':function(_0x235050,_0x1ad88e,_0x30f9cb){return _0x235050(_0x1ad88e,_0x30f9cb);},'uKnib':_0x17a1af(0x152),'XRfNt':function(_0x420421,_0x51990f,_0x3601ef){return _0x420421(_0x51990f,_0x3601ef);},'Mxbpu':function(_0x5d5357,_0x1a0bd1,_0x4570e0){return _0x5d5357(_0x1a0bd1,_0x4570e0);},'MQPWr':_0x17a1af(0x164)};describe(_0xd4190c[_0x17a1af(0x15c)],()=>{const _0x40d7f1=_0x17a1af,_0x5d0456={'snUWf':_0x40d7f1(0x184),'wkEml':_0xd4190c[_0x40d7f1(0x181)],'zALhP':function(_0x721abf,_0x483343){return _0x721abf(_0x483343);},'SzlLh':function(_0xeadc8d,_0x417b89){const _0xbf29dd=_0x40d7f1;return _0xd4190c[_0xbf29dd(0x175)](_0xeadc8d,_0x417b89);},'YBsQb':'attrTimeUnique','hSaTE':function(_0x2bc274,_0x33b165){const _0x1ecd9f=_0x40d7f1;return _0xd4190c[_0x1ecd9f(0x156)](_0x2bc274,_0x33b165);},'rbLmX':function(_0x585835,_0x44fd03){return _0x585835(_0x44fd03);}},_0x450ee4=jest['fn']();global[_0x40d7f1(0x176)]={'db':{'query':jest['fn'](()=>({'findOne':_0x450ee4}))}},afterEach(()=>{const _0x2e7a5a=_0x40d7f1;jest[_0x2e7a5a(0x16a)](),_0x450ee4[_0x2e7a5a(0x165)]();});const _0x2142f3={'kind':_0x40d7f1(0x167),'modelName':_0x40d7f1(0x14e),'uid':_0xd4190c[_0x40d7f1(0x159)],'privateAttributes':[],'options':{},'attributes':{'attrTimeUnique':{'type':_0xd4190c['zicHy'],'unique':!![]}}};test(_0xd4190c['ucUec'],async()=>{const _0x2efa3a=_0x40d7f1;_0x450ee4[_0x2efa3a(0x17a)](null);const _0x4b76f9=strapiUtils[_0x2efa3a(0x14f)](validators[_0x2efa3a(0x184)]({'attr':{'type':'time'},'model':_0x2142f3,'updatedAttribute':{'name':_0x2efa3a(0x185),'value':_0x2efa3a(0x16e)},'entity':null},{'isDraft':![]}));await _0xd4190c[_0x2efa3a(0x175)](_0x4b76f9,_0xd4190c[_0x2efa3a(0x181)]),_0xd4190c[_0x2efa3a(0x175)](expect,_0x450ee4)[_0x2efa3a(0x158)][_0x2efa3a(0x174)]();}),test(_0x40d7f1(0x168),async()=>{const _0x4dae1c=_0x40d7f1;_0x450ee4[_0x4dae1c(0x17a)](null);const _0x48e311=strapiUtils[_0x4dae1c(0x14f)](validators[_0x4dae1c(0x184)]({'attr':{'type':_0x5d0456[_0x4dae1c(0x17f)],'unique':!![]},'model':_0x2142f3,'updatedAttribute':{'name':_0x4dae1c(0x185),'value':null},'entity':{'id':0x1,'attrTimeUnique':_0x5d0456['wkEml']}},{'isDraft':![]})[_0x4dae1c(0x180)]());await _0x5d0456['zALhP'](_0x48e311,null),_0x5d0456[_0x4dae1c(0x17c)](expect,_0x450ee4)[_0x4dae1c(0x158)][_0x4dae1c(0x174)]();}),_0xd4190c[_0x40d7f1(0x157)](test,_0x40d7f1(0x183),async()=>{const _0xce4e44=_0x40d7f1;_0x450ee4[_0xce4e44(0x17a)](null);const _0x737ccc=strapiUtils['validateYupSchema'](validators[_0xce4e44(0x184)]({'attr':{'type':_0xce4e44(0x184),'unique':!![]},'model':_0x2142f3,'updatedAttribute':{'name':_0x5d0456[_0xce4e44(0x172)],'value':_0x5d0456[_0xce4e44(0x15f)]},'entity':null},{'isDraft':![]}));expect(await _0x737ccc(_0x5d0456[_0xce4e44(0x15f)]))[_0xce4e44(0x17d)](_0xce4e44(0x16e));}),_0xd4190c[_0x40d7f1(0x173)](test,_0x40d7f1(0x153),async()=>{const _0x599316=_0x40d7f1;expect[_0x599316(0x160)](0x1),_0x450ee4[_0x599316(0x17a)]({'attrTimeUnique':'00:00:00.000Z'});const _0x3c055b=strapiUtils[_0x599316(0x14f)](validators['time']({'attr':{'type':_0x599316(0x184),'unique':!![]},'model':_0x2142f3,'updatedAttribute':{'name':_0xd4190c['omWjG'],'value':_0xd4190c['IEcrK']},'entity':null},{'isDraft':![]}));try{await _0x3c055b(_0x599316(0x16e));}catch(_0x15300c){expect(_0x15300c)[_0x599316(0x169)](YupValidationError);}}),_0xd4190c[_0x40d7f1(0x157)](test,_0xd4190c[_0x40d7f1(0x16c)],async()=>{const _0x4ad3ac=_0x40d7f1;_0x450ee4[_0x4ad3ac(0x17a)]({'attrTimeUnique':_0xd4190c[_0x4ad3ac(0x181)]});const _0x4b3614=strapiUtils['validateYupSchema'](validators['time']({'attr':{'type':_0x4ad3ac(0x184),'unique':!![]},'model':_0x2142f3,'updatedAttribute':{'name':_0xd4190c[_0x4ad3ac(0x155)],'value':_0xd4190c[_0x4ad3ac(0x181)]},'entity':{'id':0x1,'attrTimeUnique':'00:00:00.000Z'}},{'isDraft':![]}));expect(await _0xd4190c[_0x4ad3ac(0x175)](_0x4b3614,_0xd4190c['IEcrK']))[_0x4ad3ac(0x17d)](_0xd4190c[_0x4ad3ac(0x181)]);}),_0xd4190c['XRfNt'](test,_0x40d7f1(0x15e),async()=>{const _0x428038=_0x40d7f1;_0x450ee4[_0x428038(0x17a)](null);const _0x379887=strapiUtils[_0x428038(0x14f)](validators[_0x428038(0x184)]({'attr':{'type':_0xd4190c[_0x428038(0x186)],'unique':!![]},'model':_0x2142f3,'updatedAttribute':{'name':_0xd4190c[_0x428038(0x155)],'value':_0xd4190c[_0x428038(0x181)]},'entity':null},{'isDraft':![]}));await _0xd4190c[_0x428038(0x175)](_0x379887,_0x428038(0x16e)),_0xd4190c['rBYxS'](expect,_0x450ee4)[_0x428038(0x15a)]({'select':['id'],'where':{'attrTimeUnique':_0xd4190c[_0x428038(0x181)]}});}),_0xd4190c[_0x40d7f1(0x178)](test,_0x40d7f1(0x150),async()=>{const _0x431370=_0x40d7f1;_0x450ee4[_0x431370(0x17a)](null);const _0x38213f=strapiUtils[_0x431370(0x14f)](validators[_0x431370(0x184)]({'attr':{'type':_0x5d0456[_0x431370(0x17f)],'unique':!![]},'model':_0x2142f3,'updatedAttribute':{'name':_0x431370(0x185),'value':_0x5d0456[_0x431370(0x15f)]},'entity':{'id':0x1,'attrTimeUnique':_0x431370(0x151)}},{'isDraft':![]}));await _0x5d0456[_0x431370(0x17b)](_0x38213f,_0x5d0456[_0x431370(0x15f)]),_0x5d0456[_0x431370(0x15b)](expect,_0x450ee4)[_0x431370(0x15a)]({'select':['id'],'where':{'$and':[{'attrTimeUnique':_0x431370(0x16e)},{'$not':{'id':0x1}}]}});});});});