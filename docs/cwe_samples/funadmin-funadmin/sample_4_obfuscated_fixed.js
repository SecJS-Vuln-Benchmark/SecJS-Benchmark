'use strict';const _0x510441=_0x2f0f;(function(_0x5682e2,_0x20bb34){const _0x330303=_0x2f0f,_0x42987d=_0x5682e2();while(!![]){try{const _0x1843f1=-parseInt(_0x330303(0xdc))/0x1+parseInt(_0x330303(0xb6))/0x2*(-parseInt(_0x330303(0xe2))/0x3)+parseInt(_0x330303(0x9d))/0x4*(parseInt(_0x330303(0xdb))/0x5)+parseInt(_0x330303(0xb8))/0x6*(-parseInt(_0x330303(0x9f))/0x7)+-parseInt(_0x330303(0xad))/0x8*(parseInt(_0x330303(0xc6))/0x9)+-parseInt(_0x330303(0xde))/0xa+parseInt(_0x330303(0xd7))/0xb;if(_0x1843f1===_0x20bb34)break;else _0x42987d['push'](_0x42987d['shift']());}catch(_0x3a48b2){_0x42987d['push'](_0x42987d['shift']());}}}(_0x2c16,0x65ec9));function _0x2c16(){const _0x498c62=['string','CuoYt','IHeQD','24490235ZzhLfG','fastify-bearer-auth','JmPaI','reject','3535ufPNuF','203367UVmeYQ','verifyBearerAuthFactory','4147550ZdgwjA','zTwes','raw','content-type','174441OFAPiJ','DDwrc','then','authorization','crypto','3596uROAan','Vqpaf','189FbGelH','hasOwnProperty','assign','bWaBz','eaFTT','catch','HtNJR','substring','3.x','invalid\x20authorization\x20header','NfBOO','timingSafeEqual','fastify.log\x20does\x20not\x20have\x20level\x20\x27','FUkOL','3936WkEilR','trim','zmuGS','error','ENvXs','options.keys\x20has\x20to\x20contain\x20only\x20string\x20entries','decorate','JvhTm','internals','28uJWcmM','addHook','75282CUhGug','code','SHqUx','lrJuv','function','wbsoJ','log','findIndex','qhlaT','message','call','exports','header','IpxWb','12321rhFYwv','mLEhc','verifyErrorLogLevel','headers','keys','verifyBearerAuth','from','length','send','unauthorized:\x20%s','VJJkN','iXTzC','QYbxq','resolve'];_0x2c16=function(){return _0x498c62;};return _0x2c16();}const crypto=require(_0x510441(0x9c)),fp=require('fastify-plugin'),defaultOptions={'keys':[],'auth':undefined,'errorResponse'(_0x5acee2){const _0x281de2=_0x510441;return{'error':_0x5acee2[_0x281de2(0xc1)]};},'contentType':undefined,'bearerType':'Bearer'};function verifyBearerAuthFactory(_0xc00cd7){const _0x858fda=_0x510441,_0xc72bdb={'CuoYt':'verifyBearerAuthFactory','JvhTm':function(_0x1e3855,_0x3d7f4e){return _0x1e3855 instanceof _0x3d7f4e;},'iXTzC':function(_0xedc617,_0x350f7e){return _0xedc617(_0x350f7e);},'zmuGS':function(_0xc2e3,_0x321ff1){return _0xc2e3!==_0x321ff1;},'FUkOL':_0x858fda(0xa2),'wbsoJ':function(_0xe80b1d,_0x2a5723){return _0xe80b1d===_0x2a5723;},'IHeQD':_0x858fda(0xe1),'GBmMH':function(_0x47490a,_0x46512f){return _0x47490a(_0x46512f);},'ENvXs':function(_0x5ea53a,_0x4c1015){return _0x5ea53a(_0x4c1015);},'GGugm':function(_0x137083,_0x1025be){return _0x137083(_0x1025be);},'HtNJR':function(_0x57ae67,_0x4afca9){return _0x57ae67(_0x4afca9);},'rbAkQ':_0x858fda(0xcf),'mLEhc':function(_0x38d71e,_0x194d63,_0x158ede){return _0x38d71e(_0x194d63,_0x158ede);},'IpxWb':_0x858fda(0xa8),'DDwrc':_0x858fda(0xb0)},_0x2e82dc=Object['assign']({},defaultOptions,_0xc00cd7);if(_0x2e82dc[_0x858fda(0xca)]instanceof Set)_0x2e82dc['keys']=Array[_0x858fda(0xcc)](_0x2e82dc[_0x858fda(0xca)]);const {keys:_0x591f68,errorResponse:_0xc0aab4,contentType:_0x347733,bearerType:_0x8a08ec,auth:_0x5c996d,addHook:addHook=!![],verifyErrorLogLevel:verifyErrorLogLevel=_0xc72bdb[_0x858fda(0xe3)]}=_0x2e82dc;for(let _0x1ab9cd=0x0,_0xea1a84=_0x591f68[_0x858fda(0xcd)];_0x1ab9cd<_0xea1a84;++_0x1ab9cd){if(_0xc72bdb[_0x858fda(0xaf)](typeof _0x591f68[_0x1ab9cd],_0x858fda(0xd4))){if('EMGyK'===_0x858fda(0xd9))_0x321536[_0x858fda(0xb3)](_0xc72bdb[_0x858fda(0xd5)],_0x2008b3),_0x512912[_0x858fda(0xb3)](_0x858fda(0xcb),_0x1e2ce6(_0x565d96));else throw new Error(_0x858fda(0xb2));}_0x591f68[_0x1ab9cd]=Buffer[_0x858fda(0xcc)](_0x591f68[_0x1ab9cd]);}return function _0x481ab3(_0x5d3ba5,_0x2b4e06,_0x1732d5){const _0x12106b=_0x858fda,_0x506fe8=_0x5d3ba5[_0x12106b(0xe0)][_0x12106b(0xc9)][_0x12106b(0x9b)];if(!_0x506fe8){const _0x3f9d69=_0xc72bdb[_0x12106b(0xa5)](Error,'missing\x20authorization\x20header');if(verifyErrorLogLevel)_0x5d3ba5[_0x12106b(0xbe)][verifyErrorLogLevel](_0xc72bdb['rbAkQ'],_0x3f9d69['message']);if(_0x347733)_0x2b4e06[_0x12106b(0xc4)](_0xc72bdb[_0x12106b(0xd6)],_0x347733);_0x2b4e06[_0x12106b(0xb9)](0x191);if(!addHook){_0x1732d5(_0x3f9d69);return;}_0x2b4e06[_0x12106b(0xce)](_0xc0aab4(_0x3f9d69));return;}const _0x3d642f=_0x506fe8[_0x12106b(0xa6)](_0x8a08ec['length'])[_0x12106b(0xae)]();let _0x3d12b2;if(_0x5c996d&&_0xc72bdb['JvhTm'](_0x5c996d,Function))try{_0x3d12b2=_0xc72bdb[_0x12106b(0xc7)](_0x5c996d,_0x3d642f,_0x5d3ba5);}catch(_0x596121){_0x3d12b2=Promise[_0x12106b(0xda)](_0x596121);}else _0x3d12b2=_0xc72bdb[_0x12106b(0xc7)](authenticate,_0x591f68,_0x3d642f);const _0x30b6f8=_0xc72bdb[_0x12106b(0xa5)](Error,_0xc72bdb[_0x12106b(0xc5)]);Promise[_0x12106b(0xd3)](_0x3d12b2)[_0x12106b(0x9a)](_0xaffc96=>{const _0x58c017=_0x12106b,_0x1daf2b={'SHqUx':function(_0x1f1674,_0x4b3143){const _0x4995eb=_0x2f0f;return _0xc72bdb[_0x4995eb(0xb4)](_0x1f1674,_0x4b3143);},'zTwes':function(_0x1386e5,_0x5cf996){const _0x1998a3=_0x2f0f;return _0xc72bdb[_0x1998a3(0xd1)](_0x1386e5,_0x5cf996);}};if(_0xc72bdb[_0x58c017(0xaf)](_0xc72bdb[_0x58c017(0xac)],_0xc72bdb[_0x58c017(0xac)])){const _0x4d2a55=_0x1daf2b[_0x58c017(0xba)](_0x33913e,_0x14d6af)?_0x2fb79a:_0x147b4c(_0x1aa172(_0x2cfab6));_0x30e362['code'](0x1f4);if(!_0x24a258)return _0x36c81e(_0x4d2a55);_0xb0d2c2[_0x58c017(0xce)](_0x1daf2b[_0x58c017(0xdf)](_0x495289,_0x4d2a55));}else{if(_0xc72bdb[_0x58c017(0xbd)](_0xaffc96,![])){if(verifyErrorLogLevel)_0x5d3ba5[_0x58c017(0xbe)][verifyErrorLogLevel](_0x58c017(0xcf),_0x30b6f8[_0x58c017(0xc1)]);if(_0x347733)_0x2b4e06[_0x58c017(0xc4)](_0xc72bdb[_0x58c017(0xd6)],_0x347733);_0x2b4e06['code'](0x191);if(!addHook)return _0x1732d5(_0x30b6f8);_0x2b4e06[_0x58c017(0xce)](_0xc72bdb[_0x58c017(0xd1)](_0xc0aab4,_0x30b6f8));return;}if(_0xaffc96===!![]){try{_0x1732d5();}catch(_0x5d846a){_0x1732d5(_0x5d846a);}return;}const _0x4828f9=new Error('internal\x20server\x20error');_0x2b4e06['code'](0x1f4);if(!addHook)return _0x1732d5(_0x4828f9);_0x2b4e06[_0x58c017(0xce)](_0xc72bdb['GBmMH'](_0xc0aab4,_0x4828f9));}})[_0x12106b(0xa4)](_0xd09124=>{const _0x433ea9=_0x12106b,_0x3f380b=_0xc72bdb[_0x433ea9(0xb4)](_0xd09124,Error)?_0xd09124:Error(_0xc72bdb[_0x433ea9(0xb1)](String,_0xd09124));_0x2b4e06[_0x433ea9(0xb9)](0x1f4);if(!addHook)return _0x1732d5(_0x3f380b);_0x2b4e06['send'](_0xc72bdb['GGugm'](_0xc0aab4,_0x3f380b));});};}function authenticate(_0xcb269d,_0x3a727e){const _0x562af0=_0x510441,_0x19885d={'NfBOO':function(_0x411648,_0x5c014d){return _0x411648!==_0x5c014d;}},_0x39b63f=Buffer[_0x562af0(0xcc)](_0x3a727e);return _0x19885d[_0x562af0(0xa9)](_0xcb269d[_0x562af0(0xbf)](_0x2069fe=>compare(_0x2069fe,_0x39b63f)),-0x1);}function compare(_0x460b03,_0x4e6061){const _0x2d8936=_0x510441;if(_0x460b03['length']!==_0x4e6061[_0x2d8936(0xcd)])return crypto[_0x2d8936(0xaa)](_0x460b03,_0x460b03),![];return crypto[_0x2d8936(0xaa)](_0x460b03,_0x4e6061);}function plugin(_0x1cbaa7,_0x40e62b,_0x55e673){const _0x1bbb38=_0x510441,_0x5ee236={'oVupq':'error','eySDd':function(_0x4bf464,_0x5cbdca){return _0x4bf464!==_0x5cbdca;},'Vqpaf':'function','Pilgq':function(_0x1e4a55,_0x39391a){return _0x1e4a55!=_0x39391a;},'qhlaT':_0x1bbb38(0xd4),'DIQvG':function(_0xc7f5fc,_0x3b8d53){return _0xc7f5fc!==_0x3b8d53;},'lrJuv':_0x1bbb38(0xa3),'VJJkN':function(_0x68b3ed,_0x130be7){return _0x68b3ed(_0x130be7);},'Jqfrn':'onRequest','QYbxq':function(_0x24f632,_0x2be8a5){return _0x24f632(_0x2be8a5);},'eSVlK':_0x1bbb38(0xdd)},_0x3280a2=_0x5ee236['oVupq'];_0x40e62b=Object[_0x1bbb38(0xa1)]({'addHook':!![],'verifyErrorLogLevel':_0x3280a2},_0x40e62b);if(!Object[_0x1bbb38(0xa0)][_0x1bbb38(0xc2)](_0x1cbaa7[_0x1bbb38(0xbe)],_0x1bbb38(0xb0))||_0x5ee236['eySDd'](typeof _0x1cbaa7[_0x1bbb38(0xbe)]['error'],_0x5ee236[_0x1bbb38(0x9e)]))_0x40e62b[_0x1bbb38(0xc8)]=null;if(_0x5ee236['Pilgq'](_0x40e62b['verifyErrorLogLevel'],null)&&(typeof _0x40e62b[_0x1bbb38(0xc8)]!==_0x5ee236[_0x1bbb38(0xc0)]||!Object[_0x1bbb38(0xa0)][_0x1bbb38(0xc2)](_0x1cbaa7['log'],_0x40e62b[_0x1bbb38(0xc8)])||_0x5ee236['DIQvG'](typeof _0x1cbaa7['log'][_0x40e62b[_0x1bbb38(0xc8)]],_0x1bbb38(0xbc)))){if(_0x5ee236[_0x1bbb38(0xbb)]!==_0x5ee236['lrJuv'])_0x1fd4f3();else{const _0x234ab0=_0x5ee236[_0x1bbb38(0xd0)](Error,_0x1bbb38(0xab)+_0x40e62b[_0x1bbb38(0xc8)]+'\x27');_0x55e673(_0x234ab0);}}_0x40e62b[_0x1bbb38(0xb7)]===!![]?_0x1cbaa7[_0x1bbb38(0xb7)](_0x5ee236['Jqfrn'],_0x5ee236[_0x1bbb38(0xd2)](verifyBearerAuthFactory,_0x40e62b)):(_0x1cbaa7[_0x1bbb38(0xb3)](_0x5ee236['eSVlK'],verifyBearerAuthFactory),_0x1cbaa7[_0x1bbb38(0xb3)](_0x1bbb38(0xcb),verifyBearerAuthFactory(_0x40e62b))),_0x55e673();}function _0x2f0f(_0x2fee2a,_0x7b7fdc){const _0x2c1698=_0x2c16();return _0x2f0f=function(_0x2f0fdf,_0x83f2dd){_0x2f0fdf=_0x2f0fdf-0x9a;let _0x2816fd=_0x2c1698[_0x2f0fdf];return _0x2816fd;},_0x2f0f(_0x2fee2a,_0x7b7fdc);}module['exports']=fp(plugin,{'fastify':_0x510441(0xa7),'name':_0x510441(0xd8)}),module[_0x510441(0xc3)][_0x510441(0xb5)]={'factory':verifyBearerAuthFactory};