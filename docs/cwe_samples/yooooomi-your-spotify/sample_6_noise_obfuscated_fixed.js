function _0x1888(_0x95283a,_0xf31650){const _0x535c4d=_0x535c();return _0x1888=function(_0x1888d9,_0x14e664){_0x1888d9=_0x1888d9-0xd7;let _0x48b78f=_0x535c4d[_0x1888d9];return _0x48b78f;},_0x1888(_0x95283a,_0xf31650);}const _0x127906=_0x1888;function _0x535c(){const _0x37c359=['VBRSS','800899sijZpD','9weLFqq','czhZF','Hey\x20%%{first_name,\x20\x22there\x22}%%,\x20Hey\x20%%{first_name}%%\x0aUnsubscribe\x20[%%{unsubscribe_url}%%]','equal','eQxdI','lAnJB','emittedEvent','Emails\x20API','returns','uvAEV','9880556TXDloX','11252072bVumZk','email.edited','members:emails:failed','sinon','test-validation-key','support@example.com','emails','allSettled','KtxJI','restore','6703890MnGEUD','get','members','KzJOK','../../../core/server/services/jobs/job-service','/batches/?include=count.recipients','emails/','batches','Can\x20browse\x20permanent\x20email\x20failures','getMembersValidationKey','posts','Does\x20default\x20replacements\x20on\x20the\x20HTML\x20body\x20of\x20an\x20old\x20email','matchHeaderSnapshot','4IVwLVI','includes','Can\x20read\x20an\x20email','Can\x20browse\x20email\x20batches\x20with\x20recipient\x20count','2365855tHdivN','../../utils/e2e-framework','410NTROdS','kzvHS','matchBodySnapshot','Can\x20browse\x20email\x20failures\x20with\x20includes','Can\x20browse\x20emails','../../../core/server/services/settings-helpers','plaintext','tchXX','/recipient-failures/?filter=severity:permanent&order=failed_at%20DESC','getAdminAPIAgent','assert','../../../core/server/models','tjzWB','expectStatus','stub','html','/recipient-failures/?order=failed_at%20DESC','Test\x20email','TALuc','2285919XNbOsr','recipients','%%{','/retry','mockEvents','gqlzc','12AiEvNc','Can\x20browse\x20temporary\x20email\x20failures','Can\x20retry\x20a\x20failed\x20email','assert/strict','/recipient-failures/?filter=severity:temporary&order=failed_at%20DESC','PfOpR','542047oqCgMq','fill','newsletters','pepda','submitted'];_0x535c=function(){return _0x37c359;};return _0x535c();}(function(_0x3c8e34,_0x5428e6){const _0x1913db=_0x1888,_0x140def=_0x3c8e34();while(!![]){try{const _0x2eb5a7=parseInt(_0x1913db(0x120))/0x1*(-parseInt(_0x1913db(0xfb))/0x2)+-parseInt(_0x1913db(0x114))/0x3+parseInt(_0x1913db(0x11a))/0x4*(-parseInt(_0x1913db(0xff))/0x5)+parseInt(_0x1913db(0xee))/0x6+-parseInt(_0x1913db(0xe3))/0x7+parseInt(_0x1913db(0xe4))/0x8*(parseInt(_0x1913db(0xd9))/0x9)+-parseInt(_0x1913db(0x101))/0xa*(-parseInt(_0x1913db(0xd8))/0xb);if(_0x2eb5a7===_0x5428e6)break;else _0x140def['push'](_0x140def['shift']());}catch(_0x398eb4){_0x140def['push'](_0x140def['shift']());}}}(_0x535c,0xcb1a1));const {agentProvider,fixtureManager,matchers,mockManager}=require(_0x127906(0x100)),{nullable,anyContentVersion,anyEtag,anyObjectId,anyUuid,anyISODateTime,anyString}=matchers,assert=require(_0x127906(0x11d)),sinon=require(_0x127906(0xe7)),jobManager=require(_0x127906(0xf2)),models=require(_0x127906(0x10c)),settingsHelpers=require(_0x127906(0x106)),matchEmail={'id':anyObjectId,'uuid':anyUuid,'created_at':anyISODateTime,'updated_at':anyISODateTime,'submitted_at':anyISODateTime},matchEmailNewsletter={...matchEmail,'newsletter_id':anyObjectId},matchBatch={'id':anyObjectId,'provider_id':anyString,'created_at':anyISODateTime,'updated_at':anyISODateTime},matchFailure={'id':anyObjectId,'failed_at':anyISODateTime,'event_id':anyString};describe(_0x127906(0xe0),function(){const _0x4d8010=_0x127906,_0x2cc139={'kzvHS':_0x4d8010(0xf0),'TALuc':_0x4d8010(0xe6),'YhsHD':_0x4d8010(0xea),'czhZF':_0x4d8010(0xe5),'lAnJB':function(_0x2698e1,_0x20a2f0){return _0x2698e1(_0x20a2f0);},'xZQTS':'<p\x20style=\x22margin:\x200\x200\x201.5em\x200;\x20line-height:\x201.6em;\x22>Hey\x20%%{first_name,\x20&quot;there&quot;}%%,\x20Hey\x20%%{first_name}%%,</p><a\x20href=\x22%%{unsubscribe_url}%%\x22>Unsubscribe</a>','PfOpR':_0x4d8010(0xdb),'rfXqO':_0x4d8010(0xf8),'iSgPM':_0x4d8010(0x122),'VBRSS':'all','KzJOK':_0x4d8010(0x112),'kksUW':_0x4d8010(0xe9),'eQxdI':function(_0x46da83,_0x4ad346,_0x1ccf90){return _0x46da83(_0x4ad346,_0x1ccf90);},'KtxJI':_0x4d8010(0x105),'kzqsC':_0x4d8010(0x11c),'uvAEV':function(_0x163e5e,_0x4451dd,_0x1a6344){return _0x163e5e(_0x4451dd,_0x1a6344);},'pepda':'Can\x20browse\x20email\x20batches','tchXX':_0x4d8010(0x11b),'PGbZv':function(_0x1bfe61,_0x3d1a03,_0x1bc515){return _0x1bfe61(_0x3d1a03,_0x1bc515);},'gqlzc':_0x4d8010(0x104),'jHmWS':function(_0x8ce88a,_0x18a5ab,_0x58ea0d){return _0x8ce88a(_0x18a5ab,_0x58ea0d);},'tjzWB':_0x4d8010(0xf9)};let _0x334876;before(async function(){const _0x103fab=_0x4d8010;_0x334876=await agentProvider[_0x103fab(0x10a)](),await fixtureManager['init']('posts',_0x103fab(0x122),_0x2cc139[_0x103fab(0x102)],_0x2cc139[_0x103fab(0x113)]),await _0x334876['loginAsOwner']();}),_0x2cc139[_0x4d8010(0xde)](beforeEach,function(){const _0x49717f=_0x4d8010;mockManager[_0x49717f(0x118)](),mockManager['mockMailgun'](),sinon[_0x49717f(0x10f)](settingsHelpers,_0x49717f(0xf7))[_0x49717f(0xe1)](_0x49717f(0xe8));}),_0x2cc139['lAnJB'](afterEach,function(){const _0x23e64e=_0x4d8010;mockManager[_0x23e64e(0xed)](),sinon[_0x23e64e(0xed)]();}),_0x2cc139[_0x4d8010(0xdd)](it,_0x2cc139[_0x4d8010(0xec)],async function(){const _0x22775f=_0x4d8010;await _0x334876[_0x22775f(0xef)](_0x2cc139['YhsHD'])[_0x22775f(0x10e)](0xc8)[_0x22775f(0x103)]({'emails':new Array(0x2)[_0x22775f(0x121)](matchEmail)})[_0x22775f(0xfa)]({'content-version':anyContentVersion,'etag':anyEtag});}),it(_0x4d8010(0xfd),async function(){const _0xe16fcd=_0x4d8010;await _0x334876['get'](_0xe16fcd(0xf4)+fixtureManager['get'](_0xe16fcd(0xea),0x0)['id']+'/')[_0xe16fcd(0x10e)](0xc8)[_0xe16fcd(0x103)]({'emails':[matchEmail]})[_0xe16fcd(0xfa)]({'content-version':anyContentVersion,'etag':anyEtag});}),_0x2cc139[_0x4d8010(0xdd)](it,_0x2cc139['kzqsC'],async function(){const _0xe404f4=_0x4d8010;await _0x334876['put'](_0xe404f4(0xf4)+fixtureManager['get'](_0xe404f4(0xea),0x1)['id']+_0xe404f4(0x117))['expectStatus'](0xc8)[_0xe404f4(0x103)]({'emails':[matchEmail]})[_0xe404f4(0xfa)]({'content-version':anyContentVersion,'etag':anyEtag}),await jobManager[_0xe404f4(0xeb)](),mockManager[_0xe404f4(0x10b)][_0xe404f4(0xdf)](_0x2cc139[_0xe404f4(0xda)]);}),_0x2cc139[_0x4d8010(0xe2)](it,_0x2cc139[_0x4d8010(0x123)],async function(){const _0x236364=_0x4d8010;await _0x334876[_0x236364(0xef)]('emails/'+fixtureManager['get'](_0x236364(0xea),0x0)['id']+'/batches/')[_0x236364(0x10e)](0xc8)['matchBodySnapshot']({'batches':[matchBatch]})[_0x236364(0xfa)]({'content-version':anyContentVersion,'etag':anyEtag});}),it(_0x4d8010(0xfe),async function(){const _0xd43433=_0x4d8010,{body:_0x22642f}=await _0x334876['get'](_0xd43433(0xf4)+fixtureManager[_0xd43433(0xef)](_0x2cc139['YhsHD'],0x0)['id']+_0xd43433(0xf3))[_0xd43433(0x10e)](0xc8)[_0xd43433(0x103)]({'batches':[matchBatch]})[_0xd43433(0xfa)]({'content-version':anyContentVersion,'etag':anyEtag});assert[_0xd43433(0xdc)](_0x22642f[_0xd43433(0xf5)][0x0]['count'][_0xd43433(0x115)],0x6);}),it('Can\x20browse\x20all\x20email\x20failures',async function(){const _0x5c0c3d=_0x4d8010;await _0x334876[_0x5c0c3d(0xef)](_0x5c0c3d(0xf4)+fixtureManager[_0x5c0c3d(0xef)](_0x5c0c3d(0xea),0x0)['id']+_0x5c0c3d(0x111))[_0x5c0c3d(0x10e)](0xc8)[_0x5c0c3d(0x103)]({'failures':new Array(0x5)[_0x5c0c3d(0x121)](matchFailure)})['matchHeaderSnapshot']({'content-version':anyContentVersion,'etag':anyEtag});}),it(_0x4d8010(0xf6),async function(){const _0x576d57=_0x4d8010;await _0x334876[_0x576d57(0xef)](_0x576d57(0xf4)+fixtureManager['get'](_0x576d57(0xea),0x0)['id']+_0x576d57(0x109))[_0x576d57(0x10e)](0xc8)[_0x576d57(0x103)]({'failures':new Array(0x1)['fill'](matchFailure)})[_0x576d57(0xfa)]({'content-version':anyContentVersion,'etag':anyEtag});}),it(_0x2cc139[_0x4d8010(0x108)],async function(){const _0x5e9223=_0x4d8010;await _0x334876[_0x5e9223(0xef)](_0x5e9223(0xf4)+fixtureManager['get'](_0x5e9223(0xea),0x0)['id']+_0x5e9223(0x11e))[_0x5e9223(0x10e)](0xc8)[_0x5e9223(0x103)]({'failures':new Array(0x4)[_0x5e9223(0x121)](matchFailure)})[_0x5e9223(0xfa)]({'content-version':anyContentVersion,'etag':anyEtag});}),_0x2cc139['PGbZv'](it,_0x2cc139[_0x4d8010(0x119)],async function(){const _0x4bab8a=_0x4d8010;await _0x334876[_0x4bab8a(0xef)](_0x4bab8a(0xf4)+fixtureManager[_0x4bab8a(0xef)](_0x4bab8a(0xea),0x0)['id']+'/recipient-failures/?order=failed_at%20DESC&include=member,email_recipient')['expectStatus'](0xc8)[_0x4bab8a(0x103)]({'failures':new Array(0x5)[_0x4bab8a(0x121)]({...matchFailure,'member':{'id':anyObjectId,'uuid':anyUuid},'email_recipient':{'id':anyObjectId,'member_uuid':anyUuid,'opened_at':nullable(anyISODateTime),'delivered_at':_0x2cc139[_0x4bab8a(0xde)](nullable,anyISODateTime),'failed_at':nullable(anyISODateTime),'processed_at':anyISODateTime,'batch_id':anyObjectId}})})[_0x4bab8a(0xfa)]({'content-version':anyContentVersion,'etag':anyEtag});}),_0x2cc139['jHmWS'](it,_0x2cc139[_0x4d8010(0x10d)],async function(){const _0x2d0c73=_0x4d8010,_0x5d8da3=_0x2cc139['xZQTS'],_0x4b224c=_0x2cc139[_0x2d0c73(0x11f)],_0x6dd4fc=await models['Email']['add']({'post_id':fixtureManager[_0x2d0c73(0xef)](_0x2cc139['rfXqO'],0x2)['id'],'newsletter_id':fixtureManager[_0x2d0c73(0xef)](_0x2cc139['iSgPM'],0x0)['id'],'status':_0x2d0c73(0x124),'submitted_at':new Date(),'track_opens':![],'track_clicks':![],'feedback_enabled':![],'recipient_filter':_0x2cc139[_0x2d0c73(0xd7)],'subject':_0x2cc139[_0x2d0c73(0xf1)],'from':_0x2cc139['kksUW'],'replyTo':null,'email_count':0x1,'source':'{}','source_type':'lexical','html':_0x5d8da3,'plaintext':_0x4b224c}),{body:_0x7d9919}=await _0x334876[_0x2d0c73(0xef)]('emails/'+_0x6dd4fc['id']+'/')[_0x2d0c73(0x10e)](0xc8)['matchBodySnapshot']({'emails':[matchEmailNewsletter]})[_0x2d0c73(0xfa)]({'content-version':anyContentVersion,'etag':anyEtag});assert[_0x2d0c73(0xdc)](_0x7d9919[_0x2d0c73(0xea)][0x0][_0x2d0c73(0x110)][_0x2d0c73(0xfc)](_0x2d0c73(0x116)),![]),assert[_0x2d0c73(0xdc)](_0x7d9919[_0x2d0c73(0xea)][0x0][_0x2d0c73(0x107)]['includes']('%%{'),![]);});});