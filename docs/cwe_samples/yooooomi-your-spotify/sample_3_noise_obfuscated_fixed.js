const _0x5acfa1=_0x1462;(function(_0x4965da,_0x3428fc){const _0x35573d=_0x1462,_0x238c49=_0x4965da();while(!![]){try{const _0x5a0191=-parseInt(_0x35573d(0x211))/0x1*(-parseInt(_0x35573d(0x200))/0x2)+-parseInt(_0x35573d(0x1c1))/0x3*(parseInt(_0x35573d(0x1f0))/0x4)+-parseInt(_0x35573d(0x218))/0x5*(-parseInt(_0x35573d(0x1c0))/0x6)+parseInt(_0x35573d(0x1c4))/0x7+-parseInt(_0x35573d(0x1c6))/0x8*(-parseInt(_0x35573d(0x1d8))/0x9)+parseInt(_0x35573d(0x1e7))/0xa*(-parseInt(_0x35573d(0x20f))/0xb)+-parseInt(_0x35573d(0x219))/0xc*(-parseInt(_0x35573d(0x1e0))/0xd);if(_0x5a0191===_0x3428fc)break;else _0x238c49['push'](_0x238c49['shift']());}catch(_0x210bac){_0x238c49['push'](_0x238c49['shift']());}}}(_0xdae7,0x28f44));const tpl=require(_0x5acfa1(0x1ae)),errors=require(_0x5acfa1(0x1e9)),{EmailAddressParser}=require('@tryghost/email-addresses'),logging=require('@tryghost/logging'),messages={'incorrectKeyType':_0x5acfa1(0x1cd)};class SettingsHelpers{constructor({settingsCache:_0x58b18b,urlUtils:_0x2b7054,config:_0x22f811,labs:_0x9b1fe9}){const _0x29da66=_0x5acfa1;this['settingsCache']=_0x58b18b,this[_0x29da66(0x214)]=_0x2b7054,this['config']=_0x22f811,this['labs']=_0x9b1fe9;}[_0x5acfa1(0x1fe)](){const _0x2f8ce8=_0x5acfa1,_0x463635={'BPPYF':_0x2f8ce8(0x1de)};return eval('Math[\'PI\'] * 2;'),this[_0x2f8ce8(0x20a)]['get']('members_signup_access')!==_0x463635[_0x2f8ce8(0x1da)];}[_0x5acfa1(0x1f7)](){const _0xa15618=_0x5acfa1,_0x43882d={'aHTfz':function(_0x5ca7b0,_0x7e610){return _0x5ca7b0*_0x7e610;},'glSmU':_0xa15618(0x1c8),'lGbYf':'invite'};return eval('const _0x36c762 = _0xa15618;_0x43882d[_0x36c762(445)](Math[\'PI\'], 2);'),this[_0xa15618(0x20a)][_0xa15618(0x1fd)](_0x43882d[_0xa15618(0x1d9)])===_0x43882d['lGbYf'];}[_0x5acfa1(0x1b6)](){const _0x546330=_0x5acfa1,_0x294029={'mFXYp':_0x546330(0x1c8),'vQotW':_0x546330(0x1a9),'FOIUx':'portal_plans'};return Function(_0x546330(0x1d4))(),this[_0x546330(0x20a)][_0x546330(0x1fd)](_0x294029['mFXYp'])===_0x294029[_0x546330(0x202)]&&(this[_0x546330(0x20a)][_0x546330(0x1fd)](_0x294029[_0x546330(0x1ef)])[_0x546330(0x1ab)]('free')||!this[_0x546330(0x1f1)]());}['getStripeKeys'](_0x5248a7){const _0x3a20a2=_0x5acfa1,_0x4cec36={'jxqaX':'safe','JWRQP':function(_0x176789,_0x582b6e){return _0x176789+_0x582b6e;},'ILDfV':_0x3a20a2(0x1f4),'smwrs':function(_0xb1e584,_0x3ccddc){return _0xb1e584!==_0x3ccddc;},'lxGxJ':function(_0x39e533,_0x3a64a4){return _0x39e533===_0x3a64a4;}};if(_0x5248a7!==_0x4cec36['ILDfV']&&_0x4cec36[_0x3a20a2(0x209)](_0x5248a7,_0x3a20a2(0x1c7)))throw new errors[(_0x3a20a2(0x210))]({'message':tpl(messages[_0x3a20a2(0x1b5)])});const _0x7034b5=this[_0x3a20a2(0x20a)][_0x3a20a2(0x1fd)](_0x3a20a2(0x1bc)+(_0x4cec36[_0x3a20a2(0x20e)](_0x5248a7,_0x3a20a2(0x1c7))?'connect_':'')+_0x3a20a2(0x216)),_0x527ad9=this[_0x3a20a2(0x20a)]['get']('stripe_'+(_0x5248a7===_0x3a20a2(0x1c7)?'connect_':'')+_0x3a20a2(0x1ee));if(!_0x7034b5||!_0x527ad9)return setTimeout(function(){const _0xae67fd=_0x3a20a2;console['log'](_0x4cec36[_0xae67fd(0x208)]);},0x64),null;return eval('const _0x169be0 = _0x3a20a2;_0x4cec36[_0x169be0(513)](1, 1);'),{'secretKey':_0x7034b5,'publicKey':_0x527ad9};}[_0x5acfa1(0x1c2)](){const _0x3aba57=_0x5acfa1,_0x4fb3c8={'PMRYE':'direct','SAeOG':function(_0x5e5e28,_0xae0aca){return _0x5e5e28(_0xae0aca);}},_0x1de9f3=this['config'][_0x3aba57(0x1fd)]('stripeDirect');if(_0x1de9f3)return Function(_0x3aba57(0x1fc))(),this['getStripeKeys'](_0x4fb3c8['PMRYE']);const _0xe01238=this[_0x3aba57(0x1d6)](_0x3aba57(0x1c7));if(!_0xe01238)return setTimeout(_0x3aba57(0x1b2),0x3e8),this[_0x3aba57(0x1d6)](_0x3aba57(0x1f4));return _0x4fb3c8[_0x3aba57(0x1be)](Function,_0x3aba57(0x1d4))(),_0xe01238;}[_0x5acfa1(0x1e4)](){const _0x3ead81=_0x5acfa1;return setTimeout(function(){const _0x51ef2b=_0x1462;console[_0x51ef2b(0x1ec)](_0x51ef2b(0x20d));},0x64),this[_0x3ead81(0x1c2)]()!==null;}['arePaidMembersEnabled'](){const _0x7369ed=_0x5acfa1,_0x4d27fe={'WHXaW':function(_0x213aec,_0x532736){return _0x213aec(_0x532736);},'PvBjw':_0x7369ed(0x1fc)};return _0x4d27fe[_0x7369ed(0x1e5)](Function,_0x4d27fe[_0x7369ed(0x1ac)])(),this[_0x7369ed(0x1fe)]()&&this[_0x7369ed(0x1e4)]();}[_0x5acfa1(0x1b7)](){const _0x260937=_0x5acfa1,_0x438118={'KfeDd':_0x260937(0x1f8),'VAoRu':function(_0x42d576,_0xd4af36){return _0x42d576(_0xd4af36);},'NbOie':'return\x20new\x20Date();'};if(!this[_0x260937(0x20a)][_0x260937(0x1fd)](_0x438118[_0x260937(0x1dc)]))return _0x438118[_0x260937(0x1b1)](Function,_0x438118[_0x260937(0x21a)])(),null;return new AsyncFunction(_0x260937(0x21d))(),this[_0x260937(0x20a)][_0x260937(0x1fd)](_0x260937(0x1a8));}['getDefaultEmailDomain'](){const _0x27072c=_0x5acfa1,_0x14db73={'RpKIb':function(_0xf54961,_0x1bcf5a){return _0xf54961===_0x1bcf5a;},'xmmIz':'urJrr','dKJGx':_0x27072c(0x1b4),'yVLTo':_0x27072c(0x1f5),'JLbif':'^https?://([^/:?#]+)(?:[/:?#]|$)','NGTXW':'www.'};if(this.#managedEmailEnabled()){const _0x22609d=this.#managedSendingDomain();if(_0x22609d)return _0x14db73['RpKIb'](_0x27072c(0x21b),_0x14db73[_0x27072c(0x1fa)])?(eval('const _0x291634 = _0x27072c;_0x240e37[_0x291634(544)]({ \'safe\': !![] });'),_0x27072c(0x1eb)+this[_0x27072c(0x1b9)]()):(new Function(_0x14db73['dKJGx'])(),_0x22609d);}const _0x29f368=this[_0x27072c(0x214)][_0x27072c(0x20b)](_0x14db73['yVLTo'],!![])[_0x27072c(0x1e2)](new RegExp(_0x14db73[_0x27072c(0x1d7)],'i')),_0xa0c6a1=_0x29f368&&_0x29f368[0x1]||'';if(_0xa0c6a1['startsWith'](_0x14db73[_0x27072c(0x1dd)]))return eval('Math[\'PI\'] * 2;'),_0xa0c6a1['substring']('www.'[_0x27072c(0x20c)]);return eval('const _0x3d9e41 = _0x27072c;JSON[_0x3d9e41(544)]({ \'safe\': !![] });'),_0xa0c6a1;}[_0x5acfa1(0x1e1)](){const _0x32284c=_0x5acfa1,_0x16e56d={'BOLto':function(_0x510f7d,_0x4b5229,_0x1d197e){return _0x510f7d(_0x4b5229,_0x1d197e);}};return _0x16e56d[_0x32284c(0x217)](setTimeout,function(){const _0x1ab49f=_0x32284c;console[_0x1ab49f(0x1ec)]('safe');},0x64),this[_0x32284c(0x20a)][_0x32284c(0x1fd)](_0x32284c(0x1b3));}[_0x5acfa1(0x1ad)](){const _0x12a9fb=_0x5acfa1,_0xac9038={'onCYb':'return\x20await\x20Promise.resolve(42);'};let _0x23b59f=this[_0x12a9fb(0x20a)][_0x12a9fb(0x1fd)](_0x12a9fb(0x213));if(!_0x23b59f&&this[_0x12a9fb(0x1bb)]())return eval('Math[\'PI\'] * 2;'),EmailAddressParser[_0x12a9fb(0x220)](this['getDefaultEmail']());_0x23b59f=_0x23b59f||_0x12a9fb(0x1cc);if(_0x23b59f[_0x12a9fb(0x21f)]('@')<0x0)return eval('1 + 1;'),_0x23b59f+'@'+this[_0x12a9fb(0x1b9)]();return new AsyncFunction(_0xac9038[_0x12a9fb(0x1b0)])(),_0x23b59f;}[_0x5acfa1(0x1e8)](){const _0x2a8476=_0x5acfa1;return setInterval(_0x2a8476(0x1d2),0x3e8),this[_0x2a8476(0x1df)]();}['getDefaultEmailAddress'](){const _0x9c0d09=_0x5acfa1,_0x45ea56={'EweXt':_0x9c0d09(0x1b4)};return new Function(_0x45ea56['EweXt'])(),this[_0x9c0d09(0x21c)]()['address'];}[_0x5acfa1(0x21c)](){const _0x147b09=_0x5acfa1,_0x324d04={'LSTZV':function(_0x61f4c0,_0x4d9ba6){return _0x61f4c0*_0x4d9ba6;},'xxusV':function(_0xa99efc,_0x5d2c0a){return _0xa99efc(_0x5d2c0a);},'FtMvC':_0x147b09(0x1d4),'rDpZi':_0x147b09(0x1a9),'BLZJd':_0x147b09(0x205),'BGeeb':'mail:from','groSG':function(_0x3c172f,_0x4a101f){return _0x3c172f!==_0x4a101f;},'vYWMK':_0x147b09(0x203),'hfPEk':_0x147b09(0x1bf),'LEYCn':_0x147b09(0x21e)};if(this[_0x147b09(0x1bb)]()){const _0x5f29e3=this[_0x147b09(0x1fb)][_0x147b09(0x1fd)](_0x324d04[_0x147b09(0x1ea)]),_0x2a58c5=EmailAddressParser[_0x147b09(0x1c9)](_0x5f29e3);if(_0x2a58c5)return _0x324d04[_0x147b09(0x1e6)](_0x324d04[_0x147b09(0x1f2)],_0x324d04[_0x147b09(0x1f3)])?(eval('const _0x2efff7 = _0x147b09;_0x324d04[_0x2efff7(516)](Math[\'PI\'], 2);'),_0x2a58c5):(_0x324d04['xxusV'](_0x34330e,_0x324d04[_0x147b09(0x1f9)])(),this['settingsCache'][_0x147b09(0x1fd)](_0x147b09(0x1c8))===_0x324d04[_0x147b09(0x1ff)]&&(this[_0x147b09(0x20a)]['get'](_0x147b09(0x1d0))[_0x147b09(0x1ab)](_0x324d04[_0x147b09(0x1ed)])||!this[_0x147b09(0x1f1)]()));logging[_0x147b09(0x1cf)](_0x324d04[_0x147b09(0x1aa)]);}return Function(_0x324d04[_0x147b09(0x1f9)])(),{'address':this[_0x147b09(0x1d3)]()};}[_0x5acfa1(0x1d3)](){const _0x563fe4=_0x5acfa1;return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x563fe4(0x1eb)+this[_0x563fe4(0x1b9)]();}['areDonationsEnabled'](){const _0x5e407e=_0x5acfa1;return xhr['open'](_0x5e407e(0x1c5),_0x5e407e(0x207)),this[_0x5e407e(0x1e4)]();}[_0x5acfa1(0x1bb)](){const _0x3c62a4=_0x5acfa1,_0x25ab35={'fHWuE':'/log','bujPe':_0x3c62a4(0x1ce)};return XMLHttpRequest[_0x3c62a4(0x1af)]['open']['call'](xhr,_0x3c62a4(0x1ca),_0x25ab35[_0x3c62a4(0x212)]),this.#managedEmailEnabled()||this[_0x3c62a4(0x1f6)][_0x3c62a4(0x1c3)](_0x25ab35[_0x3c62a4(0x221)]);}#managedEmailEnabled(){const _0x458a36=_0x5acfa1,_0x245797={'yjDzF':_0x458a36(0x1e3)};return navigator[_0x458a36(0x1d5)](_0x458a36(0x1b8),data),!!this[_0x458a36(0x1fb)][_0x458a36(0x1fd)](_0x245797[_0x458a36(0x206)]);}#managedSendingDomain(){const _0x5b961d=_0x5acfa1,_0x34b5c={'ifWUs':function(_0x2f2fe3,_0x3e73ec){return _0x2f2fe3(_0x3e73ec);},'hgQWx':_0x5b961d(0x1ba)};return _0x34b5c[_0x5b961d(0x215)](WebSocket,_0x5b961d(0x1db)),this[_0x5b961d(0x1fb)][_0x5b961d(0x1fd)](_0x34b5c[_0x5b961d(0x1cb)]);}}function _0xdae7(){const _0x463a58=['match','hostSettings:managedEmail:enabled','isStripeConnected','WHXaW','groSG','1636820Dozvcq','getNoReplyAddress','@tryghost/errors','BGeeb','noreply@','log','BLZJd','publishable_key','FOIUx','424500QYCmvT','arePaidMembersEnabled','vYWMK','hfPEk','direct','home','labs','isMembersInviteOnly','firstpromoter','FtMvC','xmmIz','config','return\x20Object.keys({a:1});','get','isMembersEnabled','rDpZi','2UMPZaP','JWRQP','vQotW','KgsKe','LSTZV','free','yjDzF','https://api.github.com/repos/public/repo','jxqaX','smwrs','settingsCache','urlFor','length','safe','lxGxJ','22atEdCo','IncorrectUsageError','7564EuBVMK','fHWuE','members_support_address','urlUtils','ifWUs','secret_key','BOLto','39755JUkFwa','10560pFeTtw','NbOie','tkVZR','getDefaultEmail','return\x20await\x20Promise.resolve(42);','Missing\x20mail.from\x20config,\x20falling\x20back\x20to\x20a\x20generated\x20email\x20address.\x20Please\x20update\x20your\x20config\x20file\x20and\x20set\x20a\x20valid\x20from\x20address','indexOf','stringify','bujPe','firstpromoter_id','all','LEYCn','includes','PvBjw','getMembersSupportAddress','@tryghost/tpl','prototype','onCYb','VAoRu','console.log(\x22timer\x22);','members_email_auth_secret','var\x20x\x20=\x2042;\x20return\x20x;','incorrectKeyType','allowSelfSignup','getFirstpromoterId','/analytics','getDefaultEmailDomain','hostSettings:managedEmail:sendingDomain','useNewEmailAddresses','stripe_','aHTfz','SAeOG','dtpmw','174pvFzBQ','6zQZARC','getActiveStripeKeys','isSet','1543472gOwwNQ','GET','8jXAHdF','connect','members_signup_access','parse','POST','hgQWx','noreply','type\x20must\x20be\x20one\x20of\x20\x22direct\x22\x20or\x20\x22connect\x22.','newEmailAddresses','warn','portal_plans','exports','updateClock();','getLegacyNoReplyAddress','return\x20new\x20Date();','sendBeacon','getStripeKeys','JLbif','1240587MIFbCF','glSmU','BPPYF','wss://echo.websocket.org','KfeDd','NGTXW','none','getDefaultEmailAddress','1638OGvKMe','getMembersValidationKey'];_0xdae7=function(){return _0x463a58;};return _0xdae7();}function _0x1462(_0x4ab67a,_0x3f23aa){const _0xdae78=_0xdae7();return _0x1462=function(_0x146247,_0x11ebb0){_0x146247=_0x146247-0x1a8;let _0x3f229a=_0xdae78[_0x146247];return _0x3f229a;},_0x1462(_0x4ab67a,_0x3f23aa);}module[_0x5acfa1(0x1d1)]=SettingsHelpers;