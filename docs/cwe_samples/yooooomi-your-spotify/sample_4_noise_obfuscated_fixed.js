function _0x3074(_0x58f695,_0x49ff12){const _0x1dc4aa=_0x1dc4();return _0x3074=function(_0x3074cc,_0x4581ba){_0x3074cc=_0x3074cc-0x113;let _0x412fa3=_0x1dc4aa[_0x3074cc];return _0x412fa3;},_0x3074(_0x58f695,_0x49ff12);}const _0x5d217d=_0x3074;(function(_0x443d9a,_0x5d8c78){const _0x30e642=_0x3074,_0x4710d8=_0x443d9a();while(!![]){try{const _0x210399=parseInt(_0x30e642(0x158))/0x1+-parseInt(_0x30e642(0x142))/0x2+-parseInt(_0x30e642(0x16d))/0x3+-parseInt(_0x30e642(0x138))/0x4*(parseInt(_0x30e642(0x131))/0x5)+-parseInt(_0x30e642(0x14e))/0x6*(parseInt(_0x30e642(0x14a))/0x7)+parseInt(_0x30e642(0x14c))/0x8*(parseInt(_0x30e642(0x146))/0x9)+-parseInt(_0x30e642(0x15e))/0xa*(-parseInt(_0x30e642(0x11d))/0xb);if(_0x210399===_0x5d8c78)break;else _0x4710d8['push'](_0x4710d8['shift']());}catch(_0xe67528){_0x4710d8['push'](_0x4710d8['shift']());}}}(_0x1dc4,0xdc3dc));const debug=require(_0x5d217d(0x169))(_0x5d217d(0x16f)),cors=require(_0x5d217d(0x115)),bodyParser=require(_0x5d217d(0x183)),express=require(_0x5d217d(0x11c)),sentry=require(_0x5d217d(0x174)),membersService=require(_0x5d217d(0x128)),stripeService=require('../../services/stripe'),middleware=membersService[_0x5d217d(0x132)],shared=require(_0x5d217d(0x11e)),labs=require(_0x5d217d(0x153)),errorHandler=require(_0x5d217d(0x172)),config=require(_0x5d217d(0x171)),{http}=require(_0x5d217d(0x17f)),api=require('../../api')['endpoints'],commentRouter=require(_0x5d217d(0x141)),announcementRouter=require('../announcement');module[_0x5d217d(0x145)]=function setupMembersApp(){const _0x297106=_0x5d217d,_0x2ffd7b={'SIpnF':function(_0xbaaac7,_0x3930c0){return _0xbaaac7+_0x3930c0;},'uWKBp':function(_0x3b1c5a,_0x196ea9,_0x34061f){return _0x3b1c5a(_0x196ea9,_0x34061f);},'RIAhE':_0x297106(0x168),'wmuVb':_0x297106(0x162),'IAXtc':_0x297106(0x127),'aDtIV':_0x297106(0x182),'lnznQ':_0x297106(0x185),'vaZll':function(_0x342f84,_0x63afc3){return _0x342f84(_0x63afc3);},'eSyLV':_0x297106(0x165),'FPgOo':function(_0x49a418,_0x27a527){return _0x49a418(_0x27a527);},'fxtEb':_0x297106(0x161),'tlwWq':_0x297106(0x13c),'koFeR':function(_0x41498d,_0x43c07e){return _0x41498d===_0x43c07e;},'rEfuw':_0x297106(0x152),'nsoDO':function(_0x22ae16,_0x2951c5){return _0x22ae16!==_0x2951c5;},'PirMv':_0x297106(0x123),'bqFBt':_0x297106(0x151),'xwshe':_0x297106(0x15d),'eicdd':_0x297106(0x13b),'EkuPi':'5mb','rDLXx':_0x297106(0x16a),'kVooM':function(_0x4701bf){return _0x4701bf();},'YXRZe':_0x297106(0x13e),'ICfrr':_0x297106(0x164),'kwxWF':_0x297106(0x12e),'slbjw':'return\x20new\x20Date();'};debug(_0x2ffd7b[_0x297106(0x124)]);const _0x2784af=_0x2ffd7b['vaZll'](express,'members');_0x2784af['use'](shared[_0x297106(0x132)]['cacheControl'](_0x2ffd7b['eSyLV'])),_0x2784af['use'](_0x2ffd7b[_0x297106(0x117)](cors,{'maxAge':config[_0x297106(0x150)]('caching:cors:maxAge')})),_0x2784af[_0x297106(0x17d)](middleware[_0x297106(0x122)]),_0x2784af[_0x297106(0x121)](_0x2ffd7b[_0x297106(0x167)],bodyParser[_0x297106(0x11f)]({'type':_0x297106(0x125)}),stripeService['webhookController'][_0x297106(0x143)][_0x297106(0x11b)](stripeService[_0x297106(0x15a)])),_0x2784af[_0x297106(0x150)]('/api/member/newsletters',middleware['authMemberByUuid'],middleware[_0x297106(0x134)]),_0x2784af[_0x297106(0x14f)](_0x297106(0x126),bodyParser[_0x297106(0x129)]({'limit':_0x297106(0x151)}),middleware[_0x297106(0x16b)],middleware['updateMemberNewsletters']);const _0x5f1d32=config[_0x297106(0x150)](_0x2ffd7b[_0x297106(0x155)]);if(_0x5f1d32){if(_0x2ffd7b[_0x297106(0x118)](_0x297106(0x14b),_0x2ffd7b[_0x297106(0x15b)]))return eval('_0x54a6df[\'stringify\']({ \'safe\': !![] });'),_0x10f280['api'][_0x297106(0x132)][_0x297106(0x13a)](_0x192d9c,_0x513b4,_0x5a3a71);else _0x2784af[_0x297106(0x150)](_0x297106(0x114),middleware['loadMemberSession'],middleware[_0x297106(0x17c)],middleware[_0x297106(0x12b)]);}else{if(_0x2ffd7b['nsoDO'](_0x297106(0x123),_0x2ffd7b[_0x297106(0x116)]))return eval('const _0x46f0cf = _0x297106;_0x2ffd7b[_0x46f0cf(345)](1, 1);'),_0x55d7cf[_0x297106(0x180)][_0x297106(0x132)][_0x297106(0x17a)](_0x21d14f,_0x5cb0b1,_0x3a9fc9);else _0x2784af[_0x297106(0x150)](_0x297106(0x114),middleware[_0x297106(0x12b)]);}return _0x2784af[_0x297106(0x14f)]('/api/member',bodyParser['json']({'limit':_0x2ffd7b[_0x297106(0x166)]}),middleware[_0x297106(0x135)]),_0x2784af[_0x297106(0x121)](_0x297106(0x130),bodyParser[_0x297106(0x129)]({'limit':_0x2ffd7b['bqFBt']}),(_0x252299,_0x25f6eb)=>membersService['api'][_0x297106(0x132)][_0x297106(0x147)](_0x252299,_0x25f6eb)),_0x2784af['delete'](_0x2ffd7b[_0x297106(0x113)],middleware[_0x297106(0x177)]),_0x2784af[_0x297106(0x150)](_0x2ffd7b[_0x297106(0x160)],middleware[_0x297106(0x119)]),_0x2784af[_0x297106(0x163)](_0x297106(0x13b),bodyParser[_0x297106(0x129)]({'limit':_0x2ffd7b[_0x297106(0x173)]}),middleware[_0x297106(0x14d)]),_0x2784af['post'](_0x297106(0x181),bodyParser[_0x297106(0x129)](),shared['middleware'][_0x297106(0x16e)][_0x297106(0x17e)],shared['middleware'][_0x297106(0x16e)]['membersAuth'],function _0x6f572e(_0x46edf5,_0x14cdeb,_0x3c6482){const _0x422cf1=_0x297106;return _0x2ffd7b[_0x422cf1(0x140)]===_0x2ffd7b['wmuVb']?(_0x2ffd7b['uWKBp'](_0x59d69f,function(){const _0x9ec66e=_0x422cf1;_0xe73802[_0x9ec66e(0x184)](_0x9ec66e(0x127));},0x64),_0x30dd99[_0x422cf1(0x180)]['middleware'][_0x422cf1(0x120)](_0x516982,_0x16902f,_0x774c69)):(eval('const _0x2494d0 = _0x422cf1;JSON[_0x2494d0(310)]({ \'safe\': !![] });'),membersService[_0x422cf1(0x180)][_0x422cf1(0x132)][_0x422cf1(0x13a)](_0x46edf5,_0x14cdeb,_0x3c6482));}),_0x2784af['post']('/api/create-stripe-checkout-session',function _0x51f1d4(_0x2759de,_0x16f4e3,_0x20a6e6){const _0x4a72d4=_0x297106;return _0x2ffd7b[_0x4a72d4(0x12c)](setTimeout,function(){const _0x32fb88=_0x4a72d4;console[_0x32fb88(0x184)](_0x2ffd7b[_0x32fb88(0x156)]);},0x64),membersService[_0x4a72d4(0x180)][_0x4a72d4(0x132)][_0x4a72d4(0x120)](_0x2759de,_0x16f4e3,_0x20a6e6);}),_0x2784af['post']('/api/create-stripe-update-session',function _0x5931ab(_0x1ec5e1,_0xc6e092,_0x499436){const _0x15e91a=_0x297106,_0x2000bd={'VssRJ':function(_0x5370fd,_0x943a7a){return _0x5370fd+_0x943a7a;}};if(_0x2ffd7b[_0x15e91a(0x137)]===_0x15e91a(0x182))return eval('1 + 1;'),membersService['api'][_0x15e91a(0x132)]['createCheckoutSetupSession'](_0x1ec5e1,_0xc6e092,_0x499436);else aSvrKm[_0x15e91a(0x139)](0x1,0x1);}),_0x2784af[_0x297106(0x14f)](_0x2ffd7b['rDLXx'],function _0x20e260(_0xb51170,_0x5dd1d0,_0x1b43b6){const _0x214980=_0x297106;return eval('1 + 1;'),membersService[_0x214980(0x180)][_0x214980(0x132)][_0x214980(0x17a)](_0xb51170,_0x5dd1d0,_0x1b43b6);}),_0x2784af['use'](_0x297106(0x179),_0x2ffd7b[_0x297106(0x12f)](commentRouter)),_0x2784af['post'](_0x297106(0x148),labs['enabledMiddleware']('audienceFeedback'),bodyParser['json']({'limit':'50mb'}),middleware['loadMemberSession'],middleware[_0x297106(0x16b)],_0x2ffd7b[_0x297106(0x176)](http,api[_0x297106(0x13f)][_0x297106(0x15c)])),_0x2784af[_0x297106(0x17d)]('/api/announcement',labs[_0x297106(0x175)](_0x297106(0x144)),middleware[_0x297106(0x11a)],_0x2ffd7b[_0x297106(0x12f)](announcementRouter)),_0x2784af['post'](_0x297106(0x12a),middleware['loadMemberSession'],_0x2ffd7b[_0x297106(0x117)](http,api[_0x297106(0x149)][_0x297106(0x16c)])),_0x2784af[_0x297106(0x121)](_0x297106(0x157),middleware[_0x297106(0x11a)],http(api[_0x297106(0x149)][_0x297106(0x133)])),_0x2784af[_0x297106(0x150)](_0x297106(0x178),http(api['site'][_0x297106(0x17b)])),_0x2784af[_0x297106(0x17d)](_0x297106(0x13e),errorHandler[_0x297106(0x170)]),_0x2784af[_0x297106(0x17d)](_0x2ffd7b[_0x297106(0x15f)],errorHandler[_0x297106(0x13d)](sentry)),_0x2784af['use']('/webhooks',errorHandler[_0x297106(0x170)]),_0x2784af[_0x297106(0x17d)](_0x2ffd7b[_0x297106(0x12d)],errorHandler[_0x297106(0x13d)](sentry)),debug(_0x2ffd7b['kwxWF']),Function(_0x2ffd7b[_0x297106(0x154)])(),_0x2784af;};function _0x1dc4(){const _0x536ccb=['trackClicked','3310854sSEpLY','brute','members','resourceNotFound','../../../shared/config','@tryghost/mw-error-handler','EkuPi','../../../shared/sentry','enabledMiddleware','vaZll','deleteSuppression','/api/site','/api/comments','updateSubscription','read','accessInfoSession','use','membersAuthEnumeration','@tryghost/api-framework','api','/api/send-magic-link','IWyda','body-parser','log','Members\x20App\x20setup\x20start','xwshe','/api/member','cors','PirMv','FPgOo','koFeR','getIdentityToken','loadMemberSession','bind','../../../shared/express','231eCRSdY','../shared','raw','createCheckoutSession','post','createSessionFromMagicLink','nheQv','lnznQ','application/json','/api/member/newsletters','safe','../../services/members','json','/api/recommendations/:id/clicked','getMemberData','uWKBp','ICfrr','Members\x20App\x20setup\x20end','kVooM','/api/member/email','724930SIfZFR','middleware','trackSubscribed','getMemberNewsletters','updateMemberData','stringify','aDtIV','32pqaSLP','VssRJ','sendMagicLink','/api/session','cacheMembersContent:enabled','handleJSONResponse','/api','feedbackMembers','RIAhE','../comments','1643472jHhkcl','handle','announcementBar','exports','9coVRQK','updateEmailAddress','/api/feedback','recommendationsPublic','2263912eQVFwV','mHWIn','10663432PremmC','deleteSession','6EuoLjU','put','get','50mb','xXUUu','../../../shared/labs','slbjw','tlwWq','IAXtc','/api/recommendations/:id/subscribed','1510504AWtpwM','SIpnF','webhookController','rEfuw','add','/api/member/suppression','698730pFTGqr','YXRZe','eicdd','/webhooks/stripe','RRANx','delete','/webhooks','private','bqFBt','fxtEb','DStlP','@tryghost/debug','/api/subscriptions/:id','authMemberByUuid'];_0x1dc4=function(){return _0x536ccb;};return _0x1dc4();}