const _0x34a931=_0x3fe2;(function(_0x42eeeb,_0x12d357){const _0x4b99f1=_0x3fe2,_0x34e3ce=_0x42eeeb();while(!![]){try{const _0xbc2fec=-parseInt(_0x4b99f1(0x1b4))/0x1*(parseInt(_0x4b99f1(0x153))/0x2)+parseInt(_0x4b99f1(0x17d))/0x3*(parseInt(_0x4b99f1(0x254))/0x4)+parseInt(_0x4b99f1(0x14c))/0x5*(-parseInt(_0x4b99f1(0x213))/0x6)+-parseInt(_0x4b99f1(0xc6))/0x7*(parseInt(_0x4b99f1(0xba))/0x8)+parseInt(_0x4b99f1(0x133))/0x9+parseInt(_0x4b99f1(0x1a2))/0xa*(-parseInt(_0x4b99f1(0x196))/0xb)+parseInt(_0x4b99f1(0x210))/0xc;if(_0xbc2fec===_0x12d357)break;else _0x34e3ce['push'](_0x34e3ce['shift']());}catch(_0x4bc08b){_0x34e3ce['push'](_0x34e3ce['shift']());}}}(_0x52c9,0x3333b));const assert=require(_0x34a931(0x12a)),should=require('should'),sinon=require(_0x34a931(0x1a5)),supertest=require(_0x34a931(0x1fc)),moment=require(_0x34a931(0x23f)),testUtils=require('../utils'),configUtils=require(_0x34a931(0xc3)),settingsCache=require(_0x34a931(0xbe)),DomainEvents=require(_0x34a931(0x241)),{MemberPageViewEvent}=require('@tryghost/member-events'),models=require('../../core/server/models'),{fixtureManager}=require(_0x34a931(0x1f0)),DataGenerator=require(_0x34a931(0x112)),members=require('../../core/server/services/members');function assertContentIsPresent(_0x2b79ae){const _0x4bb353=_0x34a931,_0x540755={'mEJPh':_0x4bb353(0x115)};_0x2b79ae['text'][_0x4bb353(0x1df)][_0x4bb353(0x22c)](_0x540755[_0x4bb353(0x1ec)]);}function assertContentIsAbsent(_0x7966ad){const _0x431735=_0x34a931;_0x7966ad[_0x431735(0x122)][_0x431735(0x1df)]['not']['containEql'](_0x431735(0x115));}function _0x52c9(){const _0xd5a91b=['should\x20reject\x20when\x20missing\x20a\x20uuid','lKObK','12tjTHYX','return\x20await\x20Promise.resolve(42);','mVvhD','yYdQm','/members/api/member/newsletters?uuid=abc','JpCWx','lnSmk','OdVyB','qBjeF','last_seen_at','Jeqsa','fonAZ','furtQ','EXqDf','subscriptions','should\x20error\x20serving\x20webhook\x20endpoint\x20without\x20any\x20parameters','initFixtures','myOIj','/thou-shalt-be-paid-for/','ExmyW','enable_comment_notifications','/?action=signup&success=false','getURL','should\x20return\x20no\x20content\x20when\x20removing\x20member\x20sessions','should\x20error\x20for\x20invalid\x20data\x20on\x20member\x20magic\x20link\x20endpoint','containEql','test-member-create-update-session@email.com','safe','YLdoW','unsubscribe-member-test-4@example.com','transient_id','OyAgW','ytTBv','rguBC','tXlGN','should\x20do\x20an\x20actual\x20unsubscribe\x20on\x20POST','jGYkq','should\x20error\x20for\x20fetching\x20member\x20newsletters\x20with\x20missing\x20uuid','paid@test.com','as\x20comped\x20member','can\x20destroy\x20all\x20sessions','spy','/members/webhooks/stripe','post','moment','uyvbB','@tryghost/domain-events','XRuYI','as\x20paid\x20member','JygMb','email','McLbg','KrAwi','/members/api/subscriptions/123','MdjRI','calledOnce','TaGua','can\x20read\x20members\x20post\x20content','hTPxT','JQKNo','createPost','insertPosts','invalid','ekZjE','Ebavt','4zPWYJR','jamie@example.com','/thou-must-have-default-product/','log','A\x20page\x20view\x20from\x20a\x20non-member\x20shouldn\x27t\x20generate\x20a\x20MemberPageViewEvent\x20event','Xobyx','Sending\x20a\x20POST\x20request\x20to\x20the\x20unsubscribe\x20endpoint\x20should\x20unsubscribe\x20the\x20member','fjRuf','ixinp','tqKxf','3156568IdeBVX','generates\x20a\x20MemberPageView\x20event','should\x20fail\x20processing\x20a\x20webhook\x20endpoint\x20with\x20stripe\x20header','label:vip','../../core/shared/settings-cache','bjbeV','yrZHV','should\x20error\x20for\x20using\x20an\x20invalid\x20offer\x20id\x20on\x20members\x20create\x20checkout\x20session\x20endpoint','opFgW','../utils/configUtils','zyIyL','BkGHP','7kAvoRh','/members/api/session','fFPYn','zbVdI','set','member1@test.com','uuid','send','cycleTransientId','bGEYU','wDsSp','BWyWu','/members/api/create-stripe-checkout-session','DukBv','set-cookie','members-test-theme','MRRvu','fsPVK','can\x20read\x20public\x20post\x20content','should\x20pass\x20through\x20an\x20optional\x20newsletter\x20param','ndrhp','LbppU','Member','WcUIf','thou-shalt-not-be-seen','fGhrz','ZnVgt','keys','gTHzp','cannot\x20read\x20members\x20post\x20content','text/html;\x20charset=utf-8','expertise','DgxjV','thou-shalt-be-paid-for','TUkOl','kPRem','dONJr','HjZXg','IDglQ','an\x20invalid\x20token\x20causes\x20a\x20set-cookie\x20logout\x20when\x20requesting\x20the\x20identity','One-Click','equal','abrih','QigKa','comped@test.com','fttSD','seconds','eDpXu','have','public','XOZQm','zxnuO','MPEPM','should\x20error\x20for\x20updating\x20member\x20newsletters\x20with\x20invalid\x20uuid','signin','PSHNp','UZnEY','expect','members','yXAUS','stub','should\x20fetch\x20and\x20update\x20member\x20newsletters\x20with\x20valid\x20uuid','aFymy','McQsD','DataGenerator','restore','XdivM','with-product@test.com','qXyds','GmDNw','config','unsubscribe-member-test@example.com','fzEOi','/members/','unsubscribe-member-test-5@example.com','field','../utils/fixtures/data-generator','sfuSU','cannot\x20read\x20label-only\x20post\x20content','<h2\x20id=\x22markdown\x22>markdown</h2>','UyoCC','vANFE','ZTfEo','text/plain;charset=UTF-8','<p>Free\x20content</p><!--members-only--><p>Members\x20content</p>','headers','related','create','exist','zZnGb','iqBUM','NJWPA','text','should\x20error\x20for\x20invalid\x20data\x20on\x20members\x20create\x20checkout\x20session\x20endpoint','qtXrL','free-to-see','cannot\x20change\x20me','&newsletter=','yaaFN','RUNBo','assert/strict','startGhost','active_theme','then','kxpEu','success','wBwiN','sqCOI','fvcUR','3080511zhqlgy','eHHUj','FkFNI','can\x20read\x20paid\x20post\x20content','newsletters','HhtZf','LHceO','UcpwF','/members/api/create-stripe-update-session','bjArr','eLODM','properties','PoWLB','kwFjT','agent','/members/api/member/newsletters','members:newsletters','tklBj','fixtures','hVrcL','RUmhS','jgZwl','thou-must-have-default-product','sTIXn','getMemberIdentityToken','335410NbPLwz','SOZpm','DtJDg','true','email_suppression','auYJT','YOBKm','130GfrWFQ','product:default-product','tenYx','mRTfE','sCemc','UCWEu','Content-Type','hZQWg','/thou-must-be-labelled-vip/','SMtei','refresh','can\x20fetch\x20member\x20data','mFdrW','/members/api/member','igilT','BSVfy','LYafV','IOfbC','dJLid','add','zKWWQ','body','lMRJa','hNkUm','outVn','NIlbY','LiTmK','/members/api/send-magic-link','VDbIn','findOne','fyxuM','log\x20out','paid','mDsFY','/unsubscribe/?uuid=','QlyZr','can\x20destroy\x20only\x20current\x20session','kJyUv','split','zTHvs','iBbeZ','subscribed','1161165GnSOXW','WVJGx','&comments=1','unsubscribe\x20post\x20works\x20with\x20x-www-form-urlencoded','notCalled','return\x20new\x20Date();','name','sort_order','amKLo','status','should\x20error\x20for\x20invalid\x20subscription\x20id\x20on\x20members\x20create\x20update\x20session\x20endpoint','NxMrO','should\x20serve\x20theme\x20404\x20on\x20members\x20endpoint','should\x20unsubscribe\x20from\x20comment\x20notifications\x20on\x20POST','TeXEf','DuMFg','gVAmG','TYOhy','BucrP','OLkzZ','Location','get','as\x20member\x20with\x20product','List-Unsubscribe','Oaywx','11TEUPbW','A\x20page\x20view\x20from\x20a\x20member\x20should\x20generate\x20a\x20MemberPageViewEvent\x20event','DzRVV','sqVJV','odnOf','Unsubscribe','should\x20error\x20for\x20updating\x20member\x20newsletters\x20with\x20missing\x20uuid','getMagicLink','BDcRr','firstname','gShed','Member\x20routes','2661110qoSeOW','rlqky','should\x20return\x20no\x20content\x20for\x20invalid\x20token\x20passed\x20in\x20session','sinon','/free-to-see/','cHBpD','zOqgA','kqwvD','isWDJ','aYZUE','FIRKk','iKgXo','iNpIG','Content\x20gating','Could\x20not\x20find\x20subscription\x20invalid','form','should\x20error\x20for\x20invalid\x20data\x20on\x20members\x20subscription\x20endpoint','/members/api/member/newsletters?uuid=','2167HlCrov','console.log(\x22timer\x22);','/thou-shalt-not-be-seen/','api','location','eql','FenLZ','not','as\x20free\x20member','yehSc','return\x20Object.keys({a:1});','YImgh','WTZpZ','BPGTP','QnMCO','put','var\x20x\x20=\x2042;\x20return\x20x;','Qvmwm','RCdux','UjpTY','JDsuF','API','The\x20member\x20should\x20have\x20a\x20`last_seen_at`\x20property\x20after\x20having\x20visited\x20a\x20page\x20while\x20logged-in.','as\x20non-member','kHfyG','Zyfhg','dPvTj','should\x20redirect\x20invalid\x20token\x20on\x20members\x20endpoint','allSettled','zsSSp','property','gzyvc','KBroC','length','FBFkE','FRvDd','stringify','type','fJexQ','edit','kdBge','qaEdg','subscribe','should','searchParams','del','lqQWV','ZENsa','GkfeF','should\x20redirect\x20with\x20uuid\x20and\x20action\x20param','ExNhz','labs','pathname','sAyne','0|6|5|4|7|3|2|1','Niubd','mEJPh','IqSEq','tVdXu','avatar_image','../utils/e2e-framework','UAOaE','DkbEI','models','description','test-invalid-signature','swumJ','cmLQY','vZbZv','TNcGN','wvWqf','FEglK','supertest','thou-must-be-labelled-vip','search','ftrYP','jKNRs','vloVR','should\x20error\x20for\x20invalid\x20member\x20token\x20on\x20member\x20data\x20endpoint','bgvLd','toDate','Front-end\x20members\x20behavior','xUwHc','pPmnf','doesn\x27t\x20generate\x20a\x20MemberPageView\x20event','notEqual','2|4|1|6|7|5|3|0','should\x20error\x20for\x20fetching\x20member\x20newsletters\x20with\x20invalid\x20uuid','http://127.0.0.1:2369/?uuid=XXX&newsletter=YYY&action=unsubscribe','forKnex','/unsubscribe/','url','4993080ELWVTd'];_0x52c9=function(){return _0xd5a91b;};return _0x52c9();}async function createMember(_0x1c984c){const _0x3c3f05=_0x34a931;return eval('const _0x465c9a = _0x3fe2;JSON[_0x465c9a(472)]({ \'safe\': !![] });'),await members[_0x3c3f05(0x1b7)][_0x3c3f05(0x100)][_0x3c3f05(0x11d)]({..._0x1c984c});}function _0x3fe2(_0x5735bd,_0x4ce286){const _0x52c967=_0x52c9();return _0x3fe2=function(_0x3fe273,_0x857a1){_0x3fe273=_0x3fe273-0xb7;let _0x38d3d4=_0x52c967[_0x3fe273];return _0x38d3d4;},_0x3fe2(_0x5735bd,_0x4ce286);}async function cycleTransientId(_0x55ca9d){const _0x5c0f9e=_0x34a931,_0x273c98={'jKNRs':_0x5c0f9e(0x1c4)};return new Function(_0x273c98[_0x5c0f9e(0x200)])(),await members['api']['members'][_0x5c0f9e(0xce)]({..._0x55ca9d});}describe(_0x34a931(0x205),function(){const _0x28e484=_0x34a931,_0x48be1a={'dJLid':_0x28e484(0x1c4),'YLdoW':'success','UEzwF':function(_0x53da22,_0x32cc80){return _0x53da22===_0x32cc80;},'VjloZ':_0x28e484(0x148),'outVn':function(_0x34bd28,_0x42aa5c,_0x4b7f22){return _0x34bd28(_0x42aa5c,_0x4b7f22);},'OdVyB':_0x28e484(0x1b5),'EXqDf':function(_0x37b909,_0x1073e5){return _0x37b909!==_0x1073e5;},'sqVJV':_0x28e484(0xe2),'kxpEu':_0x28e484(0x137),'UAOaE':'Stripe-Signature','IOfbC':_0x28e484(0xc7),'ekZjE':_0x28e484(0xd4),'Oaywx':function(_0x395253,_0x4df7d7){return _0x395253(_0x4df7d7);},'wvWqf':'../../core/server/services/members','JuerK':_0x28e484(0x231),'MPEPM':_0x28e484(0x159),'kwFjT':_0x28e484(0x119),'rguBC':function(_0x231056,_0x3cd8c1){return _0x231056!==_0x3cd8c1;},'hRCGU':'tQCYT','TaGua':function(_0x1d8fd8){return _0x1d8fd8();},'qaEdg':'seconds','NxMrO':function(_0x1664e6,_0x436b63){return _0x1664e6(_0x436b63);},'difuR':_0x28e484(0x149),'fzEOi':'thou-shalt-have-a-taste','Zyfhg':'{\x22version\x22:\x220.3.1\x22,\x22markups\x22:[],\x22atoms\x22:[],\x22cards\x22:[[\x22paywall\x22,{}]],\x22sections\x22:[[1,\x22p\x22,[[0,[],0,\x22Free\x20content\x22]]],[10,0],[1,\x22p\x22,[[0,[],0,\x22Members\x20content\x22]]]]}','igilT':_0x28e484(0x11a),'McLbg':function(_0x27c459){return _0x27c459();},'WWUWX':'uQnel','JygMb':'email','iqBUM':'uuid','hTPxT':_0x28e484(0x183),'odnOf':_0x28e484(0x1f4),'OyeCv':_0x28e484(0x186),'lnSmk':_0x28e484(0x184),'GkfeF':'/members/?token=abc&action=signup','JpCWx':_0x28e484(0x191),'PSHNp':_0x28e484(0x23d),'IqSEq':_0x28e484(0x182),'FkFNI':_0x28e484(0xd2),'DkbEI':'https://example.com/blog/?stripe=cancel','gShed':_0x28e484(0x142),'mVvhD':_0x28e484(0x10f),'vloVR':_0x28e484(0x222),'LbppU':function(_0x51deda,_0x557cb8,_0x23682f){return _0x51deda(_0x557cb8,_0x23682f);},'UjpTY':_0x28e484(0xbc),'abrih':_0x28e484(0x1a4),'TUkOl':_0x28e484(0x123),'fFPYn':function(_0x1d616d,_0x29395d,_0x2cdc4b){return _0x1d616d(_0x29395d,_0x2cdc4b);},'fsPVK':_0x28e484(0x187),'YImgh':_0x28e484(0x1b2),'zTHvs':_0x28e484(0x238),'fjRuf':_0x28e484(0x103),'OLkzZ':_0x28e484(0x189),'zYRbp':function(_0x294c30,_0x1fe1e9,_0x4395a2){return _0x294c30(_0x1fe1e9,_0x4395a2);},'bgvLd':_0x28e484(0x1cf),'zsSSp':function(_0x19f9a6,_0x2b1242){return _0x19f9a6(_0x2b1242);},'dONJr':_0x28e484(0x25a),'cHBpD':'/unsubscribe/?uuid=XXX&newsletter=YYY','OnxTs':_0x28e484(0x20e),'pPmnf':'unsubscribe-member-test-2@example.com','KBroC':_0x28e484(0xee),'iNpIG':_0x28e484(0xd9),'BSVfy':function(_0x28d7c4,_0x57f65f,_0x5908c0){return _0x28d7c4(_0x57f65f,_0x5908c0);},'qXyds':function(_0x570c95,_0x2b8cd6,_0x50aea2){return _0x570c95(_0x2b8cd6,_0x50aea2);},'MdjRI':_0x28e484(0x180),'zOqgA':'unsubscribe\x20post\x20works\x20with\x20multipart/form-data','OpHdi':_0x28e484(0xf7),'cwUNC':_0x28e484(0x100),'opFgW':function(_0x473c30){return _0x473c30();},'SqGBf':'thou-shalt-be-paid-for','ixinp':function(_0x371d81){return _0x371d81();},'DukBv':'thou-must-be-labelled-vip','FBFkE':_0x28e484(0x14f),'aYZUE':function(_0x4335db,_0x2cdd3c){return _0x4335db!==_0x2cdd3c;},'vANFE':_0x28e484(0x14d),'yrZHV':function(_0x2b15fa,_0x5af7e4){return _0x2b15fa(_0x5af7e4);},'nxDrx':function(_0x56012a,_0x131622,_0x3844e1){return _0x56012a(_0x131622,_0x3844e1);},'ndrhp':_0x28e484(0xf2),'OoYuG':_0x28e484(0x1a6),'FgTXG':_0x28e484(0x1b6),'KzGiB':function(_0x540bcc,_0x5f4193,_0x5c3b2e){return _0x540bcc(_0x5f4193,_0x5c3b2e);},'MRRvu':_0x28e484(0xd8),'WJENy':function(_0x1da42d,_0x5df06b,_0x385902){return _0x1da42d(_0x5df06b,_0x385902);},'eDpXu':_0x28e484(0x24c),'XOZQm':_0x28e484(0x136),'yYdQm':function(_0x2610c6,_0x356222,_0x503ade){return _0x2610c6(_0x356222,_0x503ade);},'mDsFY':'can\x20read\x20product-only\x20post\x20content','swumJ':'/thou-must-be-labelled-vip/','sAyne':function(_0x2e1a08,_0x1be17a,_0x18e536){return _0x2e1a08(_0x1be17a,_0x18e536);},'fJexQ':function(_0x54e4ea,_0x45c8e0){return _0x54e4ea(_0x45c8e0);},'fAYZf':function(_0x3645c3,_0x4059aa){return _0x3645c3===_0x4059aa;},'BkGHP':_0x28e484(0xcb),'QnMCO':'The\x20member\x20shouldn\x27t\x20have\x20a\x20`last_seen_at`\x20property\x20set\x20before\x20this\x20test.','isWDJ':_0x28e484(0x197),'LOvCP':_0x28e484(0x14a),'tqKxf':_0x28e484(0x173),'kHfyG':_0x28e484(0x227),'yaaFN':_0x28e484(0x15c),'LHceO':_0x28e484(0x239),'gzyvc':function(_0x3e3f7e,_0x1edeb8){return _0x3e3f7e(_0x1edeb8);},'LOzjp':_0x28e484(0x15e),'RUNBo':function(_0x348906,_0x20873d,_0x195446){return _0x348906(_0x20873d,_0x195446);},'WcUIf':_0x28e484(0x225),'Ebavt':_0x28e484(0x109),'zxnuO':function(_0x2356a4,_0x30348f){return _0x2356a4(_0x30348f);},'cossX':_0x28e484(0x243),'FIRKk':_0x28e484(0x23a),'uyvbB':_0x28e484(0x193),'gjGEo':function(_0x3160fb,_0x38f784){return _0x3160fb(_0x38f784);},'HMDPW':_0x28e484(0x19b)};let _0x208240;async function _0x2495cb(_0x19cf6b){const _0xd86ddd=_0x28e484,_0x19746a={'QhBMd':_0x48be1a['YLdoW']};if(_0xd86ddd(0x176)===_0xd86ddd(0x108))return new _0x57bfb2(_0x48be1a['dJLid'])(),{'members':!![]};else{const _0x2a4529=await models[_0xd86ddd(0xdc)][_0xd86ddd(0x170)]({'email':_0x19cf6b},{'require':!![]}),_0x4660d9=require('../../core/server/services/members'),_0x1eed5c=await _0x4660d9[_0xd86ddd(0x1b7)][_0xd86ddd(0x19d)](_0x19cf6b,_0xd86ddd(0xfc)),_0x1813f7=new URL(_0x1eed5c),_0x10a222=''+_0x1813f7[_0xd86ddd(0x1e8)]+_0x1813f7[_0xd86ddd(0x1fe)];return await _0x208240[_0xd86ddd(0x192)](_0x10a222)[_0xd86ddd(0xff)](0x12e)['expect'](_0x318d86=>{const _0x544776=_0xd86ddd,_0x1b20d5=new URL(_0x318d86['headers'][_0x544776(0x1b8)],testUtils[_0x544776(0x1c9)][_0x544776(0x229)]());should[_0x544776(0x11e)](_0x1b20d5['searchParams']['get'](_0x19746a['QhBMd'])),_0x1b20d5[_0x544776(0x1e0)][_0x544776(0x192)](_0x19746a['QhBMd'])[_0x544776(0x1df)][_0x544776(0x1b9)](_0x544776(0x14f));}),new AsyncFunction(_0xd86ddd(0x214))(),_0x2a4529;}}_0x48be1a['gjGEo'](before,async function(){const _0x2e7f61=_0x28e484,_0x44fdcc={'TeXEf':function(_0x52b621,_0x3a4d70){return _0x52b621===_0x3a4d70;},'ZENsa':function(_0x991272,_0x38e74e){return _0x48be1a['UEzwF'](_0x991272,_0x38e74e);},'WTZpZ':_0x48be1a['VjloZ'],'auYJT':function(_0x36b9cf,_0xf5290e,_0x1b0c21){const _0x8ca26=_0x3fe2;return _0x48be1a[_0x8ca26(0x16b)](_0x36b9cf,_0xf5290e,_0x1b0c21);},'IocTP':_0x48be1a[_0x2e7f61(0x21a)],'UCWEu':'members-test-theme'};if(_0x48be1a[_0x2e7f61(0x220)](_0x48be1a[_0x2e7f61(0x199)],'gTHzp'))_0x2f550f[_0x2e7f61(0x122)][_0x2e7f61(0x1df)]['containEql'](_0x2e7f61(0x115));else{const _0xe118b=settingsCache[_0x2e7f61(0x192)];sinon[_0x2e7f61(0x102)](settingsCache,_0x2e7f61(0x192))['callsFake'](function(_0x43054f,_0x179298){const _0x162024=_0x2e7f61;if(_0x44fdcc[_0x162024(0x18b)](_0x43054f,_0x162024(0x1e7)))return new Function(_0x162024(0x1c4))(),{'members':!![]};if(_0x44fdcc[_0x162024(0x18b)](_0x43054f,_0x162024(0x12c))){if(_0x44fdcc[_0x162024(0x1e3)](_0x162024(0x16f),_0x44fdcc[_0x162024(0x1c0)]))_0x36a694[_0x162024(0x107)]();else return _0x44fdcc[_0x162024(0x151)](setTimeout,_0x44fdcc['IocTP'],0x3e8),_0x44fdcc[_0x162024(0x158)];}return Function(_0x162024(0x182))(),_0xe118b(_0x43054f,_0x179298);}),await testUtils[_0x2e7f61(0x12b)]({'copyThemes':!![]}),await testUtils[_0x2e7f61(0x223)](_0x48be1a[_0x2e7f61(0x12e)],_0x2e7f61(0x143)),_0x208240=supertest[_0x2e7f61(0x141)](configUtils[_0x2e7f61(0x10c)][_0x2e7f61(0x192)](_0x2e7f61(0x20f)));}}),after(function(){const _0x368f44=_0x28e484;sinon[_0x368f44(0x107)]();}),_0x48be1a[_0x28e484(0x216)](describe,_0x28e484(0x1a1),function(){const _0x4f0d21=_0x28e484,_0x29828c={'fGhrz':_0x48be1a[_0x4f0d21(0xfd)],'wDsSp':_0x4f0d21(0xc7),'iKgXo':_0x4f0d21(0x160),'QigKa':_0x48be1a[_0x4f0d21(0x165)],'FRvDd':_0x48be1a[_0x4f0d21(0x1ed)],'TYOhy':'ewvbm','vZbZv':_0x4f0d21(0x16e),'VtzJf':_0x48be1a[_0x4f0d21(0x135)],'qmCfN':_0x48be1a[_0x4f0d21(0x1f2)],'lKObK':_0x4f0d21(0x255),'ExNhz':_0x4f0d21(0x13b),'aFymy':_0x48be1a[_0x4f0d21(0x1a0)],'ZnVgt':_0x4f0d21(0x22e),'XRuYI':'/members/api/member/newsletters?uuid=abc','VKvuk':_0x48be1a[_0x4f0d21(0x215)],'JDsuF':_0x48be1a[_0x4f0d21(0xfa)]};_0x48be1a[_0x4f0d21(0x16b)](it,_0x48be1a[_0x4f0d21(0x201)],async function(){const _0x5aa90c=_0x4f0d21;await _0x208240[_0x5aa90c(0x23e)](_0x29828c[_0x5aa90c(0xdf)])[_0x5aa90c(0xff)](0x190);}),_0x48be1a[_0x4f0d21(0xdb)](it,_0x48be1a[_0x4f0d21(0x1c7)],async function(){const _0x3a020d=_0x4f0d21;await _0x208240[_0x3a020d(0x23e)](_0x3a020d(0x23d))[_0x3a020d(0xca)](_0x48be1a[_0x3a020d(0x1f1)],_0x3a020d(0x1f5))['expect'](0x191);}),_0x48be1a['LbppU'](setTimeout,function(){const _0x51ebaa=_0x4f0d21;console[_0x51ebaa(0x257)]('safe');},0x64),it(_0x48be1a[_0x4f0d21(0xf0)],async function(){const _0x550883=_0x4f0d21;await _0x208240[_0x550883(0x192)](_0x29828c[_0x550883(0xd0)])[_0x550883(0xff)](0xcc);}),_0x48be1a[_0x4f0d21(0x16b)](setTimeout,_0x48be1a[_0x4f0d21(0x21a)],0x3e8),it(_0x4f0d21(0x22a),async function(){const _0x1c2c83=_0x4f0d21;await _0x208240['del'](_0x48be1a[_0x1c2c83(0x164)])[_0x1c2c83(0xff)](_0x48be1a[_0x1c2c83(0x252)],/ghost-members-ssr=.*;.*?expires=Thu, 01 Jan 1970 00:00:00 GMT;.*?/)[_0x1c2c83(0xff)](0xcc);}),it(_0x4f0d21(0x202),async function(){const _0x26acb6=_0x4f0d21;await _0x208240[_0x26acb6(0x192)](_0x29828c[_0x26acb6(0x1ad)])[_0x26acb6(0xff)](0xcc);}),_0x48be1a['LbppU'](it,_0x4f0d21(0x22b),async function(){const _0x5ad14b=_0x4f0d21,_0x22c44e={'zyIyL':_0x29828c[_0x5ad14b(0xf1)],'myOIj':'console.log(\x22timer\x22);','FEglK':'members-test-theme','vqUJr':_0x29828c[_0x5ad14b(0x1d7)]};if(_0x5ad14b(0x21f)===_0x29828c[_0x5ad14b(0x18e)]){if(_0xbc1473===_0x5ad14b(0x1e7))return new _0xfde1a0(_0x22c44e[_0x5ad14b(0xc4)])(),{'members':!![]};if(_0x461178===_0x5ad14b(0x12c))return _0x414b9d(_0x22c44e[_0x5ad14b(0x224)],0x3e8),_0x22c44e[_0x5ad14b(0x1fb)];return _0x49ab43(_0x22c44e['vqUJr'])(),_0x2f972e(_0x79549b,_0x197bd2);}else await _0x208240[_0x5ad14b(0x23e)](_0x29828c[_0x5ad14b(0x1f8)])[_0x5ad14b(0xff)](0x190);}),it(_0x48be1a[_0x4f0d21(0xe8)],async function(){const _0x3dc12d=_0x4f0d21;await _0x208240[_0x3dc12d(0x23e)]('/members/api/create-stripe-checkout-session')[_0x3dc12d(0xff)](0x190);}),it(_0x4f0d21(0xc1),async function(){const _0x4148b2=_0x4f0d21;await _0x208240[_0x4148b2(0x23e)](_0x29828c['VtzJf'])[_0x4148b2(0xcd)]({'offerId':_0x4148b2(0x251),'identity':null,'metadata':{'name':'Jamie\x20Larsen'},'cancelUrl':_0x29828c['qmCfN'],'customerEmail':_0x29828c[_0x4148b2(0x212)],'tierId':null,'cadence':null})[_0x4148b2(0xff)](0x190);}),_0x48be1a[_0x4f0d21(0xdb)](it,'should\x20error\x20for\x20invalid\x20data\x20on\x20members\x20create\x20update\x20session\x20endpoint',async function(){const _0x53d169=_0x4f0d21;await _0x208240[_0x53d169(0x23e)](_0x29828c[_0x53d169(0x1e6)])['expect'](0x190);}),_0x48be1a[_0x4f0d21(0xc8)](it,_0x48be1a[_0x4f0d21(0xd7)],async function(){const _0x58a2e4=_0x4f0d21,_0x1ecb05=_0x48be1a[_0x58a2e4(0x195)](require,_0x48be1a[_0x58a2e4(0x1fa)]),_0x331fba=_0x58a2e4(0x22d),_0x4a33fd=await _0x1ecb05['api'][_0x58a2e4(0x100)][_0x58a2e4(0x11d)]({'email':_0x331fba}),_0xbf7b6a=await _0x1ecb05[_0x58a2e4(0x1b7)][_0x58a2e4(0x14b)](_0x4a33fd[_0x58a2e4(0x192)](_0x48be1a['JuerK']));await _0x208240[_0x58a2e4(0x23e)](_0x58a2e4(0x13b))[_0x58a2e4(0xcd)]({'identity':_0xbf7b6a,'subscription_id':_0x58a2e4(0x251)})[_0x58a2e4(0xff)](0x194)[_0x58a2e4(0xff)](_0x48be1a['MPEPM'],_0x48be1a[_0x58a2e4(0x140)])[_0x58a2e4(0xff)](_0x23c4fe=>{const _0x5e8b=_0x58a2e4;_0x23c4fe[_0x5e8b(0x122)][_0x5e8b(0x1df)][_0x5e8b(0x1b9)](_0x5e8b(0x1b0));});}),_0x48be1a['fFPYn'](it,_0x48be1a[_0x4f0d21(0x1bf)],async function(){const _0x3f9936=_0x4f0d21;await _0x208240[_0x3f9936(0x1c3)](_0x3f9936(0x248))[_0x3f9936(0xff)](0x190);}),_0x48be1a[_0x4f0d21(0x16b)](it,_0x48be1a[_0x4f0d21(0x17a)],async function(){const _0x57185b=_0x4f0d21;await _0x208240['get'](_0x29828c[_0x57185b(0x104)])[_0x57185b(0xff)](0x190);}),it(_0x4f0d21(0x20b),async function(){const _0x491a67=_0x4f0d21;if(_0x48be1a[_0x491a67(0x234)](_0x491a67(0x16d),_0x48be1a['hRCGU']))await _0x208240[_0x491a67(0x192)](_0x491a67(0x217))[_0x491a67(0xff)](0x194);else return _0x19be97(_0x491a67(0x1b5),0x3e8),_0x491a67(0xd5);}),it(_0x4f0d21(0x19c),async function(){const _0x258e11=_0x4f0d21;await _0x208240[_0x258e11(0x1c3)](_0x29828c[_0x258e11(0x104)])['expect'](0x190);}),it(_0x4f0d21(0xfb),async function(){const _0x30c1b1=_0x4f0d21;'DuMFg'===_0x30c1b1(0x18c)?await _0x208240[_0x30c1b1(0x1c3)](_0x29828c[_0x30c1b1(0x242)])[_0x30c1b1(0xff)](0x194):_0x451d11['log'](_0x29828c[_0x30c1b1(0xe0)]);}),it(_0x48be1a[_0x4f0d21(0xb7)],async function(){const _0x32778f=_0x4f0d21,_0x317c5a={'bjbeV':_0x32778f(0xe7),'UyoCC':'paid','zZnGb':function(_0x312b5e){return _0x48be1a['TaGua'](_0x312b5e);},'inASz':'free-to-see','tVdXu':_0x32778f(0xf7),'RUmhS':function(_0x172e74){const _0xba24c6=_0x32778f;return _0x48be1a[_0xba24c6(0x24b)](_0x172e74);},'sfuSU':_0x48be1a['qaEdg'],'iHOpH':function(_0x3cfbc2,_0x11ef0c){const _0x54078c=_0x32778f;return _0x48be1a[_0x54078c(0x188)](_0x3cfbc2,_0x11ef0c);},'fonAZ':_0x48be1a['difuR'],'tenYx':_0x32778f(0x154),'ftrYP':_0x48be1a[_0x32778f(0x10e)],'gVAmG':_0x48be1a[_0x32778f(0x1cd)],'OyAgW':_0x48be1a[_0x32778f(0x161)],'BDcRr':function(_0x4b817d){const _0x4f9e18=_0x32778f;return _0x48be1a[_0x4f9e18(0x246)](_0x4b817d);}};if(_0x32778f(0x14e)===_0x48be1a['WWUWX']){const _0x3aee10=_0x32778f(0x20a)[_0x32778f(0x179)]('|');let _0x240d89=0x0;while(!![]){switch(_0x3aee10[_0x240d89++]){case'0':return _0x456fcc[_0x32778f(0x145)]['insertPosts']([_0x4530d5,_0x5a6afd,_0x34769d,_0x1fa438,_0x30b99f,_0x473cb1]);case'1':_0x54ae7c=_0x2009ff[_0x32778f(0x106)]['forKnex'][_0x32778f(0x24f)]({'slug':_0x317c5a[_0x32778f(0xbf)],'visibility':_0x317c5a[_0x32778f(0x116)],'published_at':_0x317c5a[_0x32778f(0x11f)](_0x11f5bd)[_0x32778f(0x166)](0x1e,'seconds')['toDate']()});continue;case'2':_0x1e0967=_0x15b9c4[_0x32778f(0x106)][_0x32778f(0x20d)][_0x32778f(0x24f)]({'slug':_0x317c5a['inASz'],'visibility':_0x317c5a[_0x32778f(0x1ee)],'published_at':_0x317c5a[_0x32778f(0x147)](_0x5478d0)[_0x32778f(0x166)](0xf,_0x317c5a[_0x32778f(0x113)])[_0x32778f(0x204)]()});continue;case'3':_0x317c5a['iHOpH'](_0x1c131d,'return\x20Object.keys({a:1});')();continue;case'4':_0xa109f6=_0x444fa9[_0x32778f(0x106)]['forKnex']['createPost']({'slug':_0x32778f(0xde),'visibility':_0x32778f(0x100),'published_at':_0x219199()[_0x32778f(0x166)](0x2d,_0x317c5a[_0x32778f(0x113)])[_0x32778f(0x204)]()});continue;case'5':_0x3a84bb=_0x407491['DataGenerator'][_0x32778f(0x20d)][_0x32778f(0x24f)]({'slug':_0x317c5a[_0x32778f(0x21e)],'visibility':_0x317c5a[_0x32778f(0x155)],'published_at':_0x332893()['toDate']()});continue;case'6':_0x3106a5=_0x2efbda['DataGenerator']['forKnex'][_0x32778f(0x24f)]({'slug':_0x317c5a[_0x32778f(0x1ff)],'visibility':_0x32778f(0x100),'mobiledoc':_0x317c5a[_0x32778f(0x18d)],'html':_0x317c5a[_0x32778f(0x232)],'published_at':_0x317c5a[_0x32778f(0x147)](_0x2fb477)['add'](0x5,_0x32778f(0xf4))[_0x32778f(0x204)]()});continue;case'7':_0x809f2=_0x34e804['DataGenerator']['forKnex']['createPost']({'slug':_0x32778f(0x1fd),'visibility':_0x32778f(0xbd),'published_at':_0x317c5a[_0x32778f(0x19e)](_0x50f553)['toDate']()});continue;}break;}}else{const _0x281e56=DataGenerator['Content'][_0x32778f(0x100)][0x0][_0x32778f(0xcc)],_0x6fcac4=await _0x208240[_0x32778f(0x192)](_0x32778f(0x1b3)+_0x281e56)[_0x32778f(0xff)](0xc8),_0x2fe66b=_0x6fcac4['body'];should['exist'](_0x2fe66b),_0x2fe66b[_0x32778f(0x1df)][_0x32778f(0xf6)][_0x32778f(0x13e)]([_0x48be1a[_0x32778f(0x244)],_0x48be1a[_0x32778f(0x120)],_0x32778f(0x186),_0x48be1a[_0x32778f(0x24d)],_0x32778f(0x137)]),_0x2fe66b[_0x32778f(0x1df)]['not'][_0x32778f(0xf6)]['property']('id'),_0x2fe66b[_0x32778f(0x137)][_0x32778f(0x1df)][_0x32778f(0xf6)]['length'](0x1),Object[_0x32778f(0xe1)](_0x2fe66b['newsletters'][0x0])[_0x32778f(0x1df)][_0x32778f(0xf6)][_0x32778f(0x1d5)](0x5),_0x2fe66b[_0x32778f(0x137)][0x0]['should'][_0x32778f(0xf6)][_0x32778f(0x13e)](['id',_0x48be1a[_0x32778f(0x120)],_0x32778f(0x183),_0x48be1a[_0x32778f(0x19a)],_0x32778f(0x184)]);const _0x14b9d5=_0x2fe66b[_0x32778f(0x137)],_0x4a6a35=_0x14b9d5[0x0]['name'];_0x14b9d5[0x0][_0x32778f(0x183)]=_0x32778f(0x126);const _0x4c3608=await _0x208240['put'](_0x32778f(0x1b3)+_0x281e56)['send']({'newsletters':[]})[_0x32778f(0xff)](0xc8),_0xc0f000=_0x4c3608[_0x32778f(0x168)];should[_0x32778f(0x11e)](_0xc0f000),_0xc0f000['should']['have']['properties']([_0x32778f(0x245),_0x32778f(0xcc),_0x48be1a['OyeCv'],_0x32778f(0x183),_0x32778f(0x137)]),_0xc0f000[_0x32778f(0x1df)][_0x32778f(0x1bb)]['have'][_0x32778f(0x1d2)]('id'),_0xc0f000['newsletters']['should'][_0x32778f(0xf6)][_0x32778f(0x1d5)](0x0);const _0x129e7c=await _0x208240[_0x32778f(0x1c3)](_0x32778f(0x1b3)+_0x281e56)['send']({'newsletters':_0x14b9d5})[_0x32778f(0xff)](0xc8),_0x1d290d=_0x129e7c[_0x32778f(0x168)];should[_0x32778f(0x11e)](_0x1d290d),_0x1d290d[_0x32778f(0x1df)]['have']['properties']([_0x48be1a[_0x32778f(0x244)],_0x48be1a[_0x32778f(0x120)],_0x48be1a['OyeCv'],_0x48be1a[_0x32778f(0x24d)],'newsletters']),_0x1d290d[_0x32778f(0x1df)][_0x32778f(0x1bb)][_0x32778f(0xf6)][_0x32778f(0x1d2)]('id'),_0x1d290d[_0x32778f(0x137)][_0x32778f(0x1df)][_0x32778f(0xf6)][_0x32778f(0x1d5)](0x1),Object['keys'](_0x1d290d[_0x32778f(0x137)][0x0])[_0x32778f(0x1df)][_0x32778f(0xf6)][_0x32778f(0x1d5)](0x5),_0x1d290d['newsletters'][0x0][_0x32778f(0x1df)]['have'][_0x32778f(0x13e)](['id',_0x48be1a[_0x32778f(0x120)],_0x32778f(0x183),_0x32778f(0x1f4),_0x48be1a[_0x32778f(0x219)]]),should[_0x32778f(0xef)](_0x1d290d[_0x32778f(0x137)][0x0][_0x32778f(0x183)],_0x4a6a35);}}),it(_0x48be1a[_0x4f0d21(0x190)],async function(){const _0x1b5f6e=_0x4f0d21;await _0x208240[_0x1b5f6e(0x192)](_0x29828c['VKvuk'])['expect'](0x194)['expect'](_0x29828c[_0x1b5f6e(0x1c8)],_0x1b5f6e(0xe4));}),_0x48be1a['zYRbp'](it,_0x48be1a[_0x4f0d21(0x203)],async function(){const _0x2d5519=_0x4f0d21;await _0x208240[_0x2d5519(0x192)](_0x48be1a[_0x2d5519(0x1e4)])['expect'](0x12e)[_0x2d5519(0xff)](_0x48be1a[_0x2d5519(0x218)],_0x2d5519(0x228));});}),describe(_0x48be1a['HMDPW'],function(){const _0x4f96ce=_0x28e484,_0x4c28b0={'kPRem':_0x4f96ce(0x191),'rlqky':_0x48be1a[_0x4f96ce(0x1a7)],'DzRVV':_0x48be1a['OnxTs'],'yXAUS':_0x4f96ce(0x137),'bjArr':_0x48be1a[_0x4f96ce(0x207)],'eLODM':_0x48be1a[_0x4f96ce(0x120)],'NIlbY':function(_0x309fbf,_0x415f63){return _0x309fbf(_0x415f63);},'tXlGN':_0x4f96ce(0x230),'Qvmwm':_0x48be1a[_0x4f96ce(0x1d4)],'UZnEY':function(_0x11ae0c,_0x7ba38e){return _0x11ae0c(_0x7ba38e);},'iBbeZ':_0x4f96ce(0x194),'wpCcH':_0x48be1a['dONJr']};it(_0x4f96ce(0x1e5),async function(){const _0x574663=_0x4f96ce;await _0x208240[_0x574663(0x192)]('/unsubscribe/?uuid=XXX')[_0x574663(0xff)](0x12e)[_0x574663(0xff)](_0x4c28b0[_0x574663(0xe9)],'http://127.0.0.1:2369/?uuid=XXX&action=unsubscribe');}),_0x48be1a[_0x4f96ce(0xc8)](it,_0x48be1a[_0x4f96ce(0x1ae)],async function(){const _0xcc0fe2=_0x4f96ce;await _0x208240['get'](_0x4c28b0[_0xcc0fe2(0x1a3)])['expect'](0x12e)['expect']('Location',_0xcc0fe2(0x20c));}),it(_0x4f96ce(0x211),async function(){const _0x366887=_0x4f96ce;await _0x208240[_0x366887(0x192)](_0x4c28b0[_0x366887(0x198)])[_0x366887(0xff)](0x190);}),_0x48be1a[_0x4f96ce(0x162)](it,_0x4f96ce(0x236),async function(){const _0x1e1770=_0x4f96ce,_0x3da982=fixtureManager[_0x1e1770(0x192)](_0x48be1a['kxpEu'],0x0)['id'],_0x31fa9e=await _0x48be1a[_0x1e1770(0x1d1)](createMember,{'email':_0x1e1770(0x10d),'newsletters':[{'id':_0x3da982}]}),_0x10dbe3=_0x31fa9e['get'](_0x48be1a[_0x1e1770(0x120)]);let _0x3f4e5a=await _0x208240['get']('/members/api/member/newsletters?uuid='+_0x10dbe3)[_0x1e1770(0xff)](0xc8),_0x3eb54b=_0x3f4e5a[_0x1e1770(0x168)];assert[_0x1e1770(0xef)](_0x3eb54b[_0x1e1770(0x137)][_0x1e1770(0x1d5)],0x1),await _0x208240['post'](_0x1e1770(0x175)+_0x10dbe3)[_0x1e1770(0xff)](0xc9),_0x3f4e5a=await _0x208240[_0x1e1770(0x192)](_0x1e1770(0x1b3)+_0x10dbe3)[_0x1e1770(0xff)](0xc8),_0x3eb54b=_0x3f4e5a[_0x1e1770(0x168)],assert['equal'](_0x3eb54b[_0x1e1770(0x137)]['length'],0x0,_0x48be1a[_0x1e1770(0xea)]);}),it('should\x20only\x20do\x20a\x20partial\x20unsubscribe\x20on\x20POST',async function(){const _0x5f43d1=_0x4f96ce,_0xede65=fixtureManager[_0x5f43d1(0x192)](_0x5f43d1(0x137),0x0)['id'],_0x5744ab=fixtureManager[_0x5f43d1(0x192)](_0x4c28b0['yXAUS'],0x1)['id'],_0x1bdc9e=fixtureManager[_0x5f43d1(0x192)](_0x4c28b0['yXAUS'],0x1)['uuid'],_0x205d20=await createMember({'email':_0x4c28b0[_0x5f43d1(0x13c)],'newsletters':[{'id':_0xede65},{'id':_0x5744ab}]}),_0x5946e7=_0x205d20[_0x5f43d1(0x192)](_0x4c28b0[_0x5f43d1(0x13d)]);let _0x31dd6e=await _0x208240['get'](_0x5f43d1(0x1b3)+_0x5946e7)[_0x5f43d1(0xff)](0xc8),_0x2feff4=_0x31dd6e[_0x5f43d1(0x168)];assert[_0x5f43d1(0xef)](_0x2feff4[_0x5f43d1(0x137)][_0x5f43d1(0x1d5)],0x2),await _0x208240[_0x5f43d1(0x23e)]('/unsubscribe/?uuid='+_0x5946e7+_0x5f43d1(0x127)+_0x1bdc9e)[_0x5f43d1(0xff)](0xc9),_0x31dd6e=await _0x208240[_0x5f43d1(0x192)](_0x5f43d1(0x1b3)+_0x5946e7)[_0x5f43d1(0xff)](0xc8),_0x2feff4=_0x31dd6e['body'],assert[_0x5f43d1(0xef)](_0x2feff4[_0x5f43d1(0x137)][_0x5f43d1(0x1d5)],0x1,'Sending\x20a\x20POST\x20request\x20to\x20the\x20unsubscribe\x20endpoint\x20should\x20unsubscribe\x20the\x20member\x20from\x20that\x20specific\x20newsletter');}),it(_0x4f96ce(0x18a),async function(){const _0xaee64=_0x4f96ce,_0x340afb=fixtureManager[_0xaee64(0x192)](_0x4c28b0[_0xaee64(0x101)],0x0)['id'],_0x55631e=await _0x4c28b0[_0xaee64(0x16c)](createMember,{'email':'unsubscribe-member-test-3@example.com','newsletters':[{'id':_0x340afb}],'enable_comment_notifications':!![]}),_0x5a1aba=_0x55631e[_0xaee64(0x192)]('uuid');let _0x660793=await _0x208240['get']('/members/api/member/newsletters?uuid='+_0x5a1aba)[_0xaee64(0xff)](0xc8),_0x345095=_0x660793[_0xaee64(0x168)];assert['equal'](_0x345095[_0xaee64(0x137)]['length'],0x1),await _0x208240[_0xaee64(0x23e)](_0xaee64(0x175)+_0x5a1aba+_0xaee64(0x17f))['expect'](0xc9);const _0x26b2af=await members[_0xaee64(0x1b7)][_0xaee64(0x100)]['get']({'id':_0x55631e['id']},{'withRelated':[_0x4c28b0[_0xaee64(0x101)]]});assert[_0xaee64(0xef)](_0x26b2af['get'](_0xaee64(0x227)),![]),assert['equal'](_0x26b2af[_0xaee64(0x11c)](_0x4c28b0[_0xaee64(0x101)])[_0xaee64(0x1f3)]['length'],0x1);}),_0x48be1a[_0x4f96ce(0x10a)](it,_0x48be1a[_0x4f96ce(0x249)],async function(){const _0x5298f7=_0x4f96ce,_0x767d49=fixtureManager[_0x5298f7(0x192)](_0x4c28b0[_0x5298f7(0x101)],0x0)['id'],_0x3300a0=await _0x4c28b0[_0x5298f7(0x16c)](createMember,{'email':_0x4c28b0[_0x5298f7(0x235)],'newsletters':[{'id':_0x767d49}]}),_0x2a1fd6=_0x3300a0[_0x5298f7(0x192)](_0x4c28b0[_0x5298f7(0x13d)]);let _0x3980c0=await _0x208240[_0x5298f7(0x192)](_0x5298f7(0x1b3)+_0x2a1fd6)[_0x5298f7(0xff)](0xc8),_0x130e5b=_0x3980c0['body'];assert[_0x5298f7(0xef)](_0x130e5b['newsletters'][_0x5298f7(0x1d5)],0x1),await _0x208240[_0x5298f7(0x23e)](_0x5298f7(0x175)+_0x2a1fd6)[_0x5298f7(0x1d9)](_0x5298f7(0x1b1))[_0x5298f7(0xcd)]({'List-Unsubscribe':_0x4c28b0[_0x5298f7(0x1c5)]})[_0x5298f7(0xff)](0xc9),_0x3980c0=await _0x208240[_0x5298f7(0x192)]('/members/api/member/newsletters?uuid='+_0x2a1fd6)[_0x5298f7(0xff)](0xc8),_0x130e5b=_0x3980c0[_0x5298f7(0x168)],assert[_0x5298f7(0xef)](_0x130e5b[_0x5298f7(0x137)][_0x5298f7(0x1d5)],0x0,_0x5298f7(0x25a));}),_0x48be1a['qXyds'](it,_0x48be1a[_0x4f96ce(0x1a8)],async function(){const _0x2338b6=_0x4f96ce,_0x280464=fixtureManager[_0x2338b6(0x192)](_0x4c28b0[_0x2338b6(0x101)],0x0)['id'],_0x3c7dd0=await _0x4c28b0[_0x2338b6(0xfe)](createMember,{'email':_0x2338b6(0x110),'newsletters':[{'id':_0x280464}]}),_0x4f14ca=_0x3c7dd0['get'](_0x2338b6(0xcc));let _0x381978=await _0x208240[_0x2338b6(0x192)]('/members/api/member/newsletters?uuid='+_0x4f14ca)['expect'](0xc8),_0xace02=_0x381978['body'];assert[_0x2338b6(0xef)](_0xace02[_0x2338b6(0x137)][_0x2338b6(0x1d5)],0x1),await _0x208240['post'](_0x2338b6(0x175)+_0x4f14ca)[_0x2338b6(0x111)](_0x4c28b0[_0x2338b6(0x17b)],_0x4c28b0[_0x2338b6(0x1c5)])[_0x2338b6(0xff)](0xc9),_0x381978=await _0x208240[_0x2338b6(0x192)]('/members/api/member/newsletters?uuid='+_0x4f14ca)[_0x2338b6(0xff)](0xc8),_0xace02=_0x381978[_0x2338b6(0x168)],assert['equal'](_0xace02['newsletters'][_0x2338b6(0x1d5)],0x0,_0x4c28b0['wpCcH']);});}),_0x48be1a[_0x28e484(0x162)](describe,_0x28e484(0x1af),function(){const _0x16b962=_0x28e484,_0x173fa6={'BPGTP':_0x48be1a['OoYuG'],'HjZXg':_0x48be1a[_0x16b962(0x1f6)],'bGEYU':function(_0x40ff15,_0x5ebd80,_0x5e7a67){const _0x2736c4=_0x16b962;return _0x48be1a[_0x2736c4(0x1e9)](_0x40ff15,_0x5ebd80,_0x5e7a67);},'ZTfEo':_0x16b962(0xe3),'ytTBv':'cannot\x20read\x20product-only\x20post\x20content','Xobyx':'/members/api/member','IDglQ':function(_0x55d881,_0x4fa1f3){const _0x36a628=_0x16b962;return _0x48be1a[_0x36a628(0x1da)](_0x55d881,_0x4fa1f3);},'kqwvD':_0x48be1a[_0x16b962(0x164)],'RCdux':_0x16b962(0x231),'cmLQY':function(_0x485d8f,_0x30c0a7,_0x1a4363){return _0x485d8f(_0x30c0a7,_0x1a4363);},'DgxjV':'by\x20default\x20only\x20destroys\x20current\x20session','lMRJa':function(_0x42723b,_0x1848c7){return _0x48be1a['fAYZf'](_0x42723b,_0x1848c7);},'UFxen':_0x48be1a[_0x16b962(0xc5)],'hVrcL':_0x16b962(0x1b6),'mFdrW':function(_0x55ae1e,_0xbb1ba9){const _0x4c6e1d=_0x16b962;return _0x48be1a[_0x4c6e1d(0x1da)](_0x55ae1e,_0xbb1ba9);},'tHvIP':'can\x20read\x20public\x20post\x20content','hNkUm':_0x16b962(0x24c),'NAiBl':_0x16b962(0x114),'McQsD':_0x16b962(0x17e),'zKWWQ':_0x48be1a[_0x16b962(0x1c2)],'ExmyW':function(_0x186e9b,_0x5b57dc,_0x277b16){return _0x186e9b(_0x5b57dc,_0x277b16);},'MldXP':_0x48be1a[_0x16b962(0x1aa)],'LYafV':_0x16b962(0x21c),'NJWPA':_0x16b962(0x1ca),'amKLo':_0x48be1a[_0x16b962(0x1fa)],'qSoON':function(_0x36ac40,_0x2bd230){return _0x36ac40!==_0x2bd230;},'GGWeg':_0x48be1a['LOvCP'],'gQnEt':_0x16b962(0x134),'xUwHc':'/thou-must-have-default-product/','yehSc':_0x16b962(0x245),'BWyWu':_0x48be1a[_0x16b962(0xb9)],'tklBj':'created_at','kdBge':_0x48be1a[_0x16b962(0x1cc)],'UcpwF':_0x48be1a[_0x16b962(0x128)],'aqzZP':_0x48be1a[_0x16b962(0x139)],'PoWLB':function(_0x320dd0,_0xda0770){const _0x4eb519=_0x16b962;return _0x48be1a[_0x4eb519(0x1d3)](_0x320dd0,_0xda0770);},'jGYkq':_0x48be1a['LOzjp'],'Jeqsa':function(_0x277030,_0x3ebd7a,_0x25dd63){return _0x277030(_0x3ebd7a,_0x25dd63);},'qHggE':function(_0x20b4e8,_0x1ac60a,_0x147868){const _0x15a96b=_0x16b962;return _0x48be1a[_0x15a96b(0x129)](_0x20b4e8,_0x1ac60a,_0x147868);},'sCemc':_0x48be1a[_0x16b962(0x174)],'fvcUR':_0x48be1a[_0x16b962(0xdd)],'fBTgV':_0x48be1a[_0x16b962(0x253)],'wBwiN':function(_0x246b41,_0x5417bd){const _0x243f58=_0x16b962;return _0x48be1a[_0x243f58(0x188)](_0x246b41,_0x5417bd);}};let _0x31109e,_0x59943d,_0x24128a,_0x41d2a5,_0x2babe7,_0x330680;_0x48be1a[_0x16b962(0xf9)](before,function(){const _0x14e243=_0x16b962,_0x1cacc6=_0x14e243(0x1ea)['split']('|');let _0x5e4361=0x0;while(!![]){switch(_0x1cacc6[_0x5e4361++]){case'0':_0x31109e=testUtils['DataGenerator'][_0x14e243(0x20d)][_0x14e243(0x24f)]({'slug':_0x14e243(0x125),'visibility':_0x48be1a['OpHdi'],'published_at':_0x48be1a[_0x14e243(0x246)](moment)[_0x14e243(0x166)](0xf,_0x48be1a['qaEdg'])['toDate']()});continue;case'1':return testUtils['fixtures'][_0x14e243(0x250)]([_0x31109e,_0x59943d,_0x24128a,_0x41d2a5,_0x2babe7,_0x330680]);case'2':Function(_0x14e243(0x1be))();continue;case'3':_0x330680=testUtils[_0x14e243(0x106)]['forKnex'][_0x14e243(0x24f)]({'slug':'thou-must-have-default-product','visibility':_0x14e243(0x154),'published_at':moment()['toDate']()});continue;case'4':_0x41d2a5=testUtils[_0x14e243(0x106)][_0x14e243(0x20d)][_0x14e243(0x24f)]({'slug':_0x48be1a[_0x14e243(0x10e)],'visibility':_0x48be1a['cwUNC'],'mobiledoc':_0x48be1a[_0x14e243(0x1cd)],'html':_0x48be1a[_0x14e243(0x161)],'published_at':_0x48be1a[_0x14e243(0xc2)](moment)[_0x14e243(0x166)](0x5,_0x48be1a[_0x14e243(0x1dd)])[_0x14e243(0x204)]()});continue;case'5':_0x24128a=testUtils[_0x14e243(0x106)][_0x14e243(0x20d)]['createPost']({'slug':_0x48be1a['SqGBf'],'visibility':_0x14e243(0x173),'published_at':_0x48be1a[_0x14e243(0xb8)](moment)['add'](0x1e,_0x14e243(0xf4))[_0x14e243(0x204)]()});continue;case'6':_0x59943d=testUtils[_0x14e243(0x106)][_0x14e243(0x20d)][_0x14e243(0x24f)]({'slug':_0x14e243(0xde),'visibility':_0x14e243(0x100),'published_at':_0x48be1a[_0x14e243(0x246)](moment)[_0x14e243(0x166)](0x2d,_0x48be1a[_0x14e243(0x1dd)])[_0x14e243(0x204)]()});continue;case'7':_0x2babe7=testUtils[_0x14e243(0x106)][_0x14e243(0x20d)]['createPost']({'slug':_0x48be1a[_0x14e243(0xd3)],'visibility':_0x14e243(0xbd),'published_at':moment()[_0x14e243(0x204)]()});continue;}break;}}),describe(_0x16b962(0x1cb),function(){const _0xd750ae=_0x16b962,_0x517860={'GmDNw':_0x173fa6[_0xd750ae(0xeb)],'FenLZ':_0xd750ae(0x256),'TNcGN':_0xd750ae(0x1a6)};it(_0xd750ae(0xd8),async function(){const _0x330051=_0xd750ae;await _0x208240[_0x330051(0x192)](_0x173fa6[_0x330051(0x1c1)])[_0x330051(0xff)](0xc8)[_0x330051(0xff)](assertContentIsPresent);}),_0x173fa6[_0xd750ae(0xcf)](it,_0x173fa6[_0xd750ae(0x118)],async function(){const _0x2fcbaf=_0xd750ae;await _0x208240[_0x2fcbaf(0x192)]('/thou-shalt-not-be-seen/')[_0x2fcbaf(0xff)](0xc8)[_0x2fcbaf(0xff)](assertContentIsAbsent);}),_0x173fa6['bGEYU'](it,'cannot\x20read\x20paid\x20post\x20content',async function(){const _0x558e0c=_0xd750ae;await _0x208240[_0x558e0c(0x192)]('/thou-shalt-be-paid-for/')['expect'](0xc8)[_0x558e0c(0xff)](assertContentIsAbsent);}),_0x173fa6[_0xd750ae(0xcf)](it,_0xd750ae(0x114),async function(){const _0x577be8=_0xd750ae;await _0x208240[_0x577be8(0x192)](_0x517860[_0x577be8(0x10b)])[_0x577be8(0xff)](0xc8)[_0x577be8(0xff)](assertContentIsAbsent);}),it(_0x173fa6[_0xd750ae(0x233)],async function(){const _0xb6159d=_0xd750ae;await _0x208240[_0xb6159d(0x192)](_0x517860[_0xb6159d(0x1ba)])['expect'](0xc8)[_0xb6159d(0xff)](assertContentIsAbsent);}),it(_0xd750ae(0x208),async function(){const _0x1b4b5c=_0xd750ae,_0x58fecd=sinon['spy']();DomainEvents[_0x1b4b5c(0x1de)](MemberPageViewEvent,_0x58fecd),await _0x208240['get'](_0x517860[_0x1b4b5c(0x1f9)])[_0x1b4b5c(0xff)](0xc8)['expect'](assertContentIsPresent),assert(_0x58fecd[_0x1b4b5c(0x181)],_0x1b4b5c(0x258));});}),describe(_0x16b962(0x172),function(){const _0x4eb2f0=_0x16b962;let _0x2da6ae;_0x173fa6[_0x4eb2f0(0xec)](beforeEach,async function(){_0x2da6ae=await _0x2495cb('member1@test.com');}),it(_0x4eb2f0(0xed),async function(){const _0x220238=_0x4eb2f0;await _0x208240[_0x220238(0x192)](_0x173fa6[_0x220238(0x259)])[_0x220238(0xff)](0xc8),await _0x173fa6[_0x220238(0xec)](cycleTransientId,{'id':_0x2da6ae['id']}),await _0x2da6ae['refresh']();const _0x1fa336=_0x2da6ae['get'](_0x220238(0x231));await _0x208240[_0x220238(0x192)](_0x173fa6[_0x220238(0x1a9)])[_0x220238(0xff)](_0x220238(0xd4),/ghost-members-ssr=.*;.*?expires=Thu, 01 Jan 1970 00:00:00 GMT;.*?/)[_0x220238(0xff)](0xcc),await _0x208240[_0x220238(0x192)](_0x220238(0x160))[_0x220238(0xff)](0xcc),await _0x2da6ae['refresh'](),assert['equal'](_0x2da6ae['get'](_0x173fa6['RCdux']),_0x1fa336);}),_0x173fa6['cmLQY'](it,_0x173fa6[_0x4eb2f0(0xe6)],async function(){const _0x39bf8d=_0x4eb2f0,_0x148dfe=_0x2da6ae['get'](_0x173fa6[_0x39bf8d(0x1c6)]);await _0x208240['get'](_0x173fa6[_0x39bf8d(0x259)])[_0x39bf8d(0xff)](0xc8),await _0x208240[_0x39bf8d(0x1e1)](_0x173fa6[_0x39bf8d(0x1a9)])[_0x39bf8d(0xff)](_0x39bf8d(0xd4),/ghost-members-ssr=.*;.*?expires=Thu, 01 Jan 1970 00:00:00 GMT;.*?/)['expect'](0xcc),await _0x208240[_0x39bf8d(0x192)](_0x39bf8d(0x160))[_0x39bf8d(0xff)](0xcc),await _0x2da6ae[_0x39bf8d(0x15d)](),assert[_0x39bf8d(0xef)](_0x2da6ae[_0x39bf8d(0x192)](_0x173fa6[_0x39bf8d(0x1c6)]),_0x148dfe);}),it(_0x4eb2f0(0x23b),async function(){const _0x1518c0=_0x4eb2f0,_0x435e64=_0x2da6ae[_0x1518c0(0x192)](_0x173fa6[_0x1518c0(0x1c6)]);await _0x208240[_0x1518c0(0x192)]('/members/api/member')[_0x1518c0(0xff)](0xc8),await _0x208240[_0x1518c0(0x1e1)](_0x173fa6['kqwvD'])[_0x1518c0(0xcd)]({'all':!![]})[_0x1518c0(0xff)](_0x1518c0(0xd4),/ghost-members-ssr=.*;.*?expires=Thu, 01 Jan 1970 00:00:00 GMT;.*?/)[_0x1518c0(0xff)](0xcc),await _0x208240['get'](_0x173fa6['Xobyx'])[_0x1518c0(0xff)](0xcc),await _0x2da6ae[_0x1518c0(0x15d)](),assert[_0x1518c0(0x209)](_0x2da6ae['get'](_0x173fa6[_0x1518c0(0x1c6)]),_0x435e64);}),it(_0x4eb2f0(0x177),async function(){const _0x5d98dd=_0x4eb2f0,_0x2b566e=_0x2da6ae['get'](_0x173fa6['RCdux']);await _0x208240['get'](_0x5d98dd(0x160))[_0x5d98dd(0xff)](0xc8),await _0x208240[_0x5d98dd(0x1e1)](_0x5d98dd(0xc7))[_0x5d98dd(0xcd)]({'all':![]})[_0x5d98dd(0xff)](_0x5d98dd(0xd4),/ghost-members-ssr=.*;.*?expires=Thu, 01 Jan 1970 00:00:00 GMT;.*?/)[_0x5d98dd(0xff)](0xcc),await _0x208240['get'](_0x5d98dd(0x160))[_0x5d98dd(0xff)](0xcc),await _0x2da6ae[_0x5d98dd(0x15d)](),assert[_0x5d98dd(0xef)](_0x2da6ae['get'](_0x5d98dd(0x231)),_0x2b566e);});}),describe(_0x16b962(0x1bc),function(){const _0x425273=_0x16b962;_0x173fa6[_0x425273(0x15f)](before,async function(){const _0x422ca9=_0x425273,_0x3ef48b={'lqQWV':_0x422ca9(0x12f)};if(_0x173fa6[_0x422ca9(0x169)](_0x422ca9(0x1eb),'Niubd'))await _0x173fa6[_0x422ca9(0xec)](_0x2495cb,_0x173fa6['UFxen']);else{const _0x9b771f=new _0x2abf3e(_0x5ea35b[_0x422ca9(0x11b)]['location'],_0x5e8ecd['API'][_0x422ca9(0x229)]());_0x5d2cd3[_0x422ca9(0x11e)](_0x9b771f['searchParams']['get'](_0x3ef48b[_0x422ca9(0x1e2)])),_0x9b771f[_0x422ca9(0x1e0)][_0x422ca9(0x192)](_0x3ef48b['lqQWV'])['should'][_0x422ca9(0x1b9)](_0x422ca9(0x14f));}}),it(_0x173fa6['tHvIP'],async function(){const _0x526587=_0x425273;await _0x208240['get'](_0x173fa6[_0x526587(0x1c1)])[_0x526587(0xff)](0xc8)[_0x526587(0xff)](assertContentIsPresent);}),_0x173fa6[_0x425273(0xcf)](it,_0x173fa6[_0x425273(0x16a)],async function(){const _0x53258c=_0x425273;await _0x208240[_0x53258c(0x192)](_0x173fa6[_0x53258c(0x146)])['expect'](0xc8)[_0x53258c(0xff)](assertContentIsPresent);}),it('cannot\x20read\x20paid\x20post\x20content',async function(){const _0x25269a=_0x425273;await _0x208240['get'](_0x25269a(0x225))[_0x25269a(0xff)](0xc8)[_0x25269a(0xff)](assertContentIsAbsent);}),it(_0x173fa6['NAiBl'],async function(){const _0x49ee20=_0x425273;await _0x208240[_0x49ee20(0x192)](_0x173fa6[_0x49ee20(0xeb)])[_0x49ee20(0xff)](0xc8)[_0x49ee20(0xff)](assertContentIsAbsent);}),it('cannot\x20read\x20product-only\x20post\x20content',async function(){const _0x592754=_0x425273;await _0x208240[_0x592754(0x192)](_0x592754(0x256))[_0x592754(0xff)](0xc8)[_0x592754(0xff)](assertContentIsAbsent);});}),_0x48be1a[_0x16b962(0xc8)](describe,'as\x20free\x20member\x20with\x20vip\x20label',function(){const _0x47ae93=_0x16b962,_0x552099={'qtXrL':_0x48be1a[_0x47ae93(0x22f)],'Wjjqd':_0x48be1a[_0x47ae93(0x1d6)],'OPghh':function(_0x147909,_0x19e778){const _0x42f3ca=_0x47ae93;return _0x48be1a[_0x42f3ca(0x1ab)](_0x147909,_0x19e778);},'sqCOI':_0x48be1a[_0x47ae93(0x117)],'fyxuM':function(_0x543d26,_0x1cc8d6){return _0x543d26(_0x1cc8d6);}},_0x5acddd='vip@test.com';_0x48be1a[_0x47ae93(0xc0)](before,async function(){const _0x49c895=_0x47ae93;if(_0x552099['OPghh'](_0x552099[_0x49c895(0x131)],_0x552099[_0x49c895(0x131)])){const _0x3144cf=new _0x3a0be7(_0x3cabc1[_0x49c895(0x11b)]['location'],_0x478938['API'][_0x49c895(0x229)]());_0x37f4ac[_0x49c895(0x11e)](_0x3144cf['searchParams'][_0x49c895(0x192)](_0x552099[_0x49c895(0x124)])),_0x3144cf['searchParams'][_0x49c895(0x192)](_0x49c895(0x12f))[_0x49c895(0x1df)][_0x49c895(0x1b9)](_0x552099['Wjjqd']);}else await _0x552099[_0x49c895(0x171)](_0x2495cb,_0x5acddd);}),_0x48be1a['nxDrx'](it,_0x47ae93(0xbb),async function(){const _0x517881=_0x47ae93,_0x3c7c45={'qBjeF':_0x517881(0x115)};if(_0x517881(0x17e)===_0x173fa6[_0x517881(0x105)]){const _0x344a8c=sinon[_0x517881(0x23c)]();DomainEvents[_0x517881(0x1de)](MemberPageViewEvent,_0x344a8c);let _0x4bcb19=await models['Member'][_0x517881(0x170)]({'email':_0x5acddd});await models[_0x517881(0xdc)][_0x517881(0x1db)]({'last_seen_at':null},{'id':_0x4bcb19[_0x517881(0x192)]('id')}),_0x4bcb19=await models[_0x517881(0xdc)]['findOne']({'email':_0x5acddd}),assert[_0x517881(0xef)](_0x4bcb19['get']('last_seen_at'),null,_0x173fa6[_0x517881(0x167)]),await _0x208240[_0x517881(0x192)]('/free-to-see/')['expect'](0xc8)[_0x517881(0xff)](assertContentIsPresent),await DomainEvents[_0x517881(0x1d0)](),_0x173fa6[_0x517881(0x226)](assert,_0x344a8c[_0x517881(0x24a)],_0x173fa6['MldXP']),_0x4bcb19=await models[_0x517881(0xdc)][_0x517881(0x170)]({'email':_0x5acddd}),assert[_0x517881(0x209)](_0x4bcb19[_0x517881(0x192)](_0x173fa6[_0x517881(0x163)]),null,_0x173fa6[_0x517881(0x121)]);}else _0x289c16[_0x517881(0x122)][_0x517881(0x1df)][_0x517881(0x1bb)]['containEql'](_0x3c7c45[_0x517881(0x21b)]);});}),describe(_0x48be1a['cossX'],function(){const _0x13d20a=_0x16b962,_0xd41bb2={'wspbz':_0x13d20a(0xcc),'JQKNo':_0x173fa6[_0x13d20a(0x1bd)],'fttSD':_0x13d20a(0x183),'BucrP':_0x13d20a(0x221),'YOBKm':_0x173fa6[_0x13d20a(0xd1)],'mRTfE':_0x173fa6[_0x13d20a(0x144)],'HhtZf':_0x173fa6[_0x13d20a(0x1dc)],'Zijzo':'newsletters','Lhftp':_0x13d20a(0x1f4)};if(_0x173fa6[_0x13d20a(0x13a)]!==_0x173fa6[_0x13d20a(0x13a)])_0x2da8cd[_0x13d20a(0x122)]['should'][_0x13d20a(0x1b9)](_0x13d20a(0x1b0));else{const _0x5063c7=_0x173fa6['aqzZP'];_0x173fa6[_0x13d20a(0x13f)](before,async function(){const _0x3fc383=_0x13d20a,_0x4b57b4={'hZQWg':_0x3fc383(0x12f)};await models['Member'][_0x3fc383(0x170)]({'email':_0x5063c7},{'require':!![]});const _0x392fa5=_0x173fa6[_0x3fc383(0x15f)](require,_0x173fa6[_0x3fc383(0x185)]),_0x469582=await _0x392fa5['api'][_0x3fc383(0x19d)](_0x5063c7,'signin'),_0xd7ef66=new URL(_0x469582),_0x23b652=''+_0xd7ef66[_0x3fc383(0x1e8)]+_0xd7ef66[_0x3fc383(0x1fe)];await _0x208240[_0x3fc383(0x192)](_0x23b652)[_0x3fc383(0xff)](0x12e)[_0x3fc383(0x12d)](_0x4395b9=>{const _0x2194b5=_0x3fc383,_0x38102a=new URL(_0x4395b9['headers']['location'],testUtils['API'][_0x2194b5(0x229)]());should[_0x2194b5(0x11e)](_0x38102a['searchParams']['get'](_0x4b57b4[_0x2194b5(0x15a)])),_0x38102a[_0x2194b5(0x1e0)][_0x2194b5(0x192)](_0x4b57b4[_0x2194b5(0x15a)])[_0x2194b5(0x1df)]['eql'](_0x2194b5(0x14f));});}),it(_0x173fa6[_0x13d20a(0x237)],async function(){const _0x3119cd=_0x13d20a,_0x1ef38c=await _0x208240[_0x3119cd(0x192)]('/members/api/member')[_0x3119cd(0xff)](0xc8),_0x509fc7=_0x1ef38c[_0x3119cd(0x168)];should[_0x3119cd(0x11e)](_0x509fc7),_0x509fc7['should'][_0x3119cd(0xf6)][_0x3119cd(0x13e)]([_0xd41bb2['wspbz'],_0xd41bb2[_0x3119cd(0x24e)],_0xd41bb2[_0x3119cd(0xf3)],_0x3119cd(0x19f),_0x3119cd(0xe5),_0x3119cd(0x1ef),_0x3119cd(0x17c),_0xd41bb2[_0x3119cd(0x18f)],_0xd41bb2[_0x3119cd(0x152)],_0xd41bb2[_0x3119cd(0x156)],_0xd41bb2[_0x3119cd(0x138)],_0xd41bb2['Zijzo'],_0x3119cd(0x150)]),Object['keys'](_0x509fc7)[_0x3119cd(0x1df)][_0x3119cd(0xf6)][_0x3119cd(0x1d5)](0xd),_0x509fc7[_0x3119cd(0x1df)][_0x3119cd(0x1bb)][_0x3119cd(0xf6)][_0x3119cd(0x1d2)]('id'),_0x509fc7['newsletters']['should'][_0x3119cd(0xf6)]['length'](0x1),Object['keys'](_0x509fc7['newsletters'][0x0])['should'][_0x3119cd(0xf6)][_0x3119cd(0x1d5)](0x5),_0x509fc7[_0x3119cd(0x137)][0x0][_0x3119cd(0x1df)][_0x3119cd(0xf6)][_0x3119cd(0x13e)](['id','uuid',_0xd41bb2[_0x3119cd(0xf3)],_0xd41bb2['Lhftp'],_0x3119cd(0x184)]);}),_0x173fa6[_0x13d20a(0x21d)](it,_0x13d20a(0xd8),async function(){const _0x5d84f8=_0x13d20a;await _0x208240[_0x5d84f8(0x192)](_0x173fa6[_0x5d84f8(0x1c1)])[_0x5d84f8(0xff)](0xc8)[_0x5d84f8(0xff)](assertContentIsPresent);}),it('can\x20read\x20members\x20post\x20content',async function(){const _0x103228=_0x13d20a;_0x173fa6['qSoON'](_0x173fa6['GGWeg'],_0x173fa6['gQnEt'])?await _0x208240[_0x103228(0x192)](_0x173fa6[_0x103228(0x146)])[_0x103228(0xff)](0xc8)[_0x103228(0xff)](assertContentIsPresent):_0x27c733['stringify']({'safe':!![]});}),it(_0x13d20a(0x136),async function(){const _0x17703a=_0x13d20a;await _0x208240[_0x17703a(0x192)](_0x17703a(0x225))[_0x17703a(0xff)](0xc8)[_0x17703a(0xff)](assertContentIsPresent);}),_0x173fa6['qHggE'](it,_0x173fa6['NAiBl'],async function(){const _0x30cc46=_0x13d20a;await _0x208240[_0x30cc46(0x192)](_0x30cc46(0x15b))[_0x30cc46(0xff)](0xc8)[_0x30cc46(0xff)](assertContentIsAbsent);}),it(_0x173fa6[_0x13d20a(0x157)],async function(){const _0x51c088=_0x13d20a;await _0x208240[_0x51c088(0x192)](_0x173fa6[_0x51c088(0x206)])[_0x51c088(0xff)](0xc8)['expect'](assertContentIsPresent);}),_0x173fa6[_0x13d20a(0xcf)](it,'generates\x20a\x20MemberPageView\x20event',async function(){const _0x58b825=_0x13d20a,_0x510491=sinon[_0x58b825(0x23c)]();DomainEvents[_0x58b825(0x1de)](MemberPageViewEvent,_0x510491);let _0x1d7b4c=await models[_0x58b825(0xdc)][_0x58b825(0x170)]({'email':_0x5063c7});await models[_0x58b825(0xdc)][_0x58b825(0x1db)]({'last_seen_at':null},{'id':_0x1d7b4c[_0x58b825(0x192)]('id')}),_0x1d7b4c=await models[_0x58b825(0xdc)][_0x58b825(0x170)]({'email':_0x5063c7}),assert[_0x58b825(0xef)](_0x1d7b4c[_0x58b825(0x192)](_0x173fa6[_0x58b825(0x163)]),null,_0x173fa6['zKWWQ']),await _0x208240[_0x58b825(0x192)](_0x173fa6[_0x58b825(0x1c1)])[_0x58b825(0xff)](0xc8)['expect'](assertContentIsPresent),await DomainEvents[_0x58b825(0x1d0)](),_0x173fa6[_0x58b825(0x1f7)](assert,_0x510491[_0x58b825(0x24a)],_0x58b825(0x197)),_0x1d7b4c=await models[_0x58b825(0xdc)][_0x58b825(0x170)]({'email':_0x5063c7}),assert[_0x58b825(0x209)](_0x1d7b4c[_0x58b825(0x192)](_0x173fa6[_0x58b825(0x163)]),null,_0x58b825(0x1ca));});}}),_0x48be1a[_0x16b962(0x216)](describe,_0x48be1a[_0x16b962(0x1ac)],function(){const _0x53a8db=_0x16b962,_0x479b76={'dPvTj':function(_0x9af282,_0x233383){return _0x9af282(_0x233383);},'kJyUv':_0x48be1a[_0x53a8db(0xda)],'KrAwi':_0x48be1a['OoYuG'],'zbVdI':_0x48be1a['FgTXG']};before(async function(){const _0x1b668f=_0x53a8db;await _0x479b76[_0x1b668f(0x1ce)](_0x2495cb,_0x479b76[_0x1b668f(0x178)]);}),_0x48be1a['KzGiB'](it,_0x48be1a[_0x53a8db(0xd6)],async function(){const _0x4abc0f=_0x53a8db;await _0x208240[_0x4abc0f(0x192)](_0x479b76[_0x4abc0f(0x247)])[_0x4abc0f(0xff)](0xc8)[_0x4abc0f(0xff)](assertContentIsPresent);}),_0x48be1a['WJENy'](it,_0x48be1a[_0x53a8db(0xf5)],async function(){const _0x20ad46=_0x53a8db;await _0x208240[_0x20ad46(0x192)](_0x479b76[_0x20ad46(0xc9)])[_0x20ad46(0xff)](0xc8)[_0x20ad46(0xff)](assertContentIsPresent);}),_0x48be1a[_0x53a8db(0x10a)](it,_0x48be1a[_0x53a8db(0xf8)],async function(){const _0x152ad1=_0x53a8db;await _0x208240[_0x152ad1(0x192)](_0x173fa6[_0x152ad1(0x132)])[_0x152ad1(0xff)](0xc8)['expect'](assertContentIsPresent);}),it(_0x53a8db(0x114),async function(){const _0x1ae264=_0x53a8db;await _0x208240[_0x1ae264(0x192)](_0x1ae264(0x15b))[_0x1ae264(0xff)](0xc8)[_0x1ae264(0xff)](assertContentIsAbsent);}),_0x48be1a[_0x53a8db(0x216)](it,_0x48be1a[_0x53a8db(0x174)],async function(){const _0x12bc58=_0x53a8db;await _0x208240['get'](_0x12bc58(0x256))[_0x12bc58(0xff)](0xc8)['expect'](assertContentIsPresent);});}),_0x48be1a[_0x16b962(0xc8)](describe,_0x48be1a[_0x16b962(0x240)],function(){const _0x574c26=_0x16b962;_0x173fa6[_0x574c26(0x130)](before,async function(){await _0x2495cb(_0x173fa6['fBTgV']);}),it('can\x20read\x20product-only\x20post\x20content',async function(){const _0x1b65c3=_0x574c26;await _0x208240[_0x1b65c3(0x192)](_0x1b65c3(0x256))['expect'](0xc8)['expect'](assertContentIsPresent);});});});});