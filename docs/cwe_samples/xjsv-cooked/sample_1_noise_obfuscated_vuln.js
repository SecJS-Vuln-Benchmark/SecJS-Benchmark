const _0x502d94=_0x23a4;(function(_0xb63ddd,_0x471e81){const _0x2737cd=_0x23a4,_0x5dc7c7=_0xb63ddd();while(!![]){try{const _0x375bc4=-parseInt(_0x2737cd(0x168))/0x1+parseInt(_0x2737cd(0x16d))/0x2*(parseInt(_0x2737cd(0x15f))/0x3)+parseInt(_0x2737cd(0x165))/0x4+-parseInt(_0x2737cd(0x17c))/0x5+parseInt(_0x2737cd(0x15b))/0x6+-parseInt(_0x2737cd(0x163))/0x7+parseInt(_0x2737cd(0x15a))/0x8*(parseInt(_0x2737cd(0x16c))/0x9);if(_0x375bc4===_0x471e81)break;else _0x5dc7c7['push'](_0x5dc7c7['shift']());}catch(_0x22a435){_0x5dc7c7['push'](_0x5dc7c7['shift']());}}}(_0x267d,0xa3f5b));const assert=require('assert/strict'),{agentProvider,mockManager,fixtureManager,matchers,configUtils}=require(_0x502d94(0x157)),{anyEtag,anyObjectId,anyLocationFor,anyErrorId}=matchers,models=require(_0x502d94(0x183)),sinon=require(_0x502d94(0x17b));function _0x23a4(_0x16538f,_0x3fb15a){const _0x267dd3=_0x267d();return _0x23a4=function(_0x23a4af,_0x23babd){_0x23a4af=_0x23a4af-0x155;let _0x3f5bcc=_0x267dd3[_0x23a4af];return _0x3f5bcc;},_0x23a4(_0x16538f,_0x3fb15a);}function _0x267d(){const _0x5f017d=['dBNeZ','members','matchHeaderSnapshot','882133CxSEQW','posts','2500948QvBgVz','getTime','CjEiJ','1277016uamFmH','Can\x20change\x20existing\x20feedback','equal','dUecf','9342387uJkxin','18cSRWMU','GJIDC','uuid','matchBodySnapshot','/api/feedback/','Members\x20Feedback','ZuHyX','JKgCY','qApYq','MemberFeedback','get','useFakeTimers','findOne','loginAs','sinon','2207960btVCdo','/api/feedback/?uuid=','init','tJxLh','00000000-0000-0000-0000-000000000000','expectStatus','Throws\x20for\x20invalid\x20score\x20type','../../../core/server/models','tick','duplicate','/api/feedback/?uuid=1234','ZzSIf','body','score','Authentication','updated_at','Can\x20add\x20positive\x20feedback','yquOF','restore','123','getMembersAPIAgent','../../utils/e2e-framework','feedback','wOoXj','8GBSKBK','3568728DCXbRM','ZYgFw','post','text','86046DGeNQw'];_0x267d=function(){return _0x5f017d;};return _0x267d();}describe(_0x502d94(0x172),function(){const _0x18039e=_0x502d94,_0xc82b54={'tJxLh':_0x18039e(0x161),'dUecf':_0x18039e(0x164),'wOoXj':'feedback','dBNeZ':'Allows\x20authentication\x20via\x20session','JKgCY':function(_0x26de81,_0x5f3684,_0x5790d4){return _0x26de81(_0x5f3684,_0x5790d4);},'YyXjs':'Throws\x20for\x20invalid\x20uuid','MQxgR':function(_0xf74040,_0x348399,_0x5728e3){return _0xf74040(_0x348399,_0x5728e3);},'ZzSIf':function(_0x3fa33b,_0x1f1dff){return _0x3fa33b(_0x1f1dff);},'CjEiJ':function(_0xb8dc2c,_0x226ce4){return _0xb8dc2c(_0x226ce4);},'ZYgFw':function(_0xb26a68,_0x44f3c6){return _0xb26a68*_0x44f3c6;},'GJIDC':_0x18039e(0x18b),'ZuHyX':function(_0x5b0986,_0x411782){return _0x5b0986(_0x411782);},'yquOF':'Validation','qApYq':function(_0x268540,_0x3369de,_0x17c8e6){return _0x268540(_0x3369de,_0x17c8e6);},'HOpsS':_0x18039e(0x169)};let _0x87475a,_0x51e3ea,_0x3dc8ad,_0x1b01c9;before(async function(){const _0x24e094=_0x18039e;_0x87475a=await agentProvider[_0x24e094(0x156)](),_0x51e3ea=_0x87475a[_0x24e094(0x185)](),await fixtureManager[_0x24e094(0x17e)]('posts',_0x24e094(0x161)),_0x3dc8ad=fixtureManager[_0x24e094(0x177)](_0xc82b54[_0x24e094(0x17f)],0x0)[_0x24e094(0x16f)];}),beforeEach(function(){mockManager['mockMail']();}),afterEach(async function(){const _0xaabfd2=_0x18039e;_0x1b01c9?.['restore'](),_0x1b01c9=undefined,await configUtils[_0xaabfd2(0x18e)](),mockManager['restore']();}),describe(_0x18039e(0x18a),function(){const _0x4dbaa6=_0x18039e;it(_0xc82b54[_0x4dbaa6(0x160)],async function(){const _0x10edc2=_0x4dbaa6,_0x56b03c=fixtureManager['get'](_0xc82b54[_0x10edc2(0x16b)],0x0)['id'];await _0x51e3ea[_0x10edc2(0x17a)]('authenticationtest@email.com'),await _0x51e3ea[_0x10edc2(0x15d)](_0x10edc2(0x171))[_0x10edc2(0x188)]({'feedback':[{'score':0x1,'post_id':_0x56b03c}]})[_0x10edc2(0x181)](0xc9)['matchHeaderSnapshot']({'etag':anyEtag,'location':anyLocationFor(_0xc82b54[_0x10edc2(0x159)])})[_0x10edc2(0x170)]({'feedback':[{'id':anyObjectId,'memberId':anyObjectId,'postId':anyObjectId}]});});}),describe(_0xc82b54[_0x18039e(0x18d)],function(){const _0x4aaa94=_0x18039e,_0x47bb11={'vrPNS':_0x4aaa94(0x155)},_0x5e1e9b=fixtureManager[_0x4aaa94(0x177)](_0x4aaa94(0x164),0x0)['id'];_0xc82b54['JKgCY'](it,'Throws\x20for\x20invalid\x20score',async function(){const _0x414e62=_0x4aaa94;await _0x87475a['post']('/api/feedback/?uuid='+_0x3dc8ad)['body']({'feedback':[{'score':0x2,'post_id':_0x5e1e9b}]})[_0x414e62(0x181)](0x1a6)[_0x414e62(0x170)]({'errors':[{'id':anyErrorId}]});}),_0xc82b54[_0x4aaa94(0x174)](it,_0x4aaa94(0x182),async function(){const _0x32852e=_0x4aaa94;await _0x87475a[_0x32852e(0x15d)]('/api/feedback/?uuid='+_0x3dc8ad)['body']({'feedback':[{'score':_0x32852e(0x15e),'post_id':_0x5e1e9b}]})[_0x32852e(0x181)](0x1a6)[_0x32852e(0x170)]({'errors':[{'id':anyErrorId}]});}),it(_0xc82b54['YyXjs'],async function(){const _0x270fd7=_0x4aaa94;await _0x87475a[_0x270fd7(0x15d)](_0x270fd7(0x186))[_0x270fd7(0x188)]({'feedback':[{'score':0x1,'post_id':_0x5e1e9b}]})[_0x270fd7(0x181)](0x191)[_0x270fd7(0x170)]({'errors':[{'id':anyErrorId}]});}),_0xc82b54['JKgCY'](it,'Throws\x20for\x20nonexisting\x20uuid',async function(){const _0x58fed8=_0x4aaa94,_0x3768ef=_0x58fed8(0x180);await _0x87475a[_0x58fed8(0x15d)](_0x58fed8(0x17d)+_0x3768ef)[_0x58fed8(0x188)]({'feedback':[{'score':0x1,'post_id':_0x5e1e9b}]})[_0x58fed8(0x181)](0x191)[_0x58fed8(0x170)]({'errors':[{'id':anyErrorId}]});}),_0xc82b54['MQxgR'](it,'Throws\x20for\x20nonexisting\x20post',async function(){const _0xc12487=_0x4aaa94;await _0x87475a['post'](_0xc12487(0x17d)+_0x3dc8ad)[_0xc12487(0x188)]({'feedback':[{'score':0x1,'post_id':_0x47bb11['vrPNS']}]})[_0xc12487(0x181)](0x194)[_0xc12487(0x170)]({'errors':[{'id':anyErrorId}]});});}),it(_0x18039e(0x18c),async function(){const _0x59b23f=_0x18039e,_0x31ad01=fixtureManager['get'](_0xc82b54[_0x59b23f(0x16b)],0x0)['id'];await _0x87475a[_0x59b23f(0x15d)](_0x59b23f(0x17d)+_0x3dc8ad)[_0x59b23f(0x188)]({'feedback':[{'score':0x1,'post_id':_0x31ad01}]})[_0x59b23f(0x181)](0xc9)[_0x59b23f(0x162)]({'etag':anyEtag,'location':_0xc82b54[_0x59b23f(0x187)](anyLocationFor,_0xc82b54['wOoXj'])})['matchBodySnapshot']({'feedback':[{'id':anyObjectId,'memberId':anyObjectId,'postId':anyObjectId}]});}),_0xc82b54[_0x18039e(0x175)](it,_0xc82b54['HOpsS'],async function(){const _0x2b223=_0x18039e;_0x1b01c9=sinon[_0x2b223(0x178)](new Date());const _0x34464c=fixtureManager['get'](_0xc82b54[_0x2b223(0x16b)],0x1)['id'],{body:_0x375882}=await _0x87475a[_0x2b223(0x15d)](_0x2b223(0x17d)+_0x3dc8ad)[_0x2b223(0x188)]({'feedback':[{'score':0x0,'post_id':_0x34464c}]})[_0x2b223(0x181)](0xc9)[_0x2b223(0x162)]({'etag':anyEtag,'location':_0xc82b54[_0x2b223(0x167)](anyLocationFor,_0xc82b54[_0x2b223(0x159)])})[_0x2b223(0x170)]({'feedback':[{'id':anyObjectId,'memberId':anyObjectId,'postId':anyObjectId}]});assert[_0x2b223(0x16a)](_0x375882['feedback'][0x0]['score'],0x0);const _0x110c2f=_0x375882[_0x2b223(0x158)][0x0]['id'],_0x16515c=await models[_0x2b223(0x176)][_0x2b223(0x179)]({'id':_0x110c2f},{'require':!![]});_0x1b01c9[_0x2b223(0x184)](_0xc82b54['ZYgFw'](0xa,0x3c)*0x3e8);const {body:_0x381281}=await _0x87475a['post'](_0x2b223(0x17d)+_0x3dc8ad)[_0x2b223(0x188)]({'feedback':[{'score':0x1,'post_id':_0x34464c}]})[_0x2b223(0x181)](0xc9)['matchHeaderSnapshot']({'etag':anyEtag,'location':anyLocationFor(_0x2b223(0x158))})[_0x2b223(0x170)]({'feedback':[{'id':anyObjectId,'memberId':anyObjectId,'postId':anyObjectId}]});assert[_0x2b223(0x16a)](_0x381281[_0x2b223(0x158)][0x0]['id'],_0x110c2f),assert[_0x2b223(0x16a)](_0x381281[_0x2b223(0x158)][0x0][_0x2b223(0x189)],0x1);const _0x55c45b=await models[_0x2b223(0x176)][_0x2b223(0x179)]({'id':_0x110c2f},{'require':!![]});assert['notEqual'](_0x55c45b['get'](_0xc82b54[_0x2b223(0x16e)])[_0x2b223(0x166)](),_0x16515c[_0x2b223(0x177)](_0x2b223(0x18b))[_0x2b223(0x166)]()),_0x1b01c9[_0x2b223(0x184)](_0xc82b54[_0x2b223(0x15c)](0xa,0x3c)*0x3e8);const {body:_0x29418b}=await _0x87475a[_0x2b223(0x15d)]('/api/feedback/?uuid='+_0x3dc8ad)[_0x2b223(0x188)]({'feedback':[{'score':0x1,'post_id':_0x34464c}]})[_0x2b223(0x181)](0xc9)[_0x2b223(0x162)]({'etag':anyEtag,'location':_0xc82b54[_0x2b223(0x173)](anyLocationFor,'feedback')})['matchBodySnapshot']({'feedback':[{'id':anyObjectId,'memberId':anyObjectId,'postId':anyObjectId}]}),_0x30c396=await models[_0x2b223(0x176)][_0x2b223(0x179)]({'id':_0x110c2f},{'require':!![]});assert[_0x2b223(0x16a)](_0x29418b['feedback'][0x0]['id'],_0x110c2f),assert[_0x2b223(0x16a)](_0x29418b['feedback'][0x0][_0x2b223(0x189)],0x1),assert[_0x2b223(0x16a)](_0x30c396[_0x2b223(0x177)](_0x2b223(0x18b))[_0x2b223(0x166)](),_0x55c45b['get'](_0xc82b54[_0x2b223(0x16e)])['getTime']());});});