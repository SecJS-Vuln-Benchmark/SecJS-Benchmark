const _0x2b08b7=_0x5bb6;(function(_0x4e1b50,_0x276743){const _0x5c0fd2=_0x5bb6,_0x9eb4ba=_0x4e1b50();while(!![]){try{const _0x2faef5=-parseInt(_0x5c0fd2(0xb6))/0x1+parseInt(_0x5c0fd2(0xf0))/0x2+parseInt(_0x5c0fd2(0xa5))/0x3*(-parseInt(_0x5c0fd2(0xcc))/0x4)+parseInt(_0x5c0fd2(0xec))/0x5+parseInt(_0x5c0fd2(0xe6))/0x6*(parseInt(_0x5c0fd2(0x80))/0x7)+parseInt(_0x5c0fd2(0xe0))/0x8*(parseInt(_0x5c0fd2(0x97))/0x9)+-parseInt(_0x5c0fd2(0x98))/0xa;if(_0x2faef5===_0x276743)break;else _0x9eb4ba['push'](_0x9eb4ba['shift']());}catch(_0x24db5d){_0x9eb4ba['push'](_0x9eb4ba['shift']());}}}(_0x5cd5,0x35035));const EncryptionMetadata=require(_0x2b08b7(0xe8))[_0x2b08b7(0xd5)],FileHeader=require(_0x2b08b7(0xb7))[_0x2b08b7(0xc0)],expandTilde=require(_0x2b08b7(0xcf)),resultStatus=require(_0x2b08b7(0xb7))[_0x2b08b7(0x8c)],ProxyUtil=require(_0x2b08b7(0x99)),{isBypassProxy}=require(_0x2b08b7(0xc6)),Logger=require(_0x2b08b7(0xe5)),EXPIRED_TOKEN=_0x2b08b7(0xef);function _0x5cd5(){const _0x4ede25=['EcRFx','pKUmM','.blob.core.windows.net','getBlockBlobClient','trace','MXRoW','gSJjF','data','matDesc','\x20and\x20the\x20proxy\x20host\x20is:\x20','380543dpVKBj','./file_util','mjUrk','WrappedContentKey','dstFileName','srcFileName','SjJET','SHA256_DIGEST','OJBCK','uploadFileStream','FileHeader','cudfe','VROHY','lHhtc','containerName','encryptiondata','../http/node','stageInfo','statusCode','end','zKhUR','lastError','23272qFnMgv','cWzKq','download','expand-tilde','EFAXJ','key','getAzureProxy','write','indexOf','EncryptionMetadata','EAJJH','path','UPLOADED','UTF-8','bTQWJ','readFileSync','fTtxx','sfcdigest','stringify','NEED_RETRY','988024BuFqjQ','nRIfs','application/octet-stream','XDUbo','uploadFile','../logger','23106TGJIbL','@azure/storage-blob','./encrypt_util','qiSrO','NOT_FOUND_FILE','location','2076425nVhSSS','code','RxTug','ExpiredToken','676448UnLiOg','platform','extractContainerNameAndPath','ZwMDw','matdesc','TyJTG','RENEW_TOKEN','HNDSa','tIMnv','DwbPK','xRTJQ','JDwhU','substring','symmKey1','getHostFromURL','CxAqU','MZyBP','Server\x20failed\x20to\x20authenticate\x20the\x20request.','getContainerClient','toString','UdAaC','metadata','createClient','getProxy','637nmagDM','umEin','qQrpY','parse','storageAccount','includes','NKONB','Gdstx','1.0','getProperties','win32','https://','resultStatus','contentLength','createWriteStream','ERROR','endsWith','undefined','error','Signature\x20not\x20valid\x20in\x20the\x20specified\x20time\x20frame','hideEnvironmentProxy','DOWNLOADED','CquLL','9sJJhjx','5017730TnEMaV','../proxy_util','EncryptedKey','Azure\x20Util','wAufN','ContentEncryptionIV','ciOdO','ZulQX','getBlobClient','uploadSize','lmBGq','getInstance','HJlLC','66gMyMQt','AES_CBC_256','oAcMd','Initializing\x20the\x20proxy\x20information\x20for\x20the\x20Azure\x20Client:\x20','EJvfE','debug','FullBlob'];_0x5cd5=function(){return _0x4ede25;};return _0x5cd5();}function AzureLocation(_0x240838,_0x596e6d){return{'containerName':_0x240838,'path':_0x596e6d};}function _0x5bb6(_0x2e47d8,_0x4b3955){const _0x5cd5a6=_0x5cd5();return _0x5bb6=function(_0x5bb66f,_0x53ad14){_0x5bb66f=_0x5bb66f-0x73;let _0x63d835=_0x5cd5a6[_0x5bb66f];return _0x63d835;},_0x5bb6(_0x2e47d8,_0x4b3955);}function AzureUtil(_0x1b932c,_0x18f4e0,_0x5b8767){const _0x471c0b=_0x2b08b7,_0x5322c6={'SjJET':'creds','ZwMDw':'AZURE_SAS_TOKEN','EAJJH':_0x471c0b(0x84),'lmBGq':_0x471c0b(0x9b),'zKhUR':function(_0x48c287,_0x563f20){return _0x48c287!==_0x563f20;},'HNDSa':_0x471c0b(0xc8),'Gdstx':_0x471c0b(0x93),'JDwhU':_0x471c0b(0x79),'NKONB':_0x471c0b(0xdc),'liqOo':_0x471c0b(0xb2),'XDUbo':_0x471c0b(0xed),'qQrpY':_0x471c0b(0x8c),'EFAXJ':'encryptiondata','DwbPK':function(_0x46b320,_0x5ec448,_0x10d191,_0x2abc25){return _0x46b320(_0x5ec448,_0x10d191,_0x2abc25);},'xRTJQ':_0x471c0b(0xb9),'Juluz':_0x471c0b(0x9a),'TyJTG':'matdesc','pKUmM':_0x471c0b(0xdd),'EcRFx':_0x471c0b(0xcb),'lHhtc':_0x471c0b(0xbd),'VROHY':_0x471c0b(0xab),'OJBCK':_0x471c0b(0x75),'HJlLC':_0x471c0b(0x88),'nRIfs':_0x471c0b(0xc7),'PJlYm':_0x471c0b(0xeb),'qiSrO':_0x471c0b(0xba),'bTQWJ':function(_0x30951c,_0x67d601){return _0x30951c===_0x67d601;},'CxAqU':function(_0x1c9c5f,_0xe7f1f4){return _0x1c9c5f(_0xe7f1f4);},'tOVsg':function(_0x229089,_0x7a104f){return _0x229089===_0x7a104f;},'EJvfE':_0x471c0b(0x81),'zIMuH':'dstFileSize','RxTug':_0x471c0b(0xa1),'HfBEk':_0x471c0b(0x92),'ZulQX':function(_0x1f2184,_0x19dde9){return _0x1f2184(_0x19dde9);},'wAufN':function(_0xf3bc44,_0x2e6cc2){return _0xf3bc44+_0x2e6cc2;},'fbNIZ':_0x471c0b(0xbb),'MXRoW':function(_0x439271,_0x324f53){return _0x439271===_0x324f53;},'ciOdO':function(_0x4d2800,_0x2d59e5){return _0x4d2800(_0x2d59e5);},'aVlCB':function(_0x3a09d0,_0x1ffcec){return _0x3a09d0!==_0x1ffcec;},'oAcMd':_0x471c0b(0x96),'mjUrk':_0x471c0b(0x91),'WbBpp':function(_0x26d461,_0x37cfa0){return _0x26d461(_0x37cfa0);},'tIMnv':_0x471c0b(0xe7)},_0x53225c=_0x5322c6['zKhUR'](typeof _0x18f4e0,_0x5322c6[_0x471c0b(0xb8)])?_0x18f4e0:_0x5322c6['WbBpp'](require,_0x5322c6[_0x471c0b(0xf8)]),_0x1b8799=_0x5322c6[_0x471c0b(0xca)](typeof _0x5b8767,_0x5322c6[_0x471c0b(0xb8)])?_0x5b8767:require('fs');this[_0x471c0b(0x7e)]=function(_0x1efec2){const _0x417239=_0x471c0b,_0xa90fcc=_0x1efec2[_0x5322c6[_0x417239(0xbc)]],_0x47953f=_0xa90fcc[_0x5322c6[_0x417239(0xf3)]],_0x5fd4d4=_0x1efec2[_0x5322c6[_0x417239(0xd6)]],_0x276bc0=_0x417239(0x8b)+_0x5fd4d4+_0x417239(0xae)+_0x47953f;let _0x2230b6=ProxyUtil[_0x417239(0x7f)](_0x1b932c[_0x417239(0x7f)](),_0x5322c6[_0x417239(0xa2)]);_0x2230b6&&!isBypassProxy(_0x2230b6,_0x276bc0)&&(Logger[_0x417239(0xa3)]()[_0x417239(0xaa)]('The\x20destination\x20host\x20is:\x20'+ProxyUtil[_0x417239(0x76)](_0x276bc0)+_0x417239(0xb5)+_0x2230b6['host']),Logger[_0x417239(0xa3)]()[_0x417239(0xb0)](_0x417239(0xa8)+ProxyUtil['describeProxy'](_0x2230b6)),_0x2230b6=ProxyUtil[_0x417239(0xd2)](_0x2230b6));ProxyUtil[_0x417239(0x94)]();const _0x1e58af=new _0x53225c['BlobServiceClient'](_0x276bc0,null,{'proxyOptions':_0x2230b6});return ProxyUtil['restoreEnvironmentProxy'](),_0x1e58af;},this[_0x471c0b(0xf2)]=function(_0x340cf3){const _0x55c23e=_0x471c0b;if(process[_0x55c23e(0xf1)]!==_0x55c23e(0x8a)){if(_0x5322c6[_0x55c23e(0x86)]!==_0x55c23e(0x7c))_0x340cf3=expandTilde(_0x340cf3);else{if(_0x5322c6['zKhUR'](_0x567973[_0x5322c6[_0x55c23e(0xf7)]],0x193))return![];const _0x3ee04a=_0xc6ba57[_0x55c23e(0x7b)]();return _0x3ee04a[_0x55c23e(0x85)](_0x5322c6[_0x55c23e(0x87)])||_0x3ee04a[_0x55c23e(0x85)](_0x5322c6[_0x55c23e(0x73)]);}}let _0x4479b5=_0x340cf3,_0x106e35;return _0x340cf3['includes']('/')&&(_0x4479b5=_0x340cf3[_0x55c23e(0x74)](0x0,_0x340cf3[_0x55c23e(0xd4)]('/')),_0x106e35=_0x340cf3[_0x55c23e(0x74)](_0x340cf3[_0x55c23e(0xd4)]('/')+0x1,_0x340cf3['length']),_0x106e35&&!_0x106e35[_0x55c23e(0x90)]('/')&&(_0x106e35+='/')),AzureLocation(_0x4479b5,_0x106e35);},this['getFileHeader']=async function(_0x37b966,_0x443253){const _0x5bc2d0=_0x471c0b,_0x59c678=_0x37b966[_0x5bc2d0(0xc7)],_0x275687=this['createClient'](_0x59c678),_0x2507e8=this[_0x5bc2d0(0xf2)](_0x59c678[_0x5bc2d0(0xeb)]),_0x5deae8=_0x275687[_0x5bc2d0(0x7a)](_0x2507e8[_0x5bc2d0(0xc4)]),_0x3f9a6f=_0x5deae8[_0x5bc2d0(0xa0)](_0x2507e8['path']+_0x443253);let _0x52d563;try{await _0x3f9a6f[_0x5bc2d0(0x89)]()['then'](function(_0x257113){_0x52d563=_0x257113;});}catch(_0x1fec33){if(_0x5bc2d0(0xb2)!==_0x5322c6['liqOo'])_0x3dc698+='/';else{if(_0x1fec33[_0x5322c6[_0x5bc2d0(0xe3)]]===EXPIRED_TOKEN)return _0x37b966[_0x5322c6['qQrpY']]=resultStatus[_0x5bc2d0(0xf6)],null;else{if(_0x1fec33[_0x5322c6[_0x5bc2d0(0xf7)]]===0x194)return _0x37b966[_0x5bc2d0(0x8c)]=resultStatus[_0x5bc2d0(0xea)],FileHeader(null,null,null);else return _0x1fec33[_0x5bc2d0(0xc8)]===0x190?(_0x37b966[_0x5322c6[_0x5bc2d0(0x82)]]=resultStatus['RENEW_TOKEN'],null):(_0x37b966[_0x5322c6[_0x5bc2d0(0x82)]]=resultStatus[_0x5bc2d0(0x8f)],null);}}}_0x37b966[_0x5bc2d0(0x8c)]=resultStatus[_0x5bc2d0(0xd8)];let _0x1b5770=null;if(_0x52d563[_0x5bc2d0(0x7d)][_0x5322c6[_0x5bc2d0(0xd0)]]){const _0x693a3d=JSON[_0x5bc2d0(0x83)](_0x52d563[_0x5bc2d0(0x7d)][_0x5bc2d0(0xc5)]);_0x1b5770=_0x5322c6[_0x5bc2d0(0xf9)](EncryptionMetadata,_0x693a3d[_0x5322c6[_0x5bc2d0(0xfa)]][_0x5322c6['Juluz']],_0x693a3d[_0x5bc2d0(0x9d)],_0x52d563[_0x5bc2d0(0x7d)][_0x5322c6[_0x5bc2d0(0xf5)]]);}return _0x5322c6[_0x5bc2d0(0xf9)](FileHeader,_0x52d563[_0x5bc2d0(0x7d)][_0x5322c6[_0x5bc2d0(0xad)]],_0x52d563[_0x5bc2d0(0x8d)],_0x1b5770);},this[_0x471c0b(0xe4)]=async function(_0x2eb4ac,_0x408a41,_0x5c2657,_0x5d9673){const _0x4cc091=_0x471c0b,_0x2c988a=_0x1b8799[_0x4cc091(0xdb)](_0x2eb4ac);await this[_0x4cc091(0xbf)](_0x2c988a,_0x408a41,_0x5c2657,_0x5d9673);},this[_0x471c0b(0xbf)]=async function(_0x16ab61,_0x7031a4,_0x1396ff){const _0x26a45d=_0x471c0b,_0x239c1c={'cWzKq':_0x5322c6[_0x26a45d(0xac)],'cudfe':_0x5322c6['qQrpY']},_0x553271={'sfcdigest':_0x7031a4[_0x5322c6[_0x26a45d(0xc3)]]};_0x1396ff&&(_0x553271[_0x5322c6['EFAXJ']]=JSON[_0x26a45d(0xde)]({'EncryptionMode':_0x5322c6[_0x26a45d(0xc2)],'WrappedContentKey':{'KeyId':_0x5322c6[_0x26a45d(0xbe)],'EncryptedKey':_0x1396ff[_0x26a45d(0xd1)],'Algorithm':_0x26a45d(0xa6)},'EncryptionAgent':{'Protocol':_0x5322c6[_0x26a45d(0xa4)],'EncryptionAlgorithm':'AES_CBC_128'},'ContentEncryptionIV':_0x1396ff['iv'],'KeyWrappingMetadata':{'EncryptionLibrary':'Java\x205.3.0'}}),_0x553271[_0x26a45d(0xf4)]=_0x1396ff[_0x26a45d(0xb4)]);const _0x13f0d3=_0x7031a4[_0x5322c6['nRIfs']],_0x53e956=this[_0x26a45d(0x7e)](_0x13f0d3),_0x3501d7=this['extractContainerNameAndPath'](_0x13f0d3[_0x5322c6['PJlYm']]),_0x1a0bff=_0x3501d7[_0x26a45d(0xd7)]+_0x7031a4[_0x5322c6[_0x26a45d(0xe9)]],_0x3738a5=_0x53e956['getContainerClient'](_0x3501d7[_0x26a45d(0xc4)]),_0xb1aa79=_0x3738a5['getBlockBlobClient'](_0x1a0bff);try{await _0xb1aa79['upload'](_0x16ab61,_0x16ab61['length'],{'metadata':_0x553271,'blobHTTPHeaders':{'blobContentEncoding':_0x26a45d(0xd9),'blobContentType':_0x26a45d(0xe2)}});}catch(_0x362707){if(_0x5322c6[_0x26a45d(0xda)](_0x362707[_0x5322c6[_0x26a45d(0xf7)]],0x193)&&_0x5322c6[_0x26a45d(0x77)](_0xc2409c,_0x362707)){if(_0x5322c6['tOVsg'](_0x26a45d(0x78),_0x5322c6[_0x26a45d(0xa9)])){_0x54403e[_0x239c1c[_0x26a45d(0xcd)]]=_0x47a486,_0x1ed534[_0x239c1c[_0x26a45d(0xc1)]]=_0x50dcd9[_0x26a45d(0xf6)];return;}else{_0x7031a4[_0x26a45d(0xcb)]=_0x362707,_0x7031a4[_0x26a45d(0x8c)]=resultStatus[_0x26a45d(0xf6)];return;}}else _0x7031a4['lastError']=_0x362707,_0x7031a4[_0x5322c6[_0x26a45d(0x82)]]=resultStatus[_0x26a45d(0xdf)];return;}_0x7031a4[_0x5322c6['zIMuH']]=_0x7031a4[_0x5322c6[_0x26a45d(0xee)]],_0x7031a4[_0x26a45d(0x8c)]=resultStatus['UPLOADED'];},this['nativeDownloadFile']=async function(_0x10d3d5,_0x263908){const _0x5c3c12=_0x471c0b,_0x4e6413=_0x10d3d5[_0x5322c6[_0x5c3c12(0xe1)]],_0x140e7e=this[_0x5c3c12(0x7e)](_0x4e6413),_0x2d5e24=this['extractContainerNameAndPath'](_0x4e6413[_0x5322c6['PJlYm']]),_0x442301=_0x5322c6[_0x5c3c12(0x9c)](_0x2d5e24[_0x5c3c12(0xd7)],_0x10d3d5[_0x5322c6['fbNIZ']]),_0x3b1479=_0x140e7e['getContainerClient'](_0x2d5e24[_0x5c3c12(0xc4)]),_0x473e50=_0x3b1479[_0x5c3c12(0xaf)](_0x442301);try{const _0x48eb8b=await _0x473e50[_0x5c3c12(0xce)](0x0),_0x2a28c2=_0x48eb8b['readableStreamBody'];await new Promise((_0xaab726,_0x1bf18b)=>{const _0x3881a9=_0x5c3c12,_0x571a97=_0x1b8799[_0x3881a9(0x8e)](_0x263908);_0x2a28c2['on'](_0x3881a9(0xb3),_0xc2e902=>{const _0x3907bc=_0x3881a9;_0x571a97[_0x3907bc(0xd3)](_0xc2e902);}),_0x2a28c2['on']('end',()=>{const _0x2275bf=_0x3881a9;_0x571a97[_0x2275bf(0xc9)](_0xaab726);}),_0x2a28c2['on'](_0x5322c6['HfBEk'],_0x1bf18b);});}catch(_0x4fb124){if(_0x5322c6[_0x5c3c12(0xb1)](_0x4fb124[_0x5322c6['HNDSa']],0x193)&&_0x5322c6[_0x5c3c12(0x9e)](_0xc2409c,_0x4fb124)){if(_0x5322c6['aVlCB'](_0x5c3c12(0x96),_0x5322c6[_0x5c3c12(0xa7)])){if(_0x2204ad[_0x5c3c12(0xc8)]===0x193&&_0x5322c6[_0x5c3c12(0x9f)](_0x321e60,_0xacea8e)){_0x542895[_0x5322c6['EcRFx']]=_0x45cc1f,_0x251d0d[_0x5322c6[_0x5c3c12(0x82)]]=_0x419760['RENEW_TOKEN'];return;}else _0x586906['lastError']=_0x22dc70,_0x1e1fce[_0x5c3c12(0x8c)]=_0x24825e[_0x5c3c12(0xdf)];return;}else{_0x10d3d5['lastError']=_0x4fb124,_0x10d3d5[_0x5c3c12(0x8c)]=resultStatus['RENEW_TOKEN'];return;}}else _0x10d3d5[_0x5322c6[_0x5c3c12(0xac)]]=_0x4fb124,_0x10d3d5[_0x5c3c12(0x8c)]=resultStatus[_0x5c3c12(0xdf)];return;}_0x10d3d5['resultStatus']=resultStatus[_0x5c3c12(0x95)];};function _0xc2409c(_0x3e3a6e){const _0x48d58e=_0x471c0b;if(_0x3e3a6e['statusCode']!==0x193)return![];const _0x525908=_0x3e3a6e[_0x48d58e(0x7b)]();return _0x525908[_0x48d58e(0x85)](_0x5322c6[_0x48d58e(0x87)])||_0x525908['includes'](_0x48d58e(0x79));}}module['exports']=AzureUtil;