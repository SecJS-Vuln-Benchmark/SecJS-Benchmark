const _0x18a2d7=_0x4694;function _0x2b3b(){const _0x766bbd=['[PodcastController]\x20removeEpisode\x20episode\x20','3478416UCbefp','WAdFl','OZrOF','\x22:\x20','episodes','SVTEG','return\x20new\x20Date();','JohNc','PATCH','Zvasi','findAll','findEpisode','ILqKe','cronManager','catch','libraryItemModel','POST','IRMxk','loRTV','IKKTz','getOldById','clearDownloadQueue','JUOkL','podcast','../libs/fsExtra','BXatY','itLCk','[PodcastController]\x20Non-admin\x20user\x20\x22','return\x20Object.keys({a:1});','userId','[PodcastController]\x20Non-admin\x20user\x20attempted\x20to\x20download\x20episodes','playlistMediaItemModel','2087404nGVTwu','GruPw','VsxoD','playlistModel','emitter','[PodcastController]\x20Podcast\x20already\x20exists\x20at\x20path\x20\x22','Podcast\x20has\x20no\x20rss\x20feed\x20url','cRmvF','ctimeMs','yzXBb','[PodcastController]\x20Podcast\x20created\x20now\x20starting\x20','name','path','send','iDoRE','1547802LrAyCK','[PodcastController]\x20User\x20attempted\x20to\x20delete\x20without\x20permission','[PodcastController]\x20Failed\x20to\x20hard\x20delete\x20episode\x20file\x20at\x20\x22','params','username','QTwIX','cYCob','502849sWpffa','folders','autoDownloadEpisodes','[PodcastController]\x20findEpisode:\x20Podcast\x20has\x20no\x20feed\x20url','checkHasEpisode','Podcast\x20already\x20exists','remove','GRrSt','Lydri','../utils/podcastUtils','clientEmitter','libraryItem','SZGmq','Podcast\x20RSS\x20feed\x20request\x20failed\x20or\x20invalid\x20response\x20data','LlKrP','sendStatus','\x20media\x20progress\x20for\x20episode\x20','KsyjC','[PodcastController]\x20User\x20attempted\x20to\x20update\x20without\x20permission','item_updated','caMpl','wsKng','removeLibraryFile','[PodcastController]\x20Non-admin\x20user\x20attempted\x20to\x20check/download\x20episodes','tBbiD','AxyOf','BciKx','[PodcastController]\x20Download\x20cover\x20error\x20from\x20\x22','safe','then','getEpisodeDownloads','podcastManager','media','checkAndDownloadNewEpisodes','ZJvLW','map','length','Podcast\x20does\x20not\x20have\x20an\x20RSS\x20feed\x20URL','\x22\x20attempted\x20to\x20create\x20podcast','Amapf','playlist','hard','LXzqZ','console.log(\x22timer\x22);','slice','downloadPodcastEpisodes','Library\x20not\x20found','feedUrl','body','LZjVX','XVcmt','Folder\x20not\x20found','updateEpisode','metadata','removeEpisode','warn','checkNewEpisodes','user','getFeedsFromOPMLText','getEpisode','rssFeed','CjcWz','2463258CcXPbO','kzHpD','info','query','coverPath','\x22\x20attempted\x20to\x20get\x20podcast\x20feed','libraryId','imageUrl','mGMYa','fWOlI','title','status','downloadCoverFromUrl','updateLibraryItem','../utils/fileUtils','getEpisodeDownloadsInQueue','limit','[PodcastController]\x20checkNewEpisodes\x20no\x20feed\x20url\x20for\x20item\x20','opmlText','log','quickMatchEpisodes','getOldJsonExpanded','cover','DELETE','../managers/CoverManager','playlistMediaItems','method','count','canDelete','YEXNE','middleware','destroy','8851480QbWyVi','error','\x22\x20attempted\x20to\x20get\x20feeds\x20from\x20opml','find','toJSON','createLibraryItem','PbsDY','episodesToDownload','override','xQJJR','isPodcast','\x20episode\x20downloads','audioFile','eGQwp','exports','tiHGa','../Database','EcESk','cGjsu','fullPath','\x22\x20has\x20no\x20more\x20items\x20-\x20removing\x20it','wJELV','toJSONExpanded','PFrIs','[PodcastController]\x20Removed\x20','replace','setData','item_added','[PodcastController]\x20Create:\x20Library\x20not\x20found\x20\x22','updateClock();','428330gUvUuJ','create','[PodcastController]\x20Hard\x20deleted\x20episode\x20file\x20at\x20\x22','var\x20x\x20=\x2042;\x20return\x20x;','Bmhou','[PodcastController]\x20Failed\x20to\x20ensure\x20podcast\x20dir\x20\x22','IfuzF','../SocketAuthority','episodeId','canUpdate','playlist_removed','ino','gHEsy','isAdminOrUp','QAroB','folderId','WVnVa','2lTutAQ','[PodcastController]\x20Create:\x20Folder\x20not\x20found\x20\x22','json','getPodcastFeed','aoqAW'];_0x2b3b=function(){return _0x766bbd;};return _0x2b3b();}(function(_0x282faf,_0x13e841){const _0x428d2d=_0x4694,_0x119026=_0x282faf();while(!![]){try{const _0x1ca03b=parseInt(_0x428d2d(0x195))/0x1*(parseInt(_0x428d2d(0x159))/0x2)+parseInt(_0x428d2d(0x18e))/0x3+parseInt(_0x428d2d(0x17f))/0x4+parseInt(_0x428d2d(0x148))/0x5+-parseInt(_0x428d2d(0x15f))/0x6+parseInt(_0x428d2d(0x10a))/0x7+-parseInt(_0x428d2d(0x12a))/0x8;if(_0x1ca03b===_0x13e841)break;else _0x119026['push'](_0x119026['shift']());}catch(_0x3c19f4){_0x119026['push'](_0x119026['shift']());}}}(_0x2b3b,0x474b7));const Logger=require('../Logger'),SocketAuthority=require(_0x18a2d7(0x14f)),Database=require(_0x18a2d7(0x13a)),fs=require(_0x18a2d7(0x177)),{getPodcastFeed,findMatchingEpisodes}=require(_0x18a2d7(0x19e)),{getFileTimestampsWithIno,filePathToPOSIX}=require(_0x18a2d7(0x118)),{validateUrl}=require('../utils/index'),Scanner=require('../scanner/Scanner'),CoverManager=require(_0x18a2d7(0x122)),LibraryItem=require('../objects/LibraryItem');function _0x4694(_0x1810e4,_0x3cb853){const _0x2b3bf8=_0x2b3b();return _0x4694=function(_0x469492,_0x2480a7){_0x469492=_0x469492-0xf6;let _0x2f2fcd=_0x2b3bf8[_0x469492];return _0x2f2fcd;},_0x4694(_0x1810e4,_0x3cb853);}class PodcastController{async[_0x18a2d7(0x149)](_0x5cde57,_0x489546){const _0x39bc93=_0x18a2d7,_0xbae1da={'GruPw':function(_0x269e58,_0x57b816){return _0x269e58(_0x57b816);},'xQJJR':_0x39bc93(0x17b),'WAdFl':_0x39bc93(0x1a2),'fWOlI':_0x39bc93(0x1aa),'UBXFz':_0x39bc93(0x1ad),'HHOBn':_0x39bc93(0x147),'PFrIs':function(_0x43a851,_0x4192b1,_0x4168ea){return _0x43a851(_0x4192b1,_0x4168ea);},'eGQwp':function(_0x582be6,_0x41df8d){return _0x582be6===_0x41df8d;},'WVnVa':'var\x20x\x20=\x2042;\x20return\x20x;','dbZti':function(_0x37c168,_0x375918,_0x50a903){return _0x37c168(_0x375918,_0x50a903);},'JUOkL':function(_0x4f0859,_0x37ec61){return _0x4f0859(_0x37ec61);},'caMpl':_0x39bc93(0x19a),'BciKx':'Invalid\x20podcast\x20path','LZjVX':_0x39bc93(0x176),'ZuFPt':_0x39bc93(0x145)};if(!_0x5cde57[_0x39bc93(0x105)][_0x39bc93(0x155)])return Logger[_0x39bc93(0x12b)](_0x39bc93(0x17a)+_0x5cde57['user']['username']+_0x39bc93(0x1bb)),_0xbae1da[_0x39bc93(0x141)](setInterval,_0x39bc93(0x147),0x3e8),_0x489546[_0x39bc93(0x1a4)](0x193);const _0x365e51=_0x5cde57[_0x39bc93(0xfc)],_0x198839=await Database['libraryModel'][_0x39bc93(0x173)](_0x365e51[_0x39bc93(0x110)]);if(!_0x198839)return _0xbae1da[_0x39bc93(0x137)](_0x39bc93(0x14e),_0x39bc93(0x112))?(_0xbae1da[_0x39bc93(0x180)](_0x145a05,_0xbae1da[_0x39bc93(0x133)])(),_0x1c339c[_0x39bc93(0x115)](0x194)[_0x39bc93(0x18c)](_0xbae1da[_0x39bc93(0x160)])):(Logger[_0x39bc93(0x12b)](_0x39bc93(0x146)+_0x365e51[_0x39bc93(0x110)]+'\x22'),new Function(_0xbae1da[_0x39bc93(0x158)])(),_0x489546[_0x39bc93(0x115)](0x194)['send'](_0x39bc93(0xfa)));const _0xaf9e00=_0x198839[_0x39bc93(0x196)]['find'](_0x4f813e=>_0x4f813e['id']===_0x365e51[_0x39bc93(0x157)]);if(!_0xaf9e00)return Logger[_0x39bc93(0x12b)](_0x39bc93(0x15a)+_0x365e51[_0x39bc93(0x157)]+'\x22'),_0xbae1da['dbZti'](setInterval,'updateClock();',0x3e8),_0x489546[_0x39bc93(0x115)](0x194)[_0x39bc93(0x18c)](_0x39bc93(0xff));const _0x55239b=_0xbae1da[_0x39bc93(0x175)](filePathToPOSIX,_0x365e51[_0x39bc93(0x18b)]),_0x57279d=await Database[_0x39bc93(0x16e)][_0x39bc93(0x125)]({'where':{'path':_0x55239b}})>0x0;if(_0x57279d)return Logger['error'](_0x39bc93(0x184)+_0x55239b+'\x22'),_0xbae1da[_0x39bc93(0x180)](Function,_0x39bc93(0x165))(),_0x489546[_0x39bc93(0x115)](0x190)['send'](_0xbae1da[_0x39bc93(0x1a9)]);const _0x839073=await fs['ensureDir'](_0x55239b)['then'](()=>!![])[_0x39bc93(0x16d)](_0x2df664=>{const _0x16f420=_0x39bc93;if(_0xbae1da[_0x16f420(0x113)]===_0xbae1da['UBXFz'])_0x2daf83[_0x16f420(0x12b)](_0x16f420(0x1b0)+_0x2c7c92[_0x16f420(0x1b5)][_0x16f420(0x101)][_0x16f420(0x111)]+_0x16f420(0x162)+_0x195730[_0x16f420(0x12b)]);else return Logger[_0x16f420(0x12b)](_0x16f420(0x14d)+_0x55239b+'\x22',_0x2df664),setInterval(_0xbae1da['HHOBn'],0x3e8),![];});eval('1 + 1;');if(!_0x839073)return _0x489546[_0x39bc93(0x115)](0x190)[_0x39bc93(0x18c)](_0xbae1da[_0x39bc93(0x1af)]);const _0xb6e163=await getFileTimestampsWithIno(_0x55239b);let _0x178862=_0x365e51['path'][_0x39bc93(0x143)](_0xaf9e00[_0x39bc93(0x13d)],'');if(_0x178862['startsWith']('/'))_0x178862=_0x178862[_0x39bc93(0xf8)](0x1);const _0xaebc85={'path':_0x55239b,'relPath':_0x178862,'folderId':_0x365e51[_0x39bc93(0x157)],'libraryId':_0x365e51[_0x39bc93(0x110)],'ino':_0xb6e163[_0x39bc93(0x153)],'mtimeMs':_0xb6e163['mtimeMs']||0x0,'ctimeMs':_0xb6e163[_0x39bc93(0x187)]||0x0,'birthtimeMs':_0xb6e163['birthtimeMs']||0x0,'media':_0x365e51['media']},_0x199088=new LibraryItem();_0x199088[_0x39bc93(0x144)](_0xbae1da[_0x39bc93(0xfd)],_0xaebc85);if(_0x365e51[_0x39bc93(0x1b5)][_0x39bc93(0x101)][_0x39bc93(0x111)]){const _0x150ee2=await CoverManager[_0x39bc93(0x116)](_0x199088,_0x365e51[_0x39bc93(0x1b5)][_0x39bc93(0x101)][_0x39bc93(0x111)],!![]);if(_0x150ee2){if(_0x150ee2['error'])Logger[_0x39bc93(0x12b)](_0x39bc93(0x1b0)+_0x365e51[_0x39bc93(0x1b5)][_0x39bc93(0x101)][_0x39bc93(0x111)]+_0x39bc93(0x162)+_0x150ee2['error']);else _0x150ee2[_0x39bc93(0x120)]&&(_0x199088[_0x39bc93(0x1b5)][_0x39bc93(0x10e)]=_0x150ee2[_0x39bc93(0x120)]);}}await Database[_0x39bc93(0x12f)](_0x199088),SocketAuthority[_0x39bc93(0x183)](_0xbae1da['ZuFPt'],_0x199088['toJSONExpanded']()),_0x489546['json'](_0x199088[_0x39bc93(0x140)]()),_0x365e51[_0x39bc93(0x131)]?.[_0x39bc93(0x1b9)]&&(Logger[_0x39bc93(0x10c)](_0x39bc93(0x189)+_0x365e51[_0x39bc93(0x131)][_0x39bc93(0x1b9)]+_0x39bc93(0x135)),this[_0x39bc93(0x1b4)]['downloadPodcastEpisodes'](_0x199088,_0x365e51['episodesToDownload'])),_0x199088['media'][_0x39bc93(0x197)]&&this[_0x39bc93(0x16c)]['checkUpdatePodcastCron'](_0x199088);}async[_0x18a2d7(0x15c)](_0x39608a,_0x44acbc){const _0x2a5515=_0x18a2d7,_0x670866={'ILqKe':function(_0x50c85d,_0x574c25){return _0x50c85d(_0x574c25);},'tiHGa':_0x2a5515(0x14b),'avKbv':_0x2a5515(0x17b)};if(!_0x39608a[_0x2a5515(0x105)][_0x2a5515(0x155)])return Logger['error']('[PodcastController]\x20Non-admin\x20user\x20\x22'+_0x39608a[_0x2a5515(0x105)][_0x2a5515(0x192)]+_0x2a5515(0x10f)),eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x44acbc[_0x2a5515(0x1a4)](0x193);const _0x273f7f=_0x670866[_0x2a5515(0x16b)](validateUrl,_0x39608a[_0x2a5515(0xfc)][_0x2a5515(0x108)]);if(!_0x273f7f)return new Function(_0x670866[_0x2a5515(0x139)])(),_0x44acbc[_0x2a5515(0x115)](0x190)[_0x2a5515(0x18c)]('Invalid\x20request\x20body.\x20\x22rssFeed\x22\x20must\x20be\x20a\x20valid\x20URL');const _0x355f8e=await getPodcastFeed(_0x273f7f);if(!_0x355f8e)return Function(_0x670866['avKbv'])(),_0x44acbc[_0x2a5515(0x115)](0x194)[_0x2a5515(0x18c)]('Podcast\x20RSS\x20feed\x20request\x20failed\x20or\x20invalid\x20response\x20data');_0x44acbc[_0x2a5515(0x15b)]({'podcast':_0x355f8e});}async[_0x18a2d7(0x106)](_0x5615dd,_0x3342ad){const _0x7072bb=_0x18a2d7,_0x36f552={'ppWRd':function(_0x4e8758,_0x546d1a){return _0x4e8758===_0x546d1a;},'Lrgnq':_0x7072bb(0x1a3),'QTwIX':_0x7072bb(0x18d),'LXzqZ':function(_0x3eae4f,_0x27d199){return _0x3eae4f+_0x27d199;},'rjAMU':function(_0x3660dc,_0x425e74){return _0x3660dc===_0x425e74;},'cGjsu':_0x7072bb(0x186),'BXatY':function(_0x59d3e6,_0x70720c,_0x5a5f5a){return _0x59d3e6(_0x70720c,_0x5a5f5a);},'Bmhou':function(_0x6f3ce2,_0xdd711b,_0x4fbc7b){return _0x6f3ce2(_0xdd711b,_0x4fbc7b);}};if(!_0x5615dd[_0x7072bb(0x105)]['isAdminOrUp']){if(_0x36f552['rjAMU']('cRmvF',_0x36f552[_0x7072bb(0x13c)]))return Logger[_0x7072bb(0x12b)](_0x7072bb(0x17a)+_0x5615dd[_0x7072bb(0x105)][_0x7072bb(0x192)]+_0x7072bb(0x12c)),_0x36f552[_0x7072bb(0x178)](setTimeout,function(){const _0x56f036=_0x7072bb;_0x36f552['ppWRd'](_0x36f552['Lrgnq'],_0x36f552[_0x56f036(0x193)])?0x1+0x1:console[_0x56f036(0x11d)]('safe');},0x64),_0x3342ad[_0x7072bb(0x1a4)](0x193);else oqkICr[_0x7072bb(0xf6)](0x1,0x1);}if(!_0x5615dd[_0x7072bb(0xfc)][_0x7072bb(0x11c)])return _0x36f552[_0x7072bb(0x14c)](setTimeout,function(){const _0x5d3814=_0x7072bb;console['log'](_0x5d3814(0x1b1));},0x64),_0x3342ad[_0x7072bb(0x1a4)](0x190);const _0x3eb222=await this[_0x7072bb(0x1b4)]['getOPMLFeeds'](_0x5615dd[_0x7072bb(0xfc)][_0x7072bb(0x11c)]);_0x3342ad[_0x7072bb(0x15b)](_0x3eb222);}async[_0x18a2d7(0x104)](_0x13e4cc,_0x1ec679){const _0xebca6a=_0x18a2d7,_0x1759a7={'KsyjC':function(_0x1fc04c,_0x328c72,_0x418304){return _0x1fc04c(_0x328c72,_0x418304);},'kzHpD':'updateClock();','iOiGd':_0xebca6a(0x185)};if(!_0x13e4cc['user'][_0xebca6a(0x155)])return Logger[_0xebca6a(0x12b)](_0xebca6a(0x1ac),_0x13e4cc['user']),Function(_0xebca6a(0x165))(),_0x1ec679['sendStatus'](0x193);var _0x538ac7=_0x13e4cc[_0xebca6a(0x1a0)];if(!_0x538ac7[_0xebca6a(0x1b5)][_0xebca6a(0x101)][_0xebca6a(0xfb)])return Logger[_0xebca6a(0x12b)](_0xebca6a(0x11b)+_0x538ac7['id']),_0x1759a7[_0xebca6a(0x1a6)](setInterval,_0x1759a7[_0xebca6a(0x10b)],0x3e8),_0x1ec679[_0xebca6a(0x115)](0x1f4)[_0xebca6a(0x18c)](_0x1759a7['iOiGd']);const _0x12e5d1=!isNaN(_0x13e4cc['query'][_0xebca6a(0x11a)])?Number(_0x13e4cc[_0xebca6a(0x10d)]['limit']):0x3;var _0x1b0dd1=await this[_0xebca6a(0x1b4)][_0xebca6a(0x1b6)](_0x538ac7,_0x12e5d1);_0x1ec679['json']({'episodes':_0x1b0dd1||[]});}['clearEpisodeDownloadQueue'](_0x3ec481,_0x75acdf){const _0x3cd887=_0x18a2d7;if(!_0x3ec481[_0x3cd887(0x105)][_0x3cd887(0x155)])return Logger[_0x3cd887(0x12b)]('[PodcastController]\x20Non-admin\x20user\x20attempting\x20to\x20clear\x20download\x20queue\x20\x22'+_0x3ec481['user'][_0x3cd887(0x192)]+'\x22'),eval('Math[\'PI\'] * 2;'),_0x75acdf[_0x3cd887(0x1a4)](0x193);this[_0x3cd887(0x1b4)][_0x3cd887(0x174)](_0x3ec481[_0x3cd887(0x191)]['id']),_0x75acdf['sendStatus'](0xc8);}[_0x18a2d7(0x1b3)](_0x4f0234,_0x11f18e){const _0x199d37=_0x18a2d7;var _0x1a5acf=_0x4f0234[_0x199d37(0x1a0)],_0x1b7812=this[_0x199d37(0x1b4)][_0x199d37(0x119)](_0x1a5acf['id']);_0x11f18e['json']({'downloads':_0x1b7812[_0x199d37(0x1b8)](_0x218484=>_0x218484['toJSONForClient']())});}async[_0x18a2d7(0x16a)](_0x1d0be4,_0x388d41){const _0xe888b0=_0x18a2d7,_0x32e584={'gHEsy':function(_0x1c0056,_0x240378){return _0x1c0056*_0x240378;}},_0x3baa19=_0x1d0be4[_0xe888b0(0x1a0)]['media'][_0xe888b0(0x101)]['feedUrl'];if(!_0x3baa19)return Logger['error'](_0xe888b0(0x198)),setTimeout(function(){const _0x1a6b8b=_0xe888b0;console[_0x1a6b8b(0x11d)](_0x1a6b8b(0x1b1));},0x64),_0x388d41[_0xe888b0(0x115)](0x1f4)[_0xe888b0(0x18c)](_0xe888b0(0x1ba));var _0x3f33da=_0x1d0be4[_0xe888b0(0x10d)][_0xe888b0(0x114)];if(!_0x3f33da)return eval('const _0x22525d = _0xe888b0;_0x32e584[_0x22525d(340)](Math[\'PI\'], 2);'),_0x388d41['sendStatus'](0x1f4);const _0x46ebd4=await findMatchingEpisodes(_0x3baa19,_0x3f33da);_0x388d41[_0xe888b0(0x15b)]({'episodes':_0x46ebd4||[]});}async['downloadEpisodes'](_0x3ab1b4,_0x2cafab){const _0x523164=_0x18a2d7,_0x40179a={'Amapf':_0x523164(0x17b),'PbsDY':'updateClock();'};if(!_0x3ab1b4[_0x523164(0x105)]['isAdminOrUp'])return Logger[_0x523164(0x12b)](_0x523164(0x17d),_0x3ab1b4[_0x523164(0x105)]),Function(_0x40179a[_0x523164(0x1bc)])(),_0x2cafab['sendStatus'](0x193);const _0x569956=_0x3ab1b4['libraryItem'],_0x4f9b8e=_0x3ab1b4[_0x523164(0xfc)];if(!_0x4f9b8e?.['length'])return setInterval(_0x40179a[_0x523164(0x130)],0x3e8),_0x2cafab[_0x523164(0x1a4)](0x190);this[_0x523164(0x1b4)][_0x523164(0xf9)](_0x569956,_0x4f9b8e),_0x2cafab[_0x523164(0x1a4)](0xc8);}async[_0x18a2d7(0x11e)](_0x4695c5,_0x1dd921){const _0xbad2f6=_0x18a2d7,_0x24b3d4={'wJELV':'console.log(\x22timer\x22);','yzXBb':function(_0x2ae1d3,_0x143d84){return _0x2ae1d3===_0x143d84;}};if(!_0x4695c5[_0xbad2f6(0x105)][_0xbad2f6(0x155)])return Logger[_0xbad2f6(0x12b)]('[PodcastController]\x20Non-admin\x20user\x20attempted\x20to\x20download\x20episodes',_0x4695c5[_0xbad2f6(0x105)]),setTimeout(_0x24b3d4[_0xbad2f6(0x13f)],0x3e8),_0x1dd921['sendStatus'](0x193);const _0x3f65d0=_0x24b3d4[_0xbad2f6(0x188)](_0x4695c5[_0xbad2f6(0x10d)][_0xbad2f6(0x132)],'1'),_0x22a5d8=await Scanner['quickMatchPodcastEpisodes'](_0x4695c5[_0xbad2f6(0x1a0)],{'overrideDetails':_0x3f65d0});_0x22a5d8&&(await Database[_0xbad2f6(0x117)](_0x4695c5[_0xbad2f6(0x1a0)]),SocketAuthority[_0xbad2f6(0x183)](_0xbad2f6(0x1a8),_0x4695c5[_0xbad2f6(0x1a0)][_0xbad2f6(0x140)]())),_0x1dd921[_0xbad2f6(0x15b)]({'numEpisodesUpdated':_0x22a5d8});}async[_0x18a2d7(0x100)](_0x4feb1c,_0x55f8c3){const _0x316443=_0x18a2d7,_0x4485b0={'Frske':function(_0x2e1a8c,_0x487924){return _0x2e1a8c!==_0x487924;},'CjcWz':_0x316443(0x161),'YEXNE':function(_0x29578e,_0x4090de,_0x4f93d3){return _0x29578e(_0x4090de,_0x4f93d3);},'IRMxk':_0x316443(0xf7),'Zvasi':'item_updated'},_0x2c3a6d=_0x4feb1c[_0x316443(0x1a0)];var _0x2dc63c=_0x4feb1c[_0x316443(0x191)][_0x316443(0x150)];if(!_0x2c3a6d[_0x316443(0x1b5)][_0x316443(0x199)](_0x2dc63c))return _0x4485b0['Frske'](_0x4485b0[_0x316443(0x109)],_0x316443(0x166))?(_0x4485b0[_0x316443(0x127)](setTimeout,_0x4485b0[_0x316443(0x170)],0x3e8),_0x55f8c3[_0x316443(0x115)](0x194)[_0x316443(0x18c)]('Episode\x20not\x20found')):(_0x3a478d[_0x316443(0x12b)](_0x316443(0x17d),_0x5b0b90[_0x316443(0x105)]),_0xe9298e(_0x316443(0xf7),0x3e8),_0x33bac3[_0x316443(0x1a4)](0x193));_0x2c3a6d['media'][_0x316443(0x100)](_0x2dc63c,_0x4feb1c['body'])&&(await Database[_0x316443(0x117)](_0x2c3a6d),SocketAuthority[_0x316443(0x183)](_0x4485b0[_0x316443(0x168)],_0x2c3a6d[_0x316443(0x140)]())),_0x55f8c3[_0x316443(0x15b)](_0x2c3a6d['toJSONExpanded']());}async[_0x18a2d7(0x107)](_0x479bd1,_0x2e99b3){const _0x7f96e3=_0x18a2d7,_0x468969={'XVcmt':function(_0x161b90,_0x5cfb9f,_0x5bdfe8){return _0x161b90(_0x5cfb9f,_0x5bdfe8);}},_0x29cd4c=_0x479bd1[_0x7f96e3(0x191)][_0x7f96e3(0x150)],_0x4a509b=_0x479bd1['libraryItem'],_0x2b8736=_0x4a509b['media']['episodes']['find'](_0x1e4948=>_0x1e4948['id']===_0x29cd4c);if(!_0x2b8736)return Logger['error']('[PodcastController]\x20getEpisode\x20episode\x20'+_0x29cd4c+'\x20not\x20found\x20for\x20item\x20'+_0x4a509b['id']),_0x468969[_0x7f96e3(0xfe)](setTimeout,function(){const _0x46684a=_0x7f96e3;console[_0x46684a(0x11d)](_0x46684a(0x1b1));},0x64),_0x2e99b3[_0x7f96e3(0x1a4)](0x194);_0x2e99b3[_0x7f96e3(0x15b)](_0x2b8736);}async['removeEpisode'](_0x508a95,_0x582f16){const _0x414f91=_0x18a2d7,_0x5b0ac1={'ZJvLW':_0x414f91(0x1b1),'Lydri':'Episode\x20not\x20found','EcESk':_0x414f91(0x19c),'cYCob':function(_0x4b079b,_0x2d3096){return _0x4b079b===_0x2d3096;},'SVTEG':function(_0x3a5723,_0x5692aa){return _0x3a5723===_0x5692aa;},'qMyGm':_0x414f91(0x181),'rYjfV':_0x414f91(0x1a1),'lEIAF':'playlist_updated'},_0x5e8fe9=_0x508a95[_0x414f91(0x191)][_0x414f91(0x150)],_0x3d9378=_0x508a95[_0x414f91(0x1a0)],_0x5f4514=_0x5b0ac1[_0x414f91(0x194)](_0x508a95[_0x414f91(0x10d)][_0x414f91(0x1be)],'1'),_0x1d9b99=_0x3d9378[_0x414f91(0x1b5)][_0x414f91(0x163)][_0x414f91(0x12d)](_0x1075cf=>_0x1075cf['id']===_0x5e8fe9);if(!_0x1d9b99){if(_0x5b0ac1[_0x414f91(0x164)]('VsxoD',_0x5b0ac1['qMyGm']))return Logger[_0x414f91(0x12b)](_0x414f91(0x15e)+_0x5e8fe9+'\x20not\x20found\x20for\x20item\x20'+_0x3d9378['id']),eval('1 + 1;'),_0x582f16[_0x414f91(0x1a4)](0x194);else _0xdc08d1[_0x414f91(0x11d)](_0x5b0ac1[_0x414f91(0x1b7)]);}if(_0x5f4514){const _0xfdbe88=_0x1d9b99[_0x414f91(0x136)];await fs[_0x414f91(0x19b)](_0xfdbe88['metadata'][_0x414f91(0x18b)])[_0x414f91(0x1b2)](()=>{const _0x50843b=_0x414f91;if(_0x5b0ac1[_0x50843b(0x13b)]===_0x50843b(0x19c))Logger[_0x50843b(0x10c)](_0x50843b(0x14a)+_0xfdbe88[_0x50843b(0x101)][_0x50843b(0x18b)]+'\x22');else return _0x5b13f0('console.log(\x22timer\x22);',0x3e8),_0x34365a[_0x50843b(0x115)](0x194)[_0x50843b(0x18c)](_0x5b0ac1[_0x50843b(0x19d)]);})[_0x414f91(0x16d)](_0x102d1c=>{const _0x543132=_0x414f91;Logger[_0x543132(0x12b)](_0x543132(0x190)+_0xfdbe88[_0x543132(0x101)][_0x543132(0x18b)]+'\x22',_0x102d1c);});}const _0x4b3f4d=_0x3d9378[_0x414f91(0x1b5)][_0x414f91(0x102)](_0x5e8fe9);_0x4b3f4d?.['audioFile']&&_0x3d9378[_0x414f91(0x1ab)](_0x4b3f4d[_0x414f91(0x136)][_0x414f91(0x153)]);const _0x19b1b9=await Database['playlistMediaItemModel'][_0x414f91(0x169)]({'where':{'mediaItemId':_0x5e8fe9},'include':{'model':Database[_0x414f91(0x182)],'include':Database[_0x414f91(0x17e)]}});for(const _0x2d0a1e of _0x19b1b9){const _0x328282=_0x2d0a1e[_0x414f91(0x1bd)][_0x414f91(0x123)][_0x414f91(0x1b9)]-0x1;if(!_0x328282){if(_0x414f91(0x156)!==_0x5b0ac1['rYjfV']){Logger[_0x414f91(0x10c)]('[PodcastController]\x20Playlist\x20\x22'+_0x2d0a1e['playlist'][_0x414f91(0x18a)]+_0x414f91(0x13e));const _0x11bf52=await _0x2d0a1e[_0x414f91(0x1bd)][_0x414f91(0x11f)]();SocketAuthority[_0x414f91(0x19f)](_0x2d0a1e[_0x414f91(0x1bd)][_0x414f91(0x17c)],_0x414f91(0x152),_0x11bf52),await _0x2d0a1e['playlist'][_0x414f91(0x129)]();}else{if(!_0x3575ee['user']['isAdminOrUp'])return _0x16b528[_0x414f91(0x12b)]('[PodcastController]\x20Non-admin\x20user\x20attempting\x20to\x20clear\x20download\x20queue\x20\x22'+_0x502ee7[_0x414f91(0x105)][_0x414f91(0x192)]+'\x22'),eval('_0x817cbb[\'PI\'] * 2;'),_0x317be4[_0x414f91(0x1a4)](0x193);this[_0x414f91(0x1b4)][_0x414f91(0x174)](_0x203f5b['params']['id']),_0x4c3b0b[_0x414f91(0x1a4)](0xc8);}}else{await _0x2d0a1e[_0x414f91(0x129)]();const _0x43e666=await _0x2d0a1e[_0x414f91(0x1bd)]['getOldJsonExpanded']();SocketAuthority[_0x414f91(0x19f)](_0x2d0a1e[_0x414f91(0x1bd)]['userId'],_0x5b0ac1['lEIAF'],_0x43e666);}}const _0x13d177=await Database['mediaProgressModel'][_0x414f91(0x129)]({'where':{'mediaItemId':_0x1d9b99['id']}});_0x13d177&&Logger[_0x414f91(0x10c)](_0x414f91(0x142)+_0x13d177+_0x414f91(0x1a5)+_0x1d9b99['id']),await Database[_0x414f91(0x117)](_0x3d9378),SocketAuthority[_0x414f91(0x183)](_0x414f91(0x1a8),_0x3d9378['toJSONExpanded']()),_0x582f16[_0x414f91(0x15b)](_0x3d9378[_0x414f91(0x12e)]());}async[_0x18a2d7(0x128)](_0x39322b,_0x1f7f05,_0x501c3f){const _0x3bc848=_0x18a2d7,_0x2915f1={'AxyOf':function(_0x17fe40,_0x10517a){return _0x17fe40+_0x10517a;},'UDNui':function(_0x26a8d1,_0x488161){return _0x26a8d1*_0x488161;},'sYdBi':function(_0xa48771,_0x4c3cc0,_0x451933){return _0xa48771(_0x4c3cc0,_0x451933);},'lGcnj':function(_0x4c74d3,_0x54b4a3){return _0x4c74d3==_0x54b4a3;},'aoqAW':_0x3bc848(0x167),'loRTV':_0x3bc848(0x16f),'IKKTz':_0x3bc848(0x1a7)},_0x14d91b=await Database['libraryItemModel']['getOldById'](_0x39322b['params']['id']);eval('1 + 1;');if(!_0x14d91b?.[_0x3bc848(0x1b5)])return _0x1f7f05[_0x3bc848(0x1a4)](0x194);if(!_0x14d91b[_0x3bc848(0x134)])return _0x2915f1['sYdBi'](setTimeout,function(){const _0x48f926=_0x3bc848;console[_0x48f926(0x11d)](_0x48f926(0x1b1));},0x64),_0x1f7f05[_0x3bc848(0x1a4)](0x1f4);if(!_0x39322b['user']['checkCanAccessLibraryItem'](_0x14d91b))return eval('const _0x384287 = _0x3bc848;_0x2915f1[_0x384287(430)](1, 1);'),_0x1f7f05[_0x3bc848(0x1a4)](0x193);if(_0x39322b[_0x3bc848(0x124)]==_0x3bc848(0x121)&&!_0x39322b['user'][_0x3bc848(0x126)]){if('LrvGs'===_0x3bc848(0x179))_0x5456c6[_0x3bc848(0x11d)](_0x3bc848(0x1b1));else return Logger[_0x3bc848(0x103)](_0x3bc848(0x18f),_0x39322b[_0x3bc848(0x105)][_0x3bc848(0x192)]),eval('_0x2915f1[\'UDNui\'](Math[\'PI\'], 2);'),_0x1f7f05[_0x3bc848(0x1a4)](0x193);}else{if((_0x2915f1['lGcnj'](_0x39322b[_0x3bc848(0x124)],_0x2915f1[_0x3bc848(0x15d)])||_0x39322b[_0x3bc848(0x124)]==_0x2915f1[_0x3bc848(0x171)])&&!_0x39322b[_0x3bc848(0x105)][_0x3bc848(0x151)])return Logger[_0x3bc848(0x103)](_0x2915f1[_0x3bc848(0x172)],_0x39322b[_0x3bc848(0x105)][_0x3bc848(0x192)]),setInterval(_0x3bc848(0x147),0x3e8),_0x1f7f05['sendStatus'](0x193);}_0x39322b['libraryItem']=_0x14d91b,_0x501c3f();}}module[_0x18a2d7(0x138)]=new PodcastController();