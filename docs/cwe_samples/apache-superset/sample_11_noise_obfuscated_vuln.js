const _0x422aea=_0x1ec7;function _0x1ec7(_0x2ef468,_0x3bf54a){const _0xd84e1b=_0xd84e();return _0x1ec7=function(_0x1ec76b,_0x2270b7){_0x1ec76b=_0x1ec76b-0x1d8;let _0x2453d9=_0xd84e1b[_0x1ec76b];return _0x2453d9;},_0x1ec7(_0x2ef468,_0x3bf54a);}(function(_0x66718b,_0x389e82){const _0x55cbfa=_0x1ec7,_0x2fdd24=_0x66718b();while(!![]){try{const _0x3efb41=-parseInt(_0x55cbfa(0x261))/0x1*(-parseInt(_0x55cbfa(0x1ec))/0x2)+parseInt(_0x55cbfa(0x203))/0x3+-parseInt(_0x55cbfa(0x2db))/0x4+parseInt(_0x55cbfa(0x2ba))/0x5*(-parseInt(_0x55cbfa(0x25a))/0x6)+parseInt(_0x55cbfa(0x28e))/0x7*(-parseInt(_0x55cbfa(0x2cd))/0x8)+-parseInt(_0x55cbfa(0x27f))/0x9+parseInt(_0x55cbfa(0x241))/0xa*(parseInt(_0x55cbfa(0x2ca))/0xb);if(_0x3efb41===_0x389e82)break;else _0x2fdd24['push'](_0x2fdd24['shift']());}catch(_0x4f1bb8){_0x2fdd24['push'](_0x2fdd24['shift']());}}}(_0xd84e,0x9bd1e));const Sequelize=require(_0x422aea(0x293)),Path=require(_0x422aea(0x211)),{Request,Response}=require(_0x422aea(0x2d8)),fs=require('../libs/fsExtra'),Logger=require(_0x422aea(0x230)),SocketAuthority=require(_0x422aea(0x1db)),Database=require(_0x422aea(0x2f9)),Watcher=require(_0x422aea(0x274)),libraryItemFilters=require(_0x422aea(0x2d7)),patternValidation=require(_0x422aea(0x288)),{isObject,getTitleIgnorePrefix}=require(_0x422aea(0x232)),{sanitizeFilename}=require(_0x422aea(0x25b)),TaskManager=require(_0x422aea(0x1df)),adminStats=require('../utils/queries/adminStats');class MiscController{constructor(){}async[_0x422aea(0x26b)](_0x4fc858,_0x3d9655){const _0x2f1c6e=_0x422aea,_0x2ce2aa={'OQCkG':function(_0x4cccd9,_0x5cfd86){return _0x4cccd9*_0x5cfd86;},'ukcDb':function(_0x1f0c37,_0x4b755f){return _0x1f0c37+_0x4b755f;},'gcKkl':'mWYVH','tvGPw':function(_0x49f25f,_0xd7b447){return _0x49f25f+_0xd7b447;},'Xjmvu':_0x2f1c6e(0x202),'PdEhE':'Invalid\x20request,\x20no\x20files','KftNB':_0x2f1c6e(0x214),'ndork':function(_0x38eeaf,_0x1abfd2){return _0x38eeaf===_0x1abfd2;}};if(!_0x4fc858['user'][_0x2f1c6e(0x218)])return Logger[_0x2f1c6e(0x240)]('User\x20\x22'+_0x4fc858[_0x2f1c6e(0x1ff)][_0x2f1c6e(0x1de)]+_0x2f1c6e(0x237)),eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x3d9655[_0x2f1c6e(0x2d1)](0x193);if(!_0x4fc858['files'])return Logger[_0x2f1c6e(0x23c)](_0x2ce2aa[_0x2f1c6e(0x1e2)]),setTimeout(_0x2ce2aa[_0x2f1c6e(0x234)],0x3e8),_0x3d9655['sendStatus'](0x190);const _0x52841c=Object['values'](_0x4fc858[_0x2f1c6e(0x25c)]),{title:_0x1a2aea,author:_0x5916a0,series:_0x634906,folder:_0x2dd7e4,library:_0x4d5358}=_0x4fc858['body'],_0x51a558=await Database[_0x2f1c6e(0x2c8)][_0x2f1c6e(0x28a)](_0x4d5358);if(!_0x51a558)return _0x2ce2aa['ndork'](_0x2f1c6e(0x2b1),_0x2f1c6e(0x2b1))?(eval('_0x2ce2aa[\'OQCkG\'](Math[\'PI\'], 2);'),_0x3d9655['status'](0x194)[_0x2f1c6e(0x2bf)]('Library\x20not\x20found\x20with\x20id\x20'+_0x4d5358)):(_0x45c3fb['error'](_0x2f1c6e(0x265)+_0x55576f[_0x2f1c6e(0x1ff)][_0x2f1c6e(0x1de)]+'\x22\x20attempted\x20to\x20renameTag'),eval('_0x2ce2aa[\'OQCkG\'](_0x1022aa[\'PI\'], 2);'),_0x54fce9['sendStatus'](0x193));const _0x57e5bf=_0x51a558[_0x2f1c6e(0x281)]['find'](_0x1edc69=>_0x1edc69['id']===_0x2dd7e4);if(!_0x57e5bf)return eval('const _0x569916 = _0x2f1c6e;_0x2ce2aa[_0x569916(490)](1, 1);'),_0x3d9655[_0x2f1c6e(0x20a)](0x194)[_0x2f1c6e(0x2bf)](_0x2f1c6e(0x212)+_0x2dd7e4+'\x20in\x20library\x20'+_0x51a558[_0x2f1c6e(0x2a9)]);if(!_0x52841c[_0x2f1c6e(0x2a4)]||!_0x1a2aea)return new AsyncFunction(_0x2f1c6e(0x1eb))(),_0x3d9655[_0x2f1c6e(0x20a)](0x1f4)[_0x2f1c6e(0x2bf)](_0x2f1c6e(0x26a));const _0x47126b=_0x51a558[_0x2f1c6e(0x22f)]?[_0x1a2aea]:[_0x5916a0,_0x634906,_0x1a2aea],_0x3c046a=_0x47126b['filter'](Boolean)[_0x2f1c6e(0x247)](_0x43ae64=>sanitizeFilename(_0x43ae64)),_0x3bf411=Path[_0x2f1c6e(0x244)](...[_0x57e5bf[_0x2f1c6e(0x211)],..._0x3c046a]);await fs[_0x2f1c6e(0x278)](_0x3bf411),Logger[_0x2f1c6e(0x215)](_0x2f1c6e(0x2c6)+_0x52841c[_0x2f1c6e(0x2a4)]+'\x20files\x20to',_0x3bf411);for(const _0x5eead8 of _0x52841c){const _0x29629a=Path[_0x2f1c6e(0x244)](_0x3bf411,sanitizeFilename(_0x5eead8[_0x2f1c6e(0x2a9)]));await _0x5eead8['mv'](_0x29629a)[_0x2f1c6e(0x205)](()=>{const _0x48633b=_0x2f1c6e;if(_0x48633b(0x242)===_0x2ce2aa[_0x48633b(0x2cb)])_0x47b553[_0x48633b(0x240)](_0x48633b(0x1e7)+_0x50d6ba,_0x235afe[_0x48633b(0x258)]),_0x254065[_0x48633b(0x20a)](0x190)[_0x48633b(0x2bf)](_0x32c4fb[_0x48633b(0x258)]);else return setInterval(_0x48633b(0x2c5),0x3e8),!![];})[_0x2f1c6e(0x255)](_0x4f177a=>{const _0x4d7320=_0x2f1c6e;return Logger[_0x4d7320(0x23c)](_0x2ce2aa[_0x4d7320(0x223)],_0x29629a,_0x4f177a),eval('const _0x3fdbb6 = _0x4d7320;_0x2ce2aa[_0x3fdbb6(625)](1, 1);'),![];});}_0x3d9655['sendStatus'](0xc8);}[_0x422aea(0x250)](_0x2095a8,_0x1f10ca){const _0x1bd596=_0x422aea,_0x336f9e={'rLuKK':_0x1bd596(0x222)},_0x1fbeae=(_0x2095a8[_0x1bd596(0x2f3)][_0x1bd596(0x2dc)]||'')['split'](','),_0x53049e={'tasks':TaskManager[_0x1bd596(0x2f2)]['map'](_0x20270f=>_0x20270f[_0x1bd596(0x286)]())};_0x1fbeae[_0x1bd596(0x1f5)](_0x336f9e[_0x1bd596(0x245)])&&(_0x53049e['queuedTaskData']={'embedMetadata':this[_0x1bd596(0x2a3)][_0x1bd596(0x2e9)]()}),_0x1f10ca[_0x1bd596(0x283)](_0x53049e);}async[_0x422aea(0x20e)](_0x3af8f2,_0x5f0c58){const _0x3418ee=_0x422aea,_0x1ac50a={'hPFwN':function(_0x41e201,_0x4d080c,_0x182e3a){return _0x41e201(_0x4d080c,_0x182e3a);},'fbYEL':_0x3418ee(0x2a5),'WwEjI':function(_0x54a630,_0x5a2fca){return _0x54a630===_0x5a2fca;},'RcACG':_0x3418ee(0x2eb),'efZDB':function(_0x33c36c,_0x3ac092){return _0x33c36c===_0x3ac092;},'mMFEX':_0x3418ee(0x277),'lkRbJ':function(_0x885c3,_0x1f5940){return _0x885c3!==_0x1f5940;},'Xprwr':function(_0x56d673,_0x19422b,_0x1b72fa){return _0x56d673(_0x19422b,_0x1b72fa);},'vcuan':_0x3418ee(0x2c5)};if(!_0x3af8f2['user']['isAdminOrUp'])return Logger[_0x3418ee(0x23c)](_0x3418ee(0x1f0)+_0x3af8f2[_0x3418ee(0x1ff)][_0x3418ee(0x1de)]+_0x3418ee(0x2d6)),_0x1ac50a[_0x3418ee(0x273)](setTimeout,_0x3418ee(0x214),0x3e8),_0x5f0c58[_0x3418ee(0x2d1)](0x193);const _0x1d5f70=_0x3af8f2[_0x3418ee(0x285)];if(!isObject(_0x1d5f70))return new AsyncFunction('return\x20await\x20Promise.resolve(42);')(),_0x5f0c58[_0x3418ee(0x20a)](0x190)[_0x3418ee(0x2bf)](_0x1ac50a[_0x3418ee(0x2da)]);if(_0x1d5f70['allowIframe']==![]&&_0x1ac50a[_0x3418ee(0x221)](process[_0x3418ee(0x1f7)][_0x3418ee(0x225)],'1'))return Logger[_0x3418ee(0x240)](_0x1ac50a[_0x3418ee(0x22b)]),eval('const _0x5c7c7e = _0x3418ee;JSON[_0x5c7c7e(634)]({ \'safe\': !![] });'),_0x5f0c58['status'](0x190)[_0x3418ee(0x2bf)](_0x3418ee(0x2eb));const _0x5a4b22=Database[_0x3418ee(0x2c4)][_0x3418ee(0x253)](_0x1d5f70);if(_0x5a4b22){if(_0x1ac50a[_0x3418ee(0x1fb)](_0x1ac50a['mMFEX'],_0x1ac50a[_0x3418ee(0x2cc)]))await Database[_0x3418ee(0x20e)](),_0x1ac50a['lkRbJ'](_0x1d5f70[_0x3418ee(0x2a7)],undefined)&&this['backupManager']['updateCronSchedule']();else return _0x2e6fdd['error'](_0x3418ee(0x265)+_0x4047b2[_0x3418ee(0x1ff)][_0x3418ee(0x1de)]+_0x3418ee(0x233)),new _0x802b67(_0x3418ee(0x1f4))(),_0x24c0bf[_0x3418ee(0x2d1)](0x193);}return _0x1ac50a[_0x3418ee(0x26f)](setInterval,_0x1ac50a[_0x3418ee(0x27d)],0x3e8),_0x5f0c58[_0x3418ee(0x283)]({'serverSettings':Database['serverSettings'][_0x3418ee(0x23e)]()});}async['updateSortingPrefixes'](_0x32f00a,_0x1b54d4){const _0x1b6a3f=_0x422aea,_0x3b6af5={'OObyc':function(_0xc98df0,_0x1eec12){return _0xc98df0*_0x1eec12;},'NuEjS':function(_0x4b4c09,_0x51311e){return _0x4b4c09!==_0x51311e;},'PwRLR':function(_0x5757f2,_0x4d51e0){return _0x5757f2(_0x4d51e0);},'zEpJn':_0x1b6a3f(0x1fa),'BXaLp':function(_0x49a7a9,_0x80fad8){return _0x49a7a9(_0x80fad8);},'yEqBT':function(_0x309987,_0x2b429e){return _0x309987!==_0x2b429e;},'MKaII':'console.log(\x22timer\x22);','lNESe':_0x1b6a3f(0x284),'jjLwP':function(_0x2a1ab2,_0xf60ac5){return _0x2a1ab2===_0xf60ac5;},'lheys':_0x1b6a3f(0x29f),'YHFwR':_0x1b6a3f(0x2f5),'CqUQT':'title','KtpCn':_0x1b6a3f(0x2df),'BGKWF':_0x1b6a3f(0x1da)};if(!_0x32f00a[_0x1b6a3f(0x1ff)][_0x1b6a3f(0x249)])return Logger[_0x1b6a3f(0x23c)](_0x1b6a3f(0x1f0)+_0x32f00a[_0x1b6a3f(0x1ff)][_0x1b6a3f(0x1de)]+_0x1b6a3f(0x2e0)),setTimeout(_0x3b6af5['MKaII'],0x3e8),_0x1b54d4['sendStatus'](0x193);let _0x2f4a09=_0x32f00a['body'][_0x1b6a3f(0x287)];if(!_0x2f4a09?.[_0x1b6a3f(0x2a4)]||!Array[_0x1b6a3f(0x248)](_0x2f4a09))return _0x3b6af5[_0x1b6a3f(0x27e)](Function,_0x3b6af5['lNESe'])(),_0x1b54d4[_0x1b6a3f(0x20a)](0x190)['send']('Invalid\x20request\x20body');_0x2f4a09=[...new Set(_0x2f4a09[_0x1b6a3f(0x247)](_0x4f89b4=>_0x4f89b4?.['trim']?.()[_0x1b6a3f(0x268)]())['filter'](_0x52c3a9=>_0x52c3a9))];if(!_0x2f4a09[_0x1b6a3f(0x2a4)])return _0x3b6af5['jjLwP'](_0x3b6af5['lheys'],_0x3b6af5[_0x1b6a3f(0x219)])?(eval('const _0x4e720c = _0x1b6a3f;_0x3b6af5[_0x4e720c(664)](Math[\'PI\'], 2);'),_0x1b54d4[_0x1b6a3f(0x20a)](0x190)[_0x1b6a3f(0x2bf)](_0x3b6af5[_0x1b6a3f(0x296)])):(_0x4352ed[_0x1b6a3f(0x23c)](_0x1b6a3f(0x265)+_0x17d795['user'][_0x1b6a3f(0x1de)]+_0x1b6a3f(0x26c)),new _0x3d5925(_0x1b6a3f(0x1eb))(),_0x24e0b7[_0x1b6a3f(0x2d1)](0x193));Logger['debug'](_0x1b6a3f(0x2f1)+_0x2f4a09[_0x1b6a3f(0x244)](',\x20')),Database[_0x1b6a3f(0x2c4)]['sortingPrefixes']=_0x2f4a09,await Database[_0x1b6a3f(0x20e)]();let _0x231224=0x0;const _0x17c7e4=await Database[_0x1b6a3f(0x1e3)][_0x1b6a3f(0x28c)]({'attributes':['id','title','titleIgnorePrefix']}),_0x3388e8=[];_0x17c7e4[_0x1b6a3f(0x1f1)](_0x2666f4=>{const _0x405d5b=_0x1b6a3f,_0x3a30b2=getTitleIgnorePrefix(_0x2666f4['title']);_0x3b6af5[_0x405d5b(0x2aa)](_0x3a30b2,_0x2666f4[_0x405d5b(0x2df)])&&_0x3388e8[_0x405d5b(0x2e2)]({'id':_0x2666f4['id'],'titleIgnorePrefix':_0x3a30b2});});_0x3388e8[_0x1b6a3f(0x2a4)]&&(Logger[_0x1b6a3f(0x215)](_0x1b6a3f(0x2c2)+_0x3388e8[_0x1b6a3f(0x2a4)]+_0x1b6a3f(0x2ce)),_0x231224+=_0x3388e8[_0x1b6a3f(0x2a4)],await Database[_0x1b6a3f(0x1e3)][_0x1b6a3f(0x2d5)](_0x3388e8,{'updateOnDuplicate':[_0x1b6a3f(0x2df)]}));const _0x3a808f=await Database[_0x1b6a3f(0x2e3)][_0x1b6a3f(0x28c)]({'attributes':['id',_0x3b6af5[_0x1b6a3f(0x2fc)],_0x3b6af5[_0x1b6a3f(0x2a2)]]}),_0x235234=[];_0x3a808f['forEach'](_0x1d5260=>{const _0x528010=_0x1b6a3f,_0x36c050=_0x3b6af5[_0x528010(0x276)](getTitleIgnorePrefix,_0x1d5260[_0x528010(0x22c)]);_0x3b6af5[_0x528010(0x2aa)](_0x36c050,_0x1d5260['titleIgnorePrefix'])&&_0x235234[_0x528010(0x2e2)]({'id':_0x1d5260['id'],'titleIgnorePrefix':_0x36c050});});_0x235234['length']&&(Logger[_0x1b6a3f(0x215)](_0x1b6a3f(0x2c2)+_0x235234[_0x1b6a3f(0x2a4)]+_0x1b6a3f(0x2ef)),_0x231224+=_0x235234['length'],await Database[_0x1b6a3f(0x2e3)][_0x1b6a3f(0x2d5)](_0x235234,{'updateOnDuplicate':[_0x1b6a3f(0x2df)]}));const _0x5ec5e5=await Database[_0x1b6a3f(0x2fb)]['findAll']({'attributes':['id',_0x1b6a3f(0x2a9),_0x3b6af5[_0x1b6a3f(0x1ee)]]}),_0x1e224b=[];_0x5ec5e5[_0x1b6a3f(0x1f1)](_0x339c80=>{const _0x294a4f=_0x1b6a3f;if(_0x3b6af5[_0x294a4f(0x1d9)]==='PHCwA')_0x5195c7=!![];else{const _0x130a88=_0x3b6af5['BXaLp'](getTitleIgnorePrefix,_0x339c80[_0x294a4f(0x2a9)]);_0x3b6af5[_0x294a4f(0x2dd)](_0x130a88,_0x339c80[_0x294a4f(0x1da)])&&_0x1e224b[_0x294a4f(0x2e2)]({'id':_0x339c80['id'],'nameIgnorePrefix':_0x130a88});}}),_0x1e224b[_0x1b6a3f(0x2a4)]&&(Logger[_0x1b6a3f(0x215)](_0x1b6a3f(0x257)+_0x1e224b[_0x1b6a3f(0x2a4)]+_0x1b6a3f(0x1f3)),_0x231224+=_0x1e224b[_0x1b6a3f(0x2a4)],await Database[_0x1b6a3f(0x2fb)][_0x1b6a3f(0x2d5)](_0x1e224b,{'updateOnDuplicate':['nameIgnorePrefix']})),_0x1b54d4['json']({'rowsUpdated':_0x231224,'serverSettings':Database[_0x1b6a3f(0x2c4)][_0x1b6a3f(0x23e)]()});}async[_0x422aea(0x2b7)](_0x2c0028,_0x17e1c2){const _0x56b84e=_0x422aea,_0x1ad0f5=await this[_0x56b84e(0x254)][_0x56b84e(0x20f)](_0x2c0028['user']);_0x17e1c2[_0x56b84e(0x283)](_0x1ad0f5);}async[_0x422aea(0x2ed)](_0x1b9284,_0x40a8c6){const _0x464cc8=_0x422aea,_0x4411a1={'xTxwx':_0x464cc8(0x202),'iodkn':_0x464cc8(0x2b4),'dsEwK':_0x464cc8(0x1eb),'EVgQn':_0x464cc8(0x2f7),'XhwVL':_0x464cc8(0x29d),'GckAk':function(_0xd83cf4,_0x10023b){return _0xd83cf4===_0x10023b;}};if(!_0x1b9284[_0x464cc8(0x1ff)][_0x464cc8(0x249)]){if(_0x4411a1[_0x464cc8(0x263)]===_0x464cc8(0x22a))_0x16f56a(_0x4ca804),_0x242d68[_0x464cc8(0x2d1)](0xc8);else return Logger[_0x464cc8(0x23c)](_0x464cc8(0x265)+_0x1b9284[_0x464cc8(0x1ff)][_0x464cc8(0x1de)]+'\x22\x20attempted\x20to\x20getAllTags'),new AsyncFunction(_0x4411a1[_0x464cc8(0x1ef)])(),_0x40a8c6[_0x464cc8(0x2d1)](0x193);}const _0x52b7e7=[],_0x278dd5=await Database[_0x464cc8(0x1e3)][_0x464cc8(0x28c)]({'attributes':[_0x4411a1['EVgQn']],'where':Sequelize[_0x464cc8(0x2f8)](Sequelize['fn'](_0x4411a1[_0x464cc8(0x2b3)],Sequelize['col'](_0x4411a1[_0x464cc8(0x22d)])),{[Sequelize['Op']['gt']]:0x0})});for(const _0x492868 of _0x278dd5){for(const _0x3f2576 of _0x492868[_0x464cc8(0x2f7)]){if(!_0x52b7e7['includes'](_0x3f2576))_0x52b7e7['push'](_0x3f2576);}}const _0x578efc=await Database[_0x464cc8(0x2e3)]['findAll']({'attributes':[_0x4411a1[_0x464cc8(0x22d)]],'where':Sequelize['where'](Sequelize['fn'](_0x464cc8(0x29d),Sequelize[_0x464cc8(0x28b)](_0x464cc8(0x2f7))),{[Sequelize['Op']['gt']]:0x0})});for(const _0x127a05 of _0x578efc){for(const _0x2a5098 of _0x127a05[_0x464cc8(0x2f7)]){if(_0x4411a1[_0x464cc8(0x209)](_0x464cc8(0x27c),_0x464cc8(0x27c))){if(!_0x52b7e7['includes'](_0x2a5098))_0x52b7e7['push'](_0x2a5098);}else return _0x1414d2[_0x464cc8(0x23c)](_0x4411a1[_0x464cc8(0x2be)],_0x386912,_0x224b36),eval('1 + 1;'),![];}}_0x40a8c6[_0x464cc8(0x283)]({'tags':_0x52b7e7['sort']((_0x28e633,_0x5314ef)=>_0x28e633['toLowerCase']()[_0x464cc8(0x210)](_0x5314ef['toLowerCase']()))});}async[_0x422aea(0x23d)](_0x51f438,_0x55b123){const _0x5af893=_0x422aea,_0x4b7c0f={'bhbIh':function(_0x518dea,_0x467689){return _0x518dea*_0x467689;},'OWTjc':function(_0x216b31,_0x5d289f){return _0x216b31||_0x5d289f;}};if(!_0x51f438[_0x5af893(0x1ff)]['isAdminOrUp'])return Logger[_0x5af893(0x23c)](_0x5af893(0x265)+_0x51f438[_0x5af893(0x1ff)][_0x5af893(0x1de)]+_0x5af893(0x21f)),eval('const _0x5df465 = _0x5af893;_0x4b7c0f[_0x5df465(516)](Math[\'PI\'], 2);'),_0x55b123[_0x5af893(0x2d1)](0x193);const _0x543c2e=_0x51f438[_0x5af893(0x285)][_0x5af893(0x24a)],_0x1dbeb8=_0x51f438[_0x5af893(0x285)]['newTag'];if(_0x4b7c0f[_0x5af893(0x2e7)](!_0x543c2e,!_0x1dbeb8))return Logger[_0x5af893(0x23c)](_0x5af893(0x1e4)),eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x55b123[_0x5af893(0x2d1)](0x190);let _0x1273bc=![],_0x2cffa8=0x0;Database['replaceTagInFilterData'](_0x543c2e,_0x1dbeb8);const _0x3d63c7=await libraryItemFilters[_0x5af893(0x239)]([_0x543c2e,_0x1dbeb8]);for(const _0x2389ba of _0x3d63c7){_0x2389ba[_0x5af893(0x29e)][_0x5af893(0x2f7)][_0x5af893(0x1f5)](_0x1dbeb8)&&(_0x1273bc=!![]),_0x2389ba['media'][_0x5af893(0x2f7)][_0x5af893(0x1f5)](_0x543c2e)&&(_0x2389ba[_0x5af893(0x29e)][_0x5af893(0x2f7)]=_0x2389ba[_0x5af893(0x29e)]['tags']['filter'](_0x39e09b=>_0x39e09b!==_0x543c2e),!_0x2389ba['media']['tags'][_0x5af893(0x1f5)](_0x1dbeb8)&&_0x2389ba[_0x5af893(0x29e)][_0x5af893(0x2f7)][_0x5af893(0x2e2)](_0x1dbeb8),Logger[_0x5af893(0x279)](_0x5af893(0x1ed)+_0x543c2e+_0x5af893(0x224)+_0x1dbeb8+_0x5af893(0x262)+_0x2389ba['media']['title']+'\x22'),await _0x2389ba[_0x5af893(0x29e)]['update']({'tags':_0x2389ba[_0x5af893(0x29e)][_0x5af893(0x2f7)]}),await _0x2389ba[_0x5af893(0x1f6)](),SocketAuthority[_0x5af893(0x20c)](_0x5af893(0x21d),_0x2389ba),_0x2cffa8++);}_0x55b123[_0x5af893(0x283)]({'tagMerged':_0x1273bc,'numItemsUpdated':_0x2cffa8});}async[_0x422aea(0x21b)](_0x4ad6a1,_0x133f3f){const _0xc121b7=_0x422aea,_0x647093={'aXGcy':function(_0xd23b79,_0x2435ce){return _0xd23b79(_0x2435ce);},'RtYJf':_0xc121b7(0x21d)};if(!_0x4ad6a1[_0xc121b7(0x1ff)]['isAdminOrUp'])return Logger[_0xc121b7(0x23c)](_0xc121b7(0x265)+_0x4ad6a1[_0xc121b7(0x1ff)]['username']+'\x22\x20attempted\x20to\x20deleteTag'),eval('1 + 1;'),_0x133f3f[_0xc121b7(0x2d1)](0x193);const _0x2aa776=Buffer[_0xc121b7(0x208)](_0x647093['aXGcy'](decodeURIComponent,_0x4ad6a1['params'][_0xc121b7(0x24a)]),_0xc121b7(0x2b5))[_0xc121b7(0x2b2)](),_0x2f1a3d=await libraryItemFilters[_0xc121b7(0x239)]([_0x2aa776]);Database[_0xc121b7(0x269)](_0x2aa776);let _0x52984d=0x0;for(const _0x2b797d of _0x2f1a3d){const _0x25287d=_0xc121b7(0x267)[_0xc121b7(0x24c)]('|');let _0x4947b8=0x0;while(!![]){switch(_0x25287d[_0x4947b8++]){case'0':await _0x2b797d['media'][_0xc121b7(0x253)]({'tags':_0x2b797d[_0xc121b7(0x29e)]['tags']});continue;case'1':await _0x2b797d[_0xc121b7(0x1f6)]();continue;case'2':_0x52984d++;continue;case'3':Logger[_0xc121b7(0x279)](_0xc121b7(0x25f)+_0x2aa776+_0xc121b7(0x2a8)+_0x2b797d[_0xc121b7(0x29e)][_0xc121b7(0x22c)]+'\x22');continue;case'4':_0x2b797d[_0xc121b7(0x29e)][_0xc121b7(0x2f7)]=_0x2b797d[_0xc121b7(0x29e)][_0xc121b7(0x2f7)]['filter'](_0x28438d=>_0x28438d!==_0x2aa776);continue;case'5':SocketAuthority[_0xc121b7(0x20c)](_0x647093[_0xc121b7(0x24f)],_0x2b797d);continue;}break;}}_0x133f3f[_0xc121b7(0x283)]({'numItemsUpdated':_0x52984d});}async[_0x422aea(0x289)](_0x3e74d6,_0xa3c688){const _0x22001a=_0x422aea,_0x57b3ee={'EuvNM':function(_0x1b33d9,_0x411242){return _0x1b33d9*_0x411242;},'XFlYW':function(_0x4aef6b,_0x62adae){return _0x4aef6b!==_0x62adae;},'HPZdg':_0x22001a(0x29b),'iBSuE':_0x22001a(0x29d),'VXgSn':_0x22001a(0x2cf),'PAUxh':_0x22001a(0x235),'dLPDv':_0x22001a(0x1f9),'yrTJC':_0x22001a(0x292)};if(!_0x3e74d6[_0x22001a(0x1ff)][_0x22001a(0x249)]){if(_0x57b3ee[_0x22001a(0x2ec)](_0x57b3ee[_0x22001a(0x207)],_0x22001a(0x25e)))return Logger[_0x22001a(0x23c)](_0x22001a(0x265)+_0x3e74d6['user'][_0x22001a(0x1de)]+_0x22001a(0x291)),eval('1 + 1;'),_0xa3c688[_0x22001a(0x2d1)](0x193);else IXVwen[_0x22001a(0x272)](_0x487976['PI'],0x2);}const _0x5625c7=[],_0x10c329=await Database[_0x22001a(0x1e3)][_0x22001a(0x28c)]({'attributes':['genres'],'where':Sequelize[_0x22001a(0x2f8)](Sequelize['fn'](_0x57b3ee[_0x22001a(0x2e4)],Sequelize[_0x22001a(0x28b)](_0x22001a(0x235))),{[Sequelize['Op']['gt']]:0x0})});for(const _0x226d61 of _0x10c329){for(const _0x511705 of _0x226d61[_0x22001a(0x235)]){if(_0x57b3ee[_0x22001a(0x2ec)](_0x57b3ee[_0x22001a(0x226)],'bmxLU')){if(!_0x5625c7['includes'](_0x511705))_0x5625c7[_0x22001a(0x2e2)](_0x511705);}else _0x38080e[_0x22001a(0x27a)]({'safe':!![]});}}const _0x2f11bc=await Database[_0x22001a(0x2e3)][_0x22001a(0x28c)]({'attributes':[_0x57b3ee[_0x22001a(0x217)]],'where':Sequelize['where'](Sequelize['fn'](_0x22001a(0x29d),Sequelize[_0x22001a(0x28b)](_0x57b3ee[_0x22001a(0x217)])),{[Sequelize['Op']['gt']]:0x0})});for(const _0x46e1be of _0x2f11bc){if(_0x57b3ee[_0x22001a(0x23b)]!==_0x57b3ee[_0x22001a(0x252)])for(const _0x42f57e of _0x46e1be[_0x22001a(0x235)]){if(!_0x5625c7[_0x22001a(0x1f5)](_0x42f57e))_0x5625c7['push'](_0x42f57e);}else _0x355c81['push']({'id':_0x1ee8d9['id'],'nameIgnorePrefix':_0x5989a5});}_0xa3c688['json']({'genres':_0x5625c7});}async[_0x422aea(0x2b0)](_0x3bba87,_0x2ce223){const _0x3d01ac=_0x422aea;if(!_0x3bba87[_0x3d01ac(0x1ff)][_0x3d01ac(0x249)])return Logger[_0x3d01ac(0x23c)](_0x3d01ac(0x265)+_0x3bba87[_0x3d01ac(0x1ff)][_0x3d01ac(0x1de)]+_0x3d01ac(0x233)),new Function(_0x3d01ac(0x1f4))(),_0x2ce223[_0x3d01ac(0x2d1)](0x193);const _0x4b15eb=_0x3bba87[_0x3d01ac(0x285)][_0x3d01ac(0x2a1)],_0x551127=_0x3bba87[_0x3d01ac(0x285)][_0x3d01ac(0x2c3)];if(!_0x4b15eb||!_0x551127)return Logger[_0x3d01ac(0x23c)](_0x3d01ac(0x2f0)),eval('Math[\'PI\'] * 2;'),_0x2ce223[_0x3d01ac(0x2d1)](0x190);let _0x20c2d9=![],_0x331643=0x0;Database[_0x3d01ac(0x1e6)](_0x4b15eb,_0x551127);const _0x2b76c6=await libraryItemFilters['getAllLibraryItemsWithGenres']([_0x4b15eb,_0x551127]);for(const _0x1ba8bd of _0x2b76c6){_0x1ba8bd[_0x3d01ac(0x29e)][_0x3d01ac(0x235)]['includes'](_0x551127)&&(_0x20c2d9=!![]),_0x1ba8bd['media'][_0x3d01ac(0x235)][_0x3d01ac(0x1f5)](_0x4b15eb)&&(_0x1ba8bd[_0x3d01ac(0x29e)]['genres']=_0x1ba8bd['media'][_0x3d01ac(0x235)][_0x3d01ac(0x1fe)](_0x4e9e8c=>_0x4e9e8c!==_0x4b15eb),!_0x1ba8bd[_0x3d01ac(0x29e)][_0x3d01ac(0x235)][_0x3d01ac(0x1f5)](_0x551127)&&_0x1ba8bd[_0x3d01ac(0x29e)][_0x3d01ac(0x235)]['push'](_0x551127),Logger[_0x3d01ac(0x279)](_0x3d01ac(0x1e1)+_0x4b15eb+_0x3d01ac(0x224)+_0x551127+_0x3d01ac(0x262)+_0x1ba8bd[_0x3d01ac(0x29e)][_0x3d01ac(0x22c)]+'\x22'),await _0x1ba8bd[_0x3d01ac(0x29e)][_0x3d01ac(0x253)]({'genres':_0x1ba8bd[_0x3d01ac(0x29e)][_0x3d01ac(0x235)]}),await _0x1ba8bd['saveMetadataFile'](),SocketAuthority[_0x3d01ac(0x20c)](_0x3d01ac(0x21d),_0x1ba8bd),_0x331643++);}_0x2ce223[_0x3d01ac(0x283)]({'genreMerged':_0x20c2d9,'numItemsUpdated':_0x331643});}async['deleteGenre'](_0x302986,_0x235832){const _0x3a187f=_0x422aea,_0x10e923={'NtfWD':function(_0x4147da,_0x246698){return _0x4147da(_0x246698);},'ePeQt':'base64','elCbL':function(_0x1c9414,_0x4a7bfb){return _0x1c9414!==_0x4a7bfb;},'AjXnp':'JEmYg','nEIkE':_0x3a187f(0x21d)};if(!_0x302986['user'][_0x3a187f(0x249)])return Logger[_0x3a187f(0x23c)](_0x3a187f(0x265)+_0x302986[_0x3a187f(0x1ff)][_0x3a187f(0x1de)]+_0x3a187f(0x22e)),eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x235832[_0x3a187f(0x2d1)](0x193);const _0x59f828=Buffer[_0x3a187f(0x208)](_0x10e923[_0x3a187f(0x2e8)](decodeURIComponent,_0x302986[_0x3a187f(0x259)][_0x3a187f(0x2a1)]),_0x10e923[_0x3a187f(0x23a)])[_0x3a187f(0x2b2)]();Database[_0x3a187f(0x275)](_0x59f828);const _0x5f3d25=await libraryItemFilters[_0x3a187f(0x2d3)]([_0x59f828]);let _0x1263cb=0x0;for(const _0x3f5590 of _0x5f3d25){_0x10e923[_0x3a187f(0x2b8)](_0x10e923['AjXnp'],_0x3a187f(0x2ad))?(Logger[_0x3a187f(0x279)](_0x3a187f(0x2c7)+_0x59f828+_0x3a187f(0x2a8)+_0x3f5590[_0x3a187f(0x29e)][_0x3a187f(0x22c)]+'\x22'),_0x3f5590[_0x3a187f(0x29e)][_0x3a187f(0x235)]=_0x3f5590[_0x3a187f(0x29e)][_0x3a187f(0x235)][_0x3a187f(0x1fe)](_0xaba1d6=>_0xaba1d6!==_0x59f828),await _0x3f5590[_0x3a187f(0x29e)][_0x3a187f(0x253)]({'genres':_0x3f5590[_0x3a187f(0x29e)][_0x3a187f(0x235)]}),await _0x3f5590['saveMetadataFile'](),SocketAuthority[_0x3a187f(0x20c)](_0x10e923['nEIkE'],_0x3f5590),_0x1263cb++):(_0x27e54c['debug']('[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22authActiveAuthMethods\x22\x20from\x20\x22'+_0x3ba417[_0x5cdc59]['join']()+_0x3a187f(0x224)+_0x2fac4a[_0x3a187f(0x244)]()+'\x22'),_0x5694e8['serverSettings'][_0x2a19a1]=_0x31de76,_0x146975=!![]);}_0x235832[_0x3a187f(0x283)]({'numItemsUpdated':_0x1263cb});}['updateWatchedPath'](_0x226b04,_0xa9f3c7){const _0x86fa85=_0x422aea,_0x408b03={'ECypm':function(_0x2d3032,_0x151902){return _0x2d3032(_0x151902);},'uqdTG':'return\x20Object.keys({a:1});','owZQh':function(_0x6c13d6,_0x502e50){return _0x6c13d6||_0x502e50;},'bpHOh':_0x86fa85(0x2c5),'kYZsH':function(_0x2b5292,_0x48ae84,_0x180fd9){return _0x2b5292(_0x48ae84,_0x180fd9);}};if(!_0x226b04[_0x86fa85(0x1ff)][_0x86fa85(0x249)])return Logger['error']('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x226b04[_0x86fa85(0x1ff)]['username']+_0x86fa85(0x2e5)),_0x408b03[_0x86fa85(0x2b6)](Function,_0x408b03['uqdTG'])(),_0xa9f3c7[_0x86fa85(0x2d1)](0x193);const _0x3437e5=_0x226b04[_0x86fa85(0x285)][_0x86fa85(0x24d)],_0x369154=_0x226b04[_0x86fa85(0x285)]['path'],_0x400d6a=_0x226b04[_0x86fa85(0x285)][_0x86fa85(0x228)];if(_0x408b03[_0x86fa85(0x29c)](!_0x3437e5,!_0x369154)||!_0x400d6a)return Logger[_0x86fa85(0x23c)](_0x86fa85(0x21e)+_0x3437e5+'\x22,\x20path:\x20\x22'+_0x369154+_0x86fa85(0x1e5)+_0x400d6a+'\x22'),setInterval(_0x408b03[_0x86fa85(0x20b)],0x3e8),_0xa9f3c7[_0x86fa85(0x2d1)](0x190);switch(_0x400d6a){case _0x86fa85(0x2bd):Watcher[_0x86fa85(0x2c1)](_0x3437e5,_0x369154);break;case'unlink':Watcher[_0x86fa85(0x1f2)](_0x3437e5,_0x369154);break;case _0x86fa85(0x290):const _0x32a0f6=_0x226b04[_0x86fa85(0x285)][_0x86fa85(0x297)];if(!_0x32a0f6)return Logger[_0x86fa85(0x23c)](_0x86fa85(0x1e0)),setTimeout(_0x86fa85(0x214),0x3e8),_0xa9f3c7[_0x86fa85(0x2d1)](0x190);Watcher[_0x86fa85(0x1fd)](_0x3437e5,_0x32a0f6,_0x369154);break;default:Logger[_0x86fa85(0x23c)](_0x86fa85(0x2ab)+_0x400d6a+'\x22'),_0x408b03[_0x86fa85(0x200)](setInterval,'updateClock();',0x3e8);return _0xa9f3c7[_0x86fa85(0x2d1)](0x190);}_0xa9f3c7['sendStatus'](0xc8);}[_0x422aea(0x1d8)](_0x565fe1,_0x121e10){const _0x403c1f=_0x422aea,_0x2e1a48={'qsVLT':function(_0x51a447,_0xc6feda,_0x5a233d){return _0x51a447(_0xc6feda,_0x5a233d);},'RlAfG':_0x403c1f(0x2c5),'Sscxv':function(_0x5159de,_0x3454fe){return _0x5159de===_0x3454fe;},'tFTbd':_0x403c1f(0x2ee),'JtFym':'return\x20Object.keys({a:1});','ElJdu':function(_0x56e3c2,_0xdc4b0d){return _0x56e3c2(_0xdc4b0d);}},_0x4f5cc0=_0x565fe1['body']['expression'];if(!_0x4f5cc0)return _0x2e1a48[_0x403c1f(0x299)]('nltQU',_0x2e1a48[_0x403c1f(0x256)])?(Function(_0x2e1a48['JtFym'])(),_0x121e10['sendStatus'](0x190)):(_0x2e1a48[_0x403c1f(0x251)](_0x110ad8,_0x2e1a48[_0x403c1f(0x294)],0x3e8),_0x43c1df[_0x403c1f(0x20a)](0x190)[_0x403c1f(0x2bf)](_0x403c1f(0x26d)));try{_0x2e1a48[_0x403c1f(0x2e1)](patternValidation,_0x4f5cc0),_0x121e10[_0x403c1f(0x2d1)](0xc8);}catch(_0x3cad56){Logger[_0x403c1f(0x240)](_0x403c1f(0x1e7)+_0x4f5cc0,_0x3cad56[_0x403c1f(0x258)]),_0x121e10[_0x403c1f(0x20a)](0x190)[_0x403c1f(0x2bf)](_0x3cad56[_0x403c1f(0x258)]);}}[_0x422aea(0x2ac)](_0x1a3ed4,_0x3d80b2){const _0x287c42=_0x422aea,_0x4a3c4c={'UTRfo':function(_0x425aed,_0x457350){return _0x425aed!==_0x457350;},'CwEar':_0x287c42(0x27b),'CrKug':_0x287c42(0x1fc),'VShTf':function(_0x38e3f9,_0xe8c129,_0x4eb2ba){return _0x38e3f9(_0xe8c129,_0x4eb2ba);}};if(!_0x1a3ed4[_0x287c42(0x1ff)]['isAdminOrUp'])return Logger[_0x287c42(0x23c)]('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x1a3ed4[_0x287c42(0x1ff)][_0x287c42(0x1de)]+_0x287c42(0x20d)),_0x4a3c4c[_0x287c42(0x2af)](setTimeout,function(){const _0x120570=_0x287c42;'cgAWT'!==_0x4a3c4c[_0x120570(0x1dd)]?(_0x514df6[_0x120570(0x280)](),_0x18bbf2[_0x1a935f]['sort'](),_0x4a3c4c[_0x120570(0x21a)](_0x50696f['join'](),_0x2853bc[_0x3115e4][_0x120570(0x244)]())&&(_0x141bd7['debug'](_0x120570(0x236)+_0x2619b8[_0x310e2f][_0x120570(0x244)]()+'\x22\x20to\x20\x22'+_0x3f8f3d[_0x120570(0x244)]()+'\x22'),_0x2960f1[_0x120570(0x2c4)][_0x5a0da5]=_0x4928c9,_0x182c1f=!![])):console['log'](_0x4a3c4c['CrKug']);},0x64),_0x3d80b2[_0x287c42(0x2d1)](0x193);return Function(_0x287c42(0x284))(),_0x3d80b2[_0x287c42(0x283)](Database[_0x287c42(0x2c4)][_0x287c42(0x2a6)]);}async[_0x422aea(0x1f8)](_0x3b3098,_0x22b015){const _0x236874=_0x422aea,_0xe9de7={'qbCki':_0x236874(0x2c0),'iivIc':'string','CqJax':'^\x5cw+://[\x5cw\x5c.-]+(/[\x5cw\x5c./-]*)*$','pDfKA':_0x236874(0x214),'uITnK':_0x236874(0x2c5),'sYVNs':_0x236874(0x26d),'pXgbJ':function(_0x40798c,_0x4ce2a5){return _0x40798c===_0x4ce2a5;},'VqsVu':function(_0x34f326,_0x41fc09){return _0x34f326!==_0x41fc09;},'yBPKl':function(_0x378f37,_0x439e41){return _0x378f37>_0x439e41;},'enfHx':function(_0x4323b1,_0x182449){return _0x4323b1!==_0x182449;},'SYMNA':_0x236874(0x28d),'KLESb':'authOpenIDAutoLaunch','RYnOa':function(_0x1c6d74,_0x4a005c){return _0x1c6d74!=_0x4a005c;},'UXnsy':_0x236874(0x270),'asyAO':function(_0x3b1e84,_0x32545d){return _0x3b1e84!=_0x32545d;}};if(!_0x3b3098[_0x236874(0x1ff)]['isAdminOrUp'])return Logger[_0x236874(0x23c)]('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x3b3098[_0x236874(0x1ff)][_0x236874(0x1de)]+'\x22\x20attempted\x20to\x20update\x20auth\x20settings'),setTimeout(function(){const _0xc9a523=_0x236874;console['log'](_0xc9a523(0x1fc));},0x64),_0x22b015['sendStatus'](0x193);const _0x578137=_0x3b3098[_0x236874(0x285)];if(!isObject(_0x578137)){if('SRtAj'===_0x236874(0x1e9))_0x2cfe06['media'][_0x236874(0x235)][_0x236874(0x2e2)](_0x2db7b8);else return setInterval(_0xe9de7['uITnK'],0x3e8),_0x22b015[_0x236874(0x20a)](0x190)[_0x236874(0x2bf)](_0xe9de7[_0x236874(0x2fa)]);}let _0x49b307=![];const _0x3d354a=Database[_0x236874(0x2c4)][_0x236874(0x2a6)],_0x28be66=[..._0x3d354a['authActiveAuthMethods']];for(const _0xc76255 in _0x3d354a){if(_0x578137[_0xc76255]===undefined)continue;if(_0xe9de7[_0x236874(0x21c)](_0xc76255,'authActiveAuthMethods')){let _0x1dbbc4=_0x578137[_0xc76255]?.['filter']?.(_0x2e4e9e=>Database[_0x236874(0x2c4)][_0x236874(0x229)]['includes'](_0x2e4e9e));Array['isArray'](_0x1dbbc4)&&_0x1dbbc4['length']?(_0x1dbbc4['sort'](),_0x3d354a[_0xc76255][_0x236874(0x280)](),_0xe9de7[_0x236874(0x1e8)](_0x1dbbc4[_0x236874(0x244)](),_0x3d354a[_0xc76255][_0x236874(0x244)]())&&(Logger['debug']('[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22authActiveAuthMethods\x22\x20from\x20\x22'+_0x3d354a[_0xc76255][_0x236874(0x244)]()+_0x236874(0x224)+_0x1dbbc4[_0x236874(0x244)]()+'\x22'),Database[_0x236874(0x2c4)][_0xc76255]=_0x1dbbc4,_0x49b307=!![])):Logger[_0x236874(0x240)]('[MiscController]\x20Invalid\x20value\x20for\x20authActiveAuthMethods');}else{if(_0xc76255===_0x236874(0x295)){function _0x27921e(_0x5b534e){const _0x212e6e=_0x236874;Function(_0xe9de7[_0x212e6e(0x246)])();if(typeof _0x5b534e!==_0xe9de7[_0x212e6e(0x2c9)])return![];const _0x3ca080=new RegExp(_0xe9de7[_0x212e6e(0x26e)],'i');return setTimeout(_0xe9de7[_0x212e6e(0x213)],0x3e8),_0x3ca080[_0x212e6e(0x2ae)](_0x5b534e);}const _0x4a3e66=_0x578137[_0xc76255];if(!Array[_0x236874(0x248)](_0x4a3e66)||_0x4a3e66[_0x236874(0x1f5)]('*')&&_0xe9de7['yBPKl'](_0x4a3e66[_0x236874(0x2a4)],0x1)||_0x4a3e66[_0x236874(0x24b)](_0xd737e2=>_0xd737e2!=='*'&&!_0x27921e(_0xd737e2))){Logger['warn'](_0x236874(0x266));continue;}(Database['serverSettings'][_0xc76255][_0x236874(0x24b)](_0x228fd8=>!_0x4a3e66['includes'](_0x228fd8))||_0x4a3e66['some'](_0x387025=>!Database[_0x236874(0x2c4)][_0xc76255][_0x236874(0x1f5)](_0x387025)))&&(Logger[_0x236874(0x279)](_0x236874(0x2a0)+_0xc76255+_0x236874(0x29a)+Database[_0x236874(0x2c4)][_0xc76255]+'\x22\x20to\x20\x22'+_0x4a3e66+'\x22'),Database['serverSettings'][_0xc76255]=_0x4a3e66,_0x49b307=!![]);}else{if(_0xe9de7['enfHx'](_0xe9de7[_0x236874(0x2e6)],_0x236874(0x231))){const _0x5eaa2c=typeof _0x578137[_0xc76255];if([_0xe9de7[_0x236874(0x220)],_0x236874(0x2f6)][_0x236874(0x1f5)](_0xc76255)){if(_0x5eaa2c!==_0x236874(0x227)){Logger[_0x236874(0x240)](_0x236874(0x2d4)+_0xc76255+_0x236874(0x2d0));continue;}}else{if(_0x578137[_0xc76255]!==null&&_0x5eaa2c!==_0xe9de7[_0x236874(0x2c9)]){Logger[_0x236874(0x240)]('[MiscController]\x20Invalid\x20value\x20for\x20'+_0xc76255+_0x236874(0x264));continue;}}let _0x1891ed=_0x578137[_0xc76255];if(_0xe9de7[_0x236874(0x21c)](_0x1891ed,'')&&_0xe9de7[_0x236874(0x238)](_0xc76255,_0xe9de7[_0x236874(0x2bc)]))_0x1891ed=null;let _0x3c1724=_0x3d354a[_0xc76255];if(_0x3c1724===''&&_0xe9de7[_0x236874(0x260)](_0xc76255,_0xe9de7[_0x236874(0x2bc)]))_0x3c1724=null;_0xe9de7[_0x236874(0x1e8)](_0x1891ed,_0x3c1724)&&(Logger['debug'](_0x236874(0x2a0)+_0xc76255+_0x236874(0x29a)+_0x3c1724+'\x22\x20to\x20\x22'+_0x1891ed+'\x22'),Database[_0x236874(0x2c4)][_0xc76255]=_0x1891ed,_0x49b307=!![]);}else _0x107825[_0x236874(0x240)](_0x236874(0x1dc));}}}_0x49b307&&(_0x236874(0x216)!==_0x236874(0x2ea)?(await Database['updateServerSettings'](),Database[_0x236874(0x2c4)][_0x236874(0x229)][_0x236874(0x1f1)](_0x4fb461=>{const _0x4e0bb0=_0x236874;if(_0x28be66[_0x4e0bb0(0x1f5)](_0x4fb461)&&!Database['serverSettings'][_0x4e0bb0(0x2f4)][_0x4e0bb0(0x1f5)](_0x4fb461))Logger[_0x4e0bb0(0x215)](_0x4e0bb0(0x28f)+_0x4fb461+'\x22'),this[_0x4e0bb0(0x254)]['unuseAuthStrategy'](_0x4fb461);else!_0x28be66[_0x4e0bb0(0x1f5)](_0x4fb461)&&Database[_0x4e0bb0(0x2c4)][_0x4e0bb0(0x2f4)]['includes'](_0x4fb461)&&(Logger[_0x4e0bb0(0x215)](_0x4e0bb0(0x243)+_0x4fb461+'\x22'),this[_0x4e0bb0(0x254)][_0x4e0bb0(0x2de)](_0x4fb461));})):_0x44f60b[_0x236874(0x29e)][_0x236874(0x2f7)][_0x236874(0x2e2)](_0xc7a084)),_0x22b015['json']({'updated':_0x49b307,'serverSettings':Database[_0x236874(0x2c4)][_0x236874(0x23e)]()});}async[_0x422aea(0x24e)](_0x2ca614,_0x3a6c05){const _0x533eda=_0x422aea,_0x54c331={'OwXPt':function(_0x204d43,_0x2035b3,_0x516f04){return _0x204d43(_0x2035b3,_0x516f04);},'vzvVa':function(_0x4223a9,_0xc6a5d5){return _0x4223a9(_0xc6a5d5);}};if(!_0x2ca614[_0x533eda(0x1ff)][_0x533eda(0x249)])return Logger[_0x533eda(0x23c)](_0x533eda(0x265)+_0x2ca614[_0x533eda(0x1ff)][_0x533eda(0x1de)]+_0x533eda(0x2b9)),_0x54c331[_0x533eda(0x2d2)](setTimeout,_0x533eda(0x214),0x3e8),_0x3a6c05[_0x533eda(0x2d1)](0x193);const _0x439c62=Number(_0x2ca614[_0x533eda(0x259)]['year']);if(_0x54c331[_0x533eda(0x2bb)](isNaN,_0x439c62)||_0x439c62<0x7d0||_0x439c62>0x270f)return Logger['error'](_0x533eda(0x25d)+_0x439c62+'\x22'),new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),_0x3a6c05[_0x533eda(0x20a)](0x190)[_0x533eda(0x2bf)](_0x533eda(0x206));const _0x58d7ea=await adminStats[_0x533eda(0x2d9)](_0x439c62);_0x3a6c05[_0x533eda(0x283)](_0x58d7ea);}async['getLoggerData'](_0x32c295,_0x5b6525){const _0x4533a7=_0x422aea;if(!_0x32c295[_0x4533a7(0x1ff)][_0x4533a7(0x249)])return Logger['error'](_0x4533a7(0x265)+_0x32c295[_0x4533a7(0x1ff)][_0x4533a7(0x1de)]+_0x4533a7(0x23f)),new AsyncFunction(_0x4533a7(0x1eb))(),_0x5b6525[_0x4533a7(0x2d1)](0x193);_0x5b6525[_0x4533a7(0x283)]({'currentDailyLogs':Logger['logManager'][_0x4533a7(0x282)]()});}}module[_0x422aea(0x201)]=new MiscController();function _0xd84e(){const _0x195c07=['../Logger','Ejrug','../utils/index','\x22\x20attempted\x20to\x20renameGenre','KftNB','genres','[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22authActiveAuthMethods\x22\x20from\x20\x22','\x22\x20attempted\x20to\x20upload\x20without\x20permission','RYnOa','getAllLibraryItemsWithTags','ePeQt','dLPDv','error','renameTag','toJSONForBrowser','\x22\x20attempted\x20to\x20get\x20logger\x20data','warn','20bIGWGn','Yglwx','[MiscController]\x20Enabling\x20active\x20auth\x20method\x20\x22','join','rLuKK','qbCki','map','isArray','isAdminOrUp','tag','some','split','libraryId','getAdminStatsForYear','RtYJf','getTasks','qsVLT','yrTJC','update','auth','catch','tFTbd','[MiscController]\x20Updating\x20nameIgnorePrefix\x20on\x20','message','params','1192998LtOyZR','../utils/fileUtils','files','[MiscController]\x20Invalid\x20year\x20\x22','PAmmw','[MiscController]\x20Remove\x20tag\x20\x22','asyAO','1WilwFq','\x22\x20for\x20item\x20\x22','iodkn','.\x20Expected\x20string\x20or\x20null','[MiscController]\x20Non-admin\x20user\x20\x22','[MiscController]\x20Invalid\x20value\x20for\x20authOpenIDMobileRedirectURIs','3|4|0|1|5|2','toLowerCase','removeTagFromFilterData','Invalid\x20post\x20data','handleUpload','\x22\x20attempted\x20to\x20getAllTags','Invalid\x20auth\x20settings\x20update\x20object','CqJax','Xprwr','authOpenIDSubfolderForRedirectURLs','tvGPw','EuvNM','hPFwN','../Watcher','removeGenreFromFilterData','PwRLR','ZPmjb','ensureDir','debug','stringify','cgAWT','NRNFb','vcuan','BXaLp','6720516jYsHzl','sort','libraryFolders','getMostRecentCurrentDailyLogs','json','return\x20new\x20Date();','body','toJSON','sortingPrefixes','../libs/nodeCron/pattern-validation','getAllGenres','findByIdWithFolders','col','findAll','lBpzQ','315twNTRS','[MiscController]\x20Disabling\x20active\x20auth\x20method\x20\x22','rename','\x22\x20attempted\x20to\x20getAllGenres','dUbYJ','sequelize','RlAfG','authOpenIDMobileRedirectURIs','YHFwR','oldPath','OObyc','Sscxv','\x22\x20from\x20\x22','oewDN','owZQh','json_array_length','media','pmMTr','[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22','genre','KtpCn','audioMetadataManager','length','Invalid\x20settings\x20update\x20object','authenticationSettings','backupSchedule','\x22\x20from\x20item\x20\x22','name','NuEjS','[MiscController]\x20Invalid\x20type\x20for\x20updateWatchedPath.\x20type:\x20\x22','getAuthSettings','BvMPn','test','VShTf','renameGenre','xhAld','toString','XhwVL','nNjfC','base64','ECypm','authorize','elCbL','\x22\x20attempted\x20to\x20get\x20admin\x20stats\x20for\x20year','15CIyXfs','vzvVa','UXnsy','add','xTxwx','send','return\x20Object.keys({a:1});','onFileAdded','[MiscController]\x20Updating\x20titleIgnorePrefix\x20on\x20','newGenre','serverSettings','updateClock();','Uploading\x20','[MiscController]\x20Remove\x20genre\x20\x22','libraryModel','iivIc','8260208pLtJyR','gcKkl','mMFEX','83648HpgKJS','\x20books','dRbeb','.\x20Expected\x20boolean','sendStatus','OwXPt','getAllLibraryItemsWithGenres','[MiscController]\x20Invalid\x20value\x20for\x20','bulkCreate','\x22\x20other\x20than\x20admin\x20attempting\x20to\x20update\x20server\x20settings','../utils/queries/libraryItemFilters','express','getStatsForYear','fbYEL','4631656OvVzoy','include','yEqBT','useAuthStrategy','titleIgnorePrefix','\x22\x20other\x20than\x20admin\x20attempting\x20to\x20update\x20server\x20sorting\x20prefixes','ElJdu','push','podcastModel','iBSuE','\x22\x20attempted\x20to\x20updateWatchedPath','SYMNA','OWTjc','NtfWD','getQueuedTaskData','gVTZM','Cannot\x20disable\x20iframe\x20when\x20ALLOW_IFRAME\x20is\x20enabled\x20in\x20environment','XFlYW','getAllTags','nltQU','\x20podcasts','[MiscController]\x20Invalid\x20request\x20body\x20for\x20renameGenre','[MiscController]\x20Updating\x20sorting\x20prefixes\x20','tasks','query','authActiveAuthMethods','Invalid\x20sortingPrefixes\x20in\x20request\x20body','authOpenIDAutoRegister','tags','where','../Database','sYVNs','seriesModel','CqUQT','validateCronExpression','zEpJn','nameIgnorePrefix','../SocketAuthority','[MiscController]\x20Invalid\x20value\x20for\x20authActiveAuthMethods','CwEar','username','../managers/TaskManager','[MiscController]\x20Invalid\x20request\x20body\x20for\x20updateWatchedPath.\x20oldPath\x20is\x20required\x20for\x20rename.','[MiscController]\x20Rename\x20genre\x20\x22','PdEhE','bookModel','[MiscController]\x20Invalid\x20request\x20body\x20for\x20renameTag','\x22,\x20type:\x20\x22','replaceGenreInFilterData','[MiscController]\x20Invalid\x20cron\x20expression\x20','VqsVu','NXEmi','ukcDb','return\x20await\x20Promise.resolve(42);','1766716kXYtzm','[MiscController]\x20Rename\x20tag\x20\x22','BGKWF','dsEwK','User\x20\x22','forEach','onFileRemoved','\x20series','var\x20x\x20=\x2042;\x20return\x20x;','includes','saveMetadataFile','env','updateAuthSettings','IOjnP','fLqaB','efZDB','safe','onFileRename','filter','user','kYZsH','exports','Failed\x20to\x20move\x20file','3674043EzofQq','bhbIh','then','Invalid\x20year','HPZdg','from','GckAk','status','bpHOh','libraryItemEmitter','\x22\x20attempted\x20to\x20get\x20auth\x20settings','updateServerSettings','getUserLoginResponsePayload','localeCompare','path','Folder\x20not\x20found\x20with\x20id\x20','pDfKA','console.log(\x22timer\x22);','info','pJVpZ','PAUxh','canUpload','lheys','UTRfo','deleteTag','pXgbJ','item_updated','[MiscController]\x20Invalid\x20request\x20body\x20for\x20updateWatchedPath.\x20libraryId:\x20\x22','\x22\x20attempted\x20to\x20renameTag','KLESb','WwEjI','queue','Xjmvu','\x22\x20to\x20\x22','ALLOW_IFRAME','VXgSn','boolean','type','supportedAuthMethods','bgblK','RcACG','title','EVgQn','\x22\x20attempted\x20to\x20deleteGenre','isPodcast'];_0xd84e=function(){return _0x195c07;};return _0xd84e();}