function _0x42f8(_0x39a7e0,_0xb9fb99){const _0x126138=_0x1261();return _0x42f8=function(_0x42f8fd,_0x5e11fe){_0x42f8fd=_0x42f8fd-0x18a;let _0x1b7e79=_0x126138[_0x42f8fd];return _0x1b7e79;},_0x42f8(_0x39a7e0,_0xb9fb99);}const _0x2e7269=_0x42f8;(function(_0x2982c9,_0x33caa6){const _0x5a240b=_0x42f8,_0x1f6ba6=_0x2982c9();while(!![]){try{const _0x37a655=parseInt(_0x5a240b(0x192))/0x1+parseInt(_0x5a240b(0x1cd))/0x2*(parseInt(_0x5a240b(0x24c))/0x3)+parseInt(_0x5a240b(0x256))/0x4*(-parseInt(_0x5a240b(0x1bb))/0x5)+-parseInt(_0x5a240b(0x1ca))/0x6+-parseInt(_0x5a240b(0x265))/0x7+-parseInt(_0x5a240b(0x293))/0x8*(parseInt(_0x5a240b(0x280))/0x9)+-parseInt(_0x5a240b(0x22d))/0xa*(-parseInt(_0x5a240b(0x1ec))/0xb);if(_0x37a655===_0x33caa6)break;else _0x1f6ba6['push'](_0x1f6ba6['shift']());}catch(_0x1f8fb0){_0x1f6ba6['push'](_0x1f6ba6['shift']());}}}(_0x1261,0xef2e1));const Sequelize=require(_0x2e7269(0x1a8)),Path=require(_0x2e7269(0x2a9)),{Request,Response}=require(_0x2e7269(0x1c8)),fs=require('../libs/fsExtra'),Logger=require(_0x2e7269(0x1f8)),SocketAuthority=require('../SocketAuthority'),Database=require(_0x2e7269(0x207)),Watcher=require(_0x2e7269(0x249)),libraryItemFilters=require(_0x2e7269(0x19f)),patternValidation=require(_0x2e7269(0x24f)),{isObject,getTitleIgnorePrefix}=require('../utils/index'),{sanitizeFilename}=require(_0x2e7269(0x223)),TaskManager=require('../managers/TaskManager'),adminStats=require('../utils/queries/adminStats');class MiscController{constructor(){}async[_0x2e7269(0x244)](_0x2a1b05,_0x2db007){const _0x3f1129=_0x2e7269,_0x2883b4={'qLMtZ':'return\x20await\x20Promise.resolve(42);','QzDPR':function(_0x54aade,_0x4b953e,_0x4c2951){return _0x54aade(_0x4b953e,_0x4c2951);},'pVZFj':function(_0x56b0db,_0x253149){return _0x56b0db*_0x253149;},'eGTKH':'Invalid\x20sortingPrefixes\x20in\x20request\x20body','qDnrK':_0x3f1129(0x27f),'KmgGc':'var\x20x\x20=\x2042;\x20return\x20x;','eHkdi':'string','yCvgT':function(_0x26268f,_0x4eff82){return _0x26268f!==_0x4eff82;},'GSPau':function(_0x55356b,_0x5df1a7){return _0x55356b===_0x5df1a7;},'yTlZb':_0x3f1129(0x1e6),'Tmbex':_0x3f1129(0x245),'iKyvX':'Library\x20not\x20found','ELzpK':function(_0xeb09da,_0x11052e){return _0xeb09da!==_0x11052e;},'NCMjs':'pDhiE','CwWQA':function(_0xb3899c,_0x2178d7){return _0xb3899c(_0x2178d7);},'nxGUM':_0x3f1129(0x29d),'gawhL':'qRiEo'};if(!_0x2a1b05[_0x3f1129(0x221)][_0x3f1129(0x1aa)])return Logger['warn'](_0x3f1129(0x1dc)+_0x2a1b05[_0x3f1129(0x221)][_0x3f1129(0x239)]+'\x22\x20attempted\x20to\x20upload\x20without\x20permission'),eval('const _0x212e59 = _0x3f1129;JSON[_0x212e59(661)]({ \'safe\': !![] });'),_0x2db007['sendStatus'](0x193);if(!_0x2a1b05['files']||!Object[_0x3f1129(0x248)](_0x2a1b05[_0x3f1129(0x26f)])['length'])return Logger[_0x3f1129(0x209)](_0x2883b4[_0x3f1129(0x29c)]),new Function(_0x2883b4[_0x3f1129(0x2ab)])(),_0x2db007[_0x3f1129(0x281)](0x190);const _0x8c6c60=Object[_0x3f1129(0x248)](_0x2a1b05[_0x3f1129(0x26f)]);let {title:_0x3f2e1e,author:_0x3c65a0,series:_0x2bed1a,folder:_0x256821,library:_0x255891}=_0x2a1b05['body'];if(!_0x255891||!_0x256821||typeof _0x255891!==_0x2883b4['eHkdi']||_0x2883b4[_0x3f1129(0x2a4)](typeof _0x256821,_0x2883b4[_0x3f1129(0x258)])||!_0x3f2e1e||_0x2883b4[_0x3f1129(0x2a4)](typeof _0x3f2e1e,_0x3f1129(0x25a))){if(_0x2883b4[_0x3f1129(0x1cf)](_0x3f1129(0x1e6),_0x2883b4['yTlZb']))return new AsyncFunction(_0x2883b4['qLMtZ'])(),_0x2db007[_0x3f1129(0x1f1)](0x190)[_0x3f1129(0x260)](_0x3f1129(0x298));else _0x2a8e4d[_0x3f1129(0x1f4)](_0x3f1129(0x1d1)+_0x10a2e8[_0x162c96][_0x3f1129(0x291)]()+_0x3f1129(0x2af)+_0xa8e54a[_0x3f1129(0x291)]()+'\x22'),_0x2b94cf[_0x3f1129(0x2a6)][_0x37a446]=_0x572b54,_0x2507d8=!![];}(!_0x2bed1a||_0x2883b4[_0x3f1129(0x2a4)](typeof _0x2bed1a,'string'))&&(_0x2bed1a=null);(!_0x3c65a0||typeof _0x3c65a0!==_0x3f1129(0x25a))&&(_0x3c65a0=null);const _0x2a48b2=await Database[_0x3f1129(0x242)][_0x3f1129(0x267)](_0x255891);if(!_0x2a48b2){if(_0x3f1129(0x245)===_0x2883b4[_0x3f1129(0x1c1)])return _0x2883b4[_0x3f1129(0x1fd)](setTimeout,function(){const _0x20bbe2=_0x3f1129;console[_0x20bbe2(0x233)](_0x20bbe2(0x270));},0x64),_0x2db007[_0x3f1129(0x1f1)](0x194)['send'](_0x2883b4[_0x3f1129(0x250)]);else _0x197e37['push']({'id':_0x4cd568['id'],'titleIgnorePrefix':_0x33bdb9});}const _0x5bac09=_0x2a48b2[_0x3f1129(0x195)][_0x3f1129(0x18f)](_0x3c1246=>_0x3c1246['id']===_0x256821);if(!_0x5bac09)return _0x2883b4[_0x3f1129(0x290)](_0x2883b4['NCMjs'],_0x3f1129(0x1d9))?(_0x2883b4['CwWQA'](Function,_0x2883b4[_0x3f1129(0x272)])(),_0x2db007[_0x3f1129(0x1f1)](0x194)[_0x3f1129(0x260)](_0x3f1129(0x1f5))):(_0x3669a5['error'](_0x3f1129(0x1dc)+_0x28884a[_0x3f1129(0x221)][_0x3f1129(0x239)]+_0x3f1129(0x1d4)),new _0x5b8c38(_0x2883b4['qLMtZ'])(),_0x281031['sendStatus'](0x193));const _0x4077e7=_0x2a48b2['isPodcast']?[_0x3f2e1e]:[_0x3c65a0,_0x2bed1a,_0x3f2e1e],_0x4d7472=_0x4077e7[_0x3f1129(0x1af)](Boolean)[_0x3f1129(0x247)](_0x3bea9f=>sanitizeFilename(_0x3bea9f)),_0x6d265f=Path[_0x3f1129(0x291)](...[_0x5bac09[_0x3f1129(0x2a9)],..._0x4d7472]);await fs[_0x3f1129(0x1a9)](_0x6d265f),Logger[_0x3f1129(0x216)]('Uploading\x20'+_0x8c6c60[_0x3f1129(0x226)]+_0x3f1129(0x1b4),_0x6d265f);for(const _0x59e01f of _0x8c6c60){if(_0x2883b4[_0x3f1129(0x28b)]===_0x3f1129(0x25d)){const _0x58f4fb=Path[_0x3f1129(0x291)](_0x6d265f,sanitizeFilename(_0x59e01f[_0x3f1129(0x22e)]));await _0x59e01f['mv'](_0x58f4fb)['then'](()=>{const _0x4326a6=_0x3f1129;return _0x2883b4[_0x4326a6(0x1fd)](setTimeout,'console.log(\x22timer\x22);',0x3e8),!![];})[_0x3f1129(0x202)](_0x496d1b=>{return Logger['error']('Failed\x20to\x20move\x20file',_0x58f4fb,_0x496d1b),eval('const _0x2cf0d1 = _0x42f8;_0x2883b4[_0x2cf0d1(685)](Math[\'PI\'], 2);'),![];});}else return _0x2883b4[_0x3f1129(0x1fd)](_0x340b9f,_0x3f1129(0x1c2),0x3e8),_0x490aaf[_0x3f1129(0x1f1)](0x190)[_0x3f1129(0x260)](_0x2883b4['eGTKH']);}_0x2db007[_0x3f1129(0x281)](0xc8);}[_0x2e7269(0x199)](_0x35ca2e,_0x502bd7){const _0x2d4758=_0x2e7269,_0x26cfd3=(_0x35ca2e[_0x2d4758(0x20f)]['include']||'')['split'](','),_0x547af5={'tasks':TaskManager[_0x2d4758(0x2a1)][_0x2d4758(0x247)](_0x1508fc=>_0x1508fc[_0x2d4758(0x268)]())};_0x26cfd3[_0x2d4758(0x264)](_0x2d4758(0x289))&&(_0x547af5[_0x2d4758(0x1e7)]={'embedMetadata':this['audioMetadataManager'][_0x2d4758(0x1bc)]()}),_0x502bd7[_0x2d4758(0x1f9)](_0x547af5);}async['updateServerSettings'](_0x493766,_0x25d407){const _0x194597=_0x2e7269,_0x84b1c9={'upVxK':function(_0x2ae4bf,_0x2e409b){return _0x2ae4bf===_0x2e409b;},'JNphv':'Cannot\x20disable\x20iframe\x20when\x20ALLOW_IFRAME\x20is\x20enabled\x20in\x20environment','FvaEt':_0x194597(0x27d),'QygrK':function(_0x5c0b52,_0x25877a){return _0x5c0b52!==_0x25877a;},'trgqr':_0x194597(0x25b),'qlxrz':_0x194597(0x296),'yWUuv':function(_0xeef3d2,_0x93f9c9,_0x1f2972){return _0xeef3d2(_0x93f9c9,_0x1f2972);},'YvSSl':'console.log(\x22timer\x22);'};if(!_0x493766[_0x194597(0x221)][_0x194597(0x211)])return _0x84b1c9['upVxK'](_0x194597(0x208),_0x194597(0x1da))?(_0x27d7cb['error'](_0x194597(0x1b6)+_0xdf4ea[_0x194597(0x221)]['username']+_0x194597(0x214)),_0x45a460(_0x194597(0x278))(),_0x397e3[_0x194597(0x281)](0x193)):(Logger[_0x194597(0x209)]('User\x20\x22'+_0x493766[_0x194597(0x221)][_0x194597(0x239)]+_0x194597(0x1d4)),new AsyncFunction('return\x20await\x20Promise.resolve(42);')(),_0x25d407['sendStatus'](0x193));const _0x58de2a=_0x493766[_0x194597(0x19d)];if(!isObject(_0x58de2a))return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),_0x25d407['status'](0x190)[_0x194597(0x260)](_0x194597(0x1b3));if(_0x58de2a[_0x194597(0x27a)]==![]&&process['env']['ALLOW_IFRAME']==='1')return Logger['warn'](_0x84b1c9[_0x194597(0x190)]),new Function(_0x84b1c9[_0x194597(0x24a)])(),_0x25d407[_0x194597(0x1f1)](0x190)['send'](_0x84b1c9[_0x194597(0x190)]);const _0x608e16=Database[_0x194597(0x2a6)]['update'](_0x58de2a);return _0x608e16&&(await Database[_0x194597(0x24d)](),_0x58de2a[_0x194597(0x215)]!==undefined&&(_0x84b1c9[_0x194597(0x25e)](_0x84b1c9['trgqr'],_0x84b1c9['qlxrz'])?this[_0x194597(0x1de)][_0x194597(0x25c)]():_0x1ea04f=!![])),_0x84b1c9[_0x194597(0x228)](setTimeout,_0x84b1c9[_0x194597(0x271)],0x3e8),_0x25d407[_0x194597(0x1f9)]({'serverSettings':Database[_0x194597(0x2a6)][_0x194597(0x1e5)]()});}async[_0x2e7269(0x19c)](_0x1abb4a,_0xb1b212){const _0xf25a6e=_0x2e7269,_0x2d85f8={'wSKRI':_0xf25a6e(0x1f0),'psYAX':function(_0x23e519,_0x5216e9){return _0x23e519===_0x5216e9;},'pUAJw':_0xf25a6e(0x27c),'DFVuc':_0xf25a6e(0x270),'pqMFt':function(_0x5c2dbb,_0x46d2eb,_0x379d1a){return _0x5c2dbb(_0x46d2eb,_0x379d1a);},'DTxsA':_0xf25a6e(0x29a),'fEGKS':'gcKft','eiVzB':function(_0x3e839e,_0x3077f8){return _0x3e839e(_0x3077f8);},'uCiXr':function(_0x1a8935,_0x45f689){return _0x1a8935!==_0x45f689;},'bBPUa':_0xf25a6e(0x298),'mShqF':_0xf25a6e(0x1c2),'cjgYQ':_0xf25a6e(0x29f),'gBzjJ':'titleIgnorePrefix','pKYuf':_0xf25a6e(0x1ee),'JSmSJ':'name','PPKiO':_0xf25a6e(0x275)};if(!_0x1abb4a[_0xf25a6e(0x221)]['isAdminOrUp'])return Logger[_0xf25a6e(0x209)](_0xf25a6e(0x1dc)+_0x1abb4a['user'][_0xf25a6e(0x239)]+_0xf25a6e(0x273)),_0x2d85f8[_0xf25a6e(0x1a2)](setTimeout,function(){const _0xd1f2fd=_0xf25a6e;if(_0x2d85f8[_0xd1f2fd(0x2a8)]('RYdlh',_0x2d85f8['pUAJw']))console[_0xd1f2fd(0x233)](_0x2d85f8[_0xd1f2fd(0x2aa)]);else{const _0x36548b={'HCQCV':'safe'};return _0x2057f4(function(){const _0x36b52a=_0xd1f2fd;_0x52f7c1[_0x36b52a(0x233)](_0x36548b['HCQCV']);},0x64),_0x1c4889[_0xd1f2fd(0x1f1)](0x194)[_0xd1f2fd(0x260)](_0x2d85f8[_0xd1f2fd(0x1e1)]);}},0x64),_0xb1b212['sendStatus'](0x193);let _0x596b77=_0x1abb4a[_0xf25a6e(0x19d)][_0xf25a6e(0x1a5)];if(!_0x596b77?.['length']||!Array['isArray'](_0x596b77))return setTimeout(function(){const _0x45b77a=_0xf25a6e;console[_0x45b77a(0x233)](_0x2d85f8[_0x45b77a(0x2aa)]);},0x64),_0xb1b212['status'](0x190)[_0xf25a6e(0x260)](_0x2d85f8[_0xf25a6e(0x220)]);_0x596b77=[...new Set(_0x596b77[_0xf25a6e(0x247)](_0x576f95=>_0x576f95?.[_0xf25a6e(0x241)]?.()['toLowerCase']())['filter'](_0x3e7385=>_0x3e7385))];if(!_0x596b77['length'])return setTimeout(_0x2d85f8[_0xf25a6e(0x26a)],0x3e8),_0xb1b212[_0xf25a6e(0x1f1)](0x190)[_0xf25a6e(0x260)](_0xf25a6e(0x284));Logger[_0xf25a6e(0x1f4)](_0xf25a6e(0x1e8)+_0x596b77['join'](',\x20')),Database[_0xf25a6e(0x2a6)]['sortingPrefixes']=_0x596b77,await Database[_0xf25a6e(0x24d)]();let _0x592e0c=0x0;const _0x2ee42=await Database['bookModel'][_0xf25a6e(0x1b9)]({'attributes':['id',_0x2d85f8[_0xf25a6e(0x22c)],_0x2d85f8[_0xf25a6e(0x1ce)]]}),_0x2f33c9=[];_0x2ee42['forEach'](_0x25afb7=>{const _0x52c6b8=_0xf25a6e,_0x16ebf6=getTitleIgnorePrefix(_0x25afb7[_0x52c6b8(0x29f)]);_0x16ebf6!==_0x25afb7['titleIgnorePrefix']&&_0x2f33c9[_0x52c6b8(0x26c)]({'id':_0x25afb7['id'],'titleIgnorePrefix':_0x16ebf6});});_0x2f33c9[_0xf25a6e(0x226)]&&(Logger['info'](_0xf25a6e(0x1a0)+_0x2f33c9['length']+'\x20books'),_0x592e0c+=_0x2f33c9[_0xf25a6e(0x226)],await Database[_0xf25a6e(0x236)][_0xf25a6e(0x1d5)](_0x2f33c9,{'updateOnDuplicate':[_0xf25a6e(0x18a)]}));const _0x2150b1=await Database[_0xf25a6e(0x23e)][_0xf25a6e(0x1b9)]({'attributes':['id',_0xf25a6e(0x29f),_0x2d85f8['gBzjJ']]}),_0x2d14a7=[];_0x2150b1['forEach'](_0x503cb5=>{const _0x480671=_0xf25a6e;if(_0x2d85f8['DTxsA']===_0x2d85f8['fEGKS'])return _0x1bf7b1['error'](_0x480671(0x1b6)+_0x3236d2[_0x480671(0x221)][_0x480671(0x239)]+'\x22\x20attempted\x20to\x20get\x20logger\x20data'),_0x2d85f8[_0x480671(0x1a2)](_0x3afef9,_0x480671(0x2a3),0x3e8),_0x3de945[_0x480671(0x281)](0x193);else{const _0x3804f6=_0x2d85f8[_0x480671(0x1a3)](getTitleIgnorePrefix,_0x503cb5[_0x480671(0x29f)]);_0x2d85f8[_0x480671(0x240)](_0x3804f6,_0x503cb5[_0x480671(0x18a)])&&_0x2d14a7[_0x480671(0x26c)]({'id':_0x503cb5['id'],'titleIgnorePrefix':_0x3804f6});}});if(_0x2d14a7[_0xf25a6e(0x226)]){if(_0x2d85f8[_0xf25a6e(0x240)](_0x2d85f8[_0xf25a6e(0x212)],_0x2d85f8[_0xf25a6e(0x212)])){const _0x3bb909={'FTuoa':function(_0xadf765,_0x1f73fd){return _0xadf765*_0x1f73fd;}};return _0x4e48e2['error'](_0xf25a6e(0x1ed)),eval('const _0x35db63 = _0xf25a6e;_0x3bb909[_0x35db63(455)](_0x1016b8[\'PI\'], 2);'),_0xd0ce0e[_0xf25a6e(0x281)](0x190);}else Logger[_0xf25a6e(0x216)](_0xf25a6e(0x1a0)+_0x2d14a7[_0xf25a6e(0x226)]+_0xf25a6e(0x21d)),_0x592e0c+=_0x2d14a7[_0xf25a6e(0x226)],await Database[_0xf25a6e(0x23e)][_0xf25a6e(0x1d5)](_0x2d14a7,{'updateOnDuplicate':[_0xf25a6e(0x18a)]});}const _0x2d83b2=await Database[_0xf25a6e(0x210)][_0xf25a6e(0x1b9)]({'attributes':['id',_0x2d85f8[_0xf25a6e(0x1b7)],_0x2d85f8[_0xf25a6e(0x29e)]]}),_0x4418e6=[];_0x2d83b2['forEach'](_0x11b9d2=>{const _0x5f242c=_0xf25a6e,_0xf0bd54=_0x2d85f8[_0x5f242c(0x1a3)](getTitleIgnorePrefix,_0x11b9d2[_0x5f242c(0x22e)]);_0x2d85f8['uCiXr'](_0xf0bd54,_0x11b9d2['nameIgnorePrefix'])&&_0x4418e6['push']({'id':_0x11b9d2['id'],'nameIgnorePrefix':_0xf0bd54});}),_0x4418e6[_0xf25a6e(0x226)]&&(Logger[_0xf25a6e(0x216)]('[MiscController]\x20Updating\x20nameIgnorePrefix\x20on\x20'+_0x4418e6[_0xf25a6e(0x226)]+_0xf25a6e(0x1ba)),_0x592e0c+=_0x4418e6['length'],await Database[_0xf25a6e(0x210)][_0xf25a6e(0x1d5)](_0x4418e6,{'updateOnDuplicate':[_0x2d85f8[_0xf25a6e(0x29e)]]})),_0xb1b212[_0xf25a6e(0x1f9)]({'rowsUpdated':_0x592e0c,'serverSettings':Database['serverSettings']['toJSONForBrowser']()});}async[_0x2e7269(0x269)](_0x520215,_0x597bea){const _0x17bf80=_0x2e7269,_0x42b563=await this['auth']['getUserLoginResponsePayload'](_0x520215[_0x17bf80(0x221)]);_0x597bea[_0x17bf80(0x1f9)](_0x42b563);}async[_0x2e7269(0x20a)](_0x1b9268,_0x15c84b){const _0x5b68b9=_0x2e7269,_0x251399={'KGwqC':function(_0x62fda5,_0x2a1aa0){return _0x62fda5===_0x2a1aa0;},'qcVcq':_0x5b68b9(0x19a),'VbDYQ':_0x5b68b9(0x1c5),'MXmMv':function(_0x14315e,_0x2d1c8c){return _0x14315e(_0x2d1c8c);},'CrdEb':'tags'};if(!_0x1b9268[_0x5b68b9(0x221)][_0x5b68b9(0x211)]){if(_0x251399[_0x5b68b9(0x1fe)](_0x251399[_0x5b68b9(0x20c)],_0x251399[_0x5b68b9(0x227)]))for(const _0x1141ad of _0x2adffc[_0x5b68b9(0x193)]){if(!_0x11dd4e[_0x5b68b9(0x264)](_0x1141ad))_0x43bcdc[_0x5b68b9(0x26c)](_0x1141ad);}else return Logger[_0x5b68b9(0x209)](_0x5b68b9(0x1b6)+_0x1b9268['user']['username']+_0x5b68b9(0x2a2)),_0x251399[_0x5b68b9(0x1fa)](Function,_0x5b68b9(0x29d))(),_0x15c84b[_0x5b68b9(0x281)](0x193);}const _0x3d9214=[],_0x165408=await Database['bookModel'][_0x5b68b9(0x1b9)]({'attributes':[_0x251399[_0x5b68b9(0x1f3)]],'where':Sequelize[_0x5b68b9(0x251)](Sequelize['fn'](_0x5b68b9(0x23c),Sequelize[_0x5b68b9(0x1d0)](_0x5b68b9(0x19b))),{[Sequelize['Op']['gt']]:0x0})});for(const _0x7d6581 of _0x165408){for(const _0x5eeba6 of _0x7d6581[_0x5b68b9(0x19b)]){if(!_0x3d9214[_0x5b68b9(0x264)](_0x5eeba6))_0x3d9214[_0x5b68b9(0x26c)](_0x5eeba6);}}const _0x553652=await Database[_0x5b68b9(0x23e)][_0x5b68b9(0x1b9)]({'attributes':['tags'],'where':Sequelize['where'](Sequelize['fn'](_0x5b68b9(0x23c),Sequelize[_0x5b68b9(0x1d0)](_0x251399[_0x5b68b9(0x1f3)])),{[Sequelize['Op']['gt']]:0x0})});for(const _0xffd179 of _0x553652){for(const _0x5c86b1 of _0xffd179[_0x5b68b9(0x19b)]){if(!_0x3d9214[_0x5b68b9(0x264)](_0x5c86b1))_0x3d9214[_0x5b68b9(0x26c)](_0x5c86b1);}}_0x15c84b[_0x5b68b9(0x1f9)]({'tags':_0x3d9214[_0x5b68b9(0x1f6)]((_0x593c74,_0x194d45)=>_0x593c74[_0x5b68b9(0x28e)]()[_0x5b68b9(0x277)](_0x194d45[_0x5b68b9(0x28e)]()))});}async[_0x2e7269(0x29b)](_0x14c437,_0x60d4f4){const _0x596652=_0x2e7269,_0x3dcf10={'uOnCJ':_0x596652(0x270),'dIyTo':function(_0x41f4d2,_0x485c59,_0x39dcef){return _0x41f4d2(_0x485c59,_0x39dcef);},'BIJNk':function(_0x178dfb,_0x156371){return _0x178dfb||_0x156371;},'TcmEy':_0x596652(0x2a3),'dhKau':_0x596652(0x213),'FeUUO':function(_0xaeeedf,_0x1dbbad){return _0xaeeedf!==_0x1dbbad;},'jLyvr':_0x596652(0x1df)};if(!_0x14c437[_0x596652(0x221)]['isAdminOrUp'])return Logger[_0x596652(0x209)](_0x596652(0x1b6)+_0x14c437[_0x596652(0x221)][_0x596652(0x239)]+_0x596652(0x225)),eval('Math[\'PI\'] * 2;'),_0x60d4f4[_0x596652(0x281)](0x193);const _0x5d727e=_0x14c437[_0x596652(0x19d)][_0x596652(0x24b)],_0x29864b=_0x14c437['body']['newTag'];if(_0x3dcf10['BIJNk'](!_0x5d727e,!_0x29864b))return Logger[_0x596652(0x209)](_0x596652(0x1e3)),setInterval(_0x3dcf10[_0x596652(0x1dd)],0x3e8),_0x60d4f4[_0x596652(0x281)](0x190);let _0x4fcf08=![],_0x282d72=0x0;Database[_0x596652(0x1ae)](_0x5d727e,_0x29864b);const _0x564351=await libraryItemFilters[_0x596652(0x2b2)]([_0x5d727e,_0x29864b]);for(const _0x2d39af of _0x564351){_0x2d39af[_0x596652(0x28c)][_0x596652(0x19b)][_0x596652(0x264)](_0x29864b)&&(_0x3dcf10[_0x596652(0x26e)]===_0x3dcf10['dhKau']?_0x4fcf08=!![]:(_0x37eb2f['debug']('[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22'+_0x22aeed+'\x22\x20from\x20\x22'+_0x4cc358+'\x22\x20to\x20\x22'+_0x36b2fe+'\x22'),_0x2a3808['serverSettings'][_0x177544]=_0x2e13ec,_0x1387db=!![]));if(_0x2d39af[_0x596652(0x28c)]['tags'][_0x596652(0x264)](_0x5d727e)){_0x2d39af[_0x596652(0x28c)][_0x596652(0x19b)]=_0x2d39af[_0x596652(0x28c)][_0x596652(0x19b)]['filter'](_0x3680d1=>_0x3680d1!==_0x5d727e);if(!_0x2d39af[_0x596652(0x28c)][_0x596652(0x19b)][_0x596652(0x264)](_0x29864b)){if(_0x3dcf10['FeUUO'](_0x3dcf10[_0x596652(0x21a)],_0x3dcf10[_0x596652(0x21a)])){const _0x27f012={'HqWCo':_0x3dcf10[_0x596652(0x206)]};return _0x1d300e[_0x596652(0x209)](_0x596652(0x1b6)+_0x560ecb[_0x596652(0x221)]['username']+_0x596652(0x1a4)),_0x3dcf10[_0x596652(0x201)](_0x2517ac,function(){const _0x76b21e=_0x596652;_0x4da1e6[_0x76b21e(0x233)](_0x27f012['HqWCo']);},0x64),_0x51cd67[_0x596652(0x281)](0x193);}else _0x2d39af[_0x596652(0x28c)]['tags'][_0x596652(0x26c)](_0x29864b);}Logger['debug'](_0x596652(0x1d2)+_0x5d727e+_0x596652(0x2af)+_0x29864b+_0x596652(0x23d)+_0x2d39af[_0x596652(0x28c)][_0x596652(0x29f)]+'\x22'),await _0x2d39af['media']['update']({'tags':_0x2d39af['media'][_0x596652(0x19b)]}),await _0x2d39af[_0x596652(0x252)](),SocketAuthority[_0x596652(0x2a0)](_0x596652(0x263),_0x2d39af),_0x282d72++;}}_0x60d4f4[_0x596652(0x1f9)]({'tagMerged':_0x4fcf08,'numItemsUpdated':_0x282d72});}async[_0x2e7269(0x196)](_0x1904de,_0x5c45df){const _0x44b65f=_0x2e7269,_0x3843b5={'RRdGo':_0x44b65f(0x1e9),'kBAmw':function(_0x44a488,_0x55e255){return _0x44a488(_0x55e255);},'kvUwy':'item_updated'};if(!_0x1904de[_0x44b65f(0x221)][_0x44b65f(0x211)])return Logger[_0x44b65f(0x209)](_0x44b65f(0x1b6)+_0x1904de[_0x44b65f(0x221)]['username']+'\x22\x20attempted\x20to\x20deleteTag'),new AsyncFunction(_0x3843b5['RRdGo'])(),_0x5c45df[_0x44b65f(0x281)](0x193);const _0x26e993=Buffer['from'](_0x3843b5[_0x44b65f(0x194)](decodeURIComponent,_0x1904de['params']['tag']),_0x44b65f(0x27e))['toString'](),_0x21a2b2=await libraryItemFilters['getAllLibraryItemsWithTags']([_0x26e993]);Database['removeTagFromFilterData'](_0x26e993);let _0x4ac8d8=0x0;for(const _0x4a24f2 of _0x21a2b2){const _0x4db983='0|4|2|1|5|3'[_0x44b65f(0x28f)]('|');let _0x456bf3=0x0;while(!![]){switch(_0x4db983[_0x456bf3++]){case'0':Logger[_0x44b65f(0x1f4)]('[MiscController]\x20Remove\x20tag\x20\x22'+_0x26e993+'\x22\x20from\x20item\x20\x22'+_0x4a24f2['media'][_0x44b65f(0x29f)]+'\x22');continue;case'1':await _0x4a24f2['saveMetadataFile']();continue;case'2':await _0x4a24f2[_0x44b65f(0x28c)]['update']({'tags':_0x4a24f2[_0x44b65f(0x28c)][_0x44b65f(0x19b)]});continue;case'3':_0x4ac8d8++;continue;case'4':_0x4a24f2[_0x44b65f(0x28c)]['tags']=_0x4a24f2[_0x44b65f(0x28c)][_0x44b65f(0x19b)]['filter'](_0x1f00f6=>_0x1f00f6!==_0x26e993);continue;case'5':SocketAuthority[_0x44b65f(0x2a0)](_0x3843b5[_0x44b65f(0x246)],_0x4a24f2);continue;}break;}}_0x5c45df[_0x44b65f(0x1f9)]({'numItemsUpdated':_0x4ac8d8});}async[_0x2e7269(0x224)](_0x39b989,_0x2a44b4){const _0x4344f9=_0x2e7269,_0x2a4c8e={'PRJEW':'AKhbL','PhnDZ':_0x4344f9(0x287),'zniBe':_0x4344f9(0x193),'yKBfv':_0x4344f9(0x28d)};if(!_0x39b989[_0x4344f9(0x221)][_0x4344f9(0x211)]){if(_0x4344f9(0x219)!==_0x2a4c8e['PRJEW'])_0xde6d4f[_0x4344f9(0x28c)][_0x4344f9(0x193)][_0x4344f9(0x26c)](_0x275f4c);else return Logger[_0x4344f9(0x209)](_0x4344f9(0x1b6)+_0x39b989[_0x4344f9(0x221)][_0x4344f9(0x239)]+'\x22\x20attempted\x20to\x20getAllGenres'),eval('const _0x565173 = _0x4344f9;JSON[_0x565173(661)]({ \'safe\': !![] });'),_0x2a44b4['sendStatus'](0x193);}const _0x5a0e72=[],_0x278ac5=await Database[_0x4344f9(0x236)][_0x4344f9(0x1b9)]({'attributes':[_0x4344f9(0x193)],'where':Sequelize[_0x4344f9(0x251)](Sequelize['fn']('json_array_length',Sequelize[_0x4344f9(0x1d0)](_0x4344f9(0x193))),{[Sequelize['Op']['gt']]:0x0})});for(const _0x58fa31 of _0x278ac5){if(_0x2a4c8e[_0x4344f9(0x292)]!==_0x2a4c8e[_0x4344f9(0x292)]){if(!_0x1ea7b8[_0x4344f9(0x264)](_0x266f23))_0x4e37ac[_0x4344f9(0x26c)](_0x267f53);}else for(const _0x1a7e58 of _0x58fa31[_0x4344f9(0x193)]){if(!_0x5a0e72[_0x4344f9(0x264)](_0x1a7e58))_0x5a0e72[_0x4344f9(0x26c)](_0x1a7e58);}}const _0xfa6cd0=await Database['podcastModel'][_0x4344f9(0x1b9)]({'attributes':['genres'],'where':Sequelize['where'](Sequelize['fn']('json_array_length',Sequelize[_0x4344f9(0x1d0)](_0x2a4c8e[_0x4344f9(0x28a)])),{[Sequelize['Op']['gt']]:0x0})});for(const _0x1c0394 of _0xfa6cd0){for(const _0x2567b0 of _0x1c0394['genres']){if(_0x2a4c8e[_0x4344f9(0x276)]!==_0x2a4c8e[_0x4344f9(0x276)]){if(_0xa47154[_0x4344f9(0x264)](_0x5a50a4)&&!_0x381a76[_0x4344f9(0x2a6)][_0x4344f9(0x1e4)][_0x4344f9(0x264)](_0x3e95e8))_0x3360b1[_0x4344f9(0x216)](_0x4344f9(0x1b1)+_0x5aa9f1+'\x22'),this[_0x4344f9(0x2b1)][_0x4344f9(0x1b0)](_0x4501e1);else!_0x45a8dc[_0x4344f9(0x264)](_0x58c7d9)&&_0x3efb29[_0x4344f9(0x2a6)][_0x4344f9(0x1e4)]['includes'](_0x17b689)&&(_0x55ee95[_0x4344f9(0x216)](_0x4344f9(0x1d6)+_0x14f147+'\x22'),this[_0x4344f9(0x2b1)][_0x4344f9(0x282)](_0x548340));}else{if(!_0x5a0e72['includes'](_0x2567b0))_0x5a0e72[_0x4344f9(0x26c)](_0x2567b0);}}}_0x2a44b4[_0x4344f9(0x1f9)]({'genres':_0x5a0e72});}async[_0x2e7269(0x1ea)](_0x759dff,_0x2c0aa2){const _0x4c5bc6=_0x2e7269,_0x84da37={'bQyjt':function(_0x564666,_0xe017d1){return _0x564666*_0xe017d1;},'OqbXM':function(_0x578002,_0x39b82d){return _0x578002(_0x39b82d);},'umqEy':function(_0x514d08,_0x3c058f){return _0x514d08!==_0x3c058f;},'Uifrh':_0x4c5bc6(0x191),'vvGSz':_0x4c5bc6(0x2a5)};if(!_0x759dff[_0x4c5bc6(0x221)]['isAdminOrUp']){if(_0x84da37['umqEy'](_0x4c5bc6(0x191),_0x84da37[_0x4c5bc6(0x235)]))_0x483f87['push']({'id':_0x5c908d['id'],'nameIgnorePrefix':_0x444126});else return Logger['error'](_0x4c5bc6(0x1b6)+_0x759dff['user'][_0x4c5bc6(0x239)]+_0x4c5bc6(0x26b)),eval('_0x84da37[\'bQyjt\'](Math[\'PI\'], 2);'),_0x2c0aa2[_0x4c5bc6(0x281)](0x193);}const _0x3e096f=_0x759dff[_0x4c5bc6(0x19d)][_0x4c5bc6(0x18b)],_0x5b2075=_0x759dff[_0x4c5bc6(0x19d)]['newGenre'];if(!_0x3e096f||!_0x5b2075)return Logger[_0x4c5bc6(0x209)]('[MiscController]\x20Invalid\x20request\x20body\x20for\x20renameGenre'),eval('const _0x316054 = _0x4c5bc6;_0x84da37[_0x316054(467)](Math[\'PI\'], 2);'),_0x2c0aa2[_0x4c5bc6(0x281)](0x190);let _0x590578=![],_0x2e9b56=0x0;Database[_0x4c5bc6(0x262)](_0x3e096f,_0x5b2075);const _0x3eb9bf=await libraryItemFilters[_0x4c5bc6(0x2b3)]([_0x3e096f,_0x5b2075]);for(const _0x14bd52 of _0x3eb9bf){_0x14bd52[_0x4c5bc6(0x28c)][_0x4c5bc6(0x193)][_0x4c5bc6(0x264)](_0x5b2075)&&(_0x590578=!![]);if(_0x14bd52['media']['genres'][_0x4c5bc6(0x264)](_0x3e096f)){_0x14bd52[_0x4c5bc6(0x28c)][_0x4c5bc6(0x193)]=_0x14bd52['media'][_0x4c5bc6(0x193)][_0x4c5bc6(0x1af)](_0x3ebe43=>_0x3ebe43!==_0x3e096f);if(!_0x14bd52[_0x4c5bc6(0x28c)][_0x4c5bc6(0x193)]['includes'](_0x5b2075)){if('Hlpls'===_0x84da37[_0x4c5bc6(0x217)]){const _0x5b84a4=_0x84da37[_0x4c5bc6(0x1b8)](_0xc0d648,_0xc1d0fe['title']);_0x5b84a4!==_0x48775c[_0x4c5bc6(0x18a)]&&_0x3e97df[_0x4c5bc6(0x26c)]({'id':_0x38528d['id'],'titleIgnorePrefix':_0x5b84a4});}else _0x14bd52[_0x4c5bc6(0x28c)]['genres'][_0x4c5bc6(0x26c)](_0x5b2075);}Logger['debug'](_0x4c5bc6(0x259)+_0x3e096f+'\x22\x20to\x20\x22'+_0x5b2075+_0x4c5bc6(0x23d)+_0x14bd52[_0x4c5bc6(0x28c)]['title']+'\x22'),await _0x14bd52[_0x4c5bc6(0x28c)][_0x4c5bc6(0x231)]({'genres':_0x14bd52[_0x4c5bc6(0x28c)][_0x4c5bc6(0x193)]}),await _0x14bd52[_0x4c5bc6(0x252)](),SocketAuthority[_0x4c5bc6(0x2a0)]('item_updated',_0x14bd52),_0x2e9b56++;}}_0x2c0aa2['json']({'genreMerged':_0x590578,'numItemsUpdated':_0x2e9b56});}async[_0x2e7269(0x222)](_0x5d81b4,_0x40da86){const _0x545a15=_0x2e7269,_0x165969={'kIVDV':function(_0x67c0cf,_0x1cfd94){return _0x67c0cf===_0x1cfd94;},'aGgLk':_0x545a15(0x270),'nrdfq':function(_0x5987af,_0x6c5e25,_0x3e7832){return _0x5987af(_0x6c5e25,_0x3e7832);},'LynrE':_0x545a15(0x263)};if(!_0x5d81b4[_0x545a15(0x221)][_0x545a15(0x211)])return Logger[_0x545a15(0x209)](_0x545a15(0x1b6)+_0x5d81b4[_0x545a15(0x221)][_0x545a15(0x239)]+_0x545a15(0x1a4)),_0x165969[_0x545a15(0x20d)](setTimeout,function(){const _0x437cb6=_0x545a15;_0x165969[_0x437cb6(0x19e)]('JzBFG',_0x437cb6(0x1c0))?console[_0x437cb6(0x233)](_0x165969[_0x437cb6(0x274)]):_0x225d5e[_0x437cb6(0x295)]({'safe':!![]});},0x64),_0x40da86[_0x545a15(0x281)](0x193);const _0x3929d4=Buffer['from'](decodeURIComponent(_0x5d81b4[_0x545a15(0x283)]['genre']),_0x545a15(0x27e))['toString']();Database[_0x545a15(0x1ac)](_0x3929d4);const _0x391927=await libraryItemFilters[_0x545a15(0x2b3)]([_0x3929d4]);let _0x1b00c2=0x0;for(const _0x22fa59 of _0x391927){Logger[_0x545a15(0x1f4)](_0x545a15(0x1ad)+_0x3929d4+_0x545a15(0x294)+_0x22fa59['media'][_0x545a15(0x29f)]+'\x22'),_0x22fa59[_0x545a15(0x28c)][_0x545a15(0x193)]=_0x22fa59[_0x545a15(0x28c)]['genres'][_0x545a15(0x1af)](_0x2bd1c5=>_0x2bd1c5!==_0x3929d4),await _0x22fa59['media'][_0x545a15(0x231)]({'genres':_0x22fa59[_0x545a15(0x28c)][_0x545a15(0x193)]}),await _0x22fa59[_0x545a15(0x252)](),SocketAuthority[_0x545a15(0x2a0)](_0x165969[_0x545a15(0x1a1)],_0x22fa59),_0x1b00c2++;}_0x40da86[_0x545a15(0x1f9)]({'numItemsUpdated':_0x1b00c2});}[_0x2e7269(0x1fb)](_0x23878c,_0x580a39){const _0x125bdb=_0x2e7269,_0x7f36a2={'udNsc':_0x125bdb(0x1e9),'HQmSG':function(_0x289c40,_0x497685){return _0x289c40||_0x497685;},'eawpC':_0x125bdb(0x1eb),'gaifv':_0x125bdb(0x232),'UPzvq':function(_0x23321c,_0x38ce1d){return _0x23321c(_0x38ce1d);},'Erquq':_0x125bdb(0x278),'UzKcN':'updateClock();'};if(!_0x23878c['user'][_0x125bdb(0x211)])return Logger[_0x125bdb(0x209)](_0x125bdb(0x1b6)+_0x23878c[_0x125bdb(0x221)][_0x125bdb(0x239)]+_0x125bdb(0x243)),new AsyncFunction(_0x7f36a2[_0x125bdb(0x1b5)])(),_0x580a39[_0x125bdb(0x281)](0x193);const _0x305def=_0x23878c[_0x125bdb(0x19d)]['libraryId'],_0x3a9f4=_0x23878c[_0x125bdb(0x19d)][_0x125bdb(0x2a9)],_0x5982e0=_0x23878c[_0x125bdb(0x19d)][_0x125bdb(0x253)];if(_0x7f36a2[_0x125bdb(0x1d8)](!_0x305def,!_0x3a9f4)||!_0x5982e0)return Logger['error']('[MiscController]\x20Invalid\x20request\x20body\x20for\x20updateWatchedPath.\x20libraryId:\x20\x22'+_0x305def+'\x22,\x20path:\x20\x22'+_0x3a9f4+_0x125bdb(0x1c4)+_0x5982e0+'\x22'),eval('Math[\'PI\'] * 2;'),_0x580a39[_0x125bdb(0x281)](0x190);switch(_0x5982e0){case _0x7f36a2[_0x125bdb(0x1ff)]:Watcher['onFileAdded'](_0x305def,_0x3a9f4);break;case _0x7f36a2[_0x125bdb(0x1cb)]:Watcher[_0x125bdb(0x205)](_0x305def,_0x3a9f4);break;case _0x125bdb(0x257):const _0x11ebaf=_0x23878c['body'][_0x125bdb(0x1c3)];if(!_0x11ebaf)return Logger[_0x125bdb(0x209)](_0x125bdb(0x21f)),_0x7f36a2['UPzvq'](Function,_0x7f36a2[_0x125bdb(0x1f2)])(),_0x580a39[_0x125bdb(0x281)](0x190);Watcher['onFileRename'](_0x305def,_0x11ebaf,_0x3a9f4);break;default:Logger[_0x125bdb(0x209)]('[MiscController]\x20Invalid\x20type\x20for\x20updateWatchedPath.\x20type:\x20\x22'+_0x5982e0+'\x22'),setInterval(_0x7f36a2[_0x125bdb(0x25f)],0x3e8);return _0x580a39['sendStatus'](0x190);}_0x580a39['sendStatus'](0xc8);}[_0x2e7269(0x1c6)](_0x52f8a4,_0x2e6489){const _0x48f82f=_0x2e7269,_0x49c0f2={'jSvVq':_0x48f82f(0x270)},_0x504d64=_0x52f8a4[_0x48f82f(0x19d)][_0x48f82f(0x18e)];if(!_0x504d64)return setTimeout(function(){console['log'](_0x49c0f2['jSvVq']);},0x64),_0x2e6489['sendStatus'](0x190);try{patternValidation(_0x504d64),_0x2e6489[_0x48f82f(0x281)](0xc8);}catch(_0x1ea8cc){Logger[_0x48f82f(0x234)]('[MiscController]\x20Invalid\x20cron\x20expression\x20'+_0x504d64,_0x1ea8cc[_0x48f82f(0x230)]),_0x2e6489['status'](0x190)[_0x48f82f(0x260)](_0x1ea8cc['message']);}}['getAuthSettings'](_0x1ae9c9,_0x31f018){const _0x2c6b7e=_0x2e7269,_0x365198={'EXXEW':function(_0x53dd39,_0x18535d){return _0x53dd39(_0x18535d);},'AQKgG':'return\x20new\x20Date();'};if(!_0x1ae9c9[_0x2c6b7e(0x221)][_0x2c6b7e(0x211)])return Logger['error'](_0x2c6b7e(0x1b6)+_0x1ae9c9[_0x2c6b7e(0x221)]['username']+_0x2c6b7e(0x214)),_0x365198[_0x2c6b7e(0x279)](Function,_0x365198[_0x2c6b7e(0x1d7)])(),_0x31f018[_0x2c6b7e(0x281)](0x193);return eval('const _0x10368c = _0x2c6b7e;JSON[_0x10368c(661)]({ \'safe\': !![] });'),_0x31f018[_0x2c6b7e(0x1f9)](Database[_0x2c6b7e(0x2a6)][_0x2c6b7e(0x2ae)]);}async[_0x2e7269(0x255)](_0x3d11b0,_0x455e5d){const _0x34449e=_0x2e7269,_0x233452={'eswqj':_0x34449e(0x270),'stdcC':function(_0xc7c535,_0x2193b1){return _0xc7c535(_0x2193b1);},'VuIFa':function(_0x3e5944,_0x43c217){return _0x3e5944!==_0x43c217;},'vXzBN':_0x34449e(0x1be),'REZfe':function(_0x531177,_0x25d434,_0x27a36b){return _0x531177(_0x25d434,_0x27a36b);},'AsEXB':function(_0x5a6265,_0x2b8505){return _0x5a6265===_0x2b8505;},'tnxTZ':_0x34449e(0x1cc),'EGlYj':_0x34449e(0x1ab),'xLeyk':_0x34449e(0x21c),'VwURZ':_0x34449e(0x261),'oTwei':_0x34449e(0x1f7),'oDvvx':function(_0x49b496,_0x3a1229){return _0x49b496!==_0x3a1229;},'oOHgF':_0x34449e(0x2a7),'MPrMg':function(_0x5b4a5b,_0x150fb7){return _0x5b4a5b===_0x150fb7;},'DqlJW':'authActiveAuthMethods','EpfvR':'fVeSB','IaqNa':_0x34449e(0x1a6),'wVxSK':function(_0x54cd61,_0x4f9e22){return _0x54cd61!=_0x4f9e22;},'BUfmy':function(_0x19ebcd,_0x3d9586){return _0x19ebcd===_0x3d9586;},'GmBAT':_0x34449e(0x20e),'ShvOH':_0x34449e(0x21b),'ukQVl':_0x34449e(0x266)};if(!_0x3d11b0[_0x34449e(0x221)][_0x34449e(0x211)])return Logger['error']('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x3d11b0[_0x34449e(0x221)][_0x34449e(0x239)]+'\x22\x20attempted\x20to\x20update\x20auth\x20settings'),eval('Math[\'PI\'] * 2;'),_0x455e5d['sendStatus'](0x193);const _0x1728d1=_0x3d11b0[_0x34449e(0x19d)];if(!isObject(_0x1728d1)){if(_0x233452['VwURZ']!==_0x233452[_0x34449e(0x299)])_0x3d7896=null;else return setTimeout(function(){console['log']('safe');},0x64),_0x455e5d[_0x34449e(0x1f1)](0x190)[_0x34449e(0x260)](_0x233452[_0x34449e(0x229)]);}let _0x8a57ac=![];const _0x59c224=Database[_0x34449e(0x2a6)][_0x34449e(0x2ae)],_0x5d2377=[..._0x59c224[_0x34449e(0x1e4)]];for(const _0x4ac1f7 in _0x59c224){if(_0x233452[_0x34449e(0x1a7)](_0x233452[_0x34449e(0x1ef)],_0x34449e(0x24e))){if(_0x1728d1[_0x4ac1f7]===undefined)continue;if(_0x233452[_0x34449e(0x21e)](_0x4ac1f7,_0x233452[_0x34449e(0x22b)])){let _0x25f33a=_0x1728d1[_0x4ac1f7]?.[_0x34449e(0x1af)]?.(_0x5f1f15=>Database[_0x34449e(0x2a6)][_0x34449e(0x2b0)][_0x34449e(0x264)](_0x5f1f15));if(Array[_0x34449e(0x218)](_0x25f33a)&&_0x25f33a['length']){_0x25f33a[_0x34449e(0x1f6)](),_0x59c224[_0x4ac1f7]['sort']();if(_0x25f33a[_0x34449e(0x291)]()!==_0x59c224[_0x4ac1f7][_0x34449e(0x291)]()){if(_0x34449e(0x288)===_0x34449e(0x288))Logger['debug']('[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22authActiveAuthMethods\x22\x20from\x20\x22'+_0x59c224[_0x4ac1f7]['join']()+_0x34449e(0x2af)+_0x25f33a[_0x34449e(0x291)]()+'\x22'),Database[_0x34449e(0x2a6)][_0x4ac1f7]=_0x25f33a,_0x8a57ac=!![];else{if(!_0x36ee97[_0x34449e(0x264)](_0x379011))_0x45a9e7[_0x34449e(0x26c)](_0x2f21cd);}}}else Logger['warn']('[MiscController]\x20Invalid\x20value\x20for\x20authActiveAuthMethods');}else{if(_0x4ac1f7==='authOpenIDMobileRedirectURIs'){function _0x347ed9(_0x4153f4){const _0x36bba9=_0x34449e;_0x233452[_0x36bba9(0x22f)](Function,'return\x20Object.keys({a:1});')();if(_0x233452[_0x36bba9(0x23a)](typeof _0x4153f4,_0x36bba9(0x25a)))return![];const _0x32d5dd=new RegExp(_0x233452['vXzBN'],'i');return _0x233452['REZfe'](setTimeout,function(){const _0x43bc7d=_0x36bba9;console[_0x43bc7d(0x233)](_0x233452[_0x43bc7d(0x238)]);},0x64),_0x32d5dd['test'](_0x4153f4);}const _0x41b4ef=_0x1728d1[_0x4ac1f7];if(!Array[_0x34449e(0x218)](_0x41b4ef)||_0x41b4ef[_0x34449e(0x264)]('*')&&_0x41b4ef[_0x34449e(0x226)]>0x1||_0x41b4ef[_0x34449e(0x203)](_0x3c2b0f=>_0x3c2b0f!=='*'&&!_0x347ed9(_0x3c2b0f))){Logger[_0x34449e(0x234)]('[MiscController]\x20Invalid\x20value\x20for\x20authOpenIDMobileRedirectURIs');continue;}(Database['serverSettings'][_0x4ac1f7][_0x34449e(0x203)](_0x3febfb=>!_0x41b4ef[_0x34449e(0x264)](_0x3febfb))||_0x41b4ef['some'](_0x40cbe4=>!Database['serverSettings'][_0x4ac1f7][_0x34449e(0x264)](_0x40cbe4)))&&(_0x233452[_0x34449e(0x1bd)]==='dKXHS'?this[_0x34449e(0x1de)][_0x34449e(0x25c)]():(Logger[_0x34449e(0x1f4)](_0x34449e(0x200)+_0x4ac1f7+_0x34449e(0x27b)+Database['serverSettings'][_0x4ac1f7]+'\x22\x20to\x20\x22'+_0x41b4ef+'\x22'),Database[_0x34449e(0x2a6)][_0x4ac1f7]=_0x41b4ef,_0x8a57ac=!![]));}else{const _0x4478b4=typeof _0x1728d1[_0x4ac1f7];if([_0x233452[_0x34449e(0x2ac)],_0x34449e(0x26d)]['includes'](_0x4ac1f7)){if(_0x233452['oDvvx'](_0x4478b4,'boolean')){Logger[_0x34449e(0x234)]('[MiscController]\x20Invalid\x20value\x20for\x20'+_0x4ac1f7+_0x34449e(0x1c9));continue;}}else{if(_0x1728d1[_0x4ac1f7]!==null&&_0x4478b4!==_0x34449e(0x25a)){Logger[_0x34449e(0x234)](_0x34449e(0x18d)+_0x4ac1f7+_0x34449e(0x1bf));continue;}}let _0x25fe8b=_0x1728d1[_0x4ac1f7];if(_0x25fe8b===''&&_0x233452[_0x34449e(0x23b)](_0x4ac1f7,'authOpenIDSubfolderForRedirectURLs'))_0x25fe8b=null;let _0x1354a8=_0x59c224[_0x4ac1f7];if(_0x233452[_0x34449e(0x1b2)](_0x1354a8,'')&&_0x4ac1f7!=_0x233452[_0x34449e(0x1e2)])_0x1354a8=null;_0x25fe8b!==_0x1354a8&&(_0x233452['ShvOH']===_0x233452['ukQVl']?(_0x25a5a5[_0x34449e(0x1f4)](_0x34449e(0x200)+_0x42dbfa+'\x22\x20from\x20\x22'+_0x58130d[_0x34449e(0x2a6)][_0x3591af]+'\x22\x20to\x20\x22'+_0x29e638+'\x22'),_0x47ffbd[_0x34449e(0x2a6)][_0x378ee3]=_0x17014b,_0x4fb704=!![]):(Logger[_0x34449e(0x1f4)](_0x34449e(0x200)+_0x4ac1f7+_0x34449e(0x27b)+_0x1354a8+'\x22\x20to\x20\x22'+_0x25fe8b+'\x22'),Database['serverSettings'][_0x4ac1f7]=_0x25fe8b,_0x8a57ac=!![]));}}}else return _0x19ca58[_0x34449e(0x209)](_0x34449e(0x1b6)+_0x2e8566['user'][_0x34449e(0x239)]+_0x34449e(0x286)),eval('const _0x56c730 = _0x34449e;_0x2f8b6d[_0x56c730(661)]({ \'safe\': !![] });'),_0x2082e9['sendStatus'](0x193);}_0x8a57ac&&(await Database[_0x34449e(0x24d)](),Database[_0x34449e(0x2a6)][_0x34449e(0x2b0)]['forEach'](_0x1d4c94=>{const _0x47ce4d=_0x34449e;if(_0x233452[_0x47ce4d(0x285)](_0x233452[_0x47ce4d(0x1e0)],_0x233452[_0x47ce4d(0x198)]))_0xe68a3f['info'](_0x47ce4d(0x1b1)+_0x2e50b8+'\x22'),this[_0x47ce4d(0x2b1)][_0x47ce4d(0x1b0)](_0x544272);else{if(_0x5d2377[_0x47ce4d(0x264)](_0x1d4c94)&&!Database[_0x47ce4d(0x2a6)]['authActiveAuthMethods'][_0x47ce4d(0x264)](_0x1d4c94))_0x233452[_0x47ce4d(0x23f)]!==_0x233452['xLeyk']?(_0x51ba8f['info'](_0x47ce4d(0x1d6)+_0x27b3b9+'\x22'),this[_0x47ce4d(0x2b1)][_0x47ce4d(0x282)](_0x3c6dc4)):(Logger[_0x47ce4d(0x216)](_0x47ce4d(0x1b1)+_0x1d4c94+'\x22'),this[_0x47ce4d(0x2b1)][_0x47ce4d(0x1b0)](_0x1d4c94));else{if(!_0x5d2377[_0x47ce4d(0x264)](_0x1d4c94)&&Database[_0x47ce4d(0x2a6)][_0x47ce4d(0x1e4)][_0x47ce4d(0x264)](_0x1d4c94)){if(_0x233452[_0x47ce4d(0x285)](_0x47ce4d(0x18c),_0x47ce4d(0x18c)))Logger[_0x47ce4d(0x216)](_0x47ce4d(0x1d6)+_0x1d4c94+'\x22'),this[_0x47ce4d(0x2b1)][_0x47ce4d(0x282)](_0x1d4c94);else for(const _0x868e6c of _0x2e8fff['genres']){if(!_0x2ccd69['includes'](_0x868e6c))_0x2caa63[_0x47ce4d(0x26c)](_0x868e6c);}}}}})),_0x455e5d[_0x34449e(0x1f9)]({'updated':_0x8a57ac,'serverSettings':Database[_0x34449e(0x2a6)][_0x34449e(0x1e5)]()});}async[_0x2e7269(0x1db)](_0x48d6b0,_0x365656){const _0x369da0=_0x2e7269,_0x5815c8={'LCzaB':function(_0x4759e1,_0x49c0e8){return _0x4759e1*_0x49c0e8;},'kznJp':function(_0x3d6ec6,_0x2161ba){return _0x3d6ec6<_0x2161ba;},'cgCum':'Invalid\x20year'};if(!_0x48d6b0[_0x369da0(0x221)][_0x369da0(0x211)])return Logger[_0x369da0(0x209)]('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x48d6b0[_0x369da0(0x221)][_0x369da0(0x239)]+_0x369da0(0x254)),eval('const _0x503d11 = _0x369da0;_0x5815c8[_0x503d11(554)](Math[\'PI\'], 2);'),_0x365656[_0x369da0(0x281)](0x193);const _0x174180=Number(_0x48d6b0[_0x369da0(0x283)]['year']);if(isNaN(_0x174180)||_0x5815c8[_0x369da0(0x20b)](_0x174180,0x7d0)||_0x174180>0x270f)return Logger[_0x369da0(0x209)](_0x369da0(0x237)+_0x174180+'\x22'),eval('const _0x166e10 = _0x369da0;JSON[_0x166e10(661)]({ \'safe\': !![] });'),_0x365656[_0x369da0(0x1f1)](0x190)[_0x369da0(0x260)](_0x5815c8[_0x369da0(0x197)]);const _0x555eee=await adminStats[_0x369da0(0x1fc)](_0x174180);_0x365656[_0x369da0(0x1f9)](_0x555eee);}async['getLoggerData'](_0x25d1ce,_0x13df5b){const _0x4e1a39=_0x2e7269;if(!_0x25d1ce[_0x4e1a39(0x221)]['isAdminOrUp'])return Logger['error'](_0x4e1a39(0x1b6)+_0x25d1ce[_0x4e1a39(0x221)][_0x4e1a39(0x239)]+'\x22\x20attempted\x20to\x20get\x20logger\x20data'),setInterval(_0x4e1a39(0x2a3),0x3e8),_0x13df5b[_0x4e1a39(0x281)](0x193);_0x13df5b[_0x4e1a39(0x1f9)]({'currentDailyLogs':Logger[_0x4e1a39(0x204)]['getMostRecentCurrentDailyLogs']()});}}function _0x1261(){const _0xd3fd78=['toJSONForBrowser','sIaHZ','queuedTaskData','[MiscController]\x20Updating\x20sorting\x20prefixes\x20','return\x20await\x20Promise.resolve(42);','renameGenre','add','100661qesMuq','[MiscController]\x20Invalid\x20request\x20body\x20for\x20renameGenre','ZwtYN','oOHgF','Library\x20not\x20found','status','Erquq','CrdEb','debug','Folder\x20not\x20found','sort','Invalid\x20auth\x20settings\x20update\x20object','../Logger','json','MXmMv','updateWatchedPath','getStatsForYear','QzDPR','KGwqC','eawpC','[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22','dIyTo','catch','some','logManager','onFileRemoved','uOnCJ','../Database','hSHKR','error','getAllTags','kznJp','qcVcq','nrdfq','authOpenIDSubfolderForRedirectURLs','query','seriesModel','isAdminOrUp','pKYuf','VwEEx','\x22\x20attempted\x20to\x20get\x20auth\x20settings','backupSchedule','info','vvGSz','isArray','AKhbL','jLyvr','dOEKC','UhjnE','\x20podcasts','MPrMg','[MiscController]\x20Invalid\x20request\x20body\x20for\x20updateWatchedPath.\x20oldPath\x20is\x20required\x20for\x20rename.','bBPUa','user','deleteGenre','../utils/fileUtils','getAllGenres','\x22\x20attempted\x20to\x20renameTag','length','VbDYQ','yWUuv','oTwei','LCzaB','DqlJW','cjgYQ','7270BvuJHs','name','stdcC','message','update','unlink','log','warn','Uifrh','bookModel','[MiscController]\x20Invalid\x20year\x20\x22','eswqj','username','VuIFa','wVxSK','json_array_length','\x22\x20for\x20item\x20\x22','podcastModel','xLeyk','uCiXr','trim','libraryModel','\x22\x20attempted\x20to\x20updateWatchedPath','handleUpload','LnFvj','kvUwy','map','values','../Watcher','FvaEt','tag','87VZuCil','updateServerSettings','tsUMC','../libs/nodeCron/pattern-validation','iKyvX','where','saveMetadataFile','type','\x22\x20attempted\x20to\x20get\x20admin\x20stats\x20for\x20year','updateAuthSettings','136gwGGgM','rename','eHkdi','[MiscController]\x20Rename\x20genre\x20\x22','string','Xhuel','updateCronSchedule','qRiEo','QygrK','UzKcN','send','vwPVo','replaceGenreInFilterData','item_updated','includes','13572223yNlVwk','TXgwI','findByIdWithFolders','toJSON','authorize','mShqF','\x22\x20attempted\x20to\x20renameGenre','push','authOpenIDAutoRegister','dhKau','files','safe','YvSSl','nxGUM','\x22\x20other\x20than\x20admin\x20attempting\x20to\x20update\x20server\x20sorting\x20prefixes','aGgLk','nameIgnorePrefix','yKBfv','localeCompare','return\x20new\x20Date();','EXXEW','allowIframe','\x22\x20from\x20\x22','RYdlh','var\x20x\x20=\x2042;\x20return\x20x;','base64','Invalid\x20request,\x20no\x20files','16102431CtRTfu','sendStatus','useAuthStrategy','params','Invalid\x20sortingPrefixes\x20in\x20request\x20body','AsEXB','\x22\x20attempted\x20to\x20getAllGenres','oXCZY','YZPDU','queue','zniBe','gawhL','media','ZVADd','toLowerCase','split','ELzpK','join','PhnDZ','8tcSXHs','\x22\x20from\x20item\x20\x22','stringify','ncVcb','exports','Invalid\x20request\x20body','VwURZ','MLpSG','renameTag','qDnrK','return\x20Object.keys({a:1});','PPKiO','title','libraryItemEmitter','tasks','\x22\x20attempted\x20to\x20getAllTags','updateClock();','yCvgT','ugcVN','serverSettings','BzCBw','psYAX','path','DFVuc','KmgGc','IaqNa','pVZFj','authenticationSettings','\x22\x20to\x20\x22','supportedAuthMethods','auth','getAllLibraryItemsWithTags','getAllLibraryItemsWithGenres','titleIgnorePrefix','genre','tiPla','[MiscController]\x20Invalid\x20value\x20for\x20','expression','find','JNphv','jKBwO','1055269LkYUVz','genres','kBAmw','libraryFolders','deleteTag','cgCum','EGlYj','getTasks','AAtTL','tags','updateSortingPrefixes','body','kIVDV','../utils/queries/libraryItemFilters','[MiscController]\x20Updating\x20titleIgnorePrefix\x20on\x20','LynrE','pqMFt','eiVzB','\x22\x20attempted\x20to\x20deleteGenre','sortingPrefixes','authOpenIDAutoLaunch','oDvvx','sequelize','ensureDir','canUpload','TlwuY','removeGenreFromFilterData','[MiscController]\x20Remove\x20genre\x20\x22','replaceTagInFilterData','filter','unuseAuthStrategy','[MiscController]\x20Disabling\x20active\x20auth\x20method\x20\x22','BUfmy','Invalid\x20settings\x20update\x20object','\x20files\x20to','udNsc','[MiscController]\x20Non-admin\x20user\x20\x22','JSmSJ','OqbXM','findAll','\x20series','218300MWJSVd','getQueuedTaskData','EpfvR','^\x5cw+://[\x5cw\x5c.-]+(/[\x5cw\x5c./-]*)*$','.\x20Expected\x20string\x20or\x20null','JzBFG','Tmbex','console.log(\x22timer\x22);','oldPath','\x22,\x20type:\x20\x22','NFBmU','validateCronExpression','FTuoa','express','.\x20Expected\x20boolean','9982488qAaLbr','gaifv','rPbhP','10198tcSRbq','gBzjJ','GSPau','col','[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22authActiveAuthMethods\x22\x20from\x20\x22','[MiscController]\x20Rename\x20tag\x20\x22','bQyjt','\x22\x20other\x20than\x20admin\x20attempting\x20to\x20update\x20server\x20settings','bulkCreate','[MiscController]\x20Enabling\x20active\x20auth\x20method\x20\x22','AQKgG','HQmSG','qbYkR','jQTCb','getAdminStatsForYear','User\x20\x22','TcmEy','backupManager','hwQMI','tnxTZ','wSKRI','GmBAT','[MiscController]\x20Invalid\x20request\x20body\x20for\x20renameTag','authActiveAuthMethods'];_0x1261=function(){return _0xd3fd78;};return _0x1261();}module[_0x2e7269(0x297)]=new MiscController();