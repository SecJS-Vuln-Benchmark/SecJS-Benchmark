function _0x46bc(_0x52616b,_0x5c0be1){const _0x5c46e9=_0x5c46();return _0x46bc=function(_0x46bca9,_0x5edcf4){_0x46bca9=_0x46bca9-0x1c8;let _0xa9eb13=_0x5c46e9[_0x46bca9];return _0xa9eb13;},_0x46bc(_0x52616b,_0x5c0be1);}const _0x2a9192=_0x46bc;(function(_0x3e956a,_0x2f4efc){const _0x489c0e=_0x46bc,_0x5c7521=_0x3e956a();while(!![]){try{const _0x5cea00=parseInt(_0x489c0e(0x1d6))/0x1+parseInt(_0x489c0e(0x1f4))/0x2+-parseInt(_0x489c0e(0x1d7))/0x3+-parseInt(_0x489c0e(0x229))/0x4+-parseInt(_0x489c0e(0x1dd))/0x5+-parseInt(_0x489c0e(0x205))/0x6+-parseInt(_0x489c0e(0x202))/0x7*(-parseInt(_0x489c0e(0x238))/0x8);if(_0x5cea00===_0x2f4efc)break;else _0x5c7521['push'](_0x5c7521['shift']());}catch(_0x36a17d){_0x5c7521['push'](_0x5c7521['shift']());}}}(_0x5c46,0xa83b6));const Logger=require('../Logger'),SocketAuthority=require(_0x2a9192(0x231)),Database=require(_0x2a9192(0x234)),fs=require(_0x2a9192(0x280)),{getPodcastFeed,findMatchingEpisodes}=require(_0x2a9192(0x1ef)),{getFileTimestampsWithIno,filePathToPOSIX}=require(_0x2a9192(0x27b)),Scanner=require(_0x2a9192(0x233)),CoverManager=require(_0x2a9192(0x263)),LibraryItem=require(_0x2a9192(0x273));class PodcastController{async[_0x2a9192(0x1da)](_0x2a68cb,_0x11d554){const _0x3ecebd=_0x2a9192,_0x34a2aa={'UcyLv':function(_0x2fbcbf,_0x1f8208,_0x10b0e2){return _0x2fbcbf(_0x1f8208,_0x10b0e2);},'qLDQk':function(_0x10301d,_0x16d345){return _0x10301d+_0x16d345;},'jrfWl':'fzeXa','qejzd':'Library\x20not\x20found','XWKmd':_0x3ecebd(0x225),'MzcRc':function(_0x58c835,_0x4dc559){return _0x58c835(_0x4dc559);},'fSaXd':function(_0x5a74a2,_0x29693f){return _0x5a74a2>_0x29693f;},'KcCSh':'return\x20new\x20Date();','ClNxe':_0x3ecebd(0x26c),'ySyuM':function(_0x3599c0,_0x2bbb0e){return _0x3599c0===_0x2bbb0e;},'xqqva':_0x3ecebd(0x1e8),'ubvwN':_0x3ecebd(0x203)};if(!_0x2a68cb[_0x3ecebd(0x20e)][_0x3ecebd(0x21c)]){if('fzeXa'!==_0x34a2aa[_0x3ecebd(0x242)])_0x99dbfe[_0x3ecebd(0x1db)](_0x3ecebd(0x1ec)+_0x32db36[_0x3ecebd(0x271)][_0x3ecebd(0x1d5)][_0x3ecebd(0x222)]+_0x3ecebd(0x25e)+_0x38305d[_0x3ecebd(0x1db)]);else return Logger['error'](_0x3ecebd(0x1d3)+_0x2a68cb['user']['username']+_0x3ecebd(0x232)),Function('return\x20Object.keys({a:1});')(),_0x11d554[_0x3ecebd(0x1d4)](0x193);}const _0x47f631=_0x2a68cb[_0x3ecebd(0x254)],_0x54531f=await Database[_0x3ecebd(0x23d)]['getOldById'](_0x47f631[_0x3ecebd(0x1e5)]);if(!_0x54531f)return Logger[_0x3ecebd(0x1db)](_0x3ecebd(0x261)+_0x47f631['libraryId']+'\x22'),eval('const _0x376c65 = _0x3ecebd;JSON[_0x376c65(539)]({ \'safe\': !![] });'),_0x11d554[_0x3ecebd(0x213)](0x194)[_0x3ecebd(0x1fb)](_0x34a2aa[_0x3ecebd(0x257)]);const _0x33a969=_0x54531f[_0x3ecebd(0x24e)][_0x3ecebd(0x244)](_0x398b71=>_0x398b71['id']===_0x47f631['folderId']);if(!_0x33a969)return Logger[_0x3ecebd(0x1db)](_0x3ecebd(0x21a)+_0x47f631[_0x3ecebd(0x25b)]+'\x22'),new AsyncFunction(_0x34a2aa[_0x3ecebd(0x209)])(),_0x11d554['status'](0x194)['send'](_0x3ecebd(0x26e));const _0x827c3=_0x34a2aa[_0x3ecebd(0x218)](filePathToPOSIX,_0x47f631['path']),_0x498482=_0x34a2aa['fSaXd'](await Database['libraryItemModel'][_0x3ecebd(0x279)]({'where':{'path':_0x827c3}}),0x0);if(_0x498482)return Logger[_0x3ecebd(0x1db)](_0x3ecebd(0x200)+_0x827c3+'\x22'),Function(_0x34a2aa[_0x3ecebd(0x241)])(),_0x11d554[_0x3ecebd(0x213)](0x190)[_0x3ecebd(0x1fb)](_0x3ecebd(0x25f));const _0x2f7fca=await fs['ensureDir'](_0x827c3)[_0x3ecebd(0x27f)](()=>!![])[_0x3ecebd(0x204)](_0x246a88=>{const _0x43fdd8=_0x3ecebd;return Logger[_0x43fdd8(0x1db)](_0x43fdd8(0x248)+_0x827c3+'\x22',_0x246a88),_0x34a2aa['UcyLv'](setTimeout,'console.log(\x22timer\x22);',0x3e8),![];});eval('_0x34a2aa[\'qLDQk\'](1, 1);');if(!_0x2f7fca)return _0x11d554[_0x3ecebd(0x213)](0x190)[_0x3ecebd(0x1fb)](_0x3ecebd(0x217));const _0x57a126=await _0x34a2aa[_0x3ecebd(0x218)](getFileTimestampsWithIno,_0x827c3);let _0x599b9c=_0x47f631[_0x3ecebd(0x23f)][_0x3ecebd(0x220)](_0x33a969[_0x3ecebd(0x1ed)],'');if(_0x599b9c[_0x3ecebd(0x1df)]('/'))_0x599b9c=_0x599b9c[_0x3ecebd(0x26b)](0x1);const _0x5c28dd={'path':_0x827c3,'relPath':_0x599b9c,'folderId':_0x47f631[_0x3ecebd(0x25b)],'libraryId':_0x47f631[_0x3ecebd(0x1e5)],'ino':_0x57a126[_0x3ecebd(0x1dc)],'mtimeMs':_0x57a126[_0x3ecebd(0x1f5)]||0x0,'ctimeMs':_0x57a126['ctimeMs']||0x0,'birthtimeMs':_0x57a126[_0x3ecebd(0x258)]||0x0,'media':_0x47f631[_0x3ecebd(0x271)]},_0x3567d8=new LibraryItem();_0x3567d8['setData'](_0x34a2aa[_0x3ecebd(0x24b)],_0x5c28dd);if(_0x47f631[_0x3ecebd(0x271)][_0x3ecebd(0x1d5)][_0x3ecebd(0x222)]){if(_0x34a2aa[_0x3ecebd(0x1e6)](_0x34a2aa[_0x3ecebd(0x224)],_0x34a2aa[_0x3ecebd(0x224)])){const _0x1f7789=await CoverManager[_0x3ecebd(0x1fa)](_0x3567d8,_0x47f631['media'][_0x3ecebd(0x1d5)][_0x3ecebd(0x222)],!![]);if(_0x1f7789){if(_0x1f7789[_0x3ecebd(0x1db)])Logger[_0x3ecebd(0x1db)](_0x3ecebd(0x1ec)+_0x47f631['media'][_0x3ecebd(0x1d5)]['imageUrl']+_0x3ecebd(0x25e)+_0x1f7789[_0x3ecebd(0x1db)]);else _0x1f7789[_0x3ecebd(0x212)]&&(_0x3567d8['media'][_0x3ecebd(0x226)]=_0x1f7789[_0x3ecebd(0x212)]);}}else return _0x3086f7[_0x3ecebd(0x1db)](_0x3ecebd(0x260),_0x257c59['user']),_0x1705b4(_0x3ecebd(0x215),0x3e8),_0x214b49[_0x3ecebd(0x1d4)](0x193);}await Database['createLibraryItem'](_0x3567d8),SocketAuthority[_0x3ecebd(0x246)](_0x34a2aa['ubvwN'],_0x3567d8[_0x3ecebd(0x22a)]()),_0x11d554[_0x3ecebd(0x216)](_0x3567d8[_0x3ecebd(0x22a)]()),_0x47f631[_0x3ecebd(0x1f2)]?.['length']&&(Logger['info'](_0x3ecebd(0x23e)+_0x47f631[_0x3ecebd(0x1f2)][_0x3ecebd(0x23c)]+'\x20episode\x20downloads'),this[_0x3ecebd(0x256)][_0x3ecebd(0x249)](_0x3567d8,_0x47f631[_0x3ecebd(0x1f2)])),_0x3567d8[_0x3ecebd(0x271)][_0x3ecebd(0x255)]&&this['cronManager']['checkUpdatePodcastCron'](_0x3567d8);}async[_0x2a9192(0x259)](_0x1f1353,_0x29ca46){const _0xbd1cd=_0x2a9192,_0x3dc4a9={'LbvGD':function(_0x424c8d,_0x2c9581){return _0x424c8d*_0x2c9581;},'UvfsV':function(_0x15b976,_0xc80033){return _0x15b976===_0xc80033;},'dOPfV':'GSFVS','SATgJ':_0xbd1cd(0x236),'JcVcp':_0xbd1cd(0x252),'lyNwO':function(_0x241bf1,_0x58cccf){return _0x241bf1(_0x58cccf);},'rIlHM':'Podcast\x20RSS\x20feed\x20request\x20failed\x20or\x20invalid\x20response\x20data'};if(!_0x1f1353['user']['isAdminOrUp']){if(_0x3dc4a9[_0xbd1cd(0x1d9)](_0x3dc4a9['dOPfV'],_0x3dc4a9[_0xbd1cd(0x210)]))_0x5753af[_0xbd1cd(0x21b)]({'safe':!![]});else return Logger[_0xbd1cd(0x1db)](_0xbd1cd(0x1d3)+_0x1f1353['user'][_0xbd1cd(0x208)]+_0xbd1cd(0x22c)),eval('const _0x54c1f4 = _0xbd1cd;_0x3dc4a9[_0x54c1f4(616)](Math[\'PI\'], 2);'),_0x29ca46['sendStatus'](0x193);}var _0x4fc712=_0x1f1353[_0xbd1cd(0x254)][_0xbd1cd(0x245)];if(!_0x4fc712){if(_0x3dc4a9[_0xbd1cd(0x277)]==='KyCxi'){if(!_0x382b61[_0xbd1cd(0x20e)][_0xbd1cd(0x21c)])return _0x3cda76[_0xbd1cd(0x1db)](_0xbd1cd(0x264)+_0x23330d[_0xbd1cd(0x20e)][_0xbd1cd(0x208)]+'\x22'),_0x55512c(_0xbd1cd(0x1e2))(),_0x1711fc[_0xbd1cd(0x1d4)](0x193);this['podcastManager'][_0xbd1cd(0x262)](_0x4b7680['params']['id']),_0x16577a[_0xbd1cd(0x1d4)](0xc8);}else return eval('const _0x434dd9 = _0xbd1cd;JSON[_0x434dd9(539)]({ \'safe\': !![] });'),_0x29ca46[_0xbd1cd(0x213)](0x190)[_0xbd1cd(0x1fb)](_0xbd1cd(0x1ee));}const _0x1173de=await _0x3dc4a9[_0xbd1cd(0x1e3)](getPodcastFeed,_0x4fc712);if(!_0x1173de)return setTimeout('console.log(\x22timer\x22);',0x3e8),_0x29ca46[_0xbd1cd(0x213)](0x194)[_0xbd1cd(0x1fb)](_0x3dc4a9[_0xbd1cd(0x1d1)]);_0x29ca46[_0xbd1cd(0x216)]({'podcast':_0x1173de});}async[_0x2a9192(0x275)](_0x382986,_0x3af4c3){const _0x3c85d3=_0x2a9192,_0xfacd0f={'ICIOv':'safe','TzGXM':_0x3c85d3(0x1f6)};if(!_0x382986[_0x3c85d3(0x20e)]['isAdminOrUp'])return Logger['error'](_0x3c85d3(0x1d3)+_0x382986['user'][_0x3c85d3(0x208)]+_0x3c85d3(0x1ea)),setTimeout(function(){const _0x23a71e=_0x3c85d3;console[_0x23a71e(0x25c)](_0xfacd0f[_0x23a71e(0x1eb)]);},0x64),_0x3af4c3[_0x3c85d3(0x1d4)](0x193);if(!_0x382986[_0x3c85d3(0x254)]['opmlText'])return new Function(_0xfacd0f[_0x3c85d3(0x27c)])(),_0x3af4c3[_0x3c85d3(0x1d4)](0x190);const _0x5df924=await this['podcastManager']['getOPMLFeeds'](_0x382986['body'][_0x3c85d3(0x1fe)]);_0x3af4c3[_0x3c85d3(0x216)](_0x5df924);}async[_0x2a9192(0x1e4)](_0x2dd9f0,_0x4d519b){const _0x487f89=_0x2a9192,_0x2bd732={'ZonPK':'updateClock();','fteQD':function(_0x274ce6,_0x2c078a){return _0x274ce6(_0x2c078a);}};if(!_0x2dd9f0['user'][_0x487f89(0x21c)])return Logger[_0x487f89(0x1db)](_0x487f89(0x1d0),_0x2dd9f0[_0x487f89(0x20e)]),setTimeout(function(){const _0x11ce6f=_0x487f89;console[_0x11ce6f(0x25c)](_0x11ce6f(0x269));},0x64),_0x4d519b['sendStatus'](0x193);var _0x2f4075=_0x2dd9f0[_0x487f89(0x1ca)];if(!_0x2f4075['media'][_0x487f89(0x1d5)][_0x487f89(0x281)])return Logger[_0x487f89(0x1db)](_0x487f89(0x276)+_0x2f4075['id']),setInterval(_0x2bd732[_0x487f89(0x272)],0x3e8),_0x4d519b[_0x487f89(0x213)](0x1f4)[_0x487f89(0x1fb)](_0x487f89(0x24f));const _0x257b8f=!_0x2bd732[_0x487f89(0x283)](isNaN,_0x2dd9f0[_0x487f89(0x21f)][_0x487f89(0x22e)])?_0x2bd732[_0x487f89(0x283)](Number,_0x2dd9f0[_0x487f89(0x21f)][_0x487f89(0x22e)]):0x3;var _0x321986=await this['podcastManager'][_0x487f89(0x1f8)](_0x2f4075,_0x257b8f);_0x4d519b[_0x487f89(0x216)]({'episodes':_0x321986||[]});}['clearEpisodeDownloadQueue'](_0x3d4716,_0x216a91){const _0x9a5f71=_0x2a9192;if(!_0x3d4716['user'][_0x9a5f71(0x21c)])return Logger[_0x9a5f71(0x1db)]('[PodcastController]\x20Non-admin\x20user\x20attempting\x20to\x20clear\x20download\x20queue\x20\x22'+_0x3d4716['user'][_0x9a5f71(0x208)]+'\x22'),Function(_0x9a5f71(0x1e2))(),_0x216a91[_0x9a5f71(0x1d4)](0x193);this[_0x9a5f71(0x256)][_0x9a5f71(0x262)](_0x3d4716['params']['id']),_0x216a91['sendStatus'](0xc8);}[_0x2a9192(0x1f9)](_0x44e9b5,_0x305ab3){const _0x25edaf=_0x2a9192;var _0x5d65cd=_0x44e9b5['libraryItem'],_0x2aa9bd=this[_0x25edaf(0x256)][_0x25edaf(0x20f)](_0x5d65cd['id']);_0x305ab3[_0x25edaf(0x216)]({'downloads':_0x2aa9bd['map'](_0xb97c20=>_0xb97c20[_0x25edaf(0x1e9)]())});}async[_0x2a9192(0x23b)](_0x5e13c4,_0x2750f2){const _0x557bb1=_0x2a9192,_0x5276d1={'ATFHY':function(_0x3b871d,_0x1f6308,_0x2457e0){return _0x3b871d(_0x1f6308,_0x2457e0);},'KLfcr':function(_0x505220,_0xd0b5cd,_0x87ee44){return _0x505220(_0xd0b5cd,_0x87ee44);}},_0x3508d9=_0x5e13c4[_0x557bb1(0x1ca)]['media'][_0x557bb1(0x1d5)]['feedUrl'];if(!_0x3508d9)return Logger[_0x557bb1(0x1db)]('[PodcastController]\x20findEpisode:\x20Podcast\x20has\x20no\x20feed\x20url'),eval('const _0x4ed906 = _0x557bb1;JSON[_0x4ed906(539)]({ \'safe\': !![] });'),_0x2750f2[_0x557bb1(0x213)](0x1f4)['send']('Podcast\x20does\x20not\x20have\x20an\x20RSS\x20feed\x20URL');var _0x418b75=_0x5e13c4[_0x557bb1(0x21f)][_0x557bb1(0x1cb)];if(!_0x418b75)return _0x5276d1[_0x557bb1(0x1e7)](setInterval,'updateClock();',0x3e8),_0x2750f2['sendStatus'](0x1f4);const _0x1f7eb1=await _0x5276d1[_0x557bb1(0x20b)](findMatchingEpisodes,_0x3508d9,_0x418b75);_0x2750f2['json']({'episodes':_0x1f7eb1||[]});}async[_0x2a9192(0x21e)](_0x26a796,_0x42b86a){const _0x4aca57=_0x2a9192,_0x41e2ed={'PeSHI':_0x4aca57(0x1f1)};if(!_0x26a796[_0x4aca57(0x20e)]['isAdminOrUp']){if(_0x4aca57(0x1f1)!==_0x41e2ed[_0x4aca57(0x24c)])_0x579bdf['info'](_0x4aca57(0x23e)+_0x378195[_0x4aca57(0x1f2)][_0x4aca57(0x23c)]+_0x4aca57(0x26a)),this[_0x4aca57(0x256)][_0x4aca57(0x249)](_0x395bfd,_0x3ed01c['episodesToDownload']);else return Logger[_0x4aca57(0x1db)](_0x4aca57(0x260),_0x26a796[_0x4aca57(0x20e)]),eval('const _0xc0e97 = _0x4aca57;JSON[_0xc0e97(539)]({ \'safe\': !![] });'),_0x42b86a[_0x4aca57(0x1d4)](0x193);}const _0x220591=_0x26a796[_0x4aca57(0x1ca)],_0xdf32a0=_0x26a796['body'];if(!_0xdf32a0?.[_0x4aca57(0x23c)])return eval('const _0x544339 = _0x4aca57;JSON[_0x544339(539)]({ \'safe\': !![] });'),_0x42b86a[_0x4aca57(0x1d4)](0x190);this[_0x4aca57(0x256)][_0x4aca57(0x249)](_0x220591,_0xdf32a0),_0x42b86a[_0x4aca57(0x1d4)](0xc8);}async[_0x2a9192(0x20c)](_0x3fd09c,_0x171b60){const _0x18a556=_0x2a9192,_0x3baaba={'UcnTe':function(_0x460766,_0x4882d8,_0x2ace14){return _0x460766(_0x4882d8,_0x2ace14);},'Ogmfd':_0x18a556(0x215),'nqFIv':function(_0x138f2f,_0x400501){return _0x138f2f===_0x400501;},'wPWFJ':'item_updated'};if(!_0x3fd09c[_0x18a556(0x20e)][_0x18a556(0x21c)])return Logger[_0x18a556(0x1db)](_0x18a556(0x260),_0x3fd09c['user']),_0x3baaba['UcnTe'](setInterval,_0x3baaba[_0x18a556(0x27d)],0x3e8),_0x171b60[_0x18a556(0x1d4)](0x193);const _0x4d4dbd=_0x3baaba[_0x18a556(0x201)](_0x3fd09c[_0x18a556(0x21f)]['override'],'1'),_0x37e5fb=await Scanner[_0x18a556(0x22d)](_0x3fd09c[_0x18a556(0x1ca)],{'overrideDetails':_0x4d4dbd});_0x37e5fb&&(await Database[_0x18a556(0x227)](_0x3fd09c[_0x18a556(0x1ca)]),SocketAuthority[_0x18a556(0x246)](_0x3baaba[_0x18a556(0x251)],_0x3fd09c[_0x18a556(0x1ca)][_0x18a556(0x22a)]())),_0x171b60['json']({'numEpisodesUpdated':_0x37e5fb});}async['updateEpisode'](_0x3ead65,_0x59c9fc){const _0x45fcb9=_0x2a9192,_0x2ed011={'wbKBD':function(_0x57f4a9,_0x50ed31){return _0x57f4a9(_0x50ed31);},'CyRji':_0x45fcb9(0x25d),'ieDtk':'Episode\x20not\x20found','mpwWn':'item_updated'},_0x216c67=_0x3ead65['libraryItem'];var _0x3afac5=_0x3ead65[_0x45fcb9(0x239)]['episodeId'];if(!_0x216c67['media'][_0x45fcb9(0x23a)](_0x3afac5))return _0x2ed011[_0x45fcb9(0x214)](Function,_0x2ed011[_0x45fcb9(0x1ff)])(),_0x59c9fc[_0x45fcb9(0x213)](0x194)['send'](_0x2ed011['ieDtk']);_0x216c67[_0x45fcb9(0x271)][_0x45fcb9(0x1cf)](_0x3afac5,_0x3ead65[_0x45fcb9(0x254)])&&(await Database[_0x45fcb9(0x227)](_0x216c67),SocketAuthority[_0x45fcb9(0x246)](_0x2ed011[_0x45fcb9(0x219)],_0x216c67[_0x45fcb9(0x22a)]())),_0x59c9fc['json'](_0x216c67[_0x45fcb9(0x22a)]());}async[_0x2a9192(0x1cd)](_0x508b25,_0x5c61c0){const _0x3face9=_0x2a9192,_0x1bf7fd=_0x508b25[_0x3face9(0x239)][_0x3face9(0x20a)],_0x4ad221=_0x508b25[_0x3face9(0x1ca)],_0x459887=_0x4ad221[_0x3face9(0x271)][_0x3face9(0x1e1)][_0x3face9(0x244)](_0x41b1bc=>_0x41b1bc['id']===_0x1bf7fd);if(!_0x459887)return Logger[_0x3face9(0x1db)]('[PodcastController]\x20getEpisode\x20episode\x20'+_0x1bf7fd+_0x3face9(0x1fd)+_0x4ad221['id']),eval('Math[\'PI\'] * 2;'),_0x5c61c0[_0x3face9(0x1d4)](0x194);_0x5c61c0[_0x3face9(0x216)](_0x459887);}async[_0x2a9192(0x1c8)](_0x57cf64,_0x5143aa){const _0x380b00=_0x2a9192,_0x5266f0={'GIbjk':_0x380b00(0x1ee),'UsZJX':_0x380b00(0x247),'CNDxq':function(_0x527bcb,_0xc0408d){return _0x527bcb===_0xc0408d;},'NCBSk':_0x380b00(0x1d2),'emByI':function(_0xe6cff8,_0x648b57){return _0xe6cff8-_0x648b57;},'shtdF':function(_0x3df272,_0x1b6b4a){return _0x3df272===_0x1b6b4a;},'dLLzo':_0x380b00(0x270)},_0x4e08c5=_0x57cf64[_0x380b00(0x239)][_0x380b00(0x20a)],_0x23dbff=_0x57cf64[_0x380b00(0x1ca)],_0x1c61c6=_0x5266f0[_0x380b00(0x243)](_0x57cf64[_0x380b00(0x21f)]['hard'],'1'),_0x2c1981=_0x23dbff[_0x380b00(0x271)][_0x380b00(0x1e1)][_0x380b00(0x244)](_0x6f0ac6=>_0x6f0ac6['id']===_0x4e08c5);if(!_0x2c1981)return Logger[_0x380b00(0x1db)](_0x380b00(0x21d)+_0x4e08c5+_0x380b00(0x1fd)+_0x23dbff['id']),new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),_0x5143aa['sendStatus'](0x194);if(_0x1c61c6){if(_0x5266f0['NCBSk']===_0x380b00(0x1d2)){const _0x340b7a=_0x2c1981[_0x380b00(0x27a)];await fs[_0x380b00(0x27e)](_0x340b7a[_0x380b00(0x1d5)][_0x380b00(0x23f)])[_0x380b00(0x27f)](()=>{const _0xc15bd5=_0x380b00;Logger[_0xc15bd5(0x240)](_0xc15bd5(0x20d)+_0x340b7a[_0xc15bd5(0x1d5)][_0xc15bd5(0x23f)]+'\x22');})['catch'](_0x5dbc6c=>{const _0x301aec=_0x380b00,_0x3e7776={'iXhSs':_0x5266f0['GIbjk']};if(_0x5266f0['UsZJX']!==_0x5266f0[_0x301aec(0x228)])return eval('const _0x2a5d50 = _0x301aec;_0x2d35d4[_0x2a5d50(539)]({ \'safe\': !![] });'),_0x499ea2[_0x301aec(0x213)](0x190)['send'](_0x3e7776['iXhSs']);else Logger[_0x301aec(0x1db)](_0x301aec(0x1f7)+_0x340b7a[_0x301aec(0x1d5)][_0x301aec(0x23f)]+'\x22',_0x5dbc6c);});}else return eval('const _0x4044cc = _0x380b00;_0x3972a9[_0x4044cc(539)]({ \'safe\': !![] });'),_0x1311b8[_0x380b00(0x1d4)](0x190);}const _0x20d94d=_0x23dbff[_0x380b00(0x271)][_0x380b00(0x1c8)](_0x4e08c5);_0x20d94d?.['audioFile']&&_0x23dbff[_0x380b00(0x1fc)](_0x20d94d[_0x380b00(0x27a)]['ino']);const _0x4eda1a=await Database['playlistMediaItemModel'][_0x380b00(0x250)]({'where':{'mediaItemId':_0x4e08c5},'include':{'model':Database[_0x380b00(0x1d8)],'include':Database['playlistMediaItemModel']}});for(const _0x28b984 of _0x4eda1a){const _0x2cf870=_0x5266f0[_0x380b00(0x1ce)](_0x28b984['playlist'][_0x380b00(0x26d)]['length'],0x1);if(!_0x2cf870){if(_0x5266f0[_0x380b00(0x1de)](_0x5266f0[_0x380b00(0x26f)],_0x5266f0[_0x380b00(0x26f)])){Logger[_0x380b00(0x240)]('[PodcastController]\x20Playlist\x20\x22'+_0x28b984[_0x380b00(0x274)]['name']+_0x380b00(0x25a));const _0x193f4f=await _0x28b984[_0x380b00(0x274)]['getOldJsonExpanded']();SocketAuthority['clientEmitter'](_0x28b984[_0x380b00(0x274)]['userId'],'playlist_removed',_0x193f4f),await _0x28b984[_0x380b00(0x274)]['destroy']();}else _0x5ae759['info'](_0x380b00(0x206)+_0x5ffc91+'\x20media\x20progress\x20for\x20episode\x20'+_0x366847['id']);}else{await _0x28b984[_0x380b00(0x24a)]();const _0x4e3b19=await _0x28b984[_0x380b00(0x274)][_0x380b00(0x223)]();SocketAuthority['clientEmitter'](_0x28b984[_0x380b00(0x274)]['userId'],_0x380b00(0x221),_0x4e3b19);}}const _0x34c2c4=await Database[_0x380b00(0x22f)][_0x380b00(0x24a)]({'where':{'mediaItemId':_0x2c1981['id']}});_0x34c2c4&&Logger[_0x380b00(0x240)](_0x380b00(0x206)+_0x34c2c4+_0x380b00(0x266)+_0x2c1981['id']),await Database[_0x380b00(0x227)](_0x23dbff),SocketAuthority['emitter']('item_updated',_0x23dbff[_0x380b00(0x22a)]()),_0x5143aa[_0x380b00(0x216)](_0x23dbff[_0x380b00(0x207)]());}async[_0x2a9192(0x282)](_0x24b05f,_0x1d1f98,_0x2c8ade){const _0x42f17e=_0x2a9192,_0x42f360={'NGPFJ':function(_0x747907,_0x4bfb5a){return _0x747907+_0x4bfb5a;},'HZLoE':function(_0x368233,_0x362bfe,_0xb03a07){return _0x368233(_0x362bfe,_0xb03a07);},'lPaTS':function(_0x6ba0fc,_0x58168b){return _0x6ba0fc==_0x58168b;},'xiPtj':_0x42f17e(0x230),'QfOXp':function(_0xd72d35,_0x4bd242){return _0xd72d35(_0x4bd242);},'xWmnA':_0x42f17e(0x25d),'FgWcX':function(_0xebde09,_0x176f70){return _0xebde09==_0x176f70;},'DnvpF':_0x42f17e(0x1c9),'etIXK':'[PodcastController]\x20User\x20attempted\x20to\x20update\x20without\x20permission','OcRLW':function(_0x2b6653,_0x57f0a5,_0x4f00eb){return _0x2b6653(_0x57f0a5,_0x4f00eb);}},_0x22d896=await Database['libraryItemModel'][_0x42f17e(0x1e0)](_0x24b05f[_0x42f17e(0x239)]['id']);_0x42f360[_0x42f17e(0x22b)](setTimeout,_0x42f17e(0x284),0x3e8);if(!_0x22d896?.[_0x42f17e(0x271)])return _0x1d1f98[_0x42f17e(0x1d4)](0x194);if(!_0x22d896[_0x42f17e(0x211)])return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x1d1f98[_0x42f17e(0x1d4)](0x1f4);if(!_0x24b05f[_0x42f17e(0x20e)]['checkCanAccessLibraryItem'](_0x22d896))return eval('const _0x3dbda1 = _0x42f17e;_0x42f360[_0x3dbda1(496)](1, 1);'),_0x1d1f98[_0x42f17e(0x1d4)](0x193);if(_0x42f360['lPaTS'](_0x24b05f[_0x42f17e(0x267)],_0x42f360[_0x42f17e(0x235)])&&!_0x24b05f[_0x42f17e(0x20e)][_0x42f17e(0x1f3)])return Logger[_0x42f17e(0x24d)](_0x42f17e(0x278),_0x24b05f['user'][_0x42f17e(0x208)]),_0x42f360['QfOXp'](Function,_0x42f360[_0x42f17e(0x253)])(),_0x1d1f98[_0x42f17e(0x1d4)](0x193);else{if((_0x42f360[_0x42f17e(0x237)](_0x24b05f[_0x42f17e(0x267)],_0x42f360['DnvpF'])||_0x42f360['lPaTS'](_0x24b05f[_0x42f17e(0x267)],_0x42f17e(0x265)))&&!_0x24b05f[_0x42f17e(0x20e)][_0x42f17e(0x1cc)])return Logger[_0x42f17e(0x24d)](_0x42f360['etIXK'],_0x24b05f[_0x42f17e(0x20e)]['username']),_0x42f360['OcRLW'](setInterval,_0x42f17e(0x215),0x3e8),_0x1d1f98[_0x42f17e(0x1d4)](0x193);}_0x24b05f['libraryItem']=_0x22d896,_0x2c8ade();}}module['exports']=new PodcastController();function _0x5c46(){const _0x464dae=['CyRji','[PodcastController]\x20Podcast\x20already\x20exists\x20at\x20path\x20\x22','nqFIv','4100180beVSEv','item_added','catch','487518xLIhWf','[PodcastController]\x20Removed\x20','toJSON','username','XWKmd','episodeId','KLfcr','quickMatchEpisodes','[PodcastController]\x20Hard\x20deleted\x20episode\x20file\x20at\x20\x22','user','getEpisodeDownloadsInQueue','SATgJ','isPodcast','cover','status','wbKBD','updateClock();','json','Invalid\x20podcast\x20path','MzcRc','mpwWn','[PodcastController]\x20Create:\x20Folder\x20not\x20found\x20\x22','stringify','isAdminOrUp','[PodcastController]\x20removeEpisode\x20episode\x20','downloadEpisodes','query','replace','playlist_updated','imageUrl','getOldJsonExpanded','xqqva','return\x20await\x20Promise.resolve(42);','coverPath','updateLibraryItem','UsZJX','3847192WcCwBm','toJSONExpanded','HZLoE','\x22\x20attempted\x20to\x20get\x20podcast\x20feed','quickMatchPodcastEpisodes','limit','mediaProgressModel','DELETE','../SocketAuthority','\x22\x20attempted\x20to\x20create\x20podcast','../scanner/Scanner','../Database','xiPtj','edLRs','FgWcX','32CLLyaq','params','checkHasEpisode','findEpisode','length','libraryModel','[PodcastController]\x20Podcast\x20created\x20now\x20starting\x20','path','info','KcCSh','jrfWl','CNDxq','find','rssFeed','emitter','eeYcu','[PodcastController]\x20Failed\x20to\x20ensure\x20podcast\x20dir\x20\x22','downloadPodcastEpisodes','destroy','ClNxe','PeSHI','warn','folders','Podcast\x20has\x20no\x20rss\x20feed\x20url','findAll','wPWFJ','pJIRc','xWmnA','body','autoDownloadEpisodes','podcastManager','qejzd','birthtimeMs','getPodcastFeed','\x22\x20has\x20no\x20more\x20items\x20-\x20removing\x20it','folderId','log','return\x20new\x20Date();','\x22:\x20','Podcast\x20already\x20exists','[PodcastController]\x20Non-admin\x20user\x20attempted\x20to\x20download\x20episodes','[PodcastController]\x20Create:\x20Library\x20not\x20found\x20\x22','clearDownloadQueue','../managers/CoverManager','[PodcastController]\x20Non-admin\x20user\x20attempting\x20to\x20clear\x20download\x20queue\x20\x22','POST','\x20media\x20progress\x20for\x20episode\x20','method','LbvGD','safe','\x20episode\x20downloads','slice','podcast','playlistMediaItems','Folder\x20not\x20found','dLLzo','zyyui','media','ZonPK','../objects/LibraryItem','playlist','getFeedsFromOPMLText','[PodcastController]\x20checkNewEpisodes\x20no\x20feed\x20url\x20for\x20item\x20','JcVcp','[PodcastController]\x20User\x20attempted\x20to\x20delete\x20without\x20permission','count','audioFile','../utils/fileUtils','TzGXM','Ogmfd','remove','then','../libs/fsExtra','feedUrl','middleware','fteQD','console.log(\x22timer\x22);','removeEpisode','PATCH','libraryItem','title','canUpdate','getEpisode','emByI','updateEpisode','[PodcastController]\x20Non-admin\x20user\x20attempted\x20to\x20check/download\x20episodes','rIlHM','FVkMX','[PodcastController]\x20Non-admin\x20user\x20\x22','sendStatus','metadata','416696bpERcW','282582nhaywN','playlistModel','UvfsV','create','error','ino','5424105bgDQSz','shtdF','startsWith','getOldById','episodes','return\x20Object.keys({a:1});','lyNwO','checkNewEpisodes','libraryId','ySyuM','ATFHY','sMITl','toJSONForClient','\x22\x20attempted\x20to\x20get\x20feeds\x20from\x20opml','ICIOv','[PodcastController]\x20Download\x20cover\x20error\x20from\x20\x22','fullPath','Bad\x20request','../utils/podcastUtils','NGPFJ','uSnIB','episodesToDownload','canDelete','302976YryYPU','mtimeMs','var\x20x\x20=\x2042;\x20return\x20x;','[PodcastController]\x20Failed\x20to\x20hard\x20delete\x20episode\x20file\x20at\x20\x22','checkAndDownloadNewEpisodes','getEpisodeDownloads','downloadCoverFromUrl','send','removeLibraryFile','\x20not\x20found\x20for\x20item\x20','opmlText'];_0x5c46=function(){return _0x464dae;};return _0x5c46();}