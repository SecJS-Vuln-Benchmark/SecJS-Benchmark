const _0x16236d=_0x561f;(function(_0x3427eb,_0x58c921){const _0x416333=_0x561f,_0x20786b=_0x3427eb();while(!![]){try{const _0x769e19=parseInt(_0x416333(0xb0))/0x1*(parseInt(_0x416333(0xcb))/0x2)+-parseInt(_0x416333(0xbe))/0x3+parseInt(_0x416333(0x96))/0x4+parseInt(_0x416333(0xb6))/0x5*(-parseInt(_0x416333(0xcd))/0x6)+parseInt(_0x416333(0xd4))/0x7*(parseInt(_0x416333(0xc0))/0x8)+parseInt(_0x416333(0xa3))/0x9+-parseInt(_0x416333(0xce))/0xa*(parseInt(_0x416333(0xb3))/0xb);if(_0x769e19===_0x58c921)break;else _0x20786b['push'](_0x20786b['shift']());}catch(_0x5d8c02){_0x20786b['push'](_0x20786b['shift']());}}}(_0x484a,0x37b0d));function _0x484a(){const _0x4a2515=['_entries','concat','tDNlX','Got\x20a\x20path\x20length\x20of:\x20','toObject','utf8','keys','uid','entries','readUInt16BE','ino','tfrUv','mpBYU','flags','Inavlid\x20dircache\x20magic\x20file\x20number:\x20','_dirty','ctimeSeconds','1207828cRBiXD','hex','values','CTAll','ylqQn','map','alloc','set','TRWYe','includes','render','JaIKW','dev','3071997UNZFYk','\x20\x20\x20\x20','indexOf','RGguu','gid','isBuffer','qHhhH','dUWRD','eof','assumeValid','oid','\x20but\x20saw\x20','oOstI','1bDWQFS','mtimeNanoseconds','clear','133661JfCPnr','FnzGt','Invalid\x20checksum\x20in\x20GitIndex\x20buffer:\x20expected\x20','28220WkIZLx','iterator','toString','AsrSM','..\x5c','iHxil','kNfrQ','\x27\x20after\x20','353532SRmVSB','startsWith','8mBoMeX','writeUInt32BE','vIbAX','slice','Unsupported\x20dircache\x20version:\x20','min','mtimeSeconds','write','length','join','from','313628VXdsed','jdFgs','138wQCznT','580spTsVN','path','nameLength','mode','delete','tell','2662933hUHTWn','vaEhk','ctimeNanoseconds','AuMOW','entriesMap','keagQ','Unexpected\x20end\x20of\x20file','readUInt32BE','size','qTOkw','DIRC','extended','sort','fromBuffer','../'];_0x484a=function(){return _0x4a2515;};return _0x484a();}import{InternalError}from'../errors/InternalError.js';import{UnsafeFilepathError}from'../errors/UnsafeFilepathError.js';import{BufferCursor}from'../utils/BufferCursor.js';import{comparePath}from'../utils/comparePath.js';import{normalizeStats}from'../utils/normalizeStats.js';function _0x561f(_0x50f72a,_0x3eda9b){const _0x484a9f=_0x484a();return _0x561f=function(_0x561fa9,_0x541a76){_0x561fa9=_0x561fa9-0x95;let _0x21129d=_0x484a9f[_0x561fa9];return _0x21129d;},_0x561f(_0x50f72a,_0x3eda9b);}import{shasum}from'../utils/shasum.js';function parseCacheEntryFlags(_0x44efed){const _0x18ec23=_0x561f,_0x35b429={'ylqQn':function(_0x22595b,_0x462588){return _0x22595b&_0x462588;},'RrihO':function(_0x2b644c,_0x1e5a54){return _0x2b644c(_0x1e5a54);}};return{'assumeValid':Boolean(_0x35b429[_0x18ec23(0x9a)](_0x44efed,0x8000)),'extended':_0x35b429['RrihO'](Boolean,_0x35b429[_0x18ec23(0x9a)](_0x44efed,0x4000)),'stage':(_0x44efed&0x3000)>>0xc,'nameLength':_0x44efed&0xfff};}function renderCacheEntryFlags(_0x2b2281){const _0x30709e=_0x561f,_0x3797c6={'mpBYU':function(_0x2a9f78,_0x1dc4b0){return _0x2a9f78+_0x1dc4b0;}},_0x54a86c=_0x2b2281[_0x30709e(0xf0)];return _0x54a86c[_0x30709e(0xdf)]=![],_0x54a86c['nameLength']=Math[_0x30709e(0xc5)](Buffer[_0x30709e(0xca)](_0x2b2281[_0x30709e(0xcf)])[_0x30709e(0xc8)],0xfff),_0x3797c6[_0x30709e(0xef)](_0x54a86c[_0x30709e(0xac)]?0x8000:0x0,_0x54a86c[_0x30709e(0xdf)]?0x4000:0x0)+((_0x54a86c['stage']&0x3)<<0xc)+(_0x54a86c[_0x30709e(0xd0)]&0xfff);}export class GitIndex{constructor(_0x53ecb8){const _0x307a7b=_0x561f;this[_0x307a7b(0xf2)]=![],this[_0x307a7b(0xe3)]=_0x53ecb8||new Map();}static async[_0x16236d(0xca)](_0x79956e){const _0x30078c=_0x16236d,_0x4692af={'tfrUv':function(_0x1e707e,_0x205030){return _0x1e707e===_0x205030;}};if(Buffer[_0x30078c(0xa8)](_0x79956e))return GitIndex[_0x30078c(0xe1)](_0x79956e);else{if(_0x4692af[_0x30078c(0xee)](_0x79956e,null))return new GitIndex(null);else throw new InternalError('invalid\x20type\x20passed\x20to\x20GitIndex.from');}}static async[_0x16236d(0xe1)](_0x375e27){const _0x2e51e7=_0x16236d,_0x56cd42={'FnzGt':function(_0x26c4e6,_0x3dee35){return _0x26c4e6(_0x3dee35);},'tDNlX':_0x2e51e7(0x97),'jdFgs':_0x2e51e7(0xa6),'kNfrQ':function(_0xdd09d8,_0x2ce802){return _0xdd09d8!==_0x2ce802;},'JaIKW':_0x2e51e7(0xde),'iHxil':function(_0x163288,_0x371acc){return _0x163288!==_0x371acc;},'keagQ':function(_0x5c5e7e,_0x1dc17f){return _0x5c5e7e(_0x1dc17f);},'oOstI':function(_0x554f94,_0x84b032){return _0x554f94-_0x84b032;},'dUWRD':function(_0x407d2e,_0x2f8db9){return _0x407d2e+_0x2f8db9;},'bFqoO':_0x2e51e7(0xe8),'qHhhH':function(_0x285734,_0x262254){return _0x285734%_0x262254;},'lFtEr':_0x2e51e7(0xd7),'TRWYe':_0x2e51e7(0xda)},_0x2094dc=await _0x56cd42[_0x2e51e7(0xb4)](shasum,_0x375e27[_0x2e51e7(0xc3)](0x0,-0x14)),_0x3a5f05=_0x375e27[_0x2e51e7(0xc3)](-0x14)[_0x2e51e7(0xb8)](_0x56cd42[_0x2e51e7(0xe5)]);if(_0x3a5f05!==_0x2094dc){if('RGguu'!==_0x56cd42[_0x2e51e7(0xcc)])_0x3bf655['startsWith'](_0x1bb3db+'/')&&this[_0x2e51e7(0xe3)]['delete'](_0x425355);else throw new InternalError(_0x2e51e7(0xb5)+_0x3a5f05+_0x2e51e7(0xae)+_0x2094dc);}const _0xa5b53c=new BufferCursor(_0x375e27),_0x5dc23d=new Map(),_0x345109=_0xa5b53c[_0x2e51e7(0xb8)](_0x2e51e7(0xe8),0x4);if(_0x56cd42[_0x2e51e7(0xbc)](_0x345109,_0x56cd42[_0x2e51e7(0xa1)]))throw new InternalError(_0x2e51e7(0xf1)+_0x345109);const _0x1d68d5=_0xa5b53c[_0x2e51e7(0xdb)]();if(_0x56cd42[_0x2e51e7(0xbb)](_0x1d68d5,0x2))throw new InternalError(_0x2e51e7(0xc4)+_0x1d68d5);const _0x1ea680=_0xa5b53c[_0x2e51e7(0xdb)]();let _0x27f819=0x0;while(!_0xa5b53c[_0x2e51e7(0xab)]()&&_0x27f819<_0x1ea680){const _0x2bbbbd={};_0x2bbbbd[_0x2e51e7(0x95)]=_0xa5b53c[_0x2e51e7(0xdb)](),_0x2bbbbd[_0x2e51e7(0xd6)]=_0xa5b53c[_0x2e51e7(0xdb)](),_0x2bbbbd[_0x2e51e7(0xc6)]=_0xa5b53c[_0x2e51e7(0xdb)](),_0x2bbbbd[_0x2e51e7(0xb1)]=_0xa5b53c['readUInt32BE'](),_0x2bbbbd[_0x2e51e7(0xa2)]=_0xa5b53c[_0x2e51e7(0xdb)](),_0x2bbbbd[_0x2e51e7(0xed)]=_0xa5b53c[_0x2e51e7(0xdb)](),_0x2bbbbd[_0x2e51e7(0xd1)]=_0xa5b53c['readUInt32BE'](),_0x2bbbbd[_0x2e51e7(0xea)]=_0xa5b53c[_0x2e51e7(0xdb)](),_0x2bbbbd['gid']=_0xa5b53c[_0x2e51e7(0xdb)](),_0x2bbbbd['size']=_0xa5b53c['readUInt32BE'](),_0x2bbbbd[_0x2e51e7(0xad)]=_0xa5b53c['slice'](0x14)['toString']('hex');const _0x278487=_0xa5b53c[_0x2e51e7(0xec)]();_0x2bbbbd[_0x2e51e7(0xf0)]=_0x56cd42[_0x2e51e7(0xd9)](parseCacheEntryFlags,_0x278487);const _0x8d43de=_0x56cd42[_0x2e51e7(0xaf)](_0x375e27[_0x2e51e7(0xa5)](0x0,_0x56cd42[_0x2e51e7(0xaa)](_0xa5b53c[_0x2e51e7(0xd3)](),0x1)),_0xa5b53c[_0x2e51e7(0xd3)]());if(_0x8d43de<0x1)throw new InternalError(_0x2e51e7(0xe6)+_0x8d43de);_0x2bbbbd[_0x2e51e7(0xcf)]=_0xa5b53c[_0x2e51e7(0xb8)](_0x56cd42['bFqoO'],_0x8d43de);if(_0x2bbbbd[_0x2e51e7(0xcf)][_0x2e51e7(0x9f)](_0x2e51e7(0xba))||_0x2bbbbd[_0x2e51e7(0xcf)]['includes'](_0x2e51e7(0xe2)))throw new UnsafeFilepathError(_0x2bbbbd[_0x2e51e7(0xcf)]);let _0xa238e9=0x8-_0x56cd42[_0x2e51e7(0xa9)](_0xa5b53c[_0x2e51e7(0xd3)]()-0xc,0x8);if(_0xa238e9===0x0)_0xa238e9=0x8;while(_0xa238e9--){const _0xdb2bf7=_0xa5b53c['readUInt8']();if(_0xdb2bf7!==0x0){if(_0x56cd42['lFtEr']==='AuMOW')throw new InternalError('Expected\x201-8\x20null\x20characters\x20but\x20got\x20\x27'+_0xdb2bf7+_0x2e51e7(0xbd)+_0x2bbbbd['path']);else return this[_0x2e51e7(0xe3)];}else{if(_0xa5b53c['eof']())throw new InternalError(_0x56cd42[_0x2e51e7(0x9e)]);}}_0x5dc23d[_0x2e51e7(0x9d)](_0x2bbbbd[_0x2e51e7(0xcf)],_0x2bbbbd),_0x27f819++;}return new GitIndex(_0x5dc23d);}get[_0x16236d(0xeb)](){const _0xb13f80=_0x16236d;return[...this['_entries'][_0xb13f80(0x98)]()][_0xb13f80(0xe0)](comparePath);}get[_0x16236d(0xd8)](){const _0x4ad54c=_0x16236d;return this[_0x4ad54c(0xe3)];}*[Symbol[_0x16236d(0xb7)]](){const _0x368b20=_0x16236d,_0x16c0e0={'oaXgr':function(_0x5ebffb,_0x39012b){return _0x5ebffb===_0x39012b;}};for(const _0x42efe2 of this[_0x368b20(0xeb)]){_0x16c0e0['oaXgr'](_0x368b20(0x99),_0x368b20(0x99))?yield _0x42efe2:this[_0x368b20(0xe3)][_0x368b20(0xd2)](_0x205916);}}['insert']({filepath:_0x4f1fb7,stats:_0x2fec6a,oid:_0x101988}){const _0x547b1e=_0x16236d;_0x2fec6a=normalizeStats(_0x2fec6a);const _0x52b61b=Buffer[_0x547b1e(0xca)](_0x4f1fb7),_0x10a747={'ctimeSeconds':_0x2fec6a['ctimeSeconds'],'ctimeNanoseconds':_0x2fec6a[_0x547b1e(0xd6)],'mtimeSeconds':_0x2fec6a[_0x547b1e(0xc6)],'mtimeNanoseconds':_0x2fec6a[_0x547b1e(0xb1)],'dev':_0x2fec6a[_0x547b1e(0xa2)],'ino':_0x2fec6a[_0x547b1e(0xed)],'mode':_0x2fec6a[_0x547b1e(0xd1)]||0x81a4,'uid':_0x2fec6a['uid'],'gid':_0x2fec6a[_0x547b1e(0xa7)],'size':_0x2fec6a['size'],'path':_0x4f1fb7,'oid':_0x101988,'flags':{'assumeValid':![],'extended':![],'stage':0x0,'nameLength':_0x52b61b[_0x547b1e(0xc8)]<0xfff?_0x52b61b[_0x547b1e(0xc8)]:0xfff}};this['_entries']['set'](_0x10a747[_0x547b1e(0xcf)],_0x10a747),this[_0x547b1e(0xf2)]=!![];}['delete']({filepath:_0x4d5a8e}){const _0x27faf7=_0x16236d,_0x3b7cdc={'AsrSM':function(_0x4088bc,_0x263ed6){return _0x4088bc+_0x263ed6;}};if(this['_entries']['has'](_0x4d5a8e))this['_entries'][_0x27faf7(0xd2)](_0x4d5a8e);else for(const _0x8bca9c of this[_0x27faf7(0xe3)][_0x27faf7(0xe9)]()){_0x8bca9c[_0x27faf7(0xbf)](_0x3b7cdc[_0x27faf7(0xb9)](_0x4d5a8e,'/'))&&this[_0x27faf7(0xe3)][_0x27faf7(0xd2)](_0x8bca9c);}this[_0x27faf7(0xf2)]=!![];}[_0x16236d(0xb2)](){const _0x22abb3=_0x16236d;this['_entries'][_0x22abb3(0xb2)](),this[_0x22abb3(0xf2)]=!![];}[_0x16236d(0xa0)](){const _0x86874f=_0x16236d;return this[_0x86874f(0xeb)][_0x86874f(0x9b)](_0x44389e=>_0x44389e[_0x86874f(0xd1)]['toString'](0x8)+'\x20'+_0x44389e[_0x86874f(0xad)]+_0x86874f(0xa4)+_0x44389e[_0x86874f(0xcf)])[_0x86874f(0xc9)]('\x0a');}async[_0x16236d(0xe7)](){const _0x208922=_0x16236d,_0x101882={'vIbAX':_0x208922(0x97),'qTOkw':function(_0x48f55f,_0x228106){return _0x48f55f(_0x228106);},'vaEhk':_0x208922(0xde)},_0x17236a=Buffer[_0x208922(0x9c)](0xc),_0x4e8a81=new BufferCursor(_0x17236a);_0x4e8a81[_0x208922(0xc7)](_0x101882[_0x208922(0xd5)],0x4,'utf8'),_0x4e8a81[_0x208922(0xc1)](0x2),_0x4e8a81[_0x208922(0xc1)](this[_0x208922(0xeb)]['length']);const _0x21f0e5=Buffer[_0x208922(0xe4)](this[_0x208922(0xeb)][_0x208922(0x9b)](_0x1ea688=>{const _0x44e127=_0x208922,_0x39f225=Buffer[_0x44e127(0xca)](_0x1ea688['path']),_0x323a99=Math['ceil']((0x3e+_0x39f225['length']+0x1)/0x8)*0x8,_0x2127fc=Buffer[_0x44e127(0x9c)](_0x323a99),_0x28e414=new BufferCursor(_0x2127fc),_0x457c89=normalizeStats(_0x1ea688);return _0x28e414['writeUInt32BE'](_0x457c89['ctimeSeconds']),_0x28e414[_0x44e127(0xc1)](_0x457c89[_0x44e127(0xd6)]),_0x28e414[_0x44e127(0xc1)](_0x457c89['mtimeSeconds']),_0x28e414[_0x44e127(0xc1)](_0x457c89[_0x44e127(0xb1)]),_0x28e414[_0x44e127(0xc1)](_0x457c89[_0x44e127(0xa2)]),_0x28e414[_0x44e127(0xc1)](_0x457c89['ino']),_0x28e414['writeUInt32BE'](_0x457c89[_0x44e127(0xd1)]),_0x28e414[_0x44e127(0xc1)](_0x457c89[_0x44e127(0xea)]),_0x28e414[_0x44e127(0xc1)](_0x457c89['gid']),_0x28e414[_0x44e127(0xc1)](_0x457c89[_0x44e127(0xdc)]),_0x28e414[_0x44e127(0xc7)](_0x1ea688[_0x44e127(0xad)],0x14,_0x101882[_0x44e127(0xc2)]),_0x28e414['writeUInt16BE'](_0x101882[_0x44e127(0xdd)](renderCacheEntryFlags,_0x1ea688)),_0x28e414['write'](_0x1ea688[_0x44e127(0xcf)],_0x39f225['length'],_0x44e127(0xe8)),_0x2127fc;})),_0x5e51a3=Buffer[_0x208922(0xe4)]([_0x17236a,_0x21f0e5]),_0x376662=await shasum(_0x5e51a3);return Buffer[_0x208922(0xe4)]([_0x5e51a3,Buffer[_0x208922(0xca)](_0x376662,_0x101882[_0x208922(0xc2)])]);}}