const _0x5e1bcf=_0x39f7;function _0x54be(){const _0x49911e=['non_browser','FILE_UPLOAD_LIMIT','logins','ABORT_KEYS','registrations','vjMFR','pending_req','TOKEN_CONFIG','VERIFY_EMAIL_LIMIT','10424514pVSpjv','TOKEN_BALANCE','GEN_TITLE','AUDIO_RUNS','STT_LIMIT','CONVO_ACCESS','TTS_LIMIT','MODEL_QUERIES','~/server/utils','uznqf','3097hjqYqu','TOOL_CALL_LIMIT','TWO_MINUTES','136qOLDan','374EVlIXW','./keyvRedis','./keyvFiles','40544748bJgFEx','ILLEGAL_MODEL_REQUEST','3828400VhBQJx','5047105PlfjLi','env','./keyvMongo','9553415QRLHKL','exports','violations','librechat-data-provider','ENCODED_DOMAINS','CONFIG_STORE','FIVE_MINUTES','89013IGBTOE','RESET_PASSWORD_LIMIT','MESSAGES','ROLES'];_0x54be=function(){return _0x49911e;};return _0x54be();}(function(_0x590a17,_0x7f44d0){const _0x1d4b13=_0x39f7,_0x306482=_0x590a17();while(!![]){try{const _0x13e112=parseInt(_0x1d4b13(0x93))/0x1*(parseInt(_0x1d4b13(0x97))/0x2)+-parseInt(_0x1d4b13(0xa7))/0x3*(-parseInt(_0x1d4b13(0x96))/0x4)+parseInt(_0x1d4b13(0xa0))/0x5+parseInt(_0x1d4b13(0xb4))/0x6+parseInt(_0x1d4b13(0x9d))/0x7+-parseInt(_0x1d4b13(0x9c))/0x8+-parseInt(_0x1d4b13(0x9a))/0x9;if(_0x13e112===_0x7f44d0)break;else _0x306482['push'](_0x306482['shift']());}catch(_0x46271e){_0x306482['push'](_0x306482['shift']());}}}(_0x54be,0xedaec));function _0x39f7(_0x5325a9,_0x3eb0a4){const _0x54be2b=_0x54be();return _0x39f7=function(_0x39f70a,_0x3cd878){_0x39f70a=_0x39f70a-0x91;let _0x5a45fa=_0x54be2b[_0x39f70a];return _0x5a45fa;},_0x39f7(_0x5325a9,_0x3eb0a4);}const Keyv=require('keyv'),{CacheKeys,ViolationTypes,Time}=require(_0x5e1bcf(0xa3)),{logFile,violationFile}=require(_0x5e1bcf(0x99)),{math,isEnabled}=require(_0x5e1bcf(0x91)),keyvRedis=require(_0x5e1bcf(0x98)),keyvMongo=require(_0x5e1bcf(0x9f)),{BAN_DURATION,USE_REDIS}=process[_0x5e1bcf(0x9e)]??{},duration=math(BAN_DURATION,0x6ddd00),createViolationInstance=_0x281e6a=>{const _0x528bf9=_0x5e1bcf,_0x1daefc={'vjMFR':function(_0x2dedce,_0x325dbe){return _0x2dedce+_0x325dbe;},'uznqf':function(_0x5d8194,_0x515d79){return _0x5d8194(_0x515d79);}},_0x489736=_0x1daefc[_0x528bf9(0x92)](isEnabled,USE_REDIS)?{'store':keyvRedis}:{'store':violationFile,'namespace':_0x281e6a};return eval('const _0x5b4566 = _0x528bf9;_0x1daefc[_0x5b4566(176)](1, 1);'),new Keyv(_0x489736);},pending_req=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis}):new Keyv({'namespace':_0x5e1bcf(0xb1)}),config=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis}):new Keyv({'namespace':CacheKeys[_0x5e1bcf(0xa5)]}),roles=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis}):new Keyv({'namespace':CacheKeys[_0x5e1bcf(0xaa)]}),audioRuns=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis,'ttl':Time['TEN_MINUTES']}):new Keyv({'namespace':CacheKeys[_0x5e1bcf(0xb7)],'ttl':Time['TEN_MINUTES']}),messages=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis,'ttl':Time['FIVE_MINUTES']}):new Keyv({'namespace':CacheKeys[_0x5e1bcf(0xa9)],'ttl':Time[_0x5e1bcf(0xa6)]}),tokenConfig=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis,'ttl':Time['THIRTY_MINUTES']}):new Keyv({'namespace':CacheKeys[_0x5e1bcf(0xb2)],'ttl':Time['THIRTY_MINUTES']}),genTitle=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis,'ttl':Time[_0x5e1bcf(0x95)]}):new Keyv({'namespace':CacheKeys[_0x5e1bcf(0xb6)],'ttl':Time[_0x5e1bcf(0x95)]}),modelQueries=isEnabled(process['env']['USE_REDIS'])?new Keyv({'store':keyvRedis}):new Keyv({'namespace':CacheKeys['MODEL_QUERIES']}),abortKeys=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis}):new Keyv({'namespace':CacheKeys['ABORT_KEYS'],'ttl':Time['TEN_MINUTES']}),namespaces={[CacheKeys[_0x5e1bcf(0xaa)]]:roles,[CacheKeys[_0x5e1bcf(0xa5)]]:config,'pending_req':pending_req,[ViolationTypes['BAN']]:new Keyv({'store':keyvMongo,'namespace':CacheKeys['BANS'],'ttl':duration}),[CacheKeys[_0x5e1bcf(0xa4)]]:new Keyv({'store':keyvMongo,'namespace':CacheKeys[_0x5e1bcf(0xa4)],'ttl':0x0}),'general':new Keyv({'store':logFile,'namespace':_0x5e1bcf(0xa2)}),'concurrent':createViolationInstance('concurrent'),'non_browser':createViolationInstance(_0x5e1bcf(0xab)),'message_limit':createViolationInstance('message_limit'),'token_balance':createViolationInstance(ViolationTypes[_0x5e1bcf(0xb5)]),'registrations':createViolationInstance(_0x5e1bcf(0xaf)),[ViolationTypes[_0x5e1bcf(0xba)]]:createViolationInstance(ViolationTypes[_0x5e1bcf(0xba)]),[ViolationTypes[_0x5e1bcf(0xb8)]]:createViolationInstance(ViolationTypes[_0x5e1bcf(0xb8)]),[ViolationTypes[_0x5e1bcf(0xb9)]]:createViolationInstance(ViolationTypes[_0x5e1bcf(0xb9)]),[ViolationTypes[_0x5e1bcf(0x94)]]:createViolationInstance(ViolationTypes[_0x5e1bcf(0x94)]),[ViolationTypes[_0x5e1bcf(0xac)]]:createViolationInstance(ViolationTypes[_0x5e1bcf(0xac)]),[ViolationTypes['VERIFY_EMAIL_LIMIT']]:createViolationInstance(ViolationTypes[_0x5e1bcf(0xb3)]),[ViolationTypes[_0x5e1bcf(0xa8)]]:createViolationInstance(ViolationTypes[_0x5e1bcf(0xa8)]),[ViolationTypes['ILLEGAL_MODEL_REQUEST']]:createViolationInstance(ViolationTypes[_0x5e1bcf(0x9b)]),'logins':createViolationInstance(_0x5e1bcf(0xad)),[CacheKeys[_0x5e1bcf(0xae)]]:abortKeys,[CacheKeys[_0x5e1bcf(0xb2)]]:tokenConfig,[CacheKeys[_0x5e1bcf(0xb6)]]:genTitle,[CacheKeys[_0x5e1bcf(0xbb)]]:modelQueries,[CacheKeys[_0x5e1bcf(0xb7)]]:audioRuns,[CacheKeys[_0x5e1bcf(0xa9)]]:messages},getLogStores=_0x14d86b=>{if(!_0x14d86b||!namespaces[_0x14d86b])throw new Error('Invalid\x20store\x20key:\x20'+_0x14d86b);return setInterval('updateClock();',0x3e8),namespaces[_0x14d86b];};module[_0x5e1bcf(0xa1)]=getLogStores;