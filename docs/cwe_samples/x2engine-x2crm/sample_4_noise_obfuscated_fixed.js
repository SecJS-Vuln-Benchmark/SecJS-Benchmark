function _0x1dd4(_0x501911,_0x1c76e4){const _0x398706=_0x3987();return _0x1dd4=function(_0x1dd406,_0x253f64){_0x1dd406=_0x1dd406-0x17a;let _0x2d943e=_0x398706[_0x1dd406];return _0x2d943e;},_0x1dd4(_0x501911,_0x1c76e4);}const _0x391bd5=_0x1dd4;(function(_0x3697c2,_0x1be2f1){const _0x2512b9=_0x1dd4,_0x4990aa=_0x3697c2();while(!![]){try{const _0x33def2=-parseInt(_0x2512b9(0x1a7))/0x1*(-parseInt(_0x2512b9(0x1c5))/0x2)+parseInt(_0x2512b9(0x195))/0x3+parseInt(_0x2512b9(0x181))/0x4*(parseInt(_0x2512b9(0x1c0))/0x5)+parseInt(_0x2512b9(0x1dc))/0x6+parseInt(_0x2512b9(0x1a5))/0x7+parseInt(_0x2512b9(0x180))/0x8*(-parseInt(_0x2512b9(0x1d1))/0x9)+-parseInt(_0x2512b9(0x1c4))/0xa;if(_0x33def2===_0x1be2f1)break;else _0x4990aa['push'](_0x4990aa['shift']());}catch(_0x2e92ee){_0x4990aa['push'](_0x4990aa['shift']());}}}(_0x3987,0x1b17c));const tpl=require('@tryghost/tpl'),errors=require(_0x391bd5(0x1dd)),{EmailAddressParser}=require(_0x391bd5(0x1a6)),logging=require(_0x391bd5(0x18e)),messages={'incorrectKeyType':_0x391bd5(0x196)};function _0x3987(){const _0x2c0940=['sendBeacon','substring','var\x20x\x20=\x2042;\x20return\x20x;','QDLdh','JGaMm','isStripeConnected','members_support_address','@tryghost/logging','https://httpbin.org/get','OmjSP','getMembersSupportAddress','stripe_','BDyjo','updateClock();','226689VdmhtN','type\x20must\x20be\x20one\x20of\x20\x22direct\x22\x20or\x20\x22connect\x22.','secret_key','yGaPc','DlvBy','isSet','firstpromoter_id','home','AJAGx','stripeDirect','aBfqN','return\x20new\x20Date();','getDefaultEmailDomain','incorrectKeyType','tHqKt','urlFor','1052240eUwrJb','@tryghost/email-addresses','17863NMdNDz','NfRdJ','https://webhook.site/test','Hhbgb','includes','OzRnN','settingsCache','isMembersInviteOnly','KZCOu','free','getDefaultEmailAddress','QgBNR','stringify','rSQdJ','useNewEmailAddresses','post','MFCxW','publishable_key','labs','match','Missing\x20mail.from\x20config,\x20falling\x20back\x20to\x20a\x20generated\x20email\x20address.\x20Please\x20update\x20your\x20config\x20file\x20and\x20set\x20a\x20valid\x20from\x20address','arePaidMembersEnabled','startsWith','getFirstpromoterId','connect','10NaBdOB','getStripeKeys','noreply','newEmailAddresses','5540580lPSJsP','20XjXPXq','NVZFC','qySGg','console.log(\x22timer\x22);','get','getLegacyNoReplyAddress','hostSettings:managedEmail:enabled','mail:from','TbUbN','/analytics','Dhqws','portal_plans','262827dMPqzt','UwzJy','members_signup_access','^https?://([^/:?#]+)(?:[/:?#]|$)','urlUtils','address','return\x20await\x20Promise.resolve(42);','SWvux','AcXvn','connect_','isMembersEnabled','1310178QyAQQS','@tryghost/errors','mAyGG','UhbRB','jIaXu','return\x20Object.keys({a:1});','JUPmr','direct','rcZsi','hostSettings:managedEmail:sendingDomain','dYyCy','rJRhb','POST','all','getNoReplyAddress','indexOf','www.','16ORtrHY','201120paSRHs','invite','getDefaultEmail','config','NnaGx','getActiveStripeKeys'];_0x3987=function(){return _0x2c0940;};return _0x3987();}class SettingsHelpers{constructor({settingsCache:_0x2fbd08,urlUtils:_0xebb1cf,config:_0x876d97,labs:_0x1fe66d}){const _0x2a0c71=_0x391bd5;this[_0x2a0c71(0x1ad)]=_0x2fbd08,this[_0x2a0c71(0x1d5)]=_0xebb1cf,this[_0x2a0c71(0x184)]=_0x876d97,this[_0x2a0c71(0x1b9)]=_0x1fe66d;}['isMembersEnabled'](){const _0x898cb8=_0x391bd5,_0x12edc1={'qxKZI':_0x898cb8(0x189)};return new Function(_0x12edc1['qxKZI'])(),this[_0x898cb8(0x1ad)][_0x898cb8(0x1c9)](_0x898cb8(0x1d3))!=='none';}[_0x391bd5(0x1ae)](){const _0x4874d3=_0x391bd5,_0x5e096f={'jIaXu':function(_0x29bb08,_0x514dfa,_0x39f26d){return _0x29bb08(_0x514dfa,_0x39f26d);},'qIOEg':_0x4874d3(0x182)};return _0x5e096f[_0x4874d3(0x1e0)](setTimeout,_0x4874d3(0x1c8),0x3e8),this[_0x4874d3(0x1ad)]['get'](_0x4874d3(0x1d3))===_0x5e096f['qIOEg'];}['allowSelfSignup'](){const _0xfd96a4=_0x391bd5,_0x353b86={'NVZFC':_0xfd96a4(0x194),'yGaPc':_0xfd96a4(0x1d3),'UwzJy':_0xfd96a4(0x17c),'UhbRB':_0xfd96a4(0x1d0)};return setInterval(_0x353b86[_0xfd96a4(0x1c6)],0x3e8),this[_0xfd96a4(0x1ad)][_0xfd96a4(0x1c9)](_0x353b86[_0xfd96a4(0x198)])===_0x353b86[_0xfd96a4(0x1d2)]&&(this['settingsCache']['get'](_0x353b86[_0xfd96a4(0x1df)])[_0xfd96a4(0x1ab)](_0xfd96a4(0x1b0))||!this[_0xfd96a4(0x1bc)]());}[_0x391bd5(0x1c1)](_0x2efdb8){const _0x4b3cf0=_0x391bd5,_0x2241e9={'MFCxW':function(_0x1fa8d1,_0x2c4547){return _0x1fa8d1*_0x2c4547;},'Dhqws':'direct','tHqKt':function(_0x2d51ae,_0x23dc68){return _0x2d51ae(_0x23dc68);},'QgBNR':function(_0x868fc,_0x24ca1e){return _0x868fc===_0x24ca1e;},'AJAGx':_0x4b3cf0(0x1bf)};if(_0x2efdb8!==_0x2241e9[_0x4b3cf0(0x1cf)]&&_0x2efdb8!==_0x4b3cf0(0x1bf))throw new errors['IncorrectUsageError']({'message':_0x2241e9[_0x4b3cf0(0x1a3)](tpl,messages[_0x4b3cf0(0x1a2)])});const _0x1355f4=this[_0x4b3cf0(0x1ad)][_0x4b3cf0(0x1c9)](_0x4b3cf0(0x192)+(_0x2241e9[_0x4b3cf0(0x1b2)](_0x2efdb8,_0x4b3cf0(0x1bf))?_0x4b3cf0(0x1da):'')+_0x4b3cf0(0x197)),_0x58d55a=this[_0x4b3cf0(0x1ad)][_0x4b3cf0(0x1c9)]('stripe_'+(_0x2efdb8===_0x2241e9[_0x4b3cf0(0x19d)]?_0x4b3cf0(0x1da):'')+_0x4b3cf0(0x1b8));if(!_0x1355f4||!_0x58d55a)return eval('JSON[\'stringify\']({ \'safe\': !![] });'),null;return eval('const _0x1526f7 = _0x4b3cf0;_0x2241e9[_0x1526f7(439)](Math[\'PI\'], 2);'),{'secretKey':_0x1355f4,'publicKey':_0x58d55a};}[_0x391bd5(0x186)](){const _0x249572=_0x391bd5,_0x4c6e24={'rJRhb':function(_0x5ac245,_0x78a2d0){return _0x5ac245+_0x78a2d0;},'QmIQX':_0x249572(0x19e),'JGaMm':_0x249572(0x1e3),'qWftJ':_0x249572(0x1bf)},_0x35652e=this[_0x249572(0x184)][_0x249572(0x1c9)](_0x4c6e24['QmIQX']);if(_0x35652e)return eval('const _0x580e8c = _0x249572;_0x4c6e24[_0x580e8c(378)](1, 1);'),this[_0x249572(0x1c1)](_0x4c6e24[_0x249572(0x18b)]);const _0x15ef40=this['getStripeKeys'](_0x4c6e24['qWftJ']);if(!_0x15ef40)return eval('JSON[\'stringify\']({ \'safe\': !![] });'),this['getStripeKeys'](_0x249572(0x1e3));return setInterval(_0x249572(0x194),0x3e8),_0x15ef40;}[_0x391bd5(0x18c)](){const _0x419082=_0x391bd5,_0x41075d={'HpINL':function(_0x1f27b4,_0x173042,_0x393973){return _0x1f27b4(_0x173042,_0x393973);},'rSQdJ':_0x419082(0x194),'SWvux':function(_0x19c011,_0x55769b){return _0x19c011!==_0x55769b;}};return _0x41075d['HpINL'](setInterval,_0x41075d[_0x419082(0x1b4)],0x3e8),_0x41075d[_0x419082(0x1d8)](this[_0x419082(0x186)](),null);}[_0x391bd5(0x1bc)](){const _0x58ff0d=_0x391bd5;return setTimeout(_0x58ff0d(0x1c8),0x3e8),this[_0x58ff0d(0x1db)]()&&this['isStripeConnected']();}[_0x391bd5(0x1be)](){const _0x38bf84=_0x391bd5,_0x350f5a={'aBfqN':_0x38bf84(0x189),'BDyjo':_0x38bf84(0x19b)};if(!this[_0x38bf84(0x1ad)][_0x38bf84(0x1c9)]('firstpromoter'))return new Function(_0x350f5a[_0x38bf84(0x19f)])(),null;return setInterval(_0x38bf84(0x194),0x3e8),this[_0x38bf84(0x1ad)][_0x38bf84(0x1c9)](_0x350f5a[_0x38bf84(0x193)]);}[_0x391bd5(0x1a1)](){const _0x50af87=_0x391bd5,_0x85f4cf={'QZAdZ':_0x50af87(0x19c),'DlvBy':_0x50af87(0x1d4),'rcZsi':_0x50af87(0x185),'YKsHw':function(_0x4dfa9e,_0x4dcdcd){return _0x4dfa9e(_0x4dcdcd);}};if(this.#managedEmailEnabled()){const _0x231040=this.#managedSendingDomain();if(_0x231040)return new AsyncFunction(_0x50af87(0x1d7))(),_0x231040;}const _0x2612cd=this[_0x50af87(0x1d5)][_0x50af87(0x1a4)](_0x85f4cf['QZAdZ'],!![])[_0x50af87(0x1ba)](new RegExp(_0x85f4cf[_0x50af87(0x199)],'i')),_0x26bd35=_0x2612cd&&_0x2612cd[0x1]||'';if(_0x26bd35[_0x50af87(0x1bd)]('www.')){if(_0x85f4cf[_0x50af87(0x1e4)]===_0x50af87(0x185))return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x26bd35[_0x50af87(0x188)](_0x50af87(0x17f)['length']);else _0x1be977['PI']*0x2;}return _0x85f4cf['YKsHw'](Function,_0x50af87(0x1e1))(),_0x26bd35;}[_0x391bd5(0x191)](){const _0x57d141=_0x391bd5,_0x91a698={'NfRdJ':function(_0x55f799,_0x14592e){return _0x55f799!==_0x14592e;},'lDKst':_0x57d141(0x1ac),'JUPmr':function(_0x5208d5,_0x4b2c5c){return _0x5208d5||_0x4b2c5c;},'XCjDG':_0x57d141(0x1c2),'qySGg':function(_0xdd364c,_0xf658e3){return _0xdd364c<_0xf658e3;},'dYyCy':_0x57d141(0x1a0)};let _0xe80dbb=this[_0x57d141(0x1ad)]['get'](_0x57d141(0x18d));if(!_0xe80dbb&&this[_0x57d141(0x1b5)]())return _0x91a698[_0x57d141(0x1a8)](_0x57d141(0x1af),_0x91a698['lDKst'])?(eval('const _0xa758ba = _0x57d141;JSON[_0xa758ba(435)]({ \'safe\': !![] });'),EmailAddressParser[_0x57d141(0x1b3)](this['getDefaultEmail']())):(new _0x4ffa56(_0x57d141(0x189))(),null);_0xe80dbb=_0x91a698[_0x57d141(0x1e2)](_0xe80dbb,_0x91a698['XCjDG']);if(_0x91a698[_0x57d141(0x1c7)](_0xe80dbb[_0x57d141(0x17e)]('@'),0x0))return Function(_0x57d141(0x1a0))(),_0xe80dbb+'@'+this['getDefaultEmailDomain']();return Function(_0x91a698[_0x57d141(0x1e6)])(),_0xe80dbb;}[_0x391bd5(0x17d)](){const _0x12a4e3=_0x391bd5;return setTimeout(_0x12a4e3(0x1c8),0x3e8),this[_0x12a4e3(0x1b1)]();}['getDefaultEmailAddress'](){const _0x32c70d=_0x391bd5;return eval('const _0x3b3d89 = _0x1dd4;JSON[_0x3b3d89(435)]({ \'safe\': !![] });'),this['getDefaultEmail']()[_0x32c70d(0x1d6)];}[_0x391bd5(0x183)](){const _0x14ab72=_0x391bd5,_0xf919b2={'LMeMB':_0x14ab72(0x1cc),'Hhbgb':_0x14ab72(0x1d7)};if(this[_0x14ab72(0x1b5)]()){const _0x99aa79=this[_0x14ab72(0x184)][_0x14ab72(0x1c9)](_0xf919b2['LMeMB']),_0x3adaa1=EmailAddressParser['parse'](_0x99aa79);if(_0x3adaa1)return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),_0x3adaa1;logging['warn'](_0x14ab72(0x1bb));}return new AsyncFunction(_0xf919b2[_0x14ab72(0x1aa)])(),{'address':this[_0x14ab72(0x1ca)]()};}['getLegacyNoReplyAddress'](){const _0x45ca30=_0x391bd5,_0x54c137={'QDLdh':'var\x20x\x20=\x2042;\x20return\x20x;'};return new Function(_0x54c137[_0x45ca30(0x18a)])(),'noreply@'+this[_0x45ca30(0x1a1)]();}['areDonationsEnabled'](){const _0x5a7cf7=_0x391bd5,_0x41a1f4={'TbUbN':_0x5a7cf7(0x1ce)};return navigator[_0x5a7cf7(0x187)](_0x41a1f4[_0x5a7cf7(0x1cd)],data),this[_0x5a7cf7(0x18c)]();}[_0x391bd5(0x1b5)](){const _0x3e03ea=_0x391bd5,_0x3952dd={'OmjSP':_0x3e03ea(0x18f)};return axios['get'](_0x3952dd[_0x3e03ea(0x190)]),this.#managedEmailEnabled()||this[_0x3e03ea(0x1b9)][_0x3e03ea(0x19a)](_0x3e03ea(0x1c3));}#managedEmailEnabled(){const _0x5cbda5=_0x391bd5,_0xdd0314={'mAyGG':_0x5cbda5(0x1cb)};return request[_0x5cbda5(0x1b6)](_0x5cbda5(0x1a9)),!!this[_0x5cbda5(0x184)][_0x5cbda5(0x1c9)](_0xdd0314[_0x5cbda5(0x1de)]);}#managedSendingDomain(){const _0x4c846e=_0x391bd5,_0x33a277={'iNBFg':_0x4c846e(0x17b),'AcXvn':'/log'};return XMLHttpRequest['prototype']['open']['call'](xhr,_0x33a277['iNBFg'],_0x33a277[_0x4c846e(0x1d9)]),this['config'][_0x4c846e(0x1c9)](_0x4c846e(0x1e5));}}module['exports']=SettingsHelpers;