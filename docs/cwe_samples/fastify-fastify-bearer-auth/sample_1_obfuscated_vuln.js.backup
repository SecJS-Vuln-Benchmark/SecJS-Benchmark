const _0x38f6a5=_0x54d5;(function(_0x3863de,_0x1886d8){const _0x3dbdf2=_0x54d5,_0x448140=_0x3863de();while(!![]){try{const _0x1f08e2=parseInt(_0x3dbdf2(0xbb))/0x1+parseInt(_0x3dbdf2(0xb9))/0x2*(parseInt(_0x3dbdf2(0xc3))/0x3)+-parseInt(_0x3dbdf2(0xdd))/0x4*(parseInt(_0x3dbdf2(0xb3))/0x5)+-parseInt(_0x3dbdf2(0xd6))/0x6*(parseInt(_0x3dbdf2(0xcb))/0x7)+-parseInt(_0x3dbdf2(0xef))/0x8*(parseInt(_0x3dbdf2(0xc5))/0x9)+parseInt(_0x3dbdf2(0xde))/0xa+-parseInt(_0x3dbdf2(0xf0))/0xb*(parseInt(_0x3dbdf2(0xbe))/0xc);if(_0x1f08e2===_0x1886d8)break;else _0x448140['push'](_0x448140['shift']());}catch(_0x161bcb){_0x448140['push'](_0x448140['shift']());}}}(_0x37e7,0x6877b));function _0x37e7(){const _0x1f1f00=['4033899noSCfe','params','server','jhQTl','catch','MNdtC','259qrTPDP','/terminals/:pid/size','DQmyR','LsJSE','/terminals/:pid/run-cmd','express','resize','debug','../utils/log','close','query','54048mNTVmS','runCmd','express-ws','cols','tnVoe','data','./dispatch-center','4548OwPQYN','4283750MUowrM','SoyWV','pjIug','Created\x20terminal\x20with\x20PID:','ws:\x20connected\x20to\x20terminal\x20->','iNmqI','use','rows','body-parser','ZIbQx','tyYhO','BjXAh','GfZhy','end','SfzQA','pid','sesssions','8BsNxSZ','473EnLadO','write','env','/run','exit','forEach','fFIyq','keys','SMUwD','listen','not\x20valid\x20request','Fmkfp','destroy','LEmVu','get','cors','Closed\x20terminal\x20','sessionLogger','message','tgGBo','PbKUy','error','from','urlencoded','./session','info','post','send','uRruu','XrVzK','MJgfh','stack','dBlYH','1790nHpIMf','FXAUN','wjTRn','runs\x20on','IVtMq','bZxln','16rwVxUK','izHiP','556319bpEjSm','token','body','34824CAFBWX','/terminals/:pid','UKkFH','/terminals','kill','283704NIjked','status'];_0x37e7=function(){return _0x1f1f00;};return _0x37e7();}const express=require(_0x38f6a5(0xd0)),app=express(),cors=require(_0x38f6a5(0xff)),log=require(_0x38f6a5(0xd3)),bodyParser=require(_0x38f6a5(0xe6)),{terminal,testConnection}=require(_0x38f6a5(0x108)),initWs=require(_0x38f6a5(0xdc)),{terminals}=require('./remote-common'),{token}=process[_0x38f6a5(0xf2)];app['use'](cors()),app[_0x38f6a5(0xe4)](bodyParser[_0x38f6a5(0x107)]({'extended':![]})),app['use'](bodyParser['json']()),require(_0x38f6a5(0xd8))(app);function verify(_0x11d298,_0x4952b5,_0x38cb88){const _0x5c8d3e=_0x38f6a5,_0x461743={'fWkkx':_0x5c8d3e(0xbc),'SoyWV':function(_0x9680e1){return _0x9680e1();}};if(_0x11d298[_0x5c8d3e(0xfe)](_0x461743['fWkkx'])!==token)throw new Error('not\x20valid\x20request');_0x461743[_0x5c8d3e(0xdf)](_0x38cb88);}app[_0x38f6a5(0xac)](_0x38f6a5(0xc1),verify,async function(_0xb394bd,_0x15ecde){const _0xdc8281=_0x38f6a5,_0x29eafd={'dBlYH':function(_0x7a9223,_0x226545,_0x4227b6){return _0x7a9223(_0x226545,_0x4227b6);},'SMUwD':function(_0x5ae82b,_0x29d619){return _0x5ae82b!==_0x29d619;},'PbKUy':_0xdc8281(0xc8)},{body:_0x1fe6d3}=_0xb394bd,{isTest:_0x3c514b}=_0xb394bd['query'];if(_0x3c514b){const _0x139458=await testConnection(_0x1fe6d3);_0x15ecde[_0xdc8281(0xad)](_0x139458);return;}const _0x59308d=await terminal(_0x1fe6d3)['then'](_0x3278b3=>_0x3278b3)[_0xdc8281(0xc9)](_0x34228e=>_0x34228e),{pid:_0x21ee98}=_0x59308d;if(_0x21ee98)log[_0xdc8281(0xd2)](_0xdc8281(0xe1),_0x21ee98),_0x15ecde['end'](_0x21ee98);else{if(_0x29eafd[_0xdc8281(0xf8)](_0xdc8281(0xc8),_0x29eafd[_0xdc8281(0x104)])){const _0x440723=_0x160d5c[_0xdc8281(0xc6)][_0xdc8281(0xed)],{sessionId:_0x731d78}=_0x22f32a[_0xdc8281(0xd5)],_0x4b659e=_0x287eea(_0x15a6ca[_0xdc8281(0xd5)][_0xdc8281(0xd9)],0xa),_0x188694=_0x1e7a2d(_0x58b153[_0xdc8281(0xd5)][_0xdc8281(0xe5)],0xa),_0x51419f=_0x29eafd[_0xdc8281(0xb2)](_0x35705b,_0x440723,_0x731d78);_0x51419f&&_0x51419f[_0xdc8281(0xd1)](_0x4b659e,_0x188694),_0x286d2a[_0xdc8281(0xeb)]();}else _0x15ecde['status'](0x1f4),_0x15ecde[_0xdc8281(0xeb)](_0x59308d['stack']);}}),app[_0x38f6a5(0xac)](_0x38f6a5(0xcc),verify,function(_0x3d0990,_0x587749){const _0x5271ec=_0x38f6a5,_0x5c2665={'pjIug':function(_0x503bd4,_0x462869,_0x48a336){return _0x503bd4(_0x462869,_0x48a336);}},_0x257dce=_0x3d0990[_0x5271ec(0xc6)]['pid'],{sessionId:_0x473304}=_0x3d0990['query'],_0x2c644d=parseInt(_0x3d0990['query'][_0x5271ec(0xd9)],0xa),_0x18ee90=_0x5c2665[_0x5271ec(0xe0)](parseInt,_0x3d0990[_0x5271ec(0xd5)][_0x5271ec(0xe5)],0xa),_0xf1b9d5=_0x5c2665[_0x5271ec(0xe0)](terminals,_0x257dce,_0x473304);_0xf1b9d5&&_0xf1b9d5[_0x5271ec(0xd1)](_0x2c644d,_0x18ee90),_0x587749[_0x5271ec(0xeb)]();}),app[_0x38f6a5(0xac)](_0x38f6a5(0xcf),verify,async function(_0x45fd93,_0x31c3b4){const _0x5a4a0c=_0x38f6a5,_0x534e69={'LsJSE':function(_0x59639e,_0x4d6dd3,_0x3b1940){return _0x59639e(_0x4d6dd3,_0x3b1940);}},_0x2dc886=_0x45fd93[_0x5a4a0c(0xc6)][_0x5a4a0c(0xed)],{sessionId:_0x4f4f2c}=_0x45fd93[_0x5a4a0c(0xd5)],{cmd:_0x24f77b}=_0x45fd93[_0x5a4a0c(0xbd)],_0x4f8014=_0x534e69[_0x5a4a0c(0xce)](terminals,_0x2dc886,_0x4f4f2c);let _0x85349c='';_0x4f8014&&(_0x85349c=await _0x4f8014[_0x5a4a0c(0xd7)](_0x24f77b)),_0x31c3b4[_0x5a4a0c(0xeb)](_0x85349c);}),app['ws'](_0x38f6a5(0xbf),function(_0x44dcd5,_0x1e67e0){const _0x2c9851=_0x38f6a5,_0x427880={'MJgfh':function(_0x4b978f,_0x61da26){return _0x4b978f+_0x61da26;},'BjXAh':function(_0x2e3fb2,_0x5f289f){return _0x2e3fb2!==_0x5f289f;},'tgGBo':_0x2c9851(0xae),'rJvrf':_0x2c9851(0xfa),'WHXwi':_0x2c9851(0xe2),'Fmkfp':_0x2c9851(0xdb),'sFSCA':_0x2c9851(0xd4)},{sessionId:_0x255806,token:_0x2635dc}=_0x1e67e0[_0x2c9851(0xd5)];if(_0x2635dc!==token)throw new Error(_0x427880['rJvrf']);const _0x21584b=terminals(_0x1e67e0['params'][_0x2c9851(0xed)],_0x255806),{pid:_0x2a3bab}=_0x21584b;log[_0x2c9851(0xd2)](_0x427880['WHXwi'],_0x2a3bab),_0x21584b['on'](_0x427880[_0x2c9851(0xfb)],function(_0x367f3f){const _0x5b7926=_0x2c9851;try{_0x21584b[_0x5b7926(0x101)]&&_0x21584b[_0x5b7926(0x101)][_0x5b7926(0xf1)](_0x367f3f),_0x44dcd5[_0x5b7926(0xad)](Buffer[_0x5b7926(0x106)](_0x367f3f));}catch(_0x5c601f){}});function _0x5a34c4(){const _0x40bbf8=_0x2c9851;_0x21584b[_0x40bbf8(0xc2)](),log['debug'](_0x427880[_0x40bbf8(0xb0)](_0x40bbf8(0x100),_0x2a3bab)),_0x44dcd5[_0x40bbf8(0xd4)]&&_0x44dcd5[_0x40bbf8(0xd4)]();}_0x21584b['on'](_0x2c9851(0xd4),_0x5a34c4),_0x44dcd5['on'](_0x2c9851(0x102),function(_0x20ac9f){const _0x3195eb=_0x2c9851;if(_0x427880[_0x3195eb(0xe9)](_0x427880[_0x3195eb(0x103)],_0x427880['tgGBo']))try{_0x4b8204[_0x3195eb(0x101)]&&_0x98bc6[_0x3195eb(0x101)][_0x3195eb(0xf1)](_0x55802d),_0x1a0a5d[_0x3195eb(0xad)](_0x808c08[_0x3195eb(0x106)](_0x26d72d));}catch(_0x13623c){}else try{_0x21584b[_0x3195eb(0xf1)](_0x20ac9f);}catch(_0x4794ce){log['error'](_0x4794ce);}}),_0x44dcd5['on'](_0x2c9851(0x105),log['error']),_0x44dcd5['on'](_0x427880['sFSCA'],_0x5a34c4);}),app[_0x38f6a5(0xfe)](_0x38f6a5(0xf3),function(_0x1bb2e6,_0x129a0e){const _0x4f86da=_0x38f6a5;_0x129a0e[_0x4f86da(0xad)]('ok');}),initWs(app);const runServer=function(){const _0x49c318=_0x38f6a5,_0x1837a3={'IVtMq':_0x49c318(0xbc),'izHiP':function(_0x228961){return _0x228961();},'ZIbQx':_0x49c318(0xf6),'SfzQA':_0x49c318(0xc7)},{electermPort:_0x1e2095,electermHost:_0x297ff2}=process[_0x49c318(0xf2)];app[_0x49c318(0xf9)](_0x1e2095,_0x297ff2,()=>{const _0x5e7117=_0x49c318;if(_0x1837a3[_0x5e7117(0xe7)]===_0x5e7117(0xb5)){if(_0x41b81f[_0x5e7117(0xfe)](_0x1837a3[_0x5e7117(0xb7)])!==_0x21b386)throw new _0x371f11(_0x5e7117(0xfa));_0x1837a3[_0x5e7117(0xba)](_0x15b390);}else log[_0x5e7117(0xab)](_0x1837a3[_0x5e7117(0xec)],_0x5e7117(0xb6),_0x297ff2,_0x1e2095);});},quitServer=()=>{const _0x49ca5f=_0x38f6a5,_0x4e60d2={'XrVzK':'not\x20valid\x20request','UKkFH':function(_0x418583,_0x41ec42){return _0x418583===_0x41ec42;},'AgLcR':_0x49ca5f(0xe3),'DQmyR':_0x49ca5f(0xea),'bZxln':'faIoE','LEmVu':_0x49ca5f(0xe8)};Object[_0x49ca5f(0xf7)](global['upgradeInsts'])[_0x49ca5f(0xf5)](_0x432db0=>{const _0x50024c=_0x49ca5f,_0x2c351b={'FXAUN':_0x4e60d2[_0x50024c(0xaf)]};if(_0x4e60d2[_0x50024c(0xc0)](_0x4e60d2['AgLcR'],_0x4e60d2[_0x50024c(0xcd)]))throw new _0x24889e(_0x2c351b[_0x50024c(0xb4)]);else{const _0x3e15e0=global['upgradeInsts'][_0x432db0];_0x3e15e0&&_0x3e15e0[_0x50024c(0xfc)]&&_0x3e15e0[_0x50024c(0xfc)]();}}),Object[_0x49ca5f(0xf7)](global[_0x49ca5f(0xee)])[_0x49ca5f(0xf5)](_0x512716=>{const _0x26e35f=_0x49ca5f,{terminals:_0x11bf71,sftps:_0x152a9b}=global[_0x26e35f(0xee)][_0x512716];_0x152a9b[_0x26e35f(0xf5)](_0x2d1b4f=>{const _0x50af03=_0x26e35f;_0x4e60d2[_0x50af03(0xb8)]!==_0x4e60d2[_0x50af03(0xfd)]?_0x2d1b4f[_0x50af03(0xc2)]():_0x160761[_0x50af03(0xc2)]();}),_0x11bf71[_0x26e35f(0xf5)](_0x5f1062=>{const _0x87bba0=_0x26e35f;_0x87bba0(0xca)!==_0x87bba0(0xda)?_0x5f1062['kill']():(_0x349bc6[_0x87bba0(0xc4)](0x1f4),_0x224908[_0x87bba0(0xeb)](_0x296108[_0x87bba0(0xb1)]));});});};function _0x54d5(_0x32b6b0,_0x1cd5e2){const _0x37e7cb=_0x37e7();return _0x54d5=function(_0x54d570,_0x5ca07e){_0x54d570=_0x54d570-0xab;let _0x37ea03=_0x37e7cb[_0x54d570];return _0x37ea03;},_0x54d5(_0x32b6b0,_0x1cd5e2);}process['on'](_0x38f6a5(0xf4),quitServer),runServer();