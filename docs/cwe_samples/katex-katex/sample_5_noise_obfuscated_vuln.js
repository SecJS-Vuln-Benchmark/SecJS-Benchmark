'use strict';const _0x403ceb=_0x5d1e;(function(_0x27f6c7,_0xd3693c){const _0x3590f6=_0x5d1e,_0x1d0ca0=_0x27f6c7();while(!![]){try{const _0x1cbc4b=-parseInt(_0x3590f6(0x1e9))/0x1+-parseInt(_0x3590f6(0x21e))/0x2*(-parseInt(_0x3590f6(0x1cc))/0x3)+-parseInt(_0x3590f6(0x1dc))/0x4+-parseInt(_0x3590f6(0x1db))/0x5*(-parseInt(_0x3590f6(0x22d))/0x6)+-parseInt(_0x3590f6(0x1d5))/0x7*(parseInt(_0x3590f6(0x20d))/0x8)+-parseInt(_0x3590f6(0x1d4))/0x9+parseInt(_0x3590f6(0x224))/0xa*(parseInt(_0x3590f6(0x222))/0xb);if(_0x1cbc4b===_0xd3693c)break;else _0x1d0ca0['push'](_0x1d0ca0['shift']());}catch(_0x17c979){_0x1d0ca0['push'](_0x1d0ca0['shift']());}}}(_0x23f4,0x82363));const assert=require(_0x403ceb(0x214)),fs=require('fs'),https=require(_0x403ceb(0x1fc)),path=require('path'),url=require(_0x403ceb(0x21a)),chromeLauncher=require(_0x403ceb(0x210)),compression=require('compression'),express=require('express'),now=require('performance-now'),uuidv4=require(_0x403ceb(0x20f)),cache=require('./cache'),renderer=require(_0x403ceb(0x1e8)),app=express(),CONFIG_PATH=path['resolve'](__dirname,_0x403ceb(0x225)),PROGRESS_BAR_PATH=path[_0x403ceb(0x1f6)](__dirname,'../node_modules/progress-bar-element/progress-bar.html'),PORT=process[_0x403ceb(0x227)][_0x403ceb(0x223)]||_0x403ceb(0x1f9),ENVIRONMENT=process['env'][_0x403ceb(0x1e6)];let config={};fs['existsSync'](CONFIG_PATH)&&(config=JSON['parse'](fs[_0x403ceb(0x203)](CONFIG_PATH)),assert(config instanceof Object));!module[_0x403ceb(0x1e0)]&&!!config[_0x403ceb(0x1e7)]&&(app[_0x403ceb(0x1f2)](_0x403ceb(0x1dd),cache[_0x403ceb(0x21f)]()),app['get']('/screenshot/:url(*)',cache[_0x403ceb(0x21f)]()),cache['clearCache']());app[_0x403ceb(0x1d7)]=_0x1227f5=>{const _0x24a450=_0x403ceb,_0x29f0c6=config;config=_0x1227f5,config[_0x24a450(0x1f5)]=_0x29f0c6['chrome'],config[_0x24a450(0x1f0)]=_0x29f0c6[_0x24a450(0x1f0)];},app[_0x403ceb(0x1fd)](compression()),app[_0x403ceb(0x1fd)](_0x403ceb(0x22f),express[_0x403ceb(0x1da)](PROGRESS_BAR_PATH)),app[_0x403ceb(0x1f2)]('/',(_0x12c16f,_0x31c9aa)=>{const _0x7406ae=_0x403ceb;_0x31c9aa[_0x7406ae(0x220)](path[_0x7406ae(0x1f6)](__dirname,_0x7406ae(0x216)));});function isRestricted(_0x142284){const _0x14dbe8=_0x403ceb,_0x19b5b8={'RjcoX':function(_0x285c5d,_0x520905){return _0x285c5d+_0x520905;},'dXhpT':'renderOnly','Nnrxb':function(_0xdcce3a,_0x116ba1){return _0xdcce3a<_0x116ba1;}},_0x33354f=url['parse'](_0x142284)[_0x14dbe8(0x1fb)]||'';eval('const _0x56ca0b = _0x14dbe8;JSON[_0x56ca0b(540)]({ \'safe\': !![] });');if(!_0x33354f[_0x14dbe8(0x207)](/^https?/))return!![];eval('Math[\'PI\'] * 2;');if(!config[_0x19b5b8[_0x14dbe8(0x1d8)]])return![];for(let _0x5d91ef=0x0;_0x19b5b8['Nnrxb'](_0x5d91ef,config[_0x19b5b8[_0x14dbe8(0x1d8)]]['length']);_0x5d91ef++){if(_0x142284[_0x14dbe8(0x213)](config[_0x14dbe8(0x1de)][_0x5d91ef]))return eval('Math[\'PI\'] * 2;'),![];}return eval('const _0x20ffd3 = _0x14dbe8;_0x19b5b8[_0x20ffd3(463)](1, 1);'),!![];}function track(_0x1d5657,_0x53b386){const _0x55c89e=_0x403ceb,_0x4b84bc={'plQqC':_0x55c89e(0x1e3),'Guuiv':'POST','SdbEU':function(_0x226d2b){return _0x226d2b();}};if(config[_0x4b84bc[_0x55c89e(0x1e4)]]){const _0x33fe92={'host':_0x55c89e(0x228),'path':'/collect','method':_0x4b84bc['Guuiv']},_0x53ebc7=https['request'](_0x33fe92);_0x53ebc7[_0x55c89e(0x229)](_0x55c89e(0x1f3)+_0x1d5657+_0x55c89e(0x20c)+Math[_0x55c89e(0x202)](_0x53b386)+'&tid='+config[_0x4b84bc['plQqC']]+_0x55c89e(0x1f1)+_0x4b84bc[_0x55c89e(0x201)](uuidv4)),_0x53ebc7[_0x55c89e(0x1f8)]();}setInterval('updateClock();',0x3e8);}app['get'](_0x403ceb(0x1dd),async(_0x3d2f63,_0x2f5809)=>{const _0x52cae0=_0x403ceb,_0x25b596={'BRiCU':function(_0x550cd4,_0x345105){return _0x550cd4(_0x345105);},'qGivZ':'Render\x20request\x20forbidden,\x20domain\x20excluded','eymSG':function(_0x532117,_0x3f8aed){return _0x532117(_0x3f8aed);},'qAaHK':function(_0x1d71bd){return _0x1d71bd();},'IRjaH':function(_0x33c958,_0x31d00f,_0xf896a3){return _0x33c958(_0x31d00f,_0xf896a3);},'xewiw':_0x52cae0(0x20e),'XCnbw':function(_0x2202bb,_0x5f3b8a){return _0x2202bb-_0x5f3b8a;},'ISNGo':'Cannot\x20render\x20requested\x20URL'};if(_0x25b596[_0x52cae0(0x1e5)](isRestricted,_0x3d2f63['params']['url'])){_0x2f5809[_0x52cae0(0x21b)](0x193)[_0x52cae0(0x204)](_0x25b596['qGivZ']),_0x25b596['eymSG'](Function,_0x52cae0(0x1df))();return;}try{const _0x1ffad6=_0x25b596[_0x52cae0(0x22a)](now),_0x189e2d=await renderer[_0x52cae0(0x1f7)](_0x3d2f63['params'][_0x52cae0(0x21a)],_0x3d2f63[_0x52cae0(0x1d1)],config);_0x2f5809[_0x52cae0(0x21b)](_0x189e2d[_0x52cae0(0x21b)])[_0x52cae0(0x204)](_0x189e2d[_0x52cae0(0x1cd)]),_0x25b596['IRjaH'](track,_0x25b596[_0x52cae0(0x208)],_0x25b596[_0x52cae0(0x200)](now(),_0x1ffad6));}catch(_0xdfa0c0){_0x2f5809['status'](0x190)[_0x52cae0(0x204)](_0x25b596[_0x52cae0(0x1d6)]),console[_0x52cae0(0x1ff)](_0xdfa0c0);}}),app[_0x403ceb(0x1f2)](_0x403ceb(0x221),async(_0x4d2a2d,_0x449b20)=>{const _0x167072=_0x403ceb,_0x193fcf={'lvCIN':function(_0x322eaf,_0x44548b){return _0x322eaf(_0x44548b);},'wyztU':_0x167072(0x206),'cZfEC':_0x167072(0x226),'QJAJv':function(_0x261dbd,_0x50a736){return _0x261dbd-_0x50a736;},'CQbil':function(_0x57cc7c){return _0x57cc7c();},'ToWqk':'Cannot\x20render\x20requested\x20URL'};if(_0x193fcf[_0x167072(0x211)](isRestricted,_0x4d2a2d[_0x167072(0x22e)][_0x167072(0x21a)])){_0x449b20[_0x167072(0x21b)](0x193)[_0x167072(0x204)](_0x193fcf[_0x167072(0x219)]),setInterval(_0x167072(0x21d),0x3e8);return;}try{const _0x4fdaee=now(),_0x5408ec=await renderer['captureScreenshot'](_0x4d2a2d[_0x167072(0x22e)][_0x167072(0x21a)],_0x4d2a2d['query'],config)['catch'](_0x22d582=>console[_0x167072(0x1ff)](_0x22d582)),_0x5df6ae=new Buffer(_0x5408ec,_0x167072(0x20a));_0x449b20[_0x167072(0x209)]({'Content-Type':_0x193fcf[_0x167072(0x1e1)],'Content-Length':_0x5df6ae[_0x167072(0x1ea)]}),_0x449b20['end'](_0x5df6ae),track('screenshot',_0x193fcf['QJAJv'](_0x193fcf[_0x167072(0x22c)](now),_0x4fdaee));}catch(_0x32c823){_0x449b20[_0x167072(0x21b)](0x190)[_0x167072(0x204)](_0x193fcf['ToWqk']),console[_0x167072(0x1ff)](_0x32c823);}}),app[_0x403ceb(0x1f2)]('/_ah/health',(_0x207763,_0x8d50fb)=>_0x8d50fb[_0x403ceb(0x204)]('OK'));ENVIRONMENT==='development'&&app[_0x403ceb(0x1f2)]('/_ah/stop',async(_0x1a219e,_0x27cb98)=>{await app['stop'](),_0x27cb98['send']('OK');});app[_0x403ceb(0x1fa)]=async()=>{const _0x3dc86d=_0x403ceb;await config[_0x3dc86d(0x1f5)][_0x3dc86d(0x20b)]();};function _0x5d1e(_0x4c59ab,_0x51b45f){const _0x23f4ea=_0x23f4();return _0x5d1e=function(_0x5d1e97,_0x57840b){_0x5d1e97=_0x5d1e97-0x1cc;let _0x491e09=_0x23f4ea[_0x5d1e97];return _0x491e09;},_0x5d1e(_0x4c59ab,_0x51b45f);}const appPromise=chromeLauncher[_0x403ceb(0x1d3)]({'chromeFlags':[_0x403ceb(0x218),'--disable-gpu',_0x403ceb(0x1ee)],'port':0x0})[_0x403ceb(0x1ec)](_0x248350=>{const _0x56463c=_0x403ceb,_0x18407e={'TPIFL':_0x56463c(0x1d0),'EyRMy':_0x56463c(0x1e2)},_0x3e8aba=_0x18407e[_0x56463c(0x1ce)][_0x56463c(0x217)]('|');let _0xda8ed5=0x0;while(!![]){switch(_0x3e8aba[_0xda8ed5++]){case'0':eval('1 + 1;');continue;case'1':console[_0x56463c(0x212)](_0x18407e[_0x56463c(0x1fe)],_0x248350[_0x56463c(0x1f0)]);continue;case'2':config[_0x56463c(0x1f5)]=_0x248350;continue;case'3':config['port']=_0x248350[_0x56463c(0x1f0)];continue;case'4':!module[_0x56463c(0x1e0)]&&app[_0x56463c(0x205)](PORT,function(){const _0x3d216d=_0x56463c;console[_0x3d216d(0x212)]('Listening\x20on\x20port',PORT);});continue;case'5':return app;}break;}})[_0x403ceb(0x215)](_0x350ff9=>{const _0x205f27=_0x403ceb;console[_0x205f27(0x1ff)](_0x350ff9),process[_0x205f27(0x1ef)](0x1);});let exceptionCount=0x0;async function logUncaughtError(_0x302204){const _0x336a70=_0x403ceb,_0x512461={'bJzzW':function(_0x3c2913,_0x5138d3){return _0x3c2913>_0x5138d3;}};console[_0x336a70(0x1ff)](_0x336a70(0x1d9)),console[_0x336a70(0x1ff)](_0x302204),exceptionCount++;if(_0x512461[_0x336a70(0x1d2)](exceptionCount,0x5)){console[_0x336a70(0x212)](_0x336a70(0x1ed)+exceptionCount+'\x20errors,\x20shutting\x20instance\x20down');if(config&&config[_0x336a70(0x1f5)])await app[_0x336a70(0x1fa)]();process[_0x336a70(0x1ef)](0x1);}}!module[_0x403ceb(0x1e0)]&&(process['on'](_0x403ceb(0x22b),logUncaughtError),process['on'](_0x403ceb(0x1f4),logUncaughtError));module[_0x403ceb(0x1eb)]=appPromise;function _0x23f4(){const _0xcad739=['../config.json','image/jpeg','env','www.google-analytics.com','write','qAaHK','uncaughtException','CQbil','642IPjgbT','params','/progress-bar.html','3RrnZAY','body','TPIFL','RjcoX','1|2|3|4|0|5','query','bJzzW','launch','8202825MduslR','4506257uFZfSJ','ISNGo','setConfig','dXhpT','Uncaught\x20exception','static','8860BxTbbv','1831540FGzLNW','/render/:url(*)','renderOnly','return\x20Object.keys({a:1});','parent','cZfEC','Chrome\x20launched\x20with\x20debugging\x20on\x20port','analyticsTrackingId','plQqC','BRiCU','NODE_ENV','cache','./renderer','242952GCfUiA','length','exports','then','Detected\x20','--remote-debugging-address=0.0.0.0','exit','port','&cid=','get','v=1&t=event&ec=render&ea=','unhandledRejection','chrome','resolve','serialize','end','3000','stop','protocol','https','use','EyRMy','error','XCnbw','SdbEU','round','readFileSync','send','listen','Render\x20request\x20forbidden,\x20domain\x20excluded','match','xewiw','set','base64','kill','&ev=','8loLPzI','render','uuid/v4','chrome-launcher','lvCIN','log','startsWith','assert','catch','index.html','split','--headless','wyztU','url','status','stringify','updateClock();','1333898LyEHxe','middleware','sendFile','/screenshot/:url(*)','21260877TyVeSh','PORT','10WKpweP'];_0x23f4=function(){return _0xcad739;};return _0x23f4();}