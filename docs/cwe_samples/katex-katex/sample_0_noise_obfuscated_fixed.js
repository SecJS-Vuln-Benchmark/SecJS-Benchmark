'use strict';const _0x44fc86=_0x1074;(function(_0x3f8b31,_0x180f9a){const _0x318cca=_0x1074,_0x37dd3f=_0x3f8b31();while(!![]){try{const _0x46c6a5=-parseInt(_0x318cca(0x10f))/0x1+-parseInt(_0x318cca(0xe2))/0x2+parseInt(_0x318cca(0xeb))/0x3+-parseInt(_0x318cca(0x10d))/0x4*(-parseInt(_0x318cca(0x11f))/0x5)+parseInt(_0x318cca(0x11e))/0x6*(-parseInt(_0x318cca(0x103))/0x7)+parseInt(_0x318cca(0xf6))/0x8+parseInt(_0x318cca(0x12a))/0x9*(parseInt(_0x318cca(0xe9))/0xa);if(_0x46c6a5===_0x180f9a)break;else _0x37dd3f['push'](_0x37dd3f['shift']());}catch(_0x50bc3d){_0x37dd3f['push'](_0x37dd3f['shift']());}}}(_0x2179,0xbb935));function _0x1074(_0x3e879b,_0x21940f){const _0x21794d=_0x2179();return _0x1074=function(_0x1074df,_0xc4a2c5){_0x1074df=_0x1074df-0xd8;let _0x539aa1=_0x21794d[_0x1074df];return _0x539aa1;},_0x1074(_0x3e879b,_0x21940f);}function _0x2179(){const _0x33b86b=['screenshot\x20is\x20an\x20image','NODE_ENV','status','script-after-load.html','auJIe','iXErf','48534pWrkgP','335WTiuzy','injectedElement','404\x20Not\x20Found','renders\x20basic\x20script','hYxXY','invalid\x20url\x20fails','/render/http://unknown.blah.com','QtrVj','bALSY','document-title','shadow-dom-polyfill-all.html?wc-inject-shadydom=true','2908179xXDCiF','basic-script.html','env','before','express','dDvfI','path','false','/render/abc','whitelist\x20ensures\x20other\x20urls\x20do\x20not\x20get\x20rendered','content-type','/render/file:///dev/fd/0','2656460vmRDke','failing','health\x20check\x20responds\x20correctly','JCieF','indexOf','link\x20rel','element-text','50zGBheF','static','2476884hUOlhV','setConfig','ANwoS','RFCkJ','supertest','push','http\x20status\x20code\x20should\x20be\x20able\x20to\x20be\x20set\x20via\x20a\x20meta\x20tag','XDZzr','/render/','/render/http://anotherDomain.com','shadow-dom-no-polyfill.html?wc-inject-shadydom=true','3738264CTBcZA','get','QUDtO','/screenshot/','shadow-root-text','qzzIa','true','length','stop','http-meta-status-code-multiple.html','include-script.html','file\x20url\x20fails','?wc-inject-shadydom=true','413XiUxQa','explicit\x20render\x20event\x20ends\x20early','header','shadow-dom-polyfill-loader.html?wc-inject-shadydom=true','server\x20status\x20code\x20should\x20be\x20forwarded','renders\x20shadow\x20DOM\x20-\x20no\x20polyfill','http-meta-status-code.html','script\x20tags\x20and\x20link[rel=import]\x20tags\x20are\x20stripped','tZGNw','ava','24316ifSFZd','renders\x20shadow\x20DOM\x20-\x20polyfill\x20loader','742069mNFAZP','after','async\x20loaded','explicit-render-event.html','resolve','aRLwN','text','body','listen'];_0x2179=function(){return _0x33b86b;};return _0x2179();}const request=require(_0x44fc86(0xef)),path=require(_0x44fc86(0xdc)),test=require(_0x44fc86(0x10c)),express=require(_0x44fc86(0xda)),app=express();app['use'](express[_0x44fc86(0xea)](path['resolve'](__dirname,'resources')));const appInstances=[],testBase='http://localhost:1234/';process[_0x44fc86(0xd8)][_0x44fc86(0x119)]='development',test[_0x44fc86(0xd9)](async _0x366c17=>{const _0x43d263=_0x44fc86;await app[_0x43d263(0x117)](0x4d2);}),test[_0x44fc86(0x110)]['always'](async _0x1d51da=>{const _0x7458ad=_0x44fc86;for(let _0x4e27ed of appInstances){await _0x4e27ed[_0x7458ad(0xfe)]();}});async function createServer(_0x4f87f5){const _0x3394b6=_0x44fc86,_0x88ad75={'aRLwN':'../src/main.js'};delete require['cache'][require[_0x3394b6(0x113)](_0x88ad75[_0x3394b6(0x114)])];const _0x15aa66=await require('../src/main.js');if(_0x4f87f5)_0x15aa66[_0x3394b6(0xec)](_0x4f87f5);await appInstances[_0x3394b6(0xf0)](_0x15aa66),eval('JSON[\'stringify\']({ \'safe\': !![] });');return request(_0x15aa66);eval('JSON[\'stringify\']({ \'safe\': !![] });');}test(_0x44fc86(0xe4),async _0x4951de=>{const _0x23623d=_0x44fc86,_0x2e7fb9={'auJIe':function(_0x4786b9){return _0x4786b9();}},_0x26ca73=await _0x2e7fb9[_0x23623d(0x11c)](createServer),_0x7fc289=await _0x26ca73['get']('/_ah/health');_0x4951de['is'](_0x7fc289[_0x23623d(0x11a)],0xc8);}),test(_0x44fc86(0x122),async _0x3539db=>{const _0x151954=_0x44fc86,_0x5a0eb3={'oPsMi':_0x151954(0x128)},_0x58c61b=await createServer(),_0x3245d0=await _0x58c61b[_0x151954(0xf7)](_0x151954(0xf3)+testBase+_0x151954(0x12b));_0x3539db['is'](_0x3245d0[_0x151954(0x11a)],0xc8),_0x3539db[_0x151954(0xfc)](_0x3245d0[_0x151954(0x115)][_0x151954(0xe6)](_0x5a0eb3['oPsMi'])!=-0x1);}),test('renders\x20script\x20after\x20page\x20load\x20event',async _0x31f157=>{const _0x25409a=_0x44fc86,_0x2e10f3={'hYxXY':function(_0x5d21f7){return _0x5d21f7();},'zXdVz':function(_0x4f5eaf,_0x3f7312){return _0x4f5eaf!=_0x3f7312;},'tZGNw':_0x25409a(0x120)},_0x31da8e=await _0x2e10f3[_0x25409a(0x123)](createServer),_0x578e49=await _0x31da8e[_0x25409a(0xf7)](_0x25409a(0xf3)+testBase+_0x25409a(0x11b));_0x31f157['is'](_0x578e49[_0x25409a(0x11a)],0xc8),_0x31f157[_0x25409a(0xfc)](_0x2e10f3['zXdVz'](_0x578e49[_0x25409a(0x115)][_0x25409a(0xe6)](_0x2e10f3[_0x25409a(0x10b)]),-0x1));}),test[_0x44fc86(0xe3)](_0x44fc86(0x108),async _0x14161a=>{const _0x4d62f7=_0x44fc86,_0x46d1a0={'JCieF':function(_0x3b3a29){return _0x3b3a29();},'dDvfI':'shadow-root-text'},_0xd62e26=await _0x46d1a0[_0x4d62f7(0xe5)](createServer),_0xc68bfd=await _0xd62e26[_0x4d62f7(0xf7)](_0x4d62f7(0xf3)+testBase+_0x4d62f7(0xf5));_0x14161a['is'](_0xc68bfd[_0x4d62f7(0x11a)],0xc8),_0x14161a[_0x4d62f7(0xfc)](_0xc68bfd[_0x4d62f7(0x115)][_0x4d62f7(0xe6)](_0x46d1a0[_0x4d62f7(0xdb)])!=-0x1);}),test(_0x44fc86(0x10e),async _0x24b65b=>{const _0x3f20c4=_0x44fc86,_0x29a026={'eEEWW':_0x3f20c4(0xfa)},_0x494783=await createServer(),_0x4aa432=await _0x494783['get'](_0x3f20c4(0xf3)+testBase+_0x3f20c4(0x106));_0x24b65b['is'](_0x4aa432[_0x3f20c4(0x11a)],0xc8),_0x24b65b[_0x3f20c4(0xfc)](_0x4aa432[_0x3f20c4(0x115)]['indexOf'](_0x29a026['eEEWW'])!=-0x1);}),test('renders\x20shadow\x20DOM\x20-\x20webcomponents-lite.js\x20polyfill',async _0x39b9c4=>{const _0x49dcc1=_0x44fc86,_0x58d6f6={'EYTXF':'shadow-root-text'},_0x1cd0ef=await createServer(),_0x48d1b2=await _0x1cd0ef[_0x49dcc1(0xf7)](_0x49dcc1(0xf3)+testBase+_0x49dcc1(0x129));_0x39b9c4['is'](_0x48d1b2[_0x49dcc1(0x11a)],0xc8),_0x39b9c4[_0x49dcc1(0xfc)](_0x48d1b2[_0x49dcc1(0x115)][_0x49dcc1(0xe6)](_0x58d6f6['EYTXF'])!=-0x1);}),test(_0x44fc86(0x10a),async _0x1b4e85=>{const _0x3b6fc9=_0x44fc86,_0x4028ee={'OIWIX':function(_0x5c63d6){return _0x5c63d6();}},_0x4177e4=await _0x4028ee['OIWIX'](createServer),_0x595cdf=await _0x4177e4['get'](_0x3b6fc9(0xf3)+testBase+_0x3b6fc9(0x100));_0x1b4e85['is'](_0x595cdf[_0x3b6fc9(0x11a)],0xc8),_0x1b4e85[_0x3b6fc9(0xdd)](_0x595cdf[_0x3b6fc9(0x115)][_0x3b6fc9(0xe6)]('script\x20src')!=-0x1),_0x1b4e85[_0x3b6fc9(0xfc)](_0x595cdf['text'][_0x3b6fc9(0xe6)](_0x3b6fc9(0x120))!=-0x1),_0x1b4e85['false'](_0x595cdf[_0x3b6fc9(0x115)][_0x3b6fc9(0xe6)](_0x3b6fc9(0xe7))!=-0x1),_0x1b4e85[_0x3b6fc9(0xfc)](_0x595cdf[_0x3b6fc9(0x115)][_0x3b6fc9(0xe6)](_0x3b6fc9(0xe8))!=-0x1);}),test(_0x44fc86(0x107),async _0x2a2d70=>{const _0xb013b=_0x44fc86,_0x14e7bc={'ANwoS':'/render/http://httpstat.us/404','QtrVj':function(_0x57a477,_0x34881e){return _0x57a477!=_0x34881e;},'QUDtO':_0xb013b(0x121)},_0x1035b3=await createServer(),_0x552cbb=await _0x1035b3[_0xb013b(0xf7)](_0x14e7bc[_0xb013b(0xed)]);_0x2a2d70['is'](_0x552cbb['status'],0x194),_0x2a2d70['true'](_0x14e7bc[_0xb013b(0x126)](_0x552cbb[_0xb013b(0x115)][_0xb013b(0xe6)](_0x14e7bc[_0xb013b(0xf8)]),-0x1));}),test(_0x44fc86(0xf1),async _0x388467=>{const _0x321113=_0x44fc86,_0x837c5b={'RFCkJ':function(_0x4dae8d){return _0x4dae8d();}},_0x464a96=await _0x837c5b[_0x321113(0xee)](createServer),_0x4a3bb9=_0x321113(0x109),_0x3c65e0=await _0x464a96[_0x321113(0xf7)](_0x321113(0xf3)+testBase+_0x4a3bb9+_0x321113(0x102));_0x388467['is'](_0x3c65e0['status'],0x190);}),test('http\x20status\x20codes\x20need\x20to\x20be\x20respected\x20from\x20top\x20to\x20bottom',async _0x1d1ebe=>{const _0x1302aa=_0x44fc86,_0x2a7a51={'qiATn':_0x1302aa(0xff)},_0x15a6c1=await createServer(),_0x1ba91d=_0x2a7a51['qiATn'],_0x555960=await _0x15a6c1['get'](_0x1302aa(0xf3)+testBase+_0x1ba91d+_0x1302aa(0x102));_0x1d1ebe['is'](_0x555960[_0x1302aa(0x11a)],0x191);}),test(_0x44fc86(0x118),async _0x4b3cc9=>{const _0x3d91b6=_0x44fc86,_0x45e4cd={'bALSY':function(_0x3b0038){return _0x3b0038();},'vbZXv':function(_0x538867,_0x3ae604){return _0x538867(_0x3ae604);}},_0xab5804=await _0x45e4cd[_0x3d91b6(0x127)](createServer),_0x55dafc=await _0xab5804[_0x3d91b6(0xf7)](_0x3d91b6(0xf9)+testBase+_0x3d91b6(0x12b));_0x4b3cc9['is'](_0x55dafc[_0x3d91b6(0x11a)],0xc8),_0x4b3cc9['is'](_0x55dafc[_0x3d91b6(0x105)][_0x3d91b6(0xe0)],'image/jpeg'),_0x4b3cc9['is'](_0x55dafc[_0x3d91b6(0x116)][_0x3d91b6(0xfd)],_0x45e4cd['vbZXv'](parseInt,_0x55dafc[_0x3d91b6(0x105)]['content-length']));}),test(_0x44fc86(0x124),async _0x3455d4=>{const _0x1e3eb3=_0x44fc86,_0x3aad21={'XDZzr':function(_0x48ff89){return _0x48ff89();}},_0x4c4dee=await _0x3aad21[_0x1e3eb3(0xf2)](createServer),_0x11fe5e=await _0x4c4dee[_0x1e3eb3(0xf7)](_0x1e3eb3(0xde));_0x3455d4['is'](_0x11fe5e[_0x1e3eb3(0x11a)],0x193);}),test('unknown\x20url\x20fails',async _0x50c027=>{const _0x256541=_0x44fc86,_0x231ea9=await createServer(),_0x597c68=await _0x231ea9['get'](_0x256541(0x125));_0x50c027['is'](_0x597c68[_0x256541(0x11a)],0x190);}),test(_0x44fc86(0x101),async _0x2c18e6=>{const _0x41c1e5=_0x44fc86,_0x111b9a={'qzzIa':function(_0x57b7e8){return _0x57b7e8();}},_0x3ff3c0=await _0x111b9a[_0x41c1e5(0xfb)](createServer),_0x238f81=await _0x3ff3c0[_0x41c1e5(0xf7)](_0x41c1e5(0xe1));_0x2c18e6['is'](_0x238f81[_0x41c1e5(0x11a)],0x193);}),test(_0x44fc86(0x104),async _0x4b973f=>{const _0x173c06=_0x44fc86,_0x560c6b={'iXErf':function(_0x508592,_0x168c8d){return _0x508592!=_0x168c8d;}},_0x1150fd=await createServer(),_0x30315c=await _0x1150fd[_0x173c06(0xf7)](_0x173c06(0xf3)+testBase+_0x173c06(0x112));_0x4b973f['is'](_0x30315c[_0x173c06(0x11a)],0xc8),_0x4b973f[_0x173c06(0xfc)](_0x560c6b[_0x173c06(0x11d)](_0x30315c[_0x173c06(0x115)][_0x173c06(0xe6)](_0x173c06(0x111)),-0x1));}),test(_0x44fc86(0xdf),async _0x22ba83=>{const _0x29a820=_0x44fc86,_0x5c2886=await createServer({'renderOnly':[testBase]});let _0x5a50d1=await _0x5c2886[_0x29a820(0xf7)](_0x29a820(0xf3)+testBase+_0x29a820(0x12b));_0x22ba83['is'](_0x5a50d1[_0x29a820(0x11a)],0xc8),_0x5a50d1=await _0x5c2886[_0x29a820(0xf7)](_0x29a820(0xf4)),_0x22ba83['is'](_0x5a50d1[_0x29a820(0x11a)],0x193);});