'use strict';var _0x4c1ed7=_0x57f7;(function(_0x2ba54f,_0x72fd53){var _0x5b404b=_0x57f7,_0x589f6c=_0x2ba54f();while(!![]){try{var _0x51ffe7=parseInt(_0x5b404b(0x15d))/0x1*(parseInt(_0x5b404b(0x144))/0x2)+-parseInt(_0x5b404b(0x12b))/0x3*(parseInt(_0x5b404b(0x122))/0x4)+parseInt(_0x5b404b(0x128))/0x5+parseInt(_0x5b404b(0x11d))/0x6+parseInt(_0x5b404b(0x132))/0x7*(parseInt(_0x5b404b(0x160))/0x8)+parseInt(_0x5b404b(0x11a))/0x9+-parseInt(_0x5b404b(0x11e))/0xa*(parseInt(_0x5b404b(0x127))/0xb);if(_0x51ffe7===_0x72fd53)break;else _0x589f6c['push'](_0x589f6c['shift']());}catch(_0x59fa69){_0x589f6c['push'](_0x589f6c['shift']());}}}(_0x408a,0xaff52));var http=require(_0x4c1ed7(0x14a)),https=require(_0x4c1ed7(0x13e)),destroyable=require(_0x4c1ed7(0x136)),server=require(_0x4c1ed7(0x137)),request=require('../index'),tape=require(_0x4c1ed7(0x146)),fauxRequestsMade;function clearFauxRequests(){fauxRequestsMade={'http':0x0,'https':0x0};}function _0x408a(){var _0x393a52=['tape','kwiVW','/plain','nnOwK','http','statusCode','createSSLServer','zxnMv','writeHead','gkGtM','https://localhost:','kENQj','listen','request','OxFVK','apply','wIAxt','jtUHS','1|4|0|2|7|3|5|6','0|5|3|1|4|2','plain','MTrxx','pfSmy','1sgamwq','console.log(\x22timer\x22);','VoIhl','136KfvpZP','https:','IsAxL','nCaJR','https\x20only','split','1298646nhdYJD','0|3|5|4|1|2','http\x20and\x20https','3812604ZEPxsc','3590pEaYxv','keys','DSMKs','/to_plain','8dHxRGQ','equal','forEach','updateClock();','GACZV','48290dcHYkQ','1345755rLmTnr','/to_https','http://localhost:','815757QfWijW','createServer','NsGRM','GwLaQ','/https','http:','cNBPx','461559AINCIq','undefined','Wfkaa','pHHNC','server-destroy','./server','port','end','ZdTPX','sIEyl','HdYlC','TJsiQ','https','vxwAq','BRAxE','JGhrJ','Received\x20HTTPS\x20server\x20body','destroy','1341524vCiDzu','IkJNt'];_0x408a=function(){return _0x393a52;};return _0x408a();}function _0x57f7(_0x1fa346,_0x2a1491){var _0x408afb=_0x408a();return _0x57f7=function(_0x57f7ca,_0x198e7e){_0x57f7ca=_0x57f7ca-0x115;var _0x1039a8=_0x408afb[_0x57f7ca];return _0x1039a8;},_0x57f7(_0x1fa346,_0x2a1491);}function wrapRequest(_0x165857,_0x49d3cc){var _0x3d1b14=_0x4c1ed7,_0x2f74bb={'HdYlC':_0x3d1b14(0x125),'nCaJR':function(_0x4b4f59,_0x3c2170){return _0x4b4f59===_0x3c2170;}},_0x42a966='3|2|1|0|4'[_0x3d1b14(0x119)]('|'),_0x4dea31=0x0;while(!![]){switch(_0x42a966[_0x4dea31++]){case'0':setInterval(_0x2f74bb[_0x3d1b14(0x13c)],0x3e8);continue;case'1':Object[_0x3d1b14(0x11f)](_0x49d3cc)[_0x3d1b14(0x124)](function(_0x34f27d){var _0x56fcd1=_0x3d1b14,_0x245a85=_0x49d3cc[_0x34f27d];_0x777ac8['EnAxZ'](_0x34f27d,_0x56fcd1(0x153))?_0x190cae[_0x34f27d]=function(){var _0xaecdc2=_0x56fcd1;return fauxRequestsMade[_0x165857]+=0x1,setTimeout(_0xaecdc2(0x15e),0x3e8),_0x245a85[_0xaecdc2(0x155)](this,arguments);}:_0x190cae[_0x34f27d]=_0x245a85;});continue;case'2':var _0x190cae={};continue;case'3':var _0x777ac8={'EnAxZ':function(_0x4bc706,_0x2c642f){var _0x1cee5a=_0x3d1b14;return _0x2f74bb[_0x1cee5a(0x117)](_0x4bc706,_0x2c642f);}};continue;case'4':return _0x190cae;}break;}}var fauxHTTP=wrapRequest(_0x4c1ed7(0x14a),http),fauxHTTPS=wrapRequest(_0x4c1ed7(0x13e),https),plainServer=server[_0x4c1ed7(0x12c)](),httpsServer=server[_0x4c1ed7(0x14c)]();destroyable(plainServer),destroyable(httpsServer),tape('setup',function(_0x1b1e57){var _0x51b1d8=_0x4c1ed7,_0x43db78={'clDwS':function(_0x313444,_0x18469f){return _0x313444===_0x18469f;},'kwiVW':'WHDOO','QlquF':_0x51b1d8(0x12d),'zxnMv':_0x51b1d8(0x12f),'cavPj':_0x51b1d8(0x11b),'Wfkaa':_0x51b1d8(0x154),'VoIhl':'http://localhost:','jtUHS':_0x51b1d8(0x148)};plainServer[_0x51b1d8(0x152)](0x0,function(){var _0x227a49=_0x51b1d8,_0x76f4bb={'KplJC':_0x43db78[_0x227a49(0x14d)],'pHHNC':_0x43db78['cavPj'],'tpVXs':_0x43db78[_0x227a49(0x134)],'pfSmy':_0x43db78[_0x227a49(0x15f)],'GACZV':'/plain'};plainServer['on'](_0x43db78[_0x227a49(0x157)],function(_0x236e37,_0x354874){var _0x2cbc60=_0x227a49;_0x354874[_0x2cbc60(0x14e)](0xc8),_0x354874[_0x2cbc60(0x139)]('plain');}),plainServer['on']('/to_https',function(_0x1b2097,_0x8bdd0e){var _0x3fbbb0=_0x227a49;_0x8bdd0e[_0x3fbbb0(0x14e)](0x12d,{'location':_0x3fbbb0(0x150)+httpsServer[_0x3fbbb0(0x138)]+_0x76f4bb['KplJC']}),_0x8bdd0e[_0x3fbbb0(0x139)]();}),httpsServer[_0x227a49(0x152)](0x0,function(){var _0xedc7fd=_0x227a49;_0x43db78['clDwS'](_0x43db78[_0xedc7fd(0x147)],_0x43db78['QlquF'])?_0x21bf3c={'http':0x0,'https':0x0}:(httpsServer['on'](_0xedc7fd(0x12f),function(_0x237ab3,_0x23477e){var _0x5bf39e=_0xedc7fd,_0x2f2173={'cNBPx':_0x76f4bb[_0x5bf39e(0x135)]};if(_0x76f4bb['tpVXs']==='OxFVK')_0x23477e[_0x5bf39e(0x14e)](0xc8),_0x23477e[_0x5bf39e(0x139)](_0x5bf39e(0x13e));else{var _0x507ef8=_0x2f2173[_0x5bf39e(0x131)][_0x5bf39e(0x119)]('|'),_0x327cb1=0x0;while(!![]){switch(_0x507ef8[_0x327cb1++]){case'0':_0x2ac49f[_0x5bf39e(0x123)](_0x21430c,null);continue;case'1':_0x1ce54e[_0x5bf39e(0x123)](_0x1593dd[_0x5bf39e(0x13e)],_0x369ea1['https:']?0x2:0x0);continue;case'2':_0x377144[_0x5bf39e(0x139)]();continue;case'3':_0x1d0b4f[_0x5bf39e(0x123)](_0x26ed92[_0x5bf39e(0x14b)],0xc8);continue;case'4':_0x2cdf58[_0x5bf39e(0x123)](_0x3bc083[_0x5bf39e(0x14a)],_0x112c08[_0x5bf39e(0x130)]?0x2:0x0);continue;case'5':_0x43b0da[_0x5bf39e(0x123)](_0x4ddbb3,_0x5bf39e(0x15a),_0x5bf39e(0x142));continue;}break;}}}),httpsServer['on'](_0xedc7fd(0x121),function(_0x2011e9,_0x2f4ce8){var _0x5f2981=_0xedc7fd,_0xad919c={'ZdTPX':_0x76f4bb[_0x5f2981(0x15c)],'wIAxt':_0x76f4bb[_0x5f2981(0x126)]};_0x5f2981(0x12e)!==_0x5f2981(0x149)?(_0x2f4ce8[_0x5f2981(0x14e)](0x12e,{'location':_0x5f2981(0x12a)+plainServer['port']+_0x5f2981(0x148)}),_0x2f4ce8[_0x5f2981(0x139)]()):(_0xb8defa[_0x5f2981(0x14e)](0x12e,{'location':_0xad919c[_0x5f2981(0x13a)]+_0x113213[_0x5f2981(0x138)]+_0xad919c[_0x5f2981(0x156)]}),_0x58e6fe[_0x5f2981(0x139)]());}),_0x1b1e57[_0xedc7fd(0x139)]());});});});function runTests(_0xc260d0,_0x538982){var _0x536182=_0x4c1ed7,_0x565fc8={'JGhrJ':_0x536182(0x158),'IsAxL':_0x536182(0x115),'gkGtM':_0x536182(0x130),'TJsiQ':_0x536182(0x129),'kENQj':function(_0x3af8c3){return _0x3af8c3();},'vxwAq':function(_0x1782c6,_0x978b9,_0x76f431,_0x1d5622){return _0x1782c6(_0x978b9,_0x76f431,_0x1d5622);}};tape(_0xc260d0,function(_0x3690df){var _0x4d296c=_0x536182,_0x98858e=_0x565fc8[_0x4d296c(0x141)]['split']('|'),_0x486b9d=0x0;while(!![]){switch(_0x98858e[_0x486b9d++]){case'0':var _0x17475f='https://localhost:'+httpsServer[_0x4d296c(0x138)]+_0x4d296c(0x121);continue;case'1':var _0x4615f9={'sIEyl':'3|0|2|1|5|4','BRAxE':'Received\x20HTTPS\x20server\x20body','DSMKs':_0x565fc8[_0x4d296c(0x116)],'IkJNt':_0x565fc8[_0x4d296c(0x14f)],'MTrxx':'https'};continue;case'2':var _0x4c5859={'httpModules':_0x538982,'strictSSL':![],'allowInsecureRedirect':!![]};continue;case'3':var _0x133fac=_0x538982||{};continue;case'4':var _0x13f26f=_0x4d296c(0x12a)+plainServer['port']+_0x565fc8[_0x4d296c(0x13d)];continue;case'5':_0x565fc8[_0x4d296c(0x151)](clearFauxRequests);continue;case'6':_0x565fc8[_0x4d296c(0x13f)](request,_0x13f26f,_0x4c5859,function(_0x5d93e9,_0x37d725,_0x4bf569){var _0x3c0808=_0x4d296c,_0x5c8de1=_0x3c0808(0x159)['split']('|'),_0x5e0093=0x0;while(!![]){switch(_0x5c8de1[_0x5e0093++]){case'0':_0x3690df[_0x3c0808(0x123)](_0x5d93e9,null);continue;case'1':_0x3690df[_0x3c0808(0x123)](fauxRequestsMade['http'],_0x133fac[_0x4615f9[_0x3c0808(0x145)]]?0x1:0x0);continue;case'2':request(_0x17475f,_0x4c5859,function(_0x579a92,_0x578543,_0x2d45aa){var _0x5a8cbb=_0x3c0808,_0xb2a0b6=_0x4615f9[_0x5a8cbb(0x13b)][_0x5a8cbb(0x119)]('|'),_0x6c020c=0x0;while(!![]){switch(_0xb2a0b6[_0x6c020c++]){case'0':_0x3690df[_0x5a8cbb(0x123)](_0x578543[_0x5a8cbb(0x14b)],0xc8);continue;case'1':_0x3690df['equal'](fauxRequestsMade[_0x5a8cbb(0x14a)],_0x133fac['http:']?0x2:0x0);continue;case'2':_0x3690df[_0x5a8cbb(0x123)](_0x2d45aa,_0x5a8cbb(0x15a),_0x4615f9[_0x5a8cbb(0x140)]);continue;case'3':_0x3690df[_0x5a8cbb(0x123)](_0x579a92,null);continue;case'4':_0x3690df[_0x5a8cbb(0x139)]();continue;case'5':_0x3690df[_0x5a8cbb(0x123)](fauxRequestsMade[_0x5a8cbb(0x13e)],_0x133fac[_0x4615f9[_0x5a8cbb(0x120)]]?0x2:0x0);continue;}break;}});continue;case'3':_0x3690df[_0x3c0808(0x123)](_0x4bf569,_0x4615f9[_0x3c0808(0x15b)],_0x4615f9[_0x3c0808(0x140)]);continue;case'4':_0x3690df[_0x3c0808(0x123)](fauxRequestsMade['https'],_0x133fac['https:']?0x1:0x0);continue;case'5':_0x3690df['equal'](_0x37d725[_0x3c0808(0x14b)],0xc8);continue;}break;}});continue;case'7':var _0x4a588c={'httpModules':_0x538982,'strictSSL':![]};continue;}break;}});}runTests(_0x4c1ed7(0x133)),runTests('empty',{}),runTests('http\x20only',{'http:':fauxHTTP}),runTests(_0x4c1ed7(0x118),{'https:':fauxHTTPS}),runTests(_0x4c1ed7(0x11c),{'http:':fauxHTTP,'https:':fauxHTTPS}),tape('cleanup',function(_0x50f5d9){plainServer['destroy'](function(){var _0x4be825=_0x57f7;httpsServer[_0x4be825(0x143)](function(){var _0x227ee1=_0x4be825;_0x50f5d9[_0x227ee1(0x139)]();});});});