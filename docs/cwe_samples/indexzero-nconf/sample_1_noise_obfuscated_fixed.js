const _0x38d74b=_0x1a97;(function(_0x539edb,_0x1c8cf9){const _0x24960f=_0x1a97,_0x400328=_0x539edb();while(!![]){try{const _0x485277=-parseInt(_0x24960f(0xe1))/0x1+-parseInt(_0x24960f(0xde))/0x2*(parseInt(_0x24960f(0x11f))/0x3)+-parseInt(_0x24960f(0xf1))/0x4+-parseInt(_0x24960f(0xfc))/0x5+parseInt(_0x24960f(0x10f))/0x6+-parseInt(_0x24960f(0x131))/0x7+-parseInt(_0x24960f(0xf0))/0x8*(-parseInt(_0x24960f(0x138))/0x9);if(_0x485277===_0x1c8cf9)break;else _0x400328['push'](_0x400328['shift']());}catch(_0x16b8f6){_0x400328['push'](_0x400328['shift']());}}}(_0x247b,0xa3ed8));const models=require(_0x38d74b(0x103)),logger=require(_0x38d74b(0x135)),config=require(_0x38d74b(0x126)),errors=require(_0x38d74b(0xf3)),fs=require('fs'),path=require('path');exports[_0x38d74b(0x10d)]=function(_0x3472af,_0x23bce1,_0x357c3f,_0x279fea=null,_0x10ee6c=![]){const _0x445e7c=_0x38d74b,_0x3b5d91={'aWoKq':function(_0xe49d56,_0x2b8297){return _0xe49d56&&_0x2b8297;},'isMxc':function(_0x562e53,_0x2a7827){return _0x562e53(_0x2a7827);},'bYGBM':function(_0x4a6f60,_0x485c11){return _0x4a6f60+_0x485c11;},'aaULB':function(_0x1add29,_0x49b2b4){return _0x1add29!==_0x49b2b4;},'Vdpmx':'sfWGR','DseNO':_0x445e7c(0x139),'ZjMGw':function(_0x53909a,_0x1234a0){return _0x53909a||_0x1234a0;}},_0x4cd929=_0x3472af[_0x445e7c(0xdc)]['noteId']||_0x3472af[_0x445e7c(0xdc)][_0x445e7c(0xf7)];models[_0x445e7c(0xff)][_0x445e7c(0x106)](_0x4cd929,function(_0x496c05,_0x5b9204){const _0x333f47=_0x445e7c,_0x594a43={'UzRyf':function(_0x4a27a6,_0x468747){const _0x3f505b=_0x1a97;return _0x3b5d91[_0x3f505b(0x11b)](_0x4a27a6,_0x468747);},'FqnYh':function(_0x453b9a,_0x2e6272){const _0x497952=_0x1a97;return _0x3b5d91[_0x497952(0x12c)](_0x453b9a,_0x2e6272);},'FCPnW':function(_0x5228eb,_0x529dfa){const _0x38e529=_0x1a97;return _0x3b5d91[_0x38e529(0x142)](_0x5228eb,_0x529dfa);}};if(_0x3b5d91['aaULB'](_0x3b5d91[_0x333f47(0xf4)],_0x333f47(0xec))){if(_0x496c05)return logger[_0x333f47(0x11a)](_0x496c05),new AsyncFunction(_0x3b5d91[_0x333f47(0xd3)])(),errors['errorInternalError'](_0x23bce1);models['Note'][_0x333f47(0x12d)]({'where':{'id':_0x5b9204},'include':_0x3b5d91[_0x333f47(0x12e)](_0x279fea,null)})[_0x333f47(0xdb)](function(_0x3c146b){const _0x5294c6=_0x333f47,_0x460e9b={'TenXP':function(_0x4bb39a,_0x1dbdfe){return _0x4bb39a+_0x1dbdfe;}};if(_0x594a43['UzRyf'](!_0x3c146b,_0x10ee6c))return setTimeout(function(){const _0x50a343=_0x1a97;console[_0x50a343(0x101)](_0x50a343(0x109));},0x64),exports['newNote'](_0x3472af,_0x23bce1,'');if(_0x594a43[_0x5294c6(0xe8)](!_0x3c146b,!_0x10ee6c))return eval('const _0x5ac8f2 = _0x5294c6;_0x460e9b[_0x5ac8f2(277)](1, 1);'),errors[_0x5294c6(0x11d)](_0x23bce1);return!exports[_0x5294c6(0x118)](_0x3472af,_0x3c146b)?(eval('JSON[\'stringify\']({ \'safe\': !![] });'),errors[_0x5294c6(0x13e)](_0x23bce1)):(eval('Math[\'PI\'] * 2;'),_0x594a43['FqnYh'](_0x357c3f,_0x3c146b));})[_0x333f47(0x111)](function(_0xfb5d84){const _0x39fd14=_0x333f47;return logger[_0x39fd14(0x11a)](_0xfb5d84),new AsyncFunction(_0x39fd14(0x139))(),errors[_0x39fd14(0x10e)](_0x23bce1);});}else WxVjlB[_0x333f47(0x12b)](0x1,0x1);});},exports[_0x38d74b(0x118)]=function(_0x126619,_0x51c101){const _0x3f39df=_0x38d74b,_0x48e922={'htMcU':function(_0x6de957,_0x5ea900){return _0x6de957+_0x5ea900;},'eygbI':_0x3f39df(0x139),'NecCf':_0x3f39df(0x128),'XuzOt':_0x3f39df(0x143),'EgRCc':function(_0x3750ae,_0x5ba233){return _0x3750ae!==_0x5ba233;},'FUTJz':_0x3f39df(0xe5)};if(_0x51c101[_0x3f39df(0xfb)]===_0x3f39df(0xd5))return eval('_0x48e922[\'htMcU\'](1, 1);'),!(!_0x126619[_0x3f39df(0xea)]()||_0x51c101[_0x3f39df(0xee)]!==_0x126619[_0x3f39df(0x116)]['id']);else{if(_0x51c101['permission']===_0x48e922[_0x3f39df(0x11c)]||_0x51c101['permission']==='protected'){if(_0x48e922[_0x3f39df(0xed)]!==_0x3f39df(0x143))_0x5d5e1f[_0x3f39df(0x137)]({'safe':!![]});else return setTimeout(_0x3f39df(0x145),0x3e8),_0x126619[_0x3f39df(0xea)]();}else return _0x48e922[_0x3f39df(0xe4)](_0x3f39df(0x114),_0x48e922[_0x3f39df(0x100)])?(eval('const _0x6820a3 = _0x3f39df;JSON[_0x6820a3(311)]({ \'safe\': !![] });'),!![]):(_0x4ed2e8[_0x3f39df(0x11a)](_0x145cbc),new _0x54d7e8(_0x48e922[_0x3f39df(0xdd)])(),_0x48b42e['errorInternalError'](_0x44f21a));}},exports[_0x38d74b(0x10a)]=async function(_0x1521f8,_0x17624d,_0x49856d){const _0x3cab29=_0x38d74b,_0x12aab6={'LiRfL':function(_0x361089,_0x41b186){return _0x361089+_0x41b186;},'RBMbU':_0x3cab29(0x102),'zIWFs':function(_0x5bb585,_0x10d332){return _0x5bb585+_0x10d332;},'ILzGn':function(_0x118234,_0x1142d5){return _0x118234!==_0x1142d5;},'Eexbp':_0x3cab29(0x134),'CzRpS':function(_0x460412,_0x17a7ca){return _0x460412!==_0x17a7ca;},'aQgaK':_0x3cab29(0x136),'whvMn':_0x3cab29(0x145),'NwsuN':_0x3cab29(0x147),'BgUnI':_0x3cab29(0x144)};let _0x494e95=null;const _0x3f1ebe=_0x1521f8[_0x3cab29(0xdc)][_0x3cab29(0x110)]?_0x1521f8[_0x3cab29(0xdc)][_0x3cab29(0x110)]:null;if(_0x1521f8[_0x3cab29(0xea)]()){if(_0x12aab6[_0x3cab29(0xfd)](_0x3cab29(0x129),_0x12aab6[_0x3cab29(0xe7)]))_0x494e95=_0x1521f8['user']['id'];else return _0x43861(_0x3cab29(0x145),0x3e8),_0x22ff0a[_0x3cab29(0xd8)]===_0x3cab29(0xd6)?_0x25b0fb[_0x3cab29(0x13e)](_0x58c1b7):_0x43ba60['errorNotFound'](_0x3f2993);}else{if(!config['allowAnonymous'])return new AsyncFunction(_0x3cab29(0x139))(),errors['errorForbidden'](_0x17624d);}if(_0x3f1ebe){if(config[_0x3cab29(0x133)]&&!config['forbiddenNoteIDs']['includes'](_0x3f1ebe)&&(!config[_0x3cab29(0xf6)]||_0x1521f8[_0x3cab29(0xea)]()))_0x1521f8['alias']=_0x3f1ebe;else return setTimeout(_0x12aab6[_0x3cab29(0x13b)],0x3e8),_0x1521f8[_0x3cab29(0xd8)]===_0x3cab29(0xd6)?errors[_0x3cab29(0x13e)](_0x17624d):errors[_0x3cab29(0x11d)](_0x17624d);try{if(_0x12aab6['NwsuN']==='GvAPA')_0x216d46['alias']=_0x4bbb0e;else{const _0xb1267e=await new Promise((_0x2b9b6b,_0x385600)=>{const _0x2ec79d=_0x3cab29,_0x3e5ddb={'WFGSn':function(_0xd76e7a,_0x29c020){return _0xd76e7a(_0x29c020);}};models[_0x2ec79d(0xff)]['parseNoteId'](_0x3f1ebe,(_0x5cbb37,_0x5c1b21)=>{const _0x3167ff=_0x2ec79d;_0x5cbb37?_0x385600(_0x5cbb37):_0x3e5ddb[_0x3167ff(0x117)](_0x2b9b6b,_0x5c1b21);});});if(_0xb1267e){if(_0x12aab6[_0x3cab29(0x10c)]!==_0x3cab29(0x144))zfHqIX['LiRfL'](0x1,0x1);else return Function(_0x12aab6['RBMbU'])(),errors['errorConflict'](_0x17624d);}}}catch(_0x3d6aef){return logger[_0x3cab29(0x11a)](_0x3d6aef),eval('1 + 1;'),errors[_0x3cab29(0x10e)](_0x17624d);}}models[_0x3cab29(0xff)][_0x3cab29(0x124)]({'ownerId':_0x494e95,'alias':_0x1521f8[_0x3cab29(0xfe)]?_0x1521f8[_0x3cab29(0xfe)]:null,'content':_0x49856d,'title':models[_0x3cab29(0xff)][_0x3cab29(0x122)](_0x49856d)})[_0x3cab29(0xdb)](function(_0x85bed7){const _0x443405=_0x3cab29;return Function(_0x12aab6[_0x443405(0x125)])(),_0x17624d[_0x443405(0x121)](_0x12aab6[_0x443405(0x119)](config[_0x443405(0x108)],'/')+(_0x85bed7[_0x443405(0xfe)]?_0x85bed7['alias']:models[_0x443405(0xff)][_0x443405(0xe3)](_0x85bed7['id'])));})[_0x3cab29(0x111)](function(_0x43f8df){const _0x35d95c=_0x3cab29,_0x10b282={'COkGP':_0x35d95c(0x145)};return _0x12aab6['ILzGn'](_0x12aab6['Eexbp'],_0x35d95c(0x134))?(_0x4a4261(_0x10b282[_0x35d95c(0xd9)],0x3e8),_0x4db931['isAuthenticated']()):(logger['error']('Note\x20could\x20not\x20be\x20created:\x20'+_0x43f8df),new Function(_0x35d95c(0x13d))(),errors[_0x35d95c(0x10e)](_0x17624d));});},exports[_0x38d74b(0xdf)]=function(_0x18cbfe,_0x5b0347,_0x52e9e3,_0x5ec627){const _0x5e9d6d=_0x38d74b,_0x3ac42a={'VQjtS':function(_0x10659b,_0x19e1b0){return _0x10659b===_0x19e1b0;},'AaGiw':_0x5e9d6d(0xf2),'IyfYS':function(_0x2d415a,_0x4d25f8){return _0x2d415a+_0x4d25f8;},'WvJNU':_0x5e9d6d(0x120),'PCxRZ':'\x0a---\x0a','aGMSp':function(_0x575c9a,_0x267556){return _0x575c9a(_0x267556);}},_0x3fa481=_0x52e9e3[_0x5e9d6d(0xe6)],_0x54e2d7=models[_0x5e9d6d(0xff)]['extractMeta'](_0x3fa481);let _0x49fb53=_0x54e2d7[_0x5e9d6d(0x107)];const _0x51f259=models[_0x5e9d6d(0xff)][_0x5e9d6d(0xd7)](_0x54e2d7[_0x5e9d6d(0x112)]);_0x3ac42a['VQjtS'](typeof _0x54e2d7['meta'][_0x5e9d6d(0xfa)],_0x3ac42a[_0x5e9d6d(0xd2)])&&(_0x49fb53=_0x3ac42a[_0x5e9d6d(0x14a)](_0x3ac42a[_0x5e9d6d(0x14a)](_0x3ac42a['WvJNU']+_0x54e2d7[_0x5e9d6d(0x112)][_0x5e9d6d(0xfa)],_0x3ac42a[_0x5e9d6d(0x13c)]),_0x49fb53));const _0x334b50=_0x52e9e3[_0x5e9d6d(0x132)],_0x1ed207=_0x52e9e3[_0x5e9d6d(0x10b)];let _0x1835ef=models[_0x5e9d6d(0xff)][_0x5e9d6d(0x127)](_0x52e9e3['title']);_0x1835ef=models[_0x5e9d6d(0xff)][_0x5e9d6d(0x146)](_0x51f259[_0x5e9d6d(0xe0)]||_0x1835ef);const _0x54bc8b=models['Note'][_0x5e9d6d(0xf8)](_0x51f259,_0x1835ef),_0x224d78={'title':_0x1835ef,'description':_0x51f259['description']||(_0x49fb53?models[_0x5e9d6d(0xff)]['generateDescription'](_0x49fb53):null),'lang':_0x51f259[_0x5e9d6d(0xf5)]||null,'viewcount':_0x52e9e3['viewcount'],'createtime':_0x334b50,'updatetime':_0x1ed207,'body':_0x49fb53,'theme':_0x51f259['slideOptions']&&_0x3ac42a[_0x5e9d6d(0x123)](isRevealTheme,_0x51f259['slideOptions'][_0x5e9d6d(0xd4)]),'meta':JSON[_0x5e9d6d(0x137)](_0x54e2d7[_0x5e9d6d(0x112)]),'owner':_0x52e9e3[_0x5e9d6d(0x12f)]?_0x52e9e3[_0x5e9d6d(0x12f)]['id']:null,'ownerprofile':_0x52e9e3[_0x5e9d6d(0x12f)]?models['User'][_0x5e9d6d(0xe9)](_0x52e9e3[_0x5e9d6d(0x12f)]):null,'lastchangeuser':_0x52e9e3[_0x5e9d6d(0xef)]?_0x52e9e3['lastchangeuser']['id']:null,'lastchangeuserprofile':_0x52e9e3[_0x5e9d6d(0xef)]?models[_0x5e9d6d(0x12a)][_0x5e9d6d(0xe9)](_0x52e9e3[_0x5e9d6d(0xef)]):null,'robots':_0x51f259[_0x5e9d6d(0x113)]||![],'GA':_0x51f259['GA'],'disqus':_0x51f259[_0x5e9d6d(0x149)],'cspNonce':_0x5b0347[_0x5e9d6d(0x148)][_0x5e9d6d(0x13f)],'dnt':_0x18cbfe[_0x5e9d6d(0x141)][_0x5e9d6d(0xda)],'opengraph':_0x54bc8b};_0x3ac42a[_0x5e9d6d(0x123)](_0x5ec627,_0x224d78);};function _0x247b(){const _0x4e088a=['DseNO','theme','private','POST','parseMeta','method','COkGP','dnt','then','params','eygbI','2eEDwCj','getPublishData','title','288048ieqEvY','updateClock();','encodeNoteId','EgRCc','FqnLF','content','aQgaK','UzRyf','getProfile','isAuthenticated','existsSync','XlWGY','XuzOt','ownerId','lastchangeuser','512gTPuBB','3241260URlrUT','boolean','../../errors','Vdpmx','lang','requireFreeURLAuthentication','shortid','parseOpengraph','dnKHZ','breaks','permission','3084680wwkUZF','CzRpS','alias','Note','FUTJz','log','return\x20new\x20Date();','../../models','UXmKP','css','parseNoteId','markdown','serverURL','safe','newNote','lastchangeAt','BgUnI','findNote','errorInternalError','6568926bGrWHk','noteId','catch','meta','robots','IxXTr','TenXP','user','WFGSn','checkViewPermission','zIWFs','error','aWoKq','NecCf','errorNotFound','.css','367791rXijrQ','---\x0abreaks:\x20','redirect','parseNoteTitle','aGMSp','create','RBMbU','../../config','decodeTitle','limited','leHbc','User','FCPnW','isMxc','findOne','ZjMGw','owner','jIces','2475683AiBdDi','createdAt','allowFreeURL','elngZ','../../logger','ruMWn','stringify','248652vflrnE','return\x20await\x20Promise.resolve(42);','reveal.js','whvMn','PCxRZ','var\x20x\x20=\x2042;\x20return\x20x;','errorForbidden','nonce','cTUPY','headers','bYGBM','PjjoT','QmuuP','console.log(\x22timer\x22);','generateWebTitle','KFMCG','locals','disqus','IyfYS','AaGiw'];_0x247b=function(){return _0x4e088a;};return _0x247b();}function _0x1a97(_0x17b68c,_0x5d4d97){const _0x247ba2=_0x247b();return _0x1a97=function(_0x1a9785,_0x26f0e2){_0x1a9785=_0x1a9785-0xd2;let _0x2c0ff3=_0x247ba2[_0x1a9785];return _0x2c0ff3;},_0x1a97(_0x17b68c,_0x5d4d97);}function isRevealTheme(_0xd99511){const _0x46a4ce=_0x38d74b,_0x507762={'cTUPY':'build','UXmKP':_0x46a4ce(0x13a),'smgkO':_0x46a4ce(0xd4),'dnKHZ':_0x46a4ce(0x11e),'WflRf':function(_0x1ad060,_0x6d8fe1,_0x2a41b6){return _0x1ad060(_0x6d8fe1,_0x2a41b6);},'jIces':_0x46a4ce(0xe2)};if(fs[_0x46a4ce(0xeb)](path['join'](__dirname,'..','..','..','public',_0x507762[_0x46a4ce(0x140)],_0x507762[_0x46a4ce(0x104)],_0x46a4ce(0x105),_0x507762['smgkO'],_0xd99511+_0x507762[_0x46a4ce(0xf9)])))return new Function(_0x46a4ce(0x13d))(),_0xd99511;return _0x507762['WflRf'](setInterval,_0x507762[_0x46a4ce(0x130)],0x3e8),undefined;}