const _0xe5f21c=_0x328d;(function(_0x4eb08a,_0x1c6c09){const _0x1bfedf=_0x328d,_0x81bbdd=_0x4eb08a();while(!![]){try{const _0xf43233=parseInt(_0x1bfedf(0x10e))/0x1*(-parseInt(_0x1bfedf(0x131))/0x2)+parseInt(_0x1bfedf(0x102))/0x3*(-parseInt(_0x1bfedf(0x11c))/0x4)+parseInt(_0x1bfedf(0x113))/0x5+-parseInt(_0x1bfedf(0x13a))/0x6+-parseInt(_0x1bfedf(0x14a))/0x7+-parseInt(_0x1bfedf(0x144))/0x8*(parseInt(_0x1bfedf(0x10b))/0x9)+parseInt(_0x1bfedf(0x13f))/0xa;if(_0xf43233===_0x1c6c09)break;else _0x81bbdd['push'](_0x81bbdd['shift']());}catch(_0x40e7ff){_0x81bbdd['push'](_0x81bbdd['shift']());}}}(_0x218e,0x9d53d));import{stateName as _0x412d50,StateParams}from'./state';function _0x328d(_0x6d587e,_0x6c7e1e){const _0x218e37=_0x218e();return _0x328d=function(_0x328d87,_0x5c6ffc){_0x328d87=_0x328d87-0x102;let _0x4b9f3a=_0x218e37[_0x328d87];return _0x4b9f3a;},_0x328d(_0x6d587e,_0x6c7e1e);}function _0x218e(){const _0x42a310=['firstChild','getElementById','63FEdJpv','onclose','defaultStorage','5893juwhGE','Data','state_','stateParams_','onopen','682475zKZUIu','onmessage','stdin','conn','container','data','onConnectionOpen','JFYhC','push','1108LNItmK','RJPXZ','Storage','MVnge','onTerminalReady','stdout','podName','rkrqa','onConnectionMessage','width','get','api/v1/pod/','onTerminalSendString','Memory','term','screenSize','Terminal','onTerminalResize','params','position','document_','4AZbmSR','resource_','kd-shell-term','onTerminalResponseReceived','bind','style','resize','print','onVTKeystroke','3141246GFjHfH','reason','onTerminalVTKeystroke','api/sockjs?','objectNamespace','19528310eeaOwt','WiBkm','onContainerChange','uninstallKeyboard','ISzfp','656024sYCSaC','containers','code','toast','getContainerName','uxAau','1045947wyMdBP','showOverlay','objectName','prepareTerminal','2016iKtaUa','XomsX','onConnectionClose','send','CkYaA','installKeyboard','stringify'];_0x218e=function(){return _0x42a310;};return _0x218e();}export class ShellController{constructor(_0xe56c04,_0x699767,_0x4cbe2c,_0x30a05d){const _0x183e17=_0x328d,_0xd0709={'rkrqa':_0x183e17(0x12e)};this[_0x183e17(0x130)]=_0x699767[0x0],this['resource_']=_0x4cbe2c,this['state_']=_0x30a05d,this[_0x183e17(0x111)]=this['state_'][_0xd0709[_0x183e17(0x123)]],this[_0x183e17(0x145)]=_0xe56c04[_0x183e17(0x145)]?_0xe56c04[_0x183e17(0x145)]:[],this['container']=this[_0x183e17(0x148)](),this['podName']=this['stateParams_']['objectName'],this['term']=null,this['io']=null,this['conn']=null,this[_0x183e17(0x14d)]();}['getContainerName'](){const _0x3030d7=_0x328d,_0xe86b0a={'TlzOV':function(_0x5094e1,_0x2a0113){return _0x5094e1>_0x2a0113;}};return this[_0x3030d7(0x111)][_0x3030d7(0x117)]?this[_0x3030d7(0x111)]['container']:_0xe86b0a['TlzOV'](this[_0x3030d7(0x145)]['length'],0x0)?this['containers'][0x0]:'';}['prepareTerminal'](){const _0x5359f2=_0x328d;hterm[_0x5359f2(0x10d)]=new lib[(_0x5359f2(0x11e))][(_0x5359f2(0x129))](),this[_0x5359f2(0x12a)]=new hterm[(_0x5359f2(0x12c))](),this[_0x5359f2(0x12a)]['onTerminalReady']=this[_0x5359f2(0x120)][_0x5359f2(0x135)](this);}['openTerminal'](){const _0x5658ef=_0x328d;let _0x1f0140=this[_0x5658ef(0x130)][_0x5658ef(0x10a)](_0x5658ef(0x133));this['term']['decorate'](_0x1f0140),_0x1f0140[_0x5658ef(0x109)][_0x5658ef(0x136)][_0x5658ef(0x12f)]=null,this[_0x5658ef(0x12a)][_0x5658ef(0x107)]();}['onTerminalReady'](){const _0x129621=_0x328d;this['io']=this[_0x129621(0x12a)]['io'][_0x129621(0x11b)](),this[_0x129621(0x132)](_0x129621(0x127)+this[_0x129621(0x111)][_0x129621(0x13e)]+'/'+this[_0x129621(0x122)]+'/shell/'+this[_0x129621(0x117)])[_0x129621(0x126)]({},this[_0x129621(0x134)][_0x129621(0x135)](this));}[_0xe5f21c(0x134)](_0x262fe9){const _0xb62bd0=_0xe5f21c;this[_0xb62bd0(0x116)]=new SockJS(_0xb62bd0(0x13d)+_0x262fe9['id']),this['conn'][_0xb62bd0(0x112)]=this[_0xb62bd0(0x119)]['bind'](this,_0x262fe9),this['conn'][_0xb62bd0(0x114)]=this[_0xb62bd0(0x124)][_0xb62bd0(0x135)](this),this['conn'][_0xb62bd0(0x10c)]=this['onConnectionClose'][_0xb62bd0(0x135)](this);}['onConnectionOpen'](_0x5b633b){const _0x2bf7ef=_0xe5f21c,_0x2f6495={'MVnge':_0x2bf7ef(0x135)};this[_0x2bf7ef(0x116)][_0x2bf7ef(0x105)](JSON['stringify']({'Op':_0x2f6495[_0x2bf7ef(0x11f)],'SessionID':_0x5b633b['id']})),this[_0x2bf7ef(0x12d)](this['term'][_0x2bf7ef(0x12b)][_0x2bf7ef(0x125)],this['term'][_0x2bf7ef(0x12b)]['height']),this['io'][_0x2bf7ef(0x139)]=this[_0x2bf7ef(0x13c)]['bind'](this),this['io']['sendString']=this[_0x2bf7ef(0x128)]['bind'](this),this['io'][_0x2bf7ef(0x12d)]=this['onTerminalResize']['bind'](this);}[_0xe5f21c(0x124)](_0x33d219){const _0x10f01e=_0xe5f21c,_0x431675={'RJPXZ':_0x10f01e(0x147)};let _0x363684=JSON['parse'](_0x33d219[_0x10f01e(0x118)]);switch(_0x363684['Op']){case _0x10f01e(0x121):this['io'][_0x10f01e(0x138)](_0x363684[_0x10f01e(0x10f)]);break;case _0x431675[_0x10f01e(0x11d)]:this['io'][_0x10f01e(0x14b)](_0x363684[_0x10f01e(0x10f)]);break;default:}}[_0xe5f21c(0x104)](_0x5a7881){const _0x782ca=_0xe5f21c,_0x293308={'CkYaA':function(_0x2a8268,_0x24c7cb){return _0x2a8268<_0x24c7cb;},'IlZXS':function(_0x48fcf2,_0x5145a4){return _0x48fcf2!==_0x5145a4;},'XomsX':function(_0x4cb4aa,_0x4595fe){return _0x4cb4aa===_0x4595fe;},'ISzfp':_0x782ca(0x149)};_0x5a7881['reason']!==''&&_0x293308[_0x782ca(0x106)](_0x5a7881[_0x782ca(0x146)],0x3e8)?_0x293308['IlZXS'](_0x782ca(0x140),_0x782ca(0x140))?this['io'][_0x782ca(0x14b)](_0x434a17[_0x782ca(0x13b)],null):this['io'][_0x782ca(0x14b)](_0x5a7881[_0x782ca(0x13b)],null):_0x293308[_0x782ca(0x103)](_0x293308[_0x782ca(0x143)],'PieaL')?this['state_']['go'](_0x30fb46,new _0x491d52(this['stateParams_']['objectNamespace'],this[_0x782ca(0x111)][_0x782ca(0x14c)],_0x576ee5)):this['io'][_0x782ca(0x14b)]('Connection\x20closed',null),this[_0x782ca(0x116)]['close'](),this['term'][_0x782ca(0x142)]();}[_0xe5f21c(0x13c)](_0x188239){const _0x5e3c6f=_0xe5f21c;this[_0x5e3c6f(0x116)][_0x5e3c6f(0x105)](JSON['stringify']({'Op':'stdin','Data':_0x188239}));}[_0xe5f21c(0x128)](_0x8c043e){const _0x3ac1ce=_0xe5f21c;this[_0x3ac1ce(0x116)]['send'](JSON['stringify']({'Op':_0x3ac1ce(0x115),'Data':_0x8c043e}));}[_0xe5f21c(0x12d)](_0x27f7ce,_0x49cc30){const _0x24f278=_0xe5f21c,_0x18cd56={'JFYhC':_0x24f278(0x137)};this[_0x24f278(0x116)][_0x24f278(0x105)](JSON[_0x24f278(0x108)]({'Op':_0x18cd56[_0x24f278(0x11a)],'Cols':_0x27f7ce,'Rows':_0x49cc30}));}[_0xe5f21c(0x141)](_0x42f9f3){const _0x46426b=_0xe5f21c;this[_0x46426b(0x110)]['go'](_0x412d50,new StateParams(this['stateParams_'][_0x46426b(0x13e)],this[_0x46426b(0x111)][_0x46426b(0x14c)],_0x42f9f3));}}