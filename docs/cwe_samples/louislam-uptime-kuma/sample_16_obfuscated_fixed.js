#!/usr/bin/env node
const _0x1ec03c=_0x2e00;(function(_0x1f88bb,_0x1dc5d1){const _0x1cc4d9=_0x2e00,_0x1cf733=_0x1f88bb();while(!![]){try{const _0x300d38=parseInt(_0x1cc4d9(0x11a))/0x1+parseInt(_0x1cc4d9(0x13c))/0x2+-parseInt(_0x1cc4d9(0x160))/0x3*(parseInt(_0x1cc4d9(0x172))/0x4)+-parseInt(_0x1cc4d9(0x189))/0x5+parseInt(_0x1cc4d9(0x136))/0x6+-parseInt(_0x1cc4d9(0x15d))/0x7*(parseInt(_0x1cc4d9(0x180))/0x8)+parseInt(_0x1cc4d9(0x167))/0x9*(parseInt(_0x1cc4d9(0x158))/0xa);if(_0x300d38===_0x1dc5d1)break;else _0x1cf733['push'](_0x1cf733['shift']());}catch(_0x5b641d){_0x1cf733['push'](_0x1cf733['shift']());}}}(_0x214f,0xb85d8));import _0x347200 from'path';import _0xc7a7eb from'fs';import{execSync}from'child_process';import _0x378841 from'opener';import _0x10e49f from'http';import _0x10587c from'url';const __filename=_0x10587c[_0x1ec03c(0x122)](import.meta[_0x1ec03c(0x185)]),__dirname=_0x347200[_0x1ec03c(0x12b)](__filename),SERVER_PORT=0x22b8,rootDir=_0x347200[_0x1ec03c(0x16e)](__dirname),releaseDir=_0x347200[_0x1ec03c(0x16e)](_0x347200[_0x1ec03c(0x123)](__dirname,_0x1ec03c(0x16a))),isWin=process[_0x1ec03c(0x13d)]==='win32',homeDir=process[_0x1ec03c(0x131)][isWin?_0x1ec03c(0x13a):_0x1ec03c(0x12e)],userDir=_0x347200['join'](homeDir,_0x1ec03c(0x120)),CNAKO3=_0x347200['resolve'](_0x347200['join'](__dirname,_0x1ec03c(0x176))),NODE=process[_0x1ec03c(0x134)][0x0],appkey='K'+Math['floor'](Math['random']()*0xffffffff)[_0x1ec03c(0x183)](0x20)+Math['floor'](Math[_0x1ec03c(0x17c)]()*0xffffffff)[_0x1ec03c(0x183)](0x20);!_0xc7a7eb[_0x1ec03c(0x148)](userDir)&&_0xc7a7eb[_0x1ec03c(0x12f)](userDir);const server=_0x10e49f[_0x1ec03c(0x14b)](function(_0x480d5f,_0x1b0117){const _0x27e1fc=_0x1ec03c,_0x3e5fcb={'iarLW':function(_0x352085,_0x1f7000){return _0x352085(_0x1f7000);},'VpNSj':function(_0x19aace,_0x9884d7){return _0x19aace(_0x9884d7);},'vSZJx':'[„Çà„ÅÜ„Åì„Åù]','uSNnX':'<a\x20href=\x22/html/files.html\x22>HTML</a>','NNjnO':_0x27e1fc(0x162),'Ydxza':function(_0x4465e9,_0xb68ae5){return _0x4465e9===_0xb68ae5;},'gbIUe':_0x27e1fc(0x16d),'bPFoV':function(_0x4b47ba,_0x37276e){return _0x4b47ba===_0x37276e;},'fCssg':function(_0x305584,_0x169384){return _0x305584===_0x169384;},'XZXPQ':function(_0x34c733,_0x3b5c52,_0xa4ccf9){return _0x34c733(_0x3b5c52,_0xa4ccf9);},'lIfyM':function(_0x45ab63,_0x345703,_0x44a6af){return _0x45ab63(_0x345703,_0x44a6af);},'OdDnR':'/get_new_filename','Ohaks':_0x27e1fc(0x124),'qXobl':_0x27e1fc(0x125),'qcmER':function(_0x3d9d4c,_0x54dcf2){return _0x3d9d4c===_0x54dcf2;},'QsZeo':_0x27e1fc(0x16b),'JDnTO':'<html><meta\x20charset=\x22utf-8\x22><body><h1>404\x20ÊÆãÂøµ(ToT)\x20„Éï„Ç°„Ç§„É´„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</h1></body></html>'};console[_0x27e1fc(0x126)](_0x3e5fcb[_0x27e1fc(0x116)],JSON['stringify'](_0x480d5f[_0x27e1fc(0x185)]));if(_0x480d5f['url']==='/'){_0x1b0117[_0x27e1fc(0x138)](0x12e,{'Location':'/html/files.html?appkey='+appkey}),_0x1b0117['end'](_0x3e5fcb['uSNnX']);return;}let _0x30ab51=''+_0x480d5f[_0x27e1fc(0x185)];const _0x5cea58={};if(_0x30ab51[_0x27e1fc(0x110)]('?')>=0x0){const _0x4ea971=_0x30ab51[_0x27e1fc(0x163)]('?');_0x30ab51=_0x4ea971[0x0];const _0x4fa220=String(_0x4ea971[0x1])['split']('&');for(const _0x599a69 of _0x4fa220){const _0x3fdc56=_0x599a69[_0x27e1fc(0x163)]('=');try{_0x5cea58[_0x3fdc56[0x0]]=_0x3e5fcb[_0x27e1fc(0x187)](decodeURIComponent,_0x3fdc56[0x1]);}catch(_0x2ccebc){if(_0x27e1fc(0x162)===_0x3e5fcb['NNjnO'])console[_0x27e1fc(0x14a)](_0x2ccebc);else return _0x501686=_0x1a2c3d[_0x27e1fc(0x153)](/['"`\\?/<>*]/g,'_'),_0x21d957;}}}_0x30ab51=_0x30ab51['replace'](/\.\./g,'');if(_0x3e5fcb[_0x27e1fc(0x144)](_0x30ab51,_0x3e5fcb[_0x27e1fc(0x11f)])){apiFiles(_0x1b0117);return;}if(_0x3e5fcb[_0x27e1fc(0x118)](_0x30ab51,_0x27e1fc(0x161))){apiLoad(_0x1b0117,_0x5cea58);return;}if(_0x3e5fcb[_0x27e1fc(0x119)](_0x30ab51,_0x27e1fc(0x171))){_0x3e5fcb[_0x27e1fc(0x129)](apiSave,_0x1b0117,_0x5cea58);return;}if(_0x3e5fcb['bPFoV'](_0x30ab51,_0x27e1fc(0x112))){_0x3e5fcb['lIfyM'](apiRun,_0x1b0117,_0x5cea58);return;}if(_0x3e5fcb['fCssg'](_0x30ab51,_0x3e5fcb[_0x27e1fc(0x151)])){if(_0x3e5fcb['Ohaks']===_0x27e1fc(0x13f)){_0x3e5fcb[_0x27e1fc(0x179)](_0x18c0d9,_0xf3bc07);return;}else{_0x3e5fcb[_0x27e1fc(0x187)](apiGetNewFilename,_0x1b0117);return;}}if(_0x30ab51===_0x3e5fcb[_0x27e1fc(0x16f)]){if(_0x3e5fcb['qcmER'](_0x27e1fc(0x14d),_0x27e1fc(0x14d))){apiDelete(_0x1b0117,_0x5cea58);return;}else{const _0x8deba0=_0x19f98a[_0x27e1fc(0x178)](_0x59c531);_0x10ed28[_0x27e1fc(0x138)](0xc8,{'Content-Type':_0x27e1fc(0x147)}),_0x5e1f11[_0x27e1fc(0x15a)](_0x328d98['stringify'](_0x8deba0));}}let _0x3bf053=_0x347200['join'](rootDir,_0x30ab51);_0x30ab51[_0x27e1fc(0x17d)](_0x27e1fc(0x174))&&(_0x30ab51=_0x30ab51[_0x27e1fc(0x153)](/^\/release/,''),_0x3bf053=_0x347200[_0x27e1fc(0x123)](releaseDir,_0x30ab51));_0x3e5fcb[_0x27e1fc(0x187)](isDir,_0x3bf053)&&(_0x3bf053=_0x347200[_0x27e1fc(0x123)](_0x3bf053,_0x27e1fc(0x156)));if(!_0xc7a7eb[_0x27e1fc(0x148)](_0x3bf053)){console[_0x27e1fc(0x126)](_0x3e5fcb['QsZeo'],_0x30ab51),console[_0x27e1fc(0x126)](_0x27e1fc(0x146),_0x3bf053),_0x1b0117[_0x27e1fc(0x150)]=0x194,_0x1b0117[_0x27e1fc(0x15a)](_0x3e5fcb[_0x27e1fc(0x114)]);return;}_0xc7a7eb['readFile'](_0x3bf053,(_0x63d8f6,_0x2556bb)=>{const _0x4636aa=_0x27e1fc;if(_0x63d8f6){if(_0x4636aa(0x173)!=='JNHuA'){_0x1b0117[_0x4636aa(0x150)]=0x1f4,_0x1b0117[_0x4636aa(0x15a)](_0x4636aa(0x130));return;}else{_0x5b20ba[_0x4636aa(0x138)](0x12e,{'Location':_0x4636aa(0x17e)+_0x275b3f}),_0x45a651[_0x4636aa(0x15a)](_0x4636aa(0x186));return;}}const _0x32a333=_0x3e5fcb[_0x4636aa(0x187)](getMIMEType,_0x3bf053);_0x1b0117[_0x4636aa(0x138)](0xc8,{'Content-Type':_0x32a333}),_0x1b0117['end'](_0x2556bb);});});server[_0x1ec03c(0x159)](SERVER_PORT,function(){const _0x488cb8=_0x1ec03c,_0x5d8df1={'VuQYo':_0x488cb8(0x182),'oTDuW':_0x488cb8(0x188)},_0x19e9a3=_0x488cb8(0x141)+SERVER_PORT;console[_0x488cb8(0x126)](_0x5d8df1[_0x488cb8(0x111)]),console['log'](_0x488cb8(0x133)),console[_0x488cb8(0x126)](_0x5d8df1[_0x488cb8(0x181)],_0x19e9a3),_0x378841(_0x19e9a3);});const MimeTypes={'.html':_0x1ec03c(0x142),'.css':_0x1ec03c(0x177),'.js':'text/javascript','.png':_0x1ec03c(0x11c),'.gif':_0x1ec03c(0x11b),'.svg':'svg+xml'};function getMIMEType(_0x182d84){const _0x5e5e8f=_0x1ec03c,_0x48d0dd={'uAPlz':function(_0x42c975,_0x3e9437,_0x591edb){return _0x42c975(_0x3e9437,_0x591edb);},'EXlBy':'.txt','gaAtq':_0x5e5e8f(0x11e)};let _0xf0ebf2=_0x48d0dd[_0x5e5e8f(0x17b)];const _0x1692bf=_0x182d84['match'](/(\.[a-z0-9_]+)$/);_0x1692bf&&(_0xf0ebf2=_0x1692bf[0x1]);if(MimeTypes[_0xf0ebf2]){if(_0x5e5e8f(0x117)!==_0x48d0dd[_0x5e5e8f(0x15e)])return MimeTypes[_0xf0ebf2];else{_0x48d0dd[_0x5e5e8f(0x14e)](_0x8a4b3,_0x32574a,_0x20051c);return;}}return _0x5e5e8f(0x135);}function isDir(_0x219527){const _0x32b930=_0x1ec03c;try{const _0x443f75=_0xc7a7eb[_0x32b930(0x127)](_0x219527);if(_0x443f75&&_0x443f75[_0x32b930(0x15b)]())return!![];}catch(_0x4064f8){return![];}}function _0x2e00(_0xa7e0e7,_0x16af61){const _0x214f21=_0x214f();return _0x2e00=function(_0x2e003c,_0xe16c4e){_0x2e003c=_0x2e003c-0x110;let _0x50b89f=_0x214f21[_0x2e003c];return _0x50b89f;},_0x2e00(_0xa7e0e7,_0x16af61);}function apiFiles(_0x349d5e){const _0x255f65=_0x1ec03c,_0x62b222=_0xc7a7eb[_0x255f65(0x178)](userDir);_0x349d5e[_0x255f65(0x138)](0xc8,{'Content-Type':_0x255f65(0x147)}),_0x349d5e[_0x255f65(0x15a)](JSON[_0x255f65(0x139)](_0x62b222));}function _0x214f(){const _0x2d1b7d=['indexOf','VuQYo','/run','[ERROR]ÂÆüË°å„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ','JDnTO','message','vSZJx','AsXht','bPFoV','fCssg','1273126xxBrxk','image/gif','image/png','PNMiX','xOths','gbIUe','nadesiko3_user','newfile.nako3','fileURLToPath','join','bWweT','/deletefile','log','statSync','body','XZXPQ','\x22ok\x22','dirname','IAPPv','file','HOME','mkdirSync','Failed\x20to\x20read\x20file.','env','pfspG','###\x20script:\x20/src/nako3server.mjs','argv','text/plain','5329614aFJBJi','error:','writeHead','stringify','USERPROFILE','yuNkQ','765804RUzbnG','platform','CzMSP','dfPJy','VYAWs','http://localhost:','text/html','utf-8','Ydxza','WaUIM','|\x20file=','application/json','existsSync','[ERROR]\x20‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åüüò≠','error','createServer','0|3|1|4|2','OodKq','uAPlz','MEPaL','statusCode','OdDnR','[run]\x20file=','replace','.nako3','writeFileSync','index.html','#\x20Êñ∞Ë¶è„Éï„Ç°„Ç§„É´\x0a„Äå„Åì„Çì„Å´„Å°„ÅØ„Äç„Å®Ë°®Á§∫„ÄÇ','30dPohrV','listen','end','isDirectory','--------------------------------','6388277pkevDr','gaAtq','readFileSync','249GmmBiz','/load','Kgbox','split','LQxcY','[ERROR]\x20„Ç≠„Éº„ÅåÈÅï„ÅÑ„Åæ„Åô','JNosF','3256479hfNpEp','WZPxn','GSWSG','../../release','[ERROR]\x20404\x20','hclsB','/files','resolve','qXobl','appkey','/save','46732yleFdn','SOzep','/release/','iuOZP','../../src/cnako3.mjs','text/css','readdirSync','iarLW','ASuGv','EXlBy','random','startsWith','/html/files.html?appkey=','FCKTv','8xuYxMM','oTDuW','###\x20Ë∂ÖÁ∞°ÊòìWeb„Çµ„Éº„Éê„ÅåËµ∑Âãï„Åó„Åæ„Åó„Åü','toString','text/plain;\x20charset=utf-8','url','<a\x20href=\x22/html/files.html\x22>HTML</a>','VpNSj','[URL]','4961650jTszMR','body='];_0x214f=function(){return _0x2d1b7d;};return _0x214f();}function apiLoad(_0x1723ea,_0x652f){const _0x4383a7=_0x1ec03c,_0xbbc30b={'itQyt':_0x4383a7(0x157),'WaUIM':'text/plain'},_0x16d2ff=removeFlag(_0x652f['file']),_0x396eea=_0x347200[_0x4383a7(0x123)](userDir,_0x16d2ff);console[_0x4383a7(0x126)]('load=',_0x396eea);let _0x5c6aa8=_0xbbc30b['itQyt'];_0xc7a7eb[_0x4383a7(0x148)](_0x396eea)&&(_0x5c6aa8=_0xc7a7eb[_0x4383a7(0x15f)](_0x396eea,'utf-8')),_0x1723ea[_0x4383a7(0x138)](0xc8,{'Content-Type':_0xbbc30b[_0x4383a7(0x145)]}),_0x1723ea['end'](_0x5c6aa8);}function apiSave(_0x1620ea,_0x40f3d0){const _0x10fa74=_0x1ec03c,_0x48b29b={'EwNxA':_0x10fa74(0x184),'yuNkQ':_0x10fa74(0x165),'WZPxn':_0x10fa74(0x14c),'LQxcY':'utf-8','ASuGv':_0x10fa74(0x18a),'MEPaL':_0x10fa74(0x149)};_0x1620ea[_0x10fa74(0x138)](0xc8,{'Content-Type':_0x48b29b['EwNxA']});const _0x11f000=_0x40f3d0['appkey'];if(appkey!==_0x11f000){_0x1620ea[_0x10fa74(0x15a)](_0x48b29b[_0x10fa74(0x13b)]);return;}const _0x4e3869=removeFlag(_0x40f3d0['file']),_0x3de827=_0x40f3d0[_0x10fa74(0x128)],_0x3686d8=_0x347200[_0x10fa74(0x123)](userDir,_0x4e3869);try{const _0x55138c=_0x48b29b[_0x10fa74(0x168)][_0x10fa74(0x163)]('|');let _0x5761ed=0x0;while(!![]){switch(_0x55138c[_0x5761ed++]){case'0':_0xc7a7eb[_0x10fa74(0x155)](_0x3686d8,_0x3de827,_0x48b29b[_0x10fa74(0x164)]);continue;case'1':console[_0x10fa74(0x126)](_0x48b29b[_0x10fa74(0x17a)],_0x3de827);continue;case'2':_0x1620ea[_0x10fa74(0x15a)]('ok');continue;case'3':console['log']('[save]\x20file=',_0x3686d8);continue;case'4':console[_0x10fa74(0x126)]('--------------------------------');continue;}break;}}catch(_0xccfe32){_0x1620ea[_0x10fa74(0x15a)](_0x48b29b[_0x10fa74(0x14f)]);}}function removeFlag(_0x18112a){const _0x4f6b52=_0x1ec03c;return _0x18112a=_0x18112a[_0x4f6b52(0x153)](/['"`\\?/<>*]/g,'_'),_0x18112a;}function apiRun(_0x23dffa,_0x128d7e){const _0x1a3712=_0x1ec03c,_0x40c531={'iuOZP':_0x1a3712(0x184),'JNosF':_0x1a3712(0x165),'CzMSP':function(_0x1b69a6,_0xe54525){return _0x1b69a6(_0xe54525);},'FCKTv':_0x1a3712(0x143),'IAPPv':_0x1a3712(0x152),'hclsB':'--------------------------------','freXV':'[ERROR]\x20ÂÆüË°å„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ'};_0x23dffa['writeHead'](0xc8,{'Content-Type':_0x40c531[_0x1a3712(0x175)]});const _0x119fc0=_0x128d7e['appkey'];if(appkey!==_0x119fc0){_0x23dffa[_0x1a3712(0x15a)](_0x40c531[_0x1a3712(0x166)]);return;}const _0x24b2ce=_0x40c531['CzMSP'](removeFlag,_0x128d7e[_0x1a3712(0x12d)]),_0x34df57=_0x128d7e['body'],_0x4643e1=_0x347200[_0x1a3712(0x123)](userDir,_0x24b2ce);try{_0xc7a7eb['writeFileSync'](_0x4643e1,_0x34df57,_0x40c531[_0x1a3712(0x17f)]);const _0x231a73='\x22'+NODE+'\x22\x20\x22'+CNAKO3+'\x22\x20\x22'+_0x4643e1+'\x22';let _0x262e35='';try{_0x262e35=_0x40c531[_0x1a3712(0x13e)](execSync,_0x231a73),_0x262e35=String(_0x262e35);}catch(_0x583a79){console[_0x1a3712(0x14a)](_0x583a79),_0x23dffa['end'](_0x1a3712(0x113)+_0x583a79['toString']());return;}console[_0x1a3712(0x126)](_0x40c531[_0x1a3712(0x12c)],_0x24b2ce),console[_0x1a3712(0x126)](_0x1a3712(0x15c)),console[_0x1a3712(0x126)](_0x262e35),console[_0x1a3712(0x126)](_0x40c531[_0x1a3712(0x16c)]),_0x23dffa['end'](_0x262e35);}catch(_0x77c974){console[_0x1a3712(0x14a)](_0x77c974),_0x23dffa[_0x1a3712(0x15a)](_0x40c531['freXV']);}}function apiDelete(_0x1515cb,_0x2d98c3){const _0x6d8d36=_0x1ec03c,_0x2e2276={'PNMiX':function(_0xb312a0,_0x46d5b0){return _0xb312a0!==_0x46d5b0;},'tWZIF':'[ERROR]\x20„Ç≠„Éº„ÅåÈÅï„ÅÑ„Åæ„Åô','VYAWs':_0x6d8d36(0x137)};_0x1515cb[_0x6d8d36(0x138)](0xc8,{'Content-Type':'text/plain;\x20charset=utf-8'});const _0xdd86f1=_0x2d98c3[_0x6d8d36(0x170)];if(_0x2e2276[_0x6d8d36(0x11d)](appkey,_0xdd86f1)){_0x1515cb[_0x6d8d36(0x15a)](_0x2e2276['tWZIF']);return;}const _0x5f077a=_0x2d98c3['file'],_0x3dc74c=_0x347200['join'](userDir,_0x5f077a);try{_0xc7a7eb['unlinkSync'](_0x3dc74c),_0x1515cb['end'](_0x6d8d36(0x12a));return;}catch(_0x5b7471){_0x1515cb[_0x6d8d36(0x15a)](_0x2e2276[_0x6d8d36(0x140)]+_0x5b7471[_0x6d8d36(0x115)]);}}function apiGetNewFilename(_0x27e326){const _0x4ff5ed=_0x1ec03c,_0x386498={'GSWSG':_0x4ff5ed(0x121),'gvDHC':_0x4ff5ed(0x132)};let _0x53f736=_0x386498[_0x4ff5ed(0x169)];for(let _0x465bcd=0x1;_0x465bcd<=0x3e7;_0x465bcd++){if(_0x386498['gvDHC']!=='kLvgy'){_0x53f736='newfile'+_0x465bcd+_0x4ff5ed(0x154);const _0x465623=_0x347200[_0x4ff5ed(0x123)](userDir,_0x53f736);if(_0xc7a7eb[_0x4ff5ed(0x148)](_0x465623))continue;break;}else{const _0x40c1b0=_0x3d2a27[_0x4ff5ed(0x163)]('?');_0x575c29=_0x40c1b0[0x0];const _0x46d419=_0x3f08da(_0x40c1b0[0x1])['split']('&');for(const _0x5533e1 of _0x46d419){const _0x50cf1d=_0x5533e1[_0x4ff5ed(0x163)]('=');try{_0x2440d9[_0x50cf1d[0x0]]=_0x407d9b(_0x50cf1d[0x1]);}catch(_0x237ea6){_0x30a285[_0x4ff5ed(0x14a)](_0x237ea6);}}}}_0x27e326['writeHead'](0xc8,{'Content-Type':'text/plaing;\x20charset=utf-8'}),_0x27e326[_0x4ff5ed(0x15a)]('\x22'+_0x53f736+'\x22');}