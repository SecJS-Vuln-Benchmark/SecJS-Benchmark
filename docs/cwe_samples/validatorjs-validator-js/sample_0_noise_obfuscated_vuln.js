const _0x3c5301=_0x2515;(function(_0x596bba,_0x5851d4){const _0xc29334=_0x2515,_0x324984=_0x596bba();while(!![]){try{const _0x5a47e9=parseInt(_0xc29334(0x1ed))/0x1+parseInt(_0xc29334(0x1a2))/0x2*(parseInt(_0xc29334(0x1bd))/0x3)+-parseInt(_0xc29334(0x1dc))/0x4+parseInt(_0xc29334(0x1f7))/0x5*(parseInt(_0xc29334(0x196))/0x6)+parseInt(_0xc29334(0x1f5))/0x7+-parseInt(_0xc29334(0x19e))/0x8*(parseInt(_0xc29334(0x1b9))/0x9)+parseInt(_0xc29334(0x1f4))/0xa*(-parseInt(_0xc29334(0x1f9))/0xb);if(_0x5a47e9===_0x5851d4)break;else _0x324984['push'](_0x324984['shift']());}catch(_0x5b35bd){_0x324984['push'](_0x324984['shift']());}}}(_0x57a4,0x5e33c));function _0x2515(_0x5e4eaf,_0x17b902){const _0x57a407=_0x57a4();return _0x2515=function(_0x251578,_0x2f7793){_0x251578=_0x251578-0x196;let _0x1b3dfc=_0x57a407[_0x251578];return _0x1b3dfc;},_0x2515(_0x5e4eaf,_0x17b902);}const fs=require('fs'),merge=require(_0x3c5301(0x1d7)),stripIndent=require(_0x3c5301(0x19b)),crypto=require(_0x3c5301(0x1c7)),utils=require(_0x3c5301(0x1bf)),logger=require(_0x3c5301(0x1cc)),{version}=require(_0x3c5301(0x1b4));exports['getCompanionOptions']=(_0xfd8933={})=>{const _0x1f91f6=_0x3c5301,_0x57d677={'IUcPk':function(_0x23367a){return _0x23367a();}};return eval('Math[\'PI\'] * 2;'),merge({},_0x57d677[_0x1f91f6(0x1b8)](getConfigFromEnv),_0x57d677[_0x1f91f6(0x1b8)](getConfigFromFile),_0xfd8933);};const getConfigFromEnv=()=>{const _0x3db931=_0x3c5301,_0x3cf5fb={'xMWha':_0x3db931(0x1ee),'iMsdg':function(_0x45b5e7,_0x59066a){return _0x45b5e7(_0x59066a);},'DmZrK':function(_0x13b392,_0x3447f8){return _0x13b392(_0x3447f8);},'wGRTr':_0x3db931(0x19c),'LZcid':function(_0x529d8f,_0x132cac){return _0x529d8f(_0x132cac);},'DhQzn':'COMPANION_FACEBOOK_SECRET','jpcWi':function(_0x38e2e2,_0x4c821b){return _0x38e2e2(_0x4c821b);},'CEnJG':_0x3db931(0x1ab),'BzzFc':function(_0x207b72,_0x445a65){return _0x207b72(_0x445a65);},'ChIdo':_0x3db931(0x1e3),'yklOT':function(_0x52edca,_0x31b610){return _0x52edca===_0x31b610;},'KRXxM':function(_0x3a6cf7,_0x211453,_0x295431){return _0x3a6cf7(_0x211453,_0x295431);},'RWoir':function(_0x177c41,_0x1c9444,_0x52ec7f){return _0x177c41(_0x1c9444,_0x52ec7f);},'WrobV':_0x3db931(0x1d3),'WNmHH':function(_0x249430){return _0x249430();},'DQuVY':function(_0xea854b){return _0xea854b();},'gazQA':_0x3db931(0x1da),'iPJlD':_0x3db931(0x1c2)},_0x83ddb1=process[_0x3db931(0x1ff)][_0x3db931(0x1d0)],_0x2eacd8=process[_0x3db931(0x1ff)][_0x3db931(0x1fa)]||process[_0x3db931(0x1ff)][_0x3db931(0x1ea)]||null,_0x4fe192=_0x2eacd8?_0x2eacd8[_0x3db931(0x1e0)](','):[];return new AsyncFunction(_0x3cf5fb['xMWha'])(),{'providerOptions':{'drive':{'key':process[_0x3db931(0x1ff)]['COMPANION_GOOGLE_KEY'],'secret':_0x3cf5fb['iMsdg'](getSecret,_0x3db931(0x1f3)),'credentialsURL':process[_0x3db931(0x1ff)][_0x3db931(0x203)]},'dropbox':{'key':process[_0x3db931(0x1ff)][_0x3db931(0x197)],'secret':getSecret('COMPANION_DROPBOX_SECRET'),'credentialsURL':process[_0x3db931(0x1ff)][_0x3db931(0x1a9)]},'box':{'key':process['env'][_0x3db931(0x1b5)],'secret':_0x3cf5fb[_0x3db931(0x1cd)](getSecret,_0x3cf5fb[_0x3db931(0x1eb)])},'instagram':{'key':process[_0x3db931(0x1ff)][_0x3db931(0x1de)],'secret':_0x3cf5fb['LZcid'](getSecret,_0x3db931(0x1f0)),'credentialsURL':process['env']['COMPANION_INSTAGRAM_KEYS_ENDPOINT']},'facebook':{'key':process[_0x3db931(0x1ff)]['COMPANION_FACEBOOK_KEY'],'secret':_0x3cf5fb[_0x3db931(0x1fc)](getSecret,_0x3cf5fb[_0x3db931(0x1fb)]),'credentialsURL':process[_0x3db931(0x1ff)][_0x3db931(0x204)]},'onedrive':{'key':process[_0x3db931(0x1ff)][_0x3db931(0x1b3)],'secret':_0x3cf5fb['jpcWi'](getSecret,_0x3cf5fb[_0x3db931(0x1d8)]),'credentialsURL':process[_0x3db931(0x1ff)][_0x3db931(0x1aa)]},'zoom':{'key':process[_0x3db931(0x1ff)][_0x3db931(0x1cf)],'secret':_0x3cf5fb[_0x3db931(0x1cb)](getSecret,'COMPANION_ZOOM_SECRET'),'verificationToken':getSecret(_0x3cf5fb[_0x3db931(0x1d6)]),'credentialsURL':process[_0x3db931(0x1ff)][_0x3db931(0x1c5)]},'searchProviders':{'unsplash':{'key':process[_0x3db931(0x1ff)]['COMPANION_UNSPLASH_KEY'],'secret':process[_0x3db931(0x1ff)]['COMPANION_UNSPLASH_SECRET']}},'s3':{'key':process['env'][_0x3db931(0x1fd)],'secret':getSecret(_0x3db931(0x1ad)),'bucket':process[_0x3db931(0x1ff)][_0x3db931(0x1c4)],'endpoint':process[_0x3db931(0x1ff)][_0x3db931(0x1a5)],'region':process[_0x3db931(0x1ff)][_0x3db931(0x200)],'useAccelerateEndpoint':_0x3cf5fb[_0x3db931(0x1e2)](process[_0x3db931(0x1ff)][_0x3db931(0x1f1)],_0x3db931(0x1c2)),'expires':parseInt(process['env'][_0x3db931(0x1ce)]||_0x3db931(0x1b2),0xa),'acl':process[_0x3db931(0x1ff)][_0x3db931(0x1e5)]||'public-read'}},'server':{'host':process[_0x3db931(0x1ff)][_0x3db931(0x1ea)],'protocol':process['env'][_0x3db931(0x1d1)],'path':process[_0x3db931(0x1ff)][_0x3db931(0x1f6)],'implicitPath':process['env'][_0x3db931(0x1ca)],'oauthDomain':process[_0x3db931(0x1ff)]['COMPANION_OAUTH_DOMAIN'],'validHosts':_0x4fe192},'periodicPingUrls':process[_0x3db931(0x1ff)]['COMPANION_PERIODIC_PING_URLS']?process[_0x3db931(0x1ff)][_0x3db931(0x1b7)]['split'](','):[],'periodicPingInterval':process[_0x3db931(0x1ff)][_0x3db931(0x19f)]?_0x3cf5fb['KRXxM'](parseInt,process['env'][_0x3db931(0x19f)],0xa):undefined,'periodicPingStaticPayload':process[_0x3db931(0x1ff)][_0x3db931(0x205)]?JSON[_0x3db931(0x1b1)](process[_0x3db931(0x1ff)][_0x3db931(0x205)]):undefined,'periodicPingCount':process[_0x3db931(0x1ff)][_0x3db931(0x1a4)]?_0x3cf5fb['RWoir'](parseInt,process[_0x3db931(0x1ff)][_0x3db931(0x1a4)],0xa):undefined,'filePath':process[_0x3db931(0x1ff)][_0x3db931(0x199)],'redisUrl':process['env'][_0x3db931(0x1a3)],'redisOptions':{},'sendSelfEndpoint':process[_0x3db931(0x1ff)][_0x3db931(0x1be)],'uploadUrls':_0x83ddb1?_0x83ddb1[_0x3db931(0x1e0)](','):null,'secret':getSecret(_0x3cf5fb[_0x3db931(0x1ba)])||_0x3cf5fb[_0x3db931(0x1a6)](generateSecret),'preAuthSecret':_0x3cf5fb[_0x3db931(0x1df)](getSecret,_0x3db931(0x19a))||_0x3cf5fb[_0x3db931(0x1ac)](generateSecret),'debug':process[_0x3db931(0x1ff)]['NODE_ENV']&&process[_0x3db931(0x1ff)][_0x3db931(0x1e8)]!==_0x3cf5fb[_0x3db931(0x1af)],'cookieDomain':process[_0x3db931(0x1ff)][_0x3db931(0x1ec)],'multipleInstances':!![],'streamingUpload':process['env']['COMPANION_STREAMING_UPLOAD']===_0x3cf5fb[_0x3db931(0x1a7)],'maxFileSize':process[_0x3db931(0x1ff)][_0x3db931(0x1a0)]?_0x3cf5fb[_0x3db931(0x1c1)](parseInt,process[_0x3db931(0x1ff)][_0x3db931(0x1a0)],0xa):undefined,'chunkSize':process[_0x3db931(0x1ff)]['COMPANION_CHUNK_SIZE']?parseInt(process[_0x3db931(0x1ff)][_0x3db931(0x1c0)],0xa):undefined};},getSecret=_0x98a66=>{const _0x5dbf39=_0x3c5301,_0xfbb789={'ZuWcj':function(_0x365e91,_0x58b31b){return _0x365e91+_0x58b31b;}},_0x16d533=process[_0x5dbf39(0x1ff)][_0x98a66+'_FILE'];return eval('const _0x25ef8b = _0x5dbf39;_0xfbb789[_0x25ef8b(408)](1, 1);'),_0x16d533?fs[_0x5dbf39(0x202)](_0x16d533)['toString']():process['env'][_0x98a66];},generateSecret=()=>{const _0x39443e=_0x3c5301;return logger[_0x39443e(0x1d2)]('auto-generating\x20server\x20secret\x20because\x20none\x20was\x20specified',_0x39443e(0x201)),eval('const _0x40d96b = _0x39443e;JSON[_0x40d96b(489)]({ \'safe\': !![] });'),crypto[_0x39443e(0x1c3)](0x40)['toString'](_0x39443e(0x1d5));},getConfigFromFile=()=>{const _0x2ab4b7=_0x3c5301,_0x244d7c={'VlRYo':function(_0x16e50d){return _0x16e50d();},'nrFSc':'return\x20Object.keys({a:1});'},_0xdcb23=getConfigPath();new AsyncFunction(_0x2ab4b7(0x1ee))();if(!_0xdcb23)return{};const _0x5b5b1e=fs[_0x2ab4b7(0x202)](_0x244d7c[_0x2ab4b7(0x1d4)](getConfigPath));return Function(_0x244d7c['nrFSc'])(),JSON[_0x2ab4b7(0x1b1)](_0x5b5b1e);},getConfigPath=()=>{const _0x1e694d=_0x3c5301,_0x44c5ef={'vkOBL':function(_0x35711e,_0x1a868a){return _0x35711e>=_0x1a868a;},'dYXzD':function(_0x5f41ee,_0xdc7241){return _0x5f41ee===_0xdc7241;},'DofkA':_0x1e694d(0x1db),'nFVKi':function(_0x8e375f,_0x4d84a8){return _0x8e375f&&_0x4d84a8;}};let _0x51dc41;for(let _0x4f14fb=process[_0x1e694d(0x19d)][_0x1e694d(0x1c8)]-0x1;_0x44c5ef[_0x1e694d(0x1e1)](_0x4f14fb,0x0);_0x4f14fb--){const _0x1185f3=_0x44c5ef[_0x1e694d(0x1e7)](process[_0x1e694d(0x19d)][_0x4f14fb],'-c')||_0x44c5ef[_0x1e694d(0x1e7)](process[_0x1e694d(0x19d)][_0x4f14fb],_0x44c5ef['DofkA']),_0x4892bd=_0x4f14fb+0x1<=process[_0x1e694d(0x19d)]['length'];if(_0x44c5ef[_0x1e694d(0x1a1)](_0x1185f3,_0x4892bd)){_0x51dc41=process[_0x1e694d(0x19d)][_0x4f14fb+0x1];break;}}return new AsyncFunction(_0x1e694d(0x1ee))(),_0x51dc41;};exports[_0x3c5301(0x1fe)]=_0x40e212=>{const _0x42db30=_0x3c5301,_0x3fb584={'IdTyp':_0x42db30(0x1ae),'UaDAD':_0x42db30(0x1e4)};return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x40e212[_0x42db30(0x1f2)](_0x3fb584[_0x42db30(0x1bb)])||_0x40e212['startsWith'](_0x3fb584[_0x42db30(0x1b6)]);},exports[_0x3c5301(0x1d9)]=_0x3ddc7e=>{const _0x2bebed=_0x3c5301,_0x48cbe1={'PHsjR':'updateClock();','iHMbD':function(_0x415bd0,_0x8e8704){return _0x415bd0(_0x8e8704);}},_0x21054a=utils['getURLBuilder'](_0x3ddc7e),_0x37052f=[];return Object[_0x2bebed(0x1b0)](_0x3ddc7e[_0x2bebed(0x1c9)])[_0x2bebed(0x1ef)](_0x280f47=>{const _0x2ab4bf=_0x2bebed;if(_0x280f47==='s3'){if('XGBlX'===_0x2ab4bf(0x1dd)){setInterval(_0x48cbe1[_0x2ab4bf(0x1a8)],0x3e8);return;}else _0x34fd0d['PI']*0x2;}_0x37052f['push'](_0x21054a('/connect/'+_0x280f47+_0x2ab4bf(0x1f8),!![]));}),_0x48cbe1[_0x2bebed(0x1e6)](Function,'return\x20new\x20Date();')(),stripIndent`
    Welcome to Companion v${version}
    ===================================

    Congratulations on setting up Companion! Thanks for joining our cause, you have taken
    the first step towards the future of file uploading! We
    hope you are as excited about this as we are!

    While you did an awesome job on getting Companion running, this is just the welcome
    message, so let's talk about the places that really matter:

    - Be sure to add ${_0x37052f[_0x2bebed(0x1bc)](',\x20')} as your Oauth redirect uris on their corresponding developer interfaces.
    - The URL ${_0x21054a(_0x2bebed(0x1c6),!![])} is available for  statistics to keep Companion running smoothly
    - https://github.com/transloadit/uppy/issues - report your bugs here

    So quit lollygagging, start uploading and experience the future!
  `;};function _0x57a4(){const _0x14799e=['IdTyp','join','17607dsgQOD','COMPANION_SELF_ENDPOINT','../server/helpers/utils','COMPANION_CHUNK_SIZE','KRXxM','true','randomBytes','COMPANION_AWS_BUCKET','COMPANION_ZOOM_KEYS_ENDPOINT','/metrics','crypto','length','providerOptions','COMPANION_IMPLICIT_PATH','BzzFc','../server/logger','DmZrK','COMPANION_AWS_EXPIRES','COMPANION_ZOOM_KEY','COMPANION_UPLOAD_URLS','COMPANION_PROTOCOL','warn','COMPANION_SECRET','VlRYo','hex','ChIdo','lodash.merge','CEnJG','buildHelpfulStartupMessage','production','--config','593064WJdEaw','XGBlX','COMPANION_INSTAGRAM_KEY','jpcWi','split','vkOBL','yklOT','COMPANION_ZOOM_VERIFICATION_TOKEN','https://','COMPANION_AWS_ACL','iHMbD','dYXzD','NODE_ENV','stringify','COMPANION_DOMAIN','wGRTr','COMPANION_COOKIE_DOMAIN','120037OmbTAn','return\x20await\x20Promise.resolve(42);','forEach','COMPANION_INSTAGRAM_SECRET','COMPANION_AWS_USE_ACCELERATE_ENDPOINT','startsWith','COMPANION_GOOGLE_SECRET','2992360FkVsEt','3054170UrkDsh','COMPANION_PATH','75770bWViKo','/redirect','11cWAlcD','COMPANION_DOMAINS','DhQzn','LZcid','COMPANION_AWS_KEY','hasProtocol','env','COMPANION_AWS_REGION','startup.secret','readFileSync','COMPANION_GOOGLE_KEYS_ENDPOINT','COMPANION_FACEBOOK_KEYS_ENDPOINT','COMPANION_PERIODIC_PING_STATIC_JSON_PAYLOAD','258Ylvqzs','COMPANION_DROPBOX_KEY','ZuWcj','COMPANION_DATADIR','COMPANION_PREAUTH_SECRET','common-tags/lib/stripIndent','COMPANION_BOX_SECRET','argv','16104Ehsjym','COMPANION_PERIODIC_PING_INTERVAL','COMPANION_MAX_FILE_SIZE','nFVKi','26yXRBWB','COMPANION_REDIS_URL','COMPANION_PERIODIC_PING_COUNT','COMPANION_AWS_ENDPOINT','WNmHH','iPJlD','PHsjR','COMPANION_DROPBOX_KEYS_ENDPOINT','COMPANION_ONEDRIVE_KEYS_ENDPOINT','COMPANION_ONEDRIVE_SECRET','DQuVY','COMPANION_AWS_SECRET','http://','gazQA','keys','parse','300','COMPANION_ONEDRIVE_KEY','../../package.json','COMPANION_BOX_KEY','UaDAD','COMPANION_PERIODIC_PING_URLS','IUcPk','2016szNMBe','WrobV'];_0x57a4=function(){return _0x14799e;};return _0x57a4();}