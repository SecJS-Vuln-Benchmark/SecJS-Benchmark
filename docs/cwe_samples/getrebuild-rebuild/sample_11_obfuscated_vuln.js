(function(_0x5d1710,_0x2e489f){const _0x384987=_0x27c8,_0x4b1a9a=_0x5d1710();while(!![]){try{const _0x2ef012=-parseInt(_0x384987(0x117))/0x1*(-parseInt(_0x384987(0x113))/0x2)+-parseInt(_0x384987(0x189))/0x3*(-parseInt(_0x384987(0x114))/0x4)+parseInt(_0x384987(0x154))/0x5*(parseInt(_0x384987(0x187))/0x6)+-parseInt(_0x384987(0x123))/0x7+parseInt(_0x384987(0x153))/0x8+-parseInt(_0x384987(0x103))/0x9*(-parseInt(_0x384987(0x170))/0xa)+parseInt(_0x384987(0x12e))/0xb*(-parseInt(_0x384987(0xe1))/0xc);if(_0x2ef012===_0x2e489f)break;else _0x4b1a9a['push'](_0x4b1a9a['shift']());}catch(_0x32762a){_0x4b1a9a['push'](_0x4b1a9a['shift']());}}}(_0x49f9,0xb27e7));import'../utils/errors';import'../utils/i18nHtml';import{fromByteArray}from'base64-js';import _0x21d6a0 from'bootstrap/js/src/modal';import _0x549ab8 from'bootstrap/js/src/toast';import _0x359246 from'bootstrap5-tags/tags';import*as _0x2cf706 from'dompurify';import{EVENT_LOCALIZATION_READY,obtainManifest,obtainProfileList,obtainSiteList,obtainUrls,PREF_DEFAULT_PROFILE_TEMPLATE,setPopupSize}from'../utils';function _0x49f9(){const _0xa23cdf=['new-profile-modal','144nEOonH','stopPropagation','mac','new-profile-description','d-none','web-app-name','webAppValidationProfileLimit','auto-create-new-profile','installPageContentScriptError','web-app-submit','ZoVxk','QLHJu','ZFYXo','checked','new-profile-name','installPageContentScriptErrorDevelopment','38AQquqZ','9388ywIKiP','LpgSr','buttonCreateProcessing','19645yXxuTM','click','#81','hide','includes','installPageCreateProfile','createElement','sIPyg','stringify','local','error-toast','ggGpA','3254503adhkyg','linux','tnEUh','change','web-app-profile','xoCoF','installPageAutoCreateProfile','installPageContentScriptErrorRestricted','icons','replaceChildren','/sites/launch.html','3463053noQZTJ','firefox.com','show','EKcdo','sanitize','#322','YPXNk','poGUZ','web-app-categories','UMJIV','append','cFAGC','host','runtime','placeholder','.form-select-tags','InstallSite','origin','qpuYZ','IYvkE','setPopup','startsWith','web-app-profile-warn-box','IPSmq','new-profile-cancel1','querySelectorAll','mozilla.net','selectedOptions','value','validationMessage','xhAIV','buttonCreateDefault','target','sendNativeMessage','exfKs','ToThx','rUoAj','8215184OnRdIU','11270zefNga','web-app-icon-url-invalid','categories','lZhuJ','RgmVB','pathname','YlgKq','gHugc','addItem','NODE_ENV','map','disabled','FoCbd','ZIPrP','web-app-profile-invalid','tabs','error-text','GTDDh','profile','pageAction','close','firefoxpwa','getOrCreateInstance','VJOUA','EpHzT','wsjLJ','web-app-use-manifest-box','yemCo','43810LTgWmp','getMessage','remove','call','webAppValidationStartURLInvalid','qSJoN','Error','tttGp','mAaDL','description','setAttribute','VShlH','actionLaunchSite','PsOQM','OsrVc','keywords','Dqoli','manifest','add','https://github.com/filips123/PWAsForFirefox/issues/322','log','addEventListener','web-app-start-url','690yDMFfF','webAppValidationNameReuse','123UWSoGH','cIgpb','start_url','setTitle','getElementById','query','short_name','data:application/manifest+json;base64,','bind','storage','UqZNx','BvfSG','data','toString','manifest_url','gIohS','web-app-icon-url','scope','web-app-keywords','input','ProfileCreated','lVMnr','buttonWebAppInstallFinished','validity','openbsd','MAHEK','BNoCt','ulid','href','getAttribute','i18n','vIKpq','24nzmpAe','web-app-name-invalid','GBTap','tagsInstance','type','get','zkctO','ZzSRH','TeMlp','buttonWebAppInstallProcessing','new-profile-template','FZZfl','setCustomValidity','name','was-validated','mozilla.org','NQwbl','innerText','error','web-app-description','config','Received\x20invalid\x20response\x20type:\x20','classList','vhpXZ','values','fBRRn','typeMismatch','web-app-use-manifest','url','hNklA','new-profile-create','UPaxu','preventDefault'];_0x49f9=function(){return _0xa23cdf;};return _0x49f9();}import{getMessage}from'../utils/i18n';import{knownCategories}from'./categories';function _0x27c8(_0x34377d,_0x28fc63){const _0x49f97b=_0x49f9();return _0x27c8=function(_0x27c8ec,_0x5b3644){_0x27c8ec=_0x27c8ec-0xdf;let _0x427c48=_0x49f97b[_0x27c8ec];return _0x427c48;},_0x27c8(_0x34377d,_0x28fc63);}function displayProfileWarning(_0x25da0d){const _0x15f009=_0x27c8,_0x5a1c03={'exfKs':function(_0x55c03c,_0x3050f4){return _0x55c03c===_0x3050f4;},'gIohS':'linux','TdktX':function(_0x5565fd,_0x14ccb3){return _0x5565fd===_0x14ccb3;},'RRlfX':'mac','OsrVc':'https://github.com/filips123/PWAsForFirefox/issues/81','TahRw':_0x15f009(0x144)};if(_0x5a1c03[_0x15f009(0x150)](_0x25da0d['os'],_0x5a1c03[_0x15f009(0x198)])||_0x5a1c03['TdktX'](_0x25da0d['os'],_0x15f009(0x105))||_0x25da0d['os']==='openbsd'){const _0x352fe=document[_0x15f009(0x18d)]('web-app-profile-warn-issue');switch(_0x25da0d['os']){case _0x15f009(0x124):case'openbsd':_0x352fe[_0x15f009(0x1a5)]=_0x15f009(0x183),_0x352fe[_0x15f009(0xf2)]=_0x15f009(0x133);break;case _0x5a1c03['RRlfX']:_0x352fe[_0x15f009(0x1a5)]=_0x5a1c03[_0x15f009(0x17e)],_0x352fe[_0x15f009(0xf2)]=_0x15f009(0x119);}document[_0x15f009(0x18d)](_0x5a1c03['TahRw'])[_0x15f009(0xf7)][_0x15f009(0x172)](_0x15f009(0x107));}}async function initializeForm(){const _0x225d5c=_0x27c8,_0xdb1eb6={'ZIPrP':'create-new-profile','DnbCE':_0x225d5c(0x111),'tttGp':_0x225d5c(0x106),'mAaDL':_0x225d5c(0xff),'DXKcP':function(_0x1773aa,_0x4704be){return _0x1773aa(_0x4704be);},'ZoVxk':_0x225d5c(0x102),'BNoCt':'static','NQwbl':function(_0x56b252,_0x240a27){return _0x56b252(_0x240a27);},'UqZNx':'CreateProfile','vIKpq':function(_0x209cfc,_0x7f4d0b){return _0x209cfc??_0x7f4d0b;},'ToThx':function(_0x48aab8,_0x19351f){return _0x48aab8-_0x19351f;},'rUoAj':function(_0x374abf,_0x59b507){return _0x374abf(_0x59b507);},'UMJIV':function(_0x36176a,_0x2acfb5){return _0x36176a===_0x2acfb5;},'LpgSr':_0x225d5c(0x18a),'SuIKL':_0x225d5c(0x174),'cFAGC':_0x225d5c(0x11e),'gHugc':function(_0xe66e29,_0x459ab8){return _0xe66e29(_0x459ab8);},'Dqoli':'webAppValidationStartURLScope','hNklA':function(_0xdc7fc1,_0x353dd7){return _0xdc7fc1!==_0x353dd7;},'EKcdo':_0x225d5c(0x158),'FvUPf':'webAppValidationIconURLInvalid','lZhuJ':_0x225d5c(0x162),'oWPmC':_0x225d5c(0x199),'ZzSRH':_0x225d5c(0x127),'PsOQM':_0x225d5c(0xf4),'poGUZ':_0x225d5c(0x136),'xhAIV':'web-app-name','SKpEG':function(_0x106eee,_0x1ba9b9){return _0x106eee===_0x1ba9b9;},'FoCbd':_0x225d5c(0x10a),'TeMlp':_0x225d5c(0x169),'FZZfl':function(_0x53f2fc,_0x1459bc){return _0x53f2fc||_0x1459bc;},'dhEAw':function(_0x57b879,_0x57f188){return _0x57b879===_0x57f188;},'lVMnr':_0x225d5c(0x176),'IYvkE':function(_0x19f84e,_0xd808f9){return _0x19f84e!==_0xd808f9;},'xoCoF':_0x225d5c(0x121),'QYxAY':_0x225d5c(0x17c),'ggGpA':function(_0x5ad6a8,_0x27aa0b,_0x5102af){return _0x5ad6a8(_0x27aa0b,_0x5102af);},'YPXNk':'web-app-form','GBTap':_0x225d5c(0x13d),'ZFYXo':function(_0x33f4f4){return _0x33f4f4();},'yhrYf':'tnEUh','UPaxu':function(_0x4ca09c,_0x5a6ae1){return _0x4ca09c(_0x5a6ae1);},'fBRRn':_0x225d5c(0x10b),'qSJoN':'mozilla.com','yemCo':_0x225d5c(0xf0),'IPSmq':_0x225d5c(0x12a),'uNJek':function(_0x50b0dd,_0x22c7cf,_0x33e0fe){return _0x50b0dd(_0x22c7cf,_0x33e0fe);},'VJOUA':_0x225d5c(0x1a2),'FYldY':_0x225d5c(0x16e),'VShlH':_0x225d5c(0x107),'QLHJu':'placeholder','GTDDh':_0x225d5c(0x19b),'vhpXZ':function(_0x52c228,_0x4f8a8f){return _0x52c228===_0x4f8a8f;},'BvfSG':'mac','wsjLJ':_0x225d5c(0x118),'kenrW':_0x225d5c(0x186),'qpuYZ':_0x225d5c(0x19c)},_0xd384e3=document[_0x225d5c(0x18d)](_0xdb1eb6[_0x225d5c(0x134)]),_0x4c3f49=document[_0x225d5c(0x18d)](_0x225d5c(0x10c));{const _0x2bee04=document['getElementById'](_0xdb1eb6['poGUZ']);for(const _0x42862d of knownCategories)_0x2bee04[_0x225d5c(0x182)](new Option(_0x42862d,_0x42862d));}for(const _0x3b9bee of document[_0x225d5c(0x147)](_0xdb1eb6[_0x225d5c(0xe3)])){_0x3b9bee[_0x225d5c(0xe4)]=new _0x359246(_0x3b9bee);}const _0x2fbab9=await browser['runtime']['getPlatformInfo']();document[_0x225d5c(0x185)](EVENT_LOCALIZATION_READY,displayProfileWarning[_0x225d5c(0x191)](null,_0x2fbab9));let _0x1a4f1b,_0x178887,_0x1b8490;try{if(_0x225d5c(0x16c)===_0x225d5c(0x16c))({manifestUrl:_0x1a4f1b,documentUrl:_0x178887,pageInfo:_0x1b8490}=await _0xdb1eb6[_0x225d5c(0x10f)](obtainUrls));else{_0x4ead76=this['value'];return;}}catch(_0x5e611e){if(_0xdb1eb6['yhrYf']===_0x225d5c(0x125)){console[_0x225d5c(0xf3)](_0x5e611e);const _0x5cf88b=document['getElementById'](_0x225d5c(0x164));_0x5cf88b[_0x225d5c(0x12c)]();const _0x5a7b7c=document[_0x225d5c(0x11d)]('p');_0x5a7b7c[_0x225d5c(0xf2)]=await _0xdb1eb6[_0x225d5c(0x100)](getMessage,_0xdb1eb6[_0x225d5c(0xfa)]),_0x5cf88b[_0x225d5c(0x138)](_0x5a7b7c);if(process['env'][_0x225d5c(0x15d)]==='development'){const _0x4bfb7b=document[_0x225d5c(0x11d)]('p');_0x4bfb7b['innerText']=await getMessage(_0x225d5c(0x112)),_0x5cf88b[_0x225d5c(0x138)](_0x4bfb7b);}const _0x26284d=(await browser['tabs'][_0x225d5c(0x18e)]({'active':!![],'currentWindow':!![]}))[0x0];if(_0x26284d[_0x225d5c(0xfd)]&&[_0x225d5c(0x12f),_0xdb1eb6[_0x225d5c(0x175)],_0x225d5c(0x148),_0xdb1eb6[_0x225d5c(0x16f)]]['some'](_0x64f19=>_0x26284d[_0x225d5c(0xfd)][_0x225d5c(0x11b)](_0x64f19))){const _0x1839ea=document[_0x225d5c(0x11d)]('p');_0x1839ea[_0x225d5c(0x12c)](_0x2cf706[_0x225d5c(0x132)](await _0xdb1eb6['UPaxu'](getMessage,_0xdb1eb6[_0x225d5c(0x145)]),{'RETURN_DOM_FRAGMENT':!![],'ALLOWED_TAGS':['a'],'ADD_ATTR':[_0x225d5c(0x14e)]})),_0x5cf88b[_0x225d5c(0x138)](_0x1839ea);}_0x549ab8['getOrCreateInstance'](document[_0x225d5c(0x18d)](_0xdb1eb6[_0x225d5c(0x128)]))[_0x225d5c(0x130)]();return;}else _0x32e9ff=_0x3b2103[_0x225d5c(0xee)]||new _0x334996(_0x4c12cd)['host'],_0x50a69e=_0x2b1ce7['description']||'';}let _0x550c90,_0x318321;if(_0x1a4f1b)try{_0x318321=await _0xdb1eb6['uNJek'](obtainManifest,_0x1a4f1b,_0x178887),_0x550c90=!![];}catch(_0x664146){console[_0x225d5c(0x184)](_0x664146),_0x550c90=![];}else{if('MAHEK'===_0xdb1eb6[_0x225d5c(0x16b)])_0x550c90=![];else{this['setCustomValidity']('');return;}}if(!_0x550c90)document[_0x225d5c(0x18d)](_0xdb1eb6['FYldY'])['classList'][_0x225d5c(0x182)](_0xdb1eb6[_0x225d5c(0x17b)]);const _0x21de3d=await obtainSiteList(),_0x2174fe=await _0xdb1eb6['ZFYXo'](obtainProfileList);let _0x19eaa0,_0x284d1e;_0x550c90?(_0x19eaa0=_0x318321['name']||_0x318321['short_name']||new URL(_0x318321[_0x225d5c(0x19a)])[_0x225d5c(0x13a)],_0x284d1e=_0x318321[_0x225d5c(0x179)]||''):(_0x19eaa0=_0x1b8490[_0x225d5c(0xee)]||new URL(_0x178887)[_0x225d5c(0x13a)],_0x284d1e=_0x1b8490['description']||'');document[_0x225d5c(0x18d)](_0xdb1eb6[_0x225d5c(0x14c)])['setAttribute'](_0x225d5c(0x13c),_0x19eaa0),document[_0x225d5c(0x18d)](_0xdb1eb6[_0x225d5c(0x17d)])[_0x225d5c(0x17a)](_0xdb1eb6[_0x225d5c(0x10e)],_0x284d1e),document[_0x225d5c(0x18d)](_0x225d5c(0x186))[_0x225d5c(0x17a)](_0x225d5c(0x13c),_0x318321?.[_0x225d5c(0x18b)]||_0x178887);const _0x152a87=document['getElementById'](_0xdb1eb6[_0x225d5c(0x135)]);for(const _0x170525 of _0x318321?.[_0x225d5c(0x156)]||[])_0x152a87[_0x225d5c(0xe4)][_0x225d5c(0x15c)](_0x170525,_0x170525);const _0x36ee07=document['getElementById'](_0xdb1eb6[_0x225d5c(0x165)]);for(const _0x4a204a of _0x318321?.[_0x225d5c(0x17f)]||[])_0x36ee07[_0x225d5c(0xe4)][_0x225d5c(0x15c)](_0x4a204a,_0x4a204a);const _0x258db7=document[_0x225d5c(0x18d)](_0xdb1eb6['ZzSRH']);for(const _0x15e491 of Object[_0x225d5c(0xf9)](_0x2174fe))_0x258db7[_0x225d5c(0x182)](new Option(_0x15e491[_0x225d5c(0xee)]||_0x15e491['ulid'],_0x15e491[_0x225d5c(0x1a4)]));_0x258db7[_0x225d5c(0x182)](new Option(await getMessage(_0x225d5c(0x11c)),_0xdb1eb6[_0x225d5c(0x161)]));const _0x3e5bea=_0xdb1eb6[_0x225d5c(0xf8)](_0x2fbab9['os'],'linux')||_0x2fbab9['os']===_0xdb1eb6[_0x225d5c(0x194)]||_0x2fbab9['os']===_0x225d5c(0x1a1);_0x258db7['add'](new Option(await getMessage(_0x225d5c(0x129)),_0xdb1eb6[_0x225d5c(0x160)],_0x3e5bea,_0x3e5bea));let _0x168d49=_0x258db7[_0x225d5c(0x14a)];_0x258db7[_0x225d5c(0x185)](_0x225d5c(0x126),async function(_0xf94fde){const _0x1c1b42=_0x225d5c;if(this[_0x1c1b42(0x14a)]!==_0xdb1eb6['ZIPrP']){_0x168d49=this['value'];return;}document[_0x1c1b42(0x18d)](_0xdb1eb6['DnbCE'])['value']='',document[_0x1c1b42(0x18d)](_0xdb1eb6[_0x1c1b42(0x177)])[_0x1c1b42(0x14a)]='';const _0x35eceb=document[_0x1c1b42(0x18d)](_0xdb1eb6[_0x1c1b42(0x178)]);_0x35eceb[_0x1c1b42(0x15f)]=![],_0x35eceb[_0x1c1b42(0xf2)]=await _0xdb1eb6['DXKcP'](getMessage,_0x1c1b42(0x14d));const _0xf7ced9=(await browser[_0x1c1b42(0x192)][_0x1c1b42(0x120)][_0x1c1b42(0xe6)]([PREF_DEFAULT_PROFILE_TEMPLATE]))[PREF_DEFAULT_PROFILE_TEMPLATE];document[_0x1c1b42(0x18d)](_0x1c1b42(0xeb))[_0x1c1b42(0x14a)]=_0xf7ced9||null,_0x21d6a0[_0x1c1b42(0x16a)](document['getElementById'](_0xdb1eb6[_0x1c1b42(0x10d)]),{'backdrop':_0xdb1eb6[_0x1c1b42(0x1a3)],'keyboard':![]})['show'](),_0xf94fde[_0x1c1b42(0x101)]();});const _0x484c39=function(){const _0x45bfc6=_0x225d5c;_0x258db7[_0x45bfc6(0x14a)]=_0x168d49;};document[_0x225d5c(0x18d)](_0x225d5c(0x146))['addEventListener'](_0xdb1eb6[_0x225d5c(0x16d)],_0x484c39),document[_0x225d5c(0x18d)]('new-profile-cancel2')[_0x225d5c(0x185)]('click',_0x484c39),document[_0x225d5c(0x18d)](_0xdb1eb6[_0x225d5c(0x178)])[_0x225d5c(0x185)](_0x225d5c(0x118),async function(){const _0x382bea=_0x225d5c,_0x27944d=document[_0x382bea(0x18d)]('new-profile-name')[_0x382bea(0x14a)]||null,_0x1fa1da=document[_0x382bea(0x18d)](_0xdb1eb6['tttGp'])[_0x382bea(0x14a)]||null,_0x2e8e1f=document[_0x382bea(0x18d)](_0x382bea(0xeb))[_0x382bea(0x14a)]||null;this[_0x382bea(0x15f)]=!![],this[_0x382bea(0xf2)]=await _0xdb1eb6['NQwbl'](getMessage,_0x382bea(0x116));const _0x152475=await browser['runtime']['sendNativeMessage'](_0x382bea(0x169),{'cmd':_0xdb1eb6[_0x382bea(0x193)],'params':{'name':_0x27944d,'description':_0x1fa1da,'template':_0x2e8e1f}});if(_0x152475[_0x382bea(0xe5)]==='Error')throw new Error(_0x152475[_0x382bea(0x195)]);if(_0x152475['type']!==_0x382bea(0x19d))throw new Error(_0x382bea(0xf6)+_0x152475['type']);_0x549ab8[_0x382bea(0x16a)](document['getElementById']('error-toast'))[_0x382bea(0x11a)]();const _0xc5fc6b=_0x152475[_0x382bea(0x195)];_0x258db7[_0x382bea(0x182)](new Option(_0xdb1eb6[_0x382bea(0xe0)](_0x27944d,_0xc5fc6b),_0xc5fc6b,!![],!![]),_0xdb1eb6[_0x382bea(0x151)](_0x258db7['length'],0x2)),_0x258db7[_0x382bea(0x14a)]=_0xc5fc6b,_0x168d49=_0xc5fc6b,_0x21d6a0[_0x382bea(0x16a)](document['getElementById'](_0xdb1eb6[_0x382bea(0x10d)]),{'backdrop':_0xdb1eb6[_0x382bea(0x1a3)],'keyboard':![]})[_0x382bea(0x11a)]();}),_0xd384e3[_0x225d5c(0xf7)][_0x225d5c(0x182)](_0x225d5c(0xef)),_0x4c3f49['disabled']=![],_0x4c3f49['innerText']=await _0xdb1eb6[_0x225d5c(0x100)](getMessage,'buttonWebAppInstallDefault');const _0x52458b=async function(){const _0x5789cd=_0x225d5c,_0x1ccc7c=document['getElementById'](_0x5789cd(0xe2)),_0x575984=this[_0x5789cd(0x14a)]||this[_0x5789cd(0x1a6)](_0x5789cd(0x13c)),_0x133e89=Object[_0x5789cd(0xf9)](_0x21de3d)[_0x5789cd(0x15e)](_0x2ebc58=>_0x2ebc58[_0x5789cd(0xf5)][_0x5789cd(0xee)]||_0x2ebc58[_0x5789cd(0x181)]['name']||_0x2ebc58[_0x5789cd(0x181)][_0x5789cd(0x18f)]||new URL(_0x2ebc58[_0x5789cd(0x181)][_0x5789cd(0x19a)])['host']);if(_0x133e89[_0x5789cd(0x11b)](_0x575984)){this[_0x5789cd(0xed)](await _0xdb1eb6[_0x5789cd(0x152)](getMessage,_0x5789cd(0x188))),_0x1ccc7c[_0x5789cd(0xf2)]=this[_0x5789cd(0x14b)];return;}this[_0x5789cd(0xed)]('');},_0x3b15d1=document[_0x225d5c(0x18d)](_0xdb1eb6[_0x225d5c(0x14c)]);_0x3b15d1[_0x225d5c(0x185)](_0x225d5c(0x19c),_0x52458b),_0x52458b[_0x225d5c(0x173)](_0x3b15d1);const _0x21cb84=async function(){const _0x731c37=_0x225d5c,_0x365fb4=document['getElementById']('web-app-start-url-invalid');if(!this[_0x731c37(0x14a)]){if(_0xdb1eb6[_0x731c37(0x137)](_0xdb1eb6[_0x731c37(0x115)],'cIgpb')){this['setCustomValidity']('');return;}else{this[_0x731c37(0xed)]('');return;}}if(this['validity'][_0x731c37(0xfb)]){this['setCustomValidity'](await getMessage(_0xdb1eb6['SuIKL'])),_0x365fb4['innerText']=this['validationMessage'];return;}if(!_0x550c90){if(_0x731c37(0x15a)!==_0xdb1eb6[_0x731c37(0x139)]){this[_0x731c37(0xed)]('');return;}else _0x534c1b[_0x731c37(0x14a)]=_0x4ba3c8;}const _0x4e197c=new URL(this['value']),_0x217f1c=new URL(_0x318321[_0x731c37(0x19a)]);if(_0x4e197c['origin']!==_0x217f1c[_0x731c37(0x13f)]||!_0x4e197c[_0x731c37(0x159)][_0x731c37(0x143)](_0x217f1c[_0x731c37(0x159)])){this[_0x731c37(0xed)](await _0xdb1eb6[_0x731c37(0x15b)](getMessage,_0xdb1eb6[_0x731c37(0x180)])+'\x20'+_0x217f1c),_0x365fb4['innerText']=this[_0x731c37(0x14b)];return;}this[_0x731c37(0xed)]('');},_0x2378c2=document['getElementById'](_0xdb1eb6['kenrW']);_0x2378c2[_0x225d5c(0x185)]('input',_0x21cb84),_0x21cb84['call'](_0x2378c2);const _0x17fbc3=async function(){const _0x3becb7=_0x225d5c,_0x506cc0=document['getElementById'](_0x3becb7(0x155));if(!this[_0x3becb7(0x14a)]){this[_0x3becb7(0xed)]('');return;}if(this[_0x3becb7(0x1a0)]['typeMismatch']){if(_0xdb1eb6[_0x3becb7(0xfe)](_0xdb1eb6[_0x3becb7(0x131)],_0x3becb7(0xe7))){this[_0x3becb7(0xed)](await getMessage(_0xdb1eb6['FvUPf'])),_0x506cc0[_0x3becb7(0xf2)]=this[_0x3becb7(0x14b)];return;}else _0x2d5e8e=_0xf13bfc[_0x3becb7(0xee)]||_0x4190f2['short_name']||new _0x18a83a(_0x88fb85['scope'])[_0x3becb7(0x13a)],_0x1b8b20=_0x27480f[_0x3becb7(0x179)]||'';}this[_0x3becb7(0xed)]('');},_0x3c67bd=document[_0x225d5c(0x18d)](_0x225d5c(0x199));_0x3c67bd['addEventListener'](_0xdb1eb6[_0x225d5c(0x140)],_0x17fbc3),_0x17fbc3[_0x225d5c(0x173)](_0x3c67bd);const _0x34b93a=async function(){const _0x2f412c=_0x225d5c,_0x406cd9=document[_0x2f412c(0x18d)](_0xdb1eb6[_0x2f412c(0x157)]),_0x2a6e73=Object[_0x2f412c(0xf9)](_0x21de3d)['filter'](_0x313ee8=>_0x313ee8[_0x2f412c(0xf5)][_0x2f412c(0x197)]===_0x1a4f1b),_0x519313=_0x2a6e73[_0x2f412c(0x15e)](_0x5bba86=>_0x5bba86[_0x2f412c(0x166)]);if(_0x519313[_0x2f412c(0x11b)](this[_0x2f412c(0x14a)])){this[_0x2f412c(0xed)](await _0xdb1eb6[_0x2f412c(0xf1)](getMessage,_0x2f412c(0x109))),_0x406cd9[_0x2f412c(0xf2)]=this['validationMessage'];return;}this[_0x2f412c(0xed)]('');},_0x31458e=document[_0x225d5c(0x18d)](_0xdb1eb6[_0x225d5c(0xe8)]);_0x31458e[_0x225d5c(0x185)](_0xdb1eb6[_0x225d5c(0x140)],_0x34b93a),_0x34b93a[_0x225d5c(0x173)](_0x31458e),_0x4c3f49['onclick']=async _0x3149c0=>{const _0x2aae62=_0x225d5c;_0x3149c0[_0x2aae62(0x101)](),_0x3149c0[_0x2aae62(0x104)]();if(!_0xd384e3['checkValidity']())return;_0x4c3f49[_0x2aae62(0x15f)]=!![],_0x4c3f49[_0x2aae62(0xf2)]=await _0xdb1eb6[_0x2aae62(0x15b)](getMessage,_0x2aae62(0xea));if(!document[_0x2aae62(0x18d)](_0x2aae62(0xfc))[_0x2aae62(0x110)])_0x550c90=![];const _0x21ed78=document[_0x2aae62(0x18d)]('web-app-launch-now')[_0x2aae62(0x110)]||![],_0x458835=document['getElementById']('web-app-start-url')[_0x2aae62(0x14a)]||null,_0x5ac9e9=document[_0x2aae62(0x18d)](_0xdb1eb6['oWPmC'])[_0x2aae62(0x14a)]||null;let _0x2a624b=document[_0x2aae62(0x18d)](_0xdb1eb6[_0x2aae62(0xe8)])[_0x2aae62(0x14a)]||null;const _0x42ee91=document[_0x2aae62(0x18d)](_0x2aae62(0x108))['value']||null,_0x2977b0=document[_0x2aae62(0x18d)](_0xdb1eb6[_0x2aae62(0x17d)])[_0x2aae62(0x14a)]||null,_0x276ad2=[...document['getElementById'](_0xdb1eb6[_0x2aae62(0x135)])[_0x2aae62(0x149)]][_0x2aae62(0x15e)](_0x3e5746=>_0x3e5746[_0x2aae62(0x14a)]),_0x51e078=_0x318321?.['categories']||[],_0x360243=_0x276ad2['toString']()!==_0x51e078['toString']()?_0x276ad2:null,_0x22e91a=[...document['getElementById']('web-app-keywords')[_0x2aae62(0x149)]]['map'](_0x35c5f7=>_0x35c5f7[_0x2aae62(0x14a)]),_0x2bbefb=_0x318321?.[_0x2aae62(0x17f)]||[],_0x48c73a=_0x22e91a[_0x2aae62(0x196)]()!==_0x2bbefb[_0x2aae62(0x196)]()?_0x22e91a:null;!_0x550c90&&(_0x318321={'start_url':_0x458835||_0x178887,'name':document[_0x2aae62(0x18d)](_0xdb1eb6[_0x2aae62(0x14c)])[_0x2aae62(0x1a6)](_0x2aae62(0x13c))||_0x1b8490[_0x2aae62(0xee)],'description':document['getElementById'](_0xdb1eb6[_0x2aae62(0x17d)])[_0x2aae62(0x1a6)](_0x2aae62(0x13c))||_0x1b8490[_0x2aae62(0x179)],'icons':_0x1b8490[_0x2aae62(0x12b)]},_0x1a4f1b=_0x2aae62(0x190),_0x1a4f1b+=fromByteArray(new TextEncoder()['encode'](JSON[_0x2aae62(0x11f)](_0x318321))));if(_0xdb1eb6['SKpEG'](_0x2a624b,_0xdb1eb6[_0x2aae62(0x160)])){const _0x5548b9=_0x42ee91||_0x318321[_0x2aae62(0xee)]||_0x318321['short_name']||new URL(_0x318321[_0x2aae62(0x19a)])[_0x2aae62(0x13a)],_0x4bf53d=(await browser['storage'][_0x2aae62(0x120)]['get']([PREF_DEFAULT_PROFILE_TEMPLATE]))[PREF_DEFAULT_PROFILE_TEMPLATE],_0x41ece0=await browser[_0x2aae62(0x13b)][_0x2aae62(0x14f)](_0xdb1eb6[_0x2aae62(0xe9)],{'cmd':'CreateProfile','params':{'name':_0xdb1eb6[_0x2aae62(0xec)](_0x5548b9,null),'template':_0x4bf53d||null}});if(_0xdb1eb6['dhEAw'](_0x41ece0[_0x2aae62(0xe5)],_0xdb1eb6[_0x2aae62(0x19e)]))throw new Error(_0x41ece0[_0x2aae62(0x195)]);if(_0x41ece0[_0x2aae62(0xe5)]!==_0x2aae62(0x19d))throw new Error(_0x2aae62(0xf6)+_0x41ece0[_0x2aae62(0xe5)]);_0x2a624b=_0x41ece0[_0x2aae62(0x195)];}const _0x2084c6=await browser['runtime']['sendNativeMessage'](_0xdb1eb6[_0x2aae62(0xe9)],{'cmd':_0x2aae62(0x13e),'params':{'manifest_url':_0x1a4f1b,'document_url':_0x178887,'start_url':_0x458835,'icon_url':_0x5ac9e9,'profile':_0x2a624b,'name':_0x42ee91,'description':_0x2977b0,'categories':_0x360243,'keywords':_0x48c73a,'launch_now':_0x21ed78}});if(_0x2084c6['type']===_0x2aae62(0x176))throw new Error(_0x2084c6[_0x2aae62(0x195)]);if(_0xdb1eb6[_0x2aae62(0x141)](_0x2084c6[_0x2aae62(0xe5)],'SiteInstalled'))throw new Error(_0x2aae62(0xf6)+_0x2084c6[_0x2aae62(0xe5)]);_0x549ab8[_0x2aae62(0x16a)](document['getElementById'](_0xdb1eb6[_0x2aae62(0x128)]))[_0x2aae62(0x11a)](),_0x4c3f49[_0x2aae62(0x15f)]=!![],_0x4c3f49[_0x2aae62(0xf2)]=await getMessage(_0x2aae62(0x19f));const _0x140d33=(await browser[_0x2aae62(0x163)][_0x2aae62(0x18e)]({'active':!![],'currentWindow':!![]}))[0x0];await browser[_0x2aae62(0x167)]['setIcon']({'tabId':_0x140d33['id'],'path':'/images/page-action-launch.svg'}),browser['pageAction'][_0x2aae62(0x18c)]({'tabId':_0x140d33['id'],'title':browser[_0x2aae62(0xdf)][_0x2aae62(0x171)](_0xdb1eb6['QYxAY'])}),browser[_0x2aae62(0x167)][_0x2aae62(0x142)]({'tabId':_0x140d33['id'],'popup':_0x2aae62(0x12d)}),_0xdb1eb6[_0x2aae62(0x122)](setTimeout,async()=>{const _0x24faec=_0x2aae62;window[_0x24faec(0x168)]();},0x1388);};}setPopupSize(),initializeForm();