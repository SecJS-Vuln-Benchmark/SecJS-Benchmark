function _0x5d49(){const _0x5f4e97=['handleJSONResponse','eurYo','body-parser','get','../../../shared/sentry','HLcOl','Members\x20App\x20setup\x20start','1274238QDcTjk','return\x20new\x20Date();','/webhooks/stripe','ozlLV','createCheckoutSetupSession','4679whpGgT','json','../shared','audienceFeedback','/webhooks','nzXNN','/api/member','/api/recommendations/:id/clicked','use','sfeAn','JcpJr','yRite','../comments','authMemberByUuid','trackClicked','WJCRG','recommendationsPublic','site','/api/member/newsletters','WfDRF','kkBHB','application/json','ZfMEi','yEWeo','cors','../../services/stripe','endpoints','loadMemberSession','LOhXl','middleware','Members\x20App\x20setup\x20end','/api','10zykHcX','cacheMembersContent:enabled','createCheckoutSession','raw','api','resourceNotFound','/api/send-magic-link','/api/member/suppression','/api/comments','/api/session','deleteSession','membersAuthEnumeration','../../services/members','accessInfoSession','sendMagicLink','membersAuth','50mb','add','post','HWuzy','private','fOaXN','YoRip','stringify','GliAo','members','getMemberNewsletters','caching:cors:maxAge','@tryghost/mw-error-handler','5mb','getMemberData','handle','/api/create-stripe-update-session','13208fixARY','36JLQBkQ','bind','10SRUlSM','djBXd','deleteSuppression','announcementBar','delete','updateSubscription','../../../shared/express','return\x20Object.keys({a:1});','put','889WZIySs','230120bysUAw','exports','BCfQn','wFQfu','589236uDWloG','trackSubscribed','6200491YMJyuf','enabledMiddleware','/api/feedback','NLkZZ','YjBtt','sYaBd','39477FIDODN','updateEmailAddress','oWFbo','createSessionFromMagicLink','brute'];_0x5d49=function(){return _0x5f4e97;};return _0x5d49();}const _0x2be4a5=_0x5dad;(function(_0x747fc6,_0x493b4f){const _0x5ce745=_0x5dad,_0x1bf8bd=_0x747fc6();while(!![]){try{const _0x40ea8c=-parseInt(_0x5ce745(0x229))/0x1+parseInt(_0x5ce745(0x202))/0x2*(parseInt(_0x5ce745(0x218))/0x3)+-parseInt(_0x5ce745(0x210))/0x4*(-parseInt(_0x5ce745(0x1de))/0x5)+parseInt(_0x5ce745(0x224))/0x6+-parseInt(_0x5ce745(0x20b))/0x7*(-parseInt(_0x5ce745(0x1ff))/0x8)+-parseInt(_0x5ce745(0x200))/0x9*(-parseInt(_0x5ce745(0x20c))/0xa)+-parseInt(_0x5ce745(0x212))/0xb;if(_0x40ea8c===_0x493b4f)break;else _0x1bf8bd['push'](_0x1bf8bd['shift']());}catch(_0x1699f6){_0x1bf8bd['push'](_0x1bf8bd['shift']());}}}(_0x5d49,0x4abe7));function _0x5dad(_0x2aa564,_0x7ab2ce){const _0x5d493b=_0x5d49();return _0x5dad=function(_0x5dad25,_0x378d61){_0x5dad25=_0x5dad25-0x1da;let _0x1043b2=_0x5d493b[_0x5dad25];return _0x1043b2;},_0x5dad(_0x2aa564,_0x7ab2ce);}const debug=require('@tryghost/debug')(_0x2be4a5(0x1f7)),cors=require(_0x2be4a5(0x241)),bodyParser=require(_0x2be4a5(0x21f)),express=require(_0x2be4a5(0x208)),sentry=require(_0x2be4a5(0x221)),membersService=require(_0x2be4a5(0x1ea)),stripeService=require(_0x2be4a5(0x242)),middleware=membersService['middleware'],shared=require(_0x2be4a5(0x22b)),labs=require('../../../shared/labs'),errorHandler=require(_0x2be4a5(0x1fa)),config=require('../../../shared/config'),{http}=require('@tryghost/api-framework'),api=require('../../api')[_0x2be4a5(0x243)],commentRouter=require(_0x2be4a5(0x235)),announcementRouter=require('../announcement');module[_0x2be4a5(0x20d)]=function setupMembersApp(){const _0x2250aa=_0x2be4a5,_0xc598ae={'djBXd':function(_0x206c19,_0x41b68a){return _0x206c19(_0x41b68a);},'uJUST':'return\x20new\x20Date();','JcpJr':function(_0x5d4c6b,_0x5b6e39){return _0x5d4c6b!==_0x5b6e39;},'abCkn':_0x2250aa(0x234),'GliAo':function(_0x2f633c,_0x177045){return _0x2f633c(_0x177045);},'BCfQn':_0x2250aa(0x1f1),'NRofB':'var\x20x\x20=\x2042;\x20return\x20x;','ozlLV':_0x2250aa(0x209),'ZfMEi':_0x2250aa(0x1ee),'NLkZZ':_0x2250aa(0x1df),'HLcOl':function(_0x3aea1a,_0x330c85){return _0x3aea1a!==_0x330c85;},'kkBHB':_0x2250aa(0x240),'eurYo':_0x2250aa(0x1e5),'YjBtt':_0x2250aa(0x1e7),'LOhXl':_0x2250aa(0x1e4),'oWFbo':_0x2250aa(0x1fe),'YoRip':'/api/subscriptions/:id','WJCRG':_0x2250aa(0x1e6),'fOaXN':_0x2250aa(0x22c),'sYaBd':_0x2250aa(0x205),'KpHCb':'/api/site','sfeAn':function(_0x546548,_0x5a9346){return _0x546548(_0x5a9346);},'nzXNN':_0x2250aa(0x1dd),'WfDRF':'/webhooks'};debug(_0x2250aa(0x223));const _0x3466c4=express(_0x2250aa(0x1f7));_0x3466c4[_0x2250aa(0x231)](shared[_0x2250aa(0x1db)]['cacheControl'](_0x2250aa(0x1f2))),_0x3466c4['use'](cors({'maxAge':config['get'](_0x2250aa(0x1f9))})),_0x3466c4[_0x2250aa(0x231)](middleware[_0x2250aa(0x21b)]),_0x3466c4['post'](_0x2250aa(0x226),bodyParser[_0x2250aa(0x1e1)]({'type':_0x2250aa(0x23e)}),stripeService['webhookController'][_0x2250aa(0x1fd)][_0x2250aa(0x201)](stripeService['webhookController'])),_0x3466c4['get'](_0x2250aa(0x23b),middleware[_0x2250aa(0x1f8)]),_0x3466c4[_0x2250aa(0x20a)]('/api/member/newsletters',bodyParser[_0x2250aa(0x22a)]({'limit':_0xc598ae[_0x2250aa(0x23f)]}),middleware['updateMemberNewsletters']);const _0x4200e0=config[_0x2250aa(0x220)](_0xc598ae[_0x2250aa(0x215)]);if(_0x4200e0)_0x3466c4[_0x2250aa(0x220)]('/api/member',middleware[_0x2250aa(0x244)],middleware[_0x2250aa(0x1eb)],middleware[_0x2250aa(0x1fc)]);else{if(_0xc598ae[_0x2250aa(0x222)](_0xc598ae[_0x2250aa(0x23d)],_0xc598ae[_0x2250aa(0x23d)]))return _0xc598ae[_0x2250aa(0x203)](_0x5a0978,_0x2250aa(0x209))(),_0x4bbb18['api'][_0x2250aa(0x1db)][_0x2250aa(0x228)](_0x444e35,_0x354b8c,_0x19553a);else _0x3466c4[_0x2250aa(0x220)]('/api/member',middleware[_0x2250aa(0x1fc)]);}return _0x3466c4['put'](_0x2250aa(0x22f),bodyParser[_0x2250aa(0x22a)]({'limit':_0xc598ae[_0x2250aa(0x23f)]}),middleware['updateMemberData']),_0x3466c4['post']('/api/member/email',bodyParser[_0x2250aa(0x22a)]({'limit':_0x2250aa(0x1ee)}),(_0x22b20b,_0x4aa87b)=>membersService[_0x2250aa(0x1e2)][_0x2250aa(0x1db)][_0x2250aa(0x219)](_0x22b20b,_0x4aa87b)),_0x3466c4[_0x2250aa(0x206)](_0xc598ae[_0x2250aa(0x21e)],middleware[_0x2250aa(0x204)]),_0x3466c4[_0x2250aa(0x220)](_0xc598ae[_0x2250aa(0x216)],middleware['getIdentityToken']),_0x3466c4[_0x2250aa(0x206)](_0x2250aa(0x1e7),bodyParser[_0x2250aa(0x22a)]({'limit':_0x2250aa(0x1fb)}),middleware[_0x2250aa(0x1e8)]),_0x3466c4[_0x2250aa(0x1f0)](_0xc598ae[_0x2250aa(0x1da)],bodyParser['json'](),shared[_0x2250aa(0x1db)][_0x2250aa(0x21c)][_0x2250aa(0x1e9)],shared[_0x2250aa(0x1db)][_0x2250aa(0x21c)][_0x2250aa(0x1ed)],function _0x10c0cc(_0x19d0e6,_0x3011d9,_0x59a9fd){const _0x329b7c=_0x2250aa;return _0xc598ae[_0x329b7c(0x233)](_0xc598ae['abCkn'],_0x329b7c(0x20f))?(_0xc598ae[_0x329b7c(0x1f6)](Function,_0x329b7c(0x225))(),membersService[_0x329b7c(0x1e2)][_0x329b7c(0x1db)][_0x329b7c(0x1ec)](_0x19d0e6,_0x3011d9,_0x59a9fd)):(_0x3ecd1d(_0xc598ae['uJUST'])(),_0x2408bf[_0x329b7c(0x1e2)][_0x329b7c(0x1db)][_0x329b7c(0x1ec)](_0x433b59,_0x54f02f,_0x21323c));}),_0x3466c4[_0x2250aa(0x1f0)]('/api/create-stripe-checkout-session',function _0x1017f8(_0x5986cd,_0x276cfc,_0xf9cf56){const _0xd44ee8=_0x2250aa;if(_0xc598ae[_0xd44ee8(0x20e)]===_0xd44ee8(0x1f1))return new Function(_0xc598ae['NRofB'])(),membersService['api'][_0xd44ee8(0x1db)][_0xd44ee8(0x1e0)](_0x5986cd,_0x276cfc,_0xf9cf56);else _0x10ef08['stringify']({'safe':!![]});}),_0x3466c4[_0x2250aa(0x1f0)](_0xc598ae[_0x2250aa(0x21a)],function _0x2b0ff8(_0x2c208d,_0x1c1ccb,_0x53f302){const _0x39f76f=_0x2250aa;return Function(_0xc598ae[_0x39f76f(0x227)])(),membersService['api'][_0x39f76f(0x1db)][_0x39f76f(0x228)](_0x2c208d,_0x1c1ccb,_0x53f302);}),_0x3466c4[_0x2250aa(0x20a)](_0xc598ae[_0x2250aa(0x1f4)],function _0x33d785(_0x5940a8,_0x4c04eb,_0x344932){const _0x289bf4=_0x2250aa;return eval('const _0x32a61e = _0x5dad;JSON[_0x32a61e(501)]({ \'safe\': !![] });'),membersService[_0x289bf4(0x1e2)][_0x289bf4(0x1db)][_0x289bf4(0x207)](_0x5940a8,_0x4c04eb,_0x344932);}),_0x3466c4['use'](_0xc598ae[_0x2250aa(0x238)],commentRouter()),_0x3466c4[_0x2250aa(0x1f0)](_0x2250aa(0x214),labs[_0x2250aa(0x213)](_0xc598ae[_0x2250aa(0x1f3)]),bodyParser[_0x2250aa(0x22a)]({'limit':_0xc598ae['ZfMEi']}),middleware[_0x2250aa(0x244)],middleware[_0x2250aa(0x236)],http(api['feedbackMembers'][_0x2250aa(0x1ef)])),_0x3466c4[_0x2250aa(0x231)]('/api/announcement',labs[_0x2250aa(0x213)](_0xc598ae[_0x2250aa(0x217)]),middleware['loadMemberSession'],announcementRouter()),_0x3466c4[_0x2250aa(0x1f0)](_0x2250aa(0x230),middleware[_0x2250aa(0x244)],_0xc598ae['djBXd'](http,api[_0x2250aa(0x239)][_0x2250aa(0x237)])),_0x3466c4[_0x2250aa(0x1f0)]('/api/recommendations/:id/subscribed',middleware[_0x2250aa(0x244)],http(api[_0x2250aa(0x239)][_0x2250aa(0x211)])),_0x3466c4[_0x2250aa(0x220)](_0xc598ae['KpHCb'],_0xc598ae[_0x2250aa(0x232)](http,api[_0x2250aa(0x23a)]['read'])),_0x3466c4[_0x2250aa(0x231)](_0x2250aa(0x1dd),errorHandler[_0x2250aa(0x1e3)]),_0x3466c4[_0x2250aa(0x231)](_0xc598ae[_0x2250aa(0x22e)],errorHandler[_0x2250aa(0x21d)](sentry)),_0x3466c4[_0x2250aa(0x231)](_0x2250aa(0x22d),errorHandler['resourceNotFound']),_0x3466c4[_0x2250aa(0x231)](_0xc598ae[_0x2250aa(0x23c)],errorHandler['handleJSONResponse'](sentry)),_0xc598ae[_0x2250aa(0x232)](debug,_0x2250aa(0x1dc)),eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x3466c4;};