'use strict';function _0x2996(){const _0x5b565d=['map','Final\x20memory\x20slope:\x20','411663hwUkHK','cause','min','node:assert','pNrvG','3aHKPKX','DEPTH_ZERO_SELF_SIGNED_CERT','15584571wTEDac','fQIwm','ZCthq','undefined','XIXSf','Average\x20growth\x20rate:\x20','cert.pem','Certificate\x20Error','after','filter','heapUsed','writeHead','ZPKBz','186YDiYDX','log','Growth\x20rates:\x20','slice','test\x20response','ssFuC','664431IHyfHr','port','WOESR','Qxpjy','memoryUsage','end','address','Upffv','complete','eVBzO','text','all','CERT_SIGNATURE_FAILURE','Growth\x20from\x20baseline:\x20','reduce','9130936hmbAEi','push',':\x20Heap:\x20','Final\x20growth\x20from\x20baseline:\x20','Memory\x20usage\x20has\x20stabilized','timeout','readFileSync','round','CjzuF','fSDOv','key.pem','bEznZ','Completed\x20','VMlvW','izCNl','YoFOw','1064306FLyNEX','fail','IcPtC','MEUJb','length','wITFT','no\x20memory\x20leak\x20with\x20TLS\x20certificate\x20errors','gc\x20is\x20not\x20available.\x20Run\x20with\x20\x27--expose-gc\x27.','node:https','RChyi','ZgBMl','DPokR','fixtures','YkbAS','Cnthh','Excessive\x20memory\x20growth\x20of\x20','node:path','Memory\x20leak\x20detected:\x20','code','ExvJv','41095660zPSeUG','7414290cXKsgM','@matteo.collina/tspl','toFixed','\x20bytes\x20per\x20request','Yaaza','join','createServer','8bpQNiW','status','Memory\x20still\x20growing\x20rapidly\x20at\x20','aSAUM','./utils/node-http','ERR_TLS_CERT_ALTNAME_INVALID','/request-','ceil'];_0x2996=function(){return _0x5b565d;};return _0x2996();}const _0x392af0=_0x1681;(function(_0x3b7a51,_0x1e5742){const _0x414107=_0x1681,_0x18ba6f=_0x3b7a51();while(!![]){try{const _0x1300c6=parseInt(_0x414107(0x23e))/0x1*(-parseInt(_0x414107(0x213))/0x2)+parseInt(_0x414107(0x1f4))/0x3*(parseInt(_0x414107(0x22f))/0x4)+parseInt(_0x414107(0x228))/0x5+parseInt(_0x414107(0x1ee))/0x6*(parseInt(_0x414107(0x239))/0x7)+parseInt(_0x414107(0x203))/0x8+parseInt(_0x414107(0x240))/0x9+-parseInt(_0x414107(0x227))/0xa;if(_0x1300c6===_0x1e5742)break;else _0x18ba6f['push'](_0x18ba6f['shift']());}catch(_0x4eb459){_0x18ba6f['push'](_0x18ba6f['shift']());}}}(_0x2996,0xdf98c));function _0x1681(_0x59f1d9,_0x4600a6){const _0x299617=_0x2996();return _0x1681=function(_0x1681d5,_0xf9cbc9){_0x1681d5=_0x1681d5-0x1e3;let _0x1dee6b=_0x299617[_0x1681d5];return _0x1dee6b;},_0x1681(_0x59f1d9,_0x4600a6);}const {test}=require('node:test'),assert=require(_0x392af0(0x23c)),{tspl}=require(_0x392af0(0x229)),{fetch}=require('..'),https=require(_0x392af0(0x21b)),fs=require('node:fs'),path=require(_0x392af0(0x223)),{closeServerAsPromise}=require(_0x392af0(0x233)),hasGC=typeof global['gc']!==_0x392af0(0x1e4);test(_0x392af0(0x219),{'timeout':0x4e20},async _0x50b0e5=>{const _0x99ca98=_0x392af0,_0x5491d0={'jUhki':_0x99ca98(0x1f2),'Qxpjy':function(_0x1ada0a,_0x454dfc,_0x3db3b4){return _0x1ada0a(_0x454dfc,_0x3db3b4);},'XIXSf':function(_0x1a7cbb,_0x17a9ae){return _0x1a7cbb===_0x17a9ae;},'XDBZw':_0x99ca98(0x1e8),'VMlvW':function(_0x90bcf7,_0x4f37d1){return _0x90bcf7-_0x4f37d1;},'ssFuC':function(_0x5ef310,_0x513ed2){return _0x5ef310/_0x513ed2;},'SAvaw':function(_0x456050,_0x4ab2aa){return _0x456050!==_0x4ab2aa;},'Cnthh':_0x99ca98(0x212),'YkbAS':function(_0x3dd0d4,_0xef3a0d){return _0x3dd0d4<_0xef3a0d;},'MEUJb':function(_0x1805a1,_0x334570){return _0x1805a1%_0x334570;},'RChyi':function(_0xb70eb7,_0x43acde){return _0xb70eb7>=_0x43acde;},'wITFT':_0x99ca98(0x1ed),'pNrvG':function(_0x501d5c,_0x5435a3){return _0x501d5c-_0x5435a3;},'fSDOv':function(_0x8afe32,_0x5a9929){return _0x8afe32*_0x5a9929;},'ZgBMl':function(_0x34c285,_0x50c9ff){return _0x34c285>_0x50c9ff;},'eVBzO':function(_0x6e0829,_0x3559f1){return _0x6e0829/_0x3559f1;},'WOESR':function(_0x11fab6,_0x55c10){return _0x11fab6-_0x55c10;},'IcPtC':function(_0x554822,_0x398ff7){return _0x554822<_0x398ff7;},'Upffv':'Yaaza','ExvJv':'pIHNX','izCNl':function(_0x3121c0,_0x3f84f0){return _0x3121c0===_0x3f84f0;},'CjzuF':_0x99ca98(0x207),'bEznZ':function(_0x15cd15,_0x175157){return _0x15cd15*_0x175157;},'DPokR':function(_0x22800a,_0x476dcd){return _0x22800a*_0x476dcd;},'iTQKE':_0x99ca98(0x21a),'ZCthq':_0x99ca98(0x20d),'gTARY':_0x99ca98(0x21f),'aSAUM':_0x99ca98(0x1e7)};if(!hasGC)throw new Error(_0x5491d0['iTQKE']);const {ok:_0x372c01}=tspl(_0x50b0e5,{'plan':0x1}),_0x123349={'key':fs[_0x99ca98(0x209)](path[_0x99ca98(0x22d)](__dirname,'fixtures',_0x5491d0[_0x99ca98(0x1e3)])),'cert':fs[_0x99ca98(0x209)](path[_0x99ca98(0x22d)](__dirname,_0x5491d0['gTARY'],_0x5491d0[_0x99ca98(0x232)]))},_0x1f2613=https[_0x99ca98(0x22e)](_0x123349,(_0x5416cf,_0x1db492)=>{const _0x3a5a76=_0x99ca98;_0x1db492[_0x3a5a76(0x1ec)](0xc8),_0x1db492[_0x3a5a76(0x1f9)](_0x5491d0['jUhki']);});await new Promise(_0x3f8c18=>_0x1f2613['listen'](0x0,_0x3f8c18));const _0x1fb992='https://localhost:'+_0x1f2613[_0x99ca98(0x1fa)]()[_0x99ca98(0x1f5)];_0x50b0e5[_0x99ca98(0x1e9)](closeServerAsPromise(_0x1f2613));async function _0x41626b(_0x527643){const _0x22b00d=_0x99ca98;try{const _0x1113cb=await _0x5491d0[_0x22b00d(0x1f7)](fetch,_0x1fb992+_0x22b00d(0x235)+_0x527643,{'signal':AbortSignal[_0x22b00d(0x208)](0x7d0)}),_0x20dc59=await _0x1113cb[_0x22b00d(0x1fe)]();return{'status':_0x1113cb[_0x22b00d(0x230)],'text':_0x20dc59};}catch(_0x3cc897){if(_0x5491d0[_0x22b00d(0x1e5)](_0x3cc897?.[_0x22b00d(0x23a)]?.[_0x22b00d(0x225)],_0x22b00d(0x200))||_0x5491d0[_0x22b00d(0x1e5)](_0x3cc897?.[_0x22b00d(0x23a)]?.[_0x22b00d(0x225)],_0x22b00d(0x23f))||_0x3cc897?.[_0x22b00d(0x23a)]?.[_0x22b00d(0x225)]===_0x22b00d(0x234))return{'status':0x20c,'text':_0x5491d0['XDBZw']};return{'status':0x1f4,'text':_0x3cc897['message']};}}let _0x2a6a07=0x0;const _0x3aab21=0x190;let _0x10fd28=[],_0x3d0f89=0x0;async function _0x31ccc2(_0x897c5d,_0x5cb14b){const _0xa3cd22=_0x99ca98;if(_0x5491d0['SAvaw'](_0x5491d0[_0xa3cd22(0x221)],_0x5491d0[_0xa3cd22(0x221)]))_0xbc515b=_0x3da60b[_0xa3cd22(0x1eb)];else{const _0x1128a7=[],_0x57cc0c=Math[_0xa3cd22(0x23b)](_0x897c5d+_0x5cb14b,_0x3aab21);for(let _0x81918=_0x897c5d;_0x5491d0[_0xa3cd22(0x220)](_0x81918,_0x57cc0c);_0x81918++){_0x1128a7['push'](_0x41626b(_0x81918));}await Promise[_0xa3cd22(0x1ff)](_0x1128a7),_0x2a6a07+=_0x1128a7[_0xa3cd22(0x217)];if(_0x5491d0['XIXSf'](_0x5491d0[_0xa3cd22(0x216)](_0x2a6a07,0x32),0x0)||_0x5491d0[_0xa3cd22(0x1e5)](_0x2a6a07,_0x57cc0c)){global['gc'](),await new Promise(_0x3a07a1=>setTimeout(_0x3a07a1,0x32)),global['gc']();const _0x19839a=process[_0xa3cd22(0x1f8)]();_0x5491d0['XIXSf'](_0x10fd28['length'],0x0)&&(_0x3d0f89=_0x19839a['heapUsed']);_0x10fd28[_0xa3cd22(0x204)]({'complete':_0x2a6a07,'heapUsed':_0x19839a[_0xa3cd22(0x1eb)]}),console['log'](_0xa3cd22(0x20f)+_0x2a6a07+'/'+_0x3aab21+_0xa3cd22(0x205)+Math[_0xa3cd22(0x20a)](_0x5491d0[_0xa3cd22(0x1f3)](_0x19839a[_0xa3cd22(0x1eb)]/0x400,0x400))+'MB');if(_0x5491d0[_0xa3cd22(0x21c)](_0x10fd28[_0xa3cd22(0x217)],0x4)){const _0x18d436=_0x1207ab();if(_0x18d436){if(_0x5491d0['XIXSf'](_0x5491d0['wITFT'],_0x5491d0[_0xa3cd22(0x218)]))return!![];else{const _0x2f3eb1=_0x1ba368[_0x5491d0[_0xa3cd22(0x210)](_0x23081,0x1)][_0xa3cd22(0x1eb)],_0x253c91=_0x3d87f5[_0x2350d5]['heapUsed'];_0x560854['push'](_0x5491d0[_0xa3cd22(0x1f3)](_0x5491d0[_0xa3cd22(0x210)](_0x253c91,_0x2f3eb1),_0x2f3eb1));}}}}return![];}}async function _0x1f9f88(){const _0x83a7c7=_0x99ca98,_0x2648fc=0x32;for(let _0x14d814=0x0;_0x5491d0[_0x83a7c7(0x215)](_0x14d814,_0x3aab21);_0x14d814+=_0x2648fc){if(_0x5491d0[_0x83a7c7(0x1fb)]===_0x83a7c7(0x22c)){const _0x3166d3=await _0x31ccc2(_0x14d814,_0x2648fc);if(_0x3166d3){if(_0x5491d0[_0x83a7c7(0x226)]===_0x5491d0[_0x83a7c7(0x226)]){assert['fail']('Memory\x20leak\x20detected:\x20heap\x20usage\x20is\x20consistently\x20increasing\x20at\x20a\x20significant\x20rate');return;}else{const _0x2d2432=[];for(let _0x5ed946=0x1;_0x5491d0['YkbAS'](_0x5ed946,_0x54ad36[_0x83a7c7(0x217)]);_0x5ed946++){const _0x1ffc19=_0x5485a5[_0x5491d0[_0x83a7c7(0x23d)](_0x5ed946,0x1)][_0x83a7c7(0x1eb)],_0x4e145f=_0x33092d[_0x5ed946][_0x83a7c7(0x1eb)];_0x2d2432[_0x83a7c7(0x204)](_0x5491d0[_0x83a7c7(0x23d)](_0x4e145f,_0x1ffc19)/_0x1ffc19);}const _0x220593=(_0x3bb911[_0x5491d0['pNrvG'](_0x13f4d9[_0x83a7c7(0x217)],0x1)]['heapUsed']-_0x48f245)/_0x3e9e3c,_0x41aac8=_0x2d2432[_0x83a7c7(0x202)]((_0x42ed4f,_0x5d00f6)=>_0x42ed4f+_0x5d00f6,0x0)/_0x2d2432[_0x83a7c7(0x217)];_0x57d167[_0x83a7c7(0x1ef)](_0x83a7c7(0x201)+_0x5491d0[_0x83a7c7(0x20c)](_0x220593,0x64)[_0x83a7c7(0x22a)](0x2)+'%'),_0x11d746[_0x83a7c7(0x1ef)](_0x83a7c7(0x1e6)+(_0x41aac8*0x64)['toFixed'](0x2)+'%'),_0x19c403[_0x83a7c7(0x1ef)](_0x83a7c7(0x1f0)+_0x2d2432[_0x83a7c7(0x237)](_0x275ac2=>(_0x275ac2*0x64)[_0x83a7c7(0x22a)](0x2)+'%')['join'](',\x20'));const _0x5374aa=_0x2d2432[_0x83a7c7(0x1ea)](_0x42c78d=>_0x42c78d>0.01)[_0x83a7c7(0x217)];return _0x5491d0[_0x83a7c7(0x21c)](_0x5374aa,_0xf9ddff[_0x83a7c7(0x236)](_0x2d2432['length']*0.75))&&_0x41aac8>0.02&&_0x5491d0[_0x83a7c7(0x21d)](_0x220593,0.2);}}if(_0x10fd28[_0x83a7c7(0x217)]>=0x7||_0x5491d0[_0x83a7c7(0x21c)](_0x2a6a07,0x15e)){if(_0x5491d0[_0x83a7c7(0x211)](_0x83a7c7(0x241),'BBGYV'))_0x4e6304['fail'](_0x83a7c7(0x224)+_0x5f16f2);else break;}}else{if(_0x45ba97[_0x83a7c7(0x217)]<0x4)return![];const _0x1ad742=_0x5491d0['eVBzO'](_0x16f13d[_0x23053d[_0x83a7c7(0x217)]-0x1]['heapUsed']-_0x2cd9c9,_0x41a888);_0x497401[_0x83a7c7(0x1ef)](_0x83a7c7(0x206)+(_0x1ad742*0x64)[_0x83a7c7(0x22a)](0x2)+'%');const _0x831500=_0x44d6f4[_0x83a7c7(0x1f1)](-0x3),_0x578f6a=_0x5491d0[_0x83a7c7(0x1f6)](_0x831500[0x2][_0x83a7c7(0x1eb)],_0x831500[0x0][_0x83a7c7(0x1eb)])/(_0x831500[0x2][_0x83a7c7(0x1fc)]-_0x831500[0x0][_0x83a7c7(0x1fc)]);_0x100632[_0x83a7c7(0x1ef)](_0x83a7c7(0x238)+_0x578f6a['toFixed'](0x2)+_0x83a7c7(0x22b));if(_0x1ad742>0.25)return'Excessive\x20memory\x20growth\x20of\x20'+_0x5491d0['fSDOv'](_0x1ad742,0x64)[_0x83a7c7(0x22a)](0x2)+'%';if(_0x5491d0[_0x83a7c7(0x21d)](_0x578f6a,0x7d0))return _0x83a7c7(0x231)+_0x578f6a[_0x83a7c7(0x22a)](0x2)+_0x83a7c7(0x22b);return![];}}const _0x81aa59=_0x2a2871();_0x81aa59?assert[_0x83a7c7(0x214)]('Memory\x20leak\x20detected:\x20'+_0x81aa59):_0x5491d0[_0x83a7c7(0x1f7)](_0x372c01,!![],_0x5491d0[_0x83a7c7(0x20b)]);}function _0x1207ab(){const _0x5609a4=_0x99ca98,_0x1d110a=[];for(let _0x5cdf3f=0x1;_0x5491d0['IcPtC'](_0x5cdf3f,_0x10fd28['length']);_0x5cdf3f++){const _0x9f0a1d=_0x10fd28[_0x5491d0[_0x5609a4(0x210)](_0x5cdf3f,0x1)][_0x5609a4(0x1eb)],_0x46c2ce=_0x10fd28[_0x5cdf3f][_0x5609a4(0x1eb)];_0x1d110a[_0x5609a4(0x204)]((_0x46c2ce-_0x9f0a1d)/_0x9f0a1d);}const _0x5ba02b=_0x5491d0[_0x5609a4(0x210)](_0x10fd28[_0x10fd28[_0x5609a4(0x217)]-0x1][_0x5609a4(0x1eb)],_0x3d0f89)/_0x3d0f89,_0x5b5f6d=_0x1d110a[_0x5609a4(0x202)]((_0x408762,_0x1bbb18)=>_0x408762+_0x1bbb18,0x0)/_0x1d110a['length'];console[_0x5609a4(0x1ef)]('Growth\x20from\x20baseline:\x20'+_0x5491d0[_0x5609a4(0x20e)](_0x5ba02b,0x64)['toFixed'](0x2)+'%'),console[_0x5609a4(0x1ef)](_0x5609a4(0x1e6)+(_0x5b5f6d*0x64)[_0x5609a4(0x22a)](0x2)+'%'),console[_0x5609a4(0x1ef)](_0x5609a4(0x1f0)+_0x1d110a['map'](_0x302429=>(_0x302429*0x64)[_0x5609a4(0x22a)](0x2)+'%')['join'](',\x20'));const _0x2786dd=_0x1d110a[_0x5609a4(0x1ea)](_0x1ec9b4=>_0x1ec9b4>0.01)[_0x5609a4(0x217)];return _0x2786dd>=Math[_0x5609a4(0x236)](_0x5491d0[_0x5609a4(0x21e)](_0x1d110a[_0x5609a4(0x217)],0.75))&&_0x5491d0[_0x5609a4(0x21d)](_0x5b5f6d,0.02)&&_0x5ba02b>0.2;}function _0x2a2871(){const _0x3fbfe3=_0x99ca98;if(_0x10fd28[_0x3fbfe3(0x217)]<0x4)return![];const _0x390b13=_0x5491d0['VMlvW'](_0x10fd28[_0x10fd28[_0x3fbfe3(0x217)]-0x1][_0x3fbfe3(0x1eb)],_0x3d0f89)/_0x3d0f89;console[_0x3fbfe3(0x1ef)](_0x3fbfe3(0x206)+(_0x390b13*0x64)[_0x3fbfe3(0x22a)](0x2)+'%');const _0x543c40=_0x10fd28[_0x3fbfe3(0x1f1)](-0x3),_0x32a289=_0x5491d0[_0x3fbfe3(0x1fd)](_0x5491d0['VMlvW'](_0x543c40[0x2][_0x3fbfe3(0x1eb)],_0x543c40[0x0]['heapUsed']),_0x543c40[0x2][_0x3fbfe3(0x1fc)]-_0x543c40[0x0][_0x3fbfe3(0x1fc)]);console['log'](_0x3fbfe3(0x238)+_0x32a289[_0x3fbfe3(0x22a)](0x2)+_0x3fbfe3(0x22b));if(_0x390b13>0.25)return _0x3fbfe3(0x222)+_0x5491d0['DPokR'](_0x390b13,0x64)[_0x3fbfe3(0x22a)](0x2)+'%';if(_0x32a289>0x7d0)return _0x3fbfe3(0x231)+_0x32a289[_0x3fbfe3(0x22a)](0x2)+_0x3fbfe3(0x22b);return![];}await _0x1f9f88();});