const _0x545356=_0x2b6a;(function(_0xfa4f99,_0x5e31c0){const _0x4ab6a5=_0x2b6a,_0x14189f=_0xfa4f99();while(!![]){try{const _0x36286f=-parseInt(_0x4ab6a5(0x1ae))/0x1*(-parseInt(_0x4ab6a5(0x1ac))/0x2)+parseInt(_0x4ab6a5(0x1a7))/0x3+parseInt(_0x4ab6a5(0x1d0))/0x4*(-parseInt(_0x4ab6a5(0x204))/0x5)+-parseInt(_0x4ab6a5(0x206))/0x6*(-parseInt(_0x4ab6a5(0x1d7))/0x7)+parseInt(_0x4ab6a5(0x1c3))/0x8+-parseInt(_0x4ab6a5(0x1db))/0x9+-parseInt(_0x4ab6a5(0x1c5))/0xa*(parseInt(_0x4ab6a5(0x1fc))/0xb);if(_0x36286f===_0x5e31c0)break;else _0x14189f['push'](_0x14189f['shift']());}catch(_0x175b5a){_0x14189f['push'](_0x14189f['shift']());}}}(_0x3ad5,0xe0f75));import{debounce,later}from'@ember/runloop';function _0x2b6a(_0x2b6b32,_0x1a899e){const _0x3ad525=_0x3ad5();return _0x2b6a=function(_0x2b6a74,_0x2dbd3c){_0x2b6a74=_0x2b6a74-0x1a3;let _0x3c7e32=_0x3ad525[_0x2b6a74];return _0x3c7e32;},_0x2b6a(_0x2b6b32,_0x1a899e);}import{withPluginApi}from'discourse/lib/plugin-api';function _0x3ad5(){const _0x3935e7=['vwtKY','.d-wrap[data-wrap=placeholder]:not(.placeholdered)','.discourse-placeholder-value','EpIuT','NlGiM','querySelector','addEventListener','remove','selected','innerText','CSxfU','setAttribute','discourse-placeholder-option','VWDQL','key','text','setValue','select','filter','13472432UQikEV','uaNkE','800VqXdRW','lookup','map','rLcwV','discourse-placeholder-value','d-placeholder-','delimiter','innerHTML','tqAFe','ThlAS','uGTfY','6840624mwfTth','VTclo','length','querySelectorAll','h1,\x20h2,\x20h3,\x20h4,\x20h5,\x20h6,\x20p,\x20code,\x20blockquote,\x20.md-table,\x20li\x20p','default','TMBQz','259aKsZVi','keys','ACvzn','getObject','4534443mXBNUD','service:modal','srxtn','widget','option','wXiXF','includes','classList','boCVT','skbLC','getValue','service:key-value-store','.discourse-placeholder-select','join','removeValue','exec','expireOldValues','prepend','description','JZrTp','forEach','kaBcD','createElement','pChYI','expires','toolbar.builder','yBFcg','add','MFdkR','discourse-placeholder-select','position','wEayP','keyValueStore','279576SAEexi','defaults','ZDGoE','addComposerToolbarPopupMenuOption','slice','kTOBW','input','value','5EsWwbF','placeholdered','86850Dhvgge','erDRX','pRWvR','change','attrs','removeKeys','push','ltmpT','iUGvA','BLbLj','none','appendChild','3397128izVHMb','dataset','topicId','FOfUb','xlSQN','3633438ZOqtsV','target','1vfoTse','show'];_0x3ad5=function(){return _0x3935e7;};return _0x3ad5();}import _0x13bd86 from'../components/modal/discourse-placeholder-builder';const VALID_TAGS=_0x545356(0x1d4),DELIMITER='=',EXPIRE_AFTER_DAYS=0x7,EXPIRE_AFTER_SECONDS=EXPIRE_AFTER_DAYS*0x18*0x3c*0x3c,STORAGE_PREFIX=_0x545356(0x1ca);function buildInput(_0x24091e,_0x59502d){const _0x2ec61f=_0x545356,_0x2f2c32={'TMBQz':'input','boCVT':_0x2ec61f(0x1c9)},_0x15803c=document[_0x2ec61f(0x1f1)](_0x2f2c32[_0x2ec61f(0x1d6)]);return _0x15803c[_0x2ec61f(0x1e2)][_0x2ec61f(0x1f6)](_0x2f2c32[_0x2ec61f(0x1e3)]),_0x15803c[_0x2ec61f(0x1a8)][_0x2ec61f(0x1be)]=_0x24091e,_0x15803c[_0x2ec61f(0x1a8)][_0x2ec61f(0x1cb)]=_0x59502d[_0x2ec61f(0x1cb)],_0x59502d[_0x2ec61f(0x1ed)]&&_0x15803c['setAttribute']('placeholder',_0x59502d[_0x2ec61f(0x1ed)]),_0x59502d[_0x2ec61f(0x1d5)]&&(_0x15803c['value']=_0x59502d[_0x2ec61f(0x1d5)]),_0x15803c;}function addSelectOption(_0x3c6d9d,_0x69ea86={}){const _0x415e4b=_0x545356,_0xe5646b={'CSxfU':_0x415e4b(0x1bc),'tqAFe':'ltiyT','EpIuT':_0x415e4b(0x1b8)},_0x3a7569=document[_0x415e4b(0x1f1)](_0x415e4b(0x1df));_0x3a7569['classList'][_0x415e4b(0x1f6)](_0xe5646b[_0x415e4b(0x1ba)]),_0x3a7569['value']=_0x69ea86[_0x415e4b(0x203)],_0x3a7569[_0x415e4b(0x1bf)]=_0x69ea86[_0x415e4b(0x1ed)]||_0x69ea86[_0x415e4b(0x203)],_0x69ea86[_0x415e4b(0x1b8)]&&(_0xe5646b[_0x415e4b(0x1cd)]===_0xe5646b[_0x415e4b(0x1cd)]?_0x3a7569[_0x415e4b(0x1bb)](_0xe5646b[_0x415e4b(0x1b3)],!![]):_0x708e89[_0x415e4b(0x1ec)](_0x581144)),_0x3c6d9d[_0x415e4b(0x1a6)](_0x3a7569);}function buildSelect(_0x100bbd,_0x2f8ae7){const _0x3dd763=_0x545356,_0x4a4419=document[_0x3dd763(0x1f1)](_0x3dd763(0x1c1));return _0x4a4419['classList']['add'](_0x3dd763(0x1f8)),_0x4a4419[_0x3dd763(0x1a8)][_0x3dd763(0x1be)]=_0x100bbd,_0x4a4419[_0x3dd763(0x1a8)]['delimiter']=_0x2f8ae7['delimiter'],_0x2f8ae7[_0x3dd763(0x1ed)]&&addSelectOption(_0x4a4419,{'value':_0x3dd763(0x1a5),'description':_0x2f8ae7['description']}),_0x2f8ae7[_0x3dd763(0x1fd)][_0x3dd763(0x1ef)](_0x527e05=>addSelectOption(_0x4a4419,{'value':_0x527e05,'selected':_0x2f8ae7[_0x3dd763(0x1d5)]===_0x527e05})),_0x4a4419;}export default{'name':'discourse-placeholder-theme-component','expireOldValues'(){const _0x57c56f=_0x545356,_0x4b9950={'uaNkE':function(_0x4ce663,_0x3d4a0d){return _0x4ce663<_0x3d4a0d;}},_0x476087=Date['now']();this['keyValueStore'][_0x57c56f(0x20b)]?.((_0x255c31,_0x2e95ec)=>{const _0x5c84db=_0x57c56f;if(!_0x255c31[_0x5c84db(0x1e1)](STORAGE_PREFIX))return![];return!_0x2e95ec?.[_0x5c84db(0x1f3)]||_0x4b9950[_0x5c84db(0x1c4)](_0x2e95ec[_0x5c84db(0x1f3)],_0x476087);});},'getValue'(_0xe9f678){const _0x216c1d=_0x545356,_0x1f9dfd=this[_0x216c1d(0x1fb)][_0x216c1d(0x1da)](''+STORAGE_PREFIX+_0xe9f678);if(_0x1f9dfd)return _0x1f9dfd['expires']=Date['now']()+EXPIRE_AFTER_SECONDS,this[_0x216c1d(0x1fb)]['setObject'](''+STORAGE_PREFIX+_0xe9f678,_0x1f9dfd),_0x1f9dfd[_0x216c1d(0x203)];},'setValue'(_0x5d2e60,_0x455972){this['keyValueStore']['setObject']({'key':''+STORAGE_PREFIX+_0x5d2e60,'value':{'expires':Date['now']()+EXPIRE_AFTER_SECONDS,'value':_0x455972}});},'removeValue'(_0x39a4cb){const _0x1e907d=_0x545356;this[_0x1e907d(0x1fb)][_0x1e907d(0x1b7)](''+STORAGE_PREFIX+_0x39a4cb);},'initialize'(_0x475ef8){const _0x260478=_0x545356,_0x40b627={'EFNJb':_0x260478(0x1b0),'FWVHf':function(_0x5d2b1a,_0x10be6e,_0x4673e3){return _0x5d2b1a(_0x10be6e,_0x4673e3);},'kaBcD':_0x260478(0x209),'ACvzn':_0x260478(0x1ee),'ThlAS':'discourse-placeholder-theme-component','VTclo':function(_0x3d33c0,_0x12c6ef){return _0x3d33c0(_0x12c6ef);},'pChYI':'file','wEayP':_0x260478(0x1e6),'MFdkR':function(_0x56f4f2,_0x3d5ec2,_0x226a14){return _0x56f4f2(_0x3d5ec2,_0x226a14);},'lAQJJ':'0.8.7'};this[_0x260478(0x1fb)]=_0x475ef8['lookup'](_0x40b627[_0x260478(0x1fa)]),this[_0x260478(0x1eb)](),_0x40b627[_0x260478(0x1f7)](withPluginApi,_0x40b627['lAQJJ'],_0x50a111=>{const _0x4fbd88=_0x260478,_0x15877f={'DEDiJ':function(_0x2f9e91,_0x4d6457){return _0x2f9e91!==_0x4d6457;},'skbLC':_0x4fbd88(0x1cf),'NlGiM':function(_0x456f91,_0x4034b2){return _0x456f91!==_0x4034b2;},'kVUCc':_0x40b627['EFNJb'],'TEfBX':function(_0x46522a,_0xa69b4,_0x261ec0){return _0x40b627['FWVHf'](_0x46522a,_0xa69b4,_0x261ec0);},'ZDGoE':_0x40b627[_0x4fbd88(0x1f0)],'kTOBW':_0x4fbd88(0x1b1),'VWDQL':_0x4fbd88(0x1dc)};_0x4fbd88(0x20d)!==_0x40b627[_0x4fbd88(0x1d9)]?(_0x50a111['decorateCookedElement']((_0x169ce7,_0x27d766)=>{const _0x42f040=_0x4fbd88,_0x244963={'yBFcg':function(_0x30c283,_0x11bd1d){return _0x30c283+_0x11bd1d;},'xTiBr':function(_0x227fbc,_0x2c4791){return _0x227fbc!==_0x2c4791;},'xlSQN':_0x42f040(0x1a5),'wXiXF':function(_0x4e191e,_0x3a9294,_0x2306b7,_0x49af6f){return _0x4e191e(_0x3a9294,_0x2306b7,_0x49af6f);},'BLbLj':function(_0x42b20c,_0x58eb52,_0x502d03){return _0x15877f['TEfBX'](_0x42b20c,_0x58eb52,_0x502d03);},'erDRX':_0x15877f[_0x42f040(0x1fe)]};if(!_0x27d766){if(_0x42f040(0x1aa)!==_0x42f040(0x1aa)){const _0x1ad3b3=_0x34d2e1[_0x42f040(0x1c6)](_0x42f040(0x1dc));_0x1ad3b3['show'](_0x57cb48,{'model':{'toolbarEvent':_0x144e37}});}else return;}const _0x268a94=_0x27d766[_0x42f040(0x1de)][_0x42f040(0x20a)][_0x42f040(0x1a9)]+'-'+_0x27d766[_0x42f040(0x1de)]['attrs']['id']+'-',_0x3ba1ce=[],_0x86f17e={},_0x314bef=_0x3b1da3=>{const _0x5d540e=_0x42f040,_0x56d104={'mYHmk':function(_0x185afc,_0x398ca2){return _0x185afc+_0x398ca2;},'rLcwV':function(_0xb88dc5,_0x1fa1c4){const _0x1c2160=_0x2b6a;return _0x244963[_0x1c2160(0x1f5)](_0xb88dc5,_0x1fa1c4);},'iUGvA':function(_0x3893dc,_0x5a5a23){return _0x3893dc+_0x5a5a23;}},_0x5d559d=_0x3b1da3[_0x5d540e(0x1ad)][_0x5d540e(0x203)],_0x54482b=_0x3b1da3[_0x5d540e(0x1ad)][_0x5d540e(0x1a8)][_0x5d540e(0x1be)],_0x38edfe=_0x86f17e[_0x3b1da3[_0x5d540e(0x1ad)]['dataset'][_0x5d540e(0x1be)]],_0x491af1=''+_0x268a94+_0x54482b;_0x5d559d?_0x5d559d!==_0x38edfe['default']&&this[_0x5d540e(0x1c0)](_0x491af1,_0x5d559d):this[_0x5d540e(0x1e9)](_0x491af1);let _0x199190;_0x5d559d&&_0x5d559d['length']&&_0x244963['xTiBr'](_0x5d559d,_0x244963[_0x5d540e(0x1ab)])?_0x199190=_0x5d559d:_0x199190=''+_0x38edfe[_0x5d540e(0x1cb)]+_0x54482b+_0x38edfe[_0x5d540e(0x1cb)],_0x169ce7['querySelectorAll'](VALID_TAGS)[_0x5d540e(0x1ef)]((_0x30389d,_0x18a605)=>{const _0x3cad43=_0x5d540e,_0x30c2be=_0x3ba1ce[_0x18a605];if(!_0x30c2be)return;let _0x41cab9=0x0,_0x2caae0=![],_0x526037=_0x30389d[_0x3cad43(0x1cc)];_0x30c2be[_0x3cad43(0x1ef)](_0x4a7772=>{const _0x54eed5=_0x3cad43;if(_0x4a7772['pattern']!==''+_0x38edfe['delimiter']+_0x54482b+_0x38edfe[_0x54eed5(0x1cb)]){_0x4a7772['position']=_0x56d104['mYHmk'](_0x4a7772[_0x54eed5(0x1f9)],_0x41cab9);return;}_0x2caae0=!![];const _0x5d2386=_0x4a7772[_0x54eed5(0x1d2)],_0xba4502=_0x526037[_0x54eed5(0x200)](0x0,_0x56d104[_0x54eed5(0x1c8)](_0x4a7772[_0x54eed5(0x1f9)],_0x41cab9)),_0x390243=_0x526037[_0x54eed5(0x200)](_0x56d104['mYHmk'](_0x4a7772['position']+_0x41cab9,_0x4a7772[_0x54eed5(0x1d2)]),_0x526037[_0x54eed5(0x1d2)]);_0x526037=''+_0xba4502+_0x199190+_0x390243,_0x4a7772[_0x54eed5(0x1d2)]=_0x199190[_0x54eed5(0x1d2)],_0x4a7772[_0x54eed5(0x1f9)]=_0x4a7772['position']+_0x41cab9,_0x41cab9=_0x56d104[_0x54eed5(0x1a3)](_0x41cab9,_0x199190[_0x54eed5(0x1d2)])-_0x5d2386;}),_0x2caae0&&(_0x30389d[_0x3cad43(0x1cc)]=_0x526037);});};function _0x39f983(){const _0x3de3fc=_0x42f040,_0x509e0e={'srxtn':function(_0xd3b428,_0x16d9a9){return _0x15877f['DEDiJ'](_0xd3b428,_0x16d9a9);},'pRWvR':_0x15877f[_0x3de3fc(0x1e4)]};if(_0x15877f[_0x3de3fc(0x1b4)](_0x3de3fc(0x1b0),_0x15877f['kVUCc']))_0x509e0e[_0x3de3fc(0x1dd)](_0x83cfc,_0x2c388d[_0x3de3fc(0x1d5)])&&this['setValue'](_0x383166,_0x3cc657);else{_0x3ba1ce[_0x3de3fc(0x1d2)]=0x0;const _0x14f99a=Object[_0x3de3fc(0x1d8)](_0x86f17e),_0x5d1dd2=_0x14f99a[_0x3de3fc(0x1c7)](_0x13dc70=>{const _0x30b36a=_0x3de3fc;if(_0x509e0e[_0x30b36a(0x208)]!=='uGTfY'){const _0xb40c4e=_0x4fc578(_0x1d89c1,_0x388c5f[_0x284f8d]);_0x199eb2['appendChild'](_0xb40c4e);}else{const _0x143c9f=_0x86f17e[_0x13dc70];return'('+_0x143c9f[_0x30b36a(0x1cb)]+_0x13dc70+_0x143c9f['delimiter']+')';}})[_0x3de3fc(0x1e8)]('|'),_0x3ca187=new RegExp(_0x5d1dd2,'g');_0x169ce7[_0x3de3fc(0x1d3)](VALID_TAGS)[_0x3de3fc(0x1ef)]((_0x16f58b,_0x33be73)=>{const _0x2b4885=_0x3de3fc;let _0x432565;_0x3ba1ce[_0x33be73]=_0x3ba1ce[_0x33be73]||[];while((_0x432565=_0x3ca187[_0x2b4885(0x1ea)](_0x16f58b[_0x2b4885(0x1cc)]))!=null){_0x3ba1ce[_0x33be73][_0x2b4885(0x20c)]({'pattern':_0x432565[0x0],'position':_0x432565['index'],'length':_0x432565[0x0][_0x2b4885(0x1d2)]});}});}}const _0x116dc5=()=>{const _0x132210=_0x42f040;Object[_0x132210(0x1d8)](_0x86f17e)[_0x132210(0x1d2)]>0x0&&(_0x244963[_0x132210(0x1e0)](_0x39f983,_0x86f17e,_0x169ce7,_0x3ba1ce),Object[_0x132210(0x1d8)](_0x86f17e)[_0x132210(0x1ef)](_0x382524=>{const _0x50da5c=_0x132210,_0x4aac79=_0x86f17e[_0x382524],_0x57ea41=''+_0x268a94+_0x382524,_0x1856c2=this['getValue'](_0x57ea41)||_0x4aac79[_0x50da5c(0x1d5)];_0x314bef({'target':{'value':_0x1856c2,'dataset':{'key':_0x382524,'delimiter':_0x4aac79['delimiter']}}});}));},_0x258556=_0x169ce7[_0x42f040(0x1d3)](_0x15877f[_0x42f040(0x201)]);_0x258556[_0x42f040(0x1ef)](_0x3c16c8=>{const _0x44a8a6=_0x42f040,_0x759085=_0x3c16c8['dataset']['key'];if(!_0x759085)return;const _0x4b19bb=''+_0x268a94+_0x759085,_0x1e44c8=this[_0x44a8a6(0x1e5)](_0x4b19bb),_0xfd6925=(_0x3c16c8[_0x44a8a6(0x1a8)]['defaults']||'')['split'](',')[_0x44a8a6(0x1c2)](Boolean);_0x86f17e[_0x759085]={'default':_0x1e44c8||_0x3c16c8[_0x44a8a6(0x1a8)][_0x44a8a6(0x1d5)],'defaults':_0xfd6925,'delimiter':_0x3c16c8[_0x44a8a6(0x1a8)]['delimiter']||DELIMITER,'description':_0x3c16c8[_0x44a8a6(0x1a8)]['description']};const _0x3e0c59=document[_0x44a8a6(0x1f1)]('span');_0x3e0c59[_0x44a8a6(0x1e2)][_0x44a8a6(0x1f6)]('discourse-placeholder-name',_0x44a8a6(0x205)),_0x3e0c59[_0x44a8a6(0x1b9)]=_0x759085;_0x3c16c8[_0x44a8a6(0x1b5)]('p')?_0x3c16c8['querySelector']('p')[_0x44a8a6(0x1ec)](_0x3e0c59):_0x3c16c8[_0x44a8a6(0x1ec)](_0x3e0c59);if(_0xfd6925&&_0xfd6925[_0x44a8a6(0x1d2)]){const _0x345876=_0x244963[_0x44a8a6(0x1a4)](buildSelect,_0x759085,_0x86f17e[_0x759085]);_0x3c16c8['appendChild'](_0x345876);}else{const _0x5d907b=buildInput(_0x759085,_0x86f17e[_0x759085]);_0x3c16c8[_0x44a8a6(0x1a6)](_0x5d907b);}}),_0x169ce7[_0x42f040(0x1d3)](_0x42f040(0x1b2))['forEach'](_0x28ff1f=>{const _0x1e0f89=_0x42f040;_0x28ff1f[_0x1e0f89(0x1b6)](_0x1e0f89(0x202),_0x547845=>debounce(this,_0x314bef,_0x547845,0x96));}),_0x169ce7['querySelectorAll'](_0x42f040(0x1e7))[_0x42f040(0x1ef)](_0x146f2b=>{const _0x12c79f=_0x42f040;_0x146f2b[_0x12c79f(0x1b6)](_0x244963[_0x12c79f(0x207)],_0x5cfd4b=>debounce(this,_0x314bef,_0x5cfd4b,0x96));}),later(_0x116dc5,0x1f4);},{'onlyStream':!![],'id':_0x40b627[_0x4fbd88(0x1ce)]}),_0x50a111[_0x4fbd88(0x1ff)]({'label':_0x40b627[_0x4fbd88(0x1d1)](themePrefix,_0x4fbd88(0x1f4)),'icon':_0x40b627[_0x4fbd88(0x1f2)],'action':_0x30e1ce=>{const _0x476a12=_0x4fbd88,_0x46eec2=_0x475ef8[_0x476a12(0x1c6)](_0x15877f[_0x476a12(0x1bd)]);_0x46eec2[_0x476a12(0x1af)](_0x13bd86,{'model':{'toolbarEvent':_0x30e1ce}});}})):_0x5b957f[_0x4fbd88(0x203)]=_0x27fc1d[_0x4fbd88(0x1d5)];});}};