const _0x46c5d5=_0x5860;function _0x3431(){const _0x52b0cd=['project-diagram','afaPT','post_','calculatedHeight','height','length','KqWXA','mermaid_js','OlsWL','toolbarEvent','append','value','4704174VFsLvj','discourse-mermaid-theme-component','\x20\x20\x20\x20flowchart\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20A\x20-->\x20B','createElement','```mermaid\x20height=','dark','YLwtv','applySurround','2828020KsOYHT','Jlaqh','\x0a```mermaid\x0a','mXPLe','Bvzfu','controller:composer','querySelectorAll','sKrrR','Oheev','composer','10BLMMqP','dataset','QVqwM','getModel','join','99351MuqOKF','3144812aMYTsF','insertMermaidSample','decorateCookedElement','Tbxio','wJRJH','rspBF','7tsYzzX','.spinner','--scheme-type','mermaid_','split','39532VQwmnn','getBoundingClientRect','querySelector','kRzCz','getPropertyValue','spinner','theme_uploads_local','processed','grFCB','default','63zKVTXL','0.11.1','innerHTML','render','qBGga','Vsnrn','selectionStart','parse','match','1958824BprbWN','oEOpS','code','textContent','PPQiT','375055xCkAJb','I18n','pre[data-code-wrap=mermaid]','mermaid','chat_message_','mermaid_sample','classList','div','add','addToolbarPopupMenuOptionsCallback','initialize','insert_mermaid_sample','mermaidAPI','body','hbleI','forEach','qcgbC','ubmWN','translations','16KdGCCW'];_0x3431=function(){return _0x52b0cd;};return _0x3431();}function _0x5860(_0x11ad51,_0x228e24){const _0x34312b=_0x3431();return _0x5860=function(_0x586034,_0x244364){_0x586034=_0x586034-0x12d;let _0x44b43f=_0x34312b[_0x586034];return _0x44b43f;},_0x5860(_0x11ad51,_0x228e24);}(function(_0x8f0968,_0x2ca051){const _0x101c8b=_0x5860,_0x5439ed=_0x8f0968();while(!![]){try{const _0x2e65ac=parseInt(_0x101c8b(0x13c))/0x1+-parseInt(_0x101c8b(0x17f))/0x2*(parseInt(_0x101c8b(0x12e))/0x3)+parseInt(_0x101c8b(0x137))/0x4+-parseInt(_0x101c8b(0x164))/0x5+-parseInt(_0x101c8b(0x15c))/0x6*(-parseInt(_0x101c8b(0x17a))/0x7)+parseInt(_0x101c8b(0x14f))/0x8*(parseInt(_0x101c8b(0x173))/0x9)+-parseInt(_0x101c8b(0x16e))/0xa*(parseInt(_0x101c8b(0x174))/0xb);if(_0x2e65ac===_0x2ca051)break;else _0x5439ed['push'](_0x5439ed['shift']());}catch(_0x37d181){_0x5439ed['push'](_0x5439ed['shift']());}}}(_0x3431,0x62b3e));import _0x39a85e from'discourse/lib/load-script';import{apiInitializer}from'discourse/lib/api';import _0x576dd5 from'discourse-common/lib/debounce';async function applyMermaid(_0x2b4c1a,_0x45e4d6=_0x46c5d5(0x16d)){const _0x4f5b97=_0x46c5d5,_0x58e823={'YLwtv':function(_0x1932bc,_0x458f63,_0x3e8a39){return _0x1932bc(_0x458f63,_0x3e8a39);},'rspBF':_0x4f5b97(0x132),'QVqwM':function(_0x28096a,_0x5321fc){return _0x28096a!==_0x5321fc;},'QlUlo':_0x4f5b97(0x139),'Vsnrn':_0x4f5b97(0x17b),'afaPT':_0x4f5b97(0x16d),'OlsWL':function(_0x2b3003,_0x4ae34f,_0x1e9a49,_0x4728c9,_0xd470e0){return _0x2b3003(_0x4ae34f,_0x1e9a49,_0x4728c9,_0xd470e0);},'mXPLe':_0x4f5b97(0x17c),'rfhBm':_0x4f5b97(0x161),'hbleI':_0x4f5b97(0x12d)},_0x2649f2=_0x2b4c1a[_0x4f5b97(0x16a)](_0x4f5b97(0x13e));if(!_0x2649f2[_0x4f5b97(0x155)])return;await _0x39a85e(settings[_0x4f5b97(0x185)][_0x4f5b97(0x157)]),window[_0x4f5b97(0x13f)][_0x4f5b97(0x146)]({'startOnLoad':![],'theme':getComputedStyle(document[_0x4f5b97(0x149)])[_0x4f5b97(0x183)](_0x58e823[_0x4f5b97(0x167)])['trim']()===_0x58e823['rfhBm']?_0x4f5b97(0x161):_0x58e823[_0x4f5b97(0x14a)]}),_0x2649f2[_0x4f5b97(0x14b)](_0x439715=>{const _0x731fe3=_0x4f5b97,_0x3a8b5c={'qcgbC':function(_0x148d11,_0xb55f98,_0x21d02b){const _0x3ef272=_0x5860;return _0x58e823[_0x3ef272(0x162)](_0x148d11,_0xb55f98,_0x21d02b);}};if(_0x439715['dataset'][_0x731fe3(0x186)]){if(_0x58e823[_0x731fe3(0x179)]===_0x731fe3(0x13b)){const _0x13498c=_0x27a7ec?'post_'+_0x26e19b['getModel']()['id']:_0x731fe3(0x16d);_0x3a8b5c[_0x731fe3(0x14c)](_0x51f4b5,_0x3e50ca,_0x13498c);}else return;}const _0x25a961=document[_0x731fe3(0x15f)](_0x731fe3(0x143));_0x25a961[_0x731fe3(0x142)][_0x731fe3(0x144)](_0x731fe3(0x184)),_0x439715[_0x731fe3(0x16f)]['codeHeight']&&_0x58e823[_0x731fe3(0x170)](_0x45e4d6,_0x731fe3(0x16d))&&(_0x439715['style'][_0x731fe3(0x154)]=_0x439715[_0x731fe3(0x16f)]['codeHeight']+'px'),_0x439715[_0x731fe3(0x15a)](_0x25a961);}),_0x2649f2[_0x4f5b97(0x14b)]((_0x8d0ae7,_0x5baee9)=>{const _0x58370c=_0x4f5b97,_0x3fdc0a=_0x8d0ae7[_0x58370c(0x181)](_0x58e823['QlUlo']);if(!_0x3fdc0a)return;try{window[_0x58370c(0x13f)]['parse'](_0x3fdc0a[_0x58370c(0x13a)]||'')&&window['mermaid'][_0x58370c(0x148)][_0x58370c(0x131)](_0x58370c(0x17d)+_0x5baee9+'_'+_0x45e4d6,_0x3fdc0a[_0x58370c(0x13a)]||'',_0x5d4d53=>{const _0x352ec2=_0x58370c;_0x8d0ae7[_0x352ec2(0x130)]=_0x5d4d53;});}catch(_0x458c3a){_0x8d0ae7[_0x58370c(0x130)]='<span\x20class=\x22mermaid-error\x22>'+(_0x458c3a?.['str']||_0x458c3a)+'</span>';}finally{_0x8d0ae7[_0x58370c(0x16f)][_0x58370c(0x186)]=!![],_0x8d0ae7['querySelector'](_0x58e823[_0x58370c(0x133)])?.['remove']();}_0x45e4d6===_0x58e823[_0x58370c(0x151)]&&_0x58e823[_0x58370c(0x158)](_0x576dd5,updateMarkdownHeight,_0x8d0ae7,_0x5baee9,0x1f4);});}function updateMarkdownHeight(_0x4249df,_0x10992a){const _0x1d3eba=_0x46c5d5,_0x2cb00f={'wJRJH':function(_0x30becd,_0x3b039e){return _0x30becd(_0x3b039e);},'Bvzfu':function(_0x2c10a7,_0x4043f0){return _0x2c10a7===_0x4043f0;},'Oheev':function(_0x22c104,_0x52af30){return _0x22c104<_0x52af30;},'WehiA':_0x1d3eba(0x160),'ubmWN':',auto'};let _0x7dd214=_0x2cb00f[_0x1d3eba(0x178)](parseInt,_0x4249df[_0x1d3eba(0x180)]()[_0x1d3eba(0x154)]),_0x5a5d7a=parseInt(_0x4249df['dataset'][_0x1d3eba(0x153)]);if(_0x2cb00f[_0x1d3eba(0x168)](_0x7dd214,0x0))return;if(_0x7dd214!==_0x5a5d7a){_0x4249df[_0x1d3eba(0x16f)][_0x1d3eba(0x153)]=_0x7dd214;let _0x4452c=document['getElementsByClassName']('d-editor-input')[0x0],_0x2772c0=_0x4452c[_0x1d3eba(0x15b)][_0x1d3eba(0x17e)]('\x0a'),_0x29da8e=0x0;for(let _0x4c99a6=0x0;_0x2cb00f[_0x1d3eba(0x16c)](_0x4c99a6,_0x2772c0[_0x1d3eba(0x155)]);_0x4c99a6++){_0x2772c0[_0x4c99a6][_0x1d3eba(0x136)](/```mermaid((\s*)|.*auto)$/)&&(_0x29da8e===_0x10992a&&(_0x2772c0[_0x4c99a6]=_0x2cb00f['WehiA']+_0x7dd214+_0x2cb00f[_0x1d3eba(0x14d)]),_0x29da8e+=0x1);}let _0x2d4c1a=_0x2772c0[_0x1d3eba(0x172)]('\x0a');if(_0x2d4c1a!==_0x4452c[_0x1d3eba(0x15b)]){let _0x5a9492=_0x4452c[_0x1d3eba(0x134)],_0x327079=_0x4452c['selectionEnd'];_0x4452c[_0x1d3eba(0x15b)]=_0x2d4c1a,_0x5a9492&&(_0x4452c[_0x1d3eba(0x134)]=_0x5a9492,_0x4452c['selectionEnd']=_0x327079);}}}export default apiInitializer(_0x46c5d5(0x12f),_0x1a7164=>{const _0x52986a=_0x46c5d5,_0x150e2f={'sKrrR':_0x52986a(0x150),'Jlaqh':_0x52986a(0x147),'NeibT':_0x52986a(0x166),'kRzCz':_0x52986a(0x141),'grFCB':_0x52986a(0x16d),'Tbxio':_0x52986a(0x169),'Nrzrs':_0x52986a(0x15d),'Oscag':function(_0x5924b4,_0x4aa627){return _0x5924b4!==_0x4aa627;},'oEOpS':_0x52986a(0x156)};_0x1a7164[_0x52986a(0x145)](()=>{const _0x52fc6c=_0x52986a;return{'action':_0x52fc6c(0x175),'icon':_0x150e2f[_0x52fc6c(0x16b)],'label':themePrefix(_0x150e2f[_0x52fc6c(0x165)])};}),window[_0x52986a(0x13d)][_0x52986a(0x14e)][window['I18n']['locale']]['js'][_0x52986a(0x16d)][_0x52986a(0x141)]=_0x52986a(0x15e),_0x1a7164['modifyClass'](_0x150e2f[_0x52986a(0x177)],{'pluginId':_0x150e2f['Nrzrs'],'actions':{'insertMermaidSample'(){const _0x5ef34a=_0x52986a;this[_0x5ef34a(0x159)][_0x5ef34a(0x163)](_0x150e2f['NeibT'],'\x0a```\x0a',_0x150e2f[_0x5ef34a(0x182)],{'multiline':![]});}}}),_0x1a7164['decorateChatMessage']&&(_0x150e2f['Oscag'](_0x150e2f[_0x52986a(0x138)],_0x150e2f[_0x52986a(0x138)])?_0x46649c[_0x52986a(0x13f)][_0x52986a(0x135)](_0x48a601[_0x52986a(0x13a)]||'')&&_0x22ae17[_0x52986a(0x13f)][_0x52986a(0x148)][_0x52986a(0x131)](_0x52986a(0x17d)+_0x5d713d+'_'+_0x46212d,_0x430e20[_0x52986a(0x13a)]||'',_0x280961=>{const _0x5c3fb4=_0x52986a;_0x398c65[_0x5c3fb4(0x130)]=_0x280961;}):_0x1a7164['decorateChatMessage'](_0x3fa263=>{const _0x263374=_0x52986a;applyMermaid(_0x3fa263,_0x263374(0x140)+_0x3fa263['id']);})),_0x1a7164[_0x52986a(0x176)](async(_0x69dea7,_0x3fc0ae)=>{const _0x5b3be5=_0x52986a,_0x37303b=_0x3fc0ae?_0x5b3be5(0x152)+_0x3fc0ae[_0x5b3be5(0x171)]()['id']:_0x150e2f[_0x5b3be5(0x187)];applyMermaid(_0x69dea7,_0x37303b);},{'id':_0x52986a(0x15d)});});