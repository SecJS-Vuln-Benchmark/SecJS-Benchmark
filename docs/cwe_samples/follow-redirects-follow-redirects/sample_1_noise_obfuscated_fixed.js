function _0x3e7c(_0x1c1c88,_0x21513b){var _0x114e63=_0x114e();return _0x3e7c=function(_0x3e7c01,_0x4f6b1f){_0x3e7c01=_0x3e7c01-0x142;var _0x302da6=_0x114e63[_0x3e7c01];return _0x302da6;},_0x3e7c(_0x1c1c88,_0x21513b);}var _0x5ca824=_0x3e7c;function _0x114e(){var _0x1be080=['HIiPT','Cpzhc','ebAko','/meta/handshake','qftdN','1|0|3|4|2','engine','7446610zedbiN','given','OUSDW','Test','VCWZE','1565320NpGLXA','yields','9SGoywE','2487642BCvfkd','11512jnVTCX','ZrGXt','password','LQFig','2pdmuXg','WjdaG','pkuCv','1|0|2|3|4','2|1|0|3|4','GVtZh','hello\x20world','TbOZU','ext','message','get','jBquy','KITpF','server','Gogvf','FGsED','jstest','AGWPe','does\x20not\x20pass\x20outgoing\x20messages\x20through\x20the\x20extension','Vgwlk','RZqmO','rlZJv','oJsxg','with\x20an\x20incoming\x20extension\x20installed','addExtension','WNCMU','jNCdK','passes\x20incoming\x20messages\x20through\x20the\x20extension','1138328YNWGxw','aWtAG','HdeLK','returns','375730QjXJwf','hello','passes\x20outgoing\x20messages\x20through\x20the\x20extension','iiEvc','Server\x20extensions','split','process','fUxDS','pUuBi','with\x20an\x20outgoing\x20extension\x20installed','publish','../../../src/protocol/server','EOmwl','handshake','fHTJX','does\x20not\x20pass\x20incoming\x20messages\x20through\x20the\x20extension','381582uhmwmt','/foo','describe','763NFMofL','tplsI','GAFTe','jRhkD','UMXyB','MEVJP'];_0x114e=function(){return _0x1be080;};return _0x114e();}(function(_0x465afd,_0x652e95){var _0x2b7886=_0x3e7c,_0x3a0026=_0x465afd();while(!![]){try{var _0x5d6618=parseInt(_0x2b7886(0x16e))/0x1*(-parseInt(_0x2b7886(0x14e))/0x2)+parseInt(_0x2b7886(0x17e))/0x3+parseInt(_0x2b7886(0x16a))/0x4+-parseInt(_0x2b7886(0x146))/0x5+-parseInt(_0x2b7886(0x149))/0x6+-parseInt(_0x2b7886(0x181))/0x7*(-parseInt(_0x2b7886(0x14a))/0x8)+-parseInt(_0x2b7886(0x148))/0x9*(-parseInt(_0x2b7886(0x18e))/0xa);if(_0x5d6618===_0x652e95)break;else _0x3a0026['push'](_0x3a0026['shift']());}catch(_0x79c067){_0x3a0026['push'](_0x3a0026['shift']());}}}(_0x114e,0x333df));var jstest=require(_0x5ca824(0x15e))[_0x5ca824(0x144)],Engine=require('../../../src/engines/proxy'),Server=require(_0x5ca824(0x179));jstest[_0x5ca824(0x180)](_0x5ca824(0x172),function(){var _0x5893b3=_0x5ca824,_0xe84b72={'jRhkD':function(_0x56a454,_0x489b2a){return _0x56a454!==_0x489b2a;},'GAFTe':function(_0x2f163f,_0xe48d6d,_0x2242f6){return _0x2f163f(_0xe48d6d,_0x2242f6);},'RZqmO':_0x5893b3(0x17b),'KITpF':function(_0x13cdc3,_0x5eaa6e,_0x208a30){return _0x13cdc3(_0x5eaa6e,_0x208a30);},'jNCdK':'publish','fHTJX':_0x5893b3(0x18a),'LQFig':_0x5893b3(0x17f),'nCFLJ':'hello','ZrGXt':function(_0x741517,_0x3fbc32){return _0x741517(_0x3fbc32);},'Wrsad':_0x5893b3(0x161),'AGWPe':_0x5893b3(0x160),'pkuCv':function(_0x5afa16,_0x35f2c2,_0x343175){return _0x5afa16(_0x35f2c2,_0x343175);},'EOmwl':'HZzES','OUSDW':'password','Gogvf':_0x5893b3(0x17d),'ebAko':function(_0x15439c,_0xe2d0da){return _0x15439c(_0xe2d0da);},'UMXyB':_0x5893b3(0x177)};with(this){_0xe84b72[_0x5893b3(0x189)](before,function(){var _0x58cec6=_0x5893b3;with(this){this[_0x58cec6(0x18d)]={},stub(Engine,_0x58cec6(0x158))[_0x58cec6(0x16d)](engine),this[_0x58cec6(0x15b)]=new Server();}}),_0xe84b72[_0x5893b3(0x150)](describe,_0x5893b3(0x165),function(){var _0x255231=_0x5893b3,_0x30b64b={'MEVJP':'password','YbBRH':function(_0x172c97,_0x3fb1a4){var _0x42a958=_0x3e7c;return _0xe84b72[_0x42a958(0x14b)](_0x172c97,_0x3fb1a4);},'CBGcj':function(_0x437fae,_0x58c876,_0xde40c9){return _0x437fae(_0x58c876,_0xde40c9);},'HdeLK':_0x255231(0x178),'WjdaG':_0xe84b72['nCFLJ'],'fUxDS':_0xe84b72[_0x255231(0x14d)],'Cpzhc':function(_0x58d4b6,_0x4e7c9d){return _0x58d4b6===_0x4e7c9d;},'WNCMU':'ZZHcL','iiEvc':_0xe84b72['Wrsad'],'aWtAG':function(_0x27d783,_0x3a0759,_0x747b90){return _0x27d783(_0x3a0759,_0x747b90);}};with(this){before(function(){var _0x3e86a0=_0x255231,_0x269a2e={'TdCgI':_0x30b64b[_0x3e86a0(0x175)]};if(_0x30b64b['Cpzhc'](_0x30b64b[_0x3e86a0(0x167)],_0x30b64b[_0x3e86a0(0x167)]))with(this){if(_0x30b64b[_0x3e86a0(0x188)](_0x3e86a0(0x163),_0x30b64b[_0x3e86a0(0x171)])){var _0x237c90={'qftdN':function(_0x3d61db,_0x48a360){return _0x3d61db(_0x48a360);}},_0x5f31ce={'outgoing':function(_0x5c554b,_0x49520b){var _0x1f307e=_0x3e86a0;_0x5c554b['ext']={'auth':_0x1f307e(0x14c)},_0x237c90[_0x1f307e(0x18b)](_0x49520b,_0x5c554b);}};_0x35b099[_0x3e86a0(0x166)](_0x5f31ce),this[_0x3e86a0(0x157)]={'channel':_0x269a2e['TdCgI'],'data':_0x3e86a0(0x16f)};}else{var _0x16d003={'incoming':function(_0x14fbb0,_0x14274a){var _0x3f0eb4=_0x3e86a0;_0x14fbb0[_0x3f0eb4(0x156)]={'auth':_0x30b64b[_0x3f0eb4(0x186)]},_0x30b64b['YbBRH'](_0x14274a,_0x14fbb0);}};server['addExtension'](_0x16d003),this['message']={'channel':_0x3e86a0(0x17f),'data':_0x30b64b[_0x3e86a0(0x14f)]};}}else _0x30b64b['CBGcj'](_0x54fead,_0x3bdbc8,_0x30b64b[_0x3e86a0(0x16c)])[_0x3e86a0(0x142)]({'channel':_0x3e86a0(0x17f),'data':_0x30b64b[_0x3e86a0(0x14f)]}),_0x433e66['process'](_0x83aad,![],function(){});}),it(_0x255231(0x169),function(){var _0x3e7742=_0x255231;with(this){expect(engine,_0x3e7742(0x178))['given']({'channel':_0x30b64b[_0x3e7742(0x175)],'data':_0x30b64b[_0x3e7742(0x14f)],'ext':{'auth':_0x30b64b[_0x3e7742(0x186)]}}),server['process'](message,![],function(){});}}),it(_0xe84b72[_0x255231(0x15f)],function(){var _0x3b0ec7=_0x255231;with(this){if(_0xe84b72[_0x3b0ec7(0x184)]('eMutB',_0x3b0ec7(0x145))){_0xe84b72[_0x3b0ec7(0x183)](stub,server,_0xe84b72[_0x3b0ec7(0x162)])[_0x3b0ec7(0x147)]([message]),_0xe84b72[_0x3b0ec7(0x15a)](stub,engine,_0xe84b72[_0x3b0ec7(0x168)]);var _0x54dab7=null;server[_0x3b0ec7(0x174)]({'channel':_0xe84b72[_0x3b0ec7(0x17c)]},![],function(_0x77c450){_0x54dab7=_0x77c450;}),assertEqual([{'channel':_0xe84b72[_0x3b0ec7(0x14d)],'data':_0xe84b72['nCFLJ']}],_0x54dab7);}else with(this){var _0x2ee894=_0x3b0ec7(0x151)[_0x3b0ec7(0x173)]('|'),_0xea9dea=0x0;while(!![]){switch(_0x2ee894[_0xea9dea++]){case'0':_0x30b64b[_0x3b0ec7(0x16b)](_0x5b825e,_0x46297c,_0x3b0ec7(0x178));continue;case'1':_0x3d72bb(_0x29bde9,_0x3b0ec7(0x17b))[_0x3b0ec7(0x147)]([_0x52fb75]);continue;case'2':var _0x30de60=null;continue;case'3':_0x424a97['process']({'channel':_0x3b0ec7(0x18a)},![],function(_0xef2e92){_0x30de60=_0xef2e92;});continue;case'4':_0x24161f([{'channel':'/foo','data':_0x30b64b[_0x3b0ec7(0x14f)],'ext':{'auth':_0x3b0ec7(0x14c)}}],_0x30de60);continue;}break;}}}});}}),describe(_0xe84b72[_0x5893b3(0x185)],function(){var _0x59cbbd=_0x5893b3,_0x4adf67={'pUuBi':_0x59cbbd(0x178),'QsNnL':_0xe84b72[_0x59cbbd(0x162)],'GVtZh':function(_0x5643f2,_0x3b2073,_0x3ead20){var _0x214f2d=_0x59cbbd;return _0xe84b72[_0x214f2d(0x150)](_0x5643f2,_0x3b2073,_0x3ead20);},'TbOZU':_0x59cbbd(0x16f),'tplsI':function(_0x1b820f,_0x38e7e1){return _0x1b820f!==_0x38e7e1;},'HIiPT':'FGsED','fimQB':_0xe84b72[_0x59cbbd(0x14d)],'jBquy':_0xe84b72[_0x59cbbd(0x17a)],'JMrEy':function(_0x402251,_0xd7825d,_0x1ac451){return _0x402251(_0xd7825d,_0x1ac451);},'oJsxg':_0xe84b72[_0x59cbbd(0x143)]};with(this){before(function(){var _0x579793=_0x59cbbd;if(_0x4adf67[_0x579793(0x182)](_0x4adf67[_0x579793(0x187)],_0x579793(0x15d))){var _0x4cad56=_0x579793(0x152)[_0x579793(0x173)]('|'),_0x1b3b82=0x0;while(!![]){switch(_0x4cad56[_0x1b3b82++]){case'0':var _0x270de3=null;continue;case'1':_0x4a3b53(_0x273db5,_0x4adf67[_0x579793(0x176)]);continue;case'2':_0x5b1b92(_0x371365,_0x4adf67['QsNnL'])['yields']([_0x587464]);continue;case'3':_0x190459[_0x579793(0x174)]({'channel':'/meta/handshake'},![],function(_0x3c678a){_0x270de3=_0x3c678a;});continue;case'4':_0x4adf67[_0x579793(0x153)](_0x303562,[{'channel':'/foo','data':_0x4adf67[_0x579793(0x155)]}],_0x270de3);continue;}break;}}else with(this){var _0x540284={'outgoing':function(_0x38748d,_0x192e56){var _0x59d3d3=_0x579793;_0x38748d[_0x59d3d3(0x156)]={'auth':'password'},_0x192e56(_0x38748d);}};server[_0x579793(0x166)](_0x540284),this[_0x579793(0x157)]={'channel':_0x4adf67['fimQB'],'data':_0x579793(0x16f)};}}),it(_0xe84b72[_0x59cbbd(0x15c)],function(){var _0x5b33f1=_0x59cbbd;with(this){expect(engine,_0x4adf67[_0x5b33f1(0x176)])[_0x5b33f1(0x142)]({'channel':_0x4adf67['fimQB'],'data':_0x4adf67[_0x5b33f1(0x155)]}),server['process'](message,![],function(){});}}),_0xe84b72[_0x59cbbd(0x15a)](it,_0x59cbbd(0x170),function(){var _0x5b0b55=_0x59cbbd;with(this){if(_0x4adf67[_0x5b0b55(0x159)]!=='HZzES')with(this){this['engine']={},_0x4adf67[_0x5b0b55(0x153)](_0x5ef06c,_0x5c49ea,_0x5b0b55(0x158))['returns'](_0x199336),this['server']=new _0x1f1f03();}else{var _0x4dfa66=_0x5b0b55(0x18c)['split']('|'),_0x53292b=0x0;while(!![]){switch(_0x4dfa66[_0x53292b++]){case'0':stub(engine,'publish');continue;case'1':_0x4adf67[_0x5b0b55(0x153)](stub,server,_0x5b0b55(0x17b))['yields']([message]);continue;case'2':_0x4adf67['JMrEy'](assertEqual,[{'channel':_0x5b0b55(0x17f),'data':_0x5b0b55(0x16f),'ext':{'auth':_0x4adf67[_0x5b0b55(0x164)]}}],_0x301bf7);continue;case'3':var _0x301bf7=null;continue;case'4':server[_0x5b0b55(0x174)]({'channel':_0x5b0b55(0x18a)},![],function(_0x14d684){_0x301bf7=_0x14d684;});continue;}break;}}}});}}),_0xe84b72['ZrGXt'](btoa,_0x5893b3(0x154));}});