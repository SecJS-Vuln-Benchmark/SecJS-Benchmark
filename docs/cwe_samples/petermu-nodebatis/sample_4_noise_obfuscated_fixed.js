'use strict';function _0x1fab(){const _0x280899=['&#37;','PFXQz','clisc','mOBSe','mnYgO','HBJmd','iktGa','JmhSy','unresolved','[[error:no-user]]','deleteNote','flags:datetime','DKLKj','post:','[[error:no-privileges]]','fhNUs','decodeHTMLEntities','KXuIL','JTURi','jutoL','secondary','hBaZr','getCidByPid','fTZox','getAllCidsFromSet','uIFjy','CkRXe','flag','ahjzh','reputation:disabled','exports','esFFH','appendHistory','exists','fields','return\x20Object.keys({a:1});','escape','./categories','[[user:muted]]','reporter','DYTnS','nGsNn','dkMfd','perPage','[[user:change-email]]','VWuDk','isArray','./plugins',':bans:timestamp','erfxF','reports','/flags/','JsVeT','new-post-flag','processSortedSet','EFeGi','deleted','FyyVl','fromUid','jLlbz','error','UYdmw','report','bUzla','getFlagIdsWithFilters','safe','sortedSetCard','FVfNA','page','BHMfu','getSortedSetRevRangeWithScores','[[flags:report-','getUserField','flagIds','filter:flags.list','./meta','getSortedSetsMembers','user:','sort',':notes','banned','added','tfQRR','[flags/init]\x20Could\x20not\x20retrieve\x20filters\x0a','[[error:','sortedSetIncrBy','sPcbV','canEdit','message','posts','username','vqpVz','./utils','incrObjectField','IiXQY','NrLRk','getObject','arByn','my-flags',':mutes:timestamp','gGLZL','WQtLf','GRBfl','hxkCr','abs','ntRLJ','warning','[[flags:state-wip]]','_filters','has','push','log','kSCpv','flagId','filter:parse.raw','index','zmHES','&#44;','reputation','fAAhG','[[user:info.muted-expiry]]','sortedSetsCard','[[error:too-many-','[[notifications:user-flagged-post-in,\x20','sortedSetAddBulk','35694tdAPBn','gMlZh','return\x20await\x20Promise.resolve(42);','value','CjSSF','rescinded','FgdXc','resolveUserPostFlags','[flags/list]\x20No\x20flag\x20filter\x20type\x20found:\x20','class','query','SEfix','downvotes','action:flags.notify','appendNote','deleteObjectFields','uMKNu','jHjiW',':posts','updateClock();','MhPbq','gCIZO','list','-already-flagged]]','gCREw','timestampISO','./analytics','uNRYr','86042JAlyzL','type','lxRGr','sEHfN','new-user-flag','can','success','warn','EatRq','Qjolw','isAdminOrGlobalMod','ZBQTT','vwTqt','./groups','flag:','pzaEe','assignee','filters','mine','IRtsp','Etksz','kCkTU','OuOOn','SgNXS','isSortedSetMember','uid:','[[flags:state-resolved]]','getObjects','user','ctudj','hQHHv','resolved','getSortedSetRevRange','MiUdp','peKdo','pDxGd','create','getHistory','./posts','sortedSetAdd','[[user:banned]]','XnRcX','658896syUtZl','reverse','[[user:info.muted-no-reason]]','FwqeB','getTargetCid','uKPiE','krpIV','getSortedSetRevUnion','action:flags.create','AoiVE','pewkE','FRsTz','getCount','rkiKc','[[error:cant-locate-flag-report]]','getMembers','map','FlagsPerDay','deleteAll','score','bXMjK','EKwjv','pFVLW','LFYiR','Jigkh','flags:byTarget','canView','/log','dcrRI','tAfvd','picture','EviuJ','default','getObjectField','targetUid','wdgpS','[[error:cant-flag-privileged]]','uid','[[flags:state-open]]','union','stringify','toUpperCase','bVFyd','hasOwnProperty','iREwR','getPostsFields','getSortedSetRangeByScore','flags:autoResolveOnBan','shift','validate','return\x20new\x20Date();','VYYFY','LtbWM','slice','[[error:user-banned]]','getSortedSetRevIntersect','Zgyvf','POST','addPostData','getNote','Global\x20Moderators','hWKbQ','ekWFi','./notifications','ZskMg','aboutme','SWOGt','global','concat','sortedSetRemove','flags:actionOnReject','-flags-per-day,\x20','labelClass','-flagged-too-many-times]]','timestamp','IHPEI','[[user:change-username]]','all','reduce','SWTVd','config','BNJtg','charAt','fYeVk','BwOhz','userslug','sJpGG','setObject','+inf','[[flags:state-','getFlagIdByTarget','flags','danger','./privileges','forEach','filter','primary','[[error:invalid-data]]','340749sItQaY','RkrzY','notify','rejected','MTuAi','KJMJm','TWjqZ','min:rep:flag','getReports','675Txrjli','xPBNe','imSyQ','gamEo','pBiOG','validator','vakdo','ypeAr','eIVau','Ddbtw',':uid:','igHHY','content','LTrxR','./user','xjemM','flags:byType:','SvZOy','[[user:info.banned-no-reason]]','cAAUn','fire','var\x20x\x20=\x2042;\x20return\x20x;','now','bdUmI','ZmsNs','getSortedSetRangeByScoreWithScores','target','fKzYh','ElMOA','SAoIY','getTarget','flags:byState:','flag:user:','mieoS','stack','flags:hash','vgtpc','getPostField','929691sfXXVJ','intersection','displayname','join',':reports','kUOHC','nozeS','RHqSa','gkJby','NiBjf','EaAZz','17064UzXIzS','tkVzI','getTargetUid','call','ONiiW','kkzlg','setPostField','getUserFields','targetId','rescindReport','uSDfS','XzEEd','state','open','filter:flags.get','get','update','cqbDA','canFlag','filter:flags.init','wss://echo.websocket.org','PxDCe','RvyWK','rqDSX','[[error:no-flag]]',':emails','flags:byTargetUid:','getUserData','wip','sHAaS','getNotes','flags:assign:','flags:byReporter:','nextFlagId','toISOString','flags:byAssignee:','prototype','hooks','HxvRa','Basoq','length','console.log(\x22timer\x22);','getSortedSetMembers','1312648UEiwDm','USQYV','lMEZO','JDfVR','bbdZG','140UmKXgY','[[notifications:user-flagged-user,\x20','ZMAkN','sortedSetScore','parsePost','kNrdC','action:flags.update','wDGuO','1OsZAqV','pEFmn','AJSuP','getUsersFields','keys','datetime','MTsGa','targetExists','replace','description','eLuCg','post','ghtHk','sortedSetRemoveBulk','getObjectsFields','vTQJX','dDdPP','increment','lCQQw',':history','YJGQQ','DJSfB','euHuU','[[error:post-deleted]]','QzwUY','pid','TrAlw','addReport','ZsFjD','DDXYu','users','OTzMq','asyYE','getTitleByPid','xxGZt','flags:byCid:','targetFlagged','yQxLP','_states','flags:byPid:','isuLQ','rescind','KgMRR','HodyI','OXUux','vkUOv','efOcu','action:flags.addReport','[[error:not-enough-reputation-to-flag,\x20','isPrivileged','setUserField','mfzaP','Xqusq','split'];_0x1fab=function(){return _0x280899;};return _0x1fab();}const _0x4a7ef9=_0x2cbb;(function(_0x42cf64,_0x33019a){const _0x2be586=_0x2cbb,_0x55fb1b=_0x42cf64();while(!![]){try{const _0x418fdb=-parseInt(_0x2be586(0x1b3))/0x1*(-parseInt(_0x2be586(0x282))/0x2)+parseInt(_0x2be586(0x141))/0x3+-parseInt(_0x2be586(0x1a6))/0x4+-parseInt(_0x2be586(0x14a))/0x5*(-parseInt(_0x2be586(0x17b))/0x6)+-parseInt(_0x2be586(0x170))/0x7+parseInt(_0x2be586(0x2ac))/0x8+-parseInt(_0x2be586(0x266))/0x9*(-parseInt(_0x2be586(0x1ab))/0xa);if(_0x418fdb===_0x33019a)break;else _0x55fb1b['push'](_0x55fb1b['shift']());}catch(_0x41e6a3){_0x55fb1b['push'](_0x55fb1b['shift']());}}}(_0x1fab,0x3516f));const _=require('lodash'),winston=require('winston'),validator=require(_0x4a7ef9(0x14f)),db=require('./database'),user=require(_0x4a7ef9(0x158)),groups=require(_0x4a7ef9(0x28f)),meta=require(_0x4a7ef9(0x234)),notifications=require(_0x4a7ef9(0x2eb)),analytics=require(_0x4a7ef9(0x280)),categories=require(_0x4a7ef9(0x20e)),topics=require('./topics'),posts=require(_0x4a7ef9(0x2a8)),privileges=require(_0x4a7ef9(0x13c)),plugins=require(_0x4a7ef9(0x218)),utils=require(_0x4a7ef9(0x245)),batch=require('./batch'),Flags=module[_0x4a7ef9(0x207)];Flags[_0x4a7ef9(0x1d9)]=new Map([[_0x4a7ef9(0x188),{'label':_0x4a7ef9(0x2d2),'class':_0x4a7ef9(0x13b)}],['wip',{'label':_0x4a7ef9(0x254),'class':_0x4a7ef9(0x253)}],[_0x4a7ef9(0x2a1),{'label':_0x4a7ef9(0x29c),'class':_0x4a7ef9(0x288)}],['rejected',{'label':'[[flags:state-rejected]]','class':_0x4a7ef9(0x1fd)}]]),Flags['init']=async function(){const _0x1b5d9a=_0x4a7ef9,_0x1445d2={'dDdPP':function(_0x5949fa,_0x22dc9a){return _0x5949fa===_0x22dc9a;},'fKzYh':'rdVTv','dcrRI':function(_0x1a6fad,_0x2bad86){return _0x1a6fad+_0x2bad86;},'bVFyd':function(_0x283892,_0x3c1d23){return _0x283892===_0x3c1d23;},'jeQCq':_0x1b5d9a(0x15a),'NrLRk':function(_0x2c33ae,_0x2ab996,_0x269354,_0x3cca97,_0x26b4ce){return _0x2c33ae(_0x2ab996,_0x269354,_0x3cca97,_0x26b4ce);},'hWKbQ':_0x1b5d9a(0x169),'SvZOy':_0x1b5d9a(0x19b),'BNJtg':_0x1b5d9a(0x19e),'SEfix':_0x1b5d9a(0x195),'eIVau':function(_0x46cab7,_0x38c809,_0x60e875,_0x5c1ffa,_0x11c468){return _0x46cab7(_0x38c809,_0x60e875,_0x5c1ffa,_0x11c468);},'lCQQw':_0x1b5d9a(0x294),'TGiMu':_0x1b5d9a(0x1f1),'sEHfN':_0x1b5d9a(0x197)};function _0x1da199(_0x1a82d4,_0x31c774,_0x5d9485,_0x163cd7){const _0x340afc=_0x1b5d9a;if(_0x1445d2[_0x340afc(0x1c3)](_0x1445d2[_0x340afc(0x165)],_0x340afc(0x15d)))throw new _0xa52dd7(_0x340afc(0x263)+_0x58c5c7+_0x340afc(0x2f3)+_0xafceaa+']]');else{if(!Array[_0x340afc(0x217)](_0x163cd7))_0x1a82d4['push'](_0x1445d2[_0x340afc(0x2c8)](_0x5d9485,_0x163cd7));else _0x163cd7['length']&&(_0x1445d2[_0x340afc(0x2d6)](_0x163cd7[_0x340afc(0x1a3)],0x1)?_0x1a82d4[_0x340afc(0x257)](_0x5d9485+_0x163cd7[0x0]):_0x31c774[_0x340afc(0x257)](_0x163cd7[_0x340afc(0x2bc)](_0x1a7f80=>_0x5d9485+_0x1a7f80)));}}const _0x40c969={'filters':{'type':function(_0x4a6b0c,_0x45502b,_0x1e687d){const _0x345314=_0x1b5d9a;_0x345314(0x1a1)===_0x345314(0x159)?_0x522213(_0x5b2c7e,_0x3f9510,_0x345314(0x169),_0x3bddb6):_0x1da199(_0x4a6b0c,_0x45502b,_0x1445d2['jeQCq'],_0x1e687d);},'state':function(_0x227260,_0x59e7a1,_0x53ac36){const _0x5ef872=_0x1b5d9a;_0x1445d2['NrLRk'](_0x1da199,_0x227260,_0x59e7a1,_0x1445d2[_0x5ef872(0x2e9)],_0x53ac36);},'reporterId':function(_0x252a3e,_0x258fe2,_0x594129){const _0x59dcab=_0x1b5d9a;_0x1445d2[_0x59dcab(0x248)](_0x1da199,_0x252a3e,_0x258fe2,_0x1445d2[_0x59dcab(0x15b)],_0x594129);},'assignee':function(_0x4d9fb9,_0x4656f9,_0x308f72){const _0x1519e8=_0x1b5d9a;_0x1445d2[_0x1519e8(0x248)](_0x1da199,_0x4d9fb9,_0x4656f9,_0x1445d2[_0x1519e8(0x2fd)],_0x308f72);},'targetUid':function(_0x30fa0b,_0x10ac05,_0x4035d4){const _0x330cc4=_0x1b5d9a;_0x1445d2[_0x330cc4(0x248)](_0x1da199,_0x30fa0b,_0x10ac05,_0x1445d2[_0x330cc4(0x271)],_0x4035d4);},'cid':function(_0x5eab58,_0x129548,_0xc48ed8){const _0x34c14b=_0x1b5d9a;_0x1445d2[_0x34c14b(0x152)](_0x1da199,_0x5eab58,_0x129548,_0x34c14b(0x1d6),_0xc48ed8);},'page':function(){},'perPage':function(){},'quick':function(_0x4768d2,_0x46d69b,_0x5525af,_0x4c1f3a){const _0x210db6=_0x1b5d9a;switch(_0x5525af){case _0x1445d2[_0x210db6(0x1c5)]:_0x4768d2[_0x210db6(0x257)](_0x210db6(0x19e)+_0x4c1f3a);break;case _0x1445d2['TGiMu']:_0x1da199(_0x4768d2,_0x46d69b,_0x1445d2[_0x210db6(0x2e9)],[_0x210db6(0x188),_0x1445d2[_0x210db6(0x285)]]);break;}}},'states':Flags['_states'],'helpers':{'prepareSets':_0x1da199}};try{({filters:Flags[_0x1b5d9a(0x255)]}=await plugins[_0x1b5d9a(0x1a0)]['fire']('filter:flags.getFilters',_0x40c969),{filters:Flags['_filters'],states:Flags['_states']}=await plugins[_0x1b5d9a(0x1a0)][_0x1b5d9a(0x15e)](_0x1b5d9a(0x18e),_0x40c969));}catch(_0x1e21ac){winston[_0x1b5d9a(0x225)](_0x1b5d9a(0x23c)+_0x1e21ac[_0x1b5d9a(0x16c)]),Flags[_0x1b5d9a(0x255)]={};}},Flags[_0x4a7ef9(0x18a)]=async function(_0x3ed9b7){const _0x2dfc9d=_0x4a7ef9,_0x236aa0={'kkzlg':'[[error:no-flag]]','fTZox':_0x2dfc9d(0x15f)},[_0x35b120,_0x7d9497,_0x1b5065]=await Promise[_0x2dfc9d(0x2f9)]([db[_0x2dfc9d(0x249)]('flag:'+_0x3ed9b7),Flags[_0x2dfc9d(0x199)](_0x3ed9b7),Flags[_0x2dfc9d(0x149)](_0x3ed9b7)]);if(!_0x35b120)throw new Error(_0x236aa0[_0x2dfc9d(0x180)]);const _0x2039ee={'state':_0x2dfc9d(0x188),'assignee':null,..._0x35b120,'datetimeISO':utils[_0x2dfc9d(0x19d)](_0x35b120[_0x2dfc9d(0x1b8)]),'target_readable':_0x35b120['type'][_0x2dfc9d(0x2fe)](0x0)[_0x2dfc9d(0x2d5)]()+_0x35b120[_0x2dfc9d(0x283)][_0x2dfc9d(0x2e1)](0x1)+'\x20'+_0x35b120['targetId'],'target':await Flags[_0x2dfc9d(0x168)](_0x35b120[_0x2dfc9d(0x283)],_0x35b120[_0x2dfc9d(0x183)],0x0),'notes':_0x7d9497,'reports':_0x1b5065},_0x49493f=await plugins[_0x2dfc9d(0x1a0)][_0x2dfc9d(0x15e)](_0x2dfc9d(0x189),{'flag':_0x2039ee});return new Function(_0x236aa0[_0x2dfc9d(0x200)])(),_0x49493f[_0x2dfc9d(0x204)];},Flags[_0x4a7ef9(0x2b8)]=async function({uid:_0xa357d9,filters:_0x7051ab,query:_0x2064d4}){const _0x7c3b0c=_0x4a7ef9,_0x133858={'EviuJ':function(_0x4e9a09,_0x202f5a){return _0x4e9a09||_0x202f5a;},'gCREw':function(_0x37a7a4,_0x4c3380,_0x2d688a){return _0x37a7a4(_0x4c3380,_0x2d688a);}};_0x7051ab=_0x133858[_0x7c3b0c(0x2cb)](_0x7051ab,{});const _0x113738=await Flags['getFlagIdsWithFilters']({'filters':_0x7051ab,'uid':_0xa357d9,'query':_0x2064d4});return _0x133858[_0x7c3b0c(0x27e)](setTimeout,function(){const _0x426e8e=_0x7c3b0c;console[_0x426e8e(0x258)](_0x426e8e(0x22a));},0x64),_0x113738[_0x7c3b0c(0x1a3)];},Flags['getFlagIdsWithFilters']=async function({filters:_0x166a47,uid:_0x102d9c,query:_0x2d79ca}){const _0x5b72a0=_0x4a7ef9,_0x191e36={'KeTgx':'perPage','VYYFY':'flags:datetime','PFXQz':function(_0x3a5b84,_0x4abfec){return _0x3a5b84===_0x4abfec;},'SWOGt':function(_0x47ea1f,_0x217bac){return _0x47ea1f!==_0x217bac;},'eLuCg':_0x5b72a0(0x25d),'gMlZh':'filter:flags.getFlagIdsWithFilters','xxGZt':function(_0x280ac1,_0xb9d660,_0x4d8deb){return _0x280ac1(_0xb9d660,_0x4d8deb);}};let _0x391c56=[];const _0x29e8ca=[];_0x166a47['page']=_0x166a47['hasOwnProperty'](_0x5b72a0(0x22d))?Math[_0x5b72a0(0x251)](parseInt(_0x166a47['page'],0xa)||0x1):0x1,_0x166a47['perPage']=_0x166a47[_0x5b72a0(0x2d7)](_0x191e36['KeTgx'])?Math[_0x5b72a0(0x251)](parseInt(_0x166a47[_0x5b72a0(0x214)],0xa)||0x14):0x14;for(const _0x31faac of Object[_0x5b72a0(0x1b7)](_0x166a47)){Flags[_0x5b72a0(0x255)][_0x5b72a0(0x2d7)](_0x31faac)?Flags['_filters'][_0x31faac](_0x391c56,_0x29e8ca,_0x166a47[_0x31faac],_0x102d9c):winston[_0x5b72a0(0x289)](_0x5b72a0(0x26e)+_0x31faac);}_0x391c56=_0x391c56[_0x5b72a0(0x1a3)]||_0x29e8ca['length']?_0x391c56:[_0x191e36[_0x5b72a0(0x2df)]];let _0x26e394=[];if(_0x191e36[_0x5b72a0(0x1ea)](_0x391c56[_0x5b72a0(0x1a3)],0x1))_0x26e394=await db['getSortedSetRevRange'](_0x391c56[0x0],0x0,-0x1);else _0x391c56[_0x5b72a0(0x1a3)]>0x1&&(_0x191e36[_0x5b72a0(0x2ee)](_0x191e36[_0x5b72a0(0x1bd)],_0x191e36['eLuCg'])?_0x31c4df['isArray'](_0x588297[_0x40e1c4])&&_0x5aef7c[_0x159223][_0x5b72a0(0x13d)](_0x170f17=>{const _0x4d3a09=_0x5b72a0;_0x2a804b[_0x4d3a09(0x257)]([_0x4d3a09(0x16d),[_0x1d31e9['type'],_0x1130b7[_0x4d3a09(0x183)],_0x170f17][_0x4d3a09(0x173)](':')]),_0x5b5c18[_0x4d3a09(0x257)](['flags:byReporter:'+_0x170f17,_0xc23cbb['flagId']]);}):_0x26e394=await db[_0x5b72a0(0x2e3)]({'sets':_0x391c56,'start':0x0,'stop':-0x1,'aggregate':'MAX'}));if(_0x29e8ca[_0x5b72a0(0x1a3)]){let _0x1d2988=await Promise['all'](_0x29e8ca[_0x5b72a0(0x2bc)](async _0x1765d1=>await db[_0x5b72a0(0x2b3)]({'sets':_0x1765d1,'start':0x0,'stop':-0x1,'aggregate':'MAX'})));_0x1d2988=_[_0x5b72a0(0x171)](..._0x1d2988),_0x391c56[_0x5b72a0(0x1a3)]?_0x26e394=_['intersection'](_0x26e394,_0x1d2988):_0x26e394=_[_0x5b72a0(0x2d3)](_0x26e394,_0x1d2988);}const _0x2e5235=await plugins[_0x5b72a0(0x1a0)][_0x5b72a0(0x15e)](_0x191e36[_0x5b72a0(0x267)],{'filters':_0x166a47,'uid':_0x102d9c,'query':_0x2d79ca,'flagIds':_0x26e394});return _0x191e36[_0x5b72a0(0x1d5)](setTimeout,function(){const _0x3fe7d1=_0x5b72a0;console[_0x3fe7d1(0x258)]('safe');},0x64),_0x2e5235[_0x5b72a0(0x232)];},Flags[_0x4a7ef9(0x27c)]=async function(_0x27ac31){const _0x353ab8=_0x4a7ef9,_0x6f8953={'IRtsp':_0x353ab8(0x188),'fYeVk':function(_0xdc9718,_0x319eee){return _0xdc9718+_0x319eee;},'LtbWM':function(_0x2de36d,_0x245e52){return _0x2de36d+_0x245e52;},'iktGa':function(_0x5d468d,_0x106039,_0x3660a9){return _0x5d468d(_0x106039,_0x3660a9);},'pEFmn':function(_0xf795c3,_0x4475dd){return _0xf795c3/_0x4475dd;},'IiXQY':function(_0x25fce0,_0x3cbe95){return _0x25fce0-_0x3cbe95;},'hQHHv':function(_0x1f5275,_0x3d65f6){return _0x1f5275*_0x3d65f6;}},_0x127c1a=_0x27ac31[_0x353ab8(0x293)]||{};let _0x361aba=await Flags[_0x353ab8(0x229)]({'filters':_0x127c1a,'uid':_0x27ac31[_0x353ab8(0x2d1)],'query':_0x27ac31[_0x353ab8(0x270)]});_0x361aba=await Flags[_0x353ab8(0x237)](_0x361aba,_0x27ac31[_0x353ab8(0x237)]);const _0x28ea09=_0x361aba[_0x353ab8(0x1a3)],_0x601a0c=Math[_0x353ab8(0x251)](_0x6f8953[_0x353ab8(0x1ef)](parseInt,_0x127c1a['perPage'],0xa)||0x1),_0x25ba4f=Math['ceil'](_0x6f8953[_0x353ab8(0x1b4)](_0x361aba[_0x353ab8(0x1a3)],_0x601a0c));_0x361aba=_0x361aba[_0x353ab8(0x2e1)](_0x6f8953[_0x353ab8(0x247)](_0x127c1a[_0x353ab8(0x22d)],0x1)*_0x601a0c,_0x6f8953[_0x353ab8(0x2a0)](_0x127c1a['page'],_0x601a0c));const _0x9438a7=await db[_0x353ab8(0x262)](_0x361aba[_0x353ab8(0x2bc)](_0x37a023=>_0x353ab8(0x290)+_0x37a023+_0x353ab8(0x174))),_0x4570ad=await Promise[_0x353ab8(0x2f9)](_0x361aba[_0x353ab8(0x2bc)](async(_0x4a5ba6,_0x307e8a)=>{const _0x27862d=_0x353ab8;let _0x4d8d0f=await db[_0x27862d(0x249)](_0x27862d(0x290)+_0x4a5ba6);return _0x4d8d0f={'state':_0x6f8953[_0x27862d(0x295)],'assignee':null,'heat':_0x9438a7[_0x307e8a],..._0x4d8d0f},_0x4d8d0f[_0x27862d(0x2f4)]=Flags[_0x27862d(0x1d9)]['get'](_0x4d8d0f['state'])[_0x27862d(0x26f)],eval('const _0x23bbe3 = _0x27862d;JSON[_0x23bbe3(724)]({ \'safe\': !![] });'),Object['assign'](_0x4d8d0f,{'target_readable':_0x6f8953[_0x27862d(0x2ff)](_0x4d8d0f[_0x27862d(0x283)][_0x27862d(0x2fe)](0x0)[_0x27862d(0x2d5)](),_0x4d8d0f[_0x27862d(0x283)][_0x27862d(0x2e1)](0x1))+'\x20'+_0x4d8d0f[_0x27862d(0x183)],'datetimeISO':utils[_0x27862d(0x19d)](_0x4d8d0f[_0x27862d(0x1b8)])});})),_0x233225=await plugins[_0x353ab8(0x1a0)]['fire'](_0x353ab8(0x233),{'flags':_0x4570ad,'page':_0x127c1a[_0x353ab8(0x22d)],'uid':_0x27ac31[_0x353ab8(0x2d1)]});return eval('const _0x2d53db = _0x353ab8;_0x6f8953[_0x2d53db(736)](1, 1);'),{'flags':_0x233225[_0x353ab8(0x13a)],'count':_0x28ea09,'page':_0x233225[_0x353ab8(0x22d)],'pageCount':_0x25ba4f};},Flags[_0x4a7ef9(0x237)]=async function(_0x36b5be,_0x4090ea){const _0x344fde=_0x4a7ef9,_0x3c1fe4={'dkMfd':function(_0x2baebe,_0x1c0ce4){return _0x2baebe+_0x1c0ce4;},'rXPdk':'oldest','Basoq':_0x344fde(0x21b),'lyWLi':'upvotes','wdgpS':_0x344fde(0x272),'WAhxF':'replies','DYTnS':function(_0x3dcdf8,_0x15a224,_0x423bc7){return _0x3dcdf8(_0x15a224,_0x423bc7);},'tAfvd':'console.log(\x22timer\x22);'},_0x3c4100=async _0xfd3ad3=>{const _0x9b26d7=_0x344fde,_0x2ee356={'fAAhG':function(_0x20ed93,_0x41d49a){const _0x5813a1=_0x2cbb;return _0x3c1fe4[_0x5813a1(0x213)](_0x20ed93,_0x41d49a);}};if(_0x9b26d7(0x291)===_0x9b26d7(0x291)){const _0x529f84=_0xfd3ad3[_0x9b26d7(0x2bc)](_0x1b8646=>_0x9b26d7(0x290)+_0x1b8646),_0x23f1c4=await db[_0x9b26d7(0x1c1)](_0x529f84,['type']);return eval('Math[\'PI\'] * 2;'),_0xfd3ad3['filter']((_0x4bd458,_0x5f3904)=>_0x23f1c4[_0x5f3904][_0x9b26d7(0x283)]==='post');}else meSzRV[_0x9b26d7(0x260)](0x1,0x1);};switch(_0x4090ea){case _0x3c1fe4['rXPdk']:_0x36b5be=_0x36b5be[_0x344fde(0x2ad)]();break;case _0x3c1fe4[_0x344fde(0x1a2)]:{const _0x3bdfb1=_0x36b5be['map'](_0x4d8c62=>_0x344fde(0x290)+_0x4d8c62+':reports'),_0x594c74=await db[_0x344fde(0x262)](_0x3bdfb1),_0x3660c6=_0x594c74['map']((_0x93a798,_0x3eb95c)=>({'index':_0x3eb95c,'heat':_0x93a798}));_0x3660c6['sort']((_0x51420a,_0x50f850)=>_0x50f850['heat']-_0x51420a['heat']),_0x36b5be=_0x3660c6['map'](_0x377374=>_0x36b5be[_0x377374[_0x344fde(0x25c)]]);break;}case _0x3c1fe4['lyWLi']:case _0x3c1fe4[_0x344fde(0x2cf)]:case _0x3c1fe4['WAhxF']:{_0x36b5be=await _0x3c4100(_0x36b5be);const _0x4dbb8f=_0x36b5be[_0x344fde(0x2bc)](_0x3e75e9=>_0x344fde(0x290)+_0x3e75e9),_0xf31b6=(await db['getObjectsFields'](_0x4dbb8f,[_0x344fde(0x183)]))[_0x344fde(0x2bc)](_0x36ad89=>_0x36ad89[_0x344fde(0x183)]),_0x3044c2=(await posts['getPostsFields'](_0xf31b6,[_0x4090ea]))[_0x344fde(0x2bc)](_0x1d1cfd=>parseInt(_0x1d1cfd[_0x4090ea],0xa)||0x0),_0x5c420b=_0x36b5be[_0x344fde(0x2fa)]((_0x203b18,_0x271870,_0x125cd1)=>{const _0x38b5e8=_0x344fde;return _0x203b18[_0x271870]=_0x3044c2[_0x125cd1],setTimeout(_0x38b5e8(0x1a4),0x3e8),_0x203b18;},{});_0x36b5be=_0x36b5be[_0x344fde(0x237)]((_0x216b03,_0xa92834)=>_0x5c420b[_0xa92834]-_0x5c420b[_0x216b03]);}}return _0x3c1fe4[_0x344fde(0x211)](setTimeout,_0x3c1fe4[_0x344fde(0x2c9)],0x3e8),_0x36b5be;},Flags[_0x4a7ef9(0x2dd)]=async function(_0x351d2f){const _0x449fbd=_0x4a7ef9,_0x3aceca={'kUOHC':function(_0x42904f,_0x91322d){return _0x42904f+_0x91322d;},'mieoS':function(_0x3d8892,_0x199b53,_0x492cba){return _0x3d8892(_0x199b53,_0x492cba);},'nGsNn':_0x449fbd(0x140),'TfGqH':_0x449fbd(0x1ca),'ChtAn':_0x449fbd(0x1f2),'FRsTz':function(_0xe2bcaa,_0x20b533){return _0xe2bcaa&&_0x20b533;},'gzylS':_0x449fbd(0x18c),'isuLQ':_0x449fbd(0x2d0),'sJpGG':'reputation:disabled','XnRcX':function(_0x418245,_0x52dc2a){return _0x418245<_0x52dc2a;},'sPcbV':_0x449fbd(0x148),'SgNXS':function(_0x5d6fd7,_0x2e251e){return _0x5d6fd7===_0x2e251e;},'QzwUY':_0x449fbd(0x29e),'TrAlw':function(_0x247154,_0x376892){return _0x247154===_0x376892;}},[_0x525274,_0x2f6304]=await Promise[_0x449fbd(0x2f9)]([Flags[_0x449fbd(0x168)](_0x351d2f[_0x449fbd(0x283)],_0x351d2f['id'],_0x351d2f['uid']),user[_0x449fbd(0x196)](_0x351d2f[_0x449fbd(0x2d1)])]);if(!_0x525274)throw new Error(_0x3aceca[_0x449fbd(0x212)]);else{if(_0x525274[_0x449fbd(0x221)])throw new Error(_0x3aceca['TfGqH']);else{if(!_0x2f6304||!_0x2f6304['userslug'])throw new Error(_0x3aceca['ChtAn']);else{if(_0x2f6304[_0x449fbd(0x239)])throw new Error(_0x449fbd(0x2e2));}}}const [_0x9ec97a,_0x80f462]=await Promise[_0x449fbd(0x2f9)]([user[_0x449fbd(0x1e4)](_0x525274[_0x449fbd(0x2d1)]),user['isPrivileged'](_0x2f6304[_0x449fbd(0x2d1)])]);if(_0x3aceca[_0x449fbd(0x2b7)](_0x9ec97a,!_0x80f462)){if(_0x3aceca['gzylS']!==_0x449fbd(0x18c))AEaVsk[_0x449fbd(0x175)](0x1,0x1);else throw new Error(_0x3aceca[_0x449fbd(0x1db)]);}if(_0x351d2f[_0x449fbd(0x283)]===_0x449fbd(0x1be)){const _0x39a4c7=await privileges['posts'][_0x449fbd(0x240)](_0x351d2f['id'],_0x351d2f[_0x449fbd(0x2d1)]);if(!_0x39a4c7[_0x449fbd(0x204)]&&!meta['config'][_0x3aceca[_0x449fbd(0x302)]]&&_0x3aceca[_0x449fbd(0x2ab)](_0x2f6304[_0x449fbd(0x25f)],meta[_0x449fbd(0x2fc)][_0x3aceca[_0x449fbd(0x23f)]]))throw new Error('[[error:not-enough-reputation-to-flag,\x20'+meta['config'][_0x3aceca[_0x449fbd(0x23f)]]+']]');}else{if(_0x3aceca[_0x449fbd(0x299)](_0x351d2f[_0x449fbd(0x283)],_0x3aceca[_0x449fbd(0x1cb)])){if(_0x3aceca[_0x449fbd(0x1cd)](parseInt(_0x351d2f['id'],0xa),parseInt(_0x351d2f[_0x449fbd(0x2d1)],0xa)))throw new Error('[[error:cant-flag-self]]');const _0x3fefc3=await privileges[_0x449fbd(0x1d1)][_0x449fbd(0x240)](_0x351d2f[_0x449fbd(0x2d1)],_0x351d2f['id']);if(!_0x3fefc3&&!meta[_0x449fbd(0x2fc)][_0x449fbd(0x206)]&&_0x3aceca[_0x449fbd(0x2ab)](_0x2f6304[_0x449fbd(0x25f)],meta['config'][_0x449fbd(0x148)]))throw new Error(_0x449fbd(0x1e3)+meta[_0x449fbd(0x2fc)][_0x3aceca[_0x449fbd(0x23f)]]+']]');}else{if(_0x449fbd(0x190)==='cRTBV'){const [_0x3aae46,_0x3ee21e]=_0x17d5e2[_0x449fbd(0x1e8)](';');_0x3aceca[_0x449fbd(0x16b)](_0x5347d9,_0x3aae46,0xa)===_0x37eb85(_0x1ed042,0xa)&&(_0x1f1e2c=_0x3ee21e);}else throw new Error(_0x3aceca[_0x449fbd(0x212)]);}}},Flags['getNotes']=async function(_0x32e1e8){const _0x2772c4=_0x4a7ef9;let _0x5baf53=await db[_0x2772c4(0x22f)]('flag:'+_0x32e1e8+_0x2772c4(0x238),0x0,-0x1);return _0x5baf53=await modifyNotes(_0x5baf53),eval('const _0xcd520c = _0x2772c4;JSON[_0xcd520c(724)]({ \'safe\': !![] });'),_0x5baf53;},Flags[_0x4a7ef9(0x2e7)]=async function(_0x434d95,_0x52209a){const _0x108e37=_0x4a7ef9,_0x5a4021={'rZHAP':function(_0x32bb9c,_0x16270f,_0x4c0966){return _0x32bb9c(_0x16270f,_0x4c0966);},'uNRYr':function(_0x46b236,_0x26bce5){return _0x46b236(_0x26bce5);},'pBiOG':function(_0x54922e,_0x5955f0){return _0x54922e===_0x5955f0;},'OsuIK':'euHuU','MTuAi':function(_0xfdaa0c,_0x5a792c){return _0xfdaa0c(_0x5a792c);}};_0x52209a=_0x5a4021['rZHAP'](parseInt,_0x52209a,0xa);if(_0x5a4021[_0x108e37(0x281)](isNaN,_0x52209a))throw new Error(_0x108e37(0x140));let _0x4f3028=await db[_0x108e37(0x163)]('flag:'+_0x434d95+_0x108e37(0x238),0x0,0x1,_0x52209a,_0x52209a);if(!_0x4f3028[_0x108e37(0x1a3)]){if(_0x5a4021[_0x108e37(0x14e)](_0x5a4021['OsuIK'],_0x108e37(0x1c9)))throw new Error(_0x108e37(0x140));else _0x31a733[_0x108e37(0x2d4)]({'safe':!![]});}return _0x4f3028=await _0x5a4021[_0x108e37(0x145)](modifyNotes,_0x4f3028),eval('1 + 1;'),_0x4f3028[0x0];},Flags[_0x4a7ef9(0x139)]=async function(_0x3e61c6,_0x314b96){const _0x264d3f=_0x4a7ef9,_0x337254={'pDxGd':_0x264d3f(0x29e),'BPTlx':_0x264d3f(0x140)};let _0x4bd7a9;switch(_0x3e61c6){case _0x264d3f(0x1be):_0x4bd7a9=posts['getPostField'];break;case _0x337254[_0x264d3f(0x2a5)]:_0x4bd7a9=user[_0x264d3f(0x231)];break;default:throw new Error(_0x337254['BPTlx']);}return eval('JSON[\'stringify\']({ \'safe\': !![] });'),await _0x4bd7a9(_0x314b96,_0x264d3f(0x25a));};async function modifyNotes(_0x2689fb){const _0x3c9af5=_0x4a7ef9,_0x2a6d97={'FVfNA':function(_0x958579,_0x5de92d,_0x1ae853){return _0x958579(_0x5de92d,_0x1ae853);},'IulPT':_0x3c9af5(0x243),'USQYV':function(_0x17c421,_0x214f96,_0x451008){return _0x17c421(_0x214f96,_0x451008);}},_0x23bf09=[];_0x2689fb=_0x2689fb['map'](_0x563795=>{const _0x4fcffe=_0x3c9af5,_0x24c248=JSON['parse'](_0x563795['value']);return _0x23bf09[_0x4fcffe(0x257)](_0x24c248[0x0]),new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),{'uid':_0x24c248[0x0],'content':_0x24c248[0x1],'datetime':_0x563795[_0x4fcffe(0x2bf)],'datetimeISO':utils['toISOString'](_0x563795[_0x4fcffe(0x2bf)])};});const _0xff4cb3=await user[_0x3c9af5(0x1b6)](_0x23bf09,[_0x2a6d97['IulPT'],_0x3c9af5(0x301),_0x3c9af5(0x2ca)]);return _0x2a6d97[_0x3c9af5(0x1a7)](setTimeout,_0x3c9af5(0x1a4),0x3e8),_0x2689fb[_0x3c9af5(0x2bc)]((_0x1cfe2f,_0x221b27)=>{const _0x129000=_0x3c9af5;if('iNWiE'!=='eoYFA')return _0x1cfe2f['user']=_0xff4cb3[_0x221b27],_0x1cfe2f['content']=validator[_0x129000(0x20d)](_0x1cfe2f[_0x129000(0x156)]),_0x2a6d97[_0x129000(0x22c)](setTimeout,_0x129000(0x1a4),0x3e8),_0x1cfe2f;else _0x309a60[_0x129000(0x258)](_0x129000(0x22a));});}function _0x2cbb(_0x5d4334,_0x42009b){const _0x1fab1d=_0x1fab();return _0x2cbb=function(_0x2cbb67,_0x517c43){_0x2cbb67=_0x2cbb67-0x139;let _0x3aa796=_0x1fab1d[_0x2cbb67];return _0x3aa796;},_0x2cbb(_0x5d4334,_0x42009b);}Flags[_0x4a7ef9(0x1f3)]=async function(_0x344067,_0x1ce632){const _0x2dbc08=_0x4a7ef9;_0x1ce632=parseInt(_0x1ce632,0xa);if(isNaN(_0x1ce632))throw new Error(_0x2dbc08(0x140));const _0x36b6b1=await db[_0x2dbc08(0x2da)](_0x2dbc08(0x290)+_0x344067+_0x2dbc08(0x238),0x0,0x1,_0x1ce632,_0x1ce632);if(!_0x36b6b1[_0x2dbc08(0x1a3)])throw new Error(_0x2dbc08(0x140));await db[_0x2dbc08(0x2f1)](_0x2dbc08(0x290)+_0x344067+_0x2dbc08(0x238),_0x36b6b1[0x0]);},Flags[_0x4a7ef9(0x2a6)]=async function(_0x3db017,_0x5b363a,_0xd95e05,_0x42da2a,_0x35913e,_0x3b08b2=![]){const _0x25d1f4=_0x4a7ef9,_0x41c1d6={'LFYiR':_0x25d1f4(0x19c),'jutoL':_0x25d1f4(0x1f4),'krpIV':'flags','gkJby':function(_0x4bd4d5,_0x4d82e7){return _0x4bd4d5===_0x4d82e7;},'sHAaS':'Tzpki','NuFSX':function(_0x260a64,_0x1d4dfb){return _0x260a64===_0x1d4dfb;},'IHPEI':_0x25d1f4(0x1be),'OuOOn':function(_0x3bf6a4,_0x227004){return _0x3bf6a4!==_0x227004;},'uSDfS':_0x25d1f4(0x29e),'pFVLW':_0x25d1f4(0x188),'EFeGi':_0x25d1f4(0x268)};let _0x5b829a=![];!_0x35913e&&(_0x35913e=Date[_0x25d1f4(0x160)](),_0x5b829a=!![]);const [_0x311524,_0x17466e,,_0x541cab,_0x44bbbe,_0x1d19c4]=await Promise['all']([Flags[_0x25d1f4(0x20a)](_0x3db017,_0x5b363a,_0xd95e05),Flags['targetExists'](_0x3db017,_0x5b363a),Flags['canFlag'](_0x3db017,_0x5b363a,_0xd95e05,_0x3b08b2),Flags[_0x25d1f4(0x1d7)](_0x3db017,_0x5b363a),Flags[_0x25d1f4(0x17d)](_0x3db017,_0x5b363a),Flags[_0x25d1f4(0x2b0)](_0x3db017,_0x5b363a)]);if(!_0x3b08b2&&_0x311524)throw new Error(_0x25d1f4(0x23d)+_0x3db017+_0x25d1f4(0x27d));else{if(!_0x17466e)throw new Error('[[error:invalid-data]]');}if(_0x541cab){const _0x1760ff=await Flags['getFlagIdByTarget'](_0x3db017,_0x5b363a);return await Promise[_0x25d1f4(0x2f9)]([Flags[_0x25d1f4(0x1ce)](_0x1760ff,_0x3db017,_0x5b363a,_0xd95e05,_0x42da2a,_0x35913e),Flags[_0x25d1f4(0x18b)](_0x1760ff,_0xd95e05,{'state':_0x25d1f4(0x188),'report':_0x25d1f4(0x23a)})]),eval('1 + 1;'),await Flags[_0x25d1f4(0x18a)](_0x1760ff);}const _0x21357d=await db[_0x25d1f4(0x246)](_0x25d1f4(0x2ef),_0x41c1d6[_0x25d1f4(0x2c3)]),_0x3888b6=[];_0x3888b6[_0x25d1f4(0x257)](db[_0x25d1f4(0x303)](_0x25d1f4(0x290)+_0x21357d,{'flagId':_0x21357d,'type':_0x3db017,'targetId':_0x5b363a,'targetUid':_0x44bbbe,'datetime':_0x35913e}),Flags[_0x25d1f4(0x1ce)](_0x21357d,_0x3db017,_0x5b363a,_0xd95e05,_0x42da2a,_0x35913e),db['sortedSetAdd'](_0x41c1d6[_0x25d1f4(0x1fc)],_0x35913e,_0x21357d),db[_0x25d1f4(0x2a9)](_0x25d1f4(0x15a)+_0x3db017,_0x35913e,_0x21357d),db[_0x25d1f4(0x23e)](_0x25d1f4(0x2c5),0x1,[_0x3db017,_0x5b363a]['join'](':')),analytics[_0x25d1f4(0x1c4)](_0x41c1d6[_0x25d1f4(0x2b2)]));_0x44bbbe&&_0x3888b6[_0x25d1f4(0x257)](db['sortedSetAdd'](_0x25d1f4(0x195)+_0x44bbbe,_0x35913e,_0x21357d));_0x1d19c4&&(_0x41c1d6[_0x25d1f4(0x178)](_0x25d1f4(0x1c7),_0x41c1d6[_0x25d1f4(0x198)])?_0x4ab4d6['PI']*0x2:_0x3888b6[_0x25d1f4(0x257)](db[_0x25d1f4(0x2a9)](_0x25d1f4(0x1d6)+_0x1d19c4,_0x35913e,_0x21357d)));if(_0x41c1d6['NuFSX'](_0x3db017,_0x41c1d6[_0x25d1f4(0x2f7)]))_0x3888b6[_0x25d1f4(0x257)](db[_0x25d1f4(0x2a9)]('flags:byPid:'+_0x5b363a,_0x35913e,_0x21357d),posts[_0x25d1f4(0x181)](_0x5b363a,_0x25d1f4(0x25a),_0x21357d)),_0x44bbbe&&parseInt(_0x44bbbe,0xa)!==parseInt(_0xd95e05,0xa)&&(_0x41c1d6[_0x25d1f4(0x298)](_0x25d1f4(0x296),_0x25d1f4(0x1cf))?_0x3888b6[_0x25d1f4(0x257)](user['incrementUserFlagsBy'](_0x44bbbe,0x1)):_0x3a6809[_0x25d1f4(0x227)]=_0x25d1f4(0x230)+_0x5d7195[_0x25d1f4(0x227)]+']]');else _0x3db017===_0x41c1d6[_0x25d1f4(0x185)]&&_0x3888b6['push'](user[_0x25d1f4(0x1e5)](_0x5b363a,'flagId',_0x21357d));await Promise[_0x25d1f4(0x2f9)](_0x3888b6);_0x5b829a&&await Flags[_0x25d1f4(0x18b)](_0x21357d,_0xd95e05,{'state':_0x41c1d6[_0x25d1f4(0x2c2)]});const _0x1a27bd=await Flags[_0x25d1f4(0x18a)](_0x21357d);return plugins[_0x25d1f4(0x1a0)]['fire'](_0x25d1f4(0x2b4),{'flag':_0x1a27bd}),new AsyncFunction(_0x41c1d6[_0x25d1f4(0x220)])(),_0x1a27bd;},Flags['purge']=async function(_0x1d2d55){const _0x559476=_0x4a7ef9,_0x309473={'EKwjv':'meYUc','lowEV':_0x559476(0x25a)},_0x1025eb=(await db[_0x559476(0x29d)](_0x1d2d55[_0x559476(0x2bc)](_0x2d744c=>_0x559476(0x290)+_0x2d744c)))[_0x559476(0x13e)](Boolean),_0x1ad5c6=_0x1025eb[_0x559476(0x13e)](_0xfaedc0=>_0xfaedc0['type']===_0x559476(0x1be)),_0x27fbe2=_0x1025eb['filter'](_0xdc72a5=>_0xdc72a5[_0x559476(0x283)]===_0x559476(0x29e)),_0x26c6a1=_0x1025eb[_0x559476(0x13e)](_0x54c311=>!!_0x54c311[_0x559476(0x292)]),[_0x3d8df9,_0x550701]=await Promise[_0x559476(0x2f9)]([db[_0x559476(0x235)](_0x1025eb['map'](_0x2395fb=>_0x559476(0x290)+_0x2395fb[_0x559476(0x25a)]+_0x559476(0x174))),categories[_0x559476(0x201)]('categories:cid')]),_0x43f18e=_0x3d8df9[_0x559476(0x2bc)](_0x1faf89=>_0x1faf89[_0x559476(0x2bc)](_0x51c2b4=>_0x51c2b4&&_0x51c2b4[_0x559476(0x1e8)](';')[0x0])),_0x188be3=[];_0x1025eb[_0x559476(0x13d)]((_0x292895,_0x28fd46)=>{const _0x7dc22d=_0x559476;if(Array['isArray'](_0x43f18e[_0x28fd46])){if(_0x309473[_0x7dc22d(0x2c1)]===_0x7dc22d(0x216))throw new _0x67dd56(_0x7dc22d(0x140));else _0x43f18e[_0x28fd46]['forEach'](_0x1db1eb=>{const _0x324723=_0x7dc22d;_0x188be3['push']([_0x324723(0x16d),[_0x292895['type'],_0x292895[_0x324723(0x183)],_0x1db1eb][_0x324723(0x173)](':')]),_0x188be3['push']([_0x324723(0x19b)+_0x1db1eb,_0x292895[_0x324723(0x25a)]]);});}}),await Promise[_0x559476(0x2f9)]([db[_0x559476(0x1c0)]([..._0x1025eb[_0x559476(0x2bc)](_0x4d8afe=>[_0x559476(0x15a)+_0x4d8afe[_0x559476(0x283)],_0x4d8afe['flagId']]),..._0x1025eb['map'](_0x591af2=>[_0x559476(0x169)+_0x591af2[_0x559476(0x187)],_0x591af2['flagId']]),..._0x188be3,..._0x1ad5c6[_0x559476(0x2bc)](_0x1e295e=>[_0x559476(0x1da)+_0x1e295e[_0x559476(0x183)],_0x1e295e[_0x559476(0x25a)]]),..._0x26c6a1[_0x559476(0x2bc)](_0x46410c=>[_0x559476(0x19e)+_0x46410c[_0x559476(0x292)],_0x46410c[_0x559476(0x25a)]]),..._0x27fbe2['map'](_0x1344c3=>[_0x559476(0x195)+_0x1344c3[_0x559476(0x2ce)],_0x1344c3['flagId']])]),db[_0x559476(0x275)](_0x1ad5c6[_0x559476(0x2bc)](_0x149e9b=>_0x559476(0x1f6)+_0x149e9b[_0x559476(0x183)],[_0x559476(0x25a)])),db[_0x559476(0x275)](_0x27fbe2['map'](_0xe58cc6=>_0x559476(0x236)+_0xe58cc6['targetId'],[_0x309473['lowEV']])),db[_0x559476(0x2be)]([..._0x1d2d55[_0x559476(0x2bc)](_0xd65653=>_0x559476(0x290)+_0xd65653),..._0x1d2d55[_0x559476(0x2bc)](_0x4dfa3a=>'flag:'+_0x4dfa3a+':notes'),..._0x1d2d55[_0x559476(0x2bc)](_0x2dc801=>'flag:'+_0x2dc801+':reports'),..._0x1d2d55[_0x559476(0x2bc)](_0x27bd02=>_0x559476(0x290)+_0x27bd02+_0x559476(0x1c6))]),db[_0x559476(0x2f1)](_0x550701[_0x559476(0x2bc)](_0x3d7bbf=>_0x559476(0x1d6)+_0x3d7bbf),_0x1d2d55),db[_0x559476(0x2f1)]('flags:datetime',_0x1d2d55),db[_0x559476(0x2f1)]('flags:byTarget',_0x1025eb[_0x559476(0x2bc)](_0x2b25c6=>[_0x2b25c6[_0x559476(0x283)],_0x2b25c6['targetId']][_0x559476(0x173)](':')))]);},Flags['getReports']=async function(_0x2564a6){const _0x3fcbac=_0x4a7ef9,_0xa55a08={'MiUdp':function(_0x1c25da,_0x2f60ac){return _0x1c25da*_0x2f60ac;},'CjSSF':function(_0x46ce28,_0x3443e4){return _0x46ce28!==_0x3443e4;},'wDGuO':_0x3fcbac(0x203),'asyYE':function(_0x32f8c5,_0x4a283a){return _0x32f8c5(_0x4a283a);},'HodyI':_0x3fcbac(0x243),'exWkj':_0x3fcbac(0x2ca),'pewkE':_0x3fcbac(0x25f),'nGpur':function(_0x45272b,_0x344da4){return _0x45272b(_0x344da4);},'KJMJm':'return\x20new\x20Date();'},_0x8540d4=await db[_0x3fcbac(0x22f)](_0x3fcbac(0x290)+_0x2564a6+':reports',0x0,-0x1),[_0x3caa28,_0x5a9987]=_0x8540d4['reduce']((_0x105c98,_0x8cd515)=>{const _0x46dea1=_0x3fcbac,_0x170a97={'DKLKj':function(_0x124345,_0x467c7c){const _0x5a447c=_0x2cbb;return _0xa55a08[_0x5a447c(0x2a3)](_0x124345,_0x467c7c);}};if(_0xa55a08[_0x46dea1(0x26a)](_0xa55a08[_0x46dea1(0x1b2)],_0xa55a08['wDGuO']))return eval('const _0x310714 = _0x46dea1;_0x170a97[_0x310714(501)](_0x20768f[\'PI\'], 2);'),!![];else{const _0x1b8d1b=_0x8cd515[_0x46dea1(0x269)][_0x46dea1(0x1e8)](';');return _0x105c98[0x1][_0x46dea1(0x257)](_0x1b8d1b[_0x46dea1(0x2dc)]()),_0x8cd515['value']=validator[_0x46dea1(0x20d)](_0xa55a08[_0x46dea1(0x1d3)](String,_0x1b8d1b[_0x46dea1(0x173)](';'))),_0x105c98[0x0][_0x46dea1(0x257)](_0x8cd515),eval('1 + 1;'),_0x105c98;}},[[],[]]);return await Promise[_0x3fcbac(0x2f9)](_0x3caa28[_0x3fcbac(0x2bc)](async(_0x2492e1,_0x4626cc)=>{const _0x279e9b=_0x3fcbac;_0x2492e1['timestamp']=_0x2492e1['score'],_0x2492e1[_0x279e9b(0x27f)]=new Date(_0x2492e1[_0x279e9b(0x2bf)])[_0x279e9b(0x19d)](),delete _0x2492e1[_0x279e9b(0x2bf)],_0x2492e1[_0x279e9b(0x210)]=await user[_0x279e9b(0x182)](_0x5a9987[_0x4626cc],[_0xa55a08[_0x279e9b(0x1de)],_0x279e9b(0x301),_0xa55a08['exWkj'],_0xa55a08[_0x279e9b(0x2b6)]]);})),_0xa55a08['nGpur'](Function,_0xa55a08[_0x3fcbac(0x146)])(),_0x3caa28;},Flags[_0x4a7ef9(0x1ce)]=async function(_0x4c4775,_0x3ef366,_0x5366e0,_0x52dd6f,_0x440a9d,_0x2e54ca){const _0x3d438c=_0x4a7ef9;await db[_0x3d438c(0x265)]([['flags:byReporter:'+_0x52dd6f,_0x2e54ca,_0x4c4775],[_0x3d438c(0x290)+_0x4c4775+_0x3d438c(0x174),_0x2e54ca,[_0x52dd6f,_0x440a9d][_0x3d438c(0x173)](';')],['flags:hash',_0x4c4775,[_0x3ef366,_0x5366e0,_0x52dd6f][_0x3d438c(0x173)](':')]]),plugins[_0x3d438c(0x1a0)][_0x3d438c(0x15e)](_0x3d438c(0x1e2),{'flagId':_0x4c4775,'type':_0x3ef366,'id':_0x5366e0,'uid':_0x52dd6f,'reason':_0x440a9d,'timestamp':_0x2e54ca});},Flags[_0x4a7ef9(0x184)]=async(_0x367c9e,_0x14b395,_0x7bb6d4)=>{const _0x49fbdc=_0x4a7ef9,_0x325bc6={'vkUOv':function(_0x76dc83,_0xcf3eae,_0x3487e2){return _0x76dc83(_0xcf3eae,_0x3487e2);},'OXUux':function(_0x19273e,_0x1ed651){return _0x19273e!==_0x1ed651;},'Ddbtw':_0x49fbdc(0x24f),'hBaZr':_0x49fbdc(0x16d),'RkrzY':_0x49fbdc(0x2af),'lMEZO':_0x49fbdc(0x2ba),'MZXZo':function(_0x39b477,_0x3dfe78){return _0x39b477<_0x3dfe78;},'esFFH':_0x49fbdc(0x268)},_0x6c1c6b=await Flags[_0x49fbdc(0x20a)](_0x367c9e,_0x14b395,_0x7bb6d4);if(!_0x6c1c6b)return eval('Math[\'PI\'] * 2;'),!![];const _0x1f2b19=await db[_0x49fbdc(0x1ae)](_0x325bc6[_0x49fbdc(0x1fe)],[_0x367c9e,_0x14b395,_0x7bb6d4][_0x49fbdc(0x173)](':')),_0x24efb5=await db[_0x49fbdc(0x1a5)](_0x49fbdc(0x290)+_0x1f2b19+_0x49fbdc(0x174));let _0x4309be;_0x24efb5[_0x49fbdc(0x13d)](_0x21b360=>{const _0x13d99c=_0x49fbdc;if(!_0x4309be){const [_0x441401,_0x1fd851]=_0x21b360['split'](';');if(parseInt(_0x441401,0xa)===_0x325bc6[_0x13d99c(0x1e0)](parseInt,_0x7bb6d4,0xa)){if(_0x325bc6[_0x13d99c(0x1df)](_0x325bc6[_0x13d99c(0x153)],_0x13d99c(0x24f)))throw _0x34c7de;else _0x4309be=_0x1fd851;}}});if(!_0x4309be){if(_0x49fbdc(0x2af)!==_0x325bc6[_0x49fbdc(0x142)]){new _0x2e76e4(_0x49fbdc(0x268))();return;}else throw new Error(_0x325bc6[_0x49fbdc(0x1a8)]);}await db[_0x49fbdc(0x1c0)]([[_0x49fbdc(0x19b)+_0x7bb6d4,_0x1f2b19],['flag:'+_0x1f2b19+_0x49fbdc(0x174),[_0x7bb6d4,_0x4309be][_0x49fbdc(0x173)](';')],['flags:hash',[_0x367c9e,_0x14b395,_0x7bb6d4][_0x49fbdc(0x173)](':')]]);const _0xeced02=await db[_0x49fbdc(0x22b)]('flag:'+_0x1f2b19+_0x49fbdc(0x174));_0x325bc6['MZXZo'](_0xeced02,0x1)&&await Flags[_0x49fbdc(0x18b)](_0x1f2b19,_0x7bb6d4,{'state':'resolved','report':_0x49fbdc(0x26b)}),new AsyncFunction(_0x325bc6[_0x49fbdc(0x208)])();},Flags[_0x4a7ef9(0x20a)]=async function(_0xce48d8,_0x245a57,_0x3fa8ef){const _0x223f77=_0x4a7ef9,_0x156ab4={'gCIZO':'flags:hash'};return eval('Math[\'PI\'] * 2;'),await db[_0x223f77(0x29a)](_0x156ab4[_0x223f77(0x27b)],[_0xce48d8,_0x245a57,_0x3fa8ef][_0x223f77(0x173)](':'));},Flags[_0x4a7ef9(0x2c6)]=async(_0x4bca61,_0xd9de79)=>{const _0x2d0617=_0x4a7ef9,_0x30d5ff={'ypeAr':_0x2d0617(0x15f),'uGUpZ':function(_0x53edda,_0x67278b){return _0x53edda===_0x67278b;}},_0x34c556=await db[_0x2d0617(0x29a)](_0x2d0617(0x1f4),_0x4bca61);if(!_0x34c556)return new Function(_0x30d5ff[_0x2d0617(0x151)])(),![];const [{type:_0x320818,targetId:_0xb00b6e},_0x14b48c]=await Promise['all']([db[_0x2d0617(0x249)](_0x2d0617(0x290)+_0x4bca61),user[_0x2d0617(0x28c)](_0xd9de79)]);if(_0x30d5ff['uGUpZ'](_0x320818,_0x2d0617(0x1be))){const _0x4be452=await Flags[_0x2d0617(0x2b0)](_0x320818,_0xb00b6e),_0x1ef524=await user['isModerator'](_0xd9de79,_0x4be452);return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),_0x14b48c||_0x1ef524;}return Function(_0x2d0617(0x20c))(),_0x14b48c;},Flags[_0x4a7ef9(0x18d)]=async function(_0x59bc46,_0x728a96,_0x31cb52,_0x210a0e=![]){const _0x527df3=_0x4a7ef9,_0x902ba5={'rkPYF':function(_0x2ca16c,_0x308308){return _0x2ca16c>_0x308308;},'qxGCs':function(_0x391612,_0x2d5d4a){return _0x391612===_0x2d5d4a;},'hxkCr':_0x527df3(0x277),'tnINO':_0x527df3(0x29e),'Jigkh':_0x527df3(0x279)},_0x1fd235=meta['config']['flags:limitPerTarget'];if(!_0x210a0e&&_0x902ba5['rkPYF'](_0x1fd235,0x0)){const _0x230fc1=await db[_0x527df3(0x1ae)]('flags:byTarget',_0x59bc46+':'+_0x728a96);if(_0x230fc1>=_0x1fd235)throw new Error(_0x527df3(0x23d)+_0x59bc46+_0x527df3(0x2f5));}const _0xf11460=0x18*0x3c*0x3c*0x3e8,_0x59fa37=Date[_0x527df3(0x160)](),[_0x4267f5,_0x1ff597,_0x39d6cb]=await Promise[_0x527df3(0x2f9)]([db[_0x527df3(0x2da)](_0x527df3(0x19b)+_0x31cb52,0x0,-0x1,_0x59fa37-_0xf11460,_0x527df3(0x304)),privileges[_0x527df3(0x242)][_0x527df3(0x287)]('topics:read',_0x728a96,_0x31cb52),user[_0x527df3(0x1e4)](_0x31cb52)]),_0x2d06fc=meta[_0x527df3(0x2fc)]['flags:'+_0x59bc46+_0x527df3(0x2bd)];if(!_0x39d6cb&&_0x2d06fc>0x0){const _0x735c6=await db['getObjects'](_0x4267f5[_0x527df3(0x2bc)](_0x3093dd=>'flag:'+_0x3093dd)),_0x55282a=_0x735c6[_0x527df3(0x13e)](_0xa9b8a=>_0xa9b8a&&_0xa9b8a[_0x527df3(0x283)]===_0x59bc46);if(_0x2d06fc>0x0&&_0x55282a[_0x527df3(0x1a3)]>_0x2d06fc){if(_0x902ba5['qxGCs'](_0x902ba5[_0x527df3(0x250)],_0x527df3(0x14b)))throw new _0x59dc67(_0x527df3(0x140));else throw new Error(_0x527df3(0x263)+_0x59bc46+_0x527df3(0x2f3)+_0x2d06fc+']]');}}switch(_0x59bc46){case _0x902ba5['tnINO']:setInterval(_0x902ba5[_0x527df3(0x2c4)],0x3e8);return!![];case _0x527df3(0x1be):if(!_0x1ff597)throw new Error(_0x527df3(0x1f7));break;default:throw new Error(_0x527df3(0x140));}},Flags[_0x4a7ef9(0x168)]=async function(_0x5d6e0e,_0x262c7f,_0x12a0d2){const _0x26d7d1=_0x4a7ef9,_0x4e50b5={'vgtpc':function(_0x36e4c7,_0x379ac6){return _0x36e4c7===_0x379ac6;},'EaAZz':function(_0xf1d759,_0x39262a){return _0xf1d759(_0x39262a);},'vakdo':function(_0x14f247,_0x3792c5,_0x4ba089){return _0x14f247(_0x3792c5,_0x4ba089);},'mTUWT':_0x26d7d1(0x1be),'erfxF':function(_0x87e4d7,_0x31808c){return _0x87e4d7!==_0x31808c;},'IstOp':_0x26d7d1(0x202),'AJSuP':_0x26d7d1(0x1a4),'ahjzh':'[[error:invalid-data]]'};if(_0x4e50b5[_0x26d7d1(0x16e)](_0x5d6e0e,'user')){const _0x1b4b99=await user['getUserData'](_0x262c7f);return _0x1b4b99[_0x26d7d1(0x2ed)]=validator[_0x26d7d1(0x20d)](_0x4e50b5[_0x26d7d1(0x17a)](String,_0x1b4b99[_0x26d7d1(0x2ed)])),_0x4e50b5[_0x26d7d1(0x150)](setTimeout,function(){const _0x360e21=_0x26d7d1;console[_0x360e21(0x258)]('safe');},0x64),_0x1b4b99&&_0x1b4b99[_0x26d7d1(0x2d1)]?_0x1b4b99:{};}if(_0x4e50b5[_0x26d7d1(0x16e)](_0x5d6e0e,_0x4e50b5['mTUWT'])){let _0x2eccb4=await posts['getPostData'](_0x262c7f);if(!_0x2eccb4){if(_0x4e50b5[_0x26d7d1(0x21a)](_0x26d7d1(0x202),_0x4e50b5['IstOp']))_0x4bc824['push'](_0x48721d(_0x26d7d1(0x290)+_0x585ec2['type']+':'+_0xc58a5e[_0x26d7d1(0x183)]));else return setTimeout(_0x4e50b5[_0x26d7d1(0x1b5)],0x3e8),{};}return _0x2eccb4=await posts[_0x26d7d1(0x1af)](_0x2eccb4),_0x2eccb4=await topics[_0x26d7d1(0x2e6)]([_0x2eccb4],_0x12a0d2),_0x4e50b5[_0x26d7d1(0x150)](setTimeout,'console.log(\x22timer\x22);',0x3e8),_0x2eccb4[0x0];}throw new Error(_0x4e50b5[_0x26d7d1(0x205)]);},Flags[_0x4a7ef9(0x1ba)]=async function(_0x283d28,_0x2ce285){const _0xb9dabb=_0x4a7ef9,_0xd039d2={'OTzMq':function(_0x225542,_0x3cb5eb){return _0x225542*_0x3cb5eb;},'arByn':function(_0x2d3641,_0x42c8c9){return _0x2d3641===_0x42c8c9;},'ZgUcN':_0xb9dabb(0x1be),'ZmsNs':function(_0x2044c1,_0x34d441){return _0x2044c1===_0x34d441;},'SWTVd':_0xb9dabb(0x29e),'vTQJX':'vqpVz','ebmow':_0xb9dabb(0x1a4)};if(_0xd039d2[_0xb9dabb(0x24a)](_0x283d28,_0xd039d2['ZgUcN']))return eval('const _0xeb616 = _0xb9dabb;_0xd039d2[_0xeb616(466)](Math[\'PI\'], 2);'),await posts['exists'](_0x2ce285);else{if(_0xd039d2[_0xb9dabb(0x162)](_0x283d28,_0xd039d2[_0xb9dabb(0x2fb)])){if(_0xd039d2[_0xb9dabb(0x1c2)]===_0xb9dabb(0x244))return setTimeout(_0xd039d2['ebmow'],0x3e8),await user[_0xb9dabb(0x20a)](_0x2ce285);else _0xbae2f4=_0x2ffba2[_0xb9dabb(0x171)](_0x992580,_0x56e347);}}throw new Error(_0xb9dabb(0x140));},Flags[_0x4a7ef9(0x1d7)]=async function(_0x5dd0b8,_0x3f970f){const _0x3b23e5=_0x4a7ef9,_0x35f857={'BwOhz':_0x3b23e5(0x279),'CYQwl':_0x3b23e5(0x2c5)};return setInterval(_0x35f857[_0x3b23e5(0x300)],0x3e8),await db[_0x3b23e5(0x1ae)](_0x35f857['CYQwl'],[_0x5dd0b8,_0x3f970f][_0x3b23e5(0x173)](':'))>=0x1;},Flags[_0x4a7ef9(0x17d)]=async function(_0x45c900,_0x3d803e){const _0x411e6c=_0x4a7ef9,_0x361100={'gvInh':function(_0x2cb1e1,_0x5163bb){return _0x2cb1e1===_0x5163bb;},'rkiKc':function(_0x248865,_0x52f550){return _0x248865(_0x52f550);},'MhPbq':'return\x20new\x20Date();'};if(_0x361100['gvInh'](_0x45c900,_0x411e6c(0x1be)))return _0x361100[_0x411e6c(0x2b9)](Function,_0x411e6c(0x2de))(),await posts[_0x411e6c(0x16f)](_0x3d803e,'uid');return Function(_0x361100[_0x411e6c(0x27a)])(),_0x3d803e;},Flags['getTargetCid']=async function(_0x42a220,_0x27e4ca){const _0x5c945a=_0x4a7ef9,_0x3a3138={'EatRq':function(_0x6ec893,_0x2e3847){return _0x6ec893===_0x2e3847;},'iREwR':_0x5c945a(0x1be),'uKPiE':function(_0x2730cd,_0x309d1a,_0xd0b541){return _0x2730cd(_0x309d1a,_0xd0b541);}};if(_0x3a3138[_0x5c945a(0x28a)](_0x42a220,_0x3a3138[_0x5c945a(0x2d8)]))return _0x3a3138[_0x5c945a(0x2b1)](setTimeout,_0x5c945a(0x1a4),0x3e8),await posts[_0x5c945a(0x1ff)](_0x27e4ca);return eval('1 + 1;'),null;},Flags['update']=async function(_0xc2fad9,_0x9dd855,_0x4ed1d0){const _0x3d53a2=_0x4a7ef9,_0x11e2e3={'BHMfu':function(_0x2f1144,_0x26738c){return _0x2f1144===_0x26738c;},'kSCpv':function(_0x4b3949,_0x493eb0,_0x44f66d){return _0x4b3949(_0x493eb0,_0x44f66d);},'gskxL':_0x3d53a2(0x24b),'ekWFi':function(_0x1db50f,_0x16a26e){return _0x1db50f===_0x16a26e;},'pveQM':function(_0x558081,_0x405b4b,_0x2043ea,_0x207670,_0x269887){return _0x558081(_0x405b4b,_0x2043ea,_0x207670,_0x269887);},'Sxgoj':_0x3d53a2(0x19e),'JmhSy':_0x3d53a2(0x2d1),'imSyQ':_0x3d53a2(0x187),'bdUmI':'assignee','FyyVl':_0x3d53a2(0x283),'efOcu':_0x3d53a2(0x2de),'ZBQTT':_0x3d53a2(0x192),'DJSfB':_0x3d53a2(0x1d8),'JDfVR':'flags:actionOnResolve','bXMjK':_0x3d53a2(0x144),'clisc':function(_0xfb8c52,_0x7b5968){return _0xfb8c52===_0x7b5968;},'Qjolw':function(_0x12ac72,_0x4c5721){return _0x12ac72===_0x4c5721;},'tfQRR':function(_0x2b6fe0,_0x480be9){return _0x2b6fe0(_0x480be9);}},_0x4907ef=await db['getObjectFields'](_0x3d53a2(0x290)+_0xc2fad9,[_0x11e2e3[_0x3d53a2(0x1f0)],_0x11e2e3[_0x3d53a2(0x14c)],_0x11e2e3[_0x3d53a2(0x161)],_0x11e2e3[_0x3d53a2(0x222)],_0x3d53a2(0x183)]);if(!_0x4907ef['type']){Function(_0x11e2e3[_0x3d53a2(0x1e1)])();return;}const _0x3c2bfc=_0x4ed1d0['datetime']||Date[_0x3d53a2(0x160)](),_0x1b017c=async function(_0x5d6dcf){const _0x2e50bc=_0x3d53a2;if(_0x11e2e3[_0x2e50bc(0x22e)](_0x5d6dcf,'')||_0x11e2e3[_0x2e50bc(0x259)](parseInt,_0x9dd855,0xa)===parseInt(_0x5d6dcf,0xa)){new AsyncFunction('return\x20await\x20Promise.resolve(42);')();return;}const _0x264094=await notifications[_0x2e50bc(0x2a6)]({'type':_0x11e2e3['gskxL'],'bodyShort':'[[notifications:flag-assigned-to-you,\x20'+_0xc2fad9+']]','bodyLong':'','path':'/flags/'+_0xc2fad9,'nid':_0x2e50bc(0x19a)+_0xc2fad9+_0x2e50bc(0x154)+_0x5d6dcf,'from':_0x9dd855});await notifications[_0x2e50bc(0x257)](_0x264094,[_0x5d6dcf]);},_0x20a3cf=async function(_0x44b67d){const _0x2e8ca7=_0x3d53a2,_0xdea7c4={'KgMRR':function(_0x386b4b,_0x49298d){return _0x386b4b*_0x49298d;}};let _0x30dcf0=![];_0x30dcf0=await user[_0x2e8ca7(0x28c)](_0x44b67d);if(!_0x30dcf0&&_0x11e2e3[_0x2e8ca7(0x2ea)](_0x4907ef[_0x2e8ca7(0x283)],_0x2e8ca7(0x1be))){const _0x382e68=await posts['getCidByPid'](_0x4907ef['targetId']);_0x30dcf0=await user['isModerator'](_0x44b67d,_0x382e68);}return eval('const _0x25bd4e = _0x2e8ca7;_0xdea7c4[_0x25bd4e(477)](Math[\'PI\'], 2);'),_0x30dcf0;};async function _0x15e904(_0x5e4238){const _0x5ab8c8=await db['getSortedSetScan']({'key':'notifications','match':_0x5e4238+'*'});return eval('const _0x21d763 = _0x2cbb;JSON[_0x21d763(724)]({ \'safe\': !![] });'),notifications['rescind'](_0x5ab8c8);}const _0x2fae3c=[];for(const _0x311ab2 of Object[_0x3d53a2(0x1b7)](_0x4ed1d0)){if(_0x11e2e3['BHMfu'](_0x4907ef[_0x311ab2],_0x4ed1d0[_0x311ab2]))delete _0x4ed1d0[_0x311ab2];else{if(_0x311ab2===_0x3d53a2(0x187))_0x11e2e3[_0x3d53a2(0x28d)]!==_0x11e2e3[_0x3d53a2(0x1c8)]?!Flags[_0x3d53a2(0x1d9)][_0x3d53a2(0x256)](_0x4ed1d0[_0x311ab2])?delete _0x4ed1d0[_0x311ab2]:(_0x2fae3c[_0x3d53a2(0x257)](db[_0x3d53a2(0x2a9)](_0x3d53a2(0x169)+_0x4ed1d0[_0x311ab2],_0x3c2bfc,_0xc2fad9)),_0x2fae3c['push'](db[_0x3d53a2(0x2f1)]('flags:byState:'+_0x4907ef[_0x311ab2],_0xc2fad9)),_0x4ed1d0[_0x311ab2]===_0x3d53a2(0x2a1)&&meta['config'][_0x11e2e3[_0x3d53a2(0x1a9)]]===_0x3d53a2(0x1dc)&&_0x2fae3c['push'](_0x15e904(_0x3d53a2(0x290)+_0x4907ef[_0x3d53a2(0x283)]+':'+_0x4907ef[_0x3d53a2(0x183)])),_0x11e2e3[_0x3d53a2(0x22e)](_0x4ed1d0[_0x311ab2],_0x11e2e3[_0x3d53a2(0x2c0)])&&_0x11e2e3[_0x3d53a2(0x1eb)](meta[_0x3d53a2(0x2fc)][_0x3d53a2(0x2f2)],_0x3d53a2(0x1dc))&&_0x2fae3c[_0x3d53a2(0x257)](_0x15e904('flag:'+_0x4907ef['type']+':'+_0x4907ef['targetId']))):_0x11e2e3['pveQM'](_0x5bddcb,_0x27767b,_0x330bc,_0x11e2e3['Sxgoj'],_0x533c5d);else{if(_0x311ab2===_0x11e2e3[_0x3d53a2(0x161)]){if(_0x11e2e3[_0x3d53a2(0x1eb)](_0x3d53a2(0x2b5),_0x3d53a2(0x2b5))){if(_0x11e2e3[_0x3d53a2(0x28b)](_0x4ed1d0[_0x311ab2],''))_0x2fae3c[_0x3d53a2(0x257)](db['sortedSetRemove']('flags:byAssignee:'+_0x4ed1d0[_0x311ab2],_0xc2fad9));else!await _0x20a3cf(parseInt(_0x4ed1d0[_0x311ab2],0xa))?delete _0x4ed1d0[_0x311ab2]:(_0x2fae3c[_0x3d53a2(0x257)](db[_0x3d53a2(0x2a9)](_0x3d53a2(0x19e)+_0x4ed1d0[_0x311ab2],_0x3c2bfc,_0xc2fad9)),_0x2fae3c[_0x3d53a2(0x257)](_0x1b017c(_0x4ed1d0[_0x311ab2])));}else _0x5dc37b=_0x177cde;}}}}if(!Object[_0x3d53a2(0x1b7)](_0x4ed1d0)[_0x3d53a2(0x1a3)]){new Function('var\x20x\x20=\x2042;\x20return\x20x;')();return;}_0x2fae3c[_0x3d53a2(0x257)](db[_0x3d53a2(0x303)](_0x3d53a2(0x290)+_0xc2fad9,_0x4ed1d0)),_0x2fae3c[_0x3d53a2(0x257)](Flags[_0x3d53a2(0x209)](_0xc2fad9,_0x9dd855,_0x4ed1d0)),await Promise[_0x3d53a2(0x2f9)](_0x2fae3c),plugins['hooks'][_0x3d53a2(0x15e)](_0x3d53a2(0x1b1),{'flagId':_0xc2fad9,'changeset':_0x4ed1d0,'uid':_0x9dd855}),_0x11e2e3[_0x3d53a2(0x23b)](WebSocket,_0x3d53a2(0x18f));},Flags['resolveFlag']=async function(_0x5d2b36,_0x2bc6a5,_0x4535c1){const _0x5cafc3=_0x4a7ef9,_0x11b6bf={'ntRLJ':function(_0x84219c,_0x57e745,_0x1ae258){return _0x84219c(_0x57e745,_0x1ae258);},'fhNUs':function(_0x4b01f9,_0x2a2cb2,_0x4919ed){return _0x4b01f9(_0x2a2cb2,_0x4919ed);},'RHqSa':function(_0xd926c9,_0x2a9b0a){return _0xd926c9!==_0x2a9b0a;},'JsVeT':_0x5cafc3(0x284),'Zgyvf':_0x5cafc3(0x2a1),'bbdZG':_0x5cafc3(0x2c7)},_0x36f405=await Flags['getFlagIdByTarget'](_0x5d2b36,_0x2bc6a5);if(_0x11b6bf[_0x5cafc3(0x1f8)](parseInt,_0x36f405,0xa)){if(_0x11b6bf[_0x5cafc3(0x177)](_0x5cafc3(0x1fb),_0x11b6bf[_0x5cafc3(0x21d)]))await Flags[_0x5cafc3(0x18b)](_0x36f405,_0x4535c1,{'state':_0x11b6bf[_0x5cafc3(0x2e4)]});else{if(!_0x5e813b){const [_0x73771d,_0x53f1da]=_0x3a54e7[_0x5cafc3(0x1e8)](';');_0x11b6bf[_0x5cafc3(0x252)](_0x35fb23,_0x73771d,0xa)===_0xb7583(_0x2e6773,0xa)&&(_0x3644fd=_0x53f1da);}}}XMLHttpRequest[_0x5cafc3(0x19f)]['open'][_0x5cafc3(0x17e)](xhr,_0x5cafc3(0x2e5),_0x11b6bf[_0x5cafc3(0x1aa)]);},Flags[_0x4a7ef9(0x26d)]=async function(_0x50c4c7,_0x1b73ec){const _0x4f43ef=_0x4a7ef9,_0x86c1d8={'gGLZL':function(_0x449abc,_0x12b762){return _0x449abc===_0x12b762;},'KfQcg':_0x4f43ef(0x193),'gbhHe':function(_0x110215,_0x55ac0b){return _0x110215===_0x55ac0b;},'SAoIY':_0x4f43ef(0x25a),'mOBSe':_0x4f43ef(0x1fa),'igHHY':_0x4f43ef(0x2a1),'Xqusq':_0x4f43ef(0x2db)};meta['config'][_0x86c1d8[_0x4f43ef(0x1e7)]]&&await batch[_0x4f43ef(0x21f)](_0x4f43ef(0x29b)+_0x50c4c7+_0x4f43ef(0x278),async _0x3b77ae=>{const _0x1456cc=_0x4f43ef,_0x421f4c={'ONiiW':_0x86c1d8['KfQcg']};if(_0x86c1d8['gbhHe'](_0x1456cc(0x276),'uMKNu')){let _0x21dbc2=await posts[_0x1456cc(0x2d9)](_0x3b77ae,[_0x1456cc(0x1cc),_0x86c1d8[_0x1456cc(0x167)]]);_0x21dbc2=_0x21dbc2['filter'](_0x3900fc=>_0x3900fc&&_0x3900fc[_0x1456cc(0x25a)]&&parseInt(_0x3900fc[_0x1456cc(0x25a)],0xa));for(const _0x4ca54b of _0x21dbc2){if(_0x1456cc(0x17c)!==_0x86c1d8[_0x1456cc(0x1ec)])await Flags[_0x1456cc(0x18b)](_0x4ca54b[_0x1456cc(0x25a)],_0x1b73ec,{'state':_0x86c1d8[_0x1456cc(0x155)]});else throw new _0x4b3985(_0x421f4c[_0x1456cc(0x17f)]);}}else _0x86c1d8[_0x1456cc(0x24d)](_0x36b6c4[_0x1456cc(0x1a3)],0x1)?_0x280588[_0x1456cc(0x257)](_0x8a2b3e+_0x3826e9[0x0]):_0x4d51f2['push'](_0x29337f['map'](_0x38fe0e=>_0x532511+_0x38fe0e));},{'batch':0x1f4});},Flags[_0x4a7ef9(0x2a7)]=async function(_0x22d818){const _0x389293=_0x4a7ef9,_0x139378={'LTrxR':'state','mfzaP':function(_0x1ddab2,_0x4a2924){return _0x1ddab2===_0x4a2924;},'MTsGa':_0x389293(0x227),'OeUjV':function(_0x13d45a,_0x4e358b){return _0x13d45a(_0x4e358b);},'mnYgO':'assignee','QbEGy':function(_0x1ab84d,_0x1a6f11,_0x39f19e,_0x34294b){return _0x1ab84d(_0x1a6f11,_0x39f19e,_0x34294b);},'FgdXc':function(_0x2c287f,_0x514a47,_0x1ec017,_0x12d027){return _0x2c287f(_0x514a47,_0x1ec017,_0x12d027);},'pwwmd':_0x389293(0x301)},_0xcbafda=[];let _0x264a59=await db[_0x389293(0x22f)](_0x389293(0x290)+_0x22d818+_0x389293(0x1c6),0x0,-0x1);const _0x4afe2a=await db[_0x389293(0x2cd)]('flag:'+_0x22d818,_0x389293(0x2ce));_0x264a59=_0x264a59['map'](_0x8f9389=>{const _0x1f37d4=_0x389293;_0x8f9389[_0x1f37d4(0x269)]=JSON['parse'](_0x8f9389[_0x1f37d4(0x269)]),_0xcbafda[_0x1f37d4(0x257)](_0x8f9389[_0x1f37d4(0x269)][0x0]);const _0x403335=_0x8f9389[_0x1f37d4(0x269)][0x1];return _0x403335[_0x1f37d4(0x2d7)](_0x139378[_0x1f37d4(0x157)])&&(_0x403335[_0x1f37d4(0x187)]=_0x139378[_0x1f37d4(0x1e6)](_0x403335['state'],undefined)?'':_0x1f37d4(0x305)+_0x403335[_0x1f37d4(0x187)]+']]'),_0x403335[_0x1f37d4(0x2d7)](_0x139378[_0x1f37d4(0x1b9)])&&(_0x403335[_0x1f37d4(0x227)]='[[flags:report-'+_0x403335[_0x1f37d4(0x227)]+']]'),_0x139378['OeUjV'](Function,_0x1f37d4(0x2de))(),{'uid':_0x8f9389[_0x1f37d4(0x269)][0x0],'fields':_0x403335,'datetime':_0x8f9389[_0x1f37d4(0x2bf)],'datetimeISO':utils[_0x1f37d4(0x19d)](_0x8f9389[_0x1f37d4(0x2bf)])};}),await Promise[_0x389293(0x2f9)](_0x264a59[_0x389293(0x2bc)](async _0x345894=>{const _0x65b6df=_0x389293;_0x345894[_0x65b6df(0x20b)]['hasOwnProperty'](_0x139378[_0x65b6df(0x1ed)])&&(_0x345894[_0x65b6df(0x20b)][_0x65b6df(0x292)]=await user[_0x65b6df(0x231)](_0x345894[_0x65b6df(0x20b)][_0x65b6df(0x292)],_0x65b6df(0x243)));})),_0x264a59=await _0x139378['QbEGy'](mergeBanHistory,_0x264a59,_0x4afe2a,_0xcbafda),_0x264a59=await mergeMuteHistory(_0x264a59,_0x4afe2a,_0xcbafda),_0x264a59=await _0x139378[_0x389293(0x26c)](mergeUsernameEmailChanges,_0x264a59,_0x4afe2a,_0xcbafda);const _0x490dc3=await user['getUsersFields'](_0xcbafda,[_0x389293(0x243),_0x139378['pwwmd'],'picture']);return _0x264a59[_0x389293(0x13d)]((_0x26b276,_0x188b28)=>{_0x26b276['user']=_0x490dc3[_0x188b28];}),_0x264a59=_0x264a59[_0x389293(0x237)]((_0x3d0da5,_0x44afab)=>_0x44afab['datetime']-_0x3d0da5[_0x389293(0x1b8)]),new Function(_0x389293(0x15f))(),_0x264a59;},Flags[_0x4a7ef9(0x209)]=async function(_0x2dfd5c,_0x2d1959,_0x560e8f){const _0x4ed3e9=_0x4a7ef9,_0x3e540e=_0x560e8f[_0x4ed3e9(0x1b8)]||Date[_0x4ed3e9(0x160)]();delete _0x560e8f[_0x4ed3e9(0x1b8)];const _0x32b075=JSON[_0x4ed3e9(0x2d4)]([_0x2d1959,_0x560e8f,_0x3e540e]);await db[_0x4ed3e9(0x2a9)](_0x4ed3e9(0x290)+_0x2dfd5c+_0x4ed3e9(0x1c6),_0x3e540e,_0x32b075);},Flags[_0x4a7ef9(0x274)]=async function(_0xb914b0,_0x2fcd2d,_0x31608f,_0x1c2701){const _0x355680=_0x4a7ef9,_0x48d510={'VbnKo':_0x355680(0x14d),'eTamE':'ElMOA'};if(_0x1c2701){if(_0x355680(0x224)!==_0x48d510['VbnKo'])try{_0x355680(0x166)!==_0x48d510['eTamE']?_0x53b0c9[_0x355680(0x2d4)]({'safe':!![]}):await Flags['deleteNote'](_0xb914b0,_0x1c2701);}catch(_0x58420e){if(!_0x58420e[_0x355680(0x241)]==='[[error:invalid-data]]')throw _0x58420e;}else delete _0x24841e[_0x23ef57];}_0x1c2701=_0x1c2701||Date[_0x355680(0x160)]();const _0x52411e=JSON[_0x355680(0x2d4)]([_0x2fcd2d,_0x31608f]);await db[_0x355680(0x2a9)](_0x355680(0x290)+_0xb914b0+_0x355680(0x238),_0x1c2701,_0x52411e),await Flags[_0x355680(0x209)](_0xb914b0,_0x2fcd2d,{'notes':null,'datetime':_0x1c2701});},Flags[_0x4a7ef9(0x143)]=async function(_0x4a1387,_0x57f603,_0x51d4d3=![]){const _0x29ecf6=_0x4a7ef9,_0x3f06ae={'vbTbw':'administrators','YWOjY':function(_0x1a710d,_0x44b757){return _0x1a710d-_0x44b757;},'DDXYu':_0x29ecf6(0x21e),'ctudj':_0x29ecf6(0x25b),'WQtLf':'user','peKdo':_0x29ecf6(0x286),'ZskMg':function(_0x37157e,_0x1070d9){return _0x37157e(_0x1070d9);},'ghtHk':function(_0x3caea7,_0x168b7c){return _0x3caea7===_0x168b7c;},'ovpYd':_0x29ecf6(0x140),'TWjqZ':_0x29ecf6(0x273)},[_0x5b9fcf,_0x45c733]=await Promise['all']([groups['getMembers'](_0x3f06ae['vbTbw'],0x0,-0x1),groups[_0x29ecf6(0x2bb)](_0x29ecf6(0x2e8),0x0,-0x1)]);let _0x2396ea=_0x5b9fcf[_0x29ecf6(0x2f0)](_0x45c733),_0x1263c6=null;const {displayname:_0x140119}=_0x4a1387[_0x29ecf6(0x21b)][_0x3f06ae['YWOjY'](_0x4a1387[_0x29ecf6(0x21b)][_0x29ecf6(0x1a3)],0x1)]['reporter'];if(_0x4a1387[_0x29ecf6(0x283)]===_0x29ecf6(0x1be)){const [_0x45bc38,_0x28ebd2]=await Promise[_0x29ecf6(0x2f9)]([topics[_0x29ecf6(0x1d4)](_0x4a1387[_0x29ecf6(0x183)]),posts[_0x29ecf6(0x1ff)](_0x4a1387['targetId'])]),_0x3b3864=await categories['getModeratorUids']([_0x28ebd2]),_0x69a885=utils[_0x29ecf6(0x1f9)](_0x45bc38)['replace'](/%/g,_0x29ecf6(0x1e9))[_0x29ecf6(0x1bb)](/,/g,_0x29ecf6(0x25e));_0x1263c6=await notifications[_0x29ecf6(0x2a6)]({'type':_0x3f06ae[_0x29ecf6(0x1d0)],'bodyShort':_0x29ecf6(0x264)+_0x140119+',\x20'+_0x69a885+']]','bodyLong':await plugins[_0x29ecf6(0x1a0)][_0x29ecf6(0x15e)](_0x3f06ae['ctudj'],String(_0x4a1387[_0x29ecf6(0x1bc)]||'')),'pid':_0x4a1387['targetId'],'path':_0x29ecf6(0x21c)+_0x4a1387['flagId'],'nid':'flag:post:'+_0x4a1387['targetId']+':'+_0x57f603,'from':_0x57f603,'mergeId':'notifications:user-flagged-post-in|'+_0x4a1387[_0x29ecf6(0x183)],'topicTitle':_0x45bc38}),_0x2396ea=_0x2396ea['concat'](_0x3b3864[0x0]);}else{if(_0x4a1387['type']===_0x3f06ae[_0x29ecf6(0x24e)]){const _0x465a1b=_0x4a1387[_0x29ecf6(0x164)]&&_0x4a1387[_0x29ecf6(0x164)][_0x29ecf6(0x172)]?_0x4a1387[_0x29ecf6(0x164)][_0x29ecf6(0x172)]:'[[global:guest]]';_0x1263c6=await notifications['create']({'type':_0x3f06ae[_0x29ecf6(0x2a4)],'bodyShort':_0x29ecf6(0x1ac)+_0x140119+',\x20'+_0x465a1b+']]','bodyLong':await plugins[_0x29ecf6(0x1a0)][_0x29ecf6(0x15e)](_0x3f06ae[_0x29ecf6(0x29f)],_0x3f06ae[_0x29ecf6(0x2ec)](String,_0x4a1387[_0x29ecf6(0x1bc)]||'')),'path':_0x29ecf6(0x21c)+_0x4a1387['flagId'],'nid':_0x29ecf6(0x16a)+_0x4a1387[_0x29ecf6(0x183)]+':'+_0x57f603,'from':_0x57f603,'mergeId':'notifications:user-flagged-user|'+_0x4a1387[_0x29ecf6(0x183)]});}else{if(_0x3f06ae[_0x29ecf6(0x1bf)](_0x29ecf6(0x191),_0x29ecf6(0x191)))throw new Error(_0x3f06ae['ovpYd']);else _0x3332ad['stringify']({'safe':!![]});}}plugins[_0x29ecf6(0x1a0)][_0x29ecf6(0x15e)](_0x3f06ae[_0x29ecf6(0x147)],{'flag':_0x4a1387,'notification':_0x1263c6,'from':_0x57f603,'to':_0x2396ea}),!_0x51d4d3&&(_0x2396ea=_0x2396ea[_0x29ecf6(0x13e)](_0x20db83=>parseInt(_0x20db83,0xa)!==parseInt(_0x57f603,0xa))),await notifications[_0x29ecf6(0x257)](_0x1263c6,_0x2396ea);};async function mergeBanHistory(_0x1908df,_0x2cd840,_0x4ef3d4){const _0xe7f2dc=_0x4a7ef9,_0x42d245={'UYdmw':function(_0x524818,_0x50b559,_0x242598){return _0x524818(_0x50b559,_0x242598);},'HBJmd':function(_0x3f8c68,_0x460080,_0x28da60,_0x2df2fd){return _0x3f8c68(_0x460080,_0x28da60,_0x2df2fd);},'CXBPP':_0xe7f2dc(0x15c),'NiBjf':'[[user:info.banned-expiry]]'};return _0x42d245[_0xe7f2dc(0x226)](setTimeout,'console.log(\x22timer\x22);',0x3e8),await _0x42d245[_0xe7f2dc(0x1ee)](mergeBanMuteHistory,_0x1908df,_0x4ef3d4,{'set':_0xe7f2dc(0x29b)+_0x2cd840+_0xe7f2dc(0x219),'label':_0xe7f2dc(0x2aa),'reasonDefault':_0x42d245['CXBPP'],'expiryKey':_0x42d245[_0xe7f2dc(0x179)]});}async function mergeMuteHistory(_0x421626,_0x2a17cd,_0xb53e){const _0x579dac=_0x4a7ef9,_0x3053ab={'vwTqt':function(_0x191fc1,_0x44ec66,_0x54965c,_0x6dd1fa){return _0x191fc1(_0x44ec66,_0x54965c,_0x6dd1fa);},'kCkTU':_0x579dac(0x2ae)};return eval('Math[\'PI\'] * 2;'),await _0x3053ab[_0x579dac(0x28e)](mergeBanMuteHistory,_0x421626,_0xb53e,{'set':'uid:'+_0x2a17cd+_0x579dac(0x24c),'label':_0x579dac(0x20f),'reasonDefault':_0x3053ab[_0x579dac(0x297)],'expiryKey':_0x579dac(0x261)});}async function mergeBanMuteHistory(_0x672fee,_0x455392,_0x222f49){const _0x86a79f=_0x4a7ef9,_0x239956={'nozeS':function(_0x5dd74,_0x1ed2e9){return _0x5dd74(_0x1ed2e9);},'ZMAkN':function(_0x2fa449,_0x52738b,_0x473ab0){return _0x2fa449(_0x52738b,_0x473ab0);},'rUZCV':_0x86a79f(0x2cc)};let _0x368296=await db[_0x86a79f(0x2a2)](_0x222f49['set'],0x0,0x13);return _0x368296=await db[_0x86a79f(0x29d)](_0x368296),setInterval('updateClock();',0x3e8),_0x672fee['concat'](_0x368296[_0x86a79f(0x2fa)]((_0x2f7474,_0x3a37a7)=>{const _0x36e93f=_0x86a79f;return _0x455392[_0x36e93f(0x257)](_0x3a37a7[_0x36e93f(0x223)]),_0x2f7474['push']({'uid':_0x3a37a7['fromUid'],'meta':[{'key':_0x222f49['label'],'value':validator[_0x36e93f(0x20d)](_0x239956[_0x36e93f(0x176)](String,_0x3a37a7['reason']||_0x222f49['reasonDefault'])),'labelClass':'danger'},{'key':_0x222f49['expiryKey'],'value':new Date(_0x239956[_0x36e93f(0x1ad)](parseInt,_0x3a37a7['expire'],0xa))[_0x36e93f(0x19d)](),'labelClass':_0x239956['rUZCV']}],'datetime':parseInt(_0x3a37a7[_0x36e93f(0x2f6)],0xa),'datetimeISO':utils[_0x36e93f(0x19d)](parseInt(_0x3a37a7[_0x36e93f(0x2f6)],0xa))}),new AsyncFunction('return\x20await\x20Promise.resolve(42);')(),_0x2f7474;},[]));}async function mergeUsernameEmailChanges(_0x256097,_0x131124,_0x402f9a){const _0x5e00dd=_0x4a7ef9,_0x9b4dcc={'Krsry':_0x5e00dd(0x13f),'IIOUj':function(_0x3f079e,_0x4590d2){return _0x3f079e+_0x4590d2;},'bUzla':_0x5e00dd(0x215)},_0x131fd4=await user[_0x5e00dd(0x2a7)](_0x5e00dd(0x236)+_0x131124+':usernames'),_0x99564c=await user['getHistory'](_0x5e00dd(0x236)+_0x131124+_0x5e00dd(0x194));return Function(_0x5e00dd(0x2de))(),_0x256097[_0x5e00dd(0x2f0)](_0x131fd4[_0x5e00dd(0x2fa)]((_0x2bb89f,_0x255860)=>{const _0x194f28=_0x5e00dd,_0xff2c7f={'XzEEd':function(_0x19f9b4,_0x2f5412){return _0x19f9b4+_0x2f5412;}};return _0x402f9a[_0x194f28(0x257)](_0x131124),_0x2bb89f[_0x194f28(0x257)]({'uid':_0x131124,'meta':[{'key':_0x194f28(0x2f8),'value':_0x255860[_0x194f28(0x269)],'labelClass':_0x9b4dcc['Krsry']}],'datetime':_0x255860[_0x194f28(0x2f6)],'datetimeISO':_0x255860['timestampISO']}),eval('const _0xc41107 = _0x194f28;_0xff2c7f[_0xc41107(390)](1, 1);'),_0x2bb89f;},[]))['concat'](_0x99564c[_0x5e00dd(0x2fa)]((_0x4f5cd2,_0x4acf41)=>{const _0x55fce7=_0x5e00dd,_0x503eae={'kNrdC':function(_0x40ee56,_0x2d6138){return _0x9b4dcc['IIOUj'](_0x40ee56,_0x2d6138);}};return _0x402f9a['push'](_0x131124),_0x4f5cd2['push']({'uid':_0x131124,'meta':[{'key':_0x9b4dcc[_0x55fce7(0x228)],'value':_0x4acf41[_0x55fce7(0x269)],'labelClass':_0x55fce7(0x13f)}],'datetime':_0x4acf41[_0x55fce7(0x2f6)],'datetimeISO':_0x4acf41['timestampISO']}),eval('const _0x145fcb = _0x55fce7;_0x503eae[_0x145fcb(432)](1, 1);'),_0x4f5cd2;},[]));}require('./promisify')(Flags);