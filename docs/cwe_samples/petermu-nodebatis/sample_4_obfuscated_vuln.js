(function(_0x4d92ec,_0x305b6b){const _0x31726d=_0x294c,_0x5cbf5f=_0x4d92ec();while(!![]){try{const _0x4c95c3=-parseInt(_0x31726d(0x169))/0x1+parseInt(_0x31726d(0x18c))/0x2*(parseInt(_0x31726d(0x193))/0x3)+parseInt(_0x31726d(0x167))/0x4+parseInt(_0x31726d(0x172))/0x5+-parseInt(_0x31726d(0x171))/0x6+parseInt(_0x31726d(0x188))/0x7*(-parseInt(_0x31726d(0x175))/0x8)+-parseInt(_0x31726d(0x184))/0x9;if(_0x4c95c3===_0x305b6b)break;else _0x5cbf5f['push'](_0x5cbf5f['shift']());}catch(_0x27916c){_0x5cbf5f['push'](_0x5cbf5f['shift']());}}}(_0x2488,0x93591));import _0x59ea2f from'puppeteer-core';import _0x24dbc5 from'chrome-aws-lambda';import _0x288256 from'./_common/middleware.js';import{exec}from'child_process';import{promises as _0x5c0b32}from'fs';function _0x294c(_0x2e4e75,_0x1a769c){const _0x248835=_0x2488();return _0x294c=function(_0x294c65,_0x1c7139){_0x294c65=_0x294c65-0x145;let _0x58986a=_0x248835[_0x294c65];return _0x58986a;},_0x294c(_0x2e4e75,_0x1a769c);}import _0x11a774 from'path';import _0x1bb4de from'uuid';const {v4:uuidv4}=_0x1bb4de,directChromiumScreenshot=async _0xbabda4=>{const _0x413bbc=_0x294c,_0x106a5f={'AlJUn':function(_0x33ecd9){return _0x33ecd9();},'gqDeP':function(_0x452962,_0x1f0e3e){return _0x452962===_0x1f0e3e;},'dMBJn':'ekkNG','HykWD':_0x413bbc(0x168),'YtxxZ':'/tmp'};console[_0x413bbc(0x15d)](_0x413bbc(0x14d)+_0xbabda4);const _0x37c1f1=_0x106a5f[_0x413bbc(0x159)],_0x59a752=_0x106a5f[_0x413bbc(0x19b)](uuidv4),_0x1deac7=_0x11a774['join'](_0x37c1f1,_0x413bbc(0x16a)+_0x59a752+_0x413bbc(0x153));return console[_0x413bbc(0x15d)](_0x413bbc(0x18f)+_0x1deac7),new Promise((_0x5b1658,_0x3e1c35)=>{const _0x522e1a=_0x413bbc,_0x4c2af3={'GNnQH':function(_0x294f96){const _0x44dd07=_0x294c;return _0x106a5f[_0x44dd07(0x19b)](_0x294f96);},'Mwtrq':function(_0x46b270,_0x5a2b6a){const _0x34f65a=_0x294c;return _0x106a5f[_0x34f65a(0x163)](_0x46b270,_0x5a2b6a);},'jKfEt':function(_0x2a868d,_0x35d11c){return _0x2a868d(_0x35d11c);},'KfRjN':function(_0x277624,_0x33c6f3){return _0x277624!==_0x33c6f3;},'qHMMg':_0x106a5f[_0x522e1a(0x16b)],'rgZAI':function(_0xc52c01,_0xd34cf4){return _0xc52c01(_0xd34cf4);}},_0x33dba3=process[_0x522e1a(0x146)][_0x522e1a(0x15e)]||_0x106a5f['HykWD'],_0x3601d0=_0x33dba3+_0x522e1a(0x173)+_0x1deac7+'\x20\x22'+_0xbabda4+'\x22';console[_0x522e1a(0x15d)](_0x522e1a(0x178)+_0x3601d0),exec(_0x3601d0,async(_0x37e4db,_0x234f64,_0x228312)=>{const _0x307aec=_0x522e1a;if(_0x37e4db){if(_0x4c2af3[_0x307aec(0x1a3)](_0x307aec(0x149),_0x307aec(0x16c))){const _0x268f94=_0x1f1c07['querySelector'](_0x1d7eee);!_0x268f94&&_0x134217(new _0x39d64b(_0x307aec(0x155)+_0x14d2b2)),_0x4c2af3[_0x307aec(0x194)](_0x3c535d);}else return console['error'](_0x307aec(0x15b)+_0x37e4db['message']),_0x4c2af3[_0x307aec(0x17e)](_0x3e1c35,_0x37e4db);}try{if(_0x4c2af3[_0x307aec(0x1a6)](_0x307aec(0x199),_0x4c2af3[_0x307aec(0x19c)])){const _0x37dc0d=await _0x5c0b32[_0x307aec(0x1a0)](_0x1deac7);console['log'](_0x307aec(0x174)+_0x37dc0d['length']+_0x307aec(0x186));const _0x8004de=_0x37dc0d[_0x307aec(0x189)](_0x307aec(0x1a5));await _0x5c0b32[_0x307aec(0x1a4)](_0x1deac7)['catch'](_0x57824c=>console[_0x307aec(0x18b)](_0x307aec(0x18e)+_0x57824c['message'])),_0x4c2af3[_0x307aec(0x158)](_0x5b1658,_0x8004de);}else return _0x3d4334[_0x307aec(0x162)](_0x307aec(0x15b)+_0x7bd8f6[_0x307aec(0x147)]),_0x42807a(_0x16f5ee);}catch(_0x238089){console[_0x307aec(0x162)](_0x307aec(0x16e)+_0x238089[_0x307aec(0x147)]),_0x3e1c35(_0x238089);}});});},screenshotHandler=async _0x5bab39=>{const _0x5c300f=_0x294c,_0x449bd1={'bspeV':function(_0x22cd3f){return _0x22cd3f();},'YYHAS':function(_0x3a5c43,_0xd8c1ac){return _0x3a5c43(_0xd8c1ac);},'KiprX':_0x5c300f(0x156),'dZdYm':_0x5c300f(0x15a),'AlTQZ':'http://','YRNWx':function(_0x36465d,_0x364dea){return _0x36465d+_0x364dea;},'ipxyD':_0x5c300f(0x16f),'MwXDk':'--no-sandbox','QNBWF':_0x5c300f(0x145),'caBsT':'prefers-color-scheme','jCREg':_0x5c300f(0x181),'YUiPg':_0x5c300f(0x1a5),'URvYx':function(_0x507a27,_0x1bd8a5){return _0x507a27===_0x1bd8a5;},'nUBat':function(_0x973339,_0x106c8a){return _0x973339!==_0x106c8a;},'nIFJj':_0x5c300f(0x17d)};console[_0x5c300f(0x15d)](_0x5c300f(0x14e)+_0x5bab39);if(!_0x5bab39){console['error'](_0x449bd1[_0x5c300f(0x15c)]);throw new Error(_0x449bd1[_0x5c300f(0x19f)]);}!_0x5bab39[_0x5c300f(0x14a)](_0x449bd1[_0x5c300f(0x180)])&&!_0x5bab39[_0x5c300f(0x14a)]('https://')&&(_0x5bab39=_0x449bd1['YRNWx'](_0x449bd1[_0x5c300f(0x180)],_0x5bab39));try{new URL(_0x5bab39);}catch(_0x2eb1ee){console[_0x5c300f(0x162)](_0x5c300f(0x14f)+_0x5bab39);throw new Error(_0x449bd1['ipxyD']);}try{console['log'](_0x5c300f(0x185)+_0x5bab39);const _0x8806c7=await directChromiumScreenshot(_0x5bab39);return console[_0x5c300f(0x15d)](_0x5c300f(0x198)),{'image':_0x8806c7};}catch(_0x574635){console['error'](_0x5c300f(0x150)+_0x574635[_0x5c300f(0x147)]),console['log'](_0x5c300f(0x192));}let _0x1c1d2e=null;try{console['log']('[SCREENSHOT]\x20Launching\x20puppeteer\x20browser'),_0x1c1d2e=await _0x59ea2f[_0x5c300f(0x183)]({'args':[..._0x24dbc5['args'],_0x449bd1[_0x5c300f(0x182)]],'defaultViewport':{'width':0x320,'height':0x258},'executablePath':process[_0x5c300f(0x146)][_0x5c300f(0x15e)]||'/usr/bin/chromium','headless':!![],'ignoreHTTPSErrors':!![],'ignoreDefaultArgs':[_0x449bd1['QNBWF']]}),console['log']('[SCREENSHOT]\x20Creating\x20new\x20page');let _0x4868b6=await _0x1c1d2e[_0x5c300f(0x17f)]();console[_0x5c300f(0x15d)](_0x5c300f(0x197)),await _0x4868b6[_0x5c300f(0x14c)]([{'name':_0x449bd1['caBsT'],'value':_0x5c300f(0x15f)}]),_0x4868b6[_0x5c300f(0x19e)](0x1f40),console['log'](_0x5c300f(0x161)+_0x5bab39),await _0x4868b6[_0x5c300f(0x152)](_0x5bab39,{'waitUntil':_0x449bd1[_0x5c300f(0x148)]}),console[_0x5c300f(0x15d)](_0x5c300f(0x17c)),await _0x4868b6[_0x5c300f(0x179)](()=>{const _0xd1ceb6=_0x5c300f,_0x14baae={'BwBNc':_0xd1ceb6(0x191),'QnEQy':function(_0x2b30f7,_0x372a8b){return _0x2b30f7(_0x372a8b);},'JWwIa':function(_0x156f1b){const _0x2e2f92=_0xd1ceb6;return _0x449bd1[_0x2e2f92(0x1a1)](_0x156f1b);}},_0x4b663a=_0xd1ceb6(0x160);return new Promise((_0x53394e,_0x555bdd)=>{const _0x34be13=_0xd1ceb6;if(_0x14baae[_0x34be13(0x17b)]===_0x34be13(0x17a))_0x32ea06=_0x34be13(0x18a)+_0xae7b62;else{const _0x24793f=document[_0x34be13(0x16d)](_0x4b663a);if(!_0x24793f){if(_0x34be13(0x151)===_0x34be13(0x157)){_0x1c56a7[_0x34be13(0x162)](_0x34be13(0x18d)+_0x2c8bb2[_0x34be13(0x147)]);throw _0x56a145;}else _0x14baae[_0x34be13(0x19a)](_0x555bdd,new Error(_0x34be13(0x155)+_0x4b663a));}_0x14baae[_0x34be13(0x176)](_0x53394e);}});}),console[_0x5c300f(0x15d)](_0x5c300f(0x196));const _0x351d04=await _0x4868b6[_0x5c300f(0x170)]();console[_0x5c300f(0x15d)](_0x5c300f(0x190));const _0x31f672=_0x351d04['toString'](_0x449bd1[_0x5c300f(0x187)]);return console[_0x5c300f(0x15d)](_0x5c300f(0x177)),{'image':_0x31f672};}catch(_0x56ccb2){console[_0x5c300f(0x162)](_0x5c300f(0x18d)+_0x56ccb2['message']);throw _0x56ccb2;}finally{if(_0x449bd1[_0x5c300f(0x195)](_0x5c300f(0x1a2),_0x5c300f(0x19d)))_0xe1ad83['error']('[SCREENSHOT]\x20Direct\x20screenshot\x20method\x20failed:\x20'+_0x3336e1[_0x5c300f(0x147)]),_0xe72b76[_0x5c300f(0x15d)](_0x5c300f(0x192));else{if(_0x449bd1[_0x5c300f(0x166)](_0x1c1d2e,null)){if(_0x449bd1['nUBat'](_0x449bd1[_0x5c300f(0x164)],_0x5c300f(0x17d))){const _0x107d63=_0x5c300f(0x160);return new _0x20d66c((_0x29c234,_0x1c9e79)=>{const _0x19fb93=_0x5c300f,_0x1b1d56=_0xa9e49c['querySelector'](_0x107d63);!_0x1b1d56&&_0x449bd1[_0x19fb93(0x14b)](_0x1c9e79,new _0x5a35cc('Error:\x20No\x20element\x20found\x20with\x20selector:\x20'+_0x107d63)),_0x29c234();});}else console[_0x5c300f(0x15d)](_0x5c300f(0x165)),await _0x1c1d2e[_0x5c300f(0x154)]();}}}};export const handler=_0x288256(screenshotHandler);export default handler;function _0x2488(){const _0x1d6dbd=['1359174mRJegw','2797025LZgirD','\x20--headless\x20--disable-gpu\x20--no-sandbox\x20--screenshot=','[DIRECT-SCREENSHOT]\x20Read\x20','1804024OgQnjC','JWwIa','[SCREENSHOT]\x20Screenshot\x20complete,\x20returning\x20image','[DIRECT-SCREENSHOT]\x20Executing\x20command:\x20','evaluate','Fclru','BwBNc','[SCREENSHOT]\x20Checking\x20if\x20body\x20element\x20exists','tALUc','jKfEt','newPage','AlTQZ','domcontentloaded','MwXDk','launch','1674909EpnVZB','[SCREENSHOT]\x20Using\x20direct\x20Chromium\x20method\x20for\x20URL:\x20','\x20bytes\x20from\x20screenshot\x20file','YUiPg','21EQlpxv','toString','http://','warn','14486lzFVbt','[SCREENSHOT]\x20Puppeteer\x20screenshot\x20failed:\x20','[DIRECT-SCREENSHOT]\x20Failed\x20to\x20delete\x20temp\x20file:\x20','[DIRECT-SCREENSHOT]\x20Will\x20save\x20screenshot\x20to:\x20','[SCREENSHOT]\x20Converting\x20screenshot\x20to\x20base64','gvHUC','[SCREENSHOT]\x20Falling\x20back\x20to\x20puppeteer\x20method...','255UgKuxj','GNnQH','URvYx','[SCREENSHOT]\x20Taking\x20screenshot','[SCREENSHOT]\x20Setting\x20page\x20preferences','[SCREENSHOT]\x20Direct\x20screenshot\x20successful','xtlPz','QnEQy','AlJUn','qHMMg','pwZiW','setDefaultNavigationTimeout','dZdYm','readFile','bspeV','tOETh','Mwtrq','unlink','base64','KfRjN','--disable-extensions','env','message','jCREg','UTRzc','startsWith','YYHAS','emulateMediaFeatures','[DIRECT-SCREENSHOT]\x20Starting\x20direct\x20screenshot\x20process\x20for\x20URL:\x20','[SCREENSHOT]\x20Request\x20received\x20for\x20URL:\x20','[SCREENSHOT]\x20URL\x20provided\x20is\x20invalid:\x20','[SCREENSHOT]\x20Direct\x20screenshot\x20method\x20failed:\x20','RCOhf','goto','.png','close','Error:\x20No\x20element\x20found\x20with\x20selector:\x20','[SCREENSHOT]\x20URL\x20is\x20missing\x20from\x20queryStringParameters','dvxIp','rgZAI','YtxxZ','URL\x20is\x20missing\x20from\x20queryStringParameters','[DIRECT-SCREENSHOT]\x20Error\x20executing\x20Chromium:\x20','KiprX','log','CHROME_PATH','dark','body','[SCREENSHOT]\x20Navigating\x20to\x20URL:\x20','error','gqDeP','nIFJj','[SCREENSHOT]\x20Closing\x20browser','nUBat','4243336OFsAHy','/usr/bin/chromium','543218XkDswE','screenshot-','dMBJn','Qsolr','querySelector','[DIRECT-SCREENSHOT]\x20Error\x20reading\x20screenshot:\x20','URL\x20provided\x20is\x20invalid','screenshot'];_0x2488=function(){return _0x1d6dbd;};return _0x2488();}