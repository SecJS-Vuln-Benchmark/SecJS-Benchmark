'use strict';function _0x1d77(){const _0xcb7032=['end','hrYyV','tpsbf','tXOzM','djZvO','IJTpy','node-opcua-leak-detector','nZjlM','GXRMN','eql','UJzke','EVYfg','EKLjw','wyUKc','connection\x20expected\x20to\x20succeed','minTransactionTimeout','log','expecting\x20an\x20error\x20here','xYPys','protocolVersion','iUfhD','WdGSf','server_socket','MMM1\x20client\x20SecureChannel\x20should\x20detect\x20connection\x20problem','write','CeGaE','_socket','COyQt','937242kjqkKe','xrhli','FlKKv','LcfIp','expecting\x20NO\x20error\x20here','MfulW','Done\x20','on_transaction_completed','uOiqB','KuQEK','JWgRX','uQTCE','should\x20not\x20receive\x20a\x20close\x20event\x20with\x20an\x20error\x20when\x20attempting\x20to\x20connect\x20to\x20a\x20non\x20existent\x20server','vbsSg','yGaPI','2977131qyVLrV','FTDpI','oxBGf','Bad','Testing\x20ClientSecureChannel\x202','DONE!\x20','jNfLA','472aBVhLG','dQsWx','LIwbp','DoSOe','MeEqX','Lwtfl','SfKwc','match','toString','Server\x20finally\x20started\x20!','listen','SxYMz','call','EYmto','aYKqH','DkhRM','lessThan','connectionStrategy','max','equal','ZigMu','NOGVh','Daeaz','oQYfm','9303200pGjmdy','timeout','WW2-a\x20connectionStrategy:\x20should\x20retry\x20many\x20times\x20and\x20fail\x20eventually\x20','LRQId','rxHTq','exist','48395ssufiO','5525317dfghbd','OPmFL','Server','ebisR','sWbFe','nJFtw','not','22YJVdyS','130RtEukp','RKQxe','util','should\x20not\x20receive\x20a\x20close\x20event\x20with\x20an\x20error\x20when\x20attempting\x20to\x20connect\x20to\x20a\x20valid\x20server\x20on\x20a\x20invalid\x20port','opc.tcp://no_server_at_this_address.com:','opc.tcp://localhost:8888/UA/Sample','should','instanceOf','backoff','KtABL','XPbVs','JhFCM','defaultTransactionTimeout','message','/UA/Sample','2RDFKpI','close','SIEXO','22200492RmydYT','scHju','YzvrY','net','rejNH','On\x20close','response','request','opc.tcp://localhost:','QANWo','node-opcua-types','TEST','connection','1334547uwXONl','gqLjF','iqpHZ','kGrGd','MGVgA','describeWithLeakDetector','WGJOZ','serverChannel','advkd','QClom','StRVt','greaterThan','Not\x20Writing\x20!!!','performMessageTransaction','hSCNk','Let\x27s\x20abort\x20the\x20connection\x20now','WW2-b\x20should\x20be\x20possible\x20to\x20interrupt\x20the\x20retry\x20process\x20\x20','BjiKl','XKLxR','HCmGA','create','KetOw','transport','Sabotage','6hYORSm'];_0x1d77=function(){return _0xcb7032;};return _0x1d77();}const _0x125f03=_0x7e3b;(function(_0x40aff2,_0xe2a2a2){const _0x2e304f=_0x7e3b,_0x1a3738=_0x40aff2();while(!![]){try{const _0x5d27d4=parseInt(_0x2e304f(0x108))/0x1+-parseInt(_0x2e304f(0x154))/0x2*(-parseInt(_0x2e304f(0x117))/0x3)+parseInt(_0x2e304f(0x11e))/0x4*(-parseInt(_0x2e304f(0x13c))/0x5)+parseInt(_0x2e304f(0x17c))/0x6*(parseInt(_0x2e304f(0x13d))/0x7)+parseInt(_0x2e304f(0x136))/0x8+-parseInt(_0x2e304f(0x164))/0x9*(-parseInt(_0x2e304f(0x145))/0xa)+-parseInt(_0x2e304f(0x144))/0xb*(parseInt(_0x2e304f(0x157))/0xc);if(_0x5d27d4===_0xe2a2a2)break;else _0x1a3738['push'](_0x1a3738['shift']());}catch(_0x462795){_0x1a3738['push'](_0x1a3738['shift']());}}}(_0x1d77,0xec29d));function _0x7e3b(_0x35e95e,_0x1eb57d){const _0x1d77ae=_0x1d77();return _0x7e3b=function(_0x7e3b51,_0x38a5a2){_0x7e3b51=_0x7e3b51-0xfc;let _0x2acdba=_0x1d77ae[_0x7e3b51];return _0x2acdba;},_0x7e3b(_0x35e95e,_0x1eb57d);}const {promisify}=require(_0x125f03(0x147)),should=require(_0x125f03(0x14b)),{ReadRequest}=require(_0x125f03(0x161)),{make_debugLog,checkDebugFlag}=require('node-opcua-debug'),{StatusCodes}=require('node-opcua-status-code'),{ClientSecureChannelLayer,ServerSecureChannelLayer}=require('..'),debugLog=make_debugLog('TEST'),doDebug=checkDebugFlag(_0x125f03(0x162)),port=0x7fb,describe=require(_0x125f03(0x183))[_0x125f03(0x169)];describe('Testing\x20ClientSecureChannel\x201',function(){const _0x2a616b=_0x125f03,_0x230b24={'xYPys':function(_0x2319b2,_0x2a3f7c,_0x12ab99){return _0x2319b2(_0x2a3f7c,_0x12ab99);},'aYKqH':function(_0x3d9794,_0xd60cd){return _0x3d9794(_0xd60cd);},'AFwFs':_0x2a616b(0x14a),'Lwtfl':_0x2a616b(0x114),'LcfIp':function(_0x4b9631,_0x10a88c,_0x5cf3a5){return _0x4b9631(_0x10a88c,_0x5cf3a5);},'DuQZc':_0x2a616b(0x148)};this[_0x2a616b(0x137)](Math[_0x2a616b(0x130)](this[_0x2a616b(0x137)](),0x186a0));const _0x354b86={'connectionStrategy':{'maxRetry':0x1,'initialDelay':0x1,'maxDelay':0x2,'randomisationFactor':0.1}};_0x230b24[_0x2a616b(0xfe)](it,_0x230b24[_0x2a616b(0x123)],function(_0x1fc043){const _0x72a652=_0x2a616b,_0x450472=new ClientSecureChannelLayer(_0x354b86);let _0x4cf1ca=0x0;_0x450472['on'](_0x72a652(0x155),function(_0x21e016){const _0x50839a=_0x72a652;should[_0x50839a(0x143)][_0x50839a(0x13b)](_0x21e016),_0x4cf1ca+=0x1;}),_0x450472[_0x72a652(0x178)]('opc.tcp://no_server_at_this_address.com:'+port+_0x72a652(0x153),function(_0x498195){const _0x7310bd=_0x72a652;should(_0x498195)['be']['instanceOf'](Error),_0x498195[_0x7310bd(0x152)][_0x7310bd(0x14b)][_0x7310bd(0x125)](/getaddrinfo ENOTFOUND|EAI_AGAIN/),_0x4cf1ca['should'][_0x7310bd(0x186)](0x0),_0x230b24[_0x7310bd(0xfe)](setTimeout,_0x1fc043,0xc8);});}),_0x230b24[_0x2a616b(0x10b)](it,_0x230b24['DuQZc'],function(_0x2a0d58){const _0x5cddfd=_0x2a616b,_0x57007c=new ClientSecureChannelLayer(_0x354b86);let _0x3b778b=0x0;_0x57007c['on']('close',function(_0x53eb7a){const _0x40d187=_0x7e3b;should[_0x40d187(0x143)][_0x40d187(0x13b)](_0x53eb7a),_0x3b778b+=0x1;}),_0x57007c[_0x5cddfd(0x178)](_0x230b24['AFwFs'],function(_0x581386){const _0x522766=_0x5cddfd;_0x230b24[_0x522766(0x12c)](should,_0x581386)['be'][_0x522766(0x14c)](Error),_0x581386[_0x522766(0x152)][_0x522766(0x14b)][_0x522766(0x125)](/connect ECONNREFUSED/),_0x3b778b[_0x522766(0x14b)][_0x522766(0x186)](0x0),setTimeout(_0x2a0d58,0xc8);});});});function startServer(_0x5a127e,_0x387490){const _0x1e86fc=_0x125f03,_0x3df560={'nZjlM':_0x1e86fc(0x113),'Daeaz':function(_0x4a2d30,_0xa11bf8){return _0x4a2d30*_0xa11bf8;},'NOGVh':function(_0x2fdecc,_0xa3d3a2){return _0x2fdecc(_0xa3d3a2);},'SfKwc':_0x1e86fc(0x15a),'hrYyV':function(_0x49103e){return _0x49103e();}},_0x486d72=_0x3df560[_0x1e86fc(0x133)](require,_0x3df560[_0x1e86fc(0x124)]),_0x92ab69=new _0x486d72[(_0x1e86fc(0x13f))]();_0x5a127e[_0x1e86fc(0x102)]=_0x92ab69,_0x92ab69[_0x1e86fc(0x128)](port),_0x92ab69['on'](_0x1e86fc(0x163),function _0x3fb979(_0xdb8b5c){const _0x47fcd5=_0x1e86fc;if(_0x3df560[_0x47fcd5(0x184)]!=='uQTCE'){const _0x1cfe6c=new _0x307ad4(_0x3ff304);let _0x300a79=0x0;_0x1cfe6c['on'](_0x47fcd5(0x155),function(_0xb08c73){const _0x3a683e=_0x47fcd5;_0x10f25e[_0x3a683e(0x143)][_0x3a683e(0x13b)](_0xb08c73),_0x300a79+=0x1;}),_0x1cfe6c[_0x47fcd5(0x178)](_0x47fcd5(0x149)+_0x1d51f7+'/UA/Sample',function(_0x42be1d){const _0x210706=_0x47fcd5;_0x17863e(_0x42be1d)['be'][_0x210706(0x14c)](_0x6e9d6c),_0x42be1d[_0x210706(0x152)][_0x210706(0x14b)][_0x210706(0x125)](/getaddrinfo ENOTFOUND|EAI_AGAIN/),_0x300a79[_0x210706(0x14b)][_0x210706(0x186)](0x0),_0x3a1c3c(_0x2fb1c0,0xc8);});}else{const _0x2080cc=new ServerSecureChannelLayer({'timeout':_0x3df560[_0x47fcd5(0x134)](0x3e8,0x3e8)});_0x5a127e[_0x47fcd5(0x16b)]=_0x2080cc,_0x2080cc[_0x47fcd5(0x137)]=_0x3df560[_0x47fcd5(0x134)](0x3e8,0x3e8),_0x2080cc['init'](_0xdb8b5c,function(){});}}),_0x3df560[_0x1e86fc(0x17e)](_0x387490);}function simulate_server_abrupt_shutdown(_0x361975){const _0x5f2735=_0x125f03,_0x2f599f={'CeGaE':'qWTiN'};_0x361975[_0x5f2735(0x16b)]&&_0x361975[_0x5f2735(0x16b)][_0x5f2735(0x17a)][_0x5f2735(0x106)]&&(_0x2f599f[_0x5f2735(0x105)]!==_0x2f599f[_0x5f2735(0x105)]?(_0x3b0295[_0x5f2735(0x13b)](_0x37165c[_0x5f2735(0x15e)]),_0x1d6362['exist'](_0x133313[_0x5f2735(0x15d)])):_0x361975[_0x5f2735(0x16b)][_0x5f2735(0x17a)][_0x5f2735(0x106)][_0x5f2735(0x17d)]());}function stopServer(_0x47581d,_0x295776){const _0x1b0a40=_0x125f03,_0x3c6ea5={'gqLjF':function(_0x291c02,_0x1a00cd){return _0x291c02(_0x1a00cd);}};_0x3c6ea5[_0x1b0a40(0x165)](simulate_server_abrupt_shutdown,_0x47581d),_0x47581d[_0x1b0a40(0x102)][_0x1b0a40(0x155)](_0x295776),_0x47581d['serverChannel']=null,_0x47581d[_0x1b0a40(0x102)]=null;}describe(_0x125f03(0x11b),function(){const _0x4dd8d2=_0x125f03,_0x1ac761={'COyQt':function(_0xb1e12d,_0x35bd3f,_0x3bb759){return _0xb1e12d(_0x35bd3f,_0x3bb759);},'hAPCL':function(_0xba727,_0x4ab79d){return _0xba727(_0x4ab79d);},'EYmto':function(_0xdaefc6,_0x23cbdd){return _0xdaefc6===_0x23cbdd;},'yGaPI':_0x4dd8d2(0x10a)};_0x1ac761['hAPCL'](beforeEach,function(_0x244742){_0x1ac761['COyQt'](startServer,this,_0x244742);}),_0x1ac761['hAPCL'](afterEach,function(_0x20a4b4){const _0x35c31f=_0x4dd8d2;_0x1ac761[_0x35c31f(0x107)](stopServer,this,_0x20a4b4);}),it('should\x20establish\x20a\x20client\x20secure\x20channel\x20',function(_0x381d8e){const _0x2fc82e=_0x4dd8d2;if(_0x1ac761[_0x2fc82e(0x12b)](_0x1ac761[_0x2fc82e(0x116)],_0x2fc82e(0x139)))_0x1ac761[_0x2fc82e(0x107)](_0x4bde4b,_0x4c69cc,0x64);else{const _0x2e6299=new ClientSecureChannelLayer({});_0x2e6299[_0x2fc82e(0xff)][_0x2fc82e(0x14b)][_0x2fc82e(0x131)](0x0),_0x2e6299[_0x2fc82e(0x10f)]=function(_0x5b77b8){const _0x32c3a3=_0x2fc82e;should[_0x32c3a3(0x13b)](_0x5b77b8[_0x32c3a3(0x15e)]),should['exist'](_0x5b77b8[_0x32c3a3(0x15d)]);},_0x2e6299['on']('close',function(_0x1be34a){const _0x52ac01=_0x2fc82e;should(!_0x1be34a)['be'][_0x52ac01(0x186)](!![],'expecting\x20no\x20error\x20here,\x20as\x20secure\x20channel\x20has\x20been\x20closed\x20normally');if(_0x1be34a){}}),_0x2e6299[_0x2fc82e(0x178)]('opc.tcp://localhost:'+port+_0x2fc82e(0x153),function(_0x2c88e0){const _0x23c8e3=_0x2fc82e;_0x1ac761['hAPCL'](should,!_0x2c88e0)['be']['eql'](!![],_0x23c8e3(0x18b)),_0x2e6299[_0x23c8e3(0x155)](function(){_0x381d8e();});});}});}),describe('Testing\x20ClientSecureChannel\x20with\x20BackOff\x20reconnection\x20strategy',function(){const _0x22a3f3=_0x125f03,_0x4c9b1e={'LIwbp':function(_0x37657d,_0x3a16f1){return _0x37657d+_0x3a16f1;},'vbsSg':function(_0x421444,_0x2835a5){return _0x421444*_0x2835a5;},'XKLxR':function(_0x307c4a,_0x4fe026,_0x3372f5){return _0x307c4a(_0x4fe026,_0x3372f5);},'uOiqB':'DkhRM','HCmGA':function(_0x1dd52a){return _0x1dd52a();},'vdCXN':_0x22a3f3(0x16a),'JhFCM':_0x22a3f3(0x13e),'DoSOe':_0x22a3f3(0x14d),'ebisR':function(_0x4bd694,_0x344c89){return _0x4bd694(_0x344c89);},'MGVgA':function(_0x2c2d48,_0x526b55,_0x3299ed){return _0x2c2d48(_0x526b55,_0x3299ed);},'xrhli':_0x22a3f3(0xfd),'scHju':function(_0x5c18ce,_0x1d65b5,_0x344677){return _0x5c18ce(_0x1d65b5,_0x344677);},'iqpHZ':function(_0x302bcc,_0x4baa83){return _0x302bcc+_0x4baa83;},'vfJRy':_0x22a3f3(0x15b),'advkd':function(_0x1e0ebe,_0xf052bd){return _0x1e0ebe+_0xf052bd;},'KtABL':function(_0xcba319,_0x57b13d){return _0xcba319+_0x57b13d;},'RKQxe':function(_0x17f1ce,_0x4f417f){return _0x17f1ce(_0x4f417f);},'GXRMN':function(_0x333a59,_0x229fbf){return _0x333a59!==_0x229fbf;},'dQsWx':_0x22a3f3(0x119),'wyUKc':function(_0x4a6c42,_0x569eab,_0x2ebbd5){return _0x4a6c42(_0x569eab,_0x2ebbd5);},'tpsbf':function(_0x1d6b62,_0x51a1ea){return _0x1d6b62*_0x51a1ea;},'nJFtw':'HXozj','MfulW':function(_0x5281c5,_0x4f4a6b){return _0x5281c5(_0x4f4a6b);},'SIEXO':_0x22a3f3(0x155),'ZigMu':function(_0x1f6005,_0x53ac68){return _0x1f6005(_0x53ac68);},'sWbFe':function(_0x4ecbf4){return _0x4ecbf4();},'MeEqX':function(_0x4881fc){return _0x4881fc();},'hSCNk':_0x22a3f3(0x15c),'kGrGd':function(_0xb0f967,_0x452ad7){return _0xb0f967(_0x452ad7);},'djZvO':function(_0x45aa34,_0x2cd7c9){return _0x45aa34+_0x2cd7c9;},'IJTpy':function(_0x482bab,_0x2abb05){return _0x482bab(_0x2abb05);},'WdGSf':_0x22a3f3(0x17b),'QANWo':_0x22a3f3(0x16e),'EVYfg':'ECgFu','jNfLA':function(_0x1c0ea0,_0x32329f){return _0x1c0ea0(_0x32329f);},'oQYfm':function(_0x18411c,_0x118b4c,_0x2fde1d){return _0x18411c(_0x118b4c,_0x2fde1d);},'rxHTq':'WW2-c\x20secureChannel\x20that\x20starts\x20before\x20the\x20server\x20is\x20up\x20and\x20running\x20should\x20eventually\x20connect\x20without\x20error','fZTSm':function(_0x21e853,_0x43c648,_0xf1a6bc){return _0x21e853(_0x43c648,_0xf1a6bc);}};this[_0x22a3f3(0x137)](Math[_0x22a3f3(0x130)](this['timeout'](),0x186a0)),_0x4c9b1e[_0x22a3f3(0x158)](it,_0x22a3f3(0x138),function(_0x12eb01){const _0x449440=_0x22a3f3,_0x1326ab={'tXOzM':function(_0x3cf1b0,_0x5f1e71,_0x21023c){const _0x1bd55f=_0x7e3b;return _0x4c9b1e[_0x1bd55f(0x176)](_0x3cf1b0,_0x5f1e71,_0x21023c);},'XPbVs':_0x4c9b1e[_0x449440(0x110)],'iUfhD':function(_0x34c915){const _0x179d65=_0x449440;return _0x4c9b1e[_0x179d65(0x177)](_0x34c915);}};if(_0x4c9b1e['vdCXN']!==_0x4c9b1e[_0x449440(0x150)]){const _0x2e2763={'connectionStrategy':{'maxRetry':0x3,'initialDelay':0xa,'maxDelay':0x14,'randomisationFactor':0.1}},_0x4701ac=new ClientSecureChannelLayer(_0x2e2763),_0x1cf17c=_0x449440(0x15f)+port+_0x449440(0x153);let _0x360d16=0x0;_0x4701ac['on'](_0x4c9b1e[_0x449440(0x121)],function(_0x4eba62,_0x394744){const _0x117b3d=_0x449440;debugLog(_0x4c9b1e[_0x117b3d(0x120)](_0x4eba62+'\x20',_0x394744)+'ms'),_0x360d16=_0x4eba62+0x1;}),_0x4701ac['create'](_0x1cf17c,function(_0x31aabe){const _0x58c89b=_0x449440;_0x58c89b(0x12d)===_0x1326ab[_0x58c89b(0x14f)]?(_0x360d16[_0x58c89b(0x14b)][_0x58c89b(0x131)](_0x2e2763['connectionStrategy']['maxRetry']),should[_0x58c89b(0x13b)](_0x31aabe,_0x58c89b(0xfd)),_0x1326ab[_0x58c89b(0x100)](_0x12eb01)):(_0x5d0b0c(!_0x454ce1)['be'][_0x58c89b(0x186)](!![],_0x58c89b(0x10c)),_0x1326ab[_0x58c89b(0x180)](_0xd7a11e,function(){_0x2cb20d(_0x371152,function(){const _0x5bc766=_0x7e3b;_0x350b0b[_0x5bc766(0x155)](function(){_0x3b73e0();});});},0x3e8));});}else _0x9b82d8[_0x449440(0x18c)]=0xa*0x64,_0x534cb4[_0x449440(0x151)]=_0x4c9b1e[_0x449440(0x115)](0x1e,0x64);}),_0x4c9b1e[_0x22a3f3(0x176)](it,_0x22a3f3(0x174),function(_0x394bbd){const _0x27d4ce=_0x22a3f3,_0x3a81da={'JWgRX':function(_0x59895a,_0x1c15b9,_0x5e417b){const _0x39399e=_0x7e3b;return _0x4c9b1e[_0x39399e(0x168)](_0x59895a,_0x1c15b9,_0x5e417b);},'LpwaG':_0x4c9b1e[_0x27d4ce(0x109)],'UJzke':function(_0x1d0e16,_0x2d5cae,_0x47fdd5){return _0x4c9b1e['scHju'](_0x1d0e16,_0x2d5cae,_0x47fdd5);},'EKLjw':'secureChannel.create\x20failed\x20with\x20message\x20'},_0xaa3fa7={'connectionStrategy':{'maxRetry':0xbb8,'initialDelay':0xa,'maxDelay':0x14,'randomisationFactor':0x0}},_0x3f566f=new ClientSecureChannelLayer(_0xaa3fa7),_0x4e1060=_0x27d4ce(0x15f)+port+_0x27d4ce(0x153);let _0x47e5aa=0x0;_0x3f566f['on'](_0x27d4ce(0x14d),function(_0x3ade03,_0x388cd2){const _0x5f09b8=_0x27d4ce;debugLog(_0x3ade03+'\x20'+_0x388cd2+'ms'),_0x47e5aa=_0x4c9b1e[_0x5f09b8(0x120)](_0x3ade03,0x1),_0x3ade03===0x2&&(_0x4c9b1e[_0x5f09b8(0x140)](debugLog,_0x5f09b8(0x173)),_0x3f566f['abortConnection'](function(){}));}),_0x3f566f[_0x27d4ce(0x178)](_0x4e1060,function(_0x36d726){const _0x5fa93a=_0x27d4ce;_0x47e5aa['should']['not'][_0x5fa93a(0x131)](_0xaa3fa7[_0x5fa93a(0x12f)]['maxRetry']),_0x47e5aa['should']['be'][_0x5fa93a(0x16f)](0x2),_0x47e5aa[_0x5fa93a(0x14b)]['be'][_0x5fa93a(0x12e)](0x4),should['exist'](_0x36d726,_0x3a81da['LpwaG']),_0x3a81da[_0x5fa93a(0x187)](debugLog,_0x3a81da[_0x5fa93a(0x189)],_0x36d726['message']),_0x3f566f[_0x5fa93a(0x155)](function(){const _0x3b39c3=_0x5fa93a;_0x3a81da[_0x3b39c3(0x112)](setTimeout,_0x394bbd,0x64);});});});const _0x5ad8a9=this;_0x4c9b1e[_0x22a3f3(0x135)](it,_0x4c9b1e[_0x22a3f3(0x13a)],function(_0x16f6c3){const _0x51b772=_0x22a3f3;if(_0x4c9b1e['GXRMN'](_0x4c9b1e[_0x51b772(0x11f)],_0x51b772(0x175))){const _0x259346={'connectionStrategy':{'maxRetry':0xbb8,'initialDelay':0xa,'maxDelay':0x7d0,'randomisationFactor':0x0}},_0x3580eb=new ClientSecureChannelLayer(_0x259346),_0x44ef94=_0x51b772(0x15f)+port+'/UA/Sample';let _0x3dc4a2=0x0;_0x3580eb['on'](_0x4c9b1e[_0x51b772(0x121)],function(_0x30ab93,_0x4a62c2){const _0x3352c7=_0x51b772,_0x541c4b={'YzvrY':function(_0x3d17a4,_0x2247a2){const _0x5a5d35=_0x7e3b;return _0x4c9b1e[_0x5a5d35(0x166)](_0x3d17a4,_0x2247a2);}};_0x3352c7(0x118)===_0x4c9b1e['vfJRy']?(_0x49f2fa(_0x541c4b[_0x3352c7(0x159)](_0x8d9c6a,'\x20')+_0x2251c1+'ms'),_0x5b349a=_0x541c4b['YzvrY'](_0x65d1fc,0x1)):(debugLog(_0x4c9b1e[_0x3352c7(0x16c)](_0x30ab93+'\x20'+_0x4a62c2,'ms')),_0x3dc4a2=_0x4c9b1e[_0x3352c7(0x14e)](_0x30ab93,0x1));}),_0x3580eb[_0x51b772(0x178)](_0x44ef94,function(_0x46ff32){const _0x2329b7=_0x51b772;should(!_0x46ff32)['be'][_0x2329b7(0x186)](!![],_0x2329b7(0x10c)),setTimeout(function(){stopServer(_0x5ad8a9,function(){const _0x45c62f=_0x7e3b;_0x3580eb[_0x45c62f(0x155)](function(){_0x16f6c3();});});},0x3e8);}),_0x4c9b1e[_0x51b772(0x18a)](setTimeout,function(){startServer(_0x5ad8a9,function(){const _0x2e3eba=_0x7e3b;debugLog(_0x2e3eba(0x127));});},0x1388);}else _0x4c9b1e[_0x51b772(0x146)](_0x5e4b0a,_0x51b772(0x127));});async function _0x1c79ea(_0x2398fa){await new Promise(_0x3ddc61=>setTimeout(_0x3ddc61,_0x2398fa));}let _0x2600dc=ClientSecureChannelLayer['minTransactionTimeout'],_0x5e6be6=ClientSecureChannelLayer[_0x22a3f3(0x151)];beforeEach(()=>{const _0x72088f=_0x22a3f3;ClientSecureChannelLayer[_0x72088f(0x18c)]=_0x4c9b1e[_0x72088f(0x17f)](0xa,0x64),ClientSecureChannelLayer[_0x72088f(0x151)]=_0x4c9b1e[_0x72088f(0x115)](0x1e,0x64);}),afterEach(()=>{const _0x27faba=_0x22a3f3;ClientSecureChannelLayer[_0x27faba(0x18c)]=_0x2600dc,ClientSecureChannelLayer[_0x27faba(0x151)]=_0x5e6be6;}),_0x4c9b1e['fZTSm'](it,_0x22a3f3(0x103),async()=>{const _0x45db99=_0x22a3f3,_0x3b27ee={'QClom':_0x4c9b1e[_0x45db99(0x142)],'KuQEK':function(_0x3ee44a,_0xaba15d,_0x372f53){return _0x3ee44a(_0xaba15d,_0x372f53);},'NacsD':function(_0x147556,_0x299d2c){const _0x540ae6=_0x45db99;return _0x4c9b1e[_0x540ae6(0x10d)](_0x147556,_0x299d2c);},'SxYMz':function(_0x4c9fd3,_0x4f4ae6){return _0x4c9fd3(_0x4f4ae6);}},_0x52cebc={'connectionStrategy':{'maxRetry':0x3,'initialDelay':0xa,'maxDelay':0x7d0,'randomisationFactor':0x0},'defaultSecureTokenLifetime':0x3e8,'transportTimeout':0x7d0},_0x363788=new ClientSecureChannelLayer(_0x52cebc);_0x363788['on'](_0x4c9b1e[_0x45db99(0x156)],()=>{const _0x50879d=_0x45db99;debugLog(_0x50879d(0x15c));});const _0x3870eb={};await _0x4c9b1e[_0x45db99(0x132)](promisify,startServer)(_0x3870eb);const _0x4d2161=_0x45db99(0x15f)+port+_0x45db99(0x153);await _0x4c9b1e['ZigMu'](promisify,_0x363788['create'])[_0x45db99(0x12a)](_0x363788,_0x4d2161);const _0x5e390d=_0x3870eb[_0x45db99(0x16b)][_0x45db99(0x17a)]['write'];_0x4c9b1e[_0x45db99(0x141)](debugLog),_0x3870eb[_0x45db99(0x16b)][_0x45db99(0x17a)][_0x45db99(0x104)]=_0x25baf8=>{const _0x3ed467=_0x45db99;'HXozj'===_0x3b27ee[_0x3ed467(0x16d)]?_0x3b27ee[_0x3ed467(0x111)](debugLog,_0x3ed467(0x170),_0x25baf8['toString']('hex')):(_0x3ceddf[_0x3ed467(0x18c)]=_0x1237d5,_0xefda73[_0x3ed467(0x151)]=_0x192900);};const _0x415510=new ReadRequest();async function _0x3e3359(){const _0x30809d=_0x45db99,_0x419338=await _0x3b27ee['NacsD'](promisify,_0x363788[_0x30809d(0x171)])[_0x30809d(0x12a)](_0x363788,_0x415510);_0x3b27ee[_0x30809d(0x129)](debugLog,_0x419338[_0x30809d(0x126)]());}await _0x4c9b1e[_0x45db99(0x122)](_0x3e3359)[_0x45db99(0x14b)]['be']['rejectedWith'](/Connection Break|Transaction has timed out/),await _0x1c79ea(0x2710);async function _0x1557bb(){await promisify(_0x363788['close'])['call'](_0x363788);}await _0x1557bb(),await promisify(stopServer)(_0x3870eb),debugLog(_0x45db99(0x11c));}),it('MMM2\x20testing\x20if\x20client\x20SecureChannel\x20could\x20\x20sabotage\x20itself\x20when\x20connection\x20problem',async()=>{const _0x57c801=_0x22a3f3,_0x2f8c97={'connectionStrategy':{'maxRetry':0x3,'initialDelay':0xa,'maxDelay':0x7d0,'randomisationFactor':0x0},'defaultSecureTokenLifetime':0x3e8,'transportTimeout':0x7d0},_0x217041=new ClientSecureChannelLayer(_0x2f8c97);_0x217041['on'](_0x57c801(0x155),()=>{const _0x27355c=_0x57c801;debugLog(_0x4c9b1e[_0x27355c(0x172)]);});const _0x294fb8={};await promisify(startServer)(_0x294fb8);try{const _0x484890='opc.tcp://localhost:'+port+'/UA/Sample';await _0x4c9b1e[_0x57c801(0x10d)](promisify,_0x217041[_0x57c801(0x178)])[_0x57c801(0x12a)](_0x217041,_0x484890),await promisify(_0x217041['closeWithError'])[_0x57c801(0x12a)](_0x217041,StatusCodes[_0x57c801(0x11a)],new Error(_0x4c9b1e[_0x57c801(0x101)]));}catch(_0x18dd8e){if(_0x4c9b1e[_0x57c801(0x160)]!==_0x4c9b1e[_0x57c801(0x160)])_0x4c9b1e[_0x57c801(0x167)](_0x107224,_0x4c9b1e[_0x57c801(0x181)](_0x4e8e30+'\x20',_0xa459a1)+'ms'),_0x532e8c=_0x5be532+0x1,_0xad1618===0x2&&(_0x1373bb(_0x57c801(0x173)),_0x1904a7['abortConnection'](function(){}));else{console[_0x57c801(0xfc)](_0x18dd8e[_0x57c801(0x152)]);throw _0x18dd8e;}}finally{_0x4c9b1e[_0x57c801(0x185)](_0x57c801(0x179),_0x4c9b1e[_0x57c801(0x188)])?(debugLog(_0x57c801(0x10e)),await _0x4c9b1e[_0x57c801(0x11d)](promisify,stopServer)(_0x294fb8)):_0x4c9b1e[_0x57c801(0x182)](_0x5671f2,_0x57c801(0x15c));}});});