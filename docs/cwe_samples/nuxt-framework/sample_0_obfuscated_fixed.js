'use strict';function _0x3141(_0x582994,_0x1a6ede){const _0x1f35a3=_0x1f35();return _0x3141=function(_0x3141e0,_0x123073){_0x3141e0=_0x3141e0-0x15e;let _0x404b23=_0x1f35a3[_0x3141e0];return _0x404b23;},_0x3141(_0x582994,_0x1a6ede);}const _0x25f7b4=_0x3141;(function(_0x5cb914,_0x1825b0){const _0x5b04dc=_0x3141,_0x50361d=_0x5cb914();while(!![]){try{const _0x1f9023=parseInt(_0x5b04dc(0x193))/0x1*(-parseInt(_0x5b04dc(0x198))/0x2)+-parseInt(_0x5b04dc(0x174))/0x3*(parseInt(_0x5b04dc(0x19f))/0x4)+parseInt(_0x5b04dc(0x16a))/0x5*(parseInt(_0x5b04dc(0x197))/0x6)+parseInt(_0x5b04dc(0x1a7))/0x7+-parseInt(_0x5b04dc(0x15f))/0x8+parseInt(_0x5b04dc(0x1a9))/0x9+parseInt(_0x5b04dc(0x166))/0xa*(parseInt(_0x5b04dc(0x176))/0xb);if(_0x1f9023===_0x1825b0)break;else _0x50361d['push'](_0x50361d['shift']());}catch(_0x3f4284){_0x50361d['push'](_0x50361d['shift']());}}}(_0x1f35,0x5a772));const util=require(_0x25f7b4(0x194)),should=require(_0x25f7b4(0x1aa)),async=require(_0x25f7b4(0x17e)),secure_channel=require(_0x25f7b4(0x173)),CloseSecureChannelResponse=secure_channel[_0x25f7b4(0x19a)],{encode_decode_round_trip_test}=require(_0x25f7b4(0x177)),{compare_buffers}=require(_0x25f7b4(0x19c)),{clone_buffer}=require(_0x25f7b4(0x164)),{hexDump}=require(_0x25f7b4(0x186)),debugLog=require(_0x25f7b4(0x186))[_0x25f7b4(0x185)](__filename),{MessageBuilder,MessageChunker}=require('..');function _0x1f35(){const _0x43c1c0=['zgozA','_stream','hmKyK','Unexpected\x20error\x20event\x20received','feed','message','node-opcua-service-secure-channel','3khJpVB','tJaDW','330rpSrfO','node-opcua-packet-analyzer/dist/test_helpers','series','TtwEW','YeLuN','full_message_body','SPhvG','error','async','kKwMf','LSAbJ','chunkSecureMessage','fQnlo','MSG','CPgeV','make_debugLog','node-opcua-debug','eql','readUInt8','QALnE','UYqyf','should\x20receive\x20and\x20handle\x20an\x20ERR\x20message','lvksl','fromCharCode','buffer','xqljx','should\x20test\x20CloseSecureChannelResponse','greaterThan','SecureMessageChunkManager','167MKVrhy','util','\x20message\x20','mfLjR','72puDVWY','8870bQGrBO','FykYz','CloseSecureChannelResponse','serviceResult','node-opcua-utils','dToAW','CHRkv','1910704hFFuCo','../test_fixtures/fixture_GetEndPointResponse','requestHandle','mgOMC','Mygqd','responseHeader','\x20errCode\x20','VtrpJ','176512NcrgHH','Error\x20:\x20code\x200x','6460821PZEQkm','should','\x20On\x20raw\x20Buffer\x20\x0a','4949680duVCjd','length','GSnOT','should\x20reconstruct\x20a\x20valid\x20message\x20when\x20message\x20is\x20received\x20in\x20multiple\x20chunks','equal','node-opcua-buffer-utils','toString','301320XYhqis','StNci','XDEDk','slice','233555pxQTEx','round','jXtyN'];_0x1f35=function(){return _0x43c1c0;};return _0x1f35();}describe(_0x25f7b4(0x192),function(){const _0x11cc31=_0x25f7b4,_0x113ab5={'VtrpJ':_0x11cc31(0x183),'jXtyN':function(_0x34dd13,_0x1f1a02){return _0x34dd13(_0x1f1a02);},'UYqyf':function(_0xf4dc9f,_0x21f0bf){return _0xf4dc9f(_0x21f0bf);},'hmKyK':function(_0x1a4c38){return _0x1a4c38();},'CPgeV':_0x11cc31(0x17d),'FykYz':_0x11cc31(0x168),'UsxTg':_0x11cc31(0x1a0),'LSAbJ':function(_0x290566){return _0x290566();},'mgOMC':function(_0x2adbd1,_0x4528b5,_0x2bd299){return _0x2adbd1(_0x4528b5,_0x2bd299);},'QALnE':_0x11cc31(0x186),'SPhvG':_0x11cc31(0x18b),'zgozA':function(_0x467016,_0x46dfb0,_0x102316){return _0x467016(_0x46dfb0,_0x102316);}};it(_0x11cc31(0x162),function(_0x213227){const _0x1da5d0=_0x11cc31,_0x29e645={'lvksl':function(_0x3fa1ba,_0x5ea76a){const _0x435fca=_0x3141;return _0x113ab5[_0x435fca(0x16c)](_0x3fa1ba,_0x5ea76a);},'mfLjR':function(_0xdb977d,_0x5a349d){const _0x4027f1=_0x3141;return _0x113ab5[_0x4027f1(0x18a)](_0xdb977d,_0x5a349d);},'ROJUQ':function(_0x481bd9,_0x3822cc){return _0x481bd9<_0x3822cc;},'fQnlo':function(_0x5c27bd,_0xbc4a45){return _0x5c27bd-_0xbc4a45;},'IWZut':function(_0x309c39){const _0x4f4445=_0x3141;return _0x113ab5[_0x4f4445(0x16f)](_0x309c39);},'KXgmk':_0x113ab5[_0x1da5d0(0x184)]};if(_0x1da5d0(0x1a3)===_0x113ab5[_0x1da5d0(0x199)])_0x29e645[_0x1da5d0(0x18c)](_0x46b0ec,_0x1da5d0(0x15e)),_0x29e645[_0x1da5d0(0x18c)](_0x407417,_0x29e645[_0x1da5d0(0x196)](_0x1eb16e,_0x82aeec));else{const _0x5a96ed=_0x113ab5['jXtyN'](require,_0x113ab5['UsxTg'])['fixture2'],_0x3dd1ed=0x1000,_0x9b694b=[];let _0x283760=null;async[_0x1da5d0(0x178)]([function(_0x18f6f0){const _0x3856b3=_0x1da5d0,_0x1f7af2={'YeLuN':_0x3856b3(0x18f),'tJaDW':function(_0x1bfcb6,_0x40109d){return _0x1bfcb6(_0x40109d);},'CHRkv':function(_0x13a1f9){return _0x13a1f9();}},_0x3047ac={'requestId':_0x3dd1ed,'tokenId':0x1};_0x5a96ed[_0x3856b3(0x1a4)][_0x3856b3(0x1a1)]=_0x3dd1ed;const _0x1c0eca=new MessageChunker();_0x1c0eca[_0x3856b3(0x181)](_0x113ab5[_0x3856b3(0x1a6)],_0x3047ac,_0x5a96ed,function(_0x2cf553){const _0x477a3b=_0x3856b3;if(_0x2cf553){if(_0x1f7af2[_0x477a3b(0x17a)]===_0x1f7af2[_0x477a3b(0x17a)])_0x9b694b['push'](_0x1f7af2[_0x477a3b(0x175)](clone_buffer,_0x2cf553));else{const _0x1f43a6=_0x1190f7['round'](_0x5a1c71['length']/0x3),_0x52e836=_0x483ac9[_0x477a3b(0x169)](0x0,_0x1f43a6),_0x3637ca=_0x41efb3[_0x477a3b(0x169)](_0x1f43a6);_0x2abd73[_0x477a3b(0x171)](_0x52e836),_0x56080b[_0x477a3b(0x171)](_0x3637ca);}}else _0x283760=_0x1f7af2['tJaDW'](clone_buffer,_0x1c0eca[_0x477a3b(0x16e)][_0x477a3b(0x18e)]),_0x1f7af2[_0x477a3b(0x19e)](_0x18f6f0);});},function(_0xa0a0ce){const _0x5cccd5=_0x1da5d0;_0x9b694b[_0x5cccd5(0x160)][_0x5cccd5(0x1aa)]['be'][_0x5cccd5(0x191)](0x0);for(let _0x149b2a=0x0;_0x29e645['ROJUQ'](_0x149b2a,_0x9b694b[_0x5cccd5(0x160)]-0x1);_0x149b2a++){String[_0x5cccd5(0x18d)](_0x9b694b[_0x149b2a][_0x5cccd5(0x188)](0x3))['should'][_0x5cccd5(0x163)]('C');}String[_0x5cccd5(0x18d)](_0x9b694b[_0x29e645[_0x5cccd5(0x182)](_0x9b694b[_0x5cccd5(0x160)],0x1)]['readUInt8'](0x3))['should'][_0x5cccd5(0x163)]('F'),_0xa0a0ce();},function(_0x400f44){const _0x46164e=_0x1da5d0,_0x4d1aa5={'TtwEW':function(_0x49ad1c){return _0x29e645['IWZut'](_0x49ad1c);}};_0x9b694b[_0x46164e(0x160)]['should']['be'][_0x46164e(0x191)](0x0);const _0x71df3b=new MessageBuilder();_0x71df3b['on'](_0x46164e(0x17b),function(_0x5e7511){compare_buffers(_0x283760,_0x5e7511,0x28);})['on']('message',_0x2c65b7=>{const _0x807bd=_0x46164e;_0x2c65b7[_0x807bd(0x165)]()[_0x807bd(0x1aa)][_0x807bd(0x187)](_0x5a96ed[_0x807bd(0x165)]()),_0x4d1aa5[_0x807bd(0x179)](_0x400f44);})['on'](_0x29e645['KXgmk'],function(_0x2996af){const _0x2a621c=_0x46164e;_0x29e645[_0x2a621c(0x196)](_0x400f44,new Error(_0x2a621c(0x1a8)+_0x2996af['toString'](0x10)));}),_0x9b694b['forEach'](function(_0x3c56cd){const _0x53960f=_0x46164e,_0x52fd2c=Math[_0x53960f(0x16b)](_0x3c56cd[_0x53960f(0x160)]/0x3),_0x5b4ba3=_0x3c56cd[_0x53960f(0x169)](0x0,_0x52fd2c),_0x5b1368=_0x3c56cd[_0x53960f(0x169)](_0x52fd2c);_0x71df3b[_0x53960f(0x171)](_0x5b4ba3),_0x71df3b[_0x53960f(0x171)](_0x5b1368);});}],_0x213227);}}),_0x113ab5[_0x11cc31(0x1a2)](it,_0x113ab5[_0x11cc31(0x17c)],function(_0x2e320e){const _0x5ebc3c=_0x11cc31,_0x5a0ecf={'StNci':function(_0x73b57d,_0x44d297){return _0x73b57d(_0x44d297);},'GSnOT':_0x5ebc3c(0x15e),'kKwMf':_0x5ebc3c(0x195),'NFTkT':function(_0x145d0b){const _0x17dccc=_0x5ebc3c;return _0x113ab5[_0x17dccc(0x180)](_0x145d0b);},'dToAW':function(_0x33b45d,_0x4ddf7d,_0x4cb4f0){const _0x1f04cd=_0x5ebc3c;return _0x113ab5[_0x1f04cd(0x1a2)](_0x33b45d,_0x4ddf7d,_0x4cb4f0);}},_0x405b4e=new MessageBuilder();_0x405b4e['on']('full_message_body',function(_0x3e5851){const _0x2f702e=_0x5ebc3c;_0x5a0ecf['StNci'](debugLog,_0x5a0ecf[_0x2f702e(0x161)]),debugLog(_0x5a0ecf[_0x2f702e(0x167)](hexDump,_0x3e5851));})['on'](_0x5ebc3c(0x172),_0x262313=>{const _0x1ef545=_0x5ebc3c;debugLog(_0x5a0ecf[_0x1ef545(0x17f)],_0x262313),_0x262313[_0x1ef545(0x1a4)][_0x1ef545(0x19b)]['value'][_0x1ef545(0x1aa)][_0x1ef545(0x187)](0x80820000),_0x5a0ecf['NFTkT'](_0x2e320e);})['on']('error',function(_0xbe27a5){const _0x1b295c=_0x5ebc3c;_0x5a0ecf[_0x1b295c(0x19d)](debugLog,_0x1b295c(0x1a5),_0xbe27a5),should['fail'](),_0x5a0ecf[_0x1b295c(0x167)](_0x2e320e,new Error(_0x1b295c(0x170)));});const _0x2486ea=require(_0x113ab5[_0x5ebc3c(0x189)])['makeBufferFromTrace'],_0x567735=_0x2486ea(function(){});_0x405b4e['feed'](_0x567735);}),_0x113ab5[_0x11cc31(0x16d)](it,_0x11cc31(0x190),function(){const _0xff5123=_0x11cc31,_0x5b3eac=new CloseSecureChannelResponse({});_0x113ab5[_0xff5123(0x18a)](encode_decode_round_trip_test,_0x5b3eac);});});