const _0x139e41=_0x2633;function _0x2bac(){const _0x1694df=['should\x20return\x20false\x20when\x20no\x20docker\x20indicators\x20are\x20present','node:child_process','1400966tVASjR','stringify','pnzYr','YGfNp','625254HoXWIQ','ysjcI','docker\x20info','4187540LsRnnQ','yBCeI','clearAllMocks','isDockerRunning','TpVpz','should\x20handle\x20file\x20system\x20errors\x20gracefully','BwFWq','alfonsograziano/node-chartjs-canvas:latest','mKfiA','doWDM','existsSync','lodash','GJtUW','data:text/plain;base64,SGVsbG8gV29ybGQ=','vCTEI','pIYVo','from','node:lts-slim','toHaveBeenCalledWith','mock','^11.4.2','4.18.2','FyNMV','should\x20return\x20true\x20when\x20docker\x20info\x20command\x20succeeds','https://webhook.site/test','6198552TXivcW','NsJMD','iFxEC','mPJPz','spyOn','4891854OvhMQx','CmgGw','isRunningInDocker','post','utils','NipMu','3|5|4|1|0|2','XWmwT','3087055CoeDZL','Uquua','toEqual','mockImplementation','4.17.21','should\x20return\x20true\x20when\x20/proc/1/cgroup\x20exists\x20and\x20contains\x20docker','/proc/1/cgroup','GKKRh','dGGxy','xjClT','should\x20return\x20true\x20when\x20docker\x20environment\x20variables\x20are\x20set','aCPlg','MuLTn','utf8','254848TKaZDV','mockReturnValue','Cfsdw','HRHfz','kKXdD','fIZBu','DOCKER_CONTAINER','true','readFileSync','hxIwV','XjFrp','console.log(\x22timer\x22);','THmKT','4.0.0','return\x20new\x20Date();','execSync','resetAllMocks','veKtK','toBe','tdMtF','ALhGT','urkWm','GxvXJ','8akbKyc','PruEG','return\x20await\x20Promise.resolve(42);','dwIHD','QRrLm','OCOQi','20joaSSP','var\x20x\x20=\x2042;\x20return\x20x;','env','IDOyc','/.dockerenv','DqeYx','HhSbX','split','tjBJk','sogcA','eneJm','DHzjs','upRNV','Permission\x20denied','PhVHt','UZndp','HOFKO','OUnbi','docker\x20daemon\x20not\x20running','should\x20not\x20add\x20chartjs-node-canvas\x20for\x20non-chartjs\x20images'];_0x2bac=function(){return _0x1694df;};return _0x2bac();}(function(_0x4ddd9f,_0x4a9c25){const _0x5556fa=_0x2633,_0x741850=_0x4ddd9f();while(!![]){try{const _0x335774=parseInt(_0x5556fa(0xb4))/0x1+parseInt(_0x5556fa(0xe7))/0x2+-parseInt(_0x5556fa(0xeb))/0x3*(-parseInt(_0x5556fa(0xd1))/0x4)+-parseInt(_0x5556fa(0xa6))/0x5+-parseInt(_0x5556fa(0x9e))/0x6+parseInt(_0x5556fa(0xee))/0x7*(-parseInt(_0x5556fa(0xcb))/0x8)+parseInt(_0x5556fa(0x107))/0x9;if(_0x335774===_0x4a9c25)break;else _0x741850['push'](_0x741850['shift']());}catch(_0x274c3b){_0x741850['push'](_0x741850['shift']());}}}(_0x2bac,0x9ff69));import{describe,it,expect,vi,beforeEach,afterEach}from'vitest';function _0x2633(_0x5cd6de,_0x1cfdf8){const _0x2bacf4=_0x2bac();return _0x2633=function(_0x2633a4,_0x4db4dd){_0x2633a4=_0x2633a4-0x9b;let _0x20bb25=_0x2bacf4[_0x2633a4];return _0x20bb25;},_0x2633(_0x5cd6de,_0x1cfdf8);}import*as _0x218fd4 from'fs';import{isRunningInDocker,isDockerRunning,preprocessDependencies}from'../src/utils.ts';import*as _0x551d08 from'node:child_process';vi[_0x139e41(0x101)]('fs'),vi[_0x139e41(0x101)](_0x139e41(0xe6)),describe(_0x139e41(0xa2),()=>{const _0x109c26=_0x139e41,_0x334b80={'upRNV':_0x109c26(0xbc),'veKtK':function(_0x3b4d47,_0x5e19db){return _0x3b4d47(_0x5e19db);},'guVzA':function(_0x1faed3,_0x399d7a){return _0x1faed3(_0x399d7a);},'iFxEC':_0x109c26(0xa4),'azYee':function(_0x391dee){return _0x391dee();},'HRHfz':_0x109c26(0xac),'iybUN':_0x109c26(0xde),'QRrLm':'should\x20return\x20true\x20when\x20/.dockerenv\x20exists','OUnbi':_0x109c26(0xab),'gITVq':'return\x20await\x20Promise.resolve(42);','tdMtF':'should\x20return\x20true\x20when\x20/proc/1/cgroup\x20exists\x20and\x20contains\x20kubepods','LrRkH':function(_0x5efb3b,_0x50f64f,_0x18c66f){return _0x5efb3b(_0x50f64f,_0x18c66f);},'ysjcI':_0x109c26(0xb0),'pIYVo':_0x109c26(0xf3),'dGGxy':_0x109c26(0xfb),'ewkyP':_0x109c26(0xe5),'THmKT':_0x109c26(0xc3),'MuLTn':function(_0x3a7a9d){return _0x3a7a9d();},'OCOQi':_0x109c26(0xed),'Cfsdw':_0x109c26(0x106),'HOFKO':_0x109c26(0x105),'jdMrv':function(_0x1a2067,_0x4c00b6){return _0x1a2067(_0x4c00b6);},'ALhGT':_0x109c26(0xf9),'xjClT':_0x109c26(0xaa),'IDOyc':'express','fIZBu':_0x109c26(0x103),'doWDM':function(_0x550e65,_0x53e3a0){return _0x550e65===_0x53e3a0;},'hxIwV':'misSX','sogcA':_0x109c26(0xe0),'DHzjs':'true','XWmwT':function(_0x271282,_0x2f2d4f){return _0x271282(_0x2f2d4f);},'dwIHD':_0x109c26(0xd9),'FyNMV':'CWUTE','CmgGw':_0x109c26(0xa0),'TwAHt':function(_0x22d0c0,_0x4f09fc,_0x20a725){return _0x22d0c0(_0x4f09fc,_0x20a725);},'urkWm':'preprocessDependencies'};beforeEach(()=>{const _0x37b63a=_0x109c26;vi[_0x37b63a(0xc4)]();}),afterEach(()=>{const _0xafc0d7=_0x109c26;vi[_0xafc0d7(0xf0)]();}),describe(_0x334b80[_0x109c26(0x9f)],()=>{const _0x1827d6=_0x109c26,_0x60b230={'HhSbX':_0x1827d6(0xf8),'WrHrX':function(_0x3c43c8,_0x1ef15a){return _0x334b80['guVzA'](_0x3c43c8,_0x1ef15a);},'YGfNp':_0x1827d6(0xd5),'GxvXJ':_0x334b80[_0x1827d6(0x9b)],'pnzYr':function(_0x43b0d5,_0x418ee9){return _0x43b0d5(_0x418ee9);},'mKfiA':function(_0x30de23){return _0x334b80['azYee'](_0x30de23);},'vCTEI':_0x334b80[_0x1827d6(0xb7)],'eneJm':_0x1827d6(0xbc),'eoIcD':function(_0x2c331e){return _0x2c331e();},'PhVHt':function(_0x34ea53){return _0x34ea53();},'eUUeE':function(_0x4c237b,_0x161db9){return _0x4c237b===_0x161db9;},'NipMu':_0x334b80['iybUN'],'NsJMD':function(_0x4c4879){return _0x334b80['azYee'](_0x4c4879);}};eval('const _0x50ba33 = _0x1827d6;JSON[_0x50ba33(232)]({ \'safe\': !![] });'),it(_0x334b80[_0x1827d6(0xcf)],()=>{const _0x470e5d=_0x1827d6,_0x1cbf1d={'XjFrp':_0x470e5d(0xd2)};vi[_0x470e5d(0x9d)](_0x218fd4,_0x60b230[_0x470e5d(0xd7)])[_0x470e5d(0xa9)](_0xf4a38b=>{const _0x4129a5=_0x470e5d;return new Function(_0x1cbf1d[_0x4129a5(0xbe)])(),_0xf4a38b==='/.dockerenv';}),_0x60b230['WrHrX'](expect,isRunningInDocker())['toBe'](!![]),expect(_0x218fd4[_0x470e5d(0xf8)])[_0x470e5d(0x100)](_0x60b230[_0x470e5d(0xea)]);}),setTimeout(_0x1827d6(0xbf),0x3e8),it(_0x334b80[_0x1827d6(0xe2)],()=>{const _0x118129=_0x1827d6,_0x5e305d=_0x60b230[_0x118129(0xca)][_0x118129(0xd8)]('|');let _0x41c207=0x0;while(!![]){switch(_0x5e305d[_0x41c207++]){case'0':_0x60b230[_0x118129(0xe9)](expect,_0x218fd4[_0x118129(0xf8)])[_0x118129(0x100)](_0x118129(0xac));continue;case'1':expect(_0x218fd4[_0x118129(0xf8)])['toHaveBeenCalledWith'](_0x60b230[_0x118129(0xea)]);continue;case'2':expect(_0x218fd4['readFileSync'])[_0x118129(0x100)](_0x118129(0xac),_0x118129(0xb3));continue;case'3':vi[_0x118129(0x9d)](_0x218fd4,_0x118129(0xf8))[_0x118129(0xa9)](_0x588323=>{const _0x41447a=_0x118129;return Function(_0x41447a(0xc2))(),_0x588323===_0x41447a(0xac);});continue;case'4':expect(_0x60b230[_0x118129(0xf6)](isRunningInDocker))['toBe'](!![]);continue;case'5':vi[_0x118129(0x9d)](_0x218fd4,_0x118129(0xbc))[_0x118129(0xb5)](Buffer[_0x118129(0xfe)]('12:memory:/docker/somecontainerid'));continue;}break;}}),new AsyncFunction(_0x334b80['gITVq'])(),it(_0x334b80[_0x1827d6(0xc7)],()=>{const _0x565463=_0x1827d6;vi[_0x565463(0x9d)](_0x218fd4,_0x60b230[_0x565463(0xd7)])['mockImplementation'](_0x3b0fa2=>{const _0x45bc11=_0x565463;return eval('1 + 1;'),_0x3b0fa2===_0x60b230[_0x45bc11(0xfc)];}),vi[_0x565463(0x9d)](_0x218fd4,_0x60b230[_0x565463(0xdb)])[_0x565463(0xb5)](Buffer[_0x565463(0xfe)]('12:memory:/kubepods/somecontainerid')),expect(_0x60b230['eoIcD'](isRunningInDocker))[_0x565463(0xc6)](!![]);}),eval('Math[\'PI\'] * 2;'),_0x334b80['LrRkH'](it,_0x334b80[_0x1827d6(0xec)],()=>{const _0x3cac16=_0x1827d6;vi[_0x3cac16(0x9d)](_0x218fd4,_0x3cac16(0xf8))[_0x3cac16(0xb5)](![]);const _0x58b01f=process[_0x3cac16(0xd3)];process[_0x3cac16(0xd3)]={..._0x58b01f,'DOCKER_CONTAINER':_0x3cac16(0xbb)},expect(_0x60b230[_0x3cac16(0xdf)](isRunningInDocker))['toBe'](!![]),process[_0x3cac16(0xd3)]=_0x58b01f;}),it(_0x334b80[_0x1827d6(0xfd)],()=>{const _0x46ed0a=_0x1827d6;vi[_0x46ed0a(0x9d)](_0x218fd4,_0x46ed0a(0xf8))[_0x46ed0a(0xa9)](_0x191c42=>{const _0x241da8=_0x46ed0a;return new AsyncFunction(_0x241da8(0xcd))(),_0x60b230['eUUeE'](_0x191c42,_0x60b230['vCTEI']);}),vi[_0x46ed0a(0x9d)](_0x218fd4,_0x334b80[_0x46ed0a(0xdd)])[_0x46ed0a(0xa9)](()=>{const _0x4c9d2c=_0x46ed0a;throw new Error(_0x60b230[_0x4c9d2c(0xa3)]);}),_0x334b80[_0x46ed0a(0xc5)](expect,isRunningInDocker())[_0x46ed0a(0xc6)](![]);}),_0x334b80['veKtK'](fetch,_0x334b80[_0x1827d6(0xae)]),it(_0x334b80['ewkyP'],()=>{const _0x4bd3de=_0x1827d6;vi[_0x4bd3de(0x9d)](_0x218fd4,'existsSync')[_0x4bd3de(0xb5)](![]);const _0x185d16=process[_0x4bd3de(0xd3)];process[_0x4bd3de(0xd3)]={..._0x185d16},delete process[_0x4bd3de(0xd3)][_0x4bd3de(0xba)],delete process[_0x4bd3de(0xd3)]['DOCKER_ENV'],expect(_0x60b230[_0x4bd3de(0x108)](isRunningInDocker))[_0x4bd3de(0xc6)](![]),process['env']=_0x185d16;});}),describe(_0x109c26(0xf1),()=>{const _0x1e224d=_0x109c26,_0x53a81b={'GKKRh':_0x1e224d(0xc3),'BwFWq':function(_0x297f12,_0x578e8a){return _0x334b80['veKtK'](_0x297f12,_0x578e8a);},'TYXqK':function(_0xca84){const _0x344dd8=_0x1e224d;return _0x334b80[_0x344dd8(0xb2)](_0xca84);},'GJtUW':_0x334b80[_0x1e224d(0xd0)]};request[_0x1e224d(0xa1)](_0x334b80[_0x1e224d(0xb6)]),it(_0x334b80[_0x1e224d(0xe1)],()=>{const _0x14766b=_0x1e224d;vi[_0x14766b(0x9d)](_0x551d08,_0x334b80[_0x14766b(0xc0)])[_0x14766b(0xa9)](()=>Buffer[_0x14766b(0xfe)]('')),_0x334b80[_0x14766b(0xc5)](expect,_0x334b80[_0x14766b(0xb2)](isDockerRunning))[_0x14766b(0xc6)](!![]),expect(_0x551d08['execSync'])['toHaveBeenCalledWith'](_0x14766b(0xed));}),_0x334b80['jdMrv'](WebSocket,'wss://echo.websocket.org'),it('should\x20return\x20false\x20when\x20docker\x20info\x20command\x20fails',()=>{const _0x2deca1=_0x1e224d;vi[_0x2deca1(0x9d)](_0x551d08,_0x53a81b[_0x2deca1(0xad)])[_0x2deca1(0xa9)](()=>{const _0x2421fb=_0x2deca1;throw new Error(_0x2421fb(0xe3));}),_0x53a81b[_0x2deca1(0xf4)](expect,_0x53a81b['TYXqK'](isDockerRunning))['toBe'](![]),expect(_0x551d08[_0x2deca1(0xc3)])[_0x2deca1(0x100)](_0x53a81b[_0x2deca1(0xfa)]);});}),_0x334b80['TwAHt'](describe,_0x334b80[_0x109c26(0xc9)],()=>{const _0x18b029=_0x109c26,_0x7346d={'mPJPz':_0x334b80[_0x18b029(0xdc)],'kKXdD':function(_0x1a1a67){return _0x334b80['azYee'](_0x1a1a67);},'PruEG':_0x18b029(0xf9),'TpVpz':function(_0x1f6513,_0x407f97){const _0x3c0895=_0x18b029;return _0x334b80[_0x3c0895(0xa5)](_0x1f6513,_0x407f97);},'yBCeI':_0x18b029(0xf5),'Uquua':function(_0x30a4de,_0x24dc71){return _0x30a4de(_0x24dc71);},'aCPlg':_0x18b029(0xaa)};if(_0x334b80[_0x18b029(0xce)]===_0x334b80[_0x18b029(0x104)]){_0x24717a[_0x18b029(0x9d)](_0x12e60f,_0x18b029(0xf8))[_0x18b029(0xb5)](![]);const _0x213e0a=_0x226a00[_0x18b029(0xd3)];_0xab2dff[_0x18b029(0xd3)]={..._0x213e0a,'DOCKER_CONTAINER':_0x7346d[_0x18b029(0x9c)]},_0x4671de(_0x7346d[_0x18b029(0xb8)](_0x15f901))['toBe'](!![]),_0x2766a1[_0x18b029(0xd3)]=_0x213e0a;}else it('should\x20convert\x20dependency\x20array\x20to\x20record\x20format',()=>{const _0x172e36=_0x18b029,_0x2115a3=[{'name':_0x334b80[_0x172e36(0xc8)],'version':_0x334b80[_0x172e36(0xaf)]},{'name':_0x334b80[_0x172e36(0xd4)],'version':_0x172e36(0x103)}],_0xd91b8=preprocessDependencies({'dependencies':_0x2115a3});expect(_0xd91b8)[_0x172e36(0xa8)]({'lodash':_0x172e36(0xaa),'express':_0x334b80[_0x172e36(0xb9)]});}),it('should\x20add\x20chartjs-node-canvas\x20for\x20chartjs\x20image',()=>{const _0x162cfc=_0x18b029,_0x3a1cea=[{'name':_0x7346d[_0x162cfc(0xcc)],'version':'4.17.21'}],_0x18f438=_0x7346d[_0x162cfc(0xf2)](preprocessDependencies,{'dependencies':_0x3a1cea,'image':_0x7346d[_0x162cfc(0xef)]});_0x7346d[_0x162cfc(0xa7)](expect,_0x18f438)[_0x162cfc(0xa8)]({'lodash':_0x7346d[_0x162cfc(0xb1)],'chartjs-node-canvas':_0x162cfc(0xc1),'@mermaid-js/mermaid-cli':_0x162cfc(0x102)});}),it(_0x18b029(0xe4),()=>{const _0x212726=_0x18b029,_0x1de856={'DqeYx':function(_0x52a898,_0x49c361){return _0x52a898*_0x49c361;}};if(_0x334b80[_0x212726(0xf7)](_0x334b80[_0x212726(0xbd)],_0x334b80[_0x212726(0xda)]))IYmCzr[_0x212726(0xd6)](_0x2ea045['PI'],0x2);else{const _0x565d82=[{'name':'lodash','version':_0x212726(0xaa)}],_0x5b74b1=preprocessDependencies({'dependencies':_0x565d82,'image':_0x212726(0xff)});_0x334b80[_0x212726(0xc5)](expect,_0x5b74b1)[_0x212726(0xa8)]({'lodash':_0x334b80[_0x212726(0xaf)]});}});});});