function _0x31e6(_0x45e73d,_0x32e45e){const _0x5b4f6f=_0x5b4f();return _0x31e6=function(_0x31e62c,_0x4f2b8d){_0x31e62c=_0x31e62c-0x18c;let _0x3d406c=_0x5b4f6f[_0x31e62c];return _0x3d406c;},_0x31e6(_0x45e73d,_0x32e45e);}(function(_0x19aae9,_0x53b797){const _0x1d8692=_0x31e6,_0x2b1268=_0x19aae9();while(!![]){try{const _0x415f3d=-parseInt(_0x1d8692(0x195))/0x1*(parseInt(_0x1d8692(0x1bc))/0x2)+-parseInt(_0x1d8692(0x1a7))/0x3+parseInt(_0x1d8692(0x19b))/0x4*(parseInt(_0x1d8692(0x1d7))/0x5)+parseInt(_0x1d8692(0x1bd))/0x6+-parseInt(_0x1d8692(0x19a))/0x7*(parseInt(_0x1d8692(0x1ec))/0x8)+-parseInt(_0x1d8692(0x1f8))/0x9*(-parseInt(_0x1d8692(0x1ad))/0xa)+-parseInt(_0x1d8692(0x1be))/0xb;if(_0x415f3d===_0x53b797)break;else _0x2b1268['push'](_0x2b1268['shift']());}catch(_0x5352bd){_0x2b1268['push'](_0x2b1268['shift']());}}}(_0x5b4f,0xd6232));import _0x3aaba1 from'clipboard';import _0x4b1cc8 from'jquery';function _0x5b4f(){const _0x30b41d=['BAkHE','nviLK','xrovr','SzURG','message-id','.rehide_muted_user_message','bottom','xnhmo','maybe_scroll_to_show_message_top','click','has_actions_popover','hide_all','collapse','1269pvzThJ','DiPsa','stream_id','kLBQE','MFpWF','182YLdNrp','1552EjCkio','kYiOW','FGbqb','get_message_selection','RquUe','currentTarget','register_popover_menu','bQDEh','current','collapsed','get_row','.respond_button','4578396qGSQmq','focus_first_popover_item','is_hidden','build_move_topic_to_stream_popover','hide_revealed_message','PNbuF','250hzHGFj','one',':focus','addClass','RZSyu','.mark_as_unread','Trying\x20to\x20get\x20menu\x20items\x20when\x20action\x20popover\x20is\x20closed.','ursfm','flip','MRRNR','KUggJ','message_actions','show_user_list','.copy_link','stopPropagation','1522KzEArO','10441644qbKjsN','7899056LmRNkV','data','EWqhY','closest','dgZWS','popover_instances','uHxag','.actions_hover\x20.message-actions-menu-button','is_message_actions_popover_displayed','kCHKn','min(max(320px,\x20100vw),\x20350px)','akqSt','CGmkc','.message_row','VwuFg','dapjA','.delete_message','delete_message','OFLbq','kGpVT','eCzpP','pjVzt','IBHdI','trigger','.popover_edit_message,\x20.popover_view_source','19165pgPUeL','GbqRo','mjydL','gKhtP','parentElement','hide','message_containers','get','any_active','toggle_emoji_popover','top','XLcPC','AxcwK','DqhIE','HCVUH','IjMJb','view','removeClass','selection_within_message_id','reference','start','248080JUOIiP','find','topic','xBQjX','QIBKM','Xzneh','mark_as_unread_from_here','error','CuPlo','[data-tippy-root]\x20.actions_popover','blur','.view_read_receipts','599697nwdMmL','destroy','EtxFB','TpPMH','.reaction_button','.message_controls','is_editing','NpHxD','preventDefault','left','Ocjrp','select_id','get_actions_popover_content_context'];_0x5b4f=function(){return _0x30b41d;};return _0x5b4f();}import _0x2b4189 from'minimalistic-assert';import _0x391dd4 from'../templates/popovers/actions_popover.hbs';import*as _0x16e262 from'./blueslip';import*as _0x56b390 from'./compose_reply';import*as _0x384881 from'./condense';import{show_copied_confirmation}from'./copied_tooltip';import*as _0x33ae64 from'./emoji_picker';import*as _0x5b0e8f from'./message_edit';import*as _0x315cb5 from'./message_lists';import*as _0x5622bc from'./message_viewport';import*as _0x200945 from'./popover_menus';import*as _0x54c8a7 from'./popover_menus_data';import*as _0x51c78b from'./popovers';import*as _0x21fb30 from'./read_receipts';import*as _0x4bdb65 from'./rows';import*as _0x2050ad from'./stream_popover';import{parse_html}from'./ui_util';import*as _0xe3f8fe from'./unread_ops';let message_actions_popover_keyboard_toggle=![];function get_action_menu_menu_items(){const _0x3d3ee3=_0x31e6,_0x6902fe={'CGmkc':function(_0x28d456,_0x5701c7){return _0x28d456(_0x5701c7);},'nwJVF':_0x3d3ee3(0x1f5),'Xzneh':'li:not(.divider):visible\x20a'},_0x38ae7c=_0x6902fe[_0x3d3ee3(0x1ca)](_0x4b1cc8,_0x6902fe['nwJVF']);if(!_0x38ae7c)return _0x16e262[_0x3d3ee3(0x1f3)](_0x3d3ee3(0x1b3)),undefined;return _0x38ae7c[_0x3d3ee3(0x1ed)](_0x6902fe[_0x3d3ee3(0x1f1)]);}function focus_first_action_popover_item(){const _0x576761=_0x31e6,_0x5ac9bb={'DqhIE':function(_0x15ad2d){return _0x15ad2d();}},_0x39b7f6=_0x5ac9bb[_0x576761(0x1e4)](get_action_menu_menu_items);_0x200945[_0x576761(0x1a8)](_0x39b7f6);}export function toggle_message_actions_menu(_0x240285){const _0x531f75=_0x31e6,_0x5cfda0={'EWqhY':_0x531f75(0x191)};if(_0x200945[_0x531f75(0x1c6)]())return _0x51c78b[_0x531f75(0x193)](),!![];if(_0x240285['locally_echoed']||_0x5b0e8f[_0x531f75(0x1fe)](_0x240285['id']))return!![];_0x51c78b[_0x531f75(0x1df)]()&&_0x51c78b[_0x531f75(0x193)]();_0x5622bc[_0x531f75(0x190)]();const _0x33700e=_0x4b1cc8('.selected_message\x20.actions_hover\x20.message-actions-menu-button');return message_actions_popover_keyboard_toggle=!![],_0x33700e[_0x531f75(0x1d5)](_0x5cfda0[_0x531f75(0x1c0)]),!![];}export function initialize(){const _0x477d20=_0x31e6,_0x3cb42d={'eCzpP':function(_0x1c859a,_0x4c1da5){return _0x1c859a(_0x4c1da5);},'QIBKM':_0x477d20(0x1cb),'GbqRo':function(_0x205b09,_0x2dbff7){return _0x205b09(_0x2dbff7);},'MRRNR':function(_0x468468,_0xe876de){return _0x468468(_0xe876de);},'nviLK':function(_0x57d5ef,_0xbbd64a){return _0x57d5ef(_0xbbd64a);},'kYiOW':function(_0x88772d,_0x9b3d98){return _0x88772d!==_0x9b3d98;},'IBHdI':function(_0xe86e69,_0x1c59fd){return _0xe86e69(_0x1c59fd);},'RquUe':function(_0x44167b,_0xf9747d){return _0x44167b(_0xf9747d);},'MFpWF':_0x477d20(0x1ac),'KUggJ':_0x477d20(0x198),'kCHKn':function(_0x374733,_0x59fbf4){return _0x374733===_0x59fbf4;},'NpHxD':'hFILR','OFLbq':_0x477d20(0x18c),'CuPlo':_0x477d20(0x1fb),'ursfm':function(_0xf6522b,_0x2a4eee){return _0xf6522b(_0x2a4eee);},'VwuFg':function(_0x10fb29,_0x30e2bf){return _0x10fb29(_0x30e2bf);},'FGbqb':_0x477d20(0x18e),'HCVUH':function(_0x375c4d,_0x1e08c2){return _0x375c4d(_0x1e08c2);},'RZSyu':function(_0x1a8032,_0x1db06c){return _0x1a8032(_0x1db06c);},'VZdHt':_0x477d20(0x1a6),'dapjA':'click','GOWMM':_0x477d20(0x1b2),'BAkHE':'.popover_toggle_collapse','bQDEh':_0x477d20(0x18d),'Ocjrp':_0x477d20(0x1f7),'dgZWS':_0x477d20(0x1fc),'gKhtP':_0x477d20(0x1ba),'Zosqm':_0x477d20(0x192),'mgOsa':_0x477d20(0x1c8)};_0x200945[_0x477d20(0x1a1)](_0x477d20(0x1c5),{'maxWidth':_0x3cb42d['mgOsa'],'placement':'bottom','popperOptions':{'modifiers':[{'name':_0x477d20(0x1b5),'options':{'fallbackPlacements':[_0x477d20(0x1e1),_0x477d20(0x201)]}}]},'onShow'(_0x56d7f3){const _0x402a61=_0x477d20;_0x200945['on_show_prep'](_0x56d7f3);const _0x5af74f=_0x3cb42d[_0x402a61(0x1d2)](_0x4b1cc8,_0x56d7f3[_0x402a61(0x1ea)])[_0x402a61(0x1c1)](_0x3cb42d[_0x402a61(0x1f0)]),_0x5d654a=_0x4bdb65['id'](_0x5af74f),_0x412d72=_0x54c8a7[_0x402a61(0x204)](_0x5d654a);_0x56d7f3['setContent'](_0x3cb42d[_0x402a61(0x1d2)](parse_html,_0x3cb42d[_0x402a61(0x1d8)](_0x391dd4,_0x412d72))),_0x5af74f[_0x402a61(0x1b0)](_0x402a61(0x192));},'onMount'(_0x2d46d0){const _0x459451=_0x477d20,_0x354c47={'IjMJb':function(_0x488e3b,_0x1a1883){const _0x396530=_0x31e6;return _0x3cb42d[_0x396530(0x1e5)](_0x488e3b,_0x1a1883);},'xBQjX':function(_0x1a2106,_0x2bccf5){return _0x1a2106!==_0x2bccf5;},'xnhmo':function(_0x3145aa,_0x21286e){return _0x3145aa(_0x21286e);},'AxcwK':_0x459451(0x1fd)},_0x82f971=_0x3cb42d[_0x459451(0x1b1)](_0x4b1cc8,_0x2d46d0['reference'])['closest']('.message_row'),_0x44cd83=_0x4bdb65['id'](_0x82f971);let _0x294126;_0x56b390[_0x459451(0x1e9)]()===_0x44cd83&&(_0x294126=_0x56b390[_0x459451(0x19e)]());message_actions_popover_keyboard_toggle&&(focus_first_action_popover_item(),message_actions_popover_keyboard_toggle=![]);_0x200945[_0x459451(0x1c3)][_0x459451(0x1b8)]=_0x2d46d0;const _0x471ef3=_0x3cb42d[_0x459451(0x1d2)](_0x4b1cc8,_0x2d46d0['popper']);_0x471ef3[_0x459451(0x1ae)](_0x459451(0x191),_0x3cb42d['VZdHt'],_0x159cd2=>{const _0x1f9c78=_0x459451,_0x5a9fb1={'RkWtq':function(_0x570004,_0x379a67){const _0x338389=_0x31e6;return _0x3cb42d[_0x338389(0x1d2)](_0x570004,_0x379a67);},'pjVzt':function(_0x39a09f,_0x2363f2){const _0x3b890a=_0x31e6;return _0x3cb42d[_0x3b890a(0x1b6)](_0x39a09f,_0x2363f2);},'SzURG':function(_0xed6989,_0x40557a){return _0xed6989!==_0x40557a;}};if(_0x1f9c78(0x1d1)!==_0x1f9c78(0x1c9))_0x56b390['quote_and_reply']({'trigger':'popover\x20respond','message_id':_0x44cd83,'quote_content':_0x294126}),_0x159cd2[_0x1f9c78(0x200)](),_0x159cd2['stopPropagation'](),_0x2d46d0[_0x1f9c78(0x1dc)]();else{const _0x52f282=_0x5a9fb1['RkWtq'](_0xe468da,_0x175136[_0x1f9c78(0x1a0)])[_0x1f9c78(0x1bf)]('message-id');_0x5a9fb1[_0x1f9c78(0x1d3)](_0x1e22ba,_0x5a9fb1[_0x1f9c78(0x208)](_0x526c7b['current'],_0x4ee5e2));const _0x1ac9e7=_0x3d375d['current'][_0x1f9c78(0x1a5)](_0x52f282);_0x53494c[_0x1f9c78(0x1eb)](_0x1ac9e7),_0x56f701[_0x1f9c78(0x200)](),_0x3f7754['stopPropagation'](),_0x2f73cd['hide']();}}),_0x471ef3[_0x459451(0x1ae)](_0x3cb42d['dapjA'],_0x459451(0x1d6),_0x2ab9a6=>{const _0x3d88d5=_0x459451,_0x2c0785=_0x354c47[_0x3d88d5(0x1e6)](_0x4b1cc8,_0x2ab9a6['currentTarget'])[_0x3d88d5(0x1bf)](_0x3d88d5(0x18c));_0x2b4189(_0x354c47[_0x3d88d5(0x1ef)](_0x315cb5[_0x3d88d5(0x1a3)],undefined));const _0x4f4e0b=_0x315cb5[_0x3d88d5(0x1a3)][_0x3d88d5(0x1a5)](_0x2c0785);_0x5b0e8f[_0x3d88d5(0x1eb)](_0x4f4e0b),_0x2ab9a6[_0x3d88d5(0x200)](),_0x2ab9a6['stopPropagation'](),_0x2d46d0['hide']();}),_0x471ef3['one'](_0x3cb42d[_0x459451(0x1cd)],'.popover_move_message',_0x5bad98=>{const _0x3b277d=_0x459451,_0x5393b8=_0x3cb42d[_0x3b277d(0x206)](_0x4b1cc8,_0x5bad98[_0x3b277d(0x1a0)])['data'](_0x3b277d(0x18c));_0x2b4189(_0x3cb42d[_0x3b277d(0x19c)](_0x315cb5['current'],undefined)),_0x315cb5['current'][_0x3b277d(0x203)](_0x5393b8);const _0x23fde4=_0x315cb5[_0x3b277d(0x1a3)]['get'](_0x5393b8);_0x2050ad[_0x3b277d(0x1aa)](_0x23fde4[_0x3b277d(0x197)],_0x23fde4[_0x3b277d(0x1ee)],![],_0x23fde4),_0x5bad98['preventDefault'](),_0x5bad98[_0x3b277d(0x1bb)](),_0x2d46d0[_0x3b277d(0x1dc)]();}),_0x471ef3['one'](_0x3cb42d[_0x459451(0x1cd)],_0x3cb42d['GOWMM'],_0x4af981=>{const _0x1c57c9=_0x459451,_0x520d50=_0x354c47[_0x1c57c9(0x1e6)](_0x4b1cc8,_0x4af981['currentTarget'])[_0x1c57c9(0x1bf)](_0x1c57c9(0x18c));_0xe3f8fe[_0x1c57c9(0x1f2)](_0x520d50),_0x4af981[_0x1c57c9(0x200)](),_0x4af981[_0x1c57c9(0x1bb)](),_0x2d46d0[_0x1c57c9(0x1dc)]();}),_0x471ef3[_0x459451(0x1ae)](_0x3cb42d[_0x459451(0x1cd)],_0x3cb42d[_0x459451(0x205)],_0x139150=>{const _0x3a5b82=_0x459451,_0x1d392a={'EtxFB':function(_0x5a9363,_0x50c5b7){const _0x1aa402=_0x31e6;return _0x3cb42d[_0x1aa402(0x1d4)](_0x5a9363,_0x50c5b7);}};if('uAwKk'!=='uAwKk'){const _0x2da734=_0x1d392a[_0x3a5b82(0x1fa)](_0x255953,_0x2d06c9[_0x3a5b82(0x1a0)])[_0x3a5b82(0x1bf)]('message-id');_0x326f45[_0x3a5b82(0x1cf)](_0x2da734),_0x21a9ed[_0x3a5b82(0x200)](),_0x2f842b[_0x3a5b82(0x1bb)](),_0x9d284a[_0x3a5b82(0x1dc)]();}else{const _0x16f672=_0x3cb42d[_0x3a5b82(0x1d4)](_0x4b1cc8,_0x139150[_0x3a5b82(0x1a0)])['data'](_0x3a5b82(0x18c));_0x3cb42d[_0x3a5b82(0x19f)](_0x2b4189,_0x315cb5['current']!==undefined);const _0x4c4f72=_0x315cb5[_0x3a5b82(0x1a3)][_0x3a5b82(0x1de)](_0x16f672);_0x2b4189(_0x4c4f72!==undefined);if(_0x4c4f72[_0x3a5b82(0x1a4)])_0x384881['uncollapse'](_0x4c4f72);else{if(_0x3cb42d[_0x3a5b82(0x199)]!==_0x3cb42d[_0x3a5b82(0x1b7)])_0x384881[_0x3a5b82(0x194)](_0x4c4f72);else return _0x1e4c13[_0x3a5b82(0x1f3)](_0x3a5b82(0x1b3)),_0x1cd28c;}_0x139150['preventDefault'](),_0x139150['stopPropagation'](),_0x2d46d0[_0x3a5b82(0x1dc)]();}}),_0x471ef3[_0x459451(0x1ae)](_0x3cb42d['dapjA'],_0x3cb42d[_0x459451(0x1a2)],_0x38e0ff=>{const _0x385f13=_0x459451;if(_0x3cb42d[_0x385f13(0x1c7)](_0x3cb42d[_0x385f13(0x1ff)],_0x3cb42d[_0x385f13(0x1ff)])){const _0x598414=_0x3cb42d[_0x385f13(0x19f)](_0x4b1cc8,_0x38e0ff[_0x385f13(0x1a0)])[_0x385f13(0x1bf)](_0x3cb42d[_0x385f13(0x1d0)]);_0x2b4189(_0x3cb42d[_0x385f13(0x19c)](_0x315cb5['current'],undefined));const _0x1a496f=_0x315cb5[_0x385f13(0x1a3)][_0x385f13(0x1a5)](_0x598414),_0x47224e=_0x315cb5[_0x385f13(0x1a3)]['get'](_0x4bdb65['id'](_0x1a496f)),_0x18a9eb=_0x315cb5[_0x385f13(0x1a3)]['view'][_0x385f13(0x1dd)][_0x385f13(0x1de)](_0x47224e['id']);_0x1a496f&&!_0x18a9eb[_0x385f13(0x1a9)]&&_0x315cb5[_0x385f13(0x1a3)][_0x385f13(0x1e7)][_0x385f13(0x1ab)](_0x598414),_0x38e0ff[_0x385f13(0x200)](),_0x38e0ff[_0x385f13(0x1bb)](),_0x2d46d0[_0x385f13(0x1dc)]();}else _0x558019=_0x1fdf6f[_0x385f13(0x19e)]();}),_0x471ef3['one'](_0x3cb42d[_0x459451(0x1cd)],_0x3cb42d[_0x459451(0x202)],_0x74f9d8=>{const _0x4d7626=_0x459451,_0x3ea06f={'XLcPC':_0x3cb42d['OFLbq']};if(_0x4d7626(0x1fb)===_0x3cb42d[_0x4d7626(0x1f4)]){const _0x173e36=_0x3cb42d[_0x4d7626(0x1b4)](_0x4b1cc8,_0x74f9d8[_0x4d7626(0x1a0)])['data'](_0x4d7626(0x18c));_0x21fb30[_0x4d7626(0x1b9)](_0x173e36),_0x74f9d8[_0x4d7626(0x200)](),_0x74f9d8['stopPropagation'](),_0x2d46d0['hide']();}else{const _0x3126a4=_0x237521(_0x38d504['currentTarget'])[_0x4d7626(0x1bf)](_0x3ea06f[_0x4d7626(0x1e2)]);_0x54bb17[_0x4d7626(0x1b9)](_0x3126a4),_0x114276[_0x4d7626(0x200)](),_0x56c25f['stopPropagation'](),_0x599ecb[_0x4d7626(0x1dc)]();}}),_0x471ef3[_0x459451(0x1ae)](_0x459451(0x191),_0x459451(0x1ce),_0x13d9a8=>{const _0x4af3e8=_0x459451,_0x2efc13=_0x4b1cc8(_0x13d9a8[_0x4af3e8(0x1a0)])[_0x4af3e8(0x1bf)](_0x4af3e8(0x18c));_0x5b0e8f['delete_message'](_0x2efc13),_0x13d9a8[_0x4af3e8(0x200)](),_0x13d9a8[_0x4af3e8(0x1bb)](),_0x2d46d0['hide']();}),_0x471ef3['one']('click',_0x3cb42d[_0x459451(0x1c2)],_0x3aa62a=>{const _0x4f4434=_0x459451,_0x29a9d3=_0x3cb42d[_0x4f4434(0x1cc)](_0x4b1cc8,_0x3aa62a[_0x4f4434(0x1a0)])['data'](_0x4f4434(0x18c));_0x3aa62a['stopPropagation'](),_0x3aa62a['preventDefault'](),_0x33ae64['toggle_emoji_popover'](_0x2d46d0[_0x4f4434(0x1ea)][_0x4f4434(0x1db)],_0x29a9d3,{'placement':_0x3cb42d[_0x4f4434(0x19d)]}),_0x2d46d0['hide']();}),new _0x3aaba1(_0x471ef3[_0x459451(0x1ed)](_0x3cb42d[_0x459451(0x1da)])[0x0])['on']('success',()=>{const _0x79a93e=_0x459451,_0x706494={'uHxag':function(_0x47d0e5,_0x60ea53){return _0x47d0e5(_0x60ea53);},'mjydL':_0x79a93e(0x18c),'xrovr':function(_0x1e424d,_0x458bda){const _0x4df5b3=_0x79a93e;return _0x354c47[_0x4df5b3(0x1e6)](_0x1e424d,_0x458bda);}};show_copied_confirmation(_0x354c47[_0x79a93e(0x18f)](_0x4b1cc8,_0x2d46d0[_0x79a93e(0x1ea)])['closest'](_0x354c47[_0x79a93e(0x1e3)])[0x0]),setTimeout(()=>{const _0x465147=_0x79a93e;if(_0x465147(0x196)==='oHnbF'){const _0x1c4a4b=_0x706494[_0x465147(0x1c4)](_0x4ff391,_0x1e12e1[_0x465147(0x1a0)])[_0x465147(0x1bf)](_0x706494[_0x465147(0x1d9)]);_0x62d2b9[_0x465147(0x1bb)](),_0x690121[_0x465147(0x200)](),_0xc3f440[_0x465147(0x1e0)](_0x51d1ef[_0x465147(0x1ea)][_0x465147(0x1db)],_0x1c4a4b,{'placement':_0x465147(0x18e)}),_0x3e3f7d[_0x465147(0x1dc)]();}else _0x706494[_0x465147(0x207)](_0x4b1cc8,_0x465147(0x1af))['trigger'](_0x465147(0x1f6));},0x0),_0x2d46d0[_0x79a93e(0x1dc)]();});},'onHidden'(_0x22547d){const _0xd22fe8=_0x477d20,_0x1545ce=_0x4b1cc8(_0x22547d[_0xd22fe8(0x1ea)])[_0xd22fe8(0x1c1)](_0xd22fe8(0x1cb));_0x1545ce[_0xd22fe8(0x1e8)](_0x3cb42d['Zosqm']),_0x22547d[_0xd22fe8(0x1f9)](),_0x200945[_0xd22fe8(0x1c3)]['message_actions']=undefined,message_actions_popover_keyboard_toggle=![];}});}