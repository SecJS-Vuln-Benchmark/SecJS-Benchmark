'use strict';const _0x378eb9=_0x2eca;(function(_0x2ec98b,_0x532f6e){const _0x7075a8=_0x2eca,_0x453edc=_0x2ec98b();while(!![]){try{const _0x1eaa65=parseInt(_0x7075a8(0x1db))/0x1*(parseInt(_0x7075a8(0x249))/0x2)+-parseInt(_0x7075a8(0x1e0))/0x3+parseInt(_0x7075a8(0x246))/0x4+-parseInt(_0x7075a8(0x213))/0x5*(-parseInt(_0x7075a8(0x1ce))/0x6)+-parseInt(_0x7075a8(0x239))/0x7+-parseInt(_0x7075a8(0x1f7))/0x8+parseInt(_0x7075a8(0x245))/0x9*(-parseInt(_0x7075a8(0x240))/0xa);if(_0x1eaa65===_0x532f6e)break;else _0x453edc['push'](_0x453edc['shift']());}catch(_0x553b15){_0x453edc['push'](_0x453edc['shift']());}}}(_0x1614,0x590a6));const nconf=require('nconf'),fs=require('fs'),url=require(_0x378eb9(0x1f0)),path=require(_0x378eb9(0x222)),{fork}=require('child_process'),logrotate=require(_0x378eb9(0x1fb)),mkdirp=require(_0x378eb9(0x248)),file=require(_0x378eb9(0x221)),pkg=require(_0x378eb9(0x1d3)),pathToConfig=path[_0x378eb9(0x216)](__dirname,process[_0x378eb9(0x22b)]['CONFIG']||_0x378eb9(0x247));function _0x1614(){const _0x451f48=['daemon','port','getFullYear','exit','HKuKe','[loader]\x20Error\x20during\x20startup','error','dqqRO','keWwh','OlXpO','1151031vQtzDV','Error\x20reading\x20config','writeFileSync','timesStarted','\x20ports:\x20','object','readOnly','357890gRsAOK','[cluster]\x20url\x20is\x20undefined,\x20please\x20check\x20your\x20config.json','kCoMb','logFile','logs/output.log','144mNdure','2176264NyAorr','config.json','mkdirp','151538giRIkA','PORT','AaLrw','argv','Clustering\x20enabled:\x20Spinning\x20up\x20','open','kHeWc','yfiii','SkytU','start','obyHA','socket.io','YiFuL','utf-8','aggmC','existsSync','false','\x20process(es).\x0a','6QZmIKb','yCttj','qFjNM','set','Uiglu','./package.json','EWuGV','This\x20is\x20free\x20software,\x20and\x20you\x20are\x20welcome\x20to\x20redistribute\x20it\x20under\x20certain\x20conditions.','remove','get','aMyHX','parse','length','9stFQbM','readFileSync','log','MRbtr','code','231282SySEgY','restart','file','NodeBB\x20v','displayStartupMessages','dvYzJ',',\x20signal:\x20','QbYFp','join','iKHfI','send','UFPaR','\x22\x20from\x20pidfile,\x20deleting\x20pidfile','GrhIs','sync','addWorkerEvents','url','crashTimer','pubsub','Invalid\x20pid\x20\x22','pidfile','\x20Copyright\x20(C)\x202013-','fOPer','3177256rnmkCE','isPrimary','hVaTO','XIFfq','logrotate-stream','safe','dirname','info','\x20restarts\x20in\x2010\x20seconds,\x20most\x20likely\x20an\x20error\x20on\x20startup.\x20Halting.','app.js','anArU','pipe','stop','bIvMP','message','init','updateClock();','QGOyl','dxiZg','kill','silent','suicide','[cluster]\x20Restarting...','SIGTERM','\x20NodeBB\x20Inc.','fuUTq','UUWgp','For\x20the\x20full\x20license,\x20please\x20visit:\x20http://www.gnu.org/copyleft/gpl.html','1750155NFlwUx','isCluster','Process\x20\x22','resolve','WhLxJ','index','readFile','MjFjL','FMuWr','[cluster]\x20Child\x20Process\x20(','zGLwf','version','stderr','use','./src/file','path','unlinkSync','[cluster]\x20Spinning\x20up\x20another\x20process...','stores','stdout','KXKVS','uWaUK','JvXEe','cwd','env','pid','forEach','action'];_0x1614=function(){return _0x451f48;};return _0x1614();}nconf[_0x378eb9(0x24c)]()[_0x378eb9(0x22b)]()['file']({'file':pathToConfig});const pidFilePath=path[_0x378eb9(0x1e8)](__dirname,_0x378eb9(0x1f4)),outputLogFilePath=path[_0x378eb9(0x1e8)](__dirname,nconf[_0x378eb9(0x1d7)](_0x378eb9(0x243))||_0x378eb9(0x244)),logDir=path[_0x378eb9(0x1fd)](outputLogFilePath);!fs[_0x378eb9(0x1cb)](logDir)&&mkdirp[_0x378eb9(0x1ee)](path[_0x378eb9(0x1fd)](outputLogFilePath));const output=logrotate({'file':outputLogFilePath,'size':'1m','keep':0x3,'compress':!![]}),silent=nconf[_0x378eb9(0x1d7)](_0x378eb9(0x20b))===_0x378eb9(0x1cc)?![]:nconf[_0x378eb9(0x1d7)]('silent')!==![];let numProcs;function _0x2eca(_0x9b4c24,_0x19b5ab){const _0x1614d4=_0x1614();return _0x2eca=function(_0x2eca8f,_0x5a9e8b){_0x2eca8f=_0x2eca8f-0x1c4;let _0x4e23be=_0x1614d4[_0x2eca8f];return _0x4e23be;},_0x2eca(_0x9b4c24,_0x19b5ab);}const workers=[],Loader={'timesStarted':0x0},appPath=path[_0x378eb9(0x1e8)](__dirname,_0x378eb9(0x200));Loader['init']=function(){const _0x56b18f=_0x378eb9,_0x175f68={'XIFfq':'SIGHUP'};silent&&(console[_0x56b18f(0x1dd)]=(..._0x1d52cd)=>{const _0x154472=_0x56b18f;output['write'](_0x1d52cd[_0x154472(0x1e8)]('\x20')+'\x0a');}),process['on'](_0x175f68[_0x56b18f(0x1fa)],Loader[_0x56b18f(0x1e1)]),process['on'](_0x56b18f(0x20e),Loader[_0x56b18f(0x203)]);},Loader['displayStartupMessages']=function(){const _0x2654ed=_0x378eb9,_0x1fce4d={'KXKVS':'This\x20program\x20comes\x20with\x20ABSOLUTELY\x20NO\x20WARRANTY.','zGLwf':_0x2654ed(0x1d5),'dxiZg':_0x2654ed(0x212)};console[_0x2654ed(0x1dd)](''),console[_0x2654ed(0x1dd)](_0x2654ed(0x1e3)+pkg[_0x2654ed(0x21e)]+_0x2654ed(0x1f5)+new Date()[_0x2654ed(0x231)]()+_0x2654ed(0x20f)),console[_0x2654ed(0x1dd)](_0x1fce4d[_0x2654ed(0x227)]),console[_0x2654ed(0x1dd)](_0x1fce4d[_0x2654ed(0x21d)]),console[_0x2654ed(0x1dd)](_0x1fce4d[_0x2654ed(0x209)]),console[_0x2654ed(0x1dd)]('');},Loader[_0x378eb9(0x1ef)]=function(_0x1c27d3){const _0x5ab1bf=_0x378eb9,_0x3fdc57={'hVaTO':_0x5ab1bf(0x1e2),'QbYFp':function(_0x1dd3c5,_0xd670b3){return _0x1dd3c5!==_0xd670b3;},'WhLxJ':function(_0x1725e2,_0x27cc72){return _0x1725e2<_0x27cc72;},'dqqRO':function(_0x3aa091,_0x3fa551){return _0x3aa091(_0x3fa551);},'MjFjL':function(_0x297b62,_0x304f2b,_0x259e47){return _0x297b62(_0x304f2b,_0x259e47);},'UFPaR':_0x5ab1bf(0x224),'aMyHX':function(_0x4c5cda,_0x2fa3cc){return _0x4c5cda===_0x2fa3cc;},'MLMxY':'restart','kssDv':_0x5ab1bf(0x1f2),'YiFuL':_0x5ab1bf(0x205)};_0x1c27d3['on']('exit',(_0x34e1ed,_0x5bbb28)=>{const _0x412980=_0x5ab1bf,_0x396289={'jYIaq':function(_0x43cad5){return _0x43cad5();},'QGOyl':_0x3fdc57[_0x412980(0x1f9)],'sxnFz':function(_0x253e46,_0xda87a5){return _0x253e46===_0xda87a5;},'anArU':_0x412980(0x1cf)};_0x3fdc57[_0x412980(0x1e7)](_0x34e1ed,0x0)&&(_0x3fdc57[_0x412980(0x217)](Loader[_0x412980(0x23c)],numProcs*0x3)?(Loader[_0x412980(0x23c)]+=0x1,Loader[_0x412980(0x1f1)]&&_0x3fdc57[_0x412980(0x236)](clearTimeout,Loader['crashTimer']),Loader[_0x412980(0x1f1)]=_0x3fdc57[_0x412980(0x21a)](setTimeout,()=>{const _0x42bd42=_0x412980;if(_0x396289['sxnFz'](_0x396289[_0x42bd42(0x201)],_0x396289[_0x42bd42(0x201)]))Loader[_0x42bd42(0x23c)]=0x0;else{const _0x3c8ba3={'HKuKe':_0x42bd42(0x1f0)};_0x396289['jYIaq'](_0x662b5c),_0x3d34ef[_0x42bd42(0x1d6)](_0x396289['QGOyl']),_0x2c3784[_0x42bd42(0x220)](_0x396289[_0x42bd42(0x208)],{'file':_0x575dcf}),_0xa42123['readFile'](_0x5d085c,{'encoding':_0x42bd42(0x1c9)},(_0x4537f1,_0x18582b)=>{const _0xd13f6b=_0x42bd42;if(_0x4537f1){_0x17c438[_0xd13f6b(0x235)](_0xd13f6b(0x23a));throw _0x4537f1;}const _0xecd1cd=_0x10d84e['parse'](_0x18582b);_0x1589bf[_0xd13f6b(0x225)]['env'][_0xd13f6b(0x23f)]=![],_0x250442['set'](_0x3c8ba3[_0xd13f6b(0x233)],_0xecd1cd[_0xd13f6b(0x1f0)]),_0x54fab2[_0xd13f6b(0x225)]['env'][_0xd13f6b(0x23f)]=!![],_0x44a13d[_0xd13f6b(0x22b)][_0xd13f6b(0x1f0)]!==_0xecd1cd[_0xd13f6b(0x1f0)]&&(_0x49ee4d[_0xd13f6b(0x22b)][_0xd13f6b(0x1f0)]=_0xecd1cd[_0xd13f6b(0x1f0)]),_0x4ba786[_0xd13f6b(0x1c5)]();});}},0x2710)):(console[_0x412980(0x1dd)](numProcs*0x3+_0x412980(0x1ff)),process[_0x412980(0x232)]())),console[_0x412980(0x1dd)](_0x412980(0x21c)+_0x1c27d3['pid']+')\x20has\x20exited\x20(code:\x20'+_0x34e1ed+_0x412980(0x1e6)+_0x5bbb28+')'),!(_0x1c27d3[_0x412980(0x20c)]||_0x34e1ed===0x0)&&(console[_0x412980(0x1dd)](_0x3fdc57[_0x412980(0x1eb)]),_0x3fdc57[_0x412980(0x21a)](forkWorker,_0x1c27d3[_0x412980(0x218)],_0x1c27d3[_0x412980(0x1f8)]));}),_0x1c27d3['on'](_0x3fdc57[_0x5ab1bf(0x1c8)],_0x1ed10a=>{const _0x2915e7=_0x5ab1bf;if(_0x1ed10a&&_0x3fdc57[_0x2915e7(0x1d8)](typeof _0x1ed10a,_0x2915e7(0x23e))&&_0x1ed10a[_0x2915e7(0x22e)])switch(_0x1ed10a['action']){case _0x3fdc57['MLMxY']:console[_0x2915e7(0x1dd)](_0x2915e7(0x20d)),Loader[_0x2915e7(0x1e1)]();break;case _0x3fdc57['kssDv']:workers[_0x2915e7(0x22d)](_0x2cbbc1=>{const _0x38e664=_0x2915e7;_0x2cbbc1[_0x38e664(0x1ea)](_0x1ed10a);});break;case _0x2915e7(0x1c7):workers['forEach'](_0x1a623c=>{const _0x57c28f=_0x2915e7;_0x1a623c!==_0x1c27d3&&_0x1a623c[_0x57c28f(0x1ea)](_0x1ed10a);});break;}});},Loader[_0x378eb9(0x1c5)]=function(){const _0x68c4ac=_0x378eb9,_0x15c3d5={'HRoKZ':function(_0x75d3d0,_0x443c58){return _0x75d3d0<_0x443c58;},'bIvMP':function(_0x5360a2,_0x4261d8,_0x1f2dff){return _0x5360a2(_0x4261d8,_0x1f2dff);}};numProcs=getPorts()[_0x68c4ac(0x1da)],console[_0x68c4ac(0x1dd)](_0x68c4ac(0x24d)+numProcs+_0x68c4ac(0x1cd));for(let _0x54de01=0x0;_0x15c3d5['HRoKZ'](_0x54de01,numProcs);_0x54de01+=0x1){_0x15c3d5[_0x68c4ac(0x204)](forkWorker,_0x54de01,_0x54de01===0x0);}};function forkWorker(_0x556ae1,_0xa3fa62){const _0x20c82e=_0x378eb9,_0x3654a2={'fOPer':_0x20c82e(0x214),'gWBaU':function(_0x5643b4,_0x218f29){return _0x5643b4>_0x218f29;},'BsVoH':function(_0x2cdba6,_0xc4878f,_0x3e9cb9,_0x2b8677){return _0x2cdba6(_0xc4878f,_0x3e9cb9,_0x2b8677);},'FMuWr':function(_0x1ce48a,_0x4d4be0){return _0x1ce48a(_0x4d4be0);}},_0x1cf33d=getPorts(),_0x4b407e=[];if(!_0x1cf33d[_0x556ae1])return setTimeout(function(){const _0x1d83ba=_0x20c82e;console[_0x1d83ba(0x1dd)](_0x1d83ba(0x1fc));},0x64),console[_0x20c82e(0x1dd)]('[cluster]\x20invalid\x20port\x20for\x20worker\x20:\x20'+_0x556ae1+_0x20c82e(0x23d)+_0x1cf33d[_0x20c82e(0x1da)]);process[_0x20c82e(0x22b)][_0x20c82e(0x1f8)]=_0xa3fa62,process[_0x20c82e(0x22b)][_0x20c82e(0x214)]=nconf[_0x20c82e(0x1d7)](_0x3654a2[_0x20c82e(0x1f6)])||_0x3654a2['gWBaU'](_0x1cf33d[_0x20c82e(0x1da)],0x1),process[_0x20c82e(0x22b)][_0x20c82e(0x230)]=_0x1cf33d[_0x556ae1];const _0xcfb664=_0x3654a2['BsVoH'](fork,appPath,_0x4b407e,{'silent':silent,'env':process[_0x20c82e(0x22b)]});_0xcfb664[_0x20c82e(0x218)]=_0x556ae1,_0xcfb664[_0x20c82e(0x1f8)]=_0xa3fa62,workers[_0x556ae1]=_0xcfb664,Loader[_0x20c82e(0x1ef)](_0xcfb664);if(silent){const _0x2ab2e1=_0x3654a2[_0x20c82e(0x21b)](logrotate,{'file':outputLogFilePath,'size':'1m','keep':0x3,'compress':!![]});_0xcfb664[_0x20c82e(0x226)][_0x20c82e(0x202)](_0x2ab2e1),_0xcfb664[_0x20c82e(0x21f)][_0x20c82e(0x202)](_0x2ab2e1);}}function getPorts(){const _0xc64b65=_0x378eb9,_0x1084f0={'aggmC':_0xc64b65(0x241),'EWuGV':_0xc64b65(0x24a)},_0x501d73=nconf[_0xc64b65(0x1d7)]('url');!_0x501d73&&(console[_0xc64b65(0x1dd)](_0x1084f0[_0xc64b65(0x1ca)]),process[_0xc64b65(0x232)]());const _0xd17f8d=url[_0xc64b65(0x1d9)](_0x501d73);let _0x3e4138=nconf[_0xc64b65(0x1d7)](_0x1084f0[_0xc64b65(0x1d4)])||nconf['get'](_0xc64b65(0x230))||_0xd17f8d[_0xc64b65(0x230)]||0x11d7;return!Array['isArray'](_0x3e4138)&&(_0x3e4138=[_0x3e4138]),eval('Math[\'PI\'] * 2;'),_0x3e4138;}Loader[_0x378eb9(0x1e1)]=function(){const _0x20928d=_0x378eb9,_0x43fa61={'uWaUK':function(_0x1233f4,_0x4086bc){return _0x1233f4(_0x4086bc);},'qFjNM':function(_0x18c404,_0x21cb3b){return _0x18c404===_0x21cb3b;},'MRbtr':_0x20928d(0x250),'DuaGZ':_0x20928d(0x1f0),'JvXEe':function(_0x15a5d7,_0x2823a8){return _0x15a5d7!==_0x2823a8;},'kHeWc':_0x20928d(0x1e2)};killWorkers(),nconf['remove'](_0x43fa61[_0x20928d(0x24f)]),nconf['use'](_0x43fa61[_0x20928d(0x24f)],{'file':pathToConfig}),fs[_0x20928d(0x219)](pathToConfig,{'encoding':_0x20928d(0x1c9)},(_0x4c8e35,_0x215d67)=>{const _0x45a049=_0x20928d,_0x5177ab={'kCoMb':function(_0xd0617f,_0x5ab429){const _0x589322=_0x2eca;return _0x43fa61[_0x589322(0x228)](_0xd0617f,_0x5ab429);}};if(_0x43fa61[_0x45a049(0x1d0)](_0x45a049(0x1c6),_0x43fa61[_0x45a049(0x1de)]))_0x55d6ac[_0x45a049(0x23c)]+=0x1,_0xcbdf16[_0x45a049(0x1f1)]&&_0x5177ab[_0x45a049(0x242)](_0x5c2588,_0x44598f[_0x45a049(0x1f1)]),_0x50c51e[_0x45a049(0x1f1)]=_0x373f79(()=>{_0x48db64['timesStarted']=0x0;},0x2710);else{if(_0x4c8e35){console[_0x45a049(0x235)](_0x45a049(0x23a));throw _0x4c8e35;}const _0x2a0d3d=JSON['parse'](_0x215d67);nconf['stores'][_0x45a049(0x22b)][_0x45a049(0x23f)]=![],nconf[_0x45a049(0x1d1)](_0x43fa61['DuaGZ'],_0x2a0d3d[_0x45a049(0x1f0)]),nconf[_0x45a049(0x225)][_0x45a049(0x22b)][_0x45a049(0x23f)]=!![],_0x43fa61[_0x45a049(0x229)](process[_0x45a049(0x22b)][_0x45a049(0x1f0)],_0x2a0d3d[_0x45a049(0x1f0)])&&(process['env'][_0x45a049(0x1f0)]=_0x2a0d3d[_0x45a049(0x1f0)]),Loader['start']();}});},Loader[_0x378eb9(0x203)]=function(){const _0x3d9f1c=_0x378eb9,_0x2cf66e={'OlXpO':function(_0x2b23eb,_0x4d7c83){return _0x2b23eb!==_0x4d7c83;},'Uiglu':_0x3d9f1c(0x22f)};killWorkers(),_0x2cf66e[_0x3d9f1c(0x238)](nconf[_0x3d9f1c(0x1d7)](_0x2cf66e[_0x3d9f1c(0x1d2)]),_0x3d9f1c(0x1cc))&&nconf[_0x3d9f1c(0x1d7)](_0x2cf66e[_0x3d9f1c(0x1d2)])!==![]&&fs[_0x3d9f1c(0x223)](pidFilePath);};function killWorkers(){const _0x27e9a8=_0x378eb9;workers[_0x27e9a8(0x22d)](_0x524e77=>{_0x524e77['suicide']=!![],_0x524e77['kill']();});}fs[_0x378eb9(0x24e)](pathToConfig,'r',_0x248a3c=>{const _0x5f3f6b=_0x378eb9,_0x1725c1={'AaLrw':_0x5f3f6b(0x1d5),'qeiJd':_0x5f3f6b(0x212),'SkytU':function(_0x36d823,_0x2a83b7){return _0x36d823(_0x2a83b7);},'Psqtx':'app','UUWgp':_0x5f3f6b(0x207),'iKHfI':'daemon','fuUTq':function(_0x346d9e,_0xe778dc){return _0x346d9e!==_0xe778dc;},'JNvAo':'utf-8','keWwh':'ESRCH','WDFwF':function(_0x14c0d5,_0x5bc899){return _0x14c0d5===_0x5bc899;},'GrhIs':_0x5f3f6b(0x1e5),'SMKpJ':function(_0x314a83,_0x13d7be){return _0x314a83(_0x13d7be);},'wQMPp':_0x5f3f6b(0x234)};if(_0x248a3c){_0x1725c1[_0x5f3f6b(0x1c4)](fork,_0x1725c1['Psqtx']),setInterval(_0x1725c1[_0x5f3f6b(0x211)],0x3e8);return;}if(nconf[_0x5f3f6b(0x1d7)](_0x1725c1[_0x5f3f6b(0x1e9)])!=='false'&&_0x1725c1[_0x5f3f6b(0x210)](nconf[_0x5f3f6b(0x1d7)](_0x1725c1['iKHfI']),![])){if(file[_0x5f3f6b(0x1cb)](pidFilePath)){let _0x32293f=0x0;try{_0x32293f=fs[_0x5f3f6b(0x1dc)](pidFilePath,{'encoding':_0x1725c1['JNvAo']}),_0x32293f?(process[_0x5f3f6b(0x20a)](_0x32293f,0x0),console[_0x5f3f6b(0x1fe)](_0x5f3f6b(0x215)+_0x32293f+'\x22\x20from\x20pidfile\x20already\x20running,\x20exiting'),process[_0x5f3f6b(0x232)]()):(console['info'](_0x5f3f6b(0x1f3)+_0x32293f+_0x5f3f6b(0x1ec)),fs['unlinkSync'](pidFilePath));}catch(_0x14c963){if(_0x14c963[_0x5f3f6b(0x1df)]===_0x1725c1[_0x5f3f6b(0x237)])_0x1725c1['WDFwF']('dvYzJ',_0x1725c1[_0x5f3f6b(0x1ed)])?(console[_0x5f3f6b(0x1fe)](_0x5f3f6b(0x215)+_0x32293f+'\x22\x20from\x20pidfile\x20not\x20found,\x20deleting\x20pidfile'),fs[_0x5f3f6b(0x223)](pidFilePath)):(_0x598d8d[_0x5f3f6b(0x1dd)](''),_0x2438d7['log'](_0x5f3f6b(0x1e3)+_0x47bd99['version']+_0x5f3f6b(0x1f5)+new _0x42a63d()[_0x5f3f6b(0x231)]()+_0x5f3f6b(0x20f)),_0x13e128[_0x5f3f6b(0x1dd)]('This\x20program\x20comes\x20with\x20ABSOLUTELY\x20NO\x20WARRANTY.'),_0x22f478[_0x5f3f6b(0x1dd)](_0x1725c1[_0x5f3f6b(0x24b)]),_0x5f3035['log'](_0x1725c1['qeiJd']),_0xaef77f[_0x5f3f6b(0x1dd)](''));else{console[_0x5f3f6b(0x235)](_0x14c963['stack']);throw _0x14c963;}}}_0x1725c1['SMKpJ'](require,_0x1725c1['iKHfI'])({'stdout':process[_0x5f3f6b(0x226)],'stderr':process['stderr'],'cwd':process[_0x5f3f6b(0x22a)]()}),fs[_0x5f3f6b(0x23b)](pidFilePath,String(process[_0x5f3f6b(0x22c)]));}try{Loader[_0x5f3f6b(0x206)](),Loader[_0x5f3f6b(0x1e4)](),Loader['start']();}catch(_0x46e9ee){console['error'](_0x1725c1['wQMPp']);throw _0x46e9ee;}});