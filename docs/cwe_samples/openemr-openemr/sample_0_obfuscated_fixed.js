'use strict';const _0x407e9a=_0x4550;function _0x130c(){const _0x328efa=['Average\x20growth\x20rate:\x20','XFoyL','TNaFq','1396524LkTRLt','push','listen','sidNd','NzYvw','undefined','after','heapUsed','address','Final\x20memory\x20slope:\x20','dUImi','ImurE','writeHead','ERR_TLS_CERT_ALTNAME_INVALID','Growth\x20rates:\x20','log','xfWOG','gorSC','test\x20response','MzesY','Certificate\x20Error','sjTiX','588912WcIgpI','paUTv','filter','toFixed','./utils/node-http','message','10ABaXiE','slice','GLWQj','tjwxZ','timeout','5679730SsTIdo','gc\x20is\x20not\x20available.\x20Run\x20with\x20\x27--expose-gc\x27.','CERT_SIGNATURE_FAILURE','KaqMq','length','node:assert','KgIYY','\x20bytes\x20per\x20request','fogQy','mgxQB',':\x20Heap:\x20','QVZki','rSUPz','cause','SGgZE','node:fs','Memory\x20leak\x20detected:\x20','HJfuk','KnMQH','cert.pem','port','cOwSv','YMLSD','wXPWV','node:test','reduce','readFileSync','Final\x20growth\x20from\x20baseline:\x20','all','emsTH','complete','36509mksoLi','zMEwf','YGvMY','AQYXC','no\x20memory\x20leak\x20with\x20TLS\x20certificate\x20errors','yVisQ','Completed\x20','fail','ceil','code','EWjgT','text','min','https://localhost:','Memory\x20still\x20growing\x20rapidly\x20at\x20','8896vcnGli','GsVsQ','4181178RuIPtk','nHBQe','memoryUsage','2yCruDm','ACVNG','Memory\x20leak\x20detected:\x20heap\x20usage\x20is\x20consistently\x20increasing\x20at\x20a\x20significant\x20rate','AxRSU','1960272gEwEdX','Excessive\x20memory\x20growth\x20of\x20','2090iCCGQU','node:path','6039tGFkwl','Udxhi','pwOBn'];_0x130c=function(){return _0x328efa;};return _0x130c();}(function(_0x535b52,_0x3c4f10){const _0x2ca3f1=_0x4550,_0x922989=_0x535b52();while(!![]){try{const _0x3b998e=-parseInt(_0x2ca3f1(0x148))/0x1*(-parseInt(_0x2ca3f1(0x16c))/0x2)+parseInt(_0x2ca3f1(0x14c))/0x3+-parseInt(_0x2ca3f1(0x156))/0x4*(parseInt(_0x2ca3f1(0x172))/0x5)+-parseInt(_0x2ca3f1(0x145))/0x6+-parseInt(_0x2ca3f1(0x177))/0x7+-parseInt(_0x2ca3f1(0x143))/0x8*(-parseInt(_0x2ca3f1(0x150))/0x9)+parseInt(_0x2ca3f1(0x14e))/0xa*(parseInt(_0x2ca3f1(0x134))/0xb);if(_0x3b998e===_0x3c4f10)break;else _0x922989['push'](_0x922989['shift']());}catch(_0x213077){_0x922989['push'](_0x922989['shift']());}}}(_0x130c,0x741fc));const {test}=require(_0x407e9a(0x12d)),assert=require(_0x407e9a(0x17c)),{tspl}=require('@matteo.collina/tspl'),{fetch}=require('..'),https=require('node:https'),fs=require(_0x407e9a(0x186)),path=require(_0x407e9a(0x14f)),{closeServerAsPromise}=require(_0x407e9a(0x170)),hasGC=typeof global['gc']!==_0x407e9a(0x15b);function _0x4550(_0x4ac97a,_0x2efa61){const _0x130c1f=_0x130c();return _0x4550=function(_0x4550f3,_0x54f83c){_0x4550f3=_0x4550f3-0x12d;let _0x1daf88=_0x130c1f[_0x4550f3];return _0x1daf88;},_0x4550(_0x4ac97a,_0x2efa61);}test(_0x407e9a(0x138),{'timeout':0x4e20},async _0x55ad03=>{const _0x191e70=_0x407e9a,_0x4f3e0b={'YMLSD':_0x191e70(0x168),'KnMQH':function(_0x2cf25a,_0x25bcbb,_0x59b68e){return _0x2cf25a(_0x25bcbb,_0x59b68e);},'dUImi':_0x191e70(0x179),'ACVNG':function(_0x36880d,_0x508a48){return _0x36880d===_0x508a48;},'HJfuk':'DEPTH_ZERO_SELF_SIGNED_CERT','ImurE':_0x191e70(0x163),'stIWn':_0x191e70(0x16a),'uuOmL':function(_0x19c15a,_0x3cd6b2){return _0x19c15a<_0x3cd6b2;},'tjwxZ':function(_0x1f6052,_0x652bad){return _0x1f6052-_0x652bad;},'Udxhi':function(_0x4eb5b2,_0x424619){return _0x4eb5b2*_0x424619;},'inFIV':'Memory\x20usage\x20has\x20stabilized','NzYvw':_0x191e70(0x137),'lXLVz':function(_0x3a2d73,_0x20dfca){return _0x3a2d73<_0x20dfca;},'djNkh':function(_0x42d746,_0x1b2ffb){return _0x42d746%_0x1b2ffb;},'zMEwf':function(_0x38e564,_0x3c6b4d){return _0x38e564===_0x3c6b4d;},'Qajfl':function(_0x50f646,_0x3463a6){return _0x50f646!==_0x3463a6;},'xfWOG':function(_0x324eeb,_0xfc00f8){return _0x324eeb===_0xfc00f8;},'QVZki':function(_0x4f4e83,_0x56bc05){return _0x4f4e83/_0x56bc05;},'QhYxs':function(_0x4e627c,_0x46a6fa){return _0x4e627c>=_0x46a6fa;},'Nlaub':_0x191e70(0x144),'KgIYY':function(_0x19c4f6){return _0x19c4f6();},'wXPWV':_0x191e70(0x180),'emsTH':function(_0x23c989,_0x2a6008,_0x3fe8b0){return _0x23c989(_0x2a6008,_0x3fe8b0);},'rvQwc':'mOnUp','paUTv':_0x191e70(0x185),'MzesY':_0x191e70(0x14a),'KaqMq':_0x191e70(0x183),'cOwSv':_0x191e70(0x155),'EWjgT':function(_0x50f2ed,_0x2302e6){return _0x50f2ed<_0x2302e6;},'pwOBn':function(_0x1d782f,_0x2da2ef){return _0x1d782f-_0x2da2ef;},'AxRSU':function(_0x2a279d,_0x1affd0){return _0x2a279d/_0x1affd0;},'YGvMY':function(_0x4dfad6,_0x542df0){return _0x4dfad6*_0x542df0;},'fogQy':function(_0x38d636,_0x1f3728){return _0x38d636-_0x1f3728;},'sjTiX':function(_0x25ece1,_0x32313f){return _0x25ece1*_0x32313f;},'yEAAy':'fixtures','GLWQj':'key.pem','TspZu':function(_0x12e71f,_0x532fa8){return _0x12e71f(_0x532fa8);}};if(!hasGC)throw new Error(_0x191e70(0x178));const {ok:_0x1d6e20}=tspl(_0x55ad03,{'plan':0x1}),_0x167fac={'key':fs['readFileSync'](path['join'](__dirname,_0x4f3e0b['yEAAy'],_0x4f3e0b[_0x191e70(0x174)])),'cert':fs[_0x191e70(0x12f)](path['join'](__dirname,_0x4f3e0b['yEAAy'],_0x191e70(0x18a)))},_0x410aff=https['createServer'](_0x167fac,(_0x163aec,_0x3e6e99)=>{const _0x1bd9a8=_0x191e70;_0x3e6e99[_0x1bd9a8(0x162)](0xc8),_0x3e6e99['end'](_0x4f3e0b[_0x1bd9a8(0x18d)]);});await new Promise(_0x338e19=>_0x410aff[_0x191e70(0x158)](0x0,_0x338e19));const _0x16bd36=_0x191e70(0x141)+_0x410aff[_0x191e70(0x15e)]()[_0x191e70(0x18b)];_0x55ad03[_0x191e70(0x15c)](_0x4f3e0b['TspZu'](closeServerAsPromise,_0x410aff));async function _0x3387f4(_0xbc29d1){const _0x13be7a=_0x191e70;try{const _0x442a0b=await _0x4f3e0b[_0x13be7a(0x189)](fetch,_0x16bd36+'/request-'+_0xbc29d1,{'signal':AbortSignal[_0x13be7a(0x176)](0x7d0)}),_0x4d6ed6=await _0x442a0b[_0x13be7a(0x13f)]();return{'status':_0x442a0b['status'],'text':_0x4d6ed6};}catch(_0x49fe0d){if(_0x49fe0d?.['cause']?.[_0x13be7a(0x13d)]===_0x4f3e0b[_0x13be7a(0x160)]||_0x4f3e0b[_0x13be7a(0x149)](_0x49fe0d?.['cause']?.[_0x13be7a(0x13d)],_0x4f3e0b['HJfuk'])||_0x49fe0d?.[_0x13be7a(0x184)]?.[_0x13be7a(0x13d)]===_0x4f3e0b[_0x13be7a(0x161)])return{'status':0x20c,'text':_0x4f3e0b['stIWn']};return{'status':0x1f4,'text':_0x49fe0d[_0x13be7a(0x171)]};}}let _0x1d31b2=0x0;const _0x3c5af0=0x190,_0x20056c=[];let _0x4ace8a=0x0;async function _0x1bba13(_0x57f073,_0xb2b41e){const _0x3c07d7=_0x191e70;if(_0x4f3e0b[_0x3c07d7(0x15a)]!==_0x3c07d7(0x137)){if(_0x4f3e0b['uuOmL'](_0xcd0238[_0x3c07d7(0x17b)],0x4))return![];const _0x38aed9=(_0x12f3f3[_0x4f3e0b[_0x3c07d7(0x175)](_0x2550c5['length'],0x1)][_0x3c07d7(0x15d)]-_0x5e1281)/_0x1d7a5e;_0x2c0de0[_0x3c07d7(0x165)](_0x3c07d7(0x130)+(_0x38aed9*0x64)['toFixed'](0x2)+'%');const _0x5626f4=_0x3433f8[_0x3c07d7(0x173)](-0x3),_0x3d944e=_0x4f3e0b['tjwxZ'](_0x5626f4[0x2][_0x3c07d7(0x15d)],_0x5626f4[0x0][_0x3c07d7(0x15d)])/(_0x5626f4[0x2][_0x3c07d7(0x133)]-_0x5626f4[0x0][_0x3c07d7(0x133)]);_0x3662e2['log']('Final\x20memory\x20slope:\x20'+_0x3d944e[_0x3c07d7(0x16f)](0x2)+_0x3c07d7(0x17e));if(_0x38aed9>0.25)return _0x3c07d7(0x14d)+_0x4f3e0b[_0x3c07d7(0x151)](_0x38aed9,0x64)[_0x3c07d7(0x16f)](0x2)+'%';if(_0x3d944e>0x7d0)return _0x3c07d7(0x142)+_0x3d944e[_0x3c07d7(0x16f)](0x2)+'\x20bytes\x20per\x20request';return![];}else{const _0x4ddb8b=[],_0x5530f3=Math[_0x3c07d7(0x140)](_0x57f073+_0xb2b41e,_0x3c5af0);for(let _0x4b743a=_0x57f073;_0x4f3e0b['lXLVz'](_0x4b743a,_0x5530f3);_0x4b743a++){_0x4ddb8b['push'](_0x3387f4(_0x4b743a));}await Promise[_0x3c07d7(0x131)](_0x4ddb8b),_0x1d31b2+=_0x4ddb8b[_0x3c07d7(0x17b)];if(_0x4f3e0b['djNkh'](_0x1d31b2,0x32)===0x0||_0x4f3e0b[_0x3c07d7(0x135)](_0x1d31b2,_0x5530f3)){if(_0x4f3e0b['Qajfl'](_0x3c07d7(0x146),_0x3c07d7(0x154))){global['gc'](),await new Promise(_0xb33475=>setTimeout(_0xb33475,0x32)),global['gc']();const _0x5d086d=process[_0x3c07d7(0x147)]();_0x4f3e0b['xfWOG'](_0x20056c['length'],0x0)&&(_0x4ace8a=_0x5d086d[_0x3c07d7(0x15d)]);_0x20056c['push']({'complete':_0x1d31b2,'heapUsed':_0x5d086d['heapUsed']}),console[_0x3c07d7(0x165)](_0x3c07d7(0x13a)+_0x1d31b2+'/'+_0x3c5af0+_0x3c07d7(0x181)+Math['round'](_0x4f3e0b['QVZki'](_0x5d086d['heapUsed']/0x400,0x400))+'MB');if(_0x4f3e0b['QhYxs'](_0x20056c[_0x3c07d7(0x17b)],0x4)){if(_0x4f3e0b['Nlaub']!=='GsVsQ')return _0x3c07d7(0x142)+_0x44210f[_0x3c07d7(0x16f)](0x2)+_0x3c07d7(0x17e);else{const _0x3de10f=_0x4f3e0b[_0x3c07d7(0x17d)](_0x1062a5);if(_0x3de10f)return!![];}}}else _0x12e4c0(!![],_0x4f3e0b['inFIV']);}return![];}}async function _0x3234ea(){const _0x2b3136=_0x191e70,_0x539df1={'SLLcF':function(_0x10bb5c,_0x36b479){const _0x9f96aa=_0x4550;return _0x4f3e0b[_0x9f96aa(0x151)](_0x10bb5c,_0x36b479);},'CSRhs':function(_0x13eaff,_0x93a78d){const _0x51541a=_0x4550;return _0x4f3e0b[_0x51541a(0x166)](_0x13eaff,_0x93a78d);},'sidNd':'CERT_SIGNATURE_FAILURE','BtNiI':_0x4f3e0b[_0x2b3136(0x188)],'yVisQ':_0x2b3136(0x163)};if(_0x4f3e0b[_0x2b3136(0x18e)]!==_0x2b3136(0x180))_0x47b583[_0x2b3136(0x13b)](_0x2b3136(0x187)+_0x14314a);else{const _0x2a8b86=0x32;for(let _0xfa548b=0x0;_0xfa548b<_0x3c5af0;_0xfa548b+=_0x2a8b86){const _0x50c150=await _0x4f3e0b[_0x2b3136(0x132)](_0x1bba13,_0xfa548b,_0x2a8b86);if(_0x50c150){if(_0x4f3e0b['rvQwc']===_0x4f3e0b[_0x2b3136(0x16d)])return _0x2b3136(0x14d)+_0x539df1['SLLcF'](_0x3d28e8,0x64)[_0x2b3136(0x16f)](0x2)+'%';else{assert[_0x2b3136(0x13b)](_0x4f3e0b[_0x2b3136(0x169)]);return;}}if(_0x20056c['length']>=0x7||_0x1d31b2>=0x15e){if(_0x2b3136(0x167)!==_0x4f3e0b[_0x2b3136(0x17a)])break;else{if(_0x539df1['CSRhs'](_0x31e8da?.[_0x2b3136(0x184)]?.[_0x2b3136(0x13d)],_0x539df1[_0x2b3136(0x159)])||_0x51f123?.[_0x2b3136(0x184)]?.[_0x2b3136(0x13d)]===_0x539df1['BtNiI']||_0x4f5d83?.[_0x2b3136(0x184)]?.[_0x2b3136(0x13d)]===_0x539df1[_0x2b3136(0x139)])return{'status':0x20c,'text':'Certificate\x20Error'};return{'status':0x1f4,'text':_0x1f42db['message']};}}}const _0x3cc443=_0x59ff92();_0x3cc443?_0x4f3e0b[_0x2b3136(0x18c)]===_0x2b3136(0x155)?assert['fail'](_0x2b3136(0x187)+_0x3cc443):_0x36329b[_0x2b3136(0x157)](_0x16a1cd(_0x4d55e2)):_0x1d6e20(!![],_0x4f3e0b['inFIV']);}}function _0x1062a5(){const _0x43f65d=_0x191e70,_0x1920dd=[];for(let _0x56165a=0x1;_0x4f3e0b[_0x43f65d(0x13e)](_0x56165a,_0x20056c[_0x43f65d(0x17b)]);_0x56165a++){const _0x390366=_0x20056c[_0x4f3e0b[_0x43f65d(0x152)](_0x56165a,0x1)][_0x43f65d(0x15d)],_0x5b012d=_0x20056c[_0x56165a][_0x43f65d(0x15d)];_0x1920dd['push']((_0x5b012d-_0x390366)/_0x390366);}const _0x2550d7=_0x4f3e0b[_0x43f65d(0x14b)](_0x20056c[_0x20056c[_0x43f65d(0x17b)]-0x1][_0x43f65d(0x15d)]-_0x4ace8a,_0x4ace8a),_0x189415=_0x1920dd[_0x43f65d(0x12e)]((_0x303bab,_0xc3fb35)=>_0x303bab+_0xc3fb35,0x0)/_0x1920dd['length'];console[_0x43f65d(0x165)]('Growth\x20from\x20baseline:\x20'+(_0x2550d7*0x64)[_0x43f65d(0x16f)](0x2)+'%'),console[_0x43f65d(0x165)](_0x43f65d(0x153)+(_0x189415*0x64)[_0x43f65d(0x16f)](0x2)+'%'),console[_0x43f65d(0x165)](_0x43f65d(0x164)+_0x1920dd['map'](_0x447dc5=>(_0x447dc5*0x64)['toFixed'](0x2)+'%')['join'](',\x20'));const _0x453739=_0x1920dd[_0x43f65d(0x16e)](_0x2bf580=>_0x2bf580>0.01)[_0x43f65d(0x17b)];return _0x453739>=Math[_0x43f65d(0x13c)](_0x4f3e0b[_0x43f65d(0x136)](_0x1920dd[_0x43f65d(0x17b)],0.75))&&_0x189415>0.02&&_0x2550d7>0.2;}function _0x59ff92(){const _0x2e19c8=_0x191e70;if(_0x20056c[_0x2e19c8(0x17b)]<0x4)return![];const _0x853be=_0x4f3e0b[_0x2e19c8(0x182)](_0x20056c[_0x4f3e0b[_0x2e19c8(0x17f)](_0x20056c[_0x2e19c8(0x17b)],0x1)]['heapUsed']-_0x4ace8a,_0x4ace8a);console[_0x2e19c8(0x165)]('Final\x20growth\x20from\x20baseline:\x20'+_0x4f3e0b[_0x2e19c8(0x16b)](_0x853be,0x64)['toFixed'](0x2)+'%');const _0x4868d7=_0x20056c[_0x2e19c8(0x173)](-0x3),_0x408823=_0x4f3e0b[_0x2e19c8(0x182)](_0x4f3e0b[_0x2e19c8(0x17f)](_0x4868d7[0x2][_0x2e19c8(0x15d)],_0x4868d7[0x0][_0x2e19c8(0x15d)]),_0x4868d7[0x2][_0x2e19c8(0x133)]-_0x4868d7[0x0][_0x2e19c8(0x133)]);console[_0x2e19c8(0x165)](_0x2e19c8(0x15f)+_0x408823[_0x2e19c8(0x16f)](0x2)+_0x2e19c8(0x17e));if(_0x853be>0.25)return _0x2e19c8(0x14d)+(_0x853be*0x64)[_0x2e19c8(0x16f)](0x2)+'%';if(_0x408823>0x7d0)return'Memory\x20still\x20growing\x20rapidly\x20at\x20'+_0x408823[_0x2e19c8(0x16f)](0x2)+_0x2e19c8(0x17e);return![];}await _0x3234ea();});