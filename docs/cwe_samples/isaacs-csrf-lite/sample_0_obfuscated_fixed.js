'use strict';const _0x54ccf9=_0x4fd5;(function(_0x395803,_0x1ca762){const _0x419bc5=_0x4fd5,_0x5e0257=_0x395803();while(!![]){try{const _0x3c0e63=parseInt(_0x419bc5(0x1e7))/0x1+parseInt(_0x419bc5(0x1d1))/0x2*(parseInt(_0x419bc5(0x222))/0x3)+-parseInt(_0x419bc5(0x1d5))/0x4+parseInt(_0x419bc5(0x1fe))/0x5*(parseInt(_0x419bc5(0x22c))/0x6)+-parseInt(_0x419bc5(0x207))/0x7*(-parseInt(_0x419bc5(0x203))/0x8)+-parseInt(_0x419bc5(0x1d7))/0x9+-parseInt(_0x419bc5(0x1dd))/0xa*(parseInt(_0x419bc5(0x200))/0xb);if(_0x3c0e63===_0x1ca762)break;else _0x5e0257['push'](_0x5e0257['shift']());}catch(_0x533166){_0x5e0257['push'](_0x5e0257['shift']());}}}(_0x4a07,0x9e59f));function _0x4fd5(_0x19bf06,_0x2c4f27){const _0x4a073f=_0x4a07();return _0x4fd5=function(_0x4fd562,_0x128f4e){_0x4fd562=_0x4fd562-0x1cf;let _0x482397=_0x4a073f[_0x4fd562];return _0x482397;},_0x4fd5(_0x19bf06,_0x2c4f27);}function _0x4a07(){const _0x1b2f3c=['error','TEXT','profile','wkZoY','UUID','?width=96','parse','scrypt-kdf','bkGTR','/profile_image','?size=bigger','Cpqoa','associate','photos','kdf','wyHFz','mattermost','setDataValue','value','VdoSz','KlYao','JJCGf','hasMany','$196','mMyBO','github','90087WzjjRM','provider','QEqUz','hex','mWiXF','exports','prototype','from','zbxAq','google','1758sxoYqJ','byImP','username','getProfile','?size=original','32JOfecM','dYEex','displayName','swPRX','408108FBcLmL','STRING','7649469LIIACa','emails','../logger','nbGqh','getDataValue','verify','1262850wdNybo','parsePhotoByProfile','parseProfileByEmail','gitlab','vrVoE','nMWSY','?s=96','sBEGU','fwbst','resolve','97411TCMLYJ','DTLHp','toString','parseProfile','email','/picture','?width=400','dropbox','then','YBAqT','replace','XkuEo','BIvbs','tAbKF','ownerId','Note','?s=400','saml','substring','haPqs','../letter-avatars','avatarUrl','https://twitter.com/','16540svLLSY','$1400','55wQvJJg','password','wGwEE','8pWsRnb','UUIDV4','User','verifyPassword','4794167DJmxiH'];_0x4a07=function(){return _0x1b2f3c;};return _0x4a07();}const Sequelize=require('sequelize'),scrypt=require(_0x54ccf9(0x20f)),filterXSS=require('xss'),logger=require(_0x54ccf9(0x1d9)),{generateAvatarURL}=require(_0x54ccf9(0x1fb));module[_0x54ccf9(0x227)]=function(_0x3b891a,_0x4ef367){const _0x2af760=_0x54ccf9,_0x62c7d={'wkZoY':_0x2af760(0x21b),'XkuEo':'lastchangeuserId','sBEGU':'uYGGC','nMWSY':_0x2af760(0x1d4),'tAbKF':'facebook','YBAqT':function(_0x3cf782,_0x3cc1c1){return _0x3cf782+_0x3cc1c1;},'bPwDZ':_0x2af760(0x1ed),'byImP':_0x2af760(0x20d),'haPqs':function(_0x34ef91,_0x3fdc0e){return _0x34ef91+_0x3fdc0e;},'mMyBO':_0x2af760(0x1fd),'dYEex':_0x2af760(0x1d0),'PQtop':function(_0x2368b3,_0x2b7d86){return _0x2368b3+_0x2b7d86;},'wGwEE':'https://avatars.githubusercontent.com/u/','cNfOK':_0x2af760(0x1e0),'vrVoE':_0x2af760(0x1f3),'JJCGf':_0x2af760(0x21f),'nbGqh':_0x2af760(0x218),'zbxAq':'$1400','wyHFz':function(_0x35d910,_0x133a20){return _0x35d910(_0x133a20);},'KlYao':_0x2af760(0x1ee),'pMlEx':_0x2af760(0x22b),'Cpqoa':function(_0x21bdd2,_0x35db75,_0x28f02d,_0x3561a5){return _0x21bdd2(_0x35db75,_0x28f02d,_0x3561a5);},'mWiXF':_0x2af760(0x201),'fwbst':function(_0x52ea2c,_0x52be84){return _0x52ea2c===_0x52be84;},'DTLHp':_0x2af760(0x210),'QEqUz':'hrvqD'},_0x448091=_0x3b891a['define'](_0x2af760(0x205),{'id':{'type':_0x4ef367[_0x2af760(0x20c)],'primaryKey':!![],'defaultValue':Sequelize[_0x2af760(0x204)]},'profileid':{'type':_0x4ef367[_0x2af760(0x1d6)],'unique':!![]},'profile':{'type':_0x4ef367[_0x2af760(0x209)]},'history':{'type':_0x4ef367[_0x2af760(0x209)]},'accessToken':{'type':_0x4ef367[_0x2af760(0x209)]},'refreshToken':{'type':_0x4ef367[_0x2af760(0x209)]},'deleteToken':{'type':_0x4ef367[_0x2af760(0x20c)],'defaultValue':Sequelize[_0x2af760(0x204)]},'email':{'type':Sequelize[_0x2af760(0x209)],'validate':{'isEmail':!![]}},'password':{'type':Sequelize[_0x2af760(0x209)]}});_0x448091[_0x2af760(0x228)][_0x2af760(0x206)]=function(_0x2923fd){const _0x60e76d=_0x2af760;return scrypt[_0x60e76d(0x1dc)](Buffer[_0x60e76d(0x229)](this[_0x60e76d(0x201)],_0x60e76d(0x225)),_0x2923fd);},_0x448091[_0x2af760(0x214)]=function(_0x424105){const _0x566a62=_0x2af760;if('VdoSz'===_0x62c7d[_0x566a62(0x20b)])_0x448091[_0x566a62(0x21e)](_0x424105[_0x566a62(0x1f6)],{'foreignKey':_0x566a62(0x1f5),'constraints':![]}),_0x448091['hasMany'](_0x424105['Note'],{'foreignKey':_0x62c7d[_0x566a62(0x1f2)],'constraints':![]});else{try{_0x17aeb2=_0x46ed64[_0x566a62(0x20e)](_0x4abceb);}catch(_0x512155){_0x56948a['error'](_0x512155),_0x1a682b=null;}return _0x2cad99&&(_0x4acb41={'name':_0x164764(_0x3ac5e7[_0x566a62(0x1d3)]||_0x1ccc89[_0x566a62(0x22e)]),'photo':_0x1da4b6[_0x566a62(0x1de)](_0x3f2faa),'biggerphoto':_0x28ee13['parsePhotoByProfile'](_0x26767d,!![])}),_0x297b34;}},_0x448091[_0x2af760(0x1cf)]=function(_0xe414bb){const _0x4d75c3=_0x2af760;if(_0x62c7d[_0x4d75c3(0x1e4)]===_0x62c7d[_0x4d75c3(0x1e2)])_0x41f206=_0x17ee82[_0x4d75c3(0x20e)](_0x65a17c);else{if(!_0xe414bb)return null;return _0xe414bb[_0x4d75c3(0x20a)]?_0x448091[_0x4d75c3(0x1ea)](_0xe414bb[_0x4d75c3(0x20a)]):_0xe414bb[_0x4d75c3(0x1eb)]?_0x448091[_0x4d75c3(0x1df)](_0xe414bb['email']):null;}},_0x448091[_0x2af760(0x1ea)]=function(_0x3bfd6d){const _0x281dab=_0x2af760;try{_0x3bfd6d=JSON['parse'](_0x3bfd6d);}catch(_0x4240c9){logger[_0x281dab(0x208)](_0x4240c9),_0x3bfd6d=null;}return _0x3bfd6d&&(_0x3bfd6d={'name':filterXSS(_0x3bfd6d['displayName']||_0x3bfd6d[_0x281dab(0x22e)]),'photo':_0x448091[_0x281dab(0x1de)](_0x3bfd6d),'biggerphoto':_0x448091['parsePhotoByProfile'](_0x3bfd6d,!![])}),_0x3bfd6d;},_0x448091[_0x2af760(0x1de)]=function(_0x539c19,_0x32034e){const _0x432e6a=_0x2af760;let _0x225801=null;switch(_0x539c19[_0x432e6a(0x223)]){case _0x62c7d[_0x432e6a(0x1f4)]:_0x225801=_0x62c7d[_0x432e6a(0x1f0)]('https://graph.facebook.com/',_0x539c19['id'])+_0x432e6a(0x1ec);if(_0x32034e)_0x225801+=_0x62c7d['bPwDZ'];else _0x225801+=_0x62c7d[_0x432e6a(0x22d)];break;case'twitter':_0x225801=_0x62c7d[_0x432e6a(0x1fa)](_0x62c7d[_0x432e6a(0x220)]+_0x539c19[_0x432e6a(0x22e)],_0x432e6a(0x211));if(_0x32034e)_0x225801+=_0x62c7d[_0x432e6a(0x1d2)];else _0x225801+=_0x432e6a(0x212);break;case _0x432e6a(0x221):_0x225801=_0x62c7d['PQtop'](_0x62c7d[_0x432e6a(0x202)],_0x539c19['id']);if(_0x32034e)_0x225801+=_0x432e6a(0x1f7);else _0x225801+=_0x432e6a(0x1e3);break;case _0x62c7d['cNfOK']:_0x225801=_0x539c19[_0x432e6a(0x1fc)];if(_0x225801){if(_0x62c7d[_0x432e6a(0x1e1)]===_0x432e6a(0x1f3)){if(_0x32034e)_0x225801=_0x225801['replace'](/(\?s=)\d*$/i,_0x432e6a(0x1ff));else _0x225801=_0x225801[_0x432e6a(0x1f1)](/(\?s=)\d*$/i,_0x62c7d[_0x432e6a(0x21d)]);}else{if(_0x37aede)_0x54cca1=_0x10c8e3[_0x432e6a(0x1f1)](/(\?s=)\d*$/i,_0x432e6a(0x1ff));else _0x17bced=_0x21c100[_0x432e6a(0x1f1)](/(\?s=)\d*$/i,_0x432e6a(0x21f));}}else _0x225801=generateAvatarURL(_0x539c19['username']);break;case _0x62c7d[_0x432e6a(0x1da)]:_0x225801=_0x539c19[_0x432e6a(0x1fc)];if(_0x225801){if(_0x32034e)_0x225801=_0x225801['replace'](/(\?s=)\d*$/i,_0x62c7d[_0x432e6a(0x22a)]);else _0x225801=_0x225801[_0x432e6a(0x1f1)](/(\?s=)\d*$/i,_0x432e6a(0x21f));}else _0x225801=_0x62c7d[_0x432e6a(0x217)](generateAvatarURL,_0x539c19[_0x432e6a(0x22e)]);break;case _0x62c7d[_0x432e6a(0x21c)]:_0x225801=generateAvatarURL('',_0x539c19[_0x432e6a(0x1d8)][0x0]['value'],_0x32034e);break;case _0x62c7d['pMlEx']:_0x225801=_0x539c19[_0x432e6a(0x215)][0x0][_0x432e6a(0x21a)];if(_0x32034e)_0x225801=_0x225801[_0x432e6a(0x1f1)](/(\?sz=)\d*$/i,_0x62c7d[_0x432e6a(0x22a)]);else _0x225801=_0x225801[_0x432e6a(0x1f1)](/(\?sz=)\d*$/i,_0x62c7d[_0x432e6a(0x21d)]);break;case'ldap':_0x225801=_0x62c7d[_0x432e6a(0x213)](generateAvatarURL,_0x539c19[_0x432e6a(0x22e)],_0x539c19[_0x432e6a(0x1d8)][0x0],_0x32034e);break;case _0x432e6a(0x1f8):_0x225801=_0x62c7d[_0x432e6a(0x213)](generateAvatarURL,_0x539c19[_0x432e6a(0x22e)],_0x539c19[_0x432e6a(0x1d8)][0x0],_0x32034e);break;default:_0x225801=generateAvatarURL(_0x539c19[_0x432e6a(0x22e)]);break;}return filterXSS(_0x225801);},_0x448091['parseProfileByEmail']=function(_0x1b88e5){const _0x5f5b0c=_0x2af760;if(_0x62c7d[_0x5f5b0c(0x1e5)](_0x62c7d[_0x5f5b0c(0x1e8)],_0x62c7d[_0x5f5b0c(0x1e8)]))return{'name':_0x1b88e5[_0x5f5b0c(0x1f9)](0x0,_0x1b88e5['lastIndexOf']('@')),'photo':generateAvatarURL('',_0x1b88e5,![]),'biggerphoto':generateAvatarURL('',_0x1b88e5,!![])};else _0x19725f[_0x5f5b0c(0x219)](_0x62c7d[_0x5f5b0c(0x226)],_0x4710c1['toString'](_0x5f5b0c(0x225)));};function _0xc580b3(_0x346c51,_0x54b19a){const _0x510125=_0x2af760;if('hrvqD'!==_0x62c7d[_0x510125(0x224)]){if(_0x19c708)_0x1d6514=_0x2c2072[_0x510125(0x1f1)](/(\?s=)\d*$/i,'$1400');else _0x1c09cf=_0x13a0c3[_0x510125(0x1f1)](/(\?s=)\d*$/i,_0x62c7d[_0x510125(0x21d)]);}else{if(!_0x346c51['changed'](_0x510125(0x201)))return Promise[_0x510125(0x1e6)]();return scrypt[_0x510125(0x216)](_0x346c51[_0x510125(0x1db)](_0x510125(0x201)),{'logN':0xf})[_0x510125(0x1ef)](_0x1fe9ea=>{const _0x5da02d=_0x510125;_0x346c51[_0x5da02d(0x219)](_0x5da02d(0x201),_0x1fe9ea[_0x5da02d(0x1e9)]('hex'));});}}return _0x448091['beforeCreate'](_0xc580b3),_0x448091['beforeUpdate'](_0xc580b3),_0x448091;};