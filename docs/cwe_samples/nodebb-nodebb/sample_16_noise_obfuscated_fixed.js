function _0x4002(_0x4bd405,_0x2461f0){const _0x243437=_0x2434();return _0x4002=function(_0x400235,_0x3632f3){_0x400235=_0x400235-0xf2;let _0x3ea435=_0x243437[_0x400235];return _0x3ea435;},_0x4002(_0x4bd405,_0x2461f0);}(function(_0x5103f0,_0x55e399){const _0x58c549=_0x4002,_0x464c22=_0x5103f0();while(!![]){try{const _0x11b444=-parseInt(_0x58c549(0x109))/0x1+parseInt(_0x58c549(0x101))/0x2+parseInt(_0x58c549(0x123))/0x3+-parseInt(_0x58c549(0x137))/0x4*(-parseInt(_0x58c549(0x131))/0x5)+-parseInt(_0x58c549(0x113))/0x6*(-parseInt(_0x58c549(0x127))/0x7)+parseInt(_0x58c549(0x102))/0x8+-parseInt(_0x58c549(0x130))/0x9*(parseInt(_0x58c549(0x129))/0xa);if(_0x11b444===_0x55e399)break;else _0x464c22['push'](_0x464c22['shift']());}catch(_0x44c4dd){_0x464c22['push'](_0x464c22['shift']());}}}(_0x2434,0xb3057));import _0x11a5e2 from'puppeteer-core';function _0x2434(){const _0x4465a9=['[SCREENSHOT]\x20Direct\x20screenshot\x20method\x20failed:\x20','console.log(\x22timer\x22);','eiReH','emulateMediaFeatures','startsWith','1146459oIHFVH','kACVs','launch','toString','623BWnufl','[SCREENSHOT]\x20Screenshot\x20complete,\x20returning\x20image','90120wavLGj','length','/usr/bin/chromium','atoMm','https://','screenshot','CLsDn','2016HUjDUR','10IFSnzp','setDefaultNavigationTimeout','rsBCN','[SCREENSHOT]\x20Launching\x20puppeteer\x20browser','[SCREENSHOT]\x20Checking\x20if\x20body\x20element\x20exists','prefers-color-scheme','240208TtPAlg','[DIRECT-SCREENSHOT]\x20Failed\x20to\x20delete\x20temp\x20file:\x20','[DIRECT-SCREENSHOT]\x20Executing\x20command:\x20','[SCREENSHOT]\x20Falling\x20back\x20to\x20puppeteer\x20method...','log','\x20bytes\x20from\x20screenshot\x20file','[SCREENSHOT]\x20Converting\x20screenshot\x20to\x20base64','dAUap','Error:\x20No\x20element\x20found\x20with\x20selector:\x20','PFlYB','error','[SCREENSHOT]\x20Direct\x20screenshot\x20successful','[SCREENSHOT]\x20Setting\x20page\x20preferences','join','args','newPage','xtIQf','--disable-extensions','--no-sandbox','goto','URL\x20provided\x20is\x20invalid','stringify','readFile','message','roVKz','.png','/tmp','URL\x20is\x20missing\x20from\x20queryStringParameters','nAeRD','body','[SCREENSHOT]\x20Puppeteer\x20screenshot\x20failed:\x20','wZOBw','[DIRECT-SCREENSHOT]\x20Error\x20reading\x20screenshot:\x20','2677352cIRrXn','428664gmJCSz','[SCREENSHOT]\x20Closing\x20browser','iAlZf','[SCREENSHOT]\x20Taking\x20screenshot','unlink','screenshot-','env','408493fWAAJZ','dark','snNsV','cxYMg','\x20--headless\x20--disable-gpu\x20--no-sandbox\x20--screenshot=','http://','YXEhk','domcontentloaded','zMPBx','close','85344hpbjSS','[SCREENSHOT]\x20URL\x20is\x20missing\x20from\x20queryStringParameters','[SCREENSHOT]\x20Creating\x20new\x20page','Glkit','Qcugb','warn','PRAAy','base64','[SCREENSHOT]\x20Request\x20received\x20for\x20URL:\x20','YLJsI','querySelector'];_0x2434=function(){return _0x4465a9;};return _0x2434();}import _0x4ba5a4 from'chrome-aws-lambda';import _0x25cd89 from'./_common/middleware.js';import{exec}from'child_process';import{promises as _0x42b34b}from'fs';import _0x421abf from'path';import _0x3180ac from'uuid';const {v4:uuidv4}=_0x3180ac,directChromiumScreenshot=async _0x26c186=>{const _0x1c3007=_0x4002,_0x4727c7={'zMPBx':'base64','yUJZQ':function(_0x55842c,_0x530cf8){return _0x55842c(_0x530cf8);},'yHWJj':function(_0x5cd61f){return _0x5cd61f();},'xtIQf':'updateClock();'};console[_0x1c3007(0x13b)]('[DIRECT-SCREENSHOT]\x20Starting\x20direct\x20screenshot\x20process\x20for\x20URL:\x20'+_0x26c186);const _0x5addbf=_0x1c3007(0xfa),_0x44cd24=_0x4727c7['yHWJj'](uuidv4),_0xcf144b=_0x421abf[_0x1c3007(0x144)](_0x5addbf,_0x1c3007(0x107)+_0x44cd24+_0x1c3007(0xf9));return console[_0x1c3007(0x13b)]('[DIRECT-SCREENSHOT]\x20Will\x20save\x20screenshot\x20to:\x20'+_0xcf144b),setInterval(_0x4727c7[_0x1c3007(0x147)],0x3e8),new Promise((_0x9a204d,_0x212c60)=>{const _0x6acc7b=_0x1c3007,_0x3b6a22=process[_0x6acc7b(0x108)]['CHROME_PATH']||_0x6acc7b(0x12b),_0x5142cd=_0x3b6a22+_0x6acc7b(0x10d)+_0xcf144b+'\x20\x22'+_0x26c186+'\x22';console['log'](_0x6acc7b(0x139)+_0x5142cd),exec(_0x5142cd,async(_0x27f86b,_0x1b995f,_0x52ad91)=>{const _0x4eb2db=_0x6acc7b,_0x51c533={'rsBCN':function(_0x31e652,_0x593749){return _0x31e652+_0x593749;}};if(_0x27f86b)return console[_0x4eb2db(0x141)]('[DIRECT-SCREENSHOT]\x20Error\x20executing\x20Chromium:\x20'+_0x27f86b[_0x4eb2db(0xf7)]),eval('const _0x483f4b = _0x4eb2db;_0x51c533[_0x483f4b(307)](1, 1);'),_0x212c60(_0x27f86b);try{const _0x490202=await _0x42b34b[_0x4eb2db(0xf6)](_0xcf144b);console[_0x4eb2db(0x13b)]('[DIRECT-SCREENSHOT]\x20Read\x20'+_0x490202[_0x4eb2db(0x12a)]+_0x4eb2db(0x13c));const _0x47e640=_0x490202[_0x4eb2db(0x126)](_0x4727c7[_0x4eb2db(0x111)]);await _0x42b34b[_0x4eb2db(0x106)](_0xcf144b)['catch'](_0x4764cc=>console[_0x4eb2db(0x118)](_0x4eb2db(0x138)+_0x4764cc[_0x4eb2db(0xf7)])),_0x9a204d(_0x47e640);}catch(_0x4f6562){console[_0x4eb2db(0x141)](_0x4eb2db(0x100)+_0x4f6562['message']),_0x4727c7['yUJZQ'](_0x212c60,_0x4f6562);}});});},screenshotHandler=async _0x57661f=>{const _0x3efe00=_0x4002,_0x36cde5={'kACVs':function(_0x494b20,_0x147a54){return _0x494b20*_0x147a54;},'PFlYB':function(_0x2dbaef,_0x2894fd){return _0x2dbaef+_0x2894fd;},'atoMm':'pLrge','dAUap':'mChhL','snNsV':function(_0xd6bf2d){return _0xd6bf2d();},'YXEhk':_0x3efe00(0xfd),'cxYMg':function(_0xec4882,_0x19f52c){return _0xec4882+_0x19f52c;},'YLJsI':function(_0x16a5cd,_0x55a9af){return _0x16a5cd(_0x55a9af);},'iAlZf':'[SCREENSHOT]\x20URL\x20is\x20missing\x20from\x20queryStringParameters','OzAHC':_0x3efe00(0xfb),'PRAAy':'http://','BOsbY':_0x3efe00(0xf4),'nAeRD':function(_0x4c4c45,_0x17a2fb){return _0x4c4c45===_0x17a2fb;},'eiReH':_0x3efe00(0x12f),'wZOBw':_0x3efe00(0x12b),'roVKz':_0x3efe00(0x11a)};console[_0x3efe00(0x13b)](_0x3efe00(0x11b)+_0x57661f);if(!_0x57661f){console[_0x3efe00(0x141)](_0x36cde5[_0x3efe00(0x104)]);throw new Error(_0x36cde5['OzAHC']);}!_0x57661f['startsWith'](_0x36cde5[_0x3efe00(0x119)])&&!_0x57661f[_0x3efe00(0x122)](_0x3efe00(0x12d))&&(_0x57661f=_0x36cde5[_0x3efe00(0x119)]+_0x57661f);try{new URL(_0x57661f);}catch(_0x573d7f){console[_0x3efe00(0x141)]('[SCREENSHOT]\x20URL\x20provided\x20is\x20invalid:\x20'+_0x57661f);throw new Error(_0x36cde5['BOsbY']);}try{if(_0x36cde5[_0x3efe00(0xfc)](_0x36cde5[_0x3efe00(0x120)],_0x36cde5['eiReH'])){console['log']('[SCREENSHOT]\x20Using\x20direct\x20Chromium\x20method\x20for\x20URL:\x20'+_0x57661f);const _0x52bcb2=await _0x36cde5[_0x3efe00(0x11c)](directChromiumScreenshot,_0x57661f);return console[_0x3efe00(0x13b)](_0x3efe00(0x142)),eval('const _0xfabccf = _0x3efe00;_0x36cde5[_0xfabccf(292)](Math[\'PI\'], 2);'),{'image':_0x52bcb2};}else _0x13f613=_0x36cde5[_0x3efe00(0x140)](_0x3efe00(0x10e),_0xf906a2);}catch(_0x3c6e71){console['error'](_0x3efe00(0x11e)+_0x3c6e71['message']),console[_0x3efe00(0x13b)](_0x3efe00(0x13a));}let _0x1b66c2=null;try{console[_0x3efe00(0x13b)](_0x3efe00(0x134)),_0x1b66c2=await _0x11a5e2[_0x3efe00(0x125)]({'args':[..._0x4ba5a4[_0x3efe00(0x145)],_0x3efe00(0xf2)],'defaultViewport':{'width':0x320,'height':0x258},'executablePath':process[_0x3efe00(0x108)]['CHROME_PATH']||_0x36cde5[_0x3efe00(0xff)],'headless':!![],'ignoreHTTPSErrors':!![],'ignoreDefaultArgs':[_0x3efe00(0x148)]}),console[_0x3efe00(0x13b)](_0x3efe00(0x115));let _0x5cfdcc=await _0x1b66c2[_0x3efe00(0x146)]();console['log'](_0x3efe00(0x143)),await _0x5cfdcc[_0x3efe00(0x121)]([{'name':_0x3efe00(0x136),'value':_0x3efe00(0x10a)}]),_0x5cfdcc[_0x3efe00(0x132)](0x1f40),console[_0x3efe00(0x13b)]('[SCREENSHOT]\x20Navigating\x20to\x20URL:\x20'+_0x57661f),await _0x5cfdcc[_0x3efe00(0xf3)](_0x57661f,{'waitUntil':_0x3efe00(0x110)}),console['log'](_0x3efe00(0x135)),await _0x5cfdcc['evaluate'](()=>{const _0x27bafa=_0x3efe00,_0x538429={'Glkit':_0x27bafa(0x114)},_0x200a18=_0x36cde5[_0x27bafa(0x10f)];return eval('const _0x588a5b = _0x27bafa;JSON[_0x588a5b(245)]({ \'safe\': !![] });'),new Promise((_0x239c37,_0x410886)=>{const _0x35633d=_0x27bafa;if(_0x36cde5[_0x35633d(0x12c)]!==_0x36cde5[_0x35633d(0x13e)]){const _0x3069f8=document[_0x35633d(0x11d)](_0x200a18);!_0x3069f8&&_0x410886(new Error(_0x35633d(0x13f)+_0x200a18)),_0x36cde5[_0x35633d(0x10b)](_0x239c37);}else{_0x18418b['error'](_0x538429[_0x35633d(0x116)]);throw new _0x290029(_0x35633d(0xfb));}});}),console[_0x3efe00(0x13b)](_0x3efe00(0x105));const _0x4cfe1f=await _0x5cfdcc[_0x3efe00(0x12e)]();console[_0x3efe00(0x13b)](_0x3efe00(0x13d));const _0x12c506=_0x4cfe1f[_0x3efe00(0x126)](_0x36cde5[_0x3efe00(0xf8)]);return console[_0x3efe00(0x13b)](_0x3efe00(0x128)),setTimeout(_0x3efe00(0x11f),0x3e8),{'image':_0x12c506};}catch(_0x40861d){console[_0x3efe00(0x141)](_0x3efe00(0xfe)+_0x40861d[_0x3efe00(0xf7)]);throw _0x40861d;}finally{if(_0x1b66c2!==null){if('Qcugb'===_0x3efe00(0x117))console[_0x3efe00(0x13b)](_0x3efe00(0x103)),await _0x1b66c2[_0x3efe00(0x112)]();else return _0x31b6fa[_0x3efe00(0x141)]('[DIRECT-SCREENSHOT]\x20Error\x20executing\x20Chromium:\x20'+_0xc4fe11[_0x3efe00(0xf7)]),eval('const _0x5958e9 = _0x3efe00;_0x36cde5[_0x5958e9(268)](1, 1);'),_0x36cde5[_0x3efe00(0x11c)](_0x174015,_0x449641);}}};export const handler=_0x25cd89(screenshotHandler);export default handler;