'use strict';function _0x1825(){const _0x245286=['epfVt','Deployer','username','basename','write','ahftW','storage','protocol','move','AppService','30472oIvACT','NXxRU','YZVyy','test','base64','ywexE','lVYXp','path','read','Service','dsoWA','Git','24dAygYl','getFolder','sTNAx','master','git\x20pull','IHLXE','3087dfwrgS','exists','pullRepo','plugins','length','git','toString','makeDirectory','439691DWGBZu','FileService','dirname','DeployerBase','def','ODklz','split','NdoJB','803355XhKjHC','parse','replace','join','setFile','VedEK','git\x20clone\x20\x27','298520iYfybf','repo','git\x20config\x20user.name\x20\x22HashBrown\x20CMS\x22','git\x20reset\x20--hard','ByZTN','validate','PotHI','XPzrv','vdyAY','password','branch','removeFolder','exec','1005260WEJbQI','indexOf','removeFile','3688614GVcJfv','https://','alias','getRootPath','SzZvx','pushRepo','179456nlMbwZ','structure','from','list','renameFile','git\x20add\x20-A\x20.','git\x20checkout\x20','%40','Malformed\x20repo\x20URL','remove','Illegal\x20character\x20\x22\x27\x22\x20found\x20in\x20branch\x20name','git\x20commit\x20-m\x20\x22Commit\x20from\x20HashBrown\x20CMS\x22'];_0x1825=function(){return _0x245286;};return _0x1825();}const _0x337d1b=_0x11dc;function _0x11dc(_0x370efa,_0x4a29f3){const _0x1825e6=_0x1825();return _0x11dc=function(_0x11dc37,_0x1b32d8){_0x11dc37=_0x11dc37-0x78;let _0x1751d7=_0x1825e6[_0x11dc37];return _0x1751d7;},_0x11dc(_0x370efa,_0x4a29f3);}(function(_0xc52d38,_0x4854c3){const _0x106d7b=_0x11dc,_0x21dd68=_0xc52d38();while(!![]){try{const _0x3b1370=parseInt(_0x106d7b(0x89))/0x1+parseInt(_0x106d7b(0x7c))/0x2+parseInt(_0x106d7b(0xb4))/0x3*(parseInt(_0x106d7b(0x92))/0x4)+-parseInt(_0x106d7b(0xca))/0x5+parseInt(_0x106d7b(0x8c))/0x6+-parseInt(_0x106d7b(0xc2))/0x7+parseInt(_0x106d7b(0xa8))/0x8*(-parseInt(_0x106d7b(0xba))/0x9);if(_0x3b1370===_0x4854c3)break;else _0x21dd68['push'](_0x21dd68['shift']());}catch(_0x33e0cd){_0x21dd68['push'](_0x21dd68['shift']());}}}(_0x1825,0x920d6));const Url=require('url'),Path=require(_0x337d1b(0xaf));class GitDeployer extends HashBrown['Entity'][_0x337d1b(0x9f)][_0x337d1b(0xc5)]{static get['title'](){const _0x54083f=_0x337d1b,_0x119013={'cXVmG':_0x54083f(0xb3)};return _0x119013['cXVmG'];}static get[_0x337d1b(0x8e)](){const _0x2a2db9=_0x337d1b;return _0x2a2db9(0xbf);}constructor(_0xefeae1){const _0xd9372f=_0x337d1b;super(_0xefeae1),this[_0xd9372f(0x7d)]&&this['repo']['indexOf'](_0xd9372f(0x8d))===0x0&&(this[_0xd9372f(0x7d)]=this[_0xd9372f(0x7d)][_0xd9372f(0xcc)](_0xd9372f(0x8d),''));}[_0x337d1b(0x93)](){const _0x5bda6d=_0x337d1b,_0x2747ee={'ByZTN':'3|1|4|0|2','ywexE':_0x5bda6d(0x7d)},_0xd0bb94=_0x2747ee[_0x5bda6d(0x80)][_0x5bda6d(0xc8)]('|');let _0x317284=0x0;while(!![]){switch(_0xd0bb94[_0x317284++]){case'0':this['def'](String,_0x2747ee[_0x5bda6d(0xad)]);continue;case'1':this[_0x5bda6d(0xc6)](String,_0x5bda6d(0xa0));continue;case'2':this[_0x5bda6d(0xc6)](String,'branch');continue;case'3':super[_0x5bda6d(0x93)]();continue;case'4':this[_0x5bda6d(0xc6)](String,_0x5bda6d(0x85));continue;}break;}}[_0x337d1b(0x81)](){const _0xa76401=_0x337d1b,_0x40ceaf={'ODklz':'Illegal\x20character\x20\x22\x27\x22\x20found\x20in\x20repo\x20URL','vdyAY':function(_0x49e179,_0x4b8715){return _0x49e179>_0x4b8715;},'VedEK':_0xa76401(0x9a)};if(this[_0xa76401(0x7d)][_0xa76401(0x8a)]('\x27')>-0x1)throw new Error(_0x40ceaf[_0xa76401(0xc7)]);if(_0x40ceaf[_0xa76401(0x84)](this[_0xa76401(0x86)]['indexOf']('\x27'),-0x1))throw new Error(_0xa76401(0x9c));let _0x1ff7de=Url[_0xa76401(0xcb)](this[_0xa76401(0x7d)]);if(!_0x1ff7de[_0xa76401(0xa5)]||!_0x1ff7de['host'])throw new Error(_0x40ceaf[_0xa76401(0x7a)]);}async[_0x337d1b(0xbc)](){const _0x207e07=_0x337d1b,_0xac7f1={'PotHI':_0x207e07(0xa4),'epfVt':_0x207e07(0x8d),'NXxRU':function(_0x53bf27,_0x350f67){return _0x53bf27+_0x350f67;},'sTNAx':function(_0x1e8fc0,_0x223fb0){return _0x1e8fc0+_0x223fb0;},'cyhha':function(_0x1221b7,_0x50340f){return _0x1221b7+_0x50340f;},'whYOq':'git\x20config\x20user.email\x20\x22git@hashbrown.cms\x22','YZVyy':function(_0x201bdf,_0x1af5cf){return _0x201bdf+_0x1af5cf;},'lVYXp':_0x207e07(0x98),'SzZvx':_0x207e07(0x7f),'KtXPI':_0x207e07(0xb8)};this[_0x207e07(0x81)]();let _0x12abcf=Path[_0x207e07(0x78)](APP_ROOT,_0xac7f1[_0x207e07(0x82)],_0x207e07(0xbf));await HashBrown[_0x207e07(0xb1)]['FileService'][_0x207e07(0xc1)](_0x12abcf);let _0x5d4bfb=this[_0x207e07(0x8f)](),_0x235f04=await HashBrown['Service'][_0x207e07(0xc3)][_0x207e07(0xbb)](_0x5d4bfb);if(!_0x235f04){let _0x1dbe5b=_0xac7f1[_0x207e07(0x9e)];this[_0x207e07(0xa0)]&&(_0x1dbe5b+=this[_0x207e07(0xa0)],this['password']&&(_0x1dbe5b+=_0xac7f1[_0x207e07(0xa9)](':',this[_0x207e07(0x85)][_0x207e07(0xcc)](/@/g,_0x207e07(0x99)))),_0x1dbe5b+='@'),_0x1dbe5b+=this[_0x207e07(0x7d)],await HashBrown['Service'][_0x207e07(0xa7)][_0x207e07(0x88)](_0xac7f1[_0x207e07(0xb6)](_0xac7f1['cyhha'](_0x207e07(0x7b)+_0x1dbe5b,'\x27\x20\x27'),_0x5d4bfb)+'\x27');}await HashBrown['Service']['AppService'][_0x207e07(0x88)](_0x207e07(0x7e),_0x5d4bfb),await HashBrown['Service'][_0x207e07(0xa7)][_0x207e07(0x88)](_0xac7f1['whYOq'],_0x5d4bfb),await HashBrown['Service'][_0x207e07(0xa7)][_0x207e07(0x88)](_0xac7f1[_0x207e07(0xaa)](_0xac7f1[_0x207e07(0xae)],this[_0x207e07(0x86)]||_0x207e07(0xb7)),_0x5d4bfb),await HashBrown[_0x207e07(0xb1)]['AppService'][_0x207e07(0x88)](_0xac7f1[_0x207e07(0x90)],_0x5d4bfb),await HashBrown['Service']['AppService'][_0x207e07(0x88)](_0xac7f1['KtXPI'],_0x5d4bfb);}async['pushRepo'](){const _0x22920c=_0x337d1b,_0x3eb6ea={'ahftW':_0x22920c(0x97)};this[_0x22920c(0x81)]();let _0x29341f=this[_0x22920c(0x8f)]();await HashBrown[_0x22920c(0xb1)][_0x22920c(0xa7)]['exec'](_0x3eb6ea[_0x22920c(0xa3)],_0x29341f),await HashBrown['Service'][_0x22920c(0xa7)]['exec'](_0x22920c(0x9d),_0x29341f),await HashBrown['Service'][_0x22920c(0xa7)][_0x22920c(0x88)]('git\x20push',_0x29341f);}[_0x337d1b(0x8f)](){const _0x3a9f89=_0x337d1b,_0x1db646={'dsoWA':_0x3a9f89(0xa4),'ydttN':_0x3a9f89(0xbd),'IHLXE':function(_0x4b7de9,_0x3c1b70){return _0x4b7de9+_0x3c1b70;},'NdoJB':_0x3a9f89(0xac)};return Path[_0x3a9f89(0x78)](APP_ROOT,_0x1db646[_0x3a9f89(0xb2)],_0x1db646['ydttN'],_0x3a9f89(0xbf),Buffer[_0x3a9f89(0x94)](_0x1db646[_0x3a9f89(0xb9)](this[_0x3a9f89(0x7d)],this['branch']||_0x3a9f89(0xb7)))[_0x3a9f89(0xc0)](_0x1db646[_0x3a9f89(0xc9)]));}async[_0x337d1b(0xab)](){const _0x24aa60=_0x337d1b;return await this[_0x24aa60(0xbc)](),!![];}async['getFile'](_0x4b1d3d){const _0x26ff9f=_0x337d1b;return await this['pullRepo'](),HashBrown[_0x26ff9f(0xb1)][_0x26ff9f(0xc3)][_0x26ff9f(0xb0)](_0x4b1d3d);}async[_0x337d1b(0xb5)](_0x2f7b08,_0x392092=0x0){const _0x34c637=_0x337d1b,_0x4fca15={'XPzrv':function(_0x2ba111,_0x566f07){return _0x2ba111<_0x566f07;}};for(let _0x1aa49f=0x0;_0x1aa49f<_0x392092;_0x1aa49f++){_0x2f7b08=Path[_0x34c637(0x78)](_0x2f7b08,'*');}await this[_0x34c637(0xbc)]();let _0x76dbd0=await HashBrown['Service'][_0x34c637(0xc3)][_0x34c637(0x95)](_0x2f7b08);for(let _0x15c03a=0x0;_0x4fca15[_0x34c637(0x83)](_0x15c03a,_0x76dbd0[_0x34c637(0xbe)]);_0x15c03a++){let _0x17c353=_0x76dbd0[_0x15c03a],_0x2a3c4c=_0x17c353[_0x34c637(0xcc)](this[_0x34c637(0x8f)](),'');_0x76dbd0[_0x15c03a]={'name':Path[_0x34c637(0xa1)](_0x2a3c4c),'path':_0x17c353};}return _0x76dbd0;}async[_0x337d1b(0x79)](_0x269f82,_0x466af3){const _0x214195=_0x337d1b;await this['pullRepo']();let _0x170752=Path[_0x214195(0xc4)](_0x269f82);await HashBrown[_0x214195(0xb1)]['FileService'][_0x214195(0xc1)](_0x170752),await HashBrown[_0x214195(0xb1)][_0x214195(0xc3)][_0x214195(0xa2)](_0x269f82,Buffer[_0x214195(0x94)](_0x466af3,_0x214195(0xac))),await this[_0x214195(0x91)]();}async[_0x337d1b(0x96)](_0x2ce28b,_0x3323cb){const _0x134589=_0x337d1b;let _0x4625e3=Path[_0x134589(0x78)](Path['dirname'](_0x2ce28b),_0x3323cb);await this[_0x134589(0xbc)](),await HashBrown[_0x134589(0xb1)]['FileService'][_0x134589(0xa6)](_0x2ce28b,_0x4625e3),await this['pushRepo']();}async[_0x337d1b(0x8b)](_0x25ede7){const _0x452819=_0x337d1b;await this[_0x452819(0xbc)](),await HashBrown['Service']['FileService'][_0x452819(0x9b)](Path[_0x452819(0x78)](APP_DOOR,_0x25ede7)),await this['pushRepo']();}async[_0x337d1b(0x87)](_0x2e8540){const _0x4beaf0=_0x337d1b;await this[_0x4beaf0(0xbc)](),await HashBrown[_0x4beaf0(0xb1)][_0x4beaf0(0xc3)][_0x4beaf0(0x9b)](Path[_0x4beaf0(0x78)](APP_DOOR,_0x2e8540)),await this[_0x4beaf0(0x91)]();}}module['exports']=GitDeployer;