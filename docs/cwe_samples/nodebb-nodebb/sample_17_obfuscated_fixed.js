'use strict';const _0x48579a=_0x5e1b;(function(_0x31ece,_0xc68f2a){const _0x310b22=_0x5e1b,_0x1b2c57=_0x31ece();while(!![]){try{const _0x3ef0da=parseInt(_0x310b22(0x153))/0x1*(parseInt(_0x310b22(0x179))/0x2)+-parseInt(_0x310b22(0x18b))/0x3+parseInt(_0x310b22(0x185))/0x4*(-parseInt(_0x310b22(0x17a))/0x5)+parseInt(_0x310b22(0x194))/0x6*(-parseInt(_0x310b22(0x176))/0x7)+parseInt(_0x310b22(0x17d))/0x8*(parseInt(_0x310b22(0x18a))/0x9)+parseInt(_0x310b22(0x197))/0xa+parseInt(_0x310b22(0x17c))/0xb;if(_0x3ef0da===_0xc68f2a)break;else _0x1b2c57['push'](_0x1b2c57['shift']());}catch(_0x86103b){_0x1b2c57['push'](_0x1b2c57['shift']());}}}(_0x148f,0x408c4));function _0x5e1b(_0x4aa477,_0x598d24){const _0x148f59=_0x148f();return _0x5e1b=function(_0x5e1b73,_0x4ca061){_0x5e1b73=_0x5e1b73-0x151;let _0x54ff95=_0x148f59[_0x5e1b73];return _0x54ff95;},_0x5e1b(_0x4aa477,_0x598d24);}function _0x148f(){const _0x33ddb7=['authenticate','ApiController','persist','user','postUser','isAdmin','split','middleware','project','yJWYa','scopes','/api/user/logout','get','IMmdC','SPghV','UserService','theme','loginUser','jqmIF','TcCpt','lWhks','/api/users/:id','56qeEZVA','AscDH','JRcLH','1624lbRvjm','60DvZlbb','password','1994003ONAHvf','421072PIsemF','PuMAm','KLOqv','isCurrent','/api/users/first','/api/user/login','updateUserById','/api/:project/:environment/users','47692eokhwS','redirect','getScopes','createUser','eZwne','9qNRVGG','1039977OHWygt','You\x20do\x20not\x20have\x20sufficient\x20privileges\x20to\x20change\x20this\x20user\x27s\x20information','cookie','status','send','true','/api/user/scopes','getObject','HeISE','66078WClBZa','Service','jcnsI','2948880ItVLWi','removeUser','Controller','body','printError','params','WQafA','nLCHK','Cannot\x20create\x20first\x20admin,\x20users\x20already\x20exist.\x20If\x20you\x20lost\x20your\x20credentials,\x20please\x20assign\x20the\x20the\x20admin\x20from\x20the\x20commandline.','getCurrentUser','post','getUserById','/api/users/new','logout','/api/user','/api/users','length','giwkR','/api/:project/:environment/users/:id','getAllUsers','token','mdSWo','zURoV','tokens','hJPDG','sIjdW','PsIml','2|10|11|0|8|12|6|7|3|9|1|5|4','deleteUser','getUser','username','btGHo','hryZp','386RHtNXF','init','query','gSRHB','cookies','createFirstAdmin','delete','hVOXA','getUsers','login','WWVUx','WghEh','dgATm'];_0x148f=function(){return _0x33ddb7;};return _0x148f();}class UserController extends HashBrown[_0x48579a(0x199)][_0x48579a(0x161)]{static[_0x48579a(0x154)](_0x2647c0){const _0x299f1d=_0x48579a,_0x332f4c={'gSRHB':_0x299f1d(0x1a5),'rhurF':_0x299f1d(0x191),'jcnsI':'/api/user/login','SPghV':_0x299f1d(0x181),'mdSWo':_0x299f1d(0x1a3)};_0x2647c0[_0x299f1d(0x16c)](_0x332f4c[_0x299f1d(0x156)],this[_0x299f1d(0x1a0)]),_0x2647c0['get'](_0x332f4c['rhurF'],this[_0x299f1d(0x187)]),_0x2647c0['post'](_0x332f4c[_0x299f1d(0x196)],this[_0x299f1d(0x15c)]),_0x2647c0['post']('/api/user/logout',this['logout']),_0x2647c0['get'](_0x299f1d(0x175),this[_0x299f1d(0x167)]({'needsAdmin':!![],'setProject':![]}),this['getUser']),_0x2647c0[_0x299f1d(0x16c)]('/api/users',this[_0x299f1d(0x167)]({'needsAdmin':!![],'setProject':![]}),this[_0x299f1d(0x15b)]),_0x2647c0[_0x299f1d(0x1a1)](_0x332f4c[_0x299f1d(0x16e)],this[_0x299f1d(0x158)]),_0x2647c0[_0x299f1d(0x1a1)](_0x332f4c[_0x299f1d(0x1ac)],this[_0x299f1d(0x167)]({'setProject':![],'needsAdmin':!![]}),this['createUser']),_0x2647c0['post'](_0x299f1d(0x175),this[_0x299f1d(0x167)]({'setProject':![]}),this[_0x299f1d(0x164)]),_0x2647c0[_0x299f1d(0x159)]('/api/users/:id',this['middleware']({'setProject':![],'needsAdmin':!![]}),this[_0x299f1d(0x1b3)]),_0x2647c0[_0x299f1d(0x16c)](_0x299f1d(0x184),this[_0x299f1d(0x167)](),this[_0x299f1d(0x15b)]),_0x2647c0[_0x299f1d(0x16c)](_0x299f1d(0x1a9),this['middleware'](),this['getUser']),_0x2647c0['post'](_0x299f1d(0x1a9),this[_0x299f1d(0x167)](),this['postUser']);}static async[_0x48579a(0x15c)](_0xae4a57,_0x5ea3aa){const _0xa92117=_0x48579a,_0x5ccbe2={'giwkR':function(_0xeb3c1a,_0x509a35){return _0xeb3c1a==_0x509a35;},'cLRTd':_0xa92117(0x1ab)};let _0xe68f83=_0xae4a57['body']['username'],_0x42cc92=_0xae4a57[_0xa92117(0x19a)][_0xa92117(0x17b)],_0x2194f6=_0xae4a57[_0xa92117(0x155)]['persist']==_0xa92117(0x190)||_0x5ccbe2[_0xa92117(0x1a8)](_0xae4a57[_0xa92117(0x155)][_0xa92117(0x162)],!![]);try{let _0x4c88ab=await HashBrown['Service']['UserService'][_0xa92117(0x171)](_0xe68f83,_0x42cc92,_0x2194f6);_0x5ea3aa[_0xa92117(0x18e)](0xc8)[_0xa92117(0x18d)](_0x5ccbe2['cLRTd'],_0x4c88ab)[_0xa92117(0x18f)](_0x4c88ab);}catch(_0x269dc5){_0x5ea3aa['status'](0x193)['send'](this['printError'](_0x269dc5));}}static async['logout'](_0x4609fe,_0x5ec928){const _0x4131ae=_0x48579a,_0x171097={'JRcLH':_0x4131ae(0x1ab)};try{await HashBrown[_0x4131ae(0x195)][_0x4131ae(0x16f)]['logoutUser'](_0x4609fe[_0x4131ae(0x157)][_0x4131ae(0x1ab)]),_0x5ec928[_0x4131ae(0x18e)](0xc8)[_0x4131ae(0x18d)](_0x171097[_0x4131ae(0x178)],'')[_0x4131ae(0x186)]('/');}catch(_0x3df1db){_0x5ec928[_0x4131ae(0x18e)](0x193)['send'](this[_0x4131ae(0x19b)](_0x3df1db));}}static async[_0x48579a(0x1a0)](_0x31fef9,_0x57622c){const _0x5d4163=_0x48579a,_0x2bedd4={'spGxJ':function(_0xceebdc,_0x7d4581){return _0xceebdc===_0x7d4581;},'Aiicc':_0x5d4163(0x174),'eZwne':_0x5d4163(0x15e)};try{if(_0x2bedd4['spGxJ'](_0x2bedd4['Aiicc'],_0x2bedd4[_0x5d4163(0x189)]))_0x4f9d5c[_0x1e6c60]=_0x39cbef[_0x2b1278]['getObject'](),_0x43d2f3[_0x35cbe9][_0x5d4163(0x180)]=_0x2832d5[_0x3a7bb1]['id']==_0x462f64['user']['id'],delete _0x45d55d[_0x3ab4ea][_0x5d4163(0x1ae)],delete _0x357eee[_0x568b6a][_0x5d4163(0x17b)];else{let _0x528b52=await UserController[_0x5d4163(0x160)](_0x31fef9['cookies'][_0x5d4163(0x1ab)]);_0x528b52=_0x528b52[_0x5d4163(0x192)](),delete _0x528b52['tokens'],delete _0x528b52[_0x5d4163(0x17b)],_0x57622c[_0x5d4163(0x18e)](0xc8)[_0x5d4163(0x18f)](_0x528b52);}}catch(_0x440c57){_0x57622c[_0x5d4163(0x18e)](0x193)[_0x5d4163(0x18f)](this[_0x5d4163(0x19b)](_0x440c57));}}static async[_0x48579a(0x187)](_0x1d4a96,_0x2cc57d){const _0x17b7e3=_0x48579a,_0x1ad84f={'GvDra':_0x17b7e3(0x1b2),'KLOqv':_0x17b7e3(0x184),'sIjdW':_0x17b7e3(0x1a9),'yJWYa':_0x17b7e3(0x1a3),'hJPDG':_0x17b7e3(0x175),'jqmIF':_0x17b7e3(0x191),'nLCHK':_0x17b7e3(0x182),'hVOXA':function(_0x541de6,_0x163942){return _0x541de6!==_0x163942;},'dgATm':_0x17b7e3(0x173),'AscDH':_0x17b7e3(0x152)};try{if(_0x1ad84f[_0x17b7e3(0x15a)](_0x1ad84f[_0x17b7e3(0x15f)],_0x1ad84f[_0x17b7e3(0x177)])){let _0x55453d=await UserController[_0x17b7e3(0x160)](_0x1d4a96[_0x17b7e3(0x157)]['token']);_0x2cc57d['send'](_0x55453d[_0x17b7e3(0x16a)]);}else{const _0x3905ac=_0x1ad84f['GvDra'][_0x17b7e3(0x166)]('|');let _0x1f858d=0x0;while(!![]){switch(_0x3905ac[_0x1f858d++]){case'0':_0x13b315[_0x17b7e3(0x1a1)](_0x17b7e3(0x16b),this[_0x17b7e3(0x1a4)]);continue;case'1':_0x38f5d2[_0x17b7e3(0x16c)](_0x1ad84f[_0x17b7e3(0x17f)],this['middleware'](),this[_0x17b7e3(0x15b)]);continue;case'2':_0x277309['get'](_0x17b7e3(0x1a5),this['getCurrentUser']);continue;case'3':_0x2d8f64[_0x17b7e3(0x1a1)](_0x17b7e3(0x175),this[_0x17b7e3(0x167)]({'setProject':![]}),this['postUser']);continue;case'4':_0x32217d[_0x17b7e3(0x1a1)](_0x1ad84f[_0x17b7e3(0x1b0)],this[_0x17b7e3(0x167)](),this[_0x17b7e3(0x164)]);continue;case'5':_0xf799c5[_0x17b7e3(0x16c)](_0x17b7e3(0x1a9),this[_0x17b7e3(0x167)](),this[_0x17b7e3(0x1b4)]);continue;case'6':_0x4857c0[_0x17b7e3(0x1a1)](_0x17b7e3(0x181),this[_0x17b7e3(0x158)]);continue;case'7':_0xf69489['post'](_0x1ad84f[_0x17b7e3(0x169)],this[_0x17b7e3(0x167)]({'setProject':![],'needsAdmin':!![]}),this[_0x17b7e3(0x188)]);continue;case'8':_0x3c4653[_0x17b7e3(0x16c)](_0x1ad84f[_0x17b7e3(0x1af)],this[_0x17b7e3(0x167)]({'needsAdmin':!![],'setProject':![]}),this[_0x17b7e3(0x1b4)]);continue;case'9':_0x5e9a19['delete'](_0x17b7e3(0x175),this['middleware']({'setProject':![],'needsAdmin':!![]}),this[_0x17b7e3(0x1b3)]);continue;case'10':_0x44fc2c[_0x17b7e3(0x16c)](_0x1ad84f[_0x17b7e3(0x172)],this['getScopes']);continue;case'11':_0x2e6228[_0x17b7e3(0x1a1)](_0x1ad84f[_0x17b7e3(0x19e)],this[_0x17b7e3(0x15c)]);continue;case'12':_0x5e0638['get'](_0x17b7e3(0x1a6),this['middleware']({'needsAdmin':!![],'setProject':![]}),this[_0x17b7e3(0x15b)]);continue;}break;}}}catch(_0x1a88bf){_0x2cc57d[_0x17b7e3(0x18e)](0x193)[_0x17b7e3(0x18f)](this['printError'](_0x1a88bf));}}static async[_0x48579a(0x15b)](_0x218014,_0x294397){const _0x5730b1=_0x48579a,_0x4982d5={'uoaXd':function(_0x5fd87c,_0x37214e){return _0x5fd87c==_0x37214e;}};let _0x24c6e6=_0x218014[_0x5730b1(0x19c)][_0x5730b1(0x168)];try{let _0x38cc16=await HashBrown['Service'][_0x5730b1(0x16f)][_0x5730b1(0x1aa)](_0x24c6e6);for(let _0xe1ef12 in _0x38cc16){_0x38cc16[_0xe1ef12]=_0x38cc16[_0xe1ef12][_0x5730b1(0x192)](),_0x38cc16[_0xe1ef12][_0x5730b1(0x180)]=_0x4982d5['uoaXd'](_0x38cc16[_0xe1ef12]['id'],_0x218014[_0x5730b1(0x163)]['id']),delete _0x38cc16[_0xe1ef12]['tokens'],delete _0x38cc16[_0xe1ef12][_0x5730b1(0x17b)];}_0x294397[_0x5730b1(0x18e)](0xc8)['send'](_0x38cc16);}catch(_0x6e77ac){_0x294397[_0x5730b1(0x18e)](0x193)[_0x5730b1(0x18f)](this['printError'](_0x6e77ac));}}static async[_0x48579a(0x1b4)](_0x5227e5,_0x4f2571){const _0x4d54ac=_0x48579a;let _0x1db2ff=_0x5227e5[_0x4d54ac(0x19c)]['id'];try{let _0x1244d2=await HashBrown['Service'][_0x4d54ac(0x16f)][_0x4d54ac(0x1a2)](_0x1db2ff);_0x4f2571['status'](0xc8)['send'](_0x1244d2);}catch(_0x40f781){_0x4f2571[_0x4d54ac(0x18e)](0x194)[_0x4d54ac(0x18f)](this[_0x4d54ac(0x19b)](_0x40f781));}}static async[_0x48579a(0x164)](_0x127d60,_0x5294e5){const _0x39d1d0=_0x48579a,_0x259f35={'WWVUx':function(_0x28aa48,_0x38397e){return _0x28aa48!==_0x38397e;},'PsIml':'JOcSn','kGawi':_0x39d1d0(0x18c),'zURoV':function(_0x4b1b52,_0xe177fb){return _0x4b1b52===_0xe177fb;},'WQafA':_0x39d1d0(0x193)};let _0x2c61a9=_0x127d60['params']['id'],_0x2d1031=_0x127d60['body'];try{let _0x229353=await UserController[_0x39d1d0(0x160)](_0x127d60['cookies'][_0x39d1d0(0x1ab)]);if(_0x259f35[_0x39d1d0(0x15d)](_0x229353['id'],_0x2c61a9)&&!_0x229353[_0x39d1d0(0x165)]){if(_0x259f35[_0x39d1d0(0x1b1)]===_0x39d1d0(0x151))_0x2a2e6c[_0x39d1d0(0x18e)](0x1f6)['send'](this[_0x39d1d0(0x19b)](_0x259652));else throw new Error(_0x259f35['kGawi']);}!_0x229353['isAdmin']&&(_0x259f35[_0x39d1d0(0x1ad)](_0x259f35[_0x39d1d0(0x19d)],_0x259f35['WQafA'])?(delete _0x2d1031['scopes'],delete _0x2d1031[_0x39d1d0(0x165)]):_0x2fa686[_0x39d1d0(0x18e)](0x194)[_0x39d1d0(0x18f)](this[_0x39d1d0(0x19b)](_0x1cb269))),_0x229353['id']!==_0x2c61a9&&delete _0x2d1031[_0x39d1d0(0x170)],_0x229353=await HashBrown[_0x39d1d0(0x195)][_0x39d1d0(0x16f)][_0x39d1d0(0x183)](_0x2c61a9,_0x2d1031),_0x5294e5[_0x39d1d0(0x18e)](0xc8)[_0x39d1d0(0x18f)](_0x229353);}catch(_0x2c6090){_0x5294e5[_0x39d1d0(0x18e)](0x190)[_0x39d1d0(0x18f)](this[_0x39d1d0(0x19b)](_0x2c6090));}}static async[_0x48579a(0x1b3)](_0x1bb66d,_0x437c12){const _0x19da78=_0x48579a;let _0x4fa343=_0x1bb66d['params']['id'];try{let _0x46afc7=await HashBrown[_0x19da78(0x195)][_0x19da78(0x16f)][_0x19da78(0x198)](_0x4fa343);_0x437c12[_0x19da78(0x18e)](0xc8)[_0x19da78(0x18f)](_0x46afc7);}catch(_0x3cffaa){_0x437c12['status'](0x1f6)['send'](this[_0x19da78(0x19b)](_0x3cffaa));}}static async[_0x48579a(0x158)](_0x2cd768,_0x1e8f27){const _0x2b68d7=_0x48579a,_0x105313={'IMmdC':_0x2b68d7(0x19f)};let _0x5ecd8a=_0x2cd768['body'][_0x2b68d7(0x1b5)],_0x285649=_0x2cd768[_0x2b68d7(0x19a)][_0x2b68d7(0x17b)];try{let _0x414f21=await HashBrown[_0x2b68d7(0x195)][_0x2b68d7(0x16f)][_0x2b68d7(0x1aa)]();if(_0x414f21&&_0x414f21[_0x2b68d7(0x1a7)]>0x0)throw new Error(_0x105313[_0x2b68d7(0x16d)]);let _0x5857d5=await HashBrown[_0x2b68d7(0x195)][_0x2b68d7(0x16f)][_0x2b68d7(0x188)](_0x5ecd8a,_0x285649,!![]),_0x26dc58=await HashBrown[_0x2b68d7(0x195)]['UserService'][_0x2b68d7(0x171)](_0x5ecd8a,_0x285649);_0x1e8f27[_0x2b68d7(0x18e)](0xc8)[_0x2b68d7(0x18d)]('token',_0x26dc58)['send'](_0x26dc58);}catch(_0x31bc27){_0x2b68d7(0x17e)!==_0x2b68d7(0x17e)?_0xca50fd[_0x2b68d7(0x18e)](0x193)[_0x2b68d7(0x18f)](this[_0x2b68d7(0x19b)](_0x19138f)):_0x1e8f27[_0x2b68d7(0x18e)](0x193)['send'](this[_0x2b68d7(0x19b)](_0x31bc27));}}static async[_0x48579a(0x188)](_0x53de5c,_0x1df5e2){const _0x3a6b4c=_0x48579a;let _0x104078=_0x53de5c[_0x3a6b4c(0x19a)][_0x3a6b4c(0x1b5)],_0x214a29=_0x53de5c['body'][_0x3a6b4c(0x17b)];try{let _0x280b3c=await HashBrown[_0x3a6b4c(0x195)][_0x3a6b4c(0x16f)][_0x3a6b4c(0x188)](_0x104078,_0x214a29,![],_0x53de5c[_0x3a6b4c(0x19a)]);_0x1df5e2[_0x3a6b4c(0x18e)](0xc8)['send'](_0x280b3c);}catch(_0x5b6ca4){_0x1df5e2[_0x3a6b4c(0x18e)](0x190)[_0x3a6b4c(0x18f)](this[_0x3a6b4c(0x19b)](_0x5b6ca4));}}}module['exports']=UserController;