const _0xef5c7c=_0x34fb;(function(_0x34fa43,_0x288d54){const _0x29c4f0=_0x34fb,_0x43412b=_0x34fa43();while(!![]){try{const _0x4b86c7=-parseInt(_0x29c4f0(0x1fa))/0x1*(parseInt(_0x29c4f0(0x1ce))/0x2)+-parseInt(_0x29c4f0(0x1d0))/0x3+-parseInt(_0x29c4f0(0x1f6))/0x4+-parseInt(_0x29c4f0(0x1b5))/0x5+parseInt(_0x29c4f0(0x20f))/0x6+-parseInt(_0x29c4f0(0x1e7))/0x7*(-parseInt(_0x29c4f0(0x1fe))/0x8)+-parseInt(_0x29c4f0(0x1c2))/0x9*(-parseInt(_0x29c4f0(0x1d2))/0xa);if(_0x4b86c7===_0x288d54)break;else _0x43412b['push'](_0x43412b['shift']());}catch(_0x3148e2){_0x43412b['push'](_0x43412b['shift']());}}}(_0x5aaf,0x67730));const {resolve}=require(_0xef5c7c(0x1f5)),semver=require(_0xef5c7c(0x1e2)),libnpmdiff=require(_0xef5c7c(0x1b7)),npa=require('npm-package-arg'),Arborist=require('@npmcli/arborist'),pacote=require(_0xef5c7c(0x223)),pickManifest=require('npm-pick-manifest'),log=require(_0xef5c7c(0x1c1)),readPackage=require(_0xef5c7c(0x1f7)),BaseCommand=require(_0xef5c7c(0x208));function _0x5aaf(){const _0x1bb7b6=['OGONc','config','usageError','IYZsF','422080LxejHD','output','libnpmdiff','OoDtR','file:','package','description','iGDBu','diff-name-only','Can\x27t\x20use\x20more\x20than\x20two\x20--diff\x20arguments.','YfLWu','directory','../utils/log-shim','909EdHdif','loadActual','IUese','tag','get','mqxkA','fetchSpec','packageName','exec','XsLDR','EkGSo','rawSpec','2UCMAfH','dTtxE','360996YzanYT','include-workspace-root','55690riODlZ','qogQi','value','xrPpY','\x20not\x20supported.','[...<paths>]','verbose','retrieveSpecs','setWorkspaces','hiZTj','diff-no-prefix','yALbH','xsLNy','next','workspaces','YWLvf','semver','version','spec','LxaBc','Qdjxs','2093959lTKKuA','awGjP','Needs\x20multiple\x20arguments\x20to\x20compare\x20or\x20run\x20from\x20a\x20project\x20dir.','Pvxmj','npm','OLSwC','flatOptions','OgDgV','RPnfH','dZOiF','validRange','params','filter','failed\x20to\x20load\x20actual\x20install\x20tree','path','779784JvjFyp','read-package-json-fast','aJRHi','LGvIe','157097ZEiSeA','query','pxMAd','UGSBT','8qXiFhu','diff-ignore-all-space','package.json','usage','length','type','CpNah','JkimC','name','BTDYt','../base-command.js','findVersionsByPackageName','inventory','realpath','global','QZYxB','registry','713478XYDUlU','Sfoqv','prefix','convertVersionsToSpecs','Spec\x20type\x20','globalDir','yQMnj','miawh','could\x20not\x20read\x20project\x20dir\x20package.json','top','values','lugMa','workspace','edgesIn','jbdgv','wfzne','aozsL','map','diff-unified','diff','pacote','edgesOut','mmnEE'];_0x5aaf=function(){return _0x1bb7b6;};return _0x5aaf();}class Diff extends BaseCommand{static [_0xef5c7c(0x1bb)]='The\x20registry\x20diff\x20command';static ['name']=_0xef5c7c(0x222);static [_0xef5c7c(0x201)]=[_0xef5c7c(0x1d7)];static [_0xef5c7c(0x1f2)]=[_0xef5c7c(0x222),_0xef5c7c(0x1bd),_0xef5c7c(0x221),_0xef5c7c(0x1ff),_0xef5c7c(0x1dc),'diff-src-prefix','diff-dst-prefix','diff-text',_0xef5c7c(0x20c),'tag',_0xef5c7c(0x21b),_0xef5c7c(0x1e0),_0xef5c7c(0x1d1)];static ['ignoreImplicitWorkspace']=![];async[_0xef5c7c(0x1ca)](_0x455dbc){const _0xfd66c5=_0xef5c7c,_0x506f19={'LxaBc':function(_0x35ed01,_0x343d78){return _0x35ed01>_0x343d78;},'YfLWu':'qwOSc','hosBq':_0xfd66c5(0x1e8),'aozsL':_0xfd66c5(0x1fc),'SewFQ':_0xfd66c5(0x222),'iGeJZ':function(_0x291fe2,_0x57f77f,_0x43dee6){return _0x291fe2(_0x57f77f,_0x43dee6);}},_0x4bdf2a=this['npm'][_0xfd66c5(0x1b2)]['get']('diff')[_0xfd66c5(0x1f3)](_0x19db83=>_0x19db83);if(_0x506f19[_0xfd66c5(0x1e5)](_0x4bdf2a[_0xfd66c5(0x202)],0x2))throw this[_0xfd66c5(0x1b3)](_0xfd66c5(0x1be));if(!this['prefix']){if(_0x506f19['YfLWu']===_0x506f19[_0xfd66c5(0x1bf)])this[_0xfd66c5(0x211)]=this[_0xfd66c5(0x1eb)][_0xfd66c5(0x211)];else return[_0x49f046,_0x171745(_0x169caa)[_0xfd66c5(0x206)]+'@'+_0x5bb31f];}if(this[_0xfd66c5(0x1eb)][_0xfd66c5(0x20c)])this['top']=resolve(this['npm'][_0xfd66c5(0x214)],'..');else{if(_0x506f19['hosBq']===_0x506f19[_0xfd66c5(0x21f)])for(const _0x42a42 of _0x447774['edgesIn']){return _0x42a42[_0xfd66c5(0x1e4)];}else this[_0xfd66c5(0x218)]=this[_0xfd66c5(0x211)];}const [_0xf2f4f1,_0x2cf948]=await this['retrieveSpecs'](_0x4bdf2a);log['info'](_0x506f19['SewFQ'],{'src':_0xf2f4f1,'dst':_0x2cf948});const _0x5a3dc9=await _0x506f19['iGeJZ'](libnpmdiff,[_0xf2f4f1,_0x2cf948],{...this[_0xfd66c5(0x1eb)][_0xfd66c5(0x1ed)],'diffFiles':_0x455dbc,'where':this['top']});return this['npm'][_0xfd66c5(0x1b6)](_0x5a3dc9);}async['execWorkspaces'](_0x4e65b9,_0x293295){const _0x3d2585=_0xef5c7c;await this[_0x3d2585(0x1da)](_0x293295);for(const _0x3b1379 of this['workspacePaths']){this[_0x3d2585(0x218)]=_0x3b1379,this[_0x3d2585(0x211)]=_0x3b1379,await this[_0x3d2585(0x1ca)](_0x4e65b9);}}async[_0xef5c7c(0x1c9)](_0x4d0c24){const _0x487b57=_0xef5c7c,_0x4db056={'mmnEE':function(_0x4c84bd,_0x56b09f,_0x11bb28){return _0x4c84bd(_0x56b09f,_0x11bb28);},'iGDBu':_0x487b57(0x222),'dZOiF':_0x487b57(0x217)};let _0x51fb4b;try{const _0x56f9f6=await readPackage(_0x4db056[_0x487b57(0x1b0)](resolve,this[_0x487b57(0x211)],_0x487b57(0x200)));_0x51fb4b=_0x56f9f6['name'];}catch(_0x2f8058){log[_0x487b57(0x1d8)](_0x4db056[_0x487b57(0x1bc)],_0x4db056[_0x487b57(0x1f0)]);}if(!_0x51fb4b)throw this[_0x487b57(0x1b3)]('Needs\x20multiple\x20arguments\x20to\x20compare\x20or\x20run\x20from\x20a\x20project\x20dir.');return _0x51fb4b;}async[_0xef5c7c(0x1d9)]([_0x978486,_0x40ac3d]){const _0x5612f1=_0xef5c7c,_0x53dd28={'ieShN':function(_0x1d036c,_0x4c8a1e,_0xdd9354){return _0x1d036c(_0x4c8a1e,_0xdd9354);},'YWLvf':'diff','yALbH':_0x5612f1(0x217),'xrPpY':'package.json','XsLDR':function(_0x221e3a,_0x44bf76){return _0x221e3a(_0x44bf76);},'QZYxB':_0x5612f1(0x21e),'zcCnQ':_0x5612f1(0x206),'qogQi':_0x5612f1(0x1f4),'OLSwC':function(_0x46ac09,_0x2b01c4){return _0x46ac09!==_0x2b01c4;},'RPnfH':'zpSPn','eIeEE':_0x5612f1(0x1de),'jbdgv':function(_0x2bf179){return _0x2bf179();},'CpNah':function(_0x3ddfce){return _0x3ddfce();},'bJFdx':function(_0x2aad30,_0x5168e4,_0x221184,_0x409cee){return _0x2aad30(_0x5168e4,_0x221184,_0x409cee);},'aLJjy':function(_0x3949eb,_0x35d91e){return _0x3949eb===_0x35d91e;},'mqxkA':_0x5612f1(0x215)};if(_0x978486&&_0x40ac3d){const _0x43be11=await this[_0x5612f1(0x212)]([_0x978486,_0x40ac3d]);return this[_0x5612f1(0x209)](_0x43be11);}if(!_0x978486){const _0x4243c8=await this['packageName'](this[_0x5612f1(0x211)]);return[_0x4243c8+'@'+this[_0x5612f1(0x1eb)][_0x5612f1(0x1b2)][_0x5612f1(0x1c6)](_0x5612f1(0x1c5)),_0x5612f1(0x1b9)+this[_0x5612f1(0x211)]];}let _0x4b196d,_0x20fcea;try{const _0x166d41=await readPackage(resolve(this[_0x5612f1(0x211)],_0x53dd28[_0x5612f1(0x1d5)]));_0x20fcea=_0x166d41[_0x5612f1(0x206)];}catch(_0x17a282){log[_0x5612f1(0x1d8)](_0x53dd28[_0x5612f1(0x1e1)],_0x53dd28[_0x5612f1(0x1dd)]),_0x4b196d=!![];}const _0x4886ec=this[_0x5612f1(0x1b3)](_0x5612f1(0x1e9));if(semver['validRange'](_0x978486)){if(!_0x20fcea){if(_0x5612f1(0x1f9)!==_0x5612f1(0x1f9))this[_0x5612f1(0x218)]=_0x53dd28['ieShN'](_0x4e8cb8,this['npm'][_0x5612f1(0x214)],'..');else throw _0x4886ec;}return[_0x20fcea+'@'+_0x978486,_0x5612f1(0x1b9)+this['prefix']];}const _0x5d2da7=_0x53dd28[_0x5612f1(0x1cb)](npa,_0x978486);if(_0x5d2da7[_0x5612f1(0x20e)]){let _0x104ff8,_0xa7de76;try{if(_0x5612f1(0x21e)!==_0x53dd28[_0x5612f1(0x20d)])throw this[_0x5612f1(0x1b3)]('Can\x27t\x20use\x20more\x20than\x20two\x20--diff\x20arguments.');else{const _0x12edf0={...this['npm'][_0x5612f1(0x1ed)],'path':this[_0x5612f1(0x218)]},_0x32024a=new Arborist(_0x12edf0);_0x104ff8=await _0x32024a['loadActual'](_0x12edf0),_0xa7de76=_0x104ff8&&_0x104ff8['inventory'][_0x5612f1(0x1fb)](_0x53dd28['zcCnQ'],_0x5d2da7[_0x5612f1(0x206)])[_0x5612f1(0x219)]()['next']()[_0x5612f1(0x1d4)];}}catch(_0x56aecd){log[_0x5612f1(0x1d8)](_0x5612f1(0x222),_0x53dd28[_0x5612f1(0x1d3)]);}if(!_0xa7de76||!_0xa7de76['name']||!_0xa7de76['package']||!_0xa7de76[_0x5612f1(0x1ba)]['version']){if(_0x5612f1(0x1b8)===_0x5612f1(0x1b8)){if(_0x4b196d){if(_0x53dd28[_0x5612f1(0x1ec)](_0x53dd28[_0x5612f1(0x1ef)],_0x53dd28['eIeEE']))throw _0x4886ec;else _0x4cea80['verbose'](_0x5612f1(0x222),_0x5612f1(0x217)),_0x51ea9c=!![];}return[_0x5d2da7['name']+'@'+_0x5d2da7[_0x5612f1(0x1c8)],_0x5612f1(0x1b9)+this[_0x5612f1(0x211)]];}else _0x55de82['verbose'](_0x53dd28[_0x5612f1(0x1e1)],_0x5612f1(0x1f4));}const _0x4cb21f=()=>(_0x104ff8&&_0x104ff8[_0x5612f1(0x224)]['get'](_0x5d2da7[_0x5612f1(0x206)])||{})[_0x5612f1(0x1e4)],_0x202760=()=>{const _0x48f4fb=_0x5612f1;for(const _0x5bdd12 of _0xa7de76[_0x48f4fb(0x21c)]){return _0x5bdd12[_0x48f4fb(0x1e4)];}},_0x49abb7=_0x5612f1(0x1b9)+_0xa7de76[_0x5612f1(0x20b)];let _0x287eba;if(_0x5d2da7[_0x5612f1(0x1cd)])_0x287eba=_0x5d2da7[_0x5612f1(0x1cd)];else{const _0x5a0863=_0x53dd28[_0x5612f1(0x21d)](_0x4cb21f)||_0x53dd28[_0x5612f1(0x204)](_0x202760),_0x4ad4a0=await pacote['packument'](_0x5d2da7,{...this['npm'][_0x5612f1(0x1ed)],'preferOnline':!![]});_0x287eba=_0x53dd28['bJFdx'](pickManifest,_0x4ad4a0,_0x5a0863,{...this[_0x5612f1(0x1eb)][_0x5612f1(0x1ed)]})[_0x5612f1(0x1e3)];}return[_0x5d2da7[_0x5612f1(0x206)]+'@'+_0x49abb7,_0x5d2da7[_0x5612f1(0x206)]+'@'+_0x287eba];}else{if(_0x53dd28['aLJjy'](_0x5d2da7[_0x5612f1(0x203)],_0x5612f1(0x1c0)))return['file:'+_0x5d2da7[_0x5612f1(0x1c8)],_0x5612f1(0x1b9)+this['prefix']];else{if('SruDt'===_0x53dd28[_0x5612f1(0x1c7)])_0x166d42['verbose'](_0x53dd28[_0x5612f1(0x1e1)],_0x53dd28['yALbH']);else throw this[_0x5612f1(0x1b3)](_0x5612f1(0x213)+_0x5d2da7['type']+_0x5612f1(0x1d6));}}}async[_0xef5c7c(0x212)]([_0xa7a50c,_0x343652]){const _0x5544cc=_0xef5c7c,_0x31c29d={'IUese':function(_0x355694,_0x2f18b6){return _0x355694&&_0x2f18b6;},'OGONc':_0x5544cc(0x1cf),'lugMa':function(_0x3dd5d7,_0x5c1d22){return _0x3dd5d7(_0x5c1d22);},'hTEYn':_0x5544cc(0x200),'IYZsF':'diff','JkimC':'Needs\x20to\x20be\x20run\x20from\x20a\x20project\x20dir\x20in\x20order\x20to\x20diff\x20two\x20versions.','hiZTj':_0x5544cc(0x1ea),'aJRHi':function(_0x567b74,_0x2092fd){return _0x567b74!==_0x2092fd;},'UGSBT':_0x5544cc(0x1e6)},_0x1f4047=semver[_0x5544cc(0x1f1)](_0xa7a50c),_0x1922b2=semver[_0x5544cc(0x1f1)](_0x343652);if(_0x31c29d[_0x5544cc(0x1c4)](_0x1f4047,_0x1922b2)){if(_0x31c29d[_0x5544cc(0x1b1)]===_0x31c29d[_0x5544cc(0x1b1)]){let _0x4cffdb;try{const _0x15c7df=await _0x31c29d[_0x5544cc(0x21a)](readPackage,resolve(this[_0x5544cc(0x211)],_0x31c29d['hTEYn']));_0x4cffdb=_0x15c7df[_0x5544cc(0x206)];}catch(_0xea496){if(_0x5544cc(0x1cc)!==_0x5544cc(0x207))log[_0x5544cc(0x1d8)](_0x31c29d[_0x5544cc(0x1b4)],'could\x20not\x20read\x20project\x20dir\x20package.json');else return _0x10be6a;}if(!_0x4cffdb)throw this[_0x5544cc(0x1b3)](_0x31c29d[_0x5544cc(0x205)]);return[_0x4cffdb+'@'+_0xa7a50c,_0x4cffdb+'@'+_0x343652];}else throw this[_0x5544cc(0x1b3)](_0x5544cc(0x1e9));}if(!_0x1f4047&&_0x1922b2){if(_0x31c29d[_0x5544cc(0x1db)]!==_0x5544cc(0x1ea)){if(!_0x48bd89)throw _0x1be95b;return[_0xcec5ec+'@'+_0x2dc2a9,'file:'+this[_0x5544cc(0x211)]];}else return[_0xa7a50c,npa(_0xa7a50c)[_0x5544cc(0x206)]+'@'+_0x343652];}if(_0x1f4047&&!_0x1922b2){if(_0x31c29d[_0x5544cc(0x1f8)](_0x31c29d[_0x5544cc(0x1fd)],_0x5544cc(0x216)))return[npa(_0x343652)['name']+'@'+_0xa7a50c,_0x343652];else this[_0x5544cc(0x218)]=this[_0x5544cc(0x211)];}return[_0xa7a50c,_0x343652];}async[_0xef5c7c(0x209)](_0x1cfbb1){const _0x22787e=_0xef5c7c,_0x4e80bf={'OgDgV':_0x22787e(0x206),'Sfoqv':'failed\x20to\x20load\x20actual\x20install\x20tree'};let _0x4ae675;try{const _0xd51ffe={...this[_0x22787e(0x1eb)][_0x22787e(0x1ed)],'path':this[_0x22787e(0x218)]},_0x495f3e=new Arborist(_0xd51ffe);_0x4ae675=await _0x495f3e[_0x22787e(0x1c3)](_0xd51ffe);}catch(_0x5a3d60){log['verbose']('diff',_0x4e80bf[_0x22787e(0x210)]);}return _0x1cfbb1[_0x22787e(0x220)](_0x3dc614=>{const _0x7d90a7=_0x22787e,_0x2bdc78=npa(_0x3dc614);if(_0x2bdc78[_0x7d90a7(0x1cd)])return _0x3dc614;const _0x22f981=_0x4ae675&&_0x4ae675[_0x7d90a7(0x20a)][_0x7d90a7(0x1fb)](_0x4e80bf[_0x7d90a7(0x1ee)],_0x2bdc78[_0x7d90a7(0x206)])[_0x7d90a7(0x219)]()[_0x7d90a7(0x1df)]()[_0x7d90a7(0x1d4)],_0x28afc1=!_0x22f981||!_0x22f981[_0x7d90a7(0x1ba)]||!_0x22f981['package'][_0x7d90a7(0x1e3)]?_0x2bdc78[_0x7d90a7(0x1c8)]:'file:'+_0x22f981[_0x7d90a7(0x20b)];return _0x2bdc78[_0x7d90a7(0x206)]+'@'+_0x28afc1;});}}function _0x34fb(_0x30325a,_0x25a608){const _0x5aaf66=_0x5aaf();return _0x34fb=function(_0x34fba1,_0x4824eb){_0x34fba1=_0x34fba1-0x1b0;let _0x3da673=_0x5aaf66[_0x34fba1];return _0x3da673;},_0x34fb(_0x30325a,_0x25a608);}module['exports']=Diff;