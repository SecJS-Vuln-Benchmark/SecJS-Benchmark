'use strict';const a0_0x55406b=a0_0x5aca;(function(_0x311817,_0x37207c){const _0x3d4a6e=a0_0x5aca,_0x5a55e5=_0x311817();while(!![]){try{const _0x4426f6=parseInt(_0x3d4a6e(0x1dc))/0x1*(-parseInt(_0x3d4a6e(0x1d7))/0x2)+-parseInt(_0x3d4a6e(0x229))/0x3*(parseInt(_0x3d4a6e(0x188))/0x4)+parseInt(_0x3d4a6e(0x1a8))/0x5*(parseInt(_0x3d4a6e(0x1a5))/0x6)+-parseInt(_0x3d4a6e(0x17a))/0x7*(parseInt(_0x3d4a6e(0x1c7))/0x8)+parseInt(_0x3d4a6e(0x17c))/0x9+parseInt(_0x3d4a6e(0x195))/0xa*(-parseInt(_0x3d4a6e(0x181))/0xb)+-parseInt(_0x3d4a6e(0x1a9))/0xc*(-parseInt(_0x3d4a6e(0x1c6))/0xd);if(_0x4426f6===_0x37207c)break;else _0x5a55e5['push'](_0x5a55e5['shift']());}catch(_0x420af6){_0x5a55e5['push'](_0x5a55e5['shift']());}}}(a0_0x4409,0x1c644));const crypto=require(a0_0x55406b(0x21c)),utils=require('../../utils.js'),g_constants=require(a0_0x55406b(0x217)),trade=require(a0_0x55406b(0x22d)),wallet=require(a0_0x55406b(0x1f3)),orders=require(a0_0x55406b(0x179)),market=require(a0_0x55406b(0x20a)),url=require(a0_0x55406b(0x208)),querystring=require(a0_0x55406b(0x209));let g_Cache={};function sig(_0x5442b1,_0x292a99){const _0x403969=a0_0x55406b;return crypto[_0x403969(0x1d2)](_0x403969(0x21e),_0x292a99)['update'](new Buffer(_0x5442b1,_0x403969(0x1cf)))[_0x403969(0x1d5)]('hex');}function onError(_0x1412ab,_0x5e4656,_0x3f6c01){const _0x2fcfca=a0_0x55406b;utils[_0x2fcfca(0x178)](_0x1412ab,_0x5e4656,{'success':![],'message':_0x3f6c01||'API\x20under\x20construction'});}function onSuccess(_0x5eb32f,_0x51ddb7,_0x1426ba){utils['renderJSON'](_0x5eb32f,_0x51ddb7,{'success':!![],'message':'','result':_0x1426ba});}function a0_0x4409(){const _0x21cc12=['period','name,\x20ticker,\x20info','result','withdraw','balance','GetAccountAddress','both','Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20currency)\x20not\x20found.','icon','substr','Database\x20update\x20error','(coin=\x27','../users/wallet.js','\x27\x20AND\x20amount*price>0\x20AND\x20buysell=\x27buy\x27)','onAccountGetDepositAddress','Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20uuid)\x20not\x20found.','\x22\x20AND\x20key=\x22','share','\x22,\x20withdraw=\x22','onGetMarketHistory','log','Bad\x20Request','hold','Database\x20error','orders','buysell','count(price*1)\x20as\x20count_buy,\x20max(price*1)\x20AS\x20Bid','\x22,\x20write=\x22','ProcessWithdraw','error','unknown\x20database\x20error','market','price','url','querystring','../users/market.js','GetCoinWallet','query','count_sell','parse','RedeemCoupon','toUpperCase','amount','price_pair','max((fromBuyerToSeller*1)/fromSellerToBuyer)\x20AS\x20Height,\x20min((fromBuyerToSeller*1)/fromSellerToBuyer)\x20AS\x20Low,\x20sum(fromSellerToBuyer*1)\x20AS\x20Volume','OpenBuyOrders','onEditAPIkey','GetMarketData','../../constants.js','Bad\x20request','apikey\x20not\x20found','://','sell','crypto','GetLastCoinHistory','sha512','message','*3600*1000)','coin','key','random','coin=\x22','GetCoinFromTicker','write','ResetCache','Bad\x20request.\x20Parameter\x20\x22market\x22\x20not\x20found','981CvDgHm','onGetOrderbook','info','ticker\x20','../users/trade.js','Bad\x20uuid','onDeleteAPIkey','coupon','onGetMarketSummary','High','apikey\x20disabled\x20for\x20read','Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20password)\x20not\x20found.','key=\x22','TRADE_MAIN_COIN_TICKER','count(price*1)\x20as\x20count_sell,\x20min(price*1)\x20AS\x20Ask','fromSellerToBuyer','GetMarketSummary24','dbTables','GetMarkets','Unexpected\x20error','onAccountWithdraw','Bad\x20request.\x20quantity\x20<\x200.00001\x20(is\x20too\x20low)','isNumeric','push','false','renderJSON','../users/orders.js','1054193jvMDqN','onMarketSelllimit','977949SELNIv','quantity','apikey','CloseOrder','../users/trade','6061myhgHs','onMarketCancel','\x22\x20OR\x20name=\x22','GetAllOrders','address','bad\x20api\x20signature','Decrypt','1512blKzgt','get','Max\x20number\x20api\x20keys\x20exceeded','Encrypt','userid','Last','insert','2014-02-13T00:00:00','originalUrl','Bad\x20request.\x20Parameter\x20\x22market\x22\x20is\x20invalid','roundDown','SubmitOrder','uuid=\x22','3710CKheCe','rate','name,\x20ticker,\x20info,\x20icon','onMarketGetOpenOrders','Redeem\x20error','timeCached','Coin\x20ticker\x20not\x20found','headers','onRedeemCoupon','\x22\x20AND\x20time*1\x20>\x20(','and','slice','delete','ticker','privKey','ProcessWithdrawToCoupon','714uvFcbr','apikey\x20disabled\x20for\x20withdraw','active','5895nJyapx','12kCmuQw','apisign','success','onAccountGetOrderHistory','ORDER\x20BY\x20time*1\x20DESC\x20LIMIT\x20200','password','Bad\x20request.\x20Required\x20parameter\x20(coupon)\x20not\x20found.','nonce','GetSessionStatus','onGenerateAPIkey','name','User\x20not\x20logged','onAccountGetBalance','awaiting','now','buy','time','Ask','uuid','body','history','userid=\x22','toISOString','length','onAccountGetOrder','\x20not\x20found','data','GROUP\x20BY\x20coin','Bid','4796662dtCZCf','8ZowceG','Bad\x20request.\x20quantity\x20is\x20not\x20numeric\x20value','toFixed','coins','read=\x22','OpenSellOrders','currency','stringify','utf-8','onCreateCoupon','Coin\x20name\x20error','createHmac','TRADE_MAIN_COIN','read','digest','ticker=\x22','4wxoTJx','Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20market)\x20not\x20found.','ROWID\x20AS\x20id','Volume','host','11509SsWZuk','apikeys','Low','onGetMarketSummary_','selectAll','protocol','period=','\x20queryStr=','ROWID\x20AS\x20id,\x20*','GetUserOrders','split'];a0_0x4409=function(){return _0x21cc12;};return a0_0x4409();}function GetCache(_0x4d5fed){const _0x203161=a0_0x55406b;if(!g_Cache[_0x4d5fed]||!g_Cache[_0x4d5fed][_0x203161(0x1c3)]||!g_Cache[_0x4d5fed][_0x203161(0x1b9)]||!g_Cache[_0x4d5fed][_0x203161(0x19a)])return null;if(Date[_0x203161(0x1b7)]()-g_Cache[_0x4d5fed][_0x203161(0x1b9)]>g_Cache[_0x4d5fed][_0x203161(0x19a)])return delete g_Cache[_0x4d5fed],null;return g_Cache[_0x4d5fed][_0x203161(0x1c3)];}function SetCache(_0x51dbdc,_0x5883dc,_0x13bf33){const _0x4b3e4e=a0_0x55406b;if(g_Cache[_0x51dbdc])delete g_Cache[_0x51dbdc];g_Cache[_0x51dbdc]={'data':_0x13bf33,'timeCached':_0x5883dc,'time':Date[_0x4b3e4e(0x1b7)]()};}exports[a0_0x55406b(0x227)]=function(_0x372491){if(g_Cache[_0x372491])delete g_Cache[_0x372491];},exports['onGetLastMarketData']=function(_0x18c62b,_0x4328c1){const _0x427985=a0_0x55406b;market[_0x427985(0x216)](_0x504f95=>{onSuccess(_0x18c62b,_0x4328c1,_0x504f95);});},exports['onGetExchangeSummary']=function(_0x3598d1,_0x85d1bf){const _0x386b4e=a0_0x55406b;market[_0x386b4e(0x16f)](_0x53e888=>{const _0x1c0af6=_0x386b4e;let _0x1b09a2=0x0,_0x6605a4=0x0;for(let _0x1db173 in _0x53e888){_0x6605a4+=_0x53e888[_0x1db173][_0x1c0af6(0x1da)]*0x1,_0x1b09a2++;}return onSuccess(_0x3598d1,_0x85d1bf,{'TotalMarkets':_0x1b09a2,'v24':_0x6605a4,'data':_0x53e888});});},exports['onGetMarkets']=function(_0xd7f51f,_0x13e6fd){const _0x21cafa=a0_0x55406b;let _0x41f534=GetCache(_0x21cafa(0x171));if(_0x41f534)return onSuccess(_0xd7f51f,_0x13e6fd,_0x41f534);g_constants['dbTables']['coins'][_0x21cafa(0x1e0)](_0x21cafa(0x1e8),'','',(_0x3f7955,_0x978e0e)=>{const _0x4ac699=_0x21cafa;if(_0x3f7955||!_0x978e0e)return onError(_0xd7f51f,_0x13e6fd,_0x3f7955&&_0x3f7955[_0x4ac699(0x21f)]?_0x3f7955[_0x4ac699(0x21f)]:_0x4ac699(0x205));try{let _0x12ad6b=[];for(var _0x311d6b=0x0;_0x311d6b<_0x978e0e[_0x4ac699(0x1c0)];_0x311d6b++){_0x978e0e[_0x311d6b][_0x4ac699(0x22b)]=JSON['parse'](utils[_0x4ac699(0x187)](_0x978e0e[_0x311d6b][_0x4ac699(0x22b)])),_0x12ad6b[_0x4ac699(0x176)]({'MarketCurrency':unescape(_0x978e0e[_0x311d6b]['ticker']),'BaseCurrency':g_constants[_0x4ac699(0x1f8)]['TRADE_MAIN_COIN_TICKER'],'MarketCurrencyLong':unescape(_0x978e0e[_0x311d6b]['name']),'BaseCurrencyLong':g_constants[_0x4ac699(0x1f8)][_0x4ac699(0x1d3)],'MinTradeSize':0x0,'MarketName':g_constants[_0x4ac699(0x1f8)][_0x4ac699(0x16c)]+'-'+unescape(_0x978e0e[_0x311d6b]['ticker']),'IsActive':!![],'Created':_0x4ac699(0x18f),'info':_0x978e0e[_0x311d6b][_0x4ac699(0x22b)]});}onSuccess(_0xd7f51f,_0x13e6fd,_0x12ad6b),SetCache(_0x4ac699(0x171),0x36ee80,_0x12ad6b);}catch(_0x30ca65){onError(_0xd7f51f,_0x13e6fd,_0x30ca65[_0x4ac699(0x21f)]);}});},exports[a0_0x55406b(0x22a)]=function(_0x2e4af1,_0x32f90c){const _0x569dcb=a0_0x55406b,_0x27cbd5=url[_0x569dcb(0x20e)](_0x2e4af1[_0x569dcb(0x208)]);if(!_0x27cbd5||!_0x27cbd5['query'])return onError(_0x2e4af1,_0x32f90c,_0x569dcb(0x218));const _0xf12b56=querystring[_0x569dcb(0x20e)](_0x27cbd5[_0x569dcb(0x20c)]);if(!_0xf12b56['market'])return onError(_0x2e4af1,_0x32f90c,'Bad\x20request.\x20Parameter\x20\x22market\x22\x20not\x20found');const _0x47047f=_0xf12b56[_0x569dcb(0x206)][_0x569dcb(0x1e6)]('-');if(!_0x47047f)return onError(_0x2e4af1,_0x32f90c,_0x569dcb(0x191));const _0x22096a=_0xf12b56['type']||_0x569dcb(0x1ed);trade[_0x569dcb(0x184)](_0x47047f,_0x212c2f=>{const _0x3dae46=_0x569dcb;if(!_0x212c2f||_0x212c2f[_0x3dae46(0x1e9)]==_0x3dae46(0x177)||!_0x212c2f['data']||!_0x212c2f[_0x3dae46(0x1c3)][_0x3dae46(0x1b8)]||!_0x212c2f['data'][_0x3dae46(0x21b)])return onError(_0x2e4af1,_0x32f90c,_0x212c2f[_0x3dae46(0x21f)]?_0x212c2f[_0x3dae46(0x21f)]:_0x3dae46(0x1fe));let _0x57bd5d={'buy':[],'sell':[]};if(_0x22096a==_0x3dae46(0x1ed)||_0x22096a==_0x3dae46(0x1b8))for(var _0x40bbad=0x0;_0x40bbad<_0x212c2f[_0x3dae46(0x1c3)]['buy'][_0x3dae46(0x1c0)];_0x40bbad++){if(_0x212c2f>0xc8)break;if(!_0x212c2f[_0x3dae46(0x1c3)][_0x3dae46(0x1b8)][_0x40bbad][_0x3dae46(0x211)]||!_0x212c2f['data'][_0x3dae46(0x1b8)][_0x40bbad][_0x3dae46(0x207)])continue;_0x57bd5d[_0x3dae46(0x1b8)]['push']({'Quantity':_0x212c2f['data'][_0x3dae46(0x1b8)][_0x40bbad][_0x3dae46(0x211)],'Rate':_0x212c2f[_0x3dae46(0x1c3)][_0x3dae46(0x1b8)][_0x40bbad][_0x3dae46(0x207)]});}if(_0x22096a=='both'||_0x22096a==_0x3dae46(0x21b))for(var _0x40bbad=0x0;_0x40bbad<_0x212c2f[_0x3dae46(0x1c3)]['sell'][_0x3dae46(0x1c0)];_0x40bbad++){if(_0x212c2f>0xc8)break;if(!_0x212c2f[_0x3dae46(0x1c3)][_0x3dae46(0x21b)][_0x40bbad][_0x3dae46(0x211)]||!_0x212c2f[_0x3dae46(0x1c3)]['sell'][_0x40bbad][_0x3dae46(0x207)])continue;_0x57bd5d[_0x3dae46(0x21b)][_0x3dae46(0x176)]({'Quantity':_0x212c2f['data'][_0x3dae46(0x21b)][_0x40bbad][_0x3dae46(0x211)],'Rate':_0x212c2f[_0x3dae46(0x1c3)]['sell'][_0x40bbad][_0x3dae46(0x207)]});}onSuccess(_0x2e4af1,_0x32f90c,_0x57bd5d);});},exports[a0_0x55406b(0x167)]=function(_0x303477,_0x3d63e4){const _0x44e5be=a0_0x55406b,_0x1aa899=url[_0x44e5be(0x20e)](_0x303477[_0x44e5be(0x208)]);if(!_0x1aa899||!_0x1aa899[_0x44e5be(0x20c)])return onError(_0x303477,_0x3d63e4,_0x44e5be(0x218));const _0xf6fda2=querystring[_0x44e5be(0x20e)](_0x1aa899[_0x44e5be(0x20c)]);if(!_0xf6fda2['market'])return onError(_0x303477,_0x3d63e4,_0x44e5be(0x228));const _0x3ed17c=_0xf6fda2['period']&&(_0xf6fda2[_0x44e5be(0x1e7)]==0x18||_0xf6fda2[_0x44e5be(0x1e7)]==0xfa||_0xf6fda2['period']==0x3e8||_0xf6fda2['period']==0x1770)?_0xf6fda2[_0x44e5be(0x1e7)]*0x1:0x18;console[_0x44e5be(0x1fb)](_0x44e5be(0x1e2)+_0x3ed17c+_0x44e5be(0x1e3)+JSON[_0x44e5be(0x1ce)](_0xf6fda2));if(!utils[_0x44e5be(0x175)](_0x3ed17c))return onError(_0x303477,_0x3d63e4,'Bad\x20request.\x20Period\x20is\x20not\x20numeric');const _0x4f3122=_0xf6fda2[_0x44e5be(0x206)][_0x44e5be(0x1e6)]('-');if(!_0x4f3122||!_0x4f3122[_0x44e5be(0x1c0)]||_0x4f3122['length']!=0x2)return onError(_0x303477,_0x3d63e4,_0x44e5be(0x191));const _0x71ae4f=_0xf6fda2[_0x44e5be(0x206)];g_constants[_0x44e5be(0x170)][_0x44e5be(0x1ca)][_0x44e5be(0x1e0)](_0x44e5be(0x197),_0x44e5be(0x1d6)+_0x4f3122[0x1]+'\x22','',(_0x39e65b,_0x54a3a5)=>{const _0x188b8a=_0x44e5be;if(_0x39e65b||!_0x54a3a5)return onError(_0x303477,_0x3d63e4,_0x39e65b&&_0x39e65b['message']?_0x39e65b[_0x188b8a(0x21f)]:_0x188b8a(0x205));if(!_0x54a3a5[_0x188b8a(0x1c0)])return onError(_0x303477,_0x3d63e4,_0x188b8a(0x22c)+_0x4f3122[0x1]+_0x188b8a(0x1c2));const _0x172a7c=_0x54a3a5[0x0],_0x3c6106=_0x54a3a5[0x0][_0x188b8a(0x1ef)],_0xae43ca=JSON['parse'](utils['Decrypt'](_0x54a3a5[0x0]['info'])),_0x44dc6e='coin=\x22'+_0x172a7c[_0x188b8a(0x1b3)]+_0x188b8a(0x19e)+Date[_0x188b8a(0x1b7)]()+'*1\x20-\x20'+_0x3ed17c+_0x188b8a(0x220),_0x322360=_0x188b8a(0x1df)+_0x44dc6e;let _0xedef76=GetCache(_0x322360);if(_0xedef76){onSuccess(_0x303477,_0x3d63e4,_0xedef76);return;}g_constants['dbTables'][_0x188b8a(0x1bd)][_0x188b8a(0x1e0)](_0x188b8a(0x213),_0x44dc6e,_0x188b8a(0x1c4),(_0x406a34,_0x49772a)=>{const _0x37e383=_0x188b8a;if(_0x406a34||!_0x49772a){onError(_0x303477,_0x3d63e4,_0x406a34&&_0x406a34[_0x37e383(0x21f)]?_0x406a34[_0x37e383(0x21f)]:_0x37e383(0x205));return;}let _0x4b7627={'MarketName':_0x71ae4f,'High':0x0,'Low':0x0,'Volume':0x0,'Last':0x0,'Bid':0x0,'Ask':0x0,'OpenBuyOrders':0x0,'OpenSellOrders':0x0,'coin_icon_src':_0x3c6106,'coin_info':_0xae43ca};_0x49772a[_0x37e383(0x1c0)]&&(_0x4b7627[_0x37e383(0x168)]=(_0x49772a[0x0]['Height']*0x1)[_0x37e383(0x1c9)](0x8),_0x4b7627[_0x37e383(0x1de)]=(_0x49772a[0x0][_0x37e383(0x1de)]*0x1)['toFixed'](0x8),_0x4b7627[_0x37e383(0x1da)]=(_0x49772a[0x0][_0x37e383(0x1da)]*0x1)[_0x37e383(0x1c9)](0x8)),g_constants[_0x37e383(0x170)][_0x37e383(0x1ff)][_0x37e383(0x1e0)](_0x37e383(0x201),'(coin=\x27'+_0x172a7c[_0x37e383(0x1b3)]+_0x37e383(0x1f4),'',(_0x44cba3,_0x6ab72f)=>{const _0x526e81=_0x37e383;_0x6ab72f[_0x526e81(0x1c0)]&&(_0x4b7627[_0x526e81(0x1c5)]=(_0x6ab72f[0x0][_0x526e81(0x1c5)]*0x1)[_0x526e81(0x1c9)](0x8),_0x4b7627[_0x526e81(0x214)]=_0x6ab72f[0x0]['count_buy']),g_constants[_0x526e81(0x170)][_0x526e81(0x1ff)]['selectAll'](_0x526e81(0x16d),_0x526e81(0x1f2)+_0x172a7c[_0x526e81(0x1b3)]+'\x27\x20AND\x20amount*price>0\x20AND\x20buysell=\x27sell\x27)','',(_0xd29d6c,_0x247fc5)=>{const _0x4a5cd7=_0x526e81;_0x247fc5[_0x4a5cd7(0x1c0)]&&(_0x4b7627[_0x4a5cd7(0x1ba)]=(_0x247fc5[0x0][_0x4a5cd7(0x1ba)]*0x1)[_0x4a5cd7(0x1c9)](0x8),_0x4b7627[_0x4a5cd7(0x1cc)]=_0x247fc5[0x0][_0x4a5cd7(0x20d)]);let _0x3009c7=_0x172a7c;require(_0x4a5cd7(0x180))[_0x4a5cd7(0x21d)](_0x3009c7),_0x4b7627[_0x4a5cd7(0x18d)]=_0x3009c7[_0x4a5cd7(0x207)]||0x0,onSuccess(_0x303477,_0x3d63e4,_0x4b7627),SetCache(_0x322360,0x7530,_0x4b7627);});});});});},exports[a0_0x55406b(0x1fa)]=function(_0x422e66,_0x5e1423){const _0x442bfe=a0_0x55406b,_0xe2ec08=url[_0x442bfe(0x20e)](_0x422e66['url']);if(!_0xe2ec08||!_0xe2ec08[_0x442bfe(0x20c)])return onError(_0x422e66,_0x5e1423,_0x442bfe(0x218));const _0x5cb769=querystring[_0x442bfe(0x20e)](_0xe2ec08[_0x442bfe(0x20c)]);if(!_0x5cb769['market'])return onError(_0x422e66,_0x5e1423,_0x442bfe(0x228));const _0x20e707=_0x5cb769['market'][_0x442bfe(0x1e6)]('-');if(!_0x20e707||!_0x20e707[_0x442bfe(0x1c0)]||_0x20e707[_0x442bfe(0x1c0)]!=0x2)return onError(_0x422e66,_0x5e1423,_0x442bfe(0x191));g_constants[_0x442bfe(0x170)][_0x442bfe(0x1ca)][_0x442bfe(0x1e0)](_0x442bfe(0x1e8),'ticker=\x22'+_0x20e707[0x1]+'\x22','',(_0x5d9e3d,_0xbe7888)=>{const _0xf110ea=_0x442bfe;try{if(_0x5d9e3d||!_0xbe7888)throw new Error(_0x5d9e3d&&_0x5d9e3d[_0xf110ea(0x21f)]?_0x5d9e3d[_0xf110ea(0x21f)]:'unknown\x20database\x20error');if(!_0xbe7888[_0xf110ea(0x1c0)])throw new Error(_0xf110ea(0x22c)+_0x20e707[0x1]+_0xf110ea(0x1c2));const _0x3c1700=_0xbe7888[0x0],_0x170be6=_0xf110ea(0x224)+escape(_0x3c1700[_0xf110ea(0x1b3)])+'\x22';g_constants[_0xf110ea(0x170)]['history'][_0xf110ea(0x1e0)](_0xf110ea(0x1e4),_0x170be6,_0xf110ea(0x1ad),(_0x3628fd,_0x1ab8f2)=>{const _0x10e657=_0xf110ea;if(_0x3628fd||!_0x1ab8f2)return onError(_0x422e66,_0x5e1423,_0x3628fd&&_0x3628fd['message']?_0x3628fd[_0x10e657(0x21f)]:'unknown\x20database\x20error');let _0xb71e85=[];for(var _0x140083=0x0;_0x140083<_0x1ab8f2[_0x10e657(0x1c0)];_0x140083++){const _0x49c0d1=new Date(_0x1ab8f2[_0x140083]['time']*0x1),_0x4e1ee3={'Id':_0x1ab8f2[_0x140083]['id'],'TimeStamp':new Date(_0x49c0d1)[_0x10e657(0x1bf)]()[_0x10e657(0x1a0)](0x0,-0x1),'Quantity':_0x1ab8f2[_0x140083][_0x10e657(0x16e)]*0x1,'Price':_0x1ab8f2[_0x140083][_0x10e657(0x207)]*0x1,'Total':_0x1ab8f2[_0x140083]['price']*_0x1ab8f2[_0x140083][_0x10e657(0x16e)],'FillType':'FILL','OrderType':_0x1ab8f2[_0x140083][_0x10e657(0x200)][_0x10e657(0x210)]()};_0xb71e85[_0x10e657(0x176)](_0x4e1ee3);}return onSuccess(_0x422e66,_0x5e1423,_0xb71e85);});}catch(_0x29cf9b){return onError(_0x422e66,_0x5e1423,_0x29cf9b[_0xf110ea(0x21f)]);}});};function SubmitOrder(_0x5886ba,_0x269925,_0x2da59a){const _0x57a6bd=a0_0x55406b;try{const _0x411f37=url[_0x57a6bd(0x20e)](_0x5886ba['url']);if(!_0x411f37||!_0x411f37['query']||!_0x5886ba[_0x57a6bd(0x19c)][_0x57a6bd(0x1aa)])throw new Error('Bad\x20request');const _0x24fef3=querystring[_0x57a6bd(0x20e)](_0x411f37[_0x57a6bd(0x20c)]);if(!_0x24fef3['apikey']||!_0x24fef3[_0x57a6bd(0x1b0)]||!_0x24fef3['market']||!_0x24fef3[_0x57a6bd(0x17d)]||!_0x24fef3[_0x57a6bd(0x196)])throw new Error('Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20market\x20or\x20quantity\x20or\x20rate)\x20not\x20found.');const _0x2af28c=_0x24fef3[_0x57a6bd(0x206)]['split']('-');if(!_0x2af28c[_0x57a6bd(0x1c0)]||_0x2af28c[_0x57a6bd(0x1c0)]!=0x2)throw new Error('Bad\x20request.\x20Parameter\x20currency\x20is\x20invalid.');utils[_0x57a6bd(0x225)](_0x2af28c[0x1],_0x4e476b=>{const _0x5d653b=_0x57a6bd;if(!_0x4e476b||!_0x4e476b[_0x5d653b(0x1b3)])return onError(_0x5886ba,_0x269925,'Coin\x20ticker\x20not\x20found');var _0x3fa4fe=_0x5886ba[_0x5d653b(0x1e1)]+_0x5d653b(0x21a)+_0x5886ba[_0x5d653b(0x189)](_0x5d653b(0x1db))+_0x5886ba['originalUrl'];CheckAPIkey(_0x24fef3[_0x5d653b(0x17e)],_0x5886ba[_0x5d653b(0x19c)][_0x5d653b(0x1aa)],_0x3fa4fe,_0x36a6b9=>{const _0x200b32=_0x5d653b;try{if(_0x36a6b9['success']==![])throw new Error(_0x36a6b9[_0x200b32(0x21f)]);if(_0x36a6b9[_0x200b32(0x222)][_0x200b32(0x226)]==0x0)throw new Error('apikey\x20disabled\x20for\x20write');const _0x1a0c5b={'session_status':{'active':!![],'id':_0x36a6b9[_0x200b32(0x222)][_0x200b32(0x18c)]},'body':{'order':_0x2da59a,'coin':_0x4e476b[_0x200b32(0x1b3)],'amount':_0x24fef3[_0x200b32(0x17d)],'price':_0x24fef3[_0x200b32(0x196)]},'callback':function(_0x48cbb3){const _0x2059ca=_0x200b32;if(!_0x48cbb3||_0x48cbb3['result']!=!![])return onError(_0x5886ba,_0x269925,_0x48cbb3?_0x48cbb3[_0x2059ca(0x21f)]||'Unexpected\x20error':_0x2059ca(0x172));return onSuccess(_0x5886ba,_0x269925,_0x48cbb3[_0x2059ca(0x1c3)]);}};orders[_0x200b32(0x193)](_0x1a0c5b,null);}catch(_0x4994fb){return onError(_0x5886ba,_0x269925,_0x4994fb[_0x200b32(0x21f)]);}});});}catch(_0x28f984){return onError(_0x5886ba,_0x269925,_0x28f984['message']);}}exports['onMarketBuylimit']=function(_0x22a1a4,_0x5c33c0){const _0x355009=a0_0x55406b;SubmitOrder(_0x22a1a4,_0x5c33c0,_0x355009(0x1b8));},exports[a0_0x55406b(0x17b)]=function(_0xcedb64,_0x58b8a1){const _0x1417a0=a0_0x55406b;SubmitOrder(_0xcedb64,_0x58b8a1,_0x1417a0(0x21b));},exports[a0_0x55406b(0x182)]=function(_0x175a9d,_0x2b67d6){const _0x50470=a0_0x55406b;try{const _0x314c0a=url[_0x50470(0x20e)](_0x175a9d['url']);if(!_0x314c0a||!_0x314c0a['query']||!_0x175a9d[_0x50470(0x19c)][_0x50470(0x1aa)])throw new Error(_0x50470(0x218));const _0x4a1bda=querystring[_0x50470(0x20e)](_0x314c0a[_0x50470(0x20c)]);if(!_0x4a1bda[_0x50470(0x17e)]||!_0x4a1bda[_0x50470(0x1b0)]||!_0x4a1bda[_0x50470(0x1bb)])throw'Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20uuid)\x20not\x20found.';if(!_0x4a1bda[_0x50470(0x1bb)][_0x50470(0x1c0)])throw _0x50470(0x22e);var _0x440b2c=_0x175a9d[_0x50470(0x1e1)]+_0x50470(0x21a)+_0x175a9d['get'](_0x50470(0x1db))+_0x175a9d[_0x50470(0x190)];CheckAPIkey(_0x4a1bda['apikey'],_0x175a9d[_0x50470(0x19c)][_0x50470(0x1aa)],_0x440b2c,_0x2b213b=>{const _0x55ffbc=_0x50470;try{if(_0x2b213b[_0x55ffbc(0x1ab)]==![])throw new Error(_0x2b213b['message']);if(_0x2b213b[_0x55ffbc(0x222)]['write']==0x0)throw new Error('apikey\x20disabled\x20for\x20write');g_constants[_0x55ffbc(0x170)][_0x55ffbc(0x1ff)][_0x55ffbc(0x1e0)](_0x55ffbc(0x1d9),_0x55ffbc(0x194)+_0x4a1bda[_0x55ffbc(0x1bb)]+'\x22','',(_0x30e608,_0x1172e6)=>{const _0x3901d8=_0x55ffbc;if(_0x30e608||!_0x1172e6||!_0x1172e6[_0x3901d8(0x1c0)])return onError(_0x175a9d,_0x2b67d6,'Order\x20with\x20this\x20uuid\x20not\x20found');const _0x4c618b={'session_status':{'active':!![],'id':_0x2b213b[_0x3901d8(0x222)][_0x3901d8(0x18c)]},'body':{'orderID':_0x1172e6[0x0]['id']},'callback':function(_0x40f2aa){const _0x5974e5=_0x3901d8;if(!_0x40f2aa||_0x40f2aa[_0x5974e5(0x1e9)]!=!![])return onError(_0x175a9d,_0x2b67d6,_0x40f2aa?_0x40f2aa[_0x5974e5(0x21f)]||'Unexpected\x20error':_0x5974e5(0x172));return onSuccess(_0x175a9d,_0x2b67d6,_0x40f2aa[_0x5974e5(0x1c3)]);}};orders[_0x3901d8(0x17f)](_0x4c618b,null);});}catch(_0x32297e){return onError(_0x175a9d,_0x2b67d6,_0x32297e['message']);}});}catch(_0x3abf82){return onError(_0x175a9d,_0x2b67d6,_0x3abf82[_0x50470(0x21f)]);}},exports[a0_0x55406b(0x198)]=function(_0xa5804a,_0x3d8162){const _0x47d4fe=a0_0x55406b;try{const _0x2cc6d8=url[_0x47d4fe(0x20e)](_0xa5804a['url']);if(!_0x2cc6d8||!_0x2cc6d8[_0x47d4fe(0x20c)]||!_0xa5804a[_0x47d4fe(0x19c)][_0x47d4fe(0x1aa)])throw new Error(_0x47d4fe(0x218));const _0x2dc746=querystring[_0x47d4fe(0x20e)](_0x2cc6d8[_0x47d4fe(0x20c)]);if(!_0x2dc746[_0x47d4fe(0x17e)]||!_0x2dc746[_0x47d4fe(0x1b0)]||!_0x2dc746[_0x47d4fe(0x206)])throw new Error(_0x47d4fe(0x1d8));const _0x68f14a=_0x2dc746['market'][_0x47d4fe(0x1e6)]('-');if(!_0x68f14a[_0x47d4fe(0x1c0)]||_0x68f14a[_0x47d4fe(0x1c0)]!=0x2)throw new Error('Bad\x20request.\x20Parameter\x20currency\x20is\x20invalid.');utils[_0x47d4fe(0x225)](_0x68f14a[0x1],_0x3ff758=>{const _0x2514d4=_0x47d4fe;if(!_0x3ff758||!_0x3ff758[_0x2514d4(0x1b3)])return onError(_0xa5804a,_0x3d8162,_0x2514d4(0x19b));var _0x56c759=_0xa5804a[_0x2514d4(0x1e1)]+_0x2514d4(0x21a)+_0xa5804a[_0x2514d4(0x189)]('host')+_0xa5804a['originalUrl'];CheckAPIkey(_0x2dc746['apikey'],_0xa5804a[_0x2514d4(0x19c)][_0x2514d4(0x1aa)],_0x56c759,_0x2056d3=>{const _0x31ef3a=_0x2514d4;try{if(_0x2056d3['success']==![])throw new Error(_0x2056d3[_0x31ef3a(0x21f)]);if(_0x2056d3[_0x31ef3a(0x222)]['read']==0x0)throw new Error('apikey\x20disabled\x20for\x20read');orders[_0x31ef3a(0x1e5)](_0x2056d3['key'][_0x31ef3a(0x18c)],[_0x3ff758],_0x664c39=>{const _0x26cf80=_0x31ef3a;if(_0x664c39[_0x26cf80(0x1e9)]!=!![])return onError(_0xa5804a,_0x3d8162,_0x664c39[_0x26cf80(0x21f)]);let _0x4e0cb2=[];for(var _0x52b4e0=0x0;_0x52b4e0<_0x664c39[_0x26cf80(0x1c3)]['length'];_0x52b4e0++){const _0x4e346e=new Date(_0x664c39[_0x26cf80(0x1c3)][_0x52b4e0][_0x26cf80(0x1b9)]*0x1),_0x51bac6={'OrderUuid':_0x664c39['data'][_0x52b4e0][_0x26cf80(0x1bb)],'Exchange':_0x2dc746[_0x26cf80(0x206)],'QuantityRemaining':_0x664c39[_0x26cf80(0x1c3)][_0x52b4e0][_0x26cf80(0x211)],'Price':_0x664c39['data'][_0x52b4e0][_0x26cf80(0x207)],'Opened':_0x4e346e['toUTCString'](),'OrderType':_0x664c39[_0x26cf80(0x1c3)][_0x52b4e0][_0x26cf80(0x200)]};_0x4e0cb2['push'](_0x51bac6);}return onSuccess(_0xa5804a,_0x3d8162,_0x4e0cb2);});}catch(_0x31f018){return onError(_0xa5804a,_0x3d8162,_0x31f018['message']);}});});}catch(_0x35ba7e){return onError(_0xa5804a,_0x3d8162,_0x35ba7e[_0x47d4fe(0x21f)]);}},exports[a0_0x55406b(0x1b5)]=function(_0x2f69fd,_0x4fcbf7){const _0x124642=a0_0x55406b;try{const _0x1434cc=url[_0x124642(0x20e)](_0x2f69fd[_0x124642(0x208)]);if(!_0x1434cc||!_0x1434cc[_0x124642(0x20c)]||!_0x2f69fd['headers'][_0x124642(0x1aa)])throw new Error(_0x124642(0x218));const _0x4ced05=querystring['parse'](_0x1434cc['query']);if(!_0x4ced05[_0x124642(0x17e)]||!_0x4ced05[_0x124642(0x1b0)]||!_0x4ced05['currency'])throw new Error(_0x124642(0x1ee));utils[_0x124642(0x225)](_0x4ced05['currency'],_0x5542dd=>{const _0x3d3408=_0x124642;if(!_0x5542dd||!_0x5542dd[_0x3d3408(0x1b3)])return onError(_0x2f69fd,_0x4fcbf7,_0x3d3408(0x19b));var _0x7fd91c=_0x2f69fd[_0x3d3408(0x1e1)]+_0x3d3408(0x21a)+_0x2f69fd[_0x3d3408(0x189)]('host')+_0x2f69fd[_0x3d3408(0x190)];CheckAPIkey(_0x4ced05[_0x3d3408(0x17e)],_0x2f69fd[_0x3d3408(0x19c)]['apisign'],_0x7fd91c,_0x406af1=>{const _0x44d1b8=_0x3d3408;try{if(_0x406af1[_0x44d1b8(0x1ab)]==![])throw new Error(_0x406af1[_0x44d1b8(0x21f)]);if(_0x406af1['key'][_0x44d1b8(0x1d4)]==0x0)throw new Error(_0x44d1b8(0x169));wallet[_0x44d1b8(0x20b)](null,_0x406af1[_0x44d1b8(0x222)][_0x44d1b8(0x18c)],_0x5542dd,_0x281820=>{const _0x20d4ea=_0x44d1b8;try{const _0x461cb1=JSON[_0x20d4ea(0x20e)](_0x281820)[_0x20d4ea(0x21f)],_0x39b090=(_0x461cb1[_0x20d4ea(0x1eb)]||0x0)*0x1,_0x2e783c=(_0x461cb1[_0x20d4ea(0x1b6)]||0x0)*0x1,_0x46a9ef=(_0x461cb1[_0x20d4ea(0x1fd)]||0x0)*0x1;return onSuccess(_0x2f69fd,_0x4fcbf7,{'Currency':_0x461cb1[_0x20d4ea(0x221)][_0x20d4ea(0x1a2)],'Balance':utils[_0x20d4ea(0x192)](_0x39b090+_0x2e783c+_0x46a9ef),'Available':_0x39b090[_0x20d4ea(0x1c9)](0x8)*0x1,'Pending':_0x2e783c[_0x20d4ea(0x1c9)](0x8)*0x1});}catch(_0x4a34c8){return onError(_0x2f69fd,_0x4fcbf7,_0x4a34c8['message']);}});}catch(_0xd93425){return onError(_0x2f69fd,_0x4fcbf7,_0xd93425['message']);}});});}catch(_0x366712){return onError(_0x2f69fd,_0x4fcbf7,_0x366712[_0x124642(0x21f)]);}},exports[a0_0x55406b(0x1b2)]=function(_0x1cad0a,_0x310c4b){const _0x16ad63=a0_0x55406b;utils[_0x16ad63(0x1b1)](_0x1cad0a,_0x4f3eab=>{const _0x4a5630=_0x16ad63;if(!_0x4f3eab[_0x4a5630(0x1a7)])return onError(_0x1cad0a,_0x310c4b,_0x4a5630(0x1b4));g_constants[_0x4a5630(0x170)][_0x4a5630(0x1dd)][_0x4a5630(0x1e0)]('*',_0x4a5630(0x1be)+_0x4f3eab['id']+'\x22','',(_0x2f6094,_0x241058)=>{const _0x2e3b2a=_0x4a5630;if(_0x2f6094)return onError(_0x1cad0a,_0x310c4b,_0x2f6094[_0x2e3b2a(0x21f)]||'Database\x20Select\x20error');if(_0x241058&&_0x241058['length']>0x9)return onError(_0x1cad0a,_0x310c4b,_0x2e3b2a(0x18a));const _0x5eb56c=utils[_0x2e3b2a(0x18b)](Math[_0x2e3b2a(0x223)]()*0x2710+_0x2e3b2a(0x19f)+Date[_0x2e3b2a(0x1b7)]())['substr'](0x0,0x28),_0x251797=utils[_0x2e3b2a(0x18b)](Math[_0x2e3b2a(0x223)]()*0x2710+_0x2e3b2a(0x19f)+Date[_0x2e3b2a(0x1b7)]())[_0x2e3b2a(0x1f0)](0x0,0x28);g_constants[_0x2e3b2a(0x170)][_0x2e3b2a(0x1dd)][_0x2e3b2a(0x18e)](_0x4f3eab['id'],_0x5eb56c,0x0,0x0,0x0,JSON['stringify']({'privKey':_0x251797}),_0x15a3cf=>{const _0x55b7d9=_0x2e3b2a;if(_0x15a3cf)return onError(_0x1cad0a,_0x310c4b,_0x15a3cf[_0x55b7d9(0x21f)]||'Database\x20Insert\x20error');onSuccess(_0x1cad0a,_0x310c4b,{'pub':_0x5eb56c,'priv':_0x251797});});});});},exports[a0_0x55406b(0x22f)]=function(_0xe6b96f,_0x4ac013){utils['GetSessionStatus'](_0xe6b96f,_0x22cd91=>{const _0x3fea42=a0_0x5aca;if(!_0x22cd91[_0x3fea42(0x1a7)])return onError(_0xe6b96f,_0x4ac013,_0x3fea42(0x1b4));if(!_0xe6b96f[_0x3fea42(0x1bc)]||!_0xe6b96f[_0x3fea42(0x1bc)][_0x3fea42(0x222)])return onError(_0xe6b96f,_0x4ac013,_0x3fea42(0x1fc));g_constants['dbTables'][_0x3fea42(0x1dd)][_0x3fea42(0x1a1)](_0x3fea42(0x1be)+_0x22cd91['id']+_0x3fea42(0x1f7)+escape(_0xe6b96f[_0x3fea42(0x1bc)][_0x3fea42(0x222)])+'\x22'),onSuccess(_0xe6b96f,_0x4ac013,0x0);});},exports['onListAPIkeys']=function(_0x15c30b,_0x1397b5){const _0x5da6d8=a0_0x55406b;utils[_0x5da6d8(0x1b1)](_0x15c30b,_0x1a75c8=>{const _0x52ec46=_0x5da6d8;if(!_0x1a75c8['active'])return onError(_0x15c30b,_0x1397b5,'User\x20not\x20logged');g_constants['dbTables'][_0x52ec46(0x1dd)][_0x52ec46(0x1e0)]('*','userid=\x22'+_0x1a75c8['id']+'\x22','',(_0x37ba90,_0x1f5cd3)=>{const _0x395b8b=_0x52ec46;if(_0x37ba90)return onError(_0x15c30b,_0x1397b5,_0x395b8b(0x1fe));if(!_0x1f5cd3||!_0x1f5cd3[_0x395b8b(0x1c0)])return onSuccess(_0x15c30b,_0x1397b5,[]);onSuccess(_0x15c30b,_0x1397b5,_0x1f5cd3);});});},exports[a0_0x55406b(0x215)]=function(_0x2f70ad,_0x1b3c95){const _0x5a8b20=a0_0x55406b;utils[_0x5a8b20(0x1b1)](_0x2f70ad,_0x4046e4=>{const _0x498703=_0x5a8b20;if(!_0x4046e4[_0x498703(0x1a7)])return onError(_0x2f70ad,_0x1b3c95,'User\x20not\x20logged');if(!_0x2f70ad[_0x498703(0x1bc)]||!_0x2f70ad['body'][_0x498703(0x222)])return onError(_0x2f70ad,_0x1b3c95,'Bad\x20Request');const _0x5aea25=_0x498703(0x1cb)+_0x4e9c11(_0x2f70ad[_0x498703(0x1bc)][_0x498703(0x1d4)])+_0x498703(0x202)+_0x4e9c11(_0x2f70ad['body'][_0x498703(0x226)])+_0x498703(0x1f9)+_0x4e9c11(_0x2f70ad[_0x498703(0x1bc)][_0x498703(0x1ea)])+'\x22';g_constants['dbTables'][_0x498703(0x1dd)]['update'](_0x5aea25,_0x498703(0x1be)+_0x4046e4['id']+_0x498703(0x1f7)+escape(_0x2f70ad[_0x498703(0x1bc)][_0x498703(0x222)])+'\x22',_0x53f632=>{const _0x1a7c02=_0x498703;if(_0x53f632)return onError(_0x2f70ad,_0x1b3c95,_0x1a7c02(0x1f1));onSuccess(_0x2f70ad,_0x1b3c95,0x0);});});function _0x4e9c11(_0x34c6f2){if(!utils['isNumeric'](_0x34c6f2))return 0x0;if(_0x34c6f2*0x1<0x0||_0x34c6f2*0x1>0x1)return 0x0;return _0x34c6f2;}},exports[a0_0x55406b(0x1f5)]=function(_0x255b89,_0x25ac82){const _0x29690e=a0_0x55406b,_0x39a9ee=url['parse'](_0x255b89[_0x29690e(0x208)]);if(!_0x39a9ee||!_0x39a9ee['query']||!_0x255b89[_0x29690e(0x19c)][_0x29690e(0x1aa)])return onError(_0x255b89,_0x25ac82,_0x29690e(0x218));const _0x521123=querystring[_0x29690e(0x20e)](_0x39a9ee[_0x29690e(0x20c)]);if(!_0x521123[_0x29690e(0x17e)]||!_0x521123[_0x29690e(0x1b0)]||!_0x521123[_0x29690e(0x1cd)])return onError(_0x255b89,_0x25ac82,'Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20currency)\x20not\x20found.');utils['GetCoinFromTicker'](_0x521123[_0x29690e(0x1cd)],_0x5bdeab=>{const _0x1f1dcf=_0x29690e;if(!_0x5bdeab||!_0x5bdeab[_0x1f1dcf(0x1b3)])return onError(_0x255b89,_0x25ac82,_0x1f1dcf(0x19b));var _0x28fad2=_0x255b89[_0x1f1dcf(0x1e1)]+_0x1f1dcf(0x21a)+_0x255b89[_0x1f1dcf(0x189)](_0x1f1dcf(0x1db))+_0x255b89['originalUrl'];CheckAPIkey(_0x521123[_0x1f1dcf(0x17e)],_0x255b89[_0x1f1dcf(0x19c)][_0x1f1dcf(0x1aa)],_0x28fad2,_0x552c71=>{const _0x137448=_0x1f1dcf;try{if(_0x552c71[_0x137448(0x1ab)]==![])throw new Error(_0x552c71[_0x137448(0x21f)]);if(_0x552c71['key']['read']==0x0)throw new Error(_0x137448(0x169));wallet[_0x137448(0x1ec)](_0x552c71[_0x137448(0x222)][_0x137448(0x18c)],_0x5bdeab[_0x137448(0x1b3)],_0x1f3b5b=>{const _0x5e189b=_0x137448;if(_0x1f3b5b[_0x5e189b(0x1e9)]!=_0x5e189b(0x1ab)||!_0x1f3b5b['data'])return onError(_0x255b89,_0x25ac82,_0x1f3b5b['message']);onSuccess(_0x255b89,_0x25ac82,{'Currency':_0x5bdeab['ticker'],'Address':_0x1f3b5b['data']});});}catch(_0x1451ee){return onError(_0x255b89,_0x25ac82,_0x1451ee['message']);}});});},exports[a0_0x55406b(0x1c1)]=function(_0x57a6b6,_0x67812){const _0x1514d5=a0_0x55406b;try{const _0x3b094f=url[_0x1514d5(0x20e)](_0x57a6b6[_0x1514d5(0x208)]);if(!_0x3b094f||!_0x3b094f[_0x1514d5(0x20c)]||!_0x57a6b6[_0x1514d5(0x19c)][_0x1514d5(0x1aa)])throw new Error(_0x1514d5(0x218));const _0x3bb497=querystring['parse'](_0x3b094f[_0x1514d5(0x20c)]);if(!_0x3bb497['apikey']||!_0x3bb497[_0x1514d5(0x1b0)]||!_0x3bb497[_0x1514d5(0x1bb)])throw new Error(_0x1514d5(0x1f6));if(!_0x3bb497[_0x1514d5(0x1bb)][_0x1514d5(0x1c0)])throw new Error(_0x1514d5(0x22e));var _0x7e4fe4=_0x57a6b6[_0x1514d5(0x1e1)]+'://'+_0x57a6b6['get'](_0x1514d5(0x1db))+_0x57a6b6[_0x1514d5(0x190)];CheckAPIkey(_0x3bb497['apikey'],_0x57a6b6[_0x1514d5(0x19c)][_0x1514d5(0x1aa)],_0x7e4fe4,_0x1bfbfd=>{const _0x300196=_0x1514d5;try{if(_0x1bfbfd[_0x300196(0x1ab)]==![])throw new Error(_0x1bfbfd[_0x300196(0x21f)]);if(_0x1bfbfd[_0x300196(0x222)][_0x300196(0x1d4)]==0x0)throw new Error(_0x300196(0x169));g_constants[_0x300196(0x170)]['orders'][_0x300196(0x1e0)](_0x300196(0x1e4),_0x300196(0x194)+_0x3bb497[_0x300196(0x1bb)]+'\x22','',(_0x36f073,_0xaeea2b)=>{const _0x56ccd1=_0x300196;if(_0x36f073||!_0xaeea2b||!_0xaeea2b[_0x56ccd1(0x1c0)])return onError(_0x57a6b6,_0x67812,'Order\x20with\x20this\x20uuid\x20not\x20found');g_constants[_0x56ccd1(0x170)][_0x56ccd1(0x1ca)][_0x56ccd1(0x1e0)]('name,\x20ticker','name=\x22'+_0xaeea2b[0x0][_0x56ccd1(0x221)]+_0x56ccd1(0x183)+_0xaeea2b[0x0][_0x56ccd1(0x212)]+'\x22','',(_0x4e9ed9,_0x46c5a4)=>{const _0x187a84=_0x56ccd1;if(_0x4e9ed9||!_0x46c5a4||_0x46c5a4['length']!=0x2)return onError(_0x57a6b6,_0x67812,_0x187a84(0x1d1));const _0x487704=_0x46c5a4[0x0][_0x187a84(0x1b3)]==_0xaeea2b[0x0][_0x187a84(0x212)]?_0x46c5a4[0x0][_0x187a84(0x1a2)]:_0x46c5a4[0x1]['ticker'],_0x116c5c=_0x46c5a4[0x0][_0x187a84(0x1b3)]==_0xaeea2b[0x0]['price_pair']?_0x46c5a4[0x1][_0x187a84(0x1a2)]:_0x46c5a4[0x0]['ticker'],_0x47f425=new Date(_0xaeea2b[0x0][_0x187a84(0x1b9)]*0x1);return onSuccess(_0x57a6b6,_0x67812,{'OrderUuid':_0xaeea2b[0x0]['uuid']||0x0,'Exchange':_0x487704+'-'+_0x116c5c,'QuantityRemaining':_0xaeea2b[0x0][_0x187a84(0x211)],'Price':_0xaeea2b[0x0][_0x187a84(0x207)],'Opened':new Date(_0x47f425)[_0x187a84(0x1bf)]()['slice'](0x0,-0x1),'IsOpen':!![]});});});}catch(_0x400346){return onError(_0x57a6b6,_0x67812,_0x400346['message']);}});}catch(_0xadd3e6){return onError(_0x57a6b6,_0x67812,_0xadd3e6[_0x1514d5(0x21f)]);}},exports[a0_0x55406b(0x1ac)]=function(_0x21dfca,_0x116fc3){onError(_0x21dfca,_0x116fc3,'getorderhistory\x20under\x20construction');},exports[a0_0x55406b(0x1d0)]=function(_0x1c83e9,_0x10bee6){const _0x327f72=a0_0x55406b;return exports[_0x327f72(0x173)](_0x1c83e9,_0x10bee6);},exports[a0_0x55406b(0x19d)]=function(_0x4da8bc,_0x554d69){const _0x10178b=a0_0x55406b,_0x1cd701=url[_0x10178b(0x20e)](_0x4da8bc['url']);if(!_0x1cd701||!_0x1cd701[_0x10178b(0x20c)])return onError(_0x4da8bc,_0x554d69,_0x10178b(0x218));const _0x4da2e6=querystring[_0x10178b(0x20e)](_0x1cd701['query']);if(!_0x4da2e6[_0x10178b(0x230)])return onError(_0x4da8bc,_0x554d69,_0x10178b(0x1af));var _0xa2a2b2=_0x4da8bc[_0x10178b(0x1e1)]+_0x10178b(0x21a)+_0x4da8bc[_0x10178b(0x189)](_0x10178b(0x1db))+_0x4da8bc['originalUrl'];CheckAPIkey(_0x4da2e6[_0x10178b(0x17e)]||0x0,_0x4da8bc[_0x10178b(0x19c)][_0x10178b(0x1aa)]||0x0,_0xa2a2b2,_0x3f1a00=>{const _0x5945c7=_0x10178b;try{if(_0x3f1a00[_0x5945c7(0x1ab)]==![])throw new Error(_0x3f1a00[_0x5945c7(0x21f)]);if(_0x3f1a00[_0x5945c7(0x222)][_0x5945c7(0x1ea)]==0x0)throw new Error(_0x5945c7(0x1a6));wallet[_0x5945c7(0x20f)](_0x3f1a00[_0x5945c7(0x222)][_0x5945c7(0x18c)],_0x4da2e6[_0x5945c7(0x230)],_0x235b66=>{const _0x366d06=_0x5945c7;if(!_0x235b66||_0x235b66[_0x366d06(0x1e9)]!=!![])return onError(_0x4da8bc,_0x554d69,_0x235b66[_0x366d06(0x21f)]&&_0x235b66[_0x366d06(0x21f)]['length']?_0x235b66[_0x366d06(0x21f)]:_0x366d06(0x199));return utils['renderJSON'](_0x4da8bc,_0x554d69,_0x235b66);});}catch(_0x570e58){utils['GetSessionStatus'](_0x4da8bc,_0x383061=>{const _0x33fdae=_0x5945c7;if(!_0x383061[_0x33fdae(0x1a7)])return onError(_0x4da8bc,_0x554d69,_0x33fdae(0x1b4));wallet[_0x33fdae(0x20f)](_0x383061['id'],_0x4da2e6[_0x33fdae(0x230)],_0x692e2d=>{const _0x43d1cd=_0x33fdae;if(!_0x692e2d||_0x692e2d[_0x43d1cd(0x1e9)]!=!![])return onError(_0x4da8bc,_0x554d69,_0x692e2d['message']&&_0x692e2d[_0x43d1cd(0x21f)][_0x43d1cd(0x1c0)]?_0x692e2d[_0x43d1cd(0x21f)]:_0x43d1cd(0x199));return utils[_0x43d1cd(0x178)](_0x4da8bc,_0x554d69,_0x692e2d);});});}});},exports['onAccountWithdraw']=function(_0x44d006,_0x2e118e){const _0x4be18e=a0_0x55406b,_0x44fa59=url[_0x4be18e(0x20e)](_0x44d006[_0x4be18e(0x208)]);if(!_0x44fa59||!_0x44fa59[_0x4be18e(0x20c)]||!_0x44d006['headers'][_0x4be18e(0x1aa)])return onError(_0x44d006,_0x2e118e,'Bad\x20request');const _0xc7d96a=querystring[_0x4be18e(0x20e)](_0x44fa59[_0x4be18e(0x20c)]);if(!_0xc7d96a[_0x4be18e(0x17d)]||!_0xc7d96a['currency'])return onError(_0x44d006,_0x2e118e,'Bad\x20request.\x20Required\x20parameter\x20(quantity\x20or\x20currency)\x20not\x20found.');if(!utils[_0x4be18e(0x175)](_0xc7d96a[_0x4be18e(0x17d)]))return onError(_0x44d006,_0x2e118e,_0x4be18e(0x1c8));if(_0xc7d96a[_0x4be18e(0x17d)]<0.00001)return onError(_0x44d006,_0x2e118e,_0x4be18e(0x174));utils[_0x4be18e(0x225)](_0xc7d96a[_0x4be18e(0x1cd)],_0x51edb6=>{const _0x11ec57=_0x4be18e;if(!_0x51edb6||!_0x51edb6[_0x11ec57(0x1b3)])return onError(_0x44d006,_0x2e118e,_0x11ec57(0x19b));var _0x5c7a32=_0x44d006['protocol']+'://'+_0x44d006[_0x11ec57(0x189)](_0x11ec57(0x1db))+_0x44d006[_0x11ec57(0x190)];if(!_0xc7d96a[_0x11ec57(0x17e)]||!_0xc7d96a[_0x11ec57(0x1b0)]){if(!_0x44d006['body']||!_0x44d006[_0x11ec57(0x1bc)][_0x11ec57(0x1ae)])return onError(_0x44d006,_0x2e118e,_0x11ec57(0x16a));return wallet['onWithdraw'](_0x44d006,_0x2e118e);}CheckAPIkey(_0xc7d96a['apikey'],_0x44d006[_0x11ec57(0x19c)]['apisign'],_0x5c7a32,_0x3a28ed=>{const _0x3b8d53=_0x11ec57;try{if(_0x3a28ed[_0x3b8d53(0x1ab)]==![])throw new Error(_0x3a28ed[_0x3b8d53(0x21f)]);if(_0x3a28ed[_0x3b8d53(0x222)][_0x3b8d53(0x1ea)]==0x0)throw new Error('apikey\x20disabled\x20for\x20withdraw');_0xc7d96a[_0x3b8d53(0x185)]?wallet[_0x3b8d53(0x203)](_0x3a28ed[_0x3b8d53(0x222)][_0x3b8d53(0x18c)],_0xc7d96a[_0x3b8d53(0x185)],_0xc7d96a['quantity'],_0x51edb6[_0x3b8d53(0x1b3)],_0x4b35e8=>{const _0x5e161e=_0x3b8d53;if(_0x4b35e8['error'])return onError(_0x44d006,_0x2e118e,_0x4b35e8[_0x5e161e(0x21f)]);return onSuccess(_0x44d006,_0x2e118e,{'uuid':_0x4b35e8[_0x5e161e(0x1c3)]});}):wallet['ProcessWithdrawToCoupon'](_0x3a28ed[_0x3b8d53(0x222)][_0x3b8d53(0x18c)],_0xc7d96a[_0x3b8d53(0x17d)],_0x51edb6[_0x3b8d53(0x1b3)],_0x3cc493=>{const _0x34b24c=_0x3b8d53;if(_0x3cc493[_0x34b24c(0x204)])return onError(_0x44d006,_0x2e118e,_0x3cc493[_0x34b24c(0x21f)]);return utils[_0x34b24c(0x178)](_0x44d006,_0x2e118e,_0x3cc493);});}catch(_0x1ef7a4){utils[_0x3b8d53(0x1b1)](_0x44d006,_0x34703e=>{const _0x5ab2b1=_0x3b8d53;if(!_0x34703e[_0x5ab2b1(0x1a7)]||_0x34703e['id']!=0x1)return onError(_0x44d006,_0x2e118e,'This\x20operation\x20is\x20allowed\x20for\x20root\x20only!');wallet[_0x5ab2b1(0x1a4)](_0x3a28ed[_0x5ab2b1(0x222)][_0x5ab2b1(0x18c)],_0xc7d96a[_0x5ab2b1(0x17d)],_0x51edb6[_0x5ab2b1(0x1b3)],_0x382369=>{const _0x3b9e62=_0x5ab2b1;if(_0x382369['error'])return onError(_0x44d006,_0x2e118e,_0x382369[_0x3b9e62(0x21f)]);return utils[_0x3b9e62(0x178)](_0x44d006,_0x2e118e,_0x382369);});});}},_0x44d006);});};function a0_0x5aca(_0x565050,_0x209a24){const _0x4409d4=a0_0x4409();return a0_0x5aca=function(_0x5acab5,_0x2fe1e8){_0x5acab5=_0x5acab5-0x167;let _0x3c49b9=_0x4409d4[_0x5acab5];return _0x3c49b9;},a0_0x5aca(_0x565050,_0x209a24);}function CheckAPIkey(_0x5157a9,_0xfca107,_0x1d6941,_0x2c03d9,_0xfb5bcf){const _0x2e77cf=a0_0x55406b;g_constants['dbTables'][_0x2e77cf(0x1dd)][_0x2e77cf(0x1e0)]('*',_0x2e77cf(0x16b)+escape(_0x5157a9)+'\x22','',(_0x51d66c,_0x414e46)=>{const _0x5c0136=_0x2e77cf;if(_0x51d66c||!_0x414e46||!_0x414e46['length'])return _0x2c03d9({'success':![],'message':_0x5c0136(0x219),'key':{'read':0x0,'write':0x0,'withdraw':0x0}});try{const _0x353892=JSON[_0x5c0136(0x20e)](unescape(_0x414e46[0x0][_0x5c0136(0x22b)]));if(!_0x353892['privKey'])return _0x2c03d9({'success':![],'message':'apisecret\x20not\x20found','read':0x0,'write':0x0,'withdraw':0x0});const _0x3213df=sig(_0x1d6941,_0x353892[_0x5c0136(0x1a3)]);if(_0x3213df!=_0xfca107)return _0x2c03d9({'success':![],'message':_0x5c0136(0x186)});return _0x2c03d9({'success':!![],'message':'','key':_0x414e46[0x0]});}catch(_0x5bfde7){return _0x2c03d9({'success':![],'message':_0x5bfde7[_0x5c0136(0x21f)]});}});}