'use strict';const a0_0x391e43=a0_0x2207;(function(_0x2a4787,_0x729634){const _0x5d531f=a0_0x2207,_0x3e4310=_0x2a4787();while(!![]){try{const _0x57bb58=-parseInt(_0x5d531f(0x136))/0x1*(parseInt(_0x5d531f(0x172))/0x2)+parseInt(_0x5d531f(0x13b))/0x3*(-parseInt(_0x5d531f(0x120))/0x4)+parseInt(_0x5d531f(0x180))/0x5+parseInt(_0x5d531f(0x11d))/0x6+parseInt(_0x5d531f(0xe0))/0x7*(-parseInt(_0x5d531f(0xd5))/0x8)+parseInt(_0x5d531f(0x15b))/0x9*(-parseInt(_0x5d531f(0x17b))/0xa)+parseInt(_0x5d531f(0x151))/0xb;if(_0x57bb58===_0x729634)break;else _0x3e4310['push'](_0x3e4310['shift']());}catch(_0x1e5394){_0x3e4310['push'](_0x3e4310['shift']());}}}(a0_0x5d95,0x21874));function a0_0x2207(_0x596735,_0x4b482b){const _0x5d9513=a0_0x5d95();return a0_0x2207=function(_0x2207e5,_0x4376bf){_0x2207e5=_0x2207e5-0xc2;let _0x57af71=_0x5d9513[_0x2207e5];return _0x57af71;},a0_0x2207(_0x596735,_0x4b482b);}const crypto=require('crypto'),utils=require(a0_0x391e43(0x16a)),g_constants=require(a0_0x391e43(0x17d)),trade=require('../users/trade.js'),wallet=require(a0_0x391e43(0x10c)),orders=require(a0_0x391e43(0x167)),market=require('../users/market.js'),url=require(a0_0x391e43(0x178)),querystring=require(a0_0x391e43(0x100));let g_Cache={};function sig(_0x218584,_0x719121){const _0x10a408=a0_0x391e43;return crypto[_0x10a408(0x12e)](_0x10a408(0x153),_0x719121)['update'](new Buffer(_0x218584,_0x10a408(0x174)))['digest']('hex');}function onError(_0x38a71d,_0x58eb96,_0x5da1ee){const _0x510333=a0_0x391e43;utils[_0x510333(0xfb)](_0x38a71d,_0x58eb96,{'success':![],'message':_0x5da1ee||'API\x20under\x20construction'});}function onSuccess(_0x1e9622,_0x413a76,_0x460b94){const _0x365ded=a0_0x391e43;utils[_0x365ded(0xfb)](_0x1e9622,_0x413a76,{'success':!![],'message':'','result':_0x460b94});}function GetCache(_0x5153af){const _0x1fd7d3=a0_0x391e43;if(!g_Cache[_0x5153af]||!g_Cache[_0x5153af]['data']||!g_Cache[_0x5153af][_0x1fd7d3(0x147)]||!g_Cache[_0x5153af][_0x1fd7d3(0xd2)])return null;if(Date[_0x1fd7d3(0x155)]()-g_Cache[_0x5153af][_0x1fd7d3(0x147)]>g_Cache[_0x5153af]['timeCached'])return delete g_Cache[_0x5153af],null;return g_Cache[_0x5153af][_0x1fd7d3(0x117)];}function SetCache(_0x36e493,_0x1e3de8,_0x11de36){const _0x1817b3=a0_0x391e43;if(g_Cache[_0x36e493])delete g_Cache[_0x36e493];g_Cache[_0x36e493]={'data':_0x11de36,'timeCached':_0x1e3de8,'time':Date[_0x1817b3(0x155)]()};}exports['ResetCache']=function(_0x494a60){if(g_Cache[_0x494a60])delete g_Cache[_0x494a60];},exports[a0_0x391e43(0x138)]=function(_0x4e4c9c,_0x18edaf){const _0x4a4ced=a0_0x391e43;market[_0x4a4ced(0x122)](_0x280bab=>{onSuccess(_0x4e4c9c,_0x18edaf,_0x280bab);});},exports[a0_0x391e43(0xfd)]=function(_0x46ca6f,_0xb647e5){market['GetMarketSummary24'](_0x55bfbc=>{const _0x5e4177=a0_0x2207;let _0x14b6f8=0x0,_0x1b631b=0x0;for(let _0x4a6fe9 in _0x55bfbc){_0x1b631b+=_0x55bfbc[_0x4a6fe9][_0x5e4177(0x11a)]*0x1,_0x14b6f8++;}return onSuccess(_0x46ca6f,_0xb647e5,{'TotalMarkets':_0x14b6f8,'v24':_0x1b631b,'data':_0x55bfbc});});},exports[a0_0x391e43(0xd7)]=function(_0x131010,_0x2fe6f6){const _0x332699=a0_0x391e43;let _0x4b1e34=GetCache(_0x332699(0x168));if(_0x4b1e34)return onSuccess(_0x131010,_0x2fe6f6,_0x4b1e34);g_constants[_0x332699(0x11f)][_0x332699(0x176)][_0x332699(0x115)](_0x332699(0x164),'','',(_0x3d86ba,_0x2d9897)=>{const _0x2848a9=_0x332699;if(_0x3d86ba||!_0x2d9897)return onError(_0x131010,_0x2fe6f6,_0x3d86ba&&_0x3d86ba['message']?_0x3d86ba[_0x2848a9(0x129)]:'unknown\x20database\x20error');try{let _0x2330fb=[];for(var _0x485cba=0x0;_0x485cba<_0x2d9897['length'];_0x485cba++){_0x2d9897[_0x485cba][_0x2848a9(0xf4)]=JSON[_0x2848a9(0x11b)](utils['Decrypt'](_0x2d9897[_0x485cba][_0x2848a9(0xf4)])),_0x2330fb[_0x2848a9(0x124)]({'MarketCurrency':unescape(_0x2d9897[_0x485cba][_0x2848a9(0x142)]),'BaseCurrency':g_constants['share'][_0x2848a9(0x110)],'MarketCurrencyLong':unescape(_0x2d9897[_0x485cba][_0x2848a9(0x148)]),'BaseCurrencyLong':g_constants['share'][_0x2848a9(0x10e)],'MinTradeSize':0x0,'MarketName':g_constants[_0x2848a9(0x17a)]['TRADE_MAIN_COIN_TICKER']+'-'+unescape(_0x2d9897[_0x485cba][_0x2848a9(0x142)]),'IsActive':!![],'Created':_0x2848a9(0x10d),'info':_0x2d9897[_0x485cba][_0x2848a9(0xf4)]});}onSuccess(_0x131010,_0x2fe6f6,_0x2330fb),SetCache('GetMarkets',0x36ee80,_0x2330fb);}catch(_0x29b80c){onError(_0x131010,_0x2fe6f6,_0x29b80c[_0x2848a9(0x129)]);}});},exports['onGetOrderbook']=function(_0x556869,_0x46fdf6){const _0x3628c0=a0_0x391e43,_0x550195=url['parse'](_0x556869[_0x3628c0(0x178)]);if(!_0x550195||!_0x550195[_0x3628c0(0x163)])return onError(_0x556869,_0x46fdf6,_0x3628c0(0x16e));const _0x5bae25=querystring['parse'](_0x550195[_0x3628c0(0x163)]);if(!_0x5bae25[_0x3628c0(0x158)])return onError(_0x556869,_0x46fdf6,_0x3628c0(0x14c));const _0x3acf14=_0x5bae25['market'][_0x3628c0(0x173)]('-');if(!_0x3acf14)return onError(_0x556869,_0x46fdf6,_0x3628c0(0xf3));const _0xc5c2de=_0x5bae25[_0x3628c0(0x134)]||_0x3628c0(0x12d);trade[_0x3628c0(0xe3)](_0x3acf14,_0x24e74e=>{const _0x80e988=_0x3628c0;if(!_0x24e74e||_0x24e74e['result']==_0x80e988(0xc8)||!_0x24e74e['data']||!_0x24e74e['data'][_0x80e988(0x16b)]||!_0x24e74e[_0x80e988(0x117)][_0x80e988(0x119)])return onError(_0x556869,_0x46fdf6,_0x24e74e['message']?_0x24e74e[_0x80e988(0x129)]:_0x80e988(0xc4));let _0x162a60={'buy':[],'sell':[]};if(_0xc5c2de==_0x80e988(0x12d)||_0xc5c2de==_0x80e988(0x16b))for(var _0x2e9c36=0x0;_0x2e9c36<_0x24e74e[_0x80e988(0x117)]['buy'][_0x80e988(0xdd)];_0x2e9c36++){if(_0x24e74e>0xc8)break;if(!_0x24e74e[_0x80e988(0x117)]['buy'][_0x2e9c36][_0x80e988(0x17c)]||!_0x24e74e[_0x80e988(0x117)]['buy'][_0x2e9c36][_0x80e988(0x15a)])continue;_0x162a60[_0x80e988(0x16b)][_0x80e988(0x124)]({'Quantity':_0x24e74e['data'][_0x80e988(0x16b)][_0x2e9c36]['amount'],'Rate':_0x24e74e['data'][_0x80e988(0x16b)][_0x2e9c36][_0x80e988(0x15a)]});}if(_0xc5c2de=='both'||_0xc5c2de=='sell')for(var _0x2e9c36=0x0;_0x2e9c36<_0x24e74e[_0x80e988(0x117)][_0x80e988(0x119)][_0x80e988(0xdd)];_0x2e9c36++){if(_0x24e74e>0xc8)break;if(!_0x24e74e[_0x80e988(0x117)]['sell'][_0x2e9c36][_0x80e988(0x17c)]||!_0x24e74e['data'][_0x80e988(0x119)][_0x2e9c36][_0x80e988(0x15a)])continue;_0x162a60[_0x80e988(0x119)]['push']({'Quantity':_0x24e74e[_0x80e988(0x117)][_0x80e988(0x119)][_0x2e9c36][_0x80e988(0x17c)],'Rate':_0x24e74e[_0x80e988(0x117)][_0x80e988(0x119)][_0x2e9c36][_0x80e988(0x15a)]});}onSuccess(_0x556869,_0x46fdf6,_0x162a60);});},exports['onGetMarketSummary']=async function(_0x704625,_0x8fbe81){const _0x4e9dc5=a0_0x391e43,_0x310028=url[_0x4e9dc5(0x11b)](_0x704625[_0x4e9dc5(0x178)]);if(!_0x310028||!_0x310028[_0x4e9dc5(0x163)])return onError(_0x704625,_0x8fbe81,_0x4e9dc5(0x16e));const _0x13a3fc=querystring[_0x4e9dc5(0x11b)](_0x310028[_0x4e9dc5(0x163)]);if(!_0x13a3fc['market'])return onError(_0x704625,_0x8fbe81,_0x4e9dc5(0x14c));const _0x411236=_0x13a3fc[_0x4e9dc5(0xc9)]&&(_0x13a3fc[_0x4e9dc5(0xc9)]==0x18||_0x13a3fc[_0x4e9dc5(0xc9)]==0xfa||_0x13a3fc[_0x4e9dc5(0xc9)]==0x3e8||_0x13a3fc[_0x4e9dc5(0xc9)]==0x1770)?_0x13a3fc[_0x4e9dc5(0xc9)]*0x1:0x18;console['log'](_0x4e9dc5(0xf0)+_0x411236+_0x4e9dc5(0x165)+JSON[_0x4e9dc5(0x10a)](_0x13a3fc));if(!utils[_0x4e9dc5(0x144)](_0x411236))return onError(_0x704625,_0x8fbe81,_0x4e9dc5(0xfe));const _0x2b8b1c=_0x13a3fc['market'][_0x4e9dc5(0x173)]('-');if(!_0x2b8b1c||!_0x2b8b1c[_0x4e9dc5(0xdd)]||_0x2b8b1c[_0x4e9dc5(0xdd)]!=0x2)return onError(_0x704625,_0x8fbe81,'Bad\x20request.\x20Parameter\x20\x22market\x22\x20is\x20invalid');const _0x3fac19=_0x13a3fc[_0x4e9dc5(0x158)];try{const _0x381b3e=await utils['GetCoinFromTicker'](_0x2b8b1c[0x1]),_0x10e570=_0x381b3e[_0x4e9dc5(0xea)],_0xf053a2=JSON[_0x4e9dc5(0x11b)](utils[_0x4e9dc5(0xe2)](_0x381b3e['info'])),_0x562fd9=_0x4e9dc5(0xc5)+_0x381b3e[_0x4e9dc5(0x148)]+_0x4e9dc5(0x13a)+Date[_0x4e9dc5(0x155)]()+_0x4e9dc5(0x166)+_0x411236+_0x4e9dc5(0x17e),_0x2a3d61='onGetMarketSummary_'+_0x562fd9;let _0x2417a7=GetCache(_0x2a3d61);if(_0x2417a7)return onSuccess(_0x704625,_0x8fbe81,_0x2417a7);g_constants[_0x4e9dc5(0x11f)]['history'][_0x4e9dc5(0x115)]('max((fromBuyerToSeller*1)/fromSellerToBuyer)\x20AS\x20Height,\x20min((fromBuyerToSeller*1)/fromSellerToBuyer)\x20AS\x20Low,\x20sum(fromSellerToBuyer*1)\x20AS\x20Volume',_0x562fd9,_0x4e9dc5(0x185),(_0x156edd,_0x295cf7)=>{const _0x14d529=_0x4e9dc5;if(_0x156edd||!_0x295cf7){onError(_0x704625,_0x8fbe81,_0x156edd&&_0x156edd[_0x14d529(0x129)]?_0x156edd[_0x14d529(0x129)]:_0x14d529(0xe1));return;}let _0x1792ca={'MarketName':_0x3fac19,'High':0x0,'Low':0x0,'Volume':0x0,'Last':0x0,'Bid':0x0,'Ask':0x0,'OpenBuyOrders':0x0,'OpenSellOrders':0x0,'coin_icon_src':_0x10e570,'coin_info':_0xf053a2};_0x295cf7[_0x14d529(0xdd)]&&(_0x1792ca[_0x14d529(0x108)]=(_0x295cf7[0x0]['Height']*0x1)['toFixed'](0x8),_0x1792ca['Low']=(_0x295cf7[0x0]['Low']*0x1)[_0x14d529(0x121)](0x8),_0x1792ca['Volume']=(_0x295cf7[0x0][_0x14d529(0x11a)]*0x1)[_0x14d529(0x121)](0x8)),g_constants[_0x14d529(0x11f)][_0x14d529(0x182)]['selectAll'](_0x14d529(0xd6),_0x14d529(0xc6)+_0x381b3e[_0x14d529(0x148)]+'\x27\x20AND\x20amount*price>0\x20AND\x20buysell=\x27buy\x27)','',(_0x100241,_0x169fdb)=>{const _0x579cea=_0x14d529;_0x169fdb[_0x579cea(0xdd)]&&(_0x1792ca[_0x579cea(0x13c)]=(_0x169fdb[0x0]['Bid']*0x1)[_0x579cea(0x121)](0x8),_0x1792ca[_0x579cea(0xd3)]=_0x169fdb[0x0][_0x579cea(0xee)]),g_constants[_0x579cea(0x11f)]['orders'][_0x579cea(0x115)](_0x579cea(0x114),_0x579cea(0xc6)+_0x381b3e[_0x579cea(0x148)]+_0x579cea(0x160),'',(_0x53d41a,_0x32daee)=>{const _0x81efc7=_0x579cea;_0x32daee[_0x81efc7(0xdd)]&&(_0x1792ca[_0x81efc7(0x15f)]=(_0x32daee[0x0][_0x81efc7(0x15f)]*0x1)[_0x81efc7(0x121)](0x8),_0x1792ca[_0x81efc7(0x12a)]=_0x32daee[0x0]['count_sell']);let _0x28a06f=_0x381b3e;require(_0x81efc7(0x152))[_0x81efc7(0x186)](_0x28a06f),_0x1792ca[_0x81efc7(0xd9)]=_0x28a06f['price']||0x0,onSuccess(_0x704625,_0x8fbe81,_0x1792ca),SetCache(_0x2a3d61,0x7530,_0x1792ca);});});});}catch(_0x23b442){return onError(_0x704625,_0x8fbe81,_0x23b442[_0x4e9dc5(0x129)]||_0x4e9dc5(0x14b));}},exports[a0_0x391e43(0xdc)]=function(_0x17929b,_0x2e4fae){const _0x9ca344=a0_0x391e43,_0x1e611d=url['parse'](_0x17929b[_0x9ca344(0x178)]);if(!_0x1e611d||!_0x1e611d[_0x9ca344(0x163)])return onError(_0x17929b,_0x2e4fae,_0x9ca344(0x16e));const _0x23ee0a=querystring['parse'](_0x1e611d['query']);if(!_0x23ee0a['market'])return onError(_0x17929b,_0x2e4fae,_0x9ca344(0x14c));const _0x20b5f4=_0x23ee0a[_0x9ca344(0x158)]['split']('-');if(!_0x20b5f4||!_0x20b5f4['length']||_0x20b5f4[_0x9ca344(0xdd)]!=0x2)return onError(_0x17929b,_0x2e4fae,'Bad\x20request.\x20Parameter\x20\x22market\x22\x20is\x20invalid');g_constants['dbTables']['coins'][_0x9ca344(0x115)](_0x9ca344(0x164),_0x9ca344(0x184)+_0x20b5f4[0x1]+'\x22','',(_0x33499a,_0x1eb585)=>{const _0x4333b2=_0x9ca344;try{if(_0x33499a||!_0x1eb585)throw new Error(_0x33499a&&_0x33499a[_0x4333b2(0x129)]?_0x33499a[_0x4333b2(0x129)]:_0x4333b2(0xe1));if(!_0x1eb585[_0x4333b2(0xdd)])throw new Error(_0x4333b2(0xcf)+_0x20b5f4[0x1]+'\x20not\x20found');const _0x37b3e3=_0x1eb585[0x0],_0x550174=_0x4333b2(0xc5)+escape(_0x37b3e3['name'])+'\x22';g_constants[_0x4333b2(0x11f)]['history']['selectAll']('ROWID\x20AS\x20id,\x20*',_0x550174,_0x4333b2(0xfc),(_0x105c92,_0x2bfa59)=>{const _0x3030f9=_0x4333b2;if(_0x105c92||!_0x2bfa59)return onError(_0x17929b,_0x2e4fae,_0x105c92&&_0x105c92['message']?_0x105c92['message']:'unknown\x20database\x20error');let _0x326cef=[];for(var _0x258541=0x0;_0x258541<_0x2bfa59[_0x3030f9(0xdd)];_0x258541++){const _0x47f198=new Date(_0x2bfa59[_0x258541][_0x3030f9(0x147)]*0x1),_0x2a6b12={'Id':_0x2bfa59[_0x258541]['id'],'TimeStamp':new Date(_0x47f198)[_0x3030f9(0x103)]()['slice'](0x0,-0x1),'Quantity':_0x2bfa59[_0x258541][_0x3030f9(0x12f)]*0x1,'Price':_0x2bfa59[_0x258541][_0x3030f9(0x15a)]*0x1,'Total':_0x2bfa59[_0x258541][_0x3030f9(0x15a)]*_0x2bfa59[_0x258541][_0x3030f9(0x12f)],'FillType':_0x3030f9(0x12c),'OrderType':_0x2bfa59[_0x258541]['buysell']['toUpperCase']()};_0x326cef[_0x3030f9(0x124)](_0x2a6b12);}return onSuccess(_0x17929b,_0x2e4fae,_0x326cef);});}catch(_0x6a3b3d){return onError(_0x17929b,_0x2e4fae,_0x6a3b3d['message']);}});};async function SubmitOrder(_0x273cbe,_0x1a0d18,_0xff8961){const _0x5812ba=a0_0x391e43;try{const _0x5d3b15=url['parse'](_0x273cbe['url']);if(!_0x5d3b15||!_0x5d3b15['query']||!_0x273cbe['headers'][_0x5812ba(0x132)])throw new Error(_0x5812ba(0x16e));const _0x5d6d4f=querystring[_0x5812ba(0x11b)](_0x5d3b15['query']);if(!_0x5d6d4f[_0x5812ba(0x131)]||!_0x5d6d4f[_0x5812ba(0x156)]||!_0x5d6d4f[_0x5812ba(0x158)]||!_0x5d6d4f[_0x5812ba(0x162)]||!_0x5d6d4f['rate'])throw new Error(_0x5812ba(0x10b));const _0xaabf56=_0x5d6d4f[_0x5812ba(0x158)][_0x5812ba(0x173)]('-');if(!_0xaabf56[_0x5812ba(0xdd)]||_0xaabf56[_0x5812ba(0xdd)]!=0x2)throw new Error(_0x5812ba(0x14f));const _0xe351b1=await utils['GetCoinFromTicker'](_0xaabf56[0x1]);if(!_0xe351b1||!_0xe351b1['name'])return onError(_0x273cbe,_0x1a0d18,_0x5812ba(0x112));var _0x414462=_0x273cbe['protocol']+_0x5812ba(0xdb)+_0x273cbe[_0x5812ba(0xdf)](_0x5812ba(0x141))+_0x273cbe[_0x5812ba(0xcc)];CheckAPIkey(_0x5d6d4f[_0x5812ba(0x131)],_0x273cbe[_0x5812ba(0xfa)][_0x5812ba(0x132)],_0x414462,_0x472e58=>{const _0x5111b2=_0x5812ba;try{if(_0x472e58['success']==![])throw new Error(_0x472e58['message']);if(_0x472e58[_0x5111b2(0xd4)]['write']==0x0)throw new Error(_0x5111b2(0x183));const _0x2c0c8e={'session_status':{'active':!![],'id':_0x472e58[_0x5111b2(0xd4)][_0x5111b2(0x17f)]},'body':{'order':_0xff8961,'coin':_0xe351b1[_0x5111b2(0x148)],'amount':_0x5d6d4f[_0x5111b2(0x162)],'price':_0x5d6d4f[_0x5111b2(0xda)]},'callback':function(_0x4f0f2e){const _0x805adb=_0x5111b2;if(!_0x4f0f2e||_0x4f0f2e[_0x805adb(0xce)]!=!![])return onError(_0x273cbe,_0x1a0d18,_0x4f0f2e?_0x4f0f2e[_0x805adb(0x129)]||'Unexpected\x20error':_0x805adb(0x104));return onSuccess(_0x273cbe,_0x1a0d18,_0x4f0f2e[_0x805adb(0x117)]);}};orders[_0x5111b2(0xf8)](_0x2c0c8e,null);}catch(_0x5ddfa6){return onError(_0x273cbe,_0x1a0d18,_0x5ddfa6[_0x5111b2(0x129)]);}});}catch(_0x336e63){return onError(_0x273cbe,_0x1a0d18,_0x336e63['message']);}}exports[a0_0x391e43(0xe9)]=function(_0x5681b7,_0x5244f1){const _0x25a547=a0_0x391e43;SubmitOrder(_0x5681b7,_0x5244f1,_0x25a547(0x16b));},exports[a0_0x391e43(0xd0)]=function(_0x37fc07,_0x1d0387){const _0x20d0ae=a0_0x391e43;SubmitOrder(_0x37fc07,_0x1d0387,_0x20d0ae(0x119));},exports[a0_0x391e43(0xc7)]=function(_0xbe46f9,_0x17f42c){const _0x4cd423=a0_0x391e43;try{const _0x34eaa2=url['parse'](_0xbe46f9[_0x4cd423(0x178)]);if(!_0x34eaa2||!_0x34eaa2[_0x4cd423(0x163)]||!_0xbe46f9[_0x4cd423(0xfa)][_0x4cd423(0x132)])throw new Error('Bad\x20request');const _0x24d4b8=querystring[_0x4cd423(0x11b)](_0x34eaa2['query']);if(!_0x24d4b8[_0x4cd423(0x131)]||!_0x24d4b8[_0x4cd423(0x156)]||!_0x24d4b8[_0x4cd423(0x169)])throw _0x4cd423(0xe8);if(!_0x24d4b8['uuid'][_0x4cd423(0xdd)])throw _0x4cd423(0xc2);var _0x1a95a2=_0xbe46f9[_0x4cd423(0x107)]+'://'+_0xbe46f9[_0x4cd423(0xdf)](_0x4cd423(0x141))+_0xbe46f9[_0x4cd423(0xcc)];CheckAPIkey(_0x24d4b8[_0x4cd423(0x131)],_0xbe46f9['headers'][_0x4cd423(0x132)],_0x1a95a2,_0x5b6803=>{const _0xcf90cd=_0x4cd423;try{if(_0x5b6803['success']==![])throw new Error(_0x5b6803[_0xcf90cd(0x129)]);if(_0x5b6803['key'][_0xcf90cd(0xe6)]==0x0)throw new Error(_0xcf90cd(0x183));g_constants[_0xcf90cd(0x11f)][_0xcf90cd(0x182)][_0xcf90cd(0x115)](_0xcf90cd(0x13d),_0xcf90cd(0x181)+_0x24d4b8[_0xcf90cd(0x169)]+'\x22','',(_0x5dd54d,_0x4e48d0)=>{const _0x3ddeb9=_0xcf90cd;if(_0x5dd54d||!_0x4e48d0||!_0x4e48d0[_0x3ddeb9(0xdd)])return onError(_0xbe46f9,_0x17f42c,_0x3ddeb9(0xeb));const _0x410e84={'session_status':{'active':!![],'id':_0x5b6803[_0x3ddeb9(0xd4)][_0x3ddeb9(0x17f)]},'body':{'orderID':_0x4e48d0[0x0]['id']},'callback':function(_0x2b2eef){const _0x9c5cb7=_0x3ddeb9;if(!_0x2b2eef||_0x2b2eef[_0x9c5cb7(0xce)]!=!![])return onError(_0xbe46f9,_0x17f42c,_0x2b2eef?_0x2b2eef[_0x9c5cb7(0x129)]||'Unexpected\x20error':_0x9c5cb7(0x104));return onSuccess(_0xbe46f9,_0x17f42c,_0x2b2eef[_0x9c5cb7(0x117)]);}};orders[_0x3ddeb9(0x130)](_0x410e84,null);});}catch(_0x47a218){return onError(_0xbe46f9,_0x17f42c,_0x47a218[_0xcf90cd(0x129)]);}});}catch(_0x5695e6){return onError(_0xbe46f9,_0x17f42c,_0x5695e6[_0x4cd423(0x129)]);}},exports[a0_0x391e43(0x140)]=async function(_0xb1f965,_0x2ac67e){const _0x27cb44=a0_0x391e43;try{const _0xa82563=url['parse'](_0xb1f965[_0x27cb44(0x178)]);if(!_0xa82563||!_0xa82563[_0x27cb44(0x163)]||!_0xb1f965[_0x27cb44(0xfa)][_0x27cb44(0x132)])throw new Error('Bad\x20request');const _0x510900=querystring['parse'](_0xa82563[_0x27cb44(0x163)]);if(!_0x510900[_0x27cb44(0x131)]||!_0x510900[_0x27cb44(0x156)]||!_0x510900[_0x27cb44(0x158)])throw new Error(_0x27cb44(0xd8));const _0x2e84a4=_0x510900[_0x27cb44(0x158)][_0x27cb44(0x173)]('-');if(!_0x2e84a4[_0x27cb44(0xdd)]||_0x2e84a4[_0x27cb44(0xdd)]!=0x2)throw new Error('Bad\x20request.\x20Parameter\x20currency\x20is\x20invalid.');const _0x5bd6e6=await utils[_0x27cb44(0x12b)](_0x2e84a4[0x1]);if(!_0x5bd6e6||!_0x5bd6e6[_0x27cb44(0x148)])return onError(_0xb1f965,_0x2ac67e,_0x27cb44(0x112));var _0x5b32a8=_0xb1f965[_0x27cb44(0x107)]+_0x27cb44(0xdb)+_0xb1f965[_0x27cb44(0xdf)](_0x27cb44(0x141))+_0xb1f965[_0x27cb44(0xcc)];CheckAPIkey(_0x510900['apikey'],_0xb1f965[_0x27cb44(0xfa)][_0x27cb44(0x132)],_0x5b32a8,_0x17f747=>{const _0x55fa90=_0x27cb44;try{if(_0x17f747[_0x55fa90(0x16d)]==![])throw new Error(_0x17f747[_0x55fa90(0x129)]);if(_0x17f747[_0x55fa90(0xd4)]['read']==0x0)throw new Error(_0x55fa90(0xe5));orders[_0x55fa90(0x14e)](_0x17f747[_0x55fa90(0xd4)][_0x55fa90(0x17f)],[_0x5bd6e6],_0x59fa7b=>{const _0x45532b=_0x55fa90;if(_0x59fa7b[_0x45532b(0xce)]!=!![])return onError(_0xb1f965,_0x2ac67e,_0x59fa7b[_0x45532b(0x129)]);let _0x36ee08=[];for(var _0x22096a=0x0;_0x22096a<_0x59fa7b[_0x45532b(0x117)][_0x45532b(0xdd)];_0x22096a++){const _0x23b422=new Date(_0x59fa7b[_0x45532b(0x117)][_0x22096a][_0x45532b(0x147)]*0x1),_0x5e37b5={'OrderUuid':_0x59fa7b[_0x45532b(0x117)][_0x22096a]['uuid'],'Exchange':_0x510900['market'],'QuantityRemaining':_0x59fa7b[_0x45532b(0x117)][_0x22096a]['amount'],'Price':_0x59fa7b['data'][_0x22096a]['price'],'Opened':_0x23b422[_0x45532b(0x161)](),'OrderType':_0x59fa7b[_0x45532b(0x117)][_0x22096a][_0x45532b(0x175)]};_0x36ee08[_0x45532b(0x124)](_0x5e37b5);}return onSuccess(_0xb1f965,_0x2ac67e,_0x36ee08);});}catch(_0xcfa868){return onError(_0xb1f965,_0x2ac67e,_0xcfa868[_0x55fa90(0x129)]);}});}catch(_0x2534f5){return onError(_0xb1f965,_0x2ac67e,_0x2534f5['message']);}},exports['onAccountGetBalance']=async function(_0x141eb1,_0xbb9e0){const _0x91264=a0_0x391e43;try{const _0x4918e4=url['parse'](_0x141eb1[_0x91264(0x178)]);if(!_0x4918e4||!_0x4918e4['query']||!_0x141eb1['headers'][_0x91264(0x132)])throw new Error('Bad\x20request');const _0x33bc3f=querystring['parse'](_0x4918e4[_0x91264(0x163)]);if(!_0x33bc3f[_0x91264(0x131)]||!_0x33bc3f[_0x91264(0x156)]||!_0x33bc3f[_0x91264(0xed)])throw new Error('Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20currency)\x20not\x20found.');const _0x474f7a=await utils['GetCoinFromTicker'](_0x33bc3f[_0x91264(0xed)]);if(!_0x474f7a||!_0x474f7a[_0x91264(0x148)])return onError(_0x141eb1,_0xbb9e0,_0x91264(0x112));var _0x474b98=_0x141eb1[_0x91264(0x107)]+'://'+_0x141eb1[_0x91264(0xdf)]('host')+_0x141eb1[_0x91264(0xcc)];CheckAPIkey(_0x33bc3f['apikey'],_0x141eb1[_0x91264(0xfa)][_0x91264(0x132)],_0x474b98,_0x546b80=>{const _0x4eccb0=_0x91264;try{if(_0x546b80[_0x4eccb0(0x16d)]==![])throw new Error(_0x546b80['message']);if(_0x546b80['key'][_0x4eccb0(0x125)]==0x0)throw new Error(_0x4eccb0(0xe5));wallet['GetCoinWallet'](null,_0x546b80[_0x4eccb0(0xd4)][_0x4eccb0(0x17f)],_0x474f7a,_0x499fc0=>{const _0x99056a=_0x4eccb0;try{const _0x2581a5=JSON[_0x99056a(0x11b)](_0x499fc0)[_0x99056a(0x129)],_0x12786a=(_0x2581a5[_0x99056a(0x105)]||0x0)*0x1,_0x3e9270=(_0x2581a5[_0x99056a(0x143)]||0x0)*0x1,_0x37ff14=(_0x2581a5[_0x99056a(0x11e)]||0x0)*0x1;return onSuccess(_0x141eb1,_0xbb9e0,{'Currency':_0x2581a5[_0x99056a(0xec)][_0x99056a(0x142)],'Balance':utils['roundDown'](_0x12786a+_0x3e9270+_0x37ff14),'Available':_0x12786a[_0x99056a(0x121)](0x8)*0x1,'Pending':_0x3e9270[_0x99056a(0x121)](0x8)*0x1});}catch(_0x992665){return onError(_0x141eb1,_0xbb9e0,_0x992665[_0x99056a(0x129)]);}});}catch(_0x40c7d8){return onError(_0x141eb1,_0xbb9e0,_0x40c7d8[_0x4eccb0(0x129)]);}});}catch(_0x195fcf){return onError(_0x141eb1,_0xbb9e0,_0x195fcf[_0x91264(0x129)]);}},exports[a0_0x391e43(0x126)]=function(_0x230e5d,_0x5eeebb){const _0x27641f=a0_0x391e43;utils[_0x27641f(0xf2)](_0x230e5d,_0x561589=>{const _0x3dac94=_0x27641f;if(!_0x561589['active'])return onError(_0x230e5d,_0x5eeebb,_0x3dac94(0x16c));g_constants[_0x3dac94(0x11f)]['apikeys'][_0x3dac94(0x115)]('*','userid=\x22'+_0x561589['id']+'\x22','',(_0x5c1f0e,_0x26e68d)=>{const _0x359ef1=_0x3dac94;if(_0x5c1f0e)return onError(_0x230e5d,_0x5eeebb,_0x5c1f0e[_0x359ef1(0x129)]||_0x359ef1(0xd1));if(_0x26e68d&&_0x26e68d[_0x359ef1(0xdd)]>0x9)return onError(_0x230e5d,_0x5eeebb,_0x359ef1(0x102));const _0x4b9d00=utils[_0x359ef1(0xf7)](Math['random']()*0x2710+_0x359ef1(0xe7)+Date[_0x359ef1(0x155)]())[_0x359ef1(0xe4)](0x0,0x28),_0x54dbbf=utils[_0x359ef1(0xf7)](Math[_0x359ef1(0x123)]()*0x2710+_0x359ef1(0xe7)+Date[_0x359ef1(0x155)]())[_0x359ef1(0xe4)](0x0,0x28);g_constants[_0x359ef1(0x11f)][_0x359ef1(0x15d)][_0x359ef1(0x10f)](_0x561589['id'],_0x4b9d00,0x0,0x0,0x0,JSON['stringify']({'privKey':_0x54dbbf}),_0x2f511a=>{const _0x2e0655=_0x359ef1;if(_0x2f511a)return onError(_0x230e5d,_0x5eeebb,_0x2f511a[_0x2e0655(0x129)]||'Database\x20Insert\x20error');onSuccess(_0x230e5d,_0x5eeebb,{'pub':_0x4b9d00,'priv':_0x54dbbf});});});});},exports['onDeleteAPIkey']=function(_0x3e1e3f,_0x43da8c){const _0x1de564=a0_0x391e43;utils[_0x1de564(0xf2)](_0x3e1e3f,_0x1613e1=>{const _0x6d74bf=_0x1de564;if(!_0x1613e1[_0x6d74bf(0x171)])return onError(_0x3e1e3f,_0x43da8c,_0x6d74bf(0x16c));if(!_0x3e1e3f[_0x6d74bf(0x13f)]||!_0x3e1e3f['body'][_0x6d74bf(0xd4)])return onError(_0x3e1e3f,_0x43da8c,'Bad\x20Request');g_constants[_0x6d74bf(0x11f)][_0x6d74bf(0x15d)][_0x6d74bf(0x179)]('userid=\x22'+_0x1613e1['id']+_0x6d74bf(0x135)+escape(_0x3e1e3f['body'][_0x6d74bf(0xd4)])+'\x22'),onSuccess(_0x3e1e3f,_0x43da8c,0x0);});},exports['onListAPIkeys']=function(_0xeddad,_0x3f53c9){const _0x3d68f4=a0_0x391e43;utils[_0x3d68f4(0xf2)](_0xeddad,_0x1dce53=>{const _0x36666c=_0x3d68f4;if(!_0x1dce53[_0x36666c(0x171)])return onError(_0xeddad,_0x3f53c9,'User\x20not\x20logged');g_constants['dbTables']['apikeys'][_0x36666c(0x115)]('*',_0x36666c(0x111)+_0x1dce53['id']+'\x22','',(_0x53f001,_0x17a357)=>{const _0x3e964a=_0x36666c;if(_0x53f001)return onError(_0xeddad,_0x3f53c9,'Database\x20error');if(!_0x17a357||!_0x17a357[_0x3e964a(0xdd)])return onSuccess(_0xeddad,_0x3f53c9,[]);onSuccess(_0xeddad,_0x3f53c9,_0x17a357);});});},exports['onEditAPIkey']=function(_0x4589b2,_0x2b05b8){utils['GetSessionStatus'](_0x4589b2,_0x3369df=>{const _0x4ca43e=a0_0x2207;if(!_0x3369df[_0x4ca43e(0x171)])return onError(_0x4589b2,_0x2b05b8,_0x4ca43e(0x16c));if(!_0x4589b2[_0x4ca43e(0x13f)]||!_0x4589b2[_0x4ca43e(0x13f)]['key'])return onError(_0x4589b2,_0x2b05b8,'Bad\x20Request');const _0x79efa0=_0x4ca43e(0x133)+_0x3de1e3(_0x4589b2[_0x4ca43e(0x13f)][_0x4ca43e(0x125)])+_0x4ca43e(0x14a)+_0x3de1e3(_0x4589b2[_0x4ca43e(0x13f)][_0x4ca43e(0xe6)])+_0x4ca43e(0x146)+_0x3de1e3(_0x4589b2[_0x4ca43e(0x13f)][_0x4ca43e(0x145)])+'\x22';g_constants[_0x4ca43e(0x11f)][_0x4ca43e(0x15d)][_0x4ca43e(0xca)](_0x79efa0,_0x4ca43e(0x111)+_0x3369df['id']+_0x4ca43e(0x135)+escape(_0x4589b2[_0x4ca43e(0x13f)][_0x4ca43e(0xd4)])+'\x22',_0x265f8e=>{if(_0x265f8e)return onError(_0x4589b2,_0x2b05b8,'Database\x20update\x20error');onSuccess(_0x4589b2,_0x2b05b8,0x0);});});function _0x3de1e3(_0x5c83d3){const _0x1b353b=a0_0x2207;if(!utils[_0x1b353b(0x144)](_0x5c83d3))return 0x0;if(_0x5c83d3*0x1<0x0||_0x5c83d3*0x1>0x1)return 0x0;return _0x5c83d3;}},exports[a0_0x391e43(0x16f)]=async function(_0x3b21fa,_0x3c2cca){const _0x57c3c4=a0_0x391e43,_0xef498d=url[_0x57c3c4(0x11b)](_0x3b21fa[_0x57c3c4(0x178)]);if(!_0xef498d||!_0xef498d[_0x57c3c4(0x163)]||!_0x3b21fa['headers'][_0x57c3c4(0x132)])return onError(_0x3b21fa,_0x3c2cca,_0x57c3c4(0x16e));const _0xf9030b=querystring[_0x57c3c4(0x11b)](_0xef498d[_0x57c3c4(0x163)]);if(!_0xf9030b[_0x57c3c4(0x131)]||!_0xf9030b[_0x57c3c4(0x156)]||!_0xf9030b[_0x57c3c4(0xed)])return onError(_0x3b21fa,_0x3c2cca,_0x57c3c4(0x170));const _0x5dcd3a=utils[_0x57c3c4(0x12b)](_0xf9030b[_0x57c3c4(0xed)]);if(!_0x5dcd3a||!_0x5dcd3a[_0x57c3c4(0x148)])return onError(_0x3b21fa,_0x3c2cca,_0x57c3c4(0x112));var _0x302486=_0x3b21fa[_0x57c3c4(0x107)]+_0x57c3c4(0xdb)+_0x3b21fa[_0x57c3c4(0xdf)]('host')+_0x3b21fa[_0x57c3c4(0xcc)];CheckAPIkey(_0xf9030b[_0x57c3c4(0x131)],_0x3b21fa[_0x57c3c4(0xfa)]['apisign'],_0x302486,_0x194cd8=>{const _0x314c4e=_0x57c3c4;try{if(_0x194cd8['success']==![])throw new Error(_0x194cd8[_0x314c4e(0x129)]);if(_0x194cd8[_0x314c4e(0xd4)][_0x314c4e(0x125)]==0x0)throw new Error('apikey\x20disabled\x20for\x20read');wallet[_0x314c4e(0xcb)](_0x194cd8[_0x314c4e(0xd4)]['userid'],_0x5dcd3a[_0x314c4e(0x148)],_0x316ae3=>{const _0x350738=_0x314c4e;if(_0x316ae3['result']!='success'||!_0x316ae3[_0x350738(0x117)])return onError(_0x3b21fa,_0x3c2cca,_0x316ae3[_0x350738(0x129)]);onSuccess(_0x3b21fa,_0x3c2cca,{'Currency':_0x5dcd3a[_0x350738(0x142)],'Address':_0x316ae3[_0x350738(0x117)]});});}catch(_0x55eb2c){return onError(_0x3b21fa,_0x3c2cca,_0x55eb2c[_0x314c4e(0x129)]);}});},exports[a0_0x391e43(0x157)]=function(_0x2f7b53,_0x3ce4b7){const _0x350d38=a0_0x391e43;try{const _0x2defe3=url['parse'](_0x2f7b53[_0x350d38(0x178)]);if(!_0x2defe3||!_0x2defe3[_0x350d38(0x163)]||!_0x2f7b53[_0x350d38(0xfa)][_0x350d38(0x132)])throw new Error(_0x350d38(0x16e));const _0x39068c=querystring[_0x350d38(0x11b)](_0x2defe3[_0x350d38(0x163)]);if(!_0x39068c[_0x350d38(0x131)]||!_0x39068c['nonce']||!_0x39068c['uuid'])throw new Error(_0x350d38(0xe8));if(!_0x39068c[_0x350d38(0x169)]['length'])throw new Error(_0x350d38(0xc2));var _0x851c3a=_0x2f7b53[_0x350d38(0x107)]+'://'+_0x2f7b53[_0x350d38(0xdf)](_0x350d38(0x141))+_0x2f7b53[_0x350d38(0xcc)];CheckAPIkey(_0x39068c[_0x350d38(0x131)],_0x2f7b53[_0x350d38(0xfa)][_0x350d38(0x132)],_0x851c3a,_0x4d5139=>{const _0x561708=_0x350d38;try{if(_0x4d5139[_0x561708(0x16d)]==![])throw new Error(_0x4d5139[_0x561708(0x129)]);if(_0x4d5139[_0x561708(0xd4)][_0x561708(0x125)]==0x0)throw new Error(_0x561708(0xe5));g_constants[_0x561708(0x11f)][_0x561708(0x182)][_0x561708(0x115)](_0x561708(0x15e),_0x561708(0x181)+_0x39068c['uuid']+'\x22','',(_0x549ecd,_0x589fcb)=>{const _0x12a184=_0x561708;if(_0x549ecd||!_0x589fcb||!_0x589fcb[_0x12a184(0xdd)])return onError(_0x2f7b53,_0x3ce4b7,'Order\x20with\x20this\x20uuid\x20not\x20found');g_constants[_0x12a184(0x11f)][_0x12a184(0x176)][_0x12a184(0x115)](_0x12a184(0x11c),'name=\x22'+_0x589fcb[0x0][_0x12a184(0xec)]+_0x12a184(0xf9)+_0x589fcb[0x0]['price_pair']+'\x22','',(_0x24e997,_0xa4bd7d)=>{const _0x4ca42b=_0x12a184;if(_0x24e997||!_0xa4bd7d||_0xa4bd7d[_0x4ca42b(0xdd)]!=0x2)return onError(_0x2f7b53,_0x3ce4b7,_0x4ca42b(0x113));const _0x430192=_0xa4bd7d[0x0][_0x4ca42b(0x148)]==_0x589fcb[0x0][_0x4ca42b(0xde)]?_0xa4bd7d[0x0]['ticker']:_0xa4bd7d[0x1][_0x4ca42b(0x142)],_0x2a369e=_0xa4bd7d[0x0][_0x4ca42b(0x148)]==_0x589fcb[0x0]['price_pair']?_0xa4bd7d[0x1][_0x4ca42b(0x142)]:_0xa4bd7d[0x0]['ticker'],_0x56e158=new Date(_0x589fcb[0x0][_0x4ca42b(0x147)]*0x1);return onSuccess(_0x2f7b53,_0x3ce4b7,{'OrderUuid':_0x589fcb[0x0]['uuid']||0x0,'Exchange':_0x430192+'-'+_0x2a369e,'QuantityRemaining':_0x589fcb[0x0][_0x4ca42b(0x17c)],'Price':_0x589fcb[0x0][_0x4ca42b(0x15a)],'Opened':new Date(_0x56e158)[_0x4ca42b(0x103)]()[_0x4ca42b(0x118)](0x0,-0x1),'IsOpen':!![]});});});}catch(_0x167c97){return onError(_0x2f7b53,_0x3ce4b7,_0x167c97[_0x561708(0x129)]);}});}catch(_0x30f527){return onError(_0x2f7b53,_0x3ce4b7,_0x30f527[_0x350d38(0x129)]);}},exports[a0_0x391e43(0x127)]=function(_0x33d992,_0xf8a5b3){const _0x8b5ee6=a0_0x391e43;onError(_0x33d992,_0xf8a5b3,_0x8b5ee6(0x128));},exports[a0_0x391e43(0x14d)]=function(_0x1109ed,_0x37d064){return exports['onAccountWithdraw'](_0x1109ed,_0x37d064);},exports[a0_0x391e43(0xc3)]=function(_0x5cd8f6,_0x4ee53e){const _0x44df9e=a0_0x391e43,_0x2aa3d6=url[_0x44df9e(0x11b)](_0x5cd8f6[_0x44df9e(0x178)]);if(!_0x2aa3d6||!_0x2aa3d6['query'])return onError(_0x5cd8f6,_0x4ee53e,_0x44df9e(0x16e));const _0x4e295d=querystring['parse'](_0x2aa3d6['query']);if(!_0x4e295d['coupon'])return onError(_0x5cd8f6,_0x4ee53e,_0x44df9e(0xef));var _0x18b52c=_0x5cd8f6[_0x44df9e(0x107)]+'://'+_0x5cd8f6[_0x44df9e(0xdf)](_0x44df9e(0x141))+_0x5cd8f6[_0x44df9e(0xcc)];CheckAPIkey(_0x4e295d['apikey']||0x0,_0x5cd8f6[_0x44df9e(0xfa)][_0x44df9e(0x132)]||0x0,_0x18b52c,_0x4be805=>{const _0x1d927c=_0x44df9e;try{if(_0x4be805[_0x1d927c(0x16d)]==![])throw new Error(_0x4be805['message']);if(_0x4be805[_0x1d927c(0xd4)][_0x1d927c(0x145)]==0x0)throw new Error(_0x1d927c(0x159));wallet[_0x1d927c(0x106)](_0x4be805[_0x1d927c(0xd4)]['userid'],_0x4e295d['coupon'],_0x1d26d7=>{const _0x95ea55=_0x1d927c;if(!_0x1d26d7||_0x1d26d7[_0x95ea55(0xce)]!=!![])return onError(_0x5cd8f6,_0x4ee53e,_0x1d26d7[_0x95ea55(0x129)]&&_0x1d26d7['message']['length']?_0x1d26d7[_0x95ea55(0x129)]:_0x95ea55(0xff));return utils['renderJSON'](_0x5cd8f6,_0x4ee53e,_0x1d26d7);});}catch(_0x1fafd8){utils[_0x1d927c(0xf2)](_0x5cd8f6,_0xb244ac=>{const _0x1d0347=_0x1d927c;if(!_0xb244ac[_0x1d0347(0x171)])return onError(_0x5cd8f6,_0x4ee53e,_0x1d0347(0x16c));wallet[_0x1d0347(0x106)](_0xb244ac['id'],_0x4e295d[_0x1d0347(0x149)],_0x1c997f=>{const _0xf98e39=_0x1d0347;if(!_0x1c997f||_0x1c997f[_0xf98e39(0xce)]!=!![])return onError(_0x5cd8f6,_0x4ee53e,_0x1c997f[_0xf98e39(0x129)]&&_0x1c997f[_0xf98e39(0x129)][_0xf98e39(0xdd)]?_0x1c997f[_0xf98e39(0x129)]:_0xf98e39(0xff));return utils['renderJSON'](_0x5cd8f6,_0x4ee53e,_0x1c997f);});});}});},exports[a0_0x391e43(0x177)]=async function(_0x90d9d4,_0x4f2440){const _0x11f863=a0_0x391e43,_0x4fb255=url[_0x11f863(0x11b)](_0x90d9d4[_0x11f863(0x178)]);if(!_0x4fb255||!_0x4fb255[_0x11f863(0x163)]||!_0x90d9d4[_0x11f863(0xfa)][_0x11f863(0x132)])return onError(_0x90d9d4,_0x4f2440,_0x11f863(0x16e));const _0x40376e=querystring[_0x11f863(0x11b)](_0x4fb255['query']);if(!_0x40376e[_0x11f863(0x162)]||!_0x40376e[_0x11f863(0xed)])return onError(_0x90d9d4,_0x4f2440,'Bad\x20request.\x20Required\x20parameter\x20(quantity\x20or\x20currency)\x20not\x20found.');if(!utils['isNumeric'](_0x40376e[_0x11f863(0x162)]))return onError(_0x90d9d4,_0x4f2440,_0x11f863(0x13e));if(_0x40376e['quantity']<0.00001)return onError(_0x90d9d4,_0x4f2440,_0x11f863(0x116));const _0x4b5a49=await utils['GetCoinFromTicker'](_0x40376e['currency']);if(!_0x4b5a49||!_0x4b5a49[_0x11f863(0x148)])return onError(_0x90d9d4,_0x4f2440,_0x11f863(0x112));var _0x4f2000=_0x90d9d4[_0x11f863(0x107)]+_0x11f863(0xdb)+_0x90d9d4[_0x11f863(0xdf)](_0x11f863(0x141))+_0x90d9d4[_0x11f863(0xcc)];if(!_0x40376e[_0x11f863(0x131)]||!_0x40376e['nonce']){if(!_0x90d9d4[_0x11f863(0x13f)]||!_0x90d9d4[_0x11f863(0x13f)]['password'])return onError(_0x90d9d4,_0x4f2440,_0x11f863(0xf1));return wallet[_0x11f863(0x109)](_0x90d9d4,_0x4f2440);}CheckAPIkey(_0x40376e[_0x11f863(0x131)],_0x90d9d4[_0x11f863(0xfa)][_0x11f863(0x132)],_0x4f2000,_0x8516d8=>{const _0x50e68f=_0x11f863;try{if(_0x8516d8['success']==![])throw new Error(_0x8516d8[_0x50e68f(0x129)]);if(_0x8516d8[_0x50e68f(0xd4)][_0x50e68f(0x145)]==0x0)throw new Error(_0x50e68f(0x159));_0x40376e[_0x50e68f(0x150)]?wallet[_0x50e68f(0x154)](_0x8516d8[_0x50e68f(0xd4)][_0x50e68f(0x17f)],_0x40376e['address'],_0x40376e[_0x50e68f(0x162)],_0x4b5a49[_0x50e68f(0x148)],_0xe0f70=>{const _0x171e64=_0x50e68f;if(_0xe0f70['error'])return onError(_0x90d9d4,_0x4f2440,_0xe0f70[_0x171e64(0x129)]);return onSuccess(_0x90d9d4,_0x4f2440,{'uuid':_0xe0f70[_0x171e64(0x117)]});}):wallet[_0x50e68f(0x15c)](_0x8516d8[_0x50e68f(0xd4)][_0x50e68f(0x17f)],_0x40376e[_0x50e68f(0x162)],_0x4b5a49['name'],_0x515231=>{const _0x460053=_0x50e68f;if(_0x515231['error'])return onError(_0x90d9d4,_0x4f2440,_0x515231[_0x460053(0x129)]);return utils['renderJSON'](_0x90d9d4,_0x4f2440,_0x515231);});}catch(_0x286e38){utils[_0x50e68f(0xf2)](_0x90d9d4,_0x2ca722=>{const _0x166273=_0x50e68f;if(!_0x2ca722[_0x166273(0x171)]||_0x2ca722['id']!=0x1)return onError(_0x90d9d4,_0x4f2440,'This\x20operation\x20is\x20allowed\x20for\x20root\x20only!');wallet[_0x166273(0x15c)](_0x8516d8[_0x166273(0xd4)][_0x166273(0x17f)],_0x40376e[_0x166273(0x162)],_0x4b5a49[_0x166273(0x148)],_0x474327=>{const _0x3532c0=_0x166273;if(_0x474327[_0x3532c0(0x139)])return onError(_0x90d9d4,_0x4f2440,_0x474327[_0x3532c0(0x129)]);return utils[_0x3532c0(0xfb)](_0x90d9d4,_0x4f2440,_0x474327);});});}},_0x90d9d4);};function CheckAPIkey(_0x394fa5,_0x3fdcdb,_0x3ea82b,_0x22f2c3,_0x3629fc){const _0x59d5a5=a0_0x391e43;g_constants[_0x59d5a5(0x11f)][_0x59d5a5(0x15d)]['selectAll']('*',_0x59d5a5(0x101)+escape(_0x394fa5)+'\x22','',(_0x3eaa58,_0x8c1c4b)=>{const _0x2587c1=_0x59d5a5;if(_0x3eaa58||!_0x8c1c4b||!_0x8c1c4b['length'])return _0x22f2c3({'success':![],'message':_0x2587c1(0xf5),'key':{'read':0x0,'write':0x0,'withdraw':0x0}});try{const _0x2974d7=JSON[_0x2587c1(0x11b)](unescape(_0x8c1c4b[0x0][_0x2587c1(0xf4)]));if(!_0x2974d7[_0x2587c1(0xcd)])return _0x22f2c3({'success':![],'message':_0x2587c1(0xf6),'read':0x0,'write':0x0,'withdraw':0x0});const _0x254a3d=sig(_0x3ea82b,_0x2974d7[_0x2587c1(0xcd)]);if(_0x254a3d!=_0x3fdcdb)return _0x22f2c3({'success':![],'message':_0x2587c1(0x137)});return _0x22f2c3({'success':!![],'message':'','key':_0x8c1c4b[0x0]});}catch(_0x58a3f0){return _0x22f2c3({'success':![],'message':_0x58a3f0[_0x2587c1(0x129)]});}});}function a0_0x5d95(){const _0x2a5ab1=['coin','currency','count_buy','Bad\x20request.\x20Required\x20parameter\x20(coupon)\x20not\x20found.','period=','Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20password)\x20not\x20found.','GetSessionStatus','Bad\x20request.\x20Parameter\x20\x22market\x22\x20is\x20invalid','info','apikey\x20not\x20found','apisecret\x20not\x20found','Encrypt','SubmitOrder','\x22\x20OR\x20name=\x22','headers','renderJSON','ORDER\x20BY\x20time*1\x20DESC\x20LIMIT\x20200','onGetExchangeSummary','Bad\x20request.\x20Period\x20is\x20not\x20numeric','Redeem\x20error','querystring','key=\x22','Max\x20number\x20api\x20keys\x20exceeded','toISOString','Unexpected\x20error','balance','RedeemCoupon','protocol','High','onWithdraw','stringify','Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20market\x20or\x20quantity\x20or\x20rate)\x20not\x20found.','../users/wallet.js','2014-02-13T00:00:00','TRADE_MAIN_COIN','insert','TRADE_MAIN_COIN_TICKER','userid=\x22','Coin\x20ticker\x20not\x20found','Coin\x20name\x20error','count(price*1)\x20as\x20count_sell,\x20min(price*1)\x20AS\x20Ask','selectAll','Bad\x20request.\x20quantity\x20<\x200.00001\x20(is\x20too\x20low)','data','slice','sell','Volume','parse','name,\x20ticker','487656ipxNcS','hold','dbTables','268KgZupk','toFixed','GetMarketData','random','push','read','onGenerateAPIkey','onAccountGetOrderHistory','getorderhistory\x20under\x20construction','message','OpenSellOrders','GetCoinFromTicker','FILL','both','createHmac','fromSellerToBuyer','CloseOrder','apikey','apisign','read=\x22','type','\x22\x20AND\x20key=\x22','341jFtAho','bad\x20api\x20signature','onGetLastMarketData','error','\x22\x20AND\x20time*1\x20>\x20(','7026MirWDk','Bid','ROWID\x20AS\x20id','Bad\x20request.\x20quantity\x20is\x20not\x20numeric\x20value','body','onMarketGetOpenOrders','host','ticker','awaiting','isNumeric','withdraw','\x22,\x20withdraw=\x22','time','name','coupon','\x22,\x20write=\x22','unknown\x20error','Bad\x20request.\x20Parameter\x20\x22market\x22\x20not\x20found','onCreateCoupon','GetUserOrders','Bad\x20request.\x20Parameter\x20currency\x20is\x20invalid.','address','3230249djMlMQ','../users/trade','sha512','ProcessWithdraw','now','nonce','onAccountGetOrder','market','apikey\x20disabled\x20for\x20withdraw','price','9KqkLpF','ProcessWithdrawToCoupon','apikeys','ROWID\x20AS\x20id,\x20*','Ask','\x27\x20AND\x20amount*price>0\x20AND\x20buysell=\x27sell\x27)','toUTCString','quantity','query','name,\x20ticker,\x20info','\x20queryStr=','*1\x20-\x20','../users/orders.js','GetMarkets','uuid','../../utils.js','buy','User\x20not\x20logged','success','Bad\x20request','onAccountGetDepositAddress','Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20currency)\x20not\x20found.','active','6FFEZVW','split','utf-8','buysell','coins','onAccountWithdraw','url','delete','share','2386070mcurXb','amount','../../constants.js','*3600*1000)','userid','867345hBkMJL','uuid=\x22','orders','apikey\x20disabled\x20for\x20write','ticker=\x22','GROUP\x20BY\x20coin','GetLastCoinHistory','Bad\x20uuid','onRedeemCoupon','Database\x20error','coin=\x22','(coin=\x27','onMarketCancel','false','period','update','GetAccountAddress','originalUrl','privKey','result','ticker\x20','onMarketSelllimit','Database\x20Select\x20error','timeCached','OpenBuyOrders','key','64gdCzHc','count(price*1)\x20as\x20count_buy,\x20max(price*1)\x20AS\x20Bid','onGetMarkets','Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20market)\x20not\x20found.','Last','rate','://','onGetMarketHistory','length','price_pair','get','12712CesIHB','unknown\x20database\x20error','Decrypt','GetAllOrders','substr','apikey\x20disabled\x20for\x20read','write','and','Bad\x20request.\x20Required\x20parameter\x20(apikey\x20or\x20nonce\x20or\x20uuid)\x20not\x20found.','onMarketBuylimit','icon','Order\x20with\x20this\x20uuid\x20not\x20found'];a0_0x5d95=function(){return _0x2a5ab1;};return a0_0x5d95();}