'use strict';const _0x2e6fd6=_0x599e;function _0x3d48(){const _0x1ed4af=['WyKiN','EhDnu','get','Increment','MUgKS','LJzUz','getClass\x20if\x20exists','qXift','stage','2vCpMJh','kAksZ','executionStages','4576540RselhX','test','vJmJm','http://localhost:8378/1/classes/MyObject/','xUjXR','../lib/request','executionStats','QWwzD','_rawFind','FETCH','DLpKN','should\x20delete\x20field\x20without\x20index','TGTOg','npsRb','array','admin','findOneAndUpdate','applicationId','code','kuyFP','should\x20not\x20use\x20transaction\x20in\x20a\x20batch\x20with\x20no\x20transaction\x20option\x20sent','arGBN','16gGYGnL','should\x20use\x20transaction\x20in\x20a\x20batch\x20with\x20transaction\x20=\x20true','wifJO','pjLHV','KnAGO','eYekg','deleteFields','_p_aPointer','qwerty','NLOLf','925395swYGZy','NUMgm','MyClass','NwYAe','tan','insertOne','toHaveBeenCalled','9gJiKgv','setCLP','watch\x20_SCHEMA','EKgyd','__type','VLWbj','AFzOo','tLfGV','MjijQ','MRyzi','Xfvxn','update','handles\x20creating\x20an\x20array,\x20object,\x20date','should\x20change','vyRDG','env','loIRD','fail','kogSU','nnyVX','mongodb','nvNBt','forEach','mongodb://user!with%40%2B%20symbols:password!with%40%2B%20symbols@localhost:1234/parse','vcvvQ','createObject','HcBgb','handles\x20nested\x20dates\x20in\x20array\x20','args','_id','stringify','maxTimeMS\x20should\x20not\x20affect\x20fast\x20queries\x20','lVLNR','BpnMM','handleShutdown,\x20close\x20connection','name','RbtaT','application/json','toEqual','getClass\x20if\x20not\x20exists','all','calls','mRQVu','dZvab','dtLsk','set','xcRSx','catch','YHmsu','resolve','subdoc','JustThePointer','preserves\x20replica\x20sets','fMzWa','947616Chklgv','JustThePointer$qwerty','PUT','COLLSCAN','2016-05-26T20:55:01.154Z','vwhgL','case_insensitive_username','/1/classes/MyObject/','kptHM','username','VEysl','and','schemaCache','../lib/TestUtils','pbOEN','uvAjt','toBeRejectedWith','ZBXwR','aitaQ','mongodb://localhost:27017/parseServerMongoAdapterTestDatabase','Bunny','pUCdX','GMELQ','EVFIu','UpyQL','object','kBEur','rest','destroyAllDataPermanently','date','connections','log','length','first','ZdSxW','jXRek','Date','XIIjM','fiueb','SXseY','mdNBA','toBeGreaterThan','toBeUndefined','User','abcde','default','then','Object','YMMVP','AVRmu','SetOnInsert','_onchange','595882vRVqDC','mKbPW','signUp','jteTo','message','replicaset','ejGjG','uLNSB','transaction','save','uuid','MyObject','zmhPz','prototype','foo','wSIKI','LrKzi','Dlvyw','hjkwf','password','ZxNMW','myValue','naLyh','Bugs','iso','ensureIndex','any','handleShutdown','bar','GrDKs','iyZDP','createClass','41784dLLgUk','XGguF','Schema','Dddvo','auto-escapes\x20symbols\x20in\x20auth\x20information','vDluh','IMHne','Foo','dAxNG','should\x20not\x20use\x20transactions\x20when\x20using\x20SDK\x20delete','current','TRANSACTION_COMMITTED','<5.1\x20||\x20>=6','fhswG','serverStatus','cLRbo','toMatch','state','MONGODB_TOPOLOGY','PdkWw','should\x20use\x20index\x20for\x20caseInsensitive\x20query','HnYdG','MABpH','wqNxc','CHpwt','find','toHaveBeenCalledWith','objectId','Array','database','count','WpUKW','BlsPU','sLbfF','../lib/Config','WvUMq','oHAtc','Stuff','FClUn','toBeTrue','lwfWY','transactions','YtSwH','ePqCa','uMpnQ','suLGD','_User','MLtOF','operation\x20exceeded\x20time\x20limit','deleteAllClasses','className','HbnTG','clan','APointerDarkly','Number','should\x20not\x20use\x20transactions\x20when\x20using\x20SDK\x20insert','should\x20not\x20use\x20transaction\x20in\x20a\x20batch\x20with\x20transaction\x20=\x20false','caCvD','getClass','callThrough','toBe','hrDgi','28909iXHIlH','UzoEj','Gfzwv','wzLfj','classLevelPermissions','udznW','stores\x20pointers\x20with\x20a\x20_p_\x20prefix','returnValue','gTQjy','lRrhY','amount','Uxmtg','toBeDefined','handles\x20updating\x20a\x20single\x20object\x20with\x20array,\x20object\x20date','LsLXt','mongodb://user!with@+\x20symbols:password!with@+\x20symbols@localhost:1234/parse','adapter','http://localhost:8378/1/batch','Find\x20succeeded\x20despite\x20taking\x20too\x20long!','upserts\x20with\x20$setOnInsert','XWBnp','OQWyB','519825RjMoxk','frXbH','MongoStorageAdapter','Query','tOJlb','toBeFalsy','POST','TbhbD','connect','session','RwPlU','stores\x20objectId\x20in\x20_id','OjbyX','dttnQ','aPoUS','sRnlt','string','tbalq','bugs','VnZJH','mongodb://test:testpass@ds056315-a0.mongolab.com:59325,ds059315-a1.mongolab.com:59315/testDBname?replicaSet=rs-ds059415','AdZXO','fields'];_0x3d48=function(){return _0x1ed4af;};return _0x3d48();}(function(_0x83ff62,_0x494d58){const _0x5bbb9f=_0x599e,_0x34d312=_0x83ff62();while(!![]){try{const _0x5e912e=-parseInt(_0x5bbb9f(0x1ff))/0x1*(-parseInt(_0x5bbb9f(0x235))/0x2)+-parseInt(_0x5bbb9f(0x215))/0x3+-parseInt(_0x5bbb9f(0x1c1))/0x4+-parseInt(_0x5bbb9f(0x130))/0x5+parseInt(_0x5bbb9f(0x16d))/0x6+parseInt(_0x5bbb9f(0x1a1))/0x7*(-parseInt(_0x5bbb9f(0x126))/0x8)+parseInt(_0x5bbb9f(0x137))/0x9*(parseInt(_0x5bbb9f(0x238))/0xa);if(_0x5e912e===_0x494d58)break;else _0x34d312['push'](_0x34d312['shift']());}catch(_0x348db3){_0x34d312['push'](_0x34d312['shift']());}}}(_0x3d48,0x19be7));const MongoStorageAdapter=require('../lib/Adapters/Storage/Mongo/MongoStorageAdapter')[_0x2e6fd6(0x19a)],{MongoClient,Collection}=require(_0x2e6fd6(0x14b)),databaseURI=_0x2e6fd6(0x180),request=require(_0x2e6fd6(0x23d)),Config=require(_0x2e6fd6(0x1e3)),TestUtils=require(_0x2e6fd6(0x17a)),fakeClient={'s':{'options':{'dbName':null}},'db':()=>null};function _0x599e(_0x3ff974,_0x4ed742){const _0x3d4898=_0x3d48();return _0x599e=function(_0x599e2d,_0x5b209c){_0x599e2d=_0x599e2d-0x119;let _0x416bde=_0x3d4898[_0x599e2d];return _0x416bde;},_0x599e(_0x3ff974,_0x4ed742);}describe_only_db('mongo')(_0x2e6fd6(0x217),()=>{const _0x1d6250=_0x2e6fd6,_0x168264={'lwfWY':function(_0x40f3d0,_0x1422c3,_0x220193){return _0x40f3d0(_0x1422c3,_0x220193);},'jXRek':'connect','cLRbo':'mongodb://user!with@+\x20symbols:password!with@+\x20symbols@localhost:1234/parse','Dlvyw':function(_0x4f17f5,_0x52c9c7){return _0x4f17f5(_0x52c9c7);},'UpyQL':_0x1d6250(0x14e),'ZxNMW':_0x1d6250(0x229),'kptHM':_0x1d6250(0x1c8),'nDOzu':_0x1d6250(0x199),'Gfzwv':function(_0x2056eb,_0x33542b){return _0x2056eb===_0x33542b;},'OQWyB':_0x1d6250(0x211),'fMzWa':function(_0x7ceb78,_0x3b4eb7){return _0x7ceb78(_0x3b4eb7);},'YMMVP':'MongoServerError','AVRmu':function(_0x3e7bcd,_0x530f41){return _0x3e7bcd(_0x530f41);},'pjLHV':_0x1d6250(0x1f1),'UgbHs':function(_0x22e336,_0x2453b2){return _0x22e336(_0x2453b2);},'HnYdG':_0x1d6250(0x225),'RbtaT':'Pointer','Dddvo':'APointerDarkly','qXift':'JustThePointer','naLyh':'object','kuyFP':function(_0x2886cf,_0xb10f89){return _0x2886cf(_0xb10f89);},'npsRb':'Object','VnZJH':_0x1d6250(0x1bd),'nFbJJ':_0x1d6250(0x134),'RwPlU':function(_0xbe72bd,_0x1cdf41){return _0xbe72bd(_0x1cdf41);},'lVLNR':function(_0x200be2,_0x3720c6){return _0x200be2 instanceof _0x3720c6;},'eYekg':function(_0x5b9521,_0x4ebb9e){return _0x5b9521(_0x4ebb9e);},'YtSwH':function(_0x3f02f7,_0x550eaa){return _0x3f02f7 instanceof _0x550eaa;},'EhDnu':function(_0x4d61b4,_0x4538d6){return _0x4d61b4(_0x4538d6);},'EVFIu':_0x1d6250(0x1dd),'AdZXO':'Date','hrDgi':function(_0x475fab,_0x766207){return _0x475fab instanceof _0x766207;},'VLWbj':function(_0x5d5667,_0x5365a0){return _0x5d5667===_0x5365a0;},'frXbH':_0x1d6250(0x12f),'pbOEN':_0x1d6250(0x132),'QWwzD':_0x1d6250(0x22f),'RqpmA':function(_0x3158d7,_0xc7f0b3){return _0x3158d7(_0xc7f0b3);},'ZBXwR':function(_0x41c480,_0x209385){return _0x41c480(_0x209385);},'sRnlt':function(_0x165707,_0x44b16a){return _0x165707(_0x44b16a);},'ejGjG':function(_0x2c6aab,_0x401152){return _0x2c6aab(_0x401152);},'fhswG':function(_0x1b70e8,_0x544cd3){return _0x1b70e8!==_0x544cd3;},'zLurK':_0x1d6250(0x14a),'LAyGb':function(_0x4a1ee8,_0xa79096){return _0x4a1ee8 instanceof _0xa79096;},'vJmJm':function(_0x5bd614,_0x2d3de8){return _0x5bd614(_0x2d3de8);},'caCvD':function(_0x2fc114){return _0x2fc114();},'wifJO':_0x1d6250(0x194),'uLNSB':function(_0x588164,_0xadb081){return _0x588164===_0xadb081;},'aOKlx':_0x1d6250(0x22c),'mdNBA':'Client\x20must\x20be\x20connected\x20before\x20running\x20operations','OjbyX':function(_0x38fb30,_0x7dcf74){return _0x38fb30(_0x7dcf74);},'wSIKI':_0x1d6250(0x1b8),'TbhbD':_0x1d6250(0x1ef),'vwhgL':'username','CHpwt':_0x1d6250(0x227),'dAxNG':function(_0x7f8e0b,_0x46e751){return _0x7f8e0b(_0x46e751);},'Uxmtg':function(_0x1e5747,_0x5663e9){return _0x1e5747(_0x5663e9);},'WvUMq':_0x1d6250(0x1ac),'NUMgm':'test','hYmLK':function(_0x3246f2,_0x3318de){return _0x3246f2(_0x3318de);},'kogSU':function(_0x3c5d44,_0x36013b){return _0x3c5d44(_0x36013b);},'XWBnp':_0x1d6250(0x120),'fLXAF':_0x1d6250(0x21b),'ZIDiH':function(_0x525b4a,_0x46d917){return _0x525b4a+_0x46d917;},'jTLwz':'myValue','mRQVu':function(_0x56fc9b,_0x35d81e){return _0x56fc9b(_0x35d81e);},'YHmsu':_0x1d6250(0x210),'uKZtm':_0x1d6250(0x16f),'NwYAe':_0x1d6250(0x174),'Xfvxn':function(_0x401c56,_0x98911e){return _0x401c56(_0x98911e);},'udznW':function(_0x5814d0,_0x16e9c5,_0x43f679){return _0x5814d0(_0x16e9c5,_0x43f679);},'AFzOo':function(_0x390e1a,_0x4f1dbd){return _0x390e1a===_0x4f1dbd;},'vDluh':function(_0xb937f3,_0x222519,_0x3abe39){return _0xb937f3(_0x222519,_0x3abe39);},'dtLsk':_0x1d6250(0x1ed),'KnAGO':_0x1d6250(0x15c),'MxFmB':_0x1d6250(0x188),'tbalq':function(_0x1c1bed,_0x3b2156,_0x1ab776){return _0x1c1bed(_0x3b2156,_0x1ab776);},'FLNml':_0x1d6250(0x1f9),'wzLfj':function(_0x5832db,_0x57f623,_0x26f438){return _0x5832db(_0x57f623,_0x26f438);},'UwiMx':'should\x20not\x20use\x20transaction\x20in\x20a\x20put\x20request','HbnTG':'should\x20not\x20use\x20transactions\x20when\x20using\x20SDK\x20update','sLbfF':_0x1d6250(0x1ca),'LJzUz':_0x1d6250(0x1a0),'XGguF':function(_0x36f525,_0x9ceac3,_0x5ab32d){return _0x36f525(_0x9ceac3,_0x5ab32d);},'zqGSw':'doesn\x27t\x20double\x20escape\x20already\x20URI-encoded\x20information','IMHne':_0x1d6250(0x220),'vyRDG':'find\x20succeeds\x20when\x20query\x20is\x20within\x20maxTimeMS','LPfBb':function(_0x9ad30d,_0x248c6b,_0x476ead){return _0x9ad30d(_0x248c6b,_0x476ead);},'XIIjM':function(_0x11fcf3,_0x5b14cd,_0x495217){return _0x11fcf3(_0x5b14cd,_0x495217);},'arGBN':function(_0xb57d90,_0x3bc1b5,_0x4695fa){return _0xb57d90(_0x3bc1b5,_0x4695fa);},'sDZSd':_0x1d6250(0x232),'dMexC':function(_0xbf589,_0x167629,_0x1b143e){return _0xbf589(_0x167629,_0x1b143e);},'oHAtc':function(_0x25f313,_0x24483d,_0x3d7c76){return _0x25f313(_0x24483d,_0x3d7c76);},'loIRD':_0x1d6250(0x1a6),'UzoEj':_0x1d6250(0x1ea),'FClUn':_0x1d6250(0x139)};_0x168264[_0x1d6250(0x221)](beforeEach,async()=>{const _0x5c46de=_0x1d6250;await new MongoStorageAdapter({'uri':databaseURI})[_0x5c46de(0x1f2)](),Config[_0x5c46de(0x22e)](Parse[_0x5c46de(0x121)])[_0x5c46de(0x179)]['clear']();}),it(_0x1d6250(0x1c5),()=>{const _0x5cc519=_0x1d6250;_0x168264[_0x5cc519(0x1e9)](spyOn,MongoClient,_0x168264[_0x5cc519(0x190)])[_0x5cc519(0x178)][_0x5cc519(0x206)](Promise['resolve'](fakeClient)),new MongoStorageAdapter({'uri':_0x168264[_0x5cc519(0x1d0)]})['connect'](),_0x168264[_0x5cc519(0x1b2)](expect,MongoClient[_0x5cc519(0x21d)])[_0x5cc519(0x1db)](_0x168264[_0x5cc519(0x185)],jasmine[_0x5cc519(0x1bb)](Object));}),_0x168264[_0x1d6250(0x1c2)](it,_0x168264['zqGSw'],()=>{const _0x2b4a8b=_0x1d6250;spyOn(MongoClient,_0x168264[_0x2b4a8b(0x190)])[_0x2b4a8b(0x178)][_0x2b4a8b(0x206)](Promise[_0x2b4a8b(0x168)](fakeClient)),new MongoStorageAdapter({'uri':'mongodb://user!with%40%2B%20symbols:password!with%40%2B%20symbols@localhost:1234/parse'})[_0x2b4a8b(0x21d)](),expect(MongoClient[_0x2b4a8b(0x21d)])[_0x2b4a8b(0x1db)](_0x2b4a8b(0x14e),jasmine['any'](Object));}),it(_0x1d6250(0x16b),()=>{const _0x1ec2f9=_0x1d6250;spyOn(MongoClient,'connect')[_0x1ec2f9(0x178)][_0x1ec2f9(0x206)](Promise[_0x1ec2f9(0x168)](fakeClient)),new MongoStorageAdapter({'uri':_0x168264[_0x1ec2f9(0x1b5)]})[_0x1ec2f9(0x21d)](),_0x168264[_0x1ec2f9(0x1b2)](expect,MongoClient[_0x1ec2f9(0x21d)])[_0x1ec2f9(0x1db)](_0x1ec2f9(0x229),jasmine[_0x1ec2f9(0x1bb)](Object));}),it(_0x168264[_0x1d6250(0x1c7)],_0x4e8e1b=>{const _0x154ea0=_0x1d6250,_0x428a6c={'PdkWw':function(_0x57e3c4,_0x45c85c){const _0x4d667a=_0x599e;return _0x168264[_0x4d667a(0x1b2)](_0x57e3c4,_0x45c85c);},'WVflU':_0x154ea0(0x134),'DjmRr':function(_0x3948c4,_0x33acb8){return _0x3948c4!==_0x33acb8;},'amksH':'aitaQ','EetNA':_0x154ea0(0x199)},_0x2b822a=new MongoStorageAdapter({'uri':databaseURI});_0x2b822a[_0x154ea0(0x150)](_0x168264[_0x154ea0(0x175)],{'fields':{}},{'objectId':_0x168264['nDOzu']})[_0x154ea0(0x19b)](()=>_0x2b822a[_0x154ea0(0x240)](_0x154ea0(0x1c8),{}))[_0x154ea0(0x19b)](_0x237347=>{const _0x3b232f=_0x154ea0,_0x37e44b={'gTQjy':function(_0x4b5be7,_0x133d13){const _0x2bff38=_0x599e;return _0x428a6c[_0x2bff38(0x1d4)](_0x4b5be7,_0x133d13);},'HcBgb':'bar','zmhPz':_0x428a6c['WVflU'],'lRrhY':_0x3b232f(0x1f5),'BlsPU':'MyClass','fiueb':function(_0x4e19bc,_0x51a151){const _0x39843d=_0x3b232f;return _0x428a6c[_0x39843d(0x1d4)](_0x4e19bc,_0x51a151);},'TGTOg':function(_0x23df10){return _0x23df10();}};if(_0x428a6c['DjmRr'](_0x428a6c['amksH'],_0x3b232f(0x17f))){const _0x4ba3f1=new _0x45395e({'uri':_0x405242}),_0x1ab48e={'fields':{'subdoc':{'type':_0x3b232f(0x19c)}}},_0x239c16={'subdoc':{'foo':_0x3b232f(0x1bd),'wu':_0x37e44b[_0x3b232f(0x1ad)]}};_0x4ba3f1[_0x3b232f(0x150)](_0x3b232f(0x132),_0x1ab48e,_0x239c16)[_0x3b232f(0x19b)](()=>_0x4ba3f1['_rawFind']('MyClass',{}))[_0x3b232f(0x19b)](_0x3ef7c7=>{const _0x268992=_0x3b232f;_0x37e44b[_0x268992(0x207)](_0x107b24,_0x3ef7c7[_0x268992(0x18d)])[_0x268992(0x15d)](0x1);const _0x3b8826=_0x3ef7c7[0x0];_0x37e44b['gTQjy'](_0x139155,typeof _0x3b8826['subdoc'])['toBe'](_0x268992(0x186)),_0x37e44b[_0x268992(0x207)](_0x1bb4e8,_0x3b8826['subdoc']['foo'])['toBe'](_0x37e44b[_0x268992(0x151)]),_0x37e44b[_0x268992(0x207)](_0x4a2a6c,_0x3b8826[_0x268992(0x169)]['wu'])['toBe'](_0x37e44b[_0x268992(0x1ad)]);const _0x35b10e={'subdoc.wu':_0x37e44b['lRrhY']};return _0x4ba3f1['findOneAndUpdate'](_0x37e44b[_0x268992(0x1e1)],_0x1ab48e,{},_0x35b10e);})[_0x3b232f(0x19b)](()=>_0x4ba3f1['_rawFind'](_0x3b232f(0x132),{}))[_0x3b232f(0x19b)](_0x1ddccc=>{const _0x131876=_0x3b232f;_0x5bd2a7(_0x1ddccc[_0x131876(0x18d)])[_0x131876(0x15d)](0x1);const _0x529d64=_0x1ddccc[0x0];_0x3538f1(typeof _0x529d64[_0x131876(0x169)])['toBe'](_0x131876(0x186)),_0x37e44b[_0x131876(0x193)](_0x2480ee,_0x529d64[_0x131876(0x169)][_0x131876(0x1af)])[_0x131876(0x1fd)](_0x37e44b[_0x131876(0x151)]),_0x583180(_0x529d64[_0x131876(0x169)]['wu'])['toBe'](_0x37e44b[_0x131876(0x208)]),_0x37e44b[_0x131876(0x11c)](_0x1ad1a9);});}else{expect(_0x237347[_0x3b232f(0x18d)])[_0x3b232f(0x15d)](0x1);const _0x395c6a=_0x237347[0x0];_0x428a6c['PdkWw'](expect,_0x395c6a['_id'])['toEqual'](_0x428a6c['EetNA']),expect(_0x395c6a['objectId'])[_0x3b232f(0x197)](),_0x4e8e1b();}});}),_0x168264[_0x1d6250(0x1c6)](it,_0x168264[_0x1d6250(0x145)],_0x554d06=>{const _0x38e8cb=_0x1d6250;if(_0x168264[_0x38e8cb(0x201)](_0x38e8cb(0x1e0),_0x38e8cb(0x1e0))){const _0x231045=0xfa,_0x211787=new MongoStorageAdapter({'uri':databaseURI,'mongoOptions':{'maxTimeMS':_0x231045}});_0x211787['createObject'](_0x168264[_0x38e8cb(0x175)],{'fields':{}},{'objectId':_0x38e8cb(0x199)})[_0x38e8cb(0x19b)](()=>_0x211787[_0x38e8cb(0x240)](_0x38e8cb(0x1c8),{'$where':'sleep('+_0x231045/0x2+')'}))[_0x38e8cb(0x19b)](()=>_0x554d06(),_0x3ed50f=>{const _0x137b2f=_0x38e8cb;_0x554d06[_0x137b2f(0x148)](_0x137b2f(0x156)+_0x3ed50f);});}else _0x1d1669=!![],_0x3e10b8(_0x41df1b[_0x38e8cb(0x153)][0x2][_0x38e8cb(0x21e)])[_0x38e8cb(0x21a)]();}),it('find\x20fails\x20when\x20query\x20exceeds\x20maxTimeMS',_0x3ac859=>{const _0x57755f=_0x1d6250,_0x13ef47=0xfa,_0x563796=new MongoStorageAdapter({'uri':databaseURI,'mongoOptions':{'maxTimeMS':_0x13ef47}});_0x563796[_0x57755f(0x150)](_0x168264[_0x57755f(0x175)],{'fields':{}},{'objectId':_0x168264['nDOzu']})[_0x57755f(0x19b)](()=>_0x563796[_0x57755f(0x240)](_0x57755f(0x1c8),{'$where':'sleep('+_0x13ef47*0x2+')'}))[_0x57755f(0x19b)](()=>{const _0xd60749=_0x57755f;_0x3ac859['fail'](_0x168264[_0xd60749(0x214)]);},_0x1c548d=>{const _0x3f4bb1=_0x57755f;_0x168264[_0x3f4bb1(0x16c)](expect,_0x1c548d[_0x3f4bb1(0x15a)])[_0x3f4bb1(0x15d)](_0x168264[_0x3f4bb1(0x19d)]),_0x168264[_0x3f4bb1(0x19e)](expect,_0x1c548d[_0x3f4bb1(0x122)])[_0x3f4bb1(0x15d)](0x32),expect(_0x1c548d[_0x3f4bb1(0x1a5)])[_0x3f4bb1(0x1d1)](_0x168264[_0x3f4bb1(0x129)]),_0x3ac859();});}),_0x168264['LPfBb'](it,_0x1d6250(0x205),_0x50fed9=>{const _0x3ccea7=_0x1d6250,_0x802b51={'objectId':_0x3ccea7(0x1bd),'aPointer':{'__type':_0x168264[_0x3ccea7(0x15b)],'className':_0x3ccea7(0x16a),'objectId':_0x3ccea7(0x12e)}},_0x172345=new MongoStorageAdapter({'uri':databaseURI});_0x172345[_0x3ccea7(0x150)](_0x168264[_0x3ccea7(0x1c4)],{'fields':{'objectId':{'type':'String'},'aPointer':{'type':_0x168264[_0x3ccea7(0x15b)],'targetClass':_0x168264[_0x3ccea7(0x233)]}}},_0x802b51)[_0x3ccea7(0x19b)](()=>_0x172345['_rawFind'](_0x3ccea7(0x1f6),{}))[_0x3ccea7(0x19b)](_0x53508c=>{const _0x45435e=_0x3ccea7;expect(_0x53508c[_0x45435e(0x18d)])['toEqual'](0x1);const _0x4c2931=_0x53508c[0x0];expect(typeof _0x4c2931[_0x45435e(0x154)])[_0x45435e(0x15d)](_0x45435e(0x225)),_0x168264['UgbHs'](expect,typeof _0x4c2931['_p_aPointer'])[_0x45435e(0x15d)](_0x168264[_0x45435e(0x1d6)]),expect(_0x4c2931[_0x45435e(0x12d)])[_0x45435e(0x15d)](_0x45435e(0x16e)),expect(_0x4c2931['aPointer'])['toBeUndefined'](),_0x50fed9();});}),it('handles\x20object\x20and\x20subdocument',_0x105355=>{const _0xfbf8e0=_0x1d6250,_0x2a0f53={'iyZDP':function(_0x30775f,_0x2c86ec){return _0x30775f(_0x2c86ec);},'MABpH':_0x168264[_0xfbf8e0(0x1b7)],'MjijQ':'MyClass','vcvvQ':function(_0x1b123d,_0x36567d){const _0x2a92c4=_0xfbf8e0;return _0x168264[_0x2a92c4(0x123)](_0x1b123d,_0x36567d);},'hjkwf':'clan'},_0x1e35f9=new MongoStorageAdapter({'uri':databaseURI}),_0xb90c95={'fields':{'subdoc':{'type':_0x168264[_0xfbf8e0(0x11d)]}}},_0x5993b9={'subdoc':{'foo':_0x168264[_0xfbf8e0(0x228)],'wu':_0x168264['nFbJJ']}};_0x1e35f9[_0xfbf8e0(0x150)](_0xfbf8e0(0x132),_0xb90c95,_0x5993b9)[_0xfbf8e0(0x19b)](()=>_0x1e35f9[_0xfbf8e0(0x240)](_0xfbf8e0(0x132),{}))['then'](_0x56a15e=>{const _0x4e99f9=_0xfbf8e0;expect(_0x56a15e[_0x4e99f9(0x18d)])['toEqual'](0x1);const _0x177e7d=_0x56a15e[0x0];_0x2a0f53[_0x4e99f9(0x1bf)](expect,typeof _0x177e7d[_0x4e99f9(0x169)])[_0x4e99f9(0x1fd)](_0x2a0f53[_0x4e99f9(0x1d7)]),expect(_0x177e7d[_0x4e99f9(0x169)][_0x4e99f9(0x1af)])['toBe'](_0x4e99f9(0x1bd)),_0x2a0f53[_0x4e99f9(0x1bf)](expect,_0x177e7d[_0x4e99f9(0x169)]['wu'])[_0x4e99f9(0x1fd)](_0x4e99f9(0x134));const _0x111b84={'subdoc.wu':'clan'};return _0x1e35f9['findOneAndUpdate'](_0x2a0f53[_0x4e99f9(0x13f)],_0xb90c95,{},_0x111b84);})[_0xfbf8e0(0x19b)](()=>_0x1e35f9[_0xfbf8e0(0x240)](_0xfbf8e0(0x132),{}))[_0xfbf8e0(0x19b)](_0x1f9cae=>{const _0x650ffb=_0xfbf8e0;expect(_0x1f9cae['length'])[_0x650ffb(0x15d)](0x1);const _0x1d4330=_0x1f9cae[0x0];_0x2a0f53[_0x650ffb(0x14f)](expect,typeof _0x1d4330['subdoc'])[_0x650ffb(0x1fd)](_0x2a0f53[_0x650ffb(0x1d7)]),expect(_0x1d4330['subdoc'][_0x650ffb(0x1af)])[_0x650ffb(0x1fd)]('bar'),expect(_0x1d4330[_0x650ffb(0x169)]['wu'])['toBe'](_0x2a0f53[_0x650ffb(0x1b3)]),_0x105355();});}),it(_0x1d6250(0x143),_0x3d1c00=>{const _0x1878a5=_0x1d6250,_0x81440b={'mKbPW':function(_0x1aa990){return _0x1aa990();},'xcRSx':function(_0x2dd7c6){return _0x2dd7c6();}},_0x14feee=new MongoStorageAdapter({'uri':databaseURI}),_0x4f8a07={'array':[0x1,0x2,0x3],'object':{'foo':_0x1878a5(0x1bd)},'date':{'__type':'Date','iso':'2016-05-26T20:55:01.154Z'}},_0x59a3c1={'fields':{'array':{'type':_0x168264[_0x1878a5(0x184)]},'object':{'type':_0x168264[_0x1878a5(0x11d)]},'date':{'type':_0x168264[_0x1878a5(0x22a)]}}};_0x14feee[_0x1878a5(0x150)](_0x1878a5(0x132),_0x59a3c1,_0x4f8a07)[_0x1878a5(0x19b)](()=>_0x14feee['_rawFind'](_0x1878a5(0x132),{}))[_0x1878a5(0x19b)](_0x5c8198=>{const _0xc594bc=_0x1878a5;_0x168264[_0xc594bc(0x21f)](expect,_0x5c8198[_0xc594bc(0x18d)])[_0xc594bc(0x15d)](0x1);const _0x1f1f83=_0x5c8198[0x0];return expect(_0x168264[_0xc594bc(0x157)](_0x1f1f83['array'],Array))['toBe'](!![]),expect(typeof _0x1f1f83[_0xc594bc(0x186)])[_0xc594bc(0x1fd)](_0x168264['naLyh']),expect(_0x168264[_0xc594bc(0x157)](_0x1f1f83[_0xc594bc(0x18a)],Date))[_0xc594bc(0x1fd)](!![]),_0x14feee[_0xc594bc(0x1da)]('MyClass',_0x59a3c1,{},{});})[_0x1878a5(0x19b)](_0x58b56c=>{const _0x31334d=_0x1878a5;_0x168264[_0x31334d(0x12b)](expect,_0x58b56c[_0x31334d(0x18d)])['toEqual'](0x1);const _0x3f6150=_0x58b56c[0x0];_0x168264['UgbHs'](expect,_0x168264[_0x31334d(0x1eb)](_0x3f6150[_0x31334d(0x11e)],Array))[_0x31334d(0x1fd)](!![]),_0x168264[_0x31334d(0x22d)](expect,typeof _0x3f6150[_0x31334d(0x186)])['toBe'](_0x168264[_0x31334d(0x1b7)]),expect(_0x3f6150[_0x31334d(0x18a)]['__type'])[_0x31334d(0x1fd)](_0x31334d(0x191)),_0x168264[_0x31334d(0x12b)](expect,_0x3f6150[_0x31334d(0x18a)][_0x31334d(0x1b9)])[_0x31334d(0x1fd)]('2016-05-26T20:55:01.154Z'),_0x3d1c00();})[_0x1878a5(0x166)](_0xabe7c0=>{const _0x1b2287=_0x1878a5;console[_0x1b2287(0x18c)](_0xabe7c0),_0x81440b[_0x1b2287(0x1a2)](fail),_0x81440b[_0x1b2287(0x165)](_0x3d1c00);});}),_0x168264[_0x1d6250(0x192)](it,'handles\x20nested\x20dates',async()=>{const _0x2dabd2=_0x1d6250;await new Parse[(_0x2dabd2(0x19c))](_0x2dabd2(0x132),{'foo':{'test':{'date':new Date()}},'bar':{'date':new Date()},'date':new Date()})[_0x2dabd2(0x1aa)]();const _0x2d20e8=Config[_0x2dabd2(0x22e)](Parse[_0x2dabd2(0x121)])[_0x2dabd2(0x1de)][_0x2dabd2(0x20f)],[_0x25e8ea]=await _0x2d20e8['_rawFind']('MyClass',{});expect(_0x168264[_0x2dabd2(0x1eb)](_0x25e8ea[_0x2dabd2(0x18a)],Date))[_0x2dabd2(0x1e8)](),_0x168264[_0x2dabd2(0x12b)](expect,_0x25e8ea['bar']['date']instanceof Date)[_0x2dabd2(0x1e8)](),_0x168264[_0x2dabd2(0x22d)](expect,_0x168264[_0x2dabd2(0x1fe)](_0x25e8ea['foo'][_0x2dabd2(0x239)][_0x2dabd2(0x18a)],Date))[_0x2dabd2(0x1e8)]();}),it(_0x1d6250(0x152),async()=>{const _0x54f5e5=_0x1d6250;if(_0x168264[_0x54f5e5(0x13c)](_0x168264['frXbH'],_0x168264[_0x54f5e5(0x216)])){await new Parse[(_0x54f5e5(0x19c))](_0x168264[_0x54f5e5(0x17b)],{'foo':{'test':{'date':[new Date()]}},'bar':{'date':[new Date()]},'date':[new Date()]})['save']();const _0x288c23=Config[_0x54f5e5(0x22e)](Parse['applicationId'])[_0x54f5e5(0x1de)][_0x54f5e5(0x20f)],[_0x1da285]=await _0x288c23[_0x54f5e5(0x240)](_0x168264[_0x54f5e5(0x17b)],{});_0x168264[_0x54f5e5(0x1b2)](expect,_0x168264[_0x54f5e5(0x1eb)](_0x1da285[_0x54f5e5(0x18a)][0x0],Date))['toBeTrue'](),_0x168264[_0x54f5e5(0x16c)](expect,_0x168264[_0x54f5e5(0x157)](_0x1da285['bar']['date'][0x0],Date))[_0x54f5e5(0x1e8)](),expect(_0x1da285[_0x54f5e5(0x1af)][_0x54f5e5(0x239)][_0x54f5e5(0x18a)][0x0]instanceof Date)[_0x54f5e5(0x1e8)]();const _0x414419=await new Parse[(_0x54f5e5(0x218))]('MyClass')[_0x54f5e5(0x18e)]({'useMasterKey':!![]});_0x168264['kuyFP'](expect,_0x168264[_0x54f5e5(0x1fe)](_0x414419[_0x54f5e5(0x22e)](_0x54f5e5(0x18a))[0x0],Date))[_0x54f5e5(0x1e8)](),expect(_0x414419[_0x54f5e5(0x22e)](_0x54f5e5(0x1bd))['date'][0x0]instanceof Date)['toBeTrue'](),expect(_0x168264['lVLNR'](_0x414419[_0x54f5e5(0x22e)](_0x54f5e5(0x1af))[_0x54f5e5(0x239)][_0x54f5e5(0x18a)][0x0],Date))[_0x54f5e5(0x1e8)]();}else _0x3dcabd(_0x5060cd,_0x168264['jXRek'])['and']['returnValue'](_0x3646a6[_0x54f5e5(0x168)](_0x1da97e)),new _0x14d3ce({'uri':_0x54f5e5(0x20e)})[_0x54f5e5(0x21d)](),_0x2050ad(_0x48f43b[_0x54f5e5(0x21d)])['toHaveBeenCalledWith']('mongodb://user!with%40%2B%20symbols:password!with%40%2B%20symbols@localhost:1234/parse',_0x2cf3f4[_0x54f5e5(0x1bb)](_0x159cd3));}),it(_0x1d6250(0x212),async()=>{const _0x548f7f=_0x1d6250,_0x5b9300=require(_0x548f7f(0x1ab)),_0x414ff5=_0x5b9300['v4'](),_0x1ee639=_0x5b9300['v4'](),_0x1e34ea={'className':_0x548f7f(0x132),'fields':{'x':{'type':_0x548f7f(0x1f7)},'count':{'type':_0x548f7f(0x1f7)}},'classLevelPermissions':{}},_0x225329=new Parse[(_0x548f7f(0x1c3))](_0x1e34ea[_0x548f7f(0x1f3)]);_0x225329[_0x548f7f(0x138)](_0x1e34ea[_0x548f7f(0x203)]),await _0x225329[_0x548f7f(0x1aa)]();const _0x567104={'x':0x1},_0x413476={'objectId':{'__op':_0x548f7f(0x19f),'amount':_0x414ff5},'count':{'__op':_0x168264[_0x548f7f(0x23f)],'amount':0x1}};await Parse['Server']['database'][_0x548f7f(0x142)](_0x168264[_0x548f7f(0x17b)],_0x567104,_0x413476,{'upsert':!![]}),_0x413476[_0x548f7f(0x1dc)][_0x548f7f(0x209)]=_0x1ee639,await Parse['Server'][_0x548f7f(0x1de)][_0x548f7f(0x142)]('MyClass',_0x567104,_0x413476,{'upsert':!![]});const _0x413ea0=await Parse['Server']['database'][_0x548f7f(0x1da)](_0x1e34ea[_0x548f7f(0x1f3)],{},{});_0x168264['RqpmA'](expect,_0x413ea0[_0x548f7f(0x18d)])[_0x548f7f(0x1fd)](0x1),_0x168264[_0x548f7f(0x17e)](expect,_0x413ea0[0x0][_0x548f7f(0x1dc)])['toBe'](_0x414ff5),expect(_0x413ea0[0x0][_0x548f7f(0x1df)])[_0x548f7f(0x1fd)](0x2),_0x168264['sRnlt'](expect,_0x413ea0[0x0]['x'])[_0x548f7f(0x1fd)](0x1);}),_0x168264[_0x1d6250(0x125)](it,_0x1d6250(0x20c),_0x6083c5=>{const _0x1eb57c=_0x1d6250,_0xd46031={'aqFNk':_0x168264[_0x1eb57c(0x228)],'xUjXR':_0x1eb57c(0x191),'kBEur':function(_0x281b11,_0x4d1a33){const _0x2c3924=_0x1eb57c;return _0x168264[_0x2c3924(0x23a)](_0x281b11,_0x4d1a33);},'LrKzi':function(_0x3cf56c,_0x170eb4){return _0x3cf56c instanceof _0x170eb4;}},_0x418dad=new MongoStorageAdapter({'uri':databaseURI}),_0x32f19c={'fields':{'array':{'type':_0x168264[_0x1eb57c(0x184)]},'object':{'type':_0x168264[_0x1eb57c(0x11d)]},'date':{'type':_0x168264['AdZXO']}}};_0x418dad[_0x1eb57c(0x150)](_0x168264['pbOEN'],_0x32f19c,{})[_0x1eb57c(0x19b)](()=>_0x418dad[_0x1eb57c(0x240)](_0x1eb57c(0x132),{}))[_0x1eb57c(0x19b)](_0x2b0edb=>{const _0x420daa=_0x1eb57c;expect(_0x2b0edb['length'])['toEqual'](0x1);const _0x47cb0b={'array':[0x1,0x2,0x3],'object':{'foo':_0xd46031['aqFNk']},'date':{'__type':_0xd46031[_0x420daa(0x23c)],'iso':_0x420daa(0x171)}},_0x515cf1={};return _0x418dad[_0x420daa(0x120)](_0x420daa(0x132),_0x32f19c,_0x515cf1,_0x47cb0b);})['then'](_0x244888=>{const _0x9c7244=_0x1eb57c,_0x14dfb8={'ePqCa':function(_0x178528,_0xc1f506){const _0x227bae=_0x599e;return _0x168264[_0x227bae(0x123)](_0x178528,_0xc1f506);},'uBjVA':function(_0xe0358c,_0x5990f5){return _0xe0358c(_0x5990f5);},'suLGD':function(_0x56b43e,_0x197b71){const _0x58fb1e=_0x599e;return _0x168264[_0x58fb1e(0x1a7)](_0x56b43e,_0x197b71);},'MRyzi':function(_0x5129b3,_0x16faa3){return _0x5129b3(_0x16faa3);},'wqNxc':'tan','BpnMM':_0x9c7244(0x1f5),'kAksZ':_0x168264[_0x9c7244(0x17b)]};if(_0x168264[_0x9c7244(0x1ce)](_0x168264['zLurK'],_0x9c7244(0x219))){const _0x24d296=_0x244888;return expect(_0x168264['LAyGb'](_0x24d296['array'],Array))[_0x9c7244(0x1fd)](!![]),expect(typeof _0x24d296[_0x9c7244(0x186)])[_0x9c7244(0x1fd)](_0x168264[_0x9c7244(0x1b7)]),_0x168264[_0x9c7244(0x19e)](expect,_0x24d296[_0x9c7244(0x18a)][_0x9c7244(0x13b)])[_0x9c7244(0x1fd)](_0x168264['AdZXO']),expect(_0x24d296[_0x9c7244(0x18a)][_0x9c7244(0x1b9)])[_0x9c7244(0x1fd)]('2016-05-26T20:55:01.154Z'),_0x418dad[_0x9c7244(0x240)](_0x9c7244(0x132),{});}else{_0x14dfb8[_0x9c7244(0x1ec)](_0x25b915,_0xf28e00[_0x9c7244(0x18d)])['toEqual'](0x1);const _0x2d874b=_0x223a76[0x0];_0x14dfb8['uBjVA'](_0x5a2314,typeof _0x2d874b[_0x9c7244(0x169)])[_0x9c7244(0x1fd)](_0x9c7244(0x186)),_0x14dfb8[_0x9c7244(0x1ee)](_0x251bbf,_0x2d874b[_0x9c7244(0x169)][_0x9c7244(0x1af)])[_0x9c7244(0x1fd)](_0x9c7244(0x1bd)),_0x14dfb8[_0x9c7244(0x140)](_0x3888a5,_0x2d874b[_0x9c7244(0x169)]['wu'])['toBe'](_0x14dfb8[_0x9c7244(0x1d8)]);const _0x587ea6={'subdoc.wu':_0x14dfb8[_0x9c7244(0x158)]};return _0x5e9cbf[_0x9c7244(0x120)](_0x14dfb8[_0x9c7244(0x236)],_0x432304,{},_0x587ea6);}})[_0x1eb57c(0x19b)](_0x165a29=>{const _0x38766a=_0x1eb57c;expect(_0x165a29[_0x38766a(0x18d)])['toEqual'](0x1);const _0x244b34=_0x165a29[0x0];_0xd46031[_0x38766a(0x187)](expect,_0x244b34[_0x38766a(0x11e)]instanceof Array)[_0x38766a(0x1fd)](!![]),expect(typeof _0x244b34[_0x38766a(0x186)])[_0x38766a(0x1fd)]('object'),expect(_0xd46031[_0x38766a(0x1b1)](_0x244b34['date'],Date))[_0x38766a(0x1fd)](!![]),_0x6083c5();})['catch'](_0x3896a9=>{const _0x3b292b=_0x1eb57c;console[_0x3b292b(0x18c)](_0x3896a9),fail(),_0x6083c5();});}),_0x168264[_0x1d6250(0x204)](it,_0x1d6250(0x159),async()=>{const _0x5d11f1=_0x1d6250,_0x6d90e1={'YwNii':function(_0x3a703b,_0x38afbc){return _0x3a703b(_0x38afbc);},'DUuqf':function(_0x103d1c){const _0x465b4d=_0x599e;return _0x168264[_0x465b4d(0x1fa)](_0x103d1c);}};if(_0x168264[_0x5d11f1(0x201)](_0x168264[_0x5d11f1(0x128)],_0x5d11f1(0x11a)))_0x6d90e1['YwNii'](_0x3d151c,_0x106970[_0x5d11f1(0x153)][0x1]['session'])[_0x5d11f1(0x21a)]();else{const _0x4d31a2=new MongoStorageAdapter({'uri':databaseURI}),_0x5d6be9={'fields':{'array':{'type':_0x5d11f1(0x1dd)},'object':{'type':_0x5d11f1(0x19c)},'date':{'type':_0x5d11f1(0x191)}}};await _0x4d31a2['createObject'](_0x168264[_0x5d11f1(0x17b)],_0x5d6be9,{});const _0x33aa9f=await _0x4d31a2[_0x5d11f1(0x1de)][_0x5d11f1(0x11f)]()[_0x5d11f1(0x1cf)]();expect(_0x33aa9f[_0x5d11f1(0x18b)][_0x5d11f1(0x1cb)]>0x0)[_0x5d11f1(0x15d)](!![]),await _0x4d31a2[_0x5d11f1(0x1bc)]();try{await _0x4d31a2[_0x5d11f1(0x1de)][_0x5d11f1(0x11f)]()[_0x5d11f1(0x1cf)](),expect(![])[_0x5d11f1(0x1fd)](!![]);}catch(_0x312527){_0x168264[_0x5d11f1(0x1a8)](_0x168264['aOKlx'],'WyKiN')?expect(_0x312527[_0x5d11f1(0x1a5)])[_0x5d11f1(0x15d)](_0x168264[_0x5d11f1(0x195)]):(_0x6d90e1['YwNii'](_0x3fd3f7,_0x5ce029[_0x5d11f1(0x1a0)])[_0x5d11f1(0x136)](),_0x6d90e1['DUuqf'](_0x2c4e98));}}}),it(_0x168264['sDZSd'],async()=>{const _0xb04582=_0x1d6250,_0x28527d=new MongoStorageAdapter({'uri':databaseURI}),_0x40ea19={'fields':{'array':{'type':_0x168264[_0xb04582(0x184)]},'object':{'type':_0x168264[_0xb04582(0x11d)]},'date':{'type':_0xb04582(0x191)}}};await _0x28527d[_0xb04582(0x1c0)](_0x168264[_0xb04582(0x17b)],_0x40ea19);const _0x58ad9b=await _0x28527d[_0xb04582(0x1fb)](_0x168264[_0xb04582(0x17b)]);expect(_0x58ad9b)['toBeDefined']();}),_0x168264['dMexC'](it,_0x1d6250(0x15e),async()=>{const _0x269914=_0x1d6250,_0x121cb1=new MongoStorageAdapter({'uri':databaseURI});await _0x168264[_0x269914(0x221)](expectAsync,_0x121cb1['getClass']('UnknownClass'))[_0x269914(0x17d)](undefined);}),it_only_mongodb_version(_0x1d6250(0x1cd))(_0x1d6250(0x1d5),async()=>{const _0x260565=_0x1d6250,_0x48c967=new Parse[(_0x260565(0x198))]();_0x48c967['set'](_0x260565(0x176),_0x168264[_0x260565(0x1b0)]),_0x48c967[_0x260565(0x164)](_0x260565(0x1b4),_0x260565(0x181)),await _0x48c967[_0x260565(0x1a3)]();const _0x28686f=Config[_0x260565(0x22e)](Parse[_0x260565(0x121)])['database'];await _0x28686f['adapter']['dropAllIndexes']('_User');const _0x2e3ec1=await _0x28686f['find'](_0x168264['TbhbD'],{'username':_0x260565(0x227)},{'caseInsensitive':!![],'explain':!![]}),_0x288e21=await new Parse['Schema'](_0x168264[_0x260565(0x21c)])[_0x260565(0x22e)]();await _0x28686f[_0x260565(0x20f)][_0x260565(0x1ba)](_0x260565(0x1ef),_0x288e21,[_0x168264[_0x260565(0x172)]],_0x260565(0x173),!![]);const _0x4641a2=await _0x28686f['find'](_0x168264[_0x260565(0x21c)],{'username':_0x168264[_0x260565(0x1d9)]},{'caseInsensitive':!![],'explain':!![]});_0x168264[_0x260565(0x1c9)](expect,_0x2e3ec1[_0x260565(0x23e)][_0x260565(0x237)]['stage'])['toBe'](_0x260565(0x170)),_0x168264[_0x260565(0x20a)](expect,_0x4641a2[_0x260565(0x23e)][_0x260565(0x237)][_0x260565(0x234)])[_0x260565(0x1fd)](_0x260565(0x119));}),it(_0x1d6250(0x11b),async()=>{const _0x1d5d5a=_0x1d6250,_0x37d445=Config['get'](Parse['applicationId'])[_0x1d5d5a(0x1de)],_0x167ef4=new Parse[(_0x1d5d5a(0x19c))](_0x168264[_0x1d5d5a(0x1e4)]);_0x167ef4[_0x1d5d5a(0x164)](_0x168264[_0x1d5d5a(0x131)],0x1),await _0x167ef4[_0x1d5d5a(0x1aa)]();const _0x31e299=await new Parse['Schema'](_0x168264[_0x1d5d5a(0x1e4)])['get']();await _0x37d445['adapter'][_0x1d5d5a(0x12c)](_0x1d5d5a(0x1ac),_0x31e299,[_0x168264[_0x1d5d5a(0x131)]]);const _0x271dbc=await new Parse[(_0x1d5d5a(0x1c3))](_0x168264['WvUMq'])[_0x1d5d5a(0x22e)]();_0x168264['hYmLK'](expect,_0x31e299[_0x1d5d5a(0x22b)]['test'])[_0x1d5d5a(0x20b)](),expect(_0x271dbc[_0x1d5d5a(0x22b)][_0x1d5d5a(0x239)])['toBeUndefined']();}),_0x168264[_0x1d6250(0x1e5)](it,'should\x20delete\x20field\x20with\x20index',async()=>{const _0x1f3514=_0x1d6250,_0x50029a=Config[_0x1f3514(0x22e)](Parse[_0x1f3514(0x121)])[_0x1f3514(0x1de)],_0x1600e7=new Parse[(_0x1f3514(0x19c))](_0x168264[_0x1f3514(0x1e4)]);_0x1600e7[_0x1f3514(0x164)](_0x1f3514(0x239),0x1),await _0x1600e7['save']();const _0x225459=await new Parse[(_0x1f3514(0x1c3))](_0x1f3514(0x1ac))[_0x1f3514(0x22e)]();await _0x50029a[_0x1f3514(0x20f)]['ensureIndex'](_0x168264[_0x1f3514(0x1e4)],_0x225459,[_0x1f3514(0x239)]),await _0x50029a[_0x1f3514(0x20f)][_0x1f3514(0x12c)](_0x1f3514(0x1ac),_0x225459,[_0x168264[_0x1f3514(0x131)]]);const _0xa52bbc=await new Parse[(_0x1f3514(0x1c3))](_0x168264[_0x1f3514(0x1e4)])['get']();expect(_0x225459[_0x1f3514(0x22b)][_0x1f3514(0x239)])['toBeDefined'](),_0x168264[_0x1f3514(0x149)](expect,_0xa52bbc[_0x1f3514(0x22b)][_0x1f3514(0x239)])['toBeUndefined']();}),process[_0x1d6250(0x146)][_0x1d6250(0x1d3)]===_0x168264[_0x1d6250(0x147)]&&(_0x168264[_0x1d6250(0x192)](describe,_0x168264[_0x1d6250(0x200)],()=>{const _0x50680d=_0x1d6250,_0x21cb91={'jQVpw':'mongodb://localhost:27017/parseServerMongoAdapterTestDatabase?replicaSet=replicaset','VEysl':function(_0x42b0e3,_0x3f435d){const _0x205d80=_0x599e;return _0x168264[_0x205d80(0x13d)](_0x42b0e3,_0x3f435d);},'uvAjt':_0x50680d(0x14c),'GMELQ':_0x168264['WvUMq'],'IediW':function(_0x2ebcdc,_0x21397b,_0x299fa5){return _0x168264['vDluh'](_0x2ebcdc,_0x21397b,_0x299fa5);},'ZdSxW':function(_0x5cd01d,_0x233b02){return _0x5cd01d(_0x233b02);},'kVOjb':_0x50680d(0x16f),'GrDKs':_0x50680d(0x174),'jteTo':function(_0x403df5,_0x121d70){const _0x3627a9=_0x50680d;return _0x168264[_0x3627a9(0x161)](_0x403df5,_0x121d70);},'XZHPM':_0x168264[_0x50680d(0x163)],'EKgyd':function(_0x99cebd,_0x58a8f5){return _0x99cebd(_0x58a8f5);},'dZvab':function(_0x17316e,_0xa8652c,_0x3b9177){return _0x17316e(_0xa8652c,_0x3b9177);},'pUCdX':function(_0x43c8ed,_0x2273e9){return _0x43c8ed(_0x2273e9);},'tLfGV':'deleteMany'},_0x5e061d={'Content-Type':_0x168264[_0x50680d(0x12a)],'X-Parse-Application-Id':_0x50680d(0x239),'X-Parse-REST-API-Key':_0x168264['MxFmB']};_0x168264['kogSU'](beforeEach,async()=>{const _0x38e503=_0x50680d;await reconfigureServer({'databaseAdapter':undefined,'databaseURI':_0x21cb91['jQVpw']}),await TestUtils[_0x38e503(0x189)](!![]);}),_0x168264[_0x50680d(0x226)](it,_0x50680d(0x127),async()=>{const _0x1a3223=_0x50680d,_0x3f4a9f={'lWmGG':function(_0x529526,_0x368200){return _0x529526(_0x368200);},'MUgKS':_0x1a3223(0x1cc),'aPoUS':_0x1a3223(0x211)};if(_0x21cb91[_0x1a3223(0x177)](_0x1a3223(0x14c),_0x21cb91[_0x1a3223(0x17c)])){const _0x22159c=new Parse[(_0x1a3223(0x19c))](_0x21cb91[_0x1a3223(0x183)]);await _0x22159c[_0x1a3223(0x1aa)](),_0x21cb91['IediW'](spyOn,Collection[_0x1a3223(0x1ae)],_0x1a3223(0x120))['and']['callThrough'](),await _0x21cb91[_0x1a3223(0x18f)](request,{'method':_0x1a3223(0x21b),'headers':_0x5e061d,'url':_0x1a3223(0x210),'body':JSON[_0x1a3223(0x155)]({'requests':[{'method':_0x21cb91['kVOjb'],'path':_0x21cb91[_0x1a3223(0x1be)]+_0x22159c['id'],'body':{'myAttribute':_0x1a3223(0x1b6)}}],'transaction':!![]})});let _0x255fb5=![];Collection[_0x1a3223(0x1ae)][_0x1a3223(0x120)][_0x1a3223(0x160)][_0x1a3223(0x15f)]()['forEach'](_0xf6dae8=>{const _0x1d6483=_0x1a3223;_0x255fb5=!![],_0x3f4a9f['lWmGG'](expect,_0xf6dae8['args'][0x2]['session'][_0x1d6483(0x1a9)][_0x1d6483(0x1d2)])[_0x1d6483(0x1fd)](_0x3f4a9f[_0x1d6483(0x230)]);}),_0x21cb91[_0x1a3223(0x1a4)](expect,_0x255fb5)[_0x1a3223(0x1fd)](!![]);}else _0x3885cb[_0x1a3223(0x148)](_0x3f4a9f[_0x1a3223(0x223)]);}),it(_0x168264['FLNml'],async()=>{const _0x3a73ad=_0x50680d,_0x5ce829={'OkxJN':function(_0x4867ef,_0x153331){return _0x4867ef(_0x153331);}},_0x18923c=new Parse[(_0x3a73ad(0x19c))](_0x3a73ad(0x1ac));await _0x18923c[_0x3a73ad(0x1aa)](),_0x168264[_0x3a73ad(0x1e9)](spyOn,Collection[_0x3a73ad(0x1ae)],_0x168264[_0x3a73ad(0x213)])[_0x3a73ad(0x178)]['callThrough'](),await _0x168264[_0x3a73ad(0x19e)](request,{'method':_0x168264['fLXAF'],'headers':_0x5e061d,'url':'http://localhost:8378/1/batch','body':JSON[_0x3a73ad(0x155)]({'requests':[{'method':_0x3a73ad(0x16f),'path':_0x168264['ZIDiH'](_0x3a73ad(0x174),_0x18923c['id']),'body':{'myAttribute':_0x168264['jTLwz']}}],'transaction':![]})});let _0x29db4b=![];Collection[_0x3a73ad(0x1ae)][_0x3a73ad(0x120)]['calls'][_0x3a73ad(0x15f)]()[_0x3a73ad(0x14d)](_0xc8e731=>{const _0x45a2a3=_0x3a73ad;_0x29db4b=!![],_0x5ce829['OkxJN'](expect,_0xc8e731[_0x45a2a3(0x153)][0x2]['session'])[_0x45a2a3(0x21a)]();}),_0x168264['mRQVu'](expect,_0x29db4b)[_0x3a73ad(0x1fd)](!![]);}),_0x168264[_0x50680d(0x202)](it,_0x50680d(0x124),async()=>{const _0xca1127=_0x50680d,_0x411065=new Parse['Object']('MyObject');await _0x411065[_0xca1127(0x1aa)](),_0x168264[_0xca1127(0x1e9)](spyOn,Collection[_0xca1127(0x1ae)],_0x168264[_0xca1127(0x213)])[_0xca1127(0x178)]['callThrough'](),await _0x168264[_0xca1127(0x224)](request,{'method':_0x168264['fLXAF'],'headers':_0x5e061d,'url':_0x168264[_0xca1127(0x167)],'body':JSON[_0xca1127(0x155)]({'requests':[{'method':_0x168264['uKZtm'],'path':_0x168264[_0xca1127(0x133)]+_0x411065['id'],'body':{'myAttribute':_0xca1127(0x1b6)}}]})});let _0x21c3c3=![];Collection[_0xca1127(0x1ae)][_0xca1127(0x120)][_0xca1127(0x160)][_0xca1127(0x15f)]()[_0xca1127(0x14d)](_0x1240ac=>{const _0x17823d=_0xca1127;_0x21c3c3=!![],_0x21cb91['ZdSxW'](expect,_0x1240ac[_0x17823d(0x153)][0x2]['session'])[_0x17823d(0x21a)]();}),_0x168264[_0xca1127(0x141)](expect,_0x21c3c3)['toBe'](!![]);}),it(_0x168264['UwiMx'],async()=>{const _0x4faf6f=_0x50680d,_0x298fc1=new Parse[(_0x4faf6f(0x19c))](_0x168264['WvUMq']);await _0x298fc1['save'](),_0x168264['udznW'](spyOn,Collection[_0x4faf6f(0x1ae)],_0x4faf6f(0x120))[_0x4faf6f(0x178)][_0x4faf6f(0x1fc)](),await request({'method':_0x4faf6f(0x16f),'headers':_0x5e061d,'url':_0x4faf6f(0x23b)+_0x298fc1['id'],'body':{'myAttribute':_0x4faf6f(0x1b6)}});let _0x46dff2=![];Collection[_0x4faf6f(0x1ae)]['findOneAndUpdate'][_0x4faf6f(0x160)][_0x4faf6f(0x15f)]()['forEach'](_0x258b66=>{const _0x478e8b=_0x4faf6f;_0x46dff2=!![],expect(_0x258b66[_0x478e8b(0x153)][0x2]['session'])[_0x478e8b(0x21a)]();}),expect(_0x46dff2)[_0x4faf6f(0x1fd)](!![]);}),it(_0x50680d(0x1f8),async()=>{const _0x4fef05=_0x50680d,_0x1f41b3={'vqhwd':function(_0x59bb65,_0x1ce916){return _0x59bb65(_0x1ce916);},'KikHz':_0x4fef05(0x191)};_0x21cb91[_0x4fef05(0x162)](spyOn,Collection[_0x4fef05(0x1ae)],'insertOne')['and'][_0x4fef05(0x1fc)]();const _0x52703d=new Parse[(_0x4fef05(0x19c))](_0x21cb91[_0x4fef05(0x183)]);await _0x52703d[_0x4fef05(0x1aa)]();const _0xb0f997=Collection['prototype'][_0x4fef05(0x135)][_0x4fef05(0x160)][_0x4fef05(0x15f)]();_0x21cb91[_0x4fef05(0x18f)](expect,_0xb0f997[_0x4fef05(0x18d)])[_0x4fef05(0x196)](0x0),_0xb0f997['forEach'](_0x5982dc=>{const _0x51f658=_0x4fef05;if(_0x51f658(0x1f0)!==_0x21cb91['XZHPM'])_0x21cb91[_0x51f658(0x13a)](expect,_0x5982dc['args'][0x1]['session'])[_0x51f658(0x21a)]();else{_0x1f41b3['vqhwd'](_0x1f1c1d,_0x1513b3[_0x51f658(0x18d)])[_0x51f658(0x15d)](0x1);const _0x2c3110={'array':[0x1,0x2,0x3],'object':{'foo':_0x51f658(0x1bd)},'date':{'__type':_0x1f41b3['KikHz'],'iso':_0x51f658(0x171)}},_0x179ca8={};return _0x45b518[_0x51f658(0x120)]('MyClass',_0x529b12,_0x179ca8,_0x2c3110);}});}),it(_0x168264[_0x50680d(0x1f4)],async()=>{const _0x4cc6c2=_0x50680d;_0x168264[_0x4cc6c2(0x204)](spyOn,Collection[_0x4cc6c2(0x1ae)],'findOneAndUpdate')[_0x4cc6c2(0x178)][_0x4cc6c2(0x1fc)]();const _0x28e249=new Parse[(_0x4cc6c2(0x19c))](_0x168264['WvUMq']);await _0x28e249[_0x4cc6c2(0x1aa)](),_0x28e249[_0x4cc6c2(0x164)]('myAttribute',_0x4cc6c2(0x1b6)),await _0x28e249[_0x4cc6c2(0x1aa)]();const _0x5f1e95=Collection[_0x4cc6c2(0x1ae)][_0x4cc6c2(0x120)][_0x4cc6c2(0x160)]['all']();_0x168264[_0x4cc6c2(0x1a7)](expect,_0x5f1e95['length'])[_0x4cc6c2(0x196)](0x0),_0x5f1e95[_0x4cc6c2(0x14d)](_0x90adb7=>{const _0x5ce78d=_0x4cc6c2;expect(_0x90adb7[_0x5ce78d(0x153)][0x2][_0x5ce78d(0x21e)])[_0x5ce78d(0x21a)]();});}),it(_0x168264[_0x50680d(0x1e2)],async()=>{const _0x2c9f52=_0x50680d;_0x21cb91['dZvab'](spyOn,Collection['prototype'],_0x21cb91[_0x2c9f52(0x13e)])[_0x2c9f52(0x178)][_0x2c9f52(0x1fc)]();const _0x193223=new Parse[(_0x2c9f52(0x19c))](_0x2c9f52(0x1ac));await _0x193223[_0x2c9f52(0x1aa)](),await _0x193223['destroy']();const _0x1d5e08=Collection['prototype']['deleteMany'][_0x2c9f52(0x160)]['all']();_0x21cb91[_0x2c9f52(0x182)](expect,_0x1d5e08[_0x2c9f52(0x18d)])[_0x2c9f52(0x196)](0x0),_0x1d5e08['forEach'](_0x3b65d7=>{const _0x59aa1e=_0x2c9f52;_0x21cb91[_0x59aa1e(0x182)](expect,_0x3b65d7[_0x59aa1e(0x153)][0x1]['session'])[_0x59aa1e(0x21a)]();});});}),describe(_0x168264[_0x1d6250(0x1e7)],()=>{const _0x2a88a4=_0x1d6250,_0x25f2e8={'ycywK':function(_0x599405,_0x3d4a6e,_0x32ce90){return _0x599405(_0x3d4a6e,_0x32ce90);},'LsLXt':_0x168264[_0x2a88a4(0x231)],'dttnQ':'Array','DeRrN':_0x168264['npsRb'],'aePWi':'Stuff'};it(_0x2a88a4(0x144),async _0x1d1e58=>{const _0x730e9a=_0x2a88a4,_0x11528b=new MongoStorageAdapter({'uri':databaseURI,'collectionPrefix':'','mongoOptions':{'enableSchemaHooks':!![]}});await reconfigureServer({'databaseAdapter':_0x11528b}),expect(_0x11528b['enableSchemaHooks'])['toBe'](!![]),_0x25f2e8['ycywK'](spyOn,_0x11528b,_0x25f2e8[_0x730e9a(0x20d)]);const _0x236fa1={'fields':{'array':{'type':_0x25f2e8[_0x730e9a(0x222)]},'object':{'type':_0x25f2e8['DeRrN']},'date':{'type':'Date'}}};await _0x11528b[_0x730e9a(0x1c0)](_0x730e9a(0x1e6),_0x236fa1);const _0x138a14=await _0x11528b['getClass'](_0x25f2e8['aePWi']);expect(_0x138a14)[_0x730e9a(0x20b)](),setTimeout(()=>{const _0xf41899=_0x730e9a;expect(_0x11528b[_0xf41899(0x1a0)])[_0xf41899(0x136)](),_0x1d1e58();},0x1388);});}));});