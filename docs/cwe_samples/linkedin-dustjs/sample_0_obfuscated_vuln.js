'use strict';function _0x32a5(){const _0x5d0e42=['imPEk','yUHOv','dir','git\x20diff\x20','cKmRd','qWjvA','isGitClean','./get-sub-dir','646496EjalLJ','aaPGU','run','gitStatus','git\x20cherry-pick\x20--no-commit\x20','9prLxzg','./git-status','cXgsL','fs-extra','join','git\x20reset','296602kcScrt','sydyF','file.patch','\x20--binary\x20>\x20','./run','utf8','uEoSC','XJwxF','EucvR','copy','git\x20branch\x20','JMgyr','git\x20fetch\x20--no-tags\x20','GplpU','./check-out-tag','resolveConflictsProcess','./resolve-conflicts','Not\x20a\x20git\x20repository','28765KUkjZE','FJuiz','./git-remove-all','366036bkNLFl','git\x20apply\x20--whitespace=fix\x20','fCRym','git\x20checkout\x20--\x20','subDir','eOKKR','gitRemoveAll','git\x20remote\x20add\x20','hujOg','AcmaQ','GYelP','git','Tags\x20match,\x20nothing\x20to\x20apply','KhDjV','./create-custom-remote','dDOqd','96lwaUxL','failure','xdUXP','git\x20reset\x20--hard','sMLjr','11pZziFc','3626904RgDYQF','exports','ensureDir','1767910rNypdR','./utils','uuid/v1','XkLad','318jwJOdX','sCWmU','FCaTf','irJog','readFile','util','cwd','zQvXh','ZEkLn','./commit','jFyhu','14QlCNqr','remove','path','git\x20ls-files\x20','6716gzftBp','tmp','./get-root-dir','GYUem','success','git\x20remote\x20remove\x20','./commit-and-tag','jEAyq'];_0x32a5=function(){return _0x5d0e42;};return _0x32a5();}function _0x3dc1(_0x8c6f8c,_0x20447f){const _0x32a5f7=_0x32a5();return _0x3dc1=function(_0x3dc1d2,_0x2a509b){_0x3dc1d2=_0x3dc1d2-0x197;let _0x1cdd8e=_0x32a5f7[_0x3dc1d2];return _0x1cdd8e;},_0x3dc1(_0x8c6f8c,_0x20447f);}const _0x559204=_0x3dc1;(function(_0x4c2e53,_0x271a33){const _0x165d31=_0x3dc1,_0x333d57=_0x4c2e53();while(!![]){try{const _0x3a5d1e=parseInt(_0x165d31(0x1cb))/0x1+parseInt(_0x165d31(0x1b6))/0x2+-parseInt(_0x165d31(0x1db))/0x3*(parseInt(_0x165d31(0x19b))/0x4)+parseInt(_0x165d31(0x1c8))/0x5*(-parseInt(_0x165d31(0x1e8))/0x6)+parseInt(_0x165d31(0x197))/0x7*(parseInt(_0x165d31(0x1ab))/0x8)+-parseInt(_0x165d31(0x1b0))/0x9*(-parseInt(_0x165d31(0x1e4))/0xa)+parseInt(_0x165d31(0x1e0))/0xb*(-parseInt(_0x165d31(0x1e1))/0xc);if(_0x3a5d1e===_0x271a33)break;else _0x333d57['push'](_0x333d57['shift']());}catch(_0x29367a){_0x333d57['push'](_0x333d57['shift']());}}}(_0x32a5,0x2ed81));const path=require(_0x559204(0x199)),{promisify}=require(_0x559204(0x1ed)),tmpDir=promisify(require(_0x559204(0x19c))[_0x559204(0x1a5)]),fs=require(_0x559204(0x1b3)),uuidv1=require(_0x559204(0x1e6)),debug=require('debug')('git-diff-apply'),utils=require(_0x559204(0x1e5)),getRootDir=require(_0x559204(0x19d)),getSubDir=require(_0x559204(0x1aa)),gitInit=require('./git-init'),gitStatus=require(_0x559204(0x1b1)),commit=require(_0x559204(0x1f1)),checkOutTag=require(_0x559204(0x1c4)),convertToObj=require('./convert-to-obj'),resolveConflicts=require(_0x559204(0x1c6)),commitAndTag=require(_0x559204(0x1a1)),gitRemoveAll=require(_0x559204(0x1ca)),createCustomRemote=require(_0x559204(0x1d9)),{runWithSpawn}=require(_0x559204(0x1ba)),{isGitClean}=gitStatus,{gitConfigInit}=gitInit,tempBranchName=uuidv1();async function ensureDir(_0x18f9e3){const _0x29956d=_0x559204,_0x5823d2={'AfUix':_0x29956d(0x1e3)};debug(_0x5823d2['AfUix'],_0x18f9e3),await fs[_0x29956d(0x1e3)](_0x18f9e3);}module['exports']=async function gitDiffApply({cwd:cwd=process[_0x559204(0x1ee)](),remoteUrl:_0x516d48,startTag:_0x24f138,endTag:_0x1c1f2b,resolveConflicts:_0x13f561,ignoredFiles:ignoredFiles=[],reset:_0x259a19,init:_0x473e10,createCustomDiff:_0x19d89e,startCommand:_0x52e6d5,endCommand:_0x448c9e}){const _0x37fc58=_0x559204,_0x1c8bdb={'fXVGH':function(_0x2864ca,_0x2359af){return _0x2864ca||_0x2359af;},'FCaTf':function(_0x173fdc,_0x3469cf,_0x192ac3){return _0x173fdc(_0x3469cf,_0x192ac3);},'jEAyq':function(_0x19b5d6,_0xa631d2,_0x26d7ff){return _0x19b5d6(_0xa631d2,_0x26d7ff);},'cKmRd':function(_0x2cc2fc,_0x25efb6,_0x262b14){return _0x2cc2fc(_0x25efb6,_0x262b14);},'YXzyz':function(_0x289b97,_0x18b752,_0x58528e){return _0x289b97(_0x18b752,_0x58528e);},'irJog':function(_0x15810a,_0x2b327f){return _0x15810a!==_0x2b327f;},'hujOg':'jFyhu','GYelP':function(_0x10d0dc,_0x302734){return _0x10d0dc(_0x302734);},'xdUXP':function(_0x43a38d,_0x4d382e){return _0x43a38d(_0x4d382e);},'zYNeq':_0x37fc58(0x1bb),'vUKYZ':_0x37fc58(0x1b5),'KhDjV':function(_0x465a42,_0x426b51){return _0x465a42(_0x426b51);},'zQvXh':function(_0x1a9117,_0x695864){return _0x1a9117(_0x695864);},'AcmaQ':function(_0x1f035c,_0x152240){return _0x1f035c(_0x152240);},'amOjl':'git\x20rev-parse\x20HEAD','cWUxL':function(_0x54b59a,_0x57b3ac){return _0x54b59a===_0x57b3ac;},'eOKKR':'XTUoL','dSVVc':'Tags\x20match,\x20nothing\x20to\x20apply','GplpU':function(_0x1958ce,_0x279695){return _0x1958ce(_0x279695);},'GITCK':_0x37fc58(0x1c7),'JMgyr':'You\x20must\x20start\x20with\x20a\x20clean\x20working\x20directory','sydyF':function(_0x4d0401){return _0x4d0401();},'imPEk':'clone','ZEkLn':function(_0x10e653){return _0x10e653();},'qWjvA':_0x37fc58(0x1cf),'fCRym':function(_0x437c0c){return _0x437c0c();},'uEoSC':function(_0x106965,_0x550241){return _0x106965(_0x550241);},'sMLjr':'git\x20clean\x20-f','aaPGU':'clxYc','NGkYY':_0x37fc58(0x19e),'cUedE':'Uxwav','dDOqd':'failure','yUHOv':function(_0x26b41b,_0xbe7deb){return _0x26b41b&&_0xbe7deb;}};let _0x5c6ff0,_0x46ccb2,_0x27d01f,_0x5cc2d2,_0x4471a2,_0x1d3c9d,_0x5f34c7,_0x13c85f;async function _0x39c991(){const _0x29d0c4=_0x37fc58;let _0x33e5aa;_0x1c8bdb['fXVGH'](_0x259a19,_0x473e10)?_0x33e5aa={}:(await _0x1c8bdb[_0x29d0c4(0x1ea)](checkOutTag,_0x24f138,{'cwd':_0x5c6ff0}),_0x33e5aa=_0x1c8bdb[_0x29d0c4(0x1a2)](convertToObj,_0x5c6ff0,ignoredFiles));await _0x1c8bdb[_0x29d0c4(0x1a7)](checkOutTag,_0x1c1f2b,{'cwd':_0x5c6ff0});let _0x46fd52=convertToObj(_0x5c6ff0,ignoredFiles);return{'from':_0x33e5aa,'to':_0x46fd52};}async function _0xdd1c96(_0x524515){const _0x3f4284=_0x37fc58,_0x3a0c32={'cXgsL':function(_0x34c157,_0x32511c,_0x41b422){return _0x34c157(_0x32511c,_0x41b422);},'XmpBZ':function(_0x2cb5fa,_0x38f3b3,_0x265c1b){return _0x1c8bdb['YXzyz'](_0x2cb5fa,_0x38f3b3,_0x265c1b);},'EucvR':function(_0x2b2faa,_0x3f4da4){return _0x2b2faa(_0x3f4da4);},'XJwxF':_0x3f4284(0x1dc)};let _0x343be7=await tmpDir();await gitInit({'cwd':_0x343be7});let _0x111d4f=path[_0x3f4284(0x1b4)](_0x343be7,_0x524515);async function _0x260085(_0x2305bf){const _0x34f044=_0x3f4284;await ensureDir(_0x111d4f),await _0x3a0c32[_0x34f044(0x1b2)](checkOutTag,_0x2305bf,{'cwd':_0x5c6ff0}),await utils[_0x34f044(0x1bf)](_0x5c6ff0,_0x111d4f),await _0x3a0c32['XmpBZ'](commitAndTag,_0x2305bf,{'cwd':_0x343be7});}if(!(_0x259a19||_0x473e10)){if(_0x1c8bdb[_0x3f4284(0x1eb)](_0x1c8bdb[_0x3f4284(0x1d3)],_0x3f4284(0x1f2))){_0x3a0c32[_0x3f4284(0x1be)](_0xad3e3a,_0x3a0c32[_0x3f4284(0x1bd)]);throw _0x3f313c;}else await _0x260085(_0x24f138),await _0x1c8bdb[_0x3f4284(0x1d5)](gitRemoveAll,{'cwd':_0x343be7});}await _0x1c8bdb[_0x3f4284(0x1dd)](_0x260085,_0x1c1f2b),_0x5c6ff0=_0x343be7,_0x46ccb2=_0x111d4f;}async function _0x1c67e2(){const _0x26ba9c=_0x37fc58;await utils[_0x26ba9c(0x1bf)](_0x46ccb2,cwd);}async function _0x43964a(_0x41f561){const _0x3009f6=_0x37fc58;for(let _0x273ea9 of ignoredFiles){let _0x18b581=await utils[_0x3009f6(0x1ad)](_0x3009f6(0x19a)+_0x273ea9,{'cwd':_0x41f561});_0x18b581?await utils[_0x3009f6(0x1ad)](_0x3009f6(0x1ce)+_0x273ea9,{'cwd':_0x41f561}):await fs[_0x3009f6(0x198)](path[_0x3009f6(0x1b4)](_0x41f561,_0x273ea9));}}async function _0x4cf236(){const _0x32f662=_0x37fc58;let _0x388806=path[_0x32f662(0x1b4)](await tmpDir(),_0x32f662(0x1b8));await utils[_0x32f662(0x1ad)](_0x32f662(0x1a6)+_0x24f138+'\x20'+_0x1c1f2b+_0x32f662(0x1b9)+_0x388806,{'cwd':_0x5c6ff0});if(await fs[_0x32f662(0x1ec)](_0x388806,_0x1c8bdb['zYNeq'])!=='')return _0x388806;}async function _0x299e6a(_0x2cd6c3){const _0x586a78=_0x37fc58;await utils[_0x586a78(0x1ad)](_0x586a78(0x1cc)+_0x2cd6c3,{'cwd':_0x5c6ff0});}async function _0x19faf3(){const _0x1562ad=_0x37fc58,_0x561a84={'XkLad':'Not\x20a\x20git\x20repository'};if(_0x259a19||_0x473e10){await _0x1c8bdb['YXzyz'](checkOutTag,_0x1c1f2b,{'cwd':_0x5c6ff0}),_0x4471a2=!![],_0x1d3c9d=!![];if(_0x259a19){if(_0x1c8bdb[_0x1562ad(0x1eb)](_0x1562ad(0x1e9),'sCWmU'))throw _0x561a84[_0x1562ad(0x1e7)];else await utils['gitRemoveAll']({'cwd':_0x5f34c7});}await _0x1c67e2(),await utils[_0x1562ad(0x1ad)](_0x1c8bdb['vUKYZ'],{'cwd':cwd}),await _0x43964a(cwd);return;}await checkOutTag(_0x24f138,{'cwd':_0x5c6ff0}),await utils[_0x1562ad(0x1ad)](_0x1562ad(0x1c0)+tempBranchName,{'cwd':_0x5c6ff0}),await utils[_0x1562ad(0x1ad)]('git\x20checkout\x20'+tempBranchName,{'cwd':_0x5c6ff0});let _0x38befa=await _0x4cf236();if(!_0x38befa)return;await _0x1c8bdb[_0x1562ad(0x1d8)](_0x299e6a,_0x38befa),await _0x1c8bdb[_0x1562ad(0x1ef)](_0x43964a,_0x46ccb2);let _0x510fb1=!await _0x1c8bdb[_0x1562ad(0x1d4)](isGitClean,{'cwd':_0x5c6ff0});if(_0x510fb1){await commit({'cwd':_0x5c6ff0});let _0xe240c7=await utils[_0x1562ad(0x1ad)](_0x1c8bdb['amOjl'],{'cwd':_0x5c6ff0});await utils[_0x1562ad(0x1ad)](_0x1562ad(0x1d2)+tempBranchName+'\x20'+_0x5c6ff0,{'cwd':cwd}),await utils['run'](_0x1562ad(0x1c2)+tempBranchName,{'cwd':cwd});try{await utils[_0x1562ad(0x1ad)](_0x1562ad(0x1af)+_0xe240c7['trim'](),{'cwd':cwd});}catch(_0x34401e){_0x27d01f=!![];}await utils['run'](_0x1562ad(0x1a0)+tempBranchName,{'cwd':cwd});}}try{if(_0x1c8bdb['cWUxL'](_0x24f138,_0x1c1f2b)&&!(_0x259a19||_0x473e10)){if(_0x37fc58(0x1c9)!==_0x1c8bdb[_0x37fc58(0x1d0)])throw _0x1c8bdb['dSVVc'];else throw _0x37fc58(0x1d7);}let _0x10c06c;try{_0x10c06c=await _0x1c8bdb[_0x37fc58(0x1c3)](isGitClean,{'cwd':cwd});}catch(_0x103561){throw _0x1c8bdb['GITCK'];}if(!_0x10c06c)throw _0x1c8bdb[_0x37fc58(0x1c1)];if(_0x19d89e){let _0x493a66=await createCustomRemote({'startCommand':_0x52e6d5,'endCommand':_0x448c9e,'startTag':_0x24f138,'endTag':_0x1c1f2b,'reset':_0x259a19,'init':_0x473e10});_0x516d48=_0x493a66;}_0x5c6ff0=await _0x1c8bdb[_0x37fc58(0x1b7)](tmpDir),_0x46ccb2=_0x5c6ff0,await runWithSpawn(_0x37fc58(0x1d6),[_0x1c8bdb[_0x37fc58(0x1a3)],_0x516d48,_0x5c6ff0]),await gitConfigInit({'cwd':_0x5c6ff0}),_0x5cc2d2=await _0x1c8bdb[_0x37fc58(0x1f0)](_0x39c991),_0x5f34c7=await getRootDir({'cwd':cwd});let _0x5a43d1=await getSubDir({'cwd':cwd});_0x5a43d1&&(debug(_0x1c8bdb[_0x37fc58(0x1a8)],_0x5a43d1),await _0xdd1c96(_0x5a43d1)),await _0x1c8bdb[_0x37fc58(0x1cd)](_0x19faf3),_0x1c8bdb[_0x37fc58(0x1bc)](debug,_0x37fc58(0x19f));}catch(_0x209124){_0x13c85f=_0x209124;try{_0x4471a2&&await utils[_0x37fc58(0x1ad)](_0x1c8bdb[_0x37fc58(0x1df)],{'cwd':cwd}),_0x1d3c9d&&(_0x1c8bdb[_0x37fc58(0x1eb)](_0x1c8bdb[_0x37fc58(0x1ac)],_0x1c8bdb['NGkYY'])?await utils[_0x37fc58(0x1ad)](_0x37fc58(0x1de),{'cwd':cwd}):_0x3e90a0=!![]);}catch(_0x14f3e3){if(_0x1c8bdb['cWUxL'](_0x1c8bdb['cUedE'],_0x1c8bdb['cUedE']))throw{'err':_0x13c85f,'err2':_0x14f3e3};else return _0x2e7ae8;}}if(_0x13c85f){debug(_0x1c8bdb[_0x37fc58(0x1da)]);throw _0x13c85f;}return _0x1c8bdb[_0x37fc58(0x1a4)](_0x27d01f,_0x13f561)&&(_0x5cc2d2[_0x37fc58(0x1c5)]=resolveConflicts({'cwd':cwd})),_0x5cc2d2;},module[_0x559204(0x1e2)][_0x559204(0x1ad)]=utils[_0x559204(0x1ad)],module['exports']['gitInit']=gitInit,module[_0x559204(0x1e2)][_0x559204(0x1ae)]=gitStatus,module[_0x559204(0x1e2)][_0x559204(0x1a9)]=isGitClean,module['exports'][_0x559204(0x1d1)]=gitRemoveAll;