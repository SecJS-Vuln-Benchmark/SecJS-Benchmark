const _0x1c404e=_0x2a63;(function(_0x246ccc,_0x4a02da){const _0x9a48c=_0x2a63,_0x1b5ddf=_0x246ccc();while(!![]){try{const _0x5507b8=parseInt(_0x9a48c(0x1d7))/0x1*(parseInt(_0x9a48c(0x1db))/0x2)+-parseInt(_0x9a48c(0x1f6))/0x3*(-parseInt(_0x9a48c(0x1be))/0x4)+-parseInt(_0x9a48c(0x1dd))/0x5+-parseInt(_0x9a48c(0x1c7))/0x6+-parseInt(_0x9a48c(0x1e6))/0x7+parseInt(_0x9a48c(0x1f8))/0x8*(parseInt(_0x9a48c(0x1bd))/0x9)+parseInt(_0x9a48c(0x1d6))/0xa;if(_0x5507b8===_0x4a02da)break;else _0x1b5ddf['push'](_0x1b5ddf['shift']());}catch(_0x3af8f1){_0x1b5ddf['push'](_0x1b5ddf['shift']());}}}(_0x5d3e,0x7fbc2));import{AnnotationLayer}from'./pdfjs';function _0x5d3e(){const _0x4a577c=['cancel','qnjiS','_accessibilityManager','2568114JgENnC','_annotationEditorUIManager','hide','update','isInPresentationMode','pdfPage','hasEditableAnnotations','ksKGD','sNgdv','display','className','renderForms','NORMAL','resolve','ZEPDF','19272900gtczrh','40177ShAYgy','structTreeLayer','linkService','createElement','14lzebAW','childNodes','5042020JzQhnY','_fieldObjectsPromise','annotationLayer','JoPqU','zbBQt','state','FULLSCREEN','getAnnotations','data-internal-link','6709640mHilVS','_cancelled','hidden','rZHlY','_annotationCanvasMap','HzIaT','all','wvpYB','_eventBus','presentationmodechanged','eventBus','enableScripting','FRueM','annotationStorage','_hasJSActionsPromise','downloadManager','9JzphpC','div','8IGOhpV','IaMjZ','2494143DIkUFA','576652omBRtH','ZWbnf','clone','_on','inert','rTrlA'];_0x5d3e=function(){return _0x4a577c;};return _0x5d3e();}import{PresentationModeState}from'./ui_utils.js';class AnnotationLayerBuilder{#onAppend=null;#eventAbortController=null;constructor({pdfPage:_0x18ebb5,linkService:_0x3d3725,downloadManager:_0x3f38c9,annotationStorage:annotationStorage=null,imageResourcesPath:imageResourcesPath='',renderForms:renderForms=!![],enableScripting:enableScripting=![],hasJSActionsPromise:hasJSActionsPromise=null,fieldObjectsPromise:fieldObjectsPromise=null,annotationCanvasMap:annotationCanvasMap=null,accessibilityManager:accessibilityManager=null,annotationEditorUIManager:annotationEditorUIManager=null,onAppend:onAppend=null}){const _0x3366d4=_0x2a63;this[_0x3366d4(0x1cc)]=_0x18ebb5,this['linkService']=_0x3d3725,this[_0x3366d4(0x1f5)]=_0x3f38c9,this['imageResourcesPath']=imageResourcesPath,this[_0x3366d4(0x1d2)]=renderForms,this[_0x3366d4(0x1f3)]=annotationStorage,this[_0x3366d4(0x1f1)]=enableScripting,this['_hasJSActionsPromise']=hasJSActionsPromise||Promise[_0x3366d4(0x1d4)](![]),this[_0x3366d4(0x1de)]=fieldObjectsPromise||Promise[_0x3366d4(0x1d4)](null),this[_0x3366d4(0x1ea)]=annotationCanvasMap,this[_0x3366d4(0x1c6)]=accessibilityManager,this['_annotationEditorUIManager']=annotationEditorUIManager,this.#onAppend=onAppend,this['annotationLayer']=null,this['div']=null,this[_0x3366d4(0x1e7)]=![],this[_0x3366d4(0x1ee)]=_0x3d3725[_0x3366d4(0x1f0)];}async['render'](_0x466a81,_0xa9c502,_0x1255cb=_0x1c404e(0x1d0)){const _0x2dc068=_0x1c404e,_0x43fecb={'qnjiS':function(_0x5abb36,_0x10e874){return _0x5abb36===_0x10e874;},'ksKGD':'rTrlA','gmgAQ':'div','FRueM':function(_0x35a7d2,_0x58ddbf){return _0x35a7d2===_0x58ddbf;}};if(this[_0x2dc068(0x1f7)]){if(this[_0x2dc068(0x1e7)]||!this[_0x2dc068(0x1df)])return;this['annotationLayer'][_0x2dc068(0x1ca)]({'viewport':_0x466a81['clone']({'dontFlip':!![]})});return;}const [_0x19ccf1,_0x33d1d9,_0x53d454]=await Promise[_0x2dc068(0x1ec)]([this[_0x2dc068(0x1cc)][_0x2dc068(0x1e4)]({'intent':_0x1255cb}),this[_0x2dc068(0x1f4)],this[_0x2dc068(0x1de)]]);if(this['_cancelled'])return;const _0x1c14b3=this['div']=document[_0x2dc068(0x1da)](_0x43fecb['gmgAQ']);_0x1c14b3[_0x2dc068(0x1d1)]=_0x2dc068(0x1df),this.#onAppend?.(_0x1c14b3);if(_0x43fecb[_0x2dc068(0x1f2)](_0x19ccf1['length'],0x0)){this['hide']();return;}this[_0x2dc068(0x1df)]=new AnnotationLayer({'div':_0x1c14b3,'accessibilityManager':this[_0x2dc068(0x1c6)],'annotationCanvasMap':this[_0x2dc068(0x1ea)],'annotationEditorUIManager':this[_0x2dc068(0x1c8)],'page':this[_0x2dc068(0x1cc)],'viewport':_0x466a81[_0x2dc068(0x1c0)]({'dontFlip':!![]}),'structTreeLayer':_0xa9c502?.[_0x2dc068(0x1d8)]||null}),await this['annotationLayer']['render']({'annotations':_0x19ccf1,'imageResourcesPath':this['imageResourcesPath'],'renderForms':this[_0x2dc068(0x1d2)],'linkService':this[_0x2dc068(0x1d9)],'downloadManager':this['downloadManager'],'annotationStorage':this[_0x2dc068(0x1f3)],'enableScripting':this['enableScripting'],'hasJSActions':_0x33d1d9,'fieldObjects':_0x53d454});if(this[_0x2dc068(0x1d9)][_0x2dc068(0x1cb)]){if(_0x2dc068(0x1e0)===_0x2dc068(0x1bc))return;else this.#updatePresentationModeState(PresentationModeState[_0x2dc068(0x1e3)]);}!this.#eventAbortController&&(this.#eventAbortController=new AbortController(),this[_0x2dc068(0x1ee)]?.[_0x2dc068(0x1c1)](_0x2dc068(0x1ef),_0x4ae9e7=>{const _0x2e521b=_0x2dc068;if(_0x43fecb[_0x2e521b(0x1c5)](_0x2e521b(0x1c3),_0x43fecb[_0x2e521b(0x1ce)]))this.#updatePresentationModeState(_0x4ae9e7[_0x2e521b(0x1e2)]);else{if(!this[_0x2e521b(0x1f7)])return;this[_0x2e521b(0x1f7)][_0x2e521b(0x1e8)]=!![];}},{'signal':this.#eventAbortController['signal']}));}[_0x1c404e(0x1c4)](){const _0x58cb73=_0x1c404e;this[_0x58cb73(0x1e7)]=!![],this.#eventAbortController?.['abort'](),this.#eventAbortController=null;}[_0x1c404e(0x1c9)](){const _0x1dfdbe=_0x1c404e;if(!this[_0x1dfdbe(0x1f7)])return;this[_0x1dfdbe(0x1f7)][_0x1dfdbe(0x1e8)]=!![];}[_0x1c404e(0x1cd)](){return!!this['annotationLayer']?.['hasEditableAnnotations']();}#updatePresentationModeState(_0x57a08d){const _0x1aecb4=_0x1c404e,_0x4e7668={'rZHlY':_0x1aecb4(0x1e1),'HzIaT':function(_0x1d175c,_0x16cfe2){return _0x1d175c===_0x16cfe2;},'ZWbnf':'iWKDn','sNgdv':_0x1aecb4(0x1e5)};if(!this[_0x1aecb4(0x1f7)]){if('zbBQt'===_0x4e7668[_0x1aecb4(0x1e9)])return;else{this[_0x1aecb4(0x1c9)]();return;}}let _0x15dd31=![];switch(_0x57a08d){case PresentationModeState[_0x1aecb4(0x1e3)]:_0x15dd31=!![];break;case PresentationModeState[_0x1aecb4(0x1d3)]:break;default:return;}for(const _0x2e1e49 of this[_0x1aecb4(0x1f7)][_0x1aecb4(0x1dc)]){if(_0x4e7668['HzIaT'](_0x4e7668[_0x1aecb4(0x1bf)],_0x1aecb4(0x1ed)))return!!this['annotationLayer']?.[_0x1aecb4(0x1cd)]();else{if(_0x2e1e49['hasAttribute'](_0x4e7668[_0x1aecb4(0x1cf)])){if(_0x4e7668[_0x1aecb4(0x1eb)](_0x1aecb4(0x1d5),_0x1aecb4(0x1d5)))continue;else return;}_0x2e1e49[_0x1aecb4(0x1c2)]=_0x15dd31;}}}}function _0x2a63(_0x16195c,_0x25b9fb){const _0x5d3ecd=_0x5d3e();return _0x2a63=function(_0x2a63f9,_0x157de7){_0x2a63f9=_0x2a63f9-0x1bc;let _0x50d415=_0x5d3ecd[_0x2a63f9];return _0x50d415;},_0x2a63(_0x16195c,_0x25b9fb);}export{AnnotationLayerBuilder};