function _0x31cc(){const _0x1ebc52=['layersloaded','vjKNT','QnhdS','BIoLl','resolve','string','7450632bJeIrG','_on','_dispatchEvent','10xpXzyz','86148xJlSHj','XpKDX','reset','YTXwk','_optionalContentConfig','_finishRendering','italic','split','66920HOXcvp','groups','getOptionalContentConfig','12GAwBRp','target','Wtfor','dispatch','_addToggleButton','_toggleAllTreeItems','name','style','checked','EjUWp','setVisibility','AhIkW','optionalcontentconfig','textContent','591410mtqcfx','resetlayers','object','append','TrRaD','rDUAJ','checkbox','ksSJp','190389UZLyih','_pdfDocument','getHash','1586544JJEWDu','nQInP','NmQMw','togglelayerstree','shift','_bindLink','createDocumentFragment','getGroup','eventBus','getOrder','ofHeV','jPNdw','onclick','className','createElement','_optionalContentHash','pxEQr','2334899ELouwB','label','OEBkA','_normalizeTextContent','uThGM','order','rwtCf','render','languages','bind','visible','114AdIAJm','input','fontStyle'];_0x31cc=function(){return _0x1ebc52;};return _0x31cc();}const _0x365379=_0x1995;(function(_0x129afb,_0x204b51){const _0x17e074=_0x1995,_0x1c9f79=_0x129afb();while(!![]){try{const _0x3a1999=-parseInt(_0x17e074(0x10e))/0x1+-parseInt(_0x17e074(0x106))/0x2+-parseInt(_0x17e074(0xf8))/0x3*(-parseInt(_0x17e074(0xed))/0x4)+-parseInt(_0x17e074(0xf5))/0x5*(parseInt(_0x17e074(0x12d))/0x6)+parseInt(_0x17e074(0x122))/0x7+-parseInt(_0x17e074(0x111))/0x8+-parseInt(_0x17e074(0xe9))/0x9*(-parseInt(_0x17e074(0xec))/0xa);if(_0x3a1999===_0x204b51)break;else _0x1c9f79['push'](_0x1c9f79['shift']());}catch(_0x54fc7e){_0x1c9f79['push'](_0x1c9f79['shift']());}}}(_0x31cc,0x4b66d));function _0x1995(_0x5a9e5a,_0x5baa4f){const _0x31ccbe=_0x31cc();return _0x1995=function(_0x1995b6,_0x12122f){_0x1995b6=_0x1995b6-0xe3;let _0x382d7d=_0x31ccbe[_0x1995b6];return _0x382d7d;},_0x1995(_0x5a9e5a,_0x5baa4f);}import{BaseTreeViewer}from'./base_tree_viewer.js';class PDFLayerViewer extends BaseTreeViewer{constructor(_0x3b6f46){const _0x38e169=_0x1995,_0x48b867={'ksSJp':'optionalcontentconfigchanged','nQInP':_0x38e169(0x114)},_0x203559='1|3|2|0|4'[_0x38e169(0xf4)]('|');let _0x39ba7d=0x0;while(!![]){switch(_0x203559[_0x39ba7d++]){case'0':this[_0x38e169(0x119)][_0x38e169(0xea)](_0x38e169(0x107),()=>{this.#updateLayers();});continue;case'1':super(_0x3b6f46);continue;case'2':this[_0x38e169(0x119)][_0x38e169(0xea)](_0x48b867[_0x38e169(0x10d)],_0x49eb64=>{this.#updateLayers(_0x49eb64['promise']);});continue;case'3':this['l10n']=_0x3b6f46['l10n'];continue;case'4':this[_0x38e169(0x119)]['_on'](_0x48b867[_0x38e169(0x112)],this[_0x38e169(0xfd)][_0x38e169(0x12b)](this));continue;}break;}}[_0x365379(0xef)](){const _0x1f4e98=_0x365379;super['reset'](),this[_0x1f4e98(0xf1)]=null,this[_0x1f4e98(0x120)]=null;}[_0x365379(0xeb)](_0x579c3c){const _0x2b946b=_0x365379,_0x137c0a={'ofHeV':_0x2b946b(0xe3)};this[_0x2b946b(0x119)][_0x2b946b(0xfb)](_0x137c0a[_0x2b946b(0x11b)],{'source':this,'layersCount':_0x579c3c});}[_0x365379(0x116)](_0x1abbbb,{groupId:_0x31b673,input:_0x3af631}){const _0x3572a8=_0x365379,_0x307ee8={'YTXwk':function(_0x339993,_0x2591fe){return _0x339993===_0x2591fe;},'oHFHK':function(_0x55007d){return _0x55007d();}},_0x1807b8=()=>{const _0x3c5c5b=_0x1995;this[_0x3c5c5b(0xf1)][_0x3c5c5b(0x102)](_0x31b673,_0x3af631[_0x3c5c5b(0x100)]),this[_0x3c5c5b(0x120)]=this['_optionalContentConfig'][_0x3c5c5b(0x110)](),this[_0x3c5c5b(0x119)][_0x3c5c5b(0xfb)](_0x3c5c5b(0x104),{'source':this,'promise':Promise[_0x3c5c5b(0xe7)](this[_0x3c5c5b(0xf1)])});};_0x1abbbb[_0x3572a8(0x11d)]=_0x57f210=>{const _0x30d3be=_0x3572a8;if(_0x307ee8[_0x30d3be(0xf0)](_0x57f210[_0x30d3be(0xf9)],_0x3af631))return _0x307ee8['oHFHK'](_0x1807b8),!![];else{if(_0x57f210[_0x30d3be(0xf9)]!==_0x1abbbb)return!![];}return _0x3af631[_0x30d3be(0x100)]=!_0x3af631[_0x30d3be(0x100)],_0x1807b8(),![];};}async['_setNestedName'](_0x43a06,{name:name=null}){const _0x324c3c=_0x365379,_0x2df8fd={'uThGM':function(_0x5077c4,_0x14c559){return _0x5077c4===_0x14c559;},'JcFYW':_0x324c3c(0xe8)};if(_0x2df8fd[_0x324c3c(0x126)](typeof name,_0x2df8fd['JcFYW'])){_0x43a06[_0x324c3c(0x105)]=this[_0x324c3c(0x125)](name);return;}_0x43a06[_0x324c3c(0x105)]=window['siyuan'][_0x324c3c(0x12a)]['additionalLayers'],_0x43a06[_0x324c3c(0xff)][_0x324c3c(0x12f)]=_0x324c3c(0xf3);}[_0x365379(0xfc)](_0x438364,{name:name=null}){super['_addToggleButton'](_0x438364,name===null);}[_0x365379(0xfd)](){const _0x25e9ab=_0x365379;if(!this['_optionalContentConfig'])return;super[_0x25e9ab(0xfd)]();}[_0x365379(0x129)]({optionalContentConfig:_0x28509f,pdfDocument:_0x45b1ba}){const _0x1d4733=_0x365379,_0x455152={'NmQMw':function(_0x44d1da,_0x2b73d7){return _0x44d1da!==_0x2b73d7;},'vjKNT':function(_0x4e856e){return _0x4e856e();},'BIoLl':function(_0x25cd55,_0xcc4ff9){return _0x25cd55||_0xcc4ff9;},'zUdnp':function(_0x3fc263,_0x595a43){return _0x3fc263!==_0x595a43;},'EjUWp':_0x1d4733(0x11c),'ovRvP':_0x1d4733(0x10a),'pxEQr':'div','PPbwh':function(_0x230444,_0x132a9c){return _0x230444===_0x132a9c;},'rDUAJ':_0x1d4733(0x108),'OEBkA':function(_0x2621fe,_0x2902a0){return _0x2621fe===_0x2902a0;},'Wtfor':'XpKDX','QnhdS':_0x1d4733(0x12e)};this[_0x1d4733(0xf1)]&&this[_0x1d4733(0xef)]();this['_optionalContentConfig']=_0x455152[_0x1d4733(0xe6)](_0x28509f,null),this[_0x1d4733(0x10f)]=_0x45b1ba||null;const _0x197214=_0x28509f?.[_0x1d4733(0x11a)]();if(!_0x197214){if(_0x455152['zUdnp'](_0x1d4733(0x128),_0x1d4733(0x128))){if(_0xb18cb4['target']===_0x48d4f3)return _0x440726(),!![];else{if(_0x455152[_0x1d4733(0x113)](_0x19fb3c['target'],_0x487b28))return!![];}return _0x26f59b[_0x1d4733(0x100)]=!_0x2d7ce8[_0x1d4733(0x100)],_0x455152[_0x1d4733(0xe4)](_0x23fe6e),![];}else{this['_dispatchEvent'](0x0);return;}}this[_0x1d4733(0x120)]=_0x28509f[_0x1d4733(0x110)]();const _0x35a921=document[_0x1d4733(0x117)](),_0x515729=[{'parent':_0x35a921,'groups':_0x197214}];let _0x30a28f=0x0,_0x346ab7=![];while(_0x515729['length']>0x0){if(_0x455152[_0x1d4733(0x101)]!==_0x1d4733(0x103)){const _0x9b86fa=_0x515729[_0x1d4733(0x115)]();for(const _0x1173d of _0x9b86fa[_0x1d4733(0xf6)]){if(_0x455152[_0x1d4733(0x113)]('GReMx',_0x455152['ovRvP'])){const _0x4ff27d=document[_0x1d4733(0x11f)](_0x455152[_0x1d4733(0x121)]);_0x4ff27d['className']='treeItem';const _0x4eec4f=document[_0x1d4733(0x11f)]('a');_0x4ff27d[_0x1d4733(0x109)](_0x4eec4f);if(_0x455152['PPbwh'](typeof _0x1173d,_0x455152[_0x1d4733(0x10b)])){if(_0x455152[_0x1d4733(0x124)](_0x1d4733(0xee),_0x455152[_0x1d4733(0xfa)])){_0x346ab7=!![],this[_0x1d4733(0xfc)](_0x4ff27d,_0x1173d),this['_setNestedName'](_0x4eec4f,_0x1173d);const _0x3cf626=document[_0x1d4733(0x11f)]('div');_0x3cf626[_0x1d4733(0x11e)]='treeItems',_0x4ff27d[_0x1d4733(0x109)](_0x3cf626),_0x515729['push']({'parent':_0x3cf626,'groups':_0x1173d[_0x1d4733(0x127)]});}else{_0x54bd43[_0x1d4733(0x105)]=this[_0x1d4733(0x125)](_0x458056);return;}}else{const _0x59a142=_0x28509f[_0x1d4733(0x118)](_0x1173d),_0x5e85db=document[_0x1d4733(0x11f)](_0x455152[_0x1d4733(0xe5)]);this[_0x1d4733(0x116)](_0x4eec4f,{'groupId':_0x1173d,'input':_0x5e85db}),_0x5e85db['type']=_0x1d4733(0x10c),_0x5e85db[_0x1d4733(0x100)]=_0x59a142[_0x1d4733(0x12c)];const _0x5d4239=document[_0x1d4733(0x11f)](_0x1d4733(0x123));_0x5d4239[_0x1d4733(0x105)]=this[_0x1d4733(0x125)](_0x59a142[_0x1d4733(0xfe)]),_0x5d4239['append'](_0x5e85db),_0x4eec4f[_0x1d4733(0x109)](_0x5d4239),_0x30a28f++;}_0x9b86fa['parent'][_0x1d4733(0x109)](_0x4ff27d);}else this[_0x1d4733(0x119)]['dispatch'](_0x1d4733(0xe3),{'source':this,'layersCount':_0x4709b1});}}else{this['_dispatchEvent'](0x0);return;}}this[_0x1d4733(0xf2)](_0x35a921,_0x30a28f,_0x346ab7);}async #updateLayers(_0x1f8b99=null){const _0x7813dd=_0x365379,_0x111b58={'KuKNL':_0x7813dd(0x104)};if(!this[_0x7813dd(0xf1)])return;const _0x42b834=this[_0x7813dd(0x10f)],_0x237701=await(_0x1f8b99||_0x42b834[_0x7813dd(0xf7)]());if(_0x42b834!==this[_0x7813dd(0x10f)])return;if(_0x1f8b99){if(_0x237701[_0x7813dd(0x110)]()===this['_optionalContentHash'])return;}else this[_0x7813dd(0x119)][_0x7813dd(0xfb)](_0x111b58['KuKNL'],{'source':this,'promise':Promise['resolve'](_0x237701)});this['render']({'optionalContentConfig':_0x237701,'pdfDocument':this[_0x7813dd(0x10f)]});}}export{PDFLayerViewer};