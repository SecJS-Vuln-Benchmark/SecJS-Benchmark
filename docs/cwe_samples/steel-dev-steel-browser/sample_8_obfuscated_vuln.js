const _0x3f696f=_0x386e;function _0x386e(_0x1a392a,_0x340409){const _0x23f8e0=_0x23f8();return _0x386e=function(_0x386e0c,_0x3eb1a1){_0x386e0c=_0x386e0c-0xae;let _0x52e837=_0x23f8e0[_0x386e0c];return _0x52e837;},_0x386e(_0x1a392a,_0x340409);}function _0x23f8(){const _0x3e5f15=['password_','languages','zfuDa','cancelButton','addEventListener','1465510pTIPbl','split','keydown','1186014lnQerk','oHKlq','jIZGo','resolve','1589nKTdlD','21820mtYXOa','LyFXR','1461708ojLKBZ','1|3|4|0|2','jfDfq','overlayManager','value','52248QYcGsL','PasswordPrompt\x20cancelled.','promise','click','invalid','label','ecCYr','register','INCORRECT_PASSWORD','aZlEG','input','length','siyuan','open','submitButton','2081670aKDiWz','dialog','close','_isViewerEmbedded','142464YtSKyg','bind','omlaD'];_0x23f8=function(){return _0x3e5f15;};return _0x23f8();}(function(_0x4cd0a7,_0x3255af){const _0x526fb3=_0x386e,_0x415235=_0x4cd0a7();while(!![]){try{const _0x61bc18=parseInt(_0x526fb3(0xd3))/0x1+-parseInt(_0x526fb3(0xb9))/0x2+-parseInt(_0x526fb3(0xb4))/0x3+-parseInt(_0x526fb3(0xbb))/0x4+-parseInt(_0x526fb3(0xb1))/0x5+-parseInt(_0x526fb3(0xcf))/0x6+-parseInt(_0x526fb3(0xb8))/0x7*(-parseInt(_0x526fb3(0xc0))/0x8);if(_0x61bc18===_0x3255af)break;else _0x415235['push'](_0x415235['shift']());}catch(_0x2f1278){_0x415235['push'](_0x415235['shift']());}}}(_0x23f8,0x3411f));import{createPromiseCapability,PasswordResponses}from'./pdfjs';class PasswordPrompt{#activeCapability=null;#updateCallback=null;#reason=null;constructor(_0x2bd447,_0x5453fb,_0x47403e,_0x78ab12=![]){const _0x4a8e1f=_0x386e,_0x502b12={'ecCYr':'click','LyFXR':_0x4a8e1f(0xb3),'WCpbw':_0x4a8e1f(0xd1)};this['dialog']=_0x2bd447[_0x4a8e1f(0xd0)],this['label']=_0x2bd447[_0x4a8e1f(0xc5)],this['input']=_0x2bd447[_0x4a8e1f(0xca)],this[_0x4a8e1f(0xce)]=_0x2bd447['submitButton'],this[_0x4a8e1f(0xaf)]=_0x2bd447['cancelButton'],this[_0x4a8e1f(0xbe)]=_0x5453fb,this['l10n']=_0x47403e,this[_0x4a8e1f(0xd2)]=_0x78ab12,this[_0x4a8e1f(0xce)][_0x4a8e1f(0xb0)](_0x502b12[_0x4a8e1f(0xc6)],this.#verify[_0x4a8e1f(0xd4)](this)),this[_0x4a8e1f(0xaf)][_0x4a8e1f(0xb0)](_0x4a8e1f(0xc3),this[_0x4a8e1f(0xd1)][_0x4a8e1f(0xd4)](this)),this[_0x4a8e1f(0xca)][_0x4a8e1f(0xb0)](_0x502b12[_0x4a8e1f(0xba)],_0x5e65ee=>{_0x5e65ee['keyCode']===0xd&&this.#verify();}),this[_0x4a8e1f(0xbe)][_0x4a8e1f(0xc7)](this['dialog'],!![]),this['dialog']['addEventListener'](_0x502b12['WCpbw'],this.#cancel['bind'](this));}async[_0x3f696f(0xcd)](){const _0x917963=_0x3f696f,_0x17dd6e={'jIZGo':function(_0x1a813b){return _0x1a813b();},'jfDfq':function(_0x29489e,_0x39fe65){return _0x29489e===_0x39fe65;},'aZlEG':_0x917963(0xc5)};this.#activeCapability&&await this.#activeCapability[_0x917963(0xc2)];this.#activeCapability=_0x17dd6e[_0x917963(0xb6)](createPromiseCapability);try{await this[_0x917963(0xbe)][_0x917963(0xcd)](this[_0x917963(0xd0)]);}catch(_0xccdb81){this.#activeCapability=null;throw _0xccdb81;}const _0x3a1a4b=_0x17dd6e[_0x917963(0xbd)](this.#reason,PasswordResponses[_0x917963(0xc8)]);(!this[_0x917963(0xd2)]||_0x3a1a4b)&&this[_0x917963(0xca)]['focus'](),this[_0x917963(0xc5)]['textContent']=window[_0x917963(0xcc)][_0x917963(0xd7)][_0x917963(0xd6)+(_0x3a1a4b?_0x917963(0xc4):_0x17dd6e[_0x917963(0xc9)])];}async[_0x3f696f(0xd1)](){const _0x47b369=_0x3f696f,_0x475bfe={'oHKlq':function(_0x4943c0,_0x3b42f3){return _0x4943c0===_0x3b42f3;}};_0x475bfe[_0x47b369(0xb5)](this[_0x47b369(0xbe)]['active'],this[_0x47b369(0xd0)])&&this[_0x47b369(0xbe)][_0x47b369(0xd1)](this['dialog']);}#verify(){const _0x4769a1=_0x3f696f,_0x9887ea={'omlaD':function(_0x11426d,_0x140204){return _0x11426d>_0x140204;}},_0x20c746=this['input'][_0x4769a1(0xbf)];_0x9887ea[_0x4769a1(0xd5)](_0x20c746?.[_0x4769a1(0xcb)],0x0)&&this.#invokeCallback(_0x20c746);}#cancel(){const _0x295d27=_0x3f696f,_0x22389d={'zfuDa':_0x295d27(0xc1)};this.#invokeCallback(new Error(_0x22389d[_0x295d27(0xae)])),this.#activeCapability[_0x295d27(0xb7)]();}#invokeCallback(_0x1cf7f0){const _0x220db1=_0x3f696f,_0x1b0bb4={'zphfr':_0x220db1(0xbc)},_0x7d935d=_0x1b0bb4['zphfr'][_0x220db1(0xb2)]('|');let _0x4657c2=0x0;while(!![]){switch(_0x7d935d[_0x4657c2++]){case'0':this.#updateCallback(_0x1cf7f0);continue;case'1':if(!this.#updateCallback)return;continue;case'2':this.#updateCallback=null;continue;case'3':this[_0x220db1(0xd1)]();continue;case'4':this['input'][_0x220db1(0xbf)]='';continue;}break;}}async['setUpdateCallback'](_0x2c2474,_0x3ad0d4){const _0x2c0723=_0x3f696f;this.#activeCapability&&await this.#activeCapability[_0x2c0723(0xc2)],this.#updateCallback=_0x2c2474,this.#reason=_0x3ad0d4;}}export{PasswordPrompt};