const _0xbdaffb=_0x156a;(function(_0xbf9209,_0x2bfe10){const _0x14aa9e=_0x156a,_0x3f7064=_0xbf9209();while(!![]){try{const _0x120a8a=-parseInt(_0x14aa9e(0x16f))/0x1*(-parseInt(_0x14aa9e(0x13b))/0x2)+parseInt(_0x14aa9e(0x169))/0x3+parseInt(_0x14aa9e(0x175))/0x4*(-parseInt(_0x14aa9e(0x15b))/0x5)+parseInt(_0x14aa9e(0x128))/0x6*(-parseInt(_0x14aa9e(0x15d))/0x7)+-parseInt(_0x14aa9e(0x180))/0x8*(-parseInt(_0x14aa9e(0x16e))/0x9)+-parseInt(_0x14aa9e(0x135))/0xa*(-parseInt(_0x14aa9e(0x12f))/0xb)+parseInt(_0x14aa9e(0x160))/0xc;if(_0x120a8a===_0x2bfe10)break;else _0x3f7064['push'](_0x3f7064['shift']());}catch(_0x27dd40){_0x3f7064['push'](_0x3f7064['shift']());}}}(_0x505d,0xbc4e7));import{createPromiseCapability,PDFDateString}from'./pdfjs';import{getPageSizeInches,isPortraitOrientation}from'./ui_utils.js';const DEFAULT_FIELD_CONTENT='-',NON_METRIC_LOCALES=[_0xbdaffb(0x153),_0xbdaffb(0x14e),'my'],US_PAGE_NAMES={'8.5x11':_0xbdaffb(0x167),'8.5x14':_0xbdaffb(0x16c)},METRIC_PAGE_NAMES={'297x420':'A3','210x297':'A4'};function _0x156a(_0x2562ea,_0x4c264b){const _0x505d54=_0x505d();return _0x156a=function(_0x156a24,_0x4e7cc5){_0x156a24=_0x156a24-0x123;let _0x5a2619=_0x505d54[_0x156a24];return _0x5a2619;},_0x156a(_0x2562ea,_0x4c264b);}function getPageName(_0x5445d1,_0x167250,_0x19660f){const _0x43eb14=_0xbdaffb,_0x5360b1=_0x167250?_0x5445d1[_0x43eb14(0x161)]:_0x5445d1['height'],_0xe337d8=_0x167250?_0x5445d1['height']:_0x5445d1['width'];return _0x19660f[_0x5360b1+'x'+_0xe337d8];}class PDFDocumentProperties{#fieldData=null;constructor({dialog:_0x2c3311,fields:_0x170a5b,closeButton:_0x712511},_0x286328,_0xc8a842,_0x2ff8f9,_0x594adb){const _0x343eec=_0xbdaffb,_0x44fa73={'UJEQD':_0x343eec(0x17a),'IWGvG':'rotationchanging'},_0x402bfc=_0x343eec(0x12e)[_0x343eec(0x123)]('|');let _0x4ca989=0x0;while(!![]){switch(_0x402bfc[_0x4ca989++]){case'0':_0x712511[_0x343eec(0x12b)](_0x44fa73['UJEQD'],this[_0x343eec(0x150)][_0x343eec(0x12a)](this));continue;case'1':this[_0x343eec(0x12d)]=!![];continue;case'2':this[_0x343eec(0x12c)]=_0x2ff8f9;continue;case'3':_0xc8a842[_0x343eec(0x125)]('pagechanging',_0x52da0b=>{const _0x12d448=_0x343eec;this[_0x12d448(0x17b)]=_0x52da0b[_0x12d448(0x144)];});continue;case'4':this.#reset();continue;case'5':this[_0x343eec(0x176)]=_0x286328;continue;case'6':this[_0x343eec(0x176)]['register'](this['dialog']);continue;case'7':this[_0x343eec(0x16a)]=_0x594adb;continue;case'8':this[_0x343eec(0x149)]=_0x2c3311;continue;case'9':this[_0x343eec(0x13e)]=_0x170a5b;continue;case'10':_0xc8a842[_0x343eec(0x125)](_0x44fa73[_0x343eec(0x151)],_0x49027f=>{const _0x23e78d=_0x343eec;this[_0x23e78d(0x166)]=_0x49027f[_0x23e78d(0x186)];});continue;}break;}}async[_0xbdaffb(0x132)](){const _0x45b43e=_0xbdaffb,_0x45440f={'CVGto':function(_0x43e78e,_0x244c36){return _0x43e78e(_0x244c36);}};await Promise[_0x45b43e(0x16b)]([this[_0x45b43e(0x176)][_0x45b43e(0x132)](this[_0x45b43e(0x149)]),this[_0x45b43e(0x14c)]['promise']]);const _0x3449a6=this[_0x45b43e(0x17b)],_0x111e1f=this[_0x45b43e(0x166)];if(this.#fieldData&&_0x3449a6===this.#fieldData['_currentPageNumber']&&_0x111e1f===this.#fieldData[_0x45b43e(0x166)]){this.#updateUI();return;}const {info:_0x35dca6,contentLength:_0x8bfde}=await this['pdfDocument'][_0x45b43e(0x155)](),[_0x510126,_0x1210b9,_0x57ba73,_0x55c8de,_0x5d20fb,_0x355046]=await Promise[_0x45b43e(0x16b)]([this[_0x45b43e(0x16a)](),this.#parseFileSize(_0x8bfde),this.#parseDate(_0x35dca6[_0x45b43e(0x14d)]),this.#parseDate(_0x35dca6[_0x45b43e(0x126)]),this[_0x45b43e(0x178)][_0x45b43e(0x168)](_0x3449a6)[_0x45b43e(0x17f)](_0x58694a=>{const _0x298789=_0x45b43e;return this.#parsePageSize(_0x45440f[_0x298789(0x173)](getPageSizeInches,_0x58694a),_0x111e1f);}),this.#parseLinearization(_0x35dca6['IsLinearized'])]);this.#fieldData=Object['freeze']({'fileName':_0x510126,'fileSize':_0x1210b9,'title':_0x35dca6[_0x45b43e(0x165)],'author':_0x35dca6['Author'],'subject':_0x35dca6[_0x45b43e(0x179)],'keywords':_0x35dca6[_0x45b43e(0x15c)],'creationDate':_0x57ba73,'modificationDate':_0x55c8de,'creator':_0x35dca6[_0x45b43e(0x13c)],'producer':_0x35dca6[_0x45b43e(0x148)],'version':_0x35dca6[_0x45b43e(0x183)],'pageCount':this[_0x45b43e(0x178)][_0x45b43e(0x152)],'pageSize':_0x5d20fb,'linearized':_0x355046,'_currentPageNumber':_0x3449a6,'_pagesRotation':_0x111e1f}),this.#updateUI();const {length:_0x3bb101}=await this[_0x45b43e(0x178)][_0x45b43e(0x145)]();if(_0x8bfde===_0x3bb101)return;const _0x4bd6d8=Object[_0x45b43e(0x13a)](Object['create'](null),this.#fieldData);_0x4bd6d8[_0x45b43e(0x15f)]=await this.#parseFileSize(_0x3bb101),this.#fieldData=Object['freeze'](_0x4bd6d8),this.#updateUI();}async['close'](){const _0x5bcc06=_0xbdaffb;this[_0x5bcc06(0x176)][_0x5bcc06(0x150)](this[_0x5bcc06(0x149)]);}['setDocument'](_0x3b75d7){const _0x1c8757=_0xbdaffb,_0x393dbe={'nbEoT':_0x1c8757(0x159)};this[_0x1c8757(0x178)]&&(_0x393dbe[_0x1c8757(0x142)]!==_0x1c8757(0x185)?(this.#reset(),this.#updateUI(!![])):_0xc0f95c={'width':_0x3a0f16[_0x1c8757(0x171)],'height':_0x4b67fc['width']});if(!_0x3b75d7)return;this['pdfDocument']=_0x3b75d7,this[_0x1c8757(0x14c)][_0x1c8757(0x139)]();}#reset(){const _0x3eab40=_0xbdaffb;this['pdfDocument']=null,this.#fieldData=null,this[_0x3eab40(0x14c)]=createPromiseCapability(),this[_0x3eab40(0x17b)]=0x1,this['_pagesRotation']=0x0;}#updateUI(_0x40c995=![]){const _0x50df4f=_0xbdaffb;if(_0x40c995||!this.#fieldData){for(const _0x2cea83 in this['fields']){this[_0x50df4f(0x13e)][_0x2cea83][_0x50df4f(0x14a)]=DEFAULT_FIELD_CONTENT;}return;}if(this[_0x50df4f(0x176)][_0x50df4f(0x124)]!==this[_0x50df4f(0x149)])return;for(const _0x18abdc in this[_0x50df4f(0x13e)]){const _0x59490f=this.#fieldData[_0x18abdc];this[_0x50df4f(0x13e)][_0x18abdc][_0x50df4f(0x14a)]=_0x59490f||_0x59490f===0x0?_0x59490f:DEFAULT_FIELD_CONTENT;}}async #parseFileSize(_0x12c9c6=0x0){const _0x58990b=_0xbdaffb,_0x432e92={'OqJYZ':function(_0x5637f6,_0x5716bb){return _0x5637f6!==_0x5716bb;},'SOgZy':_0x58990b(0x143),'iaCDu':function(_0x5482b6,_0x16590c){return _0x5482b6>=_0x16590c;}},_0x4239ac=_0x12c9c6/0x400,_0x59b73e=_0x4239ac/0x400;if(!_0x4239ac)return _0x432e92['OqJYZ'](_0x432e92[_0x58990b(0x13f)],'Yuubg')?_0x28c550?'Yes':'No':undefined;if(_0x432e92[_0x58990b(0x141)](_0x59b73e,0x1))return(_0x59b73e>=0x1&&(+_0x59b73e['toPrecision'](0x3))[_0x58990b(0x15a)]())+_0x58990b(0x17c)+_0x12c9c6[_0x58990b(0x15a)]()+_0x58990b(0x129);return(_0x59b73e<0x1&&(+_0x4239ac['toPrecision'](0x3))[_0x58990b(0x15a)]())+_0x58990b(0x147)+_0x12c9c6[_0x58990b(0x15a)]()+_0x58990b(0x129);}async #parsePageSize(_0x25cf16,_0x53bc14){const _0x61f2a3=_0xbdaffb,_0x2f531e={'jPsuE':function(_0xa84f1e,_0xbd8b15){return _0xa84f1e%_0xbd8b15;},'MSefa':function(_0x21740b,_0x258357){return _0x21740b===_0x258357;},'bBUXj':function(_0x179db0,_0x581c9f){return _0x179db0(_0x581c9f);},'zdmnh':function(_0x4b9a88,_0x96a5ae){return _0x4b9a88/_0x96a5ae;},'BsVCc':function(_0x470d54,_0x743b7){return _0x470d54*_0x743b7;},'YkhOI':function(_0x235adb,_0x4babf1,_0x513d53,_0x30641d){return _0x235adb(_0x4babf1,_0x513d53,_0x30641d);},'LRAmM':function(_0x11d12d,_0xb5cc15){return _0x11d12d*_0xb5cc15;},'VMMpw':function(_0x513f14,_0x5d9b07){return _0x513f14*_0x5d9b07;},'NLMLD':function(_0x449a2e,_0x236760){return _0x449a2e<_0x236760;},'OmbvF':function(_0x196401,_0x1ad08e){return _0x196401-_0x1ad08e;},'DGqpU':function(_0x19f794,_0x403c2d){return _0x19f794<_0x403c2d;},'nJZQQ':function(_0x2ab966,_0x1bad71){return _0x2ab966-_0x1bad71;},'uHMjQ':function(_0x5a3578,_0x49a86e,_0xd72a82,_0x18dff5){return _0x5a3578(_0x49a86e,_0xd72a82,_0x18dff5);},'oHFic':function(_0xd401e7,_0x2f077d){return _0xd401e7/_0x2f077d;},'tFvAk':function(_0xdf6766,_0x12f63b){return _0xdf6766/_0x12f63b;},'YFdop':_0x61f2a3(0x140)};if(!_0x25cf16)return undefined;if(_0x2f531e[_0x61f2a3(0x136)](_0x53bc14,0xb4)!==0x0){if(_0x2f531e[_0x61f2a3(0x13d)](_0x61f2a3(0x162),'RRTEy'))_0x25cf16={'width':_0x25cf16[_0x61f2a3(0x171)],'height':_0x25cf16[_0x61f2a3(0x161)]};else return;}const _0x1f0ebf=_0x2f531e['bBUXj'](isPortraitOrientation,_0x25cf16);let _0x1caf55={'width':_0x2f531e[_0x61f2a3(0x154)](Math['round'](_0x2f531e[_0x61f2a3(0x163)](_0x25cf16[_0x61f2a3(0x161)],0x64)),0x64),'height':Math[_0x61f2a3(0x181)](_0x25cf16['height']*0x64)/0x64},_0x57edcd={'width':Math[_0x61f2a3(0x181)](_0x2f531e[_0x61f2a3(0x163)](_0x25cf16[_0x61f2a3(0x161)]*25.4,0xa))/0xa,'height':Math[_0x61f2a3(0x181)](_0x25cf16[_0x61f2a3(0x171)]*25.4*0xa)/0xa},_0x12d890=_0x2f531e[_0x61f2a3(0x146)](getPageName,_0x1caf55,_0x1f0ebf,US_PAGE_NAMES)||getPageName(_0x57edcd,_0x1f0ebf,METRIC_PAGE_NAMES);if(!_0x12d890&&!(Number[_0x61f2a3(0x134)](_0x57edcd[_0x61f2a3(0x161)])&&Number[_0x61f2a3(0x134)](_0x57edcd['height']))){const _0x1fe7e4={'width':_0x2f531e['LRAmM'](_0x25cf16[_0x61f2a3(0x161)],25.4),'height':_0x2f531e[_0x61f2a3(0x177)](_0x25cf16['height'],25.4)},_0x17a06c={'width':Math[_0x61f2a3(0x181)](_0x57edcd['width']),'height':Math['round'](_0x57edcd[_0x61f2a3(0x171)])};_0x2f531e[_0x61f2a3(0x164)](Math[_0x61f2a3(0x133)](_0x2f531e[_0x61f2a3(0x16d)](_0x1fe7e4[_0x61f2a3(0x161)],_0x17a06c[_0x61f2a3(0x161)])),0.1)&&_0x2f531e[_0x61f2a3(0x17d)](Math[_0x61f2a3(0x133)](_0x2f531e[_0x61f2a3(0x127)](_0x1fe7e4[_0x61f2a3(0x171)],_0x17a06c[_0x61f2a3(0x171)])),0.1)&&(_0x12d890=_0x2f531e[_0x61f2a3(0x182)](getPageName,_0x17a06c,_0x1f0ebf,METRIC_PAGE_NAMES),_0x12d890&&(_0x1caf55={'width':Math['round'](_0x2f531e[_0x61f2a3(0x15e)](_0x17a06c[_0x61f2a3(0x161)],25.4)*0x64)/0x64,'height':Math[_0x61f2a3(0x181)](_0x2f531e['LRAmM'](_0x2f531e[_0x61f2a3(0x14f)](_0x17a06c[_0x61f2a3(0x171)],25.4),0x64))/0x64},_0x57edcd=_0x17a06c));}const [{width:_0x40f16b,height:_0x2e6cc6},_0xf27361,_0xe87f0c,_0x5666d3]=await Promise['all']([this[_0x61f2a3(0x12d)]?_0x1caf55:_0x57edcd,this['_isNonMetricLocale']?window[_0x61f2a3(0x156)]['languages'][_0x61f2a3(0x137)]:window['siyuan'][_0x61f2a3(0x172)][_0x61f2a3(0x138)],_0x12d890&&window[_0x61f2a3(0x156)][_0x61f2a3(0x172)]['document_properties_page_size_name_'+_0x12d890[_0x61f2a3(0x157)]()],window['siyuan'][_0x61f2a3(0x172)][_0x61f2a3(0x14b)+(_0x1f0ebf?_0x61f2a3(0x158):_0x2f531e[_0x61f2a3(0x184)])]]);if(_0xe87f0c)return _0x40f16b['toLocaleString']()+_0x61f2a3(0x174)+_0x2e6cc6[_0x61f2a3(0x15a)]()+'\x20'+_0xf27361+'\x20('+_0xe87f0c+',\x20'+_0x5666d3+')';return _0x40f16b[_0x61f2a3(0x15a)]()+_0x61f2a3(0x174)+_0x2e6cc6[_0x61f2a3(0x15a)]()+'\x20'+_0xf27361+'\x20('+_0x5666d3+')';}async #parseDate(_0x3a720f){const _0x462e42=_0xbdaffb,_0x9515ba=PDFDateString[_0x462e42(0x170)](_0x3a720f);if(!_0x9515ba)return undefined;return _0x9515ba[_0x462e42(0x17e)]()+',\x20'+_0x9515ba[_0x462e42(0x131)]();}#parseLinearization(_0x3bddf8){const _0x50966c=_0xbdaffb,_0x2a594e={'NWxKs':'Yes'};return _0x3bddf8?_0x2a594e[_0x50966c(0x130)]:'No';}}function _0x505d(){const _0x4df0c0=['Producer','dialog','textContent','document_properties_page_size_orientation_','_dataAvailableCapability','CreationDate','en-lr','tFvAk','close','IWGvG','numPages','en-us','zdmnh','getMetadata','siyuan','toLowerCase','portrait','LWPjW','toLocaleString','73995phlFQl','Keywords','22953irDflx','oHFic','fileSize','11317224jEGcnk','width','RRTEy','BsVCc','NLMLD','Title','_pagesRotation','Letter','getPage','2572398qUsOOT','_fileNameLookup','all','Legal','OmbvF','2214rDvphJ','61153UdxxPn','toDateObject','height','languages','CVGto','\x20Ã—\x20','296efxmlQ','overlayManager','VMMpw','pdfDocument','Subject','click','_currentPageNumber','\x20MB\x20','DGqpU','toLocaleDateString','then','7248fLjssg','round','uHMjQ','PDFFormatVersion','YFdop','ilDBc','pagesRotation','split','active','_on','ModDate','nJZQQ','1302GPhmid','\x20bytes','bind','addEventListener','l10n','_isNonMetricLocale','8|9|5|2|7|4|0|6|3|10|1','22eywggd','NWxKs','toLocaleTimeString','open','abs','isInteger','2161110wqQKfn','jPsuE','unitInches','unitMillimeters','resolve','assign','4riXXLa','Creator','MSefa','fields','SOgZy','landscape','iaCDu','nbEoT','Yuubg','pageNumber','getDownloadInfo','YkhOI','\x20KB\x20('];_0x505d=function(){return _0x4df0c0;};return _0x505d();}export{PDFDocumentProperties};