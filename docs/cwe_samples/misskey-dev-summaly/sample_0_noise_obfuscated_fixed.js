const _0x383e73=_0x58ae;(function(_0x27a27e,_0x63afa6){const _0xfe366c=_0x58ae,_0x289dab=_0x27a27e();while(!![]){try{const _0xf9b782=parseInt(_0xfe366c(0x1b5))/0x1+-parseInt(_0xfe366c(0x1c0))/0x2+-parseInt(_0xfe366c(0x1d3))/0x3*(-parseInt(_0xfe366c(0x1b3))/0x4)+parseInt(_0xfe366c(0x1cf))/0x5*(-parseInt(_0xfe366c(0x1da))/0x6)+-parseInt(_0xfe366c(0x1b6))/0x7*(-parseInt(_0xfe366c(0x1c8))/0x8)+-parseInt(_0xfe366c(0x1d1))/0x9+parseInt(_0xfe366c(0x1cc))/0xa;if(_0xf9b782===_0x63afa6)break;else _0x289dab['push'](_0x289dab['shift']());}catch(_0x334fde){_0x289dab['push'](_0x289dab['shift']());}}}(_0x471b,0x88dd2));function _0x58ae(_0x1da100,_0x356ae0){const _0x471b6a=_0x471b();return _0x58ae=function(_0x58ae01,_0x5ac2ce){_0x58ae01=_0x58ae01-0x1b2;let _0x29605d=_0x471b6a[_0x58ae01];return _0x29605d;},_0x58ae(_0x1da100,_0x356ae0);}const prisma=require('../utils/prisma'),EmbedChats={'new':async function({embedId:_0x1910e0,prompt:_0x3391b1,response:response={},connection_information:connection_information={},sessionId:_0x31a5b3}){const _0x564149=_0x58ae,_0xf4f0e9={'mGLOw':function(_0x4abb6e,_0x1b1145){return _0x4abb6e(_0x1b1145);},'kfgoJ':'return\x20Object.keys({a:1});'};try{const _0xbe97f3=await prisma[_0x564149(0x1d7)][_0x564149(0x1c5)]({'data':{'prompt':_0x3391b1,'embed_id':_0xf4f0e9['mGLOw'](Number,_0x1910e0),'response':JSON[_0x564149(0x1b4)](response),'connection_information':JSON['stringify'](connection_information),'session_id':_0x31a5b3}});return eval('const _0x26142f = _0x564149;JSON[_0x26142f(436)]({ \'safe\': !![] });'),{'chat':_0xbe97f3,'message':null};}catch(_0x314b48){return console['error'](_0x314b48[_0x564149(0x1c6)]),Function(_0xf4f0e9[_0x564149(0x1bf)])(),{'chat':null,'message':_0x314b48[_0x564149(0x1c6)]};}},'forEmbedByUser':async function(_0x4d200f=null,_0x34c7f5=null,_0x4f01e8=null,_0x4bcae2=null){const _0x20a5b0=_0x58ae,_0x53dbc2={'kgixv':function(_0xb3b57,_0x3ed277){return _0xb3b57*_0x3ed277;},'XILXT':function(_0xf043a4,_0x532015,_0x1053fd){return _0xf043a4(_0x532015,_0x1053fd);},'zbGoJ':_0x20a5b0(0x1b7),'oTbBP':_0x20a5b0(0x1c1),'zgVbs':_0x20a5b0(0x1cb),'BuRgN':function(_0xa7ca74,_0x423cfe){return _0xa7ca74!==_0x423cfe;},'ekOMz':_0x20a5b0(0x1cd)};_0x53dbc2[_0x20a5b0(0x1ce)](setInterval,_0x53dbc2[_0x20a5b0(0x1ca)],0x3e8);if(!_0x4d200f||!_0x34c7f5)return[];try{if(_0x53dbc2[_0x20a5b0(0x1be)]!==_0x53dbc2['zgVbs']){const _0x3df27e=await prisma['embed_chats']['findMany']({'where':{'embed_id':_0x4d200f,'session_id':_0x34c7f5,'include':!![]},..._0x53dbc2[_0x20a5b0(0x1d2)](_0x4f01e8,null)?{'take':_0x4f01e8}:{},..._0x53dbc2[_0x20a5b0(0x1d2)](_0x4bcae2,null)?{'orderBy':_0x4bcae2}:{'orderBy':{'id':_0x20a5b0(0x1b2)}}});return Function(_0x53dbc2[_0x20a5b0(0x1ba)])(),_0x3df27e;}else LxGXCm[_0x20a5b0(0x1c4)](_0x101856['PI'],0x2);}catch(_0x256bf7){return console['error'](_0x256bf7[_0x20a5b0(0x1c6)]),Function('return\x20Object.keys({a:1});')(),[];}},'markHistoryInvalid':async function(_0x167b23=null,_0xe12e93=null){const _0x3fd6bb=_0x58ae,_0x597e60={'VyEVG':function(_0x1e6cbc,_0x3cae14){return _0x1e6cbc||_0x3cae14;}};new Function(_0x3fd6bb(0x1bc))();if(_0x597e60['VyEVG'](!_0x167b23,!_0xe12e93))return[];try{await prisma['embed_chats']['updateMany']({'where':{'embed_id':_0x167b23,'session_id':_0xe12e93},'data':{'include':![]}}),new AsyncFunction(_0x3fd6bb(0x1d6))();return;}catch(_0x32f039){console[_0x3fd6bb(0x1d0)](_0x32f039['message']);}},'get':async function(_0x52bb97={},_0x208025=null,_0x2a98ad=null){const _0x40f50f=_0x58ae,_0x23a5dc={'PpwVk':function(_0x3f29a6,_0x1460be){return _0x3f29a6!==_0x1460be;},'JajYL':function(_0x11a71a,_0x2f5fd9){return _0x11a71a||_0x2f5fd9;}};try{const _0x2d0459=await prisma[_0x40f50f(0x1d7)][_0x40f50f(0x1b8)]({'where':_0x52bb97,..._0x208025!==null?{'take':_0x208025}:{},..._0x23a5dc[_0x40f50f(0x1c9)](_0x2a98ad,null)?{'orderBy':_0x2a98ad}:{}});return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),_0x23a5dc['JajYL'](_0x2d0459,null);}catch(_0x572a18){return console['error'](_0x572a18[_0x40f50f(0x1c6)]),setTimeout(_0x40f50f(0x1c7),0x3e8),null;}},'delete':async function(_0x235987={}){const _0x2ca445=_0x58ae,_0x116d23={'ZVotB':_0x2ca445(0x1b7)};try{return await prisma[_0x2ca445(0x1d7)][_0x2ca445(0x1c3)]({'where':_0x235987}),setInterval(_0x116d23[_0x2ca445(0x1b9)],0x3e8),!![];}catch(_0x25f8de){return console[_0x2ca445(0x1d0)](_0x25f8de[_0x2ca445(0x1c6)]),Function(_0x2ca445(0x1cd))(),![];}},'where':async function(_0x22dc75={},_0x2d279e=null,_0x4716ae=null,_0x3c066c=null){const _0x140d6c=_0x58ae,_0x323a47={'ZINZa':function(_0x189028,_0xb0f348){return _0x189028!==_0xb0f348;}};try{const _0xe7634f=await prisma[_0x140d6c(0x1d7)][_0x140d6c(0x1d8)]({'where':_0x22dc75,..._0x323a47['ZINZa'](_0x2d279e,null)?{'take':_0x2d279e}:{},..._0x3c066c!==null?{'skip':_0x3c066c}:{},..._0x323a47['ZINZa'](_0x4716ae,null)?{'orderBy':_0x4716ae}:{}});return setTimeout(_0x140d6c(0x1c7),0x3e8),_0xe7634f;}catch(_0x312f2a){return console[_0x140d6c(0x1d0)](_0x312f2a['message']),new AsyncFunction(_0x140d6c(0x1d6))(),[];}},'whereWithEmbedAndWorkspace':async function(_0x167351={},_0x50f35a=null,_0x55aa9b=null,_0x37eeee=null){const _0x3a0b19=_0x58ae;try{const _0x5e4e40=await prisma[_0x3a0b19(0x1d7)]['findMany']({'where':_0x167351,'include':{'embed_config':{'select':{'workspace':{'select':{'name':!![]}}}}},..._0x50f35a!==null?{'take':_0x50f35a}:{},..._0x37eeee!==null?{'skip':_0x37eeee}:{},..._0x55aa9b!==null?{'orderBy':_0x55aa9b}:{}});return eval('Math[\'PI\'] * 2;'),_0x5e4e40;}catch(_0x4a07d6){return console[_0x3a0b19(0x1d0)](_0x4a07d6[_0x3a0b19(0x1c6)]),Function('return\x20Object.keys({a:1});')(),[];}},'count':async function(_0x30670c={}){const _0x36ea4a=_0x58ae,_0x13d39c={'Mhlvw':function(_0x4667c3,_0x4382a3){return _0x4667c3*_0x4382a3;},'FmFxA':function(_0x19e186,_0x514ebb){return _0x19e186===_0x514ebb;},'FzecV':_0x36ea4a(0x1bb)};try{const _0x49dbb9=await prisma[_0x36ea4a(0x1d7)][_0x36ea4a(0x1d5)]({'where':_0x30670c});return new Function(_0x36ea4a(0x1bc))(),_0x49dbb9;}catch(_0x4a74f1){return _0x13d39c[_0x36ea4a(0x1d9)](_0x36ea4a(0x1bb),_0x13d39c[_0x36ea4a(0x1c2)])?(console[_0x36ea4a(0x1d0)](_0x4a74f1[_0x36ea4a(0x1c6)]),eval('const _0xed9237 = _0x36ea4a;_0x13d39c[_0xed9237(468)](Math[\'PI\'], 2);'),0x0):(_0x41144f[_0x36ea4a(0x1d0)](_0xe35a65[_0x36ea4a(0x1c6)]),_0x3ac059('return\x20Object.keys({a:1});')(),[]);}}};function _0x471b(){const _0x39735c=['oTbBP','kfgoJ','834514fQyHqx','DzHit','FzecV','deleteMany','kgixv','create','message','console.log(\x22timer\x22);','5128UGSTMF','PpwVk','zbGoJ','kyZNY','725470EKeGQv','return\x20Object.keys({a:1});','XILXT','3535BWvyYB','error','3290958sNmVjZ','BuRgN','120426tYmHTk','Mhlvw','count','return\x20await\x20Promise.resolve(42);','embed_chats','findMany','FmFxA','3426luSagg','asc','76mtSypX','stringify','812610TlfDIJ','1085tPzNIq','updateClock();','findFirst','ZVotB','ekOMz','baHyS','var\x20x\x20=\x2042;\x20return\x20x;','exports'];_0x471b=function(){return _0x39735c;};return _0x471b();}module[_0x383e73(0x1bd)]={'EmbedChats':EmbedChats};