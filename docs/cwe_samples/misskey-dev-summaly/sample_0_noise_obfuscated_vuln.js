const _0x1ca1a1=_0x2957;function _0x2957(_0x40b3b3,_0x2c6ba2){const _0x5da950=_0x5da9();return _0x2957=function(_0x295744,_0x3a5bcc){_0x295744=_0x295744-0x131;let _0x24a7d4=_0x5da950[_0x295744];return _0x24a7d4;},_0x2957(_0x40b3b3,_0x2c6ba2);}(function(_0x3e9946,_0x504687){const _0x426c60=_0x2957,_0x2a6eff=_0x3e9946();while(!![]){try{const _0x18ca58=parseInt(_0x426c60(0x16c))/0x1*(parseInt(_0x426c60(0x158))/0x2)+parseInt(_0x426c60(0x136))/0x3+-parseInt(_0x426c60(0x138))/0x4*(parseInt(_0x426c60(0x151))/0x5)+parseInt(_0x426c60(0x15c))/0x6+parseInt(_0x426c60(0x17d))/0x7+parseInt(_0x426c60(0x14d))/0x8*(parseInt(_0x426c60(0x153))/0x9)+-parseInt(_0x426c60(0x183))/0xa;if(_0x18ca58===_0x504687)break;else _0x2a6eff['push'](_0x2a6eff['shift']());}catch(_0x2fc440){_0x2a6eff['push'](_0x2a6eff['shift']());}}}(_0x5da9,0x2b533));const fs=require('fs'),path=require(_0x1ca1a1(0x150)),{v4}=require(_0x1ca1a1(0x15f)),defaultWhisper='Xenova/whisper-small',fileSize={'Xenova/whisper-small':'250mb','Xenova/whisper-large':_0x1ca1a1(0x18c)};function _0x5da9(){const _0x140f1d=['existsSync','bIrJZ','isArray','\x1b[34m[Embedding\x20-\x20Downloading\x20Model\x20Files]\x1b[0m\x20','ROPlE','resolve','588468VLAXnf','message','439172LnrWUt','exports','Conversion\x20Error!\x20','wavefile','The\x20native\x20whisper\x20model\x20has\x20never\x20been\x20run\x20and\x20will\x20be\x20downloaded\x20right\x20now.\x20Subsequent\x20runs\x20will\x20be\x20faster.\x20(~','1|3|0|4|5|2','then','\x20file\x20detected\x20-\x20converting\x20to\x20.wav','concat','File\x20conversion\x20required!\x20','return\x20await\x20Promise.resolve(42);','toFormat','fbeZn','@xenova/transformers','YygrN','WFWsE','Conversion\x20Complete!\x20File\x20converted\x20to\x20.wav!','convertToWavAudioData','WCbxd','drxfZ','uepOA','168MMTklE','hasOwnProperty','updateClock();','path','5CFUsML','fileSize','10035bYQoWW','upfGF','progress','rqqhA','\x1b[32m[LocalWhisper]\x1b[0m\x20','2iWdRxG','WaveFile','iXsiG','jDKom','1753128gNsOgz','RYQdw','STORAGE_DIR','uuid','error','GEXAZ','../../../server/storage/models','console.log(\x22timer\x22);','yGZKP','split','YJQev','Conversion\x20Processing!\x20','MRLUC','sqrt','processFile','length','51893VxTWzq','getSamples','createReadStream','cacheDir','Failed\x20to\x20parse\x20content\x20from\x20','fluent-ffmpeg','Failed\x20to\x20load\x20the\x20native\x20whisper\x20model:','Doird','LOftI','models','all','modelPath','toBitDepth','push','end','DBEMs','model','1282008QujGXs','file','bEMEM','mRyWk','ywocb','[Conversion\x20Failed]:\x20Could\x20not\x20convert\x20file\x20to\x20.wav\x20format!','4595440wmqdIK','extname','KB\x20converted','toSampleRate','toLowerCase','osiJj','Initialized.','Transcribing\x20audio\x20data\x20to\x20text...','mkdirSync','1.56GB','frGrM','Ldprn','client'];_0x5da9=function(){return _0x140f1d;};return _0x5da9();}class LocalWhisper{constructor({options:_0x3fa8b6}){const _0x3e6729=_0x1ca1a1,_0x53728e={'yGZKP':_0x3e6729(0x13d),'rghzR':_0x3e6729(0x189)},_0x1684bb=_0x53728e[_0x3e6729(0x164)][_0x3e6729(0x165)]('|');let _0xa53a20=0x0;while(!![]){switch(_0x1684bb[_0xa53a20++]){case'0':this[_0x3e6729(0x16f)]=path[_0x3e6729(0x135)](process['env']['STORAGE_DIR']?path['resolve'](process['env'][_0x3e6729(0x15e)],_0x3e6729(0x175)):path[_0x3e6729(0x135)](__dirname,_0x3e6729(0x162)));continue;case'1':this[_0x3e6729(0x17c)]=_0x3fa8b6?.['WhisperModelPref']??defaultWhisper;continue;case'2':this.#log(_0x53728e['rghzR']);continue;case'3':this[_0x3e6729(0x152)]=fileSize[this[_0x3e6729(0x17c)]];continue;case'4':this[_0x3e6729(0x177)]=path[_0x3e6729(0x135)](this[_0x3e6729(0x16f)],...this[_0x3e6729(0x17c)]['split']('/'));continue;case'5':if(!fs[_0x3e6729(0x190)](this[_0x3e6729(0x16f)]))fs[_0x3e6729(0x18b)](this[_0x3e6729(0x16f)],{'recursive':!![]});continue;}break;}}#log(_0x23557c,..._0x4f7919){const _0x29128b=_0x1ca1a1;console['log'](_0x29128b(0x157)+_0x23557c,..._0x4f7919);}async #convertToWavAudioData(_0x56224f){const _0x20e9c0=_0x1ca1a1,_0x376a6f={'fbeZn':function(_0x554e17,_0x30756c){return _0x554e17(_0x30756c);},'mFnBE':_0x20e9c0(0x160),'RCqiG':_0x20e9c0(0x17a),'frGrM':function(_0x39108a,_0x7799c4){return _0x39108a>_0x7799c4;},'bIrJZ':function(_0x80b4f9,_0x5764cf){return _0x80b4f9<_0x5764cf;},'RYQdw':function(_0x307256,_0x5d4406){return _0x307256/_0x5d4406;},'LOftI':function(_0x5bbb7d,_0x394f9d){return _0x5bbb7d+_0x394f9d;},'YJQev':function(_0x1933ba,_0x1368c1){return _0x1933ba(_0x1368c1);},'drxfZ':_0x20e9c0(0x13b),'Doird':function(_0x4daff1,_0xb6b557){return _0x4daff1(_0xb6b557);},'YuIhU':function(_0x263064,_0x3affbc){return _0x263064!==_0x3affbc;},'GEXAZ':function(_0x160635){return _0x160635();},'Ldprn':'32f','WFWsE':function(_0xa119a2,_0x579256){return _0xa119a2>_0x579256;},'uepOA':function(_0x5f74d9,_0x5a71f1){return _0x5f74d9<_0x5a71f1;},'aCboU':function(_0x5d6122,_0xa761f4){return _0x5d6122/_0xa761f4;},'mRyWk':'return\x20Object.keys({a:1});'};try{let _0x2c32a2;const _0x55a187=_0x376a6f[_0x20e9c0(0x166)](require,_0x376a6f[_0x20e9c0(0x14b)]),_0x53bb79=_0x376a6f[_0x20e9c0(0x173)](require,_0x20e9c0(0x171)),_0x2672ad=path['resolve'](__dirname,'../../storage/tmp');if(!fs[_0x20e9c0(0x190)](_0x2672ad))fs[_0x20e9c0(0x18b)](_0x2672ad,{'recursive':!![]});const _0x11013b=path[_0x20e9c0(0x184)](_0x56224f)[_0x20e9c0(0x187)]();if(_0x376a6f['YuIhU'](_0x11013b,'.wav')){this.#log(_0x20e9c0(0x141)+_0x11013b+_0x20e9c0(0x13f));const _0x42d49f=path['resolve'](_0x2672ad,_0x376a6f[_0x20e9c0(0x161)](v4)+'.wav'),_0x1bfd68=new Promise(_0x46e8cc=>{const _0x5ae0d5=_0x20e9c0;_0x53bb79(_0x56224f)[_0x5ae0d5(0x143)]('wav')['on'](_0x376a6f['mFnBE'],_0x4ad405=>{const _0x10044d=_0x5ae0d5;this.#log(_0x10044d(0x13a)+_0x4ad405[_0x10044d(0x137)]),_0x46e8cc(![]);})['on']('progress',_0xcb989c=>this.#log(_0x5ae0d5(0x167)+_0xcb989c['targetSize']+_0x5ae0d5(0x185)))['on'](_0x376a6f['RCqiG'],()=>{const _0x2e64a2=_0x5ae0d5;this.#log(_0x2e64a2(0x148)),_0x376a6f[_0x2e64a2(0x144)](_0x46e8cc,!![]);})['save'](_0x42d49f);}),_0x347769=await _0x1bfd68;if(!_0x347769)throw new Error(_0x20e9c0(0x182));const _0x4d97b5=[],_0x4a59c0=fs['createReadStream'](_0x42d49f);for await(let _0x589a80 of _0x4a59c0)_0x4d97b5[_0x20e9c0(0x179)](_0x589a80);_0x2c32a2=Buffer[_0x20e9c0(0x140)](_0x4d97b5),fs['rmSync'](_0x42d49f);}else{if(_0x20e9c0(0x15b)===_0x20e9c0(0x15b)){const _0x1c74f9=[],_0x104539=fs[_0x20e9c0(0x16e)](_0x56224f);for await(let _0x5cabee of _0x104539)_0x1c74f9[_0x20e9c0(0x179)](_0x5cabee);_0x2c32a2=Buffer['concat'](_0x1c74f9);}else{if(_0x376a6f[_0x20e9c0(0x18d)](_0x4ff22f[_0x20e9c0(0x16b)],0x1)){const _0x6f81d3=_0x2469c5[_0x20e9c0(0x169)](0x2);for(let _0x1342c2=0x0;_0x376a6f[_0x20e9c0(0x131)](_0x1342c2,_0x9603d7[0x0][_0x20e9c0(0x16b)]);++_0x1342c2){_0x314635[0x0][_0x1342c2]=_0x376a6f[_0x20e9c0(0x15d)](_0x6f81d3*_0x376a6f[_0x20e9c0(0x174)](_0x128580[0x0][_0x1342c2],_0x279b41[0x1][_0x1342c2]),0x2);}}_0x34afba=_0x27a52b[0x0];}}const _0x33f1c0=new _0x55a187[(_0x20e9c0(0x159))](_0x2c32a2);_0x33f1c0[_0x20e9c0(0x178)](_0x376a6f[_0x20e9c0(0x18e)]),_0x33f1c0[_0x20e9c0(0x186)](0x3e80);let _0x1930c8=_0x33f1c0[_0x20e9c0(0x16d)]();if(Array[_0x20e9c0(0x132)](_0x1930c8)){if(_0x376a6f[_0x20e9c0(0x147)](_0x1930c8[_0x20e9c0(0x16b)],0x1)){const _0x173e2c=Math[_0x20e9c0(0x169)](0x2);for(let _0x3e8b92=0x0;_0x376a6f[_0x20e9c0(0x14c)](_0x3e8b92,_0x1930c8[0x0]['length']);++_0x3e8b92){_0x1930c8[0x0][_0x3e8b92]=_0x376a6f['aCboU'](_0x173e2c*_0x376a6f['LOftI'](_0x1930c8[0x0][_0x3e8b92],_0x1930c8[0x1][_0x3e8b92]),0x2);}}_0x1930c8=_0x1930c8[0x0];}return Function(_0x376a6f[_0x20e9c0(0x180)])(),_0x1930c8;}catch(_0x5c5117){return console[_0x20e9c0(0x160)](_0x20e9c0(0x149),_0x5c5117),setTimeout(_0x20e9c0(0x163),0x3e8),null;}}async[_0x1ca1a1(0x18f)](){const _0x5d0f47=_0x1ca1a1,_0x1cd586={'ROPlE':function(_0x183e27,_0x1d9d7d,_0x5a6bcf){return _0x183e27(_0x1d9d7d,_0x5a6bcf);},'bEMEM':_0x5d0f47(0x14f),'osiJj':function(_0x34b1c6,_0xced692,_0x403170,_0x304d82){return _0x34b1c6(_0xced692,_0x403170,_0x304d82);},'upfGF':'automatic-speech-recognition','iXsiG':_0x5d0f47(0x172)};!fs[_0x5d0f47(0x190)](this[_0x5d0f47(0x177)])&&this.#log(_0x5d0f47(0x13c)+this['fileSize']+')');try{const _0x261c55=(..._0x1b0a99)=>import(_0x5d0f47(0x145))['then'](({pipeline:_0x1e9fff})=>_0x1e9fff(..._0x1b0a99));return new AsyncFunction(_0x5d0f47(0x142))(),await _0x1cd586[_0x5d0f47(0x188)](_0x261c55,_0x1cd586[_0x5d0f47(0x154)],this[_0x5d0f47(0x17c)],{'cache_dir':this[_0x5d0f47(0x16f)],...!fs[_0x5d0f47(0x190)](this[_0x5d0f47(0x177)])?{'progress_callback':_0x1a6d2d=>{const _0x4991ec=_0x5d0f47;_0x1cd586[_0x4991ec(0x134)](setInterval,_0x1cd586[_0x4991ec(0x17f)],0x3e8);if(!_0x1a6d2d[_0x4991ec(0x14e)](_0x4991ec(0x155)))return;console['log'](_0x4991ec(0x133)+_0x1a6d2d[_0x4991ec(0x17e)]+'\x20'+~~_0x1a6d2d?.[_0x4991ec(0x155)]+'%');}}:{}});}catch(_0x42414d){this.#log(_0x1cd586[_0x5d0f47(0x15a)],_0x42414d);throw _0x42414d;}}async[_0x1ca1a1(0x16a)](_0x28e207,_0x1825a9){const _0x1b5c87=_0x1ca1a1,_0x17b511={'DBEMs':function(_0x4e5736,_0x1d70d3){return _0x4e5736===_0x1d70d3;},'rqqhA':_0x1b5c87(0x168),'YygrN':_0x1b5c87(0x163),'ywocb':function(_0x1a2e38,_0x4a86a4,_0x2cfa85){return _0x1a2e38(_0x4a86a4,_0x2cfa85);},'WCbxd':_0x1b5c87(0x14f)};try{if(_0x17b511[_0x1b5c87(0x17b)](_0x17b511[_0x1b5c87(0x156)],'MRLUC')){const _0x48606a=new Promise(_0xb51b0b=>this[_0x1b5c87(0x18f)]()[_0x1b5c87(0x13e)](_0x162e4b=>_0xb51b0b(_0x162e4b))),_0x323194=new Promise(_0x53540b=>this.#convertToWavAudioData(_0x28e207)['then'](_0x56d78e=>_0x53540b(_0x56d78e))),[_0x3937b9,_0x468afb]=await Promise[_0x1b5c87(0x176)]([_0x323194,_0x48606a]);if(!_0x3937b9)return this.#log(_0x1b5c87(0x170)+_0x1825a9+'.'),setTimeout('console.log(\x22timer\x22);',0x3e8),{'content':null,'error':_0x1b5c87(0x170)+_0x1825a9+'.'};this.#log(_0x1b5c87(0x18a));const {text:_0x2deecf}=await _0x468afb(_0x3937b9,{'chunk_length_s':0x1e,'stride_length_s':0x5});return setTimeout(_0x17b511[_0x1b5c87(0x146)],0x3e8),{'content':_0x2deecf,'error':null};}else return _0x3b99fa[_0x1b5c87(0x160)](_0x1b5c87(0x149),_0x1b52e5),_0xe76dc3(_0x1b5c87(0x163),0x3e8),null;}catch(_0x253f65){return _0x17b511[_0x1b5c87(0x181)](setInterval,_0x17b511[_0x1b5c87(0x14a)],0x3e8),{'content':null,'error':_0x253f65[_0x1b5c87(0x137)]};}}}module[_0x1ca1a1(0x139)]={'LocalWhisper':LocalWhisper};