'use strict';const _0x48b14a=_0x1ca9;(function(_0x381d28,_0x493e71){const _0x5ee30a=_0x1ca9,_0x7ccc5e=_0x381d28();while(!![]){try{const _0x1b95f2=parseInt(_0x5ee30a(0x1ca))/0x1*(parseInt(_0x5ee30a(0x239))/0x2)+parseInt(_0x5ee30a(0x1bd))/0x3+-parseInt(_0x5ee30a(0x1f3))/0x4*(-parseInt(_0x5ee30a(0x1ad))/0x5)+parseInt(_0x5ee30a(0x245))/0x6+-parseInt(_0x5ee30a(0x1e6))/0x7*(parseInt(_0x5ee30a(0x1f7))/0x8)+-parseInt(_0x5ee30a(0x237))/0x9*(-parseInt(_0x5ee30a(0x266))/0xa)+-parseInt(_0x5ee30a(0x19a))/0xb;if(_0x1b95f2===_0x493e71)break;else _0x7ccc5e['push'](_0x7ccc5e['shift']());}catch(_0xcfdc18){_0x7ccc5e['push'](_0x7ccc5e['shift']());}}}(_0x3046,0x2f8f2));function _0x1ca9(_0x56f90e,_0x2a2620){const _0x3046ce=_0x3046();return _0x1ca9=function(_0x1ca971,_0x2457c7){_0x1ca971=_0x1ca971-0x17d;let _0x3a68b1=_0x3046ce[_0x1ca971];return _0x3a68b1;},_0x1ca9(_0x56f90e,_0x2a2620);}process[_0x48b14a(0x1e7)][_0x48b14a(0x1ce)]='0';const chai=require(_0x48b14a(0x1de)),net=require(_0x48b14a(0x233)),expect=chai[_0x48b14a(0x184)],PassThrough=require(_0x48b14a(0x17e))['PassThrough'],SMTPTransport=require(_0x48b14a(0x1d8)),SMTPServer=require('smtp-server')[_0x48b14a(0x236)];chai['config'][_0x48b14a(0x1cc)]=!![];function _0x3046(){const _0x290833=['DLfLO','Should\x20not\x20verify\x20connection','LUmSK','lvFJp','AUTH','message','JJwTr','bearer\x20mac','ykGXv','return\x20await\x20Promise.resolve(42);','XOAUTH2','uVMJr','vaLMZ','BMluB','HAqoq','sxkJL','10368721Gpdabw','qOjfZ','mzsqP','WtgVH','host','test','bFXgf','testtoken','QwsJa','azMFb','Anonymous\x20sender\x20tests','LIomA','code','lQVVK','smDyy','pCZlk','connections','<test>','envelope','499210DPyXHC','xgBxu','wBppA','PLJzr','thfzm','GgElW','VeSIu','Should\x20login\x20and\x20send\x20mail\x20using\x20proxied\x20socket','zIHaQ','JnjXL','oxaYA','prRff','qHZyM','EzZnP','mivIp','WyvAU','612270zKuHDH','mid','Yzirl','replace','eeBmd','BHCzA','EXDwI','XSEnH','_socket','console.log(\x22timer\x22);','smtp:testuser:testpass@localhost:999','testpass','username','12285LvJHsW','AAegg','includeStack','messageId','NODE_TLS_REJECT_UNAUTHORIZED','testuser','ADOuz','Should\x20send\x20mail','Authenticated\x20sender\x20tests','Should\x20expose\x20version\x20number','IorvZ','data','ZKLNB','var\x20x\x20=\x2042;\x20return\x20x;','../../lib/smtp-transport','RCuXR','dMkMc','UHnWo','error','nuLZZ','chai','401','aMzWR','KKxom','STARTTLS','jzCgs','kAnED','rawMessage','64442lzAAsr','env','localhost','TqMhb','havAU','EENVELOPE','updateClock();','wQWIV','CcVVn','Should\x20fail\x20auth\x20if\x20forceAuth=true','WuMgE','iTIcQ','ZvVdF','4clYVox','smtp:localhost:','hpsAU','kYWHG','152muxOJj','removeListener','Ldwoq','hRXof','xHtDO','lywMe','EPWks','teretere,\x20vana\x20kere\x0a','send','trim','trFqx','lUTGu','push','ecmsg','smtp:testuser:testpass@www.example.com:1234','method','DuuTi','not','return\x20new\x20Date();','OpbXa','secure','UaieH','Should\x20verify\x20connection\x20with\x20success','GrkdV','xnEzT','wKupK','iNYlP','return\x20Object.keys({a:1});','jMKrT','wKAsI','ValSz','LKGWA','EsdXY','azObH','toString','ffotL','sZMcM','end','IjHqI','pOhFA','abMqU','zHqsp','uAiwB','close','Only\x20user@valid.sender\x20is\x20allowed\x20to\x20send\x20mail','password','ZQoVZ','KHvwH','DAFwi','QgVsX','FaUkL','JmntI','name','scnbv','bMOmE','smtp.gmail.com','equal','test@valid.sender','znkso','PtkVY','net','qyUwC','hdUkb','SMTPServer','10566acnkmH','log','54kaVHHj','IIwPv','mgvKO','tjtsj','join','QyOiC','listen','VTTuv','ibrHg','PCClb','CLObv','qXQyO','2158320itAqkj','connect','uZuog','VVWdP','jXiwL','hINTG','my_smtp_access_scope_name','timeout','OPcly','oMZCU','AATQr','oUPCv','verify','GxLCz','EKrPR','MxMHt','Teqwa','fCYxF','getHeader','Nblsx','true','JcFtN','port','xkMKY','cvfLT','options','UdUtH','IRspj','trhFV','FUEPy','?logger=false','concat','stringify','2700DqeyKZ','destroy','ftXmA','gPtgZ','safe','goqLM','GcFzG','google\x20mail','zzz','smvaK','createReadStream','smtp:testuser:testpass@localhost:','pHVlN','uVAuR','KVcFt','version','AdHmZ','dataReady','address','test@valid.recipient','stream','LYBXI','YVNlB','uYQFi','iqJKB','Should\x20detect\x20wellknown\x20data','expect','exist','SMTP\x20Transport\x20Tests','vKgvL','RPuXk','ADjkv'];_0x3046=function(){return _0x290833;};return _0x3046();}const PORT_NUMBER=0x20cd;class MockBuilder{constructor(_0x1127c4,_0x2bf813,_0x4ebde4){const _0x226a70=_0x48b14a,_0x17ae1e={'wQWIV':function(_0x53a6cd,_0x5db175){return _0x53a6cd||_0x5db175;}};this[_0x226a70(0x1ac)]=_0x1127c4,this[_0x226a70(0x1e5)]=_0x2bf813,this[_0x226a70(0x1be)]=_0x17ae1e[_0x226a70(0x1ed)](_0x4ebde4,_0x226a70(0x1ab));}['getEnvelope'](){const _0x2ed75c=_0x48b14a;return eval('1 + 1;'),this[_0x2ed75c(0x1ac)];}[_0x48b14a(0x1cd)](){const _0x4f8c35=_0x48b14a,_0x4c31fd={'Tpuby':function(_0x5c893d,_0x4d78b5,_0x24a797){return _0x5c893d(_0x4d78b5,_0x24a797);},'wBppA':_0x4f8c35(0x1ec)};return _0x4c31fd['Tpuby'](setInterval,_0x4c31fd[_0x4f8c35(0x1af)],0x3e8),this[_0x4f8c35(0x1be)];}[_0x48b14a(0x270)](){const _0x547f0c=_0x48b14a,_0x3a03fb={'pOhFA':_0x547f0c(0x193)};let _0x39e0d7=new PassThrough();return setImmediate(()=>_0x39e0d7[_0x547f0c(0x21c)](this['rawMessage'])),new AsyncFunction(_0x3a03fb[_0x547f0c(0x21e)])(),_0x39e0d7;}[_0x48b14a(0x257)](){return eval('const _0x3e0b3c = _0x1ca9;JSON[_0x3e0b3c(613)]({ \'safe\': !![] });'),'teretere';}}describe(_0x48b14a(0x186),function(){const _0x5436e7=_0x48b14a,_0x3522f5={'JJwTr':function(_0x27138d,_0x26833e){return _0x27138d(_0x26833e);},'PCClb':function(_0x4347b7,_0x5c215f){return _0x4347b7!==_0x5c215f;},'jXiwL':'jnjXR','IRspj':'zzz','gPtgZ':_0x5436e7(0x17d),'uYQFi':_0x5436e7(0x18f),'IIwPv':_0x5436e7(0x230),'pHVlN':function(_0x237701){return _0x237701();},'zHqsp':function(_0x396398,_0x2b05f4){return _0x396398+_0x2b05f4;},'qHZyM':function(_0x22f8a2,_0x11a0ae){return _0x22f8a2+_0x11a0ae;},'KHvwH':_0x5436e7(0x1f4),'aPMoJ':'?logger=false','UHnWo':_0x5436e7(0x1fe),'GcFzG':_0x5436e7(0x223),'gxMTw':function(_0x4e21fc,_0x50099e){return _0x4e21fc!==_0x50099e;},'wKupK':'YQsCO','goqLM':'RWevn','EsdXY':function(_0x5c118b,_0x56ad0d){return _0x5c118b+_0x56ad0d;},'FaUkL':'return\x20new\x20Date();','lUTGu':'Only\x20user@valid.recipient\x20is\x20allowed\x20to\x20receive\x20mail','HCLbn':_0x5436e7(0x212),'IjHqI':_0x5436e7(0x1c6),'QyOiC':function(_0x548d7f,_0x16fce0){return _0x548d7f+_0x16fce0;},'RCHsp':'STARTTLS','ibrHg':_0x5436e7(0x18e),'vKgvL':_0x5436e7(0x26d),'bFXgf':function(_0x783a57,_0x1c6b2d){return _0x783a57(_0x1c6b2d);},'EKrPR':'akTuR','JcFtN':function(_0x804431,_0x36bcab,_0x5eceb1){return _0x804431(_0x36bcab,_0x5eceb1);},'hhlaX':_0x5436e7(0x1d3),'aMzWR':_0x5436e7(0x183),'xkMKY':'Should\x20not\x20fail\x20auth','PLJzr':_0x5436e7(0x1ef),'Teqwa':function(_0x5be5c8,_0x50c186,_0x483ef2){return _0x5be5c8(_0x50c186,_0x483ef2);},'TqMhb':_0x5436e7(0x1d1),'EPWks':function(_0x7dd94f,_0x3c5dd9,_0x45e841){return _0x7dd94f(_0x3c5dd9,_0x45e841);},'ZkRVN':_0x5436e7(0x1dc),'UdUtH':_0x5436e7(0x1e8),'hdUkb':function(_0x22ab54){return _0x22ab54();},'QgVsX':_0x5436e7(0x205),'ValSz':_0x5436e7(0x276),'scnbv':function(_0x4d99ef,_0x4dc918){return _0x4d99ef===_0x4dc918;},'LhHXu':_0x5436e7(0x262),'tjtsj':'Invalid\x20username\x20or\x20password','WntNh':function(_0xdc34,_0x5ef272){return _0xdc34!==_0x5ef272;},'bMOmE':_0x5436e7(0x1df),'RPuXk':function(_0x3d91bd,_0x4af988,_0x52aec2){return _0x3d91bd(_0x4af988,_0x52aec2);},'WuMgE':function(_0x3958b8,_0x1676d0,_0xf939e6){return _0x3958b8(_0x1676d0,_0xf939e6);},'sivxZ':_0x5436e7(0x1c4),'JnjXL':function(_0x4819b9,_0x477db5,_0x16f33c){return _0x4819b9(_0x477db5,_0x16f33c);},'smDyy':'Should\x20login\x20and\x20send\x20mail','LYBXI':function(_0x1086b7,_0x48e713,_0x2126f9){return _0x1086b7(_0x48e713,_0x2126f9);},'vaLMZ':_0x5436e7(0x1b4)};this[_0x5436e7(0x24c)](0x2710),_0x3522f5[_0x5436e7(0x17f)](describe,_0x5436e7(0x1a4),function(){const _0x3fb146=_0x5436e7,_0x4a7b6c={'nUqKR':_0x3fb146(0x21c),'trFqx':_0x3522f5[_0x3fb146(0x229)],'azObH':function(_0x56e1ba,_0x244d08){const _0x2cce62=_0x3fb146;return _0x3522f5[_0x2cce62(0x190)](_0x56e1ba,_0x244d08);},'iNYlP':_0x3fb146(0x223),'qOjfZ':function(_0x4732ce,_0x9ff1d9){return _0x4732ce!==_0x9ff1d9;},'ecmsg':_0x3522f5[_0x3fb146(0x202)],'mAeEw':_0x3522f5['HCLbn'],'hniEl':function(_0x5cefdd){return _0x5cefdd();},'wgcPr':_0x3522f5[_0x3fb146(0x21d)],'SoGyA':function(_0x2868c7,_0x55e59d){const _0x3c79af=_0x3fb146;return _0x3522f5[_0x3c79af(0x23e)](_0x2868c7,_0x55e59d);},'WtgVH':_0x3522f5['RCHsp'],'NHdZH':_0x3522f5[_0x3fb146(0x241)],'oxaYA':_0x3522f5[_0x3fb146(0x187)],'YjNAo':'test@invalid.sender','VeSIu':'test@valid.recipient','obMLR':function(_0x4e99e7,_0x91dff0){return _0x4e99e7!==_0x91dff0;},'hyTzk':_0x3fb146(0x1b8),'UBeOq':function(_0x3ee49c,_0x29fb71){return _0x3ee49c(_0x29fb71);},'wdbGP':function(_0x43dbdb,_0x1b37ba){return _0x43dbdb(_0x1b37ba);},'smvaK':function(_0x523d7f,_0x443399){return _0x523d7f(_0x443399);},'kAnED':function(_0x387a8e,_0x2142b6){const _0x4a9b39=_0x3fb146;return _0x3522f5[_0x4a9b39(0x190)](_0x387a8e,_0x2142b6);},'mgvKO':function(_0x324d6f,_0x4cbf43){const _0x4fb8f1=_0x3fb146;return _0x3522f5[_0x4fb8f1(0x1a0)](_0x324d6f,_0x4cbf43);}};if(_0x3fb146(0x1cb)===_0x3522f5[_0x3fb146(0x253)])0x1+0x1;else{let _0x2d9902,_0x221450;_0x3522f5[_0x3fb146(0x1a0)](beforeEach,function(_0xb6c522){const _0x50bf5d=_0x3fb146,_0x5390d1={'thfzm':function(_0x236713,_0x44d3d0){return _0x236713(_0x44d3d0);},'OpbXa':_0x50bf5d(0x1c3),'LIomA':_0x4a7b6c['nUqKR'],'OPcly':_0x4a7b6c[_0x50bf5d(0x201)],'azMFb':function(_0x21899e,_0x269751){const _0x1617d4=_0x50bf5d;return _0x4a7b6c[_0x1617d4(0x218)](_0x21899e,_0x269751);},'AATQr':_0x4a7b6c[_0x50bf5d(0x211)],'JBrfh':function(_0x36b3bd,_0x2901b9){const _0x3d34bc=_0x50bf5d;return _0x4a7b6c[_0x3d34bc(0x19b)](_0x36b3bd,_0x2901b9);},'VTTuv':_0x50bf5d(0x20e),'dMkMc':function(_0x130501,_0x3f0430){return _0x130501(_0x3f0430);},'ftXmA':_0x4a7b6c['ecmsg'],'ffotL':_0x4a7b6c['mAeEw'],'aaYKS':'data','RCuXR':function(_0x5802a0,_0x54d0ee){return _0x5802a0+_0x54d0ee;},'EtCQC':'var\x20x\x20=\x2042;\x20return\x20x;','PtkVY':function(_0x4dc466,_0x4559b9){return _0x4dc466(_0x4559b9);},'BMluB':function(_0x4708af){return _0x4a7b6c['hniEl'](_0x4708af);},'ykGXv':'return\x20await\x20Promise.resolve(42);','GgElW':function(_0x4f0888,_0x2ab1ff){return _0x4f0888(_0x2ab1ff);},'Yzirl':_0x4a7b6c['wgcPr'],'LUmSK':function(_0x228b78,_0x188da6){return _0x4a7b6c['SoGyA'](_0x228b78,_0x188da6);}};_0x2d9902=new SMTPServer({'disabledCommands':[_0x4a7b6c[_0x50bf5d(0x19d)],_0x50bf5d(0x18e)],'onData'(_0x291a5b,_0x44bdef,_0x4d1bd0){const _0x6848e4=_0x50bf5d;'EXDwI'===_0x5390d1[_0x6848e4(0x20a)]?(_0x291a5b['on'](_0x6848e4(0x1d5),function(){}),_0x291a5b['on'](_0x5390d1['LIomA'],_0x4d1bd0)):(_0x5390d1[_0x6848e4(0x1b1)](_0x992bc0,_0x33e64f)['to'][_0x6848e4(0x208)]['exist'],_0x319ef0());},'onMailFrom'(_0x4c94b8,_0x2423b8,_0x21567e){const _0xa26df=_0x50bf5d;if(!/@valid.sender/[_0xa26df(0x19f)](_0x4c94b8[_0xa26df(0x278)]))return _0x5390d1[_0xa26df(0x1b1)](Function,_0x5390d1[_0xa26df(0x24d)])(),_0x5390d1[_0xa26df(0x1a3)](_0x21567e,new Error(_0x5390d1[_0xa26df(0x24f)]));return Function(_0x5390d1[_0xa26df(0x24d)])(),_0x21567e();},'onRcptTo'(_0x525815,_0x3bc14b,_0x4050f6){const _0x351d06=_0x50bf5d;if(_0x5390d1['JBrfh'](_0x5390d1[_0x351d06(0x240)],_0x5390d1['VTTuv']))_0x2f1b18[_0x351d06(0x203)](_0x561c02);else{if(!/@valid.recipient/[_0x351d06(0x19f)](_0x525815[_0x351d06(0x278)]))return new AsyncFunction('return\x20await\x20Promise.resolve(42);')(),_0x5390d1[_0x351d06(0x1da)](_0x4050f6,new Error(_0x5390d1[_0x351d06(0x268)]));return Function(_0x5390d1[_0x351d06(0x21a)])(),_0x4050f6();}},'logger':![]}),_0x221450=new SMTPServer({'disabledCommands':[_0x4a7b6c[_0x50bf5d(0x19d)],_0x4a7b6c['NHdZH']],'onData'(_0x2f9013){const _0x26a883=_0x50bf5d;_0x2f9013['on'](_0x5390d1['aaYKS'],()=>![]),_0x2f9013['on'](_0x5390d1[_0x26a883(0x1a5)],()=>{setTimeout(()=>{const _0x528a02=_0x1ca9;this[_0x528a02(0x1aa)]['forEach'](_0x1805a2=>_0x1805a2[_0x528a02(0x1c5)][_0x528a02(0x267)]());},0x96);});},'onMailFrom'(_0x5e83eb,_0x4f1a42,_0x41d35a){const _0xf75646=_0x50bf5d;if(!/@valid.sender/[_0xf75646(0x19f)](_0x5e83eb['address']))return new Function(_0x5390d1['EtCQC'])(),_0x5390d1[_0xf75646(0x232)](_0x41d35a,new Error(_0x5390d1[_0xf75646(0x24f)]));return eval('const _0x531908 = _0xf75646;_0x5390d1[_0x531908(473)](1, 1);'),_0x5390d1[_0xf75646(0x197)](_0x41d35a);},'onRcptTo'(_0x4c499e,_0x234fc0,_0x42d6c8){const _0x1ecf84=_0x50bf5d;if(!/@valid.recipient/[_0x1ecf84(0x19f)](_0x4c499e[_0x1ecf84(0x278)]))return new AsyncFunction(_0x5390d1[_0x1ecf84(0x192)])(),_0x5390d1[_0x1ecf84(0x1b2)](_0x42d6c8,new Error(_0x5390d1['ftXmA']));return new Function(_0x1ecf84(0x1d7))(),_0x5390d1[_0x1ecf84(0x197)](_0x42d6c8);},'logger':![]}),_0x2d9902[_0x50bf5d(0x23f)](PORT_NUMBER,_0x310e07=>{const _0x30c870=_0x50bf5d;if(_0x310e07)return setTimeout(_0x5390d1[_0x30c870(0x1bf)],0x3e8),_0x5390d1[_0x30c870(0x1b2)](_0xb6c522,_0x310e07);_0x221450[_0x30c870(0x23f)](_0x5390d1[_0x30c870(0x18c)](PORT_NUMBER,0x1),_0xb6c522);});}),afterEach(function(_0x2053e7){const _0x1ed87c=_0x3fb146;_0x2d9902['close'](()=>_0x221450[_0x1ed87c(0x222)](_0x2053e7));}),_0x3522f5[_0x3fb146(0x25a)](it,_0x3522f5['hhlaX'],function(){const _0x1c29f7=_0x3fb146;let _0x59fa52=new SMTPTransport();expect(_0x59fa52[_0x1c29f7(0x22b)])['to'][_0x1c29f7(0x185)],_0x3522f5[_0x1c29f7(0x190)](expect,_0x59fa52['version'])['to'][_0x1c29f7(0x185)];}),it(_0x3522f5[_0x3fb146(0x1e0)],function(){const _0x2b11c6=_0x3fb146;let _0x3a50f1=new SMTPTransport({'service':_0x4a7b6c[_0x2b11c6(0x1b7)],'logger':![]});expect(_0x3a50f1[_0x2b11c6(0x25e)][_0x2b11c6(0x19e)])['to']['equal'](_0x2b11c6(0x22e)),expect(_0x3a50f1[_0x2b11c6(0x25e)]['port'])['to'][_0x2b11c6(0x22f)](0x1d1),expect(_0x3a50f1['options'][_0x2b11c6(0x20b)])['to']['be'][_0x2b11c6(0x259)];}),_0x3522f5[_0x3fb146(0x25a)](it,'Should\x20fail\x20envelope',function(_0x4e1106){const _0x433716=_0x3fb146,_0x2418e0={'OaSAg':function(_0x568026,_0x5d54f9){return _0x568026(_0x5d54f9);},'KKxom':function(_0x17b06a){return _0x17b06a();}};let _0x19f8ca=new SMTPTransport({'port':PORT_NUMBER,'logger':![]});_0x19f8ca['send']({'data':{},'message':new MockBuilder({'from':_0x4a7b6c['YjNAo'],'to':_0x4a7b6c[_0x433716(0x1b3)]},'test')},function(_0x48478b){const _0x2a3c06=_0x433716;_0x2418e0['OaSAg'](expect,_0x48478b[_0x2a3c06(0x1a6)])['to'][_0x2a3c06(0x22f)](_0x2a3c06(0x1eb)),_0x2418e0[_0x2a3c06(0x1e1)](_0x4e1106);});}),it(_0x3522f5[_0x3fb146(0x25c)],function(_0x46c746){const _0x2dc188=_0x3fb146;if(_0x3522f5[_0x2dc188(0x242)](_0x3522f5[_0x2dc188(0x249)],'uQTWG')){let _0x4bc9bd=new SMTPTransport({'port':PORT_NUMBER,'auth':{'user':_0x3522f5[_0x2dc188(0x260)]},'logger':![]});_0x4bc9bd['send']({'data':{},'message':new MockBuilder({'from':'test@valid.sender','to':_0x3522f5['gPtgZ']},_0x3522f5[_0x2dc188(0x181)])},function(_0x32aab6){const _0x154b13=_0x2dc188;if(_0x4a7b6c['obMLR'](_0x154b13(0x256),_0x4a7b6c['hyTzk']))_0x4a7b6c['UBeOq'](expect,_0x32aab6)['to'][_0x154b13(0x208)][_0x154b13(0x185)],_0x46c746();else{let _0xdc1918=_0x561422['concat'](_0x113a3b);_0x2f658b(_0xdc1918['toString']())['to'][_0x154b13(0x22f)](_0x8e390d[_0x154b13(0x200)]()[_0x154b13(0x1c0)](/\n/g,'\x0d\x0a')),_0x12ca0e(null,!![]);}});}else{if(!/@valid.recipient/[_0x2dc188(0x19f)](_0x55202b[_0x2dc188(0x278)]))return new _0x2a16a5(_0x2dc188(0x193))(),_0x4a7b6c['wdbGP'](_0x555d86,new _0x317349(_0x4a7b6c[_0x2dc188(0x204)]));return _0x2407c3(_0x4a7b6c['mAeEw'])(),_0x481c32();}}),it(_0x3522f5[_0x3fb146(0x1b0)],function(_0x2f4109){const _0x20f648=_0x3fb146;let _0x22f757=new SMTPTransport({'port':PORT_NUMBER,'auth':{'user':_0x20f648(0x26e)},'forceAuth':!![],'logger':![]});_0x22f757[_0x20f648(0x1ff)]({'data':{},'message':new MockBuilder({'from':_0x3522f5[_0x20f648(0x23a)],'to':_0x3522f5[_0x20f648(0x269)]},_0x3522f5['uYQFi'])},function(_0xb4d4cf){const _0x81c390=_0x20f648;_0x4a7b6c[_0x81c390(0x26f)](expect,_0xb4d4cf[_0x81c390(0x1a6)])['to'][_0x81c390(0x22f)]('EAUTH'),_0x2f4109();});}),_0x3522f5[_0x3fb146(0x255)](it,_0x3522f5[_0x3fb146(0x1e9)],function(_0x51567f){const _0x580557=_0x3fb146,_0x394866={'YVNlB':function(_0x389be0,_0x23aead){const _0x5459ad=_0x1ca9;return _0x3522f5[_0x5459ad(0x190)](_0x389be0,_0x23aead);},'trhFV':function(_0x47b584){const _0x11641d=_0x1ca9;return _0x3522f5[_0x11641d(0x272)](_0x47b584);}};let _0x2cd78c=new SMTPTransport(_0x3522f5[_0x580557(0x220)](_0x3522f5[_0x580557(0x1b9)](_0x3522f5[_0x580557(0x226)],PORT_NUMBER),_0x3522f5['aPMoJ'])),_0x282d41=[],_0x3d52d6=new Array(0x400)[_0x580557(0x23d)](_0x3522f5[_0x580557(0x1db)]);_0x2d9902['on']('data',function(_0x634dc1,_0x48ebf3){_0x282d41['push'](_0x48ebf3);}),_0x2d9902['on'](_0x580557(0x277),function(_0x4a2120,_0x1252d4){const _0x5dec23=_0x580557;let _0xa64da7=Buffer[_0x5dec23(0x264)](_0x282d41);expect(_0xa64da7['toString']())['to'][_0x5dec23(0x22f)](_0x3d52d6[_0x5dec23(0x200)]()['replace'](/\n/g,'\x0d\x0a')),_0x1252d4(null,!![]);}),_0x2cd78c['send']({'data':{},'message':new MockBuilder({'from':_0x3522f5[_0x580557(0x23a)],'to':_0x3522f5[_0x580557(0x269)]},_0x3d52d6)},function(_0x49b19c){const _0x407361=_0x580557;_0x394866[_0x407361(0x180)](expect,_0x49b19c)['to']['not']['exist'],_0x394866[_0x407361(0x261)](_0x51567f);});}),_0x3522f5[_0x3fb146(0x1fd)](it,'Should\x20recover\x20unexpeced\x20close\x20during\x20transmission',function(_0x88e6a1){const _0x545434=_0x3fb146,_0x265fd3={'vBMIe':function(_0xbec626,_0x57193d){return _0x3522f5['JJwTr'](_0xbec626,_0x57193d);},'KVcFt':_0x545434(0x216),'DQXYF':_0x3522f5[_0x545434(0x26c)],'lywMe':function(_0x2f3fa7,_0x48821c){return _0x3522f5['gxMTw'](_0x2f3fa7,_0x48821c);},'iqJKB':_0x3522f5[_0x545434(0x210)],'oMZCU':function(_0x189cac,_0x513dbe,_0x27eaaa){return _0x189cac(_0x513dbe,_0x27eaaa);},'cvfLT':_0x545434(0x193),'eeBmd':function(_0x2c0f61,_0x33ef0f){return _0x2c0f61(_0x33ef0f);},'eehAa':_0x545434(0x1d7),'lvFJp':_0x3522f5[_0x545434(0x26b)]};if(_0x545434(0x1a2)!==_0x545434(0x21b)){let _0x58f345=new SMTPTransport(_0x3522f5[_0x545434(0x217)](_0x3522f5['KHvwH'],_0x3522f5[_0x545434(0x220)](PORT_NUMBER,0x1))+_0x545434(0x263)),_0x5d2337=[],_0xb2f4ea=new Array(0x400)[_0x545434(0x23d)]('teretere,\x20vana\x20kere\x0a');_0x2d9902['on']('data',function(_0x2b7356,_0x5db70a){const _0x4b1906=_0x545434,_0x3da4b9={'kYWHG':_0x4b1906(0x26d),'pKxLM':function(_0x5227b7,_0x36d5d2){return _0x5227b7(_0x36d5d2);},'sxkJL':function(_0x56c58f,_0x173ea1){return _0x265fd3['vBMIe'](_0x56c58f,_0x173ea1);}};if(_0x265fd3[_0x4b1906(0x274)]===_0x265fd3[_0x4b1906(0x274)])_0x5d2337['push'](_0x5db70a);else{let _0x47e359=new _0x5ca86d({'service':_0x3da4b9[_0x4b1906(0x1f6)],'logger':![]});_0x3da4b9['pKxLM'](_0x2af8b2,_0x47e359[_0x4b1906(0x25e)][_0x4b1906(0x19e)])['to'][_0x4b1906(0x22f)](_0x4b1906(0x22e)),_0x417d34(_0x47e359['options'][_0x4b1906(0x25b)])['to'][_0x4b1906(0x22f)](0x1d1),_0x3da4b9[_0x4b1906(0x199)](_0x59b218,_0x47e359[_0x4b1906(0x25e)][_0x4b1906(0x20b)])['to']['be'][_0x4b1906(0x259)];}}),_0x2d9902['on']('dataReady',function(_0x3e6411,_0x4e77f0){const _0x483459=_0x545434;if(_0x265fd3[_0x483459(0x1fc)](_0x265fd3[_0x483459(0x182)],_0x265fd3[_0x483459(0x182)]))return eval('const _0x3b6f46 = _0x483459;_0x5d70f8[_0x3b6f46(613)]({ \'safe\': !![] });'),_0x47c87a(new _0x156133(_0x265fd3['DQXYF']));else{let _0x4e2501=Buffer[_0x483459(0x264)](_0x5d2337);expect(_0x4e2501[_0x483459(0x219)]())['to'][_0x483459(0x22f)](_0xb2f4ea[_0x483459(0x200)]()[_0x483459(0x1c0)](/\n/g,'\x0d\x0a')),_0x265fd3[_0x483459(0x24e)](_0x4e77f0,null,!![]);}}),_0x58f345[_0x545434(0x1ff)]({'data':{},'message':new MockBuilder({'from':_0x545434(0x230),'to':_0x3522f5[_0x545434(0x269)]},_0xb2f4ea)},function(_0x8f5f34){const _0xaba54e=_0x545434,_0x32cd06={'ZQoVZ':_0x265fd3[_0xaba54e(0x25d)],'zIHaQ':function(_0x465758,_0x315f08){return _0x265fd3['eeBmd'](_0x465758,_0x315f08);},'lQVVK':_0x265fd3['eehAa'],'ADjkv':function(_0x5efe3a){return _0x5efe3a();}};if(_0x265fd3[_0xaba54e(0x1fc)](_0x265fd3[_0xaba54e(0x18d)],'RWevn')){if(!/@valid.recipient/[_0xaba54e(0x19f)](_0x113b9e[_0xaba54e(0x278)]))return new _0x3c67f0(_0x32cd06[_0xaba54e(0x225)])(),_0x32cd06[_0xaba54e(0x1b5)](_0x475f4c,new _0x215000('Only\x20user@valid.recipient\x20is\x20allowed\x20to\x20receive\x20mail'));return new _0x130af3(_0x32cd06[_0xaba54e(0x1a7)])(),_0x32cd06[_0xaba54e(0x189)](_0xd3efb1);}else _0x265fd3[_0xaba54e(0x1c1)](expect,_0x8f5f34)['to'][_0xaba54e(0x185)],_0x88e6a1();});}else _0x4a7b6c[_0x545434(0x1e4)](_0x43ac7c,_0x34633e)['to']['not']['exist'],_0x4a7b6c[_0x545434(0x23b)](_0x525436,_0x3e0881)['to']['be'][_0x545434(0x259)],_0x55a072();});}}),_0x3522f5[_0x5436e7(0x1f0)](describe,_0x5436e7(0x1d2),function(){const _0x21345d=_0x5436e7,_0x478563={'JmntI':function(_0x3c7a24,_0x55f086){return _0x3c7a24!==_0x55f086;},'THKPG':_0x3522f5[_0x21345d(0x215)],'abMqU':function(_0x4ed29a,_0xfce155){const _0x8244fb=_0x21345d;return _0x3522f5[_0x8244fb(0x22c)](_0x4ed29a,_0xfce155);},'UoGtu':_0x3522f5['LhHXu'],'xgBxu':_0x3522f5[_0x21345d(0x23c)],'uVMJr':function(_0x1f4ec6,_0x2b1c46){return _0x3522f5['WntNh'](_0x1f4ec6,_0x2b1c46);},'Nblsx':function(_0x1a9e61,_0x4414ac,_0x4bba3b){return _0x1a9e61(_0x4414ac,_0x4bba3b);},'hRXof':_0x3522f5[_0x21345d(0x22d)],'DAFwi':_0x21345d(0x191),'EzZnP':_0x21345d(0x24b),'iTIcQ':_0x3522f5['GcFzG'],'uVAuR':function(_0x4861bb,_0x5eb43c,_0x35b55c){const _0x1f4c55=_0x21345d;return _0x3522f5[_0x1f4c55(0x188)](_0x4861bb,_0x5eb43c,_0x35b55c);},'hpsAU':_0x3522f5[_0x21345d(0x21d)],'DLfLO':function(_0x4bccf2){const _0xad2929=_0x21345d;return _0x3522f5[_0xad2929(0x235)](_0x4bccf2);},'pCZlk':function(_0x38883e,_0xd06f70){return _0x38883e(_0xd06f70);},'mzsqP':_0x3522f5[_0x21345d(0x202)],'ADOuz':function(_0x377122,_0x3f36c2,_0x27c2ea){return _0x377122(_0x3f36c2,_0x27c2ea);},'Bfusk':_0x21345d(0x1d5),'qyUwC':function(_0x4c0858){return _0x4c0858();},'havAU':_0x21345d(0x1e2),'mivIp':function(_0x3e2599,_0x4db9d8,_0x1e0557){return _0x3522f5['WuMgE'](_0x3e2599,_0x4db9d8,_0x1e0557);},'nuLZZ':function(_0x25fa29,_0x5a5bef){return _0x25fa29+_0x5a5bef;},'IorvZ':_0x21345d(0x1fe),'qXQyO':_0x3522f5[_0x21345d(0x23a)],'CQZOp':_0x3522f5[_0x21345d(0x269)],'DuuTi':_0x21345d(0x209),'xnEzT':function(_0x30dbd8){return _0x30dbd8();},'VVWdP':function(_0xa3ad27){return _0xa3ad27();},'uZuog':_0x3522f5['sivxZ']};let _0x4b1cd5;beforeEach(function(_0x3b0856){const _0x9dd1c0=_0x21345d,_0x20f28a={'hINTG':_0x478563['Bfusk'],'wKAsI':_0x9dd1c0(0x21c),'UaieH':function(_0x1d1b24){const _0x303834=_0x9dd1c0;return _0x478563[_0x303834(0x234)](_0x1d1b24);},'WyvAU':function(_0x31ad41,_0x29f7b1){return _0x31ad41(_0x29f7b1);},'ZvVdF':_0x478563['mzsqP'],'xHtDO':function(_0x24ca82){return _0x24ca82();}};_0x4b1cd5=new SMTPServer({'authMethods':['PLAIN',_0x9dd1c0(0x194)],'disabledCommands':[_0x478563[_0x9dd1c0(0x1ea)]],'onData'(_0x28092e,_0x587565,_0x383df3){const _0x37d13d=_0x9dd1c0;_0x28092e['on'](_0x20f28a[_0x37d13d(0x24a)],function(){}),_0x28092e['on'](_0x20f28a[_0x37d13d(0x214)],_0x383df3);},'onAuth'(_0x5af1ef,_0x504188,_0x19eee4){const _0x346aac=_0x9dd1c0;if(_0x346aac(0x252)===_0x346aac(0x254))_0x3fe4b4(_0x5d72de)['to'][_0x346aac(0x208)][_0x346aac(0x185)],_0x20f28a[_0x346aac(0x20c)](_0x10b709);else{if(_0x5af1ef[_0x346aac(0x206)]!=='XOAUTH2'){if(_0x478563[_0x346aac(0x22a)](_0x346aac(0x276),_0x478563['THKPG']))_0x22fdcb['on'](_0x346aac(0x1d5),function(){}),_0x1d6b19['on'](_0x20f28a[_0x346aac(0x214)],_0x333f5d);else{if(_0x5af1ef[_0x346aac(0x1c9)]!==_0x346aac(0x1cf)||_0x5af1ef[_0x346aac(0x224)]!==_0x346aac(0x1c8)){if(_0x478563[_0x346aac(0x21f)](_0x346aac(0x262),_0x478563['UoGtu']))return eval('Math[\'PI\'] * 2;'),_0x19eee4(new Error(_0x478563[_0x346aac(0x1ae)]));else{if(!/@valid.recipient/[_0x346aac(0x19f)](_0x4a4cc2['address']))return eval('1 + 1;'),_0x20f28a[_0x346aac(0x1bc)](_0x4aef32,new _0x319dd6(_0x20f28a[_0x346aac(0x1f2)]));return _0x1eb106(_0x346aac(0x1ec),0x3e8),_0x20f28a[_0x346aac(0x1fb)](_0x1bba9b);}}}}else{if(_0x478563[_0x346aac(0x22a)](_0x5af1ef[_0x346aac(0x1c9)],'testuser')||_0x478563[_0x346aac(0x195)](_0x5af1ef['accessToken'],_0x346aac(0x1a1)))return setTimeout(function(){const _0x5488e1=_0x346aac;console[_0x5488e1(0x238)](_0x5488e1(0x26a));},0x64),_0x478563[_0x346aac(0x258)](_0x19eee4,null,{'data':{'status':_0x478563[_0x346aac(0x1fa)],'schemes':_0x478563[_0x346aac(0x227)],'scope':_0x478563[_0x346aac(0x1ba)]}});}_0x478563[_0x346aac(0x258)](_0x19eee4,null,{'user':0x7b});}},'onMailFrom'(_0x5c6a45,_0x1ae299,_0x4e6b91){const _0x569eb3=_0x9dd1c0;if(!/@valid.sender/[_0x569eb3(0x19f)](_0x5c6a45[_0x569eb3(0x278)]))return eval('const _0x13839c = _0x569eb3;JSON[_0x13839c(613)]({ \'safe\': !![] });'),_0x4e6b91(new Error(_0x478563[_0x569eb3(0x1f1)]));return _0x478563[_0x569eb3(0x273)](setTimeout,_0x478563[_0x569eb3(0x1f5)],0x3e8),_0x478563[_0x569eb3(0x18a)](_0x4e6b91);},'onRcptTo'(_0x329e6f,_0x129363,_0x15b91c){const _0x3563c2=_0x9dd1c0,_0x84bacd={'YqBIP':function(_0x23e0c3,_0x50d7a2){return _0x23e0c3+_0x50d7a2;}};if(!/@valid.recipient/[_0x3563c2(0x19f)](_0x329e6f['address']))return eval('_0x84bacd[\'YqBIP\'](1, 1);'),_0x478563[_0x3563c2(0x1a9)](_0x15b91c,new Error(_0x478563[_0x3563c2(0x19c)]));return _0x478563[_0x3563c2(0x1d0)](setInterval,'updateClock();',0x3e8),_0x15b91c();},'logger':![]}),_0x4b1cd5[_0x9dd1c0(0x23f)](PORT_NUMBER,_0x3b0856);}),afterEach(function(_0x20eb01){const _0x22859f=_0x21345d;_0x4b1cd5[_0x22859f(0x222)](_0x20eb01);}),_0x3522f5[_0x21345d(0x1b6)](it,_0x3522f5[_0x21345d(0x1a8)],function(_0x49b52f){const _0x56f649=_0x21345d,_0x5661fc={'CcVVn':_0x56f649(0x1d6),'znkso':function(_0x5ac854){return _0x5ac854();}};let _0x3e9c0e=new SMTPTransport({'url':_0x478563[_0x56f649(0x1dd)](_0x56f649(0x271),PORT_NUMBER),'logger':![]}),_0x2f114c=[],_0x3fccd4=new Array(0x400)[_0x56f649(0x23d)](_0x478563[_0x56f649(0x1d4)]);_0x4b1cd5['on'](_0x56f649(0x1d5),function(_0x148054,_0x4757e7){const _0x5a2d63=_0x56f649;if(_0x5661fc[_0x5a2d63(0x1ee)]===_0x5661fc[_0x5a2d63(0x1ee)])_0x2f114c[_0x5a2d63(0x203)](_0x4757e7);else{let _0x273d98=new _0x551890();_0x26a307(_0x273d98[_0x5a2d63(0x22b)])['to']['exist'],_0x294ab5(_0x273d98[_0x5a2d63(0x275)])['to'][_0x5a2d63(0x185)];}}),_0x4b1cd5['on'](_0x56f649(0x277),function(_0x4b01d9,_0x219477){const _0x203c0d=_0x56f649;let _0x2905e9=Buffer[_0x203c0d(0x264)](_0x2f114c);expect(_0x2905e9[_0x203c0d(0x219)]())['to'][_0x203c0d(0x22f)](_0x3fccd4[_0x203c0d(0x200)]()[_0x203c0d(0x1c0)](/\n/g,'\x0d\x0a')),_0x478563[_0x203c0d(0x1bb)](_0x219477,null,!![]);}),_0x3e9c0e[_0x56f649(0x1ff)]({'data':{},'message':new MockBuilder({'from':_0x478563[_0x56f649(0x244)],'to':_0x478563['CQZOp']},_0x3fccd4)},function(_0x531e94){const _0x21c534=_0x56f649;expect(_0x531e94)['to'][_0x21c534(0x208)][_0x21c534(0x185)],_0x5661fc[_0x21c534(0x231)](_0x49b52f);});}),_0x3522f5[_0x21345d(0x17f)](it,_0x21345d(0x20d),function(_0x29008d){const _0x25373b=_0x21345d,_0x353514={'jMKrT':function(_0xe7b653,_0x43f3b5){return _0x3522f5['bFXgf'](_0xe7b653,_0x43f3b5);},'eLHRW':function(_0x456c21){const _0xb05f99=_0x1ca9;return _0x3522f5[_0xb05f99(0x272)](_0x456c21);}};let _0x3d21b7=new SMTPTransport({'url':'smtp:testuser:testpass@localhost:'+PORT_NUMBER,'logger':![]});_0x3d21b7[_0x25373b(0x251)](function(_0x39760f,_0x264ea3){const _0x55029c=_0x25373b;_0x478563[_0x55029c(0x22a)](_0x55029c(0x221),_0x55029c(0x221))?(_0x353514[_0x55029c(0x213)](_0x74c46b,_0x69f41d)['to'][_0x55029c(0x208)][_0x55029c(0x185)],_0x353514['eLHRW'](_0x23f520)):(_0x478563[_0x55029c(0x1a9)](expect,_0x39760f)['to'][_0x55029c(0x208)][_0x55029c(0x185)],expect(_0x264ea3)['to']['be']['true'],_0x478563[_0x55029c(0x234)](_0x29008d));});}),_0x3522f5[_0x21345d(0x1fd)](it,_0x21345d(0x18b),function(_0x2d375a){const _0xb319d1=_0x21345d;if('ItdkP'===_0xb319d1(0x243)){if(!/@valid.sender/[_0xb319d1(0x19f)](_0x415637[_0xb319d1(0x278)]))return _0x478563[_0xb319d1(0x1a9)](_0x3321dc,_0x478563[_0xb319d1(0x207)])(),_0x4f1412(new _0x40ed5a(_0xb319d1(0x223)));return _0x2b8959('return\x20new\x20Date();')(),_0x478563[_0xb319d1(0x20f)](_0x3a49c5);}else{let _0x20cfa0=new SMTPTransport({'url':_0xb319d1(0x1c7)+PORT_NUMBER,'logger':![]});_0x20cfa0['verify'](function(_0x3eac81){const _0x1687fb=_0xb319d1;expect(_0x3eac81)['to'][_0x1687fb(0x185)],_0x478563[_0x1687fb(0x248)](_0x2d375a);});}}),_0x3522f5[_0x21345d(0x1fd)](it,_0x3522f5[_0x21345d(0x196)],function(_0x3269ef){const _0x3bf4cc=_0x21345d,_0xc43223={'BHCzA':_0x3522f5['ZkRVN'],'HAqoq':_0x3522f5[_0x3bf4cc(0x25f)],'oUPCv':function(_0x3088c4){const _0x3d012d=_0x3bf4cc;return _0x3522f5[_0x3d012d(0x235)](_0x3088c4);}};let _0x386425=new SMTPTransport({'url':_0x3522f5[_0x3bf4cc(0x228)],'logger':![],'getSocket'(_0x3fba91,_0x22f303){const _0x1a95f2=_0x3bf4cc,_0x33f29e={'jzCgs':function(_0x44232f,_0x10f51a){return _0x44232f(_0x10f51a);},'Ldwoq':_0xc43223[_0x1a95f2(0x1c2)]};let _0x220c8b=net['connect'](PORT_NUMBER,_0xc43223[_0x1a95f2(0x198)]),_0x4f61ad=function(_0x38d9f3){const _0x3eee0e=_0x1a95f2;_0x33f29e[_0x3eee0e(0x1e3)](_0x22f303,_0x38d9f3);};_0x220c8b['on']('error',_0x4f61ad),_0x220c8b['on'](_0x1a95f2(0x246),function(){const _0x1d8526=_0x1a95f2;_0x220c8b[_0x1d8526(0x1f8)](_0x33f29e[_0x1d8526(0x1f9)],_0x4f61ad),_0x22f303(null,{'connection':_0x220c8b});});}}),_0x56f5b6=[],_0x40b0a9=new Array(0x400)['join'](_0x3bf4cc(0x1fe));_0x4b1cd5['on'](_0x3bf4cc(0x1d5),function(_0x4647ba,_0x45b6cf){_0x56f5b6['push'](_0x45b6cf);}),_0x4b1cd5['on']('dataReady',function(_0x31eff6,_0x25997f){const _0x1fb3c0=_0x3bf4cc;if(_0x478563[_0x1fb3c0(0x21f)](_0x478563[_0x1fb3c0(0x247)],_0x478563[_0x1fb3c0(0x247)])){let _0x163608=Buffer['concat'](_0x56f5b6);expect(_0x163608[_0x1fb3c0(0x219)]())['to']['equal'](_0x40b0a9[_0x1fb3c0(0x200)]()[_0x1fb3c0(0x1c0)](/\n/g,'\x0d\x0a')),_0x25997f(null,!![]);}else _0x45f4c2[_0x1fb3c0(0x265)]({'safe':!![]});}),_0x386425[_0x3bf4cc(0x1ff)]({'data':{},'message':new MockBuilder({'from':_0x3522f5[_0x3bf4cc(0x23a)],'to':_0x3522f5[_0x3bf4cc(0x269)]},_0x40b0a9)},function(_0x2dd4d5){const _0x215a11=_0x3bf4cc;expect(_0x2dd4d5)['to'][_0x215a11(0x208)]['exist'],_0xc43223[_0x215a11(0x250)](_0x3269ef);});});});});