'use strict';const _0x2db54a=_0x13a8;(function(_0x5dd619,_0x2be245){const _0x1439c6=_0x13a8,_0x334a3d=_0x5dd619();while(!![]){try{const _0x5a8ef8=parseInt(_0x1439c6(0xb2))/0x1*(parseInt(_0x1439c6(0xba))/0x2)+parseInt(_0x1439c6(0xa6))/0x3+-parseInt(_0x1439c6(0xaa))/0x4+parseInt(_0x1439c6(0x9c))/0x5*(-parseInt(_0x1439c6(0x87))/0x6)+-parseInt(_0x1439c6(0x94))/0x7*(-parseInt(_0x1439c6(0xcb))/0x8)+-parseInt(_0x1439c6(0xce))/0x9*(-parseInt(_0x1439c6(0xb1))/0xa)+-parseInt(_0x1439c6(0x9a))/0xb;if(_0x5a8ef8===_0x2be245)break;else _0x334a3d['push'](_0x334a3d['shift']());}catch(_0x46daf9){_0x334a3d['push'](_0x334a3d['shift']());}}}(_0x1394,0x99fdb));function _0x1394(){const _0xe7df5a=['nKRAP','LemNG','once','2326707FuFSJo','TEMVp','HOyiw','headers','2052988yUPEOR','kAqVF','createServer','Zjwcn','AcHKj','proxy-authorization','QQTmS','178690QPoiIa','9403zPJcKq','gRtOY','BLZUr','vxlFU','close','smtp-server','should\x20connect\x20to\x20a\x20socket\x20through\x20proxy\x20with\x20auth','127.0.0.1','268YHOHUE','pgEoq','ZAxgS','gNxLA','Fweos','chai','sgjpX','LyyaN','eBdLU','JVRTq','qOEKX','yBzlF','includeStack','LxEoz','not','UOuQW','NkhyI','40hPHcCg','end','ZwpJu','549voWNtt','lkZqv','NOGWl','inZys','true','EYAXY','listen','../../lib/smtp-connection/http-proxy-client','toString','WvwsN','CyxLl','aXcRN','FumPf','http://test:kest@localhost:','hpmqa','LtmLi','config','eyAHb','Basic\x20dGVzdDpwZXN0','proxy','destroy','dvHza','18ylrplM','SKiyO','jlbNV','lpJNo','should\x20should\x20fail\x20auth','gLaEK','yPtTx','ANZIE','authenticate','data','exist','URMlR','TwgVg','55006QcZbKF','ajLpZ','vIWAU','SMTPServer','aMSUU','http://localhost:','8837015vpYCCV','OquMQ','2029185gLTpYR','HTTP\x20Proxy\x20Client\x20Tests','test','KlqTb','IJmdN','jpBod','LeCbk'];_0x1394=function(){return _0xe7df5a;};return _0x1394();}const http=require('http'),proxy=require(_0x2db54a(0x84)),httpProxyClient=require(_0x2db54a(0x78)),SMTPServer=require(_0x2db54a(0xb7))[_0x2db54a(0x97)],chai=require(_0x2db54a(0xbf)),expect=chai['expect'];function _0x13a8(_0x308a03,_0x1e9420){const _0x1394a6=_0x1394();return _0x13a8=function(_0x13a81a,_0x2d8e59){_0x13a81a=_0x13a81a-0x76;let _0x443e74=_0x1394a6[_0x13a81a];return _0x443e74;},_0x13a8(_0x308a03,_0x1e9420);}chai[_0x2db54a(0x81)][_0x2db54a(0xc6)]=!![];const PROXY_PORT=0xc38,TARGET_PORT=0xc39;describe(_0x2db54a(0x9d),function(){const _0xf29ece=_0x2db54a,_0x1d5fe1={'jpBod':'data','Fweos':function(_0x497cef,_0x1e20ce){return _0x497cef!==_0x1e20ce;},'aMSUU':_0xf29ece(0xca),'LxEoz':function(_0x368a33,_0x5beee3){return _0x368a33(_0x5beee3);},'nKRAP':'http://test:pest@localhost:','pgEoq':function(_0x556352,_0x1f0387){return _0x556352+_0x1f0387;},'NOGWl':'http://test:kest@localhost:','LyyaN':_0xf29ece(0xb9),'aXcRN':function(_0x434da5,_0x213475,_0x1a4b4d){return _0x434da5(_0x213475,_0x1a4b4d);},'JVRTq':_0xf29ece(0x8b)};_0x1d5fe1[_0xf29ece(0x7c)](it,'should\x20connect\x20to\x20a\x20socket\x20through\x20proxy',function(_0x194d6e){const _0x2cc4a1=_0xf29ece,_0x119b01={'BuDba':_0x1d5fe1[_0x2cc4a1(0xa1)],'vxlFU':function(_0x2ac2ed,_0x11806f){const _0x8401a5=_0x2cc4a1;return _0x1d5fe1[_0x8401a5(0xbe)](_0x2ac2ed,_0x11806f);},'EYAXY':_0x1d5fe1[_0x2cc4a1(0x98)],'gNxLA':function(_0x23878d,_0x4dc464){const _0x5f4427=_0x2cc4a1;return _0x1d5fe1[_0x5f4427(0xc7)](_0x23878d,_0x4dc464);}};let _0x26068f=new SMTPServer({'logger':![]});_0x26068f['listen'](TARGET_PORT,()=>{const _0x421b4a=_0x2cc4a1,_0xf804f7={'ZXQhB':function(_0x21e429,_0x3a1795){return _0x21e429(_0x3a1795);},'LtmLi':_0x119b01['BuDba'],'LeCbk':function(_0x14620f,_0x1a966a,_0x4873a9,_0x5466c8,_0x59d33e){return _0x14620f(_0x1a966a,_0x4873a9,_0x5466c8,_0x59d33e);},'IJmdN':_0x421b4a(0x99),'CyxLl':_0x421b4a(0xb9)};if(_0x119b01[_0x421b4a(0xb5)](_0x119b01[_0x421b4a(0x76)],_0x421b4a(0x95))){let _0xbf5e5f=_0x119b01[_0x421b4a(0xbd)](proxy,http['createServer']());_0xbf5e5f[_0x421b4a(0x77)](PROXY_PORT,()=>{const _0x270b9d=_0x421b4a,_0x487bbb={'kAqVF':function(_0x55b788,_0x461ffd){return _0x55b788!==_0x461ffd;}};_0xf804f7[_0x270b9d(0xa2)](httpProxyClient,_0xf804f7[_0x270b9d(0xa0)]+PROXY_PORT,TARGET_PORT,_0xf804f7[_0x270b9d(0x7b)],(_0x1428c2,_0xab84cc)=>{const _0x1eca47=_0x270b9d;_0xf804f7['ZXQhB'](expect,_0x1428c2)['to']['not']['exist'],_0xab84cc[_0x1eca47(0xa5)](_0xf804f7[_0x1eca47(0x80)],_0x23a9f2=>{const _0x50a6e7=_0x1eca47,_0x2f1cbf={'OquMQ':function(_0x1875fc,_0x32b985){return _0x1875fc+_0x32b985;},'WvwsN':function(_0x5ec488,_0x21de8b){const _0x25cb08=_0x13a8;return _0x487bbb[_0x25cb08(0xab)](_0x5ec488,_0x21de8b);},'TEMVp':_0x50a6e7(0x8c)};expect(/^220[ -]/['test'](_0x23a9f2[_0x50a6e7(0x79)]()))['to']['be'][_0x50a6e7(0xd2)],_0xab84cc[_0x50a6e7(0xcc)](),_0xab84cc['on'](_0x50a6e7(0xb6),()=>{const _0x5e5eb9=_0x50a6e7,_0x4c1c7f={'yBzlF':function(_0x2081db,_0x227d57){return _0x2081db===_0x227d57;},'dvHza':function(_0x222179,_0x42e99e){const _0x583e53=_0x13a8;return _0x2f1cbf[_0x583e53(0x9b)](_0x222179,_0x42e99e);}};if(_0x2f1cbf[_0x5e5eb9(0x7a)](_0x2f1cbf[_0x5e5eb9(0xa7)],_0x2f1cbf[_0x5e5eb9(0xa7)])){const _0x29e829={'ANZIE':function(_0x32dda0,_0x266d15,_0x5cdf84){return _0x32dda0(_0x266d15,_0x5cdf84);},'AcHKj':function(_0x3e2a4f,_0x54c716){const _0x548d48=_0x5e5eb9;return _0x4c1c7f[_0x548d48(0xc5)](_0x3e2a4f,_0x54c716);},'QQTmS':'proxy-authorization','TwgVg':function(_0x59330e,_0x417c40){return _0x59330e(_0x417c40);},'hpmqa':function(_0x2cd7b9,_0x295895){const _0x563441=_0x5e5eb9;return _0x4c1c7f[_0x563441(0x86)](_0x2cd7b9,_0x295895);},'IjqEa':_0x5e5eb9(0xb9)};let _0x49b61e=_0x3eaf68(_0x489ccf[_0x5e5eb9(0xac)]());_0x49b61e[_0x5e5eb9(0x8f)]=(_0x12f026,_0x569ce9)=>{const _0x57182e=_0x5e5eb9;_0x29e829[_0x57182e(0x8e)](_0x569ce9,null,_0x29e829[_0x57182e(0xae)](_0x12f026[_0x57182e(0xa9)][_0x29e829[_0x57182e(0xb0)]],'Basic\x20dGVzdDpwZXN0'));},_0x49b61e['listen'](_0x5e589a,()=>{const _0x3cf4e6=_0x5e5eb9;_0x2eb4b6(_0x29e829[_0x3cf4e6(0x7f)](_0x3cf4e6(0x7e),_0x393758),_0x4f8c03,_0x29e829['IjqEa'],(_0x596ae7,_0x114f61)=>{const _0x1bcfc6=_0x3cf4e6;_0x7dfe8b(_0x596ae7)['to'][_0x1bcfc6(0x91)],_0x29e829[_0x1bcfc6(0x93)](_0xd380e8,_0x114f61)['to']['not']['exist'],_0x200cc3['close'](()=>_0x11df1e(_0x85ef4c)&&_0x49b61e[_0x1bcfc6(0xb6)]());});});}else _0xab84cc[_0x5e5eb9(0x85)](),_0x26068f[_0x5e5eb9(0xb6)](()=>setImmediate(_0x194d6e)&&_0xbf5e5f['close']());});});});});}else _0x2d368e[_0x421b4a(0x85)](),_0x108c2f['close'](()=>_0x13cfff(_0x3ff854)&&_0x15ffd3[_0x421b4a(0xb6)]());});}),_0x1d5fe1[_0xf29ece(0x7c)](it,_0xf29ece(0xb8),function(_0x47740b){const _0x54464a=_0xf29ece,_0x535340={'SuiyY':function(_0x14d5a2,_0x5a8400){return _0x1d5fe1['LxEoz'](_0x14d5a2,_0x5a8400);},'lpJNo':_0x54464a(0x90),'gRtOY':function(_0x5d5bf6,_0x4b9c0a,_0x3379fb,_0x236030,_0x4f7795){return _0x5d5bf6(_0x4b9c0a,_0x3379fb,_0x236030,_0x4f7795);},'qOEKX':_0x1d5fe1[_0x54464a(0xa3)],'lkZqv':'127.0.0.1','FumPf':function(_0x55b1ba,_0x34bd35){return _0x55b1ba(_0x34bd35);}};let _0x89ade5=new SMTPServer({'logger':![]});_0x89ade5[_0x54464a(0x77)](TARGET_PORT,()=>{const _0x1862f6=_0x54464a,_0x2e3511={'LSWfi':function(_0x4d514c,_0x124d4a,_0xaa832d){return _0x4d514c(_0x124d4a,_0xaa832d);}};let _0x283825=_0x535340[_0x1862f6(0x7d)](proxy,http['createServer']());_0x283825[_0x1862f6(0x8f)]=(_0x559ffa,_0x5ec073)=>{const _0x31f41f=_0x1862f6;_0x2e3511['LSWfi'](_0x5ec073,null,_0x559ffa[_0x31f41f(0xa9)][_0x31f41f(0xaf)]===_0x31f41f(0x83));},_0x283825[_0x1862f6(0x77)](PROXY_PORT,()=>{const _0x17f3d5=_0x1862f6,_0x3ec812={'HSZpz':function(_0x2242e3,_0x1028ec){return _0x535340['SuiyY'](_0x2242e3,_0x1028ec);},'ZAxgS':_0x535340[_0x17f3d5(0x8a)],'inZys':function(_0x4c506d,_0x5a3cf0){return _0x4c506d(_0x5a3cf0);}};_0x535340[_0x17f3d5(0xb3)](httpProxyClient,_0x535340[_0x17f3d5(0xc4)]+PROXY_PORT,TARGET_PORT,_0x535340[_0x17f3d5(0xcf)],(_0x23b18e,_0x5ddfba)=>{const _0x4e3fea=_0x17f3d5,_0x827cdb={'BLZUr':_0x4e3fea(0xb6),'URMlR':'LXerf','pLGwI':_0x3ec812[_0x4e3fea(0xbc)]};_0x4e3fea(0x8d)!==_0x4e3fea(0x8d)?(_0x3ec812['HSZpz'](_0x1d7cbf,_0x23fe10)['to'][_0x4e3fea(0xc8)][_0x4e3fea(0x91)],_0x339ec9[_0x4e3fea(0xa5)]('data',_0x5b8c05=>{const _0x467d0d=_0x4e3fea;_0x3c5ab2(/^220[ -]/[_0x467d0d(0x9e)](_0x5b8c05[_0x467d0d(0x79)]()))['to']['be'][_0x467d0d(0xd2)],_0x56ff9d['end'](),_0x370ac8['on'](_0x827cdb[_0x467d0d(0xb4)],()=>{const _0x1d0f32=_0x467d0d;_0x1af0de[_0x1d0f32(0x85)](),_0x5ccaa5[_0x1d0f32(0xb6)](()=>_0x28d4a8(_0x316a79)&&_0x4b15ae['close']());});})):(_0x3ec812[_0x4e3fea(0xd1)](expect,_0x23b18e)['to']['not'][_0x4e3fea(0x91)],_0x5ddfba[_0x4e3fea(0xa5)](_0x4e3fea(0x90),_0x553c4a=>{const _0x5c18f6=_0x4e3fea,_0x1b2cca={'jlbNV':_0x827cdb['pLGwI']};expect(/^220[ -]/[_0x5c18f6(0x9e)](_0x553c4a[_0x5c18f6(0x79)]()))['to']['be'][_0x5c18f6(0xd2)],_0x5ddfba[_0x5c18f6(0xcc)](),_0x5ddfba['on'](_0x827cdb[_0x5c18f6(0xb4)],()=>{const _0x32a4c1=_0x5c18f6,_0x47230c={'Zjwcn':'close'};_0x827cdb[_0x32a4c1(0x92)]===_0x32a4c1(0xc9)?(_0x36c9bc(_0x4c41dc)['to'][_0x32a4c1(0xc8)][_0x32a4c1(0x91)],_0x44571e[_0x32a4c1(0xa5)](_0x1b2cca[_0x32a4c1(0x89)],_0x2b4290=>{const _0x5d6346=_0x32a4c1;_0x77dde6(/^220[ -]/['test'](_0x2b4290[_0x5d6346(0x79)]()))['to']['be']['true'],_0x122326[_0x5d6346(0xcc)](),_0x490777['on'](_0x47230c[_0x5d6346(0xad)],()=>{const _0x56ec6e=_0x5d6346;_0x439354[_0x56ec6e(0x85)](),_0x2da598[_0x56ec6e(0xb6)](()=>_0x242f35(_0x272ce1)&&_0x5d6d73[_0x56ec6e(0xb6)]());});})):(_0x5ddfba[_0x32a4c1(0x85)](),_0x89ade5['close'](()=>setImmediate(_0x47740b)&&_0x283825['close']()));});}));});});});}),_0x1d5fe1[_0xf29ece(0x7c)](it,_0x1d5fe1[_0xf29ece(0xc3)],function(_0x59c710){const _0x1baacd=_0xf29ece,_0xe98cf3={'DdoyZ':function(_0x11d8ca,_0x280a5d,_0x2d45ae,_0x31692d,_0x17996d){return _0x11d8ca(_0x280a5d,_0x2d45ae,_0x31692d,_0x17996d);},'duQdC':function(_0x483979,_0x442326){const _0x28128d=_0x13a8;return _0x1d5fe1[_0x28128d(0xbb)](_0x483979,_0x442326);},'KlqTb':_0x1d5fe1[_0x1baacd(0xd0)],'SKiyO':_0x1d5fe1[_0x1baacd(0xc1)],'HOyiw':function(_0x1e81d6,_0x28b4a4){return _0x1e81d6===_0x28b4a4;},'yAjkU':function(_0x7ddeca,_0x456d74,_0x534afc){return _0x7ddeca(_0x456d74,_0x534afc);}};let _0xfe587a=new SMTPServer({'logger':![]});_0xfe587a['listen'](TARGET_PORT,()=>{const _0x308470=_0x1baacd,_0x67e862={'mpJnD':function(_0x389477,_0x3d404b){const _0x32b6c9=_0x13a8;return _0xe98cf3[_0x32b6c9(0xa8)](_0x389477,_0x3d404b);},'GHzrn':'proxy-authorization','LemNG':'Basic\x20dGVzdDpwZXN0','ZMTvd':function(_0x3c2f93,_0x53df87,_0x449924){return _0xe98cf3['yAjkU'](_0x3c2f93,_0x53df87,_0x449924);},'eyAHb':function(_0x345a81,_0x2b85cf,_0x522632,_0x554528,_0x7d1f44){return _0x345a81(_0x2b85cf,_0x522632,_0x554528,_0x7d1f44);},'kJaUc':'127.0.0.1'};if(_0x308470(0xc0)!==_0x308470(0xc2)){let _0x527440=proxy(http[_0x308470(0xac)]());_0x527440[_0x308470(0x8f)]=(_0x159484,_0x904e6)=>{const _0x286676=_0x308470;_0x904e6(null,_0x67e862['mpJnD'](_0x159484[_0x286676(0xa9)][_0x67e862['GHzrn']],_0x67e862['LemNG']));},_0x527440[_0x308470(0x77)](PROXY_PORT,()=>{const _0x310c8c=_0x308470;_0x310c8c(0xcd)===_0x310c8c(0x96)?_0x67e862['ZMTvd'](_0x48814a,null,_0x3b71bc['headers'][_0x310c8c(0xaf)]===_0x67e862[_0x310c8c(0xa4)]):_0xe98cf3['DdoyZ'](httpProxyClient,_0xe98cf3['duQdC'](_0xe98cf3[_0x310c8c(0x9f)],PROXY_PORT),TARGET_PORT,_0xe98cf3[_0x310c8c(0x88)],(_0x459b61,_0x4eef4b)=>{const _0x30074c=_0x310c8c;expect(_0x459b61)['to'][_0x30074c(0x91)],expect(_0x4eef4b)['to'][_0x30074c(0xc8)][_0x30074c(0x91)],_0xfe587a[_0x30074c(0xb6)](()=>setImmediate(_0x59c710)&&_0x527440['close']());});});}else _0x67e862[_0x308470(0x82)](_0x5a8931,_0x308470(0x7e)+_0x126a04,_0x2bc679,_0x67e862['kJaUc'],(_0x3ee7f4,_0x473545)=>{const _0x5b8269=_0x308470;_0x46996e(_0x3ee7f4)['to'][_0x5b8269(0x91)],_0x418bed(_0x473545)['to'][_0x5b8269(0xc8)][_0x5b8269(0x91)],_0x2dda0e['close'](()=>_0x41c8ba(_0x293ba6)&&_0x33063e[_0x5b8269(0xb6)]());});});});});