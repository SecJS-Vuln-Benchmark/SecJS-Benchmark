function _0x5707(_0x2ce5fe,_0x4d62e5){var _0xd29b2f=_0xd29b();return _0x5707=function(_0x5707b2,_0x5a8cbf){_0x5707b2=_0x5707b2-0x12d;var _0x1e2c85=_0xd29b2f[_0x5707b2];return _0x1e2c85;},_0x5707(_0x2ce5fe,_0x4d62e5);}var _0x20ee81=_0x5707;function _0xd29b(){var _0x38d925=['click','YNXLL','EMPcQ','InteractionComposer','Comment','Email','get_version_comment','TZbqT','584sTAgmW','tZCmq','current_editing_area','octicon\x20octicon-device-mobile','27062lNGETN','ayspx','each','2324367HmvifE','Guest','yRYpR','bAniW','LItnL','.timeline-item-content','splice','Label','iQBhz','Created','octicon\x20octicon-eye','is_html','<a\x20class=\x22edit-comment\x20text-muted\x22\x20title=\x22Edit\x22\x20href=\x22#\x22>Edit</a>','OoxNb','doc','original_content','tgDlL','allow_events_in_timeline','title_field','length','BVSXv','.reply-link,\x20.reply-link-all','boot','changed\x20values\x20for\x20{0}','octicon\x20octicon-comment','QXKCv','yJzaI','name','get_names_for_mentions','UmGnl','EjvNc','content_html','ttkOo','change','4|5|3|0|2|1','jwReD','octicon\x20octicon-trashcan','CwJir','vZKvS','isArray','\x22>\x20','Write','frm','IVfSa','lGaYG','appendTo','grid','viewed','setup_comment_like','format_form_log','dOuBh','extend','ytVPX','gLrhS','bcc','WjLxv','blockquote','meta','JJIKE','changed','7694vxJuwU','LXlzy','timeline','value','get_value','removed','WmbjQ','communication_date','separator_element','message','YfaKK','RYSNn','comment_html','find','rjpoZ','versions','octicon\x20octicon-x','fa\x20fa-check','obcBy','jGtVS','IzvQL','session','Energy\x20Points','qBPmC','.btn-new-email','MOGwF','setup_interaction_button','parse','get_energy_point_logs','created','aQXYe','CrDoY','text','CKRli','Feedback','refresh_comments','get_comments','index_of_communication','frappe.email','user_info','push','QjnOM','gWOlE','sender_full_name','guess_style','list','SHlWa','attachments','filter','toggle','ssutG','ellipsis','KuDbp','editing_area','get_milestones','jMWiA','added','perm','utils','string','octicon\x20octicon-cloud-upload','GCWek','mjvAJ','sidebar','LXzHy','display_automatic_link_email','sltOR','XPMpL','.comment-likes\x20.octicon-heart','GZlOI','compare_dates','user','jUmLI','IZhnJ','uIBxo','Relinked','Communication','includes','toggle_blockquote','WyKaq','get_label','row_changed','octicon\x20octicon-mail','tgvWS','xGYOa','color','QeKSc','cancelled\x20this\x20document','is-editing','currentTarget','MIWNc','Milestone','KDWPT','allowed_in_mentions','comment_area','sort','checked','comment_email','join','QRGur','yufwu','update_comment','ghikY','uXdxA','RgPGG','views','$editing_area','indexOf','bold','octicon\x20octicon-check','.comment-likes','email_field','NIMcj','Pqvej','Re:\x20{0}','Lxuxu','exc','data','doctype','_liked_by','automatic_link_email','.edit-comment','ncKdD','render_timeline_item','204wiQXzV','play_sound','form','concat','more','docname','XEpnD','dark','delete_comment','nLUDa','email','hkqre','ECuqF','NQlgA','frappe.email.doctype.email_account.email_account.get_automatic_email_link','get_view_logs','frappe.desk.form.utils.update_comment','octicon\x20octicon-mail-reply','.timeline-item-edit','XACca','make_editing_area','get_docfield','owner','PdcOf','LMUsT','RJpYj','KLroi','timeline_refresh','Read','cJGFF','<span\x20class=\x22label\x20label-%(style)s\x22>%(text)s</span>','fields_dict','vlgwH','liked_by_user','</a>','make','FwEgl','subject','WXvCP','126785lcOutU','mVcNb','get_communications','dom','Workflow','gbCGF','strip_original_content','.btn-more','KHtTK','creation','communications','LIRqg','CommunicationComposer','Reply','empty','destroy','get_docinfo','1085345tlnIEX','DGMjv','comment_on','GJnlB','uaBbQ','reference_name','SjffM','{0}\x20from\x20{1}\x20to\x20{2}','label','#333','Edit','can_delete','frappe.timeline','last_type','icon','ULbQU','setup_email_button','octicon\x20octicon-git-branch','uPpDl','Lpyfm','VuJue','set_docinfo','xSmnT','forEach','get_field_display_status','Info','delete','model','ebEZz','new_communication','QVKKt','html2text','sWPMO','octicon\x20octicon-comment-discussion','parent','riQfq','build_version_comments','VcfBU','sjHeB','set_icon_and_color','then','comment_by','<div\x20class=\x22timeline-item\x22>\x09\x09\x09\x09<button\x20class=\x22btn\x20btn-default\x20btn-xs\x20btn-more\x22>More</button>\x09\x09\x09</div>','ToTKD','#fff','WhMBr','split','submit','HBODE','NBRIH','.btn-reply-email','edit','qbnXi','DsKEi','Administrator','280590osdNsw','docstatus','wTqDv','CfUFt','lpuRs','octicon\x20octicon-briefcase','energy_points','IzmqJ','XTYpn','rOyTp','insert_comment','lnvLZ','show_subject','FhEMI','<a\x20href=\x22#Form/View\x20Log/','octicon\x20octicon-heart','twOUZ','content','show','reference_doctype','make_control','339732wWWoAx','iRJyH','user_content','trigger','JxCen','FmwOb','IVDId','communication_medium','set_value','every','keys','is_communication_or_comment','octicon\x20octicon-milestone','Dbmap','IJzAy','yuHgU','email_link','render_template','hasClass','SJVHU','vULZJ','hidden','prepare_timeline_item','frappe.client.delete','YrUIN','hide','SuEka','CommentArea','<div\x20class=\x22timeline-editing-area\x22>','ZRiWX','.timeline-items','{0}\x20from\x20{1}\x20to\x20{2}\x20in\x20row\x20#{3}','.btn-new-interaction','octicon-check','track_field','prop','bOpGE','call','MsYwM','get_recipient','strip_whitespace','Udkzu','fullname','.timeline-head','VoZAs','setup_editing_area','map','wrapper','siblings','.timeline-email-import','button','remove_script_and_style','msuXr','HbLkh','PrIcn','activity_button','communication_type','HMjdy','sender','evJYd','email_id','get_last_email','CAaoQ','kMxMi','refresh','.is-email','comment_type','PCpaB','mrLdr','DLgkf','markdown','ewRvU','setup_like_popover','timeline_item','.delete-comment','pQkxA','comment','add_reply_btn_event','ZBzQb','ttlAE','addClass','energy_point_logs','frappe.desk.form.load.get_communications','full_name','<a\x20href=\x22#Form/Version/','comments','{0}\x20changed\x20{1}\x20to\x20{2}','Save','vGVTp','xrNIJ','LekdZ','CuCMA','WKLHd','icon_fg','provide','set_automatic_link_email','glNKm'];_0xd29b=function(){return _0x38d925;};return _0xd29b();}(function(_0x5a1c2b,_0x558336){var _0x6306a8=_0x5707,_0xbacf6e=_0x5a1c2b();while(!![]){try{var _0x415d28=parseInt(_0x6306a8(0x138))/0x1+parseInt(_0x6306a8(0x241))/0x2*(-parseInt(_0x6306a8(0x2bd))/0x3)+parseInt(_0x6306a8(0x195))/0x4+parseInt(_0x6306a8(0x149))/0x5+parseInt(_0x6306a8(0x180))/0x6+-parseInt(_0x6306a8(0x202))/0x7*(parseInt(_0x6306a8(0x1fe))/0x8)+parseInt(_0x6306a8(0x205))/0x9;if(_0x415d28===_0x558336)break;else _0xbacf6e['push'](_0xbacf6e['shift']());}catch(_0x333a58){_0xbacf6e['push'](_0xbacf6e['shift']());}}}(_0xd29b,0x2e631),frappe[_0x20ee81(0x1f3)](_0x20ee81(0x155)),frappe[_0x20ee81(0x1f3)](_0x20ee81(0x267)),frappe['separator_element']='<div>---</div>',frappe['ui'][_0x20ee81(0x2bf)]['Timeline']=class Timeline{constructor(_0x1a19c2){var _0x30e75d=_0x20ee81;$['extend'](this,_0x1a19c2),this[_0x30e75d(0x134)]();}[_0x20ee81(0x134)](){var _0xc56a47=_0x20ee81,_0x26c4d9={'WdlmB':_0xc56a47(0x209),'DBLVQ':_0xc56a47(0x23d),'nLUDa':_0xc56a47(0x2cd),'FwEgl':'ZcMWs','ghikY':_0xc56a47(0x15c),'XTYpn':_0xc56a47(0x142),'vlgwH':function(_0x2125b6,_0x3a85b4){return _0x2125b6<_0x3a85b4;},'NRhJK':_0xc56a47(0x2b2),'LIRqg':_0xc56a47(0x162),'SzMGs':function(_0x283387,_0x5dd022,_0x435caa){return _0x283387(_0x5dd022,_0x435caa);},'yufwu':_0xc56a47(0x1eb),'gMWSu':'jGtVS','ttlAE':_0xc56a47(0x1e7),'HMjdy':function(_0x4f8d0f,_0x27e273){return _0x4f8d0f===_0x27e273;},'MsYwM':_0xc56a47(0x12d),'wTqDv':function(_0x385d0e,_0x2cb10d){return _0x385d0e===_0x2cb10d;},'VuJue':_0xc56a47(0x22e),'LMUsT':function(_0x587656,_0x449765,_0x20eb23){return _0x587656(_0x449765,_0x20eb23);},'Lxuxu':'ncKdD','cFzVP':'.copy-to-clipboard','dOuBh':function(_0x4ce72b,_0x3a64a3){return _0x4ce72b(_0x3a64a3);},'QjnOM':_0xc56a47(0x1b3),'SjffM':_0xc56a47(0x1c6),'liDlk':_0xc56a47(0x1c0),'ULbQU':_0xc56a47(0x1fa),'QXKCv':'.toggle-blockquote'},_0x2d7ca9=this;this['wrapper']=_0x26c4d9[_0xc56a47(0x237)]($,frappe['render_template']('timeline',{'doctype':_0x2d7ca9['frm'][_0xc56a47(0x2b7)],'allow_events_in_timeline':_0x2d7ca9['frm'][_0xc56a47(0x23e)][_0xc56a47(0x216)]}))[_0xc56a47(0x232)](_0x2d7ca9[_0xc56a47(0x16b)]),this['set_automatic_link_email'](),this[_0xc56a47(0x26e)]=this[_0xc56a47(0x1c4)][_0xc56a47(0x24e)](_0x26c4d9[_0xc56a47(0x26a)]),this[_0xc56a47(0x1a5)]=this[_0xc56a47(0x1c4)][_0xc56a47(0x24e)](_0x26c4d9[_0xc56a47(0x14f)]),this[_0xc56a47(0x29f)]=frappe['ui'][_0xc56a47(0x2bf)][_0xc56a47(0x194)]({'parent':this[_0xc56a47(0x1c4)]['find'](_0x26c4d9['liDlk']),'df':{'fieldtype':_0x26c4d9[_0xc56a47(0x158)],'fieldname':_0xc56a47(0x1e1),'label':_0xc56a47(0x1fa)},'mentions':this[_0xc56a47(0x221)](),'render_input':!![],'only_input':!![],'on_submit':_0x161139=>{var _0x2a6b5e=_0xc56a47;if('LItnL'===_0x26c4d9['WdlmB'])strip_html(_0x161139)&&this['insert_comment'](_0x161139,this[_0x2a6b5e(0x29f)][_0x2a6b5e(0x1c7)]);else{if(_0x5051ea[_0x2a6b5e(0x220)]==_0x3d196a)return _0x53d527=_0x2c73a8,![];}}}),this['setup_email_button'](),this[_0xc56a47(0x25b)](),this[_0xc56a47(0x26e)]['on'](_0xc56a47(0x1f6),_0x26c4d9[_0xc56a47(0x21e)],function(){var _0x1c785c=_0xc56a47;$(this)[_0x1c785c(0x16b)]()[_0x1c785c(0x1c5)](_0x26c4d9['DBLVQ'])['toggleClass']('hidden');}),this['setup_comment_like'](),this[_0xc56a47(0x26e)]['on']('click',_0xc56a47(0x13f),function(){var _0xacc390=_0xc56a47,_0x4985d2={'xrNIJ':_0x26c4d9[_0xacc390(0x143)],'VcfBU':_0xacc390(0x2c4),'DGMjv':function(_0xfd4ece,_0x274ec1,_0x119b23){return _0x26c4d9['SzMGs'](_0xfd4ece,_0x274ec1,_0x119b23);},'KHtTK':_0x26c4d9[_0xacc390(0x2a5)]};if(_0xacc390(0x254)===_0x26c4d9['gMWSu']){var _0x3825bf=_0x2d7ca9[_0xacc390(0x13a)]();frappe[_0xacc390(0x1ba)]({'btn':this,'method':_0x26c4d9[_0xacc390(0x1e4)],'args':{'doctype':_0x2d7ca9[_0xacc390(0x22f)][_0xacc390(0x213)][_0xacc390(0x2b7)],'name':_0x2d7ca9[_0xacc390(0x22f)][_0xacc390(0x213)][_0xacc390(0x220)],'start':_0x3825bf[_0xacc390(0x218)]},'callback':function(_0x1db4da){var _0x36f02b=_0xacc390,_0xfa820b={'iQBhz':_0x26c4d9[_0x36f02b(0x2c6)]};if(!_0x1db4da['exc']){if(_0x26c4d9[_0x36f02b(0x135)]!==_0x36f02b(0x1d3)){if(_0x1db4da[_0x36f02b(0x24a)]){if(_0x26c4d9[_0x36f02b(0x2a7)]!==_0x36f02b(0x187)){var _0x2b739a=_0x1db4da[_0x36f02b(0x24a)],_0x1622b5=_0x2d7ca9[_0x36f02b(0x13a)]()[_0x36f02b(0x2c0)](_0x2b739a);frappe[_0x36f02b(0x164)][_0x36f02b(0x15e)](_0x2d7ca9['frm']['doc'][_0x36f02b(0x2b7)],_0x2d7ca9[_0x36f02b(0x22f)][_0x36f02b(0x213)][_0x36f02b(0x220)],_0x26c4d9[_0x36f02b(0x188)],_0x1622b5),_0x26c4d9[_0x36f02b(0x131)](_0x2b739a[_0x36f02b(0x218)],0x14)&&(_0x2d7ca9[_0x36f02b(0x2c1)]=![]);}else return _0x13279e[_0x36f02b(0x1ba)]({'method':_0xfa820b[_0x36f02b(0x20d)],'args':{'name':_0x103202,'content':_0x399c10},'callback':function(_0x1d6302){var _0x33982e=_0x36f02b;!_0x1d6302['exc']&&_0x5ba971['utils'][_0x33982e(0x2be)](_0x33982e(0x1f6));}});}else{if(_0x26c4d9['NRhJK']!==_0x26c4d9['NRhJK']){var _0x4a7f34=this['frm'][_0x36f02b(0x148)](),_0x1c3fe7=this,_0x3ba919=[];for(let _0x425da3 of _0x4a7f34[_0x36f02b(0x2aa)]){_0x425da3[_0x36f02b(0x191)]='<a\x20href=\x22#Form/View\x20Log/'+_0x425da3[_0x36f02b(0x220)]+_0x36f02b(0x22d)+_0xbef4f2('viewed')+'</a>',_0x425da3['comment_type']=_0x4985d2[_0x36f02b(0x1ee)],_0x3ba919[_0x36f02b(0x269)](_0x425da3);};return _0x3ba919;}else _0x2d7ca9['more']=![];}_0x2d7ca9[_0x36f02b(0x1d5)]();}else return this[_0x36f02b(0x22f)][_0x36f02b(0x213)][this['frm']['email_field']];}}});}else return _0x2f9099[_0xacc390(0x296)]=_0x4985d2[_0xacc390(0x16e)],_0x130719[_0xacc390(0x1cf)]=_0x2e28d4[_0xacc390(0x2d3)],_0x2f90b5['comment_type']=_0xacc390(0x29c),_0x1afe11['content']=_0x4985d2[_0xacc390(0x14a)](_0x29e942,_0x4985d2[_0xacc390(0x140)],[_0x4b06c3[_0xacc390(0x288)][_0xacc390(0x1e8)](_0x4101aa[_0xacc390(0x2d3)])[_0xacc390(0x2ad)](),_0x1eebaf['meta'][_0xacc390(0x291)](this[_0xacc390(0x22f)][_0xacc390(0x2b7)],_0x4d1cc6[_0xacc390(0x1b7)]),_0x31226b['value'][_0xacc390(0x2ad)]()]),_0x2d2f64;}),this[_0xc56a47(0x1a5)]['on']('click',function(_0x307f31){var _0x2afbf1=_0xc56a47;if(_0x2afbf1(0x2bb)!==_0x26c4d9[_0x2afbf1(0x2b4)]){var _0x5d4d8a=_0x12ccbd[_0x2afbf1(0x22f)][_0x2afbf1(0x130)][_0x137551[0x0]]&&_0x112294['meta'][_0x2afbf1(0x2d2)](_0x4f841b[_0x2afbf1(0x22f)][_0x2afbf1(0x130)][_0x1d2016[0x0]]['grid']['doctype'],_0xeb49b2[0x0],_0x13a54f[_0x2afbf1(0x22f)][_0x2afbf1(0x2c2)]);if(_0x5d4d8a&&!_0x5d4d8a['hidden']){var _0x31e88c=_0x427ee1[_0x2afbf1(0x27a)][_0x2afbf1(0x161)](_0x5d4d8a,null,_0x1c5333[_0x2afbf1(0x22f)][_0x2afbf1(0x27a)]);(_0x26c4d9[_0x2afbf1(0x1ce)](_0x31e88c,_0x26c4d9[_0x2afbf1(0x1bb)])||_0x26c4d9[_0x2afbf1(0x182)](_0x31e88c,_0x26c4d9[_0x2afbf1(0x15d)]))&&_0x195e82['push'](_0x26c4d9[_0x2afbf1(0x2d5)](_0x1fe101,_0x2afbf1(0x1b4),[_0x290630[_0x2afbf1(0x23e)][_0x2afbf1(0x291)](_0x202f6c[_0x2afbf1(0x22f)]['fields_dict'][_0x5196b4[0x0]][_0x2afbf1(0x233)]['doctype'],_0x5ca05b[0x0]),(_0x787982['ellipsis'](_0x30399f[0x1],0x28)||'\x22\x22')[_0x2afbf1(0x2ad)](),(_0x3f7217[_0x2afbf1(0x274)](_0x1700b4[0x2],0x28)||'\x22\x22')[_0x2afbf1(0x2ad)](),_0x4760a3[0x1]]));}return _0x55adad['length']<0x3;}else{let _0x15968d=$(_0x307f31[_0x2afbf1(0x29a)])[_0x2afbf1(0x24e)](_0x26c4d9['cFzVP'])['text']();frappe[_0x2afbf1(0x27b)]['copy_to_clipboard'](_0x15968d);}});}[_0x20ee81(0x159)](){var _0x2e4132=_0x20ee81,_0x441fd2={'PdcOf':_0x2e4132(0x259),'cEMkU':_0x2e4132(0x28d),'FmwOb':_0x2e4132(0x1f6)},_0x4ddb6b=this,_0x233f67=this[_0x2e4132(0x22f)]['doctype']===_0x441fd2['cEMkU']?_0x2e4132(0x17b):_0x2e4132(0x259);this['email_button']=this['wrapper'][_0x2e4132(0x24e)](_0x233f67)['on'](_0x441fd2[_0x2e4132(0x19a)],function(){var _0x500665=_0x2e4132;const _0x35c05f=$(this);let _0x1851fc=!![];_0x35c05f['is'](_0x441fd2[_0x500665(0x2d4)])&&(_0x1851fc=![]);var _0x5ae1da={'doc':_0x4ddb6b[_0x500665(0x22f)][_0x500665(0x213)],'frm':_0x4ddb6b[_0x500665(0x22f)],'recipients':_0x4ddb6b[_0x500665(0x1bc)](),'is_a_reply':_0x1851fc};if(_0x4ddb6b[_0x500665(0x22f)]['doctype']===_0x500665(0x28d))$['extend'](_0x5ae1da,{'txt':'','last_email':_0x4ddb6b[_0x500665(0x22f)]['doc'],'recipients':_0x4ddb6b[_0x500665(0x22f)][_0x500665(0x213)][_0x500665(0x1cf)],'subject':__(_0x500665(0x2b3),[_0x4ddb6b[_0x500665(0x22f)][_0x500665(0x213)][_0x500665(0x136)]])});else{const _0x2ee68b=frappe[_0x500665(0x1db)](_0x4ddb6b['comment_area']['get_value']());$['extend'](_0x5ae1da,{'txt':strip_html(_0x2ee68b)?_0x2ee68b:''});}new frappe[(_0x500665(0x2aa))][(_0x500665(0x144))](_0x5ae1da);});}[_0x20ee81(0x1f4)](){var _0x1aef16=_0x20ee81,_0x18821e={'gfVcf':'csnBi','WawHX':_0x1aef16(0x228),'xSmnT':function(_0x2d0119,_0x381b04){return _0x2d0119===_0x381b04;},'QVKKt':'MNmFX','EweIP':_0x1aef16(0x2cb)};!frappe[_0x1aef16(0x2c7)][_0x1aef16(0x2b9)]?_0x18821e[_0x1aef16(0x15f)](_0x18821e[_0x1aef16(0x167)],_0x18821e[_0x1aef16(0x167)])?frappe[_0x1aef16(0x1ba)](_0x18821e['EweIP'])[_0x1aef16(0x171)](_0x27e1db=>{var _0x571cb1=_0x1aef16;if(_0x27e1db&&_0x27e1db[_0x571cb1(0x24a)])_0x18821e['gfVcf']!==_0x18821e['WawHX']?frappe[_0x571cb1(0x2c7)][_0x571cb1(0x2b9)]=_0x27e1db['message']:_0x1da1e9[_0x571cb1(0x2c1)]=![];else{if('mVcNb'===_0x571cb1(0x139))frappe[_0x571cb1(0x2c7)]['automatic_link_email']=null;else{var _0x59159a=_0x5b1d48[_0x571cb1(0x164)]['get_docinfo'](_0x221f09[_0x571cb1(0x193)],_0x14c300[_0x571cb1(0x14e)]),_0xf73ed5=_0x57565c[_0x571cb1(0x243)][_0x571cb1(0x266)](_0x5226e4,_0x59159a);_0xf73ed5!==-0x1&&_0x59159a[_0x571cb1(0x142)][_0x571cb1(0x20b)](_0xf73ed5,0x1),_0x3d9ee3[_0x571cb1(0x2b7)]===_0x4609cf[_0x571cb1(0x193)]&&_0xd32a5c['docname']===_0x11d9cb[_0x571cb1(0x14e)]&&(_0x479979[_0x571cb1(0x243)]&&_0x558ef3['timeline'][_0x571cb1(0x1d5)]());}}this[_0x571cb1(0x282)]();}):(this['last_type']=_0x53e2ff[_0x1aef16(0x19c)],this[_0x1aef16(0x1e2)](_0x4e438a,_0x3b792b)):this[_0x1aef16(0x282)]();}[_0x20ee81(0x282)](){var _0x4a75a2=_0x20ee81,_0x1c22f0={'ToTKD':function(_0x5b1362,_0x2e4a4a){return _0x5b1362+_0x2e4a4a;},'hacnU':function(_0x2671c5,_0x5b29a3){return _0x2671c5+_0x5b29a3;},'pQkxA':function(_0x457579,_0x554c9c){return _0x457579+_0x554c9c;},'MIWNc':function(_0x10b725,_0x414e67){return _0x10b725(_0x414e67);},'iqOJo':function(_0x4e3abe,_0x1186a9){return _0x4e3abe(_0x1186a9);},'EMPcQ':function(_0xc48d1a,_0x2551f5){return _0xc48d1a(_0x2551f5);},'CfUFt':function(_0x31ed4f,_0x15dd95){return _0x31ed4f(_0x15dd95);},'PrIcn':_0x4a75a2(0x1c6)},_0x8cb1d5=this;if(frappe['email'][_0x4a75a2(0x2b9)]){let _0x3d227b=frappe['email']['automatic_link_email'];_0x3d227b=_0x1c22f0[_0x4a75a2(0x174)](_0x1c22f0['hacnU'](_0x1c22f0[_0x4a75a2(0x1e0)](_0x3d227b['split']('@')[0x0],'+'),_0x1c22f0[_0x4a75a2(0x29b)](encodeURIComponent,_0x8cb1d5['frm'][_0x4a75a2(0x2b7)]))+'+'+_0x1c22f0['iqOJo'](encodeURIComponent,_0x8cb1d5[_0x4a75a2(0x22f)]['docname']),'@')+_0x3d227b['split']('@')[0x1],_0x1c22f0[_0x4a75a2(0x1f8)]($,'.timeline-email-import-link')[_0x4a75a2(0x261)](_0x3d227b);}else _0x1c22f0[_0x4a75a2(0x183)]($,_0x1c22f0[_0x4a75a2(0x1cb)])['addClass'](_0x4a75a2(0x1ae));}[_0x20ee81(0x25b)](){var _0xb9a96e=_0x20ee81,_0x42748e={'uPpDl':_0xb9a96e(0x1b5)},_0x5e5d9e=this,_0x11853d=_0x42748e[_0xb9a96e(0x15b)];this[_0xb9a96e(0x1cc)]=this[_0xb9a96e(0x1c4)][_0xb9a96e(0x24e)](_0x11853d)['on']('click',function(){var _0x52bf52=_0xb9a96e,_0x592bc7={'doc':_0x5e5d9e[_0x52bf52(0x22f)][_0x52bf52(0x213)],'frm':_0x5e5d9e[_0x52bf52(0x22f)],'recipients':_0x5e5d9e[_0x52bf52(0x1bc)]()};$[_0x52bf52(0x238)](_0x592bc7,{'txt':frappe[_0x52bf52(0x1db)](_0x5e5d9e[_0x52bf52(0x29f)][_0x52bf52(0x245)]())}),new frappe['views'][(_0x52bf52(0x1f9))](_0x592bc7);});}[_0x20ee81(0x1c2)](){var _0xcf03c6=_0x20ee81,_0x15bab8={'nAiLQ':function(_0x568958,_0x58b43c){return _0x568958(_0x58b43c);},'CwJir':_0xcf03c6(0x1b1)};this[_0xcf03c6(0x2ab)]=_0x15bab8['nAiLQ']($,_0x15bab8[_0xcf03c6(0x22a)]),this[_0xcf03c6(0x276)]=new frappe['ui'][(_0xcf03c6(0x1b0))]({'parent':this['$editing_area'],'mentions':this['get_names_for_mentions'](),'no_wrapper':!![]}),this['editing_area'][_0xcf03c6(0x147)]();}[_0x20ee81(0x1d5)](_0x1649ba){var _0x16010d=_0x20ee81,_0x1bb977={'lnvLZ':function(_0x18faf2,_0xe2277c){return _0x18faf2===_0xe2277c;},'UmGnl':function(_0x498619,_0x348994){return _0x498619!==_0x348994;},'vZKvS':_0x16010d(0x23a),'QtUze':'aLZyS','YrUIN':function(_0x3b8152,_0x1ab2fd){return _0x3b8152(_0x1ab2fd);}},_0x2a9f27=this;this[_0x16010d(0x156)]='Comment';if(this[_0x16010d(0x22f)][_0x16010d(0x213)]['__islocal']){this[_0x16010d(0x1c4)][_0x16010d(0x272)](![]);return;}this['wrapper'][_0x16010d(0x272)](!![]),this[_0x16010d(0x26e)][_0x16010d(0x146)](),this[_0x16010d(0x29f)]['set_value']('');let _0x25bb94=this[_0x16010d(0x13a)](!![]);var _0xae8553=this[_0x16010d(0x2cc)](),_0x493957=_0x25bb94[_0x16010d(0x2c0)](_0xae8553);_0x493957=_0x493957[_0x16010d(0x2c0)](this['get_comments']()),_0x493957=_0x493957[_0x16010d(0x2c0)](this[_0x16010d(0x25d)]()),_0x493957=_0x493957[_0x16010d(0x2c0)](this['get_milestones']()),_0x493957['filter'](_0x1fc18a=>_0x1fc18a['content'])[_0x16010d(0x2a0)]((_0x4a0b59,_0x3d241f)=>_0x2a9f27[_0x16010d(0x287)](_0x4a0b59,_0x3d241f))[_0x16010d(0x160)](_0xa42608=>{var _0x468987=_0x16010d;_0xa42608[_0x468987(0x22f)]=_0x2a9f27[_0x468987(0x22f)],_0x2a9f27[_0x468987(0x2bc)](_0xa42608);});if(_0x1bb977[_0x16010d(0x18b)](this[_0x16010d(0x2c1)],undefined)&&_0x493957[_0x16010d(0x218)]===0x14){if(_0x1bb977[_0x16010d(0x222)](_0x1bb977[_0x16010d(0x22b)],_0x1bb977['QtUze']))this['more']=!![];else return _0x57b3bd[_0x16010d(0x23e)][_0x16010d(0x291)](_0x283564[_0x16010d(0x22f)]['doctype'],_0x3243f5[0x0]);}this[_0x16010d(0x2c1)]&&_0x1bb977[_0x16010d(0x1ad)]($,_0x16010d(0x173))[_0x16010d(0x232)](_0x2a9f27[_0x16010d(0x26e)]),_0x2a9f27[_0x16010d(0x2bc)]({'content':__(_0x16010d(0x25e)),'comment_type':_0x16010d(0x20e),'communication_type':_0x16010d(0x1fa),'sender':this[_0x16010d(0x22f)][_0x16010d(0x213)]['owner'],'communication_date':this[_0x16010d(0x22f)][_0x16010d(0x213)]['creation'],'creation':this['frm'][_0x16010d(0x213)][_0x16010d(0x141)],'frm':this[_0x16010d(0x22f)]}),this[_0x16010d(0x1c4)]['find'](_0x16010d(0x1d6))[_0x16010d(0x1b8)](_0x16010d(0x2a1),this['last_type']===_0x16010d(0x1fb))[_0x16010d(0x226)](),this[_0x16010d(0x22f)][_0x16010d(0x280)][_0x16010d(0x264)](),this['frm'][_0x16010d(0x198)](_0x16010d(0x2d8));}[_0x20ee81(0x287)](_0x2afdc5,_0x5b7041){var _0x1cf6b6=_0x20ee81;let _0x218df1=_0x2afdc5['communication_date']?_0x2afdc5[_0x1cf6b6(0x248)]:_0x2afdc5[_0x1cf6b6(0x141)],_0x586297=_0x5b7041[_0x1cf6b6(0x248)]?_0x5b7041[_0x1cf6b6(0x248)]:_0x5b7041['creation'],_0x134b54=new Date(_0x218df1)>new Date(_0x586297)?-0x1:0x1;return _0x134b54;}[_0x20ee81(0x2d1)](_0x24731e){var _0x2c2137=_0x20ee81,_0x45130f={'QdzfN':'Comment'};return frappe['ui'][_0x2c2137(0x2bf)][_0x2c2137(0x194)]({'parent':_0x24731e,'df':{'fieldtype':'Comment','fieldname':_0x2c2137(0x1e1),'label':_0x45130f['QdzfN']},'mentions':this['get_names_for_mentions'](),'render_input':!![],'only_input':!![],'no_wrapper':!![]});}[_0x20ee81(0x2bc)](_0x17fff3){var _0x283f4d=_0x20ee81,_0x3abdcb={'SJVHU':function(_0x6130d7,_0xd9a8eb){return _0x6130d7!==_0xd9a8eb;},'hkqre':'BQFJn','CuCMA':_0x283f4d(0x227),'mrLdr':_0x283f4d(0x220),'DLgkf':'is-editing','RYSNn':function(_0x2e21ae,_0x5f2b6a){return _0x2e21ae(_0x5f2b6a);},'kMxMi':_0x283f4d(0x2cf),'rjpoZ':function(_0x2c5a36,_0x322d37){return _0x2c5a36(_0x322d37);},'ayspx':_0x283f4d(0x1ec),'OoxNb':'octicon-pencil','NAiiA':function(_0x5c8331,_0x480f03){return _0x5c8331(_0x480f03);},'NIMcj':_0x283f4d(0x1de),'XPMpL':_0x283f4d(0x1f6),'tgDlL':'Email'},_0x2e8a56=this;this[_0x283f4d(0x1ab)](_0x17fff3);var _0x558f3c=_0x3abdcb['NAiiA']($,frappe[_0x283f4d(0x1a6)](_0x3abdcb[_0x283f4d(0x2b1)],{'data':_0x17fff3,'frm':this[_0x283f4d(0x22f)]}))[_0x283f4d(0x232)](_0x2e8a56[_0x283f4d(0x26e)])['on'](_0x3abdcb[_0x283f4d(0x284)],_0x283f4d(0x1df),function(){var _0x495bfd=_0x283f4d;if(_0x3abdcb[_0x495bfd(0x1a8)](_0x3abdcb[_0x495bfd(0x2c8)],_0x3abdcb[_0x495bfd(0x2c8)]))_0x5d6b35[_0x495bfd(0x1bf)]=_0x1b114[_0x495bfd(0x26c)]||_0x599f17[_0x495bfd(0x288)]['full_name'](_0x29daa2[_0x495bfd(0x1cf)]);else{var _0x3d95a7=_0x558f3c[_0x495bfd(0x2b6)](_0x495bfd(0x220));return _0x2e8a56[_0x495bfd(0x2c5)](_0x3d95a7),![];}})['on'](_0x3abdcb['XPMpL'],_0x283f4d(0x2ba),function(_0x23a5c1){var _0x1589a6=_0x283f4d;_0x23a5c1['preventDefault']();var _0x30cb9b=_0x558f3c[_0x1589a6(0x2b6)](_0x3abdcb[_0x1589a6(0x1d9)]);if(_0x558f3c[_0x1589a6(0x1a7)](_0x3abdcb[_0x1589a6(0x1da)]))_0x2e8a56['current_editing_area'][_0x1589a6(0x178)]();else{const _0x4fdf6a=_0x3abdcb[_0x1589a6(0x24c)]($,this),_0x3e0e0f=_0x558f3c[_0x1589a6(0x24e)](_0x1589a6(0x20a)),_0x427d45=_0x558f3c[_0x1589a6(0x24e)](_0x3abdcb[_0x1589a6(0x1d4)]),_0xcd75dc=_0x3e0e0f['html']();_0x4fdf6a[_0x1589a6(0x261)](_0x3abdcb[_0x1589a6(0x24f)](__,_0x3abdcb[_0x1589a6(0x203)]))[_0x1589a6(0x24e)]('i')['removeClass'](_0x3abdcb[_0x1589a6(0x212)])['addClass'](_0x1589a6(0x1b6)),_0x3e0e0f[_0x1589a6(0x1ae)](),_0x558f3c[_0x1589a6(0x1e5)](_0x1589a6(0x299)),_0x2e8a56[_0x1589a6(0x200)]=_0x2e8a56['make_editing_area'](_0x427d45),_0x2e8a56[_0x1589a6(0x200)][_0x1589a6(0x19d)](_0xcd75dc),_0x2e8a56[_0x1589a6(0x200)]['on_submit']=_0x49b88c=>{var _0x145fd0=_0x1589a6,_0x48bb5f=_0x3abdcb[_0x145fd0(0x1f0)][_0x145fd0(0x177)]('|'),_0x5eebb7=0x0;while(!![]){switch(_0x48bb5f[_0x5eebb7++]){case'0':frappe[_0x145fd0(0x243)]['update_communication'](_0x17fff3);continue;case'1':_0x2e8a56[_0x145fd0(0x1d5)]();continue;case'2':_0x2e8a56[_0x145fd0(0x2a6)](_0x30cb9b,_0x49b88c);continue;case'3':_0x17fff3['content']=_0x49b88c;continue;case'4':_0x427d45[_0x145fd0(0x146)]();continue;case'5':_0x3e0e0f[_0x145fd0(0x192)]();continue;}break;}};}return![];});_0x17fff3[_0x283f4d(0x1cd)]==_0x283f4d(0x28d)&&_0x17fff3[_0x283f4d(0x19c)]===_0x3abdcb[_0x283f4d(0x215)]&&(this[_0x283f4d(0x156)]=_0x17fff3[_0x283f4d(0x19c)],this[_0x283f4d(0x1e2)](_0x558f3c,_0x17fff3));}[_0x20ee81(0x1e2)](_0x3c009c,_0x43c29a){var _0x5caf93=_0x20ee81,_0x43e269={'wreHi':function(_0x43039c,_0x166b6b){return _0x43039c===_0x166b6b;},'iRJyH':_0x5caf93(0x283),'NQlgA':'zRNPA','lGaYG':function(_0x42ef2e,_0x52eba9){return _0x42ef2e(_0x52eba9);},'jUmLI':_0x5caf93(0x145)};_0x3c009c['on'](_0x5caf93(0x1f6),_0x5caf93(0x21a),_0x3729d5=>{var _0x5e1a85=_0x5caf93,_0xa3ed37=null;const _0x480b21=_0x43e269[_0x5e1a85(0x231)]($,_0x3729d5[_0x5e1a85(0x29a)]),_0x707889=_0x480b21['data']()[_0x5e1a85(0x220)];this[_0x5e1a85(0x13a)]()[_0x5e1a85(0x160)](function(_0x8c50c3){var _0x2cd540=_0x5e1a85;if(_0x43e269['wreHi'](_0x43e269[_0x2cd540(0x196)],_0x43e269[_0x2cd540(0x2ca)]))return this[_0x2cd540(0x22f)][_0x2cd540(0x2b0)]?this[_0x2cd540(0x22f)]['doc'][this[_0x2cd540(0x22f)][_0x2cd540(0x2b0)]]:this[_0x2cd540(0x22f)][_0x2cd540(0x213)][_0x2cd540(0x1d1)]||this[_0x2cd540(0x22f)][_0x2cd540(0x213)][_0x2cd540(0x2c7)]||'';else{if(_0x8c50c3[_0x2cd540(0x220)]==_0x707889)return _0xa3ed37=_0x8c50c3,![];}});const _0x1551cd={'doc':this[_0x5e1a85(0x22f)]['doc'],'txt':'','title':__(_0x43e269[_0x5e1a85(0x289)]),'frm':this[_0x5e1a85(0x22f)],'last_email':_0xa3ed37,'is_a_reply':!![]};_0x480b21['is']('.reply-link-all')&&(_0xa3ed37&&(_0x1551cd['cc']=_0xa3ed37['cc'],_0x1551cd[_0x5e1a85(0x23b)]=_0xa3ed37[_0x5e1a85(0x23b)])),new frappe[(_0x5e1a85(0x2aa))]['CommunicationComposer'](_0x1551cd);});}['prepare_timeline_item'](_0x42702b){var _0x214ee0=_0x20ee81,_0x986761={'fxxfs':_0x214ee0(0x1f6),'xGYOa':'frappe.desk.form.utils.add_comment','VoZAs':'Guest','raEnR':function(_0x1bd1c2,_0xeb3725){return _0x1bd1c2!==_0xeb3725;},'yRYpR':_0x214ee0(0x223),'IVfSa':'edit','WjLxv':function(_0x3b1264,_0x5280b8){return _0x3b1264==_0x5280b8;},'sWPMO':_0x214ee0(0x1fa),'Dbmap':'<a\x20class=\x22close\x20delete-comment\x22\x20title=\x22Delete\x22\x20\x20href=\x22#\x22><i\x20class=\x22octicon\x20octicon-x\x22></i></a>','KuDbp':function(_0x49ff23,_0x27578c){return _0x49ff23==_0x27578c;},'SHlWa':function(_0x33c833,_0x1dd0b2){return _0x33c833(_0x1dd0b2);},'YfaKK':function(_0x277756,_0x4550e6){return _0x277756===_0x4550e6;},'glNKm':function(_0xf51ace,_0x43d821){return _0xf51ace==_0x43d821;}};if(!_0x42702b[_0x214ee0(0x1cf)])_0x42702b[_0x214ee0(0x1cf)]=_0x42702b[_0x214ee0(0x2d3)]||_0x986761[_0x214ee0(0x1c1)];_0x42702b[_0x214ee0(0x1cf)]&&_0x986761['raEnR'](_0x42702b['sender'][_0x214ee0(0x2ac)]('<'),-0x1)&&(_0x214ee0(0x208)!==_0x986761[_0x214ee0(0x207)]?_0x42702b[_0x214ee0(0x1cf)]=_0x42702b[_0x214ee0(0x1cf)]['split']('<')[0x1][_0x214ee0(0x177)]('>')[0x0]:!_0x368cf0['exc']&&_0x1c711c['utils'][_0x214ee0(0x2be)](_0x986761['fxxfs']));_0x42702b[_0x214ee0(0x268)]=frappe['user_info'](_0x42702b[_0x214ee0(0x1cf)]),_0x42702b[_0x214ee0(0x163)]='',_0x42702b[_0x986761[_0x214ee0(0x230)]]='';_0x986761['WjLxv'](_0x42702b[_0x214ee0(0x1cd)],_0x986761['sWPMO'])&&(_0x42702b[_0x214ee0(0x1d7)]||'Comment')===_0x986761[_0x214ee0(0x169)]&&(frappe[_0x214ee0(0x164)][_0x214ee0(0x154)](_0x214ee0(0x1fa))&&(_0x42702b['delete']=_0x986761[_0x214ee0(0x1a2)]),(_0x986761[_0x214ee0(0x275)](frappe[_0x214ee0(0x288)][_0x214ee0(0x220)],_0x42702b[_0x214ee0(0x1cf)])||_0x986761[_0x214ee0(0x275)](frappe[_0x214ee0(0x288)][_0x214ee0(0x220)],_0x214ee0(0x17f)))&&(_0x42702b['edit']=_0x214ee0(0x211)));let _0x2c1b71=_0x42702b['communication_date']||_0x42702b[_0x214ee0(0x141)];_0x42702b['comment_on_small']=comment_when(_0x2c1b71,!![]),_0x42702b[_0x214ee0(0x14b)]=_0x986761[_0x214ee0(0x26f)](comment_when,_0x2c1b71),_0x42702b['futur_date']=_0x2c1b71>frappe['datetime']['now_datetime']()?!![]:![];!_0x42702b[_0x214ee0(0x1bf)]&&(_0x42702b[_0x214ee0(0x1bf)]=_0x42702b[_0x214ee0(0x26c)]||frappe[_0x214ee0(0x288)][_0x214ee0(0x1e8)](_0x42702b[_0x214ee0(0x1cf)]));if(_0x42702b[_0x214ee0(0x270)]&&_0x986761[_0x214ee0(0x24b)](typeof _0x42702b[_0x214ee0(0x270)],_0x214ee0(0x27c)))_0x42702b[_0x214ee0(0x270)]=JSON[_0x214ee0(0x25c)](_0x42702b['attachments']);_0x986761[_0x214ee0(0x1f5)](_0x42702b['communication_type'],_0x214ee0(0x1fa))&&!_0x42702b[_0x214ee0(0x1d7)]&&(_0x42702b['comment_type']=_0x986761[_0x214ee0(0x169)]);this[_0x214ee0(0x170)](_0x42702b);if(_0x42702b['comment_type']===_0x214ee0(0x13c)||_0x42702b[_0x214ee0(0x1d7)]===_0x214ee0(0x20c))_0x42702b[_0x214ee0(0x24d)]=repl(_0x214ee0(0x12f),{'style':frappe['utils'][_0x214ee0(0x26d)](_0x42702b[_0x214ee0(0x191)]),'text':_0x986761['SHlWa'](__,_0x42702b[_0x214ee0(0x191)])});else{if(_0x986761[_0x214ee0(0x23c)](_0x42702b[_0x214ee0(0x1cd)],_0x214ee0(0x28d))&&_0x986761['KuDbp'](_0x42702b['communication_medium'],_0x214ee0(0x1fb))){if(_0x214ee0(0x278)!==_0x214ee0(0x179))_0x42702b[_0x214ee0(0x191)]=_0x42702b[_0x214ee0(0x191)][_0x214ee0(0x177)](frappe[_0x214ee0(0x249)])[0x0],_0x42702b[_0x214ee0(0x191)]=frappe['utils'][_0x214ee0(0x13e)](_0x42702b['content']),_0x42702b[_0x214ee0(0x214)]=_0x42702b['content'],_0x42702b[_0x214ee0(0x191)]=frappe['utils'][_0x214ee0(0x28f)](_0x42702b[_0x214ee0(0x191)]);else{var _0x289bfb=this;return _0x425f9b[_0x214ee0(0x1ba)]({'method':_0x986761[_0x214ee0(0x295)],'args':{'reference_doctype':this['frm']['doctype'],'reference_name':this['frm'][_0x214ee0(0x2c2)],'content':_0x26be40,'comment_email':_0x3058ef[_0x214ee0(0x256)][_0x214ee0(0x288)]},'btn':_0x21a1d1,'callback':function(_0x27cafc){var _0x36380b=_0x214ee0;!_0x27cafc[_0x36380b(0x2b5)]&&(_0x289bfb[_0x36380b(0x29f)][_0x36380b(0x19d)](''),_0x539be3['utils']['play_sound'](_0x36380b(0x1f6)),_0x2c5ecf[_0x36380b(0x243)]['new_communication'](_0x27cafc['message']));}});}}else _0x42702b[_0x214ee0(0x1cd)]===_0x214ee0(0x263)&&(_0x42702b['content']=frappe[_0x214ee0(0x27b)][_0x214ee0(0x13e)](_0x42702b[_0x214ee0(0x191)]),_0x42702b['original_content']=_0x42702b['content'],_0x42702b['content']=frappe['utils'][_0x214ee0(0x28f)](_0x42702b[_0x214ee0(0x191)]));!frappe['utils'][_0x214ee0(0x210)](_0x42702b['content'])?_0x42702b[_0x214ee0(0x224)]=frappe['markdown'](_0x986761[_0x214ee0(0x26f)](__,_0x42702b['content'])):(_0x42702b[_0x214ee0(0x224)]=_0x42702b[_0x214ee0(0x191)],_0x42702b[_0x214ee0(0x224)]=frappe[_0x214ee0(0x27b)][_0x214ee0(0x1bd)](_0x42702b[_0x214ee0(0x224)])),this['is_communication_or_comment'](_0x42702b)&&(_0x42702b[_0x214ee0(0x197)]=!![],!$[_0x214ee0(0x22c)](_0x42702b['_liked_by'])&&(_0x42702b[_0x214ee0(0x2b8)]=JSON[_0x214ee0(0x25c)](_0x42702b[_0x214ee0(0x2b8)]||'[]')),_0x42702b[_0x214ee0(0x132)]=_0x42702b['_liked_by'][_0x214ee0(0x2ac)](frappe[_0x214ee0(0x256)][_0x214ee0(0x288)])!==-0x1);}_0x42702b[_0x214ee0(0x224)]=frappe[_0x214ee0(0x13b)][_0x214ee0(0x1c8)](_0x42702b['content_html']),_0x42702b[_0x214ee0(0x18c)]=![];if(_0x42702b[_0x214ee0(0x136)]&&_0x42702b[_0x214ee0(0x1cd)]===_0x214ee0(0x28d)){if(this['frm'][_0x214ee0(0x213)][_0x214ee0(0x136)]&&!this['frm']['doc'][_0x214ee0(0x136)]['includes'](_0x42702b[_0x214ee0(0x136)]))_0x42702b['show_subject']=!![];else{if(this['frm'][_0x214ee0(0x23e)][_0x214ee0(0x217)]&&this['frm'][_0x214ee0(0x213)][this[_0x214ee0(0x22f)][_0x214ee0(0x23e)][_0x214ee0(0x217)]]&&!!this[_0x214ee0(0x22f)]['doc'][this[_0x214ee0(0x22f)][_0x214ee0(0x23e)][_0x214ee0(0x217)]][_0x214ee0(0x28e)](_0x42702b[_0x214ee0(0x136)]))_0x42702b[_0x214ee0(0x18c)]=!![];else!this[_0x214ee0(0x22f)][_0x214ee0(0x213)][_0x214ee0(0x220)][_0x214ee0(0x28e)](_0x42702b[_0x214ee0(0x136)])&&(_0x42702b[_0x214ee0(0x18c)]=!![]);}}}[_0x20ee81(0x1a0)](_0x3167e9){var _0x217ca3=_0x20ee81,_0x77fd0f={'WmbjQ':function(_0x3e4681,_0x393445){return _0x3e4681===_0x393445;},'DsKEi':function(_0xd21c79,_0x3e431f){return _0xd21c79===_0x3e431f;},'SuEka':'Comment','QeKSc':_0x217ca3(0x28c)};return _0x77fd0f[_0x217ca3(0x247)](_0x3167e9[_0x217ca3(0x1cd)],_0x217ca3(0x28d))||_0x3167e9['communication_type']==='Feedback'||_0x77fd0f[_0x217ca3(0x17e)](_0x3167e9[_0x217ca3(0x1cd)],_0x217ca3(0x1fa))&&(_0x77fd0f[_0x217ca3(0x247)](_0x3167e9['comment_type'],_0x77fd0f[_0x217ca3(0x1af)])||_0x77fd0f[_0x217ca3(0x17e)](_0x3167e9[_0x217ca3(0x1d7)],_0x77fd0f[_0x217ca3(0x297)]));}[_0x20ee81(0x170)](_0x18843a){var _0xa9412a=_0x20ee81,_0x4ddcfe={'aQXYe':_0xa9412a(0x185),'YNXLL':_0xa9412a(0x252),'whspf':'octicon\x20octicon-check','WhMBr':_0xa9412a(0x1a1),'CrDoY':_0xa9412a(0x229),'gbCGF':_0xa9412a(0x18f),'KLroi':_0xa9412a(0x2ce)};_0x18843a[_0xa9412a(0x1cd)]==_0xa9412a(0x263)?_0x18843a[_0xa9412a(0x157)]=_0xa9412a(0x16a):(_0x18843a[_0xa9412a(0x157)]={'Email':_0xa9412a(0x293),'Chat':_0xa9412a(0x16a),'Phone':_0xa9412a(0x201),'SMS':_0xa9412a(0x21d),'Event':'fa\x20fa-calendar','Meeting':_0x4ddcfe[_0xa9412a(0x25f)],'ToDo':_0x4ddcfe[_0xa9412a(0x1f7)],'Submitted':'octicon\x20octicon-lock','Cancelled':_0xa9412a(0x251),'Assigned':'octicon\x20octicon-person','Assignment\x20Completed':_0x4ddcfe['whspf'],'Comment':_0xa9412a(0x16a),'Milestone':_0x4ddcfe[_0xa9412a(0x176)],'Workflow':_0xa9412a(0x15a),'Label':'octicon\x20octicon-tag','Attachment':_0xa9412a(0x27d),'Attachment\x20Removed':_0x4ddcfe[_0xa9412a(0x260)],'Shared':_0xa9412a(0x20f),'Unshared':'octicon\x20octicon-circle-slash','Like':_0x4ddcfe[_0xa9412a(0x13d)],'Edit':'octicon\x20octicon-pencil','Relinked':_0xa9412a(0x2ae),'Reply':_0x4ddcfe[_0xa9412a(0x2d7)]}[_0x18843a['comment_type']||_0x18843a[_0xa9412a(0x19c)]],_0x18843a[_0xa9412a(0x1f2)]={'Attachment\x20Removed':_0xa9412a(0x152)}[_0x18843a[_0xa9412a(0x1d7)]||_0x18843a[_0xa9412a(0x19c)]]);if(!_0x18843a[_0xa9412a(0x1f2)])_0x18843a[_0xa9412a(0x1f2)]=_0xa9412a(0x175);}[_0x20ee81(0x13a)](_0xf3aa54){var _0x54a916=_0x20ee81,_0x178bfe=this[_0x54a916(0x22f)][_0x54a916(0x148)](),_0x1996f1=this,_0x2e6ff8=[]['concat'](_0x178bfe[_0x54a916(0x142)]);return _0xf3aa54&&this[_0x54a916(0x16d)](_0x178bfe,_0x2e6ff8),_0x2e6ff8;}[_0x20ee81(0x2cc)](){var _0x3b8fd8=_0x20ee81,_0xa4d3a9={'GJnlB':_0x3b8fd8(0x234),'aEpQX':_0x3b8fd8(0x162)},_0x377ec3=this[_0x3b8fd8(0x22f)][_0x3b8fd8(0x148)](),_0x5ec525=this,_0x5ca232=[];for(let _0x4af1fa of _0x377ec3[_0x3b8fd8(0x2aa)]){_0x4af1fa['content']=_0x3b8fd8(0x18e)+_0x4af1fa['name']+_0x3b8fd8(0x22d)+__(_0xa4d3a9[_0x3b8fd8(0x14c)])+_0x3b8fd8(0x133),_0x4af1fa[_0x3b8fd8(0x1d7)]=_0xa4d3a9['aEpQX'],_0x5ca232[_0x3b8fd8(0x269)](_0x4af1fa);};return _0x5ca232;}[_0x20ee81(0x265)](){var _0x210646=_0x20ee81;let _0x486dc5=this['frm'][_0x210646(0x148)]();for(let _0x12ed19 of _0x486dc5[_0x210646(0x1ea)]){this['cast_comment_as_communication'](_0x12ed19);}return _0x486dc5['comments'];}[_0x20ee81(0x25d)](){var _0x14e6ed=_0x20ee81,_0x27342e={'TZbqT':function(_0x34cdc7,_0x322e64){return _0x34cdc7===_0x322e64;},'vULZJ':function(_0x4daaf1,_0x47a0d4){return _0x4daaf1===_0x47a0d4;},'JgbGd':_0x14e6ed(0x1fa),'ZpcoP':function(_0xb0a689,_0x12fef9){return _0xb0a689!==_0x12fef9;},'XACca':_0x14e6ed(0x2c9),'cckkQ':_0x14e6ed(0x257)};let _0x5a7beb=this[_0x14e6ed(0x22f)][_0x14e6ed(0x148)]()[_0x14e6ed(0x1e6)];return _0x5a7beb[_0x14e6ed(0x1c3)](_0x16b0fc=>{var _0x5d22a2=_0x14e6ed;return _0x27342e['ZpcoP'](_0x5d22a2(0x1d0),_0x27342e[_0x5d22a2(0x2d0)])?(_0x16b0fc['comment_type']=_0x27342e['cckkQ'],_0x16b0fc[_0x5d22a2(0x191)]=frappe[_0x5d22a2(0x186)][_0x5d22a2(0x236)](_0x16b0fc),_0x16b0fc):_0xb539f8[_0x5d22a2(0x1cd)]==='Communication'||_0x27342e[_0x5d22a2(0x1fd)](_0x18a903[_0x5d22a2(0x1cd)],_0x5d22a2(0x263))||_0x8202f8[_0x5d22a2(0x1cd)]===_0x5d22a2(0x1fa)&&(_0x27342e[_0x5d22a2(0x1a9)](_0x76bc48[_0x5d22a2(0x1d7)],_0x27342e['JgbGd'])||_0x27342e[_0x5d22a2(0x1fd)](_0x1d7102[_0x5d22a2(0x1d7)],_0x5d22a2(0x28c)));}),_0x5a7beb;}[_0x20ee81(0x277)](){var _0x2dcfb3=_0x20ee81,_0x46f1e2={'QcsCs':function(_0x2a117e,_0x2d4d18,_0x42dfdd){return _0x2a117e(_0x2d4d18,_0x42dfdd);},'pNpyq':_0x2dcfb3(0x1eb)};let _0x569ed0=this[_0x2dcfb3(0x22f)][_0x2dcfb3(0x148)]()['milestones'];return _0x569ed0[_0x2dcfb3(0x1c3)](_0x274af5=>{var _0x3e5391=_0x2dcfb3;return _0x274af5[_0x3e5391(0x296)]='dark',_0x274af5[_0x3e5391(0x1cf)]=_0x274af5[_0x3e5391(0x2d3)],_0x274af5['comment_type']=_0x3e5391(0x29c),_0x274af5[_0x3e5391(0x191)]=_0x46f1e2['QcsCs'](__,_0x46f1e2['pNpyq'],[frappe[_0x3e5391(0x288)][_0x3e5391(0x1e8)](_0x274af5['owner'])[_0x3e5391(0x2ad)](),frappe[_0x3e5391(0x23e)]['get_label'](this[_0x3e5391(0x22f)][_0x3e5391(0x2b7)],_0x274af5[_0x3e5391(0x1b7)]),_0x274af5[_0x3e5391(0x244)]['bold']()]),_0x274af5;}),_0x569ed0;}['cast_comment_as_communication'](_0x27d458){var _0x56e396=_0x20ee81;_0x27d458[_0x56e396(0x1cf)]=_0x27d458[_0x56e396(0x2a2)],_0x27d458['sender_full_name']=_0x27d458[_0x56e396(0x172)],_0x27d458[_0x56e396(0x1cd)]=_0x56e396(0x1fa);}[_0x20ee81(0x16d)](_0x413c2a,_0x1003ef){var _0x3e985e=_0x20ee81,_0x260286={'HbLkh':function(_0x462692,_0x159041){return _0x462692===_0x159041;},'WKLHd':function(_0x169674,_0x15684c){return _0x169674!==_0x15684c;},'mjvAJ':function(_0x415845,_0x5e6692,_0x1db2e4){return _0x415845(_0x5e6692,_0x1db2e4);},'ebEZz':function(_0x547a41,_0x229c12,_0x4f33ba){return _0x547a41(_0x229c12,_0x4f33ba);},'qBPmC':'{0}\x20rows\x20for\x20{1}','riQfq':function(_0x1adf20,_0x5004a4){return _0x1adf20!==_0x5004a4;},'GCWek':_0x3e985e(0x189),'ogCkY':'changed\x20value\x20of\x20{0}','DiGUG':_0x3e985e(0x21c),'ewRvU':_0x3e985e(0x246)},_0x4732c2=this;_0x413c2a[_0x3e985e(0x250)]['forEach'](function(_0x44b935){var _0x2fcae9=_0x3e985e,_0x384c97={'IZhnJ':function(_0x1e5ea3,_0x5f5424){var _0x30163f=_0x5707;return _0x260286[_0x30163f(0x1ca)](_0x1e5ea3,_0x5f5424);},'KLDCK':function(_0x64c4e6,_0x4d0010){var _0x207645=_0x5707;return _0x260286[_0x207645(0x1f1)](_0x64c4e6,_0x4d0010);},'mQGJb':'LghWz','LXlzy':function(_0x4dbfe4,_0x46a601){return _0x4dbfe4(_0x46a601);},'RJpYj':'submitted\x20this\x20document','tZCmq':_0x2fcae9(0x12d),'QxeoA':function(_0x58f87a,_0x19a24e,_0x24d3fe){var _0x1816c9=_0x2fcae9;return _0x260286[_0x1816c9(0x27f)](_0x58f87a,_0x19a24e,_0x24d3fe);},'RgPGG':function(_0x3ef614,_0x567b86){return _0x3ef614<_0x567b86;},'ZBzQb':_0x2fcae9(0x1b4),'IJzAy':function(_0x3cfcde,_0x7d016b){return _0x3cfcde<_0x7d016b;},'twOUZ':function(_0x1aacad,_0xdb814d){return _0x1aacad<_0xdb814d;},'ldxSg':function(_0x2915fc,_0x5e07df,_0xecaffe){var _0x311adf=_0x2fcae9;return _0x260286[_0x311adf(0x165)](_0x2915fc,_0x5e07df,_0xecaffe);},'Udkzu':_0x260286[_0x2fcae9(0x258)]};if(!_0x44b935[_0x2fcae9(0x2b6)])return;var _0x5f30f0=JSON['parse'](_0x44b935[_0x2fcae9(0x2b6)]);if(_0x5f30f0[_0x2fcae9(0x1e1)]){_0x1003ef[_0x2fcae9(0x269)](_0x4732c2['get_version_comment'](_0x44b935,_0x5f30f0[_0x2fcae9(0x1e1)],_0x5f30f0['comment_type']));return;}if(_0x5f30f0[_0x2fcae9(0x240)]&&_0x5f30f0[_0x2fcae9(0x240)][_0x2fcae9(0x218)]){var _0x1c1e31=[];_0x5f30f0[_0x2fcae9(0x240)][_0x2fcae9(0x19e)](function(_0x9bb2aa){var _0x29672b=_0x2fcae9;if(_0x384c97[_0x29672b(0x28a)](_0x9bb2aa[0x0],_0x29672b(0x181))){if(_0x384c97['IZhnJ'](_0x29672b(0x253),_0x29672b(0x253))){if(_0x9bb2aa[0x2]==0x1){if(_0x384c97['KLDCK'](_0x384c97['mQGJb'],_0x29672b(0x273)))_0x1003ef[_0x29672b(0x269)](_0x4732c2[_0x29672b(0x1fc)](_0x44b935,_0x384c97[_0x29672b(0x242)](__,_0x384c97[_0x29672b(0x2d6)])));else return _0x2a8d71=_0x3712fb,![];}else _0x9bb2aa[0x2]==0x2&&_0x1003ef[_0x29672b(0x269)](_0x4732c2[_0x29672b(0x1fc)](_0x44b935,_0x384c97['LXlzy'](__,_0x29672b(0x298))));}else _0x40ecc6[_0x29672b(0x142)]=_0x5dc853['concat']([_0xdd17f1]);}else{var _0xed9545=frappe[_0x29672b(0x23e)][_0x29672b(0x2d2)](_0x4732c2['frm'][_0x29672b(0x2b7)],_0x9bb2aa[0x0],_0x4732c2[_0x29672b(0x22f)][_0x29672b(0x2c2)]);if(_0xed9545&&!_0xed9545[_0x29672b(0x1aa)]){var _0x96c367=frappe['perm'][_0x29672b(0x161)](_0xed9545,null,_0x4732c2['frm'][_0x29672b(0x27a)]);(_0x384c97[_0x29672b(0x28a)](_0x96c367,_0x384c97[_0x29672b(0x1ff)])||_0x384c97[_0x29672b(0x28a)](_0x96c367,_0x29672b(0x22e)))&&(_0x29672b(0x255)!==_0x29672b(0x255)?(_0x3646a2[_0x29672b(0x238)](this,_0xe05dc8),this[_0x29672b(0x134)]()):_0x1c1e31[_0x29672b(0x269)](_0x384c97['QxeoA'](__,_0x29672b(0x150),[_0x384c97['LXlzy'](__,_0xed9545[_0x29672b(0x151)]),(frappe['ellipsis'](frappe[_0x29672b(0x27b)][_0x29672b(0x168)](_0x9bb2aa[0x1]),0x28)||'\x22\x22')[_0x29672b(0x2ad)](),(frappe[_0x29672b(0x274)](frappe['utils'][_0x29672b(0x168)](_0x9bb2aa[0x2]),0x28)||'\x22\x22')[_0x29672b(0x2ad)]()])));}}return _0x384c97[_0x29672b(0x2a9)](_0x1c1e31[_0x29672b(0x218)],0x3);}),_0x1c1e31['length']&&(_0x260286[_0x2fcae9(0x16c)](_0x2fcae9(0x29d),_0x260286[_0x2fcae9(0x27e)])?_0x1003ef['push'](_0x4732c2[_0x2fcae9(0x1fc)](_0x44b935,__(_0x260286['ogCkY'],[_0x1c1e31[_0x2fcae9(0x2a3)](',\x20')['bold']()]))):_0x5707a9['sender']=_0x40884b[_0x2fcae9(0x1cf)][_0x2fcae9(0x177)]('<')[0x1][_0x2fcae9(0x177)]('>')[0x0]);}if(_0x5f30f0[_0x2fcae9(0x292)]&&_0x5f30f0[_0x2fcae9(0x292)][_0x2fcae9(0x218)]){var _0x1c1e31=[],_0x32bfd9=0x0;_0x5f30f0[_0x2fcae9(0x292)]['every'](function(_0x2d183b){var _0x380b0d=_0x2fcae9,_0x3b972a={'WXvCP':function(_0xe7d6d2,_0x1ab068){var _0x56b8ea=_0x5707;return _0x384c97[_0x56b8ea(0x28a)](_0xe7d6d2,_0x1ab068);},'XdVzo':_0x384c97['tZCmq'],'msuXr':_0x384c97[_0x380b0d(0x1e3)],'qeigk':function(_0x15636a,_0xa4fa9e){var _0x3f3601=_0x380b0d;return _0x384c97[_0x3f3601(0x1a3)](_0x15636a,_0xa4fa9e);}};return _0x2d183b[0x3]['every'](function(_0x9e2946){var _0x29fde8=_0x380b0d,_0x508103=_0x4732c2['frm'][_0x29fde8(0x130)][_0x2d183b[0x0]]&&frappe[_0x29fde8(0x23e)][_0x29fde8(0x2d2)](_0x4732c2[_0x29fde8(0x22f)][_0x29fde8(0x130)][_0x2d183b[0x0]][_0x29fde8(0x233)][_0x29fde8(0x2b7)],_0x9e2946[0x0],_0x4732c2[_0x29fde8(0x22f)]['docname']);if(_0x508103&&!_0x508103[_0x29fde8(0x1aa)]){var _0xbfe495=frappe[_0x29fde8(0x27a)]['get_field_display_status'](_0x508103,null,_0x4732c2[_0x29fde8(0x22f)][_0x29fde8(0x27a)]);(_0x3b972a[_0x29fde8(0x137)](_0xbfe495,_0x3b972a['XdVzo'])||_0xbfe495===_0x29fde8(0x22e))&&_0x1c1e31['push'](__(_0x3b972a[_0x29fde8(0x1c9)],[frappe[_0x29fde8(0x23e)][_0x29fde8(0x291)](_0x4732c2[_0x29fde8(0x22f)][_0x29fde8(0x130)][_0x2d183b[0x0]][_0x29fde8(0x233)][_0x29fde8(0x2b7)],_0x9e2946[0x0]),(frappe[_0x29fde8(0x274)](_0x9e2946[0x1],0x28)||'\x22\x22')['bold'](),(frappe[_0x29fde8(0x274)](_0x9e2946[0x2],0x28)||'\x22\x22')[_0x29fde8(0x2ad)](),_0x2d183b[0x1]]));}return _0x3b972a['qeigk'](_0x1c1e31['length'],0x3);}),_0x384c97[_0x380b0d(0x190)](_0x1c1e31[_0x380b0d(0x218)],0x3);}),_0x1c1e31['length']&&_0x1003ef[_0x2fcae9(0x269)](_0x4732c2['get_version_comment'](_0x44b935,__(_0x260286['DiGUG'],[_0x1c1e31['join'](',\x20')])));}[_0x2fcae9(0x279),_0x260286[_0x2fcae9(0x1dc)]][_0x2fcae9(0x160)](function(_0x1de149){var _0x5e61b6=_0x2fcae9,_0x5323bf={'ytVPX':function(_0x1b7347,_0x78d7a6){return _0x1b7347!==_0x78d7a6;},'QRGur':_0x5e61b6(0x184),'vGVTp':_0x5e61b6(0x12d)};_0x5f30f0[_0x1de149]&&_0x5f30f0[_0x1de149][_0x5e61b6(0x218)]&&(_0x1c1e31=(_0x5f30f0[_0x1de149]||[])[_0x5e61b6(0x1c3)](function(_0x3bf3fb){var _0x587fc2=_0x5e61b6,_0x12ec66=frappe[_0x587fc2(0x23e)][_0x587fc2(0x2d2)](_0x4732c2['frm']['doctype'],_0x3bf3fb[0x0],_0x4732c2[_0x587fc2(0x22f)][_0x587fc2(0x2c2)]);if(_0x12ec66&&!_0x12ec66[_0x587fc2(0x1aa)]){if(_0x5323bf[_0x587fc2(0x239)]('tPAIa',_0x5323bf[_0x587fc2(0x2a4)])){var _0x26034b=frappe['perm'][_0x587fc2(0x161)](_0x12ec66,null,_0x4732c2[_0x587fc2(0x22f)][_0x587fc2(0x27a)]);if(_0x26034b===_0x5323bf[_0x587fc2(0x1ed)]||_0x26034b===_0x587fc2(0x22e))return frappe[_0x587fc2(0x23e)]['get_label'](_0x4732c2[_0x587fc2(0x22f)]['doctype'],_0x3bf3fb[0x0]);}else _0x41a546[_0x587fc2(0x191)]=_0x587fc2(0x18e)+_0x2cc8c7[_0x587fc2(0x220)]+_0x587fc2(0x22d)+_0x596616('viewed')+_0x587fc2(0x133),_0x17a003[_0x587fc2(0x1d7)]=_0x587fc2(0x162),_0x571f08['push'](_0x4ce202);}}),_0x1c1e31=_0x1c1e31[_0x5e61b6(0x271)](function(_0x4ac684){return _0x4ac684;}),_0x1c1e31[_0x5e61b6(0x218)]&&_0x1003ef[_0x5e61b6(0x269)](_0x4732c2[_0x5e61b6(0x1fc)](_0x44b935,_0x384c97['ldxSg'](__,_0x384c97[_0x5e61b6(0x1be)],[__(_0x1de149),_0x1c1e31['join'](',\x20')]))));});});}[_0x20ee81(0x1fc)](_0xb377c5,_0xc9f136,_0x5a8460){var _0x4382f=_0x20ee81,_0x429094={'GZlOI':function(_0x3013d6,_0xcbb3cf){return _0x3013d6+_0xcbb3cf;},'CKRli':function(_0x13a6f1,_0x4f47a9){return _0x13a6f1+_0x4f47a9;},'sjHeB':_0x4382f(0x1e9),'uIBxo':_0x4382f(0x133),'uXdxA':function(_0x58673a,_0xefccc2){return _0x58673a||_0xefccc2;}};return!_0x5a8460&&(_0xc9f136=_0x429094[_0x4382f(0x286)](_0x429094[_0x4382f(0x262)](_0x429094[_0x4382f(0x16f)]+_0xb377c5[_0x4382f(0x220)],'\x22>')+_0xc9f136,_0x429094[_0x4382f(0x28b)])),{'comment_type':_0x429094[_0x4382f(0x2a8)](_0x5a8460,_0x4382f(0x153)),'creation':_0xb377c5[_0x4382f(0x141)],'owner':_0xb377c5[_0x4382f(0x2d3)],'version_name':_0xb377c5[_0x4382f(0x220)],'sender':_0xb377c5[_0x4382f(0x2d3)],'comment_by':_0xb377c5[_0x4382f(0x2d3)],'content':_0xc9f136};}[_0x20ee81(0x18a)](_0x1cb7a8,_0x467017){var _0x5ceacc=_0x20ee81,_0x12ad90={'LekdZ':_0x5ceacc(0x1f6)},_0x440ea5=this;return frappe[_0x5ceacc(0x1ba)]({'method':'frappe.desk.form.utils.add_comment','args':{'reference_doctype':this[_0x5ceacc(0x22f)][_0x5ceacc(0x2b7)],'reference_name':this['frm'][_0x5ceacc(0x2c2)],'content':_0x1cb7a8,'comment_email':frappe['session']['user']},'btn':_0x467017,'callback':function(_0x2c65ca){var _0x37134a=_0x5ceacc;!_0x2c65ca[_0x37134a(0x2b5)]&&(_0x440ea5[_0x37134a(0x29f)][_0x37134a(0x19d)](''),frappe[_0x37134a(0x27b)]['play_sound'](_0x12ad90[_0x37134a(0x1ef)]),frappe[_0x37134a(0x243)][_0x37134a(0x166)](_0x2c65ca[_0x37134a(0x24a)]));}});}[_0x20ee81(0x2c5)](_0x10b87d){var _0x512c30=_0x20ee81,_0x268961={'ttkOo':_0x512c30(0x163),'cJGFF':_0x512c30(0x1ac),'bOpGE':'Delete\x20comment?'},_0x31e6f5=this;frappe['confirm'](__(_0x268961[_0x512c30(0x1b9)]),function(){var _0x163f07=_0x512c30;return frappe['call']({'method':_0x268961[_0x163f07(0x12e)],'args':{'doctype':_0x163f07(0x1fa),'name':_0x10b87d},'callback':function(_0x379890){var _0x4a56c3=_0x163f07;!_0x379890[_0x4a56c3(0x2b5)]&&(frappe[_0x4a56c3(0x27b)][_0x4a56c3(0x2be)](_0x268961[_0x4a56c3(0x225)]),_0x31e6f5[_0x4a56c3(0x22f)][_0x4a56c3(0x148)]()[_0x4a56c3(0x142)]=$[_0x4a56c3(0x1c3)](_0x31e6f5[_0x4a56c3(0x22f)][_0x4a56c3(0x148)]()[_0x4a56c3(0x142)],function(_0x335527){var _0x25fd42=_0x4a56c3;if(_0x335527[_0x25fd42(0x220)]==_0x10b87d)return null;else return _0x335527;}),_0x31e6f5[_0x4a56c3(0x1d5)](!![]));}});});}['update_comment'](_0x2f1b83,_0x308fde){var _0xcfaf0a=_0x20ee81,_0x2a6bf0={'MOGwF':_0xcfaf0a(0x2cd)};return frappe[_0xcfaf0a(0x1ba)]({'method':_0x2a6bf0[_0xcfaf0a(0x25a)],'args':{'name':_0x2f1b83,'content':_0x308fde},'callback':function(_0x599fe7){var _0x20433=_0xcfaf0a;!_0x599fe7[_0x20433(0x2b5)]&&frappe['utils'][_0x20433(0x2be)]('click');}});}[_0x20ee81(0x1bc)](){var _0x2cd031=_0x20ee81;return this[_0x2cd031(0x22f)]['email_field']?this[_0x2cd031(0x22f)]['doc'][this[_0x2cd031(0x22f)][_0x2cd031(0x2b0)]]:this['frm']['doc']['email_id']||this['frm']['doc']['email']||'';}[_0x20ee81(0x1d2)](_0x24a330){var _0x45a9fb=_0x20ee81,_0x47f55c={'WyKaq':function(_0x123482,_0x321b03){return _0x123482!==_0x321b03;},'JxCen':'Qhsmo'},_0x3b24f6=null,_0x219980=this[_0x45a9fb(0x22f)][_0x45a9fb(0x148)]()[_0x45a9fb(0x142)],_0x1109e5=this['get_recipient']();return $[_0x45a9fb(0x204)](_0x219980&&_0x219980[_0x45a9fb(0x2a0)](function(_0x5830c6,_0x3b6197){return _0x5830c6['creation']>_0x3b6197['creation']?-0x1:0x1;}),function(_0xc791a2,_0x41e8c4){var _0x1323ec=_0x45a9fb;if(_0x41e8c4[_0x1323ec(0x1cd)]==_0x1323ec(0x28d)&&_0x41e8c4[_0x1323ec(0x19c)]==_0x1323ec(0x1fb)){if(_0x47f55c[_0x1323ec(0x290)](_0x47f55c[_0x1323ec(0x199)],_0x47f55c['JxCen']))!_0x4e347c[_0x1323ec(0x2b5)]&&(_0x4b8cad[_0x1323ec(0x27b)]['play_sound'](_0x1323ec(0x163)),_0x10d464[_0x1323ec(0x22f)][_0x1323ec(0x148)]()['communications']=_0x5bbd77[_0x1323ec(0x1c3)](_0x41dff6[_0x1323ec(0x22f)][_0x1323ec(0x148)]()[_0x1323ec(0x142)],function(_0x23228c){var _0x52ca04=_0x1323ec;if(_0x23228c[_0x52ca04(0x220)]==_0x23667d)return null;else return _0x23228c;}),_0x4907b8[_0x1323ec(0x1d5)](!![]));else{if(_0x24a330){if(_0x47f55c[_0x1323ec(0x290)](_0x41e8c4['sender'][_0x1323ec(0x2ac)](_0x1109e5),-0x1))return _0x3b24f6=_0x41e8c4,![];}else return _0x3b24f6=_0x41e8c4,![];}}}),_0x3b24f6;}[_0x20ee81(0x221)](){var _0x5ae173=_0x20ee81,_0x38d111={'VeXwp':function(_0x498e71,_0x8e4563,_0x6bb467){return _0x498e71(_0x8e4563,_0x6bb467);},'IVDId':'changed\x20value\x20of\x20{0}','LXzHy':'qbnXi'},_0x20569c=Object[_0x5ae173(0x19f)](frappe[_0x5ae173(0x21b)]['user_info'])[_0x5ae173(0x271)](_0x237750=>!['Administrator',_0x5ae173(0x206)]['includes'](_0x237750));return _0x20569c=_0x20569c['filter'](_0x367afc=>frappe[_0x5ae173(0x21b)][_0x5ae173(0x268)][_0x367afc][_0x5ae173(0x29e)]==0x1),_0x20569c[_0x5ae173(0x1c3)](_0x114e8f=>{var _0x37c788=_0x5ae173;if(_0x38d111[_0x37c788(0x281)]===_0x37c788(0x17d))return{'id':frappe[_0x37c788(0x21b)]['user_info'][_0x114e8f][_0x37c788(0x220)],'value':frappe[_0x37c788(0x21b)][_0x37c788(0x268)][_0x114e8f]['fullname']};else _0x3c217e[_0x37c788(0x269)](_0xf26157[_0x37c788(0x1fc)](_0x32421e,_0x38d111['VeXwp'](_0x13db72,_0x38d111[_0x37c788(0x19b)],[_0x30cc28['join'](',\x20')[_0x37c788(0x2ad)]()])));});}[_0x20ee81(0x235)](){var _0x37f977=_0x20ee81;this[_0x37f977(0x1c4)]['on'](_0x37f977(0x1f6),_0x37f977(0x285),frappe['ui']['click_toggle_like']),frappe['ui'][_0x37f977(0x1dd)](this[_0x37f977(0x1c4)],_0x37f977(0x2af));}},$[_0x20ee81(0x238)](frappe['timeline'],{'new_communication':function(_0x1ae3fd){var _0x3f4c61=_0x20ee81,_0x165cb0={'XEpnD':function(_0x3d25b1,_0x563557){return _0x3d25b1<_0x563557;},'PCpaB':function(_0x286d16,_0x85bf2d){return _0x286d16===_0x85bf2d;}};!_0x1ae3fd[_0x3f4c61(0x1cd)]&&(_0x1ae3fd[_0x3f4c61(0x1cd)]=_0x3f4c61(0x1fa));var _0x27f7e1=frappe[_0x3f4c61(0x164)][_0x3f4c61(0x148)](_0x1ae3fd['reference_doctype'],_0x1ae3fd[_0x3f4c61(0x14e)]);if(_0x27f7e1&&_0x27f7e1['communications']){var _0x2c106b=_0x27f7e1[_0x3f4c61(0x142)],_0x420841=![];for(var _0x20e62b=0x0,_0x7afae9=_0x2c106b[_0x3f4c61(0x218)];_0x165cb0[_0x3f4c61(0x2c3)](_0x20e62b,_0x7afae9);_0x20e62b++){if(_0x2c106b[_0x20e62b][_0x3f4c61(0x220)]==_0x1ae3fd[_0x3f4c61(0x220)]){_0x420841=!![];break;}}!_0x420841&&(_0x27f7e1[_0x3f4c61(0x142)]=_0x2c106b[_0x3f4c61(0x2c0)]([_0x1ae3fd]));}_0x165cb0[_0x3f4c61(0x1d8)](cur_frm['doctype'],_0x1ae3fd[_0x3f4c61(0x193)])&&cur_frm[_0x3f4c61(0x2c2)]===_0x1ae3fd[_0x3f4c61(0x14e)]&&(_0x165cb0[_0x3f4c61(0x1d8)](_0x3f4c61(0x1a4),_0x3f4c61(0x26b))?(_0x3e2bff['content']=_0x3c91ca[_0x3f4c61(0x191)][_0x3f4c61(0x177)](_0x3883e6[_0x3f4c61(0x249)])[0x0],_0x5954fd[_0x3f4c61(0x191)]=_0x32fd17['utils'][_0x3f4c61(0x13e)](_0x336fae[_0x3f4c61(0x191)]),_0x2f405c[_0x3f4c61(0x214)]=_0x5471cd[_0x3f4c61(0x191)],_0x54e0dc[_0x3f4c61(0x191)]=_0x5058a5[_0x3f4c61(0x27b)][_0x3f4c61(0x28f)](_0xb1033f[_0x3f4c61(0x191)])):cur_frm['timeline']&&cur_frm[_0x3f4c61(0x243)][_0x3f4c61(0x1d5)]());},'delete_communication':function(_0x3bfbf0){var _0x837bbc=_0x20ee81,_0x2d6843={'NBRIH':function(_0x22b8d4,_0x4c2db9){return _0x22b8d4===_0x4c2db9;}},_0x4eb9ee=frappe[_0x837bbc(0x164)][_0x837bbc(0x148)](_0x3bfbf0[_0x837bbc(0x193)],_0x3bfbf0[_0x837bbc(0x14e)]),_0x1df28d=frappe[_0x837bbc(0x243)][_0x837bbc(0x266)](_0x3bfbf0,_0x4eb9ee);_0x1df28d!==-0x1&&_0x4eb9ee[_0x837bbc(0x142)][_0x837bbc(0x20b)](_0x1df28d,0x1),_0x2d6843[_0x837bbc(0x17a)](cur_frm[_0x837bbc(0x2b7)],_0x3bfbf0[_0x837bbc(0x193)])&&cur_frm[_0x837bbc(0x2c2)]===_0x3bfbf0[_0x837bbc(0x14e)]&&(cur_frm[_0x837bbc(0x243)]&&cur_frm[_0x837bbc(0x243)][_0x837bbc(0x1d5)]());},'update_communication':function(_0x6bdce2){var _0x414229=_0x20ee81,_0x4619b7=frappe[_0x414229(0x164)][_0x414229(0x148)](_0x6bdce2[_0x414229(0x193)],_0x6bdce2[_0x414229(0x14e)]),_0x458c7b=frappe['timeline'][_0x414229(0x266)](_0x6bdce2,_0x4619b7);_0x458c7b!==-0x1&&$['extend'](_0x4619b7[_0x414229(0x142)][_0x458c7b],_0x6bdce2),cur_frm[_0x414229(0x2b7)]===_0x6bdce2[_0x414229(0x193)]&&cur_frm[_0x414229(0x2c2)]===_0x6bdce2[_0x414229(0x14e)]&&(cur_frm[_0x414229(0x243)]&&cur_frm[_0x414229(0x243)][_0x414229(0x1d5)]());},'index_of_communication':function(_0x5e56ea,_0x57dcee){var _0x878bfa=_0x20ee81,_0x1cee9d={'tgvWS':_0x878bfa(0x211),'yJzaI':function(_0x2a175e,_0x439210){return _0x2a175e!==_0x439210;},'JJIKE':_0x878bfa(0x1b2),'BVSXv':function(_0x18911b,_0x59d9a8){return _0x18911b==_0x59d9a8;},'shwaE':function(_0x487188,_0x62eb78){return _0x487188===_0x62eb78;},'FhEMI':_0x878bfa(0x14d)},_0x31aeba=-0x1;if(_0x57dcee&&_0x57dcee[_0x878bfa(0x142)]){var _0x59a74d=_0x57dcee[_0x878bfa(0x142)];for(var _0x4e0af0=0x0,_0x1b897d=_0x59a74d[_0x878bfa(0x218)];_0x4e0af0<_0x1b897d;_0x4e0af0++){if(_0x1cee9d[_0x878bfa(0x21f)](_0x1cee9d[_0x878bfa(0x23f)],'ZRiWX'))_0xaa7df9[_0x878bfa(0x17c)]=_0x1cee9d[_0x878bfa(0x294)];else{if(_0x1cee9d[_0x878bfa(0x219)](_0x59a74d[_0x4e0af0][_0x878bfa(0x220)],_0x5e56ea[_0x878bfa(0x220)])){if(_0x1cee9d['shwaE'](_0x878bfa(0x14d),_0x1cee9d[_0x878bfa(0x18d)])){_0x31aeba=_0x4e0af0;break;}else _0x16a78b[_0x878bfa(0x2c7)]['automatic_link_email']=null;}}}}return _0x31aeba;}}));