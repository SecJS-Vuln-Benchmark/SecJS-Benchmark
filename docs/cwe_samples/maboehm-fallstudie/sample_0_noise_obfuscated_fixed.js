const _0x3e1210=_0x400c;function _0x2b26(){const _0x404de5=['NGIfj','\x20push_token\x20=\x20?\x20AND\x20active\x20=\x201\x20','express','flxAA','ccsLO','valid','status','../uptime-cache-list','params','82381ZDtNap','certInfo','/api/push/\x20called\x20at\x20','image/svg+xml','user_id','toUIf','/api/badge/:id/ping/:duration?','debug','Uptime\x20(','EaZfB','Current\x20Status:\x20','date','dayjs','PNUvI','LbTuc','color','min','update','getRow','Maintenance','rytSW','sendStats','qJhDd','NhXzn','tWbsk','MTWUB','N/A','duration','heartbeat','RGOBe','ILOJg','hDkbR','../uptime-kuma-server','hmKmR','label','findOne','toPrecision','nbfBT','headers','GPZex','ping','XWWPo','Monitor\x20under\x20maintenance','isUnderMaintenance','defaultPingColor','entryPage','150dmCSqe','query','isImportantBeat','monitor_id\x20=\x20?','No/Bad\x20Cert','send','KDhUo','boJnt','../config','KueQR','OtCyP','defaultUpColor','Cert\x20Exp.','1349474dfTwQG','../model/status_page','fdjbw','enPCt','isUpsideDown','urUQp','store','Avg.\x20Ping\x20(','Router','5\x20minutes','AjDwE','zytZJ','/api/badge/:id/cert-exp','XBhRJ','GYiBm','message','dWyLN','TGbuz','ZejqC','ZoskL','defaultDownColor','/api/badge/:id/avg-response/:duration?','domainMappingList','Bad\x20Cert','getCell','oyqsQ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20AVG(ping)\x20FROM\x20monitor_group,\x20`group`,\x20heartbeat\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.time\x20>\x20DATETIME(\x27now\x27,\x20?\x20||\x20\x27\x20hours\x27)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.ping\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','defaultPendingColor','zlLjU','defaultMaintenanceColor','/api/badge/:id/response','Qtwka','get','pushToken','SSnch','GJlmb','redbean-node','CizAT','/api/badge/:id/status','frgfg','x-forwarded-host','IioYK','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20AVG(ping)\x20FROM\x20monitor_group,\x20`group`,\x20heartbeat\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.time\x20>\x20DATETIME(\x27now\x27,\x20?\x20||\x20\x27\x20hours\x27)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.ping\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','msg','statusPageMatchedDomain','8ztgTNM','json','Ovtxo','../util-server','defaultPingValueSuffix','sgkbP','797499gUgVDi','24jAVzRk','429102zGgOnf','router','/api/entry-page','Kzvvc','emit','pZxhd','defaultWarnColor','iBXHL','../modules/apicache','npISn','Response','defaultUptimeLabelSuffix','Avg.\x20Response\x20(','isoDateTimeMillis','hcuZt','type','middleware','statusPageSlug','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20monitor_group.monitor_id\x20FROM\x20monitor_group,\x20`group`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20monitor_group.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','gBHci','EpTTa','../model/monitor','DuKmR','cajIs','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20monitor_group.monitor_id\x20FROM\x20monitor_group,\x20`group`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20monitor_group.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','rxqQB','validTo','irgsU','fdTJp','important','parse','defaultCertExpireWarnDays','trustProxy','ZazrZ','RmeeE','PreviousStatus:\x20','monitor_tls_info','labelColor','ldSif','iQKHm','clearCache','EdmMX','aYdii','QKUnf','getPreviousHeartbeat','defaultStyle','naColor','toJSON','NEbTQ','2PBWwtt','sendNotification','isImportantForNotification','318855gCbZQO','monitor','badge-maker','55165fTDrIX','132042NotLZe'];_0x2b26=function(){return _0x404de5;};return _0x2b26();}function _0x400c(_0x3b809e,_0x141fc4){const _0x2b26c1=_0x2b26();return _0x400c=function(_0x400c29,_0x2a943f){_0x400c29=_0x400c29-0x1c5;let _0x16dc9a=_0x2b26c1[_0x400c29];return _0x16dc9a;},_0x400c(_0x3b809e,_0x141fc4);}(function(_0x5d872f,_0x5bace8){const _0x368479=_0x400c,_0x2e6d7f=_0x5d872f();while(!![]){try{const _0x1372dc=-parseInt(_0x368479(0x1fa))/0x1+parseInt(_0x368479(0x1e9))/0x2*(parseInt(_0x368479(0x1f0))/0x3)+parseInt(_0x368479(0x262))/0x4*(-parseInt(_0x368479(0x1ec))/0x5)+-parseInt(_0x368479(0x26a))/0x6+parseInt(_0x368479(0x235))/0x7+parseInt(_0x368479(0x269))/0x8*(parseInt(_0x368479(0x268))/0x9)+parseInt(_0x368479(0x228))/0xa*(-parseInt(_0x368479(0x1ef))/0xb);if(_0x1372dc===_0x5bace8)break;else _0x2e6d7f['push'](_0x2e6d7f['shift']());}catch(_0x5a4ba4){_0x2e6d7f['push'](_0x2e6d7f['shift']());}}}(_0x2b26,0x23a2c));let express=require(_0x3e1210(0x1f3));const {setting,allowDevAllOrigin,allowAllOrigin,percentageToColor,filterAndJoin,sendHttpError}=require(_0x3e1210(0x265)),{R}=require(_0x3e1210(0x259)),apicache=require(_0x3e1210(0x272)),Monitor=require(_0x3e1210(0x1cd)),dayjs=require(_0x3e1210(0x206)),{UP,MAINTENANCE,DOWN,PENDING,flipStatus,log}=require('../../src/util'),StatusPage=require(_0x3e1210(0x236)),{UptimeKumaServer}=require(_0x3e1210(0x21a)),{UptimeCacheList}=require(_0x3e1210(0x1f8)),{makeBadge}=require(_0x3e1210(0x1ee)),{badgeConstants}=require(_0x3e1210(0x230)),{Prometheus}=require('../prometheus');let router=express[_0x3e1210(0x23d)](),cache=apicache[_0x3e1210(0x1c8)];const server=UptimeKumaServer['getInstance']();let io=server['io'];router['get'](_0x3e1210(0x26c),async(_0x353e99,_0x4f8092)=>{const _0x4f47c5=_0x3e1210,_0x44cae3={'fdjbw':function(_0x5d983a,_0x4118f6){return _0x5d983a(_0x4118f6);},'LbTuc':_0x4f47c5(0x25d),'gBHci':function(_0x4d0dcc,_0x409f0d){return _0x4d0dcc in _0x409f0d;},'caWzG':_0x4f47c5(0x261),'RGOBe':'entryPage'};allowDevAllOrigin(_0x4f8092);let _0x4a0eb7={},_0x2e54bb=_0x353e99['hostname'];await _0x44cae3[_0x4f47c5(0x237)](setting,_0x4f47c5(0x1d8))&&_0x353e99['headers'][_0x4f47c5(0x25d)]&&(_0x2e54bb=_0x353e99[_0x4f47c5(0x220)][_0x44cae3[_0x4f47c5(0x208)]]),_0x44cae3[_0x4f47c5(0x1cb)](_0x2e54bb,StatusPage[_0x4f47c5(0x24b)])?(_0x4a0eb7['type']=_0x44cae3['caWzG'],_0x4a0eb7[_0x4f47c5(0x1c9)]=StatusPage[_0x4f47c5(0x24b)][_0x2e54bb]):(_0x4a0eb7[_0x4f47c5(0x1c7)]=_0x44cae3[_0x4f47c5(0x217)],_0x4a0eb7[_0x4f47c5(0x227)]=server['entryPage']),_0x4f8092['json'](_0x4a0eb7);}),router[_0x3e1210(0x255)]('/api/push/:pushToken',async(_0xca44c1,_0x3eb8a1)=>{const _0x3a1e39=_0x3e1210,_0x2e3670={'SSnch':function(_0x2c6e53,_0x290cdc){return _0x2c6e53(_0x290cdc);},'iQKHm':_0x3a1e39(0x1f2),'qJhDd':_0x3a1e39(0x258),'IioYK':function(_0x1eb162,_0x39f8d7){return _0x1eb162(_0x39f8d7);},'RmeeE':'YYYY-MM-DD\x20HH:mm:ss.SSS','Kzvvc':function(_0x7cfa44,_0xb0d5bb){return _0x7cfa44+_0xb0d5bb;},'dWyLN':_0x3a1e39(0x216)};try{let _0x4a440a=_0xca44c1['params'][_0x3a1e39(0x256)],_0xb2ba6=_0xca44c1['query']['msg']||'OK',_0xdd7fa1=_0x2e3670[_0x3a1e39(0x257)](parseFloat,_0xca44c1['query'][_0x3a1e39(0x222)])||null,_0x59087a=_0xca44c1[_0x3a1e39(0x229)][_0x3a1e39(0x1f7)]||'up',_0xcd69f=_0x59087a==='up'?UP:DOWN,_0x2591bd=await R[_0x3a1e39(0x21d)](_0x3a1e39(0x1ed),_0x2e3670[_0x3a1e39(0x1df)],[_0x4a440a]);if(!_0x2591bd)throw new Error('Monitor\x20not\x20found\x20or\x20not\x20active.');const _0x4b1820=await Monitor[_0x3a1e39(0x1e4)](_0x2591bd['id']);_0x2591bd[_0x3a1e39(0x239)]()&&(_0x2e3670[_0x3a1e39(0x210)]===_0x3a1e39(0x223)?(_0x4dfc9d[_0x3a1e39(0x244)]=_0x3a1e39(0x214),_0x1d9ecd[_0x3a1e39(0x209)]=_0x377b27[_0x3a1e39(0x1e6)]):_0xcd69f=flipStatus(_0xcd69f));let _0x2c1bb8=!![],_0x2b1c5a=_0xcd69f,_0x3fb9c6=0x0,_0x1437a3=R['dispense'](_0x3a1e39(0x216));_0x1437a3['time']=R[_0x3a1e39(0x1c5)](dayjs['utc']()),_0x4b1820&&(_0x2c1bb8=![],_0x2b1c5a=_0x4b1820['status'],_0x3fb9c6=dayjs(_0x1437a3['time'])['diff'](_0x2e3670[_0x3a1e39(0x25e)](dayjs,_0x4b1820['time']),'second')),await Monitor[_0x3a1e39(0x225)](_0x2591bd['id'])&&(_0xb2ba6=_0x3a1e39(0x224),_0xcd69f=MAINTENANCE),log[_0x3a1e39(0x201)]('router',_0x3a1e39(0x1fc)+dayjs()['format'](_0x2e3670[_0x3a1e39(0x1da)])),log[_0x3a1e39(0x201)]('router',_0x2e3670[_0x3a1e39(0x26d)](_0x3a1e39(0x1db),_0x2b1c5a)),log['debug'](_0x3a1e39(0x26b),_0x2e3670[_0x3a1e39(0x26d)](_0x3a1e39(0x204),_0xcd69f)),_0x1437a3[_0x3a1e39(0x1d5)]=Monitor[_0x3a1e39(0x22a)](_0x2c1bb8,_0x2b1c5a,_0xcd69f),_0x1437a3['monitor_id']=_0x2591bd['id'],_0x1437a3['status']=_0xcd69f,_0x1437a3[_0x3a1e39(0x260)]=_0xb2ba6,_0x1437a3[_0x3a1e39(0x222)]=_0xdd7fa1,_0x1437a3['duration']=_0x3fb9c6,await R[_0x3a1e39(0x23b)](_0x1437a3),io['to'](_0x2591bd[_0x3a1e39(0x1fe)])[_0x3a1e39(0x26e)](_0x2e3670[_0x3a1e39(0x245)],_0x1437a3[_0x3a1e39(0x1e7)]()),UptimeCacheList[_0x3a1e39(0x1e0)](_0x2591bd['id']),Monitor[_0x3a1e39(0x20f)](io,_0x2591bd['id'],_0x2591bd['user_id']),new Prometheus(_0x2591bd)[_0x3a1e39(0x20b)](_0x1437a3,undefined),_0x3eb8a1['json']({'ok':!![]}),Monitor[_0x3a1e39(0x1eb)](_0x2c1bb8,_0x2b1c5a,_0xcd69f)&&await Monitor[_0x3a1e39(0x1ea)](_0x2c1bb8,_0x2591bd,_0x1437a3);}catch(_0x15b4e4){_0x3eb8a1[_0x3a1e39(0x1f7)](0x194)[_0x3a1e39(0x263)]({'ok':![],'msg':_0x15b4e4[_0x3a1e39(0x244)]});}}),router[_0x3e1210(0x255)](_0x3e1210(0x25b),cache('5\x20minutes'),async(_0xc84e0d,_0x12393c)=>{const _0x529bdc=_0x3e1210,_0xaaf8f2={'oyqsQ':function(_0x394e51,_0x250350,_0x3d2b60){return _0x394e51(_0x250350,_0x3d2b60);},'QKUnf':function(_0x446e77,_0x42742b){return _0x446e77(_0x42742b);},'QRlrb':'Pending','nbfBT':_0x529bdc(0x20d),'pZxhd':function(_0x3005b2,_0x1bb58b){return _0x3005b2!==_0x1bb58b;},'urUQp':_0x529bdc(0x267),'uRquy':function(_0x494d26,_0x56fa2f){return _0x494d26===_0x56fa2f;},'oGMjx':_0x529bdc(0x214),'hmKmR':function(_0x36f6c6,_0xdfd31d){return _0x36f6c6===_0xdfd31d;},'RxCTM':_0x529bdc(0x1de),'frgfg':function(_0x5d9bde,_0x22bf3e,_0x10ca1e){return _0x5d9bde(_0x22bf3e,_0x10ca1e);}};_0xaaf8f2[_0x529bdc(0x1e3)](allowAllOrigin,_0x12393c);const {label:_0x237b4b,upLabel:upLabel='Up',downLabel:downLabel='Down',pendingLabel:pendingLabel=_0xaaf8f2['QRlrb'],maintenanceLabel:maintenanceLabel=_0xaaf8f2[_0x529bdc(0x21f)],upColor:upColor=badgeConstants[_0x529bdc(0x233)],downColor:downColor=badgeConstants[_0x529bdc(0x249)],pendingColor:pendingColor=badgeConstants[_0x529bdc(0x250)],maintenanceColor:maintenanceColor=badgeConstants[_0x529bdc(0x252)],style:style=badgeConstants[_0x529bdc(0x1e5)],value:_0x183c40}=_0xc84e0d[_0x529bdc(0x229)];try{if(_0xaaf8f2[_0x529bdc(0x26f)](_0xaaf8f2[_0x529bdc(0x23a)],'kKceI')){const _0x3c1e31=_0xaaf8f2[_0x529bdc(0x24e)](parseInt,_0xc84e0d[_0x529bdc(0x1f9)]['id'],0xa),_0x398288=_0x183c40!==undefined?parseInt(_0x183c40):undefined;let _0x48cd9a=await R[_0x529bdc(0x20c)](_0x529bdc(0x1d0),[_0x3c1e31]);const _0x5d13c4={'style':style};if(!_0x48cd9a)_0x5d13c4[_0x529bdc(0x244)]='N/A',_0x5d13c4['color']=badgeConstants['naColor'];else{const _0x2caccb=await Monitor[_0x529bdc(0x1e4)](_0x3c1e31),_0x987385=_0x398288!==undefined?_0x398288:_0x2caccb[_0x529bdc(0x1f7)];_0xaaf8f2['uRquy'](_0x237b4b,undefined)?_0x5d13c4['label']='Status':_0x5d13c4[_0x529bdc(0x21c)]=_0x237b4b;switch(_0x987385){case DOWN:_0x5d13c4[_0x529bdc(0x209)]=downColor,_0x5d13c4[_0x529bdc(0x244)]=downLabel;break;case UP:_0x5d13c4['color']=upColor,_0x5d13c4[_0x529bdc(0x244)]=upLabel;break;case PENDING:_0x5d13c4['color']=pendingColor,_0x5d13c4[_0x529bdc(0x244)]=pendingLabel;break;case MAINTENANCE:_0x5d13c4[_0x529bdc(0x209)]=maintenanceColor,_0x5d13c4['message']=maintenanceLabel;break;default:_0x5d13c4[_0x529bdc(0x209)]=badgeConstants[_0x529bdc(0x1e6)],_0x5d13c4[_0x529bdc(0x244)]=_0xaaf8f2['oGMjx'];}}const _0x159622=makeBadge(_0x5d13c4);_0x12393c['type'](_0x529bdc(0x1fd)),_0x12393c[_0x529bdc(0x22d)](_0x159622);}else _0x2a2a2f[_0x529bdc(0x244)]=_0x529bdc(0x214),_0x12a220[_0x529bdc(0x209)]=_0x33325c['naColor'];}catch(_0x58ae78){_0xaaf8f2[_0x529bdc(0x21b)](_0x529bdc(0x1de),_0xaaf8f2['RxCTM'])?_0xaaf8f2[_0x529bdc(0x25c)](sendHttpError,_0x12393c,_0x58ae78[_0x529bdc(0x244)]):_0xaaf8f2[_0x529bdc(0x24e)](_0x4b724d,_0x31ad4c,_0x45f246[_0x529bdc(0x244)]);}}),router[_0x3e1210(0x255)]('/api/badge/:id/uptime/:duration?',cache('5\x20minutes'),async(_0x46367c,_0x3fac24)=>{const _0x1077d0=_0x3e1210,_0x3ce972={'tWbsk':function(_0x463193,_0x102287){return _0x463193!==_0x102287;},'cajIs':function(_0x379acc,_0x2b0a9b,_0x2ad139){return _0x379acc(_0x2b0a9b,_0x2ad139);},'gOpxL':function(_0x5c59c0,_0x5f5ac7){return _0x5c59c0(_0x5f5ac7);},'toUIf':_0x1077d0(0x214),'KueQR':function(_0x3faecd,_0x5578ad){return _0x3faecd*_0x5578ad;},'zlLjU':function(_0x212b05,_0xd062f4){return _0x212b05(_0xd062f4);},'fdTJp':function(_0x2849e5,_0x3efa8d){return _0x2849e5(_0x3efa8d);},'NGIfj':function(_0x17d996,_0x2f0bea){return _0x17d996(_0x2f0bea);},'flxAA':function(_0x4c0510,_0x57183f,_0x52ce10){return _0x4c0510(_0x57183f,_0x52ce10);}};allowAllOrigin(_0x3fac24);const {label:_0xc87773,labelPrefix:_0x42dd49,labelSuffix:labelSuffix=badgeConstants[_0x1077d0(0x275)],prefix:_0xfa8637,suffix:suffix=badgeConstants['defaultUptimeValueSuffix'],color:_0x5d9147,labelColor:_0x2a1dc2,style:style=badgeConstants[_0x1077d0(0x1e5)],value:_0x17f567}=_0x46367c[_0x1077d0(0x229)];try{const _0x200327=parseInt(_0x46367c['params']['id'],0xa),_0x11dc04=_0x3ce972[_0x1077d0(0x212)](_0x46367c[_0x1077d0(0x1f9)][_0x1077d0(0x215)],undefined)?_0x3ce972[_0x1077d0(0x1cf)](parseInt,_0x46367c[_0x1077d0(0x1f9)][_0x1077d0(0x215)],0xa):0x18,_0xa64e56=_0x17f567&&_0x3ce972['gOpxL'](parseFloat,_0x17f567);let _0x18e11a=await R[_0x1077d0(0x20c)](_0x1077d0(0x1d0),[_0x200327]);const _0x11fd31={'style':style};if(!_0x18e11a)_0x11fd31[_0x1077d0(0x244)]=_0x3ce972[_0x1077d0(0x1ff)],_0x11fd31[_0x1077d0(0x209)]=badgeConstants[_0x1077d0(0x1e6)];else{const _0xf8615d=_0xa64e56??await Monitor['calcUptime'](_0x11dc04,_0x200327),_0x5d065c=_0x3ce972[_0x1077d0(0x231)](_0xf8615d,0x64)[_0x1077d0(0x21e)](0x4);_0x11fd31[_0x1077d0(0x209)]=_0x5d9147??percentageToColor(_0xf8615d),_0x11fd31[_0x1077d0(0x1dd)]=_0x2a1dc2??'',_0x11fd31['label']=_0x3ce972[_0x1077d0(0x251)](filterAndJoin,[_0x42dd49,_0xc87773??_0x1077d0(0x202)+_0x11dc04+labelSuffix+')']),_0x11fd31['message']=_0x3ce972[_0x1077d0(0x1d4)](filterAndJoin,[_0xfa8637,_0x5d065c,suffix]);}const _0x7620c=_0x3ce972[_0x1077d0(0x1f1)](makeBadge,_0x11fd31);_0x3fac24['type'](_0x1077d0(0x1fd)),_0x3fac24[_0x1077d0(0x22d)](_0x7620c);}catch(_0x35aeb8){_0x3ce972[_0x1077d0(0x1f4)](sendHttpError,_0x3fac24,_0x35aeb8[_0x1077d0(0x244)]);}}),router[_0x3e1210(0x255)](_0x3e1210(0x200),cache('5\x20minutes'),async(_0x524fd0,_0x122de5)=>{const _0x112283=_0x3e1210,_0x3d70fb={'CizAT':function(_0x1f073e,_0x30eea9){return _0x1f073e(_0x30eea9);},'ZejqC':function(_0x31e7c8,_0x4ada95,_0x473f4c){return _0x31e7c8(_0x4ada95,_0x473f4c);},'OtCyP':function(_0x169b7e,_0x3668bd){return _0x169b7e??_0x3668bd;},'MTWUB':function(_0x503166,_0x597bd6){return _0x503166??_0x597bd6;}};_0x3d70fb[_0x112283(0x25a)](allowAllOrigin,_0x122de5);const {label:_0x1b9f36,labelPrefix:_0x552ad9,labelSuffix:labelSuffix=badgeConstants['defaultPingLabelSuffix'],prefix:_0x538cf8,suffix:suffix=badgeConstants[_0x112283(0x266)],color:color=badgeConstants[_0x112283(0x226)],labelColor:_0x1bd263,style:style=badgeConstants['defaultStyle'],value:_0x28150b}=_0x524fd0[_0x112283(0x229)];try{const _0xb6e5bf=_0x3d70fb[_0x112283(0x247)](parseInt,_0x524fd0[_0x112283(0x1f9)]['id'],0xa),_0x12a967=Math[_0x112283(0x20a)](_0x524fd0[_0x112283(0x1f9)][_0x112283(0x215)]?parseInt(_0x524fd0[_0x112283(0x1f9)][_0x112283(0x215)],0xa):0x18,0x2d0),_0x468b87=_0x28150b&&_0x3d70fb[_0x112283(0x25a)](parseFloat,_0x28150b),_0xb4e730=parseInt(await R[_0x112283(0x24d)](_0x112283(0x24f),[-_0x12a967,_0xb6e5bf])),_0x2087e2={'style':style};if(!_0xb4e730)_0x2087e2[_0x112283(0x244)]='N/A',_0x2087e2['color']=badgeConstants['naColor'];else{const _0x59dbe1=_0x3d70fb['CizAT'](parseInt,_0x3d70fb[_0x112283(0x232)](_0x468b87,_0xb4e730));_0x2087e2[_0x112283(0x209)]=color,_0x2087e2[_0x112283(0x1dd)]=_0x3d70fb[_0x112283(0x213)](_0x1bd263,''),_0x2087e2[_0x112283(0x21c)]=_0x3d70fb[_0x112283(0x25a)](filterAndJoin,[_0x552ad9,_0x1b9f36??'Avg.\x20Ping\x20('+_0x12a967+labelSuffix+')']),_0x2087e2[_0x112283(0x244)]=filterAndJoin([_0x538cf8,_0x59dbe1,suffix]);}const _0x5da8aa=makeBadge(_0x2087e2);_0x122de5['type'](_0x112283(0x1fd)),_0x122de5[_0x112283(0x22d)](_0x5da8aa);}catch(_0x4f0438){sendHttpError(_0x122de5,_0x4f0438[_0x112283(0x244)]);}}),router[_0x3e1210(0x255)](_0x3e1210(0x24a),cache(_0x3e1210(0x23e)),async(_0x12f24f,_0x54770c)=>{const _0x3960fb=_0x3e1210,_0x5007a5={'rxqQB':function(_0x180bbf,_0x420094,_0x24e86f){return _0x180bbf(_0x420094,_0x24e86f);},'hDkbR':function(_0x4bdc8a,_0x6b9190){return _0x4bdc8a(_0x6b9190);},'PNUvI':function(_0x3778a8,_0x4e5f64){return _0x3778a8??_0x4e5f64;},'aYdii':_0x3960fb(0x1fd),'TGbuz':_0x3960fb(0x254),'DuKmR':_0x3960fb(0x1d9)};_0x5007a5['hDkbR'](allowAllOrigin,_0x54770c);const {label:_0x41b37c,labelPrefix:_0x3edb19,labelSuffix:_0xa24dcf,prefix:_0x33e701,suffix:suffix=badgeConstants[_0x3960fb(0x266)],color:color=badgeConstants[_0x3960fb(0x226)],labelColor:_0x1d845e,style:style=badgeConstants[_0x3960fb(0x1e5)],value:_0x50f631}=_0x12f24f['query'];try{const _0x1a0dda=parseInt(_0x12f24f[_0x3960fb(0x1f9)]['id'],0xa),_0x258ac3=Math[_0x3960fb(0x20a)](_0x12f24f[_0x3960fb(0x1f9)][_0x3960fb(0x215)]?parseInt(_0x12f24f[_0x3960fb(0x1f9)]['duration'],0xa):0x18,0x2d0),_0x2d9bf0=_0x50f631&&_0x5007a5[_0x3960fb(0x219)](parseFloat,_0x50f631),_0x181cca=parseInt(await R[_0x3960fb(0x24d)](_0x3960fb(0x25f),[-_0x258ac3,_0x1a0dda])),_0x9850fd={'style':style};if(!_0x181cca)_0x9850fd[_0x3960fb(0x244)]=_0x3960fb(0x214),_0x9850fd['color']=badgeConstants['naColor'];else{const _0x263faf=parseInt(_0x5007a5[_0x3960fb(0x207)](_0x2d9bf0,_0x181cca));_0x9850fd['color']=color,_0x9850fd[_0x3960fb(0x1dd)]=_0x1d845e??'',_0x9850fd[_0x3960fb(0x21c)]=filterAndJoin([_0x3edb19,_0x41b37c??_0x3960fb(0x276)+_0x258ac3+'h)',_0xa24dcf]),_0x9850fd[_0x3960fb(0x244)]=filterAndJoin([_0x33e701,_0x263faf,suffix]);}const _0x4999c1=makeBadge(_0x9850fd);_0x54770c[_0x3960fb(0x1c7)](_0x5007a5[_0x3960fb(0x1e2)]),_0x54770c[_0x3960fb(0x22d)](_0x4999c1);}catch(_0x2b9fb1){_0x5007a5[_0x3960fb(0x246)]===_0x5007a5[_0x3960fb(0x1ce)]?_0x5007a5[_0x3960fb(0x1d1)](_0x1e7777,_0x1b7681,_0x11838d['message']):sendHttpError(_0x54770c,_0x2b9fb1['message']);}}),router[_0x3e1210(0x255)](_0x3e1210(0x241),cache('5\x20minutes'),async(_0x503c1c,_0x3163d1)=>{const _0x2deb47=_0x3e1210,_0x347341={'KDhUo':function(_0x545602,_0x3eede5){return _0x545602(_0x3eede5);},'Ovtxo':function(_0x575cec,_0x19e745){return _0x575cec??_0x19e745;},'SqBVW':_0x2deb47(0x214),'DMkyg':_0x2deb47(0x1cc),'enPCt':_0x2deb47(0x243),'UhMvd':function(_0xf42c6f,_0xfdc7ab,_0x3d9b9b){return _0xf42c6f(_0xfdc7ab,_0x3d9b9b);},'zytZJ':function(_0x319605,_0x4d4ee1){return _0x319605!==_0x4d4ee1;},'ccsLO':_0x2deb47(0x1e1),'npISn':_0x2deb47(0x1c6),'NEbTQ':_0x2deb47(0x22b),'AjDwE':_0x2deb47(0x24c),'bMpNi':function(_0x36058a,_0x2c7e71){return _0x36058a>_0x2c7e71;},'GPZex':function(_0x5522f4,_0x14df24){return _0x5522f4??_0x14df24;},'rytSW':_0x2deb47(0x234)};_0x347341[_0x2deb47(0x22e)](allowAllOrigin,_0x3163d1);const _0x200e37=_0x503c1c[_0x2deb47(0x229)][_0x2deb47(0x205)],{label:_0x92edbd,labelPrefix:_0x5dfe51,labelSuffix:_0x15b886,prefix:_0x3852e6,suffix:suffix=_0x200e37?'':badgeConstants['defaultCertExpValueSuffix'],upColor:upColor=badgeConstants['defaultUpColor'],warnColor:warnColor=badgeConstants[_0x2deb47(0x270)],downColor:downColor=badgeConstants['defaultDownColor'],warnDays:warnDays=badgeConstants[_0x2deb47(0x1d7)],downDays:downDays=badgeConstants['defaultCertExpireDownDays'],labelColor:_0x329790,style:style=badgeConstants[_0x2deb47(0x1e5)],value:_0x5a5e2e}=_0x503c1c[_0x2deb47(0x229)];try{if(_0x347341['DMkyg']===_0x347341[_0x2deb47(0x238)]){const _0x300451=_0x2bcb8d(_0x2db2bb??_0x3f5762);_0xe78477[_0x2deb47(0x209)]=_0x1a3c3c,_0x5571ce[_0x2deb47(0x1dd)]=_0x58aa50??'',_0x46626d[_0x2deb47(0x21c)]=_0x347341[_0x2deb47(0x22e)](_0x210373,[_0x301997,_0x1fd380??_0x2deb47(0x23c)+_0x5296d7+_0x2017dc+')']),_0x8cfcfe[_0x2deb47(0x244)]=_0x4a707a([_0x3f9638,_0x300451,_0x3dd3f6]);}else{const _0x1494b5=_0x347341['UhMvd'](parseInt,_0x503c1c[_0x2deb47(0x1f9)]['id'],0xa),_0x1f4a53=_0x5a5e2e&&parseFloat(_0x5a5e2e);let _0x489ba5=await R[_0x2deb47(0x20c)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20monitor_group.monitor_id\x20FROM\x20monitor_group,\x20`group`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20monitor_group.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',[_0x1494b5]);const _0x3f8907={'style':style};if(!_0x489ba5){if(_0x347341['zytZJ'](_0x2deb47(0x1e1),_0x347341[_0x2deb47(0x1f5)])){const _0x118e9c=_0x347341[_0x2deb47(0x22e)](_0x1a7cb6,_0x1dce6f??_0x2ad70a[_0x2deb47(0x222)]);_0x35e5bb['color']=_0x17cdbc,_0x1aff97[_0x2deb47(0x1dd)]=_0x347341[_0x2deb47(0x264)](_0x2338f9,''),_0xa799db['label']=_0x2e4876([_0x1591f4,_0x40f271??_0x2deb47(0x274),_0x8e8b4e]),_0x190396[_0x2deb47(0x244)]=_0x347341[_0x2deb47(0x22e)](_0x5f58bc,[_0x594a50,_0x118e9c,_0x9bb1d]);}else _0x3f8907[_0x2deb47(0x244)]=_0x347341['SqBVW'],_0x3f8907[_0x2deb47(0x209)]=badgeConstants['naColor'];}else{if(_0x347341[_0x2deb47(0x240)](_0x347341[_0x2deb47(0x273)],_0x2deb47(0x1c6)))_0x2e141d[_0x2deb47(0x244)]=_0x347341['SqBVW'],_0x313c8a['color']=_0x571a4f[_0x2deb47(0x1e6)];else{const _0x2efa07=await R[_0x2deb47(0x21d)](_0x2deb47(0x1dc),_0x347341[_0x2deb47(0x1e8)],[_0x1494b5]);if(!_0x2efa07)_0x3f8907[_0x2deb47(0x244)]=_0x2deb47(0x22c),_0x3f8907['color']=badgeConstants[_0x2deb47(0x1e6)];else{const _0x3d285b=JSON[_0x2deb47(0x1d6)](_0x2efa07['info_json']);if(!_0x3d285b[_0x2deb47(0x1f6)])_0x3f8907['message']=_0x347341[_0x2deb47(0x23f)],_0x3f8907[_0x2deb47(0x209)]=downColor;else{const _0x31ecc3=_0x347341[_0x2deb47(0x22e)](parseInt,_0x1f4a53??_0x3d285b['certInfo']['daysRemaining']);if(_0x31ecc3>warnDays)_0x3f8907[_0x2deb47(0x209)]=upColor;else _0x347341['bMpNi'](_0x31ecc3,downDays)?_0x3f8907[_0x2deb47(0x209)]=warnColor:_0x3f8907[_0x2deb47(0x209)]=downColor;_0x3f8907['labelColor']=_0x347341[_0x2deb47(0x221)](_0x329790,''),_0x3f8907[_0x2deb47(0x21c)]=filterAndJoin([_0x5dfe51,_0x92edbd??_0x347341[_0x2deb47(0x20e)],_0x15b886]),_0x3f8907[_0x2deb47(0x244)]=filterAndJoin([_0x3852e6,_0x200e37?_0x3d285b[_0x2deb47(0x1fb)][_0x2deb47(0x1d2)]:_0x31ecc3,suffix]);}}}}const _0x392b12=_0x347341[_0x2deb47(0x22e)](makeBadge,_0x3f8907);_0x3163d1[_0x2deb47(0x1c7)](_0x2deb47(0x1fd)),_0x3163d1['send'](_0x392b12);}}catch(_0x3c7f8){sendHttpError(_0x3163d1,_0x3c7f8[_0x2deb47(0x244)]);}}),router[_0x3e1210(0x255)](_0x3e1210(0x253),cache(_0x3e1210(0x23e)),async(_0x5719c3,_0x3ce008)=>{const _0x509a39=_0x3e1210,_0x4f63e0={'boJnt':function(_0x59b863,_0x18cfcb,_0x504544){return _0x59b863(_0x18cfcb,_0x504544);},'XBhRJ':function(_0x2f286c,_0x542c42){return _0x2f286c(_0x542c42);},'irgsU':'iBXHL','NhXzn':function(_0x4f7ebc,_0x2b50ac){return _0x4f7ebc(_0x2b50ac);},'rWAdJ':'JNEoR','ILOJg':_0x509a39(0x274),'EaZfB':_0x509a39(0x1fd)};_0x4f63e0[_0x509a39(0x242)](allowAllOrigin,_0x3ce008);const {label:_0x1aac0a,labelPrefix:_0x555680,labelSuffix:_0x1efc5b,prefix:_0x581ab3,suffix:suffix=badgeConstants['defaultPingValueSuffix'],color:color=badgeConstants[_0x509a39(0x226)],labelColor:_0x346f9e,style:style=badgeConstants[_0x509a39(0x1e5)],value:_0x88350d}=_0x5719c3['query'];try{if(_0x509a39(0x271)===_0x4f63e0[_0x509a39(0x1d3)]){const _0x6b8ef1=_0x4f63e0[_0x509a39(0x22f)](parseInt,_0x5719c3['params']['id'],0xa),_0x2d79f6=_0x88350d&&_0x4f63e0['NhXzn'](parseFloat,_0x88350d);let _0x40ca5c=await R[_0x509a39(0x20c)](_0x509a39(0x1ca),[_0x6b8ef1]);const _0x1892d9={'style':style};if(!_0x40ca5c)_0x1892d9['message']=_0x509a39(0x214),_0x1892d9[_0x509a39(0x209)]=badgeConstants['naColor'];else{const _0x346c81=await Monitor[_0x509a39(0x1e4)](_0x6b8ef1);if(!_0x346c81[_0x509a39(0x222)])_0x4f63e0['rWAdJ']===_0x509a39(0x248)?_0x4f63e0[_0x509a39(0x22f)](_0x176f8a,_0x48523e,_0x550271[_0x509a39(0x244)]):(_0x1892d9['message']=_0x509a39(0x214),_0x1892d9['color']=badgeConstants[_0x509a39(0x1e6)]);else{const _0x137992=_0x4f63e0[_0x509a39(0x211)](parseInt,_0x2d79f6??_0x346c81[_0x509a39(0x222)]);_0x1892d9[_0x509a39(0x209)]=color,_0x1892d9['labelColor']=_0x346f9e??'',_0x1892d9[_0x509a39(0x21c)]=filterAndJoin([_0x555680,_0x1aac0a??_0x4f63e0[_0x509a39(0x218)],_0x1efc5b]),_0x1892d9[_0x509a39(0x244)]=_0x4f63e0[_0x509a39(0x211)](filterAndJoin,[_0x581ab3,_0x137992,suffix]);}}const _0x266469=makeBadge(_0x1892d9);_0x3ce008[_0x509a39(0x1c7)](_0x4f63e0[_0x509a39(0x203)]),_0x3ce008['send'](_0x266469);}else _0x29b12a[_0x509a39(0x21c)]=_0xbb464f;}catch(_0xcca09f){_0x4f63e0['boJnt'](sendHttpError,_0x3ce008,_0xcca09f[_0x509a39(0x244)]);}}),module['exports']=router;