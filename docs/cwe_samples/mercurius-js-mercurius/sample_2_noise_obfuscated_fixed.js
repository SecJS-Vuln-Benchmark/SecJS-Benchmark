function _0x2b07(){const _0x1e3f79=['mockRestore','creates\x20fully\x20defined\x20event\x20content\x20with\x20html','spyOn','mockReturnValue','AuDvz','create\x20fully\x20defined\x20event\x20content','parses\x20event\x20content\x20with\x20plain\x20text\x20topic','VxZPm','1260896pBrvQk','SXvag','Beacon\x20content\x20helpers','Xknpd','text/html','12072929hAlBDi','creates\x20event\x20content\x20without\x20description','EcGSg','<b>pizza</b>','nxXXt','qdqdE','FKxTy','toEqual','TGtOR','XFoVb','ZQHgc','xNrjB','HfBFA','dCuZD','HhLFf','Aujvk','feVxJ','FiExZ','aOrRq','10EswFIz','slKlf','AoQoK','130CvPlAV','oPjmg','Coawb','dqCvF','ewIIr','rsleM','Date','objectContaining','WFJUn','MLPre','xFcBz','ubCMu','OESPt','vdbPJ','SnEEY','makeBeaconContent()','pizza','OELKg','UDieB','gzZYD','PKjPG','NryZe','enOHR','21766LsueXV','56WQkypD','makeTopicContent()','geo:foo','rlaag','test\x20description','QaznP','$1234','name','KIiGQ','parseTopicContent()','UsJYm','44076HdFTxB','umoCV','rczPn','AAERn','gbWUA','EpEyS','dqKwh','47DbxpEj','text/plain','defaults\x20asset\x20type\x20to\x20self\x20when\x20not\x20set','eHkUB','oBCVX','zMRmE','sZvjU','nice\x20beacon_info','wwAsx','tbtCt','1550706cHRaXO','creates\x20fully\x20defined\x20event\x20content\x20without\x20html','UQsid','LxHeJ','gXmqQ','Pin','VgHWX','649251CJLlTs','GjGBm','fmIHm','nvXOz','hXYxp','parses\x20event\x20content\x20with\x20plain\x20text\x20topic\x20without\x20mimetype','Self','efggg','1617861KWaidz','defaults\x20timestamp\x20to\x20current\x20time','oKNMZ'];_0x2b07=function(){return _0x1e3f79;};return _0x2b07();}const _0x15b119=_0x5561;(function(_0x4f8dcc,_0x41d01d){const _0x2bee6f=_0x5561,_0x381e9d=_0x4f8dcc();while(!![]){try{const _0x41e994=-parseInt(_0x2bee6f(0xf6))/0x1*(parseInt(_0x2bee6f(0xe3))/0x2)+parseInt(_0x2bee6f(0x97))/0x3+-parseInt(_0x2bee6f(0xb1))/0x4+parseInt(_0x2bee6f(0xcc))/0x5*(-parseInt(_0x2bee6f(0xef))/0x6)+parseInt(_0x2bee6f(0xa6))/0x7+-parseInt(_0x2bee6f(0xe4))/0x8*(parseInt(_0x2bee6f(0x9e))/0x9)+-parseInt(_0x2bee6f(0xc9))/0xa*(-parseInt(_0x2bee6f(0xb6))/0xb);if(_0x41e994===_0x41d01d)break;else _0x381e9d['push'](_0x381e9d['shift']());}catch(_0x479fb3){_0x381e9d['push'](_0x381e9d['shift']());}}}(_0x2b07,0x4ed36));import{REFERENCE_RELATION}from'matrix-events-sdk';import{LocationAssetType,M_ASSET,M_LOCATION,M_TIMESTAMP}from'../../src/@types/location';function _0x5561(_0x387b0f,_0x273772){const _0x2b0757=_0x2b07();return _0x5561=function(_0x5561ef,_0x3078e4){_0x5561ef=_0x5561ef-0x97;let _0x4e9e89=_0x2b0757[_0x5561ef];return _0x4e9e89;},_0x5561(_0x387b0f,_0x273772);}import{M_TOPIC}from'../../src/@types/topic';import{makeBeaconContent,makeBeaconInfoContent,makeTopicContent,parseTopicContent}from'../../src/content-helpers';describe(_0x15b119(0xb3),()=>{const _0x3dc888=_0x15b119,_0x477be1={'HhLFf':'now','wwAsx':function(_0x569b47,_0x4d5a53){return _0x569b47!==_0x4d5a53;},'UDieB':_0x3dc888(0xd5),'dCuZD':function(_0x5a58c1,_0x1a6b4c,_0x2ee5ec,_0x43ef55,_0x3ecb84){return _0x5a58c1(_0x1a6b4c,_0x2ee5ec,_0x43ef55,_0x3ecb84);},'rsleM':_0x3dc888(0xfd),'dqKwh':function(_0x298f74,_0x5e2540){return _0x298f74===_0x5e2540;},'umoCV':_0x3dc888(0xdf),'xFcBz':function(_0x99816,_0x2a493a,_0x602a4a,_0xcfdd20){return _0x99816(_0x2a493a,_0x602a4a,_0xcfdd20);},'rlaag':function(_0x220cc9,_0x433520,_0x17252e){return _0x220cc9(_0x433520,_0x17252e);},'dqCvF':_0x3dc888(0xb5),'dvMyl':function(_0x2d08bd,_0x15d50d,_0x4f5d7f){return _0x2d08bd(_0x15d50d,_0x4f5d7f);},'FKxTy':function(_0x278d98,_0x23c5b4,_0x4ff61a){return _0x278d98(_0x23c5b4,_0x4ff61a);},'HfBFA':_0x3dc888(0xa7),'GjGBm':function(_0x483808,_0x328576,_0x1a7413){return _0x483808(_0x328576,_0x1a7413);},'Xknpd':_0x3dc888(0xf8),'sZvjU':function(_0x5ae942,_0x1328a7){return _0x5ae942(_0x1328a7);},'gXmqQ':_0x3dc888(0xe6),'VxZPm':_0x3dc888(0xea),'PVmgJ':'qHWfU','hiYIE':_0x3dc888(0xe8),'VGjVm':function(_0x1f89d1,_0xe1a687,_0x1bd6d9){return _0x1f89d1(_0xe1a687,_0x1bd6d9);},'UQsid':_0x3dc888(0xb7),'EcGSg':'creates\x20event\x20content\x20with\x20description','vlcUU':function(_0x9b0f20,_0x3cd853,_0x2b7e72){return _0x9b0f20(_0x3cd853,_0x2b7e72);},'AcBHP':function(_0xce55f4,_0x328eb1,_0x497842){return _0xce55f4(_0x328eb1,_0x497842);}};_0x477be1['vlcUU'](describe,'makeBeaconInfoContent()',()=>{const _0x59db4b=_0x3dc888,_0x41ba06={'fmIHm':function(_0x294691,_0x125c71){return _0x294691(_0x125c71);},'AoQoK':function(_0xc421a8,_0x3e45a5,_0x3d1bcd,_0x105e8a){const _0x4c1e10=_0x5561;return _0x477be1[_0x4c1e10(0xd6)](_0xc421a8,_0x3e45a5,_0x3d1bcd,_0x105e8a);},'feVxJ':'geo:foo','xSHaW':_0x59db4b(0xea),'TGtOR':function(_0xe06243,_0xcef014){return _0xe06243(_0xcef014);},'vdbPJ':function(_0xefc420,_0x51ffe7,_0x2e7bf8){const _0x65e19d=_0x59db4b;return _0x477be1[_0x65e19d(0xe7)](_0xefc420,_0x51ffe7,_0x2e7bf8);},'aOrRq':_0x59db4b(0xb9),'nvXOz':_0x59db4b(0xdc),'UsJYm':_0x477be1[_0x59db4b(0xcf)],'KIiGQ':_0x59db4b(0xff),'lvVjc':_0x477be1[_0x59db4b(0xc4)]};if(_0x59db4b(0xfb)===_0x59db4b(0xe9))_0x41ba06[_0x59db4b(0xa0)](_0x1160d0,_0x41ba06[_0x59db4b(0xcb)](_0x262595,_0x41ba06[_0x59db4b(0xc6)],0x7b,_0x41ba06['xSHaW']))[_0x59db4b(0xbd)]({[_0x3dc1b1['name']]:{'description':_0x496bc4,'uri':_0x41ba06[_0x59db4b(0xc6)]},[_0x557443[_0x59db4b(0xeb)]]:0x7b,'m.relates_to':{'rel_type':_0x599c9f[_0x59db4b(0xeb)],'event_id':_0x59db4b(0xea)}});else{const _0x3c69f9=0x75bcd15;beforeEach(()=>{const _0x219813=_0x59db4b;_0x219813(0xd7)!==_0x41ba06[_0x219813(0xec)]?jest[_0x219813(0xab)](global[_0x219813(0xd2)],'now')[_0x219813(0xac)](_0x3c69f9):_0x41ba06[_0x219813(0xbe)](_0x26e93d,_0x41ba06[_0x219813(0xd9)](_0x132712,_0x219813(0xdc),_0x41ba06[_0x219813(0xc8)]))[_0x219813(0xbd)]({'topic':_0x219813(0xdc),[_0x3bbd3f['name']]:[{'body':_0x41ba06['nvXOz'],'mimetype':'text/plain'},{'body':_0x219813(0xb9),'mimetype':_0x41ba06[_0x219813(0xee)]}]});}),afterAll(()=>{const _0x4bc137=_0x59db4b;jest[_0x4bc137(0xab)](global[_0x4bc137(0xd2)],_0x477be1['HhLFf'])[_0x4bc137(0xa9)]();}),_0x477be1['dvMyl'](it,_0x59db4b(0xae),()=>{const _0x557e4c=_0x59db4b;_0x477be1['wwAsx']('MLPre',_0x477be1[_0x557e4c(0xde)])?_0x4220c[_0x557e4c(0xab)](_0xcace5[_0x557e4c(0xd2)],_0x41ba06['lvVjc'])[_0x557e4c(0xac)](_0x342239):expect(_0x477be1[_0x557e4c(0xc3)](makeBeaconInfoContent,0x4d2,!![],_0x477be1[_0x557e4c(0xd1)],LocationAssetType[_0x557e4c(0x9c)]))['toEqual']({'description':_0x477be1[_0x557e4c(0xd1)],'timeout':0x4d2,'live':!![],[M_TIMESTAMP[_0x557e4c(0xeb)]]:_0x3c69f9,[M_ASSET[_0x557e4c(0xeb)]]:{'type':LocationAssetType[_0x557e4c(0x9c)]}});}),_0x477be1[_0x59db4b(0xbc)](it,_0x477be1[_0x59db4b(0xc2)],()=>{const _0x540eb1=_0x59db4b;expect(_0x477be1['dCuZD'](makeBeaconInfoContent,0x4d2,!![],_0x477be1['rsleM'],LocationAssetType[_0x540eb1(0x9c)]))[_0x540eb1(0xbd)](expect[_0x540eb1(0xd3)]({[M_TIMESTAMP['name']]:_0x3c69f9}));}),_0x477be1[_0x59db4b(0x9f)](it,'uses\x20timestamp\x20when\x20provided',()=>{const _0x201641=_0x59db4b;expect(makeBeaconInfoContent(0x4d2,!![],_0x201641(0xfd),LocationAssetType[_0x201641(0x9c)],0x1869f))['toEqual'](expect[_0x201641(0xd3)]({[M_TIMESTAMP[_0x201641(0xeb)]]:0x1869f}));}),it(_0x477be1[_0x59db4b(0xb4)],()=>{const _0x5b736b=_0x59db4b;_0x477be1[_0x5b736b(0xf5)](_0x477be1[_0x5b736b(0xf0)],_0x477be1[_0x5b736b(0xf0)])?expect(makeBeaconInfoContent(0x4d2,!![],'nice\x20beacon_info'))['toEqual'](expect[_0x5b736b(0xd3)]({[M_ASSET[_0x5b736b(0xeb)]]:{'type':LocationAssetType[_0x5b736b(0xa4)]}})):_0x911dd0(_0x278492({'topic':_0x41ba06[_0x5b736b(0xa1)],[_0x5b0924[_0x5b736b(0xeb)]]:[{'body':_0x5b736b(0xdc)}]}))[_0x5b736b(0xbd)]({'text':_0x41ba06['nvXOz']});});}}),_0x477be1['AcBHP'](describe,_0x3dc888(0xdb),()=>{const _0x1346c7=_0x3dc888,_0x2468e6={'hXYxp':function(_0x163b9b,_0x24842a){return _0x163b9b(_0x24842a);},'eHkUB':_0x1346c7(0xea),'xNrjB':_0x1346c7(0xe8)};_0x477be1['VGjVm'](it,_0x477be1[_0x1346c7(0x99)],()=>{const _0x4899cf=_0x1346c7;_0x477be1[_0x4899cf(0xfc)](expect,makeBeaconContent(_0x477be1['gXmqQ'],0x7b,_0x4899cf(0xea)))[_0x4899cf(0xbd)]({[M_LOCATION[_0x4899cf(0xeb)]]:{'description':undefined,'uri':'geo:foo'},[M_TIMESTAMP[_0x4899cf(0xeb)]]:0x7b,'m.relates_to':{'rel_type':REFERENCE_RELATION[_0x4899cf(0xeb)],'event_id':_0x477be1[_0x4899cf(0xb0)]}});}),it(_0x477be1[_0x1346c7(0xb8)],()=>{const _0x2e72a8=_0x1346c7;_0x477be1[_0x2e72a8(0xfe)](_0x477be1['PVmgJ'],'qHWfU')?_0x2468e6[_0x2e72a8(0xa2)](_0x231375,_0x2f7593(_0x2e72a8(0xe6),0x7b,_0x2468e6[_0x2e72a8(0xf9)],_0x2468e6[_0x2e72a8(0xc1)]))[_0x2e72a8(0xbd)]({[_0x481eaf[_0x2e72a8(0xeb)]]:{'description':_0x2468e6[_0x2e72a8(0xc1)],'uri':_0x2e72a8(0xe6)},[_0x5983d5[_0x2e72a8(0xeb)]]:0x7b,'m.relates_to':{'rel_type':_0xd3cc94[_0x2e72a8(0xeb)],'event_id':_0x2e72a8(0xea)}}):expect(makeBeaconContent(_0x2e72a8(0xe6),0x7b,_0x477be1[_0x2e72a8(0xb0)],_0x2e72a8(0xe8)))[_0x2e72a8(0xbd)]({[M_LOCATION[_0x2e72a8(0xeb)]]:{'description':_0x477be1['hiYIE'],'uri':_0x477be1[_0x2e72a8(0x9b)]},[M_TIMESTAMP[_0x2e72a8(0xeb)]]:0x7b,'m.relates_to':{'rel_type':REFERENCE_RELATION[_0x2e72a8(0xeb)],'event_id':'$1234'}});});});}),describe('Topic\x20content\x20helpers',()=>{const _0x420cbb=_0x15b119,_0x1c1a7d={'VgHWX':_0x420cbb(0xf7),'EpEyS':function(_0x642cca,_0x196a41,_0x477d62){return _0x642cca(_0x196a41,_0x477d62);},'SnEEY':_0x420cbb(0x98),'oBCVX':function(_0x147baf,_0xab93b9,_0x73868){return _0x147baf(_0xab93b9,_0x73868);},'ZQHgc':_0x420cbb(0xaa),'dUfKQ':_0x420cbb(0xb9),'PQVWr':function(_0x51433d,_0x4ead43){return _0x51433d===_0x4ead43;},'gbWUA':'SXvag','nxXXt':function(_0x20f502,_0x1b00aa){return _0x20f502(_0x1b00aa);},'OELKg':_0x420cbb(0xdc),'Aujvk':'EiCVq','efggg':function(_0x3f4745,_0x540cdb){return _0x3f4745(_0x540cdb);},'PKjPG':function(_0x59e857,_0x2c620d,_0x583541){return _0x59e857(_0x2c620d,_0x583541);},'FiExZ':_0x420cbb(0xaf),'oPjmg':'parses\x20event\x20content\x20with\x20html\x20topic','qdqdE':function(_0x2a3905,_0x2dbecc,_0x513464){return _0x2a3905(_0x2dbecc,_0x513464);},'oKNMZ':_0x420cbb(0xed)};_0x1c1a7d[_0x420cbb(0xbb)](describe,_0x420cbb(0xe5),()=>{const _0x439902=_0x420cbb,_0xf62715={'LxHeJ':_0x439902(0xdc),'WFJUn':_0x1c1a7d[_0x439902(0x9d)],'NryZe':_0x439902(0xb9),'enOHR':_0x439902(0xb5)};_0x1c1a7d[_0x439902(0xf4)](it,_0x1c1a7d[_0x439902(0xda)],()=>{const _0x36da55=_0x439902;expect(makeTopicContent(_0xf62715[_0x36da55(0x9a)]))[_0x36da55(0xbd)]({'topic':_0x36da55(0xdc),[M_TOPIC[_0x36da55(0xeb)]]:[{'body':_0x36da55(0xdc),'mimetype':_0xf62715[_0x36da55(0xd4)]}]});}),_0x1c1a7d[_0x439902(0xfa)](it,_0x1c1a7d[_0x439902(0xc0)],()=>{const _0x91021e=_0x439902;expect(makeTopicContent(_0xf62715[_0x91021e(0x9a)],_0x91021e(0xb9)))[_0x91021e(0xbd)]({'topic':_0xf62715[_0x91021e(0x9a)],[M_TOPIC['name']]:[{'body':_0x91021e(0xdc),'mimetype':_0x91021e(0xf7)},{'body':_0xf62715[_0x91021e(0xe1)],'mimetype':_0xf62715[_0x91021e(0xe2)]}]});});}),_0x1c1a7d['EpEyS'](describe,_0x1c1a7d[_0x420cbb(0xa8)],()=>{const _0x5a5329=_0x420cbb;_0x1c1a7d[_0x5a5329(0xf4)](it,_0x5a5329(0xa3),()=>{const _0x56bd1f=_0x5a5329,_0x444e5c={'XFoVb':_0x56bd1f(0xdc),'AAERn':_0x1c1a7d['dUfKQ'],'mQfDF':_0x56bd1f(0xf7),'ZnwrG':_0x56bd1f(0x98)};if(_0x1c1a7d['PQVWr'](_0x56bd1f(0xb2),_0x1c1a7d[_0x56bd1f(0xf3)]))_0x1c1a7d[_0x56bd1f(0xba)](expect,parseTopicContent({'topic':'pizza',[M_TOPIC[_0x56bd1f(0xeb)]]:[{'body':_0x56bd1f(0xdc)}]}))[_0x56bd1f(0xbd)]({'text':_0x1c1a7d[_0x56bd1f(0xdd)]});else{const _0xedc506={'ewIIr':_0x444e5c[_0x56bd1f(0xbf)],'Coawb':_0x444e5c[_0x56bd1f(0xf2)],'slKlf':_0x444e5c['mQfDF'],'rczPn':'text/html'};_0x113d7c(_0x444e5c['ZnwrG'],()=>{const _0x58997f=_0x56bd1f;_0x14c6ba(_0x1504f7(_0xedc506[_0x58997f(0xd0)]))[_0x58997f(0xbd)]({'topic':_0xedc506['ewIIr'],[_0x1d1a6e['name']]:[{'body':_0xedc506[_0x58997f(0xd0)],'mimetype':_0x58997f(0xf7)}]});}),_0x3c4e88(_0x56bd1f(0xaa),()=>{const _0x5e0be9=_0x56bd1f;_0x5371b6(_0x67c5a0(_0xedc506[_0x5e0be9(0xd0)],_0xedc506[_0x5e0be9(0xce)]))[_0x5e0be9(0xbd)]({'topic':'pizza',[_0x199245['name']]:[{'body':_0xedc506[_0x5e0be9(0xd0)],'mimetype':_0xedc506[_0x5e0be9(0xca)]},{'body':_0x5e0be9(0xb9),'mimetype':_0xedc506[_0x5e0be9(0xf1)]}]});});}}),_0x1c1a7d[_0x5a5329(0xe0)](it,_0x1c1a7d[_0x5a5329(0xc7)],()=>{const _0x4c9fd3=_0x5a5329,_0x43a9e4={'AuDvz':function(_0x525173,_0x243d71){return _0x1c1a7d['nxXXt'](_0x525173,_0x243d71);},'tKRDg':_0x1c1a7d[_0x4c9fd3(0xdd)],'OESPt':_0x4c9fd3(0xf7)};_0x1c1a7d[_0x4c9fd3(0xc5)]===_0x1c1a7d[_0x4c9fd3(0xc5)]?_0x1c1a7d[_0x4c9fd3(0xa5)](expect,parseTopicContent({'topic':'pizza',[M_TOPIC[_0x4c9fd3(0xeb)]]:[{'body':_0x1c1a7d['OELKg'],'mimetype':_0x4c9fd3(0xf7)}]}))[_0x4c9fd3(0xbd)]({'text':'pizza'}):_0x43a9e4[_0x4c9fd3(0xad)](_0xad233,_0x582874({'topic':_0x4c9fd3(0xdc),[_0x3f3588[_0x4c9fd3(0xeb)]]:[{'body':_0x43a9e4['tKRDg'],'mimetype':_0x43a9e4[_0x4c9fd3(0xd8)]}]}))[_0x4c9fd3(0xbd)]({'text':_0x4c9fd3(0xdc)});}),it(_0x1c1a7d[_0x5a5329(0xcd)],()=>{const _0x5e4e7b=_0x5a5329;_0x1c1a7d[_0x5e4e7b(0xba)](expect,parseTopicContent({'topic':_0x1c1a7d[_0x5e4e7b(0xdd)],[M_TOPIC[_0x5e4e7b(0xeb)]]:[{'body':'<b>pizza</b>','mimetype':_0x5e4e7b(0xb5)}]}))[_0x5e4e7b(0xbd)]({'text':_0x1c1a7d['OELKg'],'html':'<b>pizza</b>'});});});});