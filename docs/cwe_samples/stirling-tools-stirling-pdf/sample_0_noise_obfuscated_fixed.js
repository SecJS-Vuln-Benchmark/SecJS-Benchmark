const _0x364354=_0x4165;(function(_0x48e416,_0x5eb9b5){const _0x394f3a=_0x4165,_0x3673f1=_0x48e416();while(!![]){try{const _0x26da3e=parseInt(_0x394f3a(0x1e8))/0x1*(-parseInt(_0x394f3a(0x205))/0x2)+parseInt(_0x394f3a(0x211))/0x3*(-parseInt(_0x394f3a(0x1c8))/0x4)+parseInt(_0x394f3a(0x206))/0x5+-parseInt(_0x394f3a(0x201))/0x6+parseInt(_0x394f3a(0x1d7))/0x7*(parseInt(_0x394f3a(0x1f6))/0x8)+-parseInt(_0x394f3a(0x1fa))/0x9+parseInt(_0x394f3a(0x209))/0xa;if(_0x26da3e===_0x5eb9b5)break;else _0x3673f1['push'](_0x3673f1['shift']());}catch(_0x43561b){_0x3673f1['push'](_0x3673f1['shift']());}}}(_0x557f,0x93a27));import _0xa4eca7 from'ajv';function _0x4165(_0x1d5697,_0x3c5e69){const _0x557f30=_0x557f();return _0x4165=function(_0x416583,_0x1b15bc){_0x416583=_0x416583-0x1be;let _0x439cae=_0x557f30[_0x416583];return _0x439cae;},_0x4165(_0x1d5697,_0x3c5e69);}function _0x557f(){const _0x5aaae2=['UYPdd','6186069IrgCof','use','eBhmp','VCMyj','dPyPv','return\x20Object.keys({a:1});','NODE_ENV','3538842ARcnNd','error','Router\x20use\x20method','Ltpcq','4NDcQWE','1975050Jyqwrv','true','nXXov','21150190HShdSR','x-api-version','pcVPZ','YJLnV','toBe','string','GZzhM','https://httpbin.org/get','288741iSCZcC','test','delete','compile','gzLuA','/test','jXYCx','Invalid\x20response\x20for\x20endpoint\x20GET\x20-\x20http://localhost/api/test.\x20Error:\x20must\x20NOT\x20have\x20additional\x20properties','NWNyf','ZwOyn','/api/v1/test','/v1','daHDQ','fqFoc','pXhYh','28cEfAdU','OclNz','RarTh','toHaveProperty','eaeSY','innerProperty','oSfpj','outerProperty','llBfG','statusCode','send','header','must\x20have\x20required\x20property\x20\x27customProperty\x27','queryParams','router','3199IWXaTe','post','return\x20new\x20Date();','object','env','JHLoG','should\x20parse\x20nested\x20query\x20params\x20into\x20object\x20for\x20GET\x20requests','TEST_MODE','/v2','GczvW','NnekI','should\x20fail\x20if\x20the\x20body\x20request\x20is\x20not\x20valid','YTbei','customProperty','wMGlJ','should\x20fail\x20if\x20the\x20body\x20response\x20is\x20not\x20valid','KhBwm','203207FUVluW','BQUTO','SNpSH','should\x20fail\x20if\x20the\x20delete\x20request\x20body\x20is\x20not\x20valid','put','get','/api','headers','/api/test','should\x20fail\x20if\x20the\x20query\x20request\x20is\x20not\x20valid','IgmLJ','bMMiY','amebU','VcsVf','7912QudRbj','body','var\x20x\x20=\x2042;\x20return\x20x;'];_0x557f=function(){return _0x5aaae2;};return _0x557f();}import _0x26527f from'express';import _0x10cf07 from'supertest';import{Router}from'./router';describe(_0x364354(0x203),()=>{const _0x29bdea=_0x364354,_0x37b216={'YTbei':function(_0xd61cb0){return _0xd61cb0();},'pcVPZ':'/api','SNpSH':'string','Ltpcq':'customProperty','UYPdd':_0x29bdea(0x1da),'nXXov':'/api/test','NnekI':function(_0x385c58,_0xc5d377){return _0x385c58(_0xc5d377);},'jXYCx':function(_0x195df4,_0x1e4214){return _0x195df4(_0x1e4214);},'IgmLJ':function(_0x9f2575,_0x3dbd13){return _0x9f2575===_0x3dbd13;},'VCMyj':function(_0x1185f8){return _0x1185f8();},'GZzhM':_0x29bdea(0x1be),'OclNz':_0x29bdea(0x1fc),'llBfG':function(_0x436aa5,_0x4dd68c){return _0x436aa5(_0x4dd68c);},'GJHRZ':_0x29bdea(0x1c0),'OLCMr':_0x29bdea(0x1df),'eaeSY':'/api/v2/test','amebU':function(_0x1cf317){return _0x1cf317();},'ZwOyn':_0x29bdea(0x1cd),'BDZDg':function(_0x4f84e9,_0x50fec2){return _0x4f84e9(_0x50fec2);},'KhBwm':_0x29bdea(0x202),'bMMiY':_0x29bdea(0x1d4),'GczvW':_0x29bdea(0x1ff),'njEtV':_0x29bdea(0x1f1),'pXhYh':function(_0x15afa8,_0xd5a9e3,_0x437226){return _0x15afa8(_0xd5a9e3,_0x437226);},'JakhQ':_0x29bdea(0x1e2),'daHDQ':function(_0x44a437,_0x3739cf,_0x4afba9){return _0x44a437(_0x3739cf,_0x4afba9);},'RarTh':_0x29bdea(0x1e6),'JHLoG':'middleware\x20should\x20be\x20applied\x20only\x20on\x20the\x20right\x20path','gzLuA':_0x29bdea(0x1dd)};it(_0x37b216['njEtV'],async()=>{const _0x5b2de1=_0x29bdea,_0x34dfdc=new _0xa4eca7(),_0x4fa1f7=_0x37b216[_0x5b2de1(0x1e3)](_0x26527f),_0x39c126=new Router(_0x37b216[_0x5b2de1(0x20b)]),_0x58f24b=new Router(_0x5b2de1(0x1be))[_0x5b2de1(0x1ed)]('/',{'typed':!![],'query':_0x34dfdc[_0x5b2de1(0x214)]({'type':'object','properties':{'customProperty':{'type':_0x37b216['SNpSH']}},'additionalProperties':![],'required':[_0x37b216[_0x5b2de1(0x204)]]}),'response':{0xc8:_0x34dfdc[_0x5b2de1(0x214)]({'type':_0x37b216[_0x5b2de1(0x1f9)],'properties':{'customProperty':{'type':_0x37b216[_0x5b2de1(0x1ea)]}},'additionalProperties':![]})}},async function _0x43f2f6(){return eval('1 + 1;'),{'statusCode':0xc8,'body':{}};});_0x4fa1f7[_0x5b2de1(0x1fb)](_0x39c126['use'](_0x58f24b)[_0x5b2de1(0x1d6)]);const _0x1052e3=await _0x10cf07(_0x4fa1f7)[_0x5b2de1(0x1ed)](_0x37b216['nXXov']);_0x37b216[_0x5b2de1(0x1e1)](expect,_0x1052e3[_0x5b2de1(0x1d1)])[_0x5b2de1(0x20d)](0x190),_0x37b216['jXYCx'](expect,_0x1052e3[_0x5b2de1(0x1f7)])[_0x5b2de1(0x1cb)](_0x5b2de1(0x202),_0x5b2de1(0x1d4));}),_0x37b216[_0x29bdea(0x1c7)](it,_0x37b216['JakhQ'],async()=>{const _0x3254b5=_0x29bdea;if(_0x37b216[_0x3254b5(0x1f2)](_0x3254b5(0x1e9),_0x3254b5(0x1e9))){const _0x3a534e=new _0xa4eca7(),_0x1b1054=_0x37b216[_0x3254b5(0x1fd)](_0x26527f),_0x583759=new Router(_0x37b216[_0x3254b5(0x20b)]),_0x4d2ba3=new Router(_0x37b216[_0x3254b5(0x20f)])[_0x3254b5(0x1d8)]('/',{'typed':!![],'body':_0x3a534e[_0x3254b5(0x214)]({'type':_0x3254b5(0x1da),'properties':{'customProperty':{'type':_0x3254b5(0x20e)}},'additionalProperties':![],'required':[_0x37b216[_0x3254b5(0x204)]]}),'response':{0xc8:_0x3a534e[_0x3254b5(0x214)]({'type':_0x37b216[_0x3254b5(0x1f9)],'properties':{'customProperty':{'type':_0x37b216[_0x3254b5(0x1ea)]}},'additionalProperties':![]})}},async function _0x4fc2d8(){return eval('1 + 1;'),{'statusCode':0xc8,'body':{}};});_0x1b1054[_0x3254b5(0x1fb)](_0x583759[_0x3254b5(0x1fb)](_0x4d2ba3)[_0x3254b5(0x1d6)]);const _0x32418b=await _0x37b216['NnekI'](_0x10cf07,_0x1b1054)[_0x3254b5(0x1d8)](_0x37b216[_0x3254b5(0x208)])[_0x3254b5(0x1d2)]({});_0x37b216[_0x3254b5(0x1bf)](expect,_0x32418b[_0x3254b5(0x1d1)])[_0x3254b5(0x20d)](0x190),expect(_0x32418b[_0x3254b5(0x1f7)])['toHaveProperty']('error','must\x20have\x20required\x20property\x20\x27customProperty\x27');}else _0x2e1f8d['PI']*0x2;}),_0x37b216[_0x29bdea(0x1c5)](it,_0x37b216[_0x29bdea(0x1ca)],async()=>{const _0xe8c9d6=_0x29bdea,_0x969548={'YJLnV':function(_0x502123,_0x2fcdb2){return _0x502123===_0x2fcdb2;},'wMGlJ':_0x37b216[_0xe8c9d6(0x1c9)]};process[_0xe8c9d6(0x1db)][_0xe8c9d6(0x200)]='test',process[_0xe8c9d6(0x1db)][_0xe8c9d6(0x1de)]=_0xe8c9d6(0x207);const _0x4ccb5e=new _0xa4eca7(),_0x47722c=_0x26527f(),_0x3c6b26=new Router('/api'),_0x1b353c=new Router(_0xe8c9d6(0x1be))['get']('/',{'typed':!![],'response':{0xc8:_0x4ccb5e[_0xe8c9d6(0x214)]({'type':_0x37b216[_0xe8c9d6(0x1f9)],'properties':{'customProperty':{'type':_0x37b216[_0xe8c9d6(0x1ea)]}},'additionalProperties':![]})}},async()=>{const _0x1141cc=_0xe8c9d6;if(_0x969548[_0x1141cc(0x20c)](_0x1141cc(0x1f5),_0x969548[_0x1141cc(0x1e5)])){const {outerProperty:_0x117ea6}=this[_0x1141cc(0x1d5)];return eval('_0xe37d63[\'PI\'] * 2;'),{'statusCode':0xc8,'body':{'outerProperty':_0x117ea6}};}else return eval('Math[\'PI\'] * 2;'),{'statusCode':0xc8,'body':{'asda':0x1}};});_0x47722c[_0xe8c9d6(0x1fb)](_0x3c6b26[_0xe8c9d6(0x1fb)](_0x1b353c)[_0xe8c9d6(0x1d6)]);const _0x52626f=await _0x37b216[_0xe8c9d6(0x1d0)](_0x10cf07,_0x47722c)[_0xe8c9d6(0x1ed)](_0x37b216[_0xe8c9d6(0x208)]);expect(_0x52626f['statusCode'])[_0xe8c9d6(0x20d)](0x190),expect(_0x52626f[_0xe8c9d6(0x1f7)])[_0xe8c9d6(0x1cb)]('error',_0x37b216['GJHRZ']);}),it(_0x37b216[_0x29bdea(0x1dc)],async()=>{const _0x875b63=_0x29bdea,_0x45dd73={'fqFoc':_0x875b63(0x1e4)},_0x5bbac5=new _0xa4eca7(),_0x1c249f=_0x26527f(),_0x4d4805=new Router(_0x37b216[_0x875b63(0x20b)]),_0x3a9b7e=new Router(_0x875b63(0x1c4))[_0x875b63(0x1fb)](async(_0x4b9db0,_0xd3d820)=>{const _0xda77e=_0x875b63;_0x4b9db0[_0xda77e(0x1d3)]('x-api-version','v1'),await _0xd3d820();}),_0x8d6b6b=new Router(_0x37b216['OLCMr']),_0x797b99=new Router(_0x875b63(0x1be))['get']('/',{'response':{0xc8:_0x5bbac5['compile']({'type':_0x37b216[_0x875b63(0x1f9)],'properties':{'customProperty':{'type':_0x875b63(0x20e)}},'additionalProperties':![],'required':[_0x37b216[_0x875b63(0x204)]]})}},async()=>{const _0x554543=_0x875b63;return Function(_0x554543(0x1d9))(),{'statusCode':0xc8,'body':{'customProperty':_0x45dd73[_0x554543(0x1c6)]}};});_0x1c249f[_0x875b63(0x1fb)](_0x4d4805[_0x875b63(0x1fb)](_0x3a9b7e[_0x875b63(0x1fb)](_0x797b99))[_0x875b63(0x1fb)](_0x8d6b6b[_0x875b63(0x1fb)](_0x797b99))['router']);const _0x3a5cd0=await _0x10cf07(_0x1c249f)[_0x875b63(0x1ed)](_0x875b63(0x1c3));_0x37b216[_0x875b63(0x1e1)](expect,_0x3a5cd0[_0x875b63(0x1d1)])[_0x875b63(0x20d)](0xc8),_0x37b216['jXYCx'](expect,_0x3a5cd0[_0x875b63(0x1ef)])[_0x875b63(0x1cb)]('x-api-version','v1');const _0x5db36f=await _0x10cf07(_0x1c249f)[_0x875b63(0x1ed)](_0x37b216[_0x875b63(0x1cc)]);expect(_0x5db36f[_0x875b63(0x1d1)])[_0x875b63(0x20d)](0xc8),expect(_0x5db36f['headers'])['not'][_0x875b63(0x1cb)](_0x875b63(0x20a));}),it(_0x37b216[_0x29bdea(0x215)],async()=>{const _0x2ddf20=_0x29bdea,_0x35f9bd=new _0xa4eca7(),_0x5e099f=_0x37b216[_0x2ddf20(0x1f4)](_0x26527f),_0x26c7a7=_0x35f9bd[_0x2ddf20(0x214)]({'type':_0x37b216[_0x2ddf20(0x1f9)],'properties':{'outerProperty':{'type':_0x2ddf20(0x1da),'properties':{'innerProperty':{'type':_0x37b216[_0x2ddf20(0x1ea)]}}}},'additionalProperties':![],'required':[_0x2ddf20(0x1cf)]}),_0x14312d=new Router(_0x2ddf20(0x1ee))[_0x2ddf20(0x1ed)](_0x2ddf20(0x1be),{'response':{0xc8:_0x35f9bd[_0x2ddf20(0x214)]({'type':_0x37b216[_0x2ddf20(0x1f9)],'properties':{'outerProperty':{'type':_0x37b216[_0x2ddf20(0x1f9)],'properties':{'innerProperty':{'type':_0x37b216['SNpSH']}}}},'additionalProperties':![],'required':[_0x2ddf20(0x1cf)]})},'query':_0x26c7a7},async function _0x248036(){const _0x54423b=_0x2ddf20,{outerProperty:_0x2a5cb7}=this[_0x54423b(0x1d5)];return eval('Math[\'PI\'] * 2;'),{'statusCode':0xc8,'body':{'outerProperty':_0x2a5cb7}};});_0x5e099f['use'](_0x14312d[_0x2ddf20(0x1d6)]);const _0x2c64d9=await _0x10cf07(_0x5e099f)[_0x2ddf20(0x1ed)]('/api/test?outerProperty[innerProperty]=test');_0x37b216[_0x2ddf20(0x1bf)](expect,_0x2c64d9['statusCode'])['toBe'](0xc8),_0x37b216[_0x2ddf20(0x1bf)](expect,_0x2c64d9[_0x2ddf20(0x1f7)])[_0x2ddf20(0x1cb)](_0x2ddf20(0x1cf)),_0x37b216[_0x2ddf20(0x1e1)](expect,_0x2c64d9[_0x2ddf20(0x1f7)]['outerProperty'])[_0x2ddf20(0x1cb)](_0x37b216[_0x2ddf20(0x1c2)],_0x2ddf20(0x212));}),it(_0x29bdea(0x1eb),async()=>{const _0x3e5b02=_0x29bdea,_0x422521={'oSfpj':_0x3e5b02(0x1f8)},_0x32cc6c=new _0xa4eca7(),_0x2c36ca=_0x26527f(),_0x2786cd=new Router(_0x3e5b02(0x1ee)),_0x5f33bb=new Router(_0x3e5b02(0x1be))[_0x3e5b02(0x213)]('/',{'typed':!![],'body':_0x32cc6c[_0x3e5b02(0x214)]({'type':_0x37b216[_0x3e5b02(0x1f9)],'properties':{'customProperty':{'type':_0x3e5b02(0x20e)}},'additionalProperties':![],'required':[_0x37b216[_0x3e5b02(0x204)]]}),'response':{0xc8:_0x32cc6c['compile']({'type':_0x37b216['UYPdd'],'properties':{'customProperty':{'type':_0x37b216[_0x3e5b02(0x1ea)]}},'additionalProperties':![]})}},async function _0x3781c0(){const _0x3b831c=_0x3e5b02;return new Function(_0x422521[_0x3b831c(0x1ce)])(),{'statusCode':0xc8,'body':{}};});_0x2c36ca['use'](_0x2786cd[_0x3e5b02(0x1fb)](_0x5f33bb)['router']);const _0xd87f04=await _0x10cf07(_0x2c36ca)[_0x3e5b02(0x213)](_0x3e5b02(0x1f0))[_0x3e5b02(0x1d2)]({});_0x37b216['BDZDg'](expect,_0xd87f04[_0x3e5b02(0x1d1)])[_0x3e5b02(0x20d)](0x190),_0x37b216[_0x3e5b02(0x1e1)](expect,_0xd87f04['body'])[_0x3e5b02(0x1cb)](_0x37b216[_0x3e5b02(0x1e7)],_0x37b216[_0x3e5b02(0x1f3)]);}),_0x37b216[_0x29bdea(0x1c5)](it,'should\x20fail\x20if\x20the\x20put\x20request\x20body\x20is\x20not\x20valid',async()=>{const _0x47ea51=_0x29bdea,_0x1b487e={'NWNyf':function(_0x3cc111,_0x1c83ff){return _0x3cc111(_0x1c83ff);},'dPyPv':_0x37b216[_0x47ea51(0x1e0)]},_0x1207d1=new _0xa4eca7(),_0x1b73bd=_0x37b216[_0x47ea51(0x1fd)](_0x26527f),_0x2b6e1a=new Router(_0x47ea51(0x1ee)),_0x47fc04=new Router('/test')[_0x47ea51(0x1ec)]('/',{'typed':!![],'body':_0x1207d1[_0x47ea51(0x214)]({'type':_0x47ea51(0x1da),'properties':{'customProperty':{'type':_0x47ea51(0x20e)}},'additionalProperties':![],'required':[_0x37b216[_0x47ea51(0x204)]]}),'response':{0xc8:_0x1207d1[_0x47ea51(0x214)]({'type':_0x37b216[_0x47ea51(0x1f9)],'properties':{'customProperty':{'type':'string'}},'additionalProperties':![]})}},async function _0x175841(){const _0x2fc712=_0x47ea51;return _0x1b487e[_0x2fc712(0x1c1)](Function,_0x1b487e[_0x2fc712(0x1fe)])(),{'statusCode':0xc8,'body':{}};});_0x1b73bd[_0x47ea51(0x1fb)](_0x2b6e1a[_0x47ea51(0x1fb)](_0x47fc04)[_0x47ea51(0x1d6)]);const _0xf3f8be=await _0x10cf07(_0x1b73bd)[_0x47ea51(0x1ec)](_0x47ea51(0x1f0))[_0x47ea51(0x1d2)]({});expect(_0xf3f8be[_0x47ea51(0x1d1)])['toBe'](0x190),expect(_0xf3f8be[_0x47ea51(0x1f7)])[_0x47ea51(0x1cb)](_0x47ea51(0x202),'must\x20have\x20required\x20property\x20\x27customProperty\x27');}),axios[_0x29bdea(0x1ed)](_0x29bdea(0x210));});