'use strict';function _0x774c(_0x1b07e8,_0x3f017b){const _0x4591ca=_0x4591();return _0x774c=function(_0x774c34,_0x1603dd){_0x774c34=_0x774c34-0xd0;let _0xa4dfe9=_0x4591ca[_0x774c34];return _0xa4dfe9;},_0x774c(_0x1b07e8,_0x3f017b);}const _0x52c95a=_0x774c;(function(_0x55a10f,_0x10fbd8){const _0x5b910a=_0x774c,_0x1b51e5=_0x55a10f();while(!![]){try{const _0x3060d1=-parseInt(_0x5b910a(0x319))/0x1+-parseInt(_0x5b910a(0x3f5))/0x2+-parseInt(_0x5b910a(0x4b3))/0x3+-parseInt(_0x5b910a(0x33e))/0x4*(-parseInt(_0x5b910a(0x4a9))/0x5)+-parseInt(_0x5b910a(0x3d4))/0x6*(-parseInt(_0x5b910a(0xd0))/0x7)+-parseInt(_0x5b910a(0xda))/0x8+parseInt(_0x5b910a(0x149))/0x9;if(_0x3060d1===_0x10fbd8)break;else _0x1b51e5['push'](_0x1b51e5['shift']());}catch(_0xb90698){_0x1b51e5['push'](_0x1b51e5['shift']());}}}(_0x4591,0x1dbac));const assert=require(_0x52c95a(0x371)),async=require(_0x52c95a(0x28d)),request=require('request'),nconf=require(_0x52c95a(0x37a)),crypto=require(_0x52c95a(0x1a6)),fs=require('fs'),path=require(_0x52c95a(0x34b)),db=require(_0x52c95a(0x2c7)),topics=require('../src/topics'),posts=require(_0x52c95a(0x228)),categories=require('../src/categories'),privileges=require(_0x52c95a(0x34d)),user=require(_0x52c95a(0x418)),groups=require(_0x52c95a(0xed)),socketPosts=require(_0x52c95a(0x1e3)),socketTopics=require(_0x52c95a(0x494)),meta=require(_0x52c95a(0x2ec)),helpers=require(_0x52c95a(0x3e1));describe('Post\x27s',()=>{const _0x30a30a=_0x52c95a,_0x45fca7={'YlKYr':_0x30a30a(0x2be),'UDOfh':'4|2|3|0|5|1','SlgAA':_0x30a30a(0x288),'jUfdH':'The\x20content\x20of\x20test\x20topic','tkanA':'url','lXVrc':function(_0xd3ef5c,_0x5db5eb){return _0xd3ef5c(_0x5db5eb);},'Kgobe':_0x30a30a(0xd9),'AdRyD':'topic\x20title','oEnhh':function(_0x3c57f3){return _0x3c57f3();},'vQWqI':'123456789','rvieQ':_0x30a30a(0x477),'AMvDT':function(_0x3089cc,_0x4083d3){return _0x3089cc!==_0x4083d3;},'ZqYTa':_0x30a30a(0x333),'AbxXy':_0x30a30a(0x2b1),'EUdzF':_0x30a30a(0x338),'cLtWl':_0x30a30a(0x14c),'MLeVF':_0x30a30a(0x238),'dmDZf':_0x30a30a(0x2bb),'shgHV':_0x30a30a(0x11b),'MZybQ':_0x30a30a(0x3fc),'PYmfC':'amazeballs.jpg','fanbL':function(_0x2c7f69,_0x2bb4b6){return _0x2c7f69!==_0x2bb4b6;},'ZWqmG':_0x30a30a(0x18a),'gqIcQ':_0x30a30a(0x2ee),'igRTt':function(_0x1aa769,_0x20aa85,_0xcb3710,_0x9c0bf7){return _0x1aa769(_0x20aa85,_0xcb3710,_0x9c0bf7);},'zgDxc':_0x30a30a(0x3b9),'DAIjA':'topic_1','Ushjj':_0x30a30a(0x3bd),'NeUrb':_0x30a30a(0x342),'KZTsh':_0x30a30a(0x2ed),'TLiMr':'zxOxb','acEwp':function(_0x5d8a0a,_0x4de15f){return _0x5d8a0a(_0x4de15f);},'KXMnt':_0x30a30a(0x1a2),'IGIoV':'LrkRv','GonOt':function(_0x16984a,_0x4af8cc,_0x5224bf){return _0x16984a(_0x4af8cc,_0x5224bf);},'ekhgG':_0x30a30a(0x279),'zvrSJ':_0x30a30a(0xf4),'Tmuzr':function(_0x1cdc4a,_0x3b034c,_0x147ccd){return _0x1cdc4a(_0x3b034c,_0x147ccd);},'WlvvD':'should\x20get\x20voters','ZOOxa':_0x30a30a(0x4bb),'kFHir':function(_0x15468b,_0x1b6648,_0x4a4701){return _0x15468b(_0x1b6648,_0x4a4701);},'MbLHT':_0x30a30a(0x408),'sHAxo':function(_0x4ea301){return _0x4ea301();},'wOpsN':'should\x20bookmark\x20a\x20post','JtvYe':_0x30a30a(0x4af),'KQTVn':'ylUTq','aaFTQ':_0x30a30a(0x345),'LtBrV':function(_0x369711,_0x13c408){return _0x369711(_0x13c408);},'zRFhd':'should\x20error\x20if\x20data\x20is\x20invalid','QzXOv':'[[error:invalid-data]]','zxHaL':_0x30a30a(0x3d8),'Inahp':_0x30a30a(0x403),'jnawm':_0x30a30a(0x37a),'uFbbR':function(_0x761ebc,_0x322b05){return _0x761ebc!==_0x322b05;},'DjalF':_0x30a30a(0x16e),'REdxI':'test\x20topic','uXBKh':function(_0x1237ac,_0x185076){return _0x1237ac(_0x185076);},'wwPsO':_0x30a30a(0x485),'kecWy':_0x30a30a(0xdf),'oJiCy':_0x30a30a(0x2dd),'OnusN':_0x30a30a(0x27c),'bkYua':_0x30a30a(0xe0),'efinh':_0x30a30a(0x27b),'whaPW':_0x30a30a(0x2e6),'uqBDY':_0x30a30a(0x2ad),'yxTBg':_0x30a30a(0x4a7),'ecoPX':_0x30a30a(0xe8),'GvoAD':_0x30a30a(0x3ab),'RKXZa':_0x30a30a(0x37e),'SiKpk':function(_0x1b5f19,_0x599095,_0x346f12){return _0x1b5f19(_0x599095,_0x346f12);},'wEZrr':_0x30a30a(0x150),'fBlgC':function(_0x360133,_0xa4d95c,_0x21e385){return _0x360133(_0xa4d95c,_0x21e385);},'uygZS':_0x30a30a(0x453),'XdGNA':function(_0x5351a4,_0x340d6e,_0x12b1bb){return _0x5351a4(_0x340d6e,_0x12b1bb);},'RCLHM':_0x30a30a(0x3f7),'XUbyk':'should\x20purge\x20posts\x20and\x20purge\x20topic','qZBjx':function(_0x464ec5,_0x296481){return _0x464ec5+_0x296481;},'CfRGD':function(_0x4e907c){return _0x4e907c();},'bOgll':function(_0x435b45,_0x3fb958){return _0x435b45===_0x3fb958;},'BPCfX':'edited\x20post\x20content','cFdIR':'DJXYk','KFOdn':'edited\x20title','zVyKO':_0x30a30a(0x3f1),'WRIrD':'UDMNl','iVKZS':_0x30a30a(0x261),'dbmOa':_0x30a30a(0x2c4),'dRCOc':_0x30a30a(0x3b0),'EFxgO':_0x30a30a(0xd1),'MfDKl':_0x30a30a(0x468),'mUBVY':'1|0|3|5|4|2','IffBY':function(_0x482864,_0x23cfaa){return _0x482864!==_0x23cfaa;},'dbUcJ':_0x30a30a(0x174),'tkrRi':function(_0x18ae4a,_0x22ec66,_0x1e32c8){return _0x18ae4a(_0x22ec66,_0x1e32c8);},'KXadh':_0x30a30a(0x41c),'xsXDd':_0x30a30a(0x1d2),'gyqMl':_0x30a30a(0x30c),'SidPr':'should\x20error\x20with\x20too\x20many\x20tags','WmBsI':_0x30a30a(0x3c9),'NtWGF':function(_0x16c63c,_0x1b8c7b,_0x325c56){return _0x16c63c(_0x1b8c7b,_0x325c56);},'yEvrp':function(_0x19df88,_0x302d66,_0x13230f){return _0x19df88(_0x302d66,_0x13230f);},'peADJ':_0x30a30a(0x3f2),'AqFuj':'return\x20Object.keys({a:1});','AVXoK':'should\x20return\x20diffs','zrIbQ':'should\x20load\x20diffs\x20and\x20reconstruct\x20post','ahMFt':_0x30a30a(0x247),'qwrYS':_0x30a30a(0x19b),'VpBAt':_0x30a30a(0x31c),'TRbHA':_0x30a30a(0x40a),'hDfvB':_0x30a30a(0x1e8),'lXOqw':_0x30a30a(0x1d4),'nUQkK':_0x30a30a(0x294),'SercA':_0x30a30a(0x3cf),'uGoTu':function(_0xa9b136,_0x12fdc0){return _0xa9b136(_0x12fdc0);},'wJBMw':_0x30a30a(0x2c5),'PtheN':function(_0x32e7b7,_0x143552,_0x1f57e5){return _0x32e7b7(_0x143552,_0x1f57e5);},'AsCCq':_0x30a30a(0x369),'rWjSp':'should\x20fail\x20to\x20move\x20post\x20if\x20not\x20moderator\x20of\x20target\x20category','OODJo':function(_0x29e7c2,_0xc62060){return _0x29e7c2*_0xc62060;},'OYEIt':function(_0x6224fd,_0x187fab){return _0x6224fd(_0x187fab);},'SWsJn':function(_0x1b7bea,_0x5c404f,_0x4981a6){return _0x1b7bea(_0x5c404f,_0x4981a6);},'qiXkk':_0x30a30a(0x101),'mELhu':function(_0x38d820,_0x5c644d){return _0x38d820(_0x5c644d);},'cNVgf':function(_0x562694){return _0x562694();},'oXygi':function(_0x5e4107,_0x309ab9){return _0x5e4107!==_0x309ab9;},'RCcow':_0x30a30a(0x1b1),'fZaVk':'some\x20content','VtXaG':_0x30a30a(0x244),'ZlRdG':function(_0x57ff7a,_0x2e5e30){return _0x57ff7a===_0x2e5e30;},'zYMSS':_0x30a30a(0x26a),'kNDPW':'should\x20not\x20crash\x20and\x20return\x20falsy\x20if\x20post\x20data\x20is\x20falsy','fkYUy':function(_0x115a59,_0x1826cc,_0x3540c8){return _0x115a59(_0x1826cc,_0x3540c8);},'IbRKC':_0x30a30a(0x48d),'DoVcS':_0x30a30a(0x40c),'RyyUh':_0x30a30a(0x1fd),'VeqMM':function(_0x297290,_0x4d4eb5){return _0x297290!==_0x4d4eb5;},'yyLBo':'JDUjC','zBBEx':_0x30a30a(0x34c),'mSock':function(_0x71e65b){return _0x71e65b();},'QgnhT':'huswR','UNBik':_0x30a30a(0xe7),'bKtSf':function(_0x1a10c0){return _0x1a10c0();},'dhEPg':function(_0x5dce74,_0x2a510d){return _0x5dce74===_0x2a510d;},'lDjEn':'should\x20error\x20with\x20invalid\x20tid','frYqS':function(_0x434ca7,_0x32e509,_0x48ecd5){return _0x434ca7(_0x32e509,_0x48ecd5);},'KfhrA':_0x30a30a(0x1c5),'MOIcy':'should\x20fail\x20to\x20get\x20raw\x20post\x20because\x20post\x20is\x20deleted','gJpmv':'should\x20get\x20post\x20category','nwhcg':function(_0x5489c4,_0x48d787,_0x3fe471){return _0x5489c4(_0x48d787,_0x3fe471);},'ksdNJ':function(_0x7d6c02,_0x39957b,_0x4db4ab){return _0x7d6c02(_0x39957b,_0x4db4ab);},'VrvTt':_0x30a30a(0x2e7),'dvGQC':function(_0x4a265f){return _0x4a265f();},'RsvqQ':_0x30a30a(0x1ca),'ytdQs':function(_0x2f64ce,_0x594c0e,_0x10bf9b){return _0x2f64ce(_0x594c0e,_0x10bf9b);},'YYGWM':_0x30a30a(0x2d9),'FMAmQ':function(_0x46e317,_0x13a4a8){return _0x46e317!==_0x13a4a8;},'nudHk':_0x30a30a(0x47c),'GaebM':_0x30a30a(0x35d),'TENjV':_0x30a30a(0x1b2),'mEKem':_0x30a30a(0x42e),'tSVoD':_0x30a30a(0x2de),'ydNzU':'FNUvE','AuKcD':_0x30a30a(0x2c0),'aXpCh':_0x30a30a(0x170),'zrVHH':_0x30a30a(0x4b2),'AgBIQ':function(_0x461cb0,_0x1a6a79){return _0x461cb0>_0x1a6a79;},'gzZlt':_0x30a30a(0x1c8),'eJeQB':_0x30a30a(0x3a3),'TkkAY':_0x30a30a(0x471),'CBbgF':_0x30a30a(0x300),'UVPei':_0x30a30a(0x458),'kkxDf':_0x30a30a(0x2aa),'Tabqq':_0x30a30a(0x1a8),'lOayD':_0x30a30a(0x271),'mKrGQ':_0x30a30a(0x3a8),'fhzQY':'WXwil','cooZw':_0x30a30a(0x49e),'uTTha':function(_0x137125){return _0x137125();},'IGOmV':_0x30a30a(0x313),'CJDpv':_0x30a30a(0x1d7),'LVwRD':function(_0x249bad,_0x968053){return _0x249bad(_0x968053);},'StVDx':function(_0x50331d,_0x593708){return _0x50331d(_0x593708);},'kkfuY':'should\x20add\x20topic\x20to\x20post\x20queue','Mqxhq':function(_0x163589,_0x2befdd,_0x37a596){return _0x163589(_0x2befdd,_0x37a596);},'wjDJe':_0x30a30a(0x451),'IBpCu':_0x30a30a(0x183),'ymUIG':_0x30a30a(0x4a2),'JDtXR':function(_0x5ea264,_0x5132c9,_0x4cd6c6){return _0x5ea264(_0x5132c9,_0x4cd6c6);},'SDGdL':_0x30a30a(0x46d),'DJotG':_0x30a30a(0x3ed),'ciDRI':function(_0x2e09a4,_0x336429){return _0x2e09a4===_0x336429;},'vMqtd':_0x30a30a(0x368),'lcZRr':_0x30a30a(0x376),'ZOPSE':'wut.txt','JWRIK':_0x30a30a(0x180),'BSxRC':_0x30a30a(0x38d),'qRaKo':_0x30a30a(0x2a2),'hqUjl':function(_0x4f8e64){return _0x4f8e64();},'Zfzua':_0x30a30a(0x48b),'qucZh':_0x30a30a(0x45b),'KFNDk':_0x30a30a(0x1f1),'GMRTW':_0x30a30a(0x382),'DoqrC':_0x30a30a(0x3dc),'pPmVS':function(_0x5d7854,_0x15fe22,_0x41fad9){return _0x5d7854(_0x15fe22,_0x41fad9);},'BzDOq':function(_0x2553dc,_0x433fe5,_0x152403){return _0x2553dc(_0x433fe5,_0x152403);},'IEKHi':function(_0x14e0a6,_0x5c96f2,_0xe6b2b8){return _0x14e0a6(_0x5c96f2,_0xe6b2b8);},'nfbcP':_0x30a30a(0x3e2),'peTyF':_0x30a30a(0x304),'XNcCg':_0x30a30a(0x489),'XVcwK':function(_0x32c963,_0x5edbaf){return _0x32c963>_0x5edbaf;},'JxDwg':_0x30a30a(0x1f9),'gcMUp':_0x30a30a(0x102),'tnWqL':function(_0x51f73b,_0x487727){return _0x51f73b===_0x487727;},'zWygj':_0x30a30a(0x4a1),'ZNLQb':_0x30a30a(0x269),'NHAkz':function(_0x412ef6,_0x16258e,_0x4d0568){return _0x412ef6(_0x16258e,_0x4d0568);},'YbBqp':_0x30a30a(0x2c3),'jcsJj':_0x30a30a(0x399),'jwqsy':_0x30a30a(0x1da),'QkexI':'should\x20automatically\x20sync\x20uploads\x20on\x20topic\x20create\x20and\x20reply','FQqns':_0x30a30a(0x33c),'pmtxx':_0x30a30a(0x3a6),'zwEWQ':_0x30a30a(0x424),'IbRAn':function(_0x3d0cbb,_0x474095){return _0x3d0cbb(_0x474095);},'rchzc':function(_0x38ae56,_0x38dce1){return _0x38ae56(_0x38dce1);},'hfvSU':_0x30a30a(0x256),'rpboz':_0x30a30a(0x314),'VjOnK':_0x30a30a(0xe5),'IiOiG':function(_0x10e7ef){return _0x10e7ef();},'SYymT':_0x30a30a(0x3f0),'QRewg':function(_0x5e7f3c,_0x2f7a72){return _0x5e7f3c(_0x2f7a72);},'nueYx':function(_0x304010,_0x53a273){return _0x304010(_0x53a273);},'EMWnc':_0x30a30a(0x251),'vnsJI':_0x30a30a(0x2f7),'xrCyI':_0x30a30a(0x1c1),'BXRVI':function(_0x1cb259,_0x33cd89,_0x5a43ff){return _0x1cb259(_0x33cd89,_0x5a43ff);},'vRPvH':_0x30a30a(0x107),'NZJlL':function(_0x265a35,_0x592859){return _0x265a35(_0x592859);},'pxItt':'should\x20update\x20category\x20teaser\x20properly','Zzipp':_0x30a30a(0x475),'IZUYF':'should\x20return\x20falsy\x20if\x20post\x20does\x20not\x20exist','YjSLM':_0x30a30a(0x377),'HDzns':function(_0x19ad51,_0x50aa6b,_0x2e6bd6){return _0x19ad51(_0x50aa6b,_0x2e6bd6);},'WEmxK':_0x30a30a(0x3aa),'qEHLD':_0x30a30a(0x125),'gwHhU':_0x30a30a(0x1ce),'PWTHq':function(_0x2c6885,_0x2caee9,_0x44b333){return _0x2c6885(_0x2caee9,_0x44b333);},'MFVAw':_0x30a30a(0x3b2),'gCYlQ':function(_0xec2202,_0x24beea,_0x56a76c){return _0xec2202(_0x24beea,_0x56a76c);},'zIFEn':_0x30a30a(0x17b),'pVTtv':function(_0x7b506c,_0x149880,_0x172220){return _0x7b506c(_0x149880,_0x172220);},'fzgYT':_0x30a30a(0x22b)};let _0x343c3d,_0x1d3996,_0x3618f6,_0x323d93,_0x3b0103,_0x17f2dd;_0x45fca7[_0x30a30a(0x130)](before,_0x506273=>{const _0x22ac79=_0x30a30a,_0x6089f1={'uttHi':_0x45fca7[_0x22ac79(0x379)],'pjgkc':_0x45fca7['SlgAA'],'bDLaw':'Test\x20Category','UQxwH':_0x22ac79(0x312),'XQYnb':'Global\x20Moderators','dkwsr':function(_0xec384f,_0x3bded9){return _0xec384f===_0x3bded9;},'agkIq':'AJSMd','ZwWHO':_0x22ac79(0x4ba),'iqXAc':_0x45fca7['jUfdH']};async[_0x22ac79(0x110)]({'voterUid':function(_0x44ff2e){const _0x4bc695=_0x22ac79;user[_0x4bc695(0x1d5)]({'username':_0x4bc695(0x296)},_0x44ff2e);},'voteeUid':function(_0x2e5032){const _0x9ab49e=_0x22ac79,_0x11de0b={'miwZB':_0x6089f1[_0x9ab49e(0x40e)]};_0x9ab49e(0x1b8)===_0x9ab49e(0x196)?(_0x239556['ifError'](_0x361768),_0x51aaa0[_0x9ab49e(0x497)]({'uid':_0x100095},{'pid':_0x1ebbcb,'content':_0x9ab49e(0x218),'title':'edited\x20deleted\x20title','tags':[_0x9ab49e(0x403)]},(_0x3f8138,_0x2ce454)=>{const _0x379522=_0x9ab49e,_0x248b78=_0x11de0b['miwZB'][_0x379522(0x2bc)]('|');let _0x3541dd=0x0;while(!![]){switch(_0x248b78[_0x3541dd++]){case'0':_0x2989cc[_0x379522(0x229)](_0x2ce454[_0x379522(0x1a8)]['title'],_0x379522(0x478));continue;case'1':_0x485fea();continue;case'2':_0x306fde[_0x379522(0x229)](_0x2ce454['content'],_0x379522(0x218));continue;case'3':_0xc8350[_0x379522(0x229)](_0x2ce454[_0x379522(0x44e)],_0x3094af);continue;case'4':_0x1c05a4[_0x379522(0x137)](_0x3f8138);continue;case'5':_0x2c6649[_0x379522(0x229)](_0x2ce454[_0x379522(0x1a8)][_0x379522(0x354)][0x0][_0x379522(0x2a0)],'deleted');continue;}break;}})):user[_0x9ab49e(0x1d5)]({'username':_0x6089f1[_0x9ab49e(0x287)]},_0x2e5032);},'globalModUid':function(_0x3cbe39){const _0x452253=_0x22ac79;user['create']({'username':_0x45fca7[_0x452253(0x249)],'password':'globalmodpwd'},_0x3cbe39);},'category':function(_0x473922){const _0x3131c4=_0x22ac79;categories[_0x3131c4(0x1d5)]({'name':_0x6089f1[_0x3131c4(0x3a2)],'description':'Test\x20category\x20created\x20by\x20testing\x20script'},_0x473922);}},(_0x311cfe,_0xc7194d)=>{const _0xf98f31=_0x22ac79,_0x22b705={'wPHZF':function(_0x81d0d4){return _0x81d0d4();},'zbcjG':_0x6089f1[_0xf98f31(0x268)],'FnyAf':function(_0x20a0bb,_0x32efa0,_0x204f2e){return _0x20a0bb(_0x32efa0,_0x204f2e);},'afAFd':'console.log(\x22timer\x22);','uCgGa':_0x6089f1[_0xf98f31(0x3ac)]};if(_0x311cfe){if(_0x6089f1[_0xf98f31(0x49a)](_0x6089f1[_0xf98f31(0x1fc)],_0x6089f1[_0xf98f31(0x1fc)]))return Function('return\x20new\x20Date();')(),_0x506273(_0x311cfe);else{const _0x4625d9={'azWak':function(_0x49dab8){const _0x503c3d=_0xf98f31;return _0x22b705[_0x503c3d(0x1e6)](_0x49dab8);}};_0x38d5b6[_0xf98f31(0x363)]({'uid':0x1,'cid':_0x19d9fe,'title':_0xf98f31(0x217),'content':_0x22b705[_0xf98f31(0x1b5)]},(_0x2b837a,_0x45743b)=>{const _0x52d3a3=_0xf98f31;_0x104367['ifError'](_0x2b837a),_0x4572af['reply']({'uid':0x1,'tid':_0x45743b[_0x52d3a3(0x452)][_0x52d3a3(0x3a9)],'timestamp':_0x42eb9c[_0x52d3a3(0x253)](),'content':'[abcdef](/assets/uploads/files/shazam.jpg)'},(_0x40d226,_0x430058)=>{_0x58a870['ifError'](_0x40d226),_0x2763e4=_0x45743b,_0x48ae89=_0x430058,_0x4625d9['azWak'](_0x13fb7f);});});}}_0x343c3d=_0xc7194d[_0xf98f31(0xd3)],_0x1d3996=_0xc7194d[_0xf98f31(0x1a1)],_0x3618f6=_0xc7194d[_0xf98f31(0xf9)],_0x17f2dd=_0xc7194d['category'][_0xf98f31(0x343)],topics[_0xf98f31(0x363)]({'uid':_0xc7194d[_0xf98f31(0x1a1)],'cid':_0xc7194d['category'][_0xf98f31(0x343)],'title':_0x6089f1['ZwWHO'],'content':_0x6089f1[_0xf98f31(0x1e0)]},(_0x41882e,_0x462716)=>{const _0xa59522=_0xf98f31;if(_0x41882e)return _0x22b705['FnyAf'](setTimeout,_0x22b705[_0xa59522(0x32e)],0x3e8),_0x506273(_0x41882e);_0x323d93=_0x462716[_0xa59522(0xd6)],_0x3b0103=_0x462716[_0xa59522(0x452)],groups['join'](_0x22b705[_0xa59522(0x416)],_0x3618f6,_0x506273);});});}),_0x45fca7[_0x30a30a(0x2ba)](it,_0x45fca7[_0x30a30a(0x210)],async()=>{const _0x4f2e85=_0x30a30a,_0x2fd198=_0x45fca7[_0x4f2e85(0x205)](require,_0x45fca7[_0x4f2e85(0x28c)]),_0x203b80=_0x2fd198[_0x4f2e85(0x355)](async _0x5c1145=>{const _0x53fd25=_0x4f2e85;request(nconf['get'](_0x45fca7[_0x53fd25(0x30d)])+_0x53fd25(0x1fa),{'json':!![]},(_0x66f8c9,_0x4234c7,_0x241e14)=>{_0x5c1145(_0x66f8c9,_0x241e14);});}),_0x459742=await topics[_0x4f2e85(0x363)]({'uid':_0x3618f6,'cid':_0x17f2dd,'title':_0x45fca7['AdRyD'],'content':_0x4f2e85(0x31d)});let _0x5e567b=await _0x45fca7[_0x4f2e85(0x351)](_0x203b80);assert[_0x4f2e85(0x229)](_0x5e567b[_0x4f2e85(0x21c)][0x0][_0x4f2e85(0x44b)]['pid'],_0x459742[_0x4f2e85(0xd6)][_0x4f2e85(0x289)]),assert[_0x4f2e85(0x229)](_0x5e567b[_0x4f2e85(0x21c)][0x0]['posts'][0x0]['content'],_0x45fca7[_0x4f2e85(0x3bc)]),assert[_0x4f2e85(0x229)](_0x5e567b[_0x4f2e85(0x21c)][0x0][_0x4f2e85(0x3b7)][0x0][_0x4f2e85(0x289)],_0x459742[_0x4f2e85(0xd6)]['pid']);const _0x1b1338=await user[_0x4f2e85(0x1d5)]({'username':'teaserdelete'}),_0x1175c4=await topics[_0x4f2e85(0x363)]({'uid':_0x1b1338,'cid':_0x17f2dd,'title':_0x45fca7[_0x4f2e85(0x27d)],'content':_0x45fca7[_0x4f2e85(0x154)]});_0x5e567b=await _0x203b80(),assert['equal'](_0x5e567b['categories'][0x0][_0x4f2e85(0x44b)][_0x4f2e85(0x289)],_0x1175c4[_0x4f2e85(0xd6)]['pid']),assert[_0x4f2e85(0x229)](_0x5e567b[_0x4f2e85(0x21c)][0x0][_0x4f2e85(0x3b7)][0x0][_0x4f2e85(0x291)],_0x4f2e85(0x477)),assert['equal'](_0x5e567b[_0x4f2e85(0x21c)][0x0][_0x4f2e85(0x3b7)][0x0]['pid'],_0x1175c4[_0x4f2e85(0xd6)][_0x4f2e85(0x289)]),await user[_0x4f2e85(0xeb)](0x1,_0x1b1338),_0x5e567b=await _0x45fca7[_0x4f2e85(0x351)](_0x203b80),assert[_0x4f2e85(0x229)](_0x5e567b[_0x4f2e85(0x21c)][0x0][_0x4f2e85(0x44b)][_0x4f2e85(0x289)],_0x459742['postData'][_0x4f2e85(0x289)]),assert[_0x4f2e85(0x229)](_0x5e567b[_0x4f2e85(0x21c)][0x0][_0x4f2e85(0x3b7)][0x0][_0x4f2e85(0x291)],_0x45fca7['vQWqI']),assert[_0x4f2e85(0x229)](_0x5e567b['categories'][0x0][_0x4f2e85(0x3b7)][0x0][_0x4f2e85(0x289)],_0x459742[_0x4f2e85(0xd6)][_0x4f2e85(0x289)]);}),it(_0x30a30a(0x2d7),async()=>{const _0x21c7dd=_0x30a30a,_0x2738d2={'nIKeB':_0x21c7dd(0x47f)};if(_0x45fca7[_0x21c7dd(0x3d6)](_0x45fca7['ZqYTa'],_0x45fca7['AbxXy'])){const _0x39a18b=await user['create']({'username':'olduser'}),_0x29874b=await user['create']({'username':_0x45fca7[_0x21c7dd(0x193)]}),_0x85c381=await topics[_0x21c7dd(0x363)]({'uid':_0x39a18b,'cid':_0x17f2dd,'title':_0x45fca7[_0x21c7dd(0x181)],'content':_0x21c7dd(0x445)}),_0x5bccaa=await topics[_0x21c7dd(0x2f8)]({'uid':_0x39a18b,'tid':_0x85c381[_0x21c7dd(0x452)][_0x21c7dd(0x3a9)],'content':_0x45fca7[_0x21c7dd(0x461)]}),_0xd5bef0=_0x85c381[_0x21c7dd(0xd6)][_0x21c7dd(0x289)],_0x3b7ac5=_0x5bccaa[_0x21c7dd(0x289)];assert['deepStrictEqual'](await db[_0x21c7dd(0x15e)](_0x21c7dd(0x430)+_0x85c381[_0x21c7dd(0x452)][_0x21c7dd(0x3a9)]+_0x21c7dd(0x206),[_0x39a18b,_0x29874b]),[0x2,null]),await posts[_0x21c7dd(0x1e7)]([_0xd5bef0,_0x3b7ac5],_0x29874b),assert['deepStrictEqual'](await db['sortedSetScores']('tid:'+_0x85c381[_0x21c7dd(0x452)]['tid']+_0x21c7dd(0x206),[_0x39a18b,_0x29874b]),[0x0,0x2]),assert['deepStrictEqual'](await posts[_0x21c7dd(0x423)]([_0xd5bef0,_0x3b7ac5],_0x39a18b),[![],![]]),assert[_0x21c7dd(0x171)](await posts[_0x21c7dd(0x423)]([_0xd5bef0,_0x3b7ac5],_0x29874b),[!![],!![]]),assert[_0x21c7dd(0x425)](await user[_0x21c7dd(0x308)](_0x39a18b,_0x45fca7['dmDZf']),0x0),assert[_0x21c7dd(0x425)](await user[_0x21c7dd(0x308)](_0x29874b,_0x45fca7[_0x21c7dd(0x49d)]),0x2),assert[_0x21c7dd(0x425)](await user[_0x21c7dd(0x308)](_0x39a18b,_0x21c7dd(0x1dc)),0x0),assert[_0x21c7dd(0x425)](await user[_0x21c7dd(0x308)](_0x29874b,'topiccount'),0x1),assert['strictEqual'](await db[_0x21c7dd(0x3c1)](_0x21c7dd(0x44d),_0x39a18b),0x0),assert['strictEqual'](await db[_0x21c7dd(0x3c1)](_0x21c7dd(0x44d),_0x29874b),0x2),assert[_0x21c7dd(0x425)](await topics[_0x21c7dd(0x423)](_0x85c381['topicData'][_0x21c7dd(0x3a9)],_0x39a18b),![]),assert[_0x21c7dd(0x425)](await topics[_0x21c7dd(0x423)](_0x85c381[_0x21c7dd(0x452)]['tid'],_0x29874b),!![]);}else _0x1bc224=_0x34e06c[_0x21c7dd(0x452)][_0x21c7dd(0x3a9)],_0x48e5a6[_0x21c7dd(0x363)]({'uid':_0x462170,'cid':_0x15b1f1,'title':_0x21c7dd(0x47e),'content':_0x2738d2[_0x21c7dd(0x1e1)]},_0x486cb7);}),it(_0x30a30a(0x32b),async()=>{const _0x383a28=_0x30a30a;try{await posts[_0x383a28(0x1e7)]([0x1],_0x45fca7[_0x383a28(0x4a3)]);}catch(_0x54f78f){assert[_0x383a28(0x425)](_0x54f78f[_0x383a28(0x273)],'[[error:no-user]]');}}),it(_0x45fca7[_0x30a30a(0x2b5)],async()=>{const _0x4c6561=_0x30a30a,_0x4ea5e5={'lOXBE':'[[error:invalid-data]]'};if(_0x45fca7['fanbL'](_0x4c6561(0x18b),_0x4c6561(0x344)))try{_0x45fca7[_0x4c6561(0x3d6)](_0x4c6561(0x18a),_0x45fca7[_0x4c6561(0x290)])?(_0x4c2728[_0x4c6561(0x229)](_0x351e2a[_0x4c6561(0x273)],_0x4ea5e5['lOXBE']),_0x1371df()):await socketPosts[_0x4c6561(0x1e7)]({'uid':_0x343c3d},{'pids':[0x1,0x2],'toUid':_0x343c3d});}catch(_0x3dabd1){assert[_0x4c6561(0x425)](_0x3dabd1['message'],_0x45fca7['gqIcQ']);}else{const _0x16ba39=_0x45fca7[_0x4c6561(0x2a9)]['split']('|');let _0xe43de=0x0;while(!![]){switch(_0x16ba39[_0xe43de++]){case'0':_0x347e48[_0x4c6561(0x425)](![],_0x1269b4[_0x4c6561(0x12f)](_0x45fca7[_0x4c6561(0x484)]));continue;case'1':_0xc9577a[_0x4c6561(0x425)](0x2,_0x8e35a6[_0x4c6561(0x48a)]);continue;case'2':_0x45fca7['oEnhh'](_0x4a81db);continue;case'3':_0x5292ba[_0x4c6561(0x137)](_0x499a64);continue;case'4':_0x1ce2c7['strictEqual'](![],_0x443cf9['includes'](_0x4c6561(0x44a)));continue;}break;}}}),eval('Math[\'PI\'] * 2;'),_0x45fca7[_0x30a30a(0x2ba)](it,_0x45fca7['IZUYF'],_0x5ccfa7=>{const _0x339242=_0x30a30a;posts[_0x339242(0x45d)](0x270f,(_0xd63f3b,_0x3f7a0d)=>{const _0x22ea9b=_0x339242;assert[_0x22ea9b(0x137)](_0xd63f3b),assert[_0x22ea9b(0x229)](_0x3f7a0d,null),_0x5ccfa7();});}),_0x45fca7[_0x30a30a(0x278)](describe,_0x45fca7[_0x30a30a(0xfa)],()=>{const _0x3758bc=_0x30a30a,_0x35a719={'gSNan':_0x3758bc(0x2b8),'yKtJc':_0x45fca7['TLiMr'],'wwNgP':function(_0x2d53f8,_0x5dcc03){const _0x557b4e=_0x3758bc;return _0x45fca7[_0x557b4e(0x39f)](_0x2d53f8,_0x5dcc03);},'vUqqA':function(_0x580673){return _0x580673();},'XZfBv':function(_0x186a85,_0x13a506){return _0x186a85===_0x13a506;},'rgexO':_0x3758bc(0x3d9),'jsTUu':_0x3758bc(0x401),'nIvwB':function(_0x114bcb){return _0x114bcb();},'ltdxn':_0x45fca7[_0x3758bc(0x185)]};if(_0x45fca7[_0x3758bc(0x328)]===_0x45fca7[_0x3758bc(0x1a5)]){_0x4455ff['ifError'](_0x453233);const _0x3593be=_0x58e4b1;_0x45fca7[_0x3758bc(0x4b0)](_0x562def,_0xd760c8[_0x3758bc(0x37d)](_0x45fca7[_0x3758bc(0x30d)])+_0x3758bc(0x360)+_0x44d282,{'jar':_0x3593be,'json':!![]},(_0x4e5238,_0x5497ff,_0xb0c75c)=>{const _0x1bf37a=_0x3758bc;_0x560d9e[_0x1bf37a(0x137)](_0x4e5238),_0x412711[_0x1bf37a(0x229)](_0xb0c75c[_0x1bf37a(0x3b7)][0x1]['content'],_0x35a719['gSNan']),_0x420697[_0x1bf37a(0x21c)]['give']([_0x1bf37a(0x27b)],_0x11f559,_0x1bf37a(0x275),_0x16ed4e);});}else _0x45fca7[_0x3758bc(0x1de)](it,_0x45fca7[_0x3758bc(0x2b2)],_0x203678=>{const _0x4e3172=_0x3758bc,_0x38fbb2={'Gbtgc':'[[error:no-privileges]]'};privileges[_0x4e3172(0x21c)][_0x4e3172(0x135)]([_0x4e3172(0x1a4),_0x45fca7['zgDxc']],_0x17f2dd,'registered-users',_0x74363=>{const _0x435dbb=_0x4e3172,_0x35ff55={'HVkfb':_0x38fbb2[_0x435dbb(0x1e9)],'tbqVk':_0x435dbb(0x3b9)};assert['ifError'](_0x74363),socketPosts[_0x435dbb(0x400)]({'uid':_0x343c3d},{'pid':_0x323d93[_0x435dbb(0x289)],'room_id':_0x435dbb(0x3ae)},_0x45029c=>{const _0x575cbc=_0x435dbb;assert[_0x575cbc(0x229)](_0x45029c[_0x575cbc(0x273)],_0x575cbc(0x2ee)),socketPosts[_0x575cbc(0x21e)]({'uid':_0x343c3d},{'pid':_0x323d93[_0x575cbc(0x289)],'room_id':'topic_1'},_0x5a4634=>{const _0x2d6ee8=_0x575cbc,_0x3f1fba={'EiYGe':function(_0x39eb60,_0x58be76,_0xdc3e66,_0x9c9781){return _0x39eb60(_0x58be76,_0xdc3e66,_0x9c9781);},'CZTgP':_0x2d6ee8(0x495)};if(_0x2d6ee8(0x435)!=='niAmX')assert['equal'](_0x5a4634['message'],_0x35ff55[_0x2d6ee8(0x2a5)]),privileges[_0x2d6ee8(0x21c)][_0x2d6ee8(0x189)](['groups:posts:upvote',_0x35ff55[_0x2d6ee8(0x1bb)]],_0x17f2dd,'registered-users',_0x35dc6b=>{const _0x5deb52=_0x2d6ee8;assert[_0x5deb52(0x137)](_0x35dc6b),_0x203678();});else{const _0x398143={'alGWQ':_0x2d6ee8(0x2b8)};_0x581c79[_0x2d6ee8(0x281)]('global\x20mod',_0x2d6ee8(0x2ad),(_0x4fe8b7,_0x21400d)=>{const _0x55c326=_0x2d6ee8;_0x450c76[_0x55c326(0x137)](_0x4fe8b7);const _0x3941cc=_0x21400d;_0x3f1fba[_0x55c326(0x307)](_0x448c2d,_0x519e0b[_0x55c326(0x37d)](_0x3f1fba['CZTgP'])+'/api/topic/'+_0x4ea5a1,{'jar':_0x3941cc,'json':!![]},(_0x4aa0,_0xa31aef,_0x13d8ef)=>{const _0x1d8a99=_0x55c326;_0xcc0574['ifError'](_0x4aa0),_0x26f916[_0x1d8a99(0x229)](_0x13d8ef['posts'][0x1][_0x1d8a99(0x291)],_0x398143[_0x1d8a99(0x161)]),_0x5b2424[_0x1d8a99(0x21c)][_0x1d8a99(0x189)]([_0x1d8a99(0x27b)],_0x25da76,_0x1d8a99(0x275),_0x3f3e06);});});}});});});}),it(_0x45fca7['zvrSJ'],_0x54c893=>{const _0x306152=_0x3758bc;socketPosts[_0x306152(0x400)]({'uid':_0x343c3d},{'pid':_0x323d93[_0x306152(0x289)],'room_id':_0x306152(0x3ae)},(_0x3a8670,_0x533432)=>{const _0x2668e8=_0x306152,_0x2a2de0=_0x2668e8(0x2db)[_0x2668e8(0x2bc)]('|');let _0x2ab2c6=0x0;while(!![]){switch(_0x2a2de0[_0x2ab2c6++]){case'0':posts[_0x2668e8(0x115)](_0x323d93['pid'],_0x343c3d,(_0x5eca95,_0x3c13d7)=>{const _0x1e35e5=_0x2668e8;assert[_0x1e35e5(0x137)](_0x5eca95),assert[_0x1e35e5(0x229)](_0x3c13d7[_0x1e35e5(0x2bf)],!![]),assert[_0x1e35e5(0x229)](_0x3c13d7[_0x1e35e5(0x23a)],![]),_0x54c893();});continue;case'1':assert[_0x2668e8(0x229)](_0x533432[_0x2668e8(0x363)]['downvotes'],0x0);continue;case'2':assert[_0x2668e8(0x229)](_0x533432[_0x2668e8(0x363)][_0x2668e8(0x29e)],0x1);continue;case'3':assert['equal'](_0x533432['user'][_0x2668e8(0x2ca)],0x1);continue;case'4':assert[_0x2668e8(0x229)](_0x533432[_0x2668e8(0x363)][_0x2668e8(0x392)],0x1);continue;case'5':assert['ifError'](_0x3a8670);continue;}break;}});}),_0x45fca7[_0x3758bc(0x19d)](it,_0x45fca7[_0x3758bc(0x460)],_0xd1b004=>{const _0x1318cf=_0x3758bc;socketPosts[_0x1318cf(0x2ab)]({'uid':_0x3618f6},{'pid':_0x323d93[_0x1318cf(0x289)],'cid':_0x17f2dd},(_0x5635cf,_0x29872e)=>{const _0x20bb4b=_0x1318cf,_0x4828a9={'BmJio':function(_0x30dbab,_0x38e6b2){return _0x30dbab*_0x38e6b2;}};_0x35a719[_0x20bb4b(0x346)]!==_0x20bb4b(0x3de)?mgQEQX[_0x20bb4b(0x3ca)](_0x248326['PI'],0x2):(assert['ifError'](_0x5635cf),assert[_0x20bb4b(0x229)](_0x29872e['upvoteCount'],0x1),assert[_0x20bb4b(0x229)](_0x29872e[_0x20bb4b(0x1aa)],0x0),_0x35a719[_0x20bb4b(0x211)](assert,Array['isArray'](_0x29872e[_0x20bb4b(0x19a)])),assert[_0x20bb4b(0x229)](_0x29872e[_0x20bb4b(0x19a)][0x0]['username'],_0x20bb4b(0x296)),_0x35a719[_0x20bb4b(0x22d)](_0xd1b004));});}),it('should\x20get\x20upvoters',_0x48d85f=>{const _0x4973e2=_0x3758bc,_0x485f34={'eGNsY':function(_0x3f1f49,_0x18102d){const _0x286a33=_0x774c;return _0x35a719[_0x286a33(0x211)](_0x3f1f49,_0x18102d);},'fCARZ':function(_0x1401fe){return _0x35a719['vUqqA'](_0x1401fe);}};socketPosts[_0x4973e2(0x39e)]({'uid':_0x3618f6},[_0x323d93[_0x4973e2(0x289)]],(_0x350153,_0x20fbf7)=>{const _0x28527b=_0x4973e2;if(_0x35a719[_0x28527b(0x169)](_0x28527b(0x3d9),_0x35a719[_0x28527b(0x12c)]))assert['ifError'](_0x350153),assert[_0x28527b(0x229)](_0x20fbf7[0x0][_0x28527b(0x26e)],0x0),assert[_0x28527b(0x229)](_0x20fbf7[0x0]['usernames'],_0x28527b(0x296)),_0x35a719[_0x28527b(0x22d)](_0x48d85f);else{const _0x7ce520={'UVdZg':function(_0x39a5d2,_0xf89400){const _0x238875=_0x28527b;return _0x485f34[_0x238875(0x433)](_0x39a5d2,_0xf89400);},'GbCef':_0x28527b(0x296),'yUbdo':function(_0x2ab81f){const _0x465951=_0x28527b;return _0x485f34[_0x465951(0x2fe)](_0x2ab81f);}};_0x5b0236[_0x28527b(0x2ab)]({'uid':_0x462676},{'pid':_0x4be79a[_0x28527b(0x289)],'cid':_0x359e61},(_0x3f5f96,_0x5a8c33)=>{const _0x382ea1=_0x28527b;_0x2a74af['ifError'](_0x3f5f96),_0xbf190a['equal'](_0x5a8c33[_0x382ea1(0x16f)],0x1),_0x227481[_0x382ea1(0x229)](_0x5a8c33['downvoteCount'],0x0),_0x7ce520[_0x382ea1(0x43f)](_0x4fb749,_0x28ca99[_0x382ea1(0x373)](_0x5a8c33[_0x382ea1(0x19a)])),_0x13b06b[_0x382ea1(0x229)](_0x5a8c33[_0x382ea1(0x19a)][0x0][_0x382ea1(0x35e)],_0x7ce520[_0x382ea1(0x138)]),_0x7ce520[_0x382ea1(0x2fd)](_0x47b2d8);});}});}),it(_0x3758bc(0x18f),_0x37ad74=>{const _0x570fd5=_0x3758bc,_0x5e28aa={'ygtTv':_0x570fd5(0x2ac),'phtxR':_0x35a719['jsTUu'],'JljKU':function(_0x47219f){const _0x4232ad=_0x570fd5;return _0x35a719[_0x4232ad(0x337)](_0x47219f);}};socketPosts[_0x570fd5(0x3b3)]({'uid':_0x343c3d},{'pid':_0x323d93[_0x570fd5(0x289)],'room_id':_0x35a719[_0x570fd5(0x145)]},(_0x3d9cb6,_0x244939)=>{const _0x10d3da=_0x570fd5,_0x15c7af={'DnJlE':function(_0x14f755,_0x388991){return _0x14f755+_0x388991;}};assert[_0x10d3da(0x137)](_0x3d9cb6),assert[_0x10d3da(0x229)](_0x244939[_0x10d3da(0x363)][_0x10d3da(0x29e)],0x0),assert[_0x10d3da(0x229)](_0x244939[_0x10d3da(0x363)][_0x10d3da(0x235)],0x0),assert[_0x10d3da(0x229)](_0x244939[_0x10d3da(0x363)][_0x10d3da(0x392)],0x0),assert[_0x10d3da(0x229)](_0x244939['user'][_0x10d3da(0x2ca)],0x0),posts[_0x10d3da(0x115)](_0x323d93[_0x10d3da(0x289)],_0x343c3d,(_0x50fb6e,_0x115d68)=>{const _0x1848db=_0x10d3da;if(_0x5e28aa[_0x1848db(0x35f)]===_0x5e28aa[_0x1848db(0x25e)]){const _0x20b44b={'JuWrj':function(_0x251e93){return _0x251e93();}},_0xad2a0c=new _0x3705f0(_0x15c7af[_0x1848db(0x151)](_0x10a3a4[_0x1848db(0x366)][_0x1848db(0x32a)],0x2))[_0x1848db(0x318)]('a');_0x458eaf['edit']({'uid':_0x2baca7},{'pid':_0x3b13fe,'content':_0xad2a0c},_0x5d1b44=>{const _0x143278=_0x1848db;_0x434c6a[_0x143278(0x229)](_0x5d1b44[_0x143278(0x273)],_0x143278(0x37b)+_0x4df8e6[_0x143278(0x366)][_0x143278(0x32a)]+']]'),_0x20b44b['JuWrj'](_0x4fc904);});}else assert[_0x1848db(0x137)](_0x50fb6e),assert[_0x1848db(0x229)](_0x115d68['upvoted'],![]),assert[_0x1848db(0x229)](_0x115d68[_0x1848db(0x23a)],![]),_0x5e28aa['JljKU'](_0x37ad74);});});}),_0x45fca7[_0x3758bc(0x19d)](it,'should\x20downvote\x20a\x20post',_0x3bf5e7=>{const _0x1276a1=_0x3758bc;socketPosts[_0x1276a1(0x21e)]({'uid':_0x343c3d},{'pid':_0x323d93['pid'],'room_id':_0x45fca7[_0x1276a1(0x185)]},(_0x2d63fc,_0x709081)=>{const _0x1fe6ee=_0x1276a1,_0x44f2c7=_0x1fe6ee(0x3b1)[_0x1fe6ee(0x2bc)]('|');let _0xd4aa56=0x0;while(!![]){switch(_0x44f2c7[_0xd4aa56++]){case'0':posts[_0x1fe6ee(0x115)](_0x323d93[_0x1fe6ee(0x289)],_0x343c3d,(_0xc0d255,_0x5e71f9)=>{const _0x5c76da=_0x1fe6ee;assert[_0x5c76da(0x137)](_0xc0d255),assert[_0x5c76da(0x229)](_0x5e71f9[_0x5c76da(0x2bf)],![]),assert['equal'](_0x5e71f9[_0x5c76da(0x23a)],!![]),_0x3bf5e7();});continue;case'1':assert[_0x1fe6ee(0x229)](_0x709081[_0x1fe6ee(0x363)][_0x1fe6ee(0x29e)],0x0);continue;case'2':assert[_0x1fe6ee(0x229)](_0x709081[_0x1fe6ee(0x25a)][_0x1fe6ee(0x2ca)],-0x1);continue;case'3':assert['ifError'](_0x2d63fc);continue;case'4':assert[_0x1fe6ee(0x229)](_0x709081[_0x1fe6ee(0x363)][_0x1fe6ee(0x235)],0x1);continue;case'5':assert[_0x1fe6ee(0x229)](_0x709081['post'][_0x1fe6ee(0x392)],-0x1);continue;}break;}});}),it(_0x45fca7['ZOOxa'],async()=>{const _0x1fa75f=_0x3758bc,_0x31a137=meta['config']['downvotesPerDay'];meta[_0x1fa75f(0x366)][_0x1fa75f(0x3e5)]=0x1;let _0x30f6ae;const _0x3cb685=await topics[_0x1fa75f(0x2f8)]({'uid':_0x1d3996,'tid':_0x3b0103['tid'],'content':_0x1fa75f(0x342)});try{await socketPosts[_0x1fa75f(0x21e)]({'uid':_0x343c3d},{'pid':_0x3cb685[_0x1fa75f(0x289)],'room_id':_0x45fca7[_0x1fa75f(0x185)]});}catch(_0x2d521f){_0x30f6ae=_0x2d521f;}assert[_0x1fa75f(0x229)](_0x30f6ae[_0x1fa75f(0x273)],_0x45fca7[_0x1fa75f(0x1d8)]),meta[_0x1fa75f(0x366)][_0x1fa75f(0x3e5)]=_0x31a137;}),_0x45fca7[_0x3758bc(0x227)](it,_0x45fca7[_0x3758bc(0x272)],async()=>{const _0x146367=_0x3758bc,_0x2b2941=meta['config'][_0x146367(0xef)];meta[_0x146367(0x366)]['downvotesPerUserPerDay']=0x1;let _0x3cb6c3;const _0x496109=await topics[_0x146367(0x2f8)]({'uid':_0x1d3996,'tid':_0x3b0103[_0x146367(0x3a9)],'content':_0x45fca7[_0x146367(0x10e)]});try{await socketPosts[_0x146367(0x21e)]({'uid':_0x343c3d},{'pid':_0x496109[_0x146367(0x289)],'room_id':_0x146367(0x3ae)});}catch(_0x503384){_0x3cb6c3=_0x503384;}assert[_0x146367(0x229)](_0x3cb6c3[_0x146367(0x273)],_0x45fca7[_0x146367(0x361)]),meta['config']['downvotesPerUserPerDay']=_0x2b2941;});}),describe(_0x30a30a(0x143),()=>{const _0x17f12b=_0x30a30a;it(_0x45fca7[_0x17f12b(0x432)],_0x2cc578=>{const _0xc02c28=_0x17f12b,_0xcc4cfd={'nkgzW':function(_0x53b04d){const _0x5c6d60=_0x774c;return _0x45fca7[_0x5c6d60(0x168)](_0x53b04d);},'MFvbT':function(_0x4fabf1,_0x22c209){return _0x4fabf1===_0x22c209;}};socketPosts[_0xc02c28(0x147)]({'uid':_0x343c3d},{'pid':_0x323d93['pid'],'room_id':_0xc02c28(0x3c7)+_0x323d93[_0xc02c28(0x3a9)]},(_0x5af4f1,_0x1c0462)=>{const _0x592405=_0xc02c28,_0x2afd40={'vqXug':function(_0x63b8a3){const _0x456b6e=_0x774c;return _0xcc4cfd[_0x456b6e(0x465)](_0x63b8a3);}};if(_0xcc4cfd[_0x592405(0x231)](_0x592405(0x3c0),_0x592405(0x3c0)))assert[_0x592405(0x137)](_0x5af4f1),assert[_0x592405(0x229)](_0x1c0462[_0x592405(0x25c)],!![]),posts[_0x592405(0x204)](_0x323d93[_0x592405(0x289)],_0x343c3d,(_0x3ba9e0,_0x4cb10c)=>{const _0x251be5=_0x592405;_0x251be5(0x4a0)!=='TrEmz'?(assert[_0x251be5(0x137)](_0x3ba9e0),assert[_0x251be5(0x229)](_0x4cb10c,!![]),_0x2afd40[_0x251be5(0x20d)](_0x2cc578)):(_0xcdb41e[_0x251be5(0x137)](_0x55b090),_0x4d7b9d['equal'](_0x1e5449[_0x251be5(0x2bf)],![]),_0x596a3e[_0x251be5(0x229)](_0x17abfb[_0x251be5(0x23a)],![]),_0x2afd40[_0x251be5(0x20d)](_0x406c99));});else{const _0x4c3102={'RuQNJ':function(_0x5c3ec2){return _0x5c3ec2();}};_0xb276f[_0x592405(0x137)](_0x53f422),_0x318fb8['equal'](_0x18d338,![]),_0x16dcaf[_0x592405(0x3fb)](_0x488652['topicData'][_0x592405(0x3a9)],(_0x566146,_0x586609)=>{const _0x2c1ff1=_0x592405;_0x4af017[_0x2c1ff1(0x137)](_0x566146),_0x45d333(!_0x586609),_0x4c3102['RuQNJ'](_0x39681c);});}});}),it(_0x45fca7[_0x17f12b(0x4b1)],_0x4f293c=>{const _0x20ca09=_0x17f12b;socketPosts[_0x20ca09(0x42f)]({'uid':_0x343c3d},{'pid':_0x323d93[_0x20ca09(0x289)],'room_id':_0x20ca09(0x3c7)+_0x323d93[_0x20ca09(0x3a9)]},(_0x1c7b89,_0x10c796)=>{const _0x7f49da=_0x20ca09;assert['ifError'](_0x1c7b89),assert[_0x7f49da(0x229)](_0x10c796[_0x7f49da(0x25c)],![]),posts[_0x7f49da(0x204)]([_0x323d93['pid']],_0x343c3d,(_0x3368ff,_0x587aeb)=>{const _0x277e35=_0x7f49da;assert[_0x277e35(0x137)](_0x3368ff),assert[_0x277e35(0x229)](_0x587aeb[0x0],![]),_0x4f293c();});});});}),_0x45fca7[_0x30a30a(0x49c)](describe,_0x30a30a(0x258),()=>{const _0x1c1e1e=_0x30a30a,_0x25bc0d={'ThtyQ':function(_0x350954){return _0x350954();},'tgnNi':_0x45fca7[_0x1c1e1e(0xe2)],'zGEzB':function(_0x2063ff,_0x428877){const _0x57d0ac=_0x1c1e1e;return _0x45fca7[_0x57d0ac(0x12e)](_0x2063ff,_0x428877);},'PmviF':function(_0x44aa4c,_0x3e9a28){return _0x44aa4c!==_0x3e9a28;},'qRwtf':_0x1c1e1e(0x2b3)};it(_0x45fca7[_0x1c1e1e(0x159)],_0xafa46f=>{const _0x4ae37d=_0x1c1e1e;_0x4ae37d(0x4b8)!==_0x45fca7[_0x4ae37d(0x36c)]?socketPosts['loadPostTools']({'uid':_0x3618f6},null,_0x46c361=>{const _0x14163c=_0x4ae37d,_0x3dab4e={'JauQr':function(_0x314fdc){const _0x23c28f=_0x774c;return _0x25bc0d[_0x23c28f(0x188)](_0x314fdc);}};_0x25bc0d[_0x14163c(0x3ee)]!==_0x14163c(0x345)?(_0x5a2b2b[_0x14163c(0x137)](_0x523239),_0x54963a[_0x14163c(0x118)]([_0xd0eea6['pid']],_0x5178a8),_0x3dab4e[_0x14163c(0x16b)](_0x4c461b)):(assert[_0x14163c(0x229)](_0x46c361['message'],_0x14163c(0x1ad)),_0x25bc0d[_0x14163c(0x188)](_0xafa46f));}):_0x2a91a7[_0x4ae37d(0x1be)](_0x387496,_0x4ae37d(0x403),0x0,_0x2798ec=>{const _0x4a0173=_0x4ae37d;_0x20e28f[_0x4a0173(0x137)](_0x2798ec),_0x49bd48[_0x4a0173(0xd2)]({'uid':_0x3de8f5},_0x511eff,(_0x199465,_0x46b262)=>{const _0x561094=_0x4a0173;_0x147445[_0x561094(0x137)](_0x199465),_0x512381[_0x561094(0x229)](_0x46b262,_0x561094(0x342)),_0x487601();});});}),_0x45fca7['GonOt'](it,_0x1c1e1e(0x429),_0x1e2c78=>{const _0x20d63d=_0x1c1e1e,_0x46e885={'RTqSU':_0x20d63d(0x2bd),'dBsRy':function(_0x270e91,_0xcfebb2){const _0x2922fb=_0x20d63d;return _0x25bc0d[_0x2922fb(0x33d)](_0x270e91,_0xcfebb2);},'QsZNC':function(_0x5a0ff5,_0x437565){return _0x5a0ff5(_0x437565);},'OALHW':function(_0xffe608){const _0x1338e5=_0x20d63d;return _0x25bc0d[_0x1338e5(0x188)](_0xffe608);}};_0x25bc0d[_0x20d63d(0x14b)](_0x25bc0d[_0x20d63d(0x202)],_0x20d63d(0xf8))?socketPosts['loadPostTools']({'uid':_0x3618f6},{'pid':_0x323d93[_0x20d63d(0x289)],'cid':_0x17f2dd},(_0x44f29d,_0x216f7f)=>{const _0x55c4a2=_0x20d63d,_0x29fac1={'lbTTh':function(_0xa4d323){return _0xa4d323();}};_0x46e885[_0x55c4a2(0x104)]===_0x46e885[_0x55c4a2(0x104)]?(assert[_0x55c4a2(0x137)](_0x44f29d),assert(_0x216f7f[_0x55c4a2(0x3b7)]['display_edit_tools']),_0x46e885[_0x55c4a2(0x2c9)](assert,_0x216f7f['posts'][_0x55c4a2(0x1ac)]),_0x46e885[_0x55c4a2(0xfb)](assert,_0x216f7f[_0x55c4a2(0x3b7)]['display_moderator_tools']),_0x46e885['dBsRy'](assert,_0x216f7f[_0x55c4a2(0x3b7)][_0x55c4a2(0x321)]),_0x1e2c78()):(_0x5a51b3[_0x55c4a2(0x137)](_0x1e3f90),_0x31ddd0[_0x55c4a2(0x425)](_0xdcf9e9['queued'],!![]),_0xc1ec0b[_0x55c4a2(0x229)](_0x3aafe5[_0x55c4a2(0x273)],'[[success:post-queued]]'),_0x547793=_0xd2de5a['id'],_0x29fac1[_0x55c4a2(0xdd)](_0x44a7dd));}):(_0x23d3cb[_0x20d63d(0x137)](_0x13355a),_0x344007(_0x1ab1dc[_0x20d63d(0x373)](_0x28298b)),_0x220fc8[_0x20d63d(0x229)](_0x2f8b87[_0x20d63d(0x48a)],0x2),_0x18e8f1['equal'](_0x3b1344[0x0],_0x504705),_0x46e885[_0x20d63d(0x29c)](_0x15e4ef));});}),describe(_0x30a30a(0x2e5),()=>{const _0x47461f=_0x30a30a,_0x53cb6b={'RAxWz':_0x45fca7[_0x47461f(0x1ed)],'QmtCM':_0x45fca7[_0x47461f(0x128)],'Zhadu':_0x47461f(0x471),'RbmwW':_0x45fca7[_0x47461f(0x265)],'sReJd':_0x47461f(0x275),'AbjyF':_0x45fca7['efinh'],'KXjxN':_0x45fca7['whaPW'],'ApkDa':'global\x20mod','efuOZ':_0x45fca7[_0x47461f(0x2dc)],'LyfIW':_0x45fca7[_0x47461f(0x3f9)],'JrceX':_0x45fca7[_0x47461f(0x1e2)],'EFnqk':_0x47461f(0x403)};function _0x5a1d4a(_0xef388b){const _0x3d0922=_0x47461f,_0x242a91={'Gcece':function(_0x24009d,_0x3f5836,_0x1332ae){return _0x24009d(_0x3f5836,_0x1332ae);}};topics['post']({'uid':_0x343c3d,'cid':_0x17f2dd,'title':_0x3d0922(0x46b),'content':_0x53cb6b[_0x3d0922(0x3d3)]},(_0x54227f,_0x323025)=>{const _0x3af813=_0x3d0922;assert[_0x3af813(0x137)](_0x54227f),topics[_0x3af813(0x2f8)]({'uid':_0x343c3d,'tid':_0x323025[_0x3af813(0x452)]['tid'],'timestamp':Date[_0x3af813(0x253)](),'content':_0x53cb6b[_0x3af813(0x2cb)]},(_0x22bb0b,_0x5327e5)=>{assert['ifError'](_0x22bb0b),_0x242a91['Gcece'](_0xef388b,_0x323025,_0x5327e5);});});}let _0xd5739f,_0x2abb2f,_0xf5db0e;before(_0x35200b=>{const _0x43395e=_0x47461f;_0x45fca7[_0x43395e(0x39f)](_0x5a1d4a,(_0x285689,_0x2570ed)=>{const _0x164f9f=_0x43395e;_0xd5739f=_0x285689[_0x164f9f(0x452)][_0x164f9f(0x3a9)],_0x2abb2f=_0x285689[_0x164f9f(0xd6)]['pid'],_0xf5db0e=_0x2570ed[_0x164f9f(0x289)],privileges[_0x164f9f(0x21c)][_0x164f9f(0x189)]([_0x164f9f(0x215)],_0x17f2dd,_0x53cb6b[_0x164f9f(0x462)],_0x35200b);});}),it(_0x45fca7[_0x47461f(0x2d0)],_0xe7797d=>{const _0x44190f=_0x47461f,_0x41b404={'XvikJ':_0x45fca7['QzXOv']};_0x44190f(0x28e)!==_0x45fca7[_0x44190f(0x470)]?socketPosts[_0x44190f(0xeb)]({'uid':_0x343c3d},null,_0x1254e1=>{const _0x244ef3=_0x44190f;assert[_0x244ef3(0x229)](_0x1254e1[_0x244ef3(0x273)],_0x41b404['XvikJ']),_0xe7797d();}):_0x2431ae['reply']({'uid':_0x349cda,'tid':_0x261164[_0x44190f(0x3a9)],'timestamp':_0x3eb6d5['now'](),'content':_0x44190f(0x342)},(_0x83378a,_0x496813)=>{const _0x20e854=_0x44190f;_0x52a427[_0x20e854(0x137)](_0x83378a),_0x116a12=_0x496813[_0x20e854(0x289)],_0x1a779e[_0x20e854(0x21c)]['rescind']([_0x20e854(0x419)],_0xcd127f,_0x20e854(0x38e),_0x26f506);});}),_0x45fca7[_0x47461f(0x227)](it,_0x45fca7[_0x47461f(0x109)],_0x10e78e=>{const _0x207440=_0x47461f,_0xa92708={'WILtd':function(_0x1d28f9){return _0x1d28f9();},'aALAj':_0x45fca7[_0x207440(0x121)],'MVotO':_0x45fca7[_0x207440(0x42a)]};if(_0x45fca7[_0x207440(0xfc)](_0x207440(0x41e),_0x45fca7['DjalF']))socketPosts['delete']({'uid':_0x343c3d},{'pid':_0xf5db0e,'tid':_0xd5739f},_0x3ea3e9=>{const _0x16b1a8=_0x207440;assert[_0x16b1a8(0x137)](_0x3ea3e9),posts[_0x16b1a8(0x2b9)](_0xf5db0e,_0xa92708['aALAj'],(_0x34fa0b,_0x39d5f2)=>{const _0x1081ef=_0x16b1a8;assert[_0x1081ef(0x137)](_0x34fa0b),assert['strictEqual'](_0x39d5f2,0x1),_0xa92708['WILtd'](_0x10e78e);});});else{const _0x129199=_0x1dd6f9(_0xa92708[_0x207440(0x43c)]),_0x111119=_0x207440(0x367),_0x4ed025=_0x5cbed0[_0x207440(0x19e)](_0x111119,_0x5b7090['urlRegex']);_0x4ee30c['equal'](_0x4ed025,_0x207440(0x352)+_0x129199[_0x207440(0x37d)](_0x207440(0x4a6))+_0x207440(0x2e1)),_0xa92708[_0x207440(0x297)](_0x26496f);}}),it(_0x45fca7[_0x47461f(0x2eb)],_0x397646=>{async['waterfall']([function(_0x1affb4){const _0x3f931c=_0x774c;user[_0x3f931c(0x1d5)]({'username':'global\x20mod','password':_0x3f931c(0x2ad)},_0x1affb4);},function(_0x505fb8,_0x2c6eb5){const _0x3198c8=_0x774c;if(_0x3198c8(0xe0)!==_0x53cb6b[_0x3198c8(0x208)]){const _0x3e94a8={'VpETX':function(_0x554d33){return _0x554d33();}};_0x3d2694['edit']({'uid':_0xaf9915},{'pid':_0x141133,'content':'e'},_0x2bc750=>{const _0x5d07f8=_0x3198c8;_0x2cb915[_0x5d07f8(0x229)](_0x2bc750[_0x5d07f8(0x273)],_0x5d07f8(0x38b)+_0xdae545[_0x5d07f8(0x366)][_0x5d07f8(0x2a8)]+']]'),_0x3e94a8[_0x5d07f8(0x3e7)](_0x2b3f73);});}else groups['join'](_0x53cb6b['sReJd'],_0x505fb8,_0x2c6eb5);},function(_0x41e19a){const _0x1d9ae2=_0x774c;privileges['categories'][_0x1d9ae2(0x135)]([_0x53cb6b[_0x1d9ae2(0x22a)]],_0x17f2dd,_0x53cb6b['sReJd'],_0x41e19a);},function(_0x5f5618){const _0x5520ba=_0x774c,_0x450242={'tkzPj':function(_0x29999a){return _0x29999a();},'czNqT':_0x5520ba(0x27b),'uFSSN':_0x53cb6b[_0x5520ba(0x241)]};helpers[_0x5520ba(0x281)](_0x53cb6b['ApkDa'],_0x53cb6b[_0x5520ba(0x23d)],(_0x488f29,_0x19088b)=>{const _0x130048=_0x5520ba,_0x5bba5e={'qZtQx':'[[topic:post_is_deleted]]','ibVFp':_0x450242[_0x130048(0x409)]};if('jSPjJ'===_0x450242[_0x130048(0x498)]){assert[_0x130048(0x137)](_0x488f29);const _0x23d563=_0x19088b;request(nconf[_0x130048(0x37d)]('url')+_0x130048(0x360)+_0xd5739f,{'jar':_0x23d563,'json':!![]},(_0x5d7788,_0x1a9c7c,_0x1872e5)=>{const _0x427ae6=_0x130048;_0x427ae6(0x3e3)!==_0x427ae6(0x34f)?(assert[_0x427ae6(0x137)](_0x5d7788),assert[_0x427ae6(0x229)](_0x1872e5['posts'][0x1][_0x427ae6(0x291)],_0x5bba5e[_0x427ae6(0x39c)]),privileges[_0x427ae6(0x21c)][_0x427ae6(0x189)]([_0x5bba5e[_0x427ae6(0x2d1)]],_0x17f2dd,_0x427ae6(0x275),_0x5f5618)):_0x4ca089[_0x427ae6(0x39e)]({'uid':_0x558be0},[_0x3e59af[_0x427ae6(0x289)]],(_0x3cd406,_0x54409a)=>{const _0x2670eb=_0x427ae6;_0x213df9[_0x2670eb(0x137)](_0x3cd406),_0x3bb5f8[_0x2670eb(0x229)](_0x54409a[0x0][_0x2670eb(0x26e)],0x0),_0x56ba87['equal'](_0x54409a[0x0][_0x2670eb(0xd5)],_0x2670eb(0x296)),_0x351400();});});}else _0x266766[_0x130048(0x229)](_0x251e9a[_0x130048(0x273)],_0x130048(0x1ad)),_0x450242[_0x130048(0x11c)](_0x5eea54);});}],_0x397646);}),_0x45fca7[_0x47461f(0x230)](it,_0x45fca7[_0x47461f(0x233)],_0x122166=>{const _0x39ef10=_0x47461f,_0x51595b={'ygNOK':_0x53cb6b[_0x39ef10(0x212)],'PqkcO':_0x53cb6b['JrceX'],'RZLuV':_0x53cb6b[_0x39ef10(0x209)]};socketPosts[_0x39ef10(0x394)]({'uid':_0x343c3d},{'pid':_0xf5db0e,'tid':_0xd5739f},_0x1f3d47=>{const _0x3b2f24=_0x39ef10,_0x27b7e4={'ubCFE':function(_0x47d158){return _0x47d158();}};_0x51595b[_0x3b2f24(0x108)]===_0x51595b['PqkcO']?(assert[_0x3b2f24(0x137)](_0x1f3d47),posts[_0x3b2f24(0x2b9)](_0xf5db0e,_0x51595b[_0x3b2f24(0x488)],(_0x627906,_0x585fe3)=>{const _0x1af1e2=_0x3b2f24;assert[_0x1af1e2(0x137)](_0x627906),assert[_0x1af1e2(0x425)](_0x585fe3,0x0),_0x27b7e4['ubCFE'](_0x122166);})):_0x22e8a2[_0x3b2f24(0x425)](_0x3c6a8e[_0x3b2f24(0x273)],_0x51595b[_0x3b2f24(0x45f)]);});}),_0x45fca7[_0x47461f(0x2ba)](it,_0x45fca7[_0x47461f(0x280)],_0x2444b6=>{socketPosts['deletePosts']({'uid':_0x3618f6},{'pids':[_0xf5db0e,_0x2abb2f]},_0x4d71c7=>{const _0x498ccf=_0x774c,_0x2a68ed={'YdahC':function(_0x10ebd2){return _0x10ebd2();},'rsWEQ':_0x53cb6b[_0x498ccf(0x209)]};assert[_0x498ccf(0x137)](_0x4d71c7),posts[_0x498ccf(0x2b9)](_0xf5db0e,_0x498ccf(0x403),(_0x1656b0,_0x3aebbc)=>{const _0x525615=_0x498ccf,_0x30059b={'SYpDp':function(_0x5c7918){const _0x553607=_0x774c;return _0x2a68ed[_0x553607(0x16c)](_0x5c7918);}};assert[_0x525615(0x137)](_0x1656b0),assert[_0x525615(0x425)](_0x3aebbc,0x1),posts[_0x525615(0x2b9)](_0x2abb2f,_0x2a68ed[_0x525615(0x173)],(_0x5a72ab,_0x45690f)=>{const _0x1a0b45=_0x525615;assert[_0x1a0b45(0x137)](_0x5a72ab),assert[_0x1a0b45(0x425)](_0x45690f,0x1),_0x30059b[_0x1a0b45(0x324)](_0x2444b6);});});});}),_0x45fca7[_0x47461f(0x195)](it,_0x45fca7[_0x47461f(0x252)],_0x55c40f=>{const _0x524b46=_0x47461f,_0x1201d0={'ZFWkW':function(_0x5bb413){return _0x5bb413();}};topics[_0x524b46(0x363)]({'uid':_0x343c3d,'cid':_0x17f2dd,'title':_0x524b46(0x165),'content':_0x45fca7['REdxI']},(_0x430194,_0x4055dc)=>{const _0x86fcd7=_0x524b46;assert[_0x86fcd7(0x137)](_0x430194),socketPosts[_0x86fcd7(0x3a4)]({'uid':_0x3618f6},{'pids':[_0x4055dc[_0x86fcd7(0xd6)][_0x86fcd7(0x289)]]},_0x2a6ad6=>{const _0x2dfcf9=_0x86fcd7,_0x2aa6f0={'VEuYG':function(_0x3ddfd5){const _0x19deae=_0x774c;return _0x1201d0[_0x19deae(0x2ef)](_0x3ddfd5);}};assert[_0x2dfcf9(0x137)](_0x2a6ad6),topics['getTopicField'](_0x4055dc[_0x2dfcf9(0x452)][_0x2dfcf9(0x3a9)],_0x2dfcf9(0x403),(_0x26769e,_0x4d9044)=>{const _0x4ecf62=_0x2dfcf9;assert[_0x4ecf62(0x137)](_0x26769e),assert[_0x4ecf62(0x425)](_0x4d9044,0x1),_0x2aa6f0[_0x4ecf62(0x30e)](_0x55c40f);});});});}),_0x45fca7[_0x47461f(0x1de)](it,_0x45fca7[_0x47461f(0x2da)],_0x1a3076=>{const _0x1be4df=_0x47461f,_0x52d5d0={'Dvoeg':function(_0x30db5b,_0x38b74b){return _0x45fca7['uXBKh'](_0x30db5b,_0x38b74b);}};if(_0x45fca7[_0x1be4df(0xf1)]===_0x45fca7[_0x1be4df(0x3b6)]){const _0x35d685={'jghoZ':function(_0x518fe3){return _0x518fe3();}};_0x5e1c58[_0x1be4df(0x148)]([_0x34ca75['pid'],0x64,0x65],[_0xa9c68b,0x2,0x3],(_0x4e3477,_0x4de732)=>{const _0x4f3bf4=_0x1be4df;_0x272de2[_0x4f3bf4(0x137)](_0x4e3477),_0xda48ab['deepEqual']([_0x22080e[_0x4f3bf4(0x289)]],_0x4de732),_0x35d685[_0x4f3bf4(0x38a)](_0x33e8e7);});}else _0x5a1d4a((_0x47dfcf,_0x289c8e)=>{const _0xd9e727=_0x1be4df;socketPosts[_0xd9e727(0x24b)]({'uid':_0x343c3d},{'pids':[_0x289c8e[_0xd9e727(0x289)],_0x47dfcf[_0xd9e727(0xd6)][_0xd9e727(0x289)]],'tid':_0x47dfcf[_0xd9e727(0x452)]['tid']},_0x27e4b7=>{const _0x1c53c6=_0xd9e727,_0x4a8a46={'nlzrj':function(_0x196853,_0x12a913){return _0x52d5d0['Dvoeg'](_0x196853,_0x12a913);}};assert[_0x1c53c6(0x137)](_0x27e4b7),posts[_0x1c53c6(0x3fb)](_0x1c53c6(0x372)+_0x289c8e['pid'],(_0x2ba73b,_0x38d8b4)=>{const _0x2e1893=_0x1c53c6;assert[_0x2e1893(0x137)](_0x2ba73b),assert[_0x2e1893(0x229)](_0x38d8b4,![]),topics[_0x2e1893(0x3fb)](_0x47dfcf[_0x2e1893(0x452)][_0x2e1893(0x3a9)],(_0x47a416,_0x46b6e1)=>{const _0x325123=_0x2e1893;assert[_0x325123(0x137)](_0x47a416),_0x4a8a46[_0x325123(0x186)](assert,!_0x46b6e1),_0x1a3076();});});});});});}),_0x45fca7[_0x30a30a(0x282)](describe,_0x30a30a(0x497),()=>{const _0x47a7da=_0x30a30a,_0x2ee204={'aLizB':function(_0x116782,_0x4dab9f){return _0x116782!==_0x4dab9f;},'FPYpQ':_0x45fca7[_0x47a7da(0x1e5)],'pymwg':function(_0x5c3e25,_0x545425){const _0x18ca3b=_0x47a7da;return _0x45fca7[_0x18ca3b(0x12e)](_0x5c3e25,_0x545425);},'MTbxw':_0x45fca7['iVKZS'],'Yhpxx':_0x47a7da(0x353),'iIGqM':_0x47a7da(0x471),'nLjDj':_0x45fca7[_0x47a7da(0x20c)],'WZLWr':function(_0x1a9779){const _0x1fe028=_0x47a7da;return _0x45fca7[_0x1fe028(0x168)](_0x1a9779);},'zDjnx':_0x45fca7[_0x47a7da(0x4a5)],'WYvhG':_0x47a7da(0x1ad),'waSee':_0x45fca7[_0x47a7da(0x11e)],'lkHFo':function(_0x242c3b,_0x404833){return _0x242c3b+_0x404833;},'yaWoK':_0x45fca7[_0x47a7da(0x30d)],'gwhHT':_0x45fca7[_0x47a7da(0x3a5)],'SNSsm':_0x45fca7['MfDKl'],'WDaJC':_0x47a7da(0x478),'SCPcA':_0x45fca7[_0x47a7da(0x1b0)],'Drswt':_0x45fca7[_0x47a7da(0x2b7)],'xebFM':'0|3|1|4|2','hPrZJ':function(_0x3c0ce2,_0x3c7d86){return _0x3c0ce2(_0x3c7d86);},'bVWwp':function(_0x3258be,_0x142fa1){const _0x1876dd=_0x47a7da;return _0x45fca7[_0x1876dd(0x255)](_0x3258be,_0x142fa1);},'ctwgk':_0x47a7da(0x492),'lfmjm':_0x45fca7[_0x47a7da(0x1eb)],'twZmc':_0x47a7da(0x391)};let _0x58549d,_0x299931,_0x296dc2;before(_0x1a24fa=>{const _0x12a52a=_0x47a7da,_0xe6a787={'OkdVE':function(_0x533832,_0x24ad04){const _0x252bb6=_0x774c;return _0x2ee204[_0x252bb6(0x421)](_0x533832,_0x24ad04);},'MJWrl':_0x2ee204[_0x12a52a(0x31e)],'divBZ':_0x2ee204[_0x12a52a(0x27f)],'YkVjC':_0x2ee204[_0x12a52a(0x2cf)],'NmkIC':_0x12a52a(0x403)};if(_0x12a52a(0x1c3)!==_0x12a52a(0x179))topics[_0x12a52a(0x363)]({'uid':_0x343c3d,'cid':_0x17f2dd,'title':_0x2ee204[_0x12a52a(0x41d)],'content':_0x12a52a(0x3f6)},(_0x3bff2b,_0x449081)=>{const _0x931d92=_0x12a52a;_0x2ee204[_0x931d92(0x2a3)](_0x2ee204[_0x931d92(0x365)],_0x2ee204[_0x931d92(0x365)])?_0x27afde[_0x931d92(0x166)](_0x931d92(0xf5)+_0xe6a787[_0x931d92(0x311)](_0x5e0f2e,_0xe6a787['MJWrl'])+':pids',0x0,-0x1,_0x5c240e):(assert[_0x931d92(0x137)](_0x3bff2b),_0x58549d=_0x449081[_0x931d92(0xd6)][_0x931d92(0x289)],_0x296dc2=_0x449081[_0x931d92(0x452)][_0x931d92(0x3a9)],topics[_0x931d92(0x2f8)]({'uid':_0x343c3d,'tid':_0x296dc2,'timestamp':Date[_0x931d92(0x253)](),'content':'A\x20reply\x20to\x20edit'},(_0x2df5ae,_0x84246f)=>{const _0xdce8b2=_0x931d92;assert[_0xdce8b2(0x137)](_0x2df5ae),_0x299931=_0x84246f[_0xdce8b2(0x289)],privileges[_0xdce8b2(0x21c)]['give']([_0xe6a787[_0xdce8b2(0x43d)]],_0x17f2dd,_0xe6a787['YkVjC'],_0x1a24fa);}));});else{const _0x1dcd46={'pzJTB':function(_0x5cae87){return _0x5cae87();}};_0x1d361[_0x12a52a(0x3a4)]({'uid':_0x1c4a5c},{'pids':[_0x14b272,_0x1598c2]},_0x522aec=>{const _0x4b164b=_0x12a52a;_0x1d96a1[_0x4b164b(0x137)](_0x522aec),_0x5cb4de[_0x4b164b(0x2b9)](_0x572b1d,_0xe6a787[_0x4b164b(0x2d6)],(_0xf23191,_0xd58fc5)=>{const _0x3e1222=_0x4b164b,_0x2033b2={'sguyH':function(_0x21f25b){return _0x1dcd46['pzJTB'](_0x21f25b);}};_0x5761b8['ifError'](_0xf23191),_0x284f18[_0x3e1222(0x425)](_0xd58fc5,0x1),_0x102b24[_0x3e1222(0x2b9)](_0x498435,_0x3e1222(0x403),(_0x6f8e3e,_0x389947)=>{const _0x57c72e=_0x3e1222;_0x13542d[_0x57c72e(0x137)](_0x6f8e3e),_0x273942[_0x57c72e(0x425)](_0x389947,0x1),_0x2033b2[_0x57c72e(0x194)](_0x4992b0);});});});}}),_0x45fca7['tkrRi'](it,_0x45fca7[_0x47a7da(0x17a)],_0x5d4860=>{const _0x104607=_0x47a7da;socketPosts[_0x104607(0x497)]({'uid':0x0},{},_0x25268d=>{const _0x269702=_0x104607;assert['equal'](_0x25268d[_0x269702(0x273)],'[[error:not-logged-in]]'),_0x5d4860();});}),it(_0x47a7da(0x1c9),_0x2ff799=>{const _0x4c7f42={'ZHdSP':function(_0xf01b4c){return _0xf01b4c();}};socketPosts['edit']({'uid':_0x343c3d},{},_0xed6025=>{const _0x3e553b=_0x774c;assert['equal'](_0xed6025['message'],_0x3e553b(0x1ad)),_0x4c7f42['ZHdSP'](_0x2ff799);});}),it(_0x45fca7[_0x47a7da(0x350)],_0x2ea6fc=>{const _0x36faa6=_0x47a7da;socketPosts[_0x36faa6(0x497)]({'uid':_0x343c3d},{'pid':_0x58549d,'content':_0x2ee204[_0x36faa6(0x378)],'title':'a'},_0x459ec9=>{const _0x33c763=_0x36faa6;assert[_0x33c763(0x229)](_0x459ec9[_0x33c763(0x273)],'[[error:title-too-short,\x20'+meta[_0x33c763(0x366)][_0x33c763(0x103)]+']]'),_0x2ee204[_0x33c763(0x234)](_0x2ea6fc);});}),it(_0x45fca7[_0x47a7da(0x438)],_0x4cd43a=>{const _0x3b2e3d=_0x47a7da,_0x2bab89=new Array(_0x45fca7[_0x3b2e3d(0x30b)](meta[_0x3b2e3d(0x366)][_0x3b2e3d(0x216)],0x2))[_0x3b2e3d(0x318)]('a');socketPosts[_0x3b2e3d(0x497)]({'uid':_0x343c3d},{'pid':_0x58549d,'content':_0x3b2e3d(0x1bd),'title':_0x2bab89},_0x137c7b=>{const _0x3387c9=_0x3b2e3d;assert['equal'](_0x137c7b[_0x3387c9(0x273)],'[[error:title-too-long,\x20'+meta[_0x3387c9(0x366)][_0x3387c9(0x216)]+']]'),_0x4cd43a();});}),it(_0x47a7da(0x3be),_0x71fc08=>{const _0x14e570=_0x47a7da,_0x7eb995={'LmROu':function(_0x3cca58){const _0x90ca27=_0x774c;return _0x45fca7[_0x90ca27(0x2df)](_0x3cca58);}},_0xe989ff=meta['config'][_0x14e570(0x1e4)];meta[_0x14e570(0x366)][_0x14e570(0x1e4)]=0x1,socketPosts[_0x14e570(0x497)]({'uid':_0x343c3d},{'pid':_0x58549d,'content':_0x14e570(0x1bd),'tags':[]},_0x40d4ae=>{const _0x3f7558=_0x14e570;assert[_0x3f7558(0x229)](_0x40d4ae[_0x3f7558(0x273)],'[[error:not-enough-tags,\x20'+meta[_0x3f7558(0x366)]['minimumTagsPerTopic']+']]'),meta['config']['minimumTagsPerTopic']=_0xe989ff,_0x7eb995[_0x3f7558(0x46e)](_0x71fc08);});}),it(_0x45fca7[_0x47a7da(0x3dd)],_0x5a58e8=>{const _0x4f3816=_0x47a7da;if(_0x45fca7[_0x4f3816(0x237)](_0x4f3816(0x4ac),_0x4f3816(0x4ac))){const _0x25b4e3=[];for(let _0x159aac=0x0;_0x159aac<_0x45fca7[_0x4f3816(0x30b)](meta[_0x4f3816(0x366)][_0x4f3816(0x1df)],0x1);_0x159aac+=0x1){_0x25b4e3[_0x4f3816(0x299)](_0x4f3816(0x116)+_0x159aac);}socketPosts['edit']({'uid':_0x343c3d},{'pid':_0x58549d,'content':_0x45fca7['BPCfX'],'tags':_0x25b4e3},_0x1ddbe1=>{const _0x31d09a=_0x4f3816;assert[_0x31d09a(0x229)](_0x1ddbe1[_0x31d09a(0x273)],'[[error:too-many-tags,\x20'+meta['config'][_0x31d09a(0x1df)]+']]'),_0x5a58e8();});}else _0x291e83[_0x4f3816(0x137)](_0x470d9a),_0x2361e6[_0x4f3816(0x229)](_0x22a641,_0x4f3816(0x342)),_0x388dd3();}),_0x45fca7[_0x47a7da(0x2ba)](it,_0x47a7da(0x43e),_0x2aea6c=>{const _0x4bd859=_0x47a7da;socketPosts[_0x4bd859(0x497)]({'uid':_0x343c3d},{'pid':_0x58549d,'content':'e'},_0x197d29=>{const _0x1c24f6=_0x4bd859;assert[_0x1c24f6(0x229)](_0x197d29[_0x1c24f6(0x273)],'[[error:content-too-short,\x20'+meta['config'][_0x1c24f6(0x2a8)]+']]'),_0x2aea6c();});}),_0x45fca7['Tmuzr'](it,_0x45fca7[_0x47a7da(0x213)],_0x5efc6c=>{const _0x329cc8=_0x47a7da,_0x8a33a8={'vJIbu':function(_0x2762e7){const _0xf065f2=_0x774c;return _0x2ee204[_0xf065f2(0x234)](_0x2762e7);},'VLIvr':_0x2ee204[_0x329cc8(0x1a9)]};if('DxpWZ'!==_0x2ee204[_0x329cc8(0x493)]){const _0x4f5d14=new Array(_0x2ee204[_0x329cc8(0x2b0)](meta[_0x329cc8(0x366)][_0x329cc8(0x32a)],0x2))[_0x329cc8(0x318)]('a');socketPosts[_0x329cc8(0x497)]({'uid':_0x343c3d},{'pid':_0x58549d,'content':_0x4f5d14},_0x30b660=>{const _0x5ed210=_0x329cc8;assert[_0x5ed210(0x229)](_0x30b660[_0x5ed210(0x273)],'[[error:content-too-long,\x20'+meta[_0x5ed210(0x366)][_0x5ed210(0x32a)]+']]'),_0x8a33a8[_0x5ed210(0x152)](_0x5efc6c);});}else _0x5882db[_0x329cc8(0x229)](_0x1a3db0[_0x329cc8(0x273)],_0x8a33a8['VLIvr']),_0x37b739();}),_0x45fca7[_0x47a7da(0x405)](it,_0x47a7da(0x349),async()=>{const _0x1dea0e=_0x47a7da;if(_0x45fca7['cFdIR']!=='TVJRz'){const _0x57b9f6=await socketPosts['edit']({'uid':_0x343c3d},{'pid':_0x58549d,'content':_0x45fca7['BPCfX'],'title':_0x45fca7[_0x1dea0e(0x292)],'tags':[_0x1dea0e(0x223)]});assert[_0x1dea0e(0x425)](_0x57b9f6[_0x1dea0e(0x291)],_0x1dea0e(0x1bd)),assert[_0x1dea0e(0x425)](_0x57b9f6[_0x1dea0e(0x44e)],_0x343c3d),assert[_0x1dea0e(0x425)](_0x57b9f6[_0x1dea0e(0x1a8)]['title'],_0x45fca7[_0x1dea0e(0x292)]),assert[_0x1dea0e(0x425)](_0x57b9f6[_0x1dea0e(0x1a8)]['tags'][0x0][_0x1dea0e(0x2a0)],'edited');const _0x53837a=await db[_0x1dea0e(0xe9)]('post:'+_0x58549d);_0x45fca7[_0x1dea0e(0x12e)](assert,!_0x53837a[_0x1dea0e(0x4b9)](_0x1dea0e(0x15d)));}else _0x3e79d6['ifError'](_0x3da546),_0x17efc8(_0x50cc98['get'](_0x2ee204[_0x1dea0e(0x285)])+_0x1dea0e(0x2cc),{'jar':_0x112dbd,'json':!![]},(_0x4b5f5f,_0x241e53,_0x896903)=>{const _0x2da328=_0x1dea0e,_0x1e0ca2={'rYgAR':function(_0x3257f3){return _0x3257f3();}};_0x1ca1ed[_0x2da328(0x137)](_0x4b5f5f),_0x2f737a['equal'](_0x896903[_0x2da328(0x3b7)][0x0]['type'],_0x2da328(0x1a8)),_0x393cf8[_0x2da328(0x229)](_0x896903[_0x2da328(0x3b7)][0x0][_0x2da328(0x3d7)][_0x2da328(0x343)],0x2),_0x4441af[_0x2da328(0x1fe)]({'uid':_0xd70295},{'id':_0x33986d,'cid':_0x4ef64b},_0x38ffed=>{const _0x53ea27=_0x2da328;_0x96632f[_0x53ea27(0x137)](_0x38ffed),_0x1e0ca2[_0x53ea27(0x474)](_0x5d42ab);});});}),it('should\x20disallow\x20post\x20editing\x20for\x20new\x20users\x20if\x20post\x20was\x20made\x20past\x20the\x20threshold\x20for\x20editing',_0x3ac08d=>{const _0x41d1db=_0x47a7da,_0x198f3b={'SVquc':_0x2ee204[_0x41d1db(0x4a4)],'McWCx':_0x41d1db(0x1af),'YyxVP':_0x2ee204[_0x41d1db(0x1cb)],'LXouA':_0x41d1db(0x3ef)};meta[_0x41d1db(0x366)][_0x41d1db(0x266)]=0x1,setTimeout(()=>{const _0x452794=_0x41d1db,_0x5318b5={'ewpno':_0x198f3b[_0x452794(0x1c7)]};socketPosts[_0x452794(0x497)]({'uid':_0x343c3d},{'pid':_0x58549d,'content':_0x198f3b['McWCx'],'title':_0x198f3b[_0x452794(0x32c)],'tags':[_0x198f3b['LXouA']]},(_0x1d983c,_0x58a123)=>{const _0x3f4c99=_0x452794;assert[_0x3f4c99(0x229)](_0x1d983c['message'],_0x5318b5[_0x3f4c99(0x207)]),meta[_0x3f4c99(0x366)]['newbiePostEditDuration']=0xe10,_0x3ac08d();});},0x3e8);}),it(_0x47a7da(0x232),_0x8c8a04=>{const _0x56209a=_0x47a7da;socketPosts[_0x56209a(0xeb)]({'uid':_0x343c3d},{'pid':_0x58549d,'tid':_0x296dc2},_0x2ac01a=>{const _0x3ae758=_0x56209a,_0x1e598f={'GeowG':'5|0|2|4|3|1','VtMvv':_0x3ae758(0x403),'jnWmY':'edited\x20deleted\x20title'};assert[_0x3ae758(0x137)](_0x2ac01a),socketPosts[_0x3ae758(0x497)]({'uid':_0x343c3d},{'pid':_0x58549d,'content':_0x3ae758(0x218),'title':_0x2ee204[_0x3ae758(0xdb)],'tags':[_0x3ae758(0x403)]},(_0x71f6d5,_0x4c97d1)=>{const _0x14f487=_0x3ae758,_0x299869=_0x1e598f[_0x14f487(0x428)]['split']('|');let _0x42b7f4=0x0;while(!![]){switch(_0x299869[_0x42b7f4++]){case'0':assert[_0x14f487(0x229)](_0x4c97d1[_0x14f487(0x291)],'edited\x20deleted\x20content');continue;case'1':_0x8c8a04();continue;case'2':assert[_0x14f487(0x229)](_0x4c97d1['editor'],_0x343c3d);continue;case'3':assert[_0x14f487(0x229)](_0x4c97d1[_0x14f487(0x1a8)]['tags'][0x0][_0x14f487(0x2a0)],_0x1e598f['VtMvv']);continue;case'4':assert[_0x14f487(0x229)](_0x4c97d1[_0x14f487(0x1a8)][_0x14f487(0x2fa)],_0x1e598f[_0x14f487(0x380)]);continue;case'5':assert[_0x14f487(0x137)](_0x71f6d5);continue;}break;}});});}),_0x45fca7['yEvrp'](it,_0x45fca7[_0x47a7da(0x100)],_0x5d71d4=>{const _0xe7a4d6=_0x47a7da;socketPosts[_0xe7a4d6(0x497)]({'uid':_0x343c3d},{'pid':_0x299931,'content':_0x45fca7[_0xe7a4d6(0x2b7)]},(_0x25eb63,_0x4d65b7)=>{const _0x35d274=_0xe7a4d6,_0x1db79a=_0x2ee204[_0x35d274(0x364)][_0x35d274(0x2bc)]('|');let _0x1053e0=0x0;while(!![]){switch(_0x1db79a[_0x1053e0++]){case'0':assert[_0x35d274(0x229)](_0x4d65b7['content'],_0x2ee204[_0x35d274(0x36f)]);continue;case'1':assert[_0x35d274(0x137)](_0x25eb63);continue;case'2':_0x5d71d4();continue;case'3':assert[_0x35d274(0x229)](_0x4d65b7[_0x35d274(0x44e)],_0x343c3d);continue;case'4':assert['equal'](_0x4d65b7[_0x35d274(0x1a8)][_0x35d274(0x1cf)],![]);continue;case'5':assert[_0x35d274(0x229)](_0x4d65b7['topic'][_0x35d274(0x3cd)],![]);continue;}break;}});}),Function(_0x45fca7['AqFuj'])(),_0x45fca7[_0x47a7da(0x301)](it,_0x45fca7[_0x47a7da(0x49b)],_0x5f4e08=>{const _0x9a227d=_0x47a7da;posts['diffs'][_0x9a227d(0x37d)](_0x299931,0x0,(_0x3bfc40,_0x2c6e8c)=>{const _0x1c7928=_0x9a227d,_0x24a654=_0x2ee204['xebFM'][_0x1c7928(0x2bc)]('|');let _0x5d86ab=0x0;while(!![]){switch(_0x24a654[_0x5d86ab++]){case'0':assert[_0x1c7928(0x137)](_0x3bfc40);continue;case'1':assert(_0x2c6e8c[0x0][_0x1c7928(0x289)],_0x299931);continue;case'2':_0x5f4e08();continue;case'3':_0x2ee204['hPrZJ'](assert,Array[_0x1c7928(0x373)](_0x2c6e8c));continue;case'4':_0x2ee204[_0x1c7928(0x421)](assert,_0x2c6e8c[0x0][_0x1c7928(0xde)]);continue;}break;}});}),it(_0x45fca7[_0x47a7da(0xf3)],_0xbba409=>{const _0x537a31=_0x47a7da,_0x38abdd={'FDEMg':function(_0x21175d){const _0x34f7e6=_0x774c;return _0x2ee204[_0x34f7e6(0x234)](_0x21175d);}};posts[_0x537a31(0x3b4)][_0x537a31(0x375)](_0x299931,0x0,_0x343c3d,(_0x2236a4,_0xa8f32)=>{const _0x3b4137=_0x537a31;assert[_0x3b4137(0x137)](_0x2236a4),assert[_0x3b4137(0x229)](_0xa8f32[_0x3b4137(0x291)],_0x3b4137(0x38f)),_0x38abdd['FDEMg'](_0xbba409);});}),it(_0x47a7da(0x4aa),_0x576ed0=>{const _0x7c9cd1=_0x47a7da;socketPosts[_0x7c9cd1(0x11f)]({'uid':0x0},{'pid':0x1},_0x1e64d5=>{const _0x5cb560=_0x7c9cd1;assert[_0x5cb560(0x229)](_0x1e64d5[_0x5cb560(0x273)],_0x5cb560(0x2ee)),_0x576ed0();});}),it(_0x47a7da(0x4ab),_0x4b1e20=>{const _0x3de102=_0x47a7da,_0x305252={'HqqDy':_0x3de102(0xf0),'ENVsd':function(_0x1d884c){return _0x1d884c();},'LhtVB':_0x2ee204[_0x3de102(0x285)]};_0x2ee204['bVWwp'](_0x2ee204[_0x3de102(0x383)],_0x2ee204[_0x3de102(0x33f)])?socketPosts['getDiffs']({'uid':0x1},{'pid':0x1},(_0x26e61b,_0x4b0bb8)=>{const _0x9d9e20=_0x3de102;assert[_0x9d9e20(0x137)](_0x26e61b),assert['strictEqual']('boolean',typeof _0x4b0bb8[_0x9d9e20(0x26d)]),assert['strictEqual'](![],_0x4b0bb8[_0x9d9e20(0x26d)]),assert[_0x9d9e20(0x229)](!![],Array[_0x9d9e20(0x373)](_0x4b0bb8[_0x9d9e20(0x1f7)])),assert[_0x9d9e20(0x425)](0x1,_0x4b0bb8[_0x9d9e20(0x1f7)][_0x9d9e20(0x48a)]),assert[_0x9d9e20(0x229)](!![],Array[_0x9d9e20(0x373)](_0x4b0bb8['revisions'])),assert['strictEqual'](_0x4b0bb8['timestamps'][_0x9d9e20(0x48a)],_0x4b0bb8['revisions'][_0x9d9e20(0x48a)]),[_0x305252[_0x9d9e20(0x322)],_0x9d9e20(0x35e)][_0x9d9e20(0x18e)](_0x50c8e1=>Object[_0x9d9e20(0x23b)](_0x4b0bb8[_0x9d9e20(0x221)][0x0])['includes'](_0x50c8e1)),_0x305252[_0x9d9e20(0x112)](_0x4b1e20);}):_0x18cf3d[_0x3de102(0x1fe)]({'uid':_0x55c632},{'id':_0x5984f7,'cid':0x2},_0x464898=>{const _0x2f4681=_0x3de102,_0x5997f0={'TVVOW':function(_0x3671ec){const _0x1b49cb=_0x774c;return _0x305252[_0x1b49cb(0x112)](_0x3671ec);}};_0x283bff[_0x2f4681(0x137)](_0x464898),_0xda937c(_0x4ae281[_0x2f4681(0x37d)](_0x305252[_0x2f4681(0x441)])+_0x2f4681(0x2cc),{'jar':_0xe7e760,'json':!![]},(_0x2597ff,_0x1c1bfe,_0x59b317)=>{const _0x20dd2e=_0x2f4681,_0x33eb3e={'SMETA':function(_0x3374e2){const _0x57d028=_0x774c;return _0x5997f0[_0x57d028(0x45c)](_0x3374e2);}};_0xa63c60[_0x20dd2e(0x137)](_0x2597ff),_0x1efa5d[_0x20dd2e(0x229)](_0x59b317[_0x20dd2e(0x3b7)][0x0][_0x20dd2e(0x106)],_0x20dd2e(0x1a8)),_0x49a97f[_0x20dd2e(0x229)](_0x59b317['posts'][0x0][_0x20dd2e(0x3d7)][_0x20dd2e(0x343)],0x2),_0x47a409[_0x20dd2e(0x1fe)]({'uid':_0x1ec6e7},{'id':_0x1ad343,'cid':_0x424a2f},_0x3899dc=>{const _0x223d16=_0x20dd2e;_0x95c10d[_0x223d16(0x137)](_0x3899dc),_0x33eb3e['SMETA'](_0xeeb3d);});});});}),it(_0x45fca7['ahMFt'],async()=>{const _0x1f09eb=_0x47a7da,_0x38bcbc={'GcsXc':function(_0xdd0f9c){const _0x1fdc0a=_0x774c;return _0x2ee204[_0x1fdc0a(0x234)](_0xdd0f9c);},'PhzOl':function(_0x1c549f,_0x22e9ff){return _0x1c549f===_0x22e9ff;},'VYLZm':_0x2ee204[_0x1f09eb(0x2cd)]},_0x5573dd=await posts[_0x1f09eb(0x3b4)]['list'](_0x299931);await assert[_0x1f09eb(0x463)](async()=>{const _0x19fe22=_0x1f09eb;_0x38bcbc['PhzOl'](_0x38bcbc['VYLZm'],_0x19fe22(0x391))?await posts['diffs'][_0x19fe22(0xeb)](_0x299931,_0x5573dd[0x0],_0x343c3d):(_0x26a8b9[_0x19fe22(0x137)](_0x137723),_0x1d23fb[_0x19fe22(0x425)](!![],_0x2fb8ff[_0x19fe22(0x373)](_0x28f924)),_0x1ded56[_0x19fe22(0x425)](0x0,_0xac2c96[_0x19fe22(0x48a)]),_0x38bcbc[_0x19fe22(0x1ff)](_0x5905f8));},{'message':_0x2ee204[_0x1f09eb(0x1a9)]});}),_0x45fca7[_0x47a7da(0x2ba)](it,_0x47a7da(0x163),async()=>{const _0x135f6c=_0x47a7da;await socketPosts[_0x135f6c(0x497)]({'uid':_0x343c3d},{'pid':_0x299931,'content':_0x135f6c(0x397)}),await socketPosts[_0x135f6c(0x497)]({'uid':_0x343c3d},{'pid':_0x299931,'content':_0x135f6c(0x37f)});const _0x48954c=(await posts[_0x135f6c(0x3b4)][_0x135f6c(0x17e)](_0x299931))[_0x135f6c(0x15a)]();await posts['diffs'][_0x135f6c(0xeb)](_0x299931,_0x48954c,_0x343c3d);const _0x568cf6=(await posts[_0x135f6c(0x3b4)][_0x135f6c(0x17e)](_0x299931))[_0x135f6c(0x15a)]();assert['notStrictEqual'](_0x48954c,_0x568cf6);}),it(_0x47a7da(0x254),async()=>{const _0x14dec=_0x47a7da,_0x191a9e=await posts[_0x14dec(0x3b4)][_0x14dec(0x375)](_0x299931,0x0,_0x343c3d);assert[_0x14dec(0x425)](_0x191a9e['content'],_0x14dec(0x38f));});}),_0x45fca7[_0x30a30a(0x20b)](describe,_0x45fca7[_0x30a30a(0x24a)],()=>{const _0x3aa8ec=_0x30a30a,_0x194274={'FTZGx':_0x45fca7[_0x3aa8ec(0x23f)],'NlLyJ':_0x3aa8ec(0x47f),'ZJUjS':_0x3aa8ec(0x47e),'PAFwW':function(_0xd08627){const _0x110ead=_0x3aa8ec;return _0x45fca7[_0x110ead(0x351)](_0xd08627);},'XVhEW':_0x45fca7[_0x3aa8ec(0x117)],'RwFKB':_0x3aa8ec(0x10b),'GQmQF':function(_0x2f0d71){return _0x2f0d71();},'guXiH':function(_0x47baf3){return _0x47baf3();},'dROHu':_0x45fca7['SercA']};let _0x670616,_0x2a4bbe,_0x375673;_0x45fca7[_0x3aa8ec(0x13d)](before,_0x2a8a1e=>{const _0x1912f4=_0x3aa8ec;async[_0x1912f4(0x4ad)]([function(_0x38ee2e){const _0x5744f8=_0x1912f4;topics[_0x5744f8(0x363)]({'uid':_0x343c3d,'cid':_0x17f2dd,'title':_0x194274[_0x5744f8(0x37c)],'content':_0x194274['NlLyJ']},_0x38ee2e);},function(_0xd2e5f2,_0x93867f){const _0x3d1fda=_0x1912f4;_0x2a4bbe=_0xd2e5f2[_0x3d1fda(0x452)][_0x3d1fda(0x3a9)],topics[_0x3d1fda(0x363)]({'uid':_0x343c3d,'cid':_0x17f2dd,'title':_0x194274[_0x3d1fda(0x3c8)],'content':_0x3d1fda(0x47f)},_0x93867f);},function(_0x3f2551,_0x418634){const _0x4cc68e=_0x1912f4,_0x553147={'pbwWA':function(_0x24c619,_0x39daaf){return _0x24c619===_0x39daaf;},'beAPc':function(_0x550840){const _0x3e98d3=_0x774c;return _0x194274[_0x3e98d3(0xe6)](_0x550840);}};_0x194274[_0x4cc68e(0x3fd)]!==_0x194274[_0x4cc68e(0x40f)]?(_0x375673=_0x3f2551[_0x4cc68e(0x452)][_0x4cc68e(0x3a9)],topics[_0x4cc68e(0x2f8)]({'uid':_0x343c3d,'tid':_0x2a4bbe,'timestamp':Date[_0x4cc68e(0x253)](),'content':_0x4cc68e(0x21b)},(_0x2944c4,_0x1dfcb5)=>{const _0x1e2300=_0x4cc68e;_0x553147['pbwWA'](_0x1e2300(0x480),_0x1e2300(0x480))?(assert[_0x1e2300(0x137)](_0x2944c4),_0x670616=_0x1dfcb5[_0x1e2300(0x289)],_0x553147[_0x1e2300(0x214)](_0x418634)):_0x47c4ed[_0x1e2300(0x1fe)]({'uid':_0x3c52c2},null,_0x488e30=>{const _0x14233a=_0x1e2300;_0x52a81e[_0x14233a(0x229)](_0x488e30[_0x14233a(0x273)],_0x14233a(0x1ad)),_0x29ae1d();});})):_0x3499e9[_0x4cc68e(0xf7)]({'uid':_0x51826c},{'id':_0x64a73c},_0x1fccaa=>{const _0x3a6495=_0x4cc68e;_0x5099b3[_0x3a6495(0x229)](_0x1fccaa['message'],_0x3a6495(0x2ee)),_0x2367eb();});}],_0x2a8a1e);}),it(_0x45fca7['wJBMw'],_0x18b0f9=>{const _0x534b98=_0x3aa8ec,_0x51b41f={'qXAPu':function(_0x180475,_0x57613e){return _0x180475!==_0x57613e;},'rGUot':_0x534b98(0x4a8),'bdHom':_0x45fca7[_0x534b98(0x406)]};socketPosts[_0x534b98(0x32f)]({'uid':0x0},{},_0x440a04=>{const _0x88b0e=_0x534b98;_0x51b41f[_0x88b0e(0x420)](_0x51b41f[_0x88b0e(0x414)],_0x51b41f['bdHom'])?(assert[_0x88b0e(0x229)](_0x440a04[_0x88b0e(0x273)],'[[error:not-logged-in]]'),_0x18b0f9()):(_0x341593[_0x88b0e(0x137)](_0x2aa35c),_0x59f44d[_0x88b0e(0x124)](0x0,0x1,(_0x21a271,_0x4895f2)=>{const _0x239d09=_0x88b0e;_0x55fc20[_0x239d09(0x137)](_0x21a271),_0x192bde(_0x1f7168[_0x239d09(0x373)](_0x4895f2)),_0x1d8cfc[_0x239d09(0x229)](_0x4895f2[_0x239d09(0x48a)],0x2),_0x18f69b[_0x239d09(0x229)](_0x4895f2[0x0],_0x432dd4),_0x17f03c();}));});}),_0x45fca7[_0x3aa8ec(0x2a7)](it,'should\x20error\x20if\x20data\x20is\x20invalid',_0x40c480=>{socketPosts['movePost']({'uid':_0x3618f6},{},_0x478c78=>{const _0x2dd614=_0x774c;assert[_0x2dd614(0x229)](_0x478c78[_0x2dd614(0x273)],_0x2dd614(0x1ad)),_0x194274[_0x2dd614(0x18c)](_0x40c480);});}),it(_0x45fca7[_0x3aa8ec(0x341)],_0xea99ec=>{const _0x66e93a=_0x3aa8ec;socketPosts[_0x66e93a(0x32f)]({'uid':_0x343c3d},{'pid':_0x670616,'tid':_0x375673},_0x4e1cdc=>{const _0x123227=_0x66e93a;assert[_0x123227(0x229)](_0x4e1cdc[_0x123227(0x273)],_0x123227(0x2ee)),_0xea99ec();});}),it(_0x3aa8ec(0x283),_0x4b5ee6=>{const _0x3b030a=_0x3aa8ec,_0x3b032d={'kVMoZ':function(_0x220d55){const _0x5822e0=_0x774c;return _0x194274[_0x5822e0(0x17c)](_0x220d55);},'VMGbT':function(_0x5ed374,_0x46c4d5,_0x5788d6){return _0x5ed374(_0x46c4d5,_0x5788d6);}};_0x3b030a(0x3cf)!==_0x194274['dROHu']?(_0x268d5d[_0x3b030a(0x137)](_0x8a89ce),_0x210ea7[_0x3b030a(0x229)](_0x481b86[_0x3b030a(0x2bf)],!![]),_0x49b538[_0x3b030a(0x229)](_0xb7953c[_0x3b030a(0x23a)],![]),_0x3b032d['kVMoZ'](_0x46a237)):socketPosts['movePost']({'uid':_0x3618f6},{'pid':_0x670616,'tid':_0x375673},_0x35ed62=>{const _0x9e7364=_0x3b030a;assert[_0x9e7364(0x137)](_0x35ed62),posts[_0x9e7364(0x2b9)](_0x670616,'tid',(_0x5e9054,_0x31fab5)=>{const _0x24d826=_0x9e7364;assert['ifError'](_0x5e9054),_0x3b032d[_0x24d826(0x22f)](assert,_0x31fab5,_0x375673),_0x4b5ee6();});});}),_0x45fca7[_0x3aa8ec(0x227)](it,_0x45fca7[_0x3aa8ec(0x390)],async()=>{const _0x3eaa00=_0x3aa8ec,_0x4da7c9=await categories['create']({'name':_0x45fca7[_0x3eaa00(0x437)],'description':_0x3eaa00(0x3db)}),_0xbd0f42=await categories['create']({'name':_0x45fca7[_0x3eaa00(0x437)],'description':'Test\x20category\x20created\x20by\x20testing\x20script'}),_0x3e8811=await socketTopics[_0x3eaa00(0x363)]({'uid':_0x3618f6},{'title':_0x45fca7[_0x3eaa00(0x1a3)],'content':_0x3eaa00(0x248),'cid':_0xbd0f42['cid']}),_0x495ff6=await user[_0x3eaa00(0x1d5)]({'username':_0x45fca7[_0x3eaa00(0x20f)]});await privileges[_0x3eaa00(0x21c)]['give'](privileges[_0x3eaa00(0x21c)][_0x3eaa00(0x44f)],_0x4da7c9['cid'],_0x495ff6);let _0x3ffc1d;try{await socketPosts['movePost']({'uid':_0x495ff6},{'pid':_0x670616,'tid':_0x3e8811[_0x3eaa00(0x3a9)]});}catch(_0x4fa3b2){_0x3ffc1d=_0x4fa3b2;}assert['strictEqual'](_0x3ffc1d[_0x3eaa00(0x273)],'[[error:no-privileges]]');});}),describe(_0x45fca7[_0x30a30a(0x2ce)],()=>{const _0xd114f4=_0x30a30a,_0x593dd4={'vgYth':function(_0x212a5d){const _0x1e6691=_0x774c;return _0x45fca7[_0x1e6691(0x168)](_0x212a5d);},'OPOIl':function(_0x519df6,_0x3f090a){const _0x1bdff6=_0x774c;return _0x45fca7[_0x1bdff6(0x237)](_0x519df6,_0x3f090a);},'xpYIv':_0xd114f4(0x450)};eval('const _0x19ce00 = _0xd114f4;_0x45fca7[_0x19ce00(373)](Math[\'PI\'], 2);'),_0x45fca7['SWsJn'](it,_0xd114f4(0x310),_0x19dd7a=>{const _0x5d4823=_0xd114f4;_0x593dd4['OPOIl'](_0x593dd4[_0x5d4823(0x29a)],_0x593dd4[_0x5d4823(0x29a)])?posts[_0x5d4823(0x125)]([],0x0,{},(_0x56afe1,_0x443e77)=>{const _0xebe691=_0x5d4823;assert[_0xebe691(0x137)](_0x56afe1),assert[_0xebe691(0x229)](_0x443e77['length'],0x0),_0x19dd7a();}):(_0x2f26e2['ifError'](_0x316bde),_0x4774b5[_0x5d4823(0x425)](0x1,_0x397dac[0x0]),_0x4c4134[_0x5d4823(0x425)](0x1,_0x3196f1[0x1]),_0x593dd4[_0x5d4823(0x25f)](_0x18cc27));}),it(_0x45fca7['qiXkk'],_0x564abd=>{const _0x20f747=_0xd114f4,_0x319dcb={'wDJXo':function(_0x253f98,_0x47f153){const _0x1eaf45=_0x774c;return _0x45fca7[_0x1eaf45(0x3f3)](_0x253f98,_0x47f153);},'CqwOb':function(_0x367905,_0xef9b54){return _0x367905(_0xef9b54);},'uwvBt':function(_0x4cd64a){return _0x45fca7['sHAxo'](_0x4cd64a);}};posts[_0x20f747(0x125)]([_0x323d93[_0x20f747(0x289)]],0x0,{},(_0x1dbe64,_0x62a23c)=>{const _0x573c2e=_0x20f747;assert[_0x573c2e(0x137)](_0x1dbe64),_0x319dcb[_0x573c2e(0x2f2)](assert,_0x62a23c[0x0][_0x573c2e(0x25a)]),_0x319dcb[_0x573c2e(0x2f2)](assert,_0x62a23c[0x0]['topic']),_0x319dcb[_0x573c2e(0x3c2)](assert,_0x62a23c[0x0][_0x573c2e(0x326)]),_0x319dcb[_0x573c2e(0xfe)](_0x564abd);});});}),_0x45fca7[_0x30a30a(0x195)](it,_0x45fca7[_0x30a30a(0x267)],_0x3d72f4=>{const _0x35b619=_0x30a30a,_0x39263c={'VWIse':function(_0xdfb016,_0x528d96){const _0x4fbed5=_0x774c;return _0x45fca7[_0x4fbed5(0x331)](_0xdfb016,_0x528d96);},'NbbMV':function(_0x33d32b){return _0x33d32b();},'SSbQD':function(_0x24117f){const _0x25029d=_0x774c;return _0x45fca7[_0x25029d(0x21d)](_0x24117f);}};_0x45fca7[_0x35b619(0x426)](_0x45fca7[_0x35b619(0x257)],_0x35b619(0x2ae))?topics[_0x35b619(0x2f8)]({'uid':_0x343c3d,'tid':_0x3b0103[_0x35b619(0x3a9)],'timestamp':Date['now'](),'content':_0x45fca7[_0x35b619(0x4b4)]},_0x39726a=>{const _0x2d64cc=_0x35b619;assert[_0x2d64cc(0x137)](_0x39726a),posts[_0x2d64cc(0x124)](0x0,0x1,(_0x315e28,_0x4aa8f9)=>{const _0x4f82d5=_0x2d64cc;assert[_0x4f82d5(0x137)](_0x315e28),_0x39263c['VWIse'](assert,Array['isArray'](_0x4aa8f9)),assert[_0x4f82d5(0x229)](_0x4aa8f9['length'],0x2),assert[_0x4f82d5(0x229)](_0x4aa8f9[0x0],_0x343c3d),_0x39263c[_0x4f82d5(0x320)](_0x3d72f4);});}):(_0x3770d5[_0x35b619(0x229)](_0x1a0768[_0x35b619(0x273)],_0x35b619(0x2a6)),_0x39263c[_0x35b619(0x123)](_0x28ffc6));}),describe(_0x30a30a(0x48c),()=>{const _0x9ba565=_0x30a30a,_0x456ed0={'fIvLq':'nconf','DpScA':_0x9ba565(0x4a6)};_0x45fca7[_0x9ba565(0x2c6)](_0x45fca7[_0x9ba565(0x12b)],_0x9ba565(0x26a))?(new AsyncFunction(_0x9ba565(0x286))(),it(_0x45fca7[_0x9ba565(0x2fb)],_0x112fa9=>{const _0x55a65b=_0x9ba565;posts[_0x55a65b(0x27a)](null,(_0xbd3777,_0x481668)=>{const _0x16dfc9=_0x55a65b;assert[_0x16dfc9(0x137)](_0xbd3777),assert[_0x16dfc9(0x425)](_0x481668,null),_0x112fa9();});}),it(_0x9ba565(0x178),_0x57b0ff=>{const _0x40440a=_0x9ba565;if(_0x40440a(0x417)===_0x40440a(0x417)){const _0x3670eb=global[_0x40440a(0x2af)];global['env']=_0x40440a(0x384);const _0x2b1347={'pid':0x270f,'content':_0x40440a(0xd8)};posts['parsePost'](_0x2b1347,_0x476985=>{const _0x39fd49=_0x40440a;assert[_0x39fd49(0x137)](_0x476985),posts[_0x39fd49(0x27a)](_0x2b1347,_0x25a019=>{const _0x3f9f8f=_0x39fd49;assert['ifError'](_0x25a019),global[_0x3f9f8f(0x2af)]=_0x3670eb,_0x57b0ff();});});}else _0x4dde85['delete']({'uid':_0x2f8ca2},{'pid':_0x29778a,'tid':_0x5c3333},_0x386540=>{const _0x294f64=_0x40440a;_0x58cf67[_0x294f64(0x137)](_0x386540),_0x5b3e2a[_0x294f64(0x2b9)](_0x414791,'deleted',(_0x102af2,_0x200514)=>{const _0x1eb9c6=_0x294f64;_0x4e6ffb[_0x1eb9c6(0x137)](_0x102af2),_0x3d118d[_0x1eb9c6(0x425)](_0x200514,0x1),_0xc4cefc();});});}),it(_0x9ba565(0x201),_0x3e94f6=>{const _0x249f6f=_0x9ba565,_0x3b6f90={'SUFxZ':'signatures:disableImages'};meta[_0x249f6f(0x366)][_0x45fca7['VtXaG']]=0x1,meta[_0x249f6f(0x366)][_0x249f6f(0x114)]=0x1;const _0x2c1b49={'signature':_0x249f6f(0x203)};posts[_0x249f6f(0x2e8)](_0x2c1b49,0x1,(_0x333509,_0x349cf7)=>{const _0x47648e=_0x249f6f;assert[_0x47648e(0x137)](_0x333509),assert['equal'](_0x349cf7[_0x47648e(0x455)][_0x47648e(0x236)],'test\x20derp'),meta['config'][_0x47648e(0x244)]=0x0,meta[_0x47648e(0x366)][_0x3b6f90[_0x47648e(0x2d4)]]=0x0,_0x3e94f6();});}),it(_0x9ba565(0x48d),_0xf4b66=>{const _0x5b8c01=_0x9ba565,_0x176934=require('nconf'),_0x5d6695=_0x5b8c01(0x367),_0x4bde8d=posts[_0x5b8c01(0x19e)](_0x5d6695,posts[_0x5b8c01(0x46c)]);assert['equal'](_0x4bde8d,_0x5b8c01(0x352)+_0x176934['get'](_0x5b8c01(0x4a6))+_0x5b8c01(0x2e1)),_0xf4b66();}),_0x45fca7[_0x9ba565(0x358)](it,_0x45fca7[_0x9ba565(0x28f)],_0x4888b5=>{const _0x24656d=_0x9ba565,_0x2d7729=require(_0x456ed0[_0x24656d(0x446)]),_0x168979=_0x24656d(0x36b);let _0x21cf5a=posts[_0x24656d(0x19e)](_0x168979,posts[_0x24656d(0x46c)]);_0x21cf5a=posts['relativeToAbsolute'](_0x21cf5a,posts[_0x24656d(0x47b)]),assert[_0x24656d(0x229)](_0x21cf5a,_0x24656d(0x352)+_0x2d7729['get'](_0x456ed0[_0x24656d(0x270)])+_0x24656d(0x23e)+_0x2d7729[_0x24656d(0x37d)](_0x24656d(0x4a6))+'/path/to/img\x22/>'),_0x4888b5();})):(_0xfc4e66[_0x9ba565(0x137)](_0x2b7081),_0x429589[_0x9ba565(0x229)](_0x54e958[_0x9ba565(0x363)]['upvotes'],0x1),_0x1199a2[_0x9ba565(0x229)](_0x5ebbd3[_0x9ba565(0x363)][_0x9ba565(0x235)],0x0),_0x25f023['equal'](_0x587a96[_0x9ba565(0x363)][_0x9ba565(0x392)],0x1),_0x4cfc4d['equal'](_0x5a8a74[_0x9ba565(0x25a)]['reputation'],0x1),_0x182754[_0x9ba565(0x115)](_0x577e64[_0x9ba565(0x289)],_0x1c1381,(_0x3492fc,_0xe04778)=>{const _0x1256de=_0x9ba565;_0xf8b77f[_0x1256de(0x137)](_0x3492fc),_0x4d70e5[_0x1256de(0x229)](_0xe04778[_0x1256de(0x2bf)],!![]),_0x29d4e8['equal'](_0xe04778[_0x1256de(0x23a)],![]),_0x546f81();}));}),_0x45fca7[_0x30a30a(0x464)](describe,_0x30a30a(0x24e),()=>{const _0x3a534f=_0x30a30a,_0x10b5ce={'ELHWd':function(_0x45888d,_0x21c6a1){const _0x446b77=_0x774c;return _0x45fca7[_0x446b77(0x3e8)](_0x45888d,_0x21c6a1);},'llPRo':_0x45fca7[_0x3a534f(0x262)],'huMiT':function(_0x36e98a){return _0x45fca7['bKtSf'](_0x36e98a);},'XTKLv':_0x3a534f(0x2ee),'CEGkS':function(_0x57ffa6,_0x32eaaa){return _0x57ffa6(_0x32eaaa);},'JzPhd':_0x3a534f(0xfd),'vuryE':function(_0x33050a,_0x6d85be){return _0x45fca7['dhEPg'](_0x33050a,_0x6d85be);},'SVZEd':'DWMpq'};let _0x184068;before(_0x49be1e=>{const _0x999c1e=_0x3a534f,_0x27e9d4={'MPtwR':function(_0x414736){return _0x414736();},'RHGfq':_0x999c1e(0x38e)};_0x10b5ce['ELHWd'](_0x10b5ce['llPRo'],_0x999c1e(0xe7))?_0x25893c['edit']({'uid':_0x425375},{'pid':_0x511ae5,'content':_0x999c1e(0x1bd),'title':'a'},_0x424bd3=>{const _0x4e683b=_0x999c1e;_0x144391[_0x4e683b(0x229)](_0x424bd3[_0x4e683b(0x273)],'[[error:title-too-short,\x20'+_0x48079d[_0x4e683b(0x366)][_0x4e683b(0x103)]+']]'),_0x27e9d4[_0x4e683b(0x334)](_0x27f16c);}):topics['reply']({'uid':_0x343c3d,'tid':_0x3b0103[_0x999c1e(0x3a9)],'timestamp':Date[_0x999c1e(0x253)](),'content':_0x999c1e(0x342)},(_0x348103,_0x515304)=>{const _0x496e05=_0x999c1e;assert[_0x496e05(0x137)](_0x348103),_0x184068=_0x515304[_0x496e05(0x289)],privileges[_0x496e05(0x21c)][_0x496e05(0x135)]([_0x496e05(0x419)],_0x17f2dd,_0x27e9d4[_0x496e05(0x153)],_0x49be1e);});}),it('should\x20error\x20with\x20invalid\x20data',_0x5901ba=>{socketPosts['reply']({'uid':0x0},null,_0x2057d6=>{const _0x2d49b6=_0x774c;assert[_0x2d49b6(0x229)](_0x2057d6['message'],_0x2d49b6(0x1ad)),_0x5901ba();});}),_0x45fca7['fBlgC'](it,_0x45fca7[_0x3a534f(0x136)],_0x53ed59=>{const _0x1b713d=_0x3a534f;_0x45fca7[_0x1b713d(0x15f)]!==_0x1b713d(0x40c)?(_0x5a616d['ifError'](_0x582d2c),_0x2e0331[_0x1b713d(0x2f8)]({'uid':0x1,'tid':_0x8879e7[_0x1b713d(0x452)][_0x1b713d(0x3a9)],'timestamp':_0x51d9d5[_0x1b713d(0x253)](),'content':'[abcdef](/assets/uploads/files/shazam.jpg)'},(_0x4e204c,_0x3eb897)=>{const _0x33ced9=_0x1b713d;_0xca5e35[_0x33ced9(0x137)](_0x4e204c),_0x283f29=_0x1bfb56,_0x6d4c4f=_0x3eb897,_0x594ea0();})):socketPosts[_0x1b713d(0x2f8)]({'uid':0x0},{'tid':0x0,'content':_0x45fca7[_0x1b713d(0x245)]},_0x3d833a=>{const _0x2a0cc7=_0x1b713d;assert[_0x2a0cc7(0x229)](_0x3d833a[_0x2a0cc7(0x273)],_0x2a0cc7(0x1ad)),_0x10b5ce[_0x2a0cc7(0x22c)](_0x53ed59);});}),_0x45fca7['frYqS'](it,_0x45fca7['KfhrA'],_0x2014a1=>{const _0x65771d=_0x3a534f,_0x467c40={'jcwOS':_0x65771d(0x3f1),'xSaYV':function(_0x53b078){return _0x53b078();}};_0x45fca7[_0x65771d(0x192)](_0x65771d(0x359),_0x45fca7[_0x65771d(0x11d)])?socketPosts[_0x65771d(0xd2)]({'uid':0x0},_0x184068,_0x2bbb57=>{const _0x23c6d0=_0x65771d;assert[_0x23c6d0(0x229)](_0x2bbb57[_0x23c6d0(0x273)],_0x10b5ce[_0x23c6d0(0x35b)]),_0x2014a1();}):(_0x30e92d[_0x65771d(0x137)](_0x42d02f),_0x3dfac7['equal'](_0x32fbd0['content'],_0x467c40['jcwOS']),_0xd1c215['equal'](_0x24f07f[_0x65771d(0x44e)],_0x121a64),_0x4ce219[_0x65771d(0x229)](_0x229d18[_0x65771d(0x1a8)]['isMainPost'],![]),_0x38b277[_0x65771d(0x229)](_0x1396de[_0x65771d(0x1a8)][_0x65771d(0x1cf)],![]),_0x467c40['xSaYV'](_0x2d2e19));}),it(_0x45fca7[_0x3a534f(0x490)],_0x1aa9a3=>{const _0x146a8e=_0x3a534f,_0x2f53a2={'gkBKW':_0x45fca7[_0x146a8e(0x327)],'HAzLW':_0x146a8e(0x277),'GXnsm':function(_0x4a6920){const _0x142a01=_0x146a8e;return _0x45fca7[_0x142a01(0x12d)](_0x4a6920);}};posts[_0x146a8e(0x1be)](_0x184068,_0x146a8e(0x403),0x1,_0x2481ad=>{const _0x216b72=_0x146a8e;assert[_0x216b72(0x137)](_0x2481ad),socketPosts['getRawPost']({'uid':_0x343c3d},_0x184068,_0xc08e72=>{const _0x481d46=_0x216b72;if(_0x2f53a2['gkBKW']!==_0x481d46(0x34c)){const _0x4b5458={'TUCTS':_0x481d46(0x1ad),'alpDH':function(_0x89bed3){return _0x89bed3();}};_0x183575[_0x481d46(0x2f8)]({'uid':0x0},{'tid':0x0,'content':_0x481d46(0x1fd)},_0x3b5f42=>{const _0x2e5976=_0x481d46;_0x8b0243[_0x2e5976(0x229)](_0x3b5f42[_0x2e5976(0x273)],_0x4b5458[_0x2e5976(0x3ec)]),_0x4b5458['alpDH'](_0x1ad998);});}else assert[_0x481d46(0x229)](_0xc08e72[_0x481d46(0x273)],_0x2f53a2[_0x481d46(0x48f)]),_0x2f53a2[_0x481d46(0x486)](_0x1aa9a3);});});}),_0x45fca7[_0x3a534f(0x230)](it,_0x3a534f(0x14e),_0x254402=>{const _0x525c6d=_0x3a534f,_0x3ecc89={'ZamTo':_0x525c6d(0x471),'YIcat':_0x45fca7[_0x525c6d(0x2f6)],'lXdQJ':function(_0x550e8b){return _0x550e8b();}};posts[_0x525c6d(0x1be)](_0x184068,_0x45fca7['Inahp'],0x0,_0x3522f4=>{const _0x400095=_0x525c6d;assert[_0x400095(0x137)](_0x3522f4),socketPosts['getRawPost']({'uid':_0x343c3d},_0x184068,(_0x233ebd,_0x30de75)=>{const _0x5df4a9=_0x400095,_0xb39955={'FqaON':_0x3ecc89[_0x5df4a9(0x35a)]};_0x5df4a9(0x2d5)!==_0x3ecc89['YIcat']?(assert['ifError'](_0x233ebd),assert['equal'](_0x30de75,_0x5df4a9(0x342)),_0x3ecc89[_0x5df4a9(0x3f8)](_0x254402)):(_0x52b15c=_0x2433cf[_0x5df4a9(0x452)][_0x5df4a9(0x3a9)],_0x4483e5=_0x23e5bd[_0x5df4a9(0xd6)][_0x5df4a9(0x289)],_0x4312c4=_0x4b5793['pid'],_0x170173[_0x5df4a9(0x21c)][_0x5df4a9(0x189)](['groups:purge'],_0x264445,_0xb39955['FqaON'],_0x31f4a4));});});}),it(_0x3a534f(0x33a),_0x4bdea5=>{const _0x258c3=_0x3a534f;socketPosts[_0x258c3(0x3af)]({'uid':_0x343c3d},_0x184068,(_0x1ba7c7,_0x17b33d)=>{const _0x20b0f9=_0x258c3;assert['ifError'](_0x1ba7c7),_0x10b5ce['CEGkS'](assert,_0x17b33d),_0x10b5ce[_0x20b0f9(0x22c)](_0x4bdea5);});}),it(_0x45fca7[_0x3a534f(0x325)],_0x37a1aa=>{const _0x40283d=_0x3a534f;socketPosts[_0x40283d(0x24c)]({'uid':_0x343c3d},_0x184068,(_0xb4e847,_0x36383b)=>{const _0x4fef27=_0x40283d;assert[_0x4fef27(0x137)](_0xb4e847),assert[_0x4fef27(0x229)](_0x17f2dd,_0x36383b),_0x37a1aa();});}),_0x45fca7[_0x3a534f(0x2e3)](it,_0x45fca7[_0x3a534f(0x2d0)],_0x56de7b=>{const _0x5cd50f=_0x3a534f;_0x5cd50f(0x2b6)!==_0x5cd50f(0x144)?socketPosts[_0x5cd50f(0x246)]({'uid':_0x343c3d},null,_0x8b5466=>{const _0x3c8caa=_0x5cd50f,_0x113bbe={'qGQWl':function(_0x11c7df){return _0x10b5ce['huMiT'](_0x11c7df);}};if(_0x3c8caa(0xfd)!==_0x10b5ce[_0x3c8caa(0x434)]){const _0x18b67f={'hUpId':function(_0x4c0591){return _0x113bbe['qGQWl'](_0x4c0591);}};_0x2e5f39[_0x3c8caa(0x137)](_0x36f495),_0x46b7f4['equal'](_0x8365b0[_0x3c8caa(0x363)]['upvotes'],0x0),_0x367ad9[_0x3c8caa(0x229)](_0x13cb76[_0x3c8caa(0x363)][_0x3c8caa(0x235)],0x0),_0x6360c5['equal'](_0xc9fe42['post'][_0x3c8caa(0x392)],0x0),_0x8c19dd[_0x3c8caa(0x229)](_0x589edf[_0x3c8caa(0x25a)]['reputation'],0x0),_0x20e98e['hasVoted'](_0x523c16[_0x3c8caa(0x289)],_0x28f714,(_0x664d0c,_0x5c8c7c)=>{const _0x635570=_0x3c8caa;_0x51b2c1[_0x635570(0x137)](_0x664d0c),_0x5adde2[_0x635570(0x229)](_0x5c8c7c['upvoted'],![]),_0x6e7d9e[_0x635570(0x229)](_0x5c8c7c[_0x635570(0x23a)],![]),_0x18b67f[_0x635570(0x10a)](_0x507614);});}else assert['equal'](_0x8b5466[_0x3c8caa(0x273)],'[[error:invalid-data]]'),_0x56de7b();}):(_0x58a40f[_0x5cd50f(0x137)](_0x5d3ab6),_0xc2303e[_0x5cd50f(0x229)](_0x495ad3,0x4),_0x3e2038());}),_0x45fca7[_0x3a534f(0x282)](it,_0x3a534f(0x3da),_0x2e122c=>{const _0x1d0b8a=_0x3a534f,_0x140ab0={'qhRFk':function(_0x1ee5b7){const _0x5222a8=_0x774c;return _0x10b5ce[_0x5222a8(0x22c)](_0x1ee5b7);}};_0x10b5ce['vuryE'](_0x10b5ce[_0x1d0b8a(0x1d9)],_0x1d0b8a(0x2d8))?(_0x2e1d3f[_0x1d0b8a(0x229)](_0x2131b4[_0x1d0b8a(0x273)],'[[error:content-too-long,\x20'+_0x4e6e84[_0x1d0b8a(0x366)][_0x1d0b8a(0x32a)]+']]'),_0x140ab0[_0x1d0b8a(0x222)](_0x1647cc)):socketPosts['getPidIndex']({'uid':_0x343c3d},{'pid':_0x184068,'tid':_0x3b0103['tid'],'topicPostSort':'oldest_to_newest'},(_0x186623,_0x10eb86)=>{const _0x116c4c=_0x1d0b8a;if(_0x116c4c(0x21f)===_0x116c4c(0x167)){const _0xd57639={'ItdBV':_0x116c4c(0x2ee)};_0x38a76b[_0x116c4c(0xf7)]({'uid':_0xf9d09},{'id':0x1e0f3},_0x389545=>{const _0x5d2a0b=_0x116c4c;_0x42d6a1[_0x5d2a0b(0x229)](_0x389545['message'],_0xd57639[_0x5d2a0b(0x155)]),_0x3e9269();});}else assert[_0x116c4c(0x137)](_0x186623),assert['equal'](_0x10eb86,0x4),_0x2e122c();});}),_0x45fca7[_0x3a534f(0x2ba)](it,'should\x20get\x20pid\x20index\x20in\x20reverse',_0x3fcdca=>{const _0xda0aa2=_0x3a534f;topics[_0xda0aa2(0x2f8)]({'uid':_0x343c3d,'tid':_0x3b0103[_0xda0aa2(0x3a9)],'content':'raw\x20content'},(_0x490613,_0x980b43)=>{const _0x591b00=_0xda0aa2;assert['ifError'](_0x490613),socketPosts[_0x591b00(0x246)]({'uid':_0x343c3d},{'pid':_0x980b43['pid'],'tid':_0x3b0103['tid'],'topicPostSort':_0x591b00(0x466)},(_0x472b41,_0x4c3a93)=>{const _0x1ce348=_0x591b00;assert[_0x1ce348(0x137)](_0x472b41),assert[_0x1ce348(0x229)](_0x4c3a93,0x1),_0x3fcdca();});});});}),_0x45fca7['BzDOq'](describe,'filterPidsByCid',()=>{const _0x204332=_0x30a30a,_0x480013={'kGIQV':function(_0x277c03){const _0x4f4c75=_0x774c;return _0x45fca7[_0x4f4c75(0x111)](_0x277c03);},'EtmFC':'gCWEM','zMdvE':'[[error:no-privileges]]','zHgki':_0x204332(0x3ae),'wctVZ':function(_0x5550dd,_0x2d2197){const _0x3a34c2=_0x204332;return _0x45fca7[_0x3a34c2(0x255)](_0x5550dd,_0x2d2197);},'XQehI':_0x45fca7[_0x204332(0x225)]};_0x45fca7[_0x204332(0x331)](Function,_0x45fca7[_0x204332(0x274)])(),it(_0x204332(0x1b9),_0x35ded0=>{posts['filterPidsByCid']([0x1,0x2,0x3],null,(_0xc8ee88,_0x5de39e)=>{const _0x4ede2a=_0x774c;assert[_0x4ede2a(0x137)](_0xc8ee88),assert[_0x4ede2a(0x118)]([0x1,0x2,0x3],_0x5de39e),_0x35ded0();});}),it(_0x204332(0x442),_0x1f079b=>{const _0x427bad=_0x204332,_0x48f0e8={'ZuUrM':function(_0x5c0c2e){return _0x5c0c2e();},'ziaEw':_0x427bad(0x338)};_0x427bad(0x226)===_0x45fca7[_0x427bad(0x436)]?(_0x573869[_0x427bad(0x137)](_0x35df72),_0x16fb4f[_0x427bad(0x425)](_0x318746[_0x427bad(0x48a)],0x5),_0x176493[_0x427bad(0x425)](![],_0x5b55e5['includes'](_0x427bad(0x1f9))),_0x480013[_0x427bad(0x381)](_0x1eb716)):posts[_0x427bad(0x148)]([_0x323d93[_0x427bad(0x289)],0x64,0x65],_0x17f2dd,(_0x184183,_0x302750)=>{const _0x1a05e3=_0x427bad;if(_0x480013[_0x1a05e3(0x157)]!==_0x480013[_0x1a05e3(0x157)]){const _0x4eed26={'zaEnh':function(_0x524236){const _0x238159=_0x1a05e3;return _0x48f0e8[_0x238159(0x1a0)](_0x524236);}};_0xa2311b[_0x1a05e3(0x366)][_0x1a05e3(0x449)]=0x1,_0x2e92c1[_0x1a05e3(0x1d5)]({'username':_0x48f0e8['ziaEw']},(_0x3d508e,_0x4f821d)=>{const _0x32740d=_0x1a05e3;_0x3a4c9b[_0x32740d(0x137)](_0x3d508e),_0x79209b=_0x4f821d,_0x4eed26[_0x32740d(0x4b7)](_0x2e0f8d);});}else assert['ifError'](_0x184183),assert[_0x1a05e3(0x118)]([_0x323d93[_0x1a05e3(0x289)]],_0x302750),_0x1f079b();});}),_0x45fca7[_0x204332(0x282)](it,'should\x20filter\x20pids\x20by\x20multiple\x20cids',_0x1c1c91=>{const _0x21328f=_0x204332,_0x4f491f={'AzlTu':function(_0xb016af){return _0xb016af();}};posts[_0x21328f(0x148)]([_0x323d93[_0x21328f(0x289)],0x64,0x65],[_0x17f2dd,0x2,0x3],(_0x47ee39,_0x44a811)=>{const _0x435d4f=_0x21328f;assert[_0x435d4f(0x137)](_0x47ee39),assert[_0x435d4f(0x118)]([_0x323d93[_0x435d4f(0x289)]],_0x44a811),_0x4f491f[_0x435d4f(0x1db)](_0x1c1c91);});}),_0x45fca7[_0x204332(0x278)](it,_0x45fca7[_0x204332(0x3d1)],_0x5c61b8=>{const _0x456c39=_0x204332,_0x89d16={'ZJJsu':_0x480013[_0x456c39(0x41f)],'JQWbZ':_0x480013[_0x456c39(0x129)]};if(_0x480013[_0x456c39(0x457)](_0x456c39(0x1ca),_0x480013[_0x456c39(0x45e)])){const _0x184fa8={'NRGMj':_0x456c39(0x2ee)};_0x4c4d4c[_0x456c39(0x229)](_0x1468eb[_0x456c39(0x273)],_0x89d16['ZJJsu']),_0x364215[_0x456c39(0x21e)]({'uid':_0xa78594},{'pid':_0x17dce4[_0x456c39(0x289)],'room_id':_0x89d16[_0x456c39(0x42b)]},_0x21efa9=>{const _0x555b54=_0x456c39;_0x2d6cb3[_0x555b54(0x229)](_0x21efa9[_0x555b54(0x273)],_0x184fa8[_0x555b54(0x3a1)]),_0x57929d[_0x555b54(0x21c)][_0x555b54(0x189)]([_0x555b54(0x1a4),_0x555b54(0x3b9)],_0x5af752,_0x555b54(0x471),_0x398f6d=>{const _0xe760eb=_0x555b54;_0x427ced[_0xe760eb(0x137)](_0x398f6d),_0x10e6e0();});});}else posts[_0x456c39(0x148)]([_0x323d93[_0x456c39(0x289)],0x64,0x65],[_0x17f2dd],(_0x3bd453,_0x44bff2)=>{const _0x38d80b=_0x456c39;if(_0x38d80b(0x1d6)!==_0x38d80b(0x339))assert['ifError'](_0x3bd453),assert[_0x38d80b(0x118)]([_0x323d93[_0x38d80b(0x289)]],_0x44bff2),_0x5c61b8();else{const _0xee8b3b={'JyhNR':function(_0x2ad91e){return _0x2ad91e();}};_0x45a92f=_0x491bad['topicData'][_0x38d80b(0x3a9)],_0x198f1d['reply']({'uid':_0x38571e,'tid':_0x50174c,'timestamp':_0x583e11[_0x38d80b(0x253)](),'content':_0x38d80b(0x21b)},(_0x52610b,_0x5b2729)=>{const _0x810171=_0x38d80b;_0x483841[_0x810171(0x137)](_0x52610b),_0x2292f7=_0x5b2729[_0x810171(0x289)],_0xee8b3b[_0x810171(0x39d)](_0x11e929);});}});});}),_0x45fca7['yEvrp'](it,_0x30a30a(0x40b),_0x336fa4=>{const _0x1041da=_0x30a30a,_0x11ca95={'gyTWn':_0x1041da(0x2ee)};_0x1041da(0xea)===_0x45fca7['nudHk']?_0x584899[_0x1041da(0x42f)]({'uid':_0x5cafbd},{'pid':_0x523918[_0x1041da(0x289)],'room_id':_0x1041da(0x3c7)+_0x5a2d07[_0x1041da(0x3a9)]},(_0x18c8a4,_0x5a86e4)=>{const _0x4c3700=_0x1041da,_0x11d1c0={'QyGpv':function(_0xdd5953){return _0xdd5953();}};_0x15141f[_0x4c3700(0x137)](_0x18c8a4),_0x2a30af[_0x4c3700(0x229)](_0x5a86e4['isBookmarked'],![]),_0x268e08[_0x4c3700(0x204)]([_0x13e408['pid']],_0x58ed5f,(_0x4a19f9,_0x5950c1)=>{const _0x199747=_0x4c3700;_0x3d5230['ifError'](_0x4a19f9),_0x22fa45['equal'](_0x5950c1[0x0],![]),_0x11d1c0[_0x199747(0x422)](_0xf52b5);});}):user['isReadyToPost'](0x1425033,0x1,_0x1627d5=>{const _0x240ade=_0x1041da;_0x45fca7[_0x240ade(0xd4)](_0x240ade(0x126),_0x240ade(0x126))?(_0x3bdae3[_0x240ade(0x229)](_0x588477[_0x240ade(0x273)],_0x11ca95[_0x240ade(0x3ff)]),_0x106f7b()):(assert[_0x240ade(0x229)](_0x1627d5[_0x240ade(0x273)],_0x240ade(0x2a6)),_0x336fa4());});}),describe(_0x45fca7[_0x30a30a(0x198)],()=>{const _0x760165=_0x30a30a,_0x3c49b1={'TtkuR':_0x760165(0x10f),'ZXNYa':_0x45fca7[_0x760165(0xee)],'mxKPZ':_0x760165(0x13b),'UwfRN':function(_0x291bdb,_0x21dd6c){const _0x8839ae=_0x760165;return _0x45fca7[_0x8839ae(0x237)](_0x291bdb,_0x21dd6c);},'CxVSX':_0x760165(0x3ba),'ylYAT':_0x45fca7[_0x760165(0x32d)],'ttDpl':function(_0x442435,_0x5eb75e,_0x5efc0b,_0x2202e0){return _0x442435(_0x5eb75e,_0x5efc0b,_0x2202e0);},'dSrDA':_0x45fca7[_0x760165(0x427)],'xZUEO':'globalmod','JbMUF':function(_0x4a0030,_0x33c265,_0x2ebd72,_0x107ed3){return _0x45fca7['igRTt'](_0x4a0030,_0x33c265,_0x2ebd72,_0x107ed3);},'LBRAU':function(_0x269d97){return _0x269d97();},'ilkuo':_0x45fca7['mKrGQ'],'kCyVf':_0x760165(0x10c),'Jezxw':_0x45fca7['fhzQY'],'BqGuG':_0x45fca7['cooZw'],'upVMg':function(_0x554a44){const _0x2c33fe=_0x760165;return _0x45fca7[_0x2c33fe(0x187)](_0x554a44);},'lNrbP':_0x45fca7[_0x760165(0x119)],'cpPTQ':_0x760165(0x3df),'TwfCo':'topic\x20A','vzHSP':_0x760165(0x3e9),'kaGcb':_0x45fca7[_0x760165(0x15c)]};let _0x11da2a,_0x14c580,_0x20207f,_0x3afe38;_0x45fca7['LVwRD'](before,_0x1cd528=>{const _0x2eae51=_0x760165,_0x34b2a7={'hGEJU':function(_0xe8a07a){return _0xe8a07a();}};meta['config'][_0x2eae51(0x449)]=0x1,user[_0x2eae51(0x1d5)]({'username':_0x45fca7[_0x2eae51(0x193)]},(_0x489fb1,_0x5d28a8)=>{const _0x4f628f=_0x2eae51;assert[_0x4f628f(0x137)](_0x489fb1),_0x11da2a=_0x5d28a8,_0x34b2a7[_0x4f628f(0x11a)](_0x1cd528);});}),_0x45fca7['StVDx'](after,_0x47e83a=>{const _0x20cdf7=_0x760165;meta['config'][_0x20cdf7(0x449)]=0x0,meta[_0x20cdf7(0x366)][_0x20cdf7(0x28a)]=[],_0x47e83a();}),it(_0x45fca7[_0x760165(0xff)],_0x243212=>{const _0x2214aa=_0x760165,_0x47efa0={'GMBem':_0x45fca7['GaebM'],'nGdWZ':'[[success:post-queued]]'};socketTopics['post']({'uid':_0x11da2a},{'title':_0x45fca7['TENjV'],'content':_0x45fca7[_0x2214aa(0x374)],'cid':_0x17f2dd},(_0x4a8656,_0x348d96)=>{const _0x42f0f5=_0x2214aa,_0x2e7e34=_0x47efa0[_0x42f0f5(0x402)][_0x42f0f5(0x2bc)]('|');let _0x35cc4d=0x0;while(!![]){switch(_0x2e7e34[_0x35cc4d++]){case'0':_0x20207f=_0x348d96['id'];continue;case'1':_0x243212();continue;case'2':assert[_0x42f0f5(0x425)](_0x348d96[_0x42f0f5(0x487)],!![]);continue;case'3':assert[_0x42f0f5(0x137)](_0x4a8656);continue;case'4':assert[_0x42f0f5(0x229)](_0x348d96['message'],_0x47efa0[_0x42f0f5(0x243)]);continue;}break;}});}),_0x45fca7[_0x760165(0x195)](it,_0x760165(0x1cd),_0xb4a66d=>{const _0x485902=_0x760165;socketPosts[_0x485902(0x2f8)]({'uid':_0x11da2a},{'content':_0x3c49b1[_0x485902(0x17f)],'tid':_0x3b0103[_0x485902(0x3a9)]},(_0x292631,_0x2d26df)=>{const _0xbd3c0a=_0x485902,_0x2ae9eb=_0x3c49b1[_0xbd3c0a(0x1bf)][_0xbd3c0a(0x2bc)]('|');let _0x494730=0x0;while(!![]){switch(_0x2ae9eb[_0x494730++]){case'0':assert[_0xbd3c0a(0x425)](_0x2d26df['queued'],!![]);continue;case'1':assert[_0xbd3c0a(0x229)](_0x2d26df[_0xbd3c0a(0x273)],_0xbd3c0a(0x2e0));continue;case'2':assert['ifError'](_0x292631);continue;case'3':_0xb4a66d();continue;case'4':_0x14c580=_0x2d26df['id'];continue;}break;}});}),_0x45fca7[_0x760165(0x20b)](it,_0x45fca7[_0x760165(0x156)],_0x38df71=>{const _0x4a643b=_0x760165,_0x57abf2={'Wkimh':function(_0x26bbc0,_0x37e45b){const _0x5d6a2c=_0x774c;return _0x3c49b1[_0x5d6a2c(0x306)](_0x26bbc0,_0x37e45b);},'KNeFD':_0x3c49b1[_0x4a643b(0x1dd)],'CotoE':'0|5|4|2|1|3','mMPuJ':_0x4a643b(0x2f8),'YZzHr':_0x3c49b1[_0x4a643b(0x260)],'zZUNi':function(_0xe54aa2,_0x1f10f1,_0x4b2101,_0x1ef74b){const _0x34d09a=_0x4a643b;return _0x3c49b1[_0x34d09a(0x141)](_0xe54aa2,_0x1f10f1,_0x4b2101,_0x1ef74b);}};_0x3c49b1['dSrDA']!==_0x3c49b1[_0x4a643b(0x454)]?_0x399fa5['getPidIndex']({'uid':_0x2d64f6},{'pid':_0x4a35ff,'tid':_0x544b95['tid'],'topicPostSort':_0x3c49b1[_0x4a643b(0x19f)]},(_0x10cec4,_0x1492e3)=>{const _0x25e636=_0x4a643b;_0x55b687[_0x25e636(0x137)](_0x10cec4),_0x7f8fcf[_0x25e636(0x229)](_0x1492e3,0x4),_0x461085();}):helpers[_0x4a643b(0x281)](_0x3c49b1[_0x4a643b(0x389)],_0x4a643b(0x1f4),(_0x3841a8,_0x12bbca)=>{const _0x2cffa2=_0x4a643b;_0x3afe38=_0x12bbca,assert[_0x2cffa2(0x137)](_0x3841a8),_0x57abf2[_0x2cffa2(0x34a)](request,nconf[_0x2cffa2(0x37d)]('url')+_0x2cffa2(0x2cc),{'jar':_0x3afe38,'json':!![]},(_0x354d73,_0x1b5f0c,_0xfd8782)=>{const _0x3af5fa=_0x2cffa2;if(_0x57abf2[_0x3af5fa(0x3c6)](_0x3af5fa(0x24f),_0x57abf2['KNeFD'])){const _0x279d23=_0x33762f[_0x3af5fa(0x366)]['minimumTagsPerTopic'];_0xe0cbb9[_0x3af5fa(0x366)][_0x3af5fa(0x1e4)]=0x1,_0x177764['edit']({'uid':_0x5313b8},{'pid':_0x1584c8,'content':'edited\x20post\x20content','tags':[]},_0x4ba2a0=>{const _0x288124=_0x3af5fa;_0x7c2303[_0x288124(0x229)](_0x4ba2a0[_0x288124(0x273)],_0x288124(0x348)+_0x3d0a4d[_0x288124(0x366)][_0x288124(0x1e4)]+']]'),_0x3dadf0[_0x288124(0x366)]['minimumTagsPerTopic']=_0x279d23,_0x45ee7a();});}else{const _0x39a983=_0x57abf2[_0x3af5fa(0x1f2)][_0x3af5fa(0x2bc)]('|');let _0x2d98aa=0x0;while(!![]){switch(_0x39a983[_0x2d98aa++]){case'0':assert[_0x3af5fa(0x137)](_0x354d73);continue;case'1':assert[_0x3af5fa(0x229)](_0xfd8782[_0x3af5fa(0x3b7)][0x1][_0x3af5fa(0x3d7)][_0x3af5fa(0x291)],_0x3af5fa(0x2aa));continue;case'2':assert[_0x3af5fa(0x229)](_0xfd8782[_0x3af5fa(0x3b7)][0x1][_0x3af5fa(0x106)],_0x57abf2[_0x3af5fa(0x2c1)]);continue;case'3':_0x38df71();continue;case'4':assert[_0x3af5fa(0x229)](_0xfd8782[_0x3af5fa(0x3b7)][0x0][_0x3af5fa(0x3d7)][_0x3af5fa(0x291)],_0x3af5fa(0x42e));continue;case'5':assert[_0x3af5fa(0x229)](_0xfd8782[_0x3af5fa(0x3b7)][0x0]['type'],_0x57abf2[_0x3af5fa(0x13e)]);continue;}break;}}});});}),it(_0x760165(0x1d0),_0xdd8b9b=>{const _0x3ca187=_0x760165,_0x7de34e={'wzQYm':_0x3ca187(0x1ad),'zgQbN':function(_0x151bce){const _0x5d5855=_0x3ca187;return _0x45fca7[_0x5d5855(0x111)](_0x151bce);}};socketPosts['editQueuedContent']({'uid':_0x3618f6},null,_0x540f5f=>{const _0x43b6d=_0x3ca187;assert[_0x43b6d(0x229)](_0x540f5f[_0x43b6d(0x273)],_0x7de34e[_0x43b6d(0x2f9)]),_0x7de34e[_0x43b6d(0x14a)](_0xdd8b9b);});}),it(_0x45fca7[_0x760165(0x303)],_0x4e7582=>{const _0x34ac48=_0x760165,_0x58b5b1={'FmNcK':_0x34ac48(0x2f8)};socketPosts[_0x34ac48(0x1fe)]({'uid':_0x3618f6},{'id':_0x14c580,'content':_0x45fca7['tSVoD']},_0x1b85dc=>{const _0x14ca69=_0x34ac48;_0x14ca69(0x25d)!==_0x14ca69(0x25d)?(_0x2f51f4['ifError'](_0x732a69),_0x8e882e['equal'](_0x305ecb[_0x14ca69(0x291)],_0x14ca69(0x38f)),_0x32e687()):(assert[_0x14ca69(0x137)](_0x1b85dc),_0x3c49b1[_0x14ca69(0x263)](request,nconf[_0x14ca69(0x37d)](_0x14ca69(0x495))+_0x14ca69(0x2cc),{'jar':_0x3afe38,'json':!![]},(_0x540e1c,_0x3657de,_0x48e6d5)=>{const _0x4e3c28=_0x14ca69;assert[_0x4e3c28(0x137)](_0x540e1c),assert[_0x4e3c28(0x229)](_0x48e6d5[_0x4e3c28(0x3b7)][0x1][_0x4e3c28(0x106)],_0x58b5b1[_0x4e3c28(0x467)]),assert[_0x4e3c28(0x229)](_0x48e6d5['posts'][0x1][_0x4e3c28(0x3d7)][_0x4e3c28(0x291)],_0x4e3c28(0x2de)),_0x4e7582();}));});}),it(_0x760165(0x36a),_0x2f7255=>{const _0x4d6d57=_0x760165,_0x434a60={'DnrTS':function(_0xe4ee57){return _0xe4ee57();}};if(_0x45fca7[_0x4d6d57(0x395)]===_0x45fca7[_0x4d6d57(0x472)]){const _0x189d2b={'WUqyK':function(_0x423203){const _0x557947=_0x4d6d57;return _0x434a60[_0x557947(0x2e4)](_0x423203);}},_0xc20c79=_0x1f72ea=>_0x26e9ea[_0x4d6d57(0x38c)](_0x4d6d57(0x336))['update'](_0x1f72ea)[_0x4d6d57(0x13c)](_0x4d6d57(0x404));_0xe595ae[_0x4d6d57(0x4ad)]([_0x321db9['apply'](_0x5329a6[_0x4d6d57(0x316)][_0x4d6d57(0x357)],_0x52bfd2,[_0x4d6d57(0x261)]),function(_0x9e529f){const _0x18b5ca=_0x4d6d57;_0x17dc08[_0x18b5ca(0x166)](_0x18b5ca(0xf5)+_0xc20c79(_0x18b5ca(0x261))+_0x18b5ca(0x4b6),0x0,-0x1,_0x9e529f);}],(_0x3fb9c6,_0x3ef433)=>{const _0x521c84=_0x4d6d57;_0x27c229[_0x521c84(0x137)](_0x3fb9c6),_0x3a8b3f['strictEqual'](!![],_0x2eff13[_0x521c84(0x373)](_0x3ef433)),_0x40327a[_0x521c84(0x425)](!![],_0x3ef433['length']>0x0),_0x6eb297[_0x521c84(0x229)](_0x217c0f,_0x3ef433[0x0]),_0x189d2b[_0x521c84(0x199)](_0x320a99);});}else socketPosts['editQueuedContent']({'uid':_0x3618f6},{'id':_0x20207f,'title':_0x4d6d57(0x27e)},_0x28f797=>{const _0x38e83a=_0x4d6d57,_0x3f52c1={'OOxcH':_0x3c49b1[_0x38e83a(0x260)],'YcnSQ':function(_0x100efc){return _0x100efc();}};assert[_0x38e83a(0x137)](_0x28f797),request(nconf[_0x38e83a(0x37d)](_0x38e83a(0x495))+_0x38e83a(0x2cc),{'jar':_0x3afe38,'json':!![]},(_0x470134,_0x5d5f7f,_0x558018)=>{const _0x5f2bf9=_0x38e83a;assert['ifError'](_0x470134),assert['equal'](_0x558018[_0x5f2bf9(0x3b7)][0x0]['type'],_0x3f52c1['OOxcH']),assert['equal'](_0x558018[_0x5f2bf9(0x3b7)][0x0]['data'][_0x5f2bf9(0x2fa)],'new\x20topic\x20title'),_0x3f52c1[_0x5f2bf9(0x1f3)](_0x2f7255);});});}),_0x45fca7[_0x760165(0x2e3)](it,_0x760165(0x398),_0xe303a8=>{const _0x54d291=_0x760165,_0x2d2b84={'eFncc':function(_0x19a520){return _0x19a520();},'dKHyi':function(_0x15b480,_0x29b6f9){return _0x15b480!==_0x29b6f9;},'BCnXW':_0x45fca7['aXpCh'],'YQryd':'topic'};socketPosts[_0x54d291(0x1fe)]({'uid':_0x3618f6},{'id':_0x20207f,'cid':0x2},_0x4ed9c8=>{const _0x1c9a42=_0x54d291,_0x367683={'LiWaq':function(_0x29b46c){return _0x3c49b1['LBRAU'](_0x29b46c);}};_0x3c49b1['ilkuo']!==_0x1c9a42(0x3a8)?_0x453b92[_0x1c9a42(0x110)]([function(_0x5254eb){const _0x430cae=_0x1c9a42;_0x1ab12d[_0x430cae(0x497)]({'pid':_0x165ce7,'uid':0x1,'content':_0x430cae(0x347)},_0x5254eb);},_0x1256a1[_0x1c9a42(0x182)](_0x1e6b5[_0x1c9a42(0x316)]['sync'],_0x392233)],_0x3ce785=>{const _0x5f087e=_0x1c9a42,_0x112f49={'uwTLE':function(_0x14d0bf){const _0x5ae11d=_0x774c;return _0x367683[_0x5ae11d(0x1ea)](_0x14d0bf);}};_0xe06894[_0x5f087e(0x137)](_0x3ce785),_0x2fbefc[_0x5f087e(0x407)]('post:'+_0x5ef539+_0x5f087e(0x191),(_0x51cede,_0xc7a8cf)=>{const _0x1eea48=_0x5f087e;_0x1161bc[_0x1eea48(0x137)](_0x51cede),_0x5557eb[_0x1eea48(0x425)](0x1,_0xc7a8cf),_0x112f49[_0x1eea48(0x444)](_0x10b826);});}):(assert[_0x1c9a42(0x137)](_0x4ed9c8),request(nconf['get'](_0x1c9a42(0x495))+'/api/post-queue',{'jar':_0x3afe38,'json':!![]},(_0x2192ca,_0x79bfcd,_0x4da610)=>{const _0x36a75b=_0x1c9a42,_0x31321a={'itJhd':function(_0x547483){const _0x122932=_0x774c;return _0x2d2b84[_0x122932(0x3c3)](_0x547483);},'fHDkv':function(_0x16a3dd){return _0x16a3dd();}};_0x2d2b84[_0x36a75b(0x387)](_0x2d2b84[_0x36a75b(0x1d1)],_0x36a75b(0x113))?(assert[_0x36a75b(0x137)](_0x2192ca),assert['equal'](_0x4da610[_0x36a75b(0x3b7)][0x0][_0x36a75b(0x106)],_0x2d2b84[_0x36a75b(0x30a)]),assert['equal'](_0x4da610[_0x36a75b(0x3b7)][0x0]['data'][_0x36a75b(0x343)],0x2),socketPosts[_0x36a75b(0x1fe)]({'uid':_0x3618f6},{'id':_0x20207f,'cid':_0x17f2dd},_0x11255b=>{const _0x209e27=_0x36a75b;assert[_0x209e27(0x137)](_0x11255b),_0x31321a[_0x209e27(0x3bb)](_0xe303a8);})):(_0x38a5ca['equal'](_0x387dd2[_0x36a75b(0x273)],_0x36a75b(0x2ee)),_0x31321a[_0x36a75b(0x1cc)](_0x3229a8));}));});}),_0x45fca7[_0x760165(0x282)](it,_0x45fca7[_0x760165(0x3d5)],_0x39db98=>{const _0x4989d7=_0x760165,_0x347210={'Jravz':_0x4989d7(0x2ee)};socketPosts[_0x4989d7(0xf7)]({'uid':_0x11da2a},{'id':_0x14c580},_0x396780=>{const _0x173484=_0x4989d7;assert['equal'](_0x396780[_0x173484(0x273)],_0x347210[_0x173484(0x122)]),_0x39db98();});}),_0x45fca7[_0x760165(0x3bf)](it,_0x760165(0x47d),_0x41ac37=>{const _0x12715b=_0x760165,_0x5e1f13={'BNUxA':function(_0x15bc68,_0x567013){return _0x15bc68!==_0x567013;},'aJvXl':_0x12715b(0x41b),'WLbCb':_0x45fca7[_0x12715b(0x3f9)]};_0x45fca7[_0x12715b(0x10d)]===_0x12715b(0x393)?(_0xab7cc7=_0x2c05e2,_0x21ec95[_0x12715b(0xf7)]({'uid':_0x1b33cf},{'id':_0x725d77[0x0]},_0xcb7252)):socketPosts[_0x12715b(0xf7)]({'uid':_0x11da2a},{'id':0x1e0f3},_0x35b013=>{const _0x4902ed=_0x12715b;_0x5e1f13[_0x4902ed(0x20e)](_0x5e1f13[_0x4902ed(0x40d)],_0x5e1f13[_0x4902ed(0x40d)])?_0x319ea9[_0x4902ed(0x497)]({'pid':_0x52f655,'uid':0x1,'content':_0x4902ed(0x347)},_0x8d82d4):(assert['equal'](_0x35b013[_0x4902ed(0x273)],_0x5e1f13[_0x4902ed(0x3e0)]),_0x41ac37());});}),it(_0x45fca7[_0x760165(0x491)],_0x2d083e=>{const _0x2ca6d2=_0x760165,_0x277c57={'fwHNy':function(_0x22903a,_0x2e9ec6){const _0x5249be=_0x774c;return _0x45fca7[_0x5249be(0x315)](_0x22903a,_0x2e9ec6);},'XEAyc':function(_0xc2086f){return _0xc2086f();},'zJzHS':function(_0x2b63cd){const _0x387538=_0x774c;return _0x45fca7[_0x387538(0x168)](_0x2b63cd);},'WJiEZ':_0x2ca6d2(0x132)};if(_0x45fca7[_0x2ca6d2(0x19c)]!==_0x45fca7[_0x2ca6d2(0x46a)]){let _0xe8c716;async[_0x2ca6d2(0x4ad)]([function(_0x1cf4cb){const _0x46a9a3=_0x2ca6d2;db['getSortedSetRange'](_0x3c49b1[_0x46a9a3(0x1bc)],0x0,-0x1,_0x1cf4cb);},function(_0x154ed2,_0x480dc0){const _0x56b747=_0x2ca6d2;_0xe8c716=_0x154ed2,socketPosts[_0x56b747(0xf7)]({'uid':_0x3618f6},{'id':_0xe8c716[0x0]},_0x480dc0);},function(_0xf2a7f0){const _0x3e2443=_0x2ca6d2;_0x3c49b1[_0x3e2443(0x146)]!==_0x3c49b1[_0x3e2443(0x146)]?(_0x3cc847[_0x3e2443(0x137)](_0x1f84ff),_0x4d6a05[_0x3e2443(0x425)](!![],_0x3ba5ec[_0x3e2443(0x373)](_0x1756da)),_0x3a4061[_0x3e2443(0x425)](!![],_0x277c57[_0x3e2443(0x340)](_0x205f28[_0x3e2443(0x48a)],0x0)),_0xd6b094[_0x3e2443(0x229)](_0x5a38a2,_0x2c69c9[0x0]),_0x277c57[_0x3e2443(0x473)](_0x1f7271)):socketPosts[_0x3e2443(0xf7)]({'uid':_0x3618f6},{'id':_0xe8c716[0x1]},_0xf2a7f0);}],_0x2d083e);}else{const _0x250e78={'iZZfC':function(_0x649929){return _0x277c57['zJzHS'](_0x649929);}};_0x5d5dbb['waterfall']([_0x3f1c62['apply'](_0x12b7d7[_0x2ca6d2(0x497)],{'pid':_0x1b8b22[_0x2ca6d2(0x289)],'uid':0x1,'content':_0x277c57[_0x2ca6d2(0x440)]}),function(_0x30ec74,_0x393ded){const _0x86bdaf=_0x2ca6d2;_0x335989['uploads'][_0x86bdaf(0x17e)](_0xd42ecd[_0x86bdaf(0x289)],_0x393ded);}],(_0x3bfc91,_0x627824)=>{const _0xfe694a=_0x2ca6d2;_0x35c5e1[_0xfe694a(0x137)](_0x3bfc91),_0x14f78b[_0xfe694a(0x425)](!![],_0x455505[_0xfe694a(0x373)](_0x627824)),_0x159090[_0xfe694a(0x425)](0x0,_0x627824[_0xfe694a(0x48a)]),_0x250e78['iZZfC'](_0x536081);});}}),it(_0x760165(0x3d2),_0x4a9207=>{const _0x38c98b=_0x760165,_0x3ab789={'lCeiQ':function(_0x4a38ad){return _0x4a38ad();}};socketPosts['reject']({'uid':_0x3618f6},{'id':_0x3c49b1[_0x38c98b(0x1b6)]},_0x2af3d8=>{const _0x2b5a84=_0x38c98b;assert['equal'](_0x2af3d8[_0x2b5a84(0x273)],_0x2b5a84(0x2ee)),_0x3ab789[_0x2b5a84(0x120)](_0x4a9207);});}),_0x45fca7['JDtXR'](it,_0x760165(0x448),async()=>{const _0x23ea26=_0x760165,_0x474544=meta['config'][_0x23ea26(0x28a)];meta['config'][_0x23ea26(0x28a)]=[_0x45fca7[_0x23ea26(0x1b3)]];const _0x2f4784=await user[_0x23ea26(0x1d5)]({'username':_0x45fca7['CBbgF']}),_0x32d8a3=await socketTopics[_0x23ea26(0x363)]({'uid':_0x2f4784,'emit':()=>{}},{'title':_0x45fca7['UVPei'],'content':_0x23ea26(0x276),'cid':_0x17f2dd});assert[_0x23ea26(0x425)](_0x32d8a3['title'],_0x45fca7['UVPei']),meta[_0x23ea26(0x366)][_0x23ea26(0x28a)]=_0x474544;}),_0x45fca7[_0x760165(0x227)](it,_0x45fca7['DJotG'],async()=>{const _0x45c6eb=_0x760165;if(_0x3c49b1[_0x45c6eb(0x362)]!==_0x3c49b1[_0x45c6eb(0x362)])_0x563051[_0x45c6eb(0x137)](_0x277c8c),_0x3c49b1[_0x45c6eb(0x29d)](_0x254f19);else{const _0x53068c=await user[_0x45c6eb(0x1d5)]({'username':_0x3c49b1[_0x45c6eb(0x2d3)]}),_0x56d1a3=await socketTopics[_0x45c6eb(0x363)]({'uid':_0x3618f6},{'title':_0x3c49b1[_0x45c6eb(0x46f)],'content':_0x3c49b1[_0x45c6eb(0xd7)],'cid':_0x17f2dd}),_0x2a5cce=await socketTopics['post']({'uid':_0x3618f6},{'title':_0x45c6eb(0x18d),'content':_0x45c6eb(0x298),'cid':_0x17f2dd}),_0x14be3f=await socketPosts['reply']({'uid':_0x53068c},{'content':'the\x20moved\x20queued\x20post','tid':_0x56d1a3[_0x45c6eb(0x3a9)]});await topics['merge']([_0x56d1a3[_0x45c6eb(0x3a9)],_0x2a5cce['tid']],_0x3618f6,{'mainTid':_0x2a5cce[_0x45c6eb(0x3a9)]});let _0x15b73f=await posts[_0x45c6eb(0x131)]();_0x15b73f=_0x15b73f['filter'](_0x106b87=>parseInt(_0x106b87[_0x45c6eb(0x3d7)]['tid'],0xa)===parseInt(_0x2a5cce['tid'],0xa)),assert[_0x45c6eb(0x425)](_0x15b73f[_0x45c6eb(0x48a)],0x1),assert[_0x45c6eb(0x425)](_0x15b73f[0x0][_0x45c6eb(0x3d7)][_0x45c6eb(0x291)],_0x3c49b1[_0x45c6eb(0x36e)]),assert[_0x45c6eb(0x425)](_0x15b73f[0x0][_0x45c6eb(0x3d7)][_0x45c6eb(0x3a9)],_0x2a5cce['tid']);}});}),_0x45fca7['gCYlQ'](describe,_0x45fca7['zIFEn'],()=>{const _0x3fd2bb=_0x30a30a,_0xae39f1={'LDBYJ':'1|2|4|3|0','UMYUB':function(_0x3722b7){return _0x3722b7();},'qQDVJ':function(_0x1c4479,_0x209abc){return _0x1c4479===_0x209abc;},'gyfty':_0x3fd2bb(0x3cb),'BFDGw':'shazam.jpg','kaCYk':'return\x20Object.keys({a:1});','JFXbm':function(_0x3f7a3f,_0xf1b534,_0x2cc9fa){const _0x1ad401=_0x3fd2bb;return _0x45fca7[_0x1ad401(0x16a)](_0x3f7a3f,_0xf1b534,_0x2cc9fa);},'enzRW':_0x45fca7[_0x3fd2bb(0x385)],'XXbSM':_0x45fca7[_0x3fd2bb(0x317)],'NCoLX':_0x3fd2bb(0x459),'Ihzky':_0x45fca7[_0x3fd2bb(0xe1)],'lMssL':_0x45fca7[_0x3fd2bb(0x484)],'CjbxS':_0x45fca7[_0x3fd2bb(0x264)],'gonzD':function(_0x1f1e4a,_0x5b8c12){return _0x1f1e4a(_0x5b8c12);},'wZjUt':function(_0x107746,_0x4bf7d1){const _0x215242=_0x3fd2bb;return _0x45fca7[_0x215242(0x36d)](_0x107746,_0x4bf7d1);},'sejaD':_0x45fca7[_0x3fd2bb(0x3c5)],'bkUKE':_0x3fd2bb(0x3eb),'oEkrw':'should\x20remove\x20all\x20images\x20from\x20a\x20post\x27s\x20maintained\x20list\x20of\x20uploads','LamiX':function(_0x423d73,_0x5d7398){const _0x17d33b=_0x3fd2bb;return _0x45fca7[_0x17d33b(0x3d6)](_0x423d73,_0x5d7398);},'FylPN':_0x3fd2bb(0x31f),'qgEYp':_0x45fca7['gcMUp']};if(_0x45fca7[_0x3fd2bb(0x164)](_0x3fd2bb(0x48e),_0x3fd2bb(0x14d))){const _0x2f36a3=_0xae39f1[_0x3fd2bb(0x284)][_0x3fd2bb(0x2bc)]('|');let _0x50b145=0x0;while(!![]){switch(_0x2f36a3[_0x50b145++]){case'0':_0xae39f1[_0x3fd2bb(0x1ae)](_0x10d268);continue;case'1':_0x2be860[_0x3fd2bb(0x137)](_0x848fc6);continue;case'2':_0x5790d3['strictEqual'](0x4,_0x19ebb2[_0x3fd2bb(0x48a)]);continue;case'3':_0x2658d1[_0x3fd2bb(0x425)](!![],_0x2cfa3b[_0x3fd2bb(0x12f)](_0x3fd2bb(0x44a)));continue;case'4':_0x53db95[_0x3fd2bb(0x425)](!![],_0x58b2b2[_0x3fd2bb(0x12f)](_0x3fd2bb(0x3b8)));continue;}break;}}else{let _0xd08c81,_0xa1b5f6;before(async()=>{const _0x436810=_0x3fd2bb;if(_0x45fca7[_0x436810(0x177)](_0x45fca7[_0x436810(0x3d0)],_0x45fca7[_0x436810(0x3d0)])){[_0x436810(0x1ef),_0x45fca7[_0x436810(0x3cc)],'whoa.gif',_0x436810(0x3b8),_0x45fca7[_0x436810(0x264)],_0x45fca7[_0x436810(0x443)]][_0x436810(0x295)](_0x37df94=>fs[_0x436810(0x329)](fs[_0x436810(0x34e)](path[_0x436810(0x318)](nconf[_0x436810(0x37d)](_0x436810(0x190)),'files',_0x37df94),'w')));const _0x2cf7ca=await topics['post']({'uid':0x1,'cid':0x1,'title':_0x45fca7[_0x436810(0x1c4)],'content':_0x436810(0x412)});_0xd08c81=_0x2cf7ca[_0x436810(0xd6)][_0x436810(0x289)];const _0x45b7d9=await topics[_0x436810(0x363)]({'uid':0x1,'cid':0x1,'title':'topic\x20with\x20some\x20images,\x20to\x20be\x20purged','content':_0x45fca7[_0x436810(0x302)]});_0xa1b5f6=_0x45b7d9['postData'][_0x436810(0x289)];}else _0x41c7a7['reply']({'uid':0x0},null,_0x305e5a=>{const _0x324b4e=_0x436810;_0x424290[_0x324b4e(0x229)](_0x305e5a[_0x324b4e(0x273)],_0x324b4e(0x1ad)),_0x40e3bd();});}),describe(_0x45fca7[_0x3fd2bb(0x1ba)],()=>{const _0x5df939=_0x3fd2bb,_0x13869f={'LtMvG':_0x45fca7[_0x5df939(0x42d)],'zIozt':_0x5df939(0x347),'hQIKm':function(_0x1b48be){const _0x380ec9=_0x5df939;return _0x45fca7[_0x380ec9(0x4b5)](_0x1b48be);},'cKiiN':_0x5df939(0x2f8)};_0x45fca7[_0x5df939(0x2f0)]===_0x45fca7['Zfzua']?(it(_0x45fca7[_0x5df939(0x469)],_0x4f0501=>{const _0x12b1d8=_0x5df939,_0x49c5f6={'cFSHn':_0x13869f['LtMvG']};posts[_0x12b1d8(0x316)][_0x12b1d8(0x3e4)](_0xd08c81,_0x3c41c0=>{const _0x41f683=_0x12b1d8,_0x523836={'pTeXP':function(_0x3f38af,_0x5e2e0e){return _0x3f38af===_0x5e2e0e;},'lHyUD':'gUZim','vvmhY':_0x49c5f6[_0x41f683(0x47a)]};assert[_0x41f683(0x137)](_0x3c41c0),db[_0x41f683(0x407)]('post:'+_0xd08c81+':uploads',(_0x4e6bd3,_0x1bec01)=>{const _0x3d77e6=_0x41f683;_0x523836[_0x3d77e6(0x26b)](_0x523836[_0x3d77e6(0x3ad)],_0x523836[_0x3d77e6(0x2c8)])?(_0x490d59[_0x3d77e6(0x229)](_0x529a27['message'],_0x3d77e6(0x1ad)),_0xde690()):(assert[_0x3d77e6(0x137)](_0x4e6bd3),assert[_0x3d77e6(0x425)](_0x1bec01,0x2),_0x4f0501());});});}),it('should\x20remove\x20an\x20image\x20if\x20it\x20is\x20edited\x20out\x20of\x20the\x20post',_0x39b715=>{const _0x3e06b0=_0x5df939,_0x3bddbf={'zmFPi':function(_0x364be1){return _0x13869f['hQIKm'](_0x364be1);}};async[_0x3e06b0(0x110)]([function(_0x311f02){const _0x43a935=_0x3e06b0;posts[_0x43a935(0x497)]({'pid':_0xd08c81,'uid':0x1,'content':_0x13869f['zIozt']},_0x311f02);},async[_0x3e06b0(0x182)](posts[_0x3e06b0(0x316)]['sync'],_0xd08c81)],_0x331c52=>{const _0x2516bf=_0x3e06b0,_0x36b923={'cYscW':function(_0x508537){const _0xcbab9c=_0x774c;return _0x3bddbf[_0xcbab9c(0x224)](_0x508537);}};assert[_0x2516bf(0x137)](_0x331c52),db[_0x2516bf(0x407)](_0x2516bf(0x372)+_0xd08c81+_0x2516bf(0x191),(_0x5e1ff2,_0x158a45)=>{const _0x7ab98f=_0x2516bf;assert[_0x7ab98f(0x137)](_0x5e1ff2),assert['strictEqual'](0x1,_0x158a45),_0x36b923[_0x7ab98f(0x1b7)](_0x39b715);});});})):(_0xb0b58a[_0x5df939(0x137)](_0x597f77),_0xa48e38[_0x5df939(0x229)](_0x8aa5dc[_0x5df939(0x3b7)][0x1]['type'],_0x13869f['cKiiN']),_0x3a06ed['equal'](_0x41234c['posts'][0x1][_0x5df939(0x3d7)]['content'],_0x5df939(0x2de)),_0x3e60c2());}),describe(_0x45fca7[_0x3fd2bb(0x42c)],()=>{const _0x4a2f3e=_0x3fd2bb,_0x241c48={'tBCta':_0x4a2f3e(0x456),'sgKlj':function(_0xeca004){const _0x195b8a=_0x4a2f3e;return _0x45fca7[_0x195b8a(0x351)](_0xeca004);}};_0x4a2f3e(0x31b)===_0x4a2f3e(0x30f)?_0x36b8f1[_0x4a2f3e(0x316)][_0x4a2f3e(0x17e)](_0x40a5e3[_0x4a2f3e(0x289)],_0xd6bc5e):it(_0x45fca7[_0x4a2f3e(0x2b4)],_0x9afd69=>{posts['uploads']['list'](_0xd08c81,(_0x598f5c,_0xd32f08)=>{const _0x59c540=_0x774c,_0x1d2c50=_0x59c540(0x293)['split']('|');let _0x284fbd=0x0;while(!![]){switch(_0x1d2c50[_0x284fbd++]){case'0':assert[_0x59c540(0x425)](0x1,_0xd32f08[_0x59c540(0x48a)]);continue;case'1':assert[_0x59c540(0x229)](_0x241c48[_0x59c540(0x370)],typeof _0xd32f08[0x0]);continue;case'2':assert[_0x59c540(0x137)](_0x598f5c);continue;case'3':assert[_0x59c540(0x229)](!![],Array[_0x59c540(0x373)](_0xd32f08));continue;case'4':_0x241c48[_0x59c540(0x105)](_0x9afd69);continue;}break;}});});}),_0x45fca7['NHAkz'](describe,'.isOrphan()',()=>{const _0x4cea68=_0x3fd2bb,_0x48c292={'NPdrE':function(_0x29497d){return _0x29497d();},'NjjlB':_0xae39f1['BFDGw']};Function(_0x4cea68(0x386))(),it(_0x4cea68(0x172),_0x2f3eb2=>{const _0x113c1a=_0x4cea68,_0x2ff890={'ZGZAO':function(_0x20ad64){return _0x20ad64();}};if(_0xae39f1[_0x113c1a(0x1a7)](_0x113c1a(0x3cb),_0xae39f1[_0x113c1a(0x134)]))posts['uploads'][_0x113c1a(0x1f0)](_0x113c1a(0x1ef),(_0x3c8e51,_0x4ec947)=>{const _0xae7d66=_0x113c1a;assert['ifError'](_0x3c8e51),assert[_0xae7d66(0x229)](![],_0x4ec947),_0x2f3eb2();});else{const _0x4cf05d={'BVTQT':function(_0x367358){const _0x3a03eb=_0x113c1a;return _0x2ff890[_0x3a03eb(0x29f)](_0x367358);}};_0x139029[_0x113c1a(0x24c)]({'uid':_0x6c007},_0x114447,(_0x1add62,_0x3755ac)=>{const _0x46cd89=_0x113c1a;_0x18d080[_0x46cd89(0x137)](_0x1add62),_0x75def[_0x46cd89(0x229)](_0x39cf97,_0x3755ac),_0x4cf05d[_0x46cd89(0x2a1)](_0x3c4ba9);});}}),Function(_0xae39f1[_0x4cea68(0xdc)])(),_0xae39f1[_0x4cea68(0x2f3)](it,_0xae39f1[_0x4cea68(0x1ab)],_0x2c4b3d=>{const _0x4f79d7=_0x4cea68,_0x3b44f1={'DYiXR':function(_0x53f1c7){return _0x48c292['NPdrE'](_0x53f1c7);}};posts[_0x4f79d7(0x316)][_0x4f79d7(0x1f0)](_0x48c292['NjjlB'],(_0x83ee7a,_0x1a8537)=>{const _0x23acf0=_0x4f79d7;assert[_0x23acf0(0x137)](_0x83ee7a),assert[_0x23acf0(0x229)](!![],_0x1a8537),_0x3b44f1[_0x23acf0(0x431)](_0x2c4b3d);});});}),describe(_0x3fd2bb(0x39a),()=>{const _0x51fe8c=_0x3fd2bb,_0x9d04d9={'CVaHi':_0xae39f1[_0x51fe8c(0x482)],'CJnAW':function(_0x4c1b6b){return _0x4c1b6b();},'FemAE':function(_0x47718c,_0x373855){const _0x6fc42a=_0x51fe8c;return _0xae39f1[_0x6fc42a(0x1a7)](_0x47718c,_0x373855);},'alknp':_0xae39f1[_0x51fe8c(0x4ae)],'NQgfs':_0xae39f1[_0x51fe8c(0x413)],'FVPSG':_0xae39f1[_0x51fe8c(0x3a7)],'WfAEO':_0xae39f1[_0x51fe8c(0x305)],'Ljxyf':function(_0x161d9e,_0x4fccc2){const _0x2574c9=_0x51fe8c;return _0xae39f1[_0x2574c9(0x1c2)](_0x161d9e,_0x4fccc2);},'jDypS':'test.bmp','TyFnA':function(_0x5e76eb,_0x2dad2f){const _0x7b6022=_0x51fe8c;return _0xae39f1[_0x7b6022(0x2e9)](_0x5e76eb,_0x2dad2f);},'mLJfD':function(_0xeabe23){const _0x2ec174=_0x51fe8c;return _0xae39f1[_0x2ec174(0x1ae)](_0xeabe23);},'CTWVO':_0xae39f1['sejaD'],'QQgdn':function(_0x181f2f){return _0x181f2f();}};it('should\x20add\x20an\x20image\x20to\x20the\x20post\x27s\x20maintained\x20list\x20of\x20uploads',_0x5ec54a=>{const _0x3e4400=_0x51fe8c,_0x2576c8={'AxKno':'whoa.gif'};async[_0x3e4400(0x4ad)]([async[_0x3e4400(0x182)](posts[_0x3e4400(0x316)][_0x3e4400(0x357)],_0xd08c81,_0x3e4400(0x382)),async[_0x3e4400(0x182)](posts[_0x3e4400(0x316)][_0x3e4400(0x17e)],_0xd08c81)],(_0x7bdd41,_0x179d9d)=>{const _0x21a600=_0x3e4400;assert['ifError'](_0x7bdd41),assert[_0x21a600(0x425)](0x2,_0x179d9d[_0x21a600(0x48a)]),assert[_0x21a600(0x425)](!![],_0x179d9d[_0x21a600(0x12f)](_0x2576c8[_0x21a600(0x1fb)])),_0x5ec54a();});}),it(_0x51fe8c(0x13f),_0xcc3da4=>{const _0x471dee=_0x51fe8c,_0x3afd34={'grQgh':function(_0x1a890d,_0x531ed5,_0x48125a){return _0x1a890d(_0x531ed5,_0x48125a);}};_0x9d04d9[_0x471dee(0x499)](_0x9d04d9['alknp'],_0x9d04d9[_0x471dee(0x2f4)])?(_0x561579['ifError'](_0x4b9a16),_0x4f2eb9[_0x471dee(0x2b9)](_0x23daf7,'tid',(_0x848492,_0x13a5c1)=>{const _0x29f3ea=_0x471dee;_0x3e6bbd['ifError'](_0x848492),_0x3afd34[_0x29f3ea(0x2f5)](_0x874512,_0x13a5c1,_0x30f02a),_0xe70f4c();})):async[_0x471dee(0x4ad)]([async['apply'](posts[_0x471dee(0x316)][_0x471dee(0x357)],_0xd08c81,[_0x9d04d9[_0x471dee(0xe4)],_0x9d04d9[_0x471dee(0x447)]]),async[_0x471dee(0x182)](posts[_0x471dee(0x316)][_0x471dee(0x17e)],_0xd08c81)],(_0x2a0ec3,_0x39c067)=>{const _0x3fdf8d=_0x471dee,_0x2ef279=_0x9d04d9['CVaHi']['split']('|');let _0x5b2309=0x0;while(!![]){switch(_0x2ef279[_0x5b2309++]){case'0':_0x9d04d9[_0x3fdf8d(0x3a0)](_0xcc3da4);continue;case'1':assert[_0x3fdf8d(0x137)](_0x2a0ec3);continue;case'2':assert['strictEqual'](!![],_0x39c067[_0x3fdf8d(0x12f)](_0x3fdf8d(0x3b8)));continue;case'3':assert[_0x3fdf8d(0x425)](!![],_0x39c067[_0x3fdf8d(0x12f)](_0x3fdf8d(0x44a)));continue;case'4':assert['strictEqual'](0x4,_0x39c067[_0x3fdf8d(0x48a)]);continue;}break;}});}),it(_0x51fe8c(0x140),_0x49e2c3=>{const _0x2c3e61=_0x51fe8c,_0x1b1b47=_0x47f1d6=>crypto['createHash'](_0x2c3e61(0x336))['update'](_0x47f1d6)[_0x2c3e61(0x13c)](_0x2c3e61(0x404));async[_0x2c3e61(0x4ad)]([async[_0x2c3e61(0x182)](posts[_0x2c3e61(0x316)][_0x2c3e61(0x357)],_0xd08c81,[_0x9d04d9[_0x2c3e61(0x197)]]),function(_0x3a7c59){const _0x293728=_0x2c3e61;db[_0x293728(0x166)](_0x293728(0xf5)+_0x9d04d9['Ljxyf'](_0x1b1b47,_0x9d04d9[_0x293728(0x197)])+_0x293728(0x4b6),0x0,-0x1,_0x3a7c59);}],(_0x2a1743,_0x471fb1)=>{const _0x4ef85b=_0x2c3e61;assert[_0x4ef85b(0x137)](_0x2a1743),assert[_0x4ef85b(0x425)](!![],Array[_0x4ef85b(0x373)](_0x471fb1)),assert['strictEqual'](!![],_0x9d04d9[_0x4ef85b(0x410)](_0x471fb1[_0x4ef85b(0x48a)],0x0)),assert['equal'](_0xd08c81,_0x471fb1[0x0]),_0x9d04d9[_0x4ef85b(0xf2)](_0x49e2c3);});}),it(_0xae39f1[_0x51fe8c(0x1d3)],_0x5f15e2=>{const _0x39edd2=_0x51fe8c;async['waterfall']([async[_0x39edd2(0x182)](posts[_0x39edd2(0x316)][_0x39edd2(0x357)],_0xd08c81,['nonexistant.xls']),async[_0x39edd2(0x182)](posts[_0x39edd2(0x316)][_0x39edd2(0x17e)],_0xd08c81)],(_0x1f354f,_0x2fe407)=>{const _0x3b375b=_0x39edd2;assert[_0x3b375b(0x137)](_0x1f354f),assert[_0x3b375b(0x425)](_0x2fe407[_0x3b375b(0x48a)],0x5),assert['strictEqual'](![],_0x2fe407[_0x3b375b(0x12f)](_0x9d04d9[_0x3b375b(0x139)])),_0x9d04d9['QQgdn'](_0x5f15e2);});});}),describe(_0x45fca7[_0x3fd2bb(0x16d)],()=>{const _0x174219=_0x3fd2bb,_0x399a97={'xnRGj':_0x45fca7[_0x174219(0x259)],'wQRIy':_0x45fca7[_0x174219(0x264)]};_0x45fca7[_0x174219(0x227)](it,_0x45fca7[_0x174219(0x242)],_0x27a06a=>{const _0x4ac901=_0x174219;async[_0x4ac901(0x4ad)]([async['apply'](posts[_0x4ac901(0x316)][_0x4ac901(0x388)],_0xd08c81,_0x4ac901(0x382)),async[_0x4ac901(0x182)](posts[_0x4ac901(0x316)]['list'],_0xd08c81)],(_0x1bb832,_0x7970a5)=>{const _0x6dfa7e=_0x4ac901;assert['ifError'](_0x1bb832),assert[_0x6dfa7e(0x425)](0x4,_0x7970a5[_0x6dfa7e(0x48a)]),assert['strictEqual'](![],_0x7970a5[_0x6dfa7e(0x12f)](_0x399a97[_0x6dfa7e(0x1c6)])),_0x27a06a();});}),it(_0x174219(0x13f),_0x535ebb=>{const _0x59af65=_0x174219,_0x111711={'BWrVZ':_0x399a97[_0x59af65(0x17d)]};async[_0x59af65(0x4ad)]([async[_0x59af65(0x182)](posts[_0x59af65(0x316)][_0x59af65(0x388)],_0xd08c81,['amazeballs.jpg',_0x399a97[_0x59af65(0x17d)]]),async[_0x59af65(0x182)](posts['uploads']['list'],_0xd08c81)],(_0x2a96e1,_0x1c5c91)=>{const _0x230090=_0x59af65;assert['ifError'](_0x2a96e1),assert[_0x230090(0x425)](0x2,_0x1c5c91[_0x230090(0x48a)]),assert[_0x230090(0x425)](![],_0x1c5c91[_0x230090(0x12f)]('amazeballs.jpg')),assert[_0x230090(0x425)](![],_0x1c5c91['includes'](_0x111711[_0x230090(0x2ea)])),_0x535ebb();});});}),_0x45fca7[_0x3fd2bb(0x1c0)](describe,_0x45fca7[_0x3fd2bb(0x481)],()=>{const _0xdcaa32=_0x3fd2bb;it(_0xae39f1[_0xdcaa32(0x13a)],async()=>{const _0x31a1b3=_0xdcaa32;await posts[_0x31a1b3(0x316)]['dissociateAll'](_0xd08c81);const _0x49be65=await posts[_0x31a1b3(0x316)]['list'](_0xd08c81);assert[_0x31a1b3(0x229)](_0x49be65[_0x31a1b3(0x48a)],0x0);});}),describe(_0x3fd2bb(0x3b5),()=>{const _0x597450=_0x3fd2bb;_0x45fca7[_0x597450(0x35c)](it,_0x597450(0x176),async()=>{const _0x23abb0=_0x597450;await posts[_0x23abb0(0xeb)](_0xa1b5f6,0x1);const _0x15fc3d=await posts[_0x23abb0(0x316)][_0x23abb0(0x17e)](_0xa1b5f6);assert[_0x23abb0(0x229)](_0x15fc3d['length'],0x2);}),_0x45fca7[_0x597450(0x439)](it,_0x597450(0x200),async()=>{const _0x1c70f4=_0x597450;if(_0xae39f1[_0x1c70f4(0x3fa)](_0xae39f1['FylPN'],_0xae39f1[_0x1c70f4(0x3ce)])){await posts[_0x1c70f4(0x332)](_0xa1b5f6,0x1);const _0x8a22a6=await posts[_0x1c70f4(0x316)]['list'](_0xa1b5f6);assert[_0x1c70f4(0x229)](_0x8a22a6[_0x1c70f4(0x48a)],0x0);}else _0x1e2d4f['ifError'](_0x497e3f),_0x43ddab[_0x1c70f4(0x2af)]=_0x115e19,_0x3328ad();});});}}),_0x45fca7[_0x30a30a(0x19d)](describe,'post\x20uploads\x20management',()=>{const _0x4cc736=_0x30a30a,_0x1df151={'XjwQL':function(_0x4bd194){return _0x45fca7['cNVgf'](_0x4bd194);},'LZQXn':_0x45fca7['jwqsy']};let _0x26f1b7,_0xdbee6e;before(_0x1122c6=>{const _0x4aacb9=_0x774c;topics[_0x4aacb9(0x363)]({'uid':0x1,'cid':_0x17f2dd,'title':_0x4aacb9(0x217),'content':_0x4aacb9(0x312)},(_0x4204d7,_0x4fcf2c)=>{const _0x1ecc43=_0x4aacb9,_0x389814={'Lbquu':function(_0x15a9c2){const _0x116e3b=_0x774c;return _0x1df151[_0x116e3b(0x142)](_0x15a9c2);}};assert[_0x1ecc43(0x137)](_0x4204d7),topics[_0x1ecc43(0x2f8)]({'uid':0x1,'tid':_0x4fcf2c['topicData']['tid'],'timestamp':Date[_0x1ecc43(0x253)](),'content':_0x1ecc43(0x1f8)},(_0x1110ce,_0x3705fa)=>{const _0x1f1e45=_0x1ecc43;assert[_0x1f1e45(0x137)](_0x1110ce),_0x26f1b7=_0x4fcf2c,_0xdbee6e=_0x3705fa,_0x389814['Lbquu'](_0x1122c6);});});}),it(_0x45fca7[_0x4cc736(0x3f4)],_0x17a26c=>{const _0x24a98c=_0x4cc736;_0x1df151[_0x24a98c(0x44c)]!=='eOohE'?(_0x1b5d2d[_0x24a98c(0x137)](_0x1553d8),_0x3d31e4=_0x149214,_0x1b3392()):db['sortedSetsCard']([_0x24a98c(0x372)+_0x26f1b7[_0x24a98c(0x452)][_0x24a98c(0x220)]+_0x24a98c(0x191),_0x24a98c(0x372)+_0xdbee6e[_0x24a98c(0x289)]+_0x24a98c(0x191)],(_0x4f54c4,_0xbca636)=>{const _0xcb7781=_0x24a98c;assert[_0xcb7781(0x137)](_0x4f54c4),assert[_0xcb7781(0x425)](0x1,_0xbca636[0x0]),assert[_0xcb7781(0x425)](0x1,_0xbca636[0x1]),_0x1df151[_0xcb7781(0x142)](_0x17a26c);});}),it(_0x45fca7[_0x4cc736(0x1ec)],_0x59de64=>{const _0x46b6e2=_0x4cc736;async[_0x46b6e2(0x4ad)]([async[_0x46b6e2(0x182)](posts['edit'],{'pid':_0xdbee6e[_0x46b6e2(0x289)],'uid':0x1,'content':'no\x20uploads'}),function(_0x6cbcec,_0x437c59){const _0x5557fb=_0x46b6e2;posts[_0x5557fb(0x316)][_0x5557fb(0x17e)](_0xdbee6e[_0x5557fb(0x289)],_0x437c59);}],(_0x24885b,_0x478fc7)=>{const _0x38dc3a=_0x46b6e2;assert[_0x38dc3a(0x137)](_0x24885b),assert[_0x38dc3a(0x425)](!![],Array['isArray'](_0x478fc7)),assert['strictEqual'](0x0,_0x478fc7[_0x38dc3a(0x48a)]),_0x59de64();});});}),_0x45fca7['pVTtv'](describe,_0x45fca7[_0x30a30a(0x1b4)],()=>{const _0x4554d2=_0x30a30a,_0x392c1f={'CYbYx':_0x4554d2(0x1ad),'zJNxb':function(_0x1a3e50){const _0x154f14=_0x4554d2;return _0x45fca7[_0x154f14(0x240)](_0x1a3e50);},'jRfKx':function(_0x25e4c6,_0x3525bf){const _0x1d1359=_0x4554d2;return _0x45fca7[_0x1d1359(0x237)](_0x25e4c6,_0x3525bf);},'FzEcc':_0x45fca7[_0x4554d2(0x162)],'QQpzk':function(_0x5ca036,_0x4fbb48){const _0x1f1589=_0x4554d2;return _0x45fca7[_0x1f1589(0x177)](_0x5ca036,_0x4fbb48);},'TZULi':_0x4554d2(0x15b),'ryZic':_0x4554d2(0x127),'tWZAo':_0x4554d2(0x20a),'VJFFM':function(_0x2cbae4,_0x84273b){return _0x45fca7['QRewg'](_0x2cbae4,_0x84273b);},'qbhEX':function(_0xc5a4aa,_0x493b91){const _0x109da5=_0x4554d2;return _0x45fca7[_0x109da5(0x43b)](_0xc5a4aa,_0x493b91);},'YGnRp':function(_0x3b8943,_0x2ebf3c){const _0x12ee80=_0x4554d2;return _0x45fca7[_0x12ee80(0x426)](_0x3b8943,_0x2ebf3c);},'yMYud':_0x4554d2(0x250),'xawnE':_0x4554d2(0x335),'fotwy':_0x45fca7['EMWnc'],'fCZsF':'cJAMT','RpYod':_0x4554d2(0x49f),'DfugX':function(_0x49fea8,_0x2fb8eb,_0x5504ee){const _0x293ce0=_0x4554d2;return _0x45fca7[_0x293ce0(0x2a7)](_0x49fea8,_0x2fb8eb,_0x5504ee);},'XaFrF':_0x45fca7[_0x4554d2(0x160)]};if(_0x45fca7[_0x4554d2(0x3c4)]!==_0x45fca7[_0x4554d2(0x3c4)])_0x167cc9[_0x4554d2(0x137)](_0x34b5fe),_0x3fa12e[_0x4554d2(0x229)](_0x558f73[_0x4554d2(0x25c)],!![]),_0xfda2f[_0x4554d2(0x204)](_0xfebee4[_0x4554d2(0x289)],_0x6f42b3,(_0x596a47,_0x44313a)=>{const _0x5ae969=_0x4554d2;_0x20a35d[_0x5ae969(0x137)](_0x596a47),_0x5899b0[_0x5ae969(0x229)](_0x44313a,!![]),_0x54c6c7();});else{let _0x293673;before(async()=>{const _0x5c8016=_0x4554d2;_0x293673=await topics[_0x5c8016(0x363)]({'uid':0x1,'cid':_0x17f2dd,'title':_0x45fca7[_0x5c8016(0x239)],'content':_0x45fca7[_0x5c8016(0x356)]}),_0x293673=_0x293673[_0x5c8016(0x452)][_0x5c8016(0x3a9)];}),describe(_0x4554d2(0x330),()=>{const _0x14f8ee=_0x4554d2,_0xbc82a1={'YTGsD':_0x45fca7[_0x14f8ee(0x30d)],'iCeGS':function(_0x4bf9bd,_0x1e96c0){const _0x289a57=_0x14f8ee;return _0x45fca7[_0x289a57(0x3ea)](_0x4bf9bd,_0x1e96c0);},'wKEFf':function(_0x20c29a,_0x5da81c){return _0x45fca7['StVDx'](_0x20c29a,_0x5da81c);},'XXmnC':function(_0x5db983,_0x4c953a){const _0x9055bc=_0x14f8ee;return _0x45fca7[_0x9055bc(0xf6)](_0x5db983,_0x4c953a);}};it(_0x45fca7[_0x14f8ee(0x2c2)],async()=>{const _0x106476=_0x14f8ee;try{await topics[_0x106476(0x479)]();}catch(_0x2e0af1){assert(_0x2e0af1),assert['strictEqual'](_0x2e0af1[_0x106476(0x273)],_0x392c1f[_0x106476(0x33b)]);}}),it(_0x45fca7[_0x14f8ee(0x415)],async()=>{const _0x515e1e=_0x14f8ee,_0x234b34={'JQuYL':function(_0x509fd6){const _0x5d82df=_0x774c;return _0x392c1f[_0x5d82df(0x2d2)](_0x509fd6);}};if(_0x392c1f[_0x515e1e(0x2e2)](_0x392c1f[_0x515e1e(0x24d)],_0x515e1e(0x3f0))){const _0x498892=await topics['syncBacklinks']({'content':_0x515e1e(0x496)});assert['strictEqual'](_0x498892,0x0);}else _0x59d522[_0x515e1e(0x137)](_0x51b8b2),_0x2af46f[_0x515e1e(0x229)](_0x300b10[_0x515e1e(0x48a)],0x0),_0x234b34[_0x515e1e(0x3e6)](_0x557be2);}),it(_0x45fca7[_0x14f8ee(0xe3)],async()=>{const _0xf645f0=_0x14f8ee,_0x299ae8=await topics[_0xf645f0(0x479)]({'pid':0x2,'content':'This\x20is\x20a\x20link\x20to\x20[topic\x201]('+nconf['get'](_0xbc82a1[_0xf645f0(0x2f1)])+_0xf645f0(0x2ff)}),_0x543128=await topics[_0xf645f0(0x45a)]['get'](0x1,0x1),_0x19c196=await db[_0xf645f0(0xec)](_0xf645f0(0x411));assert[_0xf645f0(0x425)](_0x299ae8,0x1),_0xbc82a1['iCeGS'](assert,_0x543128),assert[_0xf645f0(0x425)](_0x543128['length'],0x1),_0xbc82a1['wKEFf'](assert,_0x19c196),_0xbc82a1[_0xf645f0(0x28b)](assert,_0x19c196[_0xf645f0(0x12f)]('1'));}),it(_0x14f8ee(0x3fe),async()=>{const _0x1ad616=_0x14f8ee,_0x2eb055={'UdAWU':function(_0x5c2dfe){return _0x5c2dfe();}};if(_0x392c1f['QQpzk'](_0x392c1f['TZULi'],_0x392c1f[_0x1ad616(0x43a)]))_0x31eecf[_0x1ad616(0x137)](_0x3d6c7b),_0x3c84dc['sortedSetCard'](_0x1ad616(0x372)+_0x719f7+_0x1ad616(0x191),(_0x40c3bb,_0x2c67c5)=>{const _0x28c643=_0x1ad616;_0x3eb3cf[_0x28c643(0x137)](_0x40c3bb),_0x67728e[_0x28c643(0x425)](_0x2c67c5,0x2),_0x2eb055[_0x28c643(0x483)](_0x36c0dd);});else{const _0x2377e2=await topics[_0x1ad616(0x479)]({'pid':0x2,'content':_0x392c1f['tWZAo']}),_0x4e3d3e=await topics[_0x1ad616(0x45a)][_0x1ad616(0x37d)](0x1,0x1),_0x13e2f0=await db[_0x1ad616(0xec)](_0x1ad616(0x411));assert[_0x1ad616(0x425)](_0x2377e2,0x0),_0x392c1f['VJFFM'](assert,_0x4e3d3e),assert[_0x1ad616(0x425)](_0x4e3d3e[_0x1ad616(0x48a)],0x1),_0x392c1f[_0x1ad616(0x2a4)](assert,_0x13e2f0),assert[_0x1ad616(0x425)](_0x13e2f0[_0x1ad616(0x48a)],0x0);}});}),_0x45fca7[_0x4554d2(0x41a)](describe,_0x45fca7[_0x4554d2(0x309)],()=>{const _0x24c808=_0x4554d2,_0x35ff05={'albId':function(_0x29cc3c,_0x431a26){const _0x360f76=_0x774c;return _0x392c1f[_0x360f76(0x2e2)](_0x29cc3c,_0x431a26);},'VILTL':_0x392c1f['fCZsF'],'nKUCJ':_0x392c1f[_0x24c808(0x29b)],'iZKeg':function(_0x32dd32,_0x2618a0){const _0x4452cb=_0x24c808;return _0x392c1f[_0x4452cb(0x22e)](_0x32dd32,_0x2618a0);},'lajmH':function(_0x2e40fd,_0x5f1052,_0x47b333){const _0x3bcc4d=_0x24c808;return _0x392c1f[_0x3bcc4d(0x1f5)](_0x2e40fd,_0x5f1052,_0x47b333);},'onzlP':_0x24c808(0x495),'KSNTM':'[[error:no-user]]'};_0x392c1f['DfugX'](it,_0x24c808(0x14f),async()=>{const _0xa1996d=_0x24c808;if(_0x35ff05['albId'](_0x35ff05[_0xa1996d(0x2fc)],_0xa1996d(0x158))){let _0x1beae9;_0x11917c['waterfall']([function(_0xf97528){const _0x44bec0=_0xa1996d;_0x1d4bfc[_0x44bec0(0x166)]('post:queue',0x0,-0x1,_0xf97528);},function(_0x163f3a,_0x4c3d9f){const _0x4c3a64=_0xa1996d;_0x1beae9=_0x163f3a,_0x319c5d[_0x4c3a64(0xf7)]({'uid':_0x23d4be},{'id':_0x1beae9[0x0]},_0x4c3d9f);},function(_0x3daac3){const _0x2a066c=_0xa1996d;_0x103b9c[_0x2a066c(0xf7)]({'uid':_0x4e245e},{'id':_0x1beae9[0x1]},_0x3daac3);}],_0x4ecc02);}else{const _0x40d22c=await topics['post']({'uid':0x1,'cid':_0x17f2dd,'title':_0x35ff05['nKUCJ'],'content':_0xa1996d(0x184)+nconf[_0xa1996d(0x37d)](_0xa1996d(0x495))+_0xa1996d(0x1ee)+_0x293673}),_0x2188b7=await topics['events']['get'](_0x293673,0x1);_0x35ff05[_0xa1996d(0x133)](assert,_0x2188b7),assert['strictEqual'](_0x2188b7[_0xa1996d(0x48a)],0x1),assert[_0xa1996d(0x425)](_0x2188b7[0x0][_0xa1996d(0x106)],_0xa1996d(0x26c)),assert[_0xa1996d(0x425)](_0x35ff05['lajmH'](parseInt,_0x2188b7[0x0]['uid'],0xa),0x1),assert[_0xa1996d(0x425)](_0x2188b7[0x0][_0xa1996d(0x39b)],'/post/'+_0x40d22c[_0xa1996d(0xd6)][_0xa1996d(0x289)]);}}),it(_0x24c808(0x323),async()=>{const _0x3f5547=_0x24c808;await topics['reply']({'uid':0x1,'tid':_0x293673,'content':_0x3f5547(0x31a)+nconf[_0x3f5547(0x37d)](_0x35ff05[_0x3f5547(0x1f6)])+_0x3f5547(0x1ee)+_0x293673});const _0xa60a84=await topics['events']['get'](_0x293673,0x1);assert(_0xa60a84),assert['strictEqual'](_0xa60a84[_0x3f5547(0x48a)],0x1);}),it(_0x392c1f[_0x24c808(0x396)],async()=>{const _0x30db32=_0x24c808;if(_0x392c1f['YGnRp'](_0x392c1f[_0x30db32(0x476)],_0x392c1f[_0x30db32(0x26f)])){meta['config'][_0x30db32(0x12a)]=0x0,await topics[_0x30db32(0x363)]({'uid':0x1,'cid':_0x17f2dd,'title':_0x392c1f[_0x30db32(0x21a)],'content':_0x30db32(0x184)+nconf['get'](_0x30db32(0x495))+_0x30db32(0x1ee)+_0x293673});const _0x3015a0=await topics[_0x30db32(0x45a)][_0x30db32(0x37d)](_0x293673,0x1);assert(_0x3015a0),assert[_0x30db32(0x425)](_0x3015a0[_0x30db32(0x48a)],0x0);}else{const _0x42cbc1={'qUkFZ':_0x35ff05[_0x30db32(0x219)],'XFXnV':function(_0x47b297){return _0x47b297();}};_0xf7e2f7[_0x30db32(0x25b)](0x1425033,0x1,_0x432d25=>{const _0xa3051f=_0x30db32;_0x3e5c1f['equal'](_0x432d25[_0xa3051f(0x273)],_0x42cbc1['qUkFZ']),_0x42cbc1[_0xa3051f(0x23c)](_0x4a1867);});}});});}});});function _0x4591(){const _0x25ad63=['strictEqual','oXygi','lOayD','GeowG','should\x20load\x20post\x20tools','jnawm','JQWbZ','ZNLQb','qRaKo','queued\x20topic\x20content','unbookmark','tid:','DYiXR','wOpsN','eGNsY','JzPhd','hHKUC','VrvTt','VpBAt','gyqMl','BzDOq','ryZic','nueYx','MVotO','divBZ','should\x20error\x20if\x20content\x20is\x20too\x20short','UVdZg','WJiEZ','LhtVB','should\x20filter\x20pids\x20by\x20single\x20cid','iVKZS','uwTLE','original\x20post','fIvLq','WfAEO','should\x20bypass\x20post\x20queue\x20if\x20user\x20is\x20in\x20exempt\x20group','postQueue','wut.txt','teaser','LZQXn','users:postcount','editor','userPrivilegeList','sLdAe','should\x20load\x20queued\x20posts','topicData','should\x20delete\x20posts','dSrDA','userData','string','wctVZ','should\x20not\x20be\x20queued','UoIlI','events','should\x20properly\x20add\x20new\x20images\x20to\x20the\x20post\x27s\x20zset','TVVOW','getPostData','XQehI','ygNOK','WlvvD','MLeVF','Zhadu','rejects','PWTHq','nkgzW','newest_to_oldest','FmNcK','edited\x20title\x20again','qucZh','eJeQB','topic\x20to\x20delete/restore/purge','urlRegex','should\x20accept\x20queued\x20posts\x20and\x20submit','LmROu','TwfCo','zxHaL','registered-users','AuKcD','XEAyc','rYgAR','should\x20fail\x20to\x20change\x20owner\x20if\x20user\x20is\x20not\x20authorized','yMYud','xxxxxxxx','edited\x20deleted\x20title','syncBacklinks','cFSHn','imgRegex','cBkZk','should\x20prevent\x20regular\x20users\x20from\x20approving\x20non\x20existing\x20posts','topic\x202','some\x20content','cReus','jcsJj','XXbSM','UdAWU','PYmfC','bQGEc','GXnsm','queued','RZLuV','uJHZr','length','aKewZ','parse','should\x20turn\x20relative\x20links\x20in\x20post\x20body\x20to\x20absolute\x20urls','BrOfw','HAzLW','MOIcy','SDGdL','lKKhx','waSee','../src/socket.io/topics','url','This\x20is\x20a\x20post\x27s\x20content','edit','uFSSN','FemAE','dkwsr','AVXoK','HDzns','dmDZf','123123123','Topic\x20backlink\x20testing\x20-\x20topic\x202','KhUQG','.sync()','should\x20prevent\x20regular\x20users\x20from\x20approving\x20posts','shgHV','gwhHT','BPCfX','base_url','PwKyV','yuOGu','55McxkvE','should\x20not\x20allow\x20guests\x20to\x20view\x20diffs','should\x20allow\x20registered-users\x20group\x20to\x20view\x20diffs','MfCqy','waterfall','NCoLX','should\x20unbookmark\x20a\x20post','igRTt','JtvYe','gFeSE','91290ORDVKL','fZaVk','hqUjl',':pids','zaEnh','hblBj','hasOwnProperty','Test\x20Topic\x20Title','should\x20prevent\x20downvoting\x20more\x20than\x20total\x20daily\x20limit','217HlZYrB','[[error:post-edit-duration-expired,\x201]]','getRawPost','voterUid','FMAmQ','usernames','postData','vzHSP','some\x20post\x20content','util','973392ZxCsdD','WDaJC','kaCYk','lbTTh','patch','ItNYC','dMdFO','XNcCg','aaFTQ','VjOnK','FVPSG','should\x20create\x20a\x20backlink\x20if\x20it\x20detects\x20a\x20topic\x20link\x20in\x20a\x20post','PAFwW','VfinO','should\x20error\x20with\x20invalid\x20data','getObject','tUOwX','delete','getSortedSetMembers','../src/groups','kkxDf','downvotesPerUserPerDay','timestamp','wwPsO','mLJfD','zrIbQ','should\x20upvote\x20a\x20post','upload:','rchzc','accept','mLaYT','globalModUid','YjSLM','QsZNC','uFbbR','nUVJS','uwvBt','kkfuY','peADJ','should\x20get\x20post\x20summaries','PWgCN','minimumTitleLength','RTqSU','sgKlj','type','integration\x20tests','PqkcO','GvoAD','hUpId','fYWWF','post:queue','zrVHH','NeUrb','2|0|1|4|3','series','dvGQC','ENVsd','BgIcv','signatures:disableImages','hasVoted','tag','nUQkK','deepEqual','IGOmV','hGEJU','9999999','tkzPj','yyLBo','dRCOc','getDiffs','lCeiQ','Inahp','Jravz','SSbQD','getRecentPosterUids','getPostSummaryByPids','xUKJx','oMhfZ','OnusN','zHgki','topicBacklinks','zYMSS','rgexO','mSock','LtBrV','includes','NZJlL','getQueuedPosts','no\x20uploads','iZKeg','gyfty','rescind','lDjEn','ifError','GbCef','CTWVO','oEkrw','oldest_to_newest','digest','uGoTu','YZzHr','should\x20allow\x20arrays\x20to\x20be\x20passed\x20in','should\x20save\x20a\x20reverse\x20association\x20of\x20md5sum\x20to\x20pid','ttDpl','XjwQL','bookmarking','xorZf','ltdxn','Jezxw','bookmark','filterPidsByCid','1329354NduUih','zgQbN','PmviF','change\x20owner','RLtYW','should\x20get\x20raw\x20post\x20content','should\x20create\x20a\x20topic\x20event\x20in\x20the\x20referenced\x20topic','should\x20restore\x20a\x20post','DnJlE','vJIbu','RHGfq','rvieQ','ItdBV','wjDJe','EtmFC','LOPPQ','zRFhd','pop','Mbpbs','CJDpv','bookmarks','sortedSetScores','DoVcS','vnsJI','alGWQ','SYymT','should\x20delete\x20a\x20post\x20diff','tnWqL','test\x20topic','getSortedSetRange','nWwZC','sHAxo','XZfBv','IEKHi','JauQr','YdahC','YbBqp','TeCTq','upvoteCount','OyTgK','deepStrictEqual','should\x20return\x20false\x20if\x20upload\x20is\x20not\x20an\x20orphan','rsWEQ','YzNrP','OODJo','should\x20not\x20dissociate\x20images\x20on\x20post\x20deletion','ciDRI','should\x20store\x20post\x20content\x20in\x20cache','MlsPv','KXadh','upload\x20methods','guXiH','wQRIy','list','ZXNYa','topic\x20with\x20some\x20images','cLtWl','apply','should\x20edit\x20post\x20in\x20queue','Some\x20text\x20here\x20for\x20the\x20OP\x20&ndash;\x20','DAIjA','nlzrj','uTTha','ThtyQ','give','UqQep','WMctC','GQmQF','topic\x20B','every','should\x20unvote\x20a\x20post','upload_path',':uploads','VeqMM','EUdzF','sguyH','XdGNA','lAijz','jDypS','MFVAw','WUqyK','upvoters','DpNPn','gzZlt','Tmuzr','relativeToAbsolute','mxKPZ','ZuUrM','voteeUid','jjNss','TRbHA','groups:posts:upvote','IGIoV','crypto','qQDVJ','topic','WYvhG','downvoteCount','enzRW','display_delete_tools','[[error:invalid-data]]','UMYUB','edited\x20post\x20content\x20again','mUBVY','FRHsV','should\x20be\x20queued','TkkAY','fzgYT','zbcjG','BqGuG','cYscW','ADJhW','should\x20return\x20pids\x20as\x20is\x20if\x20cid\x20is\x20falsy','zWygj','tbqVk','kCyVf','edited\x20post\x20content','setPostField','TtkuR','SWsJn','rxKXy','gonzD','UhNgL','JWRIK','should\x20fail\x20to\x20get\x20raw\x20post\x20because\x20of\x20privilege','xnRGj','SVquc','WnGSw','should\x20error\x20if\x20data\x20is\x20invalid\x20or\x20missing','MLsOW','SNSsm','fHDkv','should\x20add\x20reply\x20to\x20post\x20queue','should\x20get\x20recent\x20poster\x20uids','renamed','should\x20error\x20if\x20data\x20is\x20invalid','BCnXW','should\x20error\x20if\x20title\x20is\x20too\x20short','bkUKE','topic\x201','create','BkPAf','the\x20moved\x20queued\x20post','Ushjj','SVZEd','eOohE','AzlTu','topiccount','CxVSX','GonOt','maximumTagsPerTopic','iqXAc','nIKeB','yxTBg','../src/socket.io/posts','minimumTagsPerTopic','WRIrD','wPHZF','changeOwner','modofcat1','Gbtgc','LiWaq','dbUcJ','FQqns','oJiCy','/topic/','abracadabra.png','isOrphan','should\x20display\x20the\x20uploaded\x20files\x20for\x20a\x20specific\x20post','CotoE','YcnSQ','globalmodpwd','DfugX','onzlP','timestamps','[abcdef](/assets/uploads/files/shazam.jpg)','nonexistant.xls','/api/categories','AxKno','agkIq','derp','editQueuedContent','GcsXc','should\x20dissociate\x20images\x20on\x20post\x20purge','should\x20parse\x20signature\x20and\x20remove\x20links\x20and\x20images','qRwtf','<img\x20src=\x22boop\x22/><a\x20href=\x22link\x22>test</a>\x20derp','hasBookmarked','lXVrc',':posters','ewpno','RbmwW','EFnqk','This\x20is\x20a\x20link\x20to\x20[nothing](http://example.org)','Mqxhq','dbmOa','vqXug','BNUxA','hDfvB','pxItt','wwNgP','LyfIW','WmBsI','beAPc','groups:purge','maximumTitleLength','topic\x20to\x20test\x20uploads\x20with','edited\x20deleted\x20content','KSNTM','fotwy','A\x20reply\x20to\x20move','categories','cNVgf','downvote','yYpkx','mainPid','revisions','qhRFk','edited','zmFPi','RsvqQ','RDUJh','kFHir','../src/posts','equal','AbjyF','Topic\x20Backlinks','huMiT','vUqqA','VJFFM','VMGbT','SiKpk','MFvbT','should\x20edit\x20a\x20deleted\x20post','wEZrr','WZLWr','downvotes','signature','bOgll','firstReply','pmtxx','downvoted','keys','XFXnV','efuOZ','/users\x22>test</a>\x20<a\x20href=\x22//youtube.com\x22>youtube</a>\x20some\x20test\x20<img\x20src=\x22','lXOqw','IiOiG','KXjxN','DoqrC','nGdWZ','signatures:disableLinks','RyyUh','getPidIndex','should\x20not\x20delete\x20first\x20diff\x20of\x20a\x20post','queued\x20topic','YlKYr','WEmxK','purgePosts','getCategory','FzEcc','socket\x20methods','NxzgH','mjnjM','Topic\x20backlink\x20testing\x20-\x20topic\x203','RCLHM','now','should\x20load\x20(oldest)\x20diff\x20and\x20reconstruct\x20post\x20correctly\x20after\x20a\x20diff\x20deletion','IffBY','should\x20error\x20on\x20invalid\x20data','RCcow','post\x20tools','GMRTW','user','isReadyToPost','isBookmarked','rqXAU','phtxR','vgYth','ylYAT','test.bmp','UNBik','JbMUF','ZOPSE','bkYua','newbiePostEditDuration','gwHhU','UQxwH','.list()','gGyoC','pTeXP','backlink','editable','otherCount','xawnE','DpScA','qhBxF','MbLHT','message','AqFuj','Global\x20Moderators','topic\x20content','[[error:no-post]]','ytdQs','should\x20fail\x20to\x20upvote\x20post\x20if\x20group\x20does\x20not\x20have\x20upvote\x20permission','parsePost','groups:posts:view_deleted','A\x20post\x20to\x20delete/restore/purge','AdRyD','new\x20topic\x20title','Yhpxx','uygZS','loginUser','ksdNJ','should\x20move\x20a\x20post','LDBYJ','yaWoK','return\x20await\x20Promise.resolve(42);','pjgkc','upvotee','pid','groupsExemptFromPostQueue','XXmnC','Kgobe','async','qfVQc','IbRKC','ZWqmG','content','KFOdn','2|3|0|1|4','ERKSU','forEach','upvoter','WILtd','topic\x20B\x20content','push','xpYIv','RpYod','OALHW','upVMg','upvotes','ZGZAO','value','BVTQT','EEJIl','aLizB','qbhEX','HVkfb','[[error:no-user]]','PtheN','minimumPostLength','MZybQ','this\x20is\x20a\x20queued\x20reply','getVoters','HBNgB','123456','WetrD','env','lkHFo','RbCTm','ekhgG','IDANW','KFNDk','Zzipp','sHZbR','zVyKO','[[topic:post_is_deleted]]','getPostField','fBlgC','postcount','split','CNOlI','globalmod','upvoted','YrvfL','mMPuJ','hfvSU','.dissociate()','topic\x20to\x20edit','should\x20error\x20if\x20uid\x20is\x20not\x20logged\x20in','ZlRdG','./mocks/databasemock','vvmhY','dBsRy','reputation','RAxWz','/api/post-queue','twZmc','qEHLD','iIGqM','ecoPX','ibVFp','zJNxb','cpPTQ','SUFxZ','NeaVy','NmkIC','should\x20change\x20owner\x20of\x20post\x20and\x20topic\x20properly','leSZp','should\x20filter\x20pids\x20by\x20multiple\x20cids','XUbyk','5|2|1|4|3|0','uqBDY','A\x20post\x20to\x20delete/restore\x20and\x20purge','newContent','CfRGD','[[success:post-queued]]','/users\x22>test</a>\x20<a\x20href=\x22//youtube.com\x22>youtube</a>','jRfKx','nwhcg','DnrTS','delete/restore/purge','jSPjJ','KfhPM','parseSignature','wZjUt','BWrVZ','RKXZa','../src/meta','[[error:too-many-downvotes-today-user,\x201]]','[[error:no-privileges]]','ZFWkW','Zfzua','YTGsD','wDJXo','JFXbm','NQgfs','grQgh','QgnhT','should\x20not\x20show\x20backlink\x20events\x20if\x20the\x20feature\x20is\x20disabled','reply','wzQYm','title','kNDPW','VILTL','yUbdo','fCARZ','/topic/1/abcdef)','mergeexemptuser','tkrRi','BSxRC','IBpCu','1|4|2|3|0','CjbxS','UwfRN','EiYGe','getUserField','vRPvH','YQryd','qZBjx','should\x20error\x20if\x20title\x20is\x20too\x20long','tkanA','VEuYG','VlogK','should\x20return\x20empty\x20array\x20for\x20empty\x20pids','OkdVE','[abcdef](/assets/uploads/files/abracadabra.png)','DnRBa','should\x20do\x20nothing\x20if\x20the\x20post\x20does\x20not\x20contain\x20a\x20link\x20to\x20a\x20topic','AgBIQ','uploads','peTyF','join','123304EXrWYi','Referencing\x20itself\x20&ndash;\x20','lDyAB','Test\x20Category','123456789','MTbxw','nsJie','NbbMV','display_move_tools','HqqDy','should\x20not\x20create\x20a\x20topic\x20event\x20if\x20referenced\x20topic\x20is\x20the\x20same\x20as\x20current\x20topic','SYpDp','gJpmv','category','zBBEx','KXMnt','closeSync','maximumPostLength','should\x20fail\x20to\x20change\x20owner\x20if\x20new\x20owner\x20does\x20not\x20exist','YyxVP','Tabqq','afAFd','movePost','.syncBacklinks()','mELhu','purge','KSEJd','MPtwR','iCtvt','md5','nIvwB','newuser','KRjef','should\x20get\x20post','CYbYx','should\x20automatically\x20sync\x20uploads\x20on\x20post\x20edit','zGEzB','49492xCNsoT','lfmjm','fwHNy','AsCCq','raw\x20content','cid','jjXRQ','iXpeZ','yKtJc','here\x20is\x20an\x20image\x20[alt\x20text](/assets/uploads/files/abracadabra.png)...\x20AND\x20NO\x20MORE!','[[error:not-enough-tags,\x20','should\x20edit\x20post','zZUNi','path','lJqfx','../src/privileges','openSync','iOXFV','xsXDd','oEnhh','<a\x20href=\x22','groups:posts:edit','tags','promisify','zwEWQ','associate','fkYUy','tQQqK','ZamTo','XTKLv','pPmVS','3|2|4|0|1','username','ygtTv','/api/topic/','KZTsh','lNrbP','post','SCPcA','FPYpQ','config','<a\x20href=\x22/users\x22>test</a>\x20<a\x20href=\x22youtube.com\x22>youtube</a>','MwABx','should\x20error\x20if\x20user\x20does\x20not\x20have\x20move\x20privilege','should\x20edit\x20topic\x20title\x20in\x20queue','<a\x20href=\x22/users\x22>test</a>\x20<a\x20href=\x22youtube.com\x22>youtube</a>\x20some\x20test\x20<img\x20src=\x22/path/to/img\x22/>','KQTVn','XVcwK','kaGcb','Drswt','tBCta','assert','post:','isArray','mEKem','load','shazam.jpg','voting','zDjnx','UDOfh','nconf','[[error:content-too-long,\x20','FTZGx','get','should\x20not\x20see\x20post\x20content\x20if\x20global\x20mod\x20does\x20not\x20have\x20posts:view_deleted\x20privilege','most\x20recent\x20edit','jnWmY','kGIQV','whoa.gif','ctwgk','production','nfbcP','return\x20new\x20Date();','dKHyi','dissociate','xZUEO','jghoZ','[[error:content-too-short,\x20','createHash','here\x20is\x20an\x20image\x20[alt\x20text](/assets/uploads/files/whoa.gif)\x20and\x20another\x20[alt\x20text](/assets/uploads/files/amazeballs.jpg)','guests','A\x20reply\x20to\x20edit','rWjSp','oGVhz','votes','oKKko','restore','ydNzU','XaFrF','another\x20edit\x20has\x20been\x20made','should\x20edit\x20topic\x20category\x20in\x20queue','.dissociateAll()','.associate()','href','qZtQx','JyhNR','getUpvoters','acEwp','CJnAW','NRGMj','bDLaw','CxMVa','deletePosts','EFxgO','Topic\x20backlink\x20testing\x20-\x20topic\x201','lMssL','siLlg','tid','move','should\x20delete\x20a\x20post','XQYnb','lHyUD','topic_1','getPost','zoULF','3|1|4|5|2|0','post\x20queue','unvote','diffs','Dissociation\x20on\x20purge','kecWy','posts','amazeballs.jpg','groups:posts:downvote','lUuIK','itJhd','vQWqI','[[error:too-many-downvotes-today,\x201]]','should\x20error\x20with\x20too\x20few\x20tags','JDtXR','UBSaZ','sortedSetScore','CqwOb','eFncc','xrCyI','JxDwg','Wkimh','topic_','ZJUjS','should\x20error\x20if\x20content\x20is\x20too\x20long','BmJio','QZsMg','lcZRr','isMainPost','qgEYp','RHBIa','vMqtd','YYGWM','should\x20not\x20crash\x20if\x20id\x20does\x20not\x20exist','QmtCM','31158BVgaFn','ymUIG','AMvDT','data','TmsMj','aFVQN','should\x20get\x20pid\x20index','Test\x20category\x20created\x20by\x20testing\x20script','should\x20remove\x20an\x20image\x20from\x20the\x20post\x27s\x20maintained\x20list\x20of\x20uploads','SidPr','zxOxb','mergetestsuser','WLbCb','./helpers','should\x20return\x20true\x20if\x20upload\x20is\x20an\x20orphan','vLnoq','sync','downvotesPerDay','JQuYL','VpETX','fanbL','topic\x20A\x20content','IbRAn','should\x20not\x20associate\x20a\x20file\x20that\x20does\x20not\x20exist\x20on\x20the\x20local\x20disk','TUCTS','should\x20update\x20queued\x20post\x27s\x20topic\x20if\x20target\x20topic\x20is\x20merged','tgnNi','edited-twice','XzWVP','edited\x20reply','should\x20edit\x20a\x20reply\x20post','OYEIt','QkexI','95224fraRUa','A\x20post\x20to\x20edit','should\x20delete\x20topic\x20if\x20last\x20main\x20post\x20is\x20deleted','lXdQJ','gqIcQ','LamiX','exists','3|1|0|4|2','XVhEW','should\x20remove\x20the\x20backlink\x20(but\x20keep\x20the\x20event)\x20if\x20the\x20post\x20no\x20longer\x20contains\x20a\x20link\x20to\x20a\x20topic','gyTWn','upvote','TZDoL','GMBem','deleted','hex','NtWGF','qwrYS','sortedSetCard','should\x20prevent\x20downvoting\x20target\x20user\x20more\x20than\x20total\x20daily\x20limit','czNqT','target\x20topic','should\x20error\x20if\x20user\x20does\x20not\x20exist','MOUvh','aJvXl','uttHi','RwFKB','TyFnA','pid:2:backlinks','here\x20is\x20an\x20image\x20[alt\x20text](/assets/uploads/files/abracadabra.png)\x20and\x20another\x20[alt\x20text](/assets/uploads/files/shazam.jpg)','Ihzky','rGUot','rpboz','uCgGa','OGpTS','../src/user','groups:topics:read','BXRVI','ByQFZ','should\x20error\x20if\x20user\x20is\x20not\x20logged\x20in','nLjDj','JjTXr','zMdvE','qXAPu','pymwg','QyGpv','isOwner','Some\x20text\x20here\x20for\x20the\x20OP'];_0x4591=function(){return _0x25ad63;};return _0x4591();}