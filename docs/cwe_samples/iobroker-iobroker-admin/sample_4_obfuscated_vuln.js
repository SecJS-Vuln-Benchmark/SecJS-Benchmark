(function(_0x33ded9,_0x540ebb){const _0x3d3d32=_0x13b8,_0x58bc7d=_0x33ded9();while(!![]){try{const _0x5658ba=-parseInt(_0x3d3d32(0xbf))/0x1+-parseInt(_0x3d3d32(0x108))/0x2+parseInt(_0x3d3d32(0xed))/0x3*(parseInt(_0x3d3d32(0xd5))/0x4)+parseInt(_0x3d3d32(0xcb))/0x5+parseInt(_0x3d3d32(0xe6))/0x6*(-parseInt(_0x3d3d32(0x100))/0x7)+parseInt(_0x3d3d32(0xfa))/0x8+parseInt(_0x3d3d32(0x112))/0x9;if(_0x5658ba===_0x540ebb)break;else _0x58bc7d['push'](_0x58bc7d['shift']());}catch(_0x16590b){_0x58bc7d['push'](_0x58bc7d['shift']());}}}(_0x13b1,0x96d49));function _0x13b8(_0x197da7,_0x445923){const _0x13b1b3=_0x13b1();return _0x13b8=function(_0x13b871,_0x389bfa){_0x13b871=_0x13b871-0xbe;let _0x7800be=_0x13b1b3[_0x13b871];return _0x7800be;},_0x13b8(_0x197da7,_0x445923);}const fs=require('fs-extra'),{HAXCMS}=require('../lib/HAXCMS.js'),JSONOutlineSchemaItem=require('../lib/JSONOutlineSchemaItem.js');async function saveOutline(_0x4d2d22,_0x54a790){const _0x12cfaf=_0x13b8,_0x2aa703={'UcFee':'site_token','GeagM':function(_0x1b70c6,_0x3a871f){return _0x1b70c6+_0x3a871f;},'wFLBl':_0x12cfaf(0xc9),'ehUOd':function(_0x867409,_0x5413c9){return _0x867409!==_0x5413c9;},'MXBwJ':_0x12cfaf(0xd3),'DlGLk':'name','hSvuK':_0x12cfaf(0xcf),'jYMBn':function(_0x3db9e4,_0x3c33db){return _0x3db9e4!==_0x3c33db;},'FlHpr':_0x12cfaf(0x10f),'DofWn':'undefined','WUZCI':function(_0x2107ab,_0x58d005){return _0x2107ab(_0x58d005);},'dTbpS':function(_0x5e058b,_0x564e3d){return _0x5e058b!==_0x564e3d;},'lGQEG':function(_0x51f4ed,_0x29c4ae){return _0x51f4ed!==_0x29c4ae;},'RTmgq':function(_0x2fb24a,_0x15aba2){return _0x2fb24a+_0x15aba2;},'XQaPL':function(_0x5a9e11,_0x45a52d){return _0x5a9e11+_0x45a52d;},'plmGO':_0x12cfaf(0x103),'ORvfx':_0x12cfaf(0x10a),'XYDtc':function(_0x3acd44,_0x30e93f){return _0x3acd44+_0x30e93f;},'XzcPj':function(_0x22d251,_0x39db26){return _0x22d251+_0x39db26;},'kVPmD':function(_0x1cdacb,_0xf6c431){return _0x1cdacb+_0xf6c431;},'OPPEx':function(_0x2cddda,_0x2f7d7c){return _0x2cddda!=_0x2f7d7c;},'ccEpW':function(_0x57a1e4,_0x3dc90c){return _0x57a1e4+_0x3dc90c;},'skxfd':function(_0x375562,_0x578a76){return _0x375562+_0x578a76;},'oArax':function(_0x217a02,_0x2d0c0e){return _0x217a02+_0x2d0c0e;},'UUzpJ':function(_0x20af6f,_0x63a77e){return _0x20af6f===_0x63a77e;},'nZtWt':function(_0x6bf60,_0xf0275f){return _0x6bf60/_0xf0275f;},'LVPJp':_0x12cfaf(0xe9),'WOEYf':_0x12cfaf(0x105),'tUpov':function(_0x1002bf,_0x142db5){return _0x1002bf===_0x142db5;},'upmJt':function(_0x5954af,_0x50ec64){return _0x5954af+_0x50ec64;},'GKXwW':_0x12cfaf(0xff),'PfRYS':function(_0x2d5831,_0x43b255){return _0x2d5831!=_0x43b255;},'pWiXF':function(_0x3207e2,_0x2c39d6){return _0x3207e2-_0x2c39d6;}};if(_0x4d2d22['query'][_0x2aa703[_0x12cfaf(0xfd)]]&&HAXCMS[_0x12cfaf(0xd7)](_0x4d2d22[_0x12cfaf(0xfb)][_0x2aa703['UcFee']],_0x2aa703['GeagM'](HAXCMS[_0x12cfaf(0x106)](),':')+_0x4d2d22[_0x12cfaf(0xe5)][_0x2aa703['wFLBl']]['name'])){if(_0x2aa703['ehUOd'](_0x12cfaf(0xd3),_0x2aa703[_0x12cfaf(0x10d)]))_0x387716=_0x4b6a2e[_0x12cfaf(0xc5)](_0x8cb0c2[_0x3be671['id']]);else{let _0x4bb0d1=await HAXCMS['loadSite'](_0x4d2d22[_0x12cfaf(0xe5)][_0x12cfaf(0xc9)][_0x2aa703[_0x12cfaf(0xc3)]]),_0x41f17f=[..._0x4bb0d1[_0x12cfaf(0xf3)]['items']],_0xca0b63=[..._0x4d2d22[_0x12cfaf(0xe5)][_0x2aa703[_0x12cfaf(0xf0)]]],_0x147b8b={};var _0x148ef7,_0x2318ce,_0x1bd468;for(var _0x4b8b5 in _0xca0b63){let _0x1ccf09=_0xca0b63[_0x4b8b5];_0x148ef7=_0x4bb0d1[_0x12cfaf(0xc5)](_0x1ccf09['id']);!_0x148ef7&&(_0x2aa703[_0x12cfaf(0x114)](_0x12cfaf(0x10f),_0x2aa703[_0x12cfaf(0xe2)])?_0x565157=_0x406c71['loadNode'](_0x3bb4dd[_0xabcc7c['id']]):(_0x148ef7=HAXCMS['outlineSchema']['newItem'](),_0x147b8b[_0x1ccf09['id']]=_0x148ef7['id']));_0x1ccf09[_0x12cfaf(0xd9)]!=''&&_0x1ccf09[_0x12cfaf(0xd9)]&&(_0x148ef7[_0x12cfaf(0xd9)]=_0x1ccf09[_0x12cfaf(0xd9)]);_0x1bd468=HAXCMS[_0x12cfaf(0xf1)](_0x148ef7['title']);_0x1ccf09[_0x12cfaf(0x116)]==null?(_0x148ef7[_0x12cfaf(0x116)]=null,_0x148ef7['indent']=0x0):(typeof _0x147b8b[_0x1ccf09[_0x12cfaf(0x116)]]!==_0x2aa703[_0x12cfaf(0x10e)]?_0x148ef7[_0x12cfaf(0x116)]=_0x147b8b[_0x1ccf09[_0x12cfaf(0x116)]]:_0x148ef7[_0x12cfaf(0x116)]=_0x1ccf09[_0x12cfaf(0x116)],_0x148ef7['indent']=_0x1ccf09[_0x12cfaf(0x115)]);typeof _0x1ccf09['order']!==_0x12cfaf(0xcc)?_0x148ef7['order']=_0x2aa703['WUZCI'](parseInt,_0x1ccf09['order']):_0x2aa703[_0x12cfaf(0x107)](_0x12cfaf(0xc0),_0x12cfaf(0xf7))?_0x148ef7[_0x12cfaf(0xc7)]=_0x2aa703[_0x12cfaf(0xf6)](parseInt,_0x4b8b5):_0x2ab813[_0x12cfaf(0xc7)]=_0x43bcbe(_0x30624e);_0x2aa703[_0x12cfaf(0xca)](typeof _0x1ccf09[_0x12cfaf(0xc2)],_0x12cfaf(0xcc))&&_0x1ccf09[_0x12cfaf(0xc2)]!=''?_0x148ef7[_0x12cfaf(0xc2)]=_0x1ccf09[_0x12cfaf(0xc2)]:_0x148ef7[_0x12cfaf(0xc2)]=_0x2aa703[_0x12cfaf(0xd4)](_0x2aa703['XQaPL'](_0x2aa703[_0x12cfaf(0xdc)],_0x148ef7['id']),_0x2aa703['ORvfx']);if(typeof _0x1ccf09[_0x12cfaf(0x113)]!==_0x12cfaf(0xcc)&&_0x1ccf09[_0x12cfaf(0x113)]!=''){}else _0x148ef7[_0x12cfaf(0x113)]=_0x4bb0d1['getUniqueSlugName'](_0x1bd468,_0x148ef7,!![]);let _0x4d9e3c=_0x4bb0d1[_0x12cfaf(0xc5)](_0x148ef7['id']);if(!_0x4d9e3c)await HAXCMS[_0x12cfaf(0x111)](_0x2aa703['XYDtc'](HAXCMS['boilerplatePath'],_0x12cfaf(0xc6)),_0x2aa703[_0x12cfaf(0xe1)](_0x2aa703[_0x12cfaf(0xf9)](_0x4bb0d1[_0x12cfaf(0xde)],'/'),_0x148ef7[_0x12cfaf(0xc2)][_0x12cfaf(0xd8)](_0x12cfaf(0x10a),'')));else{let _0xcea456=![];for(var _0x3db143 in _0x41f17f){let _0x5b49e2=_0x41f17f[_0x3db143];if(_0x5b49e2['id']==_0x148ef7['id']&&_0x2aa703[_0x12cfaf(0xda)](_0x5b49e2[_0x12cfaf(0x113)],'')){if(typeof _0x4bb0d1[_0x12cfaf(0xf3)][_0x12cfaf(0xd1)]['site']['settings'][_0x12cfaf(0xeb)]!==_0x2aa703[_0x12cfaf(0x10e)]&&_0x4bb0d1['manifest']['metadata'][_0x12cfaf(0xc9)][_0x12cfaf(0x110)][_0x12cfaf(0xeb)])_0xcea456=!![],_0x148ef7[_0x12cfaf(0x113)]=_0x4bb0d1['getUniqueSlugName'](HAXCMS[_0x12cfaf(0xf1)](_0x148ef7[_0x12cfaf(0xd9)]),_0x148ef7,!![]);else _0x2aa703[_0x12cfaf(0xda)](_0x5b49e2['slug'],_0x148ef7[_0x12cfaf(0x113)])&&(_0xcea456=!![],_0x148ef7[_0x12cfaf(0x113)]=HAXCMS[_0x12cfaf(0xfc)](_0x5b49e2[_0x12cfaf(0x113)]));}}if(!_0xcea456&&!fs[_0x12cfaf(0xd2)](_0x2aa703[_0x12cfaf(0xe4)](_0x2aa703['skxfd'](_0x4bb0d1['siteDirectory'],'/'),_0x148ef7[_0x12cfaf(0xc2)]))){const _0x2acabe=_0x12cfaf(0x10b)[_0x12cfaf(0x102)]('|');let _0x25b89c=0x0;while(!![]){switch(_0x2acabe[_0x25b89c++]){case'0':_0x148ef7[_0x12cfaf(0x113)]=tmpTitle;continue;case'1':_0x148ef7['location']=_0x2aa703['kVPmD'](_0x2aa703[_0x12cfaf(0xdc)],_0x148ef7['id'])+_0x2aa703[_0x12cfaf(0xdd)];continue;case'2':await HAXCMS['recurseCopy'](HAXCMS[_0x12cfaf(0x104)]+_0x12cfaf(0xc6),_0x2aa703[_0x12cfaf(0xbe)](_0x4bb0d1[_0x12cfaf(0xde)],'/')+_0x148ef7[_0x12cfaf(0xc2)][_0x12cfaf(0xd8)](_0x12cfaf(0x10a),''));continue;case'3':pAuto=![];continue;case'4':typeof _0x4bb0d1[_0x12cfaf(0xf3)][_0x12cfaf(0xd1)][_0x12cfaf(0xc9)][_0x12cfaf(0x110)][_0x12cfaf(0xeb)]!=='undefined'&&_0x4bb0d1[_0x12cfaf(0xf3)][_0x12cfaf(0xd1)][_0x12cfaf(0xc9)]['settings'][_0x12cfaf(0xeb)]&&(pAuto=!![]);continue;case'5':tmpTitle=_0x4bb0d1[_0x12cfaf(0xf2)](_0x1bd468,_0x148ef7,pAuto);continue;}break;}}}for(let _0xfc72c7 in _0x1ccf09['metadata']){_0x148ef7[_0x12cfaf(0xd1)][_0xfc72c7]=_0x1ccf09['metadata'][_0xfc72c7];}_0x2aa703[_0x12cfaf(0xe7)](typeof _0x148ef7['metadata'][_0x12cfaf(0xf4)],_0x2aa703['DofWn'])&&(_0x148ef7[_0x12cfaf(0xd1)][_0x12cfaf(0xf4)]=Math[_0x12cfaf(0xc1)](Date[_0x12cfaf(0xee)]()/0x3e8),_0x148ef7[_0x12cfaf(0xd1)]['images']=[],_0x148ef7[_0x12cfaf(0xd1)][_0x12cfaf(0xef)]=[]);_0x148ef7[_0x12cfaf(0xd1)][_0x12cfaf(0xf8)]=Math[_0x12cfaf(0xc1)](_0x2aa703['nZtWt'](Date['now'](),0x3e8));let _0x598eb2=_0x4bb0d1[_0x12cfaf(0xc5)](_0x148ef7['id']);_0x598eb2?await _0x4bb0d1['updateNode'](_0x148ef7):(_0x4bb0d1['manifest'][_0x12cfaf(0xcd)](_0x148ef7),await _0x4bb0d1['manifest'][_0x12cfaf(0xe3)](![]));}_0xca0b63=[..._0x4d2d22[_0x12cfaf(0xe5)][_0x2aa703[_0x12cfaf(0xf0)]]];for(let _0x3623ba in _0xca0b63){let _0x26c09d=_0xca0b63[_0x3623ba];_0x148ef7=_0x4bb0d1['loadNode'](_0x26c09d['id']);!_0x148ef7&&(_0x148ef7=_0x4bb0d1[_0x12cfaf(0xc5)](_0x147b8b[_0x26c09d['id']]));if(typeof _0x26c09d[_0x12cfaf(0x101)]!==_0x2aa703[_0x12cfaf(0x10e)]){let _0x2f5472=_0x4bb0d1[_0x12cfaf(0xc5)](_0x26c09d[_0x12cfaf(0x101)]);!_0x2f5472&&(_0x2f5472=_0x4bb0d1['loadNode'](_0x147b8b[_0x26c09d['duplicate']]));let _0x2fe32c=await _0x4bb0d1[_0x12cfaf(0xe8)](_0x2f5472);_0x2318ce=await _0x148ef7[_0x12cfaf(0xe0)](_0x2fe32c,_0x4bb0d1['siteDirectory']);}typeof _0x26c09d['contents']!==_0x12cfaf(0xcc)&&_0x26c09d[_0x12cfaf(0xfe)]&&_0x2aa703[_0x12cfaf(0xda)](_0x26c09d[_0x12cfaf(0xfe)],'')&&(_0x2aa703[_0x12cfaf(0xd6)]===_0x2aa703[_0x12cfaf(0xdb)]?(_0x18ec0c[_0x12cfaf(0x116)]=null,_0x2d898b[_0x12cfaf(0x115)]=0x0):_0x2318ce=await _0x148ef7[_0x12cfaf(0xe0)](_0x26c09d[_0x12cfaf(0xfe)],_0x4bb0d1[_0x12cfaf(0xde)]));}_0xca0b63=[..._0x4d2d22[_0x12cfaf(0xe5)][_0x2aa703[_0x12cfaf(0xf0)]]];for(let _0x64c9ca in _0xca0b63){let _0x1091ce=_0xca0b63[_0x64c9ca];typeof _0x1091ce[_0x12cfaf(0xec)]!=='undefined'&&_0x2aa703[_0x12cfaf(0xd0)](_0x1091ce[_0x12cfaf(0xec)],!![])&&(_0x148ef7=_0x4bb0d1[_0x12cfaf(0xc5)](_0x1091ce['id']),!_0x148ef7&&(_0x148ef7=_0x4bb0d1[_0x12cfaf(0xc5)](_0x147b8b[_0x1091ce['id']])),await _0x4bb0d1['deleteNode'](_0x148ef7),await _0x4bb0d1[_0x12cfaf(0xf5)](_0x2aa703['upmJt'](_0x2aa703['GKXwW'],_0x148ef7['title'])+'\x20('+_0x148ef7['id']+')'));}await _0x4bb0d1[_0x12cfaf(0xf3)]['save']();let _0x284f28=[..._0x4bb0d1[_0x12cfaf(0xf3)]['items']];for(let _0x1a9464 in _0x284f28){let _0x405fc4=_0x284f28[_0x1a9464];_0x148ef7=_0x4bb0d1[_0x12cfaf(0xc5)](_0x405fc4['id']);if(_0x148ef7&&_0x2aa703[_0x12cfaf(0xce)](_0x148ef7[_0x12cfaf(0x116)],null)){let _0x56f78a=_0x4bb0d1['loadNode'](_0x148ef7[_0x12cfaf(0x116)]);!_0x56f78a&&(_0x148ef7[_0x12cfaf(0x116)]=null,_0x148ef7[_0x12cfaf(0xc7)]=_0x2aa703[_0x12cfaf(0x10c)](_0x2aa703[_0x12cfaf(0xe4)](parseInt(_0x148ef7['order']),_0x4bb0d1[_0x12cfaf(0xf3)][_0x12cfaf(0xcf)][_0x12cfaf(0x109)]),0x1),await _0x4bb0d1[_0x12cfaf(0xc4)](_0x148ef7));}}_0x4bb0d1[_0x12cfaf(0xf3)][_0x12cfaf(0xd1)]['site']['updated']=Math[_0x12cfaf(0xc1)](_0x2aa703[_0x12cfaf(0xea)](Date[_0x12cfaf(0xee)](),0x3e8)),await _0x4bb0d1[_0x12cfaf(0xf3)][_0x12cfaf(0xe3)](),await _0x4bb0d1['updateAlternateFormats'](),await _0x4bb0d1[_0x12cfaf(0xf5)](_0x12cfaf(0xdf)),_0x54a790[_0x12cfaf(0xc8)](_0x4bb0d1[_0x12cfaf(0xf3)]['items']);}}else _0x54a790['sendStatus'](0x193);}function _0x13b1(){const _0x10f62a=['swhVk','getActiveUserName','dTbpS','321628BjBzrR','length','/index.html','3|4|5|1|0|2','pWiXF','MXBwJ','DofWn','AvLZB','settings','recurseCopy','7280469rzqbyC','slug','jYMBn','indent','parent','oArax','1120519TIaQvU','IgkHn','floor','location','DlGLk','updateNode','loadNode','page/default','order','send','site','lGQEG','5317035tGfvVO','undefined','addItem','PfRYS','items','tUpov','metadata','existsSync','dIyXq','RTmgq','3514780NcTHer','LVPJp','validateRequestToken','replace','title','OPPEx','WOEYf','plmGO','ORvfx','siteDirectory','Outline\x20updated\x20in\x20bulk','writeLocation','XzcPj','FlHpr','save','ccEpW','body','5626680gbERCC','UUzpJ','getPageContent','fhUso','nZtWt','pathauto','delete','3erdkgt','now','videos','hSvuK','cleanTitle','getUniqueSlugName','manifest','created','gitCommit','WUZCI','aySCh','updated','kVPmD','686968QjHyaZ','query','generateSlugName','UcFee','contents','Page\x20deleted:\x20','7NoAaFS','duplicate','split','pages/','boilerplatePath'];_0x13b1=function(){return _0x10f62a;};return _0x13b1();}module['exports']=saveOutline;