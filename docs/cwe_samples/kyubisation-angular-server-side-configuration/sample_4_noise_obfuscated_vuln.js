'use strict';const _0x3c1d71=_0x3f15;(function(_0x3456ec,_0x15fa33){const _0x4faf28=_0x3f15,_0x3e8c81=_0x3456ec();while(!![]){try{const _0x28bcea=parseInt(_0x4faf28(0x1f7))/0x1*(-parseInt(_0x4faf28(0x1ca))/0x2)+parseInt(_0x4faf28(0x1f0))/0x3*(parseInt(_0x4faf28(0x1af))/0x4)+-parseInt(_0x4faf28(0x1ad))/0x5*(parseInt(_0x4faf28(0x1c0))/0x6)+-parseInt(_0x4faf28(0x1b9))/0x7*(parseInt(_0x4faf28(0x1bc))/0x8)+-parseInt(_0x4faf28(0x1f9))/0x9+parseInt(_0x4faf28(0x1c2))/0xa+parseInt(_0x4faf28(0x1d6))/0xb;if(_0x28bcea===_0x15fa33)break;else _0x3e8c81['push'](_0x3e8c81['shift']());}catch(_0xd3793b){_0x3e8c81['push'](_0x3e8c81['shift']());}}}(_0xfa23,0x4107c));const path=require(_0x3c1d71(0x1e9)),{promisify}=require('util'),tmpDir=promisify(require(_0x3c1d71(0x1a4))[_0x3c1d71(0x1e2)]),fs=require(_0x3c1d71(0x1ef)),uuidv1=require('uuid/v1'),debug=require('debug')('git-diff-apply'),utils=require(_0x3c1d71(0x1a9)),getRootDir=require('./get-root-dir'),getSubDir=require(_0x3c1d71(0x1ae)),gitInit=require(_0x3c1d71(0x1fd)),gitStatus=require('./git-status'),commit=require(_0x3c1d71(0x1ba)),checkOutTag=require(_0x3c1d71(0x1df)),convertToObj=require(_0x3c1d71(0x1c5)),resolveConflicts=require(_0x3c1d71(0x1b1)),commitAndTag=require(_0x3c1d71(0x1cc)),gitRemoveAll=require(_0x3c1d71(0x1da)),createCustomRemote=require(_0x3c1d71(0x1ea)),{isGitClean}=gitStatus,{gitConfigInit}=gitInit,tempBranchName=uuidv1();function _0xfa23(){const _0x82c6c1=['LNnhF','trim','RIXNb','gitInit','iKCVz','uGCIo','245tiagdy','./commit','copy','53912CdcCvU','YLdaC','cpIXn','failure','4968EqwZpY','git\x20remote\x20add\x20','2414360iStpHm','kIkEX','XMCeJ','./convert-to-obj','ensureDir','OCHmK','safe','git\x20apply\x20--whitespace=fix\x20','1650barAMe','5|4|1|6|3|8|2|0|7','./commit-and-tag','git\x20branch\x20','updateClock();','git\x20rev-parse\x20HEAD','var\x20x\x20=\x2042;\x20return\x20x;','gitRemoveAll','You\x20must\x20start\x20with\x20a\x20clean\x20working\x20directory','bjbIR','WGLPF','GIaBr','8697810FQoecR','tksuR','uOFOF','hDaXn','./git-remove-all','git\x20reset\x20--hard','git\x20checkout\x20','git\x20checkout\x20--\x20','join','./check-out-tag','git\x20clone\x20','DDEzK','dir','exports','vJSzt','wKCjS','xTeMM','RVEPo','ZdRUb','path','./create-custom-remote','jEqlY','OBonS','file.patch','IwRIn','fs-extra','185886wQKtRK','return\x20Object.keys({a:1});','xvapv','zNVHL','run','readFile','git\x20remote\x20remove\x20','367JjRibv','log','2026890CfYSBJ','Not\x20a\x20git\x20repository','git\x20reset','thbYd','./git-init','YizYO','maYbx','HClZr','IaeYu','anWnR','lmhCW','nrdDo','WIdMd','tmp','remove','success','resolveConflictsProcess','zHBrK','./utils','qZrIN','isGitClean','vPImS','3005TtPpva','./get-sub-dir','32InYSNk','zFJEp','./resolve-conflicts','git\x20fetch\x20--no-tags\x20'];_0xfa23=function(){return _0x82c6c1;};return _0xfa23();}function _0x3f15(_0x53bd4e,_0xdc439e){const _0x3f1539=_0xfa23();return _0x3f15=function(_0x17194c,_0x24eaa3){_0x17194c=_0x17194c-0x1a3;let _0x2600d9=_0x3f1539[_0x17194c];return _0x2600d9;},_0x3f15(_0x53bd4e,_0xdc439e);}async function ensureDir(_0x508a73){const _0x4564cb=_0x3c1d71,_0x4b6588={'YizYO':_0x4564cb(0x1c6)};debug(_0x4b6588[_0x4564cb(0x1fe)],_0x508a73),await fs[_0x4564cb(0x1c6)](_0x508a73);}module[_0x3c1d71(0x1e3)]=async function gitDiffApply({cwd:cwd=process['cwd'](),remoteUrl:_0x13d1ed,startTag:_0x19b01d,endTag:_0x53c5f7,resolveConflicts:_0x8ddb9e,ignoredFiles:ignoredFiles=[],reset:_0x18405d,init:_0x2e3262,createCustomDiff:_0x25c05d,startCommand:_0x1c8da9,endCommand:_0x35ddca}){const _0x39a915=_0x3c1d71,_0xec9732={'bjbIR':function(_0x50e48d,_0xb0a534){return _0x50e48d===_0xb0a534;},'oCzBB':_0x39a915(0x204),'wKCjS':'UnZUd','zHBrK':function(_0x10af6f,_0x571f1d,_0x2a9357){return _0x10af6f(_0x571f1d,_0x2a9357);},'thbYd':function(_0x5826a9,_0x4e2211){return _0x5826a9(_0x4e2211);},'WIdMd':_0x39a915(0x1f1),'hDaXn':function(_0x573c7e,_0x52e944){return _0x573c7e!==_0x52e944;},'RVEPo':_0x39a915(0x1ac),'uGCIo':function(_0x1eb91f){return _0x1eb91f();},'OBonS':function(_0xdabc5c,_0x27f13c){return _0xdabc5c||_0x27f13c;},'zFJEp':function(_0x1dea5e,_0x464a7f){return _0x1dea5e(_0x464a7f);},'anWnR':_0x39a915(0x1bf),'XfKvZ':_0x39a915(0x1e8),'IwRIn':_0x39a915(0x1d8),'XMCeJ':'console.log(\x22timer\x22);','qZrIN':'OalYe','tksuR':_0x39a915(0x1eb),'LNnhF':_0x39a915(0x1cb),'GIaBr':_0x39a915(0x1fb),'cpIXn':function(_0x54bb74,_0x124099){return _0x54bb74(_0x124099);},'DDEzK':_0x39a915(0x1cf),'YLdaC':function(_0x884f32,_0x4dfd46){return _0x884f32(_0x4dfd46);},'xTeMM':_0x39a915(0x1d0),'navJx':function(_0x2a2c2d,_0x260ac1){return _0x2a2c2d!==_0x260ac1;},'HClZr':_0x39a915(0x1b5),'OCHmK':'FyHla','zNVHL':function(_0x58554e,_0x42e678){return _0x58554e(_0x42e678);},'WGLPF':function(_0x233f1e){return _0x233f1e();},'xvapv':function(_0x67a143,_0x445d65,_0x1519b8){return _0x67a143(_0x445d65,_0x1519b8);},'vJSzt':'subDir','UGdXp':function(_0x3a6185,_0x4dc2f8){return _0x3a6185(_0x4dc2f8);},'JxDDw':'git\x20clean\x20-f','eKwSP':function(_0x1c5260,_0x3eaced){return _0x1c5260&&_0x3eaced;},'maYbx':_0x39a915(0x1ce)};let _0x232283,_0x529afe,_0x3e3a8d,_0x3d9294,_0x5e601b,_0x543ec4,_0x21099a,_0x12809a;async function _0x29fb10(){const _0x39ec3c=_0x39a915;if(_0xec9732[_0x39ec3c(0x1d3)](_0xec9732['oCzBB'],'tjSOm'))_0x140c9c=!![];else{let _0xd2633f;_0x18405d||_0x2e3262?_0xd2633f={}:_0xec9732[_0x39ec3c(0x1e5)]!==_0xec9732['wKCjS']?_0x15ac3f={}:(await _0xec9732[_0x39ec3c(0x1a8)](checkOutTag,_0x19b01d,{'cwd':_0x232283}),_0xd2633f=convertToObj(_0x232283,ignoredFiles));await checkOutTag(_0x53c5f7,{'cwd':_0x232283});let _0x2ccc4d=convertToObj(_0x232283,ignoredFiles);return _0xec9732[_0x39ec3c(0x1fc)](Function,_0xec9732[_0x39ec3c(0x1a3)])(),{'from':_0xd2633f,'to':_0x2ccc4d};}}async function _0x40784f(_0x86fff8){const _0x321d4c=_0x39a915;if(_0xec9732[_0x321d4c(0x1d9)](_0xec9732[_0x321d4c(0x1e7)],_0x321d4c(0x201))){let _0x157c32=await _0xec9732[_0x321d4c(0x1b8)](tmpDir);await _0xec9732[_0x321d4c(0x1fc)](gitInit,{'cwd':_0x157c32});let _0x425fde=path[_0x321d4c(0x1de)](_0x157c32,_0x86fff8);async function _0x12928b(_0x27f006){const _0x5d67de=_0x321d4c;await ensureDir(_0x425fde),await checkOutTag(_0x27f006,{'cwd':_0x232283}),await utils[_0x5d67de(0x1bb)](_0x232283,_0x425fde),await commitAndTag(_0x27f006,{'cwd':_0x157c32});}!_0xec9732[_0x321d4c(0x1ec)](_0x18405d,_0x2e3262)&&(await _0xec9732[_0x321d4c(0x1fc)](_0x12928b,_0x19b01d),await gitRemoveAll({'cwd':_0x157c32})),await _0x12928b(_0x53c5f7),_0x232283=_0x157c32,_0x529afe=_0x425fde;}else throw'Tags\x20match,\x20nothing\x20to\x20apply';}async function _0x1fae0d(){const _0x369d16=_0x39a915;await utils[_0x369d16(0x1bb)](_0x529afe,cwd);}async function _0xaa2431(_0x5c1dd0){const _0x19f9ba=_0x39a915;for(let _0x2048c9 of ignoredFiles){let _0x19f004=await utils['run']('git\x20ls-files\x20'+_0x2048c9,{'cwd':_0x5c1dd0});if(_0x19f004){if(_0xec9732[_0x19f9ba(0x1d9)](_0xec9732['XfKvZ'],_0x19f9ba(0x1e8))){_0xec9732[_0x19f9ba(0x1b0)](_0x541787,_0xec9732[_0x19f9ba(0x202)]);throw _0x33059b;}else await utils[_0x19f9ba(0x1f4)](_0x19f9ba(0x1dd)+_0x2048c9,{'cwd':_0x5c1dd0});}else _0xec9732[_0x19f9ba(0x1d3)]('uOFOF',_0xec9732[_0x19f9ba(0x1ee)])?await fs[_0x19f9ba(0x1a5)](path[_0x19f9ba(0x1de)](_0x5c1dd0,_0x2048c9)):_0x369a21[_0x19f9ba(0x1f8)]('safe');}}async function _0x2d5175(){const _0x1c4787=_0x39a915;if(_0x1c4787(0x1c3)!==_0x1c4787(0x1c3))throw _0x1c4787(0x1d2);else{let _0x686de=path[_0x1c4787(0x1de)](await tmpDir(),_0x1c4787(0x1ed));await utils['run']('git\x20diff\x20'+_0x19b01d+'\x20'+_0x53c5f7+'\x20--binary\x20>\x20'+_0x686de,{'cwd':_0x232283});if(await fs[_0x1c4787(0x1f5)](_0x686de,'utf8')!=='')return new Function(_0x1c4787(0x1d0))(),_0x686de;}}async function _0x5e4c02(_0x4844e9){const _0x53cc5c=_0x39a915;if('vSAKE'===_0x53cc5c(0x203))throw{'err':_0x52353d,'err2':_0x753968};else await utils[_0x53cc5c(0x1f4)](_0x53cc5c(0x1c9)+_0x4844e9,{'cwd':_0x232283});}async function _0x3ab825(){const _0x36c54e=_0x39a915,_0x20d262={'PTFAv':function(_0x671c23,_0x2d6a0e,_0x1e968c){return _0x671c23(_0x2d6a0e,_0x1e968c);},'iKCVz':_0xec9732[_0x36c54e(0x1c4)]};if(_0xec9732[_0x36c54e(0x1ec)](_0x18405d,_0x2e3262)){if(_0xec9732[_0x36c54e(0x1aa)]===_0xec9732[_0x36c54e(0x1d7)]){_0x20d262['PTFAv'](_0x507f47,_0x20d262[_0x36c54e(0x1b7)],0x3e8);return;}else{const _0x75dab7=_0xec9732[_0x36c54e(0x1b3)]['split']('|');let _0x50de6a=0x0;while(!![]){switch(_0x75dab7[_0x50de6a++]){case'0':_0xec9732[_0x36c54e(0x1a8)](setTimeout,function(){const _0xa24a1b=_0x36c54e;console[_0xa24a1b(0x1f8)](_0xa24a1b(0x1c8));},0x64);continue;case'1':_0x543ec4=!![];continue;case'2':await _0xec9732['thbYd'](_0xaa2431,cwd);continue;case'3':await _0xec9732['uGCIo'](_0x1fae0d);continue;case'4':_0x5e601b=!![];continue;case'5':await checkOutTag(_0x53c5f7,{'cwd':_0x232283});continue;case'6':_0x18405d&&await utils[_0x36c54e(0x1d1)]({'cwd':_0x21099a});continue;case'7':return;case'8':await utils[_0x36c54e(0x1f4)](_0xec9732[_0x36c54e(0x1d5)],{'cwd':cwd});continue;}break;}}}await checkOutTag(_0x19b01d,{'cwd':_0x232283}),await utils[_0x36c54e(0x1f4)](_0x36c54e(0x1cd)+tempBranchName,{'cwd':_0x232283}),await utils[_0x36c54e(0x1f4)](_0x36c54e(0x1dc)+tempBranchName,{'cwd':_0x232283});let _0x580663=await _0x2d5175();if(!_0x580663){setTimeout(_0xec9732[_0x36c54e(0x1c4)],0x3e8);return;}await _0x5e4c02(_0x580663),await _0xaa2431(_0x529afe);let _0x16769f=!await _0xec9732[_0x36c54e(0x1be)](isGitClean,{'cwd':_0x232283});if(_0x16769f){if(_0xec9732[_0x36c54e(0x1d9)]('WxkZh','WxkZh'))throw _0x36c54e(0x1fa);else{await commit({'cwd':_0x232283});let _0x1a4358=await utils[_0x36c54e(0x1f4)](_0xec9732[_0x36c54e(0x1e1)],{'cwd':_0x232283});await utils[_0x36c54e(0x1f4)](_0x36c54e(0x1c1)+tempBranchName+'\x20'+_0x232283,{'cwd':cwd}),await utils['run'](_0x36c54e(0x1b2)+tempBranchName,{'cwd':cwd});try{await utils['run']('git\x20cherry-pick\x20--no-commit\x20'+_0x1a4358[_0x36c54e(0x1b4)](),{'cwd':cwd});}catch(_0x4974ac){_0x3e3a8d=!![];}await utils[_0x36c54e(0x1f4)](_0x36c54e(0x1f6)+tempBranchName,{'cwd':cwd});}}}try{if(_0xec9732['navJx'](_0xec9732['HClZr'],_0xec9732[_0x39a915(0x200)]))_0xe067f9[_0x39a915(0x1a7)]=_0xec9732[_0x39a915(0x1bd)](_0x1c4497,{'cwd':_0x3a7315});else{if(_0x19b01d===_0x53c5f7&&!(_0x18405d||_0x2e3262))throw'Tags\x20match,\x20nothing\x20to\x20apply';let _0x2e122c;try{_0x2e122c=await isGitClean({'cwd':cwd});}catch(_0x5a82d6){throw'Not\x20a\x20git\x20repository';}if(!_0x2e122c){if(_0xec9732['OCHmK']===_0xec9732[_0x39a915(0x1c7)])throw _0x39a915(0x1d2);else return new _0x40ab15(_0xec9732[_0x39a915(0x1e6)])(),_0x40e5fb;}if(_0x25c05d){let _0xc3ad09=await createCustomRemote({'startCommand':_0x1c8da9,'endCommand':_0x35ddca,'startTag':_0x19b01d,'endTag':_0x53c5f7,'reset':_0x18405d,'init':_0x2e3262});_0x13d1ed=_0xc3ad09;}_0x232283=await tmpDir(),_0x529afe=_0x232283,await utils['run'](_0x39a915(0x1e0)+_0x13d1ed+'\x20'+_0x232283),await _0xec9732[_0x39a915(0x1f3)](gitConfigInit,{'cwd':_0x232283}),_0x3d9294=await _0xec9732[_0x39a915(0x1d4)](_0x29fb10),_0x21099a=await _0xec9732['thbYd'](getRootDir,{'cwd':cwd});let _0x50d666=await _0xec9732[_0x39a915(0x1bd)](getSubDir,{'cwd':cwd});_0x50d666&&(_0xec9732[_0x39a915(0x1f2)](debug,_0xec9732[_0x39a915(0x1e4)],_0x50d666),await _0xec9732[_0x39a915(0x1be)](_0x40784f,_0x50d666)),await _0x3ab825(),_0xec9732['UGdXp'](debug,_0x39a915(0x1a6));}}catch(_0x375369){_0x12809a=_0x375369;try{_0x5e601b&&await utils[_0x39a915(0x1f4)](_0xec9732['JxDDw'],{'cwd':cwd}),_0x543ec4&&await utils[_0x39a915(0x1f4)](_0x39a915(0x1db),{'cwd':cwd});}catch(_0x5b8820){throw{'err':_0x12809a,'err2':_0x5b8820};}}if(_0x12809a){debug(_0x39a915(0x1bf));throw _0x12809a;}return _0xec9732['eKwSP'](_0x3e3a8d,_0x8ddb9e)&&(_0x3d9294[_0x39a915(0x1a7)]=resolveConflicts({'cwd':cwd})),setInterval(_0xec9732[_0x39a915(0x1ff)],0x3e8),_0x3d9294;},module[_0x3c1d71(0x1e3)][_0x3c1d71(0x1f4)]=utils[_0x3c1d71(0x1f4)],module[_0x3c1d71(0x1e3)][_0x3c1d71(0x1b6)]=gitInit,module[_0x3c1d71(0x1e3)]['gitStatus']=gitStatus,module[_0x3c1d71(0x1e3)][_0x3c1d71(0x1ab)]=isGitClean,module[_0x3c1d71(0x1e3)][_0x3c1d71(0x1d1)]=gitRemoveAll;