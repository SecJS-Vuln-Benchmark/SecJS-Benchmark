'use strict';function _0xa607(_0x40cedc,_0x3ee206){const _0x252d66=_0x252d();return _0xa607=function(_0xa60739,_0x24c1f4){_0xa60739=_0xa60739-0xdb;let _0xa8bbf7=_0x252d66[_0xa60739];return _0xa8bbf7;},_0xa607(_0x40cedc,_0x3ee206);}const _0x208ee7=_0xa607;(function(_0x148677,_0x76392f){const _0x37728a=_0xa607,_0x4ebfd2=_0x148677();while(!![]){try{const _0x554f2c=-parseInt(_0x37728a(0x121))/0x1+-parseInt(_0x37728a(0x12d))/0x2+-parseInt(_0x37728a(0x122))/0x3*(-parseInt(_0x37728a(0x137))/0x4)+parseInt(_0x37728a(0x10d))/0x5+parseInt(_0x37728a(0xe8))/0x6*(-parseInt(_0x37728a(0xfb))/0x7)+-parseInt(_0x37728a(0x104))/0x8+parseInt(_0x37728a(0x116))/0x9*(parseInt(_0x37728a(0xea))/0xa);if(_0x554f2c===_0x76392f)break;else _0x4ebfd2['push'](_0x4ebfd2['shift']());}catch(_0x49dd18){_0x4ebfd2['push'](_0x4ebfd2['shift']());}}}(_0x252d,0x4c4fa));function _0x252d(){const _0x23d9f6=['closeSession','terminate','2490BfwTxo','state','10rmWQVL','mwlEP','instanceOf','node-opcua-address-space/testHelpers','BadTimeout','akUkg','initialize','nodeId','node-opcua-status-code','ns=0;i=2258','responseHeader','constructor','LATE','maxKeepAliveCount','node-opcua-types','FolderType','callCount','6503mQymgu','samplingFunc','./helper_with_fake_timer','should','BpZFS','ZDZ-2\x20LifetimeCount,\x20the\x20publish\x20engine\x20shall\x20send\x20a\x20StatusChangeNotification\x20to\x20inform\x20that\x20a\x20subscription\x20has\x20been\x20closed\x20because\x20of\x20lifetime\x20timeout\x20-\x20with\x202\x20subscriptions','AZW1\x20should\x20receive\x20StatusChangeNotification\x20from\x20first\x20subscription\x20even\x20if\x20publishRequest\x20arrives\x20late','length','clock','4749792xUtJth','uEazn','ERFzJ','publishingInterval','node-opcua-service-subscription','createMonitoredItem','deleteSubscription','status','dispose','105060DpsFZu','StatusChangeNotification','createSubscription','VaCbd','monitoredItem','node-opcua-service-read','cDVID','ZDZ-1\x20create\x20and\x20terminate\x202\x20subscriptions\x20,\x20with\x204\x20publish\x20requests','OjHCF','13790394kfnAds','CREATING','tick','AZW2\x20should\x20terminate\x20a\x20orphan\x20subscription\x20containing\x20monitored\x20items','shutdown','EsyNs','messageSent','BaseDataVariableType','errWa','cumulatedSessionCount','removeListener','375017fpBJFF','51bcSxuv','hxDoC','DdsTc','KEEPALIVE','XCX\x20session\x20should\x20emit\x20a\x20new_subscription\x20and\x20subscription_terminated\x20event','SeSfl','BadNoSubscription','subscription_terminated','notificationMessage','findNode','ServerEngine\x20Subscriptions\x20service','705178IGBzja','DswOT','should\x20check\x20the\x20subscription\x20live\x20cycle','createSession','name','serviceResult','Reporting','CLOSED','call','cumulatedSubscriptionCount','109684jBEKrk','args','node-opcua-leak-detector','requestHandle','spy','authenticationToken','_on_PublishRequest','MBjXE','publishEngine','currentSubscriptionCount','lifeTimeCount','eql','addressSpace','equal','IESGi','monitoredItemCount','getCall','notificationData','YYxpU','Both','subscriptionId','CloseSession','SuVvg','Good','BadSubscriptionIdInvalid'];_0x252d=function(){return _0x23d9f6;};return _0x252d();}const should=require('should'),sinon=require('sinon'),{MonitoringMode,PublishRequest}=require(_0x208ee7(0x108)),{StatusCodes,StatusCode}=require(_0x208ee7(0xf2)),{TimestampsToReturn}=require(_0x208ee7(0x112)),{MonitoredItemCreateRequest}=require(_0x208ee7(0x108)),{ServiceFault}=require(_0x208ee7(0xf8)),{get_mini_nodeset_filename}=require(_0x208ee7(0xed)),{ServerEngine,SubscriptionState}=require('..'),{with_fake_timer}=require(_0x208ee7(0xfd)),mini_nodeset_filename=get_mini_nodeset_filename(),describe=require(_0x208ee7(0x139))['describeWithLeakDetector'];describe(_0x208ee7(0x12c),function(){const _0x2566d7=_0x208ee7,_0x276495={'OjHCF':_0x2566d7(0x11d),'BpZFS':function(_0x1d184a){return _0x1d184a();},'cDVID':'new_subscription','SuVvg':function(_0x12d703,_0x453909){return _0x12d703*_0x453909;},'IESGi':_0x2566d7(0xe2),'errWa':function(_0x36c854,_0x2094d2){return _0x36c854*_0x2094d2;},'YYxpU':function(_0x2a664d,_0x39d8c6,_0x18f9d9){return _0x2a664d(_0x39d8c6,_0x18f9d9);},'VaCbd':'should\x20return\x20an\x20error\x20when\x20trying\x20to\x20delete\x20an\x20non-existing\x20subscription','mwlEP':_0x2566d7(0x12f),'EsyNs':'should\x20maintain\x20the\x20correct\x20number\x20of\x20cumulatedSubscriptionCount\x20at\x20the\x20engine\x20level','hxDoC':'DDD\x20delete\x20a\x20subscription\x20with\x202\x20outstanding\x20PublishRequest','MBjXE':_0x2566d7(0x114),'DdsTc':'AZQ\x20should\x20receive\x20StatusChangeNotification\x20from\x20first\x20subscription\x20even\x20if\x20publishRequest\x20arrives\x20late','uEazn':function(_0x186f8d,_0x2e7574,_0x41021f){return _0x186f8d(_0x2e7574,_0x41021f);},'akUkg':_0x2566d7(0x101)},_0x30c2cc=this;let _0x3ff462,_0x30606a,_0x438032,_0x58832a;beforeEach(function(_0x56aa38){const _0x27e249=_0x2566d7;_0x3ff462=new ServerEngine(),_0x3ff462[_0x27e249(0xf0)]({'nodeset_filename':mini_nodeset_filename},function(){const _0x59e6d8=_0x27e249;_0x438032=_0x3ff462['addressSpace'][_0x59e6d8(0x12b)](_0x59e6d8(0xf9))[_0x59e6d8(0xf1)],_0x58832a=_0x3ff462[_0x59e6d8(0x143)][_0x59e6d8(0x12b)](_0x276495[_0x59e6d8(0x115)])[_0x59e6d8(0xf1)],_0x276495[_0x59e6d8(0xff)](_0x56aa38);});}),afterEach(async()=>{const _0x3b0e30=_0x2566d7;_0x30606a=null,should['exist'](_0x3ff462),await _0x3ff462[_0x3b0e30(0x11a)](),_0x3ff462=null;}),setInterval('updateClock();',0x3e8),_0x276495[_0x2566d7(0xdf)](it,_0x276495[_0x2566d7(0x110)],async()=>{const _0x349bd1=_0x2566d7;_0x30606a=_0x3ff462[_0x349bd1(0x130)]();const _0x45c250=await _0x30606a[_0x349bd1(0x10a)](-0x1a85);_0x45c250['should'][_0x349bd1(0x142)](StatusCodes[_0x349bd1(0xe5)]);}),_0x276495['YYxpU'](it,_0x276495[_0x2566d7(0xeb)],async()=>{const _0x48a728=_0x2566d7;_0x30606a=_0x3ff462[_0x48a728(0x130)](),_0x30606a['currentSubscriptionCount'][_0x48a728(0xfe)][_0x48a728(0x144)](0x0),_0x30606a['cumulatedSubscriptionCount']['should'][_0x48a728(0x144)](0x0);const _0x4c7ca1=_0x30606a['createSubscription']({'requestedPublishingInterval':0x3e8,'requestedLifetimeCount':0xa,'requestedMaxKeepAliveCount':0xa,'maxNotificationsPerPublish':0xa,'publishingEnabled':!![],'priority':0xe});_0x4c7ca1[_0x48a728(0xdc)][_0x48a728(0xfe)][_0x48a728(0x142)](0x0),_0x30606a[_0x48a728(0x140)][_0x48a728(0xfe)]['equal'](0x1),_0x30606a['cumulatedSubscriptionCount'][_0x48a728(0xfe)][_0x48a728(0x144)](0x1),_0x30606a['getSubscription'](_0x4c7ca1['id'])[_0x48a728(0xfe)][_0x48a728(0x144)](_0x4c7ca1);const _0x48bb27=await _0x30606a[_0x48a728(0x10a)](_0x4c7ca1['id']);_0x48bb27[_0x48a728(0xfe)]['eql'](StatusCodes[_0x48a728(0xe4)]),_0x30606a['currentSubscriptionCount'][_0x48a728(0xfe)]['equal'](0x0),_0x30606a[_0x48a728(0x136)][_0x48a728(0xfe)][_0x48a728(0x144)](0x1),_0x3ff462[_0x48a728(0x140)][_0x48a728(0xfe)][_0x48a728(0x144)](0x0),_0x3ff462[_0x48a728(0x136)]['should'][_0x48a728(0x144)](0x1),_0x4c7ca1[_0x48a728(0xe7)](),_0x4c7ca1[_0x48a728(0x10c)]();}),it(_0x2566d7(0x126),async()=>{const _0x5c1bda=_0x2566d7;_0x30606a=_0x3ff462[_0x5c1bda(0x130)](),_0x30606a['currentSubscriptionCount'][_0x5c1bda(0xfe)][_0x5c1bda(0x144)](0x0),_0x30606a[_0x5c1bda(0x136)][_0x5c1bda(0xfe)]['equal'](0x0);const _0x42bbc1=sinon['spy'](),_0x5ea321=sinon[_0x5c1bda(0x13b)]();_0x30606a['on']('new_subscription',_0x42bbc1),_0x30606a['on'](_0x5c1bda(0x129),_0x5ea321);const _0x2abda8=_0x30606a['createSubscription']({'requestedPublishingInterval':0x3e8,'requestedLifetimeCount':0xa,'requestedMaxKeepAliveCount':0xa,'maxNotificationsPerPublish':0xa,'publishingEnabled':!![],'priority':0xe});_0x30606a[_0x5c1bda(0x140)][_0x5c1bda(0xfe)][_0x5c1bda(0x144)](0x1),_0x30606a[_0x5c1bda(0x136)][_0x5c1bda(0xfe)][_0x5c1bda(0x144)](0x1),_0x42bbc1['callCount'][_0x5c1bda(0xfe)]['eql'](0x1),_0x5ea321[_0x5c1bda(0xfa)][_0x5c1bda(0xfe)][_0x5c1bda(0x142)](0x0);const _0x180664=await _0x30606a[_0x5c1bda(0x10a)](_0x2abda8['id']);_0x180664['should']['be'][_0x5c1bda(0xec)](StatusCode),_0x42bbc1[_0x5c1bda(0xfa)][_0x5c1bda(0xfe)]['eql'](0x1),_0x5ea321[_0x5c1bda(0xfa)][_0x5c1bda(0xfe)][_0x5c1bda(0x142)](0x1),_0x30606a[_0x5c1bda(0x120)](_0x276495[_0x5c1bda(0x113)],_0x42bbc1),_0x30606a['removeListener'](_0x5c1bda(0x129),_0x5ea321),_0x30606a[_0x5c1bda(0x140)][_0x5c1bda(0xfe)][_0x5c1bda(0x144)](0x0),_0x30606a[_0x5c1bda(0x136)][_0x5c1bda(0xfe)][_0x5c1bda(0x144)](0x1);}),_0x276495[_0x2566d7(0xdf)](it,_0x276495[_0x2566d7(0x11b)],async()=>{const _0x54c86e=_0x2566d7;_0x30606a=_0x3ff462['createSession']();const _0x417d20={'requestedPublishingInterval':0x3e8,'requestedLifetimeCount':0xa,'requestedMaxKeepAliveCount':0xa,'maxNotificationsPerPublish':0xa,'publishingEnabled':!![],'priority':0xe};_0x3ff462['currentSubscriptionCount']['should'][_0x54c86e(0x144)](0x0),_0x3ff462[_0x54c86e(0x136)]['should'][_0x54c86e(0x144)](0x0),_0x3ff462['currentSessionCount'][_0x54c86e(0xfe)]['equal'](0x1),_0x3ff462[_0x54c86e(0x11f)][_0x54c86e(0xfe)]['equal'](0x1);const _0x335113=_0x30606a[_0x54c86e(0x10f)](_0x417d20);_0x3ff462[_0x54c86e(0x140)][_0x54c86e(0xfe)][_0x54c86e(0x144)](0x1),_0x3ff462[_0x54c86e(0x136)][_0x54c86e(0xfe)][_0x54c86e(0x144)](0x1);const _0x23062b=_0x30606a[_0x54c86e(0x10f)](_0x417d20);_0x3ff462[_0x54c86e(0x140)][_0x54c86e(0xfe)][_0x54c86e(0x144)](0x2),_0x3ff462[_0x54c86e(0x136)][_0x54c86e(0xfe)][_0x54c86e(0x144)](0x2),await _0x30606a[_0x54c86e(0x10a)](_0x23062b['id']),_0x3ff462['currentSubscriptionCount'][_0x54c86e(0xfe)]['equal'](0x1),_0x3ff462[_0x54c86e(0x136)][_0x54c86e(0xfe)][_0x54c86e(0x144)](0x2);const _0x2d6998=_0x3ff462[_0x54c86e(0x130)]();_0x3ff462['currentSessionCount'][_0x54c86e(0xfe)][_0x54c86e(0x144)](0x2),_0x3ff462[_0x54c86e(0x11f)][_0x54c86e(0xfe)][_0x54c86e(0x144)](0x2),_0x3ff462[_0x54c86e(0x140)][_0x54c86e(0xfe)]['equal'](0x1);const _0xb4b05a=_0x2d6998[_0x54c86e(0x10f)](_0x417d20),_0x1aad20=_0x2d6998['createSubscription'](_0x417d20),_0x487476=_0x2d6998[_0x54c86e(0x10f)](_0x417d20);_0x3ff462[_0x54c86e(0x140)]['should'][_0x54c86e(0x144)](0x4),_0x3ff462['cumulatedSubscriptionCount']['should'][_0x54c86e(0x144)](0x5),await _0x3ff462[_0x54c86e(0xe6)](_0x2d6998['authenticationToken'],!![]),_0x3ff462['currentSessionCount']['should'][_0x54c86e(0x144)](0x1),_0x3ff462[_0x54c86e(0x11f)][_0x54c86e(0xfe)][_0x54c86e(0x144)](0x2),_0x3ff462[_0x54c86e(0x140)][_0x54c86e(0xfe)][_0x54c86e(0x144)](0x1),_0x3ff462[_0x54c86e(0x136)][_0x54c86e(0xfe)][_0x54c86e(0x144)](0x5),await _0x30606a[_0x54c86e(0x10a)](_0x335113['id']),_0x3ff462[_0x54c86e(0x140)]['should'][_0x54c86e(0x144)](0x0),_0x3ff462[_0x54c86e(0x136)][_0x54c86e(0xfe)][_0x54c86e(0x144)](0x5);}),it(_0x276495[_0x2566d7(0x123)],async()=>{const _0x3d7ac7=_0x2566d7;_0x30606a=_0x3ff462['createSession']();const _0x21d8f2={'requestedPublishingInterval':0x3e8,'requestedLifetimeCount':0xa,'requestedMaxKeepAliveCount':0xa,'maxNotificationsPerPublish':0xa,'publishingEnabled':!![],'priority':0xe},_0x225638=_0x30606a[_0x3d7ac7(0x10f)](_0x21d8f2),_0x41ac04=sinon[_0x3d7ac7(0x13b)](),_0x35fb16={'requestHeader':{'requestHandle':0x64}};_0x30606a['publishEngine'][_0x3d7ac7(0x13d)](new PublishRequest(_0x35fb16),_0x41ac04);const _0x20f7b0={'requestHeader':{'requestHandle':0x65}};_0x30606a['publishEngine']['_on_PublishRequest'](new PublishRequest(_0x20f7b0),_0x41ac04),_0x41ac04['callCount'][_0x3d7ac7(0xfe)][_0x3d7ac7(0x142)](0x0),await _0x30606a['deleteSubscription'](_0x225638['id']),_0x41ac04['callCount'][_0x3d7ac7(0xfe)][_0x3d7ac7(0x142)](0x2),_0x41ac04[_0x3d7ac7(0xdd)](0x0)[_0x3d7ac7(0x138)][0x1][_0x3d7ac7(0xf4)][_0x3d7ac7(0x13a)][_0x3d7ac7(0xfe)][_0x3d7ac7(0x142)](0x64),_0x41ac04['getCall'](0x1)['args'][0x1]['responseHeader'][_0x3d7ac7(0x13a)][_0x3d7ac7(0xfe)][_0x3d7ac7(0x142)](0x65),_0x41ac04[_0x3d7ac7(0xdd)](0x0)[_0x3d7ac7(0x138)][0x1][_0x3d7ac7(0xf4)][_0x3d7ac7(0x132)][_0x3d7ac7(0xfe)]['eql'](StatusCodes[_0x3d7ac7(0x128)]),_0x41ac04[_0x3d7ac7(0xdd)](0x1)[_0x3d7ac7(0x138)][0x1][_0x3d7ac7(0xf4)]['serviceResult'][_0x3d7ac7(0xfe)]['eql'](StatusCodes[_0x3d7ac7(0x128)]);}),_0x276495[_0x2566d7(0xdf)](it,_0x276495[_0x2566d7(0x13e)],async()=>{const _0x703a71=_0x2566d7;await with_fake_timer[_0x703a71(0x135)](_0x30c2cc,async()=>{const _0x1b7c4c=_0x703a71;_0x30606a=_0x3ff462[_0x1b7c4c(0x130)]({'sessionTimeout':0x5f5e100});const _0x1bcc43={'requestedPublishingInterval':0x3e8,'requestedLifetimeCount':0x3c,'requestedMaxKeepAliveCount':0xa,'maxNotificationsPerPublish':0xa,'publishingEnabled':!![],'priority':0xe},_0xa046b4=_0x30606a[_0x1b7c4c(0x10f)](_0x1bcc43);_0xa046b4['state']['should'][_0x1b7c4c(0x142)](SubscriptionState[_0x1b7c4c(0x117)]),_0x30c2cc['clock'][_0x1b7c4c(0x118)](_0xa046b4[_0x1b7c4c(0x107)]),_0xa046b4['state'][_0x1b7c4c(0xfe)][_0x1b7c4c(0x142)](SubscriptionState[_0x1b7c4c(0x117)]),_0xa046b4[_0x1b7c4c(0x11c)]['should']['eql'](![]),await _0x30606a[_0x1b7c4c(0x10a)](_0xa046b4['id']),_0xa046b4['state']['should'][_0x1b7c4c(0x142)](SubscriptionState[_0x1b7c4c(0x134)]);const _0x2f7577=_0x30606a[_0x1b7c4c(0x10f)](_0x1bcc43);_0x2f7577['state'][_0x1b7c4c(0xfe)][_0x1b7c4c(0x142)](SubscriptionState[_0x1b7c4c(0x117)]),_0x30c2cc['clock'][_0x1b7c4c(0x118)](_0x276495['SuVvg'](_0x2f7577[_0x1b7c4c(0x107)],_0x2f7577[_0x1b7c4c(0xf7)])),_0x2f7577[_0x1b7c4c(0xe9)]['should'][_0x1b7c4c(0x142)](SubscriptionState[_0x1b7c4c(0xf6)]);const _0x484210=sinon[_0x1b7c4c(0x13b)]();_0x30606a[_0x1b7c4c(0x13f)][_0x1b7c4c(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x64}}),_0x484210),_0x30606a['publishEngine'][_0x1b7c4c(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x65}}),_0x484210),_0x30606a[_0x1b7c4c(0x13f)][_0x1b7c4c(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x66}}),_0x484210),_0x30606a[_0x1b7c4c(0x13f)][_0x1b7c4c(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x67}}),_0x484210),_0x30c2cc[_0x1b7c4c(0x103)][_0x1b7c4c(0x118)](_0x2f7577[_0x1b7c4c(0x107)]),_0x2f7577['state'][_0x1b7c4c(0xfe)][_0x1b7c4c(0x142)](SubscriptionState[_0x1b7c4c(0x125)]),await _0x30606a[_0x1b7c4c(0x10a)](_0x2f7577['id']),_0x2f7577[_0x1b7c4c(0xe9)][_0x1b7c4c(0xfe)][_0x1b7c4c(0x142)](SubscriptionState[_0x1b7c4c(0x134)]),_0x484210[_0x1b7c4c(0xfa)][_0x1b7c4c(0xfe)]['eql'](0x4),_0x484210[_0x1b7c4c(0xdd)](0x0)['args'][0x1][_0x1b7c4c(0xf4)][_0x1b7c4c(0x132)]['should'][_0x1b7c4c(0x142)](StatusCodes['Good']),_0x484210['getCall'](0x0)['args'][0x1]['subscriptionId'][_0x1b7c4c(0xfe)][_0x1b7c4c(0x142)](_0x2f7577['id']),_0x484210[_0x1b7c4c(0xdd)](0x0)[_0x1b7c4c(0x138)][0x1][_0x1b7c4c(0x12a)]['notificationData'][_0x1b7c4c(0x102)]['should']['eql'](0x0),_0x484210['getCall'](0x1)[_0x1b7c4c(0x138)][0x1]['responseHeader'][_0x1b7c4c(0x132)][_0x1b7c4c(0xfe)][_0x1b7c4c(0x142)](StatusCodes[_0x1b7c4c(0x128)]),_0x484210[_0x1b7c4c(0xdd)](0x2)['args'][0x1][_0x1b7c4c(0xf4)]['serviceResult'][_0x1b7c4c(0xfe)][_0x1b7c4c(0x142)](StatusCodes[_0x1b7c4c(0x128)]),_0x484210[_0x1b7c4c(0xdd)](0x3)[_0x1b7c4c(0x138)][0x1][_0x1b7c4c(0xf4)][_0x1b7c4c(0x132)]['should'][_0x1b7c4c(0x142)](StatusCodes[_0x1b7c4c(0x128)]),await _0x3ff462['closeSession'](_0x30606a['authenticationToken'],!![],_0x276495[_0x1b7c4c(0xdb)]);});}),_0x276495[_0x2566d7(0xdf)](it,_0x2566d7(0x100),async()=>{const _0x2e451f=_0x2566d7;await with_fake_timer[_0x2e451f(0x135)](_0x30c2cc,async()=>{const _0x57efb0=_0x2e451f;_0x30606a=_0x3ff462[_0x57efb0(0x130)]({'sessionTimeout':0x5f5e100});const _0x28c8a6={'requestedPublishingInterval':0x3e8,'requestedLifetimeCount':0x3c,'requestedMaxKeepAliveCount':0xa,'maxNotificationsPerPublish':0xa,'publishingEnabled':!![],'priority':0xe},_0x4516fe=_0x30606a['createSubscription'](_0x28c8a6);_0x4516fe['publishingInterval'][_0x57efb0(0xfe)][_0x57efb0(0x142)](0x3e8),_0x4516fe[_0x57efb0(0xf7)]['should'][_0x57efb0(0x142)](0xa),_0x4516fe[_0x57efb0(0x141)][_0x57efb0(0xfe)][_0x57efb0(0x142)](0x3c),_0x4516fe[_0x57efb0(0xe9)][_0x57efb0(0xfe)][_0x57efb0(0x142)](SubscriptionState['CREATING']),_0x30c2cc[_0x57efb0(0x103)][_0x57efb0(0x118)](_0x4516fe[_0x57efb0(0x107)]),_0x4516fe[_0x57efb0(0xe9)][_0x57efb0(0xfe)][_0x57efb0(0x142)](SubscriptionState[_0x57efb0(0x117)]),_0x30c2cc[_0x57efb0(0x103)][_0x57efb0(0x118)](_0x276495[_0x57efb0(0x11e)](_0x4516fe['publishingInterval'],_0x4516fe[_0x57efb0(0xf7)])),_0x4516fe[_0x57efb0(0xe9)][_0x57efb0(0xfe)][_0x57efb0(0x142)](SubscriptionState[_0x57efb0(0xf6)]),_0x30c2cc[_0x57efb0(0x103)][_0x57efb0(0x118)](_0x276495[_0x57efb0(0xe3)](_0x4516fe['publishingInterval'],_0x4516fe[_0x57efb0(0xf7)])),_0x4516fe[_0x57efb0(0xe9)]['should'][_0x57efb0(0x142)](SubscriptionState['LATE']),_0x30c2cc['clock']['tick'](_0x4516fe[_0x57efb0(0x107)]*_0x4516fe[_0x57efb0(0x141)]),_0x4516fe[_0x57efb0(0xe9)][_0x57efb0(0xfe)][_0x57efb0(0x142)](SubscriptionState[_0x57efb0(0x134)]);const _0x4e96dc=_0x30606a[_0x57efb0(0x10f)](_0x28c8a6);_0x4e96dc[_0x57efb0(0xe9)][_0x57efb0(0xfe)]['eql'](SubscriptionState['CREATING']),_0x30c2cc[_0x57efb0(0x103)][_0x57efb0(0x118)](_0x4e96dc[_0x57efb0(0x107)]*_0x4e96dc[_0x57efb0(0xf7)]),_0x4e96dc['state'][_0x57efb0(0xfe)][_0x57efb0(0x142)](SubscriptionState['LATE']);const _0x5cb15c=sinon[_0x57efb0(0x13b)]();_0x30606a[_0x57efb0(0x13f)][_0x57efb0(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x65}}),_0x5cb15c),_0x30606a[_0x57efb0(0x13f)][_0x57efb0(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x66}}),_0x5cb15c),_0x30606a[_0x57efb0(0x13f)][_0x57efb0(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x67}}),_0x5cb15c),_0x30606a[_0x57efb0(0x13f)][_0x57efb0(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x68}}),_0x5cb15c),_0x30c2cc['clock'][_0x57efb0(0x118)](_0x4e96dc['publishingInterval']),await _0x30606a[_0x57efb0(0x10a)](_0x4e96dc['id']),_0x30c2cc[_0x57efb0(0x103)]['tick'](_0x4e96dc[_0x57efb0(0x107)]),_0x5cb15c[_0x57efb0(0xfa)][_0x57efb0(0xfe)]['eql'](0x4),_0x5cb15c['getCall'](0x0)[_0x57efb0(0x138)][0x1][_0x57efb0(0xf4)]['serviceResult'][_0x57efb0(0xfe)]['eql'](StatusCodes[_0x57efb0(0xe4)]),_0x5cb15c[_0x57efb0(0xdd)](0x0)[_0x57efb0(0x138)][0x1][_0x57efb0(0xe1)][_0x57efb0(0xfe)][_0x57efb0(0x142)](_0x4516fe['id']),_0x5cb15c[_0x57efb0(0xdd)](0x0)[_0x57efb0(0x138)][0x1]['notificationMessage'][_0x57efb0(0xde)][0x0][_0x57efb0(0x10b)][_0x57efb0(0xfe)][_0x57efb0(0x142)](StatusCodes[_0x57efb0(0xee)]),_0x5cb15c[_0x57efb0(0xdd)](0x1)[_0x57efb0(0x138)][0x1]['responseHeader'][_0x57efb0(0x132)][_0x57efb0(0xfe)][_0x57efb0(0x142)](StatusCodes[_0x57efb0(0xe4)]),_0x5cb15c['getCall'](0x1)[_0x57efb0(0x138)][0x1][_0x57efb0(0xe1)]['should'][_0x57efb0(0x142)](_0x4e96dc['id']),_0x5cb15c[_0x57efb0(0xdd)](0x1)['args'][0x1][_0x57efb0(0x12a)]['notificationData'][_0x57efb0(0x102)][_0x57efb0(0xfe)][_0x57efb0(0x142)](0x0),_0x5cb15c['getCall'](0x2)['args'][0x1][_0x57efb0(0xf4)][_0x57efb0(0x132)][_0x57efb0(0xfe)][_0x57efb0(0x142)](StatusCodes['BadNoSubscription']),_0x5cb15c[_0x57efb0(0xdd)](0x3)[_0x57efb0(0x138)][0x1][_0x57efb0(0xf4)][_0x57efb0(0x132)]['should']['eql'](StatusCodes[_0x57efb0(0x128)]),await _0x3ff462[_0x57efb0(0xe6)](_0x30606a[_0x57efb0(0x13c)],!![],_0x57efb0(0xe2));});}),_0x276495[_0x2566d7(0xdf)](it,_0x276495[_0x2566d7(0x124)],async()=>{const _0x32e673=_0x2566d7,_0x25f0bf={'iCHne':function(_0x538706,_0x434afb){const _0x1048c9=_0xa607;return _0x276495[_0x1048c9(0xe3)](_0x538706,_0x434afb);},'DswOT':function(_0xd2f754,_0x396ce8){return _0xd2f754*_0x396ce8;},'ERFzJ':_0x276495[_0x32e673(0xdb)]};await with_fake_timer[_0x32e673(0x135)](_0x30c2cc,async()=>{const _0x2599af=_0x32e673;_0x30606a=_0x3ff462[_0x2599af(0x130)]({'sessionTimeout':0x5f5e100});const _0x5523d5={'requestedPublishingInterval':0x3e8,'requestedLifetimeCount':0x3c,'requestedMaxKeepAliveCount':0xa,'maxNotificationsPerPublish':0xa,'publishingEnabled':!![],'priority':0xe},_0x12a3af=_0x30606a[_0x2599af(0x10f)](_0x5523d5);_0x12a3af[_0x2599af(0xe9)]['should'][_0x2599af(0x142)](SubscriptionState['CREATING']),_0x30c2cc[_0x2599af(0x103)][_0x2599af(0x118)](_0x25f0bf['iCHne'](_0x12a3af[_0x2599af(0x107)],_0x12a3af[_0x2599af(0xf7)])),_0x30c2cc[_0x2599af(0x103)][_0x2599af(0x118)](_0x12a3af[_0x2599af(0x107)]*_0x12a3af[_0x2599af(0x141)]),_0x12a3af[_0x2599af(0xe9)][_0x2599af(0xfe)][_0x2599af(0x142)](SubscriptionState[_0x2599af(0x134)]),_0x12a3af[_0x2599af(0x11c)][_0x2599af(0xfe)]['eql'](![]);const _0x5cdbb6=sinon[_0x2599af(0x13b)]();_0x30606a[_0x2599af(0x13f)][_0x2599af(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x65}}),_0x5cdbb6),_0x30606a[_0x2599af(0x13f)]['_on_PublishRequest'](new PublishRequest({'requestHeader':{'requestHandle':0x66}}),_0x5cdbb6),_0x30606a[_0x2599af(0x13f)][_0x2599af(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x67}}),_0x5cdbb6),_0x30606a[_0x2599af(0x13f)][_0x2599af(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x68}}),_0x5cdbb6),_0x30c2cc[_0x2599af(0x103)]['tick'](_0x25f0bf[_0x2599af(0x12e)](_0x12a3af['publishingInterval'],0x2)),_0x5cdbb6[_0x2599af(0xdd)](0x0)[_0x2599af(0x138)][0x1]['subscriptionId'][_0x2599af(0xfe)]['eql'](_0x12a3af[_0x2599af(0xe1)]),_0x5cdbb6['getCall'](0x0)['args'][0x1][_0x2599af(0xf4)][_0x2599af(0x132)][_0x2599af(0xfe)]['eql'](StatusCodes[_0x2599af(0xe4)]),_0x5cdbb6[_0x2599af(0xdd)](0x0)[_0x2599af(0x138)][0x1][_0x2599af(0x12a)]['sequenceNumber'][_0x2599af(0xfe)][_0x2599af(0x142)](0x1),_0x5cdbb6[_0x2599af(0xdd)](0x0)['args'][0x1][_0x2599af(0x12a)][_0x2599af(0xde)][0x0][_0x2599af(0xf5)][_0x2599af(0x131)][_0x2599af(0xfe)][_0x2599af(0x142)]('StatusChangeNotification'),_0x5cdbb6[_0x2599af(0xdd)](0x0)['args'][0x1][_0x2599af(0x12a)][_0x2599af(0xde)][0x0]['status']['should'][_0x2599af(0x142)](StatusCodes['BadTimeout']),_0x5cdbb6[_0x2599af(0xfa)]['should'][_0x2599af(0x142)](0x4),_0x5cdbb6['getCall'](0x1)['args'][0x1][_0x2599af(0xf4)]['serviceResult']['should'][_0x2599af(0x142)](StatusCodes['BadNoSubscription']),_0x5cdbb6[_0x2599af(0xdd)](0x1)[_0x2599af(0x138)][0x1][_0x2599af(0xfe)]['be'][_0x2599af(0xec)](ServiceFault),_0x5cdbb6[_0x2599af(0xdd)](0x2)[_0x2599af(0x138)][0x1][_0x2599af(0xf4)][_0x2599af(0x132)][_0x2599af(0xfe)][_0x2599af(0x142)](StatusCodes[_0x2599af(0x128)]),_0x5cdbb6[_0x2599af(0xdd)](0x2)[_0x2599af(0x138)][0x1][_0x2599af(0xfe)]['be']['instanceOf'](ServiceFault),_0x5cdbb6[_0x2599af(0xdd)](0x3)['args'][0x1][_0x2599af(0xf4)]['serviceResult']['should']['eql'](StatusCodes['BadNoSubscription']),_0x5cdbb6['getCall'](0x3)[_0x2599af(0x138)][0x1][_0x2599af(0xfe)]['be'][_0x2599af(0xec)](ServiceFault),await _0x3ff462[_0x2599af(0xe6)](_0x30606a[_0x2599af(0x13c)],!![],_0x25f0bf[_0x2599af(0x106)]);});}),_0x276495[_0x2566d7(0x105)](it,_0x276495[_0x2566d7(0xef)],async()=>{const _0x55a68f={'SeSfl':function(_0x108b8a,_0x5ddbf8){const _0x17c53a=_0xa607;return _0x276495[_0x17c53a(0x11e)](_0x108b8a,_0x5ddbf8);}};await with_fake_timer['call'](_0x30c2cc,async()=>{const _0x3915fb=_0xa607;_0x30606a=_0x3ff462[_0x3915fb(0x130)]({'sessionTimeout':0x5f5e100});const _0x1dbada={'requestedPublishingInterval':0x3e8,'requestedLifetimeCount':0x3c,'requestedMaxKeepAliveCount':0xa,'maxNotificationsPerPublish':0xa,'publishingEnabled':!![],'priority':0xe},_0x4c0232=_0x30606a[_0x3915fb(0x10f)](_0x1dbada);_0x4c0232[_0x3915fb(0xe9)][_0x3915fb(0xfe)][_0x3915fb(0x142)](SubscriptionState['CREATING']),_0x30c2cc[_0x3915fb(0x103)][_0x3915fb(0x118)](_0x4c0232[_0x3915fb(0x107)]*_0x4c0232[_0x3915fb(0xf7)]),_0x30c2cc[_0x3915fb(0x103)]['tick'](_0x55a68f[_0x3915fb(0x127)](_0x4c0232['publishingInterval'],_0x4c0232[_0x3915fb(0x141)]));const _0x1b1901=_0x30606a[_0x3915fb(0x10f)](_0x1dbada);_0x1b1901['state'][_0x3915fb(0xfe)][_0x3915fb(0x142)](SubscriptionState[_0x3915fb(0x117)]);const _0x246fe1=sinon[_0x3915fb(0x13b)]();_0x30606a['publishEngine'][_0x3915fb(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x65}}),_0x246fe1),_0x30606a['publishEngine'][_0x3915fb(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x66}}),_0x246fe1),_0x30606a[_0x3915fb(0x13f)]['_on_PublishRequest'](new PublishRequest({'requestHeader':{'requestHandle':0x67}}),_0x246fe1),_0x30606a['publishEngine'][_0x3915fb(0x13d)](new PublishRequest({'requestHeader':{'requestHandle':0x68}}),_0x246fe1),_0x246fe1[_0x3915fb(0xfa)]['should'][_0x3915fb(0x142)](0x1),_0x246fe1[_0x3915fb(0xdd)](0x0)[_0x3915fb(0x138)][0x1][_0x3915fb(0xf4)][_0x3915fb(0x132)][_0x3915fb(0xfe)][_0x3915fb(0x142)](StatusCodes['Good']),_0x246fe1[_0x3915fb(0xdd)](0x0)['args'][0x1][_0x3915fb(0x12a)]['sequenceNumber'][_0x3915fb(0xfe)][_0x3915fb(0x142)](0x1),_0x246fe1[_0x3915fb(0xdd)](0x0)[_0x3915fb(0x138)][0x1][_0x3915fb(0x12a)][_0x3915fb(0xde)][0x0][_0x3915fb(0xf5)][_0x3915fb(0x131)][_0x3915fb(0xfe)][_0x3915fb(0x142)](_0x3915fb(0x10e)),_0x246fe1[_0x3915fb(0xdd)](0x0)[_0x3915fb(0x138)][0x1]['notificationMessage']['notificationData'][0x0][_0x3915fb(0x10b)][_0x3915fb(0xfe)][_0x3915fb(0x142)](StatusCodes[_0x3915fb(0xee)]),await _0x3ff462[_0x3915fb(0xe6)](_0x30606a[_0x3915fb(0x13c)],!![],_0x3915fb(0xe2));});}),_0x276495[_0x2566d7(0xdf)](it,_0x2566d7(0x119),async()=>{const _0x5f5272=_0x2566d7;await with_fake_timer[_0x5f5272(0x135)](_0x30c2cc,async()=>{const _0x10da5b=_0x5f5272;_0x30606a=_0x3ff462[_0x10da5b(0x130)]({'sessionTimeout':0x5f5e100});const _0x1d2615={'requestedPublishingInterval':0x64,'requestedLifetimeCount':0x3c,'requestedMaxKeepAliveCount':0x1e,'maxNotificationsPerPublish':0x3e8,'publishingEnabled':!![],'priority':0xe},_0x4ae7a2=_0x30606a[_0x10da5b(0x10f)](_0x1d2615);_0x4ae7a2[_0x10da5b(0xe9)][_0x10da5b(0xfe)][_0x10da5b(0x142)](SubscriptionState['CREATING']),_0x4ae7a2['on'](_0x10da5b(0x111),function(_0x1465c0){const _0x41811f=_0x10da5b;_0x1465c0[_0x41811f(0xfc)]=function(){};});const _0x4e5fdb=new MonitoredItemCreateRequest({'itemToMonitor':{'nodeId':_0x10da5b(0xf3)},'monitoringMode':MonitoringMode[_0x10da5b(0x133)],'requestedParameters':{'clientHandle':0x7b,'queueSize':0xa,'samplingInterval':0x64}}),_0x122e48=_0x4ae7a2[_0x10da5b(0x109)](_0x3ff462[_0x10da5b(0x143)],TimestampsToReturn[_0x10da5b(0xe0)],_0x4e5fdb);_0x122e48['statusCode'][_0x10da5b(0xfe)][_0x10da5b(0x142)](StatusCodes[_0x10da5b(0xe4)]);const _0xda18c3=![];_0x3ff462[_0x10da5b(0xe6)](_0x30606a[_0x10da5b(0x13c)],_0xda18c3,_0x10da5b(0xe2)),_0x30c2cc['clock'][_0x10da5b(0x118)](_0x276495[_0x10da5b(0x11e)](_0x4ae7a2['publishingInterval'],_0x4ae7a2['maxKeepAliveCount'])),_0x30c2cc[_0x10da5b(0x103)]['tick'](_0x4ae7a2[_0x10da5b(0x107)]*_0x4ae7a2[_0x10da5b(0x141)]);});});});