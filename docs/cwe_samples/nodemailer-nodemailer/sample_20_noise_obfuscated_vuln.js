'use strict';const _0x3f85c6=_0x1f41;(function(_0x556021,_0x3cf16d){const _0x1d2d8d=_0x1f41,_0x323810=_0x556021();while(!![]){try{const _0x38e4ca=parseInt(_0x1d2d8d(0x15e))/0x1+parseInt(_0x1d2d8d(0x153))/0x2+-parseInt(_0x1d2d8d(0x174))/0x3+-parseInt(_0x1d2d8d(0x16f))/0x4+-parseInt(_0x1d2d8d(0x119))/0x5*(parseInt(_0x1d2d8d(0x157))/0x6)+-parseInt(_0x1d2d8d(0x142))/0x7+parseInt(_0x1d2d8d(0x16a))/0x8;if(_0x38e4ca===_0x3cf16d)break;else _0x323810['push'](_0x323810['shift']());}catch(_0x568716){_0x323810['push'](_0x323810['shift']());}}}(_0x5531,0xcd76d));function _0x1f41(_0x5e3527,_0x125f3f){const _0x553172=_0x5531();return _0x1f41=function(_0x1f41ca,_0x9c769b){_0x1f41ca=_0x1f41ca-0xe3;let _0x1415e6=_0x553172[_0x1f41ca];return _0x1415e6;},_0x1f41(_0x5e3527,_0x125f3f);}const {promisify}=require(_0x3f85c6(0xe7)),should=require(_0x3f85c6(0xec)),{ReadRequest}=require(_0x3f85c6(0xe9)),{make_debugLog,checkDebugFlag}=require(_0x3f85c6(0xfb)),{StatusCodes}=require(_0x3f85c6(0x127)),{ClientSecureChannelLayer,ServerSecureChannelLayer}=require('..'),debugLog=make_debugLog('TEST'),doDebug=checkDebugFlag(_0x3f85c6(0xf4)),port=0x7fb,describe=require(_0x3f85c6(0x12e))[_0x3f85c6(0x13f)];describe(_0x3f85c6(0x159),function(){const _0x29d615=_0x3f85c6,_0x280191={'dmehR':function(_0x3b52fb,_0x1e45e7){return _0x3b52fb!==_0x1e45e7;},'zrcjZ':function(_0x18ec95,_0x3d63dc){return _0x18ec95(_0x3d63dc);},'gMnGf':_0x29d615(0x12a),'unkzd':function(_0x51196c,_0x1d7072){return _0x51196c!==_0x1d7072;},'qGUat':_0x29d615(0x11f),'AyyAK':_0x29d615(0xe6),'YuxyM':function(_0x25141c,_0x95bfd6){return _0x25141c(_0x95bfd6);},'Rxeqm':function(_0x1a6b5a,_0x16e6ca,_0x2b5952){return _0x1a6b5a(_0x16e6ca,_0x2b5952);},'nExnQ':function(_0x2c2859,_0x1eb5f3){return _0x2c2859+_0x1eb5f3;},'NSljg':function(_0x544da1,_0xe324cf){return _0x544da1===_0xe324cf;},'pyqVt':_0x29d615(0x11c),'mXvvn':_0x29d615(0xf0),'xfWau':_0x29d615(0x107),'jqYwz':_0x29d615(0x150)};this[_0x29d615(0xee)](Math[_0x29d615(0x13d)](this[_0x29d615(0xee)](),0x186a0));const _0x3833fb={'connectionStrategy':{'maxRetry':0x1,'initialDelay':0x1,'maxDelay':0x2,'randomisationFactor':0.1}};_0x280191[_0x29d615(0x138)](it,_0x280191[_0x29d615(0x15d)],function(_0x1e5fa5){const _0x153643=_0x29d615,_0x1cab4c=new ClientSecureChannelLayer(_0x3833fb);let _0x39292f=0x0;_0x1cab4c['on'](_0x280191[_0x153643(0x134)],function(_0x5bcb25){const _0x2e1e1b=_0x153643;_0x280191[_0x2e1e1b(0x177)](_0x2e1e1b(0x10a),_0x2e1e1b(0x10a))?(_0x4ee5d4[_0x2e1e1b(0x14a)](_0x2236cf['request']),_0x5c7e11['exist'](_0x115383[_0x2e1e1b(0x113)])):(should[_0x2e1e1b(0x129)]['exist'](_0x5bcb25),_0x39292f+=0x1);}),_0x1cab4c[_0x153643(0x12f)](_0x153643(0x106)+port+_0x153643(0x160),function(_0x437149){const _0x441796=_0x153643;_0x280191['zrcjZ'](should,_0x437149)['be'][_0x441796(0xf8)](Error),_0x437149[_0x441796(0x104)][_0x441796(0xec)][_0x441796(0x172)](/getaddrinfo ENOTFOUND|EAI_AGAIN/),_0x39292f[_0x441796(0xec)][_0x441796(0x163)](0x0),setTimeout(_0x1e5fa5,0xc8);});}),it(_0x280191[_0x29d615(0x181)],function(_0x9b7537){const _0x29d0ef=_0x29d615,_0x387594=new ClientSecureChannelLayer(_0x3833fb);let _0x374f9d=0x0;_0x387594['on'](_0x280191['gMnGf'],function(_0x56205e){const _0x508bf2=_0x1f41;should[_0x508bf2(0x129)][_0x508bf2(0x14a)](_0x56205e),_0x374f9d+=0x1;}),_0x387594['create'](_0x29d0ef(0x158),function(_0x3e72c1){const _0x335346=_0x29d0ef;_0x280191['unkzd'](_0x280191[_0x335346(0x15c)],_0x280191['AyyAK'])?(_0x280191[_0x335346(0x14f)](should,_0x3e72c1)['be'][_0x335346(0xf8)](Error),_0x3e72c1[_0x335346(0x104)]['should']['match'](/connect ECONNREFUSED/),_0x374f9d['should'][_0x335346(0x163)](0x0),_0x280191[_0x335346(0x138)](setTimeout,_0x9b7537,0xc8)):(_0x4d3fb0[_0x335346(0x12d)]=_0x355e66,_0x43cb64[_0x335346(0x180)]=_0x3a7802);});}),setTimeout(function(){const _0x1ded77=_0x29d615;_0x280191[_0x1ded77(0x116)](_0x280191[_0x1ded77(0x16c)],_0x280191['mXvvn'])?(_0x280191[_0x1ded77(0x14f)](_0x3fbf27,_0x280191[_0x1ded77(0x13a)](_0x280191[_0x1ded77(0x13a)](_0x30ce9a,'\x20'),_0x4c27cd)+'ms'),_0x6c89b8=_0x4dc09a+0x1):console[_0x1ded77(0xfa)](_0x1ded77(0x165));},0x64);});function startServer(_0x5c78f3,_0xdc64c4){const _0x2c8385=_0x3f85c6,_0xebf2b8={'gWayS':function(_0x26aee3,_0x100cfd){return _0x26aee3*_0x100cfd;}},_0x53d525=require(_0x2c8385(0x122)),_0xa599ca=new _0x53d525[(_0x2c8385(0x16d))]();_0x5c78f3[_0x2c8385(0x146)]=_0xa599ca,_0xa599ca[_0x2c8385(0x11e)](port),_0xa599ca['on']('connection',function _0x4f6935(_0x14d1c0){const _0x1e4cf2=_0x2c8385,_0x1d140a=new ServerSecureChannelLayer({'timeout':_0xebf2b8[_0x1e4cf2(0x114)](0x3e8,0x3e8)});_0x5c78f3['serverChannel']=_0x1d140a,_0x1d140a[_0x1e4cf2(0xee)]=0x3e8*0x3e8,_0x1d140a[_0x1e4cf2(0x110)](_0x14d1c0,function(){});}),_0xdc64c4();}function simulate_server_abrupt_shutdown(_0x1f0549){const _0x2c4556=_0x3f85c6;_0x1f0549[_0x2c4556(0x143)]&&_0x1f0549['serverChannel'][_0x2c4556(0x128)][_0x2c4556(0xfc)]&&_0x1f0549[_0x2c4556(0x143)][_0x2c4556(0x128)]['_socket'][_0x2c4556(0x111)]();}function _0x5531(){const _0x13816b=['McVot','pyqVt','Server','AARSv','401656fpfWMf','WW2-c\x20secureChannel\x20that\x20starts\x20before\x20the\x20server\x20is\x20up\x20and\x20running\x20should\x20eventually\x20connect\x20without\x20error','ETFQO','match','MMM1\x20client\x20SecureChannel\x20should\x20detect\x20connection\x20problem','4951893qbCKcp','connectionStrategy','cXRYR','dmehR','rejectedWith','BOiRv','cqrdb','kYpVw','hex','WW2-b\x20should\x20be\x20possible\x20to\x20interrupt\x20the\x20retry\x20process\x20\x20','PEkhq','Testing\x20ClientSecureChannel\x20with\x20BackOff\x20reconnection\x20strategy','defaultTransactionTimeout','jqYwz','BaLcm','dcefv','BtyEl','zCVTT','util','TGSPD','node-opcua-types','equal','ZzeJx','should','Server\x20finally\x20started\x20!','timeout','TCySJ','eRQML','xkYGF','AgkBv','thwYv','TEST','eVqXr','lessThan','LnwfE','instanceOf','DONE!\x20','log','node-opcua-debug','_socket','Pwzkc','Let\x27s\x20abort\x20the\x20connection\x20now','xumrZ','ywoDa','EIAgx','greaterThan','VqAqo','message','performMessageTransaction','opc.tcp://no_server_at_this_address.com:','should\x20not\x20receive\x20a\x20close\x20event\x20with\x20an\x20error\x20when\x20attempting\x20to\x20connect\x20to\x20a\x20non\x20existent\x20server','ULQIE','JNooY','bwmFp','dLgDe','Not\x20Writing\x20!!!','HBviL','Done\x20','on_transaction_completed','init','end','expecting\x20an\x20error\x20here','response','gWayS','KQWDU','NSljg','expecting\x20NO\x20error\x20here','maxRetry','175nYLjyi','backoff','NjNoz','qJRsI','UrTwi','listen','HRAYo','pMSkX','ZQgig','net','zoslW','yzXJz','rOJby','xUAUs','node-opcua-status-code','transport','not','close','qyuHg','KcDku','minTransactionTimeout','node-opcua-leak-detector','create','JKYgD','protocolVersion','pfwUG','aFvmM','gMnGf','call','ZyqOv','fbQne','Rxeqm','ICeRp','nExnQ','Bad','nUjfm','max','On\x20close','describeWithLeakDetector','ZpaiW','hQXRX','3766917fAUFpd','serverChannel','DaXps','rINOf','server_socket','write','djZTo','UxaJD','exist','request','lTFUP','QgEjJ','Fmoih','YuxyM','should\x20not\x20receive\x20a\x20close\x20event\x20with\x20an\x20error\x20when\x20attempting\x20to\x20connect\x20to\x20a\x20valid\x20server\x20on\x20a\x20invalid\x20port','xLdtt','SHwDe','916970jXLSPQ','QoJwQ','lSpgc','ekMaT','165468MQaWlz','opc.tcp://localhost:8888/UA/Sample','Testing\x20ClientSecureChannel\x201','fJZuD','closeWithError','qGUat','xfWau','137645qTWvsk','NTwwG','/UA/Sample','LVgSx','opc.tcp://localhost:','eql','Testing\x20ClientSecureChannel\x202','safe','PQeOJ','expecting\x20no\x20error\x20here,\x20as\x20secure\x20channel\x20has\x20been\x20closed\x20normally','toString','should\x20establish\x20a\x20client\x20secure\x20channel\x20','27998856EAtGNO'];_0x5531=function(){return _0x13816b;};return _0x5531();}function stopServer(_0x9617b4,_0x5c427f){const _0x193e18=_0x3f85c6,_0x5ac3ec={'xlWgS':function(_0x44db4e,_0x579bb8){return _0x44db4e(_0x579bb8);}};_0x5ac3ec['xlWgS'](simulate_server_abrupt_shutdown,_0x9617b4),_0x9617b4[_0x193e18(0x146)][_0x193e18(0x12a)](_0x5c427f),_0x9617b4[_0x193e18(0x143)]=null,_0x9617b4['server_socket']=null;}describe(_0x3f85c6(0x164),function(){const _0xe6eb85=_0x3f85c6,_0x562cbe={'thwYv':function(_0x565df8,_0x498147,_0x2352b2){return _0x565df8(_0x498147,_0x2352b2);},'NTwwG':function(_0x4e5ae6,_0x156a01){return _0x4e5ae6(_0x156a01);},'EIAgx':_0xe6eb85(0x124),'xLdtt':'connection\x20expected\x20to\x20succeed','eAzBf':'close','cqrdb':_0xe6eb85(0x169)};_0x562cbe['NTwwG'](beforeEach,function(_0x1d6cf5){startServer(this,_0x1d6cf5);}),_0x562cbe[_0xe6eb85(0x15f)](afterEach,function(_0x2c2415){const _0x19b15a=_0xe6eb85;_0x562cbe[_0x19b15a(0xf3)](stopServer,this,_0x2c2415);}),it(_0x562cbe[_0xe6eb85(0x17a)],function(_0x24bbc9){const _0x2717aa=_0xe6eb85,_0x7a7e40=new ClientSecureChannelLayer({});_0x7a7e40[_0x2717aa(0x131)]['should'][_0x2717aa(0xea)](0x0),_0x7a7e40[_0x2717aa(0x10f)]=function(_0x1a9aaa){const _0x518685=_0x2717aa;should[_0x518685(0x14a)](_0x1a9aaa[_0x518685(0x14b)]),should['exist'](_0x1a9aaa[_0x518685(0x113)]);},_0x7a7e40['on'](_0x562cbe['eAzBf'],function(_0xf7f1f5){const _0x549538=_0x2717aa;_0x562cbe['NTwwG'](should,!_0xf7f1f5)['be'][_0x549538(0x163)](!![],_0x549538(0x167));if(_0xf7f1f5){}}),_0x7a7e40[_0x2717aa(0x12f)]('opc.tcp://localhost:'+port+_0x2717aa(0x160),function(_0x5cc23e){const _0x32a26c=_0x2717aa,_0x9208b8={'SBpeu':_0x562cbe[_0x32a26c(0x101)]};should(!_0x5cc23e)['be']['eql'](!![],_0x562cbe[_0x32a26c(0x151)]),_0x7a7e40[_0x32a26c(0x12a)](function(){const _0x3bb4f3=_0x32a26c;if(_0x3bb4f3(0x16b)===_0x9208b8['SBpeu']){const _0x3dbc9b={'mMCjk':function(_0x526877){return _0x526877();}};_0xdde71c(_0x1cfd17,function(){_0x19cb94['close'](function(){_0x3dbc9b['mMCjk'](_0x581063);});});}else _0x24bbc9();});});});}),describe(_0x3f85c6(0x17f),function(){const _0x559744=_0x3f85c6,_0x57b3a9={'HBviL':function(_0x1d29b7,_0x310ddc){return _0x1d29b7(_0x310ddc);},'ZyqOv':function(_0x1c3e66,_0x2fb04e){return _0x1c3e66+_0x2fb04e;},'TCySJ':'yLJMb','BaLcm':_0x559744(0x16e),'xUAUs':_0x559744(0x112),'LnwfE':function(_0x42a18c){return _0x42a18c();},'ICeRp':function(_0x1b575f,_0x121046){return _0x1b575f!==_0x121046;},'rINOf':_0x559744(0x11d),'qyuHg':function(_0x7108d9,_0x57e6ee){return _0x7108d9===_0x57e6ee;},'djZTo':_0x559744(0xfe),'ZpaiW':function(_0x4b5a1c,_0x573a5f,_0x3445f2){return _0x4b5a1c(_0x573a5f,_0x3445f2);},'dcefv':function(_0x525130,_0x1172ed){return _0x525130===_0x1172ed;},'zSZlt':_0x559744(0x108),'QoJwQ':_0x559744(0x117),'BtyEl':function(_0x27ee6f,_0x25c961){return _0x27ee6f(_0x25c961);},'BjmJY':_0x559744(0xed),'DaXps':function(_0xc8f402,_0x1e3871){return _0xc8f402===_0x1e3871;},'zoslW':_0x559744(0x132),'xumrZ':'backoff','eVqXr':function(_0x49320c,_0x15dce6){return _0x49320c*_0x15dce6;},'rOJby':_0x559744(0x158),'nUjfm':function(_0x5d48a3,_0x248e40){return _0x5d48a3!==_0x248e40;},'Fmoih':_0x559744(0x14d),'JKYgD':_0x559744(0x12a),'NjNoz':function(_0x12a36b,_0x136651){return _0x12a36b(_0x136651);},'VqAqo':function(_0x1938ab){return _0x1938ab();},'Pwzkc':function(_0x542ecd,_0xa50193,_0x30a429){return _0x542ecd(_0xa50193,_0x30a429);},'JNooY':_0x559744(0x13e),'BOiRv':function(_0xb20158,_0x2faa6c){return _0xb20158(_0x2faa6c);},'AgkBv':'Sabotage','ekMaT':function(_0x5af80b,_0x563cc6){return _0x5af80b(_0x563cc6);},'OTucW':_0x559744(0x10e),'fbQne':function(_0x5c0944,_0x2c3a3a,_0x2363dc){return _0x5c0944(_0x2c3a3a,_0x2363dc);},'dLgDe':'WW2-a\x20connectionStrategy:\x20should\x20retry\x20many\x20times\x20and\x20fail\x20eventually\x20','ZpopK':_0x559744(0x17d),'NOWqF':function(_0x46c0a5,_0x4f188b){return _0x46c0a5(_0x4f188b);},'PQeOJ':_0x559744(0x173),'LVgSx':'MMM2\x20testing\x20if\x20client\x20SecureChannel\x20could\x20\x20sabotage\x20itself\x20when\x20connection\x20problem'};this['timeout'](Math[_0x559744(0x13d)](this[_0x559744(0xee)](),0x186a0)),_0x57b3a9[_0x559744(0x137)](it,_0x57b3a9[_0x559744(0x10b)],function(_0x440a41){const _0x1779ad=_0x559744;if(_0x57b3a9[_0x1779ad(0x139)](_0x57b3a9[_0x1779ad(0x145)],_0x1779ad(0x11d)))_0x466c54[_0x1779ad(0x143)][_0x1779ad(0x128)][_0x1779ad(0xfc)][_0x1779ad(0x111)]();else{const _0x1d6df6={'connectionStrategy':{'maxRetry':0x3,'initialDelay':0xa,'maxDelay':0x14,'randomisationFactor':0.1}},_0xe54681=new ClientSecureChannelLayer(_0x1d6df6),_0x363dc=_0x1779ad(0x162)+port+_0x1779ad(0x160);let _0x1211fe=0x0;_0xe54681['on']('backoff',function(_0x8d322a,_0xa81f78){const _0x13a84b=_0x1779ad;_0x57b3a9[_0x13a84b(0x10d)](debugLog,_0x57b3a9[_0x13a84b(0x136)](_0x8d322a+'\x20',_0xa81f78)+'ms'),_0x1211fe=_0x8d322a+0x1;}),_0xe54681[_0x1779ad(0x12f)](_0x363dc,function(_0x1eb487){const _0x40a4c6=_0x1779ad;_0x57b3a9[_0x40a4c6(0xef)]===_0x57b3a9[_0x40a4c6(0xe3)]?_0x1ab459[_0x40a4c6(0x143)]&&_0x183048[_0x40a4c6(0x143)]['transport'][_0x40a4c6(0xfc)]&&_0x213cd4[_0x40a4c6(0x143)][_0x40a4c6(0x128)][_0x40a4c6(0xfc)][_0x40a4c6(0x111)]():(_0x1211fe['should'][_0x40a4c6(0xea)](_0x1d6df6[_0x40a4c6(0x175)]['maxRetry']),should[_0x40a4c6(0x14a)](_0x1eb487,_0x57b3a9[_0x40a4c6(0x126)]),_0x57b3a9[_0x40a4c6(0xf7)](_0x440a41));});}}),it(_0x57b3a9['ZpopK'],function(_0x300a47){const _0x3a31fa=_0x559744,_0x953419={'KcDku':function(_0x2ab494,_0x3b54ab,_0x7ebce2){return _0x57b3a9['ZpaiW'](_0x2ab494,_0x3b54ab,_0x7ebce2);},'ZQgig':'secureChannel.create\x20failed\x20with\x20message\x20'},_0x2a4b13={'connectionStrategy':{'maxRetry':0xbb8,'initialDelay':0xa,'maxDelay':0x14,'randomisationFactor':0x0}},_0x62985b=new ClientSecureChannelLayer(_0x2a4b13),_0x52cc5d=_0x3a31fa(0x162)+port+_0x3a31fa(0x160);let _0x2cdc01=0x0;_0x62985b['on'](_0x3a31fa(0x11a),function(_0x4e0bf1,_0x4415f2){const _0x570d08=_0x3a31fa;debugLog(_0x57b3a9[_0x570d08(0x136)](_0x57b3a9['ZyqOv'](_0x4e0bf1+'\x20',_0x4415f2),'ms')),_0x2cdc01=_0x4e0bf1+0x1,_0x57b3a9[_0x570d08(0x12b)](_0x4e0bf1,0x2)&&(debugLog(_0x57b3a9[_0x570d08(0x148)]),_0x62985b['abortConnection'](function(){}));}),_0x62985b['create'](_0x52cc5d,function(_0x3e9d7e){const _0x46fd8f=_0x3a31fa;_0x2cdc01[_0x46fd8f(0xec)][_0x46fd8f(0x129)]['equal'](_0x2a4b13[_0x46fd8f(0x175)][_0x46fd8f(0x118)]),_0x2cdc01[_0x46fd8f(0xec)]['be'][_0x46fd8f(0x102)](0x2),_0x2cdc01['should']['be'][_0x46fd8f(0xf6)](0x4),should[_0x46fd8f(0x14a)](_0x3e9d7e,_0x46fd8f(0x112)),_0x953419[_0x46fd8f(0x12c)](debugLog,_0x953419[_0x46fd8f(0x121)],_0x3e9d7e[_0x46fd8f(0x104)]),_0x62985b['close'](function(){setTimeout(_0x300a47,0x64);});});});const _0x1ae6a5=this;_0x57b3a9[_0x559744(0x137)](it,_0x559744(0x170),function(_0x567455){const _0x1dac27=_0x559744,_0x1808cb={'wQhXC':function(_0x1c111d,_0x4ecd91){const _0x347d1d=_0x1f41;return _0x57b3a9[_0x347d1d(0xe5)](_0x1c111d,_0x4ecd91);},'ywoDa':_0x57b3a9['BjmJY'],'SHwDe':function(_0x505d4b,_0x5e43ef){const _0x4fd3f3=_0x1f41;return _0x57b3a9[_0x4fd3f3(0x144)](_0x505d4b,_0x5e43ef);},'KQWDU':_0x57b3a9[_0x1dac27(0x123)],'xkYGF':function(_0x536a78,_0x48ec4c){return _0x536a78(_0x48ec4c);}},_0x522cf6={'connectionStrategy':{'maxRetry':0xbb8,'initialDelay':0xa,'maxDelay':0x7d0,'randomisationFactor':0x0}},_0xdc1d7=new ClientSecureChannelLayer(_0x522cf6),_0xdda409='opc.tcp://localhost:'+port+_0x1dac27(0x160);let _0x6ae214=0x0;_0xdc1d7['on'](_0x57b3a9[_0x1dac27(0xff)],function(_0x566234,_0x5c280b){const _0x3b373f=_0x1dac27;_0x57b3a9[_0x3b373f(0x10d)](debugLog,_0x57b3a9[_0x3b373f(0x136)](_0x566234,'\x20')+_0x5c280b+'ms'),_0x6ae214=_0x57b3a9[_0x3b373f(0x136)](_0x566234,0x1);}),_0xdc1d7[_0x1dac27(0x12f)](_0xdda409,function(_0x26b170){const _0x28b839=_0x1dac27;_0x57b3a9[_0x28b839(0xe4)](_0x28b839(0x155),_0x57b3a9['zSZlt'])?_0x662796(_0x28b839(0x13e)):(should(!_0x26b170)['be'][_0x28b839(0x163)](!![],_0x57b3a9[_0x28b839(0x154)]),setTimeout(function(){stopServer(_0x1ae6a5,function(){const _0x28c320=_0x1f41;_0xdc1d7[_0x28c320(0x12a)](function(){_0x567455();});});},0x3e8));}),_0x57b3a9['ZpaiW'](setTimeout,function(){_0x57b3a9['ZpaiW'](startServer,_0x1ae6a5,function(){const _0x3f1b25=_0x1f41,_0x1f93d5={'TGSPD':function(_0x534a15,_0x3153b7){return _0x1808cb['wQhXC'](_0x534a15,_0x3153b7);},'kYpVw':_0x1808cb[_0x3f1b25(0x100)]};_0x1808cb[_0x3f1b25(0x152)](_0x1808cb[_0x3f1b25(0x115)],_0x3f1b25(0x132))?_0x1808cb[_0x3f1b25(0xf1)](debugLog,_0x3f1b25(0xed)):_0x1f93d5[_0x3f1b25(0xe8)](_0x39ac38,_0x1f93d5[_0x3f1b25(0x17b)]);});},0x1388);});async function _0x4e09c7(_0x15a4df){await new Promise(_0xc54c5f=>setTimeout(_0xc54c5f,_0x15a4df));}let _0x1f690f=ClientSecureChannelLayer[_0x559744(0x12d)],_0x46b376=ClientSecureChannelLayer[_0x559744(0x180)];_0x57b3a9[_0x559744(0x156)](beforeEach,()=>{const _0x1693c1=_0x559744;ClientSecureChannelLayer[_0x1693c1(0x12d)]=0xa*0x64,ClientSecureChannelLayer[_0x1693c1(0x180)]=_0x57b3a9[_0x1693c1(0xf5)](0x1e,0x64);}),_0x57b3a9['NOWqF'](afterEach,()=>{const _0x327881=_0x559744,_0x363adc={'PEkhq':function(_0x32c588,_0x5581bc){return _0x32c588(_0x5581bc);},'cXRYR':_0x327881(0x12a),'ETFQO':_0x57b3a9[_0x327881(0x125)]};if(_0x57b3a9[_0x327881(0x13c)](_0x57b3a9[_0x327881(0x14e)],_0x327881(0xeb)))ClientSecureChannelLayer[_0x327881(0x12d)]=_0x1f690f,ClientSecureChannelLayer[_0x327881(0x180)]=_0x46b376;else{const _0x297025=new _0x17698a(_0x56a455);let _0x1b926b=0x0;_0x297025['on'](_0x363adc[_0x327881(0x176)],function(_0x41c696){const _0xe76c8e=_0x327881;_0x3ca8f9[_0xe76c8e(0x129)][_0xe76c8e(0x14a)](_0x41c696),_0x1b926b+=0x1;}),_0x297025['create'](_0x363adc[_0x327881(0x171)],function(_0x560945){const _0x4f71af=_0x327881;_0x363adc[_0x4f71af(0x17e)](_0xc81ee7,_0x560945)['be']['instanceOf'](_0x4075b9),_0x560945['message'][_0x4f71af(0xec)][_0x4f71af(0x172)](/connect ECONNREFUSED/),_0x1b926b['should'][_0x4f71af(0x163)](0x0),_0x2d5de9(_0x368e08,0xc8);});}}),it(_0x57b3a9[_0x559744(0x166)],async()=>{const _0x438a3=_0x559744,_0x5e6387={'hQXRX':function(_0x2175ab,_0x391020,_0x432d92){const _0x5f1be6=_0x1f41;return _0x57b3a9[_0x5f1be6(0x140)](_0x2175ab,_0x391020,_0x432d92);},'aFvmM':function(_0x169fad,_0x3de010){return _0x169fad(_0x3de010);}},_0x141d1f={'connectionStrategy':{'maxRetry':0x3,'initialDelay':0xa,'maxDelay':0x7d0,'randomisationFactor':0x0},'defaultSecureTokenLifetime':0x3e8,'transportTimeout':0x7d0},_0x59b355=new ClientSecureChannelLayer(_0x141d1f);_0x59b355['on'](_0x57b3a9[_0x438a3(0x130)],()=>{const _0x4d786b=_0x438a3;debugLog(_0x4d786b(0x13e));});const _0x11ac08={};await promisify(startServer)(_0x11ac08);const _0x119cda=_0x438a3(0x162)+port+'/UA/Sample';await _0x57b3a9[_0x438a3(0x11b)](promisify,_0x59b355['create'])[_0x438a3(0x135)](_0x59b355,_0x119cda);const _0x3e69a2=_0x11ac08[_0x438a3(0x143)][_0x438a3(0x128)]['write'];debugLog(),_0x11ac08[_0x438a3(0x143)]['transport'][_0x438a3(0x147)]=_0x471215=>{const _0x2dfa4e=_0x438a3;_0x5e6387[_0x2dfa4e(0x141)](debugLog,_0x2dfa4e(0x10c),_0x471215[_0x2dfa4e(0x168)](_0x2dfa4e(0x17c)));};const _0x2f611d=new ReadRequest();async function _0x25177b(){const _0x2a2449=_0x438a3,_0x3ddb81=await _0x5e6387[_0x2a2449(0x133)](promisify,_0x59b355[_0x2a2449(0x105)])['call'](_0x59b355,_0x2f611d);debugLog(_0x3ddb81[_0x2a2449(0x168)]());}await _0x25177b()[_0x438a3(0xec)]['be'][_0x438a3(0x178)](/Connection Break|Transaction has timed out/),await _0x4e09c7(0x2710);async function _0x197b29(){const _0x4c8950=_0x438a3;await _0x57b3a9[_0x4c8950(0x10d)](promisify,_0x59b355['close'])[_0x4c8950(0x135)](_0x59b355);}await _0x57b3a9[_0x438a3(0x103)](_0x197b29),await _0x57b3a9[_0x438a3(0x11b)](promisify,stopServer)(_0x11ac08),debugLog(_0x438a3(0xf9));}),it(_0x57b3a9[_0x559744(0x161)],async()=>{const _0x339c31=_0x559744,_0x55d54d={'UxaJD':function(_0x558de4,_0x5ca522){return _0x558de4(_0x5ca522);},'pMSkX':_0x57b3a9[_0x339c31(0x109)]},_0x23b466={'connectionStrategy':{'maxRetry':0x3,'initialDelay':0xa,'maxDelay':0x7d0,'randomisationFactor':0x0},'defaultSecureTokenLifetime':0x3e8,'transportTimeout':0x7d0},_0x2350c7=new ClientSecureChannelLayer(_0x23b466);_0x2350c7['on'](_0x57b3a9[_0x339c31(0x130)],()=>{const _0x5b6363=_0x339c31;_0x55d54d[_0x5b6363(0x149)](debugLog,_0x55d54d[_0x5b6363(0x120)]);});const _0x4853b7={};await promisify(startServer)(_0x4853b7);try{const _0x52bf41='opc.tcp://localhost:'+port+_0x339c31(0x160);await _0x57b3a9[_0x339c31(0x179)](promisify,_0x2350c7[_0x339c31(0x12f)])[_0x339c31(0x135)](_0x2350c7,_0x52bf41),await promisify(_0x2350c7[_0x339c31(0x15b)])['call'](_0x2350c7,StatusCodes[_0x339c31(0x13b)],new Error(_0x57b3a9[_0x339c31(0xf2)]));}catch(_0x42f5c7){if(_0x339c31(0x15a)!==_0x339c31(0x14c)){console[_0x339c31(0xfa)](_0x42f5c7[_0x339c31(0x104)]);throw _0x42f5c7;}else _0x3c7663(_0x5aab59)['be'][_0x339c31(0xf8)](_0x1f9810),_0x39b7a8['message'][_0x339c31(0xec)][_0x339c31(0x172)](/connect ECONNREFUSED/),_0x525881[_0x339c31(0xec)][_0x339c31(0x163)](0x0),_0x57b3a9[_0x339c31(0xfd)](_0x5022cf,_0x566375,0xc8);}finally{_0x57b3a9['ekMaT'](debugLog,_0x57b3a9['OTucW']),await promisify(stopServer)(_0x4853b7);}});});