'use strict';function _0xf507(){const _0x5a3aa0=['nkovP','afGKr','54cYXtel','YVHbc','EQeUs','ACK','rJlbb','EWxhU','RELXT','log','jjwnt','434c4f46180000000c000000010000000f0000000f000000','MrmZJ','constructor','UAvrh','ZJWmW','node-opcua-debug','node-opcua-assert','cXUBr','should\x20bind\x20a\x20socket\x20and\x20process\x20the\x20HEL\x20message\x20by\x20returning\x20ERR\x20if\x20protocol\x20version\x20is\x20not\x20OK','match','client','LiNWf','241486JknXKR','BadConnectionRejected','IKHjT','../dist/test_helpers','jqZkf','name','GVGeQ','WXWX2\x20(issue#504)\x20server\x20transport\x20should\x20not\x20accept\x20bufferSize\x20lower\x20than\x208192\x20byes','jtZPf','length','271835HBExlQ','eJTvy','2045857NamtQc','JaIBk','OmomA','chunk','greaterThan','fCweL','helloMessage1','IrDfv','slice','node-opcua-chunkmanager','2838584MXboPq','altered_helloMessage1','eql','init','from','jotMw','99gExzsj','AcknowledgeMessage','PzQaZ','should\x20handle\x20HEL\x20message\x20broken\x20in\x20two\x20chunks\x20(bug#36)','Bmrkc','should\x20handle\x20broken\x20HEL\x20message\x20in\x20three\x20chunks\x20(bug#36)','data','FVtVB','jfmDO','server','aXHMH','protocolVersion','message','statusCode','LrTLy','DkTTp','close','ERR','BadProtocolVersionUnsupported','sFWQv','should\x20bind\x20a\x20socket\x20and\x20process\x20the\x20HEL\x20message\x20by\x20returning\x20ACK','make_debugLog','vYfaD','vMqyT','node-opcua-binary-stream','packect_outtec','23512fSVXia','TEST','bytesRead','HpXPk','8DNBSSt','10ICnXZM','initialize','FUZZ2-\x20should\x20not\x20crash\x20is\x20helloMessage\x20\x20is\x20malformed\x20causing\x20read\x20overflow\x20(bad\x20endpoint\x20uri\x20length)','mjipp','should\x20handle\x20broken\x20HEL\x20message\x20in\x20many\x20small\x20chunks\x20(bug#36)','shutdown','fNcoK','some\x20string','HEL','gmbtN','yjppW','bytesWritten','OfwQw','qryjc','equal','RuIde','should','sEFcD','SJEUg','HzcHC','lkeSM','SEFvC','FUZZ1-\x20should\x20not\x20crash\x20is\x20helloMessage\x20\x20is\x20malformed\x20causing\x20read\x20overflow\x20(bad\x20endpoint\x20uri\x20length)','TCPErrorMessage','aQPib','lpSHV','rewind','msgType','DirectTransport','WXWX1\x20(issue#504)\x20\x20server\x20transport\x20accept\x20bufferSize\x20greater\x20than\x208192\x20byes','NgagF','not','write','yUeHZ','495222HbegBd','compare_buffers','2536281hUOiwk','QqRqA','jTtLs','getEndpointsRequest1'];_0xf507=function(){return _0x5a3aa0;};return _0xf507();}const _0x5422be=_0x17d0;function _0x17d0(_0x4856be,_0x2d3bf3){const _0xf507d=_0xf507();return _0x17d0=function(_0x17d03f,_0x40f2bf){_0x17d03f=_0x17d03f-0x103;let _0x397791=_0xf507d[_0x17d03f];return _0x397791;},_0x17d0(_0x4856be,_0x2d3bf3);}(function(_0x10abc2,_0x541991){const _0x4e188f=_0x17d0,_0x258be9=_0x10abc2();while(!![]){try{const _0x3a4175=parseInt(_0x4e188f(0x173))/0x1+-parseInt(_0x4e188f(0x14c))/0x2*(parseInt(_0x4e188f(0x132))/0x3)+parseInt(_0x4e188f(0x12c))/0x4+-parseInt(_0x4e188f(0x120))/0x5*(parseInt(_0x4e188f(0x17b))/0x6)+-parseInt(_0x4e188f(0x116))/0x7*(-parseInt(_0x4e188f(0x150))/0x8)+parseInt(_0x4e188f(0x175))/0x9+parseInt(_0x4e188f(0x151))/0xa*(-parseInt(_0x4e188f(0x122))/0xb);if(_0x3a4175===_0x541991)break;else _0x258be9['push'](_0x258be9['shift']());}catch(_0x18f5fe){_0x258be9['push'](_0x258be9['shift']());}}}(_0xf507,0x6fcd1));const should=require(_0x5422be(0x161)),{assert}=require(_0x5422be(0x110)),utils=require('node-opcua-utils'),debug=require(_0x5422be(0x10f)),debugLog=debug[_0x5422be(0x147)](_0x5422be(0x14d)),{BinaryStream}=require(_0x5422be(0x14a)),{readMessageHeader}=require(_0x5422be(0x12b)),{decodeMessage,packTcpMessage,ServerTCP_transport,HelloMessage,AcknowledgeMessage,TCPErrorMessage}=require('..'),DirectTransport=require(_0x5422be(0x119))[_0x5422be(0x16d)],packets=require('../dist/test-fixtures'),helloMessage=packets[_0x5422be(0x128)],altered_helloMessage=packets[_0x5422be(0x12d)],openChannelRequest=packets['openChannelRequest1'],not_an_helloMessage=packets[_0x5422be(0x178)],{altered_openChannelRequest1,altered_openChannelRequest2}=packets,{altered_helloMessage2,altered_helloMessage3}=packets;describe('testing\x20ServerTCP_transport',function(){const _0x417f55=_0x5422be,_0x4b2e50={'lkeSM':_0x417f55(0x176),'MrmZJ':_0x417f55(0x143),'DTtsx':function(_0xd874ee){return _0xd874ee();},'lpSHV':'data','rJlbb':function(_0x1c81cd,_0x48e317,_0x34b794){return _0x1c81cd(_0x48e317,_0x34b794);},'DkTTp':function(_0x41ff19,_0x402bcc){return _0x41ff19===_0x402bcc;},'LiNWf':function(_0x338b28,_0x59b80d){return _0x338b28(_0x59b80d);},'vYfaD':'Not\x20expecting\x20an\x20message','sEFcD':function(_0x551e9c,_0x4dae95){return _0x551e9c!==_0x4dae95;},'FqALj':_0x417f55(0x15a),'jTtLs':function(_0x3168fb,_0x366373){return _0x3168fb(_0x366373);},'NgagF':_0x417f55(0x168),'jqZkf':_0x417f55(0x144),'jotMw':function(_0x1abb74){return _0x1abb74();},'afGKr':function(_0x31e86b,_0x5e7498,_0x5d7a41){return _0x31e86b(_0x5e7498,_0x5d7a41);},'EWxhU':'chunk','FVKtW':function(_0x4e4939,_0x1bfe87){return _0x4e4939!==_0x1bfe87;},'OmomA':_0x417f55(0x15d),'LVEeY':_0x417f55(0x10d),'LrTLy':function(_0x3dd007,_0x5cdb80){return _0x3dd007<_0x5cdb80;},'EQeUs':_0x417f55(0x133),'FVtVB':function(_0x1476df,_0x331b9d){return _0x1476df!==_0x331b9d;},'sKPig':_0x417f55(0x13a),'mjipp':_0x417f55(0x159),'CBfuM':_0x417f55(0x117),'ZJWmW':_0x417f55(0x158),'qryjc':_0x417f55(0x10a),'PzQaZ':'hex','RELXT':function(_0x280b08,_0x132a4e){return _0x280b08(_0x132a4e);},'SJEUg':function(_0x1f6516,_0x5d895a,_0x2e1dea){return _0x1f6516(_0x5d895a,_0x2e1dea);},'GVGeQ':function(_0x565148,_0x276322,_0x3d1cf2){return _0x565148(_0x276322,_0x3d1cf2);},'aXHMH':'FUZZ3-\x20should\x20not\x20crash\x20is\x20helloMessage\x20\x20is\x20malformed\x20causing\x20read\x20overflow\x20(bad\x20endpoint\x20uri\x20length)','yAgNk':_0x417f55(0x112),'IKHjT':function(_0x1cb366,_0x331f88,_0x5372cf){return _0x1cb366(_0x331f88,_0x5372cf);},'IrDfv':function(_0x4e0e8c,_0x28c63e,_0x5c3aab){return _0x4e0e8c(_0x28c63e,_0x5c3aab);},'RuIde':_0x417f55(0x11d)};let _0x16edfa;_0x4b2e50[_0x417f55(0x107)](beforeEach,function(_0x2f1f57){const _0x2492a6=_0x417f55;_0x2492a6(0x176)!==_0x4b2e50[_0x2492a6(0x165)]?_0x50a89a(_0x3eacfa,_0x207e93):(_0x16edfa=new DirectTransport(),_0x16edfa[_0x2492a6(0x152)](_0x2f1f57));}),afterEach(function(_0x841a8f){const _0x159bbf=_0x417f55;_0x16edfa[_0x159bbf(0x156)](_0x841a8f);}),it('should\x20close\x20the\x20communication\x20if\x20the\x20client\x20initiates\x20the\x20communication\x20with\x20a\x20message\x20which\x20is\x20not\x20HEL',function(_0x28b585){const _0x1ea17d=_0x417f55,_0x1afce6=new ServerTCP_transport();_0x1afce6[_0x1ea17d(0x12f)](_0x16edfa[_0x1ea17d(0x13b)],_0x58b3ab=>{const _0x4d7476=_0x1ea17d;assert(_0x58b3ab),_0x58b3ab['message'][_0x4d7476(0x161)][_0x4d7476(0x113)](/Expecting 'HEL' message/);}),_0x16edfa[_0x1ea17d(0x114)]['on'](_0x4b2e50['lpSHV'],_0x400eeb=>{const _0x234330=_0x1ea17d,_0x5cea12=new BinaryStream(_0x400eeb),_0x5d9cb5=readMessageHeader(_0x5cea12);_0x5d9cb5['msgType'][_0x234330(0x161)][_0x234330(0x15f)](_0x4b2e50[_0x234330(0x10b)]),_0x5cea12[_0x234330(0x16b)]();const _0x25433a=decodeMessage(_0x5cea12,TCPErrorMessage);_0x25433a[_0x234330(0x10c)][_0x234330(0x11b)][_0x234330(0x161)][_0x234330(0x15f)](_0x234330(0x168)),_0x4b2e50['DTtsx'](_0x28b585);}),_0x16edfa[_0x1ea17d(0x114)]['write'](not_an_helloMessage);}),it(_0x417f55(0x146),function(_0x478ca8){const _0x1f87e9=_0x417f55,_0x47bc0e={'cXUBr':function(_0x156f01,_0x5ec9ef){return _0x156f01(_0x5ec9ef);},'JaIBk':function(_0x2ad26a,_0x361ea9,_0x2121c4){const _0x5cc6e2=_0x17d0;return _0x4b2e50[_0x5cc6e2(0x105)](_0x2ad26a,_0x361ea9,_0x2121c4);},'YVHbc':function(_0x1bf5b7){return _0x1bf5b7();},'yUeHZ':function(_0x52befb,_0xeb115c){const _0x47ffec=_0x17d0;return _0x4b2e50[_0x47ffec(0x141)](_0x52befb,_0xeb115c);},'aQPib':_0x1f87e9(0x145),'fNcoK':function(_0x1206a4,_0x5f0ea3){return _0x1206a4(_0x5f0ea3);},'eJTvy':_0x1f87e9(0x133)},_0x2ae5f0=new ServerTCP_transport();_0x2ae5f0[_0x1f87e9(0x12f)](_0x16edfa[_0x1f87e9(0x13b)],_0x159fe2=>{assert(!_0x159fe2);}),_0x16edfa[_0x1f87e9(0x114)]['on'](_0x4b2e50['lpSHV'],_0x7402d1=>{const _0x3ed38b=_0x1f87e9;if(_0x47bc0e[_0x3ed38b(0x172)](_0x3ed38b(0x145),_0x47bc0e[_0x3ed38b(0x169)])){const _0x5e5df1=new BinaryStream(_0x7402d1),_0x15df41=_0x47bc0e[_0x3ed38b(0x157)](readMessageHeader,_0x5e5df1);_0x15df41['msgType'][_0x3ed38b(0x161)][_0x3ed38b(0x15f)]('ACK'),_0x5e5df1[_0x3ed38b(0x16b)]();const _0x1fa416=_0x47bc0e[_0x3ed38b(0x123)](decodeMessage,_0x5e5df1,AcknowledgeMessage);_0x1fa416['constructor'][_0x3ed38b(0x11b)][_0x3ed38b(0x161)][_0x3ed38b(0x15f)](_0x47bc0e[_0x3ed38b(0x121)]),_0x47bc0e[_0x3ed38b(0x17c)](_0x478ca8);}else{const _0xf1209e=new _0x1e1571(_0x274280),_0x59b713=_0x47bc0e[_0x3ed38b(0x111)](_0x370a54,_0xf1209e);_0x59b713[_0x3ed38b(0x16c)][_0x3ed38b(0x161)][_0x3ed38b(0x15f)](_0x3ed38b(0x104)),_0xf1209e['rewind']();const _0x20237f=_0x47bc0e['JaIBk'](_0x5d7a75,_0xf1209e,_0x59b114);_0x20237f['constructor'][_0x3ed38b(0x11b)]['should'][_0x3ed38b(0x15f)]('AcknowledgeMessage'),_0x47bc0e['YVHbc'](_0x51884b);}}),_0x16edfa[_0x1f87e9(0x114)]['write'](helloMessage);});function _0x43d12a(_0x4170f2,_0x1a3776){const _0x1910f5=_0x417f55,_0x21877d={'yjppW':function(_0xed012d,_0xf0067e,_0x1c620e){return _0xed012d(_0xf0067e,_0x1c620e);},'nkovP':function(_0x236244){return _0x4b2e50['DTtsx'](_0x236244);}},_0x5010ae=new ServerTCP_transport();let _0x3991c8;_0x5010ae[_0x1910f5(0x12f)](_0x16edfa[_0x1910f5(0x13b)],_0x7117a9=>{const _0x49c04d=_0x1910f5;_0x3991c8=_0x7117a9,_0x21877d[_0x49c04d(0x15b)](debugLog,'failed\x20!',_0x7117a9[_0x49c04d(0x13e)]);}),_0x5010ae['on'](_0x1910f5(0x125),_0x1913a7=>{const _0x2f877c=_0x1910f5;_0x4b2e50[_0x2f877c(0x115)](_0x1a3776,new Error(_0x4b2e50[_0x2f877c(0x148)]));}),_0x5010ae['on'](_0x1910f5(0x142),_0x49876a=>{const _0xad1b6f=_0x1910f5;debugLog(_0xad1b6f(0x142),_0x49876a),_0x3991c8&&_0x3991c8[_0xad1b6f(0x13e)][_0xad1b6f(0x161)][_0xad1b6f(0x113)](/BadConnectionRejected/),_0x21877d[_0xad1b6f(0x179)](_0x1a3776);}),_0x16edfa[_0x1910f5(0x114)][_0x1910f5(0x171)](_0x4170f2);}_0x4b2e50[_0x417f55(0x17a)](it,_0x417f55(0x167),_0x4dadcc=>{_0x4b2e50['rJlbb'](_0x43d12a,altered_helloMessage,_0x4dadcc);}),_0x4b2e50[_0x417f55(0x163)](it,_0x417f55(0x153),_0x28fa6c=>{_0x43d12a(altered_helloMessage2,_0x28fa6c);}),_0x4b2e50[_0x417f55(0x11c)](it,_0x4b2e50[_0x417f55(0x13c)],_0x540731=>{const _0x1db755=_0x417f55;_0x4b2e50[_0x1db755(0x162)](_0x4b2e50['FqALj'],'gmbtN')?_0x2cb1ba[_0x1db755(0x108)](_0x4a926d[_0x1db755(0x13e)]):_0x43d12a(altered_helloMessage3,_0x540731);}),it(_0x4b2e50['yAgNk'],function(_0xc5167d){const _0x56de9d=_0x417f55,_0x5f5756=new ServerTCP_transport();_0x5f5756[_0x56de9d(0x13d)][_0x56de9d(0x161)][_0x56de9d(0x12e)](0x0),_0x5f5756[_0x56de9d(0x13d)]=0xa,_0x5f5756[_0x56de9d(0x12f)](_0x16edfa[_0x56de9d(0x13b)],_0x194808=>{const _0xae4c7b=_0x56de9d;assert(_0x194808),_0x194808[_0xae4c7b(0x13e)][_0xae4c7b(0x161)][_0xae4c7b(0x113)](/BadProtocolVersionUnsupported/);});const _0x1ca224=new HelloMessage({'protocolVersion':0x5,'receiveBufferSize':0x3e8,'sendBufferSize':0x3e8,'maxMessageSize':0xa,'maxChunkCount':0xa,'endpointUrl':_0x56de9d(0x158)});_0x16edfa[_0x56de9d(0x114)]['on'](_0x4b2e50[_0x56de9d(0x16a)],_0x9cef84=>{const _0x4c900b=_0x56de9d;if('ExPcK'!==_0x4c900b(0x127)){const _0x4ded66=new BinaryStream(_0x9cef84),_0x3ee045=_0x4b2e50['jTtLs'](readMessageHeader,_0x4ded66);_0x3ee045['msgType'][_0x4c900b(0x161)]['equal'](_0x4b2e50[_0x4c900b(0x10b)]),_0x4ded66['rewind']();const _0x298708=decodeMessage(_0x4ded66,AcknowledgeMessage);_0x298708['constructor']['name'][_0x4c900b(0x161)][_0x4c900b(0x15f)](_0x4b2e50[_0x4c900b(0x16f)]),_0x298708[_0x4c900b(0x13f)]['name'][_0x4c900b(0x161)][_0x4c900b(0x12e)](_0x4b2e50[_0x4c900b(0x11a)]),_0x4b2e50[_0x4c900b(0x131)](_0xc5167d);}else _0x775fff[_0x4c900b(0x156)](_0x39f7a9);}),_0x16edfa[_0x56de9d(0x114)][_0x56de9d(0x171)](_0x4b2e50[_0x56de9d(0x17a)](packTcpMessage,_0x56de9d(0x159),_0x1ca224));});function _0x3152f4(_0x1879f8){const _0x5d21e7=_0x417f55,_0xee9c2d={'HpXPk':function(_0x116bcc,_0xdab25,_0x525bdf){const _0x5c7f77=_0x17d0;return _0x4b2e50[_0x5c7f77(0x17a)](_0x116bcc,_0xdab25,_0x525bdf);}};if(_0x4b2e50['FVKtW'](_0x4b2e50[_0x5d21e7(0x124)],_0x4b2e50['LVEeY'])){const _0x1755a7=new ServerTCP_transport();_0x1755a7['setLimits']({'maxChunkCount':0x2710,'maxMessageSize':0x2710,'receiveBufferSize':0x2710,'sendBufferSize':0x2710}),_0x1755a7['init'](_0x16edfa['server'],_0x88954c=>{const _0x27db7a=_0x5d21e7;_0x88954c&&console[_0x27db7a(0x108)](_0x88954c[_0x27db7a(0x13e)]),assert(!_0x88954c);}),_0x1755a7['on'](_0x4b2e50[_0x5d21e7(0x106)],_0xa73572=>{const _0x17fdc2=_0x5d21e7;utils[_0x17fdc2(0x174)](_0xa73572,openChannelRequest),_0x1755a7[_0x17fdc2(0x14e)][_0x17fdc2(0x161)]['be']['greaterThan'](0x0),_0x1755a7[_0x17fdc2(0x15c)]['should']['be'][_0x17fdc2(0x126)](0x14),_0x1879f8();});let _0x51d01c=0x1;_0x16edfa[_0x5d21e7(0x114)]['on'](_0x4b2e50[_0x5d21e7(0x16a)],_0x4f1467=>{_0x51d01c++;}),_0x1755a7[_0x5d21e7(0x14e)][_0x5d21e7(0x161)][_0x5d21e7(0x15f)](0x0),_0x1755a7[_0x5d21e7(0x15c)]['should']['equal'](0x0);}else{const _0x12fd95=new _0x2fd322();_0x12fd95[_0x5d21e7(0x12f)](_0x405648[_0x5d21e7(0x13b)],_0x59f764=>{}),_0x12fd95['on'](_0x4b2e50[_0x5d21e7(0x106)],_0x23ce64=>{_0x4ea8dc();});const _0x3e47f7=_0x2cf306[_0x5d21e7(0x130)](_0x5d21e7(0x10a),'hex');_0xb44002[_0x5d21e7(0x114)]['on'](_0x5d21e7(0x138),_0x4f8c47=>{const _0x2bd6e7=_0x5d21e7,_0x29ce97=new _0x4514c1(_0x4f8c47),_0x619296=_0x22ab2e(_0x29ce97);_0x29ce97['rewind']();const _0xd1a5d4=_0xee9c2d[_0x2bd6e7(0x14f)](_0x46cb37,_0x29ce97,_0x40ca19);}),_0x533a4c['client'][_0x5d21e7(0x171)](_0x33dc60),_0x20e727[_0x5d21e7(0x114)][_0x5d21e7(0x171)](_0x58f8e0[_0x5d21e7(0x14b)]);}}it('should\x20bind\x20a\x20socket,\x20process\x20the\x20HEL\x20message\x20and\x20forward\x20subsequent\x20messageChunk',function(_0x1509f0){const _0x494310=_0x417f55;_0x3152f4(_0x1509f0),_0x16edfa['client'][_0x494310(0x171)](helloMessage),_0x16edfa[_0x494310(0x114)][_0x494310(0x171)](openChannelRequest);}),it(_0x417f55(0x135),function(_0x2648cb){const _0x2fff6d=_0x417f55;_0x4b2e50[_0x2fff6d(0x177)](_0x3152f4,_0x2648cb);const _0x2bbea7=helloMessage[_0x2fff6d(0x12a)](0x0,0xa),_0x3dde5b=helloMessage[_0x2fff6d(0x12a)](0xa);_0x16edfa['client']['write'](_0x2bbea7),_0x16edfa[_0x2fff6d(0x114)][_0x2fff6d(0x171)](_0x3dde5b),_0x16edfa[_0x2fff6d(0x114)][_0x2fff6d(0x171)](openChannelRequest);}),it(_0x417f55(0x137),function(_0x10546f){const _0x567fe7=_0x417f55;_0x3152f4(_0x10546f);const _0x24e679=helloMessage[_0x567fe7(0x12a)](0x0,0xa),_0x4d648c=helloMessage[_0x567fe7(0x12a)](0xa,0x19),_0x181a2e=helloMessage[_0x567fe7(0x12a)](0x19);_0x16edfa['client']['write'](_0x24e679),_0x16edfa['client'][_0x567fe7(0x171)](_0x4d648c),_0x16edfa[_0x567fe7(0x114)][_0x567fe7(0x171)](_0x181a2e),_0x16edfa[_0x567fe7(0x114)][_0x567fe7(0x171)](openChannelRequest);}),_0x4b2e50[_0x417f55(0x118)](it,_0x417f55(0x155),function(_0x35d79a){const _0x177217=_0x417f55;_0x4b2e50[_0x177217(0x177)](_0x3152f4,_0x35d79a);for(let _0x5b031a=0x0;_0x4b2e50[_0x177217(0x140)](_0x5b031a,helloMessage[_0x177217(0x11f)]);_0x5b031a++){const _0x46341d=helloMessage[_0x177217(0x12a)](_0x5b031a,_0x5b031a+0x1);_0x16edfa[_0x177217(0x114)][_0x177217(0x171)](_0x46341d);}_0x16edfa[_0x177217(0x114)]['write'](openChannelRequest);}),_0x4b2e50[_0x417f55(0x129)](it,_0x417f55(0x16e),function(_0x201683){const _0x41d3a3=_0x417f55,_0x2b24e6={'Bmrkc':function(_0x1b842e,_0x31d9c6,_0x68d29){const _0x33a926=_0x17d0;return _0x4b2e50[_0x33a926(0x17a)](_0x1b842e,_0x31d9c6,_0x68d29);},'SEFvC':function(_0x518db9){return _0x518db9();},'mzWyH':function(_0x4523a0,_0x4100d9){const _0x16d85e=_0x17d0;return _0x4b2e50[_0x16d85e(0x141)](_0x4523a0,_0x4100d9);},'vMqyT':_0x41d3a3(0x109),'jtZPf':_0x4b2e50[_0x41d3a3(0x103)]};if(_0x4b2e50[_0x41d3a3(0x139)](_0x4b2e50['sKPig'],_0x41d3a3(0x13a))){const _0x3de8f0=new _0x2b8aa2(_0x572579),_0x1a0010=_0x1b39e6(_0x3de8f0);_0x1a0010[_0x41d3a3(0x16c)][_0x41d3a3(0x161)][_0x41d3a3(0x15f)](_0x41d3a3(0x143)),_0x3de8f0['rewind']();const _0x7f5411=_0x2b24e6[_0x41d3a3(0x136)](_0x16e4cf,_0x3de8f0,_0x107b32);_0x7f5411[_0x41d3a3(0x10c)]['name'][_0x41d3a3(0x161)][_0x41d3a3(0x15f)](_0x41d3a3(0x168)),_0x7f5411[_0x41d3a3(0x13f)][_0x41d3a3(0x11b)][_0x41d3a3(0x161)][_0x41d3a3(0x12e)](_0x41d3a3(0x117)),_0x2b24e6[_0x41d3a3(0x166)](_0x22b664);}else{const _0x537188=new ServerTCP_transport();_0x537188[_0x41d3a3(0x12f)](_0x16edfa[_0x41d3a3(0x13b)],_0x241238=>{});const _0x2c8b68=new HelloMessage({'protocolVersion':0x0,'receiveBufferSize':0x2000,'sendBufferSize':0x2000,'maxMessageSize':0x0,'maxChunkCount':0x0,'endpointUrl':'some\x20string'});_0x16edfa['client']['on'](_0x4b2e50[_0x41d3a3(0x16a)],_0x2e913d=>{const _0x4c0b43=_0x41d3a3;if(_0x2b24e6['mzWyH'](_0x2b24e6[_0x4c0b43(0x149)],'UhOIe'))_0x1d539d[_0x4c0b43(0x13e)][_0x4c0b43(0x161)][_0x4c0b43(0x113)](/BadConnectionRejected/);else{const _0x1fb149=new BinaryStream(_0x2e913d),_0x4640b8=readMessageHeader(_0x1fb149);_0x4640b8[_0x4c0b43(0x16c)][_0x4c0b43(0x161)][_0x4c0b43(0x170)]['equal'](_0x4c0b43(0x143)),_0x1fb149[_0x4c0b43(0x16b)]();const _0x1bb1af=_0x2b24e6[_0x4c0b43(0x136)](decodeMessage,_0x1fb149,AcknowledgeMessage);_0x1bb1af[_0x4c0b43(0x10c)][_0x4c0b43(0x11b)]['should']['equal'](_0x2b24e6[_0x4c0b43(0x11e)]),_0x2b24e6[_0x4c0b43(0x166)](_0x201683);}}),_0x16edfa[_0x41d3a3(0x114)]['write'](_0x4b2e50[_0x41d3a3(0x17a)](packTcpMessage,_0x4b2e50[_0x41d3a3(0x154)],_0x2c8b68));}}),it(_0x4b2e50[_0x417f55(0x160)],function(_0x608b4d){const _0xa614b0=_0x417f55,_0x386b7c=new ServerTCP_transport();_0x386b7c['init'](_0x16edfa['server'],_0x43e2a6=>{});const _0x27102f=new HelloMessage({'protocolVersion':0x0,'receiveBufferSize':0x200,'sendBufferSize':0x200,'maxMessageSize':0x0,'maxChunkCount':0x0,'endpointUrl':_0x4b2e50[_0xa614b0(0x10e)]});_0x16edfa[_0xa614b0(0x114)]['on'](_0xa614b0(0x138),_0x544450=>{const _0x41eaf6=_0xa614b0,_0x5a0ae9=new BinaryStream(_0x544450),_0x15d77d=readMessageHeader(_0x5a0ae9);_0x15d77d[_0x41eaf6(0x16c)][_0x41eaf6(0x161)][_0x41eaf6(0x15f)](_0x4b2e50[_0x41eaf6(0x10b)]),_0x5a0ae9['rewind']();const _0x182c5d=decodeMessage(_0x5a0ae9,AcknowledgeMessage);_0x182c5d['constructor']['name'][_0x41eaf6(0x161)]['equal'](_0x4b2e50[_0x41eaf6(0x16f)]),_0x182c5d[_0x41eaf6(0x13f)][_0x41eaf6(0x11b)][_0x41eaf6(0x161)][_0x41eaf6(0x12e)](_0x4b2e50['CBfuM']),_0x608b4d();}),_0x16edfa[_0xa614b0(0x114)]['write'](packTcpMessage(_0xa614b0(0x159),_0x27102f));}),_0x4b2e50[_0x417f55(0x163)](it,'Test\x20CLO\x20message\x20at\x20transport\x20end\x20',function(_0x1d6f9b){const _0x1f35f5=_0x417f55,_0x5f1803={'XqFRb':function(_0x47fdc2){return _0x47fdc2();},'HzcHC':function(_0x52dbcb,_0x116193){return _0x52dbcb(_0x116193);}},_0x48b094=new ServerTCP_transport();_0x48b094['init'](_0x16edfa[_0x1f35f5(0x13b)],_0x10505d=>{}),_0x48b094['on'](_0x4b2e50[_0x1f35f5(0x106)],_0x2e0cac=>{_0x5f1803['XqFRb'](_0x1d6f9b);});const _0x1631bf=Buffer[_0x1f35f5(0x130)](_0x4b2e50[_0x1f35f5(0x15e)],_0x4b2e50[_0x1f35f5(0x134)]);_0x16edfa[_0x1f35f5(0x114)]['on'](_0x1f35f5(0x138),_0x1c128b=>{const _0x571a9a=_0x1f35f5,_0x260a92=new BinaryStream(_0x1c128b),_0x5611dd=_0x5f1803[_0x571a9a(0x164)](readMessageHeader,_0x260a92);_0x260a92[_0x571a9a(0x16b)]();const _0x1e9c6b=decodeMessage(_0x260a92,AcknowledgeMessage);}),_0x16edfa[_0x1f35f5(0x114)][_0x1f35f5(0x171)](helloMessage),_0x16edfa[_0x1f35f5(0x114)][_0x1f35f5(0x171)](packets[_0x1f35f5(0x14b)]);});});