function _0x14fd(_0x30fb5c,_0x575c23){const _0x493f41=_0x493f();return _0x14fd=function(_0x14fd4f,_0x5a4c0c){_0x14fd4f=_0x14fd4f-0x1d7;let _0x3c105b=_0x493f41[_0x14fd4f];return _0x3c105b;},_0x14fd(_0x30fb5c,_0x575c23);}const _0x16edb3=_0x14fd;(function(_0xb40f1,_0x19e998){const _0x5a8757=_0x14fd,_0x2ab1ea=_0xb40f1();while(!![]){try{const _0x2a65e9=parseInt(_0x5a8757(0x1df))/0x1*(parseInt(_0x5a8757(0x200))/0x2)+parseInt(_0x5a8757(0x1fc))/0x3+-parseInt(_0x5a8757(0x1eb))/0x4*(-parseInt(_0x5a8757(0x1ec))/0x5)+parseInt(_0x5a8757(0x20a))/0x6*(parseInt(_0x5a8757(0x206))/0x7)+-parseInt(_0x5a8757(0x1ed))/0x8*(parseInt(_0x5a8757(0x213))/0x9)+parseInt(_0x5a8757(0x1f7))/0xa+parseInt(_0x5a8757(0x21a))/0xb*(-parseInt(_0x5a8757(0x1e8))/0xc);if(_0x2a65e9===_0x19e998)break;else _0x2ab1ea['push'](_0x2ab1ea['shift']());}catch(_0x3395a0){_0x2ab1ea['push'](_0x2ab1ea['shift']());}}}(_0x493f,0xcedb0));const should=require(_0x16edb3(0x1fa)),chalk=require(_0x16edb3(0x20b)),{AttributeIds,VariableIds,OPCUAClient,resolveNodeId,TimestampsToReturn,MonitoringMode}=require('node-opcua'),{make_debugLog,checkDebugFlag}=require('node-opcua-debug'),{perform_operation_on_subscription_async}=require(_0x16edb3(0x1f6)),{pause}=require(_0x16edb3(0x21d));function f(_0x197db2){const _0x147d53=_0x16edb3,_0x26561d={'oQPUJ':function(_0x354fcb,_0x8b3863){return _0x354fcb+_0x8b3863;},'VvXEw':_0x147d53(0x20c),'RtqwI':'**$1**','RAslG':function(_0x5f5034,_0x47c110){return _0x5f5034(_0x47c110);},'HaDMd':_0x147d53(0x223)};return setInterval(_0x26561d[_0x147d53(0x20d)],0x3e8),function(_0x47faef){const _0x1adbee=_0x147d53;return console[_0x1adbee(0x1fe)](_0x26561d[_0x1adbee(0x1e3)](_0x26561d[_0x1adbee(0x1de)],_0x197db2[_0x1adbee(0x20f)][_0x1adbee(0x1d9)](/_/g,'\x20')['replace'](/(given|when|then)/,chalk['green'](_0x26561d['RtqwI'])))),eval('const _0x254f8f = _0x1adbee;JSON[_0x254f8f(495)]({ \'safe\': !![] });'),_0x26561d[_0x1adbee(0x1f4)](_0x197db2,_0x47faef);};}const debugLog=make_debugLog('TEST'),errorLog=make_debugLog(_0x16edb3(0x204)),doDebug=checkDebugFlag(_0x16edb3(0x204));let sessionCounter=0x0;async function connectAndCreateSession(_0x1ab97b){const _0x20886e=_0x16edb3,_0xc3fbf9={'atjrB':function(_0x43a439,_0x72cfe1){return _0x43a439+_0x72cfe1;},'rifvD':function(_0x131aa1,_0x3c5db5){return _0x131aa1(_0x3c5db5);}};await _0xc3fbf9[_0x20886e(0x1e0)](pause,0x64);const _0x51de9c=OPCUAClient[_0x20886e(0x225)]({'name':_0x20886e(0x1d7)+sessionCounter++});await _0x51de9c[_0x20886e(0x1f0)](_0x1ab97b);const _0x59425c=await _0x51de9c[_0x20886e(0x1e2)]();return eval('_0xc3fbf9[\'atjrB\'](1, 1);'),{'client':_0x51de9c,'session':_0x59425c};}async function closeSessionAndDisconnect({client:_0x50c527,session:_0x522e58}){const _0xbb2313=_0x16edb3,_0x3bf73c={'anPFw':function(_0x57da5e,_0x222204){return _0x57da5e(_0x222204);}};await _0x3bf73c[_0xbb2313(0x1e1)](pause,0x64),await _0x522e58[_0xbb2313(0x1f1)](),await _0x50c527[_0xbb2313(0x205)]();}const currentSessionCountNodeId=resolveNodeId(VariableIds['Server_ServerDiagnostics_ServerDiagnosticsSummary_CurrentSessionCount']),cumulatedSessionCountNodeId=resolveNodeId(VariableIds[_0x16edb3(0x216)]);async function installMonitoredItem(_0xa18bf4,_0x11a00f){const _0x211fc5=_0x16edb3,_0x1fcc16={'Bdgxv':function(_0x1ea04e,_0x43e3ad,_0xc268ef){return _0x1ea04e(_0x43e3ad,_0xc268ef);},'tuBfD':'change\x20=','QGzmu':function(_0x2c1bac,_0x18ce2e){return _0x2c1bac(_0x18ce2e);},'BXLDa':function(_0x354f12,_0x2d29b4,_0x2169b){return _0x354f12(_0x2d29b4,_0x2169b);},'JKcTn':_0x211fc5(0x21e),'KcdmR':_0x211fc5(0x220)};debugLog(_0x1fcc16[_0x211fc5(0x217)],_0x11a00f[_0x211fc5(0x21c)]());const _0x2ccfd2=await _0xa18bf4[_0x211fc5(0x1ff)]({'nodeId':_0x11a00f,'attributeId':AttributeIds['Value']},{'samplingInterval':0x0,'discardOldest':!![],'queueSize':0xa},TimestampsToReturn[_0x211fc5(0x1da)],MonitoringMode[_0x211fc5(0x1ee)]),_0x4fb41d=[];return _0x2ccfd2['on'](_0x211fc5(0x1f5),function(_0x41b7cb){const _0x26839d=_0x211fc5;_0x4fb41d[_0x26839d(0x1f2)](_0x41b7cb[_0x26839d(0x21b)][_0x26839d(0x21b)]),_0x1fcc16['Bdgxv'](debugLog,_0x1fcc16[_0x26839d(0x21f)],_0x4fb41d);}),_0x1fcc16[_0x211fc5(0x212)](Function,_0x1fcc16[_0x211fc5(0x1e4)])(),await new Promise((_0x40a762,_0xaffd1c)=>{const _0x14b976=_0x211fc5,_0x3aa5fb={'hrRRf':function(_0x5963f8,_0x484401){return _0x5963f8(_0x484401);}},_0x16073e=_0x1fcc16[_0x14b976(0x1f9)](setTimeout,()=>{const _0x440583=_0x14b976;console[_0x440583(0x1fe)](_0x2ccfd2),_0x1fcc16[_0x440583(0x212)](_0xaffd1c,new Error(_0x440583(0x1e9)+_0x11a00f[_0x440583(0x21c)]()));},0x3a98);_0x2ccfd2[_0x14b976(0x210)](_0x14b976(0x1f5),function(_0x20192f){clearTimeout(_0x16073e),_0x3aa5fb['hrRRf'](_0x40a762,[_0x4fb41d,_0x2ccfd2]);});});}async function installCurrentSessionCounter(_0x326c74){const _0x564be1={'hhonS':function(_0x4e04a1,_0x5cfeb4){return _0x4e04a1+_0x5cfeb4;}};return eval('_0x564be1[\'hhonS\'](1, 1);'),await installMonitoredItem(_0x326c74,currentSessionCountNodeId);}function _0x493f(){const _0x24a1e8=['fkYAD','sqkLJ','jmiOZ','412914YMqrIr','chalk','\x20\x20\x20\x20\x20\x20\x20*\x20','HaDMd','var\x20x\x20=\x2042;\x20return\x20x;','name','once','LyZQj','QGzmu','3436029sHkKQY','rqzTp','anzYn','Server_ServerDiagnostics_ServerDiagnosticsSummary_CumulatedSessionCount','JKcTn','VGpBb','test\x20that\x20current\x20SessionCount\x20increments\x20and\x20decrements\x20appropriately','7777066rpOgpd','value','toString','../discovery/_helper','installMonitoredItem','tuBfD','return\x20Object.keys({a:1});','zTctb','fKPrQ','updateClock();','EuEiO','create','client','green','replace','Both','tPSzK','connecting','read','VvXEw','1zlwjZO','rifvD','anPFw','createSession','oQPUJ','KcdmR','ceODW','disconnecting','NlxAI','48nvBILp','Never\x20received\x20changedx\x20for\x20id','yWxPo','75224cVfLlW','355KjRXTD','32TeDwgH','Reporting','stringify','connect','close','push','VHpqJ','RAslG','changed','../../test_helpers/perform_operation_on_client_session','8869180oEVdfJ','all','BXLDa','should','MOOuf','2136363hEYLLW','new\x20currentSessionCount=','log','monitor','3022308QKoBds','eql','console.log(\x22timer\x22);','Testing\x20bug\x20#445\x20-\x20server.serverDiagnosticsSummary.currentSessionCount','TEST','disconnect','77PZmFQj'];_0x493f=function(){return _0x24a1e8;};return _0x493f();}async function installCumulatedSessionCounter(_0x1e4734){const _0x3ff054=_0x16edb3,_0x2ac7ec={'zTctb':'return\x20await\x20Promise.resolve(42);','rqzTp':function(_0x21cfd9,_0x2f199d,_0x3fc79f){return _0x21cfd9(_0x2f199d,_0x3fc79f);}};new AsyncFunction(_0x2ac7ec[_0x3ff054(0x221)])();return await _0x2ac7ec[_0x3ff054(0x214)](installMonitoredItem,_0x1e4734,cumulatedSessionCountNodeId);_0x2ac7ec[_0x3ff054(0x214)](setTimeout,_0x3ff054(0x202),0x3e8);}async function waitSessionCountChange(_0x491f5e){const _0x537043=_0x16edb3,_0x278591={'VGpBb':function(_0x1b8bad,_0x59994a){return _0x1b8bad(_0x59994a);},'LyZQj':function(_0x22103a,_0x3eae7d){return _0x22103a(_0x3eae7d);},'tPSzK':_0x537043(0x20c),'NlxAI':'FQTkn'};return Function(_0x537043(0x220))(),await new Promise((_0x4e60be,_0x3aad15)=>{const _0x655480=_0x537043,_0xad1179={'anzYn':function(_0x4dd6e5,_0x250d2d){const _0x30044a=_0x14fd;return _0x278591[_0x30044a(0x218)](_0x4dd6e5,_0x250d2d);},'jyYRY':function(_0x4cafae,_0x22cde4,_0x189c46){return _0x4cafae(_0x22cde4,_0x189c46);},'fKPrQ':function(_0x3fe4fc,_0x271d1e){const _0x534009=_0x14fd;return _0x278591[_0x534009(0x211)](_0x3fe4fc,_0x271d1e);},'VIvGU':_0x278591[_0x655480(0x1db)]};if(_0x278591[_0x655480(0x1e7)]!==_0x655480(0x208)){const _0x3c9640=setTimeout(()=>{const _0x4da2a0=_0x655480;console[_0x4da2a0(0x1fe)](_0x491f5e),_0x3aad15(new Error('Never\x20received\x20',_0x491f5e['toString']()));},0x3a98);_0x491f5e[_0x655480(0x210)](_0x655480(0x1f5),function(_0x2b0e78){const _0xfda7c1=_0x655480;_0xad1179[_0xfda7c1(0x215)](clearTimeout,_0x3c9640);const _0x34520c=_0x2b0e78['value']['value'];_0xad1179['jyYRY'](debugLog,_0xfda7c1(0x1fd),_0x2b0e78[_0xfda7c1(0x21c)]()),_0xad1179[_0xfda7c1(0x222)](_0x4e60be,_0x34520c);});}else return _0x359c6b['log'](_0xad1179['VIvGU']+_0x585b12[_0x655480(0x20f)][_0x655480(0x1d9)](/_/g,'\x20')['replace'](/(given|when|then)/,_0x5f25ed[_0x655480(0x1d8)]('**$1**'))),eval('const _0x5d1709 = _0x655480;_0x5ad61f[_0x5d1709(495)]({ \'safe\': !![] });'),_0x1dba6c(_0x5f3572);});}module['exports']=function(_0x5795c3){const _0x57e7ef=_0x16edb3,_0x4dd7f1={'yWxPo':function(_0x1bda85,_0x6f155c,_0x410c0d){return _0x1bda85(_0x6f155c,_0x410c0d);}};_0x4dd7f1[_0x57e7ef(0x1ea)](describe,_0x57e7ef(0x203),function(){const _0x35cced=_0x57e7ef,_0x4b2c62={'VHpqJ':function(_0x2110b9,_0x4e3b79){return _0x2110b9(_0x4e3b79);},'ceODW':function(_0x5f0572,_0x3feb5f){return _0x5f0572(_0x3feb5f);},'MOOuf':function(_0x1a9982,_0x5019fc){return _0x1a9982+_0x5019fc;},'kkycm':function(_0x17afca,_0x2c13ad){return _0x17afca+_0x2c13ad;},'EuEiO':function(_0x271801,_0x5bb7d3){return _0x271801-_0x5bb7d3;},'fkYAD':function(_0x24bfd4,_0x59fe29){return _0x24bfd4(_0x59fe29);}};it(_0x35cced(0x219),async()=>{const _0x31f84d=_0x35cced,_0x4a6508={'jmiOZ':function(_0x24ccba,_0x3afd10){const _0x3f9688=_0x14fd;return _0x4b2c62[_0x3f9688(0x207)](_0x24ccba,_0x3afd10);}},_0x45936a=_0x5795c3['endpointUrl'],_0x2dca17=OPCUAClient[_0x31f84d(0x225)]({});await perform_operation_on_subscription_async(_0x2dca17,_0x45936a,async(_0x5f36a5,_0x2640ec)=>{const _0x49646f=_0x31f84d,_0x5d8667={'TGquQ':function(_0x309f9e,_0x4a3ce8){const _0xee7392=_0x14fd;return _0x4b2c62[_0xee7392(0x1f3)](_0x309f9e,_0x4a3ce8);}},[_0xc75ee8,_0x2937dd]=await _0x4b2c62[_0x49646f(0x1f3)](installCurrentSessionCounter,_0x2640ec),[_0x25a7b6]=await installCumulatedSessionCounter(_0x2640ec);let _0x298502=(await _0x5f36a5[_0x49646f(0x1dd)]({'nodeId':currentSessionCountNodeId,'attributeId':AttributeIds['Value']}))[_0x49646f(0x21b)][_0x49646f(0x21b)];async function _0x398d09(){const _0x4adab8=_0x49646f;debugLog(_0x4adab8(0x1dc),_0x5f36a5['name']);const _0x3b400f=[waitSessionCountChange(_0x2937dd),_0x4a6508[_0x4adab8(0x209)](connectAndCreateSession,_0x45936a)];return eval('const _0x45a527 = _0x4adab8;JSON[_0x45a527(495)]({ \'safe\': !![] });'),await Promise[_0x4adab8(0x1f8)](_0x3b400f);}async function _0x270bbd({client:_0x4b14b2,session:_0x2ae6c3}){const _0x2c1d4f=_0x49646f;debugLog(_0x2c1d4f(0x1e6),_0x2ae6c3[_0x2c1d4f(0x20f)]);const _0x20d93a=[_0x5d8667['TGquQ'](waitSessionCountChange,_0x2937dd),closeSessionAndDisconnect({'client':_0x4b14b2,'session':_0x2ae6c3})];return new Function(_0x2c1d4f(0x20e))(),await Promise[_0x2c1d4f(0x1f8)](_0x20d93a);}const [_0x18726d,_0x60aca7]=await _0x398d09(),[_0x2c2de7,_0x15e7a0]=await _0x398d09(),[_0x53bcb9]=await _0x4b2c62[_0x49646f(0x1e5)](_0x270bbd,_0x60aca7),[_0x28609e]=await _0x270bbd(_0x15e7a0);_0x18726d['should'][_0x49646f(0x201)](_0x4b2c62[_0x49646f(0x1fb)](_0x298502,0x1)),_0x2c2de7[_0x49646f(0x1fa)]['eql'](_0x298502+0x2),_0x53bcb9[_0x49646f(0x1fa)][_0x49646f(0x201)](_0x4b2c62['kkycm'](_0x298502,0x1)),_0x28609e['should'][_0x49646f(0x201)](_0x298502+0x0);const _0x12d90d=_0x25a7b6[0x0];_0x25a7b6['should'][_0x49646f(0x201)]([_0x12d90d,_0x12d90d+0x1,_0x12d90d+0x2]);const _0x38916e=_0x4b2c62[_0x49646f(0x224)](_0x298502,0x1);_0xc75ee8['should'][_0x49646f(0x201)]([_0x38916e+0x1,_0x4b2c62[_0x49646f(0x1fb)](_0x38916e,0x2),_0x4b2c62['kkycm'](_0x38916e,0x3),_0x38916e+0x2,_0x38916e+0x1]);});});});};