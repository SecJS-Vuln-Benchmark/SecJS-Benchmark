'use strict';const _0x5ddd4e=_0x1813;(function(_0x41b792,_0x5c6b16){const _0x40ee21=_0x1813,_0x577a07=_0x41b792();while(!![]){try{const _0xca496b=-parseInt(_0x40ee21(0x11f))/0x1*(-parseInt(_0x40ee21(0x10d))/0x2)+parseInt(_0x40ee21(0x110))/0x3+parseInt(_0x40ee21(0x112))/0x4+parseInt(_0x40ee21(0x131))/0x5+parseInt(_0x40ee21(0x113))/0x6*(-parseInt(_0x40ee21(0x12a))/0x7)+parseInt(_0x40ee21(0x130))/0x8*(-parseInt(_0x40ee21(0x12f))/0x9)+-parseInt(_0x40ee21(0x11d))/0xa;if(_0xca496b===_0x5c6b16)break;else _0x577a07['push'](_0x577a07['shift']());}catch(_0x85d964){_0x577a07['push'](_0x577a07['shift']());}}}(_0x1341,0xc0f28));const createEntityService=require('..'),entityValidator=require(_0x5ddd4e(0x12b));function _0x1813(_0x1d4915,_0x436043){const _0x134108=_0x1341();return _0x1813=function(_0x181368,_0x4b943e){_0x181368=_0x181368-0x10d;let _0x41b82a=_0x134108[_0x181368];return _0x41b82a;},_0x1813(_0x1d4915,_0x436043);}describe(_0x5ddd4e(0x119),()=>{const _0x403408=_0x5ddd4e,_0x3edfd6={'SnPxI':_0x403408(0x126),'fyuuD':_0x403408(0x114),'KsuHU':_0x403408(0x12c),'xstwy':function(_0x336be5,_0x1519a9){return _0x336be5(_0x1519a9);},'XyMWT':_0x403408(0x121),'IXBEm':'entity-id','TLAPV':_0x403408(0x115),'TKbOL':_0x403408(0x134),'zTsYw':function(_0xfb3531,_0x589faa,_0x53e9d3){return _0xfb3531(_0x589faa,_0x53e9d3);},'KJdIx':'Emit\x20event:\x20Create','NBhVm':function(_0x470ac4,_0x55dbac,_0x509d5f){return _0x470ac4(_0x55dbac,_0x509d5f);},'AYPWX':_0x403408(0x12e),'ZISyW':_0x403408(0x116)};let _0x176f2f;const _0x5a1c48={'emit':jest['fn']()};let _0x486893={'attr':_0x3edfd6[_0x403408(0x11b)]};beforeAll(()=>{const _0x105b40=_0x403408,_0x38a9d7={'uid':_0x105b40(0x121),'kind':_0x105b40(0x10f),'modelName':_0x105b40(0x12c),'privateAttributes':[],'attributes':{'attr':{'type':_0x3edfd6['SnPxI']}}};_0x176f2f=createEntityService({'strapi':{'getModel':()=>_0x38a9d7},'db':{'transaction':_0x3345ac=>_0x3345ac(),'query':()=>({'count':()=>0x0,'create':({data:_0x3c09f6})=>_0x3c09f6,'update':({data:_0x596d43})=>_0x596d43,'findOne':()=>_0x486893,'findMany':()=>[_0x486893,_0x486893],'delete':()=>({}),'deleteMany':()=>({})})},'eventHub':_0x5a1c48,'entityValidator':entityValidator}),global[_0x105b40(0x133)]={'getModel':()=>_0x38a9d7,'config':{'get':()=>[]}};}),_0x3edfd6[_0x403408(0x118)](test,_0x3edfd6['KJdIx'],async()=>{const _0x215e3e=_0x403408;await _0x176f2f[_0x215e3e(0x132)]('test-model',{'data':_0x486893}),expect(_0x5a1c48['emit'])[_0x215e3e(0x111)](_0x3edfd6[_0x215e3e(0x11a)],{'entry':_0x486893,'model':_0x215e3e(0x12c),'uid':'api::test.test'}),_0x5a1c48[_0x215e3e(0x11e)]['mockClear']();}),_0x3edfd6[_0x403408(0x118)](test,_0x403408(0x122),async()=>{const _0x4fcaca=_0x403408;await _0x176f2f[_0x4fcaca(0x117)](_0x3edfd6['KsuHU'],_0x4fcaca(0x11c),{'data':_0x486893}),_0x3edfd6[_0x4fcaca(0x128)](expect,_0x5a1c48[_0x4fcaca(0x11e)])[_0x4fcaca(0x111)]('entry.update',{'entry':_0x486893,'model':_0x3edfd6['KsuHU'],'uid':_0x3edfd6[_0x4fcaca(0x10e)]}),_0x5a1c48['emit'][_0x4fcaca(0x125)]();}),_0x3edfd6[_0x403408(0x123)](test,_0x3edfd6[_0x403408(0x127)],async()=>{const _0x1afda6=_0x403408;await _0x176f2f[_0x1afda6(0x124)]('test-model',_0x3edfd6['IXBEm'],{}),expect(_0x5a1c48['emit'])[_0x1afda6(0x111)](_0x1afda6(0x115),{'entry':_0x486893,'model':_0x1afda6(0x12c),'uid':_0x3edfd6[_0x1afda6(0x10e)]}),_0x5a1c48[_0x1afda6(0x11e)][_0x1afda6(0x125)]();}),_0x3edfd6[_0x403408(0x123)](test,_0x403408(0x12d),async()=>{const _0xcd6c8f=_0x403408;await _0x176f2f['deleteMany'](_0x3edfd6[_0xcd6c8f(0x135)],{}),_0x3edfd6[_0xcd6c8f(0x128)](expect,_0x5a1c48[_0xcd6c8f(0x11e)])['toHaveBeenCalledWith'](_0x3edfd6['TLAPV'],{'entry':_0x486893,'model':_0x3edfd6['KsuHU'],'uid':'api::test.test'}),_0x3edfd6['xstwy'](expect,_0x5a1c48[_0xcd6c8f(0x11e)])[_0xcd6c8f(0x129)](0x2),_0x5a1c48['emit'][_0xcd6c8f(0x125)]();}),test(_0x3edfd6[_0x403408(0x120)],async()=>{const _0xcccb2=_0x403408;_0x486893=null,await _0x176f2f[_0xcccb2(0x124)](_0xcccb2(0x12c),_0xcccb2(0x11c),{}),expect(_0x5a1c48['emit'])[_0xcccb2(0x129)](0x0),_0x5a1c48[_0xcccb2(0x11e)][_0xcccb2(0x125)]();});});function _0x1341(){const _0x34f864=['4597660NyujVJ','create','strapi','value','KsuHU','3103148dkpWnZ','XyMWT','singleType','1656936zrNDcK','toHaveBeenCalledWith','4930128htUCGD','948FIqXRv','entry.create','entry.delete','Do\x20not\x20emit\x20event\x20when\x20no\x20deleted\x20entity','update','zTsYw','Entity\x20service\x20triggers\x20webhooks','fyuuD','TKbOL','entity-id','13741980BHRkOj','emit','1dFsVrF','ZISyW','api::test.test','Emit\x20event:\x20Update','NBhVm','delete','mockClear','string','AYPWX','xstwy','toHaveBeenCalledTimes','58492ZBepES','../../entity-validator','test-model','Emit\x20event:\x20Delete\x20Many','Emit\x20event:\x20Delete','1156788sijmtT','48CLtJWc'];_0x1341=function(){return _0x34f864;};return _0x1341();}