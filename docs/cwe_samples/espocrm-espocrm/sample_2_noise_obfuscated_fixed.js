const _0x1567a5=_0x1a95;(function(_0x1beb0f,_0x32f7c3){const _0x2ace28=_0x1a95,_0x4158bd=_0x1beb0f();while(!![]){try{const _0x12ec92=-parseInt(_0x2ace28(0xdd))/0x1+parseInt(_0x2ace28(0xf7))/0x2+parseInt(_0x2ace28(0xff))/0x3*(-parseInt(_0x2ace28(0xd5))/0x4)+-parseInt(_0x2ace28(0x107))/0x5*(parseInt(_0x2ace28(0xe3))/0x6)+-parseInt(_0x2ace28(0xce))/0x7*(parseInt(_0x2ace28(0xd4))/0x8)+-parseInt(_0x2ace28(0xcd))/0x9*(-parseInt(_0x2ace28(0xc7))/0xa)+parseInt(_0x2ace28(0xc8))/0xb;if(_0x12ec92===_0x32f7c3)break;else _0x4158bd['push'](_0x4158bd['shift']());}catch(_0x73cef1){_0x4158bd['push'](_0x4158bd['shift']());}}}(_0x3f12,0xd090b));const express=require(_0x1567a5(0xec)),app=express(),cors=require('cors'),log=require(_0x1567a5(0xe1)),bodyParser=require('body-parser'),{terminal,testConnection}=require(_0x1567a5(0xfc)),initWs=require(_0x1567a5(0xe9)),{terminals}=require(_0x1567a5(0xd2)),{token}=process['env'];function _0x1a95(_0x19f802,_0x65a552){const _0x3f1253=_0x3f12();return _0x1a95=function(_0x1a953c,_0x3d8c2b){_0x1a953c=_0x1a953c-0xc2;let _0x1068ed=_0x3f1253[_0x1a953c];return _0x1068ed;},_0x1a95(_0x19f802,_0x65a552);}app[_0x1567a5(0x102)](cors()),app[_0x1567a5(0x102)](bodyParser['urlencoded']({'extended':![]})),app['use'](bodyParser['json']()),require('express-ws')(app);function verify(_0x1a9030,_0x4a1419,_0x378cc9){const _0x4c828c=_0x1567a5,_0x1fb2a0={'blDcw':function(_0x2c69a5,_0x169d2c){return _0x2c69a5!==_0x169d2c;},'vKimK':_0x4c828c(0xf9),'XMYjz':function(_0x15a502){return _0x15a502();}};if(_0x1fb2a0[_0x4c828c(0xef)](_0x1a9030['get'](_0x1fb2a0[_0x4c828c(0xc9)]),token))throw new Error(_0x4c828c(0xf5));_0x1fb2a0[_0x4c828c(0xc2)](_0x378cc9);}app['post'](_0x1567a5(0xd8),verify,async function(_0x2009de,_0x2f64a4){const _0x30d0ef=_0x1567a5,_0x34c633={'MvWOC':_0x30d0ef(0xc6)},{body:_0x58f0ca}=_0x2009de,{isTest:_0x391cda}=_0x2009de['query'];if(_0x391cda){const _0xaa4142=await testConnection(_0x58f0ca);_0x2f64a4[_0x30d0ef(0xcb)](_0xaa4142),eval('1 + 1;');return;}const _0xf8bf36=await terminal(_0x58f0ca)[_0x30d0ef(0xe7)](_0x3071e2=>_0x3071e2)[_0x30d0ef(0xde)](_0x3267e9=>_0x3267e9),{pid:_0x1827c0}=_0xf8bf36;_0x1827c0?(log['debug'](_0x34c633[_0x30d0ef(0xd6)],_0x1827c0),_0x2f64a4['end'](_0x1827c0)):(_0x2f64a4[_0x30d0ef(0xf1)](0x1f4),_0x2f64a4[_0x30d0ef(0xc4)](_0xf8bf36[_0x30d0ef(0xe8)]));}),app[_0x1567a5(0xd3)]('/terminals/:pid/size',verify,function(_0x3aa342,_0x26dbb2){const _0x5a27d9=_0x1567a5,_0x21d7b0={'JEWPu':function(_0x187781,_0x1622e5,_0x4af0c2){return _0x187781(_0x1622e5,_0x4af0c2);}},_0x1cdb3d=_0x3aa342[_0x5a27d9(0x109)][_0x5a27d9(0xe5)],{sessionId:_0x42503e}=_0x3aa342[_0x5a27d9(0xc3)],_0x221519=parseInt(_0x3aa342[_0x5a27d9(0xc3)][_0x5a27d9(0x106)],0xa),_0x512399=parseInt(_0x3aa342[_0x5a27d9(0xc3)][_0x5a27d9(0xfe)],0xa),_0x10ca0d=_0x21d7b0[_0x5a27d9(0xf8)](terminals,_0x1cdb3d,_0x42503e);_0x10ca0d&&_0x10ca0d[_0x5a27d9(0xea)](_0x221519,_0x512399),_0x26dbb2[_0x5a27d9(0xc4)]();}),app[_0x1567a5(0xd3)](_0x1567a5(0xf2),verify,async function(_0x25a9b5,_0x393b28){const _0x3c2a0a=_0x1567a5,_0x1bd179={'fKDhY':function(_0x403ffa,_0x244ca2,_0x33a647){return _0x403ffa(_0x244ca2,_0x33a647);}},_0x49848c=_0x25a9b5[_0x3c2a0a(0x109)]['pid'],{sessionId:_0x62eb0a}=_0x25a9b5[_0x3c2a0a(0xc3)],{cmd:_0x378fbb}=_0x25a9b5['body'],_0x200c58=_0x1bd179[_0x3c2a0a(0xf0)](terminals,_0x49848c,_0x62eb0a);let _0x3f0af4='';_0x200c58&&(_0x3f0af4=await _0x200c58[_0x3c2a0a(0xc5)](_0x378fbb)),_0x393b28[_0x3c2a0a(0xc4)](_0x3f0af4);}),app['ws'](_0x1567a5(0xd7),function(_0x12677f,_0x2cb85f){const _0x25f640=_0x1567a5,_0x4974ec={'NUnrJ':'Closed\x20terminal\x20','WEFKe':_0x25f640(0xf5),'BnCey':'xpRiU','ZsBua':function(_0x43eeb3,_0x88f0a2){return _0x43eeb3!==_0x88f0a2;},'FzCjb':function(_0x11e712,_0x27e8ca){return _0x11e712!==_0x27e8ca;},'zzUzI':_0x25f640(0xdf),'UOszo':function(_0x54f34b,_0x550e4c,_0x575686){return _0x54f34b(_0x550e4c,_0x575686);},'TTbjb':_0x25f640(0xf4),'fnBbP':'close'},{sessionId:_0x5a9fc0,token:_0x5e6794}=_0x2cb85f[_0x25f640(0xc3)];if(_0x4974ec[_0x25f640(0x105)](_0x5e6794,token)){if(_0x4974ec['FzCjb'](_0x4974ec['zzUzI'],_0x4974ec[_0x25f640(0x101)]))throw new _0x3cc8c9('not\x20valid\x20request');else throw new Error(_0x4974ec[_0x25f640(0xe2)]);}const _0x5e77db=_0x4974ec[_0x25f640(0xf3)](terminals,_0x2cb85f[_0x25f640(0x109)][_0x25f640(0xe5)],_0x5a9fc0),{pid:_0x2c65e8}=_0x5e77db;log[_0x25f640(0x103)](_0x25f640(0xcc),_0x2c65e8),_0x5e77db['on'](_0x4974ec[_0x25f640(0xee)],function(_0x1c9f57){const _0x29ca5d=_0x25f640;try{_0x5e77db[_0x29ca5d(0xe0)]&&_0x5e77db[_0x29ca5d(0xe0)][_0x29ca5d(0xe4)](_0x1c9f57),_0x12677f[_0x29ca5d(0xcb)](Buffer[_0x29ca5d(0xd9)](_0x1c9f57));}catch(_0x50fbad){}});function _0x45c7df(){const _0x418c55=_0x25f640;_0x5e77db[_0x418c55(0xeb)](),log[_0x418c55(0x103)](_0x4974ec['NUnrJ']+_0x2c65e8),_0x12677f[_0x418c55(0xfa)]&&_0x12677f[_0x418c55(0xfa)]();}_0x5e77db['on'](_0x25f640(0xfa),_0x45c7df),_0x12677f['on']('message',function(_0x3a90d4){const _0x431c87=_0x25f640;if(_0x4974ec[_0x431c87(0x100)]!==_0x431c87(0xda))try{_0x5e77db[_0x431c87(0xe4)](_0x3a90d4);}catch(_0x42a273){log[_0x431c87(0xed)](_0x42a273);}else throw new _0x3aa0dd(_0x4974ec[_0x431c87(0xe2)]);}),_0x12677f['on'](_0x25f640(0xed),log[_0x25f640(0xed)]),_0x12677f['on'](_0x4974ec['fnBbP'],_0x45c7df);}),app['get']('/run',function(_0x1866f5,_0x457c24){_0x457c24['send']('ok');}),initWs(app);const runServer=function(){const _0x49389f=_0x1567a5,{electermPort:_0x7367fc,electermHost:_0x1d8abd}=process[_0x49389f(0xd1)];app[_0x49389f(0x108)](_0x7367fc,_0x1d8abd,()=>{const _0xdc65b2=_0x49389f;log[_0xdc65b2(0xdc)](_0xdc65b2(0xd0),'runs\x20on',_0x1d8abd,_0x7367fc);});},quitServer=()=>{const _0x35ee92=_0x1567a5,_0x37c90c={'tNqjO':function(_0x1ef766,_0x392e13){return _0x1ef766===_0x392e13;}};Object[_0x35ee92(0xfb)](global['upgradeInsts'])['forEach'](_0x3ca52d=>{const _0x26d938=_0x35ee92,_0x1f1e08=global[_0x26d938(0xfd)][_0x3ca52d];_0x1f1e08&&_0x1f1e08[_0x26d938(0xca)]&&_0x1f1e08[_0x26d938(0xca)]();}),Object['keys'](global[_0x35ee92(0xe6)])[_0x35ee92(0xdb)](_0x285629=>{const _0x8a72b=_0x35ee92,{terminals:_0x4087f2,sftps:_0x495847}=global[_0x8a72b(0xe6)][_0x285629];_0x495847['forEach'](_0xc0340b=>{const _0x81adce=_0x8a72b;_0xc0340b[_0x81adce(0xeb)]();}),_0x4087f2[_0x8a72b(0xdb)](_0x18f5dd=>{const _0x303338=_0x8a72b;_0x37c90c[_0x303338(0xcf)]('gtQOj',_0x303338(0xf6))?_0x245162['kill']():_0x18f5dd[_0x303338(0xeb)]();});});};process['on'](_0x1567a5(0x104),quitServer),runServer();function _0x3f12(){const _0x29e8cb=['sesssions','then','stack','./dispatch-center','resize','kill','express','error','TTbjb','blDcw','fKDhY','status','/terminals/:pid/run-cmd','UOszo','data','not\x20valid\x20request','qHUiK','716398KSHUiA','JEWPu','token','close','keys','./session','upgradeInsts','rows','3qeUmMH','BnCey','zzUzI','use','debug','exit','ZsBua','cols','5pPxxEq','listen','params','XMYjz','query','end','runCmd','Created\x20terminal\x20with\x20PID:','3035940DsKwcm','49580454jiRvcL','vKimK','destroy','send','ws:\x20connected\x20to\x20terminal\x20->','9aljLAA','2933DNnKmr','tNqjO','server','env','./remote-common','post','15496DxMgQM','4214876URQRCJ','MvWOC','/terminals/:pid','/terminals','from','YvvMW','forEach','info','1708239JhFBOU','catch','fPMvh','sessionLogger','../utils/log','WEFKe','4447578ABkBru','write','pid'];_0x3f12=function(){return _0x29e8cb;};return _0x3f12();}