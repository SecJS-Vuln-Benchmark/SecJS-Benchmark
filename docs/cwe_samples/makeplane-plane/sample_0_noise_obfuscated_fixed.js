const _0x170dfa=_0x3715;(function(_0x928497,_0x55bef7){const _0x1af816=_0x3715,_0x5576f9=_0x928497();while(!![]){try{const _0x54bf58=-parseInt(_0x1af816(0x1c5))/0x1*(parseInt(_0x1af816(0x1bd))/0x2)+-parseInt(_0x1af816(0x1c8))/0x3+parseInt(_0x1af816(0x1b8))/0x4+-parseInt(_0x1af816(0x18f))/0x5+-parseInt(_0x1af816(0x1a3))/0x6*(parseInt(_0x1af816(0x1c6))/0x7)+-parseInt(_0x1af816(0x182))/0x8*(-parseInt(_0x1af816(0x192))/0x9)+parseInt(_0x1af816(0x19a))/0xa*(parseInt(_0x1af816(0x1aa))/0xb);if(_0x54bf58===_0x55bef7)break;else _0x5576f9['push'](_0x5576f9['shift']());}catch(_0x17cba7){_0x5576f9['push'](_0x5576f9['shift']());}}}(_0x144c,0x970c6),console['log']('==\x20Uptime\x20Kuma\x20Reset\x20Password\x20Tool\x20=='));const Database=require(_0x170dfa(0x1c1)),{R}=require(_0x170dfa(0x199)),readline=require('readline'),{initJWTSecret}=require(_0x170dfa(0x1b5)),User=require(_0x170dfa(0x19f)),{io}=require(_0x170dfa(0x190)),{localWebSocketURL}=require(_0x170dfa(0x193)),args=require('args-parser')(process[_0x170dfa(0x18a)]),rl=readline['createInterface']({'input':process[_0x170dfa(0x1ac)],'output':process[_0x170dfa(0x1a7)]}),main=async()=>{const _0x1b0c66=_0x170dfa,_0x4975e3={'BfjGS':'disconnectOtherSocketClients','VeGHI':'Connecting\x20the\x20database','hrQiq':_0x1b0c66(0x1b9),'sKMfv':'user\x20not\x20found,\x20have\x20you\x20installed?','IORDw':_0x1b0c66(0x186),'CccBW':function(_0xf8ce8a,_0x59d184){return _0xf8ce8a(_0x59d184);},'HtPUQ':function(_0x1acf5c,_0x483b21){return _0x1acf5c(_0x483b21);},'hjCse':_0x1b0c66(0x1c0),'UNfIO':function(_0x42740d,_0x26a97d,_0x98f753){return _0x42740d(_0x26a97d,_0x98f753);},'Jvpwj':_0x1b0c66(0x187),'LqZbo':_0x1b0c66(0x18b),'vasoI':_0x1b0c66(0x18d)};console[_0x1b0c66(0x1b2)](_0x4975e3[_0x1b0c66(0x1af)]),Database[_0x1b0c66(0x19e)](args),await Database[_0x1b0c66(0x1c4)](![],![],!![]);try{if(!process[_0x1b0c66(0x1b7)][_0x1b0c66(0x189)]){const _0x571ae1=await R['findOne'](_0x4975e3['hrQiq']);if(!_0x571ae1)throw new Error(_0x4975e3[_0x1b0c66(0x1ba)]);console[_0x1b0c66(0x1b2)](_0x4975e3[_0x1b0c66(0x1b0)]+_0x571ae1[_0x1b0c66(0x195)]);while(!![]){let _0x44307c=await _0x4975e3[_0x1b0c66(0x194)](question,_0x1b0c66(0x1a4)),_0x383982=await _0x4975e3[_0x1b0c66(0x196)](question,_0x4975e3['hjCse']);if(_0x44307c===_0x383982){await User['resetPassword'](_0x571ae1['id'],_0x44307c),await initJWTSecret(),await _0x4975e3[_0x1b0c66(0x18e)](disconnectAllSocketClients,_0x571ae1[_0x1b0c66(0x195)],_0x44307c);break;}else console['log'](_0x4975e3[_0x1b0c66(0x191)]);}console[_0x1b0c66(0x1b2)](_0x1b0c66(0x1b1));}}catch(_0xfd724d){_0x4975e3[_0x1b0c66(0x198)]===_0x4975e3[_0x1b0c66(0x19c)]?(_0xdef1c9[_0x1b0c66(0x1b2)]('Logged\x20in.'),_0x19463d[_0x1b0c66(0x183)](_0x4975e3['BfjGS'])):console[_0x1b0c66(0x1a5)](_0x1b0c66(0x19b)+_0xfd724d[_0x1b0c66(0x1be)]);}await Database[_0x1b0c66(0x1ca)](),rl[_0x1b0c66(0x1ca)](),console[_0x1b0c66(0x1b2)]('Finished.');};function question(_0x229244){const _0x4dd4b5=_0x170dfa,_0x3f53b6={'IZKwu':function(_0x1cfc72,_0x28964e){return _0x1cfc72(_0x28964e);},'kaJPW':'return\x20Object.keys({a:1});'};return _0x3f53b6['IZKwu'](Function,_0x3f53b6[_0x4dd4b5(0x1bf)])(),new Promise(_0x2ae395=>{const _0x241daa={'YqfjY':function(_0x271889,_0x3103a4){return _0x271889(_0x3103a4);}};rl['question'](_0x229244,_0x567c1b=>{const _0x573895=_0x3715;_0x241daa[_0x573895(0x1a0)](_0x2ae395,_0x567c1b);});});}function _0x3715(_0xa07716,_0x30a435){const _0x144c52=_0x144c();return _0x3715=function(_0x37153d,_0x564b1e){_0x37153d=_0x37153d-0x182;let _0x5d124f=_0x144c52[_0x37153d];return _0x5d124f;},_0x3715(_0xa07716,_0x30a435);}function _0x144c(){const _0x1a812f=['safe','../server/util-server','folZZ','env','691460aVvlEt','user','sKMfv','qtSij','BSuWv','13922PokoDV','message','kaJPW','Confirm\x20New\x20Password:\x20','../server/database','disconnectOtherSocketClients','disconnect','connect','60moZuDQ','532MAiiuh','websocket','803277vPALyt','Connecting\x20to\x20','close','881464xtrTjj','emit','warn','PrDUf','Found\x20user:\x20','Passwords\x20do\x20not\x20match,\x20please\x20try\x20again.','Please\x20restart\x20the\x20server\x20to\x20disconnect\x20all\x20sessions\x20manually.','TEST_BACKEND','argv','AhwDl','exports','OHNvs','UNfIO','1866450UKyOao','socket.io-client','Jvpwj','81CIrsrD','../server/config','CccBW','username','HtPUQ','login','LqZbo','redbean-node','830gyCnHX','Error:\x20','vasoI','Login\x20failed.','init','../server/model/user','YqfjY','nglcN','uTvUS','68682zzZNSQ','New\x20Password:\x20','error','zFebC','stdout','FtTQF','kfpbr','183271LevlpV','Failed\x20to\x20connect\x20to\x20','stdin','Please\x20restart\x20the\x20server\x20to\x20disconnect\x20all\x20sessions.','JmClQ','VeGHI','IORDw','Password\x20reset\x20successfully.','log','Logged\x20in.'];_0x144c=function(){return _0x1a812f;};return _0x144c();}function disconnectAllSocketClients(_0x1bcf3a,_0x5f40ea){const _0x284181=_0x170dfa,_0x32e2f5={'BSuWv':function(_0x19765b,_0x9360ca){return _0x19765b+_0x9360ca;},'uTvUS':_0x284181(0x1c9),'qtSij':'\x20to\x20disconnect\x20all\x20other\x20socket\x20clients','folZZ':_0x284181(0x1c7),'FGWMA':'connect','FtTQF':'connect_error','nlCqY':_0x284181(0x1c3),'JmClQ':function(_0x4bb664,_0x1da540,_0x54df5d){return _0x4bb664(_0x1da540,_0x54df5d);}};return _0x32e2f5[_0x284181(0x1ae)](setTimeout,function(){const _0x2bbc26=_0x284181;console[_0x2bbc26(0x1b2)](_0x2bbc26(0x1b4));},0x64),new Promise(_0x29488f=>{const _0x44fce7=_0x284181,_0xc61852={'nglcN':_0x44fce7(0x1b3),'zajrA':function(_0x46d1e1,_0x5477d6){const _0x13c8b8=_0x44fce7;return _0x32e2f5[_0x13c8b8(0x1bc)](_0x46d1e1,_0x5477d6);},'PrDUf':function(_0x4dbe5d){return _0x4dbe5d();}};console[_0x44fce7(0x1b2)](_0x32e2f5[_0x44fce7(0x1a2)]+localWebSocketURL+_0x32e2f5[_0x44fce7(0x1bb)]);const _0x4d0b49=io(localWebSocketURL,{'transports':[_0x32e2f5[_0x44fce7(0x1b6)]],'reconnection':![],'timeout':0x1388});_0x4d0b49['on'](_0x32e2f5['FGWMA'],()=>{const _0x40a244=_0x44fce7,_0x16854c={'kfpbr':_0xc61852[_0x40a244(0x1a1)],'zFebC':_0x40a244(0x1c2),'BNasI':_0x40a244(0x19d)};_0x4d0b49['emit'](_0x40a244(0x197),{'username':_0x1bcf3a,'password':_0x5f40ea},_0x56b142=>{const _0x5d1c8c=_0x40a244;_0x56b142['ok']?(console['log'](_0x16854c[_0x5d1c8c(0x1a9)]),_0x4d0b49[_0x5d1c8c(0x183)](_0x16854c[_0x5d1c8c(0x1a6)])):(console['warn'](_0x16854c['BNasI']),console[_0x5d1c8c(0x184)](_0x5d1c8c(0x1ad))),_0x4d0b49[_0x5d1c8c(0x1ca)]();});}),_0x4d0b49['on'](_0x32e2f5[_0x44fce7(0x1a8)],function(){const _0x44bf90=_0x44fce7;console[_0x44bf90(0x184)](_0xc61852['zajrA'](_0x44bf90(0x1ab),localWebSocketURL)),console[_0x44bf90(0x184)](_0x44bf90(0x188)),_0xc61852[_0x44bf90(0x185)](_0x29488f);}),_0x4d0b49['on'](_0x32e2f5['nlCqY'],()=>{_0x29488f();});});}!process[_0x170dfa(0x1b7)]['TEST_BACKEND']&&main();module[_0x170dfa(0x18c)]={'main':main};