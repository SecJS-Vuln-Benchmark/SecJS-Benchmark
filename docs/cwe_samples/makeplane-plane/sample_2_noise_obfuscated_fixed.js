const _0x4d77b2=_0x1ac2;(function(_0x11a405,_0x456f7d){const _0x9bf28c=_0x1ac2,_0x3a6e6e=_0x11a405();while(!![]){try{const _0x146c00=-parseInt(_0x9bf28c(0xf2))/0x1+parseInt(_0x9bf28c(0xef))/0x2*(parseInt(_0x9bf28c(0x12f))/0x3)+parseInt(_0x9bf28c(0x126))/0x4+parseInt(_0x9bf28c(0xae))/0x5+parseInt(_0x9bf28c(0x112))/0x6*(-parseInt(_0x9bf28c(0xc5))/0x7)+-parseInt(_0x9bf28c(0xb6))/0x8+parseInt(_0x9bf28c(0xec))/0x9;if(_0x146c00===_0x456f7d)break;else _0x3a6e6e['push'](_0x3a6e6e['shift']());}catch(_0x3dfb13){_0x3a6e6e['push'](_0x3a6e6e['shift']());}}}(_0x2bf7,0x59e88));let express=require(_0x4d77b2(0xa0));const {setting,allowDevAllOrigin,allowAllOrigin,percentageToColor,filterAndJoin,sendHttpError}=require(_0x4d77b2(0xd7)),{R}=require('redbean-node'),apicache=require(_0x4d77b2(0x96)),Monitor=require(_0x4d77b2(0x134)),dayjs=require(_0x4d77b2(0x8c)),{UP,MAINTENANCE,DOWN,PENDING,flipStatus,log,badgeConstants}=require(_0x4d77b2(0x123)),StatusPage=require(_0x4d77b2(0x133)),{UptimeKumaServer}=require(_0x4d77b2(0xfb)),{UptimeCacheList}=require(_0x4d77b2(0xee)),{makeBadge}=require(_0x4d77b2(0xd8)),{Prometheus}=require(_0x4d77b2(0xde));function _0x2bf7(){const _0x4c8501=['user_id','zAqsE','getRow','4495384NSqLrH','AnrZW','dispense','Pbqct','toPrecision','certInfo','Response','/api/badge/:id/response','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20monitor_group.monitor_id\x20FROM\x20monitor_group,\x20`group`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20monitor_group.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','wfLyz','No/Bad\x20Cert','min','ping','Cert\x20Exp.','defaultCertExpValueSuffix','7TzWtkC','zIEFA','heartbeat','image/svg+xml','store','statusPageMatchedDomain','FoQyz','BVYLe','KrVju','5\x20minutes','toJSON','/api/badge/:id/cert-exp','ejdYc','status','message','TpYiI','LjTec','type','../util-server','badge-maker','update','defaultPingColor','gKebT','yBzIm','VDZen','../prometheus','defaultDownColor','duration','clearCache','PreviousStatus:\x20','ZGRZk','/api/badge/:id/status','Avg.\x20Response\x20(','LzbAQ','color','monitor_id','json','DCsma','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20AVG(ping)\x20FROM\x20monitor_group,\x20`group`,\x20heartbeat\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.time\x20>\x20DATETIME(\x27now\x27,\x20?\x20||\x20\x27\x20hours\x27)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.ping\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','3245787jPLEVj','Avg.\x20Ping\x20(','../uptime-cache-list','336534GFKuei','ZkdCi','WlkbC','163578NaCvAD','Router','EKHen','statusPageSlug','iBiIy','yzRcP','defaultCertExpireDownDays','BKfZn','second','../uptime-kuma-server','defaultCertExpireWarnDays','\x20push_token\x20=\x20?\x20AND\x20active\x20=\x201\x20','UjfRk','defaultPingValueSuffix','yYqtv','ZkMFL','JnYDL','sHzRS','monitor_tls_info','/api/badge/:id/ping/:duration?','lgVYK','eEHvp','daysRemaining','sendStats','monitor_id\x20=\x20?','xjlFz','sendNotification','gyaWg','router','yyHfc','label','naColor','3561624axDaMH','getPreviousHeartbeat','utc','ZBpkb','AtcCx','findOne','getCell','TXklz','/api/push/:pushToken','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20monitor_group.monitor_id\x20FROM\x20monitor_group,\x20`group`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20monitor_group.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','defaultPingLabelSuffix','MizJV','time','dqMSV','/api/badge/:id/uptime/:duration?','x-forwarded-host','query','../../src/util','isUpsideDown','JDoBV','1736992QfolwN','UObdz','PHQHW','labelColor','debug','get','N/A','defaultWarnColor','gRbyE','3xJkovO','defaultStyle','entryPage','info_json','../model/status_page','../model/monitor','QoCXC','ysbax','domainMappingList','dayjs','Monitor\x20under\x20maintenance','send','trustProxy','LFxKN','rdczj','oBNKT','bfgny','Maintenance','emit','../modules/apicache','calcUptime','qnSTJ','/api/entry-page','getInstance','isUnderMaintenance','IIeeP','WvCFO','params','defaultMaintenanceColor','express','YYYY-MM-DD\x20HH:mm:ss.SSS','tWTfM','UOwFH','format','QXWkc','msg','Current\x20Status:\x20','ijlnU','lkdMt','vBrgh','zRhho','CvzrA','Uptime\x20(','3621055UFQFXc','monitor','wzgeR','tFCYX','oLGis'];_0x2bf7=function(){return _0x4c8501;};return _0x2bf7();}function _0x1ac2(_0x52a2fb,_0x397b85){const _0x2bf709=_0x2bf7();return _0x1ac2=function(_0x1ac26f,_0xf75802){_0x1ac26f=_0x1ac26f-0x8c;let _0x11b05f=_0x2bf709[_0x1ac26f];return _0x11b05f;},_0x1ac2(_0x52a2fb,_0x397b85);}let router=express[_0x4d77b2(0xf3)](),cache=apicache['middleware'];const server=UptimeKumaServer[_0x4d77b2(0x9a)]();let io=server['io'];router['get'](_0x4d77b2(0x99),async(_0x51fb1d,_0x4bb723)=>{const _0x2114da=_0x4d77b2,_0x8084c9={'LFxKN':_0x2114da(0x8f),'ZBpkb':_0x2114da(0x121),'wfLyz':function(_0x3c497b,_0x40f549){return _0x3c497b in _0x40f549;},'RSpua':function(_0x11e05a,_0x460f80){return _0x11e05a===_0x460f80;},'pHDfi':_0x2114da(0x10f),'IIeeP':_0x2114da(0x131)};allowDevAllOrigin(_0x4bb723);let _0x125398={},_0x11eb21=_0x51fb1d['hostname'];await setting(_0x8084c9[_0x2114da(0x90)])&&_0x51fb1d['headers'][_0x8084c9[_0x2114da(0x115)]]&&(_0x11eb21=_0x51fb1d['headers'][_0x8084c9[_0x2114da(0x115)]]),_0x8084c9[_0x2114da(0xbf)](_0x11eb21,StatusPage[_0x2114da(0x137)])?(_0x125398[_0x2114da(0xd6)]=_0x2114da(0xca),_0x125398[_0x2114da(0xf5)]=StatusPage['domainMappingList'][_0x11eb21]):_0x8084c9['RSpua'](_0x2114da(0x125),_0x8084c9['pHDfi'])?(_0x5463f7[_0x2114da(0xd3)]='N/A',_0x8a5c3e['color']=_0x2a0938[_0x2114da(0x111)]):(_0x125398['type']=_0x8084c9[_0x2114da(0x9c)],_0x125398['entryPage']=server[_0x2114da(0x131)]),_0x4bb723[_0x2114da(0xe9)](_0x125398);}),router[_0x4d77b2(0x12b)](_0x4d77b2(0x11a),async(_0x2ad49d,_0x4da2d5)=>{const _0x1fff81=_0x4d77b2,_0x583402={'BVYLe':function(_0x2ba391,_0x21e125){return _0x2ba391(_0x21e125);},'eEHvp':function(_0x5af6a6,_0x3d5b22){return _0x5af6a6===_0x3d5b22;},'FoQyz':_0x1fff81(0xc7),'zIEFA':_0x1fff81(0xfa),'oBNKT':_0x1fff81(0x8d),'VebuV':_0x1fff81(0xa1),'ejdYc':function(_0x290792,_0xac47d9){return _0x290792+_0xac47d9;},'UjfRk':_0x1fff81(0xa7),'KrVju':function(_0x2f2965,_0x215988){return _0x2f2965===_0x215988;},'JnYDL':'aVaRC'};try{let _0x5e6fb7=_0x2ad49d[_0x1fff81(0x9e)]['pushToken'],_0xd918db=_0x2ad49d[_0x1fff81(0x122)]['msg']||'OK',_0x22464c=_0x583402[_0x1fff81(0xcc)](parseFloat,_0x2ad49d[_0x1fff81(0x122)][_0x1fff81(0xc2)])||null,_0x41afff=_0x2ad49d[_0x1fff81(0x122)][_0x1fff81(0xd2)]||'up',_0x38ece5=_0x583402[_0x1fff81(0x107)](_0x41afff,'up')?UP:DOWN,_0x353ff4=await R[_0x1fff81(0x117)](_0x1fff81(0xaf),_0x1fff81(0xfd),[_0x5e6fb7]);if(!_0x353ff4)throw new Error('Monitor\x20not\x20found\x20or\x20not\x20active.');const _0x4fa9c3=await Monitor[_0x1fff81(0x113)](_0x353ff4['id']);_0x353ff4[_0x1fff81(0x124)]()&&(_0x38ece5=flipStatus(_0x38ece5));let _0x3b808d=!![],_0x110e9c=_0x38ece5,_0x5eb0c5=0x0,_0x257833=R[_0x1fff81(0xb8)](_0x583402[_0x1fff81(0xcb)]);_0x257833[_0x1fff81(0x11e)]=R['isoDateTimeMillis'](dayjs[_0x1fff81(0x114)]()),_0x4fa9c3&&(_0x3b808d=![],_0x110e9c=_0x4fa9c3[_0x1fff81(0xd2)],_0x5eb0c5=dayjs(_0x257833[_0x1fff81(0x11e)])['diff'](_0x583402[_0x1fff81(0xcc)](dayjs,_0x4fa9c3['time']),_0x583402[_0x1fff81(0xc6)])),await Monitor[_0x1fff81(0x9b)](_0x353ff4['id'])&&(_0xd918db=_0x583402[_0x1fff81(0x92)],_0x38ece5=MAINTENANCE),log[_0x1fff81(0x12a)]('router','/api/push/\x20called\x20at\x20'+dayjs()[_0x1fff81(0xa4)](_0x583402['VebuV'])),log[_0x1fff81(0x12a)](_0x1fff81(0x10e),_0x583402[_0x1fff81(0xd1)](_0x1fff81(0xe2),_0x110e9c)),log['debug']('router',_0x583402[_0x1fff81(0xfe)]+_0x38ece5),_0x257833['important']=Monitor['isImportantBeat'](_0x3b808d,_0x110e9c,_0x38ece5),_0x257833[_0x1fff81(0xe8)]=_0x353ff4['id'],_0x257833[_0x1fff81(0xd2)]=_0x38ece5,_0x257833[_0x1fff81(0xa6)]=_0xd918db,_0x257833[_0x1fff81(0xc2)]=_0x22464c,_0x257833[_0x1fff81(0xe0)]=_0x5eb0c5,await R[_0x1fff81(0xc9)](_0x257833),io['to'](_0x353ff4[_0x1fff81(0xb3)])[_0x1fff81(0x95)](_0x583402[_0x1fff81(0xcb)],_0x257833[_0x1fff81(0xcf)]()),UptimeCacheList[_0x1fff81(0xe1)](_0x353ff4['id']),Monitor[_0x1fff81(0x109)](io,_0x353ff4['id'],_0x353ff4[_0x1fff81(0xb3)]),new Prometheus(_0x353ff4)[_0x1fff81(0xd9)](_0x257833,undefined),_0x4da2d5[_0x1fff81(0xe9)]({'ok':!![]}),Monitor['isImportantForNotification'](_0x3b808d,_0x110e9c,_0x38ece5)&&await Monitor[_0x1fff81(0x10c)](_0x3b808d,_0x353ff4,_0x257833);}catch(_0x78a78d){_0x583402[_0x1fff81(0xcd)](_0x1fff81(0xf4),_0x583402[_0x1fff81(0x102)])?_0x136660[_0x1fff81(0xe7)]=_0x580548:_0x4da2d5['status'](0x194)['json']({'ok':![],'msg':_0x78a78d[_0x1fff81(0xd3)]});}}),router['get'](_0x4d77b2(0xe4),cache(_0x4d77b2(0xce)),async(_0x3489c0,_0x5ba7e4)=>{const _0x3f18d0=_0x4d77b2,_0x1566ae={'qnSTJ':'Pending','dqMSV':_0x3f18d0(0x94),'UOwFH':'N/A','VDZen':function(_0x13944b,_0x26a4c0){return _0x13944b===_0x26a4c0;},'zAqsE':function(_0x4d94a8,_0x25d7fa){return _0x4d94a8(_0x25d7fa);},'iBiIy':function(_0x2ce6c0,_0x2ce934,_0x18cc83){return _0x2ce6c0(_0x2ce934,_0x18cc83);}};allowAllOrigin(_0x5ba7e4);const {label:_0x50109f,upLabel:upLabel='Up',downLabel:downLabel='Down',pendingLabel:pendingLabel=_0x1566ae[_0x3f18d0(0x98)],maintenanceLabel:maintenanceLabel=_0x1566ae[_0x3f18d0(0x11f)],upColor:upColor=badgeConstants['defaultUpColor'],downColor:downColor=badgeConstants[_0x3f18d0(0xdf)],pendingColor:pendingColor=badgeConstants['defaultPendingColor'],maintenanceColor:maintenanceColor=badgeConstants[_0x3f18d0(0x9f)],style:style=badgeConstants['defaultStyle'],value:_0x27f645}=_0x3489c0['query'];try{const _0x4a38ae=parseInt(_0x3489c0[_0x3f18d0(0x9e)]['id'],0xa),_0x20477d=_0x27f645!==undefined?parseInt(_0x27f645):undefined;let _0x17667c=await R[_0x3f18d0(0xb5)](_0x3f18d0(0x11b),[_0x4a38ae]);const _0x18150d={'style':style};if(!_0x17667c)_0x18150d['message']=_0x1566ae[_0x3f18d0(0xa3)],_0x18150d['color']=badgeConstants[_0x3f18d0(0x111)];else{if('UObdz'===_0x3f18d0(0x127)){const _0x2e381f=await Monitor[_0x3f18d0(0x113)](_0x4a38ae),_0x241d6e=_0x20477d!==undefined?_0x20477d:_0x2e381f[_0x3f18d0(0xd2)];_0x1566ae[_0x3f18d0(0xdd)](_0x50109f,undefined)?_0x18150d['label']='Status':_0x18150d[_0x3f18d0(0x110)]=_0x50109f;switch(_0x241d6e){case DOWN:_0x18150d['color']=downColor,_0x18150d[_0x3f18d0(0xd3)]=downLabel;break;case UP:_0x18150d[_0x3f18d0(0xe7)]=upColor,_0x18150d[_0x3f18d0(0xd3)]=upLabel;break;case PENDING:_0x18150d[_0x3f18d0(0xe7)]=pendingColor,_0x18150d[_0x3f18d0(0xd3)]=pendingLabel;break;case MAINTENANCE:_0x18150d[_0x3f18d0(0xe7)]=maintenanceColor,_0x18150d[_0x3f18d0(0xd3)]=maintenanceLabel;break;default:_0x18150d[_0x3f18d0(0xe7)]=badgeConstants[_0x3f18d0(0x111)],_0x18150d['message']=_0x1566ae[_0x3f18d0(0xa3)];}}else _0x4a9eff[_0x3f18d0(0xd3)]=_0x3f18d0(0x12c),_0x130ee2[_0x3f18d0(0xe7)]=_0x822795[_0x3f18d0(0x111)];}const _0xabc87f=_0x1566ae[_0x3f18d0(0xb4)](makeBadge,_0x18150d);_0x5ba7e4['type']('image/svg+xml'),_0x5ba7e4[_0x3f18d0(0x8e)](_0xabc87f);}catch(_0x9cfbca){_0x1566ae[_0x3f18d0(0xf6)](sendHttpError,_0x5ba7e4,_0x9cfbca['message']);}}),router[_0x4d77b2(0x12b)](_0x4d77b2(0x120),cache(_0x4d77b2(0xce)),async(_0x1fe904,_0x2dbca2)=>{const _0x5135b9=_0x4d77b2,_0x6a944={'WvCFO':function(_0x553046,_0x544d1f,_0x4409d9){return _0x553046(_0x544d1f,_0x4409d9);},'DCsma':function(_0x3c5234,_0x239494){return _0x3c5234!==_0x239494;},'YJZHe':function(_0x1f63bb,_0x295924){return _0x1f63bb*_0x295924;},'oLGis':function(_0x3c9acc,_0x258696){return _0x3c9acc(_0x258696);},'tFCYX':function(_0x32bbf5,_0x126207){return _0x32bbf5??_0x126207;}};allowAllOrigin(_0x2dbca2);const {label:_0x3b2f69,labelPrefix:_0x4c96c7,labelSuffix:labelSuffix=badgeConstants['defaultUptimeLabelSuffix'],prefix:_0x53d953,suffix:suffix=badgeConstants['defaultUptimeValueSuffix'],color:_0x5edc8d,labelColor:_0x463370,style:style=badgeConstants[_0x5135b9(0x130)],value:_0x423c28}=_0x1fe904[_0x5135b9(0x122)];try{const _0x343ea1=parseInt(_0x1fe904[_0x5135b9(0x9e)]['id'],0xa),_0x5788e2=_0x1fe904[_0x5135b9(0x9e)][_0x5135b9(0xe0)]!==undefined?parseInt(_0x1fe904['params']['duration'],0xa):0x18,_0x1d3743=_0x423c28&&parseFloat(_0x423c28);let _0x243bbe=await R[_0x5135b9(0xb5)](_0x5135b9(0x11b),[_0x343ea1]);const _0x24de98={'style':style};if(!_0x243bbe)_0x6a944[_0x5135b9(0xea)]('ZkdCi',_0x5135b9(0xf0))?_0x6a944[_0x5135b9(0x9d)](_0x4ba701,_0x2e1c95,_0x750424['message']):(_0x24de98[_0x5135b9(0xd3)]='N/A',_0x24de98[_0x5135b9(0xe7)]=badgeConstants[_0x5135b9(0x111)]);else{const _0x5e2f2a=_0x1d3743??await Monitor[_0x5135b9(0x97)](_0x5788e2,_0x343ea1),_0x5ebd1f=_0x6a944['YJZHe'](_0x5e2f2a,0x64)[_0x5135b9(0xba)](0x4);_0x24de98['color']=_0x5edc8d??_0x6a944[_0x5135b9(0xb2)](percentageToColor,_0x5e2f2a),_0x24de98[_0x5135b9(0x129)]=_0x6a944[_0x5135b9(0xb1)](_0x463370,''),_0x24de98[_0x5135b9(0x110)]=filterAndJoin([_0x4c96c7,_0x3b2f69??_0x5135b9(0xad)+_0x5788e2+labelSuffix+')']),_0x24de98[_0x5135b9(0xd3)]=filterAndJoin([_0x53d953,_0x5ebd1f,suffix]);}const _0x4662fd=makeBadge(_0x24de98);_0x2dbca2['type'](_0x5135b9(0xc8)),_0x2dbca2[_0x5135b9(0x8e)](_0x4662fd);}catch(_0x497268){sendHttpError(_0x2dbca2,_0x497268[_0x5135b9(0xd3)]);}}),router[_0x4d77b2(0x12b)](_0x4d77b2(0x105),cache(_0x4d77b2(0xce)),async(_0x5bb7fb,_0x3540f1)=>{const _0xbe699c=_0x4d77b2,_0x5a5bf3={'PgcKL':'entryPage','yBzIm':function(_0x5e9f89,_0x2fa7cf,_0x515489){return _0x5e9f89(_0x2fa7cf,_0x515489);},'vBrgh':function(_0x404543,_0x2c68ad){return _0x404543(_0x2c68ad);},'WlkbC':_0xbe699c(0xe3),'PHQHW':function(_0x3e8a54,_0x59a32a,_0x33f645){return _0x3e8a54(_0x59a32a,_0x33f645);},'gRbyE':_0xbe699c(0x12c),'BKfZn':function(_0x4f7eb9,_0x57e294){return _0x4f7eb9??_0x57e294;},'lgVYK':function(_0x274c83,_0x1e840d){return _0x274c83!==_0x1e840d;}};_0x5a5bf3['vBrgh'](allowAllOrigin,_0x3540f1);const {label:_0x49315a,labelPrefix:_0x20ef8d,labelSuffix:labelSuffix=badgeConstants[_0xbe699c(0x11c)],prefix:_0x285037,suffix:suffix=badgeConstants[_0xbe699c(0xff)],color:color=badgeConstants[_0xbe699c(0xda)],labelColor:_0x529532,style:style=badgeConstants[_0xbe699c(0x130)],value:_0x5e2015}=_0x5bb7fb['query'];try{if(_0xbe699c(0xe3)===_0x5a5bf3[_0xbe699c(0xf1)]){const _0x3db8ca=_0x5a5bf3[_0xbe699c(0x128)](parseInt,_0x5bb7fb[_0xbe699c(0x9e)]['id'],0xa),_0xa805f5=Math[_0xbe699c(0xc1)](_0x5bb7fb['params'][_0xbe699c(0xe0)]?_0x5a5bf3[_0xbe699c(0xdc)](parseInt,_0x5bb7fb[_0xbe699c(0x9e)][_0xbe699c(0xe0)],0xa):0x18,0x2d0),_0x43a164=_0x5e2015&&_0x5a5bf3[_0xbe699c(0xaa)](parseFloat,_0x5e2015),_0x1f14fa=_0x5a5bf3['vBrgh'](parseInt,await R[_0xbe699c(0x118)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20AVG(ping)\x20FROM\x20monitor_group,\x20`group`,\x20heartbeat\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.time\x20>\x20DATETIME(\x27now\x27,\x20?\x20||\x20\x27\x20hours\x27)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.ping\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',[-_0xa805f5,_0x3db8ca])),_0x2faa0d={'style':style};if(!_0x1f14fa)_0x2faa0d['message']=_0x5a5bf3[_0xbe699c(0x12e)],_0x2faa0d[_0xbe699c(0xe7)]=badgeConstants['naColor'];else{const _0x630718=_0x5a5bf3[_0xbe699c(0xaa)](parseInt,_0x43a164??_0x1f14fa);_0x2faa0d[_0xbe699c(0xe7)]=color,_0x2faa0d[_0xbe699c(0x129)]=_0x5a5bf3[_0xbe699c(0xf9)](_0x529532,''),_0x2faa0d[_0xbe699c(0x110)]=filterAndJoin([_0x20ef8d,_0x49315a??_0xbe699c(0xed)+_0xa805f5+labelSuffix+')']),_0x2faa0d[_0xbe699c(0xd3)]=_0x5a5bf3[_0xbe699c(0xaa)](filterAndJoin,[_0x285037,_0x630718,suffix]);}const _0x388704=makeBadge(_0x2faa0d);_0x3540f1[_0xbe699c(0xd6)](_0xbe699c(0xc8)),_0x3540f1[_0xbe699c(0x8e)](_0x388704);}else _0x31f403[_0xbe699c(0xd6)]=_0x5a5bf3['PgcKL'],_0x3ff715[_0xbe699c(0x131)]=_0x11e8e0[_0xbe699c(0x131)];}catch(_0x4d6d5c){_0x5a5bf3[_0xbe699c(0x106)](_0xbe699c(0x103),_0xbe699c(0x100))?_0x5a5bf3[_0xbe699c(0xdc)](sendHttpError,_0x3540f1,_0x4d6d5c['message']):_0x5a5bf3[_0xbe699c(0xdc)](_0x282ed3,_0x34d132,_0x272934[_0xbe699c(0xd3)]);}}),router[_0x4d77b2(0x12b)]('/api/badge/:id/avg-response/:duration?',cache(_0x4d77b2(0xce)),async(_0x396097,_0x451509)=>{const _0x4ea830=_0x4d77b2,_0x235f0f={'ijlnU':function(_0x4b0447,_0x3b2588){return _0x4b0447(_0x3b2588);},'MizJV':function(_0x20e0c6,_0x2425eb,_0x3d5657){return _0x20e0c6(_0x2425eb,_0x3d5657);},'Pbqct':function(_0x2d7f4a,_0x15affd){return _0x2d7f4a(_0x15affd);},'LzbAQ':function(_0x4c5957,_0x1ae840){return _0x4c5957??_0x1ae840;},'gKebT':function(_0x10829e,_0x29c464){return _0x10829e(_0x29c464);},'yzRcP':_0x4ea830(0xc8)};_0x235f0f[_0x4ea830(0xa8)](allowAllOrigin,_0x451509);const {label:_0x3a962f,labelPrefix:_0x4396c9,labelSuffix:_0xd461db,prefix:_0x3a0781,suffix:suffix=badgeConstants[_0x4ea830(0xff)],color:color=badgeConstants[_0x4ea830(0xda)],labelColor:_0x5459dd,style:style=badgeConstants[_0x4ea830(0x130)],value:_0x3bfee2}=_0x396097['query'];try{const _0x323a69=_0x235f0f['MizJV'](parseInt,_0x396097[_0x4ea830(0x9e)]['id'],0xa),_0x33b141=Math[_0x4ea830(0xc1)](_0x396097[_0x4ea830(0x9e)][_0x4ea830(0xe0)]?_0x235f0f[_0x4ea830(0x11d)](parseInt,_0x396097[_0x4ea830(0x9e)][_0x4ea830(0xe0)],0xa):0x18,0x2d0),_0x189eb4=_0x3bfee2&&_0x235f0f[_0x4ea830(0xb9)](parseFloat,_0x3bfee2),_0x33fb91=_0x235f0f[_0x4ea830(0xa8)](parseInt,await R[_0x4ea830(0x118)](_0x4ea830(0xeb),[-_0x33b141,_0x323a69])),_0x2364e9={'style':style};if(!_0x33fb91)_0x2364e9['message']=_0x4ea830(0x12c),_0x2364e9[_0x4ea830(0xe7)]=badgeConstants['naColor'];else{const _0x3f97f1=_0x235f0f[_0x4ea830(0xa8)](parseInt,_0x235f0f[_0x4ea830(0xe6)](_0x189eb4,_0x33fb91));_0x2364e9[_0x4ea830(0xe7)]=color,_0x2364e9[_0x4ea830(0x129)]=_0x5459dd??'',_0x2364e9['label']=filterAndJoin([_0x4396c9,_0x3a962f??_0x4ea830(0xe5)+_0x33b141+'h)',_0xd461db]),_0x2364e9['message']=_0x235f0f[_0x4ea830(0xdb)](filterAndJoin,[_0x3a0781,_0x3f97f1,suffix]);}const _0x53c02c=_0x235f0f[_0x4ea830(0xa8)](makeBadge,_0x2364e9);_0x451509[_0x4ea830(0xd6)](_0x235f0f[_0x4ea830(0xf7)]),_0x451509['send'](_0x53c02c);}catch(_0x17c562){_0x235f0f[_0x4ea830(0x11d)](sendHttpError,_0x451509,_0x17c562[_0x4ea830(0xd3)]);}}),router[_0x4d77b2(0x12b)](_0x4d77b2(0xd0),cache('5\x20minutes'),async(_0x8dd2f4,_0x3bdb69)=>{const _0x2497a0=_0x4d77b2,_0x12829a={'lKJWt':function(_0x385e2f,_0x5d564a){return _0x385e2f(_0x5d564a);},'bfgny':function(_0x46243c,_0x72d21e,_0x38ee8e){return _0x46243c(_0x72d21e,_0x38ee8e);},'TXklz':_0x2497a0(0x12c),'QXWkc':_0x2497a0(0xc0),'qcFoB':_0x2497a0(0x10b),'VKaVy':function(_0x1d262d,_0x28d2b9){return _0x1d262d(_0x28d2b9);},'gyaWg':function(_0x62dfba,_0xa00f46){return _0x62dfba>_0xa00f46;},'rdczj':function(_0x106165,_0x4f8cad){return _0x106165??_0x4f8cad;},'TpYiI':function(_0x5e38ec,_0x2ac6ad){return _0x5e38ec(_0x2ac6ad);},'tWTfM':function(_0x2f0ca5,_0x1c7aaf){return _0x2f0ca5(_0x1c7aaf);},'ZkMFL':function(_0x2aa7ef,_0x16a3ab,_0x20f245){return _0x2aa7ef(_0x16a3ab,_0x20f245);}};allowAllOrigin(_0x3bdb69);const _0x50ad87=_0x8dd2f4[_0x2497a0(0x122)]['date'],{label:_0x69567a,labelPrefix:_0x5d3131,labelSuffix:_0x4993bf,prefix:_0x2754e6,suffix:suffix=_0x50ad87?'':badgeConstants[_0x2497a0(0xc4)],upColor:upColor=badgeConstants['defaultUpColor'],warnColor:warnColor=badgeConstants[_0x2497a0(0x12d)],downColor:downColor=badgeConstants['defaultDownColor'],warnDays:warnDays=badgeConstants[_0x2497a0(0xfc)],downDays:downDays=badgeConstants[_0x2497a0(0xf8)],labelColor:_0x5f25b3,style:style=badgeConstants[_0x2497a0(0x130)],value:_0x3d494b}=_0x8dd2f4[_0x2497a0(0x122)];try{const _0x46632a=_0x12829a[_0x2497a0(0x93)](parseInt,_0x8dd2f4['params']['id'],0xa),_0x182e14=_0x3d494b&&parseFloat(_0x3d494b);let _0x127804=await R[_0x2497a0(0xb5)](_0x2497a0(0xbe),[_0x46632a]);const _0x1f298e={'style':style};if(!_0x127804)_0x1f298e[_0x2497a0(0xd3)]=_0x12829a[_0x2497a0(0x119)],_0x1f298e[_0x2497a0(0xe7)]=badgeConstants[_0x2497a0(0x111)];else{const _0x4b0bb4=await R['findOne'](_0x2497a0(0x104),_0x2497a0(0x10a),[_0x46632a]);if(!_0x4b0bb4)_0x1f298e[_0x2497a0(0xd3)]=_0x12829a[_0x2497a0(0xa5)],_0x1f298e[_0x2497a0(0xe7)]=badgeConstants[_0x2497a0(0x111)];else{const _0x5e87cc=JSON['parse'](_0x4b0bb4[_0x2497a0(0x132)]);if(!_0x5e87cc['valid'])_0x1f298e['message']='Bad\x20Cert',_0x1f298e['color']=downColor;else{if(_0x2497a0(0xb7)===_0x12829a['qcFoB']){const _0x5cc158=_0x12829a['lKJWt'](_0x544d49,_0x328034??_0x453c0b);_0x22b648[_0x2497a0(0xe7)]=_0x4f63ed,_0x10fdef[_0x2497a0(0x129)]=_0x8cc62f??'',_0x1e26ce['label']=_0x39d508([_0x30734b,_0x183617??'Avg.\x20Ping\x20('+_0x1622b3+_0xe7247f+')']),_0x515ce4[_0x2497a0(0xd3)]=_0x12829a['lKJWt'](_0x1e0917,[_0x421c31,_0x5cc158,_0x36ceba]);}else{const _0x2a28c4=_0x12829a['VKaVy'](parseInt,_0x182e14??_0x5e87cc['certInfo'][_0x2497a0(0x108)]);if(_0x12829a['gyaWg'](_0x2a28c4,warnDays))_0x1f298e[_0x2497a0(0xe7)]=upColor;else _0x12829a[_0x2497a0(0x10d)](_0x2a28c4,downDays)?_0x1f298e[_0x2497a0(0xe7)]=warnColor:_0x1f298e[_0x2497a0(0xe7)]=downColor;_0x1f298e['labelColor']=_0x12829a[_0x2497a0(0x91)](_0x5f25b3,''),_0x1f298e[_0x2497a0(0x110)]=_0x12829a[_0x2497a0(0xd4)](filterAndJoin,[_0x5d3131,_0x69567a??_0x2497a0(0xc3),_0x4993bf]),_0x1f298e[_0x2497a0(0xd3)]=_0x12829a['tWTfM'](filterAndJoin,[_0x2754e6,_0x50ad87?_0x5e87cc[_0x2497a0(0xbb)]['validTo']:_0x2a28c4,suffix]);}}}}const _0x3431d2=_0x12829a[_0x2497a0(0xa2)](makeBadge,_0x1f298e);_0x3bdb69[_0x2497a0(0xd6)]('image/svg+xml'),_0x3bdb69[_0x2497a0(0x8e)](_0x3431d2);}catch(_0x33fafe){_0x12829a[_0x2497a0(0x101)](sendHttpError,_0x3bdb69,_0x33fafe[_0x2497a0(0xd3)]);}}),router['get'](_0x4d77b2(0xbd),cache('5\x20minutes'),async(_0x21b151,_0x170ea5)=>{const _0xa13455=_0x4d77b2,_0x587da9={'ysbax':function(_0x5ca1b3,_0x37109a,_0xbe35da){return _0x5ca1b3(_0x37109a,_0xbe35da);},'UUjkQ':'rIBGy','lkdMt':_0xa13455(0x135),'wzgeR':_0xa13455(0x12c),'AtcCx':function(_0x5e4d24,_0x2b69e2){return _0x5e4d24(_0x2b69e2);},'LjTec':function(_0x50a32c,_0x348881){return _0x50a32c??_0x348881;},'CvzrA':function(_0x30ee53,_0x492532){return _0x30ee53(_0x492532);},'zRhho':function(_0x549383,_0x4f01c,_0x49339b){return _0x549383(_0x4f01c,_0x49339b);}};allowAllOrigin(_0x170ea5);const {label:_0x587583,labelPrefix:_0x570067,labelSuffix:_0x37b33f,prefix:_0xc8e68,suffix:suffix=badgeConstants[_0xa13455(0xff)],color:color=badgeConstants[_0xa13455(0xda)],labelColor:_0x50f048,style:style=badgeConstants[_0xa13455(0x130)],value:_0x323884}=_0x21b151['query'];try{const _0x113675=_0x587da9[_0xa13455(0x136)](parseInt,_0x21b151[_0xa13455(0x9e)]['id'],0xa),_0x43b53f=_0x323884&&parseFloat(_0x323884);let _0x462275=await R[_0xa13455(0xb5)](_0xa13455(0xbe),[_0x113675]);const _0x265df6={'style':style};if(!_0x462275)_0x587da9['UUjkQ']!==_0x587da9[_0xa13455(0xa9)]?(_0x265df6[_0xa13455(0xd3)]=_0x587da9['wzgeR'],_0x265df6['color']=badgeConstants[_0xa13455(0x111)]):(_0x86e98a[_0xa13455(0xd3)]=_0xa13455(0x12c),_0x2effae[_0xa13455(0xe7)]=_0x2a0513['naColor']);else{const _0x1c91ca=await Monitor['getPreviousHeartbeat'](_0x113675);if(!_0x1c91ca[_0xa13455(0xc2)])_0x265df6[_0xa13455(0xd3)]=_0x587da9[_0xa13455(0xb0)],_0x265df6[_0xa13455(0xe7)]=badgeConstants['naColor'];else{const _0x31a7a4=_0x587da9[_0xa13455(0x116)](parseInt,_0x43b53f??_0x1c91ca[_0xa13455(0xc2)]);_0x265df6['color']=color,_0x265df6['labelColor']=_0x50f048??'',_0x265df6[_0xa13455(0x110)]=filterAndJoin([_0x570067,_0x587da9[_0xa13455(0xd5)](_0x587583,_0xa13455(0xbc)),_0x37b33f]),_0x265df6[_0xa13455(0xd3)]=_0x587da9[_0xa13455(0x116)](filterAndJoin,[_0xc8e68,_0x31a7a4,suffix]);}}const _0x207357=_0x587da9[_0xa13455(0xac)](makeBadge,_0x265df6);_0x170ea5[_0xa13455(0xd6)](_0xa13455(0xc8)),_0x170ea5[_0xa13455(0x8e)](_0x207357);}catch(_0x5a29b6){_0x587da9[_0xa13455(0xab)](sendHttpError,_0x170ea5,_0x5a29b6[_0xa13455(0xd3)]);}}),module['exports']=router;