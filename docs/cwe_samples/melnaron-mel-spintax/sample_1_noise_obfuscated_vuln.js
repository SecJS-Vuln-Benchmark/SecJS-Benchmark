const _0x563326=_0x379b;(function(_0x189279,_0x3a619e){const _0x230681=_0x379b,_0x232659=_0x189279();while(!![]){try{const _0x238643=-parseInt(_0x230681(0x92))/0x1*(parseInt(_0x230681(0x94))/0x2)+parseInt(_0x230681(0x7f))/0x3*(parseInt(_0x230681(0x8e))/0x4)+parseInt(_0x230681(0x77))/0x5*(-parseInt(_0x230681(0x96))/0x6)+-parseInt(_0x230681(0x8d))/0x7*(parseInt(_0x230681(0x80))/0x8)+parseInt(_0x230681(0x99))/0x9*(-parseInt(_0x230681(0x91))/0xa)+parseInt(_0x230681(0x8b))/0xb*(-parseInt(_0x230681(0x9f))/0xc)+parseInt(_0x230681(0xa0))/0xd;if(_0x238643===_0x3a619e)break;else _0x232659['push'](_0x232659['shift']());}catch(_0x50f5fe){_0x232659['push'](_0x232659['shift']());}}}(_0x374c,0x2d57c));function _0x379b(_0x9a2281,_0x249765){const _0x374ce8=_0x374c();return _0x379b=function(_0x379bf3,_0x5c4e47){_0x379bf3=_0x379bf3-0x74;let _0xa4cf5c=_0x374ce8[_0x379bf3];return _0xa4cf5c;},_0x379b(_0x9a2281,_0x249765);}import{Bridge}from'../Bridge';import{BridgeConfig,parseRegistrationFile}from'../config/Config';import{Webhooks}from'../Webhooks';import{MatrixSender}from'../MatrixSender';import{UserNotificationWatcher}from'../Notifications/UserNotificationWatcher';import{ListenerService}from'../ListenerService';function _0x374c(){const _0x3fb013=['stop','env','exit','configure','BridgeApp\x20encountered\x20an\x20error\x20and\x20has\x20stopped','once','BDXjm','catch','logging','12562GtFtKy','setLogger','4242LkRMBX','127644xSXCmZ','listen','TuSCm','41350YodBIf','1VCRDiq','Got\x20SIGTERM','707494mXnKEF','Sentry\x20reporting\x20enabled','6VAsImV','expressRouter','disconnect','288nPeEtL','json','webhooks','bindResource','dsn','colorize','1800LCDuYj','15958761FLafNG','argv','info','./registration.yml','error','jreSY','BridgeApp\x20encountered\x20an\x20error\x20and\x20has\x20stopped:','ksPSC','YKtlI','environment','level','nHJiy','domain','listeners','926545UZHLqe','HoEpY','queue','configured','sentry','start','SIGTERM','botSdkLogger','15wCtyuU','4736etqqpw','./config.yml'];_0x374c=function(){return _0x3fb013;};return _0x374c();}import{Logger,getBridgeVersion}from'matrix-appservice-bridge';import{LogService}from'matrix-bot-sdk';import{getAppservice}from'../appservice';import _0x2dfdd3 from'../Managers/BotUsersManager';import*as _0x4c8b33 from'@sentry/node';Logger[_0x563326(0x85)]({'console':_0x563326(0xa2)});const log=new Logger('App');async function start(){const _0x100529=_0x563326,_0x143310={'HoEpY':_0x100529(0xa6),'FRbNM':_0x100529(0x93),'rvjCV':_0x100529(0x81),'GHAWH':_0x100529(0xa3),'jreSY':_0x100529(0xa7),'TuSCm':function(_0x5e4bf2){return _0x5e4bf2();},'nHJiy':_0x100529(0x7d),'BDXjm':_0x100529(0x9b)},_0x4a0442=process['argv'][0x2]||_0x143310['rvjCV'],_0x39ee40=process[_0x100529(0xa1)][0x3]||_0x143310['GHAWH'],_0x3d95d4=await BridgeConfig['parseConfig'](_0x4a0442,process[_0x100529(0x83)]),_0x1bbf4c=await parseRegistrationFile(_0x39ee40),_0x25693f=new ListenerService(_0x3d95d4[_0x100529(0x76)]);_0x25693f['start'](),Logger[_0x100529(0x85)]({'console':_0x3d95d4['logging'][_0x100529(0xaa)],'colorize':_0x3d95d4[_0x100529(0x8a)][_0x100529(0x9e)],'json':_0x3d95d4[_0x100529(0x8a)][_0x100529(0x9a)],'timestampFormat':_0x3d95d4[_0x100529(0x8a)]['timestampFormat']}),LogService[_0x100529(0x8c)](Logger[_0x100529(0x7e)]);const {appservice:_0x219f2c,storage:_0x476e73}=getAppservice(_0x3d95d4,_0x1bbf4c);if(_0x3d95d4[_0x100529(0x79)]['monolithic']){if(_0x143310[_0x100529(0xa5)]!==_0x100529(0xa7))_0x182171[_0x100529(0xa4)](_0x143310[_0x100529(0x78)],_0x394dff);else{const _0x3731bc=new MatrixSender(_0x3d95d4,_0x219f2c);_0x3731bc[_0x100529(0x8f)]();const _0x1a401d=new UserNotificationWatcher(_0x3d95d4);_0x1a401d[_0x100529(0x7c)]();}}_0x3d95d4['sentry']&&(_0x4c8b33['init']({'dsn':_0x3d95d4[_0x100529(0x7b)][_0x100529(0x9d)],'environment':_0x3d95d4[_0x100529(0x7b)][_0x100529(0xa9)],'release':_0x143310[_0x100529(0x90)](getBridgeVersion),'serverName':_0x3d95d4['bridge'][_0x100529(0x75)],'includeLocalVariables':!![]}),log['info'](_0x100529(0x95)));const _0x8bfb0c=new _0x2dfdd3(_0x3d95d4,_0x219f2c),_0x2e236d=new Bridge(_0x3d95d4,_0x25693f,_0x219f2c,_0x476e73,_0x8bfb0c);process[_0x100529(0x87)](_0x143310[_0x100529(0x74)],()=>{const _0x482892=_0x100529;log[_0x482892(0xa4)](_0x143310['FRbNM']),_0x25693f[_0x482892(0x82)](),_0x2e236d[_0x482892(0x82)](),_0x476e73[_0x482892(0x98)]?.();}),await _0x2e236d[_0x100529(0x7c)]();if(_0x3d95d4[_0x100529(0x79)]['monolithic']){const _0x434d9f=new Webhooks(_0x3d95d4);_0x25693f[_0x100529(0x9c)](_0x143310[_0x100529(0x88)],_0x434d9f[_0x100529(0x97)]);}}start()[_0x563326(0x89)](_0x49d953=>{const _0x4d289b=_0x563326,_0x1d8218={'YKtlI':_0x4d289b(0x86)};Logger['root'][_0x4d289b(0x7a)]?log[_0x4d289b(0xa4)](_0x4d289b(0xa6),_0x49d953):console[_0x4d289b(0xa4)](_0x1d8218[_0x4d289b(0xa8)],_0x49d953),process[_0x4d289b(0x84)](0x1);});