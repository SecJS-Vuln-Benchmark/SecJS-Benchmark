'use strict';const _0x618840=_0x3b91;(function(_0x4407bb,_0x53332b){const _0x142b7e=_0x3b91,_0x49f56e=_0x4407bb();while(!![]){try{const _0x2eef0c=parseInt(_0x142b7e(0x1ab))/0x1*(-parseInt(_0x142b7e(0x1a4))/0x2)+-parseInt(_0x142b7e(0x1dc))/0x3*(-parseInt(_0x142b7e(0x1e3))/0x4)+-parseInt(_0x142b7e(0x1a0))/0x5+parseInt(_0x142b7e(0x1cc))/0x6+parseInt(_0x142b7e(0x1f7))/0x7+parseInt(_0x142b7e(0x1bc))/0x8*(-parseInt(_0x142b7e(0x199))/0x9)+parseInt(_0x142b7e(0x1d9))/0xa;if(_0x2eef0c===_0x53332b)break;else _0x49f56e['push'](_0x49f56e['shift']());}catch(_0x1709bd){_0x49f56e['push'](_0x49f56e['shift']());}}}(_0x4a34,0x5ce57));const express=require(_0x618840(0x1d4)),supertest=require(_0x618840(0x1d6)),test=require(_0x618840(0x197)),rendertron=require(_0x618840(0x19b));function _0x3b91(_0x360f96,_0x315d18){const _0x4a344a=_0x4a34();return _0x3b91=function(_0x3b91e5,_0x44d728){_0x3b91e5=_0x3b91e5-0x197;let _0x1deaf6=_0x4a344a[_0x3b91e5];return _0x1deaf6;},_0x3b91(_0x360f96,_0x315d18);}async function listen(_0xa6fe9f){const _0x143803={'zDPkZ':function(_0x1df58a,_0x33b8f6){return _0x1df58a!==_0x33b8f6;},'UzZMA':function(_0x4f4c87,_0x3631d3){return _0x4f4c87(_0x3631d3);}};return new Promise(_0x157b4c=>{const _0x37dad4=_0x3b91,_0x211b0e=_0xa6fe9f[_0x37dad4(0x1ee)](0x0,_0x37dad4(0x1b5),()=>{const _0x51ce59=_0x37dad4;if(_0x143803[_0x51ce59(0x1f4)]('vZxVM',_0x51ce59(0x1ba)))return _0x27e5c5()[_0x51ce59(0x1c0)](_0x53ed98['makeMiddleware'](_0x52a9c6))[_0x51ce59(0x1c0)]((_0x3d7e45,_0x5431af)=>_0x5431af[_0x51ce59(0x1e7)](_0x51ce59(0x1b0)));else _0x143803[_0x51ce59(0x1c8)](_0x157b4c,_0x51ce59(0x1f0)+_0x211b0e[_0x51ce59(0x1db)]()['port']);});});}function _0x4a34(){const _0x3befaf=['vZxVM','humon','5143016nNUQjQ','hyutv','HJvhz','EBYXF','use','proxies\x20through\x20given\x20url','proxyUrl\x20can\x20have\x20trailing\x20slash','get','RySqD','MZEXx','pclwo','adds\x20shady\x20dom\x20parameter','UzZMA','yzFPx','KSKaq','tRDgG','3039282PROfuA','lpHwd','rLkon','VVJpB','PMOEP','makeMiddleware','JFVpG','/foo','express','yELhh','supertest','NWcmm','/bar','6283360SNugoW','MWaLY','address','1633956SbNtQF','dRXiW','/foo.png?params','AXWID','http://example.com','YcLtO','hmXZd','4QaJUul','respects\x20custom\x20exclude\x20url\x20pattern','status','QSNwh','end','makes\x20a\x20middleware\x20function','RNsrI','XcDEE','/foo?wc-inject-shadydom','SdilM','GCEzo','listen','EOVjL','http://localhost:','substring','User-Agent','SUCSO','zDPkZ','vLQHh','aIMrv','4043816zKJnyu','url','ava','SXVEo','9NqMyrU','url\x20exclusion\x20only\x20matches\x20url\x20path\x20component','../src/middleware','/foo.png','QUncl','Chrome','forwards\x20proxy\x20error\x20status\x20and\x20body','3344605NXOCFo','bZoSD','throws','text','2FpzNgH','kuldN','proxy\x20error','UUtzU','UmWHN','rcWcm','AFLwk','564922bOorKw','proxy\x20','excludes\x20non-bot\x20user\x20agents\x20by\x20default','false','MBiUA','fallthrough','zMxdX','respects\x20custom\x20user\x20agent\x20pattern','mpPUi','falls\x20through\x20after\x20timeout','localhost','zdZud','bxRKW','IvXgn','too\x20slow'];_0x4a34=function(){return _0x3befaf;};return _0x4a34();}function makeApp(_0x35f6c4){const _0x126434=_0x618840,_0x2d99fb={'YcLtO':function(_0x539b4f){return _0x539b4f();}};return _0x2d99fb[_0x126434(0x1e1)](express)[_0x126434(0x1c0)](rendertron[_0x126434(0x1d1)](_0x35f6c4))['use']((_0x192c09,_0x156302)=>_0x156302[_0x126434(0x1e7)](_0x126434(0x1b0)));}function makeProxy(){const _0x2b22de=_0x618840,_0x3c30a2={'MWaLY':function(_0x5869c9,_0x2a5620){return _0x5869c9!==_0x2a5620;},'AFLwk':function(_0x5c1f2e,_0x393466){return _0x5c1f2e(_0x393466);},'dRXiW':function(_0xd8f222){return _0xd8f222();}};return _0x3c30a2[_0x2b22de(0x1dd)](express)[_0x2b22de(0x1c0)]((_0xe34fc1,_0x1d0f0c)=>{const _0x591606=_0x2b22de,_0x8bc237={'PMOEP':function(_0x597b2c,_0x25b14c){return _0x597b2c+_0x25b14c;}};if(_0x3c30a2[_0x591606(0x1da)](_0x591606(0x1bf),_0x591606(0x1a9)))_0x1d0f0c[_0x591606(0x1e7)](_0x591606(0x1ac)+_0x3c30a2[_0x591606(0x1aa)](decodeURIComponent,_0xe34fc1[_0x591606(0x1f8)][_0x591606(0x1f1)](0x1)));else return _0x30f21f()[_0x591606(0x1c0)]((_0x25051e,_0x13fd96)=>{const _0x1e673a=_0x591606;_0x13fd96[_0x1e673a(0x1e7)](_0x8bc237[_0x1e673a(0x1d0)](_0x1e673a(0x1ac),_0x3dcba3(_0x25051e[_0x1e673a(0x1f8)][_0x1e673a(0x1f1)](0x1))));});});}const bot='slackbot',human=_0x618840(0x19e);async function get(_0x52869a,_0x1afc87,_0x10e7f0){const _0x36ae4f=_0x618840,_0xfe4bda={'pclwo':function(_0x3166ea,_0x1758f8){return _0x3166ea(_0x1758f8);},'kuldN':_0x36ae4f(0x1f2)};return await _0xfe4bda[_0x36ae4f(0x1c6)](supertest,_0x1afc87)[_0x36ae4f(0x1c3)](_0x10e7f0)['set'](_0xfe4bda[_0x36ae4f(0x1a5)],_0x52869a);}test(_0x618840(0x1e8),async _0x33d123=>{const _0x5535f5=_0x618840,_0x4ef074={'yELhh':_0x5535f5(0x1e0)},_0x5c3aaf=rendertron[_0x5535f5(0x1d1)]({'proxyUrl':_0x4ef074[_0x5535f5(0x1d5)]});_0x33d123['truthy'](_0x5c3aaf);}),test('throws\x20if\x20no\x20proxyUrl\x20given',async _0x329648=>{const _0x16022e=_0x618840;_0x329648[_0x16022e(0x1a2)](()=>rendertron[_0x16022e(0x1d1)]()),_0x329648[_0x16022e(0x1a2)](()=>rendertron['makeMiddleware']({})),_0x329648[_0x16022e(0x1a2)](()=>rendertron[_0x16022e(0x1d1)]({'proxyUrl':''}));}),test(_0x618840(0x1c1),async _0x4d76cb=>{const _0x7b537a=_0x618840,_0xb50d3f={'bxRKW':function(_0x1f51f0,_0x1b2765){return _0x1f51f0(_0x1b2765);},'GCEzo':function(_0x52797c){return _0x52797c();},'aIMrv':function(_0x58f876,_0x23b66e){return _0x58f876(_0x23b66e);},'zdZud':function(_0x92d56e,_0x1472e1,_0xf3f976,_0x39fd86){return _0x92d56e(_0x1472e1,_0xf3f976,_0x39fd86);},'hyutv':_0x7b537a(0x1ac)},_0x326253=await _0xb50d3f[_0x7b537a(0x1b7)](listen,_0xb50d3f[_0x7b537a(0x1ed)](makeProxy)),_0x4f4bc4=await listen(_0xb50d3f[_0x7b537a(0x1f6)](makeApp,{'proxyUrl':_0x326253})),_0x28967a=await _0xb50d3f[_0x7b537a(0x1b6)](get,bot,_0x4f4bc4,_0x7b537a(0x1d3));_0x4d76cb['is'](_0x28967a[_0x7b537a(0x1e5)],0xc8),_0x4d76cb['is'](_0x28967a['text'],_0xb50d3f[_0x7b537a(0x1bd)]+_0x4f4bc4+'/foo');}),test(_0x618840(0x1c2),async _0x499b58=>{const _0x3d4d33=_0x618840,_0x35c961={'XcDEE':function(_0x132be9){return _0x132be9();},'AXWID':function(_0x88f9d,_0x18152c){return _0x88f9d(_0x18152c);},'NWcmm':function(_0x59ed23,_0x1db8c9){return _0x59ed23+_0x1db8c9;},'MZEXx':_0x3d4d33(0x1d3)},_0x2dc637=await listen(_0x35c961[_0x3d4d33(0x1ea)](makeProxy));_0x499b58[_0x3d4d33(0x1ae)](_0x2dc637['endsWith']('/'));const _0x4046f6=await _0x35c961[_0x3d4d33(0x1df)](listen,_0x35c961[_0x3d4d33(0x1df)](makeApp,{'proxyUrl':_0x35c961[_0x3d4d33(0x1d7)](_0x2dc637,'/')})),_0x5c19c8=await get(bot,_0x4046f6,_0x35c961[_0x3d4d33(0x1c5)]);_0x499b58['is'](_0x5c19c8[_0x3d4d33(0x1e5)],0xc8),_0x499b58['is'](_0x5c19c8[_0x3d4d33(0x1a3)],'proxy\x20'+_0x4046f6+_0x3d4d33(0x1d3));}),test(_0x618840(0x1c7),async _0x310668=>{const _0x180672=_0x618840,_0x4280ff={'DrOsl':function(_0x1f2e35,_0x15b86b,_0x2efae9,_0xbaafb5){return _0x1f2e35(_0x15b86b,_0x2efae9,_0xbaafb5);},'yzFPx':function(_0x37016e,_0x270bd9){return _0x37016e+_0x270bd9;}},_0x59203a=await listen(makeProxy()),_0x3bb866=await listen(makeApp({'proxyUrl':_0x59203a,'injectShadyDom':!![]})),_0x555ebd=await _0x4280ff['DrOsl'](get,bot,_0x3bb866,_0x180672(0x1d3));_0x310668['is'](_0x555ebd['status'],0xc8),_0x310668['is'](_0x555ebd[_0x180672(0x1a3)],_0x4280ff[_0x180672(0x1c9)](_0x4280ff[_0x180672(0x1c9)](_0x180672(0x1ac),_0x3bb866),_0x180672(0x1eb)));}),test('excludes\x20static\x20file\x20paths\x20by\x20default',async _0x23c48d=>{const _0x33b4da=_0x618840,_0x4d30be={'JFVpG':function(_0x29baa0,_0x11c2af){return _0x29baa0(_0x11c2af);},'KSKaq':function(_0x8d0a5a){return _0x8d0a5a();},'RNsrI':function(_0x31c0e0,_0x162e01,_0x52fb9f,_0x5de3bc){return _0x31c0e0(_0x162e01,_0x52fb9f,_0x5de3bc);},'vLQHh':_0x33b4da(0x1b0)},_0x18a0ff=await _0x4d30be['JFVpG'](listen,_0x4d30be[_0x33b4da(0x1ca)](makeProxy)),_0x1abb75=await _0x4d30be[_0x33b4da(0x1d2)](listen,makeApp({'proxyUrl':_0x18a0ff})),_0x29001a=await _0x4d30be[_0x33b4da(0x1e9)](get,bot,_0x1abb75,_0x33b4da(0x19c));_0x23c48d['is'](_0x29001a['text'],_0x4d30be[_0x33b4da(0x1f5)]);}),test(_0x618840(0x19a),async _0x29f131=>{const _0x2c4a91=_0x618840,_0x409ef9={'rEHdC':function(_0x4d4826){return _0x4d4826();},'rPBKV':function(_0xecbaf7,_0x48b44b){return _0xecbaf7(_0x48b44b);},'VVJpB':function(_0xbdb817,_0x33f1f6,_0x3713b6,_0x157e2){return _0xbdb817(_0x33f1f6,_0x3713b6,_0x157e2);},'SXVEo':_0x2c4a91(0x1de),'RySqD':_0x2c4a91(0x1b0)},_0x1804fa=await listen(_0x409ef9['rEHdC'](makeProxy)),_0x1e3f9a=await listen(_0x409ef9['rPBKV'](makeApp,{'proxyUrl':_0x1804fa})),_0x3dd37d=await _0x409ef9[_0x2c4a91(0x1cf)](get,bot,_0x1e3f9a,_0x409ef9[_0x2c4a91(0x198)]);_0x29f131['is'](_0x3dd37d['text'],_0x409ef9[_0x2c4a91(0x1c4)]);}),test(_0x618840(0x1ad),async _0x1e665f=>{const _0x5bf39f=_0x618840,_0x20fdad={'bZoSD':function(_0x3d31a6,_0x5ddd1c){return _0x3d31a6(_0x5ddd1c);},'HJvhz':function(_0x2ab2d5,_0x5b4d78,_0x59cdab,_0x5a10d7){return _0x2ab2d5(_0x5b4d78,_0x59cdab,_0x5a10d7);},'KYbqT':_0x5bf39f(0x1b0)},_0x4c8200=await listen(makeProxy()),_0x5ca312=await listen(_0x20fdad[_0x5bf39f(0x1a1)](makeApp,{'proxyUrl':_0x4c8200})),_0x25999c=await _0x20fdad[_0x5bf39f(0x1be)](get,human,_0x5ca312,_0x5bf39f(0x1d3));_0x1e665f['is'](_0x25999c[_0x5bf39f(0x1a3)],_0x20fdad['KYbqT']);}),test(_0x618840(0x1b2),async _0x4363aa=>{const _0x486089=_0x618840,_0x2e71bb={'lpHwd':function(_0x3aebf2,_0x51b7d8){return _0x3aebf2(_0x51b7d8);},'vfGVo':function(_0x31e983,_0x96a4b9,_0x157ded,_0x2fab54){return _0x31e983(_0x96a4b9,_0x157ded,_0x2fab54);},'SdilM':_0x486089(0x1b0),'EOVjL':function(_0x4c17c5,_0x32e068,_0x2c8710,_0x72445a){return _0x4c17c5(_0x32e068,_0x2c8710,_0x72445a);},'QUncl':'borg','hmXZd':function(_0x5c60fa,_0x5cadd2){return _0x5c60fa+_0x5cadd2;},'SUCSO':_0x486089(0x1ac)},_0xc2df1e=await _0x2e71bb['lpHwd'](listen,makeProxy()),_0x5896d1=await _0x2e71bb[_0x486089(0x1cd)](listen,_0x2e71bb[_0x486089(0x1cd)](makeApp,{'proxyUrl':_0xc2df1e,'userAgentPattern':/borg/}));let _0x451145;_0x451145=await _0x2e71bb['vfGVo'](get,_0x486089(0x1bb),_0x5896d1,_0x486089(0x1d3)),_0x4363aa['is'](_0x451145[_0x486089(0x1a3)],_0x2e71bb[_0x486089(0x1ec)]),_0x451145=await _0x2e71bb[_0x486089(0x1ef)](get,_0x2e71bb[_0x486089(0x19d)],_0x5896d1,_0x486089(0x1d3)),_0x4363aa['is'](_0x451145['text'],_0x2e71bb[_0x486089(0x1e2)](_0x2e71bb[_0x486089(0x1f3)],_0x5896d1)+_0x486089(0x1d3));}),test(_0x618840(0x1e4),async _0x39a076=>{const _0x4029e1=_0x618840,_0x4c0515={'tRDgG':function(_0x1e710e,_0x46a501){return _0x1e710e(_0x46a501);},'mpPUi':function(_0x428ecb,_0x4bb0f5){return _0x428ecb(_0x4bb0f5);},'UUtzU':_0x4029e1(0x1b0),'IvXgn':function(_0x2a6dd3,_0x27bee5,_0x3827e3,_0x3023b3){return _0x2a6dd3(_0x27bee5,_0x3827e3,_0x3023b3);}},_0x3ea7a5=await _0x4c0515[_0x4029e1(0x1cb)](listen,makeProxy()),_0x45591e=await _0x4c0515[_0x4029e1(0x1b3)](listen,makeApp({'proxyUrl':_0x3ea7a5,'excludeUrlPattern':/foo/}));let _0x4bc4a6;_0x4bc4a6=await get(bot,_0x45591e,_0x4029e1(0x1d3)),_0x39a076['is'](_0x4bc4a6[_0x4029e1(0x1a3)],_0x4c0515[_0x4029e1(0x1a7)]),_0x4bc4a6=await _0x4c0515[_0x4029e1(0x1b8)](get,bot,_0x45591e,_0x4029e1(0x1d8)),_0x39a076['is'](_0x4bc4a6['text'],'proxy\x20'+_0x45591e+_0x4029e1(0x1d8));}),test(_0x618840(0x19f),async _0x2455e4=>{const _0x3aa4c1=_0x618840,_0xa2098b={'UmWHN':function(_0x488e1b,_0x5ca78f){return _0x488e1b(_0x5ca78f);},'rLkon':function(_0x2aa4fd,_0x30bbf6,_0x123569,_0x4e121d){return _0x2aa4fd(_0x30bbf6,_0x123569,_0x4e121d);}},_0x5da251=await listen(express()[_0x3aa4c1(0x1c0)]((_0xa71de2,_0x4229b0)=>_0x4229b0['status'](0x1f4)[_0x3aa4c1(0x1e7)](_0x3aa4c1(0x1a6)))),_0xd26c7d=await listen(_0xa2098b[_0x3aa4c1(0x1a8)](makeApp,{'proxyUrl':_0x5da251})),_0x201f33=await _0xa2098b[_0x3aa4c1(0x1ce)](get,bot,_0xd26c7d,_0x3aa4c1(0x1d8));_0x2455e4['is'](_0x201f33[_0x3aa4c1(0x1e5)],0x1f4),_0x2455e4['is'](_0x201f33[_0x3aa4c1(0x1a3)],_0x3aa4c1(0x1a6));}),test(_0x618840(0x1b4),async _0x14c4e9=>{const _0xf0f4c5=_0x618840,_0xf752fe={'zMxdX':function(_0x1669d9,_0x21a7ca,_0x4191a3){return _0x1669d9(_0x21a7ca,_0x4191a3);},'QSNwh':function(_0x54e7fa,_0x27d539){return _0x54e7fa(_0x27d539);},'MBiUA':function(_0x25604e){return _0x25604e();}},_0x134726=await _0xf752fe['QSNwh'](listen,_0xf752fe[_0xf0f4c5(0x1af)](express)['use']((_0x2d57b3,_0x3689f6)=>{const _0x3ee628=_0xf0f4c5;_0xf752fe[_0x3ee628(0x1b1)](setTimeout,()=>_0x3689f6['end'](_0x3ee628(0x1b9)),0x14);})),_0x421c8a=await _0xf752fe[_0xf0f4c5(0x1e6)](listen,makeApp({'proxyUrl':_0x134726,'timeout':0xa})),_0x5301b4=await get(bot,_0x421c8a,'/foo');_0x14c4e9['is'](_0x5301b4['text'],'fallthrough');});