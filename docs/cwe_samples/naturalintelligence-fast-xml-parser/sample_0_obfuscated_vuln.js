const _0x3263d8=_0x562c;function _0x562c(_0x50f1bd,_0xba67ed){const _0x60d809=_0x60d8();return _0x562c=function(_0x562c06,_0x3963cf){_0x562c06=_0x562c06-0x17d;let _0xe6ae3a=_0x60d809[_0x562c06];return _0xe6ae3a;},_0x562c(_0x50f1bd,_0xba67ed);}(function(_0x4b4b4c,_0x4d21e1){const _0x23dcc3=_0x562c,_0x56d586=_0x4b4b4c();while(!![]){try{const _0x14010c=parseInt(_0x23dcc3(0x18f))/0x1*(-parseInt(_0x23dcc3(0x1a5))/0x2)+parseInt(_0x23dcc3(0x19b))/0x3+parseInt(_0x23dcc3(0x1b4))/0x4*(-parseInt(_0x23dcc3(0x1b1))/0x5)+parseInt(_0x23dcc3(0x188))/0x6*(parseInt(_0x23dcc3(0x183))/0x7)+-parseInt(_0x23dcc3(0x18e))/0x8*(parseInt(_0x23dcc3(0x1a1))/0x9)+parseInt(_0x23dcc3(0x186))/0xa*(-parseInt(_0x23dcc3(0x194))/0xb)+parseInt(_0x23dcc3(0x187))/0xc;if(_0x14010c===_0x4d21e1)break;else _0x56d586['push'](_0x56d586['shift']());}catch(_0x4279dc){_0x56d586['push'](_0x56d586['shift']());}}}(_0x60d8,0xa24fd));const asyncMiddleware=require('../middlewares/asyncMiddleware'),logger=require('../../utils/logger'),{BadParameters}=require(_0x3263d8(0x18a)),LOGIN_SESSION_VALIDITY_IN_SECONDS=0x16d*0x18*0x3c*0x3c;module[_0x3263d8(0x18b)]=function UserController(_0x21259d){const _0x3bc2db=_0x3263d8,_0x973689={'drKGk':_0x3bc2db(0x1a7),'wvPKy':_0x3bc2db(0x19a),'WpFWO':_0x3bc2db(0x1a2),'QFwpy':_0x3bc2db(0x191),'qvxEr':function(_0x5c0846,_0x129a7f){return _0x5c0846>_0x129a7f;},'CXCoT':function(_0x4cf5e7,_0xc14776){return _0x4cf5e7(_0xc14776);},'YcXDN':function(_0x3f8121,_0x1d39b2){return _0x3f8121(_0x1d39b2);},'TTpDp':function(_0x44a4e4,_0xa7a3d2){return _0x44a4e4(_0xa7a3d2);}};async function _0x1f24f6(_0x475ce6,_0x4eb5dd,_0xd062e2){const _0x206ddc=_0x3bc2db,_0x2cc899=await _0x21259d['user'][_0x206ddc(0x18d)](_0x475ce6[_0x206ddc(0x1b3)]),_0x41b729=_0x475ce6[_0x206ddc(0x1b3)]['scope']||[_0x973689[_0x206ddc(0x180)],_0x973689[_0x206ddc(0x189)]],_0x316d7d=await _0x21259d[_0x206ddc(0x182)][_0x206ddc(0x18d)](_0x2cc899['id'],_0x41b729,LOGIN_SESSION_VALIDITY_IN_SECONDS,_0x475ce6[_0x206ddc(0x1a9)][_0x206ddc(0x191)]),_0xddadf5={..._0x2cc899,..._0x316d7d};_0x4eb5dd[_0x206ddc(0x184)](0xc9)['json'](_0xddadf5);}async function _0x34f18f(_0x22b5ec,_0x747ec4,_0x59326f){const _0x1fe154=_0x3bc2db,_0x1eb47c=await _0x21259d['user'][_0x1fe154(0x1a8)](_0x22b5ec[_0x1fe154(0x1b3)][_0x1fe154(0x195)],_0x22b5ec[_0x1fe154(0x1b3)]['password']),_0x176b39=_0x22b5ec['body']['scope']||[_0x973689['drKGk'],'dashboard:read'],_0x439ce8=await _0x21259d[_0x1fe154(0x182)][_0x1fe154(0x18d)](_0x1eb47c['id'],_0x176b39,LOGIN_SESSION_VALIDITY_IN_SECONDS,_0x22b5ec['headers'][_0x1fe154(0x191)]),_0x4296d5={..._0x1eb47c,..._0x439ce8};_0x747ec4['json'](_0x4296d5);}async function _0x5a0cd8(_0x326b87,_0x4e3ffb,_0x2041db){const _0x5d369a=_0x3bc2db,_0x1071b5=_0x326b87[_0x5d369a(0x18c)];_0x1071b5[_0x5d369a(0x1ae)]&&(_0x1071b5['fields']=_0x1071b5[_0x5d369a(0x1ae)][_0x5d369a(0x1b6)](','));_0x1071b5[_0x5d369a(0x1a3)]&&(_0x1071b5['expand']=_0x1071b5[_0x5d369a(0x1a3)][_0x5d369a(0x1b6)](','));const _0x140e53=await _0x21259d[_0x5d369a(0x1b5)]['get'](_0x1071b5);_0x4e3ffb[_0x5d369a(0x1a0)](_0x140e53);}async function _0x47f079(_0x4ea858,_0x339041){const _0x49eb77=_0x3bc2db,_0x7c79ba=await _0x21259d[_0x49eb77(0x1b5)][_0x49eb77(0x1b2)](_0x4ea858['params'][_0x49eb77(0x181)]);_0x339041['json'](_0x7c79ba);}async function _0x48a97f(_0x12075d,_0xcdad6d){const _0x1ff504=_0x3bc2db,_0x5f6282=await _0x21259d[_0x1ff504(0x1b5)][_0x1ff504(0x19f)](_0x12075d['params'][_0x1ff504(0x181)],_0x12075d[_0x1ff504(0x1b3)]);_0xcdad6d[_0x1ff504(0x1a0)](_0x5f6282);}async function _0x1779ed(_0x2cc999,_0x1927ae){const _0x422630=_0x3bc2db;if(_0x2cc999[_0x422630(0x1b5)]['selector']===_0x2cc999[_0x422630(0x197)][_0x422630(0x181)])throw new BadParameters(_0x973689['WpFWO']);await _0x21259d['user'][_0x422630(0x17f)](_0x2cc999['params'][_0x422630(0x181)]),_0x1927ae[_0x422630(0x1a0)]({'success':!![]});}async function _0x54918a(_0x3d02c6,_0x1686a,_0x35db5d){const _0x1f682f=_0x3bc2db,_0x2eda2a=await _0x21259d[_0x1f682f(0x1b5)][_0x1f682f(0x199)](_0x3d02c6[_0x1f682f(0x1b5)]['id']);_0x1686a['json'](_0x2eda2a);}async function _0x3a6e54(_0x41aa92,_0x2d2fed,_0x360e30){const _0x32fe77=_0x3bc2db,_0x5b8813=await _0x21259d[_0x32fe77(0x1b5)][_0x32fe77(0x1ac)](_0x41aa92[_0x32fe77(0x1b5)]['id']);_0x2d2fed[_0x32fe77(0x19e)](_0x5b8813);}async function _0x55ddc4(_0x5dc452,_0x442ace,_0x5902ab){const _0x58abdb=_0x3bc2db,_0x309e3e=await _0x21259d[_0x58abdb(0x1b5)][_0x58abdb(0x198)](_0x5dc452[_0x58abdb(0x1b5)]['id'],_0x5dc452['body']);_0x442ace[_0x58abdb(0x1a0)](_0x309e3e);}async function _0x391fcf(_0x4a8a40,_0x391475){const _0x3170b9=_0x3bc2db,_0x465f0b=_0x4a8a40[_0x3170b9(0x1b3)][_0x3170b9(0x17d)]||['dashboard:write',_0x3170b9(0x19a)],_0x381cf0=await _0x21259d['session']['getAccessToken'](_0x4a8a40[_0x3170b9(0x1b3)][_0x3170b9(0x193)],_0x465f0b);_0x391475['json'](_0x381cf0);}async function _0x3d9120(_0x3c96e6,_0x265b7d){const _0x31028a=_0x3bc2db,_0x3585ba=await _0x21259d['user'][_0x31028a(0x185)](_0x3c96e6['body'][_0x31028a(0x195)],_0x3c96e6[_0x31028a(0x1a9)][_0x973689[_0x31028a(0x190)]]),_0xc28512=_0x3c96e6[_0x31028a(0x1b3)][_0x31028a(0x1a6)]+_0x31028a(0x1aa)+_0x3585ba[_0x31028a(0x19d)];logger['info']('Forgot\x20password\x20initiated\x20for\x20user\x20'+_0x3c96e6[_0x31028a(0x1b3)][_0x31028a(0x195)]+_0x31028a(0x1a4)+_0xc28512),_0x265b7d[_0x31028a(0x1a0)]({'success':!![]});}async function _0x38e760(_0x403048,_0x560cd6){const _0x2dc8f9=_0x3bc2db,_0x2b3c27=await _0x21259d['user'][_0x2dc8f9(0x192)](_0x403048['user']['id'],_0x403048[_0x2dc8f9(0x1b3)][_0x2dc8f9(0x1af)]);await _0x21259d[_0x2dc8f9(0x182)]['revoke'](_0x403048[_0x2dc8f9(0x1b5)]['id'],_0x403048[_0x2dc8f9(0x17e)]),_0x560cd6[_0x2dc8f9(0x1a0)](_0x2b3c27);}async function _0xbb4192(_0x5a39b2,_0x276631){const _0x3b9a94=_0x3bc2db,_0x47a5cb=_0x21259d[_0x3b9a94(0x1b5)][_0x3b9a94(0x1b0)](),_0xccc3a7=_0x973689['qvxEr'](_0x47a5cb,0x0);_0x276631[_0x3b9a94(0x1a0)]({'account_configured':_0xccc3a7});}return Object[_0x3bc2db(0x196)]({'create':_0x973689[_0x3bc2db(0x1ab)](asyncMiddleware,_0x1f24f6),'login':asyncMiddleware(_0x34f18f),'getMySelf':_0x973689['CXCoT'](asyncMiddleware,_0x54918a),'getUsers':asyncMiddleware(_0x5a0cd8),'getUserBySelector':asyncMiddleware(_0x47f079),'update':_0x973689[_0x3bc2db(0x1ab)](asyncMiddleware,_0x48a97f),'deleteUser':_0x973689[_0x3bc2db(0x1ab)](asyncMiddleware,_0x1779ed),'getMyPicture':_0x973689[_0x3bc2db(0x1ad)](asyncMiddleware,_0x3a6e54),'updateMySelf':asyncMiddleware(_0x55ddc4),'getAccessToken':asyncMiddleware(_0x391fcf),'forgotPassword':asyncMiddleware(_0x3d9120),'resetPassword':_0x973689[_0x3bc2db(0x19c)](asyncMiddleware,_0x38e760),'getSetupState':asyncMiddleware(_0xbb4192)});};function _0x60d8(){const _0x168f14=['CXCoT','getPicture','YcXDN','fields','password','getUserCount','5dPZBRa','getBySelector','body','2053412MNAdEh','user','split','scope','session_id','destroy','drKGk','user_selector','session','4249mFUhdQ','status','forgotPassword','33540pYdCSb','24011688tjOaDf','3138ukeecj','wvPKy','../../utils/coreErrors','exports','query','create','1688IBGlzs','5MipuyL','QFwpy','user-agent','updatePassword','refresh_token','2200sNDngg','email','freeze','params','update','getById','dashboard:read','2715471PFLspR','TTpDp','access_token','send','updateBySelector','json','56250lKxdVf','You\x20cannot\x20delete\x20yourself','expand',',\x20link\x20=\x20','22344MFeSLN','origin','dashboard:write','login','headers','/reset-password?token='];_0x60d8=function(){return _0x168f14;};return _0x60d8();}