'use strict';const _0x5f3edf=_0x54c1;(function(_0x511669,_0x58a66b){const _0x43a6dc=_0x54c1,_0x107ecf=_0x511669();while(!![]){try{const _0x594835=-parseInt(_0x43a6dc(0x96))/0x1*(parseInt(_0x43a6dc(0xa7))/0x2)+parseInt(_0x43a6dc(0xbb))/0x3*(-parseInt(_0x43a6dc(0x9b))/0x4)+parseInt(_0x43a6dc(0x95))/0x5*(parseInt(_0x43a6dc(0xb5))/0x6)+-parseInt(_0x43a6dc(0xa1))/0x7+parseInt(_0x43a6dc(0x8e))/0x8*(-parseInt(_0x43a6dc(0x8a))/0x9)+parseInt(_0x43a6dc(0xb7))/0xa*(parseInt(_0x43a6dc(0x9f))/0xb)+parseInt(_0x43a6dc(0xab))/0xc;if(_0x594835===_0x58a66b)break;else _0x107ecf['push'](_0x107ecf['shift']());}catch(_0x553093){_0x107ecf['push'](_0x107ecf['shift']());}}}(_0x5dcd,0xeaed2));const test=require('ava'),request=require(_0x5f3edf(0x9e)),express=require(_0x5f3edf(0xad)),compression=require(_0x5f3edf(0x98)),cache=require(_0x5f3edf(0x94)),app=express(),server=request(app);function _0x5dcd(){const _0x5d7742=['1893708jaIJci','original\x20status\x20is\x20preserved','end','EIAdI','50306700dQmYbF','join','express','send','sendStatus','params','gzip,\x20deflate,\x20br','nTfYP','use','before','2109594KnUHyW','/set-header','4141480OcdFNn','/?basictest2','caches\x20headers','/status/123','159ZqFxUh','uLIiT','caches\x20content\x20and\x20serves\x20same\x20content\x20on\x20cache\x20hit','RKmFc','/?basictest','ETcoM','my-header','gzip','IsyYl','set','get','middleware','AQQkO','9jdklYW','status','\x20times','/status/:status','4586184uWoBrP','content-encoding','BkFrH','Called\x20','set-header-payload','/compressed','../src/cache.js','5ehogKc','2sFFnMT','AKffF','compression','VsLMm','header','96364BKVloN','text','JXnFS','supertest','11cIStpy','fPugn','1763370nUTpQV','header-value','MAXli','dXhsk','NznTh','clearCache'];_0x5dcd=function(){return _0x5d7742;};return _0x5dcd();}app[_0x5f3edf(0xb3)](cache[_0x5f3edf(0x88)]());let handlerCalledCount=0x0;function _0x54c1(_0x407b2b,_0x15e4c2){const _0x5dcdcc=_0x5dcd();return _0x54c1=function(_0x54c17b,_0x1de8e3){_0x54c17b=_0x54c17b-0x7e;let _0x162566=_0x5dcdcc[_0x54c17b];return _0x162566;},_0x54c1(_0x407b2b,_0x15e4c2);}test[_0x5f3edf(0xb4)](async _0x5c5173=>{const _0x32a604=_0x5f3edf;await cache[_0x32a604(0xa6)]();}),app[_0x5f3edf(0x87)]('/',(_0x7ddabc,_0x59d485)=>{const _0x359f02=_0x5f3edf,_0x475255={'AQQkO':function(_0x840799,_0x35d9ae){return _0x840799+_0x35d9ae;},'nTfYP':_0x359f02(0x91),'NznTh':'\x20times'};handlerCalledCount++,_0x59d485[_0x359f02(0xa9)](_0x475255[_0x359f02(0x89)](_0x475255[_0x359f02(0xb2)]+handlerCalledCount,_0x475255[_0x359f02(0xa5)]));}),test(_0x5f3edf(0x7f),async _0x35d6e3=>{const _0x89cfbd=_0x5f3edf,_0xf39903={'MvsAZ':_0x89cfbd(0x81),'uLIiT':function(_0x2d923d,_0xcd49c0){return _0x2d923d+_0xcd49c0;},'BkFrH':_0x89cfbd(0x91),'AKffF':_0x89cfbd(0x8c),'VsLMm':function(_0xbb87f5,_0x4f5a87){return _0xbb87f5+_0x4f5a87;}};let _0x1ee966=await server[_0x89cfbd(0x87)](_0xf39903['MvsAZ']);const _0x4128de=handlerCalledCount;_0x35d6e3['is'](_0x1ee966[_0x89cfbd(0x8b)],0xc8),_0x35d6e3['is'](_0x1ee966[_0x89cfbd(0x9c)],_0xf39903['uLIiT'](_0xf39903[_0x89cfbd(0x90)]+_0x4128de,_0x89cfbd(0x8c))),_0x1ee966=await server[_0x89cfbd(0x87)](_0x89cfbd(0x81)),_0x35d6e3['is'](_0x1ee966[_0x89cfbd(0x8b)],0xc8),_0x35d6e3['is'](_0x1ee966[_0x89cfbd(0x9c)],_0xf39903[_0x89cfbd(0x7e)](_0xf39903[_0x89cfbd(0x90)]+_0x4128de,_0xf39903[_0x89cfbd(0x97)])),_0x1ee966=await server['get']('/?basictest'),_0x35d6e3['is'](_0x1ee966[_0x89cfbd(0x8b)],0xc8),_0x35d6e3['is'](_0x1ee966['text'],_0xf39903['VsLMm'](_0xf39903[_0x89cfbd(0x90)],_0x4128de)+_0x89cfbd(0x8c)),_0x1ee966=await server['get'](_0x89cfbd(0xb8)),_0x35d6e3['is'](_0x1ee966['status'],0xc8),_0x35d6e3['is'](_0x1ee966[_0x89cfbd(0x9c)],_0xf39903[_0x89cfbd(0x90)]+_0xf39903[_0x89cfbd(0x99)](_0x4128de,0x1)+_0xf39903[_0x89cfbd(0x97)]);}),app[_0x5f3edf(0x87)](_0x5f3edf(0xb6),(_0x343ee7,_0x13fe69)=>{const _0x5371d9=_0x5f3edf,_0x2c7ede={'JXnFS':_0x5371d9(0x83),'Pxize':'set-header-payload'};_0x13fe69[_0x5371d9(0x86)](_0x2c7ede[_0x5371d9(0x9d)],_0x5371d9(0xa2)),_0x13fe69[_0x5371d9(0xa9)](_0x2c7ede['Pxize']);}),test(_0x5f3edf(0xb9),async _0x18cdab=>{const _0x1f2817=_0x5f3edf,_0x196b21={'UhPYj':'/set-header','IsyYl':'my-header','MAXli':_0x1f2817(0xa2),'fPugn':_0x1f2817(0x92)};let _0x2be96d=await server[_0x1f2817(0x87)](_0x196b21['UhPYj']);_0x18cdab['is'](_0x2be96d[_0x1f2817(0x8b)],0xc8),_0x18cdab['is'](_0x2be96d[_0x1f2817(0x9a)][_0x196b21[_0x1f2817(0x85)]],_0x196b21[_0x1f2817(0xa3)]),_0x18cdab['is'](_0x2be96d[_0x1f2817(0x9c)],_0x196b21[_0x1f2817(0xa0)]),_0x2be96d=await server[_0x1f2817(0x87)](_0x1f2817(0xb6)),_0x18cdab['is'](_0x2be96d['status'],0xc8),_0x18cdab['is'](_0x2be96d['header'][_0x196b21[_0x1f2817(0x85)]],_0x196b21['MAXli']),_0x18cdab['is'](_0x2be96d['text'],_0x196b21[_0x1f2817(0xa0)]);}),app[_0x5f3edf(0xb3)](_0x5f3edf(0x93),compression()),app['get']('/compressed',(_0x5f1264,_0xbebccf)=>{const _0x5cc0a6=_0x5f3edf,_0x27be49={'RKmFc':'Content-Type'};_0xbebccf[_0x5cc0a6(0x86)](_0x27be49[_0x5cc0a6(0x80)],'text/html'),_0xbebccf[_0x5cc0a6(0xae)](new Array(0x401)[_0x5cc0a6(0xac)]('x'));}),test('compression\x20preserved',async _0x5b5c3b=>{const _0x17f196=_0x5f3edf,_0x4d0250={'ETcoM':'Accept-Encoding','dXhsk':_0x17f196(0xb1),'HTdKd':_0x17f196(0x8f)},_0x57fba8=new Array(0x401)[_0x17f196(0xac)]('x');let _0xded9d2=await server[_0x17f196(0x87)]('/compressed')[_0x17f196(0x86)](_0x4d0250[_0x17f196(0x82)],_0x4d0250[_0x17f196(0xa4)]);_0x5b5c3b['is'](_0xded9d2['status'],0xc8),_0x5b5c3b['is'](_0xded9d2[_0x17f196(0x9a)][_0x17f196(0x8f)],_0x17f196(0x84)),_0x5b5c3b['is'](_0xded9d2[_0x17f196(0x9c)],_0x57fba8),_0xded9d2=await server['get'](_0x17f196(0x93))[_0x17f196(0x86)](_0x4d0250[_0x17f196(0x82)],'gzip,\x20deflate,\x20br'),_0x5b5c3b['is'](_0xded9d2[_0x17f196(0x8b)],0xc8),_0x5b5c3b['is'](_0xded9d2[_0x17f196(0x9a)][_0x4d0250['HTdKd']],_0x17f196(0x84)),_0x5b5c3b['is'](_0xded9d2['text'],_0x57fba8);});let statusCallCount=0x0;app[_0x5f3edf(0x87)](_0x5f3edf(0x8d),(_0x2bca2e,_0x426d41)=>{const _0x56a6c9=_0x5f3edf,_0x2725c3={'EIAdI':function(_0x390aeb,_0x5e34b8){return _0x390aeb%_0x5e34b8;}};_0x2725c3[_0x56a6c9(0xaa)](statusCallCount,0x2)==0x0?_0x426d41[_0x56a6c9(0xaf)](_0x2bca2e[_0x56a6c9(0xb0)][_0x56a6c9(0x8b)]):_0x426d41['sendStatus'](0x1c8),statusCallCount++;}),test(_0x5f3edf(0xa8),async _0x1ac1db=>{const _0x16ba86=_0x5f3edf;let _0xcec77=await server[_0x16ba86(0x87)](_0x16ba86(0xba));_0x1ac1db['is'](_0xcec77['status'],0x7b),_0xcec77=await server['get'](_0x16ba86(0xba)),_0x1ac1db['is'](_0xcec77['status'],0x1c8);});