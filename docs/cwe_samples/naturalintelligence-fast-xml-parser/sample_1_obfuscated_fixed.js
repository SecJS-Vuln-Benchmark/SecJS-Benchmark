'use strict';const _0x14c61b=_0x1781;function _0x348d(){const _0x5ef130=['MNYSf','?wc-inject-shadydom=true','http\x20status\x20code\x20should\x20be\x20able\x20to\x20be\x20set\x20via\x20a\x20meta\x20tag','body','length','etGqa','script-after-load.html','FUPES','2638144rKqrbj','193435nXYZdL','renders\x20basic\x20script','/render/http://unknown.blah.com','unknown\x20url\x20fails','server\x20status\x20code\x20should\x20be\x20forwarded','failing','indexOf','JoERZ','header','pkmMw','stop','cache','http-meta-status-code.html','STQEO','dmOtM','shadow-dom-no-polyfill.html?wc-inject-shadydom=true','after','shadow-root-text','invalid\x20url\x20fails','IyAcE','health\x20check\x20responds\x20correctly','basic-script.html','http-meta-status-code-multiple.html','4865896yrWZjb','path','get','supertest','before','renders\x20shadow\x20DOM\x20-\x20webcomponents-lite.js\x20polyfill','renders\x20script\x20after\x20page\x20load\x20event','HVbEu','7352562buvwvY','element-text','true','RKCSu','text','NODE_ENV','VolGJ','resolve','file\x20url\x20fails','async\x20loaded','env','whzzN','injectedElement','UGIIO','push','/render/','TPmQs','document-title','include-script.html','script\x20tags\x20and\x20link[rel=import]\x20tags\x20are\x20stripped','false','2046715CTtOXc','/_ah/health','image/jpeg','status','../src/main.js','whitelist\x20ensures\x20other\x20urls\x20do\x20not\x20get\x20rendered','2255000nUjhkI','shadow-dom-polyfill-all.html?wc-inject-shadydom=true','ewwIV','Yivaq','ZaqEr','/render/abc','always','renders\x20shadow\x20DOM\x20-\x20polyfill\x20loader','/screenshot/','static','245466OoNmva','setConfig','explicit\x20render\x20event\x20ends\x20early','content-type','aPxEe','NdweH','/render/http://httpstat.us/404','resources'];_0x348d=function(){return _0x5ef130;};return _0x348d();}(function(_0x1df94b,_0x3b8625){const _0x74e957=_0x1781,_0x316b50=_0x1df94b();while(!![]){try{const _0x386527=parseInt(_0x74e957(0xa7))/0x1+parseInt(_0x74e957(0x8c))/0x2+-parseInt(_0x74e957(0x96))/0x3+-parseInt(_0x74e957(0xa6))/0x4+-parseInt(_0x74e957(0x86))/0x5+parseInt(_0x74e957(0xc6))/0x6+-parseInt(_0x74e957(0xbe))/0x7;if(_0x386527===_0x3b8625)break;else _0x316b50['push'](_0x316b50['shift']());}catch(_0x42168f){_0x316b50['push'](_0x316b50['shift']());}}}(_0x348d,0xab075));const request=require(_0x14c61b(0xc1)),path=require(_0x14c61b(0xbf)),test=require('ava'),express=require('express'),app=express();function _0x1781(_0x20d2ac,_0x4efd23){const _0x348d76=_0x348d();return _0x1781=function(_0x1781cf,_0x39e4d4){_0x1781cf=_0x1781cf-0x73;let _0x2b615e=_0x348d76[_0x1781cf];return _0x2b615e;},_0x1781(_0x20d2ac,_0x4efd23);}app['use'](express[_0x14c61b(0x95)](path[_0x14c61b(0x78)](__dirname,_0x14c61b(0x9d))));const appInstances=[],testBase='http://localhost:1234/';process[_0x14c61b(0x7b)][_0x14c61b(0x76)]='development',test[_0x14c61b(0xc2)](async _0x44289f=>{await app['listen'](0x4d2);}),test[_0x14c61b(0xb7)][_0x14c61b(0x92)](async _0x45837d=>{const _0xa9a0c5=_0x14c61b;for(let _0xcf6295 of appInstances){await _0xcf6295[_0xa9a0c5(0xb1)]();}});async function createServer(_0x473c25){const _0x30f3c7=_0x14c61b,_0x3f1591={'JoERZ':_0x30f3c7(0x8a),'adFSG':function(_0xd85363,_0xae4199){return _0xd85363(_0xae4199);}};delete require[_0x30f3c7(0xb2)][require[_0x30f3c7(0x78)](_0x3f1591[_0x30f3c7(0xae)])];const _0x2f34b8=await _0x3f1591['adFSG'](require,_0x30f3c7(0x8a));if(_0x473c25)_0x2f34b8[_0x30f3c7(0x97)](_0x473c25);return await appInstances[_0x30f3c7(0x7f)](_0x2f34b8),request(_0x2f34b8);}test(_0x14c61b(0xbb),async _0x15913a=>{const _0x383d51=_0x14c61b,_0x7377da={'aPxEe':_0x383d51(0x87)},_0x19107f=await createServer(),_0x1971c7=await _0x19107f[_0x383d51(0xc0)](_0x7377da[_0x383d51(0x9a)]);_0x15913a['is'](_0x1971c7[_0x383d51(0x89)],0xc8);}),test(_0x14c61b(0xa8),async _0x414de5=>{const _0x41c65e=_0x14c61b,_0x4ad293={'hyatT':function(_0x17f69b){return _0x17f69b();},'ELABm':function(_0x5a8bf0,_0x8fa60c){return _0x5a8bf0!=_0x8fa60c;},'tbxjy':_0x41c65e(0x82)},_0x2e825f=await _0x4ad293['hyatT'](createServer),_0x191a5f=await _0x2e825f[_0x41c65e(0xc0)](_0x41c65e(0x80)+testBase+_0x41c65e(0xbc));_0x414de5['is'](_0x191a5f[_0x41c65e(0x89)],0xc8),_0x414de5['true'](_0x4ad293['ELABm'](_0x191a5f['text'][_0x41c65e(0xad)](_0x4ad293['tbxjy']),-0x1));}),test(_0x14c61b(0xc4),async _0x38fc1a=>{const _0x532f05=_0x14c61b,_0xd949df={'VolGJ':function(_0xa586d3,_0xda9cf2){return _0xa586d3!=_0xda9cf2;},'ZaqEr':_0x532f05(0x7d)},_0xf9e5ea=await createServer(),_0x65469a=await _0xf9e5ea[_0x532f05(0xc0)](_0x532f05(0x80)+testBase+_0x532f05(0xa4));_0x38fc1a['is'](_0x65469a[_0x532f05(0x89)],0xc8),_0x38fc1a[_0x532f05(0x73)](_0xd949df[_0x532f05(0x77)](_0x65469a['text']['indexOf'](_0xd949df[_0x532f05(0x90)]),-0x1));}),test[_0x14c61b(0xac)]('renders\x20shadow\x20DOM\x20-\x20no\x20polyfill',async _0x457f76=>{const _0xe86079=_0x14c61b,_0x5d71f0={'NdweH':function(_0x52941b){return _0x52941b();},'pkmMw':function(_0x1a9146,_0x481aea){return _0x1a9146!=_0x481aea;}},_0x2fcdfd=await _0x5d71f0[_0xe86079(0x9b)](createServer),_0x3cebe5=await _0x2fcdfd[_0xe86079(0xc0)](_0xe86079(0x80)+testBase+_0xe86079(0xb6));_0x457f76['is'](_0x3cebe5[_0xe86079(0x89)],0xc8),_0x457f76[_0xe86079(0x73)](_0x5d71f0[_0xe86079(0xb0)](_0x3cebe5[_0xe86079(0x75)][_0xe86079(0xad)](_0xe86079(0xb8)),-0x1));}),test(_0x14c61b(0x93),async _0x5f34bd=>{const _0x1281c5=_0x14c61b,_0xf3373f={'RKCSu':function(_0x3e75ab){return _0x3e75ab();},'iJLKK':function(_0x11285d,_0x3ed3a6){return _0x11285d!=_0x3ed3a6;}},_0x1edec4=await _0xf3373f[_0x1281c5(0x74)](createServer),_0x24025b=await _0x1edec4[_0x1281c5(0xc0)](_0x1281c5(0x80)+testBase+'shadow-dom-polyfill-loader.html?wc-inject-shadydom=true');_0x5f34bd['is'](_0x24025b[_0x1281c5(0x89)],0xc8),_0x5f34bd[_0x1281c5(0x73)](_0xf3373f['iJLKK'](_0x24025b[_0x1281c5(0x75)]['indexOf']('shadow-root-text'),-0x1));}),test(_0x14c61b(0xc3),async _0x40dbaf=>{const _0x7be2c8=_0x14c61b,_0x4d8d9e={'Yivaq':function(_0x4e6205){return _0x4e6205();},'IyAcE':function(_0x2c9321,_0x3b9b7b){return _0x2c9321!=_0x3b9b7b;},'MNYSf':_0x7be2c8(0xb8)},_0x55ac74=await _0x4d8d9e[_0x7be2c8(0x8f)](createServer),_0x3d1b42=await _0x55ac74[_0x7be2c8(0xc0)]('/render/'+testBase+_0x7be2c8(0x8d));_0x40dbaf['is'](_0x3d1b42['status'],0xc8),_0x40dbaf[_0x7be2c8(0x73)](_0x4d8d9e[_0x7be2c8(0xba)](_0x3d1b42[_0x7be2c8(0x75)][_0x7be2c8(0xad)](_0x4d8d9e[_0x7be2c8(0x9e)]),-0x1));}),test(_0x14c61b(0x84),async _0x1175e3=>{const _0x2e4cea=_0x14c61b,_0x121b7e={'etGqa':function(_0xe7c6cd,_0x45116b){return _0xe7c6cd!=_0x45116b;},'dmOtM':_0x2e4cea(0x7d),'STQEO':function(_0x4cf7f6,_0x8cedcd){return _0x4cf7f6!=_0x8cedcd;},'HykSV':_0x2e4cea(0xc7)},_0x562413=await createServer(),_0x50e6fc=await _0x562413[_0x2e4cea(0xc0)](_0x2e4cea(0x80)+testBase+_0x2e4cea(0x83));_0x1175e3['is'](_0x50e6fc['status'],0xc8),_0x1175e3['false'](_0x50e6fc[_0x2e4cea(0x75)][_0x2e4cea(0xad)]('script\x20src')!=-0x1),_0x1175e3[_0x2e4cea(0x73)](_0x121b7e[_0x2e4cea(0xa3)](_0x50e6fc[_0x2e4cea(0x75)]['indexOf'](_0x121b7e[_0x2e4cea(0xb5)]),-0x1)),_0x1175e3[_0x2e4cea(0x85)](_0x50e6fc[_0x2e4cea(0x75)][_0x2e4cea(0xad)]('link\x20rel')!=-0x1),_0x1175e3[_0x2e4cea(0x73)](_0x121b7e[_0x2e4cea(0xb4)](_0x50e6fc[_0x2e4cea(0x75)][_0x2e4cea(0xad)](_0x121b7e['HykSV']),-0x1));}),test(_0x14c61b(0xab),async _0x30750d=>{const _0x5d9a20=_0x14c61b,_0x20ebfc={'FtRqq':function(_0x1e6cfa){return _0x1e6cfa();},'TPmQs':'404\x20Not\x20Found'},_0x166770=await _0x20ebfc['FtRqq'](createServer),_0x501c32=await _0x166770[_0x5d9a20(0xc0)](_0x5d9a20(0x9c));_0x30750d['is'](_0x501c32[_0x5d9a20(0x89)],0x194),_0x30750d[_0x5d9a20(0x73)](_0x501c32[_0x5d9a20(0x75)][_0x5d9a20(0xad)](_0x20ebfc[_0x5d9a20(0x81)])!=-0x1);}),test(_0x14c61b(0xa0),async _0x5d56f1=>{const _0x4eafcc=_0x14c61b,_0x656c5f=await createServer(),_0xb70d03=_0x4eafcc(0xb3),_0x38f1b1=await _0x656c5f['get']('/render/'+testBase+_0xb70d03+_0x4eafcc(0x9f));_0x5d56f1['is'](_0x38f1b1['status'],0x190);}),test('http\x20status\x20codes\x20need\x20to\x20be\x20respected\x20from\x20top\x20to\x20bottom',async _0x3a267c=>{const _0x488007=_0x14c61b,_0x2ad864=await createServer(),_0x407d40=_0x488007(0xbd),_0xdcc07d=await _0x2ad864['get'](_0x488007(0x80)+testBase+_0x407d40+_0x488007(0x9f));_0x3a267c['is'](_0xdcc07d['status'],0x191);}),test('screenshot\x20is\x20an\x20image',async _0x2d06ac=>{const _0x11dead=_0x14c61b,_0x1302d9={'ScVhD':function(_0xafa1a3){return _0xafa1a3();},'rGWJL':_0x11dead(0x99),'whzzN':'content-length'},_0x15ca50=await _0x1302d9['ScVhD'](createServer),_0x1ae1f7=await _0x15ca50[_0x11dead(0xc0)](_0x11dead(0x94)+testBase+_0x11dead(0xbc));_0x2d06ac['is'](_0x1ae1f7['status'],0xc8),_0x2d06ac['is'](_0x1ae1f7['header'][_0x1302d9['rGWJL']],_0x11dead(0x88)),_0x2d06ac['is'](_0x1ae1f7[_0x11dead(0xa1)][_0x11dead(0xa2)],parseInt(_0x1ae1f7[_0x11dead(0xaf)][_0x1302d9[_0x11dead(0x7c)]]));}),test(_0x14c61b(0xb9),async _0x25bdd1=>{const _0x21164e=_0x14c61b,_0x55e5c3=await createServer(),_0x50f84c=await _0x55e5c3[_0x21164e(0xc0)](_0x21164e(0x91));_0x25bdd1['is'](_0x50f84c[_0x21164e(0x89)],0x193);}),test(_0x14c61b(0xaa),async _0x1f3a91=>{const _0x51a3d8=_0x14c61b,_0x7de5ce={'FUPES':function(_0x51f01d){return _0x51f01d();}},_0x2498cb=await _0x7de5ce[_0x51a3d8(0xa5)](createServer),_0x2cb40e=await _0x2498cb[_0x51a3d8(0xc0)](_0x51a3d8(0xa9));_0x1f3a91['is'](_0x2cb40e['status'],0x190);}),test(_0x14c61b(0x79),async _0x3ee957=>{const _0x420afd=_0x14c61b,_0x3ede84=await createServer(),_0x25a288=await _0x3ede84[_0x420afd(0xc0)]('/render/file:///dev/fd/0');_0x3ee957['is'](_0x25a288[_0x420afd(0x89)],0x193);}),test(_0x14c61b(0x98),async _0x5a7e49=>{const _0x342e31=_0x14c61b,_0x1eb665={'UGIIO':function(_0x4894bd,_0xb571da){return _0x4894bd!=_0xb571da;},'HVbEu':_0x342e31(0x7a)},_0x2d2817=await createServer(),_0x21fe64=await _0x2d2817[_0x342e31(0xc0)](_0x342e31(0x80)+testBase+'explicit-render-event.html');_0x5a7e49['is'](_0x21fe64[_0x342e31(0x89)],0xc8),_0x5a7e49['true'](_0x1eb665[_0x342e31(0x7e)](_0x21fe64[_0x342e31(0x75)][_0x342e31(0xad)](_0x1eb665[_0x342e31(0xc5)]),-0x1));}),test(_0x14c61b(0x8b),async _0x304f41=>{const _0x572e51=_0x14c61b,_0x1a0f5c={'ewwIV':function(_0x2b4684,_0x1137a9){return _0x2b4684(_0x1137a9);}},_0x10d651=await _0x1a0f5c[_0x572e51(0x8e)](createServer,{'renderOnly':[testBase]});let _0x1de659=await _0x10d651[_0x572e51(0xc0)](_0x572e51(0x80)+testBase+_0x572e51(0xbc));_0x304f41['is'](_0x1de659[_0x572e51(0x89)],0xc8),_0x1de659=await _0x10d651['get']('/render/http://anotherDomain.com'),_0x304f41['is'](_0x1de659[_0x572e51(0x89)],0x193);});