'use strict';const _0x305894=_0x3da1;(function(_0x2a8b92,_0x5c4a6c){const _0x45cd7b=_0x3da1,_0x554f04=_0x2a8b92();while(!![]){try{const _0x4a6970=-parseInt(_0x45cd7b(0x148))/0x1*(parseInt(_0x45cd7b(0x14a))/0x2)+-parseInt(_0x45cd7b(0x126))/0x3*(parseInt(_0x45cd7b(0x13c))/0x4)+parseInt(_0x45cd7b(0x11f))/0x5+parseInt(_0x45cd7b(0x151))/0x6+-parseInt(_0x45cd7b(0x135))/0x7+-parseInt(_0x45cd7b(0x145))/0x8+parseInt(_0x45cd7b(0x156))/0x9*(parseInt(_0x45cd7b(0x124))/0xa);if(_0x4a6970===_0x5c4a6c)break;else _0x554f04['push'](_0x554f04['shift']());}catch(_0x1ad9f1){_0x554f04['push'](_0x554f04['shift']());}}}(_0x2bd5,0x80d25));const request=require(_0x305894(0x12c)),path=require('path'),test=require(_0x305894(0x12f)),express=require(_0x305894(0x136)),app=express();app['use'](express['static'](path['resolve'](__dirname,_0x305894(0x14b))));function _0x2bd5(){const _0xf7f3d5=['header','CYoSR','health\x20check\x20responds\x20correctly','renders\x20basic\x20script','always','lePOK','wQKwX','2436216PLrRYL','content-length','kbjhN','118133jtXzdR','Whiru','10VZvPMC','resources','whitelist\x20ensures\x20other\x20urls\x20do\x20not\x20get\x20rendered','include-script.html','script\x20src','shadow-dom-no-polyfill.html?wc-inject-shadydom=true','http\x20status\x20code\x20should\x20be\x20able\x20to\x20be\x20set\x20via\x20a\x20meta\x20tag','1835298ywbXMj','explicit\x20render\x20event\x20ends\x20early','cBOYo','BEbYX','failing','4833ntadDW','../src/main.js','EDZug','/_ah/health','false','text','injectedElement','?wc-inject-shadydom=true','screenshot\x20is\x20an\x20image','shadow-root-text','content-type','listen','server\x20status\x20code\x20should\x20be\x20forwarded','script\x20tags\x20and\x20link[rel=import]\x20tags\x20are\x20stripped','stop','file\x20url\x20fails','http-meta-status-code-multiple.html','resolve','cache','renders\x20shadow\x20DOM\x20-\x20polyfill\x20loader','unknown\x20url\x20fails','/render/http://httpstat.us/404','xxuFG','404\x20Not\x20Found','indexOf','3694155ISriyD','explicit-render-event.html','LUfxa','GochA','/render/','18470sgAioT','/render/http://anotherDomain.com','69bbUrlS','get','shadow-dom-polyfill-loader.html?wc-inject-shadydom=true','ZabVf','length','element-text','supertest','/screenshot/','http-meta-status-code.html','ava','after','true','image/jpeg','renders\x20script\x20after\x20page\x20load\x20event','http\x20status\x20codes\x20need\x20to\x20be\x20respected\x20from\x20top\x20to\x20bottom','755405ooLaTD','express','async\x20loaded','script-after-load.html','status','FiMzI','WYqlo','87964zsXgSX','basic-script.html'];_0x2bd5=function(){return _0xf7f3d5;};return _0x2bd5();}const appInstances=[],testBase='http://localhost:1234/';test['before'](async _0x3dcad7=>{const _0x424358=_0x305894;await app[_0x424358(0x161)](0x4d2);}),test[_0x305894(0x130)][_0x305894(0x142)](async _0xa5d833=>{const _0x5d5f71=_0x305894;for(let _0x598c0f of appInstances){await _0x598c0f[_0x5d5f71(0x164)]();}});function _0x3da1(_0x37262b,_0x2b21b8){const _0x2bd596=_0x2bd5();return _0x3da1=function(_0x3da1ad,_0x2bd853){_0x3da1ad=_0x3da1ad-0x116;let _0x164f47=_0x2bd596[_0x3da1ad];return _0x164f47;},_0x3da1(_0x37262b,_0x2b21b8);}async function createServer(_0x1d721e){const _0x3b213e=_0x305894,_0x3e3172={'WYqlo':_0x3b213e(0x157)};delete require[_0x3b213e(0x118)][require[_0x3b213e(0x117)](_0x3b213e(0x157))];const _0x15d53e=await require(_0x3e3172[_0x3b213e(0x13b)]);if(_0x1d721e)_0x15d53e['setConfig'](_0x1d721e);return appInstances['push'](_0x15d53e),request(_0x15d53e);}test(_0x305894(0x140),async _0xf33eb7=>{const _0x5af63e=_0x305894,_0x24c76f={'cBOYo':_0x5af63e(0x159)},_0x1d071a=await createServer(),_0x2a1b54=await _0x1d071a['get'](_0x24c76f[_0x5af63e(0x153)]);_0xf33eb7['is'](_0x2a1b54[_0x5af63e(0x139)],0xc8);}),test(_0x305894(0x141),async _0x35bfe7=>{const _0x49f39f=_0x305894,_0x3189bc={'EDZug':function(_0x2c7947){return _0x2c7947();},'WNLSS':function(_0x27bc9d,_0x53d15f){return _0x27bc9d!=_0x53d15f;}},_0x425c5c=await _0x3189bc[_0x49f39f(0x158)](createServer),_0x329022=await _0x425c5c[_0x49f39f(0x127)]('/render/'+testBase+_0x49f39f(0x13d));_0x35bfe7['is'](_0x329022['status'],0xc8),_0x35bfe7[_0x49f39f(0x131)](_0x3189bc['WNLSS'](_0x329022[_0x49f39f(0x15b)][_0x49f39f(0x11e)]('document-title'),-0x1));}),test(_0x305894(0x133),async _0x3b5e73=>{const _0x47f08c=_0x305894,_0x47a80e=await createServer(),_0x39c22a=await _0x47a80e[_0x47f08c(0x127)](_0x47f08c(0x123)+testBase+_0x47f08c(0x138));_0x3b5e73['is'](_0x39c22a[_0x47f08c(0x139)],0xc8),_0x3b5e73[_0x47f08c(0x131)](_0x39c22a[_0x47f08c(0x15b)][_0x47f08c(0x11e)](_0x47f08c(0x15c))!=-0x1);}),test[_0x305894(0x155)]('renders\x20shadow\x20DOM\x20-\x20no\x20polyfill',async _0x2094f1=>{const _0x6195d7=_0x305894,_0x25dc88={'Whiru':function(_0x57bc2e){return _0x57bc2e();},'xxuFG':function(_0x132e2f,_0x12c921){return _0x132e2f!=_0x12c921;}},_0x16c409=await _0x25dc88[_0x6195d7(0x149)](createServer),_0x40d266=await _0x16c409[_0x6195d7(0x127)](_0x6195d7(0x123)+testBase+_0x6195d7(0x14f));_0x2094f1['is'](_0x40d266[_0x6195d7(0x139)],0xc8),_0x2094f1[_0x6195d7(0x131)](_0x25dc88[_0x6195d7(0x11c)](_0x40d266[_0x6195d7(0x15b)][_0x6195d7(0x11e)](_0x6195d7(0x15f)),-0x1));}),test(_0x305894(0x119),async _0x5cfa60=>{const _0x1e3a01=_0x305894,_0x27adac=await createServer(),_0x3b1e4c=await _0x27adac['get'](_0x1e3a01(0x123)+testBase+_0x1e3a01(0x128));_0x5cfa60['is'](_0x3b1e4c[_0x1e3a01(0x139)],0xc8),_0x5cfa60['true'](_0x3b1e4c[_0x1e3a01(0x15b)][_0x1e3a01(0x11e)](_0x1e3a01(0x15f))!=-0x1);}),test('renders\x20shadow\x20DOM\x20-\x20webcomponents-lite.js\x20polyfill',async _0x3a5e34=>{const _0x15f8ed=_0x305894,_0x47f5b3={'LUfxa':function(_0xb40f11,_0x4553e8){return _0xb40f11!=_0x4553e8;},'wQKwX':_0x15f8ed(0x15f)},_0x29820d=await createServer(),_0x216eaf=await _0x29820d[_0x15f8ed(0x127)](_0x15f8ed(0x123)+testBase+'shadow-dom-polyfill-all.html?wc-inject-shadydom=true');_0x3a5e34['is'](_0x216eaf[_0x15f8ed(0x139)],0xc8),_0x3a5e34['true'](_0x47f5b3[_0x15f8ed(0x121)](_0x216eaf['text'][_0x15f8ed(0x11e)](_0x47f5b3[_0x15f8ed(0x144)]),-0x1));}),test(_0x305894(0x163),async _0x2f6068=>{const _0x1e14ca=_0x305894,_0x12221d={'axAyP':function(_0x59c308){return _0x59c308();},'FiMzI':function(_0x3a8891,_0x34ffd4){return _0x3a8891!=_0x34ffd4;},'JBkXi':function(_0x3245d5,_0x5650a1){return _0x3245d5!=_0x5650a1;},'pbOmn':'link\x20rel'},_0x141f9d=await _0x12221d['axAyP'](createServer),_0x1a2b42=await _0x141f9d[_0x1e14ca(0x127)](_0x1e14ca(0x123)+testBase+_0x1e14ca(0x14d));_0x2f6068['is'](_0x1a2b42[_0x1e14ca(0x139)],0xc8),_0x2f6068[_0x1e14ca(0x15a)](_0x1a2b42[_0x1e14ca(0x15b)][_0x1e14ca(0x11e)](_0x1e14ca(0x14e))!=-0x1),_0x2f6068[_0x1e14ca(0x131)](_0x12221d[_0x1e14ca(0x13a)](_0x1a2b42[_0x1e14ca(0x15b)]['indexOf']('injectedElement'),-0x1)),_0x2f6068['false'](_0x12221d['JBkXi'](_0x1a2b42['text'][_0x1e14ca(0x11e)](_0x12221d['pbOmn']),-0x1)),_0x2f6068['true'](_0x1a2b42[_0x1e14ca(0x15b)][_0x1e14ca(0x11e)](_0x1e14ca(0x12b))!=-0x1);}),test(_0x305894(0x162),async _0x3be922=>{const _0x2e9c0e=_0x305894,_0x1031f7={'onyDg':function(_0x2c239c){return _0x2c239c();}},_0x5ebe41=await _0x1031f7['onyDg'](createServer),_0x19853c=await _0x5ebe41[_0x2e9c0e(0x127)](_0x2e9c0e(0x11b));_0x3be922['is'](_0x19853c['status'],0x194),_0x3be922[_0x2e9c0e(0x131)](_0x19853c[_0x2e9c0e(0x15b)][_0x2e9c0e(0x11e)](_0x2e9c0e(0x11d))!=-0x1);}),test(_0x305894(0x150),async _0x22e8e8=>{const _0x2f9840=_0x305894,_0x8b5a28={'lePOK':function(_0xc958ac){return _0xc958ac();}},_0x491823=await _0x8b5a28[_0x2f9840(0x143)](createServer),_0x5aef7a=_0x2f9840(0x12e),_0x37af21=await _0x491823[_0x2f9840(0x127)](_0x2f9840(0x123)+testBase+_0x5aef7a+_0x2f9840(0x15d));_0x22e8e8['is'](_0x37af21[_0x2f9840(0x139)],0x190);}),test(_0x305894(0x134),async _0x48772c=>{const _0x373337=_0x305894,_0x4f7312={'yOLjS':_0x373337(0x116)},_0xf6c7ea=await createServer(),_0x204fc=_0x4f7312['yOLjS'],_0x58f5d1=await _0xf6c7ea[_0x373337(0x127)](_0x373337(0x123)+testBase+_0x204fc+_0x373337(0x15d));_0x48772c['is'](_0x58f5d1[_0x373337(0x139)],0x191);}),test(_0x305894(0x15e),async _0x20208e=>{const _0x383e4e=_0x305894,_0x1f51f5={'GochA':_0x383e4e(0x160),'CYoSR':_0x383e4e(0x146)},_0x11d317=await createServer(),_0x3267fb=await _0x11d317['get'](_0x383e4e(0x12d)+testBase+_0x383e4e(0x13d));_0x20208e['is'](_0x3267fb['status'],0xc8),_0x20208e['is'](_0x3267fb['header'][_0x1f51f5[_0x383e4e(0x122)]],_0x383e4e(0x132)),_0x20208e['is'](_0x3267fb['body'][_0x383e4e(0x12a)],parseInt(_0x3267fb[_0x383e4e(0x13e)][_0x1f51f5[_0x383e4e(0x13f)]]));}),test('invalid\x20url\x20fails',async _0x31d346=>{const _0x2ff464=_0x305894,_0x1d63e7=await createServer(),_0x41a941=await _0x1d63e7[_0x2ff464(0x127)]('/render/abc');_0x31d346['is'](_0x41a941[_0x2ff464(0x139)],0x193);}),test(_0x305894(0x11a),async _0x3ac214=>{const _0x36d749=_0x305894,_0x7ac178={'kbjhN':function(_0xf63ce){return _0xf63ce();}},_0x1d6817=await _0x7ac178[_0x36d749(0x147)](createServer),_0x46b9ff=await _0x1d6817[_0x36d749(0x127)]('/render/http://unknown.blah.com');_0x3ac214['is'](_0x46b9ff[_0x36d749(0x139)],0x190);}),test(_0x305894(0x165),async _0x5b29d1=>{const _0x2fc866=_0x305894,_0x46e370=await createServer(),_0x14cc1d=await _0x46e370[_0x2fc866(0x127)]('/render/file:///dev/fd/0');_0x5b29d1['is'](_0x14cc1d[_0x2fc866(0x139)],0x193);}),test(_0x305894(0x152),async _0x425abf=>{const _0x3ecd9d=_0x305894,_0x1a0b84={'ZabVf':function(_0x179a2d){return _0x179a2d();},'kuKMv':function(_0x1fbe80,_0x431f8d){return _0x1fbe80!=_0x431f8d;},'nDxlo':_0x3ecd9d(0x137)},_0x1d58f1=await _0x1a0b84[_0x3ecd9d(0x129)](createServer),_0x17fa45=await _0x1d58f1[_0x3ecd9d(0x127)](_0x3ecd9d(0x123)+testBase+_0x3ecd9d(0x120));_0x425abf['is'](_0x17fa45['status'],0xc8),_0x425abf[_0x3ecd9d(0x131)](_0x1a0b84['kuKMv'](_0x17fa45[_0x3ecd9d(0x15b)]['indexOf'](_0x1a0b84['nDxlo']),-0x1));}),test(_0x305894(0x14c),async _0x48e9c3=>{const _0x4e2022=_0x305894,_0x12f288={'BEbYX':function(_0x5a1f05,_0x413eb4){return _0x5a1f05(_0x413eb4);}},_0x450c03=await _0x12f288[_0x4e2022(0x154)](createServer,{'renderOnly':[testBase]});let _0x1cf234=await _0x450c03[_0x4e2022(0x127)](_0x4e2022(0x123)+testBase+_0x4e2022(0x13d));_0x48e9c3['is'](_0x1cf234['status'],0xc8),_0x1cf234=await _0x450c03[_0x4e2022(0x127)](_0x4e2022(0x125)),_0x48e9c3['is'](_0x1cf234[_0x4e2022(0x139)],0x193);});