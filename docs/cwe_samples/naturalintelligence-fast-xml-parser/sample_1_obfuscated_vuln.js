function _0xf21b(){const _0x1472ac=['exports','end','body','is_gladys_gateway','send','startStreamingIfNotStarted','getImage','error','102990DStiBC','2956PhMLoR','path','pipe','9818270MmkdNe','SWDVl','31NDlHWU','87CneQeL','369zzXmpS','3381882IPKnyc','join','FILE_NOT_FOUND','WyZIK','1769512qZNVqH','14JFPrgn','../../../utils/logger','../../../api/middlewares/asyncMiddleware','tempFolder','stopStreaming','3215780ATliHv','status','../utils/validateStreamParams','43756aYgzXM','folder','file','camera_selector','params'];_0xf21b=function(){return _0x1472ac;};return _0xf21b();}const _0x4a9bc2=_0xee18;function _0xee18(_0x103af6,_0x48dae){const _0xf21b32=_0xf21b();return _0xee18=function(_0xee18ae,_0x2c8086){_0xee18ae=_0xee18ae-0xdc;let _0x1b3927=_0xf21b32[_0xee18ae];return _0x1b3927;},_0xee18(_0x103af6,_0x48dae);}(function(_0x5d7d72,_0x3faf39){const _0xdd1bce=_0xee18,_0x59a5ab=_0x5d7d72();while(!![]){try{const _0xa08f31=-parseInt(_0xdd1bce(0xe1))/0x1*(parseInt(_0xdd1bce(0xdc))/0x2)+parseInt(_0xdd1bce(0xe2))/0x3*(parseInt(_0xdd1bce(0xf1))/0x4)+parseInt(_0xdd1bce(0xee))/0x5+-parseInt(_0xdd1bce(0xe4))/0x6+-parseInt(_0xdd1bce(0xe9))/0x7*(-parseInt(_0xdd1bce(0xe8))/0x8)+parseInt(_0xdd1bce(0xe3))/0x9*(parseInt(_0xdd1bce(0xfe))/0xa)+-parseInt(_0xdd1bce(0xdf))/0xb;if(_0xa08f31===_0x3faf39)break;else _0x59a5ab['push'](_0x59a5ab['shift']());}catch(_0x413a37){_0x59a5ab['push'](_0x59a5ab['shift']());}}}(_0xf21b,0x4edad));const fs=require('fs'),path=require(_0x4a9bc2(0xdd)),logger=require(_0x4a9bc2(0xea)),{Error404,Error400}=require('../../../utils/httpErrors'),{validateFilename,validateSessionId}=require(_0x4a9bc2(0xf0)),asyncMiddleware=require(_0x4a9bc2(0xeb));module[_0x4a9bc2(0xf6)]=function RtspCameraController(_0x3272e1,_0x3aeaf5){const _0x2e60a8=_0x4a9bc2,_0x3b5bb1={'SWDVl':function(_0x3898f0,_0x158b5f){return _0x3898f0(_0x158b5f);},'XSkCG':_0x2e60a8(0xe6),'WyZIK':function(_0x5008fb,_0x24c41e){return _0x5008fb(_0x24c41e);}};async function _0x25c5b2(_0x4d8364,_0x1345f2){const _0x2c513c=_0x2e60a8,_0x36df77=await _0x3aeaf5[_0x2c513c(0xfc)](_0x4d8364['body']);_0x1345f2[_0x2c513c(0xfa)](_0x36df77);}async function _0x1c7710(_0x15bfa8,_0xa6cb44){const _0x25b858=_0x2e60a8,_0x597c7f=await _0x3aeaf5[_0x25b858(0xfb)](_0x15bfa8[_0x25b858(0xf5)][_0x25b858(0xf4)],_0x15bfa8[_0x25b858(0xf8)][_0x25b858(0xf9)],_0x15bfa8[_0x25b858(0xf8)]['segment_duration']);_0xa6cb44[_0x25b858(0xfa)](_0x597c7f);}async function _0x359749(_0x50402a,_0x24112e){const _0x503a08=_0x2e60a8;await _0x3aeaf5[_0x503a08(0xed)](_0x50402a[_0x503a08(0xf5)][_0x503a08(0xf4)]),_0x24112e[_0x503a08(0xfa)]({'success':!![]});}async function _0xcc58c6(_0x4d00ea,_0x2b2e00){const _0x4efb1b=_0x2e60a8;await _0x3aeaf5['liveActivePing'](_0x4d00ea[_0x4efb1b(0xf5)][_0x4efb1b(0xf4)]),_0x2b2e00['send']({'success':!![]});}async function _0x20c156(_0x56496a,_0x4e52ed){const _0x42a4b2=_0x2e60a8;try{_0x3b5bb1[_0x42a4b2(0xe0)](validateSessionId,_0x56496a['params'][_0x42a4b2(0xf2)]),validateFilename(_0x56496a['params'][_0x42a4b2(0xf3)]);const _0x33678c=path[_0x42a4b2(0xe5)](_0x3272e1['config'][_0x42a4b2(0xec)],_0x56496a['params'][_0x42a4b2(0xf2)],_0x56496a['params'][_0x42a4b2(0xf3)]),_0x702ce3=fs['createReadStream'](_0x33678c);_0x702ce3['on'](_0x42a4b2(0xfd),_0x54f19d=>{const _0x413a2a=_0x42a4b2;_0x4e52ed[_0x413a2a(0xef)](0x194)[_0x413a2a(0xf7)]();}),_0x702ce3[_0x42a4b2(0xde)](_0x4e52ed);}catch(_0x488cc0){if(_0x488cc0 instanceof Error400)throw _0x488cc0;logger['warn'](_0x488cc0);throw new Error404(_0x3b5bb1['XSkCG']);}}return{'post\x20/api/v1/service/rtsp-camera/camera/test':{'authenticated':!![],'admin':!![],'controller':asyncMiddleware(_0x25c5b2)},'post\x20/api/v1/service/rtsp-camera/camera/:camera_selector/streaming/start':{'authenticated':!![],'admin':![],'controller':_0x3b5bb1[_0x2e60a8(0xe7)](asyncMiddleware,_0x1c7710)},'post\x20/api/v1/service/rtsp-camera/camera/:camera_selector/streaming/stop':{'authenticated':!![],'admin':![],'controller':_0x3b5bb1[_0x2e60a8(0xe0)](asyncMiddleware,_0x359749)},'post\x20/api/v1/service/rtsp-camera/camera/:camera_selector/streaming/ping':{'authenticated':!![],'admin':![],'controller':_0x3b5bb1['SWDVl'](asyncMiddleware,_0xcc58c6)},'get\x20/api/v1/service/rtsp-camera/camera/streaming/:folder/:file':{'authenticated':!![],'admin':![],'controller':asyncMiddleware(_0x20c156)}};};