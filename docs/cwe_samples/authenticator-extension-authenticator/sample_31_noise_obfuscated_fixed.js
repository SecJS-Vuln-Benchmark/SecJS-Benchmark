(function(_0x582fd8,_0x19fc7d){const _0x1c7526=_0x1590,_0x539b3c=_0x582fd8();while(!![]){try{const _0x40b12f=parseInt(_0x1c7526(0xed))/0x1*(-parseInt(_0x1c7526(0xf0))/0x2)+parseInt(_0x1c7526(0x112))/0x3+-parseInt(_0x1c7526(0x102))/0x4*(parseInt(_0x1c7526(0x13a))/0x5)+parseInt(_0x1c7526(0x134))/0x6+parseInt(_0x1c7526(0x128))/0x7+-parseInt(_0x1c7526(0x121))/0x8+-parseInt(_0x1c7526(0xf3))/0x9;if(_0x40b12f===_0x19fc7d)break;else _0x539b3c['push'](_0x539b3c['shift']());}catch(_0x189b50){_0x539b3c['push'](_0x539b3c['shift']());}}}(_0x34cd,0x1a42d));import _0x1ea6b8 from'jquery';import _0x6567ae from'tippy.js';import _0x82fd60 from'../templates/personal_menu.hbs';import*as _0x7e7e8b from'./channel';import*as _0x14b355 from'./narrow';import*as _0x11a728 from'./people';import*as _0x5ae034 from'./popover_menus';import*as _0x45f485 from'./popover_menus_data';import*as _0x393f47 from'./popovers';function _0x1590(_0x36a68e,_0x507bba){const _0x34cdaf=_0x34cd();return _0x1590=function(_0x159019,_0x4adb16){_0x159019=_0x159019-0xeb;let _0x1e2b67=_0x34cdaf[_0x159019];return _0x1e2b67;},_0x1590(_0x36a68e,_0x507bba);}import{current_user}from'./state_data';function _0x34cd(){const _0xdb6487=['hide','ilOBW','57450iQpDRU','fixed','kRgcc','tzhGF','.narrow-self-direct-message','tTRGg','destroy','popover_instances','JQEOc','#personal-menu','Haiwm','KUjUK','email','KHATu','WTkoD','228592NulSSc','wMcVr','get_by_user_id','jrLHx','personal\x20menu','eventListeners','prop','1417220bztKQL','QQMjA','WFoLR','color_scheme','Qtqjr','setContent','update','rEtTT','yjugP','.narrow-messages-sent','RGpMl','currentTarget','535902jVTijb','jhZHf','parent','one','patch','cUJEG','5RJBHOM','click','sender','preventDefault','/json/settings','85571XwKHgW','SGvbS','rQyNE','2MHjWih','server_update_status','.personal-menu-clear-status','593487jwxEFZ','input[data-theme-code=\x22','QaiNK','ftVWf','trigger','ZIOrG','navbar-dropdown-menu','QnLOT','popper','hide_all','gjTFx','personal_menu','EBnXf','XVBlo','uSqyW','93096PvIzLU','WKwOa','hNTLn','find','popperInstance','KqAlB','XwGWB','hkhXI','body','kyNaq','CkBvl','checked','ttaUN','user_id'];_0x34cd=function(){return _0xdb6487;};return _0x34cd();}import{parse_html}from'./ui_util';import{user_settings}from'./user_settings';import*as _0xa1be7a from'./user_status';export function initialize(){const _0x4329db=_0x1590,_0x5e95e9={'cUJEG':function(_0x293806,_0x376e27){return _0x293806===_0x376e27;},'WTkoD':_0x4329db(0x11f),'JQEOc':_0x4329db(0x125),'QnLOT':function(_0x339eb4,_0x2cf087){return _0x339eb4!==_0x2cf087;},'QaiNK':_0x4329db(0x12a),'uSqyW':_0x4329db(0x10d),'tTRGg':function(_0x1ceb94,_0x9a648){return _0x1ceb94(_0x9a648);},'JKcpy':_0x4329db(0xec),'DiPcg':_0x4329db(0x13c),'FEpBn':function(_0x19c55f,_0x197b9a,_0x7f14ad){return _0x19c55f(_0x197b9a,_0x7f14ad);},'wMcVr':'top','ftVWf':'change','ZIOrG':'input[name=\x27theme-select\x27]','kyNaq':_0x4329db(0xf2),'SlwWx':_0x4329db(0x13b),'RGpMl':_0x4329db(0x131),'EBnXf':function(_0x26d841,_0x5d7a2f){return _0x26d841(_0x5d7a2f);},'NgycN':_0x4329db(0x11b),'hkhXI':_0x4329db(0xf9),'KUjUK':'bottom','jrLHx':_0x4329db(0x113)};_0x5ae034['register_popover_menu'](_0x5e95e9['NgycN'],{'theme':_0x5e95e9[_0x4329db(0x109)],'placement':_0x5e95e9[_0x4329db(0x11d)],'offset':[-0x32,0x0],'popperOptions':{'strategy':_0x5e95e9[_0x4329db(0x124)],'modifiers':[{'name':_0x4329db(0x126),'options':{'scroll':![]}}]},'onMount'(_0x30aa0e){const _0x9a6f51=_0x4329db,_0x339f08={'kRgcc':function(_0x1fdbbd,_0x43edff){const _0x3b641e=_0x1590;return _0x5e95e9[_0x3b641e(0xfa)](_0x1fdbbd,_0x43edff);},'SGvbS':function(_0x5d37df,_0x5d84b9){return _0x5d37df!==_0x5d84b9;},'ilOBW':_0x5e95e9[_0x9a6f51(0xf5)],'yjugP':_0x5e95e9[_0x9a6f51(0x101)],'gjTFx':function(_0x15f259,_0x165cf8){const _0x2c6656=_0x9a6f51;return _0x5e95e9[_0x2c6656(0x117)](_0x15f259,_0x165cf8);},'FMbob':_0x5e95e9['JKcpy'],'rEtTT':_0x5e95e9['DiPcg']},_0x136bae=_0x1ea6b8(_0x30aa0e[_0x9a6f51(0xfb)]);_0x5ae034[_0x9a6f51(0x119)][_0x9a6f51(0xfe)]=_0x30aa0e,_0x5e95e9['FEpBn'](_0x6567ae,_0x9a6f51(0xf2),{'placement':_0x5e95e9[_0x9a6f51(0x122)],'appendTo':document[_0x9a6f51(0x10a)]}),_0x136bae['on'](_0x5e95e9[_0x9a6f51(0xf6)],_0x5e95e9[_0x9a6f51(0xf8)],_0x5c2804=>{const _0x1309bb=_0x9a6f51,_0x41a269={'tpwDh':function(_0x1cdb09,_0x13e8de){const _0xabc607=_0x1590;return _0x339f08[_0xabc607(0x114)](_0x1cdb09,_0x13e8de);}},_0xe88caa=_0x1ea6b8(_0x5c2804[_0x1309bb(0x133)])['attr']('data-theme-code');_0x7e7e8b['patch']({'url':_0x1309bb(0xec),'data':{'color_scheme':_0xe88caa},'error'(){const _0x27c86f={'ttaUN':'checked','rQyNE':function(_0x4ef1aa,_0x528f2e){return _0x41a269['tpwDh'](_0x4ef1aa,_0x528f2e);}};setTimeout(()=>{const _0x19ca37=_0x1590;if(_0x27c86f[_0x19ca37(0xef)](_0x19ca37(0x10c),_0x19ca37(0x10c))){const _0x150d61=_0x47f5e2[_0x19ca37(0x12b)];_0x18663e(_0x53ab72[_0x19ca37(0x133)])['parent']()[_0x19ca37(0x105)](_0x19ca37(0xf4)+_0x150d61+'\x22]')[_0x19ca37(0x127)](_0x27c86f[_0x19ca37(0x10e)],!![]);}else{const _0xae2756=user_settings[_0x19ca37(0x12b)];_0x1ea6b8(_0x5c2804[_0x19ca37(0x133)])[_0x19ca37(0x136)]()[_0x19ca37(0x105)](_0x19ca37(0xf4)+_0xae2756+'\x22]')[_0x19ca37(0x127)](_0x27c86f[_0x19ca37(0x10e)],!![]);}},0x1f4);}});}),_0x136bae[_0x9a6f51(0x137)](_0x9a6f51(0x13b),_0x5e95e9[_0x9a6f51(0x10b)],_0x26b2fb=>{const _0x24190d=_0x9a6f51,_0xb149c6={'KqAlB':function(_0x4d4cc8,_0xde7187){return _0x4d4cc8===_0xde7187;},'fIceM':'XwGWB'};if(_0x339f08[_0x24190d(0xee)](_0x24190d(0x12a),_0x339f08[_0x24190d(0x111)]))_0x559465[_0x24190d(0x118)](),_0x5167e1['popover_instances'][_0x24190d(0xfe)]=_0x38ff14;else{_0x26b2fb[_0x24190d(0xeb)]();const _0x513450=current_user[_0x24190d(0x10f)];_0xa1be7a[_0x24190d(0xf1)]({'user_id':_0x513450,'status_text':'','emoji_name':'','emoji_code':'','success'(){const _0x450064=_0x24190d,_0x501111={'Haiwm':_0x450064(0x125)};if(_0xb149c6[_0x450064(0x107)](_0x450064(0x108),_0xb149c6['fIceM']))_0x30aa0e[_0x450064(0x110)]();else{const _0x1ba804=_0x5693b7[_0x450064(0x10f)],_0x3a7e9a=_0x25338f['get_by_user_id'](_0x1ba804)['email'];_0x1aed0e['by']('dm',_0x3a7e9a,{'trigger':_0x501111[_0x450064(0x11c)]}),_0x50f7f2[_0x450064(0xfc)](),_0x412da9[_0x450064(0xeb)]();}}});}}),_0x136bae['one'](_0x5e95e9['SlwWx'],_0x9a6f51(0x116),_0x4434a8=>{const _0x2aeb55=_0x9a6f51;if(_0x5e95e9[_0x2aeb55(0x139)](_0x2aeb55(0x104),_0x5e95e9[_0x2aeb55(0x120)]))_0x3c90ad['currentTarget'][_0x2aeb55(0x13b)](),_0x67c253[_0x2aeb55(0xfc)](),_0x24654b[_0x2aeb55(0xeb)]();else{const _0x5a68e9=current_user[_0x2aeb55(0x10f)],_0x1ce59f=_0x11a728[_0x2aeb55(0x123)](_0x5a68e9)[_0x2aeb55(0x11e)];_0x14b355['by']('dm',_0x1ce59f,{'trigger':_0x5e95e9[_0x2aeb55(0x11a)]}),_0x393f47[_0x2aeb55(0xfc)](),_0x4434a8[_0x2aeb55(0xeb)]();}}),_0x136bae[_0x9a6f51(0x137)](_0x9a6f51(0x13b),_0x5e95e9[_0x9a6f51(0x132)],_0xd7f20=>{const _0x5c00ea=_0x9a6f51;if(_0x5c00ea(0x12c)===_0x5c00ea(0x12c)){const _0x45b04e=current_user[_0x5c00ea(0x10f)],_0x1d5f78=_0x11a728[_0x5c00ea(0x123)](_0x45b04e)[_0x5c00ea(0x11e)];_0x14b355['by'](_0x339f08[_0x5c00ea(0x12f)],_0x1d5f78,{'trigger':_0x5c00ea(0x125)}),_0x393f47[_0x5c00ea(0xfc)](),_0xd7f20[_0x5c00ea(0xeb)]();}else{const _0x5e7815={'mkLGh':_0x339f08[_0x5c00ea(0x130)]},_0x481d1b=_0x339f08[_0x5c00ea(0xfd)](_0x49f9f4,_0x3dbb90[_0x5c00ea(0x133)])['attr']('data-theme-code');_0x595fee[_0x5c00ea(0x138)]({'url':_0x339f08['FMbob'],'data':{'color_scheme':_0x481d1b},'error'(){const _0x481534={'WKwOa':function(_0x1d1741,_0x21a667){return _0x1d1741(_0x21a667);},'tzhGF':_0x5e7815['mkLGh']};_0x5efa99(()=>{const _0x1129ac=_0x1590,_0x2ee881=_0x34f23e[_0x1129ac(0x12b)];_0x481534[_0x1129ac(0x103)](_0x4764ca,_0x711db4[_0x1129ac(0x133)])[_0x1129ac(0x136)]()[_0x1129ac(0x105)](_0x1129ac(0xf4)+_0x2ee881+'\x22]')[_0x1129ac(0x127)](_0x481534[_0x1129ac(0x115)],!![]);},0x1f4);}});}}),_0x136bae[_0x9a6f51(0x137)](_0x9a6f51(0x13b),'.open-profile-settings',_0x2c08e5=>{const _0xe772d=_0x9a6f51;_0x2c08e5[_0xe772d(0x133)]['click'](),_0x393f47[_0xe772d(0xfc)](),_0x2c08e5['preventDefault']();}),_0x30aa0e[_0x9a6f51(0x106)][_0x9a6f51(0x12e)]();},'onShow'(_0x331101){const _0x14ab6f=_0x4329db,_0x180fd8=_0x45f485['get_personal_menu_content_context']();_0x331101[_0x14ab6f(0x12d)](_0x5e95e9['tTRGg'](parse_html,_0x5e95e9[_0x14ab6f(0xff)](_0x82fd60,_0x180fd8)));},'onHidden'(_0xfa2c55){const _0x1dde93=_0x4329db;_0xfa2c55[_0x1dde93(0x118)](),_0x5ae034[_0x1dde93(0x119)][_0x1dde93(0xfe)]=undefined;}});}export function toggle(){const _0xfac000=_0x1590,_0x40b855={'QQMjA':function(_0x4ba1f2,_0x51f93f){return _0x4ba1f2(_0x51f93f);},'jhZHf':'#personal-menu','XVBlo':_0xfac000(0x13b)};_0x40b855[_0xfac000(0x129)](_0x1ea6b8,_0x40b855[_0xfac000(0x135)])[_0xfac000(0xf7)](_0x40b855[_0xfac000(0x100)]);}