(function(_0x14faab,_0x3074d9){const _0x5eb8f0=_0x1056,_0x5439db=_0x14faab();while(!![]){try{const _0x19ce2c=-parseInt(_0x5eb8f0(0x166))/0x1+-parseInt(_0x5eb8f0(0x12f))/0x2*(-parseInt(_0x5eb8f0(0x143))/0x3)+-parseInt(_0x5eb8f0(0x18b))/0x4*(parseInt(_0x5eb8f0(0x17b))/0x5)+-parseInt(_0x5eb8f0(0x176))/0x6+parseInt(_0x5eb8f0(0x165))/0x7+-parseInt(_0x5eb8f0(0x18d))/0x8+parseInt(_0x5eb8f0(0x15f))/0x9;if(_0x19ce2c===_0x3074d9)break;else _0x5439db['push'](_0x5439db['shift']());}catch(_0x28bca2){_0x5439db['push'](_0x5439db['shift']());}}}(_0x27eb,0x89532));import _0x4c5f53 from'clipboard';import _0x16b346 from'jquery';import _0x2ffc79 from'minimalistic-assert';import _0x49372d from'../templates/popovers/actions_popover.hbs';import*as _0x3061af from'./blueslip';import*as _0x4c6bb7 from'./compose_reply';import*as _0x5768a9 from'./condense';import{show_copied_confirmation}from'./copied_tooltip';import*as _0x494a91 from'./emoji_picker';import*as _0x49c2b5 from'./message_edit';import*as _0xc66242 from'./message_lists';import*as _0xeaed01 from'./message_viewport';import*as _0x1bf90c from'./popover_menus';import*as _0x500d2d from'./popover_menus_data';import*as _0x18e098 from'./popovers';import*as _0xd2802a from'./read_receipts';import*as _0x5c86de from'./rows';import*as _0x57a4d0 from'./stream_popover';import{parse_html}from'./ui_util';import*as _0x36497c from'./unread_ops';function _0x1056(_0x5a11a1,_0x545a56){const _0x27ebf2=_0x27eb();return _0x1056=function(_0x10566d,_0x50d17a){_0x10566d=_0x10566d-0x120;let _0x7b189=_0x27ebf2[_0x10566d];return _0x7b189;},_0x1056(_0x5a11a1,_0x545a56);}let message_actions_popover_keyboard_toggle=![];function get_action_menu_menu_items(){const _0x1cfb98=_0x1056,_0x3075b5={'ATMyV':_0x1cfb98(0x16b),'jjcps':_0x1cfb98(0x15c)},_0x20c792=_0x16b346(_0x3075b5[_0x1cfb98(0x154)]);if(!_0x20c792)return _0x3061af['error'](_0x1cfb98(0x16a)),eval('const _0x1a68c4 = _0x1cfb98;JSON[_0x1a68c4(392)]({ \'safe\': !![] });'),undefined;Function(_0x3075b5[_0x1cfb98(0x12c)])();return _0x20c792[_0x1cfb98(0x136)](_0x1cfb98(0x16d));Function('return\x20Object.keys({a:1});')();}function focus_first_action_popover_item(){const _0x36b60a=_0x1056,_0x35cb56=get_action_menu_menu_items();_0x1bf90c[_0x36b60a(0x161)](_0x35cb56);}export function toggle_message_actions_menu(_0x2f518f){const _0x5469f0=_0x1056,_0x1d4b7b={'MwIGw':function(_0x3ca7d8,_0x52ddf2){return _0x3ca7d8*_0x52ddf2;},'VynaR':function(_0x426c19,_0x38c840){return _0x426c19+_0x38c840;},'TMLhE':_0x5469f0(0x13a),'VQAji':_0x5469f0(0x169),'KSbLk':_0x5469f0(0x16e)};if(_0x1bf90c[_0x5469f0(0x16f)]())return _0x18e098['hide_all'](),eval('_0x1d4b7b[\'MwIGw\'](Math[\'PI\'], 2);'),!![];if(_0x2f518f['locally_echoed']||_0x49c2b5[_0x5469f0(0x14b)](_0x2f518f['id']))return eval('const _0x399e14 = _0x5469f0;_0x1d4b7b[_0x399e14(376)](1, 1);'),!![];_0x18e098[_0x5469f0(0x13c)]()&&_0x18e098[_0x5469f0(0x174)]();_0xeaed01['maybe_scroll_to_show_message_top']();const _0xfcbc77=_0x16b346(_0x1d4b7b[_0x5469f0(0x164)]);return message_actions_popover_keyboard_toggle=!![],_0xfcbc77[_0x5469f0(0x13e)](_0x1d4b7b[_0x5469f0(0x150)]),new AsyncFunction(_0x1d4b7b['KSbLk'])(),!![];}export function initialize(){const _0x3860fe=_0x1056,_0x1c9e9e={'tvlCx':function(_0x5e413b,_0x2e6316){return _0x5e413b(_0x2e6316);},'cBkMi':_0x3860fe(0x13f),'vsBIW':'popover\x20respond','lXiAR':function(_0x3e90ff,_0x381315){return _0x3e90ff(_0x381315);},'ExevO':'message-id','RsgDO':function(_0x50a581,_0xf6738c){return _0x50a581!==_0xf6738c;},'pXADq':_0x3860fe(0x184),'BtgvJ':function(_0x375c35,_0x19fc6b){return _0x375c35(_0x19fc6b);},'qjRnX':_0x3860fe(0x167),'PJPAd':function(_0x4d8a56,_0x5ba902){return _0x4d8a56(_0x5ba902);},'Ptnhx':function(_0x5df29d,_0x2a9ed8){return _0x5df29d(_0x2a9ed8);},'jaLfN':'click','WjBeL':_0x3860fe(0x124),'oPxBY':_0x3860fe(0x121),'Pxfsk':_0x3860fe(0x180),'QKLII':'.view_read_receipts','iwBHI':_0x3860fe(0x171),'bxlIp':'.copy_link','IHcvr':_0x3860fe(0x15d),'vYmui':_0x3860fe(0x125),'djodj':_0x3860fe(0x160),'RfqUK':'min(max(320px,\x20100vw),\x20350px)','qUPjP':'flip','vJpQb':_0x3860fe(0x17c),'XEYuD':_0x3860fe(0x142)};_0x1bf90c[_0x3860fe(0x15a)](_0x1c9e9e[_0x3860fe(0x130)],{'maxWidth':_0x1c9e9e[_0x3860fe(0x15e)],'placement':_0x3860fe(0x167),'popperOptions':{'modifiers':[{'name':_0x1c9e9e[_0x3860fe(0x183)],'options':{'fallbackPlacements':[_0x1c9e9e['vJpQb'],_0x1c9e9e['XEYuD']]}}]},'onShow'(_0x2f4cee){const _0x1254d5=_0x3860fe;_0x1bf90c[_0x1254d5(0x120)](_0x2f4cee);const _0x49a851=_0x1c9e9e['tvlCx'](_0x16b346,_0x2f4cee['reference'])[_0x1254d5(0x14a)](_0x1c9e9e[_0x1254d5(0x140)]),_0x4d002d=_0x5c86de['id'](_0x49a851),_0x36daae=_0x500d2d[_0x1254d5(0x14f)](_0x4d002d);_0x2f4cee[_0x1254d5(0x13b)](_0x1c9e9e[_0x1254d5(0x148)](parse_html,_0x49372d(_0x36daae))),_0x49a851[_0x1254d5(0x127)](_0x1254d5(0x125));},'onMount'(_0x26a042){const _0x1124fe=_0x3860fe,_0x3bc6ff={'RVpbf':_0x1124fe(0x17e),'AYlIq':function(_0x234832,_0x333d92){return _0x234832(_0x333d92);},'gcLwc':function(_0x5876a2,_0x243736){return _0x5876a2!==_0x243736;},'PARvG':_0x1124fe(0x146),'pDRJu':function(_0x5cf7f8,_0x3a5a55){return _0x1c9e9e['BtgvJ'](_0x5cf7f8,_0x3a5a55);},'oKoEQ':_0x1c9e9e[_0x1124fe(0x137)],'vkGwR':_0x1124fe(0x187)};if(_0x1124fe(0x144)===_0x1124fe(0x144)){const _0x5ef86b=_0x1c9e9e[_0x1124fe(0x123)](_0x16b346,_0x26a042['reference'])[_0x1124fe(0x14a)](_0x1c9e9e[_0x1124fe(0x140)]),_0x50b470=_0x5c86de['id'](_0x5ef86b);let _0x152194;_0x4c6bb7[_0x1124fe(0x14d)]()===_0x50b470&&(_0x152194=_0x4c6bb7['get_message_selection']());message_actions_popover_keyboard_toggle&&(focus_first_action_popover_item(),message_actions_popover_keyboard_toggle=![]);_0x1bf90c[_0x1124fe(0x17a)][_0x1124fe(0x139)]=_0x26a042;const _0x193d45=_0x1c9e9e['Ptnhx'](_0x16b346,_0x26a042[_0x1124fe(0x151)]);_0x193d45[_0x1124fe(0x155)](_0x1c9e9e['jaLfN'],_0x1c9e9e[_0x1124fe(0x17f)],_0x274e8d=>{const _0x5ae028=_0x1124fe;_0x4c6bb7[_0x5ae028(0x177)]({'trigger':_0x1c9e9e[_0x5ae028(0x122)],'message_id':_0x50b470,'quote_content':_0x152194}),_0x274e8d['preventDefault'](),_0x274e8d[_0x5ae028(0x132)](),_0x26a042[_0x5ae028(0x133)]();}),_0x193d45[_0x1124fe(0x155)](_0x1124fe(0x169),_0x1124fe(0x152),_0x1ea83a=>{const _0x4b6ad4=_0x1124fe,_0x10a8f9=_0x1c9e9e['lXiAR'](_0x16b346,_0x1ea83a[_0x4b6ad4(0x18c)])[_0x4b6ad4(0x12d)]('message-id');_0x2ffc79(_0xc66242[_0x4b6ad4(0x159)]!==undefined);const _0x2a3838=_0xc66242[_0x4b6ad4(0x159)][_0x4b6ad4(0x170)](_0x10a8f9);_0x49c2b5[_0x4b6ad4(0x162)](_0x2a3838),_0x1ea83a[_0x4b6ad4(0x12b)](),_0x1ea83a['stopPropagation'](),_0x26a042[_0x4b6ad4(0x133)]();}),_0x193d45[_0x1124fe(0x155)](_0x1c9e9e[_0x1124fe(0x17d)],_0x1124fe(0x145),_0x51ac7d=>{const _0x4f985f=_0x1124fe,_0x4f6ab7=_0x16b346(_0x51ac7d[_0x4f985f(0x18c)])[_0x4f985f(0x12d)](_0x1c9e9e[_0x4f985f(0x126)]);_0x1c9e9e['tvlCx'](_0x2ffc79,_0x1c9e9e[_0x4f985f(0x153)](_0xc66242[_0x4f985f(0x159)],undefined)),_0xc66242[_0x4f985f(0x159)]['select_id'](_0x4f6ab7);const _0x1e4ac8=_0xc66242[_0x4f985f(0x159)][_0x4f985f(0x141)](_0x4f6ab7);_0x57a4d0[_0x4f985f(0x18a)](_0x1e4ac8[_0x4f985f(0x138)],_0x1e4ac8[_0x4f985f(0x189)],![],_0x1e4ac8),_0x51ac7d[_0x4f985f(0x12b)](),_0x51ac7d['stopPropagation'](),_0x26a042[_0x4f985f(0x133)]();}),_0x193d45[_0x1124fe(0x155)](_0x1124fe(0x169),_0x1c9e9e['oPxBY'],_0x55052d=>{const _0x36f899=_0x1124fe;if(_0x36f899(0x131)!==_0x36f899(0x131))_0x24ec87['hide_all']();else{const _0x4db39d=_0x16b346(_0x55052d[_0x36f899(0x18c)])['data'](_0x3bc6ff[_0x36f899(0x128)]);_0x36497c[_0x36f899(0x173)](_0x4db39d),_0x55052d['preventDefault'](),_0x55052d[_0x36f899(0x132)](),_0x26a042[_0x36f899(0x133)]();}}),_0x193d45[_0x1124fe(0x155)](_0x1124fe(0x169),'.popover_toggle_collapse',_0xe7f65b=>{const _0x3a54b0=_0x1124fe,_0x2d24d2=_0x3bc6ff[_0x3a54b0(0x158)](_0x16b346,_0xe7f65b[_0x3a54b0(0x18c)])[_0x3a54b0(0x12d)](_0x3bc6ff['RVpbf']);_0x2ffc79(_0xc66242[_0x3a54b0(0x159)]!==undefined);const _0x61db4b=_0xc66242[_0x3a54b0(0x159)][_0x3a54b0(0x141)](_0x2d24d2);_0x3bc6ff[_0x3a54b0(0x158)](_0x2ffc79,_0x3bc6ff[_0x3a54b0(0x168)](_0x61db4b,undefined)),_0x61db4b[_0x3a54b0(0x134)]?_0x5768a9['uncollapse'](_0x61db4b):_0x5768a9[_0x3a54b0(0x149)](_0x61db4b),_0xe7f65b[_0x3a54b0(0x12b)](),_0xe7f65b[_0x3a54b0(0x132)](),_0x26a042['hide']();}),_0x193d45['one'](_0x1c9e9e[_0x1124fe(0x17d)],_0x1c9e9e['Pxfsk'],_0x1255dc=>{const _0x2cc640=_0x1124fe,_0x813a2=_0x16b346(_0x1255dc['currentTarget'])[_0x2cc640(0x12d)](_0x3bc6ff['RVpbf']);_0x2ffc79(_0xc66242[_0x2cc640(0x159)]!==undefined);const _0xc94cee=_0xc66242['current'][_0x2cc640(0x170)](_0x813a2),_0x2b9476=_0xc66242[_0x2cc640(0x159)][_0x2cc640(0x141)](_0x5c86de['id'](_0xc94cee)),_0x3dfe1d=_0xc66242['current']['view'][_0x2cc640(0x181)][_0x2cc640(0x141)](_0x2b9476['id']);_0xc94cee&&!_0x3dfe1d['is_hidden']&&_0xc66242[_0x2cc640(0x159)][_0x2cc640(0x156)][_0x2cc640(0x179)](_0x813a2),_0x1255dc[_0x2cc640(0x12b)](),_0x1255dc['stopPropagation'](),_0x26a042[_0x2cc640(0x133)]();}),_0x193d45[_0x1124fe(0x155)]('click',_0x1c9e9e[_0x1124fe(0x172)],_0x13e2eb=>{const _0xeb5e2a=_0x1124fe,_0x56ed23=_0x1c9e9e['lXiAR'](_0x16b346,_0x13e2eb[_0xeb5e2a(0x18c)])['data'](_0x1c9e9e[_0xeb5e2a(0x126)]);_0xd2802a['show_user_list'](_0x56ed23),_0x13e2eb[_0xeb5e2a(0x12b)](),_0x13e2eb[_0xeb5e2a(0x132)](),_0x26a042[_0xeb5e2a(0x133)]();}),_0x193d45['one']('click',_0x1c9e9e[_0x1124fe(0x175)],_0x45fa57=>{const _0x261d2a=_0x1124fe,_0x39c744=_0x1c9e9e[_0x261d2a(0x12e)](_0x16b346,_0x45fa57[_0x261d2a(0x18c)])['data']('message-id');_0x49c2b5[_0x261d2a(0x163)](_0x39c744),_0x45fa57[_0x261d2a(0x12b)](),_0x45fa57[_0x261d2a(0x132)](),_0x26a042[_0x261d2a(0x133)]();}),_0x193d45['one']('click',_0x1124fe(0x15b),_0xc17f85=>{const _0x50b07f=_0x1124fe;if(_0x3bc6ff[_0x50b07f(0x14c)]!==_0x50b07f(0x13d)){const _0x3d31f4=_0x3bc6ff[_0x50b07f(0x12a)](_0x16b346,_0xc17f85[_0x50b07f(0x18c)])[_0x50b07f(0x12d)]('message-id');_0xc17f85['stopPropagation'](),_0xc17f85[_0x50b07f(0x12b)](),_0x494a91[_0x50b07f(0x16c)](_0x26a042[_0x50b07f(0x135)][_0x50b07f(0x129)],_0x3d31f4,{'placement':_0x3bc6ff[_0x50b07f(0x18e)]}),_0x26a042['hide']();}else _0x5c9b5c[_0x50b07f(0x159)][_0x50b07f(0x156)]['hide_revealed_message'](_0x448e8c);}),new _0x4c5f53(_0x193d45['find'](_0x1c9e9e[_0x1124fe(0x14e)])[0x0])['on'](_0x1c9e9e[_0x1124fe(0x185)],()=>{const _0x4d47e0=_0x1124fe;show_copied_confirmation(_0x16b346(_0x26a042['reference'])[_0x4d47e0(0x14a)](_0x1c9e9e[_0x4d47e0(0x182)])[0x0]),setTimeout(()=>{const _0x573e2e=_0x4d47e0;_0x16b346(_0x573e2e(0x157))[_0x573e2e(0x13e)](_0x3bc6ff['vkGwR']);},0x0),_0x26a042[_0x4d47e0(0x133)]();});}else _0x2f1f99[_0x1124fe(0x149)](_0x1cef7a);},'onHidden'(_0x711fd4){const _0x329ab5=_0x3860fe,_0x4b4ccc=_0x1c9e9e['lXiAR'](_0x16b346,_0x711fd4['reference'])[_0x329ab5(0x14a)](_0x329ab5(0x13f));_0x4b4ccc[_0x329ab5(0x147)](_0x1c9e9e['vYmui']),_0x711fd4[_0x329ab5(0x186)](),_0x1bf90c[_0x329ab5(0x17a)][_0x329ab5(0x139)]=undefined,message_actions_popover_keyboard_toggle=![];}});}function _0x27eb(){const _0x49fe52=['[data-tippy-root]\x20.actions_popover','toggle_emoji_popover','li:not(.divider):visible\x20a','return\x20await\x20Promise.resolve(42);','is_message_actions_popover_displayed','get_row','.delete_message','QKLII','mark_as_unread_from_here','hide_all','iwBHI','3717354GQDANJ','quote_and_reply','VynaR','hide_revealed_message','popover_instances','1390590xrYvto','top','jaLfN','message-id','WjBeL','.rehide_muted_user_message','message_containers','pXADq','qUPjP','.message_controls','IHcvr','destroy','blur','stringify','topic','build_move_topic_to_stream_popover','8pwWcBu','currentTarget','3942504LrkASq','oKoEQ','on_show_prep','.mark_as_unread','vsBIW','PJPAd','.respond_button','has_actions_popover','ExevO','addClass','RVpbf','parentElement','pDRJu','preventDefault','jjcps','data','lXiAR','6RAJsTg','djodj','aCuys','stopPropagation','hide','collapsed','reference','find','qjRnX','stream_id','message_actions','.selected_message\x20.actions_hover\x20.message-actions-menu-button','setContent','any_active','DaRxN','trigger','.message_row','cBkMi','get','left','859980KtNdAB','aljEU','.popover_move_message','fOlEE','removeClass','tvlCx','collapse','closest','is_editing','PARvG','selection_within_message_id','bxlIp','get_actions_popover_content_context','VQAji','popper','.popover_edit_message,\x20.popover_view_source','RsgDO','ATMyV','one','view',':focus','AYlIq','current','register_popover_menu','.reaction_button','return\x20Object.keys({a:1});','success','RfqUK','12137517MfGodc','.actions_hover\x20.message-actions-menu-button','focus_first_popover_item','start','delete_message','TMLhE','6529467Lbehcs','910284PaTWZf','bottom','gcLwc','click','Trying\x20to\x20get\x20menu\x20items\x20when\x20action\x20popover\x20is\x20closed.'];_0x27eb=function(){return _0x49fe52;};return _0x27eb();}