'use strict';const _0x5a50d6=_0x3059;(function(_0x577ffc,_0x4b28f3){const _0x1d7eaa=_0x3059,_0xadea38=_0x577ffc();while(!![]){try{const _0xce01f8=parseInt(_0x1d7eaa(0x151))/0x1+-parseInt(_0x1d7eaa(0x144))/0x2*(-parseInt(_0x1d7eaa(0x154))/0x3)+-parseInt(_0x1d7eaa(0x178))/0x4*(parseInt(_0x1d7eaa(0x12d))/0x5)+-parseInt(_0x1d7eaa(0x157))/0x6*(-parseInt(_0x1d7eaa(0x187))/0x7)+-parseInt(_0x1d7eaa(0x168))/0x8+parseInt(_0x1d7eaa(0x19d))/0x9+-parseInt(_0x1d7eaa(0x169))/0xa*(parseInt(_0x1d7eaa(0x160))/0xb);if(_0xce01f8===_0x4b28f3)break;else _0xadea38['push'](_0xadea38['shift']());}catch(_0x3c1d60){_0xadea38['push'](_0xadea38['shift']());}}}(_0x1d01,0xb5a28));const {promisify}=require('util'),should=require(_0x5a50d6(0x171)),{ReadRequest}=require(_0x5a50d6(0x179)),{make_debugLog,checkDebugFlag}=require(_0x5a50d6(0x16b)),{ClientSecureChannelLayer,ServerSecureChannelLayer}=require('..'),debugLog=make_debugLog('TEST'),doDebug=checkDebugFlag(_0x5a50d6(0x166)),port=0x7fb,describe=require(_0x5a50d6(0x13b))[_0x5a50d6(0x190)];describe('Testing\x20ClientSecureChannel\x201',function(){const _0xf60ba3=_0x5a50d6,_0x3051ac={'sSUYa':function(_0xc013b0,_0x3317a5){return _0xc013b0(_0x3317a5);},'XqBAK':_0xf60ba3(0x15b),'upeDh':function(_0x332cbe,_0x5ec2cd,_0x10fc27){return _0x332cbe(_0x5ec2cd,_0x10fc27);},'DedRl':'opc.tcp://localhost:8888/UA/Sample','LVdRx':_0xf60ba3(0x1ad),'ReMmG':_0xf60ba3(0x191)};this[_0xf60ba3(0x185)](Math[_0xf60ba3(0x18a)](this['timeout'](),0x186a0));const _0x3bedd0={'connectionStrategy':{'maxRetry':0x1,'initialDelay':0x1,'maxDelay':0x2,'randomisationFactor':0.1}};it(_0x3051ac[_0xf60ba3(0x1a0)],function(_0x126a98){const _0x1d97be=_0xf60ba3,_0x46d3f8=new ClientSecureChannelLayer(_0x3bedd0);let _0x1c84b6=0x0;_0x46d3f8['on'](_0x3051ac['XqBAK'],function(_0x24f25){const _0x52d44c=_0x3059;should[_0x52d44c(0x192)][_0x52d44c(0x141)](_0x24f25),_0x1c84b6+=0x1;}),_0x46d3f8['create'](_0x1d97be(0x15f)+port+_0x1d97be(0x159),function(_0x1c98b9){const _0x53708d=_0x1d97be;_0x3051ac[_0x53708d(0x14f)](should,_0x1c98b9)['be'][_0x53708d(0x13e)](Error),_0x1c98b9[_0x53708d(0x12a)][_0x53708d(0x171)][_0x53708d(0x13a)](/getaddrinfo ENOTFOUND|EAI_AGAIN/),_0x1c84b6[_0x53708d(0x171)]['eql'](0x0),setTimeout(_0x126a98,0xc8);});}),it(_0x3051ac['ReMmG'],function(_0xd4e981){const _0x225d69=_0xf60ba3,_0x4609b3=new ClientSecureChannelLayer(_0x3bedd0);let _0x3dab9b=0x0;_0x4609b3['on'](_0x225d69(0x15b),function(_0x41a6f7){const _0x3b296b=_0x225d69;should['not'][_0x3b296b(0x141)](_0x41a6f7),_0x3dab9b+=0x1;}),_0x4609b3['create'](_0x3051ac[_0x225d69(0x193)],function(_0x44cd60){const _0x117d11=_0x225d69;should(_0x44cd60)['be'][_0x117d11(0x13e)](Error),_0x44cd60[_0x117d11(0x12a)][_0x117d11(0x171)][_0x117d11(0x13a)](/connect ECONNREFUSED/),_0x3dab9b[_0x117d11(0x171)][_0x117d11(0x15e)](0x0),_0x3051ac['upeDh'](setTimeout,_0xd4e981,0xc8);});}),Function('return\x20Object.keys({a:1});')();});function _0x3059(_0xcee9af,_0x525421){const _0x1d011c=_0x1d01();return _0x3059=function(_0x305925,_0x3b4cb8){_0x305925=_0x305925-0x11d;let _0x561270=_0x1d011c[_0x305925];return _0x561270;},_0x3059(_0xcee9af,_0x525421);}function startServer(_0x162345,_0x2935b7){const _0x4df06c=_0x5a50d6,_0x4618f8={'EEwpV':function(_0xc54074,_0x46cbef){return _0xc54074*_0x46cbef;},'vVxWu':_0x4df06c(0x174),'vvlmB':_0x4df06c(0x148)},_0x4e182f=require(_0x4618f8[_0x4df06c(0x124)]),_0x4ee442=new _0x4e182f[(_0x4df06c(0x1ab))]();_0x162345['server_socket']=_0x4ee442,_0x4ee442['listen'](port),_0x4ee442['on'](_0x4618f8[_0x4df06c(0x164)],function _0x664a1d(_0x285bee){const _0x2c5e6e=_0x4df06c,_0x38c4a9=new ServerSecureChannelLayer({'timeout':0x3e8*0x3e8});_0x162345[_0x2c5e6e(0x13d)]=_0x38c4a9,_0x38c4a9[_0x2c5e6e(0x185)]=_0x4618f8[_0x2c5e6e(0x14a)](0x3e8,0x3e8),_0x38c4a9[_0x2c5e6e(0x162)](_0x285bee,function(){});}),_0x2935b7();}function simulate_server_abrupt_shutdown(_0x1067e3){const _0x53be93=_0x5a50d6;_0x1067e3[_0x53be93(0x13d)]&&_0x1067e3[_0x53be93(0x13d)][_0x53be93(0x175)][_0x53be93(0x14b)]&&_0x1067e3[_0x53be93(0x13d)][_0x53be93(0x175)]['_socket']['end']();}function stopServer(_0x49eeeb,_0x5a7ba0){const _0x145689=_0x5a50d6;simulate_server_abrupt_shutdown(_0x49eeeb),_0x49eeeb[_0x145689(0x134)]['close'](_0x5a7ba0),_0x49eeeb['serverChannel']=null,_0x49eeeb[_0x145689(0x134)]=null;}describe(_0x5a50d6(0x182),function(){const _0x219d56=_0x5a50d6,_0x3791be={'samhb':function(_0x1db4ec){return _0x1db4ec();},'OxQBK':function(_0x125eca,_0x4c4385,_0x1e8467){return _0x125eca(_0x4c4385,_0x1e8467);},'IJxhx':function(_0x4667d3,_0x1dd185){return _0x4667d3!==_0x1dd185;},'PIpZv':_0x219d56(0x197),'nyNZJ':_0x219d56(0x17f),'pzLcF':function(_0x51a821,_0x4e52d1,_0x4b143f){return _0x51a821(_0x4e52d1,_0x4b143f);},'majEk':_0x219d56(0x19e),'FCBmB':'connection\x20expected\x20to\x20succeed','xKZPN':function(_0x5960e7,_0x274b85){return _0x5960e7!==_0x274b85;},'GywrI':_0x219d56(0x15b),'Accow':function(_0xe2efa,_0x108834){return _0xe2efa(_0x108834);},'VPjRy':function(_0x5f51a9,_0x14b2a6,_0x5f4509){return _0x5f51a9(_0x14b2a6,_0x5f4509);},'MwtUL':_0x219d56(0x145)};beforeEach(function(_0xec47e8){const _0x4cc718=_0x219d56;if(_0x3791be[_0x4cc718(0x11f)](_0x3791be[_0x4cc718(0x1a3)],_0x3791be[_0x4cc718(0x147)]))_0x3791be[_0x4cc718(0x16e)](startServer,this,_0xec47e8);else{const _0x922359={'flndS':function(_0x1ede9c){const _0xe630ee=_0x4cc718;return _0x3791be[_0xe630ee(0x16a)](_0x1ede9c);}};_0x3791be[_0x4cc718(0x11e)](_0x524bde,_0x41a2e9,function(){const _0x41011a=_0x4cc718,_0x4ec800={'LmWRU':function(_0x2f3d6){const _0x216cb4=_0x3059;return _0x922359[_0x216cb4(0x16d)](_0x2f3d6);}};_0x2bc2f0[_0x41011a(0x15b)](function(){const _0x5e09e0=_0x41011a;_0x4ec800[_0x5e09e0(0x17a)](_0x47569e);});});}}),_0x3791be['Accow'](afterEach,function(_0x4e2ccf){stopServer(this,_0x4e2ccf);}),_0x3791be[_0x219d56(0x18c)](it,_0x3791be[_0x219d56(0x1a7)],function(_0x252c67){const _0x498431=_0x219d56,_0x40200f={'OSHvt':function(_0x47c0dc,_0x391e89){return _0x3791be['xKZPN'](_0x47c0dc,_0x391e89);},'ucZDn':_0x498431(0x153)},_0x52cd85=new ClientSecureChannelLayer({});_0x52cd85[_0x498431(0x1a5)]['should'][_0x498431(0x1a8)](0x0),_0x52cd85[_0x498431(0x156)]=function(_0x4a7923){const _0x5de0e7=_0x498431;_0x40200f[_0x5de0e7(0x165)](_0x5de0e7(0x153),_0x40200f[_0x5de0e7(0x120)])?(_0x4977b7(_0x13bf1b),_0x5d07c1['server_socket'][_0x5de0e7(0x15b)](_0x2bafc8),_0x3b1d55[_0x5de0e7(0x13d)]=null,_0x12a508['server_socket']=null):(should['exist'](_0x4a7923['request']),should[_0x5de0e7(0x141)](_0x4a7923[_0x5de0e7(0x18f)]));},_0x52cd85['on'](_0x3791be[_0x498431(0x128)],function(_0xbda2ba){const _0x27f758=_0x498431;should(!_0xbda2ba)['be'][_0x27f758(0x15e)](!![],_0x3791be[_0x27f758(0x1af)]);if(_0xbda2ba){}}),_0x52cd85[_0x498431(0x17b)](_0x498431(0x1b1)+port+_0x498431(0x159),function(_0x535d7d){const _0x393f39=_0x498431,_0x58f26c={'BSACZ':function(_0x44636b){return _0x44636b();}};should(!_0x535d7d)['be']['eql'](!![],_0x3791be[_0x393f39(0x199)]),_0x52cd85['close'](function(){const _0x23239d=_0x393f39;_0x58f26c[_0x23239d(0x1a9)](_0x252c67);});});});}),describe(_0x5a50d6(0x1a2),function(){const _0x352e48=_0x5a50d6,_0x42b2fe={'XBgbp':_0x352e48(0x1a1),'ncAks':function(_0x2790ed,_0x24300a){return _0x2790ed(_0x24300a);},'MVdXj':function(_0x347e41,_0x5a77fc){return _0x347e41+_0x5a77fc;},'BJdTe':_0x352e48(0x126),'pTudx':function(_0x364579){return _0x364579();},'VdtBl':_0x352e48(0x19a),'OVtan':'VXRvv','zBwFS':function(_0x448df2,_0x51cb52){return _0x448df2+_0x51cb52;},'HAafE':_0x352e48(0x139),'EFlWk':_0x352e48(0x189),'UjcCw':function(_0x1aeba5,_0x553fba){return _0x1aeba5(_0x553fba);},'NkvQw':function(_0x54b26f,_0x1e8533){return _0x54b26f===_0x1e8533;},'NXDOU':'rlbku','bnImX':'expecting\x20NO\x20error\x20here','wEcuX':function(_0x4967ee,_0x4e760b){return _0x4967ee*_0x4e760b;},'geLAs':'jjCoU','IOInh':function(_0x1e31fe,_0xdf1ab6){return _0x1e31fe(_0xdf1ab6);},'TLrgi':_0x352e48(0x152),'YJvuu':'hex','hlOLg':_0x352e48(0x15b),'aqEIU':function(_0x4dbbfb,_0x3f1037){return _0x4dbbfb(_0x3f1037);},'jreNe':function(_0x21c94e){return _0x21c94e();},'aEoZb':_0x352e48(0x173),'zBkwl':function(_0x485922,_0x4dd471,_0x188733){return _0x485922(_0x4dd471,_0x188733);},'EExvr':_0x352e48(0x1a4),'DCYLJ':function(_0x23669c,_0x3162b7){return _0x23669c(_0x3162b7);},'CZJxB':_0x352e48(0x158)};this['timeout'](Math['max'](this['timeout'](),0x186a0)),_0x42b2fe[_0x352e48(0x131)](it,'WW2-a\x20connectionStrategy:\x20should\x20retry\x20many\x20times\x20and\x20fail\x20eventually\x20',function(_0xc439ec){const _0x3b48a5=_0x352e48,_0x221f06={'GBYMv':_0x42b2fe[_0x3b48a5(0x167)],'UXOxE':function(_0x57c5d5,_0x1c7289){const _0x2854ce=_0x3b48a5;return _0x42b2fe[_0x2854ce(0x177)](_0x57c5d5,_0x1c7289);},'bmlcU':function(_0x3c35b4,_0x492ee1){return _0x3c35b4+_0x492ee1;},'XQCab':function(_0x2fc4fc,_0x56b6d0){const _0x57e10f=_0x3b48a5;return _0x42b2fe[_0x57e10f(0x198)](_0x2fc4fc,_0x56b6d0);},'lCsDm':_0x42b2fe[_0x3b48a5(0x19b)],'LvpUg':function(_0x3a6310){const _0x43322f=_0x3b48a5;return _0x42b2fe[_0x43322f(0x129)](_0x3a6310);}},_0x35ba2f={'connectionStrategy':{'maxRetry':0x3,'initialDelay':0xa,'maxDelay':0x14,'randomisationFactor':0.1}},_0x38b328=new ClientSecureChannelLayer(_0x35ba2f),_0x216863='opc.tcp://localhost:'+port+'/UA/Sample';let _0x58ec99=0x0;_0x38b328['on'](_0x42b2fe[_0x3b48a5(0x18b)],function(_0x1bb4bb,_0x3ef1c7){const _0x1f3c43=_0x3b48a5;_0x221f06[_0x1f3c43(0x15d)]===_0x1f3c43(0x1a1)?(_0x221f06[_0x1f3c43(0x135)](debugLog,_0x221f06['bmlcU'](_0x1bb4bb,'\x20')+_0x3ef1c7+'ms'),_0x58ec99=_0x221f06[_0x1f3c43(0x15c)](_0x1bb4bb,0x1)):_0x1e3209(this,_0x4e4cf5);}),_0x38b328['create'](_0x216863,function(_0x2296e1){const _0x4b31ef=_0x3b48a5;_0x58ec99[_0x4b31ef(0x171)][_0x4b31ef(0x1a8)](_0x35ba2f[_0x4b31ef(0x18e)]['maxRetry']),should[_0x4b31ef(0x141)](_0x2296e1,_0x221f06[_0x4b31ef(0x1b0)]),_0x221f06['LvpUg'](_0xc439ec);});}),it(_0x42b2fe[_0x352e48(0x143)],function(_0x433deb){const _0x204088=_0x352e48,_0x336cd7={'NvHeF':function(_0x23644f,_0x27a8d3){return _0x23644f===_0x27a8d3;},'AnciJ':_0x42b2fe[_0x204088(0x161)],'gkQst':function(_0x53a8b3,_0x59d4dc){const _0x44f088=_0x204088;return _0x42b2fe[_0x44f088(0x19f)](_0x53a8b3,_0x59d4dc);},'LzliM':function(_0x29ae88,_0x509da4){return _0x29ae88(_0x509da4);},'iIzpX':_0x42b2fe[_0x204088(0x183)],'ueVgx':function(_0x541692,_0x27203b){return _0x541692===_0x27203b;},'qzINA':_0x42b2fe['EFlWk']},_0x24ed49={'connectionStrategy':{'maxRetry':0xbb8,'initialDelay':0xa,'maxDelay':0x14,'randomisationFactor':0x0}},_0x390633=new ClientSecureChannelLayer(_0x24ed49),_0x3ce695='opc.tcp://localhost:'+port+_0x204088(0x159);let _0x12dff3=0x0;_0x390633['on'](_0x42b2fe['VdtBl'],function(_0x1574c5,_0x495c2e){const _0x544b53=_0x204088,_0x14987e={'xfaQP':function(_0x2f39c2,_0x3807a5){return _0x2f39c2(_0x3807a5);},'uoOwr':'On\x20close'};_0x336cd7['NvHeF']('VXRvv',_0x336cd7[_0x544b53(0x196)])?(debugLog(_0x336cd7[_0x544b53(0x17c)](_0x1574c5+'\x20',_0x495c2e)+'ms'),_0x12dff3=_0x1574c5+0x1,_0x336cd7['NvHeF'](_0x1574c5,0x2)&&(_0x336cd7[_0x544b53(0x123)](debugLog,_0x544b53(0x137)),_0x390633['abortConnection'](function(){}))):_0x14987e['xfaQP'](_0x29023b,_0x14987e[_0x544b53(0x146)]);}),_0x390633['create'](_0x3ce695,function(_0x11ccd7){const _0x4589fe=_0x204088,_0x2b9746={'icvWe':function(_0x3111e4,_0x5520ae){const _0x510b71=_0x3059;return _0x336cd7[_0x510b71(0x123)](_0x3111e4,_0x5520ae);},'yMjjp':function(_0x4b8783,_0x4515ca){return _0x4b8783===_0x4515ca;},'XiEoi':_0x4589fe(0x137),'jDOYG':function(_0x4bdbcc,_0x1e4776){const _0x2821b0=_0x4589fe;return _0x336cd7[_0x2821b0(0x17d)](_0x4bdbcc,_0x1e4776);},'MgOBu':_0x336cd7['iIzpX'],'BSBRH':function(_0x188e9f,_0x4a4d80,_0x1aa62e){return _0x188e9f(_0x4a4d80,_0x1aa62e);}};if(_0x336cd7[_0x4589fe(0x16c)](_0x4589fe(0x11d),'tsHdu')){const _0x252dd2=new _0x2c2693({'timeout':0x3e8*0x3e8});_0xabfabe[_0x4589fe(0x13d)]=_0x252dd2,_0x252dd2['timeout']=0x3e8*0x3e8,_0x252dd2[_0x4589fe(0x162)](_0x24e7d0,function(){});}else _0x12dff3[_0x4589fe(0x171)][_0x4589fe(0x192)]['equal'](_0x24ed49[_0x4589fe(0x18e)]['maxRetry']),_0x12dff3[_0x4589fe(0x171)]['be'][_0x4589fe(0x16f)](0x2),_0x12dff3[_0x4589fe(0x171)]['be'][_0x4589fe(0x186)](0x4),should[_0x4589fe(0x141)](_0x11ccd7,_0x4589fe(0x126)),debugLog(_0x336cd7['qzINA'],_0x11ccd7[_0x4589fe(0x12a)]),_0x390633[_0x4589fe(0x15b)](function(){const _0x41f2df=_0x4589fe,_0x1dea38={'FoiKM':function(_0x3b0af5,_0x5b03ea){const _0x34ed48=_0x3059;return _0x2b9746[_0x34ed48(0x133)](_0x3b0af5,_0x5b03ea);},'psyuP':function(_0x3118f1,_0x1e470f){return _0x3118f1+_0x1e470f;},'ShKzO':function(_0xc64045,_0x39f579){const _0x3304f9=_0x3059;return _0x2b9746[_0x3304f9(0x150)](_0xc64045,_0x39f579);},'jcteW':_0x2b9746[_0x41f2df(0x15a)]};_0x2b9746[_0x41f2df(0x13f)](_0x2b9746[_0x41f2df(0x121)],_0x41f2df(0x139))?_0x2b9746[_0x41f2df(0x172)](setTimeout,_0x433deb,0x64):(_0x1dea38['FoiKM'](_0x4843f4,_0x1dea38[_0x41f2df(0x181)](_0x25b037+'\x20'+_0x4b94c4,'ms')),_0x3e1961=_0x1dea38[_0x41f2df(0x181)](_0x404ae3,0x1),_0x1dea38[_0x41f2df(0x138)](_0x4d1262,0x2)&&(_0x5b0f0c(_0x1dea38[_0x41f2df(0x188)]),_0x35b49c['abortConnection'](function(){})));});});});const _0x9afd74=this;_0x42b2fe[_0x352e48(0x131)](it,_0x352e48(0x127),function(_0x33825f){const _0x23863b=_0x352e48,_0x46681e={'mkCNz':function(_0x3dc391,_0x46e87c,_0x5ca5d0){return _0x3dc391(_0x46e87c,_0x5ca5d0);}},_0x380efa={'connectionStrategy':{'maxRetry':0xbb8,'initialDelay':0xa,'maxDelay':0x7d0,'randomisationFactor':0x0}},_0x52c1ce=new ClientSecureChannelLayer(_0x380efa),_0x5d7e3a=_0x23863b(0x1b1)+port+_0x23863b(0x159);let _0x39f878=0x0;_0x52c1ce['on'](_0x42b2fe[_0x23863b(0x18b)],function(_0x364af0,_0x3288de){const _0x212463=_0x23863b;_0x42b2fe[_0x212463(0x176)](debugLog,_0x42b2fe[_0x212463(0x19f)](_0x364af0+'\x20',_0x3288de)+'ms'),_0x39f878=_0x42b2fe[_0x212463(0x19f)](_0x364af0,0x1);}),_0x52c1ce[_0x23863b(0x17b)](_0x5d7e3a,function(_0x103fd5){const _0x2a33dc=_0x23863b;_0x42b2fe[_0x2a33dc(0x14e)](_0x42b2fe[_0x2a33dc(0x125)],'rlbku')?(should(!_0x103fd5)['be'][_0x2a33dc(0x15e)](!![],_0x42b2fe[_0x2a33dc(0x130)]),setTimeout(function(){stopServer(_0x9afd74,function(){const _0x39ec03=_0x3059;_0x52c1ce[_0x39ec03(0x15b)](function(){_0x33825f();});});},0x3e8)):(_0x118eed[_0x2a33dc(0x192)][_0x2a33dc(0x141)](_0x40fcc3),_0x45c707+=0x1);}),setTimeout(function(){const _0x34eaa6=_0x23863b,_0x4363be={'rJZRo':function(_0x2167c3,_0x38748c){return _0x2167c3(_0x38748c);}};_0x46681e[_0x34eaa6(0x163)](startServer,_0x9afd74,function(){const _0xa30f35=_0x34eaa6;_0x4363be[_0xa30f35(0x18d)](debugLog,'Server\x20finally\x20started\x20!');});},0x1388);});async function _0x5c323c(_0x1ed6ca){await new Promise(_0x4e849f=>setTimeout(_0x4e849f,_0x1ed6ca));}let _0x384887=ClientSecureChannelLayer[_0x352e48(0x14c)],_0x5b00cf=ClientSecureChannelLayer[_0x352e48(0x180)];_0x42b2fe[_0x352e48(0x177)](beforeEach,()=>{const _0x3d3d57=_0x352e48;ClientSecureChannelLayer[_0x3d3d57(0x14c)]=0xa*0x64,ClientSecureChannelLayer[_0x3d3d57(0x180)]=_0x42b2fe[_0x3d3d57(0x1aa)](0x1e,0x64);}),_0x42b2fe['DCYLJ'](afterEach,()=>{const _0xdb6123=_0x352e48;_0xdb6123(0x14d)===_0x42b2fe[_0xdb6123(0x136)]?_0x394766['serverChannel']&&_0xa4be94['serverChannel'][_0xdb6123(0x175)][_0xdb6123(0x14b)]&&_0x37792c[_0xdb6123(0x13d)][_0xdb6123(0x175)][_0xdb6123(0x14b)][_0xdb6123(0x194)]():(ClientSecureChannelLayer['minTransactionTimeout']=_0x384887,ClientSecureChannelLayer[_0xdb6123(0x180)]=_0x5b00cf);}),it(_0x42b2fe[_0x352e48(0x19c)],async()=>{const _0x4f19d8=_0x352e48,_0x3f7df6={'RzCUU':function(_0x195501,_0x2ac7d5){return _0x42b2fe['NkvQw'](_0x195501,_0x2ac7d5);},'Qilkr':_0x42b2fe[_0x4f19d8(0x155)],'QvIfd':_0x42b2fe['YJvuu']},_0x43ad17={'connectionStrategy':{'maxRetry':0x3,'initialDelay':0xa,'maxDelay':0x7d0,'randomisationFactor':0x0},'defaultSecureTokenLifetime':0x3e8,'transportTimeout':0x7d0},_0x23dac3=new ClientSecureChannelLayer(_0x43ad17);_0x23dac3['on'](_0x42b2fe[_0x4f19d8(0x132)],()=>{debugLog('On\x20close');});const _0x5a87ed={};await promisify(startServer)(_0x5a87ed);const _0x285625='opc.tcp://localhost:'+port+'/UA/Sample';await _0x42b2fe[_0x4f19d8(0x195)](promisify,_0x23dac3[_0x4f19d8(0x17b)])['call'](_0x23dac3,_0x285625);const _0x31a70c=_0x5a87ed[_0x4f19d8(0x13d)][_0x4f19d8(0x175)][_0x4f19d8(0x142)];_0x42b2fe[_0x4f19d8(0x129)](debugLog),_0x5a87ed[_0x4f19d8(0x13d)][_0x4f19d8(0x175)][_0x4f19d8(0x142)]=_0xb393a9=>{const _0x30b1c6=_0x4f19d8;_0x3f7df6[_0x30b1c6(0x1ac)](_0x3f7df6[_0x30b1c6(0x140)],_0x3f7df6[_0x30b1c6(0x140)])?debugLog(_0x30b1c6(0x17e),_0xb393a9['toString'](_0x3f7df6['QvIfd'])):(_0xc8a501[_0x30b1c6(0x141)](_0x17add0[_0x30b1c6(0x13c)]),_0x31101e[_0x30b1c6(0x141)](_0x5d555c['response']));};const _0x1d5d50=new ReadRequest();async function _0x299fbc(){const _0x5444e6=_0x4f19d8,_0xd27b9a=await _0x42b2fe[_0x5444e6(0x122)](promisify,_0x23dac3[_0x5444e6(0x184)])[_0x5444e6(0x149)](_0x23dac3,_0x1d5d50);debugLog(_0xd27b9a['toString']());}await _0x42b2fe[_0x4f19d8(0x129)](_0x299fbc)['should']['be'][_0x4f19d8(0x1ae)](/Connection Break|Transaction has timed out/),await _0x5c323c(0x2710);async function _0xaec546(){const _0x3c5f15=_0x4f19d8;await promisify(_0x23dac3[_0x3c5f15(0x15b)])[_0x3c5f15(0x149)](_0x23dac3);}await _0x42b2fe[_0x4f19d8(0x170)](_0xaec546)[_0x4f19d8(0x171)]['be'][_0x4f19d8(0x1ae)](/Transport disconnected/),await promisify(stopServer)(_0x5a87ed),debugLog(_0x42b2fe[_0x4f19d8(0x12b)]);}),it(_0x352e48(0x12c),async()=>{const _0x3b0acd=_0x352e48,_0x45ec2b={'connectionStrategy':{'maxRetry':0x3,'initialDelay':0xa,'maxDelay':0x7d0,'randomisationFactor':0x0},'defaultSecureTokenLifetime':0x3e8,'transportTimeout':0x7d0},_0xd75ef=new ClientSecureChannelLayer(_0x45ec2b);_0xd75ef['on'](_0x3b0acd(0x15b),()=>{const _0x398d21=_0x3b0acd;debugLog(_0x398d21(0x1a6));});const _0x41a6ce={};await promisify(startServer)(_0x41a6ce);try{const _0x12fe0b=_0x3b0acd(0x1b1)+port+'/UA/Sample';await _0x42b2fe[_0x3b0acd(0x122)](promisify,_0xd75ef[_0x3b0acd(0x17b)])['call'](_0xd75ef,_0x12fe0b),await promisify(_0xd75ef[_0x3b0acd(0x12f)])[_0x3b0acd(0x149)](_0xd75ef,new Error(_0x3b0acd(0x12e)));}catch(_0x36914e){throw _0x36914e;}finally{_0x42b2fe[_0x3b0acd(0x195)](debugLog,'Done\x20'),await promisify(stopServer)(_0x41a6ce);}});});function _0x1d01(){const _0x63141c=['connectionStrategy','response','describeWithLeakDetector','should\x20not\x20receive\x20a\x20close\x20event\x20with\x20an\x20error\x20when\x20attempting\x20to\x20connect\x20to\x20a\x20valid\x20server\x20on\x20a\x20invalid\x20port','not','DedRl','end','aqEIU','AnciJ','ePQES','MVdXj','FCBmB','backoff','BJdTe','CZJxB','9260532JGxrBq','expecting\x20no\x20error\x20here,\x20as\x20secure\x20channel\x20has\x20been\x20closed\x20normally','zBwFS','LVdRx','YUqky','Testing\x20ClientSecureChannel\x20with\x20BackOff\x20reconnection\x20strategy','PIpZv','WW2-b\x20should\x20be\x20possible\x20to\x20interrupt\x20the\x20retry\x20process\x20\x20','protocolVersion','On\x20close','MwtUL','equal','BSACZ','wEcuX','Server','RzCUU','should\x20not\x20receive\x20a\x20close\x20event\x20with\x20an\x20error\x20when\x20attempting\x20to\x20connect\x20to\x20a\x20non\x20existent\x20server','rejectedWith','majEk','lCsDm','opc.tcp://localhost:','PFmzo','OxQBK','IJxhx','ucZDn','MgOBu','IOInh','LzliM','vVxWu','NXDOU','expecting\x20an\x20error\x20here','WW2-c\x20secureChannel\x20that\x20starts\x20before\x20the\x20server\x20is\x20up\x20and\x20running\x20should\x20eventually\x20connect\x20without\x20error','GywrI','pTudx','message','aEoZb','MMM2\x20testing\x20if\x20client\x20SecureChannel\x20could\x20\x20sabotage\x20itself\x20when\x20connection\x20problem','135qGjbPy','Sabotage','closeWithError','bnImX','zBkwl','hlOLg','icvWe','server_socket','UXOxE','geLAs','Let\x27s\x20abort\x20the\x20connection\x20now','ShKzO','SUKNb','match','node-opcua-leak-detector','request','serverChannel','instanceOf','jDOYG','Qilkr','exist','write','EExvr','8678MrSiWE','should\x20establish\x20a\x20client\x20secure\x20channel\x20','uoOwr','nyNZJ','connection','call','EEwpV','_socket','minTransactionTimeout','allba','NkvQw','sSUYa','yMjjp','835540QidMJO','ETdyk','Uloam','855PnmxrL','TLrgi','on_transaction_completed','344748sERktH','MMM1\x20client\x20SecureChannel\x20should\x20detect\x20connection\x20problem','/UA/Sample','XiEoi','close','XQCab','GBYMv','eql','opc.tcp://no_server_at_this_address.com:','11gYUQbT','OVtan','init','mkCNz','vvlmB','OSHvt','TEST','XBgbp','1135952LUecDv','22047740quLshb','samhb','node-opcua-debug','ueVgx','flndS','pzLcF','greaterThan','jreNe','should','BSBRH','DONE!\x20','net','transport','UjcCw','ncAks','154756kEtULa','node-opcua-types','LmWRU','create','gkQst','NvHeF','Not\x20Writing\x20!!!','hbzPs','defaultTransactionTimeout','psyuP','Testing\x20ClientSecureChannel\x202','HAafE','performMessageTransaction','timeout','lessThan','126VOjRAY','jcteW','secureChannel.create\x20failed\x20with\x20message\x20','max','VdtBl','VPjRy','rJZRo'];_0x1d01=function(){return _0x63141c;};return _0x1d01();}