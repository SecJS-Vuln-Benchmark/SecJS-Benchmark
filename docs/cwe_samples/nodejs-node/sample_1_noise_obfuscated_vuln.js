const _0x3da853=_0x33d6;(function(_0x3a99bf,_0x3eaf0c){const _0x8cad3=_0x33d6,_0x3df5cd=_0x3a99bf();while(!![]){try{const _0x3c1157=parseInt(_0x8cad3(0x138))/0x1+-parseInt(_0x8cad3(0x14a))/0x2*(-parseInt(_0x8cad3(0x13f))/0x3)+-parseInt(_0x8cad3(0x12d))/0x4*(parseInt(_0x8cad3(0x132))/0x5)+-parseInt(_0x8cad3(0x117))/0x6*(-parseInt(_0x8cad3(0x11a))/0x7)+parseInt(_0x8cad3(0x149))/0x8+parseInt(_0x8cad3(0x13b))/0x9+parseInt(_0x8cad3(0x112))/0xa*(-parseInt(_0x8cad3(0x130))/0xb);if(_0x3c1157===_0x3eaf0c)break;else _0x3df5cd['push'](_0x3df5cd['shift']());}catch(_0x5ba053){_0x3df5cd['push'](_0x3df5cd['shift']());}}}(_0xd97c,0xd0dfe));const async=require(_0x3da853(0xf8)),should=require(_0x3da853(0x125)),chalk=require(_0x3da853(0x126)),{AttributeIds,VariableIds,OPCUAClient,resolveNodeId,ClientMonitoredItem,StatusCodes,TimestampsToReturn,MonitoringMode}=require('node-opcua'),{make_debugLog,make_errorLog,checkDebugFlag}=require(_0x3da853(0x12e)),{perform_operation_on_subscription_async}=require('../../test_helpers/perform_operation_on_client_session');function _0xd97c(){const _0x14cdfd=['once','name','44tdioUU','node-opcua-debug','GlecI','51779189BWcHIJ','Testing\x20bug\x20#445\x20-\x20server.serverDiagnosticsSummary.currentSessionCount','329155zeGXxd','eql','QmsxH','replace','Value','stringify','845776XMVcAM','aulgD','XVULL','14018517TQHHCf','change\x20=','WGqmh','Never\x20received\x20','7197PDRQcG','updateClock();','tTJGI','hPXaE','hAlPy','XXtxg','exports','oChrX','BjvFv','kVicn','9194800xSZlvI','958Ibbsdi','hTNQq','IluVa','RvnCV','Server_ServerDiagnostics_ServerDiagnosticsSummary_CumulatedSessionCount','value','client','Both','HnRdj','read','kHFaY','\x20\x20\x20\x20\x20\x20\x20*\x20','fdgLk','RytAA','var\x20x\x20=\x2042;\x20return\x20x;','cNNiy','async','disconnect','LIVdy','pBroo','fbSsu','log','ViRsG','NANVB','Never\x20received\x20changedx\x20for\x20id','Dfntb','oIQcu','all','**$1**','VyHeS','qDJNQ','VQwty','iMErr','OwygC','eIFyG','wQZFH','push','Server_ServerDiagnostics_ServerDiagnosticsSummary_CurrentSessionCount','NUPrY','yAvKo','return\x20await\x20Promise.resolve(42);','TEST','10YCqbAM','changed','Qhggo','CaPTv','new\x20currentSessionCount=','1902036rWukFf','fETXW','toString','35BhRpIV','qspyK','gvrRx','return\x20Object.keys({a:1});','Reporting','MYeLs','QWvtF','test\x20that\x20current\x20SessionCount\x20increments\x20and\x20decrements\x20appropriately','green','HFZAj','create','should','chalk','yodSM','nNkjf','JHUtG','xoPhg'];_0xd97c=function(){return _0x14cdfd;};return _0xd97c();}function f(_0xe12053){const _0x2f88c7=_0x3da853,_0x22219b={'jjoBO':_0x2f88c7(0x148),'fdgLk':_0x2f88c7(0xf3),'XXtxg':_0x2f88c7(0x104),'RvnCV':function(_0x12feb1,_0x7c6026){return _0x12feb1(_0x7c6026);},'NANVB':function(_0x149591,_0x135868,_0xf1751f){return _0x149591(_0x135868,_0xf1751f);}};return _0x22219b[_0x2f88c7(0xff)](setInterval,_0x2f88c7(0x140),0x3e8),function(_0x49df3f){const _0x46c4d6=_0x2f88c7;if(_0x22219b['jjoBO']===_0x46c4d6(0x11f))_0x2478bd(new _0x229363(_0x46c4d6(0x13e),_0x380caf['toString']()));else return console[_0x46c4d6(0xfd)](_0x22219b[_0x46c4d6(0xf4)]+_0xe12053[_0x46c4d6(0x12c)][_0x46c4d6(0x135)](/_/g,'\x20')[_0x46c4d6(0x135)](/(given|when|then)/,chalk[_0x46c4d6(0x122)](_0x22219b[_0x46c4d6(0x144)]))),eval('const _0x586d57 = _0x46c4d6;JSON[_0x586d57(311)]({ \'safe\': !![] });'),_0x22219b[_0x46c4d6(0x14d)](_0xe12053,_0x49df3f);};}const debugLog=make_debugLog(_0x3da853(0x111)),errorLog=make_debugLog(_0x3da853(0x111)),doDebug=checkDebugFlag(_0x3da853(0x111));function _0x33d6(_0x50c103,_0x1a491e){const _0xd97ce9=_0xd97c();return _0x33d6=function(_0x33d65b,_0x2aff8a){_0x33d65b=_0x33d65b-0xf0;let _0x15153f=_0xd97ce9[_0x33d65b];return _0x15153f;},_0x33d6(_0x50c103,_0x1a491e);}let sessionCounter=0x0;async function connectAndCreateSession(_0x49ab4b){const _0x3ba16c=_0x3da853,_0x410b6a={'hPXaE':function(_0x1900a3,_0x4c66cc){return _0x1900a3+_0x4c66cc;},'UNPiz':_0x3ba16c(0x150)},_0x466a0b=OPCUAClient['create']({'name':_0x410b6a[_0x3ba16c(0x142)](_0x410b6a['UNPiz'],sessionCounter++)});await _0x466a0b['connect'](_0x49ab4b);const _0x18657b=await _0x466a0b['createSession']();return new Function(_0x3ba16c(0xf6))(),{'client':_0x466a0b,'session':_0x18657b};}async function closeSessionAndDisconnect({client:_0x4b6565,session:_0x35b9a2}){const _0x55e429=_0x3da853;await _0x35b9a2['close'](),await _0x4b6565[_0x55e429(0xf9)]();}const currentSessionCountNodeId=resolveNodeId(VariableIds[_0x3da853(0x10d)]),cumulatedSessionCountNodeId=resolveNodeId(VariableIds[_0x3da853(0x14e)]);async function installMonitoredItem(_0x24ad83,_0x3b432f){const _0x268022=_0x3da853,_0x2655ac={'iMErr':function(_0x586e00,_0x4307c7,_0x5ac95a){return _0x586e00(_0x4307c7,_0x5ac95a);},'RytAA':_0x268022(0x13c),'HnRdj':function(_0x441c65,_0x4998ec){return _0x441c65+_0x4998ec;},'aulgD':_0x268022(0x100),'cNNiy':function(_0x301d43,_0x1aba0d,_0x3d7b3e){return _0x301d43(_0x1aba0d,_0x3d7b3e);},'yAvKo':_0x268022(0x113),'fbSsu':'installMonitoredItem','pDPgg':function(_0x152a2c,_0x62316e){return _0x152a2c(_0x62316e);}};debugLog(_0x2655ac[_0x268022(0xfc)],_0x3b432f['toString']());const _0x57d285=await _0x24ad83['monitor']({'nodeId':_0x3b432f,'attributeId':AttributeIds[_0x268022(0x136)]},{'samplingInterval':0x0,'discardOldest':!![],'queueSize':0xa},TimestampsToReturn[_0x268022(0x151)],MonitoringMode[_0x268022(0x11e)]),_0x33ffbd=[];return _0x57d285['on'](_0x268022(0x113),function(_0x20878f){const _0x2ee5ed=_0x268022;_0x33ffbd[_0x2ee5ed(0x10c)](_0x20878f[_0x2ee5ed(0x14f)][_0x2ee5ed(0x14f)]),_0x2655ac[_0x2ee5ed(0x108)](debugLog,_0x2655ac[_0x2ee5ed(0xf5)],_0x33ffbd);}),_0x2655ac['pDPgg'](Function,_0x268022(0x11d))(),await new Promise((_0x5f0b13,_0x6ade6f)=>{const _0x3fc765=_0x268022,_0x28887e={'VyHeS':function(_0x1655e8,_0x3ad0e3){const _0x123478=_0x33d6;return _0x2655ac[_0x123478(0xf0)](_0x1655e8,_0x3ad0e3);},'eGVcu':_0x2655ac[_0x3fc765(0x139)],'IluVa':function(_0x57937e,_0x1f64e8){return _0x57937e(_0x1f64e8);}},_0xdc0664=_0x2655ac[_0x3fc765(0xf7)](setTimeout,()=>{const _0x57817d=_0x3fc765;_0x6ade6f(new Error(_0x28887e[_0x57817d(0x105)](_0x28887e['eGVcu'],_0x3b432f['toString']())));},0x1388);_0x57d285[_0x3fc765(0x12b)](_0x2655ac[_0x3fc765(0x10f)],function(_0x1da084){const _0x41b534=_0x3fc765;clearTimeout(_0xdc0664),_0x28887e[_0x41b534(0x14c)](_0x5f0b13,[_0x33ffbd,_0x57d285]);});});}async function installCurrentSessionCounter(_0x32c281){const _0x25359d=_0x3da853,_0x1741fc={'nNkjf':function(_0x638320,_0x12ebd5,_0x3c438d){return _0x638320(_0x12ebd5,_0x3c438d);}};return eval('const _0x2eda16 = _0x33d6;JSON[_0x2eda16(311)]({ \'safe\': !![] });'),await _0x1741fc[_0x25359d(0x128)](installMonitoredItem,_0x32c281,currentSessionCountNodeId);}async function installCumulatedSessionCounter(_0x3d788a){const _0x194018=_0x3da853,_0x5950ae={'CaPTv':function(_0x1b40c6,_0x5bf11c,_0x173040){return _0x1b40c6(_0x5bf11c,_0x173040);},'ViRsG':_0x194018(0x110)};Function(_0x194018(0x11d))();return await _0x5950ae[_0x194018(0x115)](installMonitoredItem,_0x3d788a,cumulatedSessionCountNodeId);new AsyncFunction(_0x5950ae[_0x194018(0xfe)])();}async function waitSessionCountChange(_0x2ba48c){const _0x24a8f9=_0x3da853,_0x52b96c={'hTNQq':function(_0x27b24c,_0x241377){return _0x27b24c(_0x241377);},'Fbcnq':'Never\x20received\x20','LIVdy':function(_0x5a7a8a,_0x38a030,_0x4be13b){return _0x5a7a8a(_0x38a030,_0x4be13b);},'Civns':function(_0x3bdf5b,_0x898c2c){return _0x3bdf5b(_0x898c2c);},'xoPhg':function(_0x3b115b,_0x528835,_0x362f14){return _0x3b115b(_0x528835,_0x362f14);},'NUPrY':_0x24a8f9(0x147),'HFZAj':function(_0x145d3f,_0x4aac8c,_0x5b5831){return _0x145d3f(_0x4aac8c,_0x5b5831);}};return _0x52b96c[_0x24a8f9(0x123)](setTimeout,function(){const _0x4f3df4=_0x24a8f9;console[_0x4f3df4(0xfd)]('safe');},0x64),await new Promise((_0x3f8a4f,_0x3a52be)=>{const _0x2fdfa3=_0x24a8f9,_0x299480={'gvrRx':function(_0x40c9e5,_0x41fb2d,_0x55028e){const _0x410110=_0x33d6;return _0x52b96c[_0x410110(0x12a)](_0x40c9e5,_0x41fb2d,_0x55028e);}};if(_0x52b96c[_0x2fdfa3(0x10e)]!=='OlLpt'){const _0x449dff=setTimeout(()=>{const _0xdbe5bd=_0x2fdfa3;_0x52b96c[_0xdbe5bd(0x14b)](_0x3a52be,new Error(_0x52b96c['Fbcnq'],_0x2ba48c[_0xdbe5bd(0x119)]()));},0x1388);_0x2ba48c[_0x2fdfa3(0x12b)](_0x2fdfa3(0x113),function(_0x4e49d6){const _0x4203d3=_0x2fdfa3;_0x52b96c[_0x4203d3(0x14b)](clearTimeout,_0x449dff);const _0x3ec2ad=_0x4e49d6[_0x4203d3(0x14f)]['value'];_0x52b96c[_0x4203d3(0xfa)](debugLog,_0x4203d3(0x116),_0x4e49d6[_0x4203d3(0x119)]()),_0x52b96c['Civns'](_0x3f8a4f,_0x3ec2ad);});}else{const _0x21485c={'JlqEs':function(_0x4aba45,_0x4b2c4b){return _0x4aba45+_0x4b2c4b;},'yodSM':_0x2fdfa3(0xf3)};return _0x299480[_0x2fdfa3(0x11c)](_0x5e3101,_0x2fdfa3(0x140),0x3e8),function(_0x2863a7){const _0x5d644a=_0x2fdfa3;return _0x543a90['log'](_0x21485c['JlqEs'](_0x21485c[_0x5d644a(0x127)],_0x5c6c97[_0x5d644a(0x12c)][_0x5d644a(0x135)](/_/g,'\x20')[_0x5d644a(0x135)](/(given|when|then)/,_0x572ea7[_0x5d644a(0x122)](_0x5d644a(0x104))))),eval('const _0x5d08d1 = _0x5d644a;_0x510384[_0x5d08d1(311)]({ \'safe\': !![] });'),_0x3ff750(_0x2863a7);};}});}module[_0x3da853(0x145)]=function(_0x594fdb){const _0x2f2bfe=_0x3da853,_0x2c1332={'OwygC':_0x2f2bfe(0xf6),'Dfntb':function(_0x30c39a){return _0x30c39a();},'tTJGI':function(_0x1d3bf8,_0x3f5a56){return _0x1d3bf8+_0x3f5a56;},'qspyK':function(_0x2082a5,_0x8621df){return _0x2082a5+_0x8621df;},'qDJNQ':function(_0x3441ad,_0x31062e,_0x19da19){return _0x3441ad(_0x31062e,_0x19da19);},'Qhggo':_0x2f2bfe(0x121),'wQZFH':function(_0x452d7f,_0x10bfe2,_0x456ab9){return _0x452d7f(_0x10bfe2,_0x456ab9);}};_0x2c1332[_0x2f2bfe(0x10b)](describe,_0x2f2bfe(0x131),function(){const _0x554007=_0x2f2bfe,_0x5aba65={'eIFyG':_0x2c1332[_0x554007(0x109)],'fETXW':function(_0x2d4f4d,_0x33686d){return _0x2d4f4d(_0x33686d);},'pBroo':function(_0x3fd750){const _0x40be13=_0x554007;return _0x2c1332[_0x40be13(0x101)](_0x3fd750);},'oChrX':function(_0x5778de){const _0x32e517=_0x554007;return _0x2c1332[_0x32e517(0x101)](_0x5778de);},'WGqmh':function(_0x45144c,_0x6c750b){const _0x49bcff=_0x554007;return _0x2c1332[_0x49bcff(0x141)](_0x45144c,_0x6c750b);},'QmsxH':function(_0x44595e,_0x2119bd){const _0x3b9d89=_0x554007;return _0x2c1332[_0x3b9d89(0x11b)](_0x44595e,_0x2119bd);},'QWvtF':function(_0x349b61,_0x25fc2c){return _0x349b61-_0x25fc2c;},'XVULL':function(_0x2a2e34,_0x55c96d){return _0x2a2e34+_0x55c96d;}};_0x2c1332[_0x554007(0x106)](it,_0x2c1332[_0x554007(0x114)],async()=>{const _0x7994b4=_0x554007,_0x9e535f={'hAlPy':function(_0xd513af,_0x1fa15f){return _0xd513af(_0x1fa15f);}},_0x38ec55=_0x594fdb['endpointUrl'],_0x445c20=OPCUAClient[_0x7994b4(0x124)]({});await perform_operation_on_subscription_async(_0x445c20,_0x38ec55,async function(_0x17cf42,_0x50663d){const _0x1b3feb=_0x7994b4,_0x57a6b3={'kHFaY':_0x1b3feb(0x102),'GlecI':function(_0x28f116,_0xf817d5){return _0x28f116(_0xf817d5);},'JHUtG':_0x5aba65[_0x1b3feb(0x10a)]},[_0x33e3bb,_0x41610c]=await _0x5aba65[_0x1b3feb(0x118)](installCurrentSessionCounter,_0x50663d),[_0x1c75d5]=await _0x5aba65['fETXW'](installCumulatedSessionCounter,_0x50663d);let _0x224b61=(await _0x17cf42[_0x1b3feb(0xf1)]({'nodeId':currentSessionCountNodeId,'attributeId':AttributeIds[_0x1b3feb(0x136)]}))['value'][_0x1b3feb(0x14f)];async function _0x11141a(){const _0x2ee623=_0x1b3feb;if(_0x57a6b3[_0x2ee623(0xf2)]!==_0x2ee623(0x107)){debugLog('connecting',_0x17cf42[_0x2ee623(0x12c)]);const _0x4ac406=[_0x57a6b3[_0x2ee623(0x12f)](waitSessionCountChange,_0x41610c),_0x57a6b3[_0x2ee623(0x12f)](connectAndCreateSession,_0x38ec55)];return new Function(_0x57a6b3[_0x2ee623(0x129)])(),await Promise[_0x2ee623(0x103)](_0x4ac406);}else _0x354056[_0x2ee623(0x137)]({'safe':!![]});}async function _0x4ec830({client:_0x3135ea,session:_0x1a1cb7}){const _0x3c1c5d=_0x1b3feb;debugLog('disconnecting',_0x1a1cb7[_0x3c1c5d(0x12c)]);const _0x35134e=[_0x9e535f[_0x3c1c5d(0x143)](waitSessionCountChange,_0x41610c),closeSessionAndDisconnect({'client':_0x3135ea,'session':_0x1a1cb7})];return eval('const _0x24b03e = _0x3c1c5d;JSON[_0x24b03e(311)]({ \'safe\': !![] });'),await Promise[_0x3c1c5d(0x103)](_0x35134e);}const [_0x372297,_0x57ed8b]=await _0x5aba65[_0x1b3feb(0xfb)](_0x11141a),[_0x11d027,_0x30af6c]=await _0x5aba65[_0x1b3feb(0x146)](_0x11141a),[_0x2a760c]=await _0x5aba65['fETXW'](_0x4ec830,_0x57ed8b),[_0x4a6429]=await _0x4ec830(_0x30af6c);_0x372297[_0x1b3feb(0x125)][_0x1b3feb(0x133)](_0x224b61+0x1),_0x11d027[_0x1b3feb(0x125)]['eql'](_0x224b61+0x2),_0x2a760c[_0x1b3feb(0x125)][_0x1b3feb(0x133)](_0x5aba65[_0x1b3feb(0x13d)](_0x224b61,0x1)),_0x4a6429[_0x1b3feb(0x125)][_0x1b3feb(0x133)](_0x5aba65[_0x1b3feb(0x134)](_0x224b61,0x0));const _0x59ecc6=_0x1c75d5[0x0];_0x1c75d5[_0x1b3feb(0x125)][_0x1b3feb(0x133)]([_0x59ecc6,_0x5aba65[_0x1b3feb(0x134)](_0x59ecc6,0x1),_0x59ecc6+0x2]);const _0x32c2ab=_0x5aba65[_0x1b3feb(0x120)](_0x224b61,0x1);_0x33e3bb[_0x1b3feb(0x125)][_0x1b3feb(0x133)]([_0x5aba65['XVULL'](_0x32c2ab,0x1),_0x32c2ab+0x2,_0x32c2ab+0x3,_0x5aba65[_0x1b3feb(0x13a)](_0x32c2ab,0x2),_0x32c2ab+0x1]);});});});};