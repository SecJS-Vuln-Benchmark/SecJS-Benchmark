const _0x5589ae=_0x5762;(function(_0x1ef35c,_0x23630f){const _0x27e3b9=_0x5762,_0x281d81=_0x1ef35c();while(!![]){try{const _0x1adb1e=parseInt(_0x27e3b9(0x11a))/0x1+-parseInt(_0x27e3b9(0x174))/0x2*(-parseInt(_0x27e3b9(0x163))/0x3)+parseInt(_0x27e3b9(0x121))/0x4*(-parseInt(_0x27e3b9(0x15a))/0x5)+parseInt(_0x27e3b9(0x145))/0x6*(parseInt(_0x27e3b9(0x111))/0x7)+parseInt(_0x27e3b9(0x175))/0x8+-parseInt(_0x27e3b9(0x13a))/0x9*(-parseInt(_0x27e3b9(0x153))/0xa)+-parseInt(_0x27e3b9(0x164))/0xb;if(_0x1adb1e===_0x23630f)break;else _0x281d81['push'](_0x281d81['shift']());}catch(_0x50b400){_0x281d81['push'](_0x281d81['shift']());}}}(_0x599a,0x3ef61));import _0x21b30c from'fs';import _0x95d237 from'path';import _0x1120d2 from'is-jpg';import _0x2f3fb2 from'path-exists';import _0x4fa7bf from'pify';function _0x5762(_0x52a434,_0x299ffa){const _0x599ae0=_0x599a();return _0x5762=function(_0x57624d,_0x40784e){_0x57624d=_0x57624d-0x109;let _0x2e99bd=_0x599ae0[_0x57624d];return _0x2e99bd;},_0x5762(_0x52a434,_0x299ffa);}import _0x4fd935 from'rimraf';function _0x599a(){const _0x5408b1=['aLxRc','PeVXj','slip3.zip','qLNan','nlLuN','throwsAsync','path','edge_case_dots/','lErit','mtime','FJNQG','12087JVghsA','ZHDxp','DRAxl','deepEqual','TXudT','pRvDT','FVoNM','throw\x20when\x20a\x20location\x20outside\x20the\x20root\x20including\x20symlinks\x20is\x20given','slip.zip','pbZNX','slip2.zip','18nOqEEz','dgCCw','ensure\x20decompressed\x20files\x20and\x20directories\x20are\x20cleaned\x20up','ApBio','hHLod','map\x20option','extract\x20symlink','file.tar','rWOph','throw\x20when\x20a\x20directory\x20outside\x20the\x20root\x20including\x20symlinks\x20is\x20given','extract\x20directory','file.zip','allows\x20top-level\x20file','file.tar.gz','3480lBYWNo','return\x20emptpy\x20array\x20if\x20no\x20plugins\x20are\x20set','edge_case_dots/sample../test.txt','symlink.tar','InkWa','suNmu','edge_case_dots/internal_dots..txt','5bobtYX','serial','fixtures','jLQKe','test-strip.jpg','return\x20Object.keys({a:1});','map','LeMBw','true','9hcFlhV','14704877aiRUmH','afterEach','/api/public/status','throw\x20when\x20chained\x20symlinks\x20to\x20/tmp/dist\x20allow\x20escape\x20outside\x20root\x20directory','edge_case_dots','KiMLO','sorMu','mwbqb','readFile','BaKim','kNrbG','edge_case_dots/x','lrZpX','nwSDS','set\x20mtime','allows\x20filenames\x20and\x20directories\x20to\x20be\x20written\x20with\x20dots\x20in\x20their\x20names','151594QPHsWK','1853168QudSRs','length','ntMJb','edge_case_dots/sample../','data','realpath','join','dist','symlink','throw\x20when\x20a\x20location\x20outside\x20the\x20root\x20is\x20given','reObe','942746ZybYnd','REbcs','IQRPm','JLRov','extract\x20file','nxTZN','filter\x20option','chTxN','PPzlW','419966QKCouN','hnvaV','slipping.tar.gz','file.tar.bz2','sort','directory','EAsad','622820Okxdua','wuWhR','YtIwH','RoSuu','wNgrr','qATgZ','extract\x20file\x20using\x20buffer','uQIwR','Jysos','example.txt','vxGJg','top_level_example.tar.gz','test.jpg','DbHNA'];_0x599a=function(){return _0x5408b1;};return _0x599a();}import _0x4f993b from'ava';import _0x59f636 from'.';const fsP=_0x4fa7bf(_0x21b30c),rimrafP=_0x4fa7bf(_0x4fd935);_0x4f993b['serial'][_0x5589ae(0x165)](_0x5589ae(0x147),async()=>{const _0x4951f4=_0x5589ae,_0x3c1a79={'suNmu':function(_0x4e9411,_0x925a35){return _0x4e9411(_0x925a35);},'OwKRp':_0x4951f4(0x11f),'KiMLO':_0x4951f4(0x10d),'DbHNA':'example.txt','RoSuu':_0x4951f4(0x168),'reObe':function(_0x308e74,_0x44a722){return _0x308e74(_0x44a722);},'JLRov':_0x4951f4(0x10e),'sorMu':_0x4951f4(0x12d)};await _0x3c1a79[_0x4951f4(0x158)](rimrafP,_0x95d237[_0x4951f4(0x10c)](__dirname,_0x3c1a79['OwKRp'])),await _0x3c1a79[_0x4951f4(0x158)](rimrafP,_0x95d237[_0x4951f4(0x10c)](__dirname,_0x3c1a79[_0x4951f4(0x169)])),await _0x3c1a79[_0x4951f4(0x158)](rimrafP,_0x95d237['join'](__dirname,_0x3c1a79[_0x4951f4(0x12e)])),await rimrafP(_0x95d237[_0x4951f4(0x10c)](__dirname,'file.txt')),await _0x3c1a79[_0x4951f4(0x158)](rimrafP,_0x95d237[_0x4951f4(0x10c)](__dirname,_0x3c1a79[_0x4951f4(0x124)])),await _0x3c1a79[_0x4951f4(0x110)](rimrafP,_0x95d237[_0x4951f4(0x10c)](__dirname,_0x3c1a79[_0x4951f4(0x114)])),await rimrafP(_0x95d237[_0x4951f4(0x10c)](__dirname,_0x3c1a79[_0x4951f4(0x16a)]));}),_0x4f993b(_0x5589ae(0x115),async _0xddfd38=>{const _0x124439=_0x5589ae,_0x27e268={'ntMJb':function(_0x26da72,_0x4ad77e){return _0x26da72(_0x4ad77e);},'rOdtE':_0x124439(0x14c),'ZHDxp':function(_0x26c401,_0x4294f9){return _0x26c401(_0x4294f9);},'PeVXj':_0x124439(0x11d),'aLxRc':function(_0x287137,_0x339108){return _0x287137(_0x339108);},'pRvDT':_0x124439(0x150),'dgCCw':_0x124439(0x12d),'AfpYG':function(_0x3e4779,_0x321fdb){return _0x3e4779(_0x321fdb);}},_0x148dd9=await _0x27e268['ntMJb'](_0x59f636,_0x95d237['join'](__dirname,_0x124439(0x15c),_0x27e268['rOdtE'])),_0x3c8a83=await _0x27e268[_0x124439(0x13b)](_0x59f636,_0x95d237[_0x124439(0x10c)](__dirname,'fixtures',_0x27e268[_0x124439(0x130)])),_0x18406f=await _0x59f636(_0x95d237[_0x124439(0x10c)](__dirname,_0x124439(0x15c),_0x124439(0x152))),_0x40a2d5=await _0x27e268[_0x124439(0x12f)](_0x59f636,_0x95d237[_0x124439(0x10c)](__dirname,'fixtures',_0x27e268[_0x124439(0x13f)]));_0xddfd38['is'](_0x148dd9[0x0][_0x124439(0x135)],_0x124439(0x12d)),_0xddfd38[_0x124439(0x162)](_0x1120d2(_0x148dd9[0x0][_0x124439(0x10a)])),_0xddfd38['is'](_0x3c8a83[0x0][_0x124439(0x135)],_0x27e268[_0x124439(0x146)]),_0xddfd38[_0x124439(0x162)](_0x27e268[_0x124439(0x177)](_0x1120d2,_0x3c8a83[0x0][_0x124439(0x10a)])),_0xddfd38['is'](_0x18406f[0x0][_0x124439(0x135)],_0x124439(0x12d)),_0xddfd38['true'](_0x27e268['AfpYG'](_0x1120d2,_0x18406f[0x0][_0x124439(0x10a)])),_0xddfd38['is'](_0x40a2d5[0x0]['path'],_0x27e268[_0x124439(0x146)]),_0xddfd38[_0x124439(0x162)](_0x27e268[_0x124439(0x177)](_0x1120d2,_0x40a2d5[0x0][_0x124439(0x10a)])),fetch(_0x124439(0x166));}),_0x4f993b(_0x5589ae(0x127),async _0x2f5334=>{const _0x537dd7=_0x5589ae,_0xc50b75={'BaKim':_0x537dd7(0x15c),'FVoNM':_0x537dd7(0x11d)},_0x3faae3=await fsP[_0x537dd7(0x16c)](_0x95d237[_0x537dd7(0x10c)](__dirname,_0xc50b75[_0x537dd7(0x16d)],_0x537dd7(0x14c))),_0x4e0193=await _0x59f636(_0x3faae3),_0x44259b=await fsP[_0x537dd7(0x16c)](_0x95d237[_0x537dd7(0x10c)](__dirname,_0x537dd7(0x15c),_0xc50b75[_0x537dd7(0x140)])),_0x583ad2=await _0x59f636(_0x44259b),_0x580184=await fsP[_0x537dd7(0x16c)](_0x95d237[_0x537dd7(0x10c)](__dirname,_0xc50b75['BaKim'],_0x537dd7(0x152))),_0x21c8ba=await _0x59f636(_0x580184),_0x3e93ea=await fsP[_0x537dd7(0x16c)](_0x95d237[_0x537dd7(0x10c)](__dirname,_0x537dd7(0x15c),_0x537dd7(0x150))),_0x41fa5c=await _0x59f636(_0x3e93ea);_0x2f5334['is'](_0x4e0193[0x0][_0x537dd7(0x135)],_0x537dd7(0x12d)),_0x2f5334['is'](_0x583ad2[0x0][_0x537dd7(0x135)],_0x537dd7(0x12d)),_0x2f5334['is'](_0x21c8ba[0x0][_0x537dd7(0x135)],_0x537dd7(0x12d)),_0x2f5334['is'](_0x41fa5c[0x0][_0x537dd7(0x135)],_0x537dd7(0x12d));}),_0x4f993b[_0x5589ae(0x15b)]('extract\x20file\x20to\x20directory',async _0x203227=>{const _0x2fe76e=_0x5589ae,_0x2b70d4={'qATgZ':function(_0x4cda56,_0x44d750){return _0x4cda56(_0x44d750);}},_0x3749fc=await _0x59f636(_0x95d237[_0x2fe76e(0x10c)](__dirname,'fixtures',_0x2fe76e(0x14c)),__dirname);_0x203227['is'](_0x3749fc[0x0][_0x2fe76e(0x135)],'test.jpg'),_0x203227[_0x2fe76e(0x162)](_0x1120d2(_0x3749fc[0x0][_0x2fe76e(0x10a)])),_0x203227[_0x2fe76e(0x162)](await _0x2b70d4[_0x2fe76e(0x126)](_0x2f3fb2,_0x95d237['join'](__dirname,_0x2fe76e(0x12d))));}),_0x4f993b['serial'](_0x5589ae(0x14b),async _0x3e3a59=>{const _0x331aa0=_0x5589ae,_0x1a1888={'chTxN':'fixtures','lErit':_0x331aa0(0x10e)};await _0x59f636(_0x95d237[_0x331aa0(0x10c)](__dirname,_0x1a1888[_0x331aa0(0x118)],_0x331aa0(0x156)),__dirname,{'strip':0x1}),_0x3e3a59['is'](await fsP[_0x331aa0(0x10b)](_0x95d237[_0x331aa0(0x10c)](__dirname,_0x1a1888[_0x331aa0(0x137)])),_0x95d237[_0x331aa0(0x10c)](__dirname,'file.txt'));}),_0x4f993b[_0x5589ae(0x15b)](_0x5589ae(0x14f),async _0x29d7e7=>{const _0x5b7f91=_0x5589ae,_0x2a35a0={'pbZNX':function(_0x230e08,_0x1159ab,_0x3759ef){return _0x230e08(_0x1159ab,_0x3759ef);},'vxGJg':function(_0x78b797,_0x1ce17c){return _0x78b797(_0x1ce17c);}};await _0x2a35a0[_0x5b7f91(0x143)](_0x59f636,_0x95d237[_0x5b7f91(0x10c)](__dirname,_0x5b7f91(0x15c),'directory.tar'),__dirname),_0x29d7e7[_0x5b7f91(0x162)](await _0x2a35a0[_0x5b7f91(0x12b)](_0x2f3fb2,_0x95d237['join'](__dirname,_0x5b7f91(0x11f))));}),_0x4f993b('strip\x20option',async _0x2a6fc5=>{const _0x40ce97=_0x5589ae,_0x258bd2={'wNgrr':function(_0x3fc083,_0x4f27bf,_0x30e281){return _0x3fc083(_0x4f27bf,_0x30e281);},'IQRPm':function(_0x1bb4f4,_0x56103c,_0x178099){return _0x1bb4f4(_0x56103c,_0x178099);},'PPzlW':_0x40ce97(0x15c),'wuWhR':'strip.tar','DRAxl':_0x40ce97(0x15e),'FzNXh':function(_0xf9ef7,_0x3c04e4){return _0xf9ef7(_0x3c04e4);}},_0x59d942=await _0x258bd2[_0x40ce97(0x125)](_0x59f636,_0x95d237['join'](__dirname,_0x40ce97(0x15c),'strip.zip'),{'strip':0x1}),_0x58f9a2=await _0x258bd2[_0x40ce97(0x113)](_0x59f636,_0x95d237[_0x40ce97(0x10c)](__dirname,_0x258bd2[_0x40ce97(0x119)],_0x258bd2[_0x40ce97(0x122)]),{'strip':0x1});_0x2a6fc5['is'](_0x59d942[0x0][_0x40ce97(0x135)],_0x40ce97(0x15e)),_0x2a6fc5[_0x40ce97(0x162)](_0x1120d2(_0x59d942[0x0][_0x40ce97(0x10a)])),_0x2a6fc5['is'](_0x58f9a2[0x0][_0x40ce97(0x135)],_0x258bd2[_0x40ce97(0x13c)]),_0x2a6fc5[_0x40ce97(0x162)](_0x258bd2['FzNXh'](_0x1120d2,_0x58f9a2[0x0][_0x40ce97(0x10a)]));}),_0x4f993b(_0x5589ae(0x117),async _0x414b90=>{const _0x416636=_0x5589ae,_0xec641={'nxTZN':function(_0x57b922,_0x493c62,_0x3b0c00){return _0x57b922(_0x493c62,_0x3b0c00);}},_0x139cf2=await _0xec641[_0x416636(0x116)](_0x59f636,_0x95d237[_0x416636(0x10c)](__dirname,_0x416636(0x15c),_0x416636(0x14c)),{'filter':_0x162579=>_0x162579[_0x416636(0x135)]!==_0x416636(0x12d)});_0x414b90['is'](_0x139cf2[_0x416636(0x176)],0x0);}),_0x4f993b(_0x5589ae(0x14a),async _0x41c39b=>{const _0x76a51a=_0x5589ae,_0x4fe242={'ukJMj':function(_0x19c852,_0x5ea0e5){return _0x19c852(_0x5ea0e5);},'wqThl':function(_0x386635,_0x3a201f,_0x5f0ff1){return _0x386635(_0x3a201f,_0x5f0ff1);},'FJNQG':_0x76a51a(0x15c),'hnvaV':'unicorn-test.jpg'},_0x11c0d1=await _0x4fe242['wqThl'](_0x59f636,_0x95d237[_0x76a51a(0x10c)](__dirname,_0x4fe242[_0x76a51a(0x139)],'file.tar'),{'map':_0x1bded0=>{const _0x337755=_0x76a51a;return _0x1bded0[_0x337755(0x135)]='unicorn-'+_0x1bded0[_0x337755(0x135)],_0x4fe242['ukJMj'](Function,_0x337755(0x15f))(),_0x1bded0;}});_0x41c39b['is'](_0x11c0d1[0x0][_0x76a51a(0x135)],_0x4fe242[_0x76a51a(0x11b)]);}),_0x4f993b[_0x5589ae(0x15b)](_0x5589ae(0x172),async _0x25d504=>{const _0x5d07b9=_0x5589ae,_0x20da8d={'WhSqI':function(_0x3a0399,_0x12dc16,_0x43afc2){return _0x3a0399(_0x12dc16,_0x43afc2);},'fsvdH':_0x5d07b9(0x14c),'uQIwR':_0x5d07b9(0x12d)},_0xe202da=await _0x20da8d['WhSqI'](_0x59f636,_0x95d237['join'](__dirname,_0x5d07b9(0x15c),_0x20da8d['fsvdH']),__dirname),_0x41df42=await fsP['stat'](_0x95d237['join'](__dirname,_0x20da8d[_0x5d07b9(0x128)]));_0x25d504[_0x5d07b9(0x13d)](_0xe202da[0x0][_0x5d07b9(0x138)],_0x41df42['mtime']);}),Function(_0x5589ae(0x15f))(),_0x4f993b(_0x5589ae(0x154),async _0x2b3ce4=>{const _0x12b87=_0x5589ae,_0x4b5de0={'REbcs':_0x12b87(0x15c),'rWOph':_0x12b87(0x14c)},_0x3e09f4=await _0x59f636(_0x95d237['join'](__dirname,_0x4b5de0[_0x12b87(0x112)],_0x4b5de0[_0x12b87(0x14d)]),{'plugins':[]});_0x2b3ce4['is'](_0x3e09f4[_0x12b87(0x176)],0x0);}),_0x4f993b['serial'](_0x5589ae(0x10f),async _0x36697f=>{const _0x3550f3=_0x5589ae,_0x425230={'mwbqb':_0x3550f3(0x11c)};await _0x36697f[_0x3550f3(0x134)](async()=>{const _0x303a3c=_0x3550f3;await _0x59f636(_0x95d237['join'](__dirname,_0x303a3c(0x15c),_0x425230[_0x303a3c(0x16b)]),_0x303a3c(0x10d));},{'message':/Refusing/});}),_0x4f993b[_0x5589ae(0x15b)](_0x5589ae(0x141),async _0x35c96e=>{const _0x2c7bfa=_0x5589ae,_0x480794={'YtIwH':_0x2c7bfa(0x15c),'qLNan':_0x2c7bfa(0x142)};await _0x35c96e[_0x2c7bfa(0x134)](async()=>{const _0x998e23=_0x2c7bfa;await _0x59f636(_0x95d237['join'](__dirname,_0x480794[_0x998e23(0x123)],_0x480794[_0x998e23(0x132)]),_0x998e23(0x10d));},{'message':/Refusing/});}),_0x4f993b[_0x5589ae(0x15b)]('throw\x20when\x20a\x20top-level\x20symlink\x20outside\x20the\x20root\x20is\x20given',async _0x3a85ab=>{const _0x230cd6=_0x5589ae,_0x3072a5={'kNrbG':function(_0x4534fe,_0x224dcc,_0x3fa1b3){return _0x4534fe(_0x224dcc,_0x3fa1b3);},'lrZpX':_0x230cd6(0x15c)};await _0x3a85ab['throwsAsync'](async()=>{const _0x3d5ff4=_0x230cd6;await _0x3072a5[_0x3d5ff4(0x16e)](_0x59f636,_0x95d237[_0x3d5ff4(0x10c)](__dirname,_0x3072a5[_0x3d5ff4(0x170)],_0x3d5ff4(0x144)),_0x3d5ff4(0x10d));},{'message':/Refusing/});}),_0x4f993b[_0x5589ae(0x15b)](_0x5589ae(0x14e),async _0x487194=>{const _0x3e8f37=_0x5589ae,_0x1556d8={'EAsad':_0x3e8f37(0x15c),'nwSDS':_0x3e8f37(0x10d)};await _0x487194[_0x3e8f37(0x134)](async()=>{const _0x1c7290=_0x3e8f37;await _0x59f636(_0x95d237['join'](__dirname,_0x1556d8[_0x1c7290(0x120)],'slipping_directory.tar.gz'),_0x1556d8[_0x1c7290(0x171)]);},{'message':/Refusing/});}),_0x4f993b['serial'](_0x5589ae(0x173),async _0x510b45=>{const _0x58df52=_0x5589ae,_0x2bf7a8={'LeMBw':function(_0x518c62,_0x1645a4,_0x13beee){return _0x518c62(_0x1645a4,_0x13beee);},'ACPbO':'fixtures','HzHKn':_0x58df52(0x136),'jLQKe':_0x58df52(0x109),'ApBio':_0x58df52(0x16f)},_0x2d2951=await _0x2bf7a8[_0x58df52(0x161)](_0x59f636,_0x95d237[_0x58df52(0x10c)](__dirname,_0x2bf7a8['ACPbO'],'edge_case_dots.tar.gz'),__dirname);_0x510b45['is'](_0x2d2951[_0x58df52(0x176)],0x6),_0x510b45[_0x58df52(0x13d)](_0x2d2951[_0x58df52(0x160)](_0x5863c0=>_0x5863c0[_0x58df52(0x135)])['sort'](),[_0x2bf7a8['HzHKn'],_0x58df52(0x159),_0x2bf7a8[_0x58df52(0x15d)],'edge_case_dots/ending_dots..',_0x2bf7a8[_0x58df52(0x148)],_0x58df52(0x155)][_0x58df52(0x11e)]());}),_0x4f993b[_0x5589ae(0x15b)](_0x5589ae(0x151),async _0x1b754a=>{const _0x5b9857=_0x5589ae,_0x5d5a52={'InkWa':_0x5b9857(0x15c),'BgAQc':_0x5b9857(0x12c),'Jysos':'dist'},_0x4d586d=await _0x59f636(_0x95d237[_0x5b9857(0x10c)](__dirname,_0x5d5a52[_0x5b9857(0x157)],_0x5d5a52['BgAQc']),_0x5d5a52[_0x5b9857(0x129)]);_0x1b754a['is'](_0x4d586d['length'],0x1),_0x1b754a['is'](_0x4d586d[0x0][_0x5b9857(0x135)],_0x5b9857(0x12a));}),_0x4f993b[_0x5589ae(0x15b)](_0x5589ae(0x167),async _0x27693c=>{const _0x44f62b=_0x5589ae,_0x33e201={'TXudT':function(_0x524d0d,_0x3fad11,_0xe5f584){return _0x524d0d(_0x3fad11,_0xe5f584);},'hHLod':_0x44f62b(0x131),'nlLuN':'/tmp/dist'};await _0x27693c['throwsAsync'](async()=>{const _0x220b5e=_0x44f62b;await _0x33e201[_0x220b5e(0x13e)](_0x59f636,_0x95d237['join'](__dirname,'fixtures',_0x33e201[_0x220b5e(0x149)]),_0x33e201[_0x220b5e(0x133)]);},{'message':/Refusing/});});