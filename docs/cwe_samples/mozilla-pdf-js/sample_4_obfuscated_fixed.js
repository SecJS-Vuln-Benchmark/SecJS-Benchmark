const _0x1e1702=_0x5e6b;(function(_0x91239c,_0x5e19cb){const _0x5ade93=_0x5e6b,_0x351d3a=_0x91239c();while(!![]){try{const _0x5b87d8=-parseInt(_0x5ade93(0x212))/0x1+parseInt(_0x5ade93(0x21b))/0x2*(-parseInt(_0x5ade93(0x1f4))/0x3)+-parseInt(_0x5ade93(0x1ff))/0x4*(-parseInt(_0x5ade93(0x20a))/0x5)+parseInt(_0x5ade93(0x215))/0x6*(-parseInt(_0x5ade93(0x1f6))/0x7)+-parseInt(_0x5ade93(0x1fa))/0x8+-parseInt(_0x5ade93(0x1f9))/0x9*(-parseInt(_0x5ade93(0x222))/0xa)+parseInt(_0x5ade93(0x225))/0xb;if(_0x5b87d8===_0x5e19cb)break;else _0x351d3a['push'](_0x351d3a['shift']());}catch(_0x19c3c7){_0x351d3a['push'](_0x351d3a['shift']());}}}(_0x171f,0xb6fd3));function _0x171f(){const _0x425a0a=['MTKtE','1452992vHcJlp','delete','exports','804FyuQDO','brx-','../utils/middleware/multiUserProtected','RmFuO','FAILED\x20TO\x20GET\x20BROWSER\x20EXTENSION\x20API\x20KEY.','message','2WhuEkq','role','KXSuz','log','YFLyx','AlFWA','uuid-apikey','8375990AhbWTb','tlAli','btWej','28668222TnAiFe','startsWith','../utils/prisma','gpLiO','kzswK','Successfully\x20migrated\x20API\x20keys\x20to\x20multi-user\x20mode','makeSecret','wFHAB','ekxNJ','Failed\x20to\x20delete\x20browser\x20extension\x20API\x20key','apiKey','1078338Pihgpe','./systemSettings','154OEGqva','user_id','lawyP','9rgQfkj','9726368pMsZEn','RblCH','GcCpq','toString','includes','368xFCUqC','xHyJS','error','Rrjoz','create','oqAev','isMultiUserMode','utXfZ','findMany','findUnique','browser_extension_api_keys','18310fVGAxg','qtQlc','admin','WPkQh','wgBDa','WUiRn','FAILED\x20TO\x20GET\x20BROWSER\x20EXTENSION\x20API\x20KEYS.'];_0x171f=function(){return _0x425a0a;};return _0x171f();}const prisma=require(_0x1e1702(0x1eb)),{SystemSettings}=require(_0x1e1702(0x1f5)),{ROLES}=require(_0x1e1702(0x217)),BrowserExtensionApiKey={'makeSecret':()=>{const _0x430162=_0x1e1702,_0xa841b8={'tlAli':function(_0x2bc0e2,_0x2d8ef0){return _0x2bc0e2(_0x2d8ef0);},'gpLiO':_0x430162(0x221)},_0x4aaaee=_0xa841b8[_0x430162(0x223)](require,_0xa841b8[_0x430162(0x1ec)]);return _0x430162(0x216)+_0x4aaaee[_0x430162(0x203)]()['apiKey'];},'create':async function(_0x4fbdcb=null){const _0x13070e=_0x1e1702,_0x336671={'qtQlc':'Failed\x20to\x20create\x20browser\x20extension\x20API\x20key'};try{const _0x3bf548=await prisma[_0x13070e(0x209)]['create']({'data':{'key':this[_0x13070e(0x1ef)](),'user_id':_0x4fbdcb}});return{'apiKey':_0x3bf548,'error':null};}catch(_0x1cc9ec){return console['error'](_0x336671[_0x13070e(0x20b)],_0x1cc9ec),{'apiKey':null,'error':_0x1cc9ec[_0x13070e(0x21a)]};}},'validate':async function(_0xddd6c4){const _0x3af2ad=_0x1e1702,_0x358c06={'utXfZ':'brx-'};if(!_0xddd6c4[_0x3af2ad(0x1ea)](_0x358c06[_0x3af2ad(0x206)]))return![];const _0x2c578b=await prisma['browser_extension_api_keys'][_0x3af2ad(0x208)]({'where':{'key':_0xddd6c4[_0x3af2ad(0x1fd)]()},'include':{'user':!![]}});if(!_0x2c578b)return![];const _0x5b66dc=await SystemSettings[_0x3af2ad(0x205)]();if(!_0x5b66dc)return _0x2c578b;return _0x2c578b[_0x3af2ad(0x1f7)]?_0x2c578b:![];},'get':async function(_0x340138={}){const _0x251bf1=_0x1e1702,_0x9c0036={'CRxKQ':_0x251bf1(0x210),'ekxNJ':function(_0x55b0e6,_0x4835c9){return _0x55b0e6!==_0x4835c9;},'vAZEf':'lawyP','WUiRn':function(_0x1607f0,_0x1088cf){return _0x1607f0!==_0x1088cf;},'RmFuO':_0x251bf1(0x219)};try{if(_0x9c0036[_0x251bf1(0x1f1)](_0x251bf1(0x1f8),_0x9c0036['vAZEf']))return _0x5c4a3c[_0x251bf1(0x201)](_0x9c0036['CRxKQ'],_0x585d63['message']),[];else{const _0x5ee459=await prisma['browser_extension_api_keys']['findFirst']({'where':_0x340138});return _0x5ee459;}}catch(_0x5123e1){return _0x9c0036[_0x251bf1(0x20f)](_0x251bf1(0x224),'muCxc')?(console[_0x251bf1(0x201)](_0x9c0036[_0x251bf1(0x218)],_0x5123e1['message']),null):(_0x3d53ae['error']('Failed\x20to\x20create\x20browser\x20extension\x20API\x20key',_0x1ae3fb),{'apiKey':null,'error':_0x292c4c[_0x251bf1(0x21a)]});}},'delete':async function(_0x4d5a37){const _0x3b3466=_0x1e1702,_0x5d384c={'wgBDa':function(_0x937556,_0x544ba7){return _0x937556(_0x544ba7);}};try{return await prisma[_0x3b3466(0x209)][_0x3b3466(0x213)]({'where':{'id':_0x5d384c[_0x3b3466(0x20e)](parseInt,_0x4d5a37)}}),{'success':!![],'error':null};}catch(_0x29098c){return console[_0x3b3466(0x201)](_0x3b3466(0x1f2),_0x29098c),{'success':![],'error':_0x29098c['message']};}},'where':async function(_0x41adff={},_0x3a4eb2=null,_0x2bb528=null){const _0x3bd0b5=_0x1e1702,_0x14aa82={'RblCH':function(_0x4510d1,_0x353752){return _0x4510d1(_0x353752);},'KWsaZ':_0x3bd0b5(0x221),'oqAev':function(_0x2e70bc,_0x862dca){return _0x2e70bc===_0x862dca;},'GcCpq':_0x3bd0b5(0x211),'YVcrk':function(_0x31524b,_0x3e7e34){return _0x31524b!==_0x3e7e34;},'xHyJS':'FAILED\x20TO\x20GET\x20BROWSER\x20EXTENSION\x20API\x20KEYS.'};try{if(_0x14aa82[_0x3bd0b5(0x204)](_0x14aa82[_0x3bd0b5(0x1fc)],_0x3bd0b5(0x211))){const _0x14920a=await prisma[_0x3bd0b5(0x209)]['findMany']({'where':_0x41adff,..._0x3a4eb2!==null?{'take':_0x3a4eb2}:{},..._0x14aa82['YVcrk'](_0x2bb528,null)?{'orderBy':_0x2bb528}:{},'include':{'user':!![]}});return _0x14920a;}else{const _0x3ae1ce=_0x14aa82[_0x3bd0b5(0x1fb)](_0xe68af4,_0x14aa82['KWsaZ']);return _0x3bd0b5(0x216)+_0x3ae1ce[_0x3bd0b5(0x203)]()[_0x3bd0b5(0x1f3)];}}catch(_0xee5bae){return console[_0x3bd0b5(0x201)](_0x14aa82[_0x3bd0b5(0x200)],_0xee5bae[_0x3bd0b5(0x21a)]),[];}},'whereWithUser':async function(_0x23b709,_0x2722ab={},_0x1093eb=null,_0x44f536=null){const _0x2f16cb=_0x1e1702,_0x128bd3={'wFHAB':_0x2f16cb(0x1f2),'kzswK':function(_0xde10f4,_0x52e79a){return _0xde10f4!==_0x52e79a;},'WPkQh':'ePupy'};if([ROLES[_0x2f16cb(0x20c)]][_0x2f16cb(0x1fe)](_0x23b709[_0x2f16cb(0x21c)]))return await this['where'](_0x2722ab,_0x1093eb,_0x44f536);try{if(_0x128bd3[_0x2f16cb(0x1ed)](_0x128bd3[_0x2f16cb(0x20d)],'HeUFc')){const _0x44eb4d=await prisma[_0x2f16cb(0x209)][_0x2f16cb(0x207)]({'where':{..._0x2722ab,'user_id':_0x23b709['id']},'include':{'user':!![]},..._0x1093eb!==null?{'take':_0x1093eb}:{},..._0x128bd3[_0x2f16cb(0x1ed)](_0x44f536,null)?{'orderBy':_0x44f536}:{}});return _0x44eb4d;}else return _0x394740[_0x2f16cb(0x201)](_0x128bd3[_0x2f16cb(0x1f0)],_0x21feab),{'success':![],'error':_0x23712c[_0x2f16cb(0x21a)]};}catch(_0x51faea){return console[_0x2f16cb(0x201)](_0x51faea['message']),[];}},'migrateApiKeysToMultiUser':async function(_0x31f7aa){const _0x1efe66=_0x1e1702,_0x18b602={'Rrjoz':'FAILED\x20TO\x20GET\x20BROWSER\x20EXTENSION\x20API\x20KEY.','AlFWA':function(_0x11a343,_0x466936){return _0x11a343===_0x466936;},'KXSuz':'YFLyx'};try{await prisma[_0x1efe66(0x209)]['updateMany']({'where':{'user_id':null},'data':{'user_id':_0x31f7aa}}),console[_0x1efe66(0x21e)](_0x1efe66(0x1ee));}catch(_0x480a94){if(_0x18b602[_0x1efe66(0x220)](_0x1efe66(0x21f),_0x18b602[_0x1efe66(0x21d)]))console[_0x1efe66(0x201)]('Error\x20migrating\x20API\x20keys\x20to\x20multi-user\x20mode:',_0x480a94);else return _0x31d75c['error'](_0x18b602[_0x1efe66(0x202)],_0x16d345['message']),null;}}};function _0x5e6b(_0x2da65d,_0x782781){const _0x171fc9=_0x171f();return _0x5e6b=function(_0x5e6bfb,_0x561310){_0x5e6bfb=_0x5e6bfb-0x1ea;let _0x49a38c=_0x171fc9[_0x5e6bfb];return _0x49a38c;},_0x5e6b(_0x2da65d,_0x782781);}module[_0x1e1702(0x214)]={'BrowserExtensionApiKey':BrowserExtensionApiKey};