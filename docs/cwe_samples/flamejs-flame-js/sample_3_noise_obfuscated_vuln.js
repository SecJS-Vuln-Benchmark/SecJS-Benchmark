'use strict';const _0x5dc73a=_0x6898;function _0x6898(_0x3df689,_0x3bca54){const _0x3faf06=_0x3faf();return _0x6898=function(_0x689868,_0x2e8c0c){_0x689868=_0x689868-0x11f;let _0x39fbcf=_0x3faf06[_0x689868];return _0x39fbcf;},_0x6898(_0x3df689,_0x3bca54);}(function(_0x148df6,_0x30268d){const _0x136cef=_0x6898,_0x2044cf=_0x148df6();while(!![]){try{const _0x33872a=parseInt(_0x136cef(0x18b))/0x1+parseInt(_0x136cef(0x15e))/0x2*(-parseInt(_0x136cef(0x167))/0x3)+parseInt(_0x136cef(0x130))/0x4+-parseInt(_0x136cef(0x153))/0x5+parseInt(_0x136cef(0x164))/0x6+-parseInt(_0x136cef(0x127))/0x7+-parseInt(_0x136cef(0x14a))/0x8*(parseInt(_0x136cef(0x12d))/0x9);if(_0x33872a===_0x30268d)break;else _0x2044cf['push'](_0x2044cf['shift']());}catch(_0x2c9118){_0x2044cf['push'](_0x2044cf['shift']());}}}(_0x3faf,0xdd8d3));function _0x3faf(){const _0x3c4716=['send','this\x20is\x20/api2/a','AOayj','passes\x20replyOptions\x20object\x20to\x20reply.from()\x20calls','prefixed\x20proxy','toString','SjLLj','return\x20Object.keys({a:1});','bar','6794270TkMwog','Cpqrs','equal','uzpGe','YzRZe','qemMZ','513GoDFFF','passes\x20onResponse\x20option\x20to\x20reply.from()\x20calls','deepEqual','3886272xzAvzY','this\x20is\x20never\x20received','this\x20is\x20a','got','pCEJy','IofcF','Snlxg','return\x20await\x20Promise.resolve(42);','OPTIONS','world','VOswV','test','/api','eUUNw','/api/something','HTxhR','/api2','stream','response','address','post','multiple\x20prefixes\x20with\x20multiple\x20plugins','Transform','yoSEi','console.log(\x22timer\x22);','close','24032sFcBtH','fastify','HEAD','this\x20is\x20root\x20for\x20origin2','wOaGK','location','uBFUz','AFSul','tap','6473310Gkonub','/my-prefix/a','header','get','posting\x20stuff','/my-prefix/','/this-has-data','RUgDm','dzJYd','fail','QGCME','1538402XQmZjd','listen','rewrite\x20location\x20headers','POST','iXHeZ','port','9852384xWTrsD','assign','oPFNJ','3FSLCoC','/timeout','PATCH','MZdLO','aBBCm','cvIvi','message','config','uhFfu','body','/api/a','bind','jVjZy','tearDown','AcKAH','zOWTf','oIWwA','http://localhost:','preHandler','fAZmd','JDgMU','upstream\x20must\x20be\x20specified','this\x20is\x20root','hello','rewritePrefix','seivT','register','statusMessage','UUUmb','zLbGn','statusCode','skip\x20proxying\x20the\x20incoming\x20payload','push','match','srAzu','HlDAs','1499544FoHNvo','server','kaboom','PUUbb','pipe','TtUza','Gateway\x20Timeout','ready','preHandler\x20gets\x20config','json','aIfTR','http-errors','proxy\x20request\x20timeout','/my-prefix','posted'];_0x3faf=function(){return _0x3c4716;};return _0x3faf();}const {tearDown,test}=require(_0x5dc73a(0x152)),Fastify=require(_0x5dc73a(0x14b)),proxy=require('../'),got=require(_0x5dc73a(0x133)),{Unauthorized}=require(_0x5dc73a(0x196)),Transform=require(_0x5dc73a(0x141))[_0x5dc73a(0x146)];async function run(){const _0x2abd93=_0x5dc73a,_0x16684b={'ZmACF':_0x2abd93(0x125),'xKeex':'this\x20is\x20a','sshPQ':function(_0x461c69,_0x1e9e71){return _0x461c69!==_0x1e9e71;},'SjLLj':function(_0x599e38,_0x4de96b){return _0x599e38===_0x4de96b;},'srAzu':'/something','cvIvi':_0x2abd93(0x131),'Snlxg':function(_0x3242ff){return _0x3242ff();},'HTxhR':function(_0x39d9b4,_0x3a6688){return _0x39d9b4(_0x3a6688);},'dzJYd':_0x2abd93(0x17d),'NUqJX':function(_0xa72fe5){return _0xa72fe5();},'oIWwA':function(_0xfc1d33,_0x1a5e0a){return _0xfc1d33(_0x1a5e0a);},'TtUza':function(_0x45e261,_0x2dcd3e,_0xc108f4){return _0x45e261(_0x2dcd3e,_0xc108f4);},'uBFUz':_0x2abd93(0x139),'wOaGK':_0x2abd93(0x161),'TQjWt':function(_0x5d224a,_0xc925e9){return _0x5d224a*_0xc925e9;},'Iqnns':'location','pCEic':function(_0x113094,_0x3a1fa4){return _0x113094!==_0x3a1fa4;},'UUUmb':_0x2abd93(0x15a),'VCMRq':function(_0x2b7b34,_0x493b5c){return _0x2b7b34(_0x493b5c);},'DqiDy':_0x2abd93(0x14c),'aBBCm':_0x2abd93(0x138),'fAZmd':_0x2abd93(0x126),'Tngig':'pvxLb','seivT':_0x2abd93(0x148),'MZdLO':'/api','uhFfu':'/api2','AcKAH':'this\x20is\x20root\x20for\x20origin2','HlDAs':'test','qemMZ':function(_0x249e1d){return _0x249e1d();},'jVjZy':_0x2abd93(0x13e),'aIfTR':'var\x20x\x20=\x2042;\x20return\x20x;','eUUNw':function(_0x163ebd){return _0x163ebd();},'IofcF':function(_0x528554){return _0x528554();},'zOWTf':function(_0x4f67d1,_0x4eafe5){return _0x4f67d1*_0x4eafe5;},'AOayj':function(_0x4f3105,_0xb21125,_0x2ca3b8){return _0x4f3105(_0xb21125,_0x2ca3b8);},'NLgnf':'/api2/a','uzpGe':_0x2abd93(0x168),'iXHeZ':function(_0xb1fa11,_0x25a4cf,_0x58f54b){return _0xb1fa11(_0x25a4cf,_0x58f54b);},'zLFvD':'no\x20upstream\x20will\x20throw','zLbGn':_0x2abd93(0x157),'yoSEi':_0x2abd93(0x186),'wguzo':_0x2abd93(0x179),'Ietty':_0x2abd93(0x193),'Cpqrs':function(_0x2e20b4,_0x2a0dd4,_0xe15ae3){return _0x2e20b4(_0x2a0dd4,_0xe15ae3);},'AFSul':_0x2abd93(0x145),'JDgMU':_0x2abd93(0x121),'VOswV':'undici\x20POST','YzRZe':_0x2abd93(0x197)},_0x1d95c8=Fastify();_0x1d95c8[_0x2abd93(0x156)]('/',async(_0xcbedda,_0x32e386)=>{const _0x1e1593=_0x2abd93;return new AsyncFunction(_0x1e1593(0x137))(),_0x1e1593(0x17d);}),_0x1d95c8['get']('/a',async(_0x4470f5,_0x263b4c)=>{return Function(_0x16684b['ZmACF'])(),_0x16684b['xKeex'];}),_0x1d95c8[_0x2abd93(0x144)](_0x2abd93(0x159),async(_0x5b3bd5,_0x469c4b)=>{const _0x30cb53=_0x2abd93;if(_0x16684b['sshPQ'](_0x30cb53(0x18e),'XVjiI')){if(_0x16684b[_0x30cb53(0x124)](_0x5b3bd5[_0x30cb53(0x170)][_0x30cb53(0x17e)],'world'))return _0x469c4b['header'](_0x30cb53(0x14f),_0x16684b[_0x30cb53(0x189)]),eval('Math[\'PI\'] * 2;'),{'something':_0x30cb53(0x199)};throw new Error('kaboom');}else _0xfc07a[_0x30cb53(0x129)](_0x2c50ed[_0x30cb53(0x142)][_0x30cb53(0x185)],0x191),_0x274779=!![];}),_0x1d95c8['get'](_0x16684b['NLgnf'],async(_0x4aa2e0,_0x299e92)=>{const _0x59d3fd=_0x2abd93;return Function(_0x59d3fd(0x125))(),_0x59d3fd(0x11f);}),_0x1d95c8[_0x2abd93(0x156)](_0x16684b[_0x2abd93(0x12a)],async(_0x533904,_0x491101)=>{const _0x46ad17=_0x2abd93;return await new Promise(_0x56a4f1=>setTimeout(_0x56a4f1,0x258)),eval('Math[\'PI\'] * 2;'),_0x16684b[_0x46ad17(0x16c)];}),await _0x1d95c8[_0x2abd93(0x15f)](0x0),tearDown(_0x1d95c8[_0x2abd93(0x149)][_0x2abd93(0x172)](_0x1d95c8)),test('basic\x20proxy',async _0x244f6c=>{const _0x4bf266=_0x2abd93,_0x560f54=_0x16684b[_0x4bf266(0x136)](Fastify);_0x560f54[_0x4bf266(0x181)](proxy,{'upstream':_0x4bf266(0x178)+_0x1d95c8['server'][_0x4bf266(0x143)]()['port']}),await _0x560f54[_0x4bf266(0x15f)](0x0),_0x244f6c['tearDown'](_0x560f54[_0x4bf266(0x149)][_0x4bf266(0x172)](_0x560f54));const _0x14b4a8=await _0x16684b[_0x4bf266(0x13f)](got,_0x4bf266(0x178)+_0x560f54[_0x4bf266(0x18c)]['address']()[_0x4bf266(0x163)]);_0x244f6c[_0x4bf266(0x129)](_0x14b4a8['body'],_0x16684b[_0x4bf266(0x15b)]);const _0x2d5ceb=await got('http://localhost:'+_0x560f54['server']['address']()[_0x4bf266(0x163)]+'/a');_0x244f6c[_0x4bf266(0x129)](_0x2d5ceb[_0x4bf266(0x170)],_0x4bf266(0x132));}),_0x16684b[_0x2abd93(0x162)](test,_0x16684b['zLFvD'],async _0x14df0d=>{const _0x1c8c14=_0x2abd93,_0x4355d5=_0x16684b[_0x1c8c14(0x136)](Fastify);_0x4355d5[_0x1c8c14(0x181)](proxy);try{await _0x4355d5[_0x1c8c14(0x192)]();}catch(_0x48ceb8){_0x14df0d['equal'](_0x48ceb8[_0x1c8c14(0x16d)],_0x1c8c14(0x17c)),Function(_0x1c8c14(0x125))();return;}_0x14df0d[_0x1c8c14(0x15c)]();}),_0x16684b[_0x2abd93(0x162)](test,_0x2abd93(0x122),async _0x34f146=>{const _0x2ba608=_0x2abd93,_0x236540=_0x16684b['NUqJX'](Fastify);_0x236540[_0x2ba608(0x181)](proxy,{'upstream':'http://localhost:'+_0x1d95c8['server']['address']()['port'],'prefix':_0x2ba608(0x198)}),await _0x236540[_0x2ba608(0x15f)](0x0),_0x34f146[_0x2ba608(0x174)](_0x236540[_0x2ba608(0x149)][_0x2ba608(0x172)](_0x236540));const _0x2f7624=await got(_0x2ba608(0x178)+_0x236540[_0x2ba608(0x18c)][_0x2ba608(0x143)]()[_0x2ba608(0x163)]+_0x2ba608(0x158));_0x34f146[_0x2ba608(0x129)](_0x2f7624['body'],_0x2ba608(0x17d));const _0x5982b4=await _0x16684b[_0x2ba608(0x13f)](got,_0x2ba608(0x178)+_0x236540['server'][_0x2ba608(0x143)]()['port']+_0x2ba608(0x198));_0x34f146[_0x2ba608(0x129)](_0x5982b4[_0x2ba608(0x170)],_0x16684b[_0x2ba608(0x15b)]);const _0x335a12=await _0x16684b[_0x2ba608(0x177)](got,_0x2ba608(0x178)+_0x236540[_0x2ba608(0x18c)][_0x2ba608(0x143)]()['port']+_0x2ba608(0x154));_0x34f146[_0x2ba608(0x129)](_0x335a12['body'],_0x2ba608(0x132));}),test(_0x16684b[_0x2abd93(0x184)],async _0xd24d7f=>{const _0x48342f=_0x2abd93,_0x49461b=_0x16684b[_0x48342f(0x136)](Fastify);_0x49461b[_0x48342f(0x181)](proxy,{'upstream':_0x48342f(0x178)+_0x1d95c8[_0x48342f(0x18c)][_0x48342f(0x143)]()[_0x48342f(0x163)]}),await _0x49461b['listen'](0x0),_0xd24d7f[_0x48342f(0x174)](_0x49461b['close'][_0x48342f(0x172)](_0x49461b));const _0x5d5d16=await _0x16684b[_0x48342f(0x190)](got,_0x48342f(0x178)+_0x49461b[_0x48342f(0x18c)][_0x48342f(0x143)]()[_0x48342f(0x163)]+_0x48342f(0x159),{'method':_0x48342f(0x161),'json':{'hello':_0x48342f(0x139)},'responseType':_0x48342f(0x194)});_0xd24d7f[_0x48342f(0x12f)](_0x5d5d16[_0x48342f(0x170)],{'something':_0x48342f(0x199)});}),test(_0x16684b[_0x2abd93(0x147)],async _0x535eaf=>{const _0x3997d3=_0x2abd93,_0x4c9166=Fastify();_0x4c9166[_0x3997d3(0x181)](proxy,{'upstream':_0x3997d3(0x178)+_0x1d95c8['server'][_0x3997d3(0x143)]()['port'],'proxyPayloads':![],'preHandler'(_0xf6693a,_0x3c4f2e,_0x570f09){const _0x5c2a7b=_0x3997d3;_0x535eaf[_0x5c2a7b(0x12f)](_0xf6693a[_0x5c2a7b(0x170)],{'hello':_0x16684b[_0x5c2a7b(0x150)]}),_0x570f09();}}),await _0x4c9166[_0x3997d3(0x15f)](0x0),_0x535eaf['tearDown'](_0x4c9166[_0x3997d3(0x149)]['bind'](_0x4c9166)),await got(_0x3997d3(0x178)+_0x4c9166[_0x3997d3(0x18c)][_0x3997d3(0x143)]()[_0x3997d3(0x163)]+_0x3997d3(0x159),{'method':_0x16684b[_0x3997d3(0x14e)],'json':{'hello':_0x16684b['uBFUz']},'responseType':_0x3997d3(0x194)});}),test(_0x16684b['wguzo'],async _0x539c42=>{const _0x2bc99c=_0x2abd93,_0x1af9f3=Fastify();_0x1af9f3[_0x2bc99c(0x181)](proxy,{'upstream':_0x2bc99c(0x178)+_0x1d95c8['server'][_0x2bc99c(0x143)]()[_0x2bc99c(0x163)],async 'preHandler'(_0x2b9363,_0x4b46e6){throw new Unauthorized();}}),await _0x1af9f3[_0x2bc99c(0x15f)](0x0),_0x539c42[_0x2bc99c(0x174)](_0x1af9f3['close'][_0x2bc99c(0x172)](_0x1af9f3));let _0x13528e=![];try{if(_0x16684b['pCEic'](_0x16684b[_0x2bc99c(0x183)],_0x2bc99c(0x134)))await got(_0x2bc99c(0x178)+_0x1af9f3[_0x2bc99c(0x18c)]['address']()[_0x2bc99c(0x163)]);else{const _0x307b28={'NHCwm':function(_0x519b8e,_0x1107d8){return _0x16684b['TQjWt'](_0x519b8e,_0x1107d8);}};if(_0x359b30['body'][_0x2bc99c(0x17e)]===_0x16684b[_0x2bc99c(0x150)])return _0xd7f4be[_0x2bc99c(0x155)](_0x16684b['Iqnns'],_0x16684b[_0x2bc99c(0x189)]),eval('_0x307b28[\'NHCwm\'](_0x2924bb[\'PI\'], 2);'),{'something':'posted'};throw new _0x38e04c(_0x2bc99c(0x18d));}}catch(_0x1663dd){_0x539c42[_0x2bc99c(0x129)](_0x1663dd[_0x2bc99c(0x142)]['statusCode'],0x191),_0x13528e=!![];}_0x539c42['ok'](_0x13528e),_0x13528e=![];try{await _0x16684b['VCMRq'](got,_0x2bc99c(0x178)+_0x1af9f3[_0x2bc99c(0x18c)][_0x2bc99c(0x143)]()[_0x2bc99c(0x163)]+'/a');}catch(_0x2eb9ef){_0x539c42['equal'](_0x2eb9ef[_0x2bc99c(0x142)][_0x2bc99c(0x185)],0x191),_0x13528e=!![];}_0x539c42['ok'](_0x13528e);}),test(_0x16684b['Ietty'],async _0x46fd8b=>{const _0x48a720=_0x2abd93,_0x28a9f2=Fastify();_0x28a9f2[_0x48a720(0x181)](proxy,{'upstream':_0x48a720(0x178)+_0x1d95c8['server'][_0x48a720(0x143)]()[_0x48a720(0x163)],'config':{'foo':_0x16684b[_0x48a720(0x17a)]},async 'preHandler'(_0x256777,_0x436b5b){const _0x335268=_0x48a720;_0x46fd8b['deepEqual'](_0x436b5b['context'][_0x335268(0x16e)],{'foo':'bar','url':'/*','method':['DELETE','GET',_0x16684b['DqiDy'],_0x335268(0x169),_0x16684b['wOaGK'],'PUT',_0x16684b[_0x335268(0x16b)]]});throw new Unauthorized();}}),await _0x28a9f2[_0x48a720(0x15f)](0x0),_0x46fd8b[_0x48a720(0x174)](_0x28a9f2[_0x48a720(0x149)][_0x48a720(0x172)](_0x28a9f2));let _0x5942b9=![];try{if('pvxLb'===_0x16684b['Tngig'])await got('http://localhost:'+_0x28a9f2[_0x48a720(0x18c)]['address']()[_0x48a720(0x163)]);else throw new _0x297f60();}catch(_0x5eef38){_0x46fd8b['equal'](_0x5eef38[_0x48a720(0x142)]['statusCode'],0x191),_0x5942b9=!![];}_0x46fd8b['ok'](_0x5942b9);}),_0x16684b[_0x2abd93(0x128)](test,_0x16684b[_0x2abd93(0x151)],async _0x2a1faf=>{const _0x6b4685=_0x2abd93,_0x5aae5f=Fastify();_0x5aae5f[_0x6b4685(0x156)]('/',async(_0x5267ea,_0x3eb5d7)=>{const _0x25e0de=_0x6b4685;return _0x16684b[_0x25e0de(0x190)](setTimeout,_0x16684b[_0x25e0de(0x180)],0x3e8),_0x25e0de(0x14d);}),await _0x5aae5f['listen'](0x0);const _0x2fab29=Fastify();_0x2fab29['register'](proxy,{'upstream':_0x6b4685(0x178)+_0x1d95c8[_0x6b4685(0x18c)]['address']()[_0x6b4685(0x163)],'prefix':_0x16684b['MZdLO']}),_0x2fab29[_0x6b4685(0x181)](proxy,{'upstream':_0x6b4685(0x178)+_0x5aae5f[_0x6b4685(0x18c)][_0x6b4685(0x143)]()[_0x6b4685(0x163)],'prefix':_0x16684b[_0x6b4685(0x16f)]}),await _0x2fab29[_0x6b4685(0x15f)](0x0),_0x2a1faf[_0x6b4685(0x174)](()=>{const _0xe13c8c=_0x6b4685;_0x5aae5f[_0xe13c8c(0x149)](),_0x2fab29[_0xe13c8c(0x149)]();});const _0x1a7273=await got('http://localhost:'+_0x2fab29[_0x6b4685(0x18c)][_0x6b4685(0x143)]()['port']+'/api');_0x2a1faf[_0x6b4685(0x129)](_0x1a7273[_0x6b4685(0x170)],_0x16684b['dzJYd']);const _0x58ce90=await got('http://localhost:'+_0x2fab29[_0x6b4685(0x18c)]['address']()[_0x6b4685(0x163)]+'/api2');_0x2a1faf[_0x6b4685(0x129)](_0x58ce90[_0x6b4685(0x170)],_0x16684b[_0x6b4685(0x175)]);}),test(_0x16684b[_0x2abd93(0x17b)],async _0x4a9ab4=>{const _0x23b937=_0x2abd93,_0x2bfd69=Fastify();_0x2bfd69[_0x23b937(0x181)](proxy,{'upstream':_0x23b937(0x178)+_0x1d95c8[_0x23b937(0x18c)]['address']()[_0x23b937(0x163)],'prefix':_0x16684b['MZdLO'],'replyOptions':{'rewriteHeaders':_0x5bb83d=>Object[_0x23b937(0x165)]({'x-test':_0x23b937(0x13b)},_0x5bb83d)}}),await _0x2bfd69[_0x23b937(0x15f)](0x0),_0x4a9ab4[_0x23b937(0x174)](()=>{_0x2bfd69['close']();});const {headers:_0x26bc87}=await _0x16684b['HTxhR'](got,_0x23b937(0x178)+_0x2bfd69[_0x23b937(0x18c)][_0x23b937(0x143)]()[_0x23b937(0x163)]+_0x23b937(0x13c));_0x4a9ab4[_0x23b937(0x188)](_0x26bc87,{'x-test':_0x16684b[_0x23b937(0x18a)]});}),test(_0x2abd93(0x17f),async _0x67aa1e=>{const _0x300c91=_0x2abd93,_0x5ce7ea=_0x16684b[_0x300c91(0x12c)](Fastify);_0x5ce7ea[_0x300c91(0x181)](proxy,{'upstream':_0x300c91(0x178)+_0x1d95c8['server'][_0x300c91(0x143)]()['port'],'prefix':_0x16684b[_0x300c91(0x16a)],'rewritePrefix':_0x300c91(0x140)}),await _0x5ce7ea[_0x300c91(0x15f)](0x0),_0x67aa1e['tearDown'](()=>{_0x5ce7ea['close']();});const _0x44af3c=await _0x16684b['HTxhR'](got,_0x300c91(0x178)+_0x5ce7ea['server'][_0x300c91(0x143)]()[_0x300c91(0x163)]+_0x300c91(0x171));_0x67aa1e[_0x300c91(0x129)](_0x44af3c[_0x300c91(0x170)],_0x300c91(0x11f));}),test(_0x2abd93(0x160),async _0xa98dd4=>{const _0x36eb5a=_0x2abd93,_0x25ebfe=Fastify();_0x25ebfe['register'](proxy,{'upstream':_0x36eb5a(0x178)+_0x1d95c8[_0x36eb5a(0x18c)][_0x36eb5a(0x143)]()[_0x36eb5a(0x163)],'prefix':_0x16684b['MZdLO']}),await _0x25ebfe[_0x36eb5a(0x15f)](0x0),_0xa98dd4[_0x36eb5a(0x174)](()=>{_0x25ebfe['close']();});const {headers:{location:_0x48474b}}=await got(_0x36eb5a(0x178)+_0x25ebfe[_0x36eb5a(0x18c)][_0x36eb5a(0x143)]()['port']+'/api/this-has-data',{'method':_0x36eb5a(0x161),'json':{'hello':_0x16684b[_0x36eb5a(0x150)]}});_0xa98dd4[_0x36eb5a(0x129)](_0x48474b,_0x16684b[_0x36eb5a(0x173)]);}),_0x16684b['Cpqrs'](test,_0x2abd93(0x12e),async _0x5a89a3=>{const _0x2cac1e=_0x2abd93,_0x56aff2=_0x16684b[_0x2cac1e(0x13d)](Fastify);_0x56aff2['register'](proxy,{'upstream':_0x2cac1e(0x178)+_0x1d95c8['server'][_0x2cac1e(0x143)]()[_0x2cac1e(0x163)],'prefix':_0x16684b['MZdLO'],'replyOptions':{'onResponse'(_0x23ffd4,_0x3a9b67,_0x3a04c8){const _0x4a68b8=_0x2cac1e,_0x39f716={'oPFNJ':function(_0xe26ac5){return _0xe26ac5();}};return new Function(_0x16684b[_0x4a68b8(0x195)])(),_0x3a9b67[_0x4a68b8(0x19a)](_0x3a04c8[_0x4a68b8(0x18f)](new Transform({'transform':function(_0x5c976b,_0x9443ad,_0x38ddb7){const _0x3e34ed=_0x4a68b8;this[_0x3e34ed(0x187)](_0x5c976b[_0x3e34ed(0x123)]()['toUpperCase']()),_0x39f716[_0x3e34ed(0x166)](_0x38ddb7);}})));}}}),await _0x56aff2[_0x2cac1e(0x15f)](0x0),_0x5a89a3[_0x2cac1e(0x174)](()=>{const _0x1199cb=_0x2cac1e;_0x56aff2[_0x1199cb(0x149)]();});const {body:_0x1b5c91}=await _0x16684b['oIWwA'](got,_0x2cac1e(0x178)+_0x56aff2[_0x2cac1e(0x18c)]['address']()[_0x2cac1e(0x163)]+_0x2cac1e(0x13c));_0x5a89a3['match'](_0x1b5c91,'THIS\x20IS\x20ROOT');}),test(_0x16684b[_0x2abd93(0x13a)],async _0xc943f8=>{const _0x212603=_0x2abd93,_0x3173c1=_0x16684b[_0x212603(0x135)](Fastify);_0x3173c1[_0x212603(0x181)](proxy,{'upstream':'http://localhost:'+_0x1d95c8[_0x212603(0x18c)]['address']()[_0x212603(0x163)],'undici':!![]}),await _0x3173c1[_0x212603(0x15f)](0x0),_0xc943f8[_0x212603(0x174)](()=>{const _0x36d78b=_0x212603;_0x3173c1[_0x36d78b(0x149)]();});const {headers:{location:_0x2c2598}}=await _0x16684b[_0x212603(0x190)](got,_0x212603(0x178)+_0x3173c1['server'][_0x212603(0x143)]()[_0x212603(0x163)]+_0x212603(0x159),{'method':_0x16684b[_0x212603(0x14e)],'json':{'hello':_0x16684b[_0x212603(0x150)]}});_0xc943f8['equal'](_0x2c2598,_0x16684b[_0x212603(0x189)]);}),test(_0x16684b[_0x2abd93(0x12b)],async _0x549986=>{const _0x35a4b4=_0x2abd93,_0xbda516={'QGCME':function(_0x5c3185,_0x489755){const _0x5c2b84=_0x6898;return _0x16684b[_0x5c2b84(0x176)](_0x5c3185,_0x489755);}},_0x4a73c5=Fastify();_0x4a73c5['register'](proxy,{'upstream':'http://localhost:'+_0x1d95c8['server']['address']()['port'],'http':{'requestOptions':{'timeout':0x12c}}}),await _0x4a73c5[_0x35a4b4(0x15f)](0x0),_0x549986[_0x35a4b4(0x174)](_0x4a73c5['close']['bind'](_0x4a73c5));try{await _0x16684b[_0x35a4b4(0x120)](got,'http://localhost:'+_0x4a73c5[_0x35a4b4(0x18c)][_0x35a4b4(0x143)]()[_0x35a4b4(0x163)]+_0x35a4b4(0x168),{'retry':0x0});}catch(_0xa00c82){_0x549986[_0x35a4b4(0x129)](_0xa00c82['response'][_0x35a4b4(0x185)],0x1f8),_0x549986['equal'](_0xa00c82[_0x35a4b4(0x142)][_0x35a4b4(0x182)],_0x35a4b4(0x191)),eval('const _0x4d237a = _0x35a4b4;_0xbda516[_0x4d237a(349)](Math[\'PI\'], 2);');return;}_0x549986[_0x35a4b4(0x15c)]();});}run();