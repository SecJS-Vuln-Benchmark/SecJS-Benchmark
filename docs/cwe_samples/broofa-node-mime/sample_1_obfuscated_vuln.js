function _0x4bec(_0x1fcc72,_0x2795b7){const _0x4a94e0=_0x4a94();return _0x4bec=function(_0x4bec64,_0x47c745){_0x4bec64=_0x4bec64-0x1c9;let _0x49c58a=_0x4a94e0[_0x4bec64];return _0x49c58a;},_0x4bec(_0x1fcc72,_0x2795b7);}function _0x4a94(){const _0x18e71a=['BvzUJ','kxmag','isArray','mKLIk','TWAvZ','DELETE','NaYIl','aoKpB','DCE_API_GW','LSqaq','mFjjw','update','AlPQS','substring','Wozrg','message','Parameter\x20\x27budgetNotificationEmails\x27\x20missing.','HnReh','accounts?limit=500','LxIeV','hgFHU','FJCHQ','fviBJ','bQHZv','Failed\x20to\x20create\x20lease\x20for\x20','Parameter\x20\x27budgetAmount\x27\x20missing.','HoskF','write','TLQSf','AnliZ','request','leases?limit=500','23AlQbio','bztdL','mRxNY','parse','CZfna','RLthb','Parameter\x20\x27expiresOn\x27\x20missing.','DCE_LEASES_TABLE','Failed\x20to\x20load\x20usage\x20data.','Error\x20trying\x20to\x20update\x20DynamoDB\x20table\x20record\x20for\x20lease\x20for\x20','QAYqE','llqDc','env','body','CFAtR','uDWbg','DynamoDB\x20table\x20record\x20for\x20lease\x20for\x20','Internal\x20error\x20while\x20trying\x20to\x20update\x20lease.','aCiNg','GPssp','HnwIj','Failed\x20to\x20list\x20usage.','heMtu','zqoIY','TtSTf','Failed\x20to\x20terminate\x20lease\x20for\x20','LOZZr','Event\x20arguments\x20missing.','555dUWwYz','Parameter\x20\x27action\x27\x20missing.','pathname','Error\x20trying\x20to\x20retrieve\x20usage\x20data.','then','sNRcl','handler','TxFPH','JfxUW','Internal\x20error\x20while\x20trying\x20to\x20terminate\x20lease.','updateLease','all','cnLoF','fVegL','createLease','end','listUsage','NhxHB','epOxR','5613824AebpAt','data','kcvAJ','gVWOc','Parameter\x20\x27accountId\x27\x20missing.','14236HgRnGL','set\x20LeaseStatus\x20=\x20:s,\x20LeaseStatusReason=:r,\x20BudgetAmount=:b,\x20ExpiresOn=:e,\x20BudgetNotificationEmails=:n','usage?limit10500','bqXkJ','3699540wHURLF','GET','ServerError','UPDATED_NEW','toString','application/json','costAmount','Parameter\x20\x27principalId\x27\x20missing.','lgLCt','ouxyy','accountId','fxyXr','Internal\x20error\x20while\x20trying\x20to\x20execute\x20task.','OPnqd','Statistics\x20data\x20successfully\x20compiled.','DynamoDB','LfRQx','Failed\x20to\x20list\x20leases.','hostname','yHhZy','QreSm','47666yAjzgw','Parameter\x20\x27leaseStatus\x27\x20missing.','IpaFQ','1528038BLygUj','vjhso','MtlTL','execute-api','https','PuPtB','success','DHGUk','action','Jnecq','Internal\x20error\x20while\x20trying\x20to\x20create\x20lease.','Internal\x20error.','Found\x20already\x20existing\x20lease\x20for\x20','QzsUV','\x20successfully\x20created.','aws4','nLrmS','PExBu','usage?limit=1000','qOChn','deleteLease','stringify','DocumentClient','xCiKi','log','mlEpU','Error\x20trying\x20to\x20retrieve\x20data\x20for\x20statistics.','reduce','aws-sdk','Failed\x20to\x20load\x20statistics\x20data.','catch','Usage\x20data\x20successfully\x20loaded.','rvTNY','MZofy','headers','paramJson','Lease\x20for\x20','Error\x20trying\x20to\x20delete\x20lease\x20for\x20','createdOn','principalId','2524473pcctBf','Parameter\x20\x27leaseStatusReason\x27\x20missing.','7DOQrbD','sign','error','successMessage','AlreadyExistsError','zHFce','mSEzo','split','RcExr','gxXRd','No\x20Available\x20accounts\x20at\x20this\x20moment','toISOString','NIlMr','promise','Parameter\x20\x27budgetCurrency\x27\x20missing.','Parameter\x20\x27user\x27\x20missing.','NnzGT','code','aIKSE','8518490Gruefw','pJcRY','REGION','SGzcp'];_0x4a94=function(){return _0x18e71a;};return _0x4a94();}const _0x1abc40=_0x4bec;(function(_0x4ee8c4,_0x393e49){const _0x230d9a=_0x4bec,_0x428ad7=_0x4ee8c4();while(!![]){try{const _0x542dd4=-parseInt(_0x230d9a(0x25c))/0x1*(parseInt(_0x230d9a(0x1f8))/0x2)+parseInt(_0x230d9a(0x223))/0x3+-parseInt(_0x230d9a(0x1df))/0x4*(parseInt(_0x230d9a(0x278))/0x5)+-parseInt(_0x230d9a(0x1e3))/0x6+-parseInt(_0x230d9a(0x225))/0x7*(-parseInt(_0x230d9a(0x1da))/0x8)+-parseInt(_0x230d9a(0x1fb))/0x9+parseInt(_0x230d9a(0x238))/0xa;if(_0x542dd4===_0x393e49)break;else _0x428ad7['push'](_0x428ad7['shift']());}catch(_0x24c2f3){_0x428ad7['push'](_0x428ad7['shift']());}}}(_0x4a94,0xa2790));const https=require(_0x1abc40(0x1ff)),aws4=require(_0x1abc40(0x20a)),AWS=require(_0x1abc40(0x217)),apiUrl=new URL(process[_0x1abc40(0x268)][_0x1abc40(0x244)]),region=process['env'][_0x1abc40(0x23a)],leasesTable=process[_0x1abc40(0x268)][_0x1abc40(0x263)],serviceName=_0x1abc40(0x1fe),respondWithError=(_0x14fb85=_0x1abc40(0x206),_0x1e8ce2={})=>{const _0x46b377=_0x1abc40,_0x2ea116={'HnReh':_0x46b377(0x227)};return console[_0x46b377(0x227)](_0x14fb85,_0x1e8ce2),JSON['stringify']({'status':_0x2ea116[_0x46b377(0x24d)],'message':_0x14fb85,'errorObject':_0x1e8ce2});},respondWithSuccess=(_0x46a7ef='',_0x50f25b={})=>{const _0x197fb3=_0x1abc40,_0x77ddae={'aoKpB':_0x197fb3(0x227),'mSEzo':_0x197fb3(0x201),'cnLoF':function(_0x2ca1f5,_0xfe43d8){return _0x2ca1f5!==_0xfe43d8;},'MtlTL':function(_0x44ec35,_0x3bef90){return _0x44ec35===_0x3bef90;},'HoskF':_0x197fb3(0x245)};let _0x9bc796={'status':_0x77ddae[_0x197fb3(0x22b)],'body':_0x50f25b};if(_0x77ddae[_0x197fb3(0x1d3)](_0x46a7ef,'')){if(_0x77ddae[_0x197fb3(0x1fd)](_0x77ddae[_0x197fb3(0x256)],_0x197fb3(0x26e)))return _0xb6944c[_0x197fb3(0x227)](_0x13227e,_0x8d2aeb),_0x2297b7[_0x197fb3(0x210)]({'status':_0x77ddae[_0x197fb3(0x243)],'message':_0x5ef242,'errorObject':_0x30c156});else console[_0x197fb3(0x213)](_0x46a7ef,_0x50f25b),_0x9bc796[_0x197fb3(0x228)]=_0x46a7ef;}return JSON[_0x197fb3(0x210)](_0x9bc796);},invokeApi=(_0x4ebb6f,_0x276226,_0xeb587=null)=>{const _0x2b4a53=_0x1abc40,_0x53c17d={'vjhso':function(_0x3d660e,_0x2a1fef){return _0x3d660e(_0x2a1fef);},'QzsUV':_0x2b4a53(0x1db),'PExBu':_0x2b4a53(0x227),'RLthb':function(_0x5f4575,_0x514276){return _0x5f4575+_0x514276;},'GaLJX':_0x2b4a53(0x1e8)};return new Promise((_0xf2120f,_0x434863)=>{const _0x29150c=_0x2b4a53,_0x291dc7=JSON[_0x29150c(0x210)](_0xeb587);let _0x1ce22b={'hostname':apiUrl[_0x29150c(0x1f5)],'service':serviceName,'region':region,'method':_0x276226,'path':_0x53c17d[_0x29150c(0x261)](apiUrl[_0x29150c(0x1c9)],'/')+_0x4ebb6f};_0xeb587!==null&&(_0x1ce22b[_0x29150c(0x269)]=_0x291dc7,_0x1ce22b[_0x29150c(0x21d)]={'Content-Type':_0x53c17d['GaLJX'],'Content-Length':Buffer['byteLength'](_0x291dc7)});const _0x36dc62=https[_0x29150c(0x25a)](aws4[_0x29150c(0x226)](_0x1ce22b),_0x263182=>{const _0x206bab=_0x29150c,_0x27634c={'QreSm':function(_0x1d4ff7,_0x4e4acf){return _0x1d4ff7===_0x4e4acf;},'TxFPH':function(_0x592a36,_0x450212){const _0x2748da=_0x4bec;return _0x53c17d[_0x2748da(0x1fc)](_0x592a36,_0x450212);}};let _0x3a7891='';_0x263182['on'](_0x53c17d[_0x206bab(0x208)],_0x52d55a=>{_0x3a7891+=_0x52d55a;}),_0x263182['on']('end',()=>{const _0x59dbc1=_0x206bab;if(_0x27634c[_0x59dbc1(0x1f7)](_0x59dbc1(0x214),_0x59dbc1(0x214))){let _0x370381;try{_0x370381=JSON[_0x59dbc1(0x25f)](_0x3a7891[_0x59dbc1(0x1e7)]());}catch(_0x550c09){_0x370381=_0x3a7891[_0x59dbc1(0x1e7)]();}_0x27634c[_0x59dbc1(0x1ce)](_0xf2120f,_0x370381);}else return _0x46cd5a(_0x59dbc1(0x1ef),_0x1eddd0);}),_0x263182['on'](_0x53c17d[_0x206bab(0x20c)],_0x978af9=>_0x434863(_0x978af9));});_0x36dc62[_0x29150c(0x257)](_0x291dc7),_0x36dc62[_0x29150c(0x1d6)]();});},listLeases=()=>{const _0x46823b=_0x1abc40,_0x3d2d18={'qOChn':_0x46823b(0x1f4),'OPnqd':function(_0x536c4a,_0x207d21,_0x5de905){return _0x536c4a(_0x207d21,_0x5de905);},'AnliZ':'leases?limit=500','tONgq':'usage?limit=1000','vnLKI':_0x46823b(0x1e4)},_0x51e21c=_0x186a90=>{const _0x2419e0=_0x46823b;return new Date(_0x186a90)[_0x2419e0(0x230)]()[_0x2419e0(0x249)](0x0,0xa);};return Promise[_0x46823b(0x1d2)]([invokeApi(_0x3d2d18[_0x46823b(0x259)],'GET'),invokeApi(_0x3d2d18['tONgq'],_0x3d2d18['vnLKI'])])[_0x46823b(0x1cb)](_0x215eb7=>{const _0x21dac4=_0x46823b,_0x22f397='0|2|5|1|4|3'[_0x21dac4(0x22c)]('|');let _0x93f069=0x0;while(!![]){switch(_0x22f397[_0x93f069++]){case'0':if(_0x215eb7[_0x21dac4(0x227)])return respondWithError(_0x3d2d18[_0x21dac4(0x20e)],_0x215eb7[_0x21dac4(0x227)]);continue;case'1':if(!Array[_0x21dac4(0x23e)](_0x215eb7[0x0]))return respondWithError(_0x3d2d18[_0x21dac4(0x20e)],_0x215eb7[0x0]);continue;case'2':if(_0x215eb7[0x0][_0x21dac4(0x24b)])return _0x3d2d18[_0x21dac4(0x1f0)](respondWithError,'Failed\x20to\x20list\x20leases.',_0x215eb7[0x0][_0x21dac4(0x24b)]);continue;case'3':return respondWithSuccess('',{'leases':_0x215eb7[0x0]['map'](_0x1901f3=>({..._0x1901f3,'spendAmount':_0x215eb7[0x1][_0x21dac4(0x216)]((_0x43ae3b,_0x3b714f)=>_0x3b714f[_0x21dac4(0x222)]===_0x1901f3[_0x21dac4(0x222)]&&_0x3b714f[_0x21dac4(0x1ed)]===_0x1901f3[_0x21dac4(0x1ed)]&&_0x51e21c(_0x3b714f['startDate'])>=_0x51e21c(_0x1901f3[_0x21dac4(0x221)])&&_0x51e21c(_0x3b714f['endDate'])<=_0x51e21c(_0x1901f3['expiresOn'])?_0x43ae3b+parseFloat(_0x3b714f[_0x21dac4(0x1e9)]):_0x43ae3b,0x0)}))});case'4':if(!Array[_0x21dac4(0x23e)](_0x215eb7[0x1]))return _0x3d2d18['OPnqd'](respondWithError,_0x3d2d18[_0x21dac4(0x20e)],_0x215eb7[0x1]);continue;case'5':if(_0x215eb7[0x1]['message'])return _0x3d2d18[_0x21dac4(0x1f0)](respondWithError,_0x21dac4(0x271),_0x215eb7[0x1][_0x21dac4(0x24b)]);continue;}break;}});},createLease=({budgetAmount:_0x1f4917,expiresOn:_0x2ccc84,principalId:_0x1e7efe,budgetNotificationEmails:_0x5acdf4,budgetCurrency:_0x1a058b,user:_0x274f7b})=>{const _0x44d1e4=_0x1abc40,_0x4cc925={'yHhZy':'No\x20more\x20free\x20AWS\x20accounts\x20available.','BvzUJ':function(_0x5028fc,_0x41aca7){return _0x5028fc+_0x41aca7;},'vlAfe':_0x44d1e4(0x229),'mFjjw':function(_0x53758c,_0xc51ac4,_0x2f345f){return _0x53758c(_0xc51ac4,_0x2f345f);},'fviBJ':_0x44d1e4(0x207),'sNRcl':function(_0x139e86,_0x25f1aa){return _0x139e86+_0x25f1aa;},'NaYIl':_0x44d1e4(0x21f),'aIKSE':function(_0x33074e,_0x81c6ab){return _0x33074e!==_0x81c6ab;},'DHGUk':_0x44d1e4(0x253),'hgFHU':_0x44d1e4(0x1e5),'GPssp':function(_0x1c71e3,_0x5d4fcb,_0x57aa44){return _0x1c71e3(_0x5d4fcb,_0x57aa44);},'SGzcp':function(_0x45ccbf,_0x18f24d){return _0x45ccbf+_0x18f24d;},'tMYid':'\x20successfully\x20created.','NhxHB':_0x44d1e4(0x205),'lgLCt':_0x44d1e4(0x255),'gVWOc':function(_0x1ee9e7,_0x9e8d9c,_0x11dbe8){return _0x1ee9e7(_0x9e8d9c,_0x11dbe8);},'CFAtR':'Parameter\x20\x27principalId\x27\x20missing.','iXEFg':function(_0x5d435d,_0x3196eb,_0x17c941){return _0x5d435d(_0x3196eb,_0x17c941);},'zHFce':function(_0x52b829,_0x40ed0f,_0x48c4b6,_0xd5c0e5){return _0x52b829(_0x40ed0f,_0x48c4b6,_0xd5c0e5);},'rvTNY':'leases','fxyXr':'POST'};if(!_0x1f4917)return respondWithError(_0x4cc925[_0x44d1e4(0x1d8)],_0x4cc925[_0x44d1e4(0x1eb)]);if(!_0x2ccc84)return _0x4cc925[_0x44d1e4(0x1dd)](respondWithError,_0x4cc925[_0x44d1e4(0x1d8)],_0x44d1e4(0x262));if(!_0x1e7efe)return respondWithError(_0x44d1e4(0x205),_0x4cc925[_0x44d1e4(0x26a)]);if(!_0x1a058b)return _0x4cc925['iXEFg'](respondWithError,_0x44d1e4(0x205),_0x44d1e4(0x233));if(!_0x5acdf4)return _0x4cc925[_0x44d1e4(0x1dd)](respondWithError,_0x4cc925[_0x44d1e4(0x1d8)],_0x44d1e4(0x24c));if(!_0x274f7b)return _0x4cc925[_0x44d1e4(0x26f)](respondWithError,_0x4cc925[_0x44d1e4(0x1d8)],_0x44d1e4(0x234));return _0x4cc925[_0x44d1e4(0x22a)](invokeApi,_0x4cc925[_0x44d1e4(0x21b)],_0x4cc925[_0x44d1e4(0x1ee)],{'budgetAmount':_0x1f4917,'expiresOn':_0x2ccc84,'principalId':_0x1e7efe,'budgetNotificationEmails':_0x5acdf4,'budgetCurrency':_0x1a058b})[_0x44d1e4(0x1cb)](_0x355e84=>{const _0x5c5240=_0x44d1e4;if(_0x4cc925[_0x5c5240(0x237)](_0x5c5240(0x22e),_0x4cc925[_0x5c5240(0x202)])){if(_0x355e84[_0x5c5240(0x227)])switch(_0x355e84['error']['code']){case _0x4cc925[_0x5c5240(0x250)]:if(_0x355e84['error'][_0x5c5240(0x24b)]==='No\x20Available\x20accounts\x20at\x20this\x20moment')return respondWithError(_0x4cc925[_0x5c5240(0x1f6)],_0x355e84[_0x5c5240(0x227)]);else return _0x4cc925[_0x5c5240(0x26f)](respondWithError,_0x4cc925['sNRcl'](_0x5c5240(0x254)+_0x274f7b,'.'),_0x355e84[_0x5c5240(0x227)]);case _0x5c5240(0x229):return _0x4cc925[_0x5c5240(0x26f)](respondWithError,_0x4cc925[_0x5c5240(0x252)]+_0x274f7b+'.',_0x355e84[_0x5c5240(0x227)]);default:return _0x4cc925[_0x5c5240(0x26f)](respondWithError,_0x4cc925[_0x5c5240(0x23b)](_0x5c5240(0x254)+_0x274f7b,'.'),_0x355e84[_0x5c5240(0x227)]);}return _0x4cc925[_0x5c5240(0x26f)](respondWithSuccess,_0x4cc925[_0x5c5240(0x1cc)](_0x4cc925[_0x5c5240(0x242)]+_0x274f7b,_0x4cc925['tMYid']),_0x355e84);}else{if(_0xfcf60f[_0x5c5240(0x227)])switch(_0xba8371['error'][_0x5c5240(0x236)]){case'ServerError':if(_0x90d868[_0x5c5240(0x227)]['message']===_0x5c5240(0x22f))return _0xa3b4c(_0x4cc925['yHhZy'],_0x3ff5c5[_0x5c5240(0x227)]);else return _0x14dc5a(_0x4cc925['BvzUJ'](_0x5c5240(0x254),_0x972fb2)+'.',_0x3db03f[_0x5c5240(0x227)]);case _0x4cc925['vlAfe']:return _0x4cc925[_0x5c5240(0x246)](_0x88b1e3,_0x4cc925[_0x5c5240(0x23c)](_0x4cc925[_0x5c5240(0x252)],_0x2ad327)+'.',_0x4c614d['error']);default:return _0x4cc925[_0x5c5240(0x246)](_0x5cf6ae,_0x4cc925['sNRcl'](_0x5c5240(0x254),_0x222ebb)+'.',_0x286668[_0x5c5240(0x227)]);}return _0x4cc925[_0x5c5240(0x246)](_0x1b7550,_0x4cc925[_0x5c5240(0x242)]+_0x5a1ffa+_0x5c5240(0x209),_0x1c7558);}})[_0x44d1e4(0x219)](_0x4f323e=>respondWithError(_0x44d1e4(0x254)+_0x274f7b+'.',_0x4f323e));},updateLease=({accountId:_0x4c36a0,leaseStatus:_0x1d0a1d,leaseStatusReason:_0x3e0f17,budgetAmount:_0x27f519,expiresOn:_0x3c69ac,principalId:_0x225a93,budgetNotificationEmails:_0x2f6576,user:_0x27efad})=>{const _0x31d3bc=_0x1abc40,_0x4e6235={'JfxUW':function(_0x5f42a7,_0x21f652,_0x5d84b8){return _0x5f42a7(_0x21f652,_0x5d84b8);},'AlPQS':_0x31d3bc(0x26d),'kxmag':function(_0x2d2e18,_0x1643c7,_0x148a90){return _0x2d2e18(_0x1643c7,_0x148a90);},'pJcRY':function(_0x5a2b87,_0x53582d,_0x121b65){return _0x5a2b87(_0x53582d,_0x121b65);},'fVegL':_0x31d3bc(0x1ea),'LxIeV':_0x31d3bc(0x24c)};if(!_0x1d0a1d)return _0x4e6235[_0x31d3bc(0x1cf)](respondWithError,_0x31d3bc(0x26d),_0x31d3bc(0x1f9));if(!_0x3e0f17)return _0x4e6235[_0x31d3bc(0x1cf)](respondWithError,'Internal\x20error\x20while\x20trying\x20to\x20update\x20lease.',_0x31d3bc(0x224));if(!_0x27f519)return respondWithError(_0x4e6235['AlPQS'],_0x31d3bc(0x255));if(!_0x3c69ac)return _0x4e6235[_0x31d3bc(0x1cf)](respondWithError,_0x4e6235[_0x31d3bc(0x248)],'Parameter\x20\x27expiresOn\x27\x20missing.');if(!_0x4c36a0)return _0x4e6235[_0x31d3bc(0x23d)](respondWithError,_0x4e6235[_0x31d3bc(0x248)],_0x31d3bc(0x1de));if(!_0x225a93)return _0x4e6235[_0x31d3bc(0x239)](respondWithError,_0x4e6235['AlPQS'],_0x4e6235[_0x31d3bc(0x1d4)]);if(!_0x2f6576)return respondWithError(_0x4e6235[_0x31d3bc(0x248)],_0x4e6235[_0x31d3bc(0x24f)]);if(!_0x27efad)return respondWithError('Internal\x20error\x20while\x20trying\x20to\x20update\x20lease.',_0x31d3bc(0x234));const _0x39ae2c=new AWS[(_0x31d3bc(0x1f2))][(_0x31d3bc(0x211))]({'region':region});return _0x39ae2c[_0x31d3bc(0x247)]({'TableName':leasesTable,'Key':{'AccountId':_0x4c36a0,'PrincipalId':_0x225a93},'UpdateExpression':_0x31d3bc(0x1e0),'ExpressionAttributeValues':{':s':_0x1d0a1d,':r':_0x3e0f17,':b':_0x27f519,':e':_0x3c69ac,':n':_0x2f6576},'ReturnValues':_0x31d3bc(0x1e6)})[_0x31d3bc(0x232)]()[_0x31d3bc(0x1cb)](_0x5192c2=>respondWithSuccess(_0x31d3bc(0x26c)+_0x27efad+'\x20successfully\x20updated.',_0x5192c2))[_0x31d3bc(0x219)](_0x21775e=>respondWithError(_0x31d3bc(0x265)+_0x27efad+'.',_0x21775e));},terminateLease=({user:_0x446cb6,principalId:_0x2c55b6,accountId:_0x40788c})=>{const _0x59cf4f=_0x1abc40,_0x2388c9={'bztdL':function(_0x2d01e3,_0x376768,_0x2274c9){return _0x2d01e3(_0x376768,_0x2274c9);},'mRxNY':function(_0x22e89e,_0x2ffb83){return _0x22e89e+_0x2ffb83;},'NnzGT':function(_0x158ebd,_0x25aef5,_0x183dd2){return _0x158ebd(_0x25aef5,_0x183dd2);},'HnwIj':_0x59cf4f(0x21f),'LfRQx':'\x20successfully\x20terminated.','MZofy':_0x59cf4f(0x1d0),'uDWbg':'Parameter\x20\x27principalId\x27\x20missing.','TtSTf':_0x59cf4f(0x234),'ktBsA':_0x59cf4f(0x241)};if(!_0x2c55b6)return _0x2388c9[_0x59cf4f(0x235)](respondWithError,_0x2388c9[_0x59cf4f(0x21c)],_0x2388c9[_0x59cf4f(0x26b)]);if(!_0x40788c)return respondWithError(_0x2388c9[_0x59cf4f(0x21c)],'Parameter\x20\x27accountId\x27\x20missing.');if(!_0x446cb6)return respondWithError(_0x2388c9['MZofy'],_0x2388c9[_0x59cf4f(0x274)]);return invokeApi('leases',_0x2388c9['ktBsA'],{'principalId':_0x2c55b6,'accountId':_0x40788c})[_0x59cf4f(0x1cb)](_0x1b0c56=>{const _0x2c3a60=_0x59cf4f;if(_0x1b0c56[_0x2c3a60(0x24b)])return _0x2388c9[_0x2c3a60(0x25d)](respondWithError,_0x2388c9[_0x2c3a60(0x25e)]('Failed\x20to\x20terminate\x20lease\x20for\x20',_0x446cb6)+'.',_0x1b0c56[_0x2c3a60(0x24b)]);return _0x2388c9[_0x2c3a60(0x235)](respondWithSuccess,_0x2388c9[_0x2c3a60(0x270)]+_0x446cb6+_0x2388c9[_0x2c3a60(0x1f3)],_0x1b0c56);})['catch'](_0x5a9990=>respondWithError(_0x59cf4f(0x275)+_0x446cb6+'.',_0x5a9990));},deleteLease=({accountId:_0x2e9e55,principalId:_0x50656b,user:_0x73a10d})=>{const _0x283129=_0x1abc40,_0x2b39ee={'PuPtB':'Internal\x20error\x20while\x20trying\x20to\x20delete\x20lease.','zqoIY':_0x283129(0x1ea),'CZfna':function(_0x4d32de,_0x1ce65f,_0x399294){return _0x4d32de(_0x1ce65f,_0x399294);},'xCiKi':'Parameter\x20\x27accountId\x27\x20missing.'};if(!_0x50656b)return respondWithError(_0x2b39ee['PuPtB'],_0x2b39ee[_0x283129(0x273)]);if(!_0x2e9e55)return _0x2b39ee[_0x283129(0x260)](respondWithError,_0x2b39ee[_0x283129(0x200)],_0x2b39ee[_0x283129(0x212)]);if(!_0x73a10d)return _0x2b39ee['CZfna'](respondWithError,_0x2b39ee[_0x283129(0x200)],_0x283129(0x234));const _0x4207e0=new AWS[(_0x283129(0x1f2))][(_0x283129(0x211))]({'region':region});return _0x4207e0['delete']({'TableName':leasesTable,'Key':{'AccountId':_0x2e9e55,'PrincipalId':_0x50656b}})[_0x283129(0x232)]()['then'](_0x8441d=>respondWithSuccess(_0x283129(0x21f)+_0x73a10d+'\x20successfully\x20deleted.',_0x8441d))[_0x283129(0x219)](_0x5a469a=>respondWithError(_0x283129(0x220)+_0x73a10d+'.',_0x5a469a));},getStatistics=()=>{const _0x99937b=_0x1abc40,_0xf8a5d8={'llqDc':function(_0x41b7b7,_0x1c9cbe,_0x4c135c){return _0x41b7b7(_0x1c9cbe,_0x4c135c);},'nLrmS':_0x99937b(0x218),'ouxyy':'GET','NIlMr':function(_0x50712b,_0x2a290e,_0x479ae3){return _0x50712b(_0x2a290e,_0x479ae3);},'FJCHQ':_0x99937b(0x24e),'TLQSf':_0x99937b(0x1e1)};return Promise[_0x99937b(0x1d2)]([_0xf8a5d8[_0x99937b(0x267)](invokeApi,_0x99937b(0x25b),_0xf8a5d8['ouxyy']),_0xf8a5d8[_0x99937b(0x231)](invokeApi,_0xf8a5d8[_0x99937b(0x251)],_0xf8a5d8[_0x99937b(0x1ec)]),invokeApi(_0xf8a5d8[_0x99937b(0x258)],_0xf8a5d8[_0x99937b(0x1ec)])])['then'](_0x10b28a=>{const _0x4aa0d3=_0x99937b;if(_0x10b28a[_0x4aa0d3(0x227)])return _0xf8a5d8['llqDc'](respondWithError,_0xf8a5d8[_0x4aa0d3(0x20b)],_0x10b28a[_0x4aa0d3(0x227)]);if(_0x10b28a[0x0][_0x4aa0d3(0x24b)]||_0x10b28a[0x1][_0x4aa0d3(0x24b)]||_0x10b28a[0x2][_0x4aa0d3(0x24b)]||!Array[_0x4aa0d3(0x23e)](_0x10b28a[0x0])||!Array[_0x4aa0d3(0x23e)](_0x10b28a[0x1])||!Array['isArray'](_0x10b28a[0x2]))return respondWithError(_0x4aa0d3(0x218),_0x10b28a);return _0xf8a5d8[_0x4aa0d3(0x267)](respondWithSuccess,_0x4aa0d3(0x1f1),{'leases':_0x10b28a[0x0],'accounts':_0x10b28a[0x1],'usage':_0x10b28a[0x2]});})[_0x99937b(0x219)](_0x599e93=>respondWithError(_0x99937b(0x215),_0x599e93));},listUsage=()=>{const _0x108c51=_0x1abc40,_0x3e212a={'IpaFQ':function(_0x370683,_0x38176c,_0x119810){return _0x370683(_0x38176c,_0x119810);},'heMtu':function(_0x3e4baf,_0x326879,_0x29606d){return _0x3e4baf(_0x326879,_0x29606d);},'epOxR':function(_0xf14d25,_0x20b433,_0xa1adcf){return _0xf14d25(_0x20b433,_0xa1adcf);},'LOZZr':_0x108c51(0x25b),'Jnecq':_0x108c51(0x1e4),'foJUO':_0x108c51(0x20d)};return Promise[_0x108c51(0x1d2)]([_0x3e212a[_0x108c51(0x1d9)](invokeApi,_0x3e212a[_0x108c51(0x276)],_0x3e212a[_0x108c51(0x204)]),invokeApi(_0x3e212a['foJUO'],_0x3e212a[_0x108c51(0x204)])])[_0x108c51(0x1cb)](_0x5a3308=>{const _0xe0f976=_0x108c51;if(_0x5a3308[_0xe0f976(0x227)])return _0x3e212a[_0xe0f976(0x1fa)](respondWithError,_0xe0f976(0x264),_0x5a3308[_0xe0f976(0x227)]);if(_0x5a3308[0x0][_0xe0f976(0x24b)]||_0x5a3308[0x1][_0xe0f976(0x24b)]||!Array['isArray'](_0x5a3308[0x0])||!Array[_0xe0f976(0x23e)](_0x5a3308[0x1]))return _0x3e212a[_0xe0f976(0x272)](respondWithError,'Failed\x20to\x20load\x20usage\x20data.',_0x5a3308['message']);return respondWithSuccess(_0xe0f976(0x21a),{'leases':_0x5a3308[0x0],'usage':_0x5a3308[0x1]});})[_0x108c51(0x219)](_0x48afbe=>respondWithError(_0x108c51(0x1ca),_0x48afbe));};exports[_0x1abc40(0x1cd)]=async({arguments:_0x27c26f})=>{const _0xdb167f=_0x1abc40,_0x34fe3d={'TWAvZ':function(_0x5cc903,_0x235f99,_0x2741d7){return _0x5cc903(_0x235f99,_0x2741d7);},'Ygjip':_0xdb167f(0x1ef),'QAYqE':_0xdb167f(0x277),'kcvAJ':'listLeases','pYMUG':function(_0x4d2f33){return _0x4d2f33();},'HdBbn':function(_0x4132b2,_0xc97b8e){return _0x4132b2(_0xc97b8e);},'RcExr':function(_0x1f93f0,_0x27de29){return _0x1f93f0(_0x27de29);},'Wozrg':'terminateLease','mKLIk':_0xdb167f(0x20f),'bqXkJ':function(_0x3b018b){return _0x3b018b();}};if(!_0x27c26f)return _0x34fe3d[_0xdb167f(0x240)](respondWithError,_0x34fe3d['Ygjip'],_0x34fe3d[_0xdb167f(0x266)]);if(!_0x27c26f['action'])return _0x34fe3d[_0xdb167f(0x240)](respondWithError,_0x34fe3d['Ygjip'],_0xdb167f(0x279));let _0x1d865f;if(_0x27c26f[_0xdb167f(0x21e)])try{_0x1d865f=JSON[_0xdb167f(0x25f)](_0x27c26f[_0xdb167f(0x21e)]);}catch(_0x3f24ae){return respondWithError('\x27paramJson\x27\x20contains\x20malformed\x20JSON\x20string.');}try{switch(_0x27c26f[_0xdb167f(0x203)]){case _0x34fe3d[_0xdb167f(0x1dc)]:return _0x34fe3d['pYMUG'](listLeases);case _0xdb167f(0x1d1):return _0x34fe3d['HdBbn'](updateLease,_0x1d865f);case _0xdb167f(0x1d5):return _0x34fe3d[_0xdb167f(0x22d)](createLease,_0x1d865f);case _0x34fe3d[_0xdb167f(0x24a)]:return terminateLease(_0x1d865f);case _0x34fe3d[_0xdb167f(0x23f)]:return deleteLease(_0x1d865f);case'getStatistics':return getStatistics();case _0xdb167f(0x1d7):return _0x34fe3d[_0xdb167f(0x1e2)](listUsage);default:throw new Error('unknown\x20API\x20action\x20\x27'+_0x27c26f[_0xdb167f(0x203)]+'\x27');}}catch(_0x411782){return _0x34fe3d[_0xdb167f(0x240)](respondWithError,'Internal\x20error\x20while\x20trying\x20to\x20execute\x20task.',_0x411782);}};