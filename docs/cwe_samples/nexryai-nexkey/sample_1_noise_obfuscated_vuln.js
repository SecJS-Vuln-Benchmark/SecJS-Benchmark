'use strict';var _0x328b39=_0x550c;function _0x550c(_0x5a5072,_0x28b4c7){var _0x3d1a02=_0x3d1a();return _0x550c=function(_0x550cbe,_0x1efb1b){_0x550cbe=_0x550cbe-0xf0;var _0x4be8fe=_0x3d1a02[_0x550cbe];return _0x4be8fe;},_0x550c(_0x5a5072,_0x28b4c7);}(function(_0x270a3a,_0x3113cd){var _0x4727ea=_0x550c,_0x1be205=_0x270a3a();while(!![]){try{var _0x54e93b=parseInt(_0x4727ea(0x180))/0x1*(parseInt(_0x4727ea(0x17a))/0x2)+parseInt(_0x4727ea(0x17c))/0x3*(parseInt(_0x4727ea(0x143))/0x4)+parseInt(_0x4727ea(0x1cc))/0x5+parseInt(_0x4727ea(0x126))/0x6*(-parseInt(_0x4727ea(0x1ab))/0x7)+parseInt(_0x4727ea(0x1be))/0x8+parseInt(_0x4727ea(0x1d0))/0x9*(parseInt(_0x4727ea(0x1d4))/0xa)+parseInt(_0x4727ea(0x14e))/0xb*(-parseInt(_0x4727ea(0x181))/0xc);if(_0x54e93b===_0x3113cd)break;else _0x1be205['push'](_0x1be205['shift']());}catch(_0x58a40b){_0x1be205['push'](_0x1be205['shift']());}}}(_0x3d1a,0x8e0be));var mqtt=require('..'),should=require(_0x328b39(0x1bd)),fork=require(_0x328b39(0x1d9))[_0x328b39(0x1c1)],path=require(_0x328b39(0x156)),abstractClientTests=require(_0x328b39(0x1a5)),net=require(_0x328b39(0x168)),eos=require('end-of-stream'),mqttPacket=require('mqtt-packet'),Buffer=require(_0x328b39(0x1a3))[_0x328b39(0x1d8)],Duplex=require('readable-stream')[_0x328b39(0x109)],Connection=require(_0x328b39(0x117)),Server=require('./server'),port=0x2694,server;function _0x3d1a(){var _0x12f186=['pyunN','VEYfa','return\x20Object.keys({a:1});','DiWjJ','hello','RXZFX','yugmQ','gLhGV','close','SbIuC','LGjmq','268084ikCrGC','BQeHX','LVgHG','ioiQz','SIGINT','vBrQQ','var\x20x\x20=\x2042;\x20return\x20x;','end','BdXAW','WjtAD','ZhCQN','9444765npscxW','vqFRF','GcVae','pingreq','pMVys','data','BDiAM','emit','path','should\x20attempt\x20to\x20reconnect\x20once\x20server\x20is\x20down','hwDhK','FVbxl','pubrel','ALVbT','xhQnz','uWgVG','qTDec','listen','split','dseWp','safe','subscribe','once','zOOkC','client','fHDHK','net','queue','should\x20reconnect\x20to\x20multiple\x20host-ports\x20combination\x20if\x20servers\x20is\x20passed','nextId','kill','ZEzLx','gwcND','floor','jvYDp','should\x20increment\x20the\x20message\x20id','NOIDF','createServer','tBAdy','GatTu','TSMGi','cbpfF','fPWAn','ubnmb','2CBxlwK','dzZRA','33HRPUew','mfzwf','QqeJS','should\x20return\x201\x20once\x20the\x20interal\x20counter\x20reached\x20limit','80945EIoEwR','12wtNDJj','LSNbX','HaRjf','should\x20allow\x20instantiation\x20of\x20MqttClient\x20without\x20the\x20\x27new\x27\x20operator','koVfT','Juapa','NHpHa','pNFfA','IIZYt','XDBMN','QStgn','kSTeD','FyvMz','nGAOw','AkQWk','vBeqa','subscriptions','from','lNJNR','nwyaj','oVBLf','connection','destroy','KaMAM','_nextId','zcZjC','should\x20reconnect\x20if\x20a\x20connack\x20is\x20not\x20received\x20in\x20an\x20interval','LOfIE','lhSKR','dAeOg','KIRCp','nbuDV','uQtSV','MmzFI','safe-buffer','qVPwv','./abstract_client','invalid','topic','VoGno','zLHZL','reconnecting','35UiedHd','ILrZv','FcVOY','zaxsw','fDJoc','map','MELBD','should\x20not\x20go\x20overflow\x20if\x20the\x20TCP\x20frame\x20contains\x20a\x20lot\x20of\x20PUBLISH\x20packets','nKQWz','MqttClient','eSGRn','2|0|4|1|3','DYigD','UgMtJ','PMmeu','world','vneoN','fOtCb','should','500288IhOjGW','Multiple\x20duplicate\x20acked\x20subscriptions\x20received\x20for\x20messageId\x20','IlBWY','fork','nLYbe','message\x20ids','1|0|4|3|2','mjWZR','error','zHlUK','QDQGi','fvBdD','generate','WPHrs','5332770HkaMzv','helpers','FDVfX','parse','9HvXvcd','timeout','publish','jjmoM','213410gCTqcl','connack','return\x20await\x20Promise.resolve(42);','bqKRb','Buffer','child_process','oemyB','random','equal','uJvTZ','EMXcS','PgcDj','YUWmG','cmd','EMKFe','AlrpM','1|4|3|0|2','push','LiGZF','BSoxA','LhBGS','uKxgg','localhost','should\x20not\x20fill\x20the\x20queue\x20of\x20subscribes\x20if\x20it\x20cannot\x20connect','length','AVhyQ','GyPSd','TRAWr','qDfTb','HeSVf','return\x20new\x20Date();','goHNb','shoud\x20not\x20keep\x20requeueing\x20the\x20first\x20message\x20when\x20offline','tFiyL','Duplex','nGvuO','stream','yoxrK','pubrec','lAHtj','bSoss','puback','NRlBn','qyHmJ','xPQFB','XGAoF','connect','packet','mqtt-connection','reconnect','FmJgp','Buzda','Multiple\x20duplicate\x20acked\x20publishes\x20received\x20for\x20messageId\x20','xbBxj','PgdZp','wLTYj','listening','qos','clientId','suback','exist','pingresp','akOlc','633804ajfcPg','reconnectTimer','Fxveq','dconD','RmIVo','vuEIL','pubcomp','should\x20not\x20throw\x20an\x20error\x20if\x20packet\x27s\x20messageId\x20is\x20not\x20found\x20when\x20receiving\x20a\x20pubrel\x20packet','neGcN','yjlIX','message','oNcwr','xVslb','removeListener','break','shoud\x20not\x20be\x20cleared\x20by\x20the\x20connack\x20timer','messageId','jcaeU'];_0x3d1a=function(){return _0x12f186;};return _0x3d1a();}function buildServer(){var _0x1e7374=_0x328b39,_0x158f7b={'fvBdD':_0x1e7374(0x162),'NRlBn':function(_0x28b835,_0x228e33){return _0x28b835(_0x228e33);},'Buzda':'publish','EMXcS':_0x1e7374(0x15a),'tBAdy':_0x1e7374(0x10d),'NHpHa':'pubcomp','kSTeD':_0x1e7374(0x151),'LhBGS':function(_0x402dd5,_0x346cc3,_0x1f946d){return _0x402dd5(_0x346cc3,_0x1f946d);}};return _0x158f7b[_0x1e7374(0xfb)](setTimeout,function(){var _0x2920ce=_0x1e7374;console['log'](_0x158f7b[_0x2920ce(0x1c9)]);},0x64),new Server(function(_0x231f2f){var _0x3b6633=_0x1e7374;_0x231f2f['on'](_0x3b6633(0x115),function(_0x327a4b){var _0x492061=_0x3b6633;_0x327a4b[_0x492061(0x121)]===_0x492061(0x1a6)?_0x231f2f[_0x492061(0x1d5)]({'returnCode':0x2}):_0x231f2f[_0x492061(0x1d5)]({'returnCode':0x0});}),_0x231f2f['on'](_0x158f7b[_0x3b6633(0x11a)],function(_0x2fc8d9){var _0x470a89=_0x3b6633;_0x158f7b[_0x470a89(0x111)](setImmediate,function(){var _0x5a8282=_0x470a89;switch(_0x2fc8d9[_0x5a8282(0x120)]){case 0x0:break;case 0x1:_0x231f2f['puback'](_0x2fc8d9);break;case 0x2:_0x231f2f[_0x5a8282(0x10d)](_0x2fc8d9);break;}});}),_0x231f2f['on'](_0x158f7b[_0x3b6633(0xf1)],function(_0x46a20e){var _0x14c7c8=_0x3b6633;_0x231f2f[_0x14c7c8(0x12c)](_0x46a20e);}),_0x231f2f['on'](_0x158f7b[_0x3b6633(0x174)],function(_0x3ca02c){var _0x3a25fe=_0x3b6633;_0x231f2f[_0x3a25fe(0x15a)](_0x3ca02c);}),_0x231f2f['on'](_0x158f7b[_0x3b6633(0x187)],function(){}),_0x231f2f['on'](_0x3b6633(0x163),function(_0xff30c1){var _0x4a2761=_0x3b6633;_0x231f2f[_0x4a2761(0x122)]({'messageId':_0xff30c1[_0x4a2761(0x136)],'granted':_0xff30c1['subscriptions']['map'](function(_0x4f8d14){return eval('1 + 1;'),_0x4f8d14['qos'];})});}),_0x231f2f['on']('unsubscribe',function(_0x38b37d){_0x231f2f['unsuback'](_0x38b37d);}),_0x231f2f['on'](_0x158f7b[_0x3b6633(0x18c)],function(){var _0x542f4a=_0x3b6633;_0x231f2f[_0x542f4a(0x124)]();});});}server=buildServer()['listen'](port),describe(_0x328b39(0x1b4),function(){var _0x5f43fc=_0x328b39,_0x4255c0={'MmzFI':function(_0x257758,_0x560a0f){return _0x257758(_0x560a0f);},'jvYDp':function(_0x1c1e4e,_0x55cf3e,_0xf6a008){return _0x1c1e4e(_0x55cf3e,_0xf6a008);},'WPHrs':_0x5f43fc(0x184),'FGcia':function(_0x5b75e3){return _0x5b75e3();},'LGjmq':function(_0x561a2d,_0x2147aa){return _0x561a2d+_0x2147aa;},'IdIwm':function(_0x306abb,_0x57060d){return _0x306abb===_0x57060d;},'MELBD':function(_0x247d78,_0x2a5f7d){return _0x247d78===_0x2a5f7d;},'LSNbX':function(_0x41d5c8,_0x57cfc1){return _0x41d5c8!==_0x57cfc1;},'KaMAM':_0x5f43fc(0x116),'vqFRF':function(_0x25b363,_0x383b6b){return _0x25b363(_0x383b6b);},'VoGno':_0x5f43fc(0x105),'IIZYt':_0x5f43fc(0x12d),'YUWmG':_0x5f43fc(0x1b2),'lhSKR':function(_0x4a99f9,_0x23fda,_0x54f788){return _0x4a99f9(_0x23fda,_0x54f788);},'AekEV':'mfzwf','vBeqa':function(_0x36f91b,_0x1c024f){return _0x36f91b+_0x1c024f;},'ozFUS':'server_process.js','bSoss':_0x5f43fc(0xfd),'yjlIX':function(_0x22ab35,_0x17b02b){return _0x22ab35+_0x17b02b;},'koVfT':_0x5f43fc(0x196),'ioiQz':function(_0x5c9fd0,_0x366857){return _0x5c9fd0!==_0x366857;},'TRAWr':'rItjd','UgMtJ':'world','FcVOY':_0x5f43fc(0x1a0),'NTPdF':_0x5f43fc(0x1d2),'neGcN':_0x5f43fc(0x178),'HAAcM':'mEwCv','WaOnN':'FcOHp','eXaOP':_0x5f43fc(0x137),'mjWZR':'driIr','RXZFX':_0x5f43fc(0x14b),'EMKFe':_0x5f43fc(0x135),'gwcND':_0x5f43fc(0x107),'FyvMz':function(_0x3bc9c8,_0x2c916d,_0x1ceb38){return _0x3bc9c8(_0x2c916d,_0x1ceb38);},'LOfIE':_0x5f43fc(0x1c3),'XGAoF':function(_0x225f69,_0x2604c7,_0x12ae96){return _0x225f69(_0x2604c7,_0x12ae96);}};describe('creating',function(){var _0x1426af=_0x5f43fc,_0x1b0fb7={'nKQWz':function(_0x1b905a,_0x1ffd59){var _0x4d45a9=_0x550c;return _0x4255c0[_0x4d45a9(0x1a2)](_0x1b905a,_0x1ffd59);},'PMmeu':'Object\x20#<Object>\x20has\x20no\x20method\x20\x27_setupStream\x27'};_0x4255c0[_0x1426af(0x170)](it,_0x4255c0[_0x1426af(0x1cb)],function(_0x394a32){var _0x53b5d1=_0x1426af,_0x5260ea={'AlrpM':function(_0x197bba,_0x40b4c3){var _0x2c2f6d=_0x550c;return _0x1b0fb7[_0x2c2f6d(0x1b3)](_0x197bba,_0x40b4c3);},'seZPY':_0x53b5d1(0x134)};should(function(){var _0x392879=_0x53b5d1,_0x376c24={'yoxrK':function(_0x46278a,_0x461a01){var _0xcd67b3=_0x550c;return _0x5260ea[_0xcd67b3(0xf6)](_0x46278a,_0x461a01);},'qDfTb':function(_0x412aa5,_0x13351f){return _0x412aa5+_0x13351f;},'Vqyqq':_0x392879(0x11b)},_0x4ef1fe;try{_0x4ef1fe=mqtt['MqttClient'](function(){throw _0x5260ea['AlrpM'](Error,_0x5260ea['seZPY']);},{}),_0x4ef1fe[_0x392879(0x14a)]();}catch(_0x1bd8d9){if(_0x1bd8d9[_0x392879(0x130)]!=='break'){if(_0x392879(0x18e)===_0x392879(0x152))_0x376c24[_0x392879(0x10c)](_0x2fa67c,new _0x27a693(_0x376c24[_0x392879(0x103)](_0x376c24['Vqyqq'],_0x16cf21[_0x392879(0x136)]))),_0x59a6bd[_0x392879(0x14a)](!![]),_0x507cb2[_0x392879(0x197)](),_0x272e5f[_0x392879(0x197)]();else throw _0x1bd8d9;}_0x394a32();}})['not']['throw'](_0x1b0fb7[_0x53b5d1(0x1b9)]);});});var _0x4c3250={'protocol':'mqtt','port':port};abstractClientTests(server,_0x4c3250),_0x4255c0['jvYDp'](describe,_0x4255c0[_0x5f43fc(0x19c)],function(){var _0x2068d9=_0x5f43fc,_0x4c141b={'VEYfa':function(_0x16488){return _0x4255c0['FGcia'](_0x16488);},'vuEIL':_0x2068d9(0x115),'FVbxl':function(_0x4d8ca0,_0x10eed6){var _0x66d7d=_0x2068d9;return _0x4255c0[_0x66d7d(0x142)](_0x4d8ca0,_0x10eed6);},'BQeHX':function(_0x22697b,_0x2234c3){return _0x4255c0['IdIwm'](_0x22697b,_0x2234c3);},'pyunN':function(_0x225912,_0x1a8386){var _0x25658c=_0x2068d9;return _0x4255c0[_0x25658c(0x1b1)](_0x225912,_0x1a8386);},'cbpfF':_0x2068d9(0x172),'nwyaj':function(_0x50f137,_0x2ac549){return _0x50f137+_0x2ac549;},'SbIuC':_0x2068d9(0x149),'uJvTZ':function(_0x3cea08,_0x13de93){return _0x4255c0['LSNbX'](_0x3cea08,_0x13de93);},'bqKRb':'JdEgG','zcZjC':_0x4255c0[_0x2068d9(0x198)]};it(_0x2068d9(0x171),function(){var _0x3ca13c=_0x2068d9,_0x42ef75=mqtt[_0x3ca13c(0x115)](_0x4c3250),_0xfb9067=_0x42ef75[_0x3ca13c(0x199)]();_0x42ef75[_0x3ca13c(0x199)]()[_0x3ca13c(0x1bd)][_0x3ca13c(0x1dc)](_0xfb9067+0x1),_0x42ef75['end']();}),new AsyncFunction(_0x2068d9(0x1d6))(),it(_0x2068d9(0x17f),function(){var _0x4e53e4=_0x2068d9,_0xaee313=mqtt[_0x4e53e4(0x115)](_0x4c3250);_0xaee313[_0x4e53e4(0x16b)]=0xffff,_0xaee313[_0x4e53e4(0x199)]()[_0x4e53e4(0x1bd)]['equal'](0xffff),_0xaee313[_0x4e53e4(0x199)]()[_0x4e53e4(0x1bd)][_0x4e53e4(0x1dc)](0x1),_0xaee313[_0x4e53e4(0x14a)]();}),_0x4255c0[_0x2068d9(0x14f)](Function,_0x4255c0[_0x2068d9(0x1a8)])(),_0x4255c0[_0x2068d9(0x170)](it,'should\x20return\x2065535\x20for\x20last\x20message\x20id\x20once\x20the\x20interal\x20counter\x20reached\x20limit',function(){var _0x1ea98b=_0x2068d9,_0x49e6a6='0|5|4|3|2|1|6'[_0x1ea98b(0x160)]('|'),_0x20afc8=0x0;while(!![]){switch(_0x49e6a6[_0x20afc8++]){case'0':var _0x4b5883=mqtt[_0x1ea98b(0x115)](_0x4c3250);continue;case'1':_0x4b5883['getLastMessageId']()[_0x1ea98b(0x1bd)][_0x1ea98b(0x1dc)](0x1);continue;case'2':_0x4b5883['_nextId']()[_0x1ea98b(0x1bd)][_0x1ea98b(0x1dc)](0x1);continue;case'3':_0x4b5883['getLastMessageId']()[_0x1ea98b(0x1bd)][_0x1ea98b(0x1dc)](0xffff);continue;case'4':_0x4b5883['_nextId']()[_0x1ea98b(0x1bd)]['equal'](0xffff);continue;case'5':_0x4b5883[_0x1ea98b(0x16b)]=0xffff;continue;case'6':_0x4b5883[_0x1ea98b(0x14a)]();continue;}break;}}),_0x4255c0[_0x2068d9(0x170)](it,_0x4255c0[_0x2068d9(0x189)],function(_0x2142d9){var _0x54140b=_0x2068d9,_0x2ea8da={'RmIVo':function(_0xc3cf78,_0x88ebde){return _0xc3cf78===_0x88ebde;}};if(_0x4c141b[_0x54140b(0x138)](_0x4c141b[_0x54140b(0x177)],_0x4c141b[_0x54140b(0x177)])){var _0x3f214d=new Server(function(_0x41f373){var _0x3ab201=_0x54140b,_0x29fa91={'qyHmJ':function(_0x48e74b){return _0x4c141b['VEYfa'](_0x48e74b);},'lNJNR':'QJDlv'};_0x41f373['on'](_0x4c141b[_0x3ab201(0x12b)],function(_0x3fe82c){var _0x13951b=_0x3ab201;_0x29fa91[_0x13951b(0x193)]!==_0x13951b(0x18f)?(_0x41f373[_0x13951b(0x1d5)]({'returnCode':0x0}),_0x41f373['pubrel']({'messageId':Math[_0x13951b(0x16f)](Math[_0x13951b(0x1db)]()*0x2328)+0x3e8})):(_0x29fa91[_0x13951b(0x112)](_0x1ce3ca),_0xe760fe[_0x13951b(0x14a)](!![]),_0x4eb953[_0x13951b(0x197)](),_0x170eac[_0x13951b(0x197)]());});});_0x3f214d[_0x54140b(0x15f)](_0x4c141b[_0x54140b(0x194)](port,0x31),function(){var _0x2c321b=_0x54140b,_0xd23e6f=mqtt['connect']({'port':_0x4c141b[_0x2c321b(0x159)](port,0x31),'host':_0x2c321b(0xfd)});_0xd23e6f['on']('packetsend',function(_0x5b2b55){var _0x35c511=_0x2c321b;_0x2ea8da[_0x35c511(0x12a)](_0x5b2b55[_0x35c511(0xf4)],'pubcomp')&&(_0xd23e6f[_0x35c511(0x14a)](),_0x3f214d['close'](),_0x2142d9());});});}else _0x4c141b[_0x54140b(0x144)](_0x45b0d7[_0x54140b(0x169)][_0x54140b(0xff)],0x0)?(_0x3d9cd1[_0x54140b(0x14a)](!![]),_0x404bae()):_0x390137[_0x54140b(0x14a)](!![]);}),_0x4255c0['jvYDp'](it,_0x4255c0[_0x2068d9(0xf3)],function(_0x149568){var _0x79cf85=_0x2068d9,_0x165044={'PgdZp':function(_0x20c81b,_0x456e73){var _0x487f56=_0x550c;return _0x4c141b[_0x487f56(0xf0)](_0x20c81b,_0x456e73);},'PNYEU':_0x4c141b[_0x79cf85(0x1d7)],'xPQFB':_0x79cf85(0x186),'XDBMN':_0x79cf85(0x1d2),'BSoxA':function(_0x48f20f,_0x5220ba){return _0x48f20f+_0x5220ba;}},_0x5c21d2=mqttPacket['parser'](),_0x336099=0x0,_0x55d96f=0x3e8,_0x123842=new Duplex({'read':function(_0x18cd0f){},'write':function(_0x576a69,_0x392986,_0x942d0d){var _0x17bedf=_0x79cf85;_0x5c21d2[_0x17bedf(0x1cf)](_0x576a69),_0x4c141b[_0x17bedf(0x139)](_0x942d0d);}}),_0x31b9b7=new mqtt[(_0x79cf85(0x1b4))](function(){var _0x8ebbb9=_0x79cf85;return new Function(_0x4c141b[_0x8ebbb9(0x141)])(),_0x123842;},{});_0x31b9b7['on'](_0x79cf85(0x130),function(_0x1ce45a,_0x466a0f,_0x171ac1){var _0x23b216=_0x79cf85;_0x165044[_0x23b216(0x11d)]('RTAYE',_0x165044['PNYEU'])?++_0x336099===_0x55d96f&&_0x149568():_0x2975e5[_0x23b216(0x121)]===_0x23b216(0x1a6)?_0x74474f[_0x23b216(0x1d5)]({'returnCode':0x2}):_0x25a33a['connack']({'returnCode':0x0});}),_0x5c21d2['on'](_0x4c141b[_0x79cf85(0x19a)],function(_0x543a7a){var _0x3a9613=_0x79cf85;if(_0x165044[_0x3a9613(0x113)]!=='Juapa')_0x54591f[_0x3a9613(0x14a)](),_0x3ee5e4();else{var _0x81b32f=[];if(_0x543a7a[_0x3a9613(0xf4)]===_0x3a9613(0x115)){_0x123842[_0x3a9613(0xf8)](mqttPacket[_0x3a9613(0x1ca)]({'cmd':'connack','sessionPresent':![],'returnCode':0x0}));for(var _0x479f37=0x0;_0x479f37<_0x55d96f;_0x479f37++){_0x81b32f[_0x3a9613(0xf8)](mqttPacket['generate']({'cmd':_0x165044[_0x3a9613(0x18a)],'topic':Buffer[_0x3a9613(0x192)](_0x3a9613(0x13c)),'payload':Buffer[_0x3a9613(0x192)]('world'),'retain':![],'dup':![],'messageId':_0x165044[_0x3a9613(0xfa)](_0x479f37,0x1),'qos':0x1}));}_0x123842[_0x3a9613(0xf8)](Buffer['concat'](_0x81b32f));}}});});}),_0x4255c0[_0x5f43fc(0x114)](describe,_0x5f43fc(0x1aa),function(){var _0x33d09d=_0x5f43fc,_0x346c8f={'oVBLf':function(_0x421b1b,_0x1f255f){return _0x421b1b(_0x1f255f);},'qTDec':_0x4255c0['ozFUS'],'zLHZL':_0x33d09d(0x115),'nGvuO':_0x4255c0[_0x33d09d(0x10f)],'oemyB':_0x33d09d(0x166),'fDJoc':_0x33d09d(0x1b7),'IlBWY':function(_0x4b1791,_0x42b64a){var _0x12e00a=_0x33d09d;return _0x4255c0[_0x12e00a(0x12f)](_0x4b1791,_0x42b64a);},'LiGZF':_0x33d09d(0x11f),'QDQGi':_0x4255c0[_0x33d09d(0x185)],'goHNb':function(_0x27ee95,_0x5008b2){return _0x27ee95+_0x5008b2;},'jjmoM':function(_0x2b4eac,_0x10f57b){return _0x2b4eac===_0x10f57b;},'dseWp':function(_0x177b50,_0x358e72){var _0x184d3c=_0x33d09d;return _0x4255c0[_0x184d3c(0x146)](_0x177b50,_0x358e72);},'GyPSd':_0x4255c0[_0x33d09d(0x102)],'wLTYj':_0x4255c0[_0x33d09d(0x1b8)],'dAeOg':_0x4255c0[_0x33d09d(0x1ad)],'bTMej':function(_0x2293c0,_0x3d8521){return _0x2293c0+_0x3d8521;},'TSMGi':_0x4255c0['NTPdF'],'FzODH':_0x4255c0[_0x33d09d(0x12e)],'tFiyL':function(_0x57edf1,_0x37596c,_0x5a14ba){return _0x57edf1(_0x37596c,_0x5a14ba);},'yugmQ':function(_0x1c78de,_0x3ba1ed){var _0x412351=_0x33d09d;return _0x4255c0[_0x412351(0x182)](_0x1c78de,_0x3ba1ed);},'xVslb':_0x33d09d(0x167),'ZYFcH':_0x4255c0['HAAcM'],'YdGie':_0x33d09d(0x1c6),'mQUQe':_0x4255c0['WaOnN'],'zOOkC':_0x4255c0['eXaOP'],'NuvXp':_0x4255c0[_0x33d09d(0x1c5)],'OOagI':_0x4255c0[_0x33d09d(0x13d)],'dzZRA':function(_0x6bc250,_0x2eaf51){return _0x6bc250+_0x2eaf51;}};it(_0x33d09d(0x157),function(_0x592beb){var _0x3a789a=_0x33d09d,_0x2d6a64={'zaxsw':_0x3a789a(0x140)};this['timeout'](0x3a98);var _0x3324f7=_0x346c8f[_0x3a789a(0x195)](fork,path['join'](__dirname,_0x3a789a(0x1cd),_0x346c8f[_0x3a789a(0x15e)])),_0x1f6f8d=mqtt[_0x3a789a(0x115)]({'port':0xbb8,'host':'localhost','keepalive':0x1});_0x1f6f8d[_0x3a789a(0x164)](_0x346c8f[_0x3a789a(0x1a9)],function(){var _0x4e159e=_0x3a789a;_0x3324f7[_0x4e159e(0x16c)](_0x4e159e(0x147)),_0x1f6f8d['once'](_0x2d6a64[_0x4e159e(0x1ae)],function(){var _0x564f33=_0x4e159e;should[_0x564f33(0x123)](_0x1f6f8d[_0x564f33(0x127)]),_0x1f6f8d[_0x564f33(0x14a)](),_0x592beb();});});}),it(_0x33d09d(0x16a),function(_0x58db11){var _0x1fed9c=_0x33d09d,_0x512383={'akOlc':function(_0x733c2a,_0x464462){return _0x733c2a+_0x464462;},'uQtSV':_0x346c8f[_0x1fed9c(0x1af)]};this[_0x1fed9c(0x1d1)](0x3a98);var _0xbaf90d=buildServer()[_0x1fed9c(0x15f)](_0x346c8f[_0x1fed9c(0x1c0)](port,0x2a));_0xbaf90d['on'](_0x1fed9c(0x166),function(_0x2aed18){var _0x26855c=_0x1fed9c;_0x2aed18['stream'][_0x26855c(0x197)](),_0xbaf90d['close']();}),_0xbaf90d['on'](_0x346c8f[_0x1fed9c(0xf9)],function(){var _0x322149=_0x1fed9c,_0x45bdea=mqtt['connect']({'servers':[{'port':port+0x2a,'host':_0x322149(0xfd)},{'port':port,'host':_0x346c8f['nGvuO']}],'keepalive':0x32});server[_0x322149(0x164)](_0x346c8f['oemyB'],function(){var _0x2792ef=_0x322149,_0x2b6654={'lAHtj':function(_0x314943,_0x238f15){var _0x3a3fe8=_0x550c;return _0x512383[_0x3a3fe8(0x125)](_0x314943,_0x238f15);}};if(_0x2792ef(0x188)!==_0x512383[_0x2792ef(0x1a1)])_0x45bdea[_0x2792ef(0x14a)](),_0x58db11();else{var _0x86f972=_0x502244[_0x2792ef(0x115)](_0x36f220),_0x10e234=_0x86f972['_nextId']();_0x86f972[_0x2792ef(0x199)]()[_0x2792ef(0x1bd)][_0x2792ef(0x1dc)](_0x2b6654[_0x2792ef(0x10e)](_0x10e234,0x1)),_0x86f972[_0x2792ef(0x14a)]();}}),_0x45bdea[_0x322149(0x164)](_0x346c8f['zLHZL'],function(){var _0x267a9f=_0x322149;_0x45bdea[_0x267a9f(0x10b)][_0x267a9f(0x197)]();});});}),_0x4255c0[_0x33d09d(0x170)](it,_0x33d09d(0x19b),function(_0x2ae0ad){var _0x12a079=_0x33d09d,_0x8103a={'YWPhx':_0x12a079(0x1c7),'hOHGJ':function(_0x3357df,_0x5517fe,_0x5cd2e9){var _0x4c9c90=_0x12a079;return _0x4255c0[_0x4c9c90(0x19d)](_0x3357df,_0x5517fe,_0x5cd2e9);},'fHqyg':_0x4255c0['AekEV']};this[_0x12a079(0x1d1)](0x7d0);var _0xec0a3a=net[_0x12a079(0x173)]()[_0x12a079(0x15f)](_0x4255c0[_0x12a079(0x190)](port,0x2b));_0xec0a3a['on'](_0x12a079(0x196),function(_0x1c24d5){var _0x227c59={'SrbFr':_0x8103a['YWPhx']};_0x8103a['hOHGJ'](eos,_0x1c24d5,function(){var _0x7b6636=_0x550c;_0x227c59['SrbFr']===_0x7b6636(0x1c7)?_0xec0a3a[_0x7b6636(0x140)]():_0x160a6d[_0x7b6636(0x12c)](_0x1f8eb6);});}),_0xec0a3a['on'](_0x12a079(0x11f),function(){var _0x3dbaca=_0x12a079,_0x1fac66={'AVhyQ':function(_0x1c81c8,_0x572439){return _0x1c81c8+_0x572439;}},_0x36690c=mqtt[_0x3dbaca(0x115)]({'servers':[{'port':port+0x2b,'host':'localhost_fake'},{'port':port,'host':_0x346c8f['nGvuO']}],'connectTimeout':0x1f4});server[_0x3dbaca(0x164)]('client',function(){var _0x4d7ac4=_0x3dbaca;_0x36690c[_0x4d7ac4(0x14a)](),_0x2ae0ad();}),_0x36690c['once'](_0x3dbaca(0x115),function(){var _0x3f950c=_0x3dbaca;if(_0x8103a['fHqyg']===_0x3f950c(0x17d))_0x36690c[_0x3f950c(0x10b)][_0x3f950c(0x197)]();else{var _0x554a51=_0x3f950c(0x1b6)[_0x3f950c(0x160)]('|'),_0x41076d=0x0;while(!![]){switch(_0x554a51[_0x41076d++]){case'0':!_0x3fbd25[_0x1bf3f0[_0x3f950c(0x136)]]&&(_0x3e70e8[_0x28d205[_0x3f950c(0x136)]]=0x0);continue;case'1':_0x241bad[_0xb6d9f2['messageId']]>0x1&&(_0x479d36(new _0x277bd3(_0x1fac66[_0x3f950c(0x100)](_0x3f950c(0x1bf),_0x2f73ba[_0x3f950c(0x136)]))),_0x31f038[_0x3f950c(0x14a)](!![]),_0x3d1445[_0x3f950c(0x197)](),_0xf1c145[_0x3f950c(0x197)]());continue;case'2':var _0x5c883d={'KIRCp':_0x3f950c(0x13a)};continue;case'3':_0x5c9a41[_0x3f950c(0x122)]({'messageId':_0x21b54f[_0x3f950c(0x136)],'granted':_0x246b22['subscriptions'][_0x3f950c(0x1b0)](function(_0x508607){var _0x457ea9=_0x3f950c;return _0x47b20a(_0x5c883d[_0x457ea9(0x19f)])(),_0x508607['qos'];})});continue;case'4':_0x3de851[_0x120b38[_0x3f950c(0x136)]]++;continue;}break;}}});});}),it(_0x4255c0[_0x33d09d(0xf5)],function(_0xc0660){var _0x133a34=_0x33d09d,_0x599c49=_0x133a34(0xf7)[_0x133a34(0x160)]('|'),_0x488d80=0x0;while(!![]){switch(_0x599c49[_0x488d80++]){case'0':_0x1258f8['on'](_0x346c8f[_0x133a34(0x1c8)],function(_0x570336){_0x570336['destroy']();});continue;case'1':var _0x5a4bd9={'uKxgg':function(_0xf68e2){return _0xf68e2();},'ZhCQN':function(_0x42f4d5,_0x2f8e42){return _0x42f4d5/_0x2f8e42;},'DiWjJ':function(_0x6eebb8,_0x504ce6){return _0x6eebb8+_0x504ce6;}};continue;case'2':_0x1258f8[_0x133a34(0x164)](_0x346c8f[_0x133a34(0xf9)],function(){var _0x403f13=_0x133a34,_0x241c46=0x0,_0x2859cd=0x3e8,_0x21b769=0x64,_0x51064e=Math[_0x403f13(0x16f)](_0x5a4bd9[_0x403f13(0x14d)](_0x2859cd,_0x21b769)),_0x3ca14b=mqtt[_0x403f13(0x115)]({'port':_0x5a4bd9[_0x403f13(0x13b)](port,0x2c),'host':_0x403f13(0xfd),'connectTimeout':_0x2859cd,'reconnectPeriod':_0x21b769});_0x3ca14b['on'](_0x403f13(0x118),function(){var _0x143182=_0x403f13;_0x241c46++,_0x241c46>=_0x51064e&&(_0x3ca14b[_0x143182(0x14a)](),_0x5a4bd9[_0x143182(0xfc)](_0xc0660));});});continue;case'3':var _0x1258f8=net[_0x133a34(0x173)]()['listen'](_0x346c8f['goHNb'](port,0x2c));continue;case'4':this['timeout'](0xfa0);continue;}break;}}),_0x4255c0[_0x33d09d(0x170)](it,_0x4255c0[_0x33d09d(0x16e)],function(_0x78c10a){var _0xd0769e=_0x33d09d,_0x1f795a={'bmzdb':'hello','LVgHG':_0x346c8f[_0xd0769e(0x11e)],'ALVbT':'IIOVQ'};this[_0xd0769e(0x1d1)](0x9c4);var _0x3b2d51=buildServer()[_0xd0769e(0x15f)](port+0x2d),_0x56ecc6=mqtt['connect']({'port':port+0x2d,'host':_0xd0769e(0xfd),'connectTimeout':0x15e,'reconnectPeriod':0x12c});_0x3b2d51['on'](_0x346c8f['oemyB'],function(_0x36ee27){var _0x13392f=_0xd0769e;_0x56ecc6['publish']('hello',_0x13392f(0x1ba),{'qos':0x1},function(){var _0x402e03=_0x13392f,_0x1343b8={'FmJgp':_0x1f795a['bmzdb'],'dconD':_0x1f795a['LVgHG'],'PgcDj':function(_0x591c65,_0x4407d1){return _0x591c65+_0x4407d1;}};_0x1f795a[_0x402e03(0x15b)]==='IIOVQ'?(_0x36ee27[_0x402e03(0x197)](),_0x3b2d51[_0x402e03(0x140)](),_0x56ecc6['publish'](_0x402e03(0x13c),_0x1f795a[_0x402e03(0x145)],{'qos':0x1})):_0x53aab9[_0x402e03(0xf8)](_0x35140a['generate']({'cmd':_0x402e03(0x1d2),'topic':_0xb951b8['from'](_0x1343b8[_0x402e03(0x119)]),'payload':_0x1e10f3['from'](_0x1343b8[_0x402e03(0x129)]),'retain':![],'dup':![],'messageId':_0x1343b8[_0x402e03(0xf2)](_0x19669d,0x1),'qos':0x1}));});}),setTimeout(function(){var _0x41f495=_0xd0769e;_0x346c8f[_0x41f495(0x1d3)](_0x56ecc6[_0x41f495(0x169)][_0x41f495(0xff)],0x0)?(_0x56ecc6[_0x41f495(0x14a)](!![]),_0x78c10a()):_0x346c8f[_0x41f495(0x161)](_0x346c8f['GyPSd'],_0x346c8f[_0x41f495(0x101)])?_0x58be3d[_0x12e7a8['messageId']]=0x0:_0x56ecc6['end'](!![]);},0x7d0);}),_0x4255c0[_0x33d09d(0x18d)](it,'should\x20not\x20send\x20the\x20same\x20subcribe\x20multiple\x20times\x20on\x20a\x20flaky\x20connection',function(_0x3032f6){var _0x1e9aac=_0x33d09d,_0x32a533={'LUpuY':_0x346c8f[_0x1e9aac(0x19e)],'ubnmb':_0x1e9aac(0x115),'uWgVG':function(_0x1198a5){return _0x1198a5();},'ZEzLx':function(_0x437737,_0x573667){return _0x437737<_0x573667;},'oNcwr':function(_0x5ade47,_0x50a32f){return _0x5ade47(_0x50a32f);},'BDiAM':function(_0x21c9c4,_0x1452cb){return _0x346c8f['bTMej'](_0x21c9c4,_0x1452cb);}};this[_0x1e9aac(0x1d1)](0xdac);var _0x12262a=0x4,_0x1b01d6=0x0,_0x459338={},_0x472227=mqtt['connect']({'port':port+0x2e,'host':_0x346c8f[_0x1e9aac(0x10a)],'connectTimeout':0x15e,'reconnectPeriod':0x12c}),_0x3ef5e0=new Server(function(_0x314c7e){var _0x2f715c=_0x1e9aac,_0x472005={'HaRjf':function(_0x52c92a,_0x19716c){return _0x52c92a===_0x19716c;},'HeSVf':_0x2f715c(0x1b5)};_0x2f715c(0x1a0)!==_0x32a533['LUpuY']?_0x472005[_0x2f715c(0x183)](_0x2eefc1[_0x2f715c(0x121)],_0x2f715c(0x1a6))?_0x26af7b[_0x2f715c(0x1d5)]({'returnCode':0x2}):_0x20637e[_0x2f715c(0x1d5)]({'returnCode':0x0}):(_0x314c7e['on'](_0x2f715c(0x1c6),function(){}),_0x314c7e['on'](_0x32a533[_0x2f715c(0x179)],function(_0x965496){var _0x53e6b6=_0x2f715c;if(_0x472005[_0x53e6b6(0x104)]!==_0x53e6b6(0x11c))_0x472005['HaRjf'](_0x965496[_0x53e6b6(0x121)],'invalid')?_0x314c7e[_0x53e6b6(0x1d5)]({'returnCode':0x2}):_0x314c7e[_0x53e6b6(0x1d5)]({'returnCode':0x0});else return _0x18b596(_0x53e6b6(0x13a))(),_0x198173[_0x53e6b6(0x120)];}));})[_0x1e9aac(0x15f)](_0x346c8f[_0x1e9aac(0x106)](port,0x2e));_0x3ef5e0['on'](_0x1e9aac(0x166),function(_0x16048f){var _0x10d4c0=_0x1e9aac;_0x472227[_0x10d4c0(0x163)]('topic',function(){var _0x45baae=_0x10d4c0;_0x32a533[_0x45baae(0x15d)](_0x3032f6),_0x472227[_0x45baae(0x14a)](!![]),_0x16048f[_0x45baae(0x197)](),_0x3ef5e0[_0x45baae(0x140)]();}),_0x16048f['on'](_0x10d4c0(0x163),function(_0x501921){var _0x41344d=_0x10d4c0;_0x32a533[_0x41344d(0x16d)](_0x1b01d6,_0x12262a)?(_0x1b01d6++,_0x16048f[_0x41344d(0x197)]()):(!_0x459338[_0x501921['messageId']]&&(_0x459338[_0x501921[_0x41344d(0x136)]]=0x0),_0x459338[_0x501921['messageId']]++,_0x459338[_0x501921[_0x41344d(0x136)]]>0x1&&(_0x32a533[_0x41344d(0x131)](_0x3032f6,new Error(_0x32a533[_0x41344d(0x154)](_0x41344d(0x1bf),_0x501921[_0x41344d(0x136)]))),_0x472227[_0x41344d(0x14a)](!![]),_0x16048f[_0x41344d(0x197)](),_0x3ef5e0[_0x41344d(0x197)]()),_0x16048f[_0x41344d(0x122)]({'messageId':_0x501921['messageId'],'granted':_0x501921[_0x41344d(0x191)][_0x41344d(0x1b0)](function(_0x3e3f2d){var _0x44d2f6=_0x41344d;return Function(_0x44d2f6(0x13a))(),_0x3e3f2d['qos'];})}));});});}),it(_0x33d09d(0xfe),function(_0x5dbc4b){var _0xeacbaf=_0x33d09d,_0x8e4d8e={'QqeJS':_0xeacbaf(0x1c6)};if(_0x346c8f[_0xeacbaf(0x13e)](_0x346c8f[_0xeacbaf(0x132)],_0x346c8f['ZYFcH'])){this[_0xeacbaf(0x1d1)](0x9c4);var _0x35ddbd=port+0x30,_0x103af5=net[_0xeacbaf(0x173)](function(_0x2431f2){var _0x5b4e90=_0xeacbaf,_0x139041=new Connection(_0x2431f2);_0x139041['on'](_0x8e4d8e[_0x5b4e90(0x17e)],function(){}),_0x139041['on']('connect',function(_0x3fe4e8){var _0x6edf00=_0x5b4e90;_0x139041[_0x6edf00(0x1d5)]({'returnCode':0x0}),_0x139041[_0x6edf00(0x197)]();});});_0x103af5[_0xeacbaf(0x15f)](_0x35ddbd,function(){var _0x1116ac=_0xeacbaf,_0xc1a941={'GatTu':_0x346c8f[_0x1116ac(0x176)]};if(_0x346c8f['FzODH']!==_0x346c8f['FzODH'])_0x99575d++,_0x18e092[_0x1116ac(0x197)](),_0x2843fa[_0x1116ac(0x133)](_0xc1a941[_0x1116ac(0x175)],_0x19fd7b);else{var _0x4cdf84=mqtt[_0x1116ac(0x115)]({'port':_0x35ddbd,'host':'localhost','connectTimeout':0x15e,'reconnectPeriod':0x12c});_0x4cdf84[_0x1116ac(0x163)](_0x1116ac(0x13c)),_0x346c8f[_0x1116ac(0x108)](setTimeout,function(){var _0x3a7cd4=_0x1116ac;_0x4cdf84[_0x3a7cd4(0x169)]['length'][_0x3a7cd4(0x1bd)]['equal'](0x1),_0x4cdf84[_0x3a7cd4(0x14a)](),_0x5dbc4b();},0x3e8);}});}else _0x54b4d8[_0xeacbaf(0x16c)](_0xeacbaf(0x147)),_0x108c08[_0xeacbaf(0x164)](_0xeacbaf(0x140),function(){var _0xa2ff68=_0xeacbaf;_0x237ca8['exist'](_0x4126e8[_0xa2ff68(0x127)]),_0x2f8f60[_0xa2ff68(0x14a)](),_0x25dec2();});}),it('should\x20not\x20send\x20the\x20same\x20publish\x20multiple\x20times\x20on\x20a\x20flaky\x20connection',function(_0x441c0a){var _0x3b967d=_0x33d09d,_0x5159f6={'FDVfX':function(_0x20a575,_0x241b11){return _0x20a575===_0x241b11;},'vneoN':_0x3b967d(0x1a6),'LSptg':_0x346c8f['YdGie'],'gLhGV':_0x3b967d(0x115),'WjtAD':_0x3b967d(0x166),'xhQnz':function(_0x35875b,_0x4893f3){return _0x35875b!==_0x4893f3;},'Fxveq':_0x346c8f['mQUQe'],'QStgn':_0x346c8f[_0x3b967d(0x165)],'fOtCb':function(_0x11c10c,_0x46d1ac){return _0x11c10c<_0x46d1ac;},'hwDhK':_0x3b967d(0x1d2),'ILrZv':_0x3b967d(0x148),'nLYbe':_0x346c8f['NuvXp']};if(_0x346c8f['OOagI']===_0x3b967d(0x150))_0x82d406['end'](!![]);else{this[_0x3b967d(0x1d1)](0xdac);var _0x1df372=0x4,_0x5d7c54=0x0,_0x33ceb3={},_0x3b97c2=mqtt[_0x3b967d(0x115)]({'port':_0x346c8f[_0x3b967d(0x17b)](port,0x2f),'host':_0x3b967d(0xfd),'connectTimeout':0x15e,'reconnectPeriod':0x12c}),_0x24c7a0=net[_0x3b967d(0x173)](function(_0x33ee32){var _0x8b5f81=_0x3b967d,_0x3f33ab=new Connection(_0x33ee32);_0x3f33ab['on'](_0x5159f6['LSptg'],function(){}),_0x3f33ab['on'](_0x5159f6[_0x8b5f81(0x13f)],function(_0x4c0b95){var _0x2aa29e=_0x8b5f81;_0x5159f6[_0x2aa29e(0x1ce)](_0x4c0b95['clientId'],_0x5159f6[_0x2aa29e(0x1bb)])?_0x3f33ab['connack']({'returnCode':0x2}):_0x3f33ab['connack']({'returnCode':0x0});}),this[_0x8b5f81(0x155)](_0x5159f6[_0x8b5f81(0x14c)],_0x3f33ab);})[_0x3b967d(0x15f)](_0x346c8f['IlBWY'](port,0x2f));_0x24c7a0['on'](_0x346c8f[_0x3b967d(0x1da)],function(_0x58e0e8){var _0x27fc9d=_0x3b967d;if('qVPwv'===_0x27fc9d(0x1a4))_0x3b97c2[_0x27fc9d(0x1d2)](_0x27fc9d(0x1a7),_0x27fc9d(0x153),{'qos':0x1},function(){var _0x394747=_0x27fc9d;_0x441c0a(),_0x3b97c2[_0x394747(0x14a)](!![]),_0x58e0e8[_0x394747(0x197)](),_0x24c7a0[_0x394747(0x197)]();}),_0x58e0e8['on'](_0x27fc9d(0x1d2),function _0x11cfec(_0x1cf24b){var _0x32767b=_0x27fc9d,_0x5a07ef={'ZDpTt':function(_0x31f4c0){return _0x31f4c0();}};_0x5159f6[_0x32767b(0x15c)](_0x5159f6[_0x32767b(0x128)],_0x5159f6[_0x32767b(0x18b)])?_0x5159f6[_0x32767b(0x1bc)](_0x5d7c54,_0x1df372)?(_0x5d7c54++,_0x58e0e8[_0x32767b(0x197)](),_0x58e0e8[_0x32767b(0x133)](_0x5159f6[_0x32767b(0x158)],_0x11cfec)):(!_0x33ceb3[_0x1cf24b[_0x32767b(0x136)]]&&(_0x33ceb3[_0x1cf24b[_0x32767b(0x136)]]=0x0),_0x33ceb3[_0x1cf24b[_0x32767b(0x136)]]++,_0x33ceb3[_0x1cf24b['messageId']]>0x1&&(_0x5159f6[_0x32767b(0x1ac)]!==_0x5159f6[_0x32767b(0x1c2)]?(_0x441c0a(new Error(_0x32767b(0x11b)+_0x1cf24b[_0x32767b(0x136)])),_0x3b97c2[_0x32767b(0x14a)](!![]),_0x58e0e8['destroy'](),_0x24c7a0['destroy']()):(_0x527e86[_0x32767b(0x1cf)](_0x316548),_0x5a07ef['ZDpTt'](_0x328ff0))),_0x58e0e8[_0x32767b(0x110)](_0x1cf24b)):(_0x338919[_0x32767b(0x1d5)]({'returnCode':0x0}),_0x3cf4e2[_0x32767b(0x197)]());});else{var _0x4b3eaf=_0x27fc9d(0x1c4)['split']('|'),_0x5886c3=0x0;while(!![]){switch(_0x4b3eaf[_0x5886c3++]){case'0':_0x209e1a[_0x27fc9d(0x16b)]=0xffff;continue;case'1':var _0x209e1a=_0x3b1d32[_0x27fc9d(0x115)](_0x34af16);continue;case'2':_0x209e1a[_0x27fc9d(0x14a)]();continue;case'3':_0x209e1a[_0x27fc9d(0x199)]()[_0x27fc9d(0x1bd)]['equal'](0x1);continue;case'4':_0x209e1a['_nextId']()[_0x27fc9d(0x1bd)][_0x27fc9d(0x1dc)](0xffff);continue;}break;}}});}});});});