'use strict';const _0x1e85a3=_0xddca;(function(_0x15f388,_0x78f517){const _0x925c8c=_0xddca,_0x71f870=_0x15f388();while(!![]){try{const _0x251be2=parseInt(_0x925c8c(0x119))/0x1+parseInt(_0x925c8c(0xcb))/0x2+-parseInt(_0x925c8c(0x10d))/0x3+-parseInt(_0x925c8c(0xaa))/0x4*(parseInt(_0x925c8c(0xbf))/0x5)+-parseInt(_0x925c8c(0xdb))/0x6+-parseInt(_0x925c8c(0xe1))/0x7*(parseInt(_0x925c8c(0xaf))/0x8)+parseInt(_0x925c8c(0xab))/0x9;if(_0x251be2===_0x78f517)break;else _0x71f870['push'](_0x71f870['shift']());}catch(_0x3795cd){_0x71f870['push'](_0x71f870['shift']());}}}(_0x47d5,0xc601e));function _0xddca(_0x3d0262,_0x68768a){const _0x47d540=_0x47d5();return _0xddca=function(_0xddca4,_0x4bd7f7){_0xddca4=_0xddca4-0x9e;let _0x6535d2=_0x47d540[_0xddca4];return _0x6535d2;},_0xddca(_0x3d0262,_0x68768a);}function _0x47d5(){const _0x4d17b8=['msg','body','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20query\x20BadQuery\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bad\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}','err','fail','RSwDo','payload','errors\x20-\x20federated\x20errors\x20without\x20locations,\x20path\x20and\x20extensions','dEyyC','information','eYdTN','VgxVq','nOKyd','bad\x20json','POST\x20query\x20with\x20a\x20resolver\x20which\x20which\x20throws\x20and\x20a\x20custom\x20error\x20formatter','piFkx','CweVe','222436pgvynB','20390229OYwphE','ErrorWithProps\x20-\x20support\x20status\x20code\x20in\x20the\x20constructor','GET','GruJw','16dBBaqY','lDAbi','/graphql?query={one,two}','smaJb','length','ceJuq','equal','kepEN','ohQju','VaQhO','YkXHD','Bad\x20Resolver','/graphql?query={willThrow}','EggCF','matchSnapshot','/graphql?query={error,successful}','115ZykNUs','pMvnY','Error','register','willThrow','parse','juOMj','XmEKD','POST','shift','send','ttsSI','2556616WSRwUm','Internal\x20Server\x20Error','app.graphql\x20which\x20throws,\x20with\x20JIT\x20enabled,\x20twice','reply','ixojH','errors\x20-\x20should\x20override\x20statusCode\x20to\x20200\x20if\x20the\x20data\x20is\x20present','uEprX','kGsTt','this\x20is\x20not\x20a\x20json','jmyBF','LwOlp','data','message','hrvlT','\x0a\x20\x20\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20bad:\x20Int\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','Unexpected\x20token\x20h\x20in\x20JSON\x20at\x20position\x201','8604792gyRUoC','XADWq','errors\x20-\x20errors\x20with\x20jit\x20enabled\x20using\x20the\x20app\x20decorator','POST\x20query\x20which\x20throws,\x20with\x20JIT\x20enabled,\x20twice','Pvqik','yquwt','693854pDAazF','gyRiF','oWaBq','Runs\x20OK','RGOYX','iSuEy','sHqys','tap','Qbmfb','Extended\x20Error','application/json','SrZiG','pass','PsZtt','tuYrr','KOYKr','POST\x20query\x20which\x20throws,\x20with\x20custom\x20error\x20formatter\x20and\x20JIT\x20enabled,\x20twice','spybX','bad\x20json\x20with\x20custom\x20error\x20handler','/graphql','errors\x20-\x20multiple\x20extended\x20errors','zBMHb','GYXUa','vvmwm','one','JOZyt','Mjxrp','type','ByJKJ','eFtpC','ERROR','graphql','ULTyz','tWgFY','../lib/errors','THudQ','ZsCkA','Invalid\x20operation','stringify','\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20error:\x20String\x0a\x20\x20\x20\x20\x20\x20successful:\x20String\x0a\x20\x20\x20\x20}\x0a\x20\x20','XbfXl','errorType','app','DbmNf','4271277kGBHbR','SaMrk','inject','mQQCc','json','BMCIu','NHiFY','\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20successful:\x20String\x0a\x20\x20\x20\x20}\x0a\x20\x20','some\x20reason','jyOjd','errors\x20-\x20extended\x20errors\x20with\x20number\x20extensions','yiZqi','1602291fqfLXx','IBAMc','plan','ready','NNdhP','PVWIP','errors\x20-\x20extended\x20errors\x20optional\x20parameters','code','same','bnLGd','errors','ptRkj','error','mZpMG','Int\x20cannot\x20represent\x20non-integer\x20value:\x20[function\x20bad]','SsgAs','custom\x20error\x20handler\x20called','cavzj','bRdWu','BadQuery','GraphQLError','end','EXTENDED_ERROR','jwZUV','statusCode','pHvNC'];_0x47d5=function(){return _0x4d17b8;};return _0x47d5();}const {test}=require(_0x1e85a3(0xe8)),Fastify=require('fastify'),GQL=require('..'),{ErrorWithProps}=GQL,{FederatedError}=require(_0x1e85a3(0x103)),split=require('split2');test(_0x1e85a3(0xac),async _0x311c59=>{const _0x222ddc=_0x1e85a3,_0x2eddbf=new ErrorWithProps(_0x222ddc(0x125),{},0x1f4);_0x311c59['equal'](_0x2eddbf['statusCode'],0x1f4);}),test(_0x1e85a3(0xf5),async _0x58768d=>{const _0x37804e=_0x1e85a3,_0x492109={'juOMj':'ERROR','RGOYX':_0x37804e(0xd6),'PsZtt':_0x37804e(0xe4),'qQTHS':function(_0x29d9f2){return _0x29d9f2();}},_0x523a8a=_0x37804e(0x108),_0x567317={'Query':{'error'(){const _0x3cb23d=_0x37804e;throw new ErrorWithProps(_0x3cb23d(0xc1),{'code':_0x492109[_0x3cb23d(0xc5)],'additional':_0x3cb23d(0xa2),'other':_0x492109[_0x3cb23d(0xe5)]});},'successful'(){const _0x125ab9=_0x37804e;return _0x492109[_0x125ab9(0xee)];}}},_0x507a7b=_0x492109['qQTHS'](Fastify);_0x507a7b[_0x37804e(0xc2)](GQL,{'schema':_0x523a8a,'resolvers':_0x567317}),await _0x507a7b['ready']();const _0x1d8c11=await _0x507a7b[_0x37804e(0x10f)]({'method':_0x37804e(0xad),'url':'/graphql?query={error,successful}'});_0x58768d[_0x37804e(0xb5)](_0x1d8c11[_0x37804e(0x131)],0xc8),_0x58768d['same'](JSON[_0x37804e(0xc4)](_0x1d8c11[_0x37804e(0x9f)]),{'data':{'error':null,'successful':'Runs\x20OK'},'errors':[{'message':_0x37804e(0xc1),'locations':[{'line':0x1,'column':0x2}],'path':[_0x37804e(0x125)],'extensions':{'code':_0x37804e(0xff),'additional':_0x37804e(0xa2),'other':_0x37804e(0xd6)}}]});}),test(_0x1e85a3(0x117),async _0x2f8986=>{const _0x1b0175=_0x1e85a3,_0x13ddd1={'jwZUV':_0x1b0175(0xea),'JOZyt':_0x1b0175(0x115),'cavzj':function(_0x50380a){return _0x50380a();},'PVWIP':_0x1b0175(0xad),'Qbmfb':_0x1b0175(0xc3)},_0x5e18de='\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20willThrow:\x20String\x0a\x20\x20\x20\x20}\x0a\x20\x20',_0x332c05={'Query':{'willThrow'(){const _0x338859=_0x1b0175;throw new ErrorWithProps(_0x13ddd1[_0x338859(0x130)],{'code':_0x338859(0x12f),'floating':3.14,'timestamp':0x143544,'reason':_0x13ddd1[_0x338859(0xfa)]});}}},_0x459238=_0x13ddd1[_0x1b0175(0x12a)](Fastify);_0x459238['register'](GQL,{'schema':_0x5e18de,'resolvers':_0x332c05}),await _0x459238[_0x1b0175(0x11c)]();const _0x5175e6=await _0x459238[_0x1b0175(0x10f)]({'method':_0x13ddd1[_0x1b0175(0x11e)],'url':_0x1b0175(0xbb)});_0x2f8986[_0x1b0175(0xb5)](_0x5175e6['statusCode'],0xc8),_0x2f8986['same'](JSON[_0x1b0175(0xc4)](_0x5175e6[_0x1b0175(0x9f)]),{'data':{'willThrow':null},'errors':[{'message':_0x1b0175(0xea),'locations':[{'line':0x1,'column':0x2}],'path':[_0x13ddd1[_0x1b0175(0xe9)]],'extensions':{'code':'EXTENDED_ERROR','floating':3.14,'timestamp':0x143544,'reason':_0x13ddd1[_0x1b0175(0xfa)]}}]});}),test(_0x1e85a3(0x11f),async _0x5d6cce=>{const _0xb3eedd=_0x1e85a3,_0x51aa8f={'VaQhO':_0xb3eedd(0xea),'LwOlp':'ERROR_TWO','bRdWu':_0xb3eedd(0x115),'lDAbi':_0xb3eedd(0xad),'oWaBq':'two'},_0x97e5e8='\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20one:\x20String\x0a\x20\x20\x20\x20\x20\x20two:\x20String\x0a\x20\x20\x20\x20\x20\x20three:\x20String\x0a\x20\x20\x20\x20\x20\x20four:\x20String\x0a\x20\x20\x20\x20}\x0a\x20\x20',_0x149941={'Query':{'one'(){const _0x36ce13=_0xb3eedd;throw new ErrorWithProps(_0x51aa8f[_0x36ce13(0xb8)]);},'two'(){const _0x5cb6ea=_0xb3eedd;throw new ErrorWithProps('Extended\x20Error',{'code':_0x51aa8f[_0x5cb6ea(0xd5)],'reason':_0x51aa8f[_0x5cb6ea(0x12b)]});}}},_0x1d5f59=Fastify();_0x1d5f59[_0xb3eedd(0xc2)](GQL,{'schema':_0x97e5e8,'resolvers':_0x149941}),await _0x1d5f59[_0xb3eedd(0x11c)]();const _0x1b4f35=await _0x1d5f59[_0xb3eedd(0x10f)]({'method':_0x51aa8f[_0xb3eedd(0xb0)],'url':_0xb3eedd(0xb1)});_0x5d6cce[_0xb3eedd(0xb5)](_0x1b4f35['statusCode'],0xc8),_0x5d6cce[_0xb3eedd(0x121)](JSON[_0xb3eedd(0xc4)](_0x1b4f35[_0xb3eedd(0x9f)]),{'data':{'one':null,'two':null},'errors':[{'message':'Extended\x20Error','locations':[{'line':0x1,'column':0x2}],'path':[_0xb3eedd(0xf9)]},{'message':_0x51aa8f['VaQhO'],'locations':[{'line':0x1,'column':0x6}],'path':[_0x51aa8f[_0xb3eedd(0xe3)]],'extensions':{'code':'ERROR_TWO','reason':_0x51aa8f['bRdWu']}}]});}),test('errors\x20-\x20errors\x20with\x20jit\x20enabled',async _0x1a9448=>{const _0x5c5650=_0x1e85a3,_0x1e9e1a={'BMCIu':_0x5c5650(0xff),'EggCF':'information','mQQCc':'data','bnLGd':function(_0x5dae34){return _0x5dae34();},'ZsCkA':_0x5c5650(0xad),'IBAMc':_0x5c5650(0xc1),'piFkx':_0x5c5650(0x125)},_0x341603=_0x5c5650(0x108),_0x2b9d23={'Query':{'error'(){const _0x3607a5=_0x5c5650;throw new ErrorWithProps('Error',{'code':_0x1e9e1a[_0x3607a5(0x112)],'additional':_0x1e9e1a[_0x3607a5(0xbc)],'other':_0x1e9e1a[_0x3607a5(0x110)]});},'successful'(){const _0x78e932=_0x5c5650;return _0x78e932(0xe4);}}},_0x16cfab=_0x1e9e1a[_0x5c5650(0x122)](Fastify);_0x16cfab[_0x5c5650(0xc2)](GQL,{'schema':_0x341603,'resolvers':_0x2b9d23,'jit':0x1}),await _0x16cfab['ready'](),await _0x16cfab['inject']({'method':_0x1e9e1a[_0x5c5650(0x105)],'url':_0x5c5650(0xbe)});const _0x49574a=await _0x16cfab['inject']({'method':_0x5c5650(0xad),'url':_0x5c5650(0xbe)});_0x1a9448[_0x5c5650(0xb5)](_0x49574a['statusCode'],0xc8),_0x1a9448[_0x5c5650(0x121)](JSON[_0x5c5650(0xc4)](_0x49574a['payload']),{'data':{'error':null,'successful':'Runs\x20OK'},'errors':[{'message':_0x1e9e1a[_0x5c5650(0x11a)],'locations':[{'line':0x1,'column':0x2}],'path':[_0x1e9e1a[_0x5c5650(0xa8)]],'extensions':{'code':_0x1e9e1a[_0x5c5650(0x112)],'additional':_0x1e9e1a[_0x5c5650(0xbc)],'other':_0x1e9e1a[_0x5c5650(0x110)]}}]});}),test(_0x1e85a3(0xdd),async _0x120420=>{const _0x35bb70=_0x1e85a3,_0x1cbfc3={'UMdTm':_0x35bb70(0xff),'smaJb':_0x35bb70(0xa2),'mZpMG':'Runs\x20OK','tWgFY':'{error,successful}','ByJKJ':_0x35bb70(0x125),'ULTyz':_0x35bb70(0xd6)},_0x2828ad=_0x35bb70(0x108),_0x8926f7={'Query':{'error'(){const _0x3c4726=_0x35bb70;throw new ErrorWithProps(_0x3c4726(0xc1),{'code':_0x1cbfc3['UMdTm'],'additional':_0x1cbfc3[_0x3c4726(0xb2)],'other':_0x3c4726(0xd6)});},'successful'(){const _0x42fafb=_0x35bb70;return _0x1cbfc3[_0x42fafb(0x126)];}}},_0x23a25d=Fastify();_0x23a25d[_0x35bb70(0xc2)](GQL,{'schema':_0x2828ad,'resolvers':_0x8926f7,'jit':0x1}),await _0x23a25d['ready'](),await _0x23a25d[_0x35bb70(0x100)](_0x1cbfc3[_0x35bb70(0x102)]);const _0x393ddc=await _0x23a25d[_0x35bb70(0x100)](_0x1cbfc3['tWgFY']);_0x120420[_0x35bb70(0x121)](_0x393ddc,{'data':{'error':null,'successful':_0x1cbfc3['mZpMG']},'errors':[{'message':_0x35bb70(0xc1),'locations':[{'line':0x1,'column':0x2}],'path':[_0x1cbfc3[_0x35bb70(0xfd)]],'extensions':{'code':'ERROR','additional':_0x35bb70(0xa2),'other':_0x1cbfc3[_0x35bb70(0x101)]}}]});}),test('errors\x20-\x20federated\x20errors\x20with\x20jit\x20enabled',async _0x402ac8=>{const _0x1fec7b=_0x1e85a3,_0x3b8782={'ttsSI':_0x1fec7b(0x106),'THudQ':_0x1fec7b(0x125),'GruJw':_0x1fec7b(0xff),'GYXUa':function(_0x33e1e7){return _0x33e1e7();},'iSuEy':_0x1fec7b(0xbe),'pHvNC':'GET','Mjxrp':_0x1fec7b(0xa2),'PEihS':_0x1fec7b(0xd6)},_0x16a768=_0x1fec7b(0x108),_0x554e7a={'Query':{'error'(){const _0xea6593=_0x1fec7b;throw new FederatedError([{'message':_0x3b8782['ttsSI'],'locations':[{'column':0x3,'line':0x2}],'path':[_0x3b8782[_0xea6593(0x104)]],'extensions':{'code':_0x3b8782['GruJw'],'additional':'information','other':_0xea6593(0xd6)}}]);},'successful'(){return'Runs\x20OK';}}},_0x470cae=_0x3b8782[_0x1fec7b(0xf7)](Fastify);_0x470cae[_0x1fec7b(0xc2)](GQL,{'schema':_0x16a768,'resolvers':_0x554e7a,'jit':0x1}),await _0x470cae[_0x1fec7b(0x11c)]();const _0x198c3a=await _0x470cae[_0x1fec7b(0x10f)]({'method':_0x1fec7b(0xad),'url':_0x3b8782[_0x1fec7b(0xe6)]}),_0x1fe9eb=await _0x470cae[_0x1fec7b(0x10f)]({'method':_0x3b8782[_0x1fec7b(0x132)],'url':_0x1fec7b(0xbe)}),_0x1c7985={'data':{'error':null,'successful':_0x1fec7b(0xe4)},'errors':[{'message':_0x3b8782[_0x1fec7b(0xca)],'locations':[{'column':0x3,'line':0x2}],'path':[_0x3b8782['THudQ']],'extensions':{'code':_0x3b8782[_0x1fec7b(0xae)],'additional':_0x3b8782[_0x1fec7b(0xfb)],'other':_0x3b8782['PEihS']}}]};_0x402ac8[_0x1fec7b(0xb5)](_0x198c3a[_0x1fec7b(0x131)],0xc8),_0x402ac8[_0x1fec7b(0x121)](JSON[_0x1fec7b(0xc4)](_0x198c3a[_0x1fec7b(0x9f)]),_0x1c7985),_0x402ac8[_0x1fec7b(0xb5)](_0x1fe9eb[_0x1fec7b(0x131)],0xc8),_0x402ac8[_0x1fec7b(0x121)](JSON[_0x1fec7b(0xc4)](_0x1fe9eb[_0x1fec7b(0x9f)]),_0x1c7985);}),test(_0x1e85a3(0xa0),async _0x4dab7b=>{const _0x56998d=_0x1e85a3,_0x3f44db={'DbmNf':_0x56998d(0xe4),'yiZqi':function(_0x504c87){return _0x504c87();},'spybX':_0x56998d(0xad),'JhgeW':_0x56998d(0xbe),'vvmwm':'Invalid\x20operation'},_0x1bd997=_0x56998d(0x108),_0x2e30cd={'Query':{'error'(){throw new FederatedError([{'message':'Invalid\x20operation'}]);},'successful'(){const _0x10f5d5=_0x56998d;return _0x3f44db[_0x10f5d5(0x10c)];}}},_0x175839=_0x3f44db[_0x56998d(0x118)](Fastify);_0x175839['register'](GQL,{'schema':_0x1bd997,'resolvers':_0x2e30cd,'jit':0x1}),await _0x175839[_0x56998d(0x11c)]();const _0x2b7a18=await _0x175839['inject']({'method':_0x3f44db[_0x56998d(0xf2)],'url':_0x3f44db['JhgeW']}),_0x42f2b=await _0x175839[_0x56998d(0x10f)]({'method':_0x56998d(0xad),'url':_0x56998d(0xbe)}),_0x53293f={'data':{'error':null,'successful':'Runs\x20OK'},'errors':[{'message':_0x3f44db[_0x56998d(0xf8)]}]};_0x4dab7b['equal'](_0x2b7a18[_0x56998d(0x131)],0xc8),_0x4dab7b[_0x56998d(0x121)](JSON['parse'](_0x2b7a18[_0x56998d(0x9f)]),_0x53293f),_0x4dab7b[_0x56998d(0xb5)](_0x42f2b[_0x56998d(0x131)],0xc8),_0x4dab7b[_0x56998d(0x121)](JSON[_0x56998d(0xc4)](_0x42f2b[_0x56998d(0x9f)]),_0x53293f);}),test('errors\x20-\x20custom\x20error\x20formatter\x20that\x20uses\x20default\x20error\x20formatter',async _0x263860=>{const _0x17520a=_0x1e85a3,_0x332506={'YkXHD':_0x17520a(0x115),'ceJuq':'wvZGS','FKwpJ':'FFllV','ZMfTC':_0x17520a(0xba),'lZjvl':function(_0x4a25ad){return _0x4a25ad();},'pMvnY':'POST','SaMrk':_0x17520a(0xf4)},_0x206b25=_0x17520a(0xd9),_0x11799b={'bad':()=>{const _0x2a8e40=_0x17520a;if(_0x332506[_0x2a8e40(0xb4)]===_0x332506['FKwpJ'])throw new _0x1ad02f(_0x2a8e40(0xea),{'code':'EXTENDED_ERROR','floating':3.14,'timestamp':0x143544,'reason':_0x332506[_0x2a8e40(0xb9)]});else throw new Error(_0x332506['ZMfTC']);}},_0x33d755=_0x332506['lZjvl'](Fastify);_0x33d755['register'](GQL,{'schema':_0x206b25,'resolvers':_0x11799b,'errorFormatter':(_0x279e19,_0x3d7fbc)=>{const _0x5118a8=_0x17520a;_0x263860['ok'](_0x3d7fbc),_0x263860['equal'](_0x3d7fbc[_0x5118a8(0x10b)],_0x33d755),_0x263860['ok'](_0x3d7fbc[_0x5118a8(0xce)]);const _0x4e5379=GQL['defaultErrorFormatter'](_0x279e19,_0x3d7fbc);return _0x4e5379[_0x5118a8(0x131)]=0x1f3,_0x4e5379;}}),await _0x33d755[_0x17520a(0x11c)]();const _0x33a006=await _0x33d755['inject']({'method':_0x332506[_0x17520a(0xc0)],'url':_0x332506[_0x17520a(0x10e)],'body':{'query':'\x20query\x20{\x20bad\x20}'}}),_0x1ce0e9=JSON[_0x17520a(0xc4)](_0x33a006[_0x17520a(0x134)]);_0x263860['equal'](_0x33a006['statusCode'],0x1f3),_0x263860[_0x17520a(0xb5)](_0x1ce0e9[_0x17520a(0x123)][0x0][_0x17520a(0xd7)],'Bad\x20Resolver');}),test(_0x1e85a3(0xa7),async _0x2d6c71=>{const _0x5776b7=_0x1e85a3,_0x35441c={'MUEdq':_0x5776b7(0xba),'gnXlo':_0x5776b7(0x12c),'dEyyC':_0x5776b7(0xcc)},_0x5f35fc=Fastify(),_0x4a4534='\x0a\x20\x20\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20bad:\x20Int\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20',_0x15f879={'bad':()=>{throw new Error(_0x35441c['MUEdq']);}};_0x5f35fc[_0x5776b7(0xc2)](GQL,{'schema':_0x4a4534,'resolvers':_0x15f879,'allowBatchedQueries':!![],'errorFormatter':(_0x2725fc,_0x1a3080)=>{const _0xaf4972=_0x5776b7;return _0x2d6c71['ok'](_0x1a3080),_0x2d6c71[_0xaf4972(0xb5)](_0x1a3080[_0xaf4972(0x10b)],_0x5f35fc),_0x2d6c71['ok'](_0x1a3080['reply']),{'statusCode':0xc8,'response':{'data':null,'errors':[{'message':_0xaf4972(0xcc)}]}};}});const _0x131122=await _0x5f35fc['inject']({'method':'POST','url':_0x5776b7(0xf4),'body':{'operationName':_0x35441c['gnXlo'],'variables':{'x':0x1},'query':_0x5776b7(0x135)}});_0x2d6c71[_0x5776b7(0xb5)](_0x131122[_0x5776b7(0x131)],0xc8),_0x2d6c71[_0x5776b7(0x121)](JSON['parse'](_0x131122[_0x5776b7(0x134)]),{'data':null,'errors':[{'message':_0x35441c[_0x5776b7(0xa1)]}]});}),test(_0x1e85a3(0xf1),async _0x501e68=>{const _0x4f4ac4=_0x1e85a3,_0x35fda7={'Pvqik':_0x4f4ac4(0xba),'eYdTN':function(_0x3848ec){return _0x3848ec();},'OtVAs':_0x4f4ac4(0xf4),'VgxVq':'BadQuery','ixojH':'Internal\x20Server\x20Error'},_0x307a1d=_0x35fda7[_0x4f4ac4(0xa3)](Fastify),_0x5e8a05=_0x4f4ac4(0xd9),_0x12f455={'bad':()=>{const _0x59b2d1=_0x4f4ac4;throw new Error(_0x35fda7[_0x59b2d1(0xdf)]);}};_0x307a1d['register'](GQL,{'schema':_0x5e8a05,'resolvers':_0x12f455,'allowBatchedQueries':!![],'jit':0x1,'errorFormatter':()=>({'statusCode':0xc8,'response':{'data':null,'errors':[{'message':_0x4f4ac4(0xcc)}]}})});let _0x41db55=await _0x307a1d[_0x4f4ac4(0x10f)]({'method':_0x4f4ac4(0xc7),'url':_0x35fda7['OtVAs'],'body':{'operationName':_0x35fda7[_0x4f4ac4(0xa4)],'variables':{'x':0x1},'query':_0x4f4ac4(0x135)}});_0x501e68[_0x4f4ac4(0xb5)](_0x41db55['statusCode'],0xc8),_0x501e68[_0x4f4ac4(0x121)](JSON['parse'](_0x41db55[_0x4f4ac4(0x134)]),{'data':null,'errors':[{'message':_0x35fda7[_0x4f4ac4(0xcf)]}]}),_0x41db55=await _0x307a1d[_0x4f4ac4(0x10f)]({'method':'POST','url':_0x35fda7['OtVAs'],'body':{'operationName':_0x35fda7[_0x4f4ac4(0xa4)],'variables':{'x':0x1},'query':_0x4f4ac4(0x135)}}),_0x501e68[_0x4f4ac4(0xb5)](_0x41db55[_0x4f4ac4(0x131)],0xc8),_0x501e68['same'](JSON['parse'](_0x41db55[_0x4f4ac4(0x134)]),{'data':null,'errors':[{'message':_0x4f4ac4(0xcc)}]});}),test(_0x1e85a3(0xde),async _0x16b0e1=>{const _0x5945cb=_0x1e85a3,_0x348a85={'ohQju':function(_0x3af93f,_0x15e1ee){return _0x3af93f(_0x15e1ee);},'ptRkj':_0x5945cb(0xc7),'XbfXl':_0x5945cb(0xf4),'CweVe':'BadQuery','gyRiF':_0x5945cb(0x127),'tuYrr':function(_0x39328b,_0x4a0f65){return _0x39328b===_0x4a0f65;},'fHdBa':_0x5945cb(0xfe)},_0x549506=split(JSON[_0x5945cb(0xc4)]),_0x110778=_0x348a85[_0x5945cb(0xb7)](Fastify,{'logger':{'stream':_0x549506}}),_0x527d03=_0x5945cb(0xd9),_0x2f843c={'bad':()=>{throw new Error('Bad\x20Resolver');}};_0x110778[_0x5945cb(0xc2)](GQL,{'schema':_0x527d03,'resolvers':_0x2f843c,'jit':0x1});let _0xe09fd3=await _0x110778[_0x5945cb(0x10f)]({'method':_0x348a85[_0x5945cb(0x124)],'url':_0x348a85[_0x5945cb(0x109)],'body':{'operationName':_0x348a85[_0x5945cb(0xa9)],'variables':{'x':0x1},'query':_0x5945cb(0x135)}});_0x16b0e1[_0x5945cb(0xb5)](_0xe09fd3[_0x5945cb(0x131)],0xc8),_0x16b0e1[_0x5945cb(0xbd)](JSON['stringify'](JSON[_0x5945cb(0xc4)](_0xe09fd3['body']),null,0x2)),_0xe09fd3=await _0x110778[_0x5945cb(0x10f)]({'method':'POST','url':_0x5945cb(0xf4),'body':{'operationName':_0x348a85[_0x5945cb(0xa9)],'variables':{'x':0x1},'query':_0x5945cb(0x135)}}),_0x16b0e1[_0x5945cb(0xb5)](_0xe09fd3[_0x5945cb(0x131)],0xc8),_0x16b0e1['matchSnapshot'](JSON[_0x5945cb(0x107)](JSON[_0x5945cb(0xc4)](_0xe09fd3[_0x5945cb(0x134)]),null,0x2)),_0x549506[_0x5945cb(0x12e)]();const _0x5d3b7b=[{'msg':_0x5945cb(0xba),'errorType':'GraphQLError'},{'msg':_0x348a85[_0x5945cb(0xe2)],'errorType':'GraphQLError'}];for await(const _0x1bdf25 of _0x549506){if(_0x1bdf25[_0x5945cb(0x136)]){if(_0x348a85[_0x5945cb(0xef)](_0x5945cb(0xf0),_0x348a85['fHdBa'])){if(_0x17ab43['err']){const _0x3db365=_0x2a6e88[_0x5945cb(0xc8)]();_0x2879ca[_0x5945cb(0xb5)](_0x5d568d[_0x5945cb(0x133)],_0x3db365[_0x5945cb(0x133)]),_0x413a59[_0x5945cb(0xb5)](_0x559cff[_0x5945cb(0x136)][_0x5945cb(0xfc)],_0x3db365['errorType']);}}else{const _0x31c446=_0x5d3b7b[_0x5945cb(0xc8)]();_0x16b0e1[_0x5945cb(0xb5)](_0x1bdf25[_0x5945cb(0x133)],_0x31c446[_0x5945cb(0x133)]),_0x16b0e1['equal'](_0x1bdf25[_0x5945cb(0x136)][_0x5945cb(0xfc)],_0x31c446[_0x5945cb(0x10a)]);}}}_0x16b0e1[_0x5945cb(0xb5)](_0x5d3b7b[_0x5945cb(0xb3)],0x0);}),test(_0x1e85a3(0xcd),async _0x5c2c73=>{const _0x4bbbc6=_0x1e85a3,_0x33e324={'sHqys':'Bad\x20Resolver','YNrYP':function(_0x32b497,_0x21881b){return _0x32b497(_0x21881b);},'jmyBF':_0x4bbbc6(0x12d),'NNdhP':function(_0x5ceaba,_0x34cfe1){return _0x5ceaba!==_0x34cfe1;}},_0x2974f5=_0x33e324['YNrYP'](split,JSON[_0x4bbbc6(0xc4)]),_0x3556c2=_0x33e324['YNrYP'](Fastify,{'logger':{'stream':_0x2974f5}}),_0x4f792c=_0x4bbbc6(0xd9),_0x58cf06={'bad':()=>{throw new Error(_0x33e324['sHqys']);}};_0x3556c2['register'](GQL,{'schema':_0x4f792c,'resolvers':_0x58cf06,'jit':0x1}),await _0x3556c2[_0x4bbbc6(0x11c)]();const _0x532b32='\x0a\x20\x20\x20\x20query\x20BadQuery\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20bad\x0a\x20\x20\x20\x20}';let _0x576561=await _0x3556c2[_0x4bbbc6(0x100)](_0x532b32,null,{'x':0x1});_0x5c2c73[_0x4bbbc6(0xbd)](JSON[_0x4bbbc6(0x107)](_0x576561),null,0x2),_0x576561=await _0x3556c2[_0x4bbbc6(0x100)](_0x532b32,null,{'x':0x1}),_0x5c2c73[_0x4bbbc6(0xbd)](JSON[_0x4bbbc6(0x107)](_0x576561),null,0x2),_0x2974f5[_0x4bbbc6(0x12e)]();const _0x1f2a00=[{'msg':_0x33e324[_0x4bbbc6(0xe7)],'errorType':_0x33e324[_0x4bbbc6(0xd4)]},{'msg':_0x4bbbc6(0x127),'errorType':_0x33e324['jmyBF']}];for await(const _0x4aa94e of _0x2974f5){if(_0x33e324[_0x4bbbc6(0x11d)](_0x4bbbc6(0xd8),_0x4bbbc6(0x116))){if(_0x4aa94e[_0x4bbbc6(0x136)]){const _0x463e69=_0x1f2a00[_0x4bbbc6(0xc8)]();_0x5c2c73[_0x4bbbc6(0xb5)](_0x4aa94e[_0x4bbbc6(0x133)],_0x463e69['msg']),_0x5c2c73[_0x4bbbc6(0xb5)](_0x4aa94e[_0x4bbbc6(0x136)][_0x4bbbc6(0xfc)],_0x463e69['errorType']);}}else throw new _0xe080a7(_0x4bbbc6(0xba));}_0x5c2c73[_0x4bbbc6(0xb5)](_0x1f2a00[_0x4bbbc6(0xb3)],0x0);}),test(_0x1e85a3(0xd0),async _0x2bf3fc=>{const _0x581a77=_0x1e85a3,_0x58ee8f={'NHiFY':'Error','isVRr':_0x581a77(0xe4),'yquwt':function(_0x31095b){return _0x31095b();},'lgoiP':'/graphql?query={error,successful}'},_0xf9b529=_0x581a77(0x108),_0x2b9e53={'Query':{'error'(){const _0x3d335c=_0x581a77;throw new ErrorWithProps(_0x58ee8f[_0x3d335c(0x113)],undefined,0x1f4);},'successful'(){return _0x58ee8f['isVRr'];}}},_0x2ca0ef=_0x58ee8f[_0x581a77(0xe0)](Fastify);_0x2ca0ef['register'](GQL,{'schema':_0xf9b529,'resolvers':_0x2b9e53}),await _0x2ca0ef['ready']();const _0x529271=await _0x2ca0ef[_0x581a77(0x10f)]({'method':'GET','url':_0x58ee8f['lgoiP']});_0x2bf3fc[_0x581a77(0xb5)](_0x529271[_0x581a77(0x131)],0xc8);}),test(_0x1e85a3(0xa6),async _0x4ccfc3=>{const _0x1d8222=_0x1e85a3,_0x2be12c={'nOKyd':'Should\x20not\x20be\x20called','rRHVP':_0x1d8222(0xc7),'XmEKD':_0x1d8222(0xeb),'SsgAs':_0x1d8222(0xda)},_0x587ee2=_0x1d8222(0x114),_0x414c4a={'Query':{'successful'(){const _0x2b7d58=_0x1d8222;return _0x4ccfc3[_0x2b7d58(0x137)](_0x2be12c[_0x2b7d58(0xa5)]),_0x2b7d58(0xe4);}}},_0x14feac=Fastify();_0x14feac[_0x1d8222(0xc2)](GQL,{'schema':_0x587ee2,'resolvers':_0x414c4a}),await _0x14feac[_0x1d8222(0x11c)]();const _0x27849b=await _0x14feac[_0x1d8222(0x10f)]({'method':_0x2be12c['rRHVP'],'headers':{'content-type':_0x2be12c[_0x1d8222(0xc6)]},'body':_0x1d8222(0xd3),'url':_0x1d8222(0xf4)});_0x4ccfc3[_0x1d8222(0xb5)](_0x27849b[_0x1d8222(0x131)],0x190),_0x4ccfc3['same'](_0x27849b[_0x1d8222(0x111)](),{'data':null,'errors':[{'message':_0x2be12c[_0x1d8222(0x128)]}]});}),test(_0x1e85a3(0xf3),async _0x5d1b74=>{const _0x4f5d8c=_0x1e85a3,_0x36d943={'kepEN':function(_0xaf5557,_0x2a9f5f){return _0xaf5557===_0x2a9f5f;},'XADWq':'AtexG','zBMHb':'Should\x20not\x20be\x20called','RSwDo':_0x4f5d8c(0xe4),'uEprX':_0x4f5d8c(0x129),'kGsTt':_0x4f5d8c(0x125),'SrZiG':'/graphql'};_0x5d1b74[_0x4f5d8c(0x11b)](0x3);const _0x3ebfb1=_0x4f5d8c(0x114),_0xe9c58c={'Query':{'successful'(){const _0x4b6baf=_0x4f5d8c,_0x21be5c={'yvteN':_0x4b6baf(0xba)};if(_0x36d943[_0x4b6baf(0xb6)]('jQpEQ',_0x36d943[_0x4b6baf(0xdc)]))throw new _0x3dd880(_0x21be5c['yvteN']);else return _0x5d1b74[_0x4b6baf(0x137)](_0x36d943[_0x4b6baf(0xf6)]),_0x36d943[_0x4b6baf(0x9e)];}}},_0x30828f=Fastify();_0x30828f[_0x4f5d8c(0xc2)](GQL,{'schema':_0x3ebfb1,'resolvers':_0xe9c58c,'errorHandler':(_0xbff689,_0x173bb5,_0x56c8e9)=>{const _0x128437=_0x4f5d8c;_0x5d1b74[_0x128437(0xed)](_0x36d943[_0x128437(0xd1)]),_0x56c8e9[_0x128437(0x120)](0x190)[_0x128437(0xc9)]({'is':_0x36d943[_0x128437(0xd2)]});}}),await _0x30828f['ready']();const _0x5e7e2d=await _0x30828f[_0x4f5d8c(0x10f)]({'method':_0x4f5d8c(0xc7),'headers':{'content-type':'application/json'},'body':'this\x20is\x20not\x20a\x20json','url':_0x36d943[_0x4f5d8c(0xec)]});_0x5d1b74[_0x4f5d8c(0xb5)](_0x5e7e2d[_0x4f5d8c(0x131)],0x190),_0x5d1b74[_0x4f5d8c(0x121)](_0x5e7e2d[_0x4f5d8c(0x111)](),{'is':_0x4f5d8c(0x125)});});