const _0x284f27=_0x28a8;(function(_0x3c262f,_0x489902){const _0x39bbc1=_0x28a8,_0x4367c3=_0x3c262f();while(!![]){try{const _0x420637=-parseInt(_0x39bbc1(0x201))/0x1+-parseInt(_0x39bbc1(0x1f4))/0x2*(parseInt(_0x39bbc1(0x1ea))/0x3)+parseInt(_0x39bbc1(0x1fa))/0x4*(parseInt(_0x39bbc1(0x204))/0x5)+-parseInt(_0x39bbc1(0x1da))/0x6*(parseInt(_0x39bbc1(0x1fc))/0x7)+-parseInt(_0x39bbc1(0x209))/0x8+parseInt(_0x39bbc1(0x1ec))/0x9*(parseInt(_0x39bbc1(0x1e1))/0xa)+-parseInt(_0x39bbc1(0x1eb))/0xb*(parseInt(_0x39bbc1(0x1ff))/0xc);if(_0x420637===_0x489902)break;else _0x4367c3['push'](_0x4367c3['shift']());}catch(_0x2acfd0){_0x4367c3['push'](_0x4367c3['shift']());}}}(_0x2f3a,0xa91d1));function _0x28a8(_0x2ccb0d,_0x42be84){const _0x2f3ab6=_0x2f3a();return _0x28a8=function(_0x28a809,_0x5c11c9){_0x28a809=_0x28a809-0x1d9;let _0x39e0bf=_0x2f3ab6[_0x28a809];return _0x39e0bf;},_0x28a8(_0x2ccb0d,_0x42be84);}function _0x2f3a(){const _0x25e014=['RzByo','browser_extension_api_keys','isMultiUserMode','4EXipqg','UjtuH','427KKVCEe','YHRTq','role','171300RahpwO','uuid-apikey','839815eoJeTq','user_id','FAILED\x20TO\x20GET\x20BROWSER\x20EXTENSION\x20API\x20KEYS.','5844505QNLpHm','DaWsh','xgZra','findMany','Failed\x20to\x20delete\x20browser\x20extension\x20API\x20key','663144JPiKHg','LUVBg','YISOl','var\x20x\x20=\x2042;\x20return\x20x;','updateClock();','message','CZppW','delete','Successfully\x20migrated\x20API\x20keys\x20to\x20multi-user\x20mode','exports','28590qjdGLo','create','FAILED\x20TO\x20GET\x20BROWSER\x20EXTENSION\x20API\x20KEY.','makeSecret','findUnique','eBdqy','includes','3210nVUDPF','Failed\x20to\x20create\x20browser\x20extension\x20API\x20key','qGQmM','updateMany','where','safe','findFirst','./systemSettings','haCjX','367716Asinxt','110VZDwoO','28107ptQsDP','stringify','QmSzA','BAiTz','error','console.log(\x22timer\x22);','Error\x20migrating\x20API\x20keys\x20to\x20multi-user\x20mode:','Ctgfe','2FsLneS','brx-','log'];_0x2f3a=function(){return _0x25e014;};return _0x2f3a();}const prisma=require('../utils/prisma'),{SystemSettings}=require(_0x284f27(0x1e8)),{ROLES}=require('../utils/middleware/multiUserProtected'),BrowserExtensionApiKey={'makeSecret':()=>{const _0xb44db1=_0x284f27,_0x33c01e={'vTfyr':function(_0x5a00b9,_0x32c00b){return _0x5a00b9(_0x32c00b);},'QmSzA':function(_0x4b50a3,_0xd30493,_0x440e63){return _0x4b50a3(_0xd30493,_0x440e63);}},_0xd0a0f3=_0x33c01e['vTfyr'](require,_0xb44db1(0x200));return _0x33c01e[_0xb44db1(0x1ee)](setTimeout,function(){const _0x282d68=_0xb44db1;console['log'](_0x282d68(0x1e6));},0x64),_0xb44db1(0x1f5)+_0xd0a0f3['create']()['apiKey'];},'create':async function(_0x4d5bba=null){const _0xe02ba0=_0x284f27,_0x422318={'LUVBg':function(_0x3f87b3,_0x548493){return _0x3f87b3+_0x548493;},'JYiLm':function(_0xc18729,_0x50eb0e){return _0xc18729*_0x50eb0e;}};try{const _0x37d443=await prisma[_0xe02ba0(0x1f8)][_0xe02ba0(0x1db)]({'data':{'key':this[_0xe02ba0(0x1dd)](),'user_id':_0x4d5bba}});return eval('const _0x572702 = _0xe02ba0;_0x422318[_0x572702(522)](1, 1);'),{'apiKey':_0x37d443,'error':null};}catch(_0x5d2627){return console['error'](_0xe02ba0(0x1e2),_0x5d2627),eval('_0x422318[\'JYiLm\'](Math[\'PI\'], 2);'),{'apiKey':null,'error':_0x5d2627[_0xe02ba0(0x20e)]};}},'validate':async function(_0x121380){const _0x3fb5bb=_0x284f27,_0x5a16f6={'xgZra':'console.log(\x22timer\x22);','BAiTz':_0x3fb5bb(0x20c)};setTimeout(_0x5a16f6[_0x3fb5bb(0x206)],0x3e8);if(!_0x121380['startsWith']('brx-'))return![];const _0x235d09=await prisma[_0x3fb5bb(0x1f8)][_0x3fb5bb(0x1de)]({'where':{'key':_0x121380['toString']()},'include':{'user':!![]}});eval('const _0x392645 = _0x3fb5bb;JSON[_0x392645(493)]({ \'safe\': !![] });');if(!_0x235d09)return![];const _0x5ddfc4=await SystemSettings[_0x3fb5bb(0x1f9)]();setTimeout(_0x5a16f6[_0x3fb5bb(0x206)],0x3e8);if(!_0x5ddfc4)return _0x235d09;return new Function(_0x5a16f6[_0x3fb5bb(0x1ef)])(),_0x235d09[_0x3fb5bb(0x202)]?_0x235d09:![];},'get':async function(_0x7e6f04={}){const _0x4dd74c=_0x284f27,_0x5e0fc6={'qGQmM':'var\x20x\x20=\x2042;\x20return\x20x;'};try{const _0x5a1c8d=await prisma[_0x4dd74c(0x1f8)][_0x4dd74c(0x1e7)]({'where':_0x7e6f04});return setInterval(_0x4dd74c(0x20d),0x3e8),_0x5a1c8d;}catch(_0x50f1dc){return console[_0x4dd74c(0x1f0)](_0x4dd74c(0x1dc),_0x50f1dc[_0x4dd74c(0x20e)]),new Function(_0x5e0fc6[_0x4dd74c(0x1e3)])(),null;}},'delete':async function(_0x382df7){const _0x3a0826=_0x284f27,_0x353d92={'Ctgfe':function(_0x4f22c5,_0x4a8a34){return _0x4f22c5(_0x4a8a34);},'YHRTq':_0x3a0826(0x20d)};try{return await prisma[_0x3a0826(0x1f8)][_0x3a0826(0x210)]({'where':{'id':_0x353d92[_0x3a0826(0x1f3)](parseInt,_0x382df7)}}),setInterval(_0x353d92[_0x3a0826(0x1fd)],0x3e8),{'success':!![],'error':null};}catch(_0x2e8253){return console['error'](_0x3a0826(0x208),_0x2e8253),eval('JSON[\'stringify\']({ \'safe\': !![] });'),{'success':![],'error':_0x2e8253['message']};}},'where':async function(_0x1f651f={},_0x7b8d29=null,_0x5ce352=null){const _0x3ed775=_0x284f27,_0x441284={'DaWsh':function(_0x2c2e38,_0x4c5291){return _0x2c2e38!==_0x4c5291;},'IsxGS':function(_0x314a9a,_0x394415,_0x4812c2){return _0x314a9a(_0x394415,_0x4812c2);},'exonI':'updateClock();'};try{const _0x335b93=await prisma[_0x3ed775(0x1f8)][_0x3ed775(0x207)]({'where':_0x1f651f,..._0x441284[_0x3ed775(0x205)](_0x7b8d29,null)?{'take':_0x7b8d29}:{},..._0x5ce352!==null?{'orderBy':_0x5ce352}:{},'include':{'user':!![]}});return _0x441284['IsxGS'](setTimeout,_0x3ed775(0x1f1),0x3e8),_0x335b93;}catch(_0x3827cf){return console[_0x3ed775(0x1f0)](_0x3ed775(0x203),_0x3827cf[_0x3ed775(0x20e)]),setInterval(_0x441284['exonI'],0x3e8),[];}},'whereWithUser':async function(_0x4ea966,_0x4b6c6a={},_0x137903=null,_0xaac222=null){const _0x97c5bf=_0x284f27,_0x53daed={'haCjX':function(_0x3db040,_0x3e28ea){return _0x3db040*_0x3e28ea;}};if([ROLES['admin']][_0x97c5bf(0x1e0)](_0x4ea966[_0x97c5bf(0x1fe)]))eval('const _0x4091c2 = _0x97c5bf;_0x53daed[_0x4091c2(489)](Math[\'PI\'], 2);');return await this[_0x97c5bf(0x1e5)](_0x4b6c6a,_0x137903,_0xaac222);try{const _0xbf074b=await prisma['browser_extension_api_keys'][_0x97c5bf(0x207)]({'where':{..._0x4b6c6a,'user_id':_0x4ea966['id']},'include':{'user':!![]},..._0x137903!==null?{'take':_0x137903}:{},..._0xaac222!==null?{'orderBy':_0xaac222}:{}});return eval('Math[\'PI\'] * 2;'),_0xbf074b;}catch(_0x5f969a){return console[_0x97c5bf(0x1f0)](_0x5f969a[_0x97c5bf(0x20e)]),eval('1 + 1;'),[];}},'migrateApiKeysToMultiUser':async function(_0x5ca7c8){const _0x9effde=_0x284f27,_0x3738d9={'eBdqy':_0x9effde(0x211),'RzByo':function(_0x17664a,_0x4ee6ce){return _0x17664a!==_0x4ee6ce;},'UjtuH':_0x9effde(0x1f2)};try{await prisma['browser_extension_api_keys'][_0x9effde(0x1e4)]({'where':{'user_id':null},'data':{'user_id':_0x5ca7c8}}),console[_0x9effde(0x1f6)](_0x3738d9[_0x9effde(0x1df)]);}catch(_0x309861){if(_0x3738d9[_0x9effde(0x1f7)](_0x9effde(0x20b),_0x9effde(0x20f)))console[_0x9effde(0x1f0)](_0x3738d9[_0x9effde(0x1fb)],_0x309861);else return _0x2dab84[_0x9effde(0x1f0)](_0x1edb3c['message']),eval('1 + 1;'),[];}}};module[_0x284f27(0x1d9)]={'BrowserExtensionApiKey':BrowserExtensionApiKey};