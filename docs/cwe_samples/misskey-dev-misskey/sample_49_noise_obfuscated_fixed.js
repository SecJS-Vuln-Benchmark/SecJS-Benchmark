function _0x2d6d(_0x32f0e8,_0x225f58){const _0x559aa1=_0x559a();return _0x2d6d=function(_0x2d6d5e,_0x37b5e6){_0x2d6d5e=_0x2d6d5e-0xfa;let _0x3fef79=_0x559aa1[_0x2d6d5e];return _0x3fef79;},_0x2d6d(_0x32f0e8,_0x225f58);}const _0x2a189a=_0x2d6d;(function(_0xc69e7b,_0x57b534){const _0x24e0e9=_0x2d6d,_0xf00501=_0xc69e7b();while(!![]){try{const _0x590949=parseInt(_0x24e0e9(0x115))/0x1*(parseInt(_0x24e0e9(0xfb))/0x2)+-parseInt(_0x24e0e9(0x100))/0x3*(parseInt(_0x24e0e9(0x110))/0x4)+parseInt(_0x24e0e9(0x14d))/0x5+parseInt(_0x24e0e9(0x140))/0x6+parseInt(_0x24e0e9(0x123))/0x7*(-parseInt(_0x24e0e9(0x117))/0x8)+-parseInt(_0x24e0e9(0x11e))/0x9*(parseInt(_0x24e0e9(0x157))/0xa)+-parseInt(_0x24e0e9(0x15f))/0xb*(parseInt(_0x24e0e9(0x148))/0xc);if(_0x590949===_0x57b534)break;else _0xf00501['push'](_0xf00501['shift']());}catch(_0x57a0b0){_0xf00501['push'](_0xf00501['shift']());}}}(_0x559a,0xc0165));function _0x559a(){const _0x36a981=['/admin/invite/new','akRSC','DzhNy','limit_user_messages','admin','33OEkcug','UvXVN','params','../models/invite','exports','embeddingMaxChunkLength','../models/user','/admin/api-keys','support_email','workspaceUsers','end','user_deleted','whereWithUsers','locals','../models/vectors','ejDhN','user_created','sgWQE','api_key_deleted','CRBfx','PqSHB','where','agent_search_provider','aEfuS','/admin/invites','NbUUG','KSsNr','DwuRj','/admin/workspaces/:workspaceId/users','slug','XhkLC','logEvent','28154TYHUAk','ktTnP','EkfAD','hMMkM','post','1301694ZKjlhh','hqMQq','user','get','log','YaotX','Could\x20not\x20find\x20an\x20API\x20Keys.','loJck','username','invite_created','AFwAS','map','create','../utils/middleware/validatedRequest','manager','audHb','4VKgbqZ','Ejszb','text_splitter_chunk_size','BMLKj','RTbKZ','109nXEwnn','UimWq','238480OKNafI','asYdk','/admin/workspaces','return\x20new\x20Date();','woGfx','dPQMw','../models/apiKeys','18qaFdbx','NegBV','status','delete-namespace','DUehm','280aJLGmH','GIxkL','/admin/workspaces/:workspaceId/update-users','json','hBebb','delete','/admin/system-preferences','alCvX','console.log(\x22timer\x22);','../models/eventLogs','/admin/delete-api-key/:id','XBFQp','Etzjf','../utils/helpers','SEwZO','/admin/workspaces/new','XqdIV','true','tDWmQ','/admin/invite/:id','safe','sendStatus','pyZYC','invite_deleted','updateUsers','WYrKK','../utils/http','bGCTj','updateSettings','9379098txRgZD','JsiwN','FSGPm','QzWTO','deactivate','../models/workspace','value','HLfBt','2294436opImos','WWsry','valid','update','error','6884930lzcARd','/admin/user/:id','updateClock();','/admin/users/new','NUkLc','jPVaP','/admin/users','/admin/workspaces/:id','default_agent_skills','ExMna','7439330GFkOrR','text_splitter_chunk_overlap','swyfv'];_0x559a=function(){return _0x36a981;};return _0x559a();}const {ApiKey}=require(_0x2a189a(0x11d)),{Document}=require('../models/documents'),{EventLogs}=require(_0x2a189a(0x12c)),{Invite}=require(_0x2a189a(0x162)),{SystemSettings}=require('../models/systemSettings'),{Telemetry}=require('../models/telemetry'),{User}=require(_0x2a189a(0x165)),{DocumentVectors}=require(_0x2a189a(0x16d)),{Workspace}=require(_0x2a189a(0x145)),{WorkspaceChats}=require('../models/workspaceChats'),{getVectorDbClass,getEmbeddingEngineSelection}=require(_0x2a189a(0x130)),{validRoleSelection,canModifyAdmin,validCanModify}=require('../utils/helpers/admin'),{reqBody,userFromSession,safeJsonParse}=require(_0x2a189a(0x13d)),{strictMultiUserRoleValid,flexUserRoleValid,ROLES}=require('../utils/middleware/multiUserProtected'),{validatedRequest}=require(_0x2a189a(0x10d));function adminEndpoints(_0x2ae25a){const _0x89230d=_0x2a189a,_0x1b30d9={'alCvX':function(_0x39a7c1,_0x5a8220){return _0x39a7c1*_0x5a8220;},'jPVaP':function(_0x463b28,_0x5a6983){return _0x463b28(_0x5a6983);},'tPRmM':_0x89230d(0x16f),'IaKjw':function(_0x555a4a,_0x52ef8e,_0x428494){return _0x555a4a(_0x52ef8e,_0x428494);},'AFwAS':function(_0xf1665b,_0x5cc4dc,_0x475536){return _0xf1665b(_0x5cc4dc,_0x475536);},'TrwvX':_0x89230d(0x12b),'IBohb':function(_0x5566f4,_0x123359,_0xb0f582){return _0x5566f4(_0x123359,_0xb0f582);},'CRBfx':'Ejszb','YaotX':function(_0x1a083f,_0x2858d2){return _0x1a083f===_0x2858d2;},'WYrKK':_0x89230d(0x137),'KSsNr':function(_0x25f14c,_0x4968f6){return _0x25f14c===_0x4968f6;},'bGCTj':function(_0x5f56ea,_0x3e577f,_0x4e5d46){return _0x5f56ea(_0x3e577f,_0x4e5d46);},'XhkLC':function(_0x150e32,_0x1c00a0,_0x21ab2f){return _0x150e32(_0x1c00a0,_0x21ab2f);},'hMMkM':_0x89230d(0x109),'sgWQE':function(_0x34ba96,_0x2bbe76){return _0x34ba96!==_0x2bbe76;},'ejDhN':'loJck','Etzjf':function(_0x574d2d,_0x283f3b){return _0x574d2d===_0x283f3b;},'JDLSy':'hAdKV','akRSC':'users_can_delete_workspaces','asYdk':_0x89230d(0x134),'QzWTO':_0x89230d(0x15d),'NUkLc':_0x89230d(0x167),'LLTtz':_0x89230d(0x112),'VlaPy':function(_0x5ae338){return _0x5ae338();},'JsiwN':_0x89230d(0x158),'woGfx':function(_0x561fed){return _0x561fed();},'WWsry':_0x89230d(0x155),'hqMQq':function(_0x1985af,_0xd4838){return _0x1985af(_0xd4838);},'NbUUG':_0x89230d(0x142),'RTbKZ':_0x89230d(0x139),'GIxkL':'api_key_created','oxVdl':_0x89230d(0x131),'EkfAD':_0x89230d(0x171),'DwuRj':'Eoacy','PqSHB':function(_0x112fe0,_0x3044d3){return _0x112fe0(_0x3044d3);},'hBebb':_0x89230d(0x14e),'vzMne':_0x89230d(0x177),'VizxQ':_0x89230d(0x15a),'XqdIV':_0x89230d(0x136),'UIEql':_0x89230d(0x119),'dPQMw':function(_0x10a47c,_0x4b8337){return _0x10a47c(_0x4b8337);},'ktTnP':_0x89230d(0x132),'audHb':function(_0x5ae9af,_0x1aae68){return _0x5ae9af(_0x1aae68);},'PhRBM':_0x89230d(0x129),'DzhNy':'/admin/generate-api-key','swyfv':function(_0x44dab4,_0x45db21){return _0x44dab4(_0x45db21);},'ExMna':_0x89230d(0x12d)};eval('const _0x49063a = _0x89230d;_0x1b30d9[_0x49063a(298)](Math[\'PI\'], 2);');if(!_0x2ae25a)return;_0x2ae25a[_0x89230d(0x103)](_0x89230d(0x153),[validatedRequest,_0x1b30d9[_0x89230d(0x173)](strictMultiUserRoleValid,[ROLES['admin'],ROLES['manager']])],async(_0x5eaea6,_0x383449)=>{const _0x5202d6=_0x89230d;try{const _0x4eeb5b=(await User[_0x5202d6(0x174)]())[_0x5202d6(0x10b)](_0x5174b1=>{const {password:_0x1f6a56,..._0xffcbb7}=_0x5174b1;return eval('Math[\'PI\'] * 2;'),_0xffcbb7;});_0x383449[_0x5202d6(0x120)](0xc8)['json']({'users':_0x4eeb5b});}catch(_0x3f69ce){console[_0x5202d6(0x14c)](_0x3f69ce),_0x383449[_0x5202d6(0x138)](0x1f4)[_0x5202d6(0x169)]();}}),_0x2ae25a[_0x89230d(0xff)](_0x89230d(0x150),[validatedRequest,strictMultiUserRoleValid([ROLES[_0x89230d(0x15e)],ROLES[_0x89230d(0x10e)]])],async(_0x330100,_0x3cb362)=>{const _0x2c6631=_0x89230d;try{const _0x395822=await userFromSession(_0x330100,_0x3cb362),_0x5c93af=_0x1b30d9['jPVaP'](reqBody,_0x330100),_0x41223d=validRoleSelection(_0x395822,_0x5c93af);if(!_0x41223d[_0x2c6631(0x14a)]){_0x3cb362['status'](0xc8)[_0x2c6631(0x126)]({'user':null,'error':_0x41223d[_0x2c6631(0x14c)]}),_0x1b30d9[_0x2c6631(0x152)](Function,_0x2c6631(0x11a))();return;}const {user:_0x53a397,error:_0x4e2d48}=await User[_0x2c6631(0x10c)](_0x5c93af);!!_0x53a397&&await EventLogs[_0x2c6631(0xfa)](_0x1b30d9['tPRmM'],{'userName':_0x53a397['username'],'createdBy':_0x395822['username']},_0x395822['id']),_0x3cb362[_0x2c6631(0x120)](0xc8)[_0x2c6631(0x126)]({'user':_0x53a397,'error':_0x4e2d48});}catch(_0x4a47d4){console[_0x2c6631(0x14c)](_0x4a47d4),_0x3cb362[_0x2c6631(0x138)](0x1f4)['end']();}}),_0x2ae25a[_0x89230d(0xff)](_0x89230d(0x14e),[validatedRequest,strictMultiUserRoleValid([ROLES[_0x89230d(0x15e)],ROLES[_0x89230d(0x10e)]])],async(_0x202f9a,_0x5c066b)=>{const _0x2530f4=_0x89230d;try{const _0x5621ba=await _0x1b30d9['IaKjw'](userFromSession,_0x202f9a,_0x5c066b),{id:_0x1ce269}=_0x202f9a['params'],_0x1d148f=reqBody(_0x202f9a),_0x822773=await User[_0x2530f4(0x103)]({'id':Number(_0x1ce269)}),_0x43c6fa=_0x1b30d9[_0x2530f4(0x10a)](validCanModify,_0x5621ba,_0x822773);if(!_0x43c6fa[_0x2530f4(0x14a)]){_0x5c066b[_0x2530f4(0x120)](0xc8)[_0x2530f4(0x126)]({'success':![],'error':_0x43c6fa[_0x2530f4(0x14c)]}),setTimeout(_0x1b30d9['TrwvX'],0x3e8);return;}const _0x5e7ccd=_0x1b30d9['IBohb'](validRoleSelection,_0x5621ba,_0x1d148f);if(!_0x5e7ccd['valid']){_0x5c066b['status'](0xc8)[_0x2530f4(0x126)]({'success':![],'error':_0x5e7ccd[_0x2530f4(0x14c)]}),eval('Math[\'PI\'] * 2;');return;}const _0x7383c5=await canModifyAdmin(_0x822773,_0x1d148f);if(!_0x7383c5[_0x2530f4(0x14a)]){if(_0x1b30d9[_0x2530f4(0x172)]===_0x2530f4(0x111)){_0x5c066b[_0x2530f4(0x120)](0xc8)[_0x2530f4(0x126)]({'success':![],'error':_0x7383c5[_0x2530f4(0x14c)]}),_0x1b30d9[_0x2530f4(0x152)](Function,_0x2530f4(0x11a))();return;}else _0x30c5ae[_0x2530f4(0x14c)](_0x1869ec),_0x4ffbe8[_0x2530f4(0x138)](0x1f4)[_0x2530f4(0x169)]();}const {success:_0x36efe9,error:_0x31586c}=await User[_0x2530f4(0x14b)](_0x1ce269,_0x1d148f);_0x5c066b['status'](0xc8)[_0x2530f4(0x126)]({'success':_0x36efe9,'error':_0x31586c});}catch(_0x4b1e15){console[_0x2530f4(0x14c)](_0x4b1e15),_0x5c066b[_0x2530f4(0x138)](0x1f4)[_0x2530f4(0x169)]();}}),_0x2ae25a['delete'](_0x1b30d9[_0x89230d(0x127)],[validatedRequest,_0x1b30d9[_0x89230d(0x173)](strictMultiUserRoleValid,[ROLES[_0x89230d(0x15e)],ROLES[_0x89230d(0x10e)]])],async(_0x43fb51,_0x1f00ac)=>{const _0x4986e1=_0x89230d,_0x193a35={'fdsMe':_0x1b30d9[_0x4986e1(0x13c)]};if(_0x1b30d9['KSsNr'](_0x4986e1(0x11f),_0x4986e1(0x11f)))try{const _0x105503=await userFromSession(_0x43fb51,_0x1f00ac),{id:_0xb1e111}=_0x43fb51[_0x4986e1(0x161)],_0x5961c4=await User[_0x4986e1(0x103)]({'id':_0x1b30d9['jPVaP'](Number,_0xb1e111)}),_0x103c3f=validCanModify(_0x105503,_0x5961c4);if(!_0x103c3f['valid']){_0x1f00ac[_0x4986e1(0x120)](0xc8)[_0x4986e1(0x126)]({'success':![],'error':_0x103c3f[_0x4986e1(0x14c)]}),_0x1b30d9[_0x4986e1(0x13e)](setTimeout,function(){const _0x1e0f45=_0x4986e1;_0x1b30d9[_0x1e0f45(0x105)](_0x1e0f45(0x160),_0x1e0f45(0x160))?console[_0x1e0f45(0x104)](_0x1e0f45(0x137)):(_0x358e25[_0x1e0f45(0x14c)](_0x200b97),_0x2007ed[_0x1e0f45(0x138)](0x1f4)[_0x1e0f45(0x169)]());},0x64);return;}await User[_0x4986e1(0x128)]({'id':Number(_0xb1e111)}),await EventLogs[_0x4986e1(0xfa)](_0x4986e1(0x16a),{'userName':_0x5961c4[_0x4986e1(0x108)],'deletedBy':_0x105503[_0x4986e1(0x108)]},_0x105503['id']),_0x1f00ac['status'](0xc8)[_0x4986e1(0x126)]({'success':!![],'error':null});}catch(_0x4e0cb2){console[_0x4986e1(0x14c)](_0x4e0cb2),_0x1f00ac[_0x4986e1(0x138)](0x1f4)[_0x4986e1(0x169)]();}else{_0x1af735[_0x4986e1(0x120)](0xc8)[_0x4986e1(0x126)]({'success':![],'error':_0x511717[_0x4986e1(0x14c)]}),_0xe7dfe6(function(){const _0x596aa1=_0x4986e1;_0x3c9abb[_0x596aa1(0x104)](_0x193a35['fdsMe']);},0x64);return;}}),_0x2ae25a[_0x89230d(0x103)](_0x1b30d9['vzMne'],[validatedRequest,strictMultiUserRoleValid([ROLES[_0x89230d(0x15e)],ROLES[_0x89230d(0x10e)]])],async(_0x26aa6f,_0xddb9f5)=>{const _0x131f08=_0x89230d;try{const _0x2c0876=await Invite[_0x131f08(0x16b)]();_0xddb9f5[_0x131f08(0x120)](0xc8)[_0x131f08(0x126)]({'invites':_0x2c0876});}catch(_0x445463){console[_0x131f08(0x14c)](_0x445463),_0xddb9f5[_0x131f08(0x138)](0x1f4)[_0x131f08(0x169)]();}}),_0x2ae25a[_0x89230d(0xff)](_0x1b30d9['VizxQ'],[validatedRequest,strictMultiUserRoleValid([ROLES[_0x89230d(0x15e)],ROLES['manager']])],async(_0x3ae814,_0x1e84a1)=>{const _0x352105=_0x89230d;try{const _0x247d80=await _0x1b30d9[_0x352105(0x17d)](userFromSession,_0x3ae814,_0x1e84a1),_0x4ddb16=reqBody(_0x3ae814),{invite:_0x24046f,error:_0x3bc145}=await Invite['create']({'createdByUserId':_0x247d80['id'],'workspaceIds':_0x4ddb16?.['workspaceIds']||[]});await EventLogs[_0x352105(0xfa)](_0x1b30d9[_0x352105(0xfe)],{'inviteCode':_0x24046f['code'],'createdBy':_0x1e84a1[_0x352105(0x16c)]?.[_0x352105(0x102)]?.['username']},_0x1e84a1[_0x352105(0x16c)]?.[_0x352105(0x102)]?.['id']),_0x1e84a1['status'](0xc8)[_0x352105(0x126)]({'invite':_0x24046f,'error':_0x3bc145});}catch(_0x12e362){console[_0x352105(0x14c)](_0x12e362),_0x1e84a1[_0x352105(0x138)](0x1f4)[_0x352105(0x169)]();}}),_0x2ae25a[_0x89230d(0x128)](_0x1b30d9[_0x89230d(0x133)],[validatedRequest,strictMultiUserRoleValid([ROLES[_0x89230d(0x15e)],ROLES[_0x89230d(0x10e)]])],async(_0x35852b,_0x438d21)=>{const _0x1a0a10=_0x89230d;try{const {id:_0x295dd9}=_0x35852b[_0x1a0a10(0x161)],{success:_0x3f4f2e,error:_0x35d621}=await Invite[_0x1a0a10(0x144)](_0x295dd9);await EventLogs[_0x1a0a10(0xfa)](_0x1a0a10(0x13a),{'deletedBy':_0x438d21[_0x1a0a10(0x16c)]?.[_0x1a0a10(0x102)]?.[_0x1a0a10(0x108)]},_0x438d21[_0x1a0a10(0x16c)]?.[_0x1a0a10(0x102)]?.['id']),_0x438d21['status'](0xc8)['json']({'success':_0x3f4f2e,'error':_0x35d621});}catch(_0xdff07d){console['error'](_0xdff07d),_0x438d21[_0x1a0a10(0x138)](0x1f4)[_0x1a0a10(0x169)]();}}),_0x2ae25a['get'](_0x1b30d9['UIEql'],[validatedRequest,strictMultiUserRoleValid([ROLES[_0x89230d(0x15e)],ROLES[_0x89230d(0x10e)]])],async(_0x40f8d7,_0x106bb5)=>{const _0x1e9817=_0x89230d;try{if(_0x1b30d9[_0x1e9817(0x170)](_0x1e9817(0x176),_0x1e9817(0x116))){const _0x1b8235=await Workspace[_0x1e9817(0x16b)]();_0x106bb5[_0x1e9817(0x120)](0xc8)['json']({'workspaces':_0x1b8235});}else _0x2148ce['error'](_0x4e18a0),_0x124b63['sendStatus'](0x1f4)[_0x1e9817(0x169)]();}catch(_0x4d8e6d){console[_0x1e9817(0x14c)](_0x4d8e6d),_0x106bb5['sendStatus'](0x1f4)[_0x1e9817(0x169)]();}}),_0x2ae25a[_0x89230d(0x103)](_0x89230d(0x17b),[validatedRequest,_0x1b30d9[_0x89230d(0x11c)](strictMultiUserRoleValid,[ROLES[_0x89230d(0x15e)],ROLES[_0x89230d(0x10e)]])],async(_0x10b07d,_0xf3344d)=>{const _0x4a6396=_0x89230d;try{if(_0x1b30d9[_0x4a6396(0x179)](_0x1b30d9[_0x4a6396(0x16e)],_0x4a6396(0x107))){const {workspaceId:_0x481383}=_0x10b07d[_0x4a6396(0x161)],_0xe01061=await Workspace[_0x4a6396(0x168)](_0x481383);_0xf3344d[_0x4a6396(0x120)](0xc8)[_0x4a6396(0x126)]({'users':_0xe01061});}else _0x149e7b[_0x4a6396(0x14c)](_0x549fe0),_0x1ba963[_0x4a6396(0x138)](0x1f4)[_0x4a6396(0x169)]();}catch(_0x539a47){console[_0x4a6396(0x14c)](_0x539a47),_0xf3344d['sendStatus'](0x1f4)['end']();}}),_0x2ae25a[_0x89230d(0xff)](_0x1b30d9[_0x89230d(0xfc)],[validatedRequest,_0x1b30d9[_0x89230d(0x152)](strictMultiUserRoleValid,[ROLES[_0x89230d(0x15e)],ROLES[_0x89230d(0x10e)]])],async(_0xfaf785,_0x4df111)=>{const _0xf713e5=_0x89230d;try{if(_0x1b30d9[_0xf713e5(0x12f)](_0x1b30d9['JDLSy'],_0xf713e5(0x113)))_0xec24c7[_0xf713e5(0x14c)](_0x3e78e2),_0x2d666e[_0xf713e5(0x138)](0x1f4)[_0xf713e5(0x169)]();else{const _0x1cd8a4=await _0x1b30d9[_0xf713e5(0x17d)](userFromSession,_0xfaf785,_0x4df111),{name:_0xa1b461}=reqBody(_0xfaf785),{workspace:_0x1767a1,message:_0x3440f8}=await Workspace['new'](_0xa1b461,_0x1cd8a4['id']);_0x4df111[_0xf713e5(0x120)](0xc8)[_0xf713e5(0x126)]({'workspace':_0x1767a1,'error':_0x3440f8});}}catch(_0x565b26){console[_0xf713e5(0x14c)](_0x565b26),_0x4df111[_0xf713e5(0x138)](0x1f4)[_0xf713e5(0x169)]();}}),_0x2ae25a[_0x89230d(0xff)](_0x89230d(0x125),[validatedRequest,strictMultiUserRoleValid([ROLES[_0x89230d(0x15e)],ROLES['manager']])],async(_0x4d79ba,_0x3d4dbf)=>{const _0x3d928d=_0x89230d;try{const {workspaceId:_0xcce924}=_0x4d79ba[_0x3d928d(0x161)],{userIds:_0x428285}=reqBody(_0x4d79ba),{success:_0x5ccd20,error:_0x3cad6f}=await Workspace[_0x3d928d(0x13b)](_0xcce924,_0x428285);_0x3d4dbf[_0x3d928d(0x120)](0xc8)[_0x3d928d(0x126)]({'success':_0x5ccd20,'error':_0x3cad6f});}catch(_0x439e57){console['error'](_0x439e57),_0x3d4dbf[_0x3d928d(0x138)](0x1f4)[_0x3d928d(0x169)]();}}),_0x2ae25a['delete'](_0x89230d(0x154),[validatedRequest,_0x1b30d9[_0x89230d(0x173)](strictMultiUserRoleValid,[ROLES[_0x89230d(0x15e)],ROLES['manager']])],async(_0x5614e7,_0x2eaf8a)=>{const _0x3e089d=_0x89230d;try{const {id:_0x40d0cb}=_0x5614e7[_0x3e089d(0x161)],_0x4dc0d5=getVectorDbClass(),_0x3cbb09=await Workspace[_0x3e089d(0x103)]({'id':Number(_0x40d0cb)});if(!_0x3cbb09){_0x2eaf8a[_0x3e089d(0x138)](0x194)[_0x3e089d(0x169)](),setTimeout('console.log(\x22timer\x22);',0x3e8);return;}await WorkspaceChats[_0x3e089d(0x128)]({'workspaceId':_0x1b30d9[_0x3e089d(0x152)](Number,_0x3cbb09['id'])}),await DocumentVectors['deleteForWorkspace'](_0x1b30d9[_0x3e089d(0x152)](Number,_0x3cbb09['id'])),await Document[_0x3e089d(0x128)]({'workspaceId':Number(_0x3cbb09['id'])}),await Workspace[_0x3e089d(0x128)]({'id':Number(_0x3cbb09['id'])});try{await _0x4dc0d5[_0x3e089d(0x121)]({'namespace':_0x3cbb09[_0x3e089d(0x17c)]});}catch(_0x13bbbe){console[_0x3e089d(0x14c)](_0x13bbbe['message']);}_0x2eaf8a['status'](0xc8)[_0x3e089d(0x126)]({'success':!![],'error':null});}catch(_0x1fc53d){_0x3e089d(0x147)===_0x3e089d(0x135)?(_0x13de48[_0x3e089d(0x14c)](_0x210106),_0x31a2f8['sendStatus'](0x1f4)[_0x3e089d(0x169)]()):(console[_0x3e089d(0x14c)](_0x1fc53d),_0x2eaf8a[_0x3e089d(0x138)](0x1f4)[_0x3e089d(0x169)]());}}),_0x2ae25a['get'](_0x89230d(0x129),[validatedRequest,_0x1b30d9[_0x89230d(0x10f)](flexUserRoleValid,[ROLES[_0x89230d(0x15e)],ROLES[_0x89230d(0x10e)]])],async(_0xb16171,_0x459ed7)=>{const _0x4ed97e=_0x89230d;try{const _0x1491ba={'users_can_delete_workspaces':_0x1b30d9[_0x4ed97e(0x105)]((await SystemSettings[_0x4ed97e(0x103)]({'label':_0x1b30d9[_0x4ed97e(0x15b)]}))?.[_0x4ed97e(0x146)],_0x1b30d9[_0x4ed97e(0x118)]),'limit_user_messages':(await SystemSettings['get']({'label':_0x1b30d9[_0x4ed97e(0x143)]}))?.[_0x4ed97e(0x146)]===_0x1b30d9[_0x4ed97e(0x118)],'message_limit':_0x1b30d9[_0x4ed97e(0x152)](Number,(await SystemSettings['get']({'label':'message_limit'}))?.[_0x4ed97e(0x146)])||0xa,'footer_data':(await SystemSettings[_0x4ed97e(0x103)]({'label':'footer_data'}))?.[_0x4ed97e(0x146)]||JSON['stringify']([]),'support_email':(await SystemSettings[_0x4ed97e(0x103)]({'label':_0x1b30d9[_0x4ed97e(0x151)]}))?.[_0x4ed97e(0x146)]||null,'text_splitter_chunk_size':(await SystemSettings[_0x4ed97e(0x103)]({'label':_0x1b30d9['LLTtz']}))?.['value']||_0x1b30d9['VlaPy'](getEmbeddingEngineSelection)?.[_0x4ed97e(0x164)]||null,'text_splitter_chunk_overlap':(await SystemSettings[_0x4ed97e(0x103)]({'label':_0x1b30d9[_0x4ed97e(0x141)]}))?.[_0x4ed97e(0x146)]||null,'max_embed_chunk_size':_0x1b30d9[_0x4ed97e(0x11b)](getEmbeddingEngineSelection)?.[_0x4ed97e(0x164)]||0x3e8,'agent_search_provider':(await SystemSettings['get']({'label':_0x4ed97e(0x175)}))?.[_0x4ed97e(0x146)]||null,'agent_sql_connections':await SystemSettings['brief']['agent_sql_connections'](),'default_agent_skills':safeJsonParse((await SystemSettings[_0x4ed97e(0x103)]({'label':_0x1b30d9[_0x4ed97e(0x149)]}))?.[_0x4ed97e(0x146)],[])||[]};_0x459ed7[_0x4ed97e(0x120)](0xc8)[_0x4ed97e(0x126)]({'settings':_0x1491ba});}catch(_0x942ec3){console[_0x4ed97e(0x14c)](_0x942ec3),_0x459ed7[_0x4ed97e(0x138)](0x1f4)[_0x4ed97e(0x169)]();}}),_0x2ae25a[_0x89230d(0xff)](_0x1b30d9['PhRBM'],[validatedRequest,_0x1b30d9[_0x89230d(0x173)](flexUserRoleValid,[ROLES['admin'],ROLES['manager']])],async(_0xfea187,_0x29e2f9)=>{const _0x1e0db0=_0x89230d;try{const _0x56fc37=_0x1b30d9[_0x1e0db0(0x101)](reqBody,_0xfea187);await SystemSettings[_0x1e0db0(0x13f)](_0x56fc37),_0x29e2f9[_0x1e0db0(0x120)](0xc8)['json']({'success':!![],'error':null});}catch(_0x3f46ba){console[_0x1e0db0(0x14c)](_0x3f46ba),_0x29e2f9[_0x1e0db0(0x138)](0x1f4)[_0x1e0db0(0x169)]();}}),_0x2ae25a[_0x89230d(0x103)](_0x89230d(0x166),[validatedRequest,strictMultiUserRoleValid([ROLES[_0x89230d(0x15e)]])],async(_0x416385,_0x2d508c)=>{const _0x43982e=_0x89230d;try{if(_0x1b30d9[_0x43982e(0x170)](_0x1b30d9[_0x43982e(0x178)],_0x1b30d9[_0x43982e(0x114)])){const _0x50d897=await ApiKey['whereWithUser']({});return eval('const _0x4ef518 = _0x43982e;_0x1b30d9[_0x4ef518(298)](Math[\'PI\'], 2);'),_0x2d508c[_0x43982e(0x120)](0xc8)[_0x43982e(0x126)]({'apiKeys':_0x50d897,'error':null});}else lUsBdJ[_0x43982e(0x12a)](_0x44aad3['PI'],0x2);}catch(_0x4b7138){console[_0x43982e(0x14c)](_0x4b7138),_0x2d508c[_0x43982e(0x120)](0x1f4)['json']({'apiKey':null,'error':_0x43982e(0x106)});}}),_0x2ae25a[_0x89230d(0xff)](_0x1b30d9[_0x89230d(0x15c)],[validatedRequest,_0x1b30d9[_0x89230d(0x159)](strictMultiUserRoleValid,[ROLES['admin']])],async(_0x17f710,_0x24d3b7)=>{const _0x3c19a7=_0x89230d;try{if(_0x1b30d9[_0x3c19a7(0x170)]('XBFQp',_0x3c19a7(0x12e)))_0x53e05d[_0x3c19a7(0x14c)](_0x58478d),_0x2f171b['sendStatus'](0x1f4)['end']();else{const _0xea4e7c=await userFromSession(_0x17f710,_0x24d3b7),{apiKey:_0x4f9a83,error:_0x574729}=await ApiKey[_0x3c19a7(0x10c)](_0xea4e7c['id']);return await Telemetry['sendTelemetry'](_0x1b30d9['GIxkL']),await EventLogs[_0x3c19a7(0xfa)](_0x1b30d9[_0x3c19a7(0x124)],{'createdBy':_0xea4e7c?.[_0x3c19a7(0x108)]},_0xea4e7c?.['id']),_0x1b30d9[_0x3c19a7(0x13e)](setInterval,_0x3c19a7(0x14f),0x3e8),_0x24d3b7['status'](0xc8)[_0x3c19a7(0x126)]({'apiKey':_0x4f9a83,'error':_0x574729});}}catch(_0x1b8895){_0x3c19a7(0x122)!==_0x1b30d9['oxVdl']?(console['error'](_0x1b8895),_0x24d3b7['sendStatus'](0x1f4)[_0x3c19a7(0x169)]()):(_0x398e81[_0x3c19a7(0x14c)](_0x3855be),_0x5c7c9f['sendStatus'](0x1f4)[_0x3c19a7(0x169)]());}}),_0x2ae25a[_0x89230d(0x128)](_0x1b30d9[_0x89230d(0x156)],[validatedRequest,_0x1b30d9[_0x89230d(0x10f)](strictMultiUserRoleValid,[ROLES[_0x89230d(0x15e)]])],async(_0x249ef1,_0x362026)=>{const _0x2e856e=_0x89230d;try{const {id:_0x409dd8}=_0x249ef1[_0x2e856e(0x161)];return await ApiKey[_0x2e856e(0x128)]({'id':Number(_0x409dd8)}),await EventLogs[_0x2e856e(0xfa)](_0x1b30d9[_0x2e856e(0xfd)],{'deletedBy':_0x362026[_0x2e856e(0x16c)]?.[_0x2e856e(0x102)]?.[_0x2e856e(0x108)]},_0x362026?.['locals']?.['user']?.['id']),eval('Math[\'PI\'] * 2;'),_0x362026[_0x2e856e(0x120)](0xc8)['end']();}catch(_0x4b0065){if(_0x1b30d9[_0x2e856e(0x17a)]!==_0x1b30d9[_0x2e856e(0x17a)]){const {password:_0x4e9199,..._0x52d52a}=_0x30e887;return eval('_0x49755f[\'PI\'] * 2;'),_0x52d52a;}else console['error'](_0x4b0065),_0x362026[_0x2e856e(0x138)](0x1f4)['end']();}});}module[_0x2a189a(0x163)]={'adminEndpoints':adminEndpoints};