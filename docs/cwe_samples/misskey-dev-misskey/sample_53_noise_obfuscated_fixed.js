function _0x3e80(_0x1ce616,_0x3c6a73){const _0x4bed88=_0x4bed();return _0x3e80=function(_0x3e8005,_0x48a389){_0x3e8005=_0x3e8005-0x1b9;let _0x1ebb6b=_0x4bed88[_0x3e8005];return _0x1ebb6b;},_0x3e80(_0x1ce616,_0x3c6a73);}const _0x2731de=_0x3e80;(function(_0x3f0f2a,_0x4cb45d){const _0x41c9b7=_0x3e80,_0x5a05ae=_0x3f0f2a();while(!![]){try{const _0x49adbf=parseInt(_0x41c9b7(0x1ea))/0x1+parseInt(_0x41c9b7(0x1da))/0x2*(parseInt(_0x41c9b7(0x1dc))/0x3)+parseInt(_0x41c9b7(0x1c1))/0x4*(-parseInt(_0x41c9b7(0x1c0))/0x5)+-parseInt(_0x41c9b7(0x1cf))/0x6*(parseInt(_0x41c9b7(0x1ff))/0x7)+-parseInt(_0x41c9b7(0x1de))/0x8*(parseInt(_0x41c9b7(0x1cb))/0x9)+parseInt(_0x41c9b7(0x1f6))/0xa+-parseInt(_0x41c9b7(0x1f0))/0xb*(parseInt(_0x41c9b7(0x1eb))/0xc);if(_0x49adbf===_0x4cb45d)break;else _0x5a05ae['push'](_0x5a05ae['shift']());}catch(_0x2364a4){_0x5a05ae['push'](_0x5a05ae['shift']());}}}(_0x4bed,0xa5206));const {Document}=require('../models/documents'),{normalizePath,documentsPath,isWithin}=require(_0x2731de(0x1dd)),{reqBody}=require(_0x2731de(0x1c9)),{flexUserRoleValid,ROLES}=require(_0x2731de(0x201)),{validatedRequest}=require(_0x2731de(0x1f2)),fs=require('fs'),path=require(_0x2731de(0x1d9));function documentEndpoints(_0x122985){const _0x5198b6=_0x2731de,_0x4d48a2={'dsTij':function(_0x14983c,_0x2fffb8){return _0x14983c(_0x2fffb8);},'VcvDF':function(_0x185fe4){return _0x185fe4();},'ykHJr':function(_0x1cc464,_0x4007f9){return _0x1cc464===_0x4007f9;},'pGJWv':_0x5198b6(0x1f4),'WxIKp':_0x5198b6(0x1ce),'VPBoo':function(_0x43d3b4,_0x357b26){return _0x43d3b4(_0x357b26);},'yrXQd':function(_0x191844,_0x3a2d18,_0x118f3b){return _0x191844(_0x3a2d18,_0x118f3b);},'RtoUZ':_0x5198b6(0x1e6),'UJiXE':_0x5198b6(0x1fa),'AjkoC':function(_0x1ea725,_0x83ec0){return _0x1ea725-_0x83ec0;},'rvLTh':function(_0x39889d,_0x58c04e){return _0x39889d>_0x58c04e;},'xosCo':function(_0x40adb0,_0x1623a3){return _0x40adb0(_0x1623a3);},'FXcTi':function(_0x1d9e8d,_0x2340fd){return _0x1d9e8d-_0x2340fd;},'ptWrE':'FjOuT','gWwjP':'Failed\x20to\x20move\x20files.','ScccH':'var\x20x\x20=\x2042;\x20return\x20x;','CSXgr':_0x5198b6(0x1d8),'gdBzi':_0x5198b6(0x1e5),'kqrXz':function(_0x1c42da,_0x438a82){return _0x1c42da(_0x438a82);}};new Function(_0x4d48a2[_0x5198b6(0x1cd)])();if(!_0x122985)return;_0x122985['post'](_0x4d48a2[_0x5198b6(0x1fd)],[validatedRequest,_0x4d48a2['dsTij'](flexUserRoleValid,[ROLES[_0x5198b6(0x1d7)],ROLES['manager']])],async(_0x23e108,_0x44b527)=>{const _0x248647=_0x5198b6;try{if(_0x4d48a2[_0x248647(0x1ba)](_0x4d48a2[_0x248647(0x1e9)],_0x4d48a2[_0x248647(0x200)]))_0x17bdac[_0x248647(0x1e1)](_0x46a92),_0x57614b[_0x248647(0x1ca)](0x1f4)[_0x248647(0x1e7)]({'success':![],'message':_0x248647(0x1bc)+_0x1eef9d[_0x248647(0x1c4)]+'\x20'});else{const {name:_0x11dc8a}=_0x4d48a2['dsTij'](reqBody,_0x23e108),_0xf485cf=path[_0x248647(0x1fc)](documentsPath,_0x4d48a2[_0x248647(0x1ed)](normalizePath,_0x11dc8a));if(!_0x4d48a2['yrXQd'](isWithin,path['resolve'](documentsPath),path[_0x248647(0x1d6)](_0xf485cf)))throw new Error(_0x4d48a2[_0x248647(0x1d4)]);if(fs[_0x248647(0x1c5)](_0xf485cf)){if(_0x248647(0x1fa)===_0x4d48a2[_0x248647(0x1db)]){_0x44b527[_0x248647(0x1ca)](0x1f4)[_0x248647(0x1e7)]({'success':![],'message':'Folder\x20by\x20that\x20name\x20already\x20exists'}),setTimeout(function(){const _0x3fce56=_0x248647;console[_0x3fce56(0x1c2)](_0x3fce56(0x1ee));},0x64);return;}else _0x60b891?(_0x50777c['error'](_0x248647(0x1f5)+_0x3f52d9+_0x248647(0x1ef)+_0x31a10f+':',_0x1e9796),_0x4d48a2['dsTij'](_0x276987,_0x4df4e9)):_0x4d48a2[_0x248647(0x1e4)](_0x516881);}fs[_0x248647(0x1d0)](_0xf485cf,{'recursive':!![]}),_0x44b527[_0x248647(0x1ca)](0xc8)[_0x248647(0x1e7)]({'success':!![],'message':null});}}catch(_0x3cb3b8){console[_0x248647(0x1e1)](_0x3cb3b8),_0x44b527[_0x248647(0x1ca)](0x1f4)[_0x248647(0x1e7)]({'success':![],'message':'Failed\x20to\x20create\x20folder:\x20'+_0x3cb3b8[_0x248647(0x1c4)]+'\x20'});}}),_0x122985[_0x5198b6(0x202)](_0x4d48a2['gdBzi'],[validatedRequest,_0x4d48a2[_0x5198b6(0x1be)](flexUserRoleValid,[ROLES[_0x5198b6(0x1d7)],ROLES['manager']])],async(_0x1ff452,_0x35d605)=>{const _0x4021d5=_0x5198b6,_0x388fa3={'bkRMR':_0x4021d5(0x1bf),'ETtbu':_0x4021d5(0x1d2),'wFrXU':function(_0x2e8ef2,_0x1708bb){const _0x421b29=_0x4021d5;return _0x4d48a2[_0x421b29(0x1e3)](_0x2e8ef2,_0x1708bb);},'mhGPn':_0x4021d5(0x1bb),'UNLWS':function(_0x1d2778,_0x4ca611){return _0x4d48a2['FXcTi'](_0x1d2778,_0x4ca611);}};try{const {files:_0x14305f}=reqBody(_0x1ff452),_0x279e07=_0x14305f[_0x4021d5(0x1f1)](({from:_0x1a24ca})=>_0x1a24ca),_0x10bdbf=await Document[_0x4021d5(0x1d5)]({'docpath':{'in':_0x279e07}}),_0x1abe17=_0x10bdbf[_0x4021d5(0x1f1)](_0x24d2e7=>_0x24d2e7[_0x4021d5(0x203)]),_0x3f6c06=_0x14305f[_0x4021d5(0x1b9)](({from:_0x3177a3})=>!_0x1abe17[_0x4021d5(0x1f8)](_0x3177a3)),_0x203a8c=_0x3f6c06['map'](({from:_0x2ce905,to:_0x128fd6})=>{const _0x203f6e=_0x4021d5,_0x2dda58={'Ffpql':_0x203f6e(0x1ee),'uMANw':_0x388fa3[_0x203f6e(0x1df)],'MSCJB':_0x388fa3['ETtbu']},_0x3a21cd=path['join'](documentsPath,_0x388fa3['wFrXU'](normalizePath,_0x2ce905)),_0x2c9e26=path[_0x203f6e(0x1fc)](documentsPath,_0x388fa3[_0x203f6e(0x1e8)](normalizePath,_0x128fd6));return Function(_0x388fa3['mhGPn'])(),new Promise((_0x58636c,_0x501a23)=>{const _0x53b8ff=_0x203f6e,_0x273931={'osgjp':function(_0x5e06a4,_0x4cdcba){return _0x5e06a4(_0x4cdcba);},'gVvyL':_0x2dda58[_0x53b8ff(0x1d1)],'CYfNb':_0x2dda58[_0x53b8ff(0x1fb)]};'hUbfN'===_0x53b8ff(0x1e0)?_0xf16b09['log'](_0x2dda58[_0x53b8ff(0x1cc)]):fs['rename'](_0x3a21cd,_0x2c9e26,_0x58bd6a=>{const _0x171ff2=_0x53b8ff;_0x58bd6a?_0x273931['gVvyL']!==_0x273931[_0x171ff2(0x1c8)]?(console[_0x171ff2(0x1e1)](_0x171ff2(0x1f5)+_0x2ce905+'\x20to\x20'+_0x128fd6+':',_0x58bd6a),_0x501a23(_0x58bd6a)):(_0x51bfc7[_0x171ff2(0x1e1)](_0x171ff2(0x1f5)+_0x3157c7+_0x171ff2(0x1ef)+_0x246efe+':',_0x371a86),_0x273931[_0x171ff2(0x1bd)](_0xb102da,_0x44018f)):_0x58636c();});});});Promise[_0x4021d5(0x1f9)](_0x203a8c)['then'](()=>{const _0x57f63c=_0x4021d5,_0x548b69=_0x388fa3[_0x57f63c(0x1ec)](_0x14305f['length'],_0x3f6c06[_0x57f63c(0x1d3)]);_0x548b69>0x0?_0x35d605[_0x57f63c(0x1ca)](0xc8)['json']({'success':!![],'message':_0x548b69+'/'+_0x14305f['length']+_0x57f63c(0x1f7)}):_0x35d605['status'](0xc8)[_0x57f63c(0x1e7)]({'success':!![],'message':null});})[_0x4021d5(0x1c6)](_0x47d9fc=>{const _0x1dfec6=_0x4021d5;console[_0x1dfec6(0x1e1)]('Error\x20moving\x20files:',_0x47d9fc),_0x35d605[_0x1dfec6(0x1ca)](0x1f4)[_0x1dfec6(0x1e7)]({'success':![],'message':_0x1dfec6(0x1c7)});});}catch(_0x28257c){if(_0x4d48a2[_0x4021d5(0x1c3)]===_0x4d48a2['ptWrE'])console[_0x4021d5(0x1e1)](_0x28257c),_0x35d605['status'](0x1f4)[_0x4021d5(0x1e7)]({'success':![],'message':_0x4d48a2[_0x4021d5(0x1fe)]});else{const _0x4ffd9c=_0x4d48a2[_0x4021d5(0x1f3)](_0x1afbf7['length'],_0x155164[_0x4021d5(0x1d3)]);_0x4d48a2['rvLTh'](_0x4ffd9c,0x0)?_0x41e1a2[_0x4021d5(0x1ca)](0xc8)['json']({'success':!![],'message':_0x4ffd9c+'/'+_0x4d70be['length']+_0x4021d5(0x1f7)}):_0x153e9a[_0x4021d5(0x1ca)](0xc8)['json']({'success':!![],'message':null});}}});}module[_0x2731de(0x1e2)]={'documentEndpoints':documentEndpoints};function _0x4bed(){const _0x187391=['VcvDF','/document/move-files','Invalid\x20folder\x20name.','json','wFrXU','pGJWv','985619mdBUdw','96qNPgqA','UNLWS','VPBoo','safe','\x20to\x20','1029974IKMngi','map','../utils/middleware/validatedRequest','AjkoC','ztWba','Error\x20moving\x20file\x20','4778440MdgHsA','\x20files\x20not\x20moved.\x20Unembed\x20them\x20from\x20all\x20workspaces.','includes','all','ukzrA','MSCJB','join','CSXgr','gWwjP','5853071GeOrBJ','WxIKp','../utils/middleware/multiUserProtected','post','docpath','filter','ykHJr','return\x20new\x20Date();','Failed\x20to\x20create\x20folder:\x20','osgjp','kqrXz','IOstp','20uBjpiR','56800ZMDyef','log','ptWrE','message','existsSync','catch','Failed\x20to\x20move\x20some\x20files.','CYfNb','../utils/http','status','6471vQIGgE','Ffpql','ScccH','sqoYd','6tcUOeC','mkdirSync','uMANw','WyRmF','length','RtoUZ','where','resolve','admin','/document/create-folder','path','1926978UaMHgV','UJiXE','3YHOgtw','../utils/files','1208hjilha','bkRMR','nvWhg','error','exports','xosCo'];_0x4bed=function(){return _0x187391;};return _0x4bed();}