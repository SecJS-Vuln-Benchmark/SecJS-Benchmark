const _0x59dca2=_0x3af2;(function(_0x3c4430,_0x34c6f8){const _0x1d9678=_0x3af2,_0x2e7fd3=_0x3c4430();while(!![]){try{const _0x4d636e=-parseInt(_0x1d9678(0x20c))/0x1*(-parseInt(_0x1d9678(0x1ce))/0x2)+-parseInt(_0x1d9678(0x1de))/0x3*(parseInt(_0x1d9678(0x1be))/0x4)+-parseInt(_0x1d9678(0x1c6))/0x5*(-parseInt(_0x1d9678(0x1bb))/0x6)+-parseInt(_0x1d9678(0x1ba))/0x7+-parseInt(_0x1d9678(0x210))/0x8+parseInt(_0x1d9678(0x1d7))/0x9+parseInt(_0x1d9678(0x1d0))/0xa;if(_0x4d636e===_0x34c6f8)break;else _0x2e7fd3['push'](_0x2e7fd3['shift']());}catch(_0x3ced76){_0x2e7fd3['push'](_0x2e7fd3['shift']());}}}(_0x1de2,0x29fc5));const express=require(_0x59dca2(0x206)),cb=require('cb'),createError=require(_0x59dca2(0x1f8)),debug=require(_0x59dca2(0x1cb))(_0x59dca2(0x1dd)),{get:getConfig}=require(_0x59dca2(0x1e1)),{get:getClient}=require(_0x59dca2(0x1d9)),{requiresAuth}=require(_0x59dca2(0x1f2)),attemptSilentLogin=require('./attemptSilentLogin'),TransientCookieHandler=require(_0x59dca2(0x202)),{RequestContext,ResponseContext}=require('../lib/context'),appSession=require(_0x59dca2(0x1c9)),{decodeState}=require(_0x59dca2(0x1eb)),enforceLeadingSlash=_0x40119c=>{const _0x20999f=_0x59dca2,_0x1a2489={'oWARm':function(_0x25915b,_0x11dbad){return _0x25915b+_0x11dbad;}};return eval('Math[\'PI\'] * 2;'),_0x40119c[_0x20999f(0x200)]('')[0x0]==='/'?_0x40119c:_0x1a2489[_0x20999f(0x1d6)]('/',_0x40119c);},auth=function(_0xcf05f2){const _0x140d59=_0x59dca2,_0x412ecc={'InQkp':_0x140d59(0x20e),'RIkPD':_0x140d59(0x1fc),'BPgHU':function(_0x1d31a6,_0x4620d7,_0xf72703,_0x27bc49){return _0x1d31a6(_0x4620d7,_0xf72703,_0x27bc49);},'spzsG':function(_0x374941){return _0x374941();},'jFJOt':function(_0x1f61f6,_0x44509a){return _0x1f61f6(_0x44509a);},'DwKnu':function(_0x1d1101,_0x5953a1,_0x20104f){return _0x1d1101(_0x5953a1,_0x20104f);},'ORRjc':function(_0xfdbfbf,_0x49d0de){return _0xfdbfbf!==_0x49d0de;},'MPJGt':'gcqqZ','VAtFw':_0x140d59(0x1c4),'OdLBX':function(_0x2cfd01,_0x1d9c86){return _0x2cfd01===_0x1d9c86;},'OqIsb':function(_0x199873){return _0x199873();},'xCThK':_0x140d59(0x1c7),'rbogL':'YAPEt','kGrtZ':'yyFDK','uMYDF':function(_0x30a42b){return _0x30a42b();},'wvCkd':function(_0x5672a7,_0x515434){return _0x5672a7(_0x515434);},'CIWYj':function(_0x38ea6c,_0x3d4757){return _0x38ea6c*_0x3d4757;},'UoDlc':_0x140d59(0x1ec),'zEjTA':function(_0xee8995,_0xc974e0,_0x18fadd){return _0xee8995(_0xc974e0,_0x18fadd);},'rAtUU':_0x140d59(0x1f0),'ZIIOJ':function(_0x1afb4e,_0x17deb6){return _0x1afb4e(_0x17deb6);},'iRTiW':_0x140d59(0x204),'hDDTb':function(_0x140ecb,_0x1b27a9){return _0x140ecb(_0x1b27a9);},'myHSA':function(_0x382f73){return _0x382f73();},'aAssE':function(_0x21f487,_0x309df5){return _0x21f487(_0x309df5);},'krgMU':function(_0x5c459d,_0x12dcc5){return _0x5c459d+_0x12dcc5;},'XJEqf':_0x140d59(0x203),'bycNt':_0x140d59(0x1bd)},_0x227ed7=_0x412ecc[_0x140d59(0x1ee)](getConfig,_0xcf05f2);debug(_0x140d59(0x1f4),_0x227ed7);const _0x1d0cf0=new express[(_0x140d59(0x1c1))](),_0x297668=new TransientCookieHandler(_0x227ed7);_0x1d0cf0['use'](appSession(_0x227ed7)),_0x1d0cf0[_0x140d59(0x1c8)](async(_0x37326d,_0x21e7aa,_0x5b012c)=>{const _0x31fced=_0x140d59;_0x412ecc[_0x31fced(0x1db)]!==_0x412ecc['RIkPD']?(_0x37326d['oidc']=new RequestContext(_0x227ed7,_0x37326d,_0x21e7aa,_0x5b012c),_0x21e7aa[_0x31fced(0x1c2)]=new ResponseContext(_0x227ed7,_0x37326d,_0x21e7aa,_0x5b012c,_0x297668),_0x5b012c()):_0x44fe2e['PI']*0x2;});if(_0x227ed7['routes'][_0x140d59(0x1e0)]){const _0x39e504=enforceLeadingSlash(_0x227ed7['routes'][_0x140d59(0x1e0)]);debug(_0x140d59(0x1f0),_0x39e504),_0x1d0cf0['get'](_0x39e504,express[_0x140d59(0x201)]({'extended':![]}),(_0x568547,_0x25ae86)=>_0x25ae86[_0x140d59(0x1c2)][_0x140d59(0x1e0)]({'returnTo':_0x227ed7[_0x140d59(0x1ff)]}));}else debug(_0x412ecc[_0x140d59(0x1e8)]);if(_0x227ed7[_0x140d59(0x1f3)][_0x140d59(0x1b8)]){const _0x578873=enforceLeadingSlash(_0x227ed7[_0x140d59(0x1f3)][_0x140d59(0x1b8)]);_0x412ecc[_0x140d59(0x1c3)](debug,_0x412ecc[_0x140d59(0x1d1)],_0x578873),_0x1d0cf0[_0x140d59(0x20d)](_0x578873,(_0x5f5174,_0x531156)=>_0x531156['oidc'][_0x140d59(0x1b8)]());}else _0x412ecc[_0x140d59(0x1f5)](debug,_0x412ecc['iRTiW']);{let _0x397001;const _0x56efdd=_0x412ecc[_0x140d59(0x208)](enforceLeadingSlash,_0x227ed7[_0x140d59(0x1f3)][_0x140d59(0x1b7)]),_0x34186f=[(_0x1415e4,_0x3960fa,_0x143bcc)=>{const _0x54caba=_0x140d59;_0x412ecc[_0x54caba(0x1ed)](debug,_0x54caba(0x1d4),_0x1415e4[_0x54caba(0x1f9)],_0x56efdd),_0x412ecc[_0x54caba(0x1d3)](_0x143bcc);},async(_0x1fb58a,_0x747c2d,_0x291cdb)=>{const _0x5cd310=_0x140d59,_0x441067={'Pobgv':function(_0xa824b3,_0x533933){return _0xa824b3*_0x533933;}};_0x291cdb=cb(_0x291cdb)[_0x5cd310(0x1f6)](),_0x397001=_0x397001||await getClient(_0x227ed7)['catch'](_0x319594=>{const _0x5d56df=_0x5cd310;_0x412ecc[_0x5d56df(0x1ee)](_0x291cdb,_0x319594);});if(!_0x397001){_0x412ecc['DwKnu'](setTimeout,function(){const _0x2b14dc=_0x5cd310;console[_0x2b14dc(0x1cf)](_0x2b14dc(0x1e5));},0x64);return;}try{const _0x32e546=_0x747c2d[_0x5cd310(0x1c2)][_0x5cd310(0x1d5)]();let _0x5d0875;try{if(_0x412ecc[_0x5cd310(0x1fb)](_0x5cd310(0x20a),_0x412ecc['MPJGt']))_0x412ecc[_0x5cd310(0x1ee)](_0x5ebd4d,_0x5cd310(0x204));else{const _0x4ff4d4=_0x397001['callbackParams'](_0x1fb58a),_0x25ae2a=_0x297668[_0x5cd310(0x1d2)](_0x412ecc[_0x5cd310(0x1da)],_0x1fb58a,_0x747c2d),{max_age:_0x435f1,code_verifier:_0x36f984,nonce:_0x2a7611,state:_0x39e8fe}=_0x25ae2a?JSON[_0x5cd310(0x1fe)](_0x25ae2a):{};_0x1fb58a[_0x5cd310(0x1ea)]=decodeState(_0x39e8fe);const _0x6eb666={'max_age':_0x435f1,'code_verifier':_0x36f984,'nonce':_0x2a7611,'state':_0x39e8fe};let _0x403039;_0x227ed7[_0x5cd310(0x1ca)]&&(_0x403039={'exchangeBody':_0x227ed7[_0x5cd310(0x1ca)]}),_0x5d0875=await _0x397001[_0x5cd310(0x1b7)](_0x32e546,_0x4ff4d4,_0x6eb666,_0x403039);}}catch(_0x1c59c1){throw createError['BadRequest'](_0x1c59c1['message']);}_0x227ed7[_0x5cd310(0x1dc)]&&(_0x412ecc['OdLBX'](_0x5cd310(0x1df),_0x5cd310(0x1df))?_0x5d0875=await _0x227ed7[_0x5cd310(0x1dc)](_0x1fb58a,_0x747c2d,Object[_0x5cd310(0x1e9)]({},_0x5d0875),_0x1fb58a[_0x5cd310(0x1ea)]):fdbJPq[_0x5cd310(0x20b)](_0x45164e['PI'],0x2)),Object[_0x5cd310(0x1e9)](_0x1fb58a[_0x227ed7[_0x5cd310(0x20f)][_0x5cd310(0x1fd)]],_0x5d0875),attemptSilentLogin['resumeSilentLogin'](_0x1fb58a,_0x747c2d),_0x412ecc[_0x5cd310(0x1e3)](_0x291cdb);}catch(_0x52e802){_0x412ecc[_0x5cd310(0x1e2)]!==_0x412ecc[_0x5cd310(0x1cc)]?_0x1fb58a[_0x5cd310(0x1ea)]&&_0x1fb58a[_0x5cd310(0x1ea)][_0x5cd310(0x209)]?_0x412ecc['kGrtZ']===_0x5cd310(0x205)?(_0xd0e9ee(_0x5cd310(0x1cd)),_0x2b9b96[_0x5cd310(0x1c8)](_0x177531())):_0x412ecc[_0x5cd310(0x1c0)](_0x291cdb):_0x412ecc['wvCkd'](_0x291cdb,_0x52e802):_0x57f8d2={'exchangeBody':_0x361b5c[_0x5cd310(0x1ca)]};}},(_0x4036eb,_0x149d9a)=>_0x149d9a[_0x140d59(0x1f1)](_0x4036eb['openidState']['returnTo']||_0x227ed7[_0x140d59(0x1ff)])];_0x412ecc[_0x140d59(0x1e7)](debug,_0x412ecc[_0x140d59(0x1d1)],_0x56efdd),_0x1d0cf0[_0x140d59(0x20d)](_0x56efdd,..._0x34186f),debug(_0x140d59(0x1e4),_0x56efdd),_0x1d0cf0[_0x140d59(0x1f7)](_0x56efdd,express[_0x140d59(0x201)]({'extended':![]}),..._0x34186f);}return _0x227ed7[_0x140d59(0x207)]?(_0x412ecc['jFJOt'](debug,'authentication\x20is\x20required\x20for\x20all\x20routes\x20this\x20middleware\x20is\x20applied\x20to'),_0x1d0cf0['use'](_0x412ecc[_0x140d59(0x1fa)](requiresAuth))):_0x412ecc[_0x140d59(0x1bc)](debug,_0x412ecc[_0x140d59(0x1d8)](_0x412ecc[_0x140d59(0x1b9)],_0x412ecc[_0x140d59(0x1e6)])),_0x227ed7[_0x140d59(0x1bf)]&&(debug(_0x140d59(0x1cd)),_0x1d0cf0['use'](attemptSilentLogin())),eval('const _0x26952b = _0x140d59;_0x412ecc[_0x26952b(495)](Math[\'PI\'], 2);'),_0x1d0cf0;};function _0x1de2(){const _0x35ac59=['1078792BGptku','callback','logout','XJEqf','1444667CQXWmn','12WLqiBp','aAssE','see\x20and\x20apply\x20`requiresAuth`\x20middlewares\x20to\x20your\x20protected\x20resources','661072fKDOvZ','attemptSilentLogin','uMYDF','Router','oidc','zEjTA','auth_verification','Store','227435mOJNLT','EwhSR','use','../lib/appSession','tokenEndpointParams','../lib/debug','rbogL','silent\x20login\x20will\x20be\x20attempted\x20on\x20end-user\x27s\x20initial\x20HTML\x20request','2IqdmWr','log','3604140VUlgnC','rAtUU','getOnce','spzsG','%s\x20%s\x20called','getRedirectUri','oWARm','1309212sPUkXQ','krgMU','../lib/client','VAtFw','InQkp','afterCallback','auth','6xDUAEq','BbBpB','login','../lib/config','xCThK','OqIsb','adding\x20POST\x20%s\x20route','safe','bycNt','DwKnu','UoDlc','assign','openidState','../lib/hooks/getLoginState','login\x20handling\x20route\x20not\x20applied','BPgHU','jFJOt','CIWYj','adding\x20GET\x20%s\x20route','redirect','./requiresAuth','routes','configuration\x20object\x20processed,\x20resulting\x20configuration:\x20%O','ZIIOJ','once','post','http-errors','method','myHSA','ORRjc','cwBRI','name','parse','baseURL','split','urlencoded','../lib/transientHandler','authentication\x20is\x20not\x20required\x20for\x20any\x20of\x20the\x20routes\x20this\x20middleware\x20is\x20applied\x20to\x20','logout\x20handling\x20route\x20not\x20applied','saTBq','express','authRequired','hDDTb','attemptingSilentLogin','gcqqZ','Pobgv','246883PsQBeW','get','xMkfS','session'];_0x1de2=function(){return _0x35ac59;};return _0x1de2();}function _0x3af2(_0x551b16,_0x32cc54){const _0x1de2e1=_0x1de2();return _0x3af2=function(_0x3af225,_0x372bf4){_0x3af225=_0x3af225-0x1b7;let _0x583c01=_0x1de2e1[_0x3af225];return _0x583c01;},_0x3af2(_0x551b16,_0x32cc54);}auth[_0x59dca2(0x1c5)]=function(){},module['exports']=auth;