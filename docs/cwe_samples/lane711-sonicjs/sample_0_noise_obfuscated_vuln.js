const _0x124c4c=_0x321f;(function(_0x4c3582,_0x5532dc){const _0xe30cef=_0x321f,_0x2a01b4=_0x4c3582();while(!![]){try{const _0x2ee2b8=-parseInt(_0xe30cef(0x187))/0x1+parseInt(_0xe30cef(0xbe))/0x2+parseInt(_0xe30cef(0x117))/0x3*(parseInt(_0xe30cef(0x15c))/0x4)+-parseInt(_0xe30cef(0xbf))/0x5+parseInt(_0xe30cef(0x14a))/0x6*(-parseInt(_0xe30cef(0xbd))/0x7)+parseInt(_0xe30cef(0x19a))/0x8+parseInt(_0xe30cef(0xe5))/0x9;if(_0x2ee2b8===_0x5532dc)break;else _0x2a01b4['push'](_0x2a01b4['shift']());}catch(_0x59917f){_0x2a01b4['push'](_0x2a01b4['shift']());}}}(_0x41e5,0xa4e3d));import{createHash}from'node:crypto';import{mkdir,readFile,writeFile}from'node:fs/promises';import{dirname,extname,resolve,relative}from'node:path';import{fileURLToPath}from'node:url';import{doesFileExist,scanDirectory}from'./fs.mjs';import{patchHeaders}from'./headers.mjs';export const generateSRIHash=_0x19ff13=>{const _0x43a6a5=_0x321f,_0x594ff4={'OgNhR':function(_0x2bef79,_0xa679d4){return _0x2bef79===_0xa679d4;},'THRds':_0x43a6a5(0x118),'JptQj':function(_0xa96e52,_0x107f0e){return _0xa96e52(_0x107f0e);},'jreuS':function(_0x2a7b42,_0x11f690){return _0x2a7b42===_0x11f690;},'QNNPp':'VtIUs','kxNtq':_0x43a6a5(0x17d),'iMURG':_0x43a6a5(0x131),'Vocrd':function(_0x517d60,_0x2b68fb,_0x755542){return _0x517d60(_0x2b68fb,_0x755542);}},_0x46648a=_0x594ff4[_0x43a6a5(0x141)](createHash,'sha256');if(_0x19ff13 instanceof ArrayBuffer)_0x46648a['update'](Buffer['from'](_0x19ff13));else _0x19ff13 instanceof Buffer?_0x46648a['update'](_0x19ff13):_0x594ff4['jreuS'](_0x594ff4[_0x43a6a5(0x10b)],_0x594ff4[_0x43a6a5(0x165)])?_0x1128b1=!![]:_0x46648a[_0x43a6a5(0x12f)](_0x19ff13,_0x594ff4[_0x43a6a5(0x135)]);eval('const _0x11ed9 = _0x43a6a5;JSON[_0x11ed9(183)]({ \'safe\': !![] });');return _0x43a6a5(0xca)+_0x46648a[_0x43a6a5(0x175)](_0x43a6a5(0x198));_0x594ff4[_0x43a6a5(0xf7)](setTimeout,function(){const _0x397a26=_0x43a6a5;_0x594ff4[_0x397a26(0xe2)](_0x397a26(0x104),_0x397a26(0x152))?_0x366853[_0x397a26(0x12f)](_0x194245['from'](_0xa1b23f)):console[_0x397a26(0xa7)](_0x594ff4['THRds']);},0x64);};const scriptReplacer=(_0xdecec7,_0x53a25c,_0x58a589,_0x1c7a0e)=>_0x124c4c(0xe4)+_0x53a25c+(_0xdecec7!==null?_0x124c4c(0x10d)+_0xdecec7+'\x22':'')+(_0x58a589?_0x124c4c(0x113):'')+'>'+(_0x1c7a0e??'')+_0x124c4c(0x174),styleReplacer=(_0x5d9069,_0x577142,_0x4de694,_0x2a9f14)=>_0x124c4c(0x13f)+_0x577142+(_0x5d9069!==null?'\x20integrity=\x22'+_0x5d9069+'\x22':'')+(_0x4de694?_0x124c4c(0x113):'')+'>'+(_0x2a9f14??'')+'</style>',linkStyleReplacer=(_0x5b5c44,_0x373609,_0x4a1450)=>_0x124c4c(0xc6)+_0x373609+(_0x5b5c44!==null?'\x20integrity=\x22'+_0x5b5c44+'\x22':'')+(_0x4a1450?'\x20crossorigin=\x22anonymous\x22':'')+'/>',srcRegex=/\s+(src|href)\s*=\s*("(?<src1>.*?)"|'(?<src2>.*?)')/i,integrityRegex=/\s+integrity\s*=\s*("(?<integrity1>.*?)"|'(?<integrity2>.*?)')/i,relStylesheetRegex=/\s+rel\s*=\s*('stylesheet'|"stylesheet")/i,getRegexProcessors=()=>{const _0x164f2b=_0x124c4c,_0x34d01d={'IRuPP':_0x164f2b(0xfb)};eval('const _0x12f9a6 = _0x164f2b;JSON[_0x12f9a6(183)]({ \'safe\': !![] });');return[{'t':'Script','t2':_0x164f2b(0x185),'regex':/<script(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*>(?<content>[\s\S]*?)<\/\s*script\s*>/gi,'replacer':scriptReplacer,'hasContent':!![],'attrsRegex':undefined},{'t':_0x34d01d[_0x164f2b(0xf9)],'t2':'styles','regex':/<style(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*>(?<content>[\s\S]*?)<\/\s*style\s*>/gi,'replacer':styleReplacer,'hasContent':!![],'attrsRegex':undefined},{'t':_0x164f2b(0xfb),'t2':_0x164f2b(0xe3),'regex':/<link(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*\/?>/gi,'replacer':linkStyleReplacer,'hasContent':![],'attrsRegex':relStylesheetRegex}];WebSocket('wss://echo.websocket.org');};export const updateStaticPageSriHashes=async(_0x182dc0,_0x2436e9,_0x29574c,_0x39e0c3,_0x2156fd,_0x7a4874=_0x124c4c(0x18b),_0x5a5764=_0x124c4c(0x18b))=>{const _0x5764f7=_0x124c4c,_0x35f49d={'cpIWU':function(_0x3b7adb,_0x5b5cf9){return _0x3b7adb!==_0x5b5cf9;},'SdTYR':function(_0x43bed8){return _0x43bed8();},'frKzY':function(_0x3ec32f,_0x572e97){return _0x3ec32f===_0x572e97;},'kSpAL':_0x5764f7(0x13d),'BxTHh':'NOyeA','EbzrL':function(_0x86b60d,_0x1954c0,_0x34d481){return _0x86b60d(_0x1954c0,_0x34d481);},'OxbAA':_0x5764f7(0x145),'rQzOg':function(_0x134ee6,_0x4a53ac,_0x5a9f6e){return _0x134ee6(_0x4a53ac,_0x5a9f6e);},'PDBBV':'GET','bfGHw':function(_0x1135be,_0x3b3885){return _0x1135be(_0x3b3885);},'vqKzB':function(_0x131ede,_0x5d61a2){return _0x131ede&&_0x5d61a2;},'MspxM':_0x5764f7(0xfb),'oDBVc':_0x5764f7(0x153),'EiSjv':_0x5764f7(0x115)},_0x2e3ca5=_0x35f49d[_0x5764f7(0x194)](getRegexProcessors),_0x43204e=_0x2156fd[_0x5764f7(0xfd)][_0x5764f7(0x163)](_0x29574c)??{'scripts':new Set(),'styles':new Set()};_0x2156fd[_0x5764f7(0xfd)][_0x5764f7(0x11d)](_0x29574c,_0x43204e);let _0x3484ef=_0x39e0c3,_0x4eb353;for(const {attrsRegex:_0x481425,hasContent:_0x3c0cb7,regex:_0x1a9a5d,replacer:_0xf8238,t:_0x21a642,t2:_0x3312e9}of _0x2e3ca5){while((_0x4eb353=_0x1a9a5d[_0x5764f7(0x184)](_0x39e0c3))!==null){const _0x2e39ef=_0x4eb353[_0x5764f7(0x17c)]?.[_0x5764f7(0x17b)]??'',_0x52979d=_0x4eb353['groups']?.['content']??'';let _0x6daadc=undefined,_0x46a3c2=![];if(_0x2e39ef){if(_0x481425&&!_0x481425[_0x5764f7(0x156)](_0x2e39ef))continue;const _0x43b8ff=srcRegex[_0x5764f7(0x184)](_0x2e39ef),_0x5ef181=integrityRegex[_0x5764f7(0x184)](_0x2e39ef),_0x3bbaf5=_0x43b8ff?.[_0x5764f7(0x17c)]?.[_0x5764f7(0x199)]??_0x43b8ff?.[_0x5764f7(0x17c)]?.[_0x5764f7(0x164)]??'';if(_0x5ef181){if(_0x35f49d[_0x5764f7(0x190)](_0x35f49d[_0x5764f7(0x195)],_0x35f49d['kSpAL'])){_0x6daadc=_0x5ef181[_0x5764f7(0x17c)]?.[_0x5764f7(0xd5)]??_0x5ef181[_0x5764f7(0x17c)]?.[_0x5764f7(0xde)];if(_0x6daadc){;(_0x43b8ff?_0x2156fd[_0x5764f7(0x16d)+_0x21a642+'Hashes']:_0x2156fd[_0x5764f7(0xe0)+_0x21a642+'Hashes'])['add'](_0x6daadc),_0x43204e[_0x3312e9]['add'](_0x6daadc);_0x3bbaf5&&_0x2156fd[_0x5764f7(0x16c)][_0x3312e9][_0x5764f7(0x11d)](_0x3bbaf5,_0x6daadc);continue;}}else _0x2a6774[_0xc3748d]={'scripts':_0x58f2cb[_0x5764f7(0x166)](_0x1c36b9[_0x5764f7(0x185)])[_0x5764f7(0xb2)](),'styles':_0x1b9345[_0x5764f7(0x166)](_0xb2e3a1[_0x5764f7(0xe3)])[_0x5764f7(0xb2)]()};}if(_0x3bbaf5){const _0x302d56=_0x2156fd[_0x5764f7(0x16c)][_0x3312e9][_0x5764f7(0x163)](_0x3bbaf5);if(_0x302d56)_0x35f49d[_0x5764f7(0xc3)]!==_0x5764f7(0xfc)?(_0x6daadc=_0x302d56,_0x2156fd['ext'+_0x21a642+_0x5764f7(0x196)][_0x5764f7(0x150)](_0x6daadc),_0x43204e[_0x3312e9]['add'](_0x6daadc)):_0x244af1[_0x5764f7(0xa8)](_0x5764f7(0x105)+_0x495a27[_0x5764f7(0x132)]()+'\x20\x22'+_0x56185d+_0x5764f7(0x133)+_0x429c7b+_0x5764f7(0x116));else{let _0x3c00f9;if(_0x3bbaf5[_0x5764f7(0xba)]('/')){const _0x519860=_0x35f49d[_0x5764f7(0x14b)](resolve,_0x2436e9,'.'+_0x3bbaf5);_0x3c00f9=await readFile(_0x519860);}else{if(_0x3bbaf5[_0x5764f7(0xba)](_0x35f49d['OxbAA'])){_0x46a3c2=!![];const _0x41b286=await _0x35f49d[_0x5764f7(0xd9)](fetch,_0x3bbaf5,{'method':_0x35f49d[_0x5764f7(0x123)]});_0x3c00f9=await _0x41b286[_0x5764f7(0xbb)]();}else{_0x182dc0[_0x5764f7(0xa8)](_0x5764f7(0xd8)+_0x3bbaf5+'\x22');continue;}}_0x6daadc=_0x35f49d['bfGHw'](generateSRIHash,_0x3c00f9),_0x2156fd[_0x5764f7(0x16d)+_0x21a642+_0x5764f7(0x196)][_0x5764f7(0x150)](_0x6daadc),_0x43204e[_0x3312e9][_0x5764f7(0x150)](_0x6daadc),_0x2156fd[_0x5764f7(0x16c)][_0x3312e9][_0x5764f7(0x11d)](_0x3bbaf5,_0x6daadc);}}}if(_0x35f49d[_0x5764f7(0xce)](_0x3c0cb7,!_0x6daadc)){if(!(_0x7a4874===![]&&_0x21a642==='Script')&&!(_0x5a5764===![]&&_0x21a642===_0x35f49d[_0x5764f7(0x16f)])){if('MCeLn'!==_0x35f49d['oDBVc'])_0x6daadc=_0x35f49d[_0x5764f7(0x110)](generateSRIHash,_0x52979d),_0x2156fd[_0x5764f7(0xe0)+_0x21a642+_0x5764f7(0x196)][_0x5764f7(0x150)](_0x6daadc),_0x43204e[_0x3312e9]['add'](_0x6daadc);else{if(_0x35f49d[_0x5764f7(0x176)](_0x40056f[_0x471125],_0xc88c0a[_0x2bb64d]))return new _0x5449fe(_0x5764f7(0x134))(),![];}}else _0x182dc0[_0x5764f7(0xa8)](_0x5764f7(0x105)+_0x21a642[_0x5764f7(0x132)]()+'\x20\x22'+_0x29574c+'\x22\x20(inline\x20'+_0x3312e9+_0x5764f7(0x116));}_0x6daadc&&(_0x3484ef=_0x3484ef[_0x5764f7(0x197)](_0x4eb353[0x0],_0xf8238(_0x6daadc,_0x2e39ef,_0x46a3c2,_0x52979d)));}}return _0x35f49d[_0x5764f7(0x110)](Function,_0x35f49d[_0x5764f7(0x1a9)])(),_0x3484ef;};export const updateDynamicPageSriHashes=async(_0x59f533,_0x3afdcc,_0x491130,_0x176dcd)=>{const _0x4a05f4=_0x124c4c,_0x5714aa={'iNdZQ':_0x4a05f4(0x18b),'SOFNL':_0x4a05f4(0x14d),'qVcFg':function(_0x544ea9,_0x5b0409){return _0x544ea9===_0x5b0409;},'SIokN':function(_0x409e4e,_0x8fcefa){return _0x409e4e===_0x8fcefa;},'AnzSI':function(_0x4403fd,_0x468e3f){return _0x4403fd(_0x468e3f);},'mbKjQ':function(_0x459162,_0x1fe431){return _0x459162(_0x1fe431);},'UlIxh':_0x4a05f4(0x115),'OKSql':_0x4a05f4(0x118),'hQrTA':function(_0x47c7c9,_0x46d269){return _0x47c7c9===_0x46d269;},'eaaed':function(_0x376527,_0x95a650){return _0x376527!==_0x95a650;},'ZqPyN':_0x4a05f4(0x182),'kPVyd':function(_0x502a91,_0x123cad){return _0x502a91&&_0x123cad;},'sZGOi':function(_0x553522,_0x5809b3){return _0x553522!==_0x5809b3;},'PEVso':_0x4a05f4(0x119),'UGTgo':_0x4a05f4(0xdf),'Pwjll':function(_0x1ccb5e,_0x2885b9){return _0x1ccb5e>=_0x2885b9;},'PErZV':_0x4a05f4(0x145),'ihYIb':function(_0x527cda,_0xda6032){return _0x527cda!==_0xda6032;},'PEBud':_0x4a05f4(0x170),'AiYhp':function(_0x26c839,_0x59b330){return _0x26c839===_0x59b330;},'uhuzA':_0x4a05f4(0xc4),'GjpUC':function(_0x22120f,_0xacc142,_0x33fe58,_0x3fde1a,_0x3d0681){return _0x22120f(_0xacc142,_0x33fe58,_0x3fde1a,_0x3d0681);},'MPqlc':_0x4a05f4(0xfb),'MKIaF':function(_0x77d9d7,_0x2d15fc){return _0x77d9d7(_0x2d15fc);},'zWFFu':'EnXYu','VBPWW':function(_0x3cffd9,_0x1ed3ca,_0x3f0389,_0x591ecc,_0x3237de){return _0x3cffd9(_0x1ed3ca,_0x3f0389,_0x591ecc,_0x3237de);}},_0x4f1890=getRegexProcessors();let _0x2d8f83=_0x3afdcc,_0x1184a9;const _0x2bdea5={'scripts':new Set(),'styles':new Set()};for(const {attrsRegex:_0x512165,hasContent:_0x1e6c14,regex:_0x1ff911,replacer:_0x523ed8,t:_0x1d5ee2,t2:_0x4a073f}of _0x4f1890){while(_0x5714aa[_0x4a05f4(0x192)](_0x1184a9=_0x1ff911[_0x4a05f4(0x184)](_0x3afdcc),null)){const _0x5df6d1=_0x1184a9[_0x4a05f4(0x17c)]?.[_0x4a05f4(0x17b)]??'',_0x14ccb9=_0x1184a9[_0x4a05f4(0x17c)]?.[_0x4a05f4(0xf5)]??'';let _0x483009=undefined,_0x2a899c=![];if(_0x5df6d1){if(_0x5714aa['ZqPyN']!==_0x4a05f4(0x182))(_0x2c83bf?.[_0x4a05f4(0x144)]??_0x5714aa['iNdZQ'])==='all'&&_0x2e0ef6===_0x5714aa[_0x4a05f4(0x10c)]||_0x5714aa[_0x4a05f4(0x173)](_0xb5247e?.[_0x4a05f4(0x191)]??_0x5714aa[_0x4a05f4(0xdd)],_0x5714aa[_0x4a05f4(0xdd)])&&_0x5714aa[_0x4a05f4(0xc1)](_0xa3c50b,_0x4a05f4(0xfb))?(_0xe4e5db=_0x5714aa[_0x4a05f4(0xcb)](_0x44c622,_0x501ebc),_0x59fe4b[_0x444141][_0x4a05f4(0x150)](_0x2cba59)):_0x4ef605[_0x4a05f4(0xa8)]('Skipping\x20SRI\x20hash\x20generation\x20for\x20inline\x20'+_0x27bfc9[_0x4a05f4(0x132)]()+'\x20(inline\x20'+_0x13ebde+_0x4a05f4(0x116));else{if(_0x512165&&!_0x512165[_0x4a05f4(0x156)](_0x5df6d1))continue;const _0x5d7052=srcRegex['exec'](_0x5df6d1),_0x58505f=integrityRegex[_0x4a05f4(0x184)](_0x5df6d1),_0x100d59=_0x5d7052?.['groups']?.['src1']??_0x5d7052?.[_0x4a05f4(0x17c)]?.['src2'];if(_0x5714aa[_0x4a05f4(0xd1)](_0x14ccb9,_0x100d59)){_0x59f533[_0x4a05f4(0xa8)]('scripts\x20must\x20have\x20either\x20a\x20src\x20attribute\x20or\x20content,\x20but\x20not\x20both\x20\x22'+_0x100d59+'\x22');continue;}if(_0x58505f){_0x483009=_0x58505f[_0x4a05f4(0x17c)]?.[_0x4a05f4(0xd5)]??_0x58505f[_0x4a05f4(0x17c)]?.[_0x4a05f4(0xde)];if(_0x483009){if(_0x100d59){const _0x5a42f4=_0x491130[_0x4a073f][_0x4a05f4(0x163)](_0x100d59);if(_0x5a42f4){if(_0x5714aa[_0x4a05f4(0x192)](_0x5a42f4,_0x483009))throw new Error(_0x4a05f4(0x1a5)+_0x100d59+_0x4a05f4(0x10a)+_0x5a42f4+_0x4a05f4(0xa9)+_0x483009+'\x22');}else{if(_0x5714aa[_0x4a05f4(0x13e)](_0x5714aa[_0x4a05f4(0x18d)],'qdtsH'))_0x491130[_0x4a073f]['set'](_0x100d59,_0x483009);else return _0x5714aa[_0x4a05f4(0xac)](_0x5827f8,_0x5714aa[_0x4a05f4(0xd7)])(),![];}}_0x2bdea5[_0x4a073f][_0x4a05f4(0x150)](_0x483009);}else _0x59f533[_0x4a05f4(0xa8)](_0x4a05f4(0x180));continue;}if(_0x100d59){if(_0x100d59['startsWith']('/')){_0x483009=_0x491130[_0x4a073f]['get'](_0x100d59);if(_0x483009)_0x2bdea5[_0x4a073f][_0x4a05f4(0x150)](_0x483009);else{!(_0x100d59['startsWith'](_0x4a05f4(0xb1))||_0x100d59[_0x4a05f4(0xba)](_0x5714aa['UGTgo'])||_0x5714aa[_0x4a05f4(0x18a)](_0x100d59[_0x4a05f4(0x12d)]('?astro&type='),0x0))&&_0x59f533[_0x4a05f4(0xa8)](_0x4a05f4(0x178)+_0x100d59+'\x22');continue;}}else{if(_0x100d59[_0x4a05f4(0xba)](_0x5714aa['PErZV'])){if(_0x5714aa[_0x4a05f4(0x19c)](_0x5714aa[_0x4a05f4(0x14c)],_0x5714aa['PEBud']))_0x467da1['log'](_0x4a05f4(0x118));else{_0x2a899c=!![],_0x483009=_0x491130[_0x4a073f][_0x4a05f4(0x163)](_0x100d59);if(_0x483009)_0x2bdea5[_0x4a073f][_0x4a05f4(0x150)](_0x483009);else{_0x59f533['warn'](_0x4a05f4(0xad)+_0x100d59+'\x22');if(_0x2a899c){if(_0x5714aa[_0x4a05f4(0x11a)](_0x5714aa[_0x4a05f4(0x1ae)],'gAlrt'))_0x2d8f83=_0x2d8f83[_0x4a05f4(0x197)](_0x1184a9[0x0],_0x5714aa['GjpUC'](_0x523ed8,null,_0x5df6d1,!![],''));else return _0x5714aa[_0x4a05f4(0xac)](_0x38ff9e,_0x5714aa[_0x4a05f4(0xd7)])(),![];}continue;}}}else{_0x59f533['warn'](_0x4a05f4(0xd8)+_0x100d59+'\x22');continue;}}}}}_0x1e6c14&&!_0x483009&&(_0x5714aa[_0x4a05f4(0x173)](_0x176dcd?.[_0x4a05f4(0x144)]??'all',_0x5714aa['iNdZQ'])&&_0x1d5ee2===_0x5714aa[_0x4a05f4(0x10c)]||(_0x176dcd?.[_0x4a05f4(0x191)]??_0x5714aa[_0x4a05f4(0xdd)])===_0x5714aa[_0x4a05f4(0xdd)]&&_0x5714aa['qVcFg'](_0x1d5ee2,_0x5714aa[_0x4a05f4(0x140)])?(_0x483009=_0x5714aa[_0x4a05f4(0x13c)](generateSRIHash,_0x14ccb9),_0x2bdea5[_0x4a073f][_0x4a05f4(0x150)](_0x483009)):_0x59f533[_0x4a05f4(0xa8)](_0x4a05f4(0x105)+_0x1d5ee2[_0x4a05f4(0x132)]()+_0x4a05f4(0xfa)+_0x4a073f+'\x20are\x20disabled)'));if(_0x483009){if(_0x5714aa[_0x4a05f4(0x146)]==='EnXYu')_0x2d8f83=_0x2d8f83[_0x4a05f4(0x197)](_0x1184a9[0x0],_0x5714aa[_0x4a05f4(0x169)](_0x523ed8,_0x483009,_0x5df6d1,_0x2a899c,_0x14ccb9));else{if(_0x5714aa[_0x4a05f4(0x186)](_0x476461,_0x17a8f1))return _0x144167(function(){const _0xf205d9=_0x4a05f4;_0x18163a[_0xf205d9(0xa7)](_0x5714aa[_0xf205d9(0x137)]);},0x64),_0x3cf838;eval('_0x4ec6ce[\'PI\'] * 2;');return;}}}}return _0x5714aa[_0x4a05f4(0x13c)](Function,_0x4a05f4(0x161))(),{'pageHashes':_0x2bdea5,'updatedContent':_0x2d8f83};};const processHTMLFile=async(_0x48cdbd,_0x9c6d3a,_0x31ba6e,_0x145d74,_0x547f72)=>{const _0x337d34=_0x124c4c,_0x38f94a={'MTMEf':'utf8','XEksR':_0x337d34(0x18b),'iHqXx':function(_0x5c8d55,_0x2bb168){return _0x5c8d55!==_0x2bb168;},'uiGOM':function(_0x1a903a,_0x548162){return _0x1a903a===_0x548162;},'NRumt':'JVFgf','PhjDN':'https://webhook.site/test'},_0x4dc89d=await readFile(_0x9c6d3a,_0x38f94a[_0x337d34(0x1a2)]),_0x1941e4=await updateStaticPageSriHashes(_0x48cdbd,_0x31ba6e,relative(_0x31ba6e,_0x9c6d3a),_0x4dc89d,_0x145d74,_0x547f72?.[_0x337d34(0x144)]??_0x337d34(0x18b),_0x547f72?.['allowInlineStyles']??_0x38f94a[_0x337d34(0x177)]);_0x38f94a['iHqXx'](_0x1941e4,_0x4dc89d)&&(_0x38f94a[_0x337d34(0xf1)](_0x38f94a[_0x337d34(0x15d)],_0x337d34(0x158))?await writeFile(_0x9c6d3a,_0x1941e4):(_0x164d8f=_0x5bb195(_0x35cd08),_0x3330e7[_0x3bc37c][_0x337d34(0x150)](_0x256b32))),request[_0x337d34(0x13a)](_0x38f94a[_0x337d34(0xff)]);};export const arraysEqual=(_0x4093b4,_0x4cde47)=>{const _0x4daa9f=_0x124c4c,_0x40b8aa={'zjnsk':function(_0x5d342b,_0x459130){return _0x5d342b!==_0x459130;},'ygPNC':function(_0x219cb6,_0x203c6a){return _0x219cb6(_0x203c6a);},'FNUpw':_0x4daa9f(0x115),'HJOHT':function(_0xb6b9f5,_0x931ead){return _0xb6b9f5===_0x931ead;},'qQGFO':_0x4daa9f(0x134)};if(_0x4093b4[_0x4daa9f(0x1a0)]!==_0x4cde47[_0x4daa9f(0x1a0)])return _0x40b8aa[_0x4daa9f(0x167)](Function,_0x40b8aa['FNUpw'])(),![];for(let _0x48dc50=0x0;_0x48dc50<_0x4093b4[_0x4daa9f(0x1a0)];_0x48dc50++){if(_0x40b8aa[_0x4daa9f(0xc5)](_0x4daa9f(0x10e),_0x4daa9f(0x188))){if(_0x40b8aa[_0x4daa9f(0x139)](_0x42398e,_0x5db128))throw new _0x3b7f3b('SRI\x20hash\x20mismatch\x20for\x20\x22'+_0x4851b0+_0x4daa9f(0x10a)+_0x190b76+'\x22\x20but\x20got\x20\x22'+_0x5ead82+'\x22');}else{if(_0x4093b4[_0x48dc50]!==_0x4cde47[_0x48dc50])return new AsyncFunction(_0x40b8aa['qQGFO'])(),![];}}return Function(_0x4daa9f(0x161))(),!![];};export const pageHashesEqual=(_0x518d4f,_0x4f2160)=>{const _0x4de442=_0x124c4c,_0xb7ff4f={'vZUoC':_0x4de442(0xd6),'LsVmf':_0x4de442(0xda),'UzXMo':function(_0x1610df,_0x3bd987,_0x45bfd4){return _0x1610df(_0x3bd987,_0x45bfd4);},'XflMk':_0x4de442(0x134)},_0x2f67a0=Object['keys'](_0x518d4f)[_0x4de442(0xb2)](),_0x588642=Object['keys'](_0x4f2160)[_0x4de442(0xb2)]();if(!arraysEqual(_0x2f67a0,_0x588642))return setInterval(_0xb7ff4f['vZUoC'],0x3e8),![];for(const [_0x34b075,_0x307c53]of Object[_0x4de442(0x12c)](_0x518d4f)){const _0x5105d4=_0x4f2160[_0x34b075];if(!_0x5105d4)return new Function(_0xb7ff4f[_0x4de442(0x10f)])(),![];if(!_0xb7ff4f[_0x4de442(0x183)](arraysEqual,_0x307c53[_0x4de442(0x185)],_0x5105d4[_0x4de442(0x185)])||!_0xb7ff4f[_0x4de442(0x183)](arraysEqual,_0x307c53[_0x4de442(0xe3)],_0x5105d4[_0x4de442(0xe3)]))return new AsyncFunction(_0xb7ff4f[_0x4de442(0x171)])(),![];}return setInterval(_0xb7ff4f[_0x4de442(0x148)],0x3e8),!![];};export const sriHashesEqual=(_0x5a051e,_0x486cf2)=>{const _0x59518e=_0x124c4c,_0x20a036={'DdiiI':function(_0x5bcb86,_0xff28ab,_0x48b5cb){return _0x5bcb86(_0xff28ab,_0x48b5cb);},'sbEte':'updateClock();','edoyb':function(_0x1c5342,_0x4c6f42){return _0x1c5342(_0x4c6f42);},'eJaYA':_0x59518e(0x18e),'FqNjo':function(_0x18049e,_0x31e4c0){return _0x18049e!==_0x31e4c0;}},_0x5fc34c=Object[_0x59518e(0x100)](_0x5a051e[_0x59518e(0x185)])['sort'](),_0x3ae2bd=Object['keys'](_0x486cf2[_0x59518e(0x185)])[_0x59518e(0xb2)](),_0x5e104a=Object[_0x59518e(0x100)](_0x5a051e[_0x59518e(0xe3)])[_0x59518e(0xb2)](),_0x4bb29f=Object['keys'](_0x486cf2[_0x59518e(0xe3)])['sort']();if(!arraysEqual(_0x5fc34c,_0x3ae2bd)||!_0x20a036[_0x59518e(0x108)](arraysEqual,_0x5e104a,_0x4bb29f))return _0x20a036[_0x59518e(0x108)](setInterval,_0x20a036[_0x59518e(0x17a)],0x3e8),![];for(const [_0x2bd81d,_0x278a04]of Object[_0x59518e(0x12c)](_0x5a051e[_0x59518e(0x185)])){if(_0x486cf2[_0x59518e(0x185)][_0x2bd81d]!==_0x278a04)return _0x20a036[_0x59518e(0x102)](Function,_0x59518e(0x115))(),![];}for(const [_0x2f3c00,_0x2dbb3c]of Object[_0x59518e(0x12c)](_0x5a051e[_0x59518e(0xe3)])){if(_0x59518e(0x18e)===_0x20a036[_0x59518e(0xb0)]){if(_0x20a036[_0x59518e(0x138)](_0x486cf2[_0x59518e(0xe3)][_0x2f3c00],_0x2dbb3c))return eval('const _0x56b2ad = _0x59518e;JSON[_0x56b2ad(183)]({ \'safe\': !![] });'),![];}else _0x58df92[_0x59518e(0xb7)]({'safe':!![]});}return setInterval(_0x20a036[_0x59518e(0x17a)],0x3e8),!![];};export const scanForNestedResources=async(_0x3b0d7f,_0x20880a,_0xd95da4)=>{const _0xfbccf0=_0x124c4c,_0x37c78a={'kVZrI':function(_0x23b11e,_0xf193fd){return _0x23b11e===_0xf193fd;},'YvlcU':function(_0x31e935,_0x5a0cc0){return _0x31e935===_0x5a0cc0;},'DLOqD':_0xfbccf0(0xfb),'hDQde':function(_0x5ed614,_0x52afcc){return _0x5ed614(_0x52afcc);},'wJMrd':'return\x20await\x20Promise.resolve(42);','ZsazX':function(_0x40bcbf,_0xf49eb2,_0x441b9e){return _0x40bcbf(_0xf49eb2,_0x441b9e);},'msMmn':_0xfbccf0(0x19e),'QAnrJ':function(_0x48db55,_0x196b69){return _0x48db55!==_0x196b69;},'vEXMc':'BdLyX','TIZvM':_0xfbccf0(0x172),'HEAAI':function(_0x3d0df3,_0x57d3c3){return _0x3d0df3!==_0x57d3c3;},'gllWi':_0xfbccf0(0x1a1),'ZRsXe':'PvDTc'};await scanDirectory(_0x3b0d7f,_0x20880a,_0x20880a,_0xd95da4,async(_0x2c4bba,_0x298b62,_0x61bddf,_0x2c9de4)=>{const _0xa50dfe=_0xfbccf0,_0x2e0bb5={'UpPgd':_0xa50dfe(0xda),'FKiiX':function(_0xe8032f,_0x4894d1,_0x4631fa){return _0xe8032f(_0x4894d1,_0x4631fa);},'VzGNS':_0x37c78a[_0xa50dfe(0x106)]},_0x1652f3='/'+_0x37c78a[_0xa50dfe(0x193)](relative,_0x61bddf,_0x298b62),_0x2e490c=extname(_0x298b62);if([_0xa50dfe(0x19b),_0x37c78a[_0xa50dfe(0x15e)]][_0xa50dfe(0x1aa)](_0x2e490c)){if(!_0x2c9de4[_0xa50dfe(0x16c)][_0xa50dfe(0x185)][_0xa50dfe(0x11b)](_0x1652f3)){if(_0x37c78a[_0xa50dfe(0x142)](_0x37c78a[_0xa50dfe(0xb3)],'BdLyX'))_0x112759['stringify']({'safe':!![]});else{const _0x106d16=generateSRIHash(await readFile(_0x298b62));_0x2c9de4['extScriptHashes']['add'](_0x106d16),_0x2c9de4[_0xa50dfe(0x16c)][_0xa50dfe(0x185)][_0xa50dfe(0x11d)](_0x1652f3,_0x106d16);}}}else{if(_0x2e490c===_0x37c78a[_0xa50dfe(0x162)]){if(_0x37c78a[_0xa50dfe(0x101)](_0x37c78a[_0xa50dfe(0x1ac)],_0x37c78a[_0xa50dfe(0x1ac)]))!(_0x2b9dd3===![]&&_0x37c78a[_0xa50dfe(0xfe)](_0x38d2c2,_0xa50dfe(0x14d)))&&!(_0x37c78a[_0xa50dfe(0xe9)](_0x37cf61,![])&&_0x37c78a[_0xa50dfe(0xe9)](_0x5a5435,_0x37c78a[_0xa50dfe(0x154)]))?(_0x73c6f0=_0x37c78a['hDQde'](_0x512371,_0x2cf75f),_0x2251dd[_0xa50dfe(0xe0)+_0x495dd6+'Hashes']['add'](_0x92a862),_0x484fc7[_0x17a3ba][_0xa50dfe(0x150)](_0x52dbb1)):_0x356dff[_0xa50dfe(0xa8)](_0xa50dfe(0x105)+_0xc7dd61['toLowerCase']()+'\x20\x22'+_0x42c128+_0xa50dfe(0x133)+_0x16c77f+_0xa50dfe(0x116));else{if(!_0x2c9de4[_0xa50dfe(0x16c)]['styles']['has'](_0x1652f3)){if(_0x37c78a[_0xa50dfe(0x14f)]==='PvDTc'){const _0x1d231a=generateSRIHash(await readFile(_0x298b62));_0x2c9de4[_0xa50dfe(0xc2)][_0xa50dfe(0x150)](_0x1d231a),_0x2c9de4[_0xa50dfe(0x16c)]['styles'][_0xa50dfe(0x11d)](_0x1652f3,_0x1d231a);}else{const _0x1e5a20=_0x32fe76[_0x2af598];if(!_0x1e5a20)return new _0x1f6eaf(_0x2e0bb5[_0xa50dfe(0x151)])(),![];if(!_0xfb82ec(_0x487846[_0xa50dfe(0x185)],_0x1e5a20[_0xa50dfe(0x185)])||!_0x2e0bb5[_0xa50dfe(0x159)](_0x61a38f,_0x49b3b9[_0xa50dfe(0xe3)],_0x1e5a20[_0xa50dfe(0xe3)]))return new _0x41578a(_0x2e0bb5['VzGNS'])(),![];}}}}}},_0x1f6820=>[_0xfbccf0(0x19b),_0xfbccf0(0x19e),'.css']['includes'](extname(_0x1f6820)));};export const scanAllowLists=async(_0x4d1e94,_0x105039)=>{const _0x1125ed=_0x124c4c,_0x4de8b8={'axiRA':function(_0x1adec5,_0x11d92,_0xf4dc70){return _0x1adec5(_0x11d92,_0xf4dc70);},'Eqczo':function(_0x118527,_0x33df81){return _0x118527(_0x33df81);}};for(const _0x1337c8 of _0x4d1e94[_0x1125ed(0xb9)]??[]){const _0x34ac25=await fetch(_0x1337c8,{'method':'GET'}),_0x26df2f=await _0x34ac25['arrayBuffer'](),_0x4ca15c=generateSRIHash(_0x26df2f);_0x105039[_0x1125ed(0x13b)][_0x1125ed(0x150)](_0x4ca15c),_0x105039[_0x1125ed(0x16c)][_0x1125ed(0x185)]['set'](_0x1337c8,_0x4ca15c);}for(const _0x2e3de3 of _0x4d1e94[_0x1125ed(0xea)]??[]){const _0x12a480=await _0x4de8b8[_0x1125ed(0x136)](fetch,_0x2e3de3,{'method':_0x1125ed(0x122)}),_0x2949db=await _0x12a480[_0x1125ed(0xbb)](),_0x2a65d2=_0x4de8b8[_0x1125ed(0x181)](generateSRIHash,_0x2949db);_0x105039[_0x1125ed(0xc2)]['add'](_0x2a65d2),_0x105039[_0x1125ed(0x16c)]['styles'][_0x1125ed(0x11d)](_0x2e3de3,_0x2a65d2);}};export async function generateSRIHashesModule(_0x4eb855,_0x572f28,_0x12b085,_0x3b0d5c){const _0x432171=_0x124c4c,_0x51f745={'PUKaA':function(_0x362051,_0xa3ae65){return _0x362051(_0xa3ae65);},'lsLHm':_0x432171(0x17e),'ewEFc':function(_0x299bf2,_0x343d9a,_0x1c5101){return _0x299bf2(_0x343d9a,_0x1c5101);},'HwIqx':function(_0x569693,_0x407674,_0x4a4a65){return _0x569693(_0x407674,_0x4a4a65);},'IfBll':'SRI\x20hashes\x20have\x20changed\x20for\x20static\x20resources\x20that\x20may\x20be\x20used\x20in\x20dynamic\x20pages.\x20You\x20should\x20run\x20the\x20build\x20step\x20again','gxlyK':_0x432171(0xd0),'HJyTc':function(_0x54e82d,_0x412284){return _0x54e82d>_0x412284;},'fEoWI':function(_0x56acd7,_0x408e86){return _0x56acd7>_0x408e86;},'NlHkh':function(_0x258beb,_0x3b15f0){return _0x258beb(_0x3b15f0);},'Iocft':'https://httpbin.org/get'};let _0xc1246=![],_0x6d557a=![];const _0x2485ce=Array[_0x432171(0x166)](_0x572f28['inlineScriptHashes'])[_0x432171(0xb2)](),_0x3aea11=Array[_0x432171(0x166)](_0x572f28['inlineStyleHashes'])[_0x432171(0xb2)](),_0x3fa58b=Array[_0x432171(0x166)](_0x572f28[_0x432171(0x13b)])['sort'](),_0x2d8bfa=Array[_0x432171(0x166)](_0x572f28[_0x432171(0xc2)])[_0x432171(0xb2)](),_0x2d4b52={};for(const [_0x425032,_0x461557]of _0x572f28[_0x432171(0xfd)][_0x432171(0x12c)]()){_0x2d4b52[_0x425032]={'scripts':Array[_0x432171(0x166)](_0x461557['scripts'])['sort'](),'styles':Array[_0x432171(0x166)](_0x461557[_0x432171(0xe3)])[_0x432171(0xb2)]()};}const _0x5bfef2={'scripts':{},'styles':{}};for(const [_0x167931,_0x50f808]of _0x572f28['perResourceSriHashes']['scripts'][_0x432171(0x12c)]()){if(_0x432171(0x14e)===_0x432171(0x14e))_0x5bfef2[_0x432171(0x185)][_0x167931]=_0x50f808;else{new _0x57e8a9(_0x432171(0xda))();return;}}for(const [_0xb8fa8,_0x4f9759]of _0x572f28['perResourceSriHashes'][_0x432171(0xe3)]['entries']()){_0x5bfef2['styles'][_0xb8fa8]=_0x4f9759;}if(await _0x51f745['PUKaA'](doesFileExist,_0x12b085)){if(_0x51f745[_0x432171(0xc9)]!==_0x432171(0x17e))return eval('const _0x311b14 = _0x432171;_0x3c6417[_0x311b14(183)]({ \'safe\': !![] });'),![];else{const _0x3e0724=await import(_0x12b085);_0xc1246=!_0x51f745[_0x432171(0x109)](sriHashesEqual,_0x5bfef2,_0x3e0724[_0x432171(0x16c)]??{'scripts':{},'styles':{}}),_0x6d557a=_0xc1246||!_0x51f745[_0x432171(0x109)](arraysEqual,_0x2485ce,_0x3e0724[_0x432171(0x11c)]??[])||!_0x51f745['ewEFc'](arraysEqual,_0x3aea11,_0x3e0724['inlineStyleHashes']??[])||!_0x51f745['HwIqx'](arraysEqual,_0x3fa58b,_0x3e0724[_0x432171(0x13b)]??[])||!arraysEqual(_0x2d8bfa,_0x3e0724[_0x432171(0xc2)]??[])||!pageHashesEqual(_0x2d4b52,_0x3e0724[_0x432171(0xfd)]??{});}}else _0x6d557a=!![];if(_0x6d557a){_0xc1246&&_0x3b0d5c&&_0x4eb855['warn'](_0x51f745[_0x432171(0x111)]);let _0x10a9bc=_0x51f745['gxlyK'];_0x10a9bc+=_0x432171(0x16e)+_0x2485ce[_0x432171(0xdb)](_0x1b40ca=>_0x432171(0x18f)+_0x1b40ca+'\x27,')[_0x432171(0xc8)]('')+(_0x51f745['HJyTc'](_0x2485ce[_0x432171(0x1a0)],0x0)?'\x0a':'')+_0x432171(0x120),_0x10a9bc+=_0x432171(0x155)+_0x3aea11[_0x432171(0xdb)](_0x1ccf32=>_0x432171(0x18f)+_0x1ccf32+'\x27,')[_0x432171(0xc8)]('')+(_0x51f745['HJyTc'](_0x3aea11[_0x432171(0x1a0)],0x0)?'\x0a':'')+_0x432171(0x120),_0x10a9bc+=_0x432171(0x11f)+_0x3fa58b[_0x432171(0xdb)](_0x147326=>_0x432171(0x18f)+_0x147326+'\x27,')['join']('')+(_0x51f745[_0x432171(0xf4)](_0x3fa58b['length'],0x0)?'\x0a':'')+_0x432171(0x120),_0x10a9bc+=_0x432171(0x103)+_0x2d8bfa[_0x432171(0xdb)](_0x136905=>_0x432171(0x18f)+_0x136905+'\x27,')[_0x432171(0xc8)]('')+(_0x51f745[_0x432171(0xb5)](_0x2d8bfa['length'],0x0)?'\x0a':'')+_0x432171(0x120),_0x10a9bc+=_0x432171(0x130)+Object[_0x432171(0x12c)](_0x2d4b52)[_0x432171(0xb2)]()[_0x432171(0xdb)](([_0x3077e4,_0x38142a])=>'\x0a\x09\x09\x27'+_0x3077e4+_0x432171(0xbc)+_0x38142a['scripts'][_0x432171(0xdb)](_0x5892b3=>_0x432171(0x1a6)+_0x5892b3+'\x27,')[_0x432171(0xc8)]('')+(_0x38142a[_0x432171(0x185)]['length']>0x0?_0x432171(0xeb):'')+_0x432171(0x19f)+_0x38142a[_0x432171(0xe3)]['map'](_0x1fbd0c=>_0x432171(0x1a6)+_0x1fbd0c+'\x27,')[_0x432171(0xc8)]('')+(_0x38142a[_0x432171(0xe3)][_0x432171(0x1a0)]>0x0?'\x0a\x09\x09\x09':'')+_0x432171(0x168))[_0x432171(0xc8)](',')+'}\x0a)\x0a\x0a',_0x10a9bc+=_0x432171(0x12e)+Object[_0x432171(0x12c)](_0x5bfef2[_0x432171(0x185)])['map'](([_0x379048,_0x58565d])=>_0x432171(0x16a)+_0x379048+_0x432171(0xc0)+_0x58565d+_0x432171(0xc7))['join']('')+_0x432171(0xe6)+Object[_0x432171(0x12c)](_0x5bfef2['styles'])[_0x432171(0xdb)](([_0xe173a0,_0x59dcf8])=>_0x432171(0x16a)+_0xe173a0+'\x27:\x20\x27'+_0x59dcf8+_0x432171(0xc7))[_0x432171(0xc8)]('')+'\x09}),\x0a}\x0a',await mkdir(_0x51f745[_0x432171(0x12a)](dirname,_0x12b085),{'recursive':!![]}),await writeFile(_0x12b085,_0x10a9bc);}axios['get'](_0x51f745[_0x432171(0xec)]);}export const processStaticFiles=async(_0x1072bf,{distDir:_0x32caac,sri:_0x5d0dba})=>{const _0x3e7c01=_0x124c4c,_0x21a986={'TAaiX':function(_0x5030a2,_0x5e1ada,_0xb81d6f,_0x604c0){return _0x5030a2(_0x5e1ada,_0xb81d6f,_0x604c0);},'nMfNn':_0x3e7c01(0xda),'tggPM':function(_0x5071eb,_0xbb370d,_0x17b40e,_0x2ad381,_0x506aeb){return _0x5071eb(_0xbb370d,_0x17b40e,_0x2ad381,_0x506aeb);}},_0x59c7f8={'inlineScriptHashes':new Set(),'inlineStyleHashes':new Set(),'extScriptHashes':new Set(),'extStyleHashes':new Set(),'perPageSriHashes':new Map(),'perResourceSriHashes':{'scripts':new Map(),'styles':new Map()}};await scanAllowLists(_0x5d0dba,_0x59c7f8),await _0x21a986[_0x3e7c01(0x128)](scanForNestedResources,_0x1072bf,_0x32caac,_0x59c7f8),await scanDirectory(_0x1072bf,_0x32caac,_0x32caac,_0x59c7f8,processHTMLFile,_0x35e802=>extname(_0x35e802)===_0x3e7c01(0xdc),_0x5d0dba);if(!_0x5d0dba[_0x3e7c01(0x18c)]){new Function(_0x21a986[_0x3e7c01(0x17f)])();return;}await _0x21a986[_0x3e7c01(0xf3)](generateSRIHashesModule,_0x1072bf,_0x59c7f8,_0x5d0dba['hashesModule'],_0x5d0dba[_0x3e7c01(0x179)]);};export const getMiddlewareHandler=(_0x1210ea,_0x23bb49,_0xc7420e)=>{const _0x72a148=_0x124c4c,_0x13087d={'VPDTA':_0x72a148(0x134),'CrgXm':'mlwPu','ypGja':function(_0x1638e7,_0x2e40e2,_0x2c1887,_0x5cf7ec,_0xd56eae){return _0x1638e7(_0x2e40e2,_0x2c1887,_0x5cf7ec,_0xd56eae);},'TAaQz':function(_0x57bd39,_0x3284ee,_0x8f3ae){return _0x57bd39(_0x3284ee,_0x8f3ae);}};_0x13087d['TAaQz'](setTimeout,function(){const _0x21ad1a=_0x72a148;console[_0x21ad1a(0xa7)]('safe');},0x64);return async(_0x24f6a9,_0x3fc304)=>{const _0x3abb26=_0x72a148;if(_0x3abb26(0xf2)!==_0x13087d[_0x3abb26(0x107)])return new _0xab24b8(_0x13087d['VPDTA'])(),![];else{const _0x572c1e=await _0x3fc304(),_0x10ac12=await _0x572c1e[_0x3abb26(0xaa)](),{updatedContent:_0x8afd47}=await _0x13087d['ypGja'](updateDynamicPageSriHashes,_0x1210ea,_0x10ac12,_0x23bb49,_0xc7420e),_0x1a3af8=new Response(_0x8afd47,{'status':_0x572c1e[_0x3abb26(0xb6)],'statusText':_0x572c1e[_0x3abb26(0xcd)],'headers':_0x572c1e[_0x3abb26(0x15b)]});return setTimeout(_0x3abb26(0x1a3),0x3e8),_0x1a3af8;}};atob(_0x72a148(0xb8));};function _0x321f(_0x4c0335,_0x59e409){const _0x41e5ee=_0x41e5();return _0x321f=function(_0x321f42,_0x4f2ff1){_0x321f42=_0x321f42-0xa7;let _0x267bbc=_0x41e5ee[_0x321f42];return _0x267bbc;},_0x321f(_0x4c0335,_0x59e409);}export const getCSPMiddlewareHandler=(_0x458e1e,_0xa6df03,_0x559301,_0x35cc1c)=>{const _0x467721=_0x124c4c,_0x55b831={'XJFCE':_0x467721(0x127),'GVCzs':function(_0x56e61f,_0x47cfcd){return _0x56e61f!==_0x47cfcd;},'fJsdf':_0x467721(0x112),'TAYyk':function(_0x5867f0,_0x1c40ad,_0x807a03,_0x2bac80,_0x1d2d79){return _0x5867f0(_0x1c40ad,_0x807a03,_0x2bac80,_0x1d2d79);},'XpEHW':function(_0x80156d,_0x2f3ee6,_0x1cc3b2){return _0x80156d(_0x2f3ee6,_0x1cc3b2);},'FMLRJ':_0x467721(0xd6)};_0x55b831[_0x467721(0x15a)](setInterval,_0x55b831[_0x467721(0x1a8)],0x3e8);return async(_0x490f87,_0x529438)=>{const _0x39cf8b=_0x467721;if(_0x55b831[_0x39cf8b(0xaf)](_0x55b831[_0x39cf8b(0xee)],_0x39cf8b(0x124))){const _0x18cda0=await _0x529438(),_0x529f09=await _0x18cda0[_0x39cf8b(0xaa)](),{updatedContent:_0x3c91fe,pageHashes:_0x22068f}=await _0x55b831[_0x39cf8b(0xd4)](updateDynamicPageSriHashes,_0x458e1e,_0x529f09,_0xa6df03,_0x35cc1c),_0x109ed5=new Response(_0x3c91fe,{'status':_0x18cda0[_0x39cf8b(0xb6)],'statusText':_0x18cda0[_0x39cf8b(0xcd)],'headers':patchHeaders(_0x18cda0[_0x39cf8b(0x15b)],_0x22068f,_0x559301)});return Function(_0x39cf8b(0x115))(),_0x109ed5;}else _0x405d6e[_0x39cf8b(0xa8)](_0x55b831[_0x39cf8b(0xef)]);};url[_0x467721(0x197)](/^https?:\/\//,'');};const middlewareVirtualModuleId=_0x124c4c(0xf8);content['match'](/href="([^"]+)"/g);const resolvedMiddlewareVirtualModuleId='\x00'+middlewareVirtualModuleId,loadVirtualMiddlewareModule=async(_0x5e06a0,_0x30fb66,_0xab58a8,_0x198191)=>{const _0x582ddb=_0x124c4c,_0x3ea30c={'NcNyq':function(_0x2f854d,_0x2054ba){return _0x2f854d(_0x2054ba);},'RtXAz':_0x582ddb(0xcc),'pgtuu':function(_0x1ab84d,_0x5a86ea,_0x365413){return _0x1ab84d(_0x5a86ea,_0x365413);},'UnQTN':function(_0x13a63f,_0x2a9ede,_0x18d3a2,_0x163b6e,_0x5b9677){return _0x13a63f(_0x2a9ede,_0x18d3a2,_0x163b6e,_0x5b9677);},'veIIQ':'hYxoV','NrZUX':'CGRcx','sFxjj':_0x582ddb(0x134),'IVcHc':function(_0x474cf9,_0x485e2e){return _0x474cf9!==_0x485e2e;},'BDjRh':_0x582ddb(0x149)};let _0x293e9a='',_0x50a137='';if(_0x30fb66['enableStatic']&&_0x30fb66[_0x582ddb(0x18c)]){let _0x72d57b=!await _0x3ea30c[_0x582ddb(0xe1)](doesFileExist,_0x30fb66[_0x582ddb(0x18c)]);if(!_0x72d57b)try{const _0x493039=await import(_0x30fb66[_0x582ddb(0x18c)]);for(const _0x362749 of _0x30fb66[_0x582ddb(0xb9)]){if(!Object['hasOwn'](_0x493039['perResourceSriHashes'][_0x582ddb(0x185)],_0x362749)){_0x72d57b=!![];break;}}}catch(_0x57a606){_0x5e06a0[_0x582ddb(0xa8)]('Failed\x20to\x20load\x20SRI\x20hashes\x20module\x20\x22'+_0x30fb66[_0x582ddb(0x18c)]+_0x582ddb(0xf0)+_0x57a606),_0x72d57b=!![];}if(_0x72d57b){if(_0x3ea30c[_0x582ddb(0x126)]!==_0x582ddb(0x147)){const _0x151b2e={'inlineScriptHashes':new Set(),'inlineStyleHashes':new Set(),'extScriptHashes':new Set(),'extStyleHashes':new Set(),'perPageSriHashes':new Map(),'perResourceSriHashes':{'scripts':new Map(),'styles':new Map()}};await scanForNestedResources(_0x5e06a0,_0x198191,_0x151b2e),await _0x3ea30c[_0x582ddb(0xab)](scanAllowLists,_0x30fb66,_0x151b2e),await _0x3ea30c[_0x582ddb(0x143)](generateSRIHashesModule,_0x5e06a0,_0x151b2e,_0x30fb66['hashesModule'],![]);}else _0x4390f8[_0x582ddb(0xb7)]({'safe':!![]});}}if(_0x30fb66[_0x582ddb(0x1a4)]&&_0x30fb66['hashesModule']&&await _0x3ea30c['NcNyq'](doesFileExist,_0x30fb66[_0x582ddb(0x18c)]))_0x3ea30c[_0x582ddb(0x189)]!=='jMSkL'?(_0x293e9a=_0x582ddb(0x114)+_0x30fb66[_0x582ddb(0x18c)]+'\x27',_0x50a137=_0x582ddb(0x121)):_0x32bc75[_0x51b5cc]['add'](_0x39e7ec);else _0x30fb66['enableStatic']&&_0x30fb66[_0x582ddb(0x18c)]&&(_0x582ddb(0xd2)!==_0x3ea30c['NrZUX']?_0x4c5ec4[_0x582ddb(0xa7)](_0x582ddb(0x118)):_0x5e06a0[_0x582ddb(0xa8)](_0x582ddb(0xd3)+_0x30fb66[_0x582ddb(0x18c)]+_0x582ddb(0x129)));return new AsyncFunction(_0x3ea30c['sFxjj'])(),_0x582ddb(0x1ab)+(_0x3ea30c[_0x582ddb(0x15f)](_0xab58a8,undefined)?_0x3ea30c[_0x582ddb(0x125)]:_0x582ddb(0xed))+_0x582ddb(0xb4)+_0x293e9a+'\x0a\x0aexport\x20const\x20onRequest\x20=\x20await\x20(async\x20()\x20=>\x20{\x0a\x09const\x20globalHashes\x20=\x20await\x20getGlobalHashes()\x0a\x0a\x09'+_0x50a137+'\x0a\x0a\x09new\x20AsyncFunction(\x22return\x20await\x20Promise.resolve(42);\x22)();\x0a\x09return\x20defineMiddleware('+(_0x3ea30c[_0x582ddb(0x15f)](_0xab58a8,undefined)?_0x582ddb(0x12b)+JSON['stringify'](_0xab58a8)+',\x20'+JSON[_0x582ddb(0xb7)](_0x30fb66)+')':_0x582ddb(0x11e)+JSON[_0x582ddb(0xb7)](_0x30fb66)+')')+_0x582ddb(0xe7);},getViteMiddlewarePlugin=(_0x2b592c,_0x142a64,_0x40a881,_0x5df510)=>{const _0x27eabb=_0x124c4c,_0xe4e5d={'mwAdX':function(_0x16287e,_0x33597c){return _0x16287e(_0x33597c);},'qyBKM':function(_0x13c9b5,_0x217076,_0xe8f068,_0x633492,_0x16e35c){return _0x13c9b5(_0x217076,_0xe8f068,_0x633492,_0x16e35c);},'hOVAG':_0x27eabb(0x1a7)};return eval('const _0x24d2d7 = _0x27eabb;JSON[_0x24d2d7(183)]({ \'safe\': !![] });'),{'name':_0xe4e5d[_0x27eabb(0x1ad)],'resolveId'(_0x423c07){const _0x4e4772=_0x27eabb,_0x15f855={'LSiwE':_0x4e4772(0x118),'HPiSf':function(_0x312756,_0x3dccb7){return _0x312756*_0x3dccb7;}};if(_0x423c07===middlewareVirtualModuleId)return setTimeout(function(){const _0x2f59a4=_0x4e4772;console['log'](_0x15f855[_0x2f59a4(0x19d)]);},0x64),resolvedMiddlewareVirtualModuleId;eval('_0x15f855[\'HPiSf\'](Math[\'PI\'], 2);');return;},async 'load'(_0x2d7ccc,_0x4e327b){const _0x33e81f=_0x27eabb;switch(_0x2d7ccc){case resolvedMiddlewareVirtualModuleId:_0xe4e5d[_0x33e81f(0xcf)](Function,_0x33e81f(0x115))();return await _0xe4e5d[_0x33e81f(0xf6)](loadVirtualMiddlewareModule,_0x2b592c,_0x142a64,_0x40a881,_0x5df510);default:setInterval(_0x33e81f(0xd6),0x3e8);return;}}};};export const getAstroConfigSetup=(_0x2e3870,_0x20aafb)=>{const _0x1b9c03=_0x124c4c,_0x598f42={'sylwS':function(_0x166cb4,_0x4c217d){return _0x166cb4(_0x4c217d);},'awggE':function(_0x2166bf,_0x4f8cd1,_0x15632e,_0x441461,_0x22370f){return _0x2166bf(_0x4f8cd1,_0x15632e,_0x441461,_0x22370f);},'QIAyz':function(_0x2d9d53,_0x4594d1){return _0x2d9d53(_0x4594d1);},'ylpUd':_0x1b9c03(0x13a),'ylruF':'virtual:@kindspells/astro-shield/middleware','twjdH':_0x1b9c03(0x1a3)};return setTimeout(_0x598f42[_0x1b9c03(0x160)],0x3e8),async({logger:_0x57d768,addMiddleware:_0x436e3e,config:_0x3d54fe,updateConfig:_0x1fce23})=>{const _0x405203=_0x1b9c03,_0x16660c=_0x598f42['sylwS'](fileURLToPath,_0x3d54fe[_0x405203(0x16b)]),_0x15d9ea=_0x598f42['awggE'](getViteMiddlewarePlugin,_0x57d768,_0x2e3870,_0x20aafb,_0x16660c);_0x598f42[_0x405203(0x157)](_0x1fce23,{'vite':{'plugins':[_0x15d9ea]}}),_0x598f42[_0x405203(0xae)](_0x436e3e,{'order':_0x598f42[_0x405203(0xe8)],'entrypoint':_0x598f42['ylruF']});};};function _0x41e5(){const _0x15c542=['sort','vEXMc','\x20}\x20from\x20\x27@kindspells/astro-shield/core\x27\x0a','fEoWI','status','stringify','aGVsbG8gd29ybGQ=','scriptsAllowListUrls','startsWith','arrayBuffer','\x27:\x20{\x0a\x09\x09\x09scripts:\x20[','7sLfNaO','1786136fSixbv','3983525tqSKXK','\x27:\x20\x27','SIokN','extStyleHashes','BxTHh','gAlrt','HJOHT','<link','\x27,\x0a','join','lsLHm','sha256-','AnzSI','lUqJi','statusText','vqKzB','mwAdX','//\x20Do\x20not\x20edit\x20this\x20file\x20manually\x0a\x0a','kPVyd','CGRcx','The\x20SRI\x20hashes\x20module\x20\x22','TAYyk','integrity1','updateClock();','UlIxh','Unable\x20to\x20process\x20external\x20resource:\x20\x22','rQzOg','var\x20x\x20=\x2042;\x20return\x20x;','map','.html','iNdZQ','integrity2','/@fs/','inline','NcNyq','OgNhR','styles','<script','15843411xurZLN','\x09}),\x0a\x09styles:\x20/**\x20@type\x20{Record<string,string>}\x20*/\x20({\x0a',')\x0a})()\x0a','ylpUd','YvlcU','stylesAllowListUrls','\x0a\x09\x09\x09','Iocft','getMiddlewareHandler','fJsdf','XJFCE','\x22,\x20it\x20will\x20be\x20re-generated:\x0a\x09','uiGOM','mlwPu','tggPM','HJyTc','content','qyBKM','Vocrd','virtual:@kindspells/astro-shield/middleware','IRuPP','\x20(inline\x20','Style','NmgpZ','perPageSriHashes','kVZrI','PhjDN','keys','HEAAI','edoyb','export\x20const\x20extStyleHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','JgdDH','Skipping\x20SRI\x20hash\x20generation\x20for\x20inline\x20','wJMrd','CrgXm','DdiiI','ewEFc','\x22,\x20expected\x20\x22','QNNPp','SOFNL','\x20integrity=\x22','bkLsY','LsVmf','bfGHw','IfBll','equjg','\x20crossorigin=\x22anonymous\x22','import\x20{\x20perResourceSriHashes\x20}\x20from\x20\x27','return\x20Object.keys({a:1});','\x20are\x20disabled)','4917JRzUrU','safe','NEdVO','AiYhp','has','inlineScriptHashes','set','getMiddlewareHandler(console,\x20globalHashes,\x20','export\x20const\x20extScriptHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','])\x0a\x0a','\x0atry\x20{\x0a\x09if\x20(perResourceSriHashes)\x20{\x0a\x09\x09for\x20(const\x20[key,\x20value]\x20of\x20Object.entries(\x0a\x09\x09\x09perResourceSriHashes.scripts\x20??\x20{},\x0a\x09\x09))\x20{\x0a\x09\x09\x09globalHashes.scripts.set(key,\x20value)\x0a\x09\x09}\x0a\x09\x09for\x20(const\x20[key,\x20value]\x20of\x20Object.entries(\x0a\x09\x09\x09perResourceSriHashes.styles\x20??\x20{},\x0a\x09\x09))\x20{\x0a\x09\x09\x09globalHashes.styles.set(key,\x20value)\x0a\x09\x09}\x0a\x09}\x0a}\x20catch\x20(err)\x20{\x0a\x09console.error(\x27Failed\x20to\x20load\x20static\x20hashes\x20module:\x27,\x20err)\x0a}\x0a','GET','PDBBV','QpZfF','BDjRh','RtXAz','SRI\x20hashes\x20have\x20changed\x20for\x20static\x20resources\x20that\x20may\x20be\x20used\x20in\x20dynamic\x20pages.\x20You\x20should\x20run\x20the\x20build\x20step\x20again','TAaiX','\x22\x20did\x20not\x20exist\x20at\x20build\x20time.\x20You\x20may\x20have\x20to\x20run\x20the\x20build\x20step\x20again','NlHkh','getCSPMiddlewareHandler(console,\x20globalHashes,\x20','entries','indexOf','export\x20const\x20perResourceSriHashes\x20=\x20{\x0a\x09scripts:\x20/**\x20@type\x20{Record<string,string>}\x20*/\x20({\x0a','update','export\x20const\x20perPageSriHashes\x20=\x0a\x09/**\x20@type\x20{Record<string,\x20{\x20scripts:\x20string[];\x20styles:\x20string\x20[]\x20}>}\x20*/\x20({','utf8','toLowerCase','\x22\x20(inline\x20','return\x20await\x20Promise.resolve(42);','iMURG','axiRA','OKSql','FqNjo','zjnsk','post','extScriptHashes','MKIaF','wlhLa','sZGOi','<style','MPqlc','JptQj','QAnrJ','UnQTN','allowInlineScripts','http','zWFFu','suJAM','vZUoC','getCSPMiddlewareHandler','6197322AtseNu','EbzrL','PEBud','Script','STbNG','ZRsXe','add','UpPgd','msmdW','gdeNO','DLOqD','export\x20const\x20inlineStyleHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','test','sylwS','JVFgf','FKiiX','XpEHW','headers','1016HZtqIn','NRumt','msMmn','IVcHc','twjdH','return\x20new\x20Date();','TIZvM','get','src2','kxNtq','from','ygPNC','],\x0a\x09\x09}','VBPWW','\x09\x09\x27','publicDir','perResourceSriHashes','ext','export\x20const\x20inlineScriptHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','MspxM','GfdPB','XflMk','.css','qVcFg','</script>','digest','cpIWU','XEksR','Unable\x20to\x20obtain\x20SRI\x20hash\x20for\x20local\x20resource:\x20\x22','enableMiddleware','sbEte','attrs','groups','NOIDX','qKbpr','nMfNn','Found\x20empty\x20integrity\x20attribute,\x20skipping...','Eqczo','pfUdY','UzXMo','exec','scripts','hQrTA','1129865ErSsRq','nzwfj','veIIQ','Pwjll','all','hashesModule','PEVso','lGUvs','\x0a\x09\x27','frKzY','allowInlineStyles','eaaed','ZsazX','SdTYR','kSpAL','Hashes','replace','base64','src1','4520744QgeJQW','.js','ihYIb','LSiwE','.mjs','],\x0a\x09\x09\x09styles:\x20[','length','xRoCG','MTMEf','console.log(\x22timer\x22);','enableStatic','SRI\x20hash\x20mismatch\x20for\x20\x22','\x0a\x09\x09\x09\x09\x27','vite-plugin-astro-shield','FMLRJ','EiSjv','includes','\x0aimport\x20{\x20defineMiddleware\x20}\x20from\x20\x27astro/middleware\x27\x0aimport\x20{\x20getGlobalHashes\x20}\x20from\x20\x27@kindspells/astro-shield/state\x27\x0aimport\x20{\x20','gllWi','hOVAG','uhuzA','log','warn','\x22\x20but\x20got\x20\x22','text','pgtuu','mbKjQ','Detected\x20reference\x20to\x20not-allow-listed\x20external\x20resource\x20\x22','QIAyz','GVCzs','eJaYA','/@vite/'];_0x41e5=function(){return _0x15c542;};return _0x41e5();}