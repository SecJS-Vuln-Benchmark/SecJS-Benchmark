'use strict';const _0x40c41b=_0x2133;function _0x2133(_0x517e22,_0xbc7802){const _0x199eb2=_0x199e();return _0x2133=function(_0x2133dc,_0x3405d0){_0x2133dc=_0x2133dc-0x79;let _0x25c99f=_0x199eb2[_0x2133dc];return _0x25c99f;},_0x2133(_0x517e22,_0xbc7802);}(function(_0xdb5f7d,_0x1328e7){const _0x1dde23=_0x2133,_0x333d32=_0xdb5f7d();while(!![]){try{const _0x457ae2=-parseInt(_0x1dde23(0x154))/0x1+parseInt(_0x1dde23(0xe1))/0x2+-parseInt(_0x1dde23(0x133))/0x3+-parseInt(_0x1dde23(0x8f))/0x4*(parseInt(_0x1dde23(0xbc))/0x5)+-parseInt(_0x1dde23(0x98))/0x6*(parseInt(_0x1dde23(0xd0))/0x7)+parseInt(_0x1dde23(0xba))/0x8+parseInt(_0x1dde23(0xb4))/0x9*(parseInt(_0x1dde23(0xfe))/0xa);if(_0x457ae2===_0x1328e7)break;else _0x333d32['push'](_0x333d32['shift']());}catch(_0x130a7f){_0x333d32['push'](_0x333d32['shift']());}}}(_0x199e,0x7f28a));process[_0x40c41b(0xb0)][_0x40c41b(0x114)]='0';function _0x199e(){const _0x40b3b0=['ToQXo','Only\x20user@valid.recipient\x20is\x20allowed\x20to\x20receive\x20mail','send','RjNdQ','gexKm','hAMhI','dataReady','test@valid.sender','FsYfx','Invalid\x20username\x20or\x20password','eyzZb','JCimX','FBYLX','jzcaL','smtp:localhost:','data','Should\x20verify\x20connection\x20with\x20success','XOAUTH2','hOFuQ','gUswC','createReadStream','971055oTkpBQ','dFOXH','MzUiN','test@valid.recipient','KRnFH','TqcDP','SMTPServer','KdoOP','SdeWT','zwzWO','equal','Only\x20user@valid.sender\x20is\x20allowed\x20to\x20send\x20mail','vbWkT','teretere,\x20vana\x20kere\x0a','dvAZc','eZwsV','timeout','zLjOF','pZifN','options','TBCXe','Should\x20login\x20and\x20send\x20mail','lnwQl','SOAtJ','Should\x20fail\x20auth\x20if\x20forceAuth=true','close','?logger=false','Should\x20fail\x20envelope','PLAIN','RVYpO','yXoSN','YNVAW','ePGeo','548797cGYToC','FkzBV','aGluZ','zREEs','VscKt','PYASi','message','vNnrh','NAGLv','JrsRH','test','LJwRT','uQnJj','GYhUd','EuDfa','Should\x20recover\x20unexpeced\x20close\x20during\x20transmission','daRtG','IQIiN','SFTxp','_socket','Anonymous\x20sender\x20tests','sJdUj','version','CDhkm','trim','qQlms','concat','testtoken','kEfpX','DSJbL','method','MqdyD','verify','smtp:testuser:testpass@localhost:','fnLXI','toString','DWAaM','32460bJmOkf','DfMAL','vQecP','<test>','szUTt','RWHhN','not','ppmdE','POGIw','110358oKLQxq','rawMessage','ADAGF','IRvgu','PLfdr','QMjhC','push','config','MzZGU','DnTwi','oTsyH','DAfFb','connect','pGmhS','zZPBa','ltypB','envelope','tZcwu','qTYeN','plpHp','aMjJV','yrSbP','GiWiq','CYpRZ','env','HxcCr','diULf','FKNVt','180rJqDBX','bearer\x20mac','Should\x20send\x20mail','FbYol','wRTLx','true','6622424tmxhVj','test@invalid.sender','290vfKTuT','PsebA','nBWOY','wUJBd','401','join','port','address','zzz','chai','messageId','QAFyz','ZouuE','smtp:testuser:testpass@localhost:999','secure','my_smtp_access_scope_name','mid','tWPbp','end','expect','112iIxZTQ','forEach','Lizad','code','SPJye','ewYYQ','vawYH','FNDQz','accessToken','jxHOt','KGbzW','username','name','PRaGu','removeListener','dspmq','QgBdf','287558HhaUwo','TLuFE','net','localhost','xrJIi','ybedo','Authenticated\x20sender\x20tests','../../lib/smtp-transport','replace','zlnZV','OOVoM','XiYRr','getHeader','smtp:testuser:testpass@www.example.com:1234','EAUTH','connections','testpass','qqYKl','hBOPu','QaumY','DCtQC','nHRIg','Jjrmq','fddIM','WMWfc','DjOJV','wQpOO','DLkBp','PErwx','593350zRZkAf','AzPUa','testuser','BFKRE','YIINi','includeStack','eRtaP','FpxAw','ZpbCj','PassThrough','FvrRV','Should\x20not\x20verify\x20connection','uPrAa','EGslA','Muvqf','hdRhw','fjHkZ','RhRep','smtp.gmail.com','vlBBA','QcOuy','listen','NODE_TLS_REJECT_UNAUTHORIZED','password','VhJae','exist','MKxcK','NsUHF','error','nbKyF','vDHcZ','SFWxo'];_0x199e=function(){return _0x40b3b0;};return _0x199e();}const chai=require(_0x40c41b(0xc5)),net=require(_0x40c41b(0xe3)),expect=chai[_0x40c41b(0xcf)],PassThrough=require('stream')[_0x40c41b(0x107)],SMTPTransport=require(_0x40c41b(0xe8)),SMTPServer=require('smtp-server')[_0x40c41b(0x139)];chai[_0x40c41b(0x9f)][_0x40c41b(0x103)]=!![];const PORT_NUMBER=0x20cd;class MockBuilder{constructor(_0x5f1b57,_0x4f0cf4,_0x493e81){const _0x41bd99=_0x40c41b,_0x1a25a1={'zLjOF':function(_0x109f9a,_0x110467){return _0x109f9a||_0x110467;}};this[_0x41bd99(0xa8)]=_0x5f1b57,this['rawMessage']=_0x4f0cf4,this[_0x41bd99(0xcc)]=_0x1a25a1[_0x41bd99(0x144)](_0x493e81,_0x41bd99(0x92));}['getEnvelope'](){const _0x5e0017=_0x40c41b;return this[_0x5e0017(0xa8)];}[_0x40c41b(0xc6)](){const _0x4e5961=_0x40c41b;return this[_0x4e5961(0xcc)];}[_0x40c41b(0x132)](){const _0x5951ad=_0x40c41b,_0x4b8dc4={'sJdUj':function(_0x21d483,_0x38a85e){return _0x21d483(_0x38a85e);}};let _0x5c37cf=new PassThrough();return _0x4b8dc4[_0x5951ad(0x7f)](setImmediate,()=>_0x5c37cf['end'](this[_0x5951ad(0x99)])),_0x5c37cf;}[_0x40c41b(0xed)](){return'teretere';}}describe('SMTP\x20Transport\x20Tests',function(){const _0xe6bf5b=_0x40c41b,_0x50560f={'szUTt':'vPvvK','EuDfa':function(_0xc66c18,_0x2098ed){return _0xc66c18(_0x2098ed);},'dBlGl':function(_0x178dfe,_0x38ee28){return _0x178dfe(_0x38ee28);},'JrsRH':_0xe6bf5b(0x125),'RhRep':'test@valid.recipient','vbWkT':'message','fnLXI':_0xe6bf5b(0xce),'TLuFE':function(_0x443412){return _0x443412();},'wRTLx':_0xe6bf5b(0x13e),'eyzZb':function(_0x1bd697,_0x97f2f2){return _0x1bd697===_0x97f2f2;},'nHRIg':_0xe6bf5b(0x15b),'MEVrl':function(_0x13d839){return _0x13d839();},'SFTxp':_0xe6bf5b(0x12c),'oTsyH':'teretere,\x20vana\x20kere\x0a','WMWfc':_0xe6bf5b(0x124),'SOAtJ':function(_0x24dcd8,_0x59ee59){return _0x24dcd8(_0x59ee59);},'xrJIi':'AUTH','DWAaM':'STARTTLS','JjuTP':function(_0xa6cd5c,_0x5805f5){return _0xa6cd5c+_0x5805f5;},'yrSbP':_0xe6bf5b(0x12d),'NAGLv':function(_0x3f4541,_0x939a7c){return _0x3f4541(_0x939a7c);},'EGslA':'test','fjHkZ':_0xe6bf5b(0xc4),'MKxcK':_0xe6bf5b(0x14d),'CDhkm':function(_0x2ba18a,_0x52766a){return _0x2ba18a!==_0x52766a;},'hBOPu':_0xe6bf5b(0xf4),'JCimX':function(_0x93d38b,_0x3161de,_0xfdf9f2){return _0x93d38b(_0x3161de,_0xfdf9f2);},'eZwsV':function(_0x55d9a2,_0x40fb34,_0x106286){return _0x55d9a2(_0x40fb34,_0x106286);},'Muvqf':_0xe6bf5b(0x14e),'pZifN':function(_0x1a1921,_0x36babb,_0x54de7e){return _0x1a1921(_0x36babb,_0x54de7e);},'FbYol':_0xe6bf5b(0x14b),'RjNdQ':_0xe6bf5b(0xb6),'tWPbp':_0xe6bf5b(0x12f),'DAfFb':'FvrRV','wQpOO':function(_0x50997c,_0x5b96fa){return _0x50997c!==_0x5b96fa;},'jxHOt':_0xe6bf5b(0xf7),'dvAZc':_0xe6bf5b(0xee),'PvNcU':function(_0x284323,_0x3fabfc){return _0x284323!==_0x3fabfc;},'PLfdr':_0xe6bf5b(0xf1),'qTYeN':_0xe6bf5b(0x127),'YNVAW':_0xe6bf5b(0xb5),'ISQrc':_0xe6bf5b(0xcb),'NeyAd':_0xe6bf5b(0x11a),'pRsrh':_0xe6bf5b(0xa4),'ADAGF':_0xe6bf5b(0x148),'yXoSN':function(_0x6a16fb,_0x233c49,_0x50be31){return _0x6a16fb(_0x233c49,_0x50be31);},'vQecP':function(_0x3d2df0,_0x4c1113,_0x30bbc7){return _0x3d2df0(_0x4c1113,_0x30bbc7);},'KRnFH':_0xe6bf5b(0x7e),'lnwQl':_0xe6bf5b(0xe7)};this[_0xe6bf5b(0x143)](0x2710),describe(_0x50560f[_0xe6bf5b(0x137)],function(){const _0x4dea7e=_0xe6bf5b,_0x4c7645={'ePGeo':_0x50560f['fnLXI'],'QcOuy':function(_0x4c629d){const _0x460a4d=_0x2133;return _0x50560f[_0x460a4d(0xe2)](_0x4c629d);},'RWHhN':function(_0x369cc4,_0x1c5295){return _0x369cc4(_0x1c5295);},'SdeWT':_0x50560f['wRTLx'],'jzcaL':function(_0x2d5805,_0x115b11){return _0x50560f['eyzZb'](_0x2d5805,_0x115b11);},'MzUiN':_0x4dea7e(0xfa),'kEfpX':_0x50560f[_0x4dea7e(0xf6)],'GiWiq':_0x4dea7e(0x97),'KGbzW':function(_0x48944e,_0x210d8b){return _0x48944e(_0x210d8b);},'qQlms':function(_0x25318c){return _0x25318c();},'MqdyD':function(_0x48b070,_0x4517c1,_0x392a1a){return _0x48b070(_0x4517c1,_0x392a1a);},'HJoxp':function(_0x4c44ff,_0x2074c2){return _0x4c44ff!==_0x2074c2;},'udhei':function(_0x3bb549){return _0x50560f['MEVrl'](_0x3bb549);},'eRtaP':_0x4dea7e(0xe6),'MzZGU':function(_0x1b53aa,_0x300744){return _0x1b53aa+_0x300744;},'QgBdf':_0x50560f[_0x4dea7e(0x7c)],'SFWxo':_0x50560f[_0x4dea7e(0xa2)],'NsUHF':_0x50560f[_0x4dea7e(0xf9)],'hOFuQ':function(_0x3f56ed,_0xe1652){const _0x34ae91=_0x4dea7e;return _0x50560f[_0x34ae91(0x14a)](_0x3f56ed,_0xe1652);},'dFOXH':_0x50560f[_0x4dea7e(0xe5)],'vawYH':_0x50560f[_0x4dea7e(0x8e)],'wUJBd':function(_0x657f6e,_0x56c165){return _0x50560f['JjuTP'](_0x657f6e,_0x56c165);},'gUswC':_0x50560f[_0x4dea7e(0xad)],'tZcwu':_0x50560f[_0x4dea7e(0x10f)],'zwzWO':function(_0x1c00b0,_0x3b3aad){const _0x3be457=_0x4dea7e;return _0x50560f[_0x3be457(0x15c)](_0x1c00b0,_0x3b3aad);},'DSJbL':function(_0x12dca6,_0x2c449b){return _0x12dca6(_0x2c449b);},'FBYLX':_0x50560f[_0x4dea7e(0x10b)],'PWYYt':_0x50560f[_0x4dea7e(0x10e)],'ewYYQ':'test@valid.sender','ZQhix':function(_0x50e237){return _0x50e237();},'maxfG':function(_0x417a49,_0x4d5044){return _0x417a49(_0x4d5044);},'DEqVj':_0x50560f[_0x4dea7e(0x118)]};if(_0x50560f[_0x4dea7e(0x81)](_0x50560f['hBOPu'],_0x50560f[_0x4dea7e(0xf3)]))return _0xe4acb5(new _0x27fbc0(_0x4dea7e(0x13e)));else{let _0x388171,_0x5c25ba;beforeEach(function(_0x3be68c){const _0x5f2e84=_0x4dea7e,_0xad7a={'qqYKl':function(_0xc18395,_0x3b197f,_0x2099e0){const _0x238250=_0x2133;return _0x4c7645[_0x238250(0x89)](_0xc18395,_0x3b197f,_0x2099e0);},'RVYpO':_0x5f2e84(0xce),'QMjhC':function(_0x3cacb7,_0x390cb2){return _0x3cacb7+_0x390cb2;},'XiYRr':_0x4c7645[_0x5f2e84(0xe0)],'IQIiN':_0x4c7645[_0x5f2e84(0x11d)],'fddIM':_0x4c7645[_0x5f2e84(0x119)],'rIqCN':_0x5f2e84(0x136),'uPrAa':function(_0xb133aa,_0x1488c7){const _0x476ca1=_0x5f2e84;return _0x4c7645[_0x476ca1(0x130)](_0xb133aa,_0x1488c7);},'DLkBp':function(_0x2c2546){return _0x2c2546();},'zGGlP':_0x5f2e84(0x125),'DCtQC':_0x5f2e84(0x157),'LJwRT':function(_0x273c03,_0xe494e1){return _0x4c7645['KGbzW'](_0x273c03,_0xe494e1);}};_0x388171=new SMTPServer({'disabledCommands':['STARTTLS',_0x4c7645[_0x5f2e84(0x134)]],'onData'(_0x287d61,_0x1c201c,_0x4a7d04){const _0x5f1e49=_0x5f2e84;if(_0x5f1e49(0x155)==='FkzBV')_0x287d61['on'](_0x5f1e49(0x12d),function(){}),_0x287d61['on'](_0x4c7645[_0x5f1e49(0x153)],_0x4a7d04);else{const _0x35cb20={'zlnZV':function(_0x4b1634,_0x1f44d2,_0x3dcc6e){const _0x387bfb=_0x5f1e49;return _0xad7a[_0x387bfb(0xf2)](_0x4b1634,_0x1f44d2,_0x3dcc6e);}};_0x372ea3['on']('data',()=>![]),_0x13fcbf['on'](_0xad7a[_0x5f1e49(0x150)],()=>{const _0x3f4c26=_0x5f1e49;_0x35cb20[_0x3f4c26(0xea)](_0x295d7c,()=>{const _0x1b3c5a=_0x3f4c26;this[_0x1b3c5a(0xf0)][_0x1b3c5a(0xd1)](_0x53b1b7=>_0x53b1b7['_socket']['destroy']());},0x96);});}},'onMailFrom'(_0x63e49b,_0x1d7b90,_0x348dff){const _0xff89c2=_0x5f2e84,_0x4ee23c={'aygOj':function(_0x2542b5,_0x427896,_0x5a2755){return _0x2542b5(_0x427896,_0x5a2755);},'BFKRE':function(_0x5c64c3,_0x2fa66b){return _0x5c64c3(_0x2fa66b);},'vDHcZ':function(_0xfd7af1){return _0x4c7645['QcOuy'](_0xfd7af1);}};if(!/@valid.sender/[_0xff89c2(0x15e)](_0x63e49b[_0xff89c2(0xc3)])){if('ROuEh'===_0xff89c2(0x116)){let _0x2c4ab7=new _0x36f1ac(_0xad7a['QMjhC'](_0xad7a[_0xff89c2(0x9d)](_0xad7a[_0xff89c2(0xec)],_0xc103e5+0x1),_0xff89c2(0x14d))),_0x56fda0=[],_0x2efa70=new _0x3d6b9e(0x400)[_0xff89c2(0xc1)](_0xad7a[_0xff89c2(0x7b)]);_0x293dd9['on'](_0xff89c2(0x12d),function(_0x2a62eb,_0x92d42a){const _0x1b9788=_0xff89c2;_0x56fda0[_0x1b9788(0x9e)](_0x92d42a);}),_0x4e7868['on'](_0xad7a[_0xff89c2(0xf8)],function(_0x34eea3,_0x19c61f){const _0x23927d=_0xff89c2;let _0x22bf35=_0x53eed8[_0x23927d(0x84)](_0x56fda0);_0x53ade8(_0x22bf35[_0x23927d(0x8d)]())['to'][_0x23927d(0x13d)](_0x2efa70[_0x23927d(0x82)]()[_0x23927d(0xe9)](/\n/g,'\x0d\x0a')),_0x4ee23c['aygOj'](_0x19c61f,null,!![]);}),_0x2c4ab7[_0xff89c2(0x120)]({'data':{},'message':new _0x46f114({'from':_0xff89c2(0x125),'to':_0xad7a['rIqCN']},_0x2efa70)},function(_0xb4c9d){const _0x3b4738=_0xff89c2;_0x4ee23c[_0x3b4738(0x101)](_0x5851a3,_0xb4c9d)['to'][_0x3b4738(0x117)],_0x4ee23c[_0x3b4738(0x11c)](_0x25c8fb);});}else return _0x4c7645[_0xff89c2(0x94)](_0x348dff,new Error(_0x4c7645['SdeWT']));}return _0x4c7645[_0xff89c2(0x112)](_0x348dff);},'onRcptTo'(_0x18c93f,_0x4e1dd9,_0x200501){const _0x2dafd5=_0x5f2e84;if(_0x4c7645[_0x2dafd5(0x12b)](_0x4c7645[_0x2dafd5(0x135)],_0x4c7645[_0x2dafd5(0x86)])){if(!/@valid.sender/[_0x2dafd5(0x15e)](_0x2ce419[_0x2dafd5(0xc3)]))return _0xad7a[_0x2dafd5(0x10a)](_0x258dec,new _0x33bd8a(_0x2dafd5(0x13e)));return _0x386247();}else{if(!/@valid.recipient/[_0x2dafd5(0x15e)](_0x18c93f[_0x2dafd5(0xc3)])){if(_0x4c7645['GiWiq']===_0x4c7645[_0x2dafd5(0xae)])return _0x4c7645[_0x2dafd5(0xda)](_0x200501,new Error(_0x2dafd5(0x11f)));else _0x2c1df2(_0x42c1e9)['to'][_0x2dafd5(0x117)],_0xad7a[_0x2dafd5(0xfc)](_0x4ae1f9);}return _0x4c7645[_0x2dafd5(0x83)](_0x200501);}},'logger':![]}),_0x5c25ba=new SMTPServer({'disabledCommands':[_0x4c7645[_0x5f2e84(0xd6)],_0x4c7645['dFOXH']],'onData'(_0x301417){const _0x5ad994=_0x5f2e84,_0x270f94={'ToQXo':function(_0x54d961,_0x435221,_0x5bdab3){const _0x2dbca0=_0x2133;return _0x4c7645[_0x2dbca0(0x89)](_0x54d961,_0x435221,_0x5bdab3);},'FKNVt':function(_0x4d1e58,_0xb21e38){return _0x4c7645['HJoxp'](_0x4d1e58,_0xb21e38);},'hAMhI':function(_0x3736c0,_0x355cc9){return _0x3736c0(_0x355cc9);},'CYpRZ':function(_0x5b3911){return _0x4c7645['udhei'](_0x5b3911);}};if(_0x4c7645[_0x5ad994(0x104)]!==_0x5ad994(0xe6)){const _0x5426bf={'RAWCF':function(_0x1040da){return _0x1040da();}};let _0x3bbb25=new _0x6ea30f(_0xad7a[_0x5ad994(0x9d)](_0xad7a[_0x5ad994(0x9d)]('smtp:localhost:',_0x1e44f4),_0x5ad994(0x14d))),_0x5e719f=[],_0x2e8986=new _0x263619(0x400)[_0x5ad994(0xc1)](_0x5ad994(0x140));_0x2ebaea['on'](_0x5ad994(0x12d),function(_0x3ca01c,_0x58d75f){const _0x59ef05=_0x5ad994;_0x5e719f[_0x59ef05(0x9e)](_0x58d75f);}),_0xf8956['on'](_0xad7a['fddIM'],function(_0x270aa5,_0x5a5d02){const _0x3fc9cb=_0x5ad994;let _0x41478a=_0x4f213b[_0x3fc9cb(0x84)](_0x5e719f);_0x346888(_0x41478a[_0x3fc9cb(0x8d)]())['to'][_0x3fc9cb(0x13d)](_0x2e8986[_0x3fc9cb(0x82)]()[_0x3fc9cb(0xe9)](/\n/g,'\x0d\x0a')),_0x270f94[_0x3fc9cb(0x11e)](_0x5a5d02,null,!![]);}),_0x3bbb25[_0x5ad994(0x120)]({'data':{},'message':new _0x698bc4({'from':_0xad7a['zGGlP'],'to':_0xad7a['rIqCN']},_0x2e8986)},function(_0x2e7705){const _0x26fcd4=_0x5ad994;_0x2ce436(_0x2e7705)['to'][_0x26fcd4(0x95)]['exist'],_0x5426bf['RAWCF'](_0x1963be);});}else _0x301417['on'](_0x5ad994(0x12d),()=>![]),_0x301417['on'](_0x4c7645[_0x5ad994(0x153)],()=>{const _0x47cee1={'TqcDP':function(_0x4c727a,_0x25b16a){const _0x143d72=_0x2133;return _0x270f94[_0x143d72(0x123)](_0x4c727a,_0x25b16a);},'KgCHc':function(_0x306f3f){const _0x2d598d=_0x2133;return _0x270f94[_0x2d598d(0xaf)](_0x306f3f);}};setTimeout(()=>{const _0x5a120b=_0x2133;_0x270f94[_0x5a120b(0xb3)](_0x5a120b(0x161),_0x5a120b(0x161))?(_0x47cee1[_0x5a120b(0x138)](_0x5a7e70,_0xec8486)['to'][_0x5a120b(0x95)]['exist'],_0x47cee1['KgCHc'](_0x240ab7)):this['connections']['forEach'](_0x23f106=>_0x23f106[_0x5a120b(0x7d)]['destroy']());},0x96);});},'onMailFrom'(_0x798465,_0x2a5ebd,_0x2ceba9){const _0x41d9d5=_0x5f2e84;if(!/@valid.sender/['test'](_0x798465[_0x41d9d5(0xc3)]))return _0x4c7645[_0x41d9d5(0xda)](_0x2ceba9,new Error(_0x4c7645[_0x41d9d5(0x13b)]));return _0x4c7645[_0x41d9d5(0x112)](_0x2ceba9);},'onRcptTo'(_0x539ed3,_0x5a2cb1,_0x1d2623){const _0x55da05=_0x5f2e84;if(_0xad7a[_0x55da05(0xf5)]==='cMrci'){let _0xab796a=new _0x32909c();return _0x139d19(()=>_0xab796a[_0x55da05(0xce)](this[_0x55da05(0x99)])),_0xab796a;}else{if(!/@valid.recipient/[_0x55da05(0x15e)](_0x539ed3[_0x55da05(0xc3)]))return _0xad7a[_0x55da05(0x15f)](_0x1d2623,new Error(_0x55da05(0x11f)));return _0xad7a[_0x55da05(0xfc)](_0x1d2623);}},'logger':![]}),_0x388171[_0x5f2e84(0x113)](PORT_NUMBER,_0x5e2e5c=>{const _0x18e150=_0x5f2e84;if(_0x5e2e5c)return _0x3be68c(_0x5e2e5c);_0x5c25ba[_0x18e150(0x113)](_0x4c7645[_0x18e150(0xa0)](PORT_NUMBER,0x1),_0x3be68c);});}),_0x50560f[_0x4dea7e(0x14a)](afterEach,function(_0x105976){const _0x573a00=_0x4dea7e;_0x573a00(0xbe)===_0x573a00(0x126)?_0x435101[_0x573a00(0x9e)](_0x376092):_0x388171[_0x573a00(0x14c)](()=>_0x5c25ba[_0x573a00(0x14c)](_0x105976));}),_0x50560f[_0x4dea7e(0x129)](it,'Should\x20expose\x20version\x20number',function(){const _0x103c24=_0x4dea7e;if(_0x50560f[_0x103c24(0x93)]!==_0x103c24(0xc7)){let _0x35c8e5=new SMTPTransport();_0x50560f[_0x103c24(0x162)](expect,_0x35c8e5['name'])['to'][_0x103c24(0x117)],_0x50560f['dBlGl'](expect,_0x35c8e5[_0x103c24(0x80)])['to'][_0x103c24(0x117)];}else{const _0x126ab2={'GWlcK':function(_0x180db6,_0x5a96fe){const _0x545d39=_0x103c24;return _0x4c7645[_0x545d39(0x94)](_0x180db6,_0x5a96fe);},'aGluZ':function(_0x10f8c6){return _0x4c7645['QcOuy'](_0x10f8c6);}};let _0x4ebe88=new _0x47d740({'url':_0x4c7645[_0x103c24(0xbf)](_0x103c24(0x8b),_0x95a083),'logger':![]}),_0x159650=[],_0x52278f=new _0x15893f(0x400)[_0x103c24(0xc1)](_0x4c7645[_0x103c24(0x11d)]);_0x54b74c['on'](_0x4c7645[_0x103c24(0x131)],function(_0x25ac30,_0x1fd626){const _0x5c495c=_0x103c24;_0x159650[_0x5c495c(0x9e)](_0x1fd626);}),_0x33bbd8['on'](_0x4c7645['NsUHF'],function(_0x557f8c,_0x4e74a0){const _0xd7f9f6=_0x103c24;let _0x48438c=_0x16df4a[_0xd7f9f6(0x84)](_0x159650);_0x3ceb59(_0x48438c['toString']())['to'][_0xd7f9f6(0x13d)](_0x52278f[_0xd7f9f6(0x82)]()[_0xd7f9f6(0xe9)](/\n/g,'\x0d\x0a')),_0x4e74a0(null,!![]);}),_0x4ebe88[_0x103c24(0x120)]({'data':{},'message':new _0x3865b5({'from':_0x103c24(0x125),'to':_0x4c7645['tZcwu']},_0x52278f)},function(_0xd0521c){const _0x5ca3e7=_0x103c24;_0x126ab2['GWlcK'](_0x1534ec,_0xd0521c)['to']['not'][_0x5ca3e7(0x117)],_0x126ab2[_0x5ca3e7(0x156)](_0x177e5f);});}}),_0x50560f[_0x4dea7e(0x142)](it,'Should\x20detect\x20wellknown\x20data',function(){const _0x4f0a2a=_0x4dea7e;let _0x39da13=new SMTPTransport({'service':'google\x20mail','logger':![]});_0x4c7645[_0x4f0a2a(0x13c)](expect,_0x39da13[_0x4f0a2a(0x146)]['host'])['to'][_0x4f0a2a(0x13d)](_0x4f0a2a(0x110)),expect(_0x39da13['options'][_0x4f0a2a(0xc2)])['to'][_0x4f0a2a(0x13d)](0x1d1),_0x4c7645[_0x4f0a2a(0x87)](expect,_0x39da13['options'][_0x4f0a2a(0xca)])['to']['be'][_0x4f0a2a(0xb9)];}),it(_0x50560f[_0x4dea7e(0x10c)],function(_0x30adf0){const _0x1720b8=_0x4dea7e,_0x357635={'aMjJV':function(_0x55fd16,_0x57d7ea){return _0x4c7645['RWHhN'](_0x55fd16,_0x57d7ea);},'LAUfu':function(_0x333ebe){return _0x4c7645['qQlms'](_0x333ebe);}};let _0x563a02=new SMTPTransport({'port':PORT_NUMBER,'logger':![]});_0x563a02[_0x1720b8(0x120)]({'data':{},'message':new MockBuilder({'from':_0x1720b8(0xbb),'to':_0x4c7645[_0x1720b8(0xa9)]},_0x4c7645[_0x1720b8(0x12a)])},function(_0x4ee8a6){const _0x1194dc=_0x1720b8;_0x357635[_0x1194dc(0xac)](expect,_0x4ee8a6['code'])['to'][_0x1194dc(0x13d)]('EENVELOPE'),_0x357635['LAUfu'](_0x30adf0);});}),_0x50560f[_0x4dea7e(0x142)](it,'Should\x20not\x20fail\x20auth',function(_0x12626e){const _0x37b62f=_0x4dea7e;let _0x4bc63c=new SMTPTransport({'port':PORT_NUMBER,'auth':{'user':_0x4c7645['PWYYt']},'logger':![]});_0x4bc63c[_0x37b62f(0x120)]({'data':{},'message':new MockBuilder({'from':_0x4c7645[_0x37b62f(0xd5)],'to':'test@valid.recipient'},_0x37b62f(0x15a))},function(_0x1aad58){const _0x4ce377=_0x37b62f;expect(_0x1aad58)['to'][_0x4ce377(0x95)]['exist'],_0x12626e();});}),_0x50560f[_0x4dea7e(0x145)](it,_0x50560f[_0x4dea7e(0xb7)],function(_0x18fdd6){const _0xfc6917=_0x4dea7e;if(_0xfc6917(0x147)!=='TBCXe'){if(!/@valid.sender/[_0xfc6917(0x15e)](_0x25ccd2[_0xfc6917(0xc3)]))return _0x7743(new _0x5e011c(_0xfc6917(0x13e)));return _0x4c7645['ZQhix'](_0x4b2bb6);}else{let _0x407172=new SMTPTransport({'port':PORT_NUMBER,'auth':{'user':_0xfc6917(0xc4)},'forceAuth':!![],'logger':![]});_0x407172['send']({'data':{},'message':new MockBuilder({'from':_0x50560f['JrsRH'],'to':_0x50560f['RhRep']},_0x50560f[_0xfc6917(0x13f)])},function(_0x498839){const _0x5950db=_0xfc6917;expect(_0x498839[_0x5950db(0xd3)])['to']['equal'](_0x5950db(0xef)),_0x18fdd6();});}}),_0x50560f[_0x4dea7e(0x145)](it,_0x50560f[_0x4dea7e(0x121)],function(_0x5c0eba){const _0x212970=_0x4dea7e;let _0x7872ae=new SMTPTransport(_0x212970(0x12c)+PORT_NUMBER+_0x4c7645['DEqVj']),_0x5dea10=[],_0x1fa77e=new Array(0x400)[_0x212970(0xc1)](_0x4c7645[_0x212970(0x11d)]);_0x388171['on'](_0x4c7645[_0x212970(0x131)],function(_0x5671fe,_0x39fd7f){const _0x515d7a=_0x212970;_0x5dea10[_0x515d7a(0x9e)](_0x39fd7f);}),_0x388171['on'](_0x212970(0x124),function(_0x5004f4,_0xedd1f4){const _0x45527f=_0x212970;let _0x43646c=Buffer[_0x45527f(0x84)](_0x5dea10);_0x4c7645['maxfG'](expect,_0x43646c[_0x45527f(0x8d)]())['to'][_0x45527f(0x13d)](_0x1fa77e[_0x45527f(0x82)]()[_0x45527f(0xe9)](/\n/g,'\x0d\x0a')),_0xedd1f4(null,!![]);}),_0x7872ae[_0x212970(0x120)]({'data':{},'message':new MockBuilder({'from':_0x212970(0x125),'to':_0x4c7645['tZcwu']},_0x1fa77e)},function(_0x14c129){const _0x1bb234=_0x212970;expect(_0x14c129)['to'][_0x1bb234(0x95)]['exist'],_0x5c0eba();});}),it(_0x4dea7e(0x79),function(_0xe0a9d7){const _0x67d0dc=_0x4dea7e;let _0x1eb4b4=new SMTPTransport(_0x67d0dc(0x12c)+(PORT_NUMBER+0x1)+'?logger=false'),_0x5aa4e9=[],_0x1da78d=new Array(0x400)[_0x67d0dc(0xc1)](_0x67d0dc(0x140));_0x388171['on'](_0x67d0dc(0x12d),function(_0x15aefd,_0x1dcbf2){const _0x45527a=_0x67d0dc;_0x5aa4e9[_0x45527a(0x9e)](_0x1dcbf2);}),_0x388171['on'](_0x67d0dc(0x124),function(_0x4cc4fc,_0x216dd2){const _0x3c824c=_0x67d0dc;let _0x185aa6=Buffer[_0x3c824c(0x84)](_0x5aa4e9);expect(_0x185aa6[_0x3c824c(0x8d)]())['to'][_0x3c824c(0x13d)](_0x1da78d['trim']()['replace'](/\n/g,'\x0d\x0a')),_0x4c7645['MqdyD'](_0x216dd2,null,!![]);}),_0x1eb4b4[_0x67d0dc(0x120)]({'data':{},'message':new MockBuilder({'from':_0x50560f[_0x67d0dc(0x15d)],'to':_0x67d0dc(0x136)},_0x1da78d)},function(_0xb16e1b){const _0x33f825=_0x67d0dc;_0x4c7645[_0x33f825(0x94)](expect,_0xb16e1b)['to']['exist'],_0xe0a9d7();});});}}),describe(_0x50560f[_0xe6bf5b(0x149)],function(){const _0x4c5ca3=_0xe6bf5b,_0x313d9b={'LzLrA':function(_0x11ed6f,_0x5088e8){return _0x11ed6f!==_0x5088e8;},'uQnJj':_0x4c5ca3(0x96),'ltypB':function(_0x580775,_0x24d2c9){return _0x50560f['PvNcU'](_0x580775,_0x24d2c9);},'LuqPq':_0x50560f[_0x4c5ca3(0x9c)],'nbKyF':_0x50560f[_0x4c5ca3(0xaa)],'diULf':_0x4c5ca3(0x100),'rQRym':function(_0x4686f7,_0x1246c0,_0x574626){return _0x4686f7(_0x1246c0,_0x574626);},'LeFII':_0x50560f[_0x4c5ca3(0x152)],'KdoOP':_0x50560f['ISQrc'],'ZpbCj':function(_0x1a596d,_0x4e72bd){return _0x50560f['NAGLv'](_0x1a596d,_0x4e72bd);},'FpxAw':function(_0x3009e5){return _0x3009e5();},'BFFIk':function(_0x23e216){return _0x23e216();},'IRvgu':function(_0x1e4d8a,_0x3f7e7f){return _0x1e4d8a!==_0x3f7e7f;},'daRtG':_0x4c5ca3(0x85),'VscKt':function(_0x1b325e,_0x52677d){const _0x362971=_0x4c5ca3;return _0x50560f[_0x362971(0x128)](_0x1b325e,_0x52677d);},'YIINi':'PYASi','PErwx':function(_0x27079d){return _0x27079d();},'Jzjmu':_0x50560f['NeyAd'],'HxcCr':_0x50560f['pRsrh'],'dspmq':function(_0x249de3,_0x2d58a2,_0x107dae){const _0x9d15bd=_0x4c5ca3;return _0x50560f[_0x9d15bd(0x142)](_0x249de3,_0x2d58a2,_0x107dae);},'FNDQz':function(_0x379c5c){return _0x379c5c();}};let _0x1a7cd1;beforeEach(function(_0x42d152){const _0x1cdc52=_0x4c5ca3,_0x18e9ee={'Ieips':_0x50560f[_0x1cdc52(0xad)],'vlBBA':_0x50560f[_0x1cdc52(0x8c)],'SPJye':function(_0x2300a0,_0x103d38){return _0x2300a0(_0x103d38);},'zZPBa':_0x1cdc52(0x11f)};_0x1a7cd1=new SMTPServer({'authMethods':[_0x1cdc52(0x14f),_0x50560f[_0x1cdc52(0xcd)]],'disabledCommands':[_0x50560f[_0x1cdc52(0x8e)]],'onData'(_0x363e2c,_0x2b5a99,_0x47c063){const _0x520eb6=_0x1cdc52;_0x363e2c['on'](_0x18e9ee['Ieips'],function(){}),_0x363e2c['on'](_0x18e9ee[_0x520eb6(0x111)],_0x47c063);},'onAuth'(_0x9377e4,_0x1536d0,_0x2a4e16){const _0x4c55d1=_0x1cdc52;if(_0x313d9b['LzLrA']('guTuj',_0x4c55d1(0xab))){if(_0x9377e4['method']!==_0x4c55d1(0x12f)){if(_0x313d9b[_0x4c55d1(0x160)]!==_0x4c55d1(0x96))return this[_0x4c55d1(0xcc)];else{if(_0x313d9b[_0x4c55d1(0xa7)](_0x9377e4['username'],'testuser')||_0x9377e4[_0x4c55d1(0x115)]!==_0x313d9b['LuqPq'])return _0x2a4e16(new Error(_0x313d9b[_0x4c55d1(0x11b)]));}}else{if(_0x9377e4['username']!==_0x313d9b['diULf']||_0x9377e4[_0x4c55d1(0xd8)]!==_0x4c55d1(0x85))return _0x313d9b['rQRym'](_0x2a4e16,null,{'data':{'status':_0x4c55d1(0xc0),'schemes':_0x313d9b['LeFII'],'scope':_0x313d9b[_0x4c55d1(0x13a)]}});}_0x2a4e16(null,{'user':0x7b});}else{let _0x3eb4a4=new _0x1dfa2a();_0x18e9ee[_0x4c55d1(0xd4)](_0x3eeda7,_0x3eb4a4[_0x4c55d1(0xdc)])['to'][_0x4c55d1(0x117)],_0x18e9ee[_0x4c55d1(0xd4)](_0x532539,_0x3eb4a4[_0x4c55d1(0x80)])['to'][_0x4c55d1(0x117)];}},'onMailFrom'(_0x18fd80,_0x1d5682,_0x29fa80){const _0x5b2e20=_0x1cdc52;if(!/@valid.sender/[_0x5b2e20(0x15e)](_0x18fd80[_0x5b2e20(0xc3)]))return _0x313d9b[_0x5b2e20(0x106)](_0x29fa80,new Error(_0x5b2e20(0x13e)));return _0x313d9b[_0x5b2e20(0x105)](_0x29fa80);},'onRcptTo'(_0x3cde82,_0x508a56,_0x3b28b1){const _0x3b3e03=_0x1cdc52;if(!/@valid.recipient/[_0x3b3e03(0x15e)](_0x3cde82['address']))return _0x3b28b1(new Error(_0x18e9ee[_0x3b3e03(0xa6)]));return _0x3b28b1();},'logger':![]}),_0x1a7cd1['listen'](PORT_NUMBER,_0x42d152);}),afterEach(function(_0xf10700){const _0x2b0841=_0x4c5ca3;_0x1a7cd1[_0x2b0841(0x14c)](_0xf10700);}),_0x50560f[_0x4c5ca3(0x142)](it,_0x50560f[_0x4c5ca3(0x9a)],function(_0x508dd2){const _0x477e5b=_0x4c5ca3,_0x4767f0={'gexKm':_0x50560f[_0x477e5b(0xb8)],'hdRhw':_0x50560f[_0x477e5b(0xa3)]};let _0x11c4b4=new SMTPTransport({'url':_0x477e5b(0x8b)+PORT_NUMBER,'logger':![]}),_0x426a1e=[],_0x35eefe=new Array(0x400)[_0x477e5b(0xc1)](_0x477e5b(0x140));_0x1a7cd1['on'](_0x477e5b(0x12d),function(_0x1f6bfc,_0x4bbd00){const _0x11ddbe=_0x477e5b;_0x426a1e[_0x11ddbe(0x9e)](_0x4bbd00);}),_0x1a7cd1['on'](_0x477e5b(0x124),function(_0x47a3d2,_0x4829db){const _0x4f0ba5=_0x477e5b;let _0x17bec1=Buffer[_0x4f0ba5(0x84)](_0x426a1e);_0x313d9b[_0x4f0ba5(0x106)](expect,_0x17bec1[_0x4f0ba5(0x8d)]())['to'][_0x4f0ba5(0x13d)](_0x35eefe[_0x4f0ba5(0x82)]()['replace'](/\n/g,'\x0d\x0a')),_0x4829db(null,!![]);}),_0x11c4b4[_0x477e5b(0x120)]({'data':{},'message':new MockBuilder({'from':_0x50560f[_0x477e5b(0x15d)],'to':_0x50560f['RhRep']},_0x35eefe)},function(_0xe3c458){const _0x597ae6=_0x477e5b;if(_0x4767f0[_0x597ae6(0x10d)]!==_0x597ae6(0x108))return _0x428dea(new _0x3b79b1(_0x4767f0[_0x597ae6(0x122)]));else expect(_0xe3c458)['to'][_0x597ae6(0x95)][_0x597ae6(0x117)],_0x508dd2();});}),it(_0x4c5ca3(0x12e),function(_0x560a7d){const _0x26a3b3=_0x4c5ca3;if(_0x50560f[_0x26a3b3(0xfb)](_0x26a3b3(0xeb),'OOVoM'))return _0x5c0261(new _0x1058f('Only\x20user@valid.recipient\x20is\x20allowed\x20to\x20receive\x20mail'));else{let _0x18ec1f=new SMTPTransport({'url':_0x26a3b3(0x8b)+PORT_NUMBER,'logger':![]});_0x18ec1f[_0x26a3b3(0x8a)](function(_0x311929,_0x259ba2){const _0x16c713=_0x26a3b3;_0x313d9b['ZpbCj'](expect,_0x311929)['to'][_0x16c713(0x95)][_0x16c713(0x117)],expect(_0x259ba2)['to']['be'][_0x16c713(0xb9)],_0x313d9b['BFFIk'](_0x560a7d);});}}),_0x50560f[_0x4c5ca3(0x151)](it,_0x4c5ca3(0x109),function(_0x51d43c){const _0x3d3f0c=_0x4c5ca3;let _0x4e4dea=new SMTPTransport({'url':_0x3d3f0c(0xc9)+PORT_NUMBER,'logger':![]});_0x4e4dea[_0x3d3f0c(0x8a)](function(_0x341d01){const _0x20b385=_0x3d3f0c,_0x4d557d={'Lizad':function(_0xf7657d,_0x54a9a3){const _0x24accb=_0x2133;return _0x313d9b[_0x24accb(0x9b)](_0xf7657d,_0x54a9a3);},'ZouuE':'testpass','kUIIK':function(_0x7a8dc0,_0x353fca){return _0x7a8dc0(_0x353fca);},'XGPNV':_0x313d9b['nbKyF'],'AzPUa':_0x313d9b[_0x20b385(0xb2)],'DnTwi':_0x313d9b[_0x20b385(0x7a)],'PsebA':function(_0x4aeb25,_0x397330,_0x17baf1){return _0x4aeb25(_0x397330,_0x17baf1);}};if(_0x313d9b[_0x20b385(0x158)](_0x20b385(0x159),_0x313d9b[_0x20b385(0x102)]))expect(_0x341d01)['to'][_0x20b385(0x117)],_0x313d9b[_0x20b385(0xfd)](_0x51d43c);else{if(_0x4d557d[_0x20b385(0xd2)](_0x17d624[_0x20b385(0x88)],_0x20b385(0x12f))){if(_0x1a13b3[_0x20b385(0xdb)]!=='testuser'||_0x3f0661[_0x20b385(0x115)]!==_0x4d557d[_0x20b385(0xc8)])return _0x4d557d['kUIIK'](_0x432ce5,new _0x349f01(_0x4d557d['XGPNV']));}else{if(_0x1d92c2[_0x20b385(0xdb)]!==_0x4d557d[_0x20b385(0xff)]||_0x4d557d['Lizad'](_0x340520[_0x20b385(0xd8)],_0x4d557d[_0x20b385(0xa1)]))return _0x4d557d[_0x20b385(0xbd)](_0x26e94b,null,{'data':{'status':_0x20b385(0xc0),'schemes':_0x20b385(0xb5),'scope':_0x20b385(0xcb)}});}_0x30fb86(null,{'user':0x7b});}});}),_0x50560f[_0x4c5ca3(0x91)](it,'Should\x20login\x20and\x20send\x20mail\x20using\x20proxied\x20socket',function(_0xa73a62){const _0x46ce42=_0x4c5ca3,_0x40d95e={'pGmhS':_0x46ce42(0x11a),'IIWkH':function(_0xb7e84b,_0x57ba4e,_0x33b586){return _0xb7e84b(_0x57ba4e,_0x33b586);}};if(_0x46ce42(0x90)!==_0x50560f[_0x46ce42(0xd9)]){let _0x5f474b=new SMTPTransport({'url':_0x50560f[_0x46ce42(0x141)],'logger':![],'getSocket'(_0xfe2f64,_0x154487){const _0x4bfdbb=_0x46ce42,_0xd55f19={'PRaGu':function(_0x3ea01c,_0x3578c4){return _0x313d9b['ZpbCj'](_0x3ea01c,_0x3578c4);}};let _0x244971=net[_0x4bfdbb(0xa4)](PORT_NUMBER,_0x4bfdbb(0xe4)),_0x3de312=function(_0x3bf4bd){const _0x746058=_0x4bfdbb;_0xd55f19[_0x746058(0xdd)](_0x154487,_0x3bf4bd);};_0x244971['on'](_0x313d9b['Jzjmu'],_0x3de312),_0x244971['on'](_0x313d9b[_0x4bfdbb(0xb1)],function(){const _0x108a4b=_0x4bfdbb;_0x244971[_0x108a4b(0xde)](_0x40d95e[_0x108a4b(0xa5)],_0x3de312),_0x40d95e['IIWkH'](_0x154487,null,{'connection':_0x244971});});}}),_0x2bc6cd=[],_0xe87367=new Array(0x400)[_0x46ce42(0xc1)](_0x50560f[_0x46ce42(0xa2)]);_0x1a7cd1['on']('data',function(_0x479b0e,_0x1c4bac){const _0x246e98=_0x46ce42;_0x2bc6cd[_0x246e98(0x9e)](_0x1c4bac);}),_0x1a7cd1['on'](_0x46ce42(0x124),function(_0x9734f9,_0x40673a){const _0x53f678=_0x46ce42;let _0x22220c=Buffer[_0x53f678(0x84)](_0x2bc6cd);expect(_0x22220c[_0x53f678(0x8d)]())['to'][_0x53f678(0x13d)](_0xe87367[_0x53f678(0x82)]()[_0x53f678(0xe9)](/\n/g,'\x0d\x0a')),_0x313d9b[_0x53f678(0xdf)](_0x40673a,null,!![]);}),_0x5f474b['send']({'data':{},'message':new MockBuilder({'from':_0x50560f[_0x46ce42(0x15d)],'to':_0x46ce42(0x136)},_0xe87367)},function(_0x5a607e){const _0x3bd01b=_0x46ce42;_0x313d9b['ZpbCj'](expect,_0x5a607e)['to'][_0x3bd01b(0x95)]['exist'],_0xa73a62();});}else _0x53930d(_0x2f1e18[_0x46ce42(0xd3)])['to'][_0x46ce42(0x13d)](_0x46ce42(0xef)),_0x313d9b[_0x46ce42(0xd7)](_0xab982e);});});});