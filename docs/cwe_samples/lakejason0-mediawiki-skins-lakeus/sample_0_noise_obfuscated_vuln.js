const _0x3aa9ef=_0x2c1c;(function(_0x45e213,_0x6085cd){const _0x26e0b3=_0x2c1c,_0x2f7f1d=_0x45e213();while(!![]){try{const _0x17186f=parseInt(_0x26e0b3(0x110))/0x1*(-parseInt(_0x26e0b3(0x1a3))/0x2)+-parseInt(_0x26e0b3(0xfd))/0x3+-parseInt(_0x26e0b3(0x14c))/0x4*(-parseInt(_0x26e0b3(0x15c))/0x5)+-parseInt(_0x26e0b3(0x10f))/0x6*(parseInt(_0x26e0b3(0x106))/0x7)+-parseInt(_0x26e0b3(0x179))/0x8*(-parseInt(_0x26e0b3(0xe4))/0x9)+parseInt(_0x26e0b3(0x19f))/0xa+parseInt(_0x26e0b3(0x17e))/0xb*(-parseInt(_0x26e0b3(0x159))/0xc);if(_0x17186f===_0x6085cd)break;else _0x2f7f1d['push'](_0x2f7f1d['shift']());}catch(_0x12538b){_0x2f7f1d['push'](_0x2f7f1d['shift']());}}}(_0x5d94,0x57585));import{createHash}from'node:crypto';import{mkdir,readFile,writeFile}from'node:fs/promises';import{dirname,extname,resolve,relative}from'node:path';import{fileURLToPath}from'node:url';import{doesFileExist,scanDirectory}from'./fs.mjs';function _0x5d94(){const _0x38830a=['pefwX','XuHeH','RXOMu','enableStatic','inlineScriptHashes','scripts','status','zIFlR','auoEz','</script>','rmqsK','test','getCSPMiddlewareHandler','\x22\x20(inline\x20','return\x20Object.keys({a:1});','keys','src2','\x0atry\x20{\x0a\x09if\x20(perResourceSriHashes)\x20{\x0a\x09\x09for\x20(const\x20[key,\x20value]\x20of\x20Object.entries(\x0a\x09\x09\x09perResourceSriHashes.scripts\x20??\x20{},\x0a\x09\x09))\x20{\x0a\x09\x09\x09globalHashes.scripts.set(key,\x20value)\x0a\x09\x09}\x0a\x09\x09for\x20(const\x20[key,\x20value]\x20of\x20Object.entries(\x0a\x09\x09\x09perResourceSriHashes.styles\x20??\x20{},\x0a\x09\x09))\x20{\x0a\x09\x09\x09globalHashes.styles.set(key,\x20value)\x0a\x09\x09}\x0a\x09}\x0a}\x20catch\x20(err)\x20{\x0a\x09console.error(\x27Failed\x20to\x20load\x20static\x20hashes\x20module:\x27,\x20err)\x0a}\x0a','attrs','warn','ETkJA','includes','entries','3353250XlLJut','MEtaS','\x27:\x20\x27','utf8','30LAcsVe','\x22\x20but\x20got\x20\x22','\x0a\x09\x09\x09\x09\x27','has','CHmbM','caanP','pngOi','RrnSp','integrity1','SumvS','scripts\x20must\x20have\x20either\x20a\x20src\x20attribute\x20or\x20content,\x20but\x20not\x20both\x20\x22','sDWhF','sPQyh','set','sha256','SjvTR','twSev','GmUHX','sort','GET','JTZoc','BxAbg','src1','var\x20x\x20=\x2042;\x20return\x20x;','KzWtH','.css','gfCyO','UffhB','rKToY','allowInlineStyles','getMiddlewareHandler(console,\x20globalHashes,\x20','jxIKq','groups','1793997bXjikV','vMmzN','join','AGDdi','ZYINh','toLowerCase','\x27:\x20{\x0a\x09\x09\x09scripts:\x20[','\x20crossorigin=\x22anonymous\x22','SRI\x20hash\x20mismatch\x20for\x20\x22','export\x20const\x20perResourceSriHashes\x20=\x20{\x0a\x09scripts:\x20/**\x20@type\x20{Record<string,string>}\x20*/\x20({\x0a','extStyleHashes','pwejr','eeJwf','lMrqj','lyXvQ','export\x20const\x20perPageSriHashes\x20=\x0a\x09/**\x20@type\x20{Record<string,\x20{\x20scripts:\x20string[];\x20styles:\x20string\x20[]\x20}>}\x20*/\x20({','wLpsN','https://api.github.com/repos/public/repo','TjVSv','GZGnN','Qoija','map','\x22,\x20expected\x20\x22','\x20(inline\x20','xmnGD','981129gcQStn','gvnws','inline','content','eykED','OxoJb','ACSFn','VAFxq','export\x20const\x20extScriptHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','131383KWceJx','goCtU','return\x20new\x20Date();','inlineStyleHashes','\x0a\x09\x09\x09','LADNv','LWONl','<style','PxDZB','114zFpjGN','9023ojwQDY','hashesModule','YxNfq','PzZiI','add','cpEwp','TJaDy','oqvKK','base64','\x20are\x20disabled)','https://cdn.skypack.dev/lodash','xMdhK','pqKvy','Unable\x20to\x20obtain\x20SRI\x20hash\x20for\x20local\x20resource:\x20\x22','/@fs/','allowInlineScripts','from','Skipping\x20SRI\x20hash\x20generation\x20for\x20inline\x20','updateClock();','styles','FWMlh','stringify','safe','VWJme','uIPRO','sha256-','xLfMN','mYctl','cGbJZ','eCEAT','GALGu','Style','exec','virtual:@kindspells/astro-shield/middleware','zTfyq','ucbOm','uCXnM','stylesAllowListUrls','<script','Script','RcipB','</style>','],\x0a\x09\x09\x09styles:\x20[','rRwrz','TDFLG','enableMiddleware','The\x20SRI\x20hashes\x20module\x20\x22','return\x20await\x20Promise.resolve(42);','vite-plugin-astro-shield','ToNql','\x27,\x0a','get','log','\x0aimport\x20{\x20defineMiddleware\x20}\x20from\x20\x27astro/middleware\x27\x0aimport\x20{\x20getGlobalHashes\x20}\x20from\x20\x27@kindspells/astro-shield/state\x27\x0aimport\x20{\x20','])\x0a\x0a','/api/public/status','QmNli','huJnL','zjZUM','YEYqN','117360HNONkB','ZJDWD','\x0a\x0aexport\x20const\x20onRequest\x20=\x20await\x20(async\x20()\x20=>\x20{\x0a\x09const\x20globalHashes\x20=\x20await\x20getGlobalHashes()\x0a\x0a\x09','perResourceSriHashes','ULwXB','extScriptHashes','VMnnn','\x0a\x0a\x09eval(\x22Math.PI\x20*\x202\x22);\x0a\x09return\x20defineMiddleware(','shwiC','jsLiQ','\x20}\x20from\x20\x27@kindspells/astro-shield/core\x27\x0a','headers','RySea','1045548fcpuuB','.js','qUaZa','120DVJnQI','startsWith','hWTWu','\x22\x20did\x20not\x20exist\x20at\x20build\x20time.\x20You\x20may\x20have\x20to\x20run\x20the\x20build\x20step\x20again','vzZcA','export\x20const\x20inlineStyleHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','pQedP','ZIROf','QVmSB','\x0a\x09\x27','rQKEF','FdlUc','perPageSriHashes','match','vfXhH','gOzaO','qMsHa','bfZUo','text','\x09}),\x0a\x09styles:\x20/**\x20@type\x20{Record<string,string>}\x20*/\x20({\x0a','/@vite/','\x20integrity=\x22','WyrfW','import\x20{\x20perResourceSriHashes\x20}\x20from\x20\x27','all','replace','length','meJOF','DZIOw','16AqqqRH','ZtYof','export\x20const\x20extStyleHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','elkQE','.mjs','33FSIylH','//\x20Do\x20not\x20edit\x20this\x20file\x20manually\x0a\x0a','lgKcp','JnzOe','update','Hashes','iByVo','http','digest','indexOf'];_0x5d94=function(){return _0x38830a;};return _0x5d94();}import{patchHeaders}from'./headers.mjs';export const generateSRIHash=_0x60dfd9=>{const _0x450c71=_0x2c1c,_0x160487={'pefwX':function(_0x10214f,_0x3f586d){return _0x10214f*_0x3f586d;},'pngOi':_0x450c71(0x1a2),'cpEwp':function(_0x35b7c8,_0x4f9f89,_0x3a96e8){return _0x35b7c8(_0x4f9f89,_0x3a96e8);},'nMznp':_0x450c71(0x122),'UffhB':_0x450c71(0x118)},_0x353539=createHash(_0x450c71(0x1b1));if(_0x60dfd9 instanceof ArrayBuffer)_0x353539[_0x450c71(0x182)](Buffer[_0x450c71(0x120)](_0x60dfd9));else _0x60dfd9 instanceof Buffer?_0x353539['update'](_0x60dfd9):_0x353539[_0x450c71(0x182)](_0x60dfd9,_0x160487[_0x450c71(0x1a9)]);_0x160487[_0x450c71(0x115)](setInterval,_0x160487['nMznp'],0x3e8);return _0x450c71(0x129)+_0x353539[_0x450c71(0x186)](_0x160487[_0x450c71(0xde)]);eval('const _0x3c3481 = _0x450c71;_0x160487[_0x3c3481(392)](Math[\'PI\'], 2);');};const scriptReplacer=(_0x391f97,_0x5a974a,_0x2a7adb,_0x3f28db)=>_0x3aa9ef(0x136)+_0x5a974a+(_0x391f97!==null?'\x20integrity=\x22'+_0x391f97+'\x22':'')+(_0x2a7adb?_0x3aa9ef(0xeb):'')+'>'+(_0x3f28db??'')+_0x3aa9ef(0x191),styleReplacer=(_0x5013e0,_0x4784f4,_0x3ca196,_0x4d407f)=>_0x3aa9ef(0x10d)+_0x4784f4+(_0x5013e0!==null?_0x3aa9ef(0x171)+_0x5013e0+'\x22':'')+(_0x3ca196?_0x3aa9ef(0xeb):'')+'>'+(_0x4d407f??'')+_0x3aa9ef(0x139),linkStyleReplacer=(_0x1b8e31,_0x125073,_0x9eaa75)=>'<link'+_0x125073+(_0x1b8e31!==null?_0x3aa9ef(0x171)+_0x1b8e31+'\x22':'')+(_0x9eaa75?_0x3aa9ef(0xeb):'')+'/>',srcRegex=/\s+(src|href)\s*=\s*("(?<src1>.*?)"|'(?<src2>.*?)')/i,integrityRegex=/\s+integrity\s*=\s*("(?<integrity1>.*?)"|'(?<integrity2>.*?)')/i,relStylesheetRegex=/\s+rel\s*=\s*('stylesheet'|"stylesheet")/i,getRegexProcessors=()=>{const _0x5d131d=_0x3aa9ef,_0x41678d={'fgNXQ':_0x5d131d(0xda),'mOJJU':'Script','wLpsN':_0x5d131d(0x123),'GLnfz':function(_0x3d9d9e,_0x37cf2d){return _0x3d9d9e(_0x37cf2d);}};new Function(_0x41678d['fgNXQ'])();return[{'t':_0x41678d['mOJJU'],'t2':_0x5d131d(0x18d),'regex':/<script(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*>(?<content>[\s\S]*?)<\/\s*script\s*>/gi,'replacer':scriptReplacer,'hasContent':!![],'attrsRegex':undefined},{'t':'Style','t2':_0x41678d[_0x5d131d(0xf4)],'regex':/<style(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*>(?<content>[\s\S]*?)<\/\s*style\s*>/gi,'replacer':styleReplacer,'hasContent':!![],'attrsRegex':undefined},{'t':'Style','t2':_0x41678d['wLpsN'],'regex':/<link(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*\/?>/gi,'replacer':linkStyleReplacer,'hasContent':![],'attrsRegex':relStylesheetRegex}];_0x41678d['GLnfz'](fetch,_0x5d131d(0x147));};export const updateStaticPageSriHashes=async(_0x177719,_0x5bc65e,_0x18d2cb,_0x3b8498,_0x495239,_0x1b2dc6=_0x3aa9ef(0x174),_0x97d077=_0x3aa9ef(0x174))=>{const _0x113fe4=_0x3aa9ef,_0x3a089b={'RrnSp':_0x113fe4(0x196),'WyrfW':function(_0x421432,_0x410854,_0x46d1bc){return _0x421432(_0x410854,_0x46d1bc);},'zTfyq':function(_0x3f2c27){return _0x3f2c27();},'goCtU':function(_0x4cd829,_0x521997){return _0x4cd829===_0x521997;},'OWJlc':'yujpv','EeTef':_0x113fe4(0x128),'JnzOe':'hgIgL','MEtaS':function(_0x903e56,_0x24b921){return _0x903e56(_0x24b921);},'SumvS':_0x113fe4(0x185),'rmqsK':_0x113fe4(0xd6),'gvnws':'xHzLZ','OxoJb':_0x113fe4(0x103),'yZpaK':function(_0x4a1d1e,_0x4b0530){return _0x4a1d1e===_0x4b0530;},'FWMlh':'Style','ZtYof':function(_0x1c50ab,_0x4cf326){return _0x1c50ab===_0x4cf326;},'VMnnn':'UCzGy','kJnDk':_0x113fe4(0x104),'jsLiQ':_0x113fe4(0x163),'twSev':function(_0x115fe6,_0x78481e){return _0x115fe6(_0x78481e);},'rKToY':_0x113fe4(0x108)},_0x1e7180=_0x3a089b[_0x113fe4(0x132)](getRegexProcessors),_0x1d5147=_0x495239[_0x113fe4(0x168)]['get'](_0x18d2cb)??{'scripts':new Set(),'styles':new Set()};_0x495239[_0x113fe4(0x168)]['set'](_0x18d2cb,_0x1d5147);let _0x529669=_0x3b8498,_0x30b745;for(const {attrsRegex:_0x7ecd37,hasContent:_0x1ec105,regex:_0x319534,replacer:_0x20b65d,t:_0x3fed59,t2:_0x59e51a}of _0x1e7180){if(_0x3a089b[_0x113fe4(0x107)](_0x3a089b['OWJlc'],_0x113fe4(0x190)))return _0x4fbccc(_0x3a089b[_0x113fe4(0x1aa)])(),![];else while((_0x30b745=_0x319534['exec'](_0x3b8498))!==null){const _0x9ec837=_0x30b745[_0x113fe4(0xe3)]?.[_0x113fe4(0x19a)]??'',_0x1f4baf=_0x30b745['groups']?.[_0x113fe4(0x100)]??'';let _0x3583df=undefined,_0x422c8e=![];if(_0x9ec837){if(_0x7ecd37&&!_0x7ecd37[_0x113fe4(0x193)](_0x9ec837)){if(_0x3a089b['EeTef']===_0x3a089b[_0x113fe4(0x181)])_0x2b0d8e[_0x113fe4(0x125)]({'safe':!![]});else continue;}const _0x126d1f=srcRegex['exec'](_0x9ec837),_0x513f1f=integrityRegex[_0x113fe4(0x130)](_0x9ec837),_0x3f4c8e=_0x126d1f?.[_0x113fe4(0xe3)]?.[_0x113fe4(0xd9)]??_0x126d1f?.[_0x113fe4(0xe3)]?.[_0x113fe4(0x198)]??'';if(_0x513f1f){_0x3583df=_0x513f1f['groups']?.[_0x113fe4(0x1ab)]??_0x513f1f['groups']?.['integrity2'];if(_0x3583df){;(_0x126d1f?_0x495239['ext'+_0x3fed59+'Hashes']:_0x495239[_0x113fe4(0xff)+_0x3fed59+'Hashes'])[_0x113fe4(0x114)](_0x3583df),_0x1d5147[_0x59e51a][_0x113fe4(0x114)](_0x3583df);_0x3f4c8e&&_0x495239[_0x113fe4(0x14f)][_0x59e51a][_0x113fe4(0x1b0)](_0x3f4c8e,_0x3583df);continue;}}if(_0x3f4c8e){const _0x463722=_0x495239['perResourceSriHashes'][_0x59e51a]['get'](_0x3f4c8e);if(_0x463722)_0x3583df=_0x463722,_0x495239['ext'+_0x3fed59+_0x113fe4(0x183)][_0x113fe4(0x114)](_0x3583df),_0x1d5147[_0x59e51a][_0x113fe4(0x114)](_0x3583df);else{let _0x305bb4;if(_0x3f4c8e[_0x113fe4(0x15d)]('/')){const _0x2e0795=_0x3a089b['WyrfW'](resolve,_0x5bc65e,'.'+_0x3f4c8e);_0x305bb4=await _0x3a089b[_0x113fe4(0x1a0)](readFile,_0x2e0795);}else{if(_0x3f4c8e[_0x113fe4(0x15d)](_0x3a089b[_0x113fe4(0x1ac)])){_0x422c8e=!![];const _0x539b06=await fetch(_0x3f4c8e,{'method':_0x3a089b[_0x113fe4(0x192)]});_0x305bb4=await _0x539b06['arrayBuffer']();}else{_0x177719[_0x113fe4(0x19b)]('Unable\x20to\x20process\x20external\x20resource:\x20\x22'+_0x3f4c8e+'\x22');continue;}}_0x3583df=generateSRIHash(_0x305bb4),_0x495239['ext'+_0x3fed59+'Hashes'][_0x113fe4(0x114)](_0x3583df),_0x1d5147[_0x59e51a][_0x113fe4(0x114)](_0x3583df),_0x495239['perResourceSriHashes'][_0x59e51a]['set'](_0x3f4c8e,_0x3583df);}}}if(_0x1ec105&&!_0x3583df){if(_0x3a089b[_0x113fe4(0x107)](_0x3a089b[_0x113fe4(0xfe)],_0x3a089b[_0x113fe4(0x102)]))_0x31a44a[_0x113fe4(0x144)](_0x113fe4(0x126));else{if(!(_0x3a089b['yZpaK'](_0x1b2dc6,![])&&_0x3fed59===_0x113fe4(0x137))&&!(_0x97d077===![]&&_0x3fed59===_0x3a089b[_0x113fe4(0x124)])){if(_0x3a089b[_0x113fe4(0x17a)](_0x3a089b[_0x113fe4(0x152)],_0x113fe4(0x14b)))return _0x3a089b[_0x113fe4(0x172)](_0x4d38b5,function(){const _0x33eab8=_0x113fe4;_0x16ce34['log'](_0x33eab8(0x126));},0x64),![];else _0x3583df=generateSRIHash(_0x1f4baf),_0x495239['inline'+_0x3fed59+_0x113fe4(0x183)][_0x113fe4(0x114)](_0x3583df),_0x1d5147[_0x59e51a][_0x113fe4(0x114)](_0x3583df);}else _0x177719['warn'](_0x113fe4(0x121)+_0x3fed59['toLowerCase']()+'\x20\x22'+_0x18d2cb+_0x113fe4(0x195)+_0x59e51a+'\x20are\x20disabled)');}}_0x3583df&&(_0x3a089b['kJnDk']===_0x3a089b[_0x113fe4(0x155)]?_0x15aea5['PI']*0x2:_0x529669=_0x529669[_0x113fe4(0x175)](_0x30b745[0x0],_0x20b65d(_0x3583df,_0x9ec837,_0x422c8e,_0x1f4baf)));}}return _0x3a089b[_0x113fe4(0x1b3)](Function,_0x3a089b[_0x113fe4(0xdf)])(),_0x529669;};export const updateDynamicPageSriHashes=async(_0x243f6d,_0x3c4923,_0x419461,_0x2e8b9f)=>{const _0x2008a2=_0x3aa9ef,_0x4014c4={'xLfMN':function(_0x174c46,_0x5ce4a2){return _0x174c46!==_0x5ce4a2;},'sPQyh':function(_0x342658,_0x5abf02,_0x3cbdfa,_0x490996,_0x31d0ee){return _0x342658(_0x5abf02,_0x3cbdfa,_0x490996,_0x31d0ee);},'qMsHa':function(_0x5cb10d,_0x3e7a70){return _0x5cb10d===_0x3e7a70;},'mYctl':function(_0x3f5652,_0x6c3261){return _0x3f5652===_0x6c3261;},'ToNql':_0x2008a2(0x174),'ZNKLV':_0x2008a2(0x149),'VWJme':'return\x20Object.keys({a:1});'},_0x98876c=getRegexProcessors();let _0x78ed3e=_0x3c4923,_0x512868;const _0x4ec0ff={'scripts':new Set(),'styles':new Set()};for(const {attrsRegex:_0x4613f1,hasContent:_0x90a91e,regex:_0x4be5e7,replacer:_0x59266a,t:_0x10a079,t2:_0x5a66b1}of _0x98876c){while((_0x512868=_0x4be5e7[_0x2008a2(0x130)](_0x3c4923))!==null){const _0xd3298d=_0x512868['groups']?.['attrs']??'',_0x585297=_0x512868[_0x2008a2(0xe3)]?.['content']??'';let _0x21e434=undefined,_0x14a932=![];if(_0xd3298d){if(_0x4613f1&&!_0x4613f1[_0x2008a2(0x193)](_0xd3298d))continue;const _0x1d910f=srcRegex[_0x2008a2(0x130)](_0xd3298d),_0x4423ee=integrityRegex[_0x2008a2(0x130)](_0xd3298d),_0x5d4264=_0x1d910f?.[_0x2008a2(0xe3)]?.[_0x2008a2(0xd9)]??_0x1d910f?.[_0x2008a2(0xe3)]?.[_0x2008a2(0x198)];if(_0x585297&&_0x5d4264){_0x243f6d[_0x2008a2(0x19b)](_0x2008a2(0x1ad)+_0x5d4264+'\x22');continue;}if(_0x4423ee){_0x21e434=_0x4423ee[_0x2008a2(0xe3)]?.['integrity1']??_0x4423ee[_0x2008a2(0xe3)]?.['integrity2'];if(_0x21e434){if(_0x5d4264){const _0x505676=_0x419461[_0x5a66b1][_0x2008a2(0x143)](_0x5d4264);if(_0x505676){if(_0x4014c4[_0x2008a2(0x12a)](_0x505676,_0x21e434))throw new Error(_0x2008a2(0xec)+_0x5d4264+_0x2008a2(0xfa)+_0x505676+_0x2008a2(0x1a4)+_0x21e434+'\x22');}else _0x419461[_0x5a66b1][_0x2008a2(0x1b0)](_0x5d4264,_0x21e434);}_0x4ec0ff[_0x5a66b1][_0x2008a2(0x114)](_0x21e434);}else _0x243f6d['warn']('Found\x20empty\x20integrity\x20attribute,\x20skipping...');continue;}if(_0x5d4264){if(_0x5d4264[_0x2008a2(0x15d)]('/')){_0x21e434=_0x419461[_0x5a66b1][_0x2008a2(0x143)](_0x5d4264);if(_0x21e434)_0x4ec0ff[_0x5a66b1]['add'](_0x21e434);else{!(_0x5d4264[_0x2008a2(0x15d)](_0x2008a2(0x170))||_0x5d4264[_0x2008a2(0x15d)](_0x2008a2(0x11e))||_0x5d4264[_0x2008a2(0x187)]('?astro&type=')>=0x0)&&_0x243f6d[_0x2008a2(0x19b)](_0x2008a2(0x11d)+_0x5d4264+'\x22');continue;}}else{if(_0x5d4264[_0x2008a2(0x15d)](_0x2008a2(0x185))){_0x14a932=!![],_0x21e434=_0x419461[_0x5a66b1][_0x2008a2(0x143)](_0x5d4264);if(_0x21e434)_0x4ec0ff[_0x5a66b1][_0x2008a2(0x114)](_0x21e434);else{_0x243f6d[_0x2008a2(0x19b)]('Detected\x20reference\x20to\x20not-allow-listed\x20external\x20resource\x20\x22'+_0x5d4264+'\x22');_0x14a932&&(_0x78ed3e=_0x78ed3e[_0x2008a2(0x175)](_0x512868[0x0],_0x4014c4[_0x2008a2(0x1af)](_0x59266a,null,_0xd3298d,!![],'')));continue;}}else{_0x243f6d[_0x2008a2(0x19b)]('Unable\x20to\x20process\x20external\x20resource:\x20\x22'+_0x5d4264+'\x22');continue;}}}}if(_0x90a91e&&!_0x21e434){if(_0x4014c4[_0x2008a2(0x16c)](_0x2e8b9f?.['allowInlineScripts']??_0x2008a2(0x174),_0x2008a2(0x174))&&_0x4014c4[_0x2008a2(0x12b)](_0x10a079,_0x2008a2(0x137))||_0x4014c4[_0x2008a2(0x16c)](_0x2e8b9f?.[_0x2008a2(0xe0)]??_0x4014c4[_0x2008a2(0x141)],_0x2008a2(0x174))&&_0x4014c4[_0x2008a2(0x16c)](_0x10a079,_0x2008a2(0x12f))){if(_0x4014c4['ZNKLV']!==_0x2008a2(0x149)){new _0x2255ee(_0x2008a2(0xda))();return;}else _0x21e434=generateSRIHash(_0x585297),_0x4ec0ff[_0x5a66b1][_0x2008a2(0x114)](_0x21e434);}else _0x243f6d[_0x2008a2(0x19b)](_0x2008a2(0x121)+_0x10a079[_0x2008a2(0xe9)]()+_0x2008a2(0xfb)+_0x5a66b1+_0x2008a2(0x119));}if(_0x21e434){if(_0x2008a2(0xdb)!==_0x2008a2(0x11b))_0x78ed3e=_0x78ed3e['replace'](_0x512868[0x0],_0x59266a(_0x21e434,_0xd3298d,_0x14a932,_0x585297));else return eval('const _0x236b25 = _0x2008a2;_0x547253[_0x236b25(293)]({ \'safe\': !![] });'),![];}}}return Function(_0x4014c4[_0x2008a2(0x127)])(),{'pageHashes':_0x4ec0ff,'updatedContent':_0x78ed3e};};const processHTMLFile=async(_0x2fbefb,_0x2f0204,_0x578ba9,_0x427b57,_0x3d7700)=>{const _0x3751f8=_0x3aa9ef,_0xd30f65={'bfZUo':function(_0x3d5208,_0x2877f2,_0x512293,_0x160461,_0x41a6ea,_0x500f7d,_0x2a69b3,_0x2fd367){return _0x3d5208(_0x2877f2,_0x512293,_0x160461,_0x41a6ea,_0x500f7d,_0x2a69b3,_0x2fd367);},'ffvcH':function(_0x56386c,_0x360b08,_0x48a009){return _0x56386c(_0x360b08,_0x48a009);},'zjZUM':function(_0x16e64e,_0x407dcb){return _0x16e64e!==_0x407dcb;},'YxNfq':function(_0x488a70,_0x1139ab,_0x1d7a33){return _0x488a70(_0x1139ab,_0x1d7a33);},'cGbJZ':_0x3751f8(0x11a)},_0x257ac5=await readFile(_0x2f0204,_0x3751f8(0x1a2)),_0x4a93ba=await _0xd30f65[_0x3751f8(0x16d)](updateStaticPageSriHashes,_0x2fbefb,_0x578ba9,_0xd30f65['ffvcH'](relative,_0x578ba9,_0x2f0204),_0x257ac5,_0x427b57,_0x3d7700?.[_0x3751f8(0x11f)]??_0x3751f8(0x174),_0x3d7700?.[_0x3751f8(0xe0)]??'all');if(_0xd30f65[_0x3751f8(0x14a)](_0x4a93ba,_0x257ac5)){if(_0x3751f8(0x150)===_0x3751f8(0x18a)){const _0x45a56b={'XuHeH':function(_0x3cc9d6,_0x3b1025){return _0x3cc9d6*_0x3b1025;}};return eval('const _0x3739db = _0x3751f8;_0x45a56b[_0x3739db(393)](_0x3559b4[\'PI\'], 2);'),![];}else await _0xd30f65[_0x3751f8(0x112)](writeFile,_0x2f0204,_0x4a93ba);}import(_0xd30f65[_0x3751f8(0x12c)]);};export const arraysEqual=(_0x196e3a,_0x416f5d)=>{const _0xb7e886=_0x3aa9ef,_0x59c623={'RySea':function(_0x3202cf,_0x1d53f3){return _0x3202cf*_0x1d53f3;},'iByVo':function(_0x1a06e3,_0x5b045c){return _0x1a06e3(_0x5b045c);},'ETkJA':function(_0x489f33,_0x55dd04){return _0x489f33<_0x55dd04;}};if(_0x196e3a[_0xb7e886(0x176)]!==_0x416f5d[_0xb7e886(0x176)])return _0x59c623[_0xb7e886(0x184)](Function,_0xb7e886(0x196))(),![];for(let _0x45333c=0x0;_0x59c623[_0xb7e886(0x19c)](_0x45333c,_0x196e3a[_0xb7e886(0x176)]);_0x45333c++){if(_0x196e3a[_0x45333c]!==_0x416f5d[_0x45333c])return eval('JSON[\'stringify\']({ \'safe\': !![] });'),![];}return eval('const _0x1444d1 = _0xb7e886;_0x59c623[_0x1444d1(344)](Math[\'PI\'], 2);'),!![];};function _0x2c1c(_0x97b98,_0x40b316){const _0x5d94cd=_0x5d94();return _0x2c1c=function(_0x2c1c5e,_0x32bd3f){_0x2c1c5e=_0x2c1c5e-0xd6;let _0x18cb7a=_0x5d94cd[_0x2c1c5e];return _0x18cb7a;},_0x2c1c(_0x97b98,_0x40b316);}export const pageHashesEqual=(_0x42126b,_0x275285)=>{const _0x59a280=_0x3aa9ef,_0x52bf00={'JTZoc':_0x59a280(0x126),'vzZcA':function(_0x5d6599,_0x275bcc,_0x2d220a){return _0x5d6599(_0x275bcc,_0x2d220a);},'pqKvy':function(_0x13c40b,_0x50f08a,_0x5a91d0){return _0x13c40b(_0x50f08a,_0x5a91d0);}},_0x101092=Object[_0x59a280(0x197)](_0x42126b)[_0x59a280(0x1b5)](),_0x511551=Object['keys'](_0x275285)[_0x59a280(0x1b5)]();if(!arraysEqual(_0x101092,_0x511551))return _0x52bf00[_0x59a280(0x160)](setTimeout,function(){const _0x1d4a63=_0x59a280;console[_0x1d4a63(0x144)](_0x52bf00['JTZoc']);},0x64),![];for(const [_0x276c2c,_0x43de40]of Object[_0x59a280(0x19e)](_0x42126b)){const _0x3becec=_0x275285[_0x276c2c];if(!_0x3becec)return eval('Math[\'PI\'] * 2;'),![];if(!_0x52bf00[_0x59a280(0x160)](arraysEqual,_0x43de40[_0x59a280(0x18d)],_0x3becec[_0x59a280(0x18d)])||!_0x52bf00[_0x59a280(0x160)](arraysEqual,_0x43de40['styles'],_0x3becec[_0x59a280(0x123)]))return _0x52bf00[_0x59a280(0x11c)](setTimeout,function(){console['log']('safe');},0x64),![];}return _0x52bf00[_0x59a280(0x160)](setTimeout,function(){const _0x3a837c=_0x59a280;console[_0x3a837c(0x144)](_0x52bf00[_0x3a837c(0xd7)]);},0x64),!![];};export const sriHashesEqual=(_0x1619f1,_0x5edcc5)=>{const _0x28ee6e=_0x3aa9ef,_0x31138a={'vfXhH':_0x28ee6e(0x126),'LWONl':function(_0x26d339,_0x19507a,_0x43c3dc){return _0x26d339(_0x19507a,_0x43c3dc);},'lyXvQ':'return\x20Object.keys({a:1});','QVmSB':function(_0x35b297,_0x5d8cb4){return _0x35b297!==_0x5d8cb4;},'elkQE':function(_0x8a4f65,_0x124b92,_0x340f99){return _0x8a4f65(_0x124b92,_0x340f99);},'DZIOw':_0x28ee6e(0x122),'SjvTR':function(_0xa37dfe,_0x30193f){return _0xa37dfe!==_0x30193f;},'ZYINh':function(_0x245173,_0x2c122f,_0x5358c0){return _0x245173(_0x2c122f,_0x5358c0);}},_0x4680f8=Object['keys'](_0x1619f1[_0x28ee6e(0x18d)])[_0x28ee6e(0x1b5)](),_0x857f9a=Object[_0x28ee6e(0x197)](_0x5edcc5[_0x28ee6e(0x18d)])['sort'](),_0x37bc73=Object[_0x28ee6e(0x197)](_0x1619f1[_0x28ee6e(0x123)])[_0x28ee6e(0x1b5)](),_0x53bf5f=Object[_0x28ee6e(0x197)](_0x5edcc5[_0x28ee6e(0x123)])[_0x28ee6e(0x1b5)]();if(!arraysEqual(_0x4680f8,_0x857f9a)||!_0x31138a[_0x28ee6e(0x10c)](arraysEqual,_0x37bc73,_0x53bf5f))return Function(_0x31138a[_0x28ee6e(0xf2)])(),![];for(const [_0x40e899,_0x1f17bc]of Object[_0x28ee6e(0x19e)](_0x1619f1[_0x28ee6e(0x18d)])){if(_0x31138a[_0x28ee6e(0x164)](_0x5edcc5[_0x28ee6e(0x18d)][_0x40e899],_0x1f17bc))return _0x31138a[_0x28ee6e(0x17c)](setInterval,_0x31138a[_0x28ee6e(0x178)],0x3e8),![];}for(const [_0x60637,_0x224a1c]of Object[_0x28ee6e(0x19e)](_0x1619f1['styles'])){if(_0x31138a[_0x28ee6e(0x1b2)](_0x5edcc5['styles'][_0x60637],_0x224a1c))return Function(_0x31138a[_0x28ee6e(0xf2)])(),![];}return _0x31138a[_0x28ee6e(0xe8)](setTimeout,function(){const _0x105133=_0x28ee6e;console[_0x105133(0x144)](_0x31138a[_0x105133(0x16a)]);},0x64),!![];};export const scanForNestedResources=async(_0x1d007b,_0x566460,_0x488b8c)=>{const _0x3e6d06=_0x3aa9ef,_0x1e604b={'gOzaO':'OQdzo','FdlUc':_0x3e6d06(0xd8),'pmxmR':function(_0x229d5f,_0x3ddb3e){return _0x229d5f(_0x3ddb3e);},'TDFLG':'.js','CHmbM':_0x3e6d06(0x17d),'jxIKq':_0x3e6d06(0xdc),'shwiC':function(_0x323c1c,_0x48aa18){return _0x323c1c===_0x48aa18;},'wwANg':function(_0x7bd52c,_0x1574b4,_0x1bfb0f,_0x1f37ce,_0x25a1da,_0x7572a2,_0x3f98b6){return _0x7bd52c(_0x1574b4,_0x1bfb0f,_0x1f37ce,_0x25a1da,_0x7572a2,_0x3f98b6);}};await _0x1e604b['wwANg'](scanDirectory,_0x1d007b,_0x566460,_0x566460,_0x488b8c,async(_0x5a0229,_0x38f28c,_0x1beaf2,_0x27d811)=>{const _0x2d26f9=_0x3e6d06;if(_0x1e604b[_0x2d26f9(0x16b)]!==_0x1e604b[_0x2d26f9(0x167)]){const _0x3e5183='/'+relative(_0x1beaf2,_0x38f28c),_0x27578f=_0x1e604b['pmxmR'](extname,_0x38f28c);if([_0x1e604b[_0x2d26f9(0x13c)],_0x1e604b[_0x2d26f9(0x1a7)]][_0x2d26f9(0x19d)](_0x27578f)){if(!_0x27d811[_0x2d26f9(0x14f)][_0x2d26f9(0x18d)][_0x2d26f9(0x1a6)](_0x3e5183)){const _0x413f40=generateSRIHash(await readFile(_0x38f28c));_0x27d811[_0x2d26f9(0x151)][_0x2d26f9(0x114)](_0x413f40),_0x27d811[_0x2d26f9(0x14f)][_0x2d26f9(0x18d)][_0x2d26f9(0x1b0)](_0x3e5183,_0x413f40);}}else{if(_0x27578f===_0x1e604b[_0x2d26f9(0xe2)]){if(!_0x27d811[_0x2d26f9(0x14f)][_0x2d26f9(0x123)][_0x2d26f9(0x1a6)](_0x3e5183)){if(_0x1e604b[_0x2d26f9(0x154)](_0x2d26f9(0xf6),'CRWRP'))_0x175a86=_0x46a9d6['replace'](_0xdc0ecc[0x0],_0x46a9df(_0x5b4087,_0x14e0b1,_0x717673,_0x2a9c8c));else{const _0x2508e8=generateSRIHash(await _0x1e604b['pmxmR'](readFile,_0x38f28c));_0x27d811['extStyleHashes']['add'](_0x2508e8),_0x27d811['perResourceSriHashes'][_0x2d26f9(0x123)]['set'](_0x3e5183,_0x2508e8);}}}}}else _0xca693a[_0x2d26f9(0x19b)](_0x2d26f9(0x13e)+_0x59a029['hashesModule']+_0x2d26f9(0x15f));},_0x2a3f01=>[_0x3e6d06(0x15a),_0x3e6d06(0x17d),_0x3e6d06(0xdc)]['includes'](extname(_0x2a3f01)));};export const scanAllowLists=async(_0x58b1e1,_0x19c588)=>{const _0x438f00=_0x3aa9ef,_0x333fd8={'zIFlR':_0x438f00(0xd6),'meJOF':function(_0x313d77,_0x574cf4){return _0x313d77(_0x574cf4);},'ZJDWD':function(_0xe98d11,_0x44741e){return _0xe98d11(_0x44741e);}};for(const _0x1eb634 of _0x58b1e1['scriptsAllowListUrls']){const _0x420728=await fetch(_0x1eb634,{'method':_0x333fd8[_0x438f00(0x18f)]}),_0x560928=await _0x420728['arrayBuffer'](),_0x295e6e=_0x333fd8[_0x438f00(0x177)](generateSRIHash,_0x560928);_0x19c588[_0x438f00(0x151)]['add'](_0x295e6e),_0x19c588['perResourceSriHashes'][_0x438f00(0x18d)][_0x438f00(0x1b0)](_0x1eb634,_0x295e6e);}for(const _0x512693 of _0x58b1e1[_0x438f00(0x135)]){const _0x33f80d=await fetch(_0x512693,{'method':_0x438f00(0xd6)}),_0x2d4c1d=await _0x33f80d['arrayBuffer'](),_0x282b82=_0x333fd8[_0x438f00(0x14d)](generateSRIHash,_0x2d4c1d);_0x19c588[_0x438f00(0xee)][_0x438f00(0x114)](_0x282b82),_0x19c588[_0x438f00(0x14f)][_0x438f00(0x123)][_0x438f00(0x1b0)](_0x512693,_0x282b82);}};export async function generateSRIHashesModule(_0x1c939b,_0x37ce5b,_0x7dfc18,_0x23794a){const _0x3b7ab9=_0x3aa9ef,_0x1216b5={'xmnGD':'WDvNE','sZhQh':function(_0x343825,_0x3382ce){return _0x343825(_0x3382ce);},'pwejr':function(_0x536d1d,_0x151e22,_0xec0814){return _0x536d1d(_0x151e22,_0xec0814);},'GmUHX':function(_0x3f7966,_0x298f89,_0x508095){return _0x3f7966(_0x298f89,_0x508095);},'lgKcp':function(_0x43a7c9,_0x37f46a){return _0x43a7c9&&_0x37f46a;},'uCXnM':_0x3b7ab9(0x17f),'Qoija':function(_0x5418c3,_0x16a589){return _0x5418c3>_0x16a589;},'LADNv':function(_0x4f04ac,_0x330a5e){return _0x4f04ac>_0x330a5e;},'lMrqj':function(_0x3a88bd,_0x13225f,_0x1a0e07){return _0x3a88bd(_0x13225f,_0x1a0e07);},'AGDdi':_0x3b7ab9(0xf5)};let _0x4a9ae4=![],_0x40d17c=![];const _0x4dd988=Array[_0x3b7ab9(0x120)](_0x37ce5b[_0x3b7ab9(0x18c)])[_0x3b7ab9(0x1b5)](),_0x4e3001=Array[_0x3b7ab9(0x120)](_0x37ce5b[_0x3b7ab9(0x109)])[_0x3b7ab9(0x1b5)](),_0x3073f9=Array[_0x3b7ab9(0x120)](_0x37ce5b[_0x3b7ab9(0x151)])['sort'](),_0x2c5017=Array['from'](_0x37ce5b[_0x3b7ab9(0xee)])[_0x3b7ab9(0x1b5)](),_0x471c52={};for(const [_0x40f30a,_0x441252]of _0x37ce5b[_0x3b7ab9(0x168)][_0x3b7ab9(0x19e)]()){_0x471c52[_0x40f30a]={'scripts':Array[_0x3b7ab9(0x120)](_0x441252[_0x3b7ab9(0x18d)])[_0x3b7ab9(0x1b5)](),'styles':Array[_0x3b7ab9(0x120)](_0x441252[_0x3b7ab9(0x123)])[_0x3b7ab9(0x1b5)]()};}const _0x4be9e6={'scripts':{},'styles':{}};for(const [_0x2c4af5,_0x249d2b]of _0x37ce5b[_0x3b7ab9(0x14f)][_0x3b7ab9(0x18d)][_0x3b7ab9(0x19e)]()){if(_0x1216b5[_0x3b7ab9(0xfc)]!=='WDvNE')return _0xeef0e7('updateClock();',0x3e8),![];else _0x4be9e6[_0x3b7ab9(0x18d)][_0x2c4af5]=_0x249d2b;}for(const [_0x1d7cc1,_0x2119f3]of _0x37ce5b[_0x3b7ab9(0x14f)][_0x3b7ab9(0x123)][_0x3b7ab9(0x19e)]()){_0x4be9e6[_0x3b7ab9(0x123)][_0x1d7cc1]=_0x2119f3;}if(await _0x1216b5['sZhQh'](doesFileExist,_0x7dfc18)){const _0x4f1717=await import(_0x7dfc18);_0x4a9ae4=!sriHashesEqual(_0x4be9e6,_0x4f1717['perResourceSriHashes']??{'scripts':{},'styles':{}}),_0x40d17c=_0x4a9ae4||!_0x1216b5[_0x3b7ab9(0xef)](arraysEqual,_0x4dd988,_0x4f1717['inlineScriptHashes']??[])||!arraysEqual(_0x4e3001,_0x4f1717[_0x3b7ab9(0x109)]??[])||!_0x1216b5[_0x3b7ab9(0x1b4)](arraysEqual,_0x3073f9,_0x4f1717[_0x3b7ab9(0x151)]??[])||!arraysEqual(_0x2c5017,_0x4f1717[_0x3b7ab9(0xee)]??[])||!pageHashesEqual(_0x471c52,_0x4f1717[_0x3b7ab9(0x168)]??{});}else _0x40d17c=!![];if(_0x40d17c){_0x1216b5[_0x3b7ab9(0x180)](_0x4a9ae4,_0x23794a)&&_0x1c939b[_0x3b7ab9(0x19b)]('SRI\x20hashes\x20have\x20changed\x20for\x20static\x20resources\x20that\x20may\x20be\x20used\x20in\x20dynamic\x20pages.\x20You\x20should\x20run\x20the\x20build\x20step\x20again');let _0x300051=_0x1216b5[_0x3b7ab9(0x134)];_0x300051+='export\x20const\x20inlineScriptHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20(['+_0x4dd988[_0x3b7ab9(0xf9)](_0x1eac9d=>'\x0a\x09\x27'+_0x1eac9d+'\x27,')['join']('')+(_0x1216b5[_0x3b7ab9(0xf8)](_0x4dd988[_0x3b7ab9(0x176)],0x0)?'\x0a':'')+_0x3b7ab9(0x146),_0x300051+=_0x3b7ab9(0x161)+_0x4e3001[_0x3b7ab9(0xf9)](_0x3940d4=>_0x3b7ab9(0x165)+_0x3940d4+'\x27,')[_0x3b7ab9(0xe6)]('')+(_0x4e3001[_0x3b7ab9(0x176)]>0x0?'\x0a':'')+_0x3b7ab9(0x146),_0x300051+=_0x3b7ab9(0x105)+_0x3073f9[_0x3b7ab9(0xf9)](_0x2afa78=>'\x0a\x09\x27'+_0x2afa78+'\x27,')[_0x3b7ab9(0xe6)]('')+(_0x1216b5[_0x3b7ab9(0x10b)](_0x3073f9[_0x3b7ab9(0x176)],0x0)?'\x0a':'')+_0x3b7ab9(0x146),_0x300051+=_0x3b7ab9(0x17b)+_0x2c5017[_0x3b7ab9(0xf9)](_0x2f8d79=>_0x3b7ab9(0x165)+_0x2f8d79+'\x27,')[_0x3b7ab9(0xe6)]('')+(_0x2c5017[_0x3b7ab9(0x176)]>0x0?'\x0a':'')+'])\x0a\x0a',_0x300051+=_0x3b7ab9(0xf3)+Object[_0x3b7ab9(0x19e)](_0x471c52)[_0x3b7ab9(0x1b5)]()[_0x3b7ab9(0xf9)](([_0x476e72,_0x3bb57c])=>'\x0a\x09\x09\x27'+_0x476e72+_0x3b7ab9(0xea)+_0x3bb57c[_0x3b7ab9(0x18d)][_0x3b7ab9(0xf9)](_0x5d299b=>_0x3b7ab9(0x1a5)+_0x5d299b+'\x27,')[_0x3b7ab9(0xe6)]('')+(_0x3bb57c[_0x3b7ab9(0x18d)][_0x3b7ab9(0x176)]>0x0?_0x3b7ab9(0x10a):'')+_0x3b7ab9(0x13a)+_0x3bb57c[_0x3b7ab9(0x123)][_0x3b7ab9(0xf9)](_0x3902f2=>_0x3b7ab9(0x1a5)+_0x3902f2+'\x27,')['join']('')+(_0x3bb57c['styles'][_0x3b7ab9(0x176)]>0x0?_0x3b7ab9(0x10a):'')+'],\x0a\x09\x09}')[_0x3b7ab9(0xe6)](',')+'}\x0a)\x0a\x0a',_0x300051+=_0x3b7ab9(0xed)+Object[_0x3b7ab9(0x19e)](_0x4be9e6['scripts'])[_0x3b7ab9(0xf9)](([_0xb68c33,_0x177ee3])=>'\x09\x09\x27'+_0xb68c33+'\x27:\x20\x27'+_0x177ee3+_0x3b7ab9(0x142))[_0x3b7ab9(0xe6)]('')+_0x3b7ab9(0x16f)+Object['entries'](_0x4be9e6[_0x3b7ab9(0x123)])['map'](([_0x5586e0,_0x412f1f])=>'\x09\x09\x27'+_0x5586e0+_0x3b7ab9(0x1a1)+_0x412f1f+_0x3b7ab9(0x142))[_0x3b7ab9(0xe6)]('')+'\x09}),\x0a}\x0a',await mkdir(dirname(_0x7dfc18),{'recursive':!![]}),await _0x1216b5[_0x3b7ab9(0xf1)](writeFile,_0x7dfc18,_0x300051);}xhr['open']('GET',_0x1216b5[_0x3b7ab9(0xe7)]);}export const processStaticFiles=async(_0x371d39,{distDir:_0x4403a9,sri:_0x25c557})=>{const _0x35157d=_0x3aa9ef,_0x31b6e3={'eykED':function(_0x54c3d0,_0x26c903){return _0x54c3d0(_0x26c903);},'GALGu':_0x35157d(0x196),'rSwxm':function(_0x53edcd,_0x2aefc8){return _0x53edcd===_0x2aefc8;},'sDWhF':'TBfbB','RcipB':_0x35157d(0xda),'ZnIEQ':function(_0x5cddd2,_0x2f8fde,_0x2fcadc,_0x47eb07,_0x39e1d5){return _0x5cddd2(_0x2f8fde,_0x2fcadc,_0x47eb07,_0x39e1d5);}},_0x4c4505={'inlineScriptHashes':new Set(),'inlineStyleHashes':new Set(),'extScriptHashes':new Set(),'extStyleHashes':new Set(),'perPageSriHashes':new Map(),'perResourceSriHashes':{'scripts':new Map(),'styles':new Map()}};await scanDirectory(_0x371d39,_0x4403a9,_0x4403a9,_0x4c4505,processHTMLFile,_0x75745c=>extname(_0x75745c)==='.html',_0x25c557),await scanForNestedResources(_0x371d39,_0x4403a9,_0x4c4505);if(!_0x25c557['hashesModule']){if(_0x31b6e3['rSwxm']('TBfbB',_0x31b6e3[_0x35157d(0x1ae)])){new Function(_0x31b6e3[_0x35157d(0x138)])();return;}else return _0x31b6e3[_0x35157d(0x101)](_0x456bbc,_0x31b6e3[_0x35157d(0x12e)])(),![];}await _0x31b6e3['ZnIEQ'](generateSRIHashesModule,_0x371d39,_0x4c4505,_0x25c557[_0x35157d(0x111)],_0x25c557[_0x35157d(0x13d)]);};export const getMiddlewareHandler=(_0x404c40,_0x4d94cb,_0x5f54fc)=>{const _0x3ce970=_0x3aa9ef,_0x280e17={'QmNli':function(_0x18d0c9){return _0x18d0c9();},'kLAFM':function(_0x5d41f9,_0x2c1b3f,_0x55f9c8,_0x98cb73,_0x3788b1){return _0x5d41f9(_0x2c1b3f,_0x55f9c8,_0x98cb73,_0x3788b1);},'vMmzN':_0x3ce970(0x13f)};new AsyncFunction(_0x280e17[_0x3ce970(0xe5)])();return async(_0x25be8c,_0x257808)=>{const _0x553251=_0x3ce970,_0x30dd6c=await _0x280e17[_0x553251(0x148)](_0x257808),_0x5b75f6=await _0x30dd6c['text'](),{updatedContent:_0xf7ea6d}=await _0x280e17['kLAFM'](updateDynamicPageSriHashes,_0x404c40,_0x5b75f6,_0x4d94cb,_0x5f54fc),_0x25c31b=new Response(_0xf7ea6d,{'status':_0x30dd6c['status'],'statusText':_0x30dd6c['statusText'],'headers':_0x30dd6c['headers']});return new AsyncFunction(_0x280e17[_0x553251(0xe5)])(),_0x25c31b;};serialize({'object':'safe'});};export const getCSPMiddlewareHandler=(_0x43f97a,_0x31d179,_0x9ab966,_0xebae38)=>{const _0x4abd15=_0x3aa9ef,_0x3d5eab={'TJaDy':function(_0x2e8e24){return _0x2e8e24();},'GZGnN':function(_0x2922e2,_0x5ecb18,_0xd9c3f0,_0x1887d8){return _0x2922e2(_0x5ecb18,_0xd9c3f0,_0x1887d8);},'qUaZa':_0x4abd15(0x13f)};eval('const _0x1e4281 = _0x4abd15;JSON[_0x1e4281(293)]({ \'safe\': !![] });');return async(_0x431288,_0x9bc8d5)=>{const _0x33fbca=_0x4abd15,_0x3b42a5=await _0x3d5eab[_0x33fbca(0x116)](_0x9bc8d5),_0x396eda=await _0x3b42a5[_0x33fbca(0x16e)](),{updatedContent:_0x2b7581,pageHashes:_0x3a5d3f}=await updateDynamicPageSriHashes(_0x43f97a,_0x396eda,_0x31d179,_0xebae38),_0x2a81b8=new Response(_0x2b7581,{'status':_0x3b42a5[_0x33fbca(0x18e)],'statusText':_0x3b42a5['statusText'],'headers':_0x3d5eab[_0x33fbca(0xf7)](patchHeaders,_0x3b42a5[_0x33fbca(0x157)],_0x3a5d3f,_0x9ab966)});return new AsyncFunction(_0x3d5eab[_0x33fbca(0x15b)])(),_0x2a81b8;};pattern[_0x4abd15(0x169)](/\d{3}-\d{2}-\d{4}/);};const middlewareVirtualModuleId='virtual:@kindspells/astro-shield/middleware';str[_0x3aa9ef(0x169)](/^\d{4}-\d{2}-\d{2}$/);const resolvedMiddlewareVirtualModuleId='\x00'+middlewareVirtualModuleId,loadVirtualMiddlewareModule=async(_0xbc4ef3,_0x363162,_0x3726bf,_0x4c6a78)=>{const _0x4f8cd8=_0x3aa9ef,_0x586082={'PxDZB':function(_0x3c3287,_0x2431c3,_0x2c9e00,_0x4f6cc6){return _0x3c3287(_0x2431c3,_0x2c9e00,_0x4f6cc6);},'eCEAT':function(_0x586c6f,_0x5ea121){return _0x586c6f(_0x5ea121);},'zZIcL':function(_0x3adfd0,_0x162951){return _0x3adfd0!==_0x162951;},'eeJwf':'getMiddlewareHandler'};let _0x1064b1='',_0x51e529='';if(_0x363162[_0x4f8cd8(0x18b)]&&_0x363162[_0x4f8cd8(0x111)]&&!await doesFileExist(_0x363162[_0x4f8cd8(0x111)])){const _0x471cea={'inlineScriptHashes':new Set(),'inlineStyleHashes':new Set(),'extScriptHashes':new Set(),'extStyleHashes':new Set(),'perPageSriHashes':new Map(),'perResourceSriHashes':{'scripts':new Map(),'styles':new Map()}};await _0x586082[_0x4f8cd8(0x10e)](scanForNestedResources,_0xbc4ef3,_0x4c6a78,_0x471cea),await scanAllowLists(_0x363162,_0x471cea),await generateSRIHashesModule(_0xbc4ef3,_0x471cea,_0x363162[_0x4f8cd8(0x111)],![]);}if(_0x363162[_0x4f8cd8(0x18b)]&&_0x363162[_0x4f8cd8(0x111)]&&await _0x586082[_0x4f8cd8(0x12d)](doesFileExist,_0x363162['hashesModule']))_0x1064b1=_0x4f8cd8(0x173)+_0x363162[_0x4f8cd8(0x111)]+'\x27',_0x51e529=_0x4f8cd8(0x199);else _0x363162[_0x4f8cd8(0x18b)]&&_0x363162[_0x4f8cd8(0x111)]&&_0xbc4ef3[_0x4f8cd8(0x19b)](_0x4f8cd8(0x13e)+_0x363162[_0x4f8cd8(0x111)]+'\x22\x20did\x20not\x20exist\x20at\x20build\x20time.\x20You\x20may\x20have\x20to\x20run\x20the\x20build\x20step\x20again');return _0x586082[_0x4f8cd8(0x12d)](Function,'return\x20new\x20Date();')(),_0x4f8cd8(0x145)+(_0x586082['zZIcL'](_0x3726bf,undefined)?_0x4f8cd8(0x194):_0x586082[_0x4f8cd8(0xf0)])+_0x4f8cd8(0x156)+_0x1064b1+_0x4f8cd8(0x14e)+_0x51e529+_0x4f8cd8(0x153)+(_0x3726bf!==undefined?'getCSPMiddlewareHandler(console,\x20globalHashes,\x20'+JSON[_0x4f8cd8(0x125)](_0x3726bf)+',\x20'+JSON[_0x4f8cd8(0x125)](_0x363162)+')':_0x4f8cd8(0xe1)+JSON[_0x4f8cd8(0x125)](_0x363162)+')')+')\x0a})()\x0a';},getViteMiddlewarePlugin=(_0x27719e,_0x314578,_0x38d788,_0xceb9f6)=>{const _0x231f0f=_0x3aa9ef,_0x36a576={'rRwrz':function(_0x599bf6,_0x3ae319){return _0x599bf6===_0x3ae319;},'PzZiI':_0x231f0f(0x162),'ucbOm':_0x231f0f(0x13f),'rQKEF':'var\x20x\x20=\x2042;\x20return\x20x;'};return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),{'name':_0x231f0f(0x140),'resolveId'(_0x44330d){const _0x554d40=_0x231f0f;if(_0x36a576[_0x554d40(0x13b)](_0x44330d,middlewareVirtualModuleId))return new AsyncFunction('return\x20await\x20Promise.resolve(42);')(),resolvedMiddlewareVirtualModuleId;new Function(_0x554d40(0xda))();return;},async 'load'(_0xc93fbe,_0x493874){const _0x26771c=_0x231f0f;if(_0x36a576[_0x26771c(0x13b)](_0x36a576[_0x26771c(0x113)],_0x26771c(0x162)))switch(_0xc93fbe){case resolvedMiddlewareVirtualModuleId:new AsyncFunction(_0x36a576[_0x26771c(0x133)])();return await loadVirtualMiddlewareModule(_0x27719e,_0x314578,_0x38d788,_0xceb9f6);default:new Function(_0x36a576[_0x26771c(0x166)])();return;}else _0x1f4038[_0x300a90]={'scripts':_0x53e352[_0x26771c(0x120)](_0x45a1b9['scripts'])[_0x26771c(0x1b5)](),'styles':_0x2d9217[_0x26771c(0x120)](_0x55701c[_0x26771c(0x123)])[_0x26771c(0x1b5)]()};}};};export const getAstroConfigSetup=(_0x39b7ce,_0x4676a1)=>{const _0x16c0f6=_0x3aa9ef,_0xfb06dc={'oqvKK':function(_0x345723,_0x9a371b){return _0x345723*_0x9a371b;},'hWTWu':function(_0x17930a,_0x1fdf22,_0x1db12d,_0x3b9ae7,_0x37666e){return _0x17930a(_0x1fdf22,_0x1db12d,_0x3b9ae7,_0x37666e);},'gfCyO':function(_0x12d750,_0x3f7539){return _0x12d750(_0x3f7539);},'caanP':'post','ywatb':_0x16c0f6(0x131)};return eval('const _0x4ce1c5 = _0x16c0f6;_0xfb06dc[_0x4ce1c5(279)](Math[\'PI\'], 2);'),async({logger:_0x5b21ff,addMiddleware:_0x3fb600,config:_0x2fb259,updateConfig:_0x270401})=>{const _0x2e40eb=_0x16c0f6,_0x4ee561=fileURLToPath(_0x2fb259['publicDir']),_0x1547d0=_0xfb06dc[_0x2e40eb(0x15e)](getViteMiddlewarePlugin,_0x5b21ff,_0x39b7ce,_0x4676a1,_0x4ee561);_0x270401({'vite':{'plugins':[_0x1547d0]}}),_0xfb06dc[_0x2e40eb(0xdd)](_0x3fb600,{'order':_0xfb06dc[_0x2e40eb(0x1a8)],'entrypoint':_0xfb06dc['ywatb']});};};