'use strict';const _0x360d89=_0x153c;(function(_0x5ab6d9,_0x139c57){const _0x1a3655=_0x153c,_0x2549dc=_0x5ab6d9();while(!![]){try{const _0x40a8d9=-parseInt(_0x1a3655(0x23a))/0x1*(parseInt(_0x1a3655(0x242))/0x2)+parseInt(_0x1a3655(0x21d))/0x3*(-parseInt(_0x1a3655(0x24e))/0x4)+parseInt(_0x1a3655(0x21c))/0x5+parseInt(_0x1a3655(0x272))/0x6*(-parseInt(_0x1a3655(0x207))/0x7)+parseInt(_0x1a3655(0x205))/0x8*(-parseInt(_0x1a3655(0x215))/0x9)+-parseInt(_0x1a3655(0x22d))/0xa*(-parseInt(_0x1a3655(0x1f7))/0xb)+parseInt(_0x1a3655(0x1fc))/0xc*(parseInt(_0x1a3655(0x27e))/0xd);if(_0x40a8d9===_0x139c57)break;else _0x2549dc['push'](_0x2549dc['shift']());}catch(_0x303929){_0x2549dc['push'](_0x2549dc['shift']());}}}(_0x66e0,0xb8546));function _0x153c(_0x10d152,_0x472e6c){const _0x66e0b0=_0x66e0();return _0x153c=function(_0x153cec,_0x71ad9e){_0x153cec=_0x153cec-0x1db;let _0x52a75f=_0x66e0b0[_0x153cec];return _0x52a75f;},_0x153c(_0x10d152,_0x472e6c);}const EventEmitter=require('events'),http=require(_0x360d89(0x29e)),{Duplex}=require(_0x360d89(0x25b)),{createHash}=require(_0x360d89(0x20d)),extension=require('./extension'),PerMessageDeflate=require(_0x360d89(0x296)),subprotocol=require(_0x360d89(0x206)),WebSocket=require(_0x360d89(0x227)),{GUID,kWebSocket}=require(_0x360d89(0x23d)),keyRegex=/^[+/0-9A-Za-z]{22}==$/,RUNNING=0x0,CLOSING=0x1,CLOSED=0x2;class WebSocketServer extends EventEmitter{constructor(_0x54e03e,_0x2aeb90){const _0x87c46d=_0x360d89,_0x490eb8={'gZhuk':_0x87c46d(0x240),'BGVKC':function(_0x35a620,_0x2e5550){return _0x35a620*_0x2e5550;},'YawTC':function(_0xa49b94,_0xdae9ec){return _0xa49b94===_0xdae9ec;},'pLGCB':_0x87c46d(0x22f),'ZybBQ':_0x87c46d(0x274),'SkOlb':function(_0x2eed9c,_0x58cc4d){return _0x2eed9c+_0x58cc4d;},'sWFcn':_0x87c46d(0x21e),'zDQpd':'must\x20be\x20specified','nFWiR':_0x87c46d(0x1de),'VOliG':_0x87c46d(0x1ed)};super(),_0x54e03e={'allowSynchronousEvents':!![],'autoPong':!![],'maxPayload':_0x490eb8['BGVKC'](0x64,0x400)*0x400,'skipUTF8Validation':![],'perMessageDeflate':![],'handleProtocols':null,'clientTracking':!![],'verifyClient':null,'noServer':![],'backlog':null,'server':null,'host':null,'path':null,'port':null,'WebSocket':WebSocket,..._0x54e03e};if(_0x54e03e[_0x87c46d(0x1ef)]==null&&!_0x54e03e['server']&&!_0x54e03e[_0x87c46d(0x218)]||_0x54e03e['port']!=null&&(_0x54e03e[_0x87c46d(0x203)]||_0x54e03e[_0x87c46d(0x218)])||_0x54e03e[_0x87c46d(0x203)]&&_0x54e03e['noServer']){if(_0x490eb8[_0x87c46d(0x260)](_0x490eb8['pLGCB'],_0x490eb8['ZybBQ']))_0x104442[_0x87c46d(0x286)](_0x107ea9,this);else throw new TypeError(_0x490eb8[_0x87c46d(0x288)](_0x490eb8[_0x87c46d(0x293)],_0x490eb8[_0x87c46d(0x209)]));}if(_0x54e03e['port']!=null)this[_0x87c46d(0x24c)]=http[_0x87c46d(0x261)]((_0x5cb2e0,_0x2f6fb5)=>{const _0x574625=_0x87c46d,_0xe286eb=http['STATUS_CODES'][0x1aa];_0x2f6fb5[_0x574625(0x25f)](0x1aa,{'Content-Length':_0xe286eb[_0x574625(0x213)],'Content-Type':'text/plain'}),_0x2f6fb5[_0x574625(0x26d)](_0xe286eb);}),this['_server'][_0x87c46d(0x290)](_0x54e03e[_0x87c46d(0x1ef)],_0x54e03e[_0x87c46d(0x273)],_0x54e03e[_0x87c46d(0x27a)],_0x2aeb90);else{if(_0x54e03e[_0x87c46d(0x203)]){if(_0x490eb8[_0x87c46d(0x23f)]!==_0x87c46d(0x1de)){if(_0xdb7581[_0x87c46d(0x1fd)](_0x490eb8[_0x87c46d(0x29f)])){const _0xbce267=new _0x4ca16b(_0x432c37);_0x1fc0de['captureStackTrace'](_0xbce267,_0x38dcd5),_0x2c1e52['emit'](_0x490eb8['gZhuk'],_0xbce267,_0x5b6f07,_0x3c03eb);}else _0x557b31(_0x536324,_0x2718bb,_0x2b0868);}else this[_0x87c46d(0x24c)]=_0x54e03e[_0x87c46d(0x203)];}}if(this[_0x87c46d(0x24c)]){const _0x237763=this['emit'][_0x87c46d(0x266)](this,'connection');this[_0x87c46d(0x28f)]=addListeners(this['_server'],{'listening':this['emit'][_0x87c46d(0x266)](this,_0x490eb8[_0x87c46d(0x295)]),'error':this['emit']['bind'](this,_0x87c46d(0x252)),'upgrade':(_0x385fe1,_0x49cdbd,_0x292966)=>{const _0x2ea5bc=_0x87c46d;this[_0x2ea5bc(0x271)](_0x385fe1,_0x49cdbd,_0x292966,_0x237763);}});}if(_0x54e03e[_0x87c46d(0x255)]===!![])_0x54e03e[_0x87c46d(0x255)]={};_0x54e03e[_0x87c46d(0x1fa)]&&(this[_0x87c46d(0x29c)]=new Set(),this[_0x87c46d(0x20f)]=![]),this[_0x87c46d(0x238)]=_0x54e03e,this[_0x87c46d(0x1e0)]=RUNNING;}['address'](){const _0x2741c7=_0x360d89,_0x1fc64e={'inrzo':_0x2741c7(0x287)};if(this['options']['noServer'])throw new Error(_0x1fc64e[_0x2741c7(0x26c)]);if(!this[_0x2741c7(0x24c)])return null;return this[_0x2741c7(0x24c)][_0x2741c7(0x246)]();}[_0x360d89(0x211)](_0xd544d5){const _0x455d56=_0x360d89,_0x16f01c={'mHpgv':function(_0x1af3e7,_0x760927){return _0x1af3e7(_0x760927);},'nvmJC':function(_0x8648ff,_0x3b7e0b,_0x5573b3){return _0x8648ff(_0x3b7e0b,_0x5573b3);},'CcPMr':function(_0x25ac94,_0x53092a){return _0x25ac94(_0x53092a);},'nulAH':function(_0x9f576,_0x4ff8d7){return _0x9f576===_0x4ff8d7;},'yWmDn':_0x455d56(0x211),'sxJit':_0x455d56(0x24f),'aAHQZ':'eqXrO','eSoam':function(_0x409002,_0xbc274f){return _0x409002!==_0xbc274f;}};if(_0x16f01c[_0x455d56(0x23e)](this[_0x455d56(0x1e0)],CLOSED)){_0xd544d5&&this['once'](_0x16f01c['yWmDn'],()=>{const _0x11e24d=_0x455d56;_0x16f01c[_0x11e24d(0x26b)](_0xd544d5,new Error('The\x20server\x20is\x20not\x20running'));});process[_0x455d56(0x286)](emitClose,this);return;}if(_0xd544d5)this['once'](_0x455d56(0x211),_0xd544d5);if(this[_0x455d56(0x1e0)]===CLOSING)return;this[_0x455d56(0x1e0)]=CLOSING;if(this[_0x455d56(0x238)]['noServer']||this[_0x455d56(0x238)][_0x455d56(0x203)]){if(_0x455d56(0x235)!==_0x16f01c[_0x455d56(0x1e6)]){this[_0x455d56(0x24c)]&&(this[_0x455d56(0x28f)](),this['_removeListeners']=this['_server']=null);if(this[_0x455d56(0x29c)])_0x16f01c[_0x455d56(0x269)]!==_0x16f01c[_0x455d56(0x269)]?this[_0x455d56(0x277)]():!this[_0x455d56(0x29c)][_0x455d56(0x280)]?process[_0x455d56(0x286)](emitClose,this):this[_0x455d56(0x20f)]=!![];else{if(_0x16f01c[_0x455d56(0x23e)](_0x455d56(0x231),_0x455d56(0x231)))process['nextTick'](emitClose,this);else{_0x16f01c[_0x455d56(0x279)](_0x292021,_0x59a68d,0x190);return;}}}else{if(!_0x480055)return _0x1a8bfe(_0x39083f,_0x37311e||0x191,_0x14d4d6,_0x4ff562);this['completeUpgrade'](_0x1f10b8,_0x301d79,_0x4ccc86,_0x37dc3f,_0x30c23f,_0x2be937,_0x2ae2d4);}}else{if(_0x16f01c[_0x455d56(0x297)](_0x455d56(0x25e),_0x455d56(0x263))){const _0x36b343=this[_0x455d56(0x24c)];this[_0x455d56(0x28f)](),this[_0x455d56(0x28f)]=this[_0x455d56(0x24c)]=null,_0x36b343['close'](()=>{const _0x1668fd=_0x455d56;_0x16f01c[_0x1668fd(0x1e1)](emitClose,this);});}else{const _0x591ec1=new _0x9ec142(_0x57d8f5);_0x230038[_0x455d56(0x26f)](_0x591ec1,_0x4c32b2),_0x323c42['emit']('wsClientError',_0x591ec1,_0x7594ce,_0x5c0490);}}}[_0x360d89(0x236)](_0x5d723e){const _0x99a937=_0x360d89,_0x10a35d={'Orvrv':function(_0x3a2e80,_0x11d636){return _0x3a2e80!==_0x11d636;},'FYisR':function(_0x2bbf4f,_0x200e10){return _0x2bbf4f!==_0x200e10;}};if(this[_0x99a937(0x238)]['path']){const _0x16f69a=_0x5d723e[_0x99a937(0x284)][_0x99a937(0x241)]('?'),_0x467d7c=_0x10a35d['Orvrv'](_0x16f69a,-0x1)?_0x5d723e['url']['slice'](0x0,_0x16f69a):_0x5d723e['url'];if(_0x10a35d[_0x99a937(0x221)](_0x467d7c,this[_0x99a937(0x238)][_0x99a937(0x1e4)]))return![];}return!![];}[_0x360d89(0x271)](_0x2596ff,_0x461fd6,_0x2e0b62,_0x5e1288){const _0x2ac27b=_0x360d89,_0x1203ad={'wIVrm':function(_0x13a545,_0x52cd44){return _0x13a545+_0x52cd44;},'gSfCT':_0x2ac27b(0x211),'ffiBP':_0x2ac27b(0x1f2),'zkFGI':function(_0xe2ec58,_0x4555c8){return _0xe2ec58===_0x4555c8;},'QuJBH':_0x2ac27b(0x275),'OsAST':_0x2ac27b(0x219),'vFmPE':function(_0x3db5bd,_0x1baf0d){return _0x3db5bd!==_0x1baf0d;},'jmqTS':function(_0x1c9440,_0x43a9b9,_0x345452,_0x5dbdc5,_0x468198,_0x297f68){return _0x1c9440(_0x43a9b9,_0x345452,_0x5dbdc5,_0x468198,_0x297f68);},'UgiRO':function(_0x17c28e,_0x5175c4){return _0x17c28e!==_0x5175c4;},'xqFNV':_0x2ac27b(0x216),'tNmXk':function(_0x294ba2,_0x3e2943){return _0x294ba2===_0x3e2943;},'XstaW':_0x2ac27b(0x1dc),'tEHfU':_0x2ac27b(0x243),'TtnOy':function(_0x1741e2,_0x5d51c2){return _0x1741e2===_0x5d51c2;},'Pqerk':'TJGJy','fuJjh':function(_0x389a78,_0x30a1a6,_0x5cbacb,_0x365962,_0x49a7eb,_0x13efbf){return _0x389a78(_0x30a1a6,_0x5cbacb,_0x365962,_0x49a7eb,_0x13efbf);},'rHmNB':function(_0x24b0cb,_0x2b69fc,_0x1e1a01){return _0x24b0cb(_0x2b69fc,_0x1e1a01);},'vHcMZ':_0x2ac27b(0x1ea),'mBMSe':_0x2ac27b(0x225),'OLWfX':function(_0x55cdb6,_0x495799){return _0x55cdb6!==_0x495799;},'Bizrd':'WPjbg','Kktek':_0x2ac27b(0x281),'rRjtJ':'origin','KLuwa':function(_0x16bf96,_0x29ac02){return _0x16bf96!==_0x29ac02;},'LrlIf':_0x2ac27b(0x1f6)};_0x461fd6['on'](_0x2ac27b(0x252),socketOnError);const _0xb28df2=_0x2596ff[_0x2ac27b(0x212)][_0x2ac27b(0x210)],_0x326c7d=+_0x2596ff[_0x2ac27b(0x212)][_0x2ac27b(0x1f5)];if(_0x1203ad['vFmPE'](_0x2596ff[_0x2ac27b(0x27b)],_0x2ac27b(0x224))){const _0x30d4fd=_0x2ac27b(0x29a);_0x1203ad[_0x2ac27b(0x25a)](abortHandshakeOrEmitwsClientError,this,_0x2596ff,_0x461fd6,0x195,_0x30d4fd);return;}if(_0x1203ad[_0x2ac27b(0x29d)](_0x2596ff[_0x2ac27b(0x212)][_0x2ac27b(0x27f)][_0x2ac27b(0x20a)](),_0x1203ad[_0x2ac27b(0x1fb)])){if(_0x1203ad[_0x2ac27b(0x259)](_0x2ac27b(0x222),_0x1203ad[_0x2ac27b(0x232)]))for(const _0x575f65 of _0x552a3b[_0x2ac27b(0x1f9)](_0x319408)){_0x3b1363[_0x2ac27b(0x1db)](_0x575f65,_0x32e06c[_0x575f65]);}else{const _0xbf60ae=_0x2ac27b(0x282);abortHandshakeOrEmitwsClientError(this,_0x2596ff,_0x461fd6,0x190,_0xbf60ae);return;}}if(!_0xb28df2||!keyRegex[_0x2ac27b(0x28d)](_0xb28df2)){const _0x3db94c=_0x1203ad['tEHfU'];abortHandshakeOrEmitwsClientError(this,_0x2596ff,_0x461fd6,0x190,_0x3db94c);return;}if(_0x1203ad['UgiRO'](_0x326c7d,0x8)&&_0x1203ad[_0x2ac27b(0x29d)](_0x326c7d,0xd)){if(_0x1203ad[_0x2ac27b(0x1f1)](_0x2ac27b(0x24b),_0x1203ad[_0x2ac27b(0x267)])){const _0x465599='Missing\x20or\x20invalid\x20Sec-WebSocket-Version\x20header';_0x1203ad['fuJjh'](abortHandshakeOrEmitwsClientError,this,_0x2596ff,_0x461fd6,0x190,_0x465599);return;}else throw new _0x2b80fe(_0x1203ad[_0x2ac27b(0x264)]('One\x20and\x20only\x20one\x20of\x20the\x20\x22port\x22,\x20\x22server\x22,\x20or\x20\x22noServer\x22\x20options\x20',_0x2ac27b(0x1dd)));}if(!this[_0x2ac27b(0x236)](_0x2596ff)){_0x1203ad[_0x2ac27b(0x26e)](abortHandshake,_0x461fd6,0x190);return;}const _0x4e9978=_0x2596ff[_0x2ac27b(0x212)][_0x2ac27b(0x283)];let _0x5f484c=new Set();if(_0x4e9978!==undefined)try{_0x5f484c=subprotocol[_0x2ac27b(0x299)](_0x4e9978);}catch(_0x7a1dbb){const _0x5de870=_0x1203ad[_0x2ac27b(0x25c)];_0x1203ad[_0x2ac27b(0x25a)](abortHandshakeOrEmitwsClientError,this,_0x2596ff,_0x461fd6,0x190,_0x5de870);return;}const _0x232b4d=_0x2596ff[_0x2ac27b(0x212)][_0x1203ad['mBMSe']],_0x1cc03b={};if(this['options'][_0x2ac27b(0x255)]&&_0x232b4d!==undefined){const _0x4cd1ad=new PerMessageDeflate(this[_0x2ac27b(0x238)][_0x2ac27b(0x255)],!![],this[_0x2ac27b(0x238)][_0x2ac27b(0x202)]);try{if(_0x1203ad[_0x2ac27b(0x21f)](_0x1203ad[_0x2ac27b(0x22c)],_0x2ac27b(0x208))){const _0x157567=extension[_0x2ac27b(0x299)](_0x232b4d);_0x157567[PerMessageDeflate[_0x2ac27b(0x234)]]&&(_0x4cd1ad[_0x2ac27b(0x265)](_0x157567[PerMessageDeflate[_0x2ac27b(0x234)]]),_0x1cc03b[PerMessageDeflate['extensionName']]=_0x4cd1ad);}else this[_0x2ac27b(0x1ff)](_0x1203ad[_0x2ac27b(0x1df)],()=>{const _0x1a292a=_0x2ac27b;_0x549f0d(new _0x5c5106(_0x1a292a(0x278)));});}catch(_0x3df606){const _0x47c4a6=_0x1203ad[_0x2ac27b(0x1e9)];_0x1203ad[_0x2ac27b(0x25a)](abortHandshakeOrEmitwsClientError,this,_0x2596ff,_0x461fd6,0x190,_0x47c4a6);return;}}if(this[_0x2ac27b(0x238)][_0x2ac27b(0x20e)]){const _0x1b06b9={'origin':_0x2596ff['headers'][''+(_0x326c7d===0x8?_0x2ac27b(0x1e2):_0x1203ad[_0x2ac27b(0x1e7)])],'secure':!!(_0x2596ff[_0x2ac27b(0x24d)][_0x2ac27b(0x270)]||_0x2596ff[_0x2ac27b(0x24d)][_0x2ac27b(0x21a)]),'req':_0x2596ff};if(this[_0x2ac27b(0x238)][_0x2ac27b(0x20e)][_0x2ac27b(0x213)]===0x2){if(_0x1203ad[_0x2ac27b(0x250)](_0x1203ad['LrlIf'],_0x2ac27b(0x22b))){this['options']['verifyClient'](_0x1b06b9,(_0x2041ea,_0x45cd78,_0x50e95b,_0x5d31a6)=>{const _0x14a43c=_0x2ac27b;if(_0x1203ad['ffiBP']!==_0x1203ad['ffiBP'])this[_0x14a43c(0x271)](_0x15f86c,_0xfad2c6,_0x1e8c7f,_0x19a2dd);else{if(!_0x2041ea){if(_0x1203ad[_0x14a43c(0x23b)](_0x1203ad['QuJBH'],_0x1203ad[_0x14a43c(0x1f3)]))_0x5c819c[_0x14a43c(0x29b)](_0x14a43c(0x248)+_0x9cdd5a),_0x49f178[_0x14a43c(0x245)]=_0x5dabe9;else return abortHandshake(_0x461fd6,_0x45cd78||0x191,_0x50e95b,_0x5d31a6);}this[_0x14a43c(0x237)](_0x1cc03b,_0xb28df2,_0x5f484c,_0x2596ff,_0x461fd6,_0x2e0b62,_0x5e1288);}});return;}else{const _0x4192c4=_0x4537d9[_0x2ac27b(0x284)][_0x2ac27b(0x241)]('?'),_0x29fd94=_0x4192c4!==-0x1?_0xdc8329[_0x2ac27b(0x284)][_0x2ac27b(0x24a)](0x0,_0x4192c4):_0x56786d[_0x2ac27b(0x284)];if(_0x1203ad[_0x2ac27b(0x258)](_0x29fd94,this[_0x2ac27b(0x238)][_0x2ac27b(0x1e4)]))return![];}}if(!this[_0x2ac27b(0x238)][_0x2ac27b(0x20e)](_0x1b06b9))return abortHandshake(_0x461fd6,0x191);}this[_0x2ac27b(0x237)](_0x1cc03b,_0xb28df2,_0x5f484c,_0x2596ff,_0x461fd6,_0x2e0b62,_0x5e1288);}[_0x360d89(0x237)](_0x557d12,_0x3c4af1,_0x5ead47,_0x27a293,_0x1d6e93,_0x4e1ad2,_0xe6bc76){const _0x459d33=_0x360d89,_0x2f12fe={'BjfGH':function(_0x1b21e5,_0x1c5022){return _0x1b21e5!==_0x1c5022;},'IqcAV':_0x459d33(0x27c),'uRyoU':function(_0x4e5af5,_0x153461){return _0x4e5af5+_0x153461;},'npIiO':_0x459d33(0x262),'bDSEz':'socket,\x20possibly\x20due\x20to\x20a\x20misconfiguration','soKsc':function(_0x1aabdc,_0x32fa62){return _0x1aabdc>_0x32fa62;},'ApQcp':_0x459d33(0x21b),'ZXMKE':_0x459d33(0x220),'SQIxs':function(_0x2c3695,_0x15e5a8){return _0x2c3695===_0x15e5a8;},'tYAll':_0x459d33(0x291),'TLVyy':_0x459d33(0x1e3),'FJTsJ':function(_0x3db329,_0x4e01fb){return _0x3db329===_0x4e01fb;},'WVjEL':_0x459d33(0x294),'eQdot':'error','iRMSK':_0x459d33(0x211)};if(!_0x1d6e93[_0x459d33(0x1fe)]||!_0x1d6e93[_0x459d33(0x25d)])return _0x1d6e93[_0x459d33(0x277)]();if(_0x1d6e93[kWebSocket])throw new Error(_0x2f12fe['uRyoU'](_0x2f12fe[_0x459d33(0x257)],_0x2f12fe[_0x459d33(0x26a)]));if(_0x2f12fe['soKsc'](this[_0x459d33(0x1e0)],RUNNING))return abortHandshake(_0x1d6e93,0x1f7);const _0xcea9ef=createHash(_0x2f12fe[_0x459d33(0x230)])[_0x459d33(0x253)](_0x3c4af1+GUID)['digest'](_0x459d33(0x200)),_0x5374cb=[_0x459d33(0x1f4),'Upgrade:\x20websocket',_0x2f12fe[_0x459d33(0x244)],'Sec-WebSocket-Accept:\x20'+_0xcea9ef],_0x15816f=new this[(_0x459d33(0x238))][(_0x459d33(0x1f8))](null,undefined,this[_0x459d33(0x238)]);if(_0x5ead47[_0x459d33(0x280)]){if(_0x2f12fe['SQIxs'](_0x459d33(0x291),_0x2f12fe[_0x459d33(0x226)])){const _0x1af55a=this[_0x459d33(0x238)][_0x459d33(0x249)]?this['options'][_0x459d33(0x249)](_0x5ead47,_0x27a293):_0x5ead47[_0x459d33(0x228)]()['next']()[_0x459d33(0x254)];_0x1af55a&&(_0x459d33(0x1e3)===_0x2f12fe[_0x459d33(0x28e)]?(_0x5374cb[_0x459d33(0x29b)](_0x459d33(0x248)+_0x1af55a),_0x15816f[_0x459d33(0x245)]=_0x1af55a):(_0x2c1063['accept'](_0x522922[_0x32d2ce[_0x459d33(0x234)]]),_0xdea02b[_0x263395[_0x459d33(0x234)]]=_0x2b33c2));}else this[_0x459d33(0x29c)][_0x459d33(0x251)](_0x474ad3),_0xe32700['on'](_0x459d33(0x211),()=>{const _0x2409bf=_0x459d33;this[_0x2409bf(0x29c)][_0x2409bf(0x289)](_0x313254),this[_0x2409bf(0x20f)]&&!this[_0x2409bf(0x29c)][_0x2409bf(0x280)]&&_0x1f55a3[_0x2409bf(0x286)](_0x1609c0,this);});}if(_0x557d12[PerMessageDeflate['extensionName']]){if(_0x2f12fe[_0x459d33(0x27d)](_0x2f12fe[_0x459d33(0x22a)],_0x459d33(0x20b)))_0x37cf6a[_0x459d33(0x1db)](_0xf19c99,_0xa203ad[_0x466103]);else{const _0x1bbb62=_0x557d12[PerMessageDeflate[_0x459d33(0x234)]]['params'],_0x3e5110=extension['format']({[PerMessageDeflate['extensionName']]:[_0x1bbb62]});_0x5374cb[_0x459d33(0x29b)](_0x459d33(0x223)+_0x3e5110),_0x15816f[_0x459d33(0x28a)]=_0x557d12;}}this[_0x459d33(0x1f0)](_0x459d33(0x212),_0x5374cb,_0x27a293),_0x1d6e93['write'](_0x5374cb[_0x459d33(0x22e)]('\x0d\x0a')[_0x459d33(0x229)]('\x0d\x0a')),_0x1d6e93[_0x459d33(0x1db)](_0x2f12fe[_0x459d33(0x1ee)],socketOnError),_0x15816f['setSocket'](_0x1d6e93,_0x4e1ad2,{'allowSynchronousEvents':this[_0x459d33(0x238)][_0x459d33(0x28b)],'maxPayload':this[_0x459d33(0x238)][_0x459d33(0x202)],'skipUTF8Validation':this[_0x459d33(0x238)][_0x459d33(0x233)]}),this[_0x459d33(0x29c)]&&(this['clients']['add'](_0x15816f),_0x15816f['on'](_0x2f12fe[_0x459d33(0x28c)],()=>{const _0x4d22c3=_0x459d33;_0x2f12fe[_0x4d22c3(0x276)](_0x4d22c3(0x27c),_0x2f12fe[_0x4d22c3(0x298)])?_0x18e15c(this):(this[_0x4d22c3(0x29c)][_0x4d22c3(0x289)](_0x15816f),this[_0x4d22c3(0x20f)]&&!this['clients'][_0x4d22c3(0x280)]&&process[_0x4d22c3(0x286)](emitClose,this));})),_0xe6bc76(_0x15816f,_0x27a293);}}module['exports']=WebSocketServer;function addListeners(_0x6b2aa9,_0x2cac23){const _0x301ec7=_0x360d89;for(const _0x9f25c2 of Object[_0x301ec7(0x1f9)](_0x2cac23))_0x6b2aa9['on'](_0x9f25c2,_0x2cac23[_0x9f25c2]);return function _0x2bd0e9(){const _0x264c65=_0x301ec7;for(const _0x2eb3e7 of Object[_0x264c65(0x1f9)](_0x2cac23)){_0x6b2aa9[_0x264c65(0x1db)](_0x2eb3e7,_0x2cac23[_0x2eb3e7]);}};}function emitClose(_0x407b60){const _0x62daa1=_0x360d89,_0x51e699={'KwOog':_0x62daa1(0x211)};_0x407b60[_0x62daa1(0x1e0)]=CLOSED,_0x407b60[_0x62daa1(0x1f0)](_0x51e699[_0x62daa1(0x214)]);}function _0x66e0(){const _0x1fefa3=['82WkoPhp','zkFGI','XVhPo','./constants','nulAH','nFWiR','wsClientError','indexOf','21354zhPflG','Missing\x20or\x20invalid\x20Sec-WebSocket-Key\x20header','ZXMKE','_protocol','address','luPut','Sec-WebSocket-Protocol:\x20','handleProtocols','slice','TJGJy','_server','socket','8jQYAzV','LTkKd','KLuwa','add','error','update','value','perMessageDeflate','text/plain','npIiO','vFmPE','tNmXk','jmqTS','stream','vHcMZ','writable','KUxwF','writeHead','YawTC','createServer','server.handleUpgrade()\x20was\x20called\x20more\x20than\x20once\x20with\x20the\x20same\x20','hIhqI','wIVrm','accept','bind','Pqerk','PdyXg','aAHQZ','bDSEz','mHpgv','inrzo','end','rHmNB','captureStackTrace','authorized','handleUpgrade','556026nkumoF','host','joJdi','igVrI','BjfGH','destroy','The\x20server\x20is\x20not\x20running','nvmJC','backlog','method','orHwC','FJTsJ','1157CpCPmh','upgrade','size','Invalid\x20or\x20unacceptable\x20Sec-WebSocket-Extensions\x20header','Invalid\x20Upgrade\x20header','sec-websocket-protocol','url','OggzU','nextTick','The\x20server\x20is\x20operating\x20in\x20\x22noServer\x22\x20mode','SkOlb','delete','_extensions','allowSynchronousEvents','iRMSK','test','TLVyy','_removeListeners','listen','jVEyU','ZGVGg','sWFcn','QEwjV','VOliG','./permessage-deflate','eSoam','IqcAV','parse','Invalid\x20HTTP\x20method','push','clients','UgiRO','http','gZhuk','removeListener','cvTfb','must\x20be\x20specified','kUEeZ','gSfCT','_state','CcPMr','sec-websocket-origin','qpLov','path','\x0d\x0a\x0d\x0a','sxJit','rRjtJ','HTTP/1.1\x20','Kktek','Invalid\x20Sec-WebSocket-Protocol\x20header','map','text/html','listening','eQdot','port','emit','TtnOy','xKFqW','OsAST','HTTP/1.1\x20101\x20Switching\x20Protocols','sec-websocket-version','UXFpb','33MeYxPQ','WebSocket','keys','clientTracking','xqFNV','451692LGVNiu','listenerCount','readable','once','base64','STATUS_CODES','maxPayload','server','INePW','4904792onpvBb','./subprotocol','63gcXUDn','fjvQw','zDQpd','toLowerCase','lAdTc','byteLength','crypto','verifyClient','_shouldEmitClose','sec-websocket-key','close','headers','length','KwOog','9rnerHV','websocket','finish','noServer','gVHrH','encrypted','sha1','2101395axKJnO','1559256aEpDUP','One\x20and\x20only\x20one\x20of\x20the\x20\x22port\x22,\x20\x22server\x22,\x20or\x20\x22noServer\x22\x20options\x20','OLWfX','Connection:\x20Upgrade','FYisR','pOKcr','Sec-WebSocket-Extensions:\x20','GET','sec-websocket-extensions','tYAll','./websocket','values','join','WVjEL','ePIha','Bizrd','1156140KAsJCf','concat','hivuj','ApQcp','HvNUn','XstaW','skipUTF8Validation','extensionName','OJuSu','shouldHandle','completeUpgrade','options','zrEMp'];_0x66e0=function(){return _0x1fefa3;};return _0x66e0();}function socketOnError(){const _0x487146=_0x360d89;this[_0x487146(0x277)]();}function abortHandshake(_0x1bed68,_0x4f523a,_0x14c6fc,_0x396d47){const _0x345c80=_0x360d89,_0x575b9d={'luPut':_0x345c80(0x1ec),'XVhPo':_0x345c80(0x217),'OggzU':function(_0x2520ad,_0x30622f){return _0x2520ad+_0x30622f;}};_0x14c6fc=_0x14c6fc||http[_0x345c80(0x201)][_0x4f523a],_0x396d47={'Connection':_0x345c80(0x211),'Content-Type':_0x575b9d[_0x345c80(0x247)],'Content-Length':Buffer[_0x345c80(0x20c)](_0x14c6fc),..._0x396d47},_0x1bed68[_0x345c80(0x1ff)](_0x575b9d[_0x345c80(0x23c)],_0x1bed68[_0x345c80(0x277)]),_0x1bed68[_0x345c80(0x26d)](_0x575b9d['OggzU'](_0x575b9d[_0x345c80(0x285)](_0x345c80(0x1e8)+_0x4f523a+'\x20'+http[_0x345c80(0x201)][_0x4f523a]+'\x0d\x0a'+Object[_0x345c80(0x1f9)](_0x396d47)[_0x345c80(0x1eb)](_0x461be6=>_0x461be6+':\x20'+_0x396d47[_0x461be6])[_0x345c80(0x229)]('\x0d\x0a'),_0x345c80(0x1e5)),_0x14c6fc));}function abortHandshakeOrEmitwsClientError(_0x1837e4,_0x42cff4,_0x41322a,_0x5856f9,_0x4b088){const _0x104f74=_0x360d89,_0x1a70fa={'PdyXg':_0x104f74(0x240),'INePW':_0x104f74(0x292),'zrEMp':'TzOie'};if(_0x1837e4[_0x104f74(0x1fd)](_0x1a70fa[_0x104f74(0x268)])){if(_0x1a70fa[_0x104f74(0x204)]!==_0x1a70fa[_0x104f74(0x239)]){const _0x5cf067=new Error(_0x4b088);Error['captureStackTrace'](_0x5cf067,abortHandshakeOrEmitwsClientError),_0x1837e4[_0x104f74(0x1f0)](_0x104f74(0x240),_0x5cf067,_0x41322a,_0x42cff4);}else{const _0x57f3eb={'ATSKO':_0x104f74(0x256)};this['_server']=_0x2e3041[_0x104f74(0x261)]((_0x4fe529,_0x3fc1e3)=>{const _0x475868=_0x104f74,_0x79a90d=_0xd8b12e['STATUS_CODES'][0x1aa];_0x3fc1e3[_0x475868(0x25f)](0x1aa,{'Content-Length':_0x79a90d[_0x475868(0x213)],'Content-Type':_0x57f3eb['ATSKO']}),_0x3fc1e3[_0x475868(0x26d)](_0x79a90d);}),this['_server'][_0x104f74(0x290)](_0x5850ed[_0x104f74(0x1ef)],_0x438151[_0x104f74(0x273)],_0x2353be[_0x104f74(0x27a)],_0x4740a4);}}else abortHandshake(_0x41322a,_0x5856f9,_0x4b088);}