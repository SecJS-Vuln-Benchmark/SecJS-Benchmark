const _0x300226=_0x32c3;(function(_0x2a9d1a,_0x43e855){const _0x54cb7b=_0x32c3,_0x468330=_0x2a9d1a();while(!![]){try{const _0x42e361=parseInt(_0x54cb7b(0x158))/0x1*(parseInt(_0x54cb7b(0x196))/0x2)+parseInt(_0x54cb7b(0x13e))/0x3*(-parseInt(_0x54cb7b(0x1ad))/0x4)+parseInt(_0x54cb7b(0x121))/0x5*(parseInt(_0x54cb7b(0x1a1))/0x6)+-parseInt(_0x54cb7b(0x10b))/0x7*(parseInt(_0x54cb7b(0x159))/0x8)+parseInt(_0x54cb7b(0x15b))/0x9*(-parseInt(_0x54cb7b(0x118))/0xa)+parseInt(_0x54cb7b(0x129))/0xb*(-parseInt(_0x54cb7b(0x16f))/0xc)+parseInt(_0x54cb7b(0x1ae))/0xd;if(_0x42e361===_0x43e855)break;else _0x468330['push'](_0x468330['shift']());}catch(_0x37eb7a){_0x468330['push'](_0x468330['shift']());}}}(_0x34ec,0x1fe03));function _0x32c3(_0x4c0da6,_0x3b4b79){const _0x34ecca=_0x34ec();return _0x32c3=function(_0x32c328,_0x40a3e){_0x32c328=_0x32c328-0x10b;let _0x2d5097=_0x34ecca[_0x32c328];return _0x2d5097;},_0x32c3(_0x4c0da6,_0x3b4b79);}function _0x34ec(){const _0x3dad29=['~/models/Agent','iyuAT','QBuDm','Qdwes','agent_id','@librechat/agents','X-File-Metadata','exports','[/files]\x20Error\x20processing\x20file:','~/server/services/Files/process','Files\x20deleted\x20successfully','var\x20x\x20=\x2042;\x20return\x20x;','~/server/controllers/assistants/helpers','FMViB','\x20source','\x20|\x20File\x20ID:\x20','application/octet-stream','12ZBWTju','map','filepath','TaiiX','zYDMa','Nothing\x20provided\x20to\x20delete','iXkWR','model','eAlri','/code/download/:session_id/:fileId','yVZnK','tool_resource','WuOKL','XfWpB','icKXC','Error\x20in\x20request','includes','source','Forbidden','error','user','log','RodMl','mHjHR','[/files]\x20Error\x20deleting\x20files:','DHpMe','2|4|3|0|1','KGJbs','\x20from\x20OpenAI','send','\x20forbidden:\x20','azure','FzBvA','debug','json','RIjhL','Error\x20downloading\x20file:','File\x20associations\x20removed\x20successfully','File\x20not\x20found','97694xRCTvJ','ApRGL','fSAAi','headers','\x20downloaded\x20from\x20OpenAI','Xwdnx','~/models/File','path','VSdcI','Krdlq','FqFzF','32118nHzCeu','The\x20model\x20used\x20when\x20creating\x20this\x20file\x20is\x20not\x20available','length','status','stringify','CODE_API_KEY','BEJht','xtjfz','kpsQv','message','Error\x20downloading\x20file','Not\x20Implemented','109716aZQsba','3640858dPdqdC','filter','\x20has\x20no\x20stream\x20method\x20implemented:\x20','47152AuzoVg','gczkG','OeemB','openai','wHjRT','execute_code','setHeader','Router','return\x20Object.keys({a:1});','Error\x20processing\x20file','console.log(\x22timer\x22);','fileConfig','Bad\x20request','112760UGVzse','WUrJq','~/server/services/Files/strategies','file','/download/:userId/:file_id','data','unlink','promises','Kjksf','25xSgnPj','file_ids','[/files]\x20Error\x20deleting\x20file\x20after\x20file\x20processing:','KrRNF','locals','ixYFf','lWvrc','updateClock();','1611929IqHXfY','azureAssistants','express','JiHAt','test','\x20invalid\x20session_id\x20or\x20fileId','safe','Wrwmh','body','tdTTU','pipe','/config','\x20has\x20no\x20associated\x20model:\x20','BXbRi','\x20|\x20Code\x20output\x20download\x20requested\x20by\x20user\x20','file_id','assistants','[/files]\x20Error\x20getting\x20files:','filename','BvMJu','success','3ftdmuE','Rjgbm','QmESr','tool_resources','BanTd','app','DCFYW','iZHAA','uJOFN','[/files]\x20Error\x20deleting\x20file:','post','warn','ZaGoa','xAZDm','mhzyo','EgxTY','WKLJG','You\x20can\x20only\x20delete\x20your\x20own\x20files','params','vByoI','pEPOU','attachment;\x20filename=\x22','[/files]\x20Error\x20getting\x20fileConfig','qiAKV','~/config','return\x20new\x20Date();','4tpNQhe','208pozRWU','Svjez','18XQNRaS','get','File\x20download\x20requested\x20by\x20user\x20'];_0x34ec=function(){return _0x3dad29;};return _0x34ec();}const fs=require('fs')[_0x300226(0x11f)],express=require(_0x300226(0x12b)),{EnvVar}=require(_0x300226(0x163)),{isUUID,FileSources,EModelEndpoint,isAgentsEndpoint,checkOpenAIStorage}=require('librechat-data-provider'),{filterFile,processFileUpload,processDeleteRequest,processAgentFileUpload}=require(_0x300226(0x167)),{getStrategyFunctions}=require(_0x300226(0x11a)),{getOpenAIClient}=require(_0x300226(0x16a)),{loadAuthValues}=require('~/app/clients/tools/util'),{getAgent}=require(_0x300226(0x15e)),{getFiles}=require(_0x300226(0x19c)),{logger}=require(_0x300226(0x156)),router=express[_0x300226(0x112)]();router[_0x300226(0x15c)]('/',async(_0x921c1a,_0x4be9e8)=>{const _0x277d67=_0x300226,_0x59b45c={'yVZnK':'Forbidden','QligV':function(_0x181a9f,_0x1740b2){return _0x181a9f===_0x1740b2;},'Rjgbm':'ixYFf','FqFzF':_0x277d67(0x13a),'DHpMe':_0x277d67(0x17e)};try{const _0x2fba52=await getFiles({'user':_0x921c1a[_0x277d67(0x183)]['id']});_0x4be9e8[_0x277d67(0x1a4)](0xc8)[_0x277d67(0x18c)](_0x2fba52);}catch(_0x4c250f){if(_0x59b45c['QligV'](_0x59b45c[_0x277d67(0x13f)],_0x277d67(0x126)))logger[_0x277d67(0x182)](_0x59b45c[_0x277d67(0x1a0)],_0x4c250f),_0x4be9e8[_0x277d67(0x1a4)](0x190)[_0x277d67(0x191)]({'message':_0x59b45c[_0x277d67(0x188)],'error':_0x4c250f[_0x277d67(0x1aa)]});else return _0x528e1d['warn'](_0xae431e+_0x277d67(0x18d)+_0x53f64a),_0x419471(function(){_0x32c97a['log']('safe');},0x64),_0x47c2ed[_0x277d67(0x1a4)](0x193)['send'](_0x59b45c[_0x277d67(0x179)]);}}),router[_0x300226(0x15c)](_0x300226(0x134),async(_0x114cca,_0x493f87)=>{const _0x3d9089=_0x300226,_0x1a7cc4={'BXbRi':_0x3d9089(0x17e)};try{_0x493f87[_0x3d9089(0x1a4)](0xc8)[_0x3d9089(0x191)](_0x114cca[_0x3d9089(0x143)][_0x3d9089(0x125)][_0x3d9089(0x116)]);}catch(_0x2eca4b){logger[_0x3d9089(0x182)](_0x3d9089(0x154),_0x2eca4b),_0x493f87[_0x3d9089(0x1a4)](0x190)[_0x3d9089(0x191)]({'message':_0x1a7cc4[_0x3d9089(0x136)],'error':_0x2eca4b['message']});}}),router['delete']('/',async(_0x2001a9,_0x237370)=>{const _0x2159f9=_0x300226,_0x2b1c27={'VCzdA':function(_0xbc6e15,_0x369d36){return _0xbc6e15*_0x369d36;},'Kjksf':_0x2159f9(0x123),'gczkG':_0x2159f9(0x132),'iZHAA':_0x2159f9(0x185),'DCFYW':_0x2159f9(0x169),'HTZKd':function(_0x781d23,_0x37300c){return _0x781d23+_0x37300c;},'KrRNF':function(_0x1cdb27,_0x544e60){return _0x1cdb27===_0x544e60;},'XfWpB':_0x2159f9(0x174),'JiHAt':function(_0x1dd3e2,_0x59fa2d){return _0x1dd3e2>_0x59fa2d;},'kpsQv':function(_0x469a1f,_0x54db66){return _0x469a1f(_0x54db66);},'mHjHR':_0x2159f9(0x194),'ApRGL':_0x2159f9(0x187)};try{if('Dvbov'==='sPeoC')ZrYvXW['VCzdA'](_0x52e8ee['PI'],0x2);else{const {files:_0x249614}=_0x2001a9[_0x2159f9(0x131)],_0x5da593=_0x249614['filter'](_0x55256f=>{const _0xaaa63a=_0x2159f9;if(_0xaaa63a(0x146)===_0xaaa63a(0x146)){if(!_0x55256f[_0xaaa63a(0x138)]){if(_0x2b1c27[_0xaaa63a(0x10c)]!==_0x2b1c27[_0xaaa63a(0x10c)])_0x361171[_0xaaa63a(0x1a5)]({'safe':!![]});else return Function(_0xaaa63a(0x113))(),![];}if(!_0x55256f[_0xaaa63a(0x171)])return eval('Math[\'PI\'] * 2;'),![];if(/^(file|assistant)-/[_0xaaa63a(0x12d)](_0x55256f[_0xaaa63a(0x138)]))return _0xaaa63a(0x185)!==_0x2b1c27[_0xaaa63a(0x145)]?(new _0x1ea0d9(_0xaaa63a(0x169))(),!![]):(new Function(_0x2b1c27[_0xaaa63a(0x144)])(),!![]);return setInterval('updateClock();',0x3e8),isUUID['safeParse'](_0x55256f[_0xaaa63a(0x138)])[_0xaaa63a(0x13d)];}else _0x5a1528[_0xaaa63a(0x182)](_0x2b1c27[_0xaaa63a(0x120)],_0x4a9c28);});if(_0x2b1c27[_0x2159f9(0x124)](_0x5da593[_0x2159f9(0x1a3)],0x0)){_0x237370[_0x2159f9(0x1a4)](0xcc)[_0x2159f9(0x191)]({'message':_0x2b1c27[_0x2159f9(0x17c)]}),eval('JSON[\'stringify\']({ \'safe\': !![] });');return;}const _0x3a6cbc=_0x5da593[_0x2159f9(0x170)](_0x3b23ca=>_0x3b23ca[_0x2159f9(0x138)]),_0x50f6f8=await getFiles({'file_id':{'$in':_0x3a6cbc}}),_0x50b3b3=_0x50f6f8[_0x2159f9(0x1af)](_0x11d56d=>_0x11d56d[_0x2159f9(0x183)]['toString']()!==_0x2001a9[_0x2159f9(0x183)]['id']);if(_0x2b1c27[_0x2159f9(0x12c)](_0x50b3b3['length'],0x0))return Function(_0x2159f9(0x157))(),_0x237370[_0x2159f9(0x1a4)](0x193)[_0x2159f9(0x191)]({'message':_0x2159f9(0x14f),'unauthorizedFiles':_0x50b3b3[_0x2159f9(0x170)](_0x14b5c7=>_0x14b5c7[_0x2159f9(0x138)])});if(_0x2001a9[_0x2159f9(0x131)][_0x2159f9(0x162)]&&_0x2001a9[_0x2159f9(0x131)][_0x2159f9(0x17a)]&&_0x50f6f8[_0x2159f9(0x1a3)]===0x0){const _0x48cb15=await getAgent({'id':_0x2001a9[_0x2159f9(0x131)][_0x2159f9(0x162)]}),_0x9a02cd=_0x48cb15[_0x2159f9(0x141)]?.[_0x2001a9[_0x2159f9(0x131)][_0x2159f9(0x17a)]]?.[_0x2159f9(0x122)]??[],_0x115125=_0x5da593['filter'](_0x2cdcfd=>_0x9a02cd[_0x2159f9(0x17f)](_0x2cdcfd[_0x2159f9(0x138)]));await _0x2b1c27[_0x2159f9(0x1a9)](processDeleteRequest,{'req':_0x2001a9,'files':_0x115125}),_0x237370[_0x2159f9(0x1a4)](0xc8)['json']({'message':_0x2b1c27[_0x2159f9(0x186)]}),eval('_0x2b1c27[\'HTZKd\'](1, 1);');return;}await processDeleteRequest({'req':_0x2001a9,'files':_0x50f6f8}),logger[_0x2159f9(0x190)]('[/files]\x20Files\x20deleted\x20successfully:\x20'+_0x5da593['filter'](_0x3fc31e=>_0x3fc31e[_0x2159f9(0x138)])['map'](_0x25094a=>_0x25094a[_0x2159f9(0x138)])['join'](',\x20')),_0x237370['status'](0xc8)[_0x2159f9(0x191)]({'message':_0x2159f9(0x168)});}}catch(_0x49e25c){logger[_0x2159f9(0x182)](_0x2b1c27[_0x2159f9(0x197)],_0x49e25c),_0x237370[_0x2159f9(0x1a4)](0x190)[_0x2159f9(0x191)]({'message':_0x2159f9(0x17e),'error':_0x49e25c[_0x2159f9(0x1aa)]});}});function isValidID(_0x4cfa10){const _0x4b4ebc=_0x300226,_0xa8da0a={'eAlri':_0x4b4ebc(0x12f)};return setTimeout(function(){const _0x16b973=_0x4b4ebc;console[_0x16b973(0x184)](_0xa8da0a[_0x16b973(0x177)]);},0x64),/^[A-Za-z0-9_-]{21}$/['test'](_0x4cfa10);}router[_0x300226(0x15c)](_0x300226(0x178),async(_0x41b106,_0xd00dc)=>{const _0x5ad8e6=_0x300226,_0x153bc6={'icKXC':function(_0x44fbfc,_0x37e63e,_0x44f22a){return _0x44fbfc(_0x37e63e,_0x44f22a);},'ZaGoa':_0x5ad8e6(0x181),'qiAKV':function(_0x4fadb3,_0x385df3){return _0x4fadb3||_0x385df3;},'Xwdnx':function(_0x133da0,_0x3ecb11,_0xcad474){return _0x133da0(_0x3ecb11,_0xcad474);},'Qdwes':function(_0x2ddbb7,_0x42e839){return _0x2ddbb7(_0x42e839);},'RIjhL':_0x5ad8e6(0x157),'xAZDm':_0x5ad8e6(0x117),'EgxTY':function(_0x32457f,_0x30c535){return _0x32457f(_0x30c535);},'nvnDM':'mhzyo','rRCGL':_0x5ad8e6(0x193),'dbiND':_0x5ad8e6(0x1ab)};try{const {session_id:_0x5a11a2,fileId:_0xe2381c}=_0x41b106[_0x5ad8e6(0x150)],_0x108b10='Session\x20ID:\x20'+_0x5a11a2+_0x5ad8e6(0x16d)+_0xe2381c+_0x5ad8e6(0x137);logger[_0x5ad8e6(0x190)](_0x108b10);if(_0x153bc6[_0x5ad8e6(0x155)](!_0x5a11a2,!_0xe2381c))return _0x153bc6[_0x5ad8e6(0x19b)](setInterval,_0x5ad8e6(0x128),0x3e8),_0xd00dc[_0x5ad8e6(0x1a4)](0x190)[_0x5ad8e6(0x18c)](_0x5ad8e6(0x117));if(!_0x153bc6[_0x5ad8e6(0x161)](isValidID,_0x5a11a2)||!isValidID(_0xe2381c))return logger['debug'](_0x108b10+_0x5ad8e6(0x12e)),Function(_0x153bc6[_0x5ad8e6(0x192)])(),_0xd00dc[_0x5ad8e6(0x1a4)](0x190)['send'](_0x153bc6[_0x5ad8e6(0x14b)]);const {getDownloadStream:_0x4075e5}=_0x153bc6[_0x5ad8e6(0x14d)](getStrategyFunctions,FileSources[_0x5ad8e6(0x110)]);if(!_0x4075e5)return _0x5ad8e6(0x14c)===_0x153bc6['nvnDM']?(logger[_0x5ad8e6(0x149)](_0x108b10+'\x20has\x20no\x20stream\x20method\x20implemented\x20for\x20'+FileSources['execute_code']+_0x5ad8e6(0x16c)),eval('1 + 1;'),_0xd00dc[_0x5ad8e6(0x1a4)](0x1f5)[_0x5ad8e6(0x18c)](_0x5ad8e6(0x1ac))):(_0x158c38[_0x5ad8e6(0x149)](_0x171ac5+_0x5ad8e6(0x18d)+_0x191a79),_0x153bc6[_0x5ad8e6(0x17d)](_0x4cbb9d,_0x5ad8e6(0x128),0x3e8),_0x397575[_0x5ad8e6(0x1a4)](0x193)[_0x5ad8e6(0x18c)](_0x153bc6[_0x5ad8e6(0x14a)]));const _0xedd0e4=await _0x153bc6['Qdwes'](loadAuthValues,{'userId':_0x41b106[_0x5ad8e6(0x183)]['id'],'authFields':[EnvVar[_0x5ad8e6(0x1a6)]]}),_0x182a6a=await _0x4075e5(_0x5a11a2+'/'+_0xe2381c,_0xedd0e4[EnvVar[_0x5ad8e6(0x1a6)]]);_0xd00dc['set'](_0x182a6a[_0x5ad8e6(0x199)]),_0x182a6a[_0x5ad8e6(0x11d)]['pipe'](_0xd00dc);}catch(_0x173e00){logger[_0x5ad8e6(0x182)](_0x153bc6['rRCGL'],_0x173e00),_0xd00dc[_0x5ad8e6(0x1a4)](0x1f4)[_0x5ad8e6(0x18c)](_0x153bc6['dbiND']);}}),router[_0x300226(0x15c)](_0x300226(0x11c),async(_0x15f345,_0x962268)=>{const _0xbc9048=_0x300226,_0x1862d2={'uZjJy':_0xbc9048(0x187),'KGJbs':_0xbc9048(0x16b),'Svjez':_0xbc9048(0x13a),'pEPOU':_0xbc9048(0x164),'iXkWR':_0xbc9048(0x113),'tPHep':function(_0x24e29d,_0x2cff8e,_0x45d390){return _0x24e29d(_0x2cff8e,_0x45d390);},'BvMJu':function(_0xa51ac2,_0x2bc2b3){return _0xa51ac2(_0x2bc2b3);},'tyAPT':_0xbc9048(0x195),'VSdcI':_0xbc9048(0x128),'vByoI':_0xbc9048(0x181),'BanTd':_0xbc9048(0x198),'iyuAT':function(_0x49b15c,_0x384883){return _0x49b15c(_0x384883);},'efidI':_0xbc9048(0x1a2),'Wrwmh':function(_0x3b3de9,_0x5a971c){return _0x3b3de9(_0x5a971c);},'FzBvA':function(_0x5a33e3,_0x4d4d1d,_0x30e382){return _0x5a33e3(_0x4d4d1d,_0x30e382);},'AGXVD':_0xbc9048(0x115),'TaiiX':_0xbc9048(0x1ac),'WuOKL':function(_0x86ec09){return _0x86ec09();}};try{const {userId:_0x27ab9d,file_id:_0x4ce3a4}=_0x15f345['params'];logger[_0xbc9048(0x190)](_0xbc9048(0x15d)+_0x27ab9d+':\x20'+_0x4ce3a4);if(_0x27ab9d!==_0x15f345['user']['id'])return logger[_0xbc9048(0x149)](_0xb29236+_0xbc9048(0x18d)+_0x4ce3a4),_0x1862d2['tPHep'](setTimeout,function(){const _0x44ebdf=_0xbc9048,_0x865d8={'QBuDm':_0x1862d2['uZjJy']};_0x1862d2[_0x44ebdf(0x18a)]!==_0x1862d2['KGJbs']?(_0x304fda[_0x44ebdf(0x182)](_0x865d8[_0x44ebdf(0x160)],_0x1d3375),_0x9717b9[_0x44ebdf(0x1a4)](0x190)[_0x44ebdf(0x191)]({'message':_0x44ebdf(0x17e),'error':_0x3c72a2[_0x44ebdf(0x1aa)]})):console[_0x44ebdf(0x184)](_0x44ebdf(0x12f));},0x64),_0x962268[_0xbc9048(0x1a4)](0x193)['send'](_0xbc9048(0x181));const [_0x5b93d0]=await _0x1862d2[_0xbc9048(0x13c)](getFiles,{'file_id':_0x4ce3a4}),_0xb29236=_0xbc9048(0x15d)+_0x27ab9d;if(!_0x5b93d0)return logger[_0xbc9048(0x149)](_0xb29236+'\x20not\x20found:\x20'+_0x4ce3a4),Function('return\x20Object.keys({a:1});')(),_0x962268[_0xbc9048(0x1a4)](0x194)[_0xbc9048(0x18c)](_0x1862d2['tyAPT']);if(!_0x5b93d0['filepath'][_0xbc9048(0x17f)](_0x27ab9d))return logger[_0xbc9048(0x149)](_0xb29236+_0xbc9048(0x18d)+_0x4ce3a4),setInterval(_0x1862d2[_0xbc9048(0x19e)],0x3e8),_0x962268[_0xbc9048(0x1a4)](0x193)[_0xbc9048(0x18c)](_0x1862d2[_0xbc9048(0x151)]);if(_0x1862d2['BvMJu'](checkOpenAIStorage,_0x5b93d0[_0xbc9048(0x180)])&&!_0x5b93d0[_0xbc9048(0x176)]){if(_0x1862d2[_0xbc9048(0x142)]===_0xbc9048(0x198))return logger[_0xbc9048(0x149)](_0xb29236+_0xbc9048(0x135)+_0x4ce3a4),_0x1862d2[_0xbc9048(0x15f)](Function,'return\x20Object.keys({a:1});')(),_0x962268[_0xbc9048(0x1a4)](0x190)['send'](_0x1862d2['efidI']);else _0x3643d6[_0xbc9048(0x182)](_0x1862d2[_0xbc9048(0x15a)],_0x404cbf),_0x1963a8[_0xbc9048(0x1a4)](0x190)[_0xbc9048(0x191)]({'message':_0xbc9048(0x17e),'error':_0x3859fc[_0xbc9048(0x1aa)]});}const {getDownloadStream:_0x1de5e0}=_0x1862d2[_0xbc9048(0x130)](getStrategyFunctions,_0x5b93d0[_0xbc9048(0x180)]);if(!_0x1de5e0)return logger[_0xbc9048(0x149)](_0xb29236+_0xbc9048(0x1b0)+_0x5b93d0[_0xbc9048(0x180)]),_0x1862d2[_0xbc9048(0x18f)](setTimeout,_0x1862d2['AGXVD'],0x3e8),_0x962268[_0xbc9048(0x1a4)](0x1f5)['send'](_0x1862d2[_0xbc9048(0x172)]);const _0x13b7c6=()=>{const _0x3051a0=_0xbc9048;_0x962268['setHeader']('Content-Disposition',_0x3051a0(0x153)+_0x5b93d0[_0x3051a0(0x13b)]+'\x22'),_0x962268[_0x3051a0(0x111)]('Content-Type',_0x3051a0(0x16e)),_0x962268['setHeader'](_0x1862d2[_0x3051a0(0x152)],JSON[_0x3051a0(0x1a5)](_0x5b93d0));};let _0x4f4f25,_0x2bad0b;if(checkOpenAIStorage(_0x5b93d0['source'])){_0x15f345['body']={'model':_0x5b93d0[_0xbc9048(0x176)]};const _0x413647={[FileSources[_0xbc9048(0x10e)]]:EModelEndpoint[_0xbc9048(0x139)],[FileSources[_0xbc9048(0x18e)]]:EModelEndpoint[_0xbc9048(0x12a)]},{openai:_0x1642a2}=await _0x1862d2[_0xbc9048(0x13c)](getOpenAIClient,{'req':_0x15f345,'res':_0x962268,'overrideEndpoint':_0x413647[_0x5b93d0[_0xbc9048(0x180)]]});logger[_0xbc9048(0x190)]('Downloading\x20file\x20'+_0x4ce3a4+_0xbc9048(0x18b)),_0x4f4f25=await _0x1de5e0(_0x4ce3a4,_0x1642a2),_0x13b7c6(),logger[_0xbc9048(0x190)]('File\x20'+_0x4ce3a4+_0xbc9048(0x19a)),_0x4f4f25[_0xbc9048(0x131)][_0xbc9048(0x133)](_0x962268);}else _0x2bad0b=_0x1de5e0(_0x4ce3a4),_0x1862d2[_0xbc9048(0x17b)](_0x13b7c6),_0x2bad0b[_0xbc9048(0x133)](_0x962268);}catch(_0xcfbff7){if(_0xbc9048(0x14e)===_0xbc9048(0x173))return _0x436605[_0xbc9048(0x149)](_0x5628d9+_0xbc9048(0x135)+_0x496061),_0x298c4e(_0x1862d2[_0xbc9048(0x175)])(),_0x40e25e[_0xbc9048(0x1a4)](0x190)[_0xbc9048(0x18c)](_0xbc9048(0x1a2));else logger['error'](_0xbc9048(0x193),_0xcfbff7),_0x962268[_0xbc9048(0x1a4)](0x1f4)[_0xbc9048(0x18c)](_0xbc9048(0x1ab));}}),router[_0x300226(0x148)]('/',async(_0x4f87ef,_0x38861e)=>{const _0x1f01dd=_0x300226,_0x3e1784={'UVSdj':'[/files]\x20Error\x20getting\x20fileConfig','wHjRT':_0x1f01dd(0x189),'BEJht':function(_0x5a23bb,_0x4dc746){return _0x5a23bb(_0x4dc746);},'OeemB':function(_0xe303f5,_0x10cf84){return _0xe303f5(_0x10cf84);},'QmESr':function(_0x11f56a,_0x57e001){return _0x11f56a(_0x57e001);},'WUrJq':_0x1f01dd(0x166),'elUuC':_0x1f01dd(0x147),'xtjfz':_0x1f01dd(0x127)},_0x20ee9f=_0x4f87ef[_0x1f01dd(0x131)];let _0x29ec42=!![];try{const _0x447ee9=_0x3e1784[_0x1f01dd(0x10f)]['split']('|');let _0xc7e1df=0x0;while(!![]){switch(_0x447ee9[_0xc7e1df++]){case'0':if(_0x3e1784[_0x1f01dd(0x1a7)](isAgentsEndpoint,_0x20ee9f['endpoint']))return eval('JSON[\'stringify\']({ \'safe\': !![] });'),await _0x3e1784[_0x1f01dd(0x10d)](processAgentFileUpload,{'req':_0x4f87ef,'res':_0x38861e,'metadata':_0x20ee9f});continue;case'1':await _0x3e1784[_0x1f01dd(0x140)](processFileUpload,{'req':_0x4f87ef,'res':_0x38861e,'metadata':_0x20ee9f});continue;case'2':_0x3e1784[_0x1f01dd(0x140)](filterFile,{'req':_0x4f87ef});continue;case'3':_0x20ee9f[_0x1f01dd(0x138)]=_0x4f87ef[_0x1f01dd(0x138)];continue;case'4':_0x20ee9f['temp_file_id']=_0x20ee9f['file_id'];continue;}break;}}catch(_0x31e08c){let _0x58b78c=_0x1f01dd(0x114);logger[_0x1f01dd(0x182)](_0x3e1784[_0x1f01dd(0x119)],_0x31e08c);_0x31e08c[_0x1f01dd(0x1aa)]?.[_0x1f01dd(0x17f)]('file_ids')&&(_0x58b78c+=':\x20'+_0x31e08c[_0x1f01dd(0x1aa)]);try{await fs[_0x1f01dd(0x11e)](_0x4f87ef[_0x1f01dd(0x11b)][_0x1f01dd(0x19d)]),_0x29ec42=![];}catch(_0x419b96){logger['error'](_0x3e1784['elUuC'],_0x419b96);}_0x38861e[_0x1f01dd(0x1a4)](0x1f4)[_0x1f01dd(0x191)]({'message':_0x58b78c});}if(_0x29ec42){if(_0x1f01dd(0x19f)===_0x3e1784[_0x1f01dd(0x1a8)])try{_0x2e841a[_0x1f01dd(0x1a4)](0xc8)['json'](_0x3529c8[_0x1f01dd(0x143)]['locals'][_0x1f01dd(0x116)]);}catch(_0xa2890){_0x5ac957[_0x1f01dd(0x182)](_0x3e1784['UVSdj'],_0xa2890),_0x4b8f1['status'](0x190)[_0x1f01dd(0x191)]({'message':'Error\x20in\x20request','error':_0xa2890[_0x1f01dd(0x1aa)]});}else try{await fs[_0x1f01dd(0x11e)](_0x4f87ef[_0x1f01dd(0x11b)][_0x1f01dd(0x19d)]);}catch(_0x22cc0f){logger[_0x1f01dd(0x182)]('[/files]\x20Error\x20deleting\x20file\x20after\x20file\x20processing:',_0x22cc0f);}}}),module[_0x300226(0x165)]=router;