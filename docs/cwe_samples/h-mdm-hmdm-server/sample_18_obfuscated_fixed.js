const _0x27076d=_0x38f7;(function(_0x294f87,_0xcaa415){const _0x3e4166=_0x38f7,_0x2a72d7=_0x294f87();while(!![]){try{const _0x2bf464=-parseInt(_0x3e4166(0x201))/0x1+parseInt(_0x3e4166(0x251))/0x2+parseInt(_0x3e4166(0x214))/0x3+-parseInt(_0x3e4166(0x238))/0x4+parseInt(_0x3e4166(0x257))/0x5+parseInt(_0x3e4166(0x1f4))/0x6+parseInt(_0x3e4166(0x1eb))/0x7;if(_0x2bf464===_0xcaa415)break;else _0x2a72d7['push'](_0x2a72d7['shift']());}catch(_0x1959d6){_0x2a72d7['push'](_0x2a72d7['shift']());}}}(_0x5630,0x3d134));import'./codemirror/ubo-static-filtering.js';import{dom,qs$}from'./dom.js';function _0x38f7(_0x418767,_0x8c7aaa){const _0x56305f=_0x5630();return _0x38f7=function(_0x38f71d,_0x4cda9d){_0x38f71d=_0x38f71d-0x1d9;let _0x22788e=_0x56305f[_0x38f71d];return _0x22788e;},_0x38f7(_0x418767,_0x8c7aaa);}import{i18n$}from'./i18n.js';import{onBroadcast}from'./broadcast.js';const cmEditor=new CodeMirror(qs$(_0x27076d(0x244)),{'autoCloseBrackets':!![],'autofocus':!![],'extraKeys':{'Ctrl-Space':_0x27076d(0x24a),'Tab':_0x27076d(0x25d)},'foldGutter':!![],'gutters':[_0x27076d(0x231),{'className':'CodeMirror-lintgutter','style':_0x27076d(0x1dd)}],'lineNumbers':!![],'lineWrapping':!![],'matchBrackets':!![],'maxScanLines':0x1,'styleActiveLine':{'nonEmpty':!![]}});uBlockDashboard['patchCodeMirrorEditor'](cmEditor);{let hintUpdateToken=0x0;const getHints=async function(){const _0x540533=_0x27076d,_0x4a7b1d={'ouncZ':_0x540533(0x22f),'ZOrPE':_0x540533(0x1ea)},_0x270057=await vAPI[_0x540533(0x1fe)]['send'](_0x540533(0x1f0),{'what':_0x4a7b1d[_0x540533(0x241)],'hintUpdateToken':hintUpdateToken});if(_0x270057 instanceof Object===![])return;_0x270057[_0x540533(0x209)]!==undefined&&(cmEditor[_0x540533(0x21a)](_0x4a7b1d[_0x540533(0x263)],_0x270057),hintUpdateToken=_0x270057[_0x540533(0x209)]),timer['on'](0x9c7);},timer=vAPI[_0x27076d(0x1df)][_0x27076d(0x21e)](()=>{getHints();});getHints();}vAPI['messaging'][_0x27076d(0x25b)]('dashboard',{'what':'getTrustedScriptletTokens'})['then'](_0x4c7246=>{const _0x3c881e=_0x27076d;cmEditor[_0x3c881e(0x21a)](_0x3c881e(0x1f3),_0x4c7246);});let originalState={'enabled':!![],'trusted':![],'filters':''};function getCurrentState(){const _0x3da5e1=_0x27076d,_0x58a99f={'huhMx':function(_0x3a505d,_0xb9e5ff){return _0x3a505d(_0xb9e5ff);},'EafII':_0x3da5e1(0x23a),'EeqWT':function(_0x28841b){return _0x28841b();}},_0x4e999a=_0x58a99f[_0x3da5e1(0x205)](qs$,_0x3da5e1(0x220))['checked'];return{'enabled':_0x4e999a,'trusted':_0x58a99f[_0x3da5e1(0x205)](qs$,_0x58a99f[_0x3da5e1(0x1e5)])[_0x3da5e1(0x254)],'filters':_0x58a99f[_0x3da5e1(0x210)](getEditorText)};}function rememberCurrentState(){const _0x29c0fd=_0x27076d,_0x37ae70={'isyqh':function(_0x1a8eff){return _0x1a8eff();}};originalState=_0x37ae70[_0x29c0fd(0x23f)](getCurrentState);}function currentStateChanged(){const _0x479c49=_0x27076d,_0x21f98b={'bTbJM':function(_0x330b20,_0x43f83c){return _0x330b20!==_0x43f83c;}};return _0x21f98b[_0x479c49(0x215)](JSON['stringify'](getCurrentState()),JSON[_0x479c49(0x252)](originalState));}function getEditorText(){const _0x385daa=_0x27076d,_0x56ea75=cmEditor['getValue']()[_0x385daa(0x232)](/\s+$/,'');return _0x56ea75===''?_0x56ea75:_0x56ea75+'\x0a';}function _0x5630(){const _0x9f4e49=['QyACp','ceGPt','data:text/plain;charset=utf-8,','number','width:\x2011px','setItem','defer','HJuAa','enabled','anchor','boolean','head','EafII','UCBLK','RouvW','lineCount','wikilink','uboHints','2562952gsYlZn','hasUnsavedData','commands','NjzGx','name','dashboard','lBeXj','{{datetime}}','trustedScriptletTokens','571398lchpaB','content','value','filters','scrollTo','ZoitK','#importUserFiltersFromFile','diff','uvymn','cursorActivity','messaging','xfbvu','result','398446zwVBMz','lHogD','YRzrO','getCursor','huhMx','indexOf','click','length','hintUpdateToken','trim','trusted','trustedSource','top','clearHistory','yLiUN','EeqWT','push','type','cloud','910767LRwkUY','bTbJM','jqVRI','cnIIV','pqcDX','fTsHZ','setOption','Jdwlr','BCDkp','files','create','vujsD','#enableMyFilters\x20input','setSelections','dnouu','focus','getOption','GmwvY','operation','split','xvYRM','mergeNewLines','setCursor','getHistory','OrGHN','JDwIs','getScrollInfo','getAutoCompleteDetails','getItemAsync','CodeMirror-linenumbers','replace','ongoing','join','yDmec','wIPUm','setValue','1941060VVgqnY','mrDpM','#trustMyFilters\x20input','disabled','line','sPoil','Bkzuy','isyqh','MFkXD','ouncZ','#userFiltersApply','#userFiltersRevert','#userFilters','changes','FDUZc','IjtpY','change','getValue','autocomplete','myFiltersCursorPosition','yirCF','#importFilePicker','wLiqy','#exportUserFiltersToFile','1pExportFilename','78292FCcAQt','stringify','endOperation','checked','localStorage','error','1648855Czxvdt','omiVw','dateNowToSensibleString','onPull','send','https://github.com/gorhill/uBlock/wiki/Dashboard:-My-filters','toggleComment','aBUow','save','diff_match_patch','string','startOperation','ZOrPE'];_0x5630=function(){return _0x9f4e49;};return _0x5630();}function setEditorText(_0x5a019e){const _0x5e3a29=_0x27076d;cmEditor[_0x5e3a29(0x237)](_0x5a019e[_0x5e3a29(0x232)](/\s+$/,'')+'\x0a\x0a');}function userFiltersChanged(_0x400dbd={}){const _0x195b4b=_0x27076d,_0x44aebb={'MFkXD':function(_0x48959c,_0x2fbccd){return _0x48959c===_0x2fbccd;},'Jdwlr':_0x195b4b(0x20c),'pqcDX':function(_0x18d0a1,_0x1a583c){return _0x18d0a1(_0x1a583c);}},_0x56443f=_0x44aebb[_0x195b4b(0x240)](typeof _0x400dbd['changed'],_0x195b4b(0x1e3))?_0x400dbd['changed']:self['hasUnsavedData']();qs$(_0x195b4b(0x242))['disabled']=!_0x56443f,qs$(_0x195b4b(0x243))[_0x195b4b(0x23b)]=!_0x56443f;const _0x2b9461=qs$('#enableMyFilters\x20input')[_0x195b4b(0x254)],_0x3e0bb7=cmEditor[_0x195b4b(0x224)](_0x44aebb[_0x195b4b(0x21b)]),_0xf082d5=_0x2b9461&&_0x44aebb[_0x195b4b(0x218)](qs$,'#trustMyFilters\x20input')[_0x195b4b(0x254)];if(_0x44aebb[_0x195b4b(0x240)](_0xf082d5,_0x3e0bb7))return;cmEditor[_0x195b4b(0x262)](),cmEditor[_0x195b4b(0x21a)](_0x44aebb[_0x195b4b(0x21b)],_0xf082d5);const _0x25ea50=cmEditor['getDoc'](),_0x5af8f0=_0x25ea50[_0x195b4b(0x22b)](),_0x423642=_0x25ea50['listSelections']();_0x25ea50['replaceRange'](_0x25ea50[_0x195b4b(0x249)](),{'line':0x0,'ch':0x0},{'line':_0x25ea50[_0x195b4b(0x1e8)](),'ch':0x0}),_0x25ea50[_0x195b4b(0x221)](_0x423642),_0x25ea50['setHistory'](_0x5af8f0),cmEditor['endOperation'](),cmEditor[_0x195b4b(0x223)]();}function threeWayMerge(_0x261017){const _0x150c88=_0x27076d,_0xa9cdee={'xvYRM':function(_0x516891){return _0x516891();},'ceGPt':function(_0xc9d667,_0x2a2f24){return _0xc9d667<_0x2a2f24;},'Bkzuy':function(_0x4bac66,_0x3d92a9){return _0x4bac66<_0x3d92a9;},'YRzrO':function(_0x5c7d29,_0x2c0d51){return _0x5c7d29!==_0x2c0d51;}},_0x30b877=originalState[_0x150c88(0x1f7)][_0x150c88(0x20a)]()['split'](/\n/),_0x1b74b1=new self[(_0x150c88(0x260))](),_0x3fbc23=_0x1b74b1[_0x150c88(0x1fb)](_0x30b877,_0x261017['trim']()[_0x150c88(0x227)](/\n/)),_0xb91b88=_0x1b74b1['diff'](_0x30b877,_0xa9cdee[_0x150c88(0x228)](getEditorText)[_0x150c88(0x20a)]()[_0x150c88(0x227)](/\n/)),_0x5a1ffd=[];let _0x207e86=0x0,_0x15b652=0x0,_0x8bb78=0x0;while(_0xa9cdee[_0x150c88(0x1da)](_0x207e86,_0x30b877['length'])){for(;_0xa9cdee[_0x150c88(0x23e)](_0x15b652,_0x3fbc23[_0x150c88(0x208)]);_0x15b652++){const _0x4c24f1=_0x3fbc23[_0x15b652];if(_0x4c24f1[0x0]!==0x1)break;_0x5a1ffd[_0x150c88(0x211)](_0x4c24f1[0x1]);}for(;_0xa9cdee[_0x150c88(0x23e)](_0x8bb78,_0xb91b88['length']);_0x8bb78++){const _0x958ba7=_0xb91b88[_0x8bb78];if(_0x958ba7[0x0]!==0x1)break;_0x5a1ffd[_0x150c88(0x211)](_0x958ba7[0x1]);}(_0x8bb78===_0xb91b88[_0x150c88(0x208)]||_0xa9cdee[_0x150c88(0x203)](_0xb91b88[_0x8bb78][0x0],-0x1))&&_0x5a1ffd[_0x150c88(0x211)](_0x30b877[_0x207e86]),_0x207e86+=0x1,_0x15b652+=0x1,_0x8bb78+=0x1;}for(;_0xa9cdee[_0x150c88(0x23e)](_0x15b652,_0x3fbc23[_0x150c88(0x208)]);_0x15b652++){const _0x2e8c94=_0x3fbc23[_0x15b652];if(_0x2e8c94[0x0]!==0x1)continue;_0x5a1ffd[_0x150c88(0x211)](_0x2e8c94[0x1]);}for(;_0x8bb78<_0xb91b88[_0x150c88(0x208)];_0x8bb78++){const _0x1ec4ea=_0xb91b88[_0x8bb78];if(_0xa9cdee['YRzrO'](_0x1ec4ea[0x0],0x1))continue;_0x5a1ffd['push'](_0x1ec4ea[0x1]);}return _0x5a1ffd[_0x150c88(0x234)]('\x0a');}async function renderUserFilters(_0x7d84c1=![]){const _0x37065e=_0x27076d,_0x32aff8={'RouvW':function(_0x5684c3){return _0x5684c3();},'BCDkp':'readUserFilters','dnouu':function(_0x25c908,_0xec668f){return _0x25c908(_0xec668f);},'esMpR':_0x37065e(0x220),'FDUZc':function(_0x1b5715,_0x49c868){return _0x1b5715===_0x49c868;},'IjtpY':_0x37065e(0x24c),'cnIIV':function(_0xcb1f0a){return _0xcb1f0a();}},_0x23a2db=await vAPI[_0x37065e(0x1fe)][_0x37065e(0x25b)]('dashboard',{'what':_0x32aff8[_0x37065e(0x21c)]});if(_0x23a2db instanceof Object===![]||_0x23a2db['error'])return;cmEditor[_0x37065e(0x21a)](_0x37065e(0x20c),_0x23a2db['trusted']),_0x32aff8[_0x37065e(0x222)](qs$,_0x32aff8['esMpR'])[_0x37065e(0x254)]=_0x23a2db[_0x37065e(0x1e1)],qs$(_0x37065e(0x23a))[_0x37065e(0x254)]=_0x23a2db['trusted'];const _0xac0c1b=_0x23a2db[_0x37065e(0x1f5)][_0x37065e(0x20a)]();if(_0x7d84c1&&self[_0x37065e(0x1ec)]())_0x32aff8[_0x37065e(0x246)](_0x37065e(0x1f1),_0x37065e(0x1f1))?(_0x32aff8[_0x37065e(0x222)](setEditorText,threeWayMerge(_0xac0c1b)),_0x32aff8[_0x37065e(0x222)](userFiltersChanged,{'changed':!![]})):_0x32aff8[_0x37065e(0x1e7)](_0xbdc7a2);else{if(_0x32aff8['IjtpY']===_0x32aff8[_0x37065e(0x247)])setEditorText(_0xac0c1b),userFiltersChanged({'changed':![]});else return;}_0x32aff8[_0x37065e(0x217)](rememberCurrentState);}function handleImportFilePicker(_0x1df96e){const _0x5600d4=_0x27076d,_0x4d77a8={'BMaKz':function(_0x113362,_0xb6cd94){return _0x113362(_0xb6cd94);},'yLiUN':function(_0x139cd8,_0x514eb8){return _0x139cd8!==_0x514eb8;},'vujsD':_0x5600d4(0x261)},_0x12e1a2=_0x1df96e['target'][_0x5600d4(0x21d)][0x0];if(_0x12e1a2===undefined||_0x12e1a2[_0x5600d4(0x1ef)]==='')return;if(_0x4d77a8[_0x5600d4(0x20f)](_0x12e1a2[_0x5600d4(0x212)][_0x5600d4(0x206)]('text'),0x0))return;const _0x3f321e=new FileReader();_0x3f321e['onload']=function(){const _0x3a4aa0=_0x5600d4;if(_0x4d77a8['yLiUN'](typeof _0x3f321e[_0x3a4aa0(0x200)],_0x4d77a8[_0x3a4aa0(0x21f)]))return;const _0x1e61ac=uBlockDashboard[_0x3a4aa0(0x229)](getEditorText(),_0x3f321e[_0x3a4aa0(0x200)]);cmEditor[_0x3a4aa0(0x226)](()=>{const _0x130f5f=_0x3a4aa0,_0x3d9a6c=cmEditor['getCursor']();_0x4d77a8['BMaKz'](setEditorText,_0x1e61ac),cmEditor[_0x130f5f(0x22a)](_0x3d9a6c),cmEditor[_0x130f5f(0x223)]();});},_0x3f321e['readAsText'](_0x12e1a2);}dom['on']('#importFilePicker',_0x27076d(0x248),handleImportFilePicker);function startImportFilePicker(){const _0x35c88a=_0x27076d,_0x3c1a5e={'QyACp':function(_0x599a0d,_0x43fcfa){return _0x599a0d(_0x43fcfa);},'oxBki':_0x35c88a(0x24d)},_0x3a9a64=_0x3c1a5e[_0x35c88a(0x1d9)](qs$,_0x3c1a5e['oxBki']);_0x3a9a64[_0x35c88a(0x1f6)]='',_0x3a9a64[_0x35c88a(0x207)]();}dom['on'](_0x27076d(0x1fa),_0x27076d(0x207),startImportFilePicker);function exportUserFiltersToFile(){const _0x331e57=_0x27076d,_0x1b2629={'mrDpM':function(_0x214c23){return _0x214c23();},'UCBLK':_0x331e57(0x250),'GmwvY':function(_0x33eca8,_0x6ddd97){return _0x33eca8(_0x6ddd97);}},_0x5b6695=_0x1b2629[_0x331e57(0x239)](getEditorText);if(_0x5b6695==='')return;const _0x2e2ccb=i18n$(_0x1b2629[_0x331e57(0x1e6)])[_0x331e57(0x232)](_0x331e57(0x1f2),uBlockDashboard[_0x331e57(0x259)]())[_0x331e57(0x232)](/ +/g,'_');vAPI['download']({'url':_0x331e57(0x1db)+_0x1b2629[_0x331e57(0x225)](encodeURIComponent,_0x5b6695),'filename':_0x2e2ccb});}async function applyChanges(){const _0x2e66ea=_0x27076d,_0x29f0fd={'jqVRI':'writeUserFilters','hkkTb':function(_0x319489){return _0x319489();},'uvymn':'reloadAllFilters'},_0x48e2f6=getCurrentState(),_0x4df53c=await vAPI[_0x2e66ea(0x1fe)][_0x2e66ea(0x25b)](_0x2e66ea(0x1f0),{'what':_0x29f0fd[_0x2e66ea(0x216)],'content':_0x48e2f6[_0x2e66ea(0x1f7)],'enabled':_0x48e2f6[_0x2e66ea(0x1e1)],'trusted':_0x48e2f6[_0x2e66ea(0x20b)]});if(_0x4df53c instanceof Object===![]||_0x4df53c[_0x2e66ea(0x256)])return;_0x29f0fd['hkkTb'](rememberCurrentState),userFiltersChanged({'changed':![]}),vAPI['messaging']['send']('dashboard',{'what':_0x29f0fd[_0x2e66ea(0x1fc)]});}function revertChanges(){const _0x52b1e4=_0x27076d,_0x30dc18={'wLiqy':_0x52b1e4(0x220),'jsIzO':function(_0x25fc2e,_0x519bc1){return _0x25fc2e(_0x519bc1);},'ZoitK':function(_0x447ade){return _0x447ade();}};qs$(_0x30dc18[_0x52b1e4(0x24e)])['checked']=originalState['enabled'],_0x30dc18['jsIzO'](qs$,_0x52b1e4(0x23a))['checked']=originalState['trusted'],setEditorText(originalState[_0x52b1e4(0x1f7)]),_0x30dc18[_0x52b1e4(0x1f9)](userFiltersChanged);}function getCloudData(){return getEditorText();}function setCloudData(_0x3bff3b,_0x1dc3d6){const _0x214beb=_0x27076d,_0x5d47aa={'NjzGx':function(_0x16115b,_0x2bba2f){return _0x16115b!==_0x2bba2f;},'xfbvu':_0x214beb(0x261),'lHogD':function(_0x25d83a){return _0x25d83a();}};if(_0x5d47aa[_0x214beb(0x1ee)](typeof _0x3bff3b,_0x5d47aa[_0x214beb(0x1ff)]))return;_0x1dc3d6&&(_0x3bff3b=uBlockDashboard[_0x214beb(0x229)](_0x5d47aa[_0x214beb(0x202)](getEditorText),_0x3bff3b)),cmEditor[_0x214beb(0x237)](_0x3bff3b);}self[_0x27076d(0x213)]['onPush']=getCloudData,self[_0x27076d(0x213)][_0x27076d(0x25a)]=setCloudData,self[_0x27076d(0x1e9)]=_0x27076d(0x25c),self[_0x27076d(0x1ec)]=function(){return currentStateChanged();},dom['on'](_0x27076d(0x24f),_0x27076d(0x207),exportUserFiltersToFile),dom['on'](_0x27076d(0x242),_0x27076d(0x207),()=>{const _0x2d7c98=_0x27076d,_0x4b2232={'JDwIs':function(_0x544df7){return _0x544df7();}};_0x4b2232[_0x2d7c98(0x22d)](applyChanges);}),dom['on']('#userFiltersRevert','click',revertChanges),dom['on'](_0x27076d(0x220),_0x27076d(0x248),userFiltersChanged),dom['on']('#trustMyFilters\x20input','change',userFiltersChanged),((async()=>{const _0xfae6fd=_0x27076d,_0x30bb5c={'sPoil':function(_0x29458c,_0xe9a818){return _0x29458c===_0xe9a818;},'OrGHN':_0xfae6fd(0x24b),'yDmec':'userFiltersUpdated','aBUow':_0xfae6fd(0x1fd)};await renderUserFilters(),cmEditor['clearHistory']();{const _0x1019ee=await vAPI[_0xfae6fd(0x255)][_0xfae6fd(0x230)](_0xfae6fd(0x24b));typeof _0x1019ee===_0xfae6fd(0x1dc)&&cmEditor[_0xfae6fd(0x22a)](_0x1019ee,0x0),cmEditor[_0xfae6fd(0x223)]();}{let _0x593750=0x0;cmEditor['on'](_0x30bb5c[_0xfae6fd(0x25e)],()=>{const _0x163d6b=_0xfae6fd,_0x527339={'HJuAa':function(_0x3f9b25,_0x125140){return _0x3f9b25!==_0x125140;}};if(_0x3db551[_0x163d6b(0x233)]()){if(_0x30bb5c[_0x163d6b(0x23d)](_0x163d6b(0x236),_0x163d6b(0x236)))return;else return _0x527339[_0x163d6b(0x1e0)](_0x1b5aac[_0x163d6b(0x252)](_0x2f8950()),_0x2995bb[_0x163d6b(0x252)](_0x2e3080));}if(_0x30bb5c['sPoil'](cmEditor[_0x163d6b(0x204)]()[_0x163d6b(0x23c)],_0x593750))return;_0x3db551['on'](0x2bd);});const _0x3db551=vAPI[_0xfae6fd(0x1df)][_0xfae6fd(0x21e)](()=>{const _0x5317d0=_0xfae6fd;_0x593750=cmEditor[_0x5317d0(0x204)]()[_0x5317d0(0x23c)],vAPI[_0x5317d0(0x255)][_0x5317d0(0x1de)](_0x30bb5c[_0x5317d0(0x22c)],_0x593750);});}onBroadcast(_0x35eefe=>{const _0x809185=_0xfae6fd;switch(_0x35eefe['what']){case _0x30bb5c[_0x809185(0x235)]:{if(_0x809185(0x258)!==_0x809185(0x219)){cmEditor[_0x809185(0x262)]();const _0x3d0566=cmEditor[_0x809185(0x22e)](),_0xd3d9f9=cmEditor['listSelections']();renderUserFilters(!![])['then'](()=>{const _0x2a3964=_0x809185;cmEditor[_0x2a3964(0x20e)](),cmEditor['setSelection'](_0xd3d9f9[0x0][_0x2a3964(0x1e2)],_0xd3d9f9[0x0][_0x2a3964(0x1e4)]),cmEditor[_0x2a3964(0x1f8)](_0x3d0566['left'],_0x3d0566[_0x2a3964(0x20d)]),cmEditor[_0x2a3964(0x253)]();});break;}else return _0x288590();}default:break;}});})()),cmEditor['on'](_0x27076d(0x245),userFiltersChanged),CodeMirror[_0x27076d(0x1ed)][_0x27076d(0x25f)]=applyChanges;