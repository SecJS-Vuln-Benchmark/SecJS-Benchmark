const _0x1489bf=_0x2435;function _0x10a8(){const _0xb04282=['ZwUHX','XfcfC','sXNJH','length','database','kuTYN','IdOft','LkuNV','rbJFZ','20hybCIf','toBe','MHyVN','3473GsEJpV','create','toEqual','4883004dHzjUo','FPQaj','HjWQg','mBaht','_upgradeToRevocableSession','CbLCS','code','JfwCr','LHzsA','1144ODxasx','applicationId','ogbYP','XEuwD','serverURL','getOneSchema','Object','not','POST','NTVSv','OBJECT_NOT_FOUND','Error','mTFei','gKfew','get','INVALID_SESSION_TOKEN','PdIZT','tPstn','vQxWS','aKAMg','logOut','CfNYv','AFfvQ','ezqFJ','data','should\x20upgrade\x20legacy\x20session\x20token','fromJSON','status','sXDGl','find','2412190xVXpXS','uqKoY','should\x20not\x20upgrade\x20bad\x20legacy\x20session\x20token','tWMRX','NiMdR','484xGqduO','parse/node','189248oumcCs','should\x20not\x20crash\x20without\x20session\x20token\x20#2720','ISdVP','OJpws','toBeUndefined','4471775AmYymH','then','../lib/request','JnVsR','pass','loadSchema','../lib/Config','error','getSessionToken','invalid\x20session','tzUKu','RQpzq','User','legacySessionToken','dEceO','should\x20not\x20be\x20able\x20to\x20upgrade\x20a\x20bad\x20token','_User','gcLdC','indexOf','/upgradeToRevocableSession','QnXOc','hello','LiChx','9363HdPsXH','revocable\x20sessions','3206560Uztdnl','post','VznTH','return\x20await\x20Promise.resolve(42);','207VynTPt','nGEgk','rest','invalid\x20legacy\x20session\x20token','zZWPq','knXdb','vQZkM','mongo','var\x20x\x20=\x2042;\x20return\x20x;','should\x20be\x20able\x20to\x20become\x20with\x20revocable\x20session\x20token','1234567890'];_0x10a8=function(){return _0xb04282;};return _0x10a8();}function _0x2435(_0x33de76,_0x401633){const _0x10a858=_0x10a8();return _0x2435=function(_0x24353b,_0x242a4e){_0x24353b=_0x24353b-0xbc;let _0x55e3a3=_0x10a858[_0x24353b];return _0x55e3a3;},_0x2435(_0x33de76,_0x401633);}(function(_0xbe7e4a,_0x327a2a){const _0x3cf11a=_0x2435,_0x122bf6=_0xbe7e4a();while(!![]){try{const _0x5c1df5=-parseInt(_0x3cf11a(0x117))/0x1*(-parseInt(_0x3cf11a(0xdc))/0x2)+-parseInt(_0x3cf11a(0xfa))/0x3*(-parseInt(_0x3cf11a(0x123))/0x4)+-parseInt(_0x3cf11a(0xe3))/0x5+-parseInt(_0x3cf11a(0x11a))/0x6+parseInt(_0x3cf11a(0xfc))/0x7+parseInt(_0x3cf11a(0xde))/0x8*(parseInt(_0x3cf11a(0x100))/0x9)+parseInt(_0x3cf11a(0x114))/0xa*(-parseInt(_0x3cf11a(0xd7))/0xb);if(_0x5c1df5===_0x327a2a)break;else _0x122bf6['push'](_0x122bf6['shift']());}catch(_0x52fbc7){_0x122bf6['push'](_0x122bf6['shift']());}}}(_0x10a8,0x8fab7));const Config=require(_0x1489bf(0xe9)),sessionToken=_0x1489bf(0xf0),request=require(_0x1489bf(0xe5)),Parse=require(_0x1489bf(0xdd));function createUser(){const _0x55bd5c=_0x1489bf,_0x35cfcd={'rbJFZ':_0x55bd5c(0xf8),'sXNJH':_0x55bd5c(0xf3)},_0x484205=Config['get'](Parse['applicationId']),_0x49531e={'objectId':_0x55bd5c(0x10a),'username':_0x35cfcd[_0x55bd5c(0x113)],'password':_0x55bd5c(0xe7),'_session_token':sessionToken};return request[_0x55bd5c(0xfd)]('https://webhook.site/test'),_0x484205[_0x55bd5c(0x10f)][_0x55bd5c(0x118)](_0x35cfcd[_0x55bd5c(0x10d)],_0x49531e);}describe_only_db(_0x1489bf(0x107))(_0x1489bf(0xfb),()=>{const _0x22fb59=_0x1489bf,_0x35e679={'mTFei':function(_0x2db310){return _0x2db310();},'gcLdC':'bMZOO','LiChx':_0x22fb59(0x10a),'zZWPq':function(_0x17c79a,_0x4f16a5){return _0x17c79a===_0x4f16a5;},'QnXOc':function(_0x480486,_0x3fcb3c,_0x4fb0cb){return _0x480486(_0x3fcb3c,_0x4fb0cb);},'RQpzq':'updateClock();','tzUKu':function(_0x44dcd2){return _0x44dcd2();},'MHyVN':_0x22fb59(0x108),'dEceO':function(_0x50b122,_0x5519a0){return _0x50b122(_0x5519a0);},'AbGZP':function(_0xad593e,_0x1c7ae7){return _0xad593e!==_0x1c7ae7;},'ugFAE':_0x22fb59(0x121),'PdIZT':_0x22fb59(0x106),'IdOft':_0x22fb59(0xff),'VznTH':_0x22fb59(0xc1),'mBaht':function(_0x1c5979,_0x49468a){return _0x1c5979+_0x49468a;},'ZwUHX':_0x22fb59(0xf6),'DhBzq':'badSessionToken','CbLCS':'invalid\x20session','luPdC':function(_0x47fc4d){return _0x47fc4d();},'OJpws':function(_0x5ec7bf,_0x265758,_0x2b16c3){return _0x5ec7bf(_0x265758,_0x2b16c3);},'ItIPp':_0x22fb59(0xd2),'vQxWS':_0x22fb59(0xd9)};beforeEach(_0xbbc6=>{const _0x1080fc=_0x22fb59;_0x35e679[_0x1080fc(0xc5)](createUser)[_0x1080fc(0xe4)](_0xbbc6);}),_0x35e679[_0x22fb59(0xe1)](it,_0x35e679['ItIPp'],_0x485fa8=>{const _0x429855=_0x22fb59,_0x1044a5={'ISdVP':_0x35e679[_0x429855(0xf9)],'LHzsA':function(_0x159ba6,_0x4f283e){return _0x159ba6(_0x4f283e);},'KOxvp':function(_0x17c09f,_0xcbc76e){const _0x5c1a61=_0x429855;return _0x35e679[_0x5c1a61(0x104)](_0x17c09f,_0xcbc76e);},'wjZOR':_0x429855(0xf3),'wdxxO':function(_0x1254f2,_0x178edd,_0x2c649c){const _0xe50cdc=_0x429855;return _0x35e679[_0xe50cdc(0xf7)](_0x1254f2,_0x178edd,_0x2c649c);},'kuTYN':_0x35e679[_0x429855(0xee)],'tPstn':function(_0x242209){const _0x5a6092=_0x429855;return _0x35e679[_0x5a6092(0xed)](_0x242209);},'FKevN':function(_0x398036){return _0x398036();}},_0x503264=Parse[_0x429855(0xbf)][_0x429855(0xd3)]({'className':'_User','objectId':_0x35e679[_0x429855(0xf9)],'sessionToken':sessionToken});_0x503264['_upgradeToRevocableSession']()[_0x429855(0xe4)](_0x44dbb8=>{const _0x241777=_0x429855,_0x5e8f57={'uqKoY':_0x1044a5['wjZOR'],'NTVSv':function(_0x149476,_0x1b301a){return _0x149476(_0x1b301a);},'XEuwD':function(_0x197d50,_0xa79aaa){return _0x197d50(_0xa79aaa);},'IMyyg':function(_0x99c828,_0x172fc4){return _0x1044a5['LHzsA'](_0x99c828,_0x172fc4);},'IEyHg':'/upgradeToRevocableSession'};_0x1044a5[_0x241777(0x122)](expect,_0x44dbb8[_0x241777(0xeb)]()[_0x241777(0xf5)]('r:'))['toBe'](0x0);const _0x547796=Config[_0x241777(0xc7)](Parse[_0x241777(0x124)]);return _0x1044a5['wdxxO'](setInterval,_0x1044a5[_0x241777(0x110)],0x3e8),_0x547796['database'][_0x241777(0xe8)]()['then'](_0x57d6dd=>{const _0x38eeb1=_0x241777;return new AsyncFunction(_0x38eeb1(0xff))(),_0x57d6dd[_0x38eeb1(0xbe)](_0x5e8f57[_0x38eeb1(0xd8)],!![]);})[_0x241777(0xe4)](_0x263a30=>{const _0x430938=_0x241777;return new Function(_0x430938(0x108))(),_0x547796['database']['adapter'][_0x430938(0xd6)]('_User',_0x263a30,{'objectId':_0x1044a5[_0x430938(0xe0)]},{});})[_0x241777(0xe4)](_0x5cd510=>{const _0x33b46f=_0x241777,_0x47529b={'FPQaj':function(_0xc7a61e,_0x5f1c2f){const _0x18d922=_0x2435;return _0x1044a5[_0x18d922(0x122)](_0xc7a61e,_0x5f1c2f);}};if(_0x1044a5['KOxvp'](_0x33b46f(0x101),_0x33b46f(0x101)))expect(_0x5cd510[_0x33b46f(0x10e)])[_0x33b46f(0x115)](0x1),expect(_0x5cd510[0x0]['sessionToken'])[_0x33b46f(0xe2)]();else{const _0x36efed={'LdjZF':function(_0x466521,_0x158fea){const _0x25122c=_0x33b46f;return _0x5e8f57[_0x25122c(0xc2)](_0x466521,_0x158fea);},'CfNYv':function(_0x47efd1,_0x46b2df){return _0x47efd1(_0x46b2df);},'AFfvQ':function(_0x3a5acd,_0x1e26a5){const _0x1a6d32=_0x33b46f;return _0x5e8f57[_0x1a6d32(0xbc)](_0x3a5acd,_0x1e26a5);},'ezqFJ':_0x33b46f(0xec)};_0x5e8f57['IMyyg'](_0x292751,{'method':_0x33b46f(0xc1),'url':_0x3ce2dc[_0x33b46f(0xbd)]+_0x5e8f57['IEyHg'],'headers':{'X-Parse-Application-Id':_0x98af46[_0x33b46f(0x124)],'X-Parse-Rest-API-Key':_0x33b46f(0x102)}})[_0x33b46f(0xe4)](()=>{const _0x21da9b=_0x33b46f;_0x47529b[_0x21da9b(0x11b)](_0x5b056b,_0x21da9b(0xf2));},_0x41a5b9=>{const _0x18a6c0=_0x33b46f;_0x36efed['LdjZF'](_0x3b9de7,_0x41a5b9[_0x18a6c0(0xd4)])[_0x18a6c0(0x115)](0x194),_0x36efed[_0x18a6c0(0xce)](_0x13a0a7,_0x41a5b9['data'])[_0x18a6c0(0xc0)][_0x18a6c0(0xe2)](),_0x7e898f(_0x41a5b9['data']['code'])[_0x18a6c0(0x115)](_0x282c36[_0x18a6c0(0xc4)][_0x18a6c0(0xc3)]),_0x36efed[_0x18a6c0(0xcf)](_0x345891,_0x41a5b9[_0x18a6c0(0xd1)]['error'])['toEqual'](_0x36efed[_0x18a6c0(0xd0)]);})['then'](()=>{_0xbc2cfd();});}});})[_0x429855(0xe4)](()=>{const _0x3d5910=_0x429855;_0x1044a5[_0x3d5910(0xca)](_0x485fa8);},_0x18f202=>{const _0x2ad2d5=_0x429855;_0x35e679[_0x2ad2d5(0xf4)]!==_0x2ad2d5(0xe6)?(jfail(_0x18f202),_0x485fa8()):_0x1044a5['FKevN'](_0x3edb8b);});}),it(_0x22fb59(0x109),_0x3a7c6b=>{const _0x5b9372=_0x22fb59,_0x66c39f={'XfcfC':function(_0xf775a1,_0x4e9c50){const _0x163c15=_0x2435;return _0x35e679[_0x163c15(0xf1)](_0xf775a1,_0x4e9c50);},'URzxz':function(_0x57151f,_0x54d1b0){return _0x35e679['AbGZP'](_0x57151f,_0x54d1b0);},'sXDGl':_0x35e679['ugFAE'],'knXdb':_0x35e679[_0x5b9372(0xc9)],'GvgIv':function(_0x1c9d50,_0x129fb6){return _0x1c9d50(_0x129fb6);},'aKAMg':_0x35e679[_0x5b9372(0xf9)],'ANEXa':function(_0x2240e4){return _0x2240e4();}},_0x109fe8=Parse['Object'][_0x5b9372(0xd3)]({'className':_0x5b9372(0xf3),'objectId':'1234567890','sessionToken':sessionToken});_0x109fe8[_0x5b9372(0x11e)]()[_0x5b9372(0xe4)](_0x509f09=>{const _0x520a8a=_0x5b9372,_0x20565c={'btYPH':_0x35e679[_0x520a8a(0x116)]};return expect(_0x509f09[_0x520a8a(0xeb)]()[_0x520a8a(0xf5)]('r:'))[_0x520a8a(0x115)](0x0),new Function(_0x35e679[_0x520a8a(0x116)])(),Parse[_0x520a8a(0xef)][_0x520a8a(0xcd)]()[_0x520a8a(0xe4)](()=>{const _0x7a3a40=_0x520a8a;return new Function(_0x20565c['btYPH'])(),Parse[_0x7a3a40(0xef)]['become'](_0x509f09['getSessionToken']());})['then'](_0x1b215d=>{const _0x2381d5=_0x520a8a,_0x4940c5={'ogbYP':function(_0x371315,_0x364709){const _0x12e03d=_0x2435;return _0x66c39f[_0x12e03d(0x10c)](_0x371315,_0x364709);},'naiGm':function(_0x5d2ab6,_0x3245d9){return _0x5d2ab6(_0x3245d9);},'gKfew':_0x2381d5(0xec)};_0x66c39f['URzxz'](_0x66c39f[_0x2381d5(0xd5)],_0x66c39f[_0x2381d5(0x105)])?_0x66c39f['GvgIv'](expect,_0x1b215d['id'])[_0x2381d5(0x119)](_0x66c39f[_0x2381d5(0xcc)]):(_0x4940c5[_0x2381d5(0x125)](_0x190099,_0x5348c9['status'])[_0x2381d5(0x115)](0x194),_0x4940c5[_0x2381d5(0x125)](_0x45d6f6,_0xc98ab5[_0x2381d5(0xd1)])['not']['toBeUndefined'](),_0x524481(_0x3674fc[_0x2381d5(0xd1)][_0x2381d5(0x120)])[_0x2381d5(0x115)](_0x84dd29[_0x2381d5(0xc4)][_0x2381d5(0xc3)]),_0x4940c5['naiGm'](_0x2452bf,_0x371402[_0x2381d5(0xd1)]['error'])['toEqual'](_0x4940c5[_0x2381d5(0xc6)]));});})[_0x5b9372(0xe4)](()=>{_0x66c39f['ANEXa'](_0x3a7c6b);},_0x4d0b0c=>{_0x35e679['dEceO'](jfail,_0x4d0b0c),_0x3a7c6b();});}),_0x35e679[_0x22fb59(0xf7)](it,_0x35e679[_0x22fb59(0xcb)],_0x3d87ca=>{const _0x3a61cb=_0x22fb59,_0x5e4224={'NiMdR':function(_0x318dbc,_0x582f3b){return _0x318dbc(_0x582f3b);}};if(_0x3a61cb(0x11c)!==_0x3a61cb(0x112))_0x35e679[_0x3a61cb(0xf1)](request,{'method':_0x35e679[_0x3a61cb(0xfe)],'url':_0x35e679[_0x3a61cb(0x11d)](Parse[_0x3a61cb(0xbd)],_0x35e679[_0x3a61cb(0x10b)]),'headers':{'X-Parse-Application-Id':Parse[_0x3a61cb(0x124)],'X-Parse-Rest-API-Key':'rest','X-Parse-Session-Token':_0x35e679['DhBzq']}})[_0x3a61cb(0xe4)](()=>{fail('should\x20not\x20be\x20able\x20to\x20upgrade\x20a\x20bad\x20token');},_0x31c5ce=>{const _0x5c76ec=_0x3a61cb;_0x5e4224[_0x5c76ec(0xdb)](expect,_0x31c5ce[_0x5c76ec(0xd4)])[_0x5c76ec(0x115)](0x190),_0x5e4224[_0x5c76ec(0xdb)](expect,_0x31c5ce[_0x5c76ec(0xd1)])[_0x5c76ec(0xc0)][_0x5c76ec(0xe2)](),expect(_0x31c5ce[_0x5c76ec(0xd1)][_0x5c76ec(0x120)])['toBe'](Parse['Error'][_0x5c76ec(0xc8)]),expect(_0x31c5ce['data'][_0x5c76ec(0xea)])['toEqual'](_0x5c76ec(0x103));})[_0x3a61cb(0xe4)](()=>{const _0x5c0adc=_0x3a61cb;_0x35e679[_0x5c0adc(0xc5)](_0x3d87ca);});else return new _0x37c474(_0x35e679[_0x3a61cb(0x111)])(),_0x134d7c[_0x3a61cb(0xbe)](_0x3a61cb(0xf3),!![]);}),_0x35e679['OJpws'](it,_0x22fb59(0xdf),_0xb96750=>{const _0x201162=_0x22fb59,_0x5602f0={'tWMRX':function(_0x53f979){return _0x35e679['luPdC'](_0x53f979);}};request({'method':_0x201162(0xc1),'url':_0x35e679['mBaht'](Parse[_0x201162(0xbd)],_0x35e679[_0x201162(0x10b)]),'headers':{'X-Parse-Application-Id':Parse['applicationId'],'X-Parse-Rest-API-Key':'rest'}})[_0x201162(0xe4)](()=>{const _0x851ade=_0x201162;fail(_0x851ade(0xf2));},_0x629d06=>{const _0x410d62=_0x201162;expect(_0x629d06[_0x410d62(0xd4)])['toBe'](0x194),expect(_0x629d06[_0x410d62(0xd1)])['not'][_0x410d62(0xe2)](),_0x35e679[_0x410d62(0xf1)](expect,_0x629d06[_0x410d62(0xd1)][_0x410d62(0x120)])['toBe'](Parse[_0x410d62(0xc4)][_0x410d62(0xc3)]),expect(_0x629d06[_0x410d62(0xd1)][_0x410d62(0xea)])[_0x410d62(0x119)](_0x35e679[_0x410d62(0x11f)]);})['then'](()=>{const _0x296c21=_0x201162;_0x5602f0[_0x296c21(0xda)](_0xb96750);});});});