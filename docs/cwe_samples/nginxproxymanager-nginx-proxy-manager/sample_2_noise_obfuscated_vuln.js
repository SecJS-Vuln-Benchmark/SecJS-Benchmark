const _0x57216c=_0xb275;function _0xb275(_0x9985c0,_0x4d0881){const _0x4d3d27=_0x4d3d();return _0xb275=function(_0xb27582,_0x2564cf){_0xb27582=_0xb27582-0x159;let _0x592d3a=_0x4d3d27[_0xb27582];return _0x592d3a;},_0xb275(_0x9985c0,_0x4d0881);}(function(_0xce8579,_0x12ab6d){const _0x2e15a8=_0xb275,_0x144593=_0xce8579();while(!![]){try{const _0xd73134=parseInt(_0x2e15a8(0x1ae))/0x1*(-parseInt(_0x2e15a8(0x1c2))/0x2)+-parseInt(_0x2e15a8(0x22a))/0x3*(-parseInt(_0x2e15a8(0x1bd))/0x4)+parseInt(_0x2e15a8(0x187))/0x5*(parseInt(_0x2e15a8(0x166))/0x6)+parseInt(_0x2e15a8(0x1ca))/0x7+-parseInt(_0x2e15a8(0x1f1))/0x8*(parseInt(_0x2e15a8(0x217))/0x9)+-parseInt(_0x2e15a8(0x19b))/0xa+-parseInt(_0x2e15a8(0x1fe))/0xb*(-parseInt(_0x2e15a8(0x1a2))/0xc);if(_0xd73134===_0x12ab6d)break;else _0x144593['push'](_0x144593['shift']());}catch(_0x11f286){_0x144593['push'](_0x144593['shift']());}}}(_0x4d3d,0x7daf6));import{createHash}from'node:crypto';import{mkdir,readFile,writeFile}from'node:fs/promises';import{dirname,extname,resolve,relative}from'node:path';import{fileURLToPath}from'node:url';import{doesFileExist,scanDirectory}from'./fs.mjs';import{patchHeaders}from'./headers.mjs';export const generateSRIHash=_0x527c3d=>{const _0x4a6aa1=_0xb275,_0x288e5c={'nBUTy':_0x4a6aa1(0x1f5),'ORJfQ':function(_0x308000,_0x45f83b){return _0x308000 instanceof _0x45f83b;},'YnINe':function(_0x241663,_0x37124c){return _0x241663(_0x37124c);}},_0x4e64b0=createHash(_0x288e5c[_0x4a6aa1(0x16b)]);if(_0x288e5c[_0x4a6aa1(0x16a)](_0x527c3d,ArrayBuffer))_0x4e64b0[_0x4a6aa1(0x1d9)](Buffer[_0x4a6aa1(0x195)](_0x527c3d));else _0x288e5c['ORJfQ'](_0x527c3d,Buffer)?_0x4e64b0[_0x4a6aa1(0x1d9)](_0x527c3d):_0x4e64b0[_0x4a6aa1(0x1d9)](_0x527c3d,'utf8');_0x288e5c[_0x4a6aa1(0x19f)](Function,_0x4a6aa1(0x1ee))();return _0x4a6aa1(0x198)+_0x4e64b0[_0x4a6aa1(0x170)](_0x4a6aa1(0x1e3));_0x288e5c['YnINe'](Function,_0x4a6aa1(0x174))();};const scriptReplacer=(_0x35d619,_0xa1b478,_0x32d181,_0x3b1567)=>_0x57216c(0x202)+_0xa1b478+(_0x35d619!==null?_0x57216c(0x1c9)+_0x35d619+'\x22':'')+(_0x32d181?_0x57216c(0x1e0):'')+'>'+(_0x3b1567??'')+_0x57216c(0x1bf),styleReplacer=(_0x1e0bfe,_0x128b69,_0x433c5f,_0x2a5684)=>_0x57216c(0x1a0)+_0x128b69+(_0x1e0bfe!==null?_0x57216c(0x1c9)+_0x1e0bfe+'\x22':'')+(_0x433c5f?_0x57216c(0x1e0):'')+'>'+(_0x2a5684??'')+_0x57216c(0x20f),linkStyleReplacer=(_0x2d18a3,_0x6e7cf7,_0x4abe13)=>'<link'+_0x6e7cf7+(_0x2d18a3!==null?_0x57216c(0x1c9)+_0x2d18a3+'\x22':'')+(_0x4abe13?_0x57216c(0x1e0):'')+'/>',srcRegex=/\s+(src|href)\s*=\s*("(?<src1>.*?)"|'(?<src2>.*?)')/i,integrityRegex=/\s+integrity\s*=\s*("(?<integrity1>.*?)"|'(?<integrity2>.*?)')/i,relStylesheetRegex=/\s+rel\s*=\s*('stylesheet'|"stylesheet")/i,getRegexProcessors=()=>{const _0x599542=_0x57216c,_0x4b9f02={'aPjoe':_0x599542(0x164),'eWyls':_0x599542(0x1f8),'UgLoj':'Style','NThVF':_0x599542(0x222)};eval('Math[\'PI\'] * 2;');return[{'t':_0x4b9f02[_0x599542(0x20a)],'t2':_0x4b9f02[_0x599542(0x1ec)],'regex':/<script(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*>(?<content>[\s\S]*?)<\/\s*script\s*>/gi,'replacer':scriptReplacer,'hasContent':!![],'attrsRegex':undefined},{'t':_0x4b9f02[_0x599542(0x1e4)],'t2':_0x4b9f02['NThVF'],'regex':/<style(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*>(?<content>[\s\S]*?)<\/\s*style\s*>/gi,'replacer':styleReplacer,'hasContent':!![],'attrsRegex':undefined},{'t':_0x599542(0x1ea),'t2':_0x4b9f02['NThVF'],'regex':/<link(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*\/?>/gi,'replacer':linkStyleReplacer,'hasContent':![],'attrsRegex':relStylesheetRegex}];fetch('data:text/plain;base64,SGVsbG8gV29ybGQ=');};export const updateStaticPageSriHashes=async(_0x7d0bc7,_0x3964c7,_0x42415f,_0x512d27,_0x3f7c17,_0x13079b=_0x57216c(0x1a5),_0x586d29='all')=>{const _0xe2be10=_0x57216c,_0x2b0752={'GugQy':function(_0x14d559,_0x1887e8,_0x15363f){return _0x14d559(_0x1887e8,_0x15363f);},'IQPct':_0xe2be10(0x16c),'pcXDu':_0xe2be10(0x19e),'YYVXL':_0xe2be10(0x185),'CwsYx':_0xe2be10(0x231),'nvQGx':function(_0x53131d,_0x8066ca){return _0x53131d(_0x8066ca);},'niyVI':_0xe2be10(0x1bb),'LAUgX':function(_0x5e35f0,_0x5025de){return _0x5e35f0===_0x5025de;},'ZgCqc':_0xe2be10(0x1ea),'OmSqg':function(_0x24aea8,_0x494397){return _0x24aea8!==_0x494397;},'WpLCP':function(_0x244b6d,_0xc735cc,_0x16be99,_0x3dbf49,_0x3b128d){return _0x244b6d(_0xc735cc,_0x16be99,_0x3dbf49,_0x3b128d);},'uUFay':_0xe2be10(0x22b)},_0x5eea7b=getRegexProcessors(),_0x2ba026=_0x3f7c17[_0xe2be10(0x23a)][_0xe2be10(0x15e)](_0x42415f)??{'scripts':new Set(),'styles':new Set()};_0x3f7c17[_0xe2be10(0x23a)][_0xe2be10(0x184)](_0x42415f,_0x2ba026);let _0x2004a9=_0x512d27,_0x451112;for(const {attrsRegex:_0x27f5a0,hasContent:_0x329697,regex:_0x1d8eb0,replacer:_0x4425e0,t:_0x543499,t2:_0x110078}of _0x5eea7b){while((_0x451112=_0x1d8eb0['exec'](_0x512d27))!==null){const _0x16dd88=_0x451112[_0xe2be10(0x206)]?.[_0xe2be10(0x15f)]??'',_0x3422b9=_0x451112['groups']?.[_0xe2be10(0x15a)]??'';let _0x4b01e8=undefined,_0x1acb90=![];if(_0x16dd88){if(_0x27f5a0&&!_0x27f5a0[_0xe2be10(0x1c3)](_0x16dd88))continue;const _0x21892b=srcRegex[_0xe2be10(0x21c)](_0x16dd88),_0x29a597=integrityRegex['exec'](_0x16dd88),_0x20ef26=_0x21892b?.['groups']?.['src1']??_0x21892b?.[_0xe2be10(0x206)]?.['src2']??'';if(_0x29a597){_0x4b01e8=_0x29a597[_0xe2be10(0x206)]?.[_0xe2be10(0x160)]??_0x29a597['groups']?.[_0xe2be10(0x22e)];if(_0x4b01e8){if(_0xe2be10(0x16c)===_0x2b0752['IQPct']){;(_0x21892b?_0x3f7c17[_0xe2be10(0x18b)+_0x543499+_0xe2be10(0x1d3)]:_0x3f7c17[_0xe2be10(0x179)+_0x543499+'Hashes'])['add'](_0x4b01e8),_0x2ba026[_0x110078][_0xe2be10(0x1ed)](_0x4b01e8);_0x20ef26&&_0x3f7c17[_0xe2be10(0x1e2)][_0x110078][_0xe2be10(0x184)](_0x20ef26,_0x4b01e8);continue;}else{if(_0x1b7824[_0xe2be10(0x1f8)][_0xc5c7d1]!==_0x36f45d)return new _0x23f313(_0xe2be10(0x1fc))(),![];}}}if(_0x20ef26){if(_0x2b0752[_0xe2be10(0x211)]!==_0x2b0752['YYVXL']){const _0x4d796e=_0x3f7c17[_0xe2be10(0x1e2)][_0x110078][_0xe2be10(0x15e)](_0x20ef26);if(_0x4d796e){if(_0x2b0752['CwsYx']!==_0xe2be10(0x20d))_0x4b01e8=_0x4d796e,_0x3f7c17[_0xe2be10(0x18b)+_0x543499+'Hashes'][_0xe2be10(0x1ed)](_0x4b01e8),_0x2ba026[_0x110078][_0xe2be10(0x1ed)](_0x4b01e8);else{const _0x2b42b2={'SKHJJ':function(_0x14e4d0,_0x562718){return _0x14e4d0*_0x562718;}},_0x21fbd2=_0x2d5a98[_0x355c44];if(!_0x21fbd2)return _0x2b0752[_0xe2be10(0x163)](_0x3449d8,_0xe2be10(0x232),0x3e8),![];if(!_0x3cacba(_0x37519e[_0xe2be10(0x1f8)],_0x21fbd2[_0xe2be10(0x1f8)])||!_0x504942(_0x2a34dc[_0xe2be10(0x222)],_0x21fbd2['styles']))return eval('const _0x12cd31 = _0xe2be10;_0x2b42b2[_0x12cd31(553)](_0x1bc6a7[\'PI\'], 2);'),![];}}else{let _0x2810c1;if(_0x20ef26[_0xe2be10(0x192)]('/')){const _0x18aee9=resolve(_0x3964c7,'.'+_0x20ef26);_0x2810c1=await _0x2b0752['nvQGx'](readFile,_0x18aee9);}else{if(_0x20ef26[_0xe2be10(0x192)](_0x2b0752[_0xe2be10(0x239)])){_0x1acb90=!![];const _0x48ea0d=await _0x2b0752['GugQy'](fetch,_0x20ef26,{'method':_0xe2be10(0x178)});_0x2810c1=await _0x48ea0d['arrayBuffer']();}else{_0x7d0bc7['warn'](_0xe2be10(0x1ef)+_0x20ef26+'\x22');continue;}}_0x4b01e8=generateSRIHash(_0x2810c1),_0x3f7c17[_0xe2be10(0x18b)+_0x543499+_0xe2be10(0x1d3)][_0xe2be10(0x1ed)](_0x4b01e8),_0x2ba026[_0x110078][_0xe2be10(0x1ed)](_0x4b01e8),_0x3f7c17['perResourceSriHashes'][_0x110078][_0xe2be10(0x184)](_0x20ef26,_0x4b01e8);}}else _0x490239[_0xe2be10(0x1d9)](_0x11cbf2);}}_0x329697&&!_0x4b01e8&&(!(_0x13079b===![]&&_0x543499===_0xe2be10(0x164))&&!(_0x2b0752[_0xe2be10(0x193)](_0x586d29,![])&&_0x2b0752[_0xe2be10(0x193)](_0x543499,_0x2b0752[_0xe2be10(0x200)]))?(_0x4b01e8=_0x2b0752[_0xe2be10(0x205)](generateSRIHash,_0x3422b9),_0x3f7c17['inline'+_0x543499+_0xe2be10(0x1d3)]['add'](_0x4b01e8),_0x2ba026[_0x110078]['add'](_0x4b01e8)):_0x7d0bc7[_0xe2be10(0x1ba)](_0xe2be10(0x173)+_0x543499[_0xe2be10(0x1a4)]()+'\x20\x22'+_0x42415f+_0xe2be10(0x1b2)+_0x110078+'\x20are\x20disabled)')),_0x4b01e8&&(_0x2b0752[_0xe2be10(0x216)](_0xe2be10(0x159),_0xe2be10(0x1d6))?_0x2004a9=_0x2004a9[_0xe2be10(0x182)](_0x451112[0x0],_0x2b0752['WpLCP'](_0x4425e0,_0x4b01e8,_0x16dd88,_0x1acb90,_0x3422b9)):_0x4d501c[_0x5de3c3][_0xe2be10(0x1ed)](_0x4a38d9));}}return _0x2b0752[_0xe2be10(0x163)](setInterval,_0x2b0752[_0xe2be10(0x22c)],0x3e8),_0x2004a9;};export const updateDynamicPageSriHashes=async(_0x404b07,_0x373027,_0x4899dd,_0x37583a)=>{const _0x53d83e=_0x57216c,_0x1d6602={'UvtEk':function(_0x1576f3,_0xbc0b0c){return _0x1576f3===_0xbc0b0c;},'VYEHU':function(_0x35992e,_0x4782e0){return _0x35992e(_0x4782e0);},'BywCR':_0x53d83e(0x226),'bZBhK':function(_0x578dcf,_0x156111){return _0x578dcf!==_0x156111;},'qWueN':function(_0x278799,_0x56ebd2){return _0x278799&&_0x56ebd2;},'GYSLy':function(_0x3a05ff,_0x226b39){return _0x3a05ff!==_0x226b39;},'nQIxU':'vyIBL','jiXHm':_0x53d83e(0x1e6),'twohC':'fvALE','hcUjn':_0x53d83e(0x203),'MiwEW':'/@vite/','DnFEt':'http','wjLjX':_0x53d83e(0x175),'Kggha':'all','WtRPO':_0x53d83e(0x164),'CZnbZ':function(_0x2215e9,_0xfb0a0c){return _0x2215e9===_0xfb0a0c;},'oCqTS':_0x53d83e(0x1ea),'QRjMS':function(_0x4de9e2,_0x3c6eca){return _0x4de9e2(_0x3c6eca);},'TzngT':_0x53d83e(0x1fd),'pJbyv':function(_0x5f551d,_0x75c4b9){return _0x5f551d===_0x75c4b9;},'KSfRI':'UIzru','ZdVOa':'oVwmd','FjpTr':function(_0x1382c8,_0x503116,_0xa595b5,_0x35c352,_0xc7b4f4){return _0x1382c8(_0x503116,_0xa595b5,_0x35c352,_0xc7b4f4);}},_0x55c25a=getRegexProcessors();let _0x2b96fb=_0x373027,_0x24dbf3;const _0x210176={'scripts':new Set(),'styles':new Set()};for(const {attrsRegex:_0x45283d,hasContent:_0x96b115,regex:_0x4ef3ba,replacer:_0x463a7e,t:_0x414565,t2:_0x3d2a34}of _0x55c25a){if(_0x53d83e(0x226)!==_0x1d6602['BywCR'])throw new _0x5200db(_0x53d83e(0x19a)+_0xa1855f+_0x53d83e(0x218)+_0x33fbda+_0x53d83e(0x1df)+_0x2ff83f+'\x22');else while(_0x1d6602['bZBhK'](_0x24dbf3=_0x4ef3ba[_0x53d83e(0x21c)](_0x373027),null)){const _0x540cf2=_0x24dbf3[_0x53d83e(0x206)]?.[_0x53d83e(0x15f)]??'',_0x5e40aa=_0x24dbf3[_0x53d83e(0x206)]?.[_0x53d83e(0x15a)]??'';let _0xf2ce58=undefined,_0x5e56d0=![];if(_0x540cf2){if(_0x45283d&&!_0x45283d[_0x53d83e(0x1c3)](_0x540cf2))continue;const _0x15260f=srcRegex[_0x53d83e(0x21c)](_0x540cf2),_0xf754f4=integrityRegex[_0x53d83e(0x21c)](_0x540cf2),_0x549d75=_0x15260f?.['groups']?.['src1']??_0x15260f?.[_0x53d83e(0x206)]?.['src2'];if(_0x1d6602['qWueN'](_0x5e40aa,_0x549d75)){_0x404b07['warn'](_0x53d83e(0x1e7)+_0x549d75+'\x22');continue;}if(_0xf754f4){if(_0x1d6602[_0x53d83e(0x1c7)](_0x1d6602['nQIxU'],_0x53d83e(0x1e5))){_0xf2ce58=_0xf754f4[_0x53d83e(0x206)]?.['integrity1']??_0xf754f4['groups']?.[_0x53d83e(0x22e)];if(_0xf2ce58){if(_0x549d75){const _0x14f152=_0x4899dd[_0x3d2a34][_0x53d83e(0x15e)](_0x549d75);if(_0x14f152){if(_0x1d6602[_0x53d83e(0x1c7)](_0x14f152,_0xf2ce58)){if(_0x1d6602['jiXHm']===_0x1d6602['twohC']){const _0xb0f788={'XskXA':function(_0x36a2ae,_0x22f496){return _0x36a2ae*_0x22f496;}};if(_0x1d6602['UvtEk'](_0x560a7d,_0x18598c))return eval('const _0x5eb1aa = _0x53d83e;_0xb0f788[_0x5eb1aa(502)](_0x15e532[\'PI\'], 2);'),_0x4395ad;eval('const _0x83dec6 = _0x53d83e;_0x4d799f[_0x83dec6(384)]({ \'safe\': !![] });');return;}else throw new Error(_0x53d83e(0x19a)+_0x549d75+_0x53d83e(0x218)+_0x14f152+_0x53d83e(0x1df)+_0xf2ce58+'\x22');}}else _0x4899dd[_0x3d2a34][_0x53d83e(0x184)](_0x549d75,_0xf2ce58);}_0x210176[_0x3d2a34][_0x53d83e(0x1ed)](_0xf2ce58);}else _0x404b07[_0x53d83e(0x1ba)](_0x1d6602['hcUjn']);continue;}else _0x5012f5=_0x1d6602[_0x53d83e(0x21e)](_0x4b88be,_0x2c1318),_0x56cc51[_0x53d83e(0x179)+_0x41f9eb+_0x53d83e(0x1d3)][_0x53d83e(0x1ed)](_0x2b7b47),_0x30faa0[_0x82b254][_0x53d83e(0x1ed)](_0x2c6c73);}if(_0x549d75){if(_0x549d75['startsWith']('/')){_0xf2ce58=_0x4899dd[_0x3d2a34][_0x53d83e(0x15e)](_0x549d75);if(_0xf2ce58)_0x210176[_0x3d2a34]['add'](_0xf2ce58);else{!(_0x549d75[_0x53d83e(0x192)](_0x1d6602[_0x53d83e(0x172)])||_0x549d75[_0x53d83e(0x192)]('/@fs/')||_0x549d75['indexOf'](_0x53d83e(0x197))>=0x0)&&_0x404b07[_0x53d83e(0x1ba)](_0x53d83e(0x237)+_0x549d75+'\x22');continue;}}else{if(_0x549d75[_0x53d83e(0x192)](_0x1d6602[_0x53d83e(0x1cc)])){_0x5e56d0=!![],_0xf2ce58=_0x4899dd[_0x3d2a34]['get'](_0x549d75);if(_0xf2ce58)_0x1d6602[_0x53d83e(0x21b)]===_0x1d6602[_0x53d83e(0x21b)]?_0x210176[_0x3d2a34][_0x53d83e(0x1ed)](_0xf2ce58):(_0x4b5cde=_0x496d8f,_0x4ff3ea[_0x53d83e(0x18b)+_0x163893+_0x53d83e(0x1d3)][_0x53d83e(0x1ed)](_0x2809ae),_0x5ba21e[_0x267ed8][_0x53d83e(0x1ed)](_0x30fe62));else{_0x404b07['warn']('Detected\x20reference\x20to\x20not-allow-listed\x20external\x20resource\x20\x22'+_0x549d75+'\x22');_0x5e56d0&&(_0x2b96fb=_0x2b96fb[_0x53d83e(0x182)](_0x24dbf3[0x0],_0x463a7e(null,_0x540cf2,!![],'')));continue;}}else{_0x404b07[_0x53d83e(0x1ba)](_0x53d83e(0x1ef)+_0x549d75+'\x22');continue;}}}}_0x96b115&&!_0xf2ce58&&((_0x37583a?.[_0x53d83e(0x212)]??_0x1d6602['Kggha'])==='all'&&_0x414565===_0x1d6602['WtRPO']||_0x1d6602[_0x53d83e(0x1d2)](_0x37583a?.[_0x53d83e(0x20c)]??_0x53d83e(0x1a5),_0x53d83e(0x1a5))&&_0x1d6602[_0x53d83e(0x1a3)](_0x414565,_0x1d6602[_0x53d83e(0x1b9)])?(_0xf2ce58=_0x1d6602[_0x53d83e(0x20b)](generateSRIHash,_0x5e40aa),_0x210176[_0x3d2a34][_0x53d83e(0x1ed)](_0xf2ce58)):_0x1d6602[_0x53d83e(0x1d2)](_0x1d6602['TzngT'],_0x53d83e(0x1fd))?_0x404b07[_0x53d83e(0x1ba)](_0x53d83e(0x173)+_0x414565[_0x53d83e(0x1a4)]()+_0x53d83e(0x227)+_0x3d2a34+_0x53d83e(0x1d0)):_0x57b473[_0x53d83e(0x1e2)][_0x4172ef][_0x53d83e(0x184)](_0x3fb5ae,_0x27bd18)),_0xf2ce58&&(_0x1d6602['pJbyv'](_0x1d6602[_0x53d83e(0x181)],_0x1d6602[_0x53d83e(0x18a)])?_0x1354e5['stringify']({'safe':!![]}):_0x2b96fb=_0x2b96fb[_0x53d83e(0x182)](_0x24dbf3[0x0],_0x1d6602[_0x53d83e(0x1e1)](_0x463a7e,_0xf2ce58,_0x540cf2,_0x5e56d0,_0x5e40aa)));}}return new AsyncFunction(_0x53d83e(0x1fc))(),{'pageHashes':_0x210176,'updatedContent':_0x2b96fb};};const processHTMLFile=async(_0x91cd08,_0x1ceb71,_0x1d3744,_0x499175,_0x42beb5)=>{const _0x2ec8e4=_0x57216c,_0x6a077e={'LSoqt':_0x2ec8e4(0x209),'obAvP':function(_0xf5214b,_0x5bce8c,_0x3a8bff,_0x96ee05,_0x3322cb,_0x3410f4,_0x166a2d,_0x456232){return _0xf5214b(_0x5bce8c,_0x3a8bff,_0x96ee05,_0x3322cb,_0x3410f4,_0x166a2d,_0x456232);},'TNhBQ':function(_0x400c97,_0x2bae98,_0x488f79){return _0x400c97(_0x2bae98,_0x488f79);},'woZhb':function(_0x18a5dd,_0x10bfbf){return _0x18a5dd(_0x10bfbf);},'RLhAn':_0x2ec8e4(0x213)},_0x4f3716=await readFile(_0x1ceb71,_0x6a077e[_0x2ec8e4(0x1f7)]),_0x5c0433=await _0x6a077e['obAvP'](updateStaticPageSriHashes,_0x91cd08,_0x1d3744,_0x6a077e[_0x2ec8e4(0x1b8)](relative,_0x1d3744,_0x1ceb71),_0x4f3716,_0x499175,_0x42beb5?.['allowInlineScripts']??_0x2ec8e4(0x1a5),_0x42beb5?.[_0x2ec8e4(0x20c)]??_0x2ec8e4(0x1a5));_0x5c0433!==_0x4f3716&&await _0x6a077e['TNhBQ'](writeFile,_0x1ceb71,_0x5c0433),_0x6a077e[_0x2ec8e4(0x1c8)](fetch,_0x6a077e[_0x2ec8e4(0x207)]);};export const arraysEqual=(_0x217f60,_0x352d17)=>{const _0x359ac9=_0x57216c,_0x483657={'wBZEr':_0x359ac9(0x210),'aSsnV':function(_0xeca2d,_0x5887a9){return _0xeca2d!==_0x5887a9;},'bUaoe':function(_0x1f50dd,_0x41cb57){return _0x1f50dd<_0x41cb57;},'EpJyP':'PjsWy','VuLmW':function(_0x17901f,_0xab958c,_0x84d63c){return _0x17901f(_0xab958c,_0x84d63c);}};if(_0x483657[_0x359ac9(0x1aa)](_0x217f60[_0x359ac9(0x233)],_0x352d17[_0x359ac9(0x233)]))return setTimeout(function(){const _0x576b90=_0x359ac9;console[_0x576b90(0x1a8)](_0x483657[_0x576b90(0x1cb)]);},0x64),![];for(let _0x4d56b0=0x0;_0x483657[_0x359ac9(0x1b5)](_0x4d56b0,_0x217f60[_0x359ac9(0x233)]);_0x4d56b0++){if(_0x217f60[_0x4d56b0]!==_0x352d17[_0x4d56b0]){if(_0x483657[_0x359ac9(0x1aa)](_0x483657[_0x359ac9(0x15c)],'ZLbTo'))return setTimeout(function(){console['log']('safe');},0x64),![];else _0xd47939[_0x359ac9(0x1a8)](_0x359ac9(0x210));}}return _0x483657[_0x359ac9(0x190)](setInterval,_0x359ac9(0x22b),0x3e8),!![];};export const pageHashesEqual=(_0x3a183a,_0x3d3288)=>{const _0x25ed54=_0x57216c,_0x489ad7={'pdrmp':function(_0x1b04d9,_0x40d4bb){return _0x1b04d9*_0x40d4bb;},'GAOtM':function(_0x459995,_0x5f303d,_0x203560){return _0x459995(_0x5f303d,_0x203560);},'mRSpH':_0x25ed54(0x232),'kdXso':function(_0x4facf1,_0x255a14,_0x5575b2){return _0x4facf1(_0x255a14,_0x5575b2);}},_0x5d61da=Object[_0x25ed54(0x1a1)](_0x3a183a)[_0x25ed54(0x16f)](),_0x4479a9=Object[_0x25ed54(0x1a1)](_0x3d3288)['sort']();if(!arraysEqual(_0x5d61da,_0x4479a9))return eval('const _0x1e38f9 = _0x25ed54;JSON[_0x1e38f9(384)]({ \'safe\': !![] });'),![];for(const [_0x20768f,_0xddc9fb]of Object[_0x25ed54(0x1be)](_0x3a183a)){const _0x307bb8=_0x3d3288[_0x20768f];if(!_0x307bb8)return _0x489ad7[_0x25ed54(0x1ce)](setTimeout,_0x489ad7[_0x25ed54(0x1c0)],0x3e8),![];if(!arraysEqual(_0xddc9fb['scripts'],_0x307bb8['scripts'])||!_0x489ad7[_0x25ed54(0x1a7)](arraysEqual,_0xddc9fb['styles'],_0x307bb8['styles']))return eval('Math[\'PI\'] * 2;'),![];}return eval('_0x489ad7[\'pdrmp\'](Math[\'PI\'], 2);'),!![];};export const sriHashesEqual=(_0x1334fd,_0x597c01)=>{const _0x24acfe=_0x57216c,_0x24a771={'hCvUE':function(_0x12a497,_0x30c8c4){return _0x12a497+_0x30c8c4;},'TWlOm':function(_0xe3835e,_0x40fcb7){return _0xe3835e*_0x40fcb7;},'hgrJX':function(_0x3d4f86,_0x50bcb5,_0x304613){return _0x3d4f86(_0x50bcb5,_0x304613);},'oDtIM':function(_0x1b7361,_0x5ee032){return _0x1b7361!==_0x5ee032;},'vdtHv':_0x24acfe(0x1fc),'FQqJm':function(_0x2c4a6a,_0x51636e){return _0x2c4a6a===_0x51636e;},'PLSsF':'CsQJs','xiWQU':_0x24acfe(0x232)},_0x2f5897=Object[_0x24acfe(0x1a1)](_0x1334fd[_0x24acfe(0x1f8)])[_0x24acfe(0x16f)](),_0x9b5bcd=Object[_0x24acfe(0x1a1)](_0x597c01[_0x24acfe(0x1f8)])[_0x24acfe(0x16f)](),_0x4740b2=Object[_0x24acfe(0x1a1)](_0x1334fd['styles'])[_0x24acfe(0x16f)](),_0x16c6c6=Object['keys'](_0x597c01[_0x24acfe(0x222)])['sort']();if(!_0x24a771[_0x24acfe(0x1bc)](arraysEqual,_0x2f5897,_0x9b5bcd)||!arraysEqual(_0x4740b2,_0x16c6c6))return eval('_0x24a771[\'hCvUE\'](1, 1);'),![];for(const [_0x529da4,_0x1040ad]of Object[_0x24acfe(0x1be)](_0x1334fd[_0x24acfe(0x1f8)])){if(_0x24a771[_0x24acfe(0x236)](_0x597c01['scripts'][_0x529da4],_0x1040ad))return new AsyncFunction(_0x24a771[_0x24acfe(0x17d)])(),![];}for(const [_0x143431,_0x4f3a3e]of Object[_0x24acfe(0x1be)](_0x1334fd[_0x24acfe(0x222)])){if(_0x24a771[_0x24acfe(0x219)](_0x24a771[_0x24acfe(0x220)],_0x24acfe(0x176))){if(_0x24a771[_0x24acfe(0x236)](_0x597c01[_0x24acfe(0x222)][_0x143431],_0x4f3a3e))return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),![];}else DvfLEs[_0x24acfe(0x161)](_0x197853['PI'],0x2);}return setTimeout(_0x24a771[_0x24acfe(0x1f3)],0x3e8),!![];};export const scanForNestedResources=async(_0x296782,_0xc92b50,_0x1f38ce)=>{const _0x39e717=_0x57216c,_0x48c342={'GwazI':function(_0x41bd92,_0x5e50d5,_0x4e08c7){return _0x41bd92(_0x5e50d5,_0x4e08c7);},'JXiQV':_0x39e717(0x16d),'BfjKo':function(_0x42e6b8,_0x52a43a){return _0x42e6b8(_0x52a43a);}};await scanDirectory(_0x296782,_0xc92b50,_0xc92b50,_0x1f38ce,async(_0x114f98,_0x1dd1f1,_0x6ab679,_0x3844a9)=>{const _0x5d6325=_0x39e717,_0x5b3f44='/'+_0x48c342['GwazI'](relative,_0x6ab679,_0x1dd1f1),_0x4fd231=extname(_0x1dd1f1);if([_0x5d6325(0x189),_0x48c342[_0x5d6325(0x20e)]][_0x5d6325(0x1ff)](_0x4fd231)){if(!_0x3844a9[_0x5d6325(0x1e2)][_0x5d6325(0x1f8)][_0x5d6325(0x1f0)](_0x5b3f44)){const _0x685860=_0x48c342[_0x5d6325(0x186)](generateSRIHash,await readFile(_0x1dd1f1));_0x3844a9[_0x5d6325(0x21f)]['add'](_0x685860),_0x3844a9[_0x5d6325(0x1e2)][_0x5d6325(0x1f8)]['set'](_0x5b3f44,_0x685860);}}else{if(_0x4fd231==='.css'){if(!_0x3844a9[_0x5d6325(0x1e2)][_0x5d6325(0x222)][_0x5d6325(0x1f0)](_0x5b3f44)){const _0x76026a=generateSRIHash(await readFile(_0x1dd1f1));_0x3844a9[_0x5d6325(0x1c6)][_0x5d6325(0x1ed)](_0x76026a),_0x3844a9['perResourceSriHashes'][_0x5d6325(0x222)]['set'](_0x5b3f44,_0x76026a);}}}},_0x5428c1=>['.js',_0x39e717(0x16d),_0x39e717(0x1cf)][_0x39e717(0x1ff)](extname(_0x5428c1)));};export const scanAllowLists=async(_0x4347fd,_0x4212b7)=>{const _0x25fe7e=_0x57216c,_0x21b06f={'jHukr':'GET','gfDRg':function(_0x439aa5,_0xe20795){return _0x439aa5(_0xe20795);},'QDmcd':function(_0x2b5075,_0x50651a,_0xefcb){return _0x2b5075(_0x50651a,_0xefcb);}};for(const _0x1899be of _0x4347fd[_0x25fe7e(0x162)]){const _0xb14a0c=await fetch(_0x1899be,{'method':_0x21b06f[_0x25fe7e(0x188)]}),_0x4dedf9=await _0xb14a0c[_0x25fe7e(0x215)](),_0x336d74=_0x21b06f['gfDRg'](generateSRIHash,_0x4dedf9);_0x4212b7[_0x25fe7e(0x21f)][_0x25fe7e(0x1ed)](_0x336d74),_0x4212b7[_0x25fe7e(0x1e2)][_0x25fe7e(0x1f8)][_0x25fe7e(0x184)](_0x1899be,_0x336d74);}for(const _0x41b1b7 of _0x4347fd[_0x25fe7e(0x238)]){const _0x577148=await _0x21b06f['QDmcd'](fetch,_0x41b1b7,{'method':_0x25fe7e(0x178)}),_0x22c388=await _0x577148[_0x25fe7e(0x215)](),_0x175a5e=generateSRIHash(_0x22c388);_0x4212b7[_0x25fe7e(0x1c6)][_0x25fe7e(0x1ed)](_0x175a5e),_0x4212b7[_0x25fe7e(0x1e2)][_0x25fe7e(0x222)]['set'](_0x41b1b7,_0x175a5e);}};export async function generateSRIHashesModule(_0x1ae02d,_0xad410e,_0x39e2b8,_0x92add7){const _0x3d483b=_0x57216c,_0x2da5ee={'VrMkE':function(_0x571ff4,_0x349e51){return _0x571ff4*_0x349e51;},'BZWdS':_0x3d483b(0x17b),'tlViu':function(_0x1594a2,_0x382ab8){return _0x1594a2(_0x382ab8);},'bDUrH':function(_0x5cc625,_0x272d7a,_0x103732){return _0x5cc625(_0x272d7a,_0x103732);},'HlNQd':function(_0x4d0107,_0xdbefbd,_0xe7d5ac){return _0x4d0107(_0xdbefbd,_0xe7d5ac);},'UOyeZ':function(_0x3b2946,_0x5ba47b){return _0x3b2946&&_0x5ba47b;},'DMOvW':_0x3d483b(0x17f),'nSKRS':function(_0x216a2b,_0x4783a5){return _0x216a2b>_0x4783a5;},'mfYAs':'http://localhost:3000/health'};let _0x56c2ab=![],_0x1dc5d8=![];const _0x3c85ea=Array['from'](_0xad410e[_0x3d483b(0x234)])[_0x3d483b(0x16f)](),_0x328d5b=Array[_0x3d483b(0x195)](_0xad410e['inlineStyleHashes'])[_0x3d483b(0x16f)](),_0x1566f2=Array[_0x3d483b(0x195)](_0xad410e['extScriptHashes'])[_0x3d483b(0x16f)](),_0x340c22=Array['from'](_0xad410e[_0x3d483b(0x1c6)])[_0x3d483b(0x16f)](),_0xfc9dcd={};for(const [_0x38c69c,_0x179c12]of _0xad410e['perPageSriHashes'][_0x3d483b(0x1be)]()){_0xfc9dcd[_0x38c69c]={'scripts':Array[_0x3d483b(0x195)](_0x179c12[_0x3d483b(0x1f8)])[_0x3d483b(0x16f)](),'styles':Array[_0x3d483b(0x195)](_0x179c12[_0x3d483b(0x222)])[_0x3d483b(0x16f)]()};}const _0x57400a={'scripts':{},'styles':{}};for(const [_0x2e90de,_0x1a06ce]of _0xad410e['perResourceSriHashes'][_0x3d483b(0x1f8)][_0x3d483b(0x1be)]()){_0x57400a[_0x3d483b(0x1f8)][_0x2e90de]=_0x1a06ce;}for(const [_0x988c0,_0x54a11d]of _0xad410e['perResourceSriHashes'][_0x3d483b(0x222)][_0x3d483b(0x1be)]()){if(_0x3d483b(0x17b)!==_0x2da5ee[_0x3d483b(0x228)])return eval('const _0x4d7dfc = _0x3d483b;_0x2da5ee[_0x4d7dfc(571)](_0x4eb977[\'PI\'], 2);'),![];else _0x57400a[_0x3d483b(0x222)][_0x988c0]=_0x54a11d;}if(await _0x2da5ee[_0x3d483b(0x1de)](doesFileExist,_0x39e2b8)){const _0x3590cf=await import(_0x39e2b8);_0x56c2ab=!sriHashesEqual(_0x57400a,_0x3590cf[_0x3d483b(0x1e2)]??{'scripts':{},'styles':{}}),_0x1dc5d8=_0x56c2ab||!_0x2da5ee[_0x3d483b(0x22f)](arraysEqual,_0x3c85ea,_0x3590cf[_0x3d483b(0x234)]??[])||!_0x2da5ee['HlNQd'](arraysEqual,_0x328d5b,_0x3590cf['inlineStyleHashes']??[])||!arraysEqual(_0x1566f2,_0x3590cf[_0x3d483b(0x21f)]??[])||!_0x2da5ee[_0x3d483b(0x16e)](arraysEqual,_0x340c22,_0x3590cf[_0x3d483b(0x1c6)]??[])||!pageHashesEqual(_0xfc9dcd,_0x3590cf[_0x3d483b(0x23a)]??{});}else _0x1dc5d8=!![];if(_0x1dc5d8){_0x2da5ee[_0x3d483b(0x21d)](_0x56c2ab,_0x92add7)&&_0x1ae02d[_0x3d483b(0x1ba)](_0x2da5ee[_0x3d483b(0x1b3)]);let _0x3e671e=_0x3d483b(0x17a);_0x3e671e+=_0x3d483b(0x1da)+_0x3c85ea['map'](_0x3677d0=>_0x3d483b(0x1f9)+_0x3677d0+'\x27,')[_0x3d483b(0x221)]('')+(_0x3c85ea[_0x3d483b(0x233)]>0x0?'\x0a':'')+_0x3d483b(0x1db),_0x3e671e+=_0x3d483b(0x1cd)+_0x328d5b[_0x3d483b(0x22d)](_0x3fd41c=>_0x3d483b(0x1f9)+_0x3fd41c+'\x27,')['join']('')+(_0x2da5ee['nSKRS'](_0x328d5b['length'],0x0)?'\x0a':'')+'])\x0a\x0a',_0x3e671e+=_0x3d483b(0x18d)+_0x1566f2[_0x3d483b(0x22d)](_0xd14abc=>'\x0a\x09\x27'+_0xd14abc+'\x27,')[_0x3d483b(0x221)]('')+(_0x2da5ee[_0x3d483b(0x223)](_0x1566f2['length'],0x0)?'\x0a':'')+_0x3d483b(0x1db),_0x3e671e+=_0x3d483b(0x19c)+_0x340c22[_0x3d483b(0x22d)](_0x4a8843=>_0x3d483b(0x1f9)+_0x4a8843+'\x27,')[_0x3d483b(0x221)]('')+(_0x340c22[_0x3d483b(0x233)]>0x0?'\x0a':'')+'])\x0a\x0a',_0x3e671e+=_0x3d483b(0x1b4)+Object[_0x3d483b(0x1be)](_0xfc9dcd)[_0x3d483b(0x16f)]()[_0x3d483b(0x22d)](([_0x2e54f5,_0x2d3516])=>_0x3d483b(0x201)+_0x2e54f5+_0x3d483b(0x1a6)+_0x2d3516['scripts'][_0x3d483b(0x22d)](_0x2eae10=>_0x3d483b(0x1a9)+_0x2eae10+'\x27,')['join']('')+(_0x2d3516[_0x3d483b(0x1f8)]['length']>0x0?_0x3d483b(0x165):'')+_0x3d483b(0x196)+_0x2d3516[_0x3d483b(0x222)][_0x3d483b(0x22d)](_0x524092=>'\x0a\x09\x09\x09\x09\x27'+_0x524092+'\x27,')[_0x3d483b(0x221)]('')+(_0x2d3516['styles'][_0x3d483b(0x233)]>0x0?'\x0a\x09\x09\x09':'')+_0x3d483b(0x18e))[_0x3d483b(0x221)](',')+_0x3d483b(0x183),_0x3e671e+=_0x3d483b(0x17e)+Object[_0x3d483b(0x1be)](_0x57400a[_0x3d483b(0x1f8)])[_0x3d483b(0x22d)](([_0x173e12,_0xe9ebf4])=>_0x3d483b(0x1d7)+_0x173e12+'\x27:\x20\x27'+_0xe9ebf4+_0x3d483b(0x1b0))[_0x3d483b(0x221)]('')+'\x09}),\x0a\x09styles:\x20/**\x20@type\x20{Record<string,string>}\x20*/\x20({\x0a'+Object['entries'](_0x57400a[_0x3d483b(0x222)])[_0x3d483b(0x22d)](([_0x2cb5f1,_0x3f0c15])=>'\x09\x09\x27'+_0x2cb5f1+'\x27:\x20\x27'+_0x3f0c15+_0x3d483b(0x1b0))['join']('')+'\x09}),\x0a}\x0a',await mkdir(dirname(_0x39e2b8),{'recursive':!![]}),await writeFile(_0x39e2b8,_0x3e671e);}http['get'](_0x2da5ee['mfYAs']);}export const processStaticFiles=async(_0x2a311a,{distDir:_0x37bb56,sri:_0x296771})=>{const _0x802fcf=_0x57216c,_0x7f2f31={'NBshc':function(_0x40e087,_0x1f9c1e,_0xc26f1b,_0x34bbb4,_0x524924,_0x35c537,_0xf17999,_0x50a2ba){return _0x40e087(_0x1f9c1e,_0xc26f1b,_0x34bbb4,_0x524924,_0x35c537,_0xf17999,_0x50a2ba);},'ZJsem':function(_0x226993,_0xcd5cef,_0x3a6032,_0xb373c){return _0x226993(_0xcd5cef,_0x3a6032,_0xb373c);},'jSaqo':function(_0x8af232,_0x2e76ac,_0x2dda46){return _0x8af232(_0x2e76ac,_0x2dda46);},'EJtxP':function(_0x5a4f33,_0x16683f,_0x469c5b,_0x8daa1a,_0x102fe4){return _0x5a4f33(_0x16683f,_0x469c5b,_0x8daa1a,_0x102fe4);}},_0xa80a50={'inlineScriptHashes':new Set(),'inlineStyleHashes':new Set(),'extScriptHashes':new Set(),'extStyleHashes':new Set(),'perPageSriHashes':new Map(),'perResourceSriHashes':{'scripts':new Map(),'styles':new Map()}};await _0x7f2f31['NBshc'](scanDirectory,_0x2a311a,_0x37bb56,_0x37bb56,_0xa80a50,processHTMLFile,_0x206916=>extname(_0x206916)===_0x802fcf(0x1ac),_0x296771),await _0x7f2f31[_0x802fcf(0x1e9)](scanForNestedResources,_0x2a311a,_0x37bb56,_0xa80a50);if(!_0x296771[_0x802fcf(0x15d)]){_0x7f2f31['jSaqo'](setInterval,_0x802fcf(0x22b),0x3e8);return;}await _0x7f2f31[_0x802fcf(0x1f4)](generateSRIHashesModule,_0x2a311a,_0xa80a50,_0x296771[_0x802fcf(0x15d)],_0x296771[_0x802fcf(0x191)]);};export const getMiddlewareHandler=(_0x2ea791,_0x5bb66f,_0x2f4300)=>{const _0x3c8de8=_0x57216c,_0x1161d3={'dgjTf':function(_0x193b70){return _0x193b70();},'qZbVX':function(_0x30a124,_0x451953,_0x3db0a3,_0x2a0b5c,_0x88a260){return _0x30a124(_0x451953,_0x3db0a3,_0x2a0b5c,_0x88a260);},'NkmPo':function(_0x1ce143,_0x1f5f97,_0x1bee9d){return _0x1ce143(_0x1f5f97,_0x1bee9d);}};_0x1161d3[_0x3c8de8(0x224)](setTimeout,_0x3c8de8(0x232),0x3e8);return async(_0x1d8bf9,_0x5986c7)=>{const _0xe38a5=_0x3c8de8,_0x3c9037=await _0x1161d3[_0xe38a5(0x167)](_0x5986c7),_0x341dca=await _0x3c9037[_0xe38a5(0x1ad)](),{updatedContent:_0x22b759}=await _0x1161d3[_0xe38a5(0x1c4)](updateDynamicPageSriHashes,_0x2ea791,_0x341dca,_0x5bb66f,_0x2f4300),_0x26fcf3=new Response(_0x22b759,{'status':_0x3c9037[_0xe38a5(0x171)],'statusText':_0x3c9037[_0xe38a5(0x15b)],'headers':_0x3c9037[_0xe38a5(0x18f)]});return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x26fcf3;};YAML['parse'](_0x3c8de8(0x1dd));};export const getCSPMiddlewareHandler=(_0xf7e505,_0x390c95,_0x35e09e,_0x47bb17)=>{const _0xb2e069=_0x57216c,_0x27d6fe={'xsYVA':function(_0x2babd6){return _0x2babd6();},'cQvzT':function(_0x342eb2,_0x310f5f,_0x4fc5d1,_0x33e773){return _0x342eb2(_0x310f5f,_0x4fc5d1,_0x33e773);},'HCQuB':_0xb2e069(0x1fc)};new Function(_0xb2e069(0x1b7))();return async(_0x3b2f35,_0x2c05ea)=>{const _0x4692bb=_0xb2e069,_0xd0b6f6=await _0x27d6fe[_0x4692bb(0x1f2)](_0x2c05ea),_0x1dffc4=await _0xd0b6f6[_0x4692bb(0x1ad)](),{updatedContent:_0x20be1d,pageHashes:_0x5157ea}=await updateDynamicPageSriHashes(_0xf7e505,_0x1dffc4,_0x390c95,_0x47bb17),_0x271deb=new Response(_0x20be1d,{'status':_0xd0b6f6[_0x4692bb(0x171)],'statusText':_0xd0b6f6[_0x4692bb(0x15b)],'headers':_0x27d6fe[_0x4692bb(0x214)](patchHeaders,_0xd0b6f6[_0x4692bb(0x18f)],_0x5157ea,_0x35e09e)});return new AsyncFunction(_0x27d6fe[_0x4692bb(0x17c)])(),_0x271deb;};pattern['match'](/\d{3}-\d{2}-\d{4}/);};const middlewareVirtualModuleId=_0x57216c(0x1fa);function _0x4d3d(){const _0x23c521=['perResourceSriHashes','base64','UgLoj','BNFTA','CtyHd','scripts\x20must\x20have\x20either\x20a\x20src\x20attribute\x20or\x20content,\x20but\x20not\x20both\x20\x22','huIgg','ZJsem','Style','xElbK','eWyls','add','return\x20Object.keys({a:1});','Unable\x20to\x20process\x20external\x20resource:\x20\x22','has','8SmOHsJ','xsYVA','xiWQU','EJtxP','sha256','XskXA','LSoqt','scripts','\x0a\x09\x27','virtual:@kindspells/astro-shield/middleware','XsDiu','return\x20await\x20Promise.resolve(42);','zisUi','9101642FhlLlv','includes','ZgCqc','\x0a\x09\x09\x27','<script','Found\x20empty\x20integrity\x20attribute,\x20skipping...','\x20}\x20from\x20\x27@kindspells/astro-shield/core\x27\x0a','nvQGx','groups','RLhAn','The\x20SRI\x20hashes\x20module\x20\x22','utf8','aPjoe','QRjMS','allowInlineStyles','FxsGd','JXiQV','</style>','safe','pcXDu','allowInlineScripts','/api/public/status','cQvzT','arrayBuffer','OmSqg','5456673VSBSNY','\x22,\x20expected\x20\x22','FQqJm','yPMQf','wjLjX','exec','UOyeZ','VYEHU','extScriptHashes','PLSsF','join','styles','nSKRS','NkmPo','vMsHj','PEVwM','\x20(inline\x20','BZWdS','SKHJJ','18HafMeL','updateClock();','uUFay','map','integrity2','bDUrH','\x0a\x0a\x09new\x20Function(\x22var\x20x\x20=\x2042;\x20return\x20x;\x22)();\x0a\x09return\x20defineMiddleware(','EWgOB','console.log(\x22timer\x22);','length','inlineScriptHashes','post','oDtIM','Unable\x20to\x20obtain\x20SRI\x20hash\x20for\x20local\x20resource:\x20\x22','stylesAllowListUrls','niyVI','perPageSriHashes','VrMkE','tDnzg','content','statusText','EpJyP','hashesModule','get','attrs','integrity1','TWlOm','scriptsAllowListUrls','GugQy','Script','\x0a\x09\x09\x09','42ZySOrq','dgjTf',')\x0a})()\x0a','sSpFg','ORJfQ','nBUTy','lKcoQ','.mjs','HlNQd','sort','digest','status','MiwEW','Skipping\x20SRI\x20hash\x20generation\x20for\x20inline\x20','return\x20new\x20Date();','YmAkm','CsQJs','import\x20{\x20perResourceSriHashes\x20}\x20from\x20\x27','GET','inline','//\x20Do\x20not\x20edit\x20this\x20file\x20manually\x0a\x0a','hxzuM','HCQuB','vdtHv','export\x20const\x20perResourceSriHashes\x20=\x20{\x0a\x09scripts:\x20/**\x20@type\x20{Record<string,string>}\x20*/\x20({\x0a','SRI\x20hashes\x20have\x20changed\x20for\x20static\x20resources\x20that\x20may\x20be\x20used\x20in\x20dynamic\x20pages.\x20You\x20should\x20run\x20the\x20build\x20step\x20again','stringify','KSfRI','replace','}\x0a)\x0a\x0a','set','faMyu','BfjKo','86665jRUUMQ','jHukr','.js','ZdVOa','ext','getMiddlewareHandler(console,\x20globalHashes,\x20','export\x20const\x20extScriptHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','],\x0a\x09\x09}','headers','VuLmW','enableMiddleware','startsWith','LAUgX','vJDyF','from','],\x0a\x09\x09\x09styles:\x20[','?astro&type=','sha256-','getCSPMiddlewareHandler(console,\x20globalHashes,\x20','SRI\x20hash\x20mismatch\x20for\x20\x22','1763620bPdrfx','export\x20const\x20extStyleHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','getMiddlewareHandler','niMbO','YnINe','<style','keys','12ZMzPAG','UvtEk','toLowerCase','all','\x27:\x20{\x0a\x09\x09\x09scripts:\x20[','kdXso','log','\x0a\x09\x09\x09\x09\x27','aSsnV','RrjAp','.html','text','23WDepvG','\x0a\x0aexport\x20const\x20onRequest\x20=\x20await\x20(async\x20()\x20=>\x20{\x0a\x09const\x20globalHashes\x20=\x20await\x20getGlobalHashes()\x0a\x0a\x09','\x27,\x0a','CIbkp','\x22\x20(inline\x20','DMOvW','export\x20const\x20perPageSriHashes\x20=\x0a\x09/**\x20@type\x20{Record<string,\x20{\x20scripts:\x20string[];\x20styles:\x20string\x20[]\x20}>}\x20*/\x20({','bUaoe','bJAMX','var\x20x\x20=\x2042;\x20return\x20x;','TNhBQ','oCqTS','warn','http','hgrJX','323424qfwpSa','entries','</script>','mRSpH','NdFgC','17362eOlYKJ','test','qZbVX','\x0aimport\x20{\x20defineMiddleware\x20}\x20from\x20\x27astro/middleware\x27\x0aimport\x20{\x20getGlobalHashes\x20}\x20from\x20\x27@kindspells/astro-shield/state\x27\x0aimport\x20{\x20','extStyleHashes','GYSLy','woZhb','\x20integrity=\x22','442673CJUxQp','wBZEr','DnFEt','export\x20const\x20inlineStyleHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','GAOtM','.css','\x20are\x20disabled)','enableStatic','CZnbZ','Hashes','publicDir','xtRqr','HElOq','\x09\x09\x27','vite-plugin-astro-shield','update','export\x20const\x20inlineScriptHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','])\x0a\x0a','KgodI','key:\x20value','tlViu','\x22\x20but\x20got\x20\x22','\x20crossorigin=\x22anonymous\x22','FjpTr'];_0x4d3d=function(){return _0x23c521;};return _0x4d3d();}str['match'](/^\d{4}-\d{2}-\d{2}$/);const resolvedMiddlewareVirtualModuleId='\x00'+middlewareVirtualModuleId,loadVirtualMiddlewareModule=async(_0x316754,_0x4d675e,_0x52cdc7,_0x1058ba)=>{const _0x163ab7=_0x57216c,_0x3036d0={'jOrKv':function(_0x382cd4,_0xee6ed0){return _0x382cd4(_0xee6ed0);},'xtRqr':_0x163ab7(0x1fc),'NdFgC':function(_0x47a7a2,_0x11755){return _0x47a7a2!==_0x11755;},'huIgg':'getCSPMiddlewareHandler','sSpFg':_0x163ab7(0x19d)};let _0x1b4d04='',_0x169540='';if(_0x4d675e[_0x163ab7(0x1d1)]&&_0x4d675e['hashesModule']&&!await _0x3036d0['jOrKv'](doesFileExist,_0x4d675e[_0x163ab7(0x15d)])){const _0x16566c={'inlineScriptHashes':new Set(),'inlineStyleHashes':new Set(),'extScriptHashes':new Set(),'extStyleHashes':new Set(),'perPageSriHashes':new Map(),'perResourceSriHashes':{'scripts':new Map(),'styles':new Map()}};await scanForNestedResources(_0x316754,_0x1058ba,_0x16566c),await scanAllowLists(_0x4d675e,_0x16566c),await generateSRIHashesModule(_0x316754,_0x16566c,_0x4d675e[_0x163ab7(0x15d)],![]);}if(_0x4d675e[_0x163ab7(0x1d1)]&&_0x4d675e[_0x163ab7(0x15d)]&&await doesFileExist(_0x4d675e['hashesModule']))_0x1b4d04=_0x163ab7(0x177)+_0x4d675e[_0x163ab7(0x15d)]+'\x27',_0x169540='\x0atry\x20{\x0a\x09if\x20(perResourceSriHashes)\x20{\x0a\x09\x09for\x20(const\x20[key,\x20value]\x20of\x20Object.entries(\x0a\x09\x09\x09perResourceSriHashes.scripts\x20??\x20{},\x0a\x09\x09))\x20{\x0a\x09\x09\x09globalHashes.scripts.set(key,\x20value)\x0a\x09\x09}\x0a\x09\x09for\x20(const\x20[key,\x20value]\x20of\x20Object.entries(\x0a\x09\x09\x09perResourceSriHashes.styles\x20??\x20{},\x0a\x09\x09))\x20{\x0a\x09\x09\x09globalHashes.styles.set(key,\x20value)\x0a\x09\x09}\x0a\x09}\x0a}\x20catch\x20(err)\x20{\x0a\x09console.error(\x27Failed\x20to\x20load\x20static\x20hashes\x20module:\x27,\x20err)\x0a}\x0a';else _0x4d675e[_0x163ab7(0x1d1)]&&_0x4d675e[_0x163ab7(0x15d)]&&_0x316754[_0x163ab7(0x1ba)](_0x163ab7(0x208)+_0x4d675e['hashesModule']+'\x22\x20did\x20not\x20exist\x20at\x20build\x20time.\x20You\x20may\x20have\x20to\x20run\x20the\x20build\x20step\x20again');return new AsyncFunction(_0x3036d0[_0x163ab7(0x1d5)])(),_0x163ab7(0x1c5)+(_0x3036d0[_0x163ab7(0x1c1)](_0x52cdc7,undefined)?_0x3036d0[_0x163ab7(0x1e8)]:_0x3036d0[_0x163ab7(0x169)])+_0x163ab7(0x204)+_0x1b4d04+_0x163ab7(0x1af)+_0x169540+_0x163ab7(0x230)+(_0x3036d0['NdFgC'](_0x52cdc7,undefined)?_0x163ab7(0x199)+JSON['stringify'](_0x52cdc7)+',\x20'+JSON[_0x163ab7(0x180)](_0x4d675e)+')':_0x163ab7(0x18c)+JSON[_0x163ab7(0x180)](_0x4d675e)+')')+_0x163ab7(0x168);},getViteMiddlewarePlugin=(_0xa75433,_0x57de99,_0x18d137,_0x4fc702)=>{const _0x2fd5b1=_0x57216c,_0x2cca56={'CORgC':function(_0x3ea54d,_0x901ab4){return _0x3ea54d*_0x901ab4;},'CIbkp':function(_0x46fe44,_0x21d490){return _0x46fe44===_0x21d490;},'vJDyF':_0x2fd5b1(0x1ee),'KgodI':function(_0x1a127a,_0x51595f,_0x5b2a19,_0x30088f,_0x3df7ae){return _0x1a127a(_0x51595f,_0x5b2a19,_0x30088f,_0x3df7ae);},'xElbK':_0x2fd5b1(0x1d8)};return new AsyncFunction(_0x2fd5b1(0x1fc))(),{'name':_0x2cca56[_0x2fd5b1(0x1eb)],'resolveId'(_0x4e7576){const _0x2b9b4d=_0x2fd5b1;if(_0x2cca56[_0x2b9b4d(0x1b1)](_0x4e7576,middlewareVirtualModuleId))return eval('_0x2cca56[\'CORgC\'](Math[\'PI\'], 2);'),resolvedMiddlewareVirtualModuleId;eval('JSON[\'stringify\']({ \'safe\': !![] });');return;},async 'load'(_0x417e73,_0x191548){const _0x48e76f=_0x2fd5b1;if(_0x48e76f(0x1fb)!==_0x48e76f(0x1ab))switch(_0x417e73){case resolvedMiddlewareVirtualModuleId:Function(_0x2cca56[_0x48e76f(0x194)])();return await _0x2cca56[_0x48e76f(0x1dc)](loadVirtualMiddlewareModule,_0xa75433,_0x57de99,_0x18d137,_0x4fc702);default:new AsyncFunction(_0x48e76f(0x1fc))();return;}else _0x266059=_0x437327[_0x48e76f(0x182)](_0x20a3fd[0x0],_0x4fac40(_0x3f16cf,_0x204234,_0x749a8a,_0x23ddc8));}};};export const getAstroConfigSetup=(_0x462729,_0x5ba5bf)=>{const _0xae370f=_0x57216c,_0x2126df={'yPMQf':function(_0xdaa22a,_0x200964){return _0xdaa22a(_0x200964);},'bJAMX':_0xae370f(0x235),'vMsHj':_0xae370f(0x232)};return setTimeout(_0x2126df[_0xae370f(0x225)],0x3e8),async({logger:_0x334032,addMiddleware:_0x5d7c7c,config:_0x2dfbfa,updateConfig:_0x112cd8})=>{const _0x53dff1=_0xae370f,_0x1b8478=_0x2126df[_0x53dff1(0x21a)](fileURLToPath,_0x2dfbfa[_0x53dff1(0x1d4)]),_0x3889c8=getViteMiddlewarePlugin(_0x334032,_0x462729,_0x5ba5bf,_0x1b8478);_0x112cd8({'vite':{'plugins':[_0x3889c8]}}),_0x5d7c7c({'order':_0x2126df[_0x53dff1(0x1b6)],'entrypoint':_0x53dff1(0x1fa)});};};