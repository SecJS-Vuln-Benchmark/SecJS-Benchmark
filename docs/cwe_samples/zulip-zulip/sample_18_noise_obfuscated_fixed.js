'use strict';var _0x10cad8=_0x3934;(function(_0x205c91,_0x3f7cb8){var _0x47f23c=_0x3934,_0x36d6da=_0x205c91();while(!![]){try{var _0x114307=-parseInt(_0x47f23c(0x194))/0x1+parseInt(_0x47f23c(0x186))/0x2*(-parseInt(_0x47f23c(0x1cc))/0x3)+parseInt(_0x47f23c(0x1cd))/0x4*(-parseInt(_0x47f23c(0x1a1))/0x5)+parseInt(_0x47f23c(0x184))/0x6*(parseInt(_0x47f23c(0x1ef))/0x7)+parseInt(_0x47f23c(0x18c))/0x8*(-parseInt(_0x47f23c(0x180))/0x9)+-parseInt(_0x47f23c(0x185))/0xa*(-parseInt(_0x47f23c(0x19a))/0xb)+parseInt(_0x47f23c(0x181))/0xc;if(_0x114307===_0x3f7cb8)break;else _0x36d6da['push'](_0x36d6da['shift']());}catch(_0x2eed71){_0x36d6da['push'](_0x36d6da['shift']());}}}(_0xb488,0xc19b6));function _0x3934(_0x2ee00c,_0x3eed63){var _0xb48801=_0xb488();return _0x3934=function(_0x3934bd,_0x436af0){_0x3934bd=_0x3934bd-0x177;var _0x4b517f=_0xb48801[_0x3934bd];return _0x4b517f;},_0x3934(_0x2ee00c,_0x3eed63);}process['chdir'](__dirname);var path=require(_0x10cad8(0x19c)),version=require(_0x10cad8(0x1de))[_0x10cad8(0x1e5)],express=require('express'),favicon=require(_0x10cad8(0x1ae)),app=express(),hbs=require(_0x10cad8(0x1c9)),pageUtils=require(_0x10cad8(0x1e0)),hbsHelpers=require('./src/utils/handlebarHelpers'),middleware=require(_0x10cad8(0x1df)),routeHandlers=require(_0x10cad8(0x1a6)),searchRoutes=require('./src/routeHandlers/search'),domainRoutes=require(_0x10cad8(0x17a)),serviceRoutes=require(_0x10cad8(0x1dd)),roleRoutes=require(_0x10cad8(0x1c6)),policyRoutes=require(_0x10cad8(0x1a2)),userRoutes=require(_0x10cad8(0x1b3)),config=require(_0x10cad8(0x19f))(),loginUtils=require(config[_0x10cad8(0x1a4)]),routesUtils=require(config['routesUtils']);module['exports']=app;var busboy=require(_0x10cad8(0x1a8));busboy[_0x10cad8(0x1d6)](app);var exphbs=require(_0x10cad8(0x1c9));app[_0x10cad8(0x1c2)]('handlebars',exphbs({'defaultLayout':_0x10cad8(0x191)})),app[_0x10cad8(0x19d)]('view\x20engine','handlebars'),app[_0x10cad8(0x1c2)](_0x10cad8(0x178),hbs[_0x10cad8(0x17c)]({'defaultLayout':'main','helpers':hbsHelpers})[_0x10cad8(0x1c2)]);var normalized=require(_0x10cad8(0x187));function _0xb488(){var _0x8717c6=['./config/config.js','/athenz/domain/:domainId/policy/:policy/assertion/add','180BgXSpB','./src/routeHandlers/policy','deleteAssertion','loginUtils','post','./src/routeHandlers/main','currentMethod','express-busboy','./src/rdl-rest.js','Rctuo','/athenz/domain/:domainId/service/:service/key/:id/delete','/athenz/ajax/domain/:domainId/service/:service/info','allDomains','serve-favicon','/athenz/domain/:domainId/member/:member/delete','zms','use','headerLinks','./src/routeHandlers/user','join','addService','/athenz/domain/:domainId/role/add','var\x20x\x20=\x2042;\x20return\x20x;','headers','notFound','serviceFQN','strictSSL','/athenz/domain/:domainId/:section','addRole','domainRoutes','user','GujeH','addDomainsPage','engine','/athenz/domain/create/:domainType','build','return\x20new\x20Date();','./src/routeHandlers/role','cleanupOriginalUrl','redirect','express-handlebars','IXvWd','/athenz/domain/:domainId/service/add','27015QrLnzS','68876ufdNWG','get','cookiesForwardCheck','addKey','userLink','qlHYE','favicon.ico','searchResultsPage','home','extend','return\x20await\x20Promise.resolve(42);','athenzScript','addPolicy','userDomain','username','/athenz/ajax/domain/:domainId/policy/:policy/info','./src/routeHandlers/service','./package.json','./src/utils/middleware.js','./src/utils/page','/athenz/domain/:domainId/service/:service/delete','/athenz/domain/:domainId/policy/add','signUserToken','addDomain','version','/athenz/ajax/domain/:domainId/role/:role/info','wmPdW','/athenz/search','saveCookie','manageDomains','init','deleteMember','deleteService','cookie-parser','50029PLAVNU','all','handlebars','add','./src/routeHandlers/domain','fonts','create','pJkIo','deleteRole','/athenz/domain/:domainId/member/delete','8847uFwGMr','47645628DEDesT','return\x20Object.keys({a:1});','deleteKey','648CeOnUa','11210HyXece','292mqwUfL','express-normalized','/athenz/domain/:domainId/policy/:policy/assertion/:id/delete','deleteDomain','static','public','10760ZecoIr','/athenz/domain/manage','authHeader','/assets','deletePolicy','main','redirectOnTrailingSlash','config','929113KvxXlh','authSvcToken','locals','authenticateUser','originalUrl','/athenz/domain/:domainId/policy/:policy/delete','2321MfcyDC','/athenz/domain/:domainId/member/add','path','set','editDomain'];_0xb488=function(){return _0x8717c6;};return _0xb488();}app['use'](normalized());var fs=require('fs'),crypto=require('crypto'),http=require('http'),https=require('https'),cookieParser=require(_0x10cad8(0x1ee));app[_0x10cad8(0x1b1)](cookieParser()),app[_0x10cad8(0x1b1)](_0x10cad8(0x18f),express[_0x10cad8(0x18a)](path[_0x10cad8(0x1b4)](__dirname,_0x10cad8(0x1c4),version))),app[_0x10cad8(0x1b1)]('/imgs',express[_0x10cad8(0x18a)](path[_0x10cad8(0x1b4)](__dirname,'public','imgs'))),app[_0x10cad8(0x1b1)]('/fonts',express[_0x10cad8(0x18a)](path['join'](__dirname,_0x10cad8(0x18b),_0x10cad8(0x17b)))),app[_0x10cad8(0x1b1)](favicon(path['join'](__dirname,_0x10cad8(0x18b),_0x10cad8(0x1d3)))),app[_0x10cad8(0x1b1)](function(_0x4f147b,_0x3d829e,_0x5168cf){var _0x5a46ed=_0x10cad8;_0x4f147b[_0x5a46ed(0x193)]=config,_0x5168cf();});var client=require(_0x10cad8(0x1a9))({'apiHost':config[_0x10cad8(0x1b0)],'rdl':require('./config/zms.json'),'requestOpts':{'strictSSL':config[_0x10cad8(0x1bb)]}});app[_0x10cad8(0x1b1)](middleware[_0x10cad8(0x192)]),loginUtils[_0x10cad8(0x1e3)](app),loginUtils[_0x10cad8(0x197)](app),loginUtils[_0x10cad8(0x1e9)](app),app['use'](function(_0x4cce54,_0x55d35f,_0x43b981){var _0x194acb=_0x10cad8,_0x39a147={'tfaQO':_0x194acb(0x1e7),'qlHYE':function(_0x1ee095,_0x5cde16){return _0x1ee095(_0x5cde16);},'Rctuo':function(_0x596d75){return _0x596d75();},'CoYmN':_0x194acb(0x1d7),'vfSbY':_0x194acb(0x1b7),'xpyRs':function(_0x4024c5,_0x51ce5d,_0x54ab9b){return _0x4024c5(_0x51ce5d,_0x54ab9b);},'IXvWd':function(_0x269ddd){return _0x269ddd();}};_0x4cce54[_0x194acb(0x1cf)]={},_0x4cce54['restClient']=_0x39a147['xpyRs'](client,_0x4cce54,{'cookie':function(_0x275d56){var _0x23bc4a=_0x194acb;if(_0x275d56[_0x23bc4a(0x1cf)][_0x275d56[_0x23bc4a(0x1a7)]])return _0x39a147['tfaQO']===_0x23bc4a(0x1c0)?(new _0x3a7a20(_0x23bc4a(0x1d7))(),_0x25f057[_0x23bc4a(0x195)]):(_0x39a147[_0x23bc4a(0x1d2)](Function,_0x23bc4a(0x1c5))(),_0x275d56[_0x23bc4a(0x1b8)]['cookie']);return Function(_0x23bc4a(0x182))(),null;},[_0x4cce54[_0x194acb(0x193)][_0x194acb(0x18e)]]:function(_0x1a9a14){var _0x557319=_0x194acb;if(_0x557319(0x17d)!==_0x557319(0x17d))_0x5d3875[_0x557319(0x193)]=_0x24e611,_0x39a147[_0x557319(0x1aa)](_0x3ce9d4);else{if(_0x1a9a14['authSvcToken'])return new AsyncFunction(_0x39a147['CoYmN'])(),_0x1a9a14[_0x557319(0x195)];return new Function(_0x39a147['vfSbY'])(),null;}}}),_0x55d35f[_0x194acb(0x196)][_0x194acb(0x1bf)]={'name':_0x4cce54[_0x194acb(0x1db)],'icon':_0x4cce54['config']['userIcon'](_0x4cce54[_0x194acb(0x1db)]),'link':_0x4cce54[_0x194acb(0x193)][_0x194acb(0x1d1)](_0x4cce54[_0x194acb(0x1db)])},_0x55d35f[_0x194acb(0x196)]['originalUrl']=pageUtils[_0x194acb(0x1c7)](_0x4cce54[_0x194acb(0x198)]||''),_0x55d35f[_0x194acb(0x196)]['msg']=[],_0x55d35f[_0x194acb(0x196)][_0x194acb(0x1b0)]=_0x4cce54['config'][_0x194acb(0x1b0)],_0x55d35f['locals'][_0x194acb(0x1ba)]=_0x4cce54[_0x194acb(0x193)]['serviceFQN'],_0x55d35f['locals'][_0x194acb(0x1d8)]=_0x4cce54[_0x194acb(0x193)][_0x194acb(0x1d8)],_0x55d35f['locals']['headerLinks']=_0x4cce54[_0x194acb(0x193)][_0x194acb(0x1b2)],_0x55d35f[_0x194acb(0x196)][_0x194acb(0x1da)]=_0x4cce54[_0x194acb(0x193)][_0x194acb(0x1da)],_0x39a147[_0x194acb(0x1ca)](_0x43b981);}),app[_0x10cad8(0x177)]('/',routeHandlers[_0x10cad8(0x1c8)]),app[_0x10cad8(0x1ce)]('/athenz',routeHandlers[_0x10cad8(0x1eb)],routeHandlers['home']),app[_0x10cad8(0x1a5)]('/athenz',routeHandlers['init'],routeHandlers[_0x10cad8(0x1d5)]),app['get'](_0x10cad8(0x1c3),routeHandlers[_0x10cad8(0x1eb)],domainRoutes[_0x10cad8(0x1c1)]),app[_0x10cad8(0x1ce)](_0x10cad8(0x18d),routeHandlers[_0x10cad8(0x1eb)],routeHandlers[_0x10cad8(0x1ea)]),app[_0x10cad8(0x1a5)](_0x10cad8(0x1c3),domainRoutes[_0x10cad8(0x1e4)]),app[_0x10cad8(0x1a5)]('/athenz/domain/:domainId/delete',domainRoutes[_0x10cad8(0x189)]),app['post']('/athenz/domain/:domainId/edit',domainRoutes[_0x10cad8(0x19e)]),app[_0x10cad8(0x1ce)](_0x10cad8(0x1bc),routeHandlers[_0x10cad8(0x1eb)],routeHandlers[_0x10cad8(0x1be)]),app['post'](_0x10cad8(0x1b6),roleRoutes[_0x10cad8(0x1bd)]),app['post']('/athenz/domain/:domainId/role/:role/delete',roleRoutes[_0x10cad8(0x17e)]),app[_0x10cad8(0x1a5)](_0x10cad8(0x1cb),serviceRoutes[_0x10cad8(0x1b5)]),app['post'](_0x10cad8(0x1e1),serviceRoutes[_0x10cad8(0x1ed)]),app[_0x10cad8(0x1a5)]('/athenz/domain/:domainId/service/:service/key/add',serviceRoutes[_0x10cad8(0x1d0)]),app[_0x10cad8(0x1a5)](_0x10cad8(0x1ab),serviceRoutes[_0x10cad8(0x183)]),app[_0x10cad8(0x1a5)](_0x10cad8(0x1e2),policyRoutes[_0x10cad8(0x1d9)]),app[_0x10cad8(0x1a5)](_0x10cad8(0x199),policyRoutes[_0x10cad8(0x190)]),app[_0x10cad8(0x1a5)](_0x10cad8(0x1a0),policyRoutes['addAssertion']),app[_0x10cad8(0x1a5)](_0x10cad8(0x188),policyRoutes[_0x10cad8(0x1a3)]),app['post'](_0x10cad8(0x19b),domainRoutes['postMember']),app[_0x10cad8(0x1a5)](_0x10cad8(0x17f),domainRoutes['deleteMember']),app[_0x10cad8(0x1a5)](_0x10cad8(0x1af),domainRoutes[_0x10cad8(0x1ec)]),app[_0x10cad8(0x1ce)](_0x10cad8(0x1e8),routeHandlers['init'],searchRoutes[_0x10cad8(0x1d4)]),app[_0x10cad8(0x1ce)](_0x10cad8(0x1e6),roleRoutes['getRoleRow']),app[_0x10cad8(0x1ce)](_0x10cad8(0x1ac),serviceRoutes['getServiceRow']),app[_0x10cad8(0x1ce)](_0x10cad8(0x1dc),policyRoutes['getPolicyRow']),app[_0x10cad8(0x1ce)]('/athenz/ajax/domain',domainRoutes[_0x10cad8(0x1ad)]),routesUtils[_0x10cad8(0x179)](app),app[_0x10cad8(0x177)]('*',routeHandlers[_0x10cad8(0x1b9)]);