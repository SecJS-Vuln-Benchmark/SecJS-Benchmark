'use strict';var _0x1202c3=_0x5956;(function(_0x5db498,_0x218ba0){var _0x52eeb5=_0x5956,_0x4cc7a8=_0x5db498();while(!![]){try{var _0x57ad6c=parseInt(_0x52eeb5(0x23e))/0x1+parseInt(_0x52eeb5(0x216))/0x2+parseInt(_0x52eeb5(0x22b))/0x3*(parseInt(_0x52eeb5(0x242))/0x4)+-parseInt(_0x52eeb5(0x20a))/0x5+parseInt(_0x52eeb5(0x1fa))/0x6+parseInt(_0x52eeb5(0x228))/0x7*(parseInt(_0x52eeb5(0x1fd))/0x8)+parseInt(_0x52eeb5(0x200))/0x9*(-parseInt(_0x52eeb5(0x22f))/0xa);if(_0x57ad6c===_0x218ba0)break;else _0x4cc7a8['push'](_0x4cc7a8['shift']());}catch(_0xcfdeaf){_0x4cc7a8['push'](_0x4cc7a8['shift']());}}}(_0x4e63,0x91af1));process[_0x1202c3(0x20c)](__dirname);var path=require(_0x1202c3(0x233)),version=require(_0x1202c3(0x1e5))['version'],express=require(_0x1202c3(0x222)),favicon=require(_0x1202c3(0x1dc)),app=express(),hbs=require('express-handlebars'),pageUtils=require(_0x1202c3(0x1e2)),hbsHelpers=require(_0x1202c3(0x245)),routeHandlers=require(_0x1202c3(0x24b)),searchRoutes=require(_0x1202c3(0x1fb)),domainRoutes=require(_0x1202c3(0x215)),serviceRoutes=require('./src/routeHandlers/service'),roleRoutes=require(_0x1202c3(0x240)),policyRoutes=require(_0x1202c3(0x23a)),userRoutes=require('./src/routeHandlers/user'),config=require(_0x1202c3(0x1f7))(),loginUtils=require(config[_0x1202c3(0x21c)]),routesUtils=require(config['routesUtils']);module[_0x1202c3(0x1fc)]=app;var busboy=require('express-busboy');busboy[_0x1202c3(0x20d)](app);var exphbs=require(_0x1202c3(0x1db));app[_0x1202c3(0x1d4)](_0x1202c3(0x1e4),exphbs({'defaultLayout':_0x1202c3(0x221)})),app['set'](_0x1202c3(0x212),'handlebars'),app[_0x1202c3(0x1d4)](_0x1202c3(0x1e4),hbs[_0x1202c3(0x1d2)]({'defaultLayout':_0x1202c3(0x221),'helpers':hbsHelpers})[_0x1202c3(0x1d4)]);function _0x4e63(){var _0x212680=['tMpkD','/athenz/ajax/domain/:domainId/service/:service/info','deletePolicy','https','/athenz/ajax/domain/:domainId/policy/:policy/info','deleteService','5057420QIRixJ','addAssertion','chdir','extend','postMember','/athenz/domain/:domainId/policy/:policy/assertion/add','static','url','view\x20engine','saveCookie','redirect','./src/routeHandlers/domain','1848990AvBaKK','VndbX','deleteAssertion','manageDomains','cookiesForwardCheck','post','loginUtils','slice','public','join','deleteMember','main','express','fonts','/athenz/domain/:domainId/role/add','deleteRole','zms','GymBO','77266WzaUlD','athenzScript','userIcon','189609RRpZsx','http','strictSSL','xAMBa','230Pgfrni','/athenz/domain/:domainId/role/:role/delete','LbYRf','msg','path','/athenz/domain/:domainId/member/add','addKey','getRoleRow','user','get','home','./src/routeHandlers/policy','updateClock();','/assets','xvUSm','965779ZcCXSo','locals','./src/routeHandlers/role','/athenz/domain/:domainId/:section','32PfPaKZ','use','return\x20Object.keys({a:1});','./src/utils/handlebarHelpers','substr','DzBqp','/athenz/domain/manage','/athenz/domain/:domainId/policy/:policy/assertion/:id/delete','/athenz/domain/:domainId/member/delete','./src/routeHandlers/main','headerLinks','build','currentMethod','create','authSvcToken','engine','userDomain','getPolicyRow','config','addRole','getServiceRow','./config/zms.json','express-handlebars','serve-favicon','searchResultsPage','serviceFQN','allDomains','editDomain','addDomain','./src/utils/page','crypto','handlebars','./package.json','originalUrl','ngrBJ','/athenz/ajax/domain','favicon.ico','/athenz/domain/:domainId/service/add','express-normalized','/athenz/domain/:domainId/service/:service/key/:id/delete','authHeader','imgs','signUserToken','/fonts','/athenz/domain/:domainId/policy/:policy/delete','/athenz/search','init','addPolicy','username','JvMqU','./config/config.js','/athenz','addDomainsPage','1516380EVLPbi','./src/routeHandlers/search','exports','72cGMgBk','/athenz/domain/:domainId/edit','/athenz/domain/create/:domainType','445995DGUMBc','/athenz/domain/:domainId/policy/add','/athenz/domain/:domainId/service/:service/key/add','deleteKey'];_0x4e63=function(){return _0x212680;};return _0x4e63();}var normalized=require(_0x1202c3(0x1eb));app['use'](normalized());function _0x5956(_0x352a98,_0x4b3aa9){var _0x4e6398=_0x4e63();return _0x5956=function(_0x5956dc,_0x4d58f9){_0x5956dc=_0x5956dc-0x1d1;var _0x2908c9=_0x4e6398[_0x5956dc];return _0x2908c9;},_0x5956(_0x352a98,_0x4b3aa9);}var fs=require('fs'),crypto=require(_0x1202c3(0x1e3)),http=require(_0x1202c3(0x22c)),https=require(_0x1202c3(0x207)),cookieParser=require('cookie-parser');app[_0x1202c3(0x243)](cookieParser()),app[_0x1202c3(0x243)](_0x1202c3(0x23c),express['static'](path['join'](__dirname,_0x1202c3(0x24d),version))),app['use']('/imgs',express['static'](path[_0x1202c3(0x21f)](__dirname,_0x1202c3(0x21e),_0x1202c3(0x1ee)))),app[_0x1202c3(0x243)](_0x1202c3(0x1f0),express[_0x1202c3(0x210)](path['join'](__dirname,'public',_0x1202c3(0x223)))),app[_0x1202c3(0x243)](favicon(path[_0x1202c3(0x21f)](__dirname,'public',_0x1202c3(0x1e9)))),app[_0x1202c3(0x243)](function(_0x5752b7,_0x564178,_0x18b2cd){var _0x31808a=_0x1202c3,_0x504d4e={'XPAbU':function(_0x27ebc1){return _0x27ebc1();}};_0x5752b7[_0x31808a(0x1d7)]=config,_0x504d4e['XPAbU'](_0x18b2cd);});var client=require('./src/rdl-rest.js')({'apiHost':config['zms'],'rdl':require(_0x1202c3(0x1da)),'requestOpts':{'strictSSL':config[_0x1202c3(0x22d)]}});app[_0x1202c3(0x243)](function(_0x1a9c98,_0x13106a,_0x241f53){var _0x1a9892=_0x1202c3,_0x35696f={'GymBO':function(_0x1f9c1e){return _0x1f9c1e();}};_0x1a9c98[_0x1a9892(0x211)][_0x1a9892(0x246)](-0x1)==='/'&&_0x1a9c98['url']['length']>0x1?_0x13106a[_0x1a9892(0x214)](0x12d,_0x1a9c98[_0x1a9892(0x211)]['slice'](0x0,-0x1)):_0x35696f[_0x1a9892(0x227)](_0x241f53);}),loginUtils[_0x1202c3(0x1ef)](app),loginUtils['authenticateUser'](app),loginUtils[_0x1202c3(0x213)](app),app[_0x1202c3(0x243)](function(_0x23a63c,_0x102bd3,_0x40d92d){var _0x3485d2=_0x1202c3,_0x356fd7={'VndbX':function(_0x40e461,_0x4aed12){return _0x40e461(_0x4aed12);},'IbIjU':_0x3485d2(0x244),'xvUSm':function(_0x45a9d9,_0x399d17){return _0x45a9d9===_0x399d17;},'LbYRf':function(_0x65eef5,_0x57e0db,_0x3eddbf){return _0x65eef5(_0x57e0db,_0x3eddbf);},'tMpkD':_0x3485d2(0x23b),'xAMBa':function(_0x47936e,_0x1b23a7,_0x7b1963){return _0x47936e(_0x1b23a7,_0x7b1963);},'DzBqp':function(_0x1c9074){return _0x1c9074();}};_0x23a63c[_0x3485d2(0x21a)]={},_0x23a63c['restClient']=client(_0x23a63c,{'cookie':function(_0x158be2){var _0x3accfb=_0x3485d2;if(_0x158be2['cookiesForwardCheck'][_0x158be2[_0x3accfb(0x1d1)]])return _0x356fd7[_0x3accfb(0x217)](Function,_0x356fd7['IbIjU'])(),_0x158be2['headers']['cookie'];return eval('1 + 1;'),null;},[_0x23a63c['config'][_0x3485d2(0x1ed)]]:function(_0x28cee3){var _0x47dc0=_0x3485d2;if(_0x356fd7[_0x47dc0(0x23d)](_0x47dc0(0x1e7),_0x47dc0(0x1f6)))_0x58972d[_0x47dc0(0x214)](0x12d,_0xec3b83['url'][_0x47dc0(0x21d)](0x0,-0x1));else{if(_0x28cee3[_0x47dc0(0x1d3)])return _0x356fd7[_0x47dc0(0x231)](setInterval,_0x356fd7[_0x47dc0(0x204)],0x3e8),_0x28cee3[_0x47dc0(0x1d3)];return _0x356fd7[_0x47dc0(0x22e)](setInterval,_0x356fd7['tMpkD'],0x3e8),null;}}}),_0x102bd3[_0x3485d2(0x23f)][_0x3485d2(0x237)]={'name':_0x23a63c[_0x3485d2(0x1f5)],'icon':_0x23a63c[_0x3485d2(0x1d7)][_0x3485d2(0x22a)](_0x23a63c['username']),'link':_0x23a63c[_0x3485d2(0x1d7)]['userLink'](_0x23a63c[_0x3485d2(0x1f5)])},_0x102bd3[_0x3485d2(0x23f)][_0x3485d2(0x1e6)]=pageUtils['cleanupOriginalUrl'](_0x23a63c[_0x3485d2(0x1e6)]||''),_0x102bd3['locals'][_0x3485d2(0x232)]=[],_0x102bd3[_0x3485d2(0x23f)][_0x3485d2(0x226)]=_0x23a63c[_0x3485d2(0x1d7)][_0x3485d2(0x226)],_0x102bd3[_0x3485d2(0x23f)][_0x3485d2(0x1de)]=_0x23a63c[_0x3485d2(0x1d7)]['serviceFQN'],_0x102bd3['locals'][_0x3485d2(0x229)]=_0x23a63c[_0x3485d2(0x1d7)][_0x3485d2(0x229)],_0x102bd3[_0x3485d2(0x23f)][_0x3485d2(0x24c)]=_0x23a63c[_0x3485d2(0x1d7)][_0x3485d2(0x24c)],_0x102bd3[_0x3485d2(0x23f)][_0x3485d2(0x1d5)]=_0x23a63c[_0x3485d2(0x1d7)][_0x3485d2(0x1d5)],_0x356fd7[_0x3485d2(0x247)](_0x40d92d);}),app['all']('/',routeHandlers[_0x1202c3(0x214)]),app[_0x1202c3(0x238)]('/athenz',routeHandlers[_0x1202c3(0x1f3)],routeHandlers[_0x1202c3(0x239)]),app[_0x1202c3(0x21b)](_0x1202c3(0x1f8),routeHandlers[_0x1202c3(0x1f3)],routeHandlers[_0x1202c3(0x239)]),app[_0x1202c3(0x238)]('/athenz/domain/create/:domainType',routeHandlers['init'],domainRoutes[_0x1202c3(0x1f9)]),app[_0x1202c3(0x238)](_0x1202c3(0x248),routeHandlers[_0x1202c3(0x1f3)],routeHandlers[_0x1202c3(0x219)]),app[_0x1202c3(0x21b)](_0x1202c3(0x1ff),domainRoutes[_0x1202c3(0x1e1)]),app[_0x1202c3(0x21b)]('/athenz/domain/:domainId/delete',domainRoutes['deleteDomain']),app[_0x1202c3(0x21b)](_0x1202c3(0x1fe),domainRoutes[_0x1202c3(0x1e0)]),app['get'](_0x1202c3(0x241),routeHandlers[_0x1202c3(0x1f3)],routeHandlers['domainRoutes']),app['post'](_0x1202c3(0x224),roleRoutes[_0x1202c3(0x1d8)]),app[_0x1202c3(0x21b)](_0x1202c3(0x230),roleRoutes[_0x1202c3(0x225)]),app[_0x1202c3(0x21b)](_0x1202c3(0x1ea),serviceRoutes['addService']),app[_0x1202c3(0x21b)]('/athenz/domain/:domainId/service/:service/delete',serviceRoutes[_0x1202c3(0x209)]),app[_0x1202c3(0x21b)](_0x1202c3(0x202),serviceRoutes[_0x1202c3(0x235)]),app['post'](_0x1202c3(0x1ec),serviceRoutes[_0x1202c3(0x203)]),app[_0x1202c3(0x21b)](_0x1202c3(0x201),policyRoutes[_0x1202c3(0x1f4)]),app[_0x1202c3(0x21b)](_0x1202c3(0x1f1),policyRoutes[_0x1202c3(0x206)]),app[_0x1202c3(0x21b)](_0x1202c3(0x20f),policyRoutes[_0x1202c3(0x20b)]),app[_0x1202c3(0x21b)](_0x1202c3(0x249),policyRoutes[_0x1202c3(0x218)]),app[_0x1202c3(0x21b)](_0x1202c3(0x234),domainRoutes[_0x1202c3(0x20e)]),app[_0x1202c3(0x21b)](_0x1202c3(0x24a),domainRoutes[_0x1202c3(0x220)]),app[_0x1202c3(0x21b)]('/athenz/domain/:domainId/member/:member/delete',domainRoutes['deleteMember']),app[_0x1202c3(0x238)](_0x1202c3(0x1f2),routeHandlers[_0x1202c3(0x1f3)],searchRoutes[_0x1202c3(0x1dd)]),app[_0x1202c3(0x238)]('/athenz/ajax/domain/:domainId/role/:role/info',roleRoutes[_0x1202c3(0x236)]),app[_0x1202c3(0x238)](_0x1202c3(0x205),serviceRoutes[_0x1202c3(0x1d9)]),app[_0x1202c3(0x238)](_0x1202c3(0x208),policyRoutes[_0x1202c3(0x1d6)]),app['get'](_0x1202c3(0x1e8),domainRoutes[_0x1202c3(0x1df)]),routesUtils['add'](app),app['all']('*',routeHandlers['notFound']);