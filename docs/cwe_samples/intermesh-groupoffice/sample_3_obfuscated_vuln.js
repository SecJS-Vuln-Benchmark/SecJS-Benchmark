const _0x320c20=_0x32bb;(function(_0x2cc90e,_0x3cfd30){const _0x3261e2=_0x32bb,_0x1bd522=_0x2cc90e();while(!![]){try{const _0xd3a592=-parseInt(_0x3261e2(0x148))/0x1*(-parseInt(_0x3261e2(0x128))/0x2)+parseInt(_0x3261e2(0x136))/0x3*(-parseInt(_0x3261e2(0x140))/0x4)+parseInt(_0x3261e2(0x132))/0x5*(parseInt(_0x3261e2(0x14b))/0x6)+parseInt(_0x3261e2(0x141))/0x7*(-parseInt(_0x3261e2(0x14a))/0x8)+parseInt(_0x3261e2(0x13d))/0x9*(-parseInt(_0x3261e2(0x129))/0xa)+-parseInt(_0x3261e2(0x12b))/0xb*(-parseInt(_0x3261e2(0x146))/0xc)+-parseInt(_0x3261e2(0x133))/0xd;if(_0xd3a592===_0x3cfd30)break;else _0x1bd522['push'](_0x1bd522['shift']());}catch(_0x372eb6){_0x1bd522['push'](_0x1bd522['shift']());}}}(_0x2f65,0x334cf));import _0x2c19b6 from'express';import _0x307392 from'cors';import _0x22fe2f from'morgan';import _0xc603f2 from'body-parser';import _0x3da86b from'./db';function _0x2f65(){const _0x52cf55=['urlencoded','9bntqFH','use','map','8YJMUSZ','6958nzAWCe','HOST','env','/img','log','12DlLYAm','platform','2RyqBUl','bodyLimit','1744DtUimm','6oLvsHa','/graphql','join','.assetPath','xtLAo','/img/:width/:height/:action/:image','filter','418466GdHkzV','1116910XpHNOJ','json','1067275vHgFqa','/invalidate','corsHeaders','server.showErrorStack','FztcO','listen','dev','1742985WOUURn','1762228dmFbCo','/media','get','285033CTnxGQ','params','PORT','/api','post','server.port'];_0x2f65=function(){return _0x52cf55;};return _0x2f65();}import _0xdeeeeb from'./middleware';import{loadAdditionalCertificates}from'./helpers/loadAdditionalCertificates';import _0x218374 from'./api';import _0x2cf58b from'config';import _0x347702 from'./api/img';import _0x4e7264 from'./api/invalidate';import{graphqlExpress,graphiqlExpress}from'apollo-server-express';function _0x32bb(_0x4260fd,_0x2611ed){const _0x2f6589=_0x2f65();return _0x32bb=function(_0x32bb46,_0x249f7c){_0x32bb46=_0x32bb46-0x125;let _0x47bea2=_0x2f6589[_0x32bb46];return _0x47bea2;},_0x32bb(_0x4260fd,_0x2611ed);}import{makeExecutableSchema}from'graphql-tools';import _0x42a2e0 from'./graphql/resolvers';import _0x1b0354 from'./graphql/schema';import*as _0x4dea95 from'path';const app=_0x2c19b6();app['use'](_0x22fe2f(_0x320c20(0x131))),app[_0x320c20(0x13e)](_0x320c20(0x134),_0x2c19b6['static'](_0x4dea95[_0x320c20(0x14d)](__dirname,_0x2cf58b[_0x320c20(0x135)](_0x2cf58b[_0x320c20(0x135)](_0x320c20(0x147))+_0x320c20(0x14e))))),app[_0x320c20(0x13e)](_0x307392({'exposedHeaders':_0x2cf58b[_0x320c20(0x135)](_0x320c20(0x12d))})),app[_0x320c20(0x13e)](_0xc603f2[_0x320c20(0x12a)]({'limit':_0x2cf58b['get'](_0x320c20(0x149))})),loadAdditionalCertificates(),_0x3da86b(_0x2433d5=>{const _0x469317=_0x320c20,_0x3e42ca={'FztcO':function(_0x12fe1e,_0x2ebc03){return _0x12fe1e(_0x2ebc03);}};app[_0x469317(0x13e)](_0xdeeeeb({'config':_0x2cf58b,'db':_0x2433d5})),app[_0x469317(0x13e)](_0x469317(0x139),_0x218374({'config':_0x2cf58b,'db':_0x2433d5})),app[_0x469317(0x13e)](_0x469317(0x144),_0x3e42ca[_0x469317(0x12f)](_0x347702,{'config':_0x2cf58b,'db':_0x2433d5})),app[_0x469317(0x13e)](_0x469317(0x126),(_0x3ab3fe,_0x3955ee,_0x85a655)=>{const _0x5a6ee1=_0x469317;console['log'](_0x3ab3fe[_0x5a6ee1(0x137)]);}),app[_0x469317(0x13a)]('/invalidate',_0x4e7264),app[_0x469317(0x135)](_0x469317(0x12c),_0x4e7264);const _0x52869e=process[_0x469317(0x143)][_0x469317(0x138)]||_0x2cf58b[_0x469317(0x135)](_0x469317(0x13b)),_0x2cb6ed=process[_0x469317(0x143)][_0x469317(0x142)]||_0x2cf58b['get']('server.host');app[_0x469317(0x130)](parseInt(_0x52869e),_0x2cb6ed,()=>{const _0x4a47b7=_0x469317;console[_0x4a47b7(0x145)]('Vue\x20Storefront\x20API\x20started\x20at\x20http://'+_0x2cb6ed+':'+_0x52869e);});});const schema=makeExecutableSchema({'typeDefs':_0x1b0354,'resolvers':_0x42a2e0});app['use'](_0xc603f2[_0x320c20(0x13c)]({'extended':!![]})),app[_0x320c20(0x13e)](_0xc603f2[_0x320c20(0x12a)]()),app[_0x320c20(0x13e)](_0x320c20(0x14c),graphqlExpress(_0x27a6cb=>({'schema':schema,'context':{'req':_0x27a6cb},'rootValue':global}))),app[_0x320c20(0x13e)]('/graphiql',graphiqlExpress({'endpointURL':'/graphql'})),app[_0x320c20(0x13e)]((_0x5ac5f7,_0x31752c,_0x3f0a4a,_0x3be9c1)=>{const _0x1612dc=_0x320c20,_0x244555={'xtLAo':_0x1612dc(0x12e)},{statusCode:_0x21cc0b,message:_0x4594b4,stack:_0x231e6d}=_0x5ac5f7,_0x243f8c=_0x231e6d['split'](/\r?\n/)[_0x1612dc(0x13f)](_0x3aa16e=>_0x3aa16e['trim']())[_0x1612dc(0x127)](_0x59c9f2=>_0x59c9f2!=='');_0x3f0a4a['status'](_0x21cc0b)['json']({'code':_0x21cc0b,'result':_0x4594b4,..._0x2cf58b[_0x1612dc(0x135)](_0x244555[_0x1612dc(0x125)])?{'stack':_0x243f8c}:{}});});export default app;