const _0x10354a=_0x46db;(function(_0x27e8b7,_0x4b1ecd){const _0x43fd46=_0x46db,_0x2b0bd7=_0x27e8b7();while(!![]){try{const _0x1ef822=-parseInt(_0x43fd46(0x153))/0x1*(-parseInt(_0x43fd46(0x130))/0x2)+parseInt(_0x43fd46(0x170))/0x3*(-parseInt(_0x43fd46(0x16b))/0x4)+parseInt(_0x43fd46(0x155))/0x5+-parseInt(_0x43fd46(0x13c))/0x6*(parseInt(_0x43fd46(0x139))/0x7)+parseInt(_0x43fd46(0x15f))/0x8+parseInt(_0x43fd46(0x150))/0x9*(parseInt(_0x43fd46(0x184))/0xa)+parseInt(_0x43fd46(0x157))/0xb*(-parseInt(_0x43fd46(0x16e))/0xc);if(_0x1ef822===_0x4b1ecd)break;else _0x2b0bd7['push'](_0x2b0bd7['shift']());}catch(_0x5c5195){_0x2b0bd7['push'](_0x2b0bd7['shift']());}}}(_0x34d7,0xa64ba));const fs=require('fs'),_=require(_0x10354a(0x159)),moment=require(_0x10354a(0x14d)),supertest=require(_0x10354a(0x140)),app=require(_0x10354a(0x15e)),{newId}=require('../lib/common'),{runIndexing}=require(_0x10354a(0x13a)),rawTestData=fs[_0x10354a(0x182)](_0x10354a(0x156),_0x10354a(0x14a)),jsonData=JSON[_0x10354a(0x132)](rawTestData),g={'db':{},'config':{},'products':{},'discounts':{},'customers':{},'users':{},'request':null,'jsonData':jsonData},setup=_0x1c95fb=>{const _0x181a5b=_0x10354a,_0x517cff={'nGenp':function(_0x431699){return _0x431699();},'vPhwF':function(_0xc7ee65,_0x35583c){return _0xc7ee65!==_0x35583c;},'TluUG':_0x181a5b(0x134),'lrwXQ':function(_0x1db96d,_0x2be9){return _0x1db96d(_0x2be9);}};return Promise[_0x181a5b(0x133)]([_0x1c95fb[_0x181a5b(0x179)]['deleteMany']({},{}),_0x1c95fb[_0x181a5b(0x16a)][_0x181a5b(0x138)]({},{}),_0x1c95fb['customers']['deleteMany']({},{}),_0x1c95fb[_0x181a5b(0x171)][_0x181a5b(0x138)]({},{}),_0x1c95fb[_0x181a5b(0x165)]['deleteMany']({},{}),_0x1c95fb['orders'][_0x181a5b(0x138)]({},{}),_0x1c95fb[_0x181a5b(0x149)]['deleteMany']({},{})])[_0x181a5b(0x13e)](()=>{const _0x583efd=_0x181a5b,_0xdae8b={'rNxZa':function(_0x312e6a){const _0x1a88d5=_0x46db;return _0x517cff[_0x1a88d5(0x161)](_0x312e6a);}};if(_0x517cff['vPhwF'](_0x583efd(0x16f),_0x517cff['TluUG']))return Promise[_0x583efd(0x133)]([_0x1c95fb[_0x583efd(0x16a)][_0x583efd(0x167)](_0x517cff[_0x583efd(0x162)](addApiKey,jsonData['users'])),_0x1c95fb[_0x583efd(0x160)][_0x583efd(0x167)](jsonData[_0x583efd(0x160)]),_0x1c95fb['products'][_0x583efd(0x167)](fixProductDates(jsonData[_0x583efd(0x171)])),_0x1c95fb[_0x583efd(0x165)][_0x583efd(0x167)](fixDiscountDates(jsonData['discounts']))]);else _0x81d50d[_0x22ceaa][_0x583efd(0x15d)]=_0xdae8b['rNxZa'](_0x1c097d),_0xb4e13e++;});},runBefore=async()=>{const _0x24a111=_0x10354a,_0x47d54d={'WNrFo':_0x24a111(0x168),'uEdGY':_0x24a111(0x164),'tmLiT':function(_0x2935f1,_0x1b0476){return _0x2935f1!==_0x1b0476;},'KlpRw':'GsHEc','DBgRF':function(_0x2b9130,_0x240e9d){return _0x2b9130(_0x240e9d);}};g[_0x24a111(0x180)]=supertest['agent'](app),await new Promise(_0x2fb43d=>{const _0x5388d0=_0x24a111,_0x4f5c31={'FqmqY':_0x5388d0(0x16d),'vaTBc':function(_0x3e7af2){return _0x3e7af2();},'XUKVx':function(_0xe1b219){return _0xe1b219();},'LZQMk':function(_0x41412d,_0x4a00d0){return _0x41412d===_0x4a00d0;},'tATAV':'future'};if(_0x5388d0(0x169)!=='gNhHG'){const _0x5c2d55={'CMDzN':function(_0x3dbf5d){return _0x3dbf5d();}};let _0x8043a1=0x0;return _0x1db997[_0x5388d0(0x177)](()=>{const _0x57a0c0=_0x5388d0;_0x1369bd[_0x8043a1]['apiKey']=_0x5c2d55[_0x57a0c0(0x13b)](_0x22a64e),_0x8043a1++;}),_0x3e7e1b;}else app['on'](_0x5388d0(0x135),async()=>{const _0x3fc3d1=_0x5388d0,_0x6e0a97={'tMXAh':_0x47d54d[_0x3fc3d1(0x17f)],'HPWmA':_0x47d54d[_0x3fc3d1(0x17c)]};if(_0x47d54d[_0x3fc3d1(0x17d)](_0x3fc3d1(0x173),_0x47d54d[_0x3fc3d1(0x17e)]))g[_0x3fc3d1(0x14e)]=app[_0x3fc3d1(0x14e)],g['db']=app['db'],await setup(g['db']),g['products']=await g['db'][_0x3fc3d1(0x171)][_0x3fc3d1(0x181)]({})[_0x3fc3d1(0x143)](),g[_0x3fc3d1(0x160)]=await g['db'][_0x3fc3d1(0x160)][_0x3fc3d1(0x181)]({})[_0x3fc3d1(0x143)](),g[_0x3fc3d1(0x165)]=await g['db'][_0x3fc3d1(0x165)]['find']({})[_0x3fc3d1(0x143)](),g['users']=await g['db'][_0x3fc3d1(0x16a)]['find']({})[_0x3fc3d1(0x143)](),_0x47d54d[_0x3fc3d1(0x12f)](_,jsonData[_0x3fc3d1(0x158)])[_0x3fc3d1(0x15b)](async _0x587d9f=>{const _0x5bfa81=_0x3fc3d1;'yNImm'===_0x6e0a97['tMXAh']?(_0x587d9f[_0x5bfa81(0x144)][_0x5bfa81(0x17b)]({'productId':g[_0x5bfa81(0x171)][0x0][_0x5bfa81(0x178)],'title':g[_0x5bfa81(0x171)][0x0][_0x5bfa81(0x147)],'quantity':0x1,'totalItemPrice':g[_0x5bfa81(0x171)][0x0][_0x5bfa81(0x131)],'options':{'size':_0x6e0a97[_0x5bfa81(0x15c)]},'productImage':g[_0x5bfa81(0x171)][0x0][_0x5bfa81(0x13f)],'productComment':null}),_0x587d9f[_0x5bfa81(0x166)]=new Date(),await g['db'][_0x5bfa81(0x158)][_0x5bfa81(0x137)](_0x587d9f)):(_0x394b3f=_0x5601a3,_0x306171=_0x5a2e88);}),await runIndexing(app),_0x2fb43d();else{let _0x3e4a6c=_0x598ffd()[_0x3fc3d1(0x145)](0x1,_0x4f5c31['FqmqY'])[_0x3fc3d1(0x142)](),_0x5b3870=_0x3e603b()[_0x3fc3d1(0x176)](0x7,'days')[_0x3fc3d1(0x142)]();const _0x558af7=_0x3d14a3()[_0x3fc3d1(0x145)](0xe,_0x4f5c31[_0x3fc3d1(0x12e)])['toDate'](),_0x3c3bec=_0x4f5c31['vaTBc'](_0x377228)[_0x3fc3d1(0x145)](0x7,_0x4f5c31[_0x3fc3d1(0x12e)])[_0x3fc3d1(0x142)](),_0x216b52=_0x3ae744()['add'](0x7,_0x3fc3d1(0x16d))['toDate'](),_0x46e378=_0x4f5c31[_0x3fc3d1(0x174)](_0x1b801f)['add'](0xe,_0x4f5c31['FqmqY'])[_0x3fc3d1(0x142)]();_0x4f5c31[_0x3fc3d1(0x13d)](_0x18e98b[_0x2e29c1]['code']['substring'](0x0,0x7),_0x3fc3d1(0x163))&&(_0x3e4a6c=_0x558af7,_0x5b3870=_0x3c3bec),_0x453ae8[_0x4735e2][_0x3fc3d1(0x14c)][_0x3fc3d1(0x14f)](0x0,0x6)===_0x4f5c31[_0x3fc3d1(0x152)]&&(_0x3e4a6c=_0x216b52,_0x5b3870=_0x46e378),_0x50c554[_0x18e625][_0x3fc3d1(0x136)]=_0x3e4a6c,_0x57bf34[_0x546a07][_0x3fc3d1(0x175)]=_0x5b3870,_0xe7a421++;}});});},fixProductDates=_0x17ff8c=>{const _0x2dd5ec=_0x10354a,_0x563207={'kTqup':function(_0x17fbb1,_0x4e3e80){return _0x17fbb1(_0x4e3e80);},'owVSx':_0x2dd5ec(0x14b)};let _0x15d483=0x0;return _0x17ff8c[_0x2dd5ec(0x177)](()=>{const _0x4cf364=_0x2dd5ec,_0x20a0c3={'sqLXC':function(_0xe2ce06,_0x3ffb2c){const _0x224da6=_0x46db;return _0x563207[_0x224da6(0x16c)](_0xe2ce06,_0x3ffb2c);}};if(_0x4cf364(0x14b)!==_0x563207[_0x4cf364(0x172)])return _0x413248[_0x4cf364(0x133)]([_0x202fb6[_0x4cf364(0x179)][_0x4cf364(0x138)]({},{}),_0x52d07d[_0x4cf364(0x16a)][_0x4cf364(0x138)]({},{}),_0x5c3c0d[_0x4cf364(0x160)][_0x4cf364(0x138)]({},{}),_0x8b3305[_0x4cf364(0x171)]['deleteMany']({},{}),_0x309de8[_0x4cf364(0x165)][_0x4cf364(0x138)]({},{}),_0x362417[_0x4cf364(0x158)][_0x4cf364(0x138)]({},{}),_0x482911[_0x4cf364(0x149)][_0x4cf364(0x138)]({},{})])[_0x4cf364(0x13e)](()=>{const _0x1d89e6=_0x4cf364;return _0x45a589[_0x1d89e6(0x133)]([_0xe239f7[_0x1d89e6(0x16a)][_0x1d89e6(0x167)](_0x4398af(_0x9090e[_0x1d89e6(0x16a)])),_0x44e081['customers'][_0x1d89e6(0x167)](_0x1e0d12[_0x1d89e6(0x160)]),_0x2a5aed[_0x1d89e6(0x171)]['insertMany'](_0x20a0c3[_0x1d89e6(0x141)](_0x276218,_0x281328[_0x1d89e6(0x171)])),_0x361cb0['discounts'][_0x1d89e6(0x167)](_0xb4017e(_0x3bd51c[_0x1d89e6(0x165)]))]);});else _0x17ff8c[_0x15d483][_0x4cf364(0x17a)]=new Date(),_0x15d483++;}),_0x17ff8c;},fixDiscountDates=_0x3e93d9=>{const _0x47d0a9=_0x10354a,_0x319d0a={'HlCwD':function(_0x18dbe2){return _0x18dbe2();},'TjZAZ':function(_0x45724b){return _0x45724b();},'xBeQP':'days','nGhFm':function(_0x2ed1b9){return _0x2ed1b9();},'TRzWy':function(_0x55b0e4,_0x5f81cf){return _0x55b0e4===_0x5f81cf;}};let _0x1bc995=0x0;return _0x3e93d9[_0x47d0a9(0x177)](()=>{const _0x5205a2=_0x47d0a9;let _0x1ffdf0=_0x319d0a[_0x5205a2(0x154)](moment)['subtract'](0x1,_0x5205a2(0x16d))[_0x5205a2(0x142)](),_0x39539c=_0x319d0a[_0x5205a2(0x148)](moment)[_0x5205a2(0x176)](0x7,_0x5205a2(0x16d))[_0x5205a2(0x142)]();const _0x5066c8=moment()[_0x5205a2(0x145)](0xe,_0x319d0a['xBeQP'])[_0x5205a2(0x142)](),_0x590fee=moment()[_0x5205a2(0x145)](0x7,_0x319d0a[_0x5205a2(0x146)])['toDate'](),_0x336bcc=moment()[_0x5205a2(0x176)](0x7,_0x5205a2(0x16d))[_0x5205a2(0x142)](),_0x13afcd=_0x319d0a[_0x5205a2(0x183)](moment)[_0x5205a2(0x176)](0xe,_0x319d0a[_0x5205a2(0x146)])[_0x5205a2(0x142)]();_0x3e93d9[_0x1bc995]['code']['substring'](0x0,0x7)===_0x5205a2(0x163)&&(_0x1ffdf0=_0x5066c8,_0x39539c=_0x590fee),_0x319d0a[_0x5205a2(0x151)](_0x3e93d9[_0x1bc995][_0x5205a2(0x14c)][_0x5205a2(0x14f)](0x0,0x6),_0x5205a2(0x15a))&&(_0x1ffdf0=_0x336bcc,_0x39539c=_0x13afcd),_0x3e93d9[_0x1bc995]['start']=_0x1ffdf0,_0x3e93d9[_0x1bc995][_0x5205a2(0x175)]=_0x39539c,_0x1bc995++;}),_0x3e93d9;},addApiKey=_0x4de1ae=>{const _0x54db20=_0x10354a;let _0x45dadd=0x0;return _0x4de1ae[_0x54db20(0x177)](()=>{const _0x575b3d=_0x54db20;_0x4de1ae[_0x45dadd][_0x575b3d(0x15d)]=newId(),_0x45dadd++;}),_0x4de1ae;};function _0x34d7(){const _0x31d913=['customers','nGenp','lrwXQ','expired','7.5','discounts','orderDate','insertMany','yNImm','gNhHG','users','763288DzxAoB','kTqup','days','16300824GSOetw','UHIiO','6aFpvNK','products','owVSx','ANvXo','XUKVx','end','add','forEach','_id','cart','productAddedDate','push','uEdGY','tmLiT','KlpRw','WNrFo','request','find','readFileSync','nGhFm','14370vJaxir','FqmqY','DBgRF','452BfuRzf','productPrice','parse','all','wmDhU','appStarted','start','insertOne','deleteMany','196iAQteQ','../lib/indexing','CMDzN','203766lbdrrc','LZQMk','then','productImage','supertest','sqLXC','toDate','toArray','orderProducts','subtract','xBeQP','productTitle','TjZAZ','sessions','utf-8','NjYOU','code','moment','config','substring','6543trGazM','TRzWy','tATAV','5708vujXdC','HlCwD','5055090PwoYBk','./bin/testdata.json','11MhrHNZ','orders','lodash','future','each','HPWmA','apiKey','../app.js','211000jhkSjh'];_0x34d7=function(){return _0x31d913;};return _0x34d7();}function _0x46db(_0x1d35fe,_0x5a6448){const _0x34d758=_0x34d7();return _0x46db=function(_0x46db80,_0x1a9560){_0x46db80=_0x46db80-0x12e;let _0x407a10=_0x34d758[_0x46db80];return _0x407a10;},_0x46db(_0x1d35fe,_0x5a6448);}module['exports']={'runBefore':runBefore,'setup':setup,'g':g,'fixProductDates':fixProductDates,'fixDiscountDates':fixDiscountDates};