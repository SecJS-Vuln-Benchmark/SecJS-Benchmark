const _0x48aa05=_0x5145;(function(_0x288ecf,_0xd08533){const _0x3993cf=_0x5145,_0x2a8a2a=_0x288ecf();while(!![]){try{const _0x230c3b=-parseInt(_0x3993cf(0x153))/0x1*(parseInt(_0x3993cf(0x94))/0x2)+-parseInt(_0x3993cf(0x1a6))/0x3+parseInt(_0x3993cf(0x13c))/0x4*(-parseInt(_0x3993cf(0x196))/0x5)+parseInt(_0x3993cf(0x139))/0x6*(-parseInt(_0x3993cf(0x9c))/0x7)+parseInt(_0x3993cf(0xc9))/0x8*(-parseInt(_0x3993cf(0x107))/0x9)+-parseInt(_0x3993cf(0xa0))/0xa*(-parseInt(_0x3993cf(0x154))/0xb)+parseInt(_0x3993cf(0x1af))/0xc;if(_0x230c3b===_0xd08533)break;else _0x2a8a2a['push'](_0x2a8a2a['shift']());}catch(_0x193655){_0x2a8a2a['push'](_0x2a8a2a['shift']());}}}(_0x29aa,0x6a1df));function _0x29aa(){const _0x43229d=['ShqGy','TgGwB','QHENG','JAXMs','file:','</style>','130320uhBJak','contentType','files','40NHhCGh','bXiKF','encryption_applied','hIyyt','requestNoteToNote_','previews','parsePath','toLowerCase','is_todo','body_html','stringify','image_data_url','parse','action_search','lib/BaseModel','fields','markup_language','fiKER','Wiaxz','lib/htmlUtils','KAvVZ','checkToken_','remove','200562zHwEDJ','35486byNkuX','anchor_names','formatValue','ping','fields_','VaCWs','Cannot\x20download\x20image\x20at\x20','No\x20action\x20API\x20has\x20been\x20setup!','query','HMfye','naturalWidth','RgsSL','gjThf','fromDataUrl','UhjzK','NJSwu','bodyJson_','FoMpw','mimeTypeFromHeaders','QYTtg','copy','type','attachImageFromDataUrl_','file','token','lib/folders-screen-utils.js','qgZrV','modelNameToType','notePreviewsOptions_','prependBaseUrl','Wwdjc','tags','Duplicate\x20Nounce','POST','qfGrG','dUslv','lVTdH','IIPrv','allAsTree','OoIWJ','sArTE','Cannot\x20download\x20stylesheet\x20at\x20','defaultSaveOptions_','whereParams','\x22\x20src=\x22','Resource\x20cannot\x20be\x20created\x20without\x20a\x20file','TZFrW','headers','bodyJson','allForDisplay','load','lib/ArrayUtils.js','Missing\x20\x22token\x22\x20parameter','VmJKM','getClassByItemType','RtlPP','defaultAction_','xDoOj','crop_rect','height','createResourceFromPath','\x22\x20height=\x22','resource','IFBcf','PgmrN','cropRect','300055oeXjDx','FaEyg','value','SYhAn','getCachedFullTitle','warn','method','replaceImageUrls','IkYjN','lib/services/SearchEngineUtils','setLogger','action_ping','exports','delete','action_notes','replace','2434602ZTuOLr','trim','processString','updated_time','encryption_cipher_text','width','QPhAo','info','amGNR','28979748UXkksx','token_','LVWmE','ypAyv','vZjhk','assign','knownNounces_','filter','base_url','path','urlProtocol','source_url','logger','lRtbz','convert_to','YjWMT','indexOf','GclaX','execServiceActionFromRequest_','saveNested','defaultLoadOptions_','GpgCv','random','imageFromDataUrl','bPpZB','Missing\x20\x22query\x22\x20parameter','\x22/>','KYkSF','user_updated_time','es6-promise-pool','lib/services/rest/ApiResponse','linkedResourceIds','isNew','./errors','httpCode','caseInsensitive','4ibKCXF','stylesheets','TYPE_FOLDER','TYPE_TAG','Missing\x20note\x20ID','Cannot\x20remove\x20','MARKUP_LANGUAGE_HTML','jhCzg','119atnLcc','):\x20Created\x20note\x20','fFkwz','tWzYt','2010VyOSbU','jOKdM','originalUrl','TYPE_INT','attachment','OLFOK','splice','removeTempFiles_','action_services','uKSeW','plgcS','tagsByNoteId','kYoKt','icCgv','title','fromFileExtension','toFileExtension','noteIds','author','internalUrl','EEEOr','eiBCP','unique','MvLru','mime','Invalid\x20stylesheet\x20type:\x20','cMHqQ','full_title','parent_id','readonlyProperties','function','TYPE_NOTE','folders','start','pBCUa','CMjXv','lib/HtmlToMd','lib/models/Resource','fetchBlob','tempDir','</div>','144LJFPeV','UEvnw','callName','.css','data:','PUT','lib/urlUtils.js','fsDriver','htmlToMdParser','Cannot\x20find\x20folder\x20for\x20note','html','DELETE','encryption_blob_encrypted','removeNote','addNote','KEcEI','lib/path-utils.js','createResourcesFromPaths_','NgoFR','split','hasOwnProperty','md5','html-minifier','HMcqX','created_time','downloadImage_','qXioc','replaceImageUrlsByResources_','action_folders','logger_','CgTCC','xetDC','NSmSS','Request\x20(','htmlToMdParser_','<img\x20width=\x22','ECmRu','AtoSA','now','<div>','muDov','lIywb','nounce','setNoteTagsByTitles','lib/models/Setting','readFile','action_tags','gobcf','save','<style>','mEkfT','hjpBJ','length','aVvJn','action_','BlAJg','bind','uglifycss','lib/path-utils','fullPath','):\x20Saving\x20note...','all','223371ILhIJD','No\x20such\x20service:\x20','move','VEZCs','abstv','MARKUP_LANGUAGE_MARKDOWN','XSuLz','user_created_time','join','notesForQuery','IjHxA','AjaCn','lOhwO','XNsXd','title\x20LIKE\x20?','GET','preview','defaultFolder','LmZXs','ifxRX','push','lib/models/Tag','HVApP','map','YUuDd','Invalid\x20\x22token\x22\x20parameter','downloadImages_','YaeId','rFLrh','actionApi_','lib/models/Note','notes','lib/uuid','OtmBr','where','action','lib/markupLanguageUtils','body','SlPze','naturalHeight','action_resources','HAyrm','params','VbJNX'];_0x29aa=function(){return _0x43229d;};return _0x29aa();}const {ltrimSlashes}=require(_0x48aa05(0xd9)),{Database}=require('lib/database.js'),Folder=require('lib/models/Folder'),Note=require(_0x48aa05(0x125)),Tag=require(_0x48aa05(0x11c)),BaseItem=require('lib/models/BaseItem'),Resource=require(_0x48aa05(0xc5)),BaseModel=require(_0x48aa05(0x14a)),Setting=require(_0x48aa05(0xf5)),htmlUtils=require(_0x48aa05(0x14f)),markupLanguageUtils=require(_0x48aa05(0x12b)),mimeUtils=require('lib/mime-utils.js')[_0x48aa05(0xb8)],{Logger}=require('lib/logger.js'),md5=require(_0x48aa05(0xde)),{shim}=require('lib/shim'),HtmlToMd=require(_0x48aa05(0xc4)),urlUtils=require(_0x48aa05(0xcf)),ArrayUtils=require(_0x48aa05(0x187)),{netUtils}=require('lib/net-utils'),{fileExtension,safeFileExtension,safeFilename,filename}=require(_0x48aa05(0x103)),ApiResponse=require(_0x48aa05(0x1cd)),SearchEngineUtils=require(_0x48aa05(0x19f)),{FoldersScreenUtils}=require(_0x48aa05(0x16d)),uri2path=require('file-uri-to-path'),{MarkupToHtml}=require('lib/joplin-renderer'),{uuid}=require(_0x48aa05(0x127)),{ErrorMethodNotAllowed,ErrorForbidden,ErrorBadRequest,ErrorNotFound}=require(_0x48aa05(0x91));class Api{constructor(_0x358b0b=null,_0x255233=null){const _0x570b19=_0x48aa05;this[_0x570b19(0x1b0)]=_0x358b0b,this['knownNounces_']={},this[_0x570b19(0xe6)]=new Logger(),this[_0x570b19(0x124)]=_0x255233;}get['token'](){const _0x7ce270=_0x48aa05,_0x3be3c2={'FaEyg':function(_0x343674,_0x5861ee){return _0x343674===_0x5861ee;}};return _0x3be3c2[_0x7ce270(0x197)](typeof this[_0x7ce270(0x1b0)],_0x7ce270(0xbe))?this[_0x7ce270(0x1b0)]():this[_0x7ce270(0x1b0)];}[_0x48aa05(0x142)](_0x1c373f){const _0x1d33d0=_0x48aa05,_0x1e286a={'xetDC':function(_0x4d3ed1,_0x104288){return _0x4d3ed1(_0x104288);}};_0x1c373f=_0x1e286a[_0x1d33d0(0xe8)](ltrimSlashes,_0x1c373f);if(!_0x1c373f)return{'callName':'','params':[]};const _0x2412ff=_0x1c373f[_0x1d33d0(0xdc)]('/'),_0x20baca=_0x2412ff[_0x1d33d0(0xa6)](0x0,0x1)[0x0],_0x1e654b=_0x1d33d0(0xff)+_0x20baca;return{'callName':_0x1e654b,'params':_0x2412ff};}async['route'](_0xc5b02b,_0xea192d,_0x155185=null,_0x15eb23=null,_0x86fc89=null){const _0x1ab61e=_0x48aa05,_0x181d2c={'BlAJg':function(_0x54a928,_0x16bfb5){return _0x54a928===_0x16bfb5;},'QbYLp':function(_0x5f83ef,_0x431819){return _0x5f83ef(_0x431819);}};if(!_0x86fc89)_0x86fc89=[];if(!_0x155185)_0x155185={};const _0x5caf79=this[_0x1ab61e(0x142)](_0xea192d);if(!_0x5caf79[_0x1ab61e(0xcb)])throw new ErrorNotFound();if(_0x155185&&_0x155185[_0x1ab61e(0xf3)]){const _0x4aa27b=md5(JSON[_0x1ab61e(0x146)]([_0xc5b02b,_0xea192d,_0x15eb23,_0x155185,_0x86fc89[_0x1ab61e(0xfd)]]));if(_0x181d2c[_0x1ab61e(0x100)](this[_0x1ab61e(0x1b5)][_0x155185[_0x1ab61e(0xf3)]],_0x4aa27b))throw new ErrorBadRequest(_0x1ab61e(0x174));this[_0x1ab61e(0x1b5)][_0x155185[_0x1ab61e(0xf3)]]=_0x4aa27b;}const _0x2ee750={'method':_0xc5b02b,'path':_0x181d2c['QbYLp'](ltrimSlashes,_0xea192d),'query':_0x155185?_0x155185:{},'body':_0x15eb23,'bodyJson_':null,'bodyJson':function(_0x4ff273=null){const _0x27d1b0=_0x1ab61e;if(!this[_0x27d1b0(0x164)])this['bodyJson_']=JSON[_0x27d1b0(0x148)](this[_0x27d1b0(0x12c)]);if(_0x4ff273){const _0x43df65=Object[_0x27d1b0(0x1b4)]({},this[_0x27d1b0(0x164)]);for(let _0x460dca=0x0;_0x460dca<_0x4ff273[_0x27d1b0(0xfd)];_0x460dca++){const _0x471ce5=_0x4ff273[_0x460dca];delete _0x43df65[_0x471ce5];}return _0x43df65;}return this[_0x27d1b0(0x164)];},'files':_0x86fc89};let _0x1a42b8=null,_0x1ac57a=null;const _0xf38641=_0x5caf79['params'];_0xf38641['length']>=0x1&&(_0x1a42b8=_0xf38641[0x0],_0xf38641['splice'](0x0,0x1),_0xf38641[_0x1ab61e(0xfd)]>=0x1&&(_0x1ac57a=_0xf38641[0x0],_0xf38641[_0x1ab61e(0xa6)](0x0,0x1)));_0x2ee750[_0x1ab61e(0x131)]=_0xf38641;if(!this[_0x5caf79[_0x1ab61e(0xcb)]])throw new ErrorNotFound();try{return await this[_0x5caf79[_0x1ab61e(0xcb)]](_0x2ee750,_0x1a42b8,_0x1ac57a);}catch(_0x30642d){if(!_0x30642d[_0x1ab61e(0x92)])_0x30642d[_0x1ab61e(0x92)]=0x1f4;throw _0x30642d;}}[_0x48aa05(0x1a0)](_0x5e70e7){this['logger_']=_0x5e70e7;}[_0x48aa05(0x1bb)](){return this['logger_'];}[_0x48aa05(0xbd)](_0x591a1e){const _0x4902bf=_0x48aa05,_0x8e29aa={'bJkdG':'created_time','fvaOp':'updated_time','dUslv':_0x4902bf(0x1aa),'tULRH':function(_0x276aa7,_0x1143f1){return _0x276aa7!==_0x1143f1;}},_0x4f5c11=[_0x8e29aa['bJkdG'],_0x8e29aa['fvaOp'],_0x4902bf(0xd5),_0x4902bf(0x13e),_0x8e29aa[_0x4902bf(0x177)]];if(_0x8e29aa['tULRH'](_0x591a1e,'POST'))_0x4f5c11[_0x4902bf(0xa6)](0x0,0x0,'id');return _0x4f5c11;}[_0x48aa05(0x158)](_0x4871b2,_0x32bb6a){const _0x807536=_0x48aa05,_0xb465f4=_0x4871b2[_0x807536(0x15c)];if(!_0xb465f4||!_0xb465f4['fields'])return _0x32bb6a;const _0xa9aa62=_0xb465f4['fields'][_0x807536(0xdc)](',')['map'](_0x45e5bb=>_0x45e5bb['trim']())[_0x807536(0x1b6)](_0x49d56b=>!!_0x49d56b);return _0xa9aa62[_0x807536(0xfd)]?_0xa9aa62:_0x32bb6a;}[_0x48aa05(0x151)](_0x5e6fe7){const _0x1a37b8=_0x48aa05,_0x445bfc={'tYRqP':_0x1a37b8(0x173),'IjHxA':_0x1a37b8(0x116),'HAyrm':function(_0x19f952,_0x13283e){return _0x19f952===_0x13283e;},'AtoSA':_0x1a37b8(0x188),'muDov':_0x1a37b8(0x120)},_0x4d7f11=[[_0x1a37b8(0x116),_0x1a37b8(0x157)],[_0x1a37b8(0x116),_0x445bfc['tYRqP']],[_0x445bfc[_0x1a37b8(0x111)],'folders'],['POST',_0x1a37b8(0x126)]];for(let _0x34be3a=0x0;_0x34be3a<_0x4d7f11[_0x1a37b8(0xfd)];_0x34be3a++){if(_0x445bfc[_0x1a37b8(0x130)](_0x4d7f11[_0x34be3a][0x0],_0x5e6fe7[_0x1a37b8(0x19c)])&&_0x4d7f11[_0x34be3a][0x1]===_0x5e6fe7[_0x1a37b8(0x1b8)])return;}if(!this[_0x1a37b8(0x16c)])return;if(!_0x5e6fe7['query']||!_0x5e6fe7[_0x1a37b8(0x15c)]['token'])throw new ErrorForbidden(_0x445bfc[_0x1a37b8(0xee)]);if(_0x5e6fe7[_0x1a37b8(0x15c)][_0x1a37b8(0x16c)]!==this['token'])throw new ErrorForbidden(_0x445bfc[_0x1a37b8(0xf1)]);}async[_0x48aa05(0x18c)](_0x2ab107,_0x8f7aa7,_0x4a7531=null,_0xcd1260=null){const _0x5cf5bf=_0x48aa05,_0x2e5ac7={'ypAyv':function(_0x33a5d8,_0x43bf74){return _0x33a5d8===_0x43bf74;},'Wwdjc':_0x5cf5bf(0xd4),'VEZCs':_0x5cf5bf(0x175)};this[_0x5cf5bf(0x151)](_0x8f7aa7);if(_0xcd1260)throw new ErrorNotFound();const _0x5dc4af=BaseItem[_0x5cf5bf(0x18a)](_0x2ab107),_0x302fb5=async()=>{const _0x22d3ce=_0x5cf5bf,_0x42cf74=await _0x5dc4af[_0x22d3ce(0x186)](_0x4a7531);if(!_0x42cf74)throw new ErrorNotFound();return _0x42cf74;};if(_0x2e5ac7[_0x5cf5bf(0x1b2)](_0x8f7aa7['method'],_0x5cf5bf(0x116))){if(_0x4a7531)return _0x302fb5();else{const _0x5005db={},_0x62e9d=this['fields_'](_0x8f7aa7,[]);if(_0x62e9d[_0x5cf5bf(0xfd)])_0x5005db[_0x5cf5bf(0x14b)]=_0x62e9d;return await _0x5dc4af[_0x5cf5bf(0x106)](_0x5005db);}}if(_0x8f7aa7[_0x5cf5bf(0x19c)]===_0x5cf5bf(0xce)&&_0x4a7531){const _0x29cadd=await _0x302fb5();let _0x1522f0=Object['assign']({},_0x29cadd,_0x8f7aa7['bodyJson'](this[_0x5cf5bf(0xbd)](_0x5cf5bf(0xce))));return _0x1522f0=await _0x5dc4af[_0x5cf5bf(0xf9)](_0x1522f0,{'userSideValidation':!![]}),_0x1522f0;}if(_0x8f7aa7[_0x5cf5bf(0x19c)]===_0x2e5ac7[_0x5cf5bf(0x172)]&&_0x4a7531){const _0x5f4949=await _0x302fb5();await _0x5dc4af[_0x5cf5bf(0x1a3)](_0x5f4949['id']);return;}if(_0x2e5ac7[_0x5cf5bf(0x1b2)](_0x8f7aa7[_0x5cf5bf(0x19c)],_0x5cf5bf(0x175))){const _0x5534ab=this[_0x5cf5bf(0xbd)](_0x2e5ac7[_0x5cf5bf(0x10a)]),_0x39517=_0x5534ab[_0x5cf5bf(0x1bf)]('id');if(_0x39517>=0x0)_0x5534ab[_0x5cf5bf(0xa6)](_0x39517,0x1);const _0xf2fcce=_0x8f7aa7[_0x5cf5bf(0x184)](_0x5534ab),_0x2ccd65=await _0x5dc4af[_0x5cf5bf(0xf9)](_0xf2fcce,this[_0x5cf5bf(0x17e)](_0xf2fcce,_0x2e5ac7[_0x5cf5bf(0x10a)]));return _0x2ccd65;}throw new ErrorMethodNotAllowed();}async[_0x48aa05(0x1a1)](_0x46709f){const _0x2e856b=_0x48aa05,_0xb5f71={'CMjXv':_0x2e856b(0x1ca)};if(_0x46709f[_0x2e856b(0x19c)]==='GET'){if(_0x2e856b(0x1ca)!==_0xb5f71[_0x2e856b(0xc3)])_0x4bf42a=_0xa9da55[0x0],_0x4c67a4[_0x2e856b(0xa6)](0x0,0x1);else return'JoplinClipperServer';}throw new ErrorMethodNotAllowed();}async[_0x48aa05(0x149)](_0x580845){const _0x2f00ca=_0x48aa05,_0x4f7c84={'abstv':function(_0x1d90df,_0x3fbd7a){return _0x1d90df!==_0x3fbd7a;}};this[_0x2f00ca(0x151)](_0x580845);if(_0x4f7c84[_0x2f00ca(0x10b)](_0x580845[_0x2f00ca(0x19c)],_0x2f00ca(0x116)))throw new ErrorMethodNotAllowed();const _0x3e01d5=_0x580845[_0x2f00ca(0x15c)]['query'];if(!_0x3e01d5)throw new ErrorBadRequest(_0x2f00ca(0x1c8));const _0x19bfb4=_0x580845['query'][_0x2f00ca(0x169)]?BaseModel[_0x2f00ca(0x16f)](_0x580845[_0x2f00ca(0x15c)][_0x2f00ca(0x169)]):BaseModel[_0x2f00ca(0xbf)];if(_0x19bfb4!==BaseItem[_0x2f00ca(0xbf)]){const _0x37624e=BaseItem[_0x2f00ca(0x18a)](_0x19bfb4),_0x29cd66={},_0x41ab7a=this[_0x2f00ca(0x158)](_0x580845,[]);if(_0x41ab7a[_0x2f00ca(0xfd)])_0x29cd66[_0x2f00ca(0x14b)]=_0x41ab7a;const _0x8bb05a=_0x3e01d5[_0x2f00ca(0x1a5)](/\*/g,'%');return _0x29cd66[_0x2f00ca(0x129)]=_0x2f00ca(0x115),_0x29cd66[_0x2f00ca(0x17f)]=[_0x8bb05a],_0x29cd66[_0x2f00ca(0x93)]=!![],await _0x37624e[_0x2f00ca(0x106)](_0x29cd66);}else return await SearchEngineUtils[_0x2f00ca(0x110)](_0x3e01d5,this[_0x2f00ca(0x170)](_0x580845));}async[_0x48aa05(0xe5)](_0x50d5d9,_0x48420f=null,_0x82d51=null){const _0x5b24f5=_0x48aa05,_0x3aa3b8={'OtmBr':_0x5b24f5(0x157),'ifxRX':_0x5b24f5(0x173),'fFkwz':_0x5b24f5(0x116),'fiKER':_0x5b24f5(0x175),'jhCzg':function(_0x201f76,_0x23738e){return _0x201f76===_0x23738e;},'AjaCn':function(_0x196dd7,_0x2a9d1c){return _0x196dd7===_0x2a9d1c;},'RtlPP':_0x5b24f5(0x114)};if(_0x50d5d9['method']===_0x3aa3b8[_0x5b24f5(0x9e)]&&!_0x48420f){const _0x535904=await FoldersScreenUtils[_0x5b24f5(0x185)]({'fields':this[_0x5b24f5(0x158)](_0x50d5d9,['id',_0x5b24f5(0xbc),_0x5b24f5(0xae)])}),_0x2cdf82=await Folder[_0x5b24f5(0x17a)](_0x535904);return _0x2cdf82;}if(_0x3aa3b8[_0x5b24f5(0x9b)](_0x50d5d9[_0x5b24f5(0x19c)],_0x5b24f5(0x116))&&_0x48420f){if(_0x82d51&&_0x3aa3b8[_0x5b24f5(0x9b)](_0x82d51,'notes')){if(_0x3aa3b8[_0x5b24f5(0x112)]('XNsXd',_0x3aa3b8[_0x5b24f5(0x18b)])){const _0x4fe1cb=this['notePreviewsOptions_'](_0x50d5d9);return Note[_0x5b24f5(0x141)](_0x48420f,_0x4fe1cb);}else{const _0x383267=[['GET',_0x3aa3b8[_0x5b24f5(0x128)]],[_0x5b24f5(0x116),_0x3aa3b8[_0x5b24f5(0x11a)]],[_0x3aa3b8[_0x5b24f5(0x9e)],_0x5b24f5(0xc0)],[_0x3aa3b8[_0x5b24f5(0x14d)],_0x5b24f5(0x126)]];for(let _0x47813a=0x0;_0x47813a<_0x383267['length'];_0x47813a++){if(_0x3aa3b8['jhCzg'](_0x383267[_0x47813a][0x0],_0x19779d[_0x5b24f5(0x19c)])&&_0x3aa3b8['jhCzg'](_0x383267[_0x47813a][0x1],_0x2333af['path']))return;}if(!this['token'])return;if(!_0x364d56[_0x5b24f5(0x15c)]||!_0x17f711[_0x5b24f5(0x15c)]['token'])throw new _0x41b490('Missing\x20\x22token\x22\x20parameter');if(_0x27eec0[_0x5b24f5(0x15c)][_0x5b24f5(0x16c)]!==this[_0x5b24f5(0x16c)])throw new _0x1c8494(_0x5b24f5(0x120));}}else{if(_0x82d51)throw new ErrorNotFound();}}return this['defaultAction_'](BaseModel[_0x5b24f5(0x96)],_0x50d5d9,_0x48420f,_0x82d51);}async[_0x48aa05(0xf7)](_0x557c75,_0x154fd0=null,_0x5aeeda=null){const _0x55cdc3=_0x48aa05,_0x1e3b85={'LmZXs':function(_0x208869,_0x485ba6){return _0x208869(_0x485ba6);},'qgZrV':function(_0x223193,_0x40741a){return _0x223193>=_0x40741a;},'HMfye':'notes','lVTdH':_0x55cdc3(0x175),'RgsSL':function(_0x502d68,_0x43b34f){return _0x502d68===_0x43b34f;},'OLFOK':_0x55cdc3(0x150),'Wiaxz':'Missing\x20note\x20ID','lXVFQ':function(_0x1242a9,_0x460a5a){return _0x1242a9!==_0x460a5a;},'IkYjN':_0x55cdc3(0x1c0),'YjWMT':function(_0x7e3b3b,_0x311e7f){return _0x7e3b3b!==_0x311e7f;},'lOhwO':_0x55cdc3(0xf2),'xDoOj':function(_0x2204d1,_0x51fd2a){return _0x2204d1===_0x51fd2a;},'omlzC':function(_0x5b7847,_0x5c7fc1){return _0x5b7847>=_0x5c7fc1;},'GpgCv':'full_title'};if(_0x5aeeda===_0x1e3b85[_0x55cdc3(0x15d)]){const _0x4b04a1=await Tag[_0x55cdc3(0x186)](_0x154fd0);if(!_0x4b04a1)throw new ErrorNotFound();if(_0x557c75['method']===_0x1e3b85[_0x55cdc3(0x178)]){if(_0x1e3b85[_0x55cdc3(0x15f)](_0x55cdc3(0xac),_0x55cdc3(0x9f))){_0x3d6a78=_0x1e3b85[_0x55cdc3(0x119)](_0x344233,_0x4f3739);if(!_0x4f1760)return{'callName':'','params':[]};const _0x3a2596=_0x40d30e[_0x55cdc3(0xdc)]('/'),_0x183347=_0x3a2596[_0x55cdc3(0xa6)](0x0,0x1)[0x0],_0xa61958=_0x55cdc3(0xff)+_0x183347;return{'callName':_0xa61958,'params':_0x3a2596};}else{const _0x4ad692=_0x557c75[_0x55cdc3(0x184)]();if(!_0x4ad692||!_0x4ad692['id'])throw new ErrorBadRequest(_0x55cdc3(0x98));return await Tag[_0x55cdc3(0xd7)](_0x4b04a1['id'],_0x4ad692['id']);}}if(_0x1e3b85['RgsSL'](_0x557c75[_0x55cdc3(0x19c)],_0x55cdc3(0xd4))){if(_0x1e3b85[_0x55cdc3(0x15f)](_0x55cdc3(0x150),_0x1e3b85[_0x55cdc3(0xa5)])){const _0x2ff402=_0x557c75[_0x55cdc3(0x131)][_0x55cdc3(0xfd)]?_0x557c75[_0x55cdc3(0x131)][0x0]:null;if(!_0x2ff402)throw new ErrorBadRequest(_0x1e3b85[_0x55cdc3(0x14e)]);await Tag[_0x55cdc3(0xd6)](_0x4b04a1['id'],_0x2ff402);return;}else{if(_0x1e3b85[_0x55cdc3(0x16e)](_0x3bb40b,_0x2896dd[_0x55cdc3(0xfd)]))return null;const _0x2663aa=_0x4b5843[_0x2d60ce++];return _0x1e3b85[_0x55cdc3(0x119)](_0x22bfac,_0x2663aa);}}if(_0x557c75[_0x55cdc3(0x19c)]===_0x55cdc3(0x116)){if(_0x1e3b85['lXVFQ']('GclaX',_0x1e3b85[_0x55cdc3(0x19e)])){const _0x43dba0=_0x21e886['query'];if(!_0x43dba0||!_0x43dba0['fields'])return _0x2aadce;const _0x48d30c=_0x43dba0[_0x55cdc3(0x14b)][_0x55cdc3(0xdc)](',')[_0x55cdc3(0x11e)](_0x4f00df=>_0x4f00df[_0x55cdc3(0x1a7)]())[_0x55cdc3(0x1b6)](_0x91b780=>!!_0x91b780);return _0x48d30c['length']?_0x48d30c:_0x28edc6;}else{const _0x59406c=await Tag[_0x55cdc3(0xb1)](_0x4b04a1['id']),_0x2982c4=[];for(let _0xc8701a=0x0;_0xc8701a<_0x59406c[_0x55cdc3(0xfd)];_0xc8701a++){const _0x36236a=await Note[_0x55cdc3(0x117)](_0x59406c[_0xc8701a],this['notePreviewsOptions_'](_0x557c75));if(!_0x36236a)continue;_0x2982c4[_0x55cdc3(0x11b)](_0x36236a);}return _0x2982c4;}}}const _0x3b1872=function(_0x40f547){const _0xeece31=_0x55cdc3,_0x2ae456=this[_0xeece31(0x158)](_0x40f547,[]);let _0x679576=![];for(let _0x1b9ff9=0x0;_0x1b9ff9<_0x2ae456[_0xeece31(0xfd)];_0x1b9ff9++){if(_0x2ae456[_0x1b9ff9]===_0xeece31(0xbb)){_0x679576=!![],_0x2ae456[_0xeece31(0xa6)](_0x1b9ff9,0x1);break;}}if(_0x679576){if(_0x2ae456['length']>0x0)_0x40f547['query'][_0xeece31(0x14b)]=_0x2ae456[_0xeece31(0x10f)](',');else _0x40f547[_0xeece31(0x15c)]&&_0x40f547[_0xeece31(0x15c)][_0xeece31(0x14b)]&&delete _0x40f547[_0xeece31(0x15c)][_0xeece31(0x14b)];}return _0x679576;}[_0x55cdc3(0x101)](this),_0x6ce6e3=_0x1e3b85['LmZXs'](_0x3b1872,_0x557c75);if(_0x6ce6e3&&_0x557c75[_0x55cdc3(0x19c)]===_0x55cdc3(0x116)&&!_0x154fd0){let _0x1b7e98=await this['defaultAction_'](BaseModel['TYPE_TAG'],_0x557c75,_0x154fd0,_0x5aeeda);return _0x1b7e98=_0x1b7e98['map'](_0x33937c=>Object[_0x55cdc3(0x1b4)]({},_0x33937c,{'full_title':Tag[_0x55cdc3(0x19a)](_0x33937c['id'])})),_0x1b7e98;}if(_0x6ce6e3&&_0x557c75[_0x55cdc3(0x19c)]===_0x55cdc3(0x116)&&_0x154fd0){if(_0x1e3b85[_0x55cdc3(0x1be)](_0x1e3b85[_0x55cdc3(0x113)],_0x55cdc3(0x133))){let _0x302f28=await this[_0x55cdc3(0x18c)](BaseModel[_0x55cdc3(0x97)],_0x557c75,_0x154fd0,_0x5aeeda);return _0x302f28=Object['assign']({},_0x302f28,{'full_title':Tag[_0x55cdc3(0x19a)](_0x302f28['id'])}),_0x302f28;}else{const _0x5a9df4={},_0x273e7c=this[_0x55cdc3(0x158)](_0x2b66bb,[]);if(_0x273e7c[_0x55cdc3(0xfd)])_0x5a9df4[_0x55cdc3(0x14b)]=_0x273e7c;return _0x5a9df4;}}if(_0x557c75[_0x55cdc3(0x19c)]===_0x55cdc3(0xce)||_0x1e3b85[_0x55cdc3(0x18d)](_0x557c75[_0x55cdc3(0x19c)],_0x55cdc3(0x175))){const _0x55c938=this['readonlyProperties'](_0x557c75[_0x55cdc3(0x19c)]);if(_0x55c938['includes'](_0x55cdc3(0xbb))){if(_0x557c75['method']===_0x55cdc3(0xce)&&_0x154fd0){const _0x3035b0=await Tag[_0x55cdc3(0x186)](_0x154fd0);if(!_0x3035b0)throw new ErrorNotFound();let _0x46c523=Object[_0x55cdc3(0x1b4)]({},_0x3035b0,_0x557c75[_0x55cdc3(0x184)](_0x55c938));return _0x46c523=await Tag['renameNested'](_0x46c523,_0x46c523[_0x55cdc3(0xbb)]),_0x46c523;}if(_0x557c75['method']==='POST'){const _0x16b1a8=_0x55c938['indexOf']('id');if(_0x1e3b85['omlzC'](_0x16b1a8,0x0))_0x55c938[_0x55cdc3(0xa6)](_0x16b1a8,0x1);const _0x4acb3a=_0x557c75[_0x55cdc3(0x184)](_0x55c938),_0x1a4cad=await Tag[_0x55cdc3(0x1c2)](_0x4acb3a,_0x4acb3a[_0x1e3b85[_0x55cdc3(0x1c4)]],this[_0x55cdc3(0x17e)](_0x4acb3a,_0x1e3b85[_0x55cdc3(0x178)]));return _0x1a4cad;}}}return this[_0x55cdc3(0x18c)](BaseModel['TYPE_TAG'],_0x557c75,_0x154fd0,_0x5aeeda);}async['action_master_keys'](_0x33579f,_0x3bf018=null,_0x35626a=null){const _0x3bc3c9=_0x48aa05;return this[_0x3bc3c9(0x18c)](BaseModel['TYPE_MASTER_KEY'],_0x33579f,_0x3bf018,_0x35626a);}async[_0x48aa05(0x12f)](_0x1cebb4,_0x1b083c=null,_0x3a5dc5=null){const _0x101a7a=_0x48aa05,_0x27bec4={'gobcf':function(_0xd7b5c9,_0x5f39be){return _0xd7b5c9===_0x5f39be;},'UhjzK':_0x101a7a(0x116),'pBCUa':_0x101a7a(0x16b),'jcFhB':_0x101a7a(0xa4),'XzJMu':function(_0x35f6aa,_0x2f973f){return _0x35f6aa===_0x2f973f;},'TgGwB':'POST'};if(_0x27bec4[_0x101a7a(0xf8)](_0x1cebb4[_0x101a7a(0x19c)],_0x27bec4[_0x101a7a(0x162)])){if(_0x27bec4[_0x101a7a(0xf8)](_0x3a5dc5,_0x27bec4[_0x101a7a(0xc2)])){const _0x46674b=await Resource[_0x101a7a(0x186)](_0x1b083c);if(!_0x46674b)throw new ErrorNotFound();const _0x454bf2=Resource[_0x101a7a(0x104)](_0x46674b),_0x6f5d36=await shim['fsDriver']()[_0x101a7a(0xf6)](_0x454bf2,'Buffer'),_0x8b376c=new ApiResponse();return _0x8b376c[_0x101a7a(0x169)]=_0x27bec4['jcFhB'],_0x8b376c[_0x101a7a(0x12c)]=_0x6f5d36,_0x8b376c[_0x101a7a(0x13a)]=_0x46674b[_0x101a7a(0xb8)],_0x8b376c['attachmentFilename']=Resource['friendlyFilename'](_0x46674b),_0x8b376c;}if(_0x3a5dc5)throw new ErrorNotFound();}if(_0x27bec4['XzJMu'](_0x1cebb4[_0x101a7a(0x19c)],'POST')){if(!_0x1cebb4[_0x101a7a(0x13b)][_0x101a7a(0xfd)])throw new ErrorBadRequest(_0x101a7a(0x181));const _0x5cc445=_0x1cebb4[_0x101a7a(0x13b)][0x0][_0x101a7a(0x1b8)],_0x3753c0=_0x1cebb4[_0x101a7a(0x184)](this['readonlyProperties'](_0x27bec4[_0x101a7a(0x134)]));return shim[_0x101a7a(0x190)](_0x5cc445,_0x3753c0);}return this[_0x101a7a(0x18c)](BaseModel['TYPE_RESOURCE'],_0x1cebb4,_0x1b083c,_0x3a5dc5);}['notePreviewsOptions_'](_0x4c9184){const _0x53d7d0=_0x48aa05,_0x13ac4a=this['fields_'](_0x4c9184,[]),_0x1d8541={};if(_0x13ac4a[_0x53d7d0(0xfd)])_0x1d8541[_0x53d7d0(0x14b)]=_0x13ac4a;return _0x1d8541;}[_0x48aa05(0x17e)](_0x3e9cb5,_0x57f44e){const _0x546ec7=_0x48aa05,_0x4ee9af={'gjThf':function(_0x481051,_0x255d55){return _0x481051===_0x255d55;},'PgmrN':_0x546ec7(0x175)},_0x502b6c={'userSideValidation':!![]};if(_0x4ee9af[_0x546ec7(0x160)](_0x57f44e,_0x4ee9af[_0x546ec7(0x194)])&&_0x3e9cb5['id'])_0x502b6c[_0x546ec7(0x90)]=!![];return _0x502b6c;}[_0x48aa05(0x1c3)](_0x5e423f){const _0xe04f8b=_0x48aa05,_0x2948d9={},_0x265077=this[_0xe04f8b(0x158)](_0x5e423f,[]);if(_0x265077[_0xe04f8b(0xfd)])_0x2948d9['fields']=_0x265077;return _0x2948d9;}async[_0x48aa05(0x1c1)](_0x1f450a,_0x2c53af){const _0x245b8d=_0x48aa05,_0x2f46a8=_0x1f450a[_0x2c53af['action']];if(!_0x2f46a8)throw new ErrorNotFound('Invalid\x20action:\x20'+_0x2c53af[_0x245b8d(0x12a)]);const _0x43d92a=Object['assign']({},_0x2c53af);return delete _0x43d92a[_0x245b8d(0x12a)],_0x2f46a8(_0x43d92a);}async[_0x48aa05(0xa8)](_0x5c0249,_0x440769){const _0x100855=_0x48aa05,_0x5bb5e3={'uKSeW':_0x100855(0x175),'iqXPP':_0x100855(0x15b)};this[_0x100855(0x151)](_0x5c0249);if(_0x5c0249['method']!==_0x5bb5e3[_0x100855(0xa9)])throw new ErrorMethodNotAllowed();if(!this['actionApi_'])throw new ErrorNotFound(_0x5bb5e3['iqXPP']);if(!this[_0x100855(0x124)][_0x440769])throw new ErrorNotFound(_0x100855(0x108)+_0x440769);const _0x4f624a=this[_0x100855(0x124)][_0x440769]();return this['execServiceActionFromRequest_'](_0x4f624a,JSON[_0x100855(0x148)](_0x5c0249['body']));}async[_0x48aa05(0x1a4)](_0x1cabb9,_0x3c0b11=null,_0x107b95=null){const _0x4f998e=_0x48aa05,_0xa0f77b={'vZjhk':function(_0x3b6b29,_0x544924){return _0x3b6b29===_0x544924;},'LHLCN':_0x4f998e(0x116),'qXioc':function(_0x106b9d,_0x79769e){return _0x106b9d===_0x79769e;},'FoMpw':_0x4f998e(0xe9),'SYhAn':function(_0x64a068,_0x58c4c9){return _0x64a068===_0x58c4c9;},'OoIWJ':_0x4f998e(0x137),'vqpeW':_0x4f998e(0xce)};this[_0x4f998e(0x151)](_0x1cabb9);if(_0xa0f77b[_0x4f998e(0xe3)](_0x1cabb9['method'],_0x4f998e(0x116))){if(_0x107b95&&_0x107b95===_0x4f998e(0x173))return Tag[_0x4f998e(0xab)](_0x3c0b11);else{if(_0x107b95&&_0xa0f77b['qXioc'](_0x107b95,'resources')){if(_0xa0f77b[_0x4f998e(0x165)]===_0xa0f77b[_0x4f998e(0x165)]){const _0x4a3b71=await Note[_0x4f998e(0x186)](_0x3c0b11);if(!_0x4a3b71)throw new ErrorNotFound();const _0x259a70=await Note[_0x4f998e(0x8f)](_0x4a3b71[_0x4f998e(0x12c)]),_0x163f4a=[],_0x2235ef=this['defaultLoadOptions_'](_0x1cabb9);for(const _0x205b4d of _0x259a70){_0x163f4a[_0x4f998e(0x11b)](await Resource['load'](_0x205b4d,_0x2235ef));}return _0x163f4a;}else this[_0x4f998e(0x1bb)]()['warn'](_0x4f998e(0x99)+_0x2346ab[_0x4f998e(0x1b8)],_0x3f95ac);}else{if(_0x107b95){if(_0x4f998e(0xa1)!=='jOKdM'){if(_0xa0f77b[_0x4f998e(0x1b3)](_0x44179f[_0x4f998e(0x19c)],_0xa0f77b['LHLCN']))return'JoplinClipperServer';throw new _0x2092ef();}else throw new ErrorNotFound();}}}const _0x3616e9=this[_0x4f998e(0x170)](_0x1cabb9);return _0x3c0b11?await Note['preview'](_0x3c0b11,_0x3616e9):await Note[_0x4f998e(0x141)](null,_0x3616e9);}if(_0x1cabb9[_0x4f998e(0x19c)]===_0x4f998e(0x175)){const _0x1abbe6=Date[_0x4f998e(0xef)](),_0xa61a9=JSON['parse'](_0x1cabb9[_0x4f998e(0x12c)]),_0x21482e=_0xa0f77b[_0x4f998e(0x199)](urlUtils[_0x4f998e(0x1b9)](_0xa61a9[_0x4f998e(0x1b7)])[_0x4f998e(0x143)](),_0xa0f77b[_0x4f998e(0x17b)]),_0x5dd214=_0xa61a9['image_sizes']?_0xa61a9['image_sizes']:{};let _0x2c5050=await this[_0x4f998e(0x140)](_0xa61a9);const _0x101a81=ArrayUtils[_0x4f998e(0xb6)](markupLanguageUtils['extractImageUrls'](_0x2c5050['markup_language'],_0x2c5050['body']));this['logger']()['info'](_0x4f998e(0xea)+_0x1abbe6+'):\x20Downloading\x20images:\x20'+_0x101a81[_0x4f998e(0xfd)]);let _0x42ac98=await this[_0x4f998e(0x121)](_0x101a81,_0x21482e);this[_0x4f998e(0x1bb)]()[_0x4f998e(0x1ad)](_0x4f998e(0xea)+_0x1abbe6+'):\x20Creating\x20resources\x20from\x20paths:\x20'+Object['getOwnPropertyNames'](_0x42ac98)[_0x4f998e(0xfd)]),_0x42ac98=await this[_0x4f998e(0xda)](_0x42ac98),await this[_0x4f998e(0xa7)](_0x42ac98),_0x2c5050[_0x4f998e(0x12c)]=this[_0x4f998e(0xe4)](_0x2c5050[_0x4f998e(0x14c)],_0x2c5050[_0x4f998e(0x12c)],_0x42ac98,_0x5dd214),this[_0x4f998e(0x1bb)]()['info'](_0x4f998e(0xea)+_0x1abbe6+_0x4f998e(0x105));const _0x1c1c08=this[_0x4f998e(0x17e)](_0x2c5050,'POST');_0x1c1c08['autoTimestamp']=![];const _0x30eb38=Date[_0x4f998e(0xef)]();_0x2c5050[_0x4f998e(0x1a9)]=_0x30eb38,_0x2c5050[_0x4f998e(0xe1)]=_0x30eb38,_0x2c5050=await Note[_0x4f998e(0xf9)](_0x2c5050,_0x1c1c08);if(_0xa61a9[_0x4f998e(0x173)]){const _0x5dd4ef=_0xa61a9[_0x4f998e(0x173)][_0x4f998e(0xdc)](',');await Tag[_0x4f998e(0xf4)](_0x2c5050['id'],_0x5dd4ef);}return _0xa61a9[_0x4f998e(0x147)]&&(_0x2c5050=await this[_0x4f998e(0x16a)](_0x2c5050,_0xa61a9[_0x4f998e(0x147)],_0xa61a9[_0x4f998e(0x18e)])),this[_0x4f998e(0x1bb)]()['info'](_0x4f998e(0xea)+_0x1abbe6+_0x4f998e(0x9d)+_0x2c5050['id']),_0x2c5050;}if(_0xa0f77b['qXioc'](_0x1cabb9[_0x4f998e(0x19c)],_0xa0f77b['vqpeW'])){const _0xa50e9f=await Note['load'](_0x3c0b11);if(!_0xa50e9f)throw new ErrorNotFound();const _0x2f5532=await this['defaultAction_'](BaseModel[_0x4f998e(0xbf)],_0x1cabb9,_0x3c0b11,_0x107b95),_0x354443=JSON[_0x4f998e(0x148)](_0x1cabb9[_0x4f998e(0x12c)]);if(_0x354443['tags']||_0xa0f77b[_0x4f998e(0x199)](_0x354443['tags'],'')){const _0x1547a8=_0x354443[_0x4f998e(0x173)][_0x4f998e(0xdc)](',');await Tag[_0x4f998e(0xf4)](_0x3c0b11,_0x1547a8);}return _0x2f5532;}return this['defaultAction_'](BaseModel[_0x4f998e(0xbf)],_0x1cabb9,_0x3c0b11,_0x107b95);}[_0x48aa05(0xd1)](){const _0x1dc3c1=_0x48aa05;if(this[_0x1dc3c1(0xeb)])return this[_0x1dc3c1(0xeb)];return this[_0x1dc3c1(0xeb)]=new HtmlToMd(),this[_0x1dc3c1(0xeb)];}async[_0x48aa05(0x140)](_0x5e9ca4){const _0x618661=_0x48aa05,_0x2308c1={'icCgv':function(_0x2bde9e,_0x23cab4){return _0x2bde9e+_0x23cab4;},'EEEOr':function(_0x222cc7,_0x30292c){return _0x222cc7 in _0x30292c;},'VbJNX':function(_0x21782d,_0x1cff7c){return _0x21782d!==_0x1cff7c;},'QPhAo':function(_0x43309a,_0x2d83c0){return _0x43309a!==_0x2d83c0;},'VmJKM':function(_0x55cd9a,_0x444e66){return _0x55cd9a===_0x444e66;},'cMHqQ':'JTjCQ','CgTCC':_0x618661(0xd3),'IIPrv':function(_0x3347ab,_0x1a09ba){return _0x3347ab(_0x1a09ba);},'UEvnw':_0x618661(0xdf),'eiBCP':_0x618661(0x102),'UWOZY':function(_0x580ba7,_0x4dab22,_0x566ae7){return _0x580ba7(_0x4dab22,_0x566ae7);},'HMcqX':'iEvyr','TZFrW':_0x618661(0xaa),'YUuDd':_0x618661(0xd2),'kWCpp':function(_0x1a1cb5,_0x1f575e){return _0x1a1cb5 in _0x1f575e;},'GkWSP':function(_0x3039d9,_0x6168ae){return _0x3039d9 in _0x6168ae;},'aVvJn':_0x618661(0x14c)},_0x3a1523={'title':_0x5e9ca4['title']?_0x5e9ca4[_0x618661(0xae)]:'','body':_0x5e9ca4[_0x618661(0x12c)]?_0x5e9ca4['body']:''};if(_0x5e9ca4['id'])_0x3a1523['id']=_0x5e9ca4['id'];const _0x3512c8=_0x5e9ca4['base_url']?_0x5e9ca4[_0x618661(0x1b7)]:'';if(_0x5e9ca4[_0x618661(0x145)]){if(_0x2308c1[_0x618661(0x189)]('sgJWV',_0x2308c1[_0x618661(0xba)]))return _0x393d3c[_0x618661(0xab)](_0x1422d3);else{if(_0x2308c1[_0x618661(0x189)](_0x5e9ca4[_0x618661(0x1bd)],_0x2308c1[_0x618661(0xe7)])){const _0xe89814=await this['buildNoteStyleSheet_'](_0x5e9ca4[_0x618661(0x95)]),_0x124d9a=_0x2308c1[_0x618661(0x179)](require,_0x2308c1[_0x618661(0xca)])['minify'],_0x5203ca={'customAttrCollapse':/.*/,'collapseWhitespace':!![],'minifyCSS':!![],'maxLineLength':0x12c},_0xec4f2f=_0x2308c1[_0x618661(0x179)](require,_0x2308c1[_0x618661(0xb5)]),_0x2cd126=_0xec4f2f[_0x618661(0x1a8)](_0xe89814[_0x618661(0x10f)]('\x0a'),{'maxLineLen':0xc8}),_0x426a1e=_0xe89814[_0x618661(0xfd)]?_0x618661(0xfa)+_0x2cd126+_0x618661(0x138)+'\x0a':'';let _0x874655='';try{_0x874655=_0x2308c1['UWOZY'](_0x124d9a,_0x5e9ca4[_0x618661(0x145)],_0x5203ca);}catch(_0x31453a){if(_0x618661(0x176)===_0x2308c1[_0x618661(0xe0)]){const _0x49eeed=_0x5223b2[_0x3ef042];if(!_0x49eeed||!_0x49eeed[_0x618661(0x192)])return _0x2308c1[_0x618661(0xad)](_0x3f1304,_0x5269f9)+_0x4537cb;if(!_0x2308c1[_0x618661(0xb4)](_0x49eeed['originalUrl'],_0x4c77de))_0x158b83[_0x49eeed[_0x618661(0xa2)]]=0x0;const _0x1dfcdf=_0x30786e[_0x618661(0xb3)](_0x49eeed[_0x618661(0x192)]),_0x5bfb2e=_0x5961a6[_0x49eeed[_0x618661(0xa2)]];if(!_0x5bfb2e)return _0x2308c1[_0x618661(0xad)](_0x3b73b5+_0x1dfcdf,_0x275fed);const _0x118c1e=_0x5bfb2e[_0xaac305[_0x49eeed[_0x618661(0xa2)]]];return _0x163223[_0x49eeed[_0x618661(0xa2)]]++,_0x118c1e&&(_0x2308c1[_0x618661(0x132)](_0x118c1e[_0x618661(0x15e)],_0x118c1e['width'])||_0x2308c1[_0x618661(0x1ac)](_0x118c1e['naturalHeight'],_0x118c1e['height']))?_0x618661(0xec)+_0x118c1e['width']+'\x22\x20height=\x22'+_0x118c1e[_0x618661(0x18f)]+_0x618661(0x180)+_0x1dfcdf+_0x618661(0x1c9):_0x2308c1[_0x618661(0xad)](_0x3b602d,_0x1dfcdf)+_0x1157ed;}else console[_0x618661(0x19b)]('Could\x20not\x20minify\x20HTML\x20-\x20using\x20non-minified\x20HTML\x20instead',_0x31453a),_0x874655=_0x5e9ca4[_0x618661(0x145)];}_0x3a1523[_0x618661(0x12c)]=_0x426a1e+_0x874655,_0x3a1523[_0x618661(0x12c)]=htmlUtils[_0x618661(0x171)](_0x3a1523[_0x618661(0x12c)],_0x3512c8),_0x3a1523['markup_language']=MarkupToHtml[_0x618661(0x9a)];}else _0x2308c1[_0x618661(0x1ac)](_0x618661(0xaa),_0x2308c1[_0x618661(0x182)])?this['logger']()[_0x618661(0x19b)](_0x618661(0x17d)+_0x39ab92[_0x618661(0x198)],_0x208210):(_0x3a1523[_0x618661(0x12c)]=await this[_0x618661(0xd1)]()[_0x618661(0x148)](_0x618661(0xf0)+_0x5e9ca4[_0x618661(0x145)]+_0x618661(0xc8),{'baseUrl':_0x3512c8,'anchorNames':_0x5e9ca4['anchor_names']?_0x5e9ca4[_0x618661(0x155)]:[]}),_0x3a1523['markup_language']=MarkupToHtml['MARKUP_LANGUAGE_MARKDOWN']);}}if(_0x5e9ca4[_0x618661(0xbc)])_0x3a1523[_0x618661(0xbc)]=_0x5e9ca4[_0x618661(0xbc)];else{const _0x202fbf=await Folder[_0x618661(0x118)]();if(!_0x202fbf)throw new Error(_0x2308c1[_0x618661(0x11f)]);_0x3a1523[_0x618661(0xbc)]=_0x202fbf['id'];}if(_0x618661(0x1ba)in _0x5e9ca4)_0x3a1523[_0x618661(0x1ba)]=_0x5e9ca4[_0x618661(0x1ba)];if(_0x618661(0xb2)in _0x5e9ca4)_0x3a1523[_0x618661(0xb2)]=_0x5e9ca4['author'];if(_0x2308c1['kWCpp'](_0x618661(0x1cb),_0x5e9ca4))_0x3a1523[_0x618661(0x1cb)]=Database[_0x618661(0x156)](Database[_0x618661(0xa3)],_0x5e9ca4[_0x618661(0x1cb)]);if(_0x618661(0x10e)in _0x5e9ca4)_0x3a1523[_0x618661(0x10e)]=Database[_0x618661(0x156)](Database[_0x618661(0xa3)],_0x5e9ca4['user_created_time']);if(_0x2308c1['GkWSP'](_0x618661(0x144),_0x5e9ca4))_0x3a1523[_0x618661(0x144)]=Database[_0x618661(0x156)](Database['TYPE_INT'],_0x5e9ca4[_0x618661(0x144)]);if(_0x2308c1[_0x618661(0xfe)]in _0x5e9ca4)_0x3a1523[_0x618661(0x14c)]=Database[_0x618661(0x156)](Database[_0x618661(0xa3)],_0x5e9ca4['markup_language']);if(!_0x3a1523[_0x618661(0x14c)])_0x3a1523[_0x618661(0x14c)]=MarkupToHtml[_0x618661(0x10c)];return _0x3a1523;}async[_0x48aa05(0x16a)](_0x55d187,_0x3def13,_0x33d42a){const _0xab6ab5=_0x48aa05,_0x154243={'KEcEI':_0xab6ab5(0xc7),'LVWmE':function(_0xde0078,_0x12aca4){return _0xde0078(_0x12aca4);}},_0x5116ab=Setting[_0xab6ab5(0x198)](_0x154243[_0xab6ab5(0xd8)]),_0x58c0bd=mimeUtils[_0xab6ab5(0x161)](_0x3def13);let _0x2ab40a=mimeUtils[_0xab6ab5(0xb0)](_0x58c0bd)||'';if(_0x2ab40a)_0x2ab40a='.'+_0x2ab40a;const _0x3f46d4=_0x5116ab+'/'+_0x154243[_0xab6ab5(0x1b1)](md5,Math['random']()+'_'+Date[_0xab6ab5(0xef)]())+_0x2ab40a,_0x1113aa={};if(_0x33d42a)_0x1113aa[_0xab6ab5(0x195)]=_0x33d42a;return await shim[_0xab6ab5(0x1c6)](_0x3def13,_0x3f46d4,_0x1113aa),await shim['attachFileToNote'](_0x55d187,_0x3f46d4);}async['tryToGuessImageExtFromMimeType_'](_0x199996,_0x3d3652){const _0xe12bd8=_0x48aa05,_0xd21c94=netUtils[_0xe12bd8(0x166)](_0x199996[_0xe12bd8(0x183)]);if(!_0xd21c94)return _0x3d3652;const _0x2f812e=mimeUtils[_0xe12bd8(0xb0)](_0xd21c94);if(!_0x2f812e)return _0x3d3652;const _0x4745ca=_0x3d3652+'.'+_0x2f812e;return await shim[_0xe12bd8(0xd0)]()[_0xe12bd8(0x109)](_0x3d3652,_0x4745ca),_0x4745ca;}async['buildNoteStyleSheet_'](_0x7352d2){const _0x111cf9=_0x48aa05,_0x3140dc={'IFBcf':function(_0x4c7ec0,_0x184ae9){return _0x4c7ec0===_0x184ae9;},'QYTtg':'text','sArTE':'url','JAXMs':function(_0x2aef53,_0xa36ca){return _0x2aef53(_0xa36ca);}};if(!_0x7352d2)return[];const _0x3ea45d=[];for(const _0xa598fc of _0x7352d2){if(_0x3140dc[_0x111cf9(0x193)](_0xa598fc['type'],_0x3140dc[_0x111cf9(0x167)]))_0x3ea45d[_0x111cf9(0x11b)](_0xa598fc[_0x111cf9(0x198)]);else{if(_0xa598fc[_0x111cf9(0x169)]===_0x3140dc[_0x111cf9(0x17c)])try{const _0x478486=Setting[_0x111cf9(0x198)](_0x111cf9(0xc7))+'/'+_0x3140dc[_0x111cf9(0x136)](md5,Math[_0x111cf9(0x1c5)]()+'_'+Date[_0x111cf9(0xef)]())+_0x111cf9(0xcc);await shim[_0x111cf9(0xc6)](_0xa598fc[_0x111cf9(0x198)],{'path':_0x478486,'maxRetry':0x1});const _0x5d54b8=await shim[_0x111cf9(0xd0)]()[_0x111cf9(0xf6)](_0x478486);_0x3ea45d['push'](_0x5d54b8),await shim['fsDriver']()[_0x111cf9(0x152)](_0x478486);}catch(_0x423461){this[_0x111cf9(0x1bb)]()['warn'](_0x111cf9(0x17d)+_0xa598fc[_0x111cf9(0x198)],_0x423461);}else throw new Error(_0x111cf9(0xb9)+_0xa598fc[_0x111cf9(0x169)]);}}return _0x3ea45d;}async[_0x48aa05(0xe2)](_0xe75d7e){const _0x5379b2=_0x48aa05,_0x4bb534={'ECmRu':function(_0x20087a,_0x409ade){return _0x20087a===_0x409ade;},'hIyyt':_0x5379b2(0xc7),'QHENG':function(_0x3838b2,_0x494555){return _0x3838b2(_0x494555);},'NgoFR':function(_0x479a0c,_0x4cafe5){return _0x479a0c===_0x4cafe5;},'YaeId':'oMBFH','amGNR':_0x5379b2(0x159),'hjpBJ':_0x5379b2(0x137),'mEkfT':function(_0x3c905,_0x3b731d){return _0x3c905===_0x3b731d;},'NJSwu':function(_0x51446a,_0x42caba){return _0x51446a!==_0x42caba;}},_0x1b14ff=Setting['value'](_0x4bb534[_0x5379b2(0x13f)]),_0x3031f5=_0xe75d7e&&_0xe75d7e[_0x5379b2(0x143)]()[_0x5379b2(0x1bf)](_0x5379b2(0xcd))===0x0,_0x14bd3e=_0x3031f5?md5(Math[_0x5379b2(0x1c5)]()+'_'+Date['now']()):_0x4bb534[_0x5379b2(0x135)](filename,_0xe75d7e);let _0x2ef982=_0x3031f5?mimeUtils['toFileExtension'](mimeUtils['fromDataUrl'](_0xe75d7e)):_0x4bb534[_0x5379b2(0x135)](safeFileExtension,_0x4bb534[_0x5379b2(0x135)](fileExtension,_0xe75d7e)[_0x5379b2(0x143)]());if(!mimeUtils[_0x5379b2(0xaf)](_0x2ef982))_0x2ef982='';if(_0x2ef982)_0x2ef982='.'+_0x2ef982;let _0x15116b=_0x1b14ff+'/'+_0x4bb534[_0x5379b2(0x135)](safeFilename,_0x14bd3e)+'_'+uuid['create']()+_0x2ef982;try{if(_0x3031f5)_0x4bb534[_0x5379b2(0xdb)](_0x4bb534[_0x5379b2(0x122)],_0x4bb534[_0x5379b2(0x1ae)])?(_0x18e2a5=_0x2983a0[0x0],_0xbf65be['splice'](0x0,0x1),_0x52a08c[_0x5379b2(0xfd)]>=0x1&&(_0x17344f=_0x14aea9[0x0],_0x4f61d3['splice'](0x0,0x1))):await shim[_0x5379b2(0x1c6)](_0xe75d7e,_0x15116b);else{if(urlUtils[_0x5379b2(0x1b9)](_0xe75d7e)[_0x5379b2(0x143)]()===_0x4bb534[_0x5379b2(0xfc)]){const _0x5247b3=uri2path(_0xe75d7e);await shim[_0x5379b2(0xd0)]()[_0x5379b2(0x168)](_0x5247b3,_0x15116b);}else{if(_0x4bb534[_0x5379b2(0xfb)](_0x5379b2(0x13d),'bXiKF')){const _0xa0cfe0=await shim[_0x5379b2(0xc6)](_0xe75d7e,{'path':_0x15116b,'maxRetry':0x1});if(!_0x2ef982)_0x15116b=await this['tryToGuessImageExtFromMimeType_'](_0xa0cfe0,_0x15116b);}else return _0x4bb534[_0x5379b2(0xed)](typeof this['token_'],_0x5379b2(0xbe))?this[_0x5379b2(0x1b0)]():this[_0x5379b2(0x1b0)];}}return _0x15116b;}catch(_0x24671f){if(_0x4bb534[_0x5379b2(0x163)]('HVApP',_0x5379b2(0x11d))){const _0x269f63=_0x5d13a7[_0x41fd7a];if(!_0x269f63||!_0x269f63[_0x5379b2(0x192)])return _0x1d3f69;return _0x5eddac[_0x5379b2(0xb3)](_0x269f63[_0x5379b2(0x192)]);}else return this[_0x5379b2(0x1bb)]()[_0x5379b2(0x19b)](_0x5379b2(0x15a)+_0xe75d7e,_0x24671f),'';}}async['downloadImages_'](_0x45ae6d,_0x5ddf83){const _0x2d37f3=_0x48aa05,_0x2b8128={'bPpZB':function(_0x4e0161,_0x42f403){return _0x4e0161>=_0x42f403;},'XSuLz':function(_0x131dc3,_0x3cbdf4){return _0x131dc3(_0x3cbdf4);},'MvLru':_0x2d37f3(0x1cc)},_0x6438c=require(_0x2b8128[_0x2d37f3(0xb7)]),_0x30920e={},_0xf69ea=async _0x493a9d=>{const _0xc37372=await this['downloadImage_'](_0x493a9d,_0x5ddf83);if(_0xc37372)_0x30920e[_0x493a9d]={'path':_0xc37372,'originalUrl':_0x493a9d};};let _0x535e8=0x0;const _0x5986ae=()=>{const _0x315415=_0x2d37f3;if(_0x2b8128[_0x315415(0x1c7)](_0x535e8,_0x45ae6d[_0x315415(0xfd)]))return null;const _0x2aef40=_0x45ae6d[_0x535e8++];return _0x2b8128[_0x315415(0x10d)](_0xf69ea,_0x2aef40);},_0x36b61d=0xa,_0x35776c=new _0x6438c(_0x5986ae,_0x36b61d);return await _0x35776c[_0x2d37f3(0xc1)](),_0x30920e;}async[_0x48aa05(0xda)](_0x4ea889){const _0x9a64c7=_0x48aa05;for(const _0xac37ec in _0x4ea889){if(!_0x4ea889[_0x9a64c7(0xdd)](_0xac37ec))continue;const _0x18d0f0=_0x4ea889[_0xac37ec];try{const _0x4cf949=await shim[_0x9a64c7(0x190)](_0x18d0f0[_0x9a64c7(0x1b8)]);_0x18d0f0[_0x9a64c7(0x192)]=_0x4cf949;}catch(_0x1227bc){this[_0x9a64c7(0x1bb)]()[_0x9a64c7(0x19b)]('Cannot\x20create\x20resource\x20for\x20'+_0xac37ec,_0x1227bc);}}return _0x4ea889;}async[_0x48aa05(0xa7)](_0xb41f5e){const _0x25fda8=_0x48aa05;for(const _0x2aff80 in _0xb41f5e){if(!_0xb41f5e['hasOwnProperty'](_0x2aff80))continue;const _0x1c7d86=_0xb41f5e[_0x2aff80];try{await shim[_0x25fda8(0xd0)]()[_0x25fda8(0x152)](_0x1c7d86['path']);}catch(_0x50441c){this[_0x25fda8(0x1bb)]()['warn'](_0x25fda8(0x99)+_0x1c7d86['path'],_0x50441c);}}}[_0x48aa05(0xe4)](_0x2a9748,_0x2b51be,_0x392f51,_0x3a041e){const _0x369653=_0x48aa05,_0x2e5e9c={'SlPze':function(_0x87bb53,_0x5fc11b){return _0x87bb53+_0x5fc11b;},'rFLrh':function(_0x4404d3,_0x2e79f9){return _0x4404d3 in _0x2e79f9;},'lRtbz':function(_0x35c745,_0x2fe416){return _0x35c745!==_0x2fe416;},'aBGwm':function(_0x2ae7b4,_0x5e0fd5){return _0x2ae7b4+_0x5e0fd5;}},_0xeb809c={};return _0x2a9748===MarkupToHtml[_0x369653(0x9a)]?htmlUtils[_0x369653(0x19d)](_0x2b51be,_0x252c8b=>{const _0x1ae1ad=_0x369653,_0x33e20f=_0x392f51[_0x252c8b];if(!_0x33e20f||!_0x33e20f[_0x1ae1ad(0x192)])return _0x252c8b;return Resource[_0x1ae1ad(0xb3)](_0x33e20f['resource']);}):_0x2b51be[_0x369653(0x1a5)](/(!\[.*?\]\()([^\s\)]+)(.*?\))/g,(_0x558ff7,_0x57840c,_0x209f3f,_0x29a32c)=>{const _0x26b46a=_0x369653,_0x3b8041=_0x392f51[_0x209f3f];if(!_0x3b8041||!_0x3b8041[_0x26b46a(0x192)])return _0x2e5e9c[_0x26b46a(0x12d)](_0x57840c+_0x209f3f,_0x29a32c);if(!_0x2e5e9c[_0x26b46a(0x123)](_0x3b8041[_0x26b46a(0xa2)],_0xeb809c))_0xeb809c[_0x3b8041[_0x26b46a(0xa2)]]=0x0;const _0x15f177=Resource[_0x26b46a(0xb3)](_0x3b8041['resource']),_0x1d174c=_0x3a041e[_0x3b8041['originalUrl']];if(!_0x1d174c)return _0x2e5e9c[_0x26b46a(0x12d)](_0x57840c,_0x15f177)+_0x29a32c;const _0xe2836a=_0x1d174c[_0xeb809c[_0x3b8041[_0x26b46a(0xa2)]]];return _0xeb809c[_0x3b8041[_0x26b46a(0xa2)]]++,_0xe2836a&&(_0x2e5e9c[_0x26b46a(0x1bc)](_0xe2836a[_0x26b46a(0x15e)],_0xe2836a['width'])||_0xe2836a[_0x26b46a(0x12e)]!==_0xe2836a['height'])?_0x26b46a(0xec)+_0xe2836a[_0x26b46a(0x1ab)]+_0x26b46a(0x191)+_0xe2836a[_0x26b46a(0x18f)]+'\x22\x20src=\x22'+_0x15f177+_0x26b46a(0x1c9):_0x2e5e9c['aBGwm'](_0x57840c+_0x15f177,_0x29a32c);});}}function _0x5145(_0x1fb2ad,_0xcfbbd0){const _0x29aa88=_0x29aa();return _0x5145=function(_0x514573,_0x5d91b3){_0x514573=_0x514573-0x8f;let _0x143cc0=_0x29aa88[_0x514573];return _0x143cc0;},_0x5145(_0x1fb2ad,_0xcfbbd0);}module[_0x48aa05(0x1a2)]=Api;