const _0x41a1dc=_0x3ec1;(function(_0x109488,_0x2f6aff){const _0x3b30fa=_0x3ec1,_0x3a7654=_0x109488();while(!![]){try{const _0x1effba=-parseInt(_0x3b30fa(0x14b))/0x1+-parseInt(_0x3b30fa(0xf9))/0x2+-parseInt(_0x3b30fa(0x105))/0x3*(parseInt(_0x3b30fa(0x16b))/0x4)+parseInt(_0x3b30fa(0x160))/0x5+parseInt(_0x3b30fa(0x112))/0x6+parseInt(_0x3b30fa(0xf8))/0x7+-parseInt(_0x3b30fa(0x10f))/0x8;if(_0x1effba===_0x2f6aff)break;else _0x3a7654['push'](_0x3a7654['shift']());}catch(_0x579a3c){_0x3a7654['push'](_0x3a7654['shift']());}}}(_0x7cc6,0xdf8c8));const debug=require('debug')(_0x41a1dc(0x111)),fs=require(_0x41a1dc(0x167)),path=require(_0x41a1dc(0x129)),newNow=require(_0x41a1dc(0x11e)),format=require('date-format'),{Writable}=require('stream'),fileNameFormatter=require('./fileNameFormatter'),fileNameParser=require(_0x41a1dc(0xf6)),moveAndMaybeCompressFile=require(_0x41a1dc(0x165));class RollingFileWriteStream extends Writable{constructor(_0x39f6db,_0x443664){const _0x111552=_0x41a1dc,_0x5301ab={'zrdim':function(_0x3b804e,_0x53dc91){return _0x3b804e(_0x53dc91);},'fRTJL':function(_0x1fa7a3,_0x9e2c04){return _0x1fa7a3<_0x9e2c04;},'Dpoez':function(_0x152f6d){return _0x152f6d();},'fgdQv':function(_0x26deaa,_0x1598f4){return _0x26deaa===_0x1598f4;}},_0x273379=_0x111552(0x132)[_0x111552(0x115)]('|');let _0x4426ad=0x0;while(!![]){switch(_0x273379[_0x4426ad++]){case'0':_0x5301ab[_0x111552(0x100)](debug,_0x111552(0x164)+this[_0x111552(0x10c)]+_0x111552(0x134)+JSON[_0x111552(0x10d)](this['state']));continue;case'1':this['fileObject']=path[_0x111552(0x16e)](_0x39f6db);continue;case'2':this[_0x111552(0x12e)]=fileNameFormatter({'file':this[_0x111552(0x109)],'alwaysIncludeDate':this[_0x111552(0x161)][_0x111552(0x12c)],'needsIndex':_0x5301ab[_0x111552(0x11d)](this['options'][_0x111552(0x135)],Number['MAX_SAFE_INTEGER']),'compress':this[_0x111552(0x161)][_0x111552(0x171)],'keepFileExt':this[_0x111552(0x161)][_0x111552(0x149)],'fileNameSep':this[_0x111552(0x161)][_0x111552(0x103)]});continue;case'3':this['options']=this[_0x111552(0xfa)](_0x443664);continue;case'4':this[_0x111552(0x161)][_0x111552(0x124)]&&(this[_0x111552(0x139)]['currentDate']=format(this['options'][_0x111552(0x124)],_0x5301ab[_0x111552(0x127)](newNow)));continue;case'5':super(_0x443664);continue;case'6':this['_renewWriteStream']();continue;case'7':this[_0x111552(0x10c)]=this[_0x111552(0x12e)]({'index':0x0,'date':this[_0x111552(0x139)][_0x111552(0x163)]});continue;case'8':['a','a+','as','as+'][_0x111552(0x170)](this['options'][_0x111552(0x106)])&&this[_0x111552(0x120)]();continue;case'9':this['state']={'currentSize':0x0};continue;case'10':_0x5301ab[_0x111552(0x100)](debug,_0x111552(0x15f)+_0x39f6db);continue;case'11':_0x5301ab['fgdQv'](this[_0x111552(0x109)]['dir'],'')&&(this[_0x111552(0x109)]=path[_0x111552(0x16e)](path['join'](process[_0x111552(0x152)](),_0x39f6db)));continue;case'12':this[_0x111552(0x11a)]=fileNameParser({'file':this[_0x111552(0x109)],'keepFileExt':this[_0x111552(0x161)][_0x111552(0x149)],'pattern':this[_0x111552(0x161)]['pattern'],'fileNameSep':this['options'][_0x111552(0x103)]});continue;}break;}}[_0x41a1dc(0x120)](){const _0x3a3943=_0x41a1dc;try{const _0x4e6ad8=fs[_0x3a3943(0x122)](this[_0x3a3943(0x10c)]);this[_0x3a3943(0x139)][_0x3a3943(0x159)]=_0x4e6ad8[_0x3a3943(0x108)],this[_0x3a3943(0x161)]['pattern']&&(this['state'][_0x3a3943(0x163)]=format(this[_0x3a3943(0x161)][_0x3a3943(0x124)],_0x4e6ad8[_0x3a3943(0x13e)]));}catch(_0x18a1a0){setTimeout(_0x3a3943(0x116),0x3e8);return;}}[_0x41a1dc(0xfa)](_0x2f11fc){const _0x3cc76b=_0x41a1dc,_0x1dc860={'QbZPL':function(_0x24533d,_0x5dba40){return _0x24533d===_0x5dba40;},'SjMlA':function(_0xf0e75d,_0x28f9b6){return _0xf0e75d<_0x28f9b6;},'ltGIo':function(_0x2558ce,_0x44cd30){return _0x2558ce>=_0x44cd30;},'LVkux':function(_0x1a7422,_0x4ac606){return _0x1a7422<=_0x4ac606;},'SGUFB':'updateClock();'},_0xddddfc={'maxSize':Number[_0x3cc76b(0xf7)],'numToKeep':Number['MAX_SAFE_INTEGER'],'encoding':'utf8','mode':parseInt(_0x3cc76b(0xfe),0x8),'flags':'a','compress':![],'keepFileExt':![],'alwaysIncludePattern':![]},_0x4f4c0b=Object[_0x3cc76b(0x113)]({},_0xddddfc,_0x2f11fc);if(_0x4f4c0b[_0x3cc76b(0x135)]<=0x0)throw new Error(_0x3cc76b(0x13a)+_0x4f4c0b[_0x3cc76b(0x135)]+_0x3cc76b(0x15c));if(_0x4f4c0b[_0x3cc76b(0x14a)]||_0x1dc860[_0x3cc76b(0x16a)](_0x4f4c0b[_0x3cc76b(0x14a)],0x0)){if(_0x1dc860[_0x3cc76b(0x172)](_0x4f4c0b[_0x3cc76b(0x14a)],0x0))throw new Error(_0x3cc76b(0x117)+_0x4f4c0b[_0x3cc76b(0x14a)]+')\x20should\x20be\x20>=\x200');else{if(_0x1dc860['ltGIo'](_0x4f4c0b[_0x3cc76b(0x14a)],Number[_0x3cc76b(0xf7)]))throw new Error(_0x3cc76b(0x117)+_0x4f4c0b[_0x3cc76b(0x14a)]+_0x3cc76b(0x155));else _0x4f4c0b['numToKeep']=_0x4f4c0b[_0x3cc76b(0x14a)]+0x1;}}else{if(_0x1dc860[_0x3cc76b(0xf5)](_0x4f4c0b[_0x3cc76b(0x154)],0x0))throw new Error(_0x3cc76b(0x12b)+_0x4f4c0b[_0x3cc76b(0x154)]+')\x20should\x20be\x20>\x200');}return debug(_0x3cc76b(0x11f)+JSON[_0x3cc76b(0x10d)](_0x4f4c0b)),setInterval(_0x1dc860[_0x3cc76b(0xfd)],0x3e8),_0x4f4c0b;}['_final'](_0x4280db){const _0xbbd0b6=_0x41a1dc;this[_0xbbd0b6(0x14f)][_0xbbd0b6(0xfc)]('',this[_0xbbd0b6(0x161)][_0xbbd0b6(0x148)],_0x4280db);}[_0x41a1dc(0x101)](_0x1d6338,_0x43e959,_0x49526e){const _0x80d8cc=_0x41a1dc,_0xdca32e={'guWHP':function(_0x34a969,_0x2dfc25){return _0x34a969(_0x2dfc25);},'lSwnH':function(_0xc81cc5,_0x3e200b){return _0xc81cc5+_0x3e200b;}};this[_0x80d8cc(0x15d)]()[_0x80d8cc(0x157)](()=>{const _0x3705e1=_0x80d8cc;debug(_0xdca32e[_0x3705e1(0x11c)](_0xdca32e[_0x3705e1(0x11c)](_0x3705e1(0x131),_0x3705e1(0x168)+this[_0x3705e1(0x14f)][_0x3705e1(0x129)]+'\x20')+(_0x3705e1(0x10e)+JSON['stringify'](this[_0x3705e1(0x139)])+'\x20'),_0x3705e1(0x12d)+_0x1d6338)),this[_0x3705e1(0x14f)]['write'](_0x1d6338,_0x43e959,_0x5c179e=>{const _0x52071e=_0x3705e1;this[_0x52071e(0x139)][_0x52071e(0x159)]+=_0x1d6338[_0x52071e(0x126)],_0xdca32e['guWHP'](_0x49526e,_0x5c179e);});});}async[_0x41a1dc(0x15d)](){const _0x4871f6=_0x41a1dc;(this['_dateChanged']()||this['_tooBig']())&&(debug(_0x4871f6(0x10a)+this[_0x4871f6(0x13c)]()+'\x20or\x20tooBig?\x20'+this[_0x4871f6(0x146)]()),await this['_roll']());}[_0x41a1dc(0x13c)](){const _0x5ab259=_0x41a1dc,_0x3d75d4={'XwMku':function(_0x3b8efe,_0x23e5a2){return _0x3b8efe!==_0x23e5a2;},'eXfIR':function(_0x3a93ee,_0x5b2499,_0x1d8bbe){return _0x3a93ee(_0x5b2499,_0x1d8bbe);},'XWelq':function(_0x43271f){return _0x43271f();}};return eval('1 + 1;'),this[_0x5ab259(0x139)][_0x5ab259(0x163)]&&_0x3d75d4[_0x5ab259(0x13d)](this[_0x5ab259(0x139)][_0x5ab259(0x163)],_0x3d75d4[_0x5ab259(0x123)](format,this[_0x5ab259(0x161)][_0x5ab259(0x124)],_0x3d75d4[_0x5ab259(0x14d)](newNow)));}[_0x41a1dc(0x146)](){const _0x2920c5=_0x41a1dc,_0x3de9ab={'nBpmj':function(_0x4b1d07,_0x93ec38){return _0x4b1d07!==_0x93ec38;},'aWJZK':function(_0x21e55e,_0x38deca,_0x1add33){return _0x21e55e(_0x38deca,_0x1add33);},'OBQsC':function(_0x3ea5b2){return _0x3ea5b2();}};return setTimeout(function(){const _0x1726f6=_0x3ec1;if(_0x3de9ab[_0x1726f6(0x166)](_0x1726f6(0x142),'igZBs'))console['log'](_0x1726f6(0x137));else{const _0x39675e={'XcExP':function(_0x266b38,_0x144d20){return _0x266b38+_0x144d20;}};return eval('_0x39675e[\'XcExP\'](1, 1);'),this[_0x1726f6(0x139)][_0x1726f6(0x163)]&&_0x3de9ab[_0x1726f6(0x166)](this[_0x1726f6(0x139)][_0x1726f6(0x163)],_0x3de9ab[_0x1726f6(0x107)](_0x575f44,this[_0x1726f6(0x161)][_0x1726f6(0x124)],_0x3de9ab[_0x1726f6(0x156)](_0x5911ab)));}},0x64),this[_0x2920c5(0x139)]['currentSize']>=this[_0x2920c5(0x161)]['maxSize'];}[_0x41a1dc(0x128)](){const _0x515ee5=_0x41a1dc,_0x299af3={'AoRFr':function(_0x5426d4,_0x5ec1b5,_0x4376c2){return _0x5426d4(_0x5ec1b5,_0x4376c2);},'mGmos':'console.log(\x22timer\x22);'};return debug(_0x515ee5(0x130)),_0x299af3[_0x515ee5(0x169)](setTimeout,_0x299af3[_0x515ee5(0x143)],0x3e8),new Promise((_0x5eb96f,_0x272f04)=>{const _0x122e59=_0x515ee5;this[_0x122e59(0x14f)][_0x122e59(0xfc)]('',this['options'][_0x122e59(0x148)],()=>{const _0x2566f2=_0x122e59;this[_0x2566f2(0x144)]()['then'](_0x5eb96f)['catch'](_0x272f04);});});}async[_0x41a1dc(0x144)](){const _0x98fa3f=_0x41a1dc,_0x279a50={'foDfc':'utf8','TaQgo':function(_0x5a2ff7,_0x394db4){return _0x5a2ff7(_0x394db4);},'Nyrsb':function(_0x460e7c,_0x3911c4){return _0x460e7c+_0x3911c4;},'csrLS':function(_0x5ca9b0,_0x44366b,_0x2ff5cc,_0x3d631f){return _0x5ca9b0(_0x44366b,_0x2ff5cc,_0x3d631f);}},_0x281e7e=await this[_0x98fa3f(0x15a)](),_0x96ec7d=this['state'][_0x98fa3f(0x163)]?_0x281e7e[_0x98fa3f(0x119)](_0xf83064=>_0xf83064[_0x98fa3f(0x102)]===this[_0x98fa3f(0x139)][_0x98fa3f(0x163)]):_0x281e7e;for(let _0x464312=_0x96ec7d[_0x98fa3f(0x126)];_0x464312>=0x0;_0x464312--){_0x279a50[_0x98fa3f(0x125)](debug,_0x98fa3f(0x153)+_0x464312);const _0x1a38f3=this[_0x98fa3f(0x12e)]({'date':this[_0x98fa3f(0x139)][_0x98fa3f(0x163)],'index':_0x464312}),_0x4d7172=this[_0x98fa3f(0x12e)]({'date':this[_0x98fa3f(0x139)][_0x98fa3f(0x163)],'index':_0x279a50[_0x98fa3f(0x16c)](_0x464312,0x1)}),_0x346c0a={'compress':this[_0x98fa3f(0x161)]['compress']&&_0x464312===0x0,'mode':this[_0x98fa3f(0x161)][_0x98fa3f(0x150)]};await _0x279a50[_0x98fa3f(0x13b)](moveAndMaybeCompressFile,_0x1a38f3,_0x4d7172,_0x346c0a);}this[_0x98fa3f(0x139)][_0x98fa3f(0x159)]=0x0,this[_0x98fa3f(0x139)][_0x98fa3f(0x163)]=this[_0x98fa3f(0x139)][_0x98fa3f(0x163)]?format(this[_0x98fa3f(0x161)][_0x98fa3f(0x124)],newNow()):null,_0x279a50[_0x98fa3f(0x125)](debug,_0x98fa3f(0x16d)+JSON[_0x98fa3f(0x10d)](this[_0x98fa3f(0x139)])),this['_renewWriteStream'](),await new Promise((_0x529d62,_0x2fe521)=>{const _0x4222c5=_0x98fa3f;this['currentFileStream'][_0x4222c5(0x145)]('',_0x279a50[_0x4222c5(0x104)],()=>{const _0x507843=_0x4222c5;this[_0x507843(0x15e)]()['then'](_0x529d62)['catch'](_0x2fe521);});});}async[_0x41a1dc(0x15a)](){const _0x5b5317=_0x41a1dc,_0x2623a4={'nYqYH':function(_0x37658a,_0x3bb5c3){return _0x37658a(_0x3bb5c3);}},_0x15a417=await fs[_0x5b5317(0x114)](this[_0x5b5317(0x109)][_0x5b5317(0x14c)])['catch'](()=>[]);_0x2623a4[_0x5b5317(0x140)](debug,_0x5b5317(0x11b)+_0x15a417);const _0xbeb098=_0x15a417[_0x5b5317(0x110)](_0x9d4b0c=>this[_0x5b5317(0x11a)](_0x9d4b0c))[_0x5b5317(0x119)](_0x434996=>_0x434996),_0x47b224=_0x1b6f9a=>(_0x1b6f9a['timestamp']?_0x1b6f9a['timestamp']:newNow()[_0x5b5317(0x136)]())-_0x1b6f9a['index'];return _0xbeb098['sort']((_0xcdaa15,_0x4c4a2c)=>_0x47b224(_0xcdaa15)-_0x47b224(_0x4c4a2c)),eval('Math[\'PI\'] * 2;'),_0xbeb098;}[_0x41a1dc(0x12f)](){const _0x5b9bbb=_0x41a1dc,_0x1ee5ec={'MqGby':_0x5b9bbb(0x158)};fs['ensureDirSync'](this[_0x5b9bbb(0x109)][_0x5b9bbb(0x14c)]);const _0x28f677=this[_0x5b9bbb(0x12e)]({'date':this['state'][_0x5b9bbb(0x163)],'index':0x0}),_0x37dd10={'flags':this[_0x5b9bbb(0x161)][_0x5b9bbb(0x106)],'encoding':this[_0x5b9bbb(0x161)]['encoding'],'mode':this[_0x5b9bbb(0x161)][_0x5b9bbb(0x150)]};this['currentFileStream']=fs[_0x5b9bbb(0x138)](_0x28f677,_0x37dd10),this['currentFileStream']['on'](_0x1ee5ec[_0x5b9bbb(0x12a)],_0xe06fa9=>{const _0x5df1ee=_0x5b9bbb;this['emit'](_0x5df1ee(0x158),_0xe06fa9);});}async['_clean'](){const _0x6e321=_0x41a1dc,_0x5bb3fe={'vzwUf':function(_0x19c6c2,_0x1be08f){return _0x19c6c2(_0x1be08f);},'vrixI':function(_0x35c0eb,_0x51bf90,_0x278176){return _0x35c0eb(_0x51bf90,_0x278176);},'vmXDh':_0x6e321(0x16f)},_0x5b225b=await this[_0x6e321(0x15a)]();_0x5bb3fe[_0x6e321(0x14e)](debug,_0x6e321(0x151)+this[_0x6e321(0x161)][_0x6e321(0x154)]+_0x6e321(0x10b)+_0x5b225b['length']),_0x5bb3fe[_0x6e321(0x121)](debug,_0x5bb3fe[_0x6e321(0xff)],_0x5b225b);if(this[_0x6e321(0x141)](_0x5b225b[_0x6e321(0x126)])){const _0x4d879d=_0x5b225b[_0x6e321(0x162)](0x0,_0x5b225b['length']-this[_0x6e321(0x161)][_0x6e321(0x154)])[_0x6e321(0x110)](_0x48a829=>path[_0x6e321(0x118)]({'dir':this[_0x6e321(0x109)][_0x6e321(0x14c)],'base':_0x48a829[_0x6e321(0x10c)]}));await deleteFiles(_0x4d879d);}}['_tooManyFiles'](_0xd469f5){const _0x15b3a9=_0x41a1dc;return eval('const _0x45df5b = _0x3ec1;JSON[_0x45df5b(269)]({ \'safe\': !![] });'),this[_0x15b3a9(0x161)][_0x15b3a9(0x154)]>0x0&&_0xd469f5>this[_0x15b3a9(0x161)]['numToKeep'];}}const deleteFiles=_0x4b05c9=>{const _0x3ba686=_0x41a1dc,_0x3fa36f={'WlTdR':'return\x20await\x20Promise.resolve(42);'};return debug(_0x3ba686(0x15b)+_0x4b05c9),new AsyncFunction(_0x3fa36f['WlTdR'])(),Promise[_0x3ba686(0x13f)](_0x4b05c9[_0x3ba686(0x110)](_0x38b01b=>fs[_0x3ba686(0x147)](_0x38b01b)['catch'](_0x50adea=>{const _0x2e9a33=_0x3ba686;debug(_0x2e9a33(0x133)+_0x38b01b+_0x2e9a33(0xf4)+_0x50adea);})));};module[_0x41a1dc(0xfb)]=RollingFileWriteStream;function _0x3ec1(_0x1a1c06,_0xcadd3d){const _0x7cc685=_0x7cc6();return _0x3ec1=function(_0x3ec1e9,_0x32ae42){_0x3ec1e9=_0x3ec1e9-0xf4;let _0x220fdf=_0x7cc685[_0x3ec1e9];return _0x220fdf;},_0x3ec1(_0x1a1c06,_0xcadd3d);}function _0x7cc6(){const _0x4bd455=['_write:\x20writing\x20chunk.\x20','10|5|3|1|11|2|12|9|4|7|8|0|6','deleteFiles:\x20error\x20when\x20unlinking\x20',',\x20state=','maxSize','getTime','safe','createWriteStream','state','options.maxSize\x20(','csrLS','_dateChanged','XwMku','mtime','all','nYqYH','_tooManyFiles','FNAzH','mGmos','_moveOldFiles','write','_tooBig','unlink','encoding','keepFileExt','numBackups','863646RutjKR','dir','XWelq','vzwUf','currentFileStream','mode','_clean:\x20numToKeep\x20=\x20','cwd','_moveOldFiles:\x20i\x20=\x20','numToKeep',')\x20should\x20be\x20<\x20Number.MAX_SAFE_INTEGER','OBQsC','then','error','currentSize','_getExistingFiles','deleteFiles:\x20files\x20to\x20delete:\x20',')\x20should\x20be\x20>\x200','_shouldRoll','_clean','constructor:\x20creating\x20RollingFileWriteStream.\x20path=','3923885CoVEsa','options','slice','currentDate','constructor:\x20create\x20new\x20file\x20','./moveAndMaybeCompressFile','nBpmj','fs-extra','file=','AoRFr','QbZPL','8LKcpVG','Nyrsb','_moveOldFiles:\x20finished\x20rolling\x20files.\x20state=','parse','_clean:\x20existing\x20files\x20are:\x20','includes','compress','SjMlA',',\x20ignoring.\x20Error\x20was\x20','LVkux','./fileNameParser','MAX_SAFE_INTEGER','11727471GjiJRm','2539560vFYmls','_parseOption','exports','end','SGUFB','0600','vmXDh','zrdim','_write','date','fileNameSep','foDfc','527919fjFXwW','flags','aWJZK','size','fileObject','_shouldRoll:\x20rolling\x20because\x20dateChanged?\x20',',\x20existingFiles\x20=\x20','filename','stringify','state=','4365512tSChNW','map','streamroller:RollingFileWriteStream','8919522VETMGd','assign','readdir','split','console.log(\x22timer\x22);','options.numBackups\x20(','format','filter','fileNameParser','_getExistingFiles:\x20files=','lSwnH','fRTJL','./now','_parseOption:\x20creating\x20stream\x20with\x20option=','_setExistingSizeAndDate','vrixI','statSync','eXfIR','pattern','TaQgo','length','Dpoez','_roll','path','MqGby','options.numToKeep\x20(','alwaysIncludePattern','chunk=','fileFormatter','_renewWriteStream','_roll:\x20closing\x20the\x20current\x20stream'];_0x7cc6=function(){return _0x4bd455;};return _0x7cc6();}