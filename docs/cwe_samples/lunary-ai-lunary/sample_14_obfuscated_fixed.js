const _0x1c3e2f=_0x4910;(function(_0x3c4133,_0x1592da){const _0x5e968e=_0x4910,_0x492729=_0x3c4133();while(!![]){try{const _0x369a3d=parseInt(_0x5e968e(0x102))/0x1*(parseInt(_0x5e968e(0x107))/0x2)+-parseInt(_0x5e968e(0x13e))/0x3*(parseInt(_0x5e968e(0xc0))/0x4)+-parseInt(_0x5e968e(0xf3))/0x5+-parseInt(_0x5e968e(0xeb))/0x6*(-parseInt(_0x5e968e(0xde))/0x7)+parseInt(_0x5e968e(0xac))/0x8*(-parseInt(_0x5e968e(0x127))/0x9)+-parseInt(_0x5e968e(0xad))/0xa+parseInt(_0x5e968e(0x149))/0xb*(parseInt(_0x5e968e(0x132))/0xc);if(_0x369a3d===_0x1592da)break;else _0x492729['push'](_0x492729['shift']());}catch(_0x2e67dc){_0x492729['push'](_0x492729['shift']());}}}(_0x5983,0xac9eb));function _0x4910(_0xd250e6,_0x10cc66){const _0x598390=_0x5983();return _0x4910=function(_0x49109d,_0x155ebe){_0x49109d=_0x49109d-0x9d;let _0x411ce6=_0x598390[_0x49109d];return _0x411ce6;},_0x4910(_0xd250e6,_0x10cc66);}const {Database}=require(_0x1c3e2f(0xb8)),{uuid}=require(_0x1c3e2f(0xd7)),{time}=require('lib/time-utils.js'),Mutex=require('async-mutex')[_0x1c3e2f(0xca)];class BaseModel{static[_0x1c3e2f(0xe1)](){const _0x431782={'evcLv':'Must\x20be\x20overriden'};throw new Error(_0x431782['evcLv']);}static[_0x1c3e2f(0x15b)](){const _0x32df4c=_0x1c3e2f,_0x1d6c6f={'pmqrI':_0x32df4c(0x141)};throw new Error(_0x1d6c6f[_0x32df4c(0xcc)]);}static[_0x1c3e2f(0x15f)](_0x1a6e33){const _0x2a414d=_0x1c3e2f;this[_0x2a414d(0x11b)]=_0x1a6e33;}static[_0x1c3e2f(0xfe)](_0x53243c){const _0x504e04=_0x1c3e2f;if(!_0x53243c)return _0x53243c;if(Array[_0x504e04(0xab)](_0x53243c)){const _0x21b107=[];for(let _0x39d9be=0x0;_0x39d9be<_0x53243c[_0x504e04(0xbb)];_0x39d9be++){_0x21b107['push'](this[_0x504e04(0xfe)](_0x53243c[_0x39d9be]));}return _0x21b107;}else return _0x53243c=Object[_0x504e04(0x14e)]({},_0x53243c),_0x53243c[_0x504e04(0x112)]=this['modelType'](),_0x53243c;}static[_0x1c3e2f(0xc6)](){const _0xe5c0ad=_0x1c3e2f;return this['db']()[_0xe5c0ad(0xc6)]();}static[_0x1c3e2f(0xba)](){return![];}static[_0x1c3e2f(0xdd)](_0xf3c63d,_0xde7412){const _0x32792b=_0x1c3e2f,_0x57abc9={'dURrJ':function(_0x1446af,_0x24693d){return _0x1446af<_0x24693d;},'jZQtK':function(_0x17724a,_0x5fec30){return _0x17724a==_0x5fec30;}};for(let _0x41572f=0x0;_0x57abc9[_0x32792b(0xd2)](_0x41572f,_0xf3c63d[_0x32792b(0xbb)]);_0x41572f++){if(_0x57abc9[_0x32792b(0xcd)](_0xf3c63d[_0x41572f]['id'],_0xde7412))return _0xf3c63d[_0x41572f];}return null;}static[_0x1c3e2f(0xc3)](_0xed0b95){const _0x4142d6=_0x1c3e2f,_0x2feb61={};for(const _0x128911 of _0xed0b95){_0x2feb61[_0x128911]=this['db']()[_0x4142d6(0x126)](this[_0x4142d6(0x15b)](),_0x128911);}return _0x2feb61;}static[_0x1c3e2f(0xb3)](_0x188f86,_0x556713){const _0x3c2c59=_0x1c3e2f;for(let _0x271bd2=0x0;_0x271bd2<_0x188f86[_0x3c2c59(0xbb)];_0x271bd2++){if(_0x188f86[_0x271bd2]['id']==_0x556713)return _0x271bd2;}return-0x1;}static[_0x1c3e2f(0xec)](_0x2da176,_0x35205f){const _0x26e8e4=_0x1c3e2f,_0x5c7943={'Jtqat':function(_0x493ae4,_0x5aaa67){return _0x493ae4<_0x5aaa67;},'Zhibk':function(_0x27a9f2,_0x10d290){return _0x27a9f2>=_0x10d290;}},_0x1c67b2=[];for(let _0x39f8d5=0x0;_0x5c7943[_0x26e8e4(0x14d)](_0x39f8d5,_0x2da176[_0x26e8e4(0xbb)]);_0x39f8d5++){_0x5c7943[_0x26e8e4(0x155)](_0x35205f['indexOf'](_0x2da176[_0x39f8d5]['id']),0x0)&&_0x1c67b2['push'](_0x2da176[_0x39f8d5]);}return _0x1c67b2;}static['idsEqual'](_0x4f473a,_0x49a529){const _0x2fb936=_0x1c3e2f,_0x397564={'PbUym':function(_0x825e6e,_0x326222){return _0x825e6e&&_0x326222;}};if(_0x397564[_0x2fb936(0x140)](!_0x4f473a,!_0x49a529))return!![];if(!_0x4f473a&&!!_0x49a529)return![];if(_0x397564[_0x2fb936(0x140)](!!_0x4f473a,!_0x49a529))return![];return _0x4f473a===_0x49a529;}static[_0x1c3e2f(0x152)](_0x5533e4){const _0x45a76e=_0x1c3e2f,_0x2e4ff0={'uSuoK':function(_0x40494d,_0x3fd9d8){return _0x40494d<_0x3fd9d8;}};for(let _0x2e6e1d=0x0;_0x2e4ff0[_0x45a76e(0xc5)](_0x2e6e1d,BaseModel[_0x45a76e(0xe3)][_0x45a76e(0xbb)]);_0x2e6e1d++){const _0x113ddf=BaseModel[_0x45a76e(0xe3)][_0x2e6e1d];if(_0x113ddf[0x1]===_0x5533e4)return _0x113ddf[0x0][_0x45a76e(0xcf)](0x5)[_0x45a76e(0x111)]();}throw new Error(_0x45a76e(0xd6)+_0x5533e4);}static[_0x1c3e2f(0xd0)](_0x113129){const _0x22298d=_0x1c3e2f;for(let _0x4ecd05=0x0;_0x4ecd05<BaseModel[_0x22298d(0xe3)][_0x22298d(0xbb)];_0x4ecd05++){const _0x30a036=BaseModel[_0x22298d(0xe3)][_0x4ecd05],_0x4f98b3=_0x30a036[0x0][_0x22298d(0xcf)](0x5)[_0x22298d(0x111)]();if(_0x4f98b3===_0x113129)return _0x30a036[0x1];}throw new Error(_0x22298d(0xbe)+_0x113129);}static['hasField'](_0x54bd74){const _0x11c4b3=_0x1c3e2f,_0x1cc40f={'evYhn':function(_0x3ce0a6,_0x36e00c){return _0x3ce0a6>=_0x36e00c;}},_0xfaa88b=this[_0x11c4b3(0x109)]();return _0x1cc40f[_0x11c4b3(0x15d)](_0xfaa88b[_0x11c4b3(0x108)](_0x54bd74),0x0);}static[_0x1c3e2f(0x109)](_0x57cb9f=![]){const _0x5b60ac=_0x1c3e2f,_0x4c9e8c={'SEVZp':function(_0xeb900c,_0x592128){return _0xeb900c===_0x592128;}},_0x3bce8e=this['db']()[_0x5b60ac(0x157)](this[_0x5b60ac(0x15b)]());if(!_0x57cb9f)return _0x3bce8e;const _0x5316d2=_0x4c9e8c[_0x5b60ac(0x11d)](_0x57cb9f,!![])?this[_0x5b60ac(0x15b)]():_0x57cb9f,_0x2a78c0=[];for(let _0x1f12de=0x0;_0x1f12de<_0x3bce8e[_0x5b60ac(0xbb)];_0x1f12de++){_0x2a78c0[_0x5b60ac(0x15c)](_0x5316d2+'.'+_0x3bce8e[_0x1f12de]);}return _0x2a78c0;}static['fieldType'](_0x334a6d,_0x10a30e=null){const _0x50824a=_0x1c3e2f,_0xb23da={'VtdHF':function(_0x3f665c,_0x5dd0cf){return _0x3f665c<_0x5dd0cf;},'PlNGv':function(_0x428c97,_0x501196){return _0x428c97==_0x501196;}},_0x4a1b83=this[_0x50824a(0x11a)]();for(let _0xc4eb95=0x0;_0xb23da[_0x50824a(0x11e)](_0xc4eb95,_0x4a1b83[_0x50824a(0xbb)]);_0xc4eb95++){if(_0xb23da[_0x50824a(0x128)](_0x4a1b83[_0xc4eb95][_0x50824a(0x114)],_0x334a6d))return _0x4a1b83[_0xc4eb95][_0x50824a(0x160)];}if(_0x10a30e!==null)return _0x10a30e;throw new Error(_0x50824a(0x124)+_0x334a6d);}static[_0x1c3e2f(0x11a)](){const _0x59738f=_0x1c3e2f;return this['db']()[_0x59738f(0x10a)](this[_0x59738f(0x15b)]());}static[_0x1c3e2f(0x142)](_0x1b2fe4){const _0x15de4e=_0x1c3e2f,_0x7efd1f={'cECDM':function(_0x4c95dd,_0x4f5d88){return _0x4c95dd!==_0x4f5d88;},'eKUWP':'type_'},_0x4547c8={};for(const _0x1a36c6 in _0x1b2fe4){if(!_0x1b2fe4['hasOwnProperty'](_0x1a36c6))continue;if(!this[_0x15de4e(0xae)](_0x1a36c6)&&_0x7efd1f['cECDM'](_0x1a36c6,_0x7efd1f[_0x15de4e(0xf0)]))continue;_0x4547c8[_0x1a36c6]=_0x1b2fe4[_0x1a36c6];}return _0x4547c8;}static[_0x1c3e2f(0x159)](){const _0x21e0de=_0x1c3e2f,_0x7cc72e={'zNkyt':function(_0x52c44d,_0x1440a0){return _0x52c44d!==_0x1440a0;},'zSzwd':'JZZvj'},_0x1758db=this[_0x21e0de(0x11a)](),_0x22a388={};for(let _0x1a5822=0x0;_0x1a5822<_0x1758db[_0x21e0de(0xbb)];_0x1a5822++){if(_0x7cc72e[_0x21e0de(0x12a)](_0x7cc72e['zSzwd'],'MJvqW')){const _0x42b45e=_0x1758db[_0x1a5822];_0x22a388[_0x42b45e[_0x21e0de(0x114)]]=_0x42b45e[_0x21e0de(0xea)];}else return _0x36229d[_0x21e0de(0xcf)](0x0,0x5);}return _0x22a388;}static[_0x1c3e2f(0xff)](_0x57f470){const _0x46e9eb=_0x1c3e2f,_0xb0e3e={'lXYeg':function(_0x490f66,_0x2a95aa){return _0x490f66 in _0x2a95aa;},'fELjb':_0x46e9eb(0x100),'CacaB':'auto'};!_0x57f470?_0x57f470={}:_0x57f470=Object[_0x46e9eb(0x14e)]({},_0x57f470);if(!_0xb0e3e['lXYeg'](_0xb0e3e[_0x46e9eb(0xed)],_0x57f470))_0x57f470['isNew']=_0xb0e3e['CacaB'];if(!_0xb0e3e['lXYeg']('autoTimestamp',_0x57f470))_0x57f470[_0x46e9eb(0x14a)]=!![];return _0x57f470;}static[_0x1c3e2f(0xa7)](_0x5c28b2=null){const _0x57eb4a=_0x1c3e2f;if(!_0x5c28b2)_0x5c28b2={};let _0x205235=_0x57eb4a(0x113)+this['tableName']()+'`';if(_0x5c28b2[_0x57eb4a(0x143)])_0x205235+=_0x57eb4a(0x153)+_0x5c28b2[_0x57eb4a(0x143)];return this['db']()[_0x57eb4a(0xce)](_0x205235)['then'](_0x5c4f91=>{const _0x5194d3=_0x57eb4a;return _0x5c4f91?_0x5c4f91[_0x5194d3(0xfa)]:0x0;});}static[_0x1c3e2f(0xdb)](_0x3c1de8,_0x53e550=null){return this['loadByField']('id',_0x3c1de8,_0x53e550);}static[_0x1c3e2f(0xd1)](_0x323190){const _0x30fbeb=_0x1c3e2f;return _0x323190[_0x30fbeb(0xcf)](0x0,0x5);}static['loadByPartialId'](_0x4d2ab7){const _0x13a3ef=_0x1c3e2f;return this['modelSelectAll'](_0x13a3ef(0xf4)+this[_0x13a3ef(0x15b)]()+_0x13a3ef(0xbf),[_0x4d2ab7+'%']);}static[_0x1c3e2f(0x104)](_0xa36396,_0x40b89a,_0x1bb87d=null){const _0x164090=_0x1c3e2f,_0x376399={'zOFZz':function(_0x48c3c3,_0x292802){return _0x48c3c3<_0x292802;},'zcyMt':function(_0x4ee165,_0x169d7a){return _0x4ee165===_0x169d7a;},'BYsTa':_0x164090(0x117)};if(!_0xa36396)_0xa36396={};if(_0xa36396[_0x164090(0x14f)]&&_0xa36396['order'][_0x164090(0xbb)]){const _0x5c523e=[];for(let _0x30679d=0x0;_0x376399[_0x164090(0x14c)](_0x30679d,_0xa36396['order'][_0x164090(0xbb)]);_0x30679d++){const _0x27cc4b=_0xa36396[_0x164090(0x14f)][_0x30679d];let _0x241956='`'+_0x27cc4b['by']+'`';if(_0x376399['zcyMt'](_0xa36396['caseInsensitive'],!![]))_0x241956+=_0x376399[_0x164090(0x136)];if(_0x27cc4b[_0x164090(0x10d)])_0x241956+='\x20'+_0x27cc4b[_0x164090(0x10d)];_0x5c523e['push'](_0x241956);}_0x40b89a+=_0x164090(0xc1)+_0x5c523e[_0x164090(0x106)](',\x20');}if(_0xa36396[_0x164090(0x123)])_0x40b89a+=_0x164090(0xa3)+_0xa36396[_0x164090(0x123)];return{'sql':_0x40b89a,'params':_0x1bb87d};}static async[_0x1c3e2f(0xe7)](_0x55e6c0=null){const _0x317319=_0x1c3e2f,_0x41aa1d=this[_0x317319(0x104)](_0x55e6c0,'SELECT\x20id\x20FROM\x20`'+this[_0x317319(0x15b)]()+'`'),_0x5ec453=await this['db']()[_0x317319(0xaa)](_0x41aa1d[_0x317319(0xcb)],_0x41aa1d['params']);return _0x5ec453['map'](_0x40e27e=>_0x40e27e['id']);}static async[_0x1c3e2f(0xf6)](_0x3e3b39=null){const _0x4bfe71=_0x1c3e2f;if(!_0x3e3b39)_0x3e3b39={};if(!_0x3e3b39[_0x4bfe71(0x11a)])_0x3e3b39['fields']='*';let _0x615806=_0x4bfe71(0xbd)+this['db']()[_0x4bfe71(0x115)](_0x3e3b39[_0x4bfe71(0x11a)])+_0x4bfe71(0x161)+this[_0x4bfe71(0x15b)]()+'`',_0x1f3eae=[];if(_0x3e3b39['where']){_0x615806+=_0x4bfe71(0x153)+_0x3e3b39[_0x4bfe71(0x143)];if(_0x3e3b39[_0x4bfe71(0xb0)])_0x1f3eae=_0x1f3eae['concat'](_0x3e3b39['whereParams']);}const _0x463352=this[_0x4bfe71(0x104)](_0x3e3b39,_0x615806,_0x1f3eae);return this[_0x4bfe71(0xf5)](_0x463352['sql'],_0x463352[_0x4bfe71(0x13a)]);}static async[_0x1c3e2f(0x119)](_0x326cb0,_0x41fb24=null){const _0x57dcc7=_0x1c3e2f,_0x389b7d={'tnrYA':'\x22,\x22'};if(!_0x326cb0[_0x57dcc7(0xbb)])return[];if(!_0x41fb24)_0x41fb24={};if(!_0x41fb24[_0x57dcc7(0x11a)])_0x41fb24[_0x57dcc7(0x11a)]='*';let _0x3aa2b6='SELECT\x20'+this['db']()['escapeFields'](_0x41fb24[_0x57dcc7(0x11a)])+_0x57dcc7(0x161)+this[_0x57dcc7(0x15b)]()+'`';_0x3aa2b6+=_0x57dcc7(0x13b)+_0x326cb0['join'](_0x389b7d[_0x57dcc7(0x144)])+'\x22)';const _0x1820a7=this[_0x57dcc7(0x104)](_0x41fb24,_0x3aa2b6);return this[_0x57dcc7(0xf5)](_0x1820a7[_0x57dcc7(0xcb)]);}static async[_0x1c3e2f(0xc7)](_0x153146=null){const _0x4e8648=_0x1c3e2f,_0x11ae34={'xomsq':'limit'};if(!_0x153146)_0x153146={};if(!_0x153146[_0x4e8648(0x11a)])_0x153146[_0x4e8648(0x11a)]='*';const _0x4a3d05=_0x153146['conditions']?_0x153146[_0x4e8648(0xfb)][_0x4e8648(0xdc)](0x0):[],_0x22241b=_0x153146[_0x4e8648(0x131)]?_0x153146[_0x4e8648(0x131)]['slice'](0x0):[];if(_0x153146['titlePattern']){const _0x581863=_0x153146[_0x4e8648(0xc9)][_0x4e8648(0xa8)](/\*/g,'%');_0x4a3d05[_0x4e8648(0x15c)](_0x4e8648(0xd5)),_0x22241b[_0x4e8648(0x15c)](_0x581863);}if(_0x11ae34[_0x4e8648(0xb5)]in _0x153146&&_0x153146['limit']<=0x0)return[];let _0xca6a49='SELECT\x20'+this['db']()['escapeFields'](_0x153146[_0x4e8648(0x11a)])+_0x4e8648(0x161)+this[_0x4e8648(0x15b)]()+'`';if(_0x4a3d05[_0x4e8648(0xbb)])_0xca6a49+=_0x4e8648(0x153)+_0x4a3d05['join'](_0x4e8648(0x122));const _0x2444a7=this[_0x4e8648(0x104)](_0x153146,_0xca6a49,_0x22241b);return this[_0x4e8648(0xf5)](_0x2444a7[_0x4e8648(0xcb)],_0x2444a7[_0x4e8648(0x13a)]);}static['modelSelectOne'](_0x3822cd,_0x402888=null){const _0x2ea244=_0x1c3e2f,_0x532e63={'bmLxZ':function(_0x35fc9e,_0x266c12){return _0x35fc9e===_0x266c12;}};if(_0x532e63[_0x2ea244(0x129)](_0x402888,null))_0x402888=[];return this['db']()[_0x2ea244(0xce)](_0x3822cd,_0x402888)['then'](_0x536f23=>{const _0x1a8c3b=_0x2ea244;return this[_0x1a8c3b(0xb2)](this[_0x1a8c3b(0xfe)](_0x536f23));});}static[_0x1c3e2f(0xf5)](_0x51d7d6,_0x5ae31b=null){const _0x441a1a=_0x1c3e2f;if(_0x5ae31b===null)_0x5ae31b=[];return this['db']()[_0x441a1a(0xaa)](_0x51d7d6,_0x5ae31b)['then'](_0xa64cff=>{const _0xa88b24=_0x441a1a;if('gTZHH'===_0xa88b24(0xb4))_0x3abe6d=_0xd21672['create'](),_0x55610e['id']=_0x4f6766;else return this['filterArray'](this[_0xa88b24(0xfe)](_0xa64cff));});}static[_0x1c3e2f(0x150)](_0x1dfd8b,_0x65932f,_0x4ebe0f=null){const _0x268874=_0x1c3e2f,_0x16c043={'sKicM':'caseInsensitive'};if(!_0x4ebe0f)_0x4ebe0f={};if(!(_0x16c043['sKicM']in _0x4ebe0f))_0x4ebe0f[_0x268874(0xa0)]=![];if(!_0x4ebe0f[_0x268874(0x11a)])_0x4ebe0f[_0x268874(0x11a)]='*';let _0x30ccc0=_0x268874(0xbd)+this['db']()['escapeFields'](_0x4ebe0f[_0x268874(0x11a)])+_0x268874(0x161)+this[_0x268874(0x15b)]()+_0x268874(0xd3)+_0x1dfd8b+_0x268874(0x12f);if(_0x4ebe0f[_0x268874(0xa0)])_0x30ccc0+=_0x268874(0x117);return this['modelSelectOne'](_0x30ccc0,[_0x65932f]);}static[_0x1c3e2f(0xe4)](_0x38a4ca,_0x3d5e7c=null){const _0x39ca3a=_0x1c3e2f,_0x508c5b={'UQAns':function(_0x4bf983,_0x34ee84){return _0x4bf983 in _0x34ee84;},'ZxQtd':_0x39ca3a(0x117)};if(!_0x3d5e7c)_0x3d5e7c={};if(!_0x508c5b[_0x39ca3a(0x148)](_0x39ca3a(0xa0),_0x3d5e7c))_0x3d5e7c[_0x39ca3a(0xa0)]=![];if(!_0x3d5e7c['fields'])_0x3d5e7c['fields']='*';const _0x12cd6b=[],_0x217f58=[];for(const _0x35b782 in _0x38a4ca){_0x12cd6b['push']('`'+_0x35b782+'`\x20=\x20?'),_0x217f58[_0x39ca3a(0x15c)](_0x38a4ca[_0x35b782]);}let _0x1e8b48=_0x39ca3a(0xbd)+this['db']()[_0x39ca3a(0x115)](_0x3d5e7c[_0x39ca3a(0x11a)])+_0x39ca3a(0x161)+this[_0x39ca3a(0x15b)]()+_0x39ca3a(0x121)+_0x12cd6b['join'](_0x39ca3a(0x122));if(_0x3d5e7c['caseInsensitive'])_0x1e8b48+=_0x508c5b[_0x39ca3a(0x156)];return this[_0x39ca3a(0xf7)](_0x1e8b48,_0x217f58);}static[_0x1c3e2f(0x12d)](_0x66965e){const _0x1cbfea=_0x1c3e2f;return this['modelSelectOne'](_0x1cbfea(0xf4)+this[_0x1cbfea(0x15b)]()+'`\x20WHERE\x20`title`\x20=\x20?',[_0x66965e]);}static[_0x1c3e2f(0x13f)](_0x497f2e,_0x3998f6){const _0x76d286=_0x1c3e2f,_0x1bf0f1={},_0x265ef6=this[_0x76d286(0x12e)](_0x497f2e,_0x3998f6);for(let _0x28a7b2=0x0;_0x28a7b2<_0x265ef6[_0x76d286(0xbb)];_0x28a7b2++){_0x1bf0f1[_0x265ef6[_0x28a7b2]]=_0x3998f6[_0x265ef6[_0x28a7b2]];}if(_0x76d286(0x112)in _0x3998f6)_0x1bf0f1['type_']=_0x3998f6[_0x76d286(0x112)];return _0x1bf0f1;}static['diffObjectsFields'](_0x4037ed,_0x5f3d18){const _0x29448c=_0x1c3e2f,_0x4bf2ca={'krNsa':function(_0x1a0b00,_0x13413){return _0x1a0b00===_0x13413;},'sdCex':_0x29448c(0x13c),'xDuVb':_0x29448c(0x112),'zdWjB':function(_0x780506,_0x1276a7){return _0x780506!==_0x1276a7;}},_0x1e153d=[];for(const _0x5387ea in _0x5f3d18){if(_0x4bf2ca[_0x29448c(0xc8)](_0x4bf2ca[_0x29448c(0xf1)],_0x29448c(0x13c))){if(!_0x5f3d18[_0x29448c(0x146)](_0x5387ea))continue;if(_0x5387ea==_0x4bf2ca[_0x29448c(0xa5)])continue;(!(_0x5387ea in _0x4037ed)||_0x4bf2ca[_0x29448c(0x133)](_0x5f3d18[_0x5387ea],_0x4037ed[_0x5387ea]))&&_0x1e153d['push'](_0x5387ea);}else _0x3ab091[_0x1474da[_0x5e3be8]]=_0xe45698[_0x4bc679[_0x976d4d]];}return _0x1e153d;}static[_0x1c3e2f(0xda)](_0x49999c,_0x30106c){const _0x3a6879=_0x1c3e2f,_0x14aea8=this[_0x3a6879(0x13f)](_0x49999c,_0x30106c);return delete _0x14aea8[_0x3a6879(0x112)],!Object[_0x3a6879(0x9e)](_0x14aea8)[_0x3a6879(0xbb)];}static[_0x1c3e2f(0x120)](_0x11dfae){const _0x57201f=_0x1c3e2f,_0x4b67db={'WSwVS':function(_0x2d0db9,_0x5be82b){return _0x2d0db9===_0x5be82b;}},_0x28a439={'acquire':function(){return null;}};if(!_0x11dfae)return _0x28a439;const _0x7e2674=_0x4b67db['WSwVS'](typeof _0x11dfae,_0x57201f(0xef))?_0x11dfae:_0x11dfae['id'];if(!_0x7e2674)return _0x28a439;let _0x17cdfa=BaseModel[_0x57201f(0xa2)][_0x7e2674];if(_0x17cdfa)return _0x17cdfa;return _0x17cdfa=new Mutex(),BaseModel['saveMutexes_'][_0x7e2674]=_0x17cdfa,_0x17cdfa;}static[_0x1c3e2f(0xd8)](_0x261945,_0x329a68){const _0x56d72f=_0x1c3e2f,_0x2c476f={'cffeC':function(_0x5505c1){return _0x5505c1();},'uhSQi':function(_0x126e44,_0x49ee54){return _0x126e44===_0x49ee54;}};if(!_0x329a68)return;if(!_0x261945)return _0x2c476f['cffeC'](_0x329a68);const _0x3ba501=_0x2c476f[_0x56d72f(0x14b)](typeof _0x261945,_0x56d72f(0xef))?_0x261945:_0x261945['id'];if(!_0x3ba501)return _0x2c476f[_0x56d72f(0x11f)](_0x329a68);const _0xd6868b=BaseModel['saveMutexes_'][_0x3ba501];if(!_0xd6868b)return _0x329a68();delete BaseModel[_0x56d72f(0xa2)][_0x3ba501],_0x329a68();}static['saveQuery'](_0xb0b9f,_0xa55478){const _0x526e8a=_0x1c3e2f,_0xc3d20f={'BHDEh':function(_0x411fba,_0x1c8d34){return _0x411fba<_0x1c8d34;},'Fxeax':function(_0x145cc4,_0x28efbb){return _0x145cc4<_0x28efbb;},'JCvVU':function(_0x3fa16d,_0x3450a0){return _0x3fa16d!==_0x3450a0;},'tlDTd':_0x526e8a(0xf2),'hvWjm':function(_0x2d4752,_0x3b1407){return _0x2d4752 in _0x3b1407;},'BzVka':function(_0x643c86,_0x8aa33d){return _0x643c86!==_0x8aa33d;},'Ykhdw':_0x526e8a(0x151),'bmvWB':_0x526e8a(0x12c),'HnOPp':_0x526e8a(0x139)};let _0x248ac1={};const _0xf984c5=this['fieldNames']();for(let _0x5dbc8a=0x0;_0xc3d20f[_0x526e8a(0x10e)](_0x5dbc8a,_0xf984c5[_0x526e8a(0xbb)]);_0x5dbc8a++){if(_0xc3d20f[_0x526e8a(0xbc)](_0x526e8a(0xf2),_0xc3d20f[_0x526e8a(0x145)])){for(let _0x5e06a3=0x0;_0xc3d20f[_0x526e8a(0xf8)](_0x5e06a3,_0x461668['length']);_0x5e06a3++){if(_0x271c02[_0x5e06a3]['id']==_0xa61a32)return _0x19fa34[_0x5e06a3];}return null;}else{const _0x29a38e=_0xf984c5[_0x5dbc8a];if(_0xc3d20f['hvWjm'](_0x29a38e,_0xb0b9f))_0x248ac1[_0x29a38e]=_0xb0b9f[_0x29a38e];}}if(!_0xa55478['isNew']&&_0xa55478[_0x526e8a(0x11a)]){const _0x4bae82={};for(const _0x2e2c2b in _0x248ac1){if(!_0x248ac1[_0x526e8a(0x146)](_0x2e2c2b))continue;if(_0xc3d20f[_0x526e8a(0xa6)](_0x2e2c2b,'id')&&_0xa55478[_0x526e8a(0x11a)]['indexOf'](_0x2e2c2b)<0x0)continue;_0x4bae82[_0x2e2c2b]=_0x248ac1[_0x2e2c2b];}_0x248ac1=_0x4bae82;}_0xb0b9f=_0x248ac1;let _0x571ac5=_0x248ac1['id'],_0x54a5a1={};const _0x5e73d4=time[_0x526e8a(0xb9)]();_0xa55478['autoTimestamp']&&this[_0x526e8a(0xae)](_0x526e8a(0x12b))&&(_0xb0b9f['updated_time']=_0x5e73d4);_0xa55478['autoTimestamp']&&this['hasField'](_0xc3d20f[_0x526e8a(0x15a)])&&(_0xb0b9f['user_updated_time']=_0x5e73d4);if(_0xa55478[_0x526e8a(0x100)]){const _0x4f4f14='0|1|4|2|3'[_0x526e8a(0x105)]('|');let _0x1bd2c8=0x0;while(!![]){switch(_0x4f4f14[_0x1bd2c8++]){case'0':this[_0x526e8a(0xba)]()&&!_0xb0b9f['id']&&(_0x571ac5=uuid[_0x526e8a(0x10f)](),_0xb0b9f['id']=_0x571ac5);continue;case'1':!_0xb0b9f['created_time']&&this[_0x526e8a(0xae)](_0xc3d20f['bmvWB'])&&(_0xb0b9f[_0x526e8a(0x12c)]=_0x5e73d4);continue;case'2':!_0xb0b9f[_0x526e8a(0x151)]&&this[_0x526e8a(0xae)](_0xc3d20f[_0x526e8a(0x15a)])&&(_0xb0b9f[_0x526e8a(0x151)]=_0xb0b9f['updated_time']?_0xb0b9f[_0x526e8a(0x12b)]:_0x5e73d4);continue;case'3':_0x54a5a1=Database[_0x526e8a(0xa9)](this['tableName'](),_0xb0b9f);continue;case'4':!_0xb0b9f[_0x526e8a(0x139)]&&this[_0x526e8a(0xae)](_0xc3d20f['HnOPp'])&&(_0xb0b9f[_0x526e8a(0x139)]=_0xb0b9f['created_time']?_0xb0b9f['created_time']:_0x5e73d4);continue;}break;}}else{const _0x240ac5={'id':_0xb0b9f['id']},_0x10f731=Object['assign']({},_0xb0b9f);delete _0x10f731['id'],_0x54a5a1=Database[_0x526e8a(0x147)](this[_0x526e8a(0x15b)](),_0x10f731,_0x240ac5);}return _0x54a5a1['id']=_0x571ac5,_0x54a5a1['modObject']=_0xb0b9f,_0x54a5a1;}static async[_0x1c3e2f(0x11c)](_0x2cc63f,_0x11729e=null){const _0xd7fd81=_0x1c3e2f,_0x17b656={'ZpLof':function(_0x335ca4,_0x8380e4){return _0x335ca4 in _0x8380e4;},'BHVFa':function(_0x98ef1a,_0x35d10f){return _0x98ef1a in _0x35d10f;}},_0x24d3ac=await this[_0xd7fd81(0x120)](_0x2cc63f)[_0xd7fd81(0xe5)]();_0x11729e=this[_0xd7fd81(0xff)](_0x11729e),_0x11729e[_0xd7fd81(0x100)]=this[_0xd7fd81(0x100)](_0x2cc63f,_0x11729e);const _0x7d81d7=_0x11729e&&_0x11729e[_0xd7fd81(0x110)]&&!_0x11729e[_0xd7fd81(0x100)];if(_0x7d81d7){const _0x210cf6=BaseModel[_0xd7fd81(0x13f)](_0x11729e[_0xd7fd81(0x110)],_0x2cc63f);_0x210cf6[_0xd7fd81(0x112)]=_0x2cc63f[_0xd7fd81(0x112)],_0x210cf6['id']=_0x2cc63f['id'],_0x2cc63f=_0x210cf6;}_0x2cc63f=this[_0xd7fd81(0xb2)](_0x2cc63f);let _0x109cdc=[];const _0x29ebdf=this[_0xd7fd81(0x158)](_0x2cc63f,_0x11729e),_0x2ec9f0=_0x29ebdf['id'];_0x109cdc[_0xd7fd81(0x15c)](_0x29ebdf);_0x11729e['nextQueries']&&_0x11729e[_0xd7fd81(0xe6)][_0xd7fd81(0xbb)]&&(_0x109cdc=_0x109cdc[_0xd7fd81(0xe9)](_0x11729e[_0xd7fd81(0xe6)]));let _0x255c22=null;try{await this['db']()[_0xd7fd81(0xc4)](_0x109cdc),_0x2cc63f=Object['assign']({},_0x2cc63f);if(_0x2ec9f0)_0x2cc63f['id']=_0x2ec9f0;if(_0xd7fd81(0x12b)in _0x29ebdf[_0xd7fd81(0x10b)])_0x2cc63f[_0xd7fd81(0x12b)]=_0x29ebdf[_0xd7fd81(0x10b)][_0xd7fd81(0x12b)];if(_0xd7fd81(0x12c)in _0x29ebdf['modObject'])_0x2cc63f[_0xd7fd81(0x12c)]=_0x29ebdf[_0xd7fd81(0x10b)][_0xd7fd81(0x12c)];if(_0x17b656[_0xd7fd81(0x9d)](_0xd7fd81(0x151),_0x29ebdf[_0xd7fd81(0x10b)]))_0x2cc63f['user_updated_time']=_0x29ebdf[_0xd7fd81(0x10b)][_0xd7fd81(0x151)];if(_0x17b656['BHVFa'](_0xd7fd81(0x139),_0x29ebdf[_0xd7fd81(0x10b)]))_0x2cc63f[_0xd7fd81(0x139)]=_0x29ebdf[_0xd7fd81(0x10b)][_0xd7fd81(0x139)];_0x2cc63f=this[_0xd7fd81(0xfe)](_0x2cc63f);if(_0x7d81d7)for(const _0x25f5b0 in _0x11729e[_0xd7fd81(0x110)]){if(!_0x11729e[_0xd7fd81(0x110)][_0xd7fd81(0x146)](_0x25f5b0))continue;if(_0x25f5b0 in _0x2cc63f)continue;_0x2cc63f[_0x25f5b0]=_0x11729e['oldItem'][_0x25f5b0];}_0x255c22=this[_0xd7fd81(0xb2)](_0x2cc63f);}finally{this['releaseSaveMutex'](_0x2cc63f,_0x24d3ac);}return _0x255c22;}static[_0x1c3e2f(0x100)](_0x10ec30,_0x5deaaa){const _0x247867=_0x1c3e2f,_0x2c160e={'kQfIm':_0x247867(0xa0),'QSZBF':function(_0x1b65ce,_0x40972f){return _0x1b65ce in _0x40972f;},'wxppO':_0x247867(0x100)};if(_0x5deaaa&&_0x2c160e[_0x247867(0xa4)](_0x2c160e[_0x247867(0xb6)],_0x5deaaa)){if(_0x247867(0xdf)!=='DMMoW'){if(!_0x535eee)_0x4dd4af={};if(!(_0x2c160e['kQfIm']in _0x8769ac))_0x5beaf9[_0x247867(0xa0)]=![];if(!_0x3eac99['fields'])_0x3f3803[_0x247867(0x11a)]='*';let _0x4998fd=_0x247867(0xbd)+this['db']()[_0x247867(0x115)](_0x4038ad[_0x247867(0x11a)])+'\x20FROM\x20`'+this[_0x247867(0x15b)]()+_0x247867(0xd3)+_0x495dbd+'`\x20=\x20?';if(_0x36a5dc['caseInsensitive'])_0x4998fd+='\x20COLLATE\x20NOCASE';return this['modelSelectOne'](_0x4998fd,[_0x361b13]);}else{if(_0x5deaaa[_0x247867(0x100)]===!![])return!![];if(_0x5deaaa[_0x247867(0x100)]===![])return![];}}return!_0x10ec30['id'];}static['filterArray'](_0x343341){const _0x2289e7=_0x1c3e2f,_0x10a7ca={'QYYSi':function(_0x128942,_0x2da3d4){return _0x128942<_0x2da3d4;}},_0x5dd508=[];for(let _0x27e033=0x0;_0x10a7ca[_0x2289e7(0x10c)](_0x27e033,_0x343341[_0x2289e7(0xbb)]);_0x27e033++){_0x5dd508['push'](this[_0x2289e7(0xb2)](_0x343341[_0x27e033]));}return _0x5dd508;}static[_0x1c3e2f(0xb2)](_0xc5b96a){const _0x54e485=_0x1c3e2f,_0x5defa7={'dXLmE':function(_0xc3fb1b,_0x4499d4){return _0xc3fb1b===_0x4499d4;},'wotso':function(_0x3160f2,_0x5ef022){return _0x3160f2!==_0x5ef022;},'yJzBm':_0x54e485(0x9f),'KOHmq':'Andqj','rrFzK':function(_0x4ab0ef,_0x17152e){return _0x4ab0ef===_0x17152e;},'WLqGs':function(_0x3cc4aa,_0x4de221,_0x459f76){return _0x3cc4aa(_0x4de221,_0x459f76);}};if(!_0xc5b96a)return _0xc5b96a;const _0x3b4571=Object[_0x54e485(0x14e)]({},_0xc5b96a);for(const _0x59129f in _0x3b4571){if(!_0x3b4571['hasOwnProperty'](_0x59129f))continue;if(_0x5defa7[_0x54e485(0x103)](_0x3b4571[_0x59129f],!![]))_0x5defa7[_0x54e485(0x138)](_0x5defa7[_0x54e485(0xfc)],_0x5defa7['KOHmq'])?_0x3b4571[_0x59129f]=0x1:_0x1e5592={};else{if(_0x3b4571[_0x59129f]===![])_0x3b4571[_0x59129f]=0x0;else{const _0x11bd43=this[_0x54e485(0xa1)](_0x59129f,Database[_0x54e485(0x137)]);_0x5defa7[_0x54e485(0x116)](_0x11bd43,Database[_0x54e485(0xe0)])&&(_0x3b4571[_0x59129f]=!_0x59129f?0x0:_0x5defa7['WLqGs'](parseInt,_0x3b4571[_0x59129f],0xa));}}}return _0x3b4571;}static[_0x1c3e2f(0x134)](_0x5a3bfb){const _0x5f0fb5=_0x1c3e2f;if(!_0x5a3bfb)throw new Error(_0x5f0fb5(0xb7));return this['db']()[_0x5f0fb5(0xe2)]('DELETE\x20FROM\x20'+this[_0x5f0fb5(0x15b)]()+_0x5f0fb5(0x118),[_0x5a3bfb]);}static[_0x1c3e2f(0x135)](_0x173b92,_0x37d167=null){const _0x3f0ff9=_0x1c3e2f,_0x1de934={'oCTLW':_0x3f0ff9(0xf9)};if(!_0x173b92[_0x3f0ff9(0xbb)])return;_0x37d167=this[_0x3f0ff9(0xff)](_0x37d167);const _0x47dff5=_0x37d167[_0x3f0ff9(0xb1)]?_0x37d167['idFieldName']:'id',_0xe71545='DELETE\x20FROM\x20'+this[_0x3f0ff9(0x15b)]()+_0x3f0ff9(0x153)+_0x47dff5+_0x3f0ff9(0xd9)+_0x173b92[_0x3f0ff9(0x106)](_0x1de934[_0x3f0ff9(0x130)])+'\x22)';return this['db']()[_0x3f0ff9(0xe2)](_0xe71545);}static['db'](){const _0x2fb0df=_0x1c3e2f,_0xfcde72={'EaKrX':'Accessing\x20database\x20before\x20it\x20has\x20been\x20initialised'};if(!this[_0x2fb0df(0x11b)])throw new Error(_0xfcde72['EaKrX']);return this[_0x2fb0df(0x11b)];}static[_0x1c3e2f(0x154)](){const _0x51dbee=_0x1c3e2f;return!!this[_0x51dbee(0x11b)];}}BaseModel[_0x1c3e2f(0xe3)]=[['TYPE_NOTE',0x1],['TYPE_FOLDER',0x2],['TYPE_SETTING',0x3],['TYPE_RESOURCE',0x4],[_0x1c3e2f(0xee),0x5],[_0x1c3e2f(0xc2),0x6],[_0x1c3e2f(0xaf),0x7],[_0x1c3e2f(0xe8),0x8],[_0x1c3e2f(0x13d),0x9],[_0x1c3e2f(0x101),0xa],['TYPE_NOTE_RESOURCE',0xb],[_0x1c3e2f(0x15e),0xc],[_0x1c3e2f(0x125),0xd],[_0x1c3e2f(0xfd),0xe],['TYPE_SMART_FILTER',0xf]];for(let i=0x0;i<BaseModel[_0x1c3e2f(0xe3)]['length'];i++){const e=BaseModel[_0x1c3e2f(0xe3)][i];BaseModel[e[0x0]]=e[0x1];}BaseModel[_0x1c3e2f(0x11b)]=null,BaseModel[_0x1c3e2f(0x162)]=function(){},BaseModel[_0x1c3e2f(0xa2)]={},module[_0x1c3e2f(0xd4)]=BaseModel;function _0x5983(){const _0xdc61b6=['isNew','TYPE_ITEM_CHANGE','578373ejjpXV','dXLmE','applySqlOptions','split','join','2IpPHQR','indexOf','fieldNames','tableFields','modObject','QYYSi','dir','Fxeax','create','oldItem','toLowerCase','type_','SELECT\x20count(*)\x20as\x20total\x20FROM\x20`','name','escapeFields','rrFzK','\x20COLLATE\x20NOCASE','\x20WHERE\x20id\x20=\x20?','byIds','fields','db_','save','SEVZp','VtdHF','cffeC','saveMutex','`\x20WHERE\x20','\x20AND\x20','limit','Unknown\x20field:\x20','TYPE_REVISION','fieldDefaultValue','68976nPGzJR','PlNGv','bmLxZ','zNkyt','updated_time','created_time','loadByTitle','diffObjectsFields','`\x20=\x20?','oCTLW','conditionsParams','4908lfyCpi','zdWjB','delete','batchDelete','BYsTa','TYPE_UNKNOWN','wotso','user_created_time','params','\x20WHERE\x20id\x20IN\x20(\x22','Bfchq','TYPE_MASTER_KEY','1844379pEFVYG','diffObjects','PbUym','Must\x20be\x20overriden','removeUnknownFields','where','tnrYA','tlDTd','hasOwnProperty','updateQuery','UQAns','37675FyEAcO','autoTimestamp','uhSQi','zOFZz','Jtqat','assign','order','loadByField','user_updated_time','modelTypeToName','\x20WHERE\x20','isReady','Zhibk','ZxQtd','tableFieldNames','saveQuery','new','Ykhdw','tableName','push','evYhn','TYPE_RESOURCE_LOCAL_STATE','setDb','type','\x20FROM\x20`','dispatch','ZpLof','getOwnPropertyNames','dKyoX','caseInsensitive','fieldType','saveMutexes_','\x20LIMIT\x20','QSZBF','xDuVb','BzVka','count','replace','insertQuery','selectAll','isArray','1096EfOMis','4656390vgrJAP','hasField','TYPE_SEARCH','whereParams','idFieldName','filter','modelIndexById','YIJXl','xomsq','wxppO','Cannot\x20delete\x20object\x20without\x20an\x20ID','lib/database.js','unixMs','useUuid','length','JCvVU','SELECT\x20','Unknown\x20model\x20name:\x20','`\x20WHERE\x20`id`\x20LIKE\x20?','4PdVQey','\x20ORDER\x20BY\x20','TYPE_NOTE_TAG','defaultValues','transactionExecBatch','uSuoK','logger','search','krNsa','titlePattern','Mutex','sql','pmqrI','jZQtK','selectOne','substr','modelNameToType','shortId','dURrJ','`\x20WHERE\x20`','exports','title\x20LIKE\x20?','Unknown\x20model\x20type:\x20','lib/uuid.js','releaseSaveMutex','\x20IN\x20(\x22','modelsAreSame','load','slice','byId','6585593bmLsry','DMMoW','TYPE_INT','modelType','exec','typeEnum_','loadByFields','acquire','nextQueries','allIds','TYPE_ALARM','concat','default','6lPKDYr','modelsByIds','fELjb','TYPE_TAG','string','eKUWP','sdCex','uZoNL','412730sSxqhJ','SELECT\x20*\x20FROM\x20`','modelSelectAll','all','modelSelectOne','BHDEh','\x22,\x22','total','conditions','yJzBm','TYPE_MIGRATION','addModelMd','modOptions'];_0x5983=function(){return _0xdc61b6;};return _0x5983();}