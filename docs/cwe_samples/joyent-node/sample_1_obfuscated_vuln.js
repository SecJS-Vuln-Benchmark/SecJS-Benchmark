var _0x40a5a6=_0x9e55;(function(_0x169ed2,_0x105bfa){var _0x9ed937=_0x9e55,_0x1b3c07=_0x169ed2();while(!![]){try{var _0x57d8ee=parseInt(_0x9ed937(0x20d))/0x1*(parseInt(_0x9ed937(0x20c))/0x2)+-parseInt(_0x9ed937(0x1ce))/0x3+parseInt(_0x9ed937(0x1d1))/0x4+-parseInt(_0x9ed937(0x1f1))/0x5*(-parseInt(_0x9ed937(0x1d4))/0x6)+parseInt(_0x9ed937(0x1ff))/0x7*(-parseInt(_0x9ed937(0x1d3))/0x8)+-parseInt(_0x9ed937(0x202))/0x9+-parseInt(_0x9ed937(0x1c9))/0xa;if(_0x57d8ee===_0x105bfa)break;else _0x1b3c07['push'](_0x1b3c07['shift']());}catch(_0x317755){_0x1b3c07['push'](_0x1b3c07['shift']());}}}(_0x94d2,0x65303));function _0x9e55(_0x20d395,_0x250e45){var _0x94d2b=_0x94d2();return _0x9e55=function(_0x9e55af,_0x5b7054){_0x9e55af=_0x9e55af-0x1c9;var _0x44f81c=_0x94d2b[_0x9e55af];return _0x44f81c;},_0x9e55(_0x20d395,_0x250e45);}function _0x94d2(){var _0x17a5b2=['2613114HAJfBg','howdy!','QFkFA','notOk','http://localhost:1666/file.txt','fails\x20if\x20path\x20traversal\x20is\x20attempted','raw\x20image\x20tag\x20is\x20not\x20on\x20page','hideindex','DvphW','name\x20is\x20replaced\x20with\x20html\x20escape','85258PUKAiO','4Kiobgj','JSEpR','link\x20is\x20replaced\x20with\x20uriEncode','test','194290oKxEdl','localhost','headers','shuts\x20down\x20without\x20exploding','data','1453938hpZBmn','http://localhost:1666/../index.js','split','2346312DuqRIm','statusCode','16ylMuUl','1968eiOhtC','http://localhost:1666/','pyEEe','text/html','sHnNc','push','AVKzh','POST','serves\x20index\x20page','Vdtqb','tlJFe','wee\x0a','http://localhost:1666/nofile.md','DELETE','ecogn','UIUGq','notStrictEqual','http','start','SCAPk','join','CIIop','MhSgQ','NHEsT','http://localhost:1666/test1/','http://localhost:1666/test1/.test2/lol.txt','GiUZz','tape','hey,\x20now!','7435ZoyjpJ','OxERn','request','serves\x20files\x20from\x20within\x20dot\x20dirs\x20by\x20default','strictEqual','plan','../','forEach','GaqWT','http://localhost:1666/file%20with%20space.html','wKxCi','get','http://localhost:1666/.test/whatever.txt','sZhXg','125797RlvZOB','./test/glance-test','end'];_0x94d2=function(){return _0x17a5b2;};return _0x94d2();}var http=require(_0x40a5a6(0x1e5)),test=require(_0x40a5a6(0x1ef)),glance=require(_0x40a5a6(0x1f7)),glanceServer=glance({'port':0x682,'dir':_0x40a5a6(0x200)});test('doesnt\x20explode\x20immediately',function(_0xadc4db){var _0x18734f=_0x40a5a6;_0xadc4db[_0x18734f(0x1f6)](0x1),_0xadc4db['doesNotThrow'](function(){var _0x9a0177=_0x18734f;glanceServer[_0x9a0177(0x1e6)]();});}),test('serves\x20plaintext\x20with\x20headers',function(_0x51d2ee){var _0x2db803=_0x40a5a6,_0x39bb4b={'QFkFA':_0x2db803(0x203),'UIUGq':'content-type','OxERn':'text/plain','GiUZz':_0x2db803(0x1cd),'GaqWT':_0x2db803(0x206)};http[_0x2db803(0x1fc)](_0x39bb4b[_0x2db803(0x1f9)],function(_0x1d85bb){var _0x4f929d=_0x2db803;_0x51d2ee[_0x4f929d(0x1f6)](0x3);var _0xfaa8c7='';_0x51d2ee[_0x4f929d(0x1f5)](_0x1d85bb[_0x4f929d(0x1d2)],0xc8),_0x51d2ee[_0x4f929d(0x1f5)](_0x1d85bb[_0x4f929d(0x1cb)][_0x39bb4b[_0x4f929d(0x1e3)]],_0x39bb4b[_0x4f929d(0x1f2)]),_0x1d85bb['on'](_0x39bb4b[_0x4f929d(0x1ee)],function(_0x3f196a){_0xfaa8c7+=_0x3f196a;}),_0x1d85bb['on'](_0x4f929d(0x201),function(){var _0x579d25=_0x4f929d;_0x51d2ee[_0x579d25(0x1f5)](_0xfaa8c7,_0x39bb4b[_0x579d25(0x204)]);});});}),test('deals\x20with\x20uri\x20encoding',function(_0x18330e){var _0x1d3497=_0x40a5a6,_0x5d2614={'CIIop':'0|6|1|5|3|4|2','NHEsT':_0x1d3497(0x1f0),'rdEVt':_0x1d3497(0x201),'gmqxd':_0x1d3497(0x1cd)};http[_0x1d3497(0x1fc)](_0x1d3497(0x1fa),function(_0x358b89){var _0xfd6406=_0x1d3497,_0x5266e9=_0x5d2614[_0xfd6406(0x1e9)][_0xfd6406(0x1d0)]('|'),_0x286232=0x0;while(!![]){switch(_0x5266e9[_0x286232++]){case'0':var _0x363a24={'ecogn':_0x5d2614[_0xfd6406(0x1eb)]};continue;case'1':var _0x435b3e='';continue;case'2':_0x358b89['on'](_0x5d2614['rdEVt'],function(){var _0x8531a4=_0xfd6406;_0x18330e[_0x8531a4(0x1f5)](_0x435b3e,_0x363a24[_0x8531a4(0x1e2)]);});continue;case'3':_0x18330e[_0xfd6406(0x1f5)](_0x358b89[_0xfd6406(0x1cb)]['content-type'],_0xfd6406(0x1d7));continue;case'4':_0x358b89['on'](_0x5d2614['gmqxd'],function(_0x21b041){_0x435b3e+=_0x21b041;});continue;case'5':_0x18330e['strictEqual'](_0x358b89[_0xfd6406(0x1d2)],0xc8);continue;case'6':_0x18330e[_0xfd6406(0x1f6)](0x3);continue;}break;}});}),test('404s\x20on\x20file\x20not\x20found',function(_0x137eb9){var _0xaee8d4=_0x40a5a6;_0x137eb9['plan'](0x1),http['get'](_0xaee8d4(0x1e0),function(_0x55add3){var _0x29dc56=_0xaee8d4;_0x137eb9[_0x29dc56(0x1f5)](_0x55add3[_0x29dc56(0x1d2)],0x194);});}),test('403s\x20on\x20dir\x20list\x20if\x20configured',function(_0x88194e){var _0x19306f=_0x40a5a6,_0x1b8d94={'MhSgQ':_0x19306f(0x1d5)};_0x88194e[_0x19306f(0x1f6)](0x1),glanceServer[_0x19306f(0x209)]=!![],http[_0x19306f(0x1fc)](_0x1b8d94[_0x19306f(0x1ea)],function(_0x31734e){var _0x21b6a2=_0x19306f;glanceServer[_0x21b6a2(0x209)]=![],_0x88194e[_0x21b6a2(0x1f5)](_0x31734e['statusCode'],0x193);});}),test(_0x40a5a6(0x207),function(_0x556d82){var _0x56c60c=_0x40a5a6,_0x783293={'sHnNc':_0x56c60c(0x1cf)};_0x556d82['plan'](0x1),http['get'](_0x783293[_0x56c60c(0x1d8)],function(_0x1d2c87){var _0x3c345e=_0x56c60c;_0x556d82[_0x3c345e(0x1e4)](_0x1d2c87[_0x3c345e(0x1d2)],0xc8);});}),test(_0x40a5a6(0x1dc),function(_0x113bce){var _0x34c992=_0x40a5a6,_0x1bb120={'SCAPk':_0x34c992(0x201),'YttCd':_0x34c992(0x1d5)};_0x113bce[_0x34c992(0x1f6)](0x2);var _0x2e8e31=[];http[_0x34c992(0x1fc)](_0x1bb120['YttCd'],function(_0x30442f){var _0x4a6f3b=_0x34c992,_0x344659={'wKxCi':_0x4a6f3b(0x1df)};_0x113bce['strictEqual'](_0x30442f[_0x4a6f3b(0x1d2)],0xc8),_0x30442f['on']('data',_0x2e8e31[_0x4a6f3b(0x1d9)]['bind'](_0x2e8e31)),_0x30442f['on'](_0x1bb120[_0x4a6f3b(0x1e7)],function(){var _0xc47c0a=_0x4a6f3b;_0x113bce[_0xc47c0a(0x1f5)](_0x2e8e31[_0xc47c0a(0x1e8)](''),_0x344659[_0xc47c0a(0x1fb)]);});});}),test('405s\x20on\x20everything\x20but\x20GET',function(_0x31d30){var _0x561d10=_0x40a5a6,_0x3500d3={'UuiGR':_0x561d10(0x1ca),'AVKzh':_0x561d10(0x1cf),'DvphW':'tlJFe','pyEEe':'PUT'};_0x31d30[_0x561d10(0x1f6)](0x3);var _0x44d200=[_0x561d10(0x1db),_0x561d10(0x1e1),_0x3500d3[_0x561d10(0x1d6)]];_0x44d200[_0x561d10(0x1f8)](function(_0xbc8ee3){var _0x34699c=_0x561d10;if(_0x34699c(0x1fe)!=='sZhXg')_0x22cc65[_0x34699c(0x209)]=![],_0x2c704d[_0x34699c(0x1f5)](_0x4760da[_0x34699c(0x1d2)],0x193);else{var _0x3cc806={'host':_0x3500d3['UuiGR'],'port':0x682,'path':'/file.txt','method':_0xbc8ee3},_0x421ff2=http[_0x34699c(0x1f3)](_0x3cc806,_0x14f3e0);_0x421ff2['end']();}});function _0x14f3e0(_0x141ba7){var _0x2777ca=_0x561d10,_0x31e7aa={'JSEpR':_0x3500d3[_0x2777ca(0x1da)]};_0x2777ca(0x1de)!==_0x3500d3[_0x2777ca(0x20a)]?(_0x1c1bd2['plan'](0x1),_0x20cf74[_0x2777ca(0x1fc)](_0x31e7aa[_0x2777ca(0x20e)],function(_0x3fe41f){var _0x4e81d8=_0x2777ca;_0x5657ba[_0x4e81d8(0x1e4)](_0x3fe41f[_0x4e81d8(0x1d2)],0xc8);})):_0x31d30[_0x2777ca(0x1f5)](_0x141ba7[_0x2777ca(0x1d2)],0x195);}}),test(_0x40a5a6(0x1f4),function(_0x82866b){var _0x55a83a=_0x40a5a6;_0x82866b['plan'](0x2),http[_0x55a83a(0x1fc)](_0x55a83a(0x1fd),function(_0xd8a193){var _0xe3c09e=_0x55a83a;_0x82866b[_0xe3c09e(0x1f5)](_0xd8a193[_0xe3c09e(0x1d2)],0xc8);}),http[_0x55a83a(0x1fc)](_0x55a83a(0x1ed),function(_0xf6cde0){var _0x431560=_0x55a83a;_0x82866b[_0x431560(0x1f5)](_0xf6cde0[_0x431560(0x1d2)],0xc8);});}),test('sanitizes\x20filenames',function(_0x517e34){var _0x3b2944=_0x40a5a6,_0x51fe4f={'VjKMk':_0x3b2944(0x1cd),'Vdtqb':_0x3b2944(0x201)};_0x517e34[_0x3b2944(0x1f6)](0x3);var _0x49602b=[];http[_0x3b2944(0x1fc)](_0x3b2944(0x1ec),function(_0x488748){var _0x597d0b=_0x3b2944;_0x488748['on'](_0x51fe4f['VjKMk'],function(_0xa64f0c){var _0x1021d4=_0x9e55;_0x49602b[_0x1021d4(0x1d9)](_0xa64f0c);}),_0x488748['on'](_0x51fe4f[_0x597d0b(0x1dd)],function(){var _0x8d44dc=_0x597d0b,_0x395869=_0x49602b[_0x8d44dc(0x1e8)]('');_0x517e34[_0x8d44dc(0x205)](/\<img/[_0x8d44dc(0x210)](_0x395869),_0x8d44dc(0x208)),_0x517e34['ok'](/\&lt;img/[_0x8d44dc(0x210)](_0x395869),_0x8d44dc(0x20b)),_0x517e34['ok'](/\%3Cimg/[_0x8d44dc(0x210)](_0x395869),_0x8d44dc(0x20f));});});}),test(_0x40a5a6(0x1cc),function(_0x7b872c){var _0x10d544=_0x40a5a6;_0x7b872c[_0x10d544(0x1f6)](0x1),_0x7b872c['doesNotThrow'](function(){glanceServer['stop']();});});