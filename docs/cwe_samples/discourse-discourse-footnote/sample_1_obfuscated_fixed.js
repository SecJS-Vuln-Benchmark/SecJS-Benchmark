const _0x1f3522=_0x33f0;function _0x5d44(){const _0x4b215d=['../utility/platformInfo','exports','https://api.github.com/gists','./serverConnections','50mQhbvc','184029tZyiZt','files','Error\x20uploading\x20gist','../utility/socket','randomUUID','default','join','DbGate\x20','readFile','type','sshAuthSock','../gistSecret','lodash','get','sendFile','getSettings','machine','CdMgr','./config','12LAJgrX','913ENKTDM','959268RJYqOt','error','getOpenedConnectionReport','name','kYAVW','delete','uploads','414435xMWLNi',',\x20size=','json','../currentVersion','Uploading\x20file\x20','fs/promises','data','XncUx','file','info','getGistToken','stringify','post','axios','crypto','platform','xQJcG','8539920kHApbh','application/vnd.github.v3+json','other.gistCreateToken','release','1466703oZmFVR','utf-8','token\x20','path','dbgate-tools','../utility/directories','message','1187584EomFeI','./queryHistory'];_0x5d44=function(){return _0x4b215d;};return _0x5d44();}function _0x33f0(_0x5cc2ae,_0x10955f){const _0x5d449e=_0x5d44();return _0x33f0=function(_0x33f0b7,_0x2257cf){_0x33f0b7=_0x33f0b7-0xd5;let _0x5026c7=_0x5d449e[_0x33f0b7];return _0x5026c7;},_0x33f0(_0x5cc2ae,_0x10955f);}(function(_0x24363e,_0x3bae3f){const _0x153aed=_0x33f0,_0x3515d5=_0x24363e();while(!![]){try{const _0x221bef=-parseInt(_0x153aed(0xf0))/0x1*(-parseInt(_0x153aed(0xdb))/0x2)+-parseInt(_0x153aed(0xdc))/0x3+-parseInt(_0x153aed(0xf1))/0x4+-parseInt(_0x153aed(0xf8))/0x5*(parseInt(_0x153aed(0xef))/0x6)+-parseInt(_0x153aed(0x10d))/0x7+-parseInt(_0x153aed(0xd5))/0x8+parseInt(_0x153aed(0x109))/0x9;if(_0x221bef===_0x3bae3f)break;else _0x3515d5['push'](_0x3515d5['shift']());}catch(_0x210bfb){_0x3515d5['push'](_0x3515d5['shift']());}}}(_0x5d44,0x23d6a));const crypto=require(_0x1f3522(0x106)),path=require(_0x1f3522(0x110)),{uploadsdir,getLogsFilePath,filesdir}=require(_0x1f3522(0x112)),{getLogger,extractErrorLogData}=require(_0x1f3522(0x111)),logger=getLogger(_0x1f3522(0xf7)),axios=require(_0x1f3522(0x105)),os=require('os'),fs=require(_0x1f3522(0xfd)),{read}=require(_0x1f3522(0xd6)),platformInfo=require(_0x1f3522(0xd7)),_=require(_0x1f3522(0xe8)),serverConnections=require(_0x1f3522(0xda)),config=require(_0x1f3522(0xee)),gistSecret=require(_0x1f3522(0xe7)),currentVersion=require(_0x1f3522(0xfb)),socket=require(_0x1f3522(0xdf));module[_0x1f3522(0xd8)]={'upload_meta':{'method':_0x1f3522(0x104),'raw':!![]},'upload'(_0x25978c,_0x17dff5){const _0x5c3cff=_0x1f3522,{data:_0x21f5b7}=_0x25978c[_0x5c3cff(0xdd)]||{};if(!_0x21f5b7){_0x17dff5[_0x5c3cff(0xfa)](null);return;}const _0x1ca82d=crypto[_0x5c3cff(0xe0)](),_0x327162=path[_0x5c3cff(0xe2)](uploadsdir(),_0x1ca82d);logger[_0x5c3cff(0x101)](_0x5c3cff(0xfc)+_0x21f5b7[_0x5c3cff(0xf4)]+_0x5c3cff(0xf9)+_0x21f5b7['size']),_0x21f5b7['mv'](_0x327162,()=>{const _0x2ee91c=_0x5c3cff;_0x17dff5[_0x2ee91c(0xfa)]({'originalName':_0x21f5b7[_0x2ee91c(0xf4)],'uploadName':_0x1ca82d,'filePath':_0x327162});});},'get_meta':{'method':_0x1f3522(0xe9),'raw':!![]},'get'(_0x14dad8,_0x262fa6){const _0x266b4a=_0x1f3522,_0x425b34={'CdMgr':function(_0x4dde8c){return _0x4dde8c();}};_0x262fa6[_0x266b4a(0xea)](path[_0x266b4a(0xe2)](_0x425b34[_0x266b4a(0xed)](uploadsdir),_0x14dad8['query'][_0x266b4a(0x100)]));},async 'getGistToken'(){const _0xb7a267=_0x1f3522,_0x5a5ce0=await config[_0xb7a267(0xeb)]();return _0x5a5ce0[_0xb7a267(0x10b)]||gistSecret;},'uploadErrorToGist_meta':!![],async 'uploadErrorToGist'(){const _0x5bb07d=_0x1f3522,_0x4dedcb={'gZFnh':_0x5bb07d(0x10e),'xQJcG':function(_0x31e52d,_0x1f9a89){return _0x31e52d(_0x1f9a89);},'XncUx':_0x5bb07d(0xde)},_0x22664b=await fs[_0x5bb07d(0xe4)](getLogsFilePath(),{'encoding':_0x4dedcb['gZFnh']}),_0x79aa3c=await serverConnections[_0x5bb07d(0xf3)]();try{const _0x3d743b=await axios[_0x5bb07d(0xe1)][_0x5bb07d(0x104)](_0x5bb07d(0xd9),{'description':_0x5bb07d(0xe3)+currentVersion['version']+'\x20error\x20report','public':![],'files':{'logs.jsonl':{'content':_0x22664b},'os.json':{'content':JSON[_0x5bb07d(0x103)]({'release':os[_0x5bb07d(0x10c)](),'arch':os['arch'](),'machine':os[_0x5bb07d(0xec)](),'platform':os[_0x5bb07d(0x107)](),'type':os[_0x5bb07d(0xe5)]()},null,0x2)},'platform.json':{'content':JSON[_0x5bb07d(0x103)](_['omit']({...platformInfo},['defaultKeyfile',_0x5bb07d(0xe6)]),null,0x2)},'connections.json':{'content':JSON[_0x5bb07d(0x103)](_0x79aa3c,null,0x2)},'version.json':{'content':JSON['stringify'](currentVersion,null,0x2)}}},{'headers':{'Authorization':_0x5bb07d(0x10f)+await this[_0x5bb07d(0x102)](),'Content-Type':'application/json','Accept':'application/vnd.github.v3+json'}});return _0x3d743b[_0x5bb07d(0xfe)];}catch(_0xcb9065){return logger[_0x5bb07d(0xf2)](_0x4dedcb[_0x5bb07d(0x108)](extractErrorLogData,_0xcb9065),_0x4dedcb[_0x5bb07d(0xff)]),{'apiErrorMessage':_0xcb9065[_0x5bb07d(0x113)]};}},'deleteGist_meta':!![],async 'deleteGist'({url:_0x46fd82}){const _0x3411fd=_0x1f3522,_0x55faea={'TCDGq':'application/json','kYAVW':_0x3411fd(0x10a)},_0x547f6a=await axios[_0x3411fd(0xe1)][_0x3411fd(0xf6)](_0x46fd82,{'headers':{'Authorization':_0x3411fd(0x10f)+await this[_0x3411fd(0x102)](),'Content-Type':_0x55faea['TCDGq'],'Accept':_0x55faea[_0x3411fd(0xf5)]}});return!![];}};