'use strict';var _0x3e7502=_0x5eae;(function(_0x442b16,_0x2f565f){var _0x470a3f=_0x5eae,_0x45b5dd=_0x442b16();while(!![]){try{var _0x13cef8=parseInt(_0x470a3f(0x21a))/0x1+-parseInt(_0x470a3f(0x1e1))/0x2*(parseInt(_0x470a3f(0x252))/0x3)+-parseInt(_0x470a3f(0x1e9))/0x4*(-parseInt(_0x470a3f(0x209))/0x5)+-parseInt(_0x470a3f(0x214))/0x6*(-parseInt(_0x470a3f(0x20a))/0x7)+-parseInt(_0x470a3f(0x23a))/0x8*(parseInt(_0x470a3f(0x1ee))/0x9)+-parseInt(_0x470a3f(0x225))/0xa+parseInt(_0x470a3f(0x248))/0xb;if(_0x13cef8===_0x2f565f)break;else _0x45b5dd['push'](_0x45b5dd['shift']());}catch(_0x3ad4cd){_0x45b5dd['push'](_0x45b5dd['shift']());}}}(_0xfbdf,0x8b701));var express=require('..'),request=require('supertest'),utils=require(_0x3e7502(0x1ef));function _0x5eae(_0x265fdf,_0xf4e26d){var _0xfbdf0b=_0xfbdf();return _0x5eae=function(_0x5eaead,_0x5285f6){_0x5eaead=_0x5eaead-0x1d9;var _0x48775d=_0xfbdf0b[_0x5eaead];return _0x48775d;},_0x5eae(_0x265fdf,_0xf4e26d);}function _0xfbdf(){var _0x3ea6b3=['location','Host','nrpsr','72WagDgy','./support/utils','ugOcZ','eyWEk','dkjRb','set','Iynda','VEaZK','NKmnL','https://google.com?q=☃\x20§10','YKqet','ccwIE','shouldNotHaveBody','vvrTI','ujKVF','Accept','djPxE','pXQDI','%3Cla\x27me%3E','content-length','text/html','ldacc','ztGXH','lKsOx','SgGHx','rVzzD','lJNlY','705sISqMd','70IWDKCO','QHiZX','yaAMz','sYeYG','application/octet-stream','lTZmd','nFSMI','iHxfB','POlLe','IYMHW','163266XBkJnT','BvOnK','ZFIBc','shouldNotHaveHeader','eabfF','head','747794czoNiy','CLAAb','dQMPL','should\x20respond\x20with\x20text','Ibujs','https://google.com?q=%A710','scnjW','end','Found.\x20Redirecting\x20to\x20http://example.com/?param=%3Cscript%3Ealert(%22hax%22);%3C/script%3E','AKssK','when\x20accepting\x20html','3455380ILUpum','xIMEw','jFIbh','should\x20encode\x20the\x20url','get','OqUSk','jEytg','QXcOf','gIEBB','zKEmW','should\x20include\x20the\x20redirect\x20type','use','Content-Type','pCdyJ','should\x20respond\x20with\x20html','BksDR','DbYBG','<la\x27me>','http://example.com','YVqKu','mKxGu','595928TBWihu','sVecV','sYgiT','itDHy','should\x20ignore\x20the\x20body','<p>Found.\x20Redirecting\x20to\x20<a\x20href=\x22http://google.com\x22>http://google.com</a></p>','.redirect(url,\x20status)','raIiO','egZBs','OszuU','vsoKa','miUFh','<p>Moved\x20Permanently.\x20Redirecting\x20to\x20<a\x20href=\x22http://google.com\x22>http://google.com</a></p>','should\x20respond\x20with\x20an\x20empty\x20body','11657701IUqNWt','MOlQi','Location','.redirect(url)','ExrtA','pogAq','xiaMn','epgtc','Moved\x20Permanently.\x20Redirecting\x20to\x20http://google.com','hZYnl','33QUSjvz','Mktmx','tplwq','should\x20encode\x20\x22url\x22','SkbjM','JSiiw','uaFCo','http://example.com/?param=<script>alert(\x22hax\x22);</script>','res','redirect','UcuzS','<p>Found.\x20Redirecting\x20to\x20<a\x20href=\x22%3Cla&#39;me%3E\x22>%3Cla&#39;me%3E</a></p>','ejkxI','104774JhDcnv','aVfiS','expect','HrliW','http://google.com','JISAO','dGreD','PzgEh','260MLvNtD','QZymf'];_0xfbdf=function(){return _0x3ea6b3;};return _0xfbdf();}describe(_0x3e7502(0x1dc),function(){var _0x112a92=_0x3e7502,_0x3609d1={'BvOnK':_0x112a92(0x24a),'dGreD':function(_0xa514e0){return _0xa514e0();},'MOlQi':function(_0x51da24,_0x6056c1){return _0x51da24(_0x6056c1);},'QZymf':function(_0x4d381d,_0x334e85,_0x4c4f83){return _0x4d381d(_0x334e85,_0x4c4f83);},'djPxE':'should\x20default\x20to\x20a\x20302\x20redirect','jFIbh':_0x112a92(0x255),'POlLe':'should\x20not\x20touch\x20already-encoded\x20sequences\x20in\x20\x22url\x22','eabfF':'http://google.com','rVzzD':'should\x20set\x20the\x20response\x20status','lTZmd':function(_0x576224){return _0x576224();},'VEaZK':_0x112a92(0x22e),'gIEBB':function(_0x2e2e9c,_0x25d078){return _0x2e2e9c(_0x25d078);},'xIMEw':_0x112a92(0x1ec),'Mktmx':'text/html','uaFCo':function(_0x1b31b9,_0x477785){return _0x1b31b9===_0x477785;},'Ibujs':_0x112a92(0x1f9),'ujKVF':'%3Cla\x27me%3E','Recth':function(_0x3c91b4){return _0x3c91b4();},'HrliW':_0x112a92(0x233),'AKssK':'should\x20escape\x20the\x20url','scnjW':'ciBxx','JSiiw':'text/plain,\x20*/*','ncZFK':_0x112a92(0x250),'sYgiT':function(_0x3f04cd,_0xeffe8){return _0x3f04cd(_0xeffe8);},'SfJXj':_0x112a92(0x21d),'ugOcZ':_0x112a92(0x228),'Xulfm':_0x112a92(0x20e),'HYDsN':_0x112a92(0x247),'SgGHx':function(_0x1ce41c,_0x8e98a2,_0x1a4316){return _0x1ce41c(_0x8e98a2,_0x1a4316);},'QXcOf':'.redirect(status,\x20url)','sYeYG':function(_0x17d6c7,_0x4340d7,_0x2cd8d3){return _0x17d6c7(_0x4340d7,_0x2cd8d3);},'NKmnL':_0x112a92(0x240),'kdUZS':'when\x20the\x20request\x20method\x20is\x20HEAD','JISAO':_0x112a92(0x224),'CLAAb':'when\x20accepting\x20neither\x20text\x20or\x20html'};_0x3609d1[_0x112a92(0x206)](describe,_0x112a92(0x24b),function(){var _0x464526=_0x112a92,_0x1ffee2={'xiaMn':_0x464526(0x1e5),'epgtc':_0x3609d1['BvOnK'],'nFSMI':'https://google.com?q=%E2%98%83%20%C2%A710','ztGXH':_0x464526(0x21f),'dQMPL':function(_0x5aeca7){var _0x5e523a=_0x464526;return _0x3609d1[_0x5e523a(0x1e7)](_0x5aeca7);},'Iynda':function(_0x2ad227,_0x308ad0){var _0x36d4d1=_0x464526;return _0x3609d1[_0x36d4d1(0x249)](_0x2ad227,_0x308ad0);}};_0x3609d1[_0x464526(0x1ea)](it,_0x3609d1[_0x464526(0x1fe)],function(_0x3ada2a){var _0x432c36=_0x464526,_0x5ba6d={'IYMHW':_0x1ffee2[_0x432c36(0x24e)]},_0x5e6a05=express();_0x5e6a05[_0x432c36(0x230)](function(_0x2983e3,_0x4db205){var _0x15cc02=_0x432c36;_0x4db205['redirect'](_0x5ba6d[_0x15cc02(0x213)]);}),request(_0x5e6a05)['get']('/')[_0x432c36(0x1e3)]('location',_0x1ffee2[_0x432c36(0x24e)])['expect'](0x12e,_0x3ada2a);}),it(_0x3609d1[_0x464526(0x227)],function(_0x3f6051){var _0x44f9af=_0x464526,_0x1800f8=express();_0x1800f8[_0x44f9af(0x230)](function(_0x17c9f0,_0x4062b6){var _0x1fdb7e=_0x44f9af;_0x4062b6[_0x1fdb7e(0x1dd)](_0x1fdb7e(0x1f7));}),request(_0x1800f8)[_0x44f9af(0x229)]('/')['expect'](_0x1ffee2[_0x44f9af(0x24f)],_0x1ffee2[_0x44f9af(0x210)])['expect'](0x12e,_0x3f6051);}),it(_0x3609d1[_0x464526(0x212)],function(_0x3091ff){var _0x40d01c=_0x464526,_0x13abf1={'pogAq':_0x1ffee2[_0x40d01c(0x204)]},_0x2ac194=_0x1ffee2[_0x40d01c(0x21c)](express);_0x2ac194[_0x40d01c(0x230)](function(_0x81ed4a,_0x54956e){var _0x3d1473=_0x40d01c;_0x54956e['redirect'](_0x13abf1[_0x3d1473(0x24d)]);}),_0x1ffee2[_0x40d01c(0x1f4)](request,_0x2ac194)[_0x40d01c(0x229)]('/')['expect'](_0x1ffee2['epgtc'],'https://google.com?q=%A710')[_0x40d01c(0x1e3)](0x12e,_0x3091ff);});}),describe(_0x3609d1[_0x112a92(0x22c)],function(){var _0x6053c7=_0x112a92,_0xb06d24={'egZBs':_0x3609d1[_0x6053c7(0x218)]};it(_0x3609d1[_0x6053c7(0x207)],function(_0x28be09){var _0x1bc2f7=_0x6053c7,_0x2a170a=express();_0x2a170a[_0x1bc2f7(0x230)](function(_0x5982cb,_0x58b596){var _0x353100=_0x1bc2f7;_0x58b596[_0x353100(0x1dd)](0x12f,_0x353100(0x1e5));}),request(_0x2a170a)['get']('/')[_0x1bc2f7(0x1e3)]('Location',_0xb06d24[_0x1bc2f7(0x242)])[_0x1bc2f7(0x1e3)](0x12f,_0x28be09);});}),_0x3609d1[_0x112a92(0x20d)](describe,_0x3609d1[_0x112a92(0x1f6)],function(){var _0x113c8d=_0x112a92,_0x372201={'UcuzS':_0x113c8d(0x1e5)};if(_0x113c8d(0x22a)!==_0x3609d1[_0x113c8d(0x1f5)])it(_0x3609d1['rVzzD'],function(_0x19d918){var _0x66b31d=_0x113c8d,_0x49941d=_0x3609d1[_0x66b31d(0x20f)](express);_0x49941d[_0x66b31d(0x230)](function(_0x5a2dbc,_0x20a180){var _0x483f53=_0x66b31d;_0x20a180[_0x483f53(0x1dd)](_0x483f53(0x1e5),0x12f);}),_0x3609d1[_0x66b31d(0x249)](request,_0x49941d)[_0x66b31d(0x229)]('/')['expect'](_0x3609d1[_0x66b31d(0x215)],_0x66b31d(0x1e5))['expect'](0x12f,_0x19d918);});else{var _0x2cee12={'lJNlY':_0x372201[_0x113c8d(0x1de)]},_0x2afb0d=_0x4fe672();_0x2afb0d[_0x113c8d(0x230)](function(_0x517b63,_0x47be84){var _0x19a58b=_0x113c8d;_0x47be84[_0x19a58b(0x1dd)](_0x2cee12[_0x19a58b(0x208)]);}),_0x44b8d5(_0x2afb0d)['get']('/')['expect'](_0x113c8d(0x1eb),_0x372201['UcuzS'])[_0x113c8d(0x1e3)](0x12e,_0x54ddd2);}}),describe(_0x3609d1['kdUZS'],function(){var _0x2be177=_0x112a92,_0x5631af={'ejkxI':function(_0x327556,_0x5211ca){return _0x3609d1['gIEBB'](_0x327556,_0x5211ca);},'jEytg':_0x3609d1[_0x2be177(0x226)],'raIiO':_0x3609d1[_0x2be177(0x253)],'aVfiS':function(_0x2a285c,_0x2ae07e){var _0x48abbe=_0x2be177;return _0x3609d1[_0x48abbe(0x1da)](_0x2a285c,_0x2ae07e);},'smPcG':_0x3609d1[_0x2be177(0x21e)],'QHiZX':_0x3609d1[_0x2be177(0x215)]};it(_0x2be177(0x23e),function(_0x352870){var _0xc4429a=_0x2be177,_0x273fdc={'BksDR':'http://google.com','ExrtA':function(_0x827fb4,_0x38a27d){var _0x477b55=_0x5eae;return _0x5631af[_0x477b55(0x1e0)](_0x827fb4,_0x38a27d);},'YKqet':_0x5631af[_0xc4429a(0x22b)],'pXQDI':_0x5631af[_0xc4429a(0x241)],'ihlfY':_0xc4429a(0x231),'pCdyJ':_0xc4429a(0x200)};if(_0x5631af[_0xc4429a(0x1e2)](_0xc4429a(0x1f9),_0x5631af['smPcG'])){var _0x5cbac6=express();_0x5cbac6[_0xc4429a(0x230)](function(_0x13ced0,_0x2a78fa){var _0x26add2=_0xc4429a;_0x2a78fa[_0x26add2(0x1dd)](_0x273fdc[_0x26add2(0x234)]);}),request(_0x5cbac6)[_0xc4429a(0x219)]('/')[_0xc4429a(0x1e3)](0x12e)[_0xc4429a(0x1e3)](_0x5631af[_0xc4429a(0x20b)],_0xc4429a(0x1e5))[_0xc4429a(0x1e3)](utils[_0xc4429a(0x1fa)]())[_0xc4429a(0x221)](_0x352870);}else{var _0x503f62=_0x15ea2a();_0x503f62[_0xc4429a(0x230)](function(_0x428715,_0x9cf5d1){_0x9cf5d1['redirect']('<la\x27me>');}),_0x273fdc[_0xc4429a(0x24c)](_0x1e924c,_0x503f62)['get']('/')['set'](_0x273fdc[_0xc4429a(0x1f8)],'http://example.com')[_0xc4429a(0x1f3)]('Accept',_0x273fdc[_0xc4429a(0x1ff)])[_0xc4429a(0x1e3)](_0x273fdc['ihlfY'],/html/)[_0xc4429a(0x1e3)](_0xc4429a(0x24a),_0x273fdc[_0xc4429a(0x232)])['expect'](0x12e,_0xc4429a(0x1df),_0xc7ddd7);}});}),_0x3609d1[_0x112a92(0x20d)](describe,_0x3609d1[_0x112a92(0x1e6)],function(){var _0x195566=_0x112a92,_0x15ea93={'dkjRb':function(_0x3f26fd){return _0x3f26fd();},'itDHy':function(_0x50868f,_0x2b5721){var _0x3d418b=_0x5eae;return _0x3609d1[_0x3d418b(0x22d)](_0x50868f,_0x2b5721);},'PzgEh':_0x3609d1['Mktmx'],'lKsOx':_0x195566(0x231),'mKxGu':_0x3609d1[_0x195566(0x215)],'gDlHc':_0x3609d1[_0x195566(0x218)],'miUFh':_0x3609d1[_0x195566(0x1fc)],'nrpsr':function(_0x44d03a){return _0x3609d1['Recth'](_0x44d03a);}};_0x3609d1[_0x195566(0x1ea)](it,_0x3609d1[_0x195566(0x1e4)],function(_0x199e8a){var _0x24f403=_0x195566,_0xb62552=_0x15ea93[_0x24f403(0x1f2)](express);_0xb62552[_0x24f403(0x230)](function(_0x2eafba,_0x344c9b){var _0xc562c9=_0x24f403;_0x344c9b['redirect'](_0xc562c9(0x1e5));}),_0x15ea93['itDHy'](request,_0xb62552)[_0x24f403(0x229)]('/')[_0x24f403(0x1f3)](_0x24f403(0x1fd),_0x15ea93[_0x24f403(0x1e8)])[_0x24f403(0x1e3)](_0x15ea93[_0x24f403(0x205)],/html/)[_0x24f403(0x1e3)](_0x15ea93[_0x24f403(0x239)],_0x15ea93['gDlHc'])[_0x24f403(0x1e3)](0x12e,_0x24f403(0x23f),_0x199e8a);}),it(_0x3609d1[_0x195566(0x223)],function(_0x47c72f){var _0x4c09da=_0x195566,_0x3630c6=_0x15ea93['dkjRb'](express);_0x3630c6[_0x4c09da(0x230)](function(_0x172026,_0x666dd5){var _0x421ee4=_0x4c09da;_0x666dd5[_0x421ee4(0x1dd)](_0x421ee4(0x236));}),request(_0x3630c6)[_0x4c09da(0x229)]('/')[_0x4c09da(0x1f3)](_0x4c09da(0x1ec),_0x4c09da(0x237))[_0x4c09da(0x1f3)]('Accept',_0x4c09da(0x202))[_0x4c09da(0x1e3)](_0x15ea93[_0x4c09da(0x205)],/html/)['expect'](_0x15ea93['mKxGu'],_0x15ea93[_0x4c09da(0x245)])['expect'](0x12e,_0x4c09da(0x1df),_0x47c72f);}),_0x3609d1[_0x195566(0x1ea)](it,_0x195566(0x22f),function(_0x1355b1){var _0x13196d=_0x195566,_0x24b054=_0x15ea93[_0x13196d(0x1ed)](express);_0x24b054['use'](function(_0x1063e4,_0xe76e36){var _0x5e134f=_0x13196d;_0xe76e36[_0x5e134f(0x1dd)](0x12d,_0x5e134f(0x1e5));}),_0x15ea93[_0x13196d(0x23d)](request,_0x24b054)[_0x13196d(0x229)]('/')[_0x13196d(0x1f3)](_0x13196d(0x1fd),'text/html')[_0x13196d(0x1e3)](_0x13196d(0x231),/html/)['expect'](_0x15ea93[_0x13196d(0x239)],_0x13196d(0x1e5))[_0x13196d(0x1e3)](0x12d,_0x13196d(0x246),_0x1355b1);});}),describe('when\x20accepting\x20text',function(){var _0x2e97c0=_0x112a92,_0x2cc36d={'yaAMz':_0x3609d1[_0x2e97c0(0x1d9)],'sVecV':_0x2e97c0(0x231),'iHxfB':_0x3609d1[_0x2e97c0(0x215)],'vvrTI':function(_0x32a7f4){var _0x487c76=_0x2e97c0;return _0x3609d1[_0x487c76(0x20f)](_0x32a7f4);},'SkbjM':function(_0x232641,_0x31ec67){var _0x2026bd=_0x2e97c0;return _0x3609d1[_0x2026bd(0x23c)](_0x232641,_0x31ec67);},'OszuU':_0x2e97c0(0x1ec)};it(_0x3609d1['SfJXj'],function(_0x3f7689){var _0x195861=_0x2e97c0,_0x3d7708=express();_0x3d7708[_0x195861(0x230)](function(_0x493cd0,_0x2b9f84){var _0x24fccd=_0x195861;_0x2b9f84[_0x24fccd(0x1dd)]('http://google.com');}),request(_0x3d7708)[_0x195861(0x229)]('/')['set']('Accept',_0x2cc36d[_0x195861(0x20c)])[_0x195861(0x1e3)](_0x2cc36d[_0x195861(0x23b)],/plain/)[_0x195861(0x1e3)](_0x2cc36d[_0x195861(0x211)],_0x195861(0x1e5))[_0x195861(0x1e3)](0x12e,'Found.\x20Redirecting\x20to\x20http://google.com',_0x3f7689);}),it(_0x3609d1[_0x2e97c0(0x1f0)],function(_0x403c79){var _0x424ba8=_0x2e97c0,_0x4415f2={'nmXHI':function(_0x15f796){var _0x27e6e3=_0x5eae;return _0x2cc36d[_0x27e6e3(0x1fb)](_0x15f796);},'vsoKa':_0x424ba8(0x24a)},_0x4b128c=express();_0x4b128c[_0x424ba8(0x230)](function(_0x217e6d,_0x404d68){var _0x497d2c=_0x424ba8,_0x36a189={'YVqKu':function(_0x106f2e){return _0x4415f2['nmXHI'](_0x106f2e);},'ldacc':function(_0x15744f,_0x545843){return _0x15744f(_0x545843);},'hZYnl':_0x4415f2[_0x497d2c(0x244)]};if(_0x497d2c(0x235)===_0x497d2c(0x235))_0x404d68['redirect'](_0x497d2c(0x1db));else{var _0x4b3e6a=_0x36a189[_0x497d2c(0x238)](_0x580f5f);_0x4b3e6a[_0x497d2c(0x230)](function(_0x3ff149,_0x15249f){var _0x24d13a=_0x497d2c;_0x15249f[_0x24d13a(0x1dd)](0x12f,_0x24d13a(0x1e5));}),_0x36a189[_0x497d2c(0x203)](_0x5b065a,_0x4b3e6a)[_0x497d2c(0x229)]('/')[_0x497d2c(0x1e3)](_0x36a189[_0x497d2c(0x251)],'http://google.com')[_0x497d2c(0x1e3)](0x12f,_0x29a1b0);}}),_0x2cc36d[_0x424ba8(0x256)](request,_0x4b128c)['get']('/')['set'](_0x2cc36d[_0x424ba8(0x243)],_0x424ba8(0x237))[_0x424ba8(0x1f3)]('Accept',_0x2cc36d[_0x424ba8(0x20c)])[_0x424ba8(0x1e3)](_0x2cc36d['sVecV'],/plain/)[_0x424ba8(0x1e3)](_0x424ba8(0x24a),'http://example.com/?param=%3Cscript%3Ealert(%22hax%22);%3C/script%3E')[_0x424ba8(0x1e3)](0x12e,_0x424ba8(0x222),_0x403c79);}),it(_0x2e97c0(0x22f),function(_0x4c6634){var _0x4ff93f=_0x2e97c0,_0x302ad8={'ZFIBc':_0x3609d1[_0x4ff93f(0x220)]},_0x4ee975=express();_0x4ee975[_0x4ff93f(0x230)](function(_0x3b3f16,_0x129782){var _0x192423=_0x4ff93f;_0x302ad8[_0x192423(0x216)]!==_0x192423(0x254)?_0x129782[_0x192423(0x1dd)](0x12d,_0x192423(0x1e5)):_0x4d7aba[_0x192423(0x1dd)]('http://google.com');}),_0x3609d1[_0x4ff93f(0x22d)](request,_0x4ee975)[_0x4ff93f(0x229)]('/')[_0x4ff93f(0x1f3)](_0x4ff93f(0x1fd),_0x3609d1[_0x4ff93f(0x1d9)])[_0x4ff93f(0x1e3)](_0x4ff93f(0x231),/plain/)[_0x4ff93f(0x1e3)](_0x4ff93f(0x24a),_0x3609d1[_0x4ff93f(0x218)])[_0x4ff93f(0x1e3)](0x12d,_0x3609d1['ncZFK'],_0x4c6634);});}),_0x3609d1['SgGHx'](describe,_0x3609d1[_0x112a92(0x21b)],function(){var _0x5db720=_0x112a92;_0x3609d1[_0x5db720(0x1da)](_0x5db720(0x1f1),_0x5db720(0x1f1))?it(_0x3609d1['HYDsN'],function(_0x578dd2){var _0x417707=_0x5db720,_0x270b9b=_0x3609d1[_0x417707(0x1e7)](express);_0x270b9b[_0x417707(0x230)](function(_0x25af6a,_0xe75246){var _0x701bdd=_0x417707;_0xe75246[_0x701bdd(0x1dd)]('http://google.com');}),_0x3609d1['gIEBB'](request,_0x270b9b)[_0x417707(0x229)]('/')[_0x417707(0x1f3)](_0x417707(0x1fd),_0x3609d1['Xulfm'])[_0x417707(0x1e3)](0x12e)[_0x417707(0x1e3)](_0x417707(0x1eb),_0x417707(0x1e5))['expect'](_0x417707(0x201),'0')[_0x417707(0x1e3)](utils[_0x417707(0x217)](_0x417707(0x231)))['expect'](utils[_0x417707(0x1fa)]())['end'](_0x578dd2);}):_0x477ea3[_0x5db720(0x1dd)](0x12d,_0x5db720(0x1e5));});});