'use strict';const _0xb1b624=_0x3e85;(function(_0xf4f067,_0x5e94c0){const _0x2b5545=_0x3e85,_0x498931=_0xf4f067();while(!![]){try{const _0x2a3483=-parseInt(_0x2b5545(0x1ad))/0x1*(-parseInt(_0x2b5545(0x182))/0x2)+-parseInt(_0x2b5545(0x170))/0x3*(-parseInt(_0x2b5545(0x144))/0x4)+parseInt(_0x2b5545(0x156))/0x5*(parseInt(_0x2b5545(0x1a8))/0x6)+-parseInt(_0x2b5545(0x146))/0x7+parseInt(_0x2b5545(0x18e))/0x8*(-parseInt(_0x2b5545(0x14a))/0x9)+parseInt(_0x2b5545(0x1a4))/0xa*(-parseInt(_0x2b5545(0x164))/0xb)+parseInt(_0x2b5545(0x148))/0xc;if(_0x2a3483===_0x5e94c0)break;else _0x498931['push'](_0x498931['shift']());}catch(_0x1372b1){_0x498931['push'](_0x498931['shift']());}}}(_0x1c2d,0xeda64));function _0x3e85(_0x101bfa,_0x5c2fb3){const _0x1c2d67=_0x1c2d();return _0x3e85=function(_0x3e8570,_0x42c481){_0x3e8570=_0x3e8570-0x141;let _0x337d85=_0x1c2d67[_0x3e8570];return _0x337d85;},_0x3e85(_0x101bfa,_0x5c2fb3);}function _0x1c2d(){const _0x38c32d=['NGzWP','Redirecting\x20to\x20<a\x20href=\x22','2792OYmGxl','jRJgg','vVUsJ','ctx.redirect(url)','/login','xfunt','uBGog','should\x20auto\x20fix\x20not\x20encode\x20url','response','should\x20formatting\x20url\x20before\x20redirect','back','type','when\x20status\x20is\x20304','&amp;','GPRkq','/index.html','YaTAx','http://google.com','text/html','&gt;','aNnYd','HQDYX','129590QmyGXq','when\x20html\x20is\x20accepted','header','location','27198AQwYGA','status','QXGek','jzuBA','wfjxg','1979aKNDHu','FkSSx','DIVxg','SCQwi','when\x20text\x20is\x20accepted','</a>.','2770164sgXgnr','gEiGH','12617171VGONap','IKvjG','34576908oTlmwT','&quot;','31302QrLhiW','should\x20respond\x20with\x20text','HWdPq','headers','with\x20\x22back\x22','should\x20change\x20the\x20status\x20code','replace','aLirZ','http://google.com/','iylqV','callback','XkRFV','515flMsCj','http://google.com/%F0%9F%98%93','NHYoF','referrer','fuxMe','../../test-helpers/context','../..','IJsMa','bbYJK','should\x20default\x20to\x20alt','HMlKo','fOpgy','redirect','when\x20content-type\x20was\x20present','1562OaNMdq','should\x20respond\x20with\x20html','DZHof','should\x20default\x20redirect\x20to\x20/','should\x20redirect\x20to\x20the\x20given\x20url','strictEqual','Redirecting\x20to\x20','assert','tLLHn','SVlxc','luciW','OfChh','3ClurvZ','fUBNX','mkjnl','kPuvB','supertest','JAIaw','JvxgI','mqZXy','http://google.com/@apple.com','Awitg','ZLMaN','hPlMe','ZXRdo','body','req','wKPOd','<script>','0|1|4|3|2','1808QmaYpE','get','should\x20escape\x20the\x20url','content-type','text/html;\x20charset=utf-8','esYDb','text/plain','&lt;','accept','http://google.com/ðŸ˜“'];_0x1c2d=function(){return _0x38c32d;};return _0x1c2d();}const assert=require(_0xb1b624(0x16b)),request=require(_0xb1b624(0x174)),context=require(_0xb1b624(0x15b)),Koa=require(_0xb1b624(0x15c));describe(_0xb1b624(0x191),()=>{const _0x1afbef=_0xb1b624,_0x58a1b1={'ZLMaN':function(_0x3cbf0f,_0x538dd2){return _0x3cbf0f+_0x538dd2;},'IJsMa':'http://google.com','XkRFV':_0x1afbef(0x178),'SsqVh':_0x1afbef(0x157),'aLirZ':function(_0x3156ff,_0x177027){return _0x3156ff===_0x177027;},'puajS':_0x1afbef(0x1ac),'gEiGH':function(_0x1b4817,_0x5b8bab){return _0x1b4817(_0x5b8bab);},'fOpgy':function(_0xf582b0){return _0xf582b0();},'JvxgI':_0x1afbef(0x198),'YaTAx':_0x1afbef(0x19d),'HWdPq':function(_0x41045e){return _0x41045e();},'JAIaw':function(_0x4aad84,_0x419db7,_0x34e32a){return _0x4aad84(_0x419db7,_0x34e32a);},'seNdk':_0x1afbef(0x15f),'JbGUO':_0x1afbef(0x152),'DIVxg':_0x1afbef(0x185),'IovxK':function(_0x501fa7){return _0x501fa7();},'xfunt':_0x1afbef(0x1a0),'NHYoF':function(_0x58cc95,_0x244736,_0x517dea){return _0x58cc95(_0x244736,_0x517dea);},'DZHof':'text/plain','uBGog':_0x1afbef(0x14b),'mqZXy':function(_0x552832,_0x31a7fe){return _0x552832!==_0x31a7fe;},'kPuvB':_0x1afbef(0x16f),'vVUsJ':_0x1afbef(0x141),'HMlKo':'should\x20not\x20change\x20the\x20status\x20code','fUBNX':function(_0x17fbc1,_0x1c439b,_0x530b29){return _0x17fbc1(_0x1c439b,_0x530b29);},'mkjnl':_0x1afbef(0x14f),'GPRkq':_0x1afbef(0x195),'fieHB':_0x1afbef(0x1a5),'ZxtyO':function(_0x1dc5c9,_0x1dfa36,_0x3886d1){return _0x1dc5c9(_0x1dfa36,_0x3886d1);},'IKvjG':_0x1afbef(0x19a),'bvfGb':function(_0x576c94,_0x2caf56,_0x3ad1e3){return _0x576c94(_0x2caf56,_0x3ad1e3);}};_0x58a1b1['fUBNX'](it,_0x1afbef(0x168),()=>{const _0x413650=_0x1afbef;if(_0x413650(0x16e)===_0x413650(0x1aa))vLIZwh[_0x413650(0x17a)](0x1,0x1);else{const _0x4ed1a1=context();_0x4ed1a1[_0x413650(0x162)](_0x58a1b1[_0x413650(0x15d)]),assert[_0x413650(0x169)](_0x4ed1a1['response'][_0x413650(0x1a6)][_0x413650(0x1a7)],'http://google.com/'),assert['strictEqual'](_0x4ed1a1[_0x413650(0x1a9)],0x12e);}}),_0x58a1b1[_0x1afbef(0x158)](it,_0x1afbef(0x197),()=>{const _0x475f00=_0x1afbef,_0x3fe3e2=context();_0x3fe3e2['redirect']('http://google.com\x5c@apple.com'),assert[_0x475f00(0x169)](_0x3fe3e2[_0x475f00(0x196)]['header'][_0x475f00(0x1a7)],_0x58a1b1[_0x475f00(0x155)]),assert[_0x475f00(0x169)](_0x3fe3e2[_0x475f00(0x1a9)],0x12e);}),it(_0x58a1b1[_0x1afbef(0x19c)],_0x5cefab=>{const _0x5831e=_0x1afbef,_0x41dd91={'fuxMe':_0x5831e(0x198),'jzuBA':_0x58a1b1['SsqVh'],'hPlMe':_0x58a1b1[_0x5831e(0x15d)]};if(_0x58a1b1[_0x5831e(0x151)](_0x5831e(0x1ac),_0x58a1b1['puajS'])){const _0x2b9ea4=new Koa();_0x2b9ea4['use'](_0x322d38=>{const _0x5b5c11=_0x5831e,_0x5e3660={'aNnYd':_0x41dd91[_0x5b5c11(0x15a)]};if(_0x5b5c11(0x18c)!=='fiXSb')_0x322d38[_0x5b5c11(0x162)]('http://google.com/ðŸ˜“');else{const _0x5d7027=_0x5ac83a();_0x5d7027[_0x5b5c11(0x162)](_0x5e3660[_0x5b5c11(0x1a2)]),_0x56b88c[_0x5b5c11(0x169)](_0x5d7027[_0x5b5c11(0x196)][_0x5b5c11(0x1a6)][_0x5b5c11(0x1a7)],'/');}}),_0x58a1b1[_0x5831e(0x145)](request,_0x2b9ea4[_0x5831e(0x154)]())[_0x5831e(0x183)]('/')['end']((_0x5d2a66,_0x28c63f)=>{const _0x5b8607=_0x5831e,_0x296b3f=_0x5b8607(0x181)['split']('|');let _0x5a7678=0x0;while(!![]){switch(_0x296b3f[_0x5a7678++]){case'0':eval('Math[\'PI\'] * 2;');continue;case'1':if(_0x5d2a66)return _0x5cefab(_0x5d2a66);continue;case'2':_0x5cefab();continue;case'3':assert['strictEqual'](_0x28c63f['headers'][_0x5b8607(0x1a7)],_0x41dd91[_0x5b8607(0x1ab)]);continue;case'4':assert[_0x5b8607(0x169)](_0x28c63f[_0x5b8607(0x1a9)],0x12e);continue;}break;}});}else{const _0x487323={'ZXRdo':function(_0x16f249){return _0x16f249();},'ZPdfj':_0x41dd91[_0x5831e(0x17b)],'ZPCXJ':_0x5831e(0x188)};_0x3009ca(_0x5831e(0x14b),()=>{const _0x2fc899=_0x5831e,_0x235619=_0x487323[_0x2fc899(0x17c)](_0x4422e9),_0x1d81f0=_0x487323['ZPdfj'];_0x235619[_0x2fc899(0x1a6)][_0x2fc899(0x18a)]=_0x487323['ZPCXJ'],_0x235619[_0x2fc899(0x162)](_0x1d81f0),_0x28ea7f['strictEqual'](_0x235619[_0x2fc899(0x17d)],_0x2fc899(0x16a)+_0x1d81f0+'/.');});}}),describe(_0x1afbef(0x14e),()=>{const _0xd23e48=_0x1afbef,_0x289b09={'iylqV':function(_0x17823c){return _0x17823c();},'jRJgg':_0xd23e48(0x192)};it('should\x20redirect\x20to\x20Referrer',()=>{const _0x4706b5=_0xd23e48,_0x35dc58=_0x289b09[_0x4706b5(0x153)](context);_0x35dc58[_0x4706b5(0x17e)][_0x4706b5(0x14d)][_0x4706b5(0x159)]=_0x4706b5(0x192),_0x35dc58[_0x4706b5(0x162)](_0x4706b5(0x198)),assert[_0x4706b5(0x169)](_0x35dc58[_0x4706b5(0x196)][_0x4706b5(0x1a6)]['location'],_0x4706b5(0x192));}),_0x58a1b1[_0xd23e48(0x175)](it,'should\x20redirect\x20to\x20Referer',()=>{const _0x31138b=_0xd23e48,_0x433979=context();_0x433979[_0x31138b(0x17e)]['headers']['referer']=_0x289b09[_0x31138b(0x18f)],_0x433979[_0x31138b(0x162)](_0x31138b(0x198)),assert[_0x31138b(0x169)](_0x433979[_0x31138b(0x196)][_0x31138b(0x1a6)][_0x31138b(0x1a7)],'/login');}),_0x58a1b1[_0xd23e48(0x175)](it,_0x58a1b1['seNdk'],()=>{const _0x4188d5=_0xd23e48,_0x10d1f9=_0x58a1b1[_0x4188d5(0x161)](context);_0x10d1f9['redirect'](_0x58a1b1[_0x4188d5(0x176)],_0x58a1b1[_0x4188d5(0x19e)]),assert[_0x4188d5(0x169)](_0x10d1f9[_0x4188d5(0x196)][_0x4188d5(0x1a6)][_0x4188d5(0x1a7)],_0x4188d5(0x19d));}),it(_0xd23e48(0x167),()=>{const _0x472356=_0xd23e48,_0x33e906={'aAuca':_0x472356(0x186)};if('Awitg'!==_0x472356(0x179)){const _0x94fc37=_0x5a21b4(),_0x4e2e9d=_0x472356(0x152);_0x94fc37['header'][_0x472356(0x18a)]=_0x472356(0x1a0),_0x94fc37[_0x472356(0x162)](_0x4e2e9d),_0x46dd52[_0x472356(0x169)](_0x94fc37['response'][_0x472356(0x1a6)]['content-type'],_0x33e906['aAuca']),_0x46adae[_0x472356(0x169)](_0x94fc37['body'],_0x472356(0x18d)+_0x4e2e9d+'\x22>'+_0x4e2e9d+_0x472356(0x143));}else{const _0x5569ac=_0x58a1b1[_0x472356(0x14c)](context);_0x5569ac[_0x472356(0x162)](_0x58a1b1['JvxgI']),assert[_0x472356(0x169)](_0x5569ac[_0x472356(0x196)][_0x472356(0x1a6)][_0x472356(0x1a7)],'/');}});}),_0x58a1b1[_0x1afbef(0x158)](describe,_0x58a1b1['fieHB'],()=>{const _0x14a3da=_0x1afbef,_0x18aefb={'bbYJK':function(_0x24fbda){return _0x58a1b1['IovxK'](_0x24fbda);},'SVlxc':_0x58a1b1[_0x14a3da(0x193)]};it(_0x14a3da(0x165),()=>{const _0x548ada=_0x14a3da,_0x1e11c6=context(),_0x5974ad=_0x58a1b1['JbGUO'];_0x1e11c6[_0x548ada(0x1a6)]['accept']=_0x548ada(0x1a0),_0x1e11c6[_0x548ada(0x162)](_0x5974ad),assert[_0x548ada(0x169)](_0x1e11c6['response'][_0x548ada(0x1a6)][_0x58a1b1[_0x548ada(0x1af)]],_0x548ada(0x186)),assert[_0x548ada(0x169)](_0x1e11c6['body'],_0x548ada(0x18d)+_0x5974ad+'\x22>'+_0x5974ad+'</a>.');}),_0x58a1b1[_0x14a3da(0x158)](it,_0x14a3da(0x184),()=>{const _0x12f0c7=_0x14a3da,_0x37dc83=_0x18aefb[_0x12f0c7(0x15e)](context);let _0x24c741=_0x12f0c7(0x180);_0x37dc83[_0x12f0c7(0x1a6)][_0x12f0c7(0x18a)]=_0x18aefb[_0x12f0c7(0x16d)],_0x37dc83[_0x12f0c7(0x162)](_0x24c741),_0x24c741=escape(_0x24c741),assert[_0x12f0c7(0x169)](_0x37dc83[_0x12f0c7(0x196)][_0x12f0c7(0x1a6)][_0x12f0c7(0x185)],_0x12f0c7(0x186)),assert[_0x12f0c7(0x169)](_0x37dc83['body'],_0x12f0c7(0x18d)+_0x24c741+'\x22>'+_0x24c741+'</a>.');});}),describe(_0x1afbef(0x142),()=>{const _0xa3477f=_0x1afbef;it(_0x58a1b1[_0xa3477f(0x194)],()=>{const _0x1ba605=_0xa3477f,_0x57012e=context(),_0x5a452c=_0x1ba605(0x19f);_0x57012e[_0x1ba605(0x1a6)][_0x1ba605(0x18a)]=_0x58a1b1[_0x1ba605(0x166)],_0x57012e[_0x1ba605(0x162)](_0x5a452c),assert[_0x1ba605(0x169)](_0x57012e[_0x1ba605(0x17d)],_0x1ba605(0x16a)+_0x5a452c+'/.');});}),_0x58a1b1['ZxtyO'](describe,'when\x20status\x20is\x20301',()=>{const _0x282e55=_0x1afbef;_0x58a1b1[_0x282e55(0x177)](_0x58a1b1[_0x282e55(0x173)],_0x58a1b1[_0x282e55(0x190)])?it(_0x58a1b1[_0x282e55(0x160)],()=>{const _0x1d47b9=_0x282e55,_0x5285f7=context(),_0x4a6fcf=_0x1d47b9(0x19f);_0x5285f7['status']=0x12d,_0x5285f7[_0x1d47b9(0x1a6)][_0x1d47b9(0x18a)]=_0x1d47b9(0x188),_0x5285f7[_0x1d47b9(0x162)](_0x1d47b9(0x19f)),assert['strictEqual'](_0x5285f7[_0x1d47b9(0x1a9)],0x12d),assert[_0x1d47b9(0x169)](_0x5285f7[_0x1d47b9(0x17d)],'Redirecting\x20to\x20'+_0x4a6fcf+'/.');}):_0x24c4d2[_0x282e55(0x162)](_0x282e55(0x18b));}),describe(_0x58a1b1[_0x1afbef(0x147)],()=>{const _0x97564e=_0x1afbef,_0x5311b8={'wKPOd':_0x97564e(0x19f)};_0x58a1b1[_0x97564e(0x171)](it,_0x58a1b1[_0x97564e(0x172)],()=>{const _0x3cc6d7=_0x97564e,_0x12f309=context(),_0x3cc7ac=_0x5311b8[_0x3cc6d7(0x17f)];_0x12f309[_0x3cc6d7(0x1a9)]=0x130,_0x12f309[_0x3cc6d7(0x1a6)][_0x3cc6d7(0x18a)]=_0x3cc6d7(0x188),_0x12f309['redirect'](_0x3cc6d7(0x19f)),assert[_0x3cc6d7(0x169)](_0x12f309[_0x3cc6d7(0x1a9)],0x12e),assert[_0x3cc6d7(0x169)](_0x12f309[_0x3cc6d7(0x17d)],_0x3cc6d7(0x16a)+_0x3cc7ac+'/.');});}),_0x58a1b1['bvfGb'](describe,_0x1afbef(0x163),()=>{it('should\x20overwrite\x20content-type',()=>{const _0xb48aec=_0x3e85,_0x3ecc42=_0x58a1b1[_0xb48aec(0x161)](context);_0x3ecc42[_0xb48aec(0x17d)]={};const _0x3a2105=_0x58a1b1['IJsMa'];_0x3ecc42[_0xb48aec(0x1a6)][_0xb48aec(0x18a)]=_0xb48aec(0x188),_0x3ecc42[_0xb48aec(0x162)](_0xb48aec(0x19f)),assert['strictEqual'](_0x3ecc42[_0xb48aec(0x1a9)],0x12e),assert[_0xb48aec(0x169)](_0x3ecc42[_0xb48aec(0x17d)],'Redirecting\x20to\x20'+_0x3a2105+'/.'),assert['strictEqual'](_0x3ecc42[_0xb48aec(0x199)],_0x58a1b1['DZHof']);});});});function escape(_0x3d9463){const _0x31d51e=_0xb1b624,_0x1a1adc={'esYDb':function(_0x18c95d,_0xa4a8dc){return _0x18c95d(_0xa4a8dc);},'HQDYX':_0x31d51e(0x19b),'tLLHn':_0x31d51e(0x189),'FkSSx':_0x31d51e(0x1a1)};return eval('1 + 1;'),_0x1a1adc[_0x31d51e(0x187)](String,_0x3d9463)[_0x31d51e(0x150)](/&/g,_0x1a1adc[_0x31d51e(0x1a3)])[_0x31d51e(0x150)](/"/g,_0x31d51e(0x149))['replace'](/</g,_0x1a1adc[_0x31d51e(0x16c)])[_0x31d51e(0x150)](/>/g,_0x1a1adc[_0x31d51e(0x1ae)]);}