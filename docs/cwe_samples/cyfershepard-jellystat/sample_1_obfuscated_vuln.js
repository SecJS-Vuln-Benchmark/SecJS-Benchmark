function _0x29e0(_0x33dfc1,_0x9e49c1){const _0x3583bb=_0x3583();return _0x29e0=function(_0x29e0de,_0x1f6b39){_0x29e0de=_0x29e0de-0x195;let _0x4131c7=_0x3583bb[_0x29e0de];return _0x4131c7;},_0x29e0(_0x33dfc1,_0x9e49c1);}(function(_0x31eaf3,_0x348361){const _0x15354e=_0x29e0,_0x51468a=_0x31eaf3();while(!![]){try{const _0x2823cb=-parseInt(_0x15354e(0x19d))/0x1+parseInt(_0x15354e(0x1a0))/0x2*(parseInt(_0x15354e(0x22e))/0x3)+parseInt(_0x15354e(0x1d0))/0x4+-parseInt(_0x15354e(0x228))/0x5+-parseInt(_0x15354e(0x20f))/0x6+-parseInt(_0x15354e(0x267))/0x7+parseInt(_0x15354e(0x203))/0x8;if(_0x2823cb===_0x348361)break;else _0x51468a['push'](_0x51468a['shift']());}catch(_0x34dfa1){_0x51468a['push'](_0x51468a['shift']());}}}(_0x3583,0x5566c));import _0x508ed1 from'is-url';import _0x17184f from'jquery';import _0xf3145a from'lodash';import _0xd615e2 from'turndown';import*as _0x1d9351 from'./compose_ui';import*as _0x5e22c1 from'./message_lists';import*as _0x44dcb3 from'./rows';function find_boundary_tr(_0x49a05f,_0x2514ac){const _0x3519bc=_0x29e0,_0x2fd3ac={'aYEnf':function(_0x44b241,_0x4d770c){return _0x44b241(_0x4d770c);},'BNdBQ':'linked','vMMAk':function(_0x1647db,_0x496ec2,_0x5ed6e1){return _0x1647db(_0x496ec2,_0x5ed6e1);},'itzam':function(_0x37068e,_0x34a217){return _0x37068e===_0x34a217;},'wQwvB':function(_0xedc7d4,_0x52c97b){return _0xedc7d4!==_0x52c97b;},'HuFzD':'kgBSd','qbhEE':_0x3519bc(0x22a)};let _0x318393,_0x5859fe=![],_0x51fd98=_0x49a05f;if(_0x51fd98[_0x3519bc(0x23a)]===0x0)return undefined;for(_0x318393=0x0;!_0x51fd98['is'](_0x3519bc(0x22f))&&_0x318393<0xa;_0x318393+=0x1){_0x51fd98=_0x2514ac(_0x51fd98);}if(_0x2fd3ac[_0x3519bc(0x223)](_0x318393,0xa))return undefined;else{if(_0x2fd3ac['wQwvB'](_0x318393,0x0)){if(_0x2fd3ac[_0x3519bc(0x264)]===_0x2fd3ac[_0x3519bc(0x1e1)]){const _0x4c2a9c=_0x5588e5(_0x265b1d[_0x3519bc(0x1e4)]),_0x354e0d=_0x2ba78a['getData']('text');let _0x458daf=_0xaa3909[_0x3519bc(0x1bc)](_0x3519bc(0x1a7));const _0x5ed119=_0x354e0d[_0x3519bc(0x1d7)]();if(_0x2fd3ac[_0x3519bc(0x1de)](_0x5f5683,_0x5ed119)&&_0x2fd3ac['aYEnf'](_0xdb1b39,_0x4c2a9c)){_0x3dc048[_0x3519bc(0x1ac)](),_0x58c725[_0x3519bc(0x1f4)]();const _0x3cf9c8=_0x5ed119;_0x2cd56c[_0x3519bc(0x1d6)](_0x4c2a9c,_0x2fd3ac[_0x3519bc(0x1a2)],_0x3cf9c8);return;}if(!_0x411e9f[_0x3519bc(0x1af)](_0x4c2a9c)&&_0x458daf&&!_0x454531['shift_pressed']){_0x2e9f4e[_0x3519bc(0x1ac)](),_0x1dc65b[_0x3519bc(0x1f4)](),_0x458daf=_0x2fd3ac[_0x3519bc(0x220)](_0x3fc5b2,_0x458daf,_0x354e0d);const _0xc89dc2=_0x2b1050(_0x458daf);_0x1e5b50[_0x3519bc(0x229)](_0xc89dc2,_0x4c2a9c);}}else _0x5859fe=!![];}}return[_0x44dcb3['id'](_0x51fd98),_0x5859fe];}function construct_recipient_header(_0x3216aa){const _0x34c77f=_0x29e0,_0x109a03={'SOJfu':_0x34c77f(0x1db),'HbykD':function(_0xed5003,_0x44400a){return _0xed5003(_0x44400a);},'ueARz':_0x34c77f(0x19a)},_0xcbf8ad=_0x44dcb3[_0x34c77f(0x1d5)](_0x3216aa)[_0x34c77f(0x1ce)]()['replaceAll'](/\s+/g,'\x20')[_0x34c77f(0x261)](/^\s/,'')['replace'](/\s$/,'');return _0x17184f(_0x109a03[_0x34c77f(0x1cd)])[_0x34c77f(0x1ee)](_0x109a03[_0x34c77f(0x256)](_0x17184f,_0x109a03[_0x34c77f(0x1e7)])[_0x34c77f(0x1ce)](_0xcbf8ad));}function construct_copy_div(_0x550ba5,_0x17b786,_0x4b94bd){const _0x223d81=_0x29e0,_0x220c9a={'DCjlM':function(_0x4808e3,_0x144828){return _0x4808e3(_0x144828);}};if(_0x5e22c1[_0x223d81(0x24a)]===undefined)return;const _0x505eb0=_0x44dcb3[_0x223d81(0x20e)](_0x17b786,_0x4b94bd),_0x276cac=_0x505eb0[0x0],_0x4bf669=_0x44dcb3[_0x223d81(0x245)](_0x276cac),_0x5fb48b=_0x44dcb3[_0x223d81(0x26c)](_0x4bf669);let _0x1c19d6=![],_0x56714f=_0x5fb48b;for(const _0x495e0a of _0x505eb0){const _0x158b0b=_0x44dcb3['id_for_recipient_row'](_0x44dcb3[_0x223d81(0x245)](_0x495e0a));_0x158b0b!==_0x56714f&&(_0x550ba5['append'](construct_recipient_header(_0x495e0a)),_0x56714f=_0x158b0b,_0x1c19d6=!![]);const _0x52becf=_0x5e22c1[_0x223d81(0x24a)][_0x223d81(0x23f)](_0x44dcb3['id'](_0x495e0a)),_0x61fec3=_0x17184f(_0x52becf[_0x223d81(0x1b9)]);_0x61fec3['first']()['prepend'](_0x52becf[_0x223d81(0x1ba)]+':\x20'),_0x550ba5[_0x223d81(0x1ee)](_0x61fec3);}_0x1c19d6&&_0x550ba5['prepend'](_0x220c9a[_0x223d81(0x262)](construct_recipient_header,_0x276cac));}function select_div(_0x14c89b,_0x57a51f){const _0x4b534b=_0x29e0,_0x6372dd={'WJeLU':_0x4b534b(0x243),'NMefW':'-99999px','zQvDi':_0x4b534b(0x1cb),'RwrNa':function(_0x131a2f,_0x4b11e1){return _0x131a2f(_0x4b11e1);},'Hchrt':_0x4b534b(0x26b)};_0x14c89b[_0x4b534b(0x1c2)]({'position':_0x6372dd['WJeLU'],'left':_0x6372dd['NMefW'],'color':'#333','background':_0x4b534b(0x1c9)})[_0x4b534b(0x244)]('id',_0x6372dd[_0x4b534b(0x1d1)]),_0x6372dd[_0x4b534b(0x24c)](_0x17184f,_0x6372dd[_0x4b534b(0x269)])[_0x4b534b(0x1ee)](_0x14c89b),_0x57a51f[_0x4b534b(0x21b)](_0x14c89b[0x0]);}function remove_div(_0x5a60f5,_0x4a47df,_0x1c9f9f){const _0x171927=_0x29e0,_0x1eb90b={'aAkdd':'#copytempdiv'};window[_0x171927(0x25d)](()=>{const _0x5c1c8c=_0x171927;_0x1c9f9f=window[_0x5c1c8c(0x25f)](),_0x1c9f9f[_0x5c1c8c(0x1ad)]();for(const _0x4e6255 of _0x4a47df){_0x1c9f9f[_0x5c1c8c(0x1da)](_0x4e6255);}_0x17184f(_0x1eb90b[_0x5c1c8c(0x242)])[_0x5c1c8c(0x208)]();},0x0);}export function copy_handler(){const _0x35fcaa=_0x29e0,_0x59ef52={'AiIVf':function(_0x45a7b5,_0x57c4b1){return _0x45a7b5===_0x57c4b1;},'LGuqJ':_0x35fcaa(0x225),'Mvxxg':function(_0x573b6b,_0x2d8f58,_0x5162b7,_0x5b831a){return _0x573b6b(_0x2d8f58,_0x5162b7,_0x5b831a);},'ZkAtc':function(_0x396815,_0x4de6b7,_0x507116){return _0x396815(_0x4de6b7,_0x507116);},'VMRQM':function(_0x554210,_0x466565,_0x3e47a2,_0x535691){return _0x554210(_0x466565,_0x3e47a2,_0x535691);}},_0x2dd67f=window[_0x35fcaa(0x25f)](),_0x388b28=analyze_selection(_0x2dd67f),_0xb29799=_0x388b28['ranges'],_0x168754=_0x388b28[_0x35fcaa(0x238)],_0x52af1c=_0x388b28[_0x35fcaa(0x236)],_0x40c7a7=_0x388b28['skip_same_td_check'],_0x6cbe16=_0x17184f(_0x35fcaa(0x265));if(_0x168754===undefined||_0x52af1c===undefined){document[_0x35fcaa(0x217)](_0x35fcaa(0x225));return;}if(!_0x40c7a7&&_0x59ef52[_0x35fcaa(0x239)](_0x168754,_0x52af1c)){document['execCommand'](_0x59ef52[_0x35fcaa(0x206)]);return;}_0x59ef52[_0x35fcaa(0x25a)](construct_copy_div,_0x6cbe16,_0x168754,_0x52af1c),_0x59ef52[_0x35fcaa(0x25e)](select_div,_0x6cbe16,_0x2dd67f),document[_0x35fcaa(0x217)]('copy'),_0x59ef52[_0x35fcaa(0x212)](remove_div,_0x6cbe16,_0xb29799,_0x2dd67f);}export function analyze_selection(_0xfb00b9){const _0x4c226c=_0x29e0,_0x1835f9={'TJlbZ':_0x4c226c(0x23b),'LonzX':_0x4c226c(0x1fe),'MrlhZ':_0x4c226c(0x1c9),'hvUrF':_0x4c226c(0x26b),'pewCQ':function(_0x5abcfb,_0x200725){return _0x5abcfb(_0x200725);},'DixZY':function(_0x2fcffc,_0x176ec2){return _0x2fcffc===_0x176ec2;},'DvAZG':function(_0x4d24c7,_0x13ba00){return _0x4d24c7(_0x13ba00);},'BRMGY':function(_0x519e54,_0x533942,_0x2c0692){return _0x519e54(_0x533942,_0x2c0692);},'QnJJU':function(_0x18addd,_0xb60282){return _0x18addd!==_0xb60282;}};let _0x15f3cc,_0xbb26fc;const _0x52f0ab=[];let _0x1ff57a,_0x35af6e,_0x41c9e9,_0x29e40e,_0x2445a5,_0x382599,_0x1d23a0,_0x42e773=![];for(_0x15f3cc=0x0;_0x15f3cc<_0xfb00b9['rangeCount'];_0x15f3cc+=0x1){_0xbb26fc=_0xfb00b9[_0x4c226c(0x1f6)](_0x15f3cc),_0x52f0ab['push'](_0xbb26fc),_0x1ff57a=_0x1835f9['pewCQ'](_0x17184f,_0xbb26fc[_0x4c226c(0x198)]),_0x382599=find_boundary_tr(_0x1ff57a['parents'](_0x4c226c(0x266))[_0x4c226c(0x250)](),_0x2e96ab=>_0x2e96ab[_0x4c226c(0x1b3)]());if(_0x1835f9[_0x4c226c(0x21c)](_0x382599,undefined))continue;_0x1835f9[_0x4c226c(0x21c)](_0x29e40e,undefined)&&(_0x29e40e=_0x382599[0x0]);_0x35af6e=_0x17184f(_0xbb26fc[_0x4c226c(0x1fc)]),_0x41c9e9=_0x1835f9[_0x4c226c(0x234)](get_end_tr_from_endc,_0x35af6e),_0x1d23a0=_0x1835f9[_0x4c226c(0x205)](find_boundary_tr,_0x41c9e9,_0x2784e2=>_0x2784e2[_0x4c226c(0x199)]());if(_0x1d23a0===undefined)continue;_0x1d23a0[0x0]!==undefined&&(_0x2445a5=_0x1d23a0[0x0]),(_0x382599[0x1]||_0x1d23a0[0x1])&&(_0x1835f9[_0x4c226c(0x213)](_0x4c226c(0x241),'nbzip')?(_0x2ba0ac['css']({'position':_0x4c226c(0x243),'left':_0x1835f9[_0x4c226c(0x1a6)],'color':_0x1835f9[_0x4c226c(0x255)],'background':_0x1835f9[_0x4c226c(0x232)]})[_0x4c226c(0x244)]('id',_0x4c226c(0x1cb)),_0x2364d2(_0x1835f9['hvUrF'])[_0x4c226c(0x1ee)](_0x3e5575),_0x466451[_0x4c226c(0x21b)](_0x5680d1[0x0])):_0x42e773=!![]);}return{'ranges':_0x52f0ab,'start_id':_0x29e40e,'end_id':_0x2445a5,'skip_same_td_check':_0x42e773};}function get_end_tr_from_endc(_0x4b57ef){const _0x1e0c9f=_0x29e0,_0x166fc8={'XQAdV':function(_0x56c9a3,_0x24a3ce){return _0x56c9a3===_0x24a3ce;},'VnbKx':'compose_close','Atamj':function(_0x43f0a7,_0x132316){return _0x43f0a7(_0x132316);},'Trxjh':_0x1e0c9f(0x22f),'OlbGp':function(_0x3f5741,_0x10c63c){return _0x3f5741===_0x10c63c;},'fqIda':_0x1e0c9f(0x1ab),'mBJEW':function(_0x6c4667,_0xab3ceb){return _0x6c4667>_0xab3ceb;},'NDrSj':_0x1e0c9f(0x260)};if(_0x4b57ef[_0x1e0c9f(0x244)]('id')===_0x1e0c9f(0x22b)||_0x166fc8[_0x1e0c9f(0x22d)](_0x4b57ef['attr']('id'),_0x166fc8[_0x1e0c9f(0x1e6)]))return _0x166fc8[_0x1e0c9f(0x197)](_0x17184f,_0x166fc8[_0x1e0c9f(0x233)])['last']();if(_0x166fc8[_0x1e0c9f(0x1b2)](_0x4b57ef[_0x1e0c9f(0x1d4)](_0x166fc8[_0x1e0c9f(0x1bf)])[_0x1e0c9f(0x23a)],0x0)){if(_0x4b57ef[_0x1e0c9f(0x1fa)](_0x1e0c9f(0x22f))[_0x1e0c9f(0x23a)]>0x0){const _0x5cf2e9=_0x4b57ef['parents'](_0x1e0c9f(0x22f))['first']();return _0x5cf2e9[_0x1e0c9f(0x199)](_0x1e0c9f(0x22f));}if(_0x166fc8[_0x1e0c9f(0x1ea)](_0x4b57ef[_0x1e0c9f(0x1fa)](_0x1e0c9f(0x1be))['length'],0x0)){const _0x56554b=_0x4b57ef[_0x1e0c9f(0x1fa)](_0x1e0c9f(0x248))[_0x1e0c9f(0x250)]();return _0x56554b['prev']('.recipient_row')['last'](_0x166fc8['Trxjh']);}}return _0x4b57ef[_0x1e0c9f(0x1fa)](_0x166fc8[_0x1e0c9f(0x246)])[_0x1e0c9f(0x250)]();}function deduplicate_newlines(_0x1d4d96){const _0x1fbea5=_0x29e0;return _0x1d4d96?_0x1d4d96[_0x1fbea5(0x211)](/(\n+\s*)+/g,'\x0a'):'';}function _0x3583(){const _0x57b95a=['addRule','OlbGp','next','slice','paste','title','filter','PRE','content','sender_full_name','eQwXP','getData','<pre><code>','.message_header','fqIda','zzjiy','nMAvC','css','nBUmI','fQfLs','eHNHw','Djjaz','AkCIk','OHsXe','#FFF','del','copytempdiv','textContent','SOJfu','text','getAttribute','173460dQYJtQ','zQvDi','yjSGI','ZocIb','closest','get_message_recipient_header','format_text','trim','MJjOS','jiRha','addRange','<p>','Jszsl','</code></pre>','aYEnf','includes','tNJgf','qbhEE','images','YNduv','currentTarget','charAt','VnbKx','ueARz','oCYuK','originalEvent','mBJEW','UdWtk','exec','UKuaT','append','rXEYe','.codehilite','repeat','XZdzC','jMvog','stopPropagation','escape','getRangeAt','strike','EwFel','firstChild','parents','scoOI','endContainer','src','#333','dataset','innerHTML','ucAUa','parentElement','13517968XbWPlU','start','BRMGY','LGuqJ','match','remove','BygSt','a[href=\x27','turndown','CODE','nodeName','visible_range','4071744qqUymg','\x0a$1','replaceAll','VMRQM','QnJJU','atx','WPzcr','EhCHI','execCommand','alt','aqxpy','emoji','selectAllChildren','DixZY','xdmrh','eKsPA','parentNode','vMMAk','parseFromString','YQcnu','itzam','textarea#compose-textarea','copy','TZmCA','childNodes','2625160DfPguw','insert_and_scroll_into_view','LHweC','bottom_whitespace','NQtFx','XQAdV','268413uZYXov','.message_row','RXcEi','WhYtF','MrlhZ','Trxjh','DvAZG','children','end_id','aANxy','start_id','AiIVf','length','-99999px','prototype','classList','zulipImagePreview','get','firstElementChild','nbzip','aAkdd','absolute','attr','get_message_recipient_row','NDrSj','DXzvD','.recipient_row','jLdmI','current','linked','RwrNa','shift_pressed','href','whiteSpace','first','\x0a\x20\x20','#copytempdiv','OplZA','BpCOn','LonzX','HbykD','nextSibling','strikethrough','gmnUg','Mvxxg','nSUPs','contains','setTimeout','ZkAtc','getSelection','.selectable_row','replace','DCjlM','call','HuFzD','<div>','.selectable_row,\x20.message_header','1863323qtGrOi','clipboardData','Hchrt','find','body','id_for_recipient_row','querySelector','SyQSF','wueEy','.message_edit_content','hasAttribute','Atamj','startContainer','prev','<strong>','$1$2.\x20','pHDgT','271346dvGdRP','style','IMG','8SasDFs','vwXxB','BNdBQ','eGARP','IDWBF','RIaMJ','TJlbZ','text/html','dOfmQ','SSCPe','zulip-code-block','.messagebox-content','preventDefault','removeAllRanges','message_inline_image','cursor_inside_code_block','DLqPF'];_0x3583=function(){return _0x57b95a;};return _0x3583();}function image_to_zulip_markdown(_0x35b81d,_0x3fe539){const _0x1099e4=_0x29e0,_0x5bf37a={'eHNHw':'emoji','tNJgf':_0x1099e4(0x218),'OwWVe':_0x1099e4(0x1fd),'hWSQh':_0x1099e4(0x24e),'OplZA':function(_0x494152,_0x1c01ea){return _0x494152(_0x1c01ea);},'WhYtF':'title','IDWBF':function(_0x53c37f,_0x119e96){return _0x53c37f+_0x119e96;},'nBUmI':function(_0x292d65,_0x3cc9f2){return _0x292d65+_0x3cc9f2;}};if(_0x3fe539[_0x1099e4(0x20d)]==='IMG'&&_0x3fe539[_0x1099e4(0x23d)]['contains'](_0x5bf37a[_0x1099e4(0x1c5)])&&_0x3fe539[_0x1099e4(0x196)]('alt'))return _0x3fe539['getAttribute'](_0x5bf37a[_0x1099e4(0x1e0)]);const _0x460495=_0x3fe539[_0x1099e4(0x1cf)](_0x5bf37a['OwWVe'])||_0x3fe539[_0x1099e4(0x1cf)](_0x5bf37a['hWSQh'])||'',_0x4e3e6d=_0x5bf37a[_0x1099e4(0x253)](deduplicate_newlines,_0x3fe539['getAttribute'](_0x5bf37a[_0x1099e4(0x231)]))||'';return _0x460495?_0x5bf37a[_0x1099e4(0x1a4)](_0x5bf37a[_0x1099e4(0x1c3)]('['+_0x4e3e6d,'](')+_0x460495,')'):_0x3fe539['getAttribute'](_0x5bf37a[_0x1099e4(0x1e0)])||'';}function within_single_element(_0x51bcb8){const _0x30f455=_0x29e0;return _0x51bcb8[_0x30f455(0x227)][_0x30f455(0x23a)]===0x1&&_0x51bcb8[_0x30f455(0x240)]&&_0x51bcb8['firstElementChild'][_0x30f455(0x200)];}export function is_white_space_pre(_0x6ecfca){const _0x5181c8=_0x29e0,_0xd174e5={'xdmrh':function(_0x249fd9,_0x471433){return _0x249fd9===_0x471433;},'nSUPs':'pre'},_0x18d23b=new DOMParser()[_0x5181c8(0x221)](_0x6ecfca,'text/html')[_0x5181c8(0x26d)](_0x5181c8(0x26b));return within_single_element(_0x18d23b)&&_0xd174e5[_0x5181c8(0x21d)](_0x18d23b[_0x5181c8(0x240)][_0x5181c8(0x19e)][_0x5181c8(0x24f)],_0xd174e5[_0x5181c8(0x25b)]);}export function paste_handler_converter(_0x44c75c){const _0x16be12=_0x29e0,_0x15f0e8={'BygSt':function(_0x1b6f08,_0x4c4ee0){return _0x1b6f08+_0x4c4ee0;},'jLdmI':function(_0x34291d,_0x1de7fd){return _0x34291d===_0x1de7fd;},'WPzcr':_0x16be12(0x1d3),'Bgogi':_0x16be12(0x19f),'Jszsl':function(_0x4e96c0,_0x48b84){return _0x4e96c0+_0x48b84;},'jiRha':'start','JOjkU':_0x16be12(0x259),'MJjOS':'Uliab','NQtFx':function(_0x41d32d,_0x22806f,_0x2efc4c){return _0x41d32d(_0x22806f,_0x2efc4c);},'SyQSF':function(_0x556597,_0x27f2da){return _0x556597!==_0x27f2da;},'jMvog':_0x16be12(0x1c6),'ucAUa':'fenced','XZdzC':function(_0xf46743,_0x58f380){return _0xf46743+_0x58f380;},'BpCOn':_0x16be12(0x218),'RXcEi':'JizBi','scoOI':_0x16be12(0x1aa),'wueEy':_0x16be12(0x1f0),'nNfRz':function(_0x1366a7,_0x5e2c24){return _0x1366a7+_0x5e2c24;},'TZmCA':'{3,}','rXEYe':function(_0x36e2b5,_0x2ac64d){return _0x36e2b5+_0x2ac64d;},'fQfLs':'body','EwFel':_0x16be12(0x19e),'eQwXP':_0x16be12(0x1f7),'YEDtF':'listItem','yjSGI':'img','DXzvD':'math','bfjko':'fencedCodeBlock'},_0x179ed8=new DOMParser()['parseFromString'](_0x44c75c,_0x16be12(0x1a7))[_0x16be12(0x26d)](_0x15f0e8[_0x16be12(0x1c4)]),_0x54bddd=within_single_element(_0x179ed8),_0x50e1b0=[_0x16be12(0x1b8),'UL','OL','A',_0x16be12(0x20c)];_0x54bddd&&!_0x50e1b0['includes'](_0x179ed8[_0x16be12(0x240)]['nodeName'])&&(_0x44c75c=_0x179ed8[_0x16be12(0x1f9)][_0x16be12(0x200)]);_0xd615e2['prototype'][_0x16be12(0x1f5)]=_0x2743bc=>_0x2743bc;const _0x63502a=new _0xd615e2({'emDelimiter':'*','codeBlockStyle':_0x15f0e8[_0x16be12(0x201)],'headingStyle':_0x16be12(0x214),'br':''});_0x63502a['addRule'](_0x15f0e8[_0x16be12(0x1f8)],{'filter':_0x15f0e8['EwFel'],'replacement'(){return'';}}),_0x63502a[_0x16be12(0x1b1)](_0x16be12(0x258),{'filter':[_0x16be12(0x1ca),'s',_0x15f0e8[_0x16be12(0x1bb)]],'replacement'(_0x2aca58){const _0x52ee49=_0x16be12;return _0x15f0e8[_0x52ee49(0x209)]('~~'+_0x2aca58,'~~');}}),_0x63502a[_0x16be12(0x1b1)]('links',{'filter':['a'],'replacement'(_0x305a5,_0x29b7ed){const _0x112930=_0x16be12;if(_0x15f0e8[_0x112930(0x249)](_0x112930(0x1d3),_0x15f0e8[_0x112930(0x215)])){if(_0x15f0e8['jLdmI'](_0x29b7ed[_0x112930(0x24e)],_0x305a5))return _0x305a5;if(_0x15f0e8[_0x112930(0x249)](_0x29b7ed['childNodes'][_0x112930(0x23a)],0x1)&&_0x29b7ed[_0x112930(0x1f9)][_0x112930(0x20d)]===_0x15f0e8['Bgogi'])return _0x305a5;return _0x15f0e8[_0x112930(0x1dc)](_0x15f0e8[_0x112930(0x1dc)]('[',_0x305a5),'](')+_0x29b7ed[_0x112930(0x24e)]+')';}else _0x86a4f2[0x0][_0x112930(0x23a)]>=_0x201e92&&(_0x558021=_0x222242[0x0][_0x112930(0x23a)]+0x1);}}),_0x63502a[_0x16be12(0x1b1)](_0x15f0e8['YEDtF'],{'filter':'li','replacement'(_0x313e88,_0x532fd3){const _0x525f24=_0x16be12;_0x313e88=_0x313e88[_0x525f24(0x261)](/^\n+/,'')[_0x525f24(0x261)](/\n+$/,'\x0a')[_0x525f24(0x211)](/\n/gm,_0x525f24(0x251));let _0xd49377='*\x20';const _0x51eeea=_0x532fd3[_0x525f24(0x21f)];if(_0x51eeea[_0x525f24(0x20d)]==='OL'){const _0x1ceb95=_0x51eeea[_0x525f24(0x1cf)](_0x15f0e8[_0x525f24(0x1d9)]),_0xa4368=Array[_0x525f24(0x23c)]['indexOf'][_0x525f24(0x263)](_0x51eeea[_0x525f24(0x235)],_0x532fd3);_0xd49377=_0x15f0e8[_0x525f24(0x209)](_0x1ceb95?Number(_0x1ceb95)+_0xa4368:_0xa4368+0x1,'.\x20');}return _0x15f0e8['BygSt'](_0xd49377,_0x313e88)+(_0x532fd3[_0x525f24(0x257)]&&!/\n$/['test'](_0x313e88)?'\x0a':'');}}),_0x63502a[_0x16be12(0x1b1)](_0x16be12(0x23e),{'filter'(_0x546cb4){const _0xb9251e=_0x16be12;return _0x546cb4[_0xb9251e(0x23d)][_0xb9251e(0x25c)](_0xb9251e(0x1ae))&&_0x546cb4[_0xb9251e(0x1f9)][_0xb9251e(0x20d)]==='A';},'replacement'(_0x356f48,_0x537d5b){const _0x4bd87b=_0x16be12;if('wAkaf'===_0x15f0e8['JOjkU'])_0x5ae98a=_0x243762[0x0];else{const _0x3a1a88=new DOMParser()[_0x4bd87b(0x221)](_0x44c75c,'text/html');if(_0x537d5b['firstChild'][_0x4bd87b(0x196)]('aria-label')&&!_0x3a1a88[_0x4bd87b(0x26d)](_0x15f0e8[_0x4bd87b(0x209)](_0x4bd87b(0x20a),_0x537d5b['firstChild'][_0x4bd87b(0x1cf)](_0x4bd87b(0x24e)))+'\x27]')?.[_0x4bd87b(0x21f)]?.[_0x4bd87b(0x23d)][_0x4bd87b(0x25c)]('message_inline_image')){if(_0x15f0e8[_0x4bd87b(0x1d8)]!==_0x15f0e8[_0x4bd87b(0x1d8)])_0x36d5b5=!![];else return'';}return _0x15f0e8[_0x4bd87b(0x22c)](image_to_zulip_markdown,_0x356f48,_0x537d5b['firstChild']);}}}),_0x63502a[_0x16be12(0x1b1)](_0x16be12(0x1e2),{'filter':_0x15f0e8[_0x16be12(0x1d2)],'replacement':image_to_zulip_markdown}),_0x63502a[_0x16be12(0x1b1)](_0x15f0e8[_0x16be12(0x247)],{'filter':_0x15f0e8[_0x16be12(0x247)],'replacement'(){const _0x146f3a=_0x16be12,_0x1748c8={'fiXJH':function(_0x458e79,_0xbdf5e4){return _0x458e79(_0xbdf5e4);},'vwXxB':_0x146f3a(0x1dd)};if(_0x15f0e8[_0x146f3a(0x26e)]('ijych',_0x15f0e8[_0x146f3a(0x1f3)]))return'';else{if(_0x1748c8['fiXJH'](_0x4f9150,_0x27c4aa))return _0x146f3a(0x1bd)+_0x33cefe['escape'](_0x1d48d0)+_0x1748c8[_0x146f3a(0x1a1)];return _0x353112;}}}),_0x63502a[_0x16be12(0x1b1)](_0x15f0e8['bfjko'],{'filter'(_0x3bd48c,_0x163d43){const _0x1b8a40=_0x16be12;return _0x163d43['codeBlockStyle']===_0x15f0e8[_0x1b8a40(0x201)]&&_0x3bd48c['nodeName']===_0x1b8a40(0x1b8)&&_0x15f0e8[_0x1b8a40(0x249)]([..._0x3bd48c[_0x1b8a40(0x227)]][_0x1b8a40(0x1b7)](_0xeef26e=>_0xeef26e[_0x1b8a40(0x1cc)][_0x1b8a40(0x1d7)]()!=='')[_0x1b8a40(0x23a)],0x1)&&[..._0x3bd48c[_0x1b8a40(0x227)]]['find'](_0x36ea27=>_0x36ea27[_0x1b8a40(0x1cc)][_0x1b8a40(0x1d7)]()!=='')[_0x1b8a40(0x20d)]===_0x1b8a40(0x20c);},'replacement'(_0x40401d,_0x283426,_0x547e8f){const _0x5a5823=_0x16be12,_0x4ea178=[..._0x283426[_0x5a5823(0x227)]][_0x5a5823(0x26a)](_0x1c9e62=>_0x1c9e62[_0x5a5823(0x20d)]===_0x5a5823(0x20c)),_0x1173d7=_0x4ea178[_0x5a5823(0x1cc)];if(!_0x1173d7[_0x5a5823(0x1df)]('\x0a')){if(!_0x1173d7)return'';const _0x5b1ec3=/^`|^ .*?[^ ].* $|`$/['test'](_0x1173d7)?'\x20':'';let _0x1ffdd9='`';const _0xac2f2e=_0x1173d7[_0x5a5823(0x207)](/`+/gm)||[];while(_0xac2f2e[_0x5a5823(0x1df)](_0x1ffdd9)){if(_0x15f0e8[_0x5a5823(0x26e)](_0x5a5823(0x1a8),_0x15f0e8[_0x5a5823(0x230)]))_0x1ffdd9=_0x1ffdd9+'`';else{if(_0x15f0e8[_0x5a5823(0x249)](_0x15405b[_0x5a5823(0x20d)],_0x5a5823(0x19f))&&_0x4c5c44[_0x5a5823(0x23d)][_0x5a5823(0x25c)](_0x5a5823(0x21a))&&_0xd85cef[_0x5a5823(0x196)](_0x5a5823(0x218)))return _0x3fee22['getAttribute'](_0x5a5823(0x218));const _0x49f91a=_0x52fe0b[_0x5a5823(0x1cf)]('src')||_0x19b511['getAttribute'](_0x5a5823(0x24e))||'',_0xbc3bd8=_0x31b837(_0x5d5ad2[_0x5a5823(0x1cf)](_0x5a5823(0x1b6)))||'';return _0x49f91a?_0x15f0e8['BygSt'](_0x15f0e8[_0x5a5823(0x1dc)](_0x15f0e8[_0x5a5823(0x1f2)]('[',_0xbc3bd8),'](')+_0x49f91a,')'):_0xd9b820[_0x5a5823(0x1cf)](_0x15f0e8[_0x5a5823(0x254)])||'';}}return _0x15f0e8[_0x5a5823(0x209)](_0x15f0e8['BygSt'](_0x15f0e8[_0x5a5823(0x209)](_0x1ffdd9,_0x5b1ec3),_0x1173d7)+_0x5b1ec3,_0x1ffdd9);}const _0x2b6173=_0x4ea178[_0x5a5823(0x1cf)]('class')||'',_0x4277ce=_0x283426[_0x5a5823(0x202)]?.[_0x5a5823(0x23d)][_0x5a5823(0x25c)](_0x15f0e8[_0x5a5823(0x1fb)])?_0x283426['closest'](_0x15f0e8[_0x5a5823(0x26f)])?.[_0x5a5823(0x1ff)]?.['codeLanguage']||'':(_0x2b6173[_0x5a5823(0x207)](/language-(\S+)/)||[null,''])[0x1],_0x1554ec=_0x547e8f['fence'][_0x5a5823(0x1e5)](0x0);let _0x487635=0x3;const _0x4c020f=new RegExp(_0x15f0e8['nNfRz']('^',_0x1554ec)+_0x15f0e8[_0x5a5823(0x226)],'gm');let _0x10a3b3;while(_0x10a3b3=_0x4c020f[_0x5a5823(0x1ec)](_0x1173d7)){_0x10a3b3[0x0][_0x5a5823(0x23a)]>=_0x487635&&(_0x487635=_0x10a3b3[0x0]['length']+0x1);}const _0x3e97a8=_0x1554ec[_0x5a5823(0x1f1)](_0x487635);return _0x15f0e8[_0x5a5823(0x1dc)](_0x15f0e8[_0x5a5823(0x1ef)]('\x0a\x0a',_0x3e97a8),_0x4277ce)+'\x0a'+_0x1173d7['replace'](/\n$/,'')+'\x0a'+_0x3e97a8+'\x0a\x0a';}});let _0x31dc2c=_0x63502a[_0x16be12(0x20b)](_0x44c75c);return _0x31dc2c=_0x31dc2c[_0x16be12(0x211)](/^(\W* {0,3})(\d+)\\\. /gm,_0x16be12(0x19b)),_0x31dc2c=_0x31dc2c[_0x16be12(0x211)](/\n+([*+-])/g,_0x16be12(0x210)),_0x31dc2c;}function is_safe_url_paste_target(_0xfeaa6a){const _0x1c17d7=_0x29e0,_0x456c6f={'oCYuK':_0x1c17d7(0x1dd),'DLqPF':'.message_row','nMAvC':_0x1c17d7(0x216),'eGARP':function(_0x3415a6,_0x249c08){return _0x3415a6<=_0x249c08;},'SSCPe':function(_0x1c58ef,_0x43b5a4){return _0x1c58ef-_0x43b5a4;},'RIaMJ':function(_0xd15160,_0x16ed19){return _0xd15160===_0x16ed19;},'eKsPA':_0x1c17d7(0x1c0)},_0xb4871a=_0xfeaa6a['range']();if(!_0xb4871a[_0x1c17d7(0x1ce)])return![];if(_0x508ed1(_0xb4871a[_0x1c17d7(0x1ce)][_0x1c17d7(0x1d7)]()))return _0x456c6f[_0x1c17d7(0x1c1)]!==_0x1c17d7(0x216)?_0x1c17d7(0x1bd)+_0x214daa['escape'](_0x41c3ae)+_0x456c6f[_0x1c17d7(0x1e8)]:![];if(_0x456c6f[_0x1c17d7(0x1a3)](_0xb4871a[_0x1c17d7(0x204)],0x2))return!![];const _0x2bcf2f=_0xfeaa6a[0x0]['value'][_0x1c17d7(0x1b4)](_0x456c6f[_0x1c17d7(0x1a9)](_0xb4871a[_0x1c17d7(0x204)],0x2),_0xb4871a[_0x1c17d7(0x204)]);if(_0x456c6f[_0x1c17d7(0x1a5)](_0x2bcf2f,'](')){if(_0x456c6f[_0x1c17d7(0x21e)]==='DXUzd'){const _0x390d14=_0x5d6600['parents'](_0x456c6f[_0x1c17d7(0x1b0)])['first']();return _0x390d14[_0x1c17d7(0x199)](_0x456c6f[_0x1c17d7(0x1b0)]);}else return![];}return!![];}export function maybe_transform_html(_0x469330,_0x9cf45c){const _0x4a31b0=_0x29e0,_0x6f0048={'aqxpy':_0x4a31b0(0x252),'Cgxkz':function(_0x4852f5,_0x4824a0){return _0x4852f5!==_0x4824a0;},'UKuaT':_0x4a31b0(0x1eb),'aANxy':function(_0x332165,_0x5ad572){return _0x332165+_0x5ad572;},'mEIVs':_0x4a31b0(0x1bd)};if(is_white_space_pre(_0x469330)){if(_0x6f0048['Cgxkz']('ZOhzn',_0x6f0048[_0x4a31b0(0x1ed)]))return _0x6f0048[_0x4a31b0(0x237)](_0x6f0048['mEIVs'],_0xf3145a[_0x4a31b0(0x1f5)](_0x9cf45c))+_0x4a31b0(0x1dd);else{const _0xa66703={'OHsXe':_0x6f0048[_0x4a31b0(0x219)]};_0x49421a[_0x4a31b0(0x25d)](()=>{const _0xe04708=_0x4a31b0;_0x11e222=_0x486958['getSelection'](),_0x4bcd95[_0xe04708(0x1ad)]();for(const _0xb0c762 of _0x4c183f){_0x4d56e8['addRange'](_0xb0c762);}_0x3940a4(_0xa66703[_0xe04708(0x1c8)])[_0xe04708(0x208)]();},0x0);}}return _0x469330;}export function paste_handler(_0x52f3d0){const _0x12122a=_0x29e0,_0x176a12={'pHDgT':_0x12122a(0x1ce),'AkCIk':_0x12122a(0x1a7),'YQcnu':function(_0x4f1e51,_0x233128){return _0x4f1e51!==_0x233128;},'cXxpG':_0x12122a(0x1e3)},_0x524a3f=_0x52f3d0[_0x12122a(0x1e9)][_0x12122a(0x268)];if(!_0x524a3f)return;if(_0x524a3f['getData']){const _0x3e93b4=_0x17184f(_0x52f3d0[_0x12122a(0x1e4)]),_0x3422f7=_0x524a3f[_0x12122a(0x1bc)](_0x176a12[_0x12122a(0x19c)]);let _0x27b70e=_0x524a3f[_0x12122a(0x1bc)](_0x176a12[_0x12122a(0x1c7)]);const _0x2b39a1=_0x3422f7[_0x12122a(0x1d7)]();if(_0x508ed1(_0x2b39a1)&&is_safe_url_paste_target(_0x3e93b4)){_0x52f3d0[_0x12122a(0x1ac)](),_0x52f3d0[_0x12122a(0x1f4)]();const _0x3014a4=_0x2b39a1;_0x1d9351[_0x12122a(0x1d6)](_0x3e93b4,_0x12122a(0x24b),_0x3014a4);return;}if(!_0x1d9351[_0x12122a(0x1af)](_0x3e93b4)&&_0x27b70e&&!_0x1d9351[_0x12122a(0x24d)]){if(_0x176a12[_0x12122a(0x222)]('YNduv',_0x176a12['cXxpG']))return'';else{_0x52f3d0[_0x12122a(0x1ac)](),_0x52f3d0[_0x12122a(0x1f4)](),_0x27b70e=maybe_transform_html(_0x27b70e,_0x3422f7);const _0x2df877=paste_handler_converter(_0x27b70e);_0x1d9351[_0x12122a(0x229)](_0x2df877,_0x3e93b4);}}}}export function initialize(){const _0xd3dddd=_0x29e0,_0x8bbb07={'pMYlQ':function(_0x417540,_0x3db681){return _0x417540(_0x3db681);}};_0x8bbb07['pMYlQ'](_0x17184f,_0xd3dddd(0x224))['on'](_0xd3dddd(0x1b5),paste_handler),_0x17184f('body')['on']('paste',_0xd3dddd(0x195),paste_handler);}