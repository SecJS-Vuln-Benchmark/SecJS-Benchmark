function _0x410f(_0x1a4ed5,_0x52cde0){const _0x597d8f=_0x597d();return _0x410f=function(_0x410fed,_0x166a93){_0x410fed=_0x410fed-0x182;let _0x58cf44=_0x597d8f[_0x410fed];return _0x58cf44;},_0x410f(_0x1a4ed5,_0x52cde0);}const _0x578ddb=_0x410f;(function(_0x1bc880,_0x24f65c){const _0x1fe4c3=_0x410f,_0x253456=_0x1bc880();while(!![]){try{const _0x3f863e=parseInt(_0x1fe4c3(0x186))/0x1+-parseInt(_0x1fe4c3(0x18f))/0x2*(-parseInt(_0x1fe4c3(0x1a3))/0x3)+parseInt(_0x1fe4c3(0x18d))/0x4+parseInt(_0x1fe4c3(0x19c))/0x5*(parseInt(_0x1fe4c3(0x1d9))/0x6)+-parseInt(_0x1fe4c3(0x1ea))/0x7+-parseInt(_0x1fe4c3(0x18c))/0x8*(-parseInt(_0x1fe4c3(0x1cb))/0x9)+-parseInt(_0x1fe4c3(0x1d4))/0xa;if(_0x3f863e===_0x24f65c)break;else _0x253456['push'](_0x253456['shift']());}catch(_0x260d33){_0x253456['push'](_0x253456['shift']());}}}(_0x597d,0x58ebb));function _0x597d(){const _0x3aebbf=['findResultsCount','matchDiacritics','ayhBk','MGBZD','dcgdi','entireWord','BJJoD','find_not_found','TJLdl','YKPdb','BhNvI','focus','Pgefz','PENDING','dispatch','EgMJv','textContent','entireWordCheckbox','pXxim','LZwJG','toggleButton','VBfqo','ZcnxI','replace','keyCode','OJKko','zWiBl','wpiYT','wSxOb','updateUIState','RYcTw','split','checked','siyuan','find_match_count_limit','NOT_FOUND','highlightallchange','1175643lPaknx','bar','b3-button--outline','weEFR','dispatchEvent','CdijL','clientHeight','xjoYS','notFound','12836460MIulyP','value','pending','firstElementChild','GLZDt','146238hedSFA','add','diacriticmatchingchange','NGCCZ','languages','setAttribute','SwpLk','{{current}}','again','shiftKey','parentElement','find','close','updateResultsCount','select','matchDiacriticsCheckbox','caseSensitive','1725857IllwkF','top','bottom','wXPDC','findMsg','click','314948PIlEzJ','open','addEventListener','findField','input','highlightAll','32yeTijK','1413376CjraBO','HZPJF','3494selQtz','KxAnD','findPreviousButton','findNextButton','data-status','removeAttribute','observe','TZsvL','entirewordchange','toggle','findbarclose','remove','kLRLF','25qVfBCU','data-l10n-id','opened','{{limit}}','0|1|2|4|3','keydown','classList','999dIXlXo','eventBus','target'];_0x597d=function(){return _0x3aebbf;};return _0x597d();}import{FindState}from'./pdf_find_controller.js';import{toggleExpandedBtn}from'./ui_utils.js';const MATCHES_COUNT_LIMIT=0x3e8;class PDFFindBar{#mainContainer;#resizeObserver=new ResizeObserver(this.#resizeObserverCallback['bind'](this));constructor(_0x127e68,_0x2273ab,_0x599302){const _0x17b559=_0x410f,_0x20c95f={'TZsvL':function(_0x124637,_0x83d52e){return _0x124637===_0x83d52e;},'LZwJG':'again','EgMJv':_0x17b559(0x1cd),'zWiBl':function(_0x4149ef,_0x5b9ca9){return _0x4149ef!==_0x5b9ca9;},'dcgdi':_0x17b559(0x1bb),'kLRLF':_0x17b559(0x1bc),'BULQb':_0x17b559(0x1d2),'KxAnD':function(_0x4eb10b,_0x2afdbf){return _0x4eb10b!==_0x2afdbf;},'SwpLk':'wpiYT','weEFR':'QYylC','GLZDt':'kHdcg','CdijL':_0x17b559(0x185),'ttcYd':_0x17b559(0x18a),'Pgefz':_0x17b559(0x1a1)};this[_0x17b559(0x19e)]=![],this['bar']=_0x127e68[_0x17b559(0x1cc)],this[_0x17b559(0x1ba)]=_0x127e68['toggleButton'],this[_0x17b559(0x189)]=_0x127e68[_0x17b559(0x189)],this['highlightAll']=_0x127e68['highlightAllCheckbox'],this[_0x17b559(0x1e9)]=_0x127e68['caseSensitiveCheckbox'],this['matchDiacritics']=_0x127e68[_0x17b559(0x1e8)],this[_0x17b559(0x1ab)]=_0x127e68[_0x17b559(0x1b7)],this[_0x17b559(0x184)]=_0x127e68[_0x17b559(0x184)],this[_0x17b559(0x1a6)]=_0x127e68[_0x17b559(0x1a6)],this[_0x17b559(0x191)]=_0x127e68['findPreviousButton'],this[_0x17b559(0x192)]=_0x127e68['findNextButton'],this[_0x17b559(0x1a4)]=_0x599302,this.#mainContainer=_0x2273ab,this[_0x17b559(0x1ba)]['addEventListener'](_0x20c95f[_0x17b559(0x1d0)],()=>{const _0xd6d542=_0x17b559;_0xd6d542(0x1c2)!=='wSxOb'?this[_0xd6d542(0x19e)]?this[_0xd6d542(0x1e5)]():this[_0xd6d542(0x187)]():this[_0xd6d542(0x198)]();}),this[_0x17b559(0x189)][_0x17b559(0x188)](_0x20c95f['ttcYd'],()=>{const _0x388dd4=_0x17b559;this[_0x388dd4(0x1cf)]('');}),this[_0x17b559(0x1cc)][_0x17b559(0x188)](_0x20c95f[_0x17b559(0x1b2)],_0x100914=>{const _0x4e1617=_0x17b559,_0x8c5835={'BhNvI':_0x4e1617(0x19d)};if('zZNkl'!=='zZNkl')_0x759981[_0x4e1617(0x194)](_0x8c5835[_0x4e1617(0x1b0)]),_0x30fbac[_0x4e1617(0x1b6)]='';else switch(_0x100914[_0x4e1617(0x1be)]){case 0xd:_0x20c95f['TZsvL'](_0x100914[_0x4e1617(0x1a5)],this[_0x4e1617(0x189)])&&this[_0x4e1617(0x1cf)](_0x20c95f[_0x4e1617(0x1b9)],_0x100914[_0x4e1617(0x1e2)]);break;case 0x1b:this[_0x4e1617(0x1e5)]();break;}}),this[_0x17b559(0x191)][_0x17b559(0x188)](_0x20c95f[_0x17b559(0x1d0)],()=>{const _0x10c25d=_0x17b559;this[_0x10c25d(0x1cf)](_0x20c95f[_0x10c25d(0x1b9)],!![]);}),this[_0x17b559(0x192)]['addEventListener'](_0x17b559(0x185),()=>{this['dispatchEvent'](_0x20c95f['LZwJG'],![]);}),this['highlightAll']['addEventListener'](_0x17b559(0x185),()=>{const _0x5e093d=_0x17b559;_0x20c95f[_0x5e093d(0x1c0)](_0x20c95f[_0x5e093d(0x1aa)],_0x20c95f[_0x5e093d(0x19b)])?(this[_0x5e093d(0x1cf)](_0x5e093d(0x1ca)),this[_0x5e093d(0x18b)][_0x5e093d(0x1c6)]?this['highlightAll']['parentElement']['classList'][_0x5e093d(0x19a)](_0x5e093d(0x1cd)):_0x20c95f[_0x5e093d(0x196)](_0x5e093d(0x1d2),_0x20c95f['BULQb'])?this[_0x5e093d(0x18b)]['parentElement'][_0x5e093d(0x1a2)][_0x5e093d(0x1da)](_0x20c95f[_0x5e093d(0x1b5)]):(this[_0x5e093d(0x1cf)](_0x5e093d(0x1ca)),this[_0x5e093d(0x18b)][_0x5e093d(0x1c6)]?this['highlightAll'][_0x5e093d(0x1e3)][_0x5e093d(0x1a2)]['remove'](_0x20c95f[_0x5e093d(0x1b5)]):this[_0x5e093d(0x18b)]['parentElement'][_0x5e093d(0x1a2)][_0x5e093d(0x1da)](_0x5e093d(0x1cd)))):this[_0x5e093d(0x1e5)]();}),this[_0x17b559(0x1e9)][_0x17b559(0x188)](_0x20c95f['CdijL'],()=>{const _0x4c65af=_0x17b559;this[_0x4c65af(0x1cf)]('casesensitivitychange'),this['caseSensitive']['checked']?this[_0x4c65af(0x1e9)][_0x4c65af(0x1e3)][_0x4c65af(0x1a2)]['remove'](_0x20c95f[_0x4c65af(0x1b5)]):_0x20c95f[_0x4c65af(0x190)](_0x4c65af(0x1c1),_0x20c95f[_0x4c65af(0x1df)])?this['entireWord'][_0x4c65af(0x1e3)][_0x4c65af(0x1a2)][_0x4c65af(0x1da)]('b3-button--outline'):this[_0x4c65af(0x1e9)]['parentElement'][_0x4c65af(0x1a2)][_0x4c65af(0x1da)](_0x4c65af(0x1cd));}),this[_0x17b559(0x1ab)][_0x17b559(0x188)](_0x17b559(0x185),()=>{const _0x47c21e=_0x17b559;this['dispatchEvent'](_0x47c21e(0x197)),this['entireWord']['checked']?this[_0x47c21e(0x1ab)][_0x47c21e(0x1e3)][_0x47c21e(0x1a2)][_0x47c21e(0x19a)](_0x20c95f[_0x47c21e(0x1b5)]):this[_0x47c21e(0x1ab)][_0x47c21e(0x1e3)][_0x47c21e(0x1a2)]['add'](_0x20c95f['EgMJv']);}),this[_0x17b559(0x1a7)][_0x17b559(0x188)](_0x17b559(0x185),()=>{const _0x323522=_0x17b559;_0x20c95f[_0x323522(0x1ce)]!==_0x20c95f[_0x323522(0x1d8)]?(this[_0x323522(0x1cf)](_0x323522(0x1db)),this[_0x323522(0x1a7)][_0x323522(0x1c6)]?this['matchDiacritics']['parentElement']['classList'][_0x323522(0x19a)](_0x323522(0x1cd)):this['matchDiacritics']['parentElement'][_0x323522(0x1a2)][_0x323522(0x1da)](_0x323522(0x1cd))):this['matchDiacritics'][_0x323522(0x1e3)][_0x323522(0x1a2)][_0x323522(0x19a)](_0x20c95f[_0x323522(0x1b5)]);});}['reset'](){const _0x529016=_0x410f;this[_0x529016(0x1c3)]();}[_0x578ddb(0x1cf)](_0x19f436,_0x489504=![]){const _0x334f35=_0x578ddb,_0x138678={'HZPJF':_0x334f35(0x1e4)};this['eventBus'][_0x334f35(0x1b4)](_0x138678[_0x334f35(0x18e)],{'source':this,'type':_0x19f436,'query':this[_0x334f35(0x189)][_0x334f35(0x1d5)],'caseSensitive':this['caseSensitive']['checked'],'entireWord':this[_0x334f35(0x1ab)][_0x334f35(0x1c6)],'highlightAll':this[_0x334f35(0x18b)][_0x334f35(0x1c6)],'findPrevious':_0x489504,'matchDiacritics':this[_0x334f35(0x1a7)][_0x334f35(0x1c6)]});}[_0x578ddb(0x1c3)](_0x2e5372,_0x3ff88d,_0x53db65){const _0x3eff6c=_0x578ddb,_0x1fbc78={'OJKko':_0x3eff6c(0x1d6),'MGBZD':_0x3eff6c(0x1eb),'NGCCZ':'aria-invalid'},{findField:_0x536b1a,findMsg:_0x55c51c}=this;let _0x3ca724='',_0x38ce3a='';switch(_0x2e5372){case FindState['FOUND']:break;case FindState[_0x3eff6c(0x1b3)]:_0x38ce3a=_0x1fbc78[_0x3eff6c(0x1bf)];break;case FindState['NOT_FOUND']:_0x3ca724=window[_0x3eff6c(0x1c7)]['languages'][_0x3eff6c(0x1ad)],_0x38ce3a=_0x3eff6c(0x1d3);break;case FindState['WRAPPED']:_0x3ca724=window[_0x3eff6c(0x1c7)]['languages'][_0x3eff6c(0x1ad)]['find_reached_'+(_0x3ff88d?_0x1fbc78[_0x3eff6c(0x1a9)]:_0x3eff6c(0x182))];break;}_0x536b1a['setAttribute']('data-status',_0x38ce3a),_0x536b1a[_0x3eff6c(0x1de)](_0x1fbc78[_0x3eff6c(0x1dc)],_0x2e5372===FindState[_0x3eff6c(0x1c9)]),_0x55c51c[_0x3eff6c(0x1de)](_0x3eff6c(0x193),_0x38ce3a),_0x3ca724?_0x55c51c['textContent']=_0x3ca724:(_0x55c51c[_0x3eff6c(0x194)]('data-l10n-id'),_0x55c51c['textContent']=''),this[_0x3eff6c(0x1e6)](_0x53db65);}['updateResultsCount']({current:current=0x0,total:total=0x0}={}){const _0x5e98fc=_0x578ddb,_0x1cfd0d={'YKPdb':function(_0x39c79b,_0xbee9e0){return _0x39c79b>_0xbee9e0;},'wXPDC':'{{total}}','BJJoD':'data-l10n-id'},{findResultsCount:_0x201336}=this;if(_0x1cfd0d[_0x5e98fc(0x1af)](total,0x0)){const _0x121a4f=MATCHES_COUNT_LIMIT;_0x201336[_0x5e98fc(0x1b6)]=total>_0x121a4f?window[_0x5e98fc(0x1c7)][_0x5e98fc(0x1dd)][_0x5e98fc(0x1c8)]['replace'](_0x5e98fc(0x19f),_0x121a4f):window['siyuan'][_0x5e98fc(0x1dd)]['find_match_count'][_0x5e98fc(0x1bd)](_0x5e98fc(0x1e0),current)[_0x5e98fc(0x1bd)](_0x1cfd0d[_0x5e98fc(0x183)],total);}else _0x201336[_0x5e98fc(0x194)](_0x1cfd0d[_0x5e98fc(0x1ac)]),_0x201336[_0x5e98fc(0x1b6)]='';}['open'](){const _0xeb7a2f=_0x578ddb;!this[_0xeb7a2f(0x19e)]&&(this.#resizeObserver['observe'](this.#mainContainer),this.#resizeObserver[_0xeb7a2f(0x195)](this['bar']),this[_0xeb7a2f(0x19e)]=!![],toggleExpandedBtn(this[_0xeb7a2f(0x1ba)],!![],this[_0xeb7a2f(0x1cc)])),this['findField'][_0xeb7a2f(0x1e7)](),this[_0xeb7a2f(0x189)][_0xeb7a2f(0x1b1)]();}[_0x578ddb(0x1e5)](){const _0x1a7e44=_0x578ddb,_0x45c33c={'pXxim':_0x1a7e44(0x1a0)},_0x5e6d88=_0x45c33c[_0x1a7e44(0x1b8)][_0x1a7e44(0x1c5)]('|');let _0x37c475=0x0;while(!![]){switch(_0x5e6d88[_0x37c475++]){case'0':if(!this['opened'])return;continue;case'1':this.#resizeObserver['disconnect']();continue;case'2':this['opened']=![];continue;case'3':this['eventBus'][_0x1a7e44(0x1b4)](_0x1a7e44(0x199),{'source':this});continue;case'4':toggleExpandedBtn(this['toggleButton'],![],this[_0x1a7e44(0x1cc)]);continue;}break;}}[_0x578ddb(0x198)](){const _0x48eae9=_0x578ddb,_0x1f6993={'ayhBk':'uLMIC'};this['opened']?this[_0x48eae9(0x1e5)]():_0x1f6993[_0x48eae9(0x1a8)]!==_0x48eae9(0x1c4)?this[_0x48eae9(0x187)]():this['dispatchEvent'](_0x48eae9(0x1e1),!![]);}#resizeObserverCallback(){const _0x41630c=_0x578ddb,_0x28630a={'TJLdl':'wrapContainers'},{bar:_0x41cc90}=this;_0x41cc90[_0x41630c(0x1a2)][_0x41630c(0x19a)](_0x28630a[_0x41630c(0x1ae)]);const _0x4d3514=_0x41cc90[_0x41630c(0x1d1)],_0x2ee980=_0x41cc90[_0x41630c(0x1d7)][_0x41630c(0x1d1)];_0x4d3514>_0x2ee980&&_0x41cc90['classList']['add'](_0x28630a['TJLdl']);}}export{PDFFindBar};