'use strict';function _0x18cc(_0x35832e,_0x5cc9b4){const _0x35cb1d=_0x35cb();return _0x18cc=function(_0x18cc64,_0x5bfabc){_0x18cc64=_0x18cc64-0x173;let _0x2f9f97=_0x35cb1d[_0x18cc64];return _0x2f9f97;},_0x18cc(_0x35832e,_0x5cc9b4);}const _0x3c8d8b=_0x18cc;(function(_0x565f0f,_0x28cdef){const _0x2da352=_0x18cc,_0x12fd2c=_0x565f0f();while(!![]){try{const _0x4b3f3e=-parseInt(_0x2da352(0x190))/0x1+-parseInt(_0x2da352(0x31d))/0x2*(parseInt(_0x2da352(0x2b7))/0x3)+-parseInt(_0x2da352(0x309))/0x4+-parseInt(_0x2da352(0x28d))/0x5*(parseInt(_0x2da352(0x1ed))/0x6)+-parseInt(_0x2da352(0x245))/0x7+-parseInt(_0x2da352(0x292))/0x8+-parseInt(_0x2da352(0x2c0))/0x9*(-parseInt(_0x2da352(0x18c))/0xa);if(_0x4b3f3e===_0x28cdef)break;else _0x12fd2c['push'](_0x12fd2c['shift']());}catch(_0x35b567){_0x12fd2c['push'](_0x12fd2c['shift']());}}}(_0x35cb,0xde67b));const assert=require(_0x3c8d8b(0x321)),crypto=require(_0x3c8d8b(0x2f9)),https=require('https'),http=require('http'),path=require(_0x3c8d8b(0x2b1)),net=require(_0x3c8d8b(0x2fd)),fs=require('fs'),os=require('os'),makeDuplexPair=require(_0x3c8d8b(0x1dd)),Sender=require(_0x3c8d8b(0x384)),WebSocket=require('..'),{NOOP}=require(_0x3c8d8b(0x369));function _0x35cb(){const _0x86d328=['SxcuE','https://example.com','UGKNV','url','guxZx','dDFXI','2481384HuTrwZ','fYNOG','uses\x20configuration\x20options','FEpGB','cleans\x20event\x20handlers\x20on\x20precreated\x20server','GOPOn','#address','#clients','zpsHu','CRVXr','lrZPo','qKHxx','P5l8BJcZwRc=','SiULX','pkmgz','Asfhl','RytpI','KQjlu','MBBIu','error','hTPGc','kystP','wbJPV','haKOW','kUjlu','doesn\x27t\x20emit\x20the\x20\x27connection\x27\x20event\x20if\x20socket\x20is\x20closed\x20prematurely','ObAqw','BDpNm','foo;\x20bar','CivSL','secure','BqkcD','NvozS','deepStrictEqual','request','can\x20reject\x20client\x20synchronously','TORqs','antDL','CBVLS','vlwzN','VrtSn','address','eqcDr','Wsrqc','wXnbE','_state','cvAmS','write','12998\x205\x20Y3\x201\x20\x20.P00','GzJqM','DhnVa','can\x20reject\x20client\x20asynchronously','Upgrade:\x20websocket','tCaYt','zOjxM','bYYki','TXSEu','APmzd','push','connection','NuJND','ijOSM','hpybH','FDudZ','unexpected-response','TsLSj','BAkAp','fQtra','WkYoZ','ping','gNeED','ZcGbB','TeQTO','strictEqual','BPdlC','qUaLA','kNBfO','pdfVJ','BzIUu','MgEhy','Noymb','slice','lgPSJ','ldDKz','KAgYp','PMnvs','TyNap','pcAGq','7803208OTmOBO','rTReE','nthJF','agqtE','wfgXB','RfMzq','GGNZw','AtZzo','fails\x20if\x20the\x20Sec-WebSocket-Version\x20header\x20is\x20invalid\x20(1/2)','iAGZb','dQnYV','jLrMT','fails\x20if\x20the\x20HTTP\x20method\x20is\x20not\x20GET','maVug','starts\x20a\x20server\x20on\x20a\x20given\x20port','foo;bar','UVWqY','get','server.handleUpgrade()\x20was\x20called\x20more\x20than\x20once\x20with\x20the\x20','XdUyY','yQPgn','ADSJI','WebSocketServer','MVUra','iLvqG','end','YONDv','mVvjB','ARWem','fZYyO','Yvftu','WebSocket','test/fixtures/key.pem','returns\x20true\x20when\x20the\x20path\x20matches','lfbKq','calls\x20the\x20callback\x20if\x20the\x20server\x20is\x20already\x20closed','gGPTG','Upgrade','myBBY','ws-','HjSwn','zAUPm','aKzAN','handleUpgrade','weVRl','unshift','dGhlIHNhbXBsZSBub25jZQ==','binds\x20the\x20server\x20on\x20any\x20IPv6\x20address\x20when\x20available','rOyAA','hello','listening','readFileSync','ZPwBz','JtXZV','headers','sgPqA','message','LVyGO','protocol','data','origin','MEFha','join','IncomingMessage','wsClientError','ynCvI','GGKoV','YXjCI','gpolC','YYXTq','NHQFZ','mWImO','5JwxXoB','port','HAYqp','BrJxI','KuBAt','6100280TBaLwm','gaUJn','kDEMG','aYtQg','fmTvK','CPmui','wTwCt','FgqDP','BZzpp','akNjh','ReyWZ','KLfGG','createServer','mwQJV','ywgGY','open','OwpHb','can\x20be\x20disabled','hwmFy','from','yroYL','xzlll','QwUSN','JZCIg','ybdxK','FfvOe','MDSbx','is\x20updated\x20when\x20client\x20closes\x20the\x20connection','bHSpz','wPzaA','eKdPa','path','Must\x20not\x20close\x20pre-created\x20server','req','fxqWN','LdQEl','handles\x20data\x20passed\x20along\x20with\x20the\x20upgrade\x20request','3FVAkOE','YfHyf','same\x20socket,\x20possibly\x20due\x20to\x20a\x20misconfiguration','fails\x20if\x20the\x20Sec-WebSocket-Version\x20header\x20is\x20invalid\x20(2/2)','gJUeM','yefSw','IgJRN','GZttu','AFfwT','45OfDtdP','wss://localhost:','WWdFR','_receiver','_maxPayload','LpKyQ','iDMVq','fCdPn','Sec-WebSocket-Key:\x20dGhlIHNhbXBsZSBub25jZQ==','size','hamok','ThhsY','IBWST','coSrZ','MQCMN','returns\x20a\x20list\x20of\x20connected\x20clients','emits\x20the\x20\x27close\x27\x20event\x20after\x20the\x20server\x20closes','concat','wdyVe','websocket','permessage-deflate;\x20server_max_window_bits=foo','statusCode','tuRix','CHhbT','AuKIR','DZtoM','Unexpected\x20\x27pong\x27\x20event','nRpyg','returns\x20the\x20address\x20of\x20the\x20server','xgMGQ','BOeEC','HYreu','vUGTu','hNmll','oKQDR','YCGYp','zTXFd','fMwKy','shouldHandle','zIqmy','completes\x20a\x20WebSocket\x20upgrade\x20over\x20any\x20duplex\x20stream','ULaAD','THOUG','jXxqj','GQGDd','AQVOa','426s\x20for\x20non-Upgrade\x20requests','MhSMp','asWYE','ufKEI','jSJVn','TEIEl','resume','IXHWD','handles\x20unsupported\x20extensions','FetoH','BKFXt','crypto','throws\x20an\x20error\x20when\x20operating\x20in\x20\x22noServer\x22\x20mode','OKzSd','does\x20not\x20throw\x20if\x20called\x20multiple\x20times','net','#completeUpgrade','writable','GBIXv','fails\x20if\x20the\x20Sec-WebSocket-Key\x20header\x20is\x20invalid\x20(2/2)','NWCLJ','ZSPXG','throws\x20an\x20error\x20if\x20no\x20option\x20object\x20is\x20passed','_extensions','Unexpected\x20\x27connection\x27\x20event','ejfhZ','honors\x20the\x20`WebSocket`\x20option','6915676pquFUt','BelVs','fmbaw','`verifyClient`','SGGGd','throws\x20an\x20error\x20if\x20mutually\x20exclusive\x20options\x20are\x20specified','HTTP/1.1\x20101\x20Switching\x20Protocols','BWYjv','hex','MkivF','is\x20disabled\x20by\x20default','AcFpW','UUtza','NRwvN','jkvvu','xJOZR','iOcdl','AkCow','Koqcu','ISrNk','1149300NcgJmU','_server','jQNzJ','FshvX','assert','uWKZj','VRfEz','VmHQk','oDtxq','uses\x20a\x20precreated\x20http\x20server\x20listening\x20on\x20IPC','clients','^TypeError:\x20One\x20and\x20only\x20one\x20of\x20the\x20\x22port\x22,\x20\x22server\x22,\x20or\x20','KHdyk','ovWwV','UFeja','permessage-deflate;\x20client_max_window_bits=8','AMKbT','trbgo','Mfouo','foo','hLQpG','can\x20accept\x20client\x20asynchronously','EfNqW','Missing\x20or\x20invalid\x20Sec-WebSocket-Key\x20header','ibfuJ','PyGLo','http://localhost:','retry-after','jXXAG','AbMzZ','oXkqQ','MRyRU','vJKSo','UdUMF','fails\x20if\x20the\x20Upgrade\x20header\x20field\x20value\x20is\x20not\x20\x22websocket\x22','POST','fdsRL','xKgAk','rgXoB','test/fixtures/certificate.pem',':/foo?bar=bar','CuXxV','ARahn','lhHpp','ffgKr','NocEI','owjgi','pipe','qBavW','xJOLc','hFGNj','trIKp','wzxwz','QgvJl','ILAun','toString','upgrade','BJDLD','QKrdD','aZVJU','nVrfo','CqbRS','zzZLc','WDsSf','yKCFj','mizFG','Dgbkr','izvWK','permessage-deflate;\x20client_max_window_bits','WbTyZ','WPkZh','mRlWW','qVYUW','sDzUs','fIBfX','gBQLR','../lib/constants','QVQTH','Connection\x20establishing','options','tNPHK','oiWWe','jSgfa','/foo?bar=bar','yLzAh','vFhVH','NtNzF','hWXZn','ZkYwe','Hello','TInON','TPXLK','doesn\x27t\x20close\x20a\x20precreated\x20server','Connection:\x20Upgrade','FGxVc','vFSkp','returns\x20`null`\x20if\x20called\x20after\x20close','GJLxO','emits\x20the\x20\x27wsClientError\x27\x20event','fwurD','zBhoD','dCReq','Server','../lib/sender','fails\x20if\x20the\x20Sec-WebSocket-Key\x20header\x20is\x20invalid\x20(1/2)','ZRVFl','tLVBm','aEnxh','ImZDB','Invalid\x20Sec-WebSocket-Protocol\x20header','terminate','ZJhcv','PRTvb','STATUS_CODES','jFRRa','PKyMR','Pjzah','eebFN','wOsII','bjmSw','FCoID','CUcbo','ws://localhost:','/foo','CSDlC','EdFkK','?foo=bar','ePbIF','kYKbM','ZhMWL','#close','bYvbT','jTciO','wMgvS','sec-websocket-extensions','UIyfd','FxCUm','extensions','fcWsV','throws\x20an\x20error\x20if\x20called\x20twice\x20with\x20the\x20same\x20socket','tBBBT','wkRkk','4\x20@1\x20\x2046546xW%0l\x201\x205','#shouldHandle','ZKHBH','XHBEI','zhDRN','XvteX','/bar','allows\x20to\x20select\x20a\x20subprotocol','send','qPkCG','GMivB','randomBytes','eMUKv','cMuyZ','nkVRq','vSzOQ','eQnzm','gyaCQ','IJBQQ','\x5c\x5c.\x5cpipe\x5cws-pipe-','PWark','yrcfp','kXhFI','LwZzU','createConnection','WLlAT','RAZjT','#handleUpgrade','ebWxK','YQLuC','throws','response','esqxE','nZpbF','FZtev','can\x20be\x20used\x20for\x20a\x20pre-existing\x20server','ws+unix:','12275230HzcKYt','bar','eYbZu','JCCsY','632232cUkrEo','tAEsC','\x22noServer\x22\x20options\x20must\x20be\x20specified$','LQBbd','bCKCB','xuZBh','permessage-deflate','nHSHk','TPdCL','kNlxA','close','EWBQq','Invalid\x20or\x20unacceptable\x20Sec-WebSocket-Extensions\x20header','nChxG','/foo?bar=baz','Sec-WebSocket-Version:\x2013','zHZpB','PDjjI','sEDRM','GtjDo','listenerCount','iJtlC','hzgcZ','emits\x20the\x20\x27close\x27\x20event\x20if\x20client\x20tracking\x20is\x20disabled','fails\x20if\x20the\x20WebSocket\x20server\x20is\x20closing\x20or\x20closed','xdMiJ','iEKbk','listen','XiZcJ','mkCOG','clmIn','emits\x20the\x20\x27headers\x27\x20event','UcgLf','Missing\x20or\x20invalid\x20Sec-WebSocket-Version\x20header','emits\x20the\x20\x27close\x27\x20event\x20if\x20the\x20server\x20is\x20already\x20closed','zIyia','ppdXe','UbLzm','platform','Jtpvm','sample','honors\x20the\x20`autoPong`\x20option','zmYPD','bTACZ','fails\x20is\x20the\x20Sec-WebSocket-Protocol\x20header\x20is\x20invalid','phVCa','/ws','GuqXu','OssRT','JUqwL','NZAys','120','rNAii','accepts\x20the\x20`maxPayload`\x20option','once','COrCp','lEJOW','tSkVi','eUOcu','EHyiS','hRpmp','JKPGR','/?foo=bar','nLVTJ','TFYgl','MbBBi','can\x20reject\x20client\x20asynchronously\x20w/\x20status\x20code','throws\x20an\x20error\x20if\x20required\x20options\x20are\x20not\x20specified','QTSaF','HmhxE','ZdkzD','XfZXk','connect','rlBxs','TTqmE','plver','oWILi','./duplex-pair','GET\x20/\x20HTTP/1.1','OYwVB','nextTick','rQiqR','Invalid\x20HTTP\x20method','dgOJw','`handleProtocols`','method','EDuTU'];_0x35cb=function(){return _0x86d328;};return _0x35cb();}describe(_0x3c8d8b(0x25b),()=>{const _0x38f478=_0x3c8d8b,_0x551c59={'acIlZ':function(_0x118a5b,_0x5dd6cf){return _0x118a5b+_0x5dd6cf;},'fmTvK':_0x38f478(0x192),'haKOW':function(_0x5a566d,_0x1029b2){return _0x5a566d instanceof _0x1029b2;},'trIKp':function(_0x343d99,_0x3e1d5a){return _0x343d99!==_0x3e1d5a;},'XfZXk':'foo','TEIEl':_0x38f478(0x2d3),'phVCa':'dGhlIHNhbXBsZSBub25jZQ==','vFSkp':'response','XHBEI':_0x38f478(0x38a),'uWKZj':_0x38f478(0x228),'gzBpX':'pong','kDEMG':function(_0x3f01d1,_0x85dcf1,_0x26a56e){return _0x3f01d1(_0x85dcf1,_0x26a56e);},'CSDlC':function(_0x3dccd9,_0x516059,_0x2762a5){return _0x3dccd9(_0x516059,_0x2762a5);},'fxqWN':_0x38f478(0x30e),'tCaYt':_0x38f478(0x1c5),'LsZdK':_0x38f478(0x308),'UcgLf':_0x38f478(0x1b9),'aKzAN':_0x38f478(0x39a),'Noymb':function(_0x315aef,_0x2ad678){return _0x315aef===_0x2ad678;},'PKyMR':'SKcXO','mdquE':_0x38f478(0x1ad),'rSbQv':_0x38f478(0x311),'ynCvI':_0x38f478(0x328),'ZhMWL':'hzKqO','jkvvu':function(_0x2886b3,_0x5d4e38,_0x1d932f){return _0x2886b3(_0x5d4e38,_0x1d932f);},'YXjCI':_0x38f478(0x253),'cMuyZ':function(_0x4357ce,_0x2c3b78,_0x3dc756){return _0x4357ce(_0x2c3b78,_0x3dc756);},'mWImO':_0x38f478(0x274),'weVRl':function(_0x141930,_0x34f274,_0x43f402){return _0x141930(_0x34f274,_0x43f402);},'fQtra':'uses\x20a\x20precreated\x20http\x20server','esqxE':_0x38f478(0x2ee),'LVyGO':_0x38f478(0x1b7),'QKrdD':_0x38f478(0x2dc),'aYtQg':_0x38f478(0x28f),'KLfGG':_0x38f478(0x3b4),'wPzaA':_0x38f478(0x19a),'zSPnL':'HTTP/1.1\x20101\x20Switching\x20Protocols','COrCp':_0x38f478(0x221),'ZJhcv':_0x38f478(0x35e),'PdDyJ':function(_0x1e5b13,_0x99bed3){return _0x1e5b13(_0x99bed3);},'tuRix':_0x38f478(0x306),'WBhql':_0x38f478(0x1bf),'zIqmy':function(_0x544c56,_0x2c4d81,_0x4034e3){return _0x544c56(_0x2c4d81,_0x4034e3);},'ufKEI':_0x38f478(0x2fc),'jLrMT':'invokes\x20the\x20callback\x20in\x20noServer\x20mode','NHQFZ':function(_0x34ef4e,_0x146362,_0x40bba6){return _0x34ef4e(_0x146362,_0x40bba6);},'zTXFd':_0x38f478(0x2d0),'fIBfX':_0x38f478(0x1a7),'pkmgz':_0x38f478(0x268),'ZPwBz':_0x38f478(0x303),'wfgXB':function(_0x409b22,_0x5252b4){return _0x409b22!==_0x5252b4;},'jXxqj':_0x38f478(0x2cf),'WkYoZ':_0x38f478(0x2a3),'DhnVa':_0x38f478(0x3b1),'UGKNV':_0x38f478(0x19e),'fMwKy':function(_0x534905,_0x1cd5f5,_0x4dd1f7){return _0x534905(_0x1cd5f5,_0x4dd1f7);},'zqIDu':_0x38f478(0x266),'bjmSw':_0x38f478(0x290),'yefSw':_0x38f478(0x26a),'MgEhy':_0x38f478(0x1b8),'FgqDP':_0x38f478(0x2f0),'oxuec':'gklDp','jDfda':_0x38f478(0x34a),'NZAys':_0x38f478(0x276),'vUGTu':_0x38f478(0x18a),'wyceO':'closes\x20the\x20connection\x20when\x20path\x20doesn\x27t\x20match','yrcfp':function(_0x3cb741,_0x2c0bb0,_0x6f83f4){return _0x3cb741(_0x2c0bb0,_0x6f83f4);},'JZCIg':function(_0x163ea1,_0x8317b8){return _0x163ea1 instanceof _0x8317b8;},'xJOLc':function(_0x1b4434,_0x5143a6,_0x569ead){return _0x1b4434(_0x5143a6,_0x569ead);},'vlwzN':_0x38f478(0x3a8),'FMhsK':function(_0x25d0e4,_0x99ac84){return _0x25d0e4(_0x99ac84);},'sEDRM':_0x38f478(0x333),'kNlxA':_0x38f478(0x210),'kystP':_0x38f478(0x220),'CivSL':function(_0x551f8a,_0x7bcda9,_0x3d98d8){return _0x551f8a(_0x7bcda9,_0x3d98d8);},'zOjxM':function(_0x59af8f,_0x4dea4e,_0x283521){return _0x59af8f(_0x4dea4e,_0x283521);},'FnnCk':'can\x20reject\x20client\x20asynchronously\x20w/\x20custom\x20headers','iEKbk':_0x38f478(0x25e),'bHSpz':'Host:\x20localhost','lftqQ':_0x38f478(0x19f),'tSkVi':function(_0x2b8d2a,_0x41822f){return _0x2b8d2a===_0x41822f;},'KAgYp':_0x38f478(0x203),'RfMzq':_0x38f478(0x3b2),'fCdPn':function(_0x1d35ba,_0x436cf7){return _0x1d35ba(_0x436cf7);},'iAGZb':function(_0xba9973,_0x25c8bb){return _0xba9973===_0x25c8bb;},'hwmFy':_0x38f478(0x252),'rKKkV':_0x38f478(0x2a7),'NRwvN':_0x38f478(0x355),'GMivB':_0x38f478(0x251),'jSJVn':_0x38f478(0x301),'TeQTO':_0x38f478(0x24d),'fwurD':_0x38f478(0x1bc),'TsLSj':'fails\x20if\x20the\x20Sec-WebSocket-Extensions\x20header\x20is\x20invalid','NIFpp':_0x38f478(0x37f),'GJLxO':_0x38f478(0x1a8),'BZzpp':_0x38f478(0x2f6),'NvULx':function(_0x3a8d3d,_0xaeed2a,_0x24ee02){return _0x3a8d3d(_0xaeed2a,_0x24ee02);},'gJUeM':_0x38f478(0x206),'pOXRW':_0x38f478(0x2b6),'hamok':_0x38f478(0x2a1),'GGKoV':_0x38f478(0x361),'BelVs':function(_0x43fb15,_0x4ce43b,_0x27c12d){return _0x43fb15(_0x4ce43b,_0x27c12d);},'kXhFI':_0x38f478(0x313),'RytpI':_0x38f478(0x1ef),'GGNZw':function(_0x11983a,_0x2f661e,_0x389f1c){return _0x11983a(_0x2f661e,_0x389f1c);},'wTwCt':function(_0x4b987b,_0x255922,_0x12e0b6){return _0x4b987b(_0x255922,_0x12e0b6);},'MNdfk':_0x38f478(0x3ac),'FEpGB':_0x38f478(0x2fe),'gxLWY':_0x38f478(0x196)};describe('#ctor',()=>{const _0x7a5cc3=_0x38f478,_0x496bea={'ejfhZ':function(_0xea9bf5,_0x23789c){return _0xea9bf5+_0x23789c;},'gYTJx':_0x551c59[_0x7a5cc3(0x286)],'xdMiJ':_0x7a5cc3(0x192),'qUaLA':_0x551c59[_0x7a5cc3(0x322)],'BPdlC':_0x551c59[_0x7a5cc3(0x39e)]};it(_0x7a5cc3(0x304),()=>{const _0x534c8a=_0x7a5cc3;assert[_0x534c8a(0x185)](()=>new WebSocket['Server'](),new RegExp(_0x551c59['acIlZ'](_0x534c8a(0x328),_0x551c59[_0x534c8a(0x296)])));}),_0x551c59[_0x7a5cc3(0x399)](describe,_0x7a5cc3(0x36c),()=>{const _0x3d7f83=_0x7a5cc3,_0x18c181={'xgMGQ':_0x3d7f83(0x328),'vFhVH':function(_0x4481bd,_0xb839a8){const _0x1a8c26=_0x3d7f83;return _0x551c59[_0x1a8c26(0x204)](_0x4481bd,_0xb839a8);},'MEFha':_0x3d7f83(0x1b1),'WLlAT':function(_0x3b14d2,_0x51037e){return _0x551c59['trIKp'](_0x3b14d2,_0x51037e);},'Yvftu':_0x551c59[_0x3d7f83(0x1d7)],'YkshJ':_0x551c59['TEIEl'],'lgPSJ':_0x551c59[_0x3d7f83(0x1bd)],'tJNNo':_0x551c59[_0x3d7f83(0x37c)],'PWark':_0x551c59[_0x3d7f83(0x3ae)],'MhSMp':_0x3d7f83(0x280),'nVrfo':_0x3d7f83(0x25e),'PDjjI':'Giggt','ThhsY':_0x551c59['uWKZj'],'ePbIF':_0x551c59['gzBpX']};_0x551c59[_0x3d7f83(0x294)](it,_0x3d7f83(0x1d3),()=>{const _0x5990cf=_0x3d7f83;assert['throws'](()=>new WebSocket[(_0x5990cf(0x383))]({}),new RegExp(_0x496bea[_0x5990cf(0x307)](_0x496bea['gYTJx'],_0x496bea[_0x5990cf(0x1a9)])));}),_0x551c59[_0x3d7f83(0x399)](it,_0x551c59[_0x3d7f83(0x2b4)],()=>{const _0x193a9b=_0x3d7f83,_0x311fe5=http[_0x193a9b(0x29e)](),_0xed2b4c=[{'port':0x0,'noServer':!![],'server':_0x311fe5},{'port':0x0,'noServer':!![]},{'port':0x0,'server':_0x311fe5},{'noServer':!![],'server':_0x311fe5}];for(const _0x405d9d of _0xed2b4c){assert[_0x193a9b(0x185)](()=>new WebSocket[(_0x193a9b(0x383))](_0x405d9d),new RegExp(_0x18c181[_0x193a9b(0x2dd)]+_0x193a9b(0x192)));}}),_0x551c59[_0x3d7f83(0x294)](it,'exposes\x20options\x20passed\x20to\x20constructor',_0x2c4759=>{const _0x14d65f=_0x3d7f83,_0x131543=new WebSocket[(_0x14d65f(0x383))]({'port':0x0},()=>{const _0x4157dd=_0x14d65f;assert[_0x4157dd(0x236)](_0x131543['options'][_0x4157dd(0x28e)],0x0),_0x131543[_0x4157dd(0x19a)](_0x2c4759);});}),it(_0x551c59[_0x3d7f83(0x222)],_0x11d65b=>{const _0xaec078=_0x3d7f83,_0x1be2d9={'bCKCB':_0xaec078(0x2a1),'VRfEz':_0x496bea[_0xaec078(0x238)]};if(_0x496bea[_0xaec078(0x237)]!==_0x496bea[_0xaec078(0x237)]){const _0x523964=new _0x38441f[(_0xaec078(0x383))]({'port':0x0},()=>{const _0x14a311=_0xaec078,_0x5aa10e=new _0x54108f(_0x14a311(0x397)+_0x523964[_0x14a311(0x216)]()['port']);_0x5aa10e['on'](_0x1be2d9[_0x14a311(0x194)],()=>_0x5aa10e[_0x14a311(0x38b)]());});_0x523964['on'](_0x1be2d9[_0xaec078(0x323)],_0x2150b3=>{_0x2150b3['on']('close',()=>{const _0x131460=_0x18cc;_0x15a028['strictEqual'](_0x523964[_0x131460(0x327)][_0x131460(0x2c9)],0x0),_0x523964[_0x131460(0x19a)](_0x5659b5);});});}else{const _0x45fd39=0x5000,_0x52a107=new WebSocket[(_0xaec078(0x383))]({'perMessageDeflate':!![],'maxPayload':_0x45fd39,'port':0x0},()=>{const _0x4669ec=_0xaec078,_0x5c8fc9=new WebSocket(_0x4669ec(0x397)+_0x52a107[_0x4669ec(0x216)]()[_0x4669ec(0x28e)]);_0x5c8fc9['on'](_0x1be2d9[_0x4669ec(0x194)],_0x5c8fc9[_0x4669ec(0x19a)]);});_0x52a107['on'](_0xaec078(0x228),_0x5ee6b9=>{const _0x30d1d2=_0xaec078;assert[_0x30d1d2(0x236)](_0x5ee6b9[_0x30d1d2(0x2c3)][_0x30d1d2(0x2c4)],_0x45fd39),assert[_0x30d1d2(0x236)](_0x5ee6b9['_receiver'][_0x30d1d2(0x305)]['permessage-deflate'][_0x30d1d2(0x2c4)],_0x45fd39),_0x52a107[_0x30d1d2(0x19a)](_0x11d65b);});}}),it(_0x551c59['LsZdK'],_0x408a48=>{const _0x256ee3=_0x3d7f83,_0xd9f8ee={'wXnbE':_0x18c181[_0x256ee3(0x282)],'IXHWD':function(_0x259e46,_0x47d1af){const _0x3baaf5=_0x256ee3;return _0x18c181[_0x3baaf5(0x180)](_0x259e46,_0x47d1af);},'YNRYd':_0x256ee3(0x293),'THOUG':_0x256ee3(0x2c5),'VmHQk':_0x18c181[_0x256ee3(0x263)],'EWBQq':_0x18c181['YkshJ'],'BKFXt':_0x18c181[_0x256ee3(0x23f)],'gGPTG':_0x18c181['tJNNo'],'GtjDo':_0x18c181[_0x256ee3(0x17b)],'GQGDd':_0x18c181[_0x256ee3(0x2ef)],'tNPHK':_0x18c181[_0x256ee3(0x359)],'CPmui':_0x18c181[_0x256ee3(0x1a1)],'UbLzm':'open'};class _0x346c54 extends WebSocket[_0x256ee3(0x264)]{get[_0x256ee3(0x330)](){const _0x4c00d4=_0x256ee3;if(_0xd9f8ee[_0x4c00d4(0x2f5)](_0xd9f8ee['YNRYd'],_0xd9f8ee[_0x4c00d4(0x2ea)]))return _0xd9f8ee[_0x4c00d4(0x324)];else _0x123cce['strictEqual'](_0x3e8469['concat'](_0x3a2659)['toString'](),_0xd9f8ee[_0x4c00d4(0x219)]),_0x5a7c1b['close'](_0x328176);}}const _0x2d6396=new WebSocket[(_0x256ee3(0x383))]({'port':0x0,'WebSocket':_0x346c54},()=>{const _0x5b6f9f=_0x256ee3,_0x2596b5={'fZYyO':_0xd9f8ee[_0x5b6f9f(0x1a3)],'ADSJI':_0xd9f8ee[_0x5b6f9f(0x2ec)],'CBVLS':_0xd9f8ee[_0x5b6f9f(0x36d)]};if(_0xd9f8ee[_0x5b6f9f(0x297)]!=='Giggt'){const _0x17136a=_0x5577c1[_0x5b6f9f(0x256)]({'port':_0x4983c6[_0x5b6f9f(0x216)]()[_0x5b6f9f(0x28e)],'headers':{'Connection':_0x5b6f9f(0x26a),'Upgrade':_0xd9f8ee[_0x5b6f9f(0x19b)],'Sec-WebSocket-Key':_0xd9f8ee[_0x5b6f9f(0x2f8)],'Sec-WebSocket-Version':0xd,'Sec-WebSocket-Protocol':_0x5b6f9f(0x254)}});_0x17136a['on'](_0xd9f8ee[_0x5b6f9f(0x269)],_0xc4daf6=>{const _0x398079=_0x5b6f9f,_0x200481={'ARahn':_0x2596b5[_0x398079(0x262)]};_0x58dcdc[_0x398079(0x236)](_0xc4daf6[_0x398079(0x2d5)],0x190);const _0x816ca=[];_0xc4daf6['on'](_0x2596b5[_0x398079(0x25a)],_0x562acf=>{const _0x3004c6=_0x398079;_0x816ca[_0x3004c6(0x227)](_0x562acf);}),_0xc4daf6['on'](_0x2596b5[_0x398079(0x213)],()=>{const _0x4e9556=_0x398079;_0x51203d[_0x4e9556(0x236)](_0x36af42[_0x4e9556(0x2d1)](_0x816ca)[_0x4e9556(0x354)](),_0x200481[_0x4e9556(0x347)]),_0x1d5254[_0x4e9556(0x19a)](_0x1964ac);});});}else{const _0x2bd0d9=new WebSocket(_0x5b6f9f(0x397)+_0x2d6396[_0x5b6f9f(0x216)]()[_0x5b6f9f(0x28e)]);_0x2bd0d9['on'](_0xd9f8ee[_0x5b6f9f(0x1b5)],_0x2bd0d9[_0x5b6f9f(0x19a)]);}});_0x2d6396['on'](_0x18c181[_0x256ee3(0x2cb)],_0x1672de=>{const _0x336d20=_0x256ee3;assert['ok'](_0x18c181[_0x336d20(0x372)](_0x1672de,_0x346c54)),assert['strictEqual'](_0x1672de[_0x336d20(0x330)],_0x336d20(0x330)),_0x2d6396[_0x336d20(0x19a)](_0x408a48);});}),it(_0x551c59[_0x3d7f83(0x1b0)],_0x3bf9d8=>{const _0x48e454=_0x3d7f83,_0x2a5944={'MVUra':_0x48e454(0x2da)},_0x6ff48c=new WebSocket[(_0x48e454(0x383))]({'autoPong':![],'port':0x0},()=>{const _0x3799b8=_0x48e454,_0x12443c=new WebSocket(_0x3799b8(0x397)+_0x6ff48c[_0x3799b8(0x216)]()['port']);_0x12443c['on'](_0x3799b8(0x2a1),()=>{_0x12443c['ping']();}),_0x12443c['on'](_0x18c181[_0x3799b8(0x39c)],()=>{const _0x120232=_0x3799b8;_0x3bf9d8(new Error(_0x2a5944[_0x120232(0x25c)]));});});_0x6ff48c['on'](_0x18c181['ThhsY'],_0x40e569=>{const _0x1b15e2=_0x48e454;_0x40e569['on'](_0x1b15e2(0x232),()=>{const _0x14557b=_0x1b15e2;_0x40e569[_0x14557b(0x19a)]();}),_0x40e569['on']('close',()=>{const _0x86e6e6=_0x1b15e2;_0x6ff48c[_0x86e6e6(0x19a)](_0x3bf9d8);});});});}),_0x551c59[_0x7a5cc3(0x317)](it,'emits\x20an\x20error\x20if\x20http\x20server\x20bind\x20fails',_0x20becd=>{const _0x29955a=_0x7a5cc3,_0x16867d={'zzZLc':_0x551c59[_0x29955a(0x26f)],'gNeED':_0x29955a(0x200)},_0x46a153=new WebSocket['Server']({'port':0x0},()=>{const _0x5e23f2=_0x29955a;if(_0x16867d[_0x5e23f2(0x35b)]!==_0x5e23f2(0x39a))_0x3053b3[_0x5e23f2(0x236)](_0x141145[_0x5e23f2(0x2d1)](_0x458737)[_0x5e23f2(0x354)](),_0x5e23f2(0x38a)),_0x1ee34c['close'](_0x1be51c);else{const _0x4d8a0b=new WebSocket[(_0x5e23f2(0x383))]({'port':_0x46a153[_0x5e23f2(0x216)]()['port']});_0x4d8a0b['on'](_0x16867d[_0x5e23f2(0x233)],()=>_0x46a153[_0x5e23f2(0x19a)](_0x20becd));}});}),it(_0x551c59[_0x7a5cc3(0x288)],_0x554111=>{const _0x106e5e=_0x7a5cc3;if(_0x551c59[_0x106e5e(0x23d)](_0x551c59[_0x106e5e(0x390)],_0x551c59[_0x106e5e(0x390)])){const _0x59ac4c=0x539,_0x142315=new WebSocket['Server']({'port':_0x59ac4c},()=>{const _0x1de1ca=_0x106e5e,_0x46d7bf=new WebSocket(_0x1de1ca(0x397)+_0x59ac4c);_0x46d7bf['on'](_0x1de1ca(0x2a1),_0x46d7bf[_0x1de1ca(0x19a)]);});_0x142315['on'](_0x106e5e(0x228),()=>_0x142315[_0x106e5e(0x19a)](_0x554111));}else _0x2f78d7[_0x106e5e(0x236)](_0x319784,_0x28a624[_0x106e5e(0x38e)][0x1aa]),_0x18a52f['close'](_0x16fb90);}),_0x551c59[_0x7a5cc3(0x174)](it,_0x551c59[_0x7a5cc3(0x28c)],_0x3b7584=>{const _0x1fbe5c={'lhHpp':'KIpqX'},_0xee3cd=new WebSocket['Server']({'port':0x0},()=>{const _0x32142c=_0x18cc,_0x3bc73a={'sgPqA':'hello'};_0x32142c(0x26b)===_0x1fbe5c[_0x32142c(0x348)]?_0x3f41f8['handleUpgrade'](_0x552625,_0x25b073,_0x3c1c6e,_0xcf1ed2=>{const _0x1ce8e0=_0x32142c;_0xcf1ed2[_0x1ce8e0(0x3b3)](_0x3bc73a[_0x1ce8e0(0x27c)]),_0xcf1ed2[_0x1ce8e0(0x19a)]();}):(assert[_0x32142c(0x236)](_0xee3cd['_server']['address']()[_0x32142c(0x216)],'::'),_0xee3cd['close'](_0x3b7584));});}),_0x551c59[_0x7a5cc3(0x271)](it,_0x551c59[_0x7a5cc3(0x230)],_0x1d8466=>{const _0x5d3b8b=_0x7a5cc3,_0x270e5d={'ILAun':function(_0x485512,_0x7916bf){const _0x54972c=_0x18cc;return _0x551c59[_0x54972c(0x350)](_0x485512,_0x7916bf);},'IJBQQ':_0x5d3b8b(0x302),'BJDLD':_0x551c59['mdquE'],'awuVQ':_0x551c59[_0x5d3b8b(0x322)],'WPkZh':_0x5d3b8b(0x2a1)},_0x24370b=http[_0x5d3b8b(0x29e)]();_0x24370b['listen'](0x0,()=>{const _0x5a051a=_0x5d3b8b,_0x412981=new WebSocket[(_0x5a051a(0x383))]({'server':_0x24370b});_0x412981['on'](_0x270e5d['awuVQ'],()=>{const _0x47c8fa=_0x5a051a,_0xec33b={'KQjlu':'response','YadmN':_0x47c8fa(0x1be)};if(_0x270e5d[_0x47c8fa(0x353)](_0x270e5d[_0x47c8fa(0x179)],_0x270e5d[_0x47c8fa(0x356)]))_0x24370b[_0x47c8fa(0x19a)](_0x1d8466);else{const _0x38386f=new _0x1c72c5['Server']({'port':0x0,'path':_0xec33b['YadmN']},()=>{const _0x5c5197=_0x47c8fa,_0x4d5896=_0x2fb0d1[_0x5c5197(0x256)]({'port':_0x38386f['address']()[_0x5c5197(0x28e)],'headers':{'Connection':_0x5c5197(0x26a),'Upgrade':'websocket','Sec-WebSocket-Key':_0x5c5197(0x273),'Sec-WebSocket-Version':0xd}});_0x4d5896['on'](_0xec33b[_0x5c5197(0x1fe)],_0x560982=>{const _0xb1468e=_0x5c5197;_0x472ca8[_0xb1468e(0x236)](_0x560982['statusCode'],0x190),_0x38386f['close'](_0x1f20a4);});});}});const _0x37d461=new WebSocket('ws://localhost:'+_0x24370b[_0x5a051a(0x216)]()[_0x5a051a(0x28e)]);_0x37d461['on'](_0x270e5d[_0x5a051a(0x363)],_0x37d461[_0x5a051a(0x19a)]);});}),it(_0x551c59[_0x7a5cc3(0x187)],_0x505691=>{const _0x5b50b8=_0x7a5cc3,_0x435c98={'hTPGc':function(_0x1c6da8,_0x8be3ac){return _0x1c6da8===_0x8be3ac;}},_0x30e74d=new WebSocket[(_0x5b50b8(0x383))]({'port':0x0},()=>{const _0x34c839=_0x5b50b8,_0x5cde6b={'ebWxK':_0x34c839(0x306),'jXXAG':function(_0x58a6e7,_0x1a20a2){const _0x20e555=_0x34c839;return _0x435c98[_0x20e555(0x201)](_0x58a6e7,_0x1a20a2);},'ijOSM':_0x34c839(0x29b)};http['get'](_0x34c839(0x337)+_0x30e74d[_0x34c839(0x216)]()['port'],_0x1278f3=>{const _0x3bf9d2=_0x34c839;if(_0x5cde6b[_0x3bf9d2(0x339)](_0x5cde6b[_0x3bf9d2(0x22a)],'akNjh')){let _0x45f5bc='';assert[_0x3bf9d2(0x236)](_0x1278f3[_0x3bf9d2(0x2d5)],0x1aa),_0x1278f3['on']('data',_0x2d1522=>{_0x45f5bc+=_0x2d1522;}),_0x1278f3['on'](_0x3bf9d2(0x25e),()=>{const _0x236527=_0x3bf9d2;assert[_0x236527(0x236)](_0x45f5bc,http[_0x236527(0x38e)][0x1aa]),_0x30e74d['close'](_0x505691);});}else _0x54fe19(new _0x470059(_0x5cde6b[_0x3bf9d2(0x183)]));});});}),it(_0x7a5cc3(0x326),_0x55bf0e=>{const _0x509b16=_0x7a5cc3,_0x2b378c={'CRVXr':function(_0x53bca6,_0x12ce19){return _0x53bca6===_0x12ce19;},'EURXj':_0x551c59[_0x509b16(0x322)],'BqkcD':_0x509b16(0x2a1)},_0x4a0f06=crypto[_0x509b16(0x3b6)](0x10)[_0x509b16(0x354)](_0x551c59['rSbQv']),_0x527e74=process[_0x509b16(0x1b6)]==='win32'?_0x509b16(0x17a)+_0x4a0f06:path[_0x509b16(0x283)](os['tmpdir'](),_0x509b16(0x26c)+_0x4a0f06+'.sock'),_0x155665=http[_0x509b16(0x29e)]();_0x155665[_0x509b16(0x1ab)](_0x527e74,()=>{const _0x2f4ced=_0x509b16,_0x1f181a=new WebSocket[(_0x2f4ced(0x383))]({'server':_0x155665});_0x1f181a['on'](_0x2b378c['EURXj'],(_0x440849,_0x503f50)=>{const _0x31bee7=_0x2f4ced;if(_0x2b378c[_0x31bee7(0x1f6)](_0x1f181a['clients']['size'],0x1))assert[_0x31bee7(0x236)](_0x503f50[_0x31bee7(0x1ea)],_0x31bee7(0x370));else{assert['strictEqual'](_0x503f50[_0x31bee7(0x1ea)],'/');for(const _0x3f5e00 of _0x1f181a[_0x31bee7(0x327)]){_0x3f5e00['close']();}_0x155665['close'](_0x55bf0e);}});const _0x24b60a=new WebSocket('ws+unix:'+_0x527e74+_0x2f4ced(0x345));_0x24b60a['on'](_0x2b378c[_0x2f4ced(0x20c)],()=>new WebSocket(_0x2f4ced(0x18b)+_0x527e74));});});}),_0x551c59[_0x38f478(0x24b)](describe,_0x38f478(0x1f3),()=>{const _0x4c98f9=_0x38f478,_0x277b32={'TPXLK':_0x551c59[_0x4c98f9(0x27e)]};it(_0x551c59[_0x4c98f9(0x357)],_0x1b68e1=>{const _0x2f8c4b=_0x4c98f9,_0x1c43ee=new WebSocket[(_0x2f8c4b(0x383))]({'port':0x0},()=>{const _0x1d00bf=_0x2f8c4b,_0x44a917=_0x1c43ee[_0x1d00bf(0x216)]();assert['deepStrictEqual'](_0x44a917,_0x1c43ee[_0x1d00bf(0x31e)]['address']()),_0x1c43ee[_0x1d00bf(0x19a)](_0x1b68e1);});}),it(_0x4c98f9(0x2fa),()=>{const _0x1a271a=_0x4c98f9,_0x5d0658=new WebSocket[(_0x1a271a(0x383))]({'noServer':!![]});assert[_0x1a271a(0x185)](()=>{const _0x1c0fdc=_0x1a271a;if(_0x1c0fdc(0x1b7)!==_0x277b32[_0x1c0fdc(0x378)]){const _0x43e181={'OEtdP':function(_0x464e18,_0x38038c){return _0x464e18+_0x38038c;},'nLVTJ':_0x1c0fdc(0x2b9)};_0x1441e9['handleUpgrade'](_0x45d6de,_0x19245b,_0x20c841,_0x38800b=>{_0x38800b['close']();}),_0x9a052a['throws'](()=>_0x1e03a7['handleUpgrade'](_0x1907d3,_0x535099,_0x2f4542,_0x4a4645),_0x1513d2=>{const _0x12544e=_0x1c0fdc;return _0x1bd742['ok'](_0x1513d2 instanceof _0x420c83),_0x3093f7[_0x12544e(0x236)](_0x1513d2[_0x12544e(0x27d)],_0x43e181['OEtdP'](_0x12544e(0x257),_0x43e181[_0x12544e(0x1cf)])),!![];});}else _0x5d0658[_0x1c0fdc(0x216)]();},/^Error: The server is operating in "noServer" mode$/);}),it(_0x4c98f9(0x37d),_0x3cb752=>{const _0x3499c8=_0x4c98f9,_0x5bd947=new WebSocket[(_0x3499c8(0x383))]({'port':0x0},()=>{const _0x420707=_0x3499c8;_0x5bd947[_0x420707(0x19a)](()=>{const _0x290339=_0x420707;assert[_0x290339(0x236)](_0x5bd947[_0x290339(0x216)](),null),_0x3cb752();});});});}),_0x551c59[_0x38f478(0x298)](describe,_0x38f478(0x39f),()=>{const _0x278ab8=_0x38f478,_0x2a0bcc={'wzxwz':_0x551c59[_0x278ab8(0x2af)],'LQBbd':function(_0x4e8ec4,_0x56dce2){const _0x453ae1=_0x278ab8;return _0x551c59[_0x453ae1(0x23d)](_0x4e8ec4,_0x56dce2);},'ObAqw':_0x278ab8(0x2d2),'iJtlC':function(_0x2baaf1,_0x5ec6cf){return _0x551c59['PdDyJ'](_0x2baaf1,_0x5ec6cf);},'TPdCL':'Must\x20not\x20close\x20pre-created\x20server','kYKbM':_0x551c59['uWKZj'],'nthJF':_0x278ab8(0x2a1),'Wsrqc':_0x551c59[_0x278ab8(0x2d6)],'ZcGbB':function(_0x337030,_0x3644c0){const _0x2cc4ee=_0x278ab8;return _0x551c59[_0x2cc4ee(0x350)](_0x337030,_0x3644c0);},'ISrNk':_0x278ab8(0x1d6),'QOqTu':_0x551c59['WBhql']};_0x551c59[_0x278ab8(0x2e7)](it,_0x551c59[_0x278ab8(0x2f1)],_0x16c75d=>{const _0x3eaf9b=_0x278ab8;if(_0x2a0bcc[_0x3eaf9b(0x193)]('cyJIm',_0x2a0bcc[_0x3eaf9b(0x207)])){const _0x416884=new _0x3b8829(_0x3eaf9b(0x397)+_0x42c0ac[_0x3eaf9b(0x216)]()[_0x3eaf9b(0x28e)]+_0x3eaf9b(0x39b));_0x416884['on'](_0x3eaf9b(0x2a1),_0x416884[_0x3eaf9b(0x19a)]);}else{const _0x16230c=new WebSocket[(_0x3eaf9b(0x383))]({'port':0x0},()=>{const _0x2a0681=_0x3eaf9b;_0x16230c['on'](_0x2a0bcc[_0x2a0681(0x351)],_0x16c75d),_0x16230c[_0x2a0681(0x19a)](),_0x16230c['close'](),_0x16230c[_0x2a0681(0x19a)]();});}}),_0x551c59[_0x278ab8(0x317)](it,_0x278ab8(0x379),_0x1bef53=>{const _0x4a72ef=_0x278ab8,_0x20d334=http[_0x4a72ef(0x29e)](),_0x467970=_0x20d334[_0x4a72ef(0x19a)];_0x20d334[_0x4a72ef(0x19a)]=()=>{const _0x391f82=_0x4a72ef;_0x2a0bcc[_0x391f82(0x1a5)](_0x1bef53,new Error(_0x2a0bcc[_0x391f82(0x198)]));};const _0x3e81c4=new WebSocket[(_0x4a72ef(0x383))]({'server':_0x20d334});_0x3e81c4['on'](_0x2a0bcc[_0x4a72ef(0x39d)],()=>{const _0x584ac0=_0x4a72ef;_0x3e81c4[_0x584ac0(0x19a)](),_0x20d334[_0x584ac0(0x19a)]=_0x467970,_0x20d334[_0x584ac0(0x19a)](_0x1bef53);}),_0x20d334[_0x4a72ef(0x1ab)](0x0,()=>{const _0x1cc888=_0x4a72ef,_0x596cf2=new WebSocket(_0x1cc888(0x397)+_0x20d334['address']()[_0x1cc888(0x28e)]);_0x596cf2['on'](_0x1cc888(0x2a1),_0x596cf2[_0x1cc888(0x19a)]);});}),it(_0x551c59[_0x278ab8(0x250)],_0x4f0ba4=>{const _0x17c094=_0x278ab8,_0x28d236=new WebSocket[(_0x17c094(0x383))]({'noServer':!![]});_0x28d236[_0x17c094(0x19a)](_0x4f0ba4);}),_0x551c59['NHQFZ'](it,_0x278ab8(0x1f1),_0x42bed3=>{const _0x448d95=_0x278ab8,_0x18ed15={'OUxKG':function(_0x4569e2,_0xb1d71e){return _0x4569e2===_0xb1d71e;},'MkivF':_0x551c59[_0x448d95(0x295)]},_0x3a4299=http[_0x448d95(0x29e)](),_0x4098e4=_0x3a4299['listenerCount'](_0x448d95(0x277)),_0x16fad9=new WebSocket['Server']({'server':_0x3a4299});_0x3a4299[_0x448d95(0x1ab)](0x0,()=>{const _0x540f46=_0x448d95,_0x115a5c={'tJObz':_0x540f46(0x2a1),'coSrZ':function(_0x130e50,_0x275ed2){return _0x18ed15['OUxKG'](_0x130e50,_0x275ed2);},'QWnjf':_0x18ed15[_0x540f46(0x312)],'JtXZV':_0x540f46(0x200)};_0x16fad9[_0x540f46(0x19a)](()=>{const _0x17e173=_0x540f46;if(_0x115a5c[_0x17e173(0x2cd)](_0x115a5c['QWnjf'],_0x17e173(0x2bf))){const _0x127b10=new _0x30538c(_0x17e173(0x397)+_0x13b70c[_0x17e173(0x216)]()[_0x17e173(0x28e)]);_0x127b10['on'](_0x115a5c['tJObz'],_0x127b10[_0x17e173(0x19a)]);}else assert[_0x17e173(0x236)](_0x3a4299[_0x17e173(0x1a4)](_0x17e173(0x277)),_0x4098e4),assert[_0x17e173(0x236)](_0x3a4299[_0x17e173(0x1a4)]('upgrade'),0x0),assert[_0x17e173(0x236)](_0x3a4299['listenerCount'](_0x115a5c[_0x17e173(0x27a)]),0x0),_0x3a4299[_0x17e173(0x19a)](_0x42bed3);});});}),it(_0x551c59[_0x278ab8(0x2e4)],_0xc550f4=>{const _0x4b0613=_0x278ab8;if(_0x551c59[_0x4b0613(0x23d)](_0x551c59[_0x4b0613(0x29d)],_0x551c59[_0x4b0613(0x29d)])){let _0x141c90=![];const _0x31e55b=new WebSocket['Server']({'port':0x0},()=>{const _0x4ceb53=_0x4b0613;net[_0x4ceb53(0x17f)]({'port':_0x31e55b[_0x4ceb53(0x216)]()[_0x4ceb53(0x28e)]});});_0x31e55b[_0x4b0613(0x31e)]['on'](_0x551c59[_0x4b0613(0x322)],_0x52bbd9=>{const _0x194f91=_0x4b0613,_0xa7a9b8={'DfSLt':_0x2a0bcc[_0x194f91(0x247)]};if(_0x194f91(0x259)===_0x194f91(0x259))_0x31e55b[_0x194f91(0x19a)](),_0x31e55b[_0x194f91(0x19a)](),process[_0x194f91(0x1e0)](()=>{const _0x3b8756=_0x194f91;_0x52bbd9[_0x3b8756(0x25e)]();});else{const _0x4104fb=0x5000,_0x303835=new _0x13121f['Server']({'perMessageDeflate':!![],'maxPayload':_0x4104fb,'port':0x0},()=>{const _0xdb4f06=_0x194f91,_0x1909a7=new _0x112606(_0xdb4f06(0x397)+_0x303835[_0xdb4f06(0x216)]()[_0xdb4f06(0x28e)]);_0x1909a7['on'](_0xa7a9b8['DfSLt'],_0x1909a7[_0xdb4f06(0x19a)]);});_0x303835['on'](_0x194f91(0x228),_0x8a05e4=>{const _0x39632c=_0x194f91;_0x3cc7fe[_0x39632c(0x236)](_0x8a05e4[_0x39632c(0x2c3)][_0x39632c(0x2c4)],_0x4104fb),_0xe9e245[_0x39632c(0x236)](_0x8a05e4[_0x39632c(0x2c3)]['_extensions'][_0x39632c(0x196)][_0x39632c(0x2c4)],_0x4104fb),_0x303835[_0x39632c(0x19a)](_0x36e526);});}}),_0x31e55b['_server']['on'](_0x551c59['wPzaA'],()=>{const _0x422392=_0x4b0613,_0x47c607={'FYwIN':function(_0x18411f,_0x27ffbb){const _0x423cf2=_0x18cc;return _0x2a0bcc[_0x423cf2(0x1a5)](_0x18411f,_0x27ffbb);},'yroYL':_0x422392(0x306)};_0x422392(0x181)==='RAZjT'?_0x141c90=!![]:_0x47c607['FYwIN'](_0xc84471,new _0x2b2c31(_0x47c607[_0x422392(0x2a6)]));}),_0x31e55b['on'](_0x551c59['wPzaA'],()=>{const _0x18685d=_0x4b0613,_0xd5a536={'xxIGW':_0x2a0bcc[_0x18685d(0x218)]};_0x2a0bcc[_0x18685d(0x234)](_0x18685d(0x1e7),_0x18685d(0x33b))?(assert['ok'](_0x141c90),_0xc550f4()):_0x333d1a(new _0x13b68c(_0xd5a536['xxIGW']));});}else{const _0x4a6eca=new _0x2bbd23['Server']({'port':0x0},()=>{const _0x5454a0=_0x4b0613,_0x52e8ff=new _0x2aab25(_0x5454a0(0x397)+_0x4a6eca[_0x5454a0(0x216)]()[_0x5454a0(0x28e)]);_0x52e8ff['on'](_0x5454a0(0x2a1),()=>_0x52e8ff[_0x5454a0(0x19a)]());});_0x4a6eca['on'](_0x4b0613(0x228),_0x48b8da=>{_0x48b8da['on']('close',()=>{const _0x392561=_0x18cc;_0x2fa62f[_0x392561(0x236)](_0x4a6eca[_0x392561(0x327)][_0x392561(0x2c9)],0x0),_0x4a6eca[_0x392561(0x19a)](_0x14d93c);});});}}),it(_0x551c59[_0x278ab8(0x367)],_0x540528=>{const _0x1d3d52=_0x278ab8,_0x45e3fe=new WebSocket[(_0x1d3d52(0x383))]({'noServer':!![],'clientTracking':![]});_0x45e3fe['on']('close',_0x540528),_0x45e3fe[_0x1d3d52(0x19a)]();}),_0x551c59[_0x278ab8(0x399)](it,_0x551c59[_0x278ab8(0x1fb)],_0x2382f6=>{const _0x221b13=_0x278ab8,_0x792f72={'FxCUm':_0x221b13(0x2a1),'EDuTU':_0x551c59['zSPnL'],'PRTvb':_0x551c59[_0x221b13(0x1c7)]};if(_0x551c59[_0x221b13(0x38c)]===_0x221b13(0x35e)){const _0x346c88=new WebSocket[(_0x221b13(0x383))]({'port':0x0},()=>{const _0xe78741={'QTSaF':'The\x20server\x20is\x20not\x20running'};_0x346c88['close'](()=>{const _0x568718=_0x18cc;assert[_0x568718(0x236)](_0x346c88[_0x568718(0x21a)],0x2),_0x346c88[_0x568718(0x19a)](_0x3e8975=>{const _0x495aec=_0x568718;assert['ok'](_0x3e8975 instanceof Error),assert[_0x495aec(0x236)](_0x3e8975[_0x495aec(0x27d)],_0xe78741[_0x495aec(0x1d4)]),_0x2382f6();});});});}else{const _0x3c005b={'WYjQD':_0x792f72[_0x221b13(0x1e6)],'NqMAb':_0x792f72[_0x221b13(0x38d)],'yLzAh':'Connection:\x20Upgrade','scemn':'/?foo=bar'},_0x160560=new _0x154109[(_0x221b13(0x383))]({'port':0x0},()=>{const _0x13fe1a=_0x221b13,_0x36c12b=new _0x1892a7(_0x13fe1a(0x397)+_0x160560['address']()[_0x13fe1a(0x28e)]+_0x13fe1a(0x39b));_0x36c12b['on'](_0x792f72[_0x13fe1a(0x3a5)],_0x36c12b[_0x13fe1a(0x19a)]);});_0x160560['on'](_0x221b13(0x27b),(_0x17fc7a,_0x423b5b)=>{const _0x44c39e=_0x221b13;_0x34b64a[_0x44c39e(0x20e)](_0x17fc7a[_0x44c39e(0x23e)](0x0,0x3),[_0x3c005b['WYjQD'],_0x3c005b['NqMAb'],_0x3c005b[_0x44c39e(0x371)]]),_0xb45438['ok'](_0x423b5b instanceof _0x36287c[_0x44c39e(0x284)]),_0x25c890['strictEqual'](_0x423b5b[_0x44c39e(0x1ea)],_0x3c005b['scemn']),_0x160560['on'](_0x44c39e(0x228),()=>_0x160560[_0x44c39e(0x19a)](_0x38475b));});}}),it(_0x278ab8(0x1b2),_0x7d259d=>{const _0x2e99ca=_0x278ab8;if(_0x2a0bcc['LQBbd'](_0x2a0bcc[_0x2e99ca(0x31c)],_0x2a0bcc['QOqTu'])){const _0x23775c=new _0x480365(_0x2e99ca(0x397)+_0x13cb21[_0x2e99ca(0x216)]()[_0x2e99ca(0x28e)]);_0x23775c['on']('open',()=>_0x23775c[_0x2e99ca(0x38b)]());}else{const _0xfa971d=new WebSocket[(_0x2e99ca(0x383))]({'port':0x0},()=>{const _0xe0008=_0x2e99ca,_0x3ca258={'xuZBh':_0x2a0bcc['wzxwz']};if(_0x2a0bcc['LQBbd'](_0xe0008(0x2c2),_0xe0008(0x336))){_0x110543[_0xe0008(0x236)](_0x2cf0cb['statusCode'],0x190);const _0x4975bb=[];_0x3c0944['on'](_0xe0008(0x280),_0x3672ec=>{const _0x4cb6d9=_0xe0008;_0x4975bb[_0x4cb6d9(0x227)](_0x3672ec);}),_0x19f22a['on'](_0xe0008(0x25e),()=>{const _0x30d4b7=_0xe0008;_0x11fdad['strictEqual'](_0x205073[_0x30d4b7(0x2d1)](_0x4975bb)[_0x30d4b7(0x354)](),'Invalid\x20Upgrade\x20header'),_0x140124[_0x30d4b7(0x19a)](_0x11bb2e);});}else _0xfa971d['close'](()=>{const _0x4ce656=_0xe0008;_0x4ce656(0x373)==='NtNzF'?(assert['strictEqual'](_0xfa971d['_state'],0x2),_0xfa971d['on'](_0x3ca258[_0x4ce656(0x195)],_0x7d259d),_0xfa971d['close']()):(_0x2b8440[_0x4ce656(0x236)](_0x1edef0[_0x4ce656(0x31e)]['address']()[_0x4ce656(0x216)],'::'),_0x49ba1c[_0x4ce656(0x19a)](_0x2c0668));});});}});}),describe(_0x38f478(0x1f4),()=>{const _0x44d838=_0x38f478,_0x31b50d={'hxvqg':_0x44d838(0x2a1)};it(_0x551c59[_0x44d838(0x2eb)],_0x496579=>{const _0x5d8ab0=_0x44d838,_0x19964e={'Mfouo':_0x551c59[_0x5d8ab0(0x279)]},_0x5d74e6=new WebSocket['Server']({'port':0x0},()=>{const _0x4a8c6e=_0x5d8ab0;assert['strictEqual'](_0x5d74e6[_0x4a8c6e(0x327)][_0x4a8c6e(0x2c9)],0x0);const _0x45499a=new WebSocket(_0x4a8c6e(0x397)+_0x5d74e6['address']()[_0x4a8c6e(0x28e)]);_0x45499a['on'](_0x4a8c6e(0x2a1),_0x45499a[_0x4a8c6e(0x19a)]);});_0x5d74e6['on'](_0x551c59[_0x5d8ab0(0x322)],()=>{const _0x1e627d=_0x5d8ab0;_0x1e627d(0x32a)===_0x19964e[_0x1e627d(0x32f)]?_0x179fd9[_0x1e627d(0x227)](_0x1475ca):(assert[_0x1e627d(0x236)](_0x5d74e6[_0x1e627d(0x327)][_0x1e627d(0x2c9)],0x1),_0x5d74e6[_0x1e627d(0x19a)](_0x496579));});}),it(_0x551c59[_0x44d838(0x231)],_0xc36943=>{const _0x625b28=_0x44d838,_0xa9490e={'Bmshw':function(_0x135920,_0x1f48c8){const _0x55af9a=_0x18cc;return _0x551c59[_0x55af9a(0x249)](_0x135920,_0x1f48c8);}},_0x34a69d=new WebSocket['Server']({'port':0x0,'clientTracking':![]},()=>{const _0x1eb606=_0x18cc;assert[_0x1eb606(0x236)](_0x34a69d[_0x1eb606(0x327)],undefined);const _0x4e5cd2=new WebSocket(_0x1eb606(0x397)+_0x34a69d[_0x1eb606(0x216)]()['port']);_0x4e5cd2['on'](_0x31b50d['hxvqg'],()=>_0x4e5cd2[_0x1eb606(0x19a)]());});_0x34a69d['on'](_0x625b28(0x228),_0x97ad3e=>{const _0x85c747=_0x625b28;if(_0xa9490e['Bmshw'](_0x85c747(0x229),_0x85c747(0x229))){const _0x4629cf=_0x49b2a9[_0x85c747(0x20f)]({'port':_0x7f51f[_0x85c747(0x216)]()[_0x85c747(0x28e)],'headers':{'Connection':_0x85c747(0x26a),'Upgrade':_0x85c747(0x2d3),'Sec-WebSocket-Key':'dGhlIHNhbXBsZSBub25jZQ==','Sec-WebSocket-Version':0xd}}),_0x4b4868=_0x202558['frame'](_0x395640['from'](_0x85c747(0x376)),{'fin':!![],'rsv1':![],'opcode':0x1,'mask':!![],'readOnly':![]});_0x4629cf[_0x85c747(0x21c)](_0x1946e7[_0x85c747(0x2d1)](_0x4b4868)),_0x4629cf['end']();}else assert[_0x85c747(0x236)](_0x34a69d[_0x85c747(0x327)],undefined),_0x97ad3e['on'](_0x85c747(0x19a),()=>_0x34a69d[_0x85c747(0x19a)](_0xc36943));});}),it('is\x20updated\x20when\x20client\x20terminates\x20the\x20connection',_0x4d3ebb=>{const _0x5023fc=_0x44d838,_0x22179f=new WebSocket[(_0x5023fc(0x383))]({'port':0x0},()=>{const _0x5a776e=_0x5023fc,_0xab2883=new WebSocket(_0x5a776e(0x397)+_0x22179f[_0x5a776e(0x216)]()[_0x5a776e(0x28e)]);_0xab2883['on'](_0x31b50d['hxvqg'],()=>_0xab2883['terminate']());});_0x22179f['on'](_0x5023fc(0x228),_0x340d38=>{const _0x5d7a22=_0x5023fc;_0x5d7a22(0x386)===_0x5d7a22(0x178)?_0x25f340[_0x5d7a22(0x19a)](_0x5c739d):_0x340d38['on'](_0x5d7a22(0x19a),()=>{const _0xa64220=_0x5d7a22;assert[_0xa64220(0x236)](_0x22179f[_0xa64220(0x327)][_0xa64220(0x2c9)],0x0),_0x22179f[_0xa64220(0x19a)](_0x4d3ebb);});});}),_0x551c59[_0x44d838(0x317)](it,_0x44d838(0x2ad),_0x2c2a5b=>{const _0xf8fc09=_0x44d838,_0x3af1b0={'VnYQQ':_0xf8fc09(0x2a1)},_0x586ca2=new WebSocket['Server']({'port':0x0},()=>{const _0xa41192=_0xf8fc09,_0x22587a=new WebSocket(_0xa41192(0x397)+_0x586ca2[_0xa41192(0x216)]()[_0xa41192(0x28e)]);_0x22587a['on'](_0x3af1b0['VnYQQ'],()=>_0x22587a['close']());});_0x586ca2['on'](_0x551c59[_0xf8fc09(0x322)],_0x9ce8fc=>{const _0x130bb0=_0xf8fc09;_0x9ce8fc['on'](_0x130bb0(0x19a),()=>{const _0x1ad4a2=_0x130bb0;assert[_0x1ad4a2(0x236)](_0x586ca2[_0x1ad4a2(0x327)][_0x1ad4a2(0x2c9)],0x0),_0x586ca2['close'](_0x2c2a5b);});});});}),describe(_0x551c59['MNdfk'],()=>{const _0x1f7870=_0x38f478,_0x41661a={'jQNzJ':'/foo','Asfhl':_0x551c59[_0x1f7870(0x1e9)]};_0x551c59[_0x1f7870(0x2e5)](it,_0x551c59['zqIDu'],()=>{const _0x495369=_0x1f7870,_0x26fce4=new WebSocket[(_0x495369(0x383))]({'noServer':!![],'path':_0x495369(0x398)});assert[_0x495369(0x236)](_0x26fce4[_0x495369(0x2e6)]({'url':_0x41661a[_0x495369(0x31f)]}),!![]),assert[_0x495369(0x236)](_0x26fce4[_0x495369(0x2e6)]({'url':_0x41661a[_0x495369(0x1fc)]}),!![]);}),it('returns\x20false\x20when\x20the\x20path\x20doesn\x27t\x20match',()=>{const _0xf54910=_0x1f7870,_0x3d8748=new WebSocket[(_0xf54910(0x383))]({'noServer':!![],'path':_0xf54910(0x398)});assert[_0xf54910(0x236)](_0x3d8748['shouldHandle']({'url':_0x551c59[_0xf54910(0x21f)]}),![]);});}),_0x551c59['jkvvu'](describe,_0x38f478(0x182),()=>{const _0x12c748=_0x38f478,_0x53c34c={'aZVJU':_0x12c748(0x258),'TInON':_0x551c59[_0x12c748(0x2bc)],'vkdHM':_0x12c748(0x3ab),'TTqmE':_0x551c59[_0x12c748(0x23c)],'eUOcu':function(_0x53518b,_0x11930a){return _0x53518b===_0x11930a;},'ZkYwe':function(_0x50cd8e,_0x5a362f){return _0x50cd8e!==_0x5a362f;},'AbMzZ':_0x551c59[_0x12c748(0x299)],'WDsSf':_0x551c59['oxuec'],'iLvqG':_0x551c59['jDfda'],'iOcdl':_0x551c59[_0x12c748(0x1c2)]};it(_0x551c59[_0x12c748(0x2e0)],_0x3880ed=>{const _0xeb855b=_0x12c748,_0x36eb5d={'AkCow':_0x53c34c[_0xeb855b(0x358)],'vYVog':_0xeb855b(0x27d),'PMnvs':_0xeb855b(0x25e),'Pjzah':_0x53c34c[_0xeb855b(0x377)],'YQLuC':_0xeb855b(0x264),'AuKIR':_0x53c34c['vkdHM'],'wMgvS':_0x53c34c[_0xeb855b(0x1da)],'ppdXe':_0xeb855b(0x186)};if(_0x53c34c[_0xeb855b(0x1ca)]('mVvjB',_0xeb855b(0x260))){const _0x252d37=http[_0xeb855b(0x29e)]();_0x252d37[_0xeb855b(0x1ab)](0x0,()=>{const _0x1c262c=_0xeb855b,_0xd1ccbf={'IgJRN':'hello'};if(_0x1c262c(0x25f)===_0x36eb5d[_0x1c262c(0x31a)])_0x10ff08['close'](_0x14a630);else{const _0x540dd2=new WebSocket[(_0x1c262c(0x383))]({'noServer':!![]});_0x252d37['on'](_0x1c262c(0x355),(_0x7f867b,_0x7f0607,_0x1edb6a)=>{_0x540dd2['handleUpgrade'](_0x7f867b,_0x7f0607,_0x1edb6a,_0x2b3d9a=>{const _0x2a7fbf=_0x18cc;_0x2b3d9a[_0x2a7fbf(0x3b3)](_0x2a7fbf(0x276)),_0x2b3d9a[_0x2a7fbf(0x19a)]();});});const _0x59eed2=new WebSocket(_0x1c262c(0x397)+_0x252d37[_0x1c262c(0x216)]()[_0x1c262c(0x28e)]);_0x59eed2['on'](_0x36eb5d['vYVog'],(_0x57e0bc,_0x24ba05)=>{const _0x4a247e=_0x1c262c;assert[_0x4a247e(0x20e)](_0x57e0bc,Buffer[_0x4a247e(0x2a5)](_0xd1ccbf[_0x4a247e(0x2bd)])),assert['ok'](!_0x24ba05),_0x252d37[_0x4a247e(0x19a)](_0x3880ed);});}});}else{const _0x27af1e=_0x7a3038[_0xeb855b(0x256)]({'port':_0x3a7d15[_0xeb855b(0x216)]()[_0xeb855b(0x28e)],'headers':{'Connection':_0x36eb5d[_0xeb855b(0x391)],'Upgrade':_0x36eb5d[_0xeb855b(0x184)],'Sec-WebSocket-Key1':_0x36eb5d[_0xeb855b(0x2d8)],'Sec-WebSocket-Key2':_0xeb855b(0x21d),'Sec-WebSocket-Protocol':_0x36eb5d[_0xeb855b(0x3a2)]}});_0x27af1e['on'](_0x36eb5d[_0xeb855b(0x1b4)],_0x4fa711=>{const _0x26027d=_0xeb855b;_0x1dc507[_0x26027d(0x236)](_0x4fa711[_0x26027d(0x2d5)],0x190);const _0x48867e=[];_0x4fa711['on']('data',_0x100fbe=>{_0x48867e['push'](_0x100fbe);}),_0x4fa711['on'](_0x36eb5d[_0x26027d(0x242)],()=>{const _0x4eea9f=_0x26027d;_0x3387ea['strictEqual'](_0x187b93[_0x4eea9f(0x2d1)](_0x48867e)[_0x4eea9f(0x354)](),_0x4eea9f(0x334)),_0x106109[_0x4eea9f(0x19a)](_0x4a1f7a);});});}}),it(_0x551c59['wyceO'],_0x5e6d6b=>{const _0x528319=_0x12c748,_0x694ef5={'aEnxh':_0x551c59[_0x528319(0x1bd)],'AcFpW':_0x528319(0x186)},_0x293bbf=new WebSocket[(_0x528319(0x383))]({'port':0x0,'path':_0x528319(0x1be)},()=>{const _0x5a25b0=_0x528319,_0x173e03=http[_0x5a25b0(0x256)]({'port':_0x293bbf['address']()[_0x5a25b0(0x28e)],'headers':{'Connection':'Upgrade','Upgrade':_0x5a25b0(0x2d3),'Sec-WebSocket-Key':_0x694ef5[_0x5a25b0(0x388)],'Sec-WebSocket-Version':0xd}});_0x173e03['on'](_0x694ef5[_0x5a25b0(0x314)],_0x2ccbe9=>{const _0x12a8c8=_0x5a25b0;assert[_0x12a8c8(0x236)](_0x2ccbe9[_0x12a8c8(0x2d5)],0x190),_0x293bbf[_0x12a8c8(0x19a)](_0x5e6d6b);});});}),_0x551c59[_0x12c748(0x399)](it,'closes\x20the\x20connection\x20when\x20protocol\x20version\x20is\x20Hixie-76',_0x1618d4=>{const _0x208988=_0x12c748,_0x364496={'tAEsC':function(_0x2bfaac,_0x373197){return _0x2bfaac===_0x373197;},'UVPxE':'end','LwMXU':function(_0x1ce377,_0x5aa60b){return _0x1ce377!==_0x5aa60b;},'oKQDR':_0x551c59[_0x208988(0x394)],'TFYgl':'WebSocket','sDzUs':_0x208988(0x21d)},_0x2c5275=new WebSocket[(_0x208988(0x383))]({'port':0x0},()=>{const _0x23cd11=_0x208988,_0x36d7e3={'UVWqY':_0x23cd11(0x334)};if(_0x364496['LwMXU'](_0x364496[_0x23cd11(0x2e2)],_0x23cd11(0x2a2))){const _0xf0a34f=http[_0x23cd11(0x256)]({'port':_0x2c5275[_0x23cd11(0x216)]()[_0x23cd11(0x28e)],'headers':{'Connection':_0x23cd11(0x26a),'Upgrade':_0x364496[_0x23cd11(0x1d0)],'Sec-WebSocket-Key1':'4\x20@1\x20\x2046546xW%0l\x201\x205','Sec-WebSocket-Key2':_0x364496[_0x23cd11(0x366)],'Sec-WebSocket-Protocol':_0x23cd11(0x1b8)}});_0xf0a34f['on'](_0x23cd11(0x186),_0x5d836e=>{const _0x56a3be=_0x23cd11,_0x21134e={'eYbZu':function(_0x4fccbf,_0x5ae035){const _0x4c8544=_0x18cc;return _0x364496[_0x4c8544(0x191)](_0x4fccbf,_0x5ae035);}};assert[_0x56a3be(0x236)](_0x5d836e['statusCode'],0x190);const _0x5af05b=[];_0x5d836e['on'](_0x56a3be(0x280),_0x37a420=>{const _0x30e775=_0x56a3be;_0x21134e[_0x30e775(0x18e)](_0x30e775(0x2aa),_0x30e775(0x2aa))?_0x5af05b[_0x30e775(0x227)](_0x37a420):_0x53299b['close'](()=>{const _0x1b13d2=_0x30e775;_0x44a8d3[_0x1b13d2(0x236)](_0x41e01f[_0x1b13d2(0x216)](),null),_0x105fba();});}),_0x5d836e['on'](_0x364496['UVPxE'],()=>{const _0x4a1f10=_0x56a3be;assert[_0x4a1f10(0x236)](Buffer[_0x4a1f10(0x2d1)](_0x5af05b)['toString'](),_0x36d7e3[_0x4a1f10(0x255)]),_0x2c5275['close'](_0x1618d4);});});}else _0x5bd149(new _0x34a722(_0x23cd11(0x2b2)));});}),_0x551c59[_0x12c748(0x17c)](it,_0x12c748(0x2e8),_0x20b321=>{const _0x244c26=_0x12c748,_0x4240a6={'zmYPD':_0x53c34c[_0x244c26(0x25d)],'hpybH':_0x53c34c[_0x244c26(0x319)]},_0x17b4b8=http[_0x244c26(0x29e)]();_0x17b4b8[_0x244c26(0x1ab)](0x0,()=>{const _0x1d8e4e=_0x244c26,_0x5b8e53={'jTciO':'connection','NvozS':function(_0x20a0e8,_0x4814f7){const _0x277df8=_0x18cc;return _0x53c34c[_0x277df8(0x375)](_0x20a0e8,_0x4814f7);},'Koqcu':_0x53c34c[_0x1d8e4e(0x33a)],'UUtza':_0x53c34c[_0x1d8e4e(0x35c)]},_0x57c515=new WebSocket[(_0x1d8e4e(0x383))]({'noServer':!![]});_0x17b4b8['on'](_0x1d8e4e(0x355),(_0x463241,_0x3dfa36,_0x2827ec)=>{const _0x133363=_0x1d8e4e,{clientSide:_0x2bd8eb,serverSide:_0xe4185f}=makeDuplexPair();_0x3dfa36['pipe'](_0x2bd8eb),_0x2bd8eb[_0x133363(0x34c)](_0x3dfa36),_0x57c515[_0x133363(0x270)](_0x463241,_0xe4185f,_0x2827ec,_0x1ec392=>{const _0xc1d2f=_0x133363,_0x27caed={'agqtE':_0xc1d2f(0x37a),'SGGGd':_0x5b8e53[_0xc1d2f(0x3a1)]};_0x5b8e53[_0xc1d2f(0x20d)](_0x5b8e53[_0xc1d2f(0x31b)],_0x5b8e53[_0xc1d2f(0x315)])?(_0x1ec392[_0xc1d2f(0x3b3)]('hello'),_0x1ec392[_0xc1d2f(0x19a)]()):(_0x3038d3[_0xc1d2f(0x20e)](_0x510e47['slice'](0x0,0x3),[_0xc1d2f(0x30f),_0xc1d2f(0x221),_0x27caed[_0xc1d2f(0x248)]]),_0x51bc3c['ok'](_0x216078 instanceof _0x1c3bdb[_0xc1d2f(0x284)]),_0x52201d['strictEqual'](_0x806a6f['url'],_0xc1d2f(0x1ce)),_0x1a308a['on'](_0x27caed[_0xc1d2f(0x30d)],()=>_0x5ed996[_0xc1d2f(0x19a)](_0x6f6595)));});});const _0x59c183=new WebSocket(_0x1d8e4e(0x397)+_0x17b4b8[_0x1d8e4e(0x216)]()[_0x1d8e4e(0x28e)]);_0x59c183['on'](_0x1d8e4e(0x27d),(_0x512c54,_0xdbb7fe)=>{const _0x3f6250=_0x1d8e4e,_0x26b364={'FZtev':_0x3f6250(0x2a1)};if(_0x4240a6[_0x3f6250(0x1ba)]===_0x3f6250(0x38f)){const _0x301e24={'MbBBi':'sec-websocket-extensions'},_0x341e95=new _0x498772[(_0x3f6250(0x383))]({'port':0x0},()=>{const _0x2e90da=_0x3f6250,_0x23061d=new _0x165d8d('ws://localhost:'+_0x341e95[_0x2e90da(0x216)]()[_0x2e90da(0x28e)]);_0x23061d['on'](_0x26b364[_0x2e90da(0x189)],_0x23061d['close']);});_0x341e95['on'](_0x3f6250(0x228),(_0xe2689,_0x3b32b3)=>{const _0x557b52=_0x3f6250;_0x5873f5[_0x557b52(0x236)](_0x3b32b3[_0x557b52(0x27b)][_0x301e24[_0x557b52(0x1d1)]],_0x557b52(0x361)),_0x2e305c[_0x557b52(0x236)](_0xe2689[_0x557b52(0x3a6)],''),_0x341e95[_0x557b52(0x19a)](_0x7865e5);});}else assert[_0x3f6250(0x20e)](_0x512c54,Buffer['from'](_0x4240a6[_0x3f6250(0x22b)])),assert['ok'](!_0xdbb7fe),_0x17b4b8[_0x3f6250(0x19a)](_0x20b321);});});});}),describe(_0x551c59[_0x38f478(0x1f0)],()=>{const _0x28841f=_0x38f478,_0x11f4e7={'isgkv':function(_0x3d5357,_0x25701a){return _0x3d5357===_0x25701a;},'FYLAR':function(_0x166a61,_0x57da63){const _0x42f911=_0x18cc;return _0x551c59[_0x42f911(0x2a9)](_0x166a61,_0x57da63);},'QVQTH':function(_0x46b627,_0x330ae6){return _0x46b627+_0x330ae6;},'rTReE':_0x28841f(0x2b9),'GBIXv':function(_0x485a48,_0x5ac15d){return _0x485a48!==_0x5ac15d;},'hzgcZ':_0x28841f(0x2df),'hNmll':_0x28841f(0x355)};_0x551c59[_0x28841f(0x34e)](it,_0x551c59[_0x28841f(0x214)],_0x2c174b=>{const _0x20c829=_0x28841f,_0x56cf0f=http[_0x20c829(0x29e)]();_0x56cf0f[_0x20c829(0x1ab)](0x0,()=>{const _0x2eaec7=_0x20c829,_0x4f80de={'oDtxq':function(_0x5df15d,_0x1917d6){return _0x11f4e7['isgkv'](_0x5df15d,_0x1917d6);},'ffgKr':_0x2eaec7(0x208),'LwZzU':function(_0x4029ef,_0x4a4138){return _0x11f4e7['FYLAR'](_0x4029ef,_0x4a4138);},'xKgAk':function(_0x535c42,_0x52bc38){const _0x160d4d=_0x2eaec7;return _0x11f4e7[_0x160d4d(0x36a)](_0x535c42,_0x52bc38);},'baVOI':_0x2eaec7(0x257),'FCoID':_0x11f4e7[_0x2eaec7(0x246)],'fdsRL':_0x2eaec7(0x26d)};if(_0x11f4e7[_0x2eaec7(0x300)](_0x11f4e7[_0x2eaec7(0x1a6)],_0x2eaec7(0x2df)))_0x7d05c2(new _0x2f5422(_0x2eaec7(0x306)));else{const _0x184a93=new WebSocket[(_0x2eaec7(0x383))]({'noServer':!![]});_0x56cf0f['on'](_0x11f4e7[_0x2eaec7(0x2e1)],(_0x3344b4,_0x2ffdbe,_0x2a6051)=>{const _0x5bc23d=_0x2eaec7,_0x18ca58={'dQnYV':'unexpected-response'};_0x184a93[_0x5bc23d(0x270)](_0x3344b4,_0x2ffdbe,_0x2a6051,_0x2e8b60=>{const _0x4cad08=_0x5bc23d;if(_0x4f80de[_0x4cad08(0x325)](_0x4cad08(0x208),_0x4f80de[_0x4cad08(0x349)]))_0x2e8b60[_0x4cad08(0x19a)]();else{const _0xd9c1a9=new _0x5d999c(_0x4cad08(0x397)+_0x1fd3d6[_0x4cad08(0x216)]()[_0x4cad08(0x28e)]);_0xd9c1a9['on'](_0x18ca58[_0x4cad08(0x24f)],(_0x23bed1,_0x1e9251)=>{_0xa3f0f0['strictEqual'](_0x1e9251['statusCode'],0x1f7),_0x1e9251['resume'](),_0x1448ee['close'](_0x5d7544);});}}),assert[_0x5bc23d(0x185)](()=>_0x184a93[_0x5bc23d(0x270)](_0x3344b4,_0x2ffdbe,_0x2a6051,NOOP),_0x580012=>{const _0xa6e870=_0x5bc23d;return assert['ok'](_0x4f80de[_0xa6e870(0x17e)](_0x580012,Error)),assert['strictEqual'](_0x580012[_0xa6e870(0x27d)],_0x4f80de[_0xa6e870(0x342)](_0x4f80de['baVOI'],_0x4f80de[_0xa6e870(0x395)])),!![];});});const _0x2a6b26=new WebSocket('ws://localhost:'+_0x56cf0f['address']()[_0x2eaec7(0x28e)]);_0x2a6b26['on']('open',()=>{const _0x52822b=_0x2eaec7;if(_0x4f80de[_0x52822b(0x341)]===_0x52822b(0x2be)){_0x4f30a9[_0x52822b(0x236)](_0x23b905[_0x52822b(0x2d5)],0x190);const _0x19a2df=[];_0x243d1a['on'](_0x52822b(0x280),_0x5ce97d=>{_0x19a2df['push'](_0x5ce97d);}),_0x5c7a86['on'](_0x52822b(0x25e),()=>{const _0x35ccde=_0x52822b;_0x293fcf[_0x35ccde(0x236)](_0x1c11fb[_0x35ccde(0x2d1)](_0x19a2df)[_0x35ccde(0x354)](),_0x35ccde(0x334)),_0xa40323[_0x35ccde(0x19a)](_0x4fc168);});}else _0x2a6b26['on'](_0x52822b(0x19a),()=>{_0x56cf0f['close'](_0x2c174b);});});}});});}),describe(_0x38f478(0x36b),()=>{const _0x3cd8b8=_0x38f478,_0x118bbc={'gBQLR':_0x3cd8b8(0x340),'Snxix':_0x3cd8b8(0x228),'xBFZE':_0x551c59[_0x3cd8b8(0x2af)],'eKdPa':_0x3cd8b8(0x211),'FGxVc':function(_0x2bee7d,_0x28cc30){return _0x2bee7d!==_0x28cc30;},'qKHxx':'tgVMa','LbVvo':_0x3cd8b8(0x19d),'eqcDr':function(_0x483cd3,_0x12941a){const _0x112b08=_0x3cd8b8;return _0x551c59[_0x112b08(0x2c7)](_0x483cd3,_0x12941a);},'ywgGY':_0x551c59['tuRix'],'UFeja':_0x551c59[_0x3cd8b8(0x2f3)],'zpsHu':_0x551c59[_0x3cd8b8(0x37c)],'trbgo':_0x551c59[_0x3cd8b8(0x1aa)],'ARWem':_0x3cd8b8(0x26a),'nRpyg':'dGhlIHNhbXBsZSBub25jZQ==','fcWsV':function(_0x2097fe,_0x525774){const _0x2a7117=_0x3cd8b8;return _0x551c59[_0x2a7117(0x24e)](_0x2097fe,_0x525774);},'KuBAt':_0x3cd8b8(0x1b1),'Dgbkr':function(_0x1cb5c8,_0x1c2f6e){const _0x26bf37=_0x3cd8b8;return _0x551c59[_0x26bf37(0x2a9)](_0x1cb5c8,_0x1c2f6e);},'yKCFj':_0x551c59[_0x3cd8b8(0x2a4)],'pdfVJ':_0x551c59['rKKkV'],'hWXZn':_0x551c59[_0x3cd8b8(0x316)],'vSzOQ':_0x3cd8b8(0x209),'YNkOA':_0x551c59['zSPnL'],'BAkAp':_0x3cd8b8(0x221),'mwQJV':_0x3cd8b8(0x1ce)};it(_0x551c59[_0x3cd8b8(0x3b5)],_0x23842b=>{const _0x18608d=_0x3cd8b8,_0x29bd1b={'lrZPo':_0x118bbc[_0x18608d(0x368)],'cvAmS':_0x18608d(0x2d3),'rQiqR':_0x18608d(0x186)},_0x20298a=new WebSocket[(_0x18608d(0x383))]({'port':0x0},()=>{const _0x53d77c=_0x18608d,_0xe19aad=http[_0x53d77c(0x20f)]({'method':_0x29bd1b[_0x53d77c(0x1f7)],'port':_0x20298a[_0x53d77c(0x216)]()['port'],'headers':{'Connection':_0x53d77c(0x26a),'Upgrade':_0x29bd1b[_0x53d77c(0x21b)]}});_0xe19aad['on'](_0x29bd1b[_0x53d77c(0x1e1)],_0x390cad=>{const _0x1d0313=_0x53d77c;assert[_0x1d0313(0x236)](_0x390cad['statusCode'],0x195);const _0x265709=[];_0x390cad['on'](_0x1d0313(0x280),_0x493e72=>{const _0x262b88=_0x1d0313;_0x265709[_0x262b88(0x227)](_0x493e72);}),_0x390cad['on'](_0x1d0313(0x25e),()=>{const _0x55ee0b=_0x1d0313;assert[_0x55ee0b(0x236)](Buffer[_0x55ee0b(0x2d1)](_0x265709)[_0x55ee0b(0x354)](),_0x55ee0b(0x1e2)),_0x20298a[_0x55ee0b(0x19a)](_0x23842b);});}),_0xe19aad[_0x53d77c(0x25e)]();});_0x20298a['on'](_0x118bbc['Snxix'],()=>{const _0xd138=_0x18608d;_0x23842b(new Error(_0xd138(0x306)));});}),_0x551c59['xJOLc'](it,_0x3cd8b8(0x33f),_0x2996d4=>{const _0x7e4430=_0x3cd8b8,_0x35f098={'nkVRq':_0x7e4430(0x25e),'eMUKv':_0x118bbc[_0x7e4430(0x2b0)],'FshvX':function(_0x3b14c6,_0x2fd214){return _0x3b14c6(_0x2fd214);}};if(_0x118bbc[_0x7e4430(0x37b)](_0x118bbc[_0x7e4430(0x1f8)],_0x118bbc['LbVvo'])){const _0x202bbc=new WebSocket[(_0x7e4430(0x383))]({'port':0x0},()=>{const _0x4beac6=_0x7e4430,_0x2ecaaf=http[_0x4beac6(0x256)]({'port':_0x202bbc[_0x4beac6(0x216)]()[_0x4beac6(0x28e)],'headers':{'Connection':'Upgrade','Upgrade':'foo'}});_0x2ecaaf['on'](_0x4beac6(0x186),_0x20cdaa=>{const _0x4c5590=_0x4beac6,_0x142ec6={'JUqwL':'Invalid\x20Upgrade\x20header'};assert[_0x4c5590(0x236)](_0x20cdaa[_0x4c5590(0x2d5)],0x190);const _0x3ee459=[];_0x20cdaa['on'](_0x4c5590(0x280),_0x5e59a7=>{const _0x33e496=_0x4c5590;_0x3ee459[_0x33e496(0x227)](_0x5e59a7);}),_0x20cdaa['on'](_0x35f098[_0x4c5590(0x175)],()=>{const _0x573b76=_0x4c5590;assert[_0x573b76(0x236)](Buffer['concat'](_0x3ee459)[_0x573b76(0x354)](),_0x142ec6[_0x573b76(0x1c1)]),_0x202bbc['close'](_0x2996d4);});});});_0x202bbc['on'](_0x118bbc['Snxix'],()=>{const _0x1d4dc5=_0x7e4430;if(_0x35f098[_0x1d4dc5(0x173)]===_0x35f098[_0x1d4dc5(0x173)])_0x35f098[_0x1d4dc5(0x320)](_0x2996d4,new Error(_0x1d4dc5(0x306)));else return _0x4be8a3[_0x1d4dc5(0x236)](_0x343fb2[_0x1d4dc5(0x281)],_0x1d4dc5(0x1e8)),_0xca209e['strictEqual'](_0x4f903c[_0x1d4dc5(0x2b3)]['headers']['foo'],_0x1d4dc5(0x18d)),_0x3d10d8['ok'](_0x578e85[_0x1d4dc5(0x20b)],!![]),!![];});}else _0x5e7698['on'](_0x118bbc['xBFZE'],()=>{const _0x371ac1=_0x7e4430;_0x21deeb['strictEqual'](_0x250c04[_0x371ac1(0x327)][_0x371ac1(0x2c9)],0x0),_0x1aada7[_0x371ac1(0x19a)](_0x5d0d7e);});}),it(_0x3cd8b8(0x385),_0x17ba40=>{const _0x4f86e8=_0x3cd8b8,_0x704fd9={'fmbaw':_0x4f86e8(0x25e),'tIYBT':_0x4f86e8(0x26a),'MDSbx':_0x118bbc[_0x4f86e8(0x32b)]},_0x188932=new WebSocket['Server']({'port':0x0},()=>{const _0x4f8ab0=_0x4f86e8,_0x9db5cf=http[_0x4f8ab0(0x256)]({'port':_0x188932['address']()[_0x4f8ab0(0x28e)],'headers':{'Connection':_0x704fd9['tIYBT'],'Upgrade':_0x704fd9[_0x4f8ab0(0x2ac)]}});_0x9db5cf['on'](_0x4f8ab0(0x186),_0x3872ae=>{const _0x22cc8d=_0x4f8ab0,_0x450e78={'ReyWZ':_0x22cc8d(0x228),'DStrm':_0x22cc8d(0x334)};if(_0x22cc8d(0x329)!==_0x22cc8d(0x329)){const _0x5efc56={'rMHnI':_0x22cc8d(0x186)},_0x4b5d9e=new _0x4cae22['Server']({'verifyClient':()=>![],'port':0x0},()=>{const _0x5279a1=_0x22cc8d,_0xddaf9a=_0x1cf126[_0x5279a1(0x256)]({'port':_0x4b5d9e[_0x5279a1(0x216)]()['port'],'headers':{'Connection':_0x5279a1(0x26a),'Upgrade':'websocket','Sec-WebSocket-Key':_0x5279a1(0x273),'Sec-WebSocket-Version':0x8}});_0xddaf9a['on'](_0x5efc56['rMHnI'],_0x4644ad=>{const _0x3a4b58=_0x5279a1;_0x45859f[_0x3a4b58(0x236)](_0x4644ad[_0x3a4b58(0x2d5)],0x191),_0x4b5d9e['close'](_0x57b859);});});_0x4b5d9e['on'](_0x450e78[_0x22cc8d(0x29c)],()=>{const _0x1b44e1=_0x22cc8d;_0x4a8367(new _0x284b6d(_0x1b44e1(0x306)));});}else{assert[_0x22cc8d(0x236)](_0x3872ae[_0x22cc8d(0x2d5)],0x190);const _0xf738c4=[];_0x3872ae['on']('data',_0x520634=>{const _0x2c3e2b=_0x22cc8d;_0xf738c4[_0x2c3e2b(0x227)](_0x520634);}),_0x3872ae['on'](_0x704fd9[_0x22cc8d(0x30b)],()=>{const _0x4cd745=_0x22cc8d;assert[_0x4cd745(0x236)](Buffer[_0x4cd745(0x2d1)](_0xf738c4)['toString'](),_0x450e78['DStrm']),_0x188932[_0x4cd745(0x19a)](_0x17ba40);});}});});_0x188932['on']('connection',()=>{const _0x484b33=_0x4f86e8;_0x118bbc[_0x484b33(0x217)](_0x17ba40,new Error(_0x118bbc[_0x484b33(0x2a0)]));});}),it(_0x551c59[_0x3cd8b8(0x2f2)],_0xae801e=>{const _0x34a4b3=_0x3cd8b8,_0x85ea79={'hLQpG':_0x118bbc[_0x34a4b3(0x32e)]},_0x52879d=new WebSocket[(_0x34a4b3(0x383))]({'port':0x0},()=>{const _0x11857a=_0x34a4b3,_0x4f3b85=http[_0x11857a(0x256)]({'port':_0x52879d[_0x11857a(0x216)]()['port'],'headers':{'Connection':_0x11857a(0x26a),'Upgrade':_0x11857a(0x2d3),'Sec-WebSocket-Key':_0x11857a(0x1f9)}});_0x4f3b85['on'](_0x118bbc[_0x11857a(0x1f5)],_0x3e1b27=>{const _0x929be7=_0x11857a;assert[_0x929be7(0x236)](_0x3e1b27[_0x929be7(0x2d5)],0x190);const _0x492ad2=[];_0x3e1b27['on'](_0x929be7(0x280),_0x1ff680=>{const _0x537172=_0x929be7;_0x492ad2[_0x537172(0x227)](_0x1ff680);}),_0x3e1b27['on'](_0x85ea79[_0x929be7(0x331)],()=>{const _0x2bd420=_0x929be7;assert[_0x2bd420(0x236)](Buffer[_0x2bd420(0x2d1)](_0x492ad2)[_0x2bd420(0x354)](),'Missing\x20or\x20invalid\x20Sec-WebSocket-Key\x20header'),_0x52879d[_0x2bd420(0x19a)](_0xae801e);});});});_0x52879d['on'](_0x34a4b3(0x228),()=>{const _0x1f5242=_0x34a4b3;_0xae801e(new Error(_0x1f5242(0x306)));});}),_0x551c59[_0x3cd8b8(0x28b)](it,_0x551c59[_0x3cd8b8(0x235)],_0x89f192=>{const _0x1dd6fa=_0x3cd8b8,_0x2abece={'LdQEl':_0x551c59[_0x1dd6fa(0x2d6)]},_0x2b5a27=new WebSocket[(_0x1dd6fa(0x383))]({'port':0x0},()=>{const _0x105aee=_0x1dd6fa,_0x1ae9e7={'hZguX':_0x105aee(0x280)},_0x24c927=http['get']({'port':_0x2b5a27[_0x105aee(0x216)]()[_0x105aee(0x28e)],'headers':{'Connection':_0x118bbc[_0x105aee(0x261)],'Upgrade':_0x105aee(0x2d3),'Sec-WebSocket-Key':_0x118bbc['nRpyg']}});_0x24c927['on'](_0x105aee(0x186),_0x222850=>{const _0x3750a4=_0x105aee,_0x2237f5={'TyNap':'https://example.com'};assert[_0x3750a4(0x236)](_0x222850[_0x3750a4(0x2d5)],0x190);const _0x130c2d=[];_0x222850['on'](_0x1ae9e7['hZguX'],_0x1985a2=>{const _0x294e97=_0x3750a4,_0xb29ea1={'AQVOa':_0x2237f5[_0x294e97(0x243)],'oWILi':_0x294e97(0x18d),'owjgi':_0x294e97(0x344),'YCGYp':_0x294e97(0x265)};if(_0x294e97(0x389)===_0x294e97(0x1eb)){const _0x20badc={'OYwVB':_0xb29ea1[_0x294e97(0x2ed)],'vbvQE':_0xb29ea1[_0x294e97(0x1dc)]},_0x1653e8=_0x3013b1['createServer']({'cert':_0x555a31[_0x294e97(0x278)](_0xb29ea1[_0x294e97(0x34b)]),'key':_0x5752f5[_0x294e97(0x278)](_0xb29ea1[_0x294e97(0x2e3)])}),_0x4bd25f=new _0x164aea[(_0x294e97(0x383))]({'verifyClient':_0x5993c8=>{const _0x2d7226=_0x294e97;return _0x5f202a[_0x2d7226(0x236)](_0x5993c8[_0x2d7226(0x281)],_0x20badc[_0x2d7226(0x1df)]),_0x2e4a54[_0x2d7226(0x236)](_0x5993c8[_0x2d7226(0x2b3)][_0x2d7226(0x27b)][_0x2d7226(0x330)],_0x20badc['vbvQE']),_0x2cbb5e['ok'](_0x5993c8[_0x2d7226(0x20b)],!![]),!![];},'server':_0x1653e8});_0x4bd25f['on']('connection',()=>{_0x1653e8['close'](_0x20ad1f);}),_0x1653e8[_0x294e97(0x1ab)](0x0,()=>{const _0x480a2c=_0x294e97,_0x1dc2d4=new _0x121dea(_0x480a2c(0x2c1)+_0x1653e8[_0x480a2c(0x216)]()['port'],{'headers':{'Origin':_0xb29ea1[_0x480a2c(0x2ed)],'foo':_0x480a2c(0x18d)},'rejectUnauthorized':![]});_0x1dc2d4['on'](_0x480a2c(0x2a1),_0x1dc2d4[_0x480a2c(0x19a)]);});}else _0x130c2d[_0x294e97(0x227)](_0x1985a2);}),_0x222850['on'](_0x3750a4(0x25e),()=>{const _0x3a4fed=_0x3750a4;assert[_0x3a4fed(0x236)](Buffer[_0x3a4fed(0x2d1)](_0x130c2d)[_0x3a4fed(0x354)](),_0x3a4fed(0x1b1)),_0x2b5a27[_0x3a4fed(0x19a)](_0x89f192);});});});_0x2b5a27['on'](_0x551c59[_0x1dd6fa(0x322)],()=>{const _0x1acd77=_0x1dd6fa;_0x89f192(new Error(_0x2abece[_0x1acd77(0x2b5)]));});}),_0x551c59['fMwKy'](it,_0x3cd8b8(0x2ba),_0x465b52=>{const _0xf74d48=_0x3cd8b8,_0x504d6e={'qBavW':_0x118bbc[_0xf74d48(0x261)],'zIyia':_0xf74d48(0x2d3),'HmhxE':_0xf74d48(0x186),'gpolC':function(_0xb27b73,_0x3ec08d){const _0x1983b9=_0xf74d48;return _0x118bbc[_0x1983b9(0x3a7)](_0xb27b73,_0x3ec08d);},'OKzSd':_0x118bbc[_0xf74d48(0x291)],'mQzkI':function(_0x8938a,_0x115f13){const _0x51cd01=_0xf74d48;return _0x118bbc[_0x51cd01(0x37b)](_0x8938a,_0x115f13);},'AMKbT':_0xf74d48(0x188),'QgvJl':_0xf74d48(0x273)},_0x58df2e=new WebSocket[(_0xf74d48(0x383))]({'port':0x0},()=>{const _0x32ff46=_0xf74d48,_0x216def={'FetoH':_0x504d6e[_0x32ff46(0x34d)],'ULaAD':'dGhlIHNhbXBsZSBub25jZQ==','Qdvom':function(_0x5601ac,_0x1b6886){const _0x4ad55c=_0x32ff46;return _0x504d6e[_0x4ad55c(0x289)](_0x5601ac,_0x1b6886);},'hFGNj':'JvIwo','QwUSN':_0x32ff46(0x1cd),'tBBBT':_0x504d6e[_0x32ff46(0x2fb)],'bYvbT':_0x32ff46(0x25e)};if(_0x504d6e['mQzkI'](_0x504d6e[_0x32ff46(0x32d)],_0x504d6e[_0x32ff46(0x32d)])){const _0x5bf44a=_0x295736[_0x32ff46(0x256)]({'port':_0x3d10e6[_0x32ff46(0x216)]()[_0x32ff46(0x28e)],'headers':{'Connection':_0x504d6e['qBavW'],'Upgrade':_0x504d6e[_0x32ff46(0x1b3)],'Sec-WebSocket-Key':_0x32ff46(0x273),'Sec-WebSocket-Version':0x8}});_0x5bf44a['on'](_0x504d6e[_0x32ff46(0x1d5)],_0x3f4526=>{const _0x15d7b9=_0x32ff46;_0x1c88c6[_0x15d7b9(0x236)](_0x3f4526['statusCode'],0x191),_0x1e83b6[_0x15d7b9(0x19a)](_0x256ff9);});}else{const _0x191f5f=http[_0x32ff46(0x256)]({'port':_0x58df2e[_0x32ff46(0x216)]()[_0x32ff46(0x28e)],'headers':{'Connection':_0x504d6e['qBavW'],'Upgrade':_0x32ff46(0x2d3),'Sec-WebSocket-Key':_0x504d6e[_0x32ff46(0x352)],'Sec-WebSocket-Version':0xc}});_0x191f5f['on'](_0x504d6e[_0x32ff46(0x1d5)],_0x5c46fd=>{const _0x331a11=_0x32ff46;assert[_0x331a11(0x236)](_0x5c46fd['statusCode'],0x190);const _0x132cf3=[];_0x5c46fd['on'](_0x331a11(0x280),_0x77d999=>{const _0x2e93fd=_0x331a11,_0x40e36e={'MNYJc':_0x216def[_0x2e93fd(0x2f7)],'nHSHk':_0x2e93fd(0x2d3),'VrtSn':_0x216def[_0x2e93fd(0x2e9)],'antDL':_0x2e93fd(0x186)};if(_0x216def['Qdvom'](_0x216def[_0x2e93fd(0x34f)],_0x216def[_0x2e93fd(0x2a8)])){const _0x1525ab=_0x4d8ed6[_0x2e93fd(0x256)]({'port':_0x38cf56[_0x2e93fd(0x216)]()[_0x2e93fd(0x28e)],'headers':{'Connection':_0x40e36e['MNYJc'],'Upgrade':_0x40e36e[_0x2e93fd(0x197)],'Sec-WebSocket-Key':_0x40e36e[_0x2e93fd(0x215)],'Sec-WebSocket-Version':0x8}});_0x1525ab['on'](_0x40e36e[_0x2e93fd(0x212)],_0x3f6696=>{const _0x5e89fe=_0x2e93fd;_0x4a4a4f[_0x5e89fe(0x236)](_0x3f6696[_0x5e89fe(0x2d5)],0x194),_0x349136['close'](_0xdea407);});}else _0x132cf3[_0x2e93fd(0x227)](_0x77d999);}),_0x5c46fd['on'](_0x216def[_0x331a11(0x3a0)],()=>{const _0x28f8a8=_0x331a11;assert[_0x28f8a8(0x236)](Buffer[_0x28f8a8(0x2d1)](_0x132cf3)[_0x28f8a8(0x354)](),_0x216def[_0x28f8a8(0x3a9)]),_0x58df2e[_0x28f8a8(0x19a)](_0x465b52);});});}});_0x58df2e['on'](_0x118bbc['Snxix'],()=>{const _0x2edceb=_0xf74d48;_0x118bbc[_0x2edceb(0x217)](_0x465b52,new Error(_0x2edceb(0x306)));});}),it(_0x551c59[_0x3cd8b8(0x380)],_0x4f4230=>{const _0x218944=_0x3cd8b8,_0xd2a193={'UIyfd':_0x118bbc[_0x218944(0x32e)],'rNAii':function(_0xcbb4f9,_0x279f09){const _0x2ad417=_0x218944;return _0x118bbc[_0x2ad417(0x3a7)](_0xcbb4f9,_0x279f09);},'pcAGq':_0x218944(0x2d3),'bYYki':_0x218944(0x273),'aIHkw':_0x218944(0x254)},_0x93a130=new WebSocket[(_0x218944(0x383))]({'port':0x0},()=>{const _0x20d00c=_0x218944,_0x5759f2={'BOeEC':_0x20d00c(0x280),'BWYjv':_0xd2a193[_0x20d00c(0x3a4)]};if(_0xd2a193[_0x20d00c(0x1c4)]('MGTlr',_0x20d00c(0x24c)))_0x2f257c['deepStrictEqual'](_0x20a65e,_0x359f51[_0x20d00c(0x2a5)](_0x20d00c(0x376))),_0x11dc1a['ok'](!_0x338dc1),_0x37f0fc['close'](_0x18af57);else{const _0x1fe551=http[_0x20d00c(0x256)]({'port':_0x93a130[_0x20d00c(0x216)]()[_0x20d00c(0x28e)],'headers':{'Connection':_0x20d00c(0x26a),'Upgrade':_0xd2a193[_0x20d00c(0x244)],'Sec-WebSocket-Key':_0xd2a193[_0x20d00c(0x224)],'Sec-WebSocket-Version':0xd,'Sec-WebSocket-Protocol':_0xd2a193['aIHkw']}});_0x1fe551['on'](_0x20d00c(0x186),_0x251801=>{const _0x4cf889=_0x20d00c;assert['strictEqual'](_0x251801['statusCode'],0x190);const _0x1feb7b=[];_0x251801['on'](_0x5759f2[_0x4cf889(0x2de)],_0x423f4e=>{_0x1feb7b['push'](_0x423f4e);}),_0x251801['on'](_0x5759f2[_0x4cf889(0x310)],()=>{const _0x22a66a=_0x4cf889;assert[_0x22a66a(0x236)](Buffer[_0x22a66a(0x2d1)](_0x1feb7b)['toString'](),_0x22a66a(0x38a)),_0x93a130[_0x22a66a(0x19a)](_0x4f4230);});});}});_0x93a130['on'](_0x118bbc['Snxix'],()=>{const _0x53ad9b=_0x218944;_0x4f4230(new Error(_0x53ad9b(0x306)));});}),_0x551c59[_0x3cd8b8(0x294)](it,_0x551c59[_0x3cd8b8(0x22e)],_0x3f8b59=>{const _0x454b09=_0x3cd8b8,_0x5601d2={'DzHxg':function(_0x3e49ab,_0x16304d){return _0x551c59['FMhsK'](_0x3e49ab,_0x16304d);},'lEJOW':_0x454b09(0x2a1),'dgOJw':_0x454b09(0x228)};if(_0x454b09(0x1ae)!==_0x454b09(0x1ae)){const _0x12fb0a={'FDudZ':_0x5601d2[_0x454b09(0x1c8)]},_0x210176=_0x2fc09c[_0x454b09(0x29e)](),_0x18c7f4=_0x210176[_0x454b09(0x19a)];_0x210176[_0x454b09(0x19a)]=()=>{_0x5601d2['DzHxg'](_0x131cd5,new _0x456fb3('Must\x20not\x20close\x20pre-created\x20server'));};const _0x21c4d3=new _0x408562[(_0x454b09(0x383))]({'server':_0x210176});_0x21c4d3['on'](_0x5601d2[_0x454b09(0x1e3)],()=>{const _0x478ed8=_0x454b09;_0x21c4d3[_0x478ed8(0x19a)](),_0x210176[_0x478ed8(0x19a)]=_0x18c7f4,_0x210176[_0x478ed8(0x19a)](_0x37eb25);}),_0x210176[_0x454b09(0x1ab)](0x0,()=>{const _0x3f30a3=_0x454b09,_0x1debef=new _0x1153a9('ws://localhost:'+_0x210176[_0x3f30a3(0x216)]()[_0x3f30a3(0x28e)]);_0x1debef['on'](_0x12fb0a[_0x3f30a3(0x22c)],_0x1debef[_0x3f30a3(0x19a)]);});}else{const _0x31965e=new WebSocket[(_0x454b09(0x383))]({'perMessageDeflate':!![],'port':0x0},()=>{const _0x49b3e1=_0x454b09,_0x4a4449=http[_0x49b3e1(0x256)]({'port':_0x31965e[_0x49b3e1(0x216)]()[_0x49b3e1(0x28e)],'headers':{'Connection':_0x49b3e1(0x26a),'Upgrade':_0x49b3e1(0x2d3),'Sec-WebSocket-Key':_0x118bbc[_0x49b3e1(0x2db)],'Sec-WebSocket-Version':0xd,'Sec-WebSocket-Extensions':_0x49b3e1(0x2d4)}});_0x4a4449['on'](_0x118bbc[_0x49b3e1(0x1f5)],_0x417f69=>{const _0x5015b7=_0x49b3e1;assert[_0x5015b7(0x236)](_0x417f69['statusCode'],0x190);const _0x515350=[];_0x417f69['on'](_0x5015b7(0x280),_0x5a935a=>{const _0x4118fa=_0x5015b7;_0x515350[_0x4118fa(0x227)](_0x5a935a);}),_0x417f69['on']('end',()=>{const _0x512b79=_0x5015b7;assert[_0x512b79(0x236)](Buffer[_0x512b79(0x2d1)](_0x515350)[_0x512b79(0x354)](),_0x512b79(0x19c)),_0x31965e['close'](_0x3f8b59);});});});_0x31965e['on']('connection',()=>{const _0x242789=_0x454b09;_0x3f8b59(new Error(_0x242789(0x306)));});}}),it(_0x551c59['NIFpp'],_0x106a87=>{const _0x25bf5c=_0x3cd8b8,_0x219d01={'BzIUu':_0x118bbc[_0x25bf5c(0x35d)],'kNBfO':_0x25bf5c(0x340),'eQnzm':_0x118bbc[_0x25bf5c(0x261)],'izvWK':'websocket','dDFXI':'response','kUjlu':_0x118bbc['ywgGY']},_0xd1d273=new WebSocket['Server']({'port':0x0},()=>{const _0x541e4d=_0x25bf5c,_0xc0401d={'tLVBm':'data','AKpMJ':'end'},_0x3951fe=http[_0x541e4d(0x20f)]({'method':_0x219d01[_0x541e4d(0x239)],'port':_0xd1d273['address']()[_0x541e4d(0x28e)],'headers':{'Connection':_0x219d01[_0x541e4d(0x177)],'Upgrade':_0x219d01[_0x541e4d(0x360)]}});_0x3951fe['on'](_0x219d01[_0x541e4d(0x1ec)],_0x2a5a88=>{const _0x340188=_0x541e4d,_0x57a248={'GOPOn':'Missing\x20or\x20invalid\x20Sec-WebSocket-Version\x20header'};if(_0x219d01[_0x340188(0x23b)]!=='aalNB')assert['strictEqual'](_0x2a5a88[_0x340188(0x2d5)],0x190),_0xd1d273['close'](_0x106a87);else{_0x484e06[_0x340188(0x236)](_0x1ae91e[_0x340188(0x2d5)],0x190);const _0x33f632=[];_0x1633ce['on'](_0xc0401d[_0x340188(0x387)],_0x4aa002=>{const _0x5e8d90=_0x340188;_0x33f632[_0x5e8d90(0x227)](_0x4aa002);}),_0xa1798['on'](_0xc0401d['AKpMJ'],()=>{const _0xcd27d3=_0x340188;_0x1eea4f[_0xcd27d3(0x236)](_0x3dab58[_0xcd27d3(0x2d1)](_0x33f632)[_0xcd27d3(0x354)](),_0x57a248[_0xcd27d3(0x1f2)]),_0x3e15d8[_0xcd27d3(0x19a)](_0x5d8c79);});}}),_0x3951fe[_0x541e4d(0x25e)]();});_0xd1d273['on'](_0x25bf5c(0x285),(_0x8be27,_0x4517a2,_0x99041d)=>{const _0x28a76d=_0x25bf5c;assert['ok'](_0x118bbc[_0x28a76d(0x35f)](_0x8be27,Error)),assert[_0x28a76d(0x236)](_0x8be27[_0x28a76d(0x27d)],_0x28a76d(0x1e2)),assert['ok'](_0x99041d instanceof http['IncomingMessage']),assert[_0x28a76d(0x236)](_0x99041d[_0x28a76d(0x1e5)],_0x28a76d(0x340)),_0x4517a2[_0x28a76d(0x25e)]('HTTP/1.1\x20400\x20Bad\x20Request\x0d\x0a\x0d\x0a');}),_0xd1d273['on'](_0x25bf5c(0x228),()=>{const _0x1b9e75=_0x25bf5c;_0x106a87(new Error(_0x219d01[_0x1b9e75(0x205)]));});}),it(_0x551c59[_0x3cd8b8(0x37e)],_0xa2475c=>{const _0x51b413=_0x3cd8b8,_0x582bb9={'rlBxs':'Unexpected\x20callback\x20invocation','WXvOw':_0x51b413(0x2d3),'fYNOG':_0x118bbc[_0x51b413(0x1f5)]},_0x4566ef=http[_0x51b413(0x29e)](),_0x32e135=new WebSocket[(_0x51b413(0x383))]({'noServer':!![]});_0x4566ef['on'](_0x118bbc[_0x51b413(0x374)],(_0x508238,_0x36e429,_0x563d0a)=>{const _0x51aa1b=_0x51b413;_0x32e135[_0x51aa1b(0x19a)](),_0x32e135[_0x51aa1b(0x270)](_0x508238,_0x36e429,_0x563d0a,()=>{const _0x1ec566=_0x51aa1b;_0xa2475c(new Error(_0x582bb9[_0x1ec566(0x1d9)]));});}),_0x4566ef[_0x51b413(0x1ab)](0x0,()=>{const _0x86e137=_0x51b413,_0x2bf991={'MQCMN':_0x86e137(0x365)};if('UJsRh'!==_0x118bbc[_0x86e137(0x23a)]){const _0x1c670f=new WebSocket(_0x86e137(0x397)+_0x4566ef[_0x86e137(0x216)]()[_0x86e137(0x28e)]);_0x1c670f['on'](_0x86e137(0x22d),(_0x31c653,_0x5a19f6)=>{const _0x86106=_0x86e137;if('qVYUW'===_0x2bf991[_0x86106(0x2ce)])assert['strictEqual'](_0x5a19f6[_0x86106(0x2d5)],0x1f7),_0x5a19f6[_0x86106(0x2f4)](),_0x4566ef[_0x86106(0x19a)](_0xa2475c);else{const _0x4600e0=new _0xb22d79[(_0x86106(0x383))]({'port':0x0},()=>{const _0x99bcd1=_0x86106,_0x1d6ddf=new _0x5c5ac4['Server']({'port':_0x4600e0[_0x99bcd1(0x216)]()[_0x99bcd1(0x28e)]});_0x1d6ddf['on']('error',()=>_0x4600e0[_0x99bcd1(0x19a)](_0x429c1a));});}});}else{const _0x321c7a=_0x310fce[_0x86e137(0x20f)]({'method':'POST','port':_0x5c3906[_0x86e137(0x216)]()[_0x86e137(0x28e)],'headers':{'Connection':'Upgrade','Upgrade':_0x582bb9['WXvOw']}});_0x321c7a['on'](_0x582bb9[_0x86e137(0x1ee)],_0x2c93a1=>{const _0xfc4d43=_0x86e137;_0x3c5f4f['strictEqual'](_0x2c93a1['statusCode'],0x190),_0x3f99e6[_0xfc4d43(0x19a)](_0x7c89c);}),_0x321c7a[_0x86e137(0x25e)]();}});}),it(_0x551c59[_0x3cd8b8(0x29a)],_0x479abe=>{const _0x2cec19=_0x3cd8b8,_0x2448d0=new WebSocket[(_0x2cec19(0x383))]({'perMessageDeflate':!![],'port':0x0},()=>{const _0x459343=_0x2cec19,_0x457f24={'CUcbo':function(_0x48e7ed,_0x5ddea0){return _0x48e7ed!==_0x5ddea0;},'gyUat':_0x459343(0x280)},_0x1bc291=http[_0x459343(0x256)]({'port':_0x2448d0[_0x459343(0x216)]()[_0x459343(0x28e)],'headers':{'Connection':_0x459343(0x26a),'Upgrade':_0x459343(0x2d3),'Sec-WebSocket-Key':_0x118bbc['nRpyg'],'Sec-WebSocket-Version':0xd,'Sec-WebSocket-Extensions':_0x118bbc[_0x459343(0x176)]}});_0x1bc291['on']('upgrade',(_0x572203,_0x472a51,_0x2dfb14)=>{const _0x36b75c=_0x459343;if(_0x457f24[_0x36b75c(0x396)](_0x36b75c(0x2b8),_0x36b75c(0x2b8))){_0x2a4980[_0x36b75c(0x236)](_0xb4d989[_0x36b75c(0x2d5)],0x190);const _0x27f38d=[];_0x3d3a13['on'](_0x36b75c(0x280),_0x55968b=>{_0x27f38d['push'](_0x55968b);}),_0x16cb05['on'](_0x36b75c(0x25e),()=>{const _0x4617c=_0x36b75c;_0x119067[_0x4617c(0x236)](_0x59d98a['concat'](_0x27f38d)[_0x4617c(0x354)](),_0x4617c(0x334)),_0x2ecbe8[_0x4617c(0x19a)](_0x4e64a3);});}else{if(_0x2dfb14['length'])_0x472a51[_0x36b75c(0x272)](_0x2dfb14);_0x472a51[_0x36b75c(0x1c6)](_0x457f24['gyUat'],_0x596057=>{const _0x25ebe=_0x36b75c;assert[_0x25ebe(0x236)](_0x596057[0x0],0x88),_0x472a51['destroy'](),_0x2448d0[_0x25ebe(0x19a)](_0x479abe);});}});});_0x2448d0['on'](_0x551c59[_0x2cec19(0x322)],_0x2747e6=>{const _0x3b1d86=_0x2cec19;assert[_0x3b1d86(0x236)](_0x2747e6[_0x3b1d86(0x3a6)],''),_0x2747e6['close']();});}),describe(_0x3cd8b8(0x30c),()=>{const _0x447091=_0x3cd8b8,_0xc80820={'IsPbg':_0x447091(0x265),'OssRT':_0x551c59[_0x447091(0x322)],'bTACZ':_0x447091(0x33e),'TXSEu':function(_0x97efc5,_0x5e35a7){return _0x551c59['wfgXB'](_0x97efc5,_0x5e35a7);},'USfWO':_0x551c59[_0x447091(0x1a2)],'CuXxV':_0x447091(0x2d3),'vJKSo':_0x447091(0x273),'zHZpB':_0x551c59['tuRix'],'JCCsY':_0x551c59['yefSw'],'zAUPm':function(_0x12fdea,_0x58df78){return _0x12fdea(_0x58df78);}};it(_0x551c59[_0x447091(0x199)],_0x409154=>{const _0x3db369=_0x447091,_0x2fe8b4={'EHyiS':_0x118bbc[_0x3db369(0x32b)],'plver':_0x118bbc[_0x3db369(0x1f5)],'XvteX':function(_0x1eaafe,_0x4e77c5){return _0x1eaafe(_0x4e77c5);}},_0x5948fb=new WebSocket[(_0x3db369(0x383))]({'verifyClient':()=>![],'port':0x0},()=>{const _0x3f1325=_0x3db369,_0x413d54=http[_0x3f1325(0x256)]({'port':_0x5948fb[_0x3f1325(0x216)]()[_0x3f1325(0x28e)],'headers':{'Connection':_0x3f1325(0x26a),'Upgrade':_0x2fe8b4[_0x3f1325(0x1cb)],'Sec-WebSocket-Key':_0x3f1325(0x273),'Sec-WebSocket-Version':0x8}});_0x413d54['on'](_0x2fe8b4[_0x3f1325(0x1db)],_0x32e6c4=>{const _0x47ff97=_0x3f1325;assert['strictEqual'](_0x32e6c4['statusCode'],0x191),_0x5948fb[_0x47ff97(0x19a)](_0x409154);});});_0x5948fb['on'](_0x3db369(0x228),()=>{const _0x218aae=_0x3db369;_0x2fe8b4[_0x218aae(0x3b0)](_0x409154,new Error(_0x218aae(0x306)));});}),_0x551c59[_0x447091(0x2e7)](it,'can\x20accept\x20client\x20synchronously',_0x3ad526=>{const _0x59814f=_0x447091,_0x2f277f={'tNggs':'https://example.com','hRpmp':'open'},_0xb521d9=https[_0x59814f(0x29e)]({'cert':fs[_0x59814f(0x278)](_0x59814f(0x344)),'key':fs[_0x59814f(0x278)](_0xc80820['IsPbg'])}),_0x3bb96e=new WebSocket[(_0x59814f(0x383))]({'verifyClient':_0x14906a=>{const _0x1f21e6=_0x59814f;return assert[_0x1f21e6(0x236)](_0x14906a[_0x1f21e6(0x281)],_0x2f277f['tNggs']),assert[_0x1f21e6(0x236)](_0x14906a[_0x1f21e6(0x2b3)]['headers'][_0x1f21e6(0x330)],_0x1f21e6(0x18d)),assert['ok'](_0x14906a[_0x1f21e6(0x20b)],!![]),!![];},'server':_0xb521d9});_0x3bb96e['on'](_0x59814f(0x228),()=>{const _0x407bd0=_0x59814f;_0xb521d9[_0x407bd0(0x19a)](_0x3ad526);}),_0xb521d9[_0x59814f(0x1ab)](0x0,()=>{const _0x4780c2=_0x59814f,_0x4cd005=new WebSocket(_0x4780c2(0x2c1)+_0xb521d9[_0x4780c2(0x216)]()['port'],{'headers':{'Origin':_0x4780c2(0x1e8),'foo':'bar'},'rejectUnauthorized':![]});_0x4cd005['on'](_0x2f277f[_0x4780c2(0x1cc)],_0x4cd005['close']);});}),it(_0x447091(0x332),_0x142cbe=>{const _0x18635b=_0x447091,_0x1654d2={'APmzd':'open'},_0xde3c3=new WebSocket[(_0x18635b(0x383))]({'verifyClient':(_0xdee4c9,_0x3733da)=>process['nextTick'](_0x3733da,!![]),'port':0x0},()=>{const _0xc61a73=_0x18635b,_0x11e20a=new WebSocket(_0xc61a73(0x397)+_0xde3c3[_0xc61a73(0x216)]()[_0xc61a73(0x28e)]);_0x11e20a['on'](_0x1654d2[_0xc61a73(0x226)],_0x11e20a[_0xc61a73(0x19a)]);});_0xde3c3['on'](_0xc80820[_0x18635b(0x1c0)],()=>_0xde3c3[_0x18635b(0x19a)](_0x142cbe));}),it(_0x551c59[_0x447091(0x202)],_0x2572cd=>{const _0x1415eb=_0x447091,_0x394138={'LJRic':function(_0x4c7130,_0x4f593e){return _0x4c7130!==_0x4f593e;},'MRyRU':_0xc80820[_0x1415eb(0x1bb)],'hjLfy':_0x1415eb(0x362),'ibfuJ':_0x1415eb(0x36f),'FfvOe':_0x1415eb(0x273),'ldDKz':_0x1415eb(0x306)},_0x418026=new WebSocket[(_0x1415eb(0x383))]({'verifyClient':(_0x14d1bc,_0x400fc7)=>process[_0x1415eb(0x1e0)](_0x400fc7,![]),'port':0x0},()=>{const _0x2a214b=_0x1415eb,_0x4b9764={'dCReq':_0x2a214b(0x2a1)};if(_0x394138['hjLfy']!==_0x394138[_0x2a214b(0x335)]){const _0x50f5b3=http[_0x2a214b(0x256)]({'port':_0x418026[_0x2a214b(0x216)]()['port'],'headers':{'Connection':_0x2a214b(0x26a),'Upgrade':_0x2a214b(0x2d3),'Sec-WebSocket-Key':_0x394138[_0x2a214b(0x2ab)],'Sec-WebSocket-Version':0x8}});_0x50f5b3['on'](_0x2a214b(0x186),_0x27c0f1=>{const _0x2d4f6c=_0x2a214b;_0x394138['LJRic'](_0x394138[_0x2d4f6c(0x33c)],_0x2d4f6c(0x33e))?(_0x43064a[_0x2d4f6c(0x236)](_0x2bb1ec[_0x2d4f6c(0x21a)],0x2),_0x529315['on'](_0x2d4f6c(0x19a),_0xa0b77c),_0x45f229[_0x2d4f6c(0x19a)]()):(assert[_0x2d4f6c(0x236)](_0x27c0f1[_0x2d4f6c(0x2d5)],0x191),_0x418026[_0x2d4f6c(0x19a)](_0x2572cd));});}else{const _0x584e8c=new _0x452f7e[(_0x2a214b(0x383))]({'port':0x0,'clientTracking':![]},()=>{const _0x410a7d=_0x2a214b;_0xa44260[_0x410a7d(0x236)](_0x584e8c[_0x410a7d(0x327)],_0x47cf26);const _0x5ef307=new _0x4fb905(_0x410a7d(0x397)+_0x584e8c[_0x410a7d(0x216)]()[_0x410a7d(0x28e)]);_0x5ef307['on'](_0x4b9764[_0x410a7d(0x382)],()=>_0x5ef307[_0x410a7d(0x19a)]());});_0x584e8c['on'](_0x2a214b(0x228),_0x206270=>{const _0x23f889=_0x2a214b;_0x3e5203[_0x23f889(0x236)](_0x584e8c[_0x23f889(0x327)],_0x44603b),_0x206270['on']('close',()=>_0x584e8c[_0x23f889(0x19a)](_0x41dcb7));});}});_0x418026['on'](_0xc80820[_0x1415eb(0x1c0)],()=>{const _0x16f62c=_0x1415eb;_0x2572cd(new Error(_0x394138[_0x16f62c(0x240)]));});}),_0x551c59[_0x447091(0x20a)](it,_0x447091(0x1d2),_0x3ae7df=>{const _0x342ded=_0x447091,_0x342599=new WebSocket['Server']({'verifyClient':(_0x8def52,_0x1c0de1)=>process[_0x342ded(0x1e0)](_0x1c0de1,![],0x194),'port':0x0},()=>{const _0x1153f9=_0x342ded;if(_0xc80820[_0x1153f9(0x225)]('EfNqW',_0xc80820['USfWO']))_0x142778['push'](_0x1e365e);else{const _0x1e2bdc=http[_0x1153f9(0x256)]({'port':_0x342599[_0x1153f9(0x216)]()['port'],'headers':{'Connection':_0x1153f9(0x26a),'Upgrade':_0xc80820['CuXxV'],'Sec-WebSocket-Key':_0xc80820[_0x1153f9(0x33d)],'Sec-WebSocket-Version':0x8}});_0x1e2bdc['on'](_0x1153f9(0x186),_0x2e931b=>{const _0x356a0e=_0x1153f9;assert[_0x356a0e(0x236)](_0x2e931b[_0x356a0e(0x2d5)],0x194),_0x342599[_0x356a0e(0x19a)](_0x3ae7df);});}});_0x342599['on'](_0xc80820['OssRT'],()=>{const _0x599bd4=_0x342ded;_0x3ae7df(new Error(_0xc80820[_0x599bd4(0x1a0)]));});}),_0x551c59[_0x447091(0x223)](it,_0x551c59['FnnCk'],_0x569cf2=>{const _0x51298b=_0x447091,_0x2a2382=new WebSocket[(_0x51298b(0x383))]({'verifyClient':(_0xfc0ee,_0x14794d)=>{const _0x606e46=_0x51298b;process[_0x606e46(0x1e0)](_0x14794d,![],0x1f7,'',{'Retry-After':0x78});},'port':0x0},()=>{const _0x16afeb=_0x51298b,_0xb88796=http[_0x16afeb(0x256)]({'port':_0x2a2382[_0x16afeb(0x216)]()[_0x16afeb(0x28e)],'headers':{'Connection':_0xc80820[_0x16afeb(0x18f)],'Upgrade':_0xc80820[_0x16afeb(0x346)],'Sec-WebSocket-Key':_0xc80820[_0x16afeb(0x33d)],'Sec-WebSocket-Version':0x8}});_0xb88796['on'](_0x16afeb(0x186),_0xd50167=>{const _0x1e532e=_0x16afeb;assert[_0x1e532e(0x236)](_0xd50167[_0x1e532e(0x2d5)],0x1f7),assert[_0x1e532e(0x236)](_0xd50167['headers'][_0x1e532e(0x338)],_0x1e532e(0x1c3)),_0x2a2382['close'](_0x569cf2);});});_0x2a2382['on'](_0xc80820[_0x51298b(0x1c0)],()=>{const _0x37cf44=_0x51298b;_0xc80820[_0x37cf44(0x26e)](_0x569cf2,new Error(_0x37cf44(0x306)));});});}),_0x551c59['NvULx'](it,_0x551c59[_0x3cd8b8(0x2bb)],_0x37d8ba=>{const _0x5f5725=_0x3cd8b8,_0x980e17={'iDMVq':function(_0x5d386d,_0x521ac3){return _0x5d386d!==_0x521ac3;},'rgXoB':_0x5f5725(0x1ac),'ZKHBH':_0x551c59[_0x5f5725(0x1aa)],'CqbRS':_0x551c59[_0x5f5725(0x2ae)],'JQFMp':_0x551c59[_0x5f5725(0x1c7)],'moNNl':_0x551c59['lftqQ']},_0x369dc8=http[_0x5f5725(0x29e)]();_0x369dc8['listen'](0x0,()=>{const _0x24c59c=_0x5f5725,_0xab9dd7={'wOsII':function(_0x4d3f87,_0x2f5471){return _0x4d3f87(_0x2f5471);},'SiULX':_0x24c59c(0x306)},_0x1ec67f=new WebSocket[(_0x24c59c(0x383))]({'verifyClient':({req:{socket:_0xcbd562}},_0x234604)=>{const _0x1d89e5=_0x24c59c;if(_0x980e17[_0x1d89e5(0x2c6)](_0x980e17[_0x1d89e5(0x343)],_0x980e17[_0x1d89e5(0x343)])){_0x5474d6['strictEqual'](_0x1ad98d['clients'][_0x1d89e5(0x2c9)],0x0);const _0x25c58c=new _0x1e340e(_0x1d89e5(0x397)+_0x5185d8[_0x1d89e5(0x216)]()[_0x1d89e5(0x28e)]);_0x25c58c['on'](_0x1d89e5(0x2a1),_0x25c58c[_0x1d89e5(0x19a)]);}else assert[_0x1d89e5(0x236)](_0xcbd562['readable'],!![]),assert[_0x1d89e5(0x236)](_0xcbd562[_0x1d89e5(0x2ff)],!![]),_0xcbd562['on'](_0x980e17[_0x1d89e5(0x3ad)],()=>{const _0x207241=_0x1d89e5;assert[_0x207241(0x236)](_0xcbd562['readable'],![]),assert['strictEqual'](_0xcbd562[_0x207241(0x2ff)],!![]),_0xab9dd7[_0x207241(0x393)](_0x234604,!![]);});},'server':_0x369dc8});_0x1ec67f['on']('connection',()=>{const _0x38d5e0=_0x24c59c;_0xab9dd7[_0x38d5e0(0x393)](_0x37d8ba,new Error(_0xab9dd7[_0x38d5e0(0x1fa)]));});const _0x5bb63d=net[_0x24c59c(0x1d8)]({'port':_0x369dc8[_0x24c59c(0x216)]()[_0x24c59c(0x28e)],'allowHalfOpen':!![]},()=>{const _0x3323a7=_0x24c59c;_0x5bb63d[_0x3323a7(0x25e)]([_0x3323a7(0x1de),_0x980e17[_0x3323a7(0x35a)],_0x980e17['JQFMp'],'Connection:\x20Upgrade',_0x3323a7(0x2c8),_0x980e17['moNNl'],'\x0d\x0a'][_0x3323a7(0x283)]('\x0d\x0a'));});_0x5bb63d['on'](_0x118bbc[_0x24c59c(0x32e)],()=>{const _0x1cc7d8=_0x24c59c;_0x1ec67f[_0x1cc7d8(0x19a)](),_0x369dc8[_0x1cc7d8(0x19a)](_0x37d8ba);});});}),it(_0x551c59['pOXRW'],_0x2b9ce1=>{const _0x56898a=_0x3cd8b8,_0x4a5693={'LaCut':_0x56898a(0x376),'wkRkk':_0x56898a(0x27d)};if(_0x56898a(0x392)==='eebFN'){const _0x329f53=new WebSocket[(_0x56898a(0x383))]({'port':0x0},()=>{const _0x3e2043=_0x56898a,_0x4f05ab=http['request']({'port':_0x329f53['address']()[_0x3e2043(0x28e)],'headers':{'Connection':_0x118bbc['ARWem'],'Upgrade':'websocket','Sec-WebSocket-Key':_0x3e2043(0x273),'Sec-WebSocket-Version':0xd}}),_0x393958=Sender['frame'](Buffer[_0x3e2043(0x2a5)](_0x3e2043(0x376)),{'fin':!![],'rsv1':![],'opcode':0x1,'mask':!![],'readOnly':![]});_0x4f05ab[_0x3e2043(0x21c)](Buffer[_0x3e2043(0x2d1)](_0x393958)),_0x4f05ab[_0x3e2043(0x25e)]();});_0x329f53['on'](_0x56898a(0x228),_0x5e2b5e=>{const _0x1964d6=_0x56898a;_0x5e2b5e['on'](_0x4a5693[_0x1964d6(0x3aa)],(_0x2f7bcd,_0x508edd)=>{const _0x16f35f=_0x1964d6;assert['deepStrictEqual'](_0x2f7bcd,Buffer[_0x16f35f(0x2a5)](_0x4a5693['LaCut'])),assert['ok'](!_0x508edd),_0x329f53['close'](_0x2b9ce1);});});}else{const _0x22a00b={'zhDRN':_0x56898a(0x280),'MBBIu':_0x56898a(0x25e)},_0x2362a1=_0x2670df['get']({'port':_0x3696de[_0x56898a(0x216)]()[_0x56898a(0x28e)],'headers':{'Connection':_0x118bbc[_0x56898a(0x261)],'Upgrade':_0x118bbc[_0x56898a(0x32b)],'Sec-WebSocket-Key':_0x56898a(0x1f9)}});_0x2362a1['on'](_0x118bbc[_0x56898a(0x1f5)],_0x1666cc=>{const _0xd630ff=_0x56898a;_0x51b939[_0xd630ff(0x236)](_0x1666cc[_0xd630ff(0x2d5)],0x190);const _0x2a7e7=[];_0x1666cc['on'](_0x22a00b[_0xd630ff(0x3af)],_0x550bfa=>{const _0x253f4c=_0xd630ff;_0x2a7e7[_0x253f4c(0x227)](_0x550bfa);}),_0x1666cc['on'](_0x22a00b[_0xd630ff(0x1ff)],()=>{const _0x56d94c=_0xd630ff;_0x32c92c[_0x56d94c(0x236)](_0x451b3c[_0x56d94c(0x2d1)](_0x2a7e7)[_0x56d94c(0x354)](),_0x56d94c(0x334)),_0x5c5fdd[_0x56d94c(0x19a)](_0x538269);});});}}),describe(_0x3cd8b8(0x1e4),()=>{const _0xa89774=_0x3cd8b8,_0xc84d86={'mRlWW':function(_0x427127,_0x390c85){const _0x49c0fe=_0x18cc;return _0x551c59[_0x49c0fe(0x1c9)](_0x427127,_0x390c85);},'xJOZR':_0x551c59[_0xa89774(0x241)]};it(_0x551c59[_0xa89774(0x24a)],_0x3c4d15=>{const _0x46a8df=_0xa89774,_0x544c2d=(_0x5d6db1,_0x240a45)=>{const _0x5d3bc1=_0x18cc;return assert['ok'](_0x240a45 instanceof http['IncomingMessage']),assert['strictEqual'](_0x240a45[_0x5d3bc1(0x1ea)],'/'),Array[_0x5d3bc1(0x2a5)](_0x5d6db1)['pop']();},_0x892824=new WebSocket[(_0x46a8df(0x383))]({'handleProtocols':_0x544c2d,'port':0x0},()=>{const _0x4dc175=_0x46a8df;if(_0xc84d86[_0x4dc175(0x364)](_0x4dc175(0x203),_0xc84d86[_0x4dc175(0x318)])){const _0x386341=new WebSocket(_0x4dc175(0x397)+_0x892824[_0x4dc175(0x216)]()[_0x4dc175(0x28e)],['foo',_0x4dc175(0x18d)]);_0x386341['on'](_0x4dc175(0x2a1),()=>{const _0x24b065=_0x4dc175;assert[_0x24b065(0x236)](_0x386341[_0x24b065(0x27f)],_0x24b065(0x18d)),_0x892824[_0x24b065(0x19a)](_0x3c4d15);});}else return _0x3bd125['ok'](_0xb7cdf instanceof _0x2db46f[_0x4dc175(0x284)]),_0x3fccff['strictEqual'](_0x37f177[_0x4dc175(0x1ea)],'/'),_0x15fd92[_0x4dc175(0x2a5)](_0x296a53)['pop']();});_0x892824['on'](_0x46a8df(0x228),_0x2a1427=>{_0x2a1427['close']();});});}),_0x551c59[_0x3cd8b8(0x2e7)](it,_0x3cd8b8(0x1af),_0x56ce31=>{const _0x1fce0e=_0x3cd8b8,_0x35d0fc=new WebSocket['Server']({'port':0x0},()=>{const _0x7ba867=_0x18cc,_0x51cf2c=new WebSocket(_0x7ba867(0x397)+_0x35d0fc[_0x7ba867(0x216)]()[_0x7ba867(0x28e)]+_0x7ba867(0x39b));_0x51cf2c['on'](_0x7ba867(0x2a1),_0x51cf2c[_0x7ba867(0x19a)]);});_0x35d0fc['on'](_0x1fce0e(0x27b),(_0x5bf286,_0x44b2a5)=>{const _0x1f28a4=_0x1fce0e;assert[_0x1f28a4(0x20e)](_0x5bf286[_0x1f28a4(0x23e)](0x0,0x3),[_0x118bbc['YNkOA'],_0x118bbc[_0x1f28a4(0x22f)],_0x1f28a4(0x37a)]),assert['ok'](_0x118bbc[_0x1f28a4(0x35f)](_0x44b2a5,http['IncomingMessage'])),assert[_0x1f28a4(0x236)](_0x44b2a5[_0x1f28a4(0x1ea)],_0x118bbc[_0x1f28a4(0x29f)]),_0x35d0fc['on'](_0x1f28a4(0x228),()=>_0x35d0fc[_0x1f28a4(0x19a)](_0x56ce31));});});}),_0x551c59[_0x38f478(0x2e7)](describe,_0x551c59['gxLWY'],()=>{const _0x16458e=_0x38f478,_0x41c051={'IBWST':_0x551c59[_0x16458e(0x2ca)],'lfbKq':'sec-websocket-extensions','DZtoM':_0x551c59[_0x16458e(0x287)],'GzJqM':_0x551c59[_0x16458e(0x1d7)],'zBhoD':function(_0x5b95d5,_0x401642){const _0x39fed1=_0x16458e;return _0x551c59[_0x39fed1(0x1c9)](_0x5b95d5,_0x401642);}};if(_0x551c59[_0x16458e(0x249)](_0x16458e(0x28a),'sQQmf'))_0x551c59[_0x16458e(0x30a)](it,_0x551c59[_0x16458e(0x17d)],_0x5a5aac=>{const _0x168813=_0x16458e,_0x42a6bb=new WebSocket['Server']({'port':0x0},()=>{const _0x454e21=_0x18cc,_0x1937d9=new WebSocket(_0x454e21(0x397)+_0x42a6bb[_0x454e21(0x216)]()[_0x454e21(0x28e)]);_0x1937d9['on'](_0x41c051[_0x454e21(0x2cc)],_0x1937d9[_0x454e21(0x19a)]);});_0x42a6bb['on'](_0x168813(0x228),(_0xd457ff,_0x45bd11)=>{const _0x435e90=_0x168813;assert[_0x435e90(0x236)](_0x45bd11[_0x435e90(0x27b)][_0x41c051[_0x435e90(0x267)]],_0x41c051[_0x435e90(0x2d9)]),assert[_0x435e90(0x236)](_0xd457ff[_0x435e90(0x3a6)],''),_0x42a6bb[_0x435e90(0x19a)](_0x5a5aac);});}),it(_0x551c59[_0x16458e(0x1fd)],_0x27d24d=>{const _0x3540e7=_0x16458e,_0x49a174=new WebSocket[(_0x3540e7(0x383))]({'perMessageDeflate':{'clientMaxWindowBits':0x8},'port':0x0},()=>{const _0x1ff9f6=_0x3540e7,_0x5c1f6a={'oiWWe':_0x41c051[_0x1ff9f6(0x21e)],'YIKKG':function(_0x25dc43,_0x109b74){const _0xd9f263=_0x1ff9f6;return _0x41c051[_0xd9f263(0x381)](_0x25dc43,_0x109b74);},'xkLho':_0x1ff9f6(0x275),'BTqbR':_0x1ff9f6(0x32c)},_0x3f4999=new WebSocket('ws://localhost:'+_0x49a174[_0x1ff9f6(0x216)]()[_0x1ff9f6(0x28e)]);_0x3f4999['on'](_0x1ff9f6(0x355),_0x3a888f=>{const _0x400e70=_0x1ff9f6,_0x218395={'CHhbT':_0x5c1f6a[_0x400e70(0x36e)]};if(_0x5c1f6a['YIKKG'](_0x5c1f6a['xkLho'],_0x5c1f6a['xkLho']))assert[_0x400e70(0x236)](_0x3a888f['headers'][_0x400e70(0x3a3)],_0x5c1f6a['BTqbR']),_0x49a174['close'](_0x27d24d);else return _0x218395[_0x400e70(0x2d7)];});});_0x49a174['on'](_0x3540e7(0x228),_0x231fcb=>{const _0x34f3d2=_0x3540e7;_0x231fcb[_0x34f3d2(0x19a)]();});});else{const _0x406668=new _0x1acb28['Server']({'port':0x0},()=>{const _0x2ca0a4=_0x16458e;_0xf411d1['strictEqual'](_0x406668[_0x2ca0a4(0x31e)][_0x2ca0a4(0x216)]()[_0x2ca0a4(0x216)],'::'),_0x406668[_0x2ca0a4(0x19a)](_0x430379);});}});});