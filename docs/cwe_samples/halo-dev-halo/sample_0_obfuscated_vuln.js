const _0x48116e=_0x4774;(function(_0x37a4b1,_0x14e9e7){const _0x26974a=_0x4774,_0xec05ba=_0x37a4b1();while(!![]){try{const _0x54728a=parseInt(_0x26974a(0x1dc))/0x1*(-parseInt(_0x26974a(0x1b0))/0x2)+parseInt(_0x26974a(0x1b5))/0x3*(parseInt(_0x26974a(0x1f6))/0x4)+-parseInt(_0x26974a(0x1da))/0x5*(parseInt(_0x26974a(0x1f3))/0x6)+-parseInt(_0x26974a(0x1e6))/0x7+-parseInt(_0x26974a(0x1b1))/0x8+-parseInt(_0x26974a(0x204))/0x9+parseInt(_0x26974a(0x1ba))/0xa;if(_0x54728a===_0x14e9e7)break;else _0xec05ba['push'](_0xec05ba['shift']());}catch(_0x4af523){_0xec05ba['push'](_0xec05ba['shift']());}}}(_0xa734,0x7828c));import{dom,qs$}from'./dom.js';import{i18n$}from'./i18n.js';const reComment=/^\s*#\s*/;function directiveFromLine(_0x4a5232){const _0x2c848f=_0x4774,_0x159dcc={'PFRpi':function(_0x2f5ec2,_0x310bf6){return _0x2f5ec2===_0x310bf6;},'tkhSu':function(_0x5af63a,_0x1d4ceb){return _0x5af63a+_0x1d4ceb;}},_0x323729=reComment['exec'](_0x4a5232);return _0x159dcc[_0x2c848f(0x1ec)](_0x323729,null)?_0x4a5232[_0x2c848f(0x1d8)]():_0x4a5232[_0x2c848f(0x1c1)](_0x159dcc['tkhSu'](_0x323729[_0x2c848f(0x1b9)],_0x323729[0x0][_0x2c848f(0x1ea)]))[_0x2c848f(0x1d8)]();}CodeMirror[_0x48116e(0x1c0)]('ubo-whitelist-directives',function(){const _0x237420=_0x48116e,_0x3639db={'ZCoPv':'error','jBiuR':function(_0x11b323,_0x489a91){return _0x11b323===_0x489a91;},'ILHnr':function(_0x28cd58,_0x2496df){return _0x28cd58===_0x2496df;},'yWLLw':_0x237420(0x1bc),'OrVaC':function(_0x4b6481,_0x33bec1){return _0x4b6481===_0x33bec1;},'FqzQL':'keyword'},_0xeca9b8=/^\/.+\/$/;return{'token':function _0x1787b2(_0x925dd8){const _0x18b610=_0x237420,_0xed92f3={'GOitv':_0x3639db[_0x18b610(0x1fd)]},_0xc68cf=_0x925dd8[_0x18b610(0x1d3)][_0x18b610(0x1d8)]();_0x925dd8[_0x18b610(0x1de)]();if(_0x3639db[_0x18b610(0x1af)](reBadHostname,undefined))return null;if(reComment[_0x18b610(0x1d7)](_0xc68cf))return _0x18b610(0x1a5)===_0x18b610(0x1a5)?_0x18b610(0x1ee):'keyword';if(_0x3639db[_0x18b610(0x1f9)](_0xc68cf[_0x18b610(0x201)]('/'),-0x1)){if(reBadHostname['test'](_0xc68cf))return _0x18b610(0x1f7);if(whitelistDefaultSet[_0x18b610(0x1e0)](_0xc68cf['trim']()))return _0x3639db[_0x18b610(0x1b3)]===_0x3639db[_0x18b610(0x1b3)]?_0x18b610(0x1d9):_0xed92f3['GOitv'];return null;}if(_0xeca9b8[_0x18b610(0x1d7)](_0xc68cf)){try{new RegExp(_0xc68cf[_0x18b610(0x1c1)](0x1,-0x1));}catch{return _0x3639db[_0x18b610(0x1fd)];}return null;}if(_0x3639db['OrVaC'](reHostnameExtractor['test'](_0xc68cf),![]))return'error';if(whitelistDefaultSet['has'](_0xc68cf[_0x18b610(0x1d8)]()))return _0x3639db[_0x18b610(0x1c9)];return null;}};});function _0x4774(_0x159113,_0x248630){const _0xa73494=_0xa734();return _0x4774=function(_0x477439,_0x56e4f9){_0x477439=_0x477439-0x1a1;let _0x28f480=_0xa73494[_0x477439];return _0x28f480;},_0x4774(_0x159113,_0x248630);}let reBadHostname,reHostnameExtractor,whitelistDefaultSet=new Set();const messaging=vAPI[_0x48116e(0x1eb)],noopFunc=function(){};function _0xa734(){const _0xa25560=['74WCTcZH','4733328kTgaDE','result','yWLLw','name','30549NOCquw','click','jWNfg','XKimQ','index','22683900dbHiau','AgUiS','nignK','change','changes','setWhitelist','defineMode','slice','from','#whitelistRevert','readAsText','wikilink','HisQv','disabled','azNLS','FqzQL','JybXF','dateNowToSensibleString','value','whitelist','#whitelist','DtRqh','mergeNewLines','VPqvu','dyhVj','string','size','load','text','test','trim','keyword','5RatsKo','type','16482HVnzYi','FMjjg','skipToEnd','dashboard','has','download','replace','IFJaq','bAGMl','mnTfg','2704198kvOxOb','map','ieuEG','whitelistExportFilename','length','messaging','PFRpi','onPull','comment','#importFilePicker','#whitelistApply','join','reHostnameExtractor','2353002sFXHuN','TWzBM','EEtLr','100KQTEhi','error','save','ILHnr','SqsCp','patchCodeMirrorEditor','CUfsh','ZCoPv','send','mWnYf','setValue','indexOf','reBadHostname','cloud','457308NUseGh','#importWhitelistFromFile','CJQXZ','onPush','KnPfm','rHOju','Pnuad','sqynw','data:text/plain;charset=utf-8,','push','dLJvu','getWhitelist','.cm-error','tSjsC','vMgsQ','delete','jBiuR'];_0xa734=function(){return _0xa25560;};return _0xa734();}let cachedWhitelist='';const cmEditor=new CodeMirror(qs$(_0x48116e(0x1ce)),{'autofocus':!![],'lineNumbers':!![],'lineWrapping':!![],'styleActiveLine':!![]});uBlockDashboard[_0x48116e(0x1fb)](cmEditor);function getEditorText(){const _0x1f1cc7=_0x48116e,_0x563f08={'ASyzQ':function(_0x267b0e,_0x1f5955){return _0x267b0e+_0x1f5955;}};let _0x46fdbf=cmEditor['getValue']()[_0x1f1cc7(0x1e2)](/\s+$/,'');return _0x46fdbf===''?_0x46fdbf:_0x563f08['ASyzQ'](_0x46fdbf,'\x0a');}function setEditorText(_0x5ea173){const _0x365050=_0x48116e,_0x1f5b8b={'vMgsQ':function(_0xc276f7,_0x5a51b2){return _0xc276f7+_0x5a51b2;}};cmEditor[_0x365050(0x200)](_0x1f5b8b[_0x365050(0x1ad)](_0x5ea173[_0x365050(0x1e2)](/\s+$/,''),'\x0a'));}function whitelistChanged(){const _0x4648a9=_0x48116e,_0x525db3={'AgUiS':function(_0x5840a3,_0x52aa74){return _0x5840a3(_0x52aa74);},'IFJaq':function(_0x21e06f,_0xb240f7,_0x1831b3){return _0x21e06f(_0xb240f7,_0x1831b3);},'XKimQ':_0x4648a9(0x1ab),'SmJve':function(_0x3ae931){return _0x3ae931();},'KnPfm':function(_0xf22c05,_0x5574bb){return _0xf22c05!==_0x5574bb;},'QShwV':_0x4648a9(0x1f0),'HisQv':function(_0x16ffc8,_0x146673){return _0x16ffc8||_0x146673;},'dLJvu':_0x4648a9(0x1c3)},_0x315e7f=_0x525db3[_0x4648a9(0x1bb)](qs$,_0x4648a9(0x1ce)),_0x2b95d2=_0x525db3[_0x4648a9(0x1e3)](qs$,_0x315e7f,_0x525db3[_0x4648a9(0x1b8)])!==null,_0x2ef985=_0x525db3['SmJve'](getEditorText)['trim'](),_0x725ffa=_0x525db3[_0x4648a9(0x1a3)](_0x2ef985,cachedWhitelist);qs$(_0x525db3['QShwV'])['disabled']=_0x525db3[_0x4648a9(0x1c6)](!_0x725ffa,_0x2b95d2),qs$(_0x525db3[_0x4648a9(0x1a9)])[_0x4648a9(0x1c7)]=!_0x725ffa,CodeMirror['commands'][_0x4648a9(0x1f8)]=_0x725ffa&&!_0x2b95d2?applyChanges:noopFunc;}cmEditor['on'](_0x48116e(0x1be),whitelistChanged);async function renderWhitelist(){const _0x2f427d=_0x48116e,_0x1fb1e6={'oXXHc':_0x2f427d(0x1d5),'aFYnk':function(_0x19bb42){return _0x19bb42();},'iXlze':function(_0x4c63f5,_0x5deb76){return _0x4c63f5(_0x5deb76);},'ieuEG':function(_0x2e5586,_0x4d123e){return _0x2e5586===_0x4d123e;},'mnTfg':function(_0x355818,_0x44efdb){return _0x355818===_0x44efdb;},'rHOju':_0x2f427d(0x1a6),'tSjsC':function(_0x506557,_0x324d6d){return _0x506557(_0x324d6d);},'VPqvu':function(_0x3bc938,_0x3aad97){return _0x3bc938===_0x3aad97;},'CUfsh':function(_0x3290f6,_0x172e79){return _0x3290f6!==_0x172e79;}},_0x35c0ea=await messaging[_0x2f427d(0x1fe)]('dashboard',{'what':_0x2f427d(0x1aa)}),_0x4f50d7=_0x1fb1e6[_0x2f427d(0x1e8)](reBadHostname,undefined);if(_0x4f50d7){if(_0x1fb1e6[_0x2f427d(0x1e5)](_0x1fb1e6[_0x2f427d(0x1a4)],_0x2f427d(0x1d2))){if(_0x34dc6c[_0x2f427d(0x1db)]!==_0x1fb1e6['oXXHc'])return;const _0x530609=_0x1da5c2[_0x2f427d(0x1d0)](_0x1fb1e6['aFYnk'](_0x108a80)[_0x2f427d(0x1d8)](),_0x140329[_0x2f427d(0x1b2)][_0x2f427d(0x1d8)]());_0x17d6d1(_0x530609);}else reBadHostname=new RegExp(_0x35c0ea[_0x2f427d(0x202)]),reHostnameExtractor=new RegExp(_0x35c0ea[_0x2f427d(0x1f2)]),whitelistDefaultSet=new Set(_0x35c0ea['whitelistDefault']);}const _0x1139d6=new Set(whitelistDefaultSet);for(const _0x5af73f of _0x35c0ea[_0x2f427d(0x1cd)]){const _0x3a5cd2=_0x1fb1e6[_0x2f427d(0x1ac)](directiveFromLine,_0x5af73f);if(_0x1fb1e6[_0x2f427d(0x1d1)](whitelistDefaultSet[_0x2f427d(0x1e0)](_0x3a5cd2),![]))continue;_0x1139d6[_0x2f427d(0x1ae)](_0x3a5cd2);if(_0x1139d6[_0x2f427d(0x1d4)]===0x0)break;}_0x1fb1e6[_0x2f427d(0x1fc)](_0x1139d6[_0x2f427d(0x1d4)],0x0)&&_0x35c0ea[_0x2f427d(0x1cd)][_0x2f427d(0x1a8)](...Array[_0x2f427d(0x1c2)](_0x1139d6)[_0x2f427d(0x1e7)](_0x31d01c=>'#\x20'+_0x31d01c));_0x35c0ea[_0x2f427d(0x1cd)]['sort']((_0x568775,_0x42e293)=>{const _0x2effcd=_0x2f427d,_0x4e9109=_0x1fb1e6['iXlze'](directiveFromLine,_0x568775),_0x167fff=directiveFromLine(_0x42e293),_0x2b08bf=whitelistDefaultSet[_0x2effcd(0x1e0)](_0x4e9109);if(_0x2b08bf!==whitelistDefaultSet[_0x2effcd(0x1e0)](_0x167fff))return _0x2b08bf?-0x1:0x1;return _0x4e9109['localeCompare'](_0x167fff);});const _0x399a32=_0x35c0ea['whitelist'][_0x2f427d(0x1f1)]('\x0a')[_0x2f427d(0x1d8)]();cachedWhitelist=_0x399a32,setEditorText(_0x399a32),_0x4f50d7&&cmEditor['clearHistory']();}function handleImportFilePicker(){const _0x39dc2f=_0x48116e,_0x95125d={'SqsCp':function(_0x49375c,_0x398861){return _0x49375c!==_0x398861;},'TWzBM':function(_0x36d55d){return _0x36d55d();},'bAGMl':function(_0x3169c2,_0x40fd15){return _0x3169c2(_0x40fd15);},'JybXF':function(_0x508337,_0x25b8d6){return _0x508337!==_0x25b8d6;}},_0x4e5858=this['files'][0x0];if(_0x4e5858===undefined||_0x4e5858[_0x39dc2f(0x1b4)]==='')return;if(_0x95125d[_0x39dc2f(0x1ca)](_0x4e5858['type']['indexOf'](_0x39dc2f(0x1d6)),0x0))return;const _0x3ef347=new FileReader();_0x3ef347['onload']=_0x13caad=>{const _0x5725e6=_0x39dc2f;if(_0x95125d[_0x5725e6(0x1fa)](_0x13caad[_0x5725e6(0x1db)],_0x5725e6(0x1d5)))return;const _0x2ed396=uBlockDashboard[_0x5725e6(0x1d0)](_0x95125d[_0x5725e6(0x1f4)](getEditorText)['trim'](),_0x3ef347[_0x5725e6(0x1b2)][_0x5725e6(0x1d8)]());_0x95125d[_0x5725e6(0x1e4)](setEditorText,_0x2ed396);},_0x3ef347[_0x39dc2f(0x1c4)](_0x4e5858);}function startImportFilePicker(){const _0x22e008=_0x48116e,_0x17b790={'MFAXD':function(_0x3d551a,_0x18673b){return _0x3d551a(_0x18673b);},'FMjjg':_0x22e008(0x1ef)},_0x42ade7=_0x17b790['MFAXD'](qs$,_0x17b790[_0x22e008(0x1dd)]);_0x42ade7[_0x22e008(0x1cc)]='',_0x42ade7['click']();}function exportWhitelistToFile(){const _0x247ce0=_0x48116e,_0x3c4215={'oReln':function(_0x27d204){return _0x27d204();},'DtRqh':_0x247ce0(0x1e9),'EEtLr':function(_0x529082,_0x3be9e9){return _0x529082(_0x3be9e9);},'mWnYf':function(_0x39aaad,_0x393188){return _0x39aaad+_0x393188;}},_0x1b8532=_0x3c4215['oReln'](getEditorText);if(_0x1b8532==='')return;const _0x28003b=i18n$(_0x3c4215[_0x247ce0(0x1cf)])[_0x247ce0(0x1e2)]('{{datetime}}',uBlockDashboard[_0x247ce0(0x1cb)]())[_0x247ce0(0x1e2)](/ +/g,'_');vAPI[_0x247ce0(0x1e1)]({'url':_0x247ce0(0x1a7)+_0x3c4215[_0x247ce0(0x1f5)](encodeURIComponent,_0x3c4215[_0x247ce0(0x1ff)](_0x1b8532,'\x0a')),'filename':_0x28003b});}async function applyChanges(){const _0x11d39a=_0x48116e,_0x5cd223={'azNLS':function(_0x3c6bf7){return _0x3c6bf7();}};cachedWhitelist=_0x5cd223[_0x11d39a(0x1c8)](getEditorText)[_0x11d39a(0x1d8)](),await messaging[_0x11d39a(0x1fe)](_0x11d39a(0x1df),{'what':_0x11d39a(0x1bf),'whitelist':cachedWhitelist}),renderWhitelist();}function revertChanges(){setEditorText(cachedWhitelist);}function getCloudData(){const _0x5643ff=_0x48116e,_0x5417de={'CJQXZ':function(_0x4a3fe6){return _0x4a3fe6();}};return _0x5417de[_0x5643ff(0x1a1)](getEditorText);}function setCloudData(_0x4a69b7,_0x3f6c8c){const _0x5533c8=_0x48116e,_0x51b4dc={'jWNfg':function(_0x5d0fdb,_0x317b9d){return _0x5d0fdb(_0x317b9d);}};if(typeof _0x4a69b7!==_0x5533c8(0x1d3))return;_0x3f6c8c&&(_0x4a69b7=uBlockDashboard[_0x5533c8(0x1d0)](getEditorText()['trim'](),_0x4a69b7)),_0x51b4dc[_0x5533c8(0x1b7)](setEditorText,_0x4a69b7['trim']());}self[_0x48116e(0x203)][_0x48116e(0x1a2)]=getCloudData,self['cloud'][_0x48116e(0x1ed)]=setCloudData,self[_0x48116e(0x1c5)]='https://github.com/gorhill/uBlock/wiki/Dashboard:-Trusted-sites',self['hasUnsavedData']=function(){const _0x334612=_0x48116e;return getEditorText()[_0x334612(0x1d8)]()!==cachedWhitelist;},dom['on'](_0x48116e(0x205),_0x48116e(0x1b6),startImportFilePicker),dom['on'](_0x48116e(0x1ef),_0x48116e(0x1bd),handleImportFilePicker),dom['on']('#exportWhitelistToFile',_0x48116e(0x1b6),exportWhitelistToFile),dom['on'](_0x48116e(0x1f0),_0x48116e(0x1b6),()=>{applyChanges();}),dom['on']('#whitelistRevert','click',revertChanges),renderWhitelist();