(function(_0x5cfe31,_0x437e72){const _0xc33b4d=_0x1ab1,_0x346a6f=_0x5cfe31();while(!![]){try{const _0x48072a=-parseInt(_0xc33b4d(0x114))/0x1*(-parseInt(_0xc33b4d(0x117))/0x2)+-parseInt(_0xc33b4d(0x12d))/0x3+-parseInt(_0xc33b4d(0x122))/0x4+-parseInt(_0xc33b4d(0x118))/0x5*(parseInt(_0xc33b4d(0x120))/0x6)+-parseInt(_0xc33b4d(0x10e))/0x7+parseInt(_0xc33b4d(0x106))/0x8*(-parseInt(_0xc33b4d(0x128))/0x9)+parseInt(_0xc33b4d(0x11e))/0xa*(parseInt(_0xc33b4d(0xf8))/0xb);if(_0x48072a===_0x437e72)break;else _0x346a6f['push'](_0x346a6f['shift']());}catch(_0x2bcfd6){_0x346a6f['push'](_0x346a6f['shift']());}}}(_0x1a4b,0xe561b));import{PubNubError,createValidationError}from'../../components/endpoint';const sendFile=function({generateUploadUrl:_0x481723,publishFile:_0x4208e6,modules:{PubNubFile:_0x1b4443,config:_0x5726d1,cryptography:_0x3cfc5d,networking:_0x4ff527}}){const _0x44b84f=_0x1ab1,_0x4760eb={'emcBj':function(_0x56fec2,_0x4dc3ef){return _0x56fec2===_0x4dc3ef;},'bNGVm':'Content-Type','YCman':_0x44b84f(0x103),'DMnIX':function(_0x37fc6c,_0x12725b){return _0x37fc6c(_0x12725b);},'cWBxx':function(_0x46995b,_0x2d12cb){return _0x46995b(_0x2d12cb);},'ZPEce':function(_0x518bd7,_0x5198f5){return _0x518bd7===_0x5198f5;},'BclwB':_0x44b84f(0x121),'fxbCz':_0x44b84f(0x115),'onVek':function(_0x1b0b44,_0x5e5eee){return _0x1b0b44!==_0x5e5eee;},'JyIae':_0x44b84f(0x109),'jdyUP':function(_0x2eca98,_0x417edf){return _0x2eca98>_0x417edf;},'sxvgL':_0x44b84f(0xff)};return async({channel:_0xcb7a0,file:_0x57e329,message:_0x1872ad,cipherKey:_0x2feddd,meta:_0xeccad,ttl:_0x96edb,storeInHistory:_0x16f73d})=>{const _0x18199d=_0x44b84f,_0xb79095={'qUWgq':'Upload\x20to\x20bucket\x20failed.','etBxw':function(_0x45f03c,_0x3380aa){const _0x1bde60=_0x1ab1;return _0x4760eb[_0x1bde60(0x11a)](_0x45f03c,_0x3380aa);},'muCOp':_0x4760eb[_0x18199d(0xf7)]};if(!_0xcb7a0)throw new PubNubError(_0x4760eb[_0x18199d(0x10f)],_0x4760eb[_0x18199d(0x116)](createValidationError,_0x18199d(0x11d)));if(!_0x57e329)throw new PubNubError(_0x4760eb['YCman'],_0x4760eb[_0x18199d(0x105)](createValidationError,_0x18199d(0x129)));let _0x1dd04e=_0x1b4443[_0x18199d(0x12f)](_0x57e329);const {file_upload_request:{url:_0x5ecf1b,form_fields:_0x3605c3},data:{id:_0x4614d7,name:_0x50dd54}}=await _0x4760eb[_0x18199d(0x105)](_0x481723,{'channel':_0xcb7a0,'name':_0x1dd04e[_0x18199d(0x100)]});if(_0x1b4443[_0x18199d(0x119)]&&(_0x2feddd??_0x5726d1[_0x18199d(0xfc)])){if(_0x4760eb[_0x18199d(0x10a)](_0x18199d(0x11f),'CtXWW'))throw new _0x191b5b(_0xb79095['qUWgq'],_0x4330af);else _0x1dd04e=await _0x3cfc5d['encryptFile'](_0x2feddd??_0x5726d1[_0x18199d(0xfc)],_0x1dd04e,_0x1b4443);}let _0x476ba8=_0x3605c3;_0x1dd04e['mimeType']&&(_0x476ba8=_0x3605c3[_0x18199d(0x104)](_0x4a361b=>{const _0x32972f=_0x18199d;if(_0xb79095['etBxw'](_0x4a361b['key'],_0xb79095['muCOp']))return{'key':_0x4a361b[_0x32972f(0x12e)],'value':_0x1dd04e['mimeType']};return _0x4a361b;}));let _0x4a15fb;try{if(_0x1b4443[_0x18199d(0x12b)]&&_0x57e329[_0x18199d(0x124)])_0x4a15fb=await _0x4ff527['POSTFILE'](_0x5ecf1b,_0x476ba8,await _0x1dd04e[_0x18199d(0x102)]());else{if(_0x1b4443[_0x18199d(0xfe)])_0x4a15fb=await _0x4ff527[_0x18199d(0x11c)](_0x5ecf1b,_0x476ba8,await _0x1dd04e[_0x18199d(0x112)]());else{if(_0x1b4443[_0x18199d(0xfa)])_0x4a15fb=await _0x4ff527[_0x18199d(0x11c)](_0x5ecf1b,_0x476ba8,await _0x1dd04e['toBuffer']());else{if(_0x1b4443['supportsBlob'])_0x4a15fb=await _0x4ff527[_0x18199d(0x11c)](_0x5ecf1b,_0x476ba8,await _0x1dd04e[_0x18199d(0x108)]());else throw new Error(_0x4760eb[_0x18199d(0x12a)]);}}}}catch(_0x292a1b){if(_0x292a1b[_0x18199d(0xfb)]&&typeof _0x292a1b[_0x18199d(0xfb)]['text']===_0x4760eb[_0x18199d(0x126)]){const _0x25e5f0=_0x292a1b[_0x18199d(0xfb)][_0x18199d(0x127)],_0x1477f4=/<Message>(.*)<\/Message>/gi['exec'](_0x25e5f0);throw new PubNubError(_0x1477f4?_0x18199d(0x11b)+_0x1477f4[0x1]:_0x18199d(0x10d),_0x292a1b);}else throw new PubNubError('Upload\x20to\x20bucket\x20failed.',_0x292a1b);}if(_0x4760eb[_0x18199d(0x111)](_0x4a15fb[_0x18199d(0x12c)],0xcc))throw new PubNubError(_0x4760eb[_0x18199d(0x113)],_0x4a15fb);let _0x111cf0=_0x5726d1[_0x18199d(0x110)],_0x125ed7=![],_0x238459={'timetoken':'0'};do{try{_0x238459=await _0x4208e6({'channel':_0xcb7a0,'message':_0x1872ad,'fileId':_0x4614d7,'fileName':_0x50dd54,'meta':_0xeccad,'storeInHistory':_0x16f73d,'ttl':_0x96edb}),_0x125ed7=!![];}catch(_0x436b91){_0x111cf0-=0x1;}}while(!_0x125ed7&&_0x4760eb[_0x18199d(0x123)](_0x111cf0,0x0));if(!_0x125ed7){if(_0x4760eb[_0x18199d(0xf9)]!==_0x4760eb['sxvgL'])return{'timetoken':_0x16afdf['timetoken'],'id':_0x4ad19d,'name':_0x9c1857};else throw new PubNubError(_0x18199d(0x107),{'channel':_0xcb7a0,'id':_0x4614d7,'name':_0x50dd54});}else return{'timetoken':_0x238459[_0x18199d(0x125)],'id':_0x4614d7,'name':_0x50dd54};};};export default _0x1f0e8e=>{const _0x79f810={'YfLQn':function(_0x12d09e,_0x1e3651){return _0x12d09e===_0x1e3651;}},_0x14493c=sendFile(_0x1f0e8e);return(_0x27b84a,_0x4d71f3)=>{const _0x38b3fe=_0x1ab1,_0x4f908e=_0x14493c(_0x27b84a);if(_0x79f810[_0x38b3fe(0x10c)](typeof _0x4d71f3,_0x38b3fe(0x10b)))return _0x4f908e[_0x38b3fe(0x101)](_0x57c002=>_0x4d71f3(null,_0x57c002))[_0x38b3fe(0xfd)](_0x54d01a=>_0x4d71f3(_0x54d01a,null)),_0x4f908e;return _0x4f908e;};};function _0x1ab1(_0x317aa3,_0xf9b947){const _0x1a4b93=_0x1a4b();return _0x1ab1=function(_0x1ab1e0,_0x3f9276){_0x1ab1e0=_0x1ab1e0-0xf7;let _0x2605d6=_0x1a4b93[_0x1ab1e0];return _0x2605d6;},_0x1ab1(_0x317aa3,_0xf9b947);}function _0x1a4b(){const _0x53fd86=['8470640RboWNd','Publish\x20failed.\x20You\x20may\x20want\x20to\x20execute\x20that\x20operation\x20manually\x20using\x20pubnub.publishFile','toBlob','Upload\x20to\x20bucket\x20was\x20unsuccessful','ZPEce','function','YfLQn','Upload\x20to\x20bucket\x20failed.','3816778dNAIDz','YCman','fileUploadPublishRetryLimit','onVek','toFile','JyIae','7iJoMIQ','string','DMnIX','479068coWbur','10CRlDTR','supportsEncryptFile','emcBj','Upload\x20to\x20bucket\x20failed:\x20','POSTFILE','channel\x20can\x27t\x20be\x20empty','40BDcEwz','sBOuW','266142OGkvrS','Unsupported\x20environment','6994056yabjlE','jdyUP','uri','timetoken','fxbCz','text','9gTakbd','file\x20can\x27t\x20be\x20empty','BclwB','supportsFileUri','status','2126301rCXSWN','key','create','bNGVm','9385442QIqoAG','sxvgL','supportsBuffer','response','cipherKey','catch','supportsFile','yIJaD','name','then','toFileUri','Validation\x20failed,\x20check\x20status\x20for\x20details','map','cWBxx'];_0x1a4b=function(){return _0x53fd86;};return _0x1a4b();}