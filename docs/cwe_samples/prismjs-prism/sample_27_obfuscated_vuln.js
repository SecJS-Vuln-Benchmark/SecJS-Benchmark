'use strict';const _0x209e57=_0x330a;(function(_0x4aac45,_0x22f2ac){const _0x92b68d=_0x330a,_0x1a8d14=_0x4aac45();while(!![]){try{const _0x4ebe4b=-parseInt(_0x92b68d(0x18c))/0x1+parseInt(_0x92b68d(0x1d0))/0x2+parseInt(_0x92b68d(0x194))/0x3+-parseInt(_0x92b68d(0x1ad))/0x4*(-parseInt(_0x92b68d(0x184))/0x5)+-parseInt(_0x92b68d(0x1d9))/0x6*(parseInt(_0x92b68d(0x188))/0x7)+-parseInt(_0x92b68d(0x1d4))/0x8*(-parseInt(_0x92b68d(0x1ab))/0x9)+-parseInt(_0x92b68d(0x1b5))/0xa;if(_0x4ebe4b===_0x22f2ac)break;else _0x1a8d14['push'](_0x1a8d14['shift']());}catch(_0x57e79e){_0x1a8d14['push'](_0x1a8d14['shift']());}}}(_0x1460,0xc952e));const nconf=require(_0x209e57(0x1b9)),fs=require('fs'),url=require(_0x209e57(0x1c2)),path=require(_0x209e57(0x1ae)),{fork}=require(_0x209e57(0x18a)),logrotate=require(_0x209e57(0x1a7)),mkdirp=require(_0x209e57(0x187)),file=require(_0x209e57(0x1be)),pkg=require(_0x209e57(0x186)),pathToConfig=path[_0x209e57(0x1ce)](__dirname,process[_0x209e57(0x197)]['CONFIG']||'config.json');function _0x330a(_0x1c8820,_0x286dd5){const _0x1460d2=_0x1460();return _0x330a=function(_0x330a8e,_0x1c3e38){_0x330a8e=_0x330a8e-0x16b;let _0x46094b=_0x1460d2[_0x330a8e];return _0x46094b;},_0x330a(_0x1c8820,_0x286dd5);}nconf[_0x209e57(0x1ac)]()[_0x209e57(0x197)]()['file']({'file':pathToConfig});const pidFilePath=path[_0x209e57(0x1dd)](__dirname,_0x209e57(0x1bd)),outputLogFilePath=path[_0x209e57(0x1dd)](__dirname,nconf['get']('logFile')||_0x209e57(0x19b)),logDir=path[_0x209e57(0x181)](outputLogFilePath);!fs[_0x209e57(0x1c4)](logDir)&&mkdirp['sync'](path[_0x209e57(0x181)](outputLogFilePath));const output=logrotate({'file':outputLogFilePath,'size':'1m','keep':0x3,'compress':!![]}),silent=nconf[_0x209e57(0x192)](_0x209e57(0x1c9))===_0x209e57(0x1e3)?![]:nconf[_0x209e57(0x192)](_0x209e57(0x1c9))!==![];let numProcs;const workers=[],Loader={},appPath=path[_0x209e57(0x1dd)](__dirname,_0x209e57(0x190));Loader[_0x209e57(0x17a)]=function(){const _0x75ccf1=_0x209e57;silent&&(console[_0x75ccf1(0x191)]=(..._0x255856)=>{const _0x177214=_0x75ccf1;output['write'](_0x255856[_0x177214(0x1dd)]('\x20')+'\x0a');}),process['on'](_0x75ccf1(0x1a1),Loader[_0x75ccf1(0x1cb)]),process['on'](_0x75ccf1(0x1e2),Loader[_0x75ccf1(0x196)]);},Loader[_0x209e57(0x1df)]=function(){const _0x46115=_0x209e57,_0x59d82d={'GBQVj':'This\x20program\x20comes\x20with\x20ABSOLUTELY\x20NO\x20WARRANTY.','OhCfp':'This\x20is\x20free\x20software,\x20and\x20you\x20are\x20welcome\x20to\x20redistribute\x20it\x20under\x20certain\x20conditions.'};console[_0x46115(0x191)](''),console[_0x46115(0x191)](_0x46115(0x1da)+pkg['version']+_0x46115(0x17b)+new Date()['getFullYear']()+_0x46115(0x1e5)),console[_0x46115(0x191)](_0x59d82d[_0x46115(0x1b0)]),console['log'](_0x59d82d[_0x46115(0x185)]),console[_0x46115(0x191)](_0x46115(0x179)),console['log']('');},Loader[_0x209e57(0x178)]=function(_0x20eb78){const _0x4267f3=_0x209e57,_0x56459d={'gtlhH':function(_0x2bd776,_0x4b2deb){return _0x2bd776===_0x4b2deb;},'qqdEM':function(_0x1d734f,_0x3cf13e){return _0x1d734f>_0x3cf13e;},'NyRiv':function(_0x3ea33f,_0x326014){return _0x3ea33f(_0x326014);},'cxyPE':'zjsgC','IruHK':function(_0x58e095,_0x42010c){return _0x58e095!==_0x42010c;},'kGrqv':_0x4267f3(0x17e)};_0x20eb78['on'](_0x4267f3(0x199),(_0xa802f1,_0x27794b)=>{const _0x59679c=_0x4267f3;console[_0x59679c(0x191)]('[cluster]\x20Child\x20Process\x20('+_0x20eb78['pid']+_0x59679c(0x1a4)+_0xa802f1+_0x59679c(0x1ca)+_0x27794b+')'),!(_0x20eb78['suicide']||_0x56459d['gtlhH'](_0xa802f1,0x0))&&(console[_0x59679c(0x191)](_0x59679c(0x183)),forkWorker(_0x20eb78['index'],_0x20eb78[_0x59679c(0x1a0)]));}),_0x20eb78['on'](_0x4267f3(0x1b2),_0x11c444=>{const _0x2c18c8=_0x4267f3,_0x2e13e3={'tLUrg':function(_0x294b92,_0x41f3aa){const _0x106a1b=_0x330a;return _0x56459d[_0x106a1b(0x1cd)](_0x294b92,_0x41f3aa);}};if(_0x56459d['IruHK'](_0x2c18c8(0x1b8),_0x2c18c8(0x1b8))){const _0x1ebc99=_0x594e3c(),_0x23b226=[];if(!_0x1ebc99[_0x2ab6b9])return _0x517685[_0x2c18c8(0x191)](_0x2c18c8(0x18b)+_0x4aed16+_0x2c18c8(0x1d5)+_0x1ebc99[_0x2c18c8(0x17c)]);_0x850b08[_0x2c18c8(0x197)]['isPrimary']=_0x5e603d,_0x5a4fd2['env'][_0x2c18c8(0x195)]=_0xfa0973[_0x2c18c8(0x192)](_0x2c18c8(0x195))||_0x56459d['qqdEM'](_0x1ebc99['length'],0x1),_0xe7b924[_0x2c18c8(0x197)][_0x2c18c8(0x189)]=_0x1ebc99[_0x2ca8a3];const _0x15f939=_0x4c62a9(_0x93cdf,_0x23b226,{'silent':_0x15befa,'env':_0xcdd263[_0x2c18c8(0x197)]});_0x15f939[_0x2c18c8(0x1c5)]=_0x45cf27,_0x15f939['isPrimary']=_0x32ff48,_0x357411[_0x3e73fb]=_0x15f939,_0x283751['addWorkerEvents'](_0x15f939);if(_0x13f94b){const _0x1c58bf=_0x56459d['NyRiv'](_0x5c075a,{'file':_0xfbad06,'size':'1m','keep':0x3,'compress':!![]});_0x15f939['stdout'][_0x2c18c8(0x1d2)](_0x1c58bf),_0x15f939[_0x2c18c8(0x19e)]['pipe'](_0x1c58bf);}}else{if(_0x11c444&&typeof _0x11c444===_0x2c18c8(0x171)&&_0x11c444[_0x2c18c8(0x1e1)])switch(_0x11c444[_0x2c18c8(0x1e1)]){case'restart':console[_0x2c18c8(0x191)]('[cluster]\x20Restarting...'),Loader['restart']();break;case'pubsub':workers[_0x2c18c8(0x1cf)](_0x244790=>{const _0x2ebae2=_0x2c18c8;if(_0x2ebae2(0x1cc)!==_0x56459d[_0x2ebae2(0x1b1)])return _0x23f263[_0x2ebae2(0x191)](_0x2ebae2(0x18b)+_0x29ffcb+_0x2ebae2(0x1d5)+_0x406e66[_0x2ebae2(0x17c)]);else _0x244790[_0x2ebae2(0x1dc)](_0x11c444);});break;case _0x56459d[_0x2c18c8(0x1b7)]:workers[_0x2c18c8(0x1cf)](_0x2cb4f3=>{const _0x37cce1=_0x2c18c8;_0x2e13e3[_0x37cce1(0x1d6)](_0x2cb4f3,_0x20eb78)&&_0x2cb4f3['send'](_0x11c444);});break;}}});},Loader[_0x209e57(0x1c8)]=function(){const _0x2c3fdb=_0x209e57,_0x2667c5={'cukJb':function(_0x4df705,_0x3cea44){return _0x4df705<_0x3cea44;},'mfanl':function(_0x86879a,_0x4b762a){return _0x86879a===_0x4b762a;},'LKKkn':_0x2c3fdb(0x19f),'rIwEU':_0x2c3fdb(0x1af),'YAUQx':function(_0x57454c,_0x110d12,_0x4a4c6a){return _0x57454c(_0x110d12,_0x4a4c6a);}};numProcs=getPorts()[_0x2c3fdb(0x17c)],console[_0x2c3fdb(0x191)]('Clustering\x20enabled:\x20Spinning\x20up\x20'+numProcs+_0x2c3fdb(0x16f));for(let _0x5e3f85=0x0;_0x2667c5[_0x2c3fdb(0x198)](_0x5e3f85,numProcs);_0x5e3f85+=0x1){_0x2667c5[_0x2c3fdb(0x17f)](_0x2667c5[_0x2c3fdb(0x1c6)],_0x2667c5['rIwEU'])?_0x571109[_0x2c3fdb(0x191)]=(..._0x1bf1c6)=>{const _0x4e1d14=_0x2c3fdb;_0xa1637d[_0x4e1d14(0x1e4)](_0x1bf1c6[_0x4e1d14(0x1dd)]('\x20')+'\x0a');}:_0x2667c5[_0x2c3fdb(0x174)](forkWorker,_0x5e3f85,_0x2667c5[_0x2c3fdb(0x17f)](_0x5e3f85,0x0));}};function _0x1460(){const _0x2c0c4b=['addWorkerEvents','For\x20the\x20full\x20license,\x20please\x20visit:\x20http://www.gnu.org/copyleft/gpl.html','init','\x20Copyright\x20(C)\x202013-','length','kill','socket.io','mfanl','info','dirname','[loader]\x20Error\x20during\x20startup','[cluster]\x20Spinning\x20up\x20another\x20process...','361245ppXqLY','OhCfp','./package.json','mkdirp','8845207gbRsvT','port','child_process','[cluster]\x20invalid\x20port\x20for\x20worker\x20:\x20','1004196TIwkHk','PORT','open','uJKAr','app.js','log','get','qZDQd','4326024NSeybj','isCluster','stop','env','cukJb','exit','qZMyo','logs/output.log','use','fwRCP','stderr','AjSXx','isPrimary','SIGHUP','umEvG','isArray',')\x20has\x20exited\x20(code:\x20','Invalid\x20pid\x20\x22','ihTmV','logrotate-stream','file','EtIOd','code','5749587iClRFh','argv','60kSBVyM','path','Xqfus','GBQVj','cxyPE','message','stdout','kFNpf','6233500hVBMSD','readFileSync','kGrqv','nSNcq','nconf','stores','aEKEp','stack','pidfile','./src/file','pid','ESRCH','SsFIx','url','tbOUt','existsSync','index','LKKkn','ucrJf','start','silent',',\x20signal:\x20','restart','zjsgC','IruHK','resolve','forEach','1102366IhUxqo','utf-8','pipe','[cluster]\x20url\x20is\x20undefined,\x20please\x20check\x20your\x20config.json','8baPLFv','\x20ports:\x20','tLUrg','EREBY','parse','6FVLfCN','NodeBB\x20v','writeFileSync','send','join','eofPp','displayStartupMessages','daemon','action','SIGTERM','false','write','\x20NodeBB\x20Inc.','suicide','Process\x20\x22','error','cwd','set','remove','app','\x20process(es).\x0a','unlinkSync','object','nwcxu','UzmQr','YAUQx','Skwpb','xXQgP','readOnly'];_0x1460=function(){return _0x2c0c4b;};return _0x1460();}function forkWorker(_0x3169c1,_0x5d0f07){const _0x1e355b=_0x209e57,_0xe58bb3={'hBZkk':function(_0x4bc9c5){return _0x4bc9c5();},'Skwpb':_0x1e355b(0x195),'umEvG':function(_0x208d43,_0x267775){return _0x208d43!==_0x267775;},'KYBVk':_0x1e355b(0x1bb),'EREBY':'FgpAh'},_0x3cde08=_0xe58bb3['hBZkk'](getPorts),_0x189fb7=[];if(!_0x3cde08[_0x3169c1])return console[_0x1e355b(0x191)](_0x1e355b(0x18b)+_0x3169c1+'\x20ports:\x20'+_0x3cde08['length']);process[_0x1e355b(0x197)]['isPrimary']=_0x5d0f07,process[_0x1e355b(0x197)][_0x1e355b(0x195)]=nconf[_0x1e355b(0x192)](_0xe58bb3[_0x1e355b(0x175)])||_0x3cde08[_0x1e355b(0x17c)]>0x1,process[_0x1e355b(0x197)][_0x1e355b(0x189)]=_0x3cde08[_0x3169c1];const _0x52beeb=fork(appPath,_0x189fb7,{'silent':silent,'env':process[_0x1e355b(0x197)]});_0x52beeb[_0x1e355b(0x1c5)]=_0x3169c1,_0x52beeb[_0x1e355b(0x1a0)]=_0x5d0f07,workers[_0x3169c1]=_0x52beeb,Loader[_0x1e355b(0x178)](_0x52beeb);if(silent){if(_0xe58bb3[_0x1e355b(0x1a2)](_0xe58bb3['KYBVk'],_0xe58bb3[_0x1e355b(0x1d7)])){const _0x44f07c=logrotate({'file':outputLogFilePath,'size':'1m','keep':0x3,'compress':!![]});_0x52beeb[_0x1e355b(0x1b3)][_0x1e355b(0x1d2)](_0x44f07c),_0x52beeb[_0x1e355b(0x19e)][_0x1e355b(0x1d2)](_0x44f07c);}else{const _0x410699=_0x56b5f9({'file':_0x3b1035,'size':'1m','keep':0x3,'compress':!![]});_0x2f8cff[_0x1e355b(0x1b3)]['pipe'](_0x410699),_0x446063['stderr'][_0x1e355b(0x1d2)](_0x410699);}}}function getPorts(){const _0x2e3dce=_0x209e57,_0xe4bfed={'uJKAr':_0x2e3dce(0x1d3),'tbOUt':_0x2e3dce(0x18d),'kFNpf':'port'},_0x324c1a=nconf[_0x2e3dce(0x192)](_0x2e3dce(0x1c2));!_0x324c1a&&(console[_0x2e3dce(0x191)](_0xe4bfed[_0x2e3dce(0x18f)]),process[_0x2e3dce(0x199)]());const _0x1eb325=url['parse'](_0x324c1a);let _0x2222d8=nconf[_0x2e3dce(0x192)](_0xe4bfed[_0x2e3dce(0x1c3)])||nconf['get'](_0xe4bfed[_0x2e3dce(0x1b4)])||_0x1eb325[_0x2e3dce(0x189)]||0x11d7;return!Array[_0x2e3dce(0x1a3)](_0x2222d8)&&(_0x2222d8=[_0x2222d8]),_0x2222d8;}Loader['restart']=function(){const _0x12274c=_0x209e57,_0x5a61ee={'qZMyo':'Error\x20reading\x20config','YOdMa':function(_0x34fd3a,_0x80db89){return _0x34fd3a!==_0x80db89;},'ihTmV':function(_0x806fca){return _0x806fca();},'HxuYu':'file','lELOd':_0x12274c(0x1d1)};_0x5a61ee[_0x12274c(0x1a6)](killWorkers),nconf[_0x12274c(0x16d)](_0x5a61ee['HxuYu']),nconf[_0x12274c(0x19c)](_0x12274c(0x1a8),{'file':pathToConfig}),fs['readFile'](pathToConfig,{'encoding':_0x5a61ee['lELOd']},(_0x17f75e,_0x1251ac)=>{const _0x555037=_0x12274c;if(_0x17f75e){console['error'](_0x5a61ee[_0x555037(0x19a)]);throw _0x17f75e;}const _0x40fd63=JSON[_0x555037(0x1d8)](_0x1251ac);nconf[_0x555037(0x1ba)][_0x555037(0x197)][_0x555037(0x177)]=![],nconf[_0x555037(0x16c)](_0x555037(0x1c2),_0x40fd63[_0x555037(0x1c2)]),nconf[_0x555037(0x1ba)][_0x555037(0x197)]['readOnly']=!![],_0x5a61ee['YOdMa'](process[_0x555037(0x197)][_0x555037(0x1c2)],_0x40fd63[_0x555037(0x1c2)])&&(process[_0x555037(0x197)]['url']=_0x40fd63[_0x555037(0x1c2)]),Loader[_0x555037(0x1c8)]();});},Loader[_0x209e57(0x196)]=function(){const _0x270453=_0x209e57,_0x5b387e={'EtIOd':function(_0x101150){return _0x101150();},'UzmQr':'false','ucrJf':function(_0x69d3d6,_0x3c49cf){return _0x69d3d6!==_0x3c49cf;},'xXQgP':'daemon'};_0x5b387e[_0x270453(0x1a9)](killWorkers),nconf[_0x270453(0x192)](_0x270453(0x1e0))!==_0x5b387e[_0x270453(0x173)]&&_0x5b387e[_0x270453(0x1c7)](nconf[_0x270453(0x192)](_0x5b387e[_0x270453(0x176)]),![])&&fs['unlinkSync'](pidFilePath);};function killWorkers(){const _0x2b7baf=_0x209e57;workers[_0x2b7baf(0x1cf)](_0x105371=>{const _0x17c879=_0x2b7baf;_0x105371[_0x17c879(0x1e6)]=!![],_0x105371[_0x17c879(0x17d)]();});}fs[_0x209e57(0x18e)](pathToConfig,'r',_0x456c43=>{const _0x2d2e3b=_0x209e57,_0x37ee0c={'qZDQd':'daemon','eofPp':'false','nwcxu':'kSEsZ','SsFIx':function(_0x514751,_0x2a14ec){return _0x514751===_0x2a14ec;},'VwOdc':function(_0x47e2ba,_0x58bbdc){return _0x47e2ba(_0x58bbdc);},'fwRCP':_0x2d2e3b(0x182)};if(_0x456c43){fork(_0x2d2e3b(0x16e));return;}if(nconf[_0x2d2e3b(0x192)](_0x37ee0c[_0x2d2e3b(0x193)])!==_0x37ee0c[_0x2d2e3b(0x1de)]&&nconf[_0x2d2e3b(0x192)](_0x2d2e3b(0x1e0))!==![]){if(file['existsSync'](pidFilePath)){let _0x42b113=0x0;try{_0x42b113=fs[_0x2d2e3b(0x1b6)](pidFilePath,{'encoding':_0x2d2e3b(0x1d1)});if(_0x42b113)process[_0x2d2e3b(0x17d)](_0x42b113,0x0),console[_0x2d2e3b(0x180)]('Process\x20\x22'+_0x42b113+'\x22\x20from\x20pidfile\x20already\x20running,\x20exiting'),process[_0x2d2e3b(0x199)]();else{if('kSEsZ'===_0x37ee0c[_0x2d2e3b(0x172)])console[_0x2d2e3b(0x180)](_0x2d2e3b(0x1a5)+_0x42b113+'\x22\x20from\x20pidfile,\x20deleting\x20pidfile'),fs[_0x2d2e3b(0x170)](pidFilePath);else{_0x143672[_0x2d2e3b(0x1e8)](_0x554b1b[_0x2d2e3b(0x1bc)]);throw _0x55270d;}}}catch(_0x49e876){if(_0x37ee0c[_0x2d2e3b(0x1c1)](_0x49e876[_0x2d2e3b(0x1aa)],_0x2d2e3b(0x1c0)))console[_0x2d2e3b(0x180)](_0x2d2e3b(0x1e7)+_0x42b113+'\x22\x20from\x20pidfile\x20not\x20found,\x20deleting\x20pidfile'),fs['unlinkSync'](pidFilePath);else{console[_0x2d2e3b(0x1e8)](_0x49e876[_0x2d2e3b(0x1bc)]);throw _0x49e876;}}}require(_0x37ee0c['qZDQd'])({'stdout':process['stdout'],'stderr':process['stderr'],'cwd':process[_0x2d2e3b(0x16b)]()}),fs[_0x2d2e3b(0x1db)](pidFilePath,_0x37ee0c['VwOdc'](String,process[_0x2d2e3b(0x1bf)]));}try{Loader[_0x2d2e3b(0x17a)](),Loader['displayStartupMessages'](),Loader[_0x2d2e3b(0x1c8)]();}catch(_0x58e941){console[_0x2d2e3b(0x1e8)](_0x37ee0c[_0x2d2e3b(0x19d)]);throw _0x58e941;}});