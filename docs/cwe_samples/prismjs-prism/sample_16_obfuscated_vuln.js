'use strict';function _0xe948(_0x4a33f1,_0x249a60){const _0x200110=_0x2001();return _0xe948=function(_0xe948be,_0x301b79){_0xe948be=_0xe948be-0x69;let _0x4a765f=_0x200110[_0xe948be];return _0x4a765f;},_0xe948(_0x4a33f1,_0x249a60);}const _0x32d778=_0xe948;(function(_0x3941bc,_0x26cfdc){const _0x3673e7=_0xe948,_0x88b461=_0x3941bc();while(!![]){try{const _0x171673=parseInt(_0x3673e7(0x17a))/0x1+parseInt(_0x3673e7(0x12a))/0x2*(-parseInt(_0x3673e7(0x230))/0x3)+parseInt(_0x3673e7(0xb5))/0x4+-parseInt(_0x3673e7(0x3d5))/0x5*(-parseInt(_0x3673e7(0xe0))/0x6)+parseInt(_0x3673e7(0x381))/0x7+parseInt(_0x3673e7(0x355))/0x8*(parseInt(_0x3673e7(0x21f))/0x9)+-parseInt(_0x3673e7(0x18e))/0xa*(parseInt(_0x3673e7(0x18f))/0xb);if(_0x171673===_0x26cfdc)break;else _0x88b461['push'](_0x88b461['shift']());}catch(_0x1d6ab2){_0x88b461['push'](_0x88b461['shift']());}}}(_0x2001,0xb95b2));const assert=require('assert'),async=require(_0x32d778(0x95)),request=require(_0x32d778(0xcd)),nconf=require(_0x32d778(0x1fa)),crypto=require(_0x32d778(0xe4)),fs=require('fs'),path=require(_0x32d778(0x338)),db=require(_0x32d778(0x1c3)),topics=require('../src/topics'),posts=require(_0x32d778(0x3c0)),categories=require(_0x32d778(0x131)),privileges=require(_0x32d778(0x10a)),user=require('../src/user'),groups=require(_0x32d778(0x1f0)),socketPosts=require(_0x32d778(0x3c8)),socketTopics=require(_0x32d778(0x1a2)),meta=require(_0x32d778(0x3b3)),helpers=require(_0x32d778(0x202));function _0x2001(){const _0x4b19ac=['PASRL','topic\x20with\x20some\x20images','CdmwU','waterfall','tjQyo','upvote','../src/groups','SHjhO','length','newuser','teaser','sLUPo','userData','fnhfp','post:','ifOoP','nconf','xniwc','aEall','CTpxe','jjxHr','[[error:no-user]]','EQbRA','isArray','./helpers','should\x20be\x20queued','postQueue','upvoted','new\x20topic\x20title','NMQjd','topic\x20to\x20delete/restore/purge','MbEar','series','nIvhZ','/post/','should\x20prevent\x20downvoting\x20more\x20than\x20total\x20daily\x20limit','should\x20error\x20if\x20content\x20is\x20too\x20long','BKTka','filterPidsByCid','derp','posts','CEhen','JJTxF','puUfV','MLZJU','axJCS','should\x20prevent\x20downvoting\x20target\x20user\x20more\x20than\x20total\x20daily\x20limit','getPost','/api/post-queue','should\x20add\x20reply\x20to\x20post\x20queue','shazam.jpg','vVjSj','Test\x20Topic\x20Title','2492379ouDIxb','CpKEU','should\x20add\x20an\x20image\x20to\x20the\x20post\x27s\x20maintained\x20list\x20of\x20uploads','Luiot','should\x20not\x20delete\x20first\x20diff\x20of\x20a\x20post','Topic\x20Backlinks','edited\x20reply','SazdP','NaekT','yhonw','ptnWR','should\x20filter\x20pids\x20by\x20multiple\x20cids','KGNFC','downvoted','unvote','nALuX',':pids','3691587KVYvtb','should\x20load\x20diffs\x20and\x20reconstruct\x20post','type','should\x20fail\x20to\x20get\x20raw\x20post\x20because\x20of\x20privilege','exists','A\x20post\x20to\x20delete/restore\x20and\x20purge','should\x20return\x20empty\x20array\x20for\x20empty\x20pids','paEAe','tzjys','should\x20create\x20a\x20backlink\x20if\x20it\x20detects\x20a\x20topic\x20link\x20in\x20a\x20post','relativeToAbsolute','KyBsg','MhgdL','uctYq','should\x20delete\x20a\x20post','tOqgp','push','every','ZcpMw','YwnEM','123456789','QNaaU','.sync()','nlUYB','getPidIndex','mpkrw','IuzPJ','[[error:not-logged-in]]','notStrictEqual','should\x20not\x20create\x20a\x20topic\x20event\x20if\x20referenced\x20topic\x20is\x20the\x20same\x20as\x20current\x20topic','should\x20create\x20a\x20topic\x20event\x20in\x20the\x20referenced\x20topic','Yqroa','iNJnr','XQQer','should\x20properly\x20add\x20new\x20images\x20to\x20the\x20post\x27s\x20zset','ErDxb','ZRxPi','should\x20parse\x20signature\x20and\x20remove\x20links\x20and\x20images','should\x20error\x20with\x20invalid\x20tid','MgRiv','fMSqk','hex','yXqeG','topic\x20with\x20some\x20images,\x20to\x20be\x20purged','dissociate','RzqNJ','list','VpfKV','equal','rqKyP','pobLZ','timestamps','pWNxk','jRxjm','Zvfpm','Dissociation\x20on\x20purge','UUTpj','LSVTO','groups:topics:read','sortedSetCard','qrFom','target\x20topic','123456','KTWrg','NYWJq','NsorW','votes','rejects','IWhCJ','kOMll','upvotes','the\x20moved\x20queued\x20post','nAtRP','mergetestsuser','abracadabra.png','topic\x20A','maximumTagsPerTopic','isOwner','hasVoted','muKpR','VhElb','xBSEf','qJguV','qxHIs','QbeVp','xvvYn','nzgrd','rNCmb','GOorO','oXdjN','globalModUid','should\x20do\x20nothing\x20if\x20the\x20post\x20does\x20not\x20contain\x20a\x20link\x20to\x20a\x20topic','newest_to_oldest','delete','[[success:post-queued]]','pLyeX','agyyA','GWVmX','/path/to/img\x22/>','UqgiO','should\x20prevent\x20regular\x20users\x20from\x20approving\x20non\x20existing\x20posts','vUjjo','HgYzf','urlRegex','DQjSS','edited\x20title\x20again','cZKQl','cuDqY','should\x20unbookmark\x20a\x20post','XVjGU','AFScn','loginUser','TpHrN','BgJPU','uid','kGxFz','BMjBI','oGSwV','WswuL','aSSzz','SfcCo','value','rWIXv','OPUSx','FTbSq','knQJx','eNHnK','nVcUk','Yikyg','lZoIX','kLbyE','diffs','mXBJN','merge','config','AuKup','.dissociateAll()','edited\x20deleted\x20title','4|2|3|5|0|1','[[error:too-many-downvotes-today-user,\x201]]','bookmark','xxxxxxxx','/topic/','queued\x20topic\x20content','xUGUk','RpfgH','should\x20purge\x20posts\x20and\x20purge\x20topic','9999999','wDubv','QFzvi','should\x20return\x20falsy\x20if\x20post\x20does\x20not\x20exist','lEyjW','groups:posts:edit','guests','signatures:disableLinks','Ikyqu','Post\x27s','QrxIb','yKbFt','categories','edited\x20deleted\x20content','qZjzA','getUserField','kORkb','should\x20delete\x20topic\x20if\x20last\x20main\x20post\x20is\x20deleted','NmHMM','hhKuG','should\x20error\x20if\x20user\x20does\x20not\x20have\x20move\x20privilege','downvotesPerDay','signature','[[error:no-privileges]]','dUrgM','filter','zztcJ','yACCu','update','closeSync','eYGfk','JKaLt','zVhYh','content','post\x20queue','YDZOl','MaRCn','This\x20is\x20a\x20link\x20to\x20[topic\x201](','GGIWc','RAZYe','RbcgX','registered-users','sMPYS','aHfsB','should\x20remove\x20all\x20images\x20from\x20a\x20post\x27s\x20maintained\x20list\x20of\x20uploads','ZgGGJ','sShbT','load','zCTTK','vHZli','1|3|0|2|4','global\x20mod','BBTBN','Topic\x20backlink\x20testing\x20-\x20topic\x202','give','downvotes','ROTbv','sortedSetScores','XHOPb','eYLUe','getCategory','should\x20error\x20with\x20invalid\x20data','Test\x20Category','oPMaa','xjDjG','whLNW','ugxTp','zJZIk','/topic/1/abcdef)','should\x20not\x20crash\x20if\x20id\x20does\x20not\x20exist','display_delete_tools','editable','edit','WfKMS','tZZkn','getObject','CEcZq','TKRDP','WQsbD','iKAtM','lBFdA','purge','qYbKd','deletePosts','csoZq','spuuZ','sync','AuLiK','post\x20uploads\x20management','gjOWh','EBOAT','user','cucPf','UtRuR','dMgMo','users:postcount','nSHiT','yOcNg','teeOn','UTjJG','Drwvp','no\x20uploads','groupsExemptFromPostQueue','Iznhy','mergeexemptuser','.associate()','getPostData','.syncBacklinks()','sQDQM','UviKN','hasOwnProperty','qkHne','[[topic:post_is_deleted]]','EgrjQ','should\x20not\x20dissociate\x20images\x20on\x20post\x20deletion','edited\x20post\x20content','YQiDI','path','xklJZ','qAaHW','uDCCg','loadPostTools','BRjYd','pAGoV','this\x20is\x20a\x20queued\x20reply','ofQis','username','oSybB','A\x20reply\x20to\x20edit','efbKv','mJeeu','WdjSP','OFJwl','DuGCy','SWJoy','createHash','OJHfw','cwCQh','fFwoA','strictEqual','Xyach','LghJj','FnjxR','OKniS','uoNnr','minimumPostLength','16mFRaGV','topic\x20to\x20edit','pCgii','A\x20post\x20to\x20delete/restore/purge','PprEa','jLjsg','RaxXn','QruyT','SGuun','title','[abcdef](/assets/uploads/files/abracadabra.png)','MXgzP','jnlHS','jMLNg','<a\x20href=\x22/users\x22>test</a>\x20<a\x20href=\x22youtube.com\x22>youtube</a>\x20some\x20test\x20<img\x20src=\x22/path/to/img\x22/>','split','should\x20not\x20be\x20queued','UsNfO','topic\x202','isOrphan','JfTGi','display_edit_tools','gjheP','FjUIH','aSRhU','SwgFf','should\x20get\x20post\x20summaries','lfcTy','here\x20is\x20an\x20image\x20[alt\x20text](/assets/uploads/files/abracadabra.png)...\x20AND\x20NO\x20MORE!','A\x20reply\x20to\x20move','topic\x20B\x20content','ZGfYs','dVSGD','firstReply','base_url','should\x20not\x20see\x20post\x20content\x20if\x20global\x20mod\x20does\x20not\x20have\x20posts:view_deleted\x20privilege','should\x20allow\x20registered-users\x20group\x20to\x20view\x20diffs','pJmsl','PJqbO','eoHWq','Global\x20Moderators','otherCount','editQueuedContent','YCLyq','7363468zQrbvP','getRecentPosterUids','lNwUr','/api/categories','FywXR','AZayZ','DyKoh','should\x20error\x20on\x20invalid\x20data','EqkdU','topic_1','should\x20update\x20queued\x20post\x27s\x20topic\x20if\x20target\x20topic\x20is\x20merged','kkGUh','getDiffs','isReadyToPost','includes','downvote','OEBYJ','downvoteCount','should\x20save\x20a\x20reverse\x20association\x20of\x20md5sum\x20to\x20pid','reply','should\x20error\x20if\x20data\x20is\x20invalid','sdIXk','UCozq','cFAef','wndKA','yGhnb','nXCwW','jdLCU','HQjbu','MWPUW','upvoters','anZqe','should\x20delete\x20a\x20post\x20diff','oldest_to_newest','should\x20edit\x20post','lffpD','upvoteCount','sgnoT','[[error:content-too-short,\x20','DJwWA','SjDNI','IIViP','HAoPb','kmwjm','tLNRk','original\x20post','cnDtS','raw\x20content','OudKu','FOSTZ','../src/meta','should\x20load\x20(oldest)\x20diff\x20and\x20reconstruct\x20post\x20correctly\x20after\x20a\x20diff\x20deletion','should\x20automatically\x20sync\x20uploads\x20on\x20topic\x20create\x20and\x20reply','xuiVb','GQFtH','should\x20return\x20diffs','bvaXQ','ksvDz','iQsDX','tiTpd','CUWKi','nTzkT','maximumPostLength','../src/posts','should\x20bookmark\x20a\x20post','WOHTx','getPostField','vmpPD','env','yzJgD','UYija','../src/socket.io/posts','apply','mumGB','rwEdZ','should\x20fail\x20to\x20get\x20raw\x20post\x20because\x20post\x20is\x20deleted','should\x20return\x20false\x20if\x20upload\x20is\x20not\x20an\x20orphan','renamed','REoLk','uviBf','tzCjG','Nspjf','upload_path','CsYyv','7805MZrgRY','topic\x20title','WNpdS','should\x20fail\x20to\x20move\x20post\x20if\x20not\x20moderator\x20of\x20target\x20category','deepEqual','topiccount','dujLB','oHPzr','globalmod','TESqw','should\x20prevent\x20regular\x20users\x20from\x20approving\x20posts','jmjKD','omJLL','IsRxb','NYonr','reputation','aHmRV','CvGNw','should\x20get\x20raw\x20post\x20content','upvotee','Psgpg','HOEEL','TBQnS','xoppm','fRNWF','[[error:post-edit-duration-expired,\x201]]','DUZyy','Arknq','sFXOz','OFeAB','IuOEo','purgePosts','bcEvB','BSvau','cid','JogeK','fpDWi','topic\x20content','mwjKt','ogtBS','some\x20content','bookmarks','should\x20edit\x20a\x20reply\x20post','bookmarking','VBump','SeqZQ','async','JQpjk','getPostSummaryByPids','tid','isBookmarked','BEuxG','oFsIe','oKsSE','setPostField','rescind','zzPHM','QZimC','/api/topic/','osTHn','Mgdox','dJXeA','iAoyD','dYZwq','iKXBZ','downvotesPerUserPerDay','topicData','123123123','bsbhv','should\x20fail\x20to\x20change\x20owner\x20if\x20user\x20is\x20not\x20authorized','IqQgK','groups:posts:downvote','post','jjSKK','backlink','cJokh','nCywI','bXxQx','3921772sQKAjF','amazeballs.jpg','should\x20turn\x20relative\x20links\x20in\x20post\x20body\x20to\x20absolute\x20urls','pop','should\x20not\x20associate\x20a\x20file\x20that\x20does\x20not\x20exist\x20on\x20the\x20local\x20disk','VtsCB','cIptK','oNgyz','message','nSDLM','nyEVc','sXOJU','dissociateAll','NGAFP','pIkEG','usernames','QjesR','uploads','should\x20get\x20upvoters','opwGw','should\x20error\x20if\x20user\x20is\x20not\x20logged\x20in','VQRCR','yCmRK','VXeEB','request','wZbXR','5|2|4|3|1|0','oQNbx','should\x20display\x20the\x20uploaded\x20files\x20for\x20a\x20specific\x20post','should\x20allow\x20arrays\x20to\x20be\x20passed\x20in','2|4|3|5|1|0','parseSignature','NyEHz','yFKwh','QAuPr','production','should\x20delete\x20posts','pid','topic\x201','RqDJg','FFePi','[[error:invalid-data]]','movePost','2982PmmfYP','imgRegex','wlgth','/users\x22>test</a>\x20<a\x20href=\x22//youtube.com\x22>youtube</a>','crypto','MUdGI','rnuKC','LvEcI','eulzi','EdGoe','newbiePostEditDuration','KPdWe','unbookmark','should\x20downvote\x20a\x20post','olduser','vQFnj','should\x20get\x20recent\x20poster\x20uids','gVylN','upvoter','reRFi','util','gTePq','<img\x20src=\x22boop\x22/><a\x20href=\x22link\x22>test</a>\x20derp','LWzvh','edited-twice','XoLFr','VKPqr','sQMen','BptiB','.isOrphan()','ZeXvF','xGCnR','yNFvn','parsePost','deleted','HOosj','QxbnS','quqiV','tLyej','dFKQn','mMzoT','should\x20edit\x20topic\x20title\x20in\x20queue','../src/privileges','A\x20post\x20to\x20edit','MySyN','category','move','EnRaK','IamkL','yDlyz','LnhHF','maximumTitleLength','VPtsQ','SkLND','should\x20error\x20if\x20title\x20is\x20too\x20short','forEach','lkLZM','syhOh','qQkac','syncBacklinks','[[error:title-too-short,\x20','href','This\x20is\x20a\x20link\x20to\x20[nothing](http://example.org)','associate','FMgBQ','pCjbb','gOqpU','editor','tid:','jmrfy','YDkai','minimumTagsPerTopic','QPhYq','should\x20error\x20with\x20too\x20many\x20tags','2CqKxVP','SWURS','lfrLo','zKQMF','HepLw','vmjeb','get','../src/categories','should\x20load\x20post\x20tools','CxcjR','getVoters','[[error:not-enough-tags,\x20','<a\x20href=\x22',':uploads','sRtji','4|2|1|0|3','1|3|2|4|0','display_moderator_tools','kNbdq','LVBne','events','isMainPost','keys','url','njSou','tags','QVSPL','iWQbp','create','dhnzO','EnYEi','topic','oxYpD','kvLeW','timestamp','queued','jfGtu','should\x20filter\x20pids\x20by\x20single\x20cid','Eykzb','TZhtV','uIJSM','KhATq','gSZtE','data','PPfGD','vrFqL','yEtYx','sBOLM','boolean','uzGkl','[[error:content-too-long,\x20','JRVRJ','The\x20content\x20of\x20test\x20topic','ZFgKe','test\x20topic','KeTuh','zsrbU','aSEXl','lUlcG','xSiwU','getRawPost','swjZP','should\x20get\x20voters','QKrTE','here\x20is\x20an\x20image\x20[alt\x20text](/assets/uploads/files/whoa.gif)\x20and\x20another\x20[alt\x20text](/assets/uploads/files/amazeballs.jpg)','rsYcl','xhJHY','sbzYD','.list()','should\x20edit\x20topic\x20category\x20in\x20queue','post\x20tools','should\x20return\x20true\x20if\x20upload\x20is\x20an\x20orphan','MvBIE','WzhmL','EdDfO','GYNrN','DJxxh','should\x20edit\x20post\x20in\x20queue','FvXKo','UlCxy','914501dzHuus','accept','ogHbu','bJMQh','should\x20update\x20category\x20teaser\x20properly','should\x20get\x20pid\x20index\x20in\x20reverse','should\x20edit\x20a\x20deleted\x20post','oxWHs','should\x20remove\x20the\x20backlink\x20(but\x20keep\x20the\x20event)\x20if\x20the\x20post\x20no\x20longer\x20contains\x20a\x20link\x20to\x20a\x20topic','eOqAc','JifPX','topic\x20to\x20test\x20uploads\x20with','EgdzB','bKTpQ','should\x20get\x20post','reject','JqSDl','Some\x20text\x20here\x20for\x20the\x20OP\x20&ndash;\x20','should\x20dissociate\x20images\x20on\x20post\x20purge','should\x20accept\x20queued\x20posts\x20and\x20submit','57170puXwNM','4400ovyspo','QKUHE','Some\x20text\x20here\x20for\x20the\x20OP','Test\x20category\x20created\x20by\x20testing\x20script','test\x20derp','should\x20unvote\x20a\x20post','sJHGt','PwZbo','AwApg','changeOwner','aTiYd','newContent','igzLx','xxFDp','UnwCI','JpIUF','qJryY','should\x20fail\x20to\x20upvote\x20post\x20if\x20group\x20does\x20not\x20have\x20upvote\x20permission','files','../src/socket.io/topics','sPJBj','KUoJh','[[error:no-post]]','GJtiE','ifError','sPiHL','/users\x22>test</a>\x20<a\x20href=\x22//youtube.com\x22>youtube</a>\x20some\x20test\x20<img\x20src=\x22','otDTr','now','nTGcc','mTppa','RKZGT','join','UhwLO','nonexistant.xls','JOQmh','AfTbH','voteeUid','ThXOp','QTZKL','YaShF','BDpSa','deepStrictEqual','Gytyr','[[error:too-many-downvotes-today,\x201]]','postData','wut.txt','EoNpY','sqsTV','getQueuedPosts','vxijg','should\x20change\x20owner\x20of\x20post\x20and\x20topic\x20properly','./mocks/databasemock','should\x20automatically\x20sync\x20uploads\x20on\x20post\x20edit','test.bmp','PYmIp','weLdj','YIKjh','PWjHN','should\x20not\x20show\x20backlink\x20events\x20if\x20the\x20feature\x20is\x20disabled','nFiFB','NWEuL','getSortedSetMembers','getUpvoters','zdYNU','NfJum','jzFED','modofcat1','awehF','should\x20get\x20post\x20category','[abcdef](/assets/uploads/files/shazam.jpg)','whoa.gif','RwXYW','revisions','hasBookmarked','AIaxz','wsgBr','ahMet','xxxbF','Referencing\x20itself\x20&ndash;\x20','display_move_tools','pid:2:backlinks','QjQim','UNtOu','promisify','TCbGA','should\x20return\x20pids\x20as\x20is\x20if\x20cid\x20is\x20falsy','KoryS','zbgvk','openSync','XrSEo'];_0x2001=function(){return _0x4b19ac;};return _0x2001();}describe(_0x32d778(0x2cc),()=>{const _0x3816fa=_0x32d778,_0x27786f={'nTGcc':function(_0x2fa341,_0x5f4da0){return _0x2fa341(_0x5f4da0);},'qgmcv':'upvoter','Arknq':function(_0x3f4ef5,_0x49c939){return _0x3f4ef5===_0x49c939;},'MUdGI':_0x3816fa(0x301),'IsRxb':_0x3816fa(0x3d6),'rwEdZ':'123456789','JQpjk':function(_0x4a0452){return _0x4a0452();},'RqDJg':'change\x20owner','yGhnb':_0x3816fa(0x3ae),'NaekT':'postcount','hhKuG':'topiccount','yzJgD':_0x3816fa(0x322),'tLNRk':_0x3816fa(0x157),'CDqtK':_0x3816fa(0x1ff),'KoryS':_0x3816fa(0x29e),'FFePi':_0x3816fa(0x39e),'oHPzr':_0x3816fa(0x38a),'mwjKt':'raw\x20content','OudKu':_0x3816fa(0x1bb),'nSDLM':'[[error:invalid-data]]','oQNbx':function(_0x29e78e){return _0x29e78e();},'aEall':function(_0x2589e2,_0x1e991c){return _0x2589e2!==_0x1e991c;},'qrFom':_0x3816fa(0x2da),'DUZyy':'groups:posts:upvote','KTWrg':_0x3816fa(0x2ec),'kkGUh':_0x3816fa(0x13c),'MbEar':function(_0xaac1ae,_0x347102,_0x3a7c09){return _0xaac1ae(_0x347102,_0x3a7c09);},'tzCjG':'should\x20upvote\x20a\x20post','rWIXv':function(_0x24660c,_0x510649,_0x3278a5){return _0x24660c(_0x510649,_0x3278a5);},'BBTBN':_0x3816fa(0xed),'LghJj':function(_0x5c8abf,_0x391b47,_0x928951){return _0x5c8abf(_0x391b47,_0x928951);},'UNtOu':_0x3816fa(0x218),'cFAef':_0x3816fa(0x222),'JKaLt':_0x3816fa(0x3c1),'lNwUr':function(_0x1c2ab3,_0x3cee9a,_0x30fefb){return _0x1c2ab3(_0x3cee9a,_0x30fefb);},'QZimC':function(_0x5a1001){return _0x5a1001();},'IamkL':_0x3816fa(0x336),'ZRxPi':function(_0x5257e9){return _0x5257e9();},'oaMPo':_0x3816fa(0xcf),'bcEvB':function(_0x135c6c,_0x5a5ef6){return _0x135c6c(_0x5a5ef6);},'ogVKe':_0x3816fa(0x291),'oxYpD':_0x3816fa(0x132),'JOQmh':_0x3816fa(0x235),'KPdWe':'some\x20post\x20content','zztcJ':function(_0xe9772a,_0x57fc74){return _0xe9772a(_0x57fc74);},'Qtbtd':function(_0x50cdac){return _0x50cdac();},'oPMaa':'deleted','aHmRV':_0x3816fa(0x141),'lffpD':_0x3816fa(0x160),'EdDfO':'pWNxk','YDkai':function(_0x172419,_0x394f76,_0x2dc885){return _0x172419(_0x394f76,_0x2dc885);},'QVSPL':function(_0x3f3581,_0x5dba58,_0x73bfd8){return _0x3f3581(_0x5dba58,_0x73bfd8);},'nSHiT':_0x3816fa(0x378),'PprEa':_0x3816fa(0xd9),'muKpR':_0x3816fa(0x27a),'xUGUk':function(_0x42e985,_0x3ec01b){return _0x42e985===_0x3ec01b;},'vHZli':_0x3816fa(0x229),'IYqKD':function(_0x4cad2e){return _0x4cad2e();},'WaiJY':'3|5|4|0|1|2','PJqbO':_0x3816fa(0x2b9),'qJguV':function(_0x2b983f,_0x47279f){return _0x2b983f===_0x47279f;},'SHjhO':_0x3816fa(0x12e),'sqsTV':_0x3816fa(0x345),'tVStK':'globalmodpwd','XoLFr':_0x3816fa(0xcb),'cucPf':_0x3816fa(0x225),'TBQnS':function(_0x4ec4bd,_0x570ea6){return _0x4ec4bd(_0x570ea6);},'isCJX':_0x3816fa(0x343),'fFwoA':'edited\x20title','QbeVp':function(_0x5b2c1f){return _0x5b2c1f();},'hIDPG':'edited\x20post\x20content\x20again','xniwc':function(_0x1d6090){return _0x1d6090();},'qAaHW':'most\x20recent\x20edit','JifPX':function(_0x42b88d,_0x57e3b5,_0x4f9dc6){return _0x42b88d(_0x57e3b5,_0x4f9dc6);},'oSybB':function(_0x5cc470,_0x222ee7,_0x27d036){return _0x5cc470(_0x222ee7,_0x27d036);},'xZimK':_0x3816fa(0x116),'lfrLo':function(_0x1fee00,_0x235f47,_0x4e67ed){return _0x1fee00(_0x235f47,_0x4e67ed);},'CCYEl':'should\x20error\x20with\x20too\x20few\x20tags','jzFED':'should\x20error\x20if\x20content\x20is\x20too\x20short','BbDBK':_0x3816fa(0x20e),'RbcgX':function(_0x3e9544,_0x4aa7d3,_0x2ffebd){return _0x3e9544(_0x4aa7d3,_0x2ffebd);},'lBFdA':_0x3816fa(0x3a3),'KhATq':'should\x20disallow\x20post\x20editing\x20for\x20new\x20users\x20if\x20post\x20was\x20made\x20past\x20the\x20threshold\x20for\x20editing','jfGtu':_0x3816fa(0x91),'wsgBr':function(_0x5c227c,_0x2331c8,_0x24d99c){return _0x5c227c(_0x2331c8,_0x24d99c);},'vxijg':_0x3816fa(0x3b8),'OFeAB':_0x3816fa(0x231),'jjxHr':_0x3816fa(0x379),'Lyrbb':_0x3816fa(0x223),'SBJOC':_0x3816fa(0x3a1),'WQsbD':function(_0x272677,_0xcb9bbe,_0x5d9d41){return _0x272677(_0xcb9bbe,_0x5d9d41);},'MvBIE':_0x3816fa(0x192),'vVjSj':_0x3816fa(0x26d),'gfKcN':'queued\x20topic','MgRiv':_0x3816fa(0x1d2),'fnhfp':function(_0x730de4){return _0x730de4();},'wDubv':_0x3816fa(0x33b),'oFsIe':function(_0x36d4b7,_0x17e85d,_0x5c6957){return _0x36d4b7(_0x17e85d,_0x5c6957);},'WfKMS':_0x3816fa(0x395),'oKsSE':function(_0x5cc99c,_0x3472f5,_0x2867e3){return _0x5cc99c(_0x3472f5,_0x2867e3);},'qkHne':_0x3816fa(0x2d7),'IIViP':function(_0x1dc507,_0x3a72e4,_0x53b418){return _0x1dc507(_0x3a72e4,_0x53b418);},'WNpdS':'should\x20move\x20a\x20post','XrSEo':function(_0x481801,_0x4199cb,_0xa304fd){return _0x481801(_0x4199cb,_0xa304fd);},'FTbSq':_0x3816fa(0x6a),'HQjbu':function(_0x5acc15){return _0x5acc15();},'xOXJc':_0x3816fa(0x236),'iQsDX':function(_0x321832){return _0x321832();},'syhOh':function(_0x253f9b,_0x43a217){return _0x253f9b(_0x43a217);},'GQFtH':_0x3816fa(0x1fa),'sdIXk':'should\x20not\x20crash\x20and\x20return\x20falsy\x20if\x20post\x20data\x20is\x20falsy','BKTka':function(_0x1642fd,_0x2b4f77,_0x472fa9){return _0x1642fd(_0x2b4f77,_0x472fa9);},'GqyjO':_0x3816fa(0x255),'JRVRJ':_0x3816fa(0xb7),'SWJoy':'WCvEt','EMCpE':_0x3816fa(0x3a2),'DyKoh':_0x3816fa(0x2c9),'WswuL':function(_0x2d2183){return _0x2d2183();},'kAUtT':function(_0x4bfc9b,_0x191965){return _0x4bfc9b(_0x191965);},'otDTr':_0x3816fa(0x256),'Yqroa':_0x3816fa(0x233),'lfcTy':function(_0x58ce57,_0x5dc64b,_0x3f3490){return _0x58ce57(_0x5dc64b,_0x3f3490);},'VeeEm':_0x3816fa(0x79),'ZGfYs':_0x3816fa(0x188),'VhElb':_0x3816fa(0x300),'rIuKu':'should\x20get\x20pid\x20index','iKAtM':function(_0x4b3656,_0x5bc43c,_0x5230c8){return _0x4b3656(_0x5bc43c,_0x5230c8);},'yXqeG':function(_0x245fad){return _0x245fad();},'MySyN':function(_0x44ffb8,_0x242472){return _0x44ffb8!==_0x242472;},'FnjxR':_0x3816fa(0x158),'NyEHz':function(_0x220cb3,_0x457df0,_0x5a743e){return _0x220cb3(_0x457df0,_0x5a743e);},'XVjGU':_0x3816fa(0x14f),'tiTpd':function(_0x18dd2d,_0x2de60d,_0x14b88b){return _0x18dd2d(_0x2de60d,_0x14b88b);},'mTppa':_0x3816fa(0x22a),'EgrjQ':'glnLd','OFJwl':_0x3816fa(0x2f5),'xoppm':'this\x20is\x20a\x20queued\x20reply','LUpri':_0x3816fa(0x394),'EBOAT':_0x3816fa(0x19a),'JfTGi':_0x3816fa(0x2ea),'yrQGd':_0x3816fa(0x98),'lUlcG':function(_0x27fc09){return _0x27fc09();},'iWQbp':function(_0x1240f7,_0x35dfde){return _0x1240f7===_0x35dfde;},'PASRL':_0x3816fa(0x2cd),'cIptK':_0x3816fa(0x32b),'mMzoT':_0x3816fa(0x365),'REoLk':_0x3816fa(0x279),'fRNWF':'topic\x20B','RoIbn':'the\x20moved\x20queued\x20post','DuGCy':function(_0x504885,_0x5e617e){return _0x504885!==_0x5e617e;},'LZJvG':function(_0x4dc10e){return _0x4dc10e();},'puUfV':'post:queue','AwApg':function(_0x5d8670,_0x3c969a){return _0x5d8670(_0x3c969a);},'yZEBN':'should\x20add\x20topic\x20to\x20post\x20queue','ybEXC':_0x3816fa(0x21b),'qQkac':function(_0x173adc,_0xc6efe2,_0x158c48){return _0x173adc(_0xc6efe2,_0x158c48);},'KwBLV':_0x3816fa(0x177),'XjAJO':_0x3816fa(0x16f),'PwZbo':_0x3816fa(0x71),'oNgyz':function(_0x4ffc0d,_0x2b018f,_0x476f73){return _0x4ffc0d(_0x2b018f,_0x476f73);},'AyeyD':_0x3816fa(0x18d),'pLyeX':function(_0x25c279,_0x20425c,_0x2fad68){return _0x25c279(_0x20425c,_0x2fad68);},'ZeXvF':_0x3816fa(0x1eb),'FoUiQ':_0x3816fa(0x16a),'spuuZ':function(_0x4e8a27,_0x4ce7cb){return _0x4e8a27(_0x4ce7cb);},'LSVTO':_0x3816fa(0x1b1),'nVcUk':function(_0x294a89,_0x505209,_0xa8a8cf){return _0x294a89(_0x505209,_0xa8a8cf);},'aTiYd':_0x3816fa(0x221),'bXxQx':_0x3816fa(0x393),'sbzYD':function(_0x746e3b,_0x137331,_0x1464eb){return _0x746e3b(_0x137331,_0x1464eb);},'QxbnS':function(_0xd053b4,_0x19bfc7,_0x960b65){return _0xd053b4(_0x19bfc7,_0x960b65);},'ErDxb':function(_0x4be7e6,_0x30ea87,_0x16cf85){return _0x4be7e6(_0x30ea87,_0x16cf85);},'kOMll':_0x3816fa(0x3b9),'LBNXi':_0x3816fa(0x3cd),'IuzPJ':function(_0x501ff2){return _0x501ff2();},'pAGoV':_0x3816fa(0xb6),'ZcQez':'wut.txt','YCLyq':_0x3816fa(0x2ef),'yDpWJ':_0x3816fa(0xfd),'xuiVb':'.dissociate()','mmrjU':_0x3816fa(0x2b8),'OJHfw':_0x3816fa(0x267),'Xyach':function(_0x18a64a){return _0x18a64a();},'eNHnK':_0x3816fa(0x35f),'EdGoe':'no\x20uploads','teeOn':_0x3816fa(0x16b),'Wohij':function(_0x4f7f94,_0x517d57){return _0x4f7f94(_0x517d57);},'AZUwq':function(_0x190909,_0xa5f130,_0x33e00f){return _0x190909(_0xa5f130,_0x33e00f);},'kGxFz':_0x3816fa(0x3b5),'mNijP':_0x3816fa(0x1c4),'FywXR':_0x3816fa(0xb1),'dvTmN':function(_0x13230a){return _0x13230a();},'WzhmL':_0x3816fa(0x24e),'EQbRA':function(_0x2a7a82,_0x566531,_0xee38d4){return _0x2a7a82(_0x566531,_0xee38d4);},'qYbKd':'Topic\x20backlink\x20testing\x20-\x20topic\x201','sPiHL':_0x3816fa(0x191),'RwXYW':'This\x20is\x20a\x20post\x27s\x20content','NWEuL':'pid:2:backlinks','aHfsB':function(_0x270891,_0x55eac3){return _0x270891(_0x55eac3);},'dFKQn':_0x3816fa(0x11e),'XQQer':function(_0x151630,_0x3f8c7f,_0x28c019){return _0x151630(_0x3f8c7f,_0x28c019);},'ZgGGJ':_0x3816fa(0x239),'JteVk':function(_0x25a746,_0xff899b){return _0x25a746===_0xff899b;},'QKUHE':'Topic\x20backlink\x20testing\x20-\x20topic\x203','BEuxG':'integration\x20tests','gOqpU':function(_0x15ea5c,_0x12b918){return _0x15ea5c(_0x12b918);},'cBXyS':_0x3816fa(0x17e),'nXCwW':function(_0x1460f6,_0x27f496,_0x5d9d57){return _0x1460f6(_0x27f496,_0x5d9d57);},'MBGNg':'should\x20fail\x20to\x20change\x20owner\x20if\x20new\x20owner\x20does\x20not\x20exist','QTZKL':'voting','uIJSM':_0x3816fa(0x92),'IWhCJ':'delete/restore/purge','GCAgy':function(_0x2da8ac,_0x466e0a,_0x1667bc){return _0x2da8ac(_0x466e0a,_0x1667bc);},'fpDWi':_0x3816fa(0xf0),'MMlSc':'parse','rnuKC':function(_0x4d6578,_0x3995a2,_0x121e2f){return _0x4d6578(_0x3995a2,_0x121e2f);},'ogHbu':_0x3816fa(0x210),'MzOwx':'should\x20error\x20if\x20user\x20does\x20not\x20exist','jmjKD':_0x3816fa(0x2e5),'uviBf':'upload\x20methods','sBOLM':_0x3816fa(0x31b),'AuKup':_0x3816fa(0x224)};let _0x4e2357,_0x1f9266,_0x3535ae,_0x3c729f,_0x3048e9,_0x36a198;_0x27786f[_0x3816fa(0x122)](before,_0x5b9eb5=>{const _0x4d1197=_0x3816fa,_0x3027f4={'TESqw':_0x27786f['qgmcv'],'AfTbH':function(_0x3a06b4,_0x14dbba){const _0x596cab=_0xe948;return _0x27786f[_0x596cab(0x82)](_0x3a06b4,_0x14dbba);},'zbgvk':_0x4d1197(0x303),'tZZkn':'VGWVz','tLyej':_0x27786f[_0x4d1197(0xe5)]};async[_0x4d1197(0x20a)]({'voterUid':function(_0x57ec10){const _0xcb65f8=_0x4d1197;user['create']({'username':_0x3027f4[_0xcb65f8(0x70)]},_0x57ec10);},'voteeUid':function(_0x63eafd){const _0x3c9347=_0x4d1197;if(_0x3027f4[_0x3c9347(0x1b3)](_0x3027f4[_0x3c9347(0x1e7)],_0x3027f4[_0x3c9347(0x30d)])){const _0x4f0a3d={'AIaxz':_0x3c9347(0x1b1),'CUWKi':function(_0x24776a){return _0x24776a();}};_0x535c60['waterfall']([_0x1402bf['apply'](_0x249534['uploads'][_0x3c9347(0x11f)],_0x5d81c1,['nonexistant.xls']),_0x31c345[_0x3c9347(0x3c9)](_0x128b33['uploads'][_0x3c9347(0x25e)],_0x27310d)],(_0x5ec7d2,_0x4860ed)=>{const _0x3fc98d=_0x3c9347;_0xf94bc5[_0x3fc98d(0x1a7)](_0x5ec7d2),_0x4c85da[_0x3fc98d(0x34e)](_0x4860ed[_0x3fc98d(0x1f2)],0x5),_0x52681f['strictEqual'](![],_0x4860ed[_0x3fc98d(0x38f)](_0x4f0a3d[_0x3fc98d(0x1da)])),_0x4f0a3d[_0x3fc98d(0x3bd)](_0x2f2482);});}else user[_0x3c9347(0x146)]({'username':'upvotee'},_0x63eafd);},'globalModUid':function(_0x51e844){user['create']({'username':'globalmod','password':'globalmodpwd'},_0x51e844);},'category':function(_0x3a3c0b){const _0x5bd729=_0x4d1197;categories[_0x5bd729(0x146)]({'name':_0x3027f4[_0x5bd729(0x106)],'description':_0x5bd729(0x192)},_0x3a3c0b);}},(_0x45af61,_0x1f5c90)=>{const _0x2ef49c=_0x4d1197;if(_0x45af61)return _0x27786f[_0x2ef49c(0x1ac)](_0x5b9eb5,_0x45af61);_0x4e2357=_0x1f5c90['voterUid'],_0x1f9266=_0x1f5c90[_0x2ef49c(0x1b4)],_0x3535ae=_0x1f5c90[_0x2ef49c(0x28a)],_0x36a198=_0x1f5c90[_0x2ef49c(0x10d)][_0x2ef49c(0x89)],topics[_0x2ef49c(0xaf)]({'uid':_0x1f5c90[_0x2ef49c(0x1b4)],'cid':_0x1f5c90[_0x2ef49c(0x10d)][_0x2ef49c(0x89)],'title':_0x2ef49c(0x21e),'content':_0x2ef49c(0x15e)},(_0x4aa1be,_0x2e1c1b)=>{const _0x5e1a28=_0x2ef49c;if(_0x4aa1be)return _0x5b9eb5(_0x4aa1be);_0x3c729f=_0x2e1c1b[_0x5e1a28(0x1bc)],_0x3048e9=_0x2e1c1b['topicData'],groups[_0x5e1a28(0x1af)](_0x5e1a28(0x37d),_0x3535ae,_0x5b9eb5);});});}),it(_0x27786f['cBXyS'],async()=>{const _0x32aedb=_0x3816fa,_0xc3a817={'opwGw':function(_0x5ad825,_0x15c49c,_0x51f164){return _0x5ad825(_0x15c49c,_0x51f164);}},_0x1e320e=require(_0x32aedb(0xf4)),_0x2c67b3=_0x1e320e[_0x32aedb(0x1e3)](async _0x29d051=>{const _0xfe12ee=_0x32aedb;request(nconf['get']('url')+_0xfe12ee(0x384),{'json':!![]},(_0x2930e3,_0x2f9ac1,_0x342c5d)=>{const _0x2d63f5=_0xfe12ee;_0xc3a817[_0x2d63f5(0xc8)](_0x29d051,_0x2930e3,_0x342c5d);});}),_0x59e43e=await topics[_0x32aedb(0xaf)]({'uid':_0x3535ae,'cid':_0x36a198,'title':_0x27786f[_0x32aedb(0x74)],'content':_0x32aedb(0x244)});let _0x38950b=await _0x2c67b3();assert['equal'](_0x38950b['categories'][0x0][_0x32aedb(0x1f4)][_0x32aedb(0xda)],_0x59e43e[_0x32aedb(0x1bc)][_0x32aedb(0xda)]),assert[_0x32aedb(0x260)](_0x38950b['categories'][0x0]['posts'][0x0]['content'],_0x27786f[_0x32aedb(0x3cb)]),assert[_0x32aedb(0x260)](_0x38950b[_0x32aedb(0x2cf)][0x0]['posts'][0x0][_0x32aedb(0xda)],_0x59e43e['postData'][_0x32aedb(0xda)]);const _0x437852=await user[_0x32aedb(0x146)]({'username':'teaserdelete'}),_0x195db0=await topics[_0x32aedb(0xaf)]({'uid':_0x437852,'cid':_0x36a198,'title':_0x27786f[_0x32aedb(0x74)],'content':_0x32aedb(0x2bd)});_0x38950b=await _0x2c67b3(),assert[_0x32aedb(0x260)](_0x38950b[_0x32aedb(0x2cf)][0x0][_0x32aedb(0x1f4)][_0x32aedb(0xda)],_0x195db0[_0x32aedb(0x1bc)][_0x32aedb(0xda)]),assert['equal'](_0x38950b['categories'][0x0]['posts'][0x0][_0x32aedb(0x2e4)],_0x32aedb(0x2bd)),assert['equal'](_0x38950b[_0x32aedb(0x2cf)][0x0][_0x32aedb(0x212)][0x0][_0x32aedb(0xda)],_0x195db0['postData']['pid']),await user[_0x32aedb(0x28d)](0x1,_0x437852),_0x38950b=await _0x27786f[_0x32aedb(0x96)](_0x2c67b3),assert[_0x32aedb(0x260)](_0x38950b[_0x32aedb(0x2cf)][0x0][_0x32aedb(0x1f4)][_0x32aedb(0xda)],_0x59e43e[_0x32aedb(0x1bc)][_0x32aedb(0xda)]),assert[_0x32aedb(0x260)](_0x38950b[_0x32aedb(0x2cf)][0x0][_0x32aedb(0x212)][0x0][_0x32aedb(0x2e4)],_0x32aedb(0x244)),assert['equal'](_0x38950b['categories'][0x0]['posts'][0x0][_0x32aedb(0xda)],_0x59e43e[_0x32aedb(0x1bc)][_0x32aedb(0xda)]);}),_0x27786f[_0x3816fa(0x350)](it,_0x3816fa(0x1c2),async()=>{const _0x3a95da=_0x3816fa,_0x10b29b=await user[_0x3a95da(0x146)]({'username':_0x3a95da(0xee)}),_0x40e6f5=await user[_0x3a95da(0x146)]({'username':_0x3a95da(0x1f3)}),_0x515d22=await topics[_0x3a95da(0xaf)]({'uid':_0x10b29b,'cid':_0x36a198,'title':_0x27786f[_0x3a95da(0xdc)],'content':_0x27786f[_0x3a95da(0x39a)]}),_0x3e04f1=await topics['reply']({'uid':_0x10b29b,'tid':_0x515d22[_0x3a95da(0xa9)]['tid'],'content':_0x3a95da(0x376)}),_0xf5a2=_0x515d22[_0x3a95da(0x1bc)]['pid'],_0x369184=_0x3e04f1[_0x3a95da(0xda)];assert[_0x3a95da(0x1b9)](await db['sortedSetScores'](_0x3a95da(0x124)+_0x515d22[_0x3a95da(0xa9)][_0x3a95da(0x98)]+':posters',[_0x10b29b,_0x40e6f5]),[0x2,null]),await posts[_0x3a95da(0x198)]([_0xf5a2,_0x369184],_0x40e6f5),assert[_0x3a95da(0x1b9)](await db[_0x3a95da(0x2fc)](_0x3a95da(0x124)+_0x515d22[_0x3a95da(0xa9)][_0x3a95da(0x98)]+':posters',[_0x10b29b,_0x40e6f5]),[0x0,0x2]),assert['deepStrictEqual'](await posts[_0x3a95da(0x27d)]([_0xf5a2,_0x369184],_0x10b29b),[![],![]]),assert['deepStrictEqual'](await posts[_0x3a95da(0x27d)]([_0xf5a2,_0x369184],_0x40e6f5),[!![],!![]]),assert[_0x3a95da(0x34e)](await user[_0x3a95da(0x2d2)](_0x10b29b,_0x27786f[_0x3a95da(0x227)]),0x0),assert['strictEqual'](await user[_0x3a95da(0x2d2)](_0x40e6f5,_0x27786f[_0x3a95da(0x227)]),0x2),assert['strictEqual'](await user[_0x3a95da(0x2d2)](_0x10b29b,_0x27786f[_0x3a95da(0x2d6)]),0x0),assert[_0x3a95da(0x34e)](await user[_0x3a95da(0x2d2)](_0x40e6f5,_0x3a95da(0x6c)),0x1),assert[_0x3a95da(0x34e)](await db['sortedSetScore'](_0x27786f[_0x3a95da(0x3c6)],_0x10b29b),0x0),assert[_0x3a95da(0x34e)](await db['sortedSetScore'](_0x3a95da(0x322),_0x40e6f5),0x2),assert[_0x3a95da(0x34e)](await topics[_0x3a95da(0x27d)](_0x515d22[_0x3a95da(0xa9)][_0x3a95da(0x98)],_0x10b29b),![]),assert[_0x3a95da(0x34e)](await topics[_0x3a95da(0x27d)](_0x515d22[_0x3a95da(0xa9)][_0x3a95da(0x98)],_0x40e6f5),!![]);}),_0x27786f[_0x3816fa(0x39b)](it,_0x27786f['MBGNg'],async()=>{const _0x19e7d6=_0x3816fa;try{await posts[_0x19e7d6(0x198)]([0x1],_0x19e7d6(0x2c3));}catch(_0x347ef9){if(_0x27786f[_0x19e7d6(0x3ad)]===_0x27786f['tLNRk'])assert['strictEqual'](_0x347ef9[_0x19e7d6(0xbd)],_0x27786f['CDqtK']);else{const _0x168b74={'QrmEL':function(_0x24ad7b){const _0x290f51=_0x19e7d6;return _0x27786f[_0x290f51(0x96)](_0x24ad7b);}};_0x1d4f1b[_0x19e7d6(0x1a7)](_0x1f61c4),_0x5cbe63[_0x19e7d6(0x3c3)](_0x15ed24,_0x19e7d6(0x102),(_0x440515,_0x275514)=>{const _0x24dbef=_0x19e7d6;_0x39b9f2[_0x24dbef(0x1a7)](_0x440515),_0x2a1198[_0x24dbef(0x34e)](_0x275514,0x1),_0x168b74['QrmEL'](_0x34fd16);});}}}),_0x27786f[_0x3816fa(0xd5)](it,_0x3816fa(0xac),async()=>{const _0x2ce4cc=_0x3816fa;try{await socketPosts[_0x2ce4cc(0x198)]({'uid':_0x4e2357},{'pids':[0x1,0x2],'toUid':_0x4e2357});}catch(_0x108725){assert[_0x2ce4cc(0x34e)](_0x108725[_0x2ce4cc(0xbd)],_0x2ce4cc(0x2da));}}),it(_0x3816fa(0x2c6),_0x1ecf33=>{const _0x3de3b9=_0x3816fa;if(_0x27786f[_0x3de3b9(0x1e6)]==='AFScn')posts[_0x3de3b9(0x32d)](0x270f,(_0x61048f,_0x387f8f)=>{const _0x23e37c=_0x3de3b9;assert[_0x23e37c(0x1a7)](_0x61048f),assert[_0x23e37c(0x260)](_0x387f8f,null),_0x1ecf33();});else{const _0x481a3d={'eOqAc':function(_0x3915b0){return _0x3915b0();}};_0x805f5b[_0x3de3b9(0x32d)](0x270f,(_0x594a6d,_0x288616)=>{const _0x5a359e=_0x3de3b9;_0x3784ee['ifError'](_0x594a6d),_0x48ebef[_0x5a359e(0x260)](_0x288616,null),_0x481a3d[_0x5a359e(0x183)](_0x340d22);});}}),describe(_0x27786f[_0x3816fa(0x1b6)],()=>{const _0x5d769e=_0x3816fa,_0xa54794={'kORkb':_0x27786f['qrFom'],'EoNpY':_0x27786f[_0x5d769e(0x81)],'sPJBj':_0x5d769e(0xae),'sgnoT':_0x27786f[_0x5d769e(0x26f)],'LvEcI':_0x5d769e(0xf2),'nCywI':_0x5d769e(0x304),'pIkEG':_0x27786f[_0x5d769e(0x38c)],'uctYq':function(_0x52b742){return _0x52b742();}};it(_0x5d769e(0x1a0),_0x18b92d=>{const _0x1975a6=_0x5d769e,_0x320b6a={'PPfGD':_0xa54794[_0x1975a6(0x2d3)],'mumGB':'registered-users'};privileges[_0x1975a6(0x2cf)][_0x1975a6(0x9e)]([_0xa54794[_0x1975a6(0x1be)],_0xa54794[_0x1975a6(0x1a3)]],_0x36a198,_0xa54794[_0x1975a6(0x3a6)],_0xce5d62=>{const _0x20f2a1=_0x1975a6;assert[_0x20f2a1(0x1a7)](_0xce5d62),socketPosts[_0x20f2a1(0x1ef)]({'uid':_0x4e2357},{'pid':_0x3c729f[_0x20f2a1(0xda)],'room_id':_0x20f2a1(0x38a)},_0x583de0=>{const _0x49726f=_0x20f2a1,_0x155438={'zsrbU':_0x320b6a[_0x49726f(0x156)],'EnYEi':_0x49726f(0xae),'vQFnj':_0x320b6a[_0x49726f(0x3ca)]};assert[_0x49726f(0x260)](_0x583de0['message'],_0x320b6a['PPfGD']),socketPosts[_0x49726f(0x390)]({'uid':_0x4e2357},{'pid':_0x3c729f[_0x49726f(0xda)],'room_id':_0x49726f(0x38a)},_0x205957=>{const _0x5777a1=_0x49726f;assert['equal'](_0x205957[_0x5777a1(0xbd)],_0x155438[_0x5777a1(0x162)]),privileges[_0x5777a1(0x2cf)][_0x5777a1(0x2f9)](['groups:posts:upvote',_0x155438[_0x5777a1(0x148)]],_0x36a198,_0x155438[_0x5777a1(0xef)],_0x2e0572=>{const _0x478c40=_0x5777a1;assert[_0x478c40(0x1a7)](_0x2e0572),_0x18b92d();});});});});}),_0x27786f[_0x5d769e(0x209)](it,_0x27786f[_0x5d769e(0x3d1)],_0x24fa45=>{const _0x41ec0e=_0x5d769e;_0x41ec0e(0x25d)!==_0x27786f[_0x41ec0e(0xdd)]?socketPosts[_0x41ec0e(0x1ef)]({'uid':_0x4e2357},{'pid':_0x3c729f[_0x41ec0e(0xda)],'room_id':_0x41ec0e(0x38a)},(_0x5c9865,_0x44fd3c)=>{const _0x13d3d8=_0x41ec0e;assert[_0x13d3d8(0x1a7)](_0x5c9865),assert['equal'](_0x44fd3c[_0x13d3d8(0xaf)][_0x13d3d8(0x276)],0x1),assert[_0x13d3d8(0x260)](_0x44fd3c[_0x13d3d8(0xaf)][_0x13d3d8(0x2fa)],0x0),assert['equal'](_0x44fd3c[_0x13d3d8(0xaf)][_0x13d3d8(0x272)],0x1),assert[_0x13d3d8(0x260)](_0x44fd3c[_0x13d3d8(0x31e)][_0x13d3d8(0x76)],0x1),posts[_0x13d3d8(0x27e)](_0x3c729f[_0x13d3d8(0xda)],_0x4e2357,(_0x1f19c4,_0xb7af9)=>{const _0x19abb9=_0x13d3d8;assert[_0x19abb9(0x1a7)](_0x1f19c4),assert['equal'](_0xb7af9[_0x19abb9(0x205)],!![]),assert[_0x19abb9(0x260)](_0xb7af9[_0x19abb9(0x22c)],![]),_0x24fa45();});}):_0x27617d[_0x41ec0e(0xc6)][_0x41ec0e(0x319)](_0x189c9f,_0x57dfd5=>{const _0x48b8c4=_0x41ec0e;_0x270e09['ifError'](_0x57dfd5),_0x3b6be3[_0x48b8c4(0x26b)](_0x48b8c4(0x1f8)+_0x19eef1+_0x48b8c4(0x137),(_0x5a62be,_0x4ae18b)=>{const _0x5b8b19=_0x48b8c4;_0x2e5184[_0x5b8b19(0x1a7)](_0x5a62be),_0x59c84d['strictEqual'](_0x4ae18b,0x2),_0x40c395();});});}),_0x27786f['rWIXv'](it,_0x5d769e(0x168),_0x4695eb=>{const _0x3421dc=_0x5d769e;socketPosts[_0x3421dc(0x134)]({'uid':_0x3535ae},{'pid':_0x3c729f['pid'],'cid':_0x36a198},(_0x57ce9c,_0x39ebbf)=>{const _0xf3a835=_0x3421dc;assert['ifError'](_0x57ce9c),assert[_0xf3a835(0x260)](_0x39ebbf[_0xf3a835(0x3a5)],0x1),assert['equal'](_0x39ebbf[_0xf3a835(0x392)],0x0),assert(Array[_0xf3a835(0x201)](_0x39ebbf[_0xf3a835(0x39f)])),assert[_0xf3a835(0x260)](_0x39ebbf['upvoters'][0x0][_0xf3a835(0x341)],_0xa54794[_0xf3a835(0xe7)]),_0x4695eb();});}),it(_0x5d769e(0xc7),_0x4dd4b1=>{const _0xf80828=_0x5d769e;socketPosts[_0xf80828(0x1ce)]({'uid':_0x3535ae},[_0x3c729f[_0xf80828(0xda)]],(_0x33f02b,_0x27cdaa)=>{const _0x1aa295=_0xf80828;_0xa54794[_0x1aa295(0xb3)]!==_0xa54794[_0x1aa295(0xc3)]?(assert[_0x1aa295(0x1a7)](_0x33f02b),assert[_0x1aa295(0x260)](_0x27cdaa[0x0][_0x1aa295(0x37e)],0x0),assert[_0x1aa295(0x260)](_0x27cdaa[0x0][_0x1aa295(0xc4)],_0x1aa295(0xf2)),_0xa54794[_0x1aa295(0x23d)](_0x4dd4b1)):(_0x1f414c[_0x1aa295(0x1a7)](_0x119364),_0xa7090[_0x1aa295(0x260)](!![],_0x1bc2c0),_0x4cb1b5());});}),it(_0x5d769e(0x194),_0x9e716d=>{const _0x434c07=_0x5d769e;socketPosts[_0x434c07(0x22d)]({'uid':_0x4e2357},{'pid':_0x3c729f[_0x434c07(0xda)],'room_id':_0x434c07(0x38a)},(_0x2827f5,_0x3168b4)=>{const _0xca2e16=_0x434c07;assert[_0xca2e16(0x1a7)](_0x2827f5),assert[_0xca2e16(0x260)](_0x3168b4['post'][_0xca2e16(0x276)],0x0),assert['equal'](_0x3168b4[_0xca2e16(0xaf)]['downvotes'],0x0),assert[_0xca2e16(0x260)](_0x3168b4[_0xca2e16(0xaf)][_0xca2e16(0x272)],0x0),assert[_0xca2e16(0x260)](_0x3168b4[_0xca2e16(0x31e)][_0xca2e16(0x76)],0x0),posts[_0xca2e16(0x27e)](_0x3c729f['pid'],_0x4e2357,(_0xc4a4fb,_0xf44698)=>{const _0x13889b=_0xca2e16;assert[_0x13889b(0x1a7)](_0xc4a4fb),assert[_0x13889b(0x260)](_0xf44698[_0x13889b(0x205)],![]),assert[_0x13889b(0x260)](_0xf44698[_0x13889b(0x22c)],![]),_0x9e716d();});});}),it(_0x27786f[_0x5d769e(0x2f7)],_0x147103=>{const _0x443a9e=_0x5d769e,_0x439eee={'WdjSP':function(_0x353f79){return _0x353f79();}};socketPosts[_0x443a9e(0x390)]({'uid':_0x4e2357},{'pid':_0x3c729f['pid'],'room_id':_0x27786f[_0x443a9e(0x6e)]},(_0x437d8d,_0x478d69)=>{const _0xc347d9=_0x443a9e,_0x3bda9d=_0xc347d9(0xd3)['split']('|');let _0x5c3dac=0x0;while(!![]){switch(_0x3bda9d[_0x5c3dac++]){case'0':posts[_0xc347d9(0x27e)](_0x3c729f[_0xc347d9(0xda)],_0x4e2357,(_0x2b53d7,_0xe92b83)=>{const _0x3d6f07=_0xc347d9;assert['ifError'](_0x2b53d7),assert['equal'](_0xe92b83[_0x3d6f07(0x205)],![]),assert[_0x3d6f07(0x260)](_0xe92b83[_0x3d6f07(0x22c)],!![]),_0x439eee[_0x3d6f07(0x346)](_0x147103);});continue;case'1':assert['equal'](_0x478d69[_0xc347d9(0x31e)][_0xc347d9(0x76)],-0x1);continue;case'2':assert[_0xc347d9(0x1a7)](_0x437d8d);continue;case'3':assert[_0xc347d9(0x260)](_0x478d69[_0xc347d9(0xaf)][_0xc347d9(0x2fa)],0x1);continue;case'4':assert[_0xc347d9(0x260)](_0x478d69[_0xc347d9(0xaf)][_0xc347d9(0x276)],0x0);continue;case'5':assert[_0xc347d9(0x260)](_0x478d69[_0xc347d9(0xaf)]['votes'],-0x1);continue;}break;}});}),_0x27786f[_0x5d769e(0x209)](it,_0x5d769e(0x20d),async()=>{const _0x3ac477=_0x5d769e,_0x297fff=meta['config'][_0x3ac477(0x2d8)];meta['config']['downvotesPerDay']=0x1;let _0x4ba7ad;const _0x50d177=await topics[_0x3ac477(0x394)]({'uid':_0x1f9266,'tid':_0x3048e9[_0x3ac477(0x98)],'content':_0x27786f[_0x3ac477(0x8d)]});try{await socketPosts[_0x3ac477(0x390)]({'uid':_0x4e2357},{'pid':_0x50d177[_0x3ac477(0xda)],'room_id':_0x27786f[_0x3ac477(0x6e)]});}catch(_0x5957b9){_0x4ba7ad=_0x5957b9;}assert[_0x3ac477(0x260)](_0x4ba7ad[_0x3ac477(0xbd)],_0x27786f[_0x3ac477(0x3b1)]),meta[_0x3ac477(0x2b6)][_0x3ac477(0x2d8)]=_0x297fff;}),_0x27786f[_0x5d769e(0x350)](it,_0x27786f[_0x5d769e(0x1e2)],async()=>{const _0x55c6d0=_0x5d769e,_0x9cb5d6={'FMgBQ':_0x27786f[_0x55c6d0(0xbe)],'njSou':function(_0x46ccfe){const _0x2d789e=_0x55c6d0;return _0x27786f[_0x2d789e(0xd0)](_0x46ccfe);}},_0x48e68f=meta[_0x55c6d0(0x2b6)][_0x55c6d0(0xa8)];meta[_0x55c6d0(0x2b6)][_0x55c6d0(0xa8)]=0x1;let _0x18c3ad;const _0x268fb0=await topics['reply']({'uid':_0x1f9266,'tid':_0x3048e9[_0x55c6d0(0x98)],'content':_0x55c6d0(0x3b0)});try{_0x27786f[_0x55c6d0(0x1fc)](_0x55c6d0(0x121),_0x55c6d0(0x320))?await socketPosts[_0x55c6d0(0x390)]({'uid':_0x4e2357},{'pid':_0x268fb0[_0x55c6d0(0xda)],'room_id':_0x55c6d0(0x38a)}):_0x20bd94[_0x55c6d0(0xdf)]({'uid':_0x1e8fed},{},_0x22361f=>{const _0x3aeaaf=_0x55c6d0;_0x4b0cb1[_0x3aeaaf(0x260)](_0x22361f[_0x3aeaaf(0xbd)],_0x9cb5d6[_0x3aeaaf(0x120)]),_0x9cb5d6[_0x3aeaaf(0x142)](_0x56930d);});}catch(_0x541ca8){_0x18c3ad=_0x541ca8;}assert[_0x55c6d0(0x260)](_0x18c3ad[_0x55c6d0(0xbd)],_0x55c6d0(0x2bb)),meta[_0x55c6d0(0x2b6)][_0x55c6d0(0xa8)]=_0x48e68f;});}),describe(_0x27786f[_0x3816fa(0x152)],()=>{const _0x214752=_0x3816fa,_0x2cc163={'lkLZM':function(_0x339304,_0x1053a5){return _0x339304!==_0x1053a5;},'jMLNg':'WOxUW'};_0x27786f['cFAef']!==_0x27786f[_0x214752(0x398)]?(_0x347497['equal'](_0x18feae['message'],_0x27786f['qrFom']),_0x385f1e()):(it(_0x27786f[_0x214752(0x2e2)],_0x462055=>{const _0x3be50=_0x214752,_0x115429={'nyEVc':function(_0x1b9c9c){return _0x1b9c9c();}};socketPosts[_0x3be50(0x2bc)]({'uid':_0x4e2357},{'pid':_0x3c729f[_0x3be50(0xda)],'room_id':'topic_'+_0x3c729f[_0x3be50(0x98)]},(_0x25eb0e,_0x13a6f0)=>{const _0xca1eb4=_0x3be50;_0x2cc163[_0xca1eb4(0x118)](_0xca1eb4(0xcc),_0x2cc163[_0xca1eb4(0x362)])?(assert['ifError'](_0x25eb0e),assert['equal'](_0x13a6f0['isBookmarked'],!![]),posts[_0xca1eb4(0x1d9)](_0x3c729f[_0xca1eb4(0xda)],_0x4e2357,(_0x3fcb77,_0x11dc9f)=>{const _0xa80f5b=_0xca1eb4;assert[_0xa80f5b(0x1a7)](_0x3fcb77),assert[_0xa80f5b(0x260)](_0x11dc9f,!![]),_0x115429[_0xa80f5b(0xbf)](_0x462055);})):(_0x3afdb9[_0xca1eb4(0x1a7)](_0x292a69),_0x8b1e01[_0xca1eb4(0x260)](_0x3d4f05[0x0],![]),_0xc525e2());});}),_0x27786f[_0x214752(0x383)](it,_0x214752(0x29c),_0x1dea57=>{const _0x3385b7=_0x214752;socketPosts[_0x3385b7(0xec)]({'uid':_0x4e2357},{'pid':_0x3c729f[_0x3385b7(0xda)],'room_id':'topic_'+_0x3c729f[_0x3385b7(0x98)]},(_0x3fd56e,_0x4eb1fd)=>{const _0x5b2de0=_0x3385b7;assert[_0x5b2de0(0x1a7)](_0x3fd56e),assert[_0x5b2de0(0x260)](_0x4eb1fd[_0x5b2de0(0x99)],![]),posts[_0x5b2de0(0x1d9)]([_0x3c729f[_0x5b2de0(0xda)]],_0x4e2357,(_0x56886b,_0x1082ba)=>{const _0x5d94ff=_0x5b2de0;assert[_0x5d94ff(0x1a7)](_0x56886b),assert['equal'](_0x1082ba[0x0],![]),_0x1dea57();});});}));}),describe(_0x3816fa(0x170),()=>{const _0x58ffb2=_0x3816fa,_0x494a7b={'CsYyv':_0x58ffb2(0x186),'Eykzb':function(_0x4e6c95){return _0x27786f['QZimC'](_0x4e6c95);}};if(_0x27786f['Arknq']('mymij',_0x27786f['ogVKe'])){const _0x4a68b0={'YwnEM':function(_0x3d3966){const _0x597e90=_0x58ffb2;return _0x27786f[_0x597e90(0xa0)](_0x3d3966);}},_0x4076f9=_0xd1a614[_0x58ffb2(0x2b6)][_0x58ffb2(0x127)];_0x14ca68[_0x58ffb2(0x2b6)][_0x58ffb2(0x127)]=0x1,_0x264073[_0x58ffb2(0x30b)]({'uid':_0x1b44fe},{'pid':_0x34c124,'content':_0x27786f['IamkL'],'tags':[]},_0x2d6538=>{const _0xf0f886=_0x58ffb2;_0x46f757[_0xf0f886(0x260)](_0x2d6538[_0xf0f886(0xbd)],_0xf0f886(0x135)+_0x29fb4d[_0xf0f886(0x2b6)][_0xf0f886(0x127)]+']]'),_0x306ca4[_0xf0f886(0x2b6)][_0xf0f886(0x127)]=_0x4076f9,_0x4a68b0[_0xf0f886(0x243)](_0x638383);});}else _0x27786f[_0x58ffb2(0x2aa)](it,_0x58ffb2(0x395),_0x5069d3=>{const _0xb527ed={'dMgMo':'whoa.gif','jdLCU':function(_0x7bc28c){const _0x37466c=_0xe948;return _0x27786f[_0x37466c(0x254)](_0x7bc28c);}};socketPosts['loadPostTools']({'uid':_0x3535ae},null,_0x21c60b=>{const _0x406e89=_0xe948;'EgdzB'===_0x494a7b[_0x406e89(0x3d4)]?(assert[_0x406e89(0x260)](_0x21c60b[_0x406e89(0xbd)],'[[error:invalid-data]]'),_0x494a7b[_0x406e89(0x150)](_0x5069d3)):(_0x44186f[_0x406e89(0x1a7)](_0x4054b1),_0x8bb512[_0x406e89(0x34e)](0x4,_0x4a1384[_0x406e89(0x1f2)]),_0x396db3[_0x406e89(0x34e)](![],_0x547029['includes'](_0xb527ed[_0x406e89(0x321)])),_0xb527ed[_0x406e89(0x39c)](_0x1b1732));});}),it(_0x27786f[_0x58ffb2(0x14a)],_0xab4896=>{const _0x1533c9=_0x58ffb2,_0x347227={'eEkRq':_0x27786f['oaMPo'],'kmwjm':function(_0x26498d){const _0x5bd90e=_0xe948;return _0x27786f[_0x5bd90e(0xd0)](_0x26498d);},'GYNrN':function(_0x14a854,_0x3b65a6){const _0x6409ad=_0xe948;return _0x27786f[_0x6409ad(0x87)](_0x14a854,_0x3b65a6);}};socketPosts[_0x1533c9(0x33c)]({'uid':_0x3535ae},{'pid':_0x3c729f[_0x1533c9(0xda)],'cid':_0x36a198},(_0x2c2dcd,_0x1e44ed)=>{const _0x5e3259=_0x1533c9,_0xf7862e=_0x347227['eEkRq'][_0x5e3259(0x364)]('|');let _0x3c5eaf=0x0;while(!![]){switch(_0xf7862e[_0x3c5eaf++]){case'0':_0x347227[_0x5e3259(0x3ac)](_0xab4896);continue;case'1':_0x347227[_0x5e3259(0x175)](assert,_0x1e44ed[_0x5e3259(0x212)][_0x5e3259(0x1df)]);continue;case'2':_0x347227[_0x5e3259(0x175)](assert,_0x1e44ed['posts'][_0x5e3259(0x36a)]);continue;case'3':assert(_0x1e44ed['posts'][_0x5e3259(0x13b)]);continue;case'4':assert(_0x1e44ed[_0x5e3259(0x212)][_0x5e3259(0x309)]);continue;case'5':assert[_0x5e3259(0x1a7)](_0x2c2dcd);continue;}break;}});});}),describe(_0x27786f[_0x3816fa(0x274)],()=>{const _0x103da0=_0x3816fa,_0x218ba8={'TKRDP':_0x103da0(0xd8),'RKTfd':_0x27786f[_0x103da0(0xeb)],'zbPhR':'groups:purge','eulzi':_0x27786f[_0x103da0(0xbe)],'FBGIr':function(_0x4e0793,_0x18fee9){const _0x5eb23a=_0x103da0;return _0x27786f[_0x5eb23a(0x2dd)](_0x4e0793,_0x18fee9);},'gSZtE':_0x103da0(0x1fa),'GDvVM':'<a\x20href=\x22/users\x22>test</a>\x20<a\x20href=\x22youtube.com\x22>youtube</a>\x20some\x20test\x20<img\x20src=\x22/path/to/img\x22/>','yhonw':function(_0x4cae64){return _0x27786f['Qtbtd'](_0x4cae64);},'SeqZQ':_0x27786f[_0x103da0(0x302)],'QFzvi':function(_0x48a04b,_0x1c26c4){const _0x20f133=_0x103da0;return _0x27786f[_0x20f133(0x1fc)](_0x48a04b,_0x1c26c4);},'cnhvt':_0x103da0(0x2e3),'Psgpg':_0x103da0(0x2f6),'QAuPr':'123456','QBPOj':_0x27786f['aHmRV'],'VPtsQ':_0x103da0(0x245),'axJCS':function(_0x351b39){return _0x351b39();},'gmXIy':_0x103da0(0x287),'xfJPH':_0x27786f[_0x103da0(0x3a4)]};if(_0x27786f[_0x103da0(0x174)]!==_0x103da0(0x264)){const _0x2956c7=_0xcbad25[_0x103da0(0x3c5)];_0x243e1e[_0x103da0(0x3c5)]=_0x218ba8[_0x103da0(0x310)];const _0x52a257={'pid':0x270f,'content':_0x218ba8['RKTfd']};_0x3c0c5d[_0x103da0(0x101)](_0x52a257,_0xaf3853=>{const _0x5557b1=_0x103da0;_0xca817f[_0x5557b1(0x1a7)](_0xaf3853),_0x549a5f['parsePost'](_0x52a257,_0x32e5ee=>{const _0x248053=_0x5557b1;_0x162567[_0x248053(0x1a7)](_0x32e5ee),_0x2bbc3d[_0x248053(0x3c5)]=_0x2956c7,_0x21fcf4();});});}else{function _0x1c0837(_0x2fef2a){const _0xcc2a8e=_0x103da0,_0x122ea6={'CpKEU':_0xcc2a8e(0x371),'paEAe':_0x27786f[_0xcc2a8e(0x1b2)]};topics[_0xcc2a8e(0xaf)]({'uid':_0x4e2357,'cid':_0x36a198,'title':_0xcc2a8e(0x208),'content':_0xcc2a8e(0x358)},(_0x4c4d0e,_0x31c3c7)=>{const _0x6aadce=_0xcc2a8e;_0x6aadce(0x30f)!=='CEcZq'?_0x3c9ca8[_0x6aadce(0x30b)]({'pid':_0x3af7a4,'uid':0x1,'content':_0x122ea6[_0x6aadce(0x220)]},_0x46ee99):(assert[_0x6aadce(0x1a7)](_0x4c4d0e),topics[_0x6aadce(0x394)]({'uid':_0x4e2357,'tid':_0x31c3c7['topicData'][_0x6aadce(0x98)],'timestamp':Date[_0x6aadce(0x1ab)](),'content':_0x122ea6[_0x6aadce(0x237)]},(_0x51d9a9,_0x539a92)=>{assert['ifError'](_0x51d9a9),_0x2fef2a(_0x31c3c7,_0x539a92);}));});}let _0x3e6f6a,_0x55b4b2,_0x46f6e8;before(_0x502e1c=>{_0x1c0837((_0x1b476c,_0x5b4efc)=>{const _0x1da631=_0xe948;_0x3e6f6a=_0x1b476c['topicData']['tid'],_0x55b4b2=_0x1b476c[_0x1da631(0x1bc)][_0x1da631(0xda)],_0x46f6e8=_0x5b4efc[_0x1da631(0xda)],privileges[_0x1da631(0x2cf)]['give']([_0x218ba8['zbPhR']],_0x36a198,_0x1da631(0x2ec),_0x502e1c);});}),it(_0x103da0(0x300),_0x844fd3=>{const _0x3284af=_0x103da0;socketPosts[_0x3284af(0x28d)]({'uid':_0x4e2357},null,_0x4b9778=>{const _0x467059=_0x3284af;assert[_0x467059(0x260)](_0x4b9778[_0x467059(0xbd)],_0x218ba8[_0x467059(0xe8)]),_0x844fd3();});}),_0x27786f[_0x103da0(0x126)](it,_0x103da0(0x23e),_0x434f7e=>{const _0x4b54c=_0x103da0;if(_0x218ba8[_0x4b54c(0x2c5)](_0x4b54c(0x2e3),_0x218ba8['cnhvt'])){const _0x5cb734=_0x218ba8['FBGIr'](_0x536a4b,_0x218ba8[_0x4b54c(0x154)]),_0x34fef5=_0x218ba8['GDvVM'];let _0x12b6f4=_0x1323d0[_0x4b54c(0x23a)](_0x34fef5,_0x3c7d48[_0x4b54c(0x297)]);_0x12b6f4=_0x29fdcd[_0x4b54c(0x23a)](_0x12b6f4,_0x428e8e[_0x4b54c(0xe1)]),_0x7cc49c[_0x4b54c(0x260)](_0x12b6f4,_0x4b54c(0x136)+_0x5cb734[_0x4b54c(0x130)](_0x4b54c(0x377))+_0x4b54c(0x1a9)+_0x5cb734[_0x4b54c(0x130)]('base_url')+_0x4b54c(0x292)),_0x1f1e31();}else socketPosts[_0x4b54c(0x28d)]({'uid':_0x4e2357},{'pid':_0x46f6e8,'tid':_0x3e6f6a},_0x59b557=>{const _0x54e912=_0x4b54c,_0x5f5c82={'nTzkT':function(_0x19b77d){const _0xd0c66b=_0xe948;return _0x218ba8[_0xd0c66b(0x228)](_0x19b77d);}};assert[_0x54e912(0x1a7)](_0x59b557),posts[_0x54e912(0x3c3)](_0x46f6e8,_0x218ba8[_0x54e912(0x94)],(_0x4e75f7,_0x4e17ed)=>{const _0x41ee4c=_0x54e912;assert[_0x41ee4c(0x1a7)](_0x4e75f7),assert[_0x41ee4c(0x34e)](_0x4e17ed,0x1),_0x5f5c82[_0x41ee4c(0x3be)](_0x434f7e);});});}),_0x27786f[_0x103da0(0x144)](it,_0x27786f[_0x103da0(0x323)],_0xcb3456=>{const _0x3ba2de=_0x103da0,_0x419280={'nAtRP':'groups:posts:view_deleted','wlgth':function(_0x4d1dde,_0x58a21f){return _0x4d1dde(_0x58a21f);},'wndKA':function(_0x3993e3){return _0x3993e3();},'OoezM':_0x3ba2de(0x37d),'reRFi':_0x218ba8['QBPOj'],'gTePq':_0x218ba8[_0x3ba2de(0x114)],'IvyjR':_0x218ba8[_0x3ba2de(0x7b)]};async[_0x3ba2de(0x1ed)]([function(_0xdf84d2){const _0x8004f0=_0x3ba2de;user[_0x8004f0(0x146)]({'username':_0x218ba8[_0x8004f0(0x7b)],'password':_0x218ba8[_0x8004f0(0xd7)]},_0xdf84d2);},function(_0x4783bf,_0x27f9c8){const _0x2a4208=_0x3ba2de;groups[_0x2a4208(0x1af)]('Global\x20Moderators',_0x4783bf,_0x27f9c8);},function(_0x3d45de){const _0x48fec1=_0x3ba2de;privileges[_0x48fec1(0x2cf)]['rescind']([_0x419280[_0x48fec1(0x278)]],_0x36a198,'Global\x20Moderators',_0x3d45de);},function(_0x25b88a){const _0x296fe1=_0x3ba2de,_0x5f4d1f={'OACEg':function(_0x375504,_0xe7714a){const _0x540c25=_0xe948;return _0x419280[_0x540c25(0xe2)](_0x375504,_0xe7714a);},'RKZGT':function(_0x47e71c){const _0x457e56=_0xe948;return _0x419280[_0x457e56(0x399)](_0x47e71c);},'ZVnTr':'groups:posts:view_deleted','fMSqk':_0x419280['OoezM'],'efbKv':function(_0x3cf8c9,_0x3a54f0,_0xa2430f,_0x52863d){return _0x3cf8c9(_0x3a54f0,_0xa2430f,_0x52863d);},'SazdP':_0x419280[_0x296fe1(0xf3)]};_0x296fe1(0x245)!==_0x419280[_0x296fe1(0xf5)]?_0x2201e9[_0x296fe1(0x219)]({'uid':_0x5a69f9},_0x1e3b63,(_0x427a54,_0x5f081c)=>{const _0xf18ca5=_0x296fe1;_0x154f7[_0xf18ca5(0x1a7)](_0x427a54),_0x5f4d1f['OACEg'](_0x49caff,_0x5f081c),_0x5f4d1f[_0xf18ca5(0x1ae)](_0x66d64c);}):helpers[_0x296fe1(0x29f)](_0x419280['IvyjR'],'123456',(_0x2f5b49,_0x40bd36)=>{const _0x59b63d=_0x296fe1,_0x72c5bd={'Gytyr':_0x5f4d1f['ZVnTr'],'VQRCR':_0x5f4d1f[_0x59b63d(0x258)]};assert[_0x59b63d(0x1a7)](_0x2f5b49);const _0x42227a=_0x40bd36;_0x5f4d1f[_0x59b63d(0x344)](request,nconf[_0x59b63d(0x130)](_0x5f4d1f[_0x59b63d(0x226)])+_0x59b63d(0xa1)+_0x3e6f6a,{'jar':_0x42227a,'json':!![]},(_0x3abf37,_0x5191b3,_0x27b2fb)=>{const _0x1504ba=_0x59b63d;assert['ifError'](_0x3abf37),assert[_0x1504ba(0x260)](_0x27b2fb[_0x1504ba(0x212)][0x1][_0x1504ba(0x2e4)],_0x1504ba(0x333)),privileges['categories']['give']([_0x72c5bd[_0x1504ba(0x1ba)]],_0x36a198,_0x72c5bd[_0x1504ba(0xca)],_0x25b88a);});});}],_0xcb3456);}),_0x27786f['rWIXv'](it,'should\x20restore\x20a\x20post',_0x841b1e=>{socketPosts['restore']({'uid':_0x4e2357},{'pid':_0x46f6e8,'tid':_0x3e6f6a},_0x24d778=>{const _0x46b3a0=_0xe948,_0x4afa98={'Qrtyh':function(_0x38b9cc){return _0x38b9cc();}};assert['ifError'](_0x24d778),posts[_0x46b3a0(0x3c3)](_0x46f6e8,_0x218ba8[_0x46b3a0(0x94)],(_0x23a362,_0x326149)=>{const _0x5f1b6d=_0x46b3a0;assert[_0x5f1b6d(0x1a7)](_0x23a362),assert[_0x5f1b6d(0x34e)](_0x326149,0x0),_0x4afa98['Qrtyh'](_0x841b1e);});});}),it(_0x27786f[_0x103da0(0x359)],_0x14ea9a=>{const _0x5aa07a=_0x103da0,_0x5862af={'pJmsl':function(_0xd65ef3){return _0xd65ef3();}};_0x218ba8[_0x5aa07a(0x2c5)]('gjOWh',_0x5aa07a(0x31c))?_0xd1598c[_0x5aa07a(0x210)]([0x1,0x2,0x3],null,(_0xdffb3b,_0x3a9675)=>{const _0x1bcbad=_0x5aa07a;_0x9b8aae['ifError'](_0xdffb3b),_0x3b5e4c[_0x1bcbad(0x6b)]([0x1,0x2,0x3],_0x3a9675),_0x5862af[_0x1bcbad(0x37a)](_0x3c7c1f);}):socketPosts[_0x5aa07a(0x316)]({'uid':_0x3535ae},{'pids':[_0x46f6e8,_0x55b4b2]},_0x38d45a=>{const _0x402609=_0x5aa07a,_0x5d49bf={'BFTlF':function(_0x55a2a8,_0x5b46b8){return _0x55a2a8!==_0x5b46b8;},'aSSzz':_0x402609(0x3ba),'MLZJU':function(_0x21426b){const _0x5e1f37=_0x402609;return _0x218ba8[_0x5e1f37(0x217)](_0x21426b);}};assert[_0x402609(0x1a7)](_0x38d45a),posts['getPostField'](_0x46f6e8,_0x218ba8['SeqZQ'],(_0x31d8ec,_0x4f598c)=>{const _0x1219af=_0x402609;assert[_0x1219af(0x1a7)](_0x31d8ec),assert['strictEqual'](_0x4f598c,0x1),posts['getPostField'](_0x55b4b2,_0x1219af(0x102),(_0x2b3b48,_0x2b19f9)=>{const _0x2a67fb=_0x1219af,_0xe58303={'lZoIX':function(_0x18f005){return _0x18f005();},'LPVrw':_0x2a67fb(0x38a)};if(_0x5d49bf['BFTlF'](_0x5d49bf[_0x2a67fb(0x2a7)],_0x5d49bf[_0x2a67fb(0x2a7)])){const _0x124ed8={'yDlyz':function(_0x462d14){const _0x366648=_0x2a67fb;return _0xe58303[_0x366648(0x2b1)](_0x462d14);}};_0x7cf543[_0x2a67fb(0x390)]({'uid':_0x12ea7a},{'pid':_0x4ab522[_0x2a67fb(0xda)],'room_id':_0xe58303['LPVrw']},(_0x405012,_0x153f0b)=>{const _0x14dcdc=_0x2a67fb,_0x12118a={'UhwLO':function(_0x498797){const _0x4040bb=_0xe948;return _0x124ed8[_0x4040bb(0x111)](_0x498797);}};_0x4d6dcb[_0x14dcdc(0x1a7)](_0x405012),_0x583d7c[_0x14dcdc(0x260)](_0x153f0b[_0x14dcdc(0xaf)]['upvotes'],0x0),_0xbb994[_0x14dcdc(0x260)](_0x153f0b[_0x14dcdc(0xaf)][_0x14dcdc(0x2fa)],0x1),_0x1e0296[_0x14dcdc(0x260)](_0x153f0b[_0x14dcdc(0xaf)][_0x14dcdc(0x272)],-0x1),_0x380b75[_0x14dcdc(0x260)](_0x153f0b[_0x14dcdc(0x31e)]['reputation'],-0x1),_0x29da9b[_0x14dcdc(0x27e)](_0x5564ae[_0x14dcdc(0xda)],_0x26e3f3,(_0x5eb959,_0x2cb82a)=>{const _0x417291=_0x14dcdc;_0x5f0838[_0x417291(0x1a7)](_0x5eb959),_0x131e63[_0x417291(0x260)](_0x2cb82a[_0x417291(0x205)],![]),_0x6ea7e5['equal'](_0x2cb82a[_0x417291(0x22c)],!![]),_0x12118a[_0x417291(0x1b0)](_0x324b66);});});}else assert[_0x2a67fb(0x1a7)](_0x2b3b48),assert[_0x2a67fb(0x34e)](_0x2b19f9,0x1),_0x5d49bf[_0x2a67fb(0x216)](_0x14ea9a);});});});}),it(_0x103da0(0x2d4),_0x290db2=>{const _0x46839d=_0x103da0,_0x2592fa={'gXpax':function(_0x57837e){const _0x58423b=_0xe948;return _0x218ba8[_0x58423b(0x217)](_0x57837e);}};_0x218ba8['gmXIy']===_0x46839d(0x286)?(_0x2e19e1[_0x46839d(0x1a7)](_0xd454e),_0x239590[_0x46839d(0x260)](_0x35433e[_0x46839d(0x205)],!![]),_0xc49df0['equal'](_0x1ae81f[_0x46839d(0x22c)],![]),_0x2592fa['gXpax'](_0xdbbe35)):topics[_0x46839d(0xaf)]({'uid':_0x4e2357,'cid':_0x36a198,'title':_0x46839d(0x160),'content':_0x218ba8['xfJPH']},(_0x26a06e,_0x508756)=>{const _0x19b974=_0x46839d;assert[_0x19b974(0x1a7)](_0x26a06e),socketPosts['deletePosts']({'uid':_0x3535ae},{'pids':[_0x508756['postData'][_0x19b974(0xda)]]},_0x5142d3=>{const _0x234130=_0x19b974;assert[_0x234130(0x1a7)](_0x5142d3),topics['getTopicField'](_0x508756[_0x234130(0xa9)][_0x234130(0x98)],'deleted',(_0x376b77,_0x15beb8)=>{const _0x578431=_0x234130;assert[_0x578431(0x1a7)](_0x376b77),assert['strictEqual'](_0x15beb8,0x1),_0x290db2();});});});}),it(_0x103da0(0x2c2),_0x50118f=>{const _0x56c2d2=_0x103da0;_0x27786f[_0x56c2d2(0x87)](_0x1c0837,(_0x4595ed,_0x53228e)=>{const _0x230030=_0x56c2d2;socketPosts[_0x230030(0x86)]({'uid':_0x4e2357},{'pids':[_0x53228e['pid'],_0x4595ed[_0x230030(0x1bc)][_0x230030(0xda)]],'tid':_0x4595ed[_0x230030(0xa9)][_0x230030(0x98)]},_0x36bcd8=>{const _0x7cfb11=_0x230030;assert[_0x7cfb11(0x1a7)](_0x36bcd8),posts[_0x7cfb11(0x234)]('post:'+_0x53228e[_0x7cfb11(0xda)],(_0x3f0bf3,_0x1fcf0e)=>{const _0x83dfc9=_0x7cfb11,_0x2ab9cc={'TCbGA':function(_0x21c09e,_0x43bafd){return _0x21c09e(_0x43bafd);}};assert[_0x83dfc9(0x1a7)](_0x3f0bf3),assert['equal'](_0x1fcf0e,![]),topics['exists'](_0x4595ed[_0x83dfc9(0xa9)]['tid'],(_0x2262b7,_0x34a2d6)=>{const _0x23ebc7=_0x83dfc9;assert[_0x23ebc7(0x1a7)](_0x2262b7),_0x2ab9cc[_0x23ebc7(0x1e4)](assert,!_0x34a2d6),_0x50118f();});});});});});}}),_0x27786f[_0x3816fa(0x126)](describe,_0x3816fa(0x30b),()=>{const _0x1db036=_0x3816fa,_0x1c490e={'yNFvn':function(_0x358575){return _0x358575();},'agyyA':'[[error:not-logged-in]]','MaRCn':_0x1db036(0x336),'aSEXl':_0x27786f[_0x1db036(0x34d)],'tOqgp':'edited','BptiB':function(_0x443a8a){const _0x3fd6e8=_0x1db036;return _0x27786f[_0x3fd6e8(0x284)](_0x443a8a);},'JNOvN':_0x1db036(0x1f5),'sQDQM':_0x27786f['hIDPG'],'VBump':function(_0xc6428,_0x2f90c5,_0x5d2e4b){return _0xc6428(_0x2f90c5,_0x5d2e4b);},'UqgiO':function(_0xad60d1){const _0xe9f13=_0x1db036;return _0x27786f[_0xe9f13(0x1fb)](_0xad60d1);},'DJxxh':_0x27786f[_0x1db036(0x33a)]};if(_0x27786f['xUGUk'](_0x1db036(0x169),_0x1db036(0x207)))_0x19f291[_0x1db036(0xc6)][_0x1db036(0x368)](_0x1db036(0x21c),(_0x52eb18,_0x42d480)=>{const _0x5ac0c4=_0x1db036;_0x12d9e7['ifError'](_0x52eb18),_0x5e7d0e[_0x5ac0c4(0x260)](!![],_0x42d480),_0x1c490e[_0x5ac0c4(0x100)](_0x33bbd4);});else{let _0x3aa36c,_0x51b62e,_0x51f7f3;before(_0x29f6da=>{const _0x4e619f=_0x1db036,_0x1aca38={'xhJHY':_0x27786f[_0x4e619f(0x27f)],'MMqlb':function(_0x4f4349,_0xd0f6e1){const _0x38782b=_0x4e619f;return _0x27786f[_0x38782b(0x82)](_0x4f4349,_0xd0f6e1);}};topics[_0x4e619f(0xaf)]({'uid':_0x4e2357,'cid':_0x36a198,'title':_0x4e619f(0x356),'content':_0x4e619f(0x10b)},(_0x1fc96e,_0x105ae5)=>{const _0xf3c6f0=_0x4e619f;if(_0x1aca38['MMqlb'](_0xf3c6f0(0x2cb),_0xf3c6f0(0x88))){const _0x58a97f={'HOEEL':function(_0x260d25){return _0x260d25();}};_0x2d87bf['uploads']['isOrphan'](_0x1aca38[_0xf3c6f0(0x16c)],(_0x11c480,_0x4d1ec0)=>{const _0x1f22b1=_0xf3c6f0;_0x13e681[_0x1f22b1(0x1a7)](_0x11c480),_0x3dbd02[_0x1f22b1(0x260)](![],_0x4d1ec0),_0x58a97f[_0x1f22b1(0x7c)](_0xb9b1eb);});}else assert['ifError'](_0x1fc96e),_0x3aa36c=_0x105ae5[_0xf3c6f0(0x1bc)]['pid'],_0x51f7f3=_0x105ae5[_0xf3c6f0(0xa9)][_0xf3c6f0(0x98)],topics['reply']({'uid':_0x4e2357,'tid':_0x51f7f3,'timestamp':Date[_0xf3c6f0(0x1ab)](),'content':'A\x20reply\x20to\x20edit'},(_0x1610fa,_0x480780)=>{const _0xe79d43=_0xf3c6f0;assert['ifError'](_0x1610fa),_0x51b62e=_0x480780[_0xe79d43(0xda)],privileges[_0xe79d43(0x2cf)][_0xe79d43(0x2f9)]([_0xe79d43(0x2c8)],_0x36a198,_0xe79d43(0x2ec),_0x29f6da);});});}),it(_0x1db036(0xc9),_0x339f97=>{const _0x240cec=_0x1db036;socketPosts[_0x240cec(0x30b)]({'uid':0x0},{},_0x19aa43=>{const _0x1331a3=_0x240cec;assert['equal'](_0x19aa43['message'],_0x1c490e[_0x1331a3(0x290)]),_0x1c490e[_0x1331a3(0x100)](_0x339f97);});}),_0x27786f[_0x1db036(0x184)](it,'should\x20error\x20if\x20data\x20is\x20invalid\x20or\x20missing',_0x44b84a=>{const _0x550548=_0x1db036,_0x4c5986={'qxHIs':_0x27786f[_0x550548(0xbe)]};socketPosts['edit']({'uid':_0x4e2357},{},_0x915a19=>{const _0x381cc1=_0x550548;assert[_0x381cc1(0x260)](_0x915a19['message'],_0x4c5986[_0x381cc1(0x283)]),_0x44b84a();});}),_0x27786f[_0x1db036(0x342)](it,_0x27786f['xZimK'],_0x1213c5=>{const _0x578784=_0x1db036;socketPosts[_0x578784(0x30b)]({'uid':_0x4e2357},{'pid':_0x3aa36c,'content':_0x1c490e[_0x578784(0x2e7)],'title':'a'},_0x2270f6=>{const _0x538a07=_0x578784;assert[_0x538a07(0x260)](_0x2270f6[_0x538a07(0xbd)],_0x538a07(0x11c)+meta[_0x538a07(0x2b6)]['minimumTitleLength']+']]'),_0x1213c5();});}),_0x27786f[_0x1db036(0x12c)](it,'should\x20error\x20if\x20title\x20is\x20too\x20long',_0x562356=>{const _0x33d78b=_0x1db036,_0x3cdf82=new Array(meta[_0x33d78b(0x2b6)]['maximumTitleLength']+0x2)[_0x33d78b(0x1af)]('a');socketPosts[_0x33d78b(0x30b)]({'uid':_0x4e2357},{'pid':_0x3aa36c,'content':_0x27786f[_0x33d78b(0x110)],'title':_0x3cdf82},_0x43f236=>{const _0x252c34=_0x33d78b;assert['equal'](_0x43f236[_0x252c34(0xbd)],'[[error:title-too-long,\x20'+meta[_0x252c34(0x2b6)][_0x252c34(0x113)]+']]'),_0x562356();});}),it(_0x27786f['CCYEl'],_0x2331f1=>{const _0x127a0c=_0x1db036,_0x58cda9=meta[_0x127a0c(0x2b6)][_0x127a0c(0x127)];meta[_0x127a0c(0x2b6)][_0x127a0c(0x127)]=0x1,socketPosts[_0x127a0c(0x30b)]({'uid':_0x4e2357},{'pid':_0x3aa36c,'content':_0x1c490e[_0x127a0c(0x2e7)],'tags':[]},_0x2e32bf=>{const _0x232823=_0x127a0c;assert[_0x232823(0x260)](_0x2e32bf[_0x232823(0xbd)],_0x232823(0x135)+meta[_0x232823(0x2b6)][_0x232823(0x127)]+']]'),meta[_0x232823(0x2b6)]['minimumTagsPerTopic']=_0x58cda9,_0x2331f1();});}),it(_0x1db036(0x129),_0x426f7b=>{const _0x190afb=_0x1db036,_0x487514=[];for(let _0x392574=0x0;_0x392574<meta[_0x190afb(0x2b6)][_0x190afb(0x27c)]+0x1;_0x392574+=0x1){_0x487514[_0x190afb(0x240)]('tag'+_0x392574);}socketPosts[_0x190afb(0x30b)]({'uid':_0x4e2357},{'pid':_0x3aa36c,'content':_0x1c490e['MaRCn'],'tags':_0x487514},_0x39f504=>{const _0x1587b5=_0x190afb;assert[_0x1587b5(0x260)](_0x39f504['message'],'[[error:too-many-tags,\x20'+meta['config'][_0x1587b5(0x27c)]+']]'),_0x1c490e[_0x1587b5(0x100)](_0x426f7b);});}),it(_0x27786f[_0x1db036(0x1d1)],_0x452099=>{const _0x22787d=_0x1db036,_0x225e75={'kKvzM':function(_0x5d27bc){return _0x5d27bc();}};_0x27786f[_0x22787d(0x2c0)](_0x27786f[_0x22787d(0x2f4)],_0x27786f[_0x22787d(0x2f4)])?socketPosts[_0x22787d(0x30b)]({'uid':_0x4e2357},{'pid':_0x3aa36c,'content':'e'},_0x26911c=>{const _0x1e8713=_0x22787d;assert[_0x1e8713(0x260)](_0x26911c[_0x1e8713(0xbd)],_0x1e8713(0x3a7)+meta['config']['minimumPostLength']+']]'),_0x225e75['kKvzM'](_0x452099);}):_0x286816[_0x22787d(0x34e)](_0x46b554[_0x22787d(0xbd)],_0x22787d(0x1ff));}),_0x27786f['MbEar'](it,_0x27786f['BbDBK'],_0x5f14a0=>{const _0x6c8988=_0x1db036,_0x35050a={'LnhHF':function(_0xcde734){return _0x27786f['IYqKD'](_0xcde734);}},_0x46a16f=new Array(meta[_0x6c8988(0x2b6)][_0x6c8988(0x3bf)]+0x2)['join']('a');socketPosts['edit']({'uid':_0x4e2357},{'pid':_0x3aa36c,'content':_0x46a16f},_0x5e55ed=>{const _0x1176ba=_0x6c8988;assert['equal'](_0x5e55ed[_0x1176ba(0xbd)],_0x1176ba(0x15c)+meta[_0x1176ba(0x2b6)]['maximumPostLength']+']]'),_0x35050a[_0x1176ba(0x112)](_0x5f14a0);});}),_0x27786f[_0x1db036(0x2eb)](it,_0x27786f[_0x1db036(0x313)],async()=>{const _0x22769e=_0x1db036,_0xc9197a=await socketPosts['edit']({'uid':_0x4e2357},{'pid':_0x3aa36c,'content':_0x22769e(0x336),'title':_0x1c490e[_0x22769e(0x163)],'tags':[_0x1c490e[_0x22769e(0x23f)]]});assert['strictEqual'](_0xc9197a[_0x22769e(0x2e4)],_0x22769e(0x336)),assert['strictEqual'](_0xc9197a[_0x22769e(0x123)],_0x4e2357),assert['strictEqual'](_0xc9197a[_0x22769e(0x149)]['title'],_0x1c490e[_0x22769e(0x163)]),assert[_0x22769e(0x34e)](_0xc9197a[_0x22769e(0x149)][_0x22769e(0x143)][0x0][_0x22769e(0x2a9)],_0x1c490e['tOqgp']);const _0x1b9c9d=await db[_0x22769e(0x30e)](_0x22769e(0x1f8)+_0x3aa36c);assert(!_0x1b9c9d[_0x22769e(0x331)](_0x22769e(0x90)));}),it(_0x27786f[_0x1db036(0x153)],_0x5200ee=>{const _0x4c7fa7=_0x1db036,_0x3d1d58={'qJryY':function(_0x24b42c){const _0x36f166=_0xe948;return _0x1c490e[_0x36f166(0xfc)](_0x24b42c);},'BMjBI':_0x4c7fa7(0x80),'mXBJN':_0x1c490e['JNOvN'],'PYmIp':_0x1c490e[_0x4c7fa7(0x32f)]};meta[_0x4c7fa7(0x2b6)]['newbiePostEditDuration']=0x1,_0x1c490e[_0x4c7fa7(0x93)](setTimeout,()=>{const _0x39b7c5=_0x4c7fa7,_0x5dc265={'Drwvp':_0x3d1d58[_0x39b7c5(0x2a4)]};_0x3d1d58[_0x39b7c5(0x2b4)]!==_0x3d1d58['mXBJN']?(_0x2a2b63[_0x39b7c5(0x1a7)](_0x47777d),_0x4cea6b=_0x1677fd[_0x39b7c5(0xda)],_0x3d1d58[_0x39b7c5(0x19f)](_0x111259)):socketPosts[_0x39b7c5(0x30b)]({'uid':_0x4e2357},{'pid':_0x3aa36c,'content':_0x3d1d58[_0x39b7c5(0x1c6)],'title':_0x39b7c5(0x299),'tags':[_0x39b7c5(0xf8)]},(_0x31250a,_0x5daca5)=>{const _0x5f3c99=_0x39b7c5;assert[_0x5f3c99(0x260)](_0x31250a[_0x5f3c99(0xbd)],_0x5dc265[_0x5f3c99(0x327)]),meta[_0x5f3c99(0x2b6)][_0x5f3c99(0xea)]=0xe10,_0x5200ee();});},0x3e8);}),_0x27786f[_0x1db036(0x209)](it,_0x1db036(0x180),_0xe9e25b=>{const _0x3cab9e=_0x1db036,_0x12cac7={'oGSwV':_0x27786f['WaiJY'],'ifOoP':_0x27786f[_0x3cab9e(0x37b)],'eoHWq':function(_0x5cc33e){return _0x27786f['JQpjk'](_0x5cc33e);},'LVBne':'edited\x20deleted\x20content'};if(_0x27786f[_0x3cab9e(0x282)](_0x27786f[_0x3cab9e(0x1f1)],_0x27786f[_0x3cab9e(0x1bf)])){const _0x2787ff={'CEhen':function(_0x211e41){const _0x351666=_0x3cab9e;return _0x1c490e[_0x351666(0xfc)](_0x211e41);}};_0x499d23['ifError'](_0x32854d),_0x456132[_0x3cab9e(0x26b)](_0x3cab9e(0x1f8)+_0x17dd0b+_0x3cab9e(0x137),(_0x286a2d,_0x4c056f)=>{const _0x493019=_0x3cab9e;_0x1e310b[_0x493019(0x1a7)](_0x286a2d),_0x3a493c[_0x493019(0x34e)](0x1,_0x4c056f),_0x2787ff[_0x493019(0x213)](_0x3bc078);});}else socketPosts['delete']({'uid':_0x4e2357},{'pid':_0x3aa36c,'tid':_0x51f7f3},_0x3f06a0=>{const _0x38a4e8=_0x3cab9e;assert[_0x38a4e8(0x1a7)](_0x3f06a0),socketPosts[_0x38a4e8(0x30b)]({'uid':_0x4e2357},{'pid':_0x3aa36c,'content':_0x38a4e8(0x2d0),'title':_0x38a4e8(0x2b9),'tags':[_0x38a4e8(0x102)]},(_0x6e08df,_0x16cdd4)=>{const _0x23e575=_0x38a4e8,_0xd42146=_0x12cac7[_0x23e575(0x2a5)][_0x23e575(0x364)]('|');let _0x1a4ba1=0x0;while(!![]){switch(_0xd42146[_0x1a4ba1++]){case'0':assert[_0x23e575(0x260)](_0x16cdd4['topic'][_0x23e575(0x35e)],_0x12cac7[_0x23e575(0x1f9)]);continue;case'1':assert['equal'](_0x16cdd4[_0x23e575(0x149)][_0x23e575(0x143)][0x0][_0x23e575(0x2a9)],_0x23e575(0x102));continue;case'2':_0x12cac7[_0x23e575(0x37c)](_0xe9e25b);continue;case'3':assert[_0x23e575(0x1a7)](_0x6e08df);continue;case'4':assert['equal'](_0x16cdd4[_0x23e575(0x123)],_0x4e2357);continue;case'5':assert[_0x23e575(0x260)](_0x16cdd4[_0x23e575(0x2e4)],_0x12cac7[_0x23e575(0x13d)]);continue;}break;}});});}),it(_0x27786f[_0x1db036(0x14e)],_0x37d32b=>{const _0x1bcaf5=_0x1db036,_0x197c42={'EqkdU':_0x27786f['tVStK'],'ahMet':function(_0x55de80,_0x25ef1b){const _0x83f53b=_0xe948;return _0x27786f[_0x83f53b(0x82)](_0x55de80,_0x25ef1b);},'IqQgK':_0x27786f[_0x1bcaf5(0xf9)],'jwrct':_0x1bcaf5(0xa3),'UCozq':_0x27786f[_0x1bcaf5(0x31f)]};socketPosts[_0x1bcaf5(0x30b)]({'uid':_0x4e2357},{'pid':_0x51b62e,'content':_0x27786f['cucPf']},(_0xd42b60,_0x157e87)=>{const _0x2a79fd=_0x1bcaf5,_0xc1afb0={'nIvhZ':_0x197c42[_0x2a79fd(0x389)]};if(_0x197c42[_0x2a79fd(0x1dc)](_0x197c42[_0x2a79fd(0xad)],_0x197c42['jwrct']))_0x1b6ac9[_0x2a79fd(0x146)]({'username':_0x2a79fd(0x6f),'password':_0xc1afb0[_0x2a79fd(0x20b)]},_0x50e85b);else{const _0x172999=_0x2a79fd(0x2ba)['split']('|');let _0xda9211=0x0;while(!![]){switch(_0x172999[_0xda9211++]){case'0':assert['equal'](_0x157e87[_0x2a79fd(0x149)][_0x2a79fd(0x3ce)],![]);continue;case'1':_0x37d32b();continue;case'2':assert[_0x2a79fd(0x260)](_0x157e87[_0x2a79fd(0x2e4)],_0x197c42[_0x2a79fd(0x397)]);continue;case'3':assert[_0x2a79fd(0x260)](_0x157e87['editor'],_0x4e2357);continue;case'4':assert[_0x2a79fd(0x1a7)](_0xd42b60);continue;case'5':assert[_0x2a79fd(0x260)](_0x157e87[_0x2a79fd(0x149)][_0x2a79fd(0x13f)],![]);continue;}break;}}});}),_0x27786f['wsgBr'](it,_0x27786f[_0x1db036(0x1c1)],_0x292386=>{const _0x49f8f7=_0x1db036,_0x266049={'QruyT':function(_0x2a81fe,_0x43980f){const _0x2b938e=_0xe948;return _0x27786f[_0x2b938e(0x7d)](_0x2a81fe,_0x43980f);},'oxWHs':function(_0x510ed7){const _0x3c9283=_0xe948;return _0x27786f[_0x3c9283(0x96)](_0x510ed7);}};posts[_0x49f8f7(0x2b3)][_0x49f8f7(0x130)](_0x51b62e,0x0,(_0x17b11e,_0x4581d6)=>{const _0x86e2d7=_0x49f8f7;assert[_0x86e2d7(0x1a7)](_0x17b11e),_0x266049['QruyT'](assert,Array[_0x86e2d7(0x201)](_0x4581d6)),assert(_0x4581d6[0x0][_0x86e2d7(0xda)],_0x51b62e),_0x266049[_0x86e2d7(0x35c)](assert,_0x4581d6[0x0]['patch']),_0x266049[_0x86e2d7(0x181)](_0x292386);});}),it(_0x27786f[_0x1db036(0x84)],_0x140ec4=>{const _0x9c2b66=_0x1db036,_0x32147f={'iNJnr':_0x27786f['isCJX']};posts[_0x9c2b66(0x2b3)][_0x9c2b66(0x2f2)](_0x51b62e,0x0,_0x4e2357,(_0x18b169,_0x512d70)=>{const _0x3568aa=_0x9c2b66;assert['ifError'](_0x18b169),assert[_0x3568aa(0x260)](_0x512d70[_0x3568aa(0x2e4)],_0x32147f[_0x3568aa(0x250)]),_0x140ec4();});}),_0x27786f['YDkai'](it,'should\x20not\x20allow\x20guests\x20to\x20view\x20diffs',_0xdeae3b=>{const _0x270623={'nXbeT':function(_0x496e08){const _0x2554ec=_0xe948;return _0x1c490e[_0x2554ec(0x293)](_0x496e08);}};socketPosts['getDiffs']({'uid':0x0},{'pid':0x1},_0x4e0b93=>{const _0x17d546=_0xe948;assert[_0x17d546(0x260)](_0x4e0b93[_0x17d546(0xbd)],_0x17d546(0x2da)),_0x270623['nXbeT'](_0xdeae3b);});}),it(_0x27786f[_0x1db036(0x1fe)],_0x31127f=>{const _0x4c3160=_0x1db036;socketPosts[_0x4c3160(0x38d)]({'uid':0x1},{'pid':0x1},(_0x4ce256,_0x428737)=>{const _0x4d98a3=_0x4c3160;assert['ifError'](_0x4ce256),assert['strictEqual'](_0x4d98a3(0x15a),typeof _0x428737[_0x4d98a3(0x30a)]),assert[_0x4d98a3(0x34e)](![],_0x428737[_0x4d98a3(0x30a)]),assert[_0x4d98a3(0x260)](!![],Array[_0x4d98a3(0x201)](_0x428737[_0x4d98a3(0x263)])),assert[_0x4d98a3(0x34e)](0x1,_0x428737[_0x4d98a3(0x263)][_0x4d98a3(0x1f2)]),assert[_0x4d98a3(0x260)](!![],Array[_0x4d98a3(0x201)](_0x428737['revisions'])),assert[_0x4d98a3(0x34e)](_0x428737[_0x4d98a3(0x263)][_0x4d98a3(0x1f2)],_0x428737[_0x4d98a3(0x1d8)]['length']),['timestamp',_0x4d98a3(0x341)][_0x4d98a3(0x241)](_0x498a5c=>Object['keys'](_0x428737['revisions'][0x0])[_0x4d98a3(0x38f)](_0x498a5c)),_0x31127f();});}),_0x27786f['MbEar'](it,_0x27786f['Lyrbb'],async()=>{const _0x1e2a7a=_0x1db036,_0x296f2f=await posts['diffs']['list'](_0x51b62e);await assert[_0x1e2a7a(0x273)](async()=>{const _0x1f0715=_0x1e2a7a;await posts[_0x1f0715(0x2b3)][_0x1f0715(0x28d)](_0x51b62e,_0x296f2f[0x0],_0x4e2357);},{'message':_0x1e2a7a(0xde)});}),it(_0x27786f['SBJOC'],async()=>{const _0x5dbe24=_0x1db036;await socketPosts[_0x5dbe24(0x30b)]({'uid':_0x4e2357},{'pid':_0x51b62e,'content':'another\x20edit\x20has\x20been\x20made'}),await socketPosts[_0x5dbe24(0x30b)]({'uid':_0x4e2357},{'pid':_0x51b62e,'content':_0x1c490e[_0x5dbe24(0x176)]});const _0x2502cb=(await posts[_0x5dbe24(0x2b3)][_0x5dbe24(0x25e)](_0x51b62e))[_0x5dbe24(0xb8)]();await posts[_0x5dbe24(0x2b3)]['delete'](_0x51b62e,_0x2502cb,_0x4e2357);const _0x545c4a=(await posts['diffs'][_0x5dbe24(0x25e)](_0x51b62e))[_0x5dbe24(0xb8)]();assert[_0x5dbe24(0x24c)](_0x2502cb,_0x545c4a);}),_0x27786f[_0x1db036(0x184)](it,_0x1db036(0x3b4),async()=>{const _0x2717a5=_0x1db036,_0x51e4ca=await posts['diffs'][_0x2717a5(0x2f2)](_0x51b62e,0x0,_0x4e2357);assert[_0x2717a5(0x34e)](_0x51e4ca['content'],_0x2717a5(0x343));});}}),_0x27786f['GCAgy'](describe,_0x3816fa(0x10e),()=>{const _0x4c25c9=_0x3816fa,_0x36b044={'xGCnR':_0x4c25c9(0xce),'VCVJu':_0x4c25c9(0x8f),'IuOEo':_0x4c25c9(0x1a5),'SwgFf':function(_0x3a3ec2){const _0x1d2634=_0x4c25c9;return _0x27786f[_0x1d2634(0x1f7)](_0x3a3ec2);},'anZqe':_0x27786f[_0x4c25c9(0x2c4)],'UUTpj':function(_0x4c99e1){return _0x27786f['QZimC'](_0x4c99e1);}};let _0x43122f,_0x5b4a4f,_0x580e2a;before(_0x375629=>{const _0x57663d=_0x4c25c9,_0x436ef5={'knQJx':function(_0x49c104,_0x30d309){return _0x49c104!==_0x30d309;},'GZjNG':_0x36b044[_0x57663d(0x3a0)]};async['waterfall']([function(_0x23370f){const _0xda217a=_0x57663d;_0x36b044['xGCnR']!==_0x36b044[_0xda217a(0xff)]?(_0x5dd1a8[_0xda217a(0x260)](_0x1f2c36[_0xda217a(0xbd)],'[[error:content-too-short,\x20'+_0x5dfe4e[_0xda217a(0x2b6)][_0xda217a(0x354)]+']]'),_0x2d1d31()):topics[_0xda217a(0xaf)]({'uid':_0x4e2357,'cid':_0x36a198,'title':_0xda217a(0xdb),'content':_0x36b044['VCVJu']},_0x23370f);},function(_0xd45349,_0x56a5c1){const _0x5e1877=_0x57663d;_0x5b4a4f=_0xd45349[_0x5e1877(0xa9)][_0x5e1877(0x98)],topics[_0x5e1877(0xaf)]({'uid':_0x4e2357,'cid':_0x36a198,'title':_0x5e1877(0x367),'content':_0x5e1877(0x8f)},_0x56a5c1);},function(_0x12c8d6,_0x34f39d){const _0x311200=_0x57663d,_0x4bd2e2={'NYonr':_0x36b044[_0x311200(0x85)],'qiDck':function(_0x25fca9){const _0x40e4e2=_0x311200;return _0x36b044[_0x40e4e2(0x36e)](_0x25fca9);}};_0x580e2a=_0x12c8d6['topicData'][_0x311200(0x98)],topics[_0x311200(0x394)]({'uid':_0x4e2357,'tid':_0x5b4a4f,'timestamp':Date[_0x311200(0x1ab)](),'content':_0x311200(0x372)},(_0x12734d,_0x1b4741)=>{const _0x2a2f3b=_0x311200;if(_0x436ef5[_0x2a2f3b(0x2ad)](_0x436ef5['GZjNG'],'hrFzE'))assert[_0x2a2f3b(0x1a7)](_0x12734d),_0x43122f=_0x1b4741[_0x2a2f3b(0xda)],_0x34f39d();else{const _0x39ba69={'Nspjf':_0x4bd2e2[_0x2a2f3b(0x75)],'NGrUT':function(_0x207c7c){return _0x4bd2e2['qiDck'](_0x207c7c);}};_0x51325e[_0x2a2f3b(0x9d)](_0x34938b,_0x2a2f3b(0x102),0x1,_0x45bd27=>{const _0x10e6ca=_0x2a2f3b;_0x29afae[_0x10e6ca(0x1a7)](_0x45bd27),_0x1f942c[_0x10e6ca(0x166)]({'uid':_0x4141c1},_0x56dc98,_0x5bdda2=>{const _0x12d2b9=_0x10e6ca;_0x4effdd['equal'](_0x5bdda2[_0x12d2b9(0xbd)],_0x39ba69[_0x12d2b9(0x3d2)]),_0x39ba69['NGrUT'](_0x300dd6);});});}});}],_0x375629);}),it('should\x20error\x20if\x20uid\x20is\x20not\x20logged\x20in',_0x19143c=>{const _0x770a23=_0x4c25c9,_0x5073dd={'QjGeb':_0x770a23(0x1d0)};socketPosts[_0x770a23(0xdf)]({'uid':0x0},{},_0x54f34d=>{const _0x319093=_0x770a23,_0x406346={'OPUSx':_0x319093(0xdb)};_0x5073dd['QjGeb']!==_0x319093(0x1d0)?_0x3a48c2[_0x319093(0xaf)]({'uid':_0x344702,'cid':_0x18e1c0,'title':_0x406346[_0x319093(0x2ab)],'content':_0x319093(0x8f)},_0x59e3de):(assert['equal'](_0x54f34d[_0x319093(0xbd)],_0x319093(0x24b)),_0x19143c());});}),_0x27786f[_0x4c25c9(0x9b)](it,_0x27786f[_0x4c25c9(0x30c)],_0x1338dd=>{const _0x5ef40b=_0x4c25c9;socketPosts[_0x5ef40b(0xdf)]({'uid':_0x3535ae},{},_0x21f061=>{const _0x177d2a=_0x5ef40b;assert[_0x177d2a(0x260)](_0x21f061['message'],_0x177d2a(0xde)),_0x36b044[_0x177d2a(0x268)](_0x1338dd);});}),_0x27786f[_0x4c25c9(0x9c)](it,_0x27786f[_0x4c25c9(0x332)],_0x30b638=>{const _0x54442b=_0x4c25c9,_0x57cf70={'dYZwq':'[[error:no-privileges]]','HgYzf':function(_0x2151fe){return _0x2151fe();}};socketPosts[_0x54442b(0xdf)]({'uid':_0x4e2357},{'pid':_0x43122f,'tid':_0x580e2a},_0x3dafd8=>{const _0x1a73fb=_0x54442b;assert[_0x1a73fb(0x260)](_0x3dafd8['message'],_0x57cf70[_0x1a73fb(0xa6)]),_0x57cf70[_0x1a73fb(0x296)](_0x30b638);});}),_0x27786f[_0x4c25c9(0x3aa)](it,_0x27786f[_0x4c25c9(0x69)],_0x546f3e=>{const _0x3b0c8d=_0x4c25c9,_0x152a56={'uoNnr':function(_0x54aa24,_0x4342ca,_0x2cc837){const _0xc9e78a=_0xe948;return _0x27786f[_0xc9e78a(0x311)](_0x54aa24,_0x4342ca,_0x2cc837);},'Yikyg':_0x3b0c8d(0x285)};socketPosts['movePost']({'uid':_0x3535ae},{'pid':_0x43122f,'tid':_0x580e2a},_0x1a1b51=>{const _0x5a3525=_0x3b0c8d,_0x134195={'KUoJh':_0x5a3525(0x328)};'DRvif'!==_0x152a56[_0x5a3525(0x2b0)]?(assert[_0x5a3525(0x1a7)](_0x1a1b51),posts[_0x5a3525(0x3c3)](_0x43122f,_0x5a3525(0x98),(_0x3078a0,_0x585b3c)=>{const _0x5c2dad=_0x5a3525;assert[_0x5c2dad(0x1a7)](_0x3078a0),_0x152a56[_0x5c2dad(0x353)](assert,_0x585b3c,_0x580e2a),_0x546f3e();})):_0x288505[_0x5a3525(0x1ed)]([_0x3ec6d0[_0x5a3525(0x3c9)](_0x4f923d[_0x5a3525(0x30b)],{'pid':_0x35509d['pid'],'uid':0x1,'content':_0x134195[_0x5a3525(0x1a4)]}),function(_0x37ca19,_0xa07251){const _0x52f194=_0x5a3525;_0x225861[_0x52f194(0xc6)][_0x52f194(0x25e)](_0xdb923a[_0x52f194(0xda)],_0xa07251);}],(_0x26e3f2,_0x30d662)=>{const _0x72c0e8=_0x5a3525;_0x1be018['ifError'](_0x26e3f2),_0x2a664e[_0x72c0e8(0x34e)](!![],_0x418aca['isArray'](_0x30d662)),_0x19118b[_0x72c0e8(0x34e)](0x0,_0x30d662[_0x72c0e8(0x1f2)]),_0x18280f();});});}),_0x27786f[_0x4c25c9(0x1e9)](it,_0x27786f[_0x4c25c9(0x2ac)],async()=>{const _0x3f87c7=_0x4c25c9,_0xea9b54=await categories[_0x3f87c7(0x146)]({'name':_0x27786f[_0x3f87c7(0xe5)],'description':_0x27786f[_0x3f87c7(0x172)]}),_0x146152=await categories[_0x3f87c7(0x146)]({'name':_0x3f87c7(0x301),'description':_0x3f87c7(0x192)}),_0x4173de=await socketTopics['post']({'uid':_0x3535ae},{'title':_0x27786f[_0x3f87c7(0x21d)],'content':_0x27786f['gfKcN'],'cid':_0x146152['cid']}),_0x4fe402=await user[_0x3f87c7(0x146)]({'username':_0x27786f[_0x3f87c7(0x257)]});await privileges['categories'][_0x3f87c7(0x2f9)](privileges['categories']['userPrivilegeList'],_0xea9b54[_0x3f87c7(0x89)],_0x4fe402);let _0x40e1c2;try{await socketPosts[_0x3f87c7(0xdf)]({'uid':_0x4fe402},{'pid':_0x43122f,'tid':_0x4173de['tid']});}catch(_0x3078a7){_0x40e1c2=_0x3078a7;}assert[_0x3f87c7(0x34e)](_0x40e1c2[_0x3f87c7(0xbd)],_0x3f87c7(0x2da));});}),describe(_0x3816fa(0x97),()=>{const _0x8c430e=_0x3816fa;if(_0x27786f[_0x8c430e(0x1fc)](_0x8c430e(0x2a8),'SfcCo')){const _0x174a3b={'BCXxD':_0x8c430e(0xf2),'lEyjW':function(_0x45b40f){const _0x4155e8=_0x8c430e;return _0x27786f[_0x4155e8(0x39d)](_0x45b40f);}};_0x23b6af[_0x8c430e(0x1ce)]({'uid':_0x4dec33},[_0x56434f[_0x8c430e(0xda)]],(_0x535525,_0x23684b)=>{const _0x158b96=_0x8c430e;_0x5cb0cb[_0x158b96(0x1a7)](_0x535525),_0xeaf6a2[_0x158b96(0x260)](_0x23684b[0x0][_0x158b96(0x37e)],0x0),_0x2dd627['equal'](_0x23684b[0x0][_0x158b96(0xc4)],_0x174a3b['BCXxD']),_0x174a3b[_0x158b96(0x2c7)](_0x23285f);});}else _0x27786f[_0x8c430e(0x1e9)](it,_0x27786f['xOXJc'],_0xab486f=>{const _0x5c074d=_0x8c430e;_0x5c074d(0x115)===_0x5c074d(0x115)?posts['getPostSummaryByPids']([],0x0,{},(_0x175556,_0x429e97)=>{const _0x77fae5=_0x5c074d;assert['ifError'](_0x175556),assert[_0x77fae5(0x260)](_0x429e97[_0x77fae5(0x1f2)],0x0),_0xab486f();}):(_0x1e7384[_0x5c074d(0x1a7)](_0x50720a),_0x4d33d0());}),it(_0x8c430e(0x36f),_0x133656=>{const _0x3a0e29={'tzjys':function(_0x56bc27,_0x5f0bd){return _0x56bc27(_0x5f0bd);},'iKXBZ':function(_0x248e0c,_0x57f33d){return _0x248e0c(_0x57f33d);}};posts['getPostSummaryByPids']([_0x3c729f['pid']],0x0,{},(_0x518f43,_0x2636df)=>{const _0x21367e=_0xe948,_0x3fa70f='2|0|1|3|4'['split']('|');let _0x33c213=0x0;while(!![]){switch(_0x3fa70f[_0x33c213++]){case'0':_0x3a0e29[_0x21367e(0x238)](assert,_0x2636df[0x0][_0x21367e(0x31e)]);continue;case'1':assert(_0x2636df[0x0][_0x21367e(0x149)]);continue;case'2':assert[_0x21367e(0x1a7)](_0x518f43);continue;case'3':_0x3a0e29[_0x21367e(0xa7)](assert,_0x2636df[0x0][_0x21367e(0x10d)]);continue;case'4':_0x133656();continue;}break;}});});}),_0x27786f[_0x3816fa(0x104)](it,_0x27786f[_0x3816fa(0x8b)],_0x4da71b=>{const _0x2c745a=_0x3816fa,_0x6af381={'cJokh':function(_0x3026b1){const _0x546890=_0xe948;return _0x27786f[_0x546890(0x3bb)](_0x3026b1);}};topics[_0x2c745a(0x394)]({'uid':_0x4e2357,'tid':_0x3048e9[_0x2c745a(0x98)],'timestamp':Date[_0x2c745a(0x1ab)](),'content':_0x2c745a(0x8f)},_0x5c363f=>{const _0x21e9e1=_0x2c745a;assert[_0x21e9e1(0x1a7)](_0x5c363f),posts[_0x21e9e1(0x382)](0x0,0x1,(_0x6c80fa,_0x4b885d)=>{const _0x5be026=_0x21e9e1;assert[_0x5be026(0x1a7)](_0x6c80fa),assert(Array['isArray'](_0x4b885d)),assert['equal'](_0x4b885d[_0x5be026(0x1f2)],0x2),assert[_0x5be026(0x260)](_0x4b885d[0x0],_0x4e2357),_0x6af381[_0x5be026(0xb2)](_0x4da71b);});});}),_0x27786f[_0x3816fa(0x251)](describe,_0x27786f['MMlSc'],()=>{const _0x55cd89=_0x3816fa,_0x19657={'FOSTZ':_0x55cd89(0x193),'cwCQh':'signatures:disableImages','lrQgl':function(_0x3db003){return _0x3db003();},'WOHTx':_0x27786f[_0x55cd89(0x3b7)],'KGNFC':function(_0x53f9dc){return _0x53f9dc();}};it(_0x27786f[_0x55cd89(0x396)],_0xc2c090=>{const _0x42417f=_0x55cd89,_0xd9e44e={'CZToP':function(_0x578446){return _0x578446();}};posts[_0x42417f(0x101)](null,(_0x5e5188,_0x4a1200)=>{const _0x58928c=_0x42417f;assert[_0x58928c(0x1a7)](_0x5e5188),assert[_0x58928c(0x34e)](_0x4a1200,null),_0xd9e44e['CZToP'](_0xc2c090);});}),it('should\x20store\x20post\x20content\x20in\x20cache',_0x13901e=>{const _0x3c1b53=_0x55cd89,_0x3a6c8c={'ROTbv':'USJVw'},_0x173934=global['env'];global[_0x3c1b53(0x3c5)]='production';const _0x340300={'pid':0x270f,'content':_0x27786f['KPdWe']};posts['parsePost'](_0x340300,_0x1eb7c8=>{const _0x17edc4=_0x3c1b53,_0x202ca1={'ugxTp':function(_0x5d89e8,_0x426ea8){return _0x5d89e8(_0x426ea8);},'amSKo':_0x3a6c8c[_0x17edc4(0x2fb)]};assert[_0x17edc4(0x1a7)](_0x1eb7c8),posts[_0x17edc4(0x101)](_0x340300,_0xc0371b=>{const _0x471159=_0x17edc4;if(_0x202ca1['amSKo']!==_0x202ca1['amSKo'])return _0x202ca1[_0x471159(0x305)](_0x4a7722,_0x4d5dfd);else assert['ifError'](_0xc0371b),global[_0x471159(0x3c5)]=_0x173934,_0x13901e();});});}),_0x27786f[_0x55cd89(0x20f)](it,_0x27786f['GqyjO'],_0x3d5759=>{const _0x4d79ea=_0x55cd89;meta[_0x4d79ea(0x2b6)][_0x4d79ea(0x2ca)]=0x1,meta[_0x4d79ea(0x2b6)][_0x19657['cwCQh']]=0x1;const _0x2464b4={'signature':_0x4d79ea(0xf6)};posts[_0x4d79ea(0xd4)](_0x2464b4,0x1,(_0x57053a,_0x277482)=>{const _0x1679e6=_0x4d79ea;assert[_0x1679e6(0x1a7)](_0x57053a),assert[_0x1679e6(0x260)](_0x277482[_0x1679e6(0x1f6)][_0x1679e6(0x2d9)],_0x19657[_0x1679e6(0x3b2)]),meta[_0x1679e6(0x2b6)][_0x1679e6(0x2ca)]=0x0,meta[_0x1679e6(0x2b6)][_0x19657[_0x1679e6(0x34c)]]=0x0,_0x19657['lrQgl'](_0x3d5759);});}),it(_0x27786f[_0x55cd89(0x15d)],_0x50c26e=>{const _0xbfb5f5=_0x55cd89,_0x15fb21=_0x27786f[_0xbfb5f5(0x119)](require,_0xbfb5f5(0x1fa)),_0x1a702d='<a\x20href=\x22/users\x22>test</a>\x20<a\x20href=\x22youtube.com\x22>youtube</a>',_0x1aedd4=posts[_0xbfb5f5(0x23a)](_0x1a702d,posts[_0xbfb5f5(0x297)]);assert[_0xbfb5f5(0x260)](_0x1aedd4,_0xbfb5f5(0x136)+_0x15fb21[_0xbfb5f5(0x130)](_0xbfb5f5(0x377))+_0xbfb5f5(0xe3)),_0x50c26e();}),_0x27786f['JifPX'](it,_0x27786f[_0x55cd89(0x15d)],_0x5c73b2=>{const _0x43eb70=_0x55cd89,_0x187093=require(_0x19657[_0x43eb70(0x3c2)]),_0x2822da=_0x43eb70(0x363);let _0x14c514=posts[_0x43eb70(0x23a)](_0x2822da,posts[_0x43eb70(0x297)]);_0x14c514=posts['relativeToAbsolute'](_0x14c514,posts[_0x43eb70(0xe1)]),assert[_0x43eb70(0x260)](_0x14c514,'<a\x20href=\x22'+_0x187093[_0x43eb70(0x130)](_0x43eb70(0x377))+_0x43eb70(0x1a9)+_0x187093['get'](_0x43eb70(0x377))+'/path/to/img\x22/>'),_0x19657[_0x43eb70(0x22b)](_0x5c73b2);});}),_0x27786f[_0x3816fa(0xe6)](describe,'socket\x20methods',()=>{const _0x177bd5=_0x3816fa,_0x5d8352={'eYLUe':_0x27786f[_0x177bd5(0x387)],'yACCu':function(_0x4a25d2){const _0x1ddf89=_0x177bd5;return _0x27786f[_0x1ddf89(0x2a6)](_0x4a25d2);},'lwYkU':function(_0x36f9db,_0x1ea7e3){return _0x36f9db===_0x1ea7e3;},'DJwWA':'[[error:no-privileges]]','GJtiE':function(_0x3d00ab){const _0xbd56e6=_0x177bd5;return _0x27786f[_0xbd56e6(0xd0)](_0x3d00ab);},'SWURS':function(_0x216288){return _0x27786f['QbeVp'](_0x216288);}};let _0x2ddcb2;_0x27786f['kAUtT'](before,_0x6d3ffb=>{const _0x3e4a85=_0x177bd5;topics['reply']({'uid':_0x4e2357,'tid':_0x3048e9[_0x3e4a85(0x98)],'timestamp':Date[_0x3e4a85(0x1ab)](),'content':_0x3e4a85(0x3b0)},(_0x1193b3,_0xdc5df5)=>{const _0x2ca682=_0x3e4a85;assert[_0x2ca682(0x1a7)](_0x1193b3),_0x2ddcb2=_0xdc5df5[_0x2ca682(0xda)],privileges[_0x2ca682(0x2cf)]['rescind']([_0x2ca682(0x26a)],_0x36a198,_0x5d8352[_0x2ca682(0x2fe)],_0x6d3ffb);});}),it(_0x177bd5(0x300),_0xf64e75=>{const _0x34a17d=_0x177bd5;socketPosts[_0x34a17d(0x394)]({'uid':0x0},null,_0x45506a=>{const _0x5d5c7c=_0x34a17d;assert[_0x5d5c7c(0x260)](_0x45506a[_0x5d5c7c(0xbd)],'[[error:invalid-data]]'),_0x5d8352[_0x5d5c7c(0x2de)](_0xf64e75);});}),it(_0x27786f[_0x177bd5(0x1aa)],_0x557cac=>{const _0x50b24e=_0x177bd5;_0x5d8352['lwYkU'](_0x50b24e(0xab),_0x50b24e(0xab))?socketPosts[_0x50b24e(0x394)]({'uid':0x0},{'tid':0x0,'content':_0x50b24e(0x211)},_0x9de117=>{const _0x328a72=_0x50b24e;assert[_0x328a72(0x260)](_0x9de117[_0x328a72(0xbd)],_0x328a72(0xde)),_0x557cac();}):(_0x1a8e71=_0x2ec3c4,_0x3bf664['accept']({'uid':_0x3582d8},{'id':_0x4ec37e[0x0]},_0x1c1c64));}),_0x27786f[_0x177bd5(0x350)](it,_0x27786f[_0x177bd5(0x24f)],_0x217779=>{const _0x9617a0=_0x177bd5,_0x5f3c18={'xSiwU':_0x5d8352[_0x9617a0(0x3a8)],'nALuX':function(_0x9d59ca){return _0x9d59ca();}};socketPosts[_0x9617a0(0x166)]({'uid':0x0},_0x2ddcb2,_0x3a8ab0=>{const _0x2e7736=_0x9617a0;assert[_0x2e7736(0x260)](_0x3a8ab0['message'],_0x5f3c18[_0x2e7736(0x165)]),_0x5f3c18[_0x2e7736(0x22e)](_0x217779);});}),_0x27786f[_0x177bd5(0x370)](it,_0x177bd5(0x3cc),_0x2dc79a=>{const _0x2909df=_0x177bd5,_0x1469aa={'raktG':function(_0x29117a,_0x4e31a5){const _0x416477=_0xe948;return _0x27786f[_0x416477(0x1fc)](_0x29117a,_0x4e31a5);}};posts[_0x2909df(0x9d)](_0x2ddcb2,_0x27786f['oPMaa'],0x1,_0x7abf3a=>{const _0x3f308c=_0x2909df,_0x3f4405={'WvnJz':_0x3f308c(0x1a5),'KyBsg':function(_0xd14d16){return _0xd14d16();}};_0x1469aa['raktG'](_0x3f308c(0x35a),_0x3f308c(0x9f))?(assert[_0x3f308c(0x1a7)](_0x7abf3a),socketPosts[_0x3f308c(0x166)]({'uid':_0x4e2357},_0x2ddcb2,_0x897b5c=>{const _0x5cb50e=_0x3f308c;assert[_0x5cb50e(0x260)](_0x897b5c[_0x5cb50e(0xbd)],_0x3f4405['WvnJz']),_0x2dc79a();})):(_0x260c18['ifError'](_0x2e9e8d),_0x161d8e['strictEqual'](_0x410a87,0x1),_0x3f4405[_0x3f308c(0x23b)](_0x36741d));});}),it(_0x27786f['VeeEm'],_0x367814=>{const _0x4ab306=_0x177bd5,_0x20e111={'csoZq':function(_0x5b9dbb){const _0x5bbbe6=_0xe948;return _0x5d8352[_0x5bbbe6(0x1a6)](_0x5b9dbb);}};posts[_0x4ab306(0x9d)](_0x2ddcb2,_0x4ab306(0x102),0x0,_0x38ee3a=>{const _0x45696f=_0x4ab306;assert['ifError'](_0x38ee3a),socketPosts[_0x45696f(0x166)]({'uid':_0x4e2357},_0x2ddcb2,(_0x3be0b0,_0x5b2a56)=>{const _0x30a31b=_0x45696f;assert[_0x30a31b(0x1a7)](_0x3be0b0),assert[_0x30a31b(0x260)](_0x5b2a56,_0x30a31b(0x3b0)),_0x20e111[_0x30a31b(0x317)](_0x367814);});});}),it(_0x27786f[_0x177bd5(0x374)],_0x266747=>{const _0x34a073=_0x177bd5,_0xb3c17e={'fMJfo':function(_0x250069,_0x17d6b4){return _0x250069(_0x17d6b4);}};socketPosts[_0x34a073(0x219)]({'uid':_0x4e2357},_0x2ddcb2,(_0x57ed4f,_0x47ac35)=>{assert['ifError'](_0x57ed4f),_0xb3c17e['fMJfo'](assert,_0x47ac35),_0x266747();});}),it(_0x177bd5(0x1d4),_0x13fb74=>{const _0x584b60=_0x177bd5;socketPosts[_0x584b60(0x2ff)]({'uid':_0x4e2357},_0x2ddcb2,(_0x3238ed,_0x480327)=>{const _0x51dbb6=_0x584b60;assert['ifError'](_0x3238ed),assert[_0x51dbb6(0x260)](_0x36a198,_0x480327),_0x13fb74();});}),_0x27786f[_0x177bd5(0x383)](it,_0x27786f[_0x177bd5(0x280)],_0x51ce61=>{const _0x2b094d=_0x177bd5;socketPosts[_0x2b094d(0x248)]({'uid':_0x4e2357},null,_0x549e9c=>{const _0x109d74=_0x2b094d;assert[_0x109d74(0x260)](_0x549e9c[_0x109d74(0xbd)],_0x109d74(0xde)),_0x5d8352[_0x109d74(0x12b)](_0x51ce61);});}),it(_0x27786f['rIuKu'],_0x4e22ae=>{const _0x55eb6a=_0x177bd5,_0x1b730f={'cuDqY':_0x55eb6a(0x8a)};if(_0x27786f[_0x55eb6a(0x349)]!==_0x55eb6a(0x352))socketPosts[_0x55eb6a(0x248)]({'uid':_0x4e2357},{'pid':_0x2ddcb2,'tid':_0x3048e9[_0x55eb6a(0x98)],'topicPostSort':_0x27786f['EMCpE']},(_0x20f2e5,_0x160287)=>{const _0x376a89=_0x55eb6a,_0x1d9578={'rtCgE':'deleted'};if(_0x376a89(0x1ee)!==_0x1b730f[_0x376a89(0x29b)])assert['ifError'](_0x20f2e5),assert[_0x376a89(0x260)](_0x160287,0x4),_0x4e22ae();else{const _0x3d1929={'SGuun':function(_0x274c07){return _0x274c07();}};_0x2f5f1e[_0x376a89(0x1a7)](_0x3c1ff9),_0xf5adcc['getPostField'](_0x1598e5,_0x376a89(0x102),(_0x532f57,_0xbda74d)=>{const _0x396358=_0x376a89;_0x2062a4[_0x396358(0x1a7)](_0x532f57),_0x11d17a[_0x396358(0x34e)](_0xbda74d,0x1),_0x3010d5[_0x396358(0x3c3)](_0x1ee0a7,_0x1d9578['rtCgE'],(_0x2fdebc,_0x488c57)=>{const _0x5db751=_0x396358;_0xc3d6a5['ifError'](_0x2fdebc),_0x354712[_0x5db751(0x34e)](_0x488c57,0x1),_0x3d1929[_0x5db751(0x35d)](_0x2c9b93);});});}});else{const _0x54387a={'kvLeW':_0x55eb6a(0x2da)};_0x3a4e90[_0x55eb6a(0x38d)]({'uid':0x0},{'pid':0x1},_0x1aa4a2=>{const _0x2c12b0=_0x55eb6a;_0x7fc20b[_0x2c12b0(0x260)](_0x1aa4a2[_0x2c12b0(0xbd)],_0x54387a[_0x2c12b0(0x14b)]),_0xe5ab0e();});}}),_0x27786f[_0x177bd5(0x312)](it,_0x177bd5(0x17f),_0x54b5a0=>{const _0x5a6f50=_0x177bd5;topics[_0x5a6f50(0x394)]({'uid':_0x4e2357,'tid':_0x3048e9[_0x5a6f50(0x98)],'content':_0x5a6f50(0x3b0)},(_0x9d3cb7,_0x133a79)=>{const _0x33ea91=_0x5a6f50;assert[_0x33ea91(0x1a7)](_0x9d3cb7),socketPosts[_0x33ea91(0x248)]({'uid':_0x4e2357},{'pid':_0x133a79[_0x33ea91(0xda)],'tid':_0x3048e9[_0x33ea91(0x98)],'topicPostSort':_0x33ea91(0x28c)},(_0x427a6f,_0x1d10d1)=>{const _0x5ac698=_0x33ea91;assert[_0x5ac698(0x1a7)](_0x427a6f),assert[_0x5ac698(0x260)](_0x1d10d1,0x1),_0x54b5a0();});});});}),_0x27786f[_0x3816fa(0x2af)](describe,_0x27786f[_0x3816fa(0x17c)],()=>{const _0x3a03ba=_0x3816fa,_0x3ed227={'iPqPj':function(_0x283039){return _0x283039();},'UlCxy':_0x3a03ba(0x1d6),'ExUNA':_0x27786f[_0x3a03ba(0x351)]};_0x27786f['NyEHz'](it,_0x3a03ba(0x1e5),_0x37deb7=>{const _0x41f7ae=_0x3a03ba;posts[_0x41f7ae(0x210)]([0x1,0x2,0x3],null,(_0x591cd9,_0x4ec081)=>{const _0xad745=_0x41f7ae;assert[_0xad745(0x1a7)](_0x591cd9),assert[_0xad745(0x6b)]([0x1,0x2,0x3],_0x4ec081),_0x37deb7();});}),it(_0x27786f[_0x3a03ba(0x29d)],_0xdd04d7=>{const _0x7f302a=_0x3a03ba,_0x5d9d2f={'SjDNI':_0x7f302a(0xa5),'jmrfy':function(_0x345ec4){const _0x3f6889=_0x7f302a;return _0x27786f[_0x3f6889(0x25a)](_0x345ec4);}};_0x27786f[_0x7f302a(0x10c)]('zRTFP','IhdNj')?posts[_0x7f302a(0x210)]([_0x3c729f['pid'],0x64,0x65],_0x36a198,(_0x1eea3f,_0x379d4f)=>{const _0x41f602=_0x7f302a,_0x5ca609={'vquQM':_0x41f602(0xde)};_0x41f602(0x375)!==_0x5d9d2f[_0x41f602(0x3a9)]?(assert[_0x41f602(0x1a7)](_0x1eea3f),assert[_0x41f602(0x6b)]([_0x3c729f[_0x41f602(0xda)]],_0x379d4f),_0x5d9d2f[_0x41f602(0x125)](_0xdd04d7)):(_0x156436[_0x41f602(0x260)](_0x3b83c['message'],_0x5ca609['vquQM']),_0x3e2c63());}):_0x582da6['create']({'name':_0x7f302a(0x301),'description':_0x7f302a(0x192)},_0x3b1af1);}),_0x27786f[_0x3a03ba(0x3bc)](it,_0x27786f[_0x3a03ba(0x1ad)],_0x50ccbf=>{const _0x289531=_0x3a03ba;_0x27786f[_0x289531(0x82)](_0x289531(0x361),'jnlHS')?posts[_0x289531(0x210)]([_0x3c729f[_0x289531(0xda)],0x64,0x65],[_0x36a198,0x2,0x3],(_0x5153d1,_0x3a9826)=>{const _0x2c361e=_0x289531;assert[_0x2c361e(0x1a7)](_0x5153d1),assert[_0x2c361e(0x6b)]([_0x3c729f[_0x2c361e(0xda)]],_0x3a9826),_0x3ed227['iPqPj'](_0x50ccbf);}):_0x182e51['waterfall']([_0x1a6d6d['apply'](_0x2faa9e[_0x289531(0xc6)][_0x289531(0x25c)],_0xf6adb6,_0x3ed227[_0x289531(0x179)]),_0x308052[_0x289531(0x3c9)](_0x4a1744[_0x289531(0xc6)][_0x289531(0x25e)],_0x252a7d)],(_0x56ec8e,_0x1d53bd)=>{const _0x214b23=_0x289531;_0x24696a['ifError'](_0x56ec8e),_0x28544e[_0x214b23(0x34e)](0x4,_0x1d53bd[_0x214b23(0x1f2)]),_0x49d99f[_0x214b23(0x34e)](![],_0x1d53bd[_0x214b23(0x38f)]('whoa.gif')),_0x3a1f80();});}),_0x27786f[_0x3a03ba(0x1db)](it,_0x27786f[_0x3a03ba(0x1ad)],_0x4fa8b1=>{const _0x15b759=_0x3a03ba,_0x33afed={'zdYNU':_0x3ed227['ExUNA'],'iFusf':function(_0x3780e7){return _0x3780e7();}};posts[_0x15b759(0x210)]([_0x3c729f[_0x15b759(0xda)],0x64,0x65],[_0x36a198],(_0x267734,_0xc2eff9)=>{const _0x45f09d=_0x15b759;'yEtYx'===_0x33afed[_0x45f09d(0x1cf)]?(assert[_0x45f09d(0x1a7)](_0x267734),assert[_0x45f09d(0x6b)]([_0x3c729f[_0x45f09d(0xda)]],_0xc2eff9),_0x33afed['iFusf'](_0x4fa8b1)):_0x4c35e5['create']({'username':_0x45f09d(0x7a)},_0x255c24);});});}),it(_0x27786f['MzOwx'],_0x1a35ea=>{const _0xcdd9f9=_0x3816fa;user[_0xcdd9f9(0x38e)](0x1425033,0x1,_0x9defc8=>{const _0x4e0015=_0xcdd9f9;assert[_0x4e0015(0x260)](_0x9defc8[_0x4e0015(0xbd)],_0x27786f['CDqtK']),_0x1a35ea();});}),describe(_0x27786f[_0x3816fa(0x72)],()=>{const _0x44dee6=_0x3816fa,_0x117920={'hXKMD':function(_0x598d5b){const _0x157f30=_0xe948;return _0x27786f[_0x157f30(0xd0)](_0x598d5b);},'bJMQh':_0x44dee6(0x1b5),'msaeF':function(_0xd3a2cd,_0x210eba){const _0x5ae1a5=_0x44dee6;return _0x27786f[_0x5ae1a5(0x348)](_0xd3a2cd,_0x210eba);},'rqKyP':'[[success:post-queued]]','LWzvh':'topic','vmjeb':_0x44dee6(0x2bf),'kLbyE':'url','JJTxF':_0x44dee6(0x6f),'BvRtc':function(_0x8bbb42){return _0x27786f['LZJvG'](_0x8bbb42);},'sXOJU':function(_0x496a01,_0x37e66b,_0x39d562,_0x4fa0ba){return _0x496a01(_0x37e66b,_0x39d562,_0x4fa0ba);},'nhVdz':function(_0x17a21e){return _0x17a21e();},'yOcNg':_0x44dee6(0x206),'YDZOl':_0x27786f[_0x44dee6(0x215)],'NsorW':function(_0x1035ac){return _0x1035ac();}};let _0x2fb33b,_0x1d7805,_0x1a6462,_0x3b5621;_0x27786f[_0x44dee6(0x197)](before,_0x498cb3=>{const _0x4b3304=_0x44dee6,_0x1e750b={'uzGkl':_0x4b3304(0x394)};if(_0x27786f[_0x4b3304(0x334)]!==_0x27786f['EgrjQ']){const _0x1ef305={'BuxvE':_0x1e750b[_0x4b3304(0x15b)],'MXgzP':'newContent'};_0x458d61['editQueuedContent']({'uid':_0x16adac},{'id':_0x2007b8,'content':_0x4b3304(0x19a)},_0x367b7c=>{const _0x4819fc=_0x4b3304;_0x20706c[_0x4819fc(0x1a7)](_0x367b7c),_0x34d8d3(_0x357d44[_0x4819fc(0x130)]('url')+'/api/post-queue',{'jar':_0x2b6074,'json':!![]},(_0x5b7156,_0x7587fd,_0x10879a)=>{const _0x52103e=_0x4819fc;_0x3a663c[_0x52103e(0x1a7)](_0x5b7156),_0xa98ffc[_0x52103e(0x260)](_0x10879a[_0x52103e(0x212)][0x1][_0x52103e(0x232)],_0x1ef305['BuxvE']),_0x4246f2[_0x52103e(0x260)](_0x10879a[_0x52103e(0x212)][0x1][_0x52103e(0x155)][_0x52103e(0x2e4)],_0x1ef305[_0x52103e(0x360)]),_0x3dc836();});});}else meta['config'][_0x4b3304(0x204)]=0x1,user[_0x4b3304(0x146)]({'username':_0x4b3304(0x1f3)},(_0x34cc20,_0x131204)=>{const _0x4531ae=_0x4b3304;assert[_0x4531ae(0x1a7)](_0x34cc20),_0x2fb33b=_0x131204,_0x117920['hXKMD'](_0x498cb3);});}),after(_0x3dd7b7=>{const _0x242dc9=_0x44dee6,_0xdbad93={'xSyob':_0x242dc9(0x149),'NGAFP':'new\x20topic\x20title','NYWJq':function(_0x4d3f3c){return _0x4d3f3c();}};_0x242dc9(0x1b5)!==_0x117920[_0x242dc9(0x17d)]?(_0x2f878f[_0x242dc9(0x1a7)](_0x72632c),_0x47fbd6[_0x242dc9(0x260)](_0x1c9c99['posts'][0x0]['type'],_0xdbad93['xSyob']),_0x17b331[_0x242dc9(0x260)](_0x489ebb[_0x242dc9(0x212)][0x0][_0x242dc9(0x155)][_0x242dc9(0x35e)],_0xdbad93[_0x242dc9(0xc2)]),_0xdbad93[_0x242dc9(0x270)](_0x2b0c4e)):(meta['config'][_0x242dc9(0x204)]=0x0,meta[_0x242dc9(0x2b6)]['groupsExemptFromPostQueue']=[],_0x3dd7b7());}),_0x27786f['MbEar'](it,_0x27786f['yZEBN'],_0x35eac5=>{const _0x230e3c=_0x44dee6,_0x2857bb={'nFiFB':_0x27786f[_0x230e3c(0x347)],'KXJDz':function(_0x42d375){return _0x42d375();}};socketTopics[_0x230e3c(0xaf)]({'uid':_0x2fb33b},{'title':_0x230e3c(0x203),'content':_0x230e3c(0x2bf),'cid':_0x36a198},(_0x31208c,_0x44b364)=>{const _0x29dd3c=_0x230e3c,_0x13bc66=_0x2857bb[_0x29dd3c(0x1cb)]['split']('|');let _0x5b4ef6=0x0;while(!![]){switch(_0x13bc66[_0x5b4ef6++]){case'0':assert[_0x29dd3c(0x260)](_0x44b364['message'],_0x29dd3c(0x28e));continue;case'1':assert[_0x29dd3c(0x1a7)](_0x31208c);continue;case'2':_0x1a6462=_0x44b364['id'];continue;case'3':assert[_0x29dd3c(0x34e)](_0x44b364[_0x29dd3c(0x14d)],!![]);continue;case'4':_0x2857bb['KXJDz'](_0x35eac5);continue;}break;}});}),it(_0x27786f['ybEXC'],_0x4cfa27=>{const _0x1f0e67=_0x44dee6,_0x370aa9={'gVylN':_0x27786f[_0x1f0e67(0x26c)]};socketPosts['reply']({'uid':_0x2fb33b},{'content':_0x27786f[_0x1f0e67(0x7e)],'tid':_0x3048e9[_0x1f0e67(0x98)]},(_0x4286d9,_0x7c9def)=>{const _0x4adfcb=_0x1f0e67;if(_0x117920['msaeF'](_0x4adfcb(0xfb),'RGAaI'))assert[_0x4adfcb(0x1a7)](_0x4286d9),assert[_0x4adfcb(0x34e)](_0x7c9def['queued'],!![]),assert['equal'](_0x7c9def[_0x4adfcb(0xbd)],_0x117920[_0x4adfcb(0x261)]),_0x1d7805=_0x7c9def['id'],_0x4cfa27();else{const _0x23602e={'cZKQl':_0x370aa9[_0x4adfcb(0xf1)]};_0x108760['accept']({'uid':_0x36e478},{'id':_0x447e02},_0x1b33b6=>{const _0x52b10=_0x4adfcb;_0x333df7[_0x52b10(0x260)](_0x1b33b6[_0x52b10(0xbd)],_0x23602e[_0x52b10(0x29a)]),_0x36ee18();});}});}),it('should\x20load\x20queued\x20posts',_0x5e4d17=>{const _0x1f9e6b=_0x44dee6,_0x3c84cb={'jjSKK':_0x117920[_0x1f9e6b(0xf7)],'QPhYq':_0x117920[_0x1f9e6b(0x12f)],'NmHMM':function(_0x378d91,_0x25a0e8,_0x206608,_0x9a8d59){return _0x378d91(_0x25a0e8,_0x206608,_0x9a8d59);},'MhPrk':_0x117920[_0x1f9e6b(0x2b2)]};_0x1f9e6b(0x2e1)===_0x1f9e6b(0x2e1)?helpers[_0x1f9e6b(0x29f)](_0x117920[_0x1f9e6b(0x214)],'globalmodpwd',(_0x47647a,_0x201bbf)=>{const _0x4942a5=_0x1f9e6b,_0x2a6938={'xBSEf':_0x3c84cb[_0x4942a5(0xb0)],'aYhqt':_0x3c84cb[_0x4942a5(0x128)],'CdmwU':_0x4942a5(0x33f)};_0x3b5621=_0x201bbf,assert['ifError'](_0x47647a),_0x3c84cb[_0x4942a5(0x2d5)](request,nconf[_0x4942a5(0x130)](_0x3c84cb['MhPrk'])+_0x4942a5(0x21a),{'jar':_0x3b5621,'json':!![]},(_0x2c468b,_0x5152d6,_0x19b91d)=>{const _0x2d036a=_0x4942a5;assert[_0x2d036a(0x1a7)](_0x2c468b),assert[_0x2d036a(0x260)](_0x19b91d['posts'][0x0][_0x2d036a(0x232)],_0x2a6938[_0x2d036a(0x281)]),assert[_0x2d036a(0x260)](_0x19b91d['posts'][0x0]['data'][_0x2d036a(0x2e4)],_0x2a6938['aYhqt']),assert[_0x2d036a(0x260)](_0x19b91d['posts'][0x1][_0x2d036a(0x232)],_0x2d036a(0x394)),assert[_0x2d036a(0x260)](_0x19b91d[_0x2d036a(0x212)][0x1][_0x2d036a(0x155)][_0x2d036a(0x2e4)],_0x2a6938[_0x2d036a(0x1ec)]),_0x5e4d17();});}):_0x178b3f=_0x281684;}),_0x27786f[_0x44dee6(0x3bc)](it,_0x27786f[_0x44dee6(0x30c)],_0x337fdd=>{const _0x409eeb=_0x44dee6;socketPosts[_0x409eeb(0x37f)]({'uid':_0x3535ae},null,_0x17afa6=>{const _0x59ce36=_0x409eeb;assert[_0x59ce36(0x260)](_0x17afa6[_0x59ce36(0xbd)],'[[error:invalid-data]]'),_0x117920['BvRtc'](_0x337fdd);});}),_0x27786f[_0x44dee6(0x11a)](it,_0x27786f['KwBLV'],_0x1149a9=>{const _0x145e3b=_0x44dee6,_0xbb365d={'CvGNw':_0x27786f['LUpri']};socketPosts[_0x145e3b(0x37f)]({'uid':_0x3535ae},{'id':_0x1d7805,'content':_0x27786f[_0x145e3b(0x31d)]},_0x1dbc06=>{const _0x300e61=_0x145e3b;assert[_0x300e61(0x1a7)](_0x1dbc06),_0x117920[_0x300e61(0xc0)](request,nconf[_0x300e61(0x130)]('url')+_0x300e61(0x21a),{'jar':_0x3b5621,'json':!![]},(_0x48f407,_0x47379a,_0x2d958b)=>{const _0xcb0eb5=_0x300e61;assert['ifError'](_0x48f407),assert[_0xcb0eb5(0x260)](_0x2d958b[_0xcb0eb5(0x212)][0x1][_0xcb0eb5(0x232)],_0xbb365d[_0xcb0eb5(0x78)]),assert[_0xcb0eb5(0x260)](_0x2d958b[_0xcb0eb5(0x212)][0x1][_0xcb0eb5(0x155)][_0xcb0eb5(0x2e4)],_0xcb0eb5(0x19a)),_0x1149a9();});});}),_0x27786f[_0x44dee6(0x370)](it,_0x44dee6(0x109),_0x36b6b6=>{const _0x5b95de=_0x44dee6;socketPosts[_0x5b95de(0x37f)]({'uid':_0x3535ae},{'id':_0x1a6462,'title':_0x117920[_0x5b95de(0x324)]},_0x245f6b=>{const _0x2195ed=_0x5b95de,_0x4db033={'YQiDI':function(_0x34d685){return _0x117920['nhVdz'](_0x34d685);}};assert[_0x2195ed(0x1a7)](_0x245f6b),_0x117920[_0x2195ed(0xc0)](request,nconf[_0x2195ed(0x130)](_0x117920[_0x2195ed(0x2b2)])+_0x2195ed(0x21a),{'jar':_0x3b5621,'json':!![]},(_0x437033,_0x47047d,_0x4faec6)=>{const _0x71a942=_0x2195ed;assert['ifError'](_0x437033),assert['equal'](_0x4faec6['posts'][0x0][_0x71a942(0x232)],_0x71a942(0x149)),assert[_0x71a942(0x260)](_0x4faec6[_0x71a942(0x212)][0x0]['data'][_0x71a942(0x35e)],_0x71a942(0x206)),_0x4db033[_0x71a942(0x337)](_0x36b6b6);});});}),it(_0x27786f['XjAJO'],_0x28c8b7=>{const _0x59ae04=_0x44dee6,_0x17ba1c={'dUrgM':function(_0x3e622b,_0x37934c){const _0x53f10a=_0xe948;return _0x27786f[_0x53f10a(0x282)](_0x3e622b,_0x37934c);},'xxFDp':_0x27786f[_0x59ae04(0x369)],'DIqpV':function(_0x17aaf8,_0x4218dc,_0x1e7fed,_0x9c6ecd){return _0x17aaf8(_0x4218dc,_0x1e7fed,_0x9c6ecd);}};socketPosts[_0x59ae04(0x37f)]({'uid':_0x3535ae},{'id':_0x1a6462,'cid':0x2},_0x2d31ef=>{const _0x2054a5=_0x59ae04,_0x1d56fc={'UYija':function(_0x537f54,_0x51db58){const _0x4c541b=_0xe948;return _0x17ba1c[_0x4c541b(0x2db)](_0x537f54,_0x51db58);},'CxcjR':_0x17ba1c[_0x2054a5(0x19c)],'vmpPD':function(_0x5bbf88){return _0x5bbf88();}};assert[_0x2054a5(0x1a7)](_0x2d31ef),_0x17ba1c['DIqpV'](request,nconf[_0x2054a5(0x130)](_0x2054a5(0x141))+_0x2054a5(0x21a),{'jar':_0x3b5621,'json':!![]},(_0x2897f4,_0x401066,_0x298cfb)=>{const _0x2835fa=_0x2054a5;assert[_0x2835fa(0x1a7)](_0x2897f4),assert[_0x2835fa(0x260)](_0x298cfb[_0x2835fa(0x212)][0x0][_0x2835fa(0x232)],'topic'),assert[_0x2835fa(0x260)](_0x298cfb[_0x2835fa(0x212)][0x0][_0x2835fa(0x155)]['cid'],0x2),socketPosts[_0x2835fa(0x37f)]({'uid':_0x3535ae},{'id':_0x1a6462,'cid':_0x36a198},_0x5af067=>{const _0x1b10ab=_0x2835fa;_0x1d56fc[_0x1b10ab(0x3c7)](_0x1b10ab(0x2ea),_0x1d56fc[_0x1b10ab(0x133)])?(assert[_0x1b10ab(0x1a7)](_0x5af067),_0x1d56fc[_0x1b10ab(0x3c4)](_0x28c8b7)):_0x188a30=_0x318217;});});});}),it(_0x27786f[_0x44dee6(0x196)],_0x1a0522=>{const _0x4c9ff7=_0x44dee6,_0x4c677f={'LNfax':function(_0x4219d4,_0xf576e0,_0x46dc33){return _0x4219d4(_0xf576e0,_0x46dc33);},'UnwCI':function(_0x382246){return _0x382246();},'XCBCg':_0x27786f['yrQGd'],'ocKMG':function(_0x4dd71b){const _0x26bed6=_0xe948;return _0x27786f[_0x26bed6(0x164)](_0x4dd71b);}};_0x27786f['iWQbp'](_0x27786f[_0x4c9ff7(0x1ea)],_0x4c9ff7(0x326))?(_0x4546a8[_0x4c9ff7(0x1a7)](_0x3a7eb0),_0x1752f9[_0x4c9ff7(0x3c3)](_0xb35407,_0x4c677f['XCBCg'],(_0x43097b,_0x472c68)=>{const _0x2b6ff0=_0x4c9ff7;_0x56086c['ifError'](_0x43097b),_0x4c677f['LNfax'](_0x17141d,_0x472c68,_0x1d4708),_0x4c677f[_0x2b6ff0(0x19d)](_0x2b8fbd);})):socketPosts[_0x4c9ff7(0x17b)]({'uid':_0x2fb33b},{'id':_0x1d7805},_0x19a91c=>{const _0x5ae9e4=_0x4c9ff7;assert['equal'](_0x19a91c[_0x5ae9e4(0xbd)],'[[error:no-privileges]]'),_0x4c677f['ocKMG'](_0x1a0522);});}),_0x27786f[_0x44dee6(0xbc)](it,_0x44dee6(0x294),_0x19f7c5=>{const _0xda8ba4=_0x44dee6;socketPosts[_0xda8ba4(0x17b)]({'uid':_0x2fb33b},{'id':0x1e0f3},_0x15bc4e=>{const _0x6fd902=_0xda8ba4;assert[_0x6fd902(0x260)](_0x15bc4e[_0x6fd902(0xbd)],'[[error:no-privileges]]'),_0x19f7c5();});}),it(_0x27786f['AyeyD'],_0x5bf500=>{const _0x103b31=_0x44dee6;let _0x3dcf78;async[_0x103b31(0x1ed)]([function(_0x425a74){const _0x56d690=_0x103b31;db['getSortedSetRange'](_0x117920[_0x56d690(0x2e6)],0x0,-0x1,_0x425a74);},function(_0x59d943,_0x30bada){const _0x3c5c12=_0x103b31;_0x3dcf78=_0x59d943,socketPosts[_0x3c5c12(0x17b)]({'uid':_0x3535ae},{'id':_0x3dcf78[0x0]},_0x30bada);},function(_0x2c94d2){const _0x59095a=_0x103b31;socketPosts[_0x59095a(0x17b)]({'uid':_0x3535ae},{'id':_0x3dcf78[0x1]},_0x2c94d2);}],_0x5bf500);}),_0x27786f[_0x44dee6(0x28f)](it,_0x44dee6(0x308),_0x12b21c=>{const _0x51aac7=_0x44dee6;socketPosts[_0x51aac7(0x189)]({'uid':_0x3535ae},{'id':_0x51aac7(0xaa)},_0xf14915=>{const _0xef9c56=_0x51aac7;assert[_0xef9c56(0x260)](_0xf14915[_0xef9c56(0xbd)],_0xef9c56(0x2da)),_0x117920[_0xef9c56(0x271)](_0x12b21c);});}),it('should\x20bypass\x20post\x20queue\x20if\x20user\x20is\x20in\x20exempt\x20group',async()=>{const _0x282196=_0x44dee6,_0x496370=meta[_0x282196(0x2b6)][_0x282196(0x329)];meta[_0x282196(0x2b6)][_0x282196(0x329)]=[_0x27786f[_0x282196(0x26f)]];const _0x5eacf1=await user[_0x282196(0x146)]({'username':_0x27786f[_0x282196(0xbb)]}),_0x566b14=await socketTopics[_0x282196(0xaf)]({'uid':_0x5eacf1,'emit':()=>{}},{'title':'should\x20not\x20be\x20queued','content':_0x282196(0x8c),'cid':_0x36a198});assert[_0x282196(0x34e)](_0x566b14[_0x282196(0x35e)],_0x27786f[_0x282196(0x108)]),meta['config'][_0x282196(0x329)]=_0x496370;}),it(_0x44dee6(0x38b),async()=>{const _0x2fb1a4=_0x44dee6,_0x2a5a2d=await user['create']({'username':_0x27786f[_0x2fb1a4(0x3cf)]}),_0x480052=await socketTopics[_0x2fb1a4(0xaf)]({'uid':_0x3535ae},{'title':_0x2fb1a4(0x27b),'content':'topic\x20A\x20content','cid':_0x36a198}),_0x568343=await socketTopics['post']({'uid':_0x3535ae},{'title':_0x27786f[_0x2fb1a4(0x7f)],'content':_0x2fb1a4(0x373),'cid':_0x36a198}),_0x36d661=await socketPosts[_0x2fb1a4(0x394)]({'uid':_0x2a5a2d},{'content':_0x2fb1a4(0x277),'tid':_0x480052[_0x2fb1a4(0x98)]});await topics[_0x2fb1a4(0x2b5)]([_0x480052['tid'],_0x568343[_0x2fb1a4(0x98)]],_0x3535ae,{'mainTid':_0x568343['tid']});let _0x477b29=await posts[_0x2fb1a4(0x1c0)]();_0x477b29=_0x477b29[_0x2fb1a4(0x2dc)](_0x57859a=>parseInt(_0x57859a[_0x2fb1a4(0x155)][_0x2fb1a4(0x98)],0xa)===parseInt(_0x568343[_0x2fb1a4(0x98)],0xa)),assert[_0x2fb1a4(0x34e)](_0x477b29[_0x2fb1a4(0x1f2)],0x1),assert[_0x2fb1a4(0x34e)](_0x477b29[0x0][_0x2fb1a4(0x155)]['content'],_0x27786f['RoIbn']),assert[_0x2fb1a4(0x34e)](_0x477b29[0x0][_0x2fb1a4(0x155)][_0x2fb1a4(0x98)],_0x568343[_0x2fb1a4(0x98)]);});}),describe(_0x27786f[_0x3816fa(0x3d0)],()=>{const _0x49af65=_0x3816fa,_0x4b83e6={'FjUIH':'[[error:no-post]]','RpfgH':function(_0x23b9a0,_0x3eab12){return _0x23b9a0===_0x3eab12;},'AZayZ':_0x27786f[_0x49af65(0x275)],'pCgii':function(_0x40cd53,_0x4fb5ea,_0x4f0d15){const _0x1fce6e=_0x49af65;return _0x27786f[_0x1fce6e(0x144)](_0x40cd53,_0x4fb5ea,_0x4f0d15);},'ahYVu':'should\x20remove\x20an\x20image\x20if\x20it\x20is\x20edited\x20out\x20of\x20the\x20post','CTpxe':function(_0x1edb1a,_0x32120b,_0x25a724){return _0x1edb1a(_0x32120b,_0x25a724);},'aSRhU':_0x27786f['LBNXi'],'awehF':function(_0x3f7db3){const _0x5a1916=_0x49af65;return _0x27786f[_0x5a1916(0x24a)](_0x3f7db3);},'YaShF':_0x27786f[_0x49af65(0x33e)],'VKPqr':_0x27786f['ZcQez'],'pQcwD':function(_0x42e646,_0x2ef751){return _0x42e646>_0x2ef751;},'jRxjm':_0x49af65(0x8e),'weLdj':function(_0x4cf416,_0x56c0b2){const _0x7d0bc2=_0x49af65;return _0x27786f[_0x7d0bc2(0x145)](_0x4cf416,_0x56c0b2);},'sRtji':_0x49af65(0x161),'Xhxyr':_0x27786f[_0x49af65(0x380)]};let _0x3343a4,_0x5f1a81;_0x27786f[_0x49af65(0x7d)](before,async()=>{const _0x32b399=_0x49af65;[_0x32b399(0x27a),_0x32b399(0x21c),_0x32b399(0x1d6),_0x32b399(0xb6),_0x32b399(0x1bd),'test.bmp'][_0x32b399(0x117)](_0x4535c5=>fs[_0x32b399(0x2e0)](fs[_0x32b399(0x1e8)](path[_0x32b399(0x1af)](nconf[_0x32b399(0x130)](_0x32b399(0x3d3)),_0x32b399(0x1a1),_0x4535c5),'w')));const _0x341702=await topics[_0x32b399(0xaf)]({'uid':0x1,'cid':0x1,'title':_0x27786f[_0x32b399(0xfe)],'content':'here\x20is\x20an\x20image\x20[alt\x20text](/assets/uploads/files/abracadabra.png)\x20and\x20another\x20[alt\x20text](/assets/uploads/files/shazam.jpg)'});_0x3343a4=_0x341702['postData']['pid'];const _0x1cb984=await topics[_0x32b399(0xaf)]({'uid':0x1,'cid':0x1,'title':_0x32b399(0x25b),'content':_0x27786f['FoUiQ']});_0x5f1a81=_0x1cb984[_0x32b399(0x1bc)][_0x32b399(0xda)];}),describe(_0x49af65(0x246),()=>{const _0x2232d9=_0x49af65,_0x3acadd={'ZcpMw':function(_0x42bcb7){return _0x42bcb7();},'GzTSV':_0x4b83e6[_0x2232d9(0x36c)],'TZhtV':function(_0x56b258,_0x54781d){const _0x4236b4=_0x2232d9;return _0x4b83e6[_0x4236b4(0x2c1)](_0x56b258,_0x54781d);},'QjesR':_0x2232d9(0x2d1),'BDpSa':function(_0x46e27d){return _0x46e27d();}};_0x4b83e6[_0x2232d9(0x386)]===_0x4b83e6[_0x2232d9(0x386)]?(_0x4b83e6[_0x2232d9(0x357)](it,_0x2232d9(0x252),_0x2c3b25=>{const _0x3f7c6d=_0x2232d9,_0x4af215={'GIAiO':_0x3acadd['GzTSV'],'sMPYS':function(_0x4395eb){return _0x4395eb();}};_0x3acadd[_0x3f7c6d(0x151)](_0x3acadd['QjesR'],_0x3acadd[_0x3f7c6d(0xc5)])?posts[_0x3f7c6d(0xc6)][_0x3f7c6d(0x319)](_0x3343a4,_0x290cc3=>{const _0x20e470=_0x3f7c6d,_0x3dc52b={'djKVZ':function(_0x3329f2){const _0x1c1a90=_0xe948;return _0x3acadd[_0x1c1a90(0x242)](_0x3329f2);}};assert[_0x20e470(0x1a7)](_0x290cc3),db['sortedSetCard'](_0x20e470(0x1f8)+_0x3343a4+':uploads',(_0x41bafe,_0x5e53a6)=>{const _0x2c0017=_0x20e470;assert[_0x2c0017(0x1a7)](_0x41bafe),assert['strictEqual'](_0x5e53a6,0x2),_0x3dc52b['djKVZ'](_0x2c3b25);});}):(_0x16f19c[_0x3f7c6d(0x260)](_0x34ffdc['message'],_0x4af215['GIAiO']),_0x4af215[_0x3f7c6d(0x2ed)](_0x24b32d));}),it(_0x4b83e6['ahYVu'],_0x386efb=>{const _0x3f391e=_0x2232d9;async[_0x3f391e(0x20a)]([function(_0x41b12f){const _0x60619a=_0x3f391e;posts[_0x60619a(0x30b)]({'pid':_0x3343a4,'uid':0x1,'content':_0x60619a(0x371)},_0x41b12f);},async['apply'](posts[_0x3f391e(0xc6)][_0x3f391e(0x319)],_0x3343a4)],_0x574030=>{const _0x4d6844=_0x3f391e,_0x411fce={'VpfKV':function(_0xba3666){const _0xd5647=_0xe948;return _0x3acadd[_0xd5647(0x242)](_0xba3666);}};assert[_0x4d6844(0x1a7)](_0x574030),db[_0x4d6844(0x26b)]('post:'+_0x3343a4+_0x4d6844(0x137),(_0x4a33d8,_0x2d789f)=>{const _0x4a1c69=_0x4d6844;assert[_0x4a1c69(0x1a7)](_0x4a33d8),assert['strictEqual'](0x1,_0x2d789f),_0x411fce[_0x4a1c69(0x25f)](_0x386efb);});});})):_0x4f1d61['loadPostTools']({'uid':_0x16383d},null,_0x41c0f4=>{const _0x5e15c7=_0x2232d9;_0x1b293c[_0x5e15c7(0x260)](_0x41c0f4[_0x5e15c7(0xbd)],_0x5e15c7(0xde)),_0x3acadd[_0x5e15c7(0x1b8)](_0x5e6ca2);});}),describe(_0x49af65(0x16e),()=>{const _0x559477=_0x49af65,_0x2d2017={'OnCRM':function(_0x48cd48){return _0x48cd48();}};it(_0x559477(0xd1),_0x19143b=>{const _0x1f4e77=_0x559477;posts[_0x1f4e77(0xc6)]['list'](_0x3343a4,(_0x46c262,_0xecefb0)=>{const _0x200061=_0x1f4e77;assert[_0x200061(0x1a7)](_0x46c262),assert[_0x200061(0x260)](!![],Array[_0x200061(0x201)](_0xecefb0)),assert[_0x200061(0x34e)](0x1,_0xecefb0[_0x200061(0x1f2)]),assert[_0x200061(0x260)]('string',typeof _0xecefb0[0x0]),_0x2d2017['OnCRM'](_0x19143b);});});}),describe(_0x27786f['yDpWJ'],()=>{const _0x35c289=_0x49af65,_0x2f2a60={'YIKjh':function(_0x4bd65f){return _0x4bd65f();}};_0x4b83e6[_0x35c289(0x1fd)](it,_0x4b83e6[_0x35c289(0x36d)],_0xf79f3d=>{const _0xd13561=_0x35c289;posts[_0xd13561(0xc6)][_0xd13561(0x368)](_0xd13561(0x27a),(_0x16718c,_0x2a1cd9)=>{const _0x12f021=_0xd13561;assert[_0x12f021(0x1a7)](_0x16718c),assert[_0x12f021(0x260)](![],_0x2a1cd9),_0xf79f3d();});}),_0x4b83e6[_0x35c289(0x357)](it,_0x35c289(0x171),_0x594945=>{const _0x1de333=_0x35c289;posts[_0x1de333(0xc6)][_0x1de333(0x368)](_0x1de333(0x21c),(_0x4d4465,_0x516330)=>{const _0x1784ed=_0x1de333;assert[_0x1784ed(0x1a7)](_0x4d4465),assert[_0x1784ed(0x260)](!![],_0x516330),_0x2f2a60[_0x1784ed(0x1c8)](_0x594945);});});}),describe(_0x49af65(0x32c),()=>{const _0x52c2fa=_0x49af65,_0xd9d784={'yFKwh':_0x52c2fa(0x2f6),'uNfZQ':function(_0x202832,_0x3f493d){return _0x202832===_0x3f493d;},'Iznhy':function(_0x5eaa84,_0x4d8199){const _0x1735e9=_0x52c2fa;return _0x27786f[_0x1735e9(0x318)](_0x5eaa84,_0x4d8199);},'oeunx':_0x27786f[_0x52c2fa(0x269)],'zJZIk':function(_0x28c8fc){const _0x53df54=_0x52c2fa;return _0x27786f[_0x53df54(0x39d)](_0x28c8fc);}};if('dhnzO'!==_0x52c2fa(0x147)){const _0x1a6273='3|4|1|2|0'[_0x52c2fa(0x364)]('|');let _0x2d73ed=0x0;while(!![]){switch(_0x1a6273[_0x2d73ed++]){case'0':_0x4b83e6[_0x52c2fa(0x1d3)](_0x2dee3d);continue;case'1':_0x2bc530[_0x52c2fa(0x34e)](!![],_0x10cf6e[_0x52c2fa(0x1f2)]>0x0);continue;case'2':_0x106d41[_0x52c2fa(0x260)](_0x2407a2,_0x315746[0x0]);continue;case'3':_0x4eda2f[_0x52c2fa(0x1a7)](_0x2aa003);continue;case'4':_0x245396[_0x52c2fa(0x34e)](!![],_0x351e9c[_0x52c2fa(0x201)](_0x251fbe));continue;}break;}}else _0x27786f[_0x52c2fa(0x2af)](it,_0x27786f[_0x52c2fa(0x199)],_0xf17c6d=>{const _0x4f1514=_0x52c2fa,_0x572381={'MhgdL':'whoa.gif'};async['waterfall']([async[_0x4f1514(0x3c9)](posts[_0x4f1514(0xc6)][_0x4f1514(0x11f)],_0x3343a4,_0x4f1514(0x1d6)),async[_0x4f1514(0x3c9)](posts[_0x4f1514(0xc6)][_0x4f1514(0x25e)],_0x3343a4)],(_0x54b6d9,_0x8e57e3)=>{const _0x4e6f2b=_0x4f1514;assert[_0x4e6f2b(0x1a7)](_0x54b6d9),assert[_0x4e6f2b(0x34e)](0x2,_0x8e57e3[_0x4e6f2b(0x1f2)]),assert[_0x4e6f2b(0x34e)](!![],_0x8e57e3['includes'](_0x572381[_0x4e6f2b(0x23c)])),_0xf17c6d();});}),it(_0x52c2fa(0xd2),_0x46ac77=>{const _0x35ec42=_0x52c2fa,_0x575ff4={'QjQim':_0x35ec42(0x139),'nlUYB':_0x4b83e6['YaShF']};async[_0x35ec42(0x1ed)]([async['apply'](posts[_0x35ec42(0xc6)][_0x35ec42(0x11f)],_0x3343a4,[_0x4b83e6[_0x35ec42(0x1b7)],_0x4b83e6[_0x35ec42(0xfa)]]),async[_0x35ec42(0x3c9)](posts[_0x35ec42(0xc6)]['list'],_0x3343a4)],(_0x5821c9,_0x1fc7c4)=>{const _0x4740de=_0x35ec42,_0x4b03a2=_0x575ff4[_0x4740de(0x1e1)][_0x4740de(0x364)]('|');let _0x4aa1b1=0x0;while(!![]){switch(_0x4b03a2[_0x4aa1b1++]){case'0':assert[_0x4740de(0x34e)](!![],_0x1fc7c4['includes'](_0x4740de(0x1bd)));continue;case'1':assert[_0x4740de(0x34e)](!![],_0x1fc7c4[_0x4740de(0x38f)](_0x575ff4[_0x4740de(0x247)]));continue;case'2':assert[_0x4740de(0x34e)](0x4,_0x1fc7c4[_0x4740de(0x1f2)]);continue;case'3':_0x46ac77();continue;case'4':assert[_0x4740de(0x1a7)](_0x5821c9);continue;}break;}});}),it(_0x27786f[_0x52c2fa(0xb4)],_0xc7b21d=>{const _0x385aea=_0x52c2fa,_0x5f3dcc={'KDgVl':function(_0x40afd9,_0xd050cc){return _0x4b83e6['pQcwD'](_0x40afd9,_0xd050cc);},'EnRaK':function(_0x43e7b7){return _0x43e7b7();}},_0x4da07c=_0x54bc31=>crypto[_0x385aea(0x34a)]('md5')[_0x385aea(0x2df)](_0x54bc31)['digest'](_0x385aea(0x259));async[_0x385aea(0x1ed)]([async[_0x385aea(0x3c9)](posts[_0x385aea(0xc6)][_0x385aea(0x11f)],_0x3343a4,[_0x385aea(0x1c5)]),function(_0x32e217){const _0x72c00=_0x385aea,_0xedc3df={'JpIUF':_0xd9d784[_0x72c00(0xd6)],'pdvxa':_0x72c00(0x26e)};_0xd9d784['uNfZQ'](_0x72c00(0x266),_0x72c00(0x295))?_0x25dc06[_0x72c00(0x146)]({'username':_0xedc3df[_0x72c00(0x19e)],'password':_0xedc3df['pdvxa']},_0x55a305):db['getSortedSetRange']('upload:'+_0xd9d784[_0x72c00(0x32a)](_0x4da07c,'test.bmp')+_0x72c00(0x22f),0x0,-0x1,_0x32e217);}],(_0x9cb254,_0x24636c)=>{const _0x2e325b=_0x385aea;assert[_0x2e325b(0x1a7)](_0x9cb254),assert[_0x2e325b(0x34e)](!![],Array[_0x2e325b(0x201)](_0x24636c)),assert[_0x2e325b(0x34e)](!![],_0x5f3dcc['KDgVl'](_0x24636c[_0x2e325b(0x1f2)],0x0)),assert[_0x2e325b(0x260)](_0x3343a4,_0x24636c[0x0]),_0x5f3dcc[_0x2e325b(0x10f)](_0xc7b21d);});}),_0x27786f[_0x52c2fa(0x28f)](it,_0x52c2fa(0xb9),_0x471baa=>{const _0x379d60=_0x52c2fa;async[_0x379d60(0x1ed)]([async[_0x379d60(0x3c9)](posts[_0x379d60(0xc6)][_0x379d60(0x11f)],_0x3343a4,[_0x379d60(0x1b1)]),async[_0x379d60(0x3c9)](posts[_0x379d60(0xc6)][_0x379d60(0x25e)],_0x3343a4)],(_0x229f49,_0x38b876)=>{const _0x11a9aa=_0x379d60;assert['ifError'](_0x229f49),assert[_0x11a9aa(0x34e)](_0x38b876[_0x11a9aa(0x1f2)],0x5),assert[_0x11a9aa(0x34e)](![],_0x38b876['includes'](_0xd9d784['oeunx'])),_0xd9d784[_0x11a9aa(0x306)](_0x471baa);});});}),_0x27786f['JifPX'](describe,_0x27786f[_0x49af65(0x3b6)],()=>{const _0x4d76c5=_0x49af65,_0x34bfde={'oXdjN':_0x4d76c5(0x2f3),'xxxbF':'whoa.gif'};_0x27786f[_0x4d76c5(0x16d)](it,'should\x20remove\x20an\x20image\x20from\x20the\x20post\x27s\x20maintained\x20list\x20of\x20uploads',_0xdf06bf=>{const _0x465251=_0x4d76c5,_0x297097={'VtsCB':function(_0x5caafe,_0x3b80c9,_0xfdeaa8,_0x58391a){return _0x5caafe(_0x3b80c9,_0xfdeaa8,_0x58391a);}};async[_0x465251(0x1ed)]([async[_0x465251(0x3c9)](posts[_0x465251(0xc6)][_0x465251(0x25c)],_0x3343a4,_0x465251(0x1d6)),async[_0x465251(0x3c9)](posts['uploads']['list'],_0x3343a4)],(_0x20b1b0,_0x312cf7)=>{const _0x16ab18=_0x465251;if(_0x34bfde[_0x16ab18(0x289)]!==_0x34bfde[_0x16ab18(0x289)]){const _0x2605f7={'GGIWc':_0x16ab18(0x206),'JqSDl':function(_0x57bd4f){return _0x57bd4f();}};_0x592ccd[_0x16ab18(0x1a7)](_0x413ace),_0x297097[_0x16ab18(0xba)](_0x19f6d6,_0x46c36f[_0x16ab18(0x130)]('url')+_0x16ab18(0x21a),{'jar':_0x134ab9,'json':!![]},(_0x4d050a,_0x4d533b,_0x2df476)=>{const _0x526369=_0x16ab18;_0x2d8e7a[_0x526369(0x1a7)](_0x4d050a),_0x55beb9[_0x526369(0x260)](_0x2df476[_0x526369(0x212)][0x0][_0x526369(0x232)],_0x526369(0x149)),_0x52d590[_0x526369(0x260)](_0x2df476[_0x526369(0x212)][0x0][_0x526369(0x155)][_0x526369(0x35e)],_0x2605f7[_0x526369(0x2e9)]),_0x2605f7[_0x526369(0x18a)](_0x2bbf4b);});}else assert[_0x16ab18(0x1a7)](_0x20b1b0),assert['strictEqual'](0x4,_0x312cf7['length']),assert[_0x16ab18(0x34e)](![],_0x312cf7['includes'](_0x34bfde[_0x16ab18(0x1dd)])),_0xdf06bf();});}),_0x27786f[_0x4d76c5(0x104)](it,_0x4d76c5(0xd2),_0x5e6d3f=>{const _0x434f90=_0x4d76c5,_0x180f5b={'gBBer':_0x434f90(0xb6),'nISPE':_0x4b83e6[_0x434f90(0xfa)]};async['waterfall']([async[_0x434f90(0x3c9)](posts[_0x434f90(0xc6)]['dissociate'],_0x3343a4,[_0x4b83e6[_0x434f90(0x1b7)],_0x434f90(0x1bd)]),async[_0x434f90(0x3c9)](posts[_0x434f90(0xc6)][_0x434f90(0x25e)],_0x3343a4)],(_0x47ce39,_0x3720dc)=>{const _0x559ac7=_0x434f90;assert[_0x559ac7(0x1a7)](_0x47ce39),assert[_0x559ac7(0x34e)](0x2,_0x3720dc[_0x559ac7(0x1f2)]),assert[_0x559ac7(0x34e)](![],_0x3720dc[_0x559ac7(0x38f)](_0x180f5b['gBBer'])),assert[_0x559ac7(0x34e)](![],_0x3720dc[_0x559ac7(0x38f)](_0x180f5b['nISPE'])),_0x5e6d3f();});});}),describe(_0x27786f['mmrjU'],()=>{const _0x18d725=_0x49af65,_0x136086={'TpHrN':_0x4b83e6[_0x18d725(0x265)],'dujLB':function(_0x452c34){return _0x452c34();}};if(_0x4b83e6[_0x18d725(0x1c7)](_0x4b83e6[_0x18d725(0x138)],_0x4b83e6['sRtji']))it(_0x4b83e6['Xhxyr'],async()=>{const _0x3b646d=_0x18d725;if(_0x136086[_0x3b646d(0x2a0)]!==_0x136086[_0x3b646d(0x2a0)])_0x52face['ifError'](_0x8ee8e2),_0x2d98f3=_0x2a840e,_0x26b410();else{await posts[_0x3b646d(0xc6)][_0x3b646d(0xc1)](_0x3343a4);const _0x9170b6=await posts[_0x3b646d(0xc6)][_0x3b646d(0x25e)](_0x3343a4);assert[_0x3b646d(0x260)](_0x9170b6[_0x3b646d(0x1f2)],0x0);}});else{const _0x500ed0={'PWjHN':function(_0x46c175){const _0xb03aac=_0x18d725;return _0x136086[_0xb03aac(0x6d)](_0x46c175);}};_0x319b90[_0x18d725(0x22d)]({'uid':_0x123f6c},{'pid':_0x21ddee[_0x18d725(0xda)],'room_id':_0x18d725(0x38a)},(_0xd165c1,_0x9b3e39)=>{const _0x45a9c1=_0x18d725;_0x2c2b6f[_0x45a9c1(0x1a7)](_0xd165c1),_0x44b861[_0x45a9c1(0x260)](_0x9b3e39[_0x45a9c1(0xaf)][_0x45a9c1(0x276)],0x0),_0x4eb8b4['equal'](_0x9b3e39[_0x45a9c1(0xaf)][_0x45a9c1(0x2fa)],0x0),_0x35f9fe[_0x45a9c1(0x260)](_0x9b3e39['post'][_0x45a9c1(0x272)],0x0),_0x4b360c[_0x45a9c1(0x260)](_0x9b3e39[_0x45a9c1(0x31e)]['reputation'],0x0),_0x6b73cd[_0x45a9c1(0x27e)](_0x58b63d['pid'],_0x59b5ad,(_0x5e4acb,_0x50337b)=>{const _0x27ea16=_0x45a9c1;_0x86f63b['ifError'](_0x5e4acb),_0x454f77['equal'](_0x50337b[_0x27ea16(0x205)],![]),_0x12cdf6[_0x27ea16(0x260)](_0x50337b[_0x27ea16(0x22c)],![]),_0x500ed0[_0x27ea16(0x1c9)](_0x5c6400);});});}}),describe(_0x27786f[_0x49af65(0x34b)],()=>{const _0x14f29c=_0x49af65;it(_0x14f29c(0x335),async()=>{const _0x555ca8=_0x14f29c;await posts[_0x555ca8(0x28d)](_0x5f1a81,0x1);const _0x152418=await posts[_0x555ca8(0xc6)]['list'](_0x5f1a81);assert[_0x555ca8(0x260)](_0x152418[_0x555ca8(0x1f2)],0x2);}),_0x27786f[_0x14f29c(0x253)](it,_0x14f29c(0x18c),async()=>{const _0x597d4a=_0x14f29c;await posts[_0x597d4a(0x314)](_0x5f1a81,0x1);const _0x3d112b=await posts[_0x597d4a(0xc6)][_0x597d4a(0x25e)](_0x5f1a81);assert[_0x597d4a(0x260)](_0x3d112b[_0x597d4a(0x1f2)],0x0);});});}),_0x27786f[_0x3816fa(0x126)](describe,_0x27786f[_0x3816fa(0x159)],()=>{const _0x570647=_0x3816fa,_0x3fe754={'OEBYJ':function(_0x3c5148,_0x130452){return _0x3c5148(_0x130452);},'qvUGW':function(_0x33537f){const _0x54d91c=_0xe948;return _0x27786f[_0x54d91c(0x34f)](_0x33537f);},'sShbT':_0x570647(0x185),'HOosj':_0x27786f[_0x570647(0x2ae)],'osTHn':function(_0x3a01d2){return _0x3a01d2();},'swjZP':_0x570647(0x73),'aPbKM':_0x27786f[_0x570647(0xe9)]};if(_0x27786f['MySyN'](_0x570647(0x16b),_0x27786f[_0x570647(0x325)]))_0x58ede2[_0x570647(0x97)]([_0x43ecd8[_0x570647(0xda)]],0x0,{},(_0x125972,_0x5c58b2)=>{const _0x5c9a82=_0x570647,_0x31b8ef=_0x5c9a82(0x13a)[_0x5c9a82(0x364)]('|');let _0x2e0581=0x0;while(!![]){switch(_0x31b8ef[_0x2e0581++]){case'0':_0x1a85ff();continue;case'1':_0x1ce7dc[_0x5c9a82(0x1a7)](_0x125972);continue;case'2':_0x3fe754[_0x5c9a82(0x391)](_0x320130,_0x5c58b2[0x0]['topic']);continue;case'3':_0x53542b(_0x5c58b2[0x0][_0x5c9a82(0x31e)]);continue;case'4':_0x3fe754[_0x5c9a82(0x391)](_0x1ff5d6,_0x5c58b2[0x0][_0x5c9a82(0x10d)]);continue;}break;}});else{let _0x13e587,_0x19e609;_0x27786f['Wohij'](before,_0x564826=>{const _0x477845=_0x570647,_0x5f1595={'dJXeA':function(_0x3cfe44){return _0x3fe754['qvUGW'](_0x3cfe44);}};topics[_0x477845(0xaf)]({'uid':0x1,'cid':_0x36a198,'title':_0x3fe754[_0x477845(0x2f1)],'content':_0x3fe754[_0x477845(0x103)]},(_0x5b02d6,_0x2d4bdb)=>{const _0x3caa22=_0x477845;assert[_0x3caa22(0x1a7)](_0x5b02d6),topics['reply']({'uid':0x1,'tid':_0x2d4bdb['topicData'][_0x3caa22(0x98)],'timestamp':Date[_0x3caa22(0x1ab)](),'content':_0x3caa22(0x1d5)},(_0x38c394,_0x4fe544)=>{const _0x5181b5=_0x3caa22;assert[_0x5181b5(0x1a7)](_0x38c394),_0x13e587=_0x2d4bdb,_0x19e609=_0x4fe544,_0x5f1595[_0x5181b5(0xa4)](_0x564826);});});}),_0x27786f['AZUwq'](it,_0x27786f[_0x570647(0x2a3)],_0x49ab3c=>{const _0xad0f3f=_0x570647,_0x50367b={'MvBWb':function(_0x6b6b97){const _0x51b54c=_0xe948;return _0x3fe754[_0x51b54c(0xa2)](_0x6b6b97);}};db['sortedSetsCard']([_0xad0f3f(0x1f8)+_0x13e587['topicData']['mainPid']+_0xad0f3f(0x137),_0xad0f3f(0x1f8)+_0x19e609['pid']+_0xad0f3f(0x137)],(_0x48aaa2,_0x3ce62f)=>{const _0x136432=_0xad0f3f;assert[_0x136432(0x1a7)](_0x48aaa2),assert[_0x136432(0x34e)](0x1,_0x3ce62f[0x0]),assert['strictEqual'](0x1,_0x3ce62f[0x1]),_0x50367b['MvBWb'](_0x49ab3c);});}),it(_0x27786f['mNijP'],_0x3bb5db=>{const _0x2c0a30=_0x570647;_0x3fe754[_0x2c0a30(0x167)]===_0x3fe754['swjZP']?async['waterfall']([async[_0x2c0a30(0x3c9)](posts[_0x2c0a30(0x30b)],{'pid':_0x19e609[_0x2c0a30(0xda)],'uid':0x1,'content':_0x3fe754['aPbKM']}),function(_0x28f96a,_0x345717){const _0x402f8f=_0x2c0a30;posts[_0x402f8f(0xc6)][_0x402f8f(0x25e)](_0x19e609[_0x402f8f(0xda)],_0x345717);}],(_0x4281af,_0xd49b76)=>{const _0x4840b0=_0x2c0a30;assert['ifError'](_0x4281af),assert[_0x4840b0(0x34e)](!![],Array[_0x4840b0(0x201)](_0xd49b76)),assert[_0x4840b0(0x34e)](0x0,_0xd49b76[_0x4840b0(0x1f2)]),_0x3bb5db();}):(_0x3a66bf[_0x2c0a30(0x1a7)](_0x18f600),_0x2a653d[_0x2c0a30(0x394)]({'uid':_0x1d0164,'tid':_0x531fd9[_0x2c0a30(0xa9)][_0x2c0a30(0x98)],'timestamp':_0x175571['now'](),'content':_0x2c0a30(0x235)},(_0x5226a1,_0x347eb0)=>{const _0x372a9b=_0x2c0a30;_0x443c9a[_0x372a9b(0x1a7)](_0x5226a1),_0x3a1f4c(_0x14a71b,_0x347eb0);}));});}}),describe(_0x27786f[_0x3816fa(0x2b7)],()=>{const _0x3cdaec=_0x3816fa,_0x9c16c5={'DQjSS':_0x27786f[_0x3cdaec(0x315)],'XHOPb':_0x27786f[_0x3cdaec(0x1a8)],'MTcdJ':_0x27786f[_0x3cdaec(0x1d7)],'yKbFt':_0x27786f[_0x3cdaec(0x1cc)],'hDZiv':function(_0x3e1326,_0x31232f){const _0xfa83f7=_0x3cdaec;return _0x27786f[_0xfa83f7(0x2ee)](_0x3e1326,_0x31232f);},'bKTpQ':function(_0x359fd1,_0xffaad9){return _0x359fd1(_0xffaad9);},'GOorO':_0x3cdaec(0x15a),'CSdDw':_0x3cdaec(0x14c),'BRjYd':_0x27786f[_0x3cdaec(0x107)],'zrcXT':function(_0xd4d78c,_0x23094e){return _0x27786f['Arknq'](_0xd4d78c,_0x23094e);},'pobLZ':_0x3cdaec(0x35b),'gjheP':function(_0x3c8f7a,_0x4276f9,_0x7f3798){const _0x2dc981=_0x3cdaec;return _0x27786f[_0x2dc981(0x251)](_0x3c8f7a,_0x4276f9,_0x7f3798);},'sJHGt':_0x27786f[_0x3cdaec(0x2f0)],'AuLiK':_0x3cdaec(0x182),'dlYYt':_0x27786f[_0x3cdaec(0x77)],'WixYb':function(_0x51ddbe,_0x3e24e7){return _0x51ddbe(_0x3e24e7);},'HAoPb':function(_0x217ed7,_0x5cef45){return _0x27786f['JteVk'](_0x217ed7,_0x5cef45);},'sWuuY':'UsNfO','BgJPU':_0x27786f[_0x3cdaec(0x190)]};let _0x1f7604;before(async()=>{const _0x428fb1=_0x3cdaec;_0x1f7604=await topics[_0x428fb1(0xaf)]({'uid':0x1,'cid':_0x36a198,'title':_0x9c16c5[_0x428fb1(0x298)],'content':_0x9c16c5[_0x428fb1(0x2fd)]}),_0x1f7604=_0x1f7604[_0x428fb1(0xa9)][_0x428fb1(0x98)];}),describe(_0x3cdaec(0x32e),()=>{const _0x3b0c51=_0x3cdaec,_0x127604={'ofQis':_0x3b0c51(0x26a),'igzLx':_0x3b0c51(0x12d),'vzIzI':_0x9c16c5[_0x3b0c51(0x33d)],'QkkyF':_0x3b0c51(0x1e0),'sFXOz':function(_0x1b9717,_0x55bec8){const _0x3ad27a=_0x3b0c51;return _0x9c16c5[_0x3ad27a(0x187)](_0x1b9717,_0x55bec8);}};if(_0x9c16c5['zrcXT'](_0x3b0c51(0x35b),_0x9c16c5[_0x3b0c51(0x262)]))_0x9c16c5[_0x3b0c51(0x36b)](it,_0x3b0c51(0x388),async()=>{const _0x573684=_0x3b0c51,_0x47a622={'fvNCE':_0x573684(0xde),'UviKN':function(_0x30252d){return _0x30252d();}};try{await topics['syncBacklinks']();}catch(_0x2f8ee3){_0x573684(0x105)===_0x573684(0x339)?_0x3d5096[_0x573684(0x394)]({'uid':0x0},null,_0x2564e3=>{const _0x367df5=_0x573684;_0x2190b1[_0x367df5(0x260)](_0x2564e3[_0x367df5(0xbd)],_0x47a622['fvNCE']),_0x47a622[_0x367df5(0x330)](_0x4df2d7);}):(assert(_0x2f8ee3),assert[_0x573684(0x34e)](_0x2f8ee3['message'],_0x573684(0xde)));}}),it(_0x3b0c51(0x28b),async()=>{const _0xc775fa=await topics['syncBacklinks']({'content':_0x9c16c5['MTcdJ']});assert['strictEqual'](_0xc775fa,0x0);}),_0x9c16c5[_0x3b0c51(0x36b)](it,_0x9c16c5[_0x3b0c51(0x195)],async()=>{const _0x276ba0=_0x3b0c51,_0x1be3ff=await topics['syncBacklinks']({'pid':0x2,'content':_0x276ba0(0x2e8)+nconf['get'](_0x276ba0(0x141))+_0x276ba0(0x307)}),_0x5682bd=await topics[_0x276ba0(0x13e)][_0x276ba0(0x130)](0x1,0x1),_0x45ae31=await db['getSortedSetMembers'](_0x9c16c5[_0x276ba0(0x2ce)]);assert['strictEqual'](_0x1be3ff,0x1),_0x9c16c5['hDZiv'](assert,_0x5682bd),assert[_0x276ba0(0x34e)](_0x5682bd[_0x276ba0(0x1f2)],0x1),_0x9c16c5['hDZiv'](assert,_0x45ae31),_0x9c16c5[_0x276ba0(0x187)](assert,_0x45ae31[_0x276ba0(0x38f)]('1'));}),it(_0x9c16c5[_0x3b0c51(0x31a)],async()=>{const _0x5a098c=_0x3b0c51,_0x33bf10={'pHcev':_0x127604[_0x5a098c(0x340)]};if(_0x127604[_0x5a098c(0x19b)]===_0x5a098c(0x12d)){const _0x45fa3=await topics[_0x5a098c(0x11b)]({'pid':0x2,'content':_0x127604['vzIzI']}),_0x4b0cf4=await topics[_0x5a098c(0x13e)][_0x5a098c(0x130)](0x1,0x1),_0x5446ab=await db[_0x5a098c(0x1cd)](_0x127604['QkkyF']);assert[_0x5a098c(0x34e)](_0x45fa3,0x0),_0x127604['sFXOz'](assert,_0x4b0cf4),assert[_0x5a098c(0x34e)](_0x4b0cf4[_0x5a098c(0x1f2)],0x1),_0x127604[_0x5a098c(0x83)](assert,_0x5446ab),assert['strictEqual'](_0x5446ab[_0x5a098c(0x1f2)],0x0);}else _0x2b21a9['ifError'](_0x3682a9),_0x75e06d=_0x515476[_0x5a098c(0xda)],_0x170940['categories']['rescind']([_0x33bf10['pHcev']],_0x5b9128,'guests',_0x6f2ec9);});else{const _0x315a1d='1|4|5|7|6|2|3|8|0'[_0x3b0c51(0x364)]('|');let _0x528ddc=0x0;while(!![]){switch(_0x315a1d[_0x528ddc++]){case'0':_0x5000ee();continue;case'1':_0x146d9f[_0x3b0c51(0x1a7)](_0x74e7fc);continue;case'2':_0x1563bf[_0x3b0c51(0x260)](!![],_0x5b96d6[_0x3b0c51(0x201)](_0x391d40[_0x3b0c51(0x1d8)]));continue;case'3':_0x54288f[_0x3b0c51(0x34e)](_0x4520cb[_0x3b0c51(0x263)]['length'],_0xe3b3da['revisions'][_0x3b0c51(0x1f2)]);continue;case'4':_0x485e57['strictEqual'](_0x9c16c5[_0x3b0c51(0x288)],typeof _0x162d58[_0x3b0c51(0x30a)]);continue;case'5':_0x2bf43e['strictEqual'](![],_0x9e136b[_0x3b0c51(0x30a)]);continue;case'6':_0x4ab40e[_0x3b0c51(0x34e)](0x1,_0x3a0414[_0x3b0c51(0x263)][_0x3b0c51(0x1f2)]);continue;case'7':_0x3c3980[_0x3b0c51(0x260)](!![],_0xc9e38a[_0x3b0c51(0x201)](_0x1c1e74['timestamps']));continue;case'8':[_0x9c16c5['CSdDw'],_0x3b0c51(0x341)]['every'](_0x572051=>_0x2aeb17[_0x3b0c51(0x140)](_0x513972[_0x3b0c51(0x1d8)][0x0])[_0x3b0c51(0x38f)](_0x572051));continue;}break;}}}),_0x27786f[_0x3cdaec(0x209)](describe,_0x27786f[_0x3cdaec(0x9a)],()=>{const _0x4a813c=_0x3cdaec,_0xa793fb={'mpkrw':_0x4a813c(0x2f8),'XKQWU':_0x27786f[_0x4a813c(0x385)],'ZFgKe':_0x4a813c(0x1bd),'DnEuZ':function(_0x1a8d75){return _0x27786f['dvTmN'](_0x1a8d75);}};_0x27786f[_0x4a813c(0x350)](it,_0x27786f[_0x4a813c(0x173)],async()=>{const _0x35f169=_0x4a813c,_0xaa9b19=await topics['post']({'uid':0x1,'cid':_0x36a198,'title':_0xa793fb[_0x35f169(0x249)],'content':'Some\x20text\x20here\x20for\x20the\x20OP\x20&ndash;\x20'+nconf['get'](_0x35f169(0x141))+_0x35f169(0x2be)+_0x1f7604}),_0x35f19b=await topics[_0x35f169(0x13e)]['get'](_0x1f7604,0x1);assert(_0x35f19b),assert[_0x35f169(0x34e)](_0x35f19b[_0x35f169(0x1f2)],0x1),assert[_0x35f169(0x34e)](_0x35f19b[0x0][_0x35f169(0x232)],_0xa793fb['XKQWU']),assert[_0x35f169(0x34e)](parseInt(_0x35f19b[0x0][_0x35f169(0x2a2)],0xa),0x1),assert[_0x35f169(0x34e)](_0x35f19b[0x0][_0x35f169(0x11d)],_0x35f169(0x20c)+_0xaa9b19['postData'][_0x35f169(0xda)]);}),it(_0x4a813c(0x24d),async()=>{const _0x2bbda7=_0x4a813c;await topics[_0x2bbda7(0x394)]({'uid':0x1,'tid':_0x1f7604,'content':_0x2bbda7(0x1de)+nconf[_0x2bbda7(0x130)](_0x9c16c5['dlYYt'])+_0x2bbda7(0x2be)+_0x1f7604});const _0x5cfffd=await topics['events']['get'](_0x1f7604,0x1);_0x9c16c5['WixYb'](assert,_0x5cfffd),assert['strictEqual'](_0x5cfffd[_0x2bbda7(0x1f2)],0x1);}),_0x27786f[_0x4a813c(0x200)](it,_0x4a813c(0x1ca),async()=>{const _0x1a038b=_0x4a813c;if(_0x9c16c5[_0x1a038b(0x3ab)](_0x1a038b(0x366),_0x9c16c5['sWuuY'])){meta[_0x1a038b(0x2b6)]['topicBacklinks']=0x0,await topics['post']({'uid':0x1,'cid':_0x36a198,'title':_0x9c16c5[_0x1a038b(0x2a1)],'content':_0x1a038b(0x18b)+nconf['get'](_0x9c16c5['dlYYt'])+'/topic/'+_0x1f7604});const _0x4fb8b7=await topics[_0x1a038b(0x13e)][_0x1a038b(0x130)](_0x1f7604,0x1);assert(_0x4fb8b7),assert['strictEqual'](_0x4fb8b7[_0x1a038b(0x1f2)],0x0);}else{const _0x4f0111={'FvXKo':_0xa793fb[_0x1a038b(0x15f)],'cnDtS':function(_0xc26cac){return _0xa793fb['DnEuZ'](_0xc26cac);}};_0x505cf1[_0x1a038b(0x1ed)]([_0x15ec59[_0x1a038b(0x3c9)](_0x4c9d60['uploads'][_0x1a038b(0x11f)],_0x52a0fd,['amazeballs.jpg','wut.txt']),_0x16aa5f[_0x1a038b(0x3c9)](_0x45fcd1[_0x1a038b(0xc6)][_0x1a038b(0x25e)],_0x4378c2)],(_0x2ecfc1,_0x545214)=>{const _0x3066ff=_0x1a038b;_0xb2af30[_0x3066ff(0x1a7)](_0x2ecfc1),_0x1ece4e[_0x3066ff(0x34e)](0x4,_0x545214[_0x3066ff(0x1f2)]),_0x281ca6[_0x3066ff(0x34e)](!![],_0x545214[_0x3066ff(0x38f)](_0x3066ff(0xb6))),_0x20e8be[_0x3066ff(0x34e)](!![],_0x545214['includes'](_0x4f0111[_0x3066ff(0x178)])),_0x4f0111[_0x3066ff(0x3af)](_0x1bf526);});}});});});});