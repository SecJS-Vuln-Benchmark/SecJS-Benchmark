'use strict';const _0x478a69=_0x14a9;(function(_0x3bc194,_0xf5f836){const _0x1877fc=_0x14a9,_0x147e49=_0x3bc194();while(!![]){try{const _0xe566f7=parseInt(_0x1877fc(0x1eb))/0x1*(-parseInt(_0x1877fc(0x234))/0x2)+-parseInt(_0x1877fc(0x22b))/0x3+-parseInt(_0x1877fc(0x223))/0x4*(-parseInt(_0x1877fc(0x1cd))/0x5)+-parseInt(_0x1877fc(0x1e9))/0x6+-parseInt(_0x1877fc(0x27d))/0x7*(parseInt(_0x1877fc(0x1d7))/0x8)+parseInt(_0x1877fc(0x1d5))/0x9+parseInt(_0x1877fc(0x23d))/0xa;if(_0xe566f7===_0xf5f836)break;else _0x147e49['push'](_0x147e49['shift']());}catch(_0x182569){_0x147e49['push'](_0x147e49['shift']());}}}(_0x201a,0xc3ca8));const validator=require('validator'),winston=require(_0x478a69(0x1ca)),db=require('../database'),user=require(_0x478a69(0x27a)),groups=require(_0x478a69(0x21e)),meta=require(_0x478a69(0x220)),flags=require(_0x478a69(0x224)),privileges=require(_0x478a69(0x283)),notifications=require(_0x478a69(0x221)),plugins=require('../plugins'),events=require(_0x478a69(0x275)),translator=require(_0x478a69(0x1fc)),sockets=require('../socket.io'),usersAPI=module[_0x478a69(0x1c6)];function _0x14a9(_0x165031,_0x2cea47){const _0x201ae5=_0x201a();return _0x14a9=function(_0x14a91f,_0x1fc98a){_0x14a91f=_0x14a91f-0x1b0;let _0x2d8684=_0x201ae5[_0x14a91f];return _0x2d8684;},_0x14a9(_0x165031,_0x2cea47);}function _0x201a(){const _0x5f57ff=['saveSettings','bans','-exported,\x20','pZEVO','config','user-unmute','[[error:cant-ban-other-admins]]','can','sortBy','action:user.delete','sortedSetAdd','oBGEj','reason','action:user.banned','ZRwBh','../events','child_process','uid','global','fire','../user','gdEMB','fork','5499998rgTxoL','export:','nteSa','bjbuh','event:unbanned','getUserFields','../privileges','username:disableEdit','OgvIv','gKNnE','[[error:invalid-data]]','password','changePassword','offline','JGFqW','exit','ivUBN','revokeAllSessions','action:user.unbanned','unfollow','canLoginIfBanned','split','isPasswordCorrect','Mfgly','hasBanPrivilege','isArray','delete','all','DzQsw','topicsPerPage','userLang','updateProfile','tOUjD','uploaded','LAcOR','exports','getSettings','cqJlK','vRnVC','winston','bgColor','resolveFlag','2188465vajesj','hasOwnProperty','user-ban','event:user_status_change','[[error:cant-mute-other-admins]]','[[error:cant-delete-other-admins]]','NdMZD','[[error:no-privileges]]','4360869Thoowz','yKeeo','16Qrbzgf','2|3|1|4|0','xxcil','lejlE','/uid/','kooyG','GtGBA','ban',':settings','action:user.follow','resolveUserPostFlags',':uid:','LBTcQ','icon:bgColor','admin','locks','changePicture','canEdit','3965280ujKyEw','log','2TQMtfG','escape','getObject','user','zZOgP','user:','updateSettings','hgiop','error','isAdminOrGlobalMod',':ban:','event:banned','RQJYI','min:rep:profile-picture','includes','mute','incrObjectField','../translator','IxxUE','userslug','dXZZp','KefGD','admin:users','isMembers','getUserField','now','/api/user/','getIconBackgrounds','email','deleteAccount','EqLld','IaHxu','administrators','isAdministrator','iIjxV','gxrGz','hasPassword','uploadedpicture','postsPerPage','users','deleteObjectField','rkGok','[[error:account-deletion-disabled]]','XNoxR','assign','ohmDW','uid:','JgNXO','setObjectField','search:users','hasMutePrivilege','../groups','deleteContent','../meta','../notifications','server','4MvesmJ','../flags','bAyqU','setObject','fromUid','SCpuV','hooks','kKdpL','1625742qeiOkX','eTiJq','username-change','email:disableEdit','[[error:cant-delete-admin]','picture','until','[[user:info.muted-no-reason]]','yQDKf','1155568NodXXY','[[error:already-exporting]]','translate','user-mute','env',':mute:','/export/','[[error:invalid-uid]]','action:user.unfollow','38095160YnRUZy','query','auth','[[user:info.banned-no-reason]]','username','acpLang','mutedReason','banned','mcIar','mutedUntil','stack','bDVwr','searchBy','./src/user/jobs/export-','BxMKD',':mutes:timestamp','deleteObjectFields','[[notifications:user_started_following_you,\x20','zzgmw','oqiTg','filters','follow','hNCxr','getUserData','BFGoS','uids','checkMinReputation','create','user-','EMOmF','PYXOO','[[error:invalid-password]]','emit','fPQly','generateExport','isPrivileged','search','xTYNA','FhHWg','send','filter:user.getPicture'];_0x201a=function(){return _0x5f57ff;};return _0x201a();}usersAPI[_0x478a69(0x258)]=async function(_0x3ea808,_0x515086){const _0x2ac74f=_0x478a69;if(!_0x515086)throw new Error('[[error:invalid-data]]');const _0x502fd3=await user[_0x2ac74f(0x258)](_0x515086);return await user[_0x2ac74f(0x254)](_0x502fd3);},usersAPI['update']=async function(_0x3ee5e8,_0x415626){const _0x505bc2=_0x478a69,_0x149a23={'Mfgly':'[[error:invalid-data]]','fPQly':_0x505bc2(0x241),'FhHWg':_0x505bc2(0x207),'oBGEj':function(_0x31b890,_0x59be80){return _0x31b890!==_0x59be80;}};if(!_0x3ee5e8[_0x505bc2(0x277)])throw new Error(_0x505bc2(0x23b));if(!_0x415626||!_0x415626[_0x505bc2(0x277)])throw new Error(_0x149a23['Mfgly']);const _0x40a351=await user[_0x505bc2(0x282)](_0x415626['uid'],[_0x505bc2(0x207),_0x149a23[_0x505bc2(0x25e)]]);if(!_0x40a351||!_0x40a351['username'])throw new Error(_0x149a23[_0x505bc2(0x1ba)]);const [_0xf620c6,_0x5180fc]=await Promise[_0x505bc2(0x1be)]([user[_0x505bc2(0x1f4)](_0x3ee5e8[_0x505bc2(0x277)]),privileges[_0x505bc2(0x212)][_0x505bc2(0x1e8)](_0x3ee5e8[_0x505bc2(0x277)],_0x415626['uid'])]);(_0x415626[_0x505bc2(0x1ce)](_0x149a23[_0x505bc2(0x263)])||_0x415626[_0x505bc2(0x1ce)](_0x505bc2(0x241)))&&await isPrivilegedOrSelfAndPasswordMatch(_0x3ee5e8,_0x415626);if(!_0x5180fc)throw new Error(_0x505bc2(0x1d4));!_0xf620c6&&meta[_0x505bc2(0x26a)][_0x505bc2(0x284)]&&(_0x415626[_0x505bc2(0x241)]=_0x40a351[_0x505bc2(0x241)]);!_0xf620c6&&meta[_0x505bc2(0x26a)][_0x505bc2(0x22e)]&&(_0x415626[_0x505bc2(0x207)]=_0x40a351[_0x505bc2(0x207)]);await user[_0x505bc2(0x1c2)](_0x3ee5e8[_0x505bc2(0x277)],_0x415626);const _0x4c268a=await user['getUserData'](_0x415626[_0x505bc2(0x277)]);return _0x149a23[_0x505bc2(0x271)](_0x4c268a[_0x505bc2(0x241)],_0x40a351[_0x505bc2(0x241)])&&await events['log']({'type':_0x505bc2(0x22d),'uid':_0x3ee5e8[_0x505bc2(0x277)],'targetUid':_0x415626[_0x505bc2(0x277)],'ip':_0x3ee5e8['ip'],'oldUsername':_0x40a351[_0x505bc2(0x241)],'newUsername':_0x4c268a[_0x505bc2(0x241)]}),_0x4c268a;},usersAPI[_0x478a69(0x1bd)]=async function(_0x4b87f1,{uid:_0x935544,password:_0x149299}){const _0xa4ac54=_0x478a69,_0x5c6207={'kJEvx':_0xa4ac54(0x1bd)};await processDeletion({'uid':_0x935544,'method':_0x5c6207['kJEvx'],'password':_0x149299,'caller':_0x4b87f1});},usersAPI[_0x478a69(0x21f)]=async function(_0x5e8ef9,{uid:_0x387e4e,password:_0x33a958}){const _0x304017=_0x478a69,_0x49c125={'klNSo':function(_0x1d6fa3,_0x3f0906){return _0x1d6fa3(_0x3f0906);},'qSckP':_0x304017(0x21f)};await _0x49c125['klNSo'](processDeletion,{'uid':_0x387e4e,'method':_0x49c125['qSckP'],'password':_0x33a958,'caller':_0x5e8ef9});},usersAPI['deleteAccount']=async function(_0x3f82a4,{uid:_0x16802d,password:_0x550702}){await processDeletion({'uid':_0x16802d,'method':'deleteAccount','password':_0x550702,'caller':_0x3f82a4});},usersAPI['deleteMany']=async function(_0x3f9b43,_0x346c22){const _0x41a58c=_0x478a69;await canDeleteUids(_0x346c22[_0x41a58c(0x256)])&&await Promise['all'](_0x346c22['uids']['map'](_0x1e1eaf=>processDeletion({'uid':_0x1e1eaf,'method':_0x41a58c(0x1bd),'caller':_0x3f9b43})));},usersAPI[_0x478a69(0x1f1)]=async function(_0x40d006,_0x48af00){const _0x4b02a3=_0x478a69,_0x4501fd={'LAcOR':'[[error:invalid-data]]','RGWSc':_0x4b02a3(0x1d4)};if(!_0x40d006['uid']||!_0x48af00||!_0x48af00['settings'])throw new Error(_0x4501fd[_0x4b02a3(0x1c5)]);const _0xa45337=await privileges[_0x4b02a3(0x212)]['canEdit'](_0x40d006[_0x4b02a3(0x277)],_0x48af00['uid']);if(!_0xa45337)throw new Error(_0x4501fd['RGWSc']);let _0x121cab=await user[_0x4b02a3(0x1c7)](0x0);_0x121cab={'postsPerPage':_0x121cab[_0x4b02a3(0x211)],'topicsPerPage':_0x121cab[_0x4b02a3(0x1c0)],'userLang':_0x121cab[_0x4b02a3(0x1c1)],'acpLang':_0x121cab[_0x4b02a3(0x242)]};const _0x17ea62=await db[_0x4b02a3(0x1ed)](_0x4b02a3(0x1f0)+_0x48af00['uid']+_0x4b02a3(0x1df)),_0x3dbeef={..._0x121cab,..._0x17ea62,..._0x48af00['settings']};return delete _0x3dbeef[_0x4b02a3(0x277)],await user[_0x4b02a3(0x266)](_0x48af00['uid'],_0x3dbeef);},usersAPI[_0x478a69(0x289)]=async function(_0x3e2c30,_0x27baf7){const _0x454638=_0x478a69;await user[_0x454638(0x289)](_0x3e2c30['uid'],Object[_0x454638(0x217)](_0x27baf7,{'ip':_0x3e2c30['ip']})),await events[_0x454638(0x1ea)]({'type':'password-change','uid':_0x3e2c30[_0x454638(0x277)],'targetUid':_0x27baf7[_0x454638(0x277)],'ip':_0x3e2c30['ip']});},usersAPI[_0x478a69(0x252)]=async function(_0x4dad4b,_0x5ae3dc){const _0x1766ab=_0x478a69,_0x56cf2c={'nteSa':_0x1766ab(0x1e0),'dXZZp':_0x1766ab(0x241),'IaHxu':'notifications:user_started_following_you'};await user['follow'](_0x4dad4b['uid'],_0x5ae3dc[_0x1766ab(0x277)]),plugins[_0x1766ab(0x229)]['fire'](_0x56cf2c[_0x1766ab(0x27f)],{'fromUid':_0x4dad4b[_0x1766ab(0x277)],'toUid':_0x5ae3dc[_0x1766ab(0x277)]});const _0x2e765a=await user[_0x1766ab(0x282)](_0x4dad4b[_0x1766ab(0x277)],[_0x56cf2c[_0x1766ab(0x1ff)],_0x1766ab(0x1fe)]),{displayname:_0x1c77dc}=_0x2e765a,_0x4d38e5=await notifications[_0x1766ab(0x258)]({'type':_0x1766ab(0x252),'bodyShort':_0x1766ab(0x24e)+_0x1c77dc+']]','nid':'follow:'+_0x5ae3dc['uid']+_0x1766ab(0x1e2)+_0x4dad4b[_0x1766ab(0x277)],'from':_0x4dad4b[_0x1766ab(0x277)],'path':_0x1766ab(0x1db)+_0x5ae3dc['uid']+'/followers','mergeId':_0x56cf2c[_0x1766ab(0x20a)]});if(!_0x4d38e5)return;_0x4d38e5[_0x1766ab(0x1ee)]=_0x2e765a,await notifications['push'](_0x4d38e5,[_0x5ae3dc[_0x1766ab(0x277)]]);},usersAPI[_0x478a69(0x1b6)]=async function(_0xb2fb57,_0x4e98d4){const _0x2557f1=_0x478a69,_0x5058fd={'zZOgP':_0x2557f1(0x23c)};await user[_0x2557f1(0x1b6)](_0xb2fb57[_0x2557f1(0x277)],_0x4e98d4[_0x2557f1(0x277)]),plugins['hooks'][_0x2557f1(0x279)](_0x5058fd[_0x2557f1(0x1ef)],{'fromUid':_0xb2fb57[_0x2557f1(0x277)],'toUid':_0x4e98d4[_0x2557f1(0x277)]});},usersAPI['ban']=async function(_0x552a48,_0x5929de){const _0x1eab8b=_0x478a69,_0x24ab35={'zzgmw':'JqokH','hgiop':_0x1eab8b(0x227),'yKeeo':'user'};if(!await privileges['users'][_0x1eab8b(0x1bb)](_0x552a48[_0x1eab8b(0x277)])){if(_0x24ab35[_0x1eab8b(0x24f)]===_0x24ab35['zzgmw'])throw new Error(_0x1eab8b(0x1d4));else _0x4412ca[_0x1eab8b(0x272)]=_0x3e522f;}else{if(await user[_0x1eab8b(0x20c)](_0x5929de['uid']))throw new Error(_0x1eab8b(0x26c));}const _0x58919c=await user[_0x1eab8b(0x267)][_0x1eab8b(0x1de)](_0x5929de[_0x1eab8b(0x277)],_0x5929de['until'],_0x5929de[_0x1eab8b(0x272)]);await db[_0x1eab8b(0x21b)](_0x1eab8b(0x219)+_0x5929de[_0x1eab8b(0x277)]+_0x1eab8b(0x1f5)+_0x58919c['timestamp'],_0x24ab35[_0x1eab8b(0x1f2)],_0x552a48['uid']);!_0x5929de[_0x1eab8b(0x272)]&&(_0x5929de['reason']=await translator[_0x1eab8b(0x236)](_0x1eab8b(0x240)));sockets['in']('uid_'+_0x5929de[_0x1eab8b(0x277)])[_0x1eab8b(0x25d)](_0x1eab8b(0x1f6),{'until':_0x5929de[_0x1eab8b(0x231)],'reason':validator['escape'](String(_0x5929de[_0x1eab8b(0x272)]||''))}),await flags[_0x1eab8b(0x1cc)](_0x24ab35[_0x1eab8b(0x1d6)],_0x5929de[_0x1eab8b(0x277)],_0x552a48['uid']),await flags[_0x1eab8b(0x1e1)](_0x5929de[_0x1eab8b(0x277)],_0x552a48['uid']),await events[_0x1eab8b(0x1ea)]({'type':_0x1eab8b(0x1cf),'uid':_0x552a48[_0x1eab8b(0x277)],'targetUid':_0x5929de[_0x1eab8b(0x277)],'ip':_0x552a48['ip'],'reason':_0x5929de['reason']||undefined}),plugins['hooks']['fire'](_0x1eab8b(0x273),{'callerUid':_0x552a48[_0x1eab8b(0x277)],'ip':_0x552a48['ip'],'uid':_0x5929de['uid'],'until':_0x5929de[_0x1eab8b(0x231)]>0x0?_0x5929de[_0x1eab8b(0x231)]:undefined,'reason':_0x5929de[_0x1eab8b(0x272)]||undefined});const _0x26da5c=await user[_0x1eab8b(0x267)][_0x1eab8b(0x1b7)](_0x5929de['uid']);!_0x26da5c&&await user[_0x1eab8b(0x23f)][_0x1eab8b(0x1b4)](_0x5929de[_0x1eab8b(0x277)]);},usersAPI['unban']=async function(_0x26111e,_0x154c39){const _0x59d4a6=_0x478a69,_0x5e9c81={'kKdpL':_0x59d4a6(0x1b5),'KefGD':'[[error:no-privileges]]'},_0x50a440=_0x59d4a6(0x1d8)[_0x59d4a6(0x1b8)]('|');let _0x3123cd=0x0;while(!![]){switch(_0x50a440[_0x3123cd++]){case'0':plugins[_0x59d4a6(0x229)][_0x59d4a6(0x279)](_0x5e9c81[_0x59d4a6(0x22a)],{'callerUid':_0x26111e[_0x59d4a6(0x277)],'ip':_0x26111e['ip'],'uid':_0x154c39[_0x59d4a6(0x277)]});continue;case'1':sockets['in']('uid_'+_0x154c39[_0x59d4a6(0x277)])[_0x59d4a6(0x25d)](_0x59d4a6(0x281));continue;case'2':if(!await privileges['users'][_0x59d4a6(0x1bb)](_0x26111e[_0x59d4a6(0x277)]))throw new Error(_0x5e9c81[_0x59d4a6(0x200)]);continue;case'3':await user[_0x59d4a6(0x267)]['unban'](_0x154c39['uid']);continue;case'4':await events['log']({'type':'user-unban','uid':_0x26111e['uid'],'targetUid':_0x154c39[_0x59d4a6(0x277)],'ip':_0x26111e['ip']});continue;}break;}},usersAPI[_0x478a69(0x1fa)]=async function(_0x25efad,_0x48fa99){const _0x4aa759=_0x478a69,_0x263236={'rkGok':_0x4aa759(0x1d1),'iIjxV':_0x4aa759(0x237),'OgvIv':'action:user.muted'};if(!await privileges[_0x4aa759(0x212)][_0x4aa759(0x21d)](_0x25efad[_0x4aa759(0x277)]))throw new Error(_0x4aa759(0x1d4));else{if(await user['isAdministrator'](_0x48fa99[_0x4aa759(0x277)]))throw new Error(_0x263236[_0x4aa759(0x214)]);}const _0x4ac496=_0x48fa99[_0x4aa759(0x272)]||_0x4aa759(0x232);await db[_0x4aa759(0x226)](_0x4aa759(0x1f0)+_0x48fa99[_0x4aa759(0x277)],{'mutedUntil':_0x48fa99['until'],'mutedReason':_0x4ac496});const _0x5dda84=Date[_0x4aa759(0x204)](),_0x1ce36e=_0x4aa759(0x219)+_0x48fa99[_0x4aa759(0x277)]+_0x4aa759(0x239)+_0x5dda84,_0x19abe1={'fromUid':_0x25efad['uid'],'uid':_0x48fa99[_0x4aa759(0x277)],'timestamp':_0x5dda84,'expire':_0x48fa99[_0x4aa759(0x231)]};_0x48fa99[_0x4aa759(0x272)]&&(_0x19abe1['reason']=_0x4ac496),await db[_0x4aa759(0x270)](_0x4aa759(0x219)+_0x48fa99[_0x4aa759(0x277)]+_0x4aa759(0x24c),_0x5dda84,_0x1ce36e),await db[_0x4aa759(0x226)](_0x1ce36e,_0x19abe1),await events[_0x4aa759(0x1ea)]({'type':_0x263236[_0x4aa759(0x20d)],'uid':_0x25efad[_0x4aa759(0x277)],'targetUid':_0x48fa99['uid'],'ip':_0x25efad['ip'],'reason':_0x48fa99[_0x4aa759(0x272)]||undefined}),plugins[_0x4aa759(0x229)][_0x4aa759(0x279)](_0x263236[_0x4aa759(0x285)],{'callerUid':_0x25efad[_0x4aa759(0x277)],'ip':_0x25efad['ip'],'uid':_0x48fa99['uid'],'until':_0x48fa99[_0x4aa759(0x231)]>0x0?_0x48fa99[_0x4aa759(0x231)]:undefined,'reason':_0x48fa99[_0x4aa759(0x272)]||undefined});},usersAPI['unmute']=async function(_0x12633c,_0xd45a89){const _0x41f4f4=_0x478a69,_0x43acf0={'hNCxr':'[[error:no-privileges]]','mcIar':_0x41f4f4(0x243),'JGFqW':_0x41f4f4(0x26b)};if(!await privileges[_0x41f4f4(0x212)][_0x41f4f4(0x21d)](_0x12633c[_0x41f4f4(0x277)]))throw new Error(_0x43acf0[_0x41f4f4(0x253)]);await db[_0x41f4f4(0x24d)](_0x41f4f4(0x1f0)+_0xd45a89[_0x41f4f4(0x277)],[_0x41f4f4(0x246),_0x43acf0[_0x41f4f4(0x245)]]),await events['log']({'type':_0x43acf0[_0x41f4f4(0x1b1)],'uid':_0x12633c[_0x41f4f4(0x277)],'targetUid':_0xd45a89[_0x41f4f4(0x277)],'ip':_0x12633c['ip']}),plugins[_0x41f4f4(0x229)]['fire']('action:user.unmuted',{'callerUid':_0x12633c[_0x41f4f4(0x277)],'ip':_0x12633c['ip'],'uid':_0xd45a89['uid']});};async function isPrivilegedOrSelfAndPasswordMatch(_0x163711,_0x1d677c){const _0x20905c=_0x478a69,_0x2e20c5={'qujsV':function(_0xd9b6b9,_0x13d6d4){return _0xd9b6b9===_0x13d6d4;},'IxxUE':_0x20905c(0x1d4),'ZRwBh':function(_0x3fd8f2,_0x4247a3){return _0x3fd8f2&&_0x4247a3;},'KbfAR':_0x20905c(0x25c)},{uid:_0x227eac}=_0x163711,_0x47abe3=_0x2e20c5['qujsV'](parseInt(_0x227eac,0xa),parseInt(_0x1d677c['uid'],0xa)),_0x25c966=await privileges[_0x20905c(0x212)][_0x20905c(0x1e8)](_0x227eac,_0x1d677c[_0x20905c(0x277)]);if(!_0x25c966){if(_0x2e20c5['qujsV'](_0x20905c(0x20e),_0x20905c(0x20e)))throw new Error(_0x2e20c5[_0x20905c(0x1fd)]);else throw new _0x5cabe8('[[error:cant-mute-other-admins]]');}const [_0x2fc348,_0x57810f]=await Promise[_0x20905c(0x1be)]([user[_0x20905c(0x20f)](_0x1d677c[_0x20905c(0x277)]),_0x1d677c[_0x20905c(0x288)]?user[_0x20905c(0x1b9)](_0x1d677c['uid'],_0x1d677c['password'],_0x163711['ip']):![]]);if(_0x2e20c5[_0x20905c(0x274)](_0x47abe3,_0x2fc348)&&!_0x57810f)throw new Error(_0x2e20c5['KbfAR']);}async function processDeletion({uid:_0x59afea,method:_0xc83a81,password:_0x4ff16d,caller:_0x1f7223}){const _0x5ed110=_0x478a69,_0x4bb30e={'xxcil':function(_0x1c5d65,_0x33f938,_0x110ee1){return _0x1c5d65(_0x33f938,_0x110ee1);},'SCpuV':function(_0x25a8a9,_0x1ec676,_0x69755){return _0x25a8a9(_0x1ec676,_0x69755);},'gKNnE':_0x5ed110(0x22f),'vRnVC':_0x5ed110(0x1bd),'bAyqU':function(_0x3ad837,_0x11d30a){return _0x3ad837===_0x11d30a;},'RQJYI':_0x5ed110(0x262),'kooyG':function(_0x5e5079,_0x855f33){return _0x5e5079&&_0x855f33;},'NdMZD':function(_0x597cef,_0x603c32){return _0x597cef===_0x603c32;},'JgNXO':function(_0x494814,_0x528acf){return _0x494814||_0x528acf;},'oqiTg':_0x5ed110(0x1b0),'EXeFD':_0x5ed110(0x26f)},_0x52f06c=await user[_0x5ed110(0x20c)](_0x59afea),_0x5eec0d=_0x4bb30e[_0x5ed110(0x1d9)](parseInt,_0x59afea,0xa)===_0x4bb30e[_0x5ed110(0x228)](parseInt,_0x1f7223['uid'],0xa),_0xa57f67=await privileges[_0x5ed110(0x1e5)][_0x5ed110(0x26d)](_0x5ed110(0x201),_0x1f7223[_0x5ed110(0x277)]);if(_0x5eec0d&&meta['config']['allowAccountDelete']!==0x1)throw new Error(_0x5ed110(0x215));else{if(!_0x5eec0d&&!_0xa57f67)throw new Error('[[error:no-privileges]]');else{if(_0x52f06c)throw new Error(_0x4bb30e[_0x5ed110(0x286)]);}}if(!_0xa57f67&&[_0x4bb30e[_0x5ed110(0x1c9)],_0x5ed110(0x21f)][_0x5ed110(0x1f9)](_0xc83a81)){if(_0x4bb30e[_0x5ed110(0x225)](_0x4bb30e['RQJYI'],_0x4bb30e[_0x5ed110(0x1f7)]))throw new Error(_0x5ed110(0x1d4));else throw new _0x1ed898(_0x5ed110(0x287));}const _0xff914a=await user[_0x5ed110(0x20f)](_0x59afea);if(_0x4bb30e[_0x5ed110(0x1dc)](_0x5eec0d,_0xff914a)){const _0x12136d=await user[_0x5ed110(0x1b9)](_0x59afea,_0x4ff16d,_0x1f7223['ip']);if(!_0x12136d)throw new Error(_0x5ed110(0x25c));}await flags['resolveFlag'](_0x5ed110(0x1ee),_0x59afea,_0x1f7223['uid']);let _0x5a0692;_0x4bb30e[_0x5ed110(0x1d3)](_0xc83a81,_0x5ed110(0x208))?_0x5a0692=await user[_0xc83a81](_0x59afea):_0x5a0692=await user[_0xc83a81](_0x1f7223[_0x5ed110(0x277)],_0x59afea),_0x5a0692=_0x4bb30e[_0x5ed110(0x21a)](_0x5a0692,{}),sockets[_0x5ed110(0x222)]['sockets']['emit'](_0x5ed110(0x1d0),{'uid':_0x1f7223[_0x5ed110(0x277)],'status':_0x4bb30e[_0x5ed110(0x250)]}),plugins[_0x5ed110(0x229)][_0x5ed110(0x279)](_0x4bb30e['EXeFD'],{'callerUid':_0x1f7223['uid'],'uid':_0x59afea,'ip':_0x1f7223['ip'],'user':_0x5a0692}),await events[_0x5ed110(0x1ea)]({'type':_0x5ed110(0x259)+_0xc83a81,'uid':_0x1f7223[_0x5ed110(0x277)],'targetUid':_0x59afea,'ip':_0x1f7223['ip'],'username':_0x5a0692['username'],'email':_0x5a0692[_0x5ed110(0x207)]});}async function canDeleteUids(_0xaf2d17){const _0x434055=_0x478a69,_0x4c1ef3={'cqJlK':'BcxrS','pZEVO':_0x434055(0x248),'xNGuG':_0x434055(0x287),'XNoxR':_0x434055(0x20b),'kLqpy':_0x434055(0x1d2)};if(!Array['isArray'](_0xaf2d17)){if(_0x4c1ef3[_0x434055(0x1c8)]===_0x4c1ef3[_0x434055(0x269)])throw new _0x2c7da0(_0x434055(0x1d4));else throw new Error(_0x4c1ef3['xNGuG']);}const _0x4d4ab1=await groups[_0x434055(0x202)](_0xaf2d17,_0x4c1ef3[_0x434055(0x216)]);if(_0x4d4ab1[_0x434055(0x1f9)](!![]))throw new Error(_0x4c1ef3['kLqpy']);return!![];}usersAPI[_0x478a69(0x261)]=async function(_0x242e8c,_0xc03841){const _0x23e36c=_0x478a69,_0x2133f8={'gdEMB':'[[error:invalid-data]]','ivUBN':function(_0x53b2ab,_0x1af2eb){return _0x53b2ab!==_0x1af2eb;},'bjbuh':function(_0x516d1a,_0x46354e){return _0x516d1a===_0x46354e;},'BxMKD':_0x23e36c(0x244),'ZdNpJ':'flagged','DzQsw':_0x23e36c(0x1d4),'CVnRi':'username'};if(!_0xc03841){if(_0x2133f8[_0x23e36c(0x1b3)]('tOUjD',_0x23e36c(0x1c3)))throw new _0x25010d(_0x2133f8[_0x23e36c(0x27b)]);else throw new Error(_0x23e36c(0x287));}const [_0x4f782d,_0x3b75f2]=await Promise[_0x23e36c(0x1be)]([privileges[_0x23e36c(0x278)][_0x23e36c(0x26d)](_0x23e36c(0x21c),_0x242e8c[_0x23e36c(0x277)]),user[_0x23e36c(0x260)](_0x242e8c[_0x23e36c(0x277)])]);let _0x553659=_0xc03841[_0x23e36c(0x251)]||[];_0x553659=Array[_0x23e36c(0x1bc)](_0x553659)?_0x553659:[_0x553659];if(!_0x4f782d||(_0xc03841[_0x23e36c(0x249)]==='ip'||_0x2133f8[_0x23e36c(0x280)](_0xc03841[_0x23e36c(0x249)],_0x23e36c(0x207))||_0x553659[_0x23e36c(0x1f9)](_0x2133f8[_0x23e36c(0x24b)])||_0x553659[_0x23e36c(0x1f9)](_0x2133f8['ZdNpJ']))&&!_0x3b75f2)throw new Error(_0x2133f8[_0x23e36c(0x1bf)]);return await user[_0x23e36c(0x261)]({'query':_0xc03841[_0x23e36c(0x23e)],'searchBy':_0xc03841['searchBy']||_0x2133f8['CVnRi'],'page':_0xc03841['page']||0x1,'sortBy':_0xc03841[_0x23e36c(0x26e)]||'lastonline','filters':_0x553659});},usersAPI[_0x478a69(0x1e7)]=async(_0x135220,_0x10c6e8)=>{const _0x3ea3ec=_0x478a69,_0x265685={'ohmDW':'[[error:invalid-data]]','lejlE':_0x3ea3ec(0x1f8),'EqLld':function(_0x47304c,_0x4d3cab){return _0x47304c===_0x4d3cab;},'LBTcQ':_0x3ea3ec(0x230),'BFGoS':_0x3ea3ec(0x1e4)};if(!_0x10c6e8)throw new Error(_0x265685[_0x3ea3ec(0x218)]);const {type:_0x4c4b42,url:_0xd0012}=_0x10c6e8;let _0x5d5ab9='';await user[_0x3ea3ec(0x257)](_0x135220['uid'],_0x10c6e8['uid'],_0x265685[_0x3ea3ec(0x1da)]);const _0x3c2086=await privileges[_0x3ea3ec(0x212)][_0x3ea3ec(0x1e8)](_0x135220['uid'],_0x10c6e8[_0x3ea3ec(0x277)]);if(!_0x3c2086)throw new Error(_0x3ea3ec(0x1d4));if(_0x265685['EqLld'](_0x4c4b42,'default'))_0x5d5ab9='';else{if(_0x4c4b42===_0x3ea3ec(0x1c4))_0x5d5ab9=await user[_0x3ea3ec(0x203)](_0x10c6e8['uid'],_0x3ea3ec(0x210));else{if(_0x265685[_0x3ea3ec(0x209)](_0x4c4b42,'external')&&_0xd0012)_0x5d5ab9=validator[_0x3ea3ec(0x1ec)](_0xd0012);else{const _0x533013=await plugins[_0x3ea3ec(0x229)][_0x3ea3ec(0x279)](_0x3ea3ec(0x265),{'uid':_0x135220[_0x3ea3ec(0x277)],'type':_0x4c4b42,'picture':undefined});_0x5d5ab9=_0x533013&&_0x533013[_0x3ea3ec(0x230)];}}}const _0x205139=await user[_0x3ea3ec(0x206)](_0x135220[_0x3ea3ec(0x277)]);!_0x205139['includes'](_0x10c6e8[_0x3ea3ec(0x1cb)])&&(_0x10c6e8['bgColor']=_0x205139[0x0]),await user[_0x3ea3ec(0x1c2)](_0x135220[_0x3ea3ec(0x277)],{'uid':_0x10c6e8['uid'],'picture':_0x5d5ab9,'icon:bgColor':_0x10c6e8[_0x3ea3ec(0x1cb)]},[_0x265685[_0x3ea3ec(0x1e3)],_0x265685[_0x3ea3ec(0x255)]]);},usersAPI[_0x478a69(0x25f)]=async(_0x237a29,{uid:_0x4a7b9d,type:_0x163586})=>{const _0x1a4661=_0x478a69,_0x39dd75={'eTiJq':'locks','PYXOO':_0x1a4661(0x241),'EMOmF':function(_0x478e69,_0x83d733){return _0x478e69>_0x83d733;},'WIbTl':'GtGBA','YoCWe':_0x1a4661(0x235),'yQDKf':_0x1a4661(0x276)},_0x4a8406=await db[_0x1a4661(0x1fb)](_0x1a4661(0x1e6),_0x1a4661(0x27e)+_0x4a7b9d+_0x163586);if(_0x39dd75[_0x1a4661(0x25a)](_0x4a8406,0x1)){if(_0x39dd75['WIbTl']===_0x1a4661(0x1dd))throw new Error(_0x39dd75['YoCWe']);else _0x5f10ac[_0x1a4661(0x1cb)]=_0x289a9a[0x0];}const _0xc8a7b8=require(_0x39dd75[_0x1a4661(0x233)])[_0x1a4661(0x27c)](_0x1a4661(0x24a)+_0x163586+'.js',[],{'env':process[_0x1a4661(0x238)]});_0xc8a7b8[_0x1a4661(0x264)]({'uid':_0x4a7b9d}),_0xc8a7b8['on'](_0x1a4661(0x1f3),async _0x54ca4e=>{const _0x77a469=_0x1a4661;winston[_0x77a469(0x1f3)](_0x54ca4e[_0x77a469(0x247)]),await db[_0x77a469(0x213)](_0x39dd75[_0x77a469(0x22c)],_0x77a469(0x27e)+_0x4a7b9d+_0x163586);}),_0xc8a7b8['on'](_0x1a4661(0x1b2),async()=>{const _0x27c839=_0x1a4661;await db['deleteObjectField']('locks',_0x27c839(0x27e)+_0x4a7b9d+_0x163586);const _0x4b4c88=await user[_0x27c839(0x282)](_0x4a7b9d,[_0x39dd75[_0x27c839(0x25b)],_0x27c839(0x1fe)]),{displayname:_0xa7dfc3}=_0x4b4c88,_0x4a8cce=await notifications['create']({'bodyShort':'[[notifications:'+_0x163586+_0x27c839(0x268)+_0xa7dfc3+']]','path':_0x27c839(0x205)+_0x4b4c88[_0x27c839(0x1fe)]+_0x27c839(0x23a)+_0x163586,'nid':_0x163586+':export:'+_0x4a7b9d,'from':_0x4a7b9d});await notifications['push'](_0x4a8cce,[_0x237a29[_0x27c839(0x277)]]),await events[_0x27c839(0x1ea)]({'type':_0x27c839(0x27e)+_0x163586,'uid':_0x237a29[_0x27c839(0x277)],'targetUid':_0x4a7b9d,'ip':_0x237a29['ip']});});};