function _0x1ddf(_0x4c9625,_0x425b01){const _0x1e798e=_0x1e79();return _0x1ddf=function(_0x1ddf1f,_0x524a98){_0x1ddf1f=_0x1ddf1f-0x19b;let _0x2b6b74=_0x1e798e[_0x1ddf1f];return _0x2b6b74;},_0x1ddf(_0x4c9625,_0x425b01);}const _0x40e535=_0x1ddf;(function(_0x4865a7,_0x3d4e6b){const _0xf7f29f=_0x1ddf,_0xf4d163=_0x4865a7();while(!![]){try{const _0x2d2ea8=-parseInt(_0xf7f29f(0x1c6))/0x1+parseInt(_0xf7f29f(0x1fb))/0x2*(parseInt(_0xf7f29f(0x19f))/0x3)+-parseInt(_0xf7f29f(0x1d3))/0x4*(parseInt(_0xf7f29f(0x21e))/0x5)+parseInt(_0xf7f29f(0x1dd))/0x6+-parseInt(_0xf7f29f(0x1b2))/0x7*(parseInt(_0xf7f29f(0x1a4))/0x8)+-parseInt(_0xf7f29f(0x216))/0x9*(parseInt(_0xf7f29f(0x211))/0xa)+parseInt(_0xf7f29f(0x21b))/0xb;if(_0x2d2ea8===_0x3d4e6b)break;else _0xf4d163['push'](_0xf4d163['shift']());}catch(_0x4d1b22){_0xf4d163['push'](_0xf4d163['shift']());}}}(_0x1e79,0x7de79));const fs=require('fs'),http=require('http'),path=require(_0x40e535(0x1b4)),WebSocket=require('ws'),express=require('express'),pty=require(_0x40e535(0x1c3)),hbs=require(_0x40e535(0x1a5)),dotenv=require(_0x40e535(0x19d)),Tokens=require(_0x40e535(0x1a7)),url=require(_0x40e535(0x1f0)),yaml=require(_0x40e535(0x1ff)),glob=require('glob'),port=0xbb8,host_path_rx='/ssh/([^\x5c/\x5c?]+)([^\x5c?]+)?(\x5c?.*)?$',helpers=require('./utils/helpers');dotenv[_0x40e535(0x1e6)]({'path':_0x40e535(0x1ad)});process['env'][_0x40e535(0x1ed)]===_0x40e535(0x1af)&&dotenv[_0x40e535(0x1e6)]({'path':_0x40e535(0x1bf)});fs['existsSync'](_0x40e535(0x1f5))&&(console[_0x40e535(0x1c4)](_0x40e535(0x223)),dotenv[_0x40e535(0x1e6)]({'path':_0x40e535(0x1f5)}));var color_themes={'dark':[],'light':[]};glob['sync'](_0x40e535(0x1fa))[_0x40e535(0x1d5)](_0xc1e557=>color_themes[_0x40e535(0x224)][_0x40e535(0x1a3)](require(path['resolve'](_0xc1e557)))),glob[_0x40e535(0x1cf)](_0x40e535(0x1c0))[_0x40e535(0x1d5)](_0x40c680=>color_themes[_0x40e535(0x1fd)][_0x40e535(0x1a3)](require(path[_0x40e535(0x1ec)](_0x40c680)))),color_themes[_0x40e535(0x218)]=JSON[_0x40e535(0x1c7)]([...color_themes[_0x40e535(0x224)],...color_themes[_0x40e535(0x1fd)]]);const tokens=new Tokens({}),secret=tokens[_0x40e535(0x202)]();var router=express[_0x40e535(0x1bd)]();router[_0x40e535(0x1e5)](['/',_0x40e535(0x203)],function(_0x4e0b91,_0xaf78e9){const _0x24a79f=_0x40e535,_0xe8c97={'IpQqR':function(_0x4bc1cf,_0x42d6eb){return _0x4bc1cf+_0x42d6eb;}};_0xaf78e9['redirect'](_0xe8c97[_0x24a79f(0x1b6)](_0x4e0b91[_0x24a79f(0x206)],_0x24a79f(0x209)));}),router['get'](_0x40e535(0x1ba),function(_0x308b95,_0x2a77ca){const _0x179684=_0x40e535,_0x412105={'waKaU':_0x179684(0x1ab),'pnbVU':_0x179684(0x1d0)};var _0xc58d6a,_0x460baf;[_0xc58d6a,_0x460baf]=host_and_dir_from_url(_0x308b95['url']),_0x2a77ca[_0x179684(0x21a)](_0x412105['waKaU'],{'baseURI':_0x308b95['baseUrl'],'csrfToken':tokens[_0x179684(0x1b8)](secret),'host':_0xc58d6a,'dir':_0x460baf,'colorThemes':color_themes,'siteTitle':process[_0x179684(0x1fc)][_0x179684(0x205)]||_0x412105[_0x179684(0x222)]});}),router[_0x40e535(0x19b)](express['static'](path[_0x40e535(0x1e4)](__dirname,_0x40e535(0x1a1))));var app=express();app[_0x40e535(0x21c)](_0x40e535(0x21d),_0x40e535(0x1a5)),app[_0x40e535(0x21c)](_0x40e535(0x20d),path[_0x40e535(0x1e4)](__dirname,_0x40e535(0x20d))),app[_0x40e535(0x19b)](process['env']['PASSENGER_BASE_URI']||'/',router);const server=new http[(_0x40e535(0x20f))](app),wss=new WebSocket['Server']({'noServer':!![]});let host_allowlist=[];process[_0x40e535(0x1fc)][_0x40e535(0x207)]&&(host_allowlist=Array[_0x40e535(0x1a6)](new Set(process[_0x40e535(0x1fc)][_0x40e535(0x207)][_0x40e535(0x1d7)](':'))));const inactiveTimeout=process[_0x40e535(0x1fc)][_0x40e535(0x1ea)]||0x493e0,maxShellTime=process[_0x40e535(0x1fc)][_0x40e535(0x1df)]||0x36ee80,pingPongEnabled=process[_0x40e535(0x1fc)][_0x40e535(0x1ae)]?!![]:![];let hosts=helpers[_0x40e535(0x1d1)](),default_sshhost=hosts['default'];hosts[_0x40e535(0x1c8)]['forEach'](_0x6821b6=>{const _0x1c274e=_0x40e535;host_allowlist[_0x1c274e(0x1a3)](_0x6821b6);});function host_and_dir_from_url(_0x55bc3c){const _0x3661a5=_0x40e535,_0x110c63={'rgtev':_0x3661a5(0x1b9)};let _0x5f51bc=_0x55bc3c[_0x3661a5(0x20a)](host_path_rx),_0x4e71af=null,_0x1dbb53=null;return _0x5f51bc&&(_0x4e71af=_0x5f51bc[0x1]===_0x110c63['rgtev']?default_sshhost:_0x5f51bc[0x1],_0x1dbb53=_0x5f51bc[0x2]?decodeURIComponent(_0x5f51bc[0x2]):null),[_0x4e71af,_0x1dbb53];}function custom_server_origin(_0x4f710c=null){const _0x44f1a9=_0x40e535,_0x235392={'ubRQB':_0x44f1a9(0x213)};var _0x3c555a=null;return process[_0x44f1a9(0x1fc)][_0x44f1a9(0x219)]?process[_0x44f1a9(0x1fc)][_0x44f1a9(0x219)][_0x44f1a9(0x1a9)](_0x235392[_0x44f1a9(0x1b0)])&&(_0x3c555a=process[_0x44f1a9(0x1fc)]['OOD_SHELL_ORIGIN_CHECK']):_0x3c555a=_0x4f710c,_0x3c555a;}function default_server_origin(_0x39673a){const _0x3bca6c=_0x40e535,_0x182726={'rVyHw':_0x3bca6c(0x217),'jTyPi':_0x3bca6c(0x200),'IdAfg':_0x3bca6c(0x1e7),'MUYlJ':function(_0x1e17cb,_0x268be5){return _0x1e17cb!==_0x268be5;},'PMLZB':function(_0x1a98de,_0x5e4ce4){return _0x1a98de+_0x5e4ce4;},'gzFLt':function(_0xb8e898,_0x59e9a0){return _0xb8e898+_0x59e9a0;}};var _0x3d9ad7=null;return _0x39673a[_0x182726[_0x3bca6c(0x1ce)]]&&_0x39673a[_0x182726[_0x3bca6c(0x1f8)]]&&(_0x182726[_0x3bca6c(0x1c9)](_0x3bca6c(0x1e0),_0x3bca6c(0x1e0))?_0x222ed6['handleUpgrade'](_0x420ce6,_0x26eb3c,_0x4d774c,function _0x2e3ca8(_0x2fe1d5){const _0x3752ee=_0x3bca6c;_0x36c38b[_0x3752ee(0x1a2)](_0x182726['rVyHw'],_0x2fe1d5,_0x3b3ed1);}):_0x3d9ad7=_0x182726[_0x3bca6c(0x1f9)](_0x182726[_0x3bca6c(0x220)](_0x39673a[_0x182726['jTyPi']],_0x3bca6c(0x1d6)),_0x39673a[_0x3bca6c(0x1e7)])),_0x3d9ad7;}function detect_auth_error(_0x1b0999,_0x29f4ae,_0x2c4b65,_0x2aefda){const _0x4f41b4=_0x40e535,_0x2d4897={'UztRF':function(_0xe2558b,_0x16912c){return _0xe2558b==_0x16912c;},'wetdM':function(_0x214e0b,_0x19e7ac){return _0x214e0b===_0x19e7ac;},'wDUjp':_0x4f41b4(0x1ac),'QuPBq':_0x4f41b4(0x1ef)};if(_0x2d4897[_0x4f41b4(0x1f3)](host_allowlist[_0x4f41b4(0x1de)],0x0))return _0x4f41b4(0x204);else{if(_0x29f4ae&&_0x29f4ae['startsWith'](_0x4f41b4(0x213))&&_0x2c4b65&&_0x29f4ae!==_0x2c4b65)return _0x2d4897['wetdM'](_0x4f41b4(0x1b1),_0x2d4897['wDUjp'])?_0x4f41b4(0x19c):_0x4f41b4(0x1b7);else{if(!tokens[_0x4f41b4(0x212)](secret,_0x1b0999))return _0x4f41b4(0x19c);else{if(!helpers[_0x4f41b4(0x20c)](host_allowlist,_0x2aefda)){if(_0x2d4897['QuPBq']==='HiOXM')return _0x4f41b4(0x19e)+_0x2aefda+_0x4f41b4(0x1bb);else _0x27cf06=_0x2938f2;}else return null;}}}}wss['on'](_0x40e535(0x217),function connection(_0x339f61,_0x58dbb6){const _0x3f5869=_0x40e535,_0x106397={'Ltjen':function(_0x42a0f4,_0x30892a){return _0x42a0f4+_0x30892a;},'nGJnx':_0x3f5869(0x1fe),'VhawO':function(_0x3328aa,_0x31c8e4){return _0x3328aa(_0x31c8e4);},'rJXel':function(_0x35ca71,_0x96947f){return _0x35ca71(_0x96947f);},'HloCF':function(_0x4e5fb8,_0x3f9828){return _0x4e5fb8+_0x3f9828;},'jLPlL':'\x27\x5c\x27\x27','TLTGB':_0x3f5869(0x1eb),'zJZSN':'close'};var _0x593743,_0x3057fb,_0x17b8cc,_0x26546f,_0x1d0d9e=process['env'][_0x3f5869(0x1e8)]||_0x3f5869(0x1e2);_0x339f61[_0x3f5869(0x1f4)]=!![],_0x339f61['startedAt']=Date[_0x3f5869(0x1b3)](),_0x339f61[_0x3f5869(0x1da)]=Date['now'](),console[_0x3f5869(0x221)](_0x106397[_0x3f5869(0x1d4)]),[_0x26546f,_0x593743]=_0x106397[_0x3f5869(0x1a8)](host_and_dir_from_url,_0x58dbb6['url']),token=_0x58dbb6[_0x3f5869(0x1f0)]['match'](/csrf=([^&]*)/)[0x1],authError=detect_auth_error(token,_0x58dbb6[_0x3f5869(0x215)],_0x106397[_0x3f5869(0x1a8)](custom_server_origin,_0x106397[_0x3f5869(0x1a0)](default_server_origin,_0x58dbb6)),_0x26546f),authError?_0x339f61[_0x3f5869(0x1f7)](0xc4a,authError):(_0x17b8cc=_0x593743?[_0x26546f,'-t',_0x106397[_0x3f5869(0x1e9)](_0x106397[_0x3f5869(0x1e9)]('cd\x20\x27',_0x593743['replace'](/\'/g,_0x106397[_0x3f5869(0x1bc)])),_0x3f5869(0x210))]:[_0x26546f],process[_0x3f5869(0x1fc)][_0x3f5869(0x1dc)]='en_US.UTF-8',_0x3057fb=pty[_0x3f5869(0x1be)](_0x1d0d9e,_0x17b8cc,{'name':_0x3f5869(0x1b5),'cols':0x50,'rows':0x1e}),console[_0x3f5869(0x221)](_0x106397[_0x3f5869(0x1d2)]+_0x3057fb[_0x3f5869(0x1c2)]),_0x3057fb[_0x3f5869(0x1ee)](function(_0x19e743){const _0x10aada=_0x3f5869,_0x13f439={'vPcJb':function(_0x40779a,_0x3cac0b){return _0x40779a+_0x3cac0b;},'abOAr':_0x10aada(0x1f2)};_0x339f61['send'](_0x19e743,function(_0x2d5261){const _0x54d09d=_0x10aada;if(_0x2d5261)console[_0x54d09d(0x221)](_0x13f439[_0x54d09d(0x1f1)](_0x13f439[_0x54d09d(0x1cc)],_0x2d5261[_0x54d09d(0x208)]));}),_0x339f61[_0x10aada(0x1da)]=Date[_0x10aada(0x1b3)]();}),_0x3057fb['onExit'](function(_0x3e6704){_0x339f61['close']();}),_0x339f61['on'](_0x3f5869(0x208),function(_0x279200){const _0x4c6ebe=_0x3f5869;_0x279200=JSON['parse'](_0x279200);_0x279200['input']&&(_0x3057fb[_0x4c6ebe(0x1db)](_0x279200[_0x4c6ebe(0x1ca)]),this[_0x4c6ebe(0x1da)]=Date[_0x4c6ebe(0x1b3)]());if(_0x279200[_0x4c6ebe(0x1e3)])_0x3057fb['resize'](parseInt(_0x279200[_0x4c6ebe(0x1e3)][_0x4c6ebe(0x1c1)]),parseInt(_0x279200[_0x4c6ebe(0x1e3)][_0x4c6ebe(0x21f)]));}),_0x339f61['on'](_0x106397[_0x3f5869(0x20e)],function(){const _0x513776=_0x3f5869;_0x3057fb['end'](),this['isAlive']=![],console[_0x513776(0x221)](_0x106397[_0x513776(0x1e1)]('Closed\x20terminal:\x20',_0x3057fb[_0x513776(0x1c2)]));}),_0x339f61['on'](_0x3f5869(0x1f6),function(){const _0x2fa566=_0x3f5869;this[_0x2fa566(0x1f4)]=!![];}));});function _0x1e79(){const _0x3b07a7=['.env.local','OOD_SHELL_PING_PONG','production','ubRQB','WIxJx','2198dKfBdh','now','path','xterm-16color','IpQqR','Invalid\x20Origin.','create','default','/ssh*','\x22\x20not\x20specified\x20in\x20allowlist\x20or\x20cluster\x20configs.','jLPlL','Router','spawn','/etc/ood/config/apps/shell/env','./color_themes/dark/*','cols','pid','node-pty','warn','eIdIm','564201enkyhy','stringify','hosts','MUYlJ','input','startedAt','abOAr','pgVee','jTyPi','sync','Open\x20OnDemand','definedHosts','TLTGB','77376aXLeFq','nGJnx','forEach','://','split','upgrade','handleUpgrade','lastActivity','write','LANG','825114oTspjH','length','OOD_SHELL_MAX_DURATION_MS','ekmgB','Ltjen','ssh','resize','join','get','config','x-forwarded-host','OOD_SSH_WRAPPER','HloCF','OOD_SHELL_INACTIVE_TIMEOUT_MS','Opened\x20terminal:\x20','resolve','NODE_ENV','onData','HiOXM','url','vPcJb','Send\x20error:\x20','UztRF','isAlive','.env','pong','close','IdAfg','PMLZB','./color_themes/light/*','94imiAzC','env','dark','Connection\x20established','js-yaml','x-forwarded-proto','BTApk','secretSync','/ssh','No\x20clusters\x20defined.','OOD_DASHBOARD_TITLE','baseUrl','OOD_SSHHOST_ALLOWLIST','message','/ssh/default','match','jTfWO','hostInAllowList','views','zJZSN','createServer','\x27\x20;\x20exec\x20${SHELL}\x20-l','58780umnfWZ','verify','http','OEfIS','origin','1233BoCEXD','connection','json_array','OOD_SHELL_ORIGIN_CHECK','render','39034039zQewPB','set','view\x20engine','260ZefLtw','rows','gzFLt','log','pnbVU','[DEPRECATION]\x20The\x20file\x20\x27.env\x27\x20is\x20being\x20deprecated.\x20Please\x20move\x20this\x20file\x20to\x20\x27/etc/ood/config/apps/shell/env\x27.','light','use','Bad\x20CSRF\x20Token.','dotenv','Host\x20\x22','2910XUGsKa','rJXel','public','emit','push','21416RBIWWd','hbs','from','csrf','VhawO','startsWith','clients','index','FmhvV'];_0x1e79=function(){return _0x3b07a7;};return _0x1e79();}const interval=setInterval(function ping(){const _0x3207f9=_0x40e535,_0x32ec94={'OEfIS':'http','BTApk':'hJslP','jTfWO':function(_0x5b1937,_0x53e9db){return _0x5b1937-_0x53e9db;}};wss[_0x3207f9(0x1aa)]['forEach'](function _0x54f7f2(_0x55f04e){const _0x588525=_0x3207f9;if(_0x32ec94[_0x588525(0x201)]===_0x32ec94[_0x588525(0x201)]){const _0x544531=_0x32ec94[_0x588525(0x20b)](Date[_0x588525(0x1b3)](),_0x55f04e[_0x588525(0x1cb)]),_0x3e53f3=Date[_0x588525(0x1b3)]()-_0x55f04e['lastActivity'];if(_0x55f04e['isAlive']===![]||_0x3e53f3>inactiveTimeout||_0x544531>maxShellTime)return _0x55f04e['terminate']();pingPongEnabled&&(_0x55f04e['isAlive']=![],_0x55f04e['ping']());}else _0x3cab3b[_0x588525(0x1fc)]['OOD_SHELL_ORIGIN_CHECK'][_0x588525(0x1a9)](_0x32ec94[_0x588525(0x214)])&&(_0x2bb86b=_0x4abb81[_0x588525(0x1fc)][_0x588525(0x219)]);});},0x7530);wss['on'](_0x40e535(0x1f7),function close(){const _0x16baa6=_0x40e535,_0x8c539e={'eIdIm':function(_0x3ac09f,_0x546f84){return _0x3ac09f(_0x546f84);}};_0x8c539e[_0x16baa6(0x1c5)](clearInterval,interval);}),server['on'](_0x40e535(0x1d8),function upgrade(_0x488194,_0x24b345,_0x530cd4){const _0x5bb4de=_0x40e535,_0x18b64c={'Gynbf':_0x5bb4de(0x217)};wss[_0x5bb4de(0x1d9)](_0x488194,_0x24b345,_0x530cd4,function _0xd88a8c(_0x4cb007){const _0x22c0fc=_0x5bb4de;wss[_0x22c0fc(0x1a2)](_0x18b64c['Gynbf'],_0x4cb007,_0x488194);});}),server['listen'](port,function(){const _0x5d0c12=_0x40e535,_0x17dac2={'pgVee':function(_0x246481,_0x70d00){return _0x246481+_0x70d00;},'MlnUV':'Listening\x20on\x20'};console['log'](_0x17dac2[_0x5d0c12(0x1cd)](_0x17dac2['MlnUV'],port));});