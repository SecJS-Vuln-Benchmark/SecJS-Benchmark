(function(_0x1f685d,_0x416602){const _0x17aaf2=_0x12ec,_0x75dff=_0x1f685d();while(!![]){try{const _0x46f3c4=parseInt(_0x17aaf2(0x24a))/0x1+parseInt(_0x17aaf2(0x234))/0x2*(parseInt(_0x17aaf2(0x25d))/0x3)+-parseInt(_0x17aaf2(0x204))/0x4*(-parseInt(_0x17aaf2(0x23c))/0x5)+parseInt(_0x17aaf2(0x231))/0x6+-parseInt(_0x17aaf2(0x259))/0x7+parseInt(_0x17aaf2(0x1f6))/0x8+-parseInt(_0x17aaf2(0x21a))/0x9;if(_0x46f3c4===_0x416602)break;else _0x75dff['push'](_0x75dff['shift']());}catch(_0x3cb3bd){_0x75dff['push'](_0x75dff['shift']());}}}(_0x1d30,0xe9d7c));import{Hono}from'hono';import _0x2f6712 from'supertest';import{serveStatic}from'./../src/serve-static';function _0x12ec(_0x318e92,_0x1a9467){const _0x1d30db=_0x1d30();return _0x12ec=function(_0x12ecf5,_0x572c4a){_0x12ecf5=_0x12ecf5-0x1f3;let _0x3784a5=_0x1d30db[_0x12ecf5];return _0x3784a5;},_0x12ec(_0x318e92,_0x1a9467);}import{createAdaptorServer}from'./../src/server';describe('Serve\x20Static\x20Middleware',()=>{const _0x193732=_0x12ec,_0x5196d8={'awPoH':_0x193732(0x225),'GjoiY':function(_0x374ab5,_0x76a3ec){return _0x374ab5(_0x76a3ec);},'UdMBA':_0x193732(0x256),'mnPku':_0x193732(0x22a),'mvknx':function(_0x45405d,_0x396557){return _0x45405d(_0x396557);},'Bssyi':_0x193732(0x20e),'jNvFT':function(_0x579e01,_0x2b3a63){return _0x579e01(_0x2b3a63);},'BWXYZ':'Foo\x20Bar','RrzId':function(_0x37f476,_0x4915bb){return _0x37f476(_0x4915bb);},'NIiVI':_0x193732(0x227),'KoSGx':function(_0x31a50a,_0x1caeab){return _0x31a50a(_0x1caeab);},'RIwlY':_0x193732(0x1fe),'pWVxB':_0x193732(0x243),'tsJKe':function(_0x1ce2d0,_0x404e8f){return _0x1ce2d0(_0x404e8f);},'wJIPs':'/dot-static/plain.txt','NqZDl':_0x193732(0x209),'oCsUB':function(_0x21b199,_0x4cd6df){return _0x21b199(_0x4cd6df);},'YvMmf':_0x193732(0x221),'lAmyf':_0x193732(0x23a),'BzBwm':function(_0x5ca4c1,_0x5bcc2f){return _0x5ca4c1(_0x5bcc2f);},'selnN':function(_0x14d857,_0x18713c){return _0x14d857(_0x18713c);},'lCamY':'content-type','vfwIy':'content-length','iGgpZ':function(_0x5ce572,_0x2dfb07){return _0x5ce572(_0x2dfb07);},'PvhIE':'0-9','mlaVg':function(_0x52cb92,_0x11c123){return _0x52cb92(_0x11c123);},'zYxoO':function(_0x278997,_0x15b81b){return _0x278997(_0x15b81b);},'iDQdX':_0x193732(0x1f5),'HyDjq':_0x193732(0x22b),'OmSmA':'This\x20is\x20pl','BDsEj':_0x193732(0x236),'YAsJg':function(_0x12a982,_0x291072){return _0x12a982(_0x291072);},'HJtrF':function(_0x70b1dc,_0x50689c){return _0x70b1dc(_0x50689c);},'yWZle':_0x193732(0x228),'FpnUR':_0x193732(0x205),'cNRTX':function(_0x29b7a4,_0x1e946e){return _0x29b7a4(_0x1e946e);},'wMyoA':function(_0x52f239,_0xbfc7f1){return _0x52f239(_0xbfc7f1);},'RNpPm':_0x193732(0x241),'PslOh':function(_0x5965ff,_0x54d799){return _0x5965ff(_0x54d799);},'ZFict':function(_0x19a610,_0x1eee88){return _0x19a610(_0x1eee88);},'vrdSc':_0x193732(0x216),'ksCpq':_0x193732(0x214),'gDsjJ':_0x193732(0x235),'hEPbP':_0x193732(0x237),'xkVIf':function(_0x3cf9c6,_0x422b44){return _0x3cf9c6(_0x422b44);},'kyJIR':_0x193732(0x252),'nDYFh':_0x193732(0x21d),'huesc':_0x193732(0x232),'kMXpc':_0x193732(0x248),'uSGJE':function(_0x3db3df,_0x2061b3){return _0x3db3df(_0x2061b3);},'ugoZh':function(_0x5e14fb,_0x1d2cfc,_0x19a120){return _0x5e14fb(_0x1d2cfc,_0x19a120);},'Mwden':function(_0x403434,_0x40f431,_0x1c5589){return _0x403434(_0x40f431,_0x1c5589);},'fpRDI':function(_0x52b335,_0x3f2ac5,_0x125805){return _0x52b335(_0x3f2ac5,_0x125805);},'lMdcM':'Should\x20return\x20404\x20for\x20non-existent\x20files','QZbMC':_0x193732(0x1fd),'ufaZa':function(_0x1b8f56,_0x14fee4,_0xfaa827){return _0x1b8f56(_0x14fee4,_0xfaa827);},'hVSbs':function(_0x5afc04,_0x13f8c9,_0x27eea9){return _0x5afc04(_0x13f8c9,_0x27eea9);},'zzoEO':'Should\x20handle\x20double\x20dots\x20in\x20URL'},_0x27a972=new Hono();_0x27a972['use'](_0x5196d8[_0x193732(0x251)],_0x5196d8[_0x193732(0x212)](serveStatic,{'root':'./test/assets'})),_0x27a972[_0x193732(0x22f)](_0x5196d8[_0x193732(0x24d)],_0x5196d8[_0x193732(0x258)](serveStatic,{'path':_0x5196d8['kyJIR']})),_0x27a972['use'](_0x5196d8['nDYFh'],serveStatic({'root':_0x5196d8[_0x193732(0x201)],'rewriteRequestPath':_0x62b78b=>_0x62b78b[_0x193732(0x242)](/^\/dot-static/,_0x193732(0x215))}));let _0x17b3af='';_0x27a972[_0x193732(0x22f)](_0x193732(0x217),_0x5196d8[_0x193732(0x258)](serveStatic,{'root':_0x5196d8[_0x193732(0x208)],'onNotFound':(_0x2586da,_0x2583de)=>{const _0x3ef1c3=_0x193732;_0x17b3af=_0x2586da+_0x3ef1c3(0x257)+_0x2583de[_0x3ef1c3(0x21e)][_0x3ef1c3(0x244)];}}));const _0x4d6680=_0x5196d8[_0x193732(0x229)](createAdaptorServer,_0x27a972);_0x5196d8[_0x193732(0x255)](it,_0x193732(0x206),async()=>{const _0x163292=_0x193732,_0x42ce40=await _0x2f6712(_0x4d6680)[_0x163292(0x247)](_0x163292(0x23e));expect(_0x42ce40[_0x163292(0x245)])[_0x163292(0x211)](0xc8),expect(_0x42ce40[_0x163292(0x20b)])[_0x163292(0x211)](_0x5196d8['awPoH']),_0x5196d8['GjoiY'](expect,_0x42ce40[_0x163292(0x1f8)][_0x163292(0x1fb)])[_0x163292(0x211)](_0x163292(0x24b));}),it(_0x193732(0x23f),async()=>{const _0x55559a=_0x193732,_0x4bd0c9=await _0x2f6712(_0x4d6680)[_0x55559a(0x247)](_0x5196d8['UdMBA']);expect(_0x4bd0c9[_0x55559a(0x245)])['toBe'](0xc8),_0x5196d8[_0x55559a(0x250)](expect,_0x4bd0c9['text'])[_0x55559a(0x211)](_0x5196d8['mnPku']),expect(_0x4bd0c9[_0x55559a(0x1f8)][_0x55559a(0x1fb)])['toBe'](_0x55559a(0x24b));}),it('Should\x20return\x20correct\x20headers\x20for\x20icons',async()=>{const _0x40edd7=_0x193732,_0x2556aa=await _0x5196d8[_0x40edd7(0x21c)](_0x2f6712,_0x4d6680)['get']('/favicon.ico');_0x5196d8[_0x40edd7(0x21c)](expect,_0x2556aa['status'])[_0x40edd7(0x211)](0xc8),_0x5196d8[_0x40edd7(0x21c)](expect,_0x2556aa[_0x40edd7(0x1f8)][_0x40edd7(0x1fb)])[_0x40edd7(0x211)](_0x5196d8[_0x40edd7(0x254)]);}),_0x5196d8[_0x193732(0x233)](it,'Should\x20return\x20correct\x20headers\x20and\x20data\x20for\x20json\x20files',async()=>{const _0x4711c2=_0x193732,_0x2d62b6=await _0x5196d8[_0x4711c2(0x223)](_0x2f6712,_0x4d6680)[_0x4711c2(0x247)](_0x4711c2(0x207));_0x5196d8[_0x4711c2(0x21c)](expect,_0x2d62b6['status'])['toBe'](0xc8),expect(_0x2d62b6[_0x4711c2(0x25a)])[_0x4711c2(0x20a)]({'id':0x1,'name':_0x5196d8[_0x4711c2(0x1f9)],'flag':!![]}),_0x5196d8[_0x4711c2(0x1ff)](expect,_0x2d62b6[_0x4711c2(0x1f8)][_0x4711c2(0x1fb)])['toBe'](_0x4711c2(0x21b));}),it('Should\x20return\x20correct\x20headers\x20and\x20data\x20for\x20text',async()=>{const _0x1f6203=_0x193732,_0x406f97=await _0x5196d8['GjoiY'](_0x2f6712,_0x4d6680)['get'](_0x5196d8[_0x1f6203(0x22d)]);expect(_0x406f97[_0x1f6203(0x245)])[_0x1f6203(0x211)](0xc8),_0x5196d8[_0x1f6203(0x239)](expect,_0x406f97[_0x1f6203(0x1f8)][_0x1f6203(0x1fb)])[_0x1f6203(0x211)](_0x1f6203(0x209)),expect(_0x406f97['text'])[_0x1f6203(0x211)](_0x1f6203(0x221));}),_0x5196d8[_0x193732(0x249)](it,_0x5196d8[_0x193732(0x24c)],async()=>{const _0x2a03ca=_0x193732,_0xfeddb4=await _0x2f6712(_0x4d6680)[_0x2a03ca(0x247)](_0x5196d8[_0x2a03ca(0x222)]);expect(_0xfeddb4[_0x2a03ca(0x245)])[_0x2a03ca(0x211)](0x194),expect(_0xfeddb4['headers'][_0x2a03ca(0x1fb)])['toBe'](_0x5196d8[_0x2a03ca(0x25e)]),expect(_0xfeddb4[_0x2a03ca(0x20b)])['toBe'](_0x2a03ca(0x220));}),it(_0x5196d8[_0x193732(0x224)],async()=>{const _0x570f39=_0x193732,_0x46e26f=await _0x5196d8[_0x570f39(0x210)](_0x2f6712,_0x4d6680)[_0x570f39(0x247)](_0x5196d8[_0x570f39(0x218)]);expect(_0x46e26f[_0x570f39(0x245)])[_0x570f39(0x211)](0xc8),expect(_0x46e26f[_0x570f39(0x1f8)][_0x570f39(0x1fb)])[_0x570f39(0x211)](_0x5196d8[_0x570f39(0x20f)]),_0x5196d8[_0x570f39(0x1f4)](expect,_0x46e26f[_0x570f39(0x20b)])[_0x570f39(0x211)](_0x5196d8[_0x570f39(0x23d)]);}),it(_0x193732(0x230),async()=>{const _0x15bfca=_0x193732,_0x5d3ca0=await _0x2f6712(_0x4d6680)[_0x15bfca(0x247)](_0x5196d8[_0x15bfca(0x22c)]);_0x5196d8['BzBwm'](expect,_0x5d3ca0[_0x15bfca(0x245)])[_0x15bfca(0x211)](0x194);}),it(_0x193732(0x25b),async()=>{const _0x4f889a=_0x193732,_0xc031d2=await _0x2f6712(_0x4d6680)['head'](_0x5196d8[_0x4f889a(0x22d)]);_0x5196d8['selnN'](expect,_0xc031d2[_0x4f889a(0x245)])['toBe'](0xc8),expect(_0xc031d2[_0x4f889a(0x1f8)][_0x5196d8[_0x4f889a(0x240)]])['toBe'](_0x5196d8['NqZDl']),_0x5196d8[_0x4f889a(0x250)](expect,_0xc031d2['headers'][_0x5196d8[_0x4f889a(0x226)]])[_0x4f889a(0x211)]('17'),_0x5196d8['iGgpZ'](expect,_0xc031d2[_0x4f889a(0x20b)])[_0x4f889a(0x211)](undefined);}),_0x5196d8[_0x193732(0x238)](it,_0x193732(0x25c),async()=>{const _0x5499c7=_0x193732;let _0x11436a=await _0x5196d8[_0x5499c7(0x21c)](_0x2f6712,_0x4d6680)[_0x5499c7(0x247)](_0x5499c7(0x227))[_0x5499c7(0x21f)](_0x5499c7(0x205),_0x5196d8['PvhIE']);_0x5196d8[_0x5499c7(0x1ff)](expect,_0x11436a[_0x5499c7(0x245)])[_0x5499c7(0x211)](0xce),_0x5196d8['mlaVg'](expect,_0x11436a['headers'][_0x5499c7(0x1fb)])[_0x5499c7(0x211)](_0x5196d8['NqZDl']),expect(_0x11436a[_0x5499c7(0x1f8)][_0x5499c7(0x219)])[_0x5499c7(0x211)]('10'),_0x5196d8[_0x5499c7(0x24f)](expect,_0x11436a['headers'][_0x5196d8['iDQdX']])['toBe'](_0x5196d8['HyDjq']),expect(_0x11436a[_0x5499c7(0x20b)]['length'])[_0x5499c7(0x211)](0xa),_0x5196d8[_0x5499c7(0x21c)](expect,_0x11436a['text'])[_0x5499c7(0x211)](_0x5196d8[_0x5499c7(0x202)]),_0x11436a=await _0x2f6712(_0x4d6680)['get'](_0x5499c7(0x227))['set'](_0x5499c7(0x205),_0x5196d8[_0x5499c7(0x22e)]),expect(_0x11436a['status'])[_0x5499c7(0x211)](0xce),_0x5196d8[_0x5499c7(0x1fc)](expect,_0x11436a[_0x5499c7(0x1f8)][_0x5196d8['lCamY']])['toBe'](_0x5196d8[_0x5499c7(0x20f)]),expect(_0x11436a[_0x5499c7(0x1f8)][_0x5196d8[_0x5499c7(0x226)]])[_0x5499c7(0x211)]('7'),expect(_0x11436a[_0x5499c7(0x1f8)][_0x5499c7(0x1f5)])[_0x5499c7(0x211)](_0x5499c7(0x24e)),_0x5196d8[_0x5499c7(0x223)](expect,_0x11436a[_0x5499c7(0x20b)]['length'])[_0x5499c7(0x211)](0x7),_0x5196d8[_0x5499c7(0x203)](expect,_0x11436a[_0x5499c7(0x20b)])[_0x5499c7(0x211)](_0x5196d8['yWZle']);}),it('Should\x20return\x20correct\x20headers\x20and\x20data\x20if\x20client\x20range\x20exceeds\x20the\x20data\x20size',async()=>{const _0x2c1fdc=_0x193732,_0x57bc50=await _0x5196d8['mlaVg'](_0x2f6712,_0x4d6680)['get'](_0x5196d8[_0x2c1fdc(0x22d)])[_0x2c1fdc(0x21f)](_0x5196d8['FpnUR'],_0x2c1fdc(0x253));_0x5196d8[_0x2c1fdc(0x239)](expect,_0x57bc50[_0x2c1fdc(0x245)])[_0x2c1fdc(0x211)](0xce),_0x5196d8['cNRTX'](expect,_0x57bc50[_0x2c1fdc(0x1f8)][_0x5196d8[_0x2c1fdc(0x240)]])[_0x2c1fdc(0x211)](_0x5196d8[_0x2c1fdc(0x20f)]),expect(_0x57bc50[_0x2c1fdc(0x1f8)][_0x5196d8['vfwIy']])['toBe']('17'),_0x5196d8['wMyoA'](expect,_0x57bc50[_0x2c1fdc(0x1f8)][_0x2c1fdc(0x1f5)])[_0x2c1fdc(0x211)](_0x5196d8[_0x2c1fdc(0x1f3)]),_0x5196d8[_0x2c1fdc(0x200)](expect,_0x57bc50['text'][_0x2c1fdc(0x246)])['toBe'](0x11),_0x5196d8[_0x2c1fdc(0x23b)](expect,_0x57bc50[_0x2c1fdc(0x20b)])[_0x2c1fdc(0x211)](_0x2c1fdc(0x221));}),_0x5196d8[_0x193732(0x233)](it,_0x193732(0x213),async()=>{const _0x3188f4=_0x193732,_0x218548=await _0x5196d8['ZFict'](_0x2f6712,_0x4d6680)[_0x3188f4(0x247)](_0x3188f4(0x1fa));expect(_0x218548[_0x3188f4(0x245)])[_0x3188f4(0x211)](0x194),expect(_0x17b3af)['toBe'](_0x5196d8['vrdSc']);}),_0x5196d8[_0x193732(0x20d)](it,_0x5196d8[_0x193732(0x20c)],async()=>{const _0x5e1cd5=_0x193732,_0x7335ee=await _0x5196d8[_0x5e1cd5(0x203)](_0x2f6712,_0x4d6680)['get'](_0x5196d8[_0x5e1cd5(0x1f7)]);expect(_0x7335ee[_0x5e1cd5(0x245)])[_0x5e1cd5(0x211)](0x194);});});function _0x1d30(){const _0x5c3e31=['Should\x20return\x20200\x20with\x20rewriteRequestPath','/static/does-not-exist.html','RrzId','PslOh','huesc','OmSmA','HJtrF','2428392LOsHIB','range','Should\x20return\x20index.html','/static/data.json','kMXpc','text/plain;\x20charset=utf-8','toEqual','text','zzoEO','hVSbs','image/x-icon','NqZDl','tsJKe','toBe','selnN','Should\x20handle\x20the\x20`onNotFound`\x20option','/static/../secret.txt','/.static','./not-found/on-not-found/foo.txt\x20is\x20not\x20found,\x20request\x20to\x20/on-not-found/foo.txt','/on-not-found/*','wJIPs','content-length','27058518GZeaYM','application/json;\x20charset=utf-8','mvknx','/dot-static/*','req','set','404\x20Not\x20Found','This\x20is\x20plain.txt','RIwlY','jNvFT','QZbMC','<h1>Hello\x20Hono</h1>','vfwIy','/static/plain.txt','ain.txt','uSGJE','<h1>This\x20is\x20Hono.html</h1>','bytes\x200-9/17','lAmyf','NIiVI','BDsEj','use','Should\x20return\x20404\x20with\x20rewriteRequestPath','5346066NaLywg','./test/assets','Mwden','18MxkFjo','/static/*','10-16','/favicon.ico','ufaZa','KoSGx','/dot-static/does-no-exists.txt','wMyoA','10hlQFfi','YvMmf','/static/','Should\x20return\x20hono.html','lCamY','bytes\x200-16/17','replace','text/plain;\x20charset=UTF-8','path','status','length','get','./not-found','fpRDI','369729kFNluC','text/html;\x20charset=utf-8','lMdcM','hEPbP','bytes\x2010-16/17','zYxoO','GjoiY','gDsjJ','./test/assets/favicon.ico','0-20','Bssyi','ugoZh','/static/hono.html','\x20is\x20not\x20found,\x20request\x20to\x20','xkVIf','8924916SEsBjD','body','Should\x20return\x20200\x20response\x20to\x20HEAD\x20request','Should\x20return\x20correct\x20headers\x20and\x20data\x20with\x20range\x20headers','350553YOAfJt','pWVxB','RNpPm','oCsUB','content-range','13701720rJhnKp','ksCpq','headers','BWXYZ','/on-not-found/foo.txt','content-type','YAsJg'];_0x1d30=function(){return _0x5c3e31;};return _0x1d30();}