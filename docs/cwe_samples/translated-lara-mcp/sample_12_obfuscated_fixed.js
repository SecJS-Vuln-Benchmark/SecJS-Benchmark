'use strict';const _0x285b91=_0x2317;(function(_0x4eaa90,_0x455920){const _0x5c7a5e=_0x2317,_0x42e4dd=_0x4eaa90();while(!![]){try{const _0x3ca4b7=-parseInt(_0x5c7a5e(0x1fd))/0x1*(parseInt(_0x5c7a5e(0x226))/0x2)+-parseInt(_0x5c7a5e(0x1f5))/0x3*(parseInt(_0x5c7a5e(0x229))/0x4)+-parseInt(_0x5c7a5e(0x223))/0x5+parseInt(_0x5c7a5e(0x203))/0x6+parseInt(_0x5c7a5e(0x214))/0x7+parseInt(_0x5c7a5e(0x224))/0x8*(parseInt(_0x5c7a5e(0x1f7))/0x9)+parseInt(_0x5c7a5e(0x211))/0xa;if(_0x3ca4b7===_0x455920)break;else _0x42e4dd['push'](_0x42e4dd['shift']());}catch(_0x2f40b1){_0x42e4dd['push'](_0x42e4dd['shift']());}}}(_0x3dbf,0xca520));function _0x2317(_0x271d20,_0x5550a0){const _0x3dbfac=_0x3dbf();return _0x2317=function(_0x231761,_0xc0f51){_0x231761=_0x231761-0x1f4;let _0x47a4ab=_0x3dbfac[_0x231761];return _0x47a4ab;},_0x2317(_0x271d20,_0x5550a0);}const strapiUtils=require(_0x285b91(0x21a)),{errors:{YupValidationError}}=require(_0x285b91(0x21a)),validators=require(_0x285b91(0x1fe));function _0x3dbf(){const _0x139968=['@strapi/utils','toBe','not','RtPZZ','biginteger','cWkRV','IcXfX','hfFSL','toHaveBeenCalledWith','8188835zeLlSS','8rdmDOB','wwvZf','4hImhRr','GIcVQ','unique','1816EYsqaV','contentType','RscwA','mockReset','HQRGt','8259SHVNiD','oXeVG','12139677yPCkfG','eqIOm','KSZDr','it\x20validates\x20the\x20unique\x20constraint\x20if\x20there\x20is\x20no\x20other\x20record\x20in\x20the\x20database','HWzGa','xpqaz','232762mUldlV','../validators','validateYupSchema','toBeInstanceOf','123','OkIvH','4070730hnMVIA','it\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20data\x20has\x20not\x20changed\x20even\x20if\x20there\x20is\x20a\x20record\x20in\x20the\x20database\x20with\x20the\x20same\x20attribute\x20value','pLsRL','it\x20does\x20not\x20validate\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20is\x20not\x20set\x20as\x20unique','it\x20does\x20not\x20validate\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20value\x20is\x20`null`','pamtQ','min','assertions','strapi','toHaveBeenCalled','test-model','attrBigIntegerUnique','lHeZc','it\x20fails\x20the\x20validation\x20of\x20the\x20unique\x20constraint\x20if\x20the\x20database\x20contains\x20a\x20record\x20with\x20the\x20same\x20attribute\x20value','6207430duZdPh','temhH','BigInteger\x20validator','10736642rcokVN','YIbOd','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20for\x20the\x20checked\x20attribute','soVRI','mockResolvedValueOnce','mJChp'];_0x3dbf=function(){return _0x139968;};return _0x3dbf();}describe(_0x285b91(0x213),()=>{const _0x1cb7bf=_0x285b91,_0x5b5433={'eqIOm':_0x1cb7bf(0x21e),'KSZDr':_0x1cb7bf(0x20e),'gvMCi':function(_0x37fdcb,_0x2d361e){return _0x37fdcb(_0x2d361e);},'YIbOd':function(_0x4990f9,_0x32d834){return _0x4990f9(_0x32d834);},'pamtQ':function(_0x4f5154,_0x22b250){return _0x4f5154(_0x22b250);},'oXeVG':function(_0x45743f,_0x33bf23){return _0x45743f(_0x33bf23);},'URABR':'test-uid','temhH':function(_0x5c848a,_0x521d56,_0x291c63){return _0x5c848a(_0x521d56,_0x291c63);},'HQRGt':_0x1cb7bf(0x207),'Qwgxd':function(_0x124077,_0x189d0d,_0x3d3202){return _0x124077(_0x189d0d,_0x3d3202);},'lHeZc':_0x1cb7bf(0x1fa),'hfFSL':_0x1cb7bf(0x204),'soVRI':function(_0x339d31,_0x45469f,_0x431546){return _0x339d31(_0x45469f,_0x431546);},'cWkRV':function(_0x36c04a,_0x1bf947,_0x3a3b3b){return _0x36c04a(_0x1bf947,_0x3a3b3b);},'IcXfX':_0x1cb7bf(0x201),'OkIvH':function(_0x3d0f29,_0x5c1fe7){return _0x3d0f29(_0x5c1fe7);},'pLsRL':function(_0x258fcc,_0x2babd0){return _0x258fcc(_0x2babd0);},'RtPZZ':'it\x20does\x20not\x20validate\x20the\x20min\x20constraint\x20if\x20the\x20attribute\x20min\x20is\x20not\x20a\x20number','cFinZ':_0x1cb7bf(0x228),'RscwA':_0x1cb7bf(0x209)};describe(_0x5b5433['cFinZ'],()=>{const _0x529f99=_0x1cb7bf,_0x5b89c5={'wwvZf':_0x529f99(0x20e),'xpqaz':function(_0x3e092f,_0xe70466){const _0x3090bb=_0x529f99;return _0x5b5433[_0x3090bb(0x1f6)](_0x3e092f,_0xe70466);},'HWzGa':function(_0x18aad4,_0x57a919){return _0x18aad4(_0x57a919);},'GIcVQ':'biginteger','mJChp':function(_0x140cf3,_0x4f4e20){return _0x140cf3(_0x4f4e20);}},_0x4dbc62=jest['fn']();global[_0x529f99(0x20b)]={'db':{'query':jest['fn'](()=>({'findOne':_0x4dbc62}))}},afterEach(()=>{const _0x40be2f=_0x529f99;jest['clearAllMocks'](),_0x4dbc62[_0x40be2f(0x22c)]();});const _0x3b8997={'kind':_0x529f99(0x22a),'modelName':_0x529f99(0x20d),'uid':_0x5b5433['URABR'],'options':{},'attributes':{'attrBigIntegerUnique':{'type':_0x5b5433['eqIOm'],'unique':!![]}}};test(_0x529f99(0x206),async()=>{const _0x22c94a=_0x529f99;_0x4dbc62[_0x22c94a(0x218)](null);const _0x3beb80=strapiUtils['validateYupSchema'](validators[_0x22c94a(0x21e)]({'attr':{'type':_0x5b5433['eqIOm']},'model':_0x3b8997,'updatedAttribute':{'name':_0x22c94a(0x20e),'value':0x1},'entity':null},{'isDraft':![]}));await _0x3beb80(0x1),expect(_0x4dbc62)['not'][_0x22c94a(0x20c)]();}),_0x5b5433[_0x529f99(0x212)](test,_0x5b5433[_0x529f99(0x1f4)],async()=>{const _0x205e66=_0x529f99;_0x4dbc62['mockResolvedValueOnce'](null);const _0x1ac992=strapiUtils[_0x205e66(0x1ff)](validators[_0x205e66(0x21e)]({'attr':{'type':_0x205e66(0x21e),'unique':!![]},'model':_0x3b8997,'updatedAttribute':{'name':_0x5b5433[_0x205e66(0x1f9)],'value':null},'entity':null},{'isDraft':![]})['nullable']());await _0x1ac992(null),_0x5b5433['gvMCi'](expect,_0x4dbc62)[_0x205e66(0x21c)][_0x205e66(0x20c)]();}),_0x5b5433['Qwgxd'](test,_0x5b5433[_0x529f99(0x20f)],async()=>{const _0x3d072f=_0x529f99;_0x4dbc62[_0x3d072f(0x218)](null);const _0x42cb0a=strapiUtils[_0x3d072f(0x1ff)](validators[_0x3d072f(0x21e)]({'attr':{'type':_0x5b5433[_0x3d072f(0x1f8)],'unique':!![]},'model':_0x3b8997,'updatedAttribute':{'name':_0x5b5433[_0x3d072f(0x1f9)],'value':0x1},'entity':null},{'isDraft':![]}));expect(await _0x5b5433[_0x3d072f(0x215)](_0x42cb0a,0x1))['toBe'](0x1);}),test(_0x529f99(0x210),async()=>{const _0x569070=_0x529f99;expect[_0x569070(0x20a)](0x1),_0x4dbc62[_0x569070(0x218)]({'attrBigIntegerUnique':0x2});const _0x245c13=strapiUtils[_0x569070(0x1ff)](validators[_0x569070(0x21e)]({'attr':{'type':_0x569070(0x21e),'unique':!![]},'model':_0x3b8997,'updatedAttribute':{'name':_0x5b89c5[_0x569070(0x225)],'value':0x2},'entity':null},{'isDraft':![]}));try{await _0x5b89c5[_0x569070(0x1fc)](_0x245c13,0x2);}catch(_0x461806){_0x5b89c5[_0x569070(0x1fb)](expect,_0x461806)[_0x569070(0x200)](YupValidationError);}}),_0x5b5433[_0x529f99(0x212)](test,_0x5b5433[_0x529f99(0x221)],async()=>{const _0x5b1646=_0x529f99;_0x4dbc62[_0x5b1646(0x218)]({'attrBigIntegerUnique':0x3});const _0x551dda=strapiUtils[_0x5b1646(0x1ff)](validators[_0x5b1646(0x21e)]({'attr':{'type':_0x5b89c5[_0x5b1646(0x227)],'unique':!![]},'model':_0x3b8997,'updatedAttribute':{'name':_0x5b1646(0x20e),'value':0x3},'entity':{'id':0x1,'attrBigIntegerUnique':0x3}},{'isDraft':![]}));expect(await _0x5b89c5[_0x5b1646(0x219)](_0x551dda,0x3))[_0x5b1646(0x21b)](0x3);}),_0x5b5433[_0x529f99(0x217)](test,_0x529f99(0x216),async()=>{const _0x55655c=_0x529f99;_0x4dbc62['mockResolvedValueOnce'](null);const _0x4e12eb=strapiUtils['validateYupSchema'](validators[_0x55655c(0x21e)]({'attr':{'type':_0x5b5433[_0x55655c(0x1f8)],'unique':!![]},'model':_0x3b8997,'updatedAttribute':{'name':_0x5b5433[_0x55655c(0x1f9)],'value':0x4},'entity':null},{'isDraft':![]}));await _0x4e12eb(0x4),_0x5b5433[_0x55655c(0x208)](expect,_0x4dbc62)[_0x55655c(0x222)]({'select':['id'],'where':{'attrBigIntegerUnique':0x4}});}),_0x5b5433[_0x529f99(0x21f)](test,'it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20but\x20not\x20the\x20same\x20id\x20for\x20the\x20checked\x20attribute\x20if\x20an\x20entity\x20is\x20passed',async()=>{const _0x461e55=_0x529f99;_0x4dbc62[_0x461e55(0x218)](null);const _0x5c8aac=strapiUtils[_0x461e55(0x1ff)](validators[_0x461e55(0x21e)]({'attr':{'type':_0x5b5433[_0x461e55(0x1f8)],'unique':!![]},'model':_0x3b8997,'updatedAttribute':{'name':_0x5b5433[_0x461e55(0x1f9)],'value':0x5},'entity':{'id':0x1,'attrBigIntegerUnique':0x2a}},{'isDraft':![]}));await _0x5b5433[_0x461e55(0x215)](_0x5c8aac,0x5),expect(_0x4dbc62)[_0x461e55(0x222)]({'select':['id'],'where':{'$and':[{'attrBigIntegerUnique':0x5},{'$not':{'id':0x1}}]}});});}),describe(_0x5b5433[_0x1cb7bf(0x22b)],()=>{const _0x210e5c=_0x1cb7bf;test(_0x5b5433[_0x210e5c(0x21d)],async()=>{const _0x2f6669=_0x210e5c,_0x23622b=strapiUtils[_0x2f6669(0x1ff)](validators[_0x2f6669(0x21e)]({'attr':{'type':_0x2f6669(0x21e),'minLength':_0x5b5433[_0x2f6669(0x220)]}},{'isDraft':![]}));_0x5b5433[_0x2f6669(0x202)](expect,await _0x5b5433[_0x2f6669(0x205)](_0x23622b,0x1))[_0x2f6669(0x21b)](0x1);});});});