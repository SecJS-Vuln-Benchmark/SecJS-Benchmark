'use strict';const _0x121592=_0x231e;function _0x231e(_0x30c564,_0x1ff38){const _0x17d44c=_0x17d4();return _0x231e=function(_0x231e4b,_0x436c91){_0x231e4b=_0x231e4b-0x186;let _0x55e0c9=_0x17d44c[_0x231e4b];return _0x55e0c9;},_0x231e(_0x30c564,_0x1ff38);}(function(_0x45665c,_0x760992){const _0x471035=_0x231e,_0x205f8c=_0x45665c();while(!![]){try{const _0x255583=parseInt(_0x471035(0x1b5))/0x1+-parseInt(_0x471035(0x19e))/0x2*(parseInt(_0x471035(0x198))/0x3)+parseInt(_0x471035(0x1a9))/0x4*(parseInt(_0x471035(0x187))/0x5)+parseInt(_0x471035(0x19a))/0x6*(-parseInt(_0x471035(0x196))/0x7)+-parseInt(_0x471035(0x1a6))/0x8+parseInt(_0x471035(0x1b9))/0x9*(-parseInt(_0x471035(0x1bf))/0xa)+parseInt(_0x471035(0x1b8))/0xb*(parseInt(_0x471035(0x199))/0xc);if(_0x255583===_0x760992)break;else _0x205f8c['push'](_0x205f8c['shift']());}catch(_0x8f6de6){_0x205f8c['push'](_0x205f8c['shift']());}}}(_0x17d4,0xd1271));const strapiUtils=require('@strapi/utils'),{errors:{YupValidationError}}=require('@strapi/utils'),validators=require('../validators');describe(_0x121592(0x1b4),()=>{const _0x29f65d=_0x121592,_0x4c04fb={'yZcTr':function(_0x1871e9,_0x26179e){return _0x1871e9(_0x26179e);},'hAqbf':_0x29f65d(0x1ae),'XJOjc':function(_0xdfa271,_0x4b8d42){return _0xdfa271(_0x4b8d42);},'AuKpT':function(_0x1b8d59,_0x5b5ecd,_0x5444ff){return _0x1b8d59(_0x5b5ecd,_0x5444ff);},'JEFpK':_0x29f65d(0x1ac),'vJehN':_0x29f65d(0x1c1),'pbVEy':_0x29f65d(0x1c2),'YyoMk':_0x29f65d(0x1c0),'Gpegd':_0x29f65d(0x1af),'XbLia':_0x29f65d(0x18d),'NYXoO':function(_0x23c869,_0x19f306){return _0x23c869(_0x19f306);},'hmzvn':function(_0x1d59ce,_0x35ae9c){return _0x1d59ce(_0x35ae9c);},'yumQI':_0x29f65d(0x1a7),'PNRdZ':function(_0xb653f1,_0x1b605f,_0x5e8a9a){return _0xb653f1(_0x1b605f,_0x5e8a9a);},'FUlUA':_0x29f65d(0x1aa),'DsMTD':_0x29f65d(0x18b),'iHjhE':function(_0x58fe6c,_0x32b066,_0x56dc97){return _0x58fe6c(_0x32b066,_0x56dc97);}};_0x4c04fb[_0x29f65d(0x1a4)](describe,_0x4c04fb[_0x29f65d(0x18a)],()=>{const _0x27369e=_0x29f65d,_0x14eb69={'NtPOa':_0x4c04fb['hAqbf'],'fJHtU':_0x27369e(0x1b1),'vdLfi':function(_0x1b77b7,_0x210352){const _0x15fab8=_0x27369e;return _0x4c04fb[_0x15fab8(0x1b0)](_0x1b77b7,_0x210352);}},_0x2ce4b9=jest['fn']();global['strapi']={'db':{'query':jest['fn'](()=>({'findOne':_0x2ce4b9}))}},afterEach(()=>{const _0x4568db=_0x27369e;jest[_0x4568db(0x1a8)](),_0x2ce4b9[_0x4568db(0x19f)]();});const _0x1aec93={'kind':_0x27369e(0x19b),'uid':_0x27369e(0x18e),'modelName':_0x27369e(0x1c4),'privateAttributes':[],'options':{},'attributes':{'attrIntegerUnique':{'type':_0x27369e(0x1ae),'unique':!![]}}};_0x4c04fb[_0x27369e(0x189)](test,_0x4c04fb['JEFpK'],async()=>{const _0x95c227=_0x27369e;_0x2ce4b9[_0x95c227(0x1be)](null);const _0x3bf651=strapiUtils['validateYupSchema'](validators[_0x95c227(0x1ae)]({'attr':{'type':'integer'},'model':_0x1aec93,'updatedAttribute':{'name':_0x95c227(0x1b1),'value':0x1},'entity':null},{'isDraft':![]}));await _0x3bf651(0x1),_0x4c04fb[_0x95c227(0x1b6)](expect,_0x2ce4b9)[_0x95c227(0x18f)][_0x95c227(0x1bb)]();}),test(_0x4c04fb[_0x27369e(0x1a5)],async()=>{const _0x51e32a=_0x27369e;_0x2ce4b9[_0x51e32a(0x1be)](null);const _0x1011de=strapiUtils[_0x51e32a(0x186)](validators[_0x51e32a(0x1ae)]({'attr':{'type':_0x14eb69[_0x51e32a(0x191)],'unique':!![]},'model':_0x1aec93,'updatedAttribute':{'name':_0x14eb69[_0x51e32a(0x190)],'value':null},'entity':null},{'isDraft':![]})[_0x51e32a(0x1b2)]());await _0x1011de(null),expect(_0x2ce4b9)[_0x51e32a(0x18f)][_0x51e32a(0x1bb)]();}),test(_0x4c04fb[_0x27369e(0x1ab)],async()=>{const _0x82abb3=_0x27369e;_0x2ce4b9[_0x82abb3(0x1be)](null);const _0x11f899=strapiUtils['validateYupSchema'](validators[_0x82abb3(0x1ae)]({'attr':{'type':_0x14eb69[_0x82abb3(0x191)],'unique':!![]},'model':_0x1aec93,'updatedAttribute':{'name':_0x82abb3(0x1b1),'value':0x2},'entity':null},{'isDraft':![]}));expect(await _0x11f899(0x1))[_0x82abb3(0x1b3)](0x1);}),test('it\x20fails\x20the\x20validation\x20of\x20the\x20unique\x20constraint\x20if\x20the\x20database\x20contains\x20a\x20record\x20with\x20the\x20same\x20attribute\x20value',async()=>{const _0x245605=_0x27369e;expect[_0x245605(0x1c3)](0x1),_0x2ce4b9[_0x245605(0x1be)]({'attrIntegerUnique':0x2});const _0x11881b=strapiUtils['validateYupSchema'](validators['integer']({'attr':{'type':_0x245605(0x1ae),'unique':!![]},'model':_0x1aec93,'updatedAttribute':{'name':_0x245605(0x1b1),'value':0x2},'entity':null},{'isDraft':![]}));try{await _0x11881b(0x2);}catch(_0xaeedb0){expect(_0xaeedb0)[_0x245605(0x197)](YupValidationError);}}),test(_0x4c04fb[_0x27369e(0x1b7)],async()=>{const _0x24499d=_0x27369e;_0x2ce4b9['mockResolvedValueOnce']({'attrIntegerUnique':0x3});const _0x19a2ef=strapiUtils[_0x24499d(0x186)](validators[_0x24499d(0x1ae)]({'attr':{'type':_0x14eb69[_0x24499d(0x191)],'unique':!![]},'model':_0x1aec93,'updatedAttribute':{'name':_0x14eb69[_0x24499d(0x190)],'value':0x3},'entity':{'id':0x1,'attrIntegerUnique':0x3}},{'isDraft':![]}));_0x14eb69['vdLfi'](expect,await _0x19a2ef(0x3))[_0x24499d(0x1b3)](0x3);}),test(_0x27369e(0x1bc),async()=>{const _0x1a4b93=_0x27369e;_0x2ce4b9['mockResolvedValueOnce'](null);const _0x4adaf3=strapiUtils[_0x1a4b93(0x186)](validators[_0x1a4b93(0x1ae)]({'attr':{'type':_0x4c04fb[_0x1a4b93(0x19d)],'unique':!![]},'model':_0x1aec93,'updatedAttribute':{'name':_0x1a4b93(0x1b1),'value':0x4},'entity':null},{'isDraft':![]}));await _0x4adaf3(0x4),expect(_0x2ce4b9)[_0x1a4b93(0x1ad)]({'select':['id'],'where':{'attrIntegerUnique':0x4}});}),test(_0x27369e(0x1ba),async()=>{const _0x3f0617=_0x27369e;_0x2ce4b9['mockResolvedValueOnce'](null);const _0x3b2797=strapiUtils[_0x3f0617(0x186)](validators[_0x3f0617(0x1ae)]({'attr':{'type':_0x14eb69[_0x3f0617(0x191)],'unique':!![]},'model':_0x1aec93,'updatedAttribute':{'name':_0x3f0617(0x1b1),'value':0x5},'entity':{'id':0x1,'attrIntegerUnique':0x2a}},{'isDraft':![]}));await _0x14eb69['vdLfi'](_0x3b2797,0x5),expect(_0x2ce4b9)[_0x3f0617(0x1ad)]({'select':['id'],'where':{'$and':[{'attrIntegerUnique':0x5},{'$not':{'id':0x1}}]}});});}),describe(_0x4c04fb[_0x29f65d(0x192)],()=>{const _0x2d70fb=_0x29f65d,_0x4f3c28={'ubtut':_0x4c04fb[_0x2d70fb(0x19d)]};test(_0x4c04fb['Gpegd'],async()=>{const _0x1c7c28=_0x2d70fb,_0xf99aff=strapiUtils[_0x1c7c28(0x186)](validators[_0x1c7c28(0x1ae)]({'attr':{'type':_0x4c04fb['hAqbf'],'minLength':_0x1c7c28(0x193)}},{'isDraft':![]}));expect(await _0x4c04fb[_0x1c7c28(0x1b0)](_0xf99aff,0x1))['toBe'](0x1);}),test(_0x4c04fb[_0x2d70fb(0x1bd)],async()=>{const _0x132a73=_0x2d70fb;expect['assertions'](0x1);const _0x5530d5=strapiUtils[_0x132a73(0x186)](validators[_0x132a73(0x1ae)]({'attr':{'type':_0x4f3c28['ubtut'],'min':0x3}},{'isDraft':![]}));try{await _0x5530d5(0x1);}catch(_0x5bec09){expect(_0x5bec09)[_0x132a73(0x197)](YupValidationError);}}),test(_0x2d70fb(0x1a0),async()=>{const _0x2018e3=_0x2d70fb,_0x249c85=strapiUtils[_0x2018e3(0x186)](validators[_0x2018e3(0x1ae)]({'attr':{'type':_0x2018e3(0x1ae),'min':0x3}},{'isDraft':![]}));expect(await _0x249c85(0x4))['toBe'](0x4);});}),_0x4c04fb[_0x29f65d(0x194)](describe,_0x29f65d(0x195),()=>{const _0x51c20f=_0x29f65d,_0x34949b={'lfwpG':_0x51c20f(0x1ae),'pZOVh':function(_0x545051,_0x3d85c1){return _0x545051(_0x3d85c1);}};_0x4c04fb['AuKpT'](test,_0x51c20f(0x188),async()=>{const _0x48eb62=_0x51c20f,_0x590ddf=strapiUtils[_0x48eb62(0x186)](validators[_0x48eb62(0x1ae)]({'attr':{'type':'integer','maxLength':'123'}},{'isDraft':![]}));_0x4c04fb[_0x48eb62(0x1b6)](expect,await _0x4c04fb[_0x48eb62(0x1a3)](_0x590ddf,0x1))[_0x48eb62(0x1b3)](0x1);}),_0x4c04fb['AuKpT'](test,_0x51c20f(0x1a1),async()=>{const _0xae334=_0x51c20f;expect[_0xae334(0x1c3)](0x1);const _0xa5092f=strapiUtils['validateYupSchema'](validators['integer']({'attr':{'type':_0x34949b[_0xae334(0x19c)],'max':0x3}},{'isDraft':![]}));try{await _0x34949b['pZOVh'](_0xa5092f,0x4);}catch(_0x33b29c){expect(_0x33b29c)[_0xae334(0x197)](YupValidationError);}}),_0x4c04fb[_0x51c20f(0x189)](test,_0x4c04fb[_0x51c20f(0x1a2)],async()=>{const _0x29557f=_0x51c20f,_0x30c113=strapiUtils[_0x29557f(0x186)](validators[_0x29557f(0x1ae)]({'attr':{'type':'integer','max':0x3}},{'isDraft':![]}));expect(await _0x4c04fb[_0x29557f(0x18c)](_0x30c113,0x2))['toBe'](0x2);});});});function _0x17d4(){const _0x2d3954=['XbLia','mockResolvedValueOnce','240OGQtnV','it\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20data\x20has\x20not\x20changed\x20even\x20if\x20there\x20is\x20a\x20record\x20in\x20the\x20database\x20with\x20the\x20same\x20attribute\x20value','it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20value\x20is\x20`null`','it\x20validates\x20the\x20unique\x20constraint\x20if\x20there\x20is\x20no\x20other\x20record\x20in\x20the\x20database','assertions','test-model','validateYupSchema','1776205RqRXYZ','it\x20does\x20not\x20validates\x20the\x20max\x20constraint\x20if\x20the\x20attribute\x20max\x20is\x20not\x20an\x20integer','AuKpT','FUlUA','min','hmzvn','it\x20fails\x20the\x20validation\x20if\x20the\x20integer\x20is\x20lower\x20than\x20the\x20define\x20min','test-uid','not','fJHtU','NtPOa','DsMTD','123','iHjhE','max','7gbyOcf','toBeInstanceOf','603BFrVuj','3828oLMLxw','5798886xJSlUf','contentType','lfwpG','hAqbf','13314kmlhjj','mockReset','it\x20validates\x20the\x20min\x20constraint\x20if\x20the\x20integer\x20is\x20higher\x20than\x20the\x20define\x20min','it\x20fails\x20the\x20validation\x20if\x20the\x20number\x20is\x20integer\x20than\x20the\x20define\x20max','yumQI','NYXoO','PNRdZ','vJehN','1942080xZkjgU','it\x20validates\x20the\x20max\x20constraint\x20if\x20the\x20integer\x20is\x20lower\x20than\x20the\x20define\x20max','clearAllMocks','8Yajlkn','unique','pbVEy','it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20is\x20not\x20set\x20as\x20unique','toHaveBeenCalledWith','integer','it\x20does\x20not\x20validates\x20the\x20min\x20constraint\x20if\x20the\x20attribute\x20min\x20is\x20not\x20a\x20number','XJOjc','attrIntegerUnique','nullable','toBe','Integer\x20validator','799522GsAdcK','yZcTr','YyoMk','84139DUypOb','204768nyGgMg','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20but\x20not\x20the\x20same\x20id\x20for\x20the\x20checked\x20attribute\x20if\x20an\x20entity\x20is\x20passed','toHaveBeenCalled','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20for\x20the\x20checked\x20attribute'];_0x17d4=function(){return _0x2d3954;};return _0x17d4();}