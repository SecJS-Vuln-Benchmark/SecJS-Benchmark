'use strict';const _0x436c15=_0x5817;(function(_0x1dd5a6,_0x4442cb){const _0x297946=_0x5817,_0x5d1748=_0x1dd5a6();while(!![]){try{const _0x45ab48=-parseInt(_0x297946(0x99))/0x1+parseInt(_0x297946(0xa6))/0x2*(-parseInt(_0x297946(0xb2))/0x3)+-parseInt(_0x297946(0x9b))/0x4+-parseInt(_0x297946(0xa1))/0x5+-parseInt(_0x297946(0xab))/0x6+parseInt(_0x297946(0xa3))/0x7*(-parseInt(_0x297946(0xae))/0x8)+parseInt(_0x297946(0xaf))/0x9;if(_0x45ab48===_0x4442cb)break;else _0x5d1748['push'](_0x5d1748['shift']());}catch(_0x26a7bd){_0x5d1748['push'](_0x5d1748['shift']());}}}(_0x5135,0xe32c9));function _0x5135(){const _0x44daf8=['pJaos','test-model','strapi','1419108EwgZMb','QCJve','api::test.test','2640WCrpgS','28184166LLliTQ','Do\x20not\x20emit\x20event\x20when\x20no\x20deleted\x20entity','mEvcU','3NZpemQ','toHaveBeenCalledTimes','Emit\x20event:\x20Delete\x20Many','mockClear','toHaveBeenCalledWith','SgRfT','string','DVwXg','gAfoV','oAqNP','NTdSE','entity-id','467876uVPHGh','emit','147264zgSfSH','singleType','ilVxW','update','delete','entry.update','544950RitZrL','../../entity-validator','20699peDCgf','entry.delete','value','750118ZulVim','Entity\x20service\x20triggers\x20webhooks'];_0x5135=function(){return _0x44daf8;};return _0x5135();}const createEntityService=require('..'),entityValidator=require(_0x436c15(0xa2));function _0x5817(_0x2cec62,_0x1096b0){const _0x513571=_0x5135();return _0x5817=function(_0x58176d,_0x257355){_0x58176d=_0x58176d-0x8f;let _0x8036e9=_0x513571[_0x58176d];return _0x8036e9;},_0x5817(_0x2cec62,_0x1096b0);}describe(_0x436c15(0xa7),()=>{const _0x2260a9=_0x436c15,_0x1a7266={'oloLH':'api::test.test','SgRfT':'test-model','ilVxW':_0x2260a9(0x93),'pJaos':function(_0xf5458e,_0x2aaf69){return _0xf5458e(_0x2aaf69);},'gAfoV':'entry.create','oAqNP':'entity-id','mEvcU':_0x2260a9(0xa4),'IJJLz':function(_0x4a936a,_0x445aa4){return _0x4a936a(_0x445aa4);},'gUmuX':_0x2260a9(0xa5),'NTdSE':function(_0x506030,_0x5c6157,_0x44b3e7){return _0x506030(_0x5c6157,_0x44b3e7);},'fLeZQ':'Emit\x20event:\x20Create','DVwXg':_0x2260a9(0x8f),'QCJve':_0x2260a9(0xb0)};let _0x11f478;const _0x33cb2e={'emit':jest['fn']()};let _0x4d1864={'attr':_0x1a7266['gUmuX']};_0x1a7266['pJaos'](beforeAll,()=>{const _0xc05a4e=_0x2260a9,_0x2b7366={'uid':_0x1a7266['oloLH'],'kind':_0xc05a4e(0x9c),'modelName':_0x1a7266[_0xc05a4e(0x92)],'attributes':{'attr':{'type':_0x1a7266[_0xc05a4e(0x9d)]}}};_0x11f478=_0x1a7266[_0xc05a4e(0xa8)](createEntityService,{'strapi':{'getModel':()=>_0x2b7366},'db':{'transaction':_0x13ffbf=>_0x13ffbf(),'query':()=>({'count':()=>0x0,'create':({data:_0x51c195})=>_0x51c195,'update':({data:_0xdb6a90})=>_0xdb6a90,'findOne':()=>_0x4d1864,'findMany':()=>[_0x4d1864,_0x4d1864],'delete':()=>({}),'deleteMany':()=>({})})},'eventHub':_0x33cb2e,'entityValidator':entityValidator}),global[_0xc05a4e(0xaa)]={'getModel':()=>_0x2b7366,'config':{'get':()=>[]}};}),_0x1a7266[_0x2260a9(0x97)](test,_0x1a7266['fLeZQ'],async()=>{const _0x4440ab=_0x2260a9;await _0x11f478['create'](_0x1a7266[_0x4440ab(0x92)],{'data':_0x4d1864}),_0x1a7266[_0x4440ab(0xa8)](expect,_0x33cb2e['emit'])[_0x4440ab(0x91)](_0x1a7266[_0x4440ab(0x95)],{'entry':_0x4d1864,'model':_0x1a7266[_0x4440ab(0x92)],'uid':_0x1a7266['oloLH']}),_0x33cb2e[_0x4440ab(0x9a)]['mockClear']();}),test('Emit\x20event:\x20Update',async()=>{const _0x50ae90=_0x2260a9;await _0x11f478[_0x50ae90(0x9e)](_0x1a7266['SgRfT'],_0x1a7266[_0x50ae90(0x96)],{'data':_0x4d1864}),_0x1a7266['pJaos'](expect,_0x33cb2e[_0x50ae90(0x9a)])[_0x50ae90(0x91)](_0x50ae90(0xa0),{'entry':_0x4d1864,'model':_0x1a7266[_0x50ae90(0x92)],'uid':_0x50ae90(0xad)}),_0x33cb2e['emit']['mockClear']();}),_0x1a7266[_0x2260a9(0x97)](test,'Emit\x20event:\x20Delete',async()=>{const _0xc393d8=_0x2260a9;await _0x11f478[_0xc393d8(0x9f)](_0xc393d8(0xa9),_0xc393d8(0x98),{}),_0x1a7266[_0xc393d8(0xa8)](expect,_0x33cb2e[_0xc393d8(0x9a)])[_0xc393d8(0x91)]('entry.delete',{'entry':_0x4d1864,'model':_0xc393d8(0xa9),'uid':_0x1a7266['oloLH']}),_0x33cb2e['emit'][_0xc393d8(0x90)]();}),test(_0x1a7266[_0x2260a9(0x94)],async()=>{const _0xdb7aea=_0x2260a9;await _0x11f478['deleteMany'](_0x1a7266[_0xdb7aea(0x92)],{}),expect(_0x33cb2e['emit'])[_0xdb7aea(0x91)](_0x1a7266[_0xdb7aea(0xb1)],{'entry':_0x4d1864,'model':_0x1a7266[_0xdb7aea(0x92)],'uid':'api::test.test'}),expect(_0x33cb2e[_0xdb7aea(0x9a)])[_0xdb7aea(0xb3)](0x2),_0x33cb2e['emit'][_0xdb7aea(0x90)]();}),test(_0x1a7266[_0x2260a9(0xac)],async()=>{const _0x157e22=_0x2260a9;_0x4d1864=null,await _0x11f478[_0x157e22(0x9f)](_0x1a7266[_0x157e22(0x92)],_0x1a7266[_0x157e22(0x96)],{}),_0x1a7266['IJJLz'](expect,_0x33cb2e['emit'])[_0x157e22(0xb3)](0x0),_0x33cb2e['emit']['mockClear']();});});