'use strict';const _0x448a14=_0x8e90;function _0x8e90(_0x355cc0,_0x436a81){const _0x2c8871=_0x2c88();return _0x8e90=function(_0x8e9029,_0x32f082){_0x8e9029=_0x8e9029-0x1cf;let _0x8f25ca=_0x2c8871[_0x8e9029];return _0x8f25ca;},_0x8e90(_0x355cc0,_0x436a81);}(function(_0x5de116,_0x5cfcf8){const _0x57f726=_0x8e90,_0x505aa6=_0x5de116();while(!![]){try{const _0x904258=parseInt(_0x57f726(0x1f3))/0x1*(parseInt(_0x57f726(0x202))/0x2)+parseInt(_0x57f726(0x20f))/0x3+-parseInt(_0x57f726(0x1e1))/0x4*(-parseInt(_0x57f726(0x219))/0x5)+-parseInt(_0x57f726(0x1ed))/0x6*(-parseInt(_0x57f726(0x21e))/0x7)+-parseInt(_0x57f726(0x1f0))/0x8*(parseInt(_0x57f726(0x229))/0x9)+-parseInt(_0x57f726(0x21d))/0xa+-parseInt(_0x57f726(0x1d4))/0xb;if(_0x904258===_0x5cfcf8)break;else _0x505aa6['push'](_0x505aa6['shift']());}catch(_0xc232c){_0x505aa6['push'](_0x505aa6['shift']());}}}(_0x2c88,0x9aad2));const Sequelize=require(_0x448a14(0x1d1)),scrypt=require('scrypt-kdf'),logger=require(_0x448a14(0x217)),{generateAvatarURL}=require(_0x448a14(0x1d0));function _0x2c88(){const _0x2aa001=['define','?size=original','33590689zfcBVQ','jGZVF','$1400','KlLtu','XhhCs','TEXT','STRING','parseProfile','resolve','dropbox','ldap','$196','?s=400','1658308egJmOW','emails','error','jUGhn','lastIndexOf','oimeV','twitter','fnnju','User','email','value','parse','3073998SbRqwn','displayName','?s=96','8XliyuQ','google','profile','22GPjBdZ','avatarUrl','beforeUpdate','https://graph.facebook.com/','jnSJN','Note','cDsFg','ownerId','AQKkg','CmNEc','bBgBM','verify','changed','UUIDV4','cEohE','100588QkRWhD','QBrGq','replace','OwiYy','hex','verifyPassword','puTmx','parseProfileByEmail','photos','parsePhotoByProfile','prototype','https://twitter.com/','ZPXsV','3761418myShVC','iDnZf','qiWDB','DMlDF','facebook','beforeCreate','PucYy','qjuDq','../logger','provider','10gwyvAB','from','?width=400','substring','161040wpnlOP','14mxEvxN','YRRGv','PkNgk','aWXDE','saml','/profile_image','then','setDataValue','qZlZt','toString','KJyKw','4596633BHjLWg','hasMany','zxKQo','getDataValue','associate','username','JzImt','mattermost','asUFn','password','../letter-avatars','sequelize'];_0x2c88=function(){return _0x2aa001;};return _0x2c88();}module['exports']=function(_0x1df6a9,_0x4f35e9){const _0x6bef9e=_0x448a14,_0x5aeefe={'JzImt':_0x6bef9e(0x1fa),'qiWDB':_0x6bef9e(0x1cf),'weWft':_0x6bef9e(0x206),'vgYDO':function(_0x41c433,_0x559da2){return _0x41c433+_0x559da2;},'jGZVF':_0x6bef9e(0x1f6),'KlLtu':'/picture','qZlZt':'?width=96','iDnZf':function(_0x9a5c4e,_0x8fba03){return _0x9a5c4e+_0x8fba03;},'KJyKw':_0x6bef9e(0x20d),'MuyiG':_0x6bef9e(0x223),'asUFn':_0x6bef9e(0x1d3),'AQKkg':'?size=bigger','YRRGv':'github','bBgBM':'gitlab','oimeV':_0x6bef9e(0x1d6),'PucYy':_0x6bef9e(0x1df),'cEohE':function(_0x239ffc,_0x3698f7){return _0x239ffc!==_0x3698f7;},'QBrGq':'csGwH','qjuDq':function(_0xe810ab,_0x44d79b){return _0xe810ab(_0x44d79b);},'nyOrY':'cDsFg','jUGhn':_0x6bef9e(0x1f1),'puTmx':_0x6bef9e(0x1de),'aWXDE':function(_0x5beaf5,_0x139e2,_0x2ba727,_0x2172c7){return _0x5beaf5(_0x139e2,_0x2ba727,_0x2172c7);},'OwiYy':function(_0xbd867b,_0x35e983){return _0xbd867b(_0x35e983);},'zxKQo':function(_0x4c66e0,_0x530b98,_0x51b1dc,_0x32c43c){return _0x4c66e0(_0x530b98,_0x51b1dc,_0x32c43c);},'fnnju':_0x6bef9e(0x20e),'CmNEc':_0x6bef9e(0x1e9)},_0x56292c=_0x1df6a9[_0x6bef9e(0x1d2)](_0x5aeefe[_0x6bef9e(0x1fc)],{'id':{'type':_0x4f35e9['UUID'],'primaryKey':!![],'defaultValue':Sequelize[_0x6bef9e(0x200)]},'profileid':{'type':_0x4f35e9[_0x6bef9e(0x1da)],'unique':!![]},'profile':{'type':_0x4f35e9[_0x6bef9e(0x1d9)]},'history':{'type':_0x4f35e9[_0x6bef9e(0x1d9)]},'accessToken':{'type':_0x4f35e9[_0x6bef9e(0x1d9)]},'refreshToken':{'type':_0x4f35e9[_0x6bef9e(0x1d9)]},'deleteToken':{'type':_0x4f35e9['UUID'],'defaultValue':Sequelize[_0x6bef9e(0x200)]},'email':{'type':Sequelize[_0x6bef9e(0x1d9)],'validate':{'isEmail':!![]}},'password':{'type':Sequelize['TEXT']}});_0x56292c[_0x6bef9e(0x20c)][_0x6bef9e(0x207)]=function(_0x5102d2){const _0x70153b=_0x6bef9e;return scrypt[_0x70153b(0x1fe)](Buffer[_0x70153b(0x21a)](this[_0x70153b(0x1cf)],_0x70153b(0x206)),_0x5102d2);},_0x56292c[_0x6bef9e(0x22d)]=function(_0x2bec5e){const _0x8bdf89=_0x6bef9e;_0x56292c['hasMany'](_0x2bec5e[_0x8bdf89(0x1f8)],{'foreignKey':_0x5aeefe[_0x8bdf89(0x22f)],'constraints':![]}),_0x56292c['hasMany'](_0x2bec5e[_0x8bdf89(0x1f8)],{'foreignKey':'lastchangeuserId','constraints':![]});},_0x56292c['getProfile']=function(_0x590fce){const _0x4929a2=_0x6bef9e;if(!_0x590fce)return null;return _0x590fce[_0x4929a2(0x1f2)]?_0x56292c[_0x4929a2(0x1db)](_0x590fce[_0x4929a2(0x1f2)]):_0x590fce[_0x4929a2(0x1ea)]?_0x56292c[_0x4929a2(0x209)](_0x590fce['email']):null;},_0x56292c[_0x6bef9e(0x1db)]=function(_0x31fe8c){const _0x551151=_0x6bef9e;try{_0x31fe8c=JSON[_0x551151(0x1ec)](_0x31fe8c);}catch(_0x3419fe){_0x551151(0x212)!=='sryBz'?(logger[_0x551151(0x1e3)](_0x3419fe),_0x31fe8c=null):_0x573b12={'name':_0x4147bb['displayName']||_0x1d6db1[_0x551151(0x22e)],'photo':_0x47f200['parsePhotoByProfile'](_0x1221e2),'biggerphoto':_0xf2231f[_0x551151(0x20b)](_0x450f9e,!![])};}return _0x31fe8c&&(_0x31fe8c={'name':_0x31fe8c[_0x551151(0x1ee)]||_0x31fe8c[_0x551151(0x22e)],'photo':_0x56292c[_0x551151(0x20b)](_0x31fe8c),'biggerphoto':_0x56292c[_0x551151(0x20b)](_0x31fe8c,!![])}),_0x31fe8c;},_0x56292c[_0x6bef9e(0x20b)]=function(_0x2d03a6,_0x49e7b7){const _0x2f726f=_0x6bef9e,_0x4b4cf7={'PkNgk':_0x5aeefe[_0x2f726f(0x22f)]};let _0x1adc9e=null;switch(_0x2d03a6[_0x2f726f(0x218)]){case _0x2f726f(0x213):_0x1adc9e=_0x5aeefe['vgYDO'](_0x5aeefe[_0x2f726f(0x1d5)],_0x2d03a6['id'])+_0x5aeefe[_0x2f726f(0x1d7)];if(_0x49e7b7)_0x1adc9e+=_0x2f726f(0x21b);else _0x1adc9e+=_0x5aeefe[_0x2f726f(0x226)];break;case _0x2f726f(0x1e7):_0x1adc9e=_0x5aeefe[_0x2f726f(0x210)](_0x5aeefe[_0x2f726f(0x228)]+_0x2d03a6[_0x2f726f(0x22e)],_0x5aeefe['MuyiG']);if(_0x49e7b7)_0x1adc9e+=_0x5aeefe[_0x2f726f(0x231)];else _0x1adc9e+=_0x5aeefe[_0x2f726f(0x1fb)];break;case _0x5aeefe[_0x2f726f(0x21f)]:_0x1adc9e=_0x5aeefe[_0x2f726f(0x210)]('https://avatars.githubusercontent.com/u/',_0x2d03a6['id']);if(_0x49e7b7)_0x1adc9e+=_0x2f726f(0x1e0);else _0x1adc9e+=_0x2f726f(0x1ef);break;case _0x5aeefe[_0x2f726f(0x1fd)]:_0x1adc9e=_0x2d03a6[_0x2f726f(0x1f4)];if(_0x1adc9e){if(_0x49e7b7)_0x1adc9e=_0x1adc9e[_0x2f726f(0x204)](/(\?s=)\d*$/i,_0x5aeefe[_0x2f726f(0x1e6)]);else _0x1adc9e=_0x1adc9e[_0x2f726f(0x204)](/(\?s=)\d*$/i,_0x5aeefe['PucYy']);}else{if(_0x5aeefe[_0x2f726f(0x201)](_0x5aeefe[_0x2f726f(0x203)],'csGwH')){try{_0x202a9d=_0x29182b[_0x2f726f(0x1ec)](_0x113b21);}catch(_0x36ecfa){_0x1777de[_0x2f726f(0x1e3)](_0x36ecfa),_0x5259e4=null;}return _0x548abd&&(_0xb03cff={'name':_0x197262[_0x2f726f(0x1ee)]||_0x1c98ac[_0x2f726f(0x22e)],'photo':_0x422cfd[_0x2f726f(0x20b)](_0x2a8eae),'biggerphoto':_0x366845[_0x2f726f(0x20b)](_0x3ee126,!![])}),_0x297658;}else _0x1adc9e=_0x5aeefe[_0x2f726f(0x216)](generateAvatarURL,_0x2d03a6[_0x2f726f(0x22e)]);}break;case _0x2f726f(0x230):_0x1adc9e=_0x2d03a6[_0x2f726f(0x1f4)];if(_0x1adc9e){if('DuEaQ'!==_0x2f726f(0x1d8)){if(_0x49e7b7)_0x1adc9e=_0x1adc9e[_0x2f726f(0x204)](/(\?s=)\d*$/i,_0x5aeefe[_0x2f726f(0x1e6)]);else _0x1adc9e=_0x1adc9e[_0x2f726f(0x204)](/(\?s=)\d*$/i,_0x2f726f(0x1df));}else _0x2c4557[_0x2f726f(0x22a)](_0x540624['Note'],{'foreignKey':_0x4b4cf7[_0x2f726f(0x220)],'constraints':![]}),_0x4c4248[_0x2f726f(0x22a)](_0x12c621[_0x2f726f(0x1f8)],{'foreignKey':'lastchangeuserId','constraints':![]});}else _0x2f726f(0x1f9)===_0x5aeefe['nyOrY']?_0x1adc9e=_0x5aeefe[_0x2f726f(0x216)](generateAvatarURL,_0x2d03a6[_0x2f726f(0x22e)]):_0x57af81[_0x2f726f(0x225)](_0x5aeefe['qiWDB'],_0xb5a53[_0x2f726f(0x227)](_0x5aeefe['weWft']));break;case _0x2f726f(0x1dd):_0x1adc9e=generateAvatarURL('',_0x2d03a6[_0x2f726f(0x1e2)][0x0]['value'],_0x49e7b7);break;case _0x5aeefe[_0x2f726f(0x1e4)]:_0x1adc9e=_0x2d03a6[_0x2f726f(0x20a)][0x0][_0x2f726f(0x1eb)];if(_0x49e7b7)_0x1adc9e=_0x1adc9e[_0x2f726f(0x204)](/(\?sz=)\d*$/i,_0x5aeefe['oimeV']);else _0x1adc9e=_0x1adc9e['replace'](/(\?sz=)\d*$/i,_0x5aeefe[_0x2f726f(0x215)]);break;case _0x5aeefe[_0x2f726f(0x208)]:_0x1adc9e=_0x5aeefe[_0x2f726f(0x221)](generateAvatarURL,_0x2d03a6['username'],_0x2d03a6['emails'][0x0],_0x49e7b7);break;case _0x2f726f(0x222):_0x1adc9e=generateAvatarURL(_0x2d03a6[_0x2f726f(0x22e)],_0x2d03a6[_0x2f726f(0x1e2)][0x0],_0x49e7b7);break;default:_0x1adc9e=_0x5aeefe[_0x2f726f(0x205)](generateAvatarURL,_0x2d03a6['username']);break;}return _0x1adc9e;},_0x56292c[_0x6bef9e(0x209)]=function(_0x405671){const _0x363264=_0x6bef9e;return{'name':_0x405671[_0x363264(0x21c)](0x0,_0x405671[_0x363264(0x1e5)]('@')),'photo':generateAvatarURL('',_0x405671,![]),'biggerphoto':_0x5aeefe[_0x363264(0x22b)](generateAvatarURL,'',_0x405671,!![])};};function _0x1b85b2(_0x5ac663,_0x2b3e00){const _0x580183=_0x6bef9e,_0x32cf8c={'jnSJN':_0x580183(0x1d6)};if(!_0x5ac663[_0x580183(0x1ff)](_0x580183(0x1cf))){if(_0x5aeefe[_0x580183(0x1e8)]!==_0x5aeefe[_0x580183(0x1e8)]){if(_0x5e4d1d)_0x7dd192=_0x2cbf88[_0x580183(0x204)](/(\?s=)\d*$/i,_0x32cf8c[_0x580183(0x1f7)]);else _0x500adf=_0x1b3a86['replace'](/(\?s=)\d*$/i,_0x580183(0x1df));}else return Promise[_0x580183(0x1dc)]();}return scrypt['kdf'](_0x5ac663[_0x580183(0x22c)]('password'),{'logN':0xf})[_0x580183(0x224)](_0x4bcebe=>{const _0x4af145=_0x580183;_0x5ac663[_0x4af145(0x225)](_0x5aeefe[_0x4af145(0x211)],_0x4bcebe[_0x4af145(0x227)]('hex'));});}return _0x56292c[_0x6bef9e(0x214)](_0x1b85b2),_0x56292c[_0x6bef9e(0x1f5)](_0x1b85b2),_0x56292c;};