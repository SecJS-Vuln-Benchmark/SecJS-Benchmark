'use strict';function _0x4808(){const _0x56b6bb=['write','922940PuHXOx','BmIej','usyjb','FLeGB','Hello\x20World\x20foobar','hUEOZ','ppdpN','HDBrl','vzwFx','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded(contains:\x20\x22Hello\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','DcFGe','UxaFe','custom\x20execution\x20error','zVjdT','czeZp','18vKDPwz','tMXzd','EvttF','log','NVzeQ','kiESx','RfXYz','fcMEI','PwbzO','foo','JgvHJ','fuaqa','rnseb','aVjOy','lOYMJ','nCobW','headers','Notification\x20message','XKPUm','constructor','hi\x20from\x20client','tCUYV','DCMsp','FHcvi','reply','tGJpy','TFYcV','tap','teOhl','console.log(\x22timer\x22);','Plktm','push','Hpkws','xLfjR','NXGId','BBPFT','CrxAF','276unCyfF','zErAR','LvXzr','pCYqT','emit','var\x20x\x20=\x2042;\x20return\x20x;','MCKty','tickAsync','JXkJc','sAWVp','XYUzt','request','mAqip','/fastify-websocket','SWHlj','EgmNK','fDuvb','afterEach','itEEB','\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20add(x:\x20Int,\x20y:\x20Int):\x20Int\x0a\x20\x20\x20\x20}\x0a\x20\x20','crtJK','oleGK','cmIBf','wcPPI','ghTII','ThztJ','qdfaG','AMaBy','_socket','TQPrt','includes','LrXeR','bgnet','LjvYT','address','bgzAb','HSvQW','stop','QERZJ','rJgiA','LKCVM','subscription\x20server\x20sends\x20update\x20to\x20subscriptions\x20with\x20custom\x20context','nNDlg','ipMfd','pdFXL','NyYRb','szczj','CSrSu','open','BYXAU','AQlWQ','ESuwt','IbgTW','connection_ack','yCVoT','vRWjz','wiptB','pass','authorization','dOGuA','dmsAo','graphql','fkvvN','cGkut','LKnzV','pYvzB','ws://localhost:','gQXmW','subscription\x20works\x20with\x20`withFilter`\x20tool','plan','port','lSkpE','setEncoding','vjuoY','ceeTw','subscription\x20server\x20works\x20with\x20fastify\x20websocket','topic','rLtha','dGhxT','zHcuS','HsPne','EwUjg','listen','HagUb','KCcnA','Trsco','from','get','MvRCf','Luwdk','ZefLL','MdPfv','GEiZA','PWeEJ','hjokp','kaboom','VhUNx','subscription\x20works\x20properly\x20if\x20onConnect\x20is\x20not\x20defined\x20and\x20connectionInit\x20extension\x20is\x20defined\x20in\x20gql_start\x20message','ewOKL','VPBWl','YhTMI','QVQjI','FwJdO','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','QJofG','parse','bhpKV','send','KVsDH','FVlaY','events','QawAF','noDqG','GybCF','lcYfG','sWyxY','zDNdh','lumJi','beforeEach','XTlUv','ahjAR','foobar','emitter','filtered','fGbTa','/graphql','ThrUi','request\x20and\x20reply\x20objects\x20in\x20subscription\x20context','bSBBb','destroy','uyTFI','ntZuw','LSJvp','onjzh','RgWSx','RHRXw','XxAVl','QRWBg','xASnC','ubZNc','context\x20is\x20not\x20missing','GUaCs','NOTIFICATION_ADDED','hivIn','Gzhij','rFmwH','zkbZX','UEEKC','data','hi\x20from\x20server','RnpxA','subscription\x20passes\x20context\x20to\x20its\x20loaders','mbOjN','VVLCA','zUxou','TabiX','cjrBK','AfTWj','XsIUF','OgpDI','equal','ptTMO','PrtDL','updateClock();','GErNz','Bearer\x20foobar','return\x20new\x20Date();','tQhDI','connectionInit','VTZdv','miUdC','14588mgMcKu','cqNRW','cDtok','nniLN','TYyNH','EWccS','MdGoh','gLwBn','mnIld','GjMhp','wrong\x20messages\x20do\x20not\x20crash\x20the\x20server','lEDYs','eWlNa','error','server','return\x20Object.keys({a:1});','PfbXS','type','biMph','UhdUL','BQHDf','RlbEP','RpkCF','teardown','cvUgo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','rPMzr','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','pubsub','`withFilter`\x20tool\x20works\x20with\x20async\x20filters','cqiQs','subscription\x20handles\x20`withFilter`\x20if\x20filter\x20throws','subscription\x20server\x20sends\x20update\x20to\x20subscriptions','stringify','tiAab','tKTKH','fkUGr','AoplX','dqFHx','uOCwA','notificationAdded','LSXzj','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22filtered\x20should\x20not\x20pass\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','end','HEVBe','utf8','fDPVZ','@sinonjs/fake-timers','naJIO','LwmwS','RWlMt','TjDfV','eLLLk','xVpzN','RYqbP','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20query\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notifications\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','__proto__','install','connection_init','375551pAFyCn','subscribe','KgZsL','DKkvB','subscription\x20server\x20sends\x20update\x20to\x20subscriptions\x20with\x20custom\x20async\x20context','complete','ACHHo','\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded:\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20','wzXNc','rlzvK','ddvbh','Cxdoh','OdnLT','decorateRequest','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22Hello\x20World\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','message','register','Cjzvz','ToYpn','CNmGd','ahUZz','ws://127.0.0.1:','dGTbE','RhIvN','nJtcO','payload','iUUQO','EeZhz','wvyiL','dgrPx','socket','SKUvt','fUmVK','BLZSD','GPUXk','subscription\x20server\x20replies\x20with\x20keep\x20alive\x20when\x20enabled','aYBxq','DDozE','close','inject','rtLkG','oXCVe','BvkjO','647456OAHLrJ','cLWoi','clock','dNGVq','ixExl','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22Hello\x20World\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','oEJiB','return\x20await\x20Promise.resolve(42);','KVFKO','iYUEQ','safe','XVkQH','bXqgo','sYfJh','subscription\x20context\x20is\x20extended\x20with\x20onConnect\x20return\x20value\x20if\x20connectionInit\x20extension\x20is\x20defined\x20in\x20gql_start\x20message','ADrdz','eBpCN','bifTW','VUeOn','ItCYL','\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Mutation\x20{\x0a\x20\x20\x20\x20\x20\x20addNotification(message:\x20String!):\x20Notification!\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded(contains:\x20String):\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20','map','OsQCZ','pMhmW','@fastify/websocket','oexpR','hfYMH','vNPml','rLXog','Ipsit','start','sZzhP','XiEZI','bUVKT','7BGbZXe','rEGPG','Hello\x20World','createWebSocketStream','YTCQy','dCPqA','FbVii','RoEmT','iEsDk','eoELz','DFoyC','YhTCx','oSkBd','graphql-ws','2038254UTJLwO','18JdUITi','MANnQ','bbb','mqemitter','\x0a\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20message:\x20String\x0a\x20\x20}\x0a\x0a\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20}\x0a\x0a\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20notificationAdded:\x20Notification\x0a\x20\x20}\x0a','JIahQ','qcNeZ','uninstall','\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Mutation\x20{\x0a\x20\x20\x20\x20\x20\x20addNotification(message:\x20String):\x20Notification\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded:\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20','POST','publish','bar','YIJtm','bind','subscription\x20server\x20replies\x20with\x20connection_ack','XegLk','1325055lbjSGn','AlBbD','1728YmPNaz','AoQCU','world','context'];_0x4808=function(){return _0x56b6bb;};return _0x4808();}const _0x498218=_0x55b2;(function(_0x12cc80,_0x338822){const _0xfdefda=_0x55b2,_0x58c9af=_0x12cc80();while(!![]){try{const _0x23ad6f=-parseInt(_0xfdefda(0x2c5))/0x1*(parseInt(_0xfdefda(0x2d9))/0x2)+-parseInt(_0xfdefda(0x2fe))/0x3*(parseInt(_0xfdefda(0x21c))/0x4)+parseInt(_0xfdefda(0x2c3))/0x5+parseInt(_0xfdefda(0x2b2))/0x6+parseInt(_0xfdefda(0x2a4))/0x7*(parseInt(_0xfdefda(0x282))/0x8)+parseInt(_0xfdefda(0x2b3))/0x9*(-parseInt(_0xfdefda(0x2ca))/0xa)+parseInt(_0xfdefda(0x257))/0xb;if(_0x23ad6f===_0x338822)break;else _0x58c9af['push'](_0x58c9af['shift']());}catch(_0x5a2f6e){_0x58c9af['push'](_0x58c9af['shift']());}}}(_0x4808,0x2cf41));function _0x55b2(_0x2245f0,_0x20aaec){const _0x4808b8=_0x4808();return _0x55b2=function(_0x55b26e,_0x5f443e){_0x55b26e=_0x55b26e-0x19f;let _0xfc5f2b=_0x4808b8[_0x55b26e];return _0xfc5f2b;},_0x55b2(_0x2245f0,_0x20aaec);}const {test,t}=require(_0x498218(0x2f4)),Fastify=require('fastify'),WebSocket=require('ws'),mq=require(_0x498218(0x2b6)),{EventEmitter}=require('events'),fastifyWebsocket=require(_0x498218(0x29a)),GQL=require('..'),{once}=require(_0x498218(0x1df)),FakeTimers=require(_0x498218(0x24b));t[_0x498218(0x1e7)](({context:_0x4ec67e})=>{const _0x4f83a4=_0x498218;_0x4ec67e[_0x4f83a4(0x284)]=FakeTimers[_0x4f83a4(0x255)]({'shouldClearNativeTimers':!![],'shouldAdvanceTime':!![],'advanceTimeDelta':0x28});}),t[_0x498218(0x30f)](({context:_0x24d4f3})=>{_0x24d4f3['clock']['uninstall']();}),test(_0x498218(0x2c1),_0xb9d56e=>{const _0x855f8=_0x498218,_0x2c8585={'czeZp':_0x855f8(0x1a6),'wzXNc':function(_0x38146b,_0x41a5be,_0x3b872b){return _0x38146b(_0x41a5be,_0x3b872b);},'SKUvt':function(_0x14ba78,_0x5bfd45){return _0x14ba78!==_0x5bfd45;},'sYfJh':function(_0x2a3f59,_0x1735ce){return _0x2a3f59+_0x1735ce;},'NVzeQ':'/graphql','qrtoe':_0x855f8(0x249),'oWvZA':_0x855f8(0x205)},_0x43fde3=Fastify();_0xb9d56e[_0x855f8(0x233)](()=>_0x43fde3[_0x855f8(0x27d)]());const _0x3ecf95=_0x855f8(0x311),_0x1db9ad={'Query':{'add':(_0xaced0f,{x:_0x338c0d,y:_0x3c4234})=>_0x338c0d+_0x3c4234}};_0x43fde3[_0x855f8(0x267)](GQL,{'schema':_0x3ecf95,'resolvers':_0x1db9ad,'subscription':!![]}),_0x43fde3[_0x855f8(0x1c3)]({'port':0x0},_0x3a0a87=>{const _0x4fa0cc=_0x855f8,_0xea984a={'VyKLj':function(_0x95fe12,_0x3e2f63,_0x44a27a){const _0x173dbc=_0x55b2;return _0x2c8585[_0x173dbc(0x25f)](_0x95fe12,_0x3e2f63,_0x44a27a);},'huMIg':_0x4fa0cc(0x1a6),'fkUGr':_0x4fa0cc(0x1ee),'XVkQH':_0x4fa0cc(0x249),'DCMsp':_0x4fa0cc(0x256),'pCYqT':'data'};if(_0x2c8585[_0x4fa0cc(0x276)](_0x4fa0cc(0x1be),'LrbbD')){_0xb9d56e[_0x4fa0cc(0x229)](_0x3a0a87);const _0x40ba50=_0x2c8585[_0x4fa0cc(0x28f)](_0x4fa0cc(0x1b3)+_0x43fde3[_0x4fa0cc(0x22a)][_0x4fa0cc(0x320)]()['port'],_0x2c8585[_0x4fa0cc(0x2dd)]),_0xf3ab02=new WebSocket(_0x40ba50,_0x4fa0cc(0x2b1)),_0x1f183c=WebSocket[_0x4fa0cc(0x2a7)](_0xf3ab02,{'encoding':_0x2c8585['qrtoe'],'objectMode':!![]});_0xb9d56e['teardown'](_0x1f183c[_0x4fa0cc(0x1f2)][_0x4fa0cc(0x2c0)](_0x1f183c)),_0x1f183c['setEncoding'](_0x2c8585['qrtoe']),_0x1f183c[_0x4fa0cc(0x2c9)](JSON[_0x4fa0cc(0x23d)]({'type':_0x4fa0cc(0x256)})),_0x1f183c['on'](_0x2c8585['oWvZA'],_0x3966c3=>{const _0x3b9812=_0x4fa0cc;_0xb9d56e['equal'](_0x3966c3,JSON[_0x3b9812(0x23d)]({'type':_0x2c8585[_0x3b9812(0x2d8)]})),_0x1f183c[_0x3b9812(0x247)](),_0xb9d56e[_0x3b9812(0x247)]();});}else{const _0x1dda53={'fUmVK':function(_0x42b850,_0x2cee8c,_0x302187){return _0xea984a['VyKLj'](_0x42b850,_0x2cee8c,_0x302187);},'bTEJt':_0xea984a['huMIg']};_0x2ff2cc[_0x4fa0cc(0x229)](_0x3a6aa4);const _0x479a3b='ws://localhost:'+_0x4e391c[_0x4fa0cc(0x22a)][_0x4fa0cc(0x320)]()[_0x4fa0cc(0x1b7)]+_0xea984a[_0x4fa0cc(0x240)],_0x355835=new _0x371037(_0x479a3b,_0x4fa0cc(0x2b1)),_0x2f9a1b=_0x5947cd[_0x4fa0cc(0x2a7)](_0x355835,{'encoding':_0xea984a[_0x4fa0cc(0x28d)],'objectMode':!![]});_0x5aa78d['teardown'](_0x2f9a1b['destroy'][_0x4fa0cc(0x2c0)](_0x2f9a1b)),_0x2f9a1b[_0x4fa0cc(0x1b9)](_0x4fa0cc(0x249)),_0x2f9a1b[_0x4fa0cc(0x2c9)](_0x579b4c['stringify']({'type':_0xea984a[_0x4fa0cc(0x2ef)]})),_0x2f9a1b['on'](_0xea984a[_0x4fa0cc(0x301)],_0x5cd847=>{const _0x4b8c1e=_0x4fa0cc,_0x181180=_0xfe5eff[_0x4b8c1e(0x1da)](_0x5cd847);_0x1dda53[_0x4b8c1e(0x277)](_0x13b078,_0x4b8c1e(0x2f6),0x3e8);if(_0x181180[_0x4b8c1e(0x22d)]===_0x1dda53['bTEJt'])return;_0x34c80f[_0x4b8c1e(0x211)](_0x181180[_0x4b8c1e(0x22d)],'ka'),_0x2f9a1b['end'](),_0x53303a[_0x4b8c1e(0x247)]();});}});}),test(_0x498218(0x27a),_0x51252c=>{const _0x204f15=_0x498218,_0x100e46={'bgzAb':function(_0x18c48f,_0x584508,_0x2d1b6d){return _0x18c48f(_0x584508,_0x2d1b6d);},'rlIpe':'console.log(\x22timer\x22);','jOvSJ':_0x204f15(0x1ee),'cFQUL':_0x204f15(0x2b1),'dqFHx':'utf8','iGmgs':'connection_init','MCKty':function(_0x2644af){return _0x2644af();}},_0x21d384=_0x100e46[_0x204f15(0x304)](Fastify);_0x51252c['teardown'](()=>_0x21d384[_0x204f15(0x27d)]());const _0x4b8b64=_0x204f15(0x311),_0x102b44={'Query':{'add':(_0xcdc4ea,{x:_0x433184,y:_0x2c8bc7})=>_0x433184+_0x2c8bc7}};_0x21d384['register'](GQL,{'schema':_0x4b8b64,'resolvers':_0x102b44,'subscription':{'keepAlive':0x2710}}),_0x21d384[_0x204f15(0x1c3)]({'port':0x0},_0x5b9faa=>{const _0x321b1c=_0x204f15;_0x51252c['error'](_0x5b9faa);const _0x27a776='ws://localhost:'+_0x21d384['server'][_0x321b1c(0x320)]()[_0x321b1c(0x1b7)]+_0x100e46['jOvSJ'],_0x20f6b5=new WebSocket(_0x27a776,_0x100e46['cFQUL']),_0x392332=WebSocket[_0x321b1c(0x2a7)](_0x20f6b5,{'encoding':_0x321b1c(0x249),'objectMode':!![]});_0x51252c[_0x321b1c(0x233)](_0x392332[_0x321b1c(0x1f2)][_0x321b1c(0x2c0)](_0x392332)),_0x392332[_0x321b1c(0x1b9)](_0x100e46[_0x321b1c(0x242)]),_0x392332[_0x321b1c(0x2c9)](JSON[_0x321b1c(0x23d)]({'type':_0x100e46['iGmgs']})),_0x392332['on'](_0x321b1c(0x205),_0x233a93=>{const _0x48ab78=_0x321b1c,_0x33ca23=JSON[_0x48ab78(0x1da)](_0x233a93);_0x100e46[_0x48ab78(0x321)](setTimeout,_0x100e46['rlIpe'],0x3e8);if(_0x33ca23[_0x48ab78(0x22d)]===_0x48ab78(0x1a6))return;_0x51252c[_0x48ab78(0x211)](_0x33ca23['type'],'ka'),_0x392332['end'](),_0x51252c['end']();});});}),test(_0x498218(0x23c),_0x1d7776=>{const _0x4b5093=_0x498218,_0x3a80e9={'vRWjz':_0x4b5093(0x1ca),'GjMhp':function(_0x24a5fe){return _0x24a5fe();},'oXFOd':_0x4b5093(0x2bc),'ThztJ':_0x4b5093(0x1ee),'usyjb':_0x4b5093(0x1ff),'sZzhP':function(_0x2a1783,_0x17625e,_0xf4799b){return _0x2a1783(_0x17625e,_0xf4799b);},'DcFGe':'dJipT','pYvzB':_0x4b5093(0x205),'rnseb':_0x4b5093(0x2a6),'IbgTW':function(_0x465c64,_0x120b81){return _0x465c64===_0x120b81;},'hUEOZ':function(_0x574f10,_0x1efc99){return _0x574f10===_0x1efc99;},'IbiHj':_0x4b5093(0x25c),'oEJiB':'test','KgZsL':function(_0x10222b,_0x241d2c){return _0x10222b+_0x241d2c;},'hjokp':_0x4b5093(0x1b3),'miUdC':_0x4b5093(0x2b1),'ASDcv':_0x4b5093(0x2a0),'RHRXw':function(_0x5f49b3){return _0x5f49b3();}},_0x31a9af=_0x3a80e9[_0x4b5093(0x1f8)](Fastify);_0x1d7776[_0x4b5093(0x233)](()=>_0x31a9af[_0x4b5093(0x27d)]());const _0x21338e=()=>{const _0xd03c7b=_0x4b5093,_0x4a637={'HfakJ':_0xd03c7b(0x2c7)};_0x31a9af[_0xd03c7b(0x27e)]({'method':_0x3a80e9['oXFOd'],'url':_0x3a80e9[_0xd03c7b(0x317)],'body':{'query':_0xd03c7b(0x253)}},()=>{const _0x101f76=_0xd03c7b;_0x3a80e9[_0x101f76(0x1a8)]===_0x101f76(0x1ca)?_0x3a80e9[_0x101f76(0x225)](_0x521b84):(_0x438039[_0x101f76(0x211)](_0x5625ad,_0x4a637['HfakJ']),_0x318812['end'](),_0x1d82b9[_0x101f76(0x258)](_0x4a1674));});},_0x521b84=()=>{const _0x61dd6f=_0x4b5093;_0x31a9af[_0x61dd6f(0x27e)]({'method':_0x61dd6f(0x2bc),'url':_0x3a80e9[_0x61dd6f(0x317)],'body':{'query':_0x61dd6f(0x287)}},()=>{});},_0x2b9a83=mq(),_0x3ec3c6=_0x4b5093(0x2bb);let _0x3264d1=0x1;const _0x109dae=[{'id':_0x3264d1,'message':_0x4b5093(0x2ea)}],_0x3d8a23={'Query':{'notifications':()=>_0x109dae},'Mutation':{'addNotification':async(_0x324285,{message:_0x4c645c})=>{const _0x2eb4fc=_0x4b5093,_0x1bd116=_0x3264d1++,_0x58923b={'id':_0x1bd116,'message':_0x4c645c};return _0x109dae[_0x2eb4fc(0x2f8)](_0x58923b),await _0x2b9a83[_0x2eb4fc(0x302)]({'topic':_0x3a80e9[_0x2eb4fc(0x2cc)],'payload':{'notificationAdded':_0x58923b}}),_0x3a80e9[_0x2eb4fc(0x2a1)](setTimeout,function(){const _0x12c292=_0x2eb4fc;console[_0x12c292(0x2dc)](_0x12c292(0x28c));},0x64),_0x58923b;}},'Subscription':{'notificationAdded':{'subscribe':(_0x9bd7a8,_0x5220d9,_0x1b7675)=>{const _0x6bc2d4=_0x4b5093;return eval('Math[\'PI\'] * 2;'),_0x1b7675['pubsub'][_0x6bc2d4(0x258)](_0x3a80e9[_0x6bc2d4(0x2cc)]);}}}};_0x31a9af[_0x4b5093(0x267)](GQL,{'schema':_0x3ec3c6,'resolvers':_0x3d8a23,'subscription':{'emitter':_0x2b9a83}}),_0x31a9af[_0x4b5093(0x1c3)]({'port':0x0},_0x131449=>{const _0x10642a=_0x4b5093;if(_0x3a80e9['hUEOZ']('RpkCF',_0x10642a(0x232))){_0x1d7776[_0x10642a(0x229)](_0x131449);const _0x3dd3d1=new WebSocket(_0x3a80e9[_0x10642a(0x259)](_0x3a80e9[_0x10642a(0x1cf)],_0x31a9af[_0x10642a(0x22a)][_0x10642a(0x320)]()['port'])+_0x3a80e9[_0x10642a(0x317)],_0x3a80e9[_0x10642a(0x21b)]),_0xb27d15=WebSocket[_0x10642a(0x2a7)](_0x3dd3d1,{'encoding':_0x10642a(0x249),'objectMode':!![]});_0x1d7776[_0x10642a(0x233)](_0xb27d15['destroy'][_0x10642a(0x2c0)](_0xb27d15)),_0xb27d15[_0x10642a(0x1b9)](_0x10642a(0x249)),_0xb27d15[_0x10642a(0x2c9)](JSON[_0x10642a(0x23d)]({'type':_0x10642a(0x256)})),_0xb27d15[_0x10642a(0x2c9)](JSON[_0x10642a(0x23d)]({'id':0x1,'type':_0x3a80e9['ASDcv'],'payload':{'query':_0x10642a(0x237)}})),_0xb27d15[_0x10642a(0x2c9)](JSON[_0x10642a(0x23d)]({'id':0x2,'type':_0x10642a(0x2a0),'payload':{'query':_0x10642a(0x237)}})),_0xb27d15[_0x10642a(0x2c9)](JSON['stringify']({'id':0x2,'type':'stop'})),_0xb27d15['on'](_0x3a80e9[_0x10642a(0x1b2)],_0x1791d9=>{const _0x36005d=_0x10642a,_0x2e7afa={'ptTMO':_0x36005d(0x2bc),'bUVKT':_0x3a80e9[_0x36005d(0x317)]};if(_0x3a80e9[_0x36005d(0x2d4)]!==_0x36005d(0x241)){const _0x3f02ab=JSON[_0x36005d(0x1da)](_0x1791d9);if(_0x3f02ab['id']===0x1&&_0x3f02ab[_0x36005d(0x22d)]==='data')_0x1d7776[_0x36005d(0x211)](_0x1791d9,JSON[_0x36005d(0x23d)]({'type':_0x3a80e9[_0x36005d(0x1b2)],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x3a80e9[_0x36005d(0x2e5)]}}}})),_0xb27d15[_0x36005d(0x247)](),_0x1d7776[_0x36005d(0x247)]();else _0x3a80e9[_0x36005d(0x1a5)](_0x3f02ab['id'],0x2)&&_0x3a80e9[_0x36005d(0x2cf)](_0x3f02ab[_0x36005d(0x22d)],_0x3a80e9['IbiHj'])&&_0x21338e();}else _0x3d35eb[_0x36005d(0x27e)]({'method':_0x2e7afa[_0x36005d(0x212)],'url':_0x2e7afa[_0x36005d(0x2a3)],'body':{'query':_0x36005d(0x287)}},()=>{});});}else _0x4e827d[_0x10642a(0x1ae)][_0x10642a(0x238)]['publish']({'topic':_0x10642a(0x1ff),'payload':{'notificationAdded':{'id':0x1,'message':_0x3a80e9[_0x10642a(0x288)]}}});});});class CustomPubSub{constructor(){const _0x4ac52a=_0x498218;this[_0x4ac52a(0x1eb)]=new EventEmitter();}async[_0x498218(0x258)](_0x4d687a,_0x59f512){const _0x3d1927=_0x498218,_0x17165a=_0x5e03f5=>{const _0x2a5016=_0x55b2;_0x59f512[_0x2a5016(0x2f8)](_0x5e03f5);},_0x28e301=()=>{this['emitter']['removeListener'](_0x4d687a,_0x17165a);};this['emitter']['on'](_0x4d687a,_0x17165a),_0x59f512[_0x3d1927(0x27d)]=_0x28e301;}[_0x498218(0x2bd)](_0x1fea8a,_0x3d76ef){const _0x5ca144=_0x498218,_0x585888={'cvUgo':function(_0x1e1e63){return _0x1e1e63();}};this[_0x5ca144(0x1eb)]['emit'](_0x1fea8a[_0x5ca144(0x1bd)],_0x1fea8a['payload']),_0x585888[_0x5ca144(0x234)](_0x3d76ef);}}test('subscription\x20with\x20custom\x20pubsub',_0x5b9391=>{const _0x46204d=_0x498218,_0x4af8c9={'Ipsit':_0x46204d(0x1ee),'rJgiA':_0x46204d(0x315),'sAWVp':_0x46204d(0x2bc),'fGbTa':_0x46204d(0x1cd),'OsQCZ':_0x46204d(0x1ff),'hfYMH':function(_0x5dcfe0,_0x46c1c7){return _0x5dcfe0(_0x46c1c7);},'WDorb':function(_0x293285,_0x374127){return _0x293285===_0x374127;},'bgnet':function(_0x5b935c){return _0x5b935c();},'RhIvN':_0x46204d(0x2b1),'vSmpE':_0x46204d(0x2a0),'TYyNH':'stop'},_0x1a2075=Fastify();_0x5b9391['teardown'](()=>_0x1a2075[_0x46204d(0x27d)]());const _0x1a7581=new CustomPubSub(),_0x43ddf4=()=>{const _0x475701=_0x46204d,_0x27dcd5={'PrtDL':function(_0x9e20c9){return _0x9e20c9();}};_0x4af8c9[_0x475701(0x325)]===_0x4af8c9[_0x475701(0x325)]?_0x1a2075[_0x475701(0x27e)]({'method':_0x4af8c9[_0x475701(0x307)],'url':_0x475701(0x1ee),'body':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20query\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notifications\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'}},()=>{_0x37f758();}):_0x278cab['inject']({'method':_0x475701(0x2bc),'url':_0x4af8c9[_0x475701(0x29f)],'body':{'query':_0x475701(0x253)}},()=>{const _0xf6e26=_0x475701;_0x27dcd5[_0xf6e26(0x213)](_0x1c935a);});},_0x37f758=()=>{const _0x3cd421=_0x46204d;_0x3cd421(0x223)!==_0x4af8c9[_0x3cd421(0x1ed)]?_0x1a2075[_0x3cd421(0x27e)]({'method':'POST','url':_0x3cd421(0x1ee),'body':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22Hello\x20World\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'}},()=>{}):_0x297a51['pass']();},_0x5ce055=_0x46204d(0x2bb);let _0x440472=0x1;const _0x1e0403=[{'id':_0x440472,'message':'Notification\x20message'}],_0x15bf59={'Query':{'notifications':()=>_0x1e0403},'Mutation':{'addNotification':async(_0x1529d6,{message:_0x11277a})=>{const _0x4b920a=_0x46204d,_0x3eb0b9=_0x440472++,_0x32069a={'id':_0x3eb0b9,'message':_0x11277a};return _0x1e0403['push'](_0x32069a),await _0x1a7581['emitter'][_0x4b920a(0x302)](_0x4af8c9[_0x4b920a(0x298)],{'notificationAdded':_0x32069a}),_0x4af8c9[_0x4b920a(0x29c)](Function,_0x4b920a(0x22b))(),_0x32069a;}},'Subscription':{'notificationAdded':{'subscribe':(_0x16bdf0,_0xac1744,{pubsub:_0x20e692})=>_0x20e692['subscribe']('NOTIFICATION_ADDED')}}};_0x1a2075['register'](GQL,{'schema':_0x5ce055,'resolvers':_0x15bf59,'subscription':{'pubsub':_0x1a7581}}),_0x1a2075[_0x46204d(0x1c3)]({'port':0x0},_0x78179d=>{const _0x5b9ba7=_0x46204d,_0x4fd679={'cqiQs':function(_0x5469d2,_0x50fa2e){return _0x5469d2===_0x50fa2e;},'Oxurt':function(_0x51a95b,_0x3f8356){return _0x4af8c9['WDorb'](_0x51a95b,_0x3f8356);},'szczj':_0x5b9ba7(0x25c),'YTCQy':function(_0x4c5fee){const _0x4e7c29=_0x5b9ba7;return _0x4af8c9[_0x4e7c29(0x31e)](_0x4c5fee);}};_0x5b9391[_0x5b9ba7(0x229)](_0x78179d);const _0xa32100=new WebSocket(_0x5b9ba7(0x1b3)+_0x1a2075[_0x5b9ba7(0x22a)][_0x5b9ba7(0x320)]()[_0x5b9ba7(0x1b7)]+_0x5b9ba7(0x1ee),_0x4af8c9[_0x5b9ba7(0x26e)]),_0x1a112b=WebSocket['createWebSocketStream'](_0xa32100,{'encoding':'utf8','objectMode':!![]});_0x5b9391[_0x5b9ba7(0x233)](_0x1a112b[_0x5b9ba7(0x1f2)][_0x5b9ba7(0x2c0)](_0x1a112b)),_0x1a112b[_0x5b9ba7(0x1b9)](_0x5b9ba7(0x249)),_0x1a112b[_0x5b9ba7(0x2c9)](JSON[_0x5b9ba7(0x23d)]({'type':'connection_init'})),_0x1a112b[_0x5b9ba7(0x2c9)](JSON['stringify']({'id':0x1,'type':_0x5b9ba7(0x2a0),'payload':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'}})),_0x1a112b[_0x5b9ba7(0x2c9)](JSON['stringify']({'id':0x2,'type':_0x4af8c9['vSmpE'],'payload':{'query':_0x5b9ba7(0x237)}})),_0x1a112b['write'](JSON[_0x5b9ba7(0x23d)]({'id':0x2,'type':_0x4af8c9[_0x5b9ba7(0x220)]})),_0x1a112b['on'](_0x5b9ba7(0x205),_0x4d689e=>{const _0x551cb6=_0x5b9ba7,_0x1e9b06=JSON[_0x551cb6(0x1da)](_0x4d689e);if(_0x4fd679[_0x551cb6(0x23a)](_0x1e9b06['id'],0x1)&&_0x4fd679['Oxurt'](_0x1e9b06[_0x551cb6(0x22d)],_0x551cb6(0x205)))_0x5b9391[_0x551cb6(0x211)](_0x4d689e,JSON['stringify']({'type':_0x551cb6(0x205),'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':'Hello\x20World'}}}})),_0x1a112b['end'](),_0x5b9391['end']();else _0x1e9b06['id']===0x2&&_0x1e9b06[_0x551cb6(0x22d)]===_0x4fd679[_0x551cb6(0x19f)]&&_0x4fd679[_0x551cb6(0x2a8)](_0x43ddf4);});});}),test(_0x498218(0x327),_0x133931=>{const _0xc7a606=_0x498218,_0x10cae9={'VPBWl':_0xc7a606(0x2a0),'PwbzO':_0xc7a606(0x219),'xLfjR':function(_0x2e47bc,_0x1ad678){return _0x2e47bc!==_0x1ad678;},'dOGuA':_0xc7a606(0x2af),'Plktm':_0xc7a606(0x2bc),'biMph':_0xc7a606(0x1ee),'rlzvK':'return\x20Object.keys({a:1});','XxAVl':function(_0x47b679,_0x3406a1){return _0x47b679===_0x3406a1;},'dNGVq':_0xc7a606(0x205),'cDtok':_0xc7a606(0x2a6),'VhUNx':'complete','XsIUF':_0xc7a606(0x1b3),'MvRCf':_0xc7a606(0x249),'ToTHK':_0xc7a606(0x323),'hcScq':function(_0x173873){return _0x173873();},'vNPml':function(_0x216b19){return _0x216b19();},'KVsDH':_0xc7a606(0x2ea)},_0x101f80=_0x10cae9['hcScq'](Fastify);_0x133931['teardown'](()=>_0x101f80[_0xc7a606(0x27d)]());const _0x5b076e=()=>{const _0x25e441=_0xc7a606,_0x3cdd95={'XYUzt':function(_0xc1825f){return _0xc1825f();}};_0x10cae9[_0x25e441(0x2fa)](_0x10cae9['dOGuA'],_0x10cae9[_0x25e441(0x1ac)])?(_0x347493['write'](_0x5c09fe[_0x25e441(0x23d)]({'id':0x1,'type':_0x10cae9[_0x25e441(0x1d4)],'payload':{'query':_0x25e441(0x237)},'extensions':[{'type':_0x10cae9[_0x25e441(0x2e1)]}]})),_0x502966[_0x25e441(0x247)]()):_0x101f80[_0x25e441(0x27e)]({'method':_0x10cae9[_0x25e441(0x2f7)],'url':_0x10cae9[_0x25e441(0x22e)],'body':{'query':_0x25e441(0x253)}},()=>{const _0x5d694a=_0x25e441;_0x3cdd95[_0x5d694a(0x308)](_0x3ecdcd);});},_0x3ecdcd=()=>{const _0x3ba01a=_0xc7a606;_0x101f80[_0x3ba01a(0x27e)]({'method':_0x10cae9[_0x3ba01a(0x2f7)],'url':_0x10cae9[_0x3ba01a(0x22e)],'body':{'query':_0x3ba01a(0x287)}},()=>{});},_0x142199=_0x10cae9[_0xc7a606(0x29d)](mq),_0x53950d=_0xc7a606(0x2bb);let _0x2ac885=0x1;const _0x4110cd=[{'id':_0x2ac885,'message':_0x10cae9[_0xc7a606(0x1dd)]}],_0x496457={'Query':{'notifications':()=>_0x4110cd},'Mutation':{'addNotification':async(_0x2e8703,{message:_0x1f12e5})=>{const _0x206a4a=_0xc7a606,_0x50d32d=_0x2ac885++,_0x1eb98f={'id':_0x50d32d,'message':_0x1f12e5};return _0x4110cd[_0x206a4a(0x2f8)](_0x1eb98f),await _0x142199[_0x206a4a(0x302)]({'topic':_0x206a4a(0x1ff),'payload':{'notificationAdded':_0x1eb98f}}),Function(_0x10cae9[_0x206a4a(0x260)])(),_0x1eb98f;}},'Subscription':{'notificationAdded':{'subscribe':(_0x197bce,_0x56ce53,{pubsub:_0x21d42b,topic:_0x33cdfc})=>_0x21d42b[_0xc7a606(0x258)](_0x33cdfc)}}};_0x101f80[_0xc7a606(0x267)](GQL,{'schema':_0x53950d,'resolvers':_0x496457,'subscription':{'emitter':_0x142199,'context':()=>({'topic':_0xc7a606(0x1ff)})}}),_0x101f80[_0xc7a606(0x1c3)]({'port':0x0},_0x1b4d6d=>{const _0x2d8ab2=_0xc7a606;_0x133931['error'](_0x1b4d6d);const _0x5c2d16=new WebSocket(_0x10cae9[_0x2d8ab2(0x20f)]+_0x101f80[_0x2d8ab2(0x22a)][_0x2d8ab2(0x320)]()[_0x2d8ab2(0x1b7)]+_0x10cae9['biMph'],_0x2d8ab2(0x2b1)),_0x39d66a=WebSocket[_0x2d8ab2(0x2a7)](_0x5c2d16,{'encoding':_0x10cae9[_0x2d8ab2(0x1c9)],'objectMode':!![]});_0x133931[_0x2d8ab2(0x233)](_0x39d66a[_0x2d8ab2(0x1f2)][_0x2d8ab2(0x2c0)](_0x39d66a)),_0x39d66a['setEncoding'](_0x10cae9[_0x2d8ab2(0x1c9)]),_0x39d66a[_0x2d8ab2(0x2c9)](JSON[_0x2d8ab2(0x23d)]({'type':_0x2d8ab2(0x256)})),_0x39d66a[_0x2d8ab2(0x2c9)](JSON[_0x2d8ab2(0x23d)]({'id':0x1,'type':_0x2d8ab2(0x2a0),'payload':{'query':_0x2d8ab2(0x237)}})),_0x39d66a['write'](JSON[_0x2d8ab2(0x23d)]({'id':0x2,'type':_0x10cae9[_0x2d8ab2(0x1d4)],'payload':{'query':_0x2d8ab2(0x237)}})),_0x39d66a['write'](JSON[_0x2d8ab2(0x23d)]({'id':0x2,'type':_0x10cae9['ToTHK']})),_0x39d66a['on'](_0x10cae9['dNGVq'],_0x401e8f=>{const _0x52b7b5=_0x2d8ab2,_0x17c5c9=JSON['parse'](_0x401e8f);if(_0x10cae9['XxAVl'](_0x17c5c9['id'],0x1)&&_0x17c5c9[_0x52b7b5(0x22d)]==='data')_0x133931[_0x52b7b5(0x211)](_0x401e8f,JSON[_0x52b7b5(0x23d)]({'type':_0x10cae9[_0x52b7b5(0x285)],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x10cae9[_0x52b7b5(0x21e)]}}}})),_0x39d66a[_0x52b7b5(0x247)](),_0x133931[_0x52b7b5(0x247)]();else _0x10cae9[_0x52b7b5(0x1f9)](_0x17c5c9['id'],0x2)&&_0x10cae9[_0x52b7b5(0x1f9)](_0x17c5c9[_0x52b7b5(0x22d)],_0x10cae9[_0x52b7b5(0x1d1)])&&_0x5b076e();});});}),test('subscription\x20socket\x20protocol\x20different\x20than\x20graphql-ws,\x20protocol\x20=\x20foobar',_0x5deda0=>{const _0x249295=_0x498218,_0x14ed62={'DKkvB':_0x249295(0x249),'wiptB':_0x249295(0x27d),'ygNMk':function(_0x3efa76){return _0x3efa76();}},_0x24778d=_0x14ed62['ygNMk'](Fastify),_0x5513fd=_0x249295(0x311),_0x5b2d61={'add':async({x:_0x39e102,y:_0x921d37})=>_0x39e102+_0x921d37};_0x5deda0[_0x249295(0x233)](_0x24778d[_0x249295(0x27d)]),_0x24778d[_0x249295(0x267)](GQL,{'schema':_0x5513fd,'resolvers':_0x5b2d61,'subscription':!![]}),_0x24778d[_0x249295(0x1c3)]({'port':0x0},()=>{const _0x1b61a1=_0x249295,_0x1de5ce='ws://localhost:'+_0x24778d[_0x1b61a1(0x22a)][_0x1b61a1(0x320)]()[_0x1b61a1(0x1b7)]+_0x1b61a1(0x1ee),_0x12152c=new WebSocket(_0x1de5ce,_0x1b61a1(0x1ea)),_0x3e567f=WebSocket[_0x1b61a1(0x2a7)](_0x12152c,{'encoding':_0x14ed62[_0x1b61a1(0x25a)],'objectMode':!![]});_0x5deda0[_0x1b61a1(0x233)](_0x3e567f[_0x1b61a1(0x1f2)][_0x1b61a1(0x2c0)](_0x3e567f)),_0x3e567f['setEncoding']('utf8'),_0x12152c['on'](_0x14ed62[_0x1b61a1(0x1a9)],()=>{const _0x56b83c=_0x1b61a1;_0x3e567f['end'](),_0x5deda0[_0x56b83c(0x247)]();});});}),test('subscription\x20connection\x20is\x20closed\x20if\x20context\x20function\x20throws',_0x103229=>{const _0xe6a6d1=_0x498218,_0x3b949d={'cjrBK':'kaboom','alrvx':_0xe6a6d1(0x1b3),'qFVak':'/graphql','RnpxA':_0xe6a6d1(0x256),'QawAF':_0xe6a6d1(0x27d),'ivncg':function(_0xfcb085){return _0xfcb085();}},_0x4583ac=_0x3b949d['ivncg'](Fastify);_0x103229[_0xe6a6d1(0x233)](()=>_0x4583ac[_0xe6a6d1(0x27d)]());const _0x2739dc='\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20add(x:\x20Int,\x20y:\x20Int):\x20Int\x0a\x20\x20\x20\x20}\x0a\x20\x20',_0x35e097={'Query':{'add':(_0x5aa453,{x:_0x2bacd9,y:_0x3de6de})=>_0x2bacd9+_0x3de6de}};_0x4583ac[_0xe6a6d1(0x267)](GQL,{'schema':_0x2739dc,'resolvers':_0x35e097,'subscription':{'context':function(){const _0x46d87d=_0xe6a6d1;throw new Error(_0x3b949d[_0x46d87d(0x20d)]);}}}),_0x4583ac[_0xe6a6d1(0x1c3)]({'port':0x0},_0x3baba8=>{const _0x56dabb=_0xe6a6d1;_0x103229['error'](_0x3baba8);const _0x41d956=_0x3b949d['alrvx']+_0x4583ac[_0x56dabb(0x22a)][_0x56dabb(0x320)]()[_0x56dabb(0x1b7)]+_0x3b949d['qFVak'],_0x52bab5=new WebSocket(_0x41d956,_0x56dabb(0x2b1)),_0x39ab8d=WebSocket['createWebSocketStream'](_0x52bab5,{'encoding':_0x56dabb(0x249),'objectMode':!![]});_0x103229[_0x56dabb(0x233)](_0x39ab8d[_0x56dabb(0x1f2)][_0x56dabb(0x2c0)](_0x39ab8d)),_0x39ab8d[_0x56dabb(0x2c9)](JSON['stringify']({'type':_0x3b949d[_0x56dabb(0x207)]})),_0x103229[_0x56dabb(0x233)](_0x39ab8d[_0x56dabb(0x1f2)][_0x56dabb(0x2c0)](_0x39ab8d)),_0x39ab8d['setEncoding'](_0x56dabb(0x249)),_0x52bab5['on'](_0x3b949d[_0x56dabb(0x1e0)],()=>{const _0x434b40=_0x56dabb;_0x39ab8d[_0x434b40(0x247)](),_0x103229[_0x434b40(0x247)]();});});}),test(_0x498218(0x25b),_0x13c626=>{const _0x54edae=_0x498218,_0x34e630={'LSJvp':_0x54edae(0x2bc),'rtLkG':'/graphql','qcoDn':function(_0x439f8f,_0x4eaeca){return _0x439f8f(_0x4eaeca);},'MdGoh':function(_0x71ff7a,_0x3ff365){return _0x71ff7a===_0x3ff365;},'MdPfv':_0x54edae(0x205),'FbVii':_0x54edae(0x25c),'ZItaG':function(_0x5b554f){return _0x5b554f();},'onjzh':function(_0x3853e8,_0x1eeb46){return _0x3853e8+_0x1eeb46;},'CUfXk':_0x54edae(0x1b3),'ewOKL':_0x54edae(0x249),'fDPVZ':_0x54edae(0x256),'tCUYV':'stop','cmIBf':_0x54edae(0x2ea)},_0x218a34=Fastify();_0x13c626['teardown'](async()=>{await _0x218a34['close']();});const _0x3fc84d=()=>{const _0x1b5b16=_0x54edae;_0x218a34[_0x1b5b16(0x27e)]({'method':_0x34e630[_0x1b5b16(0x1f5)],'url':'/graphql','body':{'query':_0x1b5b16(0x253)}},()=>{_0x5dac2c();});},_0x5dac2c=()=>{const _0x5d891b=_0x54edae;_0x218a34[_0x5d891b(0x27e)]({'method':_0x34e630[_0x5d891b(0x1f5)],'url':_0x34e630[_0x5d891b(0x27f)],'body':{'query':_0x5d891b(0x287)}},()=>{});},_0x2a804d=mq(),_0x493330=_0x54edae(0x2bb);let _0x3a921a=0x1;const _0x19f22f=[{'id':_0x3a921a,'message':_0x34e630[_0x54edae(0x314)]}],_0x3a3a6e={'Query':{'notifications':()=>_0x19f22f},'Mutation':{'addNotification':async(_0xd25f5c,{message:_0x23ef5a})=>{const _0x14ac62=_0x54edae,_0x3f702=_0x3a921a++,_0x26e84d={'id':_0x3f702,'message':_0x23ef5a};return _0x19f22f[_0x14ac62(0x2f8)](_0x26e84d),await _0x2a804d[_0x14ac62(0x302)]({'topic':_0x14ac62(0x1ff),'payload':{'notificationAdded':_0x26e84d}}),_0x34e630['qcoDn'](Function,'return\x20new\x20Date();')(),_0x26e84d;}},'Subscription':{'notificationAdded':{'subscribe':(_0x5b8675,_0x5be89b,{pubsub:_0xf98c97,topic:_0x141b0f})=>_0xf98c97[_0x54edae(0x258)](_0x141b0f)}}};_0x218a34[_0x54edae(0x267)](GQL,{'schema':_0x493330,'resolvers':_0x3a3a6e,'subscription':{'emitter':_0x2a804d,'context':async()=>{const _0xda1f74=_0x54edae;return await _0x13c626[_0xda1f74(0x2c8)][_0xda1f74(0x284)][_0xda1f74(0x305)](0xc8),new Function(_0xda1f74(0x303))(),{'topic':'NOTIFICATION_ADDED'};}}}),_0x218a34[_0x54edae(0x1c3)]({'port':0x0},_0xedd43=>{const _0x145485=_0x54edae;_0x13c626[_0x145485(0x229)](_0xedd43);const _0x309772=new WebSocket(_0x34e630[_0x145485(0x1f6)](_0x34e630['CUfXk']+_0x218a34[_0x145485(0x22a)]['address']()[_0x145485(0x1b7)],_0x34e630['rtLkG']),_0x145485(0x2b1)),_0x51752d=WebSocket['createWebSocketStream'](_0x309772,{'encoding':_0x34e630[_0x145485(0x1d3)],'objectMode':!![]});_0x13c626['teardown'](_0x51752d[_0x145485(0x1f2)][_0x145485(0x2c0)](_0x51752d)),_0x51752d['setEncoding']('utf8'),_0x51752d[_0x145485(0x2c9)](JSON['stringify']({'type':_0x34e630[_0x145485(0x24a)]})),_0x51752d[_0x145485(0x2c9)](JSON[_0x145485(0x23d)]({'id':0x1,'type':_0x145485(0x2a0),'payload':{'query':_0x145485(0x237)}})),_0x51752d['write'](JSON[_0x145485(0x23d)]({'id':0x2,'type':_0x145485(0x2a0),'payload':{'query':_0x145485(0x237)}})),_0x51752d[_0x145485(0x2c9)](JSON['stringify']({'id':0x2,'type':_0x34e630[_0x145485(0x2ee)]})),_0x51752d['on'](_0x34e630[_0x145485(0x1cc)],_0x3162ec=>{const _0x4621cc=_0x145485,_0x790dd4=JSON['parse'](_0x3162ec);if(_0x790dd4['id']===0x1&&_0x34e630['MdGoh'](_0x790dd4[_0x4621cc(0x22d)],'data'))_0x13c626['equal'](_0x3162ec,JSON[_0x4621cc(0x23d)]({'type':_0x34e630[_0x4621cc(0x1cc)],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x4621cc(0x2a6)}}}})),_0x51752d[_0x4621cc(0x247)](),_0x13c626['end']();else _0x790dd4['id']===0x2&&_0x34e630[_0x4621cc(0x222)](_0x790dd4[_0x4621cc(0x22d)],_0x34e630[_0x4621cc(0x2aa)])&&_0x34e630['ZItaG'](_0x3fc84d);});});}),test('subscription\x20connection\x20is\x20closed\x20if\x20async\x20context\x20function\x20throws',_0x32a7cc=>{const _0x38e979=_0x498218,_0x43f6b9={'ThrUi':'SPyza','oXCVe':_0x38e979(0x1f1),'kiESx':function(_0x5b6e95,_0x54f4d4){return _0x5b6e95!==_0x54f4d4;},'vjuoY':'dmFYE','AMaBy':function(_0xc5ab8f,_0x44935e){return _0xc5ab8f+_0x44935e;},'zErAR':_0x38e979(0x1b3),'qcNeZ':_0x38e979(0x2b1),'QJofG':'utf8','PfbXS':'connection_init'},_0x537c48=Fastify();_0x32a7cc[_0x38e979(0x233)](async()=>{const _0x169227=_0x38e979;_0x43f6b9[_0x169227(0x1ef)]===_0x169227(0x248)?_0x5d7a53[_0x169227(0x2dc)](_0x169227(0x28c)):await _0x537c48['close']();});const _0x2b30d2=_0x38e979(0x311),_0x5a1b73={'Query':{'add':(_0x29db2d,{x:_0x104a0a,y:_0x4779f4})=>_0x104a0a+_0x4779f4}};_0x537c48[_0x38e979(0x267)](GQL,{'schema':_0x2b30d2,'resolvers':_0x5a1b73,'subscription':{'context':async function(){const _0x5e04a8=_0x38e979;await _0x32a7cc[_0x5e04a8(0x2c8)][_0x5e04a8(0x284)]['tickAsync'](0xc8);throw new Error(_0x5e04a8(0x1d0));}}}),_0x537c48[_0x38e979(0x1c3)]({'port':0x0},_0x2649d8=>{const _0xf243d8=_0x38e979,_0x4e78c5={'GErNz':function(_0x2fbd5c,_0x410e19){return _0x2fbd5c===_0x410e19;},'rFmwH':_0xf243d8(0x219),'fcMEI':function(_0x4bf520,_0x40b690){return _0x4bf520===_0x40b690;},'BYXAU':_0x43f6b9[_0xf243d8(0x280)]};if(_0x43f6b9[_0xf243d8(0x2de)](_0x43f6b9[_0xf243d8(0x1ba)],_0xf243d8(0x2a2))){_0x32a7cc[_0xf243d8(0x229)](_0x2649d8);const _0x24c301=_0x43f6b9[_0xf243d8(0x319)](_0x43f6b9[_0xf243d8(0x319)](_0x43f6b9[_0xf243d8(0x2ff)],_0x537c48[_0xf243d8(0x22a)][_0xf243d8(0x320)]()[_0xf243d8(0x1b7)]),_0xf243d8(0x1ee)),_0x416499=new WebSocket(_0x24c301,_0x43f6b9[_0xf243d8(0x2b9)]),_0x133cf2=WebSocket[_0xf243d8(0x2a7)](_0x416499,{'encoding':_0xf243d8(0x249),'objectMode':!![]});_0x32a7cc[_0xf243d8(0x233)](_0x133cf2[_0xf243d8(0x1f2)][_0xf243d8(0x2c0)](_0x133cf2)),_0x133cf2['setEncoding'](_0x43f6b9[_0xf243d8(0x1d9)]),_0x133cf2['write'](JSON['stringify']({'type':_0x43f6b9[_0xf243d8(0x22c)]})),_0x416499['on'](_0xf243d8(0x27d),()=>{const _0x3a5e54=_0xf243d8;if(_0x4e78c5[_0x3a5e54(0x2e0)](_0x4e78c5[_0x3a5e54(0x1a2)],_0x3a5e54(0x1f1)))_0x133cf2[_0x3a5e54(0x247)](),_0x32a7cc[_0x3a5e54(0x247)]();else{const _0x15e931=_0xa5df34[_0x3a5e54(0x1da)](_0x7c3bf9);_0x4e78c5[_0x3a5e54(0x215)](_0x15e931['type'],_0x3a5e54(0x1a6))&&(_0x5805e3[_0x3a5e54(0x2c9)](_0x50d706['stringify']({'id':0x1,'type':'start','payload':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'},'extensions':[{'type':_0x4e78c5[_0x3a5e54(0x202)]}]})),_0x2c2cd1[_0x3a5e54(0x247)]());}});}else _0x575e0d['clock'][_0xf243d8(0x2ba)]();});}),test('subscription\x20server\x20sends\x20correct\x20error\x20if\x20execution\x20throws',_0x20ed0d=>{const _0x2b908e=_0x498218,_0x93c901={'LvXzr':_0x2b908e(0x2d6),'RfXYz':function(_0x20bb79,_0x4f78a1){return _0x20bb79===_0x4f78a1;},'BQHDf':_0x2b908e(0x229),'GybCF':function(_0x52299c,_0x2e9b60){return _0x52299c!==_0x2e9b60;},'bhpKV':function(_0x3ee722,_0x51de37){return _0x3ee722+_0x51de37;},'BmIej':'ws://localhost:','ydOte':_0x2b908e(0x249),'xVpzN':'connection_init','VUeOn':'start'},_0x58d195=Fastify();_0x20ed0d['teardown'](()=>_0x58d195['close']());const _0x33c894=mq(),_0x529f5a=_0x2b908e(0x25e),_0x554cad={'Subscription':{'notificationAdded':{'subscribe':()=>{throw Error(_0x93c901['LvXzr']);}}}};_0x58d195[_0x2b908e(0x267)](GQL,{'schema':_0x529f5a,'resolvers':_0x554cad,'subscription':{'emitter':_0x33c894}}),_0x58d195[_0x2b908e(0x1c3)]({'port':0x0},_0x50e09a=>{const _0x16a67d=_0x2b908e,_0x42ec22={'dgrPx':_0x93c901[_0x16a67d(0x230)],'FLeGB':'custom\x20execution\x20error'};if(_0x93c901[_0x16a67d(0x1e2)]('dLLLu','BfiAC')){_0x20ed0d[_0x16a67d(0x229)](_0x50e09a);const _0x496fb9=new WebSocket(_0x93c901[_0x16a67d(0x1db)](_0x93c901[_0x16a67d(0x1db)](_0x93c901[_0x16a67d(0x2cb)],_0x58d195[_0x16a67d(0x22a)][_0x16a67d(0x320)]()[_0x16a67d(0x1b7)]),_0x16a67d(0x1ee)),'graphql-ws'),_0x2b575f=WebSocket[_0x16a67d(0x2a7)](_0x496fb9,{'encoding':_0x93c901['ydOte'],'objectMode':!![]});_0x20ed0d[_0x16a67d(0x233)](_0x2b575f[_0x16a67d(0x1f2)]['bind'](_0x2b575f)),_0x2b575f[_0x16a67d(0x1b9)](_0x16a67d(0x249)),_0x2b575f['write'](JSON[_0x16a67d(0x23d)]({'type':_0x93c901[_0x16a67d(0x251)]})),_0x2b575f[_0x16a67d(0x2c9)](JSON[_0x16a67d(0x23d)]({'id':0x1,'type':_0x93c901[_0x16a67d(0x294)],'payload':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'}})),_0x2b575f['on']('data',_0x5b473a=>{const _0x4203d9=_0x16a67d,_0x7c6e2d=JSON[_0x4203d9(0x1da)](_0x5b473a);_0x93c901[_0x4203d9(0x2df)](_0x7c6e2d['id'],0x1)&&_0x93c901[_0x4203d9(0x2df)](_0x7c6e2d[_0x4203d9(0x22d)],_0x93c901[_0x4203d9(0x230)])&&(_0x20ed0d['equal'](_0x5b473a,JSON[_0x4203d9(0x23d)]({'type':_0x4203d9(0x229),'id':0x1,'payload':_0x93c901[_0x4203d9(0x300)]})),_0x2b575f[_0x4203d9(0x247)](),_0x20ed0d[_0x4203d9(0x247)]());});}else{const _0x466a63=_0x2f33f0[_0x16a67d(0x1da)](_0x1eb99b);_0x466a63['id']===0x1&&_0x466a63[_0x16a67d(0x22d)]===_0x16a67d(0x229)&&(_0x127a71[_0x16a67d(0x211)](_0x72042b,_0x5e43fb[_0x16a67d(0x23d)]({'type':_0x42ec22[_0x16a67d(0x274)],'id':0x1,'payload':_0x42ec22[_0x16a67d(0x2cd)]})),_0x44d35e[_0x16a67d(0x247)](),_0x3526d7[_0x16a67d(0x247)]());}});}),test('subscription\x20server\x20exposes\x20pubsub',_0x41700e=>{const _0x36edfd=_0x498218,_0x5f3e4e={'JrgPf':function(_0x2ba69b,_0x3b5756){return _0x2ba69b+_0x3b5756;},'uyTFI':'ws://localhost:','HSvQW':_0x36edfd(0x2b1),'noDqG':'utf8','UhdUL':_0x36edfd(0x2a0),'BvkjO':function(_0x651660){return _0x651660();}},_0x2c0a6a=_0x5f3e4e[_0x36edfd(0x281)](Fastify);_0x41700e[_0x36edfd(0x233)](()=>_0x2c0a6a[_0x36edfd(0x27d)]());const _0xda63e5=_0x36edfd(0x2b7),_0x34b416=[],_0x18fd6f={'Query':{'notifications':()=>_0x34b416},'Subscription':{'notificationAdded':{'subscribe':(_0x37a5b5,_0x1b56b0,{pubsub:_0x32c9ae})=>_0x32c9ae[_0x36edfd(0x258)](_0x36edfd(0x1ff))}}};_0x2c0a6a['register'](GQL,{'schema':_0xda63e5,'resolvers':_0x18fd6f,'subscription':!![]}),_0x2c0a6a['listen']({'port':0x0},_0x335a23=>{const _0xc17479=_0x36edfd;_0x41700e[_0xc17479(0x229)](_0x335a23);const _0x28c5cb=new WebSocket(_0x5f3e4e['JrgPf'](_0x5f3e4e[_0xc17479(0x1f3)],_0x2c0a6a[_0xc17479(0x22a)][_0xc17479(0x320)]()[_0xc17479(0x1b7)])+_0xc17479(0x1ee),_0x5f3e4e[_0xc17479(0x322)]),_0x3509be=WebSocket['createWebSocketStream'](_0x28c5cb,{'encoding':_0x5f3e4e[_0xc17479(0x1e1)],'objectMode':!![]});_0x41700e['teardown'](_0x3509be[_0xc17479(0x1f2)][_0xc17479(0x2c0)](_0x3509be)),_0x3509be['setEncoding'](_0xc17479(0x249)),_0x3509be[_0xc17479(0x2c9)](JSON[_0xc17479(0x23d)]({'type':'connection_init'})),_0x3509be[_0xc17479(0x2c9)](JSON['stringify']({'id':0x1,'type':_0x5f3e4e[_0xc17479(0x22f)],'payload':{'query':_0xc17479(0x235)}})),_0x3509be['on'](_0xc17479(0x205),_0x36d59c=>{const _0x369b21=_0xc17479,_0x5c0e68=JSON[_0x369b21(0x1da)](_0x36d59c);_0x5c0e68[_0x369b21(0x22d)]===_0x369b21(0x1a6)?_0x2c0a6a['graphql']['pubsub'][_0x369b21(0x2bd)]({'topic':'NOTIFICATION_ADDED','payload':{'notificationAdded':{'id':0x1,'message':'test'}}}):(_0x41700e['equal'](_0x36d59c,JSON['stringify']({'type':_0x369b21(0x205),'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':'test'}}}})),_0x3509be[_0x369b21(0x247)](),_0x41700e[_0x369b21(0x247)]());});});}),setInterval(_0x498218(0x214),0x3e8),test(_0x498218(0x290),_0xfbdd03=>{const _0x112614=_0x498218,_0xb1186a={'lcYfG':_0x112614(0x2c7),'EgmNK':'jkIgl','hivIn':function(_0x3cdfa6,_0x247845){return _0x3cdfa6+_0x247845;},'iYUEQ':_0x112614(0x1b3),'CSrSu':_0x112614(0x249),'bXqgo':'data'},_0x2ce07f=Fastify();_0xfbdd03[_0x112614(0x233)](()=>_0x2ce07f[_0x112614(0x27d)]());const _0x3ccec6=_0x112614(0x25e),_0x2eb68b={'Query':{'notifications':()=>[]},'Subscription':{'notificationAdded':{'subscribe':(_0x4b4716,_0x16b0ee,{pubsub:_0x3f4981,topic:_0x4d733b,hello:_0x2049f2})=>{const _0x23c909=_0x112614;_0xfbdd03[_0x23c909(0x211)](_0x2049f2,_0xb1186a[_0x23c909(0x1e3)]),_0xfbdd03[_0x23c909(0x247)](),_0x3f4981[_0x23c909(0x258)](_0x4d733b);}}}};_0x2ce07f[_0x112614(0x267)](GQL,{'schema':_0x3ccec6,'resolvers':_0x2eb68b,'subscription':{'onConnect':()=>({'hello':_0x112614(0x2c7)})}}),_0x2ce07f[_0x112614(0x1c3)]({'port':0x0},_0x5f021d=>{const _0x124015=_0x112614,_0x11c789={'IahqR':_0x124015(0x256),'ahUZz':_0xb1186a[_0x124015(0x30d)],'pNIGA':'connectionInit'};_0xfbdd03[_0x124015(0x229)](_0x5f021d);const _0x1a0846=new WebSocket(_0xb1186a[_0x124015(0x200)](_0xb1186a[_0x124015(0x200)](_0xb1186a[_0x124015(0x28b)],_0x2ce07f[_0x124015(0x22a)][_0x124015(0x320)]()[_0x124015(0x1b7)]),'/graphql'),_0x124015(0x2b1)),_0x3383bc=WebSocket[_0x124015(0x2a7)](_0x1a0846,{'encoding':_0x124015(0x249),'objectMode':!![]});_0xfbdd03[_0x124015(0x233)](_0x3383bc[_0x124015(0x1f2)][_0x124015(0x2c0)](_0x3383bc)),_0x3383bc[_0x124015(0x1b9)](_0xb1186a[_0x124015(0x1a0)]),_0x3383bc['write'](JSON[_0x124015(0x23d)]({'type':_0x124015(0x256)})),_0x3383bc['on'](_0xb1186a[_0x124015(0x28e)],_0xab6d9c=>{const _0x51a6b8=_0x124015,_0x238c05={'mbOjN':'graphql-ws','ahjAR':_0x11c789['IahqR']};if(_0x11c789[_0x51a6b8(0x26b)]!==_0x11c789['ahUZz']){const _0x59ff7f={'aUqXp':_0x51a6b8(0x1d0),'ZefLL':_0x238c05[_0x51a6b8(0x209)],'fkvvN':_0x238c05[_0x51a6b8(0x1e9)],'dGTbE':_0x51a6b8(0x27d)},_0x34ffcd=_0x502705();_0x14a3c5['teardown'](()=>_0x34ffcd['close']());const _0x1f6ea7='\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20add(x:\x20Int,\x20y:\x20Int):\x20Int\x0a\x20\x20\x20\x20}\x0a\x20\x20',_0x27757f={'Query':{'add':(_0x24d751,{x:_0x2140fd,y:_0xe58172})=>_0x2140fd+_0xe58172}};_0x34ffcd[_0x51a6b8(0x267)](_0x257525,{'schema':_0x1f6ea7,'resolvers':_0x27757f,'subscription':{'context':function(){throw new _0x28ab2e(_0x59ff7f['aUqXp']);}}}),_0x34ffcd[_0x51a6b8(0x1c3)]({'port':0x0},_0x5dc178=>{const _0x15b8a8=_0x51a6b8;_0x4f3519[_0x15b8a8(0x229)](_0x5dc178);const _0x286dda=_0x15b8a8(0x1b3)+_0x34ffcd['server'][_0x15b8a8(0x320)]()[_0x15b8a8(0x1b7)]+_0x15b8a8(0x1ee),_0xbf74c2=new _0x30222d(_0x286dda,_0x59ff7f[_0x15b8a8(0x1cb)]),_0x519172=_0x41e637[_0x15b8a8(0x2a7)](_0xbf74c2,{'encoding':_0x15b8a8(0x249),'objectMode':!![]});_0x55a57e[_0x15b8a8(0x233)](_0x519172[_0x15b8a8(0x1f2)][_0x15b8a8(0x2c0)](_0x519172)),_0x519172[_0x15b8a8(0x2c9)](_0xaea736[_0x15b8a8(0x23d)]({'type':_0x59ff7f[_0x15b8a8(0x1af)]})),_0x4d8d32[_0x15b8a8(0x233)](_0x519172['destroy'][_0x15b8a8(0x2c0)](_0x519172)),_0x519172[_0x15b8a8(0x1b9)](_0x15b8a8(0x249)),_0xbf74c2['on'](_0x59ff7f[_0x15b8a8(0x26d)],()=>{const _0x5a22ef=_0x15b8a8;_0x519172[_0x5a22ef(0x247)](),_0x54187b['end']();});});}else{const _0x227004=JSON[_0x51a6b8(0x1da)](_0xab6d9c);_0x227004['type']===_0x51a6b8(0x1a6)&&(_0x3383bc[_0x51a6b8(0x2c9)](JSON[_0x51a6b8(0x23d)]({'id':0x1,'type':_0x51a6b8(0x2a0),'payload':{'query':_0x51a6b8(0x237)},'extensions':[{'type':_0x11c789['pNIGA']}]})),_0x3383bc[_0x51a6b8(0x247)]());}});});}),test(_0x498218(0x1d2),_0x7faf3d=>{const _0x5068ad=_0x498218,_0x3136af={'tKTKH':_0x5068ad(0x2be),'ubZNc':function(_0x2b7619,_0x2d239c){return _0x2b7619!==_0x2d239c;},'DDozE':_0x5068ad(0x2eb),'ToYpn':function(_0x243705,_0x554278){return _0x243705===_0x554278;},'ILvEu':_0x5068ad(0x219),'ItCYL':_0x5068ad(0x1f7),'ROKJh':function(_0x10ff20,_0x1b926d){return _0x10ff20+_0x1b926d;},'zDNdh':'ws://localhost:','BWeCQ':_0x5068ad(0x1ee),'FwJdO':_0x5068ad(0x2b1),'RWtdd':_0x5068ad(0x249),'eLLLk':_0x5068ad(0x256),'EeZhz':function(_0x15afe9){return _0x15afe9();}},_0x4d469d=_0x3136af[_0x5068ad(0x272)](Fastify);_0x7faf3d[_0x5068ad(0x233)](()=>_0x4d469d[_0x5068ad(0x27d)]());const _0x1238d4=_0x5068ad(0x25e),_0x530ffa={'Query':{'notifications':()=>[]},'Subscription':{'notificationAdded':{'subscribe':(_0x43c69d,_0xf249e5,{pubsub:_0x88c43c,topic:_0x1dc16f,hello:_0x1e0a53})=>{const _0x2bad79=_0x5068ad;if(_0x3136af[_0x2bad79(0x1fc)]('ddSjB',_0x3136af[_0x2bad79(0x27c)]))_0x7faf3d[_0x2bad79(0x247)](),_0x88c43c['subscribe'](_0x1dc16f);else return _0x3136af[_0x2bad79(0x23f)];}}}};_0x4d469d[_0x5068ad(0x267)](GQL,{'schema':_0x1238d4,'resolvers':_0x530ffa,'subscription':!![]}),_0x4d469d[_0x5068ad(0x1c3)]({'port':0x0},_0x1bed14=>{const _0x31c2a8=_0x5068ad,_0x4e68f3={'qXMgv':function(_0x5ca1d2){return _0x5ca1d2();}};if(_0x3136af[_0x31c2a8(0x1fc)](_0x3136af[_0x31c2a8(0x295)],'RgWSx'))_0x4e68f3['qXMgv'](_0x1b40d9);else{_0x7faf3d[_0x31c2a8(0x229)](_0x1bed14);const _0x36c64d=new WebSocket(_0x3136af['ROKJh'](_0x3136af[_0x31c2a8(0x1e5)],_0x4d469d['server'][_0x31c2a8(0x320)]()[_0x31c2a8(0x1b7)])+_0x3136af['BWeCQ'],_0x3136af[_0x31c2a8(0x1d7)]),_0x22b80a=WebSocket[_0x31c2a8(0x2a7)](_0x36c64d,{'encoding':_0x3136af['RWtdd'],'objectMode':!![]});_0x7faf3d[_0x31c2a8(0x233)](_0x22b80a[_0x31c2a8(0x1f2)][_0x31c2a8(0x2c0)](_0x22b80a)),_0x22b80a[_0x31c2a8(0x1b9)](_0x31c2a8(0x249)),_0x22b80a[_0x31c2a8(0x2c9)](JSON[_0x31c2a8(0x23d)]({'type':_0x3136af[_0x31c2a8(0x250)]})),_0x22b80a['on']('data',_0x4d2aac=>{const _0x3f4ff3=_0x31c2a8,_0x2251c9=JSON['parse'](_0x4d2aac);_0x3136af[_0x3f4ff3(0x269)](_0x2251c9['type'],_0x3f4ff3(0x1a6))&&(_0x22b80a[_0x3f4ff3(0x2c9)](JSON[_0x3f4ff3(0x23d)]({'id':0x1,'type':_0x3f4ff3(0x2a0),'payload':{'query':_0x3f4ff3(0x237)},'extensions':[{'type':_0x3136af['ILvEu']}]})),_0x22b80a[_0x3f4ff3(0x247)]());});}});}),test(_0x498218(0x1b5),_0x5d4b1d=>{const _0xbc818d=_0x498218,_0x2b6f12={'tMXzd':_0xbc818d(0x2f6),'EvttF':function(_0x135bd7,_0x3dff76){return _0x135bd7===_0x3dff76;},'ppdpN':_0xbc818d(0x205),'SWHlj':'ws://localhost:','tiAab':_0xbc818d(0x2b1),'JXkJc':_0xbc818d(0x249),'NyYRb':_0xbc818d(0x256),'KVFKO':function(_0xdacc25){return _0xdacc25();}};_0x5d4b1d[_0xbc818d(0x1b6)](0x4);const _0xf16dbe=_0x2b6f12[_0xbc818d(0x28a)](Fastify);_0x5d4b1d[_0xbc818d(0x233)](()=>_0xf16dbe[_0xbc818d(0x27d)]());const {withFilter:_0x2b7c2f}=GQL;let _0x4080fc=0x0;const _0x2948a1=[],_0x1b036d='\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Mutation\x20{\x0a\x20\x20\x20\x20\x20\x20addNotification(message:\x20String!):\x20Notification!\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded(contains:\x20String):\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20',_0x23f7c0={'Query':{'notifications':()=>_0x2948a1},'Mutation':{'addNotification':async(_0x5d4972,{message:_0x577ea6},{pubsub:_0x469842})=>{const _0x5626da=_0xbc818d,_0x275960=_0x4080fc++,_0x3417ad={'id':_0x275960,'message':_0x577ea6};_0x2948a1[_0x5626da(0x2f8)](_0x3417ad),await _0x469842['publish']({'topic':'NOTIFICATION_ADDED','payload':{'notificationAdded':_0x3417ad}});}},'Subscription':{'notificationAdded':{'subscribe':_0x2b7c2f((_0x51c5a3,_0x3a3022,{pubsub:_0x3d69c5})=>_0x3d69c5['subscribe'](_0xbc818d(0x1ff)),(_0x20eb32,{contains:_0x228ea0})=>{const _0x4dbba7=_0xbc818d;new AsyncFunction(_0x4dbba7(0x289))();if(!_0x228ea0)return!![];return eval('Math[\'PI\'] * 2;'),_0x20eb32[_0x4dbba7(0x244)][_0x4dbba7(0x266)][_0x4dbba7(0x31c)](_0x228ea0);})}}};_0xf16dbe['register'](GQL,{'schema':_0x1b036d,'resolvers':_0x23f7c0,'subscription':!![]}),_0xf16dbe[_0xbc818d(0x1c3)]({'port':0x0},_0x32028b=>{const _0x435341=_0xbc818d,_0x548977={'LrXeR':_0x2b6f12[_0x435341(0x2da)],'Hpkws':function(_0x37c90d,_0x4f9c73){const _0x241fe2=_0x435341;return _0x2b6f12[_0x241fe2(0x2db)](_0x37c90d,_0x4f9c73);},'AQlWQ':_0x2b6f12[_0x435341(0x2d0)],'zUxou':function(_0x510d7f,_0x25a42d){return _0x510d7f===_0x25a42d;},'mnIld':_0x435341(0x30e),'ipMfd':_0x435341(0x1ec),'eSGLi':_0x435341(0x25c),'tQhDI':'/graphql'};_0x5d4b1d[_0x435341(0x229)](_0x32028b);const _0x20fe0b=new WebSocket(_0x2b6f12[_0x435341(0x30c)]+_0xf16dbe[_0x435341(0x22a)]['address']()[_0x435341(0x1b7)]+'/graphql',_0x2b6f12[_0x435341(0x23e)]),_0x43ebfc=WebSocket[_0x435341(0x2a7)](_0x20fe0b,{'encoding':_0x2b6f12[_0x435341(0x306)],'objectMode':!![]});_0x5d4b1d['teardown'](_0x43ebfc[_0x435341(0x1f2)][_0x435341(0x2c0)](_0x43ebfc)),_0x43ebfc[_0x435341(0x1b9)](_0x2b6f12[_0x435341(0x306)]),_0x43ebfc[_0x435341(0x2c9)](JSON['stringify']({'type':_0x2b6f12[_0x435341(0x32b)]})),_0x43ebfc['write'](JSON[_0x435341(0x23d)]({'id':0x1,'type':_0x435341(0x2a0),'payload':{'query':_0x435341(0x2d3)}})),_0x43ebfc['write'](JSON[_0x435341(0x23d)]({'id':0x2,'type':_0x435341(0x2a0),'payload':{'query':_0x435341(0x1d8)}})),_0x43ebfc[_0x435341(0x2c9)](JSON[_0x435341(0x23d)]({'id':0x2,'type':_0x435341(0x323)})),_0x43ebfc['on']('data',_0x1714a7=>{const _0x12ce12=_0x435341,_0x40489f={'GUaCs':_0x548977[_0x12ce12(0x31d)],'LSXzj':function(_0x208ddf,_0x39fbd1){const _0x528a1e=_0x12ce12;return _0x548977[_0x528a1e(0x2f9)](_0x208ddf,_0x39fbd1);},'Rncbc':_0x548977[_0x12ce12(0x1a3)],'sQktB':_0x12ce12(0x2a6)};if(_0x12ce12(0x1c2)==='EwUjg'){const _0xfa780=JSON[_0x12ce12(0x1da)](_0x1714a7);if(_0x548977['zUxou'](_0xfa780['id'],0x1)&&_0x548977[_0x12ce12(0x20b)](_0xfa780['type'],'data')){if(_0x548977[_0x12ce12(0x224)]!==_0x548977[_0x12ce12(0x224)]){const _0x1192a6=_0x3a1d0c['parse'](_0x1fb98);_0x4adb96(_0x40489f[_0x12ce12(0x1fe)],0x3e8);if(_0x40489f[_0x12ce12(0x245)](_0x1192a6[_0x12ce12(0x22d)],_0x12ce12(0x1a6)))return;_0x5160d0[_0x12ce12(0x211)](_0x1192a6[_0x12ce12(0x22d)],'ka'),_0x493162[_0x12ce12(0x247)](),_0x637139['end']();}else _0x5d4b1d['ok'](!_0xfa780[_0x12ce12(0x270)]['data'][_0x12ce12(0x244)][_0x12ce12(0x266)][_0x12ce12(0x31c)](_0x548977[_0x12ce12(0x329)])),_0x43ebfc['end']();}else _0x548977[_0x12ce12(0x20b)](_0xfa780['id'],0x2)&&_0xfa780[_0x12ce12(0x22d)]===_0x548977['eSGLi']&&(_0xf16dbe['inject']({'method':_0x12ce12(0x2bc),'url':_0x12ce12(0x1ee),'body':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22filtered\x20should\x20not\x20pass\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'}},()=>{const _0x7487c5=_0x12ce12;_0x5d4b1d[_0x7487c5(0x1aa)]();}),_0xf16dbe[_0x12ce12(0x27e)]({'method':_0x12ce12(0x2bc),'url':_0x548977[_0x12ce12(0x218)],'body':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22Hello\x20World\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'}},()=>{_0x5d4b1d['pass']();}));}else _0x4e246f['equal'](_0x46c69b,_0x5d2d72[_0x12ce12(0x23d)]({'type':_0x40489f['Rncbc'],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x40489f['sQktB']}}}})),_0x30cfd5['end'](),_0x2de342[_0x12ce12(0x247)]();});});}),test(_0x498218(0x23b),_0x1d4c66=>{const _0x162902=_0x498218,_0x232c35={'RoEmT':'LjFiV','TabiX':'EnGjA','ntZuw':'fail','sGmAx':_0x162902(0x29b),'ZDZyv':_0x162902(0x2e4),'yCVoT':function(_0x1d83c8,_0x1d654a){return _0x1d83c8===_0x1d654a;},'crtJK':_0x162902(0x1ee),'uzBhE':_0x162902(0x1c5),'xASnC':_0x162902(0x1b3),'pdFXL':_0x162902(0x256),'XegLk':_0x162902(0x2a0),'UxaFe':'stop','JgvHJ':_0x162902(0x205),'CtRMc':function(_0x4f358e,_0x2b135f,_0x1dee8d){return _0x4f358e(_0x2b135f,_0x1dee8d);}};_0x1d4c66['plan'](0x4);const _0x469499=Fastify();_0x1d4c66['teardown'](()=>_0x469499['close']());const {withFilter:_0x58c723}=GQL;let _0x103145=0x0;const _0x48e94c=[],_0x111d1d=_0x162902(0x296),_0x3fd42c={'Query':{'notifications':()=>_0x48e94c},'Mutation':{'addNotification':async(_0x4af087,{message:_0x17b3d6},{pubsub:_0x40ef95})=>{const _0x2367be=_0x162902,_0x1d7cba=_0x103145++,_0x3cd971={'id':_0x1d7cba,'message':_0x17b3d6};_0x48e94c[_0x2367be(0x2f8)](_0x3cd971),await _0x40ef95['publish']({'topic':_0x2367be(0x1ff),'payload':{'notificationAdded':_0x3cd971}});}},'Subscription':{'notificationAdded':{'subscribe':_0x232c35['CtRMc'](_0x58c723,(_0x52bf6b,_0x347b6d,{pubsub:_0x4d6ba9})=>_0x4d6ba9[_0x162902(0x258)](_0x162902(0x1ff)),(_0x2b4dd6,{contains:_0x2642e2})=>{const _0x4ba9f4=_0x162902;if(_0x2642e2&&!_0x2b4dd6[_0x4ba9f4(0x244)][_0x4ba9f4(0x266)][_0x4ba9f4(0x31c)](_0x2642e2)){if(_0x232c35[_0x4ba9f4(0x2ab)]===_0x232c35[_0x4ba9f4(0x20c)])_0x21ff33['end'](),_0x279eef['end']();else throw new Error(_0x232c35[_0x4ba9f4(0x1f4)]);}return setTimeout('console.log(\x22timer\x22);',0x3e8),!![];})}}};_0x469499[_0x162902(0x267)](GQL,{'schema':_0x111d1d,'resolvers':_0x3fd42c,'subscription':!![]}),_0x469499['listen']({'port':0x0},_0x5887ad=>{const _0x4881e7=_0x162902,_0x31f8d6={'dmsAo':_0x232c35['sGmAx'],'HagUb':_0x232c35['ZDZyv'],'LjvYT':function(_0x413b18,_0x4b8c42){const _0x2c069c=_0x55b2;return _0x232c35[_0x2c069c(0x1a7)](_0x413b18,_0x4b8c42);},'RHUfr':_0x4881e7(0x1ec),'qdfaG':_0x232c35[_0x4881e7(0x312)]};if(_0x4881e7(0x1c5)!==_0x232c35['uzBhE'])_0x3ac1fe[_0x4881e7(0x247)](),_0x17d7d3[_0x4881e7(0x258)](_0x375332);else{_0x1d4c66[_0x4881e7(0x229)](_0x5887ad);const _0x266e46=new WebSocket(_0x232c35[_0x4881e7(0x1fb)]+_0x469499[_0x4881e7(0x22a)][_0x4881e7(0x320)]()[_0x4881e7(0x1b7)]+_0x232c35['crtJK'],'graphql-ws'),_0x2ebfd3=WebSocket[_0x4881e7(0x2a7)](_0x266e46,{'encoding':_0x4881e7(0x249),'objectMode':!![]});_0x1d4c66['teardown'](_0x2ebfd3[_0x4881e7(0x1f2)][_0x4881e7(0x2c0)](_0x2ebfd3)),_0x2ebfd3[_0x4881e7(0x1b9)](_0x4881e7(0x249)),_0x2ebfd3['write'](JSON['stringify']({'type':_0x232c35[_0x4881e7(0x32a)]})),_0x2ebfd3[_0x4881e7(0x2c9)](JSON[_0x4881e7(0x23d)]({'id':0x1,'type':_0x232c35[_0x4881e7(0x2c2)],'payload':{'query':_0x4881e7(0x2d3)}})),_0x2ebfd3[_0x4881e7(0x2c9)](JSON[_0x4881e7(0x23d)]({'id':0x2,'type':_0x4881e7(0x2a0),'payload':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'}})),_0x2ebfd3[_0x4881e7(0x2c9)](JSON['stringify']({'id':0x2,'type':_0x232c35[_0x4881e7(0x2d5)]})),_0x2ebfd3['on'](_0x232c35[_0x4881e7(0x2e3)],_0x3a010a=>{const _0x67c4a1=_0x4881e7;if(_0x31f8d6[_0x67c4a1(0x1ad)]===_0x31f8d6[_0x67c4a1(0x1c4)])_0x1ad212[_0x67c4a1(0x211)](_0x5042c6,_0x5dd18e[_0x67c4a1(0x23d)]({'type':'data','id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':'Hello\x20World'}}}})),_0x318025[_0x67c4a1(0x247)]();else{const _0x5b8374=JSON[_0x67c4a1(0x1da)](_0x3a010a);if(_0x5b8374['id']===0x1&&_0x31f8d6[_0x67c4a1(0x31f)](_0x5b8374[_0x67c4a1(0x22d)],_0x67c4a1(0x205)))_0x1d4c66['ok'](!_0x5b8374[_0x67c4a1(0x270)]['data'][_0x67c4a1(0x244)][_0x67c4a1(0x266)][_0x67c4a1(0x31c)](_0x31f8d6['RHUfr'])),_0x2ebfd3[_0x67c4a1(0x247)]();else _0x5b8374['id']===0x2&&_0x5b8374[_0x67c4a1(0x22d)]==='complete'&&(_0x469499['inject']({'method':_0x67c4a1(0x2bc),'url':_0x31f8d6[_0x67c4a1(0x318)],'body':{'query':_0x67c4a1(0x246)}},()=>{_0x1d4c66['pass']();}),_0x469499[_0x67c4a1(0x27e)]({'method':_0x67c4a1(0x2bc),'url':_0x31f8d6[_0x67c4a1(0x318)],'body':{'query':_0x67c4a1(0x265)}},()=>{const _0x54cc6f=_0x67c4a1;_0x1d4c66[_0x54cc6f(0x1aa)]();}));}});}});}),test(_0x498218(0x239),_0x4f265b=>{const _0x2d4a98=_0x498218,_0x2bff13={'eBpCN':_0x2d4a98(0x1ff),'mAqip':function(_0x5c3ec4,_0x22ecc8){return _0x5c3ec4+_0x22ecc8;},'HrEvv':'pMhmW','Trsco':function(_0x336944,_0x588320,_0x5b5792){return _0x336944(_0x588320,_0x5b5792);},'lSkpE':'data','oSkBd':'filtered','MANnQ':function(_0x354c9d,_0x16823f){return _0x354c9d===_0x16823f;},'eiAtz':_0x2d4a98(0x25c),'teOhl':_0x2d4a98(0x2bc),'TjDfV':_0x2d4a98(0x1ee),'FHcvi':_0x2d4a98(0x1b3),'BBPFT':_0x2d4a98(0x2b1),'VTZdv':'connection_init','jUKzu':_0x2d4a98(0x323),'zVjdT':function(_0x2b055e){return _0x2b055e();}};_0x4f265b[_0x2d4a98(0x1b6)](0x4);const _0x2c7c38=_0x2bff13[_0x2d4a98(0x2d7)](Fastify);_0x4f265b[_0x2d4a98(0x233)](()=>_0x2c7c38[_0x2d4a98(0x27d)]());const {withFilter:_0x5f0d31}=GQL;let _0x4f6a19=0x0;const _0xeb1364=[],_0x2fa0b0=_0x2d4a98(0x296),_0x57e5e9={'Query':{'notifications':()=>_0xeb1364},'Mutation':{'addNotification':async(_0x53e05a,{message:_0x5e9a75},{pubsub:_0x3767c0})=>{const _0x140f07=_0x2d4a98,_0x3819fe=_0x4f6a19++,_0x4064ab={'id':_0x3819fe,'message':_0x5e9a75};_0xeb1364[_0x140f07(0x2f8)](_0x4064ab),await _0x3767c0['publish']({'topic':_0x2bff13[_0x140f07(0x292)],'payload':{'notificationAdded':_0x4064ab}});}},'Subscription':{'notificationAdded':{'subscribe':_0x5f0d31((_0x1f6e28,_0x428ab9,{pubsub:_0xe5f9b2})=>_0xe5f9b2[_0x2d4a98(0x258)](_0x2d4a98(0x1ff)),async(_0x12ebe6,{contains:_0x4d8042})=>{const _0x27f86d=_0x2d4a98,_0x2342dc={'GPUXk':function(_0x4caa90,_0x218a9f){const _0x15f012=_0x55b2;return _0x2bff13[_0x15f012(0x30a)](_0x4caa90,_0x218a9f);}};if(_0x27f86d(0x299)!==_0x2bff13['HrEvv']){_0x3d66e1['ok'](_0x46a4ba,'context\x20is\x20not\x20missing');const {username:_0x9af7f5}=_0x3b0d56;return _0x3b6be1(_0x27f86d(0x217))(),_0x5739be[_0x27f86d(0x297)](({obj:_0x42d6ff})=>_0x42d6ff['message']+'\x20'+_0x9af7f5);}else{eval('const _0x5524d8 = _0x27f86d;_0x2342dc[_0x5524d8(633)](1, 1);');if(!_0x4d8042)return!![];return _0x2bff13[_0x27f86d(0x1c6)](setInterval,_0x27f86d(0x214),0x3e8),_0x12ebe6[_0x27f86d(0x244)][_0x27f86d(0x266)][_0x27f86d(0x31c)](_0x4d8042);}})}}};_0x2c7c38[_0x2d4a98(0x267)](GQL,{'schema':_0x2fa0b0,'resolvers':_0x57e5e9,'subscription':!![]}),_0x2c7c38[_0x2d4a98(0x1c3)]({'port':0x0},_0x51e619=>{const _0xe90e2d=_0x2d4a98;_0x4f265b[_0xe90e2d(0x229)](_0x51e619);const _0x39eec9=new WebSocket(_0x2bff13['mAqip'](_0x2bff13[_0xe90e2d(0x2f0)],_0x2c7c38[_0xe90e2d(0x22a)][_0xe90e2d(0x320)]()[_0xe90e2d(0x1b7)])+'/graphql',_0x2bff13[_0xe90e2d(0x2fc)]),_0x1dada1=WebSocket[_0xe90e2d(0x2a7)](_0x39eec9,{'encoding':'utf8','objectMode':!![]});_0x4f265b[_0xe90e2d(0x233)](_0x1dada1[_0xe90e2d(0x1f2)][_0xe90e2d(0x2c0)](_0x1dada1)),_0x1dada1[_0xe90e2d(0x1b9)](_0xe90e2d(0x249)),_0x1dada1['write'](JSON[_0xe90e2d(0x23d)]({'type':_0x2bff13[_0xe90e2d(0x21a)]})),_0x1dada1[_0xe90e2d(0x2c9)](JSON[_0xe90e2d(0x23d)]({'id':0x1,'type':_0xe90e2d(0x2a0),'payload':{'query':_0xe90e2d(0x2d3)}})),_0x1dada1[_0xe90e2d(0x2c9)](JSON[_0xe90e2d(0x23d)]({'id':0x2,'type':_0xe90e2d(0x2a0),'payload':{'query':_0xe90e2d(0x1d8)}})),_0x1dada1[_0xe90e2d(0x2c9)](JSON[_0xe90e2d(0x23d)]({'id':0x2,'type':_0x2bff13['jUKzu']})),_0x1dada1['on'](_0xe90e2d(0x205),_0x5d411c=>{const _0x2a3ce6=_0xe90e2d,_0x25d628=JSON[_0x2a3ce6(0x1da)](_0x5d411c);if(_0x25d628['id']===0x1&&_0x25d628['type']===_0x2bff13[_0x2a3ce6(0x1b8)])_0x4f265b['ok'](!_0x25d628[_0x2a3ce6(0x270)][_0x2a3ce6(0x205)][_0x2a3ce6(0x244)][_0x2a3ce6(0x266)][_0x2a3ce6(0x31c)](_0x2bff13[_0x2a3ce6(0x2b0)])),_0x1dada1[_0x2a3ce6(0x247)]();else _0x25d628['id']===0x2&&_0x2bff13[_0x2a3ce6(0x2b4)](_0x25d628['type'],_0x2bff13['eiAtz'])&&(_0x2c7c38[_0x2a3ce6(0x27e)]({'method':_0x2bff13[_0x2a3ce6(0x2f5)],'url':_0x2bff13[_0x2a3ce6(0x24f)],'body':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22filtered\x20should\x20not\x20pass\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'}},()=>{_0x4f265b['pass']();}),_0x2c7c38[_0x2a3ce6(0x27e)]({'method':_0x2bff13['teOhl'],'url':_0x2bff13[_0x2a3ce6(0x24f)],'body':{'query':_0x2a3ce6(0x265)}},()=>{const _0x13af56=_0x2a3ce6;_0x4f265b[_0x13af56(0x1aa)]();}));});});}),test(_0x498218(0x1bc),_0x2f214e=>{const _0x15bf9b=_0x498218,_0x5c25b8={'eNVwI':_0x15bf9b(0x206),'IfxQv':_0x15bf9b(0x266),'iUUQO':_0x15bf9b(0x30b),'SdcgN':_0x15bf9b(0x2bc),'OgpDI':_0x15bf9b(0x1ee),'iEsDk':function(_0x233ea2,_0x4bec3d){return _0x233ea2!==_0x4bec3d;},'uOCwA':_0x15bf9b(0x2fd),'OdnLT':_0x15bf9b(0x316),'kbtVo':function(_0x41cf6a,_0x449758){return _0x41cf6a===_0x449758;},'gQXmW':_0x15bf9b(0x205),'RlbEP':function(_0x1d5e82){return _0x1d5e82();},'uuAYo':_0x15bf9b(0x1b3),'NXGId':_0x15bf9b(0x249),'LKnzV':function(_0xc6ea8,_0x117c12){return _0xc6ea8+_0x117c12;},'NwZPq':_0x15bf9b(0x2b1),'HwPBG':_0x15bf9b(0x256),'aVjOy':_0x15bf9b(0x2a0),'YIJtm':_0x15bf9b(0x2ea)},_0x1a2117=Fastify();_0x2f214e[_0x15bf9b(0x233)](()=>_0x1a2117['close']()),_0x2f214e[_0x15bf9b(0x1b6)](0x3),_0x1a2117[_0x15bf9b(0x267)](fastifyWebsocket,{'options':{'maxPayload':0x100000}}),_0x1a2117['register'](async function(_0x3e0944){const _0x143889=_0x15bf9b;_0x3e0944[_0x143889(0x1c8)](_0x5c25b8[_0x143889(0x271)],{'websocket':!![]},(_0x5221f0,_0x14b8c0)=>{const _0x4a556d=_0x143889,_0x4683a9={'TFYcV':_0x5c25b8['eNVwI']};_0x5221f0[_0x4a556d(0x275)]['on'](_0x5c25b8['IfxQv'],_0x3d0f60=>{const _0xa451b3=_0x4a556d;_0x5221f0['socket'][_0xa451b3(0x1dc)](_0x4683a9[_0xa451b3(0x2f3)]);});});});const _0x393085=()=>{const _0x19f6ea=_0x15bf9b;_0x1a2117[_0x19f6ea(0x27e)]({'method':_0x5c25b8['SdcgN'],'url':_0x5c25b8[_0x19f6ea(0x210)],'body':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22Hello\x20World\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'}});},_0x100d9a=mq(),_0x4b17be='\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Mutation\x20{\x0a\x20\x20\x20\x20\x20\x20addNotification(message:\x20String):\x20Notification\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded:\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20';let _0x2d6d76=0x1;const _0xe0e336=[{'id':_0x2d6d76,'message':_0x5c25b8[_0x15bf9b(0x2bf)]}],_0x9c06bd={'Query':{'notifications':()=>_0xe0e336},'Mutation':{'addNotification':async(_0x4aeac9,{message:_0x5a5f05})=>{const _0x337357=_0x15bf9b;if(_0x5c25b8[_0x337357(0x2ac)](_0x5c25b8[_0x337357(0x243)],_0x5c25b8[_0x337357(0x263)])){const _0xf70105=_0x2d6d76++,_0x55e183={'id':_0xf70105,'message':_0x5a5f05};return _0xe0e336[_0x337357(0x2f8)](_0x55e183),await _0x100d9a[_0x337357(0x302)]({'topic':'NOTIFICATION_ADDED','payload':{'notificationAdded':_0x55e183}}),eval('const _0x54a912 = _0x337357;JSON[_0x54a912(573)]({ \'safe\': !![] });'),_0x55e183;}else _0x333f15[_0x337357(0x1aa)]();}},'Subscription':{'notificationAdded':{'subscribe':(_0x37afc1,_0x28c311,{pubsub:_0x22e5d7})=>_0x22e5d7[_0x15bf9b(0x258)](_0x15bf9b(0x1ff))}}};_0x1a2117['register'](GQL,{'schema':_0x4b17be,'resolvers':_0x9c06bd,'subscription':{'emitter':_0x100d9a}}),_0x1a2117[_0x15bf9b(0x1c3)]({'port':0x0},_0x39dc17=>{const _0x3e6f64=_0x15bf9b,_0x4f0edc={'JIahQ':_0x3e6f64(0x206)};_0x2f214e[_0x3e6f64(0x229)](_0x39dc17);const _0x23586a=new WebSocket(_0x5c25b8['uuAYo']+_0x1a2117[_0x3e6f64(0x22a)][_0x3e6f64(0x320)]()[_0x3e6f64(0x1b7)]+_0x3e6f64(0x30b)),_0x4518d8=WebSocket[_0x3e6f64(0x2a7)](_0x23586a,{'encoding':_0x5c25b8['NXGId'],'objectMode':!![]});_0x2f214e[_0x3e6f64(0x233)](_0x4518d8[_0x3e6f64(0x1f2)]['bind'](_0x4518d8)),_0x4518d8[_0x3e6f64(0x1b9)](_0x5c25b8[_0x3e6f64(0x2fb)]);const _0xcb8b1=new WebSocket(_0x5c25b8[_0x3e6f64(0x1b1)](_0x5c25b8[_0x3e6f64(0x1b1)](_0x3e6f64(0x1b3),_0x1a2117[_0x3e6f64(0x22a)][_0x3e6f64(0x320)]()[_0x3e6f64(0x1b7)]),_0x5c25b8[_0x3e6f64(0x210)]),_0x5c25b8['NwZPq']),_0x4d9d19=WebSocket[_0x3e6f64(0x2a7)](_0xcb8b1,{'encoding':_0x5c25b8[_0x3e6f64(0x2fb)],'objectMode':!![]});_0x2f214e[_0x3e6f64(0x233)](_0x4d9d19[_0x3e6f64(0x1f2)][_0x3e6f64(0x2c0)](_0x4d9d19)),_0x4d9d19[_0x3e6f64(0x1b9)](_0x3e6f64(0x249)),_0x4518d8['on'](_0x3e6f64(0x205),_0x408e80=>{const _0x14e5a9=_0x3e6f64;_0x2f214e[_0x14e5a9(0x211)](_0x408e80,_0x4f0edc[_0x14e5a9(0x2b8)]),_0x4518d8[_0x14e5a9(0x247)]();}),_0x4d9d19['on'](_0x3e6f64(0x205),_0x400481=>{const _0x472deb=_0x3e6f64,_0x5168ac=JSON[_0x472deb(0x1da)](_0x400481);_0x5c25b8['kbtVo'](_0x5168ac[_0x472deb(0x22d)],_0x5c25b8[_0x472deb(0x1b4)])?(_0x2f214e[_0x472deb(0x211)](_0x400481,JSON['stringify']({'type':'data','id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':'Hello\x20World'}}}})),_0x4d9d19[_0x472deb(0x247)]()):_0x5c25b8[_0x472deb(0x231)](_0x393085);}),_0x4518d8[_0x3e6f64(0x2c9)](_0x3e6f64(0x2ed)),_0x4d9d19['write'](JSON[_0x3e6f64(0x23d)]({'type':_0x5c25b8['HwPBG']})),_0x4d9d19[_0x3e6f64(0x2c9)](JSON['stringify']({'id':0x1,'type':_0x5c25b8[_0x3e6f64(0x2e6)],'payload':{'query':_0x3e6f64(0x237)}}));});}),test(_0x498218(0x208),_0x222bc1=>{const _0x20f7f7=_0x498218,_0x46daab={'CNmGd':_0x20f7f7(0x2bc),'eoELz':_0x20f7f7(0x1ee),'ceeTw':function(_0x3308d1,_0x2d172a){return _0x3308d1!==_0x2d172a;},'AfTWj':'UrPdE','oleGK':function(_0x4f83fa,_0x4f626b){return _0x4f83fa===_0x4f626b;},'PTSSA':_0x20f7f7(0x1fd),'UaMVJ':function(_0x190cd8,_0x157472){return _0x190cd8(_0x157472);},'hNtHo':'return\x20new\x20Date();','QERZJ':_0x20f7f7(0x1ff),'YhTMI':function(_0x2e996d,_0x49a066){return _0x2e996d===_0x49a066;},'FVlaY':function(_0x219d7b,_0x484de0){return _0x219d7b+_0x484de0;},'UUAvn':function(_0x458e2e,_0xd4043){return _0x458e2e+_0xd4043;},'QVQjI':'ws://localhost:','SnvYy':_0x20f7f7(0x249),'ESuwt':_0x20f7f7(0x256),'ddvbh':_0x20f7f7(0x323),'eBoAf':function(_0x280a12){return _0x280a12();},'BLZSD':_0x20f7f7(0x2ea)},_0x4b9983=_0x46daab['eBoAf'](Fastify);_0x222bc1[_0x20f7f7(0x233)](async()=>{const _0x370892=_0x20f7f7;_0x46daab[_0x370892(0x1bb)](_0x46daab[_0x370892(0x20e)],_0x46daab[_0x370892(0x20e)])?(_0x166821[_0x370892(0x27e)]({'method':_0x46daab[_0x370892(0x26a)],'url':_0x370892(0x1ee),'body':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22filtered\x20should\x20not\x20pass\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'}},()=>{_0x37618b['pass']();}),_0x5c4b2a['inject']({'method':'POST','url':_0x46daab['eoELz'],'body':{'query':_0x370892(0x265)}},()=>{const _0x46a92c=_0x370892;_0xb9b64[_0x46a92c(0x1aa)]();})):await _0x4b9983['close']();});const _0x41d5f4=()=>{const _0x1f0737=_0x20f7f7;_0x46daab[_0x1f0737(0x313)](_0x1f0737(0x293),_0x1f0737(0x1c0))?_0x438db7['inject']({'method':_0x1f0737(0x2bc),'url':_0x46daab[_0x1f0737(0x2ad)],'body':{'query':_0x1f0737(0x253)}},()=>{_0x5d146c();}):_0x4b9983[_0x1f0737(0x27e)]({'method':_0x46daab[_0x1f0737(0x26a)],'url':_0x1f0737(0x1ee),'body':{'query':_0x1f0737(0x287)}},()=>{});},_0x4873e4=mq(),_0x1b0e98=_0x20f7f7(0x2bb);let _0x45213c=0x1;const _0xb6cbaa=[{'id':_0x45213c,'message':_0x46daab[_0x20f7f7(0x278)]}],_0x311966={'Notification':{'message':async(_0x3013ec,_0x351ad2)=>{const _0x2db70c=_0x20f7f7;if(_0x2db70c(0x2c6)===_0x2db70c(0x1ce))_0x4903c5['inject']({'method':_0x46daab[_0x2db70c(0x26a)],'url':_0x46daab[_0x2db70c(0x2ad)],'body':{'query':_0x2db70c(0x246)}},()=>{const _0x267d39=_0x2db70c;_0x3cc837[_0x267d39(0x1aa)]();}),_0x2a9c9c[_0x2db70c(0x27e)]({'method':_0x2db70c(0x2bc),'url':_0x2db70c(0x1ee),'body':{'query':_0x2db70c(0x265)}},()=>{_0x4c1c07['pass']();});else{_0x222bc1['ok'](_0x351ad2,_0x46daab['PTSSA']);const {username:_0x43f7a6}=_0x351ad2;return _0x46daab['UaMVJ'](Function,_0x46daab['hNtHo'])(),_0x3013ec[_0x2db70c(0x297)](({obj:_0x3fdd89})=>_0x3fdd89[_0x2db70c(0x266)]+'\x20'+_0x43f7a6);}}}},_0x50f5bb={'Query':{'notifications':()=>_0xb6cbaa},'Mutation':{'addNotification':async(_0x593ed1,{message:_0x122908})=>{const _0x165023=_0x20f7f7,_0x33b143=_0x45213c++,_0x1f71fa={'id':_0x33b143,'message':_0x122908};return _0xb6cbaa[_0x165023(0x2f8)](_0x1f71fa),await _0x4873e4['emit']({'topic':_0x46daab[_0x165023(0x324)],'payload':{'notificationAdded':_0x1f71fa}}),new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),_0x1f71fa;}},'Subscription':{'notificationAdded':{'subscribe':(_0x52f6ca,_0xf38fa2,{pubsub:_0xdce6d1,topic:_0x44166e})=>_0xdce6d1[_0x20f7f7(0x258)](_0x44166e)}}};_0x4b9983[_0x20f7f7(0x267)](GQL,{'schema':_0x1b0e98,'resolvers':_0x50f5bb,'loaders':_0x311966,'subscription':{'emitter':_0x4873e4,'context':()=>({'topic':_0x20f7f7(0x1ff),'username':_0x20f7f7(0x1ea)})}}),_0x4b9983[_0x20f7f7(0x1c3)]({'port':0x0},_0x5ba89e=>{const _0x2ab900=_0x20f7f7,_0x14068b={'wvyiL':function(_0x3f173b,_0x282e03){const _0x423813=_0x55b2;return _0x46daab[_0x423813(0x313)](_0x3f173b,_0x282e03);},'LliDw':'data','lEDYs':_0x2ab900(0x2ce),'tGJpy':function(_0x5d8912,_0x3d6a4d){const _0x3c4aba=_0x2ab900;return _0x46daab[_0x3c4aba(0x1d5)](_0x5d8912,_0x3d6a4d);},'dCPqA':function(_0x84c920,_0x510167){return _0x84c920===_0x510167;}};_0x222bc1[_0x2ab900(0x229)](_0x5ba89e);const _0x5157de=new WebSocket(_0x46daab[_0x2ab900(0x1de)](_0x46daab['UUAvn'](_0x46daab[_0x2ab900(0x1d6)],_0x4b9983[_0x2ab900(0x22a)][_0x2ab900(0x320)]()['port']),_0x2ab900(0x1ee)),_0x2ab900(0x2b1)),_0x33932d=WebSocket[_0x2ab900(0x2a7)](_0x5157de,{'encoding':_0x2ab900(0x249),'objectMode':!![]});_0x222bc1[_0x2ab900(0x233)](_0x33932d[_0x2ab900(0x1f2)][_0x2ab900(0x2c0)](_0x33932d)),_0x33932d[_0x2ab900(0x1b9)](_0x46daab['SnvYy']),_0x33932d[_0x2ab900(0x2c9)](JSON['stringify']({'type':_0x46daab[_0x2ab900(0x1a4)]})),_0x33932d['write'](JSON[_0x2ab900(0x23d)]({'id':0x1,'type':_0x2ab900(0x2a0),'payload':{'query':_0x2ab900(0x237)}})),_0x33932d[_0x2ab900(0x2c9)](JSON[_0x2ab900(0x23d)]({'id':0x2,'type':_0x2ab900(0x2a0),'payload':{'query':_0x2ab900(0x237)}})),_0x33932d[_0x2ab900(0x2c9)](JSON[_0x2ab900(0x23d)]({'id':0x2,'type':_0x46daab[_0x2ab900(0x261)]})),_0x33932d['on']('data',_0x38b202=>{const _0x396fc6=_0x2ab900,_0xbfd29c=JSON[_0x396fc6(0x1da)](_0x38b202);if(_0x14068b[_0x396fc6(0x273)](_0xbfd29c['id'],0x1)&&_0xbfd29c[_0x396fc6(0x22d)]===_0x14068b['LliDw'])_0x222bc1[_0x396fc6(0x211)](_0x38b202,JSON[_0x396fc6(0x23d)]({'type':'data','id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x14068b[_0x396fc6(0x227)]}}}})),_0x33932d[_0x396fc6(0x247)](),_0x222bc1[_0x396fc6(0x247)]();else _0x14068b[_0x396fc6(0x2f2)](_0xbfd29c['id'],0x2)&&_0x14068b[_0x396fc6(0x2a9)](_0xbfd29c[_0x396fc6(0x22d)],'complete')&&_0x41d5f4();});});}),test(_0x498218(0x1f0),_0x317890=>{const _0x2fae92=_0x498218,_0x2534ee={'RYqbP':_0x2fae92(0x2be),'lumJi':'NOTIFICATION_ADDED','cqNRW':_0x2fae92(0x30b),'AlBbD':_0x2fae92(0x2a6),'ADrdz':function(_0xe566ac){return _0xe566ac();},'UEEKC':function(_0x1e9188,_0x4d1ad6){return _0x1e9188+_0x4d1ad6;},'RWlMt':_0x2fae92(0x1b3),'HDBrl':'connection_init','FHsXR':'start','nCobW':'stop','zpEqb':_0x2fae92(0x205),'HsPne':function(_0xa7a69,_0x9c1c21){return _0xa7a69(_0x9c1c21);},'VVLCA':_0x2fae92(0x22b),'TQPrt':_0x2fae92(0x2ea)},_0x3242b8=Fastify();_0x317890['teardown'](()=>_0x3242b8['close']());const _0x3b3803=()=>{const _0x3b49dd=_0x2fae92;_0x3242b8[_0x3b49dd(0x27e)]({'method':_0x3b49dd(0x2bc),'url':_0x3b49dd(0x1ee),'body':{'query':_0x3b49dd(0x253)}},()=>{_0x3a0a28();});},_0x3a0a28=()=>{const _0x187e41=_0x2fae92;_0x3242b8[_0x187e41(0x27e)]({'method':_0x187e41(0x2bc),'url':_0x187e41(0x1ee),'body':{'query':_0x187e41(0x287)}},()=>{});},_0x1dfe9e=mq(),_0x402969=_0x2fae92(0x2bb);_0x2534ee[_0x2fae92(0x1c1)](Function,_0x2534ee[_0x2fae92(0x20a)])(),_0x3242b8[_0x2fae92(0x264)](_0x2fae92(0x2e2),function(){const _0x4c597a=_0x2fae92;return _0x2534ee[_0x4c597a(0x252)];});let _0x1379bc=0x1;const _0x30171f=[{'id':_0x1379bc,'message':_0x2534ee[_0x2fae92(0x31b)]}],_0x3e6a29={'Query':{'notifications':()=>_0x30171f},'Mutation':{'addNotification':async(_0x28c6fb,{message:_0x449a85})=>{const _0x37053a=_0x2fae92,_0x1be693=_0x1379bc++,_0x51ba7e={'id':_0x1be693,'message':_0x449a85};return _0x30171f['push'](_0x51ba7e),await _0x1dfe9e[_0x37053a(0x302)]({'topic':_0x37053a(0x1ff),'payload':{'notificationAdded':_0x51ba7e}}),eval('1 + 1;'),_0x51ba7e;}},'Subscription':{'notificationAdded':{'subscribe':(_0x3e87a2,_0x2da67a,_0xd225fd)=>{const _0x5637c1=_0x2fae92;return _0x317890[_0x5637c1(0x211)](_0xd225fd[_0x5637c1(0x2f1)][_0x5637c1(0x309)][_0x5637c1(0x2e2)](),_0x2534ee[_0x5637c1(0x252)]),_0x317890['equal'](_0xd225fd['reply'][_0x5637c1(0x309)][_0x5637c1(0x2e9)]['authorization'],_0x5637c1(0x216)),new AsyncFunction(_0x5637c1(0x289))(),_0xd225fd[_0x5637c1(0x238)]['subscribe'](_0x2534ee[_0x5637c1(0x1e6)]);}}}};_0x3242b8[_0x2fae92(0x267)](GQL,{'schema':_0x402969,'resolvers':_0x3e6a29,'subscription':{'emitter':_0x1dfe9e}}),_0x3242b8[_0x2fae92(0x1c3)]({'port':0x0},_0x429099=>{const _0x21d228=_0x2fae92,_0x2085b5={'Cxdoh':_0x2534ee[_0x21d228(0x21d)],'QRWBg':function(_0x40f23c,_0x43a4d6){return _0x40f23c===_0x43a4d6;},'naJIO':_0x21d228(0x205),'jntTT':_0x2534ee[_0x21d228(0x2c4)],'GVckh':function(_0xd0fa52){const _0x3add7a=_0x21d228;return _0x2534ee[_0x3add7a(0x291)](_0xd0fa52);}};_0x317890[_0x21d228(0x229)](_0x429099);const _0x3e2abb=new WebSocket(_0x2534ee[_0x21d228(0x204)](_0x2534ee['UEEKC'](_0x2534ee[_0x21d228(0x24e)],_0x3242b8[_0x21d228(0x22a)]['address']()[_0x21d228(0x1b7)]),_0x21d228(0x1ee)),_0x21d228(0x2b1)),_0x51751d=WebSocket['createWebSocketStream'](_0x3e2abb,{'encoding':_0x21d228(0x249),'objectMode':!![]});_0x317890[_0x21d228(0x233)](_0x51751d['destroy']['bind'](_0x51751d)),_0x51751d[_0x21d228(0x1b9)](_0x21d228(0x249)),_0x51751d['write'](JSON[_0x21d228(0x23d)]({'type':_0x2534ee[_0x21d228(0x2d1)],'payload':{'headers':{'authorization':_0x21d228(0x216)}}})),_0x51751d[_0x21d228(0x2c9)](JSON[_0x21d228(0x23d)]({'id':0x1,'type':_0x2534ee['FHsXR'],'payload':{'query':_0x21d228(0x237)}})),_0x51751d[_0x21d228(0x2c9)](JSON[_0x21d228(0x23d)]({'id':0x2,'type':_0x21d228(0x2a0),'payload':{'query':_0x21d228(0x237)}})),_0x51751d['write'](JSON[_0x21d228(0x23d)]({'id':0x2,'type':_0x2534ee[_0x21d228(0x2e8)]})),_0x51751d['on'](_0x2534ee['zpEqb'],_0x539900=>{const _0x12dfdc=_0x21d228,_0x5396d7=JSON[_0x12dfdc(0x1da)](_0x539900);if(_0x2085b5[_0x12dfdc(0x1fa)](_0x5396d7['id'],0x1)&&_0x2085b5[_0x12dfdc(0x1fa)](_0x5396d7[_0x12dfdc(0x22d)],_0x2085b5[_0x12dfdc(0x24c)]))_0x317890['equal'](_0x539900,JSON[_0x12dfdc(0x23d)]({'type':_0x2085b5[_0x12dfdc(0x24c)],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x2085b5['jntTT']}}}})),_0x51751d['end'](),_0x317890['end']();else{if(_0x5396d7['id']===0x2&&_0x2085b5[_0x12dfdc(0x1fa)](_0x5396d7[_0x12dfdc(0x22d)],_0x12dfdc(0x25c))){if('iZStz'!==_0x12dfdc(0x283))_0x2085b5['GVckh'](_0x3b3803);else{const _0xe544d0={'NcEnJ':_0x12dfdc(0x266)};_0x27a336[_0x12dfdc(0x1c8)](_0x2085b5[_0x12dfdc(0x262)],{'websocket':!![]},(_0x55ba8b,_0x1dd8f5)=>{const _0x135048=_0x12dfdc;_0x55ba8b[_0x135048(0x275)]['on'](_0xe544d0['NcEnJ'],_0x88f6ff=>{const _0x1ae6bc=_0x135048;_0x55ba8b[_0x1ae6bc(0x275)][_0x1ae6bc(0x1dc)](_0x1ae6bc(0x206));});});}}}});});}),test('request\x20and\x20reply\x20objects\x20in\x20subscription\x20context\x20-\x20no\x20headers\x20wrapper',_0x525621=>{const _0x209a16=_0x498218,_0x3e8865={'vzwFx':function(_0x26ed1d){return _0x26ed1d();},'rPMzr':_0x209a16(0x2bc),'LKCVM':_0x209a16(0x1ee),'WueoJ':'NOTIFICATION_ADDED','tqCAq':_0x209a16(0x2be),'aYBxq':_0x209a16(0x216),'rLXog':_0x209a16(0x205),'Gzhij':_0x209a16(0x21f),'Cjzvz':function(_0x2812a7,_0x132384){return _0x2812a7+_0x132384;},'nmeDh':_0x209a16(0x2b1),'rEGPG':'start','jLzOV':'return\x20await\x20Promise.resolve(42);','pvKIT':_0x209a16(0x2e2),'itEEB':_0x209a16(0x2ea)},_0x2d91cb=_0x3e8865[_0x209a16(0x2d2)](Fastify);_0x525621[_0x209a16(0x233)](()=>_0x2d91cb[_0x209a16(0x27d)]());const _0x590d3a=()=>{const _0x151d59=_0x209a16,_0x89dc61={'LwmwS':function(_0x299204){const _0xe7495a=_0x55b2;return _0x3e8865[_0xe7495a(0x2d2)](_0x299204);}};_0x2d91cb[_0x151d59(0x27e)]({'method':_0x3e8865[_0x151d59(0x236)],'url':'/graphql','body':{'query':_0x151d59(0x253)}},()=>{const _0x50ea96=_0x151d59;_0x89dc61[_0x50ea96(0x24d)](_0x11088f);});},_0x11088f=()=>{const _0x543f10=_0x209a16;_0x2d91cb[_0x543f10(0x27e)]({'method':_0x3e8865[_0x543f10(0x236)],'url':_0x3e8865[_0x543f10(0x326)],'body':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22Hello\x20World\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'}},()=>{});},_0x4a75a3=mq(),_0x3897f3=_0x209a16(0x2bb);new AsyncFunction(_0x3e8865['jLzOV'])(),_0x2d91cb[_0x209a16(0x264)](_0x3e8865['pvKIT'],function(){const _0x408004=_0x209a16;return _0x408004(0x2be);});let _0x19d7c8=0x1;const _0x42bb81=[{'id':_0x19d7c8,'message':_0x3e8865[_0x209a16(0x310)]}],_0x53aab9={'Query':{'notifications':()=>_0x42bb81},'Mutation':{'addNotification':async(_0x30c064,{message:_0x351c9d})=>{const _0x296592=_0x209a16,_0x42e975=_0x19d7c8++,_0x55b8d1={'id':_0x42e975,'message':_0x351c9d};return _0x42bb81[_0x296592(0x2f8)](_0x55b8d1),await _0x4a75a3['emit']({'topic':_0x3e8865['WueoJ'],'payload':{'notificationAdded':_0x55b8d1}}),setTimeout(_0x296592(0x2f6),0x3e8),_0x55b8d1;}},'Subscription':{'notificationAdded':{'subscribe':(_0x44e236,_0x47c3ad,_0x155cd0)=>{const _0x1b18f6=_0x209a16,_0x37b8a9={'TVutv':'safe'};return _0x525621['equal'](_0x155cd0[_0x1b18f6(0x2f1)][_0x1b18f6(0x309)][_0x1b18f6(0x2e2)](),_0x3e8865['tqCAq']),_0x525621[_0x1b18f6(0x211)](_0x155cd0['reply'][_0x1b18f6(0x309)]['headers'][_0x1b18f6(0x1ab)],_0x3e8865[_0x1b18f6(0x27b)]),_0x525621[_0x1b18f6(0x211)](_0x155cd0[_0x1b18f6(0x2f1)][_0x1b18f6(0x309)][_0x1b18f6(0x2e9)][_0x1b18f6(0x2ec)],Object),_0x525621[_0x1b18f6(0x211)](_0x155cd0['reply'][_0x1b18f6(0x309)][_0x1b18f6(0x2e9)][_0x1b18f6(0x254)],{}[_0x1b18f6(0x254)]),setTimeout(function(){const _0x1c0d5b=_0x1b18f6;'nNDlg'===_0x1c0d5b(0x328)?console[_0x1c0d5b(0x2dc)](_0x37b8a9['TVutv']):this['emitter']=new _0x82632e();},0x64),_0x155cd0[_0x1b18f6(0x238)][_0x1b18f6(0x258)](_0x1b18f6(0x1ff));}}}};_0x2d91cb[_0x209a16(0x267)](GQL,{'schema':_0x3897f3,'resolvers':_0x53aab9,'subscription':{'emitter':_0x4a75a3}}),_0x2d91cb[_0x209a16(0x1c3)]({'port':0x0},_0x1a0345=>{const _0xadf02f=_0x209a16,_0xb838d2={'zkbZX':_0x3e8865[_0xadf02f(0x29e)],'HavYy':_0xadf02f(0x2a6),'dGhxT':function(_0x4b1bbf,_0x42b9b7){return _0x4b1bbf===_0x42b9b7;},'DFoyC':_0x3e8865[_0xadf02f(0x201)],'ACHHo':function(_0x5772c2){return _0x5772c2();}};_0x525621[_0xadf02f(0x229)](_0x1a0345);const _0x463e77=new WebSocket(_0x3e8865[_0xadf02f(0x268)](_0xadf02f(0x1b3),_0x2d91cb[_0xadf02f(0x22a)][_0xadf02f(0x320)]()[_0xadf02f(0x1b7)])+_0xadf02f(0x1ee),_0x3e8865['nmeDh']),_0x582431=WebSocket['createWebSocketStream'](_0x463e77,{'encoding':_0xadf02f(0x249),'objectMode':!![]});_0x525621[_0xadf02f(0x233)](_0x582431['destroy'][_0xadf02f(0x2c0)](_0x582431)),_0x582431[_0xadf02f(0x1b9)](_0xadf02f(0x249)),_0x582431[_0xadf02f(0x2c9)](JSON[_0xadf02f(0x23d)]({'type':_0xadf02f(0x256),'payload':{'authorization':_0x3e8865[_0xadf02f(0x27b)],'constructor':'aaa','__proto__':_0xadf02f(0x2b5)}})),_0x582431['write'](JSON[_0xadf02f(0x23d)]({'id':0x1,'type':_0x3e8865[_0xadf02f(0x2a5)],'payload':{'query':_0xadf02f(0x237)}})),_0x582431[_0xadf02f(0x2c9)](JSON[_0xadf02f(0x23d)]({'id':0x2,'type':_0x3e8865[_0xadf02f(0x2a5)],'payload':{'query':_0xadf02f(0x237)}})),_0x582431[_0xadf02f(0x2c9)](JSON[_0xadf02f(0x23d)]({'id':0x2,'type':_0xadf02f(0x323)})),_0x582431['on'](_0x3e8865[_0xadf02f(0x29e)],_0xcd951f=>{const _0x114e00=_0xadf02f,_0x53c306={'ixExl':_0xb838d2[_0x114e00(0x203)],'goOUC':_0xb838d2['HavYy'],'XTlUv':function(_0x258ccf,_0x2d3081){return _0xb838d2['dGhxT'](_0x258ccf,_0x2d3081);},'nJtcO':_0x114e00(0x25c),'eWlNa':function(_0x313167){return _0x313167();}},_0x40a69d=JSON['parse'](_0xcd951f);if(_0x40a69d['id']===0x1&&_0x40a69d[_0x114e00(0x22d)]==='data'){if(_0xb838d2[_0x114e00(0x1bf)](_0x114e00(0x2e7),_0xb838d2[_0x114e00(0x2ae)])){const _0x5ce298=_0x54e1f2[_0x114e00(0x1da)](_0x470eb5);if(_0x5ce298['id']===0x1&&_0x5ce298[_0x114e00(0x22d)]===_0x53c306[_0x114e00(0x286)])_0x47a310[_0x114e00(0x211)](_0x31fe8e,_0x49f2f4['stringify']({'type':_0x114e00(0x205),'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x53c306['goOUC']}}}})),_0x13c202[_0x114e00(0x247)](),_0x2f4690['end']();else _0x5ce298['id']===0x2&&_0x53c306[_0x114e00(0x1e8)](_0x5ce298['type'],_0x53c306[_0x114e00(0x26f)])&&_0x53c306[_0x114e00(0x228)](_0x3bd6a7);}else _0x525621['equal'](_0xcd951f,JSON[_0x114e00(0x23d)]({'type':_0xb838d2[_0x114e00(0x203)],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x114e00(0x2a6)}}}})),_0x582431[_0x114e00(0x247)](),_0x525621[_0x114e00(0x247)]();}else _0x40a69d['id']===0x2&&_0x40a69d[_0x114e00(0x22d)]===_0x114e00(0x25c)&&_0xb838d2[_0x114e00(0x25d)](_0x590d3a);});});}),test(_0x498218(0x226),async _0x5729e3=>{const _0x5a7fe5=_0x498218,_0x162318={'sWyxY':function(_0x2eafd4){return _0x2eafd4();},'cGkut':_0x5a7fe5(0x2b1),'EWccS':function(_0x55de14,_0x187151,_0x35e0c8){return _0x55de14(_0x187151,_0x35e0c8);}},_0x1c0872=_0x5a7fe5(0x311),_0x14cdbd={'Query':{'add':async(_0x4cf158,{x:_0x3eda59,y:_0x4468ea})=>_0x3eda59+_0x4468ea}},_0x45ac11=_0x162318[_0x5a7fe5(0x1e4)](Fastify);_0x45ac11[_0x5a7fe5(0x267)](GQL,{'schema':_0x1c0872,'resolvers':_0x14cdbd,'subscription':!![]}),await _0x45ac11[_0x5a7fe5(0x1c3)]({'port':0x0}),_0x5729e3[_0x5a7fe5(0x233)](_0x45ac11[_0x5a7fe5(0x27d)]['bind'](_0x45ac11));const _0x48697f=new WebSocket(_0x5a7fe5(0x26c)+_0x45ac11[_0x5a7fe5(0x22a)][_0x5a7fe5(0x320)]()[_0x5a7fe5(0x1b7)]+_0x5a7fe5(0x1ee),_0x162318[_0x5a7fe5(0x1b0)]);await _0x162318[_0x5a7fe5(0x221)](once,_0x48697f,_0x5a7fe5(0x1a1)),_0x48697f[_0x5a7fe5(0x31a)][_0x5a7fe5(0x2c9)](Buffer[_0x5a7fe5(0x1c7)]([0xa2,0x0])),await once(_0x48697f,'close');});