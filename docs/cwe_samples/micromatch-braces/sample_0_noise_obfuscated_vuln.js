'use strict';const _0x1ff2dd=_0x3c2f;(function(_0x434672,_0x567562){const _0x50b2e0=_0x3c2f,_0x714ac=_0x434672();while(!![]){try{const _0x9b68ad=-parseInt(_0x50b2e0(0xc4))/0x1*(-parseInt(_0x50b2e0(0x7d))/0x2)+-parseInt(_0x50b2e0(0x181))/0x3+parseInt(_0x50b2e0(0x19d))/0x4+parseInt(_0x50b2e0(0x17e))/0x5*(-parseInt(_0x50b2e0(0x1db))/0x6)+parseInt(_0x50b2e0(0x7a))/0x7*(parseInt(_0x50b2e0(0x90))/0x8)+-parseInt(_0x50b2e0(0x205))/0x9+parseInt(_0x50b2e0(0x11c))/0xa*(parseInt(_0x50b2e0(0xe0))/0xb);if(_0x9b68ad===_0x567562)break;else _0x714ac['push'](_0x714ac['shift']());}catch(_0x5ea98b){_0x714ac['push'](_0x714ac['shift']());}}}(_0x1328,0x79e33));function _0x1328(){const _0xa4aeeb=['foobar','fHDZN','YYSoa','`withFilter`\x20tool\x20works\x20with\x20async\x20filters','GTlkk','UKFMX','LFilM','naSJs','NgulL','subscription\x20server\x20sends\x20update\x20to\x20subscriptions\x20with\x20custom\x20context','vxjSw','AaBnj','wHRtl','beforeEach','TlhUv','yjrJP','HcNkH','BWsgS','jrqZh','SHPtc','pubsub','beIjQ','ZsknE','FXviX','HDfAa','FNKPa','aJWEW','createWebSocketStream','pKCof','yCMQb','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22filtered\x20should\x20not\x20pass\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','mqemitter','publish','502103DJFcPU','javby','uninstall','12146bEikkE','MGXnn','BQSMl','bxNFB','tfqSs','DUJbA','DBEyz','teardown','BDvei','PMQxa','aaa','ejwRk','LIbQP','nHFEH','open','tywFO','edSYt','JivGR','VmzYl','8zNPZLr','gHbzE','connection_ack','YeWoX','KQBUr','fwTMh','cBihR','RJNFs','DJfva','constructor','apFSv','mWUkW','ghLZB','foo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','emit','RHXAy','ZOSmp','IjYpy','XZgtD','Ndqup','world','port','FjUhU','mQuIr','PFQVj','Notification\x20message','plan','Hello\x20World','FHwgw','0|1|4|5|2|3','zilDH','kOtZp','jUmBQ','Bearer\x20foobar','yHvkT','ZrmhG','zZpUu','subscription\x20server\x20replies\x20with\x20connection_ack','CCNpw','pWzBv','dapyF','write','nHLPw','subscription\x20server\x20exposes\x20pubsub','ojotC','cWkzH','Qtcak','AWgQg','ZTsFz','UUiwF','gVgfO','139ohNdJs','data','context','JvNCF','uWGld','vAyng','server','AYVpK','zgUUG','Dovtw','jjgnn','ws://localhost:','PMxao','socket','var\x20x\x20=\x2042;\x20return\x20x;','OFTuz','ikzEu','request','cAoQe','tepCU','EBZVN','subscription\x20works\x20with\x20`withFilter`\x20tool','tIqIx','REBnb','mOxEL','uslju','FKWgd','gRAbd','11Bzyjzw','vjgEk','GWSGZ','GaecH','bar','EFPzb','UDxUH','EhuVW','XowLU','request\x20and\x20reply\x20objects\x20in\x20subscription\x20context\x20-\x20no\x20headers\x20wrapper','SQZIJ','vmzMo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22Hello\x20World\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','complete','Jphej','DwfqQ','oWvDf','HfPmG','TJKZR','TFJUa','AqTtT','inject','PDgJX','cHeYi','lGPuo','AVnjl','hi\x20from\x20server','RIcmN','Sucwm','filtered','NsjjZ','DqWvH','wKNuy','tickAsync','izHNF','gtKEb','oBNab','end','updateClock();','ijJLW','lHQEx','DVjxL','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded(contains:\x20\x22Hello\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','wdnUr','joZAs','install','RjZym','subscription\x20connection\x20is\x20closed\x20if\x20async\x20context\x20function\x20throws','/graphql','rvaMW','Wqxqu','topic','luPqQ','subscription\x20connection\x20is\x20closed\x20if\x20context\x20function\x20throws','eJxBi','fLpAx','Unntc','wrong\x20messages\x20do\x20not\x20crash\x20the\x20server','MloCN','pnxvd','7180870hdHOop','OAUPS','jHRrJ','subscription\x20server\x20sends\x20update\x20to\x20subscriptions\x20with\x20custom\x20async\x20context','OBEpb','\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Mutation\x20{\x0a\x20\x20\x20\x20\x20\x20addNotification(message:\x20String):\x20Notification\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded:\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20','kKBnX','subscription\x20handles\x20`withFilter`\x20if\x20filter\x20throws','ilzPF','connection_init','stop','connectionInit','decorateRequest','return\x20await\x20Promise.resolve(42);','uvVBr','cqgre','wImYL','events','YaFzY','subscription\x20with\x20custom\x20pubsub','push','@sinonjs/fake-timers','reply','ChmsH','ACKTJ','headers','address','afterEach','aHdBb','Bmowc','graphql-ws','split','map','mekIc','ETWZM','skvTT','subscription\x20server\x20sends\x20update\x20to\x20subscriptions','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22Hello\x20World\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','authorization','iSceE','type','rusaP','rNmsB','parse','WAZcH','notificationAdded','Uyfrq','WiybY','XVvBo','VuUAz','HkOIP','nfmOZ','mlzMV','dZeym','PeEOC','\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Mutation\x20{\x0a\x20\x20\x20\x20\x20\x20addNotification(message:\x20String!):\x20Notification!\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded(contains:\x20String):\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20','safe','yaIgf','IhhXR','sjpJV','setEncoding','EUnxA','JxcCU','sgjfQ','IGwfF','BvEgV','yCDDU','eHecn','rnkGX','vAkVa','UMewQ','MtqOD','sVfKU','includes','LNVHS','jZDUB','clock','nxNiD','RYrcd','start','SwsdZ','wYqXc','hfnhx','XRrIb','iBvuA','console.log(\x22timer\x22);','FIKDT','payload','cYlBb','SjKNB','bcELf','HFJIm','BeBuV','uTGYW','iyQVa','QRQJA','hzJvr','CPpbU','3253585KfDPnP','OcswP','uYMoX','606816gqxBZL','PiTvW','bbb','NXBze','get','tap','ucswR','eGmeg','NOTIFICATION_ADDED','pWRnq','aAZAE','error','VfAgF','hjKtI','emitter','fail','TqXVn','custom\x20execution\x20error','fcEti','/fastify-websocket','\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20add(x:\x20Int,\x20y:\x20Int):\x20Int\x0a\x20\x20\x20\x20}\x0a\x20\x20','zhmJg','listen','HoGwc','qLIiB','zPbzi','WUlvb','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','2287860dXYIxJ','ZbivN','close','uYXPy','kwnzg','pass','igjHk','YABFx','utf8','RLubv','BOIuX','pvhtR','YvCwv','YaXED','kjsiB','XCZrw','subscribe','MnqWZ','UhdmY','Ypanv','UeMnb','ws://127.0.0.1:','seukj','mMyGp','bUvYr','cqmuD','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20query\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notifications\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','kdqXs','message','equal','nGaVv','rpmQr','IZTud','\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded:\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20','BjqEX','TtQTu','mvmOs','OHWCW','wJCsr','IERJw','PsDfD','pUHQU','IwsDn','nxxcc','subscription\x20passes\x20context\x20to\x20its\x20loaders','NmMwi','dlYhp','aqgel','TfCBO','vHBBH','XxXxl','YHZAB','destroy','JCpRu','YxxLq','KEMgl','aTqjc','AVyfU','hstQG','kxMOJ','phqCi','POST','6DMakQK','__proto__','Ukwoi','log','DuGny','wdRpS','DmgVn','npVWX','sCtEo','VLiGU','AgzOM','nSUhl','rrMKv','wqnRY','uaRzc','ozwCa','bind','dGxGY','shkEH','phTuK','ZnWjn','dTDpM','eqCrp','sZeke','eGLTg','TfbiY','YGUVu','aKYrp','eesuq','send','yimyM','MLxcn','sFJok','register','nlcut','Hello\x20World\x20foobar','test','pjisw','jPwAe','XxpPN','xBQBK','stringify','7683192JBYOvh','IaGqQ','PbgLe','graphql'];_0x1328=function(){return _0xa4aeeb;};return _0x1328();}function _0x3c2f(_0x635ee1,_0xf415ba){const _0x132849=_0x1328();return _0x3c2f=function(_0x3c2f3b,_0x2a9061){_0x3c2f3b=_0x3c2f3b-0x72;let _0x2cf9ff=_0x132849[_0x3c2f3b];return _0x2cf9ff;},_0x3c2f(_0x635ee1,_0xf415ba);}const {test,t}=require(_0x1ff2dd(0x186)),Fastify=require('fastify'),WebSocket=require('ws'),mq=require(_0x1ff2dd(0x78)),{EventEmitter}=require(_0x1ff2dd(0x12d)),fastifyWebsocket=require('@fastify/websocket'),GQL=require('..'),{once}=require(_0x1ff2dd(0x12d)),FakeTimers=require(_0x1ff2dd(0x131));t[_0x1ff2dd(0x216)](({context:_0x51a436})=>{const _0x4d6992=_0x1ff2dd;_0x51a436['clock']=FakeTimers[_0x4d6992(0x10d)]({'shouldClearNativeTimers':!![],'shouldAdvanceTime':!![],'advanceTimeDelta':0x28});}),t[_0x1ff2dd(0x137)](({context:_0x548942})=>{const _0x1637f2=_0x1ff2dd;_0x548942[_0x1637f2(0x168)][_0x1637f2(0x7c)]();}),test(_0x1ff2dd(0xb6),_0x1c6196=>{const _0x8764ce=_0x1ff2dd,_0x39626d={'aAZAE':'connection_ack','Qtcak':function(_0x1ef751,_0x2bcb81){return _0x1ef751+_0x2bcb81;},'XoxIS':_0x8764ce(0x13a),'RJNFs':'connection_init','wJCsr':_0x8764ce(0xc5),'aJWEW':function(_0x4a5974){return _0x4a5974();}},_0x32d24c=_0x39626d[_0x8764ce(0x73)](Fastify);_0x1c6196[_0x8764ce(0x84)](()=>_0x32d24c[_0x8764ce(0x19f)]());const _0x52588b='\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20add(x:\x20Int,\x20y:\x20Int):\x20Int\x0a\x20\x20\x20\x20}\x0a\x20\x20',_0x314b7b={'Query':{'add':(_0x31e0ce,{x:_0x243cc6,y:_0x1623d6})=>_0x243cc6+_0x1623d6}};_0x32d24c['register'](GQL,{'schema':_0x52588b,'resolvers':_0x314b7b,'subscription':!![]}),_0x32d24c['listen']({'port':0x0},_0x1a94c5=>{const _0x4cb9b6=_0x8764ce,_0x4dd2bf={'sXEDo':_0x39626d[_0x4cb9b6(0x18b)]};_0x1c6196[_0x4cb9b6(0x18c)](_0x1a94c5);const _0x3d0b45=_0x39626d[_0x4cb9b6(0xbf)](_0x4cb9b6(0xcf),_0x32d24c[_0x4cb9b6(0xca)]['address']()[_0x4cb9b6(0xa6)])+_0x4cb9b6(0x110),_0x18e6a6=new WebSocket(_0x3d0b45,_0x39626d['XoxIS']),_0x37e27c=WebSocket[_0x4cb9b6(0x74)](_0x18e6a6,{'encoding':'utf8','objectMode':!![]});_0x1c6196['teardown'](_0x37e27c[_0x4cb9b6(0x1d1)][_0x4cb9b6(0x1eb)](_0x37e27c)),_0x37e27c[_0x4cb9b6(0x158)](_0x4cb9b6(0x1a5)),_0x37e27c[_0x4cb9b6(0xba)](JSON['stringify']({'type':_0x39626d[_0x4cb9b6(0x97)]})),_0x37e27c['on'](_0x39626d[_0x4cb9b6(0x1c3)],_0x2c6e7e=>{const _0x315db5=_0x4cb9b6;_0x1c6196['equal'](_0x2c6e7e,JSON[_0x315db5(0x204)]({'type':_0x4dd2bf['sXEDo']})),_0x37e27c[_0x315db5(0x105)](),_0x1c6196[_0x315db5(0x105)]();});});}),test('subscription\x20server\x20replies\x20with\x20keep\x20alive\x20when\x20enabled',_0x2d1f54=>{const _0x45fe70=_0x1ff2dd,_0x58b367={'JvNCF':'updateClock();','GaecH':_0x45fe70(0x21b),'XCZrw':_0x45fe70(0x110),'jUmBQ':'utf8'},_0x32041e=Fastify();_0x2d1f54[_0x45fe70(0x84)](()=>_0x32041e['close']());const _0x5105ba=_0x45fe70(0x195),_0x2de323={'Query':{'add':(_0x3e0869,{x:_0x3a5e9e,y:_0x19d6e0})=>_0x3a5e9e+_0x19d6e0}};_0x32041e[_0x45fe70(0x1fc)](GQL,{'schema':_0x5105ba,'resolvers':_0x2de323,'subscription':{'keepAlive':0x2710}}),_0x32041e[_0x45fe70(0x197)]({'port':0x0},_0x2eb317=>{const _0x1dad23=_0x45fe70,_0x54ad9d={'VuUAz':_0x58b367[_0x1dad23(0xc7)]};if(_0x58b367[_0x1dad23(0xe3)]!==_0x58b367[_0x1dad23(0xe3)])_0x340943[_0x1dad23(0x168)]=_0x58e49f[_0x1dad23(0x10d)]({'shouldClearNativeTimers':!![],'shouldAdvanceTime':!![],'advanceTimeDelta':0x28});else{_0x2d1f54[_0x1dad23(0x18c)](_0x2eb317);const _0x13e14f=_0x1dad23(0xcf)+_0x32041e[_0x1dad23(0xca)][_0x1dad23(0x136)]()['port']+_0x58b367[_0x1dad23(0x1ac)],_0x9d9e3d=new WebSocket(_0x13e14f,_0x1dad23(0x13a)),_0x1793fd=WebSocket[_0x1dad23(0x74)](_0x9d9e3d,{'encoding':_0x58b367[_0x1dad23(0xb1)],'objectMode':!![]});_0x2d1f54[_0x1dad23(0x84)](_0x1793fd[_0x1dad23(0x1d1)][_0x1dad23(0x1eb)](_0x1793fd)),_0x1793fd[_0x1dad23(0x158)](_0x58b367[_0x1dad23(0xb1)]),_0x1793fd['write'](JSON[_0x1dad23(0x204)]({'type':_0x1dad23(0x125)})),_0x1793fd['on'](_0x1dad23(0xc5),_0x1a7010=>{const _0x3ad72f=_0x1dad23,_0x1f937d=JSON[_0x3ad72f(0x147)](_0x1a7010);setInterval(_0x54ad9d[_0x3ad72f(0x14d)],0x3e8);if(_0x1f937d[_0x3ad72f(0x144)]===_0x3ad72f(0x92))return;_0x2d1f54[_0x3ad72f(0x1ba)](_0x1f937d[_0x3ad72f(0x144)],'ka'),_0x1793fd[_0x3ad72f(0x105)](),_0x2d1f54[_0x3ad72f(0x105)]();});}});}),test(_0x1ff2dd(0x140),_0x375a31=>{const _0x2a0e21=_0x1ff2dd,_0x2283c0={'zHlrP':function(_0xfd9e9b){return _0xfd9e9b();},'nHLPw':'POST','AaBnj':_0x2a0e21(0x110),'ArVru':function(_0x12236b,_0x3906d8){return _0x12236b===_0x3906d8;},'HFJIm':_0x2a0e21(0xd3),'WUlvb':_0x2a0e21(0xfb),'NmMwi':function(_0x2c34da,_0x102021){return _0x2c34da(_0x102021);},'OAUPS':'return\x20Object.keys({a:1});','FIKDT':_0x2a0e21(0x129),'dZeym':'Hello\x20World','zOWjV':_0x2a0e21(0xed),'mOxEL':function(_0x214e55,_0x3281d0){return _0x214e55+_0x3281d0;},'vmzMo':_0x2a0e21(0xcf),'vxjSw':_0x2a0e21(0x1a5),'nxNiD':_0x2a0e21(0x125),'XxpPN':_0x2a0e21(0x16b),'sFJok':_0x2a0e21(0x126),'IwsDn':function(_0x3d998f){return _0x3d998f();},'tIqIx':_0x2a0e21(0xaa)},_0x46dd64=Fastify();_0x375a31[_0x2a0e21(0x84)](()=>_0x46dd64[_0x2a0e21(0x19f)]());const _0x47d507=()=>{const _0xe50fcb=_0x2a0e21;_0x46dd64[_0xe50fcb(0xf5)]({'method':_0x2283c0[_0xe50fcb(0xbb)],'url':_0x2283c0['AaBnj'],'body':{'query':_0xe50fcb(0x1b7)}},()=>{_0x2283c0['zHlrP'](_0x4114c7);});},_0x4114c7=()=>{const _0x56cb88=_0x2a0e21;_0x2283c0['ArVru'](_0x2283c0[_0x56cb88(0x177)],_0x2283c0[_0x56cb88(0x19b)])?_0x41dd53():_0x46dd64[_0x56cb88(0xf5)]({'method':_0x2283c0[_0x56cb88(0xbb)],'url':_0x2283c0[_0x56cb88(0x214)],'body':{'query':_0x56cb88(0x141)}},()=>{});},_0x52d02f=_0x2283c0[_0x2a0e21(0x1c7)](mq),_0x4ce43b=_0x2a0e21(0x121);let _0xc1c4cb=0x1;const _0xa7d4f0=[{'id':_0xc1c4cb,'message':_0x2283c0[_0x2a0e21(0xda)]}],_0x42a296={'Query':{'notifications':()=>_0xa7d4f0},'Mutation':{'addNotification':async(_0x93586b,{message:_0x397045})=>{const _0x300f09=_0x2a0e21,_0x4e3635=_0xc1c4cb++,_0x5f204d={'id':_0x4e3635,'message':_0x397045};return _0xa7d4f0[_0x300f09(0x130)](_0x5f204d),await _0x52d02f[_0x300f09(0x9f)]({'topic':_0x300f09(0x189),'payload':{'notificationAdded':_0x5f204d}}),_0x2283c0[_0x300f09(0x1ca)](Function,_0x2283c0[_0x300f09(0x11d)])(),_0x5f204d;}},'Subscription':{'notificationAdded':{'subscribe':(_0x7469b2,_0x69ff34,_0x567764)=>{const _0x2e2989=_0x2a0e21;return new AsyncFunction(_0x2283c0[_0x2e2989(0x172)])(),_0x567764[_0x2e2989(0x21d)][_0x2e2989(0x1ad)](_0x2e2989(0x189));}}}};_0x46dd64[_0x2a0e21(0x1fc)](GQL,{'schema':_0x4ce43b,'resolvers':_0x42a296,'subscription':{'emitter':_0x52d02f}}),_0x46dd64['listen']({'port':0x0},_0x2da6d2=>{const _0x449c0e=_0x2a0e21,_0x35d8dd={'beIjQ':function(_0x27e47f,_0x2caff7){return _0x2283c0['ArVru'](_0x27e47f,_0x2caff7);},'wKNuy':function(_0x2d704b,_0xeb04dc){return _0x2d704b===_0xeb04dc;},'PeEOC':_0x2283c0[_0x449c0e(0x151)],'luPqQ':_0x2283c0['zOWjV'],'LIbQP':function(_0x5891c9){return _0x5891c9();}};_0x375a31[_0x449c0e(0x18c)](_0x2da6d2);const _0xe260d9=new WebSocket(_0x2283c0[_0x449c0e(0xdc)](_0x2283c0[_0x449c0e(0xeb)]+_0x46dd64[_0x449c0e(0xca)][_0x449c0e(0x136)]()['port'],_0x2283c0[_0x449c0e(0x214)]),'graphql-ws'),_0x5e2d09=WebSocket[_0x449c0e(0x74)](_0xe260d9,{'encoding':_0x2283c0[_0x449c0e(0x213)],'objectMode':!![]});_0x375a31[_0x449c0e(0x84)](_0x5e2d09['destroy'][_0x449c0e(0x1eb)](_0x5e2d09)),_0x5e2d09[_0x449c0e(0x158)]('utf8'),_0x5e2d09['write'](JSON[_0x449c0e(0x204)]({'type':_0x2283c0[_0x449c0e(0x169)]})),_0x5e2d09['write'](JSON[_0x449c0e(0x204)]({'id':0x1,'type':_0x2283c0[_0x449c0e(0x202)],'payload':{'query':_0x449c0e(0x9e)}})),_0x5e2d09['write'](JSON['stringify']({'id':0x2,'type':_0x2283c0[_0x449c0e(0x202)],'payload':{'query':_0x449c0e(0x9e)}})),_0x5e2d09['write'](JSON[_0x449c0e(0x204)]({'id':0x2,'type':_0x2283c0[_0x449c0e(0x1fb)]})),_0x5e2d09['on'](_0x449c0e(0xc5),_0x5d90a3=>{const _0x240c14=_0x449c0e,_0x58e1de=JSON['parse'](_0x5d90a3);if(_0x35d8dd[_0x240c14(0x21e)](_0x58e1de['id'],0x1)&&_0x35d8dd[_0x240c14(0x100)](_0x58e1de[_0x240c14(0x144)],_0x240c14(0xc5)))_0x375a31[_0x240c14(0x1ba)](_0x5d90a3,JSON[_0x240c14(0x204)]({'type':_0x240c14(0xc5),'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x35d8dd[_0x240c14(0x152)]}}}})),_0x5e2d09[_0x240c14(0x105)](),_0x375a31['end']();else _0x58e1de['id']===0x2&&_0x35d8dd[_0x240c14(0x21e)](_0x58e1de[_0x240c14(0x144)],_0x35d8dd[_0x240c14(0x114)])&&_0x35d8dd[_0x240c14(0x89)](_0x47d507);});});});class CustomPubSub{constructor(){const _0x3369ae=_0x1ff2dd;this[_0x3369ae(0x18f)]=new EventEmitter();}async['subscribe'](_0x29505c,_0x432807){const _0x22c297=_0x1ff2dd,_0x4d968a={'ZTsFz':_0x22c297(0x209),'RjZym':function(_0xcdbea3){return _0xcdbea3();},'yHvkT':_0x22c297(0x122)},_0x583121=_0x1434db=>{const _0x307ae6=_0x22c297;_0x432807[_0x307ae6(0x130)](_0x1434db);},_0x48c3d3=()=>{const _0x5b4cbd=_0x22c297,_0x5bdc15={'TfCBO':_0x5b4cbd(0xcf),'XjJnO':_0x4d968a[_0x5b4cbd(0xc1)],'iSceE':_0x5b4cbd(0x1a5),'YeWoX':function(_0x4b2154){const _0x17abc4=_0x5b4cbd;return _0x4d968a[_0x17abc4(0x10e)](_0x4b2154);}};if(_0x5b4cbd(0x1d8)!==_0x4d968a[_0x5b4cbd(0xb3)])this[_0x5b4cbd(0x18f)]['removeListener'](_0x29505c,_0x583121);else{const _0xb3dc5a={'AVnjl':_0x5bdc15[_0x5b4cbd(0x1cd)],'YvCwv':_0x5bdc15['XjJnO'],'Bmowc':_0x5bdc15[_0x5b4cbd(0x143)],'SQZIJ':_0x5b4cbd(0x19f)},_0xa2ebf1=_0x5bdc15[_0x5b4cbd(0x93)](_0x2358a9),_0x1e47ce=_0x5b4cbd(0x195),_0x507b4d={'add':async({x:_0xe5b335,y:_0x4a94f8})=>_0xe5b335+_0x4a94f8};_0x8e9b03[_0x5b4cbd(0x84)](_0xa2ebf1['close']),_0xa2ebf1[_0x5b4cbd(0x1fc)](_0x55eef7,{'schema':_0x1e47ce,'resolvers':_0x507b4d,'subscription':!![]}),_0xa2ebf1[_0x5b4cbd(0x197)]({'port':0x0},()=>{const _0x1f6745=_0x5b4cbd,_0x33e86b=_0xb3dc5a[_0x1f6745(0xf9)]+_0xa2ebf1[_0x1f6745(0xca)][_0x1f6745(0x136)]()[_0x1f6745(0xa6)]+'/graphql',_0x1f48c3=new _0x29bf80(_0x33e86b,_0xb3dc5a[_0x1f6745(0x1a9)]),_0x3e84f8=_0x354a0c[_0x1f6745(0x74)](_0x1f48c3,{'encoding':_0xb3dc5a[_0x1f6745(0x139)],'objectMode':!![]});_0xd31601[_0x1f6745(0x84)](_0x3e84f8[_0x1f6745(0x1d1)][_0x1f6745(0x1eb)](_0x3e84f8)),_0x3e84f8[_0x1f6745(0x158)](_0xb3dc5a[_0x1f6745(0x139)]),_0x1f48c3['on'](_0xb3dc5a[_0x1f6745(0xea)],()=>{const _0x11f129=_0x1f6745;_0x3e84f8[_0x11f129(0x105)](),_0x1b254f['end']();});});}};this[_0x22c297(0x18f)]['on'](_0x29505c,_0x583121),_0x432807[_0x22c297(0x19f)]=_0x48c3d3;}['publish'](_0x3fc55f,_0x1430b3){const _0x2deba5=_0x1ff2dd;this[_0x2deba5(0x18f)]['emit'](_0x3fc55f[_0x2deba5(0x113)],_0x3fc55f['payload']),_0x1430b3();}}test(_0x1ff2dd(0x12f),_0x45f4e6=>{const _0x351c44=_0x1ff2dd,_0x537188={'JivGR':function(_0x551e48){return _0x551e48();},'zhmJg':_0x351c44(0x1da),'zZpUu':_0x351c44(0x110),'YABFx':function(_0x4c3003,_0x371197){return _0x4c3003*_0x371197;},'UeMnb':_0x351c44(0x189),'cqmuD':_0x351c44(0x198),'MnqWZ':_0x351c44(0xac),'iyqFs':_0x351c44(0x102),'WDaBo':function(_0x45f579,_0x472cab){return _0x45f579+_0x472cab;},'fhGED':'ws://localhost:','PMQxa':_0x351c44(0x13a),'UMewQ':_0x351c44(0x1a5),'tfqSs':_0x351c44(0x126),'JxcCU':function(_0x12da04){return _0x12da04();}},_0x200890=_0x537188[_0x351c44(0x15a)](Fastify);_0x45f4e6[_0x351c44(0x84)](()=>_0x200890[_0x351c44(0x19f)]());const _0x48a03c=new CustomPubSub(),_0x45e356=()=>{const _0x3436f2=_0x351c44,_0x329bd6={'jPwAe':function(_0x1e5abd){const _0x4cb6d7=_0x3c2f;return _0x537188[_0x4cb6d7(0x8e)](_0x1e5abd);}};_0x200890[_0x3436f2(0xf5)]({'method':_0x537188[_0x3436f2(0x196)],'url':_0x537188[_0x3436f2(0xb5)],'body':{'query':_0x3436f2(0x1b7)}},()=>{const _0x1ceeca=_0x3436f2;_0x329bd6[_0x1ceeca(0x201)](_0x56bc61);});},_0x56bc61=()=>{const _0x15b7f8=_0x351c44;_0x200890[_0x15b7f8(0xf5)]({'method':_0x537188[_0x15b7f8(0x196)],'url':'/graphql','body':{'query':_0x15b7f8(0x141)}},()=>{});},_0x5ca9c4='\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Mutation\x20{\x0a\x20\x20\x20\x20\x20\x20addNotification(message:\x20String):\x20Notification\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded:\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20';let _0x609889=0x1;const _0x33aa93=[{'id':_0x609889,'message':_0x351c44(0xaa)}],_0x19b4d3={'Query':{'notifications':()=>_0x33aa93},'Mutation':{'addNotification':async(_0xdeefff,{message:_0x20e913})=>{const _0x27745c=_0x351c44,_0x440d4e=_0x609889++,_0x4517d9={'id':_0x440d4e,'message':_0x20e913};return _0x33aa93['push'](_0x4517d9),await _0x48a03c['emitter'][_0x27745c(0x9f)](_0x537188[_0x27745c(0x1b1)],{'notificationAdded':_0x4517d9}),eval('const _0x37f0f2 = _0x27745c;_0x537188[_0x37f0f2(420)](Math[\'PI\'], 2);'),_0x4517d9;}},'Subscription':{'notificationAdded':{'subscribe':(_0x4dfd46,_0x108bdd,{pubsub:_0x18b2e5})=>_0x18b2e5[_0x351c44(0x1ad)](_0x351c44(0x189))}}};_0x200890[_0x351c44(0x1fc)](GQL,{'schema':_0x5ca9c4,'resolvers':_0x19b4d3,'subscription':{'pubsub':_0x48a03c}}),_0x200890[_0x351c44(0x197)]({'port':0x0},_0x534677=>{const _0x24f052=_0x351c44,_0x58330={'ghLZB':_0x537188[_0x24f052(0x1b6)],'edSYt':'data','kjsiB':_0x537188[_0x24f052(0x1ae)],'pWzBv':function(_0x4295e0,_0x5ea4c4){return _0x4295e0===_0x5ea4c4;},'ChmsH':_0x24f052(0xed)};if(_0x537188['iyqFs']!=='izHNF')_0x24b67e['inject']({'method':_0x24f052(0x1da),'url':_0x537188[_0x24f052(0xb5)],'body':{'query':_0x24f052(0x141)}},()=>{});else{_0x45f4e6[_0x24f052(0x18c)](_0x534677);const _0x304468=new WebSocket(_0x537188['WDaBo'](_0x537188['fhGED']+_0x200890[_0x24f052(0xca)][_0x24f052(0x136)]()[_0x24f052(0xa6)],'/graphql'),_0x537188[_0x24f052(0x86)]),_0x12223d=WebSocket[_0x24f052(0x74)](_0x304468,{'encoding':_0x537188[_0x24f052(0x162)],'objectMode':!![]});_0x45f4e6[_0x24f052(0x84)](_0x12223d[_0x24f052(0x1d1)]['bind'](_0x12223d)),_0x12223d[_0x24f052(0x158)](_0x24f052(0x1a5)),_0x12223d['write'](JSON['stringify']({'type':_0x24f052(0x125)})),_0x12223d[_0x24f052(0xba)](JSON[_0x24f052(0x204)]({'id':0x1,'type':_0x24f052(0x16b),'payload':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'}})),_0x12223d[_0x24f052(0xba)](JSON[_0x24f052(0x204)]({'id':0x2,'type':_0x24f052(0x16b),'payload':{'query':_0x24f052(0x9e)}})),_0x12223d[_0x24f052(0xba)](JSON[_0x24f052(0x204)]({'id':0x2,'type':_0x537188[_0x24f052(0x81)]})),_0x12223d['on']('data',_0x16e372=>{const _0x1e37d3=_0x24f052,_0x32a883={'NXBze':_0x1e37d3(0xfa)};if(_0x1e37d3(0x1c4)===_0x58330[_0x1e37d3(0x9c)])_0x312a4b['socket'][_0x1e37d3(0x1f8)](_0x32a883[_0x1e37d3(0x184)]);else{const _0x571382=JSON[_0x1e37d3(0x147)](_0x16e372);if(_0x571382['id']===0x1&&_0x571382[_0x1e37d3(0x144)]===_0x58330[_0x1e37d3(0x8d)])_0x45f4e6[_0x1e37d3(0x1ba)](_0x16e372,JSON[_0x1e37d3(0x204)]({'type':_0x58330[_0x1e37d3(0x8d)],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x58330[_0x1e37d3(0x1ab)]}}}})),_0x12223d['end'](),_0x45f4e6[_0x1e37d3(0x105)]();else _0x58330[_0x1e37d3(0xb8)](_0x571382['id'],0x2)&&_0x571382[_0x1e37d3(0x144)]===_0x58330[_0x1e37d3(0x133)]&&_0x45e356();}});}});}),test(_0x1ff2dd(0x212),_0x160223=>{const _0xa62d00=_0x1ff2dd,_0x5d0afe={'gVgfO':function(_0x10a185,_0x3abbb0){return _0x10a185===_0x3abbb0;},'PNbmx':_0xa62d00(0xed),'uslju':function(_0x14a295){return _0x14a295();},'ydphw':_0xa62d00(0xf3),'LNVHS':_0xa62d00(0xdf),'iyQVa':'POST','UDxUH':function(_0x26c79d,_0x29461b){return _0x26c79d!==_0x29461b;},'uYMoX':_0xa62d00(0x161),'gHbzE':_0xa62d00(0xe7),'uaRzc':_0xa62d00(0xd2),'IaGqQ':function(_0x415fa,_0x2d91de){return _0x415fa===_0x2d91de;},'YllxL':'ws://localhost:','oBNab':_0xa62d00(0x110),'fcIWM':_0xa62d00(0x13a),'eHecn':'start','BeBuV':_0xa62d00(0x126)},_0x49c237=Fastify();_0x160223[_0xa62d00(0x84)](()=>_0x49c237['close']());const _0x1aa5cf=()=>{const _0xa7cb7a=_0xa62d00,_0x18c452={'WiybY':function(_0x10af67,_0x55350e){const _0xb94b50=_0x3c2f;return _0x5d0afe[_0xb94b50(0xc3)](_0x10af67,_0x55350e);},'kOtZp':_0xa7cb7a(0xc5),'rvaMW':'Hello\x20World','aTqjc':_0x5d0afe['PNbmx'],'wImYL':function(_0x45a102){return _0x5d0afe['uslju'](_0x45a102);}};if(_0x5d0afe[_0xa7cb7a(0xc3)](_0x5d0afe['ydphw'],_0x5d0afe[_0xa7cb7a(0x166)])){const _0x29a4e6=_0xd7831e[_0xa7cb7a(0x147)](_0x303194);if(_0x29a4e6['id']===0x1&&_0x18c452[_0xa7cb7a(0x14b)](_0x29a4e6[_0xa7cb7a(0x144)],_0x18c452[_0xa7cb7a(0xb0)]))_0x25b966['equal'](_0x38168f,_0x5252a1['stringify']({'type':_0x18c452[_0xa7cb7a(0xb0)],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x18c452[_0xa7cb7a(0x111)]}}}})),_0x175906[_0xa7cb7a(0x105)](),_0x309051[_0xa7cb7a(0x105)]();else _0x29a4e6['id']===0x2&&_0x18c452['WiybY'](_0x29a4e6[_0xa7cb7a(0x144)],_0x18c452[_0xa7cb7a(0x1d5)])&&_0x18c452[_0xa7cb7a(0x12c)](_0x364f78);}else _0x49c237[_0xa7cb7a(0xf5)]({'method':_0x5d0afe[_0xa7cb7a(0x17a)],'url':_0xa7cb7a(0x110),'body':{'query':_0xa7cb7a(0x1b7)}},()=>{_0x330d7d();});},_0x330d7d=()=>{const _0x4174b5=_0xa62d00;_0x5d0afe[_0x4174b5(0xe6)](_0x5d0afe[_0x4174b5(0x180)],_0x5d0afe[_0x4174b5(0x91)])?_0x49c237[_0x4174b5(0xf5)]({'method':_0x5d0afe[_0x4174b5(0x17a)],'url':_0x4174b5(0x110),'body':{'query':_0x4174b5(0x141)}},()=>{}):(_0xeb6046[_0x4174b5(0x105)](),_0x120499[_0x4174b5(0x105)]());},_0x55c221=_0x5d0afe['uslju'](mq),_0xc2da76=_0xa62d00(0x121);let _0x180055=0x1;const _0x2dd897=[{'id':_0x180055,'message':_0xa62d00(0xaa)}],_0x48ded8={'Query':{'notifications':()=>_0x2dd897},'Mutation':{'addNotification':async(_0x1c9532,{message:_0x13680c})=>{const _0x1820a2=_0xa62d00,_0x1c62c2=_0x180055++,_0x3595ea={'id':_0x1c62c2,'message':_0x13680c};return _0x2dd897[_0x1820a2(0x130)](_0x3595ea),await _0x55c221[_0x1820a2(0x9f)]({'topic':_0x1820a2(0x189),'payload':{'notificationAdded':_0x3595ea}}),new Function(_0x5d0afe[_0x1820a2(0x1e9)])(),_0x3595ea;}},'Subscription':{'notificationAdded':{'subscribe':(_0x4b29d3,_0x1934f3,{pubsub:_0x50ca72,topic:_0x5830f6})=>_0x50ca72[_0xa62d00(0x1ad)](_0x5830f6)}}};_0x49c237[_0xa62d00(0x1fc)](GQL,{'schema':_0xc2da76,'resolvers':_0x48ded8,'subscription':{'emitter':_0x55c221,'context':()=>({'topic':_0xa62d00(0x189)})}}),_0x49c237[_0xa62d00(0x197)]({'port':0x0},_0x42d3e6=>{const _0xd1a7e8=_0xa62d00,_0x5a283a={'HkOIP':function(_0x3af6d5,_0x42921e){return _0x3af6d5===_0x42921e;},'TtQTu':function(_0x58f045){const _0x18f277=_0x3c2f;return _0x5d0afe[_0x18f277(0xdd)](_0x58f045);},'czAUl':function(_0x4d6046,_0x49a9d9){const _0x460b6f=_0x3c2f;return _0x5d0afe[_0x460b6f(0x206)](_0x4d6046,_0x49a9d9);},'eDtEy':_0x5d0afe['PNbmx'],'HDfAa':function(_0x4552de,_0x5a26cf){return _0x5d0afe['UDxUH'](_0x4552de,_0x5a26cf);},'atxEo':_0xd1a7e8(0x187)};_0x160223['error'](_0x42d3e6);const _0x34605d=new WebSocket(_0x5d0afe['YllxL']+_0x49c237[_0xd1a7e8(0xca)][_0xd1a7e8(0x136)]()[_0xd1a7e8(0xa6)]+_0x5d0afe[_0xd1a7e8(0x104)],_0x5d0afe['fcIWM']),_0xf384ab=WebSocket[_0xd1a7e8(0x74)](_0x34605d,{'encoding':_0xd1a7e8(0x1a5),'objectMode':!![]});_0x160223[_0xd1a7e8(0x84)](_0xf384ab[_0xd1a7e8(0x1d1)]['bind'](_0xf384ab)),_0xf384ab[_0xd1a7e8(0x158)](_0xd1a7e8(0x1a5)),_0xf384ab[_0xd1a7e8(0xba)](JSON[_0xd1a7e8(0x204)]({'type':_0xd1a7e8(0x125)})),_0xf384ab['write'](JSON[_0xd1a7e8(0x204)]({'id':0x1,'type':_0x5d0afe[_0xd1a7e8(0x15f)],'payload':{'query':_0xd1a7e8(0x9e)}})),_0xf384ab['write'](JSON[_0xd1a7e8(0x204)]({'id':0x2,'type':_0x5d0afe[_0xd1a7e8(0x15f)],'payload':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'}})),_0xf384ab[_0xd1a7e8(0xba)](JSON[_0xd1a7e8(0x204)]({'id':0x2,'type':_0x5d0afe[_0xd1a7e8(0x178)]})),_0xf384ab['on'](_0xd1a7e8(0xc5),_0x80ef2c=>{const _0x3bd393=_0xd1a7e8,_0x1e25cf={'ETWZM':function(_0x43ec4f,_0x12d54e){return _0x5a283a['HkOIP'](_0x43ec4f,_0x12d54e);},'hUxUO':_0x3bd393(0xc5),'nlcut':_0x3bd393(0xac),'sCtEo':function(_0x3baa57){const _0x4f92e6=_0x3bd393;return _0x5a283a[_0x4f92e6(0x1c0)](_0x3baa57);}},_0x46d475=JSON[_0x3bd393(0x147)](_0x80ef2c);if(_0x46d475['id']===0x1&&_0x5a283a[_0x3bd393(0x14e)](_0x46d475[_0x3bd393(0x144)],'data'))_0x160223[_0x3bd393(0x1ba)](_0x80ef2c,JSON[_0x3bd393(0x204)]({'type':_0x3bd393(0xc5),'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':'Hello\x20World'}}}})),_0xf384ab[_0x3bd393(0x105)](),_0x160223[_0x3bd393(0x105)]();else{if(_0x5a283a['czAUl'](_0x46d475['id'],0x2)&&_0x46d475['type']===_0x5a283a['eDtEy']){if(_0x5a283a[_0x3bd393(0x221)](_0x5a283a['atxEo'],'ucswR')){const _0x1d4b7d=_0x59ee8c[_0x3bd393(0x147)](_0x4ff54a);if(_0x1e25cf['ETWZM'](_0x1d4b7d['id'],0x1)&&_0x1e25cf[_0x3bd393(0x13e)](_0x1d4b7d[_0x3bd393(0x144)],_0x1e25cf['hUxUO']))_0x36b17a[_0x3bd393(0x1ba)](_0x498f70,_0x2e5e6f[_0x3bd393(0x204)]({'type':'data','id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x1e25cf[_0x3bd393(0x1fd)]}}}})),_0x3ec343[_0x3bd393(0x105)](),_0x2dee16['end']();else _0x1d4b7d['id']===0x2&&_0x1e25cf[_0x3bd393(0x13e)](_0x1d4b7d['type'],_0x3bd393(0xed))&&_0x1e25cf[_0x3bd393(0x1e3)](_0x1a753c);}else _0x5a283a[_0x3bd393(0x1c0)](_0x1aa5cf);}}});});}),test('subscription\x20socket\x20protocol\x20different\x20than\x20graphql-ws,\x20protocol\x20=\x20foobar',_0x57ec20=>{const _0x463c58=_0x1ff2dd,_0x3e8996={'EFPzb':function(_0x478167,_0xcdfa23){return _0x478167+_0xcdfa23;},'XVvBo':'utf8','LvuOv':function(_0x300eac){return _0x300eac();}},_0x4bea23=_0x3e8996['LvuOv'](Fastify),_0xfbfe91=_0x463c58(0x195),_0x34a26b={'add':async({x:_0x51acc6,y:_0x1ea875})=>_0x51acc6+_0x1ea875};_0x57ec20[_0x463c58(0x84)](_0x4bea23[_0x463c58(0x19f)]),_0x4bea23['register'](GQL,{'schema':_0xfbfe91,'resolvers':_0x34a26b,'subscription':!![]}),_0x4bea23[_0x463c58(0x197)]({'port':0x0},()=>{const _0x4f62e0=_0x463c58,_0x3cc808=_0x3e8996[_0x4f62e0(0xe5)](_0x4f62e0(0xcf)+_0x4bea23[_0x4f62e0(0xca)][_0x4f62e0(0x136)]()[_0x4f62e0(0xa6)],_0x4f62e0(0x110)),_0x33b94f=new WebSocket(_0x3cc808,'foobar'),_0x2ead08=WebSocket[_0x4f62e0(0x74)](_0x33b94f,{'encoding':_0x3e8996[_0x4f62e0(0x14c)],'objectMode':!![]});_0x57ec20[_0x4f62e0(0x84)](_0x2ead08['destroy'][_0x4f62e0(0x1eb)](_0x2ead08)),_0x2ead08[_0x4f62e0(0x158)](_0x3e8996['XVvBo']),_0x33b94f['on'](_0x4f62e0(0x19f),()=>{const _0x4f5862=_0x4f62e0;_0x2ead08[_0x4f5862(0x105)](),_0x57ec20[_0x4f5862(0x105)]();});});}),test(_0x1ff2dd(0x115),_0x37851b=>{const _0x17d2b9=_0x1ff2dd,_0x238a5d={'HfPmG':'Hello\x20World','dlYhp':function(_0x2c88b7,_0x5ef91b){return _0x2c88b7+_0x5ef91b;},'cWkzH':_0x17d2b9(0xcf),'tepCU':_0x17d2b9(0x13a),'Sucwm':_0x17d2b9(0x1a5),'VQLpt':function(_0x232217){return _0x232217();}},_0xe58187=_0x238a5d['VQLpt'](Fastify);_0x37851b[_0x17d2b9(0x84)](()=>_0xe58187[_0x17d2b9(0x19f)]());const _0x472992=_0x17d2b9(0x195),_0x2ab36a={'Query':{'add':(_0x21533f,{x:_0x3f3a3d,y:_0x60b20d})=>_0x3f3a3d+_0x60b20d}};_0xe58187['register'](GQL,{'schema':_0x472992,'resolvers':_0x2ab36a,'subscription':{'context':function(){throw new Error('kaboom');}}}),_0xe58187[_0x17d2b9(0x197)]({'port':0x0},_0x3d9835=>{const _0x409641=_0x17d2b9,_0x4c762b={'pUHQU':_0x238a5d[_0x409641(0xf1)]};_0x37851b[_0x409641(0x18c)](_0x3d9835);const _0x16cb9f=_0x238a5d[_0x409641(0x1cb)](_0x238a5d[_0x409641(0xbe)]+_0xe58187['server'][_0x409641(0x136)]()[_0x409641(0xa6)],_0x409641(0x110)),_0x161dc7=new WebSocket(_0x16cb9f,_0x238a5d[_0x409641(0xd7)]),_0x20c44c=WebSocket[_0x409641(0x74)](_0x161dc7,{'encoding':_0x238a5d[_0x409641(0xfc)],'objectMode':!![]});_0x37851b['teardown'](_0x20c44c[_0x409641(0x1d1)][_0x409641(0x1eb)](_0x20c44c)),_0x20c44c[_0x409641(0xba)](JSON[_0x409641(0x204)]({'type':_0x409641(0x125)})),_0x37851b[_0x409641(0x84)](_0x20c44c[_0x409641(0x1d1)][_0x409641(0x1eb)](_0x20c44c)),_0x20c44c[_0x409641(0x158)](_0x409641(0x1a5)),_0x161dc7['on'](_0x409641(0x19f),()=>{const _0x2bba7b=_0x409641;_0x2bba7b(0x16a)===_0x2bba7b(0x16a)?(_0x20c44c[_0x2bba7b(0x105)](),_0x37851b[_0x2bba7b(0x105)]()):(_0x3fa011[_0x2bba7b(0x1ba)](_0x40fb8b,_0x550f49[_0x2bba7b(0x204)]({'type':_0x2bba7b(0xc5),'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x4c762b[_0x2bba7b(0x1c6)]}}}})),_0x4190c9['end'](),_0x88483f[_0x2bba7b(0x105)]());});});}),test(_0x1ff2dd(0x11f),_0x104130=>{const _0x2c5b6d=_0x1ff2dd,_0x446bb6={'PMxao':_0x2c5b6d(0x1da),'rnkGX':_0x2c5b6d(0x189),'kwnzg':'foHWo','apFSv':function(_0x11b7ee,_0x1b1733){return _0x11b7ee===_0x1b1733;},'TlhUv':_0x2c5b6d(0xc5),'Ypanv':_0x2c5b6d(0xac),'wdRpS':function(_0x3d91e2,_0x5061e6){return _0x3d91e2===_0x5061e6;},'KEMgl':'complete','VXMSk':function(_0xd14972,_0x3b7a97){return _0xd14972+_0x3b7a97;},'fHDZN':_0x2c5b6d(0x13a),'WhENF':_0x2c5b6d(0x1a5),'IZTud':_0x2c5b6d(0x16b),'SHPtc':_0x2c5b6d(0x126),'YHZAB':function(_0x5ecbde){return _0x5ecbde();}},_0x253eb5=Fastify();_0x104130[_0x2c5b6d(0x84)](async()=>{const _0x29a921=_0x2c5b6d;await _0x253eb5[_0x29a921(0x19f)]();});const _0x45ddda=()=>{const _0x205ba9=_0x2c5b6d;_0x253eb5[_0x205ba9(0xf5)]({'method':_0x446bb6[_0x205ba9(0xd0)],'url':_0x205ba9(0x110),'body':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20query\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notifications\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'}},()=>{_0x1b610c();});},_0x1b610c=()=>{const _0x2157d2=_0x2c5b6d;_0x253eb5['inject']({'method':_0x446bb6[_0x2157d2(0xd0)],'url':_0x2157d2(0x110),'body':{'query':_0x2157d2(0x141)}},()=>{});},_0x22cfed=_0x446bb6[_0x2c5b6d(0x1d0)](mq),_0x2b5f4f=_0x2c5b6d(0x121);let _0x5360c3=0x1;const _0x11c575=[{'id':_0x5360c3,'message':_0x2c5b6d(0xaa)}],_0x37e8fe={'Query':{'notifications':()=>_0x11c575},'Mutation':{'addNotification':async(_0x2222b5,{message:_0x1c0fbe})=>{const _0x2b7dc3=_0x2c5b6d,_0x3486ec=_0x5360c3++,_0xcb6474={'id':_0x3486ec,'message':_0x1c0fbe};return _0x11c575[_0x2b7dc3(0x130)](_0xcb6474),await _0x22cfed['emit']({'topic':_0x446bb6[_0x2b7dc3(0x160)],'payload':{'notificationAdded':_0xcb6474}}),new Function(_0x2b7dc3(0xd2))(),_0xcb6474;}},'Subscription':{'notificationAdded':{'subscribe':(_0x4b34e1,_0x460383,{pubsub:_0x47f761,topic:_0xbe1bb})=>_0x47f761[_0x2c5b6d(0x1ad)](_0xbe1bb)}}};_0x253eb5[_0x2c5b6d(0x1fc)](GQL,{'schema':_0x2b5f4f,'resolvers':_0x37e8fe,'subscription':{'emitter':_0x22cfed,'context':async()=>{const _0x2307dd=_0x2c5b6d,_0x2a64ff={'rrMKv':'POST','seukj':_0x2307dd(0x110)};if(_0x446bb6[_0x2307dd(0x1a1)]!==_0x446bb6[_0x2307dd(0x1a1)])_0x3516f2[_0x2307dd(0xf5)]({'method':_0x2307dd(0x1da),'url':_0x2307dd(0x110),'body':{'query':_0x2307dd(0x77)}},()=>{const _0x1ce096=_0x2307dd;_0x3db711[_0x1ce096(0x1a2)]();}),_0x3d0333[_0x2307dd(0xf5)]({'method':_0x2a64ff[_0x2307dd(0x1e7)],'url':_0x2a64ff[_0x2307dd(0x1b3)],'body':{'query':_0x2307dd(0xec)}},()=>{const _0x491ee2=_0x2307dd;_0xb09e77[_0x491ee2(0x1a2)]();});else return await _0x104130['context'][_0x2307dd(0x168)][_0x2307dd(0x101)](0xc8),new AsyncFunction(_0x2307dd(0x129))(),{'topic':_0x2307dd(0x189)};}}}),_0x253eb5['listen']({'port':0x0},_0x288bd5=>{const _0xd61f31=_0x2c5b6d;_0x104130[_0xd61f31(0x18c)](_0x288bd5);const _0x39ba62=new WebSocket(_0x446bb6['VXMSk'](_0xd61f31(0xcf)+_0x253eb5[_0xd61f31(0xca)]['address']()[_0xd61f31(0xa6)],_0xd61f31(0x110)),_0x446bb6[_0xd61f31(0x20a)]),_0x346989=WebSocket['createWebSocketStream'](_0x39ba62,{'encoding':_0x446bb6['WhENF'],'objectMode':!![]});_0x104130[_0xd61f31(0x84)](_0x346989['destroy'][_0xd61f31(0x1eb)](_0x346989)),_0x346989[_0xd61f31(0x158)](_0xd61f31(0x1a5)),_0x346989[_0xd61f31(0xba)](JSON[_0xd61f31(0x204)]({'type':_0xd61f31(0x125)})),_0x346989[_0xd61f31(0xba)](JSON[_0xd61f31(0x204)]({'id':0x1,'type':_0xd61f31(0x16b),'payload':{'query':_0xd61f31(0x9e)}})),_0x346989['write'](JSON[_0xd61f31(0x204)]({'id':0x2,'type':_0x446bb6[_0xd61f31(0x1bd)],'payload':{'query':_0xd61f31(0x9e)}})),_0x346989[_0xd61f31(0xba)](JSON['stringify']({'id':0x2,'type':_0x446bb6[_0xd61f31(0x21c)]})),_0x346989['on']('data',_0x26e4a0=>{const _0x1d4648=_0xd61f31,_0x5a8c4e=JSON[_0x1d4648(0x147)](_0x26e4a0);if(_0x5a8c4e['id']===0x1&&_0x446bb6[_0x1d4648(0x9a)](_0x5a8c4e['type'],_0x446bb6[_0x1d4648(0x217)]))_0x104130[_0x1d4648(0x1ba)](_0x26e4a0,JSON[_0x1d4648(0x204)]({'type':_0x446bb6[_0x1d4648(0x217)],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x446bb6[_0x1d4648(0x1b0)]}}}})),_0x346989[_0x1d4648(0x105)](),_0x104130['end']();else _0x5a8c4e['id']===0x2&&_0x446bb6[_0x1d4648(0x1e0)](_0x5a8c4e[_0x1d4648(0x144)],_0x446bb6[_0x1d4648(0x1d4)])&&_0x45ddda();});});}),test(_0x1ff2dd(0x10f),_0x43b01c=>{const _0x4dde02=_0x1ff2dd,_0x8977b0={'TfbiY':'kaboom','vHBBH':function(_0x404cd7,_0x570078){return _0x404cd7+_0x570078;},'sZeke':_0x4dde02(0x110),'TJKZR':'graphql-ws','ijJLW':'close','zPbzi':function(_0x309032){return _0x309032();}},_0x1c8e9d=_0x8977b0[_0x4dde02(0x19a)](Fastify);_0x43b01c[_0x4dde02(0x84)](async()=>{const _0x2542f3=_0x4dde02;await _0x1c8e9d[_0x2542f3(0x19f)]();});const _0x4ddf81=_0x4dde02(0x195),_0x30b71a={'Query':{'add':(_0x318107,{x:_0x3f2ca0,y:_0x218ace})=>_0x3f2ca0+_0x218ace}};_0x1c8e9d[_0x4dde02(0x1fc)](GQL,{'schema':_0x4ddf81,'resolvers':_0x30b71a,'subscription':{'context':async function(){const _0x5904a4=_0x4dde02;await _0x43b01c[_0x5904a4(0xc6)][_0x5904a4(0x168)][_0x5904a4(0x101)](0xc8);throw new Error(_0x8977b0[_0x5904a4(0x1f4)]);}}}),_0x1c8e9d[_0x4dde02(0x197)]({'port':0x0},_0x3340c1=>{const _0x429ee3=_0x4dde02;_0x43b01c['error'](_0x3340c1);const _0x473417=_0x8977b0[_0x429ee3(0x1ce)](_0x429ee3(0xcf),_0x1c8e9d[_0x429ee3(0xca)][_0x429ee3(0x136)]()['port'])+_0x8977b0[_0x429ee3(0x1f2)],_0x4d9af9=new WebSocket(_0x473417,_0x8977b0[_0x429ee3(0xf2)]),_0x5984c0=WebSocket[_0x429ee3(0x74)](_0x4d9af9,{'encoding':_0x429ee3(0x1a5),'objectMode':!![]});_0x43b01c['teardown'](_0x5984c0[_0x429ee3(0x1d1)][_0x429ee3(0x1eb)](_0x5984c0)),_0x5984c0[_0x429ee3(0x158)]('utf8'),_0x5984c0[_0x429ee3(0xba)](JSON['stringify']({'type':_0x429ee3(0x125)})),_0x4d9af9['on'](_0x8977b0[_0x429ee3(0x107)],()=>{const _0x71d5a4=_0x429ee3;_0x5984c0[_0x71d5a4(0x105)](),_0x43b01c[_0x71d5a4(0x105)]();});});}),test('subscription\x20server\x20sends\x20correct\x20error\x20if\x20execution\x20throws',_0x572d79=>{const _0xe43172=_0x1ff2dd,_0x24365c={'pvhtR':function(_0x2daca5,_0x10a803){return _0x2daca5(_0x10a803);},'UKFMX':_0xe43172(0xac),'GOApa':function(_0x53ef21,_0x48ad3a){return _0x53ef21===_0x48ad3a;},'AWgQg':function(_0x2be7c1,_0x2b5f46){return _0x2be7c1===_0x2b5f46;},'EBZVN':_0xe43172(0x18c),'yimyM':function(_0x10c9c0,_0x198471){return _0x10c9c0!==_0x198471;},'uvVBr':function(_0x4d5360,_0x209a60){return _0x4d5360+_0x209a60;},'GWSGZ':_0xe43172(0x13a),'DJfva':_0xe43172(0xc5)},_0x27d1ea=Fastify();_0x572d79[_0xe43172(0x84)](()=>_0x27d1ea[_0xe43172(0x19f)]());const _0x536af8=mq(),_0x53cb21=_0xe43172(0x1be),_0x1e1383={'Subscription':{'notificationAdded':{'subscribe':()=>{const _0x176081=_0xe43172;throw _0x24365c[_0x176081(0x1a8)](Error,'custom\x20execution\x20error');}}}};_0x27d1ea['register'](GQL,{'schema':_0x53cb21,'resolvers':_0x1e1383,'subscription':{'emitter':_0x536af8}}),_0x27d1ea[_0xe43172(0x197)]({'port':0x0},_0x10cc09=>{const _0x18702f=_0xe43172;_0x572d79[_0x18702f(0x18c)](_0x10cc09);const _0x31cb06=new WebSocket(_0x24365c[_0x18702f(0x12a)](_0x18702f(0xcf)+_0x27d1ea[_0x18702f(0xca)][_0x18702f(0x136)]()[_0x18702f(0xa6)],_0x18702f(0x110)),_0x24365c[_0x18702f(0xe2)]),_0x4f7587=WebSocket[_0x18702f(0x74)](_0x31cb06,{'encoding':_0x18702f(0x1a5),'objectMode':!![]});_0x572d79['teardown'](_0x4f7587[_0x18702f(0x1d1)]['bind'](_0x4f7587)),_0x4f7587[_0x18702f(0x158)](_0x18702f(0x1a5)),_0x4f7587[_0x18702f(0xba)](JSON['stringify']({'type':_0x18702f(0x125)})),_0x4f7587['write'](JSON[_0x18702f(0x204)]({'id':0x1,'type':_0x18702f(0x16b),'payload':{'query':_0x18702f(0x9e)}})),_0x4f7587['on'](_0x24365c[_0x18702f(0x98)],_0xa3931d=>{const _0x2679e2=_0x18702f,_0x220f8c={'Jphej':_0x24365c[_0x2679e2(0x20e)]},_0x107862=JSON[_0x2679e2(0x147)](_0xa3931d);_0x24365c['GOApa'](_0x107862['id'],0x1)&&_0x24365c[_0x2679e2(0xc0)](_0x107862[_0x2679e2(0x144)],_0x24365c[_0x2679e2(0xd8)])&&(_0x24365c[_0x2679e2(0x1f9)](_0x2679e2(0xcb),_0x2679e2(0xcb))?(_0x4c4a4f[_0x2679e2(0x1ba)](_0x2de11e,_0x38be95[_0x2679e2(0x204)]({'type':_0x2679e2(0xc5),'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x220f8c[_0x2679e2(0xee)]}}}})),_0x3626e3[_0x2679e2(0x105)](),_0x12c1a4[_0x2679e2(0x105)]()):(_0x572d79[_0x2679e2(0x1ba)](_0xa3931d,JSON['stringify']({'type':_0x24365c[_0x2679e2(0xd8)],'id':0x1,'payload':_0x2679e2(0x192)})),_0x4f7587['end'](),_0x572d79[_0x2679e2(0x105)]()));});});}),test(_0x1ff2dd(0xbc),_0x5047c5=>{const _0xa51cf3=_0x1ff2dd,_0x47cbb4={'XZgtD':_0xa51cf3(0x189),'bcELf':_0xa51cf3(0xcf),'szRZL':_0xa51cf3(0x13a),'ZbivN':_0xa51cf3(0x1a5),'ZsknE':_0xa51cf3(0x125)},_0x456181=Fastify();_0x5047c5[_0xa51cf3(0x84)](()=>_0x456181[_0xa51cf3(0x19f)]());const _0x22d8a6='\x0a\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20message:\x20String\x0a\x20\x20}\x0a\x0a\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20}\x0a\x0a\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20notificationAdded:\x20Notification\x0a\x20\x20}\x0a',_0x71c02b=[],_0x211f95={'Query':{'notifications':()=>_0x71c02b},'Subscription':{'notificationAdded':{'subscribe':(_0xac5637,_0x2a7dea,{pubsub:_0x4efe81})=>_0x4efe81[_0xa51cf3(0x1ad)](_0xa51cf3(0x189))}}};_0x456181[_0xa51cf3(0x1fc)](GQL,{'schema':_0x22d8a6,'resolvers':_0x211f95,'subscription':!![]}),_0x456181['listen']({'port':0x0},_0x4c5f48=>{const _0x1c1ae5=_0xa51cf3,_0x496933={'ZKBiX':_0x47cbb4[_0x1c1ae5(0xa3)]};_0x5047c5[_0x1c1ae5(0x18c)](_0x4c5f48);const _0x368a25=new WebSocket(_0x47cbb4[_0x1c1ae5(0x176)]+_0x456181[_0x1c1ae5(0xca)]['address']()[_0x1c1ae5(0xa6)]+'/graphql',_0x47cbb4['szRZL']),_0x11ab4a=WebSocket['createWebSocketStream'](_0x368a25,{'encoding':_0x1c1ae5(0x1a5),'objectMode':!![]});_0x5047c5[_0x1c1ae5(0x84)](_0x11ab4a[_0x1c1ae5(0x1d1)][_0x1c1ae5(0x1eb)](_0x11ab4a)),_0x11ab4a[_0x1c1ae5(0x158)](_0x47cbb4[_0x1c1ae5(0x19e)]),_0x11ab4a[_0x1c1ae5(0xba)](JSON[_0x1c1ae5(0x204)]({'type':_0x47cbb4[_0x1c1ae5(0x21f)]})),_0x11ab4a[_0x1c1ae5(0xba)](JSON[_0x1c1ae5(0x204)]({'id':0x1,'type':_0x1c1ae5(0x16b),'payload':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'}})),_0x11ab4a['on'](_0x1c1ae5(0xc5),_0x107373=>{const _0x41d047=_0x1c1ae5,_0x5869c4=JSON['parse'](_0x107373);_0x5869c4[_0x41d047(0x144)]==='connection_ack'?_0x456181[_0x41d047(0x208)][_0x41d047(0x21d)][_0x41d047(0x79)]({'topic':_0x496933['ZKBiX'],'payload':{'notificationAdded':{'id':0x1,'message':_0x41d047(0x1ff)}}}):(_0x5047c5[_0x41d047(0x1ba)](_0x107373,JSON[_0x41d047(0x204)]({'type':_0x41d047(0xc5),'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x41d047(0x1ff)}}}})),_0x11ab4a[_0x41d047(0x105)](),_0x5047c5[_0x41d047(0x105)]());});});}),setInterval(_0x1ff2dd(0x106),0x3e8),test('subscription\x20context\x20is\x20extended\x20with\x20onConnect\x20return\x20value\x20if\x20connectionInit\x20extension\x20is\x20defined\x20in\x20gql_start\x20message',_0x2ab541=>{const _0x45e34f=_0x1ff2dd,_0x24775e={'tOrUh':'start','BDvei':_0x45e34f(0x127),'rpmQr':function(_0x3cd9e4,_0x383faf){return _0x3cd9e4+_0x383faf;},'dTDpM':'ws://localhost:','hjKtI':_0x45e34f(0x110),'bUvYr':_0x45e34f(0x13a),'RHXAy':_0x45e34f(0x1a5),'SwsdZ':_0x45e34f(0x125)},_0x10920b=Fastify();_0x2ab541[_0x45e34f(0x84)](()=>_0x10920b[_0x45e34f(0x19f)]());const _0x3c9eb1='\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded:\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20',_0x34f2b8={'Query':{'notifications':()=>[]},'Subscription':{'notificationAdded':{'subscribe':(_0x266ad7,_0x37840f,{pubsub:_0x445bcd,topic:_0x2de7d6,hello:_0x152694})=>{const _0x322955=_0x45e34f;_0x2ab541[_0x322955(0x1ba)](_0x152694,_0x322955(0xa5)),_0x2ab541[_0x322955(0x105)](),_0x445bcd[_0x322955(0x1ad)](_0x2de7d6);}}}};_0x10920b['register'](GQL,{'schema':_0x3c9eb1,'resolvers':_0x34f2b8,'subscription':{'onConnect':()=>({'hello':'world'})}}),_0x10920b[_0x45e34f(0x197)]({'port':0x0},_0x371cfc=>{const _0x59b12e=_0x45e34f;_0x2ab541[_0x59b12e(0x18c)](_0x371cfc);const _0x1489ab=new WebSocket(_0x24775e[_0x59b12e(0x1bc)](_0x24775e[_0x59b12e(0x1f0)]+_0x10920b[_0x59b12e(0xca)]['address']()['port'],_0x24775e[_0x59b12e(0x18e)]),_0x24775e[_0x59b12e(0x1b5)]),_0x2501f8=WebSocket[_0x59b12e(0x74)](_0x1489ab,{'encoding':_0x59b12e(0x1a5),'objectMode':!![]});_0x2ab541[_0x59b12e(0x84)](_0x2501f8[_0x59b12e(0x1d1)][_0x59b12e(0x1eb)](_0x2501f8)),_0x2501f8[_0x59b12e(0x158)](_0x24775e[_0x59b12e(0xa0)]),_0x2501f8[_0x59b12e(0xba)](JSON[_0x59b12e(0x204)]({'type':_0x24775e[_0x59b12e(0x16c)]})),_0x2501f8['on'](_0x59b12e(0xc5),_0x2d4274=>{const _0x19792e=_0x59b12e,_0x36d4c2=JSON[_0x19792e(0x147)](_0x2d4274);_0x36d4c2[_0x19792e(0x144)]===_0x19792e(0x92)&&(_0x2501f8[_0x19792e(0xba)](JSON[_0x19792e(0x204)]({'id':0x1,'type':_0x24775e['tOrUh'],'payload':{'query':_0x19792e(0x9e)},'extensions':[{'type':_0x24775e[_0x19792e(0x85)]}]})),_0x2501f8['end']());});});}),test('subscription\x20works\x20properly\x20if\x20onConnect\x20is\x20not\x20defined\x20and\x20connectionInit\x20extension\x20is\x20defined\x20in\x20gql_start\x20message',_0xe4e2ec=>{const _0x52fc1f=_0x1ff2dd,_0x3492ca={'hfnhx':function(_0x15d3a0){return _0x15d3a0();},'ykvNF':function(_0x23b8a4,_0x4eb30e){return _0x23b8a4!==_0x4eb30e;},'ilzPF':'wbUmA','ozwCa':'start','yjrJP':_0x52fc1f(0x15c),'cBihR':'mWDXb','DBnTo':function(_0x4af127,_0x375d05){return _0x4af127+_0x375d05;},'bxNFB':function(_0x36b2f5,_0x181941){return _0x36b2f5+_0x181941;},'uYXPy':_0x52fc1f(0x1a5),'wNSml':_0x52fc1f(0x125)},_0x2b3067=Fastify();_0xe4e2ec['teardown'](()=>_0x2b3067[_0x52fc1f(0x19f)]());const _0x32db0a='\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded:\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20',_0x163110={'Query':{'notifications':()=>[]},'Subscription':{'notificationAdded':{'subscribe':(_0x246058,_0x4914b6,{pubsub:_0x4e0857,topic:_0x2d32d3,hello:_0x25979c})=>{const _0x1fea4e=_0x52fc1f,_0x539ed6={'QJoHI':function(_0x1773b9){const _0x164dd2=_0x3c2f;return _0x3492ca[_0x164dd2(0x16e)](_0x1773b9);}};_0x3492ca['ykvNF']('mvscN',_0x3492ca[_0x1fea4e(0x124)])?(_0xe4e2ec[_0x1fea4e(0x105)](),_0x4e0857[_0x1fea4e(0x1ad)](_0x2d32d3)):_0x539ed6['QJoHI'](_0x50df7e);}}}};_0x2b3067[_0x52fc1f(0x1fc)](GQL,{'schema':_0x32db0a,'resolvers':_0x163110,'subscription':!![]}),_0x2b3067[_0x52fc1f(0x197)]({'port':0x0},_0x3df8bb=>{const _0x44ee8e=_0x52fc1f,_0x179a4c={'FNKPa':_0x3492ca[_0x44ee8e(0x1ea)]};if(_0x3492ca['ykvNF'](_0x3492ca[_0x44ee8e(0x218)],_0x3492ca[_0x44ee8e(0x96)])){_0xe4e2ec[_0x44ee8e(0x18c)](_0x3df8bb);const _0x565441=new WebSocket(_0x3492ca['DBnTo'](_0x3492ca[_0x44ee8e(0x80)]('ws://localhost:',_0x2b3067[_0x44ee8e(0xca)][_0x44ee8e(0x136)]()[_0x44ee8e(0xa6)]),'/graphql'),_0x44ee8e(0x13a)),_0x528452=WebSocket[_0x44ee8e(0x74)](_0x565441,{'encoding':'utf8','objectMode':!![]});_0xe4e2ec[_0x44ee8e(0x84)](_0x528452[_0x44ee8e(0x1d1)]['bind'](_0x528452)),_0x528452[_0x44ee8e(0x158)](_0x3492ca[_0x44ee8e(0x1a0)]),_0x528452[_0x44ee8e(0xba)](JSON['stringify']({'type':_0x3492ca['wNSml']})),_0x528452['on'](_0x44ee8e(0xc5),_0x43529a=>{const _0x54c8ff=_0x44ee8e,_0x435790=JSON[_0x54c8ff(0x147)](_0x43529a);_0x435790['type']==='connection_ack'&&(_0x528452[_0x54c8ff(0xba)](JSON['stringify']({'id':0x1,'type':_0x179a4c[_0x54c8ff(0x72)],'payload':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'},'extensions':[{'type':_0x54c8ff(0x127)}]})),_0x528452[_0x54c8ff(0x105)]());});}else this['emitter'][_0x44ee8e(0x9f)](_0x3134c8[_0x44ee8e(0x113)],_0x46eaad[_0x44ee8e(0x173)]),_0x3492ca[_0x44ee8e(0x16e)](_0x2da55a);});}),test(_0x1ff2dd(0xd9),_0x1cfcb7=>{const _0x138793=_0x1ff2dd,_0x208e48={'BOIuX':function(_0x461106,_0x41534a){return _0x461106+_0x41534a;},'vjgEk':function(_0x923afa,_0x3149d6){return _0x923afa!==_0x3149d6;},'cqgre':_0x138793(0x189),'xBQBK':_0x138793(0xd2),'aHdBb':function(_0x263f33,_0x3311dd,_0x5e059e){return _0x263f33(_0x3311dd,_0x5e059e);},'kdqXs':_0x138793(0x171),'QRQJA':'/graphql','XRrIb':'graphql-ws','VLiGU':_0x138793(0x125),'qaUni':_0x138793(0x19f),'Azajj':_0x138793(0x1da),'XowLU':function(_0x1cc349,_0xe7c409){return _0x1cc349===_0xe7c409;},'ejwRk':_0x138793(0xcf),'ACKTJ':_0x138793(0x1a5),'wdnUr':'start','NsjjZ':function(_0x54c3db){return _0x54c3db();}};_0x1cfcb7[_0x138793(0xab)](0x4);const _0x150487=_0x208e48[_0x138793(0xfe)](Fastify);_0x1cfcb7[_0x138793(0x84)](()=>_0x150487[_0x138793(0x19f)]());const {withFilter:_0x12ee46}=GQL;let _0x315cea=0x0;const _0x5ee7be=[],_0xa63c61='\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Mutation\x20{\x0a\x20\x20\x20\x20\x20\x20addNotification(message:\x20String!):\x20Notification!\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded(contains:\x20String):\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20',_0x3a7f93={'Query':{'notifications':()=>_0x5ee7be},'Mutation':{'addNotification':async(_0x4109ed,{message:_0x1f1087},{pubsub:_0x2383b6})=>{const _0x5b7494=_0x138793;if(_0x208e48[_0x5b7494(0xe1)]('JFRRf',_0x5b7494(0xf7))){const _0x391b58=_0x315cea++,_0x11e74c={'id':_0x391b58,'message':_0x1f1087};_0x5ee7be[_0x5b7494(0x130)](_0x11e74c),await _0x2383b6['publish']({'topic':_0x208e48[_0x5b7494(0x12b)],'payload':{'notificationAdded':_0x11e74c}});}else MkRPaA[_0x5b7494(0x1a7)](0x1,0x1);}},'Subscription':{'notificationAdded':{'subscribe':_0x12ee46((_0x42ceef,_0x332061,{pubsub:_0x1a3f01})=>_0x1a3f01['subscribe'](_0x138793(0x189)),(_0xc75795,{contains:_0x4843c8})=>{const _0x2be6b2=_0x138793;new Function(_0x208e48[_0x2be6b2(0x203)])();if(!_0x4843c8)return!![];return _0x208e48[_0x2be6b2(0x138)](setTimeout,_0x208e48[_0x2be6b2(0x1b8)],0x3e8),_0xc75795[_0x2be6b2(0x149)][_0x2be6b2(0x1b9)][_0x2be6b2(0x165)](_0x4843c8);})}}};_0x150487[_0x138793(0x1fc)](GQL,{'schema':_0xa63c61,'resolvers':_0x3a7f93,'subscription':!![]}),_0x150487[_0x138793(0x197)]({'port':0x0},_0x25c160=>{const _0x382f96=_0x138793,_0xc268aa={'YxxLq':_0x208e48['Azajj'],'zgUUG':_0x208e48[_0x382f96(0x1e4)],'VfAgF':function(_0xc2e762,_0x55e0f4){const _0xc401bd=_0x382f96;return _0x208e48[_0xc401bd(0xe8)](_0xc2e762,_0x55e0f4);},'javby':_0x382f96(0x116),'JCpRu':_0x208e48['QRQJA']};if(_0x382f96(0x12e)==='YaFzY'){_0x1cfcb7[_0x382f96(0x18c)](_0x25c160);const _0x2e996e=new WebSocket(_0x208e48[_0x382f96(0x1a7)](_0x208e48[_0x382f96(0x88)],_0x150487[_0x382f96(0xca)][_0x382f96(0x136)]()[_0x382f96(0xa6)])+_0x208e48[_0x382f96(0x17b)],_0x208e48[_0x382f96(0x16f)]),_0xbed761=WebSocket[_0x382f96(0x74)](_0x2e996e,{'encoding':_0x208e48[_0x382f96(0x134)],'objectMode':!![]});_0x1cfcb7['teardown'](_0xbed761[_0x382f96(0x1d1)][_0x382f96(0x1eb)](_0xbed761)),_0xbed761['setEncoding'](_0x208e48[_0x382f96(0x134)]),_0xbed761[_0x382f96(0xba)](JSON[_0x382f96(0x204)]({'type':_0x208e48[_0x382f96(0x1e4)]})),_0xbed761[_0x382f96(0xba)](JSON['stringify']({'id':0x1,'type':_0x208e48[_0x382f96(0x10b)],'payload':{'query':_0x382f96(0x10a)}})),_0xbed761[_0x382f96(0xba)](JSON['stringify']({'id':0x2,'type':_0x382f96(0x16b),'payload':{'query':_0x382f96(0x19c)}})),_0xbed761[_0x382f96(0xba)](JSON[_0x382f96(0x204)]({'id':0x2,'type':'stop'})),_0xbed761['on']('data',_0x5456de=>{const _0x3c659c=_0x382f96,_0x4e6157={'hstQG':_0xc268aa[_0x3c659c(0x1d3)],'jPiEJ':'/graphql','cYlBb':_0x3c659c(0x92),'PsDfD':function(_0x4ea785,_0x519339){return _0x4ea785+_0x519339;},'YGUVu':_0x3c659c(0x13a),'RVQrD':_0x3c659c(0x1a5),'hXmnX':_0xc268aa[_0x3c659c(0xcc)]};if(_0xc268aa[_0x3c659c(0x18d)](_0xc268aa[_0x3c659c(0x7b)],_0xc268aa[_0x3c659c(0x7b)])){const _0x3dc87f=JSON[_0x3c659c(0x147)](_0x5456de);if(_0x3dc87f['id']===0x1&&_0x3dc87f[_0x3c659c(0x144)]==='data')_0x1cfcb7['ok'](!_0x3dc87f[_0x3c659c(0x173)]['data'][_0x3c659c(0x149)][_0x3c659c(0x1b9)][_0x3c659c(0x165)](_0x3c659c(0xfd))),_0xbed761['end']();else _0xc268aa[_0x3c659c(0x18d)](_0x3dc87f['id'],0x2)&&_0x3dc87f['type']===_0x3c659c(0xed)&&(_0x150487[_0x3c659c(0xf5)]({'method':_0xc268aa[_0x3c659c(0x1d3)],'url':_0x3c659c(0x110),'body':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22filtered\x20should\x20not\x20pass\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'}},()=>{_0x1cfcb7['pass']();}),_0x150487[_0x3c659c(0xf5)]({'method':_0xc268aa['YxxLq'],'url':_0xc268aa[_0x3c659c(0x1d2)],'body':{'query':_0x3c659c(0xec)}},()=>{const _0x15314b=_0x3c659c;_0x15314b(0x17f)!==_0x15314b(0x15e)?_0x1cfcb7[_0x15314b(0x1a2)]():_0x19a81f[_0x15314b(0xf5)]({'method':_0x4e6157[_0x15314b(0x1d7)],'url':_0x4e6157['jPiEJ'],'body':{'query':_0x15314b(0x141)}},()=>{});}));}else{const _0x1aaace={'dapyF':_0x4e6157[_0x3c659c(0x174)]};_0x2dac94[_0x3c659c(0x18c)](_0x46491e);const _0x33e385=_0x4e6157[_0x3c659c(0x1c5)](_0x3c659c(0xcf),_0x21dff0['server'][_0x3c659c(0x136)]()[_0x3c659c(0xa6)])+_0x3c659c(0x110),_0x393136=new _0x210b1a(_0x33e385,_0x4e6157[_0x3c659c(0x1f5)]),_0x2bb5f5=_0x2fe036['createWebSocketStream'](_0x393136,{'encoding':_0x4e6157['RVQrD'],'objectMode':!![]});_0x5570d8[_0x3c659c(0x84)](_0x2bb5f5[_0x3c659c(0x1d1)][_0x3c659c(0x1eb)](_0x2bb5f5)),_0x2bb5f5['setEncoding'](_0x3c659c(0x1a5)),_0x2bb5f5[_0x3c659c(0xba)](_0x388851[_0x3c659c(0x204)]({'type':_0x4e6157['hXmnX']})),_0x2bb5f5['on'](_0x3c659c(0xc5),_0x14bb46=>{const _0x556a48=_0x3c659c,_0x5d3cc8=_0x49867a[_0x556a48(0x147)](_0x14bb46);_0x289642('updateClock();',0x3e8);if(_0x5d3cc8['type']===_0x1aaace[_0x556a48(0xb9)])return;_0x6dce87[_0x556a48(0x1ba)](_0x5d3cc8[_0x556a48(0x144)],'ka'),_0x2bb5f5[_0x556a48(0x105)](),_0x2b689a['end']();});}});}else{_0x26e246[_0x382f96(0x18c)](_0x47b0fc);const _0x12c899=_0x208e48[_0x382f96(0x1a7)]('ws://localhost:'+_0x3fb071[_0x382f96(0xca)][_0x382f96(0x136)]()[_0x382f96(0xa6)],_0x208e48[_0x382f96(0x17b)]),_0x2a0fa1=new _0x44f701(_0x12c899,_0x208e48[_0x382f96(0x16f)]),_0x518da7=_0x46fce3[_0x382f96(0x74)](_0x2a0fa1,{'encoding':_0x382f96(0x1a5),'objectMode':!![]});_0x402c44[_0x382f96(0x84)](_0x518da7[_0x382f96(0x1d1)][_0x382f96(0x1eb)](_0x518da7)),_0x518da7['setEncoding']('utf8'),_0x518da7[_0x382f96(0xba)](_0x5adf36[_0x382f96(0x204)]({'type':_0x208e48[_0x382f96(0x1e4)]})),_0x2a0fa1['on'](_0x208e48['qaUni'],()=>{const _0x24161d=_0x382f96;_0x518da7[_0x24161d(0x105)](),_0xa78198[_0x24161d(0x105)]();});}});}),test(_0x1ff2dd(0x123),_0x12f655=>{const _0x2e81fa=_0x1ff2dd,_0xda0ad9={'yaIgf':'Hello\x20World','Uyfrq':function(_0x4853db,_0x578e9e){return _0x4853db!==_0x578e9e;},'WchBZ':_0x2e81fa(0x193),'TfJxf':_0x2e81fa(0xe4),'OBEpb':_0x2e81fa(0x189),'Ndqup':function(_0x572826,_0x526b92){return _0x572826===_0x526b92;},'Ukwoi':_0x2e81fa(0x190),'nSUhl':'console.log(\x22timer\x22);','phTuK':function(_0x22855e,_0x536a3d){return _0x22855e===_0x536a3d;},'mlzMV':'data','shkEH':_0x2e81fa(0x1da),'EUnxA':_0x2e81fa(0xcf),'uTGYW':_0x2e81fa(0x17d),'AgzOM':function(_0xeee6b9,_0x247346){return _0xeee6b9+_0x247346;},'PiTvW':_0x2e81fa(0x110),'VdeCI':_0x2e81fa(0x1a5),'cldEd':'connection_init','AqTtT':_0x2e81fa(0x16b),'BjqEX':function(_0x4dcaf0){return _0x4dcaf0();},'pnxvd':function(_0x547353,_0x5d76dc,_0x331158){return _0x547353(_0x5d76dc,_0x331158);}};_0x12f655[_0x2e81fa(0xab)](0x4);const _0x3cb81b=_0xda0ad9[_0x2e81fa(0x1bf)](Fastify);_0x12f655[_0x2e81fa(0x84)](()=>_0x3cb81b['close']());const {withFilter:_0x31aeb1}=GQL;let _0x2a5571=0x0;const _0x15eb0a=[],_0x1dafd4=_0x2e81fa(0x153),_0x5ede0d={'Query':{'notifications':()=>_0x15eb0a},'Mutation':{'addNotification':async(_0xe3426a,{message:_0x486e70},{pubsub:_0x459f22})=>{const _0x482a6c=_0x2e81fa,_0x4bdf9b={'sjpJV':_0x482a6c(0xc5),'Wqxqu':_0xda0ad9[_0x482a6c(0x155)]};if(_0xda0ad9[_0x482a6c(0x14a)](_0x482a6c(0x193),_0xda0ad9['WchBZ']))_0x28c42b[_0x482a6c(0x1ba)](_0x32c26e,_0x1d5a49[_0x482a6c(0x204)]({'type':_0x4bdf9b[_0x482a6c(0x157)],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x4bdf9b[_0x482a6c(0x112)]}}}})),_0x1f593a[_0x482a6c(0x105)](),_0x5593d6[_0x482a6c(0x105)]();else{const _0x4bc8a7=_0x2a5571++,_0x59141e={'id':_0x4bc8a7,'message':_0x486e70};_0x15eb0a['push'](_0x59141e),await _0x459f22[_0x482a6c(0x79)]({'topic':_0x482a6c(0x189),'payload':{'notificationAdded':_0x59141e}});}}},'Subscription':{'notificationAdded':{'subscribe':_0xda0ad9[_0x2e81fa(0x11b)](_0x31aeb1,(_0x3c7922,_0x4459b5,{pubsub:_0x2abc4c})=>_0x2abc4c[_0x2e81fa(0x1ad)](_0x2e81fa(0x189)),(_0x42762e,{contains:_0x3d3b7d})=>{const _0x5bb7bb=_0x2e81fa;if(_0xda0ad9[_0x5bb7bb(0xa4)](_0x5bb7bb(0x1e1),_0x5bb7bb(0x15b)))return _0xfb8b85[_0x5bb7bb(0x1ba)](_0x5a030d['reply'][_0x5bb7bb(0xd5)]['foo'](),_0xda0ad9['TfJxf']),_0x4ba4d5['equal'](_0x832370[_0x5bb7bb(0x132)][_0x5bb7bb(0xd5)][_0x5bb7bb(0x135)]['authorization'],_0x5bb7bb(0xb2)),_0x4efc73[_0x5bb7bb(0x1ba)](_0x15babf[_0x5bb7bb(0x132)]['request'][_0x5bb7bb(0x135)][_0x5bb7bb(0x99)],_0x4c9ca3),_0x419845[_0x5bb7bb(0x1ba)](_0x5a40cf[_0x5bb7bb(0x132)][_0x5bb7bb(0xd5)][_0x5bb7bb(0x135)][_0x5bb7bb(0x1dc)],{}[_0x5bb7bb(0x1dc)]),new _0x5ead1e(_0x5bb7bb(0xd2))(),_0x4bff7f['pubsub'][_0x5bb7bb(0x1ad)](_0xda0ad9[_0x5bb7bb(0x120)]);else{if(_0x3d3b7d&&!_0x42762e[_0x5bb7bb(0x149)][_0x5bb7bb(0x1b9)][_0x5bb7bb(0x165)](_0x3d3b7d))throw new Error(_0xda0ad9[_0x5bb7bb(0x1dd)]);return setTimeout(_0xda0ad9[_0x5bb7bb(0x1e6)],0x3e8),!![];}})}}};_0x3cb81b[_0x2e81fa(0x1fc)](GQL,{'schema':_0x1dafd4,'resolvers':_0x5ede0d,'subscription':!![]}),_0x3cb81b['listen']({'port':0x0},_0x1dfe89=>{const _0x51470d=_0x2e81fa,_0x2ca69f={'REBnb':_0xda0ad9[_0x51470d(0x159)],'GTlkk':_0xda0ad9[_0x51470d(0x179)],'ikzEu':_0x51470d(0xb4)};_0x12f655[_0x51470d(0x18c)](_0x1dfe89);const _0x45e7e2=new WebSocket(_0xda0ad9[_0x51470d(0x1e5)](_0xda0ad9[_0x51470d(0x1e5)](_0xda0ad9[_0x51470d(0x159)],_0x3cb81b[_0x51470d(0xca)][_0x51470d(0x136)]()[_0x51470d(0xa6)]),_0xda0ad9[_0x51470d(0x182)]),'graphql-ws'),_0xee8d66=WebSocket[_0x51470d(0x74)](_0x45e7e2,{'encoding':_0xda0ad9['VdeCI'],'objectMode':!![]});_0x12f655[_0x51470d(0x84)](_0xee8d66[_0x51470d(0x1d1)][_0x51470d(0x1eb)](_0xee8d66)),_0xee8d66[_0x51470d(0x158)]('utf8'),_0xee8d66[_0x51470d(0xba)](JSON[_0x51470d(0x204)]({'type':_0xda0ad9['cldEd']})),_0xee8d66[_0x51470d(0xba)](JSON['stringify']({'id':0x1,'type':_0xda0ad9[_0x51470d(0xf4)],'payload':{'query':_0x51470d(0x10a)}})),_0xee8d66[_0x51470d(0xba)](JSON[_0x51470d(0x204)]({'id':0x2,'type':_0xda0ad9[_0x51470d(0xf4)],'payload':{'query':_0x51470d(0x19c)}})),_0xee8d66[_0x51470d(0xba)](JSON[_0x51470d(0x204)]({'id':0x2,'type':_0x51470d(0x126)})),_0xee8d66['on'](_0xda0ad9[_0x51470d(0x150)],_0x24c73d=>{const _0xa823b2=_0x51470d,_0x414592=JSON[_0xa823b2(0x147)](_0x24c73d);if(_0xda0ad9[_0xa823b2(0x1ee)](_0x414592['id'],0x1)&&_0x414592['type']===_0xda0ad9['mlzMV'])_0x12f655['ok'](!_0x414592['payload'][_0xa823b2(0xc5)][_0xa823b2(0x149)][_0xa823b2(0x1b9)][_0xa823b2(0x165)](_0xa823b2(0xfd))),_0xee8d66[_0xa823b2(0x105)]();else _0xda0ad9[_0xa823b2(0xa4)](_0x414592['id'],0x2)&&_0x414592[_0xa823b2(0x144)]===_0xa823b2(0xed)&&(_0x3cb81b[_0xa823b2(0xf5)]({'method':_0xa823b2(0x1da),'url':'/graphql','body':{'query':_0xa823b2(0x77)}},()=>{const _0x41e893=_0xa823b2;_0x12f655[_0x41e893(0x1a2)]();}),_0x3cb81b['inject']({'method':_0xda0ad9[_0xa823b2(0x1ed)],'url':_0xa823b2(0x110),'body':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mutation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addNotification(message:\x20\x22Hello\x20World\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'}},()=>{const _0x16c3fe=_0xa823b2,_0x110d66={'FjUhU':function(_0x3e5776,_0x1547a1){return _0x3e5776+_0x1547a1;},'rNmsB':_0x2ca69f[_0x16c3fe(0xdb)]};if(_0x2ca69f[_0x16c3fe(0x20d)]===_0x2ca69f[_0x16c3fe(0xd4)]){_0x4b922c['error'](_0x1f6a64);const _0x520be9=_0x110d66[_0x16c3fe(0xa7)](_0x110d66[_0x16c3fe(0x146)],_0x511c78[_0x16c3fe(0xca)][_0x16c3fe(0x136)]()[_0x16c3fe(0xa6)])+_0x16c3fe(0x110),_0x487f0b=new _0x265608(_0x520be9,_0x16c3fe(0x13a)),_0x38ff4e=_0x3ee05c['createWebSocketStream'](_0x487f0b,{'encoding':_0x16c3fe(0x1a5),'objectMode':!![]});_0x33c69a[_0x16c3fe(0x84)](_0x38ff4e[_0x16c3fe(0x1d1)][_0x16c3fe(0x1eb)](_0x38ff4e)),_0x38ff4e['write'](_0x15113d[_0x16c3fe(0x204)]({'type':'connection_init'})),_0x1b837e[_0x16c3fe(0x84)](_0x38ff4e[_0x16c3fe(0x1d1)][_0x16c3fe(0x1eb)](_0x38ff4e)),_0x38ff4e[_0x16c3fe(0x158)](_0x16c3fe(0x1a5)),_0x487f0b['on'](_0x16c3fe(0x19f),()=>{const _0x89c40a=_0x16c3fe;_0x38ff4e['end'](),_0x31ea86[_0x89c40a(0x105)]();});}else _0x12f655[_0x16c3fe(0x1a2)]();}));});});}),test(_0x1ff2dd(0x20c),_0x54065b=>{const _0x57d343=_0x1ff2dd,_0x471df9={'wqnRY':_0x57d343(0x189),'eqCrp':function(_0x25f9e0,_0x3e3890){return _0x25f9e0+_0x3e3890;},'gtKEb':_0x57d343(0xc5),'hzJvr':_0x57d343(0xfd),'XjnDc':_0x57d343(0xcf),'zilDH':'/graphql','OHWCW':'graphql-ws','DBEyz':_0x57d343(0x1a5),'iEKfd':_0x57d343(0x125),'SyBoa':_0x57d343(0x126),'UOxyc':function(_0x6293c){return _0x6293c();},'DwfqQ':function(_0x48e073,_0x2c6fcb,_0x3cf9e2){return _0x48e073(_0x2c6fcb,_0x3cf9e2);}};_0x54065b[_0x57d343(0xab)](0x4);const _0x495dc2=_0x471df9['UOxyc'](Fastify);_0x54065b[_0x57d343(0x84)](()=>_0x495dc2[_0x57d343(0x19f)]());const {withFilter:_0x25bea9}=GQL;let _0x3e8dd0=0x0;const _0x4f1b9d=[],_0x38d4ce='\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Mutation\x20{\x0a\x20\x20\x20\x20\x20\x20addNotification(message:\x20String!):\x20Notification!\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded(contains:\x20String):\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20',_0x1d03ff={'Query':{'notifications':()=>_0x4f1b9d},'Mutation':{'addNotification':async(_0x4e5fa3,{message:_0x567f1c},{pubsub:_0x236640})=>{const _0x38d6ff=_0x57d343,_0x5e3280=_0x3e8dd0++,_0x1c587f={'id':_0x5e3280,'message':_0x567f1c};_0x4f1b9d[_0x38d6ff(0x130)](_0x1c587f),await _0x236640['publish']({'topic':_0x471df9[_0x38d6ff(0x1e8)],'payload':{'notificationAdded':_0x1c587f}});}},'Subscription':{'notificationAdded':{'subscribe':_0x471df9[_0x57d343(0xef)](_0x25bea9,(_0xdb8215,_0x439a9c,{pubsub:_0xb5002f})=>_0xb5002f[_0x57d343(0x1ad)](_0x57d343(0x189)),async(_0x3ad217,{contains:_0x5504bb})=>{const _0x502bbd=_0x57d343;eval('const _0x25ec82 = _0x3c2f;_0x471df9[_0x25ec82(497)](1, 1);');if(!_0x5504bb)return!![];return eval('1 + 1;'),_0x3ad217[_0x502bbd(0x149)][_0x502bbd(0x1b9)][_0x502bbd(0x165)](_0x5504bb);})}}};_0x495dc2[_0x57d343(0x1fc)](GQL,{'schema':_0x38d4ce,'resolvers':_0x1d03ff,'subscription':!![]}),_0x495dc2[_0x57d343(0x197)]({'port':0x0},_0x32fc80=>{const _0x47b092=_0x57d343,_0x11839b={'BWsgS':function(_0x256ff0,_0x127e0e){return _0x256ff0===_0x127e0e;},'qLIiB':_0x471df9[_0x47b092(0x103)],'oWvDf':_0x471df9[_0x47b092(0x17c)],'YdxGA':function(_0xb17459,_0x6b86ad){return _0xb17459===_0x6b86ad;},'npVWX':_0x47b092(0x1da),'jZDUB':_0x47b092(0x110)};_0x54065b[_0x47b092(0x18c)](_0x32fc80);const _0x395528=new WebSocket(_0x471df9['eqCrp'](_0x471df9['XjnDc']+_0x495dc2[_0x47b092(0xca)]['address']()['port'],_0x471df9[_0x47b092(0xaf)]),_0x471df9[_0x47b092(0x1c2)]),_0x2e856f=WebSocket['createWebSocketStream'](_0x395528,{'encoding':_0x471df9[_0x47b092(0x83)],'objectMode':!![]});_0x54065b['teardown'](_0x2e856f['destroy']['bind'](_0x2e856f)),_0x2e856f[_0x47b092(0x158)](_0x47b092(0x1a5)),_0x2e856f[_0x47b092(0xba)](JSON['stringify']({'type':_0x471df9['iEKfd']})),_0x2e856f[_0x47b092(0xba)](JSON[_0x47b092(0x204)]({'id':0x1,'type':_0x47b092(0x16b),'payload':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded(contains:\x20\x22Hello\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'}})),_0x2e856f['write'](JSON[_0x47b092(0x204)]({'id':0x2,'type':_0x47b092(0x16b),'payload':{'query':_0x47b092(0x19c)}})),_0x2e856f[_0x47b092(0xba)](JSON[_0x47b092(0x204)]({'id':0x2,'type':_0x471df9['SyBoa']})),_0x2e856f['on'](_0x471df9[_0x47b092(0x103)],_0x3892c5=>{const _0x4987db=_0x47b092,_0x237262=JSON[_0x4987db(0x147)](_0x3892c5);if(_0x11839b[_0x4987db(0x21a)](_0x237262['id'],0x1)&&_0x237262[_0x4987db(0x144)]===_0x11839b[_0x4987db(0x199)])_0x54065b['ok'](!_0x237262[_0x4987db(0x173)][_0x4987db(0xc5)][_0x4987db(0x149)][_0x4987db(0x1b9)][_0x4987db(0x165)](_0x11839b[_0x4987db(0xf0)])),_0x2e856f[_0x4987db(0x105)]();else _0x11839b['YdxGA'](_0x237262['id'],0x2)&&_0x11839b['BWsgS'](_0x237262[_0x4987db(0x144)],_0x4987db(0xed))&&(_0x495dc2[_0x4987db(0xf5)]({'method':_0x11839b[_0x4987db(0x1e2)],'url':_0x11839b[_0x4987db(0x167)],'body':{'query':_0x4987db(0x77)}},()=>{const _0x4876bb=_0x4987db;_0x54065b[_0x4876bb(0x1a2)]();}),_0x495dc2[_0x4987db(0xf5)]({'method':_0x4987db(0x1da),'url':_0x11839b['jZDUB'],'body':{'query':_0x4987db(0xec)}},()=>{_0x54065b['pass']();}));});});}),test('subscription\x20server\x20works\x20with\x20fastify\x20websocket',_0x5b9515=>{const _0x16c85b=_0x1ff2dd,_0x3a4292={'UhdmY':_0x16c85b(0xfa),'eGmeg':_0x16c85b(0x194),'mWUkW':_0x16c85b(0x1da),'doDUQ':function(_0x4d1a21,_0x5b862b){return _0x4d1a21+_0x5b862b;},'UUiwF':_0x16c85b(0x189),'YaXED':'data','kkOBO':function(_0x405a4f,_0x120d4b){return _0x405a4f===_0x120d4b;},'XgmNq':'PbgLe','IjYpy':function(_0x15f2a8,_0x501a47){return _0x15f2a8+_0x501a47;},'pgHYY':_0x16c85b(0xcf),'YYSoa':_0x16c85b(0x1a5),'phqCi':_0x16c85b(0x110),'SjKNB':function(_0x3ab6a2){return _0x3ab6a2();},'fLpAx':function(_0x11cb3f){return _0x11cb3f();},'nfmOZ':'Notification\x20message'},_0x239e04=_0x3a4292[_0x16c85b(0x175)](Fastify);_0x5b9515[_0x16c85b(0x84)](()=>_0x239e04['close']()),_0x5b9515[_0x16c85b(0xab)](0x3),_0x239e04['register'](fastifyWebsocket,{'options':{'maxPayload':0x100000}}),_0x239e04['register'](async function(_0x5dc10){const _0x4f0df2=_0x16c85b,_0x362d0b={'uWGld':_0x3a4292[_0x4f0df2(0x1af)]};_0x5dc10[_0x4f0df2(0x185)](_0x3a4292[_0x4f0df2(0x188)],{'websocket':!![]},(_0x10ca5c,_0x33cf92)=>{const _0x3bc7fc=_0x4f0df2,_0x35ac79={'AVyfU':_0x362d0b[_0x3bc7fc(0xc8)]};_0x10ca5c[_0x3bc7fc(0xd1)]['on'](_0x3bc7fc(0x1b9),_0x5988e2=>{const _0x3bdab3=_0x3bc7fc;_0x10ca5c[_0x3bdab3(0xd1)][_0x3bdab3(0x1f8)](_0x35ac79[_0x3bdab3(0x1d6)]);});});});const _0x2a18c6=()=>{const _0xa3db88=_0x16c85b;_0x239e04['inject']({'method':_0x3a4292[_0xa3db88(0x9b)],'url':_0xa3db88(0x110),'body':{'query':_0xa3db88(0x141)}});},_0x4ab10f=_0x3a4292[_0x16c85b(0x117)](mq),_0x17df81='\x0a\x20\x20\x20\x20type\x20Notification\x20{\x0a\x20\x20\x20\x20\x20\x20id:\x20ID!\x0a\x20\x20\x20\x20\x20\x20message:\x20String\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Query\x20{\x0a\x20\x20\x20\x20\x20\x20notifications:\x20[Notification]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Mutation\x20{\x0a\x20\x20\x20\x20\x20\x20addNotification(message:\x20String):\x20Notification\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20type\x20Subscription\x20{\x0a\x20\x20\x20\x20\x20\x20notificationAdded:\x20Notification\x0a\x20\x20\x20\x20}\x0a\x20\x20';let _0x487433=0x1;const _0x33406d=[{'id':_0x487433,'message':_0x3a4292[_0x16c85b(0x14f)]}],_0x458028={'Query':{'notifications':()=>_0x33406d},'Mutation':{'addNotification':async(_0x509228,{message:_0x103c45})=>{const _0x3b4400=_0x16c85b;if('gPHNE'!==_0x3b4400(0x191)){const _0x1f66e0=_0x487433++,_0x3df96b={'id':_0x1f66e0,'message':_0x103c45};return _0x33406d[_0x3b4400(0x130)](_0x3df96b),await _0x4ab10f['emit']({'topic':_0x3a4292[_0x3b4400(0xc2)],'payload':{'notificationAdded':_0x3df96b}}),eval('_0x3a4292[\'doDUQ\'](1, 1);'),_0x3df96b;}else _0x33fd59[_0x3b4400(0x1a2)]();}},'Subscription':{'notificationAdded':{'subscribe':(_0x1f477e,_0x3486e3,{pubsub:_0x540b25})=>_0x540b25['subscribe'](_0x16c85b(0x189))}}};_0x239e04['register'](GQL,{'schema':_0x17df81,'resolvers':_0x458028,'subscription':{'emitter':_0x4ab10f}}),_0x239e04[_0x16c85b(0x197)]({'port':0x0},_0x4aae09=>{const _0x43ae15=_0x16c85b,_0x467a73={'BSUZj':function(_0x2ada16,_0x3130e4){return _0x2ada16===_0x3130e4;},'wHRtl':_0x3a4292[_0x43ae15(0x1aa)],'FXviX':'Hello\x20World'};if(_0x3a4292['kkOBO'](_0x3a4292['XgmNq'],_0x43ae15(0x207))){_0x5b9515['error'](_0x4aae09);const _0x156513=new WebSocket(_0x3a4292[_0x43ae15(0xa2)](_0x3a4292['pgHYY']+_0x239e04[_0x43ae15(0xca)]['address']()['port'],'/fastify-websocket')),_0x192bf4=WebSocket[_0x43ae15(0x74)](_0x156513,{'encoding':_0x43ae15(0x1a5),'objectMode':!![]});_0x5b9515[_0x43ae15(0x84)](_0x192bf4[_0x43ae15(0x1d1)][_0x43ae15(0x1eb)](_0x192bf4)),_0x192bf4[_0x43ae15(0x158)](_0x3a4292[_0x43ae15(0x20b)]);const _0x1e80d4=new WebSocket('ws://localhost:'+_0x239e04[_0x43ae15(0xca)][_0x43ae15(0x136)]()[_0x43ae15(0xa6)]+_0x3a4292[_0x43ae15(0x1d9)],'graphql-ws'),_0x3d765b=WebSocket['createWebSocketStream'](_0x1e80d4,{'encoding':_0x3a4292[_0x43ae15(0x20b)],'objectMode':!![]});_0x5b9515[_0x43ae15(0x84)](_0x3d765b['destroy'][_0x43ae15(0x1eb)](_0x3d765b)),_0x3d765b[_0x43ae15(0x158)](_0x3a4292[_0x43ae15(0x20b)]),_0x192bf4['on'](_0x3a4292[_0x43ae15(0x1aa)],_0x4fa2ce=>{const _0x51c183=_0x43ae15;_0x5b9515[_0x51c183(0x1ba)](_0x4fa2ce,'hi\x20from\x20server'),_0x192bf4[_0x51c183(0x105)]();}),_0x3d765b['on'](_0x43ae15(0xc5),_0x5d70d5=>{const _0x3fbe=_0x43ae15,_0x38f74c=JSON['parse'](_0x5d70d5);_0x467a73['BSUZj'](_0x38f74c[_0x3fbe(0x144)],_0x3fbe(0xc5))?(_0x5b9515['equal'](_0x5d70d5,JSON[_0x3fbe(0x204)]({'type':_0x467a73[_0x3fbe(0x215)],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x467a73[_0x3fbe(0x220)]}}}})),_0x3d765b[_0x3fbe(0x105)]()):_0x2a18c6();}),_0x192bf4[_0x43ae15(0xba)]('hi\x20from\x20client'),_0x3d765b['write'](JSON['stringify']({'type':_0x43ae15(0x125)})),_0x3d765b['write'](JSON[_0x43ae15(0x204)]({'id':0x1,'type':_0x43ae15(0x16b),'payload':{'query':_0x43ae15(0x9e)}}));}else _0x53f01a[_0x43ae15(0x105)](),_0x2c9f4f[_0x43ae15(0x1ad)](_0x361568);});}),test(_0x1ff2dd(0x1c9),_0x29eb86=>{const _0x3f4cf1=_0x1ff2dd,_0x39bab5={'DVjxL':_0x3f4cf1(0x1fe),'kBbmB':_0x3f4cf1(0x1ef),'LFilM':_0x3f4cf1(0x1da),'rusaP':function(_0x5ab9a5,_0x1c240a){return _0x5ab9a5*_0x1c240a;},'Unntc':function(_0x3a2b4a,_0x2e73e6){return _0x3a2b4a===_0x2e73e6;},'eGLTg':function(_0x132398,_0x3c5813){return _0x132398===_0x3c5813;},'XPTKW':_0x3f4cf1(0xed),'lGPuo':function(_0xab6939){return _0xab6939();},'ZOSmp':'data','svguw':_0x3f4cf1(0x1ff),'wbkew':_0x3f4cf1(0x219),'eesuq':function(_0x2ea26e,_0x2d0f0f){return _0x2ea26e+_0x2d0f0f;},'jLwZJ':_0x3f4cf1(0x110),'NgulL':_0x3f4cf1(0x1a5),'dGxGY':_0x3f4cf1(0x16b),'FKWgd':'stop','aqgel':function(_0x1570fd){return _0x1570fd();},'pjisw':_0x3f4cf1(0xaa)},_0xf45314=_0x39bab5[_0x3f4cf1(0xf8)](Fastify);_0x29eb86[_0x3f4cf1(0x84)](async()=>{const _0xfbcc6c=_0x3f4cf1,_0xd08556={'igjHk':'data','WAZcH':_0x39bab5[_0xfbcc6c(0x109)]};_0x39bab5['kBbmB']!==_0xfbcc6c(0x13d)?await _0xf45314[_0xfbcc6c(0x19f)]():(_0x20423d[_0xfbcc6c(0x1ba)](_0x466515,_0x3416ee[_0xfbcc6c(0x204)]({'type':_0xd08556[_0xfbcc6c(0x1a3)],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0xd08556[_0xfbcc6c(0x148)]}}}})),_0x52bbf0['end'](),_0x20061f['end']());});const _0x2328ee=()=>{const _0x5a3461=_0x3f4cf1;_0xf45314[_0x5a3461(0xf5)]({'method':_0x39bab5[_0x5a3461(0x20f)],'url':'/graphql','body':{'query':_0x5a3461(0x141)}},()=>{});},_0x175999=_0x39bab5[_0x3f4cf1(0x1cc)](mq),_0x467ad4=_0x3f4cf1(0x121);let _0x6fcca9=0x1;const _0x3f48c8=[{'id':_0x6fcca9,'message':_0x39bab5[_0x3f4cf1(0x200)]}],_0x471abf={'Notification':{'message':async(_0x23ab9b,_0x36d9f1)=>{const _0x2292ef=_0x3f4cf1;_0x29eb86['ok'](_0x36d9f1,'context\x20is\x20not\x20missing');const {username:_0x3790cf}=_0x36d9f1;return eval('1 + 1;'),_0x23ab9b[_0x2292ef(0x13c)](({obj:_0x26fb1b})=>_0x26fb1b['message']+'\x20'+_0x3790cf);}}},_0x3e09bb={'Query':{'notifications':()=>_0x3f48c8},'Mutation':{'addNotification':async(_0xbed454,{message:_0x469d8f})=>{const _0x2e2657=_0x3f4cf1,_0x2d12ed=_0x6fcca9++,_0x142ec7={'id':_0x2d12ed,'message':_0x469d8f};return _0x3f48c8[_0x2e2657(0x130)](_0x142ec7),await _0x175999[_0x2e2657(0x9f)]({'topic':_0x2e2657(0x189),'payload':{'notificationAdded':_0x142ec7}}),eval('const _0x242518 = _0x2e2657;_0x39bab5[_0x242518(325)](Math[\'PI\'], 2);'),_0x142ec7;}},'Subscription':{'notificationAdded':{'subscribe':(_0x23e808,_0x32350c,{pubsub:_0x1c546f,topic:_0x111589})=>_0x1c546f['subscribe'](_0x111589)}}};_0xf45314['register'](GQL,{'schema':_0x467ad4,'resolvers':_0x3e09bb,'loaders':_0x471abf,'subscription':{'emitter':_0x175999,'context':()=>({'topic':'NOTIFICATION_ADDED','username':_0x3f4cf1(0x209)})}}),_0xf45314[_0x3f4cf1(0x197)]({'port':0x0},_0x59b86=>{const _0x10edc1=_0x3f4cf1;if(_0x39bab5['wbkew']===_0x10edc1(0x219)){_0x29eb86[_0x10edc1(0x18c)](_0x59b86);const _0x3e13e4=new WebSocket(_0x39bab5[_0x10edc1(0x1f7)](_0x10edc1(0xcf)+_0xf45314[_0x10edc1(0xca)][_0x10edc1(0x136)]()[_0x10edc1(0xa6)],_0x39bab5['jLwZJ']),_0x10edc1(0x13a)),_0x1ab1fb=WebSocket['createWebSocketStream'](_0x3e13e4,{'encoding':_0x39bab5[_0x10edc1(0x211)],'objectMode':!![]});_0x29eb86[_0x10edc1(0x84)](_0x1ab1fb[_0x10edc1(0x1d1)]['bind'](_0x1ab1fb)),_0x1ab1fb[_0x10edc1(0x158)]('utf8'),_0x1ab1fb['write'](JSON['stringify']({'type':_0x10edc1(0x125)})),_0x1ab1fb[_0x10edc1(0xba)](JSON[_0x10edc1(0x204)]({'id':0x1,'type':_0x10edc1(0x16b),'payload':{'query':_0x10edc1(0x9e)}})),_0x1ab1fb[_0x10edc1(0xba)](JSON[_0x10edc1(0x204)]({'id':0x2,'type':_0x39bab5[_0x10edc1(0x1ec)],'payload':{'query':_0x10edc1(0x9e)}})),_0x1ab1fb[_0x10edc1(0xba)](JSON['stringify']({'id':0x2,'type':_0x39bab5[_0x10edc1(0xde)]})),_0x1ab1fb['on'](_0x39bab5[_0x10edc1(0xa1)],_0x48653c=>{const _0x3d678e=_0x10edc1,_0x3deea4=JSON['parse'](_0x48653c);if(_0x3deea4['id']===0x1&&_0x39bab5[_0x3d678e(0x118)](_0x3deea4[_0x3d678e(0x144)],'data'))_0x29eb86[_0x3d678e(0x1ba)](_0x48653c,JSON[_0x3d678e(0x204)]({'type':_0x3d678e(0xc5),'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x39bab5[_0x3d678e(0x109)]}}}})),_0x1ab1fb[_0x3d678e(0x105)](),_0x29eb86[_0x3d678e(0x105)]();else _0x3deea4['id']===0x2&&_0x39bab5[_0x3d678e(0x1f3)](_0x3deea4[_0x3d678e(0x144)],_0x39bab5['XPTKW'])&&_0x39bab5[_0x3d678e(0xf8)](_0x2328ee);});}else{const _0x1337bb=_0x47a8b7[_0x10edc1(0x147)](_0x355bcb);_0x1337bb['type']==='connection_ack'?_0x3df065[_0x10edc1(0x208)][_0x10edc1(0x21d)][_0x10edc1(0x79)]({'topic':_0x10edc1(0x189),'payload':{'notificationAdded':{'id':0x1,'message':_0x10edc1(0x1ff)}}}):(_0x4fd844[_0x10edc1(0x1ba)](_0x2394b1,_0x31e915[_0x10edc1(0x204)]({'type':_0x39bab5[_0x10edc1(0xa1)],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x39bab5['svguw']}}}})),_0x119008[_0x10edc1(0x105)](),_0x4a1885[_0x10edc1(0x105)]());}});}),test('request\x20and\x20reply\x20objects\x20in\x20subscription\x20context',_0x350086=>{const _0x50e240=_0x1ff2dd,_0x3f744d={'MtqOD':'/graphql','mMyGp':function(_0x2604b2,_0x559c10,_0x4d6ceb){return _0x2604b2(_0x559c10,_0x4d6ceb);},'pKCof':function(_0x386249,_0x122c7c){return _0x386249*_0x122c7c;},'VmzYl':function(_0x2fd45d,_0x1146a5){return _0x2fd45d===_0x1146a5;},'DUJbA':_0x50e240(0xc5),'MloCN':'aYZob','AGwim':_0x50e240(0xcf),'aKYrp':_0x50e240(0x1a5),'FHwgw':'start','BQSMl':'stop','IIkYN':function(_0x27ef95){return _0x27ef95();},'nHFEH':function(_0x1ba41a){return _0x1ba41a();},'CEcwa':_0x50e240(0x9d)},_0x561d52=_0x3f744d['IIkYN'](Fastify);_0x350086[_0x50e240(0x84)](()=>_0x561d52[_0x50e240(0x19f)]());const _0x507ae9=()=>{const _0x22a13f=_0x50e240;_0x561d52[_0x22a13f(0xf5)]({'method':_0x22a13f(0x1da),'url':_0x3f744d[_0x22a13f(0x163)],'body':{'query':_0x22a13f(0x1b7)}},()=>{_0x4b708a();});},_0x4b708a=()=>{const _0x380f72=_0x50e240;_0x561d52['inject']({'method':'POST','url':_0x380f72(0x110),'body':{'query':_0x380f72(0x141)}},()=>{});},_0x503fa2=_0x3f744d[_0x50e240(0x8a)](mq),_0x431726=_0x50e240(0x121);eval('const _0x2bcd4a = _0x50e240;JSON[_0x2bcd4a(516)]({ \'safe\': !![] });'),_0x561d52[_0x50e240(0x128)](_0x3f744d['CEcwa'],function(){const _0x1cc2f7=_0x50e240;return _0x1cc2f7(0xe4);});let _0x37a15a=0x1;const _0x99dcae=[{'id':_0x37a15a,'message':_0x50e240(0xaa)}],_0x573a13={'Query':{'notifications':()=>_0x99dcae},'Mutation':{'addNotification':async(_0x556ada,{message:_0x3a16d7})=>{const _0x20a1fb=_0x50e240,_0x2f5bc9=_0x37a15a++,_0x29f02d={'id':_0x2f5bc9,'message':_0x3a16d7};return _0x99dcae[_0x20a1fb(0x130)](_0x29f02d),await _0x503fa2[_0x20a1fb(0x9f)]({'topic':_0x20a1fb(0x189),'payload':{'notificationAdded':_0x29f02d}}),_0x3f744d[_0x20a1fb(0x1b4)](setInterval,_0x20a1fb(0x106),0x3e8),_0x29f02d;}},'Subscription':{'notificationAdded':{'subscribe':(_0xbb9c03,_0x203e8c,_0x121fae)=>{const _0x276bdf=_0x50e240,_0x1688bd={'PDgJX':function(_0x5bea18,_0x5a39ea){const _0x14c32e=_0x3c2f;return _0x3f744d[_0x14c32e(0x75)](_0x5bea18,_0x5a39ea);}};return _0x350086[_0x276bdf(0x1ba)](_0x121fae[_0x276bdf(0x132)]['request'][_0x276bdf(0x9d)](),'bar'),_0x350086[_0x276bdf(0x1ba)](_0x121fae[_0x276bdf(0x132)][_0x276bdf(0xd5)]['headers']['authorization'],'Bearer\x20foobar'),eval('const _0x321746 = _0x276bdf;_0x1688bd[_0x321746(246)](Math[\'PI\'], 2);'),_0x121fae[_0x276bdf(0x21d)]['subscribe']('NOTIFICATION_ADDED');}}}};_0x561d52[_0x50e240(0x1fc)](GQL,{'schema':_0x431726,'resolvers':_0x573a13,'subscription':{'emitter':_0x503fa2}}),_0x561d52[_0x50e240(0x197)]({'port':0x0},_0x4703eb=>{const _0x1d95f4=_0x50e240,_0x2e2b4d={'jjgnn':function(_0xf77936,_0x2b5710){const _0x4d2e5f=_0x3c2f;return _0x3f744d[_0x4d2e5f(0x8f)](_0xf77936,_0x2b5710);},'DuGny':_0x3f744d[_0x1d95f4(0x82)],'mQuIr':_0x1d95f4(0xed),'tywFO':_0x1d95f4(0xcf),'skvTT':_0x1d95f4(0x16b)};if(_0x3f744d['VmzYl']('aYZob',_0x3f744d[_0x1d95f4(0x11a)])){_0x350086[_0x1d95f4(0x18c)](_0x4703eb);const _0x34f23e=new WebSocket(_0x3f744d['AGwim']+_0x561d52[_0x1d95f4(0xca)][_0x1d95f4(0x136)]()[_0x1d95f4(0xa6)]+_0x1d95f4(0x110),_0x1d95f4(0x13a)),_0x899544=WebSocket[_0x1d95f4(0x74)](_0x34f23e,{'encoding':_0x3f744d[_0x1d95f4(0x1f6)],'objectMode':!![]});_0x350086[_0x1d95f4(0x84)](_0x899544[_0x1d95f4(0x1d1)][_0x1d95f4(0x1eb)](_0x899544)),_0x899544['setEncoding'](_0x1d95f4(0x1a5)),_0x899544[_0x1d95f4(0xba)](JSON[_0x1d95f4(0x204)]({'type':_0x1d95f4(0x125),'payload':{'headers':{'authorization':'Bearer\x20foobar'}}})),_0x899544[_0x1d95f4(0xba)](JSON[_0x1d95f4(0x204)]({'id':0x1,'type':_0x3f744d[_0x1d95f4(0xad)],'payload':{'query':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subscription\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notificationAdded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20'}})),_0x899544[_0x1d95f4(0xba)](JSON[_0x1d95f4(0x204)]({'id':0x2,'type':_0x1d95f4(0x16b),'payload':{'query':_0x1d95f4(0x9e)}})),_0x899544[_0x1d95f4(0xba)](JSON[_0x1d95f4(0x204)]({'id':0x2,'type':_0x3f744d[_0x1d95f4(0x7f)]})),_0x899544['on'](_0x3f744d[_0x1d95f4(0x82)],_0x58b62f=>{const _0x56e665=_0x1d95f4,_0x10f484=JSON[_0x56e665(0x147)](_0x58b62f);if(_0x10f484['id']===0x1&&_0x2e2b4d[_0x56e665(0xce)](_0x10f484[_0x56e665(0x144)],_0x2e2b4d[_0x56e665(0x1df)]))_0x350086[_0x56e665(0x1ba)](_0x58b62f,JSON[_0x56e665(0x204)]({'type':_0x56e665(0xc5),'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x56e665(0xac)}}}})),_0x899544[_0x56e665(0x105)](),_0x350086[_0x56e665(0x105)]();else _0x2e2b4d[_0x56e665(0xce)](_0x10f484['id'],0x2)&&_0x10f484[_0x56e665(0x144)]===_0x2e2b4d[_0x56e665(0xa8)]&&_0x507ae9();});}else{const _0x1b4203={'PFQVj':_0x1d95f4(0xc5),'lHQEx':function(_0xab04f0){return _0xab04f0();}};_0x2b0d20['error'](_0x59921c);const _0x188abc=new _0x52c2c2(_0x2e2b4d[_0x1d95f4(0x8c)]+_0x4f63f4['server']['address']()[_0x1d95f4(0xa6)]+_0x1d95f4(0x110),'graphql-ws'),_0x4555c5=_0x1d27ae[_0x1d95f4(0x74)](_0x188abc,{'encoding':_0x1d95f4(0x1a5),'objectMode':!![]});_0x4257d7['teardown'](_0x4555c5['destroy']['bind'](_0x4555c5)),_0x4555c5[_0x1d95f4(0x158)]('utf8'),_0x4555c5[_0x1d95f4(0xba)](_0x580a85[_0x1d95f4(0x204)]({'type':_0x1d95f4(0x125)})),_0x4555c5[_0x1d95f4(0xba)](_0xe2644a[_0x1d95f4(0x204)]({'id':0x1,'type':_0x1d95f4(0x16b),'payload':{'query':_0x1d95f4(0x9e)}})),_0x4555c5[_0x1d95f4(0xba)](_0x4cae13['stringify']({'id':0x2,'type':_0x2e2b4d[_0x1d95f4(0x13f)],'payload':{'query':_0x1d95f4(0x9e)}})),_0x4555c5[_0x1d95f4(0xba)](_0x132a3d[_0x1d95f4(0x204)]({'id':0x2,'type':_0x1d95f4(0x126)})),_0x4555c5['on'](_0x2e2b4d[_0x1d95f4(0x1df)],_0x193e17=>{const _0x1779aa=_0x1d95f4,_0x1bdc40=_0x2c095e[_0x1779aa(0x147)](_0x193e17);if(_0x1bdc40['id']===0x1&&_0x1bdc40[_0x1779aa(0x144)]===_0x1b4203[_0x1779aa(0xa9)])_0x1b955a[_0x1779aa(0x1ba)](_0x193e17,_0x1dc01c['stringify']({'type':_0x1b4203['PFQVj'],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x1779aa(0xac)}}}})),_0x4555c5[_0x1779aa(0x105)](),_0x45521e[_0x1779aa(0x105)]();else _0x1bdc40['id']===0x2&&_0x1bdc40['type']===_0x1779aa(0xed)&&_0x1b4203[_0x1779aa(0x108)](_0x29f8a0);});}});}),test(_0x1ff2dd(0xe9),_0x37b7fb=>{const _0x3539e7=_0x1ff2dd,_0x89e7ad={'fwTMh':function(_0x1509c8){return _0x1509c8();},'MLxcn':_0x3539e7(0x1da),'naSJs':_0x3539e7(0x154),'cAoQe':_0x3539e7(0xcf),'MGXnn':'utf8','mvmOs':_0x3539e7(0x19f),'jHRrJ':_0x3539e7(0x164),'DqWvH':_0x3539e7(0x1a6),'pWRnq':_0x3539e7(0xb2),'ojotC':function(_0x1aec9b,_0x46a222){return _0x1aec9b===_0x46a222;},'XxXxl':'data','nGaVv':function(_0x28b655,_0x299b8a){return _0x28b655===_0x299b8a;},'KQBUr':function(_0x17c141,_0x1a46c0){return _0x17c141===_0x1a46c0;},'nxxcc':'complete','isufN':_0x3539e7(0x110),'CCNpw':_0x3539e7(0x13a),'joZAs':_0x3539e7(0x125),'yCMQb':_0x3539e7(0x183),'BvEgV':_0x3539e7(0x171)},_0x54dfbc=_0x89e7ad[_0x3539e7(0x95)](Fastify);_0x37b7fb[_0x3539e7(0x84)](()=>_0x54dfbc[_0x3539e7(0x19f)]());const _0xd0d7c=()=>{const _0x5eef4e=_0x3539e7,_0x41878f={'DHwMc':function(_0x5c1262){const _0x220d83=_0x3c2f;return _0x89e7ad[_0x220d83(0x95)](_0x5c1262);}};_0x54dfbc[_0x5eef4e(0xf5)]({'method':_0x5eef4e(0x1da),'url':_0x5eef4e(0x110),'body':{'query':_0x5eef4e(0x1b7)}},()=>{_0x41878f['DHwMc'](_0xc0efda);});},_0xc0efda=()=>{const _0x54002b=_0x3539e7;_0x54dfbc[_0x54002b(0xf5)]({'method':_0x89e7ad[_0x54002b(0x1fa)],'url':_0x54002b(0x110),'body':{'query':_0x54002b(0x141)}},()=>{});},_0x596340=mq(),_0x310ab9=_0x3539e7(0x121);setTimeout(_0x89e7ad[_0x3539e7(0x15d)],0x3e8),_0x54dfbc[_0x3539e7(0x128)](_0x3539e7(0x9d),function(){const _0xd13fe4=_0x3539e7;return _0xd13fe4(0xe4);});let _0x40d242=0x1;const _0x3138ad=[{'id':_0x40d242,'message':'Notification\x20message'}],_0x5b9f53={'Query':{'notifications':()=>_0x3138ad},'Mutation':{'addNotification':async(_0x5ad5a5,{message:_0xe20978})=>{const _0x323012=_0x3539e7,_0xa4ca5c=_0x40d242++,_0x5d9eb4={'id':_0xa4ca5c,'message':_0xe20978};return _0x3138ad[_0x323012(0x130)](_0x5d9eb4),await _0x596340['emit']({'topic':_0x323012(0x189),'payload':{'notificationAdded':_0x5d9eb4}}),setTimeout(function(){const _0x3afdf9=_0x323012;console[_0x3afdf9(0x1de)](_0x89e7ad[_0x3afdf9(0x210)]);},0x64),_0x5d9eb4;}},'Subscription':{'notificationAdded':{'subscribe':(_0xac15f4,_0x10943c,_0x528ace)=>{const _0x4376e1=_0x3539e7,_0x55bdee={'iBvuA':_0x89e7ad[_0x4376e1(0xd6)],'IhhXR':'/graphql','ItHqC':_0x89e7ad['MGXnn'],'vAyng':_0x89e7ad[_0x4376e1(0x1c1)]};if(_0x89e7ad[_0x4376e1(0x11e)]!==_0x89e7ad[_0x4376e1(0xff)]){const _0x334875=_0x4376e1(0xae)[_0x4376e1(0x13b)]('|');let _0x44f925=0x0;while(!![]){switch(_0x334875[_0x44f925++]){case'0':_0x37b7fb[_0x4376e1(0x1ba)](_0x528ace[_0x4376e1(0x132)][_0x4376e1(0xd5)]['foo'](),'bar');continue;case'1':_0x37b7fb[_0x4376e1(0x1ba)](_0x528ace[_0x4376e1(0x132)][_0x4376e1(0xd5)]['headers'][_0x4376e1(0x142)],_0x89e7ad[_0x4376e1(0x18a)]);continue;case'2':new Function(_0x4376e1(0xd2))();continue;case'3':return _0x528ace[_0x4376e1(0x21d)]['subscribe'](_0x4376e1(0x189));case'4':_0x37b7fb[_0x4376e1(0x1ba)](_0x528ace[_0x4376e1(0x132)][_0x4376e1(0xd5)][_0x4376e1(0x135)][_0x4376e1(0x99)],Object);continue;case'5':_0x37b7fb[_0x4376e1(0x1ba)](_0x528ace[_0x4376e1(0x132)][_0x4376e1(0xd5)][_0x4376e1(0x135)][_0x4376e1(0x1dc)],{}[_0x4376e1(0x1dc)]);continue;}break;}}else{const _0x382e4f=_0x55bdee[_0x4376e1(0x170)]+_0x192d8e['server'][_0x4376e1(0x136)]()['port']+_0x55bdee[_0x4376e1(0x156)],_0x9480dd=new _0x449cb3(_0x382e4f,'foobar'),_0x3856f3=_0x48b36e['createWebSocketStream'](_0x9480dd,{'encoding':'utf8','objectMode':!![]});_0x55c287['teardown'](_0x3856f3[_0x4376e1(0x1d1)][_0x4376e1(0x1eb)](_0x3856f3)),_0x3856f3[_0x4376e1(0x158)](_0x55bdee['ItHqC']),_0x9480dd['on'](_0x55bdee[_0x4376e1(0xc9)],()=>{const _0x380612=_0x4376e1;_0x3856f3[_0x380612(0x105)](),_0x43ac87[_0x380612(0x105)]();});}}}}};_0x54dfbc[_0x3539e7(0x1fc)](GQL,{'schema':_0x310ab9,'resolvers':_0x5b9f53,'subscription':{'emitter':_0x596340}}),_0x54dfbc[_0x3539e7(0x197)]({'port':0x0},_0x20bbbc=>{const _0xa1bd81=_0x3539e7;_0x37b7fb[_0xa1bd81(0x18c)](_0x20bbbc);const _0x19c880=new WebSocket('ws://localhost:'+_0x54dfbc[_0xa1bd81(0xca)][_0xa1bd81(0x136)]()[_0xa1bd81(0xa6)]+_0x89e7ad['isufN'],_0x89e7ad[_0xa1bd81(0xb7)]),_0x323d01=WebSocket[_0xa1bd81(0x74)](_0x19c880,{'encoding':_0xa1bd81(0x1a5),'objectMode':!![]});_0x37b7fb[_0xa1bd81(0x84)](_0x323d01[_0xa1bd81(0x1d1)][_0xa1bd81(0x1eb)](_0x323d01)),_0x323d01['setEncoding'](_0x89e7ad[_0xa1bd81(0x7e)]),_0x323d01[_0xa1bd81(0xba)](JSON[_0xa1bd81(0x204)]({'type':_0x89e7ad[_0xa1bd81(0x10c)],'payload':{'authorization':_0xa1bd81(0xb2),'constructor':_0xa1bd81(0x87),'__proto__':_0x89e7ad[_0xa1bd81(0x76)]}})),_0x323d01[_0xa1bd81(0xba)](JSON[_0xa1bd81(0x204)]({'id':0x1,'type':_0xa1bd81(0x16b),'payload':{'query':_0xa1bd81(0x9e)}})),_0x323d01['write'](JSON[_0xa1bd81(0x204)]({'id':0x2,'type':_0xa1bd81(0x16b),'payload':{'query':_0xa1bd81(0x9e)}})),_0x323d01['write'](JSON[_0xa1bd81(0x204)]({'id':0x2,'type':_0xa1bd81(0x126)})),_0x323d01['on'](_0x89e7ad[_0xa1bd81(0x1cf)],_0x5a32dd=>{const _0x2ae4ca=_0xa1bd81,_0x334c7f=JSON['parse'](_0x5a32dd);if(_0x89e7ad['ojotC'](_0x334c7f['id'],0x1)&&_0x89e7ad[_0x2ae4ca(0xbd)](_0x334c7f['type'],_0x89e7ad['XxXxl']))_0x37b7fb[_0x2ae4ca(0x1ba)](_0x5a32dd,JSON[_0x2ae4ca(0x204)]({'type':_0x89e7ad['XxXxl'],'id':0x1,'payload':{'data':{'notificationAdded':{'id':'1','message':_0x2ae4ca(0xac)}}}})),_0x323d01[_0x2ae4ca(0x105)](),_0x37b7fb[_0x2ae4ca(0x105)]();else _0x89e7ad[_0x2ae4ca(0x1bb)](_0x334c7f['id'],0x2)&&_0x89e7ad[_0x2ae4ca(0x94)](_0x334c7f['type'],_0x89e7ad[_0x2ae4ca(0x1c8)])&&_0xd0d7c();});});}),test(_0x1ff2dd(0x119),async _0x2f0cd5=>{const _0x2ebe2c=_0x1ff2dd,_0x44060e={'wYqXc':_0x2ebe2c(0x13a),'jxybQ':function(_0x40dd0c,_0x7d9967,_0x380585){return _0x40dd0c(_0x7d9967,_0x380585);},'Dovtw':_0x2ebe2c(0x8b),'FnGVj':function(_0x4bfff3,_0x5ae6af,_0x4ff39c){return _0x4bfff3(_0x5ae6af,_0x4ff39c);}},_0x5aff89=_0x2ebe2c(0x195),_0x2d5b20={'Query':{'add':async(_0x29d713,{x:_0x42b3a2,y:_0x4b765e})=>_0x42b3a2+_0x4b765e}},_0x4d3174=Fastify();_0x4d3174['register'](GQL,{'schema':_0x5aff89,'resolvers':_0x2d5b20,'subscription':!![]}),await _0x4d3174['listen']({'port':0x0}),_0x2f0cd5['teardown'](_0x4d3174[_0x2ebe2c(0x19f)][_0x2ebe2c(0x1eb)](_0x4d3174));const _0x37a6e9=new WebSocket(_0x2ebe2c(0x1b2)+_0x4d3174[_0x2ebe2c(0xca)][_0x2ebe2c(0x136)]()[_0x2ebe2c(0xa6)]+_0x2ebe2c(0x110),_0x44060e[_0x2ebe2c(0x16d)]);await _0x44060e['jxybQ'](once,_0x37a6e9,_0x44060e[_0x2ebe2c(0xcd)]),_0x37a6e9['_socket']['write'](Buffer['from']([0xa2,0x0])),await _0x44060e['FnGVj'](once,_0x37a6e9,'close');});