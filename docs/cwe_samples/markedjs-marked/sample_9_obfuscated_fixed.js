const _0x5c3bba=_0x301a;(function(_0x46da0a,_0x4e61ae){const _0x2f3465=_0x301a,_0x5adf1d=_0x46da0a();while(!![]){try{const _0x56d814=parseInt(_0x2f3465(0x17d))/0x1*(parseInt(_0x2f3465(0x173))/0x2)+parseInt(_0x2f3465(0x14e))/0x3+parseInt(_0x2f3465(0x257))/0x4+-parseInt(_0x2f3465(0x1a4))/0x5*(-parseInt(_0x2f3465(0x1ea))/0x6)+-parseInt(_0x2f3465(0x23d))/0x7+parseInt(_0x2f3465(0x235))/0x8+-parseInt(_0x2f3465(0x230))/0x9;if(_0x56d814===_0x4e61ae)break;else _0x5adf1d['push'](_0x5adf1d['shift']());}catch(_0x3284cc){_0x5adf1d['push'](_0x5adf1d['shift']());}}}(_0x4248,0x92b83),require(_0x5c3bba(0x18b)));function _0x301a(_0x5d0e7b,_0x4c09ff){const _0x4248d3=_0x4248();return _0x301a=function(_0x301ac1,_0x3983f0){_0x301ac1=_0x301ac1-0x13d;let _0x3d5ed1=_0x4248d3[_0x301ac1];return _0x3d5ed1;},_0x301a(_0x5d0e7b,_0x4c09ff);}const fs=require(_0x5c3bba(0x1b8)),path=require(_0x5c3bba(0x13e)),util=require(_0x5c3bba(0x20c)),zlib=require('zlib'),streams=require(_0x5c3bba(0x16f)),RollingFileStream=require(_0x5c3bba(0x1ee))[_0x5c3bba(0x221)],gunzip=util[_0x5c3bba(0x24a)](zlib[_0x5c3bba(0x15b)]),fullPath=_0x5d0429=>path[_0x5c3bba(0x1e5)](__dirname,_0x5d0429),remove=_0x57284e=>fs[_0x5c3bba(0x1d3)](fullPath(_0x57284e))[_0x5c3bba(0x188)](()=>{}),create=_0xb3da18=>fs[_0x5c3bba(0x1e4)](fullPath(_0xb3da18),_0x5c3bba(0x247)),write=(_0x5f52a8,_0x224e85)=>{const _0x4e320b=_0x5c3bba,_0x376ab9={'bHDWg':function(_0x36ad1a,_0x5a9c21){return _0x36ad1a===_0x5a9c21;},'cMkrw':_0x4e320b(0x1bb),'CaYfj':_0x4e320b(0x202),'pqWHg':_0x4e320b(0x261)};return new Promise((_0x286b70,_0x24845)=>{const _0x11feb7=_0x4e320b;_0x5f52a8[_0x11feb7(0x171)](_0x224e85,_0x376ab9[_0x11feb7(0x15d)],_0xec3c92=>{const _0x670725=_0x11feb7;_0xec3c92?_0x376ab9['bHDWg'](_0x376ab9['cMkrw'],_0x376ab9[_0x670725(0x18c)])?_0x35abd4(_0x4f19c2):_0x24845(_0xec3c92):_0x286b70();});});},writeInSequence=async(_0xc104cb,_0x3c8233)=>{const _0x361808=_0x5c3bba,_0x3a83bd={'Wrlsn':function(_0x2fc5ac,_0x26e4e3,_0x48fb00){return _0x2fc5ac(_0x26e4e3,_0x48fb00);},'spEXM':_0x361808(0x1f6),'yyZku':_0x361808(0x1c6),'IsRzv':function(_0x496bb7,_0x5b1137){return _0x496bb7<_0x5b1137;},'BYtTL':function(_0x306109,_0x1de173){return _0x306109===_0x1de173;},'uZWNA':_0x361808(0x20e),'cKtks':function(_0x2e1d1c,_0x500973,_0x230cca){return _0x2e1d1c(_0x500973,_0x230cca);},'zuDYo':function(_0x184990,_0x1a2460){return _0x184990+_0x1a2460;}};for(let _0x52367a=0x0;_0x3a83bd[_0x361808(0x17a)](_0x52367a,_0x3c8233[_0x361808(0x1fd)]);_0x52367a+=0x1){_0x3a83bd[_0x361808(0x1c4)](_0x3a83bd['uZWNA'],_0x361808(0x20b))?(_0x23385b=new _0x51cda6(_0x54f4bb[_0x361808(0x1e5)](_0x560bc9,_0x361808(0x16c)),0x400,0x5,{'mode':_0x3a83bd['Wrlsn'](_0x1ade43,_0x3a83bd[_0x361808(0x1ba)],0x8)}),_0x43b11d[_0x361808(0x1f8)][_0x361808(0x21d)][_0x361808(0x18b)][_0x361808(0x1c9)](_0x3a83bd[_0x361808(0x1d2)](_0x58dbe8,'0666',0x8))):await _0x3a83bd[_0x361808(0x198)](write,_0xc104cb,_0x3a83bd[_0x361808(0x1bf)](_0x3c8233[_0x52367a],'\x0a'));}return new Promise(_0x5efbc3=>{const _0x951df5=_0x361808;if(_0x3a83bd[_0x951df5(0x1f0)]!==_0x951df5(0x1c6))throw _0x2986be;else _0xc104cb[_0x951df5(0x1eb)](_0x5efbc3);});},close=async _0x56f583=>new Promise((_0x4750d4,_0x2851a1)=>_0x56f583['end'](_0x2f526b=>_0x2f526b?_0x2851a1(_0x2f526b):_0x4750d4()));function _0x4248(){const _0x4cf981=['bOqNX','Writable','numBackups','ODNwp','PuNby','WfZmM','gunzip','fileNameSep-extKept-backups_2.log','pqWHg','gSmkO','cheese\x0a','wgfZv','dCIaD','WBUzc','PbHDE','dHHLR','extKept-backups.2.log','xmnNH','with\x20options.fileNameSep\x20=\x20\x22_\x22\x20and\x20keepFileExt\x20=\x20true','loGvb','sERpu','bwIat','SGlIU','test-rolling-file-stream','ptHmA','iUaDH','stream','UClUS','write','readFile','565224cldcsU','taWwp','should\x20complain\x20about\x20backups\x20>=\x20Number.MAX_SAFE_INTEGER','with\x20options.fileNameSep\x20=\x20\x22_\x22\x20and\x20options.compress\x20=\x20true','EwvdT','CmFNa','should\x20be\x20generated\x20into\x20stream.options.numToKeep\x20from\x20options.numBackups','IsRzv','wZxZh','hbuYn','3agTOHs','fileNameSep-extKept-backups','HWcBl','test-rolling-stream-with-existing-files.4','should\x20write\x20two\x20files','compressed-backups_2.log.gz','zLqaL','containEql','paCVe','ZlGli','BMGIN','catch','should\x20be\x20routed\x20from\x20backups\x20to\x20options.numBackups','JNFCu','should','CaYfj','xbHpY','should\x20roll\x20the\x20files,\x20removing\x20the\x20highest\x20indices','should\x20take\x20options.numBackups\x20to\x20supercede\x20backups','using\x20backups','This\x20is\x20the\x20first\x20log\x20message.','compressed-backups.log','dZfqD','options.numBackups\x20(','compressed-backups.log.2.gz','compressed-backups.log.1.gz','hXmYc','cKtks','ShATP','siYjb','toString','should\x20complain\x20about\x20negative\x20backups','This\x20is\x20the\x20fourth\x20log\x20message.\x0a','test-rolling-stream-with-existing-files.3','OwFKE','fileNameSep-backups.log_1','erQvX','ABsqS','readdir','185eaSkHE','AjmGi','WOZsr','with\x20invalid\x20number\x20of\x20backups','test-rolling-stream-with-existing-files.-1','IRqAc','UIpiP','xhmOE','inCcV','oozlQ','fileNameSep-backups.log','platform','CWLlu','ZUUJb','fileNameSep-backups.log_2','fileNameSep-backups','OrSma','test-rolling-stream-with-existing-files.2','TFtlN','zOcgy','fs-extra','should\x20write\x20the\x20first\x20five\x20log\x20messages\x20to\x20the\x20second\x20file','spEXM','vaSzq','should\x20produce\x20three\x20files,\x20with\x20the\x20fileNameSep','xdLmH','ijuvr','zuDYo','alOKh','fGaQX','HUKXq','GNhYJ','BYtTL','QSzrN','txVdK','sort','VPwME','eql','5.cheese\x0a6.cheese\x0a','FsIuS','sZwjY','error','should\x20write\x20one\x20file','dxHFS','PwLbT','backups','Wrlsn','unlink','cUErn','extKept-backups.1.log','.cheese','should\x20produce\x20three\x20files,\x20with\x20the\x20file-extension\x20kept','fileNameSep-extKept-backups.log','upKsM','sxdHH','IqPgl','This\x20is\x20the\x20second\x20log\x20message.','azCGb','with\x20options.fileNameSep\x20=\x20\x22_\x22','EHmgh','LroyN','rmdir','YXJeV','jRYtI','writeFile','join','vSdnI','compressed-backups_1.log.gz','writing\x20less\x20than\x20the\x20file\x20size','zGjdx','37350ptbhZx','end','eulDa','JvydQ','../lib','pINgl','yyZku','fjjqn','FYmQm','CEBCx','compressed-backups.log_2.gz','with\x20options.fileNameSep\x20=\x20\x22_\x22,\x20options.compress\x20=\x20true\x20and\x20keepFileExt\x20=\x20true','0666','MAX_SAFE_INTEGER','theStream','cheese','Zodnm','gUSub','dRMwI','length','ygrSP','LTdaN','yhqfC','filter','hTSXP','SJiJS','GuAHP','OnOtE','This\x20is\x20the\x20third\x20log\x20message.','should\x20default\x20to\x20max\x20int\x20size','test-rolling-file-stream-write-more','flags','zHhzY','OvTkW','util','win32','BecgL','aDLSP','should\x20default\x20to\x201\x20backup','test-rolling-stream-with-existing-files.11','JfKRv','with\x20options.compress\x20=\x20true','NvbNh','kInpI','rollover','QVzMu','foDYN','options','aBnIZ','VSsUK','filename','mode','This\x20is\x20the\x20second\x20log\x20message.\x0a','yDXER','YVyJq','RollingFileStream','mjTPk','SqjEQ','WVTFF','when\x20the\x20directory\x20gets\x20deleted','compressed-backups.2.log.gz','ABZZm','nibBz','test-rolling-stream-with-existing-files.1','MMbEj','nDLGn','test-rolling-file-stream-write-less','oDXGR','UbFTI','RsluZ','13439970zIDpCK','JaViU','MIUhO','HqFEp','test-rolling-stream-with-existing-files.1.1','2523512Ikvukb','GmnqT','ZJhmJ','test-rolling-stream-with-existing-files.20','arguments','indexOf','ALrIi','fileNameSep-extKept-backups_1.log','3213483XjYnYj','akltH','famUR','QvVXT','numToKeep','mLGjM','rIDTY','test-rolling-stream-with-existing-files.5','xOjoO','handles\x20directory\x20deletion\x20gracefully','test\x20file','have','OIUGI','promisify','NsXFr','all','ruowv','ngBhX','should\x20write\x20to\x20the\x20file','TPqFh','throw','with\x20both\x20backups\x20and\x20options.numBackups','compressed-backups.log_1.gz','test-rolling-stream-with-existing-files','onFdl','ffaaK','1653856SheUGF','WSMNK','should\x20produce\x20three\x20files,\x20with\x20the\x20backups\x20compressed','initial','This\x20is\x20the\x20third\x20log\x20message.\x0a','DkteY','pSlcE','bwyaG','kouMg','with\x20stream\x20arguments','utf8','ounmq','This\x20is\x20the\x20fourth\x20log\x20message.','path','IVDIN','AcdEF','TSUIh','subdir','xlAMX','kozHz','size','apwGf','yWzJW','dYtYX','LHZCa','test-rolling-stream-with-existing-files.0',')\x20should\x20be\x20<\x20Number.MAX_SAFE_INTEGER','GJzdt','compressed-backups','2238894wsXdrF','cKLKW','map','0.cheese\x0a1.cheese\x0a2.cheese\x0a3.cheese\x0a4.cheese\x0a','xQHay','with\x20backups\x20but\x20not\x20options.numBackups','test-rolling-file-stream-write-more.1'];_0x4248=function(){return _0x4cf981;};return _0x4248();}describe(_0x5c3bba(0x221),function(){const _0x4082f5=_0x5c3bba,_0x1946e4={'xdLmH':function(_0x1546e3,_0x2efece){return _0x1546e3(_0x2efece);},'jRYtI':function(_0x52bda2,_0x3d4a22){return _0x52bda2(_0x3d4a22);},'sxdHH':function(_0x3b7cdb,_0x5c7522,_0x475047){return _0x3b7cdb(_0x5c7522,_0x475047);},'mjTPk':'should\x20take\x20a\x20filename,\x20file\x20size\x20(bytes),\x20no.\x20backups,\x20return\x20Writable','siYjb':function(_0x106295,_0x4716fe,_0xde10f){return _0x106295(_0x4716fe,_0xde10f);},'CmFNa':function(_0x2ca767,_0xa262e9,_0x4a2175){return _0x2ca767(_0xa262e9,_0x4a2175);},'IVDIN':function(_0x588654,_0x2d236e){return _0x588654(_0x2d236e);},'lTgtD':_0x4082f5(0x1df),'ALrIi':function(_0x5843fc,_0x21a4fd,_0x39ce0b){return _0x5843fc(_0x21a4fd,_0x39ce0b);},'OIUGI':'should\x20pass\x20them\x20to\x20the\x20underlying\x20stream','LHZCa':_0x4082f5(0x16c),'OnOtE':_0x4082f5(0x207),'OwFKE':function(_0x52c215,_0x1ecacc,_0x367372){return _0x52c215(_0x1ecacc,_0x367372);},'dRMwI':function(_0x4e1df9,_0x4cae97){return _0x4e1df9(_0x4cae97);},'xbHpY':function(_0x253aea,_0x575d4e,_0x1845e8){return _0x253aea(_0x575d4e,_0x1845e8);},'fbqQo':_0x4082f5(0x175),'cKLKW':_0x4082f5(0x189),'TSUIh':_0x4082f5(0x179),'tyFUa':function(_0x18f442,_0x2a8ca6){return _0x18f442(_0x2a8ca6);},'JvydQ':function(_0x5b0453,_0x55315c,_0x4232c1){return _0x5b0453(_0x55315c,_0x4232c1);},'HqFEp':_0x4082f5(0x261),'FYmQm':function(_0x36c50e,_0x5930fe){return _0x36c50e(_0x5930fe);},'azCGb':function(_0x44f99e,_0x248b53,_0x58d5bf){return _0x44f99e(_0x248b53,_0x58d5bf);},'foDYN':function(_0x2b3e9f,_0x3a259a,_0x579858){return _0x2b3e9f(_0x3a259a,_0x579858);},'FhMRg':function(_0x2d3d08,_0x1c3174){return _0x2d3d08!==_0x1c3174;},'xQHay':_0x4082f5(0x197),'BMGIN':_0x4082f5(0x208),'mtRKf':_0x4082f5(0x154),'xlAMX':function(_0x2a29fa,_0x231f3c){return _0x2a29fa(_0x231f3c);},'TInpC':function(_0x5e1ccb,_0x50a8ca,_0x349cc0){return _0x5e1ccb(_0x50a8ca,_0x349cc0);},'kozHz':'should\x20write\x20the\x20last\x20two\x20log\x20messages\x20to\x20the\x20first\x20file','bwIat':function(_0x1e1777,_0x1ce3f3,_0x3164af){return _0x1e1777(_0x1ce3f3,_0x3164af);},'fjjqn':_0x4082f5(0x1b9),'LroyN':'This\x20is\x20the\x20fourth\x20log\x20message.','ZUUJb':function(_0x36a5c0,_0x575db4){return _0x36a5c0!==_0x575db4;},'dYtYX':'fMRBo','DkteY':function(_0x2d687b,_0x29077d){return _0x2d687b(_0x29077d);},'GJzdt':_0x4082f5(0x196),'aDLSP':'compressed-backups.log.2.gz','ODNwp':function(_0x4a9b00,_0xf027a4){return _0x4a9b00(_0xf027a4);},'sZwjY':'extKept-backups.log','nsNmR':_0x4082f5(0x191),'PuNby':_0x4082f5(0x1dc),'gSdGX':_0x4082f5(0x206),'wZxZh':function(_0x4800f6,_0x4e93e3,_0x5770c1){return _0x4800f6(_0x4e93e3,_0x5770c1);},'mLGjM':_0x4082f5(0x21e),'ygrSP':function(_0x14ce7e,_0x77376e){return _0x14ce7e(_0x77376e);},'Zodnm':function(_0x52a86c,_0x201525){return _0x52a86c(_0x201525);},'rIDTY':function(_0x48bb98,_0x19bccd){return _0x48bb98===_0x19bccd;},'vSdnI':_0x4082f5(0x1c8),'WSMNK':'compressed-backups.1.log.gz','OrSma':_0x4082f5(0x192),'gSmkO':_0x4082f5(0x25b),'IqPgl':_0x4082f5(0x226),'ABZZm':function(_0x31077a,_0x592a58){return _0x31077a(_0x592a58);},'GmnqT':_0x4082f5(0x259),'akltH':function(_0x83c8ac,_0x1dc6a7){return _0x83c8ac(_0x1dc6a7);},'ounmq':_0x4082f5(0x1a0),'aOudZ':function(_0x49795d,_0x1e888e){return _0x49795d(_0x1e888e);},'iUaDH':function(_0x20e7c7,_0x332323,_0x1a0d2b){return _0x20e7c7(_0x332323,_0x1a0d2b);},'zHhzY':function(_0x28c927,_0x36f49e){return _0x28c927(_0x36f49e);},'WVTFF':_0x4082f5(0x23c),'yWzJW':'should\x20produce\x20three\x20files,\x20with\x20the\x20file-extension\x20kept','QvVXT':'This\x20is\x20the\x20fourth\x20log\x20message.\x0a','gUSub':function(_0x13d18b,_0xd2f46){return _0x13d18b(_0xd2f46);},'MMbEj':function(_0x2159e9,_0x3ab13f,_0x39f86e){return _0x2159e9(_0x3ab13f,_0x39f86e);},'HHXHP':_0x4082f5(0x199),'apwGf':function(_0x96efac,_0x5d6980){return _0x96efac(_0x5d6980);},'jtLZd':function(_0x4e472f,_0xb7320b){return _0x4e472f(_0xb7320b);},'ngBhX':_0x4082f5(0x1a8),'nDLGn':_0x4082f5(0x254),'PLjmK':_0x4082f5(0x234),'paCVe':'test-rolling-stream-with-existing-files.4','lUVnd':_0x4082f5(0x244),'xmnNH':'test-rolling-stream-with-existing-files.6','loGvb':_0x4082f5(0x211),'WycQL':_0x4082f5(0x1d8),'kInpI':_0x4082f5(0x1e2),'ZaBDz':_0x4082f5(0x229),'QVzMu':function(_0x5c0b61,_0x3380ba){return _0x5c0b61(_0x3380ba);},'erQvX':function(_0x391fea,_0x404273,_0x13c707){return _0x391fea(_0x404273,_0x13c707);},'qGpZW':_0x4082f5(0x18e),'AcdEF':'subdir','xOjoO':_0x4082f5(0x25a),'oDXGR':function(_0x138f69,_0x1f0950){return _0x138f69(_0x1f0950);},'SUznA':_0x4082f5(0x246),'GNhYJ':function(_0x27f633,_0x1ff852,_0x5df43b){return _0x27f633(_0x1ff852,_0x5df43b);},'TFtlN':_0x4082f5(0x260),'ABsqS':function(_0x428807,_0x492634,_0x4b6669){return _0x428807(_0x492634,_0x4b6669);},'taWwp':_0x4082f5(0x1a7),'WOZsr':_0x4082f5(0x190),'WQpib':_0x4082f5(0x1e8),'famUR':function(_0xfb1541,_0x5dab34,_0x184799){return _0xfb1541(_0x5dab34,_0x184799);},'yhqfC':function(_0x55cb19,_0x1b9d98,_0x5eb1c4){return _0x55cb19(_0x1b9d98,_0x5eb1c4);},'XvtZF':_0x4082f5(0x213),'tpGkR':function(_0x273d3c,_0xfd4883,_0x5b6c8c){return _0x273d3c(_0xfd4883,_0x5b6c8c);},'lHpCT':'with\x20options.keepFileExt\x20=\x20true','qdldK':'with\x20options.compress\x20=\x20true\x20and\x20keepFileExt\x20=\x20true','dxHFS':_0x4082f5(0x1de),'inCcV':_0x4082f5(0x167),'SRbAN':_0x4082f5(0x176),'xhmOE':'when\x20many\x20files\x20already\x20exist','fGaQX':function(_0x44742b,_0x4b25f9,_0x300fdb){return _0x44742b(_0x4b25f9,_0x300fdb);},'bwyaG':_0x4082f5(0x225)};_0x1946e4[_0x4082f5(0x1c3)](describe,_0x4082f5(0x239),function(){const _0x17a7d5=_0x4082f5,_0x2c1655={'oozlQ':function(_0xee39ca,_0xacfd10){const _0x268e98=_0x301a;return _0x1946e4[_0x268e98(0x1e3)](_0xee39ca,_0xacfd10);},'sERpu':_0x17a7d5(0x16c)};let _0x4ff033;before(async function(){const _0x40eb06=_0x17a7d5;await _0x2c1655[_0x40eb06(0x1ad)](remove,_0x2c1655[_0x40eb06(0x169)]),_0x4ff033=new RollingFileStream(path['join'](__dirname,_0x40eb06(0x16c)),0x400,0x5);}),after(async function(){const _0x4f98cb=_0x17a7d5;await close(_0x4ff033),await _0x1946e4[_0x4f98cb(0x1bd)](remove,'test-rolling-file-stream');}),_0x1946e4[_0x17a7d5(0x1da)](it,_0x1946e4[_0x17a7d5(0x222)],function(){const _0xf187bd=_0x17a7d5;_0x4ff033[_0xf187bd(0x18b)]['be']['an']['instanceOf'](streams[_0xf187bd(0x156)]),_0x4ff033[_0xf187bd(0x21c)][_0xf187bd(0x18b)][_0xf187bd(0x1c9)](path[_0xf187bd(0x1e5)](__dirname,_0xf187bd(0x16c))),_0x4ff033['size'][_0xf187bd(0x18b)]['eql'](0x400),_0x4ff033[_0xf187bd(0x1d1)]['should'][_0xf187bd(0x1c9)](0x5);}),_0x1946e4[_0x17a7d5(0x1da)](it,'should\x20apply\x20default\x20settings\x20to\x20the\x20underlying\x20stream',function(){const _0x8d33b3=_0x17a7d5;_0x4ff033['theStream']['mode'][_0x8d33b3(0x18b)][_0x8d33b3(0x1c9)](0x180),_0x4ff033[_0x8d33b3(0x1f8)][_0x8d33b3(0x209)][_0x8d33b3(0x18b)][_0x8d33b3(0x1c9)]('a');});}),describe(_0x1946e4[_0x4082f5(0x1b6)],function(){const _0x599c9a=_0x4082f5,_0x43b210={'PbHDE':function(_0x1c261e,_0x7ae64c){const _0x45ac9d=_0x301a;return _0x1946e4[_0x45ac9d(0x1e3)](_0x1c261e,_0x7ae64c);},'dCIaD':_0x599c9a(0x16c),'zLqaL':function(_0x1a71f0,_0x21beaf){const _0xc86900=_0x599c9a;return _0x1946e4[_0xc86900(0x13f)](_0x1a71f0,_0x21beaf);},'GuAHP':_0x599c9a(0x1ae),'UGoXq':_0x599c9a(0x1a0)};if(_0x599c9a(0x177)!==_0x1946e4['lTgtD']){let _0xfda506;_0x1946e4[_0x599c9a(0x23b)](it,_0x1946e4[_0x599c9a(0x249)],function(){const _0x4cb387=_0x599c9a;_0xfda506=new RollingFileStream(path[_0x4cb387(0x1e5)](__dirname,_0x4cb387(0x16c)),0x400,0x5,{'mode':_0x1946e4[_0x4cb387(0x19a)](parseInt,'0666',0x8)}),_0xfda506[_0x4cb387(0x1f8)][_0x4cb387(0x21d)][_0x4cb387(0x18b)][_0x4cb387(0x1c9)](_0x1946e4[_0x4cb387(0x178)](parseInt,_0x4cb387(0x1f6),0x8));}),after(async function(){const _0x376a10=_0x599c9a;await _0x43b210[_0x376a10(0x163)](close,_0xfda506),await remove(_0x43b210[_0x376a10(0x161)]);});}else return _0x2d95e6[_0x599c9a(0x24c)]([_0x43b210[_0x599c9a(0x183)](_0x793dc6,_0x43b210[_0x599c9a(0x204)]),_0x2f2022(_0x43b210['UGoXq']),_0x280549(_0x599c9a(0x1b2))]);}),describe('without\x20size',function(){const _0x54cfed=_0x4082f5;let _0x73723c;it(_0x1946e4[_0x54cfed(0x205)],function(){const _0x4c1b2a=_0x54cfed;_0x73723c=new RollingFileStream(path[_0x4c1b2a(0x1e5)](__dirname,_0x1946e4[_0x4c1b2a(0x149)])),_0x73723c[_0x4c1b2a(0x145)][_0x4c1b2a(0x18b)][_0x4c1b2a(0x1c9)](Number['MAX_SAFE_INTEGER']);}),after(async function(){const _0x201714=_0x54cfed;await _0x1946e4[_0x201714(0x13f)](close,_0x73723c),await _0x1946e4[_0x201714(0x1bd)](remove,_0x1946e4['LHZCa']);});}),_0x1946e4[_0x4082f5(0x1a2)](describe,'without\x20number\x20of\x20backups',function(){const _0x5d7067=_0x4082f5,_0x7df1de={'kouMg':function(_0x5db947,_0x1b4113){return _0x5db947(_0x1b4113);}};let _0xccf253;_0x1946e4['OwFKE'](it,_0x5d7067(0x210),function(){const _0x14d5da=_0x5d7067;_0xccf253=new RollingFileStream(path[_0x14d5da(0x1e5)](__dirname,_0x1946e4['LHZCa']),0x400),_0xccf253[_0x14d5da(0x1d1)][_0x14d5da(0x18b)]['eql'](0x1);}),_0x1946e4[_0x5d7067(0x1fc)](after,async function(){const _0x510f16=_0x5d7067;await _0x7df1de[_0x510f16(0x25f)](close,_0xccf253),await remove(_0x510f16(0x16c));});}),_0x1946e4['JvydQ'](describe,_0x1946e4[_0x4082f5(0x174)],()=>{const _0x53a27c=_0x4082f5;_0x1946e4[_0x53a27c(0x18d)](it,_0x53a27c(0x19c),()=>{const _0x2accb5=_0x53a27c,_0x298b4b=-0x1;(()=>{const _0x587a03=_0x301a;new RollingFileStream(path[_0x587a03(0x1e5)](__dirname,_0x587a03(0x16c)),0x400,_0x298b4b);})[_0x2accb5(0x18b)][_0x2accb5(0x251)]('options.numBackups\x20('+_0x298b4b+')\x20should\x20be\x20>=\x200');}),_0x1946e4[_0x53a27c(0x19f)](it,_0x1946e4['fbqQo'],()=>{const _0x4743f2=_0x53a27c,_0x266221=Number[_0x4743f2(0x1f7)];(()=>{const _0xdaef37=_0x4743f2;new RollingFileStream(path[_0xdaef37(0x1e5)](__dirname,_0xdaef37(0x16c)),0x400,_0x266221);})['should'][_0x4743f2(0x251)](_0x4743f2(0x194)+_0x266221+_0x4743f2(0x14b));});}),_0x1946e4[_0x4082f5(0x16a)](describe,_0x1946e4[_0x4082f5(0x1a6)],()=>{const _0x52a653=_0x4082f5,_0x426217={'JNFCu':function(_0x280f9b,_0x34b4f3){return _0x280f9b(_0x34b4f3);},'ruowv':_0x1946e4[_0x52a653(0x149)]};describe(_0x52a653(0x153),()=>{const _0xedb327=_0x52a653;let _0x1cad2c;_0x1946e4[_0xedb327(0x18d)](it,_0x1946e4[_0xedb327(0x14f)],function(){const _0x2b1335=_0xedb327;_0x1cad2c=new RollingFileStream(path[_0x2b1335(0x1e5)](__dirname,_0x2b1335(0x16c)),0x400,0x3),_0x1cad2c['options'][_0x2b1335(0x157)]['should'][_0x2b1335(0x1c9)](_0x1cad2c['backups']);}),it(_0x1946e4[_0xedb327(0x141)],function(){const _0x4d7820=_0xedb327;_0x1cad2c[_0x4d7820(0x219)][_0x4d7820(0x241)][_0x4d7820(0x18b)][_0x4d7820(0x1c9)](_0x1cad2c[_0x4d7820(0x219)]['numBackups']+0x1);}),after(async function(){const _0x5f24d1=_0xedb327;await _0x426217['JNFCu'](close,_0x1cad2c),await remove(_0x5f24d1(0x16c));});}),_0x1946e4[_0x52a653(0x1ed)](describe,_0x52a653(0x252),function(){const _0x5768e5=_0x52a653;let _0x472967;_0x1946e4[_0x5768e5(0x23b)](it,_0x5768e5(0x18f),function(){const _0x35bad9=_0x5768e5;_0x472967=new RollingFileStream(path[_0x35bad9(0x1e5)](__dirname,_0x35bad9(0x16c)),0x400,0x3,{'numBackups':0x9}),_0x472967[_0x35bad9(0x1d1)][_0x35bad9(0x18b)]['not'][_0x35bad9(0x1c9)](0x3),_0x472967[_0x35bad9(0x1d1)][_0x35bad9(0x18b)][_0x35bad9(0x1c9)](0x9),_0x472967[_0x35bad9(0x219)][_0x35bad9(0x157)]['should']['eql'](0x9),_0x472967[_0x35bad9(0x219)]['numToKeep']['should']['eql'](0xa);}),_0x1946e4['tyFUa'](after,async function(){const _0x24024f=_0x5768e5;await _0x426217['JNFCu'](close,_0x472967),await _0x426217[_0x24024f(0x18a)](remove,_0x426217[_0x24024f(0x24d)]);});});}),describe(_0x1946e4['WQpib'],function(){const _0x4cbe60=_0x4082f5,_0x99940c={'CEBCx':function(_0x5e3448,_0x40b4e4){const _0x115096=_0x301a;return _0x1946e4[_0x115096(0x1e3)](_0x5e3448,_0x40b4e4);},'RsluZ':'test-rolling-file-stream-write-less','UIpiP':_0x1946e4[_0x4cbe60(0x233)]};_0x1946e4['FYmQm'](before,async function(){const _0xe8bfbd=_0x4cbe60;await _0x99940c[_0xe8bfbd(0x1f3)](remove,_0x99940c[_0xe8bfbd(0x22f)]);const _0x48db65=new RollingFileStream(path[_0xe8bfbd(0x1e5)](__dirname,_0x99940c[_0xe8bfbd(0x22f)]),0x64);await writeInSequence(_0x48db65,[_0xe8bfbd(0x1f9)]);}),after(async function(){const _0x1605ed=_0x4cbe60;await _0x99940c[_0x1605ed(0x1f3)](remove,'test-rolling-file-stream-write-less');}),_0x1946e4[_0x4cbe60(0x1dd)](it,_0x4cbe60(0x24f),async function(){const _0x70729a=_0x4cbe60,_0x52ea04=await fs[_0x70729a(0x172)](path['join'](__dirname,_0x99940c[_0x70729a(0x22f)]),_0x99940c[_0x70729a(0x1aa)]);_0x52ea04['should'][_0x70729a(0x1c9)](_0x70729a(0x15f));}),_0x1946e4[_0x4cbe60(0x218)](it,_0x4cbe60(0x1ce),async function(){const _0xab6374=_0x4cbe60,_0x17307c=await fs[_0xab6374(0x1a3)](__dirname);_0x17307c[_0xab6374(0x201)](_0x3d20b4=>_0x3d20b4[_0xab6374(0x23a)](_0xab6374(0x22c))>-0x1)[_0xab6374(0x18b)][_0xab6374(0x248)][_0xab6374(0x1fd)](0x1);});}),_0x1946e4[_0x4082f5(0x23f)](describe,'writing\x20more\x20than\x20the\x20file\x20size',function(){const _0xb642c2=_0x4082f5,_0x2367d4={'bOqNX':function(_0x55471e,_0x229a52){const _0x4f946a=_0x301a;return _0x1946e4[_0x4f946a(0x1f2)](_0x55471e,_0x229a52);},'rUsKi':'compressed-backups.log_2.gz'};_0x1946e4[_0xb642c2(0x143)](before,async function(){const _0x37be6f=_0xb642c2;if(_0x1946e4['FhMRg'](_0x1946e4[_0x37be6f(0x152)],'hXmYc'))return _0x178b4b[_0x37be6f(0x24c)]([_0x262fcc('compressed-backups.log'),_0x2367d4[_0x37be6f(0x155)](_0x2f1c95,_0x37be6f(0x253)),_0x2b62b2(_0x2367d4['rUsKi'])]);else{await remove(_0x37be6f(0x208)),await remove(_0x37be6f(0x154));const _0x5f3fa=new RollingFileStream(path['join'](__dirname,_0x1946e4[_0x37be6f(0x187)]),0x2d);await writeInSequence(_0x5f3fa,[0x0,0x1,0x2,0x3,0x4,0x5,0x6][_0x37be6f(0x150)](_0x190fd3=>_0x190fd3+'.cheese'));}}),after(async function(){const _0x17e3e9=_0xb642c2;await remove(_0x17e3e9(0x208)),await remove(_0x17e3e9(0x154));}),it(_0xb642c2(0x181),async function(){const _0xc9b4ee=_0xb642c2,_0x509813=await fs[_0xc9b4ee(0x1a3)](__dirname);_0x509813[_0xc9b4ee(0x201)](_0x4ad500=>_0x4ad500[_0xc9b4ee(0x23a)](_0xc9b4ee(0x208))>-0x1)[_0xc9b4ee(0x18b)][_0xc9b4ee(0x248)]['length'](0x2);}),_0x1946e4['TInpC'](it,_0x1946e4[_0xb642c2(0x144)],async function(){const _0x2edf68=_0xb642c2,_0x24bc9b=await fs[_0x2edf68(0x172)](path[_0x2edf68(0x1e5)](__dirname,_0x2edf68(0x208)),_0x2edf68(0x261));_0x24bc9b['should'][_0x2edf68(0x1c9)](_0x2edf68(0x1ca));}),_0x1946e4['bwIat'](it,_0x1946e4[_0xb642c2(0x1f1)],async function(){const _0x4806f3=_0xb642c2,_0x3cfadf=await fs[_0x4806f3(0x172)](path['join'](__dirname,_0x1946e4['mtRKf']),_0x4806f3(0x261));_0x3cfadf[_0x4806f3(0x18b)][_0x4806f3(0x1c9)](_0x4806f3(0x151));});}),_0x1946e4[_0x4082f5(0x200)](describe,_0x1946e4['XvtZF'],function(){const _0x5bc0ff=_0x4082f5,_0x1c7ab2={'GxPry':_0x5bc0ff(0x195),'onFdl':'utf8','cUErn':function(_0x53af59,_0x32bb74){const _0x54d010=_0x5bc0ff;return _0x1946e4[_0x54d010(0x158)](_0x53af59,_0x32bb74);},'piFLG':'This\x20is\x20the\x20second\x20log\x20message.\x0a'};before(async function(){const _0x49f7b4=_0x5bc0ff,_0x25efc2=new RollingFileStream(path[_0x49f7b4(0x1e5)](__dirname,'compressed-backups.log'),0x1e,0x2,{'compress':!![]}),_0x8d5895=['This\x20is\x20the\x20first\x20log\x20message.',_0x49f7b4(0x1dc),_0x49f7b4(0x206),_0x1946e4[_0x49f7b4(0x1e0)]];await writeInSequence(_0x25efc2,_0x8d5895);}),it('should\x20produce\x20three\x20files,\x20with\x20the\x20backups\x20compressed',async function(){const _0x44c7f5=_0x5bc0ff,_0x4782c0=await fs[_0x44c7f5(0x1a3)](__dirname),_0x442bcb=_0x4782c0['filter'](_0x2430fd=>_0x2430fd[_0x44c7f5(0x23a)](_0x44c7f5(0x192))>-0x1)[_0x44c7f5(0x1c7)]();_0x442bcb[_0x44c7f5(0x1fd)][_0x44c7f5(0x18b)]['eql'](0x3),_0x442bcb[_0x44c7f5(0x18b)][_0x44c7f5(0x1c9)]([_0x44c7f5(0x192),_0x44c7f5(0x196),_0x1c7ab2['GxPry']]);let _0x57b452=await fs[_0x44c7f5(0x172)](path[_0x44c7f5(0x1e5)](__dirname,_0x442bcb[0x0]),_0x1c7ab2[_0x44c7f5(0x255)]);_0x57b452[_0x44c7f5(0x18b)][_0x44c7f5(0x1c9)](_0x44c7f5(0x19d));let _0x5e40ca=await fs[_0x44c7f5(0x172)](path[_0x44c7f5(0x1e5)](__dirname,_0x442bcb[0x1]));_0x57b452=await _0x1c7ab2[_0x44c7f5(0x1d4)](gunzip,_0x5e40ca),_0x57b452['toString'](_0x44c7f5(0x261))[_0x44c7f5(0x18b)][_0x44c7f5(0x1c9)](_0x44c7f5(0x25b)),_0x5e40ca=await fs[_0x44c7f5(0x172)](path[_0x44c7f5(0x1e5)](__dirname,_0x442bcb[0x2])),_0x57b452=await gunzip(_0x5e40ca),_0x57b452['toString'](_0x44c7f5(0x261))[_0x44c7f5(0x18b)][_0x44c7f5(0x1c9)](_0x1c7ab2['piFLG']);}),after(function(){const _0x57b52a=_0x5bc0ff,_0x249bee={'pbZjD':_0x1946e4[_0x57b52a(0x149)]};if(_0x1946e4[_0x57b52a(0x1b1)]('fMRBo',_0x1946e4[_0x57b52a(0x148)])){const _0x49b9f6=_0x25b55f['MAX_SAFE_INTEGER'];(()=>{new _0x5d8294(_0x1e4516['join'](_0x56ffb5,_0x249bee['pbZjD']),0x400,_0x49b9f6);})[_0x57b52a(0x18b)]['throw'](_0x57b52a(0x194)+_0x49b9f6+_0x57b52a(0x14b));}else return Promise[_0x57b52a(0x24c)]([remove(_0x57b52a(0x192)),_0x1946e4[_0x57b52a(0x25c)](remove,_0x1946e4[_0x57b52a(0x14c)]),_0x1946e4[_0x57b52a(0x13f)](remove,_0x1946e4[_0x57b52a(0x20f)])]);});}),_0x1946e4['tpGkR'](describe,_0x1946e4['lHpCT'],function(){const _0x2540a8=_0x4082f5,_0x490258={'VSsUK':_0x1946e4[_0x2540a8(0x1cc)],'UClUS':_0x1946e4['nsNmR'],'mMOou':_0x1946e4[_0x2540a8(0x159)],'gUXQt':_0x1946e4['gSdGX'],'YVyJq':function(_0x3e5fb4,_0x4ef13e,_0x40962b){const _0x14271f=_0x2540a8;return _0x1946e4[_0x14271f(0x17b)](_0x3e5fb4,_0x4ef13e,_0x40962b);},'JfKRv':_0x1946e4[_0x2540a8(0x233)],'dHHLR':_0x1946e4[_0x2540a8(0x242)],'ZlGli':'This\x20is\x20the\x20fourth\x20log\x20message.\x0a','eulDa':function(_0x12561a,_0x37fcf){const _0x1925b0=_0x2540a8;return _0x1946e4[_0x1925b0(0x1bd)](_0x12561a,_0x37fcf);}};_0x1946e4[_0x2540a8(0x1fe)](before,async function(){const _0x4754d1=_0x2540a8,_0x121970=new RollingFileStream(path[_0x4754d1(0x1e5)](__dirname,_0x490258['VSsUK']),0x1e,0x2,{'keepFileExt':!![]}),_0x21f85e=[_0x490258[_0x4754d1(0x170)],_0x490258['mMOou'],_0x490258['gUXQt'],_0x4754d1(0x13d)];await _0x490258[_0x4754d1(0x220)](writeInSequence,_0x121970,_0x21f85e);}),it(_0x2540a8(0x1d7),async function(){const _0x183ed3=_0x2540a8,_0x5be77b=await fs['readdir'](__dirname),_0x1a0436=_0x5be77b[_0x183ed3(0x201)](_0x155e5b=>_0x155e5b['indexOf']('extKept-backups')>-0x1)[_0x183ed3(0x1c7)]();_0x1a0436[_0x183ed3(0x1fd)][_0x183ed3(0x18b)]['eql'](0x3),_0x1a0436[_0x183ed3(0x18b)][_0x183ed3(0x1c9)](['extKept-backups.1.log',_0x183ed3(0x165),_0x490258[_0x183ed3(0x21b)]]);let _0x4f3245=await fs[_0x183ed3(0x172)](path[_0x183ed3(0x1e5)](__dirname,_0x1a0436[0x0]),_0x183ed3(0x261));_0x4f3245[_0x183ed3(0x18b)][_0x183ed3(0x1c9)]('This\x20is\x20the\x20third\x20log\x20message.\x0a'),_0x4f3245=await fs['readFile'](path[_0x183ed3(0x1e5)](__dirname,_0x1a0436[0x1]),_0x490258['JfKRv']),_0x4f3245[_0x183ed3(0x19b)]('utf8')[_0x183ed3(0x18b)][_0x183ed3(0x1c9)](_0x490258[_0x183ed3(0x164)]),_0x4f3245=await fs[_0x183ed3(0x172)](path[_0x183ed3(0x1e5)](__dirname,_0x1a0436[0x2]),_0x490258[_0x183ed3(0x212)]),_0x4f3245[_0x183ed3(0x19b)]('utf8')[_0x183ed3(0x18b)][_0x183ed3(0x1c9)](_0x490258[_0x183ed3(0x186)]);}),_0x1946e4[_0x2540a8(0x1fa)](after,function(){const _0x15d2b5=_0x2540a8;return Promise[_0x15d2b5(0x24c)]([_0x490258[_0x15d2b5(0x1ec)](remove,_0x490258[_0x15d2b5(0x21b)]),_0x490258[_0x15d2b5(0x1ec)](remove,_0x15d2b5(0x1d5)),remove(_0x15d2b5(0x165))]);});}),describe(_0x1946e4['qdldK'],function(){const _0x1f2ec1=_0x4082f5,_0x3087b0={'JaViU':_0x1f2ec1(0x16c),'CWLlu':_0x1946e4[_0x1f2ec1(0x258)],'HUKXq':_0x1946e4['OrSma'],'PwLbT':_0x1f2ec1(0x261),'lSDGa':_0x1f2ec1(0x19d),'IRqAc':_0x1946e4[_0x1f2ec1(0x15e)],'APshi':function(_0x1a635e,_0x3359df){return _0x1a635e(_0x3359df);},'SGlIU':function(_0x12ca10,_0x1795dd){const _0x518706=_0x1f2ec1;return _0x1946e4[_0x518706(0x143)](_0x12ca10,_0x1795dd);},'qRoFl':_0x1946e4[_0x1f2ec1(0x1db)]};_0x1946e4[_0x1f2ec1(0x227)](before,async function(){const _0x4a6295=_0x1f2ec1;if(_0x1946e4[_0x4a6295(0x243)](_0x1946e4[_0x4a6295(0x1e6)],_0x4a6295(0x1c8))){const _0x18fa3d=new RollingFileStream(path[_0x4a6295(0x1e5)](__dirname,_0x4a6295(0x192)),0x1e,0x2,{'compress':!![],'keepFileExt':!![]}),_0x1df346=[_0x4a6295(0x191),_0x1946e4[_0x4a6295(0x159)],_0x4a6295(0x206),_0x4a6295(0x13d)];await writeInSequence(_0x18fa3d,_0x1df346);}else new _0x4eb70a(_0x54a42e[_0x4a6295(0x1e5)](_0x43e5ec,_0x3087b0[_0x4a6295(0x231)]),0x400,_0x3a4ca6);}),_0x1946e4[_0x1f2ec1(0x218)](it,_0x1946e4[_0x1f2ec1(0x236)],async function(){const _0x212fde=_0x1f2ec1,_0x169562=await fs[_0x212fde(0x1a3)](__dirname),_0x23100d=_0x169562['filter'](_0x35310c=>_0x35310c['indexOf'](_0x212fde(0x14d))>-0x1)[_0x212fde(0x1c7)]();_0x23100d['length'][_0x212fde(0x18b)][_0x212fde(0x1c9)](0x3),_0x23100d[_0x212fde(0x18b)]['eql']([_0x3087b0[_0x212fde(0x1b0)],'compressed-backups.2.log.gz',_0x3087b0[_0x212fde(0x1c2)]]);let _0x4b4f0a=await fs['readFile'](path[_0x212fde(0x1e5)](__dirname,_0x23100d[0x2]),_0x3087b0[_0x212fde(0x1d0)]);_0x4b4f0a['should'][_0x212fde(0x1c9)](_0x3087b0['lSDGa']);let _0x30dde1=await fs[_0x212fde(0x172)](path[_0x212fde(0x1e5)](__dirname,_0x23100d[0x1]));_0x4b4f0a=await gunzip(_0x30dde1),_0x4b4f0a[_0x212fde(0x19b)](_0x212fde(0x261))[_0x212fde(0x18b)][_0x212fde(0x1c9)]('This\x20is\x20the\x20second\x20log\x20message.\x0a'),_0x30dde1=await fs[_0x212fde(0x172)](path[_0x212fde(0x1e5)](__dirname,_0x23100d[0x0])),_0x4b4f0a=await gunzip(_0x30dde1),_0x4b4f0a[_0x212fde(0x19b)](_0x3087b0['PwLbT'])['should'][_0x212fde(0x1c9)](_0x3087b0[_0x212fde(0x1a9)]);}),after(function(){const _0x4bb0cb=_0x1f2ec1;if(_0x4bb0cb(0x1ff)===_0x4bb0cb(0x223))_0x2fbd71?_0x19febf(_0x26b062):_0x48c973();else return Promise[_0x4bb0cb(0x24c)]([_0x3087b0['APshi'](remove,_0x4bb0cb(0x192)),_0x3087b0[_0x4bb0cb(0x16b)](remove,_0x3087b0[_0x4bb0cb(0x1b0)]),_0x3087b0[_0x4bb0cb(0x16b)](remove,_0x3087b0['qRoFl'])]);});}),_0x1946e4['erQvX'](describe,_0x1946e4[_0x4082f5(0x1cf)],function(){const _0x1fa206=_0x4082f5,_0x5e6835={'NsXFr':'fileNameSep-backups.log','yDXER':_0x1fa206(0x191),'alOKh':'utf8','KUMof':function(_0x251539,_0x5b9d5c){const _0x5a77b3=_0x1fa206;return _0x1946e4[_0x5a77b3(0x23e)](_0x251539,_0x5b9d5c);},'upKsM':_0x1946e4[_0x1fa206(0x262)]};_0x1946e4['aOudZ'](before,async function(){const _0x3554c0=_0x1fa206,_0x404cdd=new RollingFileStream(path[_0x3554c0(0x1e5)](__dirname,_0x5e6835[_0x3554c0(0x24b)]),0x1e,0x2,{'fileNameSep':'_'}),_0x4b3758=[_0x5e6835[_0x3554c0(0x21f)],_0x3554c0(0x1dc),_0x3554c0(0x206),_0x3554c0(0x13d)];await writeInSequence(_0x404cdd,_0x4b3758);}),_0x1946e4[_0x1fa206(0x16e)](it,_0x1fa206(0x1bc),async function(){const _0x5c6128=_0x1fa206,_0x38748e=await fs[_0x5c6128(0x1a3)](__dirname),_0x78c21d=_0x38748e[_0x5c6128(0x201)](_0x2f9d41=>_0x2f9d41[_0x5c6128(0x23a)](_0x5c6128(0x1b3))>-0x1)['sort']();_0x78c21d['length']['should'][_0x5c6128(0x1c9)](0x3),_0x78c21d[_0x5c6128(0x18b)][_0x5c6128(0x1c9)]([_0x5c6128(0x1a0),_0x5c6128(0x1b2),_0x5c6128(0x1ae)][_0x5c6128(0x1c7)]());let _0x21bb61=await fs['readFile'](path[_0x5c6128(0x1e5)](__dirname,_0x78c21d[0x0]),_0x5c6128(0x261));_0x21bb61['should'][_0x5c6128(0x1c9)](_0x5c6128(0x19d)),_0x21bb61=await fs[_0x5c6128(0x172)](path[_0x5c6128(0x1e5)](__dirname,_0x78c21d[0x1]),'utf8'),_0x21bb61[_0x5c6128(0x19b)](_0x5c6128(0x261))[_0x5c6128(0x18b)][_0x5c6128(0x1c9)]('This\x20is\x20the\x20third\x20log\x20message.\x0a'),_0x21bb61=await fs[_0x5c6128(0x172)](path['join'](__dirname,_0x78c21d[0x2]),_0x5e6835[_0x5c6128(0x1c0)]),_0x21bb61[_0x5c6128(0x19b)](_0x5c6128(0x261))[_0x5c6128(0x18b)][_0x5c6128(0x1c9)](_0x5c6128(0x21e));}),_0x1946e4[_0x1fa206(0x25c)](after,function(){const _0xac2b0c=_0x1fa206;return Promise['all']([_0x5e6835['KUMof'](remove,_0x5e6835[_0xac2b0c(0x24b)]),_0x5e6835['KUMof'](remove,_0x5e6835[_0xac2b0c(0x1d9)]),remove(_0xac2b0c(0x1b2))]);});}),_0x1946e4[_0x4082f5(0x1dd)](describe,_0x1946e4[_0x4082f5(0x1ac)],function(){const _0x1f81fd=_0x4082f5,_0xca5d4a={'dZfqD':_0x1f81fd(0x1d8),'RpClu':_0x1f81fd(0x206),'MDmiU':_0x1946e4[_0x1f81fd(0x1e0)],'JBDTX':'This\x20is\x20the\x20third\x20log\x20message.\x0a','QSzrN':_0x1946e4[_0x1f81fd(0x242)]};_0x1946e4[_0x1f81fd(0x227)](before,async function(){const _0x45974e=_0x1f81fd,_0x98331=new RollingFileStream(path[_0x45974e(0x1e5)](__dirname,_0xca5d4a[_0x45974e(0x193)]),0x1e,0x2,{'fileNameSep':'_','keepFileExt':!![]}),_0x23c602=[_0x45974e(0x191),'This\x20is\x20the\x20second\x20log\x20message.',_0xca5d4a['RpClu'],_0xca5d4a['MDmiU']];await writeInSequence(_0x98331,_0x23c602);}),it(_0x1946e4[_0x1f81fd(0x147)],async function(){const _0x21286d=_0x1f81fd,_0x5dffd0=await fs[_0x21286d(0x1a3)](__dirname),_0xcafda5=_0x5dffd0['filter'](_0x408254=>_0x408254[_0x21286d(0x23a)](_0x21286d(0x17e))>-0x1)['sort']();_0xcafda5['length'][_0x21286d(0x18b)][_0x21286d(0x1c9)](0x3),_0xcafda5[_0x21286d(0x18b)][_0x21286d(0x1c9)]([_0x21286d(0x23c),_0x21286d(0x15c),_0xca5d4a['dZfqD']][_0x21286d(0x1c7)]());let _0x5df699=await fs[_0x21286d(0x172)](path[_0x21286d(0x1e5)](__dirname,_0xcafda5[0x0]),_0x21286d(0x261));_0x5df699['should'][_0x21286d(0x1c9)](_0x21286d(0x19d)),_0x5df699=await fs[_0x21286d(0x172)](path[_0x21286d(0x1e5)](__dirname,_0xcafda5[0x1]),_0x21286d(0x261)),_0x5df699[_0x21286d(0x19b)](_0x21286d(0x261))[_0x21286d(0x18b)][_0x21286d(0x1c9)](_0xca5d4a['JBDTX']),_0x5df699=await fs[_0x21286d(0x172)](path[_0x21286d(0x1e5)](__dirname,_0xcafda5[0x2]),_0x21286d(0x261)),_0x5df699[_0x21286d(0x19b)](_0x21286d(0x261))[_0x21286d(0x18b)][_0x21286d(0x1c9)](_0xca5d4a[_0x21286d(0x1c5)]);}),_0x1946e4[_0x1f81fd(0x158)](after,function(){const _0x9d6ce1=_0x1f81fd;return Promise[_0x9d6ce1(0x24c)]([_0x1946e4[_0x9d6ce1(0x20a)](remove,_0x9d6ce1(0x1d8)),remove(_0x1946e4[_0x9d6ce1(0x224)]),remove('fileNameSep-extKept-backups_2.log')]);});}),_0x1946e4['yhqfC'](describe,_0x1946e4['SRbAN'],function(){const _0x2addd1=_0x4082f5,_0x5e6b6f={'OJoxJ':_0x2addd1(0x1dc),'WBUzc':_0x2addd1(0x13d),'ijuvr':function(_0x5470c5,_0x58f331,_0x4e707a){return _0x5470c5(_0x58f331,_0x4e707a);}};before(async function(){const _0x1e599c=_0x2addd1,_0x29bc2d=new RollingFileStream(path[_0x1e599c(0x1e5)](__dirname,_0x1e599c(0x192)),0x1e,0x2,{'fileNameSep':'_','compress':!![]}),_0x37d95f=['This\x20is\x20the\x20first\x20log\x20message.',_0x5e6b6f['OJoxJ'],'This\x20is\x20the\x20third\x20log\x20message.',_0x5e6b6f[_0x1e599c(0x162)]];await _0x5e6b6f[_0x1e599c(0x1be)](writeInSequence,_0x29bc2d,_0x37d95f);}),_0x1946e4[_0x2addd1(0x22a)](it,_0x2addd1(0x259),async function(){const _0x2a410c=_0x2addd1,_0x2f3aeb=await fs[_0x2a410c(0x1a3)](__dirname),_0x218bc9=_0x2f3aeb['filter'](_0x3713e2=>_0x3713e2[_0x2a410c(0x23a)]('compressed-backups')>-0x1)[_0x2a410c(0x1c7)]();_0x218bc9[_0x2a410c(0x1fd)][_0x2a410c(0x18b)][_0x2a410c(0x1c9)](0x3),_0x218bc9['should']['eql'](['compressed-backups.log_1.gz',_0x2a410c(0x1f4),_0x1946e4[_0x2a410c(0x1b4)]][_0x2a410c(0x1c7)]());let _0x522d2a=await fs['readFile'](path[_0x2a410c(0x1e5)](__dirname,_0x218bc9[0x0]),_0x1946e4['HqFEp']);_0x522d2a['should'][_0x2a410c(0x1c9)](_0x1946e4[_0x2a410c(0x240)]);let _0x36f999=await fs[_0x2a410c(0x172)](path['join'](__dirname,_0x218bc9[0x1]));_0x522d2a=await _0x1946e4[_0x2a410c(0x1fb)](gunzip,_0x36f999),_0x522d2a[_0x2a410c(0x19b)](_0x1946e4[_0x2a410c(0x233)])[_0x2a410c(0x18b)][_0x2a410c(0x1c9)](_0x1946e4[_0x2a410c(0x15e)]),_0x36f999=await fs[_0x2a410c(0x172)](path[_0x2a410c(0x1e5)](__dirname,_0x218bc9[0x2])),_0x522d2a=await _0x1946e4[_0x2a410c(0x1fe)](gunzip,_0x36f999),_0x522d2a[_0x2a410c(0x19b)]('utf8')[_0x2a410c(0x18b)][_0x2a410c(0x1c9)](_0x2a410c(0x21e));}),_0x1946e4[_0x2addd1(0x158)](after,function(){const _0xe942b=_0x2addd1;return Promise[_0xe942b(0x24c)]([remove(_0xe942b(0x192)),remove(_0xe942b(0x253)),remove(_0xe942b(0x1f4))]);});}),_0x1946e4['siYjb'](describe,_0x4082f5(0x1f5),function(){const _0x226357=_0x4082f5,_0x5c3840={'TPqFh':_0x226357(0x182),'wgfZv':'utf8','rbJrE':_0x226357(0x19d),'zGjdx':_0x1946e4[_0x226357(0x15e)],'DCsbm':function(_0x3d5195,_0x3ac61a){return _0x3d5195(_0x3ac61a);},'ptHmA':_0x1946e4[_0x226357(0x1b4)],'HWcBl':function(_0x8c36a0,_0x259644){const _0x3b3c5e=_0x226357;return _0x1946e4[_0x3b3c5e(0x146)](_0x8c36a0,_0x259644);},'yKfrr':function(_0x2edae4,_0x5a98ca){return _0x2edae4(_0x5a98ca);}};_0x1946e4['rIDTY']('yatGD','yatGD')?(_0x1946e4['jtLZd'](before,async function(){const _0x145dfd=_0x226357;if(_0x1946e4[_0x145dfd(0x243)](_0x1946e4['HHXHP'],_0x145dfd(0x199))){const _0x36590d=new RollingFileStream(path['join'](__dirname,_0x145dfd(0x192)),0x1e,0x2,{'fileNameSep':'_','compress':!![],'keepFileExt':!![]}),_0x191a65=[_0x145dfd(0x191),_0x145dfd(0x1dc),_0x145dfd(0x206),_0x145dfd(0x13d)];await writeInSequence(_0x36590d,_0x191a65);}else _0x4eb51a=new _0x3ea2ef(_0x3b06b0['join'](_0x31102f,_0x145dfd(0x16c)),0x400,0x3),_0x3c19b2['options']['numBackups']['should'][_0x145dfd(0x1c9)](_0x4973c4[_0x145dfd(0x1d1)]);}),it(_0x1946e4[_0x226357(0x236)],async function(){const _0x3f42bd=_0x226357,_0x3c95=await fs['readdir'](__dirname),_0x248cfb=_0x3c95[_0x3f42bd(0x201)](_0x3e8590=>_0x3e8590[_0x3f42bd(0x23a)](_0x3f42bd(0x14d))>-0x1)[_0x3f42bd(0x1c7)]();_0x248cfb[_0x3f42bd(0x1fd)][_0x3f42bd(0x18b)]['eql'](0x3),_0x248cfb[_0x3f42bd(0x18b)][_0x3f42bd(0x1c9)]([_0x3f42bd(0x1e7),_0x5c3840[_0x3f42bd(0x250)],_0x3f42bd(0x192)][_0x3f42bd(0x1c7)]());let _0xb94f71=await fs['readFile'](path['join'](__dirname,_0x248cfb[0x0]),_0x5c3840[_0x3f42bd(0x160)]);_0xb94f71[_0x3f42bd(0x18b)][_0x3f42bd(0x1c9)](_0x5c3840['rbJrE']);let _0x503eae=await fs['readFile'](path[_0x3f42bd(0x1e5)](__dirname,_0x248cfb[0x1]));_0xb94f71=await gunzip(_0x503eae),_0xb94f71[_0x3f42bd(0x19b)](_0x5c3840[_0x3f42bd(0x160)])['should'][_0x3f42bd(0x1c9)](_0x5c3840[_0x3f42bd(0x1e9)]),_0x503eae=await fs['readFile'](path[_0x3f42bd(0x1e5)](__dirname,_0x248cfb[0x2])),_0xb94f71=await _0x5c3840['DCsbm'](gunzip,_0x503eae),_0xb94f71[_0x3f42bd(0x19b)](_0x5c3840[_0x3f42bd(0x160)])[_0x3f42bd(0x18b)][_0x3f42bd(0x1c9)](_0x3f42bd(0x21e));}),after(function(){const _0x19fff8=_0x226357;return Promise[_0x19fff8(0x24c)]([remove(_0x5c3840[_0x19fff8(0x16d)]),_0x5c3840[_0x19fff8(0x17f)](remove,_0x19fff8(0x1e7)),_0x5c3840['yKfrr'](remove,'compressed-backups_2.log.gz')]);})):new _0x5ec3bd(_0x3d64eb[_0x226357(0x1e5)](_0x732e25,_0x226357(0x16c)),0x400,_0x4139d3);}),_0x1946e4[_0x4082f5(0x22a)](describe,_0x1946e4[_0x4082f5(0x1ab)],function(){const _0x394dd7=_0x4082f5,_0x114e87={'zOcgy':function(_0x391c5b,_0x55b93e){return _0x391c5b(_0x55b93e);},'gyngm':_0x1946e4['WycQL'],'SJiJS':_0x1946e4[_0x394dd7(0x215)],'MIUhO':_0x1946e4['loGvb'],'FsIuS':'test-rolling-stream-with-existing-files.1.1','NvbNh':_0x1946e4['ZaBDz'],'TmAkI':function(_0x50b885,_0x28cb1f){const _0x49191d=_0x394dd7;return _0x1946e4[_0x49191d(0x217)](_0x50b885,_0x28cb1f);},'GZgHd':function(_0x319759,_0x2db191){return _0x319759(_0x2db191);},'UbFTI':function(_0x56abec,_0x1e4336){return _0x56abec(_0x1e4336);}};before(async function(){const _0x3f08b5=_0x394dd7,_0x573768={'pINgl':function(_0x58f4aa,_0x484c93){return _0x114e87['zOcgy'](_0x58f4aa,_0x484c93);},'WfZmM':_0x114e87['gyngm'],'hbuYn':function(_0x25ea29,_0x1f43db){return _0x25ea29(_0x1f43db);},'pSlcE':_0x3f08b5(0x23c)};if(_0x114e87[_0x3f08b5(0x203)]===_0x3f08b5(0x1e2)){await Promise[_0x3f08b5(0x24c)]([remove(_0x114e87[_0x3f08b5(0x232)]),_0x114e87[_0x3f08b5(0x1b7)](remove,'test-rolling-stream-with-existing-files.20'),remove(_0x3f08b5(0x1a8)),_0x114e87[_0x3f08b5(0x1b7)](remove,_0x114e87['FsIuS']),_0x114e87[_0x3f08b5(0x1b7)](remove,_0x114e87[_0x3f08b5(0x214)])]),await Promise['all']([_0x114e87['TmAkI'](create,_0x114e87['MIUhO']),create(_0x3f08b5(0x238)),_0x114e87[_0x3f08b5(0x1b7)](create,_0x3f08b5(0x1a8)),_0x114e87['GZgHd'](create,_0x114e87[_0x3f08b5(0x1cb)]),_0x114e87[_0x3f08b5(0x22e)](create,'test-rolling-stream-with-existing-files.1')]);const _0x4e6a46=new RollingFileStream(path[_0x3f08b5(0x1e5)](__dirname,_0x3f08b5(0x254)),0x12,0x5);await writeInSequence(_0x4e6a46,[0x0,0x1,0x2,0x3,0x4,0x5,0x6]['map'](_0x46366c=>_0x46366c+_0x3f08b5(0x1d6)));}else return _0x5c23e6[_0x3f08b5(0x24c)]([_0x573768[_0x3f08b5(0x1ef)](_0x138833,_0x573768[_0x3f08b5(0x15a)]),_0x573768[_0x3f08b5(0x17c)](_0x9b8021,_0x573768[_0x3f08b5(0x25d)]),_0x3c4a5c(_0x3f08b5(0x15c))]);}),after(function(){const _0xe08022=_0x394dd7;return Promise[_0xe08022(0x24c)]([_0x1946e4[_0xe08022(0x24e)],_0x1946e4[_0xe08022(0x22b)],_0x1946e4['PLjmK'],_0xe08022(0x14a),_0xe08022(0x229),'test-rolling-stream-with-existing-files.2','test-rolling-stream-with-existing-files.3',_0x1946e4[_0xe08022(0x185)],_0x1946e4['lUVnd'],_0x1946e4[_0xe08022(0x166)],_0x1946e4[_0xe08022(0x168)],_0xe08022(0x238)][_0xe08022(0x150)](remove));}),_0x1946e4[_0x394dd7(0x1a1)](it,_0x1946e4['qGpZW'],async function(){const _0x361a86=_0x394dd7,_0x53faf4=await fs[_0x361a86(0x1a3)](__dirname);_0x53faf4['should']['containEql']('test-rolling-stream-with-existing-files'),_0x53faf4[_0x361a86(0x18b)][_0x361a86(0x184)](_0x114e87[_0x361a86(0x214)]),_0x53faf4['should'][_0x361a86(0x184)](_0x361a86(0x1b5)),_0x53faf4[_0x361a86(0x18b)][_0x361a86(0x184)](_0x361a86(0x19e)),_0x53faf4[_0x361a86(0x18b)]['containEql'](_0x361a86(0x180));});}),process[_0x4082f5(0x1af)]!==_0x4082f5(0x20d)&&_0x1946e4[_0x4082f5(0x1c1)](describe,_0x1946e4[_0x4082f5(0x25e)],function(){const _0x27e437=_0x4082f5,_0x58b528={'AjmGi':_0x27e437(0x1cd),'ZJhmJ':'subdir','aBnIZ':function(_0x36ab21,_0x150966){return _0x36ab21(_0x150966);}};var _0x3c5a18;before(function(_0x3e31ef){const _0x34a2c4=_0x27e437;_0x3c5a18=new RollingFileStream(path[_0x34a2c4(0x1e5)](_0x1946e4[_0x34a2c4(0x140)],'test-rolling-file-stream'),0x5,0x5),_0x3c5a18[_0x34a2c4(0x171)](_0x1946e4[_0x34a2c4(0x245)],_0x1946e4[_0x34a2c4(0x233)],_0x3e31ef);}),_0x1946e4[_0x27e437(0x22d)](after,async()=>{const _0x4717ed=_0x27e437;await fs[_0x4717ed(0x1d3)](path['join']('subdir',_0x4717ed(0x16c))),await fs['rmdir'](_0x1946e4['AcdEF']);}),_0x1946e4[_0x27e437(0x16a)](it,_0x1946e4['SUznA'],async function(){const _0x7a1205=_0x27e437;_0x3c5a18[_0x7a1205(0x1f8)]['on'](_0x58b528[_0x7a1205(0x1a5)],_0x513dd4=>{const _0x212bf2=_0x7a1205;if(_0x212bf2(0x228)!==_0x212bf2(0x256))throw _0x513dd4;else _0x27b835();}),await fs[_0x7a1205(0x1d3)](path['join'](_0x58b528[_0x7a1205(0x237)],_0x7a1205(0x16c))),await fs[_0x7a1205(0x1e1)](_0x7a1205(0x142)),await new Promise(_0x4485e7=>_0x3c5a18[_0x7a1205(0x171)](_0x7a1205(0x216),'utf8',_0x4485e7)),await _0x58b528[_0x7a1205(0x21a)](close,_0x3c5a18),(await fs[_0x7a1205(0x172)](path[_0x7a1205(0x1e5)](_0x58b528[_0x7a1205(0x237)],'test-rolling-file-stream'),_0x7a1205(0x261)))['should'][_0x7a1205(0x1c9)](_0x7a1205(0x216));});});});