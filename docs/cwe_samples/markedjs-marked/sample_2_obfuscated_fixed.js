const _0x3c3875=_0x2a44;function _0x5018(){const _0x382a4e=['10743020ypIAmu','lqPeO','fs-extra','finish','with','pipe','26930NvvSbq','streamroller:moveAndMaybeCompressFile','truncate','unlink','moveAndMaybeCompressFile:\x20source\x20and\x20target\x20are\x20the\x20same,\x20not\x20doing\x20anything','0644','150RINQHk','then','2816CPbzNn','createGzip','moveAndMaybeCompressFile:\x20finished\x20compressing\x20','compress','moveAndMaybeCompressFile:\x20moving\x20file\x20from\x20','207706ihWmdT','assign','INpSi','xbzpR','_parseOption:\x20moveAndMaybeCompressFile\x20called\x20with\x20option=','1077ZyjgUg','Trying\x20copy+truncate\x20instead','\x20to\x20','createWriteStream','6875666baoUpK','\x20compress','CXfOF','zlib','without','32460263AuyRVj','createReadStream','1495112qpijSW','Deleting\x20','4hMaBjX','move','NwVFr','27VxVHMT'];_0x5018=function(){return _0x382a4e;};return _0x5018();}(function(_0x514a38,_0x4a5419){const _0x3a00b3=_0x2a44,_0x566347=_0x514a38();while(!![]){try{const _0x271e86=-parseInt(_0x3a00b3(0x6e))/0x1*(-parseInt(_0x3a00b3(0x80))/0x2)+-parseInt(_0x3a00b3(0x73))/0x3*(-parseInt(_0x3a00b3(0x92))/0x4)+parseInt(_0x3a00b3(0x8a))/0x5*(-parseInt(_0x3a00b3(0x90))/0x6)+-parseInt(_0x3a00b3(0x77))/0x7+-parseInt(_0x3a00b3(0x7e))/0x8*(parseInt(_0x3a00b3(0x83))/0x9)+-parseInt(_0x3a00b3(0x84))/0xa+parseInt(_0x3a00b3(0x7c))/0xb;if(_0x271e86===_0x4a5419)break;else _0x566347['push'](_0x566347['shift']());}catch(_0x5af373){_0x566347['push'](_0x566347['shift']());}}}(_0x5018,0xd3b98));function _0x2a44(_0x230500,_0x172454){const _0x501817=_0x5018();return _0x2a44=function(_0x2a44b7,_0xf8f81f){_0x2a44b7=_0x2a44b7-0x6c;let _0x3e8a9d=_0x501817[_0x2a44b7];return _0x3e8a9d;},_0x2a44(_0x230500,_0x172454);}const debug=require('debug')(_0x3c3875(0x8b)),fs=require(_0x3c3875(0x86)),zlib=require(_0x3c3875(0x7a)),_parseOption=function(_0x25d3e){const _0x42a805=_0x3c3875,_0x5452d9={'mode':parseInt(_0x42a805(0x8f),0x8),'compress':![]},_0x32553c=Object[_0x42a805(0x6f)]({},_0x5452d9,_0x25d3e);return debug(_0x42a805(0x72)+JSON['stringify'](_0x32553c)),_0x32553c;},moveAndMaybeCompressFile=async(_0x3e711e,_0x48d2b3,_0x1a1c6f)=>{const _0x1262a7=_0x3c3875,_0x28f273={'CXfOF':function(_0x648193,_0x1057d7){return _0x648193(_0x1057d7);},'NwVFr':function(_0x1796f6,_0x5b26d5){return _0x1796f6===_0x5b26d5;},'INpSi':function(_0x418005,_0x37a100){return _0x418005(_0x37a100);},'lqPeO':_0x1262a7(0x88),'EWmyZ':function(_0x29c1cb,_0x42090d){return _0x29c1cb(_0x42090d);}};_0x1a1c6f=_0x28f273['CXfOF'](_parseOption,_0x1a1c6f);if(_0x28f273['NwVFr'](_0x3e711e,_0x48d2b3)){if(_0x28f273[_0x1262a7(0x82)](_0x1262a7(0x71),'yWuZe'))_0x580343(_0x1262a7(0x7f)+_0x20aaa1+'\x20failed,\x20truncating\x20instead'),_0x3cf239['truncate'](_0x436052)[_0x1262a7(0x91)](_0x115326)['catch'](_0x11dcb6);else{_0x28f273[_0x1262a7(0x70)](debug,_0x1262a7(0x8e));return;}}if(await fs['pathExists'](_0x3e711e)){debug(_0x1262a7(0x6d)+_0x3e711e+_0x1262a7(0x75)+_0x48d2b3+'\x20'+(_0x1a1c6f[_0x1262a7(0x6c)]?_0x28f273[_0x1262a7(0x85)]:_0x1262a7(0x7b))+_0x1262a7(0x78));if(_0x1a1c6f[_0x1262a7(0x6c)])await new Promise((_0x3b835f,_0x136719)=>{const _0x5f3bf1=_0x1262a7;fs[_0x5f3bf1(0x7d)](_0x3e711e)[_0x5f3bf1(0x89)](zlib[_0x5f3bf1(0x93)]())[_0x5f3bf1(0x89)](fs[_0x5f3bf1(0x76)](_0x48d2b3,{'mode':_0x1a1c6f['mode']}))['on'](_0x5f3bf1(0x87),()=>{const _0x39102a=_0x5f3bf1;_0x28f273[_0x39102a(0x79)](debug,_0x39102a(0x94)+_0x48d2b3+',\x20deleting\x20'+_0x3e711e),fs[_0x39102a(0x8d)](_0x3e711e)['then'](_0x3b835f)['catch'](()=>{const _0x4ede4e=_0x39102a;debug(_0x4ede4e(0x7f)+_0x3e711e+'\x20failed,\x20truncating\x20instead'),fs[_0x4ede4e(0x8c)](_0x3e711e)[_0x4ede4e(0x91)](_0x3b835f)['catch'](_0x136719);});});});else{_0x28f273['CXfOF'](debug,'moveAndMaybeCompressFile:\x20deleting\x20file='+_0x48d2b3+',\x20renaming\x20'+_0x3e711e+_0x1262a7(0x75)+_0x48d2b3);try{await fs[_0x1262a7(0x81)](_0x3e711e,_0x48d2b3,{'overwrite':!![]});}catch(_0x4031b3){debug('moveAndMaybeCompressFile:\x20error\x20moving\x20'+_0x3e711e+_0x1262a7(0x75)+_0x48d2b3,_0x4031b3),_0x28f273['EWmyZ'](debug,_0x1262a7(0x74)),await fs['copy'](_0x3e711e,_0x48d2b3,{'overwrite':!![]}),await fs[_0x1262a7(0x8c)](_0x3e711e);}}}};module['exports']=moveAndMaybeCompressFile;