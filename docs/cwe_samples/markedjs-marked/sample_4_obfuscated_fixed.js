const _0x372b5f=_0x4743;function _0x4743(_0x2769a7,_0x2873cc){const _0xb735da=_0xb735();return _0x4743=function(_0x47434e,_0x2345c3){_0x47434e=_0x47434e-0xee;let _0x470aa2=_0xb735da[_0x47434e];return _0x470aa2;},_0x4743(_0x2769a7,_0x2873cc);}(function(_0x46bb51,_0x2fb3fa){const _0x410764=_0x4743,_0x10db83=_0x46bb51();while(!![]){try{const _0x2bf20a=-parseInt(_0x410764(0x17e))/0x1*(-parseInt(_0x410764(0x21a))/0x2)+-parseInt(_0x410764(0x1a2))/0x3+parseInt(_0x410764(0x1d1))/0x4+-parseInt(_0x410764(0x158))/0x5+parseInt(_0x410764(0x1be))/0x6*(-parseInt(_0x410764(0xff))/0x7)+parseInt(_0x410764(0xf6))/0x8+-parseInt(_0x410764(0x1fd))/0x9;if(_0x2bf20a===_0x2fb3fa)break;else _0x10db83['push'](_0x10db83['shift']());}catch(_0x5a0b7b){_0x10db83['push'](_0x10db83['shift']());}}}(_0xb735,0xbf7c4),require(_0x372b5f(0xf9)));const fs=require(_0x372b5f(0x149)),path=require(_0x372b5f(0x221)),util=require(_0x372b5f(0x14a)),zlib=require(_0x372b5f(0x182)),streams=require(_0x372b5f(0x1dd)),RollingFileStream=require('../lib')[_0x372b5f(0x199)],gunzip=util[_0x372b5f(0x133)](zlib['gunzip']),fullPath=_0x23169b=>path[_0x372b5f(0x127)](__dirname,_0x23169b),remove=_0x44bcfb=>fs[_0x372b5f(0xf2)](fullPath(_0x44bcfb))[_0x372b5f(0x1ac)](()=>{}),create=_0x1bd370=>fs[_0x372b5f(0x11d)](fullPath(_0x1bd370),_0x372b5f(0x1b1)),write=(_0x32fc46,_0x30dc52)=>{return new Promise((_0x574381,_0x51ec50)=>{const _0x5de149={'dXlgC':function(_0x36fe15){return _0x36fe15();}};_0x32fc46['write'](_0x30dc52,'utf8',_0x758bad=>{_0x758bad?_0x51ec50(_0x758bad):_0x5de149['dXlgC'](_0x574381);});});},writeInSequence=async(_0x36a9a0,_0xc16abd)=>{const _0x21bc74=_0x372b5f,_0x56f573={'sbMbn':function(_0x2cf2c5,_0x2d8452){return _0x2cf2c5!==_0x2d8452;},'LTDcG':_0x21bc74(0xf7)};for(let _0x3be412=0x0;_0x3be412<_0xc16abd['length'];_0x3be412+=0x1){_0x56f573[_0x21bc74(0x20c)](_0x56f573[_0x21bc74(0x1d4)],_0x21bc74(0xfe))?await write(_0x36a9a0,_0xc16abd[_0x3be412]+'\x0a'):_0x4dbd42();}return new Promise(_0x27f1a0=>{const _0x3783d0=_0x21bc74;_0x36a9a0[_0x3783d0(0x15b)](_0x27f1a0);});},close=async _0xac7066=>new Promise((_0xf5207d,_0xbc6fd5)=>_0xac7066[_0x372b5f(0x15b)](_0x403115=>_0x403115?_0xbc6fd5(_0x403115):_0xf5207d()));function _0xb735(){const _0x253808=['arguments','compressed-backups.1.log.gz','This\x20is\x20the\x20first\x20log\x20message.','zWrBZ','fileNameSep-extKept-backups.log','FWSDp','rUREh','stream','GHFTd','numBackups','qfmDK','BnXLH','MKIXq','HEUno','should\x20pass\x20them\x20to\x20the\x20underlying\x20stream','extKept-backups.2.log','fileNameSep-backups.log_1','OiZnD','write','xwEFo','extKept-backups.log','should\x20produce\x20three\x20files,\x20with\x20the\x20fileNameSep','utf8','with\x20both\x20backups\x20and\x20options.numBackups','GKSjH','qUySc','dSpqb','numToKeep','Qeptj','BTnDG','should\x20complain\x20about\x20backups\x20>=\x20Number.MAX_SAFE_INTEGER','cheese\x0a','zJTqq','KfoxH','gjrfq','jyBAX','FFmGx','EAAdU','without\x20size','9234684fSgOpN','XHvQL','aVztZ','bbDPk','saxyQ','lGSIE','TnEaz','jFANU','initial','with\x20stream\x20arguments','rUiuW','Writable','extKept-backups.1.log','HShfY','mmsMv','sbMbn','tnrpH','eEmzh','toString','test-rolling-file-stream-write-less','test-rolling-stream-with-existing-files.1','UnrVP','should\x20produce\x20three\x20files,\x20with\x20the\x20backups\x20compressed','gbUsi','should\x20roll\x20the\x20files,\x20removing\x20the\x20highest\x20indices','RzSla','sVRCi','fileNameSep-extKept-backups_1.log','pTuac','33016HyWybY','test-rolling-stream-with-existing-files.3','0.cheese\x0a1.cheese\x0a2.cheese\x0a3.cheese\x0a4.cheese\x0a','should\x20take\x20a\x20filename,\x20file\x20size\x20(bytes),\x20no.\x20backups,\x20return\x20Writable','compressed-backups','FMJDZ','with\x20options.fileNameSep\x20=\x20\x22_\x22','path','throw','test-rolling-stream-with-existing-files.0','split','This\x20is\x20the\x20fourth\x20log\x20message.','indexOf','.cheese','CQmGH','FFEeF','This\x20is\x20the\x20second\x20log\x20message.','jhMmg','orprN','unlink','CPSzh','HqShu','This\x20is\x20the\x20second\x20log\x20message.\x0a','12044032brXDCg','VGstK','should\x20default\x20to\x20max\x20int\x20size','should','win32','TXhdR','TTVHl','sxdaa','TpFYs','21eAaGKm','options.numBackups\x20(','OycVs','UVmtR','This\x20is\x20the\x20third\x20log\x20message.','TXWkH','OmJaz','should\x20write\x20two\x20files','with\x20backups\x20but\x20not\x20options.numBackups','XwnRh','writing\x20more\x20than\x20the\x20file\x20size','HZwAu','should\x20write\x20one\x20file','QUIDC','XUmiF','test-rolling-stream-with-existing-files.-1','wWRWa','with\x20options.compress\x20=\x20true\x20and\x20keepFileExt\x20=\x20true','KKgdd','WpaAE','test-rolling-stream-with-existing-files.20','pbelt','btHYI','MqXkw','not','kXpNf','qJmAU','This\x20is\x20the\x20fourth\x20log\x20message.\x0a','filter','bCLnO','writeFile','ZCJoJ','igEPu','when\x20the\x20directory\x20gets\x20deleted','gmmVT','sort','GEbBh','AwFeC','fileNameSep-extKept-backups_2.log','luqQH','join','YuVPp','filename','test-rolling-stream-with-existing-files.1.1','Iegxk','mode','IHgqU','test-rolling-file-stream-write-more','MjTTu','fileNameSep-backups.log_2','cATwV','Mhqvl','promisify','have','twNci','YttRy','KbhXf','This\x20is\x20the\x20third\x20log\x20message.\x0a','with\x20options.fileNameSep\x20=\x20\x22_\x22,\x20options.compress\x20=\x20true\x20and\x20keepFileExt\x20=\x20true','hqeam','rmdir','all','qAkNg','emaBM','AhIwR','filwT','readdir','NoJJR','5.cheese\x0a6.cheese\x0a','xmCuF','pStTm','cBrVK','test-rolling-stream-with-existing-files.4','should\x20apply\x20default\x20settings\x20to\x20the\x20underlying\x20stream','fs-extra','util','OHDHE','NBlDa','zlQHO','teSRN','fileNameSep-backups.log','hUJwq','QpgHf','theStream','mdCNl','length','fNxip','containEql','flags','439695IazSrS','NrfMh','hIrTY','end','mstfi','vXbSB','wwYjo','test-rolling-stream-with-existing-files.6','SyAIv','wClBj','ABZat','XAetT','AVMmv','test-rolling-stream-with-existing-files.11','test-rolling-file-stream-write-more.1','VaNLv','brVKb','CFRRO','NZcnB',')\x20should\x20be\x20<\x20Number.MAX_SAFE_INTEGER','OubKe','YCjYT','iXfuI','ExeVu','with\x20options.fileNameSep\x20=\x20\x22_\x22\x20and\x20options.compress\x20=\x20true','spZys','YxawR','hagxz','GOVNf','map','DExsy','gGpIm','MAX_SAFE_INTEGER','lVbKj','eUaSL','compressed-backups.2.log.gz','jXLss','oxrpE','29WfToCI','compressed-backups.log_1.gz','oOcxn','TSmdu','zlib','jyzoG','dmSme','LpoZk','should\x20be\x20routed\x20from\x20backups\x20to\x20options.numBackups','iIgex','jzmxY','RaDBH','eql','VluRz','wFTuu','should\x20complain\x20about\x20negative\x20backups','backups','should\x20produce\x20three\x20files,\x20with\x20the\x20file-extension\x20kept','VMmiY','osiFG','readFile','cheese','compressed-backups_2.log.gz','jwewx','should\x20be\x20generated\x20into\x20stream.options.numToKeep\x20from\x20options.numBackups','AmyVK','Pkwrz','RollingFileStream','seqVz','TFLVn','IRTXb','spCRT','AhAkD','PkYlV','GfwMA','KOthF','1712187igdaKT','lINPj','should\x20take\x20options.numBackups\x20to\x20supercede\x20backups','UnHzT','yXMaf','eKVkb','ZSaTa','should\x20default\x20to\x201\x20backup','lDcxt','compressed-backups.log','catch','vwQCl','vgNHS','nOmqc','subdir','test\x20file','ZwmtU','WeELX','platform','rollover','xdWsu','0666','HPdln','compressed-backups.log_2.gz','crhNR','KrRCj','should\x20write\x20the\x20first\x20five\x20log\x20messages\x20to\x20the\x20second\x20file','CuqOB','1691682bUowCZ','Gqsks','kCvwf','test-rolling-stream-with-existing-files.2','gsieY','compressed-backups_1.log.gz','test-rolling-stream-with-existing-files','without\x20number\x20of\x20backups','JsfXX','instanceOf','hpwfa','fkYAs','with\x20options.fileNameSep\x20=\x20\x22_\x22\x20and\x20keepFileExt\x20=\x20true','xZpTr','test-rolling-stream-with-existing-files.5','wfGzG','size','daWhi','vPHBl','5322692BhIxcw','test-rolling-file-stream','SHpEy','LTDcG','options'];_0xb735=function(){return _0x253808;};return _0xb735();}describe(_0x372b5f(0x199),function(){const _0xafebec=_0x372b5f,_0x331e7e={'tnrpH':'test-rolling-file-stream','qUySc':function(_0x494fd4,_0x614a50){return _0x494fd4(_0x614a50);},'orprN':function(_0x1b80a9,_0x592d0a){return _0x1b80a9===_0x592d0a;},'UVmtR':function(_0x37641d,_0x413b11,_0x582be3){return _0x37641d(_0x413b11,_0x582be3);},'WeELX':function(_0x2ccbb8,_0xb6a367){return _0x2ccbb8(_0xb6a367);},'WZXeJ':_0xafebec(0x174),'rMzKi':function(_0x5a71e5,_0x2da774){return _0x5a71e5(_0x2da774);},'AwFeC':_0xafebec(0x1a9),'FRxSQ':_0xafebec(0x1d0),'MqXkw':_0xafebec(0x1ab),'hUJwq':function(_0x4ac9ac,_0x243b51){return _0x4ac9ac!==_0x243b51;},'OmJaz':_0xafebec(0x1cd),'gVtRS':_0xafebec(0x223),'EIqiq':_0xafebec(0x211),'fNxip':'test-rolling-stream-with-existing-files.2','GZROZ':_0xafebec(0xee),'dmSme':_0xafebec(0x1a4),'lDcxt':_0xafebec(0x1a7),'lGSIE':_0xafebec(0x107),'SCNuW':'test-rolling-file-stream-write-less','IRTXb':_0xafebec(0x1ec),'EAAdU':_0xafebec(0x1f5),'hBQGO':_0xafebec(0x193),'NZcnB':_0xafebec(0x1a1),'xdWsu':_0xafebec(0x137),'jFANU':function(_0x4b87c2,_0x225026){return _0x4b87c2(_0x225026);},'TSmdu':function(_0xbae8c1,_0x39ccb1,_0xf63725){return _0xbae8c1(_0x39ccb1,_0xf63725);},'mstfi':'should\x20write\x20to\x20the\x20file','cBrVK':_0xafebec(0x1db),'osiFG':_0xafebec(0x12e),'NrfMh':_0xafebec(0x143),'nSnhq':_0xafebec(0x166),'KKgdd':function(_0x1627c6,_0x4f43e8){return _0x1627c6(_0x4f43e8);},'ZIKeb':'TnEaz','CFRRO':_0xafebec(0x106),'OubKe':'should\x20write\x20the\x20last\x20two\x20log\x20messages\x20to\x20the\x20first\x20file','SaHan':_0xafebec(0x1bc),'LpoZk':_0xafebec(0x1d8),'ZwmtU':'This\x20is\x20the\x20second\x20log\x20message.','VMmiY':'compressed-backups.log.1.gz','crhNR':'compressed-backups.log.2.gz','TTVHl':_0xafebec(0x11a),'saxyQ':function(_0x492b6c,_0x2474d1){return _0x492b6c(_0x2474d1);},'XUmiF':_0xafebec(0x138),'jyzoG':function(_0x265c14,_0x558298){return _0x265c14===_0x558298;},'qfmDK':_0xafebec(0x19a),'wFTuu':function(_0x3af8fe,_0x3a7f4c){return _0x3af8fe(_0x3a7f4c);},'hqeam':'should\x20produce\x20three\x20files,\x20with\x20the\x20backups\x20compressed','OHDHE':function(_0x2b6ea7,_0x16acb8){return _0x2b6ea7(_0x16acb8);},'wwYjo':_0xafebec(0x103),'igEPu':'This\x20is\x20the\x20fourth\x20log\x20message.','wTWpL':_0xafebec(0x1ea),'fkYAs':_0xafebec(0x209),'Iegxk':function(_0x3d0373,_0x544231){return _0x3d0373(_0x544231);},'SajqJ':_0xafebec(0x1e5),'kCvwf':function(_0x1ddd8e,_0x4b1e58,_0x2eb352){return _0x1ddd8e(_0x4b1e58,_0x2eb352);},'upAdJ':function(_0x45d35e,_0x44e9bc,_0x367fb0){return _0x45d35e(_0x44e9bc,_0x367fb0);},'wajRO':_0xafebec(0x1d7),'Gqsks':function(_0x376aaa,_0x2febc8){return _0x376aaa(_0x2febc8);},'PkYlV':function(_0x5d8f1f,_0x8ee25){return _0x5d8f1f(_0x8ee25);},'rUREh':_0xafebec(0x14f),'HEUno':_0xafebec(0x130),'NoJJR':_0xafebec(0x135),'oOcxn':_0xafebec(0x1e6),'eEmzh':_0xafebec(0xf5),'jXLss':_0xafebec(0x1e9),'GfwMA':_0xafebec(0x125),'WpaAE':function(_0x5f285d,_0x4613b8){return _0x5f285d(_0x4613b8);},'gGpIm':_0xafebec(0x1da),'HZwAu':_0xafebec(0x218),'MKIXq':'should\x20produce\x20three\x20files,\x20with\x20the\x20file-extension\x20kept','ZSaTa':_0xafebec(0x17f),'wWRWa':function(_0x2e9180,_0x57be28){return _0x2e9180(_0x57be28);},'teSRN':_0xafebec(0x1b9),'xmCuF':_0xafebec(0x145),'jyBAX':function(_0x6cae1f,_0x7a2f6b){return _0x6cae1f(_0x7a2f6b);},'VOJYB':function(_0x4645b9,_0x43f5f4){return _0x4645b9(_0x43f5f4);},'mHNjt':'compressed-backups_1.log.gz','sxdaa':function(_0x47c6ce,_0x3b4d2c){return _0x47c6ce!==_0x3b4d2c;},'Mhqvl':function(_0x5ce394,_0x194ca6){return _0x5ce394===_0x194ca6;},'filwT':_0xafebec(0x1a5),'BnXLH':function(_0x2b6a73,_0x28dfc8){return _0x2b6a73(_0x28dfc8);},'dSpqb':function(_0x431768,_0x16241f){return _0x431768(_0x16241f);},'AVMmv':_0xafebec(0x12a),'jhMmg':function(_0x518535,_0x493327){return _0x518535(_0x493327);},'XzWMT':'test-rolling-stream-with-existing-files.-1','TFLVn':_0xafebec(0x1c4),'HPdln':_0xafebec(0x21b),'eIIut':_0xafebec(0x147),'lsmwE':'Oskqy','xDABB':_0xafebec(0x113),'YttRy':function(_0x15ab7c,_0x298586){return _0x15ab7c(_0x298586);},'GHFTd':_0xafebec(0x215),'pTuac':_0xafebec(0x1b0),'NBlDa':_0xafebec(0x1b5),'ExeVu':function(_0x50c40a,_0x1ecd73){return _0x50c40a(_0x1ecd73);},'hIrTY':'handles\x20directory\x20deletion\x20gracefully','FFmGx':_0xafebec(0x206),'zJTqq':function(_0x482635,_0x4b9b3f,_0xca185f){return _0x482635(_0x4b9b3f,_0xca185f);},'ABZat':function(_0x21dc89,_0x5b7ba4,_0x28f11d){return _0x21dc89(_0x5b7ba4,_0x28f11d);},'YxawR':'with\x20invalid\x20number\x20of\x20backups','CLgKw':function(_0x145127,_0x580b01,_0x8e321c){return _0x145127(_0x580b01,_0x8e321c);},'sVRCi':'writing\x20less\x20than\x20the\x20file\x20size','luqQH':function(_0x6dfb01,_0x502449,_0x184de4){return _0x6dfb01(_0x502449,_0x184de4);},'jIQUM':_0xafebec(0x109),'lWiSH':function(_0x3bd812,_0x2d6d92,_0x327f74){return _0x3bd812(_0x2d6d92,_0x327f74);},'UuUJu':'with\x20options.keepFileExt\x20=\x20true','hagxz':function(_0x4bc58d,_0x4806cc,_0x3f5871){return _0x4bc58d(_0x4806cc,_0x3f5871);},'eUaSL':_0xafebec(0x1ca),'EaLIF':_0xafebec(0x139),'xZpTr':function(_0x48404a,_0x3ec59f){return _0x48404a!==_0x3ec59f;},'MjTTu':function(_0x43a3e7,_0x437a32,_0x5d5c42){return _0x43a3e7(_0x437a32,_0x5d5c42);},'bbDPk':_0xafebec(0x120)};describe(_0xafebec(0x1d6),function(){const _0x452ddb=_0xafebec,_0xea2d97={'bCLnO':function(_0x2cbd67,_0x281f46){return _0x2cbd67(_0x281f46);},'gsieY':_0x331e7e[_0x452ddb(0x20d)]};let _0x351908;_0x331e7e['qUySc'](before,async function(){const _0x2a0492=_0x452ddb;await remove(_0x331e7e[_0x2a0492(0x20d)]),_0x351908=new RollingFileStream(path['join'](__dirname,_0x331e7e[_0x2a0492(0x20d)]),0x400,0x5);}),after(async function(){const _0x1b3f23=_0x452ddb;await _0xea2d97[_0x1b3f23(0x11c)](close,_0x351908),await remove(_0xea2d97[_0x1b3f23(0x1c2)]);}),it(_0x452ddb(0x21d),function(){const _0x3afe48=_0x452ddb;_0x351908['should']['be']['an']['instanceOf'](streams['Writable']),_0x351908[_0x3afe48(0x129)][_0x3afe48(0xf9)][_0x3afe48(0x18a)](path[_0x3afe48(0x127)](__dirname,_0x331e7e[_0x3afe48(0x20d)])),_0x351908[_0x3afe48(0x1ce)][_0x3afe48(0xf9)][_0x3afe48(0x18a)](0x400),_0x351908[_0x3afe48(0x18e)][_0x3afe48(0xf9)][_0x3afe48(0x18a)](0x5);}),it(_0x452ddb(0x148),function(){const _0x34e95a=_0x452ddb;_0x351908[_0x34e95a(0x152)][_0x34e95a(0x12c)][_0x34e95a(0xf9)][_0x34e95a(0x18a)](0x1a4),_0x351908[_0x34e95a(0x152)][_0x34e95a(0x157)][_0x34e95a(0xf9)][_0x34e95a(0x18a)]('a');});}),describe(_0x331e7e[_0xafebec(0x1fa)],function(){const _0x26f772=_0xafebec;let _0x236959;it(_0x26f772(0x1e4),function(){const _0x18ee1c=_0x26f772,_0x589cde={'tVpMh':'3|0|1|2|4'};if(_0x331e7e[_0x18ee1c(0xf1)](_0x18ee1c(0x168),_0x18ee1c(0x168)))_0x236959=new RollingFileStream(path[_0x18ee1c(0x127)](__dirname,'test-rolling-file-stream'),0x400,0x5,{'mode':_0x331e7e[_0x18ee1c(0x102)](parseInt,'0666',0x8)}),_0x236959[_0x18ee1c(0x152)][_0x18ee1c(0x12c)][_0x18ee1c(0xf9)][_0x18ee1c(0x18a)](_0x331e7e[_0x18ee1c(0x102)](parseInt,_0x18ee1c(0x1b7),0x8));else{const _0x1ec2cd=_0x589cde['tVpMh'][_0x18ee1c(0x224)]('|');let _0x21315c=0x0;while(!![]){switch(_0x1ec2cd[_0x21315c++]){case'0':_0x3dd11d[_0x18ee1c(0x18e)]['should'][_0x18ee1c(0x117)][_0x18ee1c(0x18a)](0x3);continue;case'1':_0x53657e[_0x18ee1c(0x18e)][_0x18ee1c(0xf9)][_0x18ee1c(0x18a)](0x9);continue;case'2':_0x39a2c5[_0x18ee1c(0x1d5)][_0x18ee1c(0x1df)]['should'][_0x18ee1c(0x18a)](0x9);continue;case'3':_0x35366a=new _0x89079f(_0x17766f['join'](_0x59cffd,'test-rolling-file-stream'),0x400,0x3,{'numBackups':0x9});continue;case'4':_0x15027b[_0x18ee1c(0x1d5)][_0x18ee1c(0x1f1)][_0x18ee1c(0xf9)][_0x18ee1c(0x18a)](0xa);continue;}break;}}}),after(async function(){const _0x38bb6d=_0x26f772;await close(_0x236959),await remove(_0x38bb6d(0x1d2));});}),_0x331e7e[_0xafebec(0x1f6)](describe,_0xafebec(0x1fc),function(){const _0x577d18=_0xafebec,_0x2bbaae={'yvUGI':function(_0x2b8769,_0x35ebe7){return _0x2b8769(_0x35ebe7);},'gmmVT':_0x577d18(0x1d2)};let _0x3010dc;_0x331e7e[_0x577d18(0x102)](it,_0x577d18(0xf8),function(){const _0x318557=_0x577d18;_0x3010dc=new RollingFileStream(path[_0x318557(0x127)](__dirname,'test-rolling-file-stream')),_0x3010dc[_0x318557(0x1ce)][_0x318557(0xf9)][_0x318557(0x18a)](Number[_0x318557(0x178)]);}),_0x331e7e['WeELX'](after,async function(){const _0x52a406=_0x577d18;await _0x2bbaae['yvUGI'](close,_0x3010dc),await remove(_0x2bbaae[_0x52a406(0x121)]);});}),_0x331e7e['ABZat'](describe,_0xafebec(0x1c5),function(){const _0x6d3020=_0xafebec,_0x4450df={'TXhdR':_0x6d3020(0x1ea),'aVztZ':function(_0x4599ea,_0x3aeb5d){const _0x20c0b3=_0x6d3020;return _0x331e7e[_0x20c0b3(0x1ef)](_0x4599ea,_0x3aeb5d);},'gjrfq':_0x6d3020(0x1e5)};let _0x5eb482;_0x331e7e[_0x6d3020(0x102)](it,_0x331e7e[_0x6d3020(0x124)],function(){const _0x522a03=_0x6d3020;if(_0x331e7e['WZXeJ']===_0x522a03(0x188))return _0xc7c2a[_0x522a03(0x13c)]([_0x4b9fad(_0x4450df[_0x522a03(0xfb)]),_0x4450df[_0x522a03(0x1ff)](_0x3c2a67,_0x522a03(0x209)),_0x32e5bf(_0x4450df[_0x522a03(0x1f8)])]);else _0x5eb482=new RollingFileStream(path[_0x522a03(0x127)](__dirname,_0x522a03(0x1d2)),0x400),_0x5eb482[_0x522a03(0x18e)][_0x522a03(0xf9)]['eql'](0x1);}),after(async function(){const _0x2d0fe0=_0x6d3020;await close(_0x5eb482),await _0x331e7e['rMzKi'](remove,_0x331e7e[_0x2d0fe0(0x20d)]);});}),describe(_0x331e7e[_0xafebec(0x172)],()=>{const _0x522111=_0xafebec,_0x486164={'zWrBZ':_0x331e7e['FRxSQ'],'JsfXX':_0x331e7e[_0x522111(0x20d)]};it(_0x522111(0x18d),()=>{const _0x44afaa=_0x522111,_0x58cab1=-0x1;(()=>{const _0x2f6d54=_0x4743;_0x486164[_0x2f6d54(0x1d9)]==='vPHBl'?new RollingFileStream(path[_0x2f6d54(0x127)](__dirname,_0x486164[_0x2f6d54(0x1c6)]),0x400,_0x58cab1):(_0x11a22d[_0x2f6d54(0xf9)]['be']['an'][_0x2f6d54(0x1c7)](_0x2a5c46[_0x2f6d54(0x208)]),_0xd3fe89['filename'][_0x2f6d54(0xf9)][_0x2f6d54(0x18a)](_0x7b5625['join'](_0x4bfa6a,_0x2f6d54(0x1d2))),_0x17c0ca['size'][_0x2f6d54(0xf9)]['eql'](0x400),_0x5da31e[_0x2f6d54(0x18e)]['should'][_0x2f6d54(0x18a)](0x5));})[_0x44afaa(0xf9)][_0x44afaa(0x222)](_0x44afaa(0x100)+_0x58cab1+')\x20should\x20be\x20>=\x200');}),_0x331e7e[_0x522111(0x102)](it,_0x522111(0x1f4),()=>{const _0x4926bc=_0x522111,_0x4a36e5={'hThZf':_0x4926bc(0x1d2)},_0x4e19d1=Number['MAX_SAFE_INTEGER'];(()=>{const _0xe654ba=_0x4926bc;new RollingFileStream(path[_0xe654ba(0x127)](__dirname,_0x4a36e5['hThZf']),0x400,_0x4e19d1);})[_0x4926bc(0xf9)]['throw'](_0x4926bc(0x100)+_0x4e19d1+')\x20should\x20be\x20<\x20Number.MAX_SAFE_INTEGER');});}),_0x331e7e[_0xafebec(0x162)](describe,'using\x20backups',()=>{const _0x1b96ac=_0xafebec,_0x3ad6d8={'QpgHf':_0x1b96ac(0x1e6),'SsdHW':function(_0x5319bb,_0x8b4467){return _0x5319bb+_0x8b4467;},'btHYI':function(_0x1a58e2,_0x2fa64e){return _0x1a58e2(_0x2fa64e);},'MJAoM':_0x331e7e['gVtRS'],'AhAkD':_0x331e7e['EIqiq'],'CPSzh':_0x331e7e[_0x1b96ac(0x155)],'OycVs':_0x331e7e['GZROZ'],'ZCJoJ':_0x331e7e[_0x1b96ac(0x20d)],'XAetT':_0x331e7e[_0x1b96ac(0x184)]};_0x331e7e[_0x1b96ac(0x1aa)]===_0x331e7e['lDcxt']?(describe(_0x331e7e[_0x1b96ac(0x202)],()=>{const _0x4b7979=_0x1b96ac,_0x379339={'lVbKj':_0x331e7e[_0x4b7979(0x116)],'cATwV':function(_0x2ade7c,_0x121930){return _0x331e7e['rMzKi'](_0x2ade7c,_0x121930);},'mtaZu':function(_0x4adee0,_0x3517cb){const _0x3c7686=_0x4b7979;return _0x331e7e[_0x3c7686(0x150)](_0x4adee0,_0x3517cb);},'vwQCl':_0x4b7979(0x16e),'lINPj':_0x331e7e[_0x4b7979(0x20d)]};if(_0x4b7979(0x13f)===_0x331e7e[_0x4b7979(0x105)])return _0x10ed37[_0x4b7979(0x13c)]([_0x338777('fileNameSep-backups.log'),_0x4789d3(_0x3ad6d8[_0x4b7979(0x151)]),_0xda3013('fileNameSep-backups.log_2')]);else{let _0x5ceaa1;it(_0x4b7979(0x186),function(){const _0x47e959=_0x4b7979,_0x55526f={'LNtxP':_0x379339[_0x47e959(0x179)],'VluRz':function(_0x5145e4,_0x21c139){return _0x5145e4(_0x21c139);},'wClBj':_0x47e959(0x1c3),'fIzye':function(_0x32b330,_0x46c48b){const _0x3b06aa=_0x47e959;return _0x379339[_0x3b06aa(0x131)](_0x32b330,_0x46c48b);},'RzSla':_0x47e959(0x194)};if(_0x379339['mtaZu']('iXfuI',_0x379339[_0x47e959(0x1ad)]))return _0x391155[_0x47e959(0x13c)]([_0x10a837(_0x55526f['LNtxP']),_0x55526f[_0x47e959(0x18b)](_0x2956d9,_0x55526f[_0x47e959(0x161)]),_0x55526f['fIzye'](_0x104100,_0x55526f[_0x47e959(0x216)])]);else _0x5ceaa1=new RollingFileStream(path[_0x47e959(0x127)](__dirname,_0x379339[_0x47e959(0x1a3)]),0x400,0x3),_0x5ceaa1['options'][_0x47e959(0x1df)][_0x47e959(0xf9)][_0x47e959(0x18a)](_0x5ceaa1[_0x47e959(0x18e)]);}),it(_0x4b7979(0x196),function(){const _0x4c5c25=_0x4b7979;_0x5ceaa1[_0x4c5c25(0x1d5)][_0x4c5c25(0x1f1)][_0x4c5c25(0xf9)][_0x4c5c25(0x18a)](_0x3ad6d8['SsdHW'](_0x5ceaa1['options']['numBackups'],0x1));}),after(async function(){const _0x437e17=_0x4b7979;await close(_0x5ceaa1),await _0x3ad6d8[_0x437e17(0x115)](remove,_0x437e17(0x1d2));});}}),describe(_0x1b96ac(0x1ed),function(){const _0x2ccbd2=_0x1b96ac,_0x5a5b73={'SyAIv':_0x2ccbd2(0x12a),'pwADn':_0x3ad6d8['MJAoM'],'QUIDC':_0x3ad6d8[_0x2ccbd2(0x19e)],'uIldg':_0x3ad6d8[_0x2ccbd2(0xf3)],'YCjYT':_0x2ccbd2(0x15f),'AmyVK':'test-rolling-stream-with-existing-files.11','mdCNl':_0x3ad6d8[_0x2ccbd2(0x101)],'kshBI':'YTubP','vwZfu':_0x3ad6d8[_0x2ccbd2(0x11e)]};let _0x2d77e4;it(_0x3ad6d8[_0x2ccbd2(0x163)],function(){const _0x238a13=_0x2ccbd2;_0x2d77e4=new RollingFileStream(path[_0x238a13(0x127)](__dirname,'test-rolling-file-stream'),0x400,0x3,{'numBackups':0x9}),_0x2d77e4[_0x238a13(0x18e)]['should'][_0x238a13(0x117)][_0x238a13(0x18a)](0x3),_0x2d77e4[_0x238a13(0x18e)][_0x238a13(0xf9)][_0x238a13(0x18a)](0x9),_0x2d77e4['options'][_0x238a13(0x1df)]['should'][_0x238a13(0x18a)](0x9),_0x2d77e4[_0x238a13(0x1d5)][_0x238a13(0x1f1)][_0x238a13(0xf9)][_0x238a13(0x18a)](0xa);}),after(async function(){const _0x150c0a=_0x2ccbd2;if(_0x5a5b73[_0x150c0a(0x153)]!==_0x5a5b73['kshBI'])await close(_0x2d77e4),await remove(_0x5a5b73['vwZfu']);else return _0x98459c[_0x150c0a(0x13c)]([_0x150c0a(0x10e),_0x150c0a(0x1c4),_0x5a5b73[_0x150c0a(0x160)],_0x5a5b73['pwADn'],_0x5a5b73[_0x150c0a(0x10c)],_0x5a5b73['uIldg'],_0x150c0a(0x21b),_0x150c0a(0x147),_0x150c0a(0x1cc),_0x5a5b73[_0x150c0a(0x16d)],_0x5a5b73[_0x150c0a(0x197)],_0x150c0a(0x113)][_0x150c0a(0x175)](_0x2ef070));});})):(_0x30d7b2['theStream'][_0x1b96ac(0x12c)]['should'][_0x1b96ac(0x18a)](0x1a4),_0x20beb0['theStream'][_0x1b96ac(0x157)][_0x1b96ac(0xf9)][_0x1b96ac(0x18a)]('a'));}),_0x331e7e['CLgKw'](describe,_0x331e7e[_0xafebec(0x217)],function(){const _0x1c481d=_0xafebec,_0x3b5ffd={'pbelt':function(_0x4d7d44,_0x5330f0,_0x26359a){return _0x4d7d44(_0x5330f0,_0x26359a);},'OruUD':_0x331e7e['hBQGO'],'HShfY':_0x331e7e[_0x1c481d(0x16a)]};if('KbhXf'===_0x331e7e[_0x1c481d(0x1b6)])_0x331e7e['jFANU'](before,async function(){const _0x15e6e6=_0x1c481d;await remove(_0x15e6e6(0x210));const _0x2c5ed3=new RollingFileStream(path[_0x15e6e6(0x127)](__dirname,_0x15e6e6(0x210)),0x64);await _0x3b5ffd[_0x15e6e6(0x114)](writeInSequence,_0x2c5ed3,[_0x3b5ffd['OruUD']]);}),_0x331e7e[_0x1c481d(0x1b3)](after,async function(){await remove(_0x331e7e['SCNuW']);}),_0x331e7e[_0x1c481d(0x181)](it,_0x331e7e[_0x1c481d(0x15c)],async function(){const _0x55810e=_0x1c481d,_0x3bb6c7=await fs[_0x55810e(0x192)](path[_0x55810e(0x127)](__dirname,_0x331e7e['SCNuW']),_0x331e7e[_0x55810e(0x19c)]);_0x3bb6c7[_0x55810e(0xf9)]['eql'](_0x331e7e[_0x55810e(0x1fb)]);}),it(_0x1c481d(0x10b),async function(){const _0x59fbcd=_0x1c481d;if(_0x3b5ffd['HShfY']!==_0x3b5ffd[_0x59fbcd(0x20a)]){const _0x5b8a1a=_0x392f9b[_0x59fbcd(0x178)];(()=>{new _0x16c115(_0x37e6bd['join'](_0x173a42,'test-rolling-file-stream'),0x400,_0x5b8a1a);})[_0x59fbcd(0xf9)][_0x59fbcd(0x222)](_0x59fbcd(0x100)+_0x5b8a1a+_0x59fbcd(0x16b));}else{const _0x19cd56=await fs[_0x59fbcd(0x141)](__dirname);_0x19cd56[_0x59fbcd(0x11b)](_0x439c53=>_0x439c53[_0x59fbcd(0x226)](_0x59fbcd(0x210))>-0x1)[_0x59fbcd(0xf9)][_0x59fbcd(0x134)]['length'](0x1);}});else throw _0x1d269c;}),_0x331e7e['luqQH'](describe,_0x331e7e['jIQUM'],function(){const _0x377969=_0xafebec,_0x3bf7bb={'XwnRh':function(_0x445bcd,_0x2a1614){return _0x445bcd(_0x2a1614);},'YuVPp':_0x331e7e['nSnhq'],'RaDBH':_0x331e7e['osiFG'],'KfoxH':function(_0x5de450,_0x10f437,_0x4232b2){return _0x5de450(_0x10f437,_0x4232b2);},'UnrVP':function(_0x40a7ad,_0x29bc0a){const _0x5d0518=_0x4743;return _0x331e7e[_0x5d0518(0x111)](_0x40a7ad,_0x29bc0a);}};_0x331e7e['orprN'](_0x331e7e['ZIKeb'],_0x377969(0x203))?(before(async function(){const _0x13e67a=_0x377969;await _0x3bf7bb[_0x13e67a(0x108)](remove,_0x13e67a(0x12e)),await _0x3bf7bb['XwnRh'](remove,_0x3bf7bb[_0x13e67a(0x128)]);const _0x5dde19=new RollingFileStream(path['join'](__dirname,_0x3bf7bb[_0x13e67a(0x189)]),0x2d);await _0x3bf7bb[_0x13e67a(0x1f7)](writeInSequence,_0x5dde19,[0x0,0x1,0x2,0x3,0x4,0x5,0x6]['map'](_0x43a0c8=>_0x43a0c8+_0x13e67a(0x227)));}),_0x331e7e[_0x377969(0x204)](after,async function(){const _0x44d93f=_0x377969;await _0x3bf7bb[_0x44d93f(0x212)](remove,_0x3bf7bb['RaDBH']),await remove(_0x3bf7bb[_0x44d93f(0x128)]);}),it(_0x331e7e[_0x377969(0x169)],async function(){const _0x17cc1b=_0x377969;if(_0x17cc1b(0x1db)===_0x331e7e[_0x17cc1b(0x146)]){const _0x526690=await fs['readdir'](__dirname);_0x526690['filter'](_0x31c3a1=>_0x31c3a1[_0x17cc1b(0x226)](_0x17cc1b(0x12e))>-0x1)[_0x17cc1b(0xf9)][_0x17cc1b(0x134)][_0x17cc1b(0x154)](0x2);}else _0x530f21['options'][_0x17cc1b(0x1f1)][_0x17cc1b(0xf9)]['eql'](_0xf71dc9[_0x17cc1b(0x1d5)]['numBackups']+0x1);}),_0x331e7e[_0x377969(0x181)](it,_0x331e7e[_0x377969(0x16c)],async function(){const _0x8ed68b=_0x377969,_0x5cd311=await fs[_0x8ed68b(0x192)](path[_0x8ed68b(0x127)](__dirname,_0x331e7e[_0x8ed68b(0x191)]),_0x8ed68b(0x1ec));_0x5cd311[_0x8ed68b(0xf9)]['eql'](_0x331e7e[_0x8ed68b(0x159)]);}),it(_0x331e7e['SaHan'],async function(){const _0x4f919e=_0x377969,_0x2440bf=await fs[_0x4f919e(0x192)](path[_0x4f919e(0x127)](__dirname,'test-rolling-file-stream-write-more.1'),_0x331e7e[_0x4f919e(0x19c)]);_0x2440bf[_0x4f919e(0xf9)][_0x4f919e(0x18a)](_0x4f919e(0x21c));})):_0x20b403?_0xbf4465(_0x4f3b68):_0x4233c3();}),describe('with\x20options.compress\x20=\x20true',function(){const _0x431e63=_0xafebec;_0x331e7e[_0x431e63(0x18c)](before,async function(){const _0x113c4d=_0x431e63,_0x1c4843={'spZys':_0x331e7e[_0x113c4d(0x20d)]};if(_0x331e7e[_0x113c4d(0xf1)](_0x113c4d(0x1f2),_0x113c4d(0x1f2))){const _0xe1ecf5=new RollingFileStream(path[_0x113c4d(0x127)](__dirname,_0x331e7e[_0x113c4d(0x116)]),0x1e,0x2,{'compress':!![]}),_0x532313=[_0x331e7e[_0x113c4d(0x185)],_0x331e7e[_0x113c4d(0x1b2)],_0x113c4d(0x103),_0x113c4d(0x225)];await _0x331e7e[_0x113c4d(0x181)](writeInSequence,_0xe1ecf5,_0x532313);}else new _0x48e516(_0x4331bf[_0x113c4d(0x127)](_0x3321f1,_0x1c4843[_0x113c4d(0x171)]),0x400,_0x4aa572);}),it(_0x331e7e[_0x431e63(0x13a)],async function(){const _0x180fe8=_0x431e63,_0x52bc28=await fs[_0x180fe8(0x141)](__dirname),_0xf2e929=_0x52bc28[_0x180fe8(0x11b)](_0x2b2755=>_0x2b2755[_0x180fe8(0x226)]('compressed-backups.log')>-0x1)[_0x180fe8(0x122)]();_0xf2e929[_0x180fe8(0x154)][_0x180fe8(0xf9)]['eql'](0x3),_0xf2e929['should']['eql']([_0x180fe8(0x1ab),_0x331e7e[_0x180fe8(0x190)],_0x331e7e[_0x180fe8(0x1ba)]]);let _0x204b14=await fs['readFile'](path['join'](__dirname,_0xf2e929[0x0]),'utf8');_0x204b14['should'][_0x180fe8(0x18a)](_0x331e7e[_0x180fe8(0xfc)]);let _0x4c683e=await fs['readFile'](path[_0x180fe8(0x127)](__dirname,_0xf2e929[0x1]));_0x204b14=await _0x331e7e[_0x180fe8(0x201)](gunzip,_0x4c683e),_0x204b14[_0x180fe8(0x20f)](_0x331e7e[_0x180fe8(0x19c)])['should'][_0x180fe8(0x18a)](_0x331e7e['XUmiF']),_0x4c683e=await fs['readFile'](path[_0x180fe8(0x127)](__dirname,_0xf2e929[0x2])),_0x204b14=await gunzip(_0x4c683e),_0x204b14['toString'](_0x331e7e[_0x180fe8(0x19c)])[_0x180fe8(0xf9)][_0x180fe8(0x18a)]('This\x20is\x20the\x20second\x20log\x20message.\x0a');}),_0x331e7e[_0x431e63(0x14b)](after,function(){const _0x460ed8=_0x431e63;if(_0x331e7e['jyzoG'](_0x331e7e[_0x460ed8(0x1e0)],_0x331e7e[_0x460ed8(0x1e0)]))return Promise[_0x460ed8(0x13c)]([remove(_0x460ed8(0x1ab)),remove('compressed-backups.log.1.gz'),_0x331e7e['saxyQ'](remove,_0x331e7e[_0x460ed8(0x1ba)])]);else _0x176302(_0x57037d);});}),_0x331e7e['lWiSH'](describe,_0x331e7e['UuUJu'],function(){const _0x4abdc9=_0xafebec,_0x413e72={'oxrpE':_0x331e7e['SajqJ'],'gbUsi':'extKept-backups.log','jwewx':_0x331e7e[_0x4abdc9(0x10d)],'VaNLv':'This\x20is\x20the\x20second\x20log\x20message.\x0a','daWhi':'utf8'};before(async function(){const _0x4800c3=_0x4abdc9,_0x270df7=new RollingFileStream(path[_0x4800c3(0x127)](__dirname,_0x4800c3(0x1ea)),0x1e,0x2,{'keepFileExt':!![]}),_0x36ed5c=[_0x4800c3(0x1d8),_0x331e7e['ZwmtU'],_0x331e7e['wwYjo'],_0x331e7e['igEPu']];await _0x331e7e[_0x4800c3(0x102)](writeInSequence,_0x270df7,_0x36ed5c);}),_0x331e7e[_0x4abdc9(0x1c0)](it,_0x4abdc9(0x18f),async function(){const _0x226cd8=_0x4abdc9,_0x486750=await fs['readdir'](__dirname),_0x2dd231=_0x486750[_0x226cd8(0x11b)](_0x4045e1=>_0x4045e1['indexOf']('extKept-backups')>-0x1)[_0x226cd8(0x122)]();_0x2dd231['length'][_0x226cd8(0xf9)][_0x226cd8(0x18a)](0x3),_0x2dd231[_0x226cd8(0xf9)][_0x226cd8(0x18a)](['extKept-backups.1.log',_0x413e72[_0x226cd8(0x17d)],_0x413e72[_0x226cd8(0x214)]]);let _0x3e3134=await fs[_0x226cd8(0x192)](path[_0x226cd8(0x127)](__dirname,_0x2dd231[0x0]),_0x226cd8(0x1ec));_0x3e3134[_0x226cd8(0xf9)]['eql'](_0x413e72[_0x226cd8(0x195)]),_0x3e3134=await fs['readFile'](path[_0x226cd8(0x127)](__dirname,_0x2dd231[0x1]),_0x226cd8(0x1ec)),_0x3e3134[_0x226cd8(0x20f)](_0x226cd8(0x1ec))['should'][_0x226cd8(0x18a)](_0x413e72[_0x226cd8(0x167)]),_0x3e3134=await fs[_0x226cd8(0x192)](path['join'](__dirname,_0x2dd231[0x2]),_0x226cd8(0x1ec)),_0x3e3134[_0x226cd8(0x20f)](_0x413e72[_0x226cd8(0x1cf)])[_0x226cd8(0xf9)][_0x226cd8(0x18a)](_0x226cd8(0x11a));}),after(function(){const _0x281f59=_0x4abdc9;return Promise[_0x281f59(0x13c)]([remove(_0x331e7e['wTWpL']),remove(_0x331e7e[_0x281f59(0x1c9)]),_0x331e7e[_0x281f59(0x12b)](remove,'extKept-backups.2.log')]);});}),_0x331e7e[_0xafebec(0x181)](describe,_0xafebec(0x110),function(){const _0x46bbf6=_0xafebec,_0x12970c={'okLaU':_0x331e7e['wajRO'],'FOfxB':_0x331e7e[_0x46bbf6(0x116)],'DExsy':_0x331e7e[_0x46bbf6(0x19c)],'spCRT':_0x46bbf6(0xf5),'BTnDG':function(_0x68b458,_0x1653e2){const _0x162d1a=_0x46bbf6;return _0x331e7e[_0x162d1a(0x1bf)](_0x68b458,_0x1653e2);}};_0x331e7e[_0x46bbf6(0x19f)](before,async function(){const _0x4e4b98=_0x46bbf6,_0x574aa2=new RollingFileStream(path[_0x4e4b98(0x127)](__dirname,'compressed-backups.log'),0x1e,0x2,{'compress':!![],'keepFileExt':!![]}),_0x5489be=['This\x20is\x20the\x20first\x20log\x20message.',_0x331e7e[_0x4e4b98(0x1b2)],_0x331e7e[_0x4e4b98(0x15e)],_0x4e4b98(0x225)];await _0x331e7e['upAdJ'](writeInSequence,_0x574aa2,_0x5489be);}),it(_0x46bbf6(0x213),async function(){const _0x48c509=_0x46bbf6,_0x1184cf=await fs['readdir'](__dirname),_0x5960ff=_0x1184cf['filter'](_0x38d5a5=>_0x38d5a5['indexOf']('compressed-backups')>-0x1)[_0x48c509(0x122)]();_0x5960ff[_0x48c509(0x154)][_0x48c509(0xf9)]['eql'](0x3),_0x5960ff[_0x48c509(0xf9)][_0x48c509(0x18a)]([_0x12970c['okLaU'],_0x48c509(0x17b),_0x12970c['FOfxB']]);let _0x1afb0d=await fs[_0x48c509(0x192)](path[_0x48c509(0x127)](__dirname,_0x5960ff[0x2]),_0x12970c[_0x48c509(0x176)]);_0x1afb0d[_0x48c509(0xf9)][_0x48c509(0x18a)](_0x48c509(0x11a));let _0x535497=await fs['readFile'](path[_0x48c509(0x127)](__dirname,_0x5960ff[0x1]));_0x1afb0d=await gunzip(_0x535497),_0x1afb0d[_0x48c509(0x20f)]('utf8')['should'][_0x48c509(0x18a)](_0x12970c[_0x48c509(0x19d)]),_0x535497=await fs[_0x48c509(0x192)](path[_0x48c509(0x127)](__dirname,_0x5960ff[0x0])),_0x1afb0d=await _0x12970c[_0x48c509(0x1f3)](gunzip,_0x535497),_0x1afb0d[_0x48c509(0x20f)](_0x12970c[_0x48c509(0x176)])['should'][_0x48c509(0x18a)](_0x48c509(0x138));}),_0x331e7e[_0x46bbf6(0x18c)](after,function(){const _0x391b9e=_0x46bbf6;return Promise['all']([remove(_0x391b9e(0x1ab)),remove(_0x391b9e(0x1d7)),remove('compressed-backups.2.log.gz')]);});}),_0x331e7e[_0xafebec(0x126)](describe,_0xafebec(0x220),function(){const _0x1e8930=_0xafebec,_0x5362a3={'iIgex':_0x331e7e[_0x1e8930(0x142)],'lcrFg':_0x331e7e[_0x1e8930(0x180)],'hpwfa':_0x1e8930(0x14f),'IHgqU':_0x1e8930(0x11a),'CQmGH':_0x1e8930(0x1ec),'HqShu':_0x331e7e[_0x1e8930(0x20e)]};before(async function(){const _0x13f2e3=_0x1e8930,_0x4deb65=new RollingFileStream(path[_0x13f2e3(0x127)](__dirname,'fileNameSep-backups.log'),0x1e,0x2,{'fileNameSep':'_'}),_0x25b1d2=['This\x20is\x20the\x20first\x20log\x20message.',_0x13f2e3(0xef),'This\x20is\x20the\x20third\x20log\x20message.',_0x331e7e[_0x13f2e3(0x11f)]];await _0x331e7e[_0x13f2e3(0x102)](writeInSequence,_0x4deb65,_0x25b1d2);}),_0x331e7e[_0x1e8930(0x102)](it,_0x1e8930(0x1eb),async function(){const _0x3fb04b=_0x1e8930;if(_0x3fb04b(0x135)!==_0x5362a3[_0x3fb04b(0x187)]){const _0x57eb9f=-0x1;(()=>{const _0x25f343=_0x3fb04b;new _0x14163f(_0x289963[_0x25f343(0x127)](_0x197ec9,_0x25f343(0x1d2)),0x400,_0x57eb9f);})[_0x3fb04b(0xf9)][_0x3fb04b(0x222)]('options.numBackups\x20('+_0x57eb9f+')\x20should\x20be\x20>=\x200');}else{const _0x52b9c0=await fs[_0x3fb04b(0x141)](__dirname),_0x5ca62b=_0x52b9c0[_0x3fb04b(0x11b)](_0x6ad2e8=>_0x6ad2e8[_0x3fb04b(0x226)]('fileNameSep-backups')>-0x1)[_0x3fb04b(0x122)]();_0x5ca62b['length'][_0x3fb04b(0xf9)][_0x3fb04b(0x18a)](0x3),_0x5ca62b[_0x3fb04b(0xf9)][_0x3fb04b(0x18a)]([_0x5362a3['lcrFg'],'fileNameSep-backups.log_2',_0x5362a3[_0x3fb04b(0x1c8)]][_0x3fb04b(0x122)]());let _0x40e233=await fs[_0x3fb04b(0x192)](path[_0x3fb04b(0x127)](__dirname,_0x5ca62b[0x0]),'utf8');_0x40e233['should'][_0x3fb04b(0x18a)](_0x5362a3[_0x3fb04b(0x12d)]),_0x40e233=await fs[_0x3fb04b(0x192)](path['join'](__dirname,_0x5ca62b[0x1]),'utf8'),_0x40e233[_0x3fb04b(0x20f)](_0x3fb04b(0x1ec))['should'][_0x3fb04b(0x18a)]('This\x20is\x20the\x20third\x20log\x20message.\x0a'),_0x40e233=await fs[_0x3fb04b(0x192)](path[_0x3fb04b(0x127)](__dirname,_0x5ca62b[0x2]),_0x5362a3[_0x3fb04b(0x228)]),_0x40e233['toString']('utf8')[_0x3fb04b(0xf9)]['eql'](_0x5362a3[_0x3fb04b(0xf4)]);}}),after(function(){const _0x35e450=_0x1e8930;return Promise[_0x35e450(0x13c)]([_0x331e7e[_0x35e450(0x14b)](remove,_0x331e7e[_0x35e450(0x1dc)]),remove(_0x35e450(0x1e6)),_0x331e7e[_0x35e450(0x204)](remove,_0x331e7e[_0x35e450(0x1e3)])]);});}),_0x331e7e[_0xafebec(0x173)](describe,_0x331e7e[_0xafebec(0x17a)],function(){const _0x298ba6=_0xafebec;before(async function(){const _0xfa658a=_0x4743;if(_0xfa658a(0x1e9)===_0x331e7e[_0xfa658a(0x17c)]){const _0x4a9560=new RollingFileStream(path[_0xfa658a(0x127)](__dirname,_0xfa658a(0x1da)),0x1e,0x2,{'fileNameSep':'_','keepFileExt':!![]}),_0x462a7f=[_0xfa658a(0x1d8),'This\x20is\x20the\x20second\x20log\x20message.',_0xfa658a(0x103),_0x331e7e[_0xfa658a(0x11f)]];await writeInSequence(_0x4a9560,_0x462a7f);}else _0x3c0c53=new _0x3debf0(_0xf9237a[_0xfa658a(0x127)](_0x28bdb1,_0xfa658a(0x1d2)),0x400,0x3),_0xb097bc[_0xfa658a(0x1d5)][_0xfa658a(0x1df)][_0xfa658a(0xf9)][_0xfa658a(0x18a)](_0x139a36['backups']);}),it(_0x331e7e[_0x298ba6(0x1e2)],async function(){const _0x46b24b=_0x298ba6,_0x314cc6=await fs['readdir'](__dirname),_0x37c725=_0x314cc6[_0x46b24b(0x11b)](_0x45f293=>_0x45f293[_0x46b24b(0x226)]('fileNameSep-extKept-backups')>-0x1)[_0x46b24b(0x122)]();_0x37c725[_0x46b24b(0x154)][_0x46b24b(0xf9)][_0x46b24b(0x18a)](0x3),_0x37c725[_0x46b24b(0xf9)]['eql']([_0x46b24b(0x218),_0x331e7e[_0x46b24b(0x1a0)],_0x46b24b(0x1da)][_0x46b24b(0x122)]());let _0x4336bb=await fs[_0x46b24b(0x192)](path['join'](__dirname,_0x37c725[0x0]),_0x46b24b(0x1ec));_0x4336bb[_0x46b24b(0xf9)][_0x46b24b(0x18a)]('This\x20is\x20the\x20fourth\x20log\x20message.\x0a'),_0x4336bb=await fs[_0x46b24b(0x192)](path[_0x46b24b(0x127)](__dirname,_0x37c725[0x1]),_0x331e7e[_0x46b24b(0x19c)]),_0x4336bb['toString'](_0x46b24b(0x1ec))[_0x46b24b(0xf9)][_0x46b24b(0x18a)]('This\x20is\x20the\x20third\x20log\x20message.\x0a'),_0x4336bb=await fs[_0x46b24b(0x192)](path['join'](__dirname,_0x37c725[0x2]),_0x331e7e[_0x46b24b(0x19c)]),_0x4336bb[_0x46b24b(0x20f)](_0x46b24b(0x1ec))[_0x46b24b(0xf9)][_0x46b24b(0x18a)]('This\x20is\x20the\x20second\x20log\x20message.\x0a');}),after(function(){const _0x4d148e=_0x298ba6;return Promise[_0x4d148e(0x13c)]([_0x331e7e[_0x4d148e(0x112)](remove,_0x331e7e[_0x4d148e(0x177)]),remove(_0x331e7e[_0x4d148e(0x10a)]),remove(_0x331e7e[_0x4d148e(0x1a0)])]);});}),_0x331e7e[_0xafebec(0x1f6)](describe,_0xafebec(0x170),function(){const _0x1b2fc8=_0xafebec,_0xa9124a={'RzlzL':'fileNameSep-extKept-backups.log','wdogN':_0x331e7e[_0x1b2fc8(0x1a0)],'rUiuW':_0x1b2fc8(0x17f),'mmsMv':_0x1b2fc8(0x1b9),'FMJDZ':_0x1b2fc8(0x1ab),'GKSjH':_0x331e7e[_0x1b2fc8(0x19c)],'zlQHO':function(_0x403bcc,_0x568e96){return _0x403bcc(_0x568e96);},'QZEQH':_0x1b2fc8(0xf5)};if(_0x331e7e[_0x1b2fc8(0x183)](_0x1b2fc8(0x198),_0x331e7e[_0x1b2fc8(0x144)]))return _0x2b09f2[_0x1b2fc8(0x13c)]([_0x1c8f98(_0xa9124a['RzlzL']),_0x22407c(_0x1b2fc8(0x218)),_0x129906(_0xa9124a['wdogN'])]);else before(async function(){const _0x30896b=_0x1b2fc8,_0x1c4cdf=new RollingFileStream(path[_0x30896b(0x127)](__dirname,_0x331e7e[_0x30896b(0x116)]),0x1e,0x2,{'fileNameSep':'_','compress':!![]}),_0x5b7a25=['This\x20is\x20the\x20first\x20log\x20message.','This\x20is\x20the\x20second\x20log\x20message.',_0x331e7e['wwYjo'],_0x30896b(0x225)];await writeInSequence(_0x1c4cdf,_0x5b7a25);}),it(_0x1b2fc8(0x213),async function(){const _0x4d5f20=_0x1b2fc8,_0x5e8ddf=await fs['readdir'](__dirname),_0x5538b8=_0x5e8ddf[_0x4d5f20(0x11b)](_0x20562c=>_0x20562c[_0x4d5f20(0x226)]('compressed-backups')>-0x1)[_0x4d5f20(0x122)]();_0x5538b8[_0x4d5f20(0x154)][_0x4d5f20(0xf9)][_0x4d5f20(0x18a)](0x3),_0x5538b8[_0x4d5f20(0xf9)]['eql']([_0xa9124a[_0x4d5f20(0x207)],_0xa9124a[_0x4d5f20(0x20b)],_0xa9124a[_0x4d5f20(0x21f)]]['sort']());let _0x50a6ed=await fs[_0x4d5f20(0x192)](path['join'](__dirname,_0x5538b8[0x0]),_0xa9124a['GKSjH']);_0x50a6ed[_0x4d5f20(0xf9)]['eql']('This\x20is\x20the\x20fourth\x20log\x20message.\x0a');let _0x3d57b2=await fs[_0x4d5f20(0x192)](path[_0x4d5f20(0x127)](__dirname,_0x5538b8[0x1]));_0x50a6ed=await gunzip(_0x3d57b2),_0x50a6ed[_0x4d5f20(0x20f)](_0xa9124a[_0x4d5f20(0x1ee)])['should']['eql']('This\x20is\x20the\x20third\x20log\x20message.\x0a'),_0x3d57b2=await fs[_0x4d5f20(0x192)](path[_0x4d5f20(0x127)](__dirname,_0x5538b8[0x2])),_0x50a6ed=await _0xa9124a[_0x4d5f20(0x14d)](gunzip,_0x3d57b2),_0x50a6ed[_0x4d5f20(0x20f)](_0xa9124a[_0x4d5f20(0x1ee)])[_0x4d5f20(0xf9)][_0x4d5f20(0x18a)](_0xa9124a['QZEQH']);}),_0x331e7e[_0x1b2fc8(0x1f9)](after,function(){const _0x2a91c7=_0x1b2fc8;return Promise[_0x2a91c7(0x13c)]([remove(_0x331e7e[_0x2a91c7(0x116)]),remove(_0x331e7e[_0x2a91c7(0x1a8)]),_0x331e7e[_0x2a91c7(0x10f)](remove,_0x331e7e[_0x2a91c7(0x14e)])]);});}),describe(_0x331e7e['EaLIF'],function(){const _0x2a91bf=_0xafebec,_0x5f3fe7={'TXWkH':_0x331e7e['mHNjt'],'Xwkyx':_0x2a91bf(0x194),'SHpEy':'compressed-backups.log','nUusb':function(_0x47fd96,_0x10060e){const _0x174d3d=_0x2a91bf;return _0x331e7e[_0x174d3d(0x111)](_0x47fd96,_0x10060e);},'yXMaf':_0x331e7e[_0x2a91bf(0x10d)],'CuqOB':_0x331e7e[_0x2a91bf(0x20d)],'zjsuH':function(_0x366ca3,_0x443134){const _0x47e82e=_0x2a91bf;return _0x331e7e[_0x47e82e(0xfd)](_0x366ca3,_0x443134);},'vgNHS':_0x2a91bf(0x118),'nOmqc':function(_0x52970d,_0x463b10){return _0x52970d(_0x463b10);}};if(_0x331e7e[_0x2a91bf(0x132)](_0x331e7e[_0x2a91bf(0x140)],_0x331e7e['filwT']))before(async function(){const _0x599535=_0x2a91bf,_0x2a185c=new RollingFileStream(path['join'](__dirname,_0x599535(0x1ab)),0x1e,0x2,{'fileNameSep':'_','compress':!![],'keepFileExt':!![]}),_0x409e9f=[_0x331e7e[_0x599535(0x185)],_0x599535(0xef),_0x331e7e[_0x599535(0x15e)],_0x331e7e[_0x599535(0x11f)]];await writeInSequence(_0x2a185c,_0x409e9f);}),it(_0x2a91bf(0x213),async function(){const _0x3d523b=_0x2a91bf,_0x3a6a2f=await fs[_0x3d523b(0x141)](__dirname),_0x3a6144=_0x3a6a2f[_0x3d523b(0x11b)](_0x76f9ff=>_0x76f9ff['indexOf'](_0x3d523b(0x21e))>-0x1)[_0x3d523b(0x122)]();_0x3a6144['length'][_0x3d523b(0xf9)][_0x3d523b(0x18a)](0x3),_0x3a6144[_0x3d523b(0xf9)][_0x3d523b(0x18a)]([_0x5f3fe7[_0x3d523b(0x104)],_0x5f3fe7['Xwkyx'],_0x5f3fe7['SHpEy']][_0x3d523b(0x122)]());let _0x43b371=await fs[_0x3d523b(0x192)](path[_0x3d523b(0x127)](__dirname,_0x3a6144[0x0]),_0x3d523b(0x1ec));_0x43b371[_0x3d523b(0xf9)]['eql'](_0x3d523b(0x11a));let _0x421d2f=await fs[_0x3d523b(0x192)](path[_0x3d523b(0x127)](__dirname,_0x3a6144[0x1]));_0x43b371=await _0x5f3fe7['nUusb'](gunzip,_0x421d2f),_0x43b371[_0x3d523b(0x20f)](_0x3d523b(0x1ec))[_0x3d523b(0xf9)][_0x3d523b(0x18a)](_0x5f3fe7[_0x3d523b(0x1a6)]),_0x421d2f=await fs[_0x3d523b(0x192)](path['join'](__dirname,_0x3a6144[0x2])),_0x43b371=await gunzip(_0x421d2f),_0x43b371[_0x3d523b(0x20f)]('utf8')[_0x3d523b(0xf9)][_0x3d523b(0x18a)](_0x3d523b(0xf5));}),after(function(){const _0x56485b=_0x2a91bf;if(_0x5f3fe7['zjsuH'](_0x56485b(0x118),_0x5f3fe7[_0x56485b(0x1ae)]))new _0x37f4cc(_0x3d5d0e[_0x56485b(0x127)](_0x363461,_0x5f3fe7[_0x56485b(0x1bd)]),0x400,_0x216c30);else return Promise['all']([_0x5f3fe7[_0x56485b(0x1af)](remove,_0x5f3fe7[_0x56485b(0x1d3)]),remove(_0x56485b(0x1c3)),remove(_0x56485b(0x194))]);});else return _0x68afdd['all']([_0x1437f3(_0x2a91bf(0x1ab)),_0x331e7e['VOJYB'](_0x463b90,_0x2a91bf(0x1d7)),_0x525fd7(_0x2a91bf(0x17b))]);}),_0x331e7e[_0xafebec(0x1f6)](describe,'when\x20many\x20files\x20already\x20exist',function(){const _0x261869=_0xafebec,_0x183a6e={'vXbSB':_0x331e7e['lsmwE'],'qAkNg':_0x261869(0x10e),'jPSfg':_0x331e7e[_0x261869(0x19b)],'emaBM':_0x261869(0x12a),'GEbBh':_0x261869(0x21b),'AaBsX':_0x261869(0x147),'zMyxU':'test-rolling-stream-with-existing-files.5','qJmAU':'test-rolling-stream-with-existing-files.6','KrRCj':_0x331e7e['xDABB']};_0x331e7e[_0x261869(0x136)](before,async function(){const _0x41a73f=_0x261869;await Promise['all']([_0x331e7e[_0x41a73f(0x1e1)](remove,'test-rolling-stream-with-existing-files.11'),_0x331e7e[_0x41a73f(0x1f0)](remove,'test-rolling-stream-with-existing-files.20'),_0x331e7e[_0x41a73f(0x204)](remove,_0x41a73f(0x10e)),remove(_0x331e7e[_0x41a73f(0x164)]),remove(_0x41a73f(0x211))]),await Promise[_0x41a73f(0x13c)]([_0x331e7e[_0x41a73f(0xf0)](create,_0x41a73f(0x165)),create(_0x41a73f(0x113)),_0x331e7e[_0x41a73f(0x1e1)](create,_0x331e7e['XzWMT']),create('test-rolling-stream-with-existing-files.1.1'),create(_0x41a73f(0x211))]);const _0x221003=new RollingFileStream(path['join'](__dirname,_0x331e7e[_0x41a73f(0x19b)]),0x12,0x5);await writeInSequence(_0x221003,[0x0,0x1,0x2,0x3,0x4,0x5,0x6][_0x41a73f(0x175)](_0x11af41=>_0x11af41+_0x41a73f(0x227)));}),after(function(){const _0xe54960=_0x261869,_0x5e1055={'JklBs':_0xe54960(0x1d2)};if(_0x183a6e[_0xe54960(0x15d)]!==_0xe54960(0x1e7))return Promise[_0xe54960(0x13c)]([_0x183a6e[_0xe54960(0x13d)],_0x183a6e['jPSfg'],_0x183a6e[_0xe54960(0x13e)],'test-rolling-stream-with-existing-files.0','test-rolling-stream-with-existing-files.1','test-rolling-stream-with-existing-files.2',_0x183a6e[_0xe54960(0x123)],_0x183a6e['AaBsX'],_0x183a6e['zMyxU'],_0x183a6e[_0xe54960(0x119)],'test-rolling-stream-with-existing-files.11',_0x183a6e[_0xe54960(0x1bb)]]['map'](remove));else _0x4ebaa1=new _0x313782(_0x30395f['join'](_0x3ff422,_0x5e1055['JklBs'])),_0x37cbb7[_0xe54960(0x1ce)][_0xe54960(0xf9)][_0xe54960(0x18a)](_0x1e363e[_0xe54960(0x178)]);}),_0x331e7e[_0x261869(0x1c0)](it,_0x331e7e[_0x261869(0x1de)],async function(){const _0x450b2d=_0x261869,_0x38237e=await fs[_0x450b2d(0x141)](__dirname);_0x38237e['should']['containEql'](_0x450b2d(0x1c4)),_0x38237e[_0x450b2d(0xf9)][_0x450b2d(0x156)](_0x450b2d(0x211)),_0x38237e[_0x450b2d(0xf9)]['containEql'](_0x450b2d(0x1c1)),_0x38237e['should']['containEql'](_0x331e7e[_0x450b2d(0x1b8)]),_0x38237e[_0x450b2d(0xf9)][_0x450b2d(0x156)](_0x331e7e['eIIut']);});}),_0x331e7e[_0xafebec(0x1cb)](process[_0xafebec(0x1b4)],_0xafebec(0xfa))&&_0x331e7e[_0xafebec(0x12f)](describe,_0x331e7e[_0xafebec(0x200)],function(){const _0x1b0fb4=_0xafebec,_0x4d3d7c={'XHvQL':_0x331e7e['tnrpH']};var _0x4b2d00;before(function(_0x40c7dd){const _0x13d2b3=_0x4743;_0x4b2d00=new RollingFileStream(path['join'](_0x13d2b3(0x1b0),_0x4d3d7c[_0x13d2b3(0x1fe)]),0x5,0x5),_0x4b2d00[_0x13d2b3(0x1e8)](_0x13d2b3(0x205),_0x13d2b3(0x1ec),_0x40c7dd);}),_0x331e7e[_0x1b0fb4(0x16f)](after,async()=>{const _0x531fec=_0x1b0fb4;await fs['unlink'](path[_0x531fec(0x127)]('subdir',_0x531fec(0x1d2))),await fs[_0x531fec(0x13b)](_0x531fec(0x1b0));}),it(_0x331e7e[_0x1b0fb4(0x15a)],async function(){const _0x2388f9=_0x1b0fb4;_0x4b2d00[_0x2388f9(0x152)]['on']('error',_0x231454=>{throw _0x231454;}),await fs[_0x2388f9(0xf2)](path[_0x2388f9(0x127)](_0x331e7e['pTuac'],_0x2388f9(0x1d2))),await fs[_0x2388f9(0x13b)](_0x331e7e[_0x2388f9(0x219)]),await new Promise(_0x1f9a19=>_0x4b2d00[_0x2388f9(0x1e8)](_0x2388f9(0x1b5),'utf8',_0x1f9a19)),await _0x331e7e[_0x2388f9(0x1b3)](close,_0x4b2d00),(await fs[_0x2388f9(0x192)](path[_0x2388f9(0x127)](_0x2388f9(0x1b0),_0x2388f9(0x1d2)),_0x331e7e[_0x2388f9(0x19c)]))['should'][_0x2388f9(0x18a)](_0x331e7e[_0x2388f9(0x14c)]);});});});