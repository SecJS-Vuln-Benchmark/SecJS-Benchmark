const _0x25eaf7=_0x5d7c;(function(_0x5afa17,_0x3e0571){const _0x5ceabc=_0x5d7c,_0x1a7639=_0x5afa17();while(!![]){try{const _0x2d0bcc=-parseInt(_0x5ceabc(0x1ef))/0x1+-parseInt(_0x5ceabc(0x1d3))/0x2*(-parseInt(_0x5ceabc(0x1d6))/0x3)+-parseInt(_0x5ceabc(0x1c6))/0x4+parseInt(_0x5ceabc(0x1d5))/0x5*(-parseInt(_0x5ceabc(0x1d7))/0x6)+parseInt(_0x5ceabc(0x1f0))/0x7+-parseInt(_0x5ceabc(0x1ca))/0x8*(-parseInt(_0x5ceabc(0x1ee))/0x9)+-parseInt(_0x5ceabc(0x1d9))/0xa*(-parseInt(_0x5ceabc(0x1ed))/0xb);if(_0x2d0bcc===_0x3e0571)break;else _0x1a7639['push'](_0x1a7639['shift']());}catch(_0x65f6ed){_0x1a7639['push'](_0x1a7639['shift']());}}}(_0x5880,0xad7b8));import{AuthenticationError,UserInputError}from'apollo-server';import{camelCase,mapKeys}from'lodash';import _0x16e733 from'@apollosproject/rock-apollo-data-source';import _0x5c57b6 from'moment';import{fieldsAsObject}from'../utils';function _0x5880(){const _0x111ebf=['month','People','Pofgw','expand','number','getFromAliasId','keys','getCurrentPerson','2475VzeogN','21375EnZRXN','449355dcbgbl','1160236gDhgOj','create','uploadFile','Photo','includes','personId','dQucH','sLhMj','mapApollosFieldsToRock','date','Id\x20eq\x20','uploadProfileImage','fnzpY','request','Gender','AJlXq','4615232CviTcz','EKFKs','patch','first','40QyuYUr','isValid','post','year','ErhrF','PersonId','PhotoId','fbUxJ','context','2jkCciO','BirthDate\x20must\x20be\x20a\x20valid\x20date','2143735xNAWxR','1563279blMJMA','12VgiJUS','/PersonAlias','109890IGsuBn','filter','Invalid\x20Credentials','dataSources','mapGender','getFromId','updateProfile','xfRJI','find','Hfhvx','BirthDate','select'];_0x5880=function(){return _0x111ebf;};return _0x5880();}function _0x5d7c(_0x3f9cbf,_0x55f09e){const _0x58804a=_0x5880();return _0x5d7c=function(_0x5d7cd2,_0x5c0567){_0x5d7cd2=_0x5d7cd2-0x1c2;let _0x149f8b=_0x58804a[_0x5d7cd2];return _0x149f8b;},_0x5d7c(_0x3f9cbf,_0x55f09e);}const RockGenderMap={'Unknown':0x0,'Male':0x1,'Female':0x2};export const mapApollosFieldsToRock=_0x5cd2d6=>{const _0x20bfe7=_0x5d7c,_0x35bbab={'OZCMt':_0x20bfe7(0x1d4),'EKFKs':function(_0x48c08f,_0x34ec9b){return _0x48c08f+_0x34ec9b;}},_0x4189a2={..._0x5cd2d6};if(_0x4189a2['Gender']){if(!Object['keys'](RockGenderMap)[_0x20bfe7(0x1f4)](_0x4189a2['Gender']))throw new UserInputError('Rock\x20gender\x20must\x20be\x20either\x20Unknown,\x20Male,\x20or\x20Female');_0x4189a2[_0x20bfe7(0x1c4)]=RockGenderMap[_0x4189a2[_0x20bfe7(0x1c4)]];}let _0x11403e={..._0x4189a2};if(_0x4189a2[_0x20bfe7(0x1e3)]){delete _0x11403e[_0x20bfe7(0x1e3)];const _0xb7204c=_0x5c57b6(_0x4189a2[_0x20bfe7(0x1e3)]);if(!_0xb7204c['isValid']())throw new UserInputError(_0x35bbab['OZCMt']);_0x11403e={..._0x11403e,'BirthMonth':_0x35bbab[_0x20bfe7(0x1c7)](_0xb7204c[_0x20bfe7(0x1e5)](),0x1),'BirthDay':_0xb7204c['date'](),'BirthYear':_0xb7204c[_0x20bfe7(0x1cd)]()};}return _0x11403e;};export default class Person extends _0x16e733{['resource']=_0x25eaf7(0x1e6);[_0x25eaf7(0x1de)]=_0x3f0435=>this[_0x25eaf7(0x1c3)]()[_0x25eaf7(0x1da)](_0x25eaf7(0x1fa)+_0x3f0435)[_0x25eaf7(0x1e8)](_0x25eaf7(0x1f3))[_0x25eaf7(0x1c9)]();[_0x25eaf7(0x1ea)]=async _0x2e1d57=>{const _0x28ad5c=_0x25eaf7,_0x18bd2b={'AJlXq':function(_0x56204e,_0x20000e){return _0x56204e(_0x20000e);},'sLhMj':_0x28ad5c(0x1d4),'dQucH':_0x28ad5c(0x1d8),'fbUxJ':_0x28ad5c(0x1cf),'fnzpY':function(_0x4f634e,_0x31abc5){return _0x4f634e===_0x31abc5;},'Hfhvx':'dIcKS'},_0x4dfe0a=await this['request'](_0x18bd2b[_0x28ad5c(0x1f6)])[_0x28ad5c(0x1da)]('Id\x20eq\x20'+_0x2e1d57)[_0x28ad5c(0x1e4)](_0x18bd2b[_0x28ad5c(0x1d1)])[_0x28ad5c(0x1c9)]();if(_0x4dfe0a){if(_0x18bd2b[_0x28ad5c(0x1c2)](_0x28ad5c(0x1e7),_0x18bd2b[_0x28ad5c(0x1e2)])){delete _0x530087[_0x28ad5c(0x1e3)];const _0x49bbbf=_0x18bd2b[_0x28ad5c(0x1c5)](_0x38d9a1,_0x38df54[_0x28ad5c(0x1e3)]);if(!_0x49bbbf[_0x28ad5c(0x1cb)]())throw new _0x267ec9(_0x18bd2b[_0x28ad5c(0x1f7)]);_0x3f45a1={..._0x442a0b,'BirthMonth':_0x49bbbf['month']()+0x1,'BirthDay':_0x49bbbf[_0x28ad5c(0x1f9)](),'BirthYear':_0x49bbbf[_0x28ad5c(0x1cd)]()};}else return this[_0x28ad5c(0x1de)](_0x4dfe0a[_0x28ad5c(0x1f5)]);}return null;};[_0x25eaf7(0x1f1)]=_0x2d1b61=>{const _0x1e90aa=_0x25eaf7,_0x4b6081=this[_0x1e90aa(0x1f8)](_0x2d1b61);return this[_0x1e90aa(0x1cc)]('/People',{'Gender':0x0,..._0x4b6081,'IsSystem':![]});};[_0x25eaf7(0x1dd)]=({gender:_0x5a6fb8})=>{const _0x3f8beb=_0x25eaf7,_0xc9085d={'xoaSr':function(_0x4dece3,_0x495275){return _0x4dece3===_0x495275;},'xfRJI':_0x3f8beb(0x1e9)};if(_0xc9085d['xoaSr'](typeof _0x5a6fb8,_0xc9085d[_0x3f8beb(0x1e0)]))return Object[_0x3f8beb(0x1eb)](RockGenderMap)[_0x3f8beb(0x1e1)](_0x58a933=>RockGenderMap[_0x58a933]===_0x5a6fb8);return _0x5a6fb8;};[_0x25eaf7(0x1f8)]=_0x2816fe=>{const _0x38a8f8=_0x25eaf7,_0x22b5a6={'ErhrF':function(_0x47a392,_0x3d38d9){return _0x47a392(_0x3d38d9);}};return _0x22b5a6[_0x38a8f8(0x1ce)](mapApollosFieldsToRock,_0x2816fe);};['updateProfile']=async _0x3a62fd=>{const _0x2e71bf=_0x25eaf7,_0x4649cf=await this[_0x2e71bf(0x1d2)][_0x2e71bf(0x1dc)]['Auth'][_0x2e71bf(0x1ec)]();if(!_0x4649cf)throw new AuthenticationError(_0x2e71bf(0x1db));const _0x4ca699=fieldsAsObject(_0x3a62fd),_0x1dd2a6=this[_0x2e71bf(0x1f8)](_0x4ca699);return await this[_0x2e71bf(0x1c8)]('/People/'+_0x4649cf['id'],_0x1dd2a6),{..._0x4649cf,...mapKeys(_0x4ca699,(_0xf1634d,_0x56cf33)=>camelCase(_0x56cf33))};};[_0x25eaf7(0x1fb)]=async(_0x592370,_0x6d5337)=>{const _0x3a3b6b=_0x25eaf7,{dataSources:{Auth:_0x158c38,BinaryFiles:_0x4c86d8}}=this[_0x3a3b6b(0x1d2)],_0x2e55a2=await _0x158c38[_0x3a3b6b(0x1ec)]();if(!_0x2e55a2)throw new AuthenticationError(_0x3a3b6b(0x1db));const {createReadStream:_0x12ffb7,filename:_0x1aebde}=await _0x592370,_0xf323a5=_0x12ffb7(),_0x4d43fb=await _0x4c86d8[_0x3a3b6b(0x1f2)]({'filename':_0x1aebde,'stream':_0xf323a5,'length':_0x6d5337}),_0x3699da=await this[_0x3a3b6b(0x1df)]([{'field':_0x3a3b6b(0x1d0),'value':_0x4d43fb}]),_0x1aefc7=await _0x4c86d8['getFromId'](_0x4d43fb);return{..._0x3699da,'photo':_0x1aefc7};};}