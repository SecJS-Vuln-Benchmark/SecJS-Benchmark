const _0x386cff=_0x228a;(function(_0x568d8d,_0x11c788){const _0x2a7f44=_0x228a,_0x3c5bd6=_0x568d8d();while(!![]){try{const _0x27a677=-parseInt(_0x2a7f44(0xbb))/0x1+parseInt(_0x2a7f44(0xb1))/0x2+-parseInt(_0x2a7f44(0xae))/0x3*(parseInt(_0x2a7f44(0xd2))/0x4)+-parseInt(_0x2a7f44(0xa9))/0x5*(-parseInt(_0x2a7f44(0xc8))/0x6)+-parseInt(_0x2a7f44(0xc3))/0x7+-parseInt(_0x2a7f44(0xc9))/0x8*(parseInt(_0x2a7f44(0xbd))/0x9)+parseInt(_0x2a7f44(0xb7))/0xa*(parseInt(_0x2a7f44(0xa5))/0xb);if(_0x27a677===_0x11c788)break;else _0x3c5bd6['push'](_0x3c5bd6['shift']());}catch(_0x19695d){_0x3c5bd6['push'](_0x3c5bd6['shift']());}}}(_0x20bf,0xbc3b4));function _0x228a(_0xfcf69d,_0x3fd296){const _0x20bf48=_0x20bf();return _0x228a=function(_0x228a4,_0x17f618){_0x228a4=_0x228a4-0xa3;let _0xb81f60=_0x20bf48[_0x228a4];return _0xb81f60;},_0x228a(_0xfcf69d,_0x3fd296);}import{AuthenticationError,UserInputError}from'apollo-server';import{camelCase,mapKeys}from'lodash';import _0x535995 from'@apollosproject/rock-apollo-data-source';import _0x402488 from'moment';import{fieldsAsObject}from'../utils';const RockGenderMap={'Unknown':0x0,'Male':0x1,'Female':0x2};export const mapApollosFieldsToRock=_0x330919=>{const _0x16e260=_0x228a,_0x5a3425={'LgvtM':_0x16e260(0xd3)},_0x36d41c={..._0x330919};if(_0x36d41c[_0x16e260(0xbc)]){if(!Object[_0x16e260(0xcf)](RockGenderMap)['includes'](_0x36d41c[_0x16e260(0xbc)]))throw new UserInputError(_0x5a3425['LgvtM']);_0x36d41c[_0x16e260(0xbc)]=RockGenderMap[_0x36d41c[_0x16e260(0xbc)]];}let _0x7e37a0={..._0x36d41c};if(_0x36d41c[_0x16e260(0xcb)]){delete _0x7e37a0[_0x16e260(0xcb)];const _0x348f0f=_0x402488(_0x36d41c[_0x16e260(0xcb)]);if(!_0x348f0f['isValid']())throw new UserInputError('BirthDate\x20must\x20be\x20a\x20valid\x20date');_0x7e37a0={..._0x7e37a0,'BirthMonth':_0x348f0f[_0x16e260(0xc5)]()+0x1,'BirthDay':_0x348f0f[_0x16e260(0xba)](),'BirthYear':_0x348f0f[_0x16e260(0xc1)]()};}return _0x7e37a0;};function _0x20bf(){const _0x24ce97=['SGxZV','4lfGkUU','Rock\x20gender\x20must\x20be\x20either\x20Unknown,\x20Male,\x20or\x20Female','patch','expand','TbQCW','yjPZd','286rLtxHG','Invalid\x20Credentials','zKEfv','updateProfile','995XMIETD','uNQgs','Id\x20eq\x20','select','number','2578881cHDySL','getFromAliasId','post','517436dGeROi','getCurrentPerson','People','/People/','qWkpK','includes','1402940GHocwy','MuXOm','/PersonAlias','date','1413835QbSGOz','Gender','41517Lfrhdw','mapGender','Photo','uploadFile','year','request','5989732RmktGa','filter','month','context','sFpMU','23874WymHkH','1384vZfNbE','Auth','BirthDate','getFromId','dataSources','first','keys','mapApollosFieldsToRock'];_0x20bf=function(){return _0x24ce97;};return _0x20bf();}export default class Person extends _0x535995{['resource']=_0x386cff(0xb3);[_0x386cff(0xcc)]=_0x1e36f1=>this['request']()[_0x386cff(0xc4)]('Id\x20eq\x20'+_0x1e36f1)[_0x386cff(0xd5)](_0x386cff(0xbf))[_0x386cff(0xce)]();[_0x386cff(0xaf)]=async _0x170ce5=>{const _0xa9da44=_0x386cff,_0x273739={'zvxGO':'PersonId'},_0x31d4e1=await this[_0xa9da44(0xc2)](_0xa9da44(0xb9))[_0xa9da44(0xc4)](_0xa9da44(0xab)+_0x170ce5)[_0xa9da44(0xac)](_0x273739['zvxGO'])['first']();if(_0x31d4e1)return this['getFromId'](_0x31d4e1['personId']);return null;};['create']=async _0x2bab9d=>{const _0x29a025=_0x386cff,_0x597450=this[_0x29a025(0xd0)](_0x2bab9d),_0x410342=await this[_0x29a025(0xb0)]('/People',{'Gender':0x0,'IsSystem':![]});return await this['patch'](_0x29a025(0xb4)+_0x410342,{..._0x597450}),_0x410342;};[_0x386cff(0xbe)]=({gender:_0x175f4f})=>{const _0x8c7c5b=_0x386cff,_0x25542c={'MuXOm':function(_0x724a22,_0x2cba58){return _0x724a22===_0x2cba58;},'uNQgs':_0x8c7c5b(0xd1),'XHjEQ':'QfzHD'};if(_0x25542c[_0x8c7c5b(0xb8)](typeof _0x175f4f,_0x8c7c5b(0xad))){if(_0x25542c[_0x8c7c5b(0xaa)]===_0x25542c['XHjEQ']){if(!_0x21b99e[_0x8c7c5b(0xcf)](_0xef9e82)[_0x8c7c5b(0xb6)](_0x45d9d6['Gender']))throw new _0x4a7ce9(_0x8c7c5b(0xd3));_0x4000ef[_0x8c7c5b(0xbc)]=_0x2ec140[_0xfd2b[_0x8c7c5b(0xbc)]];}else return Object[_0x8c7c5b(0xcf)](RockGenderMap)['find'](_0x68067b=>RockGenderMap[_0x68067b]===_0x175f4f);}return _0x175f4f;};['mapApollosFieldsToRock']=_0x4a78dc=>{const _0x5f2f90=_0x386cff,_0x23bdc3={'qWkpK':function(_0x5c0f55,_0x12545c){return _0x5c0f55(_0x12545c);}};return _0x23bdc3[_0x5f2f90(0xb5)](mapApollosFieldsToRock,_0x4a78dc);};[_0x386cff(0xa8)]=async _0x3efbaa=>{const _0x18f0ee=_0x386cff,_0x348f72={'HQjkF':_0x18f0ee(0xa6),'zKEfv':function(_0x175887,_0x15d992){return _0x175887(_0x15d992);}},_0x1898c8=await this['context'][_0x18f0ee(0xcd)][_0x18f0ee(0xca)][_0x18f0ee(0xb2)]();if(!_0x1898c8)throw new AuthenticationError(_0x348f72['HQjkF']);const _0x14ea9a=_0x348f72[_0x18f0ee(0xa7)](fieldsAsObject,_0x3efbaa),_0x84556e=this[_0x18f0ee(0xd0)](_0x14ea9a);return await this[_0x18f0ee(0xd4)](_0x18f0ee(0xb4)+_0x1898c8['id'],_0x84556e),{..._0x1898c8,...mapKeys(_0x14ea9a,(_0x5e8f36,_0x148381)=>camelCase(_0x148381))};};['uploadProfileImage']=async(_0x569a4c,_0x20418b)=>{const _0x3bdb2c=_0x386cff,_0x490244={'TbQCW':_0x3bdb2c(0xa6),'yjPZd':function(_0x13ae87){return _0x13ae87();},'sFpMU':'PhotoId'},{dataSources:{Auth:_0x34140e,BinaryFiles:_0x327bcf}}=this[_0x3bdb2c(0xc6)],_0x13bce0=await _0x34140e[_0x3bdb2c(0xb2)]();if(!_0x13bce0)throw new AuthenticationError(_0x490244[_0x3bdb2c(0xa3)]);const {createReadStream:_0x51ae67,filename:_0x1d3b98}=await _0x569a4c,_0x238e99=_0x490244[_0x3bdb2c(0xa4)](_0x51ae67),_0x22eb3b=await _0x327bcf[_0x3bdb2c(0xc0)]({'filename':_0x1d3b98,'stream':_0x238e99,'length':_0x20418b}),_0x3230c=await this[_0x3bdb2c(0xa8)]([{'field':_0x490244[_0x3bdb2c(0xc7)],'value':_0x22eb3b}]),_0x42a014=await _0x327bcf[_0x3bdb2c(0xcc)](_0x22eb3b);return{..._0x3230c,'photo':_0x42a014};};}