const _0x4297f6=_0xaf6c;(function(_0x551384,_0x48afea){const _0x2ef353=_0xaf6c,_0x37146f=_0x551384();while(!![]){try{const _0x781963=parseInt(_0x2ef353(0x106))/0x1+parseInt(_0x2ef353(0x10b))/0x2+parseInt(_0x2ef353(0x104))/0x3*(-parseInt(_0x2ef353(0x110))/0x4)+parseInt(_0x2ef353(0xff))/0x5*(parseInt(_0x2ef353(0x10e))/0x6)+parseInt(_0x2ef353(0x101))/0x7*(parseInt(_0x2ef353(0x10f))/0x8)+-parseInt(_0x2ef353(0xf7))/0x9+-parseInt(_0x2ef353(0xfc))/0xa;if(_0x781963===_0x48afea)break;else _0x37146f['push'](_0x37146f['shift']());}catch(_0x390bee){_0x37146f['push'](_0x37146f['shift']());}}}(_0x4413,0x772d3));import{OAuthApps}from'@rocket.chat/models';function _0xaf6c(_0x4f63e1,_0x45c8fb){const _0x441373=_0x4413();return _0xaf6c=function(_0xaf6cee,_0x2cf8cb){_0xaf6cee=_0xaf6cee-0xee;let _0x37c516=_0x441373[_0xaf6cee];return _0x37c516;},_0xaf6c(_0x4f63e1,_0x45c8fb);}import{isUpdateOAuthAppParams,isOauthAppsGetParams,isOauthAppsAddParams,isDeleteOAuthAppParams}from'@rocket.chat/rest-typings';import{hasPermissionAsync}from'../../../authorization/server/functions/hasPermission';function _0x4413(){const _0x1432ab=['addRoute','response','5433mWukgO','deleteOAuthApp','368861JvKEqs','oauth-apps.update','updateOAuthApp','parameter','userId','398376UhrZFT','oauth-apps.list','oauth-apps.create','6edxZRQ','208hilXSZ','1928WxeduA','MBdLU','request','oauth-apps.delete','callAsync','appId','bodyParams','7.0.0','manage-oauth-apps','findOneAuthAppByIdOrClientId','cHYol','2606796dKEFBQ','ntsgR','failure','find','QGaZA','6267050tcUZIg','success','route','4564715uZRsrU','queryParams','214417omwqdp'];_0x4413=function(){return _0x1432ab;};return _0x4413();}import{apiDeprecationLogger}from'../../../lib/server/lib/deprecationWarningLogger';import{addOAuthApp}from'../../../oauth2-server-config/server/admin/functions/addOAuthApp';import{API}from'../api';API['v1'][_0x4297f6(0x102)](_0x4297f6(0x10c),{'authRequired':!![],'permissionsRequired':['manage-oauth-apps']},{async 'get'(){const _0x12f140=_0x4297f6;return API['v1']['success']({'oauthApps':await OAuthApps[_0x12f140(0xfa)]()['toArray']()});}}),API['v1'][_0x4297f6(0x102)]('oauth-apps.get',{'authRequired':!![],'validateParams':isOauthAppsGetParams},{async 'get'(){const _0x5dd4f0=_0x4297f6,_0x4e8667={'cHYol':function(_0x4807da,_0x46896a,_0x12dac9){return _0x4807da(_0x46896a,_0x12dac9);},'QGaZA':_0x5dd4f0(0xf4),'dmFXl':function(_0x19d3f3,_0x8f41ce){return _0x19d3f3 in _0x8f41ce;},'MBdLU':_0x5dd4f0(0xf1)},_0x3534f6=await _0x4e8667[_0x5dd4f0(0xf6)](hasPermissionAsync,this[_0x5dd4f0(0x10a)],_0x4e8667[_0x5dd4f0(0xfb)]),_0x3be0cb=await OAuthApps[_0x5dd4f0(0xf5)](this[_0x5dd4f0(0x100)],!_0x3534f6?{'projection':{'clientSecret':0x0}}:{});if(!_0x3be0cb)return API['v1'][_0x5dd4f0(0xf9)]('OAuth\x20app\x20not\x20found.');return _0x4e8667['dmFXl'](_0x5dd4f0(0xf1),this[_0x5dd4f0(0x100)])&&apiDeprecationLogger[_0x5dd4f0(0x109)](this[_0x5dd4f0(0xee)][_0x5dd4f0(0xfe)],_0x4e8667[_0x5dd4f0(0x111)],_0x5dd4f0(0xf3),this[_0x5dd4f0(0x103)]),API['v1'][_0x5dd4f0(0xfd)]({'oauthApp':_0x3be0cb});}}),API['v1'][_0x4297f6(0x102)](_0x4297f6(0x107),{'authRequired':!![],'validateParams':isUpdateOAuthAppParams,'permissionsRequired':[_0x4297f6(0xf4)]},{async 'post'(){const _0x300c4c=_0x4297f6,{appId:_0x100b4e}=this[_0x300c4c(0xf2)],_0x24777e=await Meteor[_0x300c4c(0xf0)](_0x300c4c(0x108),_0x100b4e,this['bodyParams']);return API['v1'][_0x300c4c(0xfd)](_0x24777e);}}),API['v1'][_0x4297f6(0x102)](_0x4297f6(0xef),{'authRequired':!![],'validateParams':isDeleteOAuthAppParams,'permissionsRequired':[_0x4297f6(0xf4)]},{async 'post'(){const _0x580898=_0x4297f6,{appId:_0x2bb0cd}=this[_0x580898(0xf2)],_0x1887b5=await Meteor[_0x580898(0xf0)](_0x580898(0x105),_0x2bb0cd);return API['v1'][_0x580898(0xfd)](_0x1887b5);}}),API['v1'][_0x4297f6(0x102)](_0x4297f6(0x10d),{'authRequired':!![],'validateParams':isOauthAppsAddParams,'permissionsRequired':[_0x4297f6(0xf4)]},{async 'post'(){const _0x2bf763=_0x4297f6,_0x320edb={'ntsgR':function(_0x21c699,_0x26f9e2,_0x4be784){return _0x21c699(_0x26f9e2,_0x4be784);}},_0x46beeb=await _0x320edb[_0x2bf763(0xf8)](addOAuthApp,this[_0x2bf763(0xf2)],this[_0x2bf763(0x10a)]);return API['v1'][_0x2bf763(0xfd)]({'application':_0x46beeb});}});