'use strict';const _0x4a70fb=_0x51a5;(function(_0x2f615e,_0x33999d){const _0x2e60eb=_0x51a5,_0x1c4a83=_0x2f615e();while(!![]){try{const _0x546b25=-parseInt(_0x2e60eb(0x128))/0x1*(parseInt(_0x2e60eb(0x12f))/0x2)+-parseInt(_0x2e60eb(0x125))/0x3*(parseInt(_0x2e60eb(0x123))/0x4)+parseInt(_0x2e60eb(0x132))/0x5*(parseInt(_0x2e60eb(0x15f))/0x6)+-parseInt(_0x2e60eb(0x121))/0x7*(-parseInt(_0x2e60eb(0x136))/0x8)+-parseInt(_0x2e60eb(0x152))/0x9*(parseInt(_0x2e60eb(0x142))/0xa)+-parseInt(_0x2e60eb(0x14a))/0xb+parseInt(_0x2e60eb(0x11f))/0xc;if(_0x546b25===_0x33999d)break;else _0x1c4a83['push'](_0x1c4a83['shift']());}catch(_0x51de49){_0x1c4a83['push'](_0x1c4a83['shift']());}}}(_0x34bc,0xcec44));function _0x34bc(){const _0x16fa11=['HbUUT','getPullRequest','Target\x20specified\x20does\x20not\x20match\x20to\x20PR,\x20skipping.','semver/functions/diff','30FOFbdE','ref','UUyUM','aVFrX','.\x20Skipping.','approvePullRequest','insert','./log','8320290ychyso','map','./github-client','LLJVd','context','TpVCv','\x20major\x20release.\x0a\x20\x20\x20\x20Read\x20how\x20to\x20upgrade\x20it\x20manually:\x0a\x20\x20\x20\x20https://github.com/fastify/','name','4123314yBHgTN','@actions/core','qNGOD','GXICg','This\x20action\x20must\x20be\x20used\x20in\x20the\x20context\x20of\x20a\x20Pull\x20Request\x20or\x20with\x20a\x20Pull\x20Request\x20number','logActionRefWarning','major','payload','raw','join','filter','vPHFw','bEZUD','72DTolKR','user','NdtFp','Error\x20while\x20parsing\x20PR\x20title,\x20expected:\x20`bump\x20<package>\x20from\x20<old-version>\x20to\x20<new-version>`','./util','31176864dVleJq','Approving\x20only','14lfarRc','actions-toolkit','856952kAqdoo','exports','6HwcZWc','OPPzq','cBUrd','319028nJtyRx','semver/functions/coerce','FgKXt','./moduleVersionChanges','number','../package.json','Dependabot\x20merge\x20completed','2JLeQXU','#how-to-upgrade-from-2x-to-new-3x','delete','343265DOsKnJ','length','exec','Checking\x20if\x20the\x20changes\x20in\x20the\x20PR\x20can\x20be\x20merged','1213360XoJfCS','TPEYo','setFailed','Not\x20a\x20dependabot\x20PR,\x20skipping.','iCiTy','login','title','any'];_0x34bc=function(){return _0x16fa11;};return _0x34bc();}const core=require(_0x4a70fb(0x153)),github=require('@actions/github'),semverDiff=require(_0x4a70fb(0x141)),semverCoerce=require(_0x4a70fb(0x129)),toolkit=require(_0x4a70fb(0x122)),packageInfo=require(_0x4a70fb(0x12d)),{githubClient}=require(_0x4a70fb(0x14c)),{logInfo,logWarning,logError}=require(_0x4a70fb(0x149)),{isValidSemver,isCommitHash,getInputs,getPackageName}=require(_0x4a70fb(0x11e)),{targetOptions}=require('./getTargetInput'),{getModuleVersionChanges,checkModuleVersionChanges}=require(_0x4a70fb(0x12b)),{GITHUB_TOKEN,MERGE_METHOD,EXCLUDE_PKGS,MERGE_COMMENT,APPROVE_ONLY,TARGET,PR_NUMBER}=getInputs();module[_0x4a70fb(0x124)]=async function run(){const _0x37e126=_0x4a70fb,_0xa0c770={'aXgUW':function(_0x35d41c,_0x2d85a1){return _0x35d41c(_0x2d85a1);},'NdtFp':_0x37e126(0x156),'HbUUT':function(_0x2991f3,_0xcc38ed){return _0x2991f3(_0xcc38ed);},'iCiTy':function(_0x10a394,_0x5d7c69){return _0x10a394===_0x5d7c69;},'vPHFw':'dependabot[bot]','aVFrX':function(_0x16f5d5,_0x4aed52){return _0x16f5d5(_0x4aed52);},'Wiott':function(_0x9a03a2,_0x4b9b37){return _0x9a03a2(_0x4b9b37);},'gKyaK':function(_0x2d88c4,_0x2323ef,_0x36cb4a){return _0x2d88c4(_0x2323ef,_0x36cb4a);},'FgKXt':function(_0x47f544,_0x553013){return _0x47f544===_0x553013;},'cBUrd':function(_0x3f9936,_0x3d84bd){return _0x3f9936(_0x3d84bd);},'OPPzq':_0x37e126(0x140),'UUyUM':_0x37e126(0x12e)};try{toolkit[_0x37e126(0x157)]();const {pull_request:_0x4d00f1}=github[_0x37e126(0x14e)][_0x37e126(0x159)];if(!_0x4d00f1&&!PR_NUMBER)return _0xa0c770['aXgUW'](logError,_0xa0c770[_0x37e126(0x11c)]);const _0x2598e8=_0xa0c770[_0x37e126(0x13e)](githubClient,GITHUB_TOKEN),_0x439c8f=_0x4d00f1||await _0x2598e8[_0x37e126(0x13f)](PR_NUMBER),_0x46970c=_0xa0c770[_0x37e126(0x13a)](_0x439c8f[_0x37e126(0x11b)][_0x37e126(0x13b)],_0xa0c770[_0x37e126(0x15d)]);if(!_0x46970c)return _0xa0c770['aVFrX'](logWarning,_0x37e126(0x139));const _0x59e0e8=await _0x2598e8['getPullRequestDiff'](_0x439c8f[_0x37e126(0x12c)]),_0x41de8d=_0xa0c770[_0x37e126(0x145)](getModuleVersionChanges,_0x59e0e8)||parsePrTitle(_0x439c8f);if(TARGET!==targetOptions[_0x37e126(0x13d)]){_0xa0c770['Wiott'](logInfo,_0x37e126(0x135));const _0x11b310=_0xa0c770['gKyaK'](checkModuleVersionChanges,_0x41de8d,TARGET);if(!_0x11b310)return _0xa0c770[_0x37e126(0x12a)](_0x37e126(0x155),_0x37e126(0x155))?_0xa0c770[_0x37e126(0x127)](logWarning,_0xa0c770[_0x37e126(0x126)]):_0x33e42c(_0x37e126(0x140));}const _0x1f1f2c=EXCLUDE_PKGS[_0x37e126(0x15c)](_0x10a59a=>_0x10a59a in _0x41de8d);if(_0x1f1f2c[_0x37e126(0x133)]>0x0)return _0xa0c770['HbUUT'](logInfo,_0x1f1f2c['length']+'\x20package(s)\x20excluded:\x20'+_0x1f1f2c[_0x37e126(0x15b)](',\x20')+_0x37e126(0x146));const _0x568310=_0x41de8d[packageInfo[_0x37e126(0x151)]];if(_0x568310&&isAMajorReleaseBump(_0x568310)){const _0x534293=_0x41de8d[packageInfo['name']][_0x37e126(0x148)],_0x142772='Cannot\x20automerge\x20'+packageInfo[_0x37e126(0x151)]+'\x20'+_0x534293+_0x37e126(0x150)+packageInfo['name']+_0x37e126(0x130);core['setFailed'](_0x142772);return;}await _0x2598e8[_0x37e126(0x147)](_0x439c8f[_0x37e126(0x12c)],MERGE_COMMENT);if(APPROVE_ONLY){if('TPEYo'!==_0x37e126(0x137))throw new _0xcdc3f4(_0x37e126(0x11d));else return logInfo(_0x37e126(0x120));}await _0x2598e8['mergePullRequest'](_0x439c8f['number'],MERGE_METHOD),logInfo(_0xa0c770[_0x37e126(0x144)]);}catch(_0xb9d238){core[_0x37e126(0x138)](_0xb9d238['message']);}};function isAMajorReleaseBump(_0x520d13){const _0x45f8f8=_0x4a70fb,_0x6a36eb={'LLJVd':function(_0xac4433,_0x29013b){return _0xac4433(_0x29013b);},'TpVCv':function(_0x8f9f33,_0x34fcd1){return _0x8f9f33(_0x34fcd1);}},_0x3943f9=_0x520d13[_0x45f8f8(0x131)],_0x2a6149=_0x520d13[_0x45f8f8(0x148)];if(isCommitHash(_0x3943f9)&&_0x6a36eb[_0x45f8f8(0x14d)](isCommitHash,_0x2a6149))return![];const _0x18f257=semverDiff(_0x6a36eb[_0x45f8f8(0x14f)](semverCoerce,_0x3943f9),semverCoerce(_0x2a6149));return _0x18f257===targetOptions[_0x45f8f8(0x158)];}function _0x51a5(_0xc7c276,_0x90ec7){const _0x34bc67=_0x34bc();return _0x51a5=function(_0x51a559,_0x451b35){_0x51a559=_0x51a559-0x11b;let _0x249387=_0x34bc67[_0x51a559];return _0x249387;},_0x51a5(_0xc7c276,_0x90ec7);}function parsePrTitle(_0x5c9886){const _0x1b42fb=_0x4a70fb,_0x547c05={'qNGOD':_0x1b42fb(0x11d),'bEZUD':function(_0x35e8a1,_0x101c0d){return _0x35e8a1(_0x101c0d);}},_0x290e67=/bump \S+ from (\S+) to (\S+)/i,_0x50523d=_0x290e67[_0x1b42fb(0x134)](_0x5c9886[_0x1b42fb(0x13c)]);if(!_0x50523d)throw new Error(_0x547c05[_0x1b42fb(0x154)]);const _0x7223a5=getPackageName(_0x5c9886['head'][_0x1b42fb(0x143)]),[,_0x2fd111,_0xcae749]=_0x50523d[_0x1b42fb(0x14b)](_0x7f401=>_0x7f401['replace'](/`/g,'')),_0x50145d=_0x547c05['bEZUD'](isValidSemver,_0x2fd111)&&isValidSemver(_0xcae749);return{[_0x7223a5]:{'delete':_0x50145d?_0x547c05[_0x1b42fb(0x15e)](semverCoerce,_0x2fd111)?.[_0x1b42fb(0x15a)]:_0x2fd111,'insert':_0x50145d?semverCoerce(_0xcae749)?.['raw']:_0xcae749}};}