function _0x265e(){var _0x15bb65=['tiUMf','OmdtU','passes\x20outgoing\x20messages\x20through\x20the\x20extension','rTQGZ','ggrIM','handshake','Qtblw','CIymD','42vTXnct','PYAaJ','SLtlB','dOsWT','KqgUT','kLmjO','22420Aznlpk','1661eyYkwu','get','xcgIm','server','rEYrI','does\x20not\x20pass\x20incoming\x20messages\x20through\x20the\x20extension','0|1|2|4|3','TGCSN','Miqtz','jstest','100VUDaQM','kIdts','returns','HzmZF','OaKif','JNtKP','/foo','KBxDe','EVZrX','message','HzUzf','password','gHbZP','addExtension','sscbO','ngfAi','publish','13dObiim','dGRAr','624AvKbtn','jnCTS','split','Test','UUmiT','1143iwmmaK','yields','3326244ndCRdW','NiVTS','hello','moNlo','describe','130fsfVqx','Niddi','VhOIK','305259QPTmqj','IjCqj','FdlvU','given','mpMqM','ext','xUmmw','/meta/handshake','xXbSJ','../../../src/engines/proxy','dFRuG','7979RHGKZt','process','does\x20not\x20pass\x20outgoing\x20messages\x20through\x20the\x20extension','Server\x20extensions','7294tOAEHx','with\x20an\x20outgoing\x20extension\x20installed','yepix','1362OpwaQe','tfuBs','muwMH','passes\x20incoming\x20messages\x20through\x20the\x20extension','ZIrqn','RlVBL'];_0x265e=function(){return _0x15bb65;};return _0x265e();}function _0x4ad1(_0x2dfbd4,_0x1220be){var _0x265e37=_0x265e();return _0x4ad1=function(_0x4ad198,_0x58d985){_0x4ad198=_0x4ad198-0x93;var _0x45fbea=_0x265e37[_0x4ad198];return _0x45fbea;},_0x4ad1(_0x2dfbd4,_0x1220be);}var _0x2a6257=_0x4ad1;(function(_0x27af2d,_0x56736e){var _0x333de1=_0x4ad1,_0x208632=_0x27af2d();while(!![]){try{var _0x564905=-parseInt(_0x333de1(0xcc))/0x1*(parseInt(_0x333de1(0xe1))/0x2)+-parseInt(_0x333de1(0xc1))/0x3+parseInt(_0x333de1(0x9f))/0x4*(-parseInt(_0x333de1(0x94))/0x5)+parseInt(_0x333de1(0xd3))/0x6*(parseInt(_0x333de1(0xd0))/0x7)+parseInt(_0x333de1(0xb2))/0x8*(-parseInt(_0x333de1(0xb7))/0x9)+-parseInt(_0x333de1(0xbe))/0xa*(parseInt(_0x333de1(0x95))/0xb)+-parseInt(_0x333de1(0xb9))/0xc*(-parseInt(_0x333de1(0xb0))/0xd);if(_0x564905===_0x56736e)break;else _0x208632['push'](_0x208632['shift']());}catch(_0x2b7660){_0x208632['push'](_0x208632['shift']());}}}(_0x265e,0x1d678));var jstest=require(_0x2a6257(0x9e))[_0x2a6257(0xb5)],Engine=require(_0x2a6257(0xca)),Server=require('../../../src/protocol/server');jstest[_0x2a6257(0xbd)](_0x2a6257(0xcf),function(){var _0x1f39c6=_0x2a6257,_0x1b1f8d={'xcgIm':function(_0x5754f8,_0x5a1cd4,_0x52e836){return _0x5754f8(_0x5a1cd4,_0x52e836);},'JNtKP':_0x1f39c6(0x96),'kLmjO':function(_0x4a91e4,_0x4c660c,_0x13e6a0){return _0x4a91e4(_0x4c660c,_0x13e6a0);},'rEYrI':'publish','dFRuG':'/foo','EVZrX':_0x1f39c6(0xd5),'OaKif':_0x1f39c6(0xb1),'Niddi':_0x1f39c6(0xaa),'UUmiT':_0x1f39c6(0xde),'ngfAi':function(_0x32bb95,_0x1741e0,_0x4fdafd){return _0x32bb95(_0x1741e0,_0x4fdafd);},'mpMqM':_0x1f39c6(0xbb),'IjCqj':function(_0x123cd6,_0x16a073){return _0x123cd6!==_0x16a073;},'bCVAn':function(_0xe3f6f3,_0x4db45e){return _0xe3f6f3(_0x4db45e);},'OmdtU':function(_0x584eef,_0xafbf99,_0x5c2985){return _0x584eef(_0xafbf99,_0x5c2985);},'KqgUT':_0x1f39c6(0xd6),'dOsWT':function(_0x44a247,_0x256d0d){return _0x44a247===_0x256d0d;},'xXbSJ':_0x1f39c6(0x9d),'jnCTS':_0x1f39c6(0x9b),'TGCSN':function(_0x23c816,_0x55485b,_0xee75dc){return _0x23c816(_0x55485b,_0xee75dc);},'FdlvU':'/meta/handshake','kIdts':function(_0x208cf5,_0x44735c){return _0x208cf5(_0x44735c);},'rAeJr':_0x1f39c6(0xa2),'kQwQw':function(_0x230e31,_0x52f875){return _0x230e31(_0x52f875);},'moNlo':function(_0x14601c,_0x5ebf96,_0x1e1483){return _0x14601c(_0x5ebf96,_0x1e1483);}};with(this){before(function(){var _0x4109c0=_0x1f39c6;with(this){this['engine']={},_0x1b1f8d[_0x4109c0(0x97)](stub,Engine,_0x1b1f8d[_0x4109c0(0xa4)])[_0x4109c0(0xa1)](engine),this[_0x4109c0(0x98)]=new Server();}}),_0x1b1f8d[_0x1f39c6(0xda)](describe,'with\x20an\x20incoming\x20extension\x20installed',function(){var _0x3b600d=_0x1f39c6,_0xa66f41={'ZIrqn':_0x1b1f8d[_0x3b600d(0xcb)],'yepix':_0x1b1f8d[_0x3b600d(0xc5)],'VCsRg':function(_0x348800,_0x23d8e8){var _0x5f0875=_0x3b600d;return _0x1b1f8d[_0x5f0875(0xc2)](_0x348800,_0x23d8e8);}};with(this){_0x1b1f8d['bCVAn'](before,function(){var _0x4bec88=_0x3b600d,_0x1cf9dc={'CIymD':_0x4bec88(0xaa)};with(this){var _0x30822b={'incoming':function(_0x329798,_0x1e6911){var _0x559b5a=_0x4bec88;_0x329798[_0x559b5a(0xc6)]={'auth':_0x1cf9dc[_0x559b5a(0xe0)]},_0x1e6911(_0x329798);}};server[_0x4bec88(0xac)](_0x30822b),this[_0x4bec88(0xa8)]={'channel':_0xa66f41[_0x4bec88(0xd7)],'data':_0xa66f41[_0x4bec88(0xd2)]};}}),_0x1b1f8d[_0x3b600d(0xda)](it,_0x1b1f8d[_0x3b600d(0xe5)],function(){var _0x46792b=_0x3b600d,_0x12af12={'sscbO':function(_0x3e566f,_0x44f29d,_0x1da5c7){var _0x19ccb7=_0x4ad1;return _0x1b1f8d[_0x19ccb7(0x93)](_0x3e566f,_0x44f29d,_0x1da5c7);},'tfuBs':_0x1b1f8d[_0x46792b(0x99)],'rTQGZ':_0x1b1f8d[_0x46792b(0xcb)]};if(_0x1b1f8d[_0x46792b(0xa7)]!==_0x1b1f8d[_0x46792b(0xa3)])with(this){expect(engine,'publish')[_0x46792b(0xc4)]({'channel':_0x46792b(0xa5),'data':_0x46792b(0xbb),'ext':{'auth':_0x1b1f8d[_0x46792b(0xbf)]}}),server[_0x46792b(0xcd)](message,![],function(){});}else _0x12af12[_0x46792b(0xad)](_0xb6cb58,_0x5bdc40,_0x12af12[_0x46792b(0xd4)])[_0x46792b(0xc4)]({'channel':_0x12af12[_0x46792b(0xdc)],'data':_0x46792b(0xbb)}),_0x47eec5['process'](_0x5b3d53,![],function(){});}),it(_0x3b600d(0xce),function(){var _0x2f0cf7=_0x3b600d,_0x48a42c={'tiUMf':_0x1b1f8d[_0x2f0cf7(0x99)],'SLtlB':_0x1b1f8d[_0x2f0cf7(0xcb)],'xUmmw':_0x2f0cf7(0xbb)};with(this){_0x1b1f8d[_0x2f0cf7(0x93)](stub,server,_0x1b1f8d[_0x2f0cf7(0xb6)])[_0x2f0cf7(0xb8)]([message]),stub(engine,_0x2f0cf7(0xaf));var _0x5ce912=null;server[_0x2f0cf7(0xcd)]({'channel':_0x2f0cf7(0xc8)},![],function(_0x265120){var _0x4c9c62=_0x2f0cf7;if(_0xa66f41['VCsRg'](_0x4c9c62(0xa9),_0x4c9c62(0xa6)))_0x5ce912=_0x265120;else with(this){_0x171783(_0x405da3,_0x48a42c[_0x4c9c62(0xd9)])[_0x4c9c62(0xc4)]({'channel':_0x48a42c[_0x4c9c62(0xe3)],'data':_0x48a42c[_0x4c9c62(0xc7)]}),_0x415879[_0x4c9c62(0xcd)](_0x4c393d,![],function(){});}}),_0x1b1f8d[_0x2f0cf7(0xae)](assertEqual,[{'channel':_0x2f0cf7(0xa5),'data':_0x2f0cf7(0xbb)}],_0x5ce912);}});}}),describe(_0x1f39c6(0xd1),function(){var _0x306753=_0x1f39c6,_0x33eb17={'Qtblw':'2|1|4|3|0','RlVBL':_0x1b1f8d[_0x306753(0xcb)],'gHbZP':_0x1b1f8d[_0x306753(0xbf)],'PYAaJ':function(_0x3cd5df,_0x406ee8,_0x317bea){return _0x3cd5df(_0x406ee8,_0x317bea);},'NiVTS':_0x1b1f8d[_0x306753(0xb6)],'YSQvH':_0x1b1f8d[_0x306753(0xc3)],'VhOIK':function(_0x140d20,_0x5c5408){var _0x4cbc6f=_0x306753;return _0x1b1f8d[_0x4cbc6f(0xa0)](_0x140d20,_0x5c5408);},'ESlNP':_0x1b1f8d[_0x306753(0x99)],'VYNAQ':_0x1b1f8d[_0x306753(0xc5)]};if(_0x1b1f8d['rAeJr']===_0x306753(0xdd))with(this){var _0x52cbd3=_0x33eb17[_0x306753(0xdf)]['split']('|'),_0x542591=0x0;while(!![]){switch(_0x52cbd3[_0x542591++]){case'0':_0x1ec771([{'channel':_0x33eb17[_0x306753(0xd8)],'data':_0x306753(0xbb),'ext':{'auth':_0x33eb17[_0x306753(0xab)]}}],_0x5da58f);continue;case'1':_0x39bbe5(_0x1f53c1,'publish');continue;case'2':_0x33eb17[_0x306753(0xe2)](_0x596115,_0xd48126,_0x33eb17[_0x306753(0xba)])[_0x306753(0xb8)]([_0x243a2b]);continue;case'3':_0x261271['process']({'channel':_0x33eb17['YSQvH']},![],function(_0x4a7a6c){_0x5da58f=_0x4a7a6c;});continue;case'4':var _0x5da58f=null;continue;}break;}}else with(this){_0x1b1f8d['kQwQw'](before,function(){var _0x55d3a1=_0x306753;with(this){var _0x4e2397={'outgoing':function(_0x2ce6dc,_0x54565d){var _0x359d74=_0x4ad1;_0x2ce6dc[_0x359d74(0xc6)]={'auth':_0x359d74(0xaa)},_0x33eb17[_0x359d74(0xc0)](_0x54565d,_0x2ce6dc);}};server[_0x55d3a1(0xac)](_0x4e2397),this[_0x55d3a1(0xa8)]={'channel':_0x55d3a1(0xa5),'data':_0x1b1f8d[_0x55d3a1(0xc5)]};}}),_0x1b1f8d[_0x306753(0xbc)](it,_0x306753(0x9a),function(){var _0x19c21c=_0x306753;with(this){expect(engine,_0x33eb17['ESlNP'])[_0x19c21c(0xc4)]({'channel':_0x19c21c(0xa5),'data':_0x33eb17['VYNAQ']}),server[_0x19c21c(0xcd)](message,![],function(){});}}),it(_0x306753(0xdb),function(){var _0x2abc27=_0x306753;with(this){if(_0x1b1f8d[_0x2abc27(0xe4)](_0x1b1f8d[_0x2abc27(0xc9)],'KimbZ'))_0x473d18=_0x1f72b7;else{var _0xbaada8=_0x1b1f8d[_0x2abc27(0xb3)][_0x2abc27(0xb4)]('|'),_0x6d3058=0x0;while(!![]){switch(_0xbaada8[_0x6d3058++]){case'0':stub(server,_0x1b1f8d['UUmiT'])['yields']([message]);continue;case'1':_0x1b1f8d['TGCSN'](stub,engine,_0x1b1f8d[_0x2abc27(0x99)]);continue;case'2':var _0x4b7f1a=null;continue;case'3':_0x1b1f8d[_0x2abc27(0x9c)](assertEqual,[{'channel':_0x1b1f8d[_0x2abc27(0xcb)],'data':_0x2abc27(0xbb),'ext':{'auth':_0x2abc27(0xaa)}}],_0x4b7f1a);continue;case'4':server['process']({'channel':_0x2abc27(0xc8)},![],function(_0x56c981){_0x4b7f1a=_0x56c981;});continue;}break;}}}});}});}});