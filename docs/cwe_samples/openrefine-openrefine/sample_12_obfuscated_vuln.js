const _0x19eb16=_0x5172;(function(_0x55a91e,_0x3c0184){const _0x2e37ad=_0x5172,_0x495dd5=_0x55a91e();while(!![]){try{const _0x26046e=parseInt(_0x2e37ad(0x92))/0x1*(-parseInt(_0x2e37ad(0xe6))/0x2)+parseInt(_0x2e37ad(0xda))/0x3+-parseInt(_0x2e37ad(0x106))/0x4*(-parseInt(_0x2e37ad(0x107))/0x5)+parseInt(_0x2e37ad(0xeb))/0x6+-parseInt(_0x2e37ad(0xe0))/0x7*(parseInt(_0x2e37ad(0x9c))/0x8)+parseInt(_0x2e37ad(0xac))/0x9*(parseInt(_0x2e37ad(0xc9))/0xa)+-parseInt(_0x2e37ad(0xc0))/0xb;if(_0x26046e===_0x3c0184)break;else _0x495dd5['push'](_0x495dd5['shift']());}catch(_0x1ec0f3){_0x495dd5['push'](_0x495dd5['shift']());}}}(_0x29b7,0xb13ca));import{createHash}from'node:crypto';import{mkdir,readFile,writeFile}from'node:fs/promises';import{dirname,extname,resolve,relative}from'node:path';import{fileURLToPath}from'node:url';import{doesFileExist,scanDirectory}from'./fs.mjs';function _0x29b7(){const _0x3df69e=['17048801IECKyb','wQZXq','allowInlineStyles','xwzFI','\x22,\x20expected\x20\x22','SRI\x20hash\x20mismatch\x20for\x20\x22','bMEzN','all','status','4732350AjXLjd','/@vite/','exec','keys','yaGwW','\x20(inline\x20','Cfdkd','EHuMB','iSHAP','stringify','from','xsAIO','join','ext','enableMiddleware','cIjdH','hwJjR','2237901TeeEtJ','BWwle','VNgVM','AwPdt','nsDyO','\x0a\x09\x09\x09\x09\x27','19852HtETwT','GnqZh','],\x0a\x09\x09}','headers','\x20are\x20disabled)','warn','6SiFdMD','bTSKV','rwvlo','CXeAh','virtual:@kindspells/astro-shield/middleware','4003248HcCfFZ','scripts','LYLDP','enableStatic','kJgGH','set','rdARi','src2','includes','YTUOE','LgihW','test','pqEdH','perResourceSriHashes','KpVfI','sha256-','Unable\x20to\x20process\x20external\x20resource:\x20\x22','VbztY','XaLis','\x27:\x20{\x0a\x09\x09\x09scripts:\x20[','tMsWq','vite-plugin-astro-shield','inline','lglyz','\x09}),\x0a}\x0a','allowInlineScripts','KPdlD','3612zYJXej','5175WadlCa','OiEbh','.css','hashesModule','TPCsa','startsWith','\x27:\x20\x27','OJRXJ','Hashes','NJqpe','export\x20const\x20extStyleHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','PoSIa','get','Skipping\x20SRI\x20hash\x20generation\x20for\x20inline\x20','has','nwAtN','WPXli','eBjEC','dlbUb','QFgfm','\x20crossorigin=\x22anonymous\x22','//\x20Do\x20not\x20edit\x20this\x20file\x20manually\x0a\x0a','uVbGq','getMiddlewareHandler','.js','extStyleHashes','sort','NBWGL','iVZNH','KkUpz','http','VUpCj','toLowerCase','src1','MYriP','kmQXw','DfDQy','<script','Script','export\x20const\x20inlineScriptHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','entries','ImpFe','\x0atry\x20{\x0a\x09if\x20(perResourceSriHashes)\x20{\x0a\x09\x09for\x20(const\x20[key,\x20value]\x20of\x20Object.entries(\x0a\x09\x09\x09perResourceSriHashes.scripts\x20??\x20{},\x0a\x09\x09))\x20{\x0a\x09\x09\x09globalHashes.scripts.set(key,\x20value)\x0a\x09\x09}\x0a\x09\x09for\x20(const\x20[key,\x20value]\x20of\x20Object.entries(\x0a\x09\x09\x09perResourceSriHashes.styles\x20??\x20{},\x0a\x09\x09))\x20{\x0a\x09\x09\x09globalHashes.styles.set(key,\x20value)\x0a\x09\x09}\x0a\x09}\x0a}\x20catch\x20(err)\x20{\x0a\x09console.error(\x27Failed\x20to\x20load\x20static\x20hashes\x20module:\x27,\x20err)\x0a}\x0a','RatRS','ylsGH','pzaaR','\x22\x20(inline\x20','groups','Zdtsp','?astro&type=','xqKGj','sha256','inlineStyleHashes','export\x20const\x20inlineStyleHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','map','SYvxI','bsEfL','repAI','\x20integrity=\x22','export\x20const\x20perPageSriHashes\x20=\x0a\x09/**\x20@type\x20{Record<string,\x20{\x20scripts:\x20string[];\x20styles:\x20string\x20[]\x20}>}\x20*/\x20({','\x0a\x0a\x09return\x20defineMiddleware(','bWgCr','The\x20SRI\x20hashes\x20module\x20\x22','jnRmL','\x0aimport\x20{\x20defineMiddleware\x20}\x20from\x20\x27astro/middleware\x27\x0aimport\x20{\x20getGlobalHashes\x20}\x20from\x20\x27@kindspells/astro-shield/state\x27\x0aimport\x20{\x20','TeSOH','lugja','xnEjy','xvqPE','OwjeH','integrity1','}\x0a)\x0a\x0a','JjeQM','replace','])\x0a\x0a','add','<style','qcfSU','JzkMM','inlineScriptHashes','Unable\x20to\x20obtain\x20SRI\x20hash\x20for\x20local\x20resource:\x20\x22','\x0a\x09\x09\x27','statusText','Qqjap','rFTeh','extScriptHashes','post','oxClB','gzlBZ','oCYkG','YOBHb','export\x20const\x20extScriptHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','xtHsg','.mjs','32358qbodwL','MSvKz',')\x0a})()\x0a','\x20}\x20from\x20\x27@kindspells/astro-shield/core\x27\x0a','integrity2','length','base64','pnMTw','\x22\x20but\x20got\x20\x22','indexOf','1264cHLBPr','HVrEv','getCSPMiddlewareHandler','scriptsAllowListUrls','JvMdF','\x27,\x0a','SRI\x20hashes\x20have\x20changed\x20for\x20static\x20resources\x20that\x20may\x20be\x20used\x20in\x20dynamic\x20pages.\x20You\x20should\x20run\x20the\x20build\x20step\x20again','tjgSs','aWrmC','iAyAy','AxOxZ','digest','nkAZk','arrayBuffer','RQugD','ewavd','9iIZDFW','styles','],\x0a\x09\x09\x09styles:\x20[','perPageSriHashes','utf8','text','Style','IXxIe','ZxXSU','\x0a\x0aexport\x20const\x20onRequest\x20=\x20await\x20(async\x20()\x20=>\x20{\x0a\x09const\x20globalHashes\x20=\x20await\x20getGlobalHashes()\x0a\x0a\x09','.html','update','\x0a\x09\x09\x09','attrs','EoplC','OHHGO','nbVBq','\x0a\x09\x27','bEGRI','<link'];_0x29b7=function(){return _0x3df69e;};return _0x29b7();}import{patchHeaders}from'./headers.mjs';export const generateSRIHash=_0x24731=>{const _0x10cb61=_0x5172,_0x520092={'zrpYO':_0x10cb61(0x13a),'yaGwW':function(_0x2059ba,_0x51b3e1){return _0x2059ba instanceof _0x51b3e1;},'ImpFe':function(_0x7de914,_0x3d26f4){return _0x7de914 instanceof _0x3d26f4;}},_0x40e6aa=createHash(_0x520092['zrpYO']);if(_0x520092[_0x10cb61(0xcd)](_0x24731,ArrayBuffer))_0x40e6aa[_0x10cb61(0xb7)](Buffer[_0x10cb61(0xd3)](_0x24731));else _0x520092[_0x10cb61(0x130)](_0x24731,Buffer)?_0x40e6aa['update'](_0x24731):_0x40e6aa[_0x10cb61(0xb7)](_0x24731,_0x10cb61(0xb0));return _0x10cb61(0xfa)+_0x40e6aa[_0x10cb61(0xa7)](_0x10cb61(0x98));};const scriptReplacer=(_0x2190bb,_0x15ab96,_0x1f5c65,_0x40be1d)=>_0x19eb16(0x12c)+_0x15ab96+(_0x2190bb!==null?_0x19eb16(0x6e)+_0x2190bb+'\x22':'')+(_0x1f5c65?_0x19eb16(0x11b):'')+'>'+(_0x40be1d??'')+'</script>',styleReplacer=(_0x3ad99a,_0x248c02,_0x385b1f,_0x2d50d5)=>_0x19eb16(0x80)+_0x248c02+(_0x3ad99a!==null?_0x19eb16(0x6e)+_0x3ad99a+'\x22':'')+(_0x385b1f?_0x19eb16(0x11b):'')+'>'+(_0x2d50d5??'')+'</style>',linkStyleReplacer=(_0x37f7e3,_0x4dad3c,_0x3391df)=>_0x19eb16(0xbf)+_0x4dad3c+(_0x37f7e3!==null?_0x19eb16(0x6e)+_0x37f7e3+'\x22':'')+(_0x3391df?_0x19eb16(0x11b):'')+'/>',srcRegex=/\s+(src|href)\s*=\s*("(?<src1>.*?)"|'(?<src2>.*?)')/i,integrityRegex=/\s+integrity\s*=\s*("(?<integrity1>.*?)"|'(?<integrity2>.*?)')/i,relStylesheetRegex=/\s+rel\s*=\s*('stylesheet'|"stylesheet")/i,getRegexProcessors=()=>{const _0x37574b=_0x19eb16,_0x1d90a1={'UtBPj':_0x37574b(0x12d),'Qqjap':_0x37574b(0xec),'rFTeh':_0x37574b(0xb2)};return[{'t':_0x1d90a1['UtBPj'],'t2':_0x1d90a1[_0x37574b(0x87)],'regex':/<script(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*>(?<content>[\s\S]*?)<\/\s*script\s*>/gi,'replacer':scriptReplacer,'hasContent':!![],'attrsRegex':undefined},{'t':_0x1d90a1[_0x37574b(0x88)],'t2':_0x37574b(0xad),'regex':/<style(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*>(?<content>[\s\S]*?)<\/\s*style\s*>/gi,'replacer':styleReplacer,'hasContent':!![],'attrsRegex':undefined},{'t':_0x1d90a1[_0x37574b(0x88)],'t2':'styles','regex':/<link(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*\/?>/gi,'replacer':linkStyleReplacer,'hasContent':![],'attrsRegex':relStylesheetRegex}];};export const updateStaticPageSriHashes=async(_0x48b82d,_0x5393a5,_0x36ce87,_0xc0653e,_0x2fa095,_0x3f4744='all',_0x21a543=_0x19eb16(0xc7))=>{const _0x1cf532=_0x19eb16,_0x26054a={'hwJjR':function(_0x382f20,_0x170cb9){return _0x382f20(_0x170cb9);},'VNgVM':function(_0x5ecc0f){return _0x5ecc0f();},'rwvlo':function(_0x13bf4a,_0x420ff2){return _0x13bf4a!==_0x420ff2;},'SCiqJ':'wgUzL','repAI':_0x1cf532(0x119),'WPXli':'GET','pqEdH':function(_0x23a975,_0x4d4ca6){return _0x23a975===_0x4d4ca6;},'iAyAy':'Style','KpVfI':_0x1cf532(0xa3),'QFgfm':function(_0x3d6f24,_0x5b6647){return _0x3d6f24(_0x5b6647);},'rGcwc':function(_0x21bc93,_0x4a6131,_0x40b413,_0xce2812,_0x5bde0b){return _0x21bc93(_0x4a6131,_0x40b413,_0xce2812,_0x5bde0b);}},_0x31d12a=_0x26054a[_0x1cf532(0xdc)](getRegexProcessors),_0x346ad=_0x2fa095[_0x1cf532(0xaf)][_0x1cf532(0x113)](_0x36ce87)??{'scripts':new Set(),'styles':new Set()};_0x2fa095[_0x1cf532(0xaf)][_0x1cf532(0xf0)](_0x36ce87,_0x346ad);let _0x1f38e3=_0xc0653e,_0x11b9fd;for(const {attrsRegex:_0x5291d8,hasContent:_0x21053e,regex:_0x5d9269,replacer:_0x2e4b59,t:_0x39d8b6,t2:_0x10bb92}of _0x31d12a){if(_0x26054a[_0x1cf532(0xe8)](_0x1cf532(0xc1),_0x26054a['SCiqJ']))while((_0x11b9fd=_0x5d9269[_0x1cf532(0xcb)](_0xc0653e))!==null){const _0x3f920d=_0x11b9fd[_0x1cf532(0x136)]?.[_0x1cf532(0xb9)]??'',_0x4da31a=_0x11b9fd[_0x1cf532(0x136)]?.['content']??'';let _0x3a27e3=undefined,_0x5d03fb=![];if(_0x3f920d){if(_0x5291d8&&!_0x5291d8[_0x1cf532(0xf6)](_0x3f920d))continue;const _0x2a32eb=srcRegex[_0x1cf532(0xcb)](_0x3f920d),_0x5ac23e=integrityRegex[_0x1cf532(0xcb)](_0x3f920d),_0x56a829=_0x2a32eb?.['groups']?.[_0x1cf532(0x128)]??_0x2a32eb?.[_0x1cf532(0x136)]?.[_0x1cf532(0xf2)]??'';if(_0x5ac23e){_0x3a27e3=_0x5ac23e[_0x1cf532(0x136)]?.['integrity1']??_0x5ac23e['groups']?.[_0x1cf532(0x96)];if(_0x3a27e3){;(_0x2a32eb?_0x2fa095[_0x1cf532(0xd6)+_0x39d8b6+_0x1cf532(0x10f)]:_0x2fa095[_0x1cf532(0x101)+_0x39d8b6+_0x1cf532(0x10f)])['add'](_0x3a27e3),_0x346ad[_0x10bb92][_0x1cf532(0x7f)](_0x3a27e3);_0x56a829&&_0x2fa095[_0x1cf532(0xf8)][_0x10bb92][_0x1cf532(0xf0)](_0x56a829,_0x3a27e3);continue;}}if(_0x56a829){const _0x55587f=_0x2fa095[_0x1cf532(0xf8)][_0x10bb92]['get'](_0x56a829);if(_0x55587f)_0x3a27e3=_0x55587f,_0x2fa095['ext'+_0x39d8b6+_0x1cf532(0x10f)][_0x1cf532(0x7f)](_0x3a27e3),_0x346ad[_0x10bb92][_0x1cf532(0x7f)](_0x3a27e3);else{if(_0x26054a[_0x1cf532(0x6d)]!==_0x1cf532(0x118)){let _0x2cb62b;if(_0x56a829[_0x1cf532(0x10c)]('/')){const _0x42163e=resolve(_0x5393a5,'.'+_0x56a829);_0x2cb62b=await readFile(_0x42163e);}else{if(_0x56a829['startsWith'](_0x1cf532(0x125))){_0x5d03fb=!![];const _0x1d7b9f=await fetch(_0x56a829,{'method':_0x26054a[_0x1cf532(0x117)]});_0x2cb62b=await _0x1d7b9f['arrayBuffer']();}else{_0x48b82d['warn'](_0x1cf532(0xfb)+_0x56a829+'\x22');continue;}}_0x3a27e3=generateSRIHash(_0x2cb62b),_0x2fa095[_0x1cf532(0xd6)+_0x39d8b6+_0x1cf532(0x10f)][_0x1cf532(0x7f)](_0x3a27e3),_0x346ad[_0x10bb92]['add'](_0x3a27e3),_0x2fa095[_0x1cf532(0xf8)][_0x10bb92][_0x1cf532(0xf0)](_0x56a829,_0x3a27e3);}else _0x4006fa=_0x26054a[_0x1cf532(0xd9)](_0x5ce4af,_0x3711d7),_0x4a5889[_0x1cf532(0x101)+_0x50304f+_0x1cf532(0x10f)][_0x1cf532(0x7f)](_0x1e8b88),_0x2fb1f7[_0x5d48fe][_0x1cf532(0x7f)](_0x547fd5);}}}_0x21053e&&!_0x3a27e3&&(!(_0x3f4744===![]&&_0x26054a[_0x1cf532(0xf7)](_0x39d8b6,_0x1cf532(0x12d)))&&!(_0x21a543===![]&&_0x26054a[_0x1cf532(0xf7)](_0x39d8b6,_0x26054a[_0x1cf532(0xa5)]))?_0x26054a['KpVfI']!==_0x26054a[_0x1cf532(0xf9)]?_0x43496f=!![]:(_0x3a27e3=_0x26054a[_0x1cf532(0x11a)](generateSRIHash,_0x4da31a),_0x2fa095[_0x1cf532(0x101)+_0x39d8b6+_0x1cf532(0x10f)][_0x1cf532(0x7f)](_0x3a27e3),_0x346ad[_0x10bb92][_0x1cf532(0x7f)](_0x3a27e3)):_0x48b82d[_0x1cf532(0xe5)](_0x1cf532(0x114)+_0x39d8b6[_0x1cf532(0x127)]()+'\x20\x22'+_0x36ce87+_0x1cf532(0x135)+_0x10bb92+_0x1cf532(0xe4))),_0x3a27e3&&(_0x1f38e3=_0x1f38e3[_0x1cf532(0x7d)](_0x11b9fd[0x0],_0x26054a['rGcwc'](_0x2e4b59,_0x3a27e3,_0x3f920d,_0x5d03fb,_0x4da31a)));}else _0x31a203[_0x4810e7][_0x1cf532(0x7f)](_0x302e52);}return _0x1f38e3;};function _0x5172(_0x469d8c,_0x3fdd06){const _0x29b742=_0x29b7();return _0x5172=function(_0x517230,_0x37f14b){_0x517230=_0x517230-0x68;let _0x572e90=_0x29b742[_0x517230];return _0x572e90;},_0x5172(_0x469d8c,_0x3fdd06);}export const updateDynamicPageSriHashes=async(_0x7cc1e0,_0x104004,_0x375412,_0x5d0b5a)=>{const _0x3969f7=_0x19eb16,_0x39e5f8={'xsAIO':function(_0x148315,_0xaf448a,_0x313cda,_0x437501,_0x5c38ff){return _0x148315(_0xaf448a,_0x313cda,_0x437501,_0x5c38ff);},'btBIv':function(_0x150be6){return _0x150be6();},'JjeQM':function(_0x41fd65,_0x386e55){return _0x41fd65!==_0x386e55;},'bTSKV':_0x3969f7(0x134),'Cfdkd':_0x3969f7(0xe1),'qcfSU':function(_0x3039c1,_0x1e28d9){return _0x3039c1===_0x1e28d9;},'NJqpe':_0x3969f7(0x6b),'RQugD':'urvXc','kJgGH':_0x3969f7(0x8b),'AxOxZ':function(_0x4fc98d,_0x3b2aa8){return _0x4fc98d===_0x3b2aa8;},'IXxIe':function(_0x2f9df5,_0x12088d){return _0x2f9df5!==_0x12088d;},'FXuCF':_0x3969f7(0x75),'KHNKM':_0x3969f7(0xed),'uVbGq':'Found\x20empty\x20integrity\x20attribute,\x20skipping...','MatGB':'/@fs/','LgihW':_0x3969f7(0x125),'JzkMM':function(_0x2d0ce6,_0x2d5307,_0x58f9b8,_0x18a24d,_0xe2260d){return _0x2d0ce6(_0x2d5307,_0x58f9b8,_0x18a24d,_0xe2260d);},'RatRS':function(_0x32ae08,_0x39309a){return _0x32ae08===_0x39309a;},'xwzFI':_0x3969f7(0xc7),'iSHAP':'Style','bsEfL':function(_0x343212,_0x56339c){return _0x343212(_0x56339c);}},_0x89d77e=_0x39e5f8['btBIv'](getRegexProcessors);let _0x322eb7=_0x104004,_0x564609;const _0x4025e6={'scripts':new Set(),'styles':new Set()};for(const {attrsRegex:_0x282d9d,hasContent:_0x21e90a,regex:_0x112492,replacer:_0x3bb686,t:_0x30d3a4,t2:_0x18537e}of _0x89d77e){while(_0x39e5f8[_0x3969f7(0x7c)](_0x564609=_0x112492[_0x3969f7(0xcb)](_0x104004),null)){if(_0x39e5f8['JjeQM'](_0x39e5f8[_0x3969f7(0xe7)],_0x39e5f8[_0x3969f7(0xcf)])){const _0x524a50=_0x564609[_0x3969f7(0x136)]?.[_0x3969f7(0xb9)]??'',_0x1e8489=_0x564609[_0x3969f7(0x136)]?.['content']??'';let _0x1e3425=undefined,_0x3ce43c=![];if(_0x524a50){if(_0x39e5f8[_0x3969f7(0x81)](_0x39e5f8[_0x3969f7(0x110)],_0x39e5f8[_0x3969f7(0xaa)]))_0x4a34f9=_0x4296ab['replace'](_0x9e2583[0x0],_0x39e5f8['xsAIO'](_0x27dc30,_0x1996fe,_0x5cac62,_0x19aae6,_0x261bcb));else{if(_0x282d9d&&!_0x282d9d['test'](_0x524a50))continue;const _0x3ed587=srcRegex[_0x3969f7(0xcb)](_0x524a50),_0x1bf296=integrityRegex[_0x3969f7(0xcb)](_0x524a50),_0x225e83=_0x3ed587?.[_0x3969f7(0x136)]?.[_0x3969f7(0x128)]??_0x3ed587?.[_0x3969f7(0x136)]?.['src2'];if(_0x1e8489&&_0x225e83){_0x7cc1e0[_0x3969f7(0xe5)]('scripts\x20must\x20have\x20either\x20a\x20src\x20attribute\x20or\x20content,\x20but\x20not\x20both\x20\x22'+_0x225e83+'\x22');continue;}if(_0x1bf296){if(_0x39e5f8['kJgGH']!==_0x39e5f8[_0x3969f7(0xef)]){if(_0xe2cf45['styles'][_0x16a1bb]!==_0x43c825)return![];}else{_0x1e3425=_0x1bf296[_0x3969f7(0x136)]?.[_0x3969f7(0x7a)]??_0x1bf296['groups']?.[_0x3969f7(0x96)];if(_0x1e3425){if(_0x225e83){if(_0x39e5f8[_0x3969f7(0xa6)](_0x3969f7(0x76),_0x3969f7(0x137)))_0x454276[_0x3969f7(0xb7)](_0x33bbe3[_0x3969f7(0xd3)](_0xe29b46));else{const _0x2a6edb=_0x375412[_0x18537e]['get'](_0x225e83);if(_0x2a6edb){if(_0x39e5f8[_0x3969f7(0xb3)](_0x2a6edb,_0x1e3425)){if(_0x39e5f8[_0x3969f7(0xa6)](_0x39e5f8['FXuCF'],_0x39e5f8['KHNKM']))_0x34ad38[_0x3969f7(0xe5)](_0x3969f7(0xa2));else throw new Error(_0x3969f7(0xc5)+_0x225e83+'\x22,\x20expected\x20\x22'+_0x2a6edb+_0x3969f7(0x9a)+_0x1e3425+'\x22');}}else _0x375412[_0x18537e][_0x3969f7(0xf0)](_0x225e83,_0x1e3425);}}_0x4025e6[_0x18537e]['add'](_0x1e3425);}else _0x7cc1e0[_0x3969f7(0xe5)](_0x39e5f8[_0x3969f7(0x11d)]);continue;}}if(_0x225e83){if(_0x225e83['startsWith']('/')){_0x1e3425=_0x375412[_0x18537e][_0x3969f7(0x113)](_0x225e83);if(_0x1e3425)_0x4025e6[_0x18537e][_0x3969f7(0x7f)](_0x1e3425);else{!(_0x225e83[_0x3969f7(0x10c)](_0x3969f7(0xca))||_0x225e83[_0x3969f7(0x10c)](_0x39e5f8['MatGB'])||_0x225e83[_0x3969f7(0x9b)](_0x3969f7(0x138))>=0x0)&&_0x7cc1e0['warn'](_0x3969f7(0x84)+_0x225e83+'\x22');continue;}}else{if(_0x225e83['startsWith'](_0x39e5f8[_0x3969f7(0xf5)])){_0x3ce43c=!![],_0x1e3425=_0x375412[_0x18537e][_0x3969f7(0x113)](_0x225e83);if(_0x1e3425)_0x4025e6[_0x18537e][_0x3969f7(0x7f)](_0x1e3425);else{_0x7cc1e0[_0x3969f7(0xe5)]('Detected\x20reference\x20to\x20not-allow-listed\x20external\x20resource\x20\x22'+_0x225e83+'\x22');_0x3ce43c&&(_0x322eb7=_0x322eb7[_0x3969f7(0x7d)](_0x564609[0x0],_0x39e5f8[_0x3969f7(0x82)](_0x3bb686,null,_0x524a50,!![],'')));continue;}}else{_0x7cc1e0[_0x3969f7(0xe5)](_0x3969f7(0xfb)+_0x225e83+'\x22');continue;}}}}}_0x21e90a&&!_0x1e3425&&(_0x39e5f8[_0x3969f7(0x132)](_0x5d0b5a?.[_0x3969f7(0x104)]??_0x39e5f8[_0x3969f7(0xc3)],'all')&&_0x30d3a4==='Script'||(_0x5d0b5a?.[_0x3969f7(0xc2)]??_0x3969f7(0xc7))===_0x3969f7(0xc7)&&_0x30d3a4===_0x39e5f8[_0x3969f7(0xd1)]?(_0x1e3425=_0x39e5f8[_0x3969f7(0x6c)](generateSRIHash,_0x1e8489),_0x4025e6[_0x18537e][_0x3969f7(0x7f)](_0x1e3425)):_0x7cc1e0[_0x3969f7(0xe5)](_0x3969f7(0x114)+_0x30d3a4[_0x3969f7(0x127)]()+_0x3969f7(0xce)+_0x18537e+_0x3969f7(0xe4))),_0x1e3425&&(_0x322eb7=_0x322eb7['replace'](_0x564609[0x0],_0x39e5f8[_0x3969f7(0xd4)](_0x3bb686,_0x1e3425,_0x524a50,_0x3ce43c,_0x1e8489)));}else throw new _0x472fec('SRI\x20hash\x20mismatch\x20for\x20\x22'+_0x5cba42+_0x3969f7(0xc4)+_0x576ed8+_0x3969f7(0x9a)+_0x3247e3+'\x22');}}return{'pageHashes':_0x4025e6,'updatedContent':_0x322eb7};};const processHTMLFile=async(_0x4e29e,_0x3d4d68,_0x2a46fb,_0x1c497a,_0x3e4e68)=>{const _0x2f8df4=_0x19eb16,_0x439068={'MMVRA':function(_0x132735,_0x555458,_0x2594af){return _0x132735(_0x555458,_0x2594af);},'nsDyO':_0x2f8df4(0xc7)},_0x57b37c=await readFile(_0x3d4d68,_0x2f8df4(0xb0)),_0x28e3da=await updateStaticPageSriHashes(_0x4e29e,_0x2a46fb,_0x439068['MMVRA'](relative,_0x2a46fb,_0x3d4d68),_0x57b37c,_0x1c497a,_0x3e4e68?.[_0x2f8df4(0x104)]??'all',_0x3e4e68?.['allowInlineStyles']??_0x439068[_0x2f8df4(0xde)]);_0x28e3da!==_0x57b37c&&await writeFile(_0x3d4d68,_0x28e3da);};export const arraysEqual=(_0x3dae02,_0x41b7f9)=>{const _0x4909f9=_0x19eb16;if(_0x3dae02[_0x4909f9(0x97)]!==_0x41b7f9['length'])return![];for(let _0x49f6f1=0x0;_0x49f6f1<_0x3dae02['length'];_0x49f6f1++){if(_0x3dae02[_0x49f6f1]!==_0x41b7f9[_0x49f6f1])return![];}return!![];};export const pageHashesEqual=(_0x1459b6,_0x4e72d5)=>{const _0x54a221=_0x19eb16,_0x4ce8f6={'tMsWq':function(_0x344230,_0x386668,_0x571971){return _0x344230(_0x386668,_0x571971);}},_0x50b576=Object['keys'](_0x1459b6)[_0x54a221(0x121)](),_0x55f1ac=Object['keys'](_0x4e72d5)[_0x54a221(0x121)]();if(!_0x4ce8f6[_0x54a221(0xff)](arraysEqual,_0x50b576,_0x55f1ac))return![];for(const [_0x301ecd,_0x7c3e8c]of Object[_0x54a221(0x12f)](_0x1459b6)){const _0x548323=_0x4e72d5[_0x301ecd];if(!_0x548323)return![];if(!arraysEqual(_0x7c3e8c['scripts'],_0x548323[_0x54a221(0xec)])||!_0x4ce8f6[_0x54a221(0xff)](arraysEqual,_0x7c3e8c[_0x54a221(0xad)],_0x548323[_0x54a221(0xad)]))return![];}return!![];};export const sriHashesEqual=(_0x320c94,_0x5e464b)=>{const _0x146c83=_0x19eb16,_0x2a4e17={'OiEbh':function(_0x1fc92a,_0x3e2598,_0x379dc9){return _0x1fc92a(_0x3e2598,_0x379dc9);},'KPdlD':function(_0x47cb7f,_0x205f07){return _0x47cb7f!==_0x205f07;},'TPCsa':function(_0x19112a,_0x57d66c){return _0x19112a!==_0x57d66c;},'MYriP':_0x146c83(0xc6),'AwPdt':_0x146c83(0x90)},_0x491238=Object[_0x146c83(0xcc)](_0x320c94['scripts'])[_0x146c83(0x121)](),_0x1f8126=Object[_0x146c83(0xcc)](_0x5e464b['scripts'])[_0x146c83(0x121)](),_0x548f13=Object[_0x146c83(0xcc)](_0x320c94[_0x146c83(0xad)])[_0x146c83(0x121)](),_0x4e8b83=Object[_0x146c83(0xcc)](_0x5e464b[_0x146c83(0xad)])[_0x146c83(0x121)]();if(!arraysEqual(_0x491238,_0x1f8126)||!_0x2a4e17[_0x146c83(0x108)](arraysEqual,_0x548f13,_0x4e8b83))return![];for(const [_0x4b8fb2,_0x5e5c41]of Object['entries'](_0x320c94[_0x146c83(0xec)])){if(_0x2a4e17['KPdlD'](_0x5e464b[_0x146c83(0xec)][_0x4b8fb2],_0x5e5c41))return![];}for(const [_0x52fa82,_0x3a64d7]of Object[_0x146c83(0x12f)](_0x320c94[_0x146c83(0xad)])){if(_0x2a4e17[_0x146c83(0x105)](_0x5e464b[_0x146c83(0xad)][_0x52fa82],_0x3a64d7))return _0x2a4e17[_0x146c83(0x10b)](_0x2a4e17[_0x146c83(0x129)],_0x2a4e17[_0x146c83(0xdd)])?![]:![];}return!![];};export const scanForNestedResources=async(_0x39691c,_0x1a4649,_0x105293)=>{const _0x539bef=_0x19eb16,_0xcd28c9={'ZxXSU':function(_0x3b1294,_0x64136c){return _0x3b1294(_0x64136c);},'bWgCr':'.css'};await scanDirectory(_0x39691c,_0x1a4649,_0x1a4649,_0x105293,async(_0x32d264,_0x37f434,_0x1cf483,_0xeffaae)=>{const _0x773cb7=_0x5172,_0x48d82f='/'+relative(_0x1cf483,_0x37f434),_0xaa5f99=extname(_0x37f434);if(['.js',_0x773cb7(0x91)][_0x773cb7(0xf3)](_0xaa5f99)){if(!_0xeffaae[_0x773cb7(0xf8)][_0x773cb7(0xec)][_0x773cb7(0x115)](_0x48d82f)){const _0x539d1c=_0xcd28c9[_0x773cb7(0xb4)](generateSRIHash,await readFile(_0x37f434));_0xeffaae[_0x773cb7(0x89)]['add'](_0x539d1c),_0xeffaae[_0x773cb7(0xf8)][_0x773cb7(0xec)][_0x773cb7(0xf0)](_0x48d82f,_0x539d1c);}}else{if(_0xaa5f99===_0xcd28c9[_0x773cb7(0x71)]){if(!_0xeffaae[_0x773cb7(0xf8)][_0x773cb7(0xad)]['has'](_0x48d82f)){const _0x9a4da2=_0xcd28c9[_0x773cb7(0xb4)](generateSRIHash,await readFile(_0x37f434));_0xeffaae['extStyleHashes'][_0x773cb7(0x7f)](_0x9a4da2),_0xeffaae['perResourceSriHashes'][_0x773cb7(0xad)]['set'](_0x48d82f,_0x9a4da2);}}}},_0x3650eb=>[_0x539bef(0x11f),_0x539bef(0x91),_0x539bef(0x109)]['includes'](extname(_0x3650eb)));};export const scanAllowLists=async(_0x51d941,_0x3b4110)=>{const _0xa8969b=_0x19eb16,_0x3cf06b={'XaLis':function(_0x3f034e,_0x2eab3d){return _0x3f034e===_0x2eab3d;},'BKMar':'all','CXeAh':function(_0x207689,_0x2f198e){return _0x207689(_0x2f198e);},'JvMdF':'GET','aWrmC':_0xa8969b(0xa8),'kmQXw':function(_0x651fe5,_0x1ff033,_0x4f44d5){return _0x651fe5(_0x1ff033,_0x4f44d5);},'lDtAU':function(_0x430c51,_0x27f1d5){return _0x430c51(_0x27f1d5);}};for(const _0x1e6548 of _0x51d941[_0xa8969b(0x9f)]){const _0x156323=await fetch(_0x1e6548,{'method':_0x3cf06b[_0xa8969b(0xa0)]}),_0x1eca2e=await _0x156323[_0xa8969b(0xa9)](),_0x2744fd=generateSRIHash(_0x1eca2e);_0x3b4110[_0xa8969b(0x89)][_0xa8969b(0x7f)](_0x2744fd),_0x3b4110[_0xa8969b(0xf8)][_0xa8969b(0xec)]['set'](_0x1e6548,_0x2744fd);}for(const _0x4312f6 of _0x51d941['stylesAllowListUrls']){if(_0xa8969b(0x102)!==_0x3cf06b[_0xa8969b(0xa4)]){const _0x3c9ffa=await _0x3cf06b[_0xa8969b(0x12a)](fetch,_0x4312f6,{'method':_0x3cf06b[_0xa8969b(0xa0)]}),_0x1ab785=await _0x3c9ffa[_0xa8969b(0xa9)](),_0x160581=_0x3cf06b['lDtAU'](generateSRIHash,_0x1ab785);_0x3b4110[_0xa8969b(0x120)][_0xa8969b(0x7f)](_0x160581),_0x3b4110[_0xa8969b(0xf8)]['styles'][_0xa8969b(0xf0)](_0x4312f6,_0x160581);}else(_0x29623c?.['allowInlineScripts']??_0xa8969b(0xc7))===_0xa8969b(0xc7)&&_0x4b0df1==='Script'||_0x3cf06b[_0xa8969b(0xfd)](_0x59b314?.[_0xa8969b(0xc2)]??_0x3cf06b['BKMar'],_0xa8969b(0xc7))&&_0x1fd0ac===_0xa8969b(0xb2)?(_0x436942=_0x3cf06b[_0xa8969b(0xe9)](_0x26cd68,_0x1efa40),_0x4433a6[_0x579946][_0xa8969b(0x7f)](_0x193357)):_0xb0c4b1[_0xa8969b(0xe5)](_0xa8969b(0x114)+_0x1402bf[_0xa8969b(0x127)]()+'\x20(inline\x20'+_0x15255f+_0xa8969b(0xe4));}};export async function generateSRIHashesModule(_0x47ff90,_0x22c2d2,_0x1e0deb,_0xfb06b5){const _0x3ebb51=_0x19eb16,_0x30362c={'DfDQy':function(_0x120bfe,_0x2409b9){return _0x120bfe!==_0x2409b9;},'MSvKz':function(_0x59e3c7,_0xbe1aac){return _0x59e3c7===_0xbe1aac;},'xnEjy':_0x3ebb51(0xf1),'BiBhG':_0x3ebb51(0xbb),'EHuMB':function(_0xec9b61,_0xc1683b,_0x573e20){return _0xec9b61(_0xc1683b,_0x573e20);},'YTUOE':'SRI\x20hashes\x20have\x20changed\x20for\x20static\x20resources\x20that\x20may\x20be\x20used\x20in\x20dynamic\x20pages.\x20You\x20should\x20run\x20the\x20build\x20step\x20again','VUpCj':_0x3ebb51(0x11c),'TkLpa':function(_0x5ea0cd,_0x32bf1e){return _0x5ea0cd>_0x32bf1e;},'BWwle':function(_0x551aa7,_0x54539b,_0x2dea9c){return _0x551aa7(_0x54539b,_0x2dea9c);}};let _0xf3d58=![],_0x1f3837=![];const _0x10e2fa=Array[_0x3ebb51(0xd3)](_0x22c2d2[_0x3ebb51(0x83)])[_0x3ebb51(0x121)](),_0x3ff1a0=Array[_0x3ebb51(0xd3)](_0x22c2d2[_0x3ebb51(0x68)])['sort'](),_0x30b0f3=Array[_0x3ebb51(0xd3)](_0x22c2d2[_0x3ebb51(0x89)])['sort'](),_0x2e01e7=Array[_0x3ebb51(0xd3)](_0x22c2d2['extStyleHashes'])['sort'](),_0x4ec997={};for(const [_0x594517,_0x17b206]of _0x22c2d2['perPageSriHashes']['entries']()){_0x4ec997[_0x594517]={'scripts':Array[_0x3ebb51(0xd3)](_0x17b206[_0x3ebb51(0xec)])[_0x3ebb51(0x121)](),'styles':Array[_0x3ebb51(0xd3)](_0x17b206[_0x3ebb51(0xad)])[_0x3ebb51(0x121)]()};}const _0x1604c7={'scripts':{},'styles':{}};for(const [_0x45e6a2,_0xa5e7ac]of _0x22c2d2[_0x3ebb51(0xf8)][_0x3ebb51(0xec)]['entries']()){if(_0x30362c[_0x3ebb51(0x93)](_0x3ebb51(0x123),_0x30362c[_0x3ebb51(0x77)])){const _0xccd026=_0x363473[_0x48f843][_0x3ebb51(0x113)](_0x1cb80d);if(_0xccd026){if(_0x30362c[_0x3ebb51(0x12b)](_0xccd026,_0x541232))throw new _0x5dcd35(_0x3ebb51(0xc5)+_0x5ae53d+_0x3ebb51(0xc4)+_0xccd026+'\x22\x20but\x20got\x20\x22'+_0x2fbcca+'\x22');}else _0x297f2a[_0x5b08c8][_0x3ebb51(0xf0)](_0x4996b0,_0x470cf5);}else _0x1604c7[_0x3ebb51(0xec)][_0x45e6a2]=_0xa5e7ac;}for(const [_0x8bffb2,_0x2e519f]of _0x22c2d2[_0x3ebb51(0xf8)][_0x3ebb51(0xad)][_0x3ebb51(0x12f)]()){if(_0x30362c['BiBhG']!=='nxJfk')_0x1604c7['styles'][_0x8bffb2]=_0x2e519f;else return![];}if(await doesFileExist(_0x1e0deb)){const _0x252a49=await import(_0x1e0deb);_0xf3d58=!sriHashesEqual(_0x1604c7,_0x252a49[_0x3ebb51(0xf8)]??{'scripts':{},'styles':{}}),_0x1f3837=_0xf3d58||!_0x30362c[_0x3ebb51(0xd0)](arraysEqual,_0x10e2fa,_0x252a49[_0x3ebb51(0x83)]??[])||!_0x30362c['EHuMB'](arraysEqual,_0x3ff1a0,_0x252a49[_0x3ebb51(0x68)]??[])||!_0x30362c[_0x3ebb51(0xd0)](arraysEqual,_0x30b0f3,_0x252a49[_0x3ebb51(0x89)]??[])||!arraysEqual(_0x2e01e7,_0x252a49[_0x3ebb51(0x120)]??[])||!_0x30362c[_0x3ebb51(0xd0)](pageHashesEqual,_0x4ec997,_0x252a49['perPageSriHashes']??{});}else _0x1f3837=!![];if(_0x1f3837){_0xf3d58&&_0xfb06b5&&_0x47ff90[_0x3ebb51(0xe5)](_0x30362c[_0x3ebb51(0xf4)]);let _0x14d327=_0x30362c[_0x3ebb51(0x126)];_0x14d327+=_0x3ebb51(0x12e)+_0x10e2fa['map'](_0x350719=>_0x3ebb51(0xbd)+_0x350719+'\x27,')['join']('')+(_0x10e2fa[_0x3ebb51(0x97)]>0x0?'\x0a':'')+_0x3ebb51(0x7e),_0x14d327+=_0x3ebb51(0x69)+_0x3ff1a0['map'](_0x1ab1f4=>_0x3ebb51(0xbd)+_0x1ab1f4+'\x27,')[_0x3ebb51(0xd5)]('')+(_0x30362c['TkLpa'](_0x3ff1a0[_0x3ebb51(0x97)],0x0)?'\x0a':'')+_0x3ebb51(0x7e),_0x14d327+=_0x3ebb51(0x8f)+_0x30b0f3[_0x3ebb51(0x6a)](_0x4a0701=>_0x3ebb51(0xbd)+_0x4a0701+'\x27,')['join']('')+(_0x30b0f3[_0x3ebb51(0x97)]>0x0?'\x0a':'')+_0x3ebb51(0x7e),_0x14d327+=_0x3ebb51(0x111)+_0x2e01e7[_0x3ebb51(0x6a)](_0x235cda=>_0x3ebb51(0xbd)+_0x235cda+'\x27,')[_0x3ebb51(0xd5)]('')+(_0x30362c['TkLpa'](_0x2e01e7[_0x3ebb51(0x97)],0x0)?'\x0a':'')+_0x3ebb51(0x7e),_0x14d327+=_0x3ebb51(0x6f)+Object[_0x3ebb51(0x12f)](_0x4ec997)['sort']()[_0x3ebb51(0x6a)](([_0x173043,_0x2f3ff3])=>_0x3ebb51(0x85)+_0x173043+_0x3ebb51(0xfe)+_0x2f3ff3[_0x3ebb51(0xec)][_0x3ebb51(0x6a)](_0x3dec71=>_0x3ebb51(0xdf)+_0x3dec71+'\x27,')[_0x3ebb51(0xd5)]('')+(_0x2f3ff3['scripts'][_0x3ebb51(0x97)]>0x0?_0x3ebb51(0xb8):'')+_0x3ebb51(0xae)+_0x2f3ff3[_0x3ebb51(0xad)]['map'](_0x1e7299=>_0x3ebb51(0xdf)+_0x1e7299+'\x27,')[_0x3ebb51(0xd5)]('')+(_0x2f3ff3['styles'][_0x3ebb51(0x97)]>0x0?'\x0a\x09\x09\x09':'')+_0x3ebb51(0xe2))[_0x3ebb51(0xd5)](',')+_0x3ebb51(0x7b),_0x14d327+='export\x20const\x20perResourceSriHashes\x20=\x20{\x0a\x09scripts:\x20/**\x20@type\x20{Record<string,string>}\x20*/\x20({\x0a'+Object[_0x3ebb51(0x12f)](_0x1604c7[_0x3ebb51(0xec)])[_0x3ebb51(0x6a)](([_0x233bad,_0x2680f2])=>'\x09\x09\x27'+_0x233bad+'\x27:\x20\x27'+_0x2680f2+_0x3ebb51(0xa1))[_0x3ebb51(0xd5)]('')+'\x09}),\x0a\x09styles:\x20/**\x20@type\x20{Record<string,string>}\x20*/\x20({\x0a'+Object[_0x3ebb51(0x12f)](_0x1604c7[_0x3ebb51(0xad)])[_0x3ebb51(0x6a)](([_0x57687c,_0x252ff0])=>'\x09\x09\x27'+_0x57687c+_0x3ebb51(0x10d)+_0x252ff0+_0x3ebb51(0xa1))[_0x3ebb51(0xd5)]('')+_0x3ebb51(0x103),await mkdir(dirname(_0x1e0deb),{'recursive':!![]}),await _0x30362c[_0x3ebb51(0xdb)](writeFile,_0x1e0deb,_0x14d327);}}export const processStaticFiles=async(_0x4bed1d,{distDir:_0x1cb227,sri:_0x3bf110})=>{const _0x307c7c=_0x19eb16,_0x57e37e={'hgXBc':function(_0x48a734,_0x41929f){return _0x48a734===_0x41929f;},'OJRXJ':_0x307c7c(0xb2),'NBWGL':function(_0x1e5d04,_0x37f0f7){return _0x1e5d04(_0x37f0f7);},'jnRmL':function(_0x37d3b6,_0x53687d){return _0x37d3b6===_0x53687d;},'ylsGH':_0x307c7c(0xd8)},_0x1226f9={'inlineScriptHashes':new Set(),'inlineStyleHashes':new Set(),'extScriptHashes':new Set(),'extStyleHashes':new Set(),'perPageSriHashes':new Map(),'perResourceSriHashes':{'scripts':new Map(),'styles':new Map()}};await scanDirectory(_0x4bed1d,_0x1cb227,_0x1cb227,_0x1226f9,processHTMLFile,_0x42fe73=>extname(_0x42fe73)===_0x307c7c(0xb6),_0x3bf110),await scanForNestedResources(_0x4bed1d,_0x1cb227,_0x1226f9);if(!_0x3bf110[_0x307c7c(0x10a)]){if(_0x57e37e[_0x307c7c(0x73)](_0x307c7c(0x139),_0x57e37e[_0x307c7c(0x133)]))!(_0x1b4514===![]&&_0x57e37e['hgXBc'](_0x54a9b6,_0x307c7c(0x12d)))&&!(_0x2d8b07===![]&&_0x2a5801===_0x57e37e[_0x307c7c(0x10e)])?(_0x1be27d=_0x57e37e[_0x307c7c(0x122)](_0x23b3a5,_0x57c896),_0x3d5552[_0x307c7c(0x101)+_0x1e28c5+_0x307c7c(0x10f)][_0x307c7c(0x7f)](_0x4fb583),_0x15395d[_0x3a59aa][_0x307c7c(0x7f)](_0x3fa373)):_0x1f1f1d['warn'](_0x307c7c(0x114)+_0x466063[_0x307c7c(0x127)]()+'\x20\x22'+_0x1067a9+_0x307c7c(0x135)+_0x1c1364+_0x307c7c(0xe4));else return;}await generateSRIHashesModule(_0x4bed1d,_0x1226f9,_0x3bf110[_0x307c7c(0x10a)],_0x3bf110[_0x307c7c(0xd7)]);};export const getMiddlewareHandler=(_0x4ec047,_0x2e1986,_0x2ec8e5)=>{const _0x4728ce={'oCYkG':function(_0x25d300){return _0x25d300();},'nwAtN':function(_0x55b8f5,_0x54c486,_0x1d2003,_0x856f14,_0x1cb31d){return _0x55b8f5(_0x54c486,_0x1d2003,_0x856f14,_0x1cb31d);}};return async(_0x40e729,_0xcd1a9e)=>{const _0x5494fb=_0x5172,_0x3847e2=await _0x4728ce[_0x5494fb(0x8d)](_0xcd1a9e),_0x5a24a7=await _0x3847e2[_0x5494fb(0xb1)](),{updatedContent:_0x467d33}=await _0x4728ce[_0x5494fb(0x116)](updateDynamicPageSriHashes,_0x4ec047,_0x5a24a7,_0x2e1986,_0x2ec8e5),_0x3326e1=new Response(_0x467d33,{'status':_0x3847e2[_0x5494fb(0xc8)],'statusText':_0x3847e2[_0x5494fb(0x86)],'headers':_0x3847e2[_0x5494fb(0xe3)]});return _0x3326e1;};};export const getCSPMiddlewareHandler=(_0x1456bb,_0x33ceba,_0x546820,_0x3afd54)=>{const _0x5693e5={'HVrEv':function(_0x3b3294,_0x157a55,_0x9e9c08,_0x17764e,_0x5aa729){return _0x3b3294(_0x157a55,_0x9e9c08,_0x17764e,_0x5aa729);}};return async(_0x1ac0e4,_0xc92cfe)=>{const _0x3ce7a1=_0x5172,_0x1bc18=await _0xc92cfe(),_0x1b9465=await _0x1bc18['text'](),{updatedContent:_0x5eb1fc,pageHashes:_0x5f58ab}=await _0x5693e5[_0x3ce7a1(0x9d)](updateDynamicPageSriHashes,_0x1456bb,_0x1b9465,_0x33ceba,_0x3afd54),_0x22f2f5=new Response(_0x5eb1fc,{'status':_0x1bc18[_0x3ce7a1(0xc8)],'statusText':_0x1bc18[_0x3ce7a1(0x86)],'headers':patchHeaders(_0x1bc18[_0x3ce7a1(0xe3)],_0x5f58ab,_0x546820)});return _0x22f2f5;};};const middlewareVirtualModuleId=_0x19eb16(0xea),resolvedMiddlewareVirtualModuleId='\x00'+middlewareVirtualModuleId,loadVirtualMiddlewareModule=async(_0x524496,_0x23e22c,_0x39f524,_0x580c46)=>{const _0x288a97=_0x19eb16,_0xd52e39={'bEGRI':function(_0x3b8455,_0x279c66,_0x58c98e,_0x121301,_0x45a9ad){return _0x3b8455(_0x279c66,_0x58c98e,_0x121301,_0x45a9ad);},'VbztY':function(_0x188d36,_0x19e05c,_0x3dab5f){return _0x188d36(_0x19e05c,_0x3dab5f);},'EoplC':function(_0x103e3d,_0x31b8f0,_0x55abc2){return _0x103e3d(_0x31b8f0,_0x55abc2);},'PoSIa':function(_0x130b2f,_0x1d73db){return _0x130b2f(_0x1d73db);},'YOBHb':function(_0x59c00b,_0x1dc708,_0x53aceb,_0x57b69c){return _0x59c00b(_0x1dc708,_0x53aceb,_0x57b69c);},'ewavd':'wWMFN','pnMTw':function(_0x5a9d12,_0x5354cc){return _0x5a9d12===_0x5354cc;},'OwjeH':_0x288a97(0x124)};let _0x45afb4='',_0x22bde5='';if(_0x23e22c[_0x288a97(0xee)]&&_0x23e22c[_0x288a97(0x10a)]&&!await _0xd52e39[_0x288a97(0x112)](doesFileExist,_0x23e22c[_0x288a97(0x10a)])){const _0x59fa04={'inlineScriptHashes':new Set(),'inlineStyleHashes':new Set(),'extScriptHashes':new Set(),'extStyleHashes':new Set(),'perPageSriHashes':new Map(),'perResourceSriHashes':{'scripts':new Map(),'styles':new Map()}};await _0xd52e39[_0x288a97(0x8e)](scanForNestedResources,_0x524496,_0x580c46,_0x59fa04),await _0xd52e39[_0x288a97(0xfc)](scanAllowLists,_0x23e22c,_0x59fa04),await generateSRIHashesModule(_0x524496,_0x59fa04,_0x23e22c['hashesModule'],![]);}if(_0x23e22c[_0x288a97(0xee)]&&_0x23e22c['hashesModule']&&await doesFileExist(_0x23e22c[_0x288a97(0x10a)]))_0xd52e39[_0x288a97(0xab)]==='wWMFN'?(_0x45afb4='import\x20{\x20perResourceSriHashes\x20}\x20from\x20\x27'+_0x23e22c['hashesModule']+'\x27',_0x22bde5=_0x288a97(0x131)):_0x5728a6=_0x402fba[_0x288a97(0x7d)](_0x400add[0x0],_0xd52e39[_0x288a97(0xbe)](_0x3ef009,_0x2039b6,_0x283681,_0x8ffa92,_0x8f3c39));else{if(_0x23e22c[_0x288a97(0xee)]&&_0x23e22c[_0x288a97(0x10a)]){if(_0xd52e39[_0x288a97(0x99)](_0xd52e39[_0x288a97(0x79)],_0x288a97(0x124)))_0x524496[_0x288a97(0xe5)](_0x288a97(0x72)+_0x23e22c[_0x288a97(0x10a)]+'\x22\x20did\x20not\x20exist\x20at\x20build\x20time.\x20You\x20may\x20have\x20to\x20run\x20the\x20build\x20step\x20again');else{const _0x2f5b7d=_0x4253e2[_0x1c1cd2];if(!_0x2f5b7d)return![];if(!_0xd52e39[_0x288a97(0xfc)](_0x30d6dc,_0x4d62c2[_0x288a97(0xec)],_0x2f5b7d['scripts'])||!_0xd52e39[_0x288a97(0xba)](_0x1dc242,_0x2401a1[_0x288a97(0xad)],_0x2f5b7d['styles']))return![];}}}return _0x288a97(0x74)+(_0x39f524!==undefined?_0x288a97(0x9e):_0x288a97(0x11e))+_0x288a97(0x95)+_0x45afb4+_0x288a97(0xb5)+_0x22bde5+_0x288a97(0x70)+(_0x39f524!==undefined?'getCSPMiddlewareHandler(console,\x20globalHashes,\x20'+JSON[_0x288a97(0xd2)](_0x39f524)+',\x20'+JSON[_0x288a97(0xd2)](_0x23e22c)+')':'getMiddlewareHandler(console,\x20globalHashes,\x20'+JSON[_0x288a97(0xd2)](_0x23e22c)+')')+_0x288a97(0x94);},getViteMiddlewarePlugin=(_0x2bd349,_0x19c36e,_0x24397f,_0x43bf21)=>{const _0x5e3783=_0x19eb16,_0x1e071f={'gzlBZ':function(_0x1b8985,_0x267dc3,_0x500b5e,_0x1c585b,_0xc9b33f){return _0x1b8985(_0x267dc3,_0x500b5e,_0x1c585b,_0xc9b33f);},'ypKjG':_0x5e3783(0x100)};return{'name':_0x1e071f['ypKjG'],'resolveId'(_0x55f904){if(_0x55f904===middlewareVirtualModuleId)return resolvedMiddlewareVirtualModuleId;return;},async 'load'(_0x189bb5,_0x58107a){const _0x110da0=_0x5e3783;switch(_0x189bb5){case resolvedMiddlewareVirtualModuleId:return await _0x1e071f[_0x110da0(0x8c)](loadVirtualMiddlewareModule,_0x2bd349,_0x19c36e,_0x24397f,_0x43bf21);default:return;}}};};export const getAstroConfigSetup=(_0x21b1e8,_0x5428cf)=>{const _0x543f46=_0x19eb16,_0x289ae7={'nbVBq':function(_0x3a2e34,_0x589097){return _0x3a2e34(_0x589097);},'xvqPE':_0x543f46(0x8a)};return async({logger:_0x2b2366,addMiddleware:_0x31c452,config:_0x47bc20,updateConfig:_0x20162f})=>{const _0x1e4e7f=_0x543f46,_0x40e010=fileURLToPath(_0x47bc20['publicDir']),_0x3757cc=getViteMiddlewarePlugin(_0x2b2366,_0x21b1e8,_0x5428cf,_0x40e010);_0x289ae7[_0x1e4e7f(0xbc)](_0x20162f,{'vite':{'plugins':[_0x3757cc]}}),_0x31c452({'order':_0x289ae7[_0x1e4e7f(0x78)],'entrypoint':_0x1e4e7f(0xea)});};};