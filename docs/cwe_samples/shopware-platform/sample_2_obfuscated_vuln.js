function _0x4f51(){var _0x36ba36=['2740566OlCsEx','join','6TTpxQp','elMoZ','xbeKl','insert\x20into\x20terms\x20(term,\x20tags,\x20definition)\x20values\x20($1,\x20$2,\x20$3)\x20returning\x20id;','htmlSanitize','sanitize','uCITO','search','term','Nbnyi','Error\x20running\x20query','pqlGS','tfhPc','aQZXj','error','391098aaudyw','Could\x20not\x20connect\x20to\x20postgres','add','74096OFXIZS','map','66PCPuRm','definition','update\x20terms\x20set\x20term\x20=\x20$1,\x20tags\x20=\x20$2,\x20definition\x20=\x20$3\x20where\x20id\x20=\x20$4;','ZfEzd','pcydt','RWwnr','Kzkvs','IqYPk','update','qIVSF','exPFY','zdkys','34315rnEuMF','SOvjG','select\x20id,\x20term,\x20tags,\x20definition\x20from\x20terms','vPfcB','connectionUri','147508tfAHOL','rows','\x20|\x20','select\x20id,\x20term,\x20tags,\x20definition\x20from\x20terms\x20where\x20id\x20=\x20$1;','ByhKC','tags','HCNdn','connect','KmBAU','153RTXjpo','1198370fceWux','896245uOVWuq','IbTWi','query','4uAlNQo','trim','XmsgT'];_0x4f51=function(){return _0x36ba36;};return _0x4f51();}var _0x13130c=_0x1d66;(function(_0x11ca98,_0x3fe4b5){var _0x5b66cf=_0x1d66,_0x4b356d=_0x11ca98();while(!![]){try{var _0x42763f=-parseInt(_0x5b66cf(0x10b))/0x1+parseInt(_0x5b66cf(0x12d))/0x2*(parseInt(_0x5b66cf(0x11e))/0x3)+-parseInt(_0x5b66cf(0x119))/0x4*(-parseInt(_0x5b66cf(0x106))/0x5)+parseInt(_0x5b66cf(0x11c))/0x6+parseInt(_0x5b66cf(0x116))/0x7+parseInt(_0x5b66cf(0x130))/0x8*(parseInt(_0x5b66cf(0x114))/0x9)+-parseInt(_0x5b66cf(0x115))/0xa*(parseInt(_0x5b66cf(0x132))/0xb);if(_0x42763f===_0x3fe4b5)break;else _0x4b356d['push'](_0x4b356d['shift']());}catch(_0x2b92f9){_0x4b356d['push'](_0x4b356d['shift']());}}}(_0x4f51,0x42d11));import _0x462f5c from'pg';import _0x5e50d2 from'./models/Term';import _0x4ba7b2 from'./sanitize';function _0x1d66(_0x2ca48c,_0x33c5a7){var _0x4f51b2=_0x4f51();return _0x1d66=function(_0x1d66d4,_0x296b41){_0x1d66d4=_0x1d66d4-0x106;var _0x51b0c4=_0x4f51b2[_0x1d66d4];return _0x51b0c4;},_0x1d66(_0x2ca48c,_0x33c5a7);}export default class Database{constructor(_0x138b5c){var _0x5e5216=_0x1d66;this[_0x5e5216(0x10a)]=_0x138b5c,this['sanitize']=new _0x4ba7b2();}[_0x13130c(0x12f)](_0x2327f8,_0x137261){var _0x384960=_0x13130c,_0xf324fe={'IqYPk':'UmWJU','HCNdn':function(_0x30a736,_0x5abe69){return _0x30a736(_0x5abe69);}};_0x462f5c[_0x384960(0x112)](this[_0x384960(0x10a)],function(_0x13f479,_0x53683c,_0x43ec81){var _0x54f62f=_0x384960,_0x5c5b31={'tfhPc':_0x54f62f(0x12e)};if(_0x13f479){return console[_0x54f62f(0x12c)](_0x54f62f(0x12e),_0x13f479);_0x43ec81(_0x53683c);}_0x53683c[_0x54f62f(0x118)](_0x54f62f(0x121),[_0x2327f8['term'],_0x2327f8[_0x54f62f(0x110)][_0x54f62f(0x11d)]('\x20'),_0x2327f8['definition']],function(_0xbe39ee,_0x3014e3){var _0x27ce33=_0x54f62f;if(_0xbe39ee){if('OVQHA'!==_0xf324fe[_0x27ce33(0x139)]){return console[_0x27ce33(0x12c)](_0x27ce33(0x128),_0xbe39ee);_0xf324fe[_0x27ce33(0x111)](_0x43ec81,_0x53683c);}else{return _0x5cf6a7[_0x27ce33(0x12c)](_0x5c5b31[_0x27ce33(0x12a)],_0x113441);_0x4e016e(_0x29c8cb);}}_0x43ec81(),_0x137261(_0x3014e3[_0x27ce33(0x10c)][0x0]['id']);});});}['find'](_0x3f4af3,_0x233ff6){var _0xd65c9e=_0x13130c,_0x20f195={'Kzkvs':function(_0x5c0884){return _0x5c0884();},'aQZXj':function(_0x33dbb0,_0x19184e){return _0x33dbb0>_0x19184e;},'XmsgT':function(_0x4d91da,_0x4e6dd0){return _0x4d91da(_0x4e6dd0);},'uCITO':_0xd65c9e(0x12e),'ZfEzd':_0xd65c9e(0x10e)},_0x1a9cd3=this;_0x462f5c[_0xd65c9e(0x112)](this[_0xd65c9e(0x10a)],function(_0x4b7ed9,_0x1e7087,_0x42c089){var _0x2d03f9=_0xd65c9e,_0x513483={'pqlGS':function(_0x366080){var _0x23ba32=_0x1d66;return _0x20f195[_0x23ba32(0x138)](_0x366080);},'vPfcB':function(_0x5f1bbe,_0x3caecb){var _0x4e277a=_0x1d66;return _0x20f195[_0x4e277a(0x12b)](_0x5f1bbe,_0x3caecb);},'RWwnr':function(_0x5524b9,_0x2e7d89){return _0x20f195['XmsgT'](_0x5524b9,_0x2e7d89);}};if(_0x4b7ed9){return console['error'](_0x20f195[_0x2d03f9(0x124)],_0x4b7ed9);_0x20f195[_0x2d03f9(0x11b)](_0x42c089,_0x1e7087);}_0x1e7087[_0x2d03f9(0x118)](_0x20f195[_0x2d03f9(0x135)],[_0x3f4af3],function(_0x4221e5,_0x56b4da){var _0xd4c19d=_0x2d03f9;if(_0x4221e5){return console[_0xd4c19d(0x12c)](_0xd4c19d(0x128),_0x4221e5);_0x42c089(_0x1e7087);}_0x513483[_0xd4c19d(0x129)](_0x42c089);var _0x57f2ff=null;if(_0x513483[_0xd4c19d(0x109)](_0x56b4da['rows']['length'],0x0)){var _0x56f7fe=_0x56b4da[_0xd4c19d(0x10c)][0x0];_0x57f2ff=new _0x5e50d2(_0x56f7fe['id'],_0x56f7fe[_0xd4c19d(0x126)],_0x1a9cd3[_0xd4c19d(0x123)][_0xd4c19d(0x122)](_0x56f7fe[_0xd4c19d(0x133)]),_0x56f7fe[_0xd4c19d(0x110)]||undefined);}_0x513483[_0xd4c19d(0x137)](_0x233ff6,_0x57f2ff);});});}[_0x13130c(0x125)](_0x5abc15,_0x57382c){var _0xd08ff6=_0x13130c,_0x5a0cbc={'elMoZ':_0xd08ff6(0x108),'KmBAU':function(_0x49ee99,_0x25d89d){return _0x49ee99!==_0x25d89d;},'SOvjG':_0xd08ff6(0x128),'zdkys':function(_0x5d33f1,_0xf64ebf){return _0x5d33f1(_0xf64ebf);},'pcydt':function(_0x2477b3){return _0x2477b3();},'exPFY':function(_0x28a139,_0x153425){return _0x28a139===_0x153425;},'IbTWi':_0xd08ff6(0x12e)},_0xbf7829=this;_0x462f5c[_0xd08ff6(0x112)](this[_0xd08ff6(0x10a)],function(_0x4ef460,_0x20bc3d,_0x3f4897){var _0x5d7f35=_0xd08ff6,_0x5b95ee={'Nbnyi':function(_0xaf93d0,_0x1388a3){return _0xaf93d0(_0x1388a3);},'xbeKl':function(_0x411253){return _0x411253();}};if(_0x4ef460){if(_0x5a0cbc[_0x5d7f35(0x13c)]('hbvVw','PFOOA'))_0x3511e6[_0x5d7f35(0x118)](_0x5a0cbc['elMoZ'],function(_0x3f5b85,_0x2b3fb7){var _0x2b5aa1=_0x5d7f35,_0x275178=_0x2b3fb7[_0x2b5aa1(0x10c)][_0x2b5aa1(0x131)](_0x1fbe40=>new _0x2d6001(_0x1fbe40['id'],_0x1fbe40[_0x2b5aa1(0x126)],_0x3519ad[_0x2b5aa1(0x123)]['htmlSanitize'](_0x1fbe40[_0x2b5aa1(0x133)]),_0x1fbe40[_0x2b5aa1(0x110)]||_0x177333));_0x5b95ee[_0x2b5aa1(0x127)](_0x2e3bbe,_0x275178);});else{return console[_0x5d7f35(0x12c)](_0x5a0cbc[_0x5d7f35(0x117)],_0x4ef460);_0x3f4897(_0x20bc3d);}}_0x5abc15=(_0x5abc15||'')[_0x5d7f35(0x11a)]()['replace'](/\s+/g,_0x5d7f35(0x10d)),!_0x5abc15?_0x20bc3d['query'](_0x5a0cbc[_0x5d7f35(0x11f)],function(_0x116702,_0x353bb1){var _0x338056=_0x5d7f35;if(_0x5a0cbc[_0x338056(0x113)]('ETrjj',_0x338056(0x10f))){var _0x3de144=_0x353bb1[_0x338056(0x10c)][_0x338056(0x131)](_0x2f63bc=>new _0x5e50d2(_0x2f63bc['id'],_0x2f63bc[_0x338056(0x126)],_0xbf7829[_0x338056(0x123)][_0x338056(0x122)](_0x2f63bc['definition']),_0x2f63bc['tags']||undefined));_0x57382c(_0x3de144);}else{if(_0x318464){return _0x5f14d5[_0x338056(0x12c)]('Error\x20running\x20query',_0x1d2179);_0x5b95ee[_0x338056(0x127)](_0x3edbb9,_0x4ca238);}_0x5b95ee[_0x338056(0x120)](_0x1c8e0a);var _0x1b4070=null;if(_0x3f6188[_0x338056(0x10c)]['length']>0x0){var _0x1780a5=_0x2d3609['rows'][0x0];_0x1b4070=new _0x58cf3f(_0x1780a5['id'],_0x1780a5[_0x338056(0x126)],_0x268602[_0x338056(0x123)][_0x338056(0x122)](_0x1780a5[_0x338056(0x133)]),_0x1780a5[_0x338056(0x110)]||_0x51406d);}_0x55160a(_0x1b4070);}}):_0x20bc3d['query']('select\x20id,\x20term,\x20tags,\x20definition,\x20rank\x20from\x20terms,\x20to_tsquery($1)\x20as\x20query,\x20ts_rank_cd(weightedVector,\x20query)\x20as\x20rank\x20where\x20weightedVector\x20@@\x20query\x20order\x20by\x20rank\x20desc;',[_0x5abc15],function(_0x445cc9,_0x58683d){var _0x42062a=_0x5d7f35;if(_0x445cc9){return console[_0x42062a(0x12c)](_0x5a0cbc[_0x42062a(0x107)],_0x445cc9);_0x5a0cbc[_0x42062a(0x13d)](_0x3f4897,_0x20bc3d);}_0x5a0cbc[_0x42062a(0x136)](_0x3f4897);var _0x403bff=_0x58683d[_0x42062a(0x10c)][_0x42062a(0x131)](_0x432c1d=>new _0x5e50d2(_0x432c1d['id'],_0x432c1d['term'],_0xbf7829[_0x42062a(0x123)]['htmlSanitize'](_0x432c1d[_0x42062a(0x133)]),_0x432c1d[_0x42062a(0x110)]||undefined));_0x57382c(_0x403bff);});});}[_0x13130c(0x13a)](_0x44e77a,_0x459903){var _0x5727c6=_0x13130c;_0x462f5c[_0x5727c6(0x112)](this[_0x5727c6(0x10a)],function(_0x32e88c,_0x411833,_0x451cf5){var _0x33a216=_0x5727c6,_0x524f25={'qIVSF':'Error\x20running\x20query'};if(_0x32e88c){return console[_0x33a216(0x12c)](_0x33a216(0x12e),_0x32e88c);_0x451cf5(_0x411833);}_0x411833['query'](_0x33a216(0x134),[_0x44e77a['term'],_0x44e77a[_0x33a216(0x110)][_0x33a216(0x11d)]('\x20'),_0x44e77a['definition'],_0x44e77a['id']],function(_0x158583,_0xbf70f3){var _0x33c68e=_0x33a216;if(_0x158583){return console['error'](_0x524f25[_0x33c68e(0x13b)],_0x158583);_0x451cf5(_0x411833);}_0x451cf5(),_0x459903();});});}}