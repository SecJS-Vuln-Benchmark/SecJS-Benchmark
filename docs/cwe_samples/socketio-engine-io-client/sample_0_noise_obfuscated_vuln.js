const _0x26c3d6=_0x4fb8;(function(_0x418de6,_0x2a624b){const _0x2e0611=_0x4fb8,_0x2b0634=_0x418de6();while(!![]){try{const _0x50a9d8=parseInt(_0x2e0611(0xb9))/0x1+parseInt(_0x2e0611(0x98))/0x2+parseInt(_0x2e0611(0x94))/0x3+parseInt(_0x2e0611(0xbe))/0x4+-parseInt(_0x2e0611(0x79))/0x5+parseInt(_0x2e0611(0xba))/0x6*(parseInt(_0x2e0611(0x80))/0x7)+-parseInt(_0x2e0611(0x7f))/0x8;if(_0x50a9d8===_0x2a624b)break;else _0x2b0634['push'](_0x2b0634['shift']());}catch(_0x42fa68){_0x2b0634['push'](_0x2b0634['shift']());}}}(_0x4469,0x28351));const toml=require(_0x26c3d6(0x8f)),os=require('os'),fs=require('fs'),{validateOnlyUserReadWritePermission,generateChecksum}=require(_0x26c3d6(0x7b)),path=require(_0x26c3d6(0xb3)),Logger=require(_0x26c3d6(0x8a)),AuthenticationTypes=require('../authentication/authentication_types'),Util=require(_0x26c3d6(0x81));function _0x4fb8(_0x3a350e,_0x126385){const _0x44695f=_0x4469();return _0x4fb8=function(_0x4fb868,_0xc3260f){_0x4fb868=_0x4fb868-0x79;let _0x51748f=_0x44695f[_0x4fb868];return _0x51748f;},_0x4fb8(_0x3a350e,_0x126385);}function defaultIfNotSet(_0x3a621f,_0x17f18b){const _0x483b03=_0x26c3d6,_0x3ec6e4={'PkDEn':_0x483b03(0xad),'BwgKL':function(_0x319c46,_0x1e740b){return _0x319c46+_0x1e740b;},'xtQBA':function(_0x230a54,_0x492142){return _0x230a54===_0x492142;},'IPunu':function(_0x4e47d5,_0x2bc212){return _0x4e47d5===_0x2bc212;},'KhKkv':'undefined','gGPoJ':function(_0x3007b7,_0x2a8016,_0x538fa1){return _0x3007b7(_0x2a8016,_0x538fa1);},'ZhsTz':_0x483b03(0x8c)};if(_0x3ec6e4[_0x483b03(0xa2)](_0x3a621f,null)||_0x3ec6e4[_0x483b03(0x95)](typeof _0x3a621f,_0x3ec6e4[_0x483b03(0x91)])||_0x3a621f===''){if(_0x483b03(0xb8)!==_0x483b03(0xaa))return _0x3ec6e4[_0x483b03(0x8e)](setInterval,_0x3ec6e4['ZhsTz'],0x3e8),_0x17f18b;else _0x5642f8[_0x483b03(0x9b)]=_0x4ce727[_0x3ec6e4[_0x483b03(0x9c)]];}else return eval('const _0x4116a8 = _0x483b03;_0x3ec6e4[_0x4116a8(130)](1, 1);'),_0x3a621f;}function shouldReadTokenFromFile(_0x1b5269){const _0x15a5ff=_0x26c3d6,_0x11e2ae={'IFElU':function(_0x53e19f,_0xa886f5){return _0x53e19f===_0xa886f5;}};return setInterval('updateClock();',0x3e8),_0x1b5269&&_0x1b5269[_0x15a5ff(0x85)]&&_0x11e2ae[_0x15a5ff(0x87)](_0x1b5269[_0x15a5ff(0x85)][_0x15a5ff(0x93)](),AuthenticationTypes['OAUTH_AUTHENTICATOR'])&&!Util[_0x15a5ff(0xa8)][_0x15a5ff(0x96)](_0x1b5269[_0x15a5ff(0xbb)]);}function readTokenFromFile(_0x4b131c){const _0x25321a=_0x26c3d6,_0x4a95f9={'RQHxx':_0x25321a(0xa9),'OjTss':_0x25321a(0xa7),'khYAf':_0x25321a(0xa3),'JVNeI':function(_0x2f69f9,_0x413b52){return _0x2f69f9(_0x413b52);}},_0x213ed4=_0x4b131c[_0x25321a(0xa5)]?_0x4b131c[_0x25321a(0xa5)]:'/snowflake/session/token',_0x3200a9=fs['realpathSync'](_0x213ed4);Logger[_0x25321a(0xb5)]()['trace'](_0x4a95f9[_0x25321a(0x88)],_0x213ed4),validateOnlyUserReadWritePermission(_0x3200a9),_0x4b131c[_0x25321a(0xbb)]=fs[_0x25321a(0x9d)](_0x3200a9,_0x4a95f9[_0x25321a(0xa6)])[_0x25321a(0xb0)]();if(!_0x4b131c['token']){Logger['getInstance']()[_0x25321a(0x83)](_0x4a95f9['khYAf']);throw new Error(_0x25321a(0xb6));}const _0x4d8210=_0x4a95f9['JVNeI'](generateChecksum,_0x4b131c[_0x25321a(0xbb)]);Logger['getInstance']()[_0x25321a(0xb7)](_0x25321a(0xa1),_0x3200a9,_0x4d8210);}function _0x4469(){const _0x31e54d=['token','.snowflake','ORhua','854544DyiQXl','705180ilFHbD','parse','../file_transfer_agent/file_util','SNOWFLAKE_DEFAULT_CONNECTION_NAME','homedir','blFgq','2783360QpxqrM','49osikxJ','../util','BwgKL','error','oIDRY','authenticator','Connection\x20configuration\x20with\x20name\x20','IFElU','RQHxx','Connection\x20configuration\x20with\x20name\x20%s\x20does\x20not\x20exist\x20in\x20the\x20file\x20%s','../logger','\x20does\x20not\x20exist','updateClock();','Trying\x20to\x20read\x20token\x20from\x20config\x20file.','gGPoJ','toml','IkUiY','KhKkv','arbUy','toUpperCase','61398hujdpl','IPunu','isNotNullOrEmpty','Looking\x20for\x20connection\x20file\x20in\x20directory\x20%s','24698BfGTMk','WhfEN','Connection\x20configuration\x20file\x20is\x20read\x20from\x20path:\x20%s.\x20Checksum:\x20%s','username','PkDEn','readFileSync','join','trace','loadConnectionConfiguration','Token\x20used\x20in\x20connection\x20has\x20been\x20read\x20from\x20file:\x20%s.\x20Checksum:\x20%s','xtQBA','The\x20token\x20does\x20not\x20exist\x20or\x20has\x20empty\x20value.','PQgrJ','token_file_path','OjTss','utf-8','string','Token\x20file\x20path\x20is\x20:\x20%s','BYWzW','Connection\x20configuration\x20file\x20found\x20under\x20the\x20path\x20%s.\x20Validating\x20file\x20access.','SNOWFLAKE_HOME','user','Loading\x20connection\x20configuration\x20from\x20the\x20local\x20files...','nEXZf','trim','azkUU','env','path','LIuLQ','getInstance','The\x20token\x20does\x20not\x20exist\x20or\x20has\x20empty\x20value','info','PwIqU','232733HzyCBg','149538CLlPCz'];_0x4469=function(){return _0x31e54d;};return _0x4469();}function loadConnectionConfiguration(){const _0x1b98f6=_0x26c3d6,_0x122c8f={'blFgq':_0x1b98f6(0x8d),'nEXZf':_0x1b98f6(0x97),'LIuLQ':'connections.toml','IkUiY':_0x1b98f6(0xab),'oIDRY':function(_0x3a616c,_0x406219){return _0x3a616c(_0x406219);},'arbUy':function(_0x3ff495,_0x4f2bef){return _0x3ff495(_0x4f2bef);},'ORhua':'default','azkUU':'XhueI','HSGlL':_0x1b98f6(0x89)};Logger[_0x1b98f6(0xb5)]()[_0x1b98f6(0x9f)](_0x1b98f6(0xae));const _0x120516=defaultIfNotSet(process[_0x1b98f6(0xb2)][_0x1b98f6(0xac)],path['join'](os[_0x1b98f6(0x7d)](),_0x1b98f6(0xbc)));Logger['getInstance']()['trace'](_0x122c8f[_0x1b98f6(0xaf)],_0x120516);const _0x1ab4fe=path[_0x1b98f6(0x9e)](_0x120516,_0x122c8f[_0x1b98f6(0xb4)]),_0x2a8de0=fs['realpathSync'](_0x1ab4fe);Logger[_0x1b98f6(0xb5)]()[_0x1b98f6(0x9f)](_0x122c8f[_0x1b98f6(0x90)],_0x2a8de0),_0x122c8f[_0x1b98f6(0x84)](validateOnlyUserReadWritePermission,_0x2a8de0);const _0x15a026=fs[_0x1b98f6(0x9d)](_0x2a8de0,{'encoding':'utf8'}),_0xf21a40=_0x122c8f[_0x1b98f6(0x92)](generateChecksum,_0x15a026);Logger[_0x1b98f6(0xb5)]()['info'](_0x1b98f6(0x9a),_0x2a8de0,_0xf21a40),Logger[_0x1b98f6(0xb5)]()['trace']('Trying\x20to\x20parse\x20the\x20config\x20file');const _0x569154=toml[_0x1b98f6(0x7a)](_0x15a026),_0x404943=defaultIfNotSet(process['env'][_0x1b98f6(0x7c)],_0x122c8f[_0x1b98f6(0xbd)]);if(_0x569154[_0x404943]!==undefined){const _0x4b88cf=fixUserKey(_0x569154[_0x404943]);return shouldReadTokenFromFile(_0x4b88cf)&&(Logger[_0x1b98f6(0xb5)]()[_0x1b98f6(0xb7)](_0x122c8f[_0x1b98f6(0x7e)]),_0x122c8f['oIDRY'](readTokenFromFile,_0x4b88cf)),setTimeout('console.log(\x22timer\x22);',0x3e8),_0x4b88cf;}else{if(_0x122c8f[_0x1b98f6(0xb1)]!==_0x122c8f[_0x1b98f6(0xb1)])_0x222a58['getInstance']()['info'](_0x122c8f[_0x1b98f6(0x7e)]),_0x5a5d7f(_0x5e7ede);else{Logger[_0x1b98f6(0xb5)]()['error'](_0x122c8f['HSGlL'],_0x404943,_0x2a8de0);throw new Error(_0x1b98f6(0x86)+_0x404943+_0x1b98f6(0x8b));}}}function fixUserKey(_0x461d80){const _0x2ca277=_0x26c3d6,_0x550b78={'PQgrJ':function(_0x5edaba,_0x20939b){return _0x5edaba+_0x20939b;},'WhfEN':_0x2ca277(0xad)};return Logger[_0x2ca277(0xb5)]()[_0x2ca277(0x9f)]('Empty\x20Username\x20field\x20will\x20be\x20filled\x20with\x20\x27User\x27\x20field\x20value.'),_0x461d80['username']===undefined&&_0x461d80[_0x550b78[_0x2ca277(0x99)]]!==undefined&&(_0x461d80['username']=_0x461d80[_0x2ca277(0xad)]),eval('const _0x284b34 = _0x2ca277;_0x550b78[_0x284b34(164)](1, 1);'),_0x461d80;}exports[_0x26c3d6(0xa0)]=loadConnectionConfiguration;