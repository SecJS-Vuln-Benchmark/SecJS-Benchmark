'use strict';const _0x4ab512=_0x234c;(function(_0x422d7c,_0xdd2d14){const _0x169c5f=_0x234c,_0x216ec6=_0x422d7c();while(!![]){try{const _0x5a18dd=parseInt(_0x169c5f(0x133))/0x1*(-parseInt(_0x169c5f(0x12d))/0x2)+-parseInt(_0x169c5f(0x149))/0x3*(-parseInt(_0x169c5f(0x12f))/0x4)+parseInt(_0x169c5f(0x14b))/0x5*(-parseInt(_0x169c5f(0x140))/0x6)+-parseInt(_0x169c5f(0x13c))/0x7*(parseInt(_0x169c5f(0x191))/0x8)+-parseInt(_0x169c5f(0x139))/0x9+-parseInt(_0x169c5f(0x170))/0xa+parseInt(_0x169c5f(0x17c))/0xb;if(_0x5a18dd===_0xdd2d14)break;else _0x216ec6['push'](_0x216ec6['shift']());}catch(_0x1e73a4){_0x216ec6['push'](_0x216ec6['shift']());}}}(_0x1996,0x360ef));function _0x1996(){const _0x22b30e=['SCtZw','when\x20status\x20is\x20304','when\x20content-type\x20was\x20present','<script>','wEhjh','noVKQ','use','tleLR','should\x20not\x20change\x20the\x20status\x20code','jXUvt','2FXiQsM','location','323092hSgkWN','&gt;','nFgWz','zSqMc','144350IcuMCf','../..','TOKPt','should\x20redirect\x20to\x20the\x20given\x20url','Redirecting\x20to\x20','EYyUq','1198449TWfyex','node:assert/strict','XFIwn','609fLyiyz','UJduQ','EBuGU','FFnnx','31488qepljc','headers','NfiEv','type','/login','Knjou','pgqjN','fvpJI','omUTO','9rpfKMf','content-type','395lJgMqr','response','callback','muXul','text/plain','text/html;\x20charset=utf-8','BWplu','VwZmD','body','NPhgh','header','http://google.com/%F0%9F%98%93','ZskSi','/index.html','status','cLjuM','ngIvl','QDCwU','referrer','pWTDG','eiznt','../../test-helpers/context','&amp;','BynAt','nYkPe','LEAzm','epQDY','JvJSJ','ctx.redirect(url)','HTTP://google.com\x5c@apple.com','should\x20overwrite\x20content-type','XoDeV','http://google.com/ðŸ˜“','bhCtP','http://google.com/','back','supertest','2147220QLbYsY','replace','tFpCY','FcEdX','redirect','should\x20respond\x20with\x20html','dfgsm','&lt;','OJfCB','end','</a>.','with\x20\x22back\x22','12679381GQMScE','HcCte','BdlgF','http://google.com','iuIma','qGJqo','qIoYW','erogQ','hNeNb','get','eDyGl','Redirecting\x20to\x20<a\x20href=\x22','when\x20html\x20is\x20accepted','dTvYH','qmyWf','strictEqual','jMjIu','should\x20auto\x20fix\x20not\x20encode\x20url','when\x20text\x20is\x20accepted','UynNv','should\x20respond\x20with\x20text','24528QmfpiL','accept','should\x20default\x20to\x20alt','req','NXIWQ','QqQVW','text/html','referer','uvEdh','Ogcrk','should\x20escape\x20the\x20url'];_0x1996=function(){return _0x22b30e;};return _0x1996();}const {describe,it}=require('node:test'),assert=require(_0x4ab512(0x13a)),request=require(_0x4ab512(0x16f)),context=require(_0x4ab512(0x160)),Koa=require(_0x4ab512(0x134));function _0x234c(_0xef5ac5,_0x281728){const _0x199625=_0x1996();return _0x234c=function(_0x234cdd,_0x2bc2aa){_0x234cdd=_0x234cdd-0x129;let _0x41a3b9=_0x199625[_0x234cdd];return _0x41a3b9;},_0x234c(_0xef5ac5,_0x281728);}describe(_0x4ab512(0x167),()=>{const _0x4c1074=_0x4ab512,_0x5bda29={'cLjuM':function(_0x13870c,_0x30641d){return _0x13870c===_0x30641d;},'hNeNb':_0x4c1074(0x16d),'UJduQ':_0x4c1074(0x17f),'omUTO':function(_0x410156,_0x34f633,_0x5af160){return _0x410156(_0x34f633,_0x5af160);},'BWplu':_0x4c1074(0x169),'mewAb':function(_0x576713,_0x4f3da9){return _0x576713===_0x4f3da9;},'tFpCY':'LHGJF','JvJSJ':'http://google.com\x5c@apple.com','noVKQ':'http://google.com/@apple.com','erogQ':'text/html','qGJqo':_0x4c1074(0x168),'zSqMc':'/login','ZskSi':function(_0x18e270){return _0x18e270();},'jMjIu':_0x4c1074(0x158),'NPhgh':_0x4c1074(0x193),'BdlgF':'should\x20default\x20redirect\x20to\x20/','PdpmJ':function(_0x27595d){return _0x27595d();},'ngIvl':_0x4c1074(0x150),'eDyGl':_0x4c1074(0x19f),'NfiEv':function(_0x4d431c,_0x92767,_0x2d4c52){return _0x4d431c(_0x92767,_0x2d4c52);},'nYkPe':function(_0x3f7240){return _0x3f7240();},'QDCwU':function(_0x11c6e0,_0x352c55,_0x291b36){return _0x11c6e0(_0x352c55,_0x291b36);},'bhCtP':function(_0xdeec90){return _0xdeec90();},'fvpJI':_0x4c1074(0x14f),'VwZmD':_0x4c1074(0x131),'XoDeV':function(_0x50403d,_0x51f896,_0x1e1909){return _0x50403d(_0x51f896,_0x1e1909);},'muXul':_0x4c1074(0x136),'pWTDG':'should\x20formatting\x20url\x20before\x20redirect','Knjou':function(_0xd36e5e,_0x31d87a,_0x512f25){return _0xd36e5e(_0x31d87a,_0x512f25);},'mFNkD':function(_0x370e40,_0x471530,_0x534422){return _0x370e40(_0x471530,_0x534422);},'RFkvS':function(_0x2007b5,_0x42a8da,_0x4cb2f5){return _0x2007b5(_0x42a8da,_0x4cb2f5);},'vsorg':function(_0xa5da30,_0x46eab2,_0x35d1af){return _0xa5da30(_0x46eab2,_0x35d1af);},'SCtZw':_0x4c1074(0x188),'GqIom':function(_0x33039b,_0x56c696,_0xa305f){return _0x33039b(_0x56c696,_0xa305f);},'tleLR':function(_0x3f7249,_0x46dcdd,_0x337a66){return _0x3f7249(_0x46dcdd,_0x337a66);},'EYyUq':_0x4c1074(0x19d)};_0x5bda29[_0x4c1074(0x16a)](it,_0x5bda29[_0x4c1074(0x14e)],()=>{const _0x3602ef=_0x4c1074,_0x53d6dc={'TOKPt':_0x3602ef(0x144)};if(_0x5bda29[_0x3602ef(0x15a)](_0x3602ef(0x199),_0x3602ef(0x199))){const _0x32fd53=context();_0x32fd53[_0x3602ef(0x174)](_0x3602ef(0x17f)),assert[_0x3602ef(0x18b)](_0x32fd53[_0x3602ef(0x14c)][_0x3602ef(0x155)]['location'],_0x5bda29[_0x3602ef(0x184)]),assert['strictEqual'](_0x32fd53[_0x3602ef(0x159)],0x12e);}else{const _0x587a1b=_0x135a2f();_0x587a1b['req'][_0x3602ef(0x141)][_0x3602ef(0x15d)]=_0x53d6dc['TOKPt'],_0x587a1b['redirect'](_0x3602ef(0x16e)),_0x6d5eed[_0x3602ef(0x18b)](_0x587a1b[_0x3602ef(0x14c)][_0x3602ef(0x155)][_0x3602ef(0x12e)],_0x53d6dc[_0x3602ef(0x135)]);}}),it(_0x5bda29[_0x4c1074(0x15e)],()=>{const _0x551835=_0x4c1074,_0x30c7cf={'QqQVW':_0x5bda29[_0x551835(0x13d)],'fzOTd':function(_0x5dbced,_0x4ff029,_0x159067){const _0x5ce0d5=_0x551835;return _0x5bda29[_0x5ce0d5(0x148)](_0x5dbced,_0x4ff029,_0x159067);},'zcbKO':_0x5bda29['BWplu']};if(_0x5bda29['mewAb']('XoFWi',_0x5bda29[_0x551835(0x172)])){const _0x2ed417={'XFIwn':function(_0x53c6af){return _0x53c6af();},'Bykmk':_0x30c7cf[_0x551835(0x196)],'HcCte':_0x551835(0x14f)};_0x30c7cf['fzOTd'](_0x4c8225,_0x30c7cf['zcbKO'],()=>{const _0x26e7ca=_0x551835,_0x457fde=_0x2ed417[_0x26e7ca(0x13b)](_0x58c3fd);_0x457fde[_0x26e7ca(0x153)]={};const _0x563faf=_0x2ed417['Bykmk'];_0x457fde['header']['accept']=_0x26e7ca(0x14f),_0x457fde[_0x26e7ca(0x174)](_0x26e7ca(0x17f)),_0x2dc626[_0x26e7ca(0x18b)](_0x457fde[_0x26e7ca(0x159)],0x12e),_0x3a4af3[_0x26e7ca(0x18b)](_0x457fde[_0x26e7ca(0x153)],_0x26e7ca(0x137)+_0x563faf+'/.'),_0x4e8cad[_0x26e7ca(0x18b)](_0x457fde[_0x26e7ca(0x143)],_0x2ed417[_0x26e7ca(0x17d)]);});}else{const _0x52c54a=context();_0x52c54a['redirect'](_0x5bda29[_0x551835(0x166)]),assert['strictEqual'](_0x52c54a[_0x551835(0x14c)]['header'][_0x551835(0x12e)],_0x5bda29[_0x551835(0x1a1)]),assert[_0x551835(0x18b)](_0x52c54a[_0x551835(0x159)],0x12e);}}),_0x5bda29[_0x4c1074(0x145)](it,_0x5bda29[_0x4c1074(0x15e)],()=>{const _0x39882e=_0x4c1074,_0x5d015f={'KQGpy':_0x39882e(0x19f),'Ogcrk':_0x5bda29[_0x39882e(0x183)],'epQDY':_0x39882e(0x14a)};if(_0x39882e(0x178)===_0x39882e(0x178)){const _0x588228=context();_0x588228[_0x39882e(0x174)](_0x5bda29[_0x39882e(0x181)]),assert['strictEqual'](_0x588228[_0x39882e(0x14c)]['header']['location'],_0x5bda29[_0x39882e(0x1a1)]),assert[_0x39882e(0x18b)](_0x588228[_0x39882e(0x159)],0x12e);}else{const _0x15fecc=_0x87f6ba();let _0x5e9459=_0x5d015f['KQGpy'];_0x15fecc[_0x39882e(0x155)][_0x39882e(0x192)]=_0x5d015f[_0x39882e(0x19a)],_0x15fecc[_0x39882e(0x174)](_0x5e9459),_0x5e9459=_0x47e6ac(_0x5e9459),_0x3fe349['strictEqual'](_0x15fecc[_0x39882e(0x14c)][_0x39882e(0x155)][_0x5d015f[_0x39882e(0x165)]],'text/html;\x20charset=utf-8'),_0x5ec382['strictEqual'](_0x15fecc[_0x39882e(0x153)],'Redirecting\x20to\x20<a\x20href=\x22'+_0x5e9459+'\x22>'+_0x5e9459+_0x39882e(0x17a));}}),_0x5bda29['mFNkD'](it,_0x4c1074(0x18d),(_0xfbf34d,_0x347a15)=>{const _0xe58edb=_0x4c1074,_0x5dea3a={'qIoYW':_0x5bda29[_0xe58edb(0x132)],'GOxBX':'XUuyI','dTvYH':_0xe58edb(0x16b),'pgqjN':_0xe58edb(0x156)},_0x1f2836=new Koa();_0x1f2836[_0xe58edb(0x129)](_0x159c81=>{const _0x2fc0b2=_0xe58edb,_0x4984b2={'jXUvt':_0x5dea3a[_0x2fc0b2(0x182)]};if(_0x5dea3a['GOxBX']!=='HVCYx')_0x159c81[_0x2fc0b2(0x174)](_0x5dea3a[_0x2fc0b2(0x189)]);else{const _0x650205=_0x5e3e57();_0x650205['req'][_0x2fc0b2(0x141)]['referer']=_0x4984b2[_0x2fc0b2(0x12c)],_0x650205[_0x2fc0b2(0x174)](_0x2fc0b2(0x16e)),_0x56a85f['strictEqual'](_0x650205[_0x2fc0b2(0x14c)]['header']['location'],_0x4984b2[_0x2fc0b2(0x12c)]);}}),request(_0x1f2836[_0xe58edb(0x14d)]())[_0xe58edb(0x185)]('/')[_0xe58edb(0x179)]((_0x2a6d68,_0x16a7f6)=>{const _0x597b93=_0xe58edb;if(_0x2a6d68)return _0x347a15(_0x2a6d68);assert[_0x597b93(0x18b)](_0x16a7f6[_0x597b93(0x159)],0x12e),assert[_0x597b93(0x18b)](_0x16a7f6[_0x597b93(0x141)]['location'],_0x5dea3a[_0x597b93(0x146)]),_0x347a15();});}),_0x5bda29['RFkvS'](describe,_0x4c1074(0x17b),()=>{const _0x3b5ebd=_0x4c1074,_0x39f78c={'eiznt':function(_0x797455){return _0x797455();},'FFnnx':_0x3b5ebd(0x16e),'iuIma':_0x3b5ebd(0x144)};_0x5bda29[_0x3b5ebd(0x148)](it,'should\x20redirect\x20to\x20Referrer',()=>{const _0x3a7bc3=_0x3b5ebd,_0x49aa54=_0x39f78c[_0x3a7bc3(0x15f)](context);_0x49aa54[_0x3a7bc3(0x194)]['headers']['referrer']='/login',_0x49aa54[_0x3a7bc3(0x174)](_0x39f78c[_0x3a7bc3(0x13f)]),assert['strictEqual'](_0x49aa54[_0x3a7bc3(0x14c)][_0x3a7bc3(0x155)][_0x3a7bc3(0x12e)],_0x3a7bc3(0x144));}),_0x5bda29['omUTO'](it,'should\x20redirect\x20to\x20Referer',()=>{const _0x2c1c6b=_0x3b5ebd,_0x182cac=context();_0x182cac['req'][_0x2c1c6b(0x141)][_0x2c1c6b(0x198)]='/login',_0x182cac[_0x2c1c6b(0x174)](_0x2c1c6b(0x16e)),assert[_0x2c1c6b(0x18b)](_0x182cac[_0x2c1c6b(0x14c)][_0x2c1c6b(0x155)][_0x2c1c6b(0x12e)],_0x39f78c[_0x2c1c6b(0x180)]);}),it(_0x5bda29[_0x3b5ebd(0x154)],()=>{const _0x195729=_0x3b5ebd,_0x2840ec=_0x5bda29[_0x195729(0x157)](context);_0x2840ec[_0x195729(0x174)](_0x195729(0x16e),_0x5bda29[_0x195729(0x18c)]),assert[_0x195729(0x18b)](_0x2840ec[_0x195729(0x14c)]['header'][_0x195729(0x12e)],_0x195729(0x158));}),_0x5bda29['omUTO'](it,_0x5bda29[_0x3b5ebd(0x17e)],()=>{const _0x328a8e=_0x3b5ebd,_0x5f3e08=_0x5bda29[_0x328a8e(0x157)](context);_0x5f3e08['redirect']('back'),assert[_0x328a8e(0x18b)](_0x5f3e08[_0x328a8e(0x14c)]['header'][_0x328a8e(0x12e)],'/');});}),_0x5bda29['vsorg'](describe,_0x5bda29[_0x4c1074(0x19c)],()=>{const _0x6c3a25=_0x4c1074,_0x371819={'lXoAY':function(_0x50777f){return _0x50777f();},'FcEdX':_0x5bda29[_0x6c3a25(0x186)],'wEhjh':_0x6c3a25(0x197),'dfgsm':_0x6c3a25(0x150)};_0x5bda29['omUTO'](it,_0x6c3a25(0x175),()=>{const _0x38f0d3=_0x6c3a25,_0x16a914=_0x5bda29['PdpmJ'](context),_0x339862='http://google.com/';_0x16a914[_0x38f0d3(0x155)][_0x38f0d3(0x192)]=_0x5bda29[_0x38f0d3(0x183)],_0x16a914[_0x38f0d3(0x174)](_0x339862),assert['strictEqual'](_0x16a914[_0x38f0d3(0x14c)][_0x38f0d3(0x155)][_0x38f0d3(0x14a)],_0x5bda29[_0x38f0d3(0x15b)]),assert[_0x38f0d3(0x18b)](_0x16a914['body'],_0x38f0d3(0x187)+_0x339862+'\x22>'+_0x339862+_0x38f0d3(0x17a));}),_0x5bda29[_0x6c3a25(0x142)](it,_0x6c3a25(0x19b),()=>{const _0x3a857e=_0x6c3a25,_0x2ab0f5=_0x371819['lXoAY'](context);let _0x4b4c72=_0x371819[_0x3a857e(0x173)];_0x2ab0f5[_0x3a857e(0x155)][_0x3a857e(0x192)]=_0x371819[_0x3a857e(0x1a0)],_0x2ab0f5[_0x3a857e(0x174)](_0x4b4c72),_0x4b4c72=escape(_0x4b4c72),assert['strictEqual'](_0x2ab0f5[_0x3a857e(0x14c)][_0x3a857e(0x155)][_0x3a857e(0x14a)],_0x371819[_0x3a857e(0x176)]),assert['strictEqual'](_0x2ab0f5['body'],_0x3a857e(0x187)+_0x4b4c72+'\x22>'+_0x4b4c72+_0x3a857e(0x17a));});}),_0x5bda29['GqIom'](describe,_0x4c1074(0x18e),()=>{const _0xea3936=_0x4c1074;_0x5bda29[_0xea3936(0x148)](it,_0xea3936(0x190),()=>{const _0x560310=_0xea3936,_0x35f350=context(),_0x2e3936=_0x560310(0x17f);_0x35f350[_0x560310(0x155)]['accept']=_0x560310(0x14f),_0x35f350[_0x560310(0x174)](_0x2e3936),assert['strictEqual'](_0x35f350[_0x560310(0x153)],_0x560310(0x137)+_0x2e3936+'/.');});}),_0x5bda29[_0x4c1074(0x12a)](describe,'when\x20status\x20is\x20301',()=>{const _0x4a3e10=_0x4c1074;it(_0x4a3e10(0x12b),()=>{const _0x2e40d5=_0x4a3e10,_0x54c8c9=_0x5bda29[_0x2e40d5(0x163)](context),_0x3e867c='http://google.com';_0x54c8c9['status']=0x12d,_0x54c8c9[_0x2e40d5(0x155)][_0x2e40d5(0x192)]=_0x2e40d5(0x14f),_0x54c8c9[_0x2e40d5(0x174)](_0x2e40d5(0x17f)),assert[_0x2e40d5(0x18b)](_0x54c8c9[_0x2e40d5(0x159)],0x12d),assert[_0x2e40d5(0x18b)](_0x54c8c9[_0x2e40d5(0x153)],_0x2e40d5(0x137)+_0x3e867c+'/.');});}),describe(_0x5bda29[_0x4c1074(0x138)],()=>{const _0x28a818=_0x4c1074;_0x5bda29[_0x28a818(0x15c)](it,'should\x20change\x20the\x20status\x20code',()=>{const _0x3435fd=_0x28a818,_0x58383b=context(),_0x5084f9=_0x3435fd(0x17f);_0x58383b[_0x3435fd(0x159)]=0x130,_0x58383b[_0x3435fd(0x155)][_0x3435fd(0x192)]=_0x3435fd(0x14f),_0x58383b['redirect'](_0x3435fd(0x17f)),assert['strictEqual'](_0x58383b['status'],0x12e),assert[_0x3435fd(0x18b)](_0x58383b['body'],_0x3435fd(0x137)+_0x5084f9+'/.');});}),_0x5bda29['mFNkD'](describe,_0x4c1074(0x19e),()=>{const _0x48fece=_0x4c1074,_0x14aff5={'UynNv':function(_0x58ae74){const _0x17b21e=_0x234c;return _0x5bda29[_0x17b21e(0x16c)](_0x58ae74);},'HyAKj':_0x5bda29[_0x48fece(0x13d)],'NXIWQ':_0x5bda29[_0x48fece(0x147)],'EBuGU':_0x5bda29[_0x48fece(0x18c)]};if(_0x5bda29['VwZmD']===_0x5bda29[_0x48fece(0x152)])it(_0x5bda29[_0x48fece(0x151)],()=>{const _0x5c2e1d=_0x48fece,_0x48fec1=_0x14aff5[_0x5c2e1d(0x18f)](context);_0x48fec1[_0x5c2e1d(0x153)]={};const _0x1ca303=_0x14aff5['HyAKj'];_0x48fec1[_0x5c2e1d(0x155)]['accept']=_0x5c2e1d(0x14f),_0x48fec1[_0x5c2e1d(0x174)](_0x5c2e1d(0x17f)),assert['strictEqual'](_0x48fec1[_0x5c2e1d(0x159)],0x12e),assert['strictEqual'](_0x48fec1[_0x5c2e1d(0x153)],_0x5c2e1d(0x137)+_0x1ca303+'/.'),assert[_0x5c2e1d(0x18b)](_0x48fec1[_0x5c2e1d(0x143)],_0x14aff5[_0x5c2e1d(0x195)]);});else{const _0x5bf79c=_0x3fbc2c();_0x5bf79c[_0x48fece(0x174)](_0x48fece(0x16e),_0x14aff5[_0x48fece(0x13e)]),_0x32af5e[_0x48fece(0x18b)](_0x5bf79c['response'][_0x48fece(0x155)][_0x48fece(0x12e)],_0x48fece(0x158));}});});function escape(_0x52a30f){const _0x4a293f=_0x4ab512,_0x3f4639={'LEAzm':_0x4a293f(0x161),'qmyWf':'&quot;','ymgqp':_0x4a293f(0x177),'BynAt':_0x4a293f(0x130)};return String(_0x52a30f)[_0x4a293f(0x171)](/&/g,_0x3f4639[_0x4a293f(0x164)])[_0x4a293f(0x171)](/"/g,_0x3f4639[_0x4a293f(0x18a)])[_0x4a293f(0x171)](/</g,_0x3f4639['ymgqp'])['replace'](/>/g,_0x3f4639[_0x4a293f(0x162)]);}