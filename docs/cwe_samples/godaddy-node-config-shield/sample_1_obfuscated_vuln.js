function _0x1903(){var _0x3bded3=['jtHWe','.timeline-item-content','BRnJS','comment_area','VjFul','comment','bjBun','get_version_comment','empty','milestones','FUbsd','toLpH','set_docinfo','CrYkl','mNSFf','peuzt','fa\x20fa-calendar','render_timeline_item','734632Axhacv','jSShF','wTFGU','full_name','ibaFU','last_type','energy_points','FvLNY','<div>---</div>','.timeline-email-import-link','2|3|4|0|1','fields_dict','QCexy','indexOf','versions','dAuGd','qDHQe','insert_comment','copy_to_clipboard','siblings','DGDzB','PeivT','#333','fullname','FlZwi','AeZLY','prop','text','iabaF','rkwRt','content_html','.is-email','parse','pWMGh','attachments','.comment-likes','wLREJ','yTkyr','cUnNP','POATm','ZRpFQ','color','</a>','then','BRXWs','get_comments','set_icon_and_color','change','Administrator','.btn-reply-email','Reply','.timeline-email-import','checked','frappe.desk.form.load.get_communications','html','pLLdi','email_field','get_energy_point_logs','hide','utils','get_docfield','Timeline','EQAqc','session','ADEHK','frappe.desk.form.utils.add_comment','octicon\x20octicon-milestone','YRTJA','every','Delete\x20comment?','currentTarget','track_field','Edit','removeClass','index_of_communication','VfAFB','ellipsis','1123554zheJnh','usicS','UBsYp','uqLgN','comments','LyCde','reference_name','ehQsk','toggle_blockquote','zNTry','LmOHo','on_submit','exc','LvTtr','setup_like_popover','lBqeg','tJbjS','timeline','InteractionComposer','SXJXs','FYvAp','tYKlw','<a\x20href=\x22#Form/View\x20Log/','gtEOA','strip_original_content','DmsCc','iDtQq','CtBjM','message','datetime','communication_type','NRmQC','NnMWL','eKbcz','map','communications','markdown','fFnIr','.copy-to-clipboard','xGzkM','jyCnS','make_editing_area','eUtaR','rtVfT','list','set_value','find','hasClass','WLHhd','LnEcg','eHlBa','wZjRc','yiMBE','MJdwj','icon_fg','leFsj','is_communication_or_comment','filter','confirm','TVXfU','CommentArea','hYbEF','PNiFJ','4978521iMcdon','axIVy','Write','SrPuE','<div\x20class=\x22timeline-item\x22>\x09\x09\x09\x09<button\x20class=\x22btn\x20btn-default\x20btn-xs\x20btn-more\x22>More</button>\x09\x09\x09</div>','split','WDqbb','perm','jLTwO','XFIkm','bfrZu','<span\x20class=\x22label\x20label-%(style)s\x22>%(text)s</span>','icon','parent','setup_comment_like','YZOqe','.timeline-items','added','form','Comment','$editing_area','isArray','vWRPI','lsgys','lVijq','upMgK','WIlQb','owner','timeline_refresh','TvCTd','cYRMR','NBkCQ','label','setup_email_button','aKsNZ','cRDDk','get_communications','format_form_log','jKOiK','creation','QwYKd','addClass','uoAbJ','Read','UzrZn','qLtZD','html2text','is_html','user_content','Save','fvjKK','ywCdK','submit','RXzfY','comment_email','Workflow','extend','IbEab','hidden','escape_html','splice','data','octicon\x20octicon-person','GaDtV','{0}\x20from\x20{1}\x20to\x20{2}\x20in\x20row\x20#{3}','call','<a\x20class=\x22edit-comment\x20text-muted\x22\x20title=\x22Edit\x22\x20href=\x22#\x22>Edit</a>','get_milestones','6683015Laruae','viewed','Bwjiz','sort','show_subject','QMCFH','user','current_editing_area','comment_html','EiCMO','frappe.client.delete','Relinked','length','dark','Created','email_button','TqCpQ','octicon\x20octicon-check','epkBc','sidebar','Label','eYHda','vJdKX','row_changed','bgbFM','frappe.email','oKDGC','22526XUclqZ','render_template','toggle','.toggle-blockquote','get_field_display_status','push','strip_whitespace','octicon-check','content','yIbOX','lJgmN','communication_date','editing_area','new_communication','grid','RUBlc','.timeline-head','user_info','ItQUl','build_version_comments','provide','Cagaq','hllYS','beMtc','model','value','2844SYmcdQ','prepare_timeline_item','concat','.delete-comment','more','.btn-new-email','octicon\x20octicon-comment-discussion','octicon-pencil','18423819SKPvqR','cRHTe','original_content','Info','pWkdS','vqDID','yOmqm','edit','display_automatic_link_email','button','okgWl','Olffl','click','936510eXHbwV','wDUHk','.btn-more','nBUpN','docstatus','subject','fQAzT','xvcEI','join','lcQmw','QjtPl','get_names_for_mentions','refresh_comments','bVJtW','QPCub','Kuggu','.edit-comment','fBWlp','zRMYS','bUeuc','email','MDtVW','octicon\x20octicon-x','sender','jXlla','bold','octicon\x20octicon-lock','<a\x20href=\x22#Form/Version/','update_comment','{0}\x20changed\x20{1}\x20to\x20{2}','wNjzy','meta','guess_style','OvADT','get_last_email','_liked_by','liVoh','changed','energy_point_logs','FHoNS','XLACj','VsWFA','refresh','comment_type','get_recipient','vXJTe','CommunicationComposer','octicon\x20octicon-mail','comment_by','Communication','show','add_reply_btn_event','reference_doctype','get_view_logs','lUVkP','make_control','qRsXZ','get_label','hPswR','YUrzo','pzOiE','BzfwF','enVux','mzauh','docname','JpOTi','givVr','octicon\x20octicon-git-branch','cast_comment_as_communication','.reply-link-all','sender_full_name','communication_medium','oVuMD','BBcbJ','.timeline-item-edit','forEach','10aRuBIx','doctype','delete_comment','allowed_in_mentions','vpSzV','.btn-new-interaction','doc','string','comment_on_small','email_link','frappe.desk.form.utils.update_comment','kofVp','kcXgM','destroy','lrIPy','Email','.reply-link,\x20.reply-link-all','BKHNV','delete','submitted\x20this\x20document','changed\x20values\x20for\x20{0}','email_id','EToCU','4|3|2|0|1|5','QreVt','make','frm','wrapper','keys','views','get_value','Guest','Energy\x20Points','{0}\x20rows\x20for\x20{1}','Re:\x20{0}','title_field','LJRRK','Milestone','XwHsn','xDren','get_docinfo','octicon\x20octicon-tag','\x22>\x20','jyKQq','name','{0}\x20from\x20{1}\x20to\x20{2}','XbuGb','SZnuu','boot','set_automatic_link_email','fa\x20fa-check','4BEIIay','<a\x20class=\x22close\x20delete-comment\x22\x20title=\x22Delete\x22\x20\x20href=\x22#\x22><i\x20class=\x22octicon\x20octicon-x\x22></i></a>','khEtQ','tWikd','XsOnX','APUqR','octicon\x20octicon-device-mobile','update_communication','includes','play_sound','automatic_link_email','VULlg','Feedback','appendTo','octicon\x20octicon-circle-slash','octicon\x20octicon-comment','FLFRo','is-editing','cancelled\x20this\x20document'];_0x1903=function(){return _0x3bded3;};return _0x1903();}var _0x2fa9aa=_0x1653;function _0x1653(_0x4f065b,_0x22b62c){var _0x190394=_0x1903();return _0x1653=function(_0x16539b,_0x1d29aa){_0x16539b=_0x16539b-0x1e0;var _0x207288=_0x190394[_0x16539b];return _0x207288;},_0x1653(_0x4f065b,_0x22b62c);}(function(_0x5ddb3a,_0x5ea154){var _0x50b416=_0x1653,_0x2680d5=_0x5ddb3a();while(!![]){try{var _0x3f33dd=parseInt(_0x50b416(0x334))/0x1+parseInt(_0x50b416(0x243))/0x2+-parseInt(_0x50b416(0x373))/0x3+parseInt(_0x50b416(0x2c2))/0x4*(parseInt(_0x50b416(0x1f9))/0x5)+parseInt(_0x50b416(0x22e))/0x6*(parseInt(_0x50b416(0x214))/0x7)+parseInt(_0x50b416(0x2e7))/0x8+parseInt(_0x50b416(0x236))/0x9*(-parseInt(_0x50b416(0x28f))/0xa);if(_0x3f33dd===_0x5ea154)break;else _0x2680d5['push'](_0x2680d5['shift']());}catch(_0x5067c4){_0x2680d5['push'](_0x2680d5['shift']());}}}(_0x1903,0xccd3f),frappe[_0x2fa9aa(0x228)]('frappe.timeline'),frappe[_0x2fa9aa(0x228)](_0x2fa9aa(0x212)),frappe['separator_element']=_0x2fa9aa(0x2ef),frappe['ui'][_0x2fa9aa(0x385)][_0x2fa9aa(0x324)]=class Timeline{constructor(_0x6c7852){var _0x519985=_0x2fa9aa;$[_0x519985(0x1ed)](this,_0x6c7852),this[_0x519985(0x2a8)]();}[_0x2fa9aa(0x2a8)](){var _0x365d70=_0x2fa9aa,_0x45b80c={'rtVfT':function(_0x58e059,_0x1aedfd){return _0x58e059(_0x1aedfd);},'vqDID':function(_0xd3d6b1,_0x467e15){return _0xd3d6b1<_0x467e15;},'jVLGH':_0x365d70(0x31c),'nCuZS':_0x365d70(0x345),'rkwRt':_0x365d70(0x383),'hPswR':_0x365d70(0x386),'FUbsd':_0x365d70(0x242),'AHnmy':_0x365d70(0x245)},_0x3c9494=this;this[_0x365d70(0x2aa)]=$(frappe[_0x365d70(0x215)](_0x45b80c['nCuZS'],{'doctype':_0x3c9494[_0x365d70(0x2a9)]['doctype'],'allow_events_in_timeline':_0x3c9494[_0x365d70(0x2a9)]['meta']['allow_events_in_timeline']}))[_0x365d70(0x2cf)](_0x3c9494[_0x365d70(0x380)]),this[_0x365d70(0x2c0)](),this[_0x365d70(0x360)]=this[_0x365d70(0x2aa)][_0x365d70(0x362)](_0x45b80c[_0x365d70(0x304)]),this['email_link']=this[_0x365d70(0x2aa)][_0x365d70(0x362)](_0x365d70(0x31a)),this['comment_area']=frappe['ui']['form'][_0x365d70(0x27a)]({'parent':this['wrapper'][_0x365d70(0x362)](_0x365d70(0x224)),'df':{'fieldtype':'Comment','fieldname':_0x365d70(0x2da),'label':_0x45b80c[_0x365d70(0x27d)]},'mentions':this['get_names_for_mentions'](),'render_input':!![],'only_input':!![],'on_submit':_0x9362f7=>{var _0x2d1179=_0x365d70;strip_html(_0x9362f7)&&this['insert_comment'](_0x9362f7,this[_0x2d1179(0x2d8)][_0x2d1179(0x23f)]);}}),this['setup_email_button'](),this['setup_interaction_button'](),this[_0x365d70(0x360)]['on'](_0x45b80c[_0x365d70(0x2df)],_0x365d70(0x217),function(){var _0x52a7fb=_0x365d70;_0x45b80c[_0x52a7fb(0x35f)]($,this)['parent']()[_0x52a7fb(0x2fa)]('blockquote')['toggleClass'](_0x52a7fb(0x1ef));}),this[_0x365d70(0x381)](),this[_0x365d70(0x360)]['on'](_0x365d70(0x242),_0x45b80c['AHnmy'],function(){var _0x2e577b=_0x365d70,_0x108010=_0x3c9494[_0x2e577b(0x397)]();frappe[_0x2e577b(0x1f6)]({'btn':this,'method':_0x45b80c['jVLGH'],'args':{'doctype':_0x3c9494[_0x2e577b(0x2a9)][_0x2e577b(0x295)][_0x2e577b(0x290)],'name':_0x3c9494[_0x2e577b(0x2a9)][_0x2e577b(0x295)][_0x2e577b(0x2bb)],'start':_0x108010['length']},'callback':function(_0x477651){var _0x3796dd=_0x2e577b;if(!_0x477651[_0x3796dd(0x340)]){if(_0x477651[_0x3796dd(0x350)]){var _0x51d67=_0x477651[_0x3796dd(0x350)],_0x45cb72=_0x3c9494[_0x3796dd(0x397)]()[_0x3796dd(0x230)](_0x51d67);frappe[_0x3796dd(0x22c)][_0x3796dd(0x2e1)](_0x3c9494['frm'][_0x3796dd(0x295)][_0x3796dd(0x290)],_0x3c9494['frm'][_0x3796dd(0x295)]['name'],_0x3796dd(0x357),_0x45cb72),_0x45b80c[_0x3796dd(0x23b)](_0x51d67[_0x3796dd(0x205)],0x14)&&(_0x3c9494['more']=![]);}else _0x3c9494['more']=![];_0x3c9494[_0x3796dd(0x26d)]();}}});}),this[_0x365d70(0x298)]['on'](_0x45b80c['FUbsd'],function(_0x295da6){var _0x16e911=_0x365d70;let _0x248465=$(_0x295da6[_0x16e911(0x32d)])[_0x16e911(0x362)](_0x16e911(0x35a))[_0x16e911(0x302)]();frappe[_0x16e911(0x322)][_0x16e911(0x2f9)](_0x248465);});}[_0x2fa9aa(0x394)](){var _0x4e9a8a=_0x2fa9aa,_0x2e4cd1={'ibaFU':function(_0x3c022a,_0x365018){return _0x3c022a===_0x365018;},'pWMGh':'Read','beMtc':_0x4e9a8a(0x375),'Olffl':function(_0x18b680,_0x503f0b,_0x56d100){return _0x18b680(_0x503f0b,_0x56d100);},'bjBun':_0x4e9a8a(0x341),'TvCTd':_0x4e9a8a(0x2f7),'PeivT':_0x4e9a8a(0x258),'qLtZD':function(_0x53814e,_0x8a398c){return _0x53814e(_0x8a398c);},'pWkdS':_0x4e9a8a(0x274),'DbleQ':_0x4e9a8a(0x318)},_0x2896f1=this,_0x4b776d=this['frm'][_0x4e9a8a(0x290)]===_0x2e4cd1[_0x4e9a8a(0x23a)]?_0x2e4cd1['DbleQ']:_0x4e9a8a(0x233);this[_0x4e9a8a(0x208)]=this['wrapper'][_0x4e9a8a(0x362)](_0x4b776d)['on'](_0x4e9a8a(0x242),function(){var _0x21b5a7=_0x4e9a8a;const _0x43a8d5=$(this);let _0x50f919=!![];_0x43a8d5['is'](_0x21b5a7(0x233))&&(_0x50f919=![]);var _0x220b5d={'doc':_0x2896f1['frm'][_0x21b5a7(0x295)],'frm':_0x2896f1[_0x21b5a7(0x2a9)],'recipients':_0x2896f1[_0x21b5a7(0x26f)](),'is_a_reply':_0x50f919};if(_0x2896f1['frm']['doctype']===_0x21b5a7(0x274))_0x2e4cd1[_0x21b5a7(0x2db)]==='LvTtr'?$[_0x21b5a7(0x1ed)](_0x220b5d,{'txt':'','last_email':_0x2896f1[_0x21b5a7(0x2a9)][_0x21b5a7(0x295)],'recipients':_0x2896f1['frm'][_0x21b5a7(0x295)][_0x21b5a7(0x25a)],'subject':__(_0x21b5a7(0x2b1),[_0x2896f1['frm'][_0x21b5a7(0x295)][_0x21b5a7(0x248)]])}):(_0x5326bd&&_0x2e8471['message']?_0x1ef2ec['email'][_0x21b5a7(0x2cc)]=_0x774d28[_0x21b5a7(0x350)]:_0x2bd3a5['email'][_0x21b5a7(0x2cc)]=null,this[_0x21b5a7(0x23e)]());else{if(_0x2e4cd1[_0x21b5a7(0x2eb)](_0x2e4cd1[_0x21b5a7(0x390)],_0x2e4cd1[_0x21b5a7(0x2fc)])){var _0x2e373b=_0x5d4530[_0x21b5a7(0x37a)][_0x21b5a7(0x218)](_0x111d6e,null,_0x494bb9[_0x21b5a7(0x2a9)][_0x21b5a7(0x37a)]);(_0x2e4cd1[_0x21b5a7(0x2eb)](_0x2e373b,_0x2e4cd1[_0x21b5a7(0x308)])||_0x2e373b===_0x2e4cd1[_0x21b5a7(0x22b)])&&_0x211e9d['push'](_0x2e4cd1[_0x21b5a7(0x241)](_0x3abd3f,'{0}\x20from\x20{1}\x20to\x20{2}\x20in\x20row\x20#{3}',[_0x43df43['meta'][_0x21b5a7(0x27c)](_0x2fa96e[_0x21b5a7(0x2a9)]['fields_dict'][_0x578d42[0x0]][_0x21b5a7(0x222)][_0x21b5a7(0x290)],_0x1b8449[0x0]),(_0x576dc1[_0x21b5a7(0x333)](_0x47803d[0x1],0x28)||'\x22\x22')[_0x21b5a7(0x25c)](),(_0x71c1ca[_0x21b5a7(0x333)](_0x22ba18[0x2],0x28)||'\x22\x22')['bold'](),_0x210b9a[0x1]]));}else{const _0x1bd265=frappe[_0x21b5a7(0x358)](_0x2896f1[_0x21b5a7(0x2d8)][_0x21b5a7(0x2ad)]());$[_0x21b5a7(0x1ed)](_0x220b5d,{'txt':_0x2e4cd1[_0x21b5a7(0x1e2)](strip_html,_0x1bd265)?_0x1bd265:''});}}new frappe[(_0x21b5a7(0x2ac))][(_0x21b5a7(0x271))](_0x220b5d);});}['set_automatic_link_email'](){var _0x63302d=_0x2fa9aa,_0xce3e68={'QwYKd':'BwCZh'};!frappe[_0x63302d(0x257)][_0x63302d(0x2cc)]?frappe[_0x63302d(0x1f6)]('frappe.email.doctype.email_account.email_account.get_automatic_email_link')[_0x63302d(0x312)](_0x1ff768=>{var _0x141d1b=_0x63302d;_0x1ff768&&_0x1ff768[_0x141d1b(0x350)]?frappe[_0x141d1b(0x257)][_0x141d1b(0x2cc)]=_0x1ff768[_0x141d1b(0x350)]:_0xce3e68[_0x141d1b(0x39b)]!=='BwCZh'?_0x217050(_0x141d1b(0x377))[_0x141d1b(0x2cf)](_0x42c870[_0x141d1b(0x360)]):frappe[_0x141d1b(0x257)][_0x141d1b(0x2cc)]=null,this['display_automatic_link_email']();}):this[_0x63302d(0x23e)]();}[_0x2fa9aa(0x23e)](){var _0x325d20=_0x2fa9aa,_0x213f26={'zNTry':function(_0x398ec0,_0x541185){return _0x398ec0+_0x541185;},'zRMYS':function(_0x5b7a9d,_0x1ed01d){return _0x5b7a9d+_0x1ed01d;},'VfAFB':function(_0x1a8735,_0x4f3f14){return _0x1a8735(_0x4f3f14);},'xvcEI':_0x325d20(0x31a)},_0x253048=this;if(frappe['email'][_0x325d20(0x2cc)]){let _0x335a64=frappe[_0x325d20(0x257)]['automatic_link_email'];_0x335a64=_0x213f26[_0x325d20(0x33d)](_0x213f26[_0x325d20(0x255)](_0x335a64['split']('@')[0x0]+'+'+_0x213f26[_0x325d20(0x332)](encodeURIComponent,_0x253048['frm'][_0x325d20(0x290)]),'+'),_0x213f26[_0x325d20(0x332)](encodeURIComponent,_0x253048['frm'][_0x325d20(0x283)]))+'@'+_0x335a64[_0x325d20(0x378)]('@')[0x1],_0x213f26[_0x325d20(0x332)]($,_0x325d20(0x2f0))[_0x325d20(0x302)](_0x335a64);}else _0x213f26[_0x325d20(0x332)]($,_0x213f26[_0x325d20(0x24a)])['addClass'](_0x325d20(0x321));}['setup_interaction_button'](){var _0x254d71=_0x2fa9aa,_0x2b802e={'eUtaR':function(_0x2646aa,_0x5ae85b){return _0x2646aa===_0x5ae85b;},'ZRpFQ':_0x254d71(0x294),'tJbjS':'click'},_0xe111b4=this,_0x25503f=_0x2b802e[_0x254d71(0x30f)];this['activity_button']=this[_0x254d71(0x2aa)][_0x254d71(0x362)](_0x25503f)['on'](_0x2b802e[_0x254d71(0x344)],function(){var _0x43a8c0=_0x254d71;if(_0x2b802e[_0x43a8c0(0x35e)](_0x43a8c0(0x2c6),_0x43a8c0(0x2c6))){var _0x33329d={'doc':_0xe111b4[_0x43a8c0(0x2a9)][_0x43a8c0(0x295)],'frm':_0xe111b4[_0x43a8c0(0x2a9)],'recipients':_0xe111b4[_0x43a8c0(0x26f)]()};$[_0x43a8c0(0x1ed)](_0x33329d,{'txt':frappe['markdown'](_0xe111b4['comment_area']['get_value']())}),new frappe[(_0x43a8c0(0x2ac))][(_0x43a8c0(0x346))](_0x33329d);}else _0x259530=![];});}['setup_editing_area'](){var _0x6398f7=_0x2fa9aa,_0x5f3aa9={'lsgys':function(_0x4e00f8,_0x1bd1fb){return _0x4e00f8(_0x1bd1fb);},'lBqeg':'<div\x20class=\x22timeline-editing-area\x22>'};this['$editing_area']=_0x5f3aa9[_0x6398f7(0x38a)]($,_0x5f3aa9[_0x6398f7(0x343)]),this[_0x6398f7(0x220)]=new frappe['ui'][(_0x6398f7(0x370))]({'parent':this[_0x6398f7(0x387)],'mentions':this[_0x6398f7(0x24e)](),'no_wrapper':!![]}),this[_0x6398f7(0x220)][_0x6398f7(0x29c)]();}[_0x2fa9aa(0x26d)](_0xc61323){var _0x2ceb88=_0x2fa9aa,_0x2ddc8c={'YUrzo':_0x2ceb88(0x386),'fQAzT':function(_0x233a69,_0x36a064){return _0x233a69===_0x36a064;},'RXzfY':'<div\x20class=\x22timeline-item\x22>\x09\x09\x09\x09<button\x20class=\x22btn\x20btn-default\x20btn-xs\x20btn-more\x22>More</button>\x09\x09\x09</div>','lVijq':function(_0x5e3b42,_0x55c0df){return _0x5e3b42(_0x55c0df);},'Cagaq':_0x2ceb88(0x207),'ibWkG':_0x2ceb88(0x29e)},_0x2e11d5=this;this['last_type']=_0x2ddc8c[_0x2ceb88(0x27e)];if(this[_0x2ceb88(0x2a9)][_0x2ceb88(0x295)]['__islocal']){this[_0x2ceb88(0x2aa)]['toggle'](![]);return;}this[_0x2ceb88(0x2aa)][_0x2ceb88(0x216)](!![]),this[_0x2ceb88(0x360)][_0x2ceb88(0x2dd)](),this[_0x2ceb88(0x2d8)]['set_value']('');let _0x41e246=this[_0x2ceb88(0x397)](!![]);var _0x19fff3=this[_0x2ceb88(0x278)](),_0x4561c8=_0x41e246[_0x2ceb88(0x230)](_0x19fff3);_0x4561c8=_0x4561c8[_0x2ceb88(0x230)](this[_0x2ceb88(0x314)]()),_0x4561c8=_0x4561c8[_0x2ceb88(0x230)](this[_0x2ceb88(0x320)]()),_0x4561c8=_0x4561c8[_0x2ceb88(0x230)](this[_0x2ceb88(0x1f8)]()),_0x4561c8[_0x2ceb88(0x36d)](_0x5dab6e=>_0x5dab6e[_0x2ceb88(0x21c)])[_0x2ceb88(0x1fc)]((_0x21b9d1,_0x3c5ca0)=>_0x2e11d5['compare_dates'](_0x21b9d1,_0x3c5ca0))['forEach'](_0x5bce60=>{var _0x1314f8=_0x2ceb88;_0x5bce60['frm']=_0x2e11d5[_0x1314f8(0x2a9)],_0x2e11d5['render_timeline_item'](_0x5bce60);}),this[_0x2ceb88(0x232)]===undefined&&_0x2ddc8c[_0x2ceb88(0x249)](_0x4561c8[_0x2ceb88(0x205)],0x14)&&(this[_0x2ceb88(0x232)]=!![]),this[_0x2ceb88(0x232)]&&$(_0x2ddc8c[_0x2ceb88(0x1ea)])[_0x2ceb88(0x2cf)](_0x2e11d5['list']),_0x2e11d5[_0x2ceb88(0x2e6)]({'content':_0x2ddc8c[_0x2ceb88(0x38b)](__,'created'),'comment_type':_0x2ddc8c[_0x2ceb88(0x229)],'communication_type':'Comment','sender':this['frm']['doc']['owner'],'communication_date':this[_0x2ceb88(0x2a9)][_0x2ceb88(0x295)]['creation'],'creation':this[_0x2ceb88(0x2a9)][_0x2ceb88(0x295)][_0x2ceb88(0x39a)],'frm':this[_0x2ceb88(0x2a9)]}),this[_0x2ceb88(0x2aa)][_0x2ceb88(0x362)](_0x2ceb88(0x306))[_0x2ceb88(0x301)](_0x2ceb88(0x31b),this[_0x2ceb88(0x2ec)]===_0x2ddc8c['ibWkG'])[_0x2ceb88(0x316)](),this['frm'][_0x2ceb88(0x20c)][_0x2ceb88(0x24f)](),this['frm']['trigger'](_0x2ceb88(0x38f));}['compare_dates'](_0x42f8b1,_0x3de7ab){var _0x2e6249=_0x2fa9aa,_0x1b4a4d={'VHkwf':function(_0x33faa1,_0x6fd7c3){return _0x33faa1>_0x6fd7c3;}};let _0x1f375f=_0x42f8b1[_0x2e6249(0x21f)]?_0x42f8b1[_0x2e6249(0x21f)]:_0x42f8b1['creation'],_0x576805=_0x3de7ab['communication_date']?_0x3de7ab[_0x2e6249(0x21f)]:_0x3de7ab[_0x2e6249(0x39a)],_0x42f4ea=_0x1b4a4d['VHkwf'](new Date(_0x1f375f),new Date(_0x576805))?-0x1:0x1;return _0x42f4ea;}[_0x2fa9aa(0x35d)](_0x3d434c){var _0x3bd53b=_0x2fa9aa,_0xd3e9cc={'ItQUl':_0x3bd53b(0x386)};return frappe['ui'][_0x3bd53b(0x385)][_0x3bd53b(0x27a)]({'parent':_0x3d434c,'df':{'fieldtype':_0xd3e9cc[_0x3bd53b(0x226)],'fieldname':'comment','label':_0x3bd53b(0x386)},'mentions':this[_0x3bd53b(0x24e)](),'render_input':!![],'only_input':!![],'no_wrapper':!![]});}['render_timeline_item'](_0x25cf43){var _0x40b075=_0x2fa9aa,_0x57f12f={'Kuggu':'.timeline-item-content','FvLNY':_0x40b075(0x28d),'bfrZu':_0x40b075(0x21b),'lUVkP':_0x40b075(0x2d3),'wDUHk':'timeline_item','vpSzV':_0x40b075(0x231),'bgbFM':_0x40b075(0x253),'peuzt':function(_0x4958d5,_0x483742){return _0x4958d5===_0x483742;},'NBkCQ':_0x40b075(0x29e)},_0x539211=this;this['prepare_timeline_item'](_0x25cf43);var _0x3c361c=$(frappe[_0x40b075(0x215)](_0x57f12f[_0x40b075(0x244)],{'data':_0x25cf43,'frm':this[_0x40b075(0x2a9)]}))['appendTo'](_0x539211[_0x40b075(0x360)])['on'](_0x40b075(0x242),_0x57f12f[_0x40b075(0x293)],function(){var _0x4dbaa2=_0x40b075,_0x32f597=_0x3c361c['data'](_0x4dbaa2(0x2bb));return _0x539211[_0x4dbaa2(0x291)](_0x32f597),![];})['on'](_0x40b075(0x242),_0x57f12f[_0x40b075(0x211)],function(_0x3158ff){var _0x15a39b=_0x40b075;_0x3158ff['preventDefault']();var _0x3d61cd=_0x3c361c[_0x15a39b(0x1f2)](_0x15a39b(0x2bb));if(_0x3c361c[_0x15a39b(0x363)](_0x15a39b(0x2d3)))_0x539211[_0x15a39b(0x200)]['submit']();else{const _0x1c041c=$(this),_0x37be43=_0x3c361c['find'](_0x57f12f[_0x15a39b(0x252)]),_0x23cddc=_0x3c361c[_0x15a39b(0x362)](_0x57f12f[_0x15a39b(0x2ee)]),_0x3f2346=_0x37be43[_0x15a39b(0x31d)]();_0x1c041c[_0x15a39b(0x302)](__('Save'))[_0x15a39b(0x362)]('i')[_0x15a39b(0x330)](_0x15a39b(0x235))['addClass'](_0x57f12f[_0x15a39b(0x37d)]),_0x37be43[_0x15a39b(0x321)](),_0x3c361c['addClass'](_0x57f12f[_0x15a39b(0x279)]),_0x539211[_0x15a39b(0x200)]=_0x539211[_0x15a39b(0x35d)](_0x23cddc),_0x539211[_0x15a39b(0x200)][_0x15a39b(0x361)](_0x3f2346),_0x539211[_0x15a39b(0x200)][_0x15a39b(0x33f)]=_0x585fcd=>{var _0x25c873=_0x15a39b;_0x23cddc[_0x25c873(0x2dd)](),_0x37be43[_0x25c873(0x275)](),_0x25cf43[_0x25c873(0x21c)]=_0x585fcd,frappe[_0x25c873(0x345)][_0x25c873(0x2c9)](_0x25cf43),_0x539211[_0x25c873(0x25f)](_0x3d61cd,_0x585fcd),_0x539211[_0x25c873(0x26d)]();};}return![];});_0x25cf43[_0x40b075(0x352)]==_0x40b075(0x274)&&_0x57f12f[_0x40b075(0x2e4)](_0x25cf43[_0x40b075(0x28a)],_0x57f12f[_0x40b075(0x392)])&&(this[_0x40b075(0x2ec)]=_0x25cf43[_0x40b075(0x28a)],this[_0x40b075(0x276)](_0x3c361c,_0x25cf43));}[_0x2fa9aa(0x276)](_0x2a0f90,_0x4858f3){var _0x4a8c7c=_0x2fa9aa,_0x312406={'RUBlc':_0x4a8c7c(0x288),'Bwjiz':_0x4a8c7c(0x242),'ywCdK':_0x4a8c7c(0x29f)};_0x2a0f90['on'](_0x312406[_0x4a8c7c(0x1fb)],_0x312406[_0x4a8c7c(0x1e8)],_0x43fff5=>{var _0x493f10=_0x4a8c7c,_0x403e99=null;const _0x1e1142=$(_0x43fff5[_0x493f10(0x32d)]),_0x42e176=_0x1e1142[_0x493f10(0x1f2)]()[_0x493f10(0x2bb)];this[_0x493f10(0x397)]()[_0x493f10(0x28e)](function(_0x585571){var _0x246e30=_0x493f10;if(_0x585571[_0x246e30(0x2bb)]==_0x42e176)return _0x403e99=_0x585571,![];});const _0x4490c3={'doc':this[_0x493f10(0x2a9)]['doc'],'txt':'','title':__(_0x493f10(0x319)),'frm':this['frm'],'last_email':_0x403e99,'is_a_reply':!![]};_0x1e1142['is'](_0x312406[_0x493f10(0x223)])&&(_0x403e99&&(_0x4490c3['cc']=_0x403e99['cc'],_0x4490c3['bcc']=_0x403e99['bcc'])),new frappe[(_0x493f10(0x2ac))][(_0x493f10(0x271))](_0x4490c3);});}[_0x2fa9aa(0x22f)](_0x1a908e){var _0x4abaab=_0x2fa9aa,_0x37226f={'mNSFf':function(_0x3a20a1,_0x2a96e4){return _0x3a20a1+_0x2a96e4;},'mHawY':function(_0x2b557f,_0x4c2165){return _0x2b557f+_0x4c2165;},'usicS':_0x4abaab(0x25e),'CGZNT':_0x4abaab(0x32f),'EiCMO':_0x4abaab(0x2d3),'cRDDk':_0x4abaab(0x2d6),'mzauh':_0x4abaab(0x1e6),'epkBc':_0x4abaab(0x235),'PAbsn':function(_0x248202,_0x38c84b){return _0x248202!==_0x38c84b;},'OvADT':_0x4abaab(0x23d),'JpOTi':function(_0x1b9fb1,_0x19eb62){return _0x1b9fb1==_0x19eb62;},'eKbcz':function(_0x4f9c56,_0x506489){return _0x4f9c56===_0x506489;},'iDtQq':'Comment','LmOHo':_0x4abaab(0x22a),'liVoh':_0x4abaab(0x2a1),'cYRMR':_0x4abaab(0x2c3),'XFIkm':function(_0xe974ce,_0x5b518b){return _0xe974ce>_0x5b518b;},'vWRPI':function(_0x15918b,_0x39495a){return _0x15918b===_0x39495a;},'WDqbb':_0x4abaab(0x296),'nBUpN':_0x4abaab(0x1ec),'kcXgM':function(_0xbc39e0,_0x2ce4d3){return _0xbc39e0===_0x2ce4d3;},'NRmQC':_0x4abaab(0x354),'OCfDe':function(_0x53aa98,_0xcc4a3d,_0x3de14a){return _0x53aa98(_0xcc4a3d,_0x3de14a);},'FYvAp':_0x4abaab(0x37e),'lcQmw':function(_0x2f51bc,_0x57eeb7){return _0x2f51bc(_0x57eeb7);},'uJitc':_0x4abaab(0x274),'PNiFJ':_0x4abaab(0x250),'ZvrnS':function(_0xf4cfd0,_0x298f61){return _0xf4cfd0(_0x298f61);},'enVux':function(_0x2b6fba,_0x22f5d5){return _0x2b6fba===_0x22f5d5;}};if(!_0x1a908e[_0x4abaab(0x25a)])_0x1a908e['sender']=_0x1a908e[_0x4abaab(0x38e)]||_0x4abaab(0x2ae);_0x1a908e[_0x4abaab(0x25a)]&&_0x37226f['PAbsn'](_0x1a908e['sender'][_0x4abaab(0x2f4)]('<'),-0x1)&&(_0x1a908e[_0x4abaab(0x25a)]=_0x1a908e[_0x4abaab(0x25a)][_0x4abaab(0x378)]('<')[0x1][_0x4abaab(0x378)]('>')[0x0]);_0x1a908e[_0x4abaab(0x225)]=frappe[_0x4abaab(0x225)](_0x1a908e['sender']),_0x1a908e[_0x4abaab(0x2a1)]='',_0x1a908e[_0x37226f['OvADT']]='';if(_0x37226f[_0x4abaab(0x284)](_0x1a908e[_0x4abaab(0x352)],_0x4abaab(0x386))&&_0x37226f[_0x4abaab(0x355)](_0x1a908e[_0x4abaab(0x26e)]||_0x37226f[_0x4abaab(0x34e)],_0x4abaab(0x386))){if(frappe[_0x4abaab(0x22c)]['can_delete'](_0x37226f[_0x4abaab(0x34e)])){if(_0x37226f['PAbsn'](_0x37226f[_0x4abaab(0x33e)],_0x4abaab(0x1e7)))_0x1a908e[_0x37226f[_0x4abaab(0x267)]]=_0x37226f[_0x4abaab(0x391)];else return!_0xa78d85&&(_0x3b2e5e=_0x37226f[_0x4abaab(0x2e3)](_0x37226f['mHawY'](_0x37226f[_0x4abaab(0x335)],_0x2db7b5[_0x4abaab(0x2bb)])+'\x22>',_0x3b3d55)+'</a>'),{'comment_type':_0x38540e||_0x37226f['CGZNT'],'creation':_0x33bc7f['creation'],'owner':_0x313aa8[_0x4abaab(0x38e)],'version_name':_0x2e7d7d[_0x4abaab(0x2bb)],'sender':_0x4bf716[_0x4abaab(0x38e)],'comment_by':_0x40da01[_0x4abaab(0x38e)],'content':_0x45b336};}(frappe[_0x4abaab(0x1ff)][_0x4abaab(0x2bb)]==_0x1a908e[_0x4abaab(0x25a)]||_0x37226f['JpOTi'](frappe['user'][_0x4abaab(0x2bb)],_0x4abaab(0x317)))&&(_0x1a908e[_0x37226f[_0x4abaab(0x264)]]=_0x4abaab(0x1f7));}let _0x1ef972=_0x1a908e[_0x4abaab(0x21f)]||_0x1a908e[_0x4abaab(0x39a)];_0x1a908e[_0x4abaab(0x297)]=comment_when(_0x1ef972,!![]),_0x1a908e['comment_on']=comment_when(_0x1ef972),_0x1a908e['futur_date']=_0x37226f[_0x4abaab(0x37c)](_0x1ef972,frappe[_0x4abaab(0x351)]['now_datetime']())?!![]:![];!_0x1a908e[_0x4abaab(0x2fe)]&&(_0x1a908e['fullname']=_0x1a908e['sender_full_name']||frappe[_0x4abaab(0x1ff)][_0x4abaab(0x2ea)](_0x1a908e[_0x4abaab(0x25a)]));if(_0x1a908e[_0x4abaab(0x309)]&&_0x37226f['vWRPI'](typeof _0x1a908e[_0x4abaab(0x309)],_0x37226f[_0x4abaab(0x379)]))_0x1a908e[_0x4abaab(0x309)]=JSON[_0x4abaab(0x307)](_0x1a908e[_0x4abaab(0x309)]);_0x1a908e[_0x4abaab(0x352)]==_0x37226f[_0x4abaab(0x34e)]&&!_0x1a908e[_0x4abaab(0x26e)]&&(_0x1a908e['comment_type']=_0x37226f[_0x4abaab(0x34e)]);this[_0x4abaab(0x315)](_0x1a908e);if(_0x37226f[_0x4abaab(0x389)](_0x1a908e[_0x4abaab(0x26e)],_0x37226f[_0x4abaab(0x246)])||_0x37226f[_0x4abaab(0x29b)](_0x1a908e[_0x4abaab(0x26e)],_0x4abaab(0x20d)))_0x37226f['PAbsn'](_0x37226f[_0x4abaab(0x353)],_0x37226f[_0x4abaab(0x353)])?this[_0x4abaab(0x23e)]():_0x1a908e[_0x4abaab(0x201)]=_0x37226f['OCfDe'](repl,_0x37226f[_0x4abaab(0x348)],{'style':frappe['utils'][_0x4abaab(0x263)](_0x1a908e['content']),'text':_0x37226f[_0x4abaab(0x24c)](__,_0x1a908e[_0x4abaab(0x21c)])});else{if(_0x1a908e[_0x4abaab(0x352)]==_0x37226f['uJitc']&&_0x37226f[_0x4abaab(0x284)](_0x1a908e['communication_medium'],_0x4abaab(0x29e)))_0x1a908e[_0x4abaab(0x21c)]=_0x1a908e[_0x4abaab(0x21c)][_0x4abaab(0x378)](frappe['separator_element'])[0x0],_0x1a908e[_0x4abaab(0x21c)]=frappe['utils'][_0x4abaab(0x34c)](_0x1a908e[_0x4abaab(0x21c)]),_0x1a908e[_0x4abaab(0x238)]=_0x1a908e[_0x4abaab(0x21c)],_0x1a908e['content']=frappe[_0x4abaab(0x322)][_0x4abaab(0x33c)](_0x1a908e['content']);else{if(_0x37226f['vWRPI'](_0x1a908e[_0x4abaab(0x352)],_0x4abaab(0x2ce))){if(_0x37226f[_0x4abaab(0x29b)](_0x4abaab(0x250),_0x37226f[_0x4abaab(0x372)]))_0x1a908e[_0x4abaab(0x21c)]=frappe['utils'][_0x4abaab(0x34c)](_0x1a908e[_0x4abaab(0x21c)]),_0x1a908e[_0x4abaab(0x238)]=_0x1a908e[_0x4abaab(0x21c)],_0x1a908e[_0x4abaab(0x21c)]=frappe['utils'][_0x4abaab(0x33c)](_0x1a908e[_0x4abaab(0x21c)]);else{_0x4611f4['preventDefault']();var _0x425dfb=_0x3ddf6e[_0x4abaab(0x1f2)](_0x4abaab(0x2bb));if(_0x5ea804[_0x4abaab(0x363)](_0x37226f['EiCMO']))_0x4bd49b[_0x4abaab(0x200)][_0x4abaab(0x1e9)]();else{const _0x4c3517=_0x413126(this),_0x43c9f5=_0x5d55b8[_0x4abaab(0x362)](_0x37226f[_0x4abaab(0x396)]),_0x1d344e=_0x6f4657['find']('.timeline-item-edit'),_0x3b1cc9=_0x43c9f5[_0x4abaab(0x31d)]();_0x4c3517['text'](_0x405b2e(_0x37226f[_0x4abaab(0x282)]))['find']('i')[_0x4abaab(0x330)](_0x37226f[_0x4abaab(0x20b)])[_0x4abaab(0x39c)](_0x4abaab(0x21b)),_0x43c9f5[_0x4abaab(0x321)](),_0x38e1ec[_0x4abaab(0x39c)](_0x37226f[_0x4abaab(0x202)]),_0x5a0d65['current_editing_area']=_0x5084ed['make_editing_area'](_0x1d344e),_0x49ab38[_0x4abaab(0x200)][_0x4abaab(0x361)](_0x3b1cc9),_0x4c2603[_0x4abaab(0x200)]['on_submit']=_0x17ebb1=>{var _0x5141ee=_0x4abaab,_0x246906=_0x5141ee(0x2a6)[_0x5141ee(0x378)]('|'),_0x2a950a=0x0;while(!![]){switch(_0x246906[_0x2a950a++]){case'0':_0x45c2cd[_0x5141ee(0x345)]['update_communication'](_0x1f4b4d);continue;case'1':_0x2f4031['update_comment'](_0x425dfb,_0x17ebb1);continue;case'2':_0x5c5c05['content']=_0x17ebb1;continue;case'3':_0x43c9f5['show']();continue;case'4':_0x1d344e[_0x5141ee(0x2dd)]();continue;case'5':_0x2d8f42[_0x5141ee(0x26d)]();continue;}break;}};}return![];}}}!frappe[_0x4abaab(0x322)][_0x4abaab(0x1e4)](_0x1a908e[_0x4abaab(0x21c)])?_0x1a908e[_0x4abaab(0x305)]=frappe[_0x4abaab(0x358)](_0x37226f['ZvrnS'](__,_0x1a908e['content'])):(_0x1a908e[_0x4abaab(0x305)]=_0x1a908e[_0x4abaab(0x21c)],_0x1a908e['content_html']=frappe[_0x4abaab(0x322)][_0x4abaab(0x21a)](_0x1a908e['content_html'])),this['is_communication_or_comment'](_0x1a908e)&&(_0x1a908e[_0x4abaab(0x1e5)]=!![],!$[_0x4abaab(0x388)](_0x1a908e[_0x4abaab(0x266)])&&(_0x37226f[_0x4abaab(0x281)](_0x4abaab(0x2d9),_0x4abaab(0x374))?_0x71b98a[_0x4abaab(0x357)][_0x4abaab(0x1f1)](_0x528aad,0x1):_0x1a908e[_0x4abaab(0x266)]=JSON[_0x4abaab(0x307)](_0x1a908e[_0x4abaab(0x266)]||'[]')),_0x1a908e['liked_by_user']=_0x37226f['PAbsn'](_0x1a908e['_liked_by']['indexOf'](frappe[_0x4abaab(0x326)][_0x4abaab(0x1ff)]),-0x1));}_0x1a908e['content_html']=frappe['dom']['remove_script_and_style'](_0x1a908e[_0x4abaab(0x305)]),_0x1a908e[_0x4abaab(0x1fd)]=![];if(_0x1a908e[_0x4abaab(0x248)]&&_0x37226f['kcXgM'](_0x1a908e['communication_type'],_0x4abaab(0x274))){if(this[_0x4abaab(0x2a9)][_0x4abaab(0x295)]['subject']&&!this['frm'][_0x4abaab(0x295)][_0x4abaab(0x248)][_0x4abaab(0x2ca)](_0x1a908e[_0x4abaab(0x248)]))_0x1a908e[_0x4abaab(0x1fd)]=!![];else{if(this[_0x4abaab(0x2a9)][_0x4abaab(0x262)][_0x4abaab(0x2b2)]&&this[_0x4abaab(0x2a9)]['doc'][this[_0x4abaab(0x2a9)][_0x4abaab(0x262)][_0x4abaab(0x2b2)]]&&!!this[_0x4abaab(0x2a9)]['doc'][this[_0x4abaab(0x2a9)]['meta'][_0x4abaab(0x2b2)]][_0x4abaab(0x2ca)](_0x1a908e['subject']))_0x1a908e[_0x4abaab(0x1fd)]=!![];else!this[_0x4abaab(0x2a9)][_0x4abaab(0x295)][_0x4abaab(0x2bb)][_0x4abaab(0x2ca)](_0x1a908e[_0x4abaab(0x248)])&&(_0x1a908e[_0x4abaab(0x1fd)]=!![]);}}}[_0x2fa9aa(0x36c)](_0x486235){var _0x29c220=_0x2fa9aa,_0x30dc1a={'XwHsn':_0x29c220(0x274),'BBcbJ':function(_0x2f7119,_0x3b765a){return _0x2f7119===_0x3b765a;},'EBZPB':_0x29c220(0x2ce),'wLREJ':function(_0x4c0a8f,_0x244fe6){return _0x4c0a8f===_0x244fe6;},'QreVt':'Comment','ptySg':_0x29c220(0x204)};return _0x486235[_0x29c220(0x352)]===_0x30dc1a[_0x29c220(0x2b5)]||_0x30dc1a[_0x29c220(0x28c)](_0x486235['communication_type'],_0x30dc1a['EBZPB'])||_0x30dc1a[_0x29c220(0x30b)](_0x486235[_0x29c220(0x352)],_0x30dc1a[_0x29c220(0x2a7)])&&(_0x30dc1a[_0x29c220(0x28c)](_0x486235['comment_type'],_0x30dc1a[_0x29c220(0x2a7)])||_0x486235['comment_type']===_0x30dc1a['ptySg']);}[_0x2fa9aa(0x315)](_0x228edf){var _0x289074=_0x2fa9aa,_0x8b4059={'hYbEF':_0x289074(0x234),'jyKQq':_0x289074(0x272),'xGzkM':_0x289074(0x2d1),'XbuGb':'octicon\x20octicon-briefcase','MJdwj':_0x289074(0x259),'FtMNK':_0x289074(0x1f3),'SZnuu':_0x289074(0x20a),'roclx':'octicon\x20octicon-cloud-upload','XRIdG':'octicon\x20octicon-trashcan','kofVp':'octicon\x20octicon-eye','jLTwO':_0x289074(0x2d0),'yTkyr':'octicon\x20octicon-heart','uPjeM':'#fff'};_0x228edf[_0x289074(0x352)]==_0x289074(0x2ce)?_0x228edf[_0x289074(0x37f)]=_0x8b4059[_0x289074(0x371)]:(_0x228edf[_0x289074(0x37f)]={'Email':_0x8b4059[_0x289074(0x2ba)],'Chat':_0x289074(0x234),'Phone':_0x289074(0x2c8),'SMS':_0x8b4059[_0x289074(0x35b)],'Event':_0x289074(0x2e5),'Meeting':_0x8b4059[_0x289074(0x2bd)],'ToDo':_0x289074(0x2c1),'Submitted':_0x289074(0x25d),'Cancelled':_0x8b4059[_0x289074(0x369)],'Assigned':_0x8b4059['FtMNK'],'Assignment\x20Completed':_0x8b4059[_0x289074(0x2be)],'Comment':_0x8b4059[_0x289074(0x371)],'Milestone':_0x289074(0x329),'Workflow':_0x289074(0x286),'Label':_0x289074(0x2b8),'Attachment':_0x8b4059['roclx'],'Attachment\x20Removed':_0x8b4059['XRIdG'],'Shared':_0x8b4059[_0x289074(0x29a)],'Unshared':_0x8b4059[_0x289074(0x37b)],'Like':_0x8b4059[_0x289074(0x30c)],'Edit':'octicon\x20octicon-pencil','Relinked':'octicon\x20octicon-check','Reply':'octicon\x20octicon-mail-reply'}[_0x228edf[_0x289074(0x26e)]||_0x228edf[_0x289074(0x28a)]],_0x228edf[_0x289074(0x36a)]={'Attachment\x20Removed':_0x289074(0x2fd)}[_0x228edf['comment_type']||_0x228edf['communication_medium']]);if(!_0x228edf['icon_fg'])_0x228edf[_0x289074(0x36a)]=_0x8b4059['uPjeM'];}['get_communications'](_0x4bbeb9){var _0x4d5d80=_0x2fa9aa,_0x5405f8=this[_0x4d5d80(0x2a9)][_0x4d5d80(0x2b7)](),_0x35af63=this,_0x11d202=[][_0x4d5d80(0x230)](_0x5405f8[_0x4d5d80(0x357)]);return _0x4bbeb9&&this[_0x4d5d80(0x227)](_0x5405f8,_0x11d202),_0x11d202;}[_0x2fa9aa(0x278)](){var _0x3658d2=_0x2fa9aa,_0x30bd8a={'FlZwi':function(_0x10969d,_0x6fcff9){return _0x10969d===_0x6fcff9;},'AeZLY':'KAyqf','leFsj':_0x3658d2(0x34d),'iFzaC':_0x3658d2(0x239)},_0x2ac425=this[_0x3658d2(0x2a9)][_0x3658d2(0x2b7)](),_0x1c5bed=this,_0x581793=[];for(let _0x5e2bce of _0x2ac425[_0x3658d2(0x2ac)]){if(_0x30bd8a[_0x3658d2(0x2ff)](_0x30bd8a[_0x3658d2(0x300)],_0x30bd8a[_0x3658d2(0x36b)]))return _0x4e7cba;else _0x5e2bce['content']=_0x3658d2(0x34a)+_0x5e2bce['name']+_0x3658d2(0x2b9)+__(_0x3658d2(0x1fa))+_0x3658d2(0x311),_0x5e2bce[_0x3658d2(0x26e)]=_0x30bd8a['iFzaC'],_0x581793['push'](_0x5e2bce);};return _0x581793;}[_0x2fa9aa(0x314)](){var _0x45395=_0x2fa9aa;let _0x3a4b52=this[_0x45395(0x2a9)]['get_docinfo']();for(let _0x4ea4a2 of _0x3a4b52['comments']){this['cast_comment_as_communication'](_0x4ea4a2);}return _0x3a4b52[_0x45395(0x338)];}[_0x2fa9aa(0x320)](){var _0x1e1079=_0x2fa9aa,_0x514aec={'Ultpu':_0x1e1079(0x2af)};let _0xbeab8f=this[_0x1e1079(0x2a9)]['get_docinfo']()[_0x1e1079(0x269)];return _0xbeab8f[_0x1e1079(0x356)](_0xca83a6=>{var _0x24da93=_0x1e1079;return _0xca83a6['comment_type']=_0x514aec['Ultpu'],_0xca83a6[_0x24da93(0x21c)]=frappe['energy_points'][_0x24da93(0x398)](_0xca83a6),_0xca83a6;}),_0xbeab8f;}[_0x2fa9aa(0x1f8)](){var _0x3e018e=_0x2fa9aa,_0x1b59e7={'YRTJA':_0x3e018e(0x2f1),'vXJTe':_0x3e018e(0x260),'KddpQ':_0x3e018e(0x2b4)};let _0x2683d3=this[_0x3e018e(0x2a9)][_0x3e018e(0x2b7)]()[_0x3e018e(0x2de)];return _0x2683d3[_0x3e018e(0x356)](_0x523221=>{var _0x5c1fcb=_0x3e018e,_0x41bff3=_0x1b59e7[_0x5c1fcb(0x32a)][_0x5c1fcb(0x378)]('|'),_0x396642=0x0;while(!![]){switch(_0x41bff3[_0x396642++]){case'0':_0x523221[_0x5c1fcb(0x21c)]=__(_0x1b59e7[_0x5c1fcb(0x270)],[frappe['user'][_0x5c1fcb(0x2ea)](_0x523221[_0x5c1fcb(0x38e)])[_0x5c1fcb(0x25c)](),frappe[_0x5c1fcb(0x262)][_0x5c1fcb(0x27c)](this[_0x5c1fcb(0x2a9)][_0x5c1fcb(0x290)],_0x523221[_0x5c1fcb(0x32e)]),_0x523221[_0x5c1fcb(0x22d)]['bold']()]);continue;case'1':return _0x523221;case'2':_0x523221[_0x5c1fcb(0x310)]=_0x5c1fcb(0x206);continue;case'3':_0x523221['sender']=_0x523221[_0x5c1fcb(0x38e)];continue;case'4':_0x523221[_0x5c1fcb(0x26e)]=_0x1b59e7['KddpQ'];continue;}break;}}),_0x2683d3;}['cast_comment_as_communication'](_0x209563){var _0x174f94=_0x2fa9aa,_0x381ae3={'DGDzB':_0x174f94(0x386)};_0x209563[_0x174f94(0x25a)]=_0x209563[_0x174f94(0x1eb)],_0x209563[_0x174f94(0x289)]=_0x209563[_0x174f94(0x273)],_0x209563[_0x174f94(0x352)]=_0x381ae3[_0x174f94(0x2fb)];}['build_version_comments'](_0x26467,_0x10eebb){var _0x37d5e1=_0x2fa9aa,_0x2f7b3b={'sOqYq':function(_0x4eac1f,_0x2aabb0){return _0x4eac1f!==_0x2aabb0;},'khEtQ':_0x37d5e1(0x2c7),'PoSSN':function(_0x21bada,_0x107ae7){return _0x21bada===_0x107ae7;},'VsWFA':_0x37d5e1(0x1e0),'xDren':function(_0x457454,_0x4b7ef0,_0x5954db){return _0x457454(_0x4b7ef0,_0x5954db);},'ZEOGa':function(_0x43e61b,_0x5b8c12){return _0x43e61b<_0x5b8c12;},'TVXfU':_0x37d5e1(0x375),'upMgK':function(_0x40e5c6,_0x525978){return _0x40e5c6(_0x525978);},'wNjzy':_0x37d5e1(0x339),'IbEab':'TqCpQ','oRBxM':_0x37d5e1(0x247),'yiMBE':function(_0x34752d,_0x1e5301){return _0x34752d==_0x1e5301;},'EToCU':_0x37d5e1(0x34f),'givVr':_0x37d5e1(0x2bc),'pzOiE':function(_0x4637fa,_0x16e52c){return _0x4637fa<_0x16e52c;},'qRsXZ':_0x37d5e1(0x2cd),'jKOiK':_0x37d5e1(0x30e),'gbRuK':_0x37d5e1(0x2a3),'iabaF':'removed'},_0x2d11c5=this;_0x26467[_0x37d5e1(0x2f5)][_0x37d5e1(0x28e)](function(_0x53d5ab){var _0x4904fa=_0x37d5e1,_0x34e712={'aKsNZ':function(_0x3625d8,_0x1ecce1){return _0x3625d8===_0x1ecce1;},'QjtPl':_0x2f7b3b['oRBxM'],'ADEHK':function(_0x144550,_0x3f9a05){var _0x4896ef=_0x1653;return _0x2f7b3b[_0x4896ef(0x38c)](_0x144550,_0x3f9a05);},'xwDJN':function(_0x5b054a,_0x3580a6){var _0xe95707=_0x1653;return _0x2f7b3b[_0xe95707(0x368)](_0x5b054a,_0x3580a6);},'HRcIa':_0x4904fa(0x2d4),'YZOqe':_0x2f7b3b[_0x4904fa(0x2a5)],'jSShF':_0x2f7b3b[_0x4904fa(0x285)],'UzrZn':function(_0x1359c8,_0x3a6004){var _0x3b6210=_0x4904fa;return _0x2f7b3b[_0x3b6210(0x27f)](_0x1359c8,_0x3a6004);}};if(!_0x53d5ab[_0x4904fa(0x1f2)])return;var _0x29a945=JSON[_0x4904fa(0x307)](_0x53d5ab[_0x4904fa(0x1f2)]);if(_0x29a945['comment']){if(_0x4904fa(0x21d)===_0x4904fa(0x21d)){_0x10eebb[_0x4904fa(0x219)](_0x2d11c5['get_version_comment'](_0x53d5ab,_0x29a945['comment'],_0x29a945[_0x4904fa(0x26e)]));return;}else this[_0x4904fa(0x287)](_0x4d6fe6);}if(_0x29a945[_0x4904fa(0x268)]&&_0x29a945[_0x4904fa(0x268)]['length']){var _0x23bd58=[];_0x29a945['changed'][_0x4904fa(0x32b)](function(_0x4399c3){var _0x197896=_0x4904fa;if(_0x34e712['aKsNZ'](_0x4399c3[0x0],_0x34e712[_0x197896(0x24d)])){if(_0x4399c3[0x2]==0x1){if(_0x197896(0x39d)===_0x197896(0x39d))_0x10eebb['push'](_0x2d11c5[_0x197896(0x2dc)](_0x53d5ab,_0x34e712[_0x197896(0x327)](__,_0x197896(0x2a2))));else{let _0x3b6dce=this[_0x197896(0x2a9)][_0x197896(0x2b7)]()[_0x197896(0x269)];return _0x3b6dce[_0x197896(0x356)](_0x2d08bb=>{var _0x8af0d=_0x197896;return _0x2d08bb[_0x8af0d(0x26e)]=_0x8af0d(0x2af),_0x2d08bb['content']=_0x3a1349[_0x8af0d(0x2ed)]['format_form_log'](_0x2d08bb),_0x2d08bb;}),_0x3b6dce;}}else _0x34e712['xwDJN'](_0x4399c3[0x2],0x2)&&_0x10eebb[_0x197896(0x219)](_0x2d11c5[_0x197896(0x2dc)](_0x53d5ab,_0x34e712['ADEHK'](__,_0x34e712['HRcIa'])));}else{if(_0x34e712['YZOqe']===_0x34e712[_0x197896(0x382)]){var _0x12b95b=frappe[_0x197896(0x262)][_0x197896(0x323)](_0x2d11c5['frm'][_0x197896(0x290)],_0x4399c3[0x0],_0x2d11c5[_0x197896(0x2a9)]['docname']);if(_0x12b95b&&!_0x12b95b[_0x197896(0x1ef)]){var _0x306052=frappe[_0x197896(0x37a)]['get_field_display_status'](_0x12b95b,null,_0x2d11c5[_0x197896(0x2a9)][_0x197896(0x37a)]);(_0x306052==='Read'||_0x34e712[_0x197896(0x395)](_0x306052,_0x197896(0x375)))&&_0x23bd58['push'](__(_0x34e712[_0x197896(0x2e8)],[__(_0x12b95b[_0x197896(0x393)]),(frappe['ellipsis'](frappe[_0x197896(0x322)][_0x197896(0x1e3)](_0x4399c3[0x1]),0x28)||'\x22\x22')['bold'](),(frappe[_0x197896(0x333)](frappe[_0x197896(0x322)][_0x197896(0x1e3)](_0x4399c3[0x2]),0x28)||'\x22\x22')['bold']()]));}}else _0x1078cd(this)[_0x197896(0x380)]()['siblings']('blockquote')['toggleClass'](_0x197896(0x1ef));}return _0x34e712[_0x197896(0x1e1)](_0x23bd58['length'],0x3);}),_0x23bd58[_0x4904fa(0x205)]&&(_0x23bd58=_0x23bd58[_0x4904fa(0x356)](frappe[_0x4904fa(0x322)][_0x4904fa(0x1f0)]),_0x10eebb['push'](_0x2d11c5[_0x4904fa(0x2dc)](_0x53d5ab,__('changed\x20value\x20of\x20{0}',[_0x23bd58[_0x4904fa(0x24b)](',\x20')['bold']()]))));}if(_0x29a945[_0x4904fa(0x210)]&&_0x29a945[_0x4904fa(0x210)]['length']){if(_0x2f7b3b[_0x4904fa(0x27b)]===_0x2f7b3b[_0x4904fa(0x399)])_0x57be27[_0x4904fa(0x345)]&&_0x60fc5a[_0x4904fa(0x345)][_0x4904fa(0x26d)]();else{var _0x23bd58=[],_0x506a87=0x0;_0x29a945[_0x4904fa(0x210)][_0x4904fa(0x32b)](function(_0x4e5ee5){var _0x35aeca=_0x4904fa,_0x358f46={'wZjRc':_0x35aeca(0x206),'jyCnS':function(_0x283134,_0x53c20b){return _0x2f7b3b['sOqYq'](_0x283134,_0x53c20b);},'WIlQb':_0x35aeca(0x336),'QPCub':_0x2f7b3b[_0x35aeca(0x2c4)],'ypgok':function(_0x20f9ad,_0x9f5408){return _0x2f7b3b['PoSSN'](_0x20f9ad,_0x9f5408);},'joTFc':_0x2f7b3b[_0x35aeca(0x26c)],'dvYte':_0x35aeca(0x375),'dAuGd':function(_0x46c978,_0x26b2ce,_0x406584){var _0x2b502d=_0x35aeca;return _0x2f7b3b[_0x2b502d(0x2b6)](_0x46c978,_0x26b2ce,_0x406584);},'GYJfv':_0x35aeca(0x2bc)};if(_0x2f7b3b['PoSSN'](_0x35aeca(0x26b),'XLACj'))return _0x4e5ee5[0x3]['every'](function(_0x327b28){var _0x39dde9=_0x35aeca,_0x22afa8=_0x2d11c5[_0x39dde9(0x2a9)][_0x39dde9(0x2f2)][_0x4e5ee5[0x0]]&&frappe[_0x39dde9(0x262)][_0x39dde9(0x323)](_0x2d11c5[_0x39dde9(0x2a9)][_0x39dde9(0x2f2)][_0x4e5ee5[0x0]][_0x39dde9(0x222)]['doctype'],_0x327b28[0x0],_0x2d11c5[_0x39dde9(0x2a9)][_0x39dde9(0x283)]);if(_0x22afa8&&!_0x22afa8[_0x39dde9(0x1ef)]){if(_0x358f46[_0x39dde9(0x35c)](_0x358f46[_0x39dde9(0x38d)],_0x358f46[_0x39dde9(0x251)])){var _0x18487f=frappe[_0x39dde9(0x37a)][_0x39dde9(0x218)](_0x22afa8,null,_0x2d11c5['frm']['perm']);(_0x358f46['ypgok'](_0x18487f,_0x358f46['joTFc'])||_0x18487f===_0x358f46['dvYte'])&&_0x23bd58['push'](_0x358f46[_0x39dde9(0x2f6)](__,_0x39dde9(0x1f5),[frappe[_0x39dde9(0x262)][_0x39dde9(0x27c)](_0x2d11c5[_0x39dde9(0x2a9)]['fields_dict'][_0x4e5ee5[0x0]]['grid']['doctype'],_0x327b28[0x0]),(frappe[_0x39dde9(0x333)](_0x327b28[0x1],0x28)||'\x22\x22')[_0x39dde9(0x25c)](),(frappe[_0x39dde9(0x333)](_0x327b28[0x2],0x28)||'\x22\x22')[_0x39dde9(0x25c)](),_0x4e5ee5[0x1]]));}else{var _0x1f9cb9={'lJgmN':_0x358f46[_0x39dde9(0x367)]};let _0x181468=this[_0x39dde9(0x2a9)][_0x39dde9(0x2b7)]()['milestones'];return _0x181468[_0x39dde9(0x356)](_0x594a8b=>{var _0x2bac90=_0x39dde9;return _0x594a8b[_0x2bac90(0x310)]=_0x1f9cb9[_0x2bac90(0x21e)],_0x594a8b[_0x2bac90(0x25a)]=_0x594a8b[_0x2bac90(0x38e)],_0x594a8b[_0x2bac90(0x26e)]=_0x2bac90(0x2b4),_0x594a8b[_0x2bac90(0x21c)]=_0x455121('{0}\x20changed\x20{1}\x20to\x20{2}',[_0xdc4e4a['user']['full_name'](_0x594a8b[_0x2bac90(0x38e)])[_0x2bac90(0x25c)](),_0x5d1861[_0x2bac90(0x262)][_0x2bac90(0x27c)](this[_0x2bac90(0x2a9)][_0x2bac90(0x290)],_0x594a8b[_0x2bac90(0x32e)]),_0x594a8b[_0x2bac90(0x22d)][_0x2bac90(0x25c)]()]),_0x594a8b;}),_0x181468;}}return _0x23bd58[_0x39dde9(0x205)]<0x3;}),_0x2f7b3b['ZEOGa'](_0x23bd58[_0x35aeca(0x205)],0x3);else _0x46766a[_0x35aeca(0x219)](_0xa846dc(_0x358f46['GYJfv'],[_0x266a6c(_0x3b074b[_0x35aeca(0x393)]),(_0xa36df4[_0x35aeca(0x333)](_0x17733a['utils'][_0x35aeca(0x1e3)](_0x205bc2[0x1]),0x28)||'\x22\x22')[_0x35aeca(0x25c)](),(_0x3ad6a0['ellipsis'](_0x32597c['utils']['html2text'](_0x517e12[0x2]),0x28)||'\x22\x22')[_0x35aeca(0x25c)]()]));}),_0x23bd58[_0x4904fa(0x205)]&&_0x10eebb[_0x4904fa(0x219)](_0x2d11c5['get_version_comment'](_0x53d5ab,__(_0x2f7b3b['gbRuK'],[_0x23bd58[_0x4904fa(0x24b)](',\x20')])));}}[_0x4904fa(0x384),_0x2f7b3b[_0x4904fa(0x303)]][_0x4904fa(0x28e)](function(_0x587bbf){var _0x1bb692=_0x4904fa,_0x4bbbf2={'wTFGU':function(_0x31bf94,_0x30ba65){return _0x31bf94===_0x30ba65;},'SXJXs':_0x2f7b3b[_0x1bb692(0x36f)],'bUeuc':function(_0x56d871,_0xfcf3d9){var _0x2d1836=_0x1bb692;return _0x2f7b3b[_0x2d1836(0x38c)](_0x56d871,_0xfcf3d9);},'GaDtV':function(_0x593959,_0x4217b4){return _0x2f7b3b['PoSSN'](_0x593959,_0x4217b4);},'MWKxy':_0x1bb692(0x2d7),'FLFRo':_0x2f7b3b[_0x1bb692(0x261)],'gtEOA':_0x1bb692(0x1e0)};if(_0x2f7b3b[_0x1bb692(0x1ee)]!==_0x1bb692(0x209)){var _0x9972b1=_0x4a4af9[_0x1bb692(0x262)]['get_docfield'](_0x79b8c2[_0x1bb692(0x2a9)][_0x1bb692(0x290)],_0x50ecb4[0x0],_0x11b4f7[_0x1bb692(0x2a9)]['docname']);if(_0x9972b1&&!_0x9972b1[_0x1bb692(0x1ef)]){var _0x44a4fe=_0x3a49a3[_0x1bb692(0x37a)][_0x1bb692(0x218)](_0x9972b1,null,_0x1d0080['frm'][_0x1bb692(0x37a)]);if(_0x4bbbf2[_0x1bb692(0x2e9)](_0x44a4fe,_0x1bb692(0x1e0))||_0x44a4fe===_0x4bbbf2[_0x1bb692(0x347)])return _0x47098e[_0x1bb692(0x262)][_0x1bb692(0x27c)](_0x449c37[_0x1bb692(0x2a9)][_0x1bb692(0x290)],_0x44b7c3[0x0]);}}else _0x29a945[_0x587bbf]&&_0x29a945[_0x587bbf]['length']&&(_0x23bd58=(_0x29a945[_0x587bbf]||[])[_0x1bb692(0x356)](function(_0x2651d1){var _0x575655=_0x1bb692;if(_0x4bbbf2[_0x575655(0x1f4)](_0x4bbbf2['MWKxy'],_0x4bbbf2[_0x575655(0x2d2)])){let _0x23ebd0=_0x4bbbf2[_0x575655(0x256)](_0x387112,_0x558a3a[_0x575655(0x32d)])[_0x575655(0x362)]('.copy-to-clipboard')['text']();_0x293263[_0x575655(0x322)][_0x575655(0x2f9)](_0x23ebd0);}else{var _0x32d8c0=frappe[_0x575655(0x262)]['get_docfield'](_0x2d11c5[_0x575655(0x2a9)]['doctype'],_0x2651d1[0x0],_0x2d11c5[_0x575655(0x2a9)][_0x575655(0x283)]);if(_0x32d8c0&&!_0x32d8c0[_0x575655(0x1ef)]){var _0x3d3228=frappe[_0x575655(0x37a)]['get_field_display_status'](_0x32d8c0,null,_0x2d11c5[_0x575655(0x2a9)]['perm']);if(_0x3d3228===_0x4bbbf2[_0x575655(0x34b)]||_0x3d3228===_0x4bbbf2[_0x575655(0x347)])return frappe[_0x575655(0x262)][_0x575655(0x27c)](_0x2d11c5[_0x575655(0x2a9)]['doctype'],_0x2651d1[0x0]);}}}),_0x23bd58=_0x23bd58[_0x1bb692(0x36d)](function(_0x4d2e66){return _0x4d2e66;}),_0x23bd58[_0x1bb692(0x205)]&&_0x10eebb[_0x1bb692(0x219)](_0x2d11c5[_0x1bb692(0x2dc)](_0x53d5ab,__(_0x1bb692(0x2b0),[__(_0x587bbf),_0x23bd58[_0x1bb692(0x24b)](',\x20')]))));});});}[_0x2fa9aa(0x2dc)](_0x1cbfd5,_0x4508e4,_0x38ffcb){var _0x89f8c9=_0x2fa9aa,_0x35d4af={'BzfwF':function(_0x249fa7,_0x5456eb){return _0x249fa7+_0x5456eb;},'FHoNS':_0x89f8c9(0x32f)};return!_0x38ffcb&&(_0x4508e4=_0x35d4af['BzfwF'](_0x35d4af[_0x89f8c9(0x280)](_0x89f8c9(0x25e)+_0x1cbfd5['name']+'\x22>',_0x4508e4),_0x89f8c9(0x311))),{'comment_type':_0x38ffcb||_0x35d4af[_0x89f8c9(0x26a)],'creation':_0x1cbfd5[_0x89f8c9(0x39a)],'owner':_0x1cbfd5[_0x89f8c9(0x38e)],'version_name':_0x1cbfd5[_0x89f8c9(0x2bb)],'sender':_0x1cbfd5[_0x89f8c9(0x38e)],'comment_by':_0x1cbfd5['owner'],'content':_0x4508e4};}[_0x2fa9aa(0x2f8)](_0x173860,_0x29ba71){var _0xa615a=_0x2fa9aa,_0x162b89=this;return frappe[_0xa615a(0x1f6)]({'method':_0xa615a(0x328),'args':{'reference_doctype':this['frm']['doctype'],'reference_name':this[_0xa615a(0x2a9)]['docname'],'content':_0x173860,'comment_email':frappe[_0xa615a(0x326)][_0xa615a(0x1ff)]},'btn':_0x29ba71,'callback':function(_0x4c2302){var _0x178647=_0xa615a;!_0x4c2302[_0x178647(0x340)]&&(_0x162b89['comment_area'][_0x178647(0x361)](''),frappe['utils'][_0x178647(0x2cb)](_0x178647(0x242)),frappe[_0x178647(0x345)][_0x178647(0x221)](_0x4c2302[_0x178647(0x350)]));}});}[_0x2fa9aa(0x291)](_0x24716f){var _0x38c2a6=_0x2fa9aa,_0x18cc66={'eHlBa':_0x38c2a6(0x203),'oVuMD':_0x38c2a6(0x386),'CDjtc':_0x38c2a6(0x2a1),'VBmXF':_0x38c2a6(0x32c)},_0xe2c419=this;frappe[_0x38c2a6(0x36e)](__(_0x18cc66['VBmXF']),function(){var _0x4d6745=_0x38c2a6,_0x4e96d6={'QCexy':function(_0x11d9de,_0x36d4e7){return _0x11d9de!==_0x36d4e7;},'uqLgN':function(_0x1371a7,_0x575b27){return _0x1371a7==_0x575b27;}};return frappe[_0x4d6745(0x1f6)]({'method':_0x4d6745(0x203),'args':{'doctype':_0x18cc66[_0x4d6745(0x28b)],'name':_0x24716f},'callback':function(_0x4762fc){var _0x31de77=_0x4d6745,_0x3de13f={'sWmnD':_0x18cc66[_0x31de77(0x366)],'cUnNP':_0x18cc66[_0x31de77(0x28b)]};!_0x4762fc[_0x31de77(0x340)]&&(frappe['utils'][_0x31de77(0x2cb)](_0x18cc66['CDjtc']),_0xe2c419[_0x31de77(0x2a9)]['get_docinfo']()[_0x31de77(0x357)]=$[_0x31de77(0x356)](_0xe2c419[_0x31de77(0x2a9)]['get_docinfo']()[_0x31de77(0x357)],function(_0x40f3b7){var _0x45f9ec=_0x31de77;if(_0x4e96d6[_0x45f9ec(0x2f3)](_0x45f9ec(0x359),_0x45f9ec(0x1fe))){if(_0x4e96d6[_0x45f9ec(0x337)](_0x40f3b7['name'],_0x24716f))return null;else return _0x40f3b7;}else return _0x5e5189[_0x45f9ec(0x1f6)]({'method':_0x3de13f['sWmnD'],'args':{'doctype':_0x3de13f[_0x45f9ec(0x30d)],'name':_0x4b70c5},'callback':function(_0x2d8f2b){var _0x3a7aab=_0x45f9ec,_0x24c1e0={'pLLdi':function(_0x31b3e3,_0x1f67cf){return _0x31b3e3==_0x1f67cf;}};!_0x2d8f2b[_0x3a7aab(0x340)]&&(_0x367870[_0x3a7aab(0x322)][_0x3a7aab(0x2cb)](_0x3a7aab(0x2a1)),_0x3a665b[_0x3a7aab(0x2a9)][_0x3a7aab(0x2b7)]()[_0x3a7aab(0x357)]=_0x5c45b2['map'](_0x416d6f[_0x3a7aab(0x2a9)][_0x3a7aab(0x2b7)]()[_0x3a7aab(0x357)],function(_0x143246){var _0x407e0a=_0x3a7aab;if(_0x24c1e0[_0x407e0a(0x31e)](_0x143246[_0x407e0a(0x2bb)],_0x45cd51))return null;else return _0x143246;}),_0xe955ab['refresh'](!![]));}});}),_0xe2c419[_0x31de77(0x26d)](!![]));}});});}[_0x2fa9aa(0x25f)](_0x45f154,_0xeaf7f9){var _0x321684=_0x2fa9aa,_0x24cb8f={'KIiCl':_0x321684(0x242)};return frappe[_0x321684(0x1f6)]({'method':_0x321684(0x299),'args':{'name':_0x45f154,'content':_0xeaf7f9},'callback':function(_0x3d086a){var _0x23622e=_0x321684;!_0x3d086a['exc']&&frappe[_0x23622e(0x322)][_0x23622e(0x2cb)](_0x24cb8f['KIiCl']);}});}[_0x2fa9aa(0x26f)](){var _0x3ce795=_0x2fa9aa;return this[_0x3ce795(0x2a9)][_0x3ce795(0x31f)]?this[_0x3ce795(0x2a9)][_0x3ce795(0x295)][this[_0x3ce795(0x2a9)][_0x3ce795(0x31f)]]:this[_0x3ce795(0x2a9)][_0x3ce795(0x295)][_0x3ce795(0x2a4)]||this[_0x3ce795(0x2a9)]['doc'][_0x3ce795(0x257)]||'';}[_0x2fa9aa(0x265)](_0x1b2f69){var _0x24fa2b=_0x2fa9aa,_0x4e0862={'ehQsk':function(_0x32866e,_0x1feeaa){return _0x32866e>_0x1feeaa;},'WLHhd':'Communication','BRXWs':function(_0x34827d,_0x162989){return _0x34827d==_0x162989;},'CrYkl':'LeVVt','yOmqm':function(_0xa6e3f6,_0x55bb3d){return _0xa6e3f6!==_0x55bb3d;}},_0x12d3ca=null,_0x4ab7c8=this[_0x24fa2b(0x2a9)][_0x24fa2b(0x2b7)]()[_0x24fa2b(0x357)],_0x24c118=this[_0x24fa2b(0x26f)]();return $['each'](_0x4ab7c8&&_0x4ab7c8[_0x24fa2b(0x1fc)](function(_0x544e64,_0x113546){var _0x432f4e=_0x24fa2b;return _0x4e0862[_0x432f4e(0x33b)](_0x544e64['creation'],_0x113546[_0x432f4e(0x39a)])?-0x1:0x1;}),function(_0x179492,_0x5304c0){var _0x535a6f=_0x24fa2b;if(_0x5304c0[_0x535a6f(0x352)]==_0x4e0862[_0x535a6f(0x364)]&&_0x4e0862[_0x535a6f(0x313)](_0x5304c0['communication_medium'],_0x535a6f(0x29e))){if(_0x535a6f(0x25b)===_0x4e0862[_0x535a6f(0x2e2)])return this[_0x535a6f(0x2a9)][_0x535a6f(0x295)]['email_id']||this['frm'][_0x535a6f(0x295)][_0x535a6f(0x257)]||'';else{if(_0x1b2f69){if(_0x4e0862[_0x535a6f(0x23c)](_0x5304c0[_0x535a6f(0x25a)][_0x535a6f(0x2f4)](_0x24c118),-0x1))return _0x12d3ca=_0x5304c0,![];}else return _0x12d3ca=_0x5304c0,![];}}}),_0x12d3ca;}[_0x2fa9aa(0x24e)](){var _0x3de4fb=_0x2fa9aa,_0x400dec=Object[_0x3de4fb(0x2ab)](frappe['boot'][_0x3de4fb(0x225)])['filter'](_0x144a63=>![_0x3de4fb(0x317),'Guest']['includes'](_0x144a63));return _0x400dec=_0x400dec['filter'](_0x29a138=>frappe[_0x3de4fb(0x2bf)][_0x3de4fb(0x225)][_0x29a138][_0x3de4fb(0x292)]==0x1),_0x400dec[_0x3de4fb(0x356)](_0x3a1ab6=>{var _0x4dcc2d=_0x3de4fb;return{'id':frappe['boot'][_0x4dcc2d(0x225)][_0x3a1ab6][_0x4dcc2d(0x2bb)],'value':frappe[_0x4dcc2d(0x2bf)][_0x4dcc2d(0x225)][_0x3a1ab6][_0x4dcc2d(0x2fe)]};});}['setup_comment_like'](){var _0x28354e=_0x2fa9aa,_0x16b713={'cRHTe':_0x28354e(0x30a)};this[_0x28354e(0x2aa)]['on'](_0x28354e(0x242),'.comment-likes\x20.octicon-heart',frappe['ui']['click_toggle_like']),frappe['ui'][_0x28354e(0x342)](this[_0x28354e(0x2aa)],_0x16b713[_0x28354e(0x237)]);}},$[_0x2fa9aa(0x1ed)](frappe[_0x2fa9aa(0x345)],{'new_communication':function(_0x30979e){var _0x1c9755=_0x2fa9aa,_0x2d54d1={'okgWl':_0x1c9755(0x37e),'jtHWe':_0x1c9755(0x386),'oKDGC':function(_0x15db93,_0x421f8a){return _0x15db93!==_0x421f8a;},'vEUAt':'LnEcg'};!_0x30979e['communication_type']&&(_0x30979e['communication_type']=_0x2d54d1[_0x1c9755(0x2d5)]);var _0x173603=frappe[_0x1c9755(0x22c)]['get_docinfo'](_0x30979e[_0x1c9755(0x277)],_0x30979e['reference_name']);if(_0x173603&&_0x173603[_0x1c9755(0x357)]){var _0x464437=_0x173603['communications'],_0x3cfcf5=![];for(var _0x30f77c=0x0,_0x1b7f6e=_0x464437[_0x1c9755(0x205)];_0x30f77c<_0x1b7f6e;_0x30f77c++){if(_0x464437[_0x30f77c][_0x1c9755(0x2bb)]==_0x30979e['name']){_0x3cfcf5=!![];break;}}!_0x3cfcf5&&(_0x173603['communications']=_0x464437[_0x1c9755(0x230)]([_0x30979e]));}cur_frm['doctype']===_0x30979e[_0x1c9755(0x277)]&&cur_frm[_0x1c9755(0x283)]===_0x30979e[_0x1c9755(0x33a)]&&(_0x2d54d1[_0x1c9755(0x213)](_0x2d54d1['vEUAt'],_0x1c9755(0x365))?_0xfc0178[_0x1c9755(0x201)]=_0x51a268(_0x2d54d1[_0x1c9755(0x240)],{'style':_0x11635c[_0x1c9755(0x322)][_0x1c9755(0x263)](_0x3b404d[_0x1c9755(0x21c)]),'text':_0x5a98ab(_0x1dbe88[_0x1c9755(0x21c)])}):cur_frm[_0x1c9755(0x345)]&&cur_frm['timeline'][_0x1c9755(0x26d)]());},'delete_communication':function(_0xd91d96){var _0x1cad59=_0x2fa9aa,_0x1d5d8a=frappe[_0x1cad59(0x22c)][_0x1cad59(0x2b7)](_0xd91d96['reference_doctype'],_0xd91d96['reference_name']),_0x5a1a80=frappe[_0x1cad59(0x345)][_0x1cad59(0x331)](_0xd91d96,_0x1d5d8a);_0x5a1a80!==-0x1&&_0x1d5d8a[_0x1cad59(0x357)][_0x1cad59(0x1f1)](_0x5a1a80,0x1),cur_frm[_0x1cad59(0x290)]===_0xd91d96[_0x1cad59(0x277)]&&cur_frm[_0x1cad59(0x283)]===_0xd91d96[_0x1cad59(0x33a)]&&(cur_frm[_0x1cad59(0x345)]&&cur_frm[_0x1cad59(0x345)][_0x1cad59(0x26d)]());},'update_communication':function(_0x197350){var _0x2d4997=_0x2fa9aa,_0x343457={'ZZFsC':function(_0x3cff4a,_0x4684a9){return _0x3cff4a===_0x4684a9;}},_0xc29012=frappe[_0x2d4997(0x22c)][_0x2d4997(0x2b7)](_0x197350[_0x2d4997(0x277)],_0x197350[_0x2d4997(0x33a)]),_0x36b8c9=frappe['timeline'][_0x2d4997(0x331)](_0x197350,_0xc29012);_0x36b8c9!==-0x1&&$['extend'](_0xc29012[_0x2d4997(0x357)][_0x36b8c9],_0x197350),cur_frm[_0x2d4997(0x290)]===_0x197350[_0x2d4997(0x277)]&&_0x343457['ZZFsC'](cur_frm[_0x2d4997(0x283)],_0x197350['reference_name'])&&(cur_frm['timeline']&&cur_frm['timeline'][_0x2d4997(0x26d)]());},'index_of_communication':function(_0x30ccfb,_0x3dcb39){var _0x34d82b=_0x2fa9aa,_0x500509={'tWikd':function(_0x251301,_0x24d74a){return _0x251301===_0x24d74a;},'tYKlw':function(_0x14aa05,_0x4d2f99){return _0x14aa05===_0x4d2f99;},'vJdKX':_0x34d82b(0x254),'LJRRK':_0x34d82b(0x325),'tXXjV':function(_0x436f09,_0x44fc28){return _0x436f09<_0x44fc28;},'SrPuE':function(_0x2f3ee7,_0x5537f9){return _0x2f3ee7!==_0x5537f9;},'toLpH':_0x34d82b(0x20e)},_0x12118d=-0x1;if(_0x3dcb39&&_0x3dcb39[_0x34d82b(0x357)]){if(_0x500509[_0x34d82b(0x349)](_0x500509[_0x34d82b(0x20f)],_0x500509[_0x34d82b(0x2b3)])){var _0x4453c9={'lrIPy':function(_0x42deb5,_0x55f1df){var _0x49bb32=_0x34d82b;return _0x500509[_0x49bb32(0x2c5)](_0x42deb5,_0x55f1df);}};return _0x518800[0x3][_0x34d82b(0x32b)](function(_0x223e5e){var _0x2b4633=_0x34d82b,_0x4be945=_0x51ca91[_0x2b4633(0x2a9)][_0x2b4633(0x2f2)][_0x50656a[0x0]]&&_0x56ef48[_0x2b4633(0x262)]['get_docfield'](_0x48c895[_0x2b4633(0x2a9)]['fields_dict'][_0xdd60d6[0x0]]['grid'][_0x2b4633(0x290)],_0x223e5e[0x0],_0x176bb3[_0x2b4633(0x2a9)]['docname']);if(_0x4be945&&!_0x4be945[_0x2b4633(0x1ef)]){var _0x1a0ed1=_0x3f6049['perm'][_0x2b4633(0x218)](_0x4be945,null,_0x16bb4f[_0x2b4633(0x2a9)][_0x2b4633(0x37a)]);(_0x1a0ed1===_0x2b4633(0x1e0)||_0x4453c9[_0x2b4633(0x29d)](_0x1a0ed1,_0x2b4633(0x375)))&&_0x50f3f0['push'](_0x5852cf(_0x2b4633(0x1f5),[_0xf06e11[_0x2b4633(0x262)][_0x2b4633(0x27c)](_0x2ea081[_0x2b4633(0x2a9)][_0x2b4633(0x2f2)][_0x2ef917[0x0]][_0x2b4633(0x222)]['doctype'],_0x223e5e[0x0]),(_0x9e6892[_0x2b4633(0x333)](_0x223e5e[0x1],0x28)||'\x22\x22')[_0x2b4633(0x25c)](),(_0x54be12[_0x2b4633(0x333)](_0x223e5e[0x2],0x28)||'\x22\x22')[_0x2b4633(0x25c)](),_0x1fe3f1[0x1]]));}return _0x565277[_0x2b4633(0x205)]<0x3;}),_0x1d1117[_0x34d82b(0x205)]<0x3;}else{var _0x5a6bdc=_0x3dcb39[_0x34d82b(0x357)];for(var _0x300cb8=0x0,_0xd82bd7=_0x5a6bdc[_0x34d82b(0x205)];_0x500509['tXXjV'](_0x300cb8,_0xd82bd7);_0x300cb8++){if(_0x500509[_0x34d82b(0x376)](_0x34d82b(0x2a0),_0x500509[_0x34d82b(0x2e0)])){if(_0x5a6bdc[_0x300cb8][_0x34d82b(0x2bb)]==_0x30ccfb[_0x34d82b(0x2bb)]){_0x12118d=_0x300cb8;break;}}else return _0x35b1ba=_0x49ce00,![];}}}return _0x12118d;}}));