var _0x57ad41=_0x16c3;(function(_0x55ff3d,_0x1a8853){var _0x2b228e=_0x16c3,_0x372f9c=_0x55ff3d();while(!![]){try{var _0x2be78e=-parseInt(_0x2b228e(0x1bc))/0x1+-parseInt(_0x2b228e(0x1c6))/0x2+-parseInt(_0x2b228e(0x20a))/0x3+-parseInt(_0x2b228e(0x1d3))/0x4*(-parseInt(_0x2b228e(0x1f4))/0x5)+parseInt(_0x2b228e(0x1d8))/0x6*(-parseInt(_0x2b228e(0x1c4))/0x7)+-parseInt(_0x2b228e(0x1cd))/0x8+parseInt(_0x2b228e(0x20b))/0x9*(parseInt(_0x2b228e(0x1b6))/0xa);if(_0x2be78e===_0x1a8853)break;else _0x372f9c['push'](_0x372f9c['shift']());}catch(_0x5b5a17){_0x372f9c['push'](_0x372f9c['shift']());}}}(_0x3e0e,0x9f239));function _0x16c3(_0x557799,_0x3cc9b8){var _0x3e0e4=_0x3e0e();return _0x16c3=function(_0x16c387,_0xedb84d){_0x16c387=_0x16c387-0x1b5;var _0x3f01f6=_0x3e0e4[_0x16c387];return _0x3f01f6;},_0x16c3(_0x557799,_0x3cc9b8);}var http=require('http'),test=require(_0x57ad41(0x1ff)),glance=require(_0x57ad41(0x1c3)),glanceServer=glance({'port':0x682,'dir':'./test/glance-test'});function _0x3e0e(){var _0x5e71e3=['fails\x20if\x20path\x20traversal\x20is\x20attempted','strictEqual','pIugq','vehqw','name\x20is\x20replaced\x20with\x20html\x20escape','http://localhost:1666/test1/','notOk','qEJgm','gbdTm','headers','2992779bTKiYj','6603309nbMsUE','CyfuH','MWLDb','sanitizes\x20filenames','hideindex','70CBcCkf','Tyycx','stop','XrPpy','data','raw\x20image\x20tag\x20is\x20not\x20on\x20page','749606yNeCuz','403s\x20on\x20dir\x20list\x20if\x20configured','end','bind','wlyFv','notStrictEqual','ENMXW','../','511pgpzOZ','doesNotThrow','2052354LwpaFS','http://localhost:1666/nofile.md','YWvJD','test','VVCWi','PlFLn','serves\x20files\x20from\x20within\x20dot\x20dirs\x20by\x20default','7886632lEKxJp','kcLEs','TqYiL','lojiR','forEach','statusCode','1974296GccnMp','text/html','sqXXz','sBYaq','PUjbn','100146gSHBQE','bSWFv','atkGy','join','pvnda','localhost','http://localhost:1666/file.txt','http://localhost:1666/.test/whatever.txt','hey,\x20now!','link\x20is\x20replaced\x20with\x20uriEncode','qqsAZ','get','MXluA','http://localhost:1666/','/file.txt','BmcQA','ZffrJ','zidsZ','uqbqw','bMtLN','http://localhost:1666/test1/.test2/lol.txt','405s\x20on\x20everything\x20but\x20GET','content-type','http://localhost:1666/file%20with%20space.html','gmoVg','DELETE','wee\x0a','serves\x20plaintext\x20with\x20headers','5OwOcRE','Zhkoa','yvzeh','shuts\x20down\x20without\x20exploding','plan','kEeAE','serves\x20index\x20page','doesnt\x20explode\x20immediately','cuYvL','jPHoZ','LegQG','tape'];_0x3e0e=function(){return _0x5e71e3;};return _0x3e0e();}test(_0x57ad41(0x1fb),function(_0x10e2f4){_0x10e2f4['plan'](0x1),_0x10e2f4['doesNotThrow'](function(){glanceServer['start']();});}),test(_0x57ad41(0x1f3),function(_0x5cc15a){var _0x5a94e2=_0x57ad41,_0x4fb1f8={'hdhkJ':'howdy!','bSWFv':_0x5a94e2(0x1ee),'Zhkoa':'text/plain','pvnda':_0x5a94e2(0x1ba)};http[_0x5a94e2(0x1e3)](_0x5a94e2(0x1de),function(_0x375452){var _0x3cf18b=_0x5a94e2;_0x5cc15a['plan'](0x3);var _0x18b337='';_0x5cc15a['strictEqual'](_0x375452[_0x3cf18b(0x1d2)],0xc8),_0x5cc15a['strictEqual'](_0x375452[_0x3cf18b(0x209)][_0x4fb1f8[_0x3cf18b(0x1d9)]],_0x4fb1f8[_0x3cf18b(0x1f5)]),_0x375452['on'](_0x4fb1f8[_0x3cf18b(0x1dc)],function(_0x33896e){var _0x54c354=_0x3cf18b,_0x16a889={'gbdTm':_0x54c354(0x1ec)};_0x54c354(0x1d5)!==_0x54c354(0x1d5)?(_0xd8f81e[_0x54c354(0x1f8)](0x2),_0x1a91a0[_0x54c354(0x1e3)](_0x54c354(0x1df),function(_0x5d150f){_0x4ce800['strictEqual'](_0x5d150f['statusCode'],0xc8);}),_0x3736eb[_0x54c354(0x1e3)](_0x16a889[_0x54c354(0x208)],function(_0x2d2082){var _0x5e4172=_0x54c354;_0x2f5c20[_0x5e4172(0x201)](_0x2d2082[_0x5e4172(0x1d2)],0xc8);})):_0x18b337+=_0x33896e;}),_0x375452['on']('end',function(){var _0x5a690a=_0x3cf18b;_0x5cc15a[_0x5a690a(0x201)](_0x18b337,_0x4fb1f8['hdhkJ']);});});}),test('deals\x20with\x20uri\x20encoding',function(_0x10decc){var _0x4abe2c=_0x57ad41,_0x4b8e51={'ZffrJ':'hey,\x20now!','cuYvL':'LnJqy','KuPnc':_0x4abe2c(0x1be),'qqsAZ':_0x4abe2c(0x1ef)};http['get'](_0x4b8e51[_0x4abe2c(0x1e2)],function(_0x24bd4e){var _0x152d14=_0x4abe2c,_0x278ea5={'wlyFv':_0x4b8e51[_0x152d14(0x1fc)]};_0x10decc[_0x152d14(0x1f8)](0x3);var _0x5c8862='';_0x10decc[_0x152d14(0x201)](_0x24bd4e[_0x152d14(0x1d2)],0xc8),_0x10decc['strictEqual'](_0x24bd4e[_0x152d14(0x209)][_0x152d14(0x1ee)],_0x152d14(0x1d4)),_0x24bd4e['on'](_0x152d14(0x1ba),function(_0x2ab567){var _0x1d3970=_0x152d14;_0x278ea5[_0x1d3970(0x1c0)]!==_0x278ea5[_0x1d3970(0x1c0)]?_0x388c22+=_0x355f23:_0x5c8862+=_0x2ab567;}),_0x24bd4e['on'](_0x4b8e51['KuPnc'],function(){var _0x24fc09=_0x152d14;_0x10decc[_0x24fc09(0x201)](_0x5c8862,_0x4b8e51[_0x24fc09(0x1e8)]);});});}),test('404s\x20on\x20file\x20not\x20found',function(_0x33181b){var _0x42a24c=_0x57ad41,_0x3aabf0={'CyfuH':_0x42a24c(0x1c7)};_0x33181b[_0x42a24c(0x1f8)](0x1),http[_0x42a24c(0x1e3)](_0x3aabf0[_0x42a24c(0x20c)],function(_0xccd143){var _0x45c3e1=_0x42a24c;_0x33181b[_0x45c3e1(0x201)](_0xccd143[_0x45c3e1(0x1d2)],0x194);});}),test(_0x57ad41(0x1bd),function(_0x4673fb){var _0x4a6604=_0x57ad41,_0x2ffce9={'ENMXW':'http://localhost:1666/'};_0x4673fb['plan'](0x1),glanceServer[_0x4a6604(0x1b5)]=!![],http['get'](_0x2ffce9[_0x4a6604(0x1c2)],function(_0x311fbb){var _0x1240fd=_0x4a6604;glanceServer[_0x1240fd(0x1b5)]=![],_0x4673fb[_0x1240fd(0x201)](_0x311fbb[_0x1240fd(0x1d2)],0x193);});}),test(_0x57ad41(0x200),function(_0x3b0ac3){var _0xb6f53e=_0x57ad41;_0x3b0ac3[_0xb6f53e(0x1f8)](0x1),http[_0xb6f53e(0x1e3)]('http://localhost:1666/../index.js',function(_0x1d4e5c){var _0x2bd9c1=_0xb6f53e;_0x3b0ac3[_0x2bd9c1(0x1c1)](_0x1d4e5c['statusCode'],0xc8);});}),test(_0x57ad41(0x1fa),function(_0x5b78dc){var _0x44dd6a=_0x57ad41,_0x358fc5={'MWLDb':function(_0x58b50d,_0x1b169a){return _0x58b50d!==_0x1b169a;},'kEeAE':_0x44dd6a(0x1f2),'pIugq':'end'};_0x5b78dc[_0x44dd6a(0x1f8)](0x2);var _0x2c23a3=[];http[_0x44dd6a(0x1e3)](_0x44dd6a(0x1e5),function(_0x20fc93){var _0x341fb4=_0x44dd6a,_0x5b4df2={'vmcSJ':function(_0x24eba7,_0x401b34){var _0x487779=_0x16c3;return _0x358fc5[_0x487779(0x20d)](_0x24eba7,_0x401b34);},'uqbqw':_0x341fb4(0x1ce),'MXluA':_0x358fc5[_0x341fb4(0x1f9)]};_0x5b78dc[_0x341fb4(0x201)](_0x20fc93[_0x341fb4(0x1d2)],0xc8),_0x20fc93['on'](_0x341fb4(0x1ba),_0x2c23a3['push'][_0x341fb4(0x1bf)](_0x2c23a3)),_0x20fc93['on'](_0x358fc5[_0x341fb4(0x202)],function(){var _0x448a2d=_0x341fb4;_0x5b4df2['vmcSJ'](_0x5b4df2[_0x448a2d(0x1ea)],'AfwiE')?_0x5b78dc['strictEqual'](_0x2c23a3[_0x448a2d(0x1db)](''),_0x5b4df2[_0x448a2d(0x1e4)]):_0x1a4294['push'](_0x15ee50);});});}),test(_0x57ad41(0x1ed),function(_0x13c35e){var _0x3ef739=_0x57ad41,_0x2772df={'BtijQ':_0x3ef739(0x1dd),'OrDvp':_0x3ef739(0x1e6),'lhbba':function(_0x38660a,_0xa4a687){return _0x38660a===_0xa4a687;},'qEJgm':_0x3ef739(0x1c8),'LegQG':_0x3ef739(0x1fd),'gmoVg':'PUT'};_0x13c35e[_0x3ef739(0x1f8)](0x3);var _0x13823d=['POST',_0x3ef739(0x1f1),_0x2772df[_0x3ef739(0x1f0)]];_0x13823d[_0x3ef739(0x1d1)](function(_0x56a6ca){var _0x43f49e=_0x3ef739,_0x2ae9f2={'host':_0x2772df['BtijQ'],'port':0x682,'path':_0x2772df['OrDvp'],'method':_0x56a6ca},_0x4e5512=http['request'](_0x2ae9f2,_0x1642bd);_0x4e5512[_0x43f49e(0x1be)]();});function _0x1642bd(_0x267ecc){var _0x124981=_0x3ef739;_0x2772df['lhbba'](_0x2772df[_0x124981(0x207)],_0x2772df[_0x124981(0x1fe)])?_0x228156[_0x124981(0x1b8)]():_0x13c35e[_0x124981(0x201)](_0x267ecc[_0x124981(0x1d2)],0x195);}}),test(_0x57ad41(0x1cc),function(_0x950ba3){var _0x20b7d7=_0x57ad41,_0x15faf4={'lojiR':_0x20b7d7(0x1e0),'sBYaq':_0x20b7d7(0x1cf),'GuXAO':_0x20b7d7(0x1df)};_0x950ba3[_0x20b7d7(0x1f8)](0x2),http[_0x20b7d7(0x1e3)](_0x15faf4['GuXAO'],function(_0x2cfb8d){var _0x556e85=_0x20b7d7;_0x950ba3['strictEqual'](_0x2cfb8d[_0x556e85(0x1d2)],0xc8);}),http[_0x20b7d7(0x1e3)]('http://localhost:1666/test1/.test2/lol.txt',function(_0x253c8b){var _0x5f13d1=_0x20b7d7;'bsgrq'!==_0x15faf4[_0x5f13d1(0x1d6)]?_0x950ba3['strictEqual'](_0x253c8b[_0x5f13d1(0x1d2)],0xc8):_0x681f9e[_0x5f13d1(0x201)](_0xed00d0,_0x15faf4[_0x5f13d1(0x1d0)]);});}),test(_0x57ad41(0x20e),function(_0x1206a9){var _0xc52189=_0x57ad41,_0x3aa81f={'vehqw':_0xc52189(0x1bb),'PlFLn':_0xc52189(0x204),'bMtLN':function(_0x22475d,_0x48a286){return _0x22475d===_0x48a286;},'Qbmqq':_0xc52189(0x1ca),'BmcQA':_0xc52189(0x1b9)};_0x1206a9[_0xc52189(0x1f8)](0x3);var _0x2a8e2f=[];http[_0xc52189(0x1e3)](_0xc52189(0x205),function(_0x8e39e8){var _0x406677=_0xc52189,_0x16f326={'Tyycx':function(_0x92dcff,_0x11185b){var _0x22b2b=_0x16c3;return _0x3aa81f[_0x22b2b(0x1eb)](_0x92dcff,_0x11185b);},'aUFQd':_0x3aa81f['Qbmqq'],'PUjbn':'RWntR'};_0x406677(0x1e9)===_0x3aa81f[_0x406677(0x1e7)]?(_0x4ecdf4[_0x406677(0x201)](_0x55dd78[_0x406677(0x1d2)],0xc8),_0x3bc846['on'](_0x406677(0x1ba),_0x397b8c['push']['bind'](_0x240583)),_0x125298['on'](_0x406677(0x1be),function(){var _0x2e5882=_0x406677;_0x2af86b[_0x2e5882(0x201)](_0x4a3719['join'](''),_0x2e5882(0x1f2));})):(_0x8e39e8['on'](_0x406677(0x1ba),function(_0x32020d){var _0x1c6958=_0x406677;_0x16f326[_0x1c6958(0x1b7)](_0x16f326['aUFQd'],_0x16f326[_0x1c6958(0x1d7)])?_0x2873cb[_0x1c6958(0x201)](_0x119b50[_0x1c6958(0x1d2)],0xc8):_0x2a8e2f['push'](_0x32020d);}),_0x8e39e8['on'](_0x406677(0x1be),function(){var _0x1e85e4=_0x406677,_0x4f9367=_0x2a8e2f[_0x1e85e4(0x1db)]('');_0x1206a9[_0x1e85e4(0x206)](/\<img/['test'](_0x4f9367),_0x3aa81f[_0x1e85e4(0x203)]),_0x1206a9['ok'](/\&lt;img/[_0x1e85e4(0x1c9)](_0x4f9367),_0x3aa81f[_0x1e85e4(0x1cb)]),_0x1206a9['ok'](/\%3Cimg/[_0x1e85e4(0x1c9)](_0x4f9367),_0x1e85e4(0x1e1));}));});}),test(_0x57ad41(0x1f7),function(_0x3475f8){var _0x5ab8d5=_0x57ad41,_0x446699={'atkGy':_0x5ab8d5(0x1f6)};_0x3475f8[_0x5ab8d5(0x1f8)](0x1),_0x3475f8[_0x5ab8d5(0x1c5)](function(){var _0x29cd7a=_0x5ab8d5;_0x446699[_0x29cd7a(0x1da)]==='CHVfn'?(_0x2cf148[_0x29cd7a(0x1b5)]=![],_0x502d83[_0x29cd7a(0x201)](_0x19a711['statusCode'],0x193)):glanceServer['stop']();});});