function _0x1304(){const _0x437507=['.DS_Store','3920iVGcQM','mlRsw','6012JySOZI','name','files','site','JluLH','join','48wqSOsg','indexOf','forEach','9055735uvDTVa','multisite','4423HOAAFl','JKxZu','query','2042940ySeBPb','push','readdirSync','HGHlz','QTwAj','94tQAdsu','1885965jmoFfX','files/','WMIne','642104PodokO','filename','path','4XElqLp','getType','ndisV','sitesDirectory','jxWtB','412192sGRrTc','tmKrk','../lib/HAXCMS.js','10aQOUja','siteDirectory','operatingContext','undefined','21GfRbDK','siteName','basePath','/files/','mime','loadSite','metadata','isFile','nxOzc'];_0x1304=function(){return _0x437507;};return _0x1304();}const _0x2402cf=_0x3c4f;(function(_0x3e8ce4,_0x5540c6){const _0x4904e0=_0x3c4f,_0x71a816=_0x3e8ce4();while(!![]){try{const _0x1c2756=-parseInt(_0x4904e0(0x104))/0x1*(parseInt(_0x4904e0(0xda))/0x2)+-parseInt(_0x4904e0(0xdb))/0x3*(parseInt(_0x4904e0(0xe1))/0x4)+parseInt(_0x4904e0(0xe9))/0x5*(parseInt(_0x4904e0(0x107))/0x6)+parseInt(_0x4904e0(0xed))/0x7*(parseInt(_0x4904e0(0xde))/0x8)+-parseInt(_0x4904e0(0xf9))/0x9*(parseInt(_0x4904e0(0xf7))/0xa)+-parseInt(_0x4904e0(0xe6))/0xb*(parseInt(_0x4904e0(0xff))/0xc)+parseInt(_0x4904e0(0x102))/0xd;if(_0x1c2756===_0x5540c6)break;else _0x71a816['push'](_0x71a816['shift']());}catch(_0x59d10d){_0x71a816['push'](_0x71a816['shift']());}}}(_0x1304,0x5a5a4));function _0x3c4f(_0x481eb2,_0x2a3a6a){const _0x130446=_0x1304();return _0x3c4f=function(_0x3c4f82,_0x1470b3){_0x3c4f82=_0x3c4f82-0xd7;let _0x2c611a=_0x130446[_0x3c4f82];return _0x2c611a;},_0x3c4f(_0x481eb2,_0x2a3a6a);}const {HAXCMS}=require(_0x2402cf(0xe8)),fs=require('fs'),path=require(_0x2402cf(0xe0)),mime=require(_0x2402cf(0xf1));async function listFiles(_0x1f1d2d,_0x5c1609){const _0x536802=_0x2402cf,_0x21e4b3={'tmKrk':function(_0x2de7fc,_0x1f0c81){return _0x2de7fc!=_0x1f0c81;},'nxOzc':function(_0x5bad06,_0x579797){return _0x5bad06!=_0x579797;},'WMIne':'.gitkeep','HGHlz':function(_0x2b4201,_0x260680){return _0x2b4201!=_0x260680;},'JKxZu':function(_0x13fdab,_0x4b0cd7){return _0x13fdab+_0x4b0cd7;},'ZrhbN':function(_0x36a5e9,_0xde4d64){return _0x36a5e9==_0xde4d64;},'QTwAj':function(_0x50e689,_0x12033f){return _0x50e689+_0x12033f;},'ndisV':function(_0x5be9f2,_0x4d02fa){return _0x5be9f2+_0x4d02fa;},'jxWtB':'files/','JluLH':function(_0x18783c,_0x225e8f){return _0x18783c!==_0x225e8f;},'mlRsw':_0x536802(0xec)};let _0x29b21a=[];if(_0x1f1d2d[_0x536802(0x106)]&&_0x1f1d2d[_0x536802(0x106)]['siteName']){let _0x35e16a=await HAXCMS[_0x536802(0xf2)](_0x1f1d2d['query'][_0x536802(0xee)]);if(_0x35e16a&&_0x35e16a[_0x536802(0xea)]){let _0x112ce4=_0x21e4b3[_0x536802(0xfd)](typeof _0x1f1d2d[_0x536802(0x106)]['filename'],_0x21e4b3[_0x536802(0xf8)])?_0x1f1d2d['query'][_0x536802(0xdf)]:'',_0xfdc2e8=path[_0x536802(0xfe)](_0x35e16a[_0x536802(0xea)],_0x536802(0xfb)),_0x44a82a;(_0x44a82a=fs[_0x536802(0xd7)](_0xfdc2e8))&&_0x44a82a[_0x536802(0x101)](_0x1088c5=>{const _0x1c6653=_0x536802;if(_0x21e4b3[_0x1c6653(0xe7)](_0x1088c5,'.')&&_0x21e4b3[_0x1c6653(0xf5)](_0x1088c5,'..')&&_0x1088c5!=_0x21e4b3[_0x1c6653(0xdd)]&&_0x21e4b3[_0x1c6653(0xd8)](_0x1088c5,_0x1c6653(0xf6))){if(fs['lstatSync'](_0x21e4b3[_0x1c6653(0x105)](_0xfdc2e8+'/',_0x1088c5))[_0x1c6653(0xf4)]()){if(!_0x112ce4||_0x112ce4==''||_0x1088c5[_0x1c6653(0x100)](_0x112ce4)!==-0x1){let _0x450e78=_0x21e4b3['JKxZu'](_0x1c6653(0xf0),_0x1088c5);_0x21e4b3['ZrhbN'](HAXCMS[_0x1c6653(0xeb)],_0x1c6653(0x103))&&(_0x450e78=_0x21e4b3['JKxZu'](_0x21e4b3[_0x1c6653(0x105)](_0x21e4b3[_0x1c6653(0xd9)](HAXCMS[_0x1c6653(0xef)],HAXCMS[_0x1c6653(0xe4)])+'/',_0x35e16a['manifest'][_0x1c6653(0xf3)][_0x1c6653(0xfc)][_0x1c6653(0xfa)]),_0x1c6653(0xf0))+_0x1088c5),_0x29b21a[_0x1c6653(0x108)]({'path':_0x21e4b3[_0x1c6653(0xe3)](_0x21e4b3[_0x1c6653(0xe5)],_0x1088c5),'fullUrl':_0x450e78,'url':_0x1c6653(0xdc)+_0x1088c5,'mimetype':mime[_0x1c6653(0xe2)](_0xfdc2e8+'/'+_0x1088c5),'name':_0x1088c5});}}else{}}});}}_0x5c1609['send'](_0x29b21a);}module['exports']=listFiles;