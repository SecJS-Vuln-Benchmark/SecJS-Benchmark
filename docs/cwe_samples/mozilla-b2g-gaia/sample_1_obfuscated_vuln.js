const _0xe1febf=_0x37a5;(function(_0x839093,_0x4a851b){const _0xb7e842=_0x37a5,_0x495ed6=_0x839093();while(!![]){try{const _0x2c3d08=-parseInt(_0xb7e842(0x166))/0x1+parseInt(_0xb7e842(0x17a))/0x2+parseInt(_0xb7e842(0x16b))/0x3*(-parseInt(_0xb7e842(0x179))/0x4)+-parseInt(_0xb7e842(0x17e))/0x5*(-parseInt(_0xb7e842(0x158))/0x6)+-parseInt(_0xb7e842(0x16e))/0x7+-parseInt(_0xb7e842(0x15b))/0x8*(-parseInt(_0xb7e842(0x14f))/0x9)+parseInt(_0xb7e842(0x180))/0xa*(-parseInt(_0xb7e842(0x172))/0xb);if(_0x2c3d08===_0x4a851b)break;else _0x495ed6['push'](_0x495ed6['shift']());}catch(_0x21f4ad){_0x495ed6['push'](_0x495ed6['shift']());}}}(_0x4add,0x232be));const {v4:uuidv4}=require(_0xe1febf(0x17b)),{VALID_CHAT_MODE}=require(_0xe1febf(0x156)),{EmbedChats}=require(_0xe1febf(0x16d)),{EmbedConfig}=require(_0xe1febf(0x165)),{reqBody}=require('../http');function _0x4add(){const _0x14b425=['\x20is\x20not\x20a\x20valid\x20mode.','WVEFf','GXBrn','3971XXOKKa','sVjdU','mMoGP','params','embedConfig','exports','ijQwK','12RmgNhx','139510WFkWZT','uuid','length','BylyY','160FvCauO','Your\x20quota\x20for\x20this\x20chat\x20has\x20been\x20reached.\x20Try\x20again\x20later\x20or\x20contact\x20the\x20site\x20owner.','330trjKMd','max_chats_per_session','hckYa','HiiGL','pxNVE','origin','This\x20chat\x20has\x20been\x20disabled\x20by\x20the\x20administrator\x20-\x20try\x20again\x20later.','locals','xAjum','getWithWorkspace','9DRgPFQ','end','hQPWH','Invalid\x20request.','enabled','Message\x20is\x20empty.','UhWhI','../chats/stream','get','45654IbICAU','json','headers','1665112qAaAmW','chat_mode','mDPBE','CDmUN','tBMZN','SgFeW','abort','MxDYp','SpKKp','zBVSr','../../models/embedConfig','78742yRDmNS','includes','sendStatus','status','max_chats_per_day','31857vELHMp','count','../../models/embedChats','1783656XFcOQe'];_0x4add=function(){return _0x14b425;};return _0x4add();}async function validEmbedConfig(_0x1c524e,_0x4dde3d,_0x2ebf2b){const _0x30c0f4=_0xe1febf,_0x75dcb9={'AAoEA':function(_0x3361fb){return _0x3361fb();}},{embedId:_0x277abb}=_0x1c524e['params'],_0x2f98f5=await EmbedConfig[_0x30c0f4(0x14e)]({'uuid':_0x277abb});if(!_0x2f98f5){_0x4dde3d[_0x30c0f4(0x168)](0x194)[_0x30c0f4(0x150)]();return;}_0x4dde3d[_0x30c0f4(0x14c)][_0x30c0f4(0x176)]=_0x2f98f5,_0x75dcb9['AAoEA'](_0x2ebf2b);}function setConnectionMeta(_0x1151e8,_0x1c66e1,_0x35d945){const _0x361343=_0xe1febf,_0x29ef50={'CDmUN':function(_0x15d9db){return _0x15d9db();}};_0x1c66e1[_0x361343(0x14c)]['connection']={'host':_0x1151e8[_0x361343(0x15a)]?.['origin'],'ip':_0x1151e8?.['ip']},_0x29ef50[_0x361343(0x15e)](_0x35d945);}async function validEmbedConfigId(_0x4072e7,_0x3c8c56,_0x9c53ad){const _0x3d6134=_0xe1febf,_0x1790e0={'mDPBE':function(_0x4ae827,_0x446821){return _0x4ae827(_0x446821);}},{embedId:_0x3e0f30}=_0x4072e7[_0x3d6134(0x175)],_0x3d4970=await EmbedConfig[_0x3d6134(0x157)]({'id':_0x1790e0[_0x3d6134(0x15d)](Number,_0x3e0f30)});if(!_0x3d4970){_0x3c8c56[_0x3d6134(0x168)](0x194)['end']();return;}_0x3c8c56[_0x3d6134(0x14c)][_0x3d6134(0x176)]=_0x3d4970,_0x9c53ad();}async function canRespond(_0x1a6a0c,_0x1334e6,_0x18f927){const _0x3225c5=_0xe1febf,_0x3e5223={'sVjdU':function(_0x1e6a7d){return _0x1e6a7d();},'WVEFf':'abort','zBVSr':'Invalid\x20request.','hckYa':'The\x20quota\x20for\x20this\x20chat\x20has\x20been\x20reached.\x20Try\x20again\x20later\x20or\x20contact\x20the\x20site\x20owner.','ooxTY':function(_0x4ba161){return _0x4ba161();},'ywngB':_0x3225c5(0x14b),'pxNVE':_0x3225c5(0x154),'MxDYp':function(_0x30795f,_0x1a26a1){return _0x30795f(_0x1a26a1);},'xAjum':function(_0xa1f36d,_0x546264){return _0xa1f36d-_0x546264;},'SgFeW':function(_0x5e5f0,_0x18aa1a){return _0x5e5f0*_0x18aa1a;},'SpKKp':function(_0x4aeac3,_0x30f361){return _0x4aeac3>=_0x30f361;},'hQPWH':function(_0x3621f5,_0x5d2082){return _0x3621f5===_0x5d2082;},'mMoGP':'BylyY','GXBrn':_0x3225c5(0x15f),'pezzC':function(_0x17431a,_0x1c1092){return _0x17431a*_0x1c1092;},'HiiGL':'AUOZf','UhWhI':function(_0x53cc70){return _0x53cc70();}};try{const _0x517dee=_0x1334e6[_0x3225c5(0x14c)][_0x3225c5(0x176)];if(!_0x517dee){_0x1334e6[_0x3225c5(0x168)](0x194)[_0x3225c5(0x150)]();return;}if(!_0x517dee[_0x3225c5(0x153)]){_0x1334e6[_0x3225c5(0x169)](0x1f7)['json']({'id':_0x3e5223['ooxTY'](uuidv4),'type':'abort','textResponse':null,'sources':[],'close':!![],'error':_0x3e5223['ywngB']});return;}const _0x3da499=_0x1a6a0c[_0x3225c5(0x15a)][_0x3225c5(0x14a)]??'',_0x14f25e=EmbedConfig['parseAllowedHosts'](_0x517dee);if(_0x14f25e!==null&&!_0x14f25e[_0x3225c5(0x167)](_0x3da499)){_0x1334e6[_0x3225c5(0x169)](0x191)[_0x3225c5(0x159)]({'id':uuidv4(),'type':_0x3e5223[_0x3225c5(0x170)],'textResponse':null,'sources':[],'close':!![],'error':_0x3e5223['zBVSr']});return;}const {sessionId:_0x21fac5,message:_0x4f839e}=reqBody(_0x1a6a0c);if(!_0x4f839e?.[_0x3225c5(0x17c)]||!VALID_CHAT_MODE['includes'](_0x517dee['chat_mode'])){_0x1334e6[_0x3225c5(0x169)](0x190)[_0x3225c5(0x159)]({'id':_0x3e5223['ooxTY'](uuidv4),'type':_0x3e5223[_0x3225c5(0x170)],'textResponse':null,'sources':[],'close':!![],'error':!_0x4f839e?.[_0x3225c5(0x17c)]?_0x3e5223[_0x3225c5(0x149)]:_0x517dee[_0x3225c5(0x15c)]+_0x3225c5(0x16f)});return;}if(!isNaN(_0x517dee[_0x3225c5(0x16a)])&&_0x3e5223[_0x3225c5(0x162)](Number,_0x517dee['max_chats_per_day'])>0x0){const _0xfd6d36=await EmbedChats[_0x3225c5(0x16c)]({'embed_id':_0x517dee['id'],'createdAt':{'gte':new Date(_0x3e5223[_0x3225c5(0x14d)](new Date(),_0x3e5223[_0x3225c5(0x160)](_0x3e5223[_0x3225c5(0x160)](0x18,0x3c)*0x3c,0x3e8)))}});if(_0x3e5223[_0x3225c5(0x163)](_0xfd6d36,_0x3e5223[_0x3225c5(0x162)](Number,_0x517dee[_0x3225c5(0x16a)]))){if(_0x3e5223[_0x3225c5(0x151)](_0x3e5223[_0x3225c5(0x174)],_0x3225c5(0x17d))){_0x1334e6[_0x3225c5(0x169)](0x1ad)[_0x3225c5(0x159)]({'id':_0x3e5223['sVjdU'](uuidv4),'type':_0x3e5223['WVEFf'],'textResponse':null,'sources':[],'close':!![],'error':'The\x20quota\x20for\x20this\x20chat\x20has\x20been\x20reached.\x20Try\x20again\x20later\x20or\x20contact\x20the\x20site\x20owner.'});return;}else{_0x1d30ff['status'](0x1f4)[_0x3225c5(0x159)]({'id':_0x3e5223[_0x3225c5(0x173)](_0x508bb5),'type':_0x3e5223[_0x3225c5(0x170)],'textResponse':null,'sources':[],'close':!![],'error':_0x3e5223[_0x3225c5(0x164)]});return;}}}if(!isNaN(_0x517dee[_0x3225c5(0x181)])&&Number(_0x517dee[_0x3225c5(0x181)])>0x0){if(_0x3e5223[_0x3225c5(0x171)]!==_0x3e5223[_0x3225c5(0x171)]){_0x2a7c08[_0x3225c5(0x169)](0x1ad)[_0x3225c5(0x159)]({'id':_0x252f22(),'type':_0x3e5223[_0x3225c5(0x170)],'textResponse':null,'sources':[],'close':!![],'error':_0x3e5223[_0x3225c5(0x147)]});return;}else{const _0x5eebe6=await EmbedChats['count']({'embed_id':_0x517dee['id'],'session_id':_0x21fac5,'createdAt':{'gte':new Date(new Date()-_0x3e5223['pezzC'](0x18*0x3c*0x3c,0x3e8))}});if(_0x5eebe6>=Number(_0x517dee[_0x3225c5(0x181)])){_0x1334e6['status'](0x1ad)[_0x3225c5(0x159)]({'id':uuidv4(),'type':_0x3225c5(0x161),'textResponse':null,'sources':[],'close':!![],'error':_0x3225c5(0x17f)});return;}}}_0x18f927();}catch(_0xef1a6e){if(_0x3e5223['hQPWH'](_0x3225c5(0x178),_0x3e5223[_0x3225c5(0x148)])){_0x11de01[_0x3225c5(0x169)](0x190)['json']({'id':_0x39497a(),'type':_0x3225c5(0x161),'textResponse':null,'sources':[],'close':!![],'error':!_0x36928b?.[_0x3225c5(0x17c)]?'Message\x20is\x20empty.':_0x290a78['chat_mode']+'\x20is\x20not\x20a\x20valid\x20mode.'});return;}else{_0x1334e6[_0x3225c5(0x169)](0x1f4)[_0x3225c5(0x159)]({'id':_0x3e5223[_0x3225c5(0x155)](uuidv4),'type':_0x3e5223[_0x3225c5(0x170)],'textResponse':null,'sources':[],'close':!![],'error':_0x3225c5(0x152)});return;}}}function _0x37a5(_0x5a9a92,_0x540080){const _0x4add12=_0x4add();return _0x37a5=function(_0x37a5e2,_0x598749){_0x37a5e2=_0x37a5e2-0x147;let _0x4f322d=_0x4add12[_0x37a5e2];return _0x4f322d;},_0x37a5(_0x5a9a92,_0x540080);}module[_0xe1febf(0x177)]={'setConnectionMeta':setConnectionMeta,'validEmbedConfig':validEmbedConfig,'validEmbedConfigId':validEmbedConfigId,'canRespond':canRespond};