function _0x7dbc(){const _0x19caf9=['where','15794922sHEjzS','custom-documents','rmSync','push','removeDocuments','463990TZTcKt','all','flat','documents','resolve','27uSwUjm','1456710YLYiWH','10360ZvSzzB','readdirSync','path','map','7ystWfO','2377662vyTfGk','../../models/workspace','../../storage/documents','BpLCK','exports','development','8vUwKox','47134fwmTmZ','then','1109319tgOMvF','844GEOxlT','env','join'];_0x7dbc=function(){return _0x19caf9;};return _0x7dbc();}const _0x4c2b9b=_0x474f;(function(_0x2aa974,_0x5deb2b){const _0x100b31=_0x474f,_0x1361da=_0x2aa974();while(!![]){try{const _0x5061c0=-parseInt(_0x100b31(0x1c9))/0x1*(parseInt(_0x100b31(0x1d1))/0x2)+-parseInt(_0x100b31(0x1d3))/0x3+parseInt(_0x100b31(0x1d4))/0x4*(-parseInt(_0x100b31(0x1e4))/0x5)+parseInt(_0x100b31(0x1e3))/0x6+parseInt(_0x100b31(0x1ca))/0x7*(-parseInt(_0x100b31(0x1d0))/0x8)+parseInt(_0x100b31(0x1e2))/0x9*(-parseInt(_0x100b31(0x1dd))/0xa)+parseInt(_0x100b31(0x1d8))/0xb;if(_0x5061c0===_0x5deb2b)break;else _0x1361da['push'](_0x1361da['shift']());}catch(_0x2aee92){_0x1361da['push'](_0x1361da['shift']());}}}(_0x7dbc,0x37a32));const fs=require('fs'),path=require(_0x4c2b9b(0x1c7)),{purgeVectorCache,purgeSourceDocument,normalizePath}=require('.'),{Document}=require('../../models/documents'),{Workspace}=require(_0x4c2b9b(0x1cb));function _0x474f(_0x1af313,_0x2cd440){const _0x7dbcba=_0x7dbc();return _0x474f=function(_0x474fe6,_0x5a1d89){_0x474fe6=_0x474fe6-0x1c7;let _0x207aeb=_0x7dbcba[_0x474fe6];return _0x207aeb;},_0x474f(_0x1af313,_0x2cd440);}async function purgeDocument(_0x57638a){const _0x520410=_0x4c2b9b,_0x3aef78=await Workspace[_0x520410(0x1d7)]();for(const _0x46dafa of _0x3aef78){await Document[_0x520410(0x1dc)](_0x46dafa,[_0x57638a]);}await purgeVectorCache(_0x57638a),await purgeSourceDocument(_0x57638a);return;}async function purgeFolder(_0x4bbf6c){const _0x32569f=_0x4c2b9b,_0x19b853={'BpLCK':function(_0x4a5423,_0x51a74f){return _0x4a5423===_0x51a74f;}};if(_0x19b853[_0x32569f(0x1cd)](_0x4bbf6c,_0x32569f(0x1d9)))return;const _0x3b9d78=process[_0x32569f(0x1d5)]['NODE_ENV']===_0x32569f(0x1cf)?path['resolve'](__dirname,_0x32569f(0x1cc)):path[_0x32569f(0x1e1)](process[_0x32569f(0x1d5)]['STORAGE_DIR'],_0x32569f(0x1e0)),_0x2accdf=path[_0x32569f(0x1e1)](_0x3b9d78,normalizePath(_0x4bbf6c)),_0x39d698=fs[_0x32569f(0x1e5)](_0x2accdf)[_0x32569f(0x1c8)](_0xa96b64=>path[_0x32569f(0x1d6)](_0x2accdf,_0xa96b64)),_0x44944d=await Workspace[_0x32569f(0x1d7)](),_0x52815a=[];for(const _0x5254cc of _0x39d698){const _0x31722a=()=>new Promise(_0x4dc09e=>purgeVectorCache(_0x5254cc)[_0x32569f(0x1d2)](()=>_0x4dc09e(!![])));_0x52815a[_0x32569f(0x1db)](_0x31722a);}for(const _0x9d20d5 of _0x44944d){const _0x2d70bd=()=>new Promise(_0x5a480b=>Document[_0x32569f(0x1dc)](_0x9d20d5,_0x39d698)[_0x32569f(0x1d2)](()=>_0x5a480b(!![])));_0x52815a[_0x32569f(0x1db)](_0x2d70bd);}await Promise[_0x32569f(0x1de)](_0x52815a[_0x32569f(0x1df)]()[_0x32569f(0x1c8)](_0x3d50fa=>_0x3d50fa())),fs[_0x32569f(0x1da)](_0x2accdf,{'recursive':!![]});return;}module[_0x4c2b9b(0x1ce)]={'purgeDocument':purgeDocument,'purgeFolder':purgeFolder};