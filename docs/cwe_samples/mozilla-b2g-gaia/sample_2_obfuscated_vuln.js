const _0x553722=_0x39a8;function _0x2137(){const _0x28258c=['978856OhRtuC','ITFLJ','mPUTF','stiSF','480138BWhgwY','ZZuko','count','embed_chats','rRLoc','UJAuM','mqqea','IMUeK','ozOUx','deleteMany','qVNcY','updateMany','mLuFM','stringify','cPaNn','OKczF','findMany','221924WIZfqH','uRplo','asc','1580516eSYncR','KizXO','363182JMTfFl','error','message','exports','tOxaJ','rPGft','92695hhXTmZ','1025106dqROkl','create','findFirst'];_0x2137=function(){return _0x28258c;};return _0x2137();}(function(_0x24f018,_0x38f9e0){const _0x2a3766=_0x39a8,_0x1231ed=_0x24f018();while(!![]){try{const _0x2080e8=parseInt(_0x2a3766(0x16d))/0x1+-parseInt(_0x2a3766(0x172))/0x2+-parseInt(_0x2a3766(0x180))/0x3+parseInt(_0x2a3766(0x17c))/0x4+-parseInt(_0x2a3766(0x178))/0x5+-parseInt(_0x2a3766(0x179))/0x6+parseInt(_0x2a3766(0x170))/0x7;if(_0x2080e8===_0x38f9e0)break;else _0x1231ed['push'](_0x1231ed['shift']());}catch(_0x197fd6){_0x1231ed['push'](_0x1231ed['shift']());}}}(_0x2137,0x27677));const prisma=require('../utils/prisma'),EmbedChats={'new':async function({embedId:_0x7c79ff,prompt:_0x1fdd8a,response:response={},connection_information:connection_information={},sessionId:_0x579277}){const _0x3dc897=_0x39a8,_0x1c3b49={'IMUeK':_0x3dc897(0x166),'mKCxo':function(_0x1185e3,_0x10c9d6){return _0x1185e3===_0x10c9d6;}};try{if(_0x1c3b49[_0x3dc897(0x163)]!=='boFmH'){const _0x156778=await prisma[_0x3dc897(0x183)][_0x3dc897(0x17a)]({'data':{'prompt':_0x1fdd8a,'embed_id':Number(_0x7c79ff),'response':JSON[_0x3dc897(0x169)](response),'connection_information':JSON[_0x3dc897(0x169)](connection_information),'session_id':_0x579277}});return{'chat':_0x156778,'message':null};}else return _0x2b6b24[_0x3dc897(0x173)](_0x4cc3c0[_0x3dc897(0x174)]),[];}catch(_0x2f2171){return _0x1c3b49['mKCxo'](_0x3dc897(0x184),'rRLoc')?(console[_0x3dc897(0x173)](_0x2f2171['message']),{'chat':null,'message':_0x2f2171[_0x3dc897(0x174)]}):(_0xb5414[_0x3dc897(0x173)](_0xe1263b[_0x3dc897(0x174)]),{'chat':null,'message':_0x45188c['message']});}},'forEmbedByUser':async function(_0x366709=null,_0x134043=null,_0x7d4267=null,_0x413ba2=null){const _0x2cb93e=_0x39a8,_0x5204b1={'cPaNn':function(_0x4622e0,_0x44c048){return _0x4622e0!==_0x44c048;},'tOxaJ':_0x2cb93e(0x16f),'ITFLJ':_0x2cb93e(0x168),'ZZuko':_0x2cb93e(0x177)};if(!_0x366709||!_0x134043)return[];try{const _0x738c77=await prisma[_0x2cb93e(0x183)][_0x2cb93e(0x16c)]({'where':{'embed_id':_0x366709,'session_id':_0x134043,'include':!![]},..._0x5204b1[_0x2cb93e(0x16a)](_0x7d4267,null)?{'take':_0x7d4267}:{},..._0x5204b1['cPaNn'](_0x413ba2,null)?{'orderBy':_0x413ba2}:{'orderBy':{'id':_0x5204b1[_0x2cb93e(0x176)]}}});return _0x738c77;}catch(_0x55d6df){if(_0x5204b1[_0x2cb93e(0x17d)]!==_0x5204b1[_0x2cb93e(0x181)])return console['error'](_0x55d6df['message']),[];else _0xb243c9[_0x2cb93e(0x173)](_0x47ba37[_0x2cb93e(0x174)]);}},'markHistoryInvalid':async function(_0x456d1a=null,_0x4a299e=null){const _0x1b1d01=_0x39a8;if(!_0x456d1a||!_0x4a299e)return[];try{await prisma[_0x1b1d01(0x183)][_0x1b1d01(0x167)]({'where':{'embed_id':_0x456d1a,'session_id':_0x4a299e},'data':{'include':![]}});return;}catch(_0x15793d){console[_0x1b1d01(0x173)](_0x15793d['message']);}},'get':async function(_0x3ceb7d={},_0x2cfa49=null,_0x442ce8=null){const _0x10b408=_0x39a8,_0x3cd169={'OKczF':function(_0x56e802,_0x44d3d0){return _0x56e802!==_0x44d3d0;},'UJAuM':function(_0x5317e8,_0x539ac6){return _0x5317e8||_0x539ac6;}};try{const _0x3978e6=await prisma['embed_chats'][_0x10b408(0x17b)]({'where':_0x3ceb7d,..._0x2cfa49!==null?{'take':_0x2cfa49}:{},..._0x3cd169[_0x10b408(0x16b)](_0x442ce8,null)?{'orderBy':_0x442ce8}:{}});return _0x3cd169[_0x10b408(0x185)](_0x3978e6,null);}catch(_0x4b28cb){return console[_0x10b408(0x173)](_0x4b28cb[_0x10b408(0x174)]),null;}},'delete':async function(_0x75ef14={}){const _0x11f055=_0x39a8;try{return await prisma[_0x11f055(0x183)][_0x11f055(0x165)]({'where':_0x75ef14}),!![];}catch(_0x5c3acf){return console['error'](_0x5c3acf[_0x11f055(0x174)]),![];}},'where':async function(_0x43f8da={},_0x20f158=null,_0x491178=null,_0x55c675=null){const _0x3c5bf9=_0x39a8,_0x246c61={'mPUTF':function(_0xc66e9a,_0xd7cec5){return _0xc66e9a!==_0xd7cec5;},'uRplo':function(_0xd1c9aa,_0x22e243){return _0xd1c9aa!==_0x22e243;},'stiSF':function(_0xcc597c,_0x231f9a){return _0xcc597c===_0x231f9a;},'KizXO':_0x3c5bf9(0x186)};try{const _0x2b62bf=await prisma[_0x3c5bf9(0x183)][_0x3c5bf9(0x16c)]({'where':_0x43f8da,..._0x246c61[_0x3c5bf9(0x17e)](_0x20f158,null)?{'take':_0x20f158}:{},..._0x246c61[_0x3c5bf9(0x16e)](_0x55c675,null)?{'skip':_0x55c675}:{},..._0x491178!==null?{'orderBy':_0x491178}:{}});return _0x2b62bf;}catch(_0x5c8f9e){return _0x246c61[_0x3c5bf9(0x17f)]('mqqea',_0x246c61[_0x3c5bf9(0x171)])?(console[_0x3c5bf9(0x173)](_0x5c8f9e[_0x3c5bf9(0x174)]),[]):(_0x348c21[_0x3c5bf9(0x173)](_0x3d61f0['message']),![]);}},'whereWithEmbedAndWorkspace':async function(_0x49f9b0={},_0x2b97a9=null,_0x303531=null,_0x481264=null){const _0x491266=_0x39a8,_0x250221={'YLGoM':function(_0x579c4c,_0xce2393){return _0x579c4c!==_0xce2393;}};try{const _0x242582=await prisma['embed_chats'][_0x491266(0x16c)]({'where':_0x49f9b0,'include':{'embed_config':{'select':{'workspace':{'select':{'name':!![]}}}}},..._0x250221['YLGoM'](_0x2b97a9,null)?{'take':_0x2b97a9}:{},..._0x481264!==null?{'skip':_0x481264}:{},..._0x303531!==null?{'orderBy':_0x303531}:{}});return _0x242582;}catch(_0x2f2ff3){return _0x491266(0x164)!=='ozOUx'?(_0x16202d[_0x491266(0x173)](_0xd4acfd[_0x491266(0x174)]),[]):(console['error'](_0x2f2ff3[_0x491266(0x174)]),[]);}},'count':async function(_0x5351ca={}){const _0x1f86e5=_0x39a8;try{const _0x46c7b0=await prisma[_0x1f86e5(0x183)][_0x1f86e5(0x182)]({'where':_0x5351ca});return _0x46c7b0;}catch(_0x5d3f96){return console[_0x1f86e5(0x173)](_0x5d3f96[_0x1f86e5(0x174)]),0x0;}}};function _0x39a8(_0x4d951a,_0x4a3a43){const _0x21376b=_0x2137();return _0x39a8=function(_0x39a8f3,_0x444ece){_0x39a8f3=_0x39a8f3-0x163;let _0x2d5403=_0x21376b[_0x39a8f3];return _0x2d5403;},_0x39a8(_0x4d951a,_0x4a3a43);}module[_0x553722(0x175)]={'EmbedChats':EmbedChats};