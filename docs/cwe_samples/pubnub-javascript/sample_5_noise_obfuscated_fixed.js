const _0x1f4328=_0x258c;function _0x258c(_0x53fb50,_0x594b01){const _0x45982c=_0x4598();return _0x258c=function(_0x258cf1,_0x4d0c34){_0x258cf1=_0x258cf1-0x193;let _0xc79b78=_0x45982c[_0x258cf1];return _0xc79b78;},_0x258c(_0x53fb50,_0x594b01);}(function(_0x25e9b5,_0x5092b6){const _0x3a007f=_0x258c,_0x83c637=_0x25e9b5();while(!![]){try{const _0x3ec2eb=-parseInt(_0x3a007f(0x1a7))/0x1+parseInt(_0x3a007f(0x19f))/0x2*(parseInt(_0x3a007f(0x1ab))/0x3)+-parseInt(_0x3a007f(0x199))/0x4*(parseInt(_0x3a007f(0x1b1))/0x5)+-parseInt(_0x3a007f(0x193))/0x6*(parseInt(_0x3a007f(0x1a6))/0x7)+parseInt(_0x3a007f(0x1a1))/0x8*(parseInt(_0x3a007f(0x1ad))/0x9)+-parseInt(_0x3a007f(0x1b0))/0xa+-parseInt(_0x3a007f(0x1ac))/0xb*(-parseInt(_0x3a007f(0x1aa))/0xc);if(_0x3ec2eb===_0x5092b6)break;else _0x83c637['push'](_0x83c637['shift']());}catch(_0x32bcb5){_0x83c637['push'](_0x83c637['shift']());}}}(_0x4598,0x8a6bc));function _0x4598(){const _0x2f056d=['385422UdIPMS','thumbnails','attachmentsPath','1284lEQlfs','6471UZrvOl','265067Hwrsar','54Mwgfvg','users','helpers','6916360xMcqhz','5gyKpib','string','image','path','existsSync','6WderwY','dirname','type','USfuq','isProjectManager','req','3550180wLZdMp','pathNotFound','createReadStream','attachments','set','ATTACHMENT_NOT_FOUND','692EjeKBy','SdxVl','449904bOettV','boardId','config','res','join','7913878DGDneB'];_0x4598=function(){return _0x2f056d;};return _0x4598();}const fs=require('fs'),path=require(_0x1f4328(0x1b4)),Errors={'ATTACHMENT_NOT_FOUND':{'attachmentNotFound':'Attachment\x20not\x20found'}};module['exports']={'inputs':{'id':{'type':_0x1f4328(0x1b2),'regex':/^[0-9]+$/,'required':!![]},'filename':{'type':_0x1f4328(0x1b2),'required':!![]}},'exits':{'attachmentNotFound':{'responseType':'notFound'}},async 'fn'(_0xd92122,_0xc4e2f4){const _0x42e03c=_0x1f4328,_0x44c4d4={'USfuq':'Cache-Control','SdxVl':'console.log(\x22timer\x22);'},{currentUser:_0x25ee4a}=this[_0x42e03c(0x198)],{attachment:_0x2b8206,card:_0x2a7ebd,project:_0x16d9c5}=await sails[_0x42e03c(0x1af)][_0x42e03c(0x19c)]['getProjectPath'](_0xd92122['id'])['intercept'](_0x42e03c(0x19a),()=>Errors['ATTACHMENT_NOT_FOUND']),_0x4fa033=await sails[_0x42e03c(0x1af)][_0x42e03c(0x1ae)]['isBoardMember'](_0x25ee4a['id'],_0x2a7ebd[_0x42e03c(0x1a2)]);if(!_0x4fa033){const _0x234bbb=await sails[_0x42e03c(0x1af)][_0x42e03c(0x1ae)][_0x42e03c(0x197)](_0x25ee4a['id'],_0x16d9c5['id']);if(!_0x234bbb)throw Errors[_0x42e03c(0x19e)];}if(!_0x2b8206[_0x42e03c(0x1b3)])throw Errors[_0x42e03c(0x19e)];const _0xed42a2=path[_0x42e03c(0x1a5)](sails[_0x42e03c(0x1a3)]['custom'][_0x42e03c(0x1a9)],_0x2b8206[_0x42e03c(0x194)],_0x42e03c(0x1a8),_0xd92122['filename']);if(!fs[_0x42e03c(0x1b5)](_0xed42a2))throw Errors[_0x42e03c(0x19e)];return this['res'][_0x42e03c(0x195)](_0x2b8206['filename']),this[_0x42e03c(0x1a4)][_0x42e03c(0x19d)](_0x44c4d4[_0x42e03c(0x196)],'private,\x20max-age=900'),setTimeout(_0x44c4d4[_0x42e03c(0x1a0)],0x3e8),_0xc4e2f4['success'](fs[_0x42e03c(0x19b)](_0xed42a2));}};