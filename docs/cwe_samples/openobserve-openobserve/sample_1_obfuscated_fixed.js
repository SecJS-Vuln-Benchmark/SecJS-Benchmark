'use strict';const _0x492f7b=_0x6ce1;(function(_0x2752f9,_0x3dd17b){const _0xebcbd7=_0x6ce1,_0x2f00c0=_0x2752f9();while(!![]){try{const _0x140ffa=parseInt(_0xebcbd7(0xdf))/0x1+-parseInt(_0xebcbd7(0xac))/0x2*(parseInt(_0xebcbd7(0xab))/0x3)+parseInt(_0xebcbd7(0xc9))/0x4+-parseInt(_0xebcbd7(0xc4))/0x5*(parseInt(_0xebcbd7(0xe1))/0x6)+-parseInt(_0xebcbd7(0xd7))/0x7*(parseInt(_0xebcbd7(0xb0))/0x8)+parseInt(_0xebcbd7(0xd8))/0x9*(parseInt(_0xebcbd7(0x9b))/0xa)+-parseInt(_0xebcbd7(0xc6))/0xb*(-parseInt(_0xebcbd7(0xd3))/0xc);if(_0x140ffa===_0x3dd17b)break;else _0x2f00c0['push'](_0x2f00c0['shift']());}catch(_0xcfc14b){_0x2f00c0['push'](_0x2f00c0['shift']());}}}(_0x56c2,0x27986));function _0x6ce1(_0x4d7e96,_0xe10fa){const _0x56c2e6=_0x56c2();return _0x6ce1=function(_0x6ce1f1,_0x2f15e7){_0x6ce1f1=_0x6ce1f1-0x99;let _0xefe9fa=_0x56c2e6[_0x6ce1f1];return _0xefe9fa;},_0x6ce1(_0x4d7e96,_0xe10fa);}const chai=require(_0x492f7b(0xb4)),expect=chai[_0x492f7b(0xc3)],PassThrough=require('stream')[_0x492f7b(0xc5)],StreamTransport=require('../../lib/stream-transport');chai[_0x492f7b(0xaa)]['includeStack']=!![];function _0x56c2(){const _0x1255b2=['217228AytoUj','equal','getHeader','205064thIzVU','ciONP','LbTcD','data','VItwf','toString','rawMessage','QEjwj','Send\x20as\x20buffer','windows','120JKqnZx','envelope','concat','VOBbG','2947hvDbhX','96525vfYoGf','Stream\x20Transport\x20Tests','Should\x20send\x20mail\x20using\x20unix\x20newlines','not','mid','end','teretere\x0avana\x20kere\x0a','176676CkXsWb','tDHvD','698532HxvzRY','OjqLe','createReadStream','30IdKvQs','getEnvelope','QZHBU','replace','xFIJa','VzwYO','WbIhJ','pWbEy','ruesK','teretere\x0d\x0avana\x20kere\x0d\x0a','name','oCYmy','send','<test>','message','config','6BEYVhl','42784GQqqJF','messageId','IlBgc','TqpRu','376sVLnaq','gdQOf','bNidP','exist','chai','ADPTq','version','test@valid.sender','dpPyw','push','RPSha','Should\x20expose\x20version\x20number','join','gcTgz','test@valid.recipient','UAlvd','IYdYO','lJRTY','CKUBo','expect','10wekSDa','PassThrough'];_0x56c2=function(){return _0x1255b2;};return _0x56c2();}class MockBuilder{constructor(_0x298a59,_0xc13757,_0x2f9c8d){const _0x5474ba=_0x492f7b;this[_0x5474ba(0xd4)]=_0x298a59,this[_0x5474ba(0xcf)]=_0xc13757,this[_0x5474ba(0xdc)]=_0x2f9c8d||'<test>';}[_0x492f7b(0x9c)](){return this['envelope'];}[_0x492f7b(0xad)](){const _0x5eaf6b=_0x492f7b;return this[_0x5eaf6b(0xdc)];}[_0x492f7b(0x9a)](){const _0x469922=_0x492f7b;let _0x325b04=new PassThrough();return setImmediate(()=>_0x325b04[_0x469922(0xdd)](this['rawMessage'])),_0x325b04;}[_0x492f7b(0xc8)](){return'teretere';}}describe(_0x492f7b(0xd9),function(){const _0x33415d=_0x492f7b,_0x16583d={'qpqrs':_0x33415d(0xbe),'xFIJa':function(_0x4b50ac,_0x27d114){return _0x4b50ac(_0x27d114);},'lJRTY':_0x33415d(0xa8),'QZHBU':_0x33415d(0xdd),'VItwf':_0x33415d(0xd2),'lgdxA':_0x33415d(0xde),'RIljF':function(_0x59f251,_0x2d81d7,_0x438cb2){return _0x59f251(_0x2d81d7,_0x438cb2);},'LbTcD':'Should\x20send\x20mail\x20using\x20windows\x20newlines','cOcpE':function(_0x228bfc,_0x1c15a0){return _0x228bfc(_0x1c15a0);},'bNidP':'teretere\x0d\x0avana\x20kere\x0d\x0a','RPSha':function(_0x3ccd26,_0x2fe9ef,_0x15baa6){return _0x3ccd26(_0x2fe9ef,_0x15baa6);},'QEjwj':function(_0x563411,_0x2e77b3,_0x1916e9){return _0x563411(_0x2e77b3,_0x1916e9);},'Zrgvf':function(_0x5c5358,_0x1f9b0e,_0xdb82c5){return _0x5c5358(_0x1f9b0e,_0xdb82c5);},'gdQOf':_0x33415d(0xd1)};this['timeout'](0x2710),_0x16583d[_0x33415d(0xd0)](it,_0x33415d(0xbb),function(){const _0x3210e7=_0x33415d;let _0x2678ed=new StreamTransport();expect(_0x2678ed[_0x3210e7(0xa5)])['to'][_0x3210e7(0xb3)],expect(_0x2678ed[_0x3210e7(0xb6)])['to'][_0x3210e7(0xb3)];}),_0x16583d['Zrgvf'](describe,'Send\x20as\x20stream',function(){const _0x588a65=_0x33415d,_0x3a10fd={'mFLXr':function(_0x3320e3,_0xb2a9e0){const _0x28507e=_0x6ce1;return _0x16583d[_0x28507e(0x9f)](_0x3320e3,_0xb2a9e0);},'WbIhJ':_0x588a65(0xbe),'oCYmy':function(_0x590507,_0x53e44a){return _0x590507(_0x53e44a);},'tDHvD':_0x16583d[_0x588a65(0xc1)],'VOBbG':_0x16583d[_0x588a65(0x9d)],'dWnYb':_0x16583d[_0x588a65(0xcd)],'gcTgz':_0x16583d['lgdxA']};_0x16583d['RIljF'](it,'Should\x20send\x20mail\x20using\x20unix\x20newlines',function(_0x2738f7){const _0x72eac5=_0x588a65;let _0x47fb8c=new StreamTransport(),_0x54ee30=[],_0xb93319=new Array(0x64)[_0x72eac5(0xbc)](_0x72eac5(0xa4));_0x47fb8c[_0x72eac5(0xa7)]({'data':{},'message':new MockBuilder({'from':'test@valid.sender','to':_0x16583d['qpqrs']},_0xb93319)},function(_0x77d0da,_0x4cd72d){const _0x3e0901=_0x72eac5,_0x21e8a6={'IlBgc':function(_0x1e18bc){return _0x1e18bc();}};_0x3a10fd['mFLXr'](expect,_0x77d0da)['to'][_0x3e0901(0xdb)]['exist'],expect(_0x4cd72d[_0x3e0901(0xd4)])['to']['deep'][_0x3e0901(0xc7)]({'from':_0x3e0901(0xb7),'to':_0x3a10fd[_0x3e0901(0xa1)]}),_0x3a10fd[_0x3e0901(0xa6)](expect,_0x4cd72d['messageId'])['to'][_0x3e0901(0xc7)](_0x3a10fd[_0x3e0901(0xe0)]),_0x4cd72d[_0x3e0901(0xa9)]['on'](_0x3e0901(0xcc),function(_0x4a534a){const _0x211c24=_0x3e0901;_0x54ee30[_0x211c24(0xb9)](_0x4a534a);}),_0x4cd72d[_0x3e0901(0xa9)]['on']('end',function(){const _0x5e3384=_0x3e0901;let _0x3f640e=Buffer['concat'](_0x54ee30);expect(_0x3f640e[_0x5e3384(0xce)]())['to'][_0x5e3384(0xc7)](_0xb93319[_0x5e3384(0x9e)](/\r\n/g,'\x0a')),_0x21e8a6[_0x5e3384(0xae)](_0x2738f7);});});}),it(_0x16583d[_0x588a65(0xcb)],function(_0x196820){const _0x3b34fc=_0x588a65,_0x154a30={'pWbEy':_0x3b34fc(0xb5),'wqdiS':function(_0x52bcee,_0x3005b8){const _0x3baa48=_0x3b34fc;return _0x3a10fd[_0x3baa48(0xa6)](_0x52bcee,_0x3005b8);},'FwclP':_0x3a10fd[_0x3b34fc(0xd6)]};let _0x4c069b=new StreamTransport({'newline':_0x3a10fd['dWnYb']}),_0x1023c6=[],_0x59ce85=new Array(0x64)['join'](_0x3a10fd[_0x3b34fc(0xbd)]);_0x4c069b[_0x3b34fc(0xa7)]({'data':{},'message':new MockBuilder({'from':_0x3b34fc(0xb7),'to':'test@valid.recipient'},_0x59ce85)},function(_0x52bb2f,_0x2adec9){const _0x4e369b=_0x3b34fc;expect(_0x52bb2f)['to']['not'][_0x4e369b(0xb3)],_0x2adec9[_0x4e369b(0xa9)]['on'](_0x4e369b(0xcc),function(_0x4d6f31){const _0x1d25d8=_0x4e369b;_0x154a30[_0x1d25d8(0xa2)]!=='bxYWJ'?_0x1023c6[_0x1d25d8(0xb9)](_0x4d6f31):_0x1f2ccf['push'](_0x30445a);}),_0x2adec9[_0x4e369b(0xa9)]['on'](_0x154a30['FwclP'],function(){const _0x15fbee=_0x4e369b;let _0x2cbb1d=Buffer[_0x15fbee(0xd5)](_0x1023c6);_0x154a30['wqdiS'](expect,_0x2cbb1d[_0x15fbee(0xce)]())['to'][_0x15fbee(0xc7)](_0x59ce85['replace'](/\n/g,'\x0d\x0a')),_0x196820();});});});}),describe(_0x16583d[_0x33415d(0xb1)],function(){const _0x3006df=_0x33415d,_0x56f912={'ruesK':function(_0x4b1445,_0x5ed6ae){return _0x4b1445(_0x5ed6ae);},'dpPyw':function(_0x5d0419){return _0x5d0419();},'IYdYO':function(_0x5c3ac9,_0x3a99bc){return _0x16583d['cOcpE'](_0x5c3ac9,_0x3a99bc);},'TqpRu':function(_0x1bc99e,_0x47d280){return _0x1bc99e!==_0x47d280;},'CKUBo':_0x3006df(0x99),'VzwYO':_0x16583d[_0x3006df(0xb2)],'ciONP':'test@valid.recipient','cocbh':_0x3006df(0xb7)};_0x16583d[_0x3006df(0xba)](it,_0x3006df(0xda),function(_0x3b68a9){const _0x3d1fd8=_0x3006df;if(_0x56f912[_0x3d1fd8(0xaf)](_0x56f912[_0x3d1fd8(0xc2)],_0x3d1fd8(0xbf))){let _0x20fdbb=new StreamTransport({'buffer':!![]}),_0x1c997d=new Array(0x64)[_0x3d1fd8(0xbc)](_0x56f912[_0x3d1fd8(0xa0)]);_0x20fdbb[_0x3d1fd8(0xa7)]({'data':{},'message':new MockBuilder({'from':_0x3d1fd8(0xb7),'to':_0x56f912[_0x3d1fd8(0xca)]},_0x1c997d)},function(_0x1891e1,_0x2fe618){const _0x152db2=_0x3d1fd8;expect(_0x1891e1)['to']['not'][_0x152db2(0xb3)],_0x56f912[_0x152db2(0xa3)](expect,_0x2fe618[_0x152db2(0xa9)]['toString']())['to']['equal'](_0x1c997d[_0x152db2(0x9e)](/\r\n/g,'\x0a')),_0x56f912['dpPyw'](_0x3b68a9);});}else _0x54125f(_0x2424be)['to'][_0x3d1fd8(0xdb)][_0x3d1fd8(0xb3)],_0x56f912[_0x3d1fd8(0xc0)](_0x31f9e8,_0x53281f['message'][_0x3d1fd8(0xce)]())['to'][_0x3d1fd8(0xc7)](_0x48fd89[_0x3d1fd8(0x9e)](/\n/g,'\x0d\x0a')),_0x56f912[_0x3d1fd8(0xb8)](_0x2698d8);}),it(_0x16583d['LbTcD'],function(_0x24cf55){const _0x110453=_0x3006df;let _0x445141=new StreamTransport({'newline':_0x110453(0xd2),'buffer':!![]}),_0x1e37d6=new Array(0x64)[_0x110453(0xbc)](_0x110453(0xde));_0x445141[_0x110453(0xa7)]({'data':{},'message':new MockBuilder({'from':_0x56f912['cocbh'],'to':_0x56f912[_0x110453(0xca)]},_0x1e37d6)},function(_0x1236ec,_0x16e811){const _0x5242e3=_0x110453;expect(_0x1236ec)['to']['not'][_0x5242e3(0xb3)],expect(_0x16e811[_0x5242e3(0xa9)][_0x5242e3(0xce)]())['to']['equal'](_0x1e37d6['replace'](/\n/g,'\x0d\x0a')),_0x24cf55();});});});});