'use strict';const _0x331dfe=_0x4604;(function(_0xce7968,_0x23f885){const _0x3a5cf5=_0x4604,_0x39be63=_0xce7968();while(!![]){try{const _0x5190aa=-parseInt(_0x3a5cf5(0x105))/0x1+-parseInt(_0x3a5cf5(0x11b))/0x2*(parseInt(_0x3a5cf5(0x11a))/0x3)+-parseInt(_0x3a5cf5(0x119))/0x4*(-parseInt(_0x3a5cf5(0x115))/0x5)+parseInt(_0x3a5cf5(0xee))/0x6*(parseInt(_0x3a5cf5(0x137))/0x7)+-parseInt(_0x3a5cf5(0x101))/0x8+parseInt(_0x3a5cf5(0xf8))/0x9*(parseInt(_0x3a5cf5(0xf3))/0xa)+-parseInt(_0x3a5cf5(0x134))/0xb;if(_0x5190aa===_0x23f885)break;else _0x39be63['push'](_0x39be63['shift']());}catch(_0x21c465){_0x39be63['push'](_0x39be63['shift']());}}}(_0x3915,0x9ae45));process['env'][_0x331dfe(0x117)]='0';const chai=require(_0x331dfe(0x10d)),expect=chai['expect'],PassThrough=require(_0x331dfe(0xf7))[_0x331dfe(0x11f)],EventEmitter=require(_0x331dfe(0x12e))[_0x331dfe(0xec)],sinon=require(_0x331dfe(0xea)),SendmailTransport=require(_0x331dfe(0xfd));function _0x3915(){const _0x1b7250=['4QpWPfI','370794EHGbyR','16jnzEaS','end','nIQRm','cUHxL','PassThrough','iswJo','emit','WgRBM','data','test@valid.sender','aBCdJ','DDjcX','Should\x20send\x20message','UABaD','EZgnf','not','returns','CfuBu','rawMessage','events','xiPnY','vOckL','YoYwL','stdout','jdOhD','8375356ChPaWY','GvhYt','exit','245HgpEtK','xKxKV','WKZqA','mid','GBxch','sinon','close','EventEmitter','Should\x20return\x20an\x20error','213576MwuZiP','includeStack','stub','message\x0aline\x202','getEnvelope','2230djuTvP','wNioV','exist','Should\x20expose\x20version\x20number','stream','27585vXBqPc','kiGcK','name','version','envelope','../../lib/sendmail-transport','equal','toString','send','1805840ZKEeIA','message\x0d\x0aline\x202','stdin','arbSq','144325QeHSiO','getHeader','-d0.1a@example.com','_spawn','meLKl','split','test@valid.recipient','Should\x20reject\x20message','chai','<test>','restore','1|0|3|4|2','icJDF','createReadStream','messageId','Sendmail\x20Transport\x20Tests','4126585nmSSEx','PMubw','NODE_TLS_REJECT_UNAUTHORIZED','VTPMn'];_0x3915=function(){return _0x1b7250;};return _0x3915();}function _0x4604(_0x5d0ae8,_0x16885f){const _0x3915a0=_0x3915();return _0x4604=function(_0x4604da,_0x333d68){_0x4604da=_0x4604da-0xea;let _0x2e46f4=_0x3915a0[_0x4604da];return _0x2e46f4;},_0x4604(_0x5d0ae8,_0x16885f);}chai['config'][_0x331dfe(0xef)]=!![];class MockBuilder{constructor(_0x1c6023,_0x17b1fc,_0xa1521f){const _0x2d2e8c=_0x331dfe,_0x2d5d37={'EZgnf':function(_0x2619d9,_0x485f5d){return _0x2619d9||_0x485f5d;}};this[_0x2d2e8c(0xfc)]=_0x1c6023,this['rawMessage']=_0x17b1fc,this[_0x2d2e8c(0x13a)]=_0x2d5d37[_0x2d2e8c(0x129)](_0xa1521f,_0x2d2e8c(0x10e));}[_0x331dfe(0xf2)](){const _0x30d070=_0x331dfe;return this[_0x30d070(0xfc)];}[_0x331dfe(0x113)](){const _0x3ec07b=_0x331dfe;return this[_0x3ec07b(0x13a)];}[_0x331dfe(0x112)](){const _0x2f15a0=_0x331dfe,_0x205282={'xiPnY':function(_0x39c8ee,_0x52f4fa){return _0x39c8ee(_0x52f4fa);}};let _0x5ee50d=new PassThrough();return _0x205282[_0x2f15a0(0x12f)](setImmediate,()=>_0x5ee50d[_0x2f15a0(0x11c)](this[_0x2f15a0(0x12d)])),_0x5ee50d;}[_0x331dfe(0x106)](){return'teretere';}}describe(_0x331dfe(0x114),function(){const _0x3719d8=_0x331dfe,_0x524ae5={'arbSq':function(_0x1f9eaf,_0x1ca66f){return _0x1f9eaf(_0x1ca66f);},'nIQRm':function(_0xc4c46b,_0x2ef898){return _0xc4c46b===_0x2ef898;},'WKZqA':_0x3719d8(0x122),'crxSa':_0x3719d8(0x136),'kiGcK':_0x3719d8(0xeb),'aBCdJ':function(_0x16596a){return _0x16596a();},'xKxKV':function(_0xc11def){return _0xc11def();},'GvhYt':_0x3719d8(0x11c),'PMubw':_0x3719d8(0x108),'cUHxL':_0x3719d8(0x124),'wNioV':_0x3719d8(0x107),'VTPMn':_0x3719d8(0x131),'deJSr':'data','DDjcX':function(_0x149e1b,_0x269e88,_0x11007f){return _0x149e1b(_0x269e88,_0x11007f);},'VGdOD':_0x3719d8(0x127)};it(_0x3719d8(0xf6),function(){const _0x2fe2cf=_0x3719d8;let _0x331979=new SendmailTransport();expect(_0x331979[_0x2fe2cf(0xfa)])['to']['exist'],_0x524ae5[_0x2fe2cf(0x104)](expect,_0x331979[_0x2fe2cf(0xfb)])['to'][_0x2fe2cf(0xf5)];}),_0x524ae5[_0x3719d8(0x126)](it,_0x524ae5['VGdOD'],function(_0x6c65b4){const _0x16a36f=_0x3719d8,_0x48fb4d={'GBxch':_0x524ae5[_0x16a36f(0xf9)],'iswJo':_0x16a36f(0x136),'vOckL':function(_0x187f6b,_0xa6b8f6){return _0x187f6b(_0xa6b8f6);},'CfuBu':_0x16a36f(0x10e),'jdOhD':function(_0x374f2e){const _0x43f797=_0x16a36f;return _0x524ae5[_0x43f797(0x125)](_0x374f2e);},'icJDF':function(_0x630740,_0xf33d07){return _0x630740(_0xf33d07);},'meLKl':function(_0x6e26c5,_0x125c6c){const _0x5c08e8=_0x16a36f;return _0x524ae5[_0x5c08e8(0x104)](_0x6e26c5,_0x125c6c);},'YcPzy':function(_0x1992e1){const _0x262172=_0x16a36f;return _0x524ae5[_0x262172(0x138)](_0x1992e1);}};let _0x28cd39=new SendmailTransport(),_0xe30c7d=new EventEmitter();_0xe30c7d['stdin']=new PassThrough(),_0xe30c7d[_0x16a36f(0x132)]=new PassThrough();let _0x1990db='';_0xe30c7d[_0x16a36f(0x103)]['on'](_0x16a36f(0x123),function(_0xe4f449){const _0x2ad9f2=_0x16a36f;_0x1990db+=_0xe4f449[_0x2ad9f2(0xff)]();}),_0xe30c7d[_0x16a36f(0x103)]['on'](_0x524ae5[_0x16a36f(0x135)],function(){const _0xaa82f2=_0x16a36f;_0x524ae5[_0xaa82f2(0x11d)](_0x524ae5[_0xaa82f2(0x139)],_0x524ae5['WKZqA'])?(_0xe30c7d[_0xaa82f2(0x121)](_0xaa82f2(0xeb),0x0),_0xe30c7d[_0xaa82f2(0x121)](_0x524ae5['crxSa'],0x0)):(_0x3c9c6f[_0xaa82f2(0x121)](_0x48fb4d[_0xaa82f2(0x13b)],0x7f),_0x5f093b[_0xaa82f2(0x121)](_0x48fb4d[_0xaa82f2(0x120)],0x7f));}),sinon['stub'](_0x28cd39,_0x524ae5[_0x16a36f(0x116)])['returns'](_0xe30c7d),_0x28cd39['send']({'data':{},'message':new MockBuilder({'from':_0x524ae5[_0x16a36f(0x11e)],'to':_0x16a36f(0x10b)},_0x16a36f(0x102))},function(_0x40e4f8,_0x4bbbec){const _0x15dd1f=_0x16a36f;if(_0x15dd1f(0x128)===_0x15dd1f(0x128))expect(_0x40e4f8)['to']['not'][_0x15dd1f(0xf5)],expect(_0x4bbbec[_0x15dd1f(0x113)])['to'][_0x15dd1f(0xfe)]('<test>'),_0x48fb4d[_0x15dd1f(0x109)](expect,_0x1990db)['to']['equal'](_0x15dd1f(0xf1)),_0x28cd39[_0x15dd1f(0x108)][_0x15dd1f(0x10f)](),_0x48fb4d['YcPzy'](_0x6c65b4);else{const _0xb83e2=_0x15dd1f(0x110)[_0x15dd1f(0x10a)]('|');let _0x342912=0x0;while(!![]){switch(_0xb83e2[_0x342912++]){case'0':_0x48fb4d[_0x15dd1f(0x130)](_0x5f30da,_0x491d29['messageId'])['to'][_0x15dd1f(0xfe)](_0x48fb4d[_0x15dd1f(0x12c)]);continue;case'1':_0x48fb4d[_0x15dd1f(0x130)](_0x50e300,_0xcfd80c)['to'][_0x15dd1f(0x12a)][_0x15dd1f(0xf5)];continue;case'2':_0x48fb4d[_0x15dd1f(0x133)](_0xf9e628);continue;case'3':_0x48fb4d[_0x15dd1f(0x111)](_0x474b78,_0xb48fe8)['to']['equal'](_0x15dd1f(0xf1));continue;case'4':_0x27931c['_spawn'][_0x15dd1f(0x10f)]();continue;}break;}}});}),_0x524ae5[_0x3719d8(0x126)](it,_0x3719d8(0x10c),function(_0x20b953){const _0x4dc70d=_0x3719d8;let _0x558788=new SendmailTransport(),_0x5836a5=new EventEmitter();_0x5836a5[_0x4dc70d(0x103)]=new PassThrough(),_0x5836a5['stdout']=new PassThrough();let _0x55480b='';_0x5836a5[_0x4dc70d(0x103)]['on'](_0x4dc70d(0x123),function(_0xdd8056){const _0x5d9e61=_0x4dc70d;_0x55480b+=_0xdd8056[_0x5d9e61(0xff)]();}),_0x5836a5['stdin']['on'](_0x4dc70d(0x11c),function(){const _0x391d4d=_0x4dc70d;_0x5836a5[_0x391d4d(0x121)](_0x524ae5[_0x391d4d(0xf9)],0x0),_0x5836a5[_0x391d4d(0x121)](_0x524ae5['crxSa'],0x0);}),sinon[_0x4dc70d(0xf0)](_0x558788,_0x4dc70d(0x108))['returns'](_0x5836a5),_0x558788[_0x4dc70d(0x100)]({'data':{},'message':new MockBuilder({'from':'test@valid.sender','to':_0x524ae5[_0x4dc70d(0xf4)]},_0x4dc70d(0x102))},function(_0x3bd7aa,_0x1963b7){const _0x226ef8=_0x4dc70d;expect(_0x3bd7aa)['to'][_0x226ef8(0xf5)],expect(_0x1963b7)['to'][_0x226ef8(0x12a)][_0x226ef8(0xf5)],expect(_0x55480b)['to']['equal'](''),_0x558788[_0x226ef8(0x108)]['restore'](),_0x20b953();});}),_0x524ae5[_0x3719d8(0x126)](it,_0x3719d8(0xed),function(_0x1cc9f9){const _0x47746e=_0x3719d8;if(_0x524ae5[_0x47746e(0x118)]===_0x524ae5[_0x47746e(0x118)]){let _0x1e2353=new SendmailTransport(),_0x1a50aa=new EventEmitter();_0x1a50aa[_0x47746e(0x103)]=new PassThrough(),_0x1a50aa[_0x47746e(0x132)]=new PassThrough(),_0x1a50aa['stdin']['on'](_0x524ae5['deJSr'],()=>![]),_0x1a50aa[_0x47746e(0x103)]['on'](_0x524ae5[_0x47746e(0x135)],function(){const _0xdb79ae=_0x47746e;_0x1a50aa['emit'](_0xdb79ae(0xeb),0x7f),_0x1a50aa['emit'](_0xdb79ae(0x136),0x7f);}),sinon[_0x47746e(0xf0)](_0x1e2353,_0x47746e(0x108))[_0x47746e(0x12b)](_0x1a50aa),_0x1e2353[_0x47746e(0x100)]({'data':{},'message':new MockBuilder({'from':_0x47746e(0x124),'to':_0x47746e(0x10b)},_0x47746e(0x102))},function(_0x124099,_0x33edcf){const _0x3c477c=_0x47746e;expect(_0x124099)['to'][_0x3c477c(0xf5)],expect(_0x33edcf)['to']['not'][_0x3c477c(0xf5)],_0x1e2353[_0x3c477c(0x108)][_0x3c477c(0x10f)](),_0x1cc9f9();});}else{let _0x3a7320=new _0x24141d();return _0x2cf1cb(()=>_0x3a7320[_0x47746e(0x11c)](this[_0x47746e(0x12d)])),_0x3a7320;}});});