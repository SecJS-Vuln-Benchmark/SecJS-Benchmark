function _0x3e84(){const _0x3d33af=['64FCplly','jjWmV','JquZM','npm\x20ci\x20should\x20never\x20save','should\x20ignore\x20scripts\x20with\x20--ignore-scripts','some\x20contents','strictSame','gets\x20arborist\x20tree','mock','rVvzS','match','ended\x20timer\x20that\x20was\x20not\x20started:\x20','teardown','node_modules','hLhrS','throws\x20error\x20when\x20there\x20is\x20no\x20package-lock','eCgOk','some\x20info','promisify','tvtAK','QTekH','vElFL','equal','2UJwevY','save','iwaLh','fOLJv','shift','time','properly\x20resolved\x20','14JGusMG','BQVGi','197508gnpMOn','resolve','rejects','LMNiK','8vttnju','should\x20only\x20have\x20the\x20node_modules\x20directory','pop','should\x20use\x20Arborist\x20and\x20run-script','reify','should\x20throw\x20if\x20package-lock.json\x20or\x20npm-shrinkwrap\x20missing','../../../lib/commands/ci.js','throws\x20error\x20with\x20global\x20packages','saw\x20the\x20rimraf\x20timer','QpUmv','../../fixtures/mock-npm','filter','\x20timer','should\x20pass\x20flatOptions\x20to\x20Arborist.reify','push','install','gets\x20options\x20object','saw\x20duplicate\x20timer:\x20','preprepare','startsWith','notOk','3909627DBUKNb','readdir','stringify','bVKOx','called\x20reify','3494106XnieBD','ejZqk','testdir','foo','GTNzq','sBAjX','FJysQ','production','4406718EEwQZj','peCGX','should\x20throw\x20ECIGLOBAL','2024AHaAyw','1135819vaeKuM','KpWjt','rimraf\x20called\x20with\x20path','3888030aQEIYG','PdLXd','bZnxe','KjHFW','called\x20all\x20scripts','test','same','postprepare','exec','1.2.3','ECIGLOBAL','removeListener','244975BwiNUS','loadVirtual','talZy','ETBZR','prepare','prepublish','timeEnd','DzWxc','util','log\x20fn\x20called'];_0x3e84=function(){return _0x3d33af;};return _0x3e84();}const _0x570f08=_0x346d;(function(_0x50c80e,_0x3fbf63){const _0x343825=_0x346d,_0x526e9=_0x50c80e();while(!![]){try{const _0x446c87=parseInt(_0x343825(0x193))/0x1*(parseInt(_0x343825(0x160))/0x2)+parseInt(_0x343825(0x18f))/0x3+parseInt(_0x343825(0x149))/0x4*(-parseInt(_0x343825(0x1a2))/0x5)+parseInt(_0x343825(0x187))/0x6*(parseInt(_0x343825(0x167))/0x7)+parseInt(_0x343825(0x16d))/0x8*(parseInt(_0x343825(0x182))/0x9)+parseInt(_0x343825(0x196))/0xa+parseInt(_0x343825(0x192))/0xb*(-parseInt(_0x343825(0x169))/0xc);if(_0x446c87===_0x3fbf63)break;else _0x526e9['push'](_0x526e9['shift']());}catch(_0x9c6e38){_0x526e9['push'](_0x526e9['shift']());}}}(_0x3e84,0xbe7e1));const fs=require('fs'),util=require(_0x570f08(0x147)),readdir=util[_0x570f08(0x15b)](fs[_0x570f08(0x183)]),t=require('tap'),{fake:mockNpm}=require(_0x570f08(0x177));function _0x346d(_0x57f516,_0x521871){const _0x3e84db=_0x3e84();return _0x346d=function(_0x346db2,_0xf830f){_0x346db2=_0x346db2-0x141;let _0x5e1769=_0x3e84db[_0x346db2];return _0x5e1769;},_0x346d(_0x57f516,_0x521871);}t[_0x570f08(0x19b)](_0x570f08(0x14d),async _0xb4867c=>{const _0x3f8b7c=_0x570f08,_0x25a64b={'UKtUp':function(_0x5bff3a,_0x16486b){return _0x5bff3a(_0x16486b);},'hLhrS':_0x3f8b7c(0x186),'PdLXd':'no\x20scripts\x20when\x20running\x20ci'},_0x2ba3b0=[];let _0x169462=![];const _0x2bac58=_0xb4867c[_0x3f8b7c(0x151)](_0x3f8b7c(0x173),{'../../../lib/utils/reify-finish.js':async()=>{},'@npmcli/run-script':({event:_0x435e26})=>{const _0x40b3d8=_0x3f8b7c;_0x2ba3b0[_0x40b3d8(0x17b)](_0x435e26);},'@npmcli/arborist':function(){const _0x520a17=_0x3f8b7c;this['loadVirtual']=async()=>{},this[_0x520a17(0x171)]=()=>{_0x169462=!![];};}}),_0x233b84=_0x25a64b['UKtUp'](mockNpm,{'globalDir':'path/to/node_modules/','prefix':'foo','config':{'global':![],'ignore-scripts':!![]}}),_0x5c8e80=new _0x2bac58(_0x233b84);await _0x5c8e80['exec']([]),_0xb4867c[_0x3f8b7c(0x15f)](_0x169462,!![],_0x25a64b[_0x3f8b7c(0x157)]),_0xb4867c[_0x3f8b7c(0x14f)](_0x2ba3b0,[],_0x25a64b[_0x3f8b7c(0x197)]);}),t[_0x570f08(0x19b)](_0x570f08(0x170),async _0x4eb053=>{const _0x2d60b1=_0x570f08,_0xad8fca={'FJysQ':'reify\x20is\x20called','GTNzq':'sBeWA','Mkalc':_0x2d60b1(0x165),'peCGX':_0x2d60b1(0x17d),'KjHFW':'postinstall','rVvzS':_0x2d60b1(0x17f),'ejZqk':_0x2d60b1(0x19d),'tvtAK':_0x2d60b1(0x145),'talZy':_0x2d60b1(0x173),'BQVGi':_0x2d60b1(0x175)},_0x3b1f5e=['preinstall',_0x2d60b1(0x17c),_0xad8fca[_0x2d60b1(0x199)],_0x2d60b1(0x144),_0xad8fca[_0x2d60b1(0x152)],_0x2d60b1(0x143),_0xad8fca[_0x2d60b1(0x188)]],_0x1797ef={},_0x2387fb=_0x19afe2=>{const _0x1ccbbb=_0x2d60b1;if(_0x1797ef[_0x19afe2]){if('sBeWA'!==_0xad8fca[_0x1ccbbb(0x18b)])_0x31fafb['ok'](!![],_0xad8fca[_0x1ccbbb(0x18d)]);else throw new Error(_0x1ccbbb(0x17e)+_0x19afe2);}_0x1797ef[_0x19afe2]=!![];},_0x407d76=_0x42d834=>{const _0x2c3ac6=_0x2d60b1;if(!_0x1797ef[_0x42d834])throw new Error(_0x2c3ac6(0x154)+_0x42d834);_0x1797ef[_0x42d834]=![];};process['on'](_0x2d60b1(0x165),_0x2387fb),process['on'](_0xad8fca[_0x2d60b1(0x15c)],_0x407d76),_0x4eb053[_0x2d60b1(0x155)](()=>{const _0x53f1b1=_0x2d60b1;process[_0x53f1b1(0x1a1)](_0xad8fca['Mkalc'],_0x2387fb),process[_0x53f1b1(0x1a1)](_0x53f1b1(0x145),_0x407d76);});const _0x227846=_0x4eb053[_0x2d60b1(0x189)]({'node_modules':{'foo':{'package.json':JSON[_0x2d60b1(0x184)]({'name':_0x2d60b1(0x18a),'version':_0x2d60b1(0x19f)})},'.dotdir':{},'.dotfile':'a\x20file\x20with\x20a\x20dot'}}),_0x267fd7=0x3;let _0x4f8039=0x0;const _0x29882c=_0x4eb053[_0x2d60b1(0x151)](_0xad8fca[_0x2d60b1(0x141)],{'../../../lib/utils/reify-finish.js':async()=>{},'@npmcli/run-script':_0x3dfc71=>{const _0x268f55=_0x2d60b1;_0x4eb053[_0x268f55(0x153)](_0x3dfc71,{'event':_0x3b1f5e[_0x268f55(0x164)]()});},'@npmcli/arborist':function(_0x49274e){const _0x2875ab=_0x2d60b1,_0xb4157a={'bVKOx':'loadVirtual\x20is\x20called'};_0x4eb053['ok'](_0x49274e,_0xad8fca[_0x2875ab(0x190)]),this[_0x2875ab(0x1a3)]=()=>{const _0x4713b7=_0x2875ab;return _0x4eb053['ok'](!![],_0xb4157a[_0x4713b7(0x185)]),Promise[_0x4713b7(0x16a)](!![]);},this['reify']=()=>{_0x4eb053['ok'](!![],'reify\x20is\x20called');};},'rimraf':(_0x45bc12,..._0x5e2d4d)=>{const _0x1f055=_0x2d60b1;_0x4f8039++,_0x4eb053['ok'](_0x45bc12,_0x1f055(0x195)),_0x5e2d4d[_0x1f055(0x16f)]()();},'../../../lib/utils/reify-output.js':function(_0x82b37){const _0x45b611=_0x2d60b1;_0x4eb053['ok'](_0x82b37,_0x45b611(0x150));}}),_0xa624ff=mockNpm({'prefix':_0x227846,'config':{'global':![]}}),_0x9ee686=new _0x29882c(_0xa624ff);await _0x9ee686[_0x2d60b1(0x19e)](null);for(const [_0x2ce3ea,_0x59db18]of Object['entries'](_0x1797ef)){_0x4eb053[_0x2d60b1(0x181)](_0x59db18,_0x2d60b1(0x166)+_0x2ce3ea+_0x2d60b1(0x179));}_0x4eb053[_0x2d60b1(0x153)](_0x1797ef,{'npm-ci:rm':![]},_0xad8fca[_0x2d60b1(0x168)]),_0x4eb053[_0x2d60b1(0x15f)](_0x4f8039,_0x267fd7,'removed\x20the\x20right\x20number\x20of\x20things'),_0x4eb053[_0x2d60b1(0x14f)](_0x3b1f5e,[],_0x2d60b1(0x19a));}),t[_0x570f08(0x19b)](_0x570f08(0x17a),async _0x32754d=>{const _0x14cec7=_0x570f08,_0x36998c={'kIrEf':function(_0x52386b,_0xb90769){return _0x52386b!==_0xb90769;},'jjWmV':_0x14cec7(0x162),'ETBZR':'should\x20pass\x20flatOptions\x20to\x20Arborist.reify','LMNiK':_0x14cec7(0x163),'yZFus':function(_0x1e39d1,_0x591c8f){return _0x1e39d1(_0x591c8f);}};_0x32754d['plan'](0x1);const _0x2ec9f3=_0x32754d[_0x14cec7(0x151)]('../../../lib/commands/ci.js',{'../../../lib/utils/reify-finish.js':async()=>{},'@npmcli/run-script':_0x5722b5=>{},'@npmcli/arborist':function(){const _0x3d4599=_0x14cec7;if(_0x3d4599(0x15e)!==_0x36998c[_0x3d4599(0x16c)])this[_0x3d4599(0x1a3)]=()=>Promise[_0x3d4599(0x16a)](!![]),this[_0x3d4599(0x171)]=async _0x24b1af=>{const _0x482895=_0x3d4599;_0x36998c['kIrEf'](_0x482895(0x159),_0x36998c[_0x482895(0x14a)])?_0x32754d['equal'](_0x24b1af[_0x482895(0x18e)],!![],_0x36998c[_0x482895(0x142)]):(this[_0x482895(0x1a3)]=()=>_0x10676f[_0x482895(0x16a)](!![]),this[_0x482895(0x171)]=async _0x3e66b0=>{const _0x44bfda=_0x482895;_0x3f0795[_0x44bfda(0x15f)](_0x3e66b0[_0x44bfda(0x18e)],!![],'should\x20pass\x20flatOptions\x20to\x20Arborist.reify');});};else throw new _0x42fd9a('saw\x20duplicate\x20timer:\x20'+_0x25f56b);}}),_0x26668c=_0x36998c['yZFus'](mockNpm,{'prefix':_0x14cec7(0x18a),'flatOptions':{'production':!![]}}),_0x3ee3f0=new _0x2ec9f3(_0x26668c);await _0x3ee3f0[_0x14cec7(0x19e)](null);}),t['test'](_0x570f08(0x172),async _0x1a3094=>{const _0x2c32e7=_0x570f08,_0x4c1000={'JquZM':_0x2c32e7(0x148),'QTekH':_0x2c32e7(0x14e),'GLdfT':_0x2c32e7(0x15a),'sBAjX':'../../../lib/commands/ci.js'},_0x5a7bc6=_0x1a3094['testdir']({'index.js':_0x4c1000[_0x2c32e7(0x15d)],'package.json':_0x4c1000['GLdfT']}),_0x128c56=_0x1a3094[_0x2c32e7(0x151)](_0x4c1000[_0x2c32e7(0x18c)],{'@npmcli/run-script':_0x5627b1=>{},'../../../lib/utils/reify-finish.js':async()=>{},'proc-log':{'verbose':()=>{const _0xb94f52=_0x2c32e7;_0x1a3094['ok'](!![],_0x4c1000[_0xb94f52(0x14b)]);}}}),_0x3e29fb=mockNpm({'prefix':_0x5a7bc6,'config':{'global':![]}}),_0x576c8d=new _0x128c56(_0x3e29fb);await _0x1a3094[_0x2c32e7(0x16b)](_0x576c8d[_0x2c32e7(0x19e)](null),/package-lock.json/,_0x2c32e7(0x158));}),t[_0x570f08(0x19b)](_0x570f08(0x191),async _0x5d858e=>{const _0x4aa84d=_0x570f08,_0x19559d={'bZnxe':_0x4aa84d(0x18a),'NBbcF':_0x4aa84d(0x174)},_0x19b0ca=_0x5d858e[_0x4aa84d(0x151)](_0x4aa84d(0x173),{'@npmcli/run-script':_0x4f3d07=>{},'../../../lib/utils/reify-finish.js':async()=>{}}),_0x2d5f86=mockNpm({'prefix':_0x19559d[_0x4aa84d(0x198)],'config':{'global':!![]}}),_0x3ae86a=new _0x19b0ca(_0x2d5f86);await _0x5d858e['rejects'](_0x3ae86a[_0x4aa84d(0x19e)](null),{'code':_0x4aa84d(0x1a0)},_0x19559d['NBbcF']);}),t[_0x570f08(0x19b)]('should\x20remove\x20existing\x20node_modules\x20before\x20installing',async _0x1b8425=>{const _0x334307=_0x570f08,_0x5ebd8f={'KpWjt':function(_0x2884ff,_0x184404){return _0x2884ff(_0x184404);},'QpUmv':'node_modules','DzWxc':_0x334307(0x16e),'cztsS':'some\x20contents'};_0x1b8425['plan'](0x2);const _0x1939b2=_0x1b8425[_0x334307(0x189)]({'node_modules':{'some-file':_0x5ebd8f['cztsS']}}),_0x4a246e=_0x1b8425[_0x334307(0x151)](_0x334307(0x173),{'@npmcli/run-script':_0x2ad5f5=>{},'../../../lib/utils/reify-finish.js':async()=>{},'@npmcli/arborist':function(){const _0xc55e75=_0x334307;this[_0xc55e75(0x1a3)]=()=>Promise[_0xc55e75(0x16a)](!![]),this['reify']=async _0x32bb3e=>{const _0x234a7c=_0xc55e75;_0x1b8425[_0x234a7c(0x15f)](_0x32bb3e[_0x234a7c(0x161)],![],_0x234a7c(0x14c));const _0x3cb320=await _0x5ebd8f[_0x234a7c(0x194)](readdir,_0x1939b2),_0x328a6c=_0x3cb320[_0x234a7c(0x178)](_0x130560=>_0x130560[_0x234a7c(0x180)](_0x234a7c(0x156)));_0x1b8425[_0x234a7c(0x19c)](_0x328a6c,[_0x5ebd8f[_0x234a7c(0x176)]],_0x5ebd8f[_0x234a7c(0x146)]);};}}),_0xf01822=_0x5ebd8f[_0x334307(0x194)](mockNpm,{'prefix':_0x1939b2,'config':{'global':![]}}),_0x5e0e16=new _0x4a246e(_0xf01822);await _0x5e0e16[_0x334307(0x19e)](null);});