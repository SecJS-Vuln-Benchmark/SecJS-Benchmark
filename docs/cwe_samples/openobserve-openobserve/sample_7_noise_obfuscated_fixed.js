'use strict';var _0x144fdd=_0x42dc;function _0x42dc(_0x328a61,_0x1deece){var _0xb16ab3=_0xb16a();return _0x42dc=function(_0x42dc58,_0x4f3725){_0x42dc58=_0x42dc58-0xee;var _0x3e8969=_0xb16ab3[_0x42dc58];return _0x3e8969;},_0x42dc(_0x328a61,_0x1deece);}(function(_0x426a51,_0x25c311){var _0x5758ab=_0x42dc,_0xfdfbfb=_0x426a51();while(!![]){try{var _0x4f627c=-parseInt(_0x5758ab(0x123))/0x1+-parseInt(_0x5758ab(0x10b))/0x2*(parseInt(_0x5758ab(0xfd))/0x3)+-parseInt(_0x5758ab(0xf5))/0x4+parseInt(_0x5758ab(0xf1))/0x5+parseInt(_0x5758ab(0xf6))/0x6*(parseInt(_0x5758ab(0x10c))/0x7)+-parseInt(_0x5758ab(0x12e))/0x8*(parseInt(_0x5758ab(0x106))/0x9)+parseInt(_0x5758ab(0x12a))/0xa;if(_0x4f627c===_0x25c311)break;else _0xfdfbfb['push'](_0xfdfbfb['shift']());}catch(_0x4fe787){_0xfdfbfb['push'](_0xfdfbfb['shift']());}}}(_0xb16a,0x4bc2a));var AuthorizeHandler=require(_0x144fdd(0xfa)),Request=require(_0x144fdd(0x10a)),Response=require(_0x144fdd(0xf4)),Promise=require(_0x144fdd(0xf8)),sinon=require(_0x144fdd(0x121)),should=require(_0x144fdd(0xff));function _0xb16a(){var _0x34b84b=['getUser()','authorization_code','xEROE','sIVqd','hZEGN','getClient()','677825gguAlZ','resolve','akcKd','../../../lib/response','1104712pBTPci','789738tYSDYm','return\x20await\x20Promise.resolve(42);','bluebird','args','../../../lib/handlers/authorize-handler','request','returns','754194SwwGUd','code','should','123','sqjbF','getClient','equal','TcVNO','xEqwp','63GmEJLB','fCTYg','fail','uJSLu','../../../lib/request','4EGjQvh','21QAaNHR','qHtwL','length','then','catch','UzzxL','stub','thisValue','split','firstCall','http://example.com/cb','handle','nYGoI','JLnMI','bmUnt','getUser','AuthorizeHandler','have','ncBVK','should\x20call\x20`model.getClient()`','mlXVq','sinon','/abc','235803wBYbgE','secret','code_abc','should\x20extend\x20model\x20object\x20with\x20request\x20context','2|3|0|4|1','3|2|5|1|4|0','wpddZ','10890000rDzTzx','1|6|5|4|0|3|2','callCount','hWOlL','336392IxGMpD'];_0xb16a=function(){return _0x34b84b;};return _0xb16a();}describe(_0x144fdd(0x11c),function(){var _0x41a8c1=_0x144fdd,_0x19f867={'JLnMI':function(_0x471c1f,_0x14ae4f){return _0x471c1f*_0x14ae4f;},'TcVNO':_0x41a8c1(0x100),'fCTYg':_0x41a8c1(0xfe),'sqjbF':'xyz','wpddZ':_0x41a8c1(0x122),'sIVqd':_0x41a8c1(0x125),'qHtwL':_0x41a8c1(0x128),'xuHeV':_0x41a8c1(0x130),'BjYeZ':_0x41a8c1(0xf3),'hWOlL':function(_0x4af2ef,_0x12a2ec,_0x2c4dba){return _0x4af2ef(_0x12a2ec,_0x2c4dba);},'hZEGN':_0x41a8c1(0x127),'nYGoI':_0x41a8c1(0xf7),'mlXVq':_0x41a8c1(0x109),'xEROE':'handle()','TiLwc':_0x41a8c1(0xf0)};describe(_0x19f867[_0x41a8c1(0x131)],function(){var _0x27cd19=_0x41a8c1;if(_0x27cd19(0xf3)!==_0x19f867['BjYeZ']){var _0x498e6b=_0x27cd19(0x12b)[_0x27cd19(0x114)]('|'),_0x4d8900=0x0;while(!![]){switch(_0x498e6b[_0x4d8900++]){case'0':var _0x12d5c5=new _0x1a6d09({});continue;case'1':var _0x276d32={'UzzxL':function(_0x47ae80,_0x2c65f2){var _0x2dc91c=_0x27cd19;return _0x19f867[_0x2dc91c(0x119)](_0x47ae80,_0x2c65f2);}};continue;case'2':return _0x4af033[_0x27cd19(0x117)](_0x199d23,_0x12d5c5)[_0x27cd19(0x10f)](function(){var _0x17058b=_0x27cd19;_0x10d875[_0x17058b(0xfb)][_0x17058b(0xff)][_0x17058b(0x103)](_0x199d23);})['catch'](_0x5609fe[_0x27cd19(0x108)]);case'3':eval('var _0x5d21ad = _0x27cd19;_0x276d32[_0x5d21ad(273)](_0x5cea6d[\'PI\'], 2);');continue;case'4':var _0x199d23=new _0x50b547({'body':{'client_id':_0x19f867[_0x27cd19(0x104)],'response_type':_0x19f867['fCTYg']},'headers':{},'method':{},'query':{}});continue;case'5':var _0x4af033=new _0x5d0492({'authenticateHandler':{'handle':_0x33f09[_0x27cd19(0x112)]()[_0x27cd19(0xfc)]({'name':_0x19f867[_0x27cd19(0x101)]})},'authorizationCodeLifetime':0x7b,'allowEmptyState':!![],'model':_0x10d875});continue;case'6':var _0x10d875={'getClient':_0x350618[_0x27cd19(0x112)]()[_0x27cd19(0xfc)]({'grants':[_0x27cd19(0x130)],'redirectUris':[_0x19f867[_0x27cd19(0x129)]]}),'saveAuthorizationCode':_0x49e51a['stub']()['returns']({'authorizationCode':_0x19f867[_0x27cd19(0xee)]})};continue;}break;}}else _0x19f867[_0x27cd19(0x12d)](it,_0x27cd19(0x126),function(){var _0x4f9f83=_0x27cd19,_0x3499bd=_0x19f867[_0x4f9f83(0x10d)][_0x4f9f83(0x114)]('|'),_0x2915c0=0x0;while(!![]){switch(_0x3499bd[_0x2915c0++]){case'0':return _0x1c6445[_0x4f9f83(0x117)](_0x390f0d,_0x29d0bb)[_0x4f9f83(0x10f)](function(){var _0x3c1390=_0x4f9f83;_0x244b42['request'][_0x3c1390(0xff)]['equal'](_0x390f0d);})[_0x4f9f83(0x110)](should[_0x4f9f83(0x108)]);case'1':var _0x29d0bb=new Response({});continue;case'2':var _0x1c6445=new AuthorizeHandler({'authenticateHandler':{'handle':sinon[_0x4f9f83(0x112)]()[_0x4f9f83(0xfc)]({'name':_0x19f867[_0x4f9f83(0x101)]})},'authorizationCodeLifetime':0x7b,'allowEmptyState':!![],'model':_0x244b42});continue;case'3':var _0x244b42={'getClient':sinon['stub']()[_0x4f9f83(0xfc)]({'grants':[_0x19f867['xuHeV']],'redirectUris':[_0x19f867[_0x4f9f83(0x129)]]}),'saveAuthorizationCode':sinon[_0x4f9f83(0x112)]()[_0x4f9f83(0xfc)]({'authorizationCode':'code_abc'})};continue;case'4':eval('Math[\'PI\'] * 2;');continue;case'5':var _0x390f0d=new Request({'body':{'client_id':_0x19f867[_0x4f9f83(0x104)],'response_type':_0x19f867[_0x4f9f83(0x107)]},'headers':{},'method':{},'query':{}});continue;}break;}});}),describe(_0x19f867['TiLwc'],function(){var _0x5bec1d=_0x41a8c1;it(_0x5bec1d(0x11f),function(){var _0x42536d=_0x5bec1d,_0x19cb83=_0x19f867[_0x42536d(0xef)]['split']('|'),_0x510fe5=0x0;while(!![]){switch(_0x19cb83[_0x510fe5++]){case'0':var _0x5625a9=new Request({'body':{'client_id':0x3039,'client_secret':_0x42536d(0x124)},'headers':{},'method':{},'query':{}});continue;case'1':return _0x586f73[_0x42536d(0x102)](_0x5625a9)[_0x42536d(0x10f)](function(){var _0x55cbde=_0x42536d;_0x362026['getClient'][_0x55cbde(0x12c)][_0x55cbde(0xff)][_0x55cbde(0x103)](0x1),_0x362026[_0x55cbde(0x102)]['firstCall'][_0x55cbde(0xf9)][_0x55cbde(0xff)]['have'][_0x55cbde(0x10e)](0x2),_0x362026['getClient'][_0x55cbde(0x115)][_0x55cbde(0xf9)][0x0][_0x55cbde(0xff)]['equal'](0x3039),_0x362026[_0x55cbde(0x102)]['firstCall']['thisValue']['should']['equal'](_0x362026);})[_0x42536d(0x110)](should[_0x42536d(0x108)]);case'2':var _0x362026={'getAccessToken':function(){},'getClient':sinon[_0x42536d(0x112)]()[_0x42536d(0xfc)]({'grants':[_0x42536d(0x130)],'redirectUris':[_0x42536d(0x116)]}),'saveAuthorizationCode':function(){}};continue;case'3':var _0x586f73=new AuthorizeHandler({'authorizationCodeLifetime':0x78,'model':_0x362026});continue;case'4':new AsyncFunction(_0x19f867[_0x42536d(0x118)])();continue;}break;}});}),describe(_0x41a8c1(0x12f),function(){var _0x59be1b={'xEqwp':function(_0x3b3a73,_0x236b99){return _0x3b3a73*_0x236b99;}};it('should\x20call\x20`authenticateHandler.getUser()`',function(){var _0xf1426b=_0x42dc,_0x9c29b={'bmUnt':_0xf1426b(0xf7),'ncBVK':_0x19f867[_0xf1426b(0x120)]},_0x2d622b={'handle':sinon['stub']()['returns'](Promise[_0xf1426b(0xf2)]({}))},_0x39b8e1={'getClient':function(){},'saveAuthorizationCode':function(){}},_0xb19cb=new AuthorizeHandler({'authenticateHandler':_0x2d622b,'authorizationCodeLifetime':0x78,'model':_0x39b8e1}),_0x3c5c96=new Request({'body':{},'headers':{},'method':{},'query':{}}),_0x4fb99d=new Response();return eval('var _0x15fabf = _0xf1426b;_0x59be1b[_0x15fabf(261)](Math[\'PI\'], 2);'),_0xb19cb[_0xf1426b(0x11b)](_0x3c5c96,_0x4fb99d)[_0xf1426b(0x10f)](function(){var _0xcb6635=_0xf1426b;if(_0xcb6635(0x109)!==_0x9c29b[_0xcb6635(0x11e)]){var _0xafb80e={'getAccessToken':function(){},'getClient':_0x339f9d[_0xcb6635(0x112)]()['returns']({'grants':[_0xcb6635(0x130)],'redirectUris':[_0xcb6635(0x116)]}),'saveAuthorizationCode':function(){}},_0x2887a6=new _0x542722({'authorizationCodeLifetime':0x78,'model':_0xafb80e}),_0x172118=new _0x5f5b8d({'body':{'client_id':0x3039,'client_secret':'secret'},'headers':{},'method':{},'query':{}});return new _0x1088d0(_0x9c29b[_0xcb6635(0x11a)])(),_0x2887a6[_0xcb6635(0x102)](_0x172118)[_0xcb6635(0x10f)](function(){var _0x2ee6b1=_0xcb6635;_0xafb80e['getClient'][_0x2ee6b1(0x12c)]['should']['equal'](0x1),_0xafb80e['getClient'][_0x2ee6b1(0x115)][_0x2ee6b1(0xf9)]['should']['have'][_0x2ee6b1(0x10e)](0x2),_0xafb80e['getClient'][_0x2ee6b1(0x115)]['args'][0x0]['should']['equal'](0x3039),_0xafb80e[_0x2ee6b1(0x102)][_0x2ee6b1(0x115)][_0x2ee6b1(0x113)][_0x2ee6b1(0xff)][_0x2ee6b1(0x103)](_0xafb80e);})[_0xcb6635(0x110)](_0x3a326e[_0xcb6635(0x108)]);}else _0x2d622b[_0xcb6635(0x117)][_0xcb6635(0x12c)][_0xcb6635(0xff)]['equal'](0x1),_0x2d622b[_0xcb6635(0x117)][_0xcb6635(0x115)][_0xcb6635(0xf9)][_0xcb6635(0xff)][_0xcb6635(0x11d)][_0xcb6635(0x10e)](0x2),_0x2d622b[_0xcb6635(0x117)][_0xcb6635(0x115)][_0xcb6635(0xf9)][0x0][_0xcb6635(0xff)]['equal'](_0x3c5c96),_0x2d622b[_0xcb6635(0x117)][_0xcb6635(0x115)][_0xcb6635(0xf9)][0x1][_0xcb6635(0xff)][_0xcb6635(0x103)](_0x4fb99d);})[_0xf1426b(0x110)](should[_0xf1426b(0x108)]);});});});