'use strict';const _0x323952=_0x3b32;function _0x3b32(_0xa5c1d7,_0x26d4ea){const _0x38ee51=_0x38ee();return _0x3b32=function(_0x3b3207,_0x442601){_0x3b3207=_0x3b3207-0x143;let _0x3178bc=_0x38ee51[_0x3b3207];return _0x3178bc;},_0x3b32(_0xa5c1d7,_0x26d4ea);}(function(_0x3754c7,_0x3466e8){const _0x2592a1=_0x3b32,_0x51384a=_0x3754c7();while(!![]){try{const _0x1094b9=-parseInt(_0x2592a1(0x185))/0x1+-parseInt(_0x2592a1(0x150))/0x2+-parseInt(_0x2592a1(0x14a))/0x3*(parseInt(_0x2592a1(0x156))/0x4)+-parseInt(_0x2592a1(0x18b))/0x5+parseInt(_0x2592a1(0x145))/0x6+-parseInt(_0x2592a1(0x15c))/0x7+parseInt(_0x2592a1(0x168))/0x8;if(_0x1094b9===_0x3466e8)break;else _0x51384a['push'](_0x51384a['shift']());}catch(_0x1c473d){_0x51384a['push'](_0x51384a['shift']());}}}(_0x38ee,0x1e6ce));const http=require(_0x323952(0x18d)),proxy=require(_0x323952(0x15a)),httpProxyClient=require(_0x323952(0x173)),SMTPServer=require(_0x323952(0x153))[_0x323952(0x164)],chai=require(_0x323952(0x16c)),expect=chai[_0x323952(0x148)];chai[_0x323952(0x152)][_0x323952(0x17c)]=!![];function _0x38ee(){const _0x42a340=['179709CxRMPu','PsbBk','IZBVi','should\x20connect\x20to\x20a\x20socket\x20through\x20proxy\x20with\x20auth','QWrQa','ktfRL','324520qoPdRi','tEhZt','http','MZgVJ','proxy-authorization','vDdvU','XPrIn','pxeqR','1174470WHSnBA','not','TwfYy','expect','http://test:kest@localhost:','18162DQPoNo','oaNfN','iXgjy','jwcIN','data','Fvryq','100024EdlIRK','gtXTE','config','smtp-server','pVUbi','XqMPa','44avbvUR','FQdFF','VYACX','koHZr','proxy','pbeUl','764400GDHuhx','bGCKQ','headers','VxEar','true','should\x20connect\x20to\x20a\x20socket\x20through\x20proxy','UjnRX','test','SMTPServer','oAEHG','Gqlbk','hxQHd','3194368sWbmIT','CiICZ','PPoVu','wAqTY','chai','close','authenticate','xNdkz','destroy','end','Qdehx','../../lib/smtp-connection/http-proxy-client','127.0.0.1','fOFuQ','createServer','once','XWETA','ztyuR','EypNX','exist','includeStack','lBMuA','LnuQi','HTTP\x20Proxy\x20Client\x20Tests','dBzUn','Basic\x20dGVzdDpwZXN0','toString','listen','pojmj'];_0x38ee=function(){return _0x42a340;};return _0x38ee();}const PROXY_PORT=0xc38,TARGET_PORT=0xc39;describe(_0x323952(0x17f),function(){const _0x762da0=_0x323952,_0x959bfb={'EypNX':_0x762da0(0x174),'XqMPa':function(_0x412988,_0x552737){return _0x412988(_0x552737);},'hxQHd':_0x762da0(0x187),'iXgjy':'http://test:pest@localhost:','wAqTY':function(_0x598e52,_0x297dd9,_0x1d7725){return _0x598e52(_0x297dd9,_0x1d7725);},'XWETA':_0x762da0(0x18f),'CiICZ':'Basic\x20dGVzdDpwZXN0','efjFa':function(_0x16cf90,_0x543ce6){return _0x16cf90===_0x543ce6;},'MZgVJ':_0x762da0(0x18c),'Fvryq':function(_0x4ce76d,_0x252395){return _0x4ce76d===_0x252395;},'jwcIN':_0x762da0(0x149),'TwfYy':_0x762da0(0x157),'bGCKQ':_0x762da0(0x144),'vDdvU':function(_0x44b776,_0xfde6b8,_0xef974c){return _0x44b776(_0xfde6b8,_0xef974c);},'gtXTE':'should\x20should\x20fail\x20auth'};_0x959bfb['wAqTY'](it,_0x762da0(0x161),function(_0x55d894){const _0x8758fc=_0x762da0,_0x42c841={'mABjw':_0x959bfb[_0x8758fc(0x17a)]};let _0x320f88=new SMTPServer({'logger':![]});_0x320f88['listen'](TARGET_PORT,()=>{const _0x206b63=_0x8758fc,_0x735f1f={'dBzUn':function(_0x28c521,_0x2d8ae0){return _0x28c521(_0x2d8ae0);},'swqbQ':function(_0x534db0,_0x288aeb){return _0x534db0+_0x288aeb;},'lBMuA':_0x42c841['mABjw']};let _0x532cc9=proxy(http[_0x206b63(0x176)]());_0x532cc9['listen'](PROXY_PORT,()=>{const _0x355000=_0x206b63;httpProxyClient(_0x735f1f['swqbQ']('http://localhost:',PROXY_PORT),TARGET_PORT,_0x735f1f[_0x355000(0x17d)],(_0x13046d,_0x4f5bb0)=>{const _0x39cb53=_0x355000,_0x38b4b7={'Lxmvv':function(_0x3dfe6f,_0x39c05c){return _0x3dfe6f(_0x39c05c);}};_0x735f1f[_0x39cb53(0x180)](expect,_0x13046d)['to'][_0x39cb53(0x146)][_0x39cb53(0x17b)],_0x4f5bb0[_0x39cb53(0x177)](_0x39cb53(0x14e),_0x4aa8a5=>{const _0x1798b2=_0x39cb53;_0x38b4b7['Lxmvv'](expect,/^220[ -]/[_0x1798b2(0x163)](_0x4aa8a5[_0x1798b2(0x182)]()))['to']['be'][_0x1798b2(0x160)],_0x4f5bb0[_0x1798b2(0x171)](),_0x4f5bb0['on'](_0x1798b2(0x16d),()=>{const _0x46e2e3=_0x1798b2;_0x4f5bb0['destroy'](),_0x320f88[_0x46e2e3(0x16d)](()=>setImmediate(_0x55d894)&&_0x532cc9['close']());});});});});});}),it(_0x762da0(0x188),function(_0x1d72bf){const _0x160eff=_0x762da0,_0x5642a5={'Gqlbk':function(_0xdb9b1e,_0x633890){const _0x4dcb79=_0x3b32;return _0x959bfb[_0x4dcb79(0x155)](_0xdb9b1e,_0x633890);},'VxEar':_0x959bfb[_0x160eff(0x167)],'oAEHG':function(_0x2a1048,_0x405e35,_0x184f16,_0x3c839e,_0x10df76){return _0x2a1048(_0x405e35,_0x184f16,_0x3c839e,_0x10df76);},'pojmj':_0x959bfb[_0x160eff(0x14c)],'pVUbi':function(_0x2b3c28,_0x1cd9e3,_0x18c438){return _0x2b3c28(_0x1cd9e3,_0x18c438);}};let _0x120e75=new SMTPServer({'logger':![]});_0x120e75[_0x160eff(0x183)](TARGET_PORT,()=>{const _0x57a092=_0x160eff,_0xeb35c9={'vyNOh':function(_0x5c5a80,_0x42c3f2,_0x1187d5){const _0x115591=_0x3b32;return _0x5642a5[_0x115591(0x154)](_0x5c5a80,_0x42c3f2,_0x1187d5);},'fOFuQ':function(_0x296480,_0x13d387){return _0x296480===_0x13d387;}};let _0x53fc7a=proxy(http[_0x57a092(0x176)]());_0x53fc7a[_0x57a092(0x16e)]=(_0x39e997,_0x1d20b4)=>{const _0x1fb851=_0x57a092;_0xeb35c9['vyNOh'](_0x1d20b4,null,_0xeb35c9[_0x1fb851(0x175)](_0x39e997[_0x1fb851(0x15e)][_0x1fb851(0x18f)],_0x1fb851(0x181)));},_0x53fc7a[_0x57a092(0x183)](PROXY_PORT,()=>{const _0x5c656c=_0x57a092,_0x1e0199={'pbeUl':function(_0x203d6e,_0x5a98d0){const _0x5ad0ad=_0x3b32;return _0x5642a5[_0x5ad0ad(0x166)](_0x203d6e,_0x5a98d0);}};_0x5c656c(0x187)!==_0x5642a5[_0x5c656c(0x15f)]?(_0x3572a7(_0x8785b5)['to'][_0x5c656c(0x146)][_0x5c656c(0x17b)],_0x3339a6[_0x5c656c(0x177)]('data',_0x5c66cc=>{const _0x3b3298=_0x5c656c;_0x2dded4(/^220[ -]/[_0x3b3298(0x163)](_0x5c66cc['toString']()))['to']['be'][_0x3b3298(0x160)],_0x298435[_0x3b3298(0x171)](),_0x34a144['on'](_0x3b3298(0x16d),()=>{const _0x2988fb=_0x3b3298;_0x87ab43[_0x2988fb(0x170)](),_0x1e6754[_0x2988fb(0x16d)](()=>_0x506ab2(_0x13507e)&&_0x393e9e[_0x2988fb(0x16d)]());});})):_0x5642a5[_0x5c656c(0x165)](httpProxyClient,_0x5642a5[_0x5c656c(0x184)]+PROXY_PORT,TARGET_PORT,_0x5c656c(0x174),(_0x3a4127,_0x224160)=>{const _0x593954=_0x5c656c,_0x582a88={'koHZr':_0x593954(0x16d)};_0x1e0199[_0x593954(0x15b)](expect,_0x3a4127)['to'][_0x593954(0x146)][_0x593954(0x17b)],_0x224160[_0x593954(0x177)](_0x593954(0x14e),_0x455639=>{const _0x57b68b=_0x593954;expect(/^220[ -]/['test'](_0x455639['toString']()))['to']['be']['true'],_0x224160[_0x57b68b(0x171)](),_0x224160['on'](_0x582a88[_0x57b68b(0x159)],()=>{const _0x56a3e8=_0x57b68b;_0x224160[_0x56a3e8(0x170)](),_0x120e75[_0x56a3e8(0x16d)](()=>setImmediate(_0x1d72bf)&&_0x53fc7a['close']());});});});});});}),_0x959bfb[_0x762da0(0x190)](it,_0x959bfb[_0x762da0(0x151)],function(_0x35029c){const _0xe0296a=_0x762da0,_0x51fb36={'LnuQi':function(_0x6c13ea,_0x445ce0,_0x5219ea){const _0x23422a=_0x3b32;return _0x959bfb[_0x23422a(0x16b)](_0x6c13ea,_0x445ce0,_0x5219ea);},'lvUig':_0x959bfb[_0xe0296a(0x178)],'oaNfN':_0x959bfb[_0xe0296a(0x169)],'QWrQa':function(_0x58c8f7,_0x4b1d09){return _0x959bfb['efjFa'](_0x58c8f7,_0x4b1d09);},'PsbBk':_0x959bfb[_0xe0296a(0x18e)],'xNdkz':function(_0x580ce4,_0x417c5f){const _0x255b52=_0xe0296a;return _0x959bfb[_0x255b52(0x14f)](_0x580ce4,_0x417c5f);},'XPrIn':_0x959bfb[_0xe0296a(0x14d)],'PPoVu':'127.0.0.1'};if(_0x959bfb[_0xe0296a(0x147)]===_0x959bfb[_0xe0296a(0x15d)])_0x51fb36[_0xe0296a(0x17e)](_0x2f6d1d,null,_0x1ffb17[_0xe0296a(0x15e)][_0x51fb36['lvUig']]===_0x51fb36[_0xe0296a(0x14b)]);else{let _0x4e2a11=new SMTPServer({'logger':![]});_0x4e2a11[_0xe0296a(0x183)](TARGET_PORT,()=>{const _0x56e9cf=_0xe0296a,_0xb27431={'ztyuR':_0x51fb36[_0x56e9cf(0x143)],'UjnRX':_0x51fb36[_0x56e9cf(0x16a)],'ktfRL':_0x56e9cf(0x172),'VYACX':function(_0x50d231,_0x28ad38,_0x41c096,_0x272a64,_0x835aa2){return _0x50d231(_0x28ad38,_0x41c096,_0x272a64,_0x835aa2);}};let _0x34a16c=proxy(http[_0x56e9cf(0x176)]());_0x34a16c[_0x56e9cf(0x16e)]=(_0x56679d,_0x47e34e)=>{const _0x353354=_0x56e9cf;_0x51fb36[_0x353354(0x189)](_0x353354(0x18c),_0x51fb36[_0x353354(0x186)])?_0x47e34e(null,_0x51fb36[_0x353354(0x16f)](_0x56679d[_0x353354(0x15e)][_0x353354(0x18f)],_0x51fb36['oaNfN'])):(_0x570c73['destroy'](),_0x1de9ec[_0x353354(0x16d)](()=>_0xe632ea(_0x5c57fa)&&_0x1bb9e7['close']()));},_0x34a16c[_0x56e9cf(0x183)](PROXY_PORT,()=>{const _0x9bedeb=_0x56e9cf;_0x9bedeb(0x172)===_0xb27431[_0x9bedeb(0x18a)]?_0xb27431[_0x9bedeb(0x158)](httpProxyClient,'http://test:kest@localhost:'+PROXY_PORT,TARGET_PORT,_0xb27431[_0x9bedeb(0x162)],(_0x2df4ec,_0x2f8b26)=>{const _0x477753=_0x9bedeb;expect(_0x2df4ec)['to'][_0x477753(0x17b)],expect(_0x2f8b26)['to'][_0x477753(0x146)]['exist'],_0x4e2a11['close'](()=>setImmediate(_0x35029c)&&_0x34a16c[_0x477753(0x16d)]());}):_0xd86ed5(_0xb27431[_0x9bedeb(0x179)]+_0xa77bd6,_0x5c57c5,_0xb27431[_0x9bedeb(0x162)],(_0x2ca5ea,_0x4197c8)=>{const _0x4d75fe=_0x9bedeb;_0x4b4bf5(_0x2ca5ea)['to'][_0x4d75fe(0x17b)],_0x445ff4(_0x4197c8)['to'][_0x4d75fe(0x146)][_0x4d75fe(0x17b)],_0x5434[_0x4d75fe(0x16d)](()=>_0xf3cc68(_0x51d260)&&_0x1af663[_0x4d75fe(0x16d)]());});});});}});});