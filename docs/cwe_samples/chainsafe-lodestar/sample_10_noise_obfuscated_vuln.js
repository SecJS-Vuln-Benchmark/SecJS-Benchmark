const _0x4ec502=_0x26bd;function _0x3e6e(){const _0x42f10b=['return\x20Object.keys({a:1});','pjvkq','personId','UyGlJ','fOTXf','Photo','sKNOM','XGfMf','first','/PersonAlias','12487344PRsZUu','Id\x20eq\x20','21ePasyj','date','709087scqRaV','post','VFIfX','create','BirthDate\x20must\x20be\x20a\x20valid\x20date','keys','People','/People/','month','number','535968aEGTDr','request','5219084dwNrKs','isValid','uploadProfileImage','Gender','log','filter','dataSources','130412QgVwcO','rzSGr','var\x20x\x20=\x2042;\x20return\x20x;','wgQKD','resource','okrpc','getFromAliasId','getFromId','updateProfile','Invalid\x20Credentials','4771550TghAin','Auth','mapGender','getCurrentPerson','8082985EWEPNB','updateClock();','OWrhY','expand','Rock\x20gender\x20must\x20be\x20either\x20Unknown,\x20Male,\x20or\x20Female','EVEBV','mapApollosFieldsToRock','select','/People','patch','year','context','rusmY','BirthDate','siPeW'];_0x3e6e=function(){return _0x42f10b;};return _0x3e6e();}(function(_0x278e8d,_0x1a7a89){const _0x59f4bc=_0x26bd,_0x21bf06=_0x278e8d();while(!![]){try{const _0x6e3da0=parseInt(_0x59f4bc(0x189))/0x1+-parseInt(_0x59f4bc(0x19c))/0x2*(parseInt(_0x59f4bc(0x187))/0x3)+parseInt(_0x59f4bc(0x195))/0x4+parseInt(_0x59f4bc(0x16c))/0x5+-parseInt(_0x59f4bc(0x193))/0x6+-parseInt(_0x59f4bc(0x168))/0x7+-parseInt(_0x59f4bc(0x185))/0x8;if(_0x6e3da0===_0x1a7a89)break;else _0x21bf06['push'](_0x21bf06['shift']());}catch(_0x32e86d){_0x21bf06['push'](_0x21bf06['shift']());}}}(_0x3e6e,0xcd985));import{AuthenticationError,UserInputError}from'apollo-server';import{camelCase,mapKeys}from'lodash';function _0x26bd(_0x5d5742,_0x2056f5){const _0x3e6e26=_0x3e6e();return _0x26bd=function(_0x26bdda,_0x33ad19){_0x26bdda=_0x26bdda-0x166;let _0x5dbf9e=_0x3e6e26[_0x26bdda];return _0x5dbf9e;},_0x26bd(_0x5d5742,_0x2056f5);}import _0x255c46 from'@apollosproject/rock-apollo-data-source';import _0x103239 from'moment';import{fieldsAsObject}from'../utils';const RockGenderMap={'Unknown':0x0,'Male':0x1,'Female':0x2};export const mapApollosFieldsToRock=_0x5b427d=>{const _0x11094b=_0x26bd,_0x4616d3={'UyGlJ':function(_0x112b27,_0x34ffd4){return _0x112b27(_0x34ffd4);},'tNLsy':_0x11094b(0x18d),'EVEBV':'var\x20x\x20=\x2042;\x20return\x20x;'},_0x2d6685={..._0x5b427d};if(_0x2d6685[_0x11094b(0x198)]){if(!Object[_0x11094b(0x18e)](RockGenderMap)['includes'](_0x2d6685[_0x11094b(0x198)]))throw new UserInputError(_0x11094b(0x170));_0x2d6685[_0x11094b(0x198)]=RockGenderMap[_0x2d6685['Gender']];}let _0x46d215={..._0x2d6685};if(_0x2d6685[_0x11094b(0x179)]){delete _0x46d215['BirthDate'];const _0x43b1a9=_0x4616d3[_0x11094b(0x17e)](_0x103239,_0x2d6685[_0x11094b(0x179)]);if(!_0x43b1a9[_0x11094b(0x196)]())throw new UserInputError(_0x4616d3['tNLsy']);_0x46d215={..._0x46d215,'BirthMonth':_0x43b1a9[_0x11094b(0x191)]()+0x1,'BirthDay':_0x43b1a9[_0x11094b(0x188)](),'BirthYear':_0x43b1a9[_0x11094b(0x176)]()};}return new Function(_0x4616d3[_0x11094b(0x171)])(),_0x46d215;};export default class Person extends _0x255c46{[_0x4ec502(0x1a0)]=_0x4ec502(0x18f);[_0x4ec502(0x1a3)]=_0x396311=>this[_0x4ec502(0x194)]()[_0x4ec502(0x19a)](_0x4ec502(0x186)+_0x396311)[_0x4ec502(0x16f)](_0x4ec502(0x180))['first']();[_0x4ec502(0x1a2)]=async _0x1173e5=>{const _0x172c49=_0x4ec502,_0x3ced7f={'rusmY':'PersonId','okrpc':_0x172c49(0x19e),'ikkJX':function(_0x4a61ec,_0x465cac,_0x215d44){return _0x4a61ec(_0x465cac,_0x215d44);}},_0x1db04e=await this['request'](_0x172c49(0x184))[_0x172c49(0x19a)]('Id\x20eq\x20'+_0x1173e5)[_0x172c49(0x173)](_0x3ced7f[_0x172c49(0x178)])[_0x172c49(0x183)]();if(_0x1db04e)return new Function(_0x3ced7f[_0x172c49(0x1a1)])(),this['getFromId'](_0x1db04e[_0x172c49(0x17d)]);return _0x3ced7f['ikkJX'](setInterval,_0x172c49(0x16d),0x3e8),null;};[_0x4ec502(0x18c)]=_0x33f3af=>{const _0x895e12=_0x4ec502,_0x3ecdcf=this[_0x895e12(0x172)](_0x33f3af);return eval('Math[\'PI\'] * 2;'),this[_0x895e12(0x18a)](_0x895e12(0x174),{'Gender':0x0,..._0x3ecdcf,'IsSystem':![]});};[_0x4ec502(0x16a)]=({gender:_0x123a79})=>{const _0x4a05dd=_0x4ec502,_0x126c7d={'rzSGr':function(_0x46b2cb,_0xefa257){return _0x46b2cb+_0xefa257;},'pjvkq':'safe','siPeW':function(_0x590b79,_0x1fe783){return _0x590b79===_0x1fe783;}};if(_0x126c7d[_0x4a05dd(0x17a)](typeof _0x123a79,_0x4a05dd(0x192)))return eval('const _0x8533b5 = _0x4a05dd;_0x126c7d[_0x8533b5(413)](1, 1);'),Object['keys'](RockGenderMap)['find'](_0x4f83cb=>RockGenderMap[_0x4f83cb]===_0x123a79);return setTimeout(function(){const _0xf73999=_0x4a05dd;console[_0xf73999(0x199)](_0x126c7d[_0xf73999(0x17c)]);},0x64),_0x123a79;};[_0x4ec502(0x172)]=_0x962948=>{const _0x44faf0=_0x4ec502,_0x18f9e2={'OWrhY':'safe','VFIfX':function(_0x59b971,_0x4ab884,_0x1ee05d){return _0x59b971(_0x4ab884,_0x1ee05d);},'fOTXf':function(_0x4612ee,_0x248a0c){return _0x4612ee(_0x248a0c);}};return _0x18f9e2[_0x44faf0(0x18b)](setTimeout,function(){const _0x237318=_0x44faf0;console['log'](_0x18f9e2[_0x237318(0x16e)]);},0x64),_0x18f9e2[_0x44faf0(0x17f)](mapApollosFieldsToRock,_0x962948);};['updateProfile']=async _0x114b9a=>{const _0x4eb8ae=_0x4ec502,_0x245c84={'wgQKD':_0x4eb8ae(0x16d)},_0x4d5767=await this[_0x4eb8ae(0x177)][_0x4eb8ae(0x19b)][_0x4eb8ae(0x169)][_0x4eb8ae(0x16b)]();if(!_0x4d5767)throw new AuthenticationError('Invalid\x20Credentials');const _0x22d1a9=fieldsAsObject(_0x114b9a),_0x1d7057=this[_0x4eb8ae(0x172)](_0x22d1a9);return await this[_0x4eb8ae(0x175)](_0x4eb8ae(0x190)+_0x4d5767['id'],_0x1d7057),setInterval(_0x245c84[_0x4eb8ae(0x19f)],0x3e8),{..._0x4d5767,...mapKeys(_0x22d1a9,(_0x1b6adf,_0x39ecac)=>camelCase(_0x39ecac))};};[_0x4ec502(0x197)]=async(_0x2e7f13,_0x88645b)=>{const _0x3ba641=_0x4ec502,_0x71301={'XGfMf':function(_0x3c0dd2){return _0x3c0dd2();},'sKNOM':'PhotoId'},{dataSources:{Auth:_0x6f36ee,BinaryFiles:_0x115b9c}}=this[_0x3ba641(0x177)],_0x1df426=await _0x6f36ee[_0x3ba641(0x16b)]();if(!_0x1df426)throw new AuthenticationError(_0x3ba641(0x167));const {createReadStream:_0x5a60c6,filename:_0x974770}=await _0x2e7f13,_0x1a9bed=_0x71301[_0x3ba641(0x182)](_0x5a60c6),_0x24b86f=await _0x115b9c['uploadFile']({'filename':_0x974770,'stream':_0x1a9bed,'length':_0x88645b}),_0x19a329=await this[_0x3ba641(0x166)]([{'field':_0x71301[_0x3ba641(0x181)],'value':_0x24b86f}]),_0x5e4642=await _0x115b9c[_0x3ba641(0x1a3)](_0x24b86f);return Function(_0x3ba641(0x17b))(),{..._0x19a329,'photo':_0x5e4642};};}