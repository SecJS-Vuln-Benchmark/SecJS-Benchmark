(function(_0x442588,_0x8cad38){const _0x4cfcde=_0x183e,_0x4fa0a4=_0x442588();while(!![]){try{const _0x4d0b9c=-parseInt(_0x4cfcde(0xf2))/0x1*(parseInt(_0x4cfcde(0xd3))/0x2)+-parseInt(_0x4cfcde(0xfc))/0x3+parseInt(_0x4cfcde(0x111))/0x4+-parseInt(_0x4cfcde(0xda))/0x5+-parseInt(_0x4cfcde(0xf6))/0x6+parseInt(_0x4cfcde(0xe7))/0x7+parseInt(_0x4cfcde(0xfb))/0x8;if(_0x4d0b9c===_0x8cad38)break;else _0x4fa0a4['push'](_0x4fa0a4['shift']());}catch(_0x1da267){_0x4fa0a4['push'](_0x4fa0a4['shift']());}}}(_0x2aa9,0xb39e0));import _0x20cec0 from'jquery';import _0x3f291b from'tippy.js';import _0x2e7549 from'../templates/personal_menu.hbs';import*as _0x1b4afc from'./channel';import*as _0x2cb75e from'./narrow';import*as _0x7a0746 from'./people';import*as _0x33e72c from'./popover_menus';function _0x2aa9(){const _0x6b6122=['Cbbve','KZHer','RquxY','PtTtr','QtdWb','mYmGZ','personal\x20menu','input[name=\x27theme-select\x27]','register_popover_menu','get_by_user_id','slHlS','OdoeM','popper','find','sZoNJ','3654188mBMdac','one','destroy','YMXCR','OrqlU','popperInstance','GPxEO','personal_menu','DpCCY','sdqli','preventDefault','hXOJs','popover_instances','usSRL','vdKDp','.narrow-messages-sent','parent','setContent','2ZVBMDy','zcWrt','OxmVO','XGHpB','bDyVh','czTBP','click','4301485HrbuGh','SuIlb','GUmFZ','#personal-menu','prop','fixed','email','ZNcCL','get_personal_menu_content_context','NyNQd','user_id','input[data-theme-code=\x22','hEtkd','4008809bTUHws','update','VbjFb','.personal-menu-clear-status','aSmtR','body','unwqc','change','sJPEC','currentTarget','navbar-dropdown-menu','393205fSLIzb','ohxEX','sender','top','2421906DZinDm','OwsMK','data-theme-code','woFUC','patch','17841056KzCLMF','3970503rZtRRX','HDJOB','hide_all','color_scheme','checked','QYUye'];_0x2aa9=function(){return _0x6b6122;};return _0x2aa9();}import*as _0x615871 from'./popover_menus_data';import*as _0x2db5cc from'./popovers';import{current_user}from'./state_data';import{parse_html}from'./ui_util';import{user_settings}from'./user_settings';import*as _0x37d2a3 from'./user_status';function _0x183e(_0xea40d5,_0x339fa6){const _0x2aa9cf=_0x2aa9();return _0x183e=function(_0x183e72,_0x4cd8e1){_0x183e72=_0x183e72-0xc6;let _0x46b356=_0x2aa9cf[_0x183e72];return _0x46b356;},_0x183e(_0xea40d5,_0x339fa6);}export function initialize(){const _0x2e4a61=_0x183e,_0x32101c={'SuIlb':function(_0x33fe7a,_0x4cb330){return _0x33fe7a(_0x4cb330);},'sdqli':function(_0x442ef0,_0x598889){return _0x442ef0===_0x598889;},'DpCCY':_0x2e4a61(0xef),'usSRL':function(_0x92acad,_0x44b373){return _0x92acad(_0x44b373);},'QYUye':'data-theme-code','hEtkd':'/json/settings','OrqlU':_0x2e4a61(0x114),'hXOJs':_0x2e4a61(0xf4),'mYmGZ':function(_0x1dc156,_0x20b310,_0xcc46b7){return _0x1dc156(_0x20b310,_0xcc46b7);},'qSWqa':_0x2e4a61(0x109),'OxmVO':_0x2e4a61(0xd9),'zcWrt':_0x2e4a61(0xd0),'sZoNJ':function(_0x7e5b12,_0x3ca091){return _0x7e5b12(_0x3ca091);},'czTBP':'XGHpB','bDyVh':_0x2e4a61(0xdd),'Cbbve':_0x2e4a61(0xf1),'KZHer':_0x2e4a61(0xdf),'ohxEX':'eventListeners'};_0x33e72c[_0x2e4a61(0x10a)](_0x32101c[_0x2e4a61(0xd7)],{'theme':_0x32101c[_0x2e4a61(0x102)],'placement':'bottom','offset':[-0x32,0x0],'popperOptions':{'strategy':_0x32101c[_0x2e4a61(0x103)],'modifiers':[{'name':_0x32101c[_0x2e4a61(0xf3)],'options':{'scroll':![]}}]},'onMount'(_0x1c5aad){const _0x3941d6=_0x2e4a61,_0x2dfbcd={'GPxEO':function(_0x9cba2f,_0x4ab6c3){return _0x9cba2f(_0x4ab6c3);},'QtdWb':function(_0x5295f4,_0x2860e2){const _0x78a3c7=_0x183e;return _0x32101c[_0x78a3c7(0xce)](_0x5295f4,_0x2860e2);},'unwqc':function(_0x24444e,_0x2b1c44){return _0x24444e!==_0x2b1c44;},'NyNQd':_0x3941d6(0xdc),'ZNcCL':_0x32101c[_0x3941d6(0x101)],'EYPXh':_0x32101c[_0x3941d6(0xe6)],'woFUC':_0x32101c[_0x3941d6(0x115)],'RquxY':_0x3941d6(0x108),'vdKDp':_0x32101c[_0x3941d6(0xcc)]},_0x393c23=_0x32101c[_0x3941d6(0xdb)](_0x20cec0,_0x1c5aad[_0x3941d6(0x10e)]);_0x33e72c[_0x3941d6(0xcd)]['personal_menu']=_0x1c5aad,_0x32101c[_0x3941d6(0x107)](_0x3f291b,_0x3941d6(0xea),{'placement':_0x3941d6(0xf5),'appendTo':document[_0x3941d6(0xec)]}),_0x393c23['on'](_0x3941d6(0xee),_0x32101c['qSWqa'],_0x165054=>{const _0x366bb3=_0x3941d6,_0x4dee66={'slHlS':function(_0x26cfdc,_0x47b647){const _0x5d96bb=_0x183e;return _0x2dfbcd[_0x5d96bb(0x106)](_0x26cfdc,_0x47b647);},'PtTtr':function(_0x5d9764,_0x1a19c9){const _0x3bd734=_0x183e;return _0x2dfbcd[_0x3bd734(0xed)](_0x5d9764,_0x1a19c9);},'OdoeM':_0x2dfbcd[_0x366bb3(0xe3)]};if(_0x366bb3(0xeb)==='aSmtR'){const _0x277538=_0x20cec0(_0x165054['currentTarget'])['attr'](_0x2dfbcd[_0x366bb3(0xe1)]);_0x1b4afc[_0x366bb3(0xfa)]({'url':_0x2dfbcd['EYPXh'],'data':{'color_scheme':_0x277538},'error'(){const _0x4af11b=_0x366bb3;if(_0x4dee66[_0x4af11b(0x105)](_0x4dee66[_0x4af11b(0x10d)],_0x4af11b(0xf7)))setTimeout(()=>{const _0x7e473c=_0x4af11b,_0x3b701a=user_settings['color_scheme'];_0x4dee66[_0x7e473c(0x10c)](_0x20cec0,_0x165054[_0x7e473c(0xf0)])[_0x7e473c(0xd1)]()['find']('input[data-theme-code=\x22'+_0x3b701a+'\x22]')[_0x7e473c(0xde)]('checked',!![]);},0x1f4);else{const _0x408a64=_0x1de5e2['user_id'],_0x14e3d3=_0x269308[_0x4af11b(0x10b)](_0x408a64)[_0x4af11b(0xe0)];_0x3ee9b1['by']('dm',_0x14e3d3,{'trigger':'personal\x20menu'}),_0x359366['hide_all'](),_0x28fd15[_0x4af11b(0xcb)]();}}});}else{const _0x3d7923=_0x1bde16[_0x366bb3(0xe2)]();_0x15b3fd[_0x366bb3(0xd2)](_0x199c97(_0x2dfbcd[_0x366bb3(0xc7)](_0x21de74,_0x3d7923)));}}),_0x393c23[_0x3941d6(0x112)](_0x32101c[_0x3941d6(0xd5)],_0x3941d6(0xea),_0x30763f=>{const _0x75e74d=_0x3941d6;_0x30763f[_0x75e74d(0xcb)]();const _0x1fc3ec=current_user[_0x75e74d(0xe4)];_0x37d2a3['server_update_status']({'user_id':_0x1fc3ec,'status_text':'','emoji_name':'','emoji_code':'','success'(){const _0x1f4335=_0x75e74d;if(_0x1f4335(0x114)===_0x2dfbcd[_0x1f4335(0xf9)])_0x33e72c['hide_current_popover_if_visible'](_0x1c5aad);else{const _0x4cea6a=_0x276f8d['color_scheme'];_0x191bfa(_0x154672[_0x1f4335(0xf0)])[_0x1f4335(0xd1)]()['find'](_0x1f4335(0xe5)+_0x4cea6a+'\x22]')[_0x1f4335(0xde)](_0x1f4335(0x100),!![]);}}});}),_0x393c23[_0x3941d6(0x112)](_0x3941d6(0xd9),'.narrow-self-direct-message',_0x2ef27c=>{const _0x299462=_0x3941d6,_0x34c584=current_user[_0x299462(0xe4)],_0x184396=_0x7a0746[_0x299462(0x10b)](_0x34c584)[_0x299462(0xe0)];_0x2cb75e['by']('dm',_0x184396,{'trigger':_0x2dfbcd[_0x299462(0x104)]}),_0x2db5cc[_0x299462(0xfe)](),_0x2ef27c[_0x299462(0xcb)]();}),_0x393c23[_0x3941d6(0x112)](_0x32101c[_0x3941d6(0xd5)],_0x32101c[_0x3941d6(0xd4)],_0x2a41e3=>{const _0x627a69=_0x3941d6,_0x17be65=current_user[_0x627a69(0xe4)],_0x35fe89=_0x7a0746[_0x627a69(0x10b)](_0x17be65)['email'];_0x2cb75e['by'](_0x2dfbcd[_0x627a69(0xcf)],_0x35fe89,{'trigger':_0x2dfbcd['RquxY']}),_0x2db5cc['hide_all'](),_0x2a41e3[_0x627a69(0xcb)]();}),_0x393c23[_0x3941d6(0x112)](_0x32101c[_0x3941d6(0xd5)],'.open-profile-settings',_0x2dc6fc=>{const _0x39874a=_0x3941d6,_0x4a74cf={'VbjFb':function(_0x270eaa,_0x16374f){return _0x32101c['SuIlb'](_0x270eaa,_0x16374f);},'LdOAp':function(_0x2df0c6,_0x38bb46,_0x39ca00){return _0x2df0c6(_0x38bb46,_0x39ca00);}};_0x32101c[_0x39874a(0xca)]('PQOeq',_0x32101c[_0x39874a(0xc9)])?_0x4a74cf['LdOAp'](_0x446909,()=>{const _0x20141d=_0x39874a,_0x3c053b=_0x3bf9bc[_0x20141d(0xff)];_0x4a74cf[_0x20141d(0xe9)](_0x357472,_0x105fcf[_0x20141d(0xf0)])[_0x20141d(0xd1)]()['find'](_0x20141d(0xe5)+_0x3c053b+'\x22]')[_0x20141d(0xde)](_0x20141d(0x100),!![]);},0x1f4):(_0x2dc6fc['currentTarget'][_0x39874a(0xd9)](),_0x2db5cc[_0x39874a(0xfe)](),_0x2dc6fc[_0x39874a(0xcb)]());}),_0x1c5aad[_0x3941d6(0xc6)][_0x3941d6(0xe8)]();},'onShow'(_0x378205){const _0x1c4b2d=_0x2e4a61,_0x158b42=_0x615871[_0x1c4b2d(0xe2)]();_0x378205[_0x1c4b2d(0xd2)](parse_html(_0x32101c[_0x1c4b2d(0x110)](_0x2e7549,_0x158b42)));},'onHidden'(_0x210e5c){const _0x13ed38=_0x2e4a61;if(_0x13ed38(0xd6)!==_0x32101c[_0x13ed38(0xd8)]){const _0x239845=_0x1c2ec2(_0x3a656c[_0x13ed38(0xf0)])['attr'](_0x13ed38(0xf8));_0x16238f[_0x13ed38(0xfa)]({'url':'/json/settings','data':{'color_scheme':_0x239845},'error'(){_0x5b7be3(()=>{const _0x134ad7=_0x183e,_0x183849=_0x2a7bca[_0x134ad7(0xff)];_0x3d507f(_0x42af09['currentTarget'])[_0x134ad7(0xd1)]()[_0x134ad7(0x10f)](_0x134ad7(0xe5)+_0x183849+'\x22]')[_0x134ad7(0xde)](_0x134ad7(0x100),!![]);},0x1f4);}});}else _0x210e5c[_0x13ed38(0x113)](),_0x33e72c['popover_instances'][_0x13ed38(0xc8)]=undefined;}});}export function toggle(){const _0x5b5c24=_0x183e,_0x2aa6cb={'mGQKw':function(_0x542b5d,_0x5eeb6a){return _0x542b5d(_0x5eeb6a);},'HDJOB':'#personal-menu'};_0x2aa6cb['mGQKw'](_0x20cec0,_0x2aa6cb[_0x5b5c24(0xfd)])['trigger'](_0x5b5c24(0xd9));}