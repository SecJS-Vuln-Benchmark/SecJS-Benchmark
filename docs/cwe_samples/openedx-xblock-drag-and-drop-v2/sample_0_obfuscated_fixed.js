'use strict';function _0x1b95(){const _0x2ccab4=['ywZaE','keys','YfTSv','NJJge','abort','request','lqCrL','object','344HjQXmO','4125224sqXmyJ','method','isIterable','string','dlYkh','yIeDU','JWCVy','sIaXt','MnoBy','onComplete','redirectionLimitReached','function','OwaGJ','qRwQR','KUebV','node:assert','isDisturbed','NbyLQ','length','dispatch','isArray','qZbvb','KsWhs','readableDidRead','max\x20redirects','pipeTo','origin','GET','poENW','node:events','onError','edGyU','onConnect','history','4315KClVDv','isView','bUOjJ','onUpgrade','mYcma','handler','../core/symbols','17499708vPIWGv','332762lkncIq','proxy-authorization','maxRedirections','2446506oakTzd','wSGrD','DmOuI','path','UcOXy','push','data','KaXxE','query','xftNB','validateHandler','2acAtmc','605549xuqCeG','ISKuH','yzRkD','agLAx','HEAD','throwOnMaxRedirect','onData','upgrade','disturbed','body','epvSG','onBodySent','opts','boolean','host','bodyLength','headerNameToString','../core/util','1697697VmZfcM','headers\x20must\x20be\x20an\x20object\x20or\x20an\x20array','location','PlnUx'];_0x1b95=function(){return _0x2ccab4;};return _0x1b95();}function _0x5bd7(_0x15dda0,_0x3b98c0){const _0x1b95c2=_0x1b95();return _0x5bd7=function(_0x5bd7af,_0x235eab){_0x5bd7af=_0x5bd7af-0x81;let _0x3fe872=_0x1b95c2[_0x5bd7af];return _0x3fe872;},_0x5bd7(_0x15dda0,_0x3b98c0);}const _0x4f9d2b=_0x5bd7;(function(_0x373788,_0x3d0f31){const _0x50f06c=_0x5bd7,_0x1d834a=_0x373788();while(!![]){try{const _0x3d03cf=-parseInt(_0x50f06c(0x8e))/0x1*(parseInt(_0x50f06c(0x9c))/0x2)+-parseInt(_0x50f06c(0xaf))/0x3+-parseInt(_0x50f06c(0xbb))/0x4*(-parseInt(_0x50f06c(0x86))/0x5)+-parseInt(_0x50f06c(0x91))/0x6+parseInt(_0x50f06c(0x9d))/0x7+-parseInt(_0x50f06c(0xbc))/0x8+parseInt(_0x50f06c(0x8d))/0x9;if(_0x3d03cf===_0x3d0f31)break;else _0x1d834a['push'](_0x1d834a['shift']());}catch(_0x23a1fa){_0x1d834a['push'](_0x1d834a['shift']());}}}(_0x1b95,0x451c0));const util=require(_0x4f9d2b(0xae)),{kBodyUsed}=require(_0x4f9d2b(0x8c)),assert=require(_0x4f9d2b(0xcb)),{InvalidArgumentError}=require('../core/errors'),EE=require(_0x4f9d2b(0x81)),redirectableStatusCodes=[0x12c,0x12d,0x12e,0x12f,0x133,0x134],kBody=Symbol(_0x4f9d2b(0xa6));class BodyAsyncIterable{constructor(_0x4816bf){this[kBody]=_0x4816bf,this[kBodyUsed]=![];}async*[Symbol['asyncIterator']](){const _0x239368=_0x4f9d2b,_0x3e21ca={'mYcma':_0x239368(0xa5)};assert(!this[kBodyUsed],_0x3e21ca[_0x239368(0x8a)]),this[kBodyUsed]=!![],yield*this[kBody];}}class RedirectHandler{constructor(_0x317dea,_0x58dccb,_0x1c0fc5,_0x52df89){const _0x2e810e=_0x4f9d2b,_0x51849c={'agLAx':function(_0x4c68d7,_0x5d5b58){return _0x4c68d7<_0x5d5b58;},'qZbvb':function(_0x270049,_0x2de146){return _0x270049===_0x2de146;},'YfTSv':_0x2e810e(0x83),'ISKuH':function(_0x1c0c09,_0x5a82ba){return _0x1c0c09===_0x5a82ba;},'JWCVy':function(_0xe328e7,_0x3567f2){return _0xe328e7!==_0x3567f2;}};if(_0x58dccb!=null&&(!Number['isInteger'](_0x58dccb)||_0x51849c[_0x2e810e(0xa0)](_0x58dccb,0x0)))throw new InvalidArgumentError('maxRedirections\x20must\x20be\x20a\x20positive\x20number');util[_0x2e810e(0x9b)](_0x52df89,_0x1c0fc5[_0x2e810e(0xbd)],_0x1c0fc5[_0x2e810e(0xa4)]),this[_0x2e810e(0xcf)]=_0x317dea,this['location']=null,this[_0x2e810e(0xb7)]=null,this[_0x2e810e(0xa9)]={..._0x1c0fc5,'maxRedirections':0x0},this[_0x2e810e(0x90)]=_0x58dccb,this[_0x2e810e(0x8b)]=_0x52df89,this[_0x2e810e(0x85)]=[],this[_0x2e810e(0xc6)]=![];if(util['isStream'](this['opts']['body']))util[_0x2e810e(0xac)](this[_0x2e810e(0xa9)][_0x2e810e(0xa6)])===0x0&&this[_0x2e810e(0xa9)][_0x2e810e(0xa6)]['on'](_0x2e810e(0x97),function(){assert(![]);}),typeof this[_0x2e810e(0xa9)][_0x2e810e(0xa6)][_0x2e810e(0xd3)]!==_0x2e810e(0xaa)&&(_0x51849c[_0x2e810e(0xd1)](_0x51849c[_0x2e810e(0xb5)],_0x2e810e(0x83))?(this['opts'][_0x2e810e(0xa6)][kBodyUsed]=![],EE['prototype']['on']['call'](this[_0x2e810e(0xa9)][_0x2e810e(0xa6)],_0x2e810e(0x97),function(){this[kBodyUsed]=!![];})):this[_0x2e810e(0x85)][_0x2e810e(0x96)](new _0x4f2dfe(this[_0x2e810e(0xa9)][_0x2e810e(0x94)],this['opts']['origin'])));else{if(this[_0x2e810e(0xa9)][_0x2e810e(0xa6)]&&_0x51849c[_0x2e810e(0x9e)](typeof this[_0x2e810e(0xa9)][_0x2e810e(0xa6)][_0x2e810e(0xd5)],_0x2e810e(0xc7)))this['opts'][_0x2e810e(0xa6)]=new BodyAsyncIterable(this[_0x2e810e(0xa9)]['body']);else this['opts']['body']&&_0x51849c[_0x2e810e(0xc2)](typeof this['opts'][_0x2e810e(0xa6)],_0x2e810e(0xbf))&&!ArrayBuffer[_0x2e810e(0x87)](this[_0x2e810e(0xa9)][_0x2e810e(0xa6)])&&util[_0x2e810e(0xbe)](this[_0x2e810e(0xa9)][_0x2e810e(0xa6)])&&(this['opts']['body']=new BodyAsyncIterable(this[_0x2e810e(0xa9)][_0x2e810e(0xa6)]));}}[_0x4f9d2b(0x84)](_0x30a071){const _0x291fe5=_0x4f9d2b;this[_0x291fe5(0xb7)]=_0x30a071,this[_0x291fe5(0x8b)]['onConnect'](_0x30a071,{'history':this[_0x291fe5(0x85)]});}[_0x4f9d2b(0x89)](_0x315303,_0xc3c2c6,_0x4f23d1){const _0xd1b01f=_0x4f9d2b;this[_0xd1b01f(0x8b)][_0xd1b01f(0x89)](_0x315303,_0xc3c2c6,_0x4f23d1);}['onError'](_0x3233e5){const _0x28534d=_0x4f9d2b;this[_0x28534d(0x8b)][_0x28534d(0x82)](_0x3233e5);}['onHeaders'](_0x4f22c6,_0x2d423f,_0x20ee02,_0x510881){const _0x5c5682=_0x4f9d2b,_0x5e165e={'epvSG':function(_0x330853,_0x492295,_0x4f9c21,_0x14b207){return _0x330853(_0x492295,_0x4f9c21,_0x14b207);},'KsWhs':function(_0x2aa407,_0x5d12a2){return _0x2aa407+_0x5d12a2;},'KUebV':function(_0x2b8394,_0x2b6d92,_0x41f56f){return _0x2b8394(_0x2b6d92,_0x41f56f);},'MnoBy':_0x5c5682(0xd4),'QsaBq':function(_0x509250,_0x1c98c5){return _0x509250===_0x1c98c5;},'poENW':function(_0x24ecaa,_0x3d4af1){return _0x24ecaa===_0x3d4af1;},'yIeDU':function(_0x25f914,_0x13cbdb){return _0x25f914!==_0x13cbdb;}};this['location']=this[_0x5c5682(0x85)][_0x5c5682(0xce)]>=this[_0x5c5682(0x90)]||util[_0x5c5682(0xcc)](this[_0x5c5682(0xa9)][_0x5c5682(0xa6)])?null:_0x5e165e[_0x5c5682(0xca)](parseLocation,_0x4f22c6,_0x2d423f);if(this[_0x5c5682(0xa9)][_0x5c5682(0xa2)]&&this[_0x5c5682(0x85)][_0x5c5682(0xce)]>=this[_0x5c5682(0x90)]){this[_0x5c5682(0xb8)]&&this[_0x5c5682(0xb8)][_0x5c5682(0xb7)](new Error(_0x5e165e['MnoBy']));this['redirectionLimitReached']=!![],this[_0x5c5682(0xb7)](new Error(_0x5e165e[_0x5c5682(0xc4)]));return;}this[_0x5c5682(0xa9)][_0x5c5682(0xd6)]&&this['history'][_0x5c5682(0x96)](new URL(this[_0x5c5682(0xa9)][_0x5c5682(0x94)],this[_0x5c5682(0xa9)]['origin']));if(!this[_0x5c5682(0xb1)])return this[_0x5c5682(0x8b)]['onHeaders'](_0x4f22c6,_0x2d423f,_0x20ee02,_0x510881);const {origin:_0x4bf8e7,pathname:_0x42a448,search:_0x25bc7e}=util['parseURL'](new URL(this[_0x5c5682(0xb1)],this[_0x5c5682(0xa9)][_0x5c5682(0xd6)]&&new URL(this[_0x5c5682(0xa9)][_0x5c5682(0x94)],this[_0x5c5682(0xa9)][_0x5c5682(0xd6)]))),_0x4388bc=_0x25bc7e?''+_0x42a448+_0x25bc7e:_0x42a448;this['opts']['headers']=_0x5e165e[_0x5c5682(0xa7)](cleanRequestHeaders,this[_0x5c5682(0xa9)]['headers'],_0x5e165e['QsaBq'](_0x4f22c6,0x12f),this['opts'][_0x5c5682(0xd6)]!==_0x4bf8e7),this['opts'][_0x5c5682(0x94)]=_0x4388bc,this[_0x5c5682(0xa9)][_0x5c5682(0xd6)]=_0x4bf8e7,this[_0x5c5682(0xa9)][_0x5c5682(0x90)]=0x0,this[_0x5c5682(0xa9)][_0x5c5682(0x99)]=null,_0x5e165e[_0x5c5682(0xd8)](_0x4f22c6,0x12f)&&_0x5e165e[_0x5c5682(0xc1)](this[_0x5c5682(0xa9)][_0x5c5682(0xbd)],_0x5c5682(0xa1))&&(_0x5c5682(0xb9)===_0x5c5682(0xcd)?!_0x5e165e[_0x5c5682(0xa7)](_0x5bf08f,_0x57be5[_0x4dab77],_0x32683f,_0x2dc3ad)&&_0x29e188[_0x5c5682(0x96)](_0x891d61[_0x3e7f74],_0x148d29[_0x5e165e[_0x5c5682(0xd2)](_0xd63304,0x1)]):(this[_0x5c5682(0xa9)][_0x5c5682(0xbd)]=_0x5c5682(0xd7),this[_0x5c5682(0xa9)][_0x5c5682(0xa6)]=null));}[_0x4f9d2b(0xa3)](_0x596df9){const _0x171827=_0x4f9d2b;if(this['location']){}else return this[_0x171827(0x8b)][_0x171827(0xa3)](_0x596df9);}[_0x4f9d2b(0xc5)](_0x1f7d71){const _0x494474=_0x4f9d2b,_0x351944={'wSGrD':function(_0x4a904b,_0x365fd5){return _0x4a904b!==_0x365fd5;}};this[_0x494474(0xb1)]?(this['location']=null,this['abort']=null,this[_0x494474(0xcf)](this[_0x494474(0xa9)],this)):_0x351944[_0x494474(0x92)](_0x494474(0xc9),_0x494474(0xc0))?this[_0x494474(0x8b)][_0x494474(0xc5)](_0x1f7d71):this[_0x3fb82c]=!![];}[_0x4f9d2b(0xa8)](_0x1c5fa3){const _0x1c5394=_0x4f9d2b;this[_0x1c5394(0x8b)][_0x1c5394(0xa8)]&&this[_0x1c5394(0x8b)][_0x1c5394(0xa8)](_0x1c5fa3);}}function parseLocation(_0x4f2a9c,_0x283c00){const _0x365b95=_0x4f9d2b,_0x3e2e3f={'kEDxX':function(_0x3a4f51,_0x49c17c){return _0x3a4f51===_0x49c17c;},'bUOjJ':function(_0x540183,_0x528bbf){return _0x540183<_0x528bbf;},'yzRkD':function(_0x50b808,_0x21f22a){return _0x50b808===_0x21f22a;},'OwaGJ':function(_0x3adb08,_0x594653){return _0x3adb08+_0x594653;}};if(_0x3e2e3f['kEDxX'](redirectableStatusCodes['indexOf'](_0x4f2a9c),-0x1))return null;for(let _0x9e5f85=0x0;_0x3e2e3f[_0x365b95(0x88)](_0x9e5f85,_0x283c00[_0x365b95(0xce)]);_0x9e5f85+=0x2){if(_0x3e2e3f[_0x365b95(0x9f)](_0x283c00[_0x9e5f85][_0x365b95(0xce)],0x8)&&util[_0x365b95(0xad)](_0x283c00[_0x9e5f85])===_0x365b95(0xb1))return _0x283c00[_0x3e2e3f[_0x365b95(0xc8)](_0x9e5f85,0x1)];}}function shouldRemoveHeader(_0x443039,_0xbc2741,_0xcb6c1b){const _0x304f34=_0x4f9d2b,_0x3710b6={'kKtma':function(_0x1d6e11,_0x403cc7){return _0x1d6e11!==_0x403cc7;},'xftNB':_0x304f34(0xb2),'ywZaE':function(_0x3c8e0b,_0x3e9bef){return _0x3c8e0b===_0x3e9bef;},'sIaXt':'cookie','RKDFK':_0x304f34(0x8f)};if(_0x443039['length']===0x4)return util[_0x304f34(0xad)](_0x443039)===_0x304f34(0xab);if(_0xbc2741&&util[_0x304f34(0xad)](_0x443039)['startsWith']('content-'))return!![];if(_0xcb6c1b&&(_0x443039[_0x304f34(0xce)]===0xd||_0x443039[_0x304f34(0xce)]===0x6||_0x443039['length']===0x13)){if(_0x3710b6['kKtma'](_0x3710b6[_0x304f34(0x9a)],_0x304f34(0xb2)))this[_0x304f34(0xb8)][_0x304f34(0xb7)](new _0x2f2fd4(_0x304f34(0xd4)));else{const _0x43c02a=util['headerNameToString'](_0x443039);return _0x43c02a==='authorization'||_0x3710b6['ywZaE'](_0x43c02a,_0x3710b6[_0x304f34(0xc3)])||_0x3710b6[_0x304f34(0xb3)](_0x43c02a,_0x3710b6['RKDFK']);}}return![];}function cleanRequestHeaders(_0x280884,_0x42c519,_0x557e8c){const _0x37cead=_0x4f9d2b,_0x37f7a2={'eWuHF':_0x37cead(0xd7),'KaXxE':_0x37cead(0xba),'yEZbp':function(_0x1e0e8d,_0x58da70){return _0x1e0e8d===_0x58da70;},'ZfTCe':'cjFjy','DmOuI':function(_0x1f6d85,_0x5029f3){return _0x1f6d85==_0x5029f3;},'NJJge':_0x37cead(0xb0)},_0x2e74cd=[];if(Array[_0x37cead(0xd0)](_0x280884))for(let _0x5eedfb=0x0;_0x5eedfb<_0x280884[_0x37cead(0xce)];_0x5eedfb+=0x2){!shouldRemoveHeader(_0x280884[_0x5eedfb],_0x42c519,_0x557e8c)&&_0x2e74cd[_0x37cead(0x96)](_0x280884[_0x5eedfb],_0x280884[_0x5eedfb+0x1]);}else{if(_0x280884&&typeof _0x280884===_0x37f7a2[_0x37cead(0x98)])for(const _0x5e479b of Object[_0x37cead(0xb4)](_0x280884)){!shouldRemoveHeader(_0x5e479b,_0x42c519,_0x557e8c)&&_0x2e74cd['push'](_0x5e479b,_0x280884[_0x5e479b]);}else _0x37f7a2['yEZbp'](_0x37cead(0x95),_0x37f7a2['ZfTCe'])?(this[_0x37cead(0xa9)]['method']=_0x37f7a2['eWuHF'],this['opts'][_0x37cead(0xa6)]=null):assert(_0x37f7a2[_0x37cead(0x93)](_0x280884,null),_0x37f7a2[_0x37cead(0xb6)]);}return _0x2e74cd;}module['exports']=RedirectHandler;