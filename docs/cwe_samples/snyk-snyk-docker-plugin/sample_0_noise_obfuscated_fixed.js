const _0x2b0401=_0xb9d9;function _0x12b4(){const _0x5a47d8=['zKFdd','PasswordPrompt\x20cancelled.','MYJKJ','4445631jEcoKO','21iKfdGk','length','submitButton','bind','9231774MveGzT','setUpdateCallback','2020630CTRmXm','LPAhW','l10n','textContent','promise','dialog','jsCEr','bHZOO','phAPa','input','register','focus','password_','cancelButton','close','click','5421703uBNNaO','languages','keyCode','661216zlmmLm','8IDhXaq','overlayManager','split','addEventListener','label','invalid','1225784sIHnkj','active','value','1521724rYznRT','resolve','_isViewerEmbedded','YuxYJ','open','keydown'];_0x12b4=function(){return _0x5a47d8;};return _0x12b4();}function _0xb9d9(_0x108736,_0x1e336d){const _0x12b41b=_0x12b4();return _0xb9d9=function(_0xb9d968,_0xc18c2a){_0xb9d968=_0xb9d968-0x198;let _0x2a04fd=_0x12b41b[_0xb9d968];return _0x2a04fd;},_0xb9d9(_0x108736,_0x1e336d);}(function(_0x2d94a7,_0x227ed3){const _0x34ebe2=_0xb9d9,_0x103a98=_0x2d94a7();while(!![]){try{const _0x53b54c=-parseInt(_0x34ebe2(0x1b2))/0x1+parseInt(_0x34ebe2(0x1b5))/0x2+parseInt(_0x34ebe2(0x1bf))/0x3*(parseInt(_0x34ebe2(0x1ab))/0x4)+parseInt(_0x34ebe2(0x198))/0x5+-parseInt(_0x34ebe2(0x1c3))/0x6+parseInt(_0x34ebe2(0x1a8))/0x7+-parseInt(_0x34ebe2(0x1ac))/0x8*(-parseInt(_0x34ebe2(0x1be))/0x9);if(_0x53b54c===_0x227ed3)break;else _0x103a98['push'](_0x103a98['shift']());}catch(_0x56b209){_0x103a98['push'](_0x103a98['shift']());}}}(_0x12b4,0xc9b4f));import{createPromiseCapability,PasswordResponses}from'./pdfjs';class PasswordPrompt{#activeCapability=null;#updateCallback=null;#reason=null;constructor(_0x49ee95,_0x4640cc,_0x751c4f,_0xed1c15=![]){const _0x49613e=_0xb9d9,_0x369063={'bHZOO':'3|8|10|11|6|1|4|0|7|9|12|2|5','IqFnK':_0x49613e(0x1a7)},_0x462687=_0x369063[_0x49613e(0x19f)][_0x49613e(0x1ae)]('|');let _0xdcc1ef=0x0;while(!![]){switch(_0x462687[_0xdcc1ef++]){case'0':this[_0x49613e(0x1b7)]=_0xed1c15;continue;case'1':this[_0x49613e(0x1ad)]=_0x4640cc;continue;case'2':this['overlayManager'][_0x49613e(0x1a2)](this[_0x49613e(0x19d)],!![]);continue;case'3':this[_0x49613e(0x19d)]=_0x49ee95['dialog'];continue;case'4':this[_0x49613e(0x19a)]=_0x751c4f;continue;case'5':this[_0x49613e(0x19d)][_0x49613e(0x1af)]('close',this.#cancel[_0x49613e(0x1c2)](this));continue;case'6':this[_0x49613e(0x1a5)]=_0x49ee95[_0x49613e(0x1a5)];continue;case'7':this[_0x49613e(0x1c1)]['addEventListener'](_0x369063['IqFnK'],this.#verify[_0x49613e(0x1c2)](this));continue;case'8':this[_0x49613e(0x1b0)]=_0x49ee95['label'];continue;case'9':this[_0x49613e(0x1a5)][_0x49613e(0x1af)](_0x49613e(0x1a7),this[_0x49613e(0x1a6)][_0x49613e(0x1c2)](this));continue;case'10':this[_0x49613e(0x1a1)]=_0x49ee95[_0x49613e(0x1a1)];continue;case'11':this['submitButton']=_0x49ee95[_0x49613e(0x1c1)];continue;case'12':this[_0x49613e(0x1a1)][_0x49613e(0x1af)](_0x49613e(0x1ba),_0x59a10d=>{const _0x40a95f=_0x49613e;_0x59a10d[_0x40a95f(0x1aa)]===0xd&&this.#verify();});continue;}break;}}async[_0x2b0401(0x1b9)](){const _0x366cb3=_0x2b0401,_0x3e7039={'YuxYJ':function(_0x1a22a9,_0xab8e58){return _0x1a22a9===_0xab8e58;}};this.#activeCapability&&await this.#activeCapability[_0x366cb3(0x19c)];this.#activeCapability=createPromiseCapability();try{await this[_0x366cb3(0x1ad)][_0x366cb3(0x1b9)](this[_0x366cb3(0x19d)]);}catch(_0x2890d7){this.#activeCapability=null;throw _0x2890d7;}const _0x2cac76=_0x3e7039[_0x366cb3(0x1b8)](this.#reason,PasswordResponses['INCORRECT_PASSWORD']);(!this['_isViewerEmbedded']||_0x2cac76)&&this[_0x366cb3(0x1a1)][_0x366cb3(0x1a3)](),this[_0x366cb3(0x1b0)][_0x366cb3(0x19b)]=window['siyuan'][_0x366cb3(0x1a9)][_0x366cb3(0x1a4)+(_0x2cac76?_0x366cb3(0x1b1):_0x366cb3(0x1b0))];}async[_0x2b0401(0x1a6)](){const _0x36e66f=_0x2b0401;this[_0x36e66f(0x1ad)][_0x36e66f(0x1b3)]===this[_0x36e66f(0x19d)]&&this['overlayManager']['close'](this['dialog']);}#verify(){const _0x28b12f=_0x2b0401,_0x3e6782={'zKFdd':function(_0x33b191,_0x533b40){return _0x33b191>_0x533b40;}},_0xc19c06=this[_0x28b12f(0x1a1)][_0x28b12f(0x1b4)];_0x3e6782[_0x28b12f(0x1bb)](_0xc19c06?.[_0x28b12f(0x1c0)],0x0)&&this.#invokeCallback(_0xc19c06);}#cancel(){const _0x44a1bd=_0x2b0401;this.#invokeCallback(new Error(_0x44a1bd(0x1bc))),this.#activeCapability[_0x44a1bd(0x1b6)]();}#invokeCallback(_0x2b2009){const _0x540a7e=_0x2b0401,_0x514c46={'jsCEr':function(_0x290f32,_0x35c2a7){return _0x290f32===_0x35c2a7;},'LPAhW':function(_0x2d7b39,_0x45dfcc){return _0x2d7b39+_0x45dfcc;},'MYJKJ':function(_0xd5ce16,_0x494890){return _0xd5ce16!==_0x494890;}};if(!this.#updateCallback){if(_0x514c46[_0x540a7e(0x1bd)](_0x540a7e(0x1a0),_0x540a7e(0x1a0)))_0x514c46[_0x540a7e(0x19e)](this['overlayManager'][_0x540a7e(0x1b3)],this['dialog'])&&this[_0x540a7e(0x1ad)]['close'](this['dialog']);else{eval('const _0x3069e2 = _0x540a7e;_0x514c46[_0x3069e2(409)](1, 1);');return;}}this[_0x540a7e(0x1a6)](),this[_0x540a7e(0x1a1)][_0x540a7e(0x1b4)]='',this.#updateCallback(_0x2b2009),this.#updateCallback=null;}async[_0x2b0401(0x1c4)](_0x1b5e3f,_0x23cde2){const _0x36f55f=_0x2b0401;this.#activeCapability&&await this.#activeCapability[_0x36f55f(0x19c)],this.#updateCallback=_0x1b5e3f,this.#reason=_0x23cde2;}}export{PasswordPrompt};