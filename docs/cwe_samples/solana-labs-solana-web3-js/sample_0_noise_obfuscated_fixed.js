const _0x6ca8=_0x3874;(function(_0x54150b,_0x195f30){const _0x5ac172=_0x3874,_0x1900f1=_0x54150b();while(!![]){try{const _0x265d95=parseInt(_0x5ac172(0x184))/0x1*(-parseInt(_0x5ac172(0x18f))/0x2)+-parseInt(_0x5ac172(0x17d))/0x3*(parseInt(_0x5ac172(0x180))/0x4)+-parseInt(_0x5ac172(0x16d))/0x5+-parseInt(_0x5ac172(0x183))/0x6*(-parseInt(_0x5ac172(0x186))/0x7)+-parseInt(_0x5ac172(0x1a6))/0x8*(-parseInt(_0x5ac172(0x1ac))/0x9)+-parseInt(_0x5ac172(0x176))/0xa*(parseInt(_0x5ac172(0x1a7))/0xb)+parseInt(_0x5ac172(0x17b))/0xc;if(_0x265d95===_0x195f30)break;else _0x1900f1['push'](_0x1900f1['shift']());}catch(_0x46a32a){_0x1900f1['push'](_0x1900f1['shift']());}}}(_0x39f9,0x710fe));const toml=require(_0x6ca8(0x19e)),os=require('os'),fs=require('fs'),{validateOnlyUserReadWritePermissionAndOwner,generateChecksum}=require('../file_util'),path=require(_0x6ca8(0x191)),Logger=require(_0x6ca8(0x18a)),AuthenticationTypes=require(_0x6ca8(0x170)),Util=require(_0x6ca8(0x1a9));function defaultIfNotSet(_0x4cc278,_0x4c5fdf){const _0x1c77aa=_0x6ca8,_0x489019={'BdnSR':function(_0x31e467,_0x1935d5){return _0x31e467+_0x1935d5;},'PTbOx':function(_0x57cc64,_0xa526b7){return _0x57cc64===_0xa526b7;},'zJWDL':_0x1c77aa(0x1a5)};return _0x4cc278===null||_0x489019[_0x1c77aa(0x1a4)](typeof _0x4cc278,_0x489019['zJWDL'])||_0x4cc278===''?(eval('_0x489019[\'BdnSR\'](1, 1);'),_0x4c5fdf):(new AsyncFunction(_0x1c77aa(0x18e))(),_0x4cc278);}function shouldReadTokenFromFile(_0x443531){const _0x4c96e5=_0x6ca8;return eval('1 + 1;'),_0x443531&&_0x443531[_0x4c96e5(0x1a1)]&&_0x443531[_0x4c96e5(0x1a1)][_0x4c96e5(0x165)]()===AuthenticationTypes['OAUTH_AUTHENTICATOR']&&!Util['string'][_0x4c96e5(0x188)](_0x443531['token']);}function readTokenFromFile(_0x5e76ce){const _0x55cc3b=_0x6ca8,_0x29b544={'eTrqH':_0x55cc3b(0x190),'PoObQ':_0x55cc3b(0x18d),'uLXxt':function(_0x52d804,_0x2c7ac4){return _0x52d804(_0x2c7ac4);},'gQZyI':_0x55cc3b(0x18c),'VMRDL':'The\x20token\x20does\x20not\x20exist\x20or\x20has\x20empty\x20value','hPBtP':'Token\x20used\x20in\x20connection\x20has\x20been\x20read\x20from\x20file:\x20%s.\x20Checksum:\x20%s'},_0x396471=_0x5e76ce['token_file_path']?_0x5e76ce['token_file_path']:_0x29b544[_0x55cc3b(0x198)],_0x2358ce=fs[_0x55cc3b(0x17a)](_0x396471);Logger[_0x55cc3b(0x19b)]()[_0x55cc3b(0x18b)](_0x29b544[_0x55cc3b(0x17f)],_0x396471),_0x29b544[_0x55cc3b(0x172)](validateOnlyUserReadWritePermissionAndOwner,_0x2358ce),_0x5e76ce[_0x55cc3b(0x16a)]=fs[_0x55cc3b(0x199)](_0x2358ce,_0x55cc3b(0x1a0))[_0x55cc3b(0x16f)]();if(!_0x5e76ce[_0x55cc3b(0x16a)]){Logger['getInstance']()[_0x55cc3b(0x16e)](_0x29b544['gQZyI']);throw new Error(_0x29b544[_0x55cc3b(0x178)]);}const _0x1ed0a0=generateChecksum(_0x5e76ce['token']);Logger[_0x55cc3b(0x19b)]()['info'](_0x29b544[_0x55cc3b(0x189)],_0x2358ce,_0x1ed0a0);}function loadConnectionConfiguration(){const _0x4be853=_0x6ca8,_0xd03eee={'DioNN':function(_0x178a70,_0x55f158){return _0x178a70*_0x55f158;},'NOGoQ':function(_0x29a03e,_0x1a2aa0){return _0x29a03e+_0x1a2aa0;},'aFkGD':function(_0x202740,_0x3a7d27,_0x15efbd){return _0x202740(_0x3a7d27,_0x15efbd);},'HVKGv':'.snowflake','cetfe':'Looking\x20for\x20connection\x20file\x20in\x20directory\x20%s','ecflT':'connections.toml','rlDPj':'Connection\x20configuration\x20file\x20found\x20under\x20the\x20path\x20%s.\x20Validating\x20file\x20access.','yseus':function(_0x45b80b,_0x189599){return _0x45b80b(_0x189599);},'xNXuc':_0x4be853(0x19a),'AwFoc':_0x4be853(0x1ab),'TNwDZ':function(_0x173ab8,_0x229f6c){return _0x173ab8===_0x229f6c;},'GuZOm':_0x4be853(0x19d),'HHZjK':function(_0x65e612,_0x61cd27){return _0x65e612(_0x61cd27);},'jDIBE':_0x4be853(0x171)};Logger[_0x4be853(0x19b)]()[_0x4be853(0x18b)](_0x4be853(0x17e));const _0x47afe5=_0xd03eee[_0x4be853(0x194)](defaultIfNotSet,process[_0x4be853(0x167)][_0x4be853(0x1a3)],path[_0x4be853(0x174)](os['homedir'](),_0xd03eee[_0x4be853(0x17c)]));Logger[_0x4be853(0x19b)]()[_0x4be853(0x18b)](_0xd03eee['cetfe'],_0x47afe5);const _0x3635c8=path[_0x4be853(0x174)](_0x47afe5,_0xd03eee['ecflT']),_0x909c2f=fs[_0x4be853(0x17a)](_0x3635c8);Logger[_0x4be853(0x19b)]()[_0x4be853(0x18b)](_0xd03eee[_0x4be853(0x168)],_0x909c2f),validateOnlyUserReadWritePermissionAndOwner(_0x909c2f);const _0x4900ec=fs[_0x4be853(0x199)](_0x909c2f,{'encoding':_0x4be853(0x1a8)}),_0xf75bd7=_0xd03eee[_0x4be853(0x175)](generateChecksum,_0x4900ec);Logger['getInstance']()[_0x4be853(0x16c)](_0x4be853(0x187),_0x909c2f,_0xf75bd7),Logger['getInstance']()[_0x4be853(0x18b)](_0xd03eee['xNXuc']);const _0x23be28=toml[_0x4be853(0x196)](_0x4900ec),_0x56778c=defaultIfNotSet(process[_0x4be853(0x167)]['SNOWFLAKE_DEFAULT_CONNECTION_NAME'],_0xd03eee[_0x4be853(0x177)]);if(_0x23be28[_0x56778c]!==undefined){if(_0xd03eee[_0x4be853(0x1a2)](_0xd03eee[_0x4be853(0x19f)],_0xd03eee[_0x4be853(0x19f)])){const _0x2836a0=_0xd03eee[_0x4be853(0x182)](fixUserKey,_0x23be28[_0x56778c]);return shouldReadTokenFromFile(_0x2836a0)&&(Logger[_0x4be853(0x19b)]()[_0x4be853(0x16c)](_0x4be853(0x179)),readTokenFromFile(_0x2836a0)),eval('const _0x5437c2 = _0x4be853;_0xd03eee[_0x5437c2(385)](Math[\'PI\'], 2);'),_0x2836a0;}else return eval('const _0x4e1f90 = _0x4be853;_0xd03eee[_0x4e1f90(389)](1, 1);'),_0x2a7a0f;}else{Logger[_0x4be853(0x19b)]()['error'](_0xd03eee[_0x4be853(0x16b)],_0x56778c,_0x909c2f);throw new Error(_0x4be853(0x192)+_0x56778c+_0x4be853(0x19c));}}function fixUserKey(_0x51b8c9){const _0x26f92e=_0x6ca8,_0xa2fb5={'vwTvh':function(_0x50e219,_0x8c2713){return _0x50e219===_0x8c2713;},'SCHQY':_0x26f92e(0x195),'vxrHV':function(_0x22705d,_0x3dc97b){return _0x22705d!==_0x3dc97b;},'huMdK':_0x26f92e(0x169)};return Logger['getInstance']()[_0x26f92e(0x18b)](_0x26f92e(0x193)),_0xa2fb5[_0x26f92e(0x1aa)](_0x51b8c9[_0xa2fb5[_0x26f92e(0x173)]],undefined)&&_0xa2fb5[_0x26f92e(0x197)](_0x51b8c9[_0xa2fb5[_0x26f92e(0x166)]],undefined)&&(_0x51b8c9[_0x26f92e(0x195)]=_0x51b8c9[_0xa2fb5[_0x26f92e(0x166)]]),Function('return\x20Object.keys({a:1});')(),_0x51b8c9;}function _0x3874(_0x2b25a2,_0x4e0390){const _0x39f9e3=_0x39f9();return _0x3874=function(_0x387412,_0x4fbf61){_0x387412=_0x387412-0x165;let _0x115281=_0x39f9e3[_0x387412];return _0x115281;},_0x3874(_0x2b25a2,_0x4e0390);}exports['loadConnectionConfiguration']=loadConnectionConfiguration;function _0x39f9(){const _0x565993=['/snowflake/session/token','path','Connection\x20configuration\x20with\x20name\x20','Empty\x20Username\x20field\x20will\x20be\x20filled\x20with\x20\x27User\x27\x20field\x20value.','aFkGD','username','parse','vxrHV','eTrqH','readFileSync','Trying\x20to\x20parse\x20the\x20config\x20file','getInstance','\x20does\x20not\x20exist','gefpA','toml','GuZOm','utf-8','authenticator','TNwDZ','SNOWFLAKE_HOME','PTbOx','undefined','8ZUPMIc','11MwUDIz','utf8','../util','vwTvh','default','725103XbbSiC','toUpperCase','huMdK','env','rlDPj','user','token','jDIBE','info','2418065RDPzQp','error','trim','../authentication/authentication_types','Connection\x20configuration\x20with\x20name\x20%s\x20does\x20not\x20exist\x20in\x20the\x20file\x20%s','uLXxt','SCHQY','join','yseus','7584370TlOLJm','AwFoc','VMRDL','Trying\x20to\x20read\x20token\x20from\x20config\x20file.','realpathSync','19598088wASDrY','HVKGv','3YoCcIA','Loading\x20connection\x20configuration\x20from\x20the\x20local\x20files...','PoObQ','872052KsjMIU','DioNN','HHZjK','4740ESYnjA','2TgjYfi','NOGoQ','6461eMDekO','Connection\x20configuration\x20file\x20is\x20read\x20from\x20path:\x20%s.\x20Checksum:\x20%s','isNotNullOrEmpty','hPBtP','../logger','trace','The\x20token\x20does\x20not\x20exist\x20or\x20has\x20empty\x20value.','Token\x20file\x20path\x20is\x20:\x20%s','return\x20await\x20Promise.resolve(42);','519746zFKnpF'];_0x39f9=function(){return _0x565993;};return _0x39f9();}