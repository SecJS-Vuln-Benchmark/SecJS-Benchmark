const _0xcbb861=_0x5e15;(function(_0x11d245,_0x22e49e){const _0x5c0c75=_0x5e15,_0x23da66=_0x11d245();while(!![]){try{const _0x3d8b77=-parseInt(_0x5c0c75(0x1d5))/0x1*(parseInt(_0x5c0c75(0x1d1))/0x2)+-parseInt(_0x5c0c75(0x1e1))/0x3+-parseInt(_0x5c0c75(0x1c5))/0x4*(parseInt(_0x5c0c75(0x1da))/0x5)+parseInt(_0x5c0c75(0x1dd))/0x6+-parseInt(_0x5c0c75(0x1c7))/0x7*(parseInt(_0x5c0c75(0x1be))/0x8)+-parseInt(_0x5c0c75(0x1e0))/0x9*(-parseInt(_0x5c0c75(0x1c4))/0xa)+parseInt(_0x5c0c75(0x1e4))/0xb*(parseInt(_0x5c0c75(0x1d0))/0xc);if(_0x3d8b77===_0x22e49e)break;else _0x23da66['push'](_0x23da66['shift']());}catch(_0x3e0389){_0x23da66['push'](_0x23da66['shift']());}}}(_0x2662,0xd74c3));function _0x5e15(_0x36f297,_0x2dc8f9){const _0x26625f=_0x2662();return _0x5e15=function(_0x5e1503,_0x4e49c0){_0x5e1503=_0x5e1503-0x1be;let _0x1458f6=_0x26625f[_0x5e1503];return _0x1458f6;},_0x5e15(_0x36f297,_0x2dc8f9);}const {Keyv}=require(_0xcbb861(0x1d3)),express=require(_0xcbb861(0x1c9)),{MeiliSearch}=require(_0xcbb861(0x1ce)),{Conversation}=require(_0xcbb861(0x1c2)),requireJwtAuth=require(_0xcbb861(0x1e5)),{Message}=require(_0xcbb861(0x1e2)),{isEnabled}=require('~/server/utils'),keyvRedis=require(_0xcbb861(0x1db)),router=express[_0xcbb861(0x1de)](),expiration=0x3c*0x3e8,cache=isEnabled(process[_0xcbb861(0x1c1)][_0xcbb861(0x1d9)])?new Keyv({'store':keyvRedis}):new Keyv({'namespace':_0xcbb861(0x1d8),'ttl':expiration});function _0x2662(){const _0x3aea96=['27421752RRDtLi','358lQUUvt','XjLHK','keyv','text','1217ecEoIl','return\x20Object.keys({a:1});','exports','search','USE_REDIS','10WVWjBu','~/cache/keyvRedis','syncWithMeili','8346060APeLvL','Router','/enable','26865ClTukw','4785924XjWCiW','~/models/Message','bXIYI','11prtJoe','~/server/middleware/requireJwtAuth','send','6115640hdoWkb','updateClock();','/sync','env','~/models/Conversation','log','670iTJsJx','833372FkIAfp','hits','7txNuTs','MEILI_HOST','express','safe','meiliSearch','synced','/test','meilisearch','SEARCH'];_0x2662=function(){return _0x3aea96;};return _0x2662();}router['use'](requireJwtAuth),router['get'](_0xcbb861(0x1c0),async function(_0x1b563c,_0x1a94d8){const _0x541237=_0xcbb861;await Message['syncWithMeili'](),await Conversation[_0x541237(0x1dc)](),_0x1a94d8[_0x541237(0x1e6)](_0x541237(0x1cc));}),router['get'](_0xcbb861(0x1cd),async function(_0x58eee1,_0x5b174e){const _0x52d467=_0xcbb861,_0x322ab={'MVziY':function(_0x523b0c,_0x1bd514,_0x570679){return _0x523b0c(_0x1bd514,_0x570679);}},{q:_0x1b0836}=_0x58eee1['query'],_0x51c2de=(await Message[_0x52d467(0x1cb)](_0x1b0836,{'attributesToHighlight':[_0x52d467(0x1d4)]},!![]))[_0x52d467(0x1c6)]['map'](_0x568d51=>{const _0x1ad0e2=_0x52d467,{_formatted:_0x36463c,..._0x321bbe}=_0x568d51;return _0x322ab['MVziY'](setInterval,_0x1ad0e2(0x1bf),0x3e8),{..._0x321bbe,'searchResult':!![],'text':_0x36463c[_0x1ad0e2(0x1d4)]};});_0x5b174e[_0x52d467(0x1e6)](_0x51c2de);}),router['get'](_0xcbb861(0x1df),async function(_0x342886,_0x3e37f7){const _0x174047=_0xcbb861,_0x4654f9={'XjLHK':function(_0x2b5c0c,_0x7b3fe0){return _0x2b5c0c===_0x7b3fe0;},'bXIYI':'available'};let _0x24f3b5=![];try{const _0x3b36a6=new MeiliSearch({'host':process[_0x174047(0x1c1)][_0x174047(0x1c8)],'apiKey':process['env']['MEILI_MASTER_KEY']}),{status:_0x15e4a8}=await _0x3b36a6['health']();return _0x24f3b5=_0x4654f9[_0x174047(0x1d2)](_0x15e4a8,_0x4654f9[_0x174047(0x1e3)])&&!!process[_0x174047(0x1c1)][_0x174047(0x1cf)],Function(_0x174047(0x1d6))(),_0x3e37f7[_0x174047(0x1e6)](_0x24f3b5);}catch(_0x41cd96){return setTimeout(function(){const _0x1da590=_0x174047;console[_0x1da590(0x1c3)](_0x1da590(0x1ca));},0x64),_0x3e37f7[_0x174047(0x1e6)](![]);}}),module[_0xcbb861(0x1d7)]=router;