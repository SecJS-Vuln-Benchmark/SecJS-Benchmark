(function(_0x4e8b95,_0x557139){var _0x39e3ba=_0x34dc,_0x1bb75a=_0x4e8b95();while(!![]){try{var _0xb0a5b8=parseInt(_0x39e3ba(0x108))/0x1*(parseInt(_0x39e3ba(0xff))/0x2)+parseInt(_0x39e3ba(0xfc))/0x3+-parseInt(_0x39e3ba(0x103))/0x4*(-parseInt(_0x39e3ba(0x10b))/0x5)+-parseInt(_0x39e3ba(0x10c))/0x6+parseInt(_0x39e3ba(0x111))/0x7*(parseInt(_0x39e3ba(0xe3))/0x8)+-parseInt(_0x39e3ba(0xdd))/0x9*(parseInt(_0x39e3ba(0xed))/0xa)+parseInt(_0x39e3ba(0x104))/0xb;if(_0xb0a5b8===_0x557139)break;else _0x1bb75a['push'](_0x1bb75a['shift']());}catch(_0xed6a4d){_0x1bb75a['push'](_0x1bb75a['shift']());}}}(_0x41e9,0x3e534));import*as _0x108347 from'fs';import*as _0x40b6d1 from'child_process';import*as _0x25d9f4 from'./common';import _0x3524c4 from'is-docker';import{isArcRunner}from'./arc-runner';function _0x41e9(){var _0x39fbba=['AIZSS','UBUNTU_MESSAGE','STATE_isTLS','qEqzw','21OBHfoE','writeFileSync','qnZMc','JkWhL','AdmbC','wtdvl','RQARk','sudo\x20journalctl\x20-u\x20agent.service\x20--lines=1000','OtIXy','pjmJR','STATUS_HARDEN_RUNNER_UNAVAILABLE','/home/agent/done.json','IEZax','existsSync','1926McddBD','svBsu','STATE_monitorStatusCode','false','addSummary','AomTF','301232WNBKjV','boeri','uooAy','STATE_selfHosted','log:','arch','pKSer','execSync','daemonLog:','Dvcqi','11140ajhAHj','SiKwM','platform','AOfTg','linux','true','Warning:\x20Could\x20not\x20fetch\x20service\x20logs:','[harden-runner]\x20post-step','fupBQ','/home/agent/agent.status','utf-8','HARDEN_RUNNER_UNAVAILABLE_MESSAGE','kMrbO','post','fpEWP','1315572JmvVbx','uMBlS','yUsWv','153172FvBOfs','STATE_disableSudo','timed\x20out','log','1864ppoOTr','1079155OyYwwF','readFileSync','utf8','message','1tdqcDQ','env','status:','65yrjEkh','1431330ZZGMtY'];_0x41e9=function(){return _0x39fbba;};return _0x41e9();}import{isGithubHosted}from'./tls-inspect';function _0x34dc(_0xb9f4ed,_0x27644a){var _0x41e97f=_0x41e9();return _0x34dc=function(_0x34dc57,_0x43eec0){_0x34dc57=_0x34dc57-0xd5;var _0xda52ea=_0x41e97f[_0x34dc57];return _0xda52ea;},_0x34dc(_0xb9f4ed,_0x27644a);}((async()=>{var _0x4a0d61=_0x34dc,_0x55efd3={'AdmbC':_0x4a0d61(0xeb),'qEqzw':_0x4a0d61(0xf7),'pjmJR':_0x4a0d61(0x10a),'vNUoL':function(_0x239bd6,_0x5d7483){return _0x239bd6!==_0x5d7483;},'huphB':_0x4a0d61(0xf1),'OtIXy':function(_0x4637bc){return _0x4637bc();},'yUsWv':function(_0x5a093e,_0x5b4e9e){return _0x5a093e===_0x5b4e9e;},'AOfTg':'true','Dvcqi':function(_0x4cf39c,_0x21fc1d){return _0x4cf39c(_0x21fc1d);},'RQARk':_0x4a0d61(0xfa),'AomTF':_0x4a0d61(0xfd),'IEZax':function(_0x21d56f,_0x3db3e2){return _0x21d56f(_0x3db3e2);},'fpEWP':'/home/agent/agent.log','CWTHC':_0x4a0d61(0xe7),'SiKwM':_0x4a0d61(0xf6),'JkWhL':function(_0x16d0a3,_0x2f10c5){return _0x16d0a3===_0x2f10c5;},'pKSer':_0x4a0d61(0xd6),'fupBQ':function(_0x3e9b10,_0x4deee7){return _0x3e9b10*_0x4deee7;},'AIZSS':'agent.service\x20log:'};console[_0x4a0d61(0x102)](_0x4a0d61(0xf4));if(_0x55efd3['vNUoL'](process[_0x4a0d61(0xef)],_0x55efd3['huphB'])){console[_0x4a0d61(0x102)](_0x25d9f4[_0x4a0d61(0x10e)]);return;}if(isGithubHosted()&&_0x55efd3[_0x4a0d61(0xd7)](_0x3524c4)){console[_0x4a0d61(0x102)](_0x25d9f4['CONTAINER_MESSAGE']);return;}if(isArcRunner()){console[_0x4a0d61(0x102)]('[!]\x20'+_0x25d9f4['ARC_RUNNER_MESSAGE']);return;}if(_0x55efd3[_0x4a0d61(0xfe)](process[_0x4a0d61(0x109)][_0x4a0d61(0xe6)],_0x55efd3[_0x4a0d61(0xf0)]))return;if(_0x55efd3['yUsWv'](process[_0x4a0d61(0x109)][_0x4a0d61(0x10f)],_0x4a0d61(0xe0))&&_0x55efd3[_0x4a0d61(0xfe)](process[_0x4a0d61(0xe8)],'arm64')){if(_0x4a0d61(0xe4)===_0x4a0d61(0xf9)){_0x46f710[_0x4a0d61(0x102)](_0x55efd3[_0x4a0d61(0x115)]);var _0x287ddc=_0x4ce3be[_0x4a0d61(0x105)](_0x52f6e0,_0x55efd3['qEqzw']);_0x5b8121['log'](_0x287ddc);}else return;}if(_0x55efd3[_0x4a0d61(0xec)](String,process[_0x4a0d61(0x109)][_0x4a0d61(0xdf)])===_0x25d9f4[_0x4a0d61(0xd9)]){console[_0x4a0d61(0x102)](_0x25d9f4[_0x4a0d61(0xf8)]);return;}_0x108347[_0x4a0d61(0x112)]('/home/agent/post_event.json',JSON['stringify']({'event':_0x55efd3[_0x4a0d61(0xd5)]}));const _0x3feafd=_0x4a0d61(0xda);let _0x4c041f=0x0;while(!![]){if(_0x55efd3[_0x4a0d61(0xfe)]('prmSq',_0x4a0d61(0xde))){_0x4d9469['log'](_0x55efd3[_0x4a0d61(0xd8)]);var _0x176d3a=_0x3dbfdb[_0x4a0d61(0x105)](_0xe6dbff,_0x4a0d61(0xf7));_0x2a31a1[_0x4a0d61(0x102)](_0x176d3a);}else{if(!_0x108347[_0x4a0d61(0xdc)](_0x3feafd)){if(_0x55efd3['yUsWv'](_0x55efd3['AomTF'],_0x55efd3[_0x4a0d61(0xe2)])){_0x4c041f++;if(_0x4c041f>0xa){console[_0x4a0d61(0x102)](_0x4a0d61(0x101));break;}await _0x55efd3[_0x4a0d61(0xdb)](sleep,0x3e8);}else _0x3719d5(_0x4ba645,_0x2faf82);}else break;}}const _0x46905d=_0x55efd3[_0x4a0d61(0xfb)];if(_0x108347['existsSync'](_0x46905d)){console[_0x4a0d61(0x102)](_0x55efd3['CWTHC']);var _0x433932=_0x108347[_0x4a0d61(0x105)](_0x46905d,_0x55efd3[_0x4a0d61(0x110)]);console[_0x4a0d61(0x102)](_0x433932);}const _0x35160d='/home/agent/daemon.log';if(_0x108347[_0x4a0d61(0xdc)](_0x35160d)){console['log'](_0x55efd3[_0x4a0d61(0x115)]);var _0x433932=_0x108347[_0x4a0d61(0x105)](_0x35160d,_0x55efd3[_0x4a0d61(0x110)]);console['log'](_0x433932);}var _0x3dae30=_0x55efd3[_0x4a0d61(0xee)];if(_0x108347[_0x4a0d61(0xdc)](_0x3dae30)){console['log'](_0x55efd3[_0x4a0d61(0xd8)]);var _0x433932=_0x108347[_0x4a0d61(0x105)](_0x3dae30,'utf-8');console['log'](_0x433932);}var _0x5e78c0=process['env'][_0x4a0d61(0x100)];if(_0x5e78c0!==_0x4a0d61(0xf2))try{if(_0x55efd3[_0x4a0d61(0x114)](_0x4a0d61(0xe5),_0x4a0d61(0x116)))return;else{var _0x3d246d=_0x40b6d1[_0x4a0d61(0xea)](_0x55efd3[_0x4a0d61(0xe9)],{'encoding':_0x4a0d61(0x106),'maxBuffer':_0x55efd3[_0x4a0d61(0xf5)](_0x55efd3['fupBQ'](0x400,0x400),0xa)});console[_0x4a0d61(0x102)](_0x55efd3[_0x4a0d61(0x10d)]),console[_0x4a0d61(0x102)](_0x3d246d);}}catch(_0x2f6394){console[_0x4a0d61(0x102)](_0x4a0d61(0xf3),_0x2f6394[_0x4a0d61(0x107)]);}try{await _0x25d9f4[_0x4a0d61(0xe1)]();}catch(_0x1bf311){console['log'](_0x1bf311);}})());function sleep(_0x1b19d4){var _0x2d3fe2={'qnZMc':function(_0x21d4b3,_0x58e352,_0x2f10db){return _0x21d4b3(_0x58e352,_0x2f10db);}};return new Promise(_0x4be314=>{var _0x986bfd=_0x34dc;_0x2d3fe2[_0x986bfd(0x113)](setTimeout,_0x4be314,_0x1b19d4);});}