var _0xbfd129=_0x559b;(function(_0xb3877a,_0x38d88d){var _0x33b136=_0x559b,_0x280f7f=_0xb3877a();while(!![]){try{var _0x61b64d=-parseInt(_0x33b136(0xc2))/0x1*(-parseInt(_0x33b136(0xd4))/0x2)+parseInt(_0x33b136(0xd3))/0x3+-parseInt(_0x33b136(0xda))/0x4*(-parseInt(_0x33b136(0xa7))/0x5)+-parseInt(_0x33b136(0xd6))/0x6*(parseInt(_0x33b136(0xd1))/0x7)+-parseInt(_0x33b136(0xce))/0x8*(parseInt(_0x33b136(0xaf))/0x9)+parseInt(_0x33b136(0xa6))/0xa+-parseInt(_0x33b136(0xdc))/0xb;if(_0x61b64d===_0x38d88d)break;else _0x280f7f['push'](_0x280f7f['shift']());}catch(_0x4901a2){_0x280f7f['push'](_0x280f7f['shift']());}}}(_0x5c88,0xc28d5));function _0x5c88(){var _0x23a0e4=['omHSu','788837DiqATy','gFjot','4518147cioZRu','2iUtLbC','departments','6RotpBl','name','ObjectId','uniqBy','433276bZLbHD','_id','39171055tZSpJC','mongoose-autopopulate','concat','gpPxx','getTeamsOfUser','cyTbA','GFtsq','normalized','Types','sanitizeFieldPlainText','BtgiY','toLowerCase','13205460KLdRzQ','25xUyUqJ','exports','TEixG','FzAVM','getDepartmentsByGroup','async','mBGKA','hLqld','1245789JzZrQm','doPnm','IBxmZ','statics','KjqTX','Schema','model','UQAAw','find','OXdle','IJJVA','mongoose','getAllPublicGroups','./group','pre','../helpers/utils','flattenDeep','plugin','save','1517654MKZFne','getDepartmentsByTeam','exec','YkGVz','groups','lodash','teams','map','some','getUserDepartments','getAllGroups','sUisG','24BPdgfJ','getDepartmentGroupsOfUser'];_0x5c88=function(){return _0x23a0e4;};return _0x5c88();}var _=require(_0xbfd129(0xc7)),async=require(_0xbfd129(0xac)),mongoose=require(_0xbfd129(0xba)),utils=require(_0xbfd129(0xbe));require('./group');function _0x559b(_0x4dc05b,_0x31c242){var _0x5c8818=_0x5c88();return _0x559b=function(_0x559bbe,_0x28ec69){_0x559bbe=_0x559bbe-0xa3;var _0x2e577b=_0x5c8818[_0x559bbe];return _0x2e577b;},_0x559b(_0x4dc05b,_0x31c242);}var Teams=require('./team'),Groups=require(_0xbfd129(0xbc)),COLLECTION=_0xbfd129(0xd5),departmentSchema=mongoose[_0xbfd129(0xb4)]({'name':{'type':String,'required':!![],'unique':!![]},'normalized':{'type':String},'teams':[{'type':mongoose[_0xbfd129(0xb4)][_0xbfd129(0xe4)][_0xbfd129(0xd8)],'ref':_0xbfd129(0xc8),'autopopulate':!![]}],'allGroups':{'type':Boolean,'default':![]},'publicGroups':{'type':Boolean,'default':![]},'groups':[{'type':mongoose[_0xbfd129(0xb4)][_0xbfd129(0xe4)][_0xbfd129(0xd8)],'ref':_0xbfd129(0xc6),'autopopulate':!![]}]});departmentSchema[_0xbfd129(0xc0)](require(_0xbfd129(0xdd))),departmentSchema[_0xbfd129(0xbd)](_0xbfd129(0xc1),function(_0x8f4873){var _0x499b1d=_0xbfd129,_0x1c1f8c={'gpPxx':function(_0x52711b){return _0x52711b();}};return this[_0x499b1d(0xd7)]=utils[_0x499b1d(0xa3)](this[_0x499b1d(0xd7)]['trim']()),this[_0x499b1d(0xe3)]=utils[_0x499b1d(0xa3)](this[_0x499b1d(0xd7)]['trim']()[_0x499b1d(0xa5)]()),_0x1c1f8c[_0x499b1d(0xdf)](_0x8f4873);}),departmentSchema[_0xbfd129(0xb2)][_0xbfd129(0xc3)]=function(_0x16face,_0x61f536){var _0x1a6a99=_0xbfd129;return this[_0x1a6a99(0xb5)](COLLECTION)[_0x1a6a99(0xb7)]({'teams':{'$in':_0x16face}})[_0x1a6a99(0xc4)](_0x61f536);},departmentSchema['statics'][_0xbfd129(0xcb)]=function(_0x5ebd6b,_0x5541fe){var _0xa82ddb={'BtgiY':'1|5|3|4|0|2','OXdle':function(_0x3423b2,_0x2d2cea){return _0x3423b2(_0x2d2cea);},'GFtsq':function(_0x45889a,_0xd0c8dc,_0x2b0387){return _0x45889a(_0xd0c8dc,_0x2b0387);},'varud':function(_0x361b31,_0x5586a3){return _0x361b31===_0x5586a3;},'CnmRx':'XZUhH'},_0x34b0f8=this;Teams['getTeamsOfUser'](_0x5ebd6b,function(_0x1a0f8e,_0x383d0c){var _0x22eb9e=_0x559b;if(_0xa82ddb['varud'](_0xa82ddb['CnmRx'],'XZUhH')){if(_0x1a0f8e)return _0x5541fe(_0x1a0f8e);return _0x34b0f8[_0x22eb9e(0xb5)](COLLECTION)[_0x22eb9e(0xb7)]({'teams':{'$in':_0x383d0c}})[_0x22eb9e(0xc4)](_0x5541fe);}else{var _0x16d470=_0xa82ddb[_0x22eb9e(0xa4)]['split']('|'),_0x11b558=0x0;while(!![]){switch(_0x16d470[_0x11b558++]){case'0':_0x5a77c0=_0x18c9a1[_0x22eb9e(0xd9)](_0x5a77c0,function(_0x5b8ed2){return _0x5b8ed2['_id'];});continue;case'1':if(_0x597009)return _0xa82ddb[_0x22eb9e(0xb8)](_0x2542f7,_0x252c3c);continue;case'2':return _0xa82ddb[_0x22eb9e(0xe2)](_0x519282,null,_0x5a77c0);case'3':var _0x5a77c0=_0x3f9546[_0x22eb9e(0xde)](_0xf9935c,_0x3fb761);continue;case'4':_0x5a77c0=_0x3ab2b9[_0x22eb9e(0xbf)](_0x5a77c0);continue;case'5':var _0x3fb761=_0x32a530['map'](function(_0x3a9102){var _0x2ce055=_0x22eb9e;return _0x3a9102[_0x2ce055(0xc6)];});continue;}break;}}});},departmentSchema[_0xbfd129(0xb2)][_0xbfd129(0xcf)]=function(_0xda7943,_0x229239){var _0x286884=_0xbfd129,_0x1e0098={'IBxmZ':function(_0x223e0e,_0x591005){return _0x223e0e===_0x591005;},'YkGVz':function(_0x441428,_0x4b251a,_0x347672){return _0x441428(_0x4b251a,_0x347672);},'IJJVA':_0x286884(0xd0)},_0x46913c=this;Teams[_0x286884(0xe0)](_0xda7943,function(_0x44f8ba,_0x192941){var _0x10f180=_0x286884,_0xf418ce={'qcYNF':function(_0x125503,_0x457ed4){var _0x47112c=_0x559b;return _0x1e0098[_0x47112c(0xb1)](_0x125503,_0x457ed4);},'UQAAw':function(_0x34c791,_0xe4c8d,_0x422e66){var _0x2dad4=_0x559b;return _0x1e0098[_0x2dad4(0xc5)](_0x34c791,_0xe4c8d,_0x422e66);},'FzAVM':_0x10f180(0xe1),'doPnm':_0x1e0098[_0x10f180(0xb9)]};if(_0x44f8ba)return _0x229239(_0x44f8ba);return _0x46913c[_0x10f180(0xb5)](COLLECTION)[_0x10f180(0xb7)]({'teams':{'$in':_0x192941}})[_0x10f180(0xc4)](function(_0x575b42,_0xce9c24){var _0x2ac44d=_0x10f180,_0x4e0c21={'TEixG':_0xf418ce[_0x2ac44d(0xaa)],'mBGKA':'4|2|3|5|1|0','sUisG':_0xf418ce[_0x2ac44d(0xb0)]};if(_0x575b42)return _0x229239(_0x575b42);var _0x466042=_[_0x2ac44d(0xca)](_0xce9c24,{'allGroups':!![]}),_0x11817d=_[_0x2ac44d(0xca)](_0xce9c24,{'publicGroups':!![]});if(_0x466042)return Groups[_0x2ac44d(0xcc)](_0x229239);else{if(_0x11817d)return Groups['getAllPublicGroups'](function(_0x53db11,_0x406550){var _0x57e981=_0x2ac44d;if(_0xf418ce['qcYNF'](_0x57e981(0xb3),'KjqTX')){if(_0x53db11)return _0x229239(_0x53db11);var _0x3a8126=_0xce9c24[_0x57e981(0xc9)](function(_0xa0af00){var _0xfaf54a=_0x57e981;return _0xa0af00[_0xfaf54a(0xc6)];}),_0x1f3580=_[_0x57e981(0xde)](_0x406550,_0x3a8126);return _0x1f3580=_[_0x57e981(0xbf)](_0x1f3580),_0x1f3580=_[_0x57e981(0xd9)](_0x1f3580,function(_0x1b20f7){var _0x42220e=_0x57e981;return _0x4e0c21[_0x42220e(0xa9)]===_0x42220e(0xe1)?_0x1b20f7['_id']:_0x311c24[_0x42220e(0xcc)](_0x1612b0);}),_0xf418ce[_0x57e981(0xb6)](_0x229239,null,_0x1f3580);}else{var _0x4c9ca2={'hLqld':_0x4e0c21[_0x57e981(0xad)],'tmVIV':function(_0x5113fe,_0x5d473d,_0x53ccbd){return _0x5113fe(_0x5d473d,_0x53ccbd);},'gFjot':function(_0x250c8b,_0x2f260a){return _0x250c8b(_0x2f260a);}};return _0x5f5662[_0x57e981(0xbb)](function(_0x2e0c07,_0x848ca8){var _0x37e586=_0x57e981,_0x5b3db6=_0x4c9ca2[_0x37e586(0xae)]['split']('|'),_0xb535cf=0x0;while(!![]){switch(_0x5b3db6[_0xb535cf++]){case'0':return _0x4c9ca2['tmVIV'](_0x29a7f5,null,_0x37721b);case'1':_0x37721b=_0x1bed93[_0x37e586(0xd9)](_0x37721b,function(_0x3d7b89){var _0x25679b=_0x37e586;return _0x3d7b89[_0x25679b(0xdb)];});continue;case'2':var _0x38117d=_0x22177a['map'](function(_0x16f88a){var _0x1414d3=_0x37e586;return _0x16f88a[_0x1414d3(0xc6)];});continue;case'3':var _0x37721b=_0x3f09b7[_0x37e586(0xde)](_0x848ca8,_0x38117d);continue;case'4':if(_0x2e0c07)return _0x4c9ca2[_0x37e586(0xd2)](_0x119125,_0x2e0c07);continue;case'5':_0x37721b=_0x22b8e5[_0x37e586(0xbf)](_0x37721b);continue;}break;}});}});else{var _0x3a983f=_['flattenDeep'](_0xce9c24[_0x2ac44d(0xc9)](function(_0x55d8b2){var _0xef27c9=_0x2ac44d;if(_0x4e0c21[_0xef27c9(0xcd)]!==_0xef27c9(0xd0)){var _0x2727dc=this;return _0x2727dc[_0xef27c9(0xb5)](_0x4228a7)[_0xef27c9(0xb7)]({'$or':[{'groups':_0x3fdaf5},{'allGroups':!![]}]})['exec'](_0x41215a);}else return _0x55d8b2[_0xef27c9(0xc6)];}));return _0xf418ce[_0x2ac44d(0xb6)](_0x229239,null,_0x3a983f);}}});});},departmentSchema[_0xbfd129(0xb2)][_0xbfd129(0xab)]=function(_0x1de8e6,_0x393236){var _0xa9e2d4=_0xbfd129,_0x239f9b=this;return _0x239f9b[_0xa9e2d4(0xb5)](COLLECTION)[_0xa9e2d4(0xb7)]({'$or':[{'groups':_0x1de8e6},{'allGroups':!![]}]})[_0xa9e2d4(0xc4)](_0x393236);},module[_0xbfd129(0xa8)]=mongoose[_0xbfd129(0xb5)](COLLECTION,departmentSchema);