var _0xbbc473=_0x5b35;(function(_0x5897e1,_0x1c97d4){var _0x49fd0c=_0x5b35,_0x5e1c59=_0x5897e1();while(!![]){try{var _0x31d34f=-parseInt(_0x49fd0c(0x1ed))/0x1+-parseInt(_0x49fd0c(0x1a2))/0x2*(-parseInt(_0x49fd0c(0x230))/0x3)+parseInt(_0x49fd0c(0x232))/0x4+-parseInt(_0x49fd0c(0x23b))/0x5*(-parseInt(_0x49fd0c(0x21d))/0x6)+parseInt(_0x49fd0c(0x1f2))/0x7+-parseInt(_0x49fd0c(0x1f5))/0x8+parseInt(_0x49fd0c(0x20f))/0x9;if(_0x31d34f===_0x1c97d4)break;else _0x5e1c59['push'](_0x5e1c59['shift']());}catch(_0x46362c){_0x5e1c59['push'](_0x5e1c59['shift']());}}}(_0x59fa,0x58f72));var async=require(_0xbbc473(0x236)),mongoose=require('mongoose'),winston=require(_0xbbc473(0x213)),bcrypt=require(_0xbbc473(0x1bd)),_=require(_0xbbc473(0x228)),Chance=require(_0xbbc473(0x1e3));const utils=require(_0xbbc473(0x1c8));require(_0xbbc473(0x234));var SALT_FACTOR=0xa,COLLECTION='accounts',userSchema=mongoose[_0xbbc473(0x1c0)]({'username':{'type':String,'required':!![],'unique':!![],'lowercase':!![]},'password':{'type':String,'required':!![],'select':![]},'fullname':{'type':String,'required':!![],'index':!![]},'email':{'type':String,'required':!![],'unique':!![],'lowercase':!![]},'role':{'type':mongoose[_0xbbc473(0x1c0)][_0xbbc473(0x1a5)][_0xbbc473(0x1ee)],'ref':_0xbbc473(0x286),'required':!![]},'lastOnline':Date,'title':String,'image':String,'resetPassHash':{'type':String,'select':![]},'resetPassExpire':{'type':Date,'select':![]},'tOTPKey':{'type':String,'select':![]},'tOTPPeriod':{'type':Number,'select':![]},'resetL2AuthHash':{'type':String,'select':![]},'resetL2AuthExpire':{'type':Date,'select':![]},'hasL2Auth':{'type':Boolean,'required':!![],'default':![]},'accessToken':{'type':String,'sparse':!![],'select':![]},'preferences':{'tourCompleted':{'type':Boolean,'default':![]},'autoRefreshTicketGrid':{'type':Boolean,'default':!![]},'openChatWindows':[{'type':String,'default':[]}]},'deleted':{'type':Boolean,'default':![]}});function _0x59fa(){var _0xeeed1=['role','whliG','CYBif','jyhxP','VDecG','toObject','meciE','pre','XXVqg','getUserByL2ResetHash','joRUz','getSetting','public-account-created','GdkyN','JfUCR','save','split','getUsersByRoles','+resetPassHash\x20+resetPassExpire','hPXsV','gonJo','warn','findOne','SlJjG','exports','ZfuSu','methods','eMLZj','gCJac','applyMaxShortTextLength','_id','model','isArray','uPtRp','where','EeiXS','rVYpR','isEmpty','Ciwyn','+password','push','nNKsP','roles','sendMail','softDelete','getUser','accessToken','render','role:user:default','xSHSM','vwpYW','uFvYe','bQAMg','dAdbu','eXKyH','Pguit','BIiNY','YTunS','2mSclwb','genSalt','sGMaG','Types','removeDeviceToken','WVRvQ','Invalid\x20Hash\x20-\x20UserSchema.GetUserByResetHash()','Invalid\x20Hash\x20-\x20UserSchema.GetUserByL2ResetHash()','Invalid\x20convoId','getUserByResetHash','lYtfJ','thirty-two','zEMGE','yqXGT','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890','encode','sortBy','password','JDBuI','getAdmins','UPgdd','path','zdNoa','OitOW','Username\x20Already\x20Exists','lnIeg','then','bcrypt','isObject','FBDdf','Schema','oCEFa','tOTPKey','+password\x20+accessToken','skip','AmTDJ','DMTlc','find','../helpers/utils','collection','select','isAdmin','Removing\x20Device:\x20','email-templates','SzocC','removeL2Auth','GThfX','size','length','Invalid\x20Token\x20-\x20UserSchema.GetUserByAccessToken()','hasL2Auth','AiaWE','openChatWindows','search','sanitizeFieldPlainText','vFPMj','Welcome\x20to\x20trudesk!\x20-\x20Here\x20are\x20your\x20account\x20details.','createUserFromEmail','bTrTm','statics','unbTZ','removeAccessToken','isModified','jWqEr','addDeviceToken','chance','sort','validate','hFQiU','PMLxJ','-password\x20-resetPassHash\x20-resetPassExpire','hash','DIUwS','NAZsj','lIWij','691507eQdkII','ObjectId','deleted','czAXJ','preferences','2377690RKLnKn','Vemlk','4|0|2|3|1','4328128kqMBMF','sEnrR','email','lAexN','mBUrB','page','EXpRt','4|0|3|1|2','Egrix','../mailer','Invalid\x20ObjectId\x20-\x20UserSchema.GetUser()','limit','trim','vNuEZ','SfoZI','string','name\x20description\x20normalized\x20_id','YPtQF','each','rBXmo','DtbqB','fURRS','compareSync','EeHal','dcibe','TqoPa','6974064ghfajJ','DguXC','nYLAw','wtLDP','winston','resolve','1|4|0|2|3','getUserWithObject','removeOpenChatWindow','4|3|0|1|2','gen:siteurl','uuyTV','toLowerCase','showDeleted','30ejnhdd','map','ARKlB','UcBsm','nhqnY','iOSDeviceTokens','fullname','filter','isAgent','hAxnW','addAccessToken','lodash','CpMHD','egswZ','qUhop','lIyIr','YtBxU','Invalid\x20Setting\x20-\x20UserRoleDefault','Invalid\x20User\x20Data\x20-\x20UserSchema.CreateUser()','18213bkvZGu','NPSON','384232SCWlQw','isUndefined','./role','KrRhm','async','nezME','getUserByUsername','Invalid\x20Username\x20-\x20UserSchema.GetUserByUsername()','addOpenChatWindow','380230LVkBxd','exec','JBmvS','3|1|2|0|4','+resetL2AuthHash\x20+resetL2AuthExpire','handlebars','username','eXzGT','getAssigneeUsers','isFunction','toString','zGvYI','oVSph','findIndex','getByUsername','uncSA','./group','isNull','ABCDEFGHIJKLMNOPQRSTUVWXYZ23456789','AKaMp','wTyDz','NDrBb','indexOf','UVANX','NBoNP','title','./setting','IUTxE','HmFbv','getAgents','ReBbG','kgQjN','splice'];_0x59fa=function(){return _0xeeed1;};return _0x59fa();}userSchema['set'](_0xbbc473(0x261),{'getters':!![]});var autoPopulateRole=function(_0x214ed6){var _0x3672ab=_0xbbc473,_0x69d85c={'lYtfJ':_0x3672ab(0x25c),'wTyDz':_0x3672ab(0x205),'xSHSM':function(_0x4c2f61){return _0x4c2f61();}};this['populate'](_0x69d85c[_0x3672ab(0x1ac)],_0x69d85c[_0x3672ab(0x24f)]),_0x69d85c[_0x3672ab(0x28d)](_0x214ed6);};userSchema[_0xbbc473(0x263)](_0xbbc473(0x272),autoPopulateRole)[_0xbbc473(0x263)](_0xbbc473(0x1c7),autoPopulateRole),userSchema[_0xbbc473(0x263)](_0xbbc473(0x26b),function(_0x240ff5){var _0x43490a=_0xbbc473,_0x17f89a={'zEMGE':'password','GThfX':function(_0x5206a7){return _0x5206a7();}},_0x146371=this;_0x146371[_0x43490a(0x241)]=utils[_0x43490a(0x279)](utils[_0x43490a(0x1d8)](_0x146371[_0x43490a(0x241)]['toLowerCase']()[_0x43490a(0x201)]())),_0x146371[_0x43490a(0x1f7)]=utils['sanitizeFieldPlainText'](_0x146371[_0x43490a(0x1f7)][_0x43490a(0x201)]());if(_0x146371[_0x43490a(0x223)])_0x146371[_0x43490a(0x223)]=utils[_0x43490a(0x279)](utils['sanitizeFieldPlainText'](_0x146371['fullname'][_0x43490a(0x201)]()));if(_0x146371[_0x43490a(0x254)])_0x146371[_0x43490a(0x254)]=utils[_0x43490a(0x279)](utils[_0x43490a(0x1d8)](_0x146371[_0x43490a(0x254)][_0x43490a(0x201)]()));if(!_0x146371[_0x43490a(0x1e0)](_0x17f89a[_0x43490a(0x1ae)]))return _0x17f89a[_0x43490a(0x1d0)](_0x240ff5);bcrypt[_0x43490a(0x1a3)](SALT_FACTOR,function(_0x279ef0,_0x291e8d){var _0x5eecb9=_0x43490a;if(_0x279ef0)return _0x240ff5(_0x279ef0);bcrypt['hash'](_0x146371[_0x5eecb9(0x1b3)],_0x291e8d,function(_0x3f4e2c,_0x35f755){var _0x92113f=_0x5eecb9;if(_0x3f4e2c)return _0x240ff5(_0x3f4e2c);return _0x146371[_0x92113f(0x1b3)]=_0x35f755,_0x240ff5();});});}),userSchema[_0xbbc473(0x276)][_0xbbc473(0x227)]=function(_0x2ac9b7){var _0x2300e9=_0xbbc473,_0x5ccbbd={'UPgdd':function(_0x2e5869,_0x22ae9e,_0x5be3a1){return _0x2e5869(_0x22ae9e,_0x5be3a1);},'Vemlk':function(_0xe755b8,_0x53fe19){return _0xe755b8+_0x53fe19;}},_0x43efa6=this,_0x17de8c=new Date(),_0x3f978f=_0x5ccbbd[_0x2300e9(0x1f3)](_0x43efa6[_0x2300e9(0x241)][_0x2300e9(0x245)](),_0x17de8c['toISOString']()),_0x54e55c=new Chance(_0x3f978f);_0x43efa6['accessToken']=_0x54e55c[_0x2300e9(0x1e9)](),_0x43efa6[_0x2300e9(0x26b)](function(_0x4fbee7){var _0x23613d=_0x2300e9;if(_0x4fbee7)return _0x5ccbbd[_0x23613d(0x1b6)](_0x2ac9b7,_0x4fbee7,null);return _0x5ccbbd['UPgdd'](_0x2ac9b7,null,_0x43efa6[_0x23613d(0x28a)]);});},userSchema['methods'][_0xbbc473(0x1df)]=function(_0x2e30b9){var _0x1ce270=_0xbbc473,_0x49b9ee={'fURRS':_0x1ce270(0x23e),'EeiXS':function(_0x57624a,_0x582a72,_0x55bb9d){return _0x57624a(_0x582a72,_0x55bb9d);},'HmFbv':function(_0x233f45){return _0x233f45();}},_0x4f9f4d=_0x49b9ee[_0x1ce270(0x20a)][_0x1ce270(0x26c)]('|'),_0x52d6f6=0x0;while(!![]){switch(_0x4f9f4d[_0x52d6f6++]){case'0':_0x2121b0[_0x1ce270(0x28a)]=undefined;continue;case'1':var _0x2121b0=this;continue;case'2':if(!_0x2121b0[_0x1ce270(0x28a)])return _0x2e30b9();continue;case'3':var _0x4ebc91={'CYBif':function(_0x442bbc,_0x2815bc,_0x224dd0){var _0x1aed56=_0x1ce270;return _0x49b9ee[_0x1aed56(0x27f)](_0x442bbc,_0x2815bc,_0x224dd0);},'IUTxE':function(_0x1bace0){var _0x29ddba=_0x1ce270;return _0x49b9ee[_0x29ddba(0x257)](_0x1bace0);}};continue;case'4':_0x2121b0[_0x1ce270(0x26b)](function(_0x2888cd){var _0x3e0791=_0x1ce270;if(_0x2888cd)return _0x4ebc91[_0x3e0791(0x25e)](_0x2e30b9,_0x2888cd,null);return _0x4ebc91[_0x3e0791(0x256)](_0x2e30b9);});continue;}break;}},userSchema[_0xbbc473(0x276)]['generateL2Auth']=function(_0x7d36ba){var _0x351f7=_0xbbc473,_0x5ca715={'nhqnY':function(_0x5da4b0,_0x10b16f,_0x3c4183){return _0x5da4b0(_0x10b16f,_0x3c4183);},'whliG':_0x351f7(0x1ad),'PtfYz':_0x351f7(0x24d),'oyeDv':function(_0x192d28){return _0x192d28();}},_0x3d3da1=this;if(_['isUndefined'](_0x3d3da1[_0x351f7(0x1c2)])||_[_0x351f7(0x24c)](_0x3d3da1[_0x351f7(0x1c2)])){var _0x119d2b=new Chance(),_0x216d3f=require(_0x5ca715[_0x351f7(0x25d)]),_0x985a29=_0x119d2b[_0x351f7(0x204)]({'length':0x7,'pool':_0x5ca715['PtfYz']}),_0x3c6aa5=_0x216d3f[_0x351f7(0x1b1)](_0x985a29)[_0x351f7(0x245)]()['replace'](/=/g,'');_0x3d3da1[_0x351f7(0x1c2)]=_0x3c6aa5,_0x3d3da1['hasL2Auth']=!![],_0x3d3da1[_0x351f7(0x26b)](function(_0x29ebe7){var _0x425ae6=_0x351f7;if(_0x29ebe7)return _0x7d36ba(_0x29ebe7);return _0x5ca715[_0x425ae6(0x221)](_0x7d36ba,null,_0x3c6aa5);});}else return _0x5ca715['oyeDv'](_0x7d36ba);},userSchema[_0xbbc473(0x276)][_0xbbc473(0x1cf)]=function(_0x16af79){var _0x1092ed=_0xbbc473,_0x14318b=_0x1092ed(0x1fc)[_0x1092ed(0x26c)]('|'),_0x4a4ce0=0x0;while(!![]){switch(_0x14318b[_0x4a4ce0++]){case'0':var _0x549782=this;continue;case'1':_0x549782[_0x1092ed(0x1d4)]=![];continue;case'2':_0x549782[_0x1092ed(0x26b)](function(_0x52d205){var _0x46d9d3=_0x1092ed;if(_0x52d205)return _0x16af79(_0x52d205,null);return _0x553bdc[_0x46d9d3(0x220)](_0x16af79);});continue;case'3':_0x549782['tOTPKey']=undefined;continue;case'4':var _0x553bdc={'UcBsm':function(_0x19ed4a){return _0x19ed4a();}};continue;}break;}},userSchema[_0xbbc473(0x276)][_0xbbc473(0x1e2)]=function(_0x220876,_0x54a915,_0x17e3b6){var _0x9a8f75=_0xbbc473,_0x574af8={'VDecG':function(_0x20d06b,_0x214e03){return _0x20d06b(_0x214e03);},'joRUz':'Invalid\x20token','NPSON':function(_0x11ddcd,_0x394331){return _0x11ddcd===_0x394331;},'TqoPa':function(_0x22503f,_0x36922c,_0x131514,_0x3923bb){return _0x22503f(_0x36922c,_0x131514,_0x3923bb);}};if(_['isUndefined'](_0x220876))return _0x574af8[_0x9a8f75(0x260)](_0x17e3b6,_0x574af8[_0x9a8f75(0x266)]);var _0x52d690=this;if(_0x574af8[_0x9a8f75(0x231)](_0x54a915,0x1)){if(_0x574af8[_0x9a8f75(0x20e)](hasDeviceToken,_0x52d690,_0x220876,_0x54a915))return _0x17e3b6(null,_0x220876);_0x52d690[_0x9a8f75(0x222)][_0x9a8f75(0x284)](_0x220876),_0x52d690[_0x9a8f75(0x26b)](function(_0x2c7860){if(_0x2c7860)return _0x17e3b6(_0x2c7860,null);_0x17e3b6(null,_0x220876);});}},userSchema[_0xbbc473(0x276)][_0xbbc473(0x1a6)]=function(_0x168e51,_0x1f1452,_0x56b6ee){var _0x41e1be=_0xbbc473,_0x41ce70={'DguXC':function(_0x2b1046,_0x58e5f0,_0x9cf052){return _0x2b1046(_0x58e5f0,_0x9cf052);},'meciE':function(_0x110fc2,_0x484b1d){return _0x110fc2===_0x484b1d;},'NBoNP':function(_0x3eedd9,_0x302a9d,_0x4eaf99,_0x2950a3){return _0x3eedd9(_0x302a9d,_0x4eaf99,_0x2950a3);},'uFvYe':function(_0x29ba44,_0x2e472f){return _0x29ba44+_0x2e472f;}},_0x4c8415=this;if(_0x41ce70[_0x41e1be(0x262)](_0x1f1452,0x1)){if(!_0x41ce70[_0x41e1be(0x253)](hasDeviceToken,_0x4c8415,_0x168e51,_0x1f1452))return _0x56b6ee();winston['debug'](_0x41ce70[_0x41e1be(0x28f)](_0x41e1be(0x1cc),_0x168e51)),_0x4c8415[_0x41e1be(0x222)][_0x41e1be(0x25b)](_[_0x41e1be(0x251)](this[_0x41e1be(0x222)],_0x168e51),0x1),_0x4c8415['save'](function(_0x21c2f0,_0x498d33){var _0x13b036=_0x41e1be;if(_0x21c2f0)return _0x41ce70[_0x13b036(0x210)](_0x56b6ee,_0x21c2f0,null);return _0x56b6ee(null,_0x498d33[_0x13b036(0x222)]);});}},userSchema[_0xbbc473(0x276)][_0xbbc473(0x23a)]=function(_0x55e365,_0x2decdf){var _0x3293a7=_0xbbc473,_0x3655ba={'gonJo':function(_0x5bcba2,_0x1e6d4d){return _0x5bcba2===_0x1e6d4d;},'XwlUY':function(_0x11a512,_0xb2a1d0){return _0x11a512(_0xb2a1d0);},'ReBbG':function(_0x575da1,_0x1e4fd0){return _0x575da1===_0x1e4fd0;},'lIWij':function(_0x2fb071,_0x1b7211){return _0x2fb071(_0x1b7211);},'EeHal':function(_0x42bdd3){return _0x42bdd3();}};if(_0x3655ba[_0x3293a7(0x259)](_0x55e365,undefined)){if(!_[_0x3293a7(0x244)](_0x2decdf))return![];return _0x3655ba[_0x3293a7(0x1ec)](_0x2decdf,_0x3293a7(0x1aa));}var _0x596ee7=this,_0x5bb794=_[_0x3293a7(0x224)](_0x596ee7[_0x3293a7(0x1f1)][_0x3293a7(0x1d6)],function(_0x211a40){var _0x37a60f=_0x3293a7;return _0x3655ba[_0x37a60f(0x270)](_0x211a40[_0x37a60f(0x245)](),_0x55e365['toString']());})[_0x3293a7(0x1d2)]>0x0;if(_0x5bb794){if(!_[_0x3293a7(0x244)](_0x2decdf))return![];return _0x3655ba[_0x3293a7(0x20c)](_0x2decdf);}_0x596ee7['preferences'][_0x3293a7(0x1d6)][_0x3293a7(0x284)](_0x55e365[_0x3293a7(0x245)]()),_0x596ee7[_0x3293a7(0x26b)](function(_0xa573d4,_0x56293e){var _0x6e8630=_0x3293a7;if(_0xa573d4){if(!_[_0x6e8630(0x244)](_0x2decdf))return![];return _0x3655ba['XwlUY'](_0x2decdf,_0xa573d4);}if(!_[_0x6e8630(0x244)](_0x2decdf))return![];return _0x2decdf(null,_0x56293e[_0x6e8630(0x1f1)][_0x6e8630(0x1d6)]);});},userSchema['methods'][_0xbbc473(0x217)]=function(_0x38e2de,_0x1a9871){var _0x1ee7ba=_0xbbc473,_0x109baa={'GdkyN':function(_0x388d32,_0x4c334a){return _0x388d32(_0x4c334a);},'fEOdI':function(_0x2eac85,_0x53d0ae){return _0x2eac85*_0x53d0ae;},'CpMHD':function(_0x151569,_0x5eb40d){return _0x151569===_0x5eb40d;},'unbTZ':_0x1ee7ba(0x1f4),'XXVqg':_0x1ee7ba(0x1e8),'sEnrR':function(_0x430679,_0x5d670a){return _0x430679*_0x5d670a;},'NDrBb':function(_0x1ddcae,_0x3f3965){return _0x1ddcae===_0x3f3965;},'fgbvj':_0x1ee7ba(0x206),'czAXJ':_0x1ee7ba(0x1e1),'DMTlc':_0x1ee7ba(0x1aa),'KrRhm':function(_0x36815c,_0x14b7d7){return _0x36815c>_0x14b7d7;}};if(_0x38e2de===undefined){if(_0x109baa[_0x1ee7ba(0x229)](_0x1ee7ba(0x247),_0x1ee7ba(0x23d))){if(_0x145f5c)return _0x109baa['GdkyN'](_0x221ea6,_0x33cd8d);var _0x39f536=_0x3bf857[_0x1ee7ba(0x224)](_0x11704c,function(_0x1db65f){var _0x583e07=_0x1ee7ba;return _0x1db65f[_0x583e07(0x25c)][_0x583e07(0x1cb)];})[_0x1ee7ba(0x21e)](function(_0xc529c6){var _0x3f37a8=_0x1ee7ba;return _0xc529c6[_0x3f37a8(0x25c)][_0x3f37a8(0x27a)];}),_0x247033=_0x22c3ff['model'](_0x2befbc)['find']({'role':{'$in':_0x39f536}},_0x1ee7ba(0x1e8))[_0x1ee7ba(0x1e4)]({'fullname':0x1})[_0x1ee7ba(0x1c4)](_0x109baa['fEOdI'](_0x1ca078,_0x489383))['limit'](_0x4e3a2a);if(!_0x5ceb6c[_0x1ee7ba(0x21c)])_0x247033['where']({'deleted':![]});_0x247033['exec'](_0x4f827f);}else{if(!_[_0x1ee7ba(0x244)](_0x1a9871))return![];return _0x109baa[_0x1ee7ba(0x269)](_0x1a9871,_0x109baa[_0x1ee7ba(0x1c6)]);}}var _0x43bdc3=this,_0x43939f=_0x109baa[_0x1ee7ba(0x235)](_['filter'](_0x43bdc3['preferences']['openChatWindows'],function(_0x440b74){var _0x1e72fc=_0x1ee7ba;return _0x440b74[_0x1e72fc(0x245)]()===_0x38e2de[_0x1e72fc(0x245)]();})['length'],0x0);if(!_0x43939f){if(!_['isFunction'](_0x1a9871))return![];return _0x1a9871();}_0x43bdc3['preferences']['openChatWindows']['splice'](_[_0x1ee7ba(0x248)](_0x43bdc3[_0x1ee7ba(0x1f1)]['openChatWindows'],function(_0x31deca){var _0x2b837f=_0x1ee7ba;return _0x109baa[_0x2b837f(0x229)](_0x31deca['toString'](),_0x38e2de['toString']());}),0x1),_0x43bdc3[_0x1ee7ba(0x26b)](function(_0x5d9924,_0x196a32){var _0x26c8ac=_0x1ee7ba,_0xe9c5a5={'svtIX':_0x109baa[_0x26c8ac(0x1de)],'gCJac':_0x109baa[_0x26c8ac(0x264)],'hGGOy':function(_0x2b572b,_0x260c94){var _0x19a1bc=_0x26c8ac;return _0x109baa[_0x19a1bc(0x1f6)](_0x2b572b,_0x260c94);},'oCEFa':function(_0x482a5a,_0x51c895){return _0x482a5a(_0x51c895);}};if(_0x5d9924){if(_0x109baa[_0x26c8ac(0x250)](_0x109baa['fgbvj'],_0x109baa[_0x26c8ac(0x1f0)])){var _0x31cf65=_0x4c246e[_0x26c8ac(0x200)]||0xa,_0x46ea0f=_0x262a22[_0x26c8ac(0x1fa)]||0x0,_0x33ea36=this;return _0x33ea36[_0x26c8ac(0x27b)](_0xde00bf)[_0x26c8ac(0x1c7)]({})[_0x26c8ac(0x23c)](function(_0x7db4b9,_0x38e7ab){var _0x212ab7=_0x26c8ac,_0x41182c=_0xe9c5a5['svtIX'][_0x212ab7(0x26c)]('|'),_0x16e66f=0x0;while(!![]){switch(_0x41182c[_0x16e66f++]){case'0':var _0x360916=_0x3a23f9[_0x212ab7(0x224)](_0x38e7ab,function(_0x1d8d77){var _0x3cb9db=_0x212ab7;return _0x1d8d77['role'][_0x3cb9db(0x225)];})['map'](function(_0xa0bb72){var _0xcee394=_0x212ab7;return _0xa0bb72['role'][_0xcee394(0x27a)];});continue;case'1':_0x3b639c[_0x212ab7(0x23c)](_0x13f93f);continue;case'2':var _0x3b639c=_0x33ea36[_0x212ab7(0x27b)](_0x1ed788)[_0x212ab7(0x1c7)]({'role':{'$in':_0x360916}},_0xe9c5a5[_0x212ab7(0x278)])['sort']({'fullname':0x1})[_0x212ab7(0x1c4)](_0xe9c5a5['hGGOy'](_0x46ea0f,_0x31cf65))[_0x212ab7(0x200)](_0x31cf65);continue;case'3':if(!_0x4ec640[_0x212ab7(0x21c)])_0x3b639c[_0x212ab7(0x27e)]({'deleted':![]});continue;case'4':if(_0x7db4b9)return _0xe9c5a5[_0x212ab7(0x1c1)](_0x11ddae,_0x7db4b9);continue;}break;}});}else{if(!_[_0x26c8ac(0x244)](_0x1a9871))return![];return _0x1a9871(_0x5d9924);}}if(!_['isFunction'](_0x1a9871))return![];return _0x1a9871(null,_0x196a32[_0x26c8ac(0x1f1)]['openChatWindows']);});},userSchema[_0xbbc473(0x276)][_0xbbc473(0x288)]=function(_0x3b79c1){var _0x4a33aa=_0xbbc473,_0xfd6901={'vwpYW':function(_0x1f3536,_0x361a81,_0x28f322){return _0x1f3536(_0x361a81,_0x28f322);}},_0x5327b0=this;_0x5327b0[_0x4a33aa(0x1ef)]=!![],_0x5327b0['save'](function(_0xa49553){var _0x32bd78=_0x4a33aa;if(_0xa49553)return _0xfd6901[_0x32bd78(0x28e)](_0x3b79c1,_0xa49553,![]);_0x3b79c1(null,!![]);});},userSchema[_0xbbc473(0x1dd)][_0xbbc473(0x1e5)]=function(_0x2dbc59,_0x1084ee){var _0x29f7ad=_0xbbc473;return bcrypt[_0x29f7ad(0x20b)](_0x2dbc59,_0x1084ee);},userSchema[_0xbbc473(0x1dd)]['findAll']=function(_0x45896b){var _0x3756bc=_0xbbc473;return this[_0x3756bc(0x27b)](COLLECTION)[_0x3756bc(0x1c7)]({},_0x45896b);},userSchema[_0xbbc473(0x1dd)][_0xbbc473(0x289)]=function(_0x3ef5e2,_0x522666){var _0x43ffa8=_0xbbc473,_0x2a9f31={'wtLDP':_0x43ffa8(0x1ff)};if(_[_0x43ffa8(0x233)](_0x3ef5e2))return _0x522666(_0x2a9f31[_0x43ffa8(0x212)],null);return this[_0x43ffa8(0x27b)](COLLECTION)[_0x43ffa8(0x272)]({'_id':_0x3ef5e2},_0x522666);},userSchema['statics']['getUserByUsername']=function(_0x48c9fd,_0x5c5aea){var _0x5861ee=_0xbbc473,_0x150965={'lAexN':function(_0x18bb08,_0x45d7e4,_0x40b700){return _0x18bb08(_0x45d7e4,_0x40b700);},'PMLxJ':function(_0x5e0ab5,_0x47fdf7){return _0x5e0ab5+_0x47fdf7;},'uncSA':_0x5861ee(0x1c3)};if(_['isUndefined'](_0x48c9fd))return _0x150965[_0x5861ee(0x1f8)](_0x5c5aea,_0x5861ee(0x239),null);return this[_0x5861ee(0x27b)](COLLECTION)[_0x5861ee(0x272)]({'username':new RegExp(_0x150965['PMLxJ'](_0x150965[_0x5861ee(0x1e7)]('^',_0x48c9fd),'$'),'i')})[_0x5861ee(0x1ca)](_0x150965[_0x5861ee(0x24a)])[_0x5861ee(0x23c)](_0x5c5aea);},userSchema['statics'][_0xbbc473(0x249)]=userSchema[_0xbbc473(0x1dd)][_0xbbc473(0x238)],userSchema['statics']['getUserByEmail']=function(_0x2154b8,_0x1fc678){var _0x2ba953=_0xbbc473,_0x253996={'egswZ':'Invalid\x20Email\x20-\x20UserSchema.GetUserByEmail()'};if(_[_0x2ba953(0x233)](_0x2154b8))return _0x1fc678(_0x253996[_0x2ba953(0x22a)],null);return this[_0x2ba953(0x27b)](COLLECTION)[_0x2ba953(0x272)]({'email':_0x2154b8['toLowerCase']()},_0x1fc678);},userSchema[_0xbbc473(0x1dd)][_0xbbc473(0x1ab)]=function(_0x3256b9,_0x16b8e0){var _0x3ff05f=_0xbbc473,_0x549b09={'NAZsj':_0x3ff05f(0x1a8)};if(_[_0x3ff05f(0x233)](_0x3256b9))return _0x16b8e0(_0x549b09[_0x3ff05f(0x1eb)],null);return this['model'](COLLECTION)[_0x3ff05f(0x272)]({'resetPassHash':_0x3256b9,'deleted':![]},'+resetPassHash\x20+resetPassExpire',_0x16b8e0);},userSchema[_0xbbc473(0x1dd)][_0xbbc473(0x265)]=function(_0x4fab5d,_0x2d0aa7){var _0x20392a=_0xbbc473,_0x499ab7={'dAdbu':_0x20392a(0x1a9),'AKaMp':_0x20392a(0x23f)};if(_[_0x20392a(0x233)](_0x4fab5d))return _0x2d0aa7(_0x499ab7[_0x20392a(0x19d)],null);return this['model'](COLLECTION)[_0x20392a(0x272)]({'resetL2AuthHash':_0x4fab5d,'deleted':![]},_0x499ab7[_0x20392a(0x24e)],_0x2d0aa7);},userSchema[_0xbbc473(0x1dd)]['getUserByAccessToken']=function(_0x582306,_0x1785b6){var _0x18e2e8=_0xbbc473,_0x3cb6f1={'yqXGT':function(_0x427ad6,_0x32bcec,_0x136bb7){return _0x427ad6(_0x32bcec,_0x136bb7);}};if(_['isUndefined'](_0x582306))return _0x3cb6f1[_0x18e2e8(0x1af)](_0x1785b6,_0x18e2e8(0x1d3),null);return this[_0x18e2e8(0x27b)](COLLECTION)['findOne']({'accessToken':_0x582306,'deleted':![]},_0x18e2e8(0x283),_0x1785b6);},userSchema[_0xbbc473(0x1dd)][_0xbbc473(0x216)]=function(_0x4d7707,_0x529f41){var _0xebe93e=_0xbbc473,_0x4364d9={'bQAMg':'Invalid\x20Object\x20(Must\x20be\x20of\x20type\x20Object)\x20-\x20UserSchema.GetUserWithObject()','JfUCR':function(_0x39968b,_0x4d0db2){return _0x39968b===_0x4d0db2;},'nezME':function(_0xb38a1,_0x2ddd81){return _0xb38a1!==_0x2ddd81;}};if(!_[_0xebe93e(0x1be)](_0x4d7707))return _0x529f41(_0x4364d9[_0xebe93e(0x19c)],null);var _0x2532fd=this,_0x4c32b4=_0x4d7707['limit']===null?0xa:_0x4d7707[_0xebe93e(0x200)],_0x4363b3=_0x4d7707[_0xebe93e(0x1fa)]===null?0x0:_0x4d7707[_0xebe93e(0x1fa)],_0x311b01=_0x4364d9[_0xebe93e(0x26a)](_0x4d7707[_0xebe93e(0x1d7)],null)?'':_0x4d7707[_0xebe93e(0x1d7)],_0x3dc674=_0x2532fd[_0xebe93e(0x27b)](COLLECTION)[_0xebe93e(0x1c7)]({},_0xebe93e(0x1e8))[_0xebe93e(0x1e4)]({'fullname':0x1})['skip'](_0x4363b3*_0x4c32b4);_0x4364d9[_0xebe93e(0x237)](_0x4c32b4,-0x1)&&_0x3dc674['limit'](_0x4c32b4);if(!_0x4d7707[_0xebe93e(0x21c)])_0x3dc674['where']({'deleted':![]});return!_[_0xebe93e(0x281)](_0x311b01)&&_0x3dc674[_0xebe93e(0x27e)]({'fullname':new RegExp('^'+_0x311b01[_0xebe93e(0x21b)](),'i')}),_0x3dc674['exec'](_0x529f41);},userSchema[_0xbbc473(0x1dd)][_0xbbc473(0x243)]=function(_0x2193e3){var _0x2ddfca=_0xbbc473,_0x320af3={'Ciwyn':function(_0x13b0c7){return _0x13b0c7();},'eXKyH':'EXpRt','jyhxP':function(_0x32a917,_0x42e5bd,_0x34242b){return _0x32a917(_0x42e5bd,_0x34242b);}},_0x11309e=global[_0x2ddfca(0x286)];if(_[_0x2ddfca(0x233)](_0x11309e))return _0x2193e3(null,[]);var _0x327fea=[];async[_0x2ddfca(0x207)](_0x11309e,function(_0x49ace4){var _0x393cbb=_0x2ddfca;if(_0x393cbb(0x1fb)!==_0x320af3[_0x393cbb(0x19e)])return _0x320af3[_0x393cbb(0x282)](_0x500663);else{if(_0x49ace4['isAgent'])_0x327fea['push'](_0x49ace4[_0x393cbb(0x27a)]);}}),_0x327fea=_['uniq'](_0x327fea),this[_0x2ddfca(0x27b)](COLLECTION)[_0x2ddfca(0x1c7)]({'role':{'$in':_0x327fea},'deleted':![]},function(_0x211707,_0x1ff213){var _0x82c5ef=_0x2ddfca;if(_0x211707)return winston[_0x82c5ef(0x271)](_0x211707),_0x320af3[_0x82c5ef(0x25f)](_0x2193e3,_0x211707,null);return _0x320af3[_0x82c5ef(0x25f)](_0x2193e3,null,_['sortBy'](_0x1ff213,_0x82c5ef(0x223)));});},userSchema['statics'][_0xbbc473(0x26d)]=function(_0x1fece8,_0x26d9d8){var _0x282ea3=_0xbbc473,_0x2bb8e1={'eMLZj':function(_0x269671,_0x505a6e,_0x12294b){return _0x269671(_0x505a6e,_0x12294b);},'BIiNY':'Invalid\x20roles\x20array'};if(_[_0x282ea3(0x233)](_0x1fece8))return _0x2bb8e1[_0x282ea3(0x277)](_0x26d9d8,_0x2bb8e1[_0x282ea3(0x1a0)],null);!_[_0x282ea3(0x27c)](_0x1fece8)&&(_0x1fece8=[_0x1fece8]);var _0x285a94=this[_0x282ea3(0x27b)](COLLECTION)[_0x282ea3(0x1c7)]({'role':{'$in':_0x1fece8},'deleted':![]});return _0x285a94[_0x282ea3(0x23c)](_0x26d9d8);},userSchema[_0xbbc473(0x1dd)]['createUser']=function(_0x3392c4,_0x470907){var _0x2d70cc=_0xbbc473,_0x36ba59={'fJVDM':function(_0x40be5d,_0x3bf305){return _0x40be5d!==_0x3bf305;},'YtBxU':_0x2d70cc(0x1bf),'nYLAw':function(_0x1742b5,_0x541a71,_0x22edfd){return _0x1742b5(_0x541a71,_0x22edfd);},'DPoSV':function(_0xefddf0,_0x52a741){return _0xefddf0>_0x52a741;},'dcibe':_0x2d70cc(0x22f)};if(_[_0x2d70cc(0x233)](_0x3392c4)||_[_0x2d70cc(0x233)](_0x3392c4[_0x2d70cc(0x241)]))return _0x470907(_0x36ba59[_0x2d70cc(0x20d)],null);var _0x1681dd=this;_0x1681dd[_0x2d70cc(0x27b)](COLLECTION)[_0x2d70cc(0x1c7)]({'username':_0x3392c4[_0x2d70cc(0x241)]},function(_0x4912cf,_0xb13e80){var _0x3965f8=_0x2d70cc,_0x361944={'DIUwS':_0x3965f8(0x223)};if(_0x4912cf){if(_0x36ba59['fJVDM'](_0x36ba59[_0x3965f8(0x22d)],_0x3965f8(0x1bf))){if(_0x4b98cf)return _0x4641ad['warn'](_0x1c2452),_0x187e91(_0x5201a6,null);return _0x359a26(null,_0x5c4872[_0x3965f8(0x1b2)](_0x3c31b8,_0x361944[_0x3965f8(0x1ea)]));}else return _0x36ba59[_0x3965f8(0x211)](_0x470907,_0x4912cf,null);}if(_0x36ba59['DPoSV'](_['size'](_0xb13e80),0x0))return _0x36ba59[_0x3965f8(0x211)](_0x470907,_0x3965f8(0x1ba),null);return _0x1681dd[_0x3965f8(0x1c9)]['insert'](_0x3392c4,_0x470907);});},userSchema[_0xbbc473(0x1dd)][_0xbbc473(0x1db)]=function(_0x26f49e,_0x3a7b30){var _0xb0706=_0xbbc473,_0x463358={'DtbqB':_0xb0706(0x1fe),'YsVto':'templates','uuyTV':function(_0x5c20ac,_0x3fc5a7){return _0x5c20ac(_0x3fc5a7);},'hPXsV':function(_0x587bbd,_0x2dc731){return _0x587bbd(_0x2dc731);},'WVRvQ':'chance','rBXmo':_0xb0706(0x1b0),'rVYpR':function(_0x56636c,_0x1d07df,_0x4f78ce){return _0x56636c(_0x1d07df,_0x4f78ce);},'YTunS':'Invalid\x20User\x20Data\x20-\x20UserSchema.CreatePublicUser()','rVcLp':'./setting'};if(_[_0xb0706(0x233)](_0x26f49e))return _0x463358[_0xb0706(0x280)](_0x3a7b30,_0x463358[_0xb0706(0x1a1)],null);var _0x210220=this,_0x424a51=require(_0x463358['rVcLp']);_0x424a51['getSetting'](_0xb0706(0x28c),function(_0x5ad166,_0x502e8d){var _0x3c42a0=_0xb0706,_0x7f8f0b={'hFQiU':function(_0x458afb,_0x59ba15){return _0x458afb(_0x59ba15);},'nNKsP':_0x463358[_0x3c42a0(0x209)],'SlJjG':_0x463358['YsVto'],'Luzza':_0x3c42a0(0x255),'VnsaY':_0x3c42a0(0x219),'ARKlB':function(_0x3cc554,_0x11373f){return _0x3cc554!==_0x11373f;},'vNuEZ':'Username\x20already\x20exists'};if(_0x5ad166||!_0x502e8d)return _0x463358[_0x3c42a0(0x21a)](_0x3a7b30,_0x3c42a0(0x22e));var _0x250735=_0x463358[_0x3c42a0(0x26f)](require,_0x463358[_0x3c42a0(0x1a7)]),_0x181437=new _0x250735(),_0x208d67=_0x181437['string']({'length':0x6,'pool':_0x463358[_0x3c42a0(0x208)]}),_0x504573=new _0x210220({'username':_0x26f49e,'email':_0x26f49e,'password':_0x208d67,'fullname':_0x26f49e,'role':_0x502e8d['value']});_0x210220[_0x3c42a0(0x27b)](COLLECTION)[_0x3c42a0(0x1c7)]({'username':_0x504573[_0x3c42a0(0x241)]},function(_0x4159c1,_0x47743a){var _0x56ba67=_0x3c42a0,_0x2825df={'kgQjN':function(_0x43e9fa,_0x4956bb){var _0x523abb=_0x5b35;return _0x7f8f0b[_0x523abb(0x1e6)](_0x43e9fa,_0x4956bb);},'qUhop':_0x7f8f0b[_0x56ba67(0x285)],'SfoZI':_0x56ba67(0x1cd),'JDBuI':_0x7f8f0b[_0x56ba67(0x273)],'AmTDJ':_0x7f8f0b['Luzza'],'SzocC':_0x7f8f0b['VnsaY'],'hAxnW':function(_0x4a1252,_0x16f870){return _0x4a1252!==_0x16f870;},'zdNoa':function(_0x1a8274,_0x1ce436,_0xada851){return _0x1a8274(_0x1ce436,_0xada851);},'UVANX':_0x56ba67(0x268),'XiKvX':function(_0x12029f,_0x3d3375){var _0x3effcc=_0x56ba67;return _0x7f8f0b[_0x3effcc(0x21f)](_0x12029f,_0x3d3375);},'lnIeg':_0x56ba67(0x246)};if(_0x4159c1)return _0x7f8f0b[_0x56ba67(0x1e6)](_0x3a7b30,_0x4159c1);if(_[_0x56ba67(0x1d1)](_0x47743a)>0x0)return _0x3a7b30(_0x7f8f0b[_0x56ba67(0x202)]);_0x504573[_0x56ba67(0x26b)](function(_0x2e5312,_0x3bc819){var _0x4e85d4=_0x56ba67,_0x24e9e6={'LgOhP':_0x4e85d4(0x1a8),'giGgz':function(_0x173e27,_0x5233fc){var _0x9a367e=_0x4e85d4;return _0x2825df[_0x9a367e(0x226)](_0x173e27,_0x5233fc);},'Jxbuv':_0x4e85d4(0x1dc),'sGMaG':function(_0x57036c,_0x4c580a){return _0x57036c(_0x4c580a);},'lIyIr':function(_0x520fb5,_0x1cf056,_0x18b2b2){var _0x390d4b=_0x4e85d4;return _0x2825df[_0x390d4b(0x1b8)](_0x520fb5,_0x1cf056,_0x18b2b2);},'mBUrB':_0x2825df[_0x4e85d4(0x252)]};if(_0x2825df['XiKvX'](_0x4e85d4(0x1fd),_0x2825df[_0x4e85d4(0x1bb)])){if(_0x2e5312)return _0x2825df[_0x4e85d4(0x25a)](_0x3a7b30,_0x2e5312);var _0xe01d22=require(_0x4e85d4(0x24b)),_0x47f09c=new _0xe01d22({'name':_0x3bc819[_0x4e85d4(0x1f7)],'members':[_0x3bc819['_id']],'sendMailTo':[_0x3bc819[_0x4e85d4(0x27a)]],'public':!![]});_0x47f09c[_0x4e85d4(0x26b)](function(_0x4a22ea,_0x178e24){var _0x46ccdf=_0x4e85d4;if(_0x4a22ea)return _0x2825df[_0x46ccdf(0x25a)](_0x3a7b30,_0x4a22ea);var _0x5c2613=_0x2825df[_0x46ccdf(0x25a)](require,_0x46ccdf(0x1b7)),_0x26ff16=_0x2825df['kgQjN'](require,_0x2825df[_0x46ccdf(0x22b)]),_0x498239=require(_0x2825df[_0x46ccdf(0x203)]),_0x5d8ca7=_0x5c2613[_0x46ccdf(0x214)](__dirname,'..','mailer',_0x2825df[_0x46ccdf(0x1b4)]),_0x5785df=new _0x498239({'views':{'root':_0x5d8ca7,'options':{'extension':_0x46ccdf(0x240)}}}),_0x26d979=require(_0x2825df[_0x46ccdf(0x1c5)]);_0x26d979[_0x46ccdf(0x267)](_0x2825df[_0x46ccdf(0x1ce)],function(_0x49035a,_0x3dd083){var _0x2a0e14=_0x46ccdf,_0x4d6a12={'RYSio':_0x24e9e6['LgOhP'],'uPtRp':_0x2a0e14(0x26e),'Mlxmk':function(_0x3c5ced,_0x5ce3cd){return _0x24e9e6['giGgz'](_0x3c5ced,_0x5ce3cd);},'SMEWc':_0x24e9e6['Jxbuv'],'OitOW':function(_0x1eaea4,_0x54dbc0){var _0x317345=_0x2a0e14;return _0x24e9e6[_0x317345(0x1a4)](_0x1eaea4,_0x54dbc0);},'kntms':function(_0x11beda,_0x51790f,_0x50e3a7){var _0x2fc429=_0x2a0e14;return _0x24e9e6[_0x2fc429(0x22c)](_0x11beda,_0x51790f,_0x50e3a7);}};if(_0x49035a)return _0x3a7b30(_0x49035a);!_0x3dd083&&(_0x3dd083={'value':''});var _0x4b7145={'user':_0x3bc819,'plainTextPassword':_0x208d67,'baseUrl':_0x3dd083['value']};_0x5785df[_0x2a0e14(0x28b)](_0x24e9e6[_0x2a0e14(0x1f9)],_0x4b7145)[_0x2a0e14(0x1bc)](function(_0x530114){var _0x6f9cb3=_0x2a0e14,_0x415870={'to':_0x3bc819[_0x6f9cb3(0x1f7)],'subject':_0x6f9cb3(0x1da),'html':_0x530114,'generateTextFromHTML':!![]};_0x26ff16[_0x6f9cb3(0x287)](_0x415870,function(_0x1fd427){var _0x5b90a5=_0x6f9cb3,_0x872fb6={'eXzGT':_0x4d6a12['RYSio'],'Pguit':_0x4d6a12[_0x5b90a5(0x27d)]};if(_0x1fd427){if(_0x4d6a12['Mlxmk'](_0x4d6a12['SMEWc'],'oEwIv'))return winston['warn'](_0x1fd427),_0x4d6a12[_0x5b90a5(0x1b9)](_0x3a7b30,_0x1fd427);else{if(_0x13af60[_0x5b90a5(0x233)](_0x1af83e))return _0xe4587(_0x872fb6[_0x5b90a5(0x242)],null);return this['model'](_0x3a357a)[_0x5b90a5(0x272)]({'resetPassHash':_0x142084,'deleted':![]},_0x872fb6[_0x5b90a5(0x19f)],_0x5325ed);}}return _0x4d6a12['kntms'](_0x3a7b30,null,{'user':_0x3bc819,'group':_0x178e24});});})['catch'](function(_0x245bdd){var _0x317554=_0x2a0e14;return winston['warn'](_0x245bdd),_0x4d6a12[_0x317554(0x1b9)](_0x3a7b30,_0x245bdd);});});});}else{if(_0x2f6277)return _0x2825df[_0x4e85d4(0x25a)](_0xbf240c,_0x421637);return _0x4702f9[_0x4e85d4(0x1b3)]=_0x2ce560,_0x114204();}});});});},userSchema[_0xbbc473(0x1dd)]['getCustomers']=function(_0xbd0063,_0x3e7ece){var _0x42e225=_0xbbc473,_0x16509c=_0xbd0063[_0x42e225(0x200)]||0xa,_0xd37ea1=_0xbd0063['page']||0x0,_0x351d26=this;return _0x351d26[_0x42e225(0x27b)](COLLECTION)[_0x42e225(0x1c7)]({},_0x42e225(0x1e8))['exec'](function(_0x196621,_0x4ed25b){var _0x24a594=_0x42e225,_0x53ca73=_0x24a594(0x215)[_0x24a594(0x26c)]('|'),_0x286b37=0x0;while(!![]){switch(_0x53ca73[_0x286b37++]){case'0':var _0x4cced8=_0x351d26[_0x24a594(0x1c7)]({'role':{'$in':_0x20e1ca}},_0x24a594(0x1e8))['sort']({'fullname':0x1})[_0x24a594(0x1c4)](_0xd37ea1*_0x16509c)[_0x24a594(0x200)](_0x16509c);continue;case'1':if(_0x196621)return _0x3e7ece(_0x196621);continue;case'2':if(!_0xbd0063[_0x24a594(0x21c)])_0x4cced8[_0x24a594(0x27e)]({'deleted':![]});continue;case'3':_0x4cced8[_0x24a594(0x23c)](_0x3e7ece);continue;case'4':var _0x20e1ca=_[_0x24a594(0x224)](_0x4ed25b,function(_0x39e636){var _0x5a4924=_0x24a594;return!_0x39e636[_0x5a4924(0x25c)]['isAdmin']&&!_0x39e636[_0x5a4924(0x25c)][_0x5a4924(0x225)];})['map'](function(_0x4896cb){var _0x4d96de=_0x24a594;return _0x4896cb['role'][_0x4d96de(0x27a)];});continue;}break;}});},userSchema[_0xbbc473(0x1dd)][_0xbbc473(0x258)]=function(_0x6b98df,_0x43776a){var _0x2501d1=_0xbbc473,_0x4fa96a=_0x6b98df[_0x2501d1(0x200)]||0xa,_0x5589ef=_0x6b98df[_0x2501d1(0x1fa)]||0x0,_0x4bde19=this;return _0x4bde19['model'](COLLECTION)['find']({})[_0x2501d1(0x23c)](function(_0x35adf0,_0x8dcb4e){var _0x1154ca=_0x2501d1,_0x587cd3=_0x1154ca(0x218)[_0x1154ca(0x26c)]('|'),_0x318a3d=0x0;while(!![]){switch(_0x587cd3[_0x318a3d++]){case'0':var _0xea5f7f=_0x4bde19[_0x1154ca(0x27b)](COLLECTION)[_0x1154ca(0x1c7)]({'role':{'$in':_0x37fa91}},'-password\x20-resetPassHash\x20-resetPassExpire')[_0x1154ca(0x1e4)]({'fullname':0x1})[_0x1154ca(0x1c4)](_0x5589ef*_0x4fa96a)[_0x1154ca(0x200)](_0x4fa96a);continue;case'1':if(!_0x6b98df['showDeleted'])_0xea5f7f[_0x1154ca(0x27e)]({'deleted':![]});continue;case'2':_0xea5f7f[_0x1154ca(0x23c)](_0x43776a);continue;case'3':var _0x37fa91=_['filter'](_0x8dcb4e,function(_0x4c7656){var _0x3552e5=_0x1154ca;return _0x4c7656[_0x3552e5(0x25c)]['isAgent'];})[_0x1154ca(0x21e)](function(_0x4a31d3){var _0x47647a=_0x1154ca;return _0x4a31d3[_0x47647a(0x25c)]['_id'];});continue;case'4':if(_0x35adf0)return _0x43776a(_0x35adf0);continue;}break;}});},userSchema[_0xbbc473(0x1dd)][_0xbbc473(0x1b5)]=function(_0x168040,_0x102a31){var _0x52ee9d=_0xbbc473,_0x177a54={'vFPMj':_0x52ee9d(0x1e8),'dogya':function(_0x1d51a4,_0x17496e){return _0x1d51a4*_0x17496e;}},_0x51e4dc=_0x168040[_0x52ee9d(0x200)]||0xa,_0x5ca5fe=_0x168040[_0x52ee9d(0x1fa)]||0x0,_0x43e4cc=this;return _0x43e4cc[_0x52ee9d(0x27b)](COLLECTION)['find']({})['exec'](function(_0x34735c,_0x1d70a6){var _0x31dc69=_0x52ee9d;if(_0x34735c)return _0x102a31(_0x34735c);var _0x10c49b=_[_0x31dc69(0x224)](_0x1d70a6,function(_0x17e450){var _0x3bbac6=_0x31dc69;return _0x17e450[_0x3bbac6(0x25c)]['isAdmin'];})['map'](function(_0x43e15f){var _0x3db171=_0x31dc69;return _0x43e15f[_0x3db171(0x25c)][_0x3db171(0x27a)];}),_0x226c59=_0x43e4cc['model'](COLLECTION)['find']({'role':{'$in':_0x10c49b}},_0x177a54[_0x31dc69(0x1d9)])[_0x31dc69(0x1e4)]({'fullname':0x1})[_0x31dc69(0x1c4)](_0x177a54['dogya'](_0x5ca5fe,_0x51e4dc))[_0x31dc69(0x200)](_0x51e4dc);if(!_0x168040[_0x31dc69(0x21c)])_0x226c59['where']({'deleted':![]});_0x226c59[_0x31dc69(0x23c)](_0x102a31);});};function hasDeviceToken(_0x5af4be,_0x3f009b,_0x30e380){var _0x451419=_0xbbc473,_0x33c7a1={'EMHmH':function(_0x4c44ff,_0x5845c5){return _0x4c44ff===_0x5845c5;},'gHccd':function(_0x4dda1f,_0x594d66){return _0x4dda1f>_0x594d66;},'ZfuSu':_0x451419(0x1d5)};if(_0x33c7a1['EMHmH'](_0x30e380,0x1)){if(_0x33c7a1[_0x451419(0x275)]!==_0x451419(0x1d5)){var _0x39ae40=_0x24449b['filter'](_0x1e4f48[_0x451419(0x222)],function(_0x5ea3e8){if(_0x33c7a1['EMHmH'](_0x5ea3e8,_0x20e568))return _0x5ea3e8;});return _0x33c7a1['gHccd'](_0x39ae40[_0x451419(0x1d2)],0x0);}else{var _0x381074=_[_0x451419(0x224)](_0x5af4be[_0x451419(0x222)],function(_0x2618b8){if(_0x2618b8===_0x3f009b)return _0x2618b8;});return _0x33c7a1['gHccd'](_0x381074[_0x451419(0x1d2)],0x0);}}return![];}function _0x5b35(_0x4173dc,_0x5ea83b){var _0x59fa64=_0x59fa();return _0x5b35=function(_0x5b35fb,_0x5e9c60){_0x5b35fb=_0x5b35fb-0x19c;var _0x107279=_0x59fa64[_0x5b35fb];return _0x107279;},_0x5b35(_0x4173dc,_0x5ea83b);}module[_0xbbc473(0x274)]=mongoose[_0xbbc473(0x27b)](COLLECTION,userSchema);