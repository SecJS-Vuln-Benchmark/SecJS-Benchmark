var _0x2ef9aa=_0x1a44;(function(_0x16f162,_0x4a8a80){var _0x2ceeb8=_0x1a44,_0x5cccfc=_0x16f162();while(!![]){try{var _0x3b731f=parseInt(_0x2ceeb8(0x15b))/0x1*(parseInt(_0x2ceeb8(0x178))/0x2)+-parseInt(_0x2ceeb8(0x172))/0x3*(parseInt(_0x2ceeb8(0x18c))/0x4)+parseInt(_0x2ceeb8(0x18e))/0x5+parseInt(_0x2ceeb8(0x182))/0x6*(parseInt(_0x2ceeb8(0x17e))/0x7)+parseInt(_0x2ceeb8(0x174))/0x8*(parseInt(_0x2ceeb8(0x173))/0x9)+-parseInt(_0x2ceeb8(0x162))/0xa*(-parseInt(_0x2ceeb8(0x16e))/0xb)+-parseInt(_0x2ceeb8(0x184))/0xc;if(_0x3b731f===_0x4a8a80)break;else _0x5cccfc['push'](_0x5cccfc['shift']());}catch(_0x507fa4){_0x5cccfc['push'](_0x5cccfc['shift']());}}}(_0x4e3c,0x595df));function _0x1a44(_0x1e105a,_0x2b3ce7){var _0x4e3c94=_0x4e3c();return _0x1a44=function(_0x1a44cb,_0x3d9057){_0x1a44cb=_0x1a44cb-0x15b;var _0x24fb01=_0x4e3c94[_0x1a44cb];return _0x24fb01;},_0x1a44(_0x1e105a,_0x2b3ce7);}var mongoose=require('mongoose'),mongooseLeanVirtuals=require(_0x2ef9aa(0x17a)),_=require(_0x2ef9aa(0x16b)),utils=require(_0x2ef9aa(0x15d)),COLLECTION='roles',roleSchema=mongoose[_0x2ef9aa(0x164)]({'name':{'type':String,'required':!![],'unique':!![]},'normalized':String,'description':String,'grants':[{'type':String,'required':!![]}],'hierarchy':{'type':Boolean,'required':!![],'default':!![]}},{'toObject':{'getters':!![],'virtuals':!![]},'toJSON':{'virtuals':!![]}});roleSchema[_0x2ef9aa(0x165)](_0x2ef9aa(0x190))[_0x2ef9aa(0x15e)](function(){var _0x52f62d=_0x2ef9aa,_0xc6a4c8={'bSbgS':function(_0x2e40a8,_0xedbd3e){return _0x2e40a8!==_0xedbd3e;},'zxMQG':'admin:*'};if(_['isUndefined'](global[_0x52f62d(0x160)]))return![];var _0x3c98c8=_[_0x52f62d(0x18d)](global[_0x52f62d(0x160)],{'normalized':this[_0x52f62d(0x180)]});if(!_0x3c98c8)return![];return _0xc6a4c8[_0x52f62d(0x188)](_[_0x52f62d(0x16f)](_0x3c98c8['grants'],_0xc6a4c8[_0x52f62d(0x179)]),-0x1);}),roleSchema[_0x2ef9aa(0x165)](_0x2ef9aa(0x187))[_0x2ef9aa(0x15e)](function(){var _0x5e3ba1=_0x2ef9aa,_0x19452f={'BFWWQ':_0x5e3ba1(0x15c)};if(_[_0x5e3ba1(0x18a)](global['roles']))return![];var _0x297d0f=_[_0x5e3ba1(0x18d)](global['roles'],{'normalized':this[_0x5e3ba1(0x180)]});if(!_0x297d0f)return![];return _['indexOf'](_0x297d0f[_0x5e3ba1(0x161)],_0x19452f['BFWWQ'])!==-0x1;}),roleSchema[_0x2ef9aa(0x170)](mongooseLeanVirtuals),roleSchema[_0x2ef9aa(0x16d)]('save',function(_0x4de17f){var _0x28beac=_0x2ef9aa,_0x2dd8ce={'GsxON':function(_0x986d5a){return _0x986d5a();}};return this['name']=utils['sanitizeFieldPlainText'](this[_0x28beac(0x183)]['trim']()),this[_0x28beac(0x180)]=utils[_0x28beac(0x181)](this[_0x28beac(0x183)][_0x28beac(0x168)]()[_0x28beac(0x175)]()),_0x2dd8ce[_0x28beac(0x163)](_0x4de17f);}),roleSchema[_0x2ef9aa(0x166)][_0x2ef9aa(0x16c)]=function(_0x792550,_0x31b887){var _0x155373=_0x2ef9aa;this[_0x155373(0x161)]=_0x792550,this[_0x155373(0x18b)](_0x31b887);},roleSchema[_0x2ef9aa(0x166)][_0x2ef9aa(0x186)]=function(_0x3c8aaa,_0x33fbe8,_0x4557d7){var _0x43bf9b=_0x2ef9aa;this[_0x43bf9b(0x161)]=_0x3c8aaa,this['hierarchy']=_0x33fbe8,this[_0x43bf9b(0x18b)](_0x4557d7);},roleSchema[_0x2ef9aa(0x17b)][_0x2ef9aa(0x167)]=function(_0x3dad46){var _0x3ecbdc=_0x2ef9aa;return this['model'](COLLECTION)[_0x3ecbdc(0x18d)]({})['exec'](_0x3dad46);},roleSchema[_0x2ef9aa(0x17b)][_0x2ef9aa(0x176)]=function(_0x3b5787){var _0x29cecd=_0x2ef9aa;return this['model'](COLLECTION)['find']({})[_0x29cecd(0x171)]({'virtuals':!![]})['exec'](_0x3b5787);},roleSchema['statics'][_0x2ef9aa(0x18f)]=function(_0x418eb8,_0x3f8442){var _0x1e4e9a=_0x2ef9aa,_0x157d3b=this[_0x1e4e9a(0x185)](COLLECTION)['findOne']({'_id':_0x418eb8});return _0x157d3b['exec'](_0x3f8442);},roleSchema[_0x2ef9aa(0x17b)][_0x2ef9aa(0x17c)]=function(_0x2d7071,_0x579d5e){var _0x309104=_0x2ef9aa,_0x51c5a8={'lhFcV':function(_0x5d2585,_0x232bf0){return _0x5d2585+_0x232bf0;}},_0x3818ef=this['model'](COLLECTION)[_0x309104(0x17f)]({'normalized':new RegExp(_0x51c5a8[_0x309104(0x189)]('^'+_0x2d7071[_0x309104(0x175)](),'$'),'i')});return _0x3818ef[_0x309104(0x169)](_0x579d5e);},roleSchema[_0x2ef9aa(0x17b)][_0x2ef9aa(0x17d)]=function(_0x1e122a){var _0x50ee52=_0x2ef9aa,_0x3393be={'NvnjW':'agent:*','lHyMy':function(_0x40ab11,_0x6898cb,_0x3af8d6){return _0x40ab11(_0x6898cb,_0x3af8d6);}},_0x3411a6=this['model'](COLLECTION)[_0x50ee52(0x18d)]({});_0x3411a6[_0x50ee52(0x169)](function(_0x4e091d,_0x3064e1){var _0x433bc2=_0x50ee52;if(_0x4e091d)return _0x1e122a(_0x4e091d);var _0x56c833=_[_0x433bc2(0x15f)](_0x3064e1,function(_0x2add02){var _0x5b1d93=_0x433bc2;return _['indexOf'](_0x2add02[_0x5b1d93(0x161)],_0x3393be['NvnjW'])!==-0x1;});return _0x3393be[_0x433bc2(0x16a)](_0x1e122a,null,_0x56c833);});},roleSchema['statics'][_0x2ef9aa(0x15e)]=roleSchema[_0x2ef9aa(0x17b)]['getRole'],module[_0x2ef9aa(0x177)]=mongoose['model'](COLLECTION,roleSchema);function _0x4e3c(){var _0x5e8aa1=['virtual','methods','getRoles','toLowerCase','exec','lHyMy','lodash','updateGrants','pre','11OboHtj','indexOf','plugin','lean','33BtaAJn','4193901QKSviN','8qUCPSC','trim','getRolesLean','exports','4406pdohls','zxMQG','mongoose-lean-virtuals','statics','getRoleByName','getAgentRoles','14JtkFMn','findOne','normalized','sanitizeFieldPlainText','889794iVTLEZ','name','14774160JttaXO','model','updateGrantsAndHierarchy','isAgent','bSbgS','lhFcV','isUndefined','save','195828azqqUU','find','3146780XZeeGG','getRole','isAdmin','164qiFAbA','agent:*','../helpers/utils','get','filter','roles','grants','3825190QQNSKn','GsxON','Schema'];_0x4e3c=function(){return _0x5e8aa1;};return _0x4e3c();}