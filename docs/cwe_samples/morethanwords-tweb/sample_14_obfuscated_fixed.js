const _0x502769=_0x56e4;function _0x2015(){const _0x4b09cf=['none/none','381FVVtix','assets','383166AjNyCy','uuid','13828rRWZuu','join','175830gEatju','4200HBOoVJ','3897zKAudp','renameSync','unlinkSync','readFileSync','../../storage/assets','BFYaX','77bYRWgo','currentLogoFilename','../../models/systemSettings','DdMZA','env','189525HaiTJf','.png','includes','path','existsSync','RUZYw','STORAGE_DIR','anything-llm.png','length','XPVZB','72ojsYsF','3097755xzXxXC','21413SofsFe','../../storage/assets/'];_0x2015=function(){return _0x4b09cf;};return _0x2015();}(function(_0x24d9b0,_0x2d8367){const _0x27c5be=_0x56e4,_0x58ee96=_0x24d9b0();while(!![]){try{const _0x5b22df=parseInt(_0x27c5be(0x1f9))/0x1+parseInt(_0x27c5be(0x1dc))/0x2+parseInt(_0x27c5be(0x1da))/0x3*(-parseInt(_0x27c5be(0x1de))/0x4)+parseInt(_0x27c5be(0x1f8))/0x5+parseInt(_0x27c5be(0x1f7))/0x6*(parseInt(_0x27c5be(0x1ed))/0x7)+parseInt(_0x27c5be(0x1e1))/0x8*(-parseInt(_0x27c5be(0x1e2))/0x9)+-parseInt(_0x27c5be(0x1e0))/0xa*(parseInt(_0x27c5be(0x1e8))/0xb);if(_0x5b22df===_0x2d8367)break;else _0x58ee96['push'](_0x58ee96['shift']());}catch(_0x4676c8){_0x58ee96['push'](_0x58ee96['shift']());}}}(_0x2015,0x59d82));function _0x56e4(_0x42a57,_0x2d9b14){const _0x2015ad=_0x2015();return _0x56e4=function(_0x56e49a,_0x22c991){_0x56e49a=_0x56e49a-0x1d9;let _0xaa06f1=_0x2015ad[_0x56e49a];return _0xaa06f1;},_0x56e4(_0x42a57,_0x2d9b14);}const path=require(_0x502769(0x1f0)),fs=require('fs'),{getType}=require('mime'),{v4}=require(_0x502769(0x1dd)),{SystemSettings}=require(_0x502769(0x1ea)),LOGO_FILENAME=_0x502769(0x1f4);function validFilename(_0x856e3b=''){const _0xae36ee=_0x502769;return![LOGO_FILENAME][_0xae36ee(0x1ef)](_0x856e3b);}function getDefaultFilename(){return LOGO_FILENAME;}async function determineLogoFilepath(_0x439503=LOGO_FILENAME){const _0x443e64=_0x502769,_0x3e873d={'BFYaX':_0x443e64(0x1db),'DdMZA':_0x443e64(0x1e6),'RUZYw':function(_0x44ea2f,_0x33400c){return _0x44ea2f(_0x33400c);}},_0x2a95f2=await SystemSettings[_0x443e64(0x1e9)](),_0x3dd4b3=process[_0x443e64(0x1ec)][_0x443e64(0x1f3)]?path[_0x443e64(0x1df)](process[_0x443e64(0x1ec)]['STORAGE_DIR'],_0x3e873d[_0x443e64(0x1e7)]):path['join'](__dirname,_0x3e873d[_0x443e64(0x1eb)]),_0x17db8b=path[_0x443e64(0x1df)](_0x3dd4b3,_0x439503);if(_0x2a95f2&&_0x3e873d[_0x443e64(0x1f2)](validFilename,_0x2a95f2))return customLogoPath=path[_0x443e64(0x1df)](_0x3dd4b3,_0x2a95f2),fs[_0x443e64(0x1f1)](customLogoPath)?customLogoPath:_0x17db8b;return _0x17db8b;}function fetchLogo(_0x467630){const _0x47da9c=_0x502769;if(!fs[_0x47da9c(0x1f1)](_0x467630))return{'found':![],'buffer':null,'size':0x0,'mime':_0x47da9c(0x1d9)};const _0x568e11=getType(_0x467630),_0x5adec1=fs[_0x47da9c(0x1e5)](_0x467630);return{'found':!![],'buffer':_0x5adec1,'size':_0x5adec1[_0x47da9c(0x1f5)],'mime':_0x568e11};}async function renameLogoFile(_0x2281bc=null){const _0x21bef7=_0x502769,_0x35854d={'XPVZB':_0x21bef7(0x1ee),'SfYZc':function(_0x12b6ca){return _0x12b6ca();}},_0x44eb54=path['extname'](_0x2281bc)||_0x35854d[_0x21bef7(0x1f6)],_0x2f7079=''+_0x35854d['SfYZc'](v4)+_0x44eb54,_0x5d81d3=process[_0x21bef7(0x1ec)][_0x21bef7(0x1f3)]?path['join'](process[_0x21bef7(0x1ec)][_0x21bef7(0x1f3)],'assets',_0x2281bc):path[_0x21bef7(0x1df)](__dirname,_0x21bef7(0x1fa)+_0x2281bc),_0x3c449e=process[_0x21bef7(0x1ec)][_0x21bef7(0x1f3)]?path[_0x21bef7(0x1df)](process[_0x21bef7(0x1ec)]['STORAGE_DIR'],_0x21bef7(0x1db),_0x2f7079):path[_0x21bef7(0x1df)](__dirname,_0x21bef7(0x1fa)+_0x2f7079);return fs[_0x21bef7(0x1e3)](_0x5d81d3,_0x3c449e),_0x2f7079;}async function removeCustomLogo(_0x311b0b=LOGO_FILENAME){const _0x85e7b8=_0x502769,_0x25a15c={'SXwFQ':function(_0x28d9ec,_0x315f56){return _0x28d9ec(_0x315f56);}};if(!_0x311b0b||!_0x25a15c['SXwFQ'](validFilename,_0x311b0b))return![];const _0x48c7c6=process[_0x85e7b8(0x1ec)][_0x85e7b8(0x1f3)]?path['join'](process[_0x85e7b8(0x1ec)][_0x85e7b8(0x1f3)],'assets/'+_0x311b0b):path[_0x85e7b8(0x1df)](__dirname,'../../storage/assets/'+_0x311b0b);if(fs['existsSync'](_0x48c7c6))fs[_0x85e7b8(0x1e4)](_0x48c7c6);return!![];}module['exports']={'fetchLogo':fetchLogo,'renameLogoFile':renameLogoFile,'removeCustomLogo':removeCustomLogo,'validFilename':validFilename,'getDefaultFilename':getDefaultFilename,'determineLogoFilepath':determineLogoFilepath,'LOGO_FILENAME':LOGO_FILENAME};