function _0x365a(){const _0x23fe6c=['then','10536SStQOf','ZhlXC','flat','10dghoii','push','NODE_ENV','BGZgZ','rmSync','../../storage/documents','path','map','../../models/workspace','1819770WMbwcm','2495LJGrSf','374759YvQJEk','10gPPiTw','exports','all','8934384PMuQhf','4662whUIhZ','env','4992KFhafZ','documents','where','removeDocuments','mdQtV','868878yrGICJ','8073338LijdOE','join','resolve'];_0x365a=function(){return _0x23fe6c;};return _0x365a();}const _0x358584=_0x594a;(function(_0x3a6623,_0x39d53d){const _0x5e58fb=_0x594a,_0x4ef6f0=_0x3a6623();while(!![]){try{const _0x122646=-parseInt(_0x5e58fb(0x11a))/0x1+-parseInt(_0x5e58fb(0x130))/0x2*(-parseInt(_0x5e58fb(0x128))/0x3)+parseInt(_0x5e58fb(0x12d))/0x4*(parseInt(_0x5e58fb(0x11b))/0x5)+parseInt(_0x5e58fb(0x120))/0x6+-parseInt(_0x5e58fb(0x129))/0x7+parseInt(_0x5e58fb(0x123))/0x8*(-parseInt(_0x5e58fb(0x121))/0x9)+-parseInt(_0x5e58fb(0x11d))/0xa*(-parseInt(_0x5e58fb(0x11c))/0xb);if(_0x122646===_0x39d53d)break;else _0x4ef6f0['push'](_0x4ef6f0['shift']());}catch(_0x5b5829){_0x4ef6f0['push'](_0x4ef6f0['shift']());}}}(_0x365a,0xf186d));function _0x594a(_0x546f0b,_0x31ef9f){const _0x365af6=_0x365a();return _0x594a=function(_0x594a79,_0x1b370b){_0x594a79=_0x594a79-0x118;let _0x161a2d=_0x365af6[_0x594a79];return _0x161a2d;},_0x594a(_0x546f0b,_0x31ef9f);}const fs=require('fs'),path=require(_0x358584(0x136)),{purgeVectorCache,purgeSourceDocument}=require('.'),{Document}=require('../../models/documents'),{Workspace}=require(_0x358584(0x119));async function purgeDocument(_0x55c9c0){const _0x5bdba5=_0x358584,_0x3eb7b7=await Workspace[_0x5bdba5(0x125)]();for(const _0x22e17a of _0x3eb7b7){await Document['removeDocuments'](_0x22e17a,[_0x55c9c0]);}await purgeVectorCache(_0x55c9c0),await purgeSourceDocument(_0x55c9c0);return;}async function purgeFolder(_0x2c7e10){const _0x5ced53=_0x358584,_0x55df98={'BGZgZ':function(_0x93d0e2,_0x1bed60){return _0x93d0e2===_0x1bed60;},'mdQtV':'custom-documents','ZhlXC':'development'};if(_0x55df98[_0x5ced53(0x133)](_0x2c7e10,_0x55df98[_0x5ced53(0x127)]))return;const _0x3f7e30=_0x55df98[_0x5ced53(0x133)](process[_0x5ced53(0x122)][_0x5ced53(0x132)],_0x55df98[_0x5ced53(0x12e)])?path['resolve'](__dirname,_0x5ced53(0x135)):path[_0x5ced53(0x12b)](process[_0x5ced53(0x122)]['STORAGE_DIR'],_0x5ced53(0x124)),_0x290560=path[_0x5ced53(0x12b)](_0x3f7e30,_0x2c7e10),_0x33b69a=fs['readdirSync'](_0x290560)[_0x5ced53(0x118)](_0x4c03a1=>path[_0x5ced53(0x12a)](_0x2c7e10,_0x4c03a1)),_0x6195b6=await Workspace[_0x5ced53(0x125)](),_0x59084e=[];for(const _0x326daf of _0x33b69a){const _0x56ba48=()=>new Promise(_0x5a424c=>purgeVectorCache(_0x326daf)[_0x5ced53(0x12c)](()=>_0x5a424c(!![])));_0x59084e['push'](_0x56ba48);}for(const _0xcaa5ee of _0x6195b6){const _0x595348=()=>new Promise(_0x1188fc=>Document[_0x5ced53(0x126)](_0xcaa5ee,_0x33b69a)[_0x5ced53(0x12c)](()=>_0x1188fc(!![])));_0x59084e[_0x5ced53(0x131)](_0x595348);}await Promise[_0x5ced53(0x11f)](_0x59084e[_0x5ced53(0x12f)]()['map'](_0x712948=>_0x712948())),fs[_0x5ced53(0x134)](_0x290560,{'recursive':!![]});return;}module[_0x358584(0x11e)]={'purgeDocument':purgeDocument,'purgeFolder':purgeFolder};