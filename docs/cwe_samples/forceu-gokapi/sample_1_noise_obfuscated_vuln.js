const _0x4d7aa3=_0x4483;(function(_0x3812fb,_0xda82a3){const _0x50fdf3=_0x4483,_0x24a817=_0x3812fb();while(!![]){try{const _0x297d56=parseInt(_0x50fdf3(0xa7))/0x1*(parseInt(_0x50fdf3(0xaa))/0x2)+parseInt(_0x50fdf3(0xb6))/0x3+parseInt(_0x50fdf3(0xcb))/0x4+-parseInt(_0x50fdf3(0xa6))/0x5*(parseInt(_0x50fdf3(0xc9))/0x6)+-parseInt(_0x50fdf3(0xa3))/0x7*(-parseInt(_0x50fdf3(0xb1))/0x8)+parseInt(_0x50fdf3(0xa9))/0x9*(parseInt(_0x50fdf3(0xb4))/0xa)+parseInt(_0x50fdf3(0xca))/0xb*(-parseInt(_0x50fdf3(0xc8))/0xc);if(_0x297d56===_0xda82a3)break;else _0x24a817['push'](_0x24a817['shift']());}catch(_0xfbd280){_0x24a817['push'](_0x24a817['shift']());}}}(_0x2976,0x31d90));import{getApplicationInfo,getNodeApplications,getNodeInfo,getSwarmNodes}from'@dokploy/server';function _0x2976(){const _0x36f6a6=['safe','MqomP','Uctll','hOJma','noNiy','8855688UfmHDp','36WpejXY','11XYjZvb','982092pkqapo','http://localhost:3000/health','stringify','activeOrganizationId','BMUAy','nodeId','jLvIa','DEhgp','query','ffDKJ','126OQuaaA','string','XvZbR','59765GbzeWE','1CfdRjL','raLTd','481014HQIKGB','238594YFBXJE','SeMOb','get','GFNxT','pLMuy','input','uyPlQ','18840LQxTLx','UITBF','organizationId','50uoUtpG','appName','1018284LUCujz','min','UNAUTHORIZED','RbfJG','MbTMZ','optional','Invalid\x20app\x20name.','serverId','JitFR','DmgHG','regex','object','session'];_0x2976=function(){return _0x36f6a6;};return _0x2976();}import{z}from'zod';import{createTRPCRouter,protectedProcedure}from'../trpc';import{TRPCError}from'@trpc/server';import{findServerById}from'@dokploy/server';function _0x4483(_0x13a679,_0x5133f9){const _0x2976b3=_0x2976();return _0x4483=function(_0x4483a4,_0x3cb4c6){_0x4483a4=_0x4483a4-0x9b;let _0xa1cc53=_0x2976b3[_0x4483a4];return _0xa1cc53;},_0x4483(_0x13a679,_0x5133f9);}import{containerIdRegex}from'./docker';export const swarmRouter=createTRPCRouter({'getNodes':protectedProcedure[_0x4d7aa3(0xaf)](z[_0x4d7aa3(0xc1)]({'serverId':z[_0x4d7aa3(0xa4)]()[_0x4d7aa3(0xbb)]()}))[_0x4d7aa3(0xa1)](async({input:_0x5a8fe6,ctx:_0x1764ca})=>{const _0x154a61=_0x4d7aa3,_0x22e7ee={'pLMuy':function(_0x214970,_0x5bc78d){return _0x214970!==_0x5bc78d;},'UITBF':_0x154a61(0xa8),'Uctll':_0x154a61(0xb8),'ffDKJ':function(_0x5e63fc,_0x4d4227){return _0x5e63fc(_0x4d4227);}};if(_0x5a8fe6['serverId']){const _0x51e30a=await findServerById(_0x5a8fe6[_0x154a61(0xbd)]);if(_0x22e7ee[_0x154a61(0xae)](_0x51e30a[_0x154a61(0xb3)],_0x1764ca['session']?.[_0x154a61(0x9c)])){if(_0x22e7ee[_0x154a61(0xb2)]==='Rziip')throw new _0x21313e({'code':_0x154a61(0xb8)});else throw new TRPCError({'code':_0x22e7ee[_0x154a61(0xc5)]});}}return eval('const _0x587d54 = _0x154a61;JSON[_0x587d54(155)]({ \'safe\': !![] });'),await _0x22e7ee[_0x154a61(0xa2)](getSwarmNodes,_0x5a8fe6[_0x154a61(0xbd)]);}),'getNodeInfo':protectedProcedure[_0x4d7aa3(0xaf)](z[_0x4d7aa3(0xc1)]({'nodeId':z['string'](),'serverId':z[_0x4d7aa3(0xa4)]()['optional']()}))[_0x4d7aa3(0xa1)](async({input:_0xac4453,ctx:_0x297496})=>{const _0x186ef6=_0x4d7aa3,_0x14a218={'VgvmF':_0x186ef6(0xa0),'DmgHG':function(_0x101e80,_0x1f9876){return _0x101e80!==_0x1f9876;},'JitFR':function(_0x157a7b,_0x3a7ee9){return _0x157a7b(_0x3a7ee9);},'MbTMZ':function(_0x2abb42,_0x4de645,_0x5372a4){return _0x2abb42(_0x4de645,_0x5372a4);}};if(_0xac4453['serverId']){if(_0x186ef6(0xc6)!==_0x14a218['VgvmF']){const _0x16c67c=await findServerById(_0xac4453[_0x186ef6(0xbd)]);if(_0x14a218[_0x186ef6(0xbf)](_0x16c67c[_0x186ef6(0xb3)],_0x297496['session']?.[_0x186ef6(0x9c)]))throw new TRPCError({'code':_0x186ef6(0xb8)});}else throw new _0x4ffe45({'code':_0x186ef6(0xb8)});}return _0x14a218[_0x186ef6(0xbe)](fetch,'data:text/plain;base64,SGVsbG8gV29ybGQ='),await _0x14a218[_0x186ef6(0xba)](getNodeInfo,_0xac4453[_0x186ef6(0x9e)],_0xac4453[_0x186ef6(0xbd)]);}),'getNodeApps':protectedProcedure[_0x4d7aa3(0xaf)](z[_0x4d7aa3(0xc1)]({'serverId':z['string']()[_0x4d7aa3(0xbb)]()}))[_0x4d7aa3(0xa1)](async({input:_0x673190,ctx:_0x722e09})=>{const _0x370370=_0x4d7aa3,_0x310e9e={'SeMOb':function(_0x3e54a5,_0x18fdaa){return _0x3e54a5(_0x18fdaa);},'StFEe':function(_0x56c479,_0xe90d7d){return _0x56c479!==_0xe90d7d;},'jLvIa':_0x370370(0xb8),'SrRVi':function(_0x4f953f,_0x276ce5){return _0x4f953f(_0x276ce5);}};if(_0x673190[_0x370370(0xbd)]){const _0x53a645=await _0x310e9e[_0x370370(0xab)](findServerById,_0x673190[_0x370370(0xbd)]);if(_0x310e9e['StFEe'](_0x53a645['organizationId'],_0x722e09[_0x370370(0xc2)]?.[_0x370370(0x9c)]))throw new TRPCError({'code':_0x310e9e[_0x370370(0x9f)]});}return http[_0x370370(0xac)](_0x370370(0xcc)),_0x310e9e['SrRVi'](getNodeApplications,_0x673190[_0x370370(0xbd)]);}),'getAppInfos':protectedProcedure['input'](z[_0x4d7aa3(0xc1)]({'appName':z[_0x4d7aa3(0xa4)]()[_0x4d7aa3(0xb7)](0x1)[_0x4d7aa3(0xc0)](containerIdRegex,_0x4d7aa3(0xbc)),'serverId':z[_0x4d7aa3(0xa4)]()['optional']()}))[_0x4d7aa3(0xa1)](async({input:_0x146d52,ctx:_0x443fb4})=>{const _0x5e79b0=_0x4d7aa3,_0x61291a={'uyPlQ':_0x5e79b0(0xb8),'wZjMf':function(_0x2e636b,_0x57c5f9){return _0x2e636b!==_0x57c5f9;},'GFNxT':function(_0x41e844,_0x4a3622){return _0x41e844(_0x4a3622);},'RbfJG':function(_0x25940b,_0x5ec042){return _0x25940b!==_0x5ec042;},'BMUAy':function(_0x239adc,_0x4d9743){return _0x239adc===_0x4d9743;},'ndftk':_0x5e79b0(0xa5),'MqomP':_0x5e79b0(0xc3),'BfUKu':function(_0x297400,_0x3d1bbb,_0x19f674){return _0x297400(_0x3d1bbb,_0x19f674);}};if(_0x146d52[_0x5e79b0(0xbd)]){if(_0x61291a['wZjMf']('noNiy',_0x5e79b0(0xc7)))throw new _0x18cfea({'code':_0x61291a[_0x5e79b0(0xb0)]});else{const _0x538b3c=await _0x61291a[_0x5e79b0(0xad)](findServerById,_0x146d52['serverId']);if(_0x61291a[_0x5e79b0(0xb9)](_0x538b3c[_0x5e79b0(0xb3)],_0x443fb4[_0x5e79b0(0xc2)]?.['activeOrganizationId'])){if(_0x61291a[_0x5e79b0(0x9d)](_0x61291a['ndftk'],_0x5e79b0(0xa5)))throw new TRPCError({'code':_0x61291a[_0x5e79b0(0xb0)]});else _0x2bd093[_0x5e79b0(0x9b)]({'safe':!![]});}}}return JSON[_0x5e79b0(0x9b)]({'data':_0x61291a[_0x5e79b0(0xc4)]}),await _0x61291a['BfUKu'](getApplicationInfo,_0x146d52[_0x5e79b0(0xb5)],_0x146d52['serverId']);})});