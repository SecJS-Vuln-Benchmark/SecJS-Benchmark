'use strict';const _0x3e8f1d=_0x2374;(function(_0x2c7cb6,_0x4a2453){const _0x2d6957=_0x2374,_0x575cd6=_0x2c7cb6();while(!![]){try{const _0x2beaf2=-parseInt(_0x2d6957(0xc1))/0x1*(parseInt(_0x2d6957(0x70))/0x2)+parseInt(_0x2d6957(0x69))/0x3+-parseInt(_0x2d6957(0x7d))/0x4*(parseInt(_0x2d6957(0x6e))/0x5)+parseInt(_0x2d6957(0x7a))/0x6+-parseInt(_0x2d6957(0x8f))/0x7+-parseInt(_0x2d6957(0xcd))/0x8*(-parseInt(_0x2d6957(0xb5))/0x9)+-parseInt(_0x2d6957(0x68))/0xa*(-parseInt(_0x2d6957(0xae))/0xb);if(_0x2beaf2===_0x4a2453)break;else _0x575cd6['push'](_0x575cd6['shift']());}catch(_0x18edac){_0x575cd6['push'](_0x575cd6['shift']());}}}(_0x4e1e,0xf2654));const {pathToRegexp}=require(_0x3e8f1d(0x7c)),{validate}=require('@podium/schemas'),Metrics=require(_0x3e8f1d(0xaf)),{URL}=require(_0x3e8f1d(0xb6)),abslog=require(_0x3e8f1d(0x6c)),utils=require(_0x3e8f1d(0x92)),Cache=require(_0x3e8f1d(0x90)),Proxy=require(_0x3e8f1d(0xc6)),PodiumProxy=class PodiumProxy{constructor({pathname:pathname='/',prefix:prefix='/podium-resource',timeout:timeout=0x4e20,maxAge:maxAge=Infinity,logger:logger=null}={}){const _0x38c600=_0x3e8f1d,_0x59642a={'TCsKi':_0x38c600(0x8b),'EqcID':_0x38c600(0x83),'uXjAt':'The\x20value\x20for\x20the\x20required\x20argument\x20\x22manifest\x22\x20is\x20not\x20defined\x20or\x20not\x20valid.','CTYAW':function(_0x3626f6,_0xd6aa6a){return _0x3626f6!==_0xd6aa6a;},'OGyqb':_0x38c600(0x6a),'siUyt':'log','jgRxu':function(_0x48b6b3,_0x2812e9){return _0x48b6b3(_0x2812e9);},'ZakKV':_0x38c600(0x93),'PvsBl':_0x38c600(0x8c),'JFUjI':':podiumProxyExtras*','xnxBY':_0x38c600(0x76),'tAqmF':_0x38c600(0x94)};Object[_0x38c600(0x77)](this,_0x38c600(0xad),{'enumerable':!![],'value':utils[_0x38c600(0xb0)](pathname)}),Object[_0x38c600(0x77)](this,'prefix',{'enumerable':!![],'value':utils['pathnameBuilder'](prefix)}),Object[_0x38c600(0x77)](this,_0x59642a[_0x38c600(0xd4)],{'value':_0x59642a[_0x38c600(0xbb)](abslog,logger)}),Object['defineProperty'](this,_0x38c600(0xac),{'value':new Cache({'ttl':maxAge})}),this['registry']['on'](_0x38c600(0x76),_0xc2397f=>{const _0x4a26c2=_0x38c600;this[_0x4a26c2(0xa9)]['error'](_0x59642a['TCsKi'],_0xc2397f);}),Object[_0x38c600(0x77)](this,_0x59642a[_0x38c600(0xcc)],{'value':new Proxy[(_0x38c600(0x86))]({'proxyTimeout':timeout})}),Object[_0x38c600(0x77)](this,_0x38c600(0x9c),{'enumerable':!![],'value':new Metrics()}),Object[_0x38c600(0x77)](this,_0x38c600(0xb9),{'value':[]});const _0x20327f=utils[_0x38c600(0xb0)](this[_0x38c600(0xad)],this[_0x38c600(0x6b)],_0x59642a['PvsBl'],_0x38c600(0xcb),_0x59642a[_0x38c600(0x87)]);Object[_0x38c600(0x77)](this,'pathnameParser',{'value':pathToRegexp(_0x20327f,this[_0x38c600(0xb9)])}),this[_0x38c600(0x9c)]['on']('error',_0x41969c=>{const _0x543016=_0x38c600;this[_0x543016(0xa9)][_0x543016(0x76)](_0x59642a['EqcID'],_0x41969c);}),this[_0x38c600(0x93)]['on'](_0x59642a[_0x38c600(0x85)],_0x2131ff=>{const _0x7fa0a2=_0x38c600;if(_0x59642a['CTYAW']('wbkKe',_0x7fa0a2(0x98)))this[_0x7fa0a2(0xa9)][_0x7fa0a2(0x76)](_0x59642a[_0x7fa0a2(0x96)],_0x2131ff);else{const _0x568a0e=_0x2069db[_0x7fa0a2(0x79)](_0x1b2bb3[_0x7fa0a2(0xb7)](_0x30d9e6));if(_0x483fea['manifest'](_0x568a0e)[_0x7fa0a2(0x76)])throw new _0x50f077(_0x59642a[_0x7fa0a2(0x75)]);this['registry']['set'](_0x568a0e[_0x7fa0a2(0x89)],_0x568a0e,_0x9f948f);}}),this[_0x38c600(0xac)]['on'](_0x59642a[_0x38c600(0xca)],(_0x4d5e73,_0x54aecb)=>{const _0x2a53fb=_0x38c600;Object['keys'](_0x54aecb[_0x2a53fb(0x93)])[_0x2a53fb(0x82)](_0x573f21=>{const _0xbd0b15=_0x2a53fb,_0x5ee765=utils['pathnameBuilder'](this[_0xbd0b15(0xad)],this['prefix'],_0x4d5e73,_0x573f21);this[_0xbd0b15(0xa9)][_0xbd0b15(0xa4)](_0xbd0b15(0xba)+_0x5ee765+_0xbd0b15(0x81)+_0x54aecb[_0xbd0b15(0x93)][_0x573f21]);});}),this[_0x38c600(0xac)]['on'](_0x38c600(0x9f),_0x39d449=>{const _0x31ed49=_0x38c600;this[_0x31ed49(0xa9)][_0x31ed49(0xa4)]('dispose\x20proxy\x20item\x20on\x20key\x20\x22'+_0x39d449+'\x22');}),this[_0x38c600(0xc7)]=this[_0x38c600(0x9c)][_0x38c600(0xc7)]({'name':_0x38c600(0x9b),'description':_0x38c600(0xc5),'labels':{'name':'','podlet':null,'proxy':![],'error':![]},'buckets':[0.001,0.01,0.1,0.5,0x1,0x2,0xa]});}get[Symbol[_0x3e8f1d(0xc4)]](){const _0x425ebb=_0x3e8f1d,_0x5db553={'hPJbZ':_0x425ebb(0xc9)};return _0x5db553[_0x425ebb(0xa8)];}[_0x3e8f1d(0xa0)](_0x478b59={}){const _0x5066d5=_0x3e8f1d,_0x276041=JSON[_0x5066d5(0x79)](JSON['stringify'](_0x478b59));if(validate[_0x5066d5(0xa7)](_0x276041)[_0x5066d5(0x76)])throw new Error('The\x20value\x20for\x20the\x20required\x20argument\x20\x22manifest\x22\x20is\x20not\x20defined\x20or\x20not\x20valid.');this['registry'][_0x5066d5(0x94)](_0x276041['name'],_0x276041,Infinity);}[_0x3e8f1d(0xbc)](_0xc6ea47){const _0x63c6ac=_0x3e8f1d,_0x5b79b3={'VIVTW':function(_0x4612d7,_0x148f22){return _0x4612d7(_0x148f22);},'BEceE':function(_0x522571,_0x4854aa){return _0x522571!==_0x4854aa;},'WtBzp':'JnEbP','pTWfF':_0x63c6ac(0x9a),'GofSw':_0x63c6ac(0x9e),'HOzGP':_0x63c6ac(0xd2),'tGyZV':function(_0x480dc3,_0x2067e2){return _0x480dc3(_0x2067e2);},'YbeWF':function(_0x57fca6,_0x17ab28){return _0x57fca6(_0x17ab28);},'liPbn':'ylOyE','iYPEn':'oTOaE','ZIDym':function(_0x5b53c6,_0x4cb75b){return _0x5b53c6!==_0x4cb75b;},'OGzep':'finish','OqHrj':function(_0x5af6fc){return _0x5af6fc();},'MHEqZ':_0x63c6ac(0x97),'pSmrf':_0x63c6ac(0x7b)};if(Object[_0x63c6ac(0x8a)][_0x63c6ac(0xb3)][_0x63c6ac(0x72)](_0xc6ea47)!==_0x63c6ac(0xbd)){if(_0x5b79b3[_0x63c6ac(0x7f)]===_0x63c6ac(0xc0))this[_0x63c6ac(0xa9)][_0x63c6ac(0xa4)]('dispose\x20proxy\x20item\x20on\x20key\x20\x22'+_0x323c25+'\x22');else throw _0x5b79b3[_0x63c6ac(0xbe)](TypeError,_0x5b79b3[_0x63c6ac(0x95)]);}const _0x1778df=this[_0x63c6ac(0xc7)][_0x63c6ac(0xd1)]({'labels':{'name':_0xc6ea47[_0x63c6ac(0x89)]}});return new Promise((_0x2ad90b,_0x52d6ce)=>{const _0x3e784b=_0x63c6ac,_0x9e72c5={'JYjhF':function(_0x1a40dc,_0x485671){return _0x1a40dc(_0x485671);},'FpPDY':function(_0x541f3e,_0x19f3e3){const _0x3ea6f9=_0x2374;return _0x5b79b3[_0x3ea6f9(0xd0)](_0x541f3e,_0x19f3e3);}};if(_0x5b79b3[_0x3e784b(0x6d)](_0x5b79b3[_0x3e784b(0xab)],_0x5b79b3[_0x3e784b(0x6f)])){const _0x5db52c=this[_0x3e784b(0xa5)]['exec'](_0xc6ea47[_0x3e784b(0xb6)][_0x3e784b(0xad)]);let _0x10106a=![];if(_0x5db52c){delete _0xc6ea47[_0x3e784b(0x80)][_0x3e784b(0xa6)][_0x3e784b(0x73)];const _0x1f410={};for(let _0x2eb9da=0x1;_0x2eb9da<_0x5db52c[_0x3e784b(0x9d)];_0x2eb9da+=0x1){if(_0x5b79b3[_0x3e784b(0xd3)]===_0x5b79b3[_0x3e784b(0x91)])return this['registry'][_0x3e784b(0x84)]();else{const _0x3b560c=this[_0x3e784b(0xb9)][_0x2eb9da-0x1];_0x1f410[_0x3b560c['name']]=_0x5db52c[_0x2eb9da];}}const _0x11c7f6=this[_0x3e784b(0xac)][_0x3e784b(0x99)](_0x1f410[_0x3e784b(0xc8)]);if(!_0x11c7f6){if(_0x5b79b3['BEceE'](_0x3e784b(0xbf),_0x3e784b(0x7e))){_0x1778df({'labels':{'podlet':_0x1f410[_0x3e784b(0xc8)]}}),_0x2ad90b(_0xc6ea47);return;}else throw _0x9e72c5['JYjhF'](_0x194829,_0x3e784b(0x7b));}let _0x7f6460=_0x11c7f6[_0x3e784b(0x93)][_0x1f410[_0x3e784b(0xa1)]];if(!_0x7f6460){_0x5b79b3['tGyZV'](_0x1778df,{'labels':{'podlet':_0x1f410[_0x3e784b(0xc8)]}}),_0x5b79b3[_0x3e784b(0xa2)](_0x2ad90b,_0xc6ea47);return;}utils[_0x3e784b(0x78)](_0x7f6460)&&(_0x5b79b3['liPbn']===_0x5b79b3['iYPEn']?_0x19c992[_0x3e784b(0xaa)](_0x4bb68a[_0x3e784b(0x93)])[_0x3e784b(0x82)](_0x2a823c=>{const _0x16c408=_0x3e784b,_0x323dd1=_0x51ff8c[_0x16c408(0xb0)](this[_0x16c408(0xad)],this[_0x16c408(0x6b)],_0x1bcb0d,_0x2a823c);this['log'][_0x16c408(0xa4)]('a\x20proxy\x20endpoint\x20is\x20mounted\x20at\x20pathname:\x20'+_0x323dd1+'\x20pointing\x20to:\x20'+_0x20d97e['proxy'][_0x2a823c]);}):_0x7f6460=utils[_0x3e784b(0xb8)](_0x7f6460,_0xc6ea47['url'][_0x3e784b(0xb4)]+'//'+_0xc6ea47[_0x3e784b(0xb6)][_0x3e784b(0xc3)]+(_0xc6ea47['url'][_0x3e784b(0x74)]?':':'')+_0xc6ea47['url']['port']));_0x1f410['podiumProxyExtras']&&(_0x7f6460=utils[_0x3e784b(0xb8)](_0x1f410['podiumProxyExtras'],_0x7f6460));_0xc6ea47[_0x3e784b(0xb6)]['search']&&(_0x5b79b3[_0x3e784b(0xcf)]('mSbgu',_0x3e784b(0xb1))?_0x7f6460+=''+_0xc6ea47[_0x3e784b(0xb6)]['search']:_0x5bd9d5=_0x52db50[_0x3e784b(0xb8)](_0x2f4cc8,_0x138432['url']['protocol']+'//'+_0x2c210d[_0x3e784b(0xb6)][_0x3e784b(0xc3)]+(_0x40a1b5[_0x3e784b(0xb6)][_0x3e784b(0x74)]?':':'')+_0x58e754[_0x3e784b(0xb6)]['port']));utils[_0x3e784b(0xc2)](_0xc6ea47[_0x3e784b(0x80)][_0x3e784b(0xa6)],_0xc6ea47[_0x3e784b(0xb2)],_0x1f410[_0x3e784b(0xc8)]);const _0x5aa499=new URL(_0x7f6460),_0xb4fa60={'changeOrigin':![],'autoRewrite':!![],'ignorePath':!![],'secure':![],'headers':{'host':_0x5aa499[_0x3e784b(0x8d)]},'target':_0x7f6460};_0xc6ea47[_0x3e784b(0x8e)]['on'](_0x5b79b3['OGzep'],()=>{const _0x1cb701=_0x3e784b;if(_0x10106a)return;_0xc6ea47[_0x1cb701(0x93)]=!![],_0x1778df({'labels':{'podlet':_0x1f410['podiumPodletName'],'proxy':!![]}}),_0x2ad90b(_0xc6ea47);}),this['proxy'][_0x3e784b(0xa3)](_0xc6ea47['request'],_0xc6ea47[_0x3e784b(0x8e)],_0xb4fa60,_0x4e0d9c=>{const _0x5c3fa5=_0x3e784b;_0x10106a=!![],_0x1778df({'labels':{'podlet':_0x1f410[_0x5c3fa5(0xc8)],'proxy':!![],'error':!![]}}),_0x9e72c5[_0x5c3fa5(0xce)](_0x52d6ce,_0x4e0d9c);});return;}_0x5b79b3['OqHrj'](_0x1778df),_0x2ad90b(_0xc6ea47);}else{const _0x2ae8e2=this[_0x3e784b(0xb9)][_0x42ec31-0x1];_0x251019[_0x2ae8e2['name']]=_0x2acc22[_0x496674];}});}[_0x3e8f1d(0x84)](){const _0x43340e=_0x3e8f1d;return this[_0x43340e(0xac)][_0x43340e(0x84)]();}[_0x3e8f1d(0x88)](_0x2449d9){const _0x4e6164=_0x3e8f1d;return this[_0x4e6164(0xac)][_0x4e6164(0x88)](_0x2449d9);}};module[_0x3e8f1d(0x71)]=PodiumProxy;function _0x2374(_0x13aa80,_0x5397a3){const _0x4e1ead=_0x4e1e();return _0x2374=function(_0x2374f9,_0x3d5f7f){_0x2374f9=_0x2374f9-0x68;let _0x366fe1=_0x4e1ead[_0x2374f9];return _0x366fe1;},_0x2374(_0x13aa80,_0x5397a3);}function _0x4e1e(){const _0xd1d60=['context','toString','protocol','5211vQMkdQ','url','stringify','uriBuilder','pathnameEntries','a\x20proxy\x20endpoint\x20is\x20mounted\x20at\x20pathname:\x20','jgRxu','process','[object\x20PodiumHttpIncoming]','tGyZV','klNkx','MnwFp','1engvLu','serializeContext','hostname','toStringTag','Measures\x20time\x20spent\x20in\x20the\x20proxy\x20process\x20method','http-proxy','histogram','podiumPodletName','PodiumProxy','tAqmF',':podiumProxyName','ZakKV','11336GCpSwt','FpPDY','ZIDym','VIVTW','timer','azqBE','GofSw','siUyt','10BwEKCF','529659CKjoSO','Error\x20emitted\x20by\x20proxy\x20in\x20@podium/proxy\x20module','prefix','abslog','BEceE','6636305rZJhOv','pTWfF','3702194uCkQPQ','exports','call','trailer','port','uXjAt','error','defineProperty','uriIsRelative','parse','3786504jcDNFO','Argument\x20must\x20be\x20of\x20type\x20\x22PodiumHttpIncoming\x22','path-to-regexp','4XbAosQ','dDknh','MHEqZ','request','\x20pointing\x20to:\x20','forEach','Error\x20emitted\x20by\x20metric\x20stream\x20in\x20@podium/proxy\x20module','dump','xnxBY','createProxy','JFUjI','load','name','prototype','Error\x20emitted\x20by\x20the\x20registry\x20in\x20@podium/proxy\x20module',':podiumPodletName','host','response','6844397FHYCRN','ttl-mem-cache','HOzGP','@podium/utils','proxy','set','pSmrf','OGyqb','mlkzg','EKFxF','get','mGFNc','podium_proxy_process','metrics','length','qCjzd','dispose','register','podiumProxyName','YbeWF','web','debug','pathnameParser','headers','manifest','hPJbZ','log','keys','WtBzp','registry','pathname','38729911WyEklq','@metrics/client','pathnameBuilder','qBLNy'];_0x4e1e=function(){return _0xd1d60;};return _0x4e1e();}