'use strict';const _0x266b3d=_0x5a4f;(function(_0x25656f,_0x342bd5){const _0x29fad2=_0x5a4f,_0x475bff=_0x25656f();while(!![]){try{const _0x275c9b=parseInt(_0x29fad2(0x12f))/0x1+-parseInt(_0x29fad2(0x108))/0x2+parseInt(_0x29fad2(0x127))/0x3*(parseInt(_0x29fad2(0x122))/0x4)+parseInt(_0x29fad2(0x16c))/0x5+parseInt(_0x29fad2(0x11b))/0x6+parseInt(_0x29fad2(0x150))/0x7+-parseInt(_0x29fad2(0x10e))/0x8;if(_0x275c9b===_0x342bd5)break;else _0x475bff['push'](_0x475bff['shift']());}catch(_0x3124a9){_0x475bff['push'](_0x475bff['shift']());}}}(_0x35fe,0x6641c));const {test}=require(_0x266b3d(0x170)),{exec}=require(_0x266b3d(0x13c)),{destinationObjectStream,HttpServer,request}=require(_0x266b3d(0x13e)),{HttpIncoming}=require(_0x266b3d(0x169)),http=require('http'),Proxy=require('..'),reqFn=(_0x4f826e,_0x565bad)=>{const _0x5e624c=_0x266b3d,_0x5b34be={'CANAu':_0x5e624c(0x118),'nlicd':_0x5e624c(0x128)};_0x565bad[_0x5e624c(0x158)]=0xc8,_0x565bad[_0x5e624c(0x16f)](_0x5e624c(0x172),_0x5b34be['CANAu']),_0x565bad[_0x5e624c(0x163)](JSON[_0x5e624c(0x121)]({'method':_0x4f826e[_0x5e624c(0x15d)],'type':_0x5b34be['nlicd'],'url':_0x5e624c(0x106)+_0x4f826e[_0x5e624c(0x151)][_0x5e624c(0x142)]+_0x4f826e[_0x5e624c(0x13d)]}));};function _0x35fe(){const _0x38caa4=['/foo','host','/layout/proxy/bar/a?foo=bar','payload','ZBVsV','locals','podium','Nlmgq','/layout/proxy/foo/b','lbQwO','HlvNe','/some/path?foo=bar','daRSx','type','PynhD','3486924pJEios','headers','bbbQU','address','/some/path','then','GTmYj','gXMBG','statusCode','podlet','Proxying()\x20-\x20metrics\x20collection','ITTCH','SjMYW','method','MzbCc','dBzdv','jnGTD','Proxying()\x20-\x20mount\x20proxy\x20on\x20\x22/{pathname}/{prefix}/{manifestName}/{proxyName}\x22\x20-\x20GET\x20request\x20-\x20should\x20proxy\x20to\x20\x22{destination}/some/where/else\x22','/some/where/else','end','Trailer\x20header\x20should\x20not\x20be\x20set','OxRva','KTPtU','meta','bar','@podium/utils','http://localhost:9854','XXvTo','2745140PUGAbM','Vdqhl','CdBqA','setHeader','tap','foo','Content-Type','Proxying()\x20-\x20trailer\x20header\x20-\x20is\x20not\x20forwarded\x20according\x20to\x20spec','podium_proxy_process','utZMD','sdZgd','createServer','Muujb','/layout/proxy/foo/a','/layout/proxy/bar/a','uwjbe','port','GET','EuvSn','POST','yqtiN','http://','1.0.0','68740GMPMvo','match','catch','CmGva','nltqb','close','13958384zbBTlo','proxy','push','wJnSU','Proxying()\x20-\x20GET\x20request\x20with\x20additional\x20path\x20values\x20-\x20should\x20proxy\x20to\x20\x22{destination}/some/path/extra?foo=bar\x22','Proxying()\x20-\x20GET\x20request\x20with\x20query\x20params\x20-\x20should\x20proxy\x20query\x20params\x20to\x20\x22{destination}/some/path\x22','register','mylayout','Qrdaq','labels','application/json','BYxFp','process','4201356QstxKZ','DPSmr','YMqKy','VRGSL','KwgzP','request','stringify','1234836EJwRaQ','jNjCj','length','ZNDHs','HaIkh','3raOTiw','destination','forEach','RULSP','/some/path/extra?foo=bar','app','pipe','listen','141917XKWVyL','Proxying()\x20-\x20POST\x20request\x20-\x20should\x20proxy\x20query\x20params\x20to\x20\x22{destination}/some/path\x22','error','body','/layout/','equal','/layout/proxy/foo/a\x27','name','trailer','tpXYV','qXrxO','lMAKv','server','child_process','url','@podium/test-utils','rbdPs','metrics'];_0x35fe=function(){return _0x38caa4;};return _0x35fe();}class ProxyServer{constructor(_0x1e04a7=[],_0x2b1e70={}){const _0x219fc4=_0x266b3d,_0x379686={'rbdPs':_0x219fc4(0x172),'uwjbe':_0x219fc4(0x118),'wHIqU':_0x219fc4(0x10f),'jnGTD':'EuvSn','HjfjJ':'not\x20found'};this['server']=undefined,this[_0x219fc4(0x153)]='',this[_0x219fc4(0x10f)]=new Proxy({'pathname':_0x219fc4(0x133),'prefix':_0x219fc4(0x10f)}),_0x1e04a7[_0x219fc4(0x129)](_0x3a408a=>{const _0x4c8380=_0x219fc4;this[_0x4c8380(0x10f)][_0x4c8380(0x114)](_0x3a408a);}),this[_0x219fc4(0x12c)]=http[_0x219fc4(0x177)]((_0x36dcb4,_0x3cfb03)=>{const _0x4c4f44=_0x219fc4,_0x56fdf1={'yqtiN':function(_0xf3ea02,_0x375265){return _0xf3ea02(_0x375265);}};_0x3cfb03[_0x4c4f44(0x146)]={},_0x3cfb03[_0x4c4f44(0x146)][_0x4c4f44(0x147)]={},_0x3cfb03[_0x4c4f44(0x146)][_0x4c4f44(0x147)]['context']={'podium-foo':'bar'};const _0x4ffbd7=new HttpIncoming(_0x36dcb4,_0x3cfb03,_0x3cfb03[_0x4c4f44(0x146)]);if(_0x2b1e70[_0x4c4f44(0x136)])_0x4ffbd7['name']=_0x2b1e70[_0x4c4f44(0x136)];this['proxy'][_0x4c4f44(0x11a)](_0x4ffbd7)[_0x4c4f44(0x155)](_0x47c898=>{const _0x12b09d=_0x4c4f44;if(_0x47c898[_0x12b09d(0x10f)])return;_0x3cfb03[_0x12b09d(0x158)]=0xc8,_0x3cfb03['setHeader'](_0x379686[_0x12b09d(0x13f)],_0x379686[_0x12b09d(0x100)]),_0x3cfb03[_0x12b09d(0x163)](JSON['stringify']({'message':'ok','status':0xc8,'type':_0x379686['wHIqU']}));})[_0x4c4f44(0x10a)](()=>{const _0x48413b=_0x4c4f44;_0x379686[_0x48413b(0x160)]!==_0x48413b(0x103)?_0x51e5ec?_0x56fdf1[_0x48413b(0x105)](_0x402866,_0x119895):_0x136dc7():(_0x3cfb03[_0x48413b(0x158)]=0x194,_0x3cfb03['setHeader'](_0x48413b(0x172),_0x48413b(0x118)),_0x3cfb03[_0x48413b(0x163)](JSON[_0x48413b(0x121)]({'message':_0x379686['HjfjJ'],'status':0x194,'type':_0x48413b(0x10f)})));});});}[_0x266b3d(0x12e)](){const _0x441c12={'zjxdU':function(_0x5b0211,_0x5b0f76){return _0x5b0211(_0x5b0f76);}};return new Promise(_0xe13327=>{const _0x5df92c=_0x5a4f;this[_0x5df92c(0x13b)]=this[_0x5df92c(0x12c)][_0x5df92c(0x12e)](0x0,'localhost',()=>{const _0x407d4e=_0x5df92c;this[_0x407d4e(0x153)]=_0x407d4e(0x106)+this['server'][_0x407d4e(0x153)]()['address']+':'+this[_0x407d4e(0x13b)][_0x407d4e(0x153)]()[_0x407d4e(0x101)],_0x441c12['zjxdU'](_0xe13327,this[_0x407d4e(0x153)]);});});}['close'](){const _0x21034b={'GTmYj':'qsxHQ','SjMYW':function(_0x1406bd,_0x1ccb1c){return _0x1406bd(_0x1ccb1c);}};return new Promise((_0x529a6c,_0x3af1a9)=>{const _0x35ee18=_0x5a4f,_0x2c33e3={'XVmXz':function(_0x5d9b0b,_0xff7418){return _0x5d9b0b(_0xff7418);}};this[_0x35ee18(0x13b)][_0x35ee18(0x10d)](_0x89bbe9=>{const _0x5dafa0=_0x35ee18;if(_0x89bbe9){if(_0x21034b[_0x5dafa0(0x156)]===_0x5dafa0(0x10c)){_0x2c33e3['XVmXz'](_0x3a51db,_0x5556d3);return;}else _0x21034b[_0x5dafa0(0x15c)](_0x3af1a9,_0x89bbe9);}else _0x529a6c();});});}}function _0x5a4f(_0x367cdf,_0x4db5a){const _0x35fe4a=_0x35fe();return _0x5a4f=function(_0x5a4f68,_0x3a7d19){_0x5a4f68=_0x5a4f68-0x100;let _0x44329e=_0x35fe4a[_0x5a4f68];return _0x44329e;},_0x5a4f(_0x367cdf,_0x4db5a);}test('Proxying()\x20-\x20mount\x20proxy\x20on\x20\x22/{pathname}/{prefix}/{manifestName}/{proxyName}\x22\x20-\x20GET\x20request\x20-\x20should\x20proxy\x20to\x20\x22{destination}/some/path\x22',async _0x275a10=>{const _0x5b29c0=_0x266b3d,_0x298116={'arLXL':_0x5b29c0(0x107),'rXEhF':_0x5b29c0(0x17a)},_0x3ce1e0=new HttpServer();_0x3ce1e0[_0x5b29c0(0x120)]=reqFn;const _0xc6577c=await _0x3ce1e0[_0x5b29c0(0x12e)](),_0x95dd5=new ProxyServer([{'name':'bar','proxy':{'a':_0xc6577c+_0x5b29c0(0x154)},'version':_0x298116['arLXL'],'content':'/'}]),_0x491d7d=await _0x95dd5[_0x5b29c0(0x12e)](),{body:_0x2f520f}=await request({'address':_0x491d7d,'pathname':_0x298116['rXEhF'],'json':!![]});_0x275a10[_0x5b29c0(0x134)](_0x2f520f[_0x5b29c0(0x14e)],_0x5b29c0(0x128)),_0x275a10[_0x5b29c0(0x134)](_0x2f520f[_0x5b29c0(0x15d)],'GET'),_0x275a10['equal'](_0x2f520f[_0x5b29c0(0x13d)],_0xc6577c+_0x5b29c0(0x154)),await _0x95dd5[_0x5b29c0(0x10d)](),await _0x3ce1e0[_0x5b29c0(0x10d)](),_0x275a10[_0x5b29c0(0x163)]();}),test(_0x266b3d(0x161),async _0x2b5be8=>{const _0x3c7109=_0x266b3d,_0x466334={'HlvNe':'foo','utZMD':'/layout/proxy/foo/b','dBzdv':_0x3c7109(0x102)},_0x10af8a=new HttpServer();_0x10af8a[_0x3c7109(0x120)]=reqFn;const _0x57d4ec=await _0x10af8a[_0x3c7109(0x12e)](),_0x3b9e80=new ProxyServer([{'name':_0x466334[_0x3c7109(0x14b)],'proxy':{'b':_0x57d4ec+'/some/where/else'},'version':_0x3c7109(0x107),'content':'/'}]),_0x4f74f6=await _0x3b9e80[_0x3c7109(0x12e)](),{body:_0x48de40}=await request({'address':_0x4f74f6,'pathname':_0x466334[_0x3c7109(0x175)],'json':!![]});_0x2b5be8[_0x3c7109(0x134)](_0x48de40[_0x3c7109(0x14e)],'destination'),_0x2b5be8[_0x3c7109(0x134)](_0x48de40['method'],_0x466334[_0x3c7109(0x15f)]),_0x2b5be8[_0x3c7109(0x134)](_0x48de40[_0x3c7109(0x13d)],_0x57d4ec+_0x3c7109(0x162)),await _0x3b9e80['close'](),await _0x10af8a[_0x3c7109(0x10d)](),_0x2b5be8[_0x3c7109(0x163)]();}),test('Proxying()\x20-\x20mount\x20multiple\x20proxies\x20on\x20\x22/{pathname}/{prefix}/{manifestName}/{proxyName}\x22\x20-\x20GET\x20request\x20-\x20should\x20proxy\x20to\x20destinations',async _0x47f99d=>{const _0x10cdb2=_0x266b3d,_0x66172d={'KwgzP':'bar','Qrdaq':_0x10cdb2(0x102),'tpXYV':'destination'},_0x1a4e81=new HttpServer();_0x1a4e81['request']=reqFn;const _0x2afec6=await _0x1a4e81[_0x10cdb2(0x12e)](),_0x559234=new ProxyServer([{'name':_0x66172d[_0x10cdb2(0x11f)],'proxy':{'a':_0x2afec6+_0x10cdb2(0x154)},'version':_0x10cdb2(0x107),'content':'/'},{'name':_0x10cdb2(0x171),'proxy':{'b':_0x2afec6+'/some/where/else'},'version':'1.0.0','content':'/'}]),_0x5cc516=await _0x559234[_0x10cdb2(0x12e)](),_0x407b87=await request({'address':_0x5cc516,'pathname':'/layout/proxy/bar/a','json':!![]});_0x47f99d['equal'](_0x407b87[_0x10cdb2(0x132)]['type'],'destination'),_0x47f99d['equal'](_0x407b87[_0x10cdb2(0x132)]['method'],_0x66172d['Qrdaq']),_0x47f99d[_0x10cdb2(0x134)](_0x407b87[_0x10cdb2(0x132)][_0x10cdb2(0x13d)],_0x2afec6+_0x10cdb2(0x154));const _0x59a53b=await request({'address':_0x5cc516,'pathname':_0x10cdb2(0x149),'json':!![]});_0x47f99d[_0x10cdb2(0x134)](_0x59a53b['body'][_0x10cdb2(0x14e)],_0x66172d[_0x10cdb2(0x138)]),_0x47f99d['equal'](_0x59a53b['body'][_0x10cdb2(0x15d)],_0x66172d[_0x10cdb2(0x116)]),_0x47f99d[_0x10cdb2(0x134)](_0x59a53b[_0x10cdb2(0x132)][_0x10cdb2(0x13d)],_0x2afec6+'/some/where/else'),await _0x559234[_0x10cdb2(0x10d)](),await _0x1a4e81[_0x10cdb2(0x10d)](),_0x47f99d[_0x10cdb2(0x163)]();}),test(_0x266b3d(0x112),async _0x45c8f3=>{const _0x19e6ec=_0x266b3d,_0x41af6f={'MzbCc':'bar','CdBqA':'1.0.0','ITTCH':_0x19e6ec(0x128)},_0x3c026b=new HttpServer();_0x3c026b[_0x19e6ec(0x120)]=reqFn;const _0x4fa436=await _0x3c026b['listen'](),_0x374d5f=new ProxyServer([{'name':_0x41af6f[_0x19e6ec(0x15e)],'proxy':{'a':_0x4fa436+_0x19e6ec(0x154)},'version':_0x41af6f[_0x19e6ec(0x16e)],'content':'/'}]),_0x301365=await _0x374d5f[_0x19e6ec(0x12e)](),{body:_0x3397ee}=await request({'address':_0x301365,'pathname':'/layout/proxy/bar/a/extra?foo=bar','json':!![]});_0x45c8f3[_0x19e6ec(0x134)](_0x3397ee[_0x19e6ec(0x14e)],_0x41af6f[_0x19e6ec(0x15b)]),_0x45c8f3[_0x19e6ec(0x134)](_0x3397ee['method'],_0x19e6ec(0x102)),_0x45c8f3[_0x19e6ec(0x134)](_0x3397ee[_0x19e6ec(0x13d)],_0x4fa436+_0x19e6ec(0x12b)),await _0x374d5f['close'](),await _0x3c026b[_0x19e6ec(0x10d)](),_0x45c8f3['end']();}),test(_0x266b3d(0x113),async _0x386cf0=>{const _0x41e513=_0x266b3d,_0x328d8d={'jNjCj':_0x41e513(0x107),'daRSx':function(_0xa41c20,_0x3b9a4b){return _0xa41c20(_0x3b9a4b);},'BYxFp':_0x41e513(0x143),'wJnSU':_0x41e513(0x102)},_0x345b87=new HttpServer();_0x345b87[_0x41e513(0x120)]=reqFn;const _0x389191=await _0x345b87[_0x41e513(0x12e)](),_0x3ea88a=new ProxyServer([{'name':_0x41e513(0x168),'proxy':{'a':_0x389191+'/some/path'},'version':_0x328d8d[_0x41e513(0x123)],'content':'/'}]),_0x3f2029=await _0x3ea88a[_0x41e513(0x12e)](),{body:_0x4602e4}=await _0x328d8d[_0x41e513(0x14d)](request,{'address':_0x3f2029,'pathname':_0x328d8d[_0x41e513(0x119)],'json':!![]});_0x386cf0[_0x41e513(0x134)](_0x4602e4[_0x41e513(0x14e)],'destination'),_0x386cf0['equal'](_0x4602e4[_0x41e513(0x15d)],_0x328d8d[_0x41e513(0x111)]),_0x386cf0['equal'](_0x4602e4[_0x41e513(0x13d)],_0x389191+_0x41e513(0x14c)),await _0x3ea88a[_0x41e513(0x10d)](),await _0x345b87[_0x41e513(0x10d)](),_0x386cf0[_0x41e513(0x163)]();}),test(_0x266b3d(0x130),async _0x1ae870=>{const _0x4c46da=_0x266b3d,_0xae4dc5={'KTPtU':_0x4c46da(0x168),'Muujb':function(_0x152c6b,_0x47ef1c,_0x56eae3){return _0x152c6b(_0x47ef1c,_0x56eae3);},'rzOSp':'POST','SLRIz':_0x4c46da(0x144),'VRGSL':_0x4c46da(0x128)},_0x2659c3=new HttpServer();_0x2659c3[_0x4c46da(0x120)]=reqFn;const _0x39f47f=await _0x2659c3[_0x4c46da(0x12e)](),_0x2ec118=new ProxyServer([{'name':_0xae4dc5[_0x4c46da(0x166)],'proxy':{'a':_0x39f47f+_0x4c46da(0x154)},'version':'1.0.0','content':'/'}]),_0x4dc263=await _0x2ec118['listen'](),{body:_0x263e1c}=await _0xae4dc5[_0x4c46da(0x178)](request,{'address':_0x4dc263,'pathname':'/layout/proxy/bar/a','method':_0xae4dc5['rzOSp'],'json':!![]},_0xae4dc5['SLRIz']);_0x1ae870[_0x4c46da(0x134)](_0x263e1c['type'],_0xae4dc5[_0x4c46da(0x11e)]),_0x1ae870[_0x4c46da(0x134)](_0x263e1c[_0x4c46da(0x15d)],_0x4c46da(0x104)),_0x1ae870[_0x4c46da(0x134)](_0x263e1c[_0x4c46da(0x13d)],_0x39f47f+'/some/path'),await _0x2ec118['close'](),await _0x2659c3['close'](),_0x1ae870[_0x4c46da(0x163)]();}),test(_0x266b3d(0x15a),async _0x50c022=>{const _0x3f6e0c=_0x266b3d,_0x196457={'PynhD':'mylayout','YMqKy':_0x3f6e0c(0x159),'HaIkh':_0x3f6e0c(0x168),'qXrxO':'proxy','gXMBG':'name','bbbQU':_0x3f6e0c(0x131),'lbQwO':_0x3f6e0c(0x141),'gfipt':_0x3f6e0c(0x107),'eqHvU':function(_0x4e5ade,_0x2ee55f){return _0x4e5ade(_0x2ee55f);}},_0x3fcafe=new HttpServer();_0x3fcafe[_0x3f6e0c(0x120)]=reqFn;const _0x53b256=await _0x3fcafe[_0x3f6e0c(0x12e)](),_0x1799f6=new ProxyServer([{'name':_0x3f6e0c(0x171),'proxy':{'a':_0x196457[_0x3f6e0c(0x14a)]},'version':_0x3f6e0c(0x107),'content':'/'},{'name':_0x3f6e0c(0x168),'proxy':{'a':_0x53b256+_0x3f6e0c(0x154)},'version':_0x196457['gfipt'],'content':'/'}],{'name':_0x196457[_0x3f6e0c(0x14f)]});_0x1799f6[_0x3f6e0c(0x10f)][_0x3f6e0c(0x140)][_0x3f6e0c(0x12d)](destinationObjectStream(_0x367c36=>{const _0x4345f1=_0x3f6e0c,_0x430c25='0|7|8|6|1|4|5|2|3'['split']('|');let _0x17273b=0x0;while(!![]){switch(_0x430c25[_0x17273b++]){case'0':_0x50c022[_0x4345f1(0x134)](_0x367c36[_0x4345f1(0x124)],0x3);continue;case'1':_0x50c022[_0x4345f1(0x109)](_0x367c36[0x0][_0x4345f1(0x167)],{'buckets':[0.001,0.01,0.1,0.5,0x1,0x2,0xa]});continue;case'2':_0x50c022[_0x4345f1(0x109)](_0x367c36[0x2]['labels'],[{'name':_0x4345f1(0x136),'value':_0x196457['PynhD']},{'name':_0x196457[_0x4345f1(0x11d)],'value':_0x196457[_0x4345f1(0x126)]},{'name':_0x196457[_0x4345f1(0x139)],'value':!![]},{'name':_0x4345f1(0x131),'value':![]}]);continue;case'3':_0x50c022['match'](_0x367c36[0x2][_0x4345f1(0x167)],{'buckets':[0.001,0.01,0.1,0.5,0x1,0x2,0xa]});continue;case'4':_0x50c022[_0x4345f1(0x109)](_0x367c36[0x1][_0x4345f1(0x117)],[{'name':_0x196457[_0x4345f1(0x157)],'value':'mylayout'},{'name':_0x196457[_0x4345f1(0x11d)],'value':_0x4345f1(0x171)},{'name':_0x4345f1(0x10f),'value':!![]},{'name':_0x196457[_0x4345f1(0x152)],'value':![]}]);continue;case'5':_0x50c022[_0x4345f1(0x109)](_0x367c36[0x1][_0x4345f1(0x167)],{'buckets':[0.001,0.01,0.1,0.5,0x1,0x2,0xa]});continue;case'6':_0x50c022[_0x4345f1(0x109)](_0x367c36[0x0]['labels'],[{'name':'name','value':_0x4345f1(0x115)},{'name':_0x4345f1(0x159),'value':null},{'name':_0x4345f1(0x10f),'value':![]},{'name':_0x196457['bbbQU'],'value':![]}]);continue;case'7':_0x50c022[_0x4345f1(0x134)](_0x367c36[0x0][_0x4345f1(0x136)],_0x4345f1(0x174));continue;case'8':_0x50c022[_0x4345f1(0x134)](_0x367c36[0x0][_0x4345f1(0x14e)],0x5);continue;}break;}}));const _0x12c2d1=await _0x1799f6[_0x3f6e0c(0x12e)]();await request({'address':_0x12c2d1,'pathname':_0x3f6e0c(0x179)}),await _0x196457['eqHvU'](request,{'address':_0x12c2d1,'pathname':_0x3f6e0c(0x17a)}),_0x1799f6[_0x3f6e0c(0x10f)][_0x3f6e0c(0x140)][_0x3f6e0c(0x110)](null),await _0x1799f6['close'](),await _0x3fcafe[_0x3f6e0c(0x10d)](),_0x50c022[_0x3f6e0c(0x163)]();}),test('Proxying()\x20-\x20proxy\x20to\x20a\x20non\x20existing\x20server\x20-\x20GET\x20request\x20will\x20error\x20-\x20should\x20collect\x20error\x20metric',async _0x305ced=>{const _0x1285bd=_0x266b3d,_0x4292b0={'Vdqhl':function(_0x39474b,_0x156696){return _0x39474b===_0x156696;},'QlafX':_0x1285bd(0x13a),'RULSP':'podlet','Nlmgq':_0x1285bd(0x168),'KwSmT':_0x1285bd(0x10f),'GLaOq':_0x1285bd(0x16a)},_0x4e2057=_0x4292b0['GLaOq'],_0x5c24a3=new ProxyServer([{'name':_0x4292b0['Nlmgq'],'proxy':{'a':_0x4e2057+'/some/path'},'version':_0x1285bd(0x107),'content':'/'}]),_0x4c3340=await _0x5c24a3[_0x1285bd(0x12e)]();_0x5c24a3[_0x1285bd(0x10f)][_0x1285bd(0x140)][_0x1285bd(0x12d)](destinationObjectStream(_0x4d5179=>{const _0x584687=_0x1285bd,_0x280674={'ZBVsV':'localhost'};if(_0x4292b0[_0x584687(0x16d)](_0x4292b0['QlafX'],_0x4292b0['QlafX']))_0x305ced['equal'](_0x4d5179[_0x584687(0x124)],0x1),_0x305ced[_0x584687(0x134)](_0x4d5179[0x0][_0x584687(0x136)],_0x584687(0x174)),_0x305ced[_0x584687(0x134)](_0x4d5179[0x0][_0x584687(0x14e)],0x5),_0x305ced['match'](_0x4d5179[0x0][_0x584687(0x117)],[{'name':_0x584687(0x136),'value':''},{'name':_0x4292b0[_0x584687(0x12a)],'value':_0x4292b0[_0x584687(0x148)]},{'name':_0x4292b0['KwSmT'],'value':!![]},{'name':'error','value':!![]}]);else{const _0x2d4eee={'sdZgd':function(_0x5838da,_0x5cfec3){return _0x5838da(_0x5cfec3);}};this[_0x584687(0x13b)]=this[_0x584687(0x12c)][_0x584687(0x12e)](0x0,_0x280674[_0x584687(0x145)],()=>{const _0x252057=_0x584687;this[_0x252057(0x153)]=_0x252057(0x106)+this[_0x252057(0x13b)]['address']()['address']+':'+this[_0x252057(0x13b)][_0x252057(0x153)]()[_0x252057(0x101)],_0x2d4eee[_0x252057(0x176)](_0x19079f,this[_0x252057(0x153)]);});}})),await request({'address':_0x4c3340,'pathname':_0x1285bd(0x17a)}),_0x5c24a3[_0x1285bd(0x10f)]['metrics']['push'](null),await _0x5c24a3['close'](),_0x305ced['end']();}),test(_0x266b3d(0x173),async _0x13ed42=>{const _0x3974c1=_0x266b3d,_0xa78802={'DPSmr':'Content-Type','CmGva':function(_0x18c825,_0xacdfe9){return _0x18c825(_0xacdfe9);},'OxRva':'foo','ZNDHs':_0x3974c1(0x115)},_0x3847aa=new HttpServer();_0x3847aa[_0x3974c1(0x120)]=(_0x18a24c,_0x2fa592)=>{const _0x3d13d6=_0x3974c1;_0x13ed42['ok'](!_0x18a24c[_0x3d13d6(0x151)][_0x3d13d6(0x137)],_0x3d13d6(0x164)),_0x2fa592['statusCode']=0xc8,_0x2fa592[_0x3d13d6(0x16f)](_0xa78802[_0x3d13d6(0x11c)],_0x3d13d6(0x118)),_0x2fa592[_0x3d13d6(0x163)](JSON['stringify']({'method':_0x18a24c[_0x3d13d6(0x15d)],'type':_0x3d13d6(0x128),'url':_0x3d13d6(0x106)+_0x18a24c[_0x3d13d6(0x151)]['host']+_0x18a24c[_0x3d13d6(0x13d)]}));};const _0x2a6ad6=await _0x3847aa['listen'](),_0x8c6fed=new ProxyServer([{'name':_0xa78802[_0x3974c1(0x165)],'proxy':{'a':_0x2a6ad6+_0x3974c1(0x154)},'version':_0x3974c1(0x107),'content':'/'}],{'name':_0xa78802[_0x3974c1(0x125)]}),_0x71f236=await _0x8c6fed[_0x3974c1(0x12e)]();await new Promise((_0x44144c,_0x495bc4)=>{const _0x262a2b=_0x3974c1,_0x25f834={'XXvTo':function(_0x4f74a2,_0x56a22c){const _0x4209a4=_0x5a4f;return _0xa78802[_0x4209a4(0x10b)](_0x4f74a2,_0x56a22c);}};exec('curl\x20-i\x20-H\x20\x27Trailer:\x20Krynos\x27\x20-H\x20\x27User-Agent:\x20Mozilla\x27\x20\x27'+_0x71f236+_0x262a2b(0x135),(_0x26ba4d,_0x2d8231,_0x4ea0e9)=>{const _0x2c96aa=_0x262a2b;if(_0x26ba4d){_0x25f834[_0x2c96aa(0x16b)](_0x495bc4,_0x26ba4d);return;}_0x25f834[_0x2c96aa(0x16b)](_0x44144c,{'stdout':_0x2d8231,'stderr':_0x4ea0e9});});}),_0x13ed42['ok'](!![]),await _0x8c6fed[_0x3974c1(0x10d)](),await _0x3847aa[_0x3974c1(0x10d)](),_0x13ed42[_0x3974c1(0x163)]();});