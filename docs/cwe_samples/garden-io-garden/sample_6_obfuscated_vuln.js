'use strict';const _0xb62a9a=_0x2438;function _0x2438(_0x350dce,_0x2dbe15){const _0x4ba82a=_0x4ba8();return _0x2438=function(_0x243891,_0x5f11c3){_0x243891=_0x243891-0xeb;let _0x4b5c37=_0x4ba82a[_0x243891];return _0x4b5c37;},_0x2438(_0x350dce,_0x2dbe15);}function _0x4ba8(){const _0x359d98=['pass','nPrsB','xMNrm','onResponse','QDrBK','ZaZZc','RxCbm','constants','register','SWwSB','Womch','push','mMsgM','filename','GJTkk','localhost','join','DiDgm','random-data','bORPo','CoLUF','7bit','3982MOKcDY','sUaXO','createReadStream','fPOhE','mimetype','should\x20store\x20file\x20on\x20disk,\x20remove\x20on\x20response\x20error','text/markdown','Kjgcx','mqaSu','port','request','multipartErrors','zPVgP','finished\x20generating','getHeaders','KculT','code','update','should\x20store\x20file\x20on\x20disk,\x20remove\x20on\x20response\x20error,\x20serial','roXBl','response','xQNcH','res\x20ended\x20successfully','sMLZG','upbrr','plan','F_OK','end','KEvym','encoding','cEnRr','resume','form-data','Temp\x20file\x20was\x20removed\x20after\x20response','JDAjz','Lvmpb','oNCvz','pnDNx','1567321hDuaHP','kzwiw','6cPDKpE','test','brbMs','pxUbl','binary/octet-stream','iveCi','BKfaW','README.md','crRyz','YbdEJ','pipe','JXmDf','VFzOA','QooNU','Ywtep','send','server','fieldname','BYJaU','node:http','uaoTK','erqRH','should\x20not\x20throw\x20on\x20request\x20files\x20cleanup\x20error','alloc','node:events','node:fs','isMultipart','1644060npdloY','OIjtM','vnqgi','error','post','win32','ppZGz','jpGAy','append','upload2','saveRequestFiles','ZnilF','RXUnp','node:crypto','bZNPC','RequestFileTooLargeError','16NxTYkW','should\x20process\x20large\x20files\x20correctly','listen','zYIHA','iCfTh','761872btrSER','close','204057gWkPsP','filepath','QiZzr','YwwMw','testdir','nBDOS','addHook','tap','dNCRk','haqKJ','http:','DVfQW','fill','equal','TxvWY','promises','jtvVG','platform','statusCode','readable-stream','address','dijAe','BDMJH','msuOV','upload','teardown','zNbwt','757572doTQlw','xrSeu','NlNOZ','part','zQWCW','fields','ZmnoQ','fOvqd','node:path','ENOENT','134845DfQoeE','70ZwRBHJ','emit','sha256','gZJcz','POST','mMOmT','should\x20store\x20file\x20on\x20disk,\x20remove\x20on\x20response','uPIGT','MmzSG','formData\x20request\x20pump:\x20no\x20err','TvroU','25qUffsh','should\x20throw\x20on\x20file\x20limit\x20error,\x20after\x20highWaterMark','TcvJk','RjYHM','tmpUploads','GyKcj','XbTSO','should\x20throw\x20on\x20file\x20save\x20error','OSzwA','bind','AJjRM','jSZdl','prjIq'];_0x4ba8=function(){return _0x359d98;};return _0x4ba8();}(function(_0x3ee923,_0x551cbb){const _0x4cba8d=_0x2438,_0x4780fb=_0x3ee923();while(!![]){try{const _0x5863dd=parseInt(_0x4cba8d(0x137))/0x1*(-parseInt(_0x4cba8d(0x15a))/0x2)+-parseInt(_0x4cba8d(0x121))/0x3+parseInt(_0x4cba8d(0xff))/0x4*(parseInt(_0x4cba8d(0x12b))/0x5)+parseInt(_0x4cba8d(0x182))/0x6*(parseInt(_0x4cba8d(0x180))/0x7)+parseInt(_0x4cba8d(0x104))/0x8+parseInt(_0x4cba8d(0x106))/0x9*(parseInt(_0x4cba8d(0x12c))/0xa)+-parseInt(_0x4cba8d(0xef))/0xb;if(_0x5863dd===_0x551cbb)break;else _0x4780fb['push'](_0x4780fb['shift']());}catch(_0x377d49){_0x4780fb['push'](_0x4780fb['shift']());}}}(_0x4ba8,0x20b4d));const test=require(_0xb62a9a(0x10d))['test'],FormData=require(_0xb62a9a(0x17a)),Fastify=require('fastify'),multipart=require('..'),http=require(_0xb62a9a(0x195)),crypto=require(_0xb62a9a(0xfc)),{Readable}=require(_0xb62a9a(0x119)),path=require(_0xb62a9a(0x129)),fs=require(_0xb62a9a(0xed)),{access}=require(_0xb62a9a(0xed))[_0xb62a9a(0x115)],EventEmitter=require(_0xb62a9a(0xec)),{once}=EventEmitter,filePath=path[_0xb62a9a(0x154)](__dirname,'../README.md');test(_0xb62a9a(0x132),async function(_0x199587){const _0x5ac1b6=_0xb62a9a,_0x37c9da={'JDAjz':_0x5ac1b6(0x11e),'uaoTK':_0x5ac1b6(0x159),'jtvVG':function(_0x287721,_0x43b661,_0x228423){return _0x287721(_0x43b661,_0x228423);},'TvroU':_0x5ac1b6(0x16e),'vnqgi':_0x5ac1b6(0x15b),'pxUbl':_0x5ac1b6(0x12a),'jpGAy':function(_0x534dc9){return _0x534dc9();},'fPOhE':_0x5ac1b6(0x147),'BGYrC':_0x5ac1b6(0x153),'EtiOg':_0x5ac1b6(0x175)};_0x199587[_0x5ac1b6(0x173)](0xa);const _0x21d368=_0x37c9da[_0x5ac1b6(0xf6)](Fastify);_0x199587['teardown'](_0x21d368[_0x5ac1b6(0x105)][_0x5ac1b6(0x140)](_0x21d368)),_0x21d368[_0x5ac1b6(0x14c)](multipart),_0x21d368[_0x5ac1b6(0xf3)]('/',async function(_0x3348a1,_0x3a0d10){const _0x5dda09=_0x5ac1b6;_0x199587['ok'](_0x3348a1['isMultipart']());const _0x17d6c3=await _0x3348a1[_0x5dda09(0xf9)]();_0x199587['ok'](_0x17d6c3[0x0][_0x5dda09(0x107)]),_0x199587[_0x5dda09(0x113)](_0x17d6c3[0x0][_0x5dda09(0x193)],_0x37c9da[_0x5dda09(0x17c)]),_0x199587['equal'](_0x17d6c3[0x0][_0x5dda09(0x151)],_0x5dda09(0x189)),_0x199587[_0x5dda09(0x113)](_0x17d6c3[0x0][_0x5dda09(0x177)],_0x37c9da[_0x5dda09(0x196)]),_0x199587[_0x5dda09(0x113)](_0x17d6c3[0x0][_0x5dda09(0x15e)],_0x5dda09(0x160)),_0x199587['ok'](_0x17d6c3[0x0][_0x5dda09(0x126)]['upload']),await _0x37c9da[_0x5dda09(0x116)](access,_0x17d6c3[0x0][_0x5dda09(0x107)],fs[_0x5dda09(0x14b)][_0x5dda09(0x174)]),_0x3a0d10['code'](0xc8)['send']();});const _0x2193a6=new EventEmitter();_0x21d368[_0x5ac1b6(0x10c)](_0x37c9da[_0x5ac1b6(0x15d)],async _0x15e86f=>{const _0x424040=_0x5ac1b6,_0x136c4b={'DiDgm':_0x424040(0x12a),'xMNrm':'Temp\x20file\x20was\x20removed\x20after\x20response','qvNnR':_0x37c9da[_0x424040(0x136)]};if(_0x37c9da[_0x424040(0xf1)]!==_0x424040(0x15b))_0x37717e[_0x424040(0x113)](_0x11bc2a[_0x424040(0x16a)],_0x136c4b[_0x424040(0x155)]),_0x4c710c['pass'](_0x136c4b[_0x424040(0x146)]),_0x2ce7e2[_0x424040(0x12d)](_0x136c4b['qvNnR']);else try{await access(_0x15e86f[_0x424040(0x13b)][0x0],fs[_0x424040(0x14b)]['F_OK']);}catch(_0x147812){_0x199587[_0x424040(0x113)](_0x147812[_0x424040(0x16a)],_0x37c9da[_0x424040(0x185)]),_0x199587[_0x424040(0x144)](_0x424040(0x17b)),_0x2193a6[_0x424040(0x12d)](_0x424040(0x16e));}}),await _0x21d368[_0x5ac1b6(0x101)]({'port':0x0});const _0x8a7e5d=new FormData(),_0x4dce36={'protocol':_0x5ac1b6(0x110),'hostname':_0x37c9da['BGYrC'],'port':_0x21d368[_0x5ac1b6(0x192)][_0x5ac1b6(0x11a)]()['port'],'path':'/','headers':_0x8a7e5d[_0x5ac1b6(0x168)](),'method':'POST'},_0x17c212=http[_0x5ac1b6(0x164)](_0x4dce36);_0x8a7e5d[_0x5ac1b6(0xf7)](_0x5ac1b6(0x11e),fs[_0x5ac1b6(0x15c)](filePath)),_0x8a7e5d[_0x5ac1b6(0x18c)](_0x17c212);const [_0x258451]=await once(_0x17c212,_0x5ac1b6(0x16e));_0x199587['equal'](_0x258451['statusCode'],0xc8),_0x258451['resume'](),await once(_0x258451,_0x37c9da['EtiOg']),await once(_0x2193a6,_0x5ac1b6(0x16e));}),test(_0xb62a9a(0x15f),async function(_0x1fcf4f){const _0x297fc0=_0xb62a9a,_0x22379b={'iOpKZ':_0x297fc0(0x183),'jSZdl':'ZuIat','cEnRr':_0x297fc0(0x17b),'uPIGT':'response','oWFTN':_0x297fc0(0x170),'XtQLa':_0x297fc0(0x175),'mqaSu':_0x297fc0(0x130),'gZJcz':function(_0x2e5143,_0x53c24b){return _0x2e5143===_0x53c24b;},'RXUnp':_0x297fc0(0x128),'XbTSO':function(_0x195f12,_0x2fafd1,_0x375df5){return _0x195f12(_0x2fafd1,_0x375df5);}};_0x1fcf4f[_0x297fc0(0x173)](0x5);const _0x4cea35=Fastify();_0x1fcf4f[_0x297fc0(0x11f)](_0x4cea35[_0x297fc0(0x105)]['bind'](_0x4cea35)),_0x4cea35[_0x297fc0(0x14c)](multipart),_0x4cea35[_0x297fc0(0xf3)]('/',async function(_0x34a734){const _0x2b3f61=_0x297fc0;_0x1fcf4f['ok'](_0x34a734[_0x2b3f61(0xee)]()),await _0x34a734['saveRequestFiles']();throw new Error(_0x22379b['iOpKZ']);});const _0x174400=new EventEmitter();_0x4cea35[_0x297fc0(0x10c)](_0x297fc0(0x147),async _0x1c48ed=>{const _0x54e1d9=_0x297fc0;try{_0x54e1d9(0x11d)===_0x22379b[_0x54e1d9(0x142)]?(_0x2115fd[_0x54e1d9(0x144)](_0x54e1d9(0x167)),_0x3822d7[_0x54e1d9(0x175)](),this['push'](null)):await access(_0x1c48ed[_0x54e1d9(0x13b)][0x0],fs[_0x54e1d9(0x14b)]['F_OK']);}catch(_0x421c09){_0x1fcf4f['equal'](_0x421c09[_0x54e1d9(0x16a)],_0x54e1d9(0x12a)),_0x1fcf4f[_0x54e1d9(0x144)](_0x22379b[_0x54e1d9(0x178)]),_0x174400[_0x54e1d9(0x12d)](_0x22379b[_0x54e1d9(0x133)]);}}),await _0x4cea35[_0x297fc0(0x101)]({'port':0x0});const _0xcfdce2=new FormData(),_0x473053={'protocol':_0x297fc0(0x110),'hostname':_0x297fc0(0x153),'port':_0x4cea35[_0x297fc0(0x192)]['address']()[_0x297fc0(0x163)],'path':'/','headers':_0xcfdce2[_0x297fc0(0x168)](),'method':_0x22379b[_0x297fc0(0x162)]},_0x37747b=http['request'](_0x473053,_0x2ef299=>{const _0x1d106e=_0x297fc0;_0x1fcf4f['equal'](_0x2ef299[_0x1d106e(0x118)],0x1f4),_0x2ef299[_0x1d106e(0x179)](),_0x2ef299['on'](_0x22379b['XtQLa'],()=>{const _0xae648f=_0x1d106e;_0x1fcf4f[_0xae648f(0x144)](_0x22379b['oWFTN']);});});_0xcfdce2[_0x297fc0(0xf7)](_0x297fc0(0x11e),fs[_0x297fc0(0x15c)](filePath));try{_0x22379b[_0x297fc0(0x12f)](_0x297fc0(0x18d),_0x22379b[_0x297fc0(0xfb)])?_0x225ab4=_0x16149f:await _0xcfdce2['pipe'](_0x37747b);}catch(_0x2c5a0a){_0x1fcf4f[_0x297fc0(0xf2)](_0x2c5a0a,_0x297fc0(0x135));}await _0x22379b[_0x297fc0(0x13d)](once,_0x174400,_0x297fc0(0x16e));}),test('should\x20throw\x20on\x20file\x20limit\x20error',async function(_0x300f05){const _0x5097a2=_0xb62a9a,_0x3a5cf2={'iCfTh':_0x5097a2(0x127),'zPVgP':_0x5097a2(0x122),'kzwiw':_0x5097a2(0x11e),'RjYHM':function(_0x2a6933){return _0x2a6933();},'kxOrf':_0x5097a2(0x110),'QDrBK':'POST','bZNPC':function(_0x959369,_0x1eb7c0,_0x813263){return _0x959369(_0x1eb7c0,_0x813263);},'prjIq':'response','erqRH':'end','GJTkk':function(_0x13c422,_0x457863){return _0x13c422===_0x457863;},'TcvJk':_0x5097a2(0x158),'gerZT':_0x5097a2(0x164)};_0x300f05['plan'](0x4);const _0x199c35=_0x3a5cf2[_0x5097a2(0x13a)](Fastify);_0x300f05['teardown'](_0x199c35['close']['bind'](_0x199c35)),_0x199c35['register'](multipart),_0x199c35[_0x5097a2(0xf3)]('/',async function(_0xf8a780,_0x41701d){const _0x19b5fd=_0x5097a2;_0x300f05['ok'](_0xf8a780[_0x19b5fd(0xee)]());try{await _0xf8a780[_0x19b5fd(0xf9)]({'limits':{'fileSize':0x1f4}}),_0x41701d['code'](0xc8)['send']();}catch(_0x123696){_0x3a5cf2[_0x19b5fd(0x103)]!==_0x3a5cf2[_0x19b5fd(0x166)]?(_0x300f05['ok'](_0x123696 instanceof _0x199c35[_0x19b5fd(0x165)]['RequestFileTooLargeError']),_0x300f05[_0x19b5fd(0x113)](_0x123696[_0x19b5fd(0x124)][_0x19b5fd(0x193)],_0x3a5cf2['kzwiw']),_0x41701d[_0x19b5fd(0x16a)](0x1f4)[_0x19b5fd(0x191)]()):_0x147c1f[_0x19b5fd(0x16a)](0x1f4)[_0x19b5fd(0x191)]();}}),await _0x199c35[_0x5097a2(0x101)]({'port':0x0});const _0x1caecd=new FormData(),_0x2b7faf={'protocol':_0x3a5cf2['kxOrf'],'hostname':'localhost','port':_0x199c35[_0x5097a2(0x192)][_0x5097a2(0x11a)]()['port'],'path':'/','headers':_0x1caecd['getHeaders'](),'method':_0x3a5cf2[_0x5097a2(0x148)]},_0x285d0c=http[_0x5097a2(0x164)](_0x2b7faf);_0x1caecd['append'](_0x3a5cf2[_0x5097a2(0x181)],fs['createReadStream'](filePath)),_0x1caecd[_0x5097a2(0x18c)](_0x285d0c);try{const [_0xb6cc70]=await _0x3a5cf2[_0x5097a2(0xfd)](once,_0x285d0c,_0x3a5cf2[_0x5097a2(0x143)]);_0x300f05[_0x5097a2(0x113)](_0xb6cc70['statusCode'],0x1f4),_0xb6cc70[_0x5097a2(0x179)](),await _0x3a5cf2['bZNPC'](once,_0xb6cc70,_0x3a5cf2[_0x5097a2(0x197)]);}catch(_0x43d958){_0x3a5cf2[_0x5097a2(0x152)](_0x3a5cf2[_0x5097a2(0x139)],_0x3a5cf2['TcvJk'])?_0x300f05[_0x5097a2(0xf2)](_0x43d958,_0x3a5cf2['gerZT']):(_0x7de6b['ok'](_0x3dfb73 instanceof _0x4d8665[_0x5097a2(0x165)][_0x5097a2(0xfe)]),_0x5e1db4[_0x5097a2(0x113)](_0x242ae9[_0x5097a2(0x124)][_0x5097a2(0x193)],_0x5097a2(0xf8)),_0x3a87c0[_0x5097a2(0x16a)](0x1f4)[_0x5097a2(0x191)]());}}),test(_0xb62a9a(0x13e),async function(_0x31b983){const _0x219987=_0xb62a9a,_0x3293fc={'KEvym':function(_0x4b470d,_0x3aff12){return _0x4b470d instanceof _0x3aff12;},'ZnilF':function(_0x2ae780,_0x2f7f2b){return _0x2ae780!==_0x2f7f2b;},'TxvWY':_0x219987(0x18a),'sADtd':function(_0x6d68cb){return _0x6d68cb();},'BKfaW':function(_0x5c8a71,_0x27f1be,_0x11a6e9){return _0x5c8a71(_0x27f1be,_0x11a6e9);},'zYIHA':_0x219987(0x164)};_0x31b983[_0x219987(0x173)](0x2);const _0x21da9f=_0x3293fc['sADtd'](Fastify);_0x31b983[_0x219987(0x11f)](_0x21da9f[_0x219987(0x105)][_0x219987(0x140)](_0x21da9f)),_0x21da9f[_0x219987(0x14c)](require('..')),_0x21da9f['post']('/',async function(_0x5ba82d,_0x5c318c){const _0xd2a61a=_0x219987;if(_0x3293fc[_0xd2a61a(0xfa)](_0xd2a61a(0x11b),_0x3293fc[_0xd2a61a(0x114)])){_0x31b983['ok'](_0x5ba82d[_0xd2a61a(0xee)]());try{await _0x5ba82d[_0xd2a61a(0xf9)]({'tmpdir':'something'}),_0x5c318c[_0xd2a61a(0x16a)](0xc8)[_0xd2a61a(0x191)]();}catch{_0x5c318c['code'](0x1f4)[_0xd2a61a(0x191)]();}}else _0x1a4746['ok'](_0x3293fc[_0xd2a61a(0x176)](_0xb050d6,_0x68e993[_0xd2a61a(0x165)][_0xd2a61a(0xfe)])),_0x5cef39[_0xd2a61a(0x113)](_0x2fa3fa[_0xd2a61a(0x124)][_0xd2a61a(0x193)],_0xd2a61a(0x11e)),_0x5285fd[_0xd2a61a(0x16a)](0x1f4)[_0xd2a61a(0x191)]();}),await _0x21da9f[_0x219987(0x101)]({'port':0x0});const _0x4c886a=new FormData(),_0x2ca6b1={'protocol':_0x219987(0x110),'hostname':_0x219987(0x153),'port':_0x21da9f[_0x219987(0x192)]['address']()[_0x219987(0x163)],'path':'/','headers':_0x4c886a['getHeaders'](),'method':_0x219987(0x130)},_0x48831f=http[_0x219987(0x164)](_0x2ca6b1),_0xc28520=fs[_0x219987(0x15c)](filePath);_0x4c886a[_0x219987(0xf7)](_0x219987(0x11e),_0xc28520),_0x4c886a[_0x219987(0x18c)](_0x48831f);try{const [_0x1c9009]=await once(_0x48831f,_0x219987(0x16e));_0x31b983['equal'](_0x1c9009[_0x219987(0x118)],0x1f4),_0x1c9009[_0x219987(0x179)](),await _0x3293fc[_0x219987(0x188)](once,_0x1c9009,_0x219987(0x175));}catch(_0x11ae0d){_0x31b983['error'](_0x11ae0d,_0x3293fc[_0x219987(0x102)]);}}),test(_0xb62a9a(0x198),{'skip':process[_0xb62a9a(0x117)]===_0xb62a9a(0xf4)},async function(_0x3cd8cd){const _0xf68ec9=_0xb62a9a,_0x9f8b0={'YbdEJ':_0xf68ec9(0x164),'bORPo':function(_0x49585e,_0x57afb1){return _0x49585e!==_0x57afb1;},'ZaZZc':_0xf68ec9(0xf0),'Womch':_0xf68ec9(0x12a),'zNbwt':_0xf68ec9(0x17b),'Ywtep':'response','roXBl':function(_0x449e08){return _0x449e08();},'oNCvz':_0xf68ec9(0x153),'SWwSB':function(_0x209664,_0x32141f){return _0x209664===_0x32141f;},'mMsgM':_0xf68ec9(0x111)};_0x3cd8cd[_0xf68ec9(0x173)](0x2);const _0x4e3cca=_0x9f8b0[_0xf68ec9(0x16d)](Fastify);_0x3cd8cd[_0xf68ec9(0x11f)](_0x4e3cca[_0xf68ec9(0x105)]['bind'](_0x4e3cca)),_0x4e3cca[_0xf68ec9(0x14c)](require('..'));const _0x42a1fa=_0x3cd8cd[_0xf68ec9(0x10a)]();_0x4e3cca[_0xf68ec9(0xf3)]('/',async function(_0x133a62,_0x3e1d52){const _0x43b532=_0xf68ec9,_0x11c4b4={'OSzwA':_0x9f8b0[_0x43b532(0x18b)]};_0x3cd8cd['ok'](_0x133a62[_0x43b532(0xee)]());try{_0x9f8b0[_0x43b532(0x157)](_0x43b532(0x10f),_0x9f8b0[_0x43b532(0x149)])?(await _0x133a62[_0x43b532(0xf9)]({'tmpdir':_0x42a1fa}),await fs['promises']['rm'](_0x42a1fa,{'recursive':!![],'force':!![]}),_0x3e1d52[_0x43b532(0x16a)](0xc8)[_0x43b532(0x191)]()):_0x339851[_0x43b532(0xf2)](_0x569e82,_0x11c4b4[_0x43b532(0x13f)]);}catch{_0x3e1d52[_0x43b532(0x16a)](0x1f4)['send']();}}),await _0x4e3cca[_0xf68ec9(0x101)]({'port':0x0});const _0x1608ff=new FormData(),_0x209a3f={'protocol':'http:','hostname':_0x9f8b0[_0xf68ec9(0x17e)],'port':_0x4e3cca['server'][_0xf68ec9(0x11a)]()[_0xf68ec9(0x163)],'path':'/','headers':_0x1608ff[_0xf68ec9(0x168)](),'method':_0xf68ec9(0x130)},_0x198657=http[_0xf68ec9(0x164)](_0x209a3f),_0x14506d=fs['createReadStream'](filePath);_0x1608ff['append'](_0xf68ec9(0x11e),_0x14506d),_0x1608ff[_0xf68ec9(0x18c)](_0x198657);try{const [_0x53e290]=await once(_0x198657,_0x9f8b0[_0xf68ec9(0x190)]);_0x3cd8cd[_0xf68ec9(0x113)](_0x53e290[_0xf68ec9(0x118)],0xc8),_0x53e290[_0xf68ec9(0x179)](),await once(_0x53e290,_0xf68ec9(0x175));}catch(_0x15c284){_0x9f8b0[_0xf68ec9(0x14d)]('DVfQW',_0x9f8b0[_0xf68ec9(0x150)])?_0x3cd8cd['error'](_0x15c284,_0x9f8b0[_0xf68ec9(0x18b)]):(_0x135543[_0xf68ec9(0x113)](_0x1169ec[_0xf68ec9(0x16a)],_0x9f8b0[_0xf68ec9(0x14e)]),_0xae3922[_0xf68ec9(0x144)](_0x9f8b0[_0xf68ec9(0x120)]),_0x1fe70c['emit'](_0x9f8b0[_0xf68ec9(0x190)]));}}),test(_0xb62a9a(0x138),async function(_0x43ab2b){const _0x3509ae=_0xb62a9a,_0x11752d={'QooNU':function(_0x38404f,_0x516e33){return _0x38404f instanceof _0x516e33;},'Cqhdp':_0x3509ae(0xf8),'YwwMw':function(_0x262be8,_0x4a3e16){return _0x262be8>_0x4a3e16;},'KculT':function(_0x59f8a0,_0x4360d2){return _0x59f8a0===_0x4360d2;},'YHRli':'finished\x20generating','BDMJH':_0x3509ae(0x12e),'iveCi':function(_0x30ba03,_0x4834ad){return _0x30ba03*_0x4834ad;},'pnDNx':function(_0x1f0ef8,_0x30ced8,_0x479e9d){return _0x1f0ef8(_0x30ced8,_0x479e9d);},'RxCbm':function(_0xf1be91,_0x5efb50,_0x472f85){return _0xf1be91(_0x5efb50,_0x472f85);}};_0x43ab2b[_0x3509ae(0x173)](0x5);const _0x1819fa=crypto['createHash'](_0x11752d[_0x3509ae(0x11c)]),_0x11b36d=Fastify();_0x43ab2b[_0x3509ae(0x11f)](_0x11b36d[_0x3509ae(0x105)][_0x3509ae(0x140)](_0x11b36d)),_0x11b36d[_0x3509ae(0x14c)](multipart),_0x11b36d['post']('/',async function(_0x413e89,_0x2be778){const _0x5b2c66=_0x3509ae;_0x43ab2b['ok'](_0x413e89['isMultipart']());try{await _0x413e89[_0x5b2c66(0xf9)]({'limits':{'fileSize':0x4268}}),_0x2be778[_0x5b2c66(0x16a)](0xc8)[_0x5b2c66(0x191)]();}catch(_0x353632){_0x43ab2b['ok'](_0x11752d[_0x5b2c66(0x18f)](_0x353632,_0x11b36d['multipartErrors']['RequestFileTooLargeError'])),_0x43ab2b['equal'](_0x353632[_0x5b2c66(0x124)][_0x5b2c66(0x193)],_0x11752d['Cqhdp']),_0x2be778[_0x5b2c66(0x16a)](0x1f4)[_0x5b2c66(0x191)]();}}),await _0x11b36d[_0x3509ae(0x101)]({'port':0x0});const _0x5c6d16=_0x11752d[_0x3509ae(0x187)](0x400,0x400);let _0x1bf9bc=_0x5c6d16;const _0x2bad5a=new FormData({'maxDataSize':_0x1bf9bc}),_0x3abbec=new Readable({'read'(_0x30feca){const _0x29ee77=_0x3509ae;_0x11752d[_0x29ee77(0x109)](_0x30feca,_0x1bf9bc)&&(_0x30feca=_0x1bf9bc);const _0x382510=Buffer['alloc'](_0x30feca)['fill']('x');_0x1819fa[_0x29ee77(0x16b)](_0x382510),this[_0x29ee77(0x14f)](_0x382510),_0x1bf9bc-=_0x30feca,_0x11752d[_0x29ee77(0x169)](_0x1bf9bc,0x0)&&(_0x43ab2b[_0x29ee77(0x144)](_0x11752d['YHRli']),_0x1819fa[_0x29ee77(0x175)](),this[_0x29ee77(0x14f)](null));}}),_0x514781={'protocol':_0x3509ae(0x110),'hostname':_0x3509ae(0x153),'port':_0x11b36d[_0x3509ae(0x192)][_0x3509ae(0x11a)]()[_0x3509ae(0x163)],'path':'/','headers':_0x2bad5a['getHeaders'](),'method':_0x3509ae(0x130)},_0x32ab1d=http[_0x3509ae(0x164)](_0x514781);_0x2bad5a['append'](_0x3509ae(0xf8),_0x3abbec,{'filename':_0x3509ae(0x156),'contentType':_0x3509ae(0x186),'knownLength':_0x5c6d16}),_0x2bad5a[_0x3509ae(0x18c)](_0x32ab1d);try{const [_0xb32da5]=await _0x11752d[_0x3509ae(0x17f)](once,_0x32ab1d,'response');_0x43ab2b['equal'](_0xb32da5[_0x3509ae(0x118)],0x1f4),_0xb32da5[_0x3509ae(0x179)](),await _0x11752d[_0x3509ae(0x14a)](once,_0xb32da5,_0x3509ae(0x175));}catch(_0x2da615){_0x43ab2b['error'](_0x2da615,_0x3509ae(0x164));}}),test(_0xb62a9a(0x16c),async function(_0x2b26ec){const _0x26e3c7=_0xb62a9a,_0x514efc={'AAEGR':'test','XmGPK':'request','bSSgJ':function(_0x5ba369,_0x36f05e){return _0x5ba369!==_0x36f05e;},'Kjgcx':_0x26e3c7(0x123),'AJjRM':_0x26e3c7(0x172),'QiZzr':function(_0x1cfa1c,_0x287ddf,_0x41ac8f){return _0x1cfa1c(_0x287ddf,_0x41ac8f);},'nPrsB':_0x26e3c7(0x17b),'TotqT':_0x26e3c7(0x16e),'dNCRk':_0x26e3c7(0x170),'brbMs':'end','MmzSG':'POST','VFzOA':function(_0x37e19b,_0x32dca9,_0x5debe3){return _0x37e19b(_0x32dca9,_0x5debe3);},'Lvmpb':_0x26e3c7(0x147),'sMLZG':function(_0x45c209){return _0x45c209();}};_0x2b26ec[_0x26e3c7(0x173)](0x12);const _0x2a7b91=Fastify();_0x2b26ec[_0x26e3c7(0x11f)](_0x2a7b91[_0x26e3c7(0x105)]['bind'](_0x2a7b91)),_0x2a7b91['register'](multipart),_0x2a7b91[_0x26e3c7(0xf3)]('/',async function(_0x43e625){const _0x45a77e=_0x26e3c7;_0x2b26ec['equal'](_0x43e625['tmpUploads'],null),await _0x43e625[_0x45a77e(0xf9)](),_0x2b26ec[_0x45a77e(0x113)](_0x43e625[_0x45a77e(0x13b)]['length'],0x1);throw new Error(_0x514efc['AAEGR']);});const _0x41dae0=new EventEmitter();_0x2a7b91[_0x26e3c7(0x10c)](_0x514efc[_0x26e3c7(0x17d)],async _0xc0b40f=>{const _0x459a3b=_0x26e3c7;if(_0x514efc['bSSgJ'](_0x514efc[_0x459a3b(0x161)],_0x514efc[_0x459a3b(0x141)]))try{await _0x514efc[_0x459a3b(0x108)](access,_0xc0b40f[_0x459a3b(0x13b)][0x0],fs[_0x459a3b(0x14b)][_0x459a3b(0x174)]);}catch(_0x1c7cf7){_0x2b26ec[_0x459a3b(0x113)](_0x1c7cf7[_0x459a3b(0x16a)],_0x459a3b(0x12a)),_0x2b26ec[_0x459a3b(0x144)](_0x514efc[_0x459a3b(0x145)]),_0x41dae0['emit'](_0x514efc['TotqT']);}else _0x43dd76[_0x459a3b(0xf2)](_0x3535eb,_0x514efc['XmGPK']);}),await _0x2a7b91['listen']({'port':0x0});async function _0x4154e4(){const _0xbe7735=_0x26e3c7,_0x388329=new FormData(),_0x5b5525={'protocol':_0xbe7735(0x110),'hostname':'localhost','port':_0x2a7b91[_0xbe7735(0x192)][_0xbe7735(0x11a)]()['port'],'path':'/','headers':_0x388329['getHeaders'](),'method':_0x514efc[_0xbe7735(0x134)]},_0xce5668=http[_0xbe7735(0x164)](_0x5b5525,_0x8c58d3=>{const _0x24a0de=_0xbe7735,_0x49a55a={'eHhNU':_0x514efc[_0x24a0de(0x10e)]};_0x2b26ec['equal'](_0x8c58d3[_0x24a0de(0x118)],0x1f4),_0x8c58d3['resume'](),_0x8c58d3['on'](_0x514efc[_0x24a0de(0x184)],()=>{_0x2b26ec['pass'](_0x49a55a['eHhNU']);});});_0x388329[_0xbe7735(0xf7)](_0xbe7735(0x11e),fs[_0xbe7735(0x15c)](filePath));try{await _0x388329[_0xbe7735(0x18c)](_0xce5668);}catch(_0x1afbfb){_0x2b26ec[_0xbe7735(0xf2)](_0x1afbfb,_0xbe7735(0x135));}await _0x514efc[_0xbe7735(0x18e)](once,_0x41dae0,'response');}await _0x514efc[_0x26e3c7(0x171)](_0x4154e4),await _0x514efc[_0x26e3c7(0x171)](_0x4154e4),await _0x4154e4();}),test(_0xb62a9a(0x100),async function(_0x4839d3){const _0x146317=_0xb62a9a,_0xb8bf47={'ppZGz':function(_0x3bf670){return _0x3bf670();},'nBDOS':_0x146317(0x130),'zQWCW':function(_0x42d346,_0x3bb279,_0x182cd9){return _0x42d346(_0x3bb279,_0x182cd9);},'xQNcH':_0x146317(0x16e),'BYJaU':_0x146317(0x175)};_0x4839d3[_0x146317(0x173)](0x2);const _0x27128b=_0xb8bf47[_0x146317(0xf5)](Fastify);_0x4839d3['teardown'](_0x27128b[_0x146317(0x105)][_0x146317(0x140)](_0x27128b)),_0x27128b[_0x146317(0x14c)](multipart),_0x27128b[_0x146317(0xf3)]('/',async function(_0xc2e310){const _0x129774=_0x146317;return _0x4839d3['ok'](_0xc2e310[_0x129774(0xee)]()),await _0xc2e310['saveRequestFiles'](),{'ok':!![]};}),await _0x27128b[_0x146317(0x101)]({'port':0x0});const _0x518203=new FormData(),_0x25b10c={'protocol':_0x146317(0x110),'hostname':'localhost','port':_0x27128b[_0x146317(0x192)][_0x146317(0x11a)]()[_0x146317(0x163)],'path':'/','headers':_0x518203[_0x146317(0x168)](),'method':_0xb8bf47[_0x146317(0x10b)]},_0x4e62ff=http[_0x146317(0x164)](_0x25b10c),_0x339403=0x11f4e,_0x38e86c=getMockFileStream(_0x339403);_0x518203[_0x146317(0xf7)](_0x146317(0x11e),_0x38e86c,{'filename':'random-data','contentType':_0x146317(0x186),'knownLength':_0x339403}),_0x518203['pipe'](_0x4e62ff);const [_0x38d067]=await _0xb8bf47[_0x146317(0x125)](once,_0x4e62ff,_0xb8bf47[_0x146317(0x16f)]);_0x4839d3[_0x146317(0x113)](_0x38d067[_0x146317(0x118)],0xc8),_0x38d067[_0x146317(0x179)](),await once(_0x38d067,_0xb8bf47[_0x146317(0x194)]);});function getMockFileStream(_0x307ed7){const _0x423ac4=_0xb62a9a,_0x440dcb={'mMOmT':_0x423ac4(0x13c)};let _0x24b3ca=_0x307ed7;const _0x2dd6c6=new Readable({'read'(_0x15b382){const _0x3ddd67=_0x423ac4;if(_0x440dcb[_0x3ddd67(0x131)]!==_0x440dcb[_0x3ddd67(0x131)])_0x3eaf08[_0x3ddd67(0xf2)](_0xf3e821,_0x3ddd67(0x164));else{_0x15b382>_0x24b3ca&&(_0x15b382=_0x24b3ca);const _0x4e25cb=Buffer[_0x3ddd67(0xeb)](_0x15b382)[_0x3ddd67(0x112)]('x');this['push'](_0x4e25cb),_0x24b3ca-=_0x15b382,_0x24b3ca===0x0&&this['push'](null);}}});return _0x2dd6c6;}