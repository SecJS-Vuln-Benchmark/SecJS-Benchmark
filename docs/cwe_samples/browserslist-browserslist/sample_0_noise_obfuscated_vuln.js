const _0x960607=_0x1dee;(function(_0x200327,_0x32ed32){const _0x294485=_0x1dee,_0x3c6199=_0x200327();while(!![]){try{const _0x4dc39a=parseInt(_0x294485(0x116))/0x1*(parseInt(_0x294485(0x148))/0x2)+parseInt(_0x294485(0x154))/0x3*(-parseInt(_0x294485(0xdf))/0x4)+parseInt(_0x294485(0x112))/0x5+parseInt(_0x294485(0xc9))/0x6+parseInt(_0x294485(0x13c))/0x7+parseInt(_0x294485(0xca))/0x8+-parseInt(_0x294485(0x106))/0x9;if(_0x4dc39a===_0x32ed32)break;else _0x3c6199['push'](_0x3c6199['shift']());}catch(_0x49c91d){_0x3c6199['push'](_0x3c6199['shift']());}}}(_0x5915,0xa6331));import*as _0x2e7132 from'trix/config';import{OBJECT_REPLACEMENT_CHARACTER}from'trix/constants';import{TEST_IMAGE_URL,assert,clickToolbarButton,createFile,expandSelection,expectDocument,moveCursor,pasteContent,pressKey,test,testGroup,testIf,triggerEvent,typeCharacters}from'test/test_helper';import{delay,nextFrame}from'../test_helpers/timing_helpers';function _0x1dee(_0x59aaab,_0x17e727){const _0x5915cb=_0x5915();return _0x1dee=function(_0x1deef7,_0x52a9dd){_0x1deef7=_0x1deef7-0xb5;let _0x5f29e7=_0x5915cb[_0x1deef7];return _0x5f29e7;},_0x1dee(_0x59aaab,_0x17e727);}testGroup(_0x960607(0xe3),{'template':_0x960607(0x14e)},()=>{const _0x1b3f79=_0x960607,_0x51c291={'lYsXS':_0x1b3f79(0x117),'YRqmU':function(_0xccfc8,_0x40a40f){return _0xccfc8(_0x40a40f);},'ifstQ':'left','SxvaQ':_0x1b3f79(0xf7),'OXWDd':_0x1b3f79(0x14d),'eboDo':function(_0x2db2dd,_0x19745a){return _0x2db2dd(_0x19745a);},'adFoP':_0x1b3f79(0x118),'yDwYa':_0x1b3f79(0xda),'XPkrG':_0x1b3f79(0x11d),'DdPty':function(_0x266967,_0x4e65c0,_0x4beaae){return _0x266967(_0x4e65c0,_0x4beaae);},'qNEhy':_0x1b3f79(0xea),'snZxx':function(_0x28c2f2,_0x474d8c){return _0x28c2f2(_0x474d8c);},'IBsPf':_0x1b3f79(0xeb),'bsaCX':function(_0x353f9e,_0x46c4f1,_0x3e7a29){return _0x353f9e(_0x46c4f1,_0x3e7a29);},'VmNsc':function(_0x1a26b8,_0x35ba9f){return _0x1a26b8(_0x35ba9f);},'CPvFY':'<div>a<br></div>\x0d<div>b<br></div>\x0d<div>c<br></div>','VydmS':function(_0x387cc3,_0x357bbd){return _0x387cc3(_0x357bbd);},'TnyjO':function(_0x5caaab,_0x337d9f){return _0x5caaab(_0x337d9f);},'FOTfP':function(_0x5a8412,_0x21af6f){return _0x5a8412(_0x21af6f);},'LyYzj':function(_0x4fc581,_0x751b52){return _0x4fc581(_0x751b52);},'Tryqi':function(_0x229572,_0x20be29){return _0x229572(_0x20be29);},'rQYuv':function(_0xee094d,_0x4949b7){return _0xee094d(_0x4949b7);},'TGiZH':function(_0x56c1cb,_0x867d13){return _0x56c1cb(_0x867d13);},'DBEmm':_0x1b3f79(0x10f),'gebDZ':_0x1b3f79(0xb8),'zrTKs':_0x1b3f79(0x158),'lsNJd':'ahttp://example.com\x0a','PaBte':function(_0x2ad2ca,_0x3305f6){return _0x2ad2ca(_0x3305f6);},'TlDwy':'Example\x0a','ipLfn':'\x20\x20\x20Example\x20from\x20\x0a\x20link\x20\x20around\x0a\x0anested\x20\x0aelements\x20','btGnT':function(_0x5d2ad8,_0x79c5c6){return _0x5d2ad8(_0x79c5c6);},'vqjYJ':function(_0x4b2550,_0x5af265){return _0x4b2550(_0x5af265);},'gucIo':function(_0x5ed25d,_0x466275,_0x4b7d1e){return _0x5ed25d(_0x466275,_0x4b7d1e);},'ebLsy':function(_0x303e81){return _0x303e81();},'aJGTd':_0x1b3f79(0x131),'kllun':_0x1b3f79(0xd3),'AoeTH':'bulletList','lipfB':'abc\x0a','ADRlD':_0x1b3f79(0xbd),'SOMBM':_0x1b3f79(0xd7),'bIXzv':function(_0x14bc68,_0x3692e1){return _0x14bc68(_0x3692e1);},'tQSha':_0x1b3f79(0x115),'lzvEu':function(_0x4823b7,_0x478044){return _0x4823b7(_0x478044);},'dxmlG':'two\x0a','rxLyA':_0x1b3f79(0x130),'ysxQt':function(_0x1608a5){return _0x1608a5();},'SgJaV':function(_0x5f4b3a,_0x2f64a5){return _0x5f4b3a(_0x2f64a5);},'IJrbs':'backspace','tsvCE':_0x1b3f79(0xb5),'SbcPf':function(_0x56e942,_0x4c2215,_0xed8788){return _0x56e942(_0x4c2215,_0xed8788);},'pCEIY':_0x1b3f79(0xdc),'vdcaA':_0x1b3f79(0x151),'CFjpr':_0x1b3f79(0x11f),'wNVtt':function(_0x24b2d0,_0x38013d){return _0x24b2d0(_0x38013d);},'tntBf':function(_0x450fbd,_0x5f282e,_0x2a853e){return _0x450fbd(_0x5f282e,_0x2a853e);},'AdDLf':_0x1b3f79(0x103),'ZCnip':_0x1b3f79(0x12e),'BcWMR':_0x1b3f79(0xbe),'EZEQy':function(_0x58c426,_0x6762f6){return _0x58c426(_0x6762f6);},'KUDit':function(_0x40a96c){return _0x40a96c();},'IyyFy':function(_0x585438,_0x35526c){return _0x585438(_0x35526c);},'DMPdN':_0x1b3f79(0xb6),'wzAda':function(_0x2e6cf5,_0x25ca71,_0x1815eb){return _0x2e6cf5(_0x25ca71,_0x1815eb);},'gDqbX':_0x1b3f79(0xfe),'BOOeI':_0x1b3f79(0xe5),'EwYhG':_0x1b3f79(0x10b),'EbpRP':_0x1b3f79(0xc0),'RDdfT':_0x1b3f79(0xd0),'vImzq':'paste\x20unsafe\x20html\x20with\x20noscript','MPRxt':'paste\x20data-trix-attachment\x20encoded\x20mathml','gHFXl':'paste\x20data-trix-attachment\x20encoded\x20embed','UPmMV':function(_0x2fec0e,_0x56794c,_0x1b3339){return _0x2fec0e(_0x56794c,_0x1b3339);},'FBLbW':function(_0xa28d90,_0x2ad060,_0x56a89b){return _0xa28d90(_0x2ad060,_0x56a89b);},'nBcHC':_0x1b3f79(0x15a),'iClDm':function(_0x4eadea,_0x12b84e,_0x5bcc88){return _0x4eadea(_0x12b84e,_0x5bcc88);},'SlJqD':_0x1b3f79(0xc7),'sirRr':_0x1b3f79(0xc2),'aBHvz':function(_0x11f536,_0x204fa2,_0x39361e){return _0x11f536(_0x204fa2,_0x39361e);},'HsUzn':'paste\x20list\x20into\x20quote','bKYjH':_0x1b3f79(0x13b),'hRJBL':function(_0x2721a1,_0x2061c8,_0x159153){return _0x2721a1(_0x2061c8,_0x159153);},'QxNkh':function(_0x293c77,_0x30e0d9,_0xb38a59){return _0x293c77(_0x30e0d9,_0xb38a59);},'qThaN':_0x1b3f79(0x13f),'TJsMy':_0x1b3f79(0xf4),'jeBZU':function(_0x18fb8a,_0x1d6693,_0x4554f9,_0x3eb644){return _0x18fb8a(_0x1d6693,_0x4554f9,_0x3eb644);},'jafnQ':'paste\x20event\x20with\x20no\x20clipboardData'};test(_0x1b3f79(0xed),async()=>{const _0x472ee3=_0x1b3f79;await typeCharacters(_0x51c291[_0x472ee3(0xdd)]),await _0x51c291['YRqmU'](moveCursor,_0x51c291[_0x472ee3(0xf6)]),await pasteContent(_0x51c291[_0x472ee3(0x152)],'!'),expectDocument(_0x51c291[_0x472ee3(0xf1)]);}),_0x51c291[_0x1b3f79(0xef)](test,_0x1b3f79(0x127),async()=>{const _0x5b3104=_0x1b3f79;await typeCharacters(_0x5b3104(0x117)),await _0x51c291[_0x5b3104(0x101)](moveCursor,_0x51c291[_0x5b3104(0xf6)]),await pasteContent('text/html',_0x51c291['adFoP']),expectDocument('ab<c\x0a');}),test(_0x51c291['gDqbX'],async()=>{const _0x1beff7=_0x1b3f79;await typeCharacters(_0x51c291[_0x1beff7(0xdd)]),await moveCursor('left'),await pasteContent(_0x51c291[_0x1beff7(0xbb)],_0x1beff7(0x113)),_0x51c291[_0x1beff7(0x120)](expectDocument,'abHello\x20world\x0aThis\x20is\x20a\x20test\x0ac\x0a');}),test(_0x1b3f79(0xdb),async()=>{const _0x75aac6=_0x1b3f79,_0xf197f1=_0x51c291[_0x75aac6(0x132)][_0x75aac6(0xb7)]('|');let _0x3ef10b=0x0;while(!![]){switch(_0xf197f1[_0x3ef10b++]){case'0':await _0x51c291[_0x75aac6(0xc3)](pasteContent,'text/html',_0x51c291['qNEhy']);continue;case'1':await moveCursor(_0x75aac6(0xe9));continue;case'2':await _0x51c291[_0x75aac6(0x120)](typeCharacters,_0x51c291[_0x75aac6(0xdd)]);continue;case'3':assert[_0x75aac6(0xff)](0x1);continue;case'4':await _0x51c291[_0x75aac6(0x13d)](expandSelection,{'direction':_0x51c291[_0x75aac6(0xf6)],'times':0x2});continue;case'5':expectDocument(_0x75aac6(0xcc));continue;}break;}}),test(_0x1b3f79(0x14f),async()=>{const _0x13c2ba=_0x1b3f79;await pasteContent(_0x13c2ba(0xf7),'a\x0d\x0ab\x0d\x0ac'),expectDocument(_0x51c291['IBsPf']);}),test(_0x51c291[_0x1b3f79(0x109)],async()=>{const _0x495ce5=_0x1b3f79;await pasteContent('text/html','<div>a<br></div>\x0d\x0a<div>b<br></div>\x0d\x0a<div>c<br></div>'),expectDocument(_0x495ce5(0xeb));}),_0x51c291[_0x1b3f79(0xef)](test,_0x51c291[_0x1b3f79(0xde)],async()=>{const _0x4e70f9=_0x1b3f79;await _0x51c291[_0x4e70f9(0x12d)](pasteContent,_0x4e70f9(0xf7),_0x4e70f9(0x14b)),_0x51c291[_0x4e70f9(0x147)](expectDocument,_0x4e70f9(0xeb));}),test(_0x51c291['EbpRP'],async()=>{const _0x1c0308=_0x1b3f79;await pasteContent(_0x1c0308(0xda),_0x51c291[_0x1c0308(0x11e)]),_0x51c291['VydmS'](expectDocument,_0x51c291[_0x1c0308(0x139)]);}),_0x51c291[_0x1b3f79(0x12d)](test,_0x51c291['RDdfT'],async()=>{const _0x48ceff=_0x1b3f79;window[_0x48ceff(0x153)]=[];const _0x40be6f={'text/plain':'x','text/html':'\x20\x20\x20\x20\x20\x20\x20\x20<img\x20onload=\x22window.unsanitized.push(\x27img.onload\x27);\x22\x20src=\x22'+TEST_IMAGE_URL+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20onerror=\x22window.unsanitized.push(\x27img.onerror\x27);\x22\x20src=\x22data:image/gif;base64,TOTALLYBOGUS\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form><math><mtext></form><form><mglyph><style></math><img\x20src\x20onerror=\x22window.unsanitized.push(\x27img.onerror\x27);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<script>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20window.unsanitized.push(\x27script\x20tag\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20</script>'};await pasteContent(_0x40be6f),await _0x51c291['TnyjO'](delay,0x14),assert[_0x48ceff(0xd1)](window[_0x48ceff(0x153)],[]),delete window[_0x48ceff(0x153)];}),test(_0x51c291['vImzq'],async()=>{const _0x49e599=_0x1b3f79;window['unsanitized']=[];const _0x3a99ed={'text/plain':'x','text/html':_0x49e599(0x13a)};await _0x51c291[_0x49e599(0x142)](pasteContent,_0x3a99ed),await delay(0x14),assert[_0x49e599(0xd1)](window[_0x49e599(0x153)],[]),delete window[_0x49e599(0x153)];}),test(_0x1b3f79(0x10e),async()=>{const _0x458100=_0x1b3f79;window['unsanitized']=[];const _0x100db3={'text/plain':'x','text/html':_0x458100(0x105)};await _0x51c291[_0x458100(0xfb)](pasteContent,_0x100db3),await _0x51c291[_0x458100(0x142)](delay,0x14),assert[_0x458100(0xd1)](window[_0x458100(0x153)],[]),delete window[_0x458100(0x153)];}),test(_0x51c291[_0x1b3f79(0xba)],async()=>{const _0x4ebf21=_0x1b3f79;window['unsanitized']=[];const _0x5380a2={'text/plain':'x','text/html':_0x4ebf21(0x122)};await _0x51c291[_0x4ebf21(0xd2)](pasteContent,_0x5380a2),await delay(0x14),assert[_0x4ebf21(0xd1)](window[_0x4ebf21(0x153)],[]),delete window[_0x4ebf21(0x153)];}),_0x51c291[_0x1b3f79(0x145)](test,_0x51c291[_0x1b3f79(0x11c)],async()=>{const _0x5324f5=_0x1b3f79;window[_0x5324f5(0x153)]=[];const _0x27fac2={'text/plain':'x','text/html':_0x5324f5(0xc1)};await _0x51c291[_0x5324f5(0x156)](pasteContent,_0x27fac2),await _0x51c291[_0x5324f5(0xec)](delay,0x14),assert[_0x5324f5(0xd1)](window['unsanitized'],[]),delete window[_0x5324f5(0x153)];}),test(_0x1b3f79(0x129),async()=>{const _0x38b732=_0x1b3f79,_0x7374fa={'text/html':_0x38b732(0xd5),'text/plain':'a\x0ab'};await _0x51c291[_0x38b732(0x144)](pasteContent,_0x7374fa),_0x51c291[_0x38b732(0xfb)](expectDocument,_0x51c291[_0x38b732(0x10c)]);}),_0x51c291[_0x1b3f79(0x150)](test,'prefers\x20formatted\x20html',async()=>{const _0x3fa0ea=_0x1b3f79,_0x109151={'text/html':_0x51c291[_0x3fa0ea(0x136)],'text/plain':'a\x0ab'};await pasteContent(_0x109151),expectDocument(_0x3fa0ea(0x110));}),test(_0x1b3f79(0x12f),async()=>{const _0x579215=_0x1b3f79;await _0x51c291[_0x579215(0xec)](typeCharacters,'a'),await _0x51c291[_0x579215(0x12d)](pasteContent,_0x579215(0x138),_0x51c291[_0x579215(0x155)]),assert[_0x579215(0xd6)]([0x1,0x12],{'href':_0x51c291[_0x579215(0x155)]}),expectDocument(_0x51c291[_0x579215(0x11b)]);}),_0x51c291[_0x1b3f79(0xe0)](test,_0x1b3f79(0xc6),async()=>{const _0x4e8bcf=_0x1b3f79,_0x462b04={'URL':_0x4e8bcf(0x158),'public.url-name':_0x4e8bcf(0x107),'text/plain':_0x51c291[_0x4e8bcf(0x155)]};await pasteContent(_0x462b04),assert[_0x4e8bcf(0xd6)]([0x0,0x7],{'href':_0x4e8bcf(0x158)}),_0x51c291[_0x4e8bcf(0xd9)](expectDocument,_0x51c291[_0x4e8bcf(0xf8)]);}),test(_0x1b3f79(0x13e),async()=>{const _0x364092=_0x1b3f79,_0x276d79={'URL':_0x364092(0xc4)};await pasteContent(_0x276d79),assert[_0x364092(0xd6)]([0x0,0x17],{}),_0x51c291['TGiZH'](expectDocument,_0x364092(0xfa));}),_0x51c291[_0x1b3f79(0x12b)](test,_0x51c291[_0x1b3f79(0x121)],async()=>{const _0x5de584=_0x1b3f79,_0x3a0bb4={'URL':_0x5de584(0x158),'public.url-name':_0x51c291[_0x5de584(0xf9)],'text/plain':_0x5de584(0x158)};await _0x51c291[_0x5de584(0xfb)](pasteContent,_0x3a0bb4),assert[_0x5de584(0xd6)]([0x0,0x28],{'href':_0x5de584(0x158)}),_0x51c291[_0x5de584(0xcb)](expectDocument,_0x5de584(0xee));}),_0x51c291[_0x1b3f79(0xe8)](test,_0x51c291[_0x1b3f79(0x10d)],async()=>{const _0x447842=_0x1b3f79;await _0x51c291[_0x447842(0xcd)](typeCharacters,_0x51c291[_0x447842(0xdd)]),await clickToolbarButton({'attribute':_0x447842(0xd7)}),await _0x51c291[_0x447842(0xe0)](pasteContent,_0x51c291[_0x447842(0xbb)],_0x447842(0xe7));const _0x2d631e=_0x51c291['ebLsy'](getDocument);assert[_0x447842(0x135)](_0x2d631e['getBlockCount'](),0x2);let _0x4fe519=_0x2d631e[_0x447842(0x125)](0x0);assert[_0x447842(0xd1)](_0x4fe519[_0x447842(0x12c)](),['quote'],assert[_0x447842(0x135)](_0x4fe519[_0x447842(0xe2)](),_0x447842(0x149))),_0x4fe519=_0x2d631e[_0x447842(0x125)](0x1),assert[_0x447842(0xd1)](_0x4fe519[_0x447842(0x12c)](),[_0x447842(0xd7),_0x447842(0x137)]),assert[_0x447842(0x135)](_0x4fe519['toString'](),_0x51c291[_0x447842(0x14a)]);}),_0x51c291[_0x1b3f79(0xef)](test,_0x51c291[_0x1b3f79(0xc8)],async()=>{const _0x393dec=_0x1b3f79;await clickToolbarButton({'attribute':_0x51c291[_0x393dec(0x124)]}),await typeCharacters(_0x393dec(0xe1)),await _0x51c291['gucIo'](pasteContent,_0x393dec(0xda),'<ul><li>one</li><li>two</li></ul>');const _0x2b762c=getDocument();assert[_0x393dec(0x135)](_0x2b762c[_0x393dec(0x104)](),0x3);let _0x15b921=_0x2b762c[_0x393dec(0x125)](0x0);assert[_0x393dec(0xd1)](_0x15b921['getAttributes'](),[_0x51c291['AoeTH'],_0x393dec(0xd3)]),assert[_0x393dec(0x135)](_0x15b921[_0x393dec(0xe2)](),_0x51c291[_0x393dec(0x123)]),_0x15b921=_0x2b762c[_0x393dec(0x125)](0x1),assert['deepEqual'](_0x15b921[_0x393dec(0x12c)](),[_0x51c291['AoeTH'],_0x393dec(0xd3)]),assert[_0x393dec(0x135)](_0x15b921['toString'](),_0x51c291[_0x393dec(0x100)]),_0x15b921=_0x2b762c[_0x393dec(0x125)](0x2),assert[_0x393dec(0xd1)](_0x15b921[_0x393dec(0x12c)](),[_0x51c291[_0x393dec(0xd4)],'bullet']),assert['equal'](_0x15b921['toString'](),_0x393dec(0xfc));}),_0x51c291[_0x1b3f79(0x102)](test,_0x51c291[_0x1b3f79(0xc5)],async()=>{const _0x18e567=_0x1b3f79;await clickToolbarButton({'attribute':_0x51c291[_0x18e567(0x146)]}),await _0x51c291[_0x18e567(0x111)](typeCharacters,_0x18e567(0x117)),await pasteContent(_0x18e567(0xda),_0x51c291[_0x18e567(0x108)]);const _0x8544c6=getDocument();assert[_0x18e567(0x135)](_0x8544c6[_0x18e567(0x104)](),0x3);let _0xaac2a1=_0x8544c6[_0x18e567(0x125)](0x0);assert[_0x18e567(0xd1)](_0xaac2a1[_0x18e567(0x12c)](),[_0x18e567(0xd7)]),assert[_0x18e567(0x135)](_0xaac2a1['toString'](),_0x18e567(0xe1)),_0xaac2a1=_0x8544c6[_0x18e567(0x125)](0x1),assert['deepEqual'](_0xaac2a1[_0x18e567(0x12c)](),[_0x18e567(0xd7),_0x18e567(0xfd),_0x51c291[_0x18e567(0x124)]]),assert[_0x18e567(0x135)](_0xaac2a1[_0x18e567(0xe2)](),_0x18e567(0xbd)),_0xaac2a1=_0x8544c6[_0x18e567(0x125)](0x2),assert[_0x18e567(0xd1)](_0xaac2a1[_0x18e567(0x12c)](),['quote','bulletList',_0x18e567(0xd3)]),assert[_0x18e567(0x135)](_0xaac2a1[_0x18e567(0xe2)](),_0x18e567(0xfc));}),test(_0x51c291['bKYjH'],async()=>{const _0xe7e65d=_0x1b3f79;await clickToolbarButton({'attribute':_0xe7e65d(0xd7)}),await clickToolbarButton({'attribute':_0x51c291[_0xe7e65d(0x124)]}),await _0x51c291[_0xe7e65d(0x11a)](typeCharacters,_0x51c291[_0xe7e65d(0x123)]),await _0x51c291[_0xe7e65d(0xe0)](pasteContent,_0xe7e65d(0xda),'<ul><li>one</li><li>two</li></ul>');const _0x3fe4e6=_0x51c291['ebLsy'](getDocument);assert[_0xe7e65d(0x135)](_0x3fe4e6['getBlockCount'](),0x3);let _0x74cdd0=_0x3fe4e6[_0xe7e65d(0x125)](0x0);assert[_0xe7e65d(0xd1)](_0x74cdd0[_0xe7e65d(0x12c)](),[_0x51c291[_0xe7e65d(0x146)],'bulletList',_0xe7e65d(0xd3)]),assert[_0xe7e65d(0x135)](_0x74cdd0['toString'](),_0xe7e65d(0xe1)),_0x74cdd0=_0x3fe4e6[_0xe7e65d(0x125)](0x1),assert[_0xe7e65d(0xd1)](_0x74cdd0[_0xe7e65d(0x12c)](),[_0xe7e65d(0xd7),_0x51c291[_0xe7e65d(0xd4)],'bullet']),assert[_0xe7e65d(0x135)](_0x74cdd0['toString'](),_0x51c291['ADRlD']),_0x74cdd0=_0x3fe4e6[_0xe7e65d(0x125)](0x2),assert['deepEqual'](_0x74cdd0[_0xe7e65d(0x12c)](),[_0xe7e65d(0xd7),_0xe7e65d(0xfd),_0xe7e65d(0xd3)]),assert[_0xe7e65d(0x135)](_0x74cdd0[_0xe7e65d(0xe2)](),_0x51c291['dxmlG']);}),_0x51c291[_0x1b3f79(0x159)](test,'paste\x20nested\x20list\x20into\x20empty\x20list\x20item',async()=>{const _0xa28b5c=_0x1b3f79;await clickToolbarButton({'attribute':_0xa28b5c(0xd3)}),await _0x51c291[_0xa28b5c(0xcb)](typeCharacters,_0x51c291[_0xa28b5c(0x141)]),_0x51c291[_0xa28b5c(0xbc)](getSelectionManager)['setLocationRange']({'index':0x0,'offset':0x1}),await nextFrame(),await _0x51c291[_0xa28b5c(0x14c)](pressKey,_0x51c291[_0xa28b5c(0xe6)]),await _0x51c291[_0xa28b5c(0x12d)](pasteContent,_0xa28b5c(0xda),_0x51c291[_0xa28b5c(0x133)]);const _0x26ef10=getDocument();assert['equal'](_0x26ef10[_0xa28b5c(0x104)](),0x3);let _0x3878a9=_0x26ef10[_0xa28b5c(0x125)](0x0);assert[_0xa28b5c(0xd1)](_0x3878a9[_0xa28b5c(0x12c)](),[_0xa28b5c(0xfd),_0xa28b5c(0xd3)]),assert[_0xa28b5c(0x135)](_0x3878a9[_0xa28b5c(0xe2)](),'a\x0a'),_0x3878a9=_0x26ef10[_0xa28b5c(0x125)](0x1),assert[_0xa28b5c(0xd1)](_0x3878a9[_0xa28b5c(0x12c)](),[_0x51c291['AoeTH'],_0x51c291[_0xa28b5c(0x124)],_0x51c291[_0xa28b5c(0xd4)],_0x51c291[_0xa28b5c(0x124)]]),assert[_0xa28b5c(0x135)](_0x3878a9[_0xa28b5c(0xe2)](),'b\x0a'),_0x3878a9=_0x26ef10[_0xa28b5c(0x125)](0x2),assert[_0xa28b5c(0xd1)](_0x3878a9['getAttributes'](),[_0xa28b5c(0xfd),_0xa28b5c(0xd3)]),assert[_0xa28b5c(0x135)](_0x3878a9[_0xa28b5c(0xe2)](),_0xa28b5c(0xdc));}),_0x51c291['QxNkh'](test,_0x51c291[_0x1b3f79(0xcf)],async()=>{const _0x22790d=_0x1b3f79;await clickToolbarButton({'attribute':_0x51c291[_0x22790d(0x124)]}),await typeCharacters(_0x51c291['rxLyA']),getSelectionManager()[_0x22790d(0x143)]({'index':0x0,'offset':0x1}),await nextFrame(),await expandSelection(_0x51c291[_0x22790d(0xf6)]),await _0x51c291[_0x22790d(0x119)](pasteContent,_0x22790d(0xda),_0x51c291[_0x22790d(0x133)]);const _0x4ca6ea=getDocument();assert[_0x22790d(0x135)](_0x4ca6ea['getBlockCount'](),0x3);let _0x1994ce=_0x4ca6ea[_0x22790d(0x125)](0x0);assert[_0x22790d(0xd1)](_0x1994ce[_0x22790d(0x12c)](),[_0x22790d(0xfd),'bullet']),assert[_0x22790d(0x135)](_0x1994ce[_0x22790d(0xe2)](),'a\x0a'),_0x1994ce=_0x4ca6ea['getBlockAtIndex'](0x1),assert[_0x22790d(0xd1)](_0x1994ce[_0x22790d(0x12c)](),['bulletList',_0x51c291[_0x22790d(0x124)],'bulletList',_0x51c291['kllun']]),assert[_0x22790d(0x135)](_0x1994ce[_0x22790d(0xe2)](),'b\x0a'),_0x1994ce=_0x4ca6ea[_0x22790d(0x125)](0x2),assert['deepEqual'](_0x1994ce[_0x22790d(0x12c)](),[_0x22790d(0xfd),_0x51c291['kllun']]),assert[_0x22790d(0x135)](_0x1994ce['toString'](),_0x51c291[_0x22790d(0xb9)]);}),test('paste\x20list\x20into\x20empty\x20block\x20before\x20list',async()=>{const _0x327761=_0x1b3f79;await clickToolbarButton({'attribute':'bullet'}),await _0x51c291[_0x327761(0x120)](typeCharacters,'c'),await moveCursor(_0x327761(0xe9)),_0x51c291['VydmS'](Function,_0x51c291[_0x327761(0x140)])(),await _0x51c291['LyYzj'](pressKey,_0x51c291[_0x327761(0xf2)]),_0x51c291[_0x327761(0x114)](getSelectionManager)[_0x327761(0x143)]({'index':0x0,'offset':0x0}),await nextFrame(),await pasteContent(_0x51c291[_0x327761(0xbb)],_0x327761(0xe4));const _0x5733ee=getDocument();assert[_0x327761(0x135)](_0x5733ee[_0x327761(0x104)](),0x3);let _0x3b1972=_0x5733ee[_0x327761(0x125)](0x0);assert[_0x327761(0xd1)](_0x3b1972[_0x327761(0x12c)](),[_0x327761(0xfd),_0x51c291[_0x327761(0x124)]]),assert[_0x327761(0x135)](_0x3b1972[_0x327761(0xe2)](),'a\x0a'),_0x3b1972=_0x5733ee[_0x327761(0x125)](0x1),assert[_0x327761(0xd1)](_0x3b1972[_0x327761(0x12c)](),[_0x51c291['AoeTH'],_0x51c291[_0x327761(0x124)]]),assert[_0x327761(0x135)](_0x3b1972[_0x327761(0xe2)](),'b\x0a'),_0x3b1972=_0x5733ee[_0x327761(0x125)](0x2),assert['deepEqual'](_0x3b1972[_0x327761(0x12c)](),[_0x327761(0xfd),_0x327761(0xd3)]),assert['equal'](_0x3b1972[_0x327761(0xe2)](),'c\x0a');}),test(_0x51c291['TJsMy'],async()=>{const _0x1dacf2=_0x1b3f79;await _0x51c291['wNVtt'](typeCharacters,'a'),await _0x51c291[_0x1dacf2(0x145)](pasteContent,_0x1dacf2(0x134),createFile()),await _0x51c291[_0x1dacf2(0x147)](expectDocument,'a'+OBJECT_REPLACEMENT_CHARACTER+'\x0a');}),_0x51c291[_0x1b3f79(0x126)](testIf,_0x2e7132[_0x1b3f79(0x157)][_0x1b3f79(0x12a)]()===0x0,_0x51c291[_0x1b3f79(0xf0)],async()=>{const _0x3da0e7=_0x1b3f79,_0x29bcd6=_0x51c291[_0x3da0e7(0xf3)][_0x3da0e7(0xb7)]('|');let _0x3661b3=0x0;while(!![]){switch(_0x29bcd6[_0x3661b3++]){case'0':document['activeElement']['insertAdjacentHTML'](_0x51c291['ZCnip'],_0x51c291[_0x3da0e7(0xbf)]);continue;case'1':await _0x51c291[_0x3da0e7(0xf5)](typeCharacters,'a');continue;case'2':await _0x51c291[_0x3da0e7(0x10a)](nextFrame);continue;case'3':_0x51c291[_0x3da0e7(0xd8)](expectDocument,'abc\x0a');continue;case'4':_0x51c291['gucIo'](triggerEvent,document[_0x3da0e7(0xce)],_0x51c291[_0x3da0e7(0x128)]);continue;}break;}});});function _0x5915(){const _0x5049b1=['quote','IyyFy','PaBte','text/html','paste\x20html\x20in\x20expanded\x20selection','zz\x0a','lYsXS','EwYhG','356lZVXlI','gucIo','abc\x0a','toString','Pasting','<ul><li>a</li><li>b</li></ul>','paste\x20html\x20with\x20CRLF\x20','IJrbs','<div>Hello\x20world<br></div><pre>This\x20is\x20a\x20test</pre>','iClDm','left','<strong>x</strong>','a\x0ab\x0ac\x0a','rQYuv','paste\x20plain\x20text','Example\x20from\x20link\x20around\x20nested\x20elements\x0a','wzAda','jafnQ','OXWDd','CFjpr','AdDLf','paste\x20file','EZEQy','ifstQ','text/plain','TlDwy','ipLfn','javascript:alert(\x27XSS\x27)\x0a','TnyjO','two\x0a','bulletList','paste\x20complex\x20html','selectedRange','ADRlD','eboDo','aBHvz','1|4|0|2|3','getBlockCount','\x20\x20\x20\x20\x20\x20copy<div\x20data-trix-attachment=\x22{&quot;contentType&quot;:&quot;text/anything&quot;,&quot;content&quot;:&quot;&lt;img\x20src=1\x20onerror=window.unsanitized.push(1)&gt;HELLO123&quot;}\x22></div>me\x0a\x20\x20\x20\x20\x20\x20','21033099bPaxqb','Example','tQSha','BOOeI','KUDit','paste\x20plain\x20text\x20with\x20CR','DBEmm','SlJqD','paste\x20data-trix-attachment\x20unsafe\x20html','a\x0ab\x0a','a\x20b\x0a','bIXzv','4306175bmqbyG','<div>Hello\x20world<br></div><div>This\x20is\x20a\x20test</div>','ebLsy','<ul><li>one</li><li>two</li></ul>','1IpyuQf','abc','&lt;','SbcPf','lzvEu','lsNJd','gHFXl','2|1|4|0|3|5','CPvFY','return','YRqmU','nBcHC','\x20\x20\x20\x20\x20\x20copy<div\x20data-trix-attachment=\x22{&quot;contentType&quot;:&quot;text/html5&quot;,&quot;content&quot;:&quot;&lt;math&gt;&lt;mtext&gt;&lt;table&gt;&lt;mglyph&gt;&lt;style&gt;&lt;img\x20src=x\x20onerror=window.unsanitized.push(1)&gt;&lt;/style&gt;XSS\x20POC&quot;}\x22></div>me\x0a\x20\x20\x20\x20\x20\x20','lipfB','kllun','getBlockAtIndex','jeBZU','paste\x20simple\x20html','DMPdN','prefers\x20plain\x20text\x20when\x20html\x20lacks\x20formatting','getLevel','FBLbW','getAttributes','bsaCX','beforeend','paste\x20URL','y\x0azz','This\x20is\x20a\x20test\x0a','XPkrG','tsvCE','Files','equal','gebDZ','code','URL','IBsPf','\x20\x20\x20\x20\x20\x20\x20\x20<div><noscript><div\x20class=\x22123</noscript>456<img\x20src=1\x20onerror=window.unsanitized.push(1)//\x22></div></noscript></div>\x0a\x20\x20\x20\x20\x20\x20','paste\x20list\x20into\x20quoted\x20list','4148445enekvC','snZxx','paste\x20JavaScript\x20URL','paste\x20nested\x20list\x20over\x20list\x20item\x20contents','vdcaA','rxLyA','FOTfP','setLocationRange','TGiZH','tntBf','SOMBM','VmNsc','1530410CttqbS','abcHello\x20world\x0a','aJGTd','a\x0db\x0dc','SgJaV','ab!c\x0a','editor_empty','paste\x20plain\x20text\x20with\x20CRLF\x20','UPmMV','return\x20new\x20Date();','SxvaQ','unsanitized','42513rTGABr','zrTKs','Tryqi','input','http://example.com','hRJBL','paste\x20URL\x20with\x20name\x20containing\x20extraneous\x20whitespace','<ul><li>a<ul><li>b</li></ul></li></ul>','paste','split','<meta\x20charset=\x27utf-8\x27>a\x0a<strong>b</strong>','pCEIY','MPRxt','yDwYa','ysxQt','one\x0a','<span>bc</span>','BcWMR','paste\x20html\x20with\x20CR','\x20\x20\x20\x20\x20\x20copy<div\x20data-trix-attachment=\x22{&quot;contentType&quot;:&quot;text/html5&quot;,&quot;content&quot;:&quot;&lt;embed\x20src=\x27window.unsanitized.push(1)\x27&gt;XSS\x20POC&quot;}\x22></div>me\x0a\x20\x20\x20\x20\x20\x20','paste\x20list\x20into\x20list','DdPty','javascript:alert(\x27XSS\x27)','HsUzn','paste\x20URL\x20with\x20name','paste\x20complex\x20html\x20into\x20formatted\x20block','sirRr','5040798xEVMSJ','9758200wxCusb','btGnT','xc\x0a','vqjYJ','activeElement','qThaN','paste\x20unsafe\x20html','deepEqual','LyYzj','bullet','AoeTH','<meta\x20charset=\x27utf-8\x27>a\x0ab','textAttributes'];_0x5915=function(){return _0x5049b1;};return _0x5915();}