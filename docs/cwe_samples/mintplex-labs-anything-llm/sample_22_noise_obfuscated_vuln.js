const _0xb53306=_0x2bc4;(function(_0x3a9fc8,_0xd67f38){const _0xc26f7=_0x2bc4,_0x20844e=_0x3a9fc8();while(!![]){try{const _0x1fd505=-parseInt(_0xc26f7(0x14c))/0x1*(parseInt(_0xc26f7(0xe8))/0x2)+parseInt(_0xc26f7(0x12c))/0x3+-parseInt(_0xc26f7(0x11f))/0x4+-parseInt(_0xc26f7(0xf1))/0x5+parseInt(_0xc26f7(0x14b))/0x6*(parseInt(_0xc26f7(0xeb))/0x7)+-parseInt(_0xc26f7(0x14a))/0x8*(-parseInt(_0xc26f7(0x152))/0x9)+-parseInt(_0xc26f7(0x138))/0xa*(parseInt(_0xc26f7(0x112))/0xb);if(_0x1fd505===_0xd67f38)break;else _0x20844e['push'](_0x20844e['shift']());}catch(_0x2cb875){_0x20844e['push'](_0x20844e['shift']());}}}(_0x190e,0x8c331));function _0x190e(){const _0x2036ad=['lower(value)','bet','should\x20correctly\x20accept\x20the\x20chosen\x20field\x20suggestion','should\x20not\x20suggest\x20arithmetic\x20operators','ulRxv','contains(\x22foo\x22','within','\x22bar\x22','11kRMzjC','notebook','should\x20show\x20expression\x20function\x20helper\x20if\x20a\x20proper\x20function\x20is\x20typed','\x22baz\x22','move\x20cursor\x20to\x20bar','ul[role=listbox]','Example','length([Comment])','[Price]\x20','value','YkDni','the\x20help\x20text\x20popover\x20should\x20follow\x20the\x20cursor\x20position','hoURt','258856tGadVb','Learn\x20more','move\x20cursor\x20to\x20foo\x20using\x20the\x20mouse','signInAsAdmin','move\x20cursor\x20to\x20bar\x20using\x20the\x20mouse','The\x20column\x20with\x20values\x20to\x20convert\x20to\x20lower\x20case.','not.exist','should\x20correctly\x20insert\x20function\x20suggestion\x20with\x20the\x20template','CustomExpressionEditor','findByText','equal','lower(','BYYfK','2956242RrHTnU','acPcv','move\x20cursor\x20to\x20contains(,\x20right\x20after\x20(','Custom\x20Expression','FIWXl','enterCustomColumnDetails','trigger','FHOdt','nFFww','qNGLV','summarize','repeat','4949960FwypSm','aeIJb','etcyw','trFMW','euekQ','JZXfj','between(column,\x20start,\x20end)','FlIDu','should\x20always\x20show\x20the\x20help\x20text\x20popover\x20on\x20top\x20of\x20the\x20custom\x20expression\x20widget\x20(metabase#52711)','jLahZ','move\x20cursor\x20to\x20contains(,\x20right\x20before\x20(','helpText','{leftarrow}','click','[Rating]','\x22foo\x22','QUzmD','should\x20not\x20show\x20suggestions\x20for\x20an\x20unfocused\x20field\x20(metabase#31643)','32oPCWZk','6ZOqbQb','34466TfGXho','HGQuP','be.visible','type','scenarios\x20>\x20question\x20>\x20custom\x20column\x20>\x20typing\x20suggestion','MrxDM','792378rhnMUY','findByTestId','fLYGj','WXEaj','acceptCompletion','the\x20help\x20text\x20popover\x20should\x20collapse\x20when\x20there\x20is\x20not\x20enough\x20space\x20to\x20render\x20it\x20and\x20the\x20completions','Combine\x20two\x20or\x20more\x20strings\x20of\x20text\x20together.','MCtBA','26FGPTPZ','realClick','MVTaO','6427897SgpDsA','get','completions','wcWIm','contain','move\x20cursor\x20into\x20contains','3369140oNglxf','contains','openProductsTable','concat(','NaFZP','ERiua','should\x20be\x20possible\x20to\x20collapse\x20the\x20help\x20text\x20popover','should','getBoundingClientRect','HvhQv','helpTextHeader','move\x20curser\x20into\x20baz','ucRIW',',\x20\x22baz\x22','HNNvV','action-buttons','popover','log','hAwaX','then','restore','viewport','closeTo','move\x20cursor\x20to\x20baz\x20using\x20the\x20mouse','Uttfn'];_0x190e=function(){return _0x2036ad;};return _0x190e();}const {H}=cy;describe(_0xb53306(0x150),()=>{const _0x3f6794=_0xb53306,_0x515124={'USlvF':_0x3f6794(0x113),'aeIJb':_0x3f6794(0x125),'PTHtQ':'[Rating]{leftarrow}{leftarrow}{leftarrow}{backspace}{backspace}t','YiJIs':_0x3f6794(0x129),'NaFZP':function(_0x5e2e23){return _0x5e2e23();},'JZXfj':_0x3f6794(0x14e),'qNGLV':_0x3f6794(0xef),'trFMW':_0x3f6794(0x10b),'xbewA':_0x3f6794(0x13e),'iMFBw':'Returns\x20the\x20string\x20of\x20text\x20in\x20all\x20lower\x20case.','MVTaO':_0x3f6794(0x12a),'FHOdt':_0x3f6794(0x10a),'OIwBy':_0x3f6794(0x12f),'FIWXl':'Count{enter}','MCtBA':function(_0x336504){return _0x336504();},'ulRxv':_0x3f6794(0xf4),'MrxDM':_0x3f6794(0x117),'WXEaj':function(_0x1f6d0e,_0xd089f){return _0x1f6d0e(_0xd089f);},'GpOyA':',\x20\x22bar\x22','ERiua':_0x3f6794(0x111),'HNNvV':_0x3f6794(0xfe),'BYYfK':_0x3f6794(0x115),'wcWIm':_0x3f6794(0xfc),'GILlK':'move\x20cursor\x20to\x20foo','fLYGj':_0x3f6794(0x144),'FXCeJ':_0x3f6794(0x12e),'QUzmD':_0x3f6794(0xf2),'YkDni':_0x3f6794(0x142),'FlIDu':function(_0x194953,_0x396fbc){return _0x194953(_0x396fbc);},'jLahZ':_0x3f6794(0xf0),'PAIsM':function(_0x3f1e1a,_0x1a7923){return _0x3f1e1a(_0x1a7923);},'mCRsd':_0x3f6794(0x147),'HvhQv':_0x3f6794(0x108),'Uttfn':function(_0x59bdfc,_0x175c12,_0x25e7ef){return _0x59bdfc(_0x175c12,_0x25e7ef);},'acPcv':function(_0x36e837,_0x282cea,_0x48cdca){return _0x36e837(_0x282cea,_0x48cdca);},'HGQuP':'should\x20correctly\x20accept\x20the\x20chosen\x20function\x20suggestion','PKNVN':_0x3f6794(0x149),'ucRIW':_0x3f6794(0x11d)};_0x515124[_0x3f6794(0x155)](beforeEach,()=>{const _0x24b68f=_0x3f6794;H[_0x24b68f(0x105)](),cy[_0x24b68f(0x122)](),H[_0x24b68f(0xf3)]({'mode':_0x515124['USlvF']});}),_0x515124[_0x3f6794(0x109)](it,_0x3f6794(0x10d),()=>{const _0x180ca2=_0x3f6794;addCustomColumn(),H[_0x180ca2(0x131)]({'formula':_0x180ca2(0x11a)}),cy[_0x180ca2(0x153)]('expression-suggestions-list')[_0x180ca2(0xf8)](_0x515124[_0x180ca2(0x139)]);}),_0x515124[_0x3f6794(0x109)](it,_0x3f6794(0x10c),()=>{const _0x219b3a=_0x3f6794;addCustomColumn(),H[_0x219b3a(0x131)]({'formula':_0x515124['PTHtQ'],'blur':![]}),H[_0x219b3a(0x127)]['acceptCompletion'](),H['CustomExpressionEditor']['value']()[_0x219b3a(0xf8)](_0x515124['YiJIs'],_0x219b3a(0x146));}),_0x515124[_0x3f6794(0x12d)](it,_0x515124[_0x3f6794(0x14d)],()=>{const _0x9f5ea6=_0x3f6794;_0x515124[_0x9f5ea6(0xf5)](addCustomColumn),H[_0x9f5ea6(0x131)]({'formula':'le','blur':![]}),H['CustomExpressionEditor'][_0x9f5ea6(0x156)](),H['CustomExpressionEditor'][_0x9f5ea6(0x143)]()[_0x9f5ea6(0xf8)](_0x515124[_0x9f5ea6(0x13d)])[_0x9f5ea6(0xf8)](_0x515124[_0x9f5ea6(0x135)],_0x9f5ea6(0x119));}),it(_0x3f6794(0x126),()=>{const _0x1c83cb=_0x3f6794;_0x515124['NaFZP'](addCustomColumn),H[_0x1c83cb(0x131)]({'formula':_0x515124[_0x1c83cb(0x13b)],'blur':![]}),H['CustomExpressionEditor']['acceptCompletion'](),H[_0x1c83cb(0x127)][_0x1c83cb(0x11b)]()[_0x1c83cb(0xf8)](_0x515124['YiJIs'],_0x515124['xbewA']);}),it(_0x3f6794(0x114),()=>{const _0x7c43d0=_0x3f6794;addCustomColumn(),H['enterCustomColumnDetails']({'formula':_0x515124[_0x7c43d0(0xea)],'blur':![]}),H['CustomExpressionEditor']['helpTextHeader']()[_0x7c43d0(0xf8)]('be.visible')[_0x7c43d0(0xf8)](_0x7c43d0(0xef),_0x515124[_0x7c43d0(0x133)]),H[_0x7c43d0(0x127)][_0x7c43d0(0x143)]()['should'](_0x515124[_0x7c43d0(0x13d)])['within'](()=>{const _0x23e777=_0x7c43d0;cy['findByText'](_0x515124['iMFBw'])['should'](_0x515124['JZXfj']),cy[_0x23e777(0x128)](_0x23e777(0x124))[_0x23e777(0xf8)](_0x515124['JZXfj']);});}),_0x515124[_0x3f6794(0x12d)](it,_0x515124['PKNVN'],()=>{const _0x31cf66=_0x3f6794;H[_0x31cf66(0x136)]({'mode':_0x31cf66(0x113)}),H[_0x31cf66(0x101)]()[_0x31cf66(0x128)](_0x515124['OIwBy'])['click'](),H['enterCustomColumnDetails']({'formula':_0x515124[_0x31cf66(0x130)],'blur':!![]}),H['CustomExpressionEditor'][_0x31cf66(0xed)]()['should'](_0x515124[_0x31cf66(0x139)]);}),it(_0x3f6794(0x140),()=>{const _0x278248=_0x3f6794,_0x5b0316={'euekQ':_0x278248(0x118),'nFFww':_0x278248(0x120),'etcyw':'mousemove'};_0x515124[_0x278248(0xe7)](addCustomColumn),H['enterCustomColumnDetails']({'formula':_0x515124[_0x278248(0x10e)],'blur':![]}),H[_0x278248(0x127)][_0x278248(0x143)]()[_0x278248(0x110)](()=>{const _0x6c06aa=_0x278248;cy[_0x6c06aa(0x128)](_0x6c06aa(0x158))[_0x6c06aa(0xe9)](),cy[_0x6c06aa(0x128)](_0x5b0316[_0x6c06aa(0x13c)])[_0x6c06aa(0xe9)](),cy['findByText'](_0x5b0316[_0x6c06aa(0x134)])[_0x6c06aa(0x132)](_0x5b0316[_0x6c06aa(0x13a)]);}),H[_0x278248(0x127)][_0x278248(0x143)]()['should'](_0x515124['JZXfj']);}),it(_0x3f6794(0xf7),()=>{const _0x3b3f50=_0x3f6794;_0x515124[_0x3b3f50(0xe7)](addCustomColumn),H[_0x3b3f50(0x131)]({'formula':_0x515124['ulRxv'],'blur':![]}),H[_0x3b3f50(0x127)][_0x3b3f50(0x143)]()['should'](_0x3b3f50(0x14e)),H['CustomExpressionEditor'][_0x3b3f50(0xfb)]()[_0x3b3f50(0x145)](),H[_0x3b3f50(0x127)][_0x3b3f50(0x143)]()[_0x3b3f50(0xf8)](_0x515124[_0x3b3f50(0x139)]),H[_0x3b3f50(0x127)][_0x3b3f50(0xfb)]()[_0x3b3f50(0x145)](),H[_0x3b3f50(0x127)]['helpText']()[_0x3b3f50(0xf8)](_0x3b3f50(0x14e));}),it(_0x3f6794(0x157),()=>{const _0x3cc55c=_0x3f6794;_0x515124[_0x3cc55c(0xf5)](addCustomColumn),H['enterCustomColumnDetails']({'formula':'concat(','blur':![]}),cy[_0x3cc55c(0x106)](0x500,0x2bc),H[_0x3cc55c(0x127)][_0x3cc55c(0x143)]()[_0x3cc55c(0xf8)](_0x3cc55c(0x14e)),H[_0x3cc55c(0x127)]['type']('[',{'focus':![]}),H[_0x3cc55c(0x127)]['completions']()[_0x3cc55c(0xec)](_0x3cc55c(0x117))[_0x3cc55c(0xf8)](_0x515124[_0x3cc55c(0x13d)]),H['CustomExpressionEditor'][_0x3cc55c(0x143)]()[_0x3cc55c(0xf8)](_0x515124[_0x3cc55c(0x139)]),H[_0x3cc55c(0x127)][_0x3cc55c(0xfb)]()[_0x3cc55c(0x145)](),H[_0x3cc55c(0x127)][_0x3cc55c(0x143)]()[_0x3cc55c(0xf8)](_0x515124[_0x3cc55c(0x13d)]),H[_0x3cc55c(0x127)][_0x3cc55c(0xed)]()[_0x3cc55c(0xec)](_0x515124[_0x3cc55c(0x151)])[_0x3cc55c(0xf8)]('not.be.visible'),H[_0x3cc55c(0x127)][_0x3cc55c(0x14f)]('I',{'focus':![]}),H[_0x3cc55c(0x127)][_0x3cc55c(0x143)]()[_0x3cc55c(0xf8)](_0x515124[_0x3cc55c(0x139)]),H['CustomExpressionEditor'][_0x3cc55c(0xed)]()[_0x3cc55c(0xec)](_0x515124['MrxDM'])[_0x3cc55c(0xf8)](_0x515124[_0x3cc55c(0x13d)]);}),_0x515124[_0x3f6794(0x109)](it,_0x515124[_0x3f6794(0xfd)],()=>{const _0x17442b=_0x3f6794;_0x515124[_0x17442b(0xf5)](addCustomColumn),H['CustomExpressionEditor'][_0x17442b(0x14f)](_0x17442b(0x10f),{'focus':![]}),_0x515124[_0x17442b(0x155)](verifyHelptextPosition,_0x17442b(0x147)),H[_0x17442b(0x127)]['type'](_0x515124['GpOyA'],{'focus':![]}),_0x515124[_0x17442b(0x155)](verifyHelptextPosition,_0x515124[_0x17442b(0xf6)]),H[_0x17442b(0x127)][_0x17442b(0x14f)](_0x515124[_0x17442b(0xff)],{'focus':![]}),verifyHelptextPosition(_0x515124[_0x17442b(0x12b)]),cy[_0x17442b(0x102)](_0x515124[_0x17442b(0xee)]),H['CustomExpressionEditor']['type']('{leftarrow}'[_0x17442b(0x137)](0x3),{'focus':![]}),verifyHelptextPosition(_0x17442b(0x115)),cy[_0x17442b(0x102)](_0x17442b(0x116)),H[_0x17442b(0x127)]['type'](_0x17442b(0x144)['repeat'](0x5),{'focus':![]}),_0x515124[_0x17442b(0x155)](verifyHelptextPosition,_0x515124[_0x17442b(0xf6)]),cy[_0x17442b(0x102)](_0x515124['GILlK']),H[_0x17442b(0x127)][_0x17442b(0x14f)](_0x515124['fLYGj'][_0x17442b(0x137)](0xa),{'focus':![]}),_0x515124['WXEaj'](verifyHelptextPosition,_0x17442b(0x147)),cy['log'](_0x515124['FXCeJ']),H[_0x17442b(0x127)]['type'](_0x17442b(0x144)[_0x17442b(0x137)](0x1),{'focus':![]}),_0x515124[_0x17442b(0x155)](verifyHelptextPosition,_0x515124[_0x17442b(0x148)]),cy[_0x17442b(0x102)](_0x515124[_0x17442b(0x11c)]),H[_0x17442b(0x127)][_0x17442b(0x14f)](_0x515124[_0x17442b(0x154)][_0x17442b(0x137)](0x1),{'focus':![]}),_0x515124[_0x17442b(0x13f)](verifyHelptextPosition,_0x515124[_0x17442b(0x148)]),cy[_0x17442b(0x102)](_0x515124[_0x17442b(0x141)]),H[_0x17442b(0x127)][_0x17442b(0x14f)](_0x17442b(0x144)[_0x17442b(0x137)](0x2),{'focus':![]}),verifyHelptextPosition(_0x515124['QUzmD']),cy['log'](_0x17442b(0x123)),H[_0x17442b(0x127)][_0x17442b(0xec)]()[_0x17442b(0x128)](_0x17442b(0x111))['click'](),_0x515124['FlIDu'](verifyHelptextPosition,'\x22bar\x22'),cy['log'](_0x17442b(0x121)),H[_0x17442b(0x127)][_0x17442b(0xec)]()[_0x17442b(0x128)](_0x17442b(0x147))['click'](),_0x515124['PAIsM'](verifyHelptextPosition,_0x515124['mCRsd']),cy[_0x17442b(0x102)](_0x515124[_0x17442b(0xfa)]),H[_0x17442b(0x127)]['get']()[_0x17442b(0x128)](_0x17442b(0x115))[_0x17442b(0x145)](),verifyHelptextPosition(_0x17442b(0x115));});});function _0x2bc4(_0x490671,_0x36dace){const _0x190e85=_0x190e();return _0x2bc4=function(_0x2bc456,_0x5e40fa){_0x2bc456=_0x2bc456-0xe7;let _0x16173a=_0x190e85[_0x2bc456];return _0x16173a;},_0x2bc4(_0x490671,_0x36dace);}const addCustomColumn=()=>{const _0x44cd5c=_0xb53306,_0x55d38b={'hoURt':_0x44cd5c(0x100),'hAwaX':'Custom\x20column'};cy['findByTestId'](_0x55d38b[_0x44cd5c(0x11e)])[_0x44cd5c(0x128)](_0x55d38b[_0x44cd5c(0x103)])[_0x44cd5c(0x145)]();};function verifyHelptextPosition(_0x9c3a83){const _0x421d8b=_0xb53306;H[_0x421d8b(0x127)][_0x421d8b(0xec)]()[_0x421d8b(0x128)](_0x9c3a83)[_0x421d8b(0x104)](_0x4c0e13=>{const _0x150391=_0x421d8b,{left:_0xf1dd6f}=_0x4c0e13[0x0][_0x150391(0xf9)]();H['CustomExpressionEditor'][_0x150391(0x143)]()[_0x150391(0x104)](_0x19e3b5=>{const _0x300d44=_0x150391,{left:_0x58f527}=_0x19e3b5[0x0][_0x300d44(0xf9)]();expect(_0x58f527)['to']['be'][_0x300d44(0x107)](_0xf1dd6f,0x5);});});}