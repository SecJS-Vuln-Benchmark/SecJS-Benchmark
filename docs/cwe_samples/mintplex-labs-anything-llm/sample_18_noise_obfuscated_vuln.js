const _0x445bb6=_0x558d;(function(_0x1d8718,_0x1d81d1){const _0xa050ff=_0x558d,_0x3b7cd5=_0x1d8718();while(!![]){try{const _0x4087d9=parseInt(_0xa050ff(0x1b0))/0x1+parseInt(_0xa050ff(0x1bf))/0x2*(parseInt(_0xa050ff(0x25d))/0x3)+parseInt(_0xa050ff(0x1f9))/0x4*(-parseInt(_0xa050ff(0x195))/0x5)+-parseInt(_0xa050ff(0x1ce))/0x6*(-parseInt(_0xa050ff(0x187))/0x7)+parseInt(_0xa050ff(0x232))/0x8*(-parseInt(_0xa050ff(0x1e4))/0x9)+parseInt(_0xa050ff(0x29a))/0xa+-parseInt(_0xa050ff(0x1e2))/0xb*(-parseInt(_0xa050ff(0x1d4))/0xc);if(_0x4087d9===_0x1d81d1)break;else _0x3b7cd5['push'](_0x3b7cd5['shift']());}catch(_0x1332d9){_0x3b7cd5['push'](_0x3b7cd5['shift']());}}}(_0x4330,0x53c99));function _0x4330(){const _0x24322d=['OEYiS','JJczz','Destination\x20DB\x206','aRhqU','commandPaletteSearch','ieCqf','Model\x20actions','SBWZH','DkfAo','sample','OkZaA','DGETY','@OSS','WTbEy','first','should\x20be\x20able\x20to\x20turn\x20the\x20feature\x20off','chevronleft','createDestinationDatabase','DELETE','split','findByText','selected-database','KJvJq','VDuHv','ZKGmn','setup','MZoiy','databaseUpdate','aLrFw','should','name','WTmXO','Save\x20changes','is_attached_dwh','KGQaz','CDtvR','zgisN','Close','jnhTn','VhPaD','nEFKm','admin\x20>\x20database\x20>\x20database\x20routing','Connected','reload','tQMSO','Select\x20a\x20database','UeMxt','EpJkF','disable\x20model\x20actions','db-routing-user-attribute','true','KLPjO','NlXaC','metabase','should\x20be\x20able\x20to\x20configure\x20db\x20routing\x20and\x20manage\x20destination\x20databases','map','lhbaH','zxMrD','2961090CJMkXZ','icon','ULtQJ','twFxG','Rwixq','QxvKa','Qpryn','iZwiy','/admin/permissions/data/database','Enable\x20database\x20routing','close','grant\x20db\x20management\x20permissions\x20to\x20all\x20users','should\x20not\x20leak\x20destinations\x20databases\x20in\x20the\x20application','Database\x20routing\x20enabled','SCdPr','YbQZU','MDffg','Destination\x20database\x20created\x20successfully','EKUMN','modifyPermission','buQDR','tloGQ','wait','MOUgR','feature\x20visibility','iBAjy','shoudl\x20not\x20see\x20database\x20in\x20data\x20reference','should\x20be\x20disabled\x20if\x20model\x20actions\x20is\x20enabled','entityPickerModalTab','popover','DZNRJ','bRrlk','Remove','should\x20not\x20see\x20destination\x20databases\x20in\x20admin\x20list\x20of\x20database','should\x20be\x20able\x20to\x20create\x20a\x20destination\x20databases','QVWCL','contain.text','QAyvy','findByLabelText','IBewa','NIQSF','TidNy','tooltip','RZuXQ','should\x20be\x20able\x20to\x20edit\x20databases','View\x20all\x206','/api/database/','VPthU','Looks\x20like\x20your\x20Password\x20is\x20incorrect.','mouseenter','IBqkq','XrSnd','Khhqj','click','log','mrwyu','link','QhAwh','within','FRKBH','role','exist','Sorry,\x20you\x20don’t\x20have\x20permission\x20to\x20see\x20that.','undoToast','database-name-confirmation-input','Database\x20routing\x20disabled','have.text','phlcJ','HsEyV','BDLuh','kJQGm','should\x20not\x20see\x20destination\x20databases\x20in\x20database\x20browser','should\x20be\x20able\x20to\x20turn\x20the\x20feature\x20on','Writable\x20Postgres12','GGHCp','uiGHj','be.checked','[data-combobox-option=\x22true\x22]','loadDatabase','signOut','lxJWY','pRaxE','closest','axvRc','YAXXc','kmiva','findAllByTestId','database-model-features-section','findByPlaceholderText','XnNDy','OSS','SOeip','\x20Destination\x20DB\x201\x20Updated','426776wqCARB','OQiPx','signIn','Destination\x20DB\x201','trigger','button','WGzGE','Performance','Yxpmv','should\x20not\x20show\x20for\x20attached\x20data\x20warehouses','zfWNg','BmZQi','uZcXz','should\x20only\x20show\x20db\x20routing\x20for\x20valid\x20database\x20types','5WRKqFJ','oteGr','yfmyn','Upload\x20Settings\x20Form','should\x20be\x20able\x20to\x20see\x20full\x20list\x20of\x20destination\x20databases','GMYxN','EyryI','OlXTr','9|17|3|4|13|11|0|12|6|15|5|19|2|7|8|16|10|1|18|20|14|21','LhkZG','aside','should\x20prevent\x20adding\x20a\x20db\x20with\x20the\x20same\x20name','FfqoH','CcKlQ','should\x20not\x20see\x20destination\x20databases\x20in\x20search','vfstr','otUyT','dZjBn','normal\x20user\x20should\x20see\x20db','GET','qHRTk','@deleteDatabase','RcbbY','gycbs','zfpYe','Discard\x20changes','mMmZp','532228CyuBwE','NxWGb','aBeKL','SIdqm','metasample124','EdKpo','MgJcq','/admin/databases/2','OFwQf','QLTTX','eGyEo','intercept','/api/database/*','Edit','ozTEH','12ZDBFUe','czthe','gQEfl','dCRnm','nbcDb','signInAsNormalUser','findByTestId','jtkVD','MvlDs','Database\x20type','TXSmb','Model\x20persistence','uDPnW','should\x20be\x20disabled\x20if\x20model\x20persistence\x20is\x20enabled','mwQIP','12hJrdqc','/admin/databases/1','MwkPX','uYwrW','EwdLz','localhost','10500YoDyNv','uQWVj','should\x20not\x20show\x20the\x20feature\x20if\x20not\x20enabled\x20in\x20token\x20features','lPtyE','XzAPA','mzzvC','should\x20be\x20able\x20to\x20bulk\x20create\x20destination\x20dbs\x20via\x20API','postgres-writable','jfUuL','should\x20validate\x20destination\x20db\x20creation','lrWjV','Yes','CREJX','realHover','2695JyncoY','should\x20be\x20disabled\x20if\x20uploads\x20are\x20enabled\x20for\x20the\x20database','234mdemng','database-connection-info-section','restore','pndzi','JFqmb','gioCy','Delete','ZNsGG','Select\x20a\x20schema','ANJMI','VuyrC','setTokenFeatures','BhXtk','deleteDatabase','NPtgI','reply','jWwtP','WnGIJ','Save','should\x20not\x20show\x20for\x20sample\x20databases','/admin/datamodel','1162236hiLDQb','ffoDo','No\x20results\x20for\x20“Destination\x20DB”','0|5|2|4|3|1','LoytI','typeAndBlurUsingLabel','MJrdQ','should\x20not\x20see\x20database\x20in\x20table\x20metadata\x20db\x20list','normal\x20user\x20should\x20not\x20see\x20db\x20routing','BVHJb','eathE','GVJqT','leave-confirmation','GKJrU','ubGZR','/api/ee/database-routing/mirror-database?check_connection_details=true','DIGxl','tFZen','OTKao','uLXfw','lElmz','HsXPR','chevrondown','should\x20be\x20able\x20to\x20remove\x20a\x20routed\x20database','IzrLU','body','Enable\x20uploads','entityPickerModal','HzUFG','@enablePersistence','modal','Destination\x20DB\x20','HSErz','mSPNF','signInAsAdmin','destination-db-list-item','get','@databaseUpdate','public','tUHIE','etuUu','be.disabled','not.exist','nIZsi','sidebar-header-title','hLrcb','attr_uid','JmxTj','should\x20not\x20allow\x20turning\x20conflicting\x20features\x20if\x20db\x20routing\x20is\x20enabled','database-list','destination-db-health-info','findByRole','UuUae','visit','should\x20not\x20be\x20able\x20to\x20manage\x20db\x20routing\x20settings','not.be.checked','OrJdV','178264TXvwqP','Destination\x20DB\x205','ckgBV','XmKQU','Query\x20builder\x20and\x20native','HmptJ','/admin/permissions/data/group/','Wehyn','normal','/admin/settings/uploads','tKVKL','validate\x20setup\x20was\x20successful','Data\x20Reference','bbHal','wnbUU','@createDestinationDatabase','/admin','No\x20destination\x20databases\x20added\x20yet','HSwfk','QgjcM','metasample123','gjSwz','setup\x20-\x20db\x20routing','VAeWb','sotSc','zWlZs','should\x20not\x20allow\x20enabling\x20database\x20for\x20uploads','/question/notebook','database-routing-section','kPeRV','switch','Destination\x20DB\x201\x20Updated','type','not.be.disabled','uJeul','Disabled','/browse/databases','main','is_sample','ellipsis','ZRLpG','PgLSa','range','24231jBVlOH','hEFRT','Rlrpm'];_0x4330=function(){return _0x24322d;};return _0x4330();}import _0x3ded3d from'underscore';import{QA_POSTGRES_PORT,SAMPLE_DB_ID,USER_GROUPS}from'e2e/support/cypress_data';import{interceptPerformanceRoutes}from'../performance/helpers/e2e-performance-helpers';import{BASE_POSTGRES_MIRROR_DB_INFO,configurDbRoutingViaAPI,createDestinationDatabasesViaAPI}from'./helpers/e2e-database-routing-helpers';const {H}=cy,{ALL_USERS_GROUP}=USER_GROUPS;describe(_0x445bb6(0x289),()=>{const _0x46f5df=_0x445bb6,_0x498bd0={'QVWCL':_0x46f5df(0x208),'lElmz':_0x46f5df(0x1bc),'lrWjV':_0x46f5df(0x27b),'Rwixq':_0x46f5df(0x272),'eathE':_0x46f5df(0x22f),'WTbEy':_0x46f5df(0x2a3),'GKJrU':_0x46f5df(0x167),'HzUFG':_0x46f5df(0x21e),'tFZen':_0x46f5df(0x266),'cFGXN':_0x46f5df(0x1df),'gONWm':_0x46f5df(0x1d3),'QhAwh':'Destination\x20DB\x201','FfqoH':'A\x20destination\x20database\x20with\x20that\x20name\x20already\x20exists.','ZOHag':'should\x20prevent\x20adding\x20with\x20incorrect\x20connection\x20info','ujZGZ':_0x46f5df(0x1b4),'GMYxN':'Cancel','OQiPx':function(_0xa20afd,_0xfc8914){return _0xa20afd===_0xfc8914;},'zfpYe':_0x46f5df(0x1be),'MDffg':_0x46f5df(0x185),'pndzi':_0x46f5df(0x1b7),'CcKlQ':'not.be.checked','QAyvy':_0x46f5df(0x222),'UuUae':_0x46f5df(0x291),'MgJcq':_0x46f5df(0x166),'WTmXO':_0x46f5df(0x243),'DkfAo':_0x46f5df(0x162),'phlcJ':_0x46f5df(0x28a),'WGzGE':_0x46f5df(0x205),'VfhMS':_0x46f5df(0x1ae),'BmZQi':'not.exist','BVHJb':_0x46f5df(0x1da),'zhtGr':function(_0x1f0f84,_0x12d085){return _0x1f0f84(_0x12d085);},'ieCqf':function(_0x10a4c7){return _0x10a4c7();},'Khhqj':function(_0x1eb4e8){return _0x1eb4e8();},'wnbUU':_0x46f5df(0x157),'kPeRV':_0x46f5df(0x21c),'QgwDi':'ellipsis','OkZaA':'Remove','hMlXq':_0x46f5df(0x251),'OlXTr':_0x46f5df(0x26f),'uJeul':_0x46f5df(0x176),'KLPjO':function(_0x11c56d,_0x5e327e){return _0x11c56d!==_0x5e327e;},'KJvJq':_0x46f5df(0x237),'qNljG':_0x46f5df(0x19d),'uQWVj':'Upload\x20Settings\x20Form','qendt':_0x46f5df(0x1ec),'zWlZs':_0x46f5df(0x1e3),'vlmhq':_0x46f5df(0x23b),'VXVXv':_0x46f5df(0x173),'Wehyn':'database-model-features-section','DmSwT':_0x46f5df(0x1ca),'lxJWY':_0x46f5df(0x21f),'JJczz':_0x46f5df(0x213),'zjkfR':_0x46f5df(0x1bd),'SIdqm':_0x46f5df(0x194),'IYhIb':_0x46f5df(0x22b),'eGyEo':'Destination\x20DB\x205','JFqmb':'close','PuVfV':_0x46f5df(0x235),'EyryI':function(_0x38e5bb,_0x2c0b02){return _0x38e5bb(_0x2c0b02);},'tUHIE':'database-browser','NIQSF':_0x46f5df(0x1a3),'PgLSa':_0x46f5df(0x200),'RcbbY':_0x46f5df(0x2a2),'aRhqU':_0x46f5df(0x270),'HsEyV':'sidebar-header-title','aKLxl':function(_0x2c2594,_0x15dffb){return _0x2c2594(_0x15dffb);},'zfWNg':'should\x20not\x20allow\x20enabling\x20model\x20features','pEFBg':_0x46f5df(0x24c),'YvLKF':'Select\x20a\x20database','gycbs':'have.attr','IWVUJ':'data-combobox-disabled','tKVKL':_0x46f5df(0x190),'QLTTX':_0x46f5df(0x178),'DIGxl':function(_0x40627d,_0x5f01e4){return _0x40627d===_0x5f01e4;},'XzAPA':_0x46f5df(0x1c9),'HuFGI':_0x46f5df(0x296),'hLrcb':_0x46f5df(0x2a6),'YbQZU':function(_0x217fab,_0x32b23a,_0x2cc8b3){return _0x217fab(_0x32b23a,_0x2cc8b3);},'prpkm':_0x46f5df(0x20f),'GGHCp':function(_0x16fc5d,_0x221a83){return _0x16fc5d!==_0x221a83;},'ckgBV':function(_0x47f069,_0x556bf8,_0x1d8d11){return _0x47f069(_0x556bf8,_0x1d8d11);},'LoytI':_0x46f5df(0x1d6),'LhCjl':function(_0x4ed5ff,_0x50ab0d,_0x2ea85f,_0x3678fd){return _0x4ed5ff(_0x50ab0d,_0x2ea85f,_0x3678fd);},'GuDyM':_0x46f5df(0x26c)};beforeEach(()=>{const _0x41b75f=_0x46f5df;H[_0x41b75f(0x1e6)](_0x41b75f(0x1db)),cy['signInAsAdmin'](),cy['intercept']('POST',_0x498bd0[_0x41b75f(0x14d)])['as'](_0x41b75f(0x271)),cy[_0x41b75f(0x1bb)]('PUT',_0x498bd0[_0x41b75f(0x20d)])['as'](_0x498bd0[_0x41b75f(0x1de)]),cy[_0x41b75f(0x1bb)](_0x498bd0[_0x41b75f(0x29e)],_0x41b75f(0x1bc))['as'](_0x41b75f(0x1f1));}),_0x498bd0[_0x46f5df(0x234)](describe,'EE',()=>{const _0x2fbc8f=_0x46f5df,_0x34dedc={'UeMxt':'Database\x20routing\x20updated','oteGr':_0x498bd0['QhAwh'],'DGETY':_0x498bd0['IYhIb'],'bbHal':_0x498bd0[_0x2fbc8f(0x1ba)],'VDuHv':_0x498bd0[_0x2fbc8f(0x206)],'ZKGmn':_0x2fbc8f(0x262),'IBqkq':_0x2fbc8f(0x285),'iSUHF':'Destination\x20database\x20updated\x20successfully','jtkVD':_0x498bd0[_0x2fbc8f(0x1e8)],'gQEfl':function(_0x22bf1c,_0xd0824d){const _0x20c02a=_0x2fbc8f;return _0x498bd0[_0x20c02a(0x188)](_0x22bf1c,_0xd0824d);},'jnhTn':_0x498bd0['PuVfV'],'dZjqv':_0x2fbc8f(0x204),'ANJMI':'Tables','sotSc':_0x2fbc8f(0x223),'uYwrW':_0x498bd0[_0x2fbc8f(0x20a)],'SCdPr':_0x498bd0[_0x2fbc8f(0x1b6)],'TvGFI':function(_0x1b0c42,_0x404c04){const _0x14456a=_0x2fbc8f;return _0x498bd0[_0x14456a(0x19b)](_0x1b0c42,_0x404c04);},'tloGQ':'be.checked','uiGHj':_0x2fbc8f(0x14b),'OrJdV':_0x498bd0[_0x2fbc8f(0x220)],'kJQGm':_0x498bd0[_0x2fbc8f(0x152)],'PbLgh':_0x498bd0[_0x2fbc8f(0x25b)],'gjSwz':_0x2fbc8f(0x1f8),'mzzvC':_0x2fbc8f(0x275),'VuyrC':_0x498bd0[_0x2fbc8f(0x1ab)],'XrSnd':_0x2fbc8f(0x19f),'QxvKa':_0x498bd0[_0x2fbc8f(0x263)],'EcIKl':_0x2fbc8f(0x23e),'EwdLz':_0x498bd0[_0x2fbc8f(0x16e)],'NPtgI':'not.be.checked','BDLuh':_0x498bd0['pndzi'],'OFwQf':function(_0x4ffd12,_0x1edd4d){return _0x498bd0['aKLxl'](_0x4ffd12,_0x1edd4d);},'hEFRT':_0x498bd0[_0x2fbc8f(0x191)],'axvRc':_0x498bd0[_0x2fbc8f(0x239)],'MZoiy':_0x498bd0['pEFBg'],'Ivclt':_0x498bd0['YvLKF'],'kmiva':_0x498bd0[_0x2fbc8f(0x1ac)],'mSDSo':_0x498bd0['IWVUJ'],'VAeWb':_0x498bd0[_0x2fbc8f(0x23c)],'YAXXc':_0x498bd0[_0x2fbc8f(0x1b9)],'KGQaz':function(_0x1bb0e6){return _0x498bd0['ieCqf'](_0x1bb0e6);}};if(_0x498bd0[_0x2fbc8f(0x209)](_0x498bd0[_0x2fbc8f(0x1d8)],_0x498bd0[_0x2fbc8f(0x1d8)]))beforeEach(()=>{const _0x42ef9c=_0x2fbc8f;H[_0x42ef9c(0x1ef)]('all');}),it(_0x498bd0['HuFGI'],()=>{const _0x27fe26=_0x2fbc8f,_0x3a3850={'QgjcM':_0x498bd0[_0x27fe26(0x203)],'bMfUf':_0x498bd0[_0x27fe26(0x26d)],'Rlrpm':_0x27fe26(0x222),'JmxTj':_0x498bd0[_0x27fe26(0x206)],'HSwfk':_0x498bd0[_0x27fe26(0x215)],'CDtvR':_0x27fe26(0x248),'ZRLpG':'/admin/databases/2','XEwSw':_0x498bd0[_0x27fe26(0x20a)],'LhkZG':'role','CREJX':_0x27fe26(0x168),'uZcXz':'grant\x20db\x20management\x20permissions\x20to\x20all\x20users','ZNsGG':_0x27fe26(0x280),'mMmZp':_0x498bd0['cFGXN'],'qHRTk':function(_0x5d2648){return _0x5d2648();},'pRaxE':_0x27fe26(0x2a7),'mrwyu':'should\x20not\x20allow\x20changing\x20engine','dCRnm':_0x27fe26(0x223),'gioCy':_0x498bd0['gONWm'],'ZQUWD':_0x27fe26(0x295),'czthe':_0x27fe26(0x241),'RZuXQ':function(_0x398c92,_0x2f6bc1){return _0x398c92===_0x2f6bc1;},'BhXtk':'EdKpo','nbcDb':_0x498bd0[_0x27fe26(0x163)],'ubGZR':_0x27fe26(0x1a0),'rdVLa':_0x27fe26(0x269),'otUyT':_0x498bd0[_0x27fe26(0x1a1)],'dZjBn':_0x498bd0['ZOHag'],'qjAOk':_0x498bd0['ujZGZ'],'twFxG':_0x498bd0[_0x27fe26(0x19a)],'sMaaC':_0x27fe26(0x291),'RRlZu':_0x27fe26(0x251),'LqURQ':_0x27fe26(0x1ea)};if(_0x498bd0[_0x27fe26(0x188)](_0x498bd0[_0x27fe26(0x1ad)],_0x498bd0[_0x27fe26(0x2aa)])){const _0xcf06cd={'jWwtP':_0x27fe26(0x14a),'Qpryn':_0x27fe26(0x223),'Yxpmv':_0x27fe26(0x1bd),'OEYiS':_0x3a3850[_0x27fe26(0x228)],'HsXPR':'Save\x20changes','MJrdQ':_0x3a3850[_0x27fe26(0x244)]};_0x2608da[_0x27fe26(0x160)](_0x3a3850[_0x27fe26(0x283)]),_0x36123e['visit'](_0x3a3850[_0x27fe26(0x25a)]),_0x2e1ee7[_0x27fe26(0x180)](_0x27fe26(0x181))['findByLabelText'](_0x3a3850['XEwSw'])[_0x27fe26(0x15f)]({'force':!![]}),_0x65e11d({'router_database_id':0x2,'user_attribute':_0x3a3850[_0x27fe26(0x19e)]}),_0x1518fd({'router_database_id':0x2,'databases':[_0x27e077]}),_0x24d48a[_0x27fe26(0x160)]('normal\x20user\x20should\x20not\x20see\x20db\x20routing'),_0x2fd03e[_0x27fe26(0x179)](),_0x570abc[_0x27fe26(0x1c4)](),_0x4197a1[_0x27fe26(0x22e)](_0x3a3850[_0x27fe26(0x25a)]),_0x7153be['get'](_0x27fe26(0x257))[_0x27fe26(0x274)](_0x3a3850[_0x27fe26(0x1e0)]),_0x40349d[_0x27fe26(0x160)](_0x3a3850[_0x27fe26(0x193)]),_0x51c378['signOut'](),_0x1e895d[_0x27fe26(0x21b)](),_0x54589a[_0x27fe26(0x22e)](_0x27fe26(0x238)+_0x597037);const _0x42387a=0x1;_0x40a795['modifyPermission'](_0x27fe26(0x173),_0x42387a,'Query\x20builder\x20and\x20native');const _0x1b7db7=0x4;_0x22f464['modifyPermission'](_0x27fe26(0x173),_0x1b7db7,'Yes'),_0x1a23ba['button'](_0x3a3850[_0x27fe26(0x1eb)])[_0x27fe26(0x15f)](),_0x34ebdf['modal']()[_0x27fe26(0x18c)](_0x3a3850[_0x27fe26(0x1af)])['click'](),_0x33bc96[_0x27fe26(0x160)]('normal\x20user\x20should\x20see\x20db'),_0x234245[_0x27fe26(0x179)](),_0xcadf4f['signIn'](_0x27fe26(0x23a)),_0x3e33c6[_0x27fe26(0x22e)]('/admin/databases/2'),_0x3a3850[_0x27fe26(0x1a9)](_0x4451fb)[_0x27fe26(0x27d)]('exist'),_0x1f46d9(),_0x13b81c()[_0x27fe26(0x164)](()=>{const _0x4bf9a9=_0x27fe26;_0x333d0e[_0x4bf9a9(0x160)](_0x3a3850[_0x4bf9a9(0x245)]),_0x3995ec[_0x4bf9a9(0x150)](_0x3a3850['bMfUf'])['should'](_0x3a3850['Rlrpm']),_0x51276f[_0x4bf9a9(0x1c5)](_0x4bf9a9(0x291))['should'](_0x3a3850[_0x4bf9a9(0x25f)]),_0x341c3b[_0x4bf9a9(0x22c)]('button',{'name':/Add/})[_0x4bf9a9(0x27d)](_0x4bf9a9(0x223));}),_0x208262[_0x27fe26(0x160)]('should\x20be\x20able\x20to\x20edit\x20databases'),_0x5e98a9()[_0x27fe26(0x1c5)](_0x27fe26(0x21c))[_0x27fe26(0x29b)](_0x27fe26(0x259))[_0x27fe26(0x15f)](),_0x182233[_0x27fe26(0x147)]()[_0x27fe26(0x164)](()=>{const _0x1e953e=_0x27fe26;_0x1be72c[_0x1e953e(0x274)](_0xcf06cd[_0x1e953e(0x1f4)])[_0x1e953e(0x27d)](_0xcf06cd[_0x1e953e(0x2a0)]),_0x4590fd[_0x1e953e(0x274)](_0xcf06cd[_0x1e953e(0x18f)])[_0x1e953e(0x27d)](_0xcf06cd[_0x1e953e(0x260)])[_0x1e953e(0x15f)]();}),_0x2434c5[_0x27fe26(0x217)]()[_0x27fe26(0x164)](()=>{const _0x146fc8=_0x27fe26;_0x1be5e4[_0x146fc8(0x1fe)](/Slug/,_0x146fc8(0x18a)),_0x3e6e0c[_0x146fc8(0x18c)](_0xcf06cd[_0x146fc8(0x20e)])[_0x146fc8(0x15f)](),_0x3ea750[_0x146fc8(0x2b0)](_0xcf06cd[_0x146fc8(0x1ff)]);});}else cy[_0x27fe26(0x22e)](_0x498bd0[_0x27fe26(0x1e7)]),cy[_0x27fe26(0x160)](_0x27fe26(0x290)),cy['findByLabelText'](_0x498bd0[_0x27fe26(0x20a)])[_0x27fe26(0x15f)]({'force':!![]}),cy[_0x27fe26(0x160)](_0x27fe26(0x172)),cy[_0x27fe26(0x150)](_0x27fe26(0x2a3))[_0x27fe26(0x27d)](_0x498bd0[_0x27fe26(0x1a2)])[_0x27fe26(0x15f)]({'force':!![]}),cy[_0x27fe26(0x22c)]('button',{'name':/Add/})['should'](_0x498bd0[_0x27fe26(0x14f)]),cy['findByTestId'](_0x498bd0[_0x27fe26(0x22d)])[_0x27fe26(0x15f)](),H[_0x27fe26(0x147)]()[_0x27fe26(0x274)](_0x27fe26(0x227))[_0x27fe26(0x15f)](),H[_0x27fe26(0x169)]()[_0x27fe26(0x164)](()=>{const _0x1e7296=_0x27fe26;cy['findByText'](_0x3a3850[_0x1e7296(0x17b)])[_0x1e7296(0x27d)](_0x1e7296(0x167)),cy['icon'](_0x1e7296(0x2a4))[_0x1e7296(0x15f)]();}),cy['log']('should\x20be\x20able\x20to\x20change\x20the\x20user\x20attribute\x20routed\x20on'),cy[_0x27fe26(0x1c5)](_0x498bd0[_0x27fe26(0x22d)])[_0x27fe26(0x15f)](),H[_0x27fe26(0x147)]()[_0x27fe26(0x274)](_0x498bd0[_0x27fe26(0x1b6)])[_0x27fe26(0x15f)](),H[_0x27fe26(0x169)]()[_0x27fe26(0x164)](()=>{const _0x5841bd=_0x27fe26;cy[_0x5841bd(0x274)](_0x34dedc[_0x5841bd(0x28e)])['should'](_0x5841bd(0x167)),cy['icon']('close')[_0x5841bd(0x15f)]();}),cy['log'](_0x27fe26(0x14c)),dbRoutingSection()['findByText'](_0x498bd0[_0x27fe26(0x27f)]),cy[_0x27fe26(0x22c)](_0x498bd0[_0x27fe26(0x268)],{'name':/Add/})[_0x27fe26(0x15f)](),H[_0x27fe26(0x217)]()[_0x27fe26(0x164)](()=>{const _0x3d17eb=_0x27fe26;_0x3a3850[_0x3d17eb(0x155)](_0x3d17eb(0x1b5),_0x3a3850[_0x3d17eb(0x1f0)])?(cy[_0x3d17eb(0x160)](_0x3a3850[_0x3d17eb(0x161)]),cy[_0x3d17eb(0x150)](_0x3d17eb(0x1c8))[_0x3d17eb(0x27d)](_0x3d17eb(0x223)),H[_0x3d17eb(0x1fe)](/Slug/,_0x3a3850['nbcDb']),H[_0x3d17eb(0x1fe)](/Host/,_0x3d17eb(0x1d3)),H['typeAndBlurUsingLabel'](/Port/,QA_POSTGRES_PORT),H[_0x3d17eb(0x1fe)](/Database name/,_0x3d17eb(0x269)),H[_0x3d17eb(0x1fe)](/Username/,'metabase'),H[_0x3d17eb(0x1fe)](/Password/,_0x3d17eb(0x246)),cy['button'](_0x3d17eb(0x1f6))['click'](),cy[_0x3d17eb(0x2b0)]('@createDestinationDatabase')):(_0x42bea8['log'](_0x3a3850[_0x3d17eb(0x161)]),_0x38600c[_0x3d17eb(0x150)](_0x3d17eb(0x1c8))[_0x3d17eb(0x27d)](_0x3a3850[_0x3d17eb(0x1c2)]),_0x51c8f1[_0x3d17eb(0x1fe)](/Slug/,_0x3d17eb(0x18a)),_0x41611f[_0x3d17eb(0x1fe)](/Host/,_0x3a3850[_0x3d17eb(0x1e9)]),_0x14b73e['typeAndBlurUsingLabel'](/Port/,_0x531215),_0x298e61[_0x3d17eb(0x1fe)](/Database name/,'sample'),_0x26b22b[_0x3d17eb(0x1fe)](/Username/,_0x3a3850['ZQUWD']),_0x3a80bb[_0x3d17eb(0x1fe)](/Password/,_0x3d17eb(0x246)),_0x3ad1c9[_0x3d17eb(0x18c)](_0x3d17eb(0x1f6))[_0x3d17eb(0x15f)](),_0x300476[_0x3d17eb(0x2b0)](_0x3a3850['czthe']));}),H['undoToast']()[_0x27fe26(0x164)](()=>{const _0x3c26d4=_0x27fe26;cy[_0x3c26d4(0x274)](_0x3c26d4(0x2ab))['should'](_0x3c26d4(0x167)),cy[_0x3c26d4(0x29b)](_0x3c26d4(0x2a4))[_0x3c26d4(0x15f)]();}),dbRoutingSection()['within'](()=>{const _0x31e4de=_0x27fe26;cy[_0x31e4de(0x274)](_0x34dedc[_0x31e4de(0x196)]),cy[_0x31e4de(0x1c5)](_0x34dedc[_0x31e4de(0x26b)])[_0x31e4de(0x1e1)]();}),H[_0x27fe26(0x154)]()[_0x27fe26(0x27d)](_0x27fe26(0x14e),_0x498bd0[_0x27fe26(0x16d)]),cy[_0x27fe26(0x160)](_0x27fe26(0x1dd)),cy[_0x27fe26(0x22c)](_0x27fe26(0x162),{'name':/Add/})['click'](),H[_0x27fe26(0x217)]()[_0x27fe26(0x164)](()=>{const _0x416e5a=_0x27fe26;cy[_0x416e5a(0x160)](_0x3a3850[_0x416e5a(0x207)]),H['typeAndBlurUsingLabel'](/Slug/,_0x3a3850[_0x416e5a(0x1c3)]),H[_0x416e5a(0x1fe)](/Host/,_0x416e5a(0x1d3)),H['typeAndBlurUsingLabel'](/Port/,QA_POSTGRES_PORT),H['typeAndBlurUsingLabel'](/Database name/,_0x3a3850['rdVLa']),H[_0x416e5a(0x1fe)](/Username/,_0x416e5a(0x295)),H[_0x416e5a(0x1fe)](/Password/,_0x416e5a(0x246)),cy[_0x416e5a(0x18c)]('Save')[_0x416e5a(0x15f)](),cy['wait'](_0x3a3850[_0x416e5a(0x1c0)]),cy[_0x416e5a(0x274)](_0x3a3850[_0x416e5a(0x1a5)]),cy[_0x416e5a(0x160)](_0x3a3850[_0x416e5a(0x1a6)]),H[_0x416e5a(0x1fe)](/Slug/,'Unique\x20Destination\x20DB\x20Name'),H['typeAndBlurUsingLabel'](/Password/,_0x3a3850['qjAOk']),cy['button'](/(Failed|Save)/)[_0x416e5a(0x15f)](),cy[_0x416e5a(0x2b0)](_0x3a3850[_0x416e5a(0x1c0)]),cy[_0x416e5a(0x274)](_0x416e5a(0x15a)),cy[_0x416e5a(0x18c)](_0x3a3850[_0x416e5a(0x29d)])[_0x416e5a(0x15f)]();}),cy[_0x27fe26(0x1c5)](_0x498bd0[_0x27fe26(0x18d)])['should'](_0x27fe26(0x167))[_0x27fe26(0x22c)](_0x27fe26(0x18c),{'name':_0x498bd0['VfhMS']})['click'](),H['modal']()[_0x27fe26(0x27d)](_0x498bd0[_0x27fe26(0x192)]),cy[_0x27fe26(0x160)](_0x498bd0[_0x27fe26(0x202)]),_0x498bd0['zhtGr'](createDestinationDatabasesViaAPI,{'router_database_id':0x2,'databases':_0x3ded3d[_0x27fe26(0x25c)](0x2,0x7)[_0x27fe26(0x297)](_0x479fb3=>({...BASE_POSTGRES_MIRROR_DB_INFO,'name':_0x27fe26(0x218)+_0x479fb3}))}),cy['reload'](),_0x498bd0[_0x27fe26(0x265)](expandDbRouting),_0x498bd0['ieCqf'](dbRoutingSection)[_0x27fe26(0x164)](()=>{const _0x158612=_0x27fe26;_0x158612(0x1a4)!==_0x158612(0x2ac)?(cy[_0x158612(0x274)](_0x34dedc[_0x158612(0x23f)])[_0x158612(0x27d)](_0x34dedc['VDuHv']),cy[_0x158612(0x274)](_0x158612(0x262))['should'](_0x158612(0x223))):(_0xb5e112[_0x158612(0x160)](_0x3a3850['QgjcM']),_0x3d0ef6[_0x158612(0x150)]('Enable\x20database\x20routing')[_0x158612(0x27d)](_0x3a3850[_0x158612(0x25f)]),_0x49f3ab[_0x158612(0x1c5)](_0x3a3850['sMaaC'])[_0x158612(0x27d)](_0x3a3850['Rlrpm']),_0x440ccf[_0x158612(0x22c)]('button',{'name':/Add/})[_0x158612(0x27d)](_0x3a3850[_0x158612(0x1c2)]));}),cy['log'](_0x27fe26(0x199)),_0x498bd0['Khhqj'](dbRoutingSection)[_0x27fe26(0x274)](_0x498bd0[_0x27fe26(0x240)])[_0x27fe26(0x15f)](),H['modal']()[_0x27fe26(0x164)](()=>{const _0x5a37a8=_0x27fe26;cy[_0x5a37a8(0x274)](_0x34dedc[_0x5a37a8(0x278)])['should']('exist'),cy['button'](_0x34dedc[_0x5a37a8(0x15c)])[_0x5a37a8(0x15f)]();}),dbRoutingSection()[_0x27fe26(0x180)](_0x498bd0[_0x27fe26(0x24f)])['first']()[_0x27fe26(0x29b)](_0x498bd0['QgwDi'])[_0x27fe26(0x15f)](),H[_0x27fe26(0x147)]()[_0x27fe26(0x274)](_0x27fe26(0x1bd))[_0x27fe26(0x15f)](),H[_0x27fe26(0x217)]()[_0x27fe26(0x164)](()=>{const _0x2a706b=_0x27fe26;H[_0x2a706b(0x1fe)](/Slug/,_0x2a706b(0x186)),cy['button'](_0x2a706b(0x280))[_0x2a706b(0x15f)](),cy[_0x2a706b(0x2b0)](_0x3a3850[_0x2a706b(0x244)]);}),H[_0x27fe26(0x169)]()['within'](()=>{const _0x4f2269=_0x27fe26;cy[_0x4f2269(0x274)](_0x34dedc['iSUHF'])[_0x4f2269(0x27d)](_0x4f2269(0x167)),cy['icon']('close')[_0x4f2269(0x15f)]();}),cy[_0x27fe26(0x160)](_0x27fe26(0x210)),_0x498bd0[_0x27fe26(0x15e)](dbRoutingSection)['findAllByTestId'](_0x498bd0[_0x27fe26(0x24f)])[_0x27fe26(0x26e)]()[_0x27fe26(0x29b)](_0x27fe26(0x259))['click'](),H[_0x27fe26(0x147)]()['findByText'](_0x498bd0[_0x27fe26(0x26a)])[_0x27fe26(0x15f)](),H['modal']()[_0x27fe26(0x164)](()=>{const _0x4bef0e=_0x27fe26;cy['findByTestId'](_0x4bef0e(0x16a))[_0x4bef0e(0x252)](_0x3a3850['RRlZu']),cy['button'](_0x3a3850['LqURQ'])['click'](),cy[_0x4bef0e(0x2b0)](_0x4bef0e(0x1aa));}),dbRoutingSection()[_0x27fe26(0x274)](_0x498bd0['hMlXq'])[_0x27fe26(0x27d)](_0x27fe26(0x223)),cy[_0x27fe26(0x160)](_0x498bd0[_0x27fe26(0x19c)]),cy[_0x27fe26(0x150)](_0x27fe26(0x2a3))[_0x27fe26(0x27d)](_0x498bd0[_0x27fe26(0x254)])['click']({'force':!![]}),cy[_0x27fe26(0x150)](_0x498bd0[_0x27fe26(0x26d)])['should'](_0x27fe26(0x230)),H[_0x27fe26(0x169)]()[_0x27fe26(0x164)](()=>{const _0x4cf4c8=_0x27fe26;cy[_0x4cf4c8(0x274)](_0x4cf4c8(0x16b))['should'](_0x34dedc['VDuHv']),cy[_0x4cf4c8(0x29b)](_0x34dedc[_0x4cf4c8(0x1c6)])[_0x4cf4c8(0x15f)]();}),cy[_0x27fe26(0x160)]('should\x20not\x20remove\x20destination\x20databases\x20when\x20turning\x20the\x20feature\x20off'),expandDbRouting(),_0x498bd0[_0x27fe26(0x15e)](dbRoutingSection)[_0x27fe26(0x164)](()=>{const _0x564954=_0x27fe26;cy[_0x564954(0x274)]('Destination\x20DB\x202')[_0x564954(0x27d)](_0x3a3850[_0x564954(0x228)]),cy[_0x564954(0x274)]('No\x20destination\x20databases\x20added\x20yet')['should'](_0x3a3850[_0x564954(0x1c2)]);});}),it(_0x498bd0[_0x2fbc8f(0x226)],()=>{const _0xa9ade0=_0x2fbc8f;cy[_0xa9ade0(0x160)]('setup\x20db\x20routing\x20via\x20API'),cy[_0xa9ade0(0x22e)](_0xa9ade0(0x1b7)),cy[_0xa9ade0(0x160)](_0xa9ade0(0x290)),cy[_0xa9ade0(0x150)](_0x34dedc[_0xa9ade0(0x1d1)])[_0xa9ade0(0x15f)]({'force':!![]}),configurDbRoutingViaAPI({'router_database_id':0x2,'user_attribute':_0x34dedc[_0xa9ade0(0x2a8)]}),_0x34dedc['TvGFI'](createDestinationDatabasesViaAPI,{'router_database_id':0x2,'databases':[BASE_POSTGRES_MIRROR_DB_INFO]}),cy['log'](_0xa9ade0(0x23d)),cy['reload'](),cy[_0xa9ade0(0x150)](_0xa9ade0(0x2a3))['should'](_0x34dedc[_0xa9ade0(0x2af)]),expandDbRouting(),dbRoutingSection()[_0xa9ade0(0x274)](BASE_POSTGRES_MIRROR_DB_INFO[_0xa9ade0(0x27e)])[_0xa9ade0(0x27d)](_0x34dedc[_0xa9ade0(0x277)]),cy[_0xa9ade0(0x160)](_0x34dedc[_0xa9ade0(0x175)]),cy[_0xa9ade0(0x22e)]('/admin/databases'),cy[_0xa9ade0(0x180)](_0xa9ade0(0x22a))['findByText'](BASE_POSTGRES_MIRROR_DB_INFO[_0xa9ade0(0x27e)])[_0xa9ade0(0x27d)](_0xa9ade0(0x223)),cy[_0xa9ade0(0x160)](_0xa9ade0(0x171)),cy[_0xa9ade0(0x22e)](_0xa9ade0(0x256)),cy['findAllByTestId'](_0x34dedc[_0xa9ade0(0x231)])[_0xa9ade0(0x274)](BASE_POSTGRES_MIRROR_DB_INFO[_0xa9ade0(0x27e)])[_0xa9ade0(0x27d)](_0x34dedc['sotSc']),cy['log'](_0x34dedc[_0xa9ade0(0x170)]),H[_0xa9ade0(0x264)](BASE_POSTGRES_MIRROR_DB_INFO['name'],![]),H['commandPalette']()['findByText'](_0xa9ade0(0x1fb))[_0xa9ade0(0x27d)](_0x34dedc[_0xa9ade0(0x277)]),cy[_0xa9ade0(0x160)](_0x34dedc['PbLgh']),cy[_0xa9ade0(0x22e)](_0x34dedc[_0xa9ade0(0x247)]),cy[_0xa9ade0(0x1c5)](_0x34dedc[_0xa9ade0(0x1d9)])['click'](),H[_0xa9ade0(0x147)]()['findByText'](BASE_POSTGRES_MIRROR_DB_INFO['name'])[_0xa9ade0(0x27d)](_0xa9ade0(0x223)),cy[_0xa9ade0(0x160)]('should\x20not\x20see\x20database\x20in\x20permissions\x20pages'),cy[_0xa9ade0(0x22e)](_0x34dedc[_0xa9ade0(0x1ee)]),cy[_0xa9ade0(0x21d)](_0x34dedc[_0xa9ade0(0x15d)])['findByText'](BASE_POSTGRES_MIRROR_DB_INFO[_0xa9ade0(0x27e)])['should'](_0x34dedc[_0xa9ade0(0x24a)]),cy[_0xa9ade0(0x160)]('should\x20not\x20see\x20database\x20in\x20data\x20picker'),cy[_0xa9ade0(0x22e)](_0xa9ade0(0x24d)),H[_0xa9ade0(0x214)]()[_0xa9ade0(0x164)](()=>{const _0x88fe4f=_0xa9ade0,_0x1f0947={'zxMrD':_0x88fe4f(0x280),'RjqMt':'@databaseUpdate'};_0x34dedc[_0x88fe4f(0x1c1)](_0x34dedc[_0x88fe4f(0x286)],_0x34dedc['dZjqv'])?(_0x9138f6['typeAndBlurUsingLabel'](/Slug/,_0x88fe4f(0x186)),_0x5c0c80[_0x88fe4f(0x18c)](_0x1f0947[_0x88fe4f(0x299)])[_0x88fe4f(0x15f)](),_0x59f631[_0x88fe4f(0x2b0)](_0x1f0947['RjqMt'])):(H[_0x88fe4f(0x146)](_0x34dedc[_0x88fe4f(0x1ed)])[_0x88fe4f(0x15f)](),cy[_0x88fe4f(0x274)](BASE_POSTGRES_MIRROR_DB_INFO['name'])[_0x88fe4f(0x27d)](_0x34dedc[_0x88fe4f(0x24a)]));}),cy[_0xa9ade0(0x160)](_0xa9ade0(0x2b4)),H['startNewNativeQuestion'](),cy['findByTestId']('sidebar-header')[_0xa9ade0(0x29b)](_0x34dedc[_0xa9ade0(0x29f)])[_0xa9ade0(0x15f)](),cy[_0xa9ade0(0x1c5)](_0xa9ade0(0x225))['should'](_0xa9ade0(0x16c),_0x34dedc['EcIKl']),cy[_0xa9ade0(0x1c5)](_0x34dedc[_0xa9ade0(0x1d2)])[_0xa9ade0(0x274)](BASE_POSTGRES_MIRROR_DB_INFO['name'])[_0xa9ade0(0x27d)]('not.exist');}),it('should\x20not\x20allow\x20turning\x20on\x20db\x20routing\x20on\x20if\x20other\x20conflicting\x20features\x20are\x20enabled',()=>{const _0x1028ff=_0x2fbc8f;if(_0x498bd0[_0x1028ff(0x293)](_0x1028ff(0x237),_0x498bd0[_0x1028ff(0x276)]))_0x14332a[_0x1028ff(0x150)](_0x34dedc[_0x1028ff(0x1d1)])[_0x1028ff(0x27d)](_0x1028ff(0x222))[_0x1028ff(0x27d)](_0x34dedc[_0x1028ff(0x1f2)]),_0x18b0c0[_0x1028ff(0x150)](_0x1028ff(0x1ca))[_0x1028ff(0x27d)](_0x1028ff(0x222))[_0x1028ff(0x27d)](_0x1028ff(0x230));else{const _0x3c6b93=_0x498bd0['qNljG'][_0x1028ff(0x273)]('|');let _0x5edff5=0x0;while(!![]){switch(_0x3c6b93[_0x5edff5++]){case'0':cy[_0x1028ff(0x180)]('database-model-features-section')['findByLabelText'](_0x1028ff(0x266))['click']({'force':!![]});continue;case'1':cy[_0x1028ff(0x150)](_0x498bd0[_0x1028ff(0x1d5)])[_0x1028ff(0x182)](_0x498bd0['qendt'])['click']();continue;case'2':_0x498bd0['ieCqf'](assertDbRoutingNotDisabled);continue;case'3':cy[_0x1028ff(0x22e)]('/admin/databases/2');continue;case'4':cy[_0x1028ff(0x160)](_0x1028ff(0x145));continue;case'5':_0x498bd0['ieCqf'](assertDbRoutingDisabled);continue;case'6':cy[_0x1028ff(0x160)](_0x1028ff(0x1cc));continue;case'7':cy['log'](_0x498bd0[_0x1028ff(0x24b)]);continue;case'8':cy[_0x1028ff(0x22e)](_0x498bd0['vlmhq']);continue;case'9':cy['log']('setup');continue;case'10':H['popover']()[_0x1028ff(0x274)](_0x498bd0['VXVXv'])[_0x1028ff(0x15f)]();continue;case'11':assertDbRoutingDisabled();continue;case'12':assertDbRoutingNotDisabled();continue;case'13':cy['findAllByTestId'](_0x1028ff(0x181))['findByLabelText'](_0x498bd0[_0x1028ff(0x20a)])['should']('be.checked');continue;case'14':cy[_0x1028ff(0x22e)](_0x1028ff(0x1b7));continue;case'15':cy['findAllByTestId'](_0x498bd0[_0x1028ff(0x239)])[_0x1028ff(0x150)](_0x498bd0['DmSwT'])[_0x1028ff(0x27d)](_0x498bd0[_0x1028ff(0x1a2)])[_0x1028ff(0x15f)]({'force':!![]});continue;case'16':cy[_0x1028ff(0x150)](_0x1028ff(0x198))[_0x1028ff(0x182)](_0x1028ff(0x28d))[_0x1028ff(0x15f)]();continue;case'17':_0x498bd0[_0x1028ff(0x15e)](setupModelPersistence);continue;case'18':H['popover']()[_0x1028ff(0x274)](_0x498bd0[_0x1028ff(0x17a)])[_0x1028ff(0x15f)]();continue;case'19':cy['findAllByTestId'](_0x498bd0[_0x1028ff(0x239)])['findByLabelText']('Model\x20persistence')[_0x1028ff(0x27d)]('be.checked')['click']({'force':!![]});continue;case'20':cy['findByLabelText'](_0x498bd0[_0x1028ff(0x1d5)])[_0x1028ff(0x18c)](_0x498bd0[_0x1028ff(0x261)])[_0x1028ff(0x15f)]();continue;case'21':assertDbRoutingDisabled();continue;}break;}}}),it(_0x2fbc8f(0x229),()=>{const _0x410abb=_0x2fbc8f;cy['log'](_0x410abb(0x279)),setupModelPersistence(),cy[_0x410abb(0x22e)](_0x34dedc[_0x410abb(0x16f)]),cy['findAllByTestId'](_0x410abb(0x181))[_0x410abb(0x150)](_0x34dedc[_0x410abb(0x1d1)])[_0x410abb(0x15f)]({'force':!![]}),cy['findAllByTestId'](_0x410abb(0x181))[_0x410abb(0x150)](_0x34dedc[_0x410abb(0x1d1)])[_0x410abb(0x27d)](_0x34dedc['NPtgI']),_0x34dedc[_0x410abb(0x1b8)](configurDbRoutingViaAPI,{'router_database_id':0x2,'user_attribute':'role'}),cy[_0x410abb(0x28b)](),cy[_0x410abb(0x160)](_0x34dedc[_0x410abb(0x25e)]),cy[_0x410abb(0x180)](_0x410abb(0x181))[_0x410abb(0x150)]('Model\x20actions')[_0x410abb(0x18b)](_0x410abb(0x15b),{'force':!![]}),H[_0x410abb(0x154)]()[_0x410abb(0x274)]('Model\x20actions\x20can\x20not\x20be\x20enabled\x20if\x20database\x20routing\x20is\x20enabled.')[_0x410abb(0x27d)](_0x410abb(0x167)),cy[_0x410abb(0x180)](_0x34dedc[_0x410abb(0x17d)])['within'](()=>{const _0x1f8608=_0x410abb;cy[_0x1f8608(0x150)](_0x34dedc[_0x1f8608(0x1d1)])[_0x1f8608(0x27d)]('be.disabled')[_0x1f8608(0x27d)]('not.be.checked'),cy[_0x1f8608(0x150)]('Model\x20persistence')['should']('be.disabled')['should'](_0x1f8608(0x230));}),cy[_0x410abb(0x160)](_0x34dedc[_0x410abb(0x27a)]),cy[_0x410abb(0x22e)](_0x410abb(0x23b)),cy['findByLabelText'](_0x410abb(0x198))['findByPlaceholderText'](_0x34dedc['Ivclt'])['click'](),H['popover']()[_0x410abb(0x274)]('Writable\x20Postgres12\x20(DB\x20Routing\x20Enabled)')[_0x410abb(0x17c)](_0x410abb(0x177))[_0x410abb(0x27d)](_0x34dedc[_0x410abb(0x17f)],_0x34dedc['mSDSo'],_0x410abb(0x292));}),_0x498bd0[_0x2fbc8f(0x2a9)](describe,_0x2fbc8f(0x2b2),()=>{const _0x2dab59=_0x2fbc8f,_0x66012a={'ZHMDq':_0x498bd0[_0x2dab59(0x26d)],'mSPNF':_0x2dab59(0x18c),'HkkAT':_0x498bd0['zjkfR'],'etuUu':_0x498bd0[_0x2dab59(0x206)],'FRKBH':_0x2dab59(0x280),'nIZsi':_0x498bd0[_0x2dab59(0x215)],'IBewa':_0x498bd0['pndzi'],'mwQIP':_0x498bd0[_0x2dab59(0x239)],'tQMSO':'Model\x20actions','HSErz':function(_0x213005,_0x14b47c){return _0x213005(_0x14b47c);},'nEFKm':_0x2dab59(0x257),'MwkPX':_0x2dab59(0x168),'jSYXf':_0x2dab59(0x2a5),'WAhyE':_0x2dab59(0x173),'yfmyn':_0x2dab59(0x1df),'vvBeo':function(_0x5749c2){return _0x5749c2();},'NxWGb':function(_0x3e0f1b){return _0x3e0f1b();},'EpJkF':_0x498bd0[_0x2dab59(0x24f)]};it(_0x498bd0[_0x2dab59(0x1b3)],()=>{const _0x401e54=_0x2dab59,_0x41c38e={'cXnfY':_0x401e54(0x159)};cy[_0x401e54(0x160)](_0x401e54(0x1f7)),cy['visit'](_0x401e54(0x1cf)),dbConnectionInfoSection()[_0x401e54(0x27d)](_0x34dedc[_0x401e54(0x277)]),dbRoutingSection()['should']('not.exist'),cy['log'](_0x34dedc[_0x401e54(0x249)]),cy[_0x401e54(0x1bb)](_0x401e54(0x1a8),_0x401e54(0x158)+SAMPLE_DB_ID,_0x496afd=>{const _0x3b8e7e=_0x401e54,_0x18c266={'XUvPC':'Destination\x20DB\x201\x20Updated','CCtZE':_0x3b8e7e(0x1ea)};_0x3b8e7e(0x159)===_0x41c38e['cXnfY']?_0x496afd[_0x3b8e7e(0x1f3)](_0x3640fa=>{const _0x1f3328=_0x3b8e7e;_0x3640fa['body'][_0x1f3328(0x281)]=!![],_0x3640fa[_0x1f3328(0x212)][_0x1f3328(0x258)]=![];}):(_0x2e9a3a[_0x3b8e7e(0x1c5)](_0x3b8e7e(0x16a))[_0x3b8e7e(0x252)](_0x18c266['XUvPC']),_0x44c813[_0x3b8e7e(0x18c)](_0x18c266['CCtZE'])[_0x3b8e7e(0x15f)](),_0x1fffa1['wait'](_0x3b8e7e(0x1aa)));})['as'](_0x34dedc[_0x401e54(0x17e)]),cy[_0x401e54(0x28b)](),_0x34dedc[_0x401e54(0x282)](dbConnectionInfoSection)[_0x401e54(0x27d)](_0x401e54(0x167)),_0x34dedc['KGQaz'](dbRoutingSection)['should']('not.exist');}),it('should\x20show\x20for\x20users\x20with\x20db\x20management\x20permissions\x20but\x20prevent\x20removal\x20of\x20destination\x20databases',()=>{const _0x4a2573=_0x2dab59,_0x37e042={'aBeKL':_0x4a2573(0x22f),'VZcyN':_0x66012a['ZHMDq'],'uLXfw':_0x4a2573(0x222),'XnNDy':_0x66012a[_0x4a2573(0x21a)],'MOUgR':_0x4a2573(0x223),'txKjw':_0x4a2573(0x14a),'buQDR':_0x66012a['HkkAT'],'DZNRJ':_0x66012a[_0x4a2573(0x221)],'MvlDs':_0x66012a[_0x4a2573(0x165)],'WnGIJ':_0x66012a[_0x4a2573(0x224)]};cy[_0x4a2573(0x160)](_0x4a2573(0x248)),cy[_0x4a2573(0x22e)](_0x66012a[_0x4a2573(0x151)]),cy[_0x4a2573(0x180)](_0x66012a[_0x4a2573(0x1cd)])[_0x4a2573(0x150)](_0x66012a[_0x4a2573(0x28c)])['click']({'force':!![]}),_0x66012a[_0x4a2573(0x219)](configurDbRoutingViaAPI,{'router_database_id':0x2,'user_attribute':'role'}),_0x66012a[_0x4a2573(0x219)](createDestinationDatabasesViaAPI,{'router_database_id':0x2,'databases':[BASE_POSTGRES_MIRROR_DB_INFO]}),cy[_0x4a2573(0x160)](_0x4a2573(0x201)),cy[_0x4a2573(0x179)](),cy[_0x4a2573(0x1c4)](),cy[_0x4a2573(0x22e)](_0x4a2573(0x1b7)),cy[_0x4a2573(0x21d)](_0x66012a[_0x4a2573(0x288)])[_0x4a2573(0x274)](_0x66012a[_0x4a2573(0x1d0)]),cy[_0x4a2573(0x160)](_0x66012a['jSYXf']),cy[_0x4a2573(0x179)](),cy[_0x4a2573(0x21b)](),cy['visit'](_0x4a2573(0x238)+ALL_USERS_GROUP);const _0x4c90e7=0x1;H[_0x4a2573(0x2ad)](_0x66012a['WAhyE'],_0x4c90e7,_0x4a2573(0x236));const _0x5e442a=0x4;H[_0x4a2573(0x2ad)](_0x4a2573(0x173),_0x5e442a,_0x66012a[_0x4a2573(0x197)]),cy['button'](_0x4a2573(0x280))[_0x4a2573(0x15f)](),H[_0x4a2573(0x217)]()['button'](_0x66012a[_0x4a2573(0x197)])['click'](),cy[_0x4a2573(0x160)](_0x4a2573(0x1a7)),cy[_0x4a2573(0x179)](),cy[_0x4a2573(0x189)](_0x4a2573(0x23a)),cy['visit'](_0x66012a['IBewa']),_0x66012a['vvBeo'](dbRoutingSection)[_0x4a2573(0x27d)](_0x4a2573(0x167)),_0x66012a[_0x4a2573(0x1b1)](expandDbRouting),dbRoutingSection()[_0x4a2573(0x164)](()=>{const _0x42476c=_0x4a2573;cy[_0x42476c(0x160)](_0x37e042[_0x42476c(0x1b2)]),cy['findByLabelText'](_0x37e042['VZcyN'])[_0x42476c(0x27d)](_0x37e042['uLXfw']),cy['findByTestId']('db-routing-user-attribute')[_0x42476c(0x27d)](_0x37e042[_0x42476c(0x20c)]),cy['findByRole'](_0x37e042[_0x42476c(0x183)],{'name':/Add/})[_0x42476c(0x27d)](_0x37e042[_0x42476c(0x2b1)]);}),cy['log'](_0x4a2573(0x156)),_0x66012a['vvBeo'](dbRoutingSection)[_0x4a2573(0x1c5)](_0x66012a[_0x4a2573(0x28f)])[_0x4a2573(0x29b)](_0x4a2573(0x259))[_0x4a2573(0x15f)](),H[_0x4a2573(0x147)]()[_0x4a2573(0x164)](()=>{const _0x3db088=_0x4a2573;cy[_0x3db088(0x274)](_0x37e042['txKjw'])['should']('not.exist'),cy[_0x3db088(0x274)](_0x37e042[_0x3db088(0x2ae)])[_0x3db088(0x27d)](_0x37e042[_0x3db088(0x148)])['click']();}),H[_0x4a2573(0x217)]()[_0x4a2573(0x164)](()=>{const _0x46066e=_0x4a2573;H['typeAndBlurUsingLabel'](/Slug/,_0x46066e(0x18a)),cy[_0x46066e(0x18c)](_0x37e042[_0x46066e(0x1c7)])[_0x46066e(0x15f)](),cy['wait'](_0x37e042[_0x46066e(0x1f5)]);});});});else{const _0x167794={'ffoDo':'not.be.disabled'};_0x48dcc2()[_0x2fbc8f(0x164)](()=>{const _0x1c19be=_0x2fbc8f;_0x51071a[_0x1c19be(0x150)](_0x1c19be(0x2a3))[_0x1c19be(0x27d)](_0x167794[_0x1c19be(0x1fa)])['realHover']();}),_0x40b947[_0x2fbc8f(0x154)]()[_0x2fbc8f(0x274)](/Database routing can't be enabled if/)['should'](_0x34dedc['sotSc']);}}),_0x498bd0['LhCjl'](describe,_0x46f5df(0x184),{'tags':[_0x498bd0['GuDyM']]},()=>{const _0x2090ed=_0x46f5df;_0x498bd0[_0x2090ed(0x174)](_0x2090ed(0x2a1),_0x2090ed(0x2a1))?_0x23bf37['icon'](_0x498bd0['prpkm'])[_0x2090ed(0x15f)]():_0x498bd0[_0x2090ed(0x234)](it,_0x498bd0[_0x2090ed(0x1fd)],()=>{const _0x5372ca=_0x2090ed;cy[_0x5372ca(0x22e)]('/admin/databases/2'),dbConnectionInfoSection()[_0x5372ca(0x27d)](_0x5372ca(0x167)),dbRoutingSection()[_0x5372ca(0x27d)](_0x5372ca(0x223));});});});function dbConnectionInfoSection(){const _0x1e498e=_0x445bb6;return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),cy[_0x1e498e(0x1c5)](_0x1e498e(0x1e5));}function dbRoutingSection(){const _0x2e1398=_0x445bb6,_0x11eaac={'bRrlk':_0x2e1398(0x24e)};return new AsyncFunction('return\x20await\x20Promise.resolve(42);')(),cy[_0x2e1398(0x1c5)](_0x11eaac[_0x2e1398(0x149)]);}function expandDbRouting(){const _0x215204=_0x445bb6;dbRoutingSection()[_0x215204(0x164)](()=>{const _0x2d7b76=_0x215204;cy[_0x2d7b76(0x29b)](_0x2d7b76(0x20f))[_0x2d7b76(0x15f)]();});}function assertDbRoutingNotDisabled(){const _0x945d9=_0x445bb6,_0x224491={'jfUuL':_0x945d9(0x167),'NlXaC':_0x945d9(0x230),'lhbaH':_0x945d9(0x222),'SOnCG':function(_0x2f00ff,_0x5e90a6){return _0x2f00ff===_0x5e90a6;},'KFMJI':_0x945d9(0x2b3)};dbRoutingSection()[_0x945d9(0x164)](()=>{const _0x5cbdc1=_0x945d9,_0xd0ae6a={'NuGWM':_0x224491[_0x5cbdc1(0x294)],'isjzY':_0x224491[_0x5cbdc1(0x298)]};_0x224491['SOnCG']('iBAjy',_0x224491['KFMJI'])?cy['findByLabelText'](_0x5cbdc1(0x2a3))[_0x5cbdc1(0x27d)](_0x5cbdc1(0x253))[_0x5cbdc1(0x1e1)]():(_0x4848bb()[_0x5cbdc1(0x164)](()=>{const _0x1cd043=_0x5cbdc1;_0x5dd9d7[_0x1cd043(0x150)](_0x1cd043(0x2a3))[_0x1cd043(0x27d)](_0xd0ae6a['NuGWM'])['should'](_0xd0ae6a['isjzY'])[_0x1cd043(0x1e1)]();}),_0x67fb69[_0x5cbdc1(0x154)]()[_0x5cbdc1(0x274)](/Database routing can't be enabled if/)[_0x5cbdc1(0x27d)](_0x224491[_0x5cbdc1(0x1dc)]));}),H[_0x945d9(0x154)]()[_0x945d9(0x274)](/Database routing can't be enabled if/)[_0x945d9(0x27d)](_0x945d9(0x223));}function assertDbRoutingDisabled(){const _0x49318c=_0x445bb6,_0x4484a0={'OTKao':_0x49318c(0x167),'aLrFw':function(_0x4cc0d7,_0xd30d7f){return _0x4cc0d7===_0xd30d7f;},'VhPaD':_0x49318c(0x267),'TidNy':_0x49318c(0x230),'uDPnW':function(_0x4c81e6){return _0x4c81e6();}};_0x4484a0[_0x49318c(0x1cb)](dbRoutingSection)[_0x49318c(0x164)](()=>{const _0xde7ab7=_0x49318c;_0x4484a0[_0xde7ab7(0x27c)](_0x4484a0[_0xde7ab7(0x287)],_0xde7ab7(0x267))?cy[_0xde7ab7(0x150)](_0xde7ab7(0x2a3))['should'](_0x4484a0[_0xde7ab7(0x153)])[_0xde7ab7(0x27d)]('be.disabled')[_0xde7ab7(0x1e1)]():(_0x57f0c9[_0xde7ab7(0x274)](_0xde7ab7(0x233))[_0xde7ab7(0x27d)](_0x4484a0[_0xde7ab7(0x20b)]),_0x14eef9[_0xde7ab7(0x274)]('Destination\x20DB\x206')['should'](_0xde7ab7(0x223)));}),H[_0x49318c(0x154)]()[_0x49318c(0x274)](/Database routing can't be enabled if/)[_0x49318c(0x27d)]('exist');}function _0x558d(_0x28e203,_0x1dc529){const _0x4330ed=_0x4330();return _0x558d=function(_0x558df9,_0x461e51){_0x558df9=_0x558df9-0x145;let _0x5cfcd1=_0x4330ed[_0x558df9];return _0x5cfcd1;},_0x558d(_0x28e203,_0x1dc529);}function setupModelPersistence(){const _0x52cb86=_0x445bb6,_0x1037c1={'CNIhS':_0x52cb86(0x1fc),'IzrLU':_0x52cb86(0x216),'qfuwz':_0x52cb86(0x250),'lPtyE':'tab','zgisN':_0x52cb86(0x1ca),'ULtQJ':_0x52cb86(0x242)},_0x11667c=_0x1037c1['CNIhS']['split']('|');let _0x5e4199=0x0;while(!![]){switch(_0x11667c[_0x5e4199++]){case'0':interceptPerformanceRoutes();continue;case'1':cy['wait'](_0x1037c1[_0x52cb86(0x211)]);continue;case'2':cy[_0x52cb86(0x22c)](_0x52cb86(0x162),{'name':_0x52cb86(0x18e)})[_0x52cb86(0x15f)]();continue;case'3':cy['findByRole'](_0x1037c1['qfuwz'],{'name':_0x52cb86(0x255)})['click']({'force':!![]});continue;case'4':cy['findByRole'](_0x1037c1[_0x52cb86(0x1d7)],{'name':_0x1037c1[_0x52cb86(0x284)]})['click']();continue;case'5':cy[_0x52cb86(0x22e)](_0x1037c1[_0x52cb86(0x29c)]);continue;}break;}}