const _0x2136e2=_0x159a;(function(_0x1f381d,_0x47f9b8){const _0x4447ae=_0x159a,_0xa3108b=_0x1f381d();while(!![]){try{const _0x313842=-parseInt(_0x4447ae(0x1da))/0x1+parseInt(_0x4447ae(0x1c3))/0x2+-parseInt(_0x4447ae(0x192))/0x3*(-parseInt(_0x4447ae(0x1d1))/0x4)+parseInt(_0x4447ae(0x186))/0x5*(-parseInt(_0x4447ae(0x1af))/0x6)+parseInt(_0x4447ae(0x1b5))/0x7*(parseInt(_0x4447ae(0x1ac))/0x8)+parseInt(_0x4447ae(0x182))/0x9+parseInt(_0x4447ae(0x185))/0xa;if(_0x313842===_0x47f9b8)break;else _0xa3108b['push'](_0xa3108b['shift']());}catch(_0x33ca36){_0xa3108b['push'](_0xa3108b['shift']());}}}(_0xba32,0xb3aef));function _0xba32(){const _0x47f55d=['Vzxau','3044349kJIakz','directory','extract\x20symlink','4860400EYbQHv','1537085sVymvf','throw\x20when\x20a\x20directory\x20outside\x20the\x20root\x20including\x20symlinks\x20is\x20given','wXqtJ','FmgbQ','dXkTj','throw\x20when\x20a\x20location\x20outside\x20the\x20root\x20including\x20symlinks\x20is\x20given','iDFBD','strip.tar','fQlZJ','throw\x20when\x20a\x20top-level\x20symlink\x20outside\x20the\x20root\x20is\x20given','UwRde','symlink','493404PzZSmO','afterEach','plVeE','throwsAsync','KDVFr','BHzVK','RgEjp','/tmp/dist','cLBIh','extract\x20file\x20to\x20directory','EMNCJ','file.tar','cKLFo','unicorn-test.jpg','xRaOl','krexU','map\x20option','WIdRb','mtime','aznSF','data','iThVZ','true','Eyqtm','readFile','dist','920QfIfvu','FNdHv','eBACB','6mWFEPc','join','edge_case_dots/','jmLyL','file.zip','xdRHA','23954uBIQsf','yHOkb','slip2.zip','edge_case_dots','strip.zip','return\x20emptpy\x20array\x20if\x20no\x20plugins\x20are\x20set','test-strip.jpg','example.txt','jbXcI','duETs','file.txt','UNDCD','extract\x20directory','file.tar.bz2','301506dzedVH','vzjHi','allows\x20filenames\x20and\x20directories\x20to\x20be\x20written\x20with\x20dots\x20in\x20their\x20names','Ukvcb','ensure\x20decompressed\x20files\x20and\x20directories\x20are\x20cleaned\x20up','throw\x20when\x20chained\x20symlinks\x20to\x20/private/tmp/dist2\x20allow\x20escape\x20outside\x20root\x20directory','slip3a.zip','extract\x20file','edge_case_dots/sample../','mOfBD','deepEqual','map','stat','length','20EVgjWP','symlink.tar','unicorn-','fixtures','cSYCH','IUzdV','throw\x20when\x20a\x20location\x20outside\x20the\x20root\x20is\x20given','/private/tmp/dist2','filter\x20option','1147524vxJzbw','file.tar.gz','serial','SyIvC','allows\x20top-level\x20file','path','edge_case_dots/sample../test.txt','strip\x20option','extract\x20file\x20using\x20buffer','test.jpg','ofrgJ'];_0xba32=function(){return _0x47f55d;};return _0xba32();}import _0x53d311 from'fs';import _0x464841 from'path';import _0x318b3e from'is-jpg';import _0x3420f8 from'path-exists';import _0x112e40 from'pify';import _0x3fea4b from'rimraf';import _0x21a1ae from'ava';function _0x159a(_0x178841,_0x296b65){const _0xba32d0=_0xba32();return _0x159a=function(_0x159a4e,_0x40a623){_0x159a4e=_0x159a4e-0x17a;let _0x138714=_0xba32d0[_0x159a4e];return _0x138714;},_0x159a(_0x178841,_0x296b65);}import _0x40bf79 from'.';const fsP=_0x112e40(_0x53d311),rimrafP=_0x112e40(_0x3fea4b);_0x21a1ae[_0x2136e2(0x1dc)][_0x2136e2(0x193)](_0x2136e2(0x1c7),async()=>{const _0x4e09f2=_0x2136e2,_0x20aa71={'qgLcp':function(_0xe59105,_0x5d1c4b){return _0xe59105(_0x5d1c4b);},'Ukvcb':function(_0xb588c8,_0x481021){return _0xb588c8(_0x481021);},'PCUWv':_0x4e09f2(0x1bc),'xdRHA':function(_0x1dd4cf,_0x30f662){return _0x1dd4cf(_0x30f662);},'jmLyL':_0x4e09f2(0x17f)};await _0x20aa71['qgLcp'](rimrafP,_0x464841[_0x4e09f2(0x1b0)](__dirname,_0x4e09f2(0x183))),await rimrafP(_0x464841[_0x4e09f2(0x1b0)](__dirname,_0x4e09f2(0x1ab))),await _0x20aa71['Ukvcb'](rimrafP,_0x464841[_0x4e09f2(0x1b0)](__dirname,_0x20aa71['PCUWv'])),await _0x20aa71[_0x4e09f2(0x1c6)](rimrafP,_0x464841[_0x4e09f2(0x1b0)](__dirname,_0x4e09f2(0x1bf))),await rimrafP(_0x464841[_0x4e09f2(0x1b0)](__dirname,_0x4e09f2(0x1b8))),await rimrafP(_0x464841[_0x4e09f2(0x1b0)](__dirname,_0x4e09f2(0x191))),await _0x20aa71[_0x4e09f2(0x1b4)](rimrafP,_0x464841[_0x4e09f2(0x1b0)](__dirname,_0x20aa71[_0x4e09f2(0x1b2)]));}),_0x21a1ae(_0x2136e2(0x1ca),async _0x209674=>{const _0x20dc3f=_0x2136e2,_0x33c130={'Eyqtm':_0x20dc3f(0x1d4),'QgAFa':_0x20dc3f(0x1c2),'plVeE':'file.zip','IUzdV':'test.jpg','iDFBD':function(_0x334f5a,_0x5740e1){return _0x334f5a(_0x5740e1);}},_0x4e13f1=await _0x40bf79(_0x464841['join'](__dirname,_0x33c130[_0x20dc3f(0x1a9)],_0x20dc3f(0x19d))),_0x36fcad=await _0x40bf79(_0x464841[_0x20dc3f(0x1b0)](__dirname,_0x33c130[_0x20dc3f(0x1a9)],_0x33c130['QgAFa'])),_0x1e1b12=await _0x40bf79(_0x464841[_0x20dc3f(0x1b0)](__dirname,_0x20dc3f(0x1d4),_0x20dc3f(0x1db))),_0xe8d860=await _0x40bf79(_0x464841[_0x20dc3f(0x1b0)](__dirname,_0x20dc3f(0x1d4),_0x33c130[_0x20dc3f(0x194)]));_0x209674['is'](_0x4e13f1[0x0][_0x20dc3f(0x17b)],_0x33c130[_0x20dc3f(0x1d6)]),_0x209674['true'](_0x318b3e(_0x4e13f1[0x0]['data'])),_0x209674['is'](_0x36fcad[0x0][_0x20dc3f(0x17b)],_0x33c130[_0x20dc3f(0x1d6)]),_0x209674[_0x20dc3f(0x1a8)](_0x318b3e(_0x36fcad[0x0][_0x20dc3f(0x1a6)])),_0x209674['is'](_0x1e1b12[0x0][_0x20dc3f(0x17b)],_0x20dc3f(0x17f)),_0x209674[_0x20dc3f(0x1a8)](_0x33c130[_0x20dc3f(0x18c)](_0x318b3e,_0x1e1b12[0x0][_0x20dc3f(0x1a6)])),_0x209674['is'](_0xe8d860[0x0]['path'],_0x33c130[_0x20dc3f(0x1d6)]),_0x209674[_0x20dc3f(0x1a8)](_0x318b3e(_0xe8d860[0x0][_0x20dc3f(0x1a6)]));}),_0x21a1ae(_0x2136e2(0x17e),async _0x449052=>{const _0x1223f1=_0x2136e2,_0x7e84d1={'FNdHv':function(_0x180ab3,_0x130735){return _0x180ab3(_0x130735);},'EMNCJ':_0x1223f1(0x1d4),'cKYAC':_0x1223f1(0x1b3),'aznSF':'test.jpg'},_0xd58ae=await fsP['readFile'](_0x464841[_0x1223f1(0x1b0)](__dirname,'fixtures',_0x1223f1(0x19d))),_0x57ddda=await _0x40bf79(_0xd58ae),_0x453997=await fsP[_0x1223f1(0x1aa)](_0x464841[_0x1223f1(0x1b0)](__dirname,_0x1223f1(0x1d4),'file.tar.bz2')),_0x2c95b7=await _0x7e84d1[_0x1223f1(0x1ad)](_0x40bf79,_0x453997),_0x2d03dd=await fsP['readFile'](_0x464841[_0x1223f1(0x1b0)](__dirname,_0x7e84d1[_0x1223f1(0x19c)],_0x1223f1(0x1db))),_0x50dbd7=await _0x40bf79(_0x2d03dd),_0x1e2c03=await fsP[_0x1223f1(0x1aa)](_0x464841['join'](__dirname,_0x1223f1(0x1d4),_0x7e84d1['cKYAC'])),_0x5bfb91=await _0x40bf79(_0x1e2c03);_0x449052['is'](_0x57ddda[0x0][_0x1223f1(0x17b)],_0x1223f1(0x17f)),_0x449052['is'](_0x2c95b7[0x0][_0x1223f1(0x17b)],_0x7e84d1[_0x1223f1(0x1a5)]),_0x449052['is'](_0x50dbd7[0x0]['path'],_0x7e84d1['aznSF']),_0x449052['is'](_0x5bfb91[0x0]['path'],'test.jpg');}),_0x21a1ae[_0x2136e2(0x1dc)](_0x2136e2(0x19b),async _0x2e8e72=>{const _0x289fd1=_0x2136e2,_0x264ea5={'ifLTJ':function(_0x7eb886,_0x4d7d6){return _0x7eb886(_0x4d7d6);},'UNDCD':_0x289fd1(0x17f)},_0x44d771=await _0x40bf79(_0x464841['join'](__dirname,_0x289fd1(0x1d4),_0x289fd1(0x19d)),__dirname);_0x2e8e72['is'](_0x44d771[0x0][_0x289fd1(0x17b)],_0x289fd1(0x17f)),_0x2e8e72[_0x289fd1(0x1a8)](_0x318b3e(_0x44d771[0x0][_0x289fd1(0x1a6)])),_0x2e8e72[_0x289fd1(0x1a8)](await _0x264ea5['ifLTJ'](_0x3420f8,_0x464841[_0x289fd1(0x1b0)](__dirname,_0x264ea5[_0x289fd1(0x1c0)])));}),_0x21a1ae['serial'](_0x2136e2(0x184),async _0x585038=>{const _0x58765d=_0x2136e2;await _0x40bf79(_0x464841[_0x58765d(0x1b0)](__dirname,'fixtures',_0x58765d(0x1d2)),__dirname,{'strip':0x1}),_0x585038['is'](await fsP['realpath'](_0x464841[_0x58765d(0x1b0)](__dirname,'symlink')),_0x464841['join'](__dirname,_0x58765d(0x1bf)));}),_0x21a1ae[_0x2136e2(0x1dc)](_0x2136e2(0x1c1),async _0x13cc3e=>{const _0x3cbe8f=_0x2136e2,_0x5d55a4={'SrBoO':'directory.tar','WIdRb':function(_0x8ca048,_0x107349){return _0x8ca048(_0x107349);}};await _0x40bf79(_0x464841[_0x3cbe8f(0x1b0)](__dirname,_0x3cbe8f(0x1d4),_0x5d55a4['SrBoO']),__dirname),_0x13cc3e[_0x3cbe8f(0x1a8)](await _0x5d55a4[_0x3cbe8f(0x1a3)](_0x3420f8,_0x464841[_0x3cbe8f(0x1b0)](__dirname,'directory')));}),_0x21a1ae(_0x2136e2(0x17d),async _0x568770=>{const _0x435c64=_0x2136e2,_0x4ef2a2={'fQlZJ':function(_0x21b133,_0x2f2859,_0x3ba40a){return _0x21b133(_0x2f2859,_0x3ba40a);},'BHzVK':_0x435c64(0x1b9),'FmgbQ':function(_0x30f06e,_0x5a5d67){return _0x30f06e(_0x5a5d67);},'cVdsq':function(_0x4c821d,_0x11089a){return _0x4c821d(_0x11089a);}},_0x5b83eb=await _0x4ef2a2['fQlZJ'](_0x40bf79,_0x464841[_0x435c64(0x1b0)](__dirname,_0x435c64(0x1d4),_0x4ef2a2[_0x435c64(0x197)]),{'strip':0x1}),_0xbbf2e6=await _0x4ef2a2[_0x435c64(0x18e)](_0x40bf79,_0x464841[_0x435c64(0x1b0)](__dirname,'fixtures',_0x435c64(0x18d)),{'strip':0x1});_0x568770['is'](_0x5b83eb[0x0][_0x435c64(0x17b)],_0x435c64(0x1bb)),_0x568770['true'](_0x4ef2a2[_0x435c64(0x189)](_0x318b3e,_0x5b83eb[0x0][_0x435c64(0x1a6)])),_0x568770['is'](_0xbbf2e6[0x0]['path'],_0x435c64(0x1bb)),_0x568770[_0x435c64(0x1a8)](_0x4ef2a2['cVdsq'](_0x318b3e,_0xbbf2e6[0x0][_0x435c64(0x1a6)]));}),_0x21a1ae(_0x2136e2(0x1d9),async _0x1e8e1d=>{const _0x5d86bf=_0x2136e2,_0x24230e=await _0x40bf79(_0x464841['join'](__dirname,_0x5d86bf(0x1d4),_0x5d86bf(0x19d)),{'filter':_0x4b6061=>_0x4b6061['path']!==_0x5d86bf(0x17f)});_0x1e8e1d['is'](_0x24230e['length'],0x0);}),_0x21a1ae(_0x2136e2(0x1a2),async _0x220061=>{const _0x1340e8=_0x2136e2,_0x19775b={'UskqO':function(_0x354340,_0x5adf1e,_0x5eaec6){return _0x354340(_0x5adf1e,_0x5eaec6);},'Vzxau':_0x1340e8(0x19d)},_0x1cc5bd=await _0x19775b['UskqO'](_0x40bf79,_0x464841[_0x1340e8(0x1b0)](__dirname,'fixtures',_0x19775b[_0x1340e8(0x181)]),{'map':_0x349664=>{const _0x4ad233=_0x1340e8;return _0x349664[_0x4ad233(0x17b)]=_0x4ad233(0x1d3)+_0x349664[_0x4ad233(0x17b)],_0x349664;}});_0x220061['is'](_0x1cc5bd[0x0][_0x1340e8(0x17b)],_0x1340e8(0x19f));}),_0x21a1ae[_0x2136e2(0x1dc)]('set\x20mtime',async _0x174a34=>{const _0x571648=_0x2136e2,_0x3d7784={'cLBIh':function(_0x5c750a,_0xb69c46,_0x3daef5){return _0x5c750a(_0xb69c46,_0x3daef5);},'vzjHi':_0x571648(0x17f)},_0x4400ca=await _0x3d7784[_0x571648(0x19a)](_0x40bf79,_0x464841[_0x571648(0x1b0)](__dirname,_0x571648(0x1d4),'file.tar'),__dirname),_0x263485=await fsP[_0x571648(0x1cf)](_0x464841[_0x571648(0x1b0)](__dirname,_0x3d7784[_0x571648(0x1c4)]));_0x174a34[_0x571648(0x1cd)](_0x4400ca[0x0][_0x571648(0x1a4)],_0x263485['mtime']);}),_0x21a1ae(_0x2136e2(0x1ba),async _0x17e041=>{const _0x3ee39f=_0x2136e2,_0x387d5c={'VKYfc':_0x3ee39f(0x1d4)},_0x536109=await _0x40bf79(_0x464841[_0x3ee39f(0x1b0)](__dirname,_0x387d5c['VKYfc'],_0x3ee39f(0x19d)),{'plugins':[]});_0x17e041['is'](_0x536109['length'],0x0);}),_0x21a1ae[_0x2136e2(0x1dc)](_0x2136e2(0x1d7),async _0x18f4c5=>{const _0x55b4d4=_0x2136e2,_0x54f6b8={'TjePE':function(_0x2037c4,_0x2f80b5,_0xed77b4){return _0x2037c4(_0x2f80b5,_0xed77b4);},'dipjn':_0x55b4d4(0x1d4),'KDVFr':'slipping.tar.gz'};await _0x18f4c5['throwsAsync'](async()=>{const _0x2bbc01=_0x55b4d4;await _0x54f6b8['TjePE'](_0x40bf79,_0x464841[_0x2bbc01(0x1b0)](__dirname,_0x54f6b8['dipjn'],_0x54f6b8[_0x2bbc01(0x196)]),'dist');},{'message':/Refusing/});}),_0x21a1ae[_0x2136e2(0x1dc)](_0x2136e2(0x18b),async _0x5c0286=>{const _0x4bd604=_0x2136e2,_0x4270bb={'ofrgJ':_0x4bd604(0x1d4),'eBACB':'slip.zip','yHOkb':'dist'};await _0x5c0286['throwsAsync'](async()=>{const _0x281c3c=_0x4bd604;await _0x40bf79(_0x464841[_0x281c3c(0x1b0)](__dirname,_0x4270bb[_0x281c3c(0x180)],_0x4270bb[_0x281c3c(0x1ae)]),_0x4270bb[_0x281c3c(0x1b6)]);},{'message':/Refusing/});}),_0x21a1ae[_0x2136e2(0x1dc)](_0x2136e2(0x18f),async _0x403042=>{const _0x227fc6=_0x2136e2,_0x57dfbc={'SyIvC':'fixtures','NSrvc':_0x227fc6(0x1b7),'RgEjp':_0x227fc6(0x1ab)};await _0x403042[_0x227fc6(0x195)](async()=>{const _0x5a44dd=_0x227fc6;await _0x40bf79(_0x464841['join'](__dirname,_0x57dfbc[_0x5a44dd(0x1dd)],_0x57dfbc['NSrvc']),_0x57dfbc[_0x5a44dd(0x198)]);},{'message':/Refusing/});}),_0x21a1ae[_0x2136e2(0x1dc)](_0x2136e2(0x187),async _0x3e61e3=>{const _0x2ea3ad=_0x2136e2,_0x5b62ea={'iThVZ':function(_0x3fda84,_0x244820,_0x58b818){return _0x3fda84(_0x244820,_0x58b818);},'mOfBD':_0x2ea3ad(0x1d4),'AXOHJ':_0x2ea3ad(0x1ab)};await _0x3e61e3[_0x2ea3ad(0x195)](async()=>{const _0x14328c=_0x2ea3ad;await _0x5b62ea[_0x14328c(0x1a7)](_0x40bf79,_0x464841[_0x14328c(0x1b0)](__dirname,_0x5b62ea[_0x14328c(0x1cc)],'slipping_directory.tar.gz'),_0x5b62ea['AXOHJ']);},{'message':/Refusing/});}),_0x21a1ae[_0x2136e2(0x1dc)](_0x2136e2(0x1c5),async _0x402621=>{const _0x599976=_0x2136e2,_0x224e4e={'UwRde':_0x599976(0x1d4),'cKLFo':_0x599976(0x1b1),'dXkTj':'edge_case_dots/ending_dots..','MGCJa':_0x599976(0x17c)},_0xbdd8d5=await _0x40bf79(_0x464841['join'](__dirname,_0x224e4e[_0x599976(0x190)],'edge_case_dots.tar.gz'),__dirname);_0x402621['is'](_0xbdd8d5[_0x599976(0x1d0)],0x6),_0x402621[_0x599976(0x1cd)](_0xbdd8d5[_0x599976(0x1ce)](_0x459537=>_0x459537[_0x599976(0x17b)])['sort'](),[_0x224e4e[_0x599976(0x19e)],'edge_case_dots/internal_dots..txt',_0x599976(0x1cb),_0x224e4e[_0x599976(0x18a)],'edge_case_dots/x',_0x224e4e['MGCJa']]['sort']());}),_0x21a1ae[_0x2136e2(0x1dc)](_0x2136e2(0x17a),async _0x179352=>{const _0x4bf1e6=_0x2136e2,_0x281b98={'CIodT':function(_0x3fda7a,_0x4ad0ca,_0x421818){return _0x3fda7a(_0x4ad0ca,_0x421818);},'xRaOl':'fixtures','duETs':_0x4bf1e6(0x1ab)},_0x53874f=await _0x281b98['CIodT'](_0x40bf79,_0x464841[_0x4bf1e6(0x1b0)](__dirname,_0x281b98[_0x4bf1e6(0x1a0)],'top_level_example.tar.gz'),_0x281b98[_0x4bf1e6(0x1be)]);_0x179352['is'](_0x53874f[_0x4bf1e6(0x1d0)],0x1),_0x179352['is'](_0x53874f[0x0][_0x4bf1e6(0x17b)],'example.txt');}),_0x21a1ae['serial']('throw\x20when\x20chained\x20symlinks\x20to\x20/tmp/dist\x20allow\x20escape\x20outside\x20root\x20directory',async _0x375c52=>{const _0x522aa4=_0x2136e2,_0xb13012={'krexU':'fixtures','jbXcI':'slip3.zip','cSYCH':_0x522aa4(0x199)};await _0x375c52[_0x522aa4(0x195)](async()=>{const _0x42e9a3=_0x522aa4;await _0x40bf79(_0x464841[_0x42e9a3(0x1b0)](__dirname,_0xb13012[_0x42e9a3(0x1a1)],_0xb13012[_0x42e9a3(0x1bd)]),_0xb13012[_0x42e9a3(0x1d5)]);},{'message':/Refusing/});}),_0x21a1ae[_0x2136e2(0x1dc)](_0x2136e2(0x1c8),async _0xc4eb20=>{const _0x884937=_0x2136e2,_0xb711f1={'wXqtJ':function(_0x3c5f86,_0x4cc205,_0x2da4ff){return _0x3c5f86(_0x4cc205,_0x2da4ff);},'EuPdO':_0x884937(0x1d4),'BCEms':_0x884937(0x1d8)};await _0xc4eb20['throwsAsync'](async()=>{const _0x26ab05=_0x884937;await _0xb711f1[_0x26ab05(0x188)](_0x40bf79,_0x464841[_0x26ab05(0x1b0)](__dirname,_0xb711f1['EuPdO'],_0x26ab05(0x1c9)),_0xb711f1['BCEms']);},{'message':/Refusing/});});