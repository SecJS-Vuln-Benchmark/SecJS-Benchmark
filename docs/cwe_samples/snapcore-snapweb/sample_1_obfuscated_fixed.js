'use strict';function _0x1441(){const _0x4508f2=['jBfoE','databaseVersion','sequelize:read','SELECT','gShav','all\x20connections\x20destroyed','reject','pool\x20created\x20with\x20max/min:\x20','lodash','\x20package\x20manually','catch','acquire','length','29897028fuyRdL','release','AnMDC','5599Klatjy','config','../../utils/logger','wYTFH','valid',',\x20with\x20replication','QndoA','../../errors','min','7dyQpaN','GAZkX','connection\x20released','try','dXDek','disconnect','dialect','versionPromise','wtApa','jwynA','options','drain','Please\x20install\x20','ozNCL','_disconnect','return','zRfzH','queryType','cloneDeep','join','connectionManager','runHooks','defaultVersion','MEItP','Unable\x20to\x20find\x20dialect\x20at\x20','sequelize:write','pool','424mwijZM','read','beforeConnect','type','FYEgp','VdZYD','transaction','VjkwT','logging','1407236vNpctf','omit','close','dialectModulePath','jHyGp','useMaster','_refreshTypeParser','connection\x20drain\x20due\x20to\x20process\x20exit','tap','TpVCV','btsJG','ConnectionAcquireTimeoutError','Oqkqq',',\x20no\x20replication','types','semver','zCXXx','exports','refreshTypeParser','uuwbC','23910NcvyOs','dCrgQ','defaults','MVLUo','867270GEmkSk','QcTEF','1679618sCIbPk','initPools','hbVJV','debugContext','Support\x20for\x20pool:false\x20was\x20removed\x20in\x20v4.0','DjbrE','then','251271FcwaHN','MODULE_NOT_FOUND','Wrjdm','uVXpB','destroy','replication','key','dialectName','3xWvESQ','write','max','dialectModule','NZcRi','parse','yyTnC','RTrZd','code','afterConnect','idle','bind','resolve','8031516RhaTiZ','_onProcessExit','_validate','5nncPMh','coerce','validate','evict','connection\x20acquired','destroyAllNow','_connect','FmtNC','connect','SwVSU','isArray','getConnection','each','sequelize','\x20in\x20dialect\x20','nbIpv'];_0x1441=function(){return _0x4508f2;};return _0x1441();}const _0x26eba9=_0x5dfb;(function(_0xf757ee,_0x4c6af7){const _0x21189d=_0x5dfb,_0x3f51ff=_0xf757ee();while(!![]){try{const _0x131a33=-parseInt(_0x21189d(0x144))/0x1+parseInt(_0x21189d(0x146))/0x2*(parseInt(_0x21189d(0x155))/0x3)+-parseInt(_0x21189d(0x12c))/0x4*(parseInt(_0x21189d(0xdf))/0x5)+parseInt(_0x21189d(0xdc))/0x6*(parseInt(_0x21189d(0x108))/0x7)+-parseInt(_0x21189d(0x123))/0x8*(parseInt(_0x21189d(0x14d))/0x9)+-parseInt(_0x21189d(0x140))/0xa*(parseInt(_0x21189d(0xff))/0xb)+parseInt(_0x21189d(0xfc))/0xc;if(_0x131a33===_0x4c6af7)break;else _0x3f51ff['push'](_0x3f51ff['shift']());}catch(_0x13bd54){_0x3f51ff['push'](_0x3f51ff['shift']());}}}(_0x1441,0xb8159));function _0x5dfb(_0x14ff27,_0x24144b){const _0x14417e=_0x1441();return _0x5dfb=function(_0x5dfbaa,_0x5e95c8){_0x5dfbaa=_0x5dfbaa-0xd8;let _0x48bfe9=_0x14417e[_0x5dfbaa];return _0x48bfe9;},_0x5dfb(_0x14ff27,_0x24144b);}const {Pool}=require('sequelize-pool'),_=require(_0x26eba9(0xf7)),semver=require(_0x26eba9(0x13b)),Promise=require('../../promise'),errors=require(_0x26eba9(0x106)),{logger}=require(_0x26eba9(0x101)),debug=logger[_0x26eba9(0x149)](_0x26eba9(0x122));class ConnectionManager{constructor(_0x1847bd,_0x3533b2){const _0x5f5d77=_0x26eba9,_0x4a04a8={'Oqkqq':function(_0x995eab,_0x176a63){return _0x995eab===_0x176a63;}},_0x5fcbbf=_[_0x5f5d77(0x11a)](_0x3533b2[_0x5f5d77(0x100)]);this[_0x5f5d77(0xec)]=_0x3533b2,this['config']=_0x5fcbbf,this[_0x5f5d77(0x10e)]=_0x1847bd,this[_0x5f5d77(0x10f)]=null,this['dialectName']=this['sequelize']['options']['dialect'];if(_0x4a04a8[_0x5f5d77(0x138)](_0x5fcbbf[_0x5f5d77(0x122)],![]))throw new Error(_0x5f5d77(0x14a));_0x5fcbbf[_0x5f5d77(0x122)]=_['defaults'](_0x5fcbbf[_0x5f5d77(0x122)]||{},{'max':0x5,'min':0x0,'idle':0x2710,'acquire':0xea60,'evict':0x3e8,'validate':this['_validate'][_0x5f5d77(0xda)](this)}),this['initPools']();}[_0x26eba9(0x13e)](_0x33257a){const _0x5eb757=_0x26eba9,_0x47b6c5={'btsJG':_0x5eb757(0x156),'nbIpv':_0x5eb757(0x15a)};_[_0x5eb757(0xeb)](_0x33257a,_0x12b14b=>{const _0x3b2c81=_0x5eb757;if(_0x12b14b['hasOwnProperty'](_0x47b6c5[_0x3b2c81(0xee)])){if('vAOik'==='gpAbc')_0x502d41[_0x3b2c81(0x119)]=_0x47b6c5[_0x3b2c81(0x136)];else{if(_0x12b14b[_0x3b2c81(0x13a)][this[_0x3b2c81(0x154)]])this[_0x3b2c81(0x132)](_0x12b14b);else throw new Error('Parse\x20function\x20not\x20supported\x20for\x20type\x20'+_0x12b14b[_0x3b2c81(0x153)]+_0x3b2c81(0xed)+this['dialectName']);}}});}['_loadDialectModule'](_0x12382b){const _0x334bce=_0x26eba9,_0x4ac15b={'dCrgQ':function(_0x2bf840,_0x237560){return _0x2bf840(_0x237560);},'hbVJV':function(_0x33c0f5,_0x44c7a2){return _0x33c0f5(_0x44c7a2);},'wtApa':function(_0x43e0bd,_0x5b11c4){return _0x43e0bd===_0x5b11c4;},'zRfzH':_0x334bce(0x127)};try{if(this[_0x334bce(0xec)][_0x334bce(0x100)]['dialectModulePath'])return _0x4ac15b[_0x334bce(0x141)](require,this[_0x334bce(0xec)][_0x334bce(0x100)][_0x334bce(0x12f)]);if(this[_0x334bce(0xec)]['config'][_0x334bce(0x158)])return this[_0x334bce(0xec)][_0x334bce(0x100)]['dialectModule'];return _0x4ac15b[_0x334bce(0x148)](require,_0x12382b);}catch(_0x401229){if(_0x4ac15b[_0x334bce(0x110)](_0x401229[_0x334bce(0x15d)],_0x334bce(0x14e))){if(this[_0x334bce(0xec)][_0x334bce(0x100)]['dialectModulePath']){if(_0x334bce(0x109)!==_0x4ac15b[_0x334bce(0x118)])throw new Error(_0x334bce(0x120)+this['sequelize'][_0x334bce(0x100)]['dialectModulePath']);else return!![];}throw new Error(_0x334bce(0x114)+_0x12382b+_0x334bce(0xf8));}throw _0x401229;}}[_0x26eba9(0xdd)](){const _0x48ca00=_0x26eba9,_0x46d16d={'FmtNC':function(_0x2a6940,_0x1465d5){return _0x2a6940(_0x1465d5);},'zCXXx':_0x48ca00(0x133)};if(!this[_0x48ca00(0x122)])return Promise[_0x48ca00(0xdb)]();return this[_0x48ca00(0x122)][_0x48ca00(0x113)]()['then'](()=>{const _0x272c2b=_0x48ca00;return _0x46d16d[_0x272c2b(0xe6)](debug,_0x46d16d[_0x272c2b(0x13c)]),this[_0x272c2b(0x122)][_0x272c2b(0xe4)]();});}[_0x26eba9(0x12e)](){const _0x26c04c=_0x26eba9;return this[_0x26c04c(0xea)]=function _0x3d5b08(){const _0x32a2d6=_0x26c04c;return Promise[_0x32a2d6(0xf5)](new Error('ConnectionManager.getConnection\x20was\x20called\x20after\x20the\x20connection\x20manager\x20was\x20closed!'));},this[_0x26c04c(0xdd)]();}[_0x26eba9(0x147)](){const _0x340954=_0x26eba9,_0x1273a2={'ozNCL':function(_0x198728,_0x50ff5a){return _0x198728(_0x50ff5a);},'Wrjdm':'connection\x20destroy','gShav':function(_0x182e6b,_0x168cc8){return _0x182e6b!==_0x168cc8;},'NZcRi':function(_0xbb16a8,_0x3af45c){return _0xbb16a8===_0x3af45c;},'RTrZd':_0x340954(0xf2),'uuwbC':_0x340954(0x135),'jHyGp':function(_0x5e5d89,_0x1c6665){return _0x5e5d89%_0x1c6665;},'AnMDC':function(_0x4f4677,_0x386323){return _0x4f4677(_0x386323);},'NuBVG':_0x340954(0x121)},_0x5bc80f=this[_0x340954(0x100)];if(!_0x5bc80f['replication']){this[_0x340954(0x122)]=new Pool({'name':'sequelize','create':()=>this[_0x340954(0xe5)](_0x5bc80f),'destroy':_0x569c2f=>{return this['_disconnect'](_0x569c2f)['tap'](()=>{const _0x15402e=_0x5dfb;_0x1273a2[_0x15402e(0x115)](debug,_0x1273a2[_0x15402e(0x14f)]);});},'validate':_0x5bc80f[_0x340954(0x122)][_0x340954(0xe1)],'max':_0x5bc80f[_0x340954(0x122)][_0x340954(0x157)],'min':_0x5bc80f[_0x340954(0x122)]['min'],'acquireTimeoutMillis':_0x5bc80f['pool']['acquire'],'idleTimeoutMillis':_0x5bc80f[_0x340954(0x122)][_0x340954(0xd9)],'reapIntervalMillis':_0x5bc80f[_0x340954(0x122)][_0x340954(0xe2)]}),_0x1273a2[_0x340954(0xfe)](debug,_0x340954(0xf6)+_0x5bc80f[_0x340954(0x122)][_0x340954(0x157)]+'/'+_0x5bc80f[_0x340954(0x122)][_0x340954(0x107)]+_0x340954(0x139));return;}!Array[_0x340954(0xe9)](_0x5bc80f[_0x340954(0x152)]['read'])&&(_0x5bc80f[_0x340954(0x152)]['read']=[_0x5bc80f[_0x340954(0x152)]['read']]);_0x5bc80f[_0x340954(0x152)][_0x340954(0x156)]=_['defaults'](_0x5bc80f[_0x340954(0x152)]['write'],_[_0x340954(0x12d)](_0x5bc80f,'replication')),_0x5bc80f[_0x340954(0x152)]['read']=_0x5bc80f['replication'][_0x340954(0x124)]['map'](_0x1eeeec=>_[_0x340954(0x142)](_0x1eeeec,_['omit'](this[_0x340954(0x100)],_0x340954(0x152))));let _0x343a75=0x0;this[_0x340954(0x122)]={'release':_0x37f571=>{const _0x4873ca=_0x340954;_0x1273a2[_0x4873ca(0xf3)]('MEItP',_0x4873ca(0x11f))?_0x167a30[_0x4873ca(0x119)]=_0x4873ca(0x124):_0x37f571['queryType']===_0x4873ca(0x124)?this[_0x4873ca(0x122)]['read'][_0x4873ca(0xfd)](_0x37f571):this[_0x4873ca(0x122)][_0x4873ca(0x156)][_0x4873ca(0xfd)](_0x37f571);},'acquire':(_0x5853fb,_0x224f12)=>{const _0x91b0d0=_0x340954;_0x224f12=_0x1273a2['NZcRi'](_0x224f12,undefined)?![]:_0x224f12;if(_0x5853fb===_0x1273a2[_0x91b0d0(0x15c)]&&!_0x224f12){if(_0x91b0d0(0x145)===_0x91b0d0(0x128))this[_0x91b0d0(0x122)]['read']['release'](_0x16cf64);else return this[_0x91b0d0(0x122)][_0x91b0d0(0x124)]['acquire']();}return this[_0x91b0d0(0x122)]['write'][_0x91b0d0(0xfa)]();},'destroy':_0x53bb33=>{const _0x35318a=_0x340954;this[_0x35318a(0x122)][_0x53bb33[_0x35318a(0x119)]][_0x35318a(0x151)](_0x53bb33),debug(_0x1273a2[_0x35318a(0x14f)]);},'destroyAllNow':()=>{const _0x596b48=_0x340954;return Promise[_0x596b48(0x11b)](this['pool'][_0x596b48(0x124)]['destroyAllNow'](),this[_0x596b48(0x122)][_0x596b48(0x156)][_0x596b48(0xe4)]())[_0x596b48(0x134)](()=>{const _0x785703=_0x596b48;debug(_0x785703(0xf4));});},'drain':()=>{const _0x5d13b7=_0x340954;return Promise['join'](this['pool'][_0x5d13b7(0x156)][_0x5d13b7(0x113)](),this[_0x5d13b7(0x122)][_0x5d13b7(0x124)][_0x5d13b7(0x113)]());},'read':new Pool({'name':_0x340954(0xf1),'create':()=>{const _0x44cd8f=_0x340954,_0x188279={'QndoA':function(_0x40570b,_0x2a1d86){const _0x254bc8=_0x5dfb;return _0x1273a2[_0x254bc8(0x159)](_0x40570b,_0x2a1d86);},'SwVSU':function(_0x40305d,_0x45af77){return _0x40305d!==_0x45af77;},'kHzFv':_0x44cd8f(0x15b)};if(_0x1273a2[_0x44cd8f(0x159)]('FPCad',_0x1273a2[_0x44cd8f(0x13f)])){const _0x2d10a0=_0x5014b6[_0x44cd8f(0xe0)](_0xf0f3f7)['version'];return this['sequelize'][_0x44cd8f(0x112)][_0x44cd8f(0xf0)]=_0x21bbfe[_0x44cd8f(0x103)](_0x2d10a0)?_0x2d10a0:this[_0x44cd8f(0x11e)],this[_0x44cd8f(0x10f)]=null,this[_0x44cd8f(0x116)](_0x589660);}else{const _0x1ee6ae=_0x1273a2[_0x44cd8f(0x130)](_0x343a75++,_0x5bc80f[_0x44cd8f(0x152)][_0x44cd8f(0x124)][_0x44cd8f(0xfb)]);return this[_0x44cd8f(0xe5)](_0x5bc80f[_0x44cd8f(0x152)][_0x44cd8f(0x124)][_0x1ee6ae])[_0x44cd8f(0x134)](_0x236e70=>{const _0x3782a1=_0x44cd8f,_0x301e94={'VjkwT':function(_0xda6d5c,_0x3579f0){const _0xbc92a6=_0x5dfb;return _0x188279[_0xbc92a6(0x105)](_0xda6d5c,_0x3579f0);}};if(_0x188279[_0x3782a1(0xe8)](_0x3782a1(0x15b),_0x188279['kHzFv'])){_0x25ca93=_0x5bed0b===_0x54c93b?![]:_0x1d1c6c;if(_0x301e94[_0x3782a1(0x12a)](_0x8a86c9,_0x3782a1(0xf2))&&!_0x17a906)return this[_0x3782a1(0x122)]['read']['acquire']();return this[_0x3782a1(0x122)]['write'][_0x3782a1(0xfa)]();}else _0x236e70[_0x3782a1(0x119)]=_0x3782a1(0x124);});}},'destroy':_0x2104c5=>this[_0x340954(0x116)](_0x2104c5),'validate':_0x5bc80f[_0x340954(0x122)][_0x340954(0xe1)],'max':_0x5bc80f[_0x340954(0x122)]['max'],'min':_0x5bc80f[_0x340954(0x122)][_0x340954(0x107)],'acquireTimeoutMillis':_0x5bc80f[_0x340954(0x122)]['acquire'],'idleTimeoutMillis':_0x5bc80f['pool'][_0x340954(0xd9)],'reapIntervalMillis':_0x5bc80f['pool']['evict']}),'write':new Pool({'name':_0x1273a2['NuBVG'],'create':()=>{const _0x49cab2=_0x340954,_0x25cf91={'uVXpB':_0x49cab2(0x156)};return this['_connect'](_0x5bc80f[_0x49cab2(0x152)][_0x49cab2(0x156)])[_0x49cab2(0x134)](_0x3878b2=>{const _0x5aec1b=_0x49cab2;_0x3878b2[_0x5aec1b(0x119)]=_0x25cf91[_0x5aec1b(0x150)];});},'destroy':_0x3c95f1=>this[_0x340954(0x116)](_0x3c95f1),'validate':_0x5bc80f[_0x340954(0x122)][_0x340954(0xe1)],'max':_0x5bc80f[_0x340954(0x122)][_0x340954(0x157)],'min':_0x5bc80f['pool'][_0x340954(0x107)],'acquireTimeoutMillis':_0x5bc80f[_0x340954(0x122)][_0x340954(0xfa)],'idleTimeoutMillis':_0x5bc80f[_0x340954(0x122)]['idle'],'reapIntervalMillis':_0x5bc80f[_0x340954(0x122)]['evict']})},debug('pool\x20created\x20with\x20max/min:\x20'+_0x5bc80f['pool']['max']+'/'+_0x5bc80f[_0x340954(0x122)][_0x340954(0x107)]+_0x340954(0x104));}[_0x26eba9(0xea)](_0xf99a4b){const _0x177c89=_0x26eba9,_0x412ab6={'jBfoE':function(_0xb7a52b,_0x40bbfc){return _0xb7a52b(_0x40bbfc);},'cUeLe':_0x177c89(0xe3),'jwynA':function(_0x17d10e,_0x2473b4){return _0x17d10e||_0x2473b4;},'MVLUo':function(_0xd3db14,_0x462455){return _0xd3db14===_0x462455;}};_0xf99a4b=_0x412ab6[_0x177c89(0x111)](_0xf99a4b,{});let _0x3fdc1a;return _0x412ab6[_0x177c89(0x143)](this[_0x177c89(0xec)][_0x177c89(0x112)]['databaseVersion'],0x0)?this[_0x177c89(0x10f)]?_0x3fdc1a=this[_0x177c89(0x10f)]:_0x3fdc1a=this['versionPromise']=this['_connect'](this[_0x177c89(0x100)]['replication'][_0x177c89(0x156)]||this[_0x177c89(0x100)])['then'](_0x4a9103=>{const _0x5a8dca=_0x177c89,_0x216968={'dXDek':function(_0x5a0055,_0x4cb78f){const _0x3577cc=_0x5dfb;return _0x412ab6[_0x3577cc(0xef)](_0x5a0055,_0x4cb78f);}};if(_0x5a8dca(0x102)===_0x5a8dca(0x14b)){const _0x5d8566={'WqpWM':function(_0x3d8765,_0x472ed9){const _0x59cdbe=_0x5a8dca;return _0x216968[_0x59cdbe(0x10c)](_0x3d8765,_0x472ed9);}};return this['pool'][_0x5a8dca(0xfa)](_0x22e73a['type'],_0x3f98ac[_0x5a8dca(0x131)])[_0x5a8dca(0xf9)](_0xac1ddb['TimeoutError'],_0x29d352=>{const _0x4ef870=_0x5a8dca;throw new _0xba6a81[(_0x4ef870(0x137))](_0x29d352);})[_0x5a8dca(0x134)](()=>{_0x5d8566['WqpWM'](_0x37d720,'connection\x20acquired');});}else{const _0x218db6={};_0x218db6[_0x5a8dca(0x129)]={'connection':_0x4a9103},_0x218db6['logging']=()=>{},_0x218db6[_0x5a8dca(0x12b)]['__testLoggingFn']=!![];if(this[_0x5a8dca(0xec)][_0x5a8dca(0x112)][_0x5a8dca(0xf0)]===0x0)return this[_0x5a8dca(0xec)]['databaseVersion'](_0x218db6)['then'](_0x5e606e=>{const _0xa25c45=_0x5a8dca,_0x4f42ea=semver['coerce'](_0x5e606e)['version'];return this[_0xa25c45(0xec)][_0xa25c45(0x112)][_0xa25c45(0xf0)]=semver[_0xa25c45(0x103)](_0x4f42ea)?_0x4f42ea:this[_0xa25c45(0x11e)],this[_0xa25c45(0x10f)]=null,this[_0xa25c45(0x116)](_0x4a9103);});return this[_0x5a8dca(0x10f)]=null,this[_0x5a8dca(0x116)](_0x4a9103);}})['catch'](_0x79ff97=>{this['versionPromise']=null;throw _0x79ff97;}):_0x3fdc1a=Promise[_0x177c89(0xdb)](),_0x3fdc1a[_0x177c89(0x14c)](()=>{const _0x183953=_0x177c89;return this[_0x183953(0x122)][_0x183953(0xfa)](_0xf99a4b[_0x183953(0x126)],_0xf99a4b['useMaster'])[_0x183953(0xf9)](Promise['TimeoutError'],_0x377a49=>{const _0x25df00=_0x183953;throw new errors[(_0x25df00(0x137))](_0x377a49);})[_0x183953(0x134)](()=>{debug(_0x412ab6['cUeLe']);});});}['releaseConnection'](_0x10cc1b){const _0x47c52c=_0x26eba9;return Promise[_0x47c52c(0x10b)](()=>{const _0x74bf85=_0x47c52c;this[_0x74bf85(0x122)][_0x74bf85(0xfd)](_0x10cc1b),debug(_0x74bf85(0x10a));});}[_0x26eba9(0xe5)](_0x22d4f7){const _0x1b513b=_0x26eba9;return this[_0x1b513b(0xec)][_0x1b513b(0x11d)](_0x1b513b(0x125),_0x22d4f7)['then'](()=>this['dialect'][_0x1b513b(0x11c)][_0x1b513b(0xe7)](_0x22d4f7))['then'](_0xbbb7f7=>this[_0x1b513b(0xec)][_0x1b513b(0x11d)](_0x1b513b(0xd8),_0xbbb7f7,_0x22d4f7)[_0x1b513b(0x117)](_0xbbb7f7));}[_0x26eba9(0x116)](_0x232d7b){const _0x2bb492=_0x26eba9;return this[_0x2bb492(0x10e)]['connectionManager'][_0x2bb492(0x10d)](_0x232d7b);}[_0x26eba9(0xde)](_0x56776f){const _0x196b39=_0x26eba9;if(!this[_0x196b39(0x10e)][_0x196b39(0x11c)]['validate'])return!![];return this['dialect']['connectionManager'][_0x196b39(0xe1)](_0x56776f);}}module[_0x26eba9(0x13d)]=ConnectionManager,module[_0x26eba9(0x13d)]['ConnectionManager']=ConnectionManager,module[_0x26eba9(0x13d)]['default']=ConnectionManager;