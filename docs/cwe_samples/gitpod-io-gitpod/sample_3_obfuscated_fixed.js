const _0x43cb17=_0x82ec;(function(_0x312579,_0x5e8007){const _0x3192e6=_0x82ec,_0x25a97f=_0x312579();while(!![]){try{const _0x867876=parseInt(_0x3192e6(0x11e))/0x1+parseInt(_0x3192e6(0xed))/0x2*(-parseInt(_0x3192e6(0xbe))/0x3)+parseInt(_0x3192e6(0xf2))/0x4+parseInt(_0x3192e6(0x10d))/0x5*(parseInt(_0x3192e6(0x123))/0x6)+-parseInt(_0x3192e6(0xc9))/0x7+parseInt(_0x3192e6(0x122))/0x8+parseInt(_0x3192e6(0x104))/0x9;if(_0x867876===_0x5e8007)break;else _0x25a97f['push'](_0x25a97f['shift']());}catch(_0x7cfdd3){_0x25a97f['push'](_0x25a97f['shift']());}}}(_0x598c,0x19e23));function _0x82ec(_0x5d56eb,_0x4cbbd3){const _0x598c99=_0x598c();return _0x82ec=function(_0x82ecfa,_0x143ac8){_0x82ecfa=_0x82ecfa-0xba;let _0x4b2de9=_0x598c99[_0x82ecfa];return _0x4b2de9;},_0x82ec(_0x5d56eb,_0x4cbbd3);}import{EventEmitter}from'events';import*as _0x1dcfc4 from'fluture';import _0x518cab from'oletus';import{Readable}from'stream';import{equivalence,equality as _0x17a4ad}from'fluture/test/assertions.js';import{withTestServer}from'./server.js';import{lookup}from'dns';import*as _0x4505d0 from'../index.js';const assertResolves=_0x2730b8=>_0x146f69=>equivalence(_0x2730b8)(_0x1dcfc4[_0x43cb17(0x139)](_0x146f69)),assertRejects=_0x46f8d7=>_0x140e14=>equivalence(_0x46f8d7)(_0x1dcfc4['reject'](_0x140e14)),noop=()=>{};_0x518cab(_0x43cb17(0x113),()=>{const _0x505fbf=_0x43cb17,_0x1801cb={'bVXuC':'test','DDzYO':function(_0x1c9e53,_0x406e6d){return _0x1c9e53(_0x406e6d);},'dZuiO':function(_0x16160e){return _0x16160e();},'xBoIU':_0x505fbf(0xe6)},_0x104b96=new EventEmitter(),_0x4639ee=_0x1dcfc4[_0x505fbf(0xe0)](noop)(_0x4505d0[_0x505fbf(0x113)](_0x1801cb[_0x505fbf(0xc1)])(_0x104b96));_0x17a4ad(_0x104b96['listenerCount']('test'))(0x1),_0x1801cb[_0x505fbf(0xc4)](_0x17a4ad,_0x104b96[_0x505fbf(0xd5)](_0x505fbf(0xe6)))(0x1),_0x1801cb['dZuiO'](_0x4639ee),_0x1801cb[_0x505fbf(0xc4)](_0x17a4ad,_0x104b96['listenerCount'](_0x1801cb[_0x505fbf(0xc1)]))(0x0),_0x17a4ad(_0x104b96[_0x505fbf(0xd5)](_0x1801cb['xBoIU']))(0x0);const _0x4b46cb=new EventEmitter(),_0x4e0bba=new EventEmitter();return setTimeout(()=>{const _0x5de986=_0x505fbf;_0x4b46cb[_0x5de986(0xd4)](_0x5de986(0xee),0x2a),_0x4e0bba[_0x5de986(0xd4)](_0x5de986(0xe6),0x2a);},0xa),Promise[_0x505fbf(0x128)]([_0x1801cb[_0x505fbf(0xc4)](assertResolves,_0x4505d0['once'](_0x1801cb[_0x505fbf(0xc1)])(_0x4b46cb))(0x2a),assertRejects(_0x4505d0[_0x505fbf(0x113)](_0x1801cb[_0x505fbf(0xc1)])(_0x4e0bba))(0x2a)]);}),_0x518cab(_0x43cb17(0xd1),()=>Promise['all']([assertRejects(_0x4505d0['encode'](_0x43cb17(0x13b))(Buffer[_0x43cb17(0xe4)]('hello')))(new Error(_0x43cb17(0x11f))),assertResolves(_0x4505d0[_0x43cb17(0xd1)]('utf8')(Buffer[_0x43cb17(0xe4)](_0x43cb17(0xf4))))('hello'),assertResolves(_0x4505d0[_0x43cb17(0xd1)](_0x43cb17(0x132))(Buffer['from'](_0x43cb17(0xf4))))('68656c6c6f')])),_0x518cab(_0x43cb17(0x136),()=>{const _0x5b3c45=_0x43cb17,_0x387954={'RzwPU':_0x5b3c45(0xc7),'YsrJO':_0x5b3c45(0xca),'xLCeo':function(_0x1d01a2,_0x5a0bed,_0x1b882d,_0x380b0a){return _0x1d01a2(_0x5a0bed,_0x1b882d,_0x380b0a);},'dJCzZ':_0x5b3c45(0x10e)},_0x4fbb2f=_0x4505d0[_0x5b3c45(0x136)](Buffer['from'](_0x5b3c45(0xf4)));return new Promise((_0x91be18,_0x4f4597)=>{const _0x61d488=_0x5b3c45,_0x46d1eb={'OUmyX':_0x61d488(0x129),'kpuAy':function(_0x190ff0,_0x4a8241){return _0x190ff0(_0x4a8241);},'QStST':_0x387954[_0x61d488(0x118)],'HUfSl':_0x387954['YsrJO'],'iwbRJ':function(_0x37822b,_0x30554e){return _0x37822b(_0x30554e);}};_0x1dcfc4[_0x61d488(0x12b)](_0x37ee9f=>_0x4f4597(new Error(_0x61d488(0xfe)+String(_0x37ee9f))))(_0x203aa3=>{const _0x51a4c3=_0x61d488;_0x203aa3['on']('end',_0x91be18),_0x203aa3['on'](_0x51a4c3(0x13f),_0x29f29e=>{const _0x325692=_0x51a4c3,_0x1a53b6={'nKlDc':function(_0x2bec7e,_0x43e418){return _0x2bec7e(_0x43e418);},'HFefG':_0x46d1eb[_0x325692(0xc5)],'gbRvQ':function(_0x43b7e9,_0x1fd7f6){return _0x46d1eb['kpuAy'](_0x43b7e9,_0x1fd7f6);}};if(_0x325692(0xc7)===_0x46d1eb[_0x325692(0x12f)])try{_0x17a4ad(_0x29f29e)(Buffer[_0x325692(0xe4)]('hello'));}catch(_0x3bfebb){if(_0x46d1eb[_0x325692(0xdc)]!==_0x325692(0xca))return _0x5280be[_0x325692(0xdd)]=_0x44b819,_0x5adeb2[_0x325692(0x119)]=_0x4c446b,_0x50933a[_0x325692(0x115)]=_0x78b5a4,_0x582a2f['Response'](_0x254994)(_0x4dca02);else _0x46d1eb[_0x325692(0xcf)](_0x4f4597,_0x3bfebb);}else _0x1a53b6[_0x325692(0xbf)](_0x366c8c,new _0x4e4206(_0x1a53b6[_0x325692(0x10b)]+_0x1a53b6['gbRvQ'](_0x1b5bc1,_0x1d0547)));});})(_0x4fbb2f),_0x387954[_0x61d488(0x11b)](setTimeout,_0x4f4597,0x14,new Error(_0x387954['dJCzZ']));});}),_0x518cab(_0x43cb17(0xc2),()=>new Promise((_0x571814,_0x2f27c8)=>{const _0x21ba35=_0x43cb17,_0x10e818={'owKRH':function(_0x2efa3d,_0x1b2212){return _0x2efa3d(_0x1b2212);},'Udahc':function(_0x252ff0,_0x2b558e){return _0x252ff0+_0x2b558e;},'XCQSU':_0x21ba35(0x109)};_0x1dcfc4[_0x21ba35(0x12b)](_0x4bea7d=>_0x2f27c8(new Error(_0x21ba35(0x105)+String(_0x4bea7d))))(_0x37e15a=>{const _0x140401=_0x21ba35;_0x37e15a['on'](_0x140401(0x13f),_0x42cfdd=>{const _0x389795=_0x140401;_0x10e818['owKRH'](_0x2f27c8,new Error(_0x10e818['Udahc'](_0x389795(0x129),String(_0x42cfdd))));}),_0x37e15a['on'](_0x10e818[_0x140401(0x10f)],_0x571814);})(_0x4505d0['emptyStream']);})),_0x518cab(_0x43cb17(0x116),()=>{const _0x42dfb0=_0x43cb17,_0x5371f4={'toJnO':_0x42dfb0(0xf4),'enMUa':function(_0x10a966,_0x2344f8){return _0x10a966(_0x2344f8);}},_0x435ee9=new Readable({'read':noop}),_0x24c6a4=new Readable({'read':noop}),_0x54ae88=Buffer['from'](_0x5371f4[_0x42dfb0(0xe9)]),_0x12ac31=Buffer['from'](_0x42dfb0(0x103));return _0x435ee9[_0x42dfb0(0xf8)](_0x54ae88),setTimeout(()=>{const _0x4c2392=_0x42dfb0;_0x435ee9[_0x4c2392(0xf8)](_0x12ac31),_0x435ee9[_0x4c2392(0xf8)](null),_0x24c6a4[_0x4c2392(0xd4)]('error',0x2a);},0xa),Promise[_0x42dfb0(0x128)]([assertResolves(_0x4505d0['buffer'](_0x435ee9))([_0x54ae88,_0x12ac31]),_0x5371f4[_0x42dfb0(0x127)](assertRejects,_0x4505d0[_0x42dfb0(0x116)](_0x24c6a4))(0x2a)]);}),_0x518cab(_0x43cb17(0x10a),()=>Promise[_0x43cb17(0x128)]([assertResolves(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x10a)](_0x43cb17(0xfd)))(_0x4505d0[_0x43cb17(0x136)](Buffer[_0x43cb17(0xe4)](_0x43cb17(0xf4)))))(_0x43cb17(0xf4)),assertResolves(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x10a)](_0x43cb17(0x132)))(_0x4505d0[_0x43cb17(0x136)](Buffer[_0x43cb17(0xe4)]('hello'))))(_0x43cb17(0xd9))])),_0x518cab('instant',()=>assertResolves(_0x4505d0[_0x43cb17(0x101)]('noodles'))(_0x43cb17(0xbb))),_0x518cab(_0x43cb17(0xc6),()=>{const _0x49c5c5=_0x43cb17,_0x1e9cf5={'CKHJY':function(_0x64ebe8,_0x21a3f9){return _0x64ebe8(_0x21a3f9);},'ZCene':'results'};return _0x1dcfc4[_0x49c5c5(0xe0)](_0x1e9cf5[_0x49c5c5(0xbc)](_0x17a4ad,'should\x20not\x20run'))(_0x4505d0['immediate']('did\x20run'))(),assertResolves(_0x4505d0[_0x49c5c5(0xc6)](_0x1e9cf5[_0x49c5c5(0xd7)]))(_0x1e9cf5['ZCene']);});const getRequest=_0x4505d0[_0x43cb17(0xfa)]({})(_0x43cb17(0xff))(_0x4505d0[_0x43cb17(0xc2)]),postRequest=_0x4505d0[_0x43cb17(0xfa)]({'method':_0x43cb17(0x142)})(_0x43cb17(0xff))(_0x4505d0['streamOf'](Buffer[_0x43cb17(0xe4)](_0x43cb17(0xee)))),responseHeaders={'connection':'close','content-type':_0x43cb17(0xe1),'date':_0x43cb17(0xdb),'transfer-encoding':_0x43cb17(0xf6)},mockResponse=({code:code=0xc8,message:message='OK',headers:headers=responseHeaders,request:request=getRequest,body:body=Buffer['from'](_0x43cb17(0xf4))})=>_0x1dcfc4[_0x43cb17(0xdf)](_0x20235d=>{const _0x2908cc=_0x43cb17;return _0x20235d['headers']=headers,_0x20235d[_0x2908cc(0x119)]=code,_0x20235d[_0x2908cc(0x115)]=message,_0x4505d0['Response'](request)(_0x20235d);})(_0x4505d0[_0x43cb17(0x136)](body)),getResponse=_0x579019=>_0x376d0d=>mockResponse({'code':_0x579019,'headers':Object['assign']({},responseHeaders,{'location':_0x376d0d}),'request':getRequest}),postResponse=_0x16bb60=>_0x5109ba=>mockResponse({'code':_0x16bb60,'headers':Object[_0x43cb17(0xba)]({},responseHeaders,{'location':_0x5109ba}),'request':postRequest}),sendMockRequest=_0x454509=>withTestServer(({url:_0x35a6d9})=>_0x4505d0['sendRequest'](_0x4505d0['Request']({'headers':{'Connection':'close','Transfer-Encoding':_0x43cb17(0xf6)}})(_0x35a6d9+_0x43cb17(0x131))(_0x454509)));function _0x598c(){const _0x2872e3=['fork','GET/hello','send','xZFtH','QStST','request','/echo','hex','IoupK','GET','201','streamOf','responseToError','sendForm','resolve','LSmEa','lalalala','Unsupported\x20protocol\x20\x27ftp:\x27','acceptStatus','redirectUsingGetMethod','data','cleanRequestOptions','sendJson','POST','assign','noodles','CKHJY','akqre','237MiJMkx','nKlDc','Dear\x20user,\x0a\x0aEverything\x20broke\x20down.\x0aWe\x20are\x20sorry.','bVXuC','emptyStream','else','DDzYO','OUmyX','immediate','gzdyM','message','1463098cBHOei','DiMVh','ftp://xxx','followRedirectsWith','njTCa','redirectAnyRequest','iwbRJ','POST/{\x22message\x22:\x22hello\x22}','encode','https://localhost','autoBufferResponse','emit','listenerCount','/self-redirect','ZCene','options','68656c6c6f','Unexpected\x20Internal\x20Server\x20Error\x20(500)\x20response.\x20Response\x20body:\x0a','now','HUfSl','headers','GiRHX','map','value','text/plain','chain','\x20\x20Dear\x20user,\x0a','from','GET/','error','connect\x20ECONNREFUSED\x20127.0.0.1:443','matchStatus','toJnO','\x20\x20Everything\x20broke\x20down.\x0a','POST/hello','https://example.com/echo','4668vxWikv','test','200:\x20POST/\x22hello\x22','/redirect-post','redirectIfGetMethod','174384KrInDW','url','hello','retryWithoutCondition','chunked','HTTP\x20Integration','push','200','Request','Response','body','utf8','The\x20future\x20rejected:\x20','https://example.com','ECONNREFUSED','instant','abc123','world','3866895aHMbFf','The\x20Future\x20rejected:\x20','sendRequest','retrieve','\x20\x20We\x20are\x20sorry.','end','bufferString','HFefG','\x20\x20\x0a','37715aByLVL','No\x20data\x20on\x20the\x20stream','XCQSU','POST/test','/redirect-loop-a','Internal\x20Server\x20Error','once','connect','statusMessage','buffer','ftp://xxx/','RzwPU','statusCode','reject','xLCeo','bufferResponse','followRedirects','1092oADGKm','Unknown\x20encoding:\x20lalalala','Unexpected\x20Moved\x20Permanently\x20(301)\x20response.\x20Response\x20body:\x0a\x0a\x20\x20','UUIuJ','19576cuffyQ','18LyNsIr','POST/message=hello','XeCBE','sMqGR','enMUa','all','The\x20stream\x20emitted\x20data:\x20','text/plain;\x20charset=lalalala'];_0x598c=function(){return _0x2872e3;};return _0x598c();}_0x518cab('Request',()=>{const _0x20c4e3=_0x43cb17,_0x1366bb={'akqre':function(_0x238af5,_0x17d70){return _0x238af5(_0x17d70);},'GiRHX':function(_0xd4b05e,_0x199a2f){return _0xd4b05e(_0x199a2f);}},_0x7cdc0e={},_0x473c71=_0x20c4e3(0xff),_0x101c4b=_0x4505d0['emptyStream'],_0x57337b=_0x4505d0[_0x20c4e3(0xfa)](_0x7cdc0e)(_0x473c71+_0x20c4e3(0x131))(_0x101c4b);_0x17a4ad(_0x4505d0['Request'][_0x20c4e3(0xd8)](_0x57337b))(_0x7cdc0e),_0x1366bb[_0x20c4e3(0xbd)](_0x17a4ad,_0x4505d0[_0x20c4e3(0xfa)][_0x20c4e3(0xf3)](_0x57337b))(_0x473c71+_0x20c4e3(0x131)),_0x1366bb[_0x20c4e3(0xde)](_0x17a4ad,_0x4505d0[_0x20c4e3(0xfa)][_0x20c4e3(0xfc)](_0x57337b))(_0x101c4b);}),_0x518cab(_0x43cb17(0xfb),()=>{const _0x40ce01=_0x43cb17,_0x5e136d=_0x4505d0['emptyStream'],_0x38991c=_0x4505d0[_0x40ce01(0xfb)](getRequest)(_0x5e136d);_0x17a4ad(_0x4505d0[_0x40ce01(0xfb)][_0x40ce01(0x130)](_0x38991c))(getRequest),_0x17a4ad(_0x4505d0[_0x40ce01(0xfb)][_0x40ce01(0xc8)](_0x38991c))(_0x5e136d);}),_0x518cab(_0x43cb17(0x140),()=>{const _0x3edb2d=_0x43cb17,_0x4e4b23={'XeCBE':_0x3edb2d(0x134),'sMqGR':function(_0x486daf,_0x45d0af){return _0x486daf(_0x45d0af);}},_0x33bf38=_0x317b9e=>_0x4505d0[_0x3edb2d(0xfa)](_0x317b9e)('https://example.com')(_0x4505d0[_0x3edb2d(0xc2)]);_0x17a4ad(_0x4505d0['cleanRequestOptions'](_0x33bf38({})))({'agent':undefined,'createConnection':undefined,'defaultPort':undefined,'family':undefined,'headers':{},'insecureHTTPParser':![],'localAddress':undefined,'lookup':lookup,'maxHeaderSize':0x4000,'method':_0x4e4b23[_0x3edb2d(0x125)],'setHost':!![],'socketPath':undefined,'timeout':undefined}),_0x4e4b23[_0x3edb2d(0x126)](_0x17a4ad,_0x4505d0[_0x3edb2d(0x140)](_0x33bf38({'agent':{'defaultPort':0x2a}})))({'agent':{'defaultPort':0x2a},'createConnection':undefined,'defaultPort':0x2a,'family':undefined,'headers':{},'insecureHTTPParser':![],'localAddress':undefined,'lookup':lookup,'maxHeaderSize':0x4000,'method':_0x3edb2d(0x134),'setHost':!![],'socketPath':undefined,'timeout':undefined});}),_0x518cab(_0x43cb17(0x11c),()=>Promise[_0x43cb17(0x128)]([assertResolves(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11c)](_0x43cb17(0xfd)))(sendMockRequest(_0x4505d0[_0x43cb17(0xc2)])))(_0x43cb17(0xe5)),assertResolves(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11c)]('utf8'))(sendMockRequest(_0x4505d0[_0x43cb17(0x136)](Buffer['from'](_0x43cb17(0xf4))))))('GET/hello')]));const thenBuffer=_0x1dcfc4['bichain'](_0x27d7e5=>_0x1dcfc4['swap'](_0x4505d0['bufferResponse']('utf8')(_0x27d7e5)))(_0x4505d0[_0x43cb17(0x11c)](_0x43cb17(0xfd)));_0x518cab(_0x43cb17(0x106),()=>Promise['all']([assertRejects(_0x4505d0[_0x43cb17(0x106)](_0x4505d0[_0x43cb17(0xfa)]({})(_0x43cb17(0xd2))(_0x4505d0[_0x43cb17(0xc2)])))(Object[_0x43cb17(0xba)](new Error(_0x43cb17(0xe7)),{'address':'127.0.0.1','code':_0x43cb17(0x100),'errno':-0x6f,'port':0x1bb,'syscall':_0x43cb17(0x114)})),assertRejects(_0x4505d0['sendRequest'](_0x4505d0[_0x43cb17(0xfa)]({})('ftp://localhost')(_0x4505d0['emptyStream'])))(new Error(_0x43cb17(0x13c))),assertResolves(thenBuffer(sendMockRequest(_0x4505d0[_0x43cb17(0xc2)])))(_0x43cb17(0xe5)),assertResolves(thenBuffer(sendMockRequest(_0x4505d0['streamOf'](Buffer[_0x43cb17(0xe4)]('hello')))))('GET/hello')])),_0x518cab('request\x20cancellation',()=>new Promise((_0x4da7d6,_0x2c830e)=>{const _0x57592b=_0x43cb17,_0x27071c={'UUIuJ':function(_0x26f720,_0x142f73,_0x3d439f){return _0x26f720(_0x142f73,_0x3d439f);}},_0x88b1fa=_0x1dcfc4[_0x57592b(0x12b)](_0x2c830e)(_0x2c830e)(_0x4505d0['sendRequest'](_0x4505d0[_0x57592b(0xfa)]({})(_0x57592b(0xd2))(_0x4505d0['emptyStream'])));_0x88b1fa(),_0x27071c[_0x57592b(0x121)](setTimeout,_0x4da7d6,0x3e8);})),_0x518cab('retrieve',()=>Promise['all']([assertResolves(withTestServer(({url:_0x4dc109})=>thenBuffer(_0x4505d0[_0x43cb17(0x107)](_0x4dc109+_0x43cb17(0x131))({}))))(_0x43cb17(0xe5))])),_0x518cab(_0x43cb17(0x12d),()=>Promise[_0x43cb17(0x128)]([assertResolves(withTestServer(({url:_0x39678a})=>thenBuffer(_0x4505d0['send']('text/plain')('POST')(_0x39678a+'/echo')({})(Buffer['from'](_0x43cb17(0xf4))))))(_0x43cb17(0xeb))])),_0x518cab(_0x43cb17(0x141),()=>Promise[_0x43cb17(0x128)]([assertResolves(withTestServer(({url:_0x1193ba})=>thenBuffer(_0x4505d0[_0x43cb17(0x141)](_0x43cb17(0x142))(_0x1193ba+_0x43cb17(0x131))({})({'message':_0x43cb17(0xf4)}))))(_0x43cb17(0xd0))])),_0x518cab(_0x43cb17(0x138),()=>Promise['all']([assertResolves(withTestServer(({url:_0x323659})=>thenBuffer(_0x4505d0[_0x43cb17(0x138)](_0x43cb17(0x142))(_0x323659+_0x43cb17(0x131))({})({'message':_0x43cb17(0xf4)}))))(_0x43cb17(0x124))])),_0x518cab(_0x43cb17(0xce),()=>Promise[_0x43cb17(0x128)]([assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0['redirectAnyRequest'])(mockResponse({})))(getRequest),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0[_0x43cb17(0xce)])(getResponse(0x12d)('ftp://xxx')))(_0x4505d0[_0x43cb17(0xfa)]({})(_0x43cb17(0x117))(_0x4505d0[_0x43cb17(0xc2)])),assertResolves(_0x1dcfc4['map'](_0x4505d0[_0x43cb17(0xce)])(getResponse(0x12d)(_0x43cb17(0x131))))(_0x4505d0[_0x43cb17(0xfa)]({})(_0x43cb17(0xec))(_0x4505d0[_0x43cb17(0xc2)])),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0[_0x43cb17(0xce)])(postResponse(0x12d)(_0x43cb17(0x131))))(_0x4505d0[_0x43cb17(0xfa)]({'method':'POST'})(_0x43cb17(0xec))(_0x4505d0['streamOf'](Buffer[_0x43cb17(0xe4)](_0x43cb17(0xee)))))])),_0x518cab('redirectIfGetMethod',()=>Promise[_0x43cb17(0x128)]([assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0['redirectIfGetMethod'])(mockResponse({})))(getRequest),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0[_0x43cb17(0xf1)])(getResponse(0x12d)(_0x43cb17(0xcb))))(_0x4505d0[_0x43cb17(0xfa)]({})(_0x43cb17(0x117))(_0x4505d0['emptyStream'])),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0['redirectIfGetMethod'])(getResponse(0x12d)(_0x43cb17(0x131))))(_0x4505d0['Request']({})(_0x43cb17(0xec))(_0x4505d0['emptyStream'])),assertResolves(_0x1dcfc4['map'](_0x4505d0[_0x43cb17(0xf1)])(postResponse(0x12d)(_0x43cb17(0x131))))(postRequest)])),_0x518cab(_0x43cb17(0x13e),()=>Promise['all']([assertResolves(_0x1dcfc4['map'](_0x4505d0['redirectUsingGetMethod'])(mockResponse({})))(_0x4505d0[_0x43cb17(0xfa)]({'method':_0x43cb17(0x134)})(_0x43cb17(0xff))(_0x4505d0[_0x43cb17(0xc2)])),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0[_0x43cb17(0x13e)])(getResponse(0x12d)(_0x43cb17(0xcb))))(_0x4505d0['Request']({'method':_0x43cb17(0x134)})('ftp://xxx/')(_0x4505d0[_0x43cb17(0xc2)])),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0['redirectUsingGetMethod'])(getResponse(0xc8)(_0x43cb17(0x131))))(_0x4505d0[_0x43cb17(0xfa)]({'method':'GET'})(_0x43cb17(0xec))(_0x4505d0[_0x43cb17(0xc2)])),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0[_0x43cb17(0x13e)])(postResponse(0xc8)(_0x43cb17(0x131))))(_0x4505d0[_0x43cb17(0xfa)]({'method':_0x43cb17(0x134)})(_0x43cb17(0xec))(_0x4505d0['emptyStream']))])),_0x518cab(_0x43cb17(0xf5),()=>Promise[_0x43cb17(0x128)]([assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0['retryWithoutCondition'])(mockResponse({})))(_0x4505d0[_0x43cb17(0xfa)]({'headers':{}})(_0x43cb17(0xff))(_0x4505d0[_0x43cb17(0xc2)])),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0['retryWithoutCondition'])(getResponse(0x12d)(_0x43cb17(0xcb))))(_0x4505d0[_0x43cb17(0xfa)]({'headers':{}})('https://example.com')(_0x4505d0[_0x43cb17(0xc2)])),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0['retryWithoutCondition'])(getResponse(0xc8)(_0x43cb17(0x131))))(_0x4505d0['Request']({'headers':{}})(_0x43cb17(0xff))(_0x4505d0[_0x43cb17(0xc2)])),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0['retryWithoutCondition'])(postResponse(0xc8)(_0x43cb17(0x131))))(_0x4505d0['Request']({'method':'POST'})(_0x43cb17(0xff))(_0x4505d0[_0x43cb17(0x136)](Buffer[_0x43cb17(0xe4)](_0x43cb17(0xee))))),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0['retryWithoutCondition'])(mockResponse({'request':_0x4505d0[_0x43cb17(0xfa)]({'headers':{'If-None-Match':'abc123'}})('https://example.com')(_0x4505d0[_0x43cb17(0xc2)]),'body':Buffer[_0x43cb17(0xe4)](_0x43cb17(0xee))})))(_0x4505d0[_0x43cb17(0xfa)]({'headers':{}})(_0x43cb17(0xff))(_0x4505d0[_0x43cb17(0xc2)])),assertResolves(_0x1dcfc4['map'](_0x4505d0[_0x43cb17(0xf5)])(mockResponse({'request':_0x4505d0[_0x43cb17(0xfa)]({'method':'POST','headers':{'If-None-Match':'abc123'}})(_0x43cb17(0xff))(_0x4505d0['streamOf'](Buffer[_0x43cb17(0xe4)]('hello'))),'body':Buffer[_0x43cb17(0xe4)](_0x43cb17(0xee))})))(_0x4505d0[_0x43cb17(0xfa)]({'method':_0x43cb17(0x142),'headers':{'If-None-Match':_0x43cb17(0x102)}})('https://example.com')(_0x4505d0['streamOf'](Buffer[_0x43cb17(0xe4)](_0x43cb17(0xf4)))))])),_0x518cab(_0x43cb17(0xcc),()=>Promise[_0x43cb17(0x128)]([assertResolves(thenBuffer(withTestServer(({url:_0x137fe9})=>_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0xcc)](_0x4792ad=>_0x4505d0[_0x43cb17(0xfa)]({})(_0x137fe9+'/echo')(_0x4505d0[_0x43cb17(0xc2)]))(0x1))(mockResponse({})))))(_0x43cb17(0xe5)),assertResolves(thenBuffer(withTestServer(({url:_0x2c9e5f})=>_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0xcc)](_0x2d5d22=>_0x4505d0[_0x43cb17(0xfa)]({})(_0x2c9e5f+_0x43cb17(0x131))(_0x4505d0[_0x43cb17(0xc2)]))(0x0))(mockResponse({})))))(_0x43cb17(0xf4))])),_0x518cab(_0x43cb17(0x11d),()=>Promise[_0x43cb17(0x128)]([assertResolves(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0['bufferResponse']('utf8'))(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0['followRedirects'](0x1))(mockResponse({}))))('hello'),assertResolves(withTestServer(({url:_0x5996a0})=>_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11c)](_0x43cb17(0xfd)))(_0x1dcfc4['chain'](_0x4505d0[_0x43cb17(0x11d)](0x1))(getResponse(0x12d)(_0x5996a0+_0x43cb17(0x131))))))('GET/'),assertResolves(withTestServer(({url:_0x3112c4})=>_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11c)](_0x43cb17(0xfd)))(_0x1dcfc4['chain'](_0x4505d0['followRedirects'](0x1))(getResponse(0x12e)(_0x3112c4+_0x43cb17(0x131))))))(_0x43cb17(0xe5)),assertResolves(withTestServer(({url:_0x590d7a})=>_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11c)](_0x43cb17(0xfd)))(_0x1dcfc4['chain'](_0x4505d0['followRedirects'](0x1))(getResponse(0x12f)(_0x590d7a+_0x43cb17(0x131))))))(_0x43cb17(0xe5)),assertResolves(withTestServer(({url:_0x5d5ffc})=>_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11c)]('utf8'))(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11d)](0x1))(getResponse(0x130)(_0x5d5ffc+_0x43cb17(0x131))))))('hello'),assertResolves(withTestServer(({url:_0xc914c6})=>_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11c)](_0x43cb17(0xfd)))(_0x1dcfc4['chain'](_0x4505d0[_0x43cb17(0x11d)](0x1))(getResponse(0x131)(_0xc914c6+'/echo')))))(_0x43cb17(0xe5)),assertResolves(withTestServer(({url:_0x252bd4})=>_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11c)](_0x43cb17(0xfd)))(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0['followRedirects'](0x1))(getResponse(0x133)(_0x252bd4+'/echo')))))(_0x43cb17(0xe5)),assertResolves(withTestServer(({url:_0x326380})=>_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11c)]('utf8'))(_0x1dcfc4['chain'](_0x4505d0[_0x43cb17(0x11d)](0x1))(postResponse(0x12d)(_0x326380+_0x43cb17(0x131))))))('hello'),assertResolves(withTestServer(({url:_0x3d6bd8})=>_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0['bufferResponse'](_0x43cb17(0xfd)))(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11d)](0x1))(postResponse(0x12e)(_0x3d6bd8+'/echo')))))(_0x43cb17(0xf4)),assertResolves(withTestServer(({url:_0x12d9f5})=>_0x1dcfc4['chain'](_0x4505d0[_0x43cb17(0x11c)](_0x43cb17(0xfd)))(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11d)](0x1))(postResponse(0x12f)(_0x12d9f5+_0x43cb17(0x131))))))('GET/'),assertResolves(withTestServer(({url:_0x12e657})=>_0x1dcfc4['chain'](_0x4505d0[_0x43cb17(0x11c)]('utf8'))(_0x1dcfc4['chain'](_0x4505d0['followRedirects'](0x1))(postResponse(0x130)(_0x12e657+_0x43cb17(0x131))))))(_0x43cb17(0xf4)),assertResolves(withTestServer(({url:_0x527105})=>_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11c)](_0x43cb17(0xfd)))(_0x1dcfc4['chain'](_0x4505d0[_0x43cb17(0x11d)](0x1))(postResponse(0x131)(_0x527105+_0x43cb17(0x131))))))(_0x43cb17(0x110)),assertResolves(withTestServer(({url:_0x5d9c2d})=>_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0x11c)](_0x43cb17(0xfd)))(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0['followRedirects'](0x1))(postResponse(0x133)(_0x5d9c2d+_0x43cb17(0x131))))))(_0x43cb17(0xf4))])),_0x518cab('autoBufferResponse',()=>Promise[_0x43cb17(0x128)]([assertRejects(_0x1dcfc4['chain'](_0x4505d0[_0x43cb17(0xd3)])(mockResponse({'headers':{'content-type':_0x43cb17(0x12a)}})))(new Error('Failed\x20to\x20buffer\x20response:\x20Unknown\x20encoding:\x20lalalala')),assertResolves(_0x1dcfc4['chain'](_0x4505d0[_0x43cb17(0xd3)])(sendMockRequest(_0x4505d0[_0x43cb17(0xc2)])))(_0x43cb17(0xe5)),assertResolves(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0xd3)])(sendMockRequest(_0x4505d0[_0x43cb17(0x136)](Buffer[_0x43cb17(0xe4)]('hello')))))(_0x43cb17(0x12c)),assertResolves(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0xd3)])(mockResponse({})))(_0x43cb17(0xf4)),assertResolves(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0['autoBufferResponse'])(mockResponse({'headers':{}})))('hello'),assertResolves(_0x1dcfc4[_0x43cb17(0xe2)](_0x4505d0[_0x43cb17(0xd3)])(mockResponse({'headers':{'content-type':'text/plain;\x20charset=hex'}})))(_0x43cb17(0xd9))]));const respond200=mockResponse({});_0x518cab('matchStatus',()=>Promise[_0x43cb17(0x128)]([assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0[_0x43cb17(0xe8)](()=>_0x43cb17(0xc3))({0xc8:()=>'200',0xc9:()=>'201'}))(mockResponse({'code':0x190})))('else'),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0[_0x43cb17(0xe8)](()=>_0x43cb17(0xc3))({0xc8:()=>'200',0xc9:()=>_0x43cb17(0x135)}))(mockResponse({'code':0xc8})))(_0x43cb17(0xf9)),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0['matchStatus'](()=>_0x43cb17(0xc3))({0xc8:()=>_0x43cb17(0xf9),0xc9:()=>'201'}))(mockResponse({'code':0xc9})))(_0x43cb17(0x135))])),_0x518cab(_0x43cb17(0x13d),()=>Promise[_0x43cb17(0x128)]([assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](thenBuffer)(_0x1dcfc4[_0x43cb17(0xdf)](_0x4505d0[_0x43cb17(0x13d)](0xc8))(respond200)))(_0x1dcfc4['resolve'](_0x43cb17(0xf4))),assertResolves(_0x1dcfc4[_0x43cb17(0xdf)](thenBuffer)(_0x1dcfc4['map'](_0x4505d0['acceptStatus'](0xc9))(respond200)))(_0x1dcfc4[_0x43cb17(0x11a)](_0x43cb17(0xf4)))])),_0x518cab(_0x43cb17(0x137),()=>assertRejects(_0x1dcfc4['chain'](_0x4505d0[_0x43cb17(0x137)])(mockResponse({'code':0x1f4,'message':_0x43cb17(0x112),'headers':responseHeaders,'body':Buffer['from'](_0x43cb17(0xc0))})))(new Error(_0x43cb17(0xda)+'\x0a'+_0x43cb17(0xe3)+_0x43cb17(0x10c)+_0x43cb17(0xea)+_0x43cb17(0x108)))),_0x518cab(_0x43cb17(0xf7),()=>{const _0x418616=_0x43cb17,_0x189233={'xZFtH':function(_0x3c4a03,_0x2d04fb){return _0x3c4a03(_0x2d04fb);},'LSmEa':'200:\x20GET/','IoupK':function(_0x1f2a9a,_0x5372c8){return _0x1f2a9a(_0x5372c8);},'hdgJt':_0x418616(0xef),'njTCa':'Unexpected\x20Moved\x20Permanently\x20(301)\x20response.\x20Response\x20body:\x0a\x0a\x20\x20'},_0x4c1b23=_0x15d54c=>_0x1dcfc4[_0x418616(0xe2)](_0xba2c7e=>_0x1dcfc4[_0x418616(0x11a)](new Error(_0xba2c7e)))(_0x4505d0[_0x418616(0xd3)](_0x15d54c)),_0x51c829=_0x5d64fe=>_0x1dcfc4[_0x418616(0xdf)](_0x4fe60f=>_0x4505d0['Response'][_0x418616(0xc8)](_0x5d64fe)[_0x418616(0x119)]+':\x20'+_0x4fe60f)(_0x4505d0[_0x418616(0xd3)](_0x5d64fe)),_0x406ea3=_0x509887=>_0x4505d0[_0x418616(0x11d)](0x14)(_0x509887)['pipe'](_0x1dcfc4['chain'](_0x4505d0[_0x418616(0xe8)](_0x4505d0[_0x418616(0x137)])({0xc8:_0x51c829,0x194:_0x4c1b23}))),_0x23d3bc=_0x2cb9f2=>withTestServer(({url:_0x29086e})=>_0x1dcfc4[_0x418616(0xe2)](_0x406ea3)(_0x2cb9f2(_0x29086e)));return Promise[_0x418616(0x128)]([_0x189233['xZFtH'](assertResolves,_0x23d3bc(_0x5d7317=>_0x4505d0[_0x418616(0x107)](_0x5d7317+'/redirect')({})))(_0x189233[_0x418616(0x13a)]),assertRejects(_0x189233[_0x418616(0x12e)](_0x23d3bc,_0x12d1b2=>_0x4505d0[_0x418616(0x141)](_0x418616(0x142))(_0x12d1b2+'/redirect')({})('hello')))(new Error('Unexpected\x20Moved\x20Permanently\x20(301)\x20response.\x20Response\x20body:\x0a\x0a\x20\x20')),_0x189233['IoupK'](assertResolves,_0x23d3bc(_0x4ef953=>_0x4505d0[_0x418616(0x141)]('POST')(_0x4ef953+_0x418616(0xf0))({})(_0x418616(0xf4))))(_0x189233['hdgJt']),_0x189233[_0x418616(0x133)](assertRejects,_0x23d3bc(_0xa9c180=>_0x4505d0[_0x418616(0x107)](_0xa9c180+_0x418616(0xd6))({})))(new Error(_0x189233[_0x418616(0xcd)])),assertRejects(_0x23d3bc(_0x2847d9=>_0x4505d0[_0x418616(0x107)](_0x2847d9+_0x418616(0x111))({})))(new Error(_0x418616(0x120)))]);});