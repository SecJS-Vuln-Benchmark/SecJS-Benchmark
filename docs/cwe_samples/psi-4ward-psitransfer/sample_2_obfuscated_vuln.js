function _0x3b12(){const _0x35647a=['test','NCrWM','Object','oAaeD','934347Jtierj','KqXGT','RaQMr','Error','rest','qHJty','INVALID_JSON','NbCHW','download','HlOFG','error','http://localhost:8378/1/validate_purchase','Object\x20not\x20found.','toString','IatXo','Bytes','a\x20product','faPQH','EICaB','87687oamlcT','data','should\x20be\x20able\x20to\x20update\x20a\x20_Product','test\x20validate_receipt\x20endpoint','status','url','title\x20is\x20required.','set','55yWgbIQ','first','should\x20not\x20create\x20a\x20_Product','DnVSJ','TnKkc','reject','3480330BvzStt','download_file','oowKR','toEqual','a-product','UjDzn','KvdQH','RZFwo','399792sqMkcV','receipt','Should\x20not\x20succeed','drrKp','IGqgb','Body\x20is\x20not\x20an\x20object','POST','RmoyK','File','stringify','mWXZa','unset','a\x20new\x20title','should\x20fail\x20for\x20missing\x20receipt','catch','ceIxS','title','__type','opfFz','code','498iIvLEh','JIAtA','fRjyv','QxpwY','save','toBe','Should\x20not\x20be\x20able\x20to\x20save','Query','3191740HYFNad','gTYRF','TohGk','qIIsi','should\x20not\x20be\x20able\x20to\x20remove\x20a\x20require\x20key\x20in\x20a\x20_Product','XoZCe','_Product','kSDta','base64','NNLAh','xcgei','should\x20fail\x20for\x20missing\x20product\x20identifier','should\x20fail\x20at\x20appstore\x20validation','then','message','qwjee','TZZaN','WWrpr','application/json','object','should\x20bypass\x20appstore\x20validation','IZYPC','20408dsubeF','text','../lib/request','BXhNq','INCORRECT_TYPE','661826xJYBCx','utf8','Product\x20should\x20be\x20found','LsUSm','HWcXC','JcpvL','oSaTF','BTFaw','176mCDTmp','name','utf-8','lTjKF'];_0x3b12=function(){return _0x35647a;};return _0x3b12();}function _0xc388(_0x541b12,_0x1f43d3){const _0x3b12ce=_0x3b12();return _0xc388=function(_0xc388a9,_0x3bf270){_0xc388a9=_0xc388a9-0x10c;let _0x39912f=_0x3b12ce[_0xc388a9];return _0x39912f;},_0xc388(_0x541b12,_0x1f43d3);}const _0x254591=_0xc388;(function(_0x18786a,_0xcea8f5){const _0x504aee=_0xc388,_0x304125=_0x18786a();while(!![]){try{const _0x17ce33=parseInt(_0x504aee(0x137))/0x1+parseInt(_0x504aee(0x127))/0x2+-parseInt(_0x504aee(0x174))/0x3*(parseInt(_0x504aee(0x122))/0x4)+-parseInt(_0x504aee(0x152))/0x5*(-parseInt(_0x504aee(0x160))/0x6)+-parseInt(_0x504aee(0x158))/0x7+-parseInt(_0x504aee(0x12f))/0x8*(-parseInt(_0x504aee(0x14a))/0x9)+-parseInt(_0x504aee(0x10c))/0xa;if(_0x17ce33===_0xcea8f5)break;else _0x304125['push'](_0x304125['shift']());}catch(_0x27f845){_0x304125['push'](_0x304125['shift']());}}}(_0x3b12,0x8618e));const request=require(_0x254591(0x124));function createProduct(){const _0x2904dd=_0x254591,_0x343299={'iFIkk':_0x2904dd(0x130),'opfFz':_0x2904dd(0x131),'eVHci':_0x2904dd(0x114)},_0x140589=new Parse[(_0x2904dd(0x168))](_0x343299['iFIkk'],{'base64':new Buffer('download_file',_0x343299[_0x2904dd(0x172)])[_0x2904dd(0x144)](_0x343299['eVHci'])},_0x2904dd(0x123));return _0x140589[_0x2904dd(0x178)]()['then'](function(){const _0x7ca1e1=_0x2904dd,_0x24d500=new Parse[(_0x7ca1e1(0x135))](_0x7ca1e1(0x112));return _0x24d500[_0x7ca1e1(0x151)]({'download':_0x140589,'icon':_0x140589,'title':_0x7ca1e1(0x147),'subtitle':_0x7ca1e1(0x147),'order':0x1,'productIdentifier':_0x7ca1e1(0x15c)}),_0x24d500['save']();});}describe(_0x254591(0x14d),()=>{const _0xf71c6a=_0x254591,_0x1cdbc6={'TohGk':function(_0xd57953,_0x370940){return _0xd57953(_0x370940);},'qIIsi':_0xf71c6a(0x13b),'mWXZa':'application/json','TZZaN':_0xf71c6a(0x166),'LsUSm':_0xf71c6a(0x146),'drrKp':_0xf71c6a(0x161),'xGZQb':_0xf71c6a(0x131),'JcpvL':_0xf71c6a(0x11f),'NCrWM':function(_0x1e50b9,_0x4215dc){return _0x1e50b9(_0x4215dc);},'faPQH':function(_0x62a46e,_0x4b61dc){return _0x62a46e(_0x4b61dc);},'JIAtA':_0xf71c6a(0x133),'IatXo':_0xf71c6a(0x142),'XoZCe':function(_0x136ca2,_0x308df7){return _0x136ca2(_0x308df7);},'RZFwo':_0xf71c6a(0x165),'QxpwY':function(_0x290bc1,_0x2224a0){return _0x290bc1!==_0x2224a0;},'lTjKF':_0xf71c6a(0x149),'KqXGT':function(_0x588c96,_0x495aa4){return _0x588c96(_0x495aa4);},'ceIxS':function(_0x56c4ce,_0x367761){return _0x56c4ce(_0x367761);},'BTFaw':function(_0xfd0a23,_0xac290a){return _0xfd0a23(_0xac290a);},'VWmpP':'another-product','uPrfe':_0xf71c6a(0x128),'WWrpr':_0xf71c6a(0x143),'KvdQH':_0xf71c6a(0x114),'IGqgb':function(_0x35cb36,_0x502fbc){return _0x35cb36(_0x502fbc);},'HlOFG':'The\x20data\x20in\x20the\x20receipt-data\x20property\x20was\x20malformed\x20or\x20missing.','kSDta':function(_0x36857c){return _0x36857c();},'qwjee':_0xf71c6a(0x112),'utlzk':function(_0x5b67eb,_0x3452e8){return _0x5b67eb===_0x3452e8;},'UjDzn':function(_0x477411,_0x3cc7b3){return _0x477411(_0x3cc7b3);},'HWcXC':function(_0x3a7c5d,_0x18bbc8,_0x38bd02){return _0x3a7c5d(_0x18bbc8,_0x38bd02);},'fRjyv':_0xf71c6a(0x16d),'DnVSJ':_0xf71c6a(0x118),'IZYPC':_0xf71c6a(0x154),'NNLAh':function(_0x5dc89e,_0x500344,_0x91fd7){return _0x5dc89e(_0x500344,_0x91fd7);},'gTYRF':_0xf71c6a(0x110)};_0x1cdbc6['UjDzn'](beforeEach,async()=>{await createProduct();}),it(_0xf71c6a(0x120),async()=>{const _0x45134f=_0xf71c6a,_0x3f6038=await _0x1cdbc6[_0x45134f(0x10e)](request,{'headers':{'X-Parse-Application-Id':_0x45134f(0x133),'X-Parse-REST-API-Key':_0x1cdbc6[_0x45134f(0x10f)],'Content-Type':_0x1cdbc6[_0x45134f(0x16a)]},'method':_0x1cdbc6[_0x45134f(0x11c)],'url':_0x45134f(0x142),'body':{'productIdentifier':'a-product','receipt':{'__type':_0x1cdbc6[_0x45134f(0x12a)],'base64':new Buffer(_0x1cdbc6[_0x45134f(0x163)],_0x1cdbc6['xGZQb'])[_0x45134f(0x144)]('base64')},'bypassAppStoreValidation':!![]}}),_0x47729c=_0x3f6038[_0x45134f(0x14b)];if(typeof _0x47729c!=_0x1cdbc6[_0x45134f(0x12c)])_0x1cdbc6[_0x45134f(0x134)](fail,_0x45134f(0x165));else{expect(_0x47729c[_0x45134f(0x171)])[_0x45134f(0x15b)](_0x45134f(0x168));const _0x2d8ee0=_0x47729c[_0x45134f(0x14f)],_0x53db2d=await _0x1cdbc6[_0x45134f(0x148)](request,{'url':_0x2d8ee0});expect(_0x53db2d['text'])[_0x45134f(0x179)](_0x45134f(0x159));}}),_0x1cdbc6[_0xf71c6a(0x12b)](it,_0x1cdbc6[_0xf71c6a(0x176)],async()=>{const _0x5da829=_0xf71c6a,_0x2837f1=await request({'headers':{'X-Parse-Application-Id':_0x1cdbc6['JIAtA'],'X-Parse-REST-API-Key':_0x5da829(0x13b),'Content-Type':_0x5da829(0x11e)},'url':_0x1cdbc6[_0x5da829(0x145)],'method':_0x5da829(0x166),'body':{'productIdentifier':_0x5da829(0x15c),'bypassAppStoreValidation':!![]}})['then'](fail,_0x4fcb35=>_0x4fcb35),_0x41bddd=_0x2837f1[_0x5da829(0x14b)];_0x1cdbc6[_0x5da829(0x111)](expect,_0x41bddd['code'])['toEqual'](Parse[_0x5da829(0x13a)]['INVALID_JSON']);}),it(_0xf71c6a(0x117),async()=>{const _0x42ff0f=_0xf71c6a;if(_0x1cdbc6[_0x42ff0f(0x177)](_0x1cdbc6[_0x42ff0f(0x132)],_0x1cdbc6[_0x42ff0f(0x132)]))_0x4e5be7(_0x1cdbc6[_0x42ff0f(0x15f)]);else{const _0x369cfe=await _0x1cdbc6[_0x42ff0f(0x138)](request,{'headers':{'X-Parse-Application-Id':_0x1cdbc6[_0x42ff0f(0x175)],'X-Parse-REST-API-Key':_0x1cdbc6[_0x42ff0f(0x10f)],'Content-Type':_0x1cdbc6[_0x42ff0f(0x16a)]},'url':_0x1cdbc6[_0x42ff0f(0x145)],'method':_0x1cdbc6[_0x42ff0f(0x11c)],'body':{'receipt':{'__type':'Bytes','base64':new Buffer(_0x1cdbc6[_0x42ff0f(0x163)],_0x42ff0f(0x131))['toString'](_0x42ff0f(0x114))},'bypassAppStoreValidation':!![]}})[_0x42ff0f(0x119)](fail,_0x2be1c1=>_0x2be1c1),_0xf2f784=_0x369cfe[_0x42ff0f(0x14b)];_0x1cdbc6['ceIxS'](expect,_0xf2f784['code'])[_0x42ff0f(0x15b)](Parse[_0x42ff0f(0x13a)][_0x42ff0f(0x13d)]);}}),_0x1cdbc6[_0xf71c6a(0x12b)](it,'should\x20bypass\x20appstore\x20validation\x20and\x20not\x20find\x20product',async()=>{const _0x450c6b=_0xf71c6a,_0x2034e2=await _0x1cdbc6[_0x450c6b(0x12e)](request,{'headers':{'X-Parse-Application-Id':'test','X-Parse-REST-API-Key':_0x450c6b(0x13b),'Content-Type':_0x450c6b(0x11e)},'url':_0x450c6b(0x142),'method':_0x450c6b(0x166),'body':{'productIdentifier':_0x1cdbc6['VWmpP'],'receipt':{'__type':_0x450c6b(0x146),'base64':new Buffer(_0x1cdbc6[_0x450c6b(0x163)],_0x1cdbc6['uPrfe'])[_0x450c6b(0x144)]('base64')},'bypassAppStoreValidation':!![]}})['catch'](_0x5372f5=>_0x5372f5),_0x568b71=_0x2034e2[_0x450c6b(0x14b)];typeof _0x568b71!=_0x1cdbc6[_0x450c6b(0x12c)]?fail(_0x450c6b(0x165)):(_0x1cdbc6[_0x450c6b(0x138)](expect,_0x568b71['code'])[_0x450c6b(0x15b)](Parse['Error']['OBJECT_NOT_FOUND']),_0x1cdbc6[_0x450c6b(0x111)](expect,_0x568b71[_0x450c6b(0x141)])[_0x450c6b(0x15b)](_0x1cdbc6[_0x450c6b(0x11d)]));}),_0x1cdbc6['HWcXC'](it,_0x1cdbc6[_0xf71c6a(0x155)],async()=>{const _0x54d7e6=_0xf71c6a,_0x44f1b8=await _0x1cdbc6[_0x54d7e6(0x10e)](request,{'headers':{'X-Parse-Application-Id':_0x54d7e6(0x133),'X-Parse-REST-API-Key':_0x1cdbc6[_0x54d7e6(0x10f)],'Content-Type':_0x54d7e6(0x11e)},'url':_0x54d7e6(0x142),'method':_0x1cdbc6[_0x54d7e6(0x11c)],'body':{'productIdentifier':'a-product','receipt':{'__type':_0x54d7e6(0x146),'base64':new Buffer(_0x1cdbc6[_0x54d7e6(0x163)],_0x1cdbc6['xGZQb'])['toString'](_0x1cdbc6[_0x54d7e6(0x15e)])}}}),_0x1fc58d=_0x44f1b8[_0x54d7e6(0x14b)];typeof _0x1fc58d!=_0x1cdbc6[_0x54d7e6(0x12c)]?_0x1cdbc6[_0x54d7e6(0x16f)](fail,'Body\x20is\x20not\x20an\x20object'):(expect(_0x1fc58d[_0x54d7e6(0x14e)])[_0x54d7e6(0x179)](0x520a),_0x1cdbc6[_0x54d7e6(0x164)](expect,_0x1fc58d[_0x54d7e6(0x141)])['toBe'](_0x1cdbc6[_0x54d7e6(0x140)]));}),_0x1cdbc6['HWcXC'](it,_0x1cdbc6[_0xf71c6a(0x121)],_0x54b3ca=>{const _0x2369e0=_0xf71c6a,_0x1f8a5a=new Parse[(_0x2369e0(0x135))](_0x1cdbc6[_0x2369e0(0x11b)]);_0x1f8a5a[_0x2369e0(0x178)]()[_0x2369e0(0x119)](function(){const _0xd71829=_0x2369e0;fail(_0xd71829(0x17a)),_0x1cdbc6[_0xd71829(0x113)](_0x54b3ca);},function(_0x282364){const _0x526787=_0x2369e0;expect(_0x282364[_0x526787(0x173)])[_0x526787(0x15b)](Parse[_0x526787(0x13a)][_0x526787(0x126)]),_0x54b3ca();});}),_0x1cdbc6[_0xf71c6a(0x12b)](it,_0xf71c6a(0x14c),_0x2b9d07=>{const _0x5dfb79=_0xf71c6a,_0xbdfe2d={'gKOZS':function(_0x31108f,_0x2bca8d){return _0x1cdbc6['XoZCe'](_0x31108f,_0x2bca8d);},'oAaeD':_0x5dfb79(0x13f),'qHJty':function(_0x3fc29b){const _0x52939c=_0x5dfb79;return _0x1cdbc6[_0x52939c(0x113)](_0x3fc29b);},'RaQMr':function(_0x49cb87,_0x20f8d6){return _0x49cb87(_0x20f8d6);}},_0x5a74f2=new Parse['Query'](_0x5dfb79(0x112));_0x5a74f2[_0x5dfb79(0x153)]()[_0x5dfb79(0x119)](function(_0x177105){const _0x3512ae=_0x5dfb79;if(!_0x177105)return Promise[_0x3512ae(0x157)](new Error('Product\x20should\x20be\x20found'));return _0x177105[_0x3512ae(0x151)](_0x3512ae(0x170),'a\x20new\x20title'),_0x177105[_0x3512ae(0x178)]();})[_0x5dfb79(0x119)](function(_0x250dac){const _0x405330=_0x5dfb79;_0xbdfe2d['gKOZS'](expect,_0x250dac['get']('downloadName'))['toEqual'](_0x250dac['get'](_0xbdfe2d[_0x405330(0x136)])[_0x405330(0x130)]()),expect(_0x250dac['get'](_0x405330(0x170)))[_0x405330(0x15b)](_0x405330(0x16c)),_0xbdfe2d[_0x405330(0x13c)](_0x2b9d07);})[_0x5dfb79(0x16e)](function(_0x2f588b){const _0x5cecc1=_0x5dfb79;_0xbdfe2d[_0x5cecc1(0x139)](fail,JSON[_0x5cecc1(0x169)](_0x2f588b)),_0x2b9d07();});}),_0x1cdbc6[_0xf71c6a(0x115)](it,_0x1cdbc6[_0xf71c6a(0x10d)],_0x51814e=>{const _0xd4c238=_0xf71c6a,_0x3e6716={'TnKkc':_0xd4c238(0x170),'xcgei':function(_0x206e0b,_0x2898f9){return _0x1cdbc6['utlzk'](_0x206e0b,_0x2898f9);},'BXhNq':_0xd4c238(0x167),'oowKR':function(_0x12c5d1,_0x44dd05){const _0x517eef=_0xd4c238;return _0x1cdbc6[_0x517eef(0x12e)](_0x12c5d1,_0x44dd05);},'NbCHW':function(_0x596347,_0x212e6e){const _0x42e091=_0xd4c238;return _0x1cdbc6[_0x42e091(0x15d)](_0x596347,_0x212e6e);}},_0x5958a1=new Parse[(_0xd4c238(0x17b))](_0x1cdbc6[_0xd4c238(0x11b)]);_0x5958a1['first']()[_0xd4c238(0x119)](function(_0x5656a4){const _0x336343=_0xd4c238;if(!_0x5656a4)return Promise['reject'](new Error(_0x336343(0x129)));return _0x5656a4[_0x336343(0x16b)](_0x3e6716[_0x336343(0x156)]),_0x5656a4['save']();})[_0xd4c238(0x119)](function(){const _0x1b85d5=_0xd4c238;_0x3e6716[_0x1b85d5(0x116)](_0x1b85d5(0x12d),_0x3e6716[_0x1b85d5(0x125)])?_0x18d83d(_0x1b85d5(0x165)):(_0x3e6716[_0x1b85d5(0x15a)](fail,_0x1b85d5(0x162)),_0x51814e());})['catch'](function(_0x5a4220){const _0x3d4c3e=_0xd4c238;expect(_0x5a4220['code'])['toEqual'](Parse[_0x3d4c3e(0x13a)][_0x3d4c3e(0x126)]),_0x3e6716[_0x3d4c3e(0x13e)](expect,_0x5a4220[_0x3d4c3e(0x11a)])[_0x3d4c3e(0x15b)](_0x3d4c3e(0x150)),_0x51814e();});});});