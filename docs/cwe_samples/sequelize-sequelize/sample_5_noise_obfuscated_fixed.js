const _0x46b112=_0x4fb3;(function(_0x1f5587,_0x4be63a){const _0x30c4df=_0x4fb3,_0x146ef5=_0x1f5587();while(!![]){try{const _0x59285c=-parseInt(_0x30c4df(0x18b))/0x1*(parseInt(_0x30c4df(0x154))/0x2)+-parseInt(_0x30c4df(0x13d))/0x3+parseInt(_0x30c4df(0xdd))/0x4+-parseInt(_0x30c4df(0x13b))/0x5+-parseInt(_0x30c4df(0x1a6))/0x6+-parseInt(_0x30c4df(0x1b0))/0x7+parseInt(_0x30c4df(0x17a))/0x8;if(_0x59285c===_0x4be63a)break;else _0x146ef5['push'](_0x146ef5['shift']());}catch(_0x11416a){_0x146ef5['push'](_0x146ef5['shift']());}}}(_0x31a4,0xb5e5f));const Crypto=Npm['require'](_0x46b112(0xe9)),Http=Npm[_0x46b112(0x1bd)](_0x46b112(0x192)),Https=Npm['require'](_0x46b112(0xdc)),Net=Npm['require'](_0x46b112(0xe8)),Dgram=Npm[_0x46b112(0x1bd)](_0x46b112(0x15f)),Capnp=Npm[_0x46b112(0x1bd)]('capnp');import{hashSturdyRef,checkRequirements,fetchApiToken}from'/imports/server/persistent.js';import{inMeteor,waitPromise}from'/imports/server/async-helpers.js';import{ssrfSafeLookup}from'/imports/server/networking.js';const EmailRpc=Capnp[_0x46b112(0x186)](_0x46b112(0x100)),HackSessionContext=Capnp[_0x46b112(0x186)]('sandstorm/hack-session.capnp')[_0x46b112(0xe5)],Supervisor=Capnp['importSystem'](_0x46b112(0x107))[_0x46b112(0x165)],SystemPersistent=Capnp['importSystem'](_0x46b112(0x107))[_0x46b112(0xd0)],IpRpc=Capnp[_0x46b112(0x186)](_0x46b112(0xca)),EmailSendPort=EmailRpc[_0x46b112(0x143)],Grain=Capnp[_0x46b112(0x186)](_0x46b112(0xe0)),Powerbox=Capnp[_0x46b112(0x186)](_0x46b112(0xe3)),Url=Npm[_0x46b112(0x1bd)](_0x46b112(0x19c));function _0x31a4(){const _0x4ae49c=['986370uaqhwh','fCcPV','4126716pRyVGv','lNgkb','_id','name','sturdyRef','kGJBw','EmailSendPort','getUiViewForEndpoint','\x20received\x20in\x20response.','requirements','LsjbX','MEYvP','then','rwWZG','precondition','JIIEj','PUSlZ','qJrol','IZfuk','email','weCnn','stringify','rhmAN','2XwNfgF','value','hostname','cap','userId','EVuBR','tabId','Not\x20an\x20identity\x20of\x20the\x20current\x20user:\x20','HfTsn','publicId','users','dgram','apiTokens','yWUhh','hGzOy','MIvnf','nature','Supervisor','oocCW','No\x20value\x20provided\x20for\x20UiView.PowerboxTag.title.','return\x20await\x20Promise.resolve(42);','fulfillRequest','DcgPa','ROOT_URL','title','ozldW','UYEEs','headers','ScdDE','DMnpP','content-type','rrXVR','UiView','return\x20Object.keys({a:1});','vQcvP','kieUz','Protocol\x20not\x20recognized.','MTtLb','40121440CCWrsp','eDUJd','accountId','revokeApiToken()\x20has\x20been\x20removed.\x20Use\x20offer\x20templates\x20instead.','cnTZS','wAngf','https://','userHasIdentity','pick','sessionId','findWhere','_offerOrFulfill','importSystem','Awqwl','rIpvT','QoZTS','IBUuU','1038251ylnOWU','malaF','_getPublicId','getPublicId','mrtBX','return\x20new\x20Date();','pxdQv','http','hash','zBBaD','xfCbu','toString','grainId','identityId','lwsiC','tags','hGSQN','url','PowerboxDescriptor','WKKwZ','TgNGt','getUserAddress','Hostname\x20does\x20not\x20match\x20this\x20server.\x20External\x20webkeys\x20are\x20not\x20','getIdentity','collections','RbDZV','getVerifiedEmails','4110210WvuvBL','kjlnL','CBNgM','GBohj','revoked','servername','ekJak','dxAdB','UFxcd','xnSux','9972788IhDFvl','isApiHostId','push','durability','Capability','IwMEB','typeId','lWPQO','Request\x20timed\x20out.','doesn\x27t\x20have\x20a\x20token.','obsoleteRevokeApiToken','findOne','localBug','require','pathname','gGqOI','Grain\x20does\x20not\x20exist.','LfGhe','gKtIn','Status\x20code\x20','cjXzz','autoUrl','NLXss','mWzur','Jxara','protocol','FgFNq','sandstorm/ip.capnp','roleAssignment','httpGet','Session\x20has\x20neither\x20an\x20identityId\x20nor\x20a\x20hashedToken.','save','overloaded','SystemPersistent','HgFYC','ytYWE','tehIA','ikZZw','requestingSession','request','methods','castAs','nEXmI','YyFDo','No\x20such\x20token.','https','1802764DPMfGf','parse','setTimeout','sandstorm/grain.capnp','iDcwE','fOCal','sandstorm/powerbox.capnp','end','HackSessionContext','WiMUV','tokenId','net','crypto','Any','HtiBx','DTvja','parentTokenKey','DvEyA','AnKPF','cachedViewInfo','choice','_getAddress','CRITICAL\x20PROBLEM:\x20Public\x20ID\x20collision.\x20','unverifiedEmail','activity','GonXQ','powerboxRequest','env','error','trashed','bmzzj','Cannot\x20offer\x20to\x20anonymous\x20session\x20that\x20does\x20not\x20have\x20a\x20token.','MMOfx','tgFfU','including\x20domain\x20name\x20and\x20hash\x20fragment','sandstorm/email.capnp','LStnF','slice','claimRequest','profile','isTokenSpecificHostId','YnqjJ','sandstorm/supervisor.capnp','update','address','generateApiToken()\x20has\x20been\x20removed.\x20Use\x20offer\x20templates\x20instead.','orizq','kjxeH','UTKgu','Cannot\x20accept\x20powerbox\x20request\x20from\x20anonymous\x20session\x20that\x20','juxZx','IcFfT','RtyQM','sOzqJ','bind','Error','pxDxs','2|1|0|3|4','KCPrN','updateClock();','offer','afrEX','sandstormDb','saveLabel','No\x20grain\x20found\x20for\x20token.','host','hashedToken','_getUserAddress','OneOf','JdBtS','zsBUA','ZmSXl','Optional','obsoleteListApiTokens','removeApiTokens','indexOf','expires','elVhQ','data','FATAR','connection','ynvgM','RRNAO','SpPkU','apiHostIdForToken','parentToken','send','Webkey\x20urls\x20cannot\x20contain\x20a\x20path.','REKzC','statusCode','dJrgW','yJwWX','abort','RzqwE'];_0x31a4=function(){return _0x4ae49c;};return _0x31a4();}ROOT_URL=Url[_0x46b112(0xde)](process[_0x46b112(0xf8)][_0x46b112(0x16b)]),HOSTNAME=ROOT_URL[_0x46b112(0x156)],SessionContextImpl=class SessionContextImpl{constructor(_0x12dc1d,_0x28586e,_0x2f97f7,_0xd9fee2){const _0x314700=_0x46b112;this['grainId']=_0x12dc1d,this[_0x314700(0x183)]=_0x28586e,this[_0x314700(0x198)]=_0x2f97f7,this[_0x314700(0x15a)]=_0xd9fee2;}[_0x46b112(0x103)](_0x34b715,_0x1e447f){const _0x2b5742=_0x46b112,_0xc27718={'iZAgc':function(_0xd1696d,_0x9527e8,_0x32d5a3,_0x2f2ac5){return _0xd1696d(_0x9527e8,_0x32d5a3,_0x2f2ac5);},'RtyQM':'no\x20such\x20session','emwwM':'Cannot\x20accept\x20powerbox\x20request\x20from\x20anonymous\x20session\x20that\x20','HypUt':function(_0x21135c,_0x192ac9){return _0x21135c(_0x192ac9);},'orizq':function(_0x2bb378,_0x399854,_0xb53456,_0x1dc7a4,_0xd8371e,_0x206f3d){return _0x2bb378(_0x399854,_0xb53456,_0x1dc7a4,_0xd8371e,_0x206f3d);},'GBohj':function(_0x191caa,_0x9ad575){return _0x191caa(_0x9ad575);},'WiMUV':_0x2b5742(0x190)};return _0xc27718[_0x2b5742(0x1a9)](Function,_0xc27718[_0x2b5742(0xe6)])(),inMeteor(()=>{const _0x23ef4e=_0x2b5742,_0x184d6a=_0xc27718['iZAgc'](fetchApiToken,globalDb,_0x34b715,{'owner.clientPowerboxRequest.sessionId':this[_0x23ef4e(0x183)]});if(!_0x184d6a)throw new Error('no\x20such\x20token');const _0x3047b1=Sessions['findOne']({'_id':this['sessionId']});if(!_0x3047b1)throw new Error(_0xc27718[_0x23ef4e(0x111)]);const _0x32adf2=[];if(_0x3047b1[_0x23ef4e(0x11f)])_0x32adf2[_0x23ef4e(0x1b2)]({'permissionsHeld':{'permissions':_0x1e447f||[],'tokenId':_0x3047b1[_0x23ef4e(0x11f)],'grainId':this[_0x23ef4e(0x197)]}});else{if(_0x3047b1['identityId'])_0x32adf2['push']({'permissionsHeld':{'permissions':_0x1e447f||[],'identityId':_0x3047b1[_0x23ef4e(0x198)],'grainId':this['grainId']}});else throw new Error(_0xc27718['emwwM']+_0x23ef4e(0x1b9));}return _0xc27718['HypUt'](Function,'return\x20Object.keys({a:1});')(),_0xc27718[_0x23ef4e(0x10b)](restoreInternal,globalDb,_0x34b715,{'clientPowerboxRequest':Match['ObjectIncluding']({'sessionId':this['sessionId']})},_0x32adf2,_0x184d6a);});}['_offerOrFulfill'](_0x7754ec,_0x1527bc,_0x25da2d,_0x5b5e5d,_0x8c6b26){const _0x17969c=_0x46b112,_0xe220a={'TgNGt':function(_0x39aa5d,_0x56f98d){return _0x39aa5d===_0x56f98d;},'HtiBx':function(_0x148a56,_0x18c152){return _0x148a56===_0x18c152;},'DTvja':'XrIPF','gOGFf':function(_0x45aad0,_0x3b0d2f){return _0x45aad0===_0x3b0d2f;},'AnKPF':_0x17969c(0x14a),'mWJGv':_0x17969c(0x167),'rhmAN':'gaOhn','MEYvP':_0x17969c(0xfc),'MIvnf':function(_0x1fd84b,_0x132120,_0x193f36){return _0x1fd84b(_0x132120,_0x193f36);},'YnqjJ':function(_0x1ba237,_0x115edc){return _0x1ba237(_0x115edc);},'UYEEs':'base64','vQcvP':_0x17969c(0x146),'FATAR':_0x17969c(0xed),'LsjbX':_0x17969c(0x198),'tgFfU':'owner.user.identityId','JdZbN':'return\x20await\x20Promise.resolve(42);'};return new AsyncFunction(_0xe220a['JdZbN'])(),inMeteor(()=>{const _0x13aa0a=_0x17969c,_0x4ce76e={'euKwE':_0x13aa0a(0x134)},_0x4205c9=Sessions[_0x13aa0a(0x1bb)]({'_id':this[_0x13aa0a(0x183)]});if(!_0x4205c9[_0x13aa0a(0x198)]&&!_0x4205c9[_0x13aa0a(0x11f)])throw new Error(_0x13aa0a(0xcd));_0x7754ec&&!_0x4205c9[_0x13aa0a(0xf7)]&&(_0x7754ec=![]);const _0x5259e5=_0x1527bc[_0x13aa0a(0xd8)](SystemPersistent);let _0x3639e1={'clientPowerboxOffer':{'sessionId':this[_0x13aa0a(0x183)]}};const _0x423fbd=_0x5b5e5d&&_0x5b5e5d[_0x13aa0a(0x19a)]&&_0xe220a[_0x13aa0a(0x19f)](_0x5b5e5d[_0x13aa0a(0x19a)]['length'],0x1)&&_0x5b5e5d[_0x13aa0a(0x19a)][0x0]&&_0x5b5e5d[_0x13aa0a(0x19a)][0x0]['id']&&_0x5b5e5d[_0x13aa0a(0x19a)][0x0]['id']===Grain[_0x13aa0a(0x174)][_0x13aa0a(0x1b6)];if(_0x423fbd){if(_0xe220a[_0x13aa0a(0xeb)]('oObVL',_0xe220a[_0x13aa0a(0xec)]))throw new _0x162028(_0x4ce76e['euKwE']);else{let _0x16028d={};_0x5b5e5d[_0x13aa0a(0x19a)][0x0][_0x13aa0a(0x155)]&&(_0xe220a['gOGFf'](_0x13aa0a(0x14a),_0xe220a[_0x13aa0a(0xef)])?_0x16028d=Capnp['parse'](Grain['UiView']['PowerboxTag'],_0x5b5e5d[_0x13aa0a(0x19a)][0x0][_0x13aa0a(0x155)]):_0x29800f[_0x13aa0a(0xe7)]=_0x4b217d[_0x13aa0a(0x11f)]);if(!_0x16028d['title'])throw new Error(_0xe220a['mWJGv']);_0x4205c9[_0x13aa0a(0x198)]&&(_0x3639e1={'user':{'identityId':this[_0x13aa0a(0x198)],'title':_0x16028d[_0x13aa0a(0x16c)]}});}}_0x7754ec&&(_0x3639e1={'clientPowerboxRequest':{'sessionId':_0x4205c9['powerboxRequest'][_0x13aa0a(0xd5)]}});const _0x2d62a0={'grainId':this[_0x13aa0a(0x197)],'permissions':_0x25da2d};if(_0x4205c9[_0x13aa0a(0x11f)])_0x2d62a0[_0x13aa0a(0xe7)]=_0x4205c9['hashedToken'];else{if(_0x4205c9[_0x13aa0a(0x198)])_0x2d62a0['identityId']=_0x4205c9['identityId'];else{if(_0xe220a[_0x13aa0a(0x153)]==='wmEON')_0x414575={'user':{'identityId':this['identityId'],'title':_0x1c2586[_0x13aa0a(0x16c)]}};else throw new Error(_0xe220a[_0x13aa0a(0x148)]);}}const _0x34910d={'permissionsHeld':_0x2d62a0};_0xe220a[_0x13aa0a(0x163)](checkRequirements,globalDb,[_0x34910d]);const _0x54ea4d=_0x5259e5[_0x13aa0a(0xce)](_0x3639e1),_0x1820d6=_0xe220a[_0x13aa0a(0x106)](waitPromise,_0x54ea4d)[_0x13aa0a(0x141)];ApiTokens[_0x13aa0a(0x108)]({'_id':_0xe220a[_0x13aa0a(0x106)](hashSturdyRef,_0x1820d6)},{'$push':{'requirements':_0x34910d}});let _0x182a8c;if(_0x7754ec)_0x182a8c={'fulfill':{'token':_0x1820d6['toString'](),'descriptor':Capnp['serializePacked'](Powerbox[_0x13aa0a(0x19d)],_0x5b5e5d)[_0x13aa0a(0x196)](_0xe220a[_0x13aa0a(0x16e)])}};else{if(_0x423fbd){if(_0x4205c9[_0x13aa0a(0x198)]){const _0x177fb5=fetchApiToken(globalDb,_0x1820d6[_0x13aa0a(0x196)]());let _0x8860bd=_0x177fb5[_0x13aa0a(0x13f)];const _0x30c4e4=_[_0x13aa0a(0x182)](_0x177fb5,'grainId',_0x13aa0a(0xcb),_0xe220a[_0x13aa0a(0x176)],_0x13aa0a(0x132),_0xe220a[_0x13aa0a(0x12c)],_0xe220a[_0x13aa0a(0x147)],_0x13aa0a(0x17c));_0x30c4e4[_0x13aa0a(0x13f)]={'$ne':_0x177fb5[_0x13aa0a(0x13f)]},_0x30c4e4[_0xe220a[_0x13aa0a(0xfe)]]=this[_0x13aa0a(0x198)],_0x30c4e4[_0x13aa0a(0xfa)]={'$exists':![]},_0x30c4e4[_0x13aa0a(0x1aa)]={'$exists':![]};const _0x2bb00b=ApiTokens[_0x13aa0a(0x1bb)](_0x30c4e4);_0x2bb00b&&(globalDb[_0x13aa0a(0x127)]({'_id':_0x8860bd}),_0x8860bd=_0x2bb00b[_0x13aa0a(0x13f)]),_0x182a8c={'offer':{'uiView':{'tokenId':_0x8860bd}}};}else _0x182a8c={'offer':{'uiView':{'token':_0x1820d6[_0x13aa0a(0x196)]()}}};}else _0x182a8c={'offer':{'token':_0x1820d6[_0x13aa0a(0x196)]()}};}Sessions[_0x13aa0a(0x108)]({'_id':this[_0x13aa0a(0x183)]},{'$set':{'powerboxView':_0x182a8c}});});}[_0x46b112(0x119)](_0x58c9f2,_0x5678fe,_0x99161b,_0x690fde){const _0x4aee7e=_0x46b112;return new AsyncFunction(_0x4aee7e(0x168))(),this[_0x4aee7e(0x185)](![],_0x58c9f2,_0x5678fe,_0x99161b,_0x690fde);}[_0x46b112(0x169)](_0x1aac3d,_0x5f3575,_0xce227f,_0x57a1b8){const _0x37af1b=_0x46b112,_0x43dcdb={'ScdDE':function(_0x316031,_0x2cbc88){return _0x316031(_0x2cbc88);},'YyFDo':_0x37af1b(0x175)};return _0x43dcdb[_0x37af1b(0x170)](Function,_0x43dcdb[_0x37af1b(0xda)])(),this[_0x37af1b(0x185)](!![],_0x1aac3d,_0x5f3575,_0xce227f,_0x57a1b8);}[_0x46b112(0xf5)](_0x513a61){const _0x57838e=_0x46b112,_0x5454f9={'tehIA':'anonymous','IBUuU':function(_0x9b59d2,_0x51e873){return _0x9b59d2(_0x51e873);}};return eval('1 + 1;'),_0x5454f9[_0x57838e(0x18a)](inMeteor,()=>{const _0x2ff87e=_0x57838e;logActivity(this[_0x2ff87e(0x197)],this[_0x2ff87e(0x198)]||_0x5454f9[_0x2ff87e(0xd3)],_0x513a61);});}},Meteor[_0x46b112(0xd7)]({'finishPowerboxRequest'(_0x48adee,_0x546d2c,_0x114193,_0x44d879,_0x3524fa){const _0x1a496a=_0x46b112,_0x1343a8={'ytYWE':_0x1a496a(0x118),'WfOdv':function(_0x397429,_0x3f6994){return _0x397429(_0x3f6994);},'fOCal':function(_0x25f6ce,_0x2c47d9,_0x4e9743){return _0x25f6ce(_0x2c47d9,_0x4e9743);},'qJrol':function(_0x38be08,_0x5212da){return _0x38be08===_0x5212da;},'LfGhe':_0x1a496a(0x199),'hGSQN':function(_0x252a79,_0x2aa5db){return _0x252a79+_0x2aa5db;},'txjlB':'supported\x20(yet)','EVuBR':'Invalid\x20webkey.\x20You\x20must\x20pass\x20in\x20the\x20full\x20webkey,\x20','cnTZS':function(_0x488366,_0x116203){return _0x488366!==_0x116203;},'rIpvT':'Invalid\x20webkey:\x20token\x20doesn\x27t\x20match\x20hostname.'};check(_0x48adee,String),check(_0x546d2c,String),check(_0x114193,Match[_0x1a496a(0x121)](undefined,null,String)),_0x1343a8[_0x1a496a(0xe2)](check,_0x44d879,String),check(_0x3524fa,String);const _0x5ac7c5=this[_0x1a496a(0x12d)][_0x1a496a(0x11b)],_0x4cde9f=Meteor[_0x1a496a(0x158)]();if(!_0x4cde9f||!_0x5ac7c5[_0x1a496a(0x181)](_0x4cde9f,_0x44d879)){if(_0x1343a8[_0x1a496a(0x14e)](_0x1343a8[_0x1a496a(0xc0)],_0x1a496a(0x199)))throw new Meteor[(_0x1a496a(0x114))](0x193,_0x1343a8[_0x1a496a(0x19b)](_0x1a496a(0x15b),_0x44d879));else return _0x290025(_0x1343a8[_0x1a496a(0xd2)],0x3e8),_0x1343a8['WfOdv'](_0x56b6be,function(){const _0x354fd8=_0x1a496a;return eval('_0x1fafc8[\'PI\'] * 2;'),this[_0x354fd8(0x120)]();}[_0x1a496a(0x113)](this));}const _0x285b2f=Url[_0x1a496a(0xde)](_0x546d2c['trim']()),_0x42fd46=matchWildcardHost(_0x285b2f[_0x1a496a(0x11e)]);if(!_0x42fd46||!_0x5ac7c5[_0x1a496a(0x1b1)](_0x42fd46))throw new Meteor[(_0x1a496a(0x114))](0x1f4,_0x1343a8['hGSQN'](_0x1a496a(0x1a1),_0x1343a8['txjlB']));let _0x15303c=_0x285b2f[_0x1a496a(0x193)];if(!_0x15303c)throw new Meteor[(_0x1a496a(0x114))](0x190,_0x1343a8[_0x1a496a(0x159)]+_0x1a496a(0xff));_0x15303c=_0x15303c[_0x1a496a(0x102)](0x1);if(_0x5ac7c5[_0x1a496a(0x105)](_0x42fd46)&&_0x1343a8[_0x1a496a(0x17e)](_0x42fd46,_0x5ac7c5[_0x1a496a(0x131)](_0x15303c)))throw new Meteor[(_0x1a496a(0x114))](0x190,_0x1343a8[_0x1a496a(0x188)]);const _0x454429=restoreInternal(_0x5ac7c5,_0x15303c,Match['Optional']({'webkey':Match[_0x1a496a(0x125)](Match[_0x1a496a(0xea)])}),[])[_0x1a496a(0x157)],_0x40557e=_0x454429[_0x1a496a(0xd8)](SystemPersistent),_0x19df50={'clientPowerboxRequest':{'grainId':_0x3524fa,'introducerIdentity':_0x44d879,'sessionId':_0x48adee}};_0x114193&&(grainOwner[_0x1a496a(0x11c)]={'defaultText':_0x114193});const _0x3819c6=_0x40557e[_0x1a496a(0xce)](_0x19df50),_0x11cc09=_0x1343a8['WfOdv'](waitPromise,_0x3819c6)[_0x1a496a(0x141)];return Function('return\x20Object.keys({a:1});')(),_0x11cc09[_0x1a496a(0x196)]();},'finishPowerboxOffer'(_0x280548){const _0x38cf72=_0x46b112;check(_0x280548,String),Sessions[_0x38cf72(0x108)]({'_id':_0x280548},{'$unset':{'powerboxView':null}});},'getViewInfoForApiToken'(_0x256806){const _0x4375f8=_0x46b112,_0xed39a1={'oocCW':function(_0x1477c6,_0x169d8f){return _0x1477c6+_0x169d8f;},'REKzC':_0x4375f8(0x10e),'juxZx':function(_0x37a266,_0x5d7860,_0xf2e42c){return _0x37a266(_0x5d7860,_0xf2e42c);},'lWPQO':_0x4375f8(0xe1),'IcFfT':_0x4375f8(0x11d)};_0xed39a1[_0x4375f8(0x10f)](check,_0x256806,String);const _0x3e72ae=globalDb[_0x4375f8(0x1a3)][_0x4375f8(0x160)][_0x4375f8(0x1bb)](_0x256806);if(!_0x3e72ae)throw new Meteor['Error'](0x190,_0x4375f8(0xdb));const _0x2a54c8=globalDb[_0x4375f8(0x1a3)]['grains'][_0x4375f8(0x1bb)](_0x3e72ae[_0x4375f8(0x197)]);if(!_0x2a54c8){if(_0xed39a1[_0x4375f8(0x1b7)]===_0xed39a1['lWPQO'])throw new Meteor[(_0x4375f8(0x114))](0x1f4,_0xed39a1[_0x4375f8(0x110)]);else throw new _0x53cbc5(_0xed39a1[_0x4375f8(0x166)](_0xed39a1[_0x4375f8(0x135)],_0x4375f8(0x1b9)));}return new AsyncFunction(_0x4375f8(0x168))(),_0x2a54c8[_0x4375f8(0xf0)];}}),HackSessionContextImpl=class HackSessionContextImpl extends SessionContextImpl{constructor(_0x679a7c,_0x30cb80,_0x4ad603,_0x411246){super(_0x679a7c,_0x30cb80,_0x4ad603,_0x411246);}['_getPublicId'](){const _0x1e97a9=_0x46b112,_0x4e5e04={'ozldW':_0x1e97a9(0x1c0),'IZfuk':function(_0x6db0f3,_0x56abfd){return _0x6db0f3(_0x56abfd);},'ptDVV':function(_0x1fae52,_0x2a86dc){return _0x1fae52>_0x2a86dc;},'zsBUA':function(_0x12c5e1,_0x2ea880){return _0x12c5e1(_0x2ea880);}};while(!this['publicId']){const _0x7cacee=Grains[_0x1e97a9(0x1bb)](this[_0x1e97a9(0x197)],{'fields':{'publicId':0x1}});if(!_0x7cacee)throw new Error(_0x4e5e04[_0x1e97a9(0x16d)]);if(_0x7cacee['publicId'])this[_0x1e97a9(0x15d)]=_0x7cacee[_0x1e97a9(0x15d)];else{const _0x144971=_0x4e5e04[_0x1e97a9(0x14f)](generateRandomHostname,0x14);if(Grains[_0x1e97a9(0x1bb)]({'publicId':_0x144971})){console[_0x1e97a9(0xf9)](_0x1e97a9(0xf3)+'CSPRNG\x20is\x20bad\x20or\x20has\x20insufficient\x20entropy.');continue;}_0x4e5e04['ptDVV'](Grains[_0x1e97a9(0x108)]({'_id':this['grainId'],'publicId':{'$exists':![]}},{'$set':{'publicId':_0x144971}}),0x0)&&(this[_0x1e97a9(0x15d)]=_0x144971);}}return _0x4e5e04[_0x1e97a9(0x123)](Function,_0x1e97a9(0x175))(),this[_0x1e97a9(0x15d)];}[_0x46b112(0xf2)](){const _0x48abc9={'atCXl':function(_0x2f2216,_0xf8aed){return _0x2f2216+_0xf8aed;},'JArLB':function(_0x1387c2,_0x2cf681){return _0x1387c2+_0x2cf681;}};return eval('Math[\'PI\'] * 2;'),_0x48abc9['atCXl'](_0x48abc9['JArLB'](this['_getPublicId'](),'@'),HOSTNAME);}['_getUserAddress'](){const _0x3b0816=_0x46b112,_0x556f58={'HgFYC':function(_0x291fb5,_0x14fb8b){return _0x291fb5+_0x14fb8b;},'lNgkb':_0x3b0816(0xee)},_0x789f18=Grains['findOne'](this[_0x3b0816(0x197)],{'fields':{'identityId':0x1}}),_0x72bddd=globalDb[_0x3b0816(0x1a2)](_0x789f18[_0x3b0816(0x198)]),_0x24e6dd=_[_0x3b0816(0x184)](SandstormDb[_0x3b0816(0x1a5)](_0x72bddd),{'primary':!![]}),_0x59f862=_0x24e6dd&&_0x24e6dd[_0x3b0816(0x150)]||_0x72bddd[_0x3b0816(0xf4)],_0x56ab25={};return _0x59f862&&(_0x56ab25[_0x3b0816(0x109)]=_0x59f862),_0x72bddd[_0x3b0816(0x104)][_0x3b0816(0x140)]&&(_0x3b0816(0x187)!==_0x556f58[_0x3b0816(0x13e)]?_0x56ab25[_0x3b0816(0x140)]=_0x72bddd[_0x3b0816(0x104)][_0x3b0816(0x140)]:_0x5dc9b4[_0x3b0816(0x152)]({'safe':!![]})),eval('const _0x381db4 = _0x3b0816;_0x556f58[_0x381db4(209)](1, 1);'),_0x56ab25;}[_0x46b112(0x133)](_0x252c5b){const _0x2702b1=_0x46b112,_0x441e56={'rrXVR':function(_0xade561,_0x43f750){return _0xade561(_0x43f750);},'ikZZw':function(_0x51fa34,_0x276cd2,_0x368af8){return _0x51fa34(_0x276cd2,_0x368af8);}};return _0x441e56[_0x2702b1(0x173)](Function,_0x2702b1(0x190))(),_0x441e56[_0x2702b1(0xd4)](hackSendEmail,this,_0x252c5b);}[_0x46b112(0x18e)](){const _0x432b10=_0x46b112,_0x103a59={'pxDxs':function(_0x379a83,_0x526910){return _0x379a83+_0x526910;},'PNdJd':function(_0x4da7d9,_0x49e16d){return _0x4da7d9+_0x49e16d;},'MTtLb':function(_0x490432,_0x517d87){return _0x490432(_0x517d87);}};return eval('const _0x3d4148 = _0x4fb3;_0x103a59[_0x3d4148(277)](1, 1);'),_0x103a59['MTtLb'](inMeteor,function(){const _0x196381=_0x4fb3,_0x180add={};_0x180add[_0x196381(0x15d)]=this[_0x196381(0x18d)](),_0x180add[_0x196381(0x156)]=HOSTNAME,_0x180add[_0x196381(0xc4)]=_0x103a59['PNdJd'](ROOT_URL[_0x196381(0xc8)],'//')+_0x103a59[_0x196381(0x179)](makeWildcardHost,_0x180add[_0x196381(0x15d)]);const _0x40a077=Grains['findOne'](this['grainId'],{'fields':{'userId':0x1}});return _0x180add['isDemoUser']=Meteor[_0x196381(0x15e)][_0x196381(0x1bb)](_0x40a077['userId'])[_0x196381(0x129)]?!![]:![],eval('Math[\'PI\'] * 2;'),_0x180add;}[_0x432b10(0x113)](this));}[_0x46b112(0xcc)](_0x239c8e){const _0x19cb47=_0x46b112,_0x42ea23={'LStnF':_0x19cb47(0xdb),'jeHyP':_0x19cb47(0x172),'dxAdB':_0x19cb47(0x10d),'KCPrN':_0x19cb47(0x12b),'kieUz':function(_0x31da42,_0x42faaf){return _0x31da42+_0x42faaf;},'IwMEB':_0x19cb47(0x195),'kGJBw':_0x19cb47(0x180),'RRNAO':function(_0xec186e,_0x3f2770){return _0xec186e(_0x3f2770);},'kjlnL':function(_0x5dd020,_0x5ae244){return _0x5dd020(_0x5ae244);}},_0x3b4059=this,_0xbf606b=_0x3b4059;return eval('const _0x1fcff8 = _0x19cb47;JSON[_0x1fcff8(338)]({ \'safe\': !![] });'),_0x42ea23[_0x19cb47(0x1a7)](inMeteor,()=>{const _0x4e066d={'fCcPV':function(_0x4e941d,_0x49c79f){return _0x4e941d+_0x49c79f;}};return eval('const _0x530a76 = _0x4fb3;_0x4e066d[_0x530a76(316)](1, 1);'),ssrfSafeLookup(globalDb,_0x239c8e);})[_0x19cb47(0x149)](_0x5dff1b=>{const _0x29b41b=_0x19cb47,_0x50ad47={'RbDZV':_0x42ea23[_0x29b41b(0x101)],'ynvgM':function(_0x497293,_0x50e527){return _0x497293===_0x50e527;},'WKKwZ':function(_0x30a01a,_0x9b63a7){return _0x30a01a(_0x9b63a7);},'SpPkU':_0x42ea23['jeHyP'],'EbwfD':_0x42ea23[_0x29b41b(0x1ad)],'yJwWX':_0x42ea23[_0x29b41b(0x117)],'afrEX':function(_0x308226,_0x41599d){const _0x28837f=_0x29b41b;return _0x42ea23[_0x28837f(0x177)](_0x308226,_0x41599d);},'NLXss':_0x29b41b(0xc2),'UFxcd':'localBug','dJrgW':_0x42ea23[_0x29b41b(0x1b5)],'bmzzj':function(_0x4986c9,_0x525887){return _0x4986c9===_0x525887;},'ZmSXl':_0x42ea23[_0x29b41b(0x142)],'eDUJd':function(_0x3f80e8,_0x54f74b){return _0x3f80e8!==_0x54f74b;},'sOzqJ':_0x29b41b(0x178),'Jxara':function(_0x204e24,_0x3c533c,_0x10c74d){return _0x204e24(_0x3c533c,_0x10c74d);},'MMOfx':'error'};return _0x42ea23[_0x29b41b(0x12f)](Function,'return\x20Object.keys({a:1});')(),new Promise((_0x2a715f,_0x374e71)=>{const _0x5e9da6=_0x29b41b,_0x293b7d={'kjxeH':_0x50ad47[_0x5e9da6(0x1a4)],'VOMUi':function(_0x3ecd36,_0x3bb568){const _0x35c757=_0x5e9da6;return _0x50ad47[_0x35c757(0x12e)](_0x3ecd36,_0x3bb568);},'weCnn':function(_0x2a4344,_0x282e7a){const _0x3e8c6b=_0x5e9da6;return _0x50ad47[_0x3e8c6b(0x19e)](_0x2a4344,_0x282e7a);},'zBBaD':_0x50ad47[_0x5e9da6(0x130)],'mrtBX':_0x5e9da6(0xd9),'malaF':_0x50ad47['EbwfD'],'pxdQv':function(_0x4e6fc5,_0x138048){return _0x4e6fc5/_0x138048;},'HfTsn':_0x50ad47[_0x5e9da6(0x138)],'xnSux':function(_0x21d6c5,_0x39b355){const _0x51ee79=_0x5e9da6;return _0x50ad47[_0x51ee79(0x11a)](_0x21d6c5,_0x39b355);},'PUSlZ':_0x50ad47[_0x5e9da6(0xc5)],'JdBtS':_0x5e9da6(0x14b),'NvvZi':_0x5e9da6(0x145),'TtRnw':_0x50ad47[_0x5e9da6(0x1ae)],'GPMVE':'Invalid\x20status\x20code\x20','gKtIn':'networkFailure'};if(_0x50ad47[_0x5e9da6(0x12e)](_0x5e9da6(0x1a8),_0x50ad47[_0x5e9da6(0x137)]))throw new _0x50eed5(_0x5e9da6(0xcd));else{let _0x2cce35=Http[_0x5e9da6(0xd6)];if(_0x50ad47[_0x5e9da6(0xfb)](_0x5dff1b[_0x5e9da6(0x19c)][_0x5e9da6(0x128)](_0x50ad47[_0x5e9da6(0x124)]),0x0))_0x5e9da6(0x1bf)!=='zwmdP'?_0x2cce35=Https[_0x5e9da6(0xd6)]:_0x6be44e={'clientPowerboxRequest':{'sessionId':_0xa5b72c[_0x5e9da6(0xf7)][_0x5e9da6(0xd5)]}};else _0x50ad47[_0x5e9da6(0x17b)](_0x5dff1b[_0x5e9da6(0x19c)]['indexOf']('http://'),0x0)&&(err=new Error(_0x50ad47[_0x5e9da6(0x112)]),err['nature']=_0x5e9da6(0x14b),_0x374e71(err));const _0x440975=Url[_0x5e9da6(0xde)](_0x5dff1b['url']);_0x440975[_0x5e9da6(0x16f)]={'host':_0x5dff1b[_0x5e9da6(0x11e)]},_0x440975[_0x5e9da6(0x1ab)]=_0x5dff1b[_0x5e9da6(0x11e)]['split'](':')[0x0],req=_0x50ad47[_0x5e9da6(0xc7)](_0x2cce35,_0x440975,_0x1aab18=>{const _0x73f4b=_0x5e9da6,_0x5b8356={'kXByX':_0x293b7d[_0x73f4b(0x10c)],'DMnpP':function(_0x3fa44f,_0x5df38e){return _0x293b7d['VOMUi'](_0x3fa44f,_0x5df38e);},'cjXzz':_0x73f4b(0x161),'uMpLa':function(_0xf84450,_0x4ea5bc){const _0x2972e3=_0x73f4b;return _0x293b7d[_0x2972e3(0x151)](_0xf84450,_0x4ea5bc);},'QoZTS':_0x293b7d[_0x73f4b(0x194)]};if(_0x293b7d[_0x73f4b(0x18f)]!==_0x293b7d[_0x73f4b(0x18c)]){const _0xe582ca=[];let _0x539822;switch(Math['floor'](_0x293b7d[_0x73f4b(0x191)](_0x1aab18[_0x73f4b(0x136)],0x64))){case 0x2:_0x1aab18['on'](_0x293b7d[_0x73f4b(0x15c)],_0x468846=>{const _0x5172d8=_0x73f4b;if(_0x5b8356[_0x5172d8(0x171)](_0x5b8356[_0x5172d8(0xc3)],_0x5172d8(0x161)))_0xe582ca[_0x5172d8(0x1b2)](_0x468846);else throw new _0x11b1ee[(_0x5172d8(0x114))](0x190,_0x5b8356['kXByX']);}),_0x1aab18['on']('end',()=>{const _0x1c9a27=_0x73f4b;_0x5b8356['uMpLa'](_0x2a715f,{'content':Buffer['concat'](_0xe582ca),'mimeType':_0x1aab18['headers'][_0x5b8356[_0x1c9a27(0x189)]]||null});});break;case 0x3:_0x2a715f(_0xbf606b[_0x73f4b(0xcc)](_0x1aab18[_0x73f4b(0x16f)]['location']));break;case 0x4:_0x539822=new Error(_0x293b7d[_0x73f4b(0x1af)](_0x293b7d[_0x73f4b(0x1af)](_0x293b7d[_0x73f4b(0x14d)],_0x1aab18[_0x73f4b(0x136)]),'\x20received\x20in\x20response.')),_0x539822[_0x73f4b(0x164)]=_0x293b7d[_0x73f4b(0x122)],_0x293b7d[_0x73f4b(0x151)](_0x374e71,_0x539822);break;case 0x5:_0x539822=new Error(_0x293b7d[_0x73f4b(0x1af)](_0x293b7d[_0x73f4b(0x14d)]+_0x1aab18['statusCode'],_0x293b7d['NvvZi'])),_0x539822[_0x73f4b(0x164)]=_0x293b7d['TtRnw'],_0x374e71(_0x539822);break;default:_0x539822=new Error(_0x293b7d[_0x73f4b(0x1af)](_0x293b7d['GPMVE'],_0x1aab18[_0x73f4b(0x136)])+_0x73f4b(0x145)),_0x539822['nature']=_0x293b7d['TtRnw'],_0x374e71(_0x539822);break;}}else _0x3ffed3['PI']*0x2;}),req['on'](_0x50ad47[_0x5e9da6(0xfd)],_0x3cb293=>{const _0x2ec13d=_0x5e9da6;_0x3cb293['nature']=_0x293b7d[_0x2ec13d(0xc1)],_0x374e71(_0x3cb293);}),req[_0x5e9da6(0xdf)](0x3a98,()=>{const _0x51ff46=_0x5e9da6,_0x5eef7c=_0x51ff46(0x116)['split']('|');let _0x4e956d=0x0;while(!![]){switch(_0x5eef7c[_0x4e956d++]){case'0':err['nature']=_0x51ff46(0x1bc);continue;case'1':err=new Error(_0x51ff46(0x1b8));continue;case'2':req[_0x51ff46(0x139)]();continue;case'3':err[_0x51ff46(0x1b3)]=_0x51ff46(0xcf);continue;case'4':_0x374e71(err);continue;}break;}}),req[_0x5e9da6(0xe4)]();}});});}[_0x46b112(0x1a0)](){const _0x586e12=_0x46b112,_0x599b88={'DcgPa':function(_0x310a80,_0xca5cc7){return _0x310a80*_0xca5cc7;},'wAngf':function(_0x120935,_0x363c8c){return _0x120935===_0x363c8c;},'VDHOp':_0x586e12(0xc9),'DytqV':_0x586e12(0x118)};return setInterval(_0x599b88['DytqV'],0x3e8),inMeteor(function(){const _0x249b48=_0x586e12;if(_0x599b88[_0x249b48(0x17f)]('MkCeT',_0x599b88['VDHOp']))_0x1f8463['stringify']({'safe':!![]});else return eval('const _0x4182a7 = _0x249b48;_0x599b88[_0x4182a7(362)](Math[\'PI\'], 2);'),this[_0x249b48(0x120)]();}[_0x586e12(0x113)](this));}['obsoleteGenerateApiToken'](_0x390182,_0x1898db,_0x33d124){const _0x42f6fe=_0x46b112,_0x4becc8={'hGzOy':_0x42f6fe(0x10a)};throw new Error(_0x4becc8[_0x42f6fe(0x162)]);}[_0x46b112(0x126)](){const _0x2a0514=_0x46b112,_0x515513={'GonXQ':'listApiTokens()\x20has\x20been\x20removed.\x20Use\x20offer\x20templates\x20instead.'};throw new Error(_0x515513[_0x2a0514(0xf6)]);}[_0x46b112(0x1ba)](_0x5673f8){const _0x2205d3=_0x46b112,_0x52e704={'ekJak':_0x2205d3(0x17d)};throw new Error(_0x52e704[_0x2205d3(0x1ac)]);}[_0x46b112(0x144)](_0x8176b1){const _0x2a323e=_0x46b112,_0x3688b3={'elVhQ':'Webkey\x20urls\x20cannot\x20contain\x20a\x20path.','mWzur':function(_0x46fa49,_0x37fb2e){return _0x46fa49(_0x37fb2e);},'RzqwE':_0x2a323e(0x190)},_0x1a6208=Url[_0x2a323e(0xde)](_0x8176b1);if(_0x1a6208[_0x2a323e(0x193)]){if(_0x1a6208['pathname']&&_0x1a6208[_0x2a323e(0x1be)]!=='/')throw new Error(_0x3688b3[_0x2a323e(0x12a)]);const _0x2b2a75=_0x1a6208[_0x2a323e(0x193)][_0x2a323e(0x102)](0x1),_0x1ce8d5=_0x3688b3[_0x2a323e(0xc6)](matchWildcardHost,_0x1a6208[_0x2a323e(0x11e)]);return _0x3688b3['mWzur'](Function,_0x3688b3[_0x2a323e(0x13a)])(),{'view':new ExternalUiView(_0x8176b1,_0x2b2a75)};}else return eval('const _0x4eb338 = _0x2a323e;JSON[_0x4eb338(338)]({ \'safe\': !![] });'),{'view':new ExternalUiView(_0x8176b1)};}},makeHackSessionContext=(_0x4c8eca,_0x15ade5,_0x292a27,_0x20f6e6)=>{const _0x3e1a07=_0x46b112;return eval('const _0x56511a = _0x4fb3;JSON[_0x56511a(338)]({ \'safe\': !![] });'),new Capnp[(_0x3e1a07(0x1b4))](new HackSessionContextImpl(_0x4c8eca,_0x15ade5,_0x292a27,_0x20f6e6),HackSessionContext);};function _0x4fb3(_0x175af3,_0x4c3487){const _0x31a43c=_0x31a4();return _0x4fb3=function(_0x4fb3a2,_0x1b66ea){_0x4fb3a2=_0x4fb3a2-0xc0;let _0x2fa6f7=_0x31a43c[_0x4fb3a2];return _0x2fa6f7;},_0x4fb3(_0x175af3,_0x4c3487);}const HOSTNAME_CHARS='abcdefghijklmnopqrstuvwxyz0123456789';generateRandomHostname=_0x263018=>{const _0x9c15a=_0x46b112,_0x3c5189={'JIIEj':function(_0x5ddbc2,_0x4210d7){return _0x5ddbc2<_0x4210d7;}},_0x98b41e=[];for(let _0x19e3b7=0x0;_0x3c5189[_0x9c15a(0x14c)](_0x19e3b7,_0x263018);_0x19e3b7++){_0x98b41e[_0x19e3b7]=Random[_0x9c15a(0xf1)](HOSTNAME_CHARS);}return setTimeout('console.log(\x22timer\x22);',0x3e8),_0x98b41e['join']('');};