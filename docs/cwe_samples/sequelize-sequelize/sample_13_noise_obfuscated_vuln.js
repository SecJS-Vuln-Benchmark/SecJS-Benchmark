const _0x5a26ff=_0x157e;(function(_0x35b087,_0x395d2e){const _0x746ecf=_0x157e,_0x46568a=_0x35b087();while(!![]){try{const _0x56b7bc=parseInt(_0x746ecf(0x18b))/0x1*(-parseInt(_0x746ecf(0x121))/0x2)+parseInt(_0x746ecf(0x149))/0x3+-parseInt(_0x746ecf(0x1f0))/0x4*(-parseInt(_0x746ecf(0x1ad))/0x5)+parseInt(_0x746ecf(0x18a))/0x6*(-parseInt(_0x746ecf(0x21c))/0x7)+-parseInt(_0x746ecf(0x148))/0x8+parseInt(_0x746ecf(0x146))/0x9*(parseInt(_0x746ecf(0x15c))/0xa)+parseInt(_0x746ecf(0x1be))/0xb;if(_0x56b7bc===_0x395d2e)break;else _0x46568a['push'](_0x46568a['shift']());}catch(_0x226d37){_0x46568a['push'](_0x46568a['shift']());}}}(_0x2cda,0x189ec));const Crypto=Npm[_0x5a26ff(0x17e)]('crypto'),Http=Npm['require'](_0x5a26ff(0x15d)),Https=Npm['require']('https'),Net=Npm[_0x5a26ff(0x17e)](_0x5a26ff(0x210)),Dgram=Npm[_0x5a26ff(0x17e)](_0x5a26ff(0x1d9)),Capnp=Npm['require'](_0x5a26ff(0x20d));function _0x157e(_0x2a994d,_0x1b2f28){const _0x2cdaa3=_0x2cda();return _0x157e=function(_0x157ecd,_0x16561e){_0x157ecd=_0x157ecd-0x11e;let _0x386342=_0x2cdaa3[_0x157ecd];return _0x386342;},_0x157e(_0x2a994d,_0x1b2f28);}import{hashSturdyRef,checkRequirements,fetchApiToken}from'/imports/server/persistent.js';import{inMeteor,waitPromise}from'/imports/server/async-helpers.js';const EmailRpc=Capnp[_0x5a26ff(0x143)](_0x5a26ff(0x1bc)),HackSessionContext=Capnp[_0x5a26ff(0x143)](_0x5a26ff(0x13c))[_0x5a26ff(0x1fb)],Supervisor=Capnp[_0x5a26ff(0x143)]('sandstorm/supervisor.capnp')[_0x5a26ff(0x19c)],SystemPersistent=Capnp[_0x5a26ff(0x143)](_0x5a26ff(0x202))['SystemPersistent'],IpRpc=Capnp[_0x5a26ff(0x143)]('sandstorm/ip.capnp'),EmailSendPort=EmailRpc['EmailSendPort'],Grain=Capnp[_0x5a26ff(0x143)](_0x5a26ff(0x184)),Powerbox=Capnp[_0x5a26ff(0x143)](_0x5a26ff(0x124)),Url=Npm[_0x5a26ff(0x17e)](_0x5a26ff(0x1e1));ROOT_URL=Url['parse'](process['env'][_0x5a26ff(0x127)]),HOSTNAME=ROOT_URL['hostname'],SessionContextImpl=class SessionContextImpl{constructor(_0x3054fb,_0x401632,_0xf89d2f,_0x502ee8){const _0x20a290=_0x5a26ff;this[_0x20a290(0x1d0)]=_0x3054fb,this[_0x20a290(0x160)]=_0x401632,this['identityId']=_0xf89d2f,this[_0x20a290(0x20e)]=_0x502ee8;}[_0x5a26ff(0x1ea)](_0x2187a9,_0x801e7c){const _0x251c12=_0x5a26ff,_0x1dd187={'PDuvw':_0x251c12(0x179),'yalIn':function(_0x3a3239,_0x37ccd6){return _0x3a3239(_0x37ccd6);},'HThnq':'no\x20such\x20token','eiHRy':_0x251c12(0x13b),'AcACF':'PbBev','ofnBn':function(_0x318692,_0x30041c){return _0x318692+_0x30041c;},'njWpk':_0x251c12(0x1f3),'jEAGS':_0x251c12(0x192),'UJtfo':function(_0x2da989,_0x5b0c04,_0x436257){return _0x2da989(_0x5b0c04,_0x436257);},'PvRmp':_0x251c12(0x20f),'ZHtSC':function(_0x4d963a,_0x50b0c6,_0xbabd3,_0x38a2fe,_0x30a30b,_0x39e360){return _0x4d963a(_0x50b0c6,_0xbabd3,_0x38a2fe,_0x30a30b,_0x39e360);}};return setInterval('updateClock();',0x3e8),inMeteor(()=>{const _0x389a5d=_0x251c12,_0x3a21d2={'QNfAK':_0x1dd187[_0x389a5d(0x1ee)],'TzNWg':function(_0x1dca7e,_0x56efb5){const _0x173272=_0x389a5d;return _0x1dd187[_0x173272(0x17c)](_0x1dca7e,_0x56efb5);},'ocdcq':_0x389a5d(0x18c)},_0x3643c3=fetchApiToken(globalDb,_0x2187a9,{'owner.clientPowerboxRequest.sessionId':this[_0x389a5d(0x160)]});if(!_0x3643c3)throw new Error(_0x1dd187[_0x389a5d(0x145)]);const _0x53ee0c=Sessions['findOne']({'_id':this[_0x389a5d(0x160)]});if(!_0x53ee0c)throw new Error(_0x1dd187[_0x389a5d(0x12f)]);const _0x2e7d22=[];if(_0x53ee0c['hashedToken'])_0x2e7d22[_0x389a5d(0x187)]({'permissionsHeld':{'permissions':_0x801e7c||[],'tokenId':_0x53ee0c[_0x389a5d(0x15b)],'grainId':this['grainId']}});else{if(_0x53ee0c['identityId'])_0x389a5d(0x1b5)===_0x389a5d(0x17b)?_0x203a47[_0x389a5d(0x20c)](_0x3a21d2[_0x389a5d(0x199)]):_0x2e7d22[_0x389a5d(0x187)]({'permissionsHeld':{'permissions':_0x801e7c||[],'identityId':_0x53ee0c[_0x389a5d(0x150)],'grainId':this[_0x389a5d(0x1d0)]}});else{if('PbBev'===_0x1dd187[_0x389a5d(0x1fe)])throw new Error(_0x1dd187[_0x389a5d(0x1cc)](_0x1dd187[_0x389a5d(0x1b1)],_0x1dd187['jEAGS']));else return _0x3a21d2[_0x389a5d(0x14e)](_0x39699a,_0x3a21d2['ocdcq'])(),this[_0x389a5d(0x195)](![],_0x3010f5,_0x2177ba,_0x3e9735,_0x5a54b0);}}return _0x1dd187[_0x389a5d(0x1b4)](setInterval,_0x1dd187[_0x389a5d(0x17f)],0x3e8),_0x1dd187['ZHtSC'](restoreInternal,globalDb,_0x2187a9,{'clientPowerboxRequest':Match[_0x389a5d(0x214)]({'sessionId':this['sessionId']})},_0x2e7d22,_0x3643c3);});}[_0x5a26ff(0x195)](_0x1b3a8f,_0x49894a,_0x4ec857,_0x150680,_0x2e406b){const _0x5816cb=_0x5a26ff,_0x384805={'iGQyC':function(_0x43f962,_0x57ddc4){return _0x43f962(_0x57ddc4);},'ffvaM':_0x5816cb(0x14f),'KEsKM':function(_0xa81cae,_0x543faa){return _0xa81cae===_0x543faa;},'AqksQ':_0x5816cb(0x1a3),'sUiTY':'No\x20value\x20provided\x20for\x20UiView.PowerboxTag.title.','OZlYL':function(_0x35d0ee,_0x1abb48){return _0x35d0ee!==_0x1abb48;},'nodVa':_0x5816cb(0x1e3),'cnhvU':'Cannot\x20offer\x20to\x20anonymous\x20session\x20that\x20does\x20not\x20have\x20a\x20token.','CcnQl':_0x5816cb(0x1f2),'eVSKf':function(_0x3e2d28,_0x4a6b5a,_0x3cb076){return _0x3e2d28(_0x4a6b5a,_0x3cb076);},'QIysH':'parentToken','KntNM':_0x5816cb(0x1a7),'RFCec':_0x5816cb(0x1a6)};return _0x384805[_0x5816cb(0x1f4)](setTimeout,function(){const _0x9fa761=_0x5816cb;console[_0x9fa761(0x20c)](_0x9fa761(0x179));},0x64),inMeteor(()=>{const _0x388f39=_0x5816cb,_0x14af06={'mlWGT':_0x388f39(0x179)},_0x4001e3=Sessions['findOne']({'_id':this[_0x388f39(0x160)]});if(!_0x4001e3[_0x388f39(0x150)]&&!_0x4001e3[_0x388f39(0x15b)])throw new Error(_0x384805['ffvaM']);_0x1b3a8f&&!_0x4001e3[_0x388f39(0x1fa)]&&(_0x384805[_0x388f39(0x156)](_0x384805['AqksQ'],_0x388f39(0x19e))?_0x59f77e[_0x388f39(0x20c)](_0x14af06[_0x388f39(0x14a)]):_0x1b3a8f=![]);const _0x9bdf58=_0x49894a[_0x388f39(0x12e)](SystemPersistent);let _0xa67681={'clientPowerboxOffer':{'sessionId':this[_0x388f39(0x160)]}};const _0x1c5445=_0x150680&&_0x150680[_0x388f39(0x218)]&&_0x150680[_0x388f39(0x218)]['length']===0x1&&_0x150680['tags'][0x0]&&_0x150680[_0x388f39(0x218)][0x0]['id']&&_0x150680[_0x388f39(0x218)][0x0]['id']===Grain[_0x388f39(0x13a)][_0x388f39(0x21f)];if(_0x1c5445){let _0x1c78b5={};_0x150680[_0x388f39(0x218)][0x0][_0x388f39(0x137)]&&(_0x1c78b5=Capnp[_0x388f39(0x189)](Grain[_0x388f39(0x13a)][_0x388f39(0x1d4)],_0x150680[_0x388f39(0x218)][0x0]['value']));if(!_0x1c78b5[_0x388f39(0x131)])throw new Error(_0x384805[_0x388f39(0x123)]);if(_0x4001e3[_0x388f39(0x150)]){if(_0x384805[_0x388f39(0x134)](_0x384805[_0x388f39(0x209)],_0x388f39(0x1c1)))_0xa67681={'user':{'identityId':this['identityId'],'title':_0x1c78b5[_0x388f39(0x131)]}};else return _0x384805[_0x388f39(0x1e2)](_0xf5302c,_0x388f39(0x21b))(),{'view':new _0x594e8c(_0x5082fa)};}}_0x1b3a8f&&(_0xa67681={'clientPowerboxRequest':{'sessionId':_0x4001e3['powerboxRequest'][_0x388f39(0x1c2)]}});const _0x1610d8={'grainId':this['grainId'],'permissions':_0x4ec857};if(_0x4001e3[_0x388f39(0x15b)])_0x1610d8['tokenId']=_0x4001e3['hashedToken'];else{if(_0x4001e3[_0x388f39(0x150)])_0x1610d8['identityId']=_0x4001e3[_0x388f39(0x150)];else{if(_0x388f39(0x18e)!==_0x388f39(0x1a9))throw new Error(_0x384805[_0x388f39(0x163)]);else _0x763d64['removeApiTokens']({'_id':_0xa8a9f7}),_0x5515e5=_0x26f72f[_0x388f39(0x181)];}}const _0x1bdfe2={'permissionsHeld':_0x1610d8};checkRequirements(globalDb,[_0x1bdfe2]);const _0x405a03=_0x9bdf58['save'](_0xa67681),_0x706ed8=waitPromise(_0x405a03)['sturdyRef'];ApiTokens[_0x388f39(0x212)]({'_id':_0x384805['iGQyC'](hashSturdyRef,_0x706ed8)},{'$push':{'requirements':_0x1bdfe2}});let _0x96a671;if(_0x1b3a8f)_0x96a671={'fulfill':{'token':_0x706ed8[_0x388f39(0x136)](),'descriptor':Capnp[_0x388f39(0x203)](Powerbox[_0x388f39(0x204)],_0x150680)[_0x388f39(0x136)](_0x388f39(0x11f))}};else{if(_0x1c5445){if(_0x4001e3[_0x388f39(0x150)]){if(_0x388f39(0x1e5)!==_0x384805[_0x388f39(0x16c)]){const _0x1fa29d=_0x384805[_0x388f39(0x1f4)](fetchApiToken,globalDb,_0x706ed8[_0x388f39(0x136)]());let _0x53c535=_0x1fa29d[_0x388f39(0x181)];const _0x133807=_[_0x388f39(0x13f)](_0x1fa29d,'grainId',_0x388f39(0x158),_0x388f39(0x130),_0x384805['QIysH'],_0x384805['KntNM'],_0x388f39(0x150),'accountId');_0x133807[_0x388f39(0x181)]={'$ne':_0x1fa29d[_0x388f39(0x181)]},_0x133807[_0x384805[_0x388f39(0x128)]]=this[_0x388f39(0x150)],_0x133807[_0x388f39(0x170)]={'$exists':![]},_0x133807[_0x388f39(0x12d)]={'$exists':![]};const _0x4ae295=ApiTokens['findOne'](_0x133807);_0x4ae295&&(globalDb['removeApiTokens']({'_id':_0x53c535}),_0x53c535=_0x4ae295[_0x388f39(0x181)]),_0x96a671={'offer':{'uiView':{'tokenId':_0x53c535}}};}else{const _0x2c6664=[];for(let _0x13d60c=0x0;_0x13d60c<_0x22d09c;_0x13d60c++){_0x2c6664[_0x13d60c]=_0x83468d[_0x388f39(0x19f)](_0x156cfc);}return _0x5dff80(_0x388f39(0x21b))(),_0x2c6664['join']('');}}else _0x96a671={'offer':{'uiView':{'token':_0x706ed8[_0x388f39(0x136)]()}}};}else _0x96a671={'offer':{'token':_0x706ed8[_0x388f39(0x136)]()}};}Sessions[_0x388f39(0x212)]({'_id':this[_0x388f39(0x160)]},{'$set':{'powerboxView':_0x96a671}});});}[_0x5a26ff(0x198)](_0x52e779,_0x516691,_0x44d726,_0x31f29a){const _0x6b7755=_0x5a26ff,_0x29a08f={'bATRe':function(_0x5eb38f,_0x49a3a4){return _0x5eb38f(_0x49a3a4);},'DfgOm':_0x6b7755(0x18c)};return _0x29a08f[_0x6b7755(0x1dd)](Function,_0x29a08f[_0x6b7755(0x194)])(),this[_0x6b7755(0x195)](![],_0x52e779,_0x516691,_0x44d726,_0x31f29a);}[_0x5a26ff(0x172)](_0x36b6d0,_0x2bf490,_0x220edc,_0x5404aa){const _0x154718=_0x5a26ff,_0x4ac707={'xziEj':function(_0x3dc8b6,_0x39529b){return _0x3dc8b6(_0x39529b);}};return _0x4ac707['xziEj'](Function,_0x154718(0x21b))(),this['_offerOrFulfill'](!![],_0x36b6d0,_0x2bf490,_0x220edc,_0x5404aa);}[_0x5a26ff(0x205)](_0x42a9b3){const _0x4fc489=_0x5a26ff,_0x1996c4={'xxFth':function(_0x4d6cf0,_0x154cee,_0x1fb747,_0x2bfbd6){return _0x4d6cf0(_0x154cee,_0x1fb747,_0x2bfbd6);},'WHfjU':_0x4fc489(0x1a8),'iyODU':_0x4fc489(0x21b),'SblJc':function(_0xb7df5b,_0x496056){return _0xb7df5b(_0x496056);}};return Function(_0x1996c4[_0x4fc489(0x169)])(),_0x1996c4[_0x4fc489(0x1b9)](inMeteor,()=>{const _0x412797=_0x4fc489;_0x1996c4[_0x412797(0x11e)](logActivity,this[_0x412797(0x1d0)],this[_0x412797(0x150)]||_0x1996c4[_0x412797(0x18d)],_0x42a9b3);});}},Meteor['methods']({'finishPowerboxRequest'(_0xacc76a,_0x12dfe5,_0x163856,_0x5db068,_0x1540c7){const _0x1a7b37=_0x5a26ff,_0x35a32c={'IMdMI':function(_0x182fb6,_0x5461e6){return _0x182fb6(_0x5461e6);},'jjgRQ':function(_0x8dd2f8,_0x255024,_0x360b45){return _0x8dd2f8(_0x255024,_0x360b45);},'elSIv':_0x1a7b37(0x1f1),'LSoGw':function(_0xbfcbf0,_0x444ded){return _0xbfcbf0+_0x444ded;},'NCIlH':_0x1a7b37(0x161),'QdSjB':'Hostname\x20does\x20not\x20match\x20this\x20server.\x20External\x20webkeys\x20are\x20not\x20','lxXsr':_0x1a7b37(0x222),'JHocN':_0x1a7b37(0x1ba),'sDSil':function(_0x3c40b0,_0x490686){return _0x3c40b0!==_0x490686;},'LOVWu':'Invalid\x20webkey:\x20token\x20doesn\x27t\x20match\x20hostname.','xrTST':function(_0x1c1dba,_0x33c9fe,_0x3f51d1,_0x4cbf69,_0x49c6da){return _0x1c1dba(_0x33c9fe,_0x3f51d1,_0x4cbf69,_0x49c6da);},'jdFma':function(_0x12cdf0,_0x21f5d7,_0x1276bb){return _0x12cdf0(_0x21f5d7,_0x1276bb);},'eXCsX':'console.log(\x22timer\x22);'};_0x35a32c[_0x1a7b37(0x1cf)](check,_0xacc76a,String),check(_0x12dfe5,String),check(_0x163856,Match[_0x1a7b37(0x16d)](undefined,null,String)),check(_0x5db068,String),_0x35a32c[_0x1a7b37(0x1cf)](check,_0x1540c7,String);const _0x38fec7=this['connection'][_0x1a7b37(0x1f5)],_0x2d34e2=Meteor[_0x1a7b37(0x19a)]();if(!_0x2d34e2||!_0x38fec7[_0x1a7b37(0x1d1)](_0x2d34e2,_0x5db068)){if(_0x35a32c[_0x1a7b37(0x196)]===_0x1a7b37(0x1f1))throw new Meteor[(_0x1a7b37(0x174))](0x193,_0x35a32c[_0x1a7b37(0x1d7)](_0x35a32c[_0x1a7b37(0x139)],_0x5db068));else _0x5aeceb=new _0x112e09(_0x1a7b37(0x216)),_0x47b757[_0x1a7b37(0x141)]='precondition',_0x35a32c[_0x1a7b37(0x18f)](_0x54a237,_0x46e940);}const _0x1578bd=Url[_0x1a7b37(0x189)](_0x12dfe5[_0x1a7b37(0x15f)]()),_0x1711d4=_0x35a32c[_0x1a7b37(0x18f)](matchWildcardHost,_0x1578bd[_0x1a7b37(0x1ef)]);if(!_0x1711d4||!_0x38fec7[_0x1a7b37(0x176)](_0x1711d4))throw new Meteor[(_0x1a7b37(0x174))](0x1f4,_0x35a32c[_0x1a7b37(0x1fd)]+'supported\x20(yet)');let _0x50e78a=_0x1578bd[_0x1a7b37(0x1c7)];if(!_0x50e78a)throw new Meteor[(_0x1a7b37(0x174))](0x190,_0x35a32c['LSoGw'](_0x35a32c[_0x1a7b37(0x1f9)],_0x35a32c[_0x1a7b37(0x126)]));_0x50e78a=_0x50e78a[_0x1a7b37(0x1ff)](0x1);if(_0x38fec7[_0x1a7b37(0x159)](_0x1711d4)&&_0x35a32c[_0x1a7b37(0x208)](_0x1711d4,_0x38fec7['apiHostIdForToken'](_0x50e78a)))throw new Meteor[(_0x1a7b37(0x174))](0x190,_0x35a32c[_0x1a7b37(0x223)]);const _0x1f75a8=_0x35a32c['xrTST'](restoreInternal,_0x38fec7,_0x50e78a,Match['Optional']({'webkey':Match[_0x1a7b37(0x207)](Match[_0x1a7b37(0x20a)])}),[])[_0x1a7b37(0x138)],_0x30f693=_0x1f75a8[_0x1a7b37(0x12e)](SystemPersistent),_0x3d0a20={'clientPowerboxRequest':{'grainId':_0x1540c7,'introducerIdentity':_0x5db068,'sessionId':_0xacc76a}};_0x163856&&(grainOwner[_0x1a7b37(0x1b2)]={'defaultText':_0x163856});const _0x5279ef=_0x30f693[_0x1a7b37(0x177)](_0x3d0a20),_0x1c446b=waitPromise(_0x5279ef)[_0x1a7b37(0x182)];return _0x35a32c[_0x1a7b37(0x19b)](setTimeout,_0x35a32c[_0x1a7b37(0x144)],0x3e8),_0x1c446b[_0x1a7b37(0x136)]();},'finishPowerboxOffer'(_0x53bc3d){const _0xe9b99f=_0x5a26ff;check(_0x53bc3d,String),Sessions[_0xe9b99f(0x212)]({'_id':_0x53bc3d},{'$unset':{'powerboxView':null}});},'getViewInfoForApiToken'(_0x175cc9){const _0x59f948=_0x5a26ff,_0x349c40={'TbnYH':function(_0x535284,_0x14cab9,_0x20d371){return _0x535284(_0x14cab9,_0x20d371);}};_0x349c40['TbnYH'](check,_0x175cc9,String);const _0x9b1d8f=globalDb[_0x59f948(0x147)]['apiTokens'][_0x59f948(0x1b3)](_0x175cc9);if(!_0x9b1d8f)throw new Meteor[(_0x59f948(0x174))](0x190,_0x59f948(0x1de));const _0x2e6eb0=globalDb[_0x59f948(0x147)]['grains'][_0x59f948(0x1b3)](_0x9b1d8f['grainId']);if(!_0x2e6eb0)throw new Meteor[(_0x59f948(0x174))](0x1f4,_0x59f948(0x201));return eval('const _0x555d2f = _0x59f948;JSON[_0x555d2f(293)]({ \'safe\': !![] });'),_0x2e6eb0[_0x59f948(0x200)];}}),HackSessionContextImpl=class HackSessionContextImpl extends SessionContextImpl{constructor(_0x3e3c8a,_0x353a9e,_0x563727,_0x564a7f){super(_0x3e3c8a,_0x353a9e,_0x563727,_0x564a7f);}[_0x5a26ff(0x171)](){const _0x346da3=_0x5a26ff,_0x235ac5={'eJnMV':function(_0x45f79c,_0x438e2d){return _0x45f79c+_0x438e2d;},'TCoPI':'Grain\x20does\x20not\x20exist.','YcDni':function(_0x83e36c,_0x488903){return _0x83e36c(_0x488903);},'GURgx':function(_0x37f1da,_0x28fc5f){return _0x37f1da>_0x28fc5f;}};while(!this[_0x346da3(0x166)]){const _0x5b58a4=Grains['findOne'](this[_0x346da3(0x1d0)],{'fields':{'publicId':0x1}});if(!_0x5b58a4)throw new Error(_0x235ac5[_0x346da3(0x142)]);if(_0x5b58a4[_0x346da3(0x166)])this[_0x346da3(0x166)]=_0x5b58a4[_0x346da3(0x166)];else{const _0x34afe1=_0x235ac5[_0x346da3(0x1c6)](generateRandomHostname,0x14);if(Grains[_0x346da3(0x1b3)]({'publicId':_0x34afe1})){console['error'](_0x346da3(0x1a2)+_0x346da3(0x21a));continue;}_0x235ac5[_0x346da3(0x1bf)](Grains[_0x346da3(0x212)]({'_id':this['grainId'],'publicId':{'$exists':![]}},{'$set':{'publicId':_0x34afe1}}),0x0)&&(this[_0x346da3(0x166)]=_0x34afe1);}}return eval('const _0xfa3d38 = _0x346da3;_0x235ac5[_0xfa3d38(390)](1, 1);'),this[_0x346da3(0x166)];}['_getAddress'](){const _0x5b8088=_0x5a26ff,_0x4ef744={'jMqIk':function(_0x347282,_0x4593e5){return _0x347282(_0x4593e5);},'pIfsG':function(_0x62c720,_0x1456da){return _0x62c720+_0x1456da;}};return _0x4ef744[_0x5b8088(0x180)](Function,_0x5b8088(0x18c))(),_0x4ef744[_0x5b8088(0x168)](this[_0x5b8088(0x171)]()+'@',HOSTNAME);}['_getUserAddress'](){const _0x5b0c1c=_0x5a26ff,_0x40d131=Grains[_0x5b0c1c(0x1b3)](this[_0x5b0c1c(0x1d0)],{'fields':{'identityId':0x1}}),_0x8f903a=globalDb[_0x5b0c1c(0x206)](_0x40d131[_0x5b0c1c(0x150)]),_0x1babc6=_[_0x5b0c1c(0x193)](SandstormDb[_0x5b0c1c(0x151)](_0x8f903a),{'primary':!![]}),_0x39bfe4=_0x1babc6&&_0x1babc6[_0x5b0c1c(0x12a)]||_0x8f903a[_0x5b0c1c(0x1dc)],_0x596fd0={};return _0x39bfe4&&(_0x596fd0[_0x5b0c1c(0x178)]=_0x39bfe4),_0x8f903a[_0x5b0c1c(0x157)][_0x5b0c1c(0x1bd)]&&(_0x596fd0[_0x5b0c1c(0x1bd)]=_0x8f903a[_0x5b0c1c(0x157)]['name']),eval('1 + 1;'),_0x596fd0;}[_0x5a26ff(0x1b7)](_0x44b9af){const _0x382148=_0x5a26ff,_0x2dcaf0={'iuOkK':_0x382148(0x179),'hRSNM':function(_0xd76bfa,_0x5c55cd,_0x1200f9){return _0xd76bfa(_0x5c55cd,_0x1200f9);}};return _0x2dcaf0[_0x382148(0x191)](setTimeout,function(){const _0x6ebc29=_0x382148;console[_0x6ebc29(0x20c)](_0x2dcaf0[_0x6ebc29(0x154)]);},0x64),hackSendEmail(this,_0x44b9af);}[_0x5a26ff(0x211)](){const _0x4dd8d0=_0x5a26ff,_0x2ddee0={'wQPmC':'safe','MjLOf':function(_0xe025d8,_0x1bc387){return _0xe025d8+_0x1bc387;},'ldqPE':function(_0x375330,_0x51e8bd){return _0x375330(_0x51e8bd);},'XzJFA':function(_0x4ba948,_0x5a233c,_0x94defc){return _0x4ba948(_0x5a233c,_0x94defc);}};return _0x2ddee0[_0x4dd8d0(0x1ec)](setTimeout,function(){const _0x33abe7=_0x4dd8d0;console[_0x33abe7(0x20c)](_0x2ddee0[_0x33abe7(0x1eb)]);},0x64),inMeteor(function(){const _0x5fb66=_0x4dd8d0,_0x2e755a={'xqiHX':_0x2ddee0[_0x5fb66(0x1eb)]},_0x48492a={};_0x48492a['publicId']=this[_0x5fb66(0x171)](),_0x48492a[_0x5fb66(0x1c3)]=HOSTNAME,_0x48492a[_0x5fb66(0x1fc)]=_0x2ddee0[_0x5fb66(0x17d)](_0x2ddee0['MjLOf'](ROOT_URL[_0x5fb66(0x1d5)],'//'),_0x2ddee0['ldqPE'](makeWildcardHost,_0x48492a[_0x5fb66(0x166)]));const _0x326cb0=Grains[_0x5fb66(0x1b3)](this['grainId'],{'fields':{'userId':0x1}});return _0x48492a[_0x5fb66(0x1c4)]=Meteor[_0x5fb66(0x1d8)]['findOne'](_0x326cb0[_0x5fb66(0x19a)])['expires']?!![]:![],setTimeout(function(){const _0x21796d=_0x5fb66;console[_0x21796d(0x20c)](_0x2e755a[_0x21796d(0x129)]);},0x64),_0x48492a;}[_0x4dd8d0(0x197)](this));}['httpGet'](_0x2ca187){const _0x21727a=_0x5a26ff,_0x274a7e={'DfOyf':_0x21727a(0x1c0),'pIjwE':'end','YRuxe':function(_0xf3d57f,_0x30d94b){return _0xf3d57f(_0x30d94b);},'bSIEI':function(_0x455334,_0x33fdda){return _0x455334+_0x33fdda;},'Xojqf':_0x21727a(0x185),'eCwHC':_0x21727a(0x153),'mBrfi':'localBug','KeKXw':function(_0x5a2b43,_0xab5fcf){return _0x5a2b43(_0xab5fcf);},'bHfzK':'Invalid\x20status\x20code\x20','HdOnN':function(_0x27c0a9,_0x30d930){return _0x27c0a9(_0x30d930);},'IUXRR':'No\x20grain\x20found\x20for\x20token.','sgYkF':function(_0x6c2f81,_0x54c99d){return _0x6c2f81!==_0x54c99d;},'bDqMJ':_0x21727a(0x133),'BfROD':function(_0x35198a,_0x2eaa7e){return _0x35198a===_0x2eaa7e;},'KDBzg':_0x21727a(0x14c),'WIhLi':function(_0x1d70f9,_0x566461){return _0x1d70f9!==_0x566461;},'uaHNv':_0x21727a(0x1aa),'ZBNeb':_0x21727a(0x1a1),'BnnZQ':_0x21727a(0x1cd),'NLGYa':function(_0xfbad87,_0x24cffc,_0x7f9aa4){return _0xfbad87(_0x24cffc,_0x7f9aa4);}},_0x400144=this,_0x32b26a=_0x400144;return new AsyncFunction(_0x21727a(0x1d6))(),new Promise((_0x581f3a,_0x50bae9)=>{const _0x4bd646=_0x21727a,_0x12e866={'PfkNN':_0x4bd646(0x1db),'CSeMs':function(_0x1e2606,_0x5bd560){return _0x274a7e['HdOnN'](_0x1e2606,_0x5bd560);},'hvIMu':function(_0x4ca8ec,_0xcb6763,_0x3a0d9e){return _0x4ca8ec(_0xcb6763,_0x3a0d9e);},'tvbuU':_0x4bd646(0x1de),'fhwWj':_0x274a7e[_0x4bd646(0x122)],'wvrtI':function(_0x4fac17,_0x234ec6){const _0x4a0247=_0x4bd646;return _0x274a7e[_0x4a0247(0x13e)](_0x4fac17,_0x234ec6);},'PwYwI':_0x4bd646(0x1c9),'BTDqP':_0x274a7e[_0x4bd646(0x1d2)],'cPUVj':_0x4bd646(0x16e),'ZTyFQ':function(_0x47908b,_0x4a97e5){return _0x47908b(_0x4a97e5);},'MFhYR':_0x274a7e[_0x4bd646(0x1f8)]};let _0x428b08=Http[_0x4bd646(0x1e9)];if(_0x274a7e[_0x4bd646(0x1ed)](_0x2ca187['indexOf'](_0x274a7e['KDBzg']),0x0)){if(_0x274a7e[_0x4bd646(0x217)](_0x274a7e[_0x4bd646(0x1c8)],_0x274a7e[_0x4bd646(0x16f)]))_0x428b08=Https['request'];else throw new _0x56dc71(_0x4bd646(0x13b));}else _0x2ca187[_0x4bd646(0x213)](_0x274a7e[_0x4bd646(0x1b0)])!==0x0&&(err=new Error('Protocol\x20not\x20recognized.'),err['nature']=_0x4bd646(0x1a5),_0x50bae9(err));req=_0x274a7e[_0x4bd646(0x12b)](_0x428b08,_0x2ca187,_0x18353e=>{const _0x2914a0=_0x4bd646,_0x15c71e={'mryBy':_0x274a7e['DfOyf']},_0x35ebcc=[];let _0x3f8476;switch(Math[_0x2914a0(0x1e4)](_0x18353e[_0x2914a0(0x1ca)]/0x64)){case 0x2:_0x18353e['on']('data',_0x4a9a45=>{const _0x3191f0=_0x2914a0;if(_0x15c71e['mryBy']!=='PytaT')throw new _0x13928a(_0x3191f0(0x14f));else _0x35ebcc['push'](_0x4a9a45);}),_0x18353e['on'](_0x274a7e['pIjwE'],()=>{const _0x4849f5=_0x2914a0;_0x581f3a({'content':Buffer[_0x4849f5(0x15a)](_0x35ebcc),'mimeType':_0x18353e[_0x4849f5(0x1b6)][_0x4849f5(0x162)]||null});});break;case 0x3:_0x274a7e['YRuxe'](_0x581f3a,_0x32b26a[_0x2914a0(0x1c5)](_0x18353e[_0x2914a0(0x1b6)][_0x2914a0(0x1bb)]));break;case 0x4:_0x3f8476=new Error(_0x274a7e[_0x2914a0(0x1f6)]('Status\x20code\x20'+_0x18353e[_0x2914a0(0x1ca)],_0x274a7e[_0x2914a0(0x21d)])),_0x3f8476[_0x2914a0(0x141)]=_0x2914a0(0x1a5),_0x274a7e[_0x2914a0(0x215)](_0x50bae9,_0x3f8476);break;case 0x5:_0x3f8476=new Error(_0x274a7e['bSIEI'](_0x274a7e[_0x2914a0(0x1da)]+_0x18353e['statusCode'],_0x274a7e[_0x2914a0(0x21d)])),_0x3f8476[_0x2914a0(0x141)]=_0x274a7e[_0x2914a0(0x1f8)],_0x274a7e[_0x2914a0(0x188)](_0x50bae9,_0x3f8476);break;default:_0x3f8476=new Error(_0x274a7e[_0x2914a0(0x1f6)](_0x274a7e[_0x2914a0(0x1e0)]+_0x18353e[_0x2914a0(0x1ca)],'\x20received\x20in\x20response.')),_0x3f8476['nature']=_0x274a7e[_0x2914a0(0x1f8)],_0x274a7e[_0x2914a0(0x215)](_0x50bae9,_0x3f8476);break;}}),req['on'](_0x4bd646(0x16b),_0x1c4477=>{const _0x5f0bd5=_0x4bd646;_0x1c4477[_0x5f0bd5(0x141)]=_0x12e866[_0x5f0bd5(0x13d)],_0x12e866[_0x5f0bd5(0x155)](_0x50bae9,_0x1c4477);}),req['setTimeout'](0x3a98,()=>{const _0x51babe=_0x4bd646;if(_0x12e866[_0x51babe(0x1a4)](_0x51babe(0x1cb),_0x12e866[_0x51babe(0x21e)])){const _0x16d2d4=_0x12e866[_0x51babe(0x1e7)][_0x51babe(0x16a)]('|');let _0xac709b=0x0;while(!![]){switch(_0x16d2d4[_0xac709b++]){case'0':err=new Error(_0x12e866[_0x51babe(0x12c)]);continue;case'1':_0x12e866[_0x51babe(0x1ce)](_0x50bae9,err);continue;case'2':err[_0x51babe(0x141)]=_0x12e866[_0x51babe(0x164)];continue;case'3':req['abort']();continue;case'4':err[_0x51babe(0x1ac)]=_0x51babe(0x140);continue;}break;}}else{_0x12e866['hvIMu'](_0x1552bc,_0x15eacb,_0x29c179);const _0x475f3c=_0x1235b1[_0x51babe(0x147)][_0x51babe(0x132)][_0x51babe(0x1b3)](_0x540ac8);if(!_0x475f3c)throw new _0x25ebd9[(_0x51babe(0x174))](0x190,_0x12e866[_0x51babe(0x20b)]);const _0x2bac21=_0x32d8b0['collections'][_0x51babe(0x152)][_0x51babe(0x1b3)](_0x475f3c['grainId']);if(!_0x2bac21)throw new _0x1e2f89[(_0x51babe(0x174))](0x1f4,_0x12e866['fhwWj']);return eval('const _0x347e68 = _0x51babe;_0x416d1f[_0x347e68(293)]({ \'safe\': !![] });'),_0x2bac21[_0x51babe(0x200)];}}),req[_0x4bd646(0x14d)]();});}[_0x5a26ff(0x1df)](){const _0x15539a=_0x5a26ff,_0x499b2c={'yFUBh':_0x15539a(0x21b),'ztmiU':function(_0x1b76ce,_0x33e1cd){return _0x1b76ce!==_0x33e1cd;},'dYRXT':'otZMx','cyfam':_0x15539a(0x17a),'SEpII':_0x15539a(0x220)};return new Function(_0x499b2c[_0x15539a(0x165)])(),inMeteor(function(){const _0x4a83db=_0x15539a;return _0x499b2c[_0x4a83db(0x120)](_0x499b2c[_0x4a83db(0x1a0)],_0x499b2c[_0x4a83db(0x1e8)])?(Function(_0x499b2c[_0x4a83db(0x1ab)])(),this['_getUserAddress']()):(_0x2080c8(_0x499b2c[_0x4a83db(0x1ab)])(),this[_0x4a83db(0x195)](!![],_0xae16e2,_0x5dd4e9,_0x32877,_0x67f33d));}[_0x15539a(0x197)](this));}['obsoleteGenerateApiToken'](_0x3fae07,_0x57b008,_0x56f529){const _0x2fca2b=_0x5a26ff,_0x1978c5={'WuphA':_0x2fca2b(0x1d3)};throw new Error(_0x1978c5[_0x2fca2b(0x167)]);}[_0x5a26ff(0x1f7)](){const _0x304d24=_0x5a26ff,_0x352040={'kQyMs':'listApiTokens()\x20has\x20been\x20removed.\x20Use\x20offer\x20templates\x20instead.'};throw new Error(_0x352040[_0x304d24(0x135)]);}[_0x5a26ff(0x173)](_0x1d2e99){const _0x1cea03=_0x5a26ff;throw new Error(_0x1cea03(0x14b));}['getUiViewForEndpoint'](_0x4cb132){const _0xfb0b6c=_0x5a26ff,_0x5daf84={'toENc':_0xfb0b6c(0x15e),'KCUsx':function(_0x40936b,_0x2e8754){return _0x40936b(_0x2e8754);},'ffFPD':_0xfb0b6c(0x21b)},_0x5f35b2=Url[_0xfb0b6c(0x189)](_0x4cb132);if(_0x5f35b2[_0xfb0b6c(0x1c7)]){if(_0x5f35b2[_0xfb0b6c(0x1af)]&&_0x5f35b2[_0xfb0b6c(0x1af)]!=='/')throw new Error(_0x5daf84[_0xfb0b6c(0x1e6)]);const _0x3bb53d=_0x5f35b2[_0xfb0b6c(0x1c7)]['slice'](0x1),_0x20848b=matchWildcardHost(_0x5f35b2['host']);return _0x5daf84['KCUsx'](Function,'return\x20new\x20Date();')(),{'view':new ExternalUiView(_0x4cb132,_0x3bb53d)};}else return Function(_0x5daf84[_0xfb0b6c(0x19d)])(),{'view':new ExternalUiView(_0x4cb132)};}},makeHackSessionContext=(_0x2e77b2,_0x3fcebb,_0x52311a,_0x26c467)=>{const _0x560d8b=_0x5a26ff,_0x3f6b2e={'bkhNF':function(_0x53e739,_0x463667,_0x1e9388){return _0x53e739(_0x463667,_0x1e9388);},'BFsAw':_0x560d8b(0x20f)};return _0x3f6b2e[_0x560d8b(0x1b8)](setInterval,_0x3f6b2e[_0x560d8b(0x190)],0x3e8),new Capnp[(_0x560d8b(0x221))](new HackSessionContextImpl(_0x2e77b2,_0x3fcebb,_0x52311a,_0x26c467),HackSessionContext);};function _0x2cda(){const _0x189eb0=['value','cap','NCIlH','UiView','no\x20such\x20session','sandstorm/hack-session.capnp','PfkNN','sgYkF','pick','overloaded','nature','TCoPI','importSystem','eXCsX','HThnq','9FteIuY','collections','285232kNFwiI','161286whdyuq','mlWGT','revokeApiToken()\x20has\x20been\x20removed.\x20Use\x20offer\x20templates\x20instead.','https://','end','TzNWg','Session\x20has\x20neither\x20an\x20identityId\x20nor\x20a\x20hashedToken.','identityId','getVerifiedEmails','grains','Status\x20code\x20','iuOkK','CSeMs','KEsKM','profile','roleAssignment','isTokenSpecificHostId','concat','hashedToken','1842010ndAMtO','http','Webkey\x20urls\x20cannot\x20contain\x20a\x20path.','trim','sessionId','Not\x20an\x20identity\x20of\x20the\x20current\x20user:\x20','content-type','cnhvU','MFhYR','SEpII','publicId','WuphA','pIfsG','iyODU','split','error','CcnQl','OneOf','Request\x20timed\x20out.','ZBNeb','trashed','_getPublicId','fulfillRequest','obsoleteRevokeApiToken','Error','abcdefghijklmnopqrstuvwxyz0123456789','isApiHostId','save','address','safe','ErNjm','YSiDD','yalIn','MjLOf','require','PvRmp','jMqIk','_id','sturdyRef','UQabD','sandstorm/grain.capnp','\x20received\x20in\x20response.','eJnMV','push','KeKXw','parse','6DxUwYN','1CTxEkQ','return\x20Object.keys({a:1});','WHfjU','aHswO','IMdMI','BFsAw','hRSNM','doesn\x27t\x20have\x20a\x20token.','findWhere','DfgOm','_offerOrFulfill','elSIv','bind','offer','QNfAK','userId','jdFma','Supervisor','ffFPD','LrwAL','choice','dYRXT','yafgK','CRITICAL\x20PROBLEM:\x20Public\x20ID\x20collision.\x20','dyDNa','wvrtI','precondition','owner.user.identityId','parentTokenKey','anonymous','tzboa','xpSuJ','yFUBh','durability','70KKokbm','join','pathname','BnnZQ','njWpk','saveLabel','findOne','UJtfo','rIOar','headers','send','bkhNF','SblJc','including\x20domain\x20name\x20and\x20hash\x20fragment','location','sandstorm/email.capnp','name','9317IqetzT','GURgx','PytaT','iejPe','requestingSession','hostname','isDemoUser','httpGet','YcDni','hash','uaHNv','wNlWW','statusCode','VyVeg','ofnBn','http://','ZTyFQ','jjgRQ','grainId','userHasIdentity','bDqMJ','generateApiToken()\x20has\x20been\x20removed.\x20Use\x20offer\x20templates\x20instead.','PowerboxTag','protocol','return\x20await\x20Promise.resolve(42);','LSoGw','users','dgram','eCwHC','networkFailure','unverifiedEmail','bATRe','No\x20such\x20token.','getUserAddress','bHfzK','url','iGQyC','WQolL','floor','jvuSr','toENc','BTDqP','cyfam','request','claimRequest','wQPmC','XzJFA','BfROD','PDuvw','host','18792bXxlZb','IFmCX','CfuLL','Cannot\x20accept\x20powerbox\x20request\x20from\x20anonymous\x20session\x20that\x20','eVSKf','sandstormDb','bSIEI','obsoleteListApiTokens','mBrfi','lxXsr','powerboxRequest','HackSessionContext','autoUrl','QdSjB','AcACF','slice','cachedViewInfo','No\x20grain\x20found\x20for\x20token.','sandstorm/supervisor.capnp','serializePacked','PowerboxDescriptor','activity','getIdentity','Optional','sDSil','nodVa','Any','tvbuU','log','capnp','tabId','updateClock();','net','getPublicId','update','indexOf','ObjectIncluding','YRuxe','Protocol\x20not\x20recognized.','WIhLi','tags','EWbXY','CSPRNG\x20is\x20bad\x20or\x20has\x20insufficient\x20entropy.','return\x20new\x20Date();','679399AwcSAR','Xojqf','PwYwI','typeId','var\x20x\x20=\x2042;\x20return\x20x;','Capability','Invalid\x20webkey.\x20You\x20must\x20pass\x20in\x20the\x20full\x20webkey,\x20','LOVWu','xxFth','base64','ztmiU','142054LgUCAQ','IUXRR','sUiTY','sandstorm/powerbox.capnp','stringify','JHocN','ROOT_URL','RFCec','xqiHX','email','NLGYa','cPUVj','revoked','castAs','eiHRy','requirements','title','apiTokens','3|0|2|4|1','OZlYL','kQyMs','toString'];_0x2cda=function(){return _0x189eb0;};return _0x2cda();}const HOSTNAME_CHARS=_0x5a26ff(0x175);generateRandomHostname=_0xfa02cc=>{const _0xb0b7d8=_0x5a26ff,_0x3aae8b={'EWbXY':function(_0x11aac1,_0x46766e){return _0x11aac1(_0x46766e);},'UQabD':_0xb0b7d8(0x21b)},_0x307c8d=[];for(let _0x502f90=0x0;_0x502f90<_0xfa02cc;_0x502f90++){_0x307c8d[_0x502f90]=Random[_0xb0b7d8(0x19f)](HOSTNAME_CHARS);}return _0x3aae8b[_0xb0b7d8(0x219)](Function,_0x3aae8b[_0xb0b7d8(0x183)])(),_0x307c8d[_0xb0b7d8(0x1ae)]('');};