'use strict';function _0x38d4(_0x4239d9,_0x584574){const _0x48ca1a=_0x48ca();return _0x38d4=function(_0x38d499,_0x9af28){_0x38d499=_0x38d499-0xc8;let _0x80d79c=_0x48ca1a[_0x38d499];return _0x80d79c;},_0x38d4(_0x4239d9,_0x584574);}function _0x48ca(){const _0x4eae9c=['clientId\x20matches','test\x20aedes.Server','18939437SwRYiV','closed\x20stream','closed','lFMge','client\x20instance\x20is\x20removed','KLmiO','end-of-stream','no\x20previous\x20subscriptions\x20restored','no\x20connected\x20clients','VPEKA','VwBaG','chmuF','dzRBc','MUST\x20not\x20contain\x20a\x20packet\x20identifier\x20in\x20QoS\x200','kRIUH','321wiVREi','qRGNh','should\x20not\x20receive\x20any\x20more\x20messages','wnsMZ','not\x20duplicate\x20client\x20close\x20when\x20client\x20error\x20occurs','close','inStream','JYycy','successful\x20connack','TKaQK','TnOgT','DFtDB','LXErh','sessionPresent','first\x20client\x20disconnected','jmQPY','uxfAz','JDQiA','YTSyx','WTJKr','once','SXpjX','HWIXJ','FxYSr','session\x20present\x20is\x20set\x20to\x20true','_nextId','abcde','$SYS/','NHaCS','HvqGv','EwOCw','error','testing\x20other\x20event','RwTLk','destroy','gDbsz','GSRvK','hello','gCned','packet\x20must\x20match','rTGhr','wZVRF','1238232oVrdAr','OuoIS','cmcLJ','GXhiG','subscribe','broker\x20gets\x20random\x20id\x20when\x20id\x20option\x20not\x20set','AmjjH','RzGAH','drain','SrCAy','zZqQY','RoUji','dznHU','connectedClients','messageId\x20shoud\x20reset\x20to\x201\x20if\x20it\x20reached\x2065535','closed\x20streams','XVoqV','clientDisconnect','kqwAp','hZKpX','HYxBk','KcDzf','qKphW','JgGlB','NuzCp','jzPTz','glZeF','dIsxc','QPLlD','UruXi','JPivb','1115692qodCnv','NuUlp','ksNXa','10965Bklmfv','unsubscribe\x20on\x20disconnect\x20for\x20a\x20clean=true\x20client','xfTBR','broker\x20closes\x20gracefully','SYgRp','SBAZS','PBfBf','SfVbj','DkNdB','TOVkb','ZkkDO','RYvPR','qbYDs','proxyquire','Invalid\x20messageId','10sDtHAF','pIRtt','data','unsuback','brokerId','broker','4193334GOJLcw','TZpBP','lFhUL','iGpiJ','qos','sSIqo','2\x20connected\x20clients','wJbdF','vkwBY','packet\x20received','jlBFG','LoBJd','broker\x20mq\x20closes','clear\x20drain','MQTT','world','RADfs','bDLTa','DdZtB','gNsap','cmd','clients','emit','KnAWR','geFoG','connected','plan','lpQmO','puback','BrXYw','IcmcZ','vAAGo','Jvubn','double\x20deliver','session\x20present\x20is\x20set\x20to\x20false','equal','QgbkA','MkJMs','connack','CcqCE','EJOju','forEach','GsyWz','AkxOq','YGMAh','\x20[clean=','Server','tearDown','rXojJ','gQrPl','IFaNX','ZdWbJ','yvjLL','1890xfiPdn','subscriptionsByClient','client2\x20closes','overlapping\x20sub\x20does\x20not\x20double\x20deliver','EZkyT','publish\x20empty\x20topic\x20throws\x20error','../lib/write.js','should\x20not\x20emit\x20unsubscribe','FPayo','MNada','ntzMy','cJLsb','uJXsz','zHPIU','subscribe\x20a\x20single\x20topic\x20in\x20QoS\x20','client\x20closed\x20ok','bXIoH','should\x20emit\x20error','AQnuc','LorMu','ZUgGj','client\x20connected','jsQLE','oCeFe','disconnect\x20if\x20another\x20broker\x20connects\x20the\x20same\x20clientId','Ifixp','tBXNG','../','FIWjI','gAEMH','rEyyE','gfbwd','KLktx','end','wAxhK','xEzSu','publish\x20finished','nMlRM','./helper','broker\x20closes','JRupW','DPSrj','_parser','DLLrO','no\x20error','disconnect\x20existing\x20client\x20with\x20the\x20same\x20clientId','disconnect\x20client\x20on\x20wrong\x20cmd','connect\x20without\x20a\x20clientId\x20for\x20MQTT\x203.1.1','unsubscribe\x20without\x20subscribe','fail','UCnWm','HTfnT','IgxyF','persistence','GhiSY','gZMeD','iULZl','Connect\x20not\x20yet\x20arrived','publish\x20QoS\x200','/new/clients','mAnEf','broker\x20id\x20equals\x20id\x20option\x20when\x20set','uAIEZ','pDROd','WTmaH','connectionError','do\x20not\x20restore\x20QoS\x200\x20subscriptions\x20when\x20clean','efAKz','lpCgT','WCeEp','iNjLB','ZKcpr','uhtwf','hello/#','nVGyd','KTHsr','uhsgv','deepEqual','DOwOx','FYUWX','bJVXF','Cdaol','2574WgWaiK','EYMbP','packet\x20matches','2|3|4|1|0','restore\x20QoS\x200\x20subscriptions\x20not\x20clean','OqvNy','BHSnc','BRHPY','oNEOi','connect','clientError','counter','NXqYH','double\x20execute\x20client\x20close\x20function','jduhU','unsubscribe','FfrIN','QEkyB','vewFc','arGHo','outStream','yGuwC','id\x20option','calls\x20the\x20callback','client\x20closes','message','uKNeJ','$SYS/anotherBroker/new/clients','BjVFb','IaCuL','irSxt','pjLGh','client1\x20closes','publish','smdYw','should\x20catch\x20the\x20error','disconnect\x20first\x20client','clientReady','client','VJStY','DTrhT','NJIkS','fYHdg','tap','emKtE','unsubscribe\x20on\x20disconnect\x20for\x20a\x20clean=false\x20client','LZsvo','TMXVb','bind','jhztF','pjIND','double\x20sub\x20does\x20not\x20double\x20deliver','CsrOb','subscribe\x20multipe\x20topics\x20in\x20QoS\x20','catch\x20write\x20errors','LfIOm','clean','cZvKs','LxFaX','WZAzC','write','brokerCounter','PXqVY','double\x20client\x20close\x20calls','PnVuo','second\x20client\x20connected','11168HtQXhC','icbCF','lVOfM','Njhqk','gygwv','HANYq','EtDDh','llhTc','gABNy','dbNsc','9694VytYbf','IkzLk','messageId','disconnect','odPYs','kPDHB','tuWyD','does\x20not\x20die\x20badly\x20on\x20connection\x20error','Aayob','BMHYi','callback\x20called','NPMbN','aZzGW','jhpjZ','bKItw','ILGwo','conn','MyYBR','nFWRw','pass','fxGhg','CWrtb','nPWJG','ekZZT','EvZYb','wvWEO','from'];_0x48ca=function(){return _0x4eae9c;};return _0x48ca();}const _0x59714e=_0x38d4;(function(_0x47f6df,_0x139955){const _0x4a255d=_0x38d4,_0x4a0184=_0x47f6df();while(!![]){try{const _0x39b1d5=-parseInt(_0x4a255d(0x1f2))/0x1+-parseInt(_0x4a255d(0x19c))/0x2*(parseInt(_0x4a255d(0x1c8))/0x3)+-parseInt(_0x4a255d(0x211))/0x4+parseInt(_0x4a255d(0x214))/0x5*(parseInt(_0x4a255d(0x150))/0x6)+parseInt(_0x4a255d(0xfe))/0x7*(-parseInt(_0x4a255d(0x192))/0x8)+parseInt(_0x4a255d(0xc9))/0x9+parseInt(_0x4a255d(0x223))/0xa*(parseInt(_0x4a255d(0x1b9))/0xb);if(_0x39b1d5===_0x139955)break;else _0x4a0184['push'](_0x4a0184['shift']());}catch(_0x2e1b07){_0x4a0184['push'](_0x4a0184['shift']());}}}(_0x48ca,0xaec0a));const {test}=require(_0x59714e(0x17b)),eos=require(_0x59714e(0x1bf)),{setup,connect,subscribe,subscribeMultiple,noError}=require(_0x59714e(0x124)),aedes=require(_0x59714e(0x119)),proxyquire=require(_0x59714e(0x221));test(_0x59714e(0x1b8),function(_0x5963ca){const _0x5e8fef=_0x59714e;_0x5963ca[_0x5e8fef(0xe3)](0x1);const _0x4a565a=new aedes[(_0x5e8fef(0xf7))]();_0x5963ca[_0x5e8fef(0xf8)](_0x4a565a[_0x5e8fef(0x1cd)][_0x5e8fef(0x180)](_0x4a565a)),connect(setup(_0x4a565a),{},function(){const _0x5a1a54=_0x5e8fef;_0x5963ca[_0x5a1a54(0x1af)](_0x5a1a54(0xe2));});}),test(_0x59714e(0x138),function(_0x51462f){const _0x1c7495=_0x59714e,_0x50966a={'SDXQd':_0x1c7495(0x153),'EtDDh':function(_0x42139b){return _0x42139b();},'JgGlB':_0x1c7495(0x152),'TKaQK':function(_0x20f3c7,_0x5277c8){return _0x20f3c7(_0x5277c8);},'jlBFG':_0x1c7495(0x171),'oCeFe':_0x1c7495(0x1ed),'nFWRw':_0x1c7495(0xd8)};_0x51462f['plan'](0x2);const _0x53153f=_0x50966a[_0x1c7495(0x1d1)](connect,setup());_0x51462f[_0x1c7495(0xf8)](_0x53153f[_0x1c7495(0xc8)][_0x1c7495(0x1cd)][_0x1c7495(0x180)](_0x53153f[_0x1c7495(0xc8)]));var _0x932666={'cmd':_0x50966a[_0x1c7495(0xd3)],'topic':_0x50966a[_0x1c7495(0x115)],'payload':Buffer[_0x1c7495(0x1b6)](_0x1c7495(0xd8)),'qos':0x0,'retain':![],'dup':![]};_0x53153f[_0x1c7495(0xc8)]['mq']['on'](_0x1c7495(0x1ed),function(_0x35c667,_0x219fa9){const _0x55131e=_0x1c7495,_0x5394c9=_0x50966a['SDXQd']['split']('|');let _0x3a24fc=0x0;while(!![]){switch(_0x5394c9[_0x3a24fc++]){case'0':_0x50966a[_0x55131e(0x198)](_0x219fa9);continue;case'1':_0x51462f[_0x55131e(0x14b)](_0x35c667,_0x932666,_0x50966a[_0x55131e(0x209)]);continue;case'2':_0x932666[_0x55131e(0x227)]=_0x53153f[_0x55131e(0xc8)]['id'];continue;case'3':_0x932666[_0x55131e(0x18d)]=_0x53153f[_0x55131e(0xc8)][_0x55131e(0x15b)];continue;case'4':_0x51462f['equal'](_0x35c667[_0x55131e(0x19e)],undefined,_0x55131e(0x1c6));continue;}break;}}),_0x53153f[_0x1c7495(0x1ce)][_0x1c7495(0x18c)]({'cmd':_0x50966a[_0x1c7495(0xd3)],'topic':_0x1c7495(0x1ed),'payload':_0x50966a[_0x1c7495(0x1ae)]});}),test(_0x59714e(0x200),function(_0x4d8467){const _0x36ca8d=_0x59714e,_0x34e603={'GXhiG':_0x36ca8d(0x105),'UvpQI':function(_0x4c0a09,_0x47fa18){return _0x4c0a09===_0x47fa18;},'IaCuL':'RyQYN','iGpiJ':_0x36ca8d(0x219),'lFMge':_0x36ca8d(0x225),'yjDEj':function(_0x339f88,_0x296001){return _0x339f88(_0x296001);},'qdblz':function(_0x13a585){return _0x13a585();},'bJVXF':'publish','TqiMV':_0x36ca8d(0x174),'dznHU':function(_0x22ceb0,_0x176fd4){return _0x22ceb0===_0x176fd4;},'vAAGo':_0x36ca8d(0x21b),'lxknp':_0x36ca8d(0x1ed)};_0x4d8467[_0x36ca8d(0xe3)](0x7);const _0x205c3c=connect(setup());_0x4d8467[_0x36ca8d(0xf8)](_0x205c3c[_0x36ca8d(0xc8)][_0x36ca8d(0x1cd)][_0x36ca8d(0x180)](_0x205c3c[_0x36ca8d(0xc8)]));const _0x13b96c={'cmd':_0x36ca8d(0x171),'topic':_0x36ca8d(0x1ed),'payload':'world','qos':0x1,'messageId':0x2a};var _0xd0b9f8=0x0;_0x205c3c['broker']['on'](_0x36ca8d(0x175),function(_0x8f05e7){const _0x15a77a=_0x36ca8d,_0x39c6f4={'qbYDs':function(_0x4edf94,_0x2e4cf1){return _0x34e603['yjDEj'](_0x4edf94,_0x2e4cf1);},'HWIXJ':function(_0x53620){return _0x34e603['qdblz'](_0x53620);},'wAxhK':_0x34e603[_0x15a77a(0x14e)],'QgbkA':_0x34e603['TqiMV'],'nVGyd':_0x15a77a(0x194)};if(_0x34e603[_0x15a77a(0x1fe)](_0x34e603[_0x15a77a(0xe8)],'NRwve')){_0x2333f6[_0x15a77a(0xe3)](0x1);const _0x50190a=_0x39c6f4[_0x15a77a(0x220)](_0x101024,_0x39c6f4[_0x15a77a(0x1de)](_0x4dd47e));_0x1388e7[_0x15a77a(0xf8)](_0x50190a[_0x15a77a(0xc8)][_0x15a77a(0x1cd)][_0x15a77a(0x180)](_0x50190a[_0x15a77a(0xc8)])),_0x50190a['inStream'][_0x15a77a(0x18c)]({'cmd':_0x39c6f4[_0x15a77a(0x120)],'topic':'','payload':'world'}),_0x50190a[_0x15a77a(0xc8)]['on'](_0x15a77a(0x15a),function(_0x11b5f3,_0x5e5fcf){const _0x49f5f3=_0x15a77a;_0x35b5df[_0x49f5f3(0x1af)](_0x49f5f3(0x10f));});}else subscribe(_0x4d8467,_0x205c3c,_0x34e603['lxknp'],0x1,function(){const _0x16f7c7=_0x15a77a,_0x5faa04={'DOwOx':_0x34e603[_0x16f7c7(0x1f5)]};_0x34e603['UvpQI'](_0x34e603[_0x16f7c7(0x16d)],_0x34e603[_0x16f7c7(0xcc)])?_0xb2c0cb['fail'](_0x5faa04[_0x16f7c7(0x14c)]):(_0x8f05e7[_0x16f7c7(0x1e1)]=0xffff,_0x205c3c['outStream']['on'](_0x34e603[_0x16f7c7(0x1bc)],function(_0x1ffc75){const _0xb5b77d=_0x16f7c7,_0x16fde1={'toStF':_0x39c6f4[_0xb5b77d(0xed)]};_0x1ffc75['cmd']===_0xb5b77d(0xe5)&&('KMvDC'!==_0xb5b77d(0x1b0)?_0x4d8467[_0xb5b77d(0xec)](_0x1ffc75[_0xb5b77d(0x19e)],0x2a):_0x399083[_0xb5b77d(0x1af)](_0x16fde1['toStF'])),_0x1ffc75[_0xb5b77d(0xdd)]===_0x39c6f4[_0xb5b77d(0x120)]&&(_0x39c6f4[_0xb5b77d(0x148)]!==_0xb5b77d(0x194)?_0x382a3b[_0xb5b77d(0x1af)](_0xb5b77d(0x167)):_0x4d8467[_0xb5b77d(0xec)](_0x1ffc75['messageId'],_0xd0b9f8++===0x0?0xffff:0x1));}),_0x205c3c[_0x16f7c7(0x1ce)][_0x16f7c7(0x18c)](_0x13b96c),_0x205c3c[_0x16f7c7(0x1ce)][_0x16f7c7(0x18c)](_0x13b96c));});});}),test(_0x59714e(0x103),function(_0x357eee){const _0x2bf1cd=_0x59714e,_0x1acc7a={'QoOhw':_0x2bf1cd(0x10f),'IgxyF':function(_0x38d460,_0xffb564){return _0x38d460(_0xffb564);},'gQrPl':_0x2bf1cd(0x171),'WSCFq':_0x2bf1cd(0xd8)};_0x357eee[_0x2bf1cd(0xe3)](0x1);const _0x808ffe=_0x1acc7a[_0x2bf1cd(0x132)](connect,setup());_0x357eee['tearDown'](_0x808ffe[_0x2bf1cd(0xc8)][_0x2bf1cd(0x1cd)][_0x2bf1cd(0x180)](_0x808ffe[_0x2bf1cd(0xc8)])),_0x808ffe[_0x2bf1cd(0x1ce)]['write']({'cmd':_0x1acc7a[_0x2bf1cd(0xfa)],'topic':'','payload':_0x1acc7a['WSCFq']}),_0x808ffe[_0x2bf1cd(0xc8)]['on'](_0x2bf1cd(0x15a),function(_0x16dff0,_0x34db51){const _0x1cc412=_0x2bf1cd;_0x357eee[_0x1cc412(0x1af)](_0x1acc7a['QoOhw']);});}),[{'qos':0x0,'clean':![]},{'qos':0x0,'clean':!![]},{'qos':0x1,'clean':![]},{'qos':0x1,'clean':!![]}][_0x59714e(0xf2)](function(_0x437477){const _0x12a248=_0x59714e,_0x3ef2fc={'icbCF':_0x12a248(0x171),'VzPob':_0x12a248(0xd8),'IFaNX':_0x12a248(0x1ed),'rGxvd':function(_0x265e75,_0x288a04,_0x1ccfc8){return _0x265e75(_0x288a04,_0x1ccfc8);},'JYycy':function(_0x3959b0,_0x30d254){return _0x3959b0+_0x30d254;},'LorMu':function(_0x216faf,_0x57d171){return _0x216faf+_0x57d171;},'ILGwo':_0x12a248(0xf6)};_0x3ef2fc['rGxvd'](test,_0x3ef2fc[_0x12a248(0x1cf)](_0x3ef2fc[_0x12a248(0x111)](_0x12a248(0x10c)+_0x437477[_0x12a248(0xcd)],_0x3ef2fc[_0x12a248(0x1ab)]),_0x437477['clean'])+']',function(_0x501197){const _0x1860bd=_0x12a248,_0x5e8c7b={'EZkyT':'packet\x20matches'};_0x501197['plan'](0x5);const _0x459d44=connect(setup(),{'clean':_0x437477[_0x1860bd(0x188)]});_0x501197[_0x1860bd(0xf8)](_0x459d44[_0x1860bd(0xc8)][_0x1860bd(0x1cd)][_0x1860bd(0x180)](_0x459d44[_0x1860bd(0xc8)]));const _0x44f6ae={'cmd':_0x3ef2fc[_0x1860bd(0x193)],'topic':'hello','payload':Buffer[_0x1860bd(0x1b6)](_0x3ef2fc['VzPob']),'dup':![],'length':0xc,'qos':0x0,'retain':![]},_0x13dd01=_0x437477[_0x1860bd(0x188)]?null:[{'topic':_0x1860bd(0x1ed),'qos':_0x437477[_0x1860bd(0xcd)]}];subscribe(_0x501197,_0x459d44,_0x3ef2fc[_0x1860bd(0xfb)],_0x437477[_0x1860bd(0xcd)],function(){const _0x66b9ca=_0x1860bd;_0x459d44['outStream']['once'](_0x66b9ca(0x225),function(_0x477927){const _0x59d9a2=_0x66b9ca;_0x501197['deepEqual'](_0x477927,_0x44f6ae,_0x5e8c7b[_0x59d9a2(0x102)]);}),_0x459d44[_0x66b9ca(0xc8)][_0x66b9ca(0x133)][_0x66b9ca(0xff)](_0x459d44[_0x66b9ca(0x176)],function(_0x2fa653,_0x35b082){const _0x2766d9=_0x66b9ca;_0x501197[_0x2766d9(0x14b)](_0x35b082,_0x13dd01);}),_0x459d44[_0x66b9ca(0xc8)][_0x66b9ca(0x171)]({'cmd':_0x3ef2fc[_0x66b9ca(0x193)],'topic':_0x66b9ca(0x1ed),'payload':_0x66b9ca(0xd8)});});});}),test(_0x59714e(0x186),function(_0x24d82e){const _0x158d8c=_0x59714e,_0x2cad14={'anXdH':_0x158d8c(0x1e7),'JPivb':_0x158d8c(0x173),'QEkyB':_0x158d8c(0x104),'nPWJG':function(_0x4e7a5a,_0x3ddd2d,_0x2d2198){return _0x4e7a5a(_0x3ddd2d,_0x2d2198);}};_0x24d82e['plan'](0x1);const _0x56a610=proxyquire(_0x2cad14[_0x158d8c(0x161)],{'mqtt-packet':{'writeToStream':()=>{throw Error(_0x2cad14['anXdH']);}}});var _0x535a32={'conn':{'writable':!![]},'connecting':!![],'_onError':_0x5b1ef1=>{const _0x2939be=_0x158d8c;_0x24d82e[_0x2939be(0xec)](_0x5b1ef1[_0x2939be(0x169)],'packet\x20received\x20not\x20valid',_0x2cad14[_0x2939be(0x210)]);}};_0x2cad14[_0x158d8c(0x1b2)](_0x56a610,_0x535a32,{});}),[{'qos':0x0,'clean':![]},{'qos':0x0,'clean':!![]},{'qos':0x1,'clean':![]},{'qos':0x1,'clean':!![]}][_0x59714e(0xf2)](function(_0x4eb7af){const _0x324e3a=_0x59714e,_0x397c4e={'VwBaG':function(_0x1631f7,_0x1fa2f3,_0x2ca879){return _0x1631f7(_0x1fa2f3,_0x2ca879);},'uhtwf':function(_0x265b28,_0x1d9a80){return _0x265b28(_0x1d9a80);},'wZVRF':'oBhZA','llhTc':_0x324e3a(0x1ed),'BabUJ':function(_0x5b50){return _0x5b50();},'USWdv':'publish'};_0x397c4e['VwBaG'](test,_0x324e3a(0x185)+_0x4eb7af[_0x324e3a(0xcd)]+_0x324e3a(0xf6)+_0x4eb7af[_0x324e3a(0x188)]+']',function(_0x38a22e){const _0x30d557=_0x324e3a,_0x4f5204={'HiQMk':'client\x20connected','gygwv':function(_0x22e2ff,_0x4cf665,_0xf04b79){const _0x1a9d96=_0x38d4;return _0x397c4e[_0x1a9d96(0x1c3)](_0x22e2ff,_0x4cf665,_0xf04b79);},'HgnBo':function(_0x236e1b,_0x97b136){const _0x46a94d=_0x38d4;return _0x397c4e[_0x46a94d(0x146)](_0x236e1b,_0x97b136);},'cmcLJ':_0x30d557(0x1bd),'PnVuo':_0x30d557(0x12a),'NJIkS':_0x397c4e[_0x30d557(0x1f1)],'RFSvc':_0x30d557(0x14f),'Jvubn':_0x397c4e[_0x30d557(0x199)],'RADfs':_0x30d557(0xd8)};_0x38a22e[_0x30d557(0xe3)](0x5);const _0xfb9529=connect(_0x397c4e['BabUJ'](setup),{'clean':_0x4eb7af[_0x30d557(0x188)]});_0x38a22e[_0x30d557(0xf8)](_0xfb9529[_0x30d557(0xc8)][_0x30d557(0x1cd)][_0x30d557(0x180)](_0xfb9529[_0x30d557(0xc8)]));const _0x317cab={'cmd':_0x397c4e['USWdv'],'topic':_0x397c4e[_0x30d557(0x199)],'payload':Buffer[_0x30d557(0x1b6)]('world'),'dup':![],'length':0xc,'qos':0x0,'retain':![]},_0x429883=[{'topic':_0x397c4e[_0x30d557(0x199)],'qos':_0x4eb7af[_0x30d557(0xcd)]},{'topic':_0x30d557(0xd8),'qos':_0x4eb7af['qos']}],_0x20a3ac=_0x4eb7af[_0x30d557(0x188)]?null:_0x429883;subscribeMultiple(_0x38a22e,_0xfb9529,_0x429883,[_0x4eb7af[_0x30d557(0xcd)],_0x4eb7af[_0x30d557(0xcd)]],function(){const _0x500d78=_0x30d557,_0x447166={'WTmaH':_0x4f5204[_0x500d78(0x1f4)],'kPDHB':_0x4f5204[_0x500d78(0x190)]};if(_0x4f5204[_0x500d78(0x179)]!==_0x4f5204['RFSvc'])_0xfb9529[_0x500d78(0x164)]['on'](_0x500d78(0x225),function(_0x5797c9){const _0x58d2c8=_0x500d78;_0x38a22e['deepEqual'](_0x5797c9,_0x317cab,_0x58d2c8(0x152));}),_0xfb9529[_0x500d78(0xc8)][_0x500d78(0x133)][_0x500d78(0xff)](_0xfb9529[_0x500d78(0x176)],function(_0x5e6677,_0x2345a6){const _0x541044=_0x500d78;_0x38a22e[_0x541044(0x14b)](_0x2345a6,_0x20a3ac);}),_0xfb9529[_0x500d78(0xc8)]['publish']({'cmd':_0x500d78(0x171),'topic':_0x4f5204[_0x500d78(0xe9)],'payload':_0x4f5204[_0x500d78(0xd9)]});else{const _0x39b688=_0x2b0cd6[_0x500d78(0xde)][_0x500d78(0x1e2)];_0x25d202['equal'](_0x39b688[_0x500d78(0xe2)],!![],_0x4f5204['HiQMk']),_0x4f5204[_0x500d78(0x196)](_0x2f5e0d,_0x2a134f[_0x500d78(0x1ac)],_0x3a3bc5[_0x500d78(0x1af)]['bind'](_0x1bcdbb,_0x500d78(0x168))),_0x4f5204['HgnBo'](_0x489efc,()=>{const _0x46fbbd=_0x500d78,_0xe1f497={'cDEPr':_0x447166[_0x46fbbd(0x13e)],'uFbZb':_0x447166[_0x46fbbd(0x1a1)]};_0x39b688[_0x46fbbd(0x1cd)](function(){const _0xab3214=_0x46fbbd;_0x13d500[_0xab3214(0xec)](_0x5bfe08[_0xab3214(0xde)][_0xab3214(0x1e2)],_0x37925d,_0xe1f497['cDEPr']);}),_0x5efaa6[_0x46fbbd(0xec)](_0x39b688[_0x46fbbd(0xe2)],![],'client\x20disconnected'),_0x4963d5[_0x46fbbd(0x1cd)](function(_0x5022e9){_0x456ed4['error'](_0x5022e9,_0xe1f497['uFbZb']);});});}});});}),test(_0x59714e(0x1a3),function(_0x56a1f6){const _0x4852b0=_0x59714e,_0x4a1c58={'hZKpX':'client\x20is\x20passed','gABNy':'err\x20is\x20passed','GsyWz':_0x4852b0(0x171),'jhztF':_0x4852b0(0x1ed),'HTfnT':function(_0x29e784){return _0x29e784();}};_0x56a1f6[_0x4852b0(0xe3)](0x3);const _0x28d2aa=connect(_0x4a1c58[_0x4852b0(0x131)](setup));_0x56a1f6['tearDown'](_0x28d2aa[_0x4852b0(0xc8)][_0x4852b0(0x1cd)][_0x4852b0(0x180)](_0x28d2aa[_0x4852b0(0xc8)])),_0x28d2aa[_0x4852b0(0x1ce)][_0x4852b0(0x18c)]({'cmd':'subscribe','messageId':0x2a,'subscriptions':[{'topic':_0x4a1c58[_0x4852b0(0x181)],'qos':0x0}]}),_0x28d2aa[_0x4852b0(0xc8)]['on']('clientError',function(_0x3fc2b2,_0x5487a8){const _0x47e423=_0x4852b0;_0x56a1f6['ok'](_0x3fc2b2,_0x4a1c58[_0x47e423(0x205)]),_0x56a1f6['ok'](_0x5487a8,_0x4a1c58[_0x47e423(0x19a)]);}),_0x28d2aa[_0x4852b0(0x164)]['on'](_0x4852b0(0x225),function(_0x2d0575){const _0x3e25dd=_0x4852b0;_0x28d2aa[_0x3e25dd(0x1ac)][_0x3e25dd(0x1ea)](),_0x28d2aa['broker']['publish']({'cmd':_0x4a1c58[_0x3e25dd(0xf3)],'topic':_0x4a1c58[_0x3e25dd(0x181)],'payload':Buffer['from'](_0x3e25dd(0xd8))},function(){const _0x40e0da=_0x3e25dd;_0x56a1f6[_0x40e0da(0x1af)](_0x40e0da(0x167));});});}),test('subscribe\x20should\x20have\x20messageId',function(_0x252183){const _0x4e2f34=_0x59714e,_0x297cf8={'dbNsc':function(_0x5e6994){return _0x5e6994();},'xEzSu':_0x4e2f34(0x1f6),'AfQhk':_0x4e2f34(0x1ed)};_0x252183['plan'](0x1);const _0x11edb2=connect(_0x297cf8[_0x4e2f34(0x19b)](setup));_0x252183[_0x4e2f34(0xf8)](_0x11edb2[_0x4e2f34(0xc8)][_0x4e2f34(0x1cd)]['bind'](_0x11edb2[_0x4e2f34(0xc8)])),_0x11edb2[_0x4e2f34(0x1ce)]['write']({'cmd':_0x297cf8[_0x4e2f34(0x121)],'subscriptions':[{'topic':_0x297cf8['AfQhk'],'qos':0x0}]}),_0x11edb2['broker']['on'](_0x4e2f34(0x13f),function(_0x42511a,_0x145fc4){const _0x209ce3=_0x4e2f34;_0x252183['ok'](_0x145fc4[_0x209ce3(0x169)],_0x209ce3(0x222));});}),test(_0x59714e(0x15f),function(_0x1f9b03){const _0x3210b7=_0x59714e,_0x23289f={'aTfhL':function(_0x2f478c,_0x51479b){return _0x2f478c!==_0x51479b;},'NHaCS':_0x3210b7(0xd2),'WZAzC':'hello','leZSf':_0x3210b7(0xd8),'ksNXa':_0x3210b7(0x15f),'MyYBR':function(_0x15314e,_0x1d1880,_0x1aae43){return _0x15314e(_0x1d1880,_0x1aae43);},'pjLGh':function(_0x29c1b6){return _0x29c1b6();},'DkNdB':function(_0x145d6e,_0x161d45,_0x54f616,_0x38daaf,_0x1ce248,_0x14fe8a){return _0x145d6e(_0x161d45,_0x54f616,_0x38daaf,_0x1ce248,_0x14fe8a);}};_0x1f9b03[_0x3210b7(0xe3)](0x5);const _0x45873d=_0x23289f[_0x3210b7(0x1ad)](noError,connect(_0x23289f[_0x3210b7(0x16f)](setup)),_0x1f9b03);_0x1f9b03[_0x3210b7(0xf8)](_0x45873d[_0x3210b7(0xc8)][_0x3210b7(0x1cd)][_0x3210b7(0x180)](_0x45873d[_0x3210b7(0xc8)])),_0x23289f[_0x3210b7(0x21c)](subscribe,_0x1f9b03,_0x45873d,_0x3210b7(0x1ed),0x0,function(){const _0x2bf37c=_0x3210b7,_0x5eeec9={'gZMeD':function(_0x111657,_0xb68d98){return _0x23289f['aTfhL'](_0x111657,_0xb68d98);},'ezYVK':_0x23289f[_0x2bf37c(0x1e4)],'SYgRp':'packet\x20matches','zHPIU':_0x2bf37c(0x171),'PXqVY':_0x23289f[_0x2bf37c(0x18b)],'PBfBf':_0x23289f['leZSf']};_0x45873d[_0x2bf37c(0x1ce)][_0x2bf37c(0x18c)]({'cmd':_0x23289f[_0x2bf37c(0x213)],'messageId':0x2b,'unsubscriptions':[_0x23289f[_0x2bf37c(0x18b)]]}),_0x45873d[_0x2bf37c(0x164)][_0x2bf37c(0x1dc)]('data',function(_0x3a440a){const _0xefd2db=_0x2bf37c,_0x1107de={'nMlRM':_0xefd2db(0x1e7),'CWrtb':function(_0x1b1671,_0x369d41){const _0x10780f=_0xefd2db;return _0x5eeec9[_0x10780f(0x135)](_0x1b1671,_0x369d41);},'smdYw':_0xefd2db(0x1dd),'HqjSW':_0x5eeec9['ezYVK']};_0x1f9b03[_0xefd2db(0x14b)](_0x3a440a,{'cmd':_0xefd2db(0x226),'messageId':0x2b,'dup':![],'length':0x2,'qos':0x0,'retain':![]},_0x5eeec9[_0xefd2db(0x218)]),_0x45873d[_0xefd2db(0x164)]['on'](_0xefd2db(0x225),function(_0xbf1acd){const _0x5af455=_0xefd2db;if(_0x1107de[_0x5af455(0x1b1)](_0x1107de[_0x5af455(0x172)],_0x1107de[_0x5af455(0x172)]))throw _0x451536(_0x1107de[_0x5af455(0x123)]);else _0x1f9b03[_0x5af455(0x12f)](_0x1107de['HqjSW']);}),_0x45873d['broker'][_0xefd2db(0x171)]({'cmd':_0x5eeec9[_0xefd2db(0x10b)],'topic':_0x5eeec9[_0xefd2db(0x18e)],'payload':_0x5eeec9[_0xefd2db(0x21a)]},function(){const _0x10eb74=_0xefd2db;_0x10eb74(0x197)===_0x10eb74(0x197)?_0x1f9b03[_0x10eb74(0x1af)](_0x10eb74(0x122)):_0x141b6d[_0x10eb74(0x1af)](_0x10eb74(0x10f));});});});}),test(_0x59714e(0x12e),function(_0x154f90){const _0x13a2bf=_0x59714e,_0x148cde={'wJbdF':'unsuback','zZqQY':function(_0x2eb168,_0x185a9b){return _0x2eb168(_0x185a9b);},'ZUgGj':function(_0x4c3a91){return _0x4c3a91();},'chmuF':_0x13a2bf(0x15f),'NiiNR':'data'};_0x154f90[_0x13a2bf(0xe3)](0x1);const _0x4f8439=noError(_0x148cde[_0x13a2bf(0x1fc)](connect,_0x148cde[_0x13a2bf(0x112)](setup)),_0x154f90);_0x154f90[_0x13a2bf(0xf8)](_0x4f8439[_0x13a2bf(0xc8)][_0x13a2bf(0x1cd)][_0x13a2bf(0x180)](_0x4f8439[_0x13a2bf(0xc8)])),_0x4f8439[_0x13a2bf(0x1ce)][_0x13a2bf(0x18c)]({'cmd':_0x148cde[_0x13a2bf(0x1c4)],'messageId':0x2b,'unsubscriptions':['hello']}),_0x4f8439[_0x13a2bf(0x164)][_0x13a2bf(0x1dc)](_0x148cde['NiiNR'],function(_0x2bf8ba){const _0x1ea01b=_0x13a2bf;_0x154f90[_0x1ea01b(0x14b)](_0x2bf8ba,{'cmd':_0x148cde[_0x1ea01b(0xd0)],'messageId':0x2b,'dup':![],'length':0x2,'qos':0x0,'retain':![]},_0x1ea01b(0x152));});}),test(_0x59714e(0x215),function(_0x3c5a2a){const _0xaac463=_0x59714e,_0x1617cc={'NPMbN':_0xaac463(0x225),'FIWjI':_0xaac463(0x171),'fYHdg':_0xaac463(0xd8)};_0x3c5a2a[_0xaac463(0xe3)](0x6);const _0x54da8b={'clean':!![]},_0x3fdc96=connect(setup(),_0x54da8b);_0x3c5a2a['tearDown'](_0x3fdc96[_0xaac463(0xc8)]['close']['bind'](_0x3fdc96[_0xaac463(0xc8)])),subscribe(_0x3c5a2a,_0x3fdc96,_0xaac463(0x1ed),0x0,function(){const _0x44ebd3=_0xaac463;_0x3fdc96[_0x44ebd3(0x1ac)]['destroy'](null,function(){const _0x139c2e=_0x44ebd3;_0x3c5a2a[_0x139c2e(0x1af)](_0x139c2e(0x201));}),_0x3fdc96[_0x44ebd3(0x164)]['on'](_0x1617cc[_0x44ebd3(0x1a7)],function(){const _0x5b3ee0=_0x44ebd3;_0x3c5a2a[_0x5b3ee0(0x12f)](_0x5b3ee0(0x1ca));}),_0x3fdc96[_0x44ebd3(0xc8)]['once']('unsubscribe',function(){const _0x339030=_0x44ebd3;_0x3c5a2a[_0x339030(0x1af)]('should\x20emit\x20unsubscribe');}),_0x3fdc96[_0x44ebd3(0xc8)][_0x44ebd3(0x171)]({'cmd':_0x1617cc[_0x44ebd3(0x11a)],'topic':_0x44ebd3(0x1ed),'payload':Buffer['from'](_0x1617cc[_0x44ebd3(0x17a)])},function(){const _0x165497=_0x44ebd3;_0x3c5a2a[_0x165497(0x1af)](_0x165497(0x167));});});}),test(_0x59714e(0x17d),function(_0x43a7fc){const _0x43c6c9=_0x59714e,_0x153de9={'yvjLL':'closed\x20streams','efAKz':_0x43c6c9(0x1ed),'vkwBY':_0x43c6c9(0x225),'HtCaR':'unsubscribe','yGuwC':_0x43c6c9(0x171),'VqqWu':_0x43c6c9(0xd8),'jYxmN':function(_0x49bd16,_0x4682cb,_0x1f66b2){return _0x49bd16(_0x4682cb,_0x1f66b2);}};_0x43a7fc['plan'](0x5);const _0x154c07={'clean':![]},_0x5d37ed=_0x153de9['jYxmN'](connect,setup(),_0x154c07);_0x43a7fc[_0x43c6c9(0xf8)](_0x5d37ed[_0x43c6c9(0xc8)][_0x43c6c9(0x1cd)][_0x43c6c9(0x180)](_0x5d37ed[_0x43c6c9(0xc8)])),subscribe(_0x43a7fc,_0x5d37ed,_0x153de9['efAKz'],0x0,function(){const _0x1d7c71=_0x43c6c9,_0x3841ac={'pjIND':function(_0x297ded,_0x1b70b1,_0x5d9ed8,_0x4c6274,_0x29fa7c,_0x36ca8a){return _0x297ded(_0x1b70b1,_0x5d9ed8,_0x4c6274,_0x29fa7c,_0x36ca8a);},'cppeV':_0x153de9[_0x1d7c71(0x141)],'jmQPY':_0x1d7c71(0x1ca),'ZsxzJ':_0x1d7c71(0x167)};_0x5d37ed[_0x1d7c71(0x1ac)][_0x1d7c71(0x1ea)](null,function(){const _0xc4e03c=_0x1d7c71;_0x43a7fc[_0xc4e03c(0x1af)](_0x153de9[_0xc4e03c(0xfd)]);}),_0x5d37ed[_0x1d7c71(0x164)]['on'](_0x153de9[_0x1d7c71(0xd1)],function(){const _0x20718e=_0x1d7c71;if(_0x20718e(0x16a)!==_0x20718e(0x16a)){const _0x3148c5={'pDROd':_0x20718e(0x1a6)};_0x3841ac[_0x20718e(0x182)](_0x4bcf45,_0x111664,_0x5d9fe8,_0x3841ac['cppeV'],0x0,function(){const _0x71bc49=_0x20718e;_0x11e079[_0x71bc49(0x1ac)][_0x71bc49(0x18c)]=function(_0x1f9290,_0x3c5485,_0x5cc6dd){return![];},_0xda7637[_0x71bc49(0xc8)]['publish']({'cmd':'publish','topic':_0x71bc49(0x1ed),'payload':_0x71bc49(0xd8)},function(){const _0x25f0ee=_0x71bc49;_0x5ca8f1[_0x25f0ee(0x1af)](_0x3148c5[_0x25f0ee(0x13d)]);}),_0x25718a['conn'][_0x71bc49(0x1ea)]();});}else _0x43a7fc[_0x20718e(0x12f)](_0x3841ac[_0x20718e(0x1d7)]);}),_0x5d37ed[_0x1d7c71(0xc8)][_0x1d7c71(0x1dc)](_0x153de9['HtCaR'],function(){const _0x31a30a=_0x1d7c71;_0x43a7fc[_0x31a30a(0x12f)](_0x31a30a(0x105));}),_0x5d37ed[_0x1d7c71(0xc8)][_0x1d7c71(0x171)]({'cmd':_0x153de9[_0x1d7c71(0x165)],'topic':_0x153de9[_0x1d7c71(0x141)],'payload':Buffer[_0x1d7c71(0x1b6)](_0x153de9['VqqWu'])},function(){const _0x3865c1=_0x1d7c71;if(_0x3865c1(0x130)!==_0x3865c1(0x130)){const _0x19fa6a={'EwOCw':_0x3865c1(0x1fa)};_0x333021[_0x3865c1(0xe3)](0x1);const _0x29a8fb=_0x569ad0();_0x41fcb9[_0x3865c1(0xf8)](_0x29a8fb[_0x3865c1(0x1cd)][_0x3865c1(0x180)](_0x29a8fb)),_0x53f93f(_0x24422b(_0x29a8fb)),_0x29a8fb['on']('clientReady',function(_0x323f1d){const _0x134bee=_0x3865c1,_0x41e776={'uAIEZ':_0x134bee(0x10d),'kRIUH':_0x134bee(0x15d)};_0x323f1d[_0x134bee(0x1ac)]['on'](_0x19fa6a[_0x134bee(0x1e6)],()=>{const _0x2b0932=_0x134bee;_0x107d38[_0x2b0932(0x1af)](_0x41e776[_0x2b0932(0x13c)]);}),_0x323f1d['close'](),_0x323f1d[_0x134bee(0x1ac)]['on'](_0x19fa6a[_0x134bee(0x1e6)],()=>{const _0x3ecdd6=_0x134bee;_0x2ee881[_0x3ecdd6(0x12f)](_0x41e776[_0x3ecdd6(0x1c7)]);}),_0x323f1d[_0x134bee(0x1cd)]();});}else _0x43a7fc[_0x3865c1(0x1af)](_0x3841ac['ZsxzJ']);});});}),test(_0x59714e(0x19f),function(_0x1a9312){const _0x5010ab=_0x59714e,_0x3a814e={'Aayob':function(_0x2b3067,_0x5a3ef3){return _0x2b3067(_0x5a3ef3);},'JDQiA':function(_0x359d97){return _0x359d97();},'nJqnF':_0x5010ab(0x203)};_0x1a9312['plan'](0x1);const _0x4b3f77=noError(_0x3a814e[_0x5010ab(0x1a4)](connect,_0x3a814e[_0x5010ab(0x1d9)](setup)),_0x1a9312);_0x1a9312[_0x5010ab(0xf8)](_0x4b3f77[_0x5010ab(0xc8)][_0x5010ab(0x1cd)][_0x5010ab(0x180)](_0x4b3f77['broker'])),_0x4b3f77[_0x5010ab(0xc8)]['on'](_0x3a814e['nJqnF'],function(){const _0x943700=_0x5010ab;_0x1a9312[_0x943700(0x1af)](_0x943700(0x1ba));}),_0x4b3f77[_0x5010ab(0x1ce)]['write']({'cmd':_0x5010ab(0x19f)});}),test(_0x59714e(0x12c),function(_0xe74244){const _0x2fc5b9=_0x59714e,_0xdac0ba={'oNEOi':'closed\x20stream','RZnBj':'pippo','RzGAH':function(_0x2e761f,_0x26e381,_0x4b18b1){return _0x2e761f(_0x26e381,_0x4b18b1);},'ybuYT':function(_0x2bba0a,_0x502dbf){return _0x2bba0a(_0x502dbf);}};_0xe74244[_0x2fc5b9(0xe3)](0x1);const _0x1cea93=_0xdac0ba[_0x2fc5b9(0x1f9)](noError,_0xdac0ba['ybuYT'](connect,setup()),_0xe74244);_0xe74244[_0x2fc5b9(0xf8)](_0x1cea93['broker'][_0x2fc5b9(0x1cd)][_0x2fc5b9(0x180)](_0x1cea93['broker'])),_0x1cea93[_0x2fc5b9(0xc8)]['on']('clientDisconnect',function(){const _0x2c4e12=_0x2fc5b9;_0xe74244[_0x2c4e12(0x1af)](_0xdac0ba[_0x2c4e12(0x158)]);}),_0x1cea93[_0x2fc5b9(0xc8)]['on'](_0x2fc5b9(0x175),function(_0x25e6e7){const _0x31824d=_0x2fc5b9;_0x25e6e7[_0x31824d(0x128)][_0x31824d(0xdf)]('packet',{'cmd':_0xdac0ba['RZnBj']});});}),test(_0x59714e(0x168),function(_0x19a806){const _0x29c766=_0x59714e,_0xa74511={'iNjLB':'client\x20disconnected','SrCAy':_0x29c766(0x21d),'odPYs':_0x29c766(0x113),'dcjMd':function(_0x4a471f){return _0x4a471f();},'jhRej':_0x29c766(0x1e2),'gAEMH':_0x29c766(0x175)};_0x19a806[_0x29c766(0xe3)](0x5);const _0x558bc4=_0xa74511['dcjMd'](aedes),_0x70dd6e=noError(connect(setup(_0x558bc4),{'clientId':_0xa74511['jhRej']}));_0x558bc4['on'](_0xa74511[_0x29c766(0x11b)],function(){const _0x3e8d36=_0x29c766;if(_0xa74511[_0x3e8d36(0x1fb)]!==_0x3e8d36(0x21d)){const _0x3b5399={'FPayo':_0x3e8d36(0x152)};_0x13c603[_0x3e8d36(0x164)]['on'](_0x3e8d36(0x225),function(_0x70dc7f){const _0xaa7f69=_0x3e8d36;_0x342e42[_0xaa7f69(0x14b)](_0x70dc7f,_0x1c68ac,_0x3b5399[_0xaa7f69(0x106)]);}),_0x52363c[_0x3e8d36(0xc8)][_0x3e8d36(0x133)][_0x3e8d36(0xff)](_0x4c238f[_0x3e8d36(0x176)],function(_0x45a3fb,_0x2c5b00){const _0x519223=_0x3e8d36;_0xecc2d3[_0x519223(0x14b)](_0x2c5b00,_0x4cad6b);}),_0x368bc6[_0x3e8d36(0xc8)]['publish']({'cmd':_0x3e8d36(0x171),'topic':'hello','payload':_0x3e8d36(0xd8)});}else{const _0x3130ed=_0x558bc4['clients']['abcde'];_0x19a806[_0x3e8d36(0xec)](_0x3130ed['connected'],!![],_0xa74511[_0x3e8d36(0x1a0)]),eos(_0x70dd6e[_0x3e8d36(0x1ac)],_0x19a806['pass'][_0x3e8d36(0x180)](_0x19a806,_0x3e8d36(0x168))),setImmediate(()=>{const _0x318ccc=_0x3e8d36,_0x1e9691={'DPSrj':_0x318ccc(0x1bd)};_0x3130ed['close'](function(){const _0x57d0e7=_0x318ccc;_0x19a806[_0x57d0e7(0xec)](_0x558bc4[_0x57d0e7(0xde)]['abcde'],undefined,_0x1e9691[_0x57d0e7(0x127)]);}),_0x19a806[_0x318ccc(0xec)](_0x3130ed[_0x318ccc(0xe2)],![],_0xa74511[_0x318ccc(0x144)]),_0x558bc4[_0x318ccc(0x1cd)](function(_0x1d1439){const _0x4cb06c=_0x318ccc;_0x19a806[_0x4cb06c(0x1e7)](_0x1d1439,'no\x20error');});});}});}),test(_0x59714e(0x125),function(_0x9292b9){const _0x17ff0b=_0x59714e,_0x4d7ffd={'gDbsz':function(_0x3185b7){return _0x3185b7();},'cJLsb':_0x17ff0b(0x1f7),'gfbwd':'abc','HYxBk':function(_0x510024,_0x102496){return _0x510024(_0x102496);},'KCgUI':_0x17ff0b(0x13b),'pIRtt':function(_0x49536c,_0xcc05c1){return _0x49536c===_0xcc05c1;},'kqwAp':function(_0x43f82c,_0x5accba){return _0x43f82c!==_0x5accba;},'GSRvK':_0x17ff0b(0xda),'KLmiO':_0x17ff0b(0x1bd),'EvZYb':_0x17ff0b(0x16c)};_0x9292b9[_0x17ff0b(0xe3)](0x4);const _0x11032c=_0x4d7ffd[_0x17ff0b(0x1eb)](aedes),_0x1bc371=noError(connect(_0x4d7ffd[_0x17ff0b(0x206)](setup,_0x11032c),{'clientId':_0x17ff0b(0x1e2)},function(){const _0x118fa1=_0x17ff0b,_0x2589d2={'Emmzd':function(_0x405d95,_0x3ae25c){const _0x599e5c=_0x38d4;return _0x4d7ffd[_0x599e5c(0x224)](_0x405d95,_0x3ae25c);},'tBXNG':function(_0x3eacf5,_0x2454f0){const _0xded399=_0x38d4;return _0x4d7ffd[_0xded399(0x204)](_0x3eacf5,_0x2454f0);},'hTmss':_0x4d7ffd[_0x118fa1(0x1ec)],'QPLlD':_0x4d7ffd[_0x118fa1(0x1be)]};if(_0x4d7ffd[_0x118fa1(0x1b4)]!==_0x4d7ffd[_0x118fa1(0x1b4)]){_0x60b9d8['plan'](0x2);const _0x5ab2d4=_0x4d7ffd[_0x118fa1(0x1eb)](_0x3b0232);_0x3625d0(_0x5ab2d4)['conn'][_0x118fa1(0x1ea)](),_0x538861['ok'](_0x5ab2d4['id'],_0x4d7ffd[_0x118fa1(0x109)]);const _0x2ed2e8=_0x5ce8f4({'id':_0x4d7ffd[_0x118fa1(0x11d)]});_0x4d7ffd['HYxBk'](_0x491cec,_0x2ed2e8)[_0x118fa1(0x1ac)][_0x118fa1(0x1ea)](),_0x45d8c8[_0x118fa1(0xec)](_0x2ed2e8['id'],_0x4d7ffd[_0x118fa1(0x11d)],_0x4d7ffd['KCgUI']),_0x471057['tearDown'](()=>{const _0x1a8821=_0x118fa1;_0x5ab2d4[_0x1a8821(0x1cd)](),_0x2ed2e8[_0x1a8821(0x1cd)]();});}else eos(_0x1bc371[_0x118fa1(0x1ac)],_0x9292b9[_0x118fa1(0x1af)][_0x118fa1(0x180)](_0x9292b9,_0x118fa1(0x168))),_0x11032c[_0x118fa1(0x1cd)](function(_0x23432f){const _0x46a8da=_0x118fa1,_0x23da9e={'glZeF':function(_0x2911a3,_0xd83f){return _0x2589d2['Emmzd'](_0x2911a3,_0xd83f);},'JRupW':'publish'};_0x2589d2[_0x46a8da(0x118)](_0x2589d2['hTmss'],_0x46a8da(0xda))?(_0x23da9e['glZeF'](_0x301dad['cmd'],_0x46a8da(0xe5))&&_0x422e7a['equal'](_0x205376['messageId'],0x2a),_0x23da9e[_0x46a8da(0x20c)](_0x1ade59[_0x46a8da(0xdd)],_0x23da9e[_0x46a8da(0x126)])&&_0x4bf516[_0x46a8da(0xec)](_0x5855f0[_0x46a8da(0x19e)],_0x3b24c6++===0x0?0xffff:0x1)):(_0x9292b9[_0x46a8da(0x1e7)](_0x23432f,'no\x20error'),_0x9292b9['ok'](_0x11032c['closed']),_0x9292b9[_0x46a8da(0xec)](_0x11032c[_0x46a8da(0xde)][_0x46a8da(0x1e2)],undefined,_0x2589d2[_0x46a8da(0x20e)]));});}));}),test(_0x59714e(0x217),function(_0x33f6c1){const _0xb2d62e=_0x59714e,_0x16a08a={'DFtDB':_0xb2d62e(0xd5),'GLyWC':'MXgoY','NuzCp':'2\x20connected\x20clients','BHSnc':function(_0x1c7882,_0x1f14db,_0x33b110){return _0x1c7882(_0x1f14db,_0x33b110);},'ToFwC':function(_0x5b20fa,_0x530a1c,_0x254e6b,_0x591a76){return _0x5b20fa(_0x530a1c,_0x254e6b,_0x591a76);},'wBIHx':function(_0x3a2850,_0x3396e5){return _0x3a2850(_0x3396e5);}};_0x33f6c1[_0xb2d62e(0xe3)](0x7);const _0x33e242=aedes(),_0x540d17=_0x16a08a['wBIHx'](noError,connect(setup(_0x33e242),{},function(){const _0x1865dd=noError(_0x16a08a['ToFwC'](connect,setup(_0x33e242),{},function(){const _0x5720a7=_0x38d4,_0x48903a={'CsrOb':function(_0x408119){return _0x408119();},'QuvNY':_0x16a08a[_0x5720a7(0x1d3)],'gCned':_0x5720a7(0x125),'uJXsz':_0x5720a7(0x1c1)};if(_0x5720a7(0xe4)===_0x16a08a['GLyWC']){const _0x41f38b={'usaQp':_0x5720a7(0x10d)};_0x58eaf2['plan'](0x1);const _0x21d096=_0x48903a[_0x5720a7(0x184)](_0x8fc49f);_0x328a4b['tearDown'](_0x21d096['close'][_0x5720a7(0x180)](_0x21d096)),_0xd86acd(_0x53e339(_0x21d096)),_0x21d096['on'](_0x5720a7(0x176),function(_0x19ae6f){const _0x219021=_0x5720a7,_0x3d0b23={'ShppZ':'double\x20client\x20close\x20calls'};_0x19ae6f[_0x219021(0x1ac)]['on'](_0x219021(0x1fa),()=>{const _0x49eda3=_0x219021;_0x352739[_0x49eda3(0x1af)](_0x41f38b['usaQp']);}),_0x19ae6f['close'](),_0x19ae6f[_0x219021(0x1ac)]['on']('drain',()=>{const _0x3681ef=_0x219021;_0x17f43d[_0x3681ef(0x12f)](_0x3d0b23['ShppZ']);});});}else _0x33f6c1[_0x5720a7(0xec)](_0x33e242['connectedClients'],0x2,_0x16a08a[_0x5720a7(0x20a)]),eos(_0x540d17['conn'],_0x33f6c1[_0x5720a7(0x1af)][_0x5720a7(0x180)](_0x33f6c1,_0x5720a7(0x170))),_0x16a08a[_0x5720a7(0x156)](eos,_0x1865dd['conn'],_0x33f6c1[_0x5720a7(0x1af)][_0x5720a7(0x180)](_0x33f6c1,'client2\x20closes')),_0x33e242[_0x5720a7(0x1cd)](function(_0x24201b){const _0x16ae7f=_0x5720a7;_0x33f6c1['error'](_0x24201b,'no\x20error'),_0x33f6c1['ok'](_0x33e242['mq'][_0x16ae7f(0x1bb)],_0x48903a['QuvNY']),_0x33f6c1['ok'](_0x33e242[_0x16ae7f(0x1bb)],_0x48903a[_0x16ae7f(0x1ee)]),_0x33f6c1[_0x16ae7f(0xec)](_0x33e242['connectedClients'],0x0,_0x48903a[_0x16ae7f(0x10a)]);});}));}));}),test(_0x59714e(0x1e8),function(_0x45c6d6){const _0x129d69=_0x59714e,_0x392e55={'gtLjn':function(_0x4f22e4,_0x6f90ad){return _0x4f22e4(_0x6f90ad);},'wnsMZ':'connectionError','Opfpn':_0x129d69(0x137)};_0x45c6d6[_0x129d69(0xe3)](0x1);const _0x4d280a=aedes();_0x45c6d6['tearDown'](_0x4d280a[_0x129d69(0x1cd)]['bind'](_0x4d280a));const _0x1cafbf=_0x392e55['gtLjn'](setup,_0x4d280a);_0x4d280a['on'](_0x392e55[_0x129d69(0x1cb)],function(_0x562df8,_0x38789f){_0x45c6d6['notOk'](_0x562df8['id'],null);}),_0x1cafbf['conn']['emit'](_0x129d69(0x1e7),_0x392e55['Opfpn']);}),test(_0x59714e(0x12d),function(_0x55dc37){const _0x2a0b4e=_0x59714e,_0x302706={'iULZl':_0x2a0b4e(0xef),'Ifixp':function(_0x28a557){return _0x28a557();},'emKtE':_0x2a0b4e(0x159),'jduhU':_0x2a0b4e(0xd7)};_0x55dc37[_0x2a0b4e(0xe3)](0x1);const _0x4dd56d=_0x302706[_0x2a0b4e(0x117)](setup);_0x55dc37[_0x2a0b4e(0xf8)](_0x4dd56d[_0x2a0b4e(0xc8)][_0x2a0b4e(0x1cd)]['bind'](_0x4dd56d[_0x2a0b4e(0xc8)])),_0x4dd56d[_0x2a0b4e(0x1ce)][_0x2a0b4e(0x18c)]({'cmd':_0x302706[_0x2a0b4e(0x17c)],'protocolId':_0x302706[_0x2a0b4e(0x15e)],'protocolVersion':0x4,'clean':!![],'keepalive':0x0}),_0x4dd56d[_0x2a0b4e(0x164)]['on']('data',function(_0x2a8b5a){const _0x339ee2=_0x2a0b4e;_0x55dc37['deepEqual'](_0x2a8b5a,{'cmd':_0x302706[_0x339ee2(0x136)],'returnCode':0x0,'length':0x2,'qos':0x0,'retain':![],'dup':![],'topic':null,'payload':null,'sessionPresent':![]},_0x339ee2(0x1d0));});}),test(_0x59714e(0x12b),function(_0x2b9f37){const _0x496180=_0x59714e,_0x49a3ff={'LZsvo':function(_0x162824,_0x3f87d0){return _0x162824===_0x3f87d0;},'hXBih':_0x496180(0x1d6),'LxFaX':_0x496180(0x191),'CcqCE':function(_0x1a2518,_0x461999,_0x1f31cb){return _0x1a2518(_0x461999,_0x1f31cb);},'wvWEO':function(_0x50f72b,_0x189ae6,_0x312cfd,_0xc620c3){return _0x50f72b(_0x189ae6,_0x312cfd,_0xc620c3);}};_0x2b9f37[_0x496180(0xe3)](0x2);const _0x13a194=aedes();_0x2b9f37[_0x496180(0xf8)](_0x13a194[_0x496180(0x1cd)][_0x496180(0x180)](_0x13a194));const _0x22fc38=connect(setup(_0x13a194),{'clientId':'abcde'},function(){const _0xba33a1=_0x496180,_0x521eef={'pYOQB':_0x49a3ff[_0xba33a1(0x18a)]};_0x49a3ff[_0xba33a1(0xf0)](eos,_0x22fc38[_0xba33a1(0x1ac)],function(){const _0x81c15a=_0xba33a1;_0x49a3ff[_0x81c15a(0x17e)]('TpPWx','TpPWx')?_0x2b9f37[_0x81c15a(0x1af)](_0x49a3ff['hXBih']):(_0xc1c994['error'](_0x182a94,_0x81c15a(0x12a)),_0x2b4f5d['ok'](_0x355b3e[_0x81c15a(0x1bb)]),_0x33760e[_0x81c15a(0xec)](_0x5504dd[_0x81c15a(0xde)]['abcde'],_0x498a8b,'client\x20instance\x20is\x20removed'));}),_0x49a3ff[_0xba33a1(0x1b5)](connect,setup(_0x13a194),{'clientId':_0xba33a1(0x1e2)},function(){_0x2b9f37['pass'](_0x521eef['pYOQB']);});});}),test(_0x59714e(0x116),function(_0x3dac65){const _0x218061=_0x59714e,_0x54086b={'ekZZT':_0x218061(0x160),'bXIoH':_0x218061(0x174),'YTSyx':_0x218061(0x1e2),'geFoG':function(_0x41ba77){return _0x41ba77();}};_0x3dac65[_0x218061(0xe3)](0x2);const _0x2c22ce=_0x54086b[_0x218061(0xe1)](aedes);_0x3dac65['tearDown'](_0x2c22ce['close'][_0x218061(0x180)](_0x2c22ce));const _0x5d617f=connect(setup(_0x2c22ce),{'clientId':_0x54086b[_0x218061(0x1da)]},function(){const _0x12599f=_0x218061,_0x13a6c1={'rEyyE':_0x54086b[_0x12599f(0x10e)]};eos(_0x5d617f[_0x12599f(0x1ac)],function(){const _0x4dbf08=_0x12599f;_0x3dac65[_0x4dbf08(0x1af)](_0x13a6c1[_0x4dbf08(0x11c)]);}),_0x2c22ce[_0x12599f(0x171)]({'topic':_0x12599f(0x16b),'payload':Buffer[_0x12599f(0x1b6)](_0x54086b[_0x12599f(0x1da)])},function(){const _0x379195=_0x12599f;_0x54086b[_0x379195(0x1b3)]===_0x54086b[_0x379195(0x1b3)]?_0x3dac65[_0x379195(0x1af)]('second\x20client\x20connects\x20to\x20another\x20broker'):_0x22afea['deepEqual'](_0x59737a,_0x15eac6);});});}),test('publish\x20to\x20$SYS/broker/new/clients',function(_0x550442){const _0x2018c2=_0x59714e,_0x3df657={'DTrhT':_0x2018c2(0x1e2),'keFbK':function(_0x406a6b){return _0x406a6b();},'OuoIS':function(_0x370036,_0x47b498){return _0x370036+_0x47b498;},'DLLrO':_0x2018c2(0x1e3),'lFhUL':function(_0x444ea7,_0x241efc){return _0x444ea7(_0x241efc);}};_0x550442[_0x2018c2(0xe3)](0x1);const _0x2fc810=aedes();_0x550442[_0x2018c2(0xf8)](_0x2fc810[_0x2018c2(0x1cd)]['bind'](_0x2fc810)),_0x2fc810['mq']['on'](_0x3df657[_0x2018c2(0x1f3)](_0x3df657[_0x2018c2(0x129)]+_0x2fc810['id'],_0x2018c2(0x139)),function(_0x13a3e8,_0x23ecc9){const _0x4d9a07=_0x2018c2;_0x550442['equal'](_0x13a3e8['payload']['toString'](),_0x3df657[_0x4d9a07(0x178)],_0x4d9a07(0x1b7)),_0x3df657['keFbK'](_0x23ecc9);}),connect(_0x3df657[_0x2018c2(0xcb)](setup,_0x2fc810),{'clientId':_0x2018c2(0x1e2)});}),test(_0x59714e(0x154),function(_0x2a3406){const _0x306879=_0x59714e,_0x39f58d={'NXqYH':'publish','OqvNy':_0x306879(0x225),'FxYSr':function(_0x20a061,_0x5cda14,_0x48c12b,_0x20f638){return _0x20a061(_0x5cda14,_0x48c12b,_0x20f638);},'jhpjZ':function(_0x13dfed,_0x4cb1c1,_0x42c4ab,_0x2cbdfb,_0x502c97,_0x16ba1b){return _0x13dfed(_0x4cb1c1,_0x42c4ab,_0x2cbdfb,_0x502c97,_0x16ba1b);},'uhsgv':_0x306879(0x1ed),'NVHNy':function(_0x465bf4){return _0x465bf4();},'AYejE':_0x306879(0xd8)};_0x2a3406[_0x306879(0xe3)](0x5);const _0x28d368=_0x39f58d['NVHNy'](aedes);_0x2a3406[_0x306879(0xf8)](_0x28d368['close'][_0x306879(0x180)](_0x28d368));const _0x2fe0c9={'cmd':_0x39f58d[_0x306879(0x15c)],'topic':_0x39f58d[_0x306879(0x14a)],'payload':Buffer[_0x306879(0x1b6)](_0x39f58d['AYejE']),'qos':0x0,'dup':![],'length':0xc,'retain':![]};var _0x3c683b=connect(setup(_0x28d368),{'clean':![],'clientId':_0x306879(0x1e2)},function(){const _0x594402=_0x306879;_0x39f58d[_0x594402(0x1a9)](subscribe,_0x2a3406,_0x3c683b,_0x39f58d[_0x594402(0x14a)],0x0,function(){const _0x45e077=_0x594402,_0x412df7={'irSxt':_0x39f58d[_0x45e077(0x15c)],'uxfAz':_0x45e077(0x1ed),'LoBJd':function(_0x3af554,_0x42e98b,_0x3c9c8a,_0x516ab9){return _0x3af554(_0x42e98b,_0x3c9c8a,_0x516ab9);},'mfVzn':_0x39f58d[_0x45e077(0x155)]};_0x3c683b[_0x45e077(0x1ce)][_0x45e077(0x11f)]();const _0x3a8656=_0x39f58d[_0x45e077(0x1df)](connect,setup(_0x28d368),{},function(){const _0x13b3a3=_0x45e077;_0x3c683b=_0x412df7[_0x13b3a3(0xd4)](connect,setup(_0x28d368),{'clean':![],'clientId':_0x13b3a3(0x1e2)},function(_0x3494c9){const _0x4e90dc=_0x13b3a3;_0x2a3406[_0x4e90dc(0xec)](_0x3494c9[_0x4e90dc(0x1d5)],!![],_0x4e90dc(0x1e0)),_0x3a8656[_0x4e90dc(0x1ce)]['write']({'cmd':_0x412df7[_0x4e90dc(0x16e)],'topic':_0x412df7[_0x4e90dc(0x1d8)],'payload':_0x4e90dc(0xd8),'qos':0x0});}),_0x3c683b[_0x13b3a3(0x164)][_0x13b3a3(0x1dc)](_0x412df7['mfVzn'],function(_0x5337d8){const _0x4ce373=_0x13b3a3;_0x2a3406['deepEqual'](_0x5337d8,_0x2fe0c9,_0x4ce373(0x1ef));});});});});}),test(_0x59714e(0x140),function(_0x3338ec){const _0x333e28=_0x59714e,_0xaad369={'KTHsr':_0x333e28(0x1ed),'mUWny':_0x333e28(0xd8),'TnOgT':'data','XVoqV':function(_0x2533de,_0x546bd0){return _0x2533de(_0x546bd0);},'vewFc':_0x333e28(0x145),'JaUiL':'cjDXv','RYvPR':function(_0x43b308,_0x5832b5,_0x1518bc,_0x41887e){return _0x43b308(_0x5832b5,_0x1518bc,_0x41887e);}};_0x3338ec[_0x333e28(0xe3)](0x5);const _0x12f65a=aedes();_0x3338ec[_0x333e28(0xf8)](_0x12f65a['close'][_0x333e28(0x180)](_0x12f65a));var _0x22f7a4=_0xaad369[_0x333e28(0x21f)](connect,setup(_0x12f65a),{'clean':!![],'clientId':_0x333e28(0x1e2)},function(){const _0x3bad78=_0x333e28,_0x114052={'WiKYk':_0x3bad78(0x191),'AmjjH':function(_0x6e070e,_0x517efe){const _0x4a2576=_0x3bad78;return _0xaad369[_0x4a2576(0x202)](_0x6e070e,_0x517efe);}};_0xaad369[_0x3bad78(0x162)]===_0xaad369['JaUiL']?(_0x125924(_0x112ea1[_0x3bad78(0x1ac)],function(){const _0x5e648b=_0x3bad78;_0x312c7b['pass'](_0x5e648b(0x1d6));}),_0x4e453c(_0x114052[_0x3bad78(0x1f8)](_0x2f8fc4,_0x239fb2),{'clientId':'abcde'},function(){_0x4ecc02['pass'](_0x114052['WiKYk']);})):subscribe(_0x3338ec,_0x22f7a4,_0xaad369[_0x3bad78(0x149)],0x0,function(){const _0xcf6440=_0x3bad78,_0x12d7c0={'tuWyD':_0xcf6440(0xeb),'dzRBc':_0xaad369[_0xcf6440(0x149)],'LXErh':_0xaad369['mUWny'],'cZvKs':function(_0x338988,_0x4b5384,_0x534063,_0x1c5118){return _0x338988(_0x4b5384,_0x534063,_0x1c5118);},'mAnEf':function(_0x394bea,_0x203814){return _0x394bea(_0x203814);},'jsQLE':_0xaad369[_0xcf6440(0x1d2)]};_0x22f7a4[_0xcf6440(0x1ce)][_0xcf6440(0x11f)](),_0x22f7a4[_0xcf6440(0xc8)]['persistence'][_0xcf6440(0xff)](_0x12f65a[_0xcf6440(0xde)][_0xcf6440(0x1e2)],function(_0x92e0de,_0x122520,_0x4e2b54){const _0x2548b0=_0xcf6440;_0x3338ec['equal'](_0x122520,null,_0x2548b0(0x1c0));});const _0x1b7000=connect(_0xaad369[_0xcf6440(0x202)](setup,_0x12f65a),{},function(){const _0x548ee5=_0xcf6440;_0x22f7a4=_0x12d7c0[_0x548ee5(0x189)](connect,_0x12d7c0[_0x548ee5(0x13a)](setup,_0x12f65a),{'clean':!![],'clientId':'abcde'},function(_0x3ad3e7){const _0x41d75a=_0x548ee5;_0x3338ec[_0x41d75a(0xec)](_0x3ad3e7[_0x41d75a(0x1d5)],![],_0x12d7c0[_0x41d75a(0x1a2)]),_0x1b7000[_0x41d75a(0x1ce)][_0x41d75a(0x18c)]({'cmd':_0x41d75a(0x171),'topic':_0x12d7c0[_0x41d75a(0x1c5)],'payload':_0x12d7c0[_0x41d75a(0x1d4)],'qos':0x0});}),_0x22f7a4[_0x548ee5(0x164)][_0x548ee5(0x1dc)](_0x12d7c0[_0x548ee5(0x114)],function(_0x4f7c05){const _0x4bd636=_0x548ee5;_0x3338ec[_0x4bd636(0x12f)](_0x4bd636(0xd2));});});});});}),test(_0x59714e(0x183),function(_0x1c38fe){const _0x2be712=_0x59714e,_0x1f98e1={'dIsxc':function(_0x4945ce,_0xfd781b,_0xf69cbc,_0x57b84e,_0xe07532,_0x9cbf30){return _0x4945ce(_0xfd781b,_0xf69cbc,_0x57b84e,_0xe07532,_0x9cbf30);},'HvqGv':_0x2be712(0xce),'EJOju':_0x2be712(0xd8),'HRVqO':_0x2be712(0x171),'AkxOq':_0x2be712(0x1ed),'YGMAh':function(_0x5747a3,_0x3c63b2,_0x507042,_0x474532){return _0x5747a3(_0x3c63b2,_0x507042,_0x474532);},'rXojJ':function(_0x39180f){return _0x39180f();}};_0x1c38fe['plan'](0x7);const _0x430d30={'cmd':_0x1f98e1['HRVqO'],'topic':_0x1f98e1[_0x2be712(0xf4)],'payload':Buffer['from'](_0x1f98e1[_0x2be712(0xf1)]),'dup':![],'length':0xc,'qos':0x0,'retain':![]},_0x2abb4b=_0x1f98e1[_0x2be712(0xf5)](connect,_0x1f98e1[_0x2be712(0xf9)](setup),{},function(){const _0x1b7f60=_0x2be712,_0x4152ad={'ZdWwb':function(_0x504ecf,_0x1758d4){return _0x504ecf===_0x1758d4;},'hXZQv':_0x1f98e1[_0x1b7f60(0x1e5)],'wGBMp':_0x1b7f60(0x225),'VqHKV':'publish','KnAWR':_0x1f98e1[_0x1b7f60(0xf1)]};subscribe(_0x1c38fe,_0x2abb4b,_0x1b7f60(0x1ed),0x0,function(){const _0x594af7=_0x1b7f60;_0x1f98e1[_0x594af7(0x20d)](subscribe,_0x1c38fe,_0x2abb4b,'hello',0x0,function(){const _0x2edb00=_0x594af7,_0x19ff39={'VJStY':'subscribe','GKCxn':function(_0x215106,_0x4e8a27){return _0x4152ad['ZdWwb'](_0x215106,_0x4e8a27);},'bnAEZ':_0x4152ad['hXZQv'],'gNsap':'packet\x20matches','arGHo':_0x2edb00(0x225)};_0x2abb4b['outStream']['once'](_0x4152ad['wGBMp'],function(_0x33d4bb){const _0xcbc50e=_0x2edb00,_0x279014={'xbbLi':function(_0x4e7bfd,_0x441e18){return _0x4e7bfd(_0x441e18);},'WCeEp':function(_0x473e81){return _0x473e81();},'GhiSY':_0x19ff39[_0xcbc50e(0x177)],'FYUWX':_0xcbc50e(0x13f)};if(_0x19ff39['GKCxn'](_0x19ff39['bnAEZ'],_0xcbc50e(0x208))){_0x32623b[_0xcbc50e(0xe3)](0x1);const _0x17f1a8=_0x279014['xbbLi'](_0x162ec0,_0x279014[_0xcbc50e(0x143)](_0x43369d));_0xb4694e['tearDown'](_0x17f1a8[_0xcbc50e(0xc8)]['close'][_0xcbc50e(0x180)](_0x17f1a8[_0xcbc50e(0xc8)])),_0x17f1a8['inStream']['write']({'cmd':_0x279014[_0xcbc50e(0x134)],'subscriptions':[{'topic':'hello','qos':0x0}]}),_0x17f1a8['broker']['on'](_0x279014[_0xcbc50e(0x14d)],function(_0x465401,_0x4a0152){const _0x3567a3=_0xcbc50e;_0x313b8d['ok'](_0x4a0152['message'],_0x3567a3(0x222));});}else _0x1c38fe['deepEqual'](_0x33d4bb,_0x430d30,_0x19ff39[_0xcbc50e(0xdc)]),_0x2abb4b[_0xcbc50e(0x164)]['on'](_0x19ff39[_0xcbc50e(0x163)],function(){const _0x4da4c5=_0xcbc50e;_0x1c38fe[_0x4da4c5(0x12f)](_0x4da4c5(0xea));});}),_0x2abb4b['broker'][_0x2edb00(0x171)]({'cmd':_0x4152ad['VqHKV'],'topic':_0x2edb00(0x1ed),'payload':_0x4152ad[_0x2edb00(0xe0)]});});});});_0x1c38fe[_0x2be712(0xf8)](_0x2abb4b[_0x2be712(0xc8)][_0x2be712(0x1cd)][_0x2be712(0x180)](_0x2abb4b[_0x2be712(0xc8)]));}),test(_0x59714e(0x101),function(_0x59f0e6){const _0x24f605=_0x59714e,_0x190265={'fRcCU':_0x24f605(0x20f),'rTGhr':_0x24f605(0x147),'ofFTF':_0x24f605(0x225),'MkJMs':_0x24f605(0x171),'JPaRA':_0x24f605(0x1ed),'IcmcZ':_0x24f605(0xd8),'sZgUT':function(_0x5d9799,_0x1c1e6e,_0x5fb611,_0x5795ea){return _0x5d9799(_0x1c1e6e,_0x5fb611,_0x5795ea);}};_0x59f0e6[_0x24f605(0xe3)](0x7);const _0x5098a2={'cmd':_0x190265[_0x24f605(0xee)],'topic':_0x190265['JPaRA'],'payload':Buffer[_0x24f605(0x1b6)](_0x190265[_0x24f605(0xe7)]),'dup':![],'length':0xc,'qos':0x0,'retain':![]},_0x3610e4=_0x190265['sZgUT'](connect,setup(),{},function(){const _0x2c17b0=_0x24f605,_0xcc8717={'Njhqk':_0x190265['ofFTF'],'RoUji':_0x2c17b0(0x1ed),'KcDzf':_0x2c17b0(0xd8)};subscribe(_0x59f0e6,_0x3610e4,'hello',0x0,function(){const _0x4f2b73=_0x2c17b0,_0x410dce={'TZpBP':_0x4f2b73(0x152),'BMHYi':_0x4f2b73(0x225)};if(_0x4f2b73(0x20f)===_0x190265['fRcCU'])subscribe(_0x59f0e6,_0x3610e4,_0x190265[_0x4f2b73(0x1f0)],0x0,function(){const _0x2257ba=_0x4f2b73;_0x3610e4[_0x2257ba(0x164)]['once'](_0xcc8717[_0x2257ba(0x195)],function(_0x419003){const _0x1068d7=_0x2257ba;_0x59f0e6[_0x1068d7(0x14b)](_0x419003,_0x5098a2,_0x410dce[_0x1068d7(0xca)]),_0x3610e4[_0x1068d7(0x164)]['on'](_0x410dce[_0x1068d7(0x1a5)],function(){const _0x429875=_0x1068d7;_0x59f0e6[_0x429875(0x12f)](_0x429875(0xea));});}),_0x3610e4[_0x2257ba(0xc8)][_0x2257ba(0x171)]({'cmd':_0x2257ba(0x171),'topic':_0xcc8717[_0x2257ba(0x1fd)],'payload':_0xcc8717[_0x2257ba(0x207)]});});else return![];});});_0x59f0e6[_0x24f605(0xf8)](_0x3610e4[_0x24f605(0xc8)][_0x24f605(0x1cd)][_0x24f605(0x180)](_0x3610e4[_0x24f605(0xc8)]));}),test(_0x59714e(0xd6),function(_0x25983f){const _0x465ea3=_0x59714e,_0xf5f9b1={'RwTLk':_0x465ea3(0x171),'tSsZs':function(_0x5509d9){return _0x5509d9();}};_0x25983f[_0x465ea3(0xe3)](0x4);const _0xcab2b6=connect(_0xf5f9b1['tSsZs'](setup),{},function(){const _0x38536b=_0x465ea3;subscribe(_0x25983f,_0xcab2b6,_0x38536b(0x1ed),0x0,function(){const _0xc72ef1=_0x38536b;_0xcab2b6[_0xc72ef1(0x1ac)][_0xc72ef1(0x18c)]=function(_0x5e1ddc,_0x1a3b8f,_0xb909ec){return![];},_0xcab2b6[_0xc72ef1(0xc8)][_0xc72ef1(0x171)]({'cmd':_0xf5f9b1[_0xc72ef1(0x1e9)],'topic':_0xc72ef1(0x1ed),'payload':_0xc72ef1(0xd8)},function(){const _0x5cf0ca=_0xc72ef1;_0x25983f[_0x5cf0ca(0x1af)]('callback\x20called');}),_0xcab2b6['conn'][_0xc72ef1(0x1ea)]();});});_0x25983f[_0x465ea3(0xf8)](_0xcab2b6[_0x465ea3(0xc8)][_0x465ea3(0x1cd)][_0x465ea3(0x180)](_0xcab2b6[_0x465ea3(0xc8)]));}),test(_0x59714e(0x166),function(_0x1dead9){const _0x3749be=_0x59714e,_0x1c6469={'KLktx':function(_0x3e07c0,_0x1d719c){return _0x3e07c0(_0x1d719c);},'ZdWbJ':_0x3749be(0x1f7),'lpCgT':'abc','ntzMy':_0x3749be(0x13b)};_0x1dead9[_0x3749be(0xe3)](0x2);const _0x666aa8=aedes();_0x1c6469['KLktx'](setup,_0x666aa8)['conn'][_0x3749be(0x1ea)](),_0x1dead9['ok'](_0x666aa8['id'],_0x1c6469[_0x3749be(0xfc)]);const _0x4a8fa1=_0x1c6469[_0x3749be(0x11e)](aedes,{'id':_0x1c6469['lpCgT']});setup(_0x4a8fa1)[_0x3749be(0x1ac)][_0x3749be(0x1ea)](),_0x1dead9[_0x3749be(0xec)](_0x4a8fa1['id'],_0x1c6469[_0x3749be(0x142)],_0x1c6469[_0x3749be(0x108)]),_0x1dead9[_0x3749be(0xf8)](()=>{const _0x44eb5d=_0x3749be;_0x666aa8[_0x44eb5d(0x1cd)](),_0x4a8fa1[_0x44eb5d(0x1cd)]();});}),test(_0x59714e(0x1cc),function(_0x41b071){const _0x27ac3b=_0x59714e,_0x585daa={'vYkKL':'client\x20closed\x20ok','qRGNh':_0x27ac3b(0xcf),'ZkkDO':'client1\x20closes','IkzLk':_0x27ac3b(0x100),'EYMbP':function(_0x4d9484){return _0x4d9484();},'WTJKr':function(_0x7b57c8,_0x2669cf){return _0x7b57c8(_0x2669cf);}};_0x41b071['plan'](0x1);const _0x54e70f=_0x585daa[_0x27ac3b(0x151)](aedes);_0x41b071[_0x27ac3b(0xf8)](_0x54e70f[_0x27ac3b(0x1cd)][_0x27ac3b(0x180)](_0x54e70f)),connect(_0x585daa[_0x27ac3b(0x1db)](setup,_0x54e70f)),_0x54e70f['on'](_0x27ac3b(0x176),function(_0x1d07a8){const _0x41bb7b=_0x27ac3b,_0x4671a1={'uRkaa':_0x585daa[_0x41bb7b(0x1c9)],'MNada':_0x585daa[_0x41bb7b(0x21e)],'LDGIk':_0x585daa[_0x41bb7b(0x19d)],'BRHPY':function(_0x23f8e2,_0x5e2b09){return _0x23f8e2(_0x5e2b09);},'cJKbj':'LfIOm','BrXYw':_0x41bb7b(0x18f)};_0x1d07a8[_0x41bb7b(0x1ac)]['on'](_0x41bb7b(0x1fa),()=>{_0x41b071['pass'](_0x585daa['vYkKL']);}),_0x1d07a8[_0x41bb7b(0x1cd)](),_0x1d07a8[_0x41bb7b(0x1ac)]['on'](_0x41bb7b(0x1fa),()=>{const _0x38da71=_0x41bb7b;if(_0x38da71(0x187)!==_0x4671a1['cJKbj']){const _0x102c23={'VPEKA':_0x4671a1['uRkaa'],'bKItw':function(_0x4e75df,_0x267919,_0x592533){return _0x4e75df(_0x267919,_0x592533);},'TMXVb':_0x4671a1[_0x38da71(0x107)],'VNexk':_0x4671a1['LDGIk']},_0x566b09=_0x4671a1[_0x38da71(0x157)](_0x1e3a17,_0x52f668(_0x4f5083(_0x49ec1c),{},function(){const _0x14a793=_0x38da71;_0x1fb2d9[_0x14a793(0xec)](_0x4cce66[_0x14a793(0x1ff)],0x2,_0x102c23[_0x14a793(0x1c2)]),_0x102c23[_0x14a793(0x1aa)](_0x4aa414,_0x1d50f1[_0x14a793(0x1ac)],_0x21f1a7[_0x14a793(0x1af)][_0x14a793(0x180)](_0x1ebf87,_0x102c23[_0x14a793(0x17f)])),_0x102c23[_0x14a793(0x1aa)](_0x2a769f,_0x566b09[_0x14a793(0x1ac)],_0x64bd35[_0x14a793(0x1af)][_0x14a793(0x180)](_0xebaf71,_0x102c23['VNexk'])),_0x43bfa7[_0x14a793(0x1cd)](function(_0x4abf15){const _0x96a7b2=_0x14a793;_0x3b60f3[_0x96a7b2(0x1e7)](_0x4abf15,_0x96a7b2(0x12a)),_0x24bc61['ok'](_0x53e0ef['mq'][_0x96a7b2(0x1bb)],_0x96a7b2(0xd5)),_0x120d1d['ok'](_0x3a1394[_0x96a7b2(0x1bb)],'broker\x20closes'),_0x312022['equal'](_0x29873d['connectedClients'],0x0,'no\x20connected\x20clients');});}));}else _0x41b071[_0x38da71(0x12f)](_0x4671a1[_0x38da71(0xe6)]);});});}),test('not\x20duplicate\x20client\x20close\x20when\x20double\x20close()\x20called',function(_0x4c5728){const _0x322274=_0x59714e,_0x4c6192={'NuUlp':function(_0x2fbf64,_0x2f188c){return _0x2fbf64!==_0x2f188c;},'PbVOr':_0x322274(0x1a8),'cENAS':_0x322274(0xdb),'XeCUX':'drain','zjeIc':function(_0x3557c3){return _0x3557c3();},'xfTBR':function(_0x3b87ab,_0x2d3d4c){return _0x3b87ab(_0x2d3d4c);}};_0x4c5728[_0x322274(0xe3)](0x1);const _0x30d439=_0x4c6192['zjeIc'](aedes);_0x4c5728[_0x322274(0xf8)](_0x30d439[_0x322274(0x1cd)]['bind'](_0x30d439)),_0x4c6192[_0x322274(0x216)](connect,setup(_0x30d439)),_0x30d439['on'](_0x322274(0x175),function(_0x358cfc){const _0x8467c1=_0x322274,_0xf47a6e={'jzPTz':_0x8467c1(0x226),'AQnuc':'packet\x20matches'};_0x358cfc['conn']['on'](_0x4c6192['XeCUX'],()=>{const _0x304be5=_0x8467c1;_0x4c5728[_0x304be5(0x1af)](_0x304be5(0x10d));}),_0x358cfc[_0x8467c1(0x1cd)](),_0x358cfc['conn']['on'](_0x4c6192['XeCUX'],()=>{const _0x2d5cb2=_0x8467c1;_0x4c6192[_0x2d5cb2(0x212)](_0x4c6192['PbVOr'],_0x4c6192['cENAS'])?_0x4c5728[_0x2d5cb2(0x12f)](_0x2d5cb2(0x15d)):_0xfd752f[_0x2d5cb2(0x14b)](_0x214e23,{'cmd':_0xf47a6e[_0x2d5cb2(0x20b)],'messageId':0x2b,'dup':![],'length':0x2,'qos':0x0,'retain':![]},_0xf47a6e[_0x2d5cb2(0x110)]);}),_0x358cfc['close']();});});