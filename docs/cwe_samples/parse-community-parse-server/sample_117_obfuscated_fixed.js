const _0x10a57d=_0x5239;function _0x454a(){const _0x3cf06f=['ImDGI','AuthenticationController','/check','gZyHG','5485680uwAKKR','should\x20return\x20an\x20empty\x20misspellings\x20array','status','/spelling/check','LKtZh','on\x20successful\x20call','egyPt','pCFsb','DqeSv','64992tEDydQ','6UiUVKw','should\x20send\x20a\x20request\x20to\x20the\x20spelling\x20host','8421nGrEhI','sinon','equal','1272eOyPRv','RAcXr','called','session','CPbLe','method','yYzIS','should','YkwZa','RRiMm','vloiR','request','nJoMp','controller','Surer','error','English','10459431MKNEYe','hIBvr','WGlPi','IPckS','POST','userId','user-id-123','should\x20add\x20an\x20error\x20callback\x20to\x20the\x20request','DCAzF','when\x20the\x20requested\x20language\x20is\x20not\x20supported','calledWith','headers','sandboxed-module','_id','NSaLn','BMkow','should\x20return\x20a\x20422\x20status','JJFBY','KvPjv','6|0|1|4|3|2|5','1315116gZdqqG','BlCtM','207xbiocs','requestStreamOn','split','Fiuhu','NRHAV','BwWHe','req','ZuYoL','123nd3ijdks','MijTK','require','should\x20not\x20send\x20a\x20request\x20to\x20the\x20spelling\x20host','2052130vWuuDW','xiUXC','mbkzK','1141848LwXbdv','daWKq','LvfYe','../helpers/MockResponse','stub','FeSvA','SpellingController','json','body','res','blab','returns','requestStreamPipe','mBKNC','../../../../app/src/Features/Spelling/SpellingController.js','user','http://spelling.service.test','join','French','proxyCheckRequestToSpellingApi','gCsOf'];_0x454a=function(){return _0x3cf06f;};return _0x454a();}(function(_0x188f0f,_0x5a88e4){const _0x4b5fee=_0x5239,_0x44953e=_0x188f0f();while(!![]){try{const _0x4d83c7=-parseInt(_0x4b5fee(0x122))/0x1+parseInt(_0x4b5fee(0x111))/0x2+-parseInt(_0x4b5fee(0x113))/0x3*(-parseInt(_0x4b5fee(0x144))/0x4)+-parseInt(_0x4b5fee(0x11f))/0x5*(parseInt(_0x4b5fee(0x145))/0x6)+parseInt(_0x4b5fee(0x147))/0x7*(-parseInt(_0x4b5fee(0x14a))/0x8)+parseInt(_0x4b5fee(0x15b))/0x9+-parseInt(_0x4b5fee(0x13b))/0xa;if(_0x4d83c7===_0x5a88e4)break;else _0x44953e['push'](_0x44953e['shift']());}catch(_0x5bf76e){_0x44953e['push'](_0x44953e['shift']());}}}(_0x454a,0x9e606));const SandboxedModule=require(_0x10a57d(0x109)),sinon=require(_0x10a57d(0x148)),MockResponse=require(_0x10a57d(0x125)),modulePath=require('path')[_0x10a57d(0x133)](__dirname,_0x10a57d(0x130)),TEN_SECONDS=0x3e8*0xa,SPELLING_HOST=_0x10a57d(0x132),SPELLING_URL=_0x10a57d(0x132);function _0x5239(_0x6570c9,_0x1b5c80){const _0x454a0a=_0x454a();return _0x5239=function(_0x52391c,_0x5e63b5){_0x52391c=_0x52391c-0x100;let _0x49a83f=_0x454a0a[_0x52391c];return _0x49a83f;},_0x5239(_0x6570c9,_0x1b5c80);}describe(_0x10a57d(0x128),function(){const _0x177908=_0x10a57d,_0x2e9ce1={'gZyHG':_0x177908(0x158),'BwWHe':_0x177908(0x134),'gCsOf':function(_0x5aa78f,_0x334da6){return _0x5aa78f!==_0x334da6;},'NSaLn':function(_0x58461e,_0x514728,_0x3e5079){return _0x58461e(_0x514728,_0x3e5079);},'xiUXC':_0x177908(0x154),'IVKTG':_0x177908(0x14e),'KvPjv':_0x177908(0x12c),'WGlPi':function(_0x111c4f,_0x2cd180,_0x2c28b5){return _0x111c4f(_0x2cd180,_0x2c28b5);},'yYzIS':_0x177908(0x10d),'xXkSR':function(_0x2a3f80,_0x2b6492,_0x503038){return _0x2a3f80(_0x2b6492,_0x503038);},'RRiMm':function(_0x48687f,_0x9c05d9,_0xde6e2c){return _0x48687f(_0x9c05d9,_0xde6e2c);},'xUTdH':'when\x20no\x20language\x20is\x20indicated','DCAzF':'proxyCheckRequestToSpellingApi'},_0x579df9=_0x177908(0x11b);beforeEach(function(){const _0x3a8cd0=_0x177908;if(_0x2e9ce1[_0x3a8cd0(0x13a)]!==_0x2e9ce1[_0x3a8cd0(0x13a)])this['request'][_0x3a8cd0(0x14c)][_0x3a8cd0(0x151)]['equal'](![]);else{const _0x4aed02=_0x3a8cd0(0x110)[_0x3a8cd0(0x115)]('|');let _0x588f1e=0x0;while(!![]){switch(_0x4aed02[_0x588f1e++]){case'0':this[_0x3a8cd0(0x114)]=sinon[_0x3a8cd0(0x126)]()[_0x3a8cd0(0x12d)]({'pipe':this['requestStreamPipe']});continue;case'1':this['request']=sinon[_0x3a8cd0(0x126)]()[_0x3a8cd0(0x12d)]({'on':this[_0x3a8cd0(0x114)]});continue;case'2':this['req']={'url':_0x3a8cd0(0x13e),'method':_0x3a8cd0(0x101),'params':{},'session':{'user':{'_id':_0x579df9}},'headers':{'Host':SPELLING_HOST}};continue;case'3':this['controller']=SandboxedModule[_0x3a8cd0(0x11d)](modulePath,{'requires':{'./LearnedWordsManager':{},'request':this[_0x3a8cd0(0x155)],'@overleaf/settings':{'languages':[{'name':_0x3a8cd0(0x15a),'code':'en'},{'name':_0x2e9ce1[_0x3a8cd0(0x118)],'code':'fr'}],'apis':{'spelling':{'host':SPELLING_HOST,'url':SPELLING_URL}}},'../Authentication/AuthenticationController':this['AuthenticationController']}});continue;case'4':this[_0x3a8cd0(0x138)]={'getLoggedInUserId':_0x3dcd57=>_0x3dcd57['session'][_0x3a8cd0(0x131)][_0x3a8cd0(0x10a)]};continue;case'5':this['res']=new MockResponse();continue;case'6':this[_0x3a8cd0(0x12e)]=sinon[_0x3a8cd0(0x126)]();continue;}break;}}}),describe(_0x2e9ce1[_0x177908(0x105)],function(){const _0x40f183=_0x177908,_0x17f659={'FeSvA':_0x40f183(0x14b),'MijTK':_0x40f183(0x142),'weXMO':function(_0x51b72b,_0x3e1c61){const _0x33b930=_0x40f183;return _0x2e9ce1[_0x33b930(0x136)](_0x51b72b,_0x3e1c61);},'JJFBY':_0x40f183(0x159),'mBKNC':function(_0x580be2,_0x159fe8){return _0x580be2(_0x159fe8);},'LvfYe':_0x40f183(0x146),'egyPt':function(_0x8fc1af,_0x630f40,_0x439be5){const _0x5dc761=_0x40f183;return _0x2e9ce1[_0x5dc761(0x10b)](_0x8fc1af,_0x630f40,_0x439be5);},'DqeSv':_0x2e9ce1[_0x40f183(0x120)],'mbkzK':_0x2e9ce1['IVKTG'],'ZuYoL':_0x40f183(0x103),'daWKq':_0x2e9ce1[_0x40f183(0x10f)],'nJoMp':_0x40f183(0x11e),'BlCtM':_0x40f183(0x13c),'IPckS':function(_0x208b1d,_0x2cd3ec,_0x5db918){const _0x567890=_0x40f183;return _0x2e9ce1[_0x567890(0x15d)](_0x208b1d,_0x2cd3ec,_0x5db918);},'NRHAV':function(_0x128ea2,_0x42cc5f){return _0x128ea2(_0x42cc5f);},'ImDGI':function(_0x478529,_0x3458c0,_0x4647b2){return _0x478529(_0x3458c0,_0x4647b2);},'hIBvr':_0x2e9ce1[_0x40f183(0x150)]};_0x2e9ce1['xXkSR'](describe,_0x40f183(0x140),function(){const _0x2c1897=_0x40f183,_0x280bd2={'Fiuhu':function(_0x4093f8,_0x1aa39e){return _0x17f659['weXMO'](_0x4093f8,_0x1aa39e);},'LKtZh':_0x17f659[_0x2c1897(0x10e)]};_0x17f659[_0x2c1897(0x12f)](beforeEach,function(){const _0x16eb7b=_0x2c1897;this[_0x16eb7b(0x119)]['session'][_0x16eb7b(0x131)]['_id']=this['userId']=_0x16eb7b(0x103),this[_0x16eb7b(0x119)]['body']={'language':'en','words':[_0x16eb7b(0x12c)]},this[_0x16eb7b(0x157)]['proxyCheckRequestToSpellingApi'](this[_0x16eb7b(0x119)],this[_0x16eb7b(0x12b)]);}),it(_0x17f659[_0x2c1897(0x124)],function(){const _0x47eaf1=_0x2c1897;this['request'][_0x47eaf1(0x107)]({'url':SPELLING_URL+'/user/'+this[_0x47eaf1(0x102)]+_0x47eaf1(0x139),'method':this[_0x47eaf1(0x119)][_0x47eaf1(0x14f)],'headers':this[_0x47eaf1(0x119)][_0x47eaf1(0x108)],'json':this[_0x47eaf1(0x119)][_0x47eaf1(0x12a)],'timeout':TEN_SECONDS})['should']['equal'](!![]);}),_0x17f659[_0x2c1897(0x141)](it,'should\x20stream\x20the\x20response\x20to\x20the\x20request',function(){const _0x28a215=_0x2c1897;_0x17f659[_0x28a215(0x127)]===_0x17f659[_0x28a215(0x11c)]?this[_0x28a215(0x155)][_0x28a215(0x14c)]['should'][_0x28a215(0x149)](![]):this[_0x28a215(0x12e)][_0x28a215(0x107)](this[_0x28a215(0x12b)])[_0x28a215(0x151)][_0x28a215(0x149)](!![]);}),it(_0x2c1897(0x104),function(){const _0x52132d=_0x2c1897;_0x280bd2[_0x52132d(0x116)](_0x52132d(0x152),_0x52132d(0x10c))?this['requestStreamOn'][_0x52132d(0x107)](_0x280bd2[_0x52132d(0x13f)])['should']['equal'](!![]):this[_0x52132d(0x12b)][_0x52132d(0x129)][_0x52132d(0x107)]({'misspellings':[]})[_0x52132d(0x151)][_0x52132d(0x149)](!![]);});}),_0x2e9ce1[_0x40f183(0x153)](describe,_0x40f183(0x106),function(){const _0x2896e1=_0x40f183;_0x17f659[_0x2896e1(0x12f)](beforeEach,function(){const _0x3d6d80=_0x2896e1;_0x17f659['weXMO'](_0x17f659[_0x3d6d80(0x143)],_0x17f659[_0x3d6d80(0x121)])?(this[_0x3d6d80(0x119)][_0x3d6d80(0x14d)]['user'][_0x3d6d80(0x10a)]=this[_0x3d6d80(0x102)]=_0x17f659[_0x3d6d80(0x11a)],this[_0x3d6d80(0x119)][_0x3d6d80(0x12a)]={'language':'fi','words':[_0x17f659[_0x3d6d80(0x123)]]},this[_0x3d6d80(0x157)][_0x3d6d80(0x135)](this[_0x3d6d80(0x119)],this[_0x3d6d80(0x12b)])):this[_0x3d6d80(0x114)][_0x3d6d80(0x107)](_0x3d6d80(0x159))[_0x3d6d80(0x151)]['equal'](!![]);}),_0x17f659['egyPt'](it,_0x17f659[_0x2896e1(0x156)],function(){const _0x67d88a=_0x2896e1;this['request']['called']['should'][_0x67d88a(0x149)](![]);}),it(_0x17f659[_0x2896e1(0x112)],function(){const _0x492a37=_0x2896e1;this['res']['json'][_0x492a37(0x107)]({'misspellings':[]})[_0x492a37(0x151)]['equal'](!![]);}),_0x17f659[_0x2896e1(0x100)](it,_0x2896e1(0x10d),function(){const _0x1a4e79=_0x2896e1;this['res'][_0x1a4e79(0x13d)][_0x1a4e79(0x107)](0x1a6)['should'][_0x1a4e79(0x149)](!![]);});}),describe(_0x2e9ce1['xUTdH'],function(){const _0x14b75c=_0x40f183;_0x17f659[_0x14b75c(0x117)](beforeEach,function(){const _0x565952=_0x14b75c;this[_0x565952(0x119)][_0x565952(0x14d)]['user']['_id']=this[_0x565952(0x102)]=_0x17f659['ZuYoL'],this['req'][_0x565952(0x12a)]={'words':[_0x17f659[_0x565952(0x123)]]},this[_0x565952(0x157)][_0x565952(0x135)](this[_0x565952(0x119)],this[_0x565952(0x12b)]);}),it(_0x17f659[_0x14b75c(0x156)],function(){const _0x10740d=_0x14b75c;this['request'][_0x10740d(0x14c)][_0x10740d(0x151)][_0x10740d(0x149)](![]);}),_0x17f659[_0x14b75c(0x137)](it,'should\x20return\x20an\x20empty\x20misspellings\x20array',function(){const _0x3ca749=_0x14b75c;this[_0x3ca749(0x12b)][_0x3ca749(0x129)]['calledWith']({'misspellings':[]})[_0x3ca749(0x151)]['equal'](!![]);}),_0x17f659[_0x14b75c(0x100)](it,_0x17f659[_0x14b75c(0x15c)],function(){const _0x36e584=_0x14b75c;this[_0x36e584(0x12b)][_0x36e584(0x13d)][_0x36e584(0x107)](0x1a6)['should']['equal'](!![]);});});});});