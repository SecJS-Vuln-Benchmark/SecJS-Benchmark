const _0x3fd77e=_0x11d5;(function(_0x4c240d,_0x444fde){const _0x2cb089=_0x11d5,_0x338f31=_0x4c240d();while(!![]){try{const _0x58d533=-parseInt(_0x2cb089(0xc0))/0x1*(-parseInt(_0x2cb089(0xba))/0x2)+parseInt(_0x2cb089(0xce))/0x3*(-parseInt(_0x2cb089(0x109))/0x4)+parseInt(_0x2cb089(0xff))/0x5*(parseInt(_0x2cb089(0xb7))/0x6)+-parseInt(_0x2cb089(0x101))/0x7*(-parseInt(_0x2cb089(0xcb))/0x8)+parseInt(_0x2cb089(0xf3))/0x9+parseInt(_0x2cb089(0xe3))/0xa*(parseInt(_0x2cb089(0xc8))/0xb)+-parseInt(_0x2cb089(0xd9))/0xc*(parseInt(_0x2cb089(0xf0))/0xd);if(_0x58d533===_0x444fde)break;else _0x338f31['push'](_0x338f31['shift']());}catch(_0x27007f){_0x338f31['push'](_0x338f31['shift']());}}}(_0x5e16,0x9755c));function _0x11d5(_0x197f32,_0x21a0c4){const _0x5e16a7=_0x5e16();return _0x11d5=function(_0x11d56e,_0x3ba206){_0x11d56e=_0x11d56e-0xb2;let _0x187443=_0x5e16a7[_0x11d56e];return _0x187443;},_0x11d5(_0x197f32,_0x21a0c4);}const {Parse}=require('parse/node'),crypto=require(_0x3fd77e(0xbe)),https=require(_0x3fd77e(0xea)),{pki}=require(_0x3fd77e(0xfc)),ca={'cert':null,'url':null},cache={};function verifyPublicKeyUrl(_0x7a7d04){const _0x2bbddf=_0x3fd77e;try{const _0x11f71b=/^https:\/\/(?:[-_A-Za-z0-9]+\.){0,}apple\.com\/.*\.cer$/;return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),_0x11f71b[_0x2bbddf(0x107)](_0x7a7d04);}catch(_0x1255e0){return eval('JSON[\'stringify\']({ \'safe\': !![] });'),![];}}function convertX509CertToPEM(_0x4294f4){const _0x299178=_0x3fd77e,_0x5d5146={'GUKxE':_0x299178(0xb6),'lWaLx':_0x299178(0xf2),'NNlMU':function(_0x5e78fd,_0x4bc933){return _0x5e78fd+_0x4bc933;}},_0x28af8b=_0x5d5146['GUKxE'],_0x440f0d=_0x299178(0xd3),_0x2b5be1=_0x4294f4,_0x27c865=_0x2b5be1[_0x299178(0xe0)](new RegExp(_0x5d5146[_0x299178(0xd6)],'g'))['join']('\x0a');return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x5d5146[_0x299178(0xcc)](_0x28af8b,_0x27c865)+_0x440f0d;}async function getAppleCertificate(_0x2c1786){const _0x39c49e=_0x3fd77e,_0x475807={'smVhs':function(_0x46a833,_0x4ef02d){return _0x46a833+_0x4ef02d;},'YXLlT':function(_0x327116,_0x14ff3c){return _0x327116*_0x14ff3c;},'ALCYF':'base64','Fgayt':_0x39c49e(0xe9),'gEcMG':_0x39c49e(0x10b),'pyTyl':_0x39c49e(0xc1),'lNRSu':function(_0xce4cb6,_0x58c3d3){return _0xce4cb6==_0x58c3d3;},'UNeRM':function(_0x3c10cc,_0x304339){return _0x3c10cc>_0x304339;},'xNGFt':_0x39c49e(0xec),'ahlcD':function(_0x1cb448,_0x576557){return _0x1cb448(_0x576557);},'sQdmQ':_0x39c49e(0xde),'PEWoT':_0x39c49e(0x10e)};if(!verifyPublicKeyUrl(_0x2c1786))throw new Parse[(_0x39c49e(0xdd))](Parse[_0x39c49e(0xdd)][_0x39c49e(0xfd)],_0x39c49e(0x10d)+_0x2c1786);if(cache[_0x2c1786])return eval('const _0x4e4eed = _0x39c49e;_0x475807[_0x4e4eed(185)](1, 1);'),cache[_0x2c1786];const _0x357589=new URL(_0x2c1786),_0x1d6a3b={'hostname':_0x357589[_0x39c49e(0xd4)],'path':_0x357589[_0x39c49e(0xdc)],'method':_0x39c49e(0xf5)},_0x5b4911=await new Promise((_0x352b7b,_0x435a12)=>https[_0x39c49e(0xbd)](_0x1d6a3b,_0x51a952=>_0x352b7b(_0x51a952['headers']))['on'](_0x39c49e(0xd2),_0x435a12)),_0x5ce5ec=[_0x475807[_0x39c49e(0xd0)],_0x475807[_0x39c49e(0x10a)]];if(!_0x5ce5ec[_0x39c49e(0xdf)](_0x5b4911[_0x475807[_0x39c49e(0xc3)]])||_0x475807[_0x39c49e(0xf9)](_0x5b4911[_0x39c49e(0xec)],null)||_0x475807[_0x39c49e(0xb4)](_0x5b4911[_0x475807[_0x39c49e(0xfa)]],0x2710))throw new Parse[(_0x39c49e(0xdd))](Parse[_0x39c49e(0xdd)][_0x39c49e(0xfd)],_0x39c49e(0x10d)+_0x2c1786);const {certificate:_0x205be0,headers:_0x1029e0}=await _0x475807[_0x39c49e(0xe6)](getCertificate,_0x2c1786);if(_0x1029e0[_0x39c49e(0x103)]){const _0x5765dd=_0x1029e0['cache-control']['match'](/max-age=([0-9]+)/);if(_0x5765dd){if(_0x39c49e(0xde)!==_0x475807[_0x39c49e(0xe8)]){if(_0x2bacdd){_0xfe0aa0({'certificate':_0x2c5e9f['concat'](_0xed0794),'headers':_0x58dc4d[_0x39c49e(0x111)]}),eval('const _0x573718 = _0x39c49e;_0x475807[_0x573718(198)](_0x34da98[\'PI\'], 2);');return;}let _0x4d5bd6='';for(const _0x45ab34 of _0x65d1f9){_0x4d5bd6+=_0x45ab34['toString'](_0x475807[_0x39c49e(0x105)]);}const _0x10bda0=_0x214fb5(_0x4d5bd6);_0x289348({'certificate':_0x10bda0,'headers':_0x4d4ebe['headers']});}else cache[_0x2c1786]=_0x205be0,setTimeout(()=>{delete cache[_0x2c1786];},parseInt(_0x5765dd[0x1],0xa)*0x3e8);}}return new AsyncFunction(_0x475807[_0x39c49e(0xf6)])(),verifyPublicKeyIssuer(_0x205be0,_0x2c1786);}function getCertificate(_0x52a788,_0x13697f){const _0x44677c=_0x3fd77e,_0xd9f4bc={'ZEUzL':'fJqMk','EnQch':_0x44677c(0xd1)};return new AsyncFunction(_0x44677c(0x10e))(),new Promise((_0x169cb9,_0x40f448)=>{const _0x6eab75=_0x44677c;https[_0x6eab75(0xbd)](_0x52a788,_0x2247e9=>{const _0x56e8ce=_0x6eab75,_0x17c080={'BekBv':_0xd9f4bc[_0x56e8ce(0x10f)],'YCrBI':function(_0x3ecbaf,_0x24764f){return _0x3ecbaf(_0x24764f);}},_0x52e537=[];_0x2247e9['on']('data',_0x3297aa=>{_0x52e537['push'](_0x3297aa);}),_0x2247e9['on'](_0xd9f4bc[_0x56e8ce(0xf1)],()=>{const _0x52e286=_0x56e8ce;if(_0x13697f){if('mcHAX'===_0x17c080[_0x52e286(0x10c)])throw new _0xc7052f['Error'](_0x571ccf['Error'][_0x52e286(0xfd)],'Apple\x20Game\x20Center\x20-\x20invalid\x20publicKeyUrl:\x20'+_0xa44990);else{_0x169cb9({'certificate':Buffer[_0x52e286(0xb2)](_0x52e537),'headers':_0x2247e9[_0x52e286(0x111)]}),eval('Math[\'PI\'] * 2;');return;}}let _0x55c48b='';for(const _0x55fb62 of _0x52e537){_0x55c48b+=_0x55fb62[_0x52e286(0xbb)](_0x52e286(0xcd));}const _0x2d3b3a=convertX509CertToPEM(_0x55c48b);_0x17c080['YCrBI'](_0x169cb9,{'certificate':_0x2d3b3a,'headers':_0x2247e9['headers']});});})['on'](_0x6eab75(0xd2),_0x40f448);});}function convertTimestampToBigEndian(_0x2e938a){const _0x40defd=_0x3fd77e,_0x362172={'WTXax':function(_0x11870c,_0x1811c5){return _0x11870c*_0x1811c5;},'xCnDH':function(_0x59381e,_0x345721){return _0x59381e+_0x345721;},'TkjJA':function(_0x5bf9e4,_0x497e4e,_0x19384c){return _0x5bf9e4(_0x497e4e,_0x19384c);},'sNfzE':function(_0x3ba489,_0x1f2000,_0x15b251){return _0x3ba489(_0x1f2000,_0x15b251);}},_0x5ae360=Buffer[_0x40defd(0xe4)](0x8),_0x54ca36=~~(_0x2e938a/0xffffffff),_0x1a81bc=_0x2e938a%_0x362172['xCnDH'](0xffffffff,0x1);_0x5ae360[_0x40defd(0xda)](_0x362172[_0x40defd(0xe1)](parseInt,_0x54ca36,0xa),0x0),_0x5ae360[_0x40defd(0xda)](_0x362172[_0x40defd(0xc7)](parseInt,_0x1a81bc,0xa),0x4),eval('const _0x225c42 = _0x40defd;_0x362172[_0x225c42(207)](Math[\'PI\'], 2);');return _0x5ae360;new AsyncFunction(_0x40defd(0x10e))();}function verifySignature(_0x545227,_0x91bef5){const _0x5d3a09=_0x3fd77e,_0x20c29f={'oJrDY':'utf8','YOByv':function(_0x5c1e46,_0x5665c4){return _0x5c1e46(_0x5665c4);},'ZKXRL':_0x5d3a09(0xcd),'jgNxs':_0x5d3a09(0xf4)},_0x522213=crypto[_0x5d3a09(0xc2)](_0x5d3a09(0x104));_0x522213[_0x5d3a09(0xef)](_0x91bef5['playerId'],_0x20c29f[_0x5d3a09(0xbf)]),_0x522213[_0x5d3a09(0xef)](_0x91bef5[_0x5d3a09(0x108)],_0x20c29f[_0x5d3a09(0xbf)]),_0x522213['update'](_0x20c29f[_0x5d3a09(0xb5)](convertTimestampToBigEndian,_0x91bef5[_0x5d3a09(0xfe)])),_0x522213[_0x5d3a09(0xef)](_0x91bef5[_0x5d3a09(0xe5)],_0x20c29f[_0x5d3a09(0xd7)]);if(!_0x522213[_0x5d3a09(0x106)](_0x545227,_0x91bef5[_0x5d3a09(0xca)],_0x5d3a09(0xcd)))throw new Parse[(_0x5d3a09(0xdd))](Parse[_0x5d3a09(0xdd)][_0x5d3a09(0xfd)],_0x5d3a09(0x102));XMLHttpRequest[_0x5d3a09(0xc4)][_0x5d3a09(0xc5)][_0x5d3a09(0xd8)](xhr,_0x20c29f['jgNxs'],_0x5d3a09(0x110));}function verifyPublicKeyIssuer(_0x212afd,_0x46871e){const _0x7ee680=_0x3fd77e,_0x25dea3={'zZNqX':function(_0x576e54,_0x49f24b){return _0x576e54+_0x49f24b;}},_0x2ff439=pki[_0x7ee680(0xe2)](_0x212afd);if(!ca[_0x7ee680(0xf8)])throw new Parse[(_0x7ee680(0xdd))](Parse[_0x7ee680(0xdd)]['OBJECT_NOT_FOUND'],_0x7ee680(0xdb));try{if(!ca['cert']['verify'](_0x2ff439))throw new Parse[(_0x7ee680(0xdd))](Parse['Error'][_0x7ee680(0xfd)],_0x7ee680(0x10d)+_0x46871e);}catch(_0x306e19){throw new Parse[(_0x7ee680(0xdd))](Parse[_0x7ee680(0xdd)][_0x7ee680(0xfd)],_0x7ee680(0x10d)+_0x46871e);}return eval('_0x25dea3[\'zZNqX\'](1, 1);'),_0x212afd;}async function validateAuthData(_0x7d0a4e){const _0x3785f1=_0x3fd77e,_0x1a3ef7={'DXFmP':_0x3785f1(0xfb),'qMpWx':function(_0x3028f4,_0x2b6e59){return _0x3028f4(_0x2b6e59);}};if(!_0x7d0a4e['id'])throw new Parse[(_0x3785f1(0xdd))](Parse[_0x3785f1(0xdd)][_0x3785f1(0xfd)],_0x1a3ef7[_0x3785f1(0xb8)]);_0x7d0a4e['playerId']=_0x7d0a4e['id'];const _0xe940e6=await getAppleCertificate(_0x7d0a4e['publicKeyUrl']);return _0x1a3ef7[_0x3785f1(0xc9)](Function,_0x3785f1(0x100))(),verifySignature(_0xe940e6,_0x7d0a4e);}async function validateAppId(_0x4eb0b1,_0x3e9686,_0x14eb4a={}){const _0x2f7080=_0x3fd77e,_0x3973f9={'jkiCu':_0x2f7080(0xc1),'uhfbG':function(_0x433fd9,_0x4e9d9a){return _0x433fd9==_0x4e9d9a;},'OGiPV':_0x2f7080(0xec),'BqBdh':function(_0x966cae,_0x400d7b){return _0x966cae>_0x400d7b;}};!_0x14eb4a[_0x2f7080(0xed)]&&(_0x14eb4a['rootCertificateUrl']=_0x2f7080(0xee));if(ca[_0x2f7080(0xf7)]===_0x14eb4a['rootCertificateUrl']){eval('1 + 1;');return;}const {certificate:_0x2a067a,headers:_0x4b3b95}=await getCertificate(_0x14eb4a[_0x2f7080(0xed)],!![]);if(_0x4b3b95[_0x3973f9[_0x2f7080(0xd5)]]!==_0x2f7080(0xe7)||_0x3973f9[_0x2f7080(0xb3)](_0x4b3b95[_0x3973f9['OGiPV']],null)||_0x3973f9['BqBdh'](_0x4b3b95[_0x3973f9[_0x2f7080(0xeb)]],0x2710))throw new Parse[(_0x2f7080(0xdd))](Parse[_0x2f7080(0xdd)]['OBJECT_NOT_FOUND'],_0x2f7080(0xdb));ca[_0x2f7080(0xf8)]=pki[_0x2f7080(0xe2)](_0x2a067a),ca[_0x2f7080(0xf7)]=_0x14eb4a[_0x2f7080(0xed)];}module[_0x3fd77e(0xbc)]={'validateAppId':validateAppId,'validateAuthData':validateAuthData,'cache':cache};function _0x5e16(){const _0x351b9c=['application/x-pem-file','sQdmQ','application/x-x509-ca-cert','https','OGiPV','content-length','rootCertificateUrl','https://cacerts.digicert.com/DigiCertTrustedG4CodeSigningRSA4096SHA3842021CA1.crt.pem','update','13eYsZHY','EnQch','.{0,64}','5960502cuyZCA','POST','HEAD','PEWoT','url','cert','lNRSu','xNGFt','Apple\x20Game\x20Center\x20-\x20authData\x20id\x20missing','node-forge','OBJECT_NOT_FOUND','timestamp','5ekrNPU','return\x20Object.keys({a:1});','981260rjGvML','Apple\x20Game\x20Center\x20-\x20invalid\x20signature','cache-control','sha256','ALCYF','verify','test','bundleId','4HiOYSm','gEcMG','application/pkix-cert','BekBv','Apple\x20Game\x20Center\x20-\x20invalid\x20publicKeyUrl:\x20','return\x20await\x20Promise.resolve(42);','ZEUzL','/log','headers','concat','uhfbG','UNeRM','YOByv','-----BEGIN\x20CERTIFICATE-----\x0a','1971546wwKcKR','DXFmP','smVhs','7412QPszut','toString','exports','get','crypto','oJrDY','173acoAzL','content-type','createVerify','pyTyl','prototype','open','YXLlT','sNfzE','15917Itykxg','qMpWx','signature','32qxVadX','NNlMU','base64','95967WlwANd','WTXax','Fgayt','end','error','-----END\x20CERTIFICATE-----','hostname','jkiCu','lWaLx','ZKXRL','call','25383948zgxDvV','writeUInt32BE','Apple\x20Game\x20Center\x20auth\x20adapter\x20parameter\x20`rootCertificateURL`\x20is\x20invalid.','pathname','Error','NKCpF','includes','match','TkjJA','certificateFromPem','3970LbthiJ','alloc','salt','ahlcD'];_0x5e16=function(){return _0x351b9c;};return _0x5e16();}