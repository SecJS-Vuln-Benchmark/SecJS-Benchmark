const _0x15880f=_0x3e71;(function(_0x3a06f5,_0x8f1e0b){const _0x3276ae=_0x3e71,_0x2db398=_0x3a06f5();while(!![]){try{const _0x33433d=parseInt(_0x3276ae(0x185))/0x1+-parseInt(_0x3276ae(0x19f))/0x2+parseInt(_0x3276ae(0x16b))/0x3+parseInt(_0x3276ae(0x17f))/0x4*(-parseInt(_0x3276ae(0x187))/0x5)+parseInt(_0x3276ae(0x156))/0x6*(-parseInt(_0x3276ae(0x158))/0x7)+parseInt(_0x3276ae(0x195))/0x8*(parseInt(_0x3276ae(0x15f))/0x9)+-parseInt(_0x3276ae(0x17b))/0xa*(-parseInt(_0x3276ae(0x163))/0xb);if(_0x33433d===_0x8f1e0b)break;else _0x2db398['push'](_0x2db398['shift']());}catch(_0x2927fd){_0x2db398['push'](_0x2db398['shift']());}}}(_0x3ad9,0x852ed));function _0x3ad9(){const _0x5c62eb=['1962950BRVzYQ','ufOsu','requestStreamPipe','yqQNq','cdvFx','QDSmu','when\x20no\x20language\x20is\x20indicated','POST','equal','../../../../app/src/Features/Spelling/SpellingController.js','stub','http://spelling.service.test','request','5430drfOAS','_id','1771zxTpBx','proxyCheckRequestToSpellingApi','/check','QPSvz','should\x20return\x20a\x20422\x20status','mNVSU','tMUOd','2518857xmugfA','Faxly','BxPgl','QQfyO','21702791abHCRd','JAmGc','QkJfS','error','return\x20await\x20Promise.resolve(42);','user','French','gGBgr','167484RfoAML','controller','../helpers/MockResponse','should','return\x20new\x20Date();','should\x20not\x20send\x20a\x20request\x20to\x20the\x20spelling\x20host','safe','WIZYJ','requestStreamOn','gKZHL','session','res','Ehepe','DnmrR','headers','KLTva','10KyieDD','should\x20return\x20an\x20empty\x20misspellings\x20array','method','blab','4jrlxkX','JFgJI','wMwjQ','sinon','PZdFw','status','247429AlFUgm','hjbtP','4000770YQJlbw','Ghxwj','YvdoJ','calledWith','user-id-123','kthyu','oKUXL','kjJjQ','req','jORqk','log','ovThU','body','when\x20the\x20requested\x20language\x20is\x20not\x20supported','8wQaUou','should\x20add\x20an\x20error\x20callback\x20to\x20the\x20request','123nd3ijdks','LMLWD','Peyqm','BZtIT','sGshz','called','userId','NijtB'];_0x3ad9=function(){return _0x5c62eb;};return _0x3ad9();}const SandboxedModule=require('sandboxed-module'),sinon=require(_0x15880f(0x182)),MockResponse=require(_0x15880f(0x16d)),modulePath=require('path')['join'](__dirname,_0x15880f(0x152)),TEN_SECONDS=0x3e8*0xa,SPELLING_HOST=_0x15880f(0x154),SPELLING_URL='http://spelling.service.test';function _0x3e71(_0x49a53a,_0x63ffbe){const _0x3ad92b=_0x3ad9();return _0x3e71=function(_0x3e7174,_0x3c47aa){_0x3e7174=_0x3e7174-0x14d;let _0xd0a502=_0x3ad92b[_0x3e7174];return _0xd0a502;},_0x3e71(_0x49a53a,_0x63ffbe);}describe('SpellingController',function(){const _0x14e859=_0x15880f,_0x3bc6a2={'QQfyO':'English','gKZHL':_0x14e859(0x169),'QDSmu':'/spelling/check','JAmGc':function(_0x4cdc31,_0x58b171,_0x44979d){return _0x4cdc31(_0x58b171,_0x44979d);},'hjbtP':'should\x20send\x20a\x20request\x20to\x20the\x20spelling\x20host','ufOsu':function(_0x46e2fc,_0x48168a,_0x21752b){return _0x46e2fc(_0x48168a,_0x21752b);},'WesKR':'should\x20stream\x20the\x20response\x20to\x20the\x20request','Faxly':function(_0x19816c,_0x2b50e8,_0x5db4f3){return _0x19816c(_0x2b50e8,_0x5db4f3);},'mtjMm':_0x14e859(0x196),'QPSvz':function(_0x189c52,_0x132be4){return _0x189c52(_0x132be4);},'BxPgl':_0x14e859(0x170),'DanDV':'return\x20await\x20Promise.resolve(42);','HYCrd':'should\x20return\x20an\x20empty\x20misspellings\x20array','PZdFw':function(_0x42d3ae,_0x595402){return _0x42d3ae(_0x595402);},'yqQNq':_0x14e859(0x16f),'jORqk':function(_0xacae64,_0x9aaeb8){return _0xacae64===_0x9aaeb8;},'ovThU':_0x14e859(0x17e),'JFgJI':_0x14e859(0x189),'NijtB':function(_0x5b1e2c,_0x10f1f7,_0xc386e5){return _0x5b1e2c(_0x10f1f7,_0xc386e5);},'cdvFx':_0x14e859(0x14f),'YrdHW':_0x14e859(0x197),'DnmrR':function(_0x210d41,_0x140261,_0x17299e){return _0x210d41(_0x140261,_0x17299e);}},_0x1fb8b8=_0x3bc6a2['YrdHW'];beforeEach(function(){const _0x3bcfe0=_0x14e859;this[_0x3bcfe0(0x1a1)]=sinon[_0x3bcfe0(0x153)](),this[_0x3bcfe0(0x173)]=sinon[_0x3bcfe0(0x153)]()['returns']({'pipe':this['requestStreamPipe']}),this[_0x3bcfe0(0x155)]=sinon[_0x3bcfe0(0x153)]()['returns']({'on':this[_0x3bcfe0(0x173)]}),this['AuthenticationController']={'getLoggedInUserId':_0x57e5c1=>_0x57e5c1[_0x3bcfe0(0x175)][_0x3bcfe0(0x168)][_0x3bcfe0(0x157)]},this['controller']=SandboxedModule['require'](modulePath,{'requires':{'./LearnedWordsManager':{},'request':this[_0x3bcfe0(0x155)],'@overleaf/settings':{'languages':[{'name':_0x3bc6a2[_0x3bcfe0(0x162)],'code':'en'},{'name':_0x3bc6a2[_0x3bcfe0(0x174)],'code':'fr'}],'apis':{'spelling':{'host':SPELLING_HOST,'url':SPELLING_URL}}},'../Authentication/AuthenticationController':this['AuthenticationController']}}),this['req']={'url':_0x3bc6a2[_0x3bcfe0(0x14e)],'method':_0x3bcfe0(0x150),'params':{},'session':{'user':{'_id':_0x1fb8b8}},'headers':{'Host':SPELLING_HOST}},this['res']=new MockResponse();}),_0x3bc6a2[_0x14e859(0x178)](describe,'proxyCheckRequestToSpellingApi',function(){const _0x5d641c=_0x14e859,_0x2000c8={'IMIas':function(_0x252059,_0x485a7e){const _0x1841cd=_0x3e71;return _0x3bc6a2[_0x1841cd(0x190)](_0x252059,_0x485a7e);},'tMUOd':_0x5d641c(0x171),'BZtIT':_0x3bc6a2[_0x5d641c(0x192)],'LMLWD':_0x3bc6a2[_0x5d641c(0x180)],'mNVSU':function(_0x123a76,_0x21b740){return _0x3bc6a2['PZdFw'](_0x123a76,_0x21b740);},'gGBgr':function(_0x374840,_0x55d919,_0x47b5c6){const _0x315893=_0x5d641c;return _0x3bc6a2[_0x315893(0x164)](_0x374840,_0x55d919,_0x47b5c6);},'FgWWY':_0x3bc6a2[_0x5d641c(0x161)]};describe('on\x20successful\x20call',function(){const _0x2db258=_0x5d641c;beforeEach(function(){const _0x1495c8=_0x3e71;this[_0x1495c8(0x18f)]['session'][_0x1495c8(0x168)][_0x1495c8(0x157)]=this[_0x1495c8(0x19d)]=_0x1495c8(0x18b),this[_0x1495c8(0x18f)][_0x1495c8(0x193)]={'language':'en','words':[_0x1495c8(0x17e)]},this[_0x1495c8(0x16c)][_0x1495c8(0x159)](this['req'],this[_0x1495c8(0x176)]);}),_0x3bc6a2['JAmGc'](it,_0x3bc6a2[_0x2db258(0x186)],function(){const _0x6118c2=_0x2db258;this[_0x6118c2(0x155)][_0x6118c2(0x18a)]({'url':SPELLING_URL+'/user/'+this[_0x6118c2(0x19d)]+_0x6118c2(0x15a),'method':this['req'][_0x6118c2(0x17d)],'headers':this[_0x6118c2(0x18f)][_0x6118c2(0x179)],'json':this[_0x6118c2(0x18f)][_0x6118c2(0x193)],'timeout':TEN_SECONDS})['should'][_0x6118c2(0x151)](!![]);}),_0x3bc6a2[_0x2db258(0x1a0)](it,_0x3bc6a2['WesKR'],function(){const _0x3a9500=_0x2db258;this['requestStreamPipe']['calledWith'](this[_0x3a9500(0x176)])[_0x3a9500(0x16e)][_0x3a9500(0x151)](!![]);}),_0x3bc6a2[_0x2db258(0x160)](it,_0x3bc6a2['mtjMm'],function(){const _0x5e16e1=_0x2db258;this['requestStreamOn'][_0x5e16e1(0x18a)](_0x5e16e1(0x166))['should'][_0x5e16e1(0x151)](!![]);});}),_0x3bc6a2[_0x5d641c(0x19e)](describe,_0x5d641c(0x194),function(){const _0x2cf315=_0x5d641c,_0x2f53a4={'kjJjQ':'wMwjQ','kthyu':'user-id-123','Peyqm':_0x2000c8[_0x2cf315(0x19a)],'Ehepe':function(_0x22d99e,_0x5aa377){return _0x22d99e!==_0x5aa377;},'oKUXL':_0x2000c8[_0x2cf315(0x198)],'QkJfS':function(_0x49a1b2,_0x343ba5){return _0x49a1b2===_0x343ba5;},'WIZYJ':_0x2cf315(0x17a)};_0x2000c8[_0x2cf315(0x15d)](beforeEach,function(){const _0x25f306=_0x2cf315;_0x25f306(0x181)===_0x2f53a4[_0x25f306(0x18e)]?(this[_0x25f306(0x18f)]['session']['user'][_0x25f306(0x157)]=this['userId']=_0x2f53a4[_0x25f306(0x18c)],this['req'][_0x25f306(0x193)]={'language':'fi','words':[_0x2f53a4[_0x25f306(0x199)]]},this[_0x25f306(0x16c)]['proxyCheckRequestToSpellingApi'](this[_0x25f306(0x18f)],this[_0x25f306(0x176)])):this[_0x25f306(0x176)]['json'][_0x25f306(0x18a)]({'misspellings':[]})[_0x25f306(0x16e)][_0x25f306(0x151)](!![]);}),_0x2000c8[_0x2cf315(0x16a)](it,_0x2000c8['FgWWY'],function(){const _0x2b7682=_0x2cf315;_0x2f53a4[_0x2b7682(0x177)](_0x2f53a4[_0x2b7682(0x18d)],_0x2f53a4['oKUXL'])?this[_0x2b7682(0x155)]['calledWith']({'url':_0x5e1b25+'/user/'+this[_0x2b7682(0x19d)]+_0x2b7682(0x15a),'method':this['req'][_0x2b7682(0x17d)],'headers':this['req'][_0x2b7682(0x179)],'json':this[_0x2b7682(0x18f)]['body'],'timeout':_0x1cffd5})[_0x2b7682(0x16e)]['equal'](!![]):this['request'][_0x2b7682(0x19c)][_0x2b7682(0x16e)]['equal'](![]);}),new AsyncFunction(_0x2cf315(0x167))(),it(_0x2cf315(0x17c),function(){const _0x180367=_0x2cf315;this['res']['json']['calledWith']({'misspellings':[]})[_0x180367(0x16e)]['equal'](!![]);}),setTimeout(function(){const _0x156a04=_0x2cf315;_0x2000c8['IMIas']('Ghxwj',_0x156a04(0x188))?console[_0x156a04(0x191)](_0x2000c8[_0x156a04(0x15e)]):(this[_0x156a04(0x18f)][_0x156a04(0x175)]['user'][_0x156a04(0x157)]=this[_0x156a04(0x19d)]=_0x2f53a4[_0x156a04(0x18c)],this['req'][_0x156a04(0x193)]={'language':'en','words':[_0x2f53a4[_0x156a04(0x199)]]},this['controller'][_0x156a04(0x159)](this['req'],this[_0x156a04(0x176)]));},0x64),it('should\x20return\x20a\x20422\x20status',function(){const _0x39e48f=_0x2cf315;_0x2f53a4[_0x39e48f(0x165)](_0x2f53a4['WIZYJ'],_0x2f53a4[_0x39e48f(0x172)])?this['res'][_0x39e48f(0x184)]['calledWith'](0x1a6)[_0x39e48f(0x16e)][_0x39e48f(0x151)](!![]):_0x290a0f[_0x39e48f(0x191)]('safe');});}),describe(_0x3bc6a2[_0x5d641c(0x14d)],function(){const _0x5d3397=_0x5d641c,_0x2d8095={'sGshz':_0x5d3397(0x17e)};_0x3bc6a2[_0x5d3397(0x15b)](beforeEach,function(){const _0x4281fb=_0x5d3397;this[_0x4281fb(0x18f)][_0x4281fb(0x175)][_0x4281fb(0x168)][_0x4281fb(0x157)]=this['userId']=_0x4281fb(0x18b),this['req'][_0x4281fb(0x193)]={'words':[_0x2d8095[_0x4281fb(0x19b)]]},this[_0x4281fb(0x16c)][_0x4281fb(0x159)](this[_0x4281fb(0x18f)],this['res']);}),_0x3bc6a2[_0x5d3397(0x1a0)](it,_0x3bc6a2[_0x5d3397(0x161)],function(){const _0x3fc5a6=_0x5d3397;this['request'][_0x3fc5a6(0x19c)][_0x3fc5a6(0x16e)]['equal'](![]);}),new AsyncFunction(_0x3bc6a2['DanDV'])(),it(_0x3bc6a2['HYCrd'],function(){const _0x585a69=_0x5d3397;this[_0x585a69(0x176)]['json'][_0x585a69(0x18a)]({'misspellings':[]})[_0x585a69(0x16e)]['equal'](!![]);}),_0x3bc6a2[_0x5d3397(0x183)](Function,_0x3bc6a2[_0x5d3397(0x1a2)])(),it(_0x5d3397(0x15c),function(){const _0x4dee12=_0x5d3397;this[_0x4dee12(0x176)][_0x4dee12(0x184)][_0x4dee12(0x18a)](0x1a6)[_0x4dee12(0x16e)][_0x4dee12(0x151)](!![]);});});});});