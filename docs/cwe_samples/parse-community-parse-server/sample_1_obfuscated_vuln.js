'use strict';var _0x1f1fd9=_0x1979;(function(_0x430c63,_0x14535a){var _0x2be002=_0x1979,_0xc5a846=_0x430c63();while(!![]){try{var _0x3e578d=-parseInt(_0x2be002(0x66))/0x1*(-parseInt(_0x2be002(0x6b))/0x2)+-parseInt(_0x2be002(0x7d))/0x3+-parseInt(_0x2be002(0x6c))/0x4*(parseInt(_0x2be002(0x7e))/0x5)+-parseInt(_0x2be002(0x85))/0x6+-parseInt(_0x2be002(0x67))/0x7*(parseInt(_0x2be002(0x6a))/0x8)+-parseInt(_0x2be002(0x8f))/0x9*(-parseInt(_0x2be002(0x98))/0xa)+parseInt(_0x2be002(0x7a))/0xb*(parseInt(_0x2be002(0x97))/0xc);if(_0x3e578d===_0x14535a)break;else _0xc5a846['push'](_0xc5a846['shift']());}catch(_0x68b08d){_0xc5a846['push'](_0xc5a846['shift']());}}}(_0x344a,0x639d0));function _0x344a(){var _0x1334af=['4805928joXyHt','code','../../../lib/handlers/authorize-handler','getUser','getClient()','getUser()','equal','handle','should','have','9UUyvKq','sinon','moyWJ','3|5|1|0|2|4','returns','callCount','xMDMy','getClient','3126588spkCCK','504220RTTYFW','kwoVz','/abc','then','request','2Ppoazj','7zAyXvn','AIKPQ','catch','2288360PkIevs','383514wMCpoj','1176548TdSjPk','../../../lib/request','ZIwBZ','split','code_abc','AuthorizeHandler','../../../lib/response','resolve','QqPng','firstCall','should\x20extend\x20model\x20object\x20with\x20request\x20context','PEZDs','should\x20call\x20`model.getClient()`','xyz','88KpykqR','eFvfD','authorization_code','2187426iuOlHA','5jbCaBE','sjWwd','suGmG','fail','123','stub','args'];_0x344a=function(){return _0x1334af;};return _0x344a();}var AuthorizeHandler=require(_0x1f1fd9(0x87)),Request=require(_0x1f1fd9(0x6d)),Response=require(_0x1f1fd9(0x72)),Promise=require('bluebird'),sinon=require(_0x1f1fd9(0x90)),should=require(_0x1f1fd9(0x8d));function _0x1979(_0x354fda,_0x9004fb){var _0x344a24=_0x344a();return _0x1979=function(_0x197924,_0x310084){_0x197924=_0x197924-0x64;var _0x57aa9e=_0x344a24[_0x197924];return _0x57aa9e;},_0x1979(_0x354fda,_0x9004fb);}describe(_0x1f1fd9(0x71),function(){var _0x125e93=_0x1f1fd9,_0x5cc727={'sjWwd':_0x125e93(0x7c),'kwoVz':_0x125e93(0x82),'ZDXQx':'3|2|4|1|0','PEZDs':_0x125e93(0x79),'SeGHu':'code','AIKPQ':function(_0x20eef4,_0x4dc3ed,_0x4d76e3){return _0x20eef4(_0x4dc3ed,_0x4d76e3);},'suGmG':_0x125e93(0x92),'caYPd':'should\x20call\x20`authenticateHandler.getUser()`','aRuje':function(_0x54aa9a,_0x1de944,_0x47e12c){return _0x54aa9a(_0x1de944,_0x47e12c);},'xMDMy':_0x125e93(0x89)};_0x5cc727['aRuje'](describe,'handle()',function(){var _0x12e61a=_0x125e93;it(_0x12e61a(0x76),function(){var _0x1f8860=_0x12e61a,_0x4b11a6={'eFvfD':_0x5cc727[_0x1f8860(0x7f)],'moyWJ':_0x1f8860(0x79),'QqPng':_0x5cc727[_0x1f8860(0x99)]};if('rPhcc'!==_0x1f8860(0x6e)){var _0x52f8a7=_0x5cc727['ZDXQx'][_0x1f8860(0x6f)]('|'),_0x3fb3cd=0x0;while(!![]){switch(_0x52f8a7[_0x3fb3cd++]){case'0':return _0x5cf2fb[_0x1f8860(0x8c)](_0x53f9d1,_0x919e5f)['then'](function(){var _0x4b9f93=_0x1f8860;_0x2f4e68[_0x4b9f93(0x65)]['should']['equal'](_0x53f9d1);})[_0x1f8860(0x69)](should[_0x1f8860(0x81)]);case'1':var _0x919e5f=new Response({});continue;case'2':var _0x5cf2fb=new AuthorizeHandler({'authenticateHandler':{'handle':sinon[_0x1f8860(0x83)]()['returns']({'name':_0x5cc727[_0x1f8860(0x77)]})},'authorizationCodeLifetime':0x7b,'allowEmptyState':!![],'model':_0x2f4e68});continue;case'3':var _0x2f4e68={'getClient':sinon['stub']()['returns']({'grants':[_0x1f8860(0x7c)],'redirectUris':[_0x1f8860(0x9a)]}),'saveAuthorizationCode':sinon['stub']()[_0x1f8860(0x93)]({'authorizationCode':_0x1f8860(0x70)})};continue;case'4':var _0x53f9d1=new Request({'body':{'client_id':_0x5cc727[_0x1f8860(0x99)],'response_type':_0x5cc727['SeGHu']},'headers':{},'method':{},'query':{}});continue;}break;}}else{var _0xdd3d94={'getClient':_0x5dfd33[_0x1f8860(0x83)]()['returns']({'grants':[_0x4b11a6[_0x1f8860(0x7b)]],'redirectUris':[_0x1f8860(0x9a)]}),'saveAuthorizationCode':_0x41d7ae['stub']()[_0x1f8860(0x93)]({'authorizationCode':_0x1f8860(0x70)})},_0x4d1297=new _0x329f59({'authenticateHandler':{'handle':_0x56e463[_0x1f8860(0x83)]()['returns']({'name':_0x4b11a6[_0x1f8860(0x91)]})},'authorizationCodeLifetime':0x7b,'allowEmptyState':!![],'model':_0xdd3d94}),_0x1bd5c0=new _0x3412c1({'body':{'client_id':_0x4b11a6[_0x1f8860(0x74)],'response_type':_0x1f8860(0x86)},'headers':{},'method':{},'query':{}}),_0x4a6895=new _0x2331b3({});return _0x4d1297[_0x1f8860(0x8c)](_0x1bd5c0,_0x4a6895)[_0x1f8860(0x64)](function(){var _0x4d5235=_0x1f8860;_0xdd3d94[_0x4d5235(0x65)][_0x4d5235(0x8d)]['equal'](_0x1bd5c0);})[_0x1f8860(0x69)](_0x7b60d0[_0x1f8860(0x81)]);}});}),describe(_0x5cc727[_0x125e93(0x95)],function(){var _0x457c1c=_0x125e93;_0x5cc727[_0x457c1c(0x68)](it,_0x457c1c(0x78),function(){var _0x42c0e2=_0x457c1c,_0xf6af5e={'getAccessToken':function(){},'getClient':sinon[_0x42c0e2(0x83)]()[_0x42c0e2(0x93)]({'grants':[_0x5cc727[_0x42c0e2(0x7f)]],'redirectUris':['http://example.com/cb']}),'saveAuthorizationCode':function(){}},_0x3bda12=new AuthorizeHandler({'authorizationCodeLifetime':0x78,'model':_0xf6af5e}),_0x5d839a=new Request({'body':{'client_id':0x3039,'client_secret':'secret'},'headers':{},'method':{},'query':{}});return _0x3bda12['getClient'](_0x5d839a)['then'](function(){var _0x351f41=_0x42c0e2;_0xf6af5e[_0x351f41(0x96)][_0x351f41(0x94)][_0x351f41(0x8d)][_0x351f41(0x8b)](0x1),_0xf6af5e['getClient'][_0x351f41(0x75)]['args'][_0x351f41(0x8d)][_0x351f41(0x8e)]['length'](0x2),_0xf6af5e[_0x351f41(0x96)][_0x351f41(0x75)]['args'][0x0][_0x351f41(0x8d)][_0x351f41(0x8b)](0x3039),_0xf6af5e['getClient']['firstCall']['thisValue'][_0x351f41(0x8d)][_0x351f41(0x8b)](_0xf6af5e);})[_0x42c0e2(0x69)](should[_0x42c0e2(0x81)]);});}),describe(_0x125e93(0x8a),function(){it(_0x5cc727['caYPd'],function(){var _0x40ea2a=_0x1979,_0xb0b867=_0x5cc727[_0x40ea2a(0x80)][_0x40ea2a(0x6f)]('|'),_0x187c02=0x0;while(!![]){switch(_0xb0b867[_0x187c02++]){case'0':var _0x183d8f=new Request({'body':{},'headers':{},'method':{},'query':{}});continue;case'1':var _0x20419f=new AuthorizeHandler({'authenticateHandler':_0x51b63a,'authorizationCodeLifetime':0x78,'model':_0x14bb54});continue;case'2':var _0x435251=new Response();continue;case'3':var _0x51b63a={'handle':sinon[_0x40ea2a(0x83)]()['returns'](Promise[_0x40ea2a(0x73)]({}))};continue;case'4':return _0x20419f[_0x40ea2a(0x88)](_0x183d8f,_0x435251)[_0x40ea2a(0x64)](function(){var _0x287943=_0x40ea2a;_0x51b63a['handle'][_0x287943(0x94)][_0x287943(0x8d)]['equal'](0x1),_0x51b63a[_0x287943(0x8c)][_0x287943(0x75)][_0x287943(0x84)][_0x287943(0x8d)][_0x287943(0x8e)]['length'](0x2),_0x51b63a[_0x287943(0x8c)]['firstCall'][_0x287943(0x84)][0x0][_0x287943(0x8d)][_0x287943(0x8b)](_0x183d8f),_0x51b63a['handle'][_0x287943(0x75)]['args'][0x1][_0x287943(0x8d)]['equal'](_0x435251);})['catch'](should['fail']);case'5':var _0x14bb54={'getClient':function(){},'saveAuthorizationCode':function(){}};continue;}break;}});});});