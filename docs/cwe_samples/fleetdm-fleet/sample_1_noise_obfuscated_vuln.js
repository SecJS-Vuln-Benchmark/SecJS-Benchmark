'use strict';const _0x3ba613=_0xae60;function _0xae60(_0x2ece7e,_0x4997b8){const _0x90a11=_0x90a1();return _0xae60=function(_0xae602c,_0x3ec655){_0xae602c=_0xae602c-0x71;let _0x360d3a=_0x90a11[_0xae602c];return _0x360d3a;},_0xae60(_0x2ece7e,_0x4997b8);}function _0x90a1(){const _0x49de71=['end','OftNo','4oDYxaP','KRKKC','2044995GRujEa','isMultipart','1145030NnGiIk','http:','upload','scnsx','http','hJrXe','bind','ZrHKK','gxFln','GDZiM','PartsLimitError','toBuffer','709670gluuDX','VXjrm','wzHiD','../README.md','hello','127.0.0.1','tap','wqHyy','multipartErrors','file','crypto','43208myBTjG','WLStJ','equal','yljXZ','BIIpe','DRuQm','PVmoK','alloc','pass','test','code','register','localhost','form-data','append','RiMLV','post','res\x20ended\x20successfully','getHeaders','request','vqWXq','close','1224QTLWzY','iXqbQ','PrototypeViolationError','error','path','resume','assert','lkmrK','world','parts','ZCLfQ','statusCode','pipe','POST','98KekCtF','randomFillSync','PkCMN','teardown','address','fastify','qoPfi','VvGzq','plan','ghAJt','19011620zVcngz','166192spQmpP','RBNsH','MUyay','138840QHUlep','port','xIuvp','events','__proto__','send','listen','should\x20not\x20allow\x20__proto__\x20as\x20field\x20name','server','should\x20use\x20default\x20for\x20parts\x20-\x201000','vhOCa','createReadStream','it\x20should\x20throw'];_0x90a1=function(){return _0x49de71;};return _0x90a1();}(function(_0x4125fd,_0x54c99e){const _0x33aaa4=_0xae60,_0x2b6420=_0x4125fd();while(!![]){try{const _0x4ed9f5=parseInt(_0x33aaa4(0x94))/0x1+-parseInt(_0x33aaa4(0xb6))/0x2+parseInt(_0x33aaa4(0xa8))/0x3*(-parseInt(_0x33aaa4(0xa6))/0x4)+-parseInt(_0x33aaa4(0xaa))/0x5+parseInt(_0x33aaa4(0x97))/0x6*(parseInt(_0x33aaa4(0x89))/0x7)+parseInt(_0x33aaa4(0xc1))/0x8*(-parseInt(_0x33aaa4(0x7b))/0x9)+parseInt(_0x33aaa4(0x93))/0xa;if(_0x4ed9f5===_0x54c99e)break;else _0x2b6420['push'](_0x2b6420['shift']());}catch(_0x41a4ac){_0x2b6420['push'](_0x2b6420['shift']());}}}(_0x90a1,0x5f868));const test=require(_0x3ba613(0xbc))[_0x3ba613(0xca)],FormData=require(_0x3ba613(0x72)),Fastify=require(_0x3ba613(0x8e)),multipart=require('..'),http=require(_0x3ba613(0xae)),path=require(_0x3ba613(0x7f)),fs=require('fs'),crypto=require(_0x3ba613(0xc0)),EventEmitter=require(_0x3ba613(0x9a)),{once}=EventEmitter,filePath=path['join'](__dirname,_0x3ba613(0xb9));test('should\x20not\x20allow\x20__proto__\x20as\x20file\x20name',function(_0x144ef1){const _0x5a647e=_0x3ba613,_0x4c73d4={'Bxvhv':function(_0x305ab7,_0x5455ed){return _0x305ab7!==_0x5455ed;},'PkCMN':_0x5a647e(0x95),'PbNDo':function(_0x147605,_0x550c30){return _0x147605 instanceof _0x550c30;},'iXqbQ':_0x5a647e(0x76),'lkmrK':_0x5a647e(0x71),'WLStJ':_0x5a647e(0x88),'wzHiD':_0x5a647e(0x9b)};_0x144ef1[_0x5a647e(0x91)](0x4);const _0x27ae6=Fastify();_0x144ef1[_0x5a647e(0x8c)](_0x27ae6[_0x5a647e(0x7a)][_0x5a647e(0xb0)](_0x27ae6)),_0x27ae6['register'](multipart),_0x27ae6[_0x5a647e(0x75)]('/',async function(_0x2ca68f,_0x33945a){const _0xc5de3a=_0x5a647e,_0x59f1f4={'GDZiM':_0xc5de3a(0xab),'vhOCa':_0xc5de3a(0x71)};_0x144ef1['ok'](_0x2ca68f['isMultipart']());try{await _0x2ca68f[_0xc5de3a(0xbf)](),_0x33945a[_0xc5de3a(0xcb)](0xc8)['send']();}catch(_0x228bf7){if(_0x4c73d4['Bxvhv']('RBNsH',_0x4c73d4[_0xc5de3a(0x8b)])){const _0x358063=new _0xfbfd77(),_0x505d55={'protocol':_0x59f1f4[_0xc5de3a(0xb3)],'hostname':_0x59f1f4[_0xc5de3a(0xa1)],'port':_0x2ec483[_0xc5de3a(0x9f)][_0xc5de3a(0x8d)]()['port'],'path':'/','headers':_0x358063[_0xc5de3a(0x77)](),'method':_0xc5de3a(0x88)},_0x23b7ac=_0xbb92ed[_0xc5de3a(0x78)](_0x505d55,_0x3e4477=>{const _0x597571=_0xc5de3a;_0x9d4bbb[_0x597571(0xc3)](_0x3e4477['statusCode'],0x1f4),_0x3e4477['resume'](),_0x3e4477['on'](_0x597571(0xa4),()=>{const _0xe459aa=_0x597571;_0xac4be9[_0xe459aa(0xc9)]('res\x20ended\x20successfully');});}),_0x140d5c=_0x31e805[_0xc5de3a(0xa2)](_0x4bcc4f);_0x358063[_0xc5de3a(0x73)](_0xc5de3a(0x9b),_0x140d5c),_0x358063[_0xc5de3a(0x87)](_0x23b7ac);}else _0x144ef1['ok'](_0x4c73d4['PbNDo'](_0x228bf7,_0x27ae6[_0xc5de3a(0xbe)][_0xc5de3a(0x7d)])),_0x33945a[_0xc5de3a(0xcb)](0x1f4)[_0xc5de3a(0x9c)]();}}),_0x27ae6[_0x5a647e(0x9d)]({'port':0x0},async function(){const _0x2c6956=_0x5a647e,_0x4ff1c2={'CZzqk':_0x4c73d4[_0x2c6956(0x7c)]},_0x5df9c8=new FormData(),_0x473432={'protocol':_0x2c6956(0xab),'hostname':_0x4c73d4[_0x2c6956(0x82)],'port':_0x27ae6['server']['address']()[_0x2c6956(0x98)],'path':'/','headers':_0x5df9c8[_0x2c6956(0x77)](),'method':_0x4c73d4[_0x2c6956(0xc2)]},_0x473dcb=http['request'](_0x473432,_0x33c040=>{const _0x456ff7=_0x2c6956,_0x4673ac={'DRuQm':_0x4ff1c2['CZzqk']};_0x144ef1[_0x456ff7(0xc3)](_0x33c040[_0x456ff7(0x86)],0x1f4),_0x33c040[_0x456ff7(0x80)](),_0x33c040['on'](_0x456ff7(0xa4),()=>{const _0x280bfa=_0x456ff7;_0x144ef1[_0x280bfa(0xc9)](_0x4673ac[_0x280bfa(0xc6)]);});}),_0x4a2021=fs[_0x2c6956(0xa2)](filePath);_0x5df9c8[_0x2c6956(0x73)](_0x4c73d4[_0x2c6956(0xb8)],_0x4a2021),_0x5df9c8[_0x2c6956(0x87)](_0x473dcb);});}),test(_0x3ba613(0x9e),function(_0x4b2570){const _0xccc51d=_0x3ba613,_0xdce248={'qoPfi':function(_0x17fed3,_0x4fd0b4){return _0x17fed3 instanceof _0x4fd0b4;},'gxFln':function(_0x1bf5c1,_0x5ad175){return _0x1bf5c1===_0x5ad175;},'yljXZ':'LCfri','xIuvp':_0xccc51d(0xab),'PVmoK':_0xccc51d(0x71),'ghAJt':_0xccc51d(0x9b),'scnsx':function(_0x3261a1){return _0x3261a1();}};_0x4b2570[_0xccc51d(0x91)](0x4);const _0x4d9f16=_0xdce248[_0xccc51d(0xad)](Fastify);_0x4b2570[_0xccc51d(0x8c)](_0x4d9f16[_0xccc51d(0x7a)][_0xccc51d(0xb0)](_0x4d9f16)),_0x4d9f16[_0xccc51d(0xcc)](multipart),_0x4d9f16['post']('/',async function(_0x158bea,_0x4e068b){const _0x45ef17=_0xccc51d;_0x4b2570['ok'](_0x158bea[_0x45ef17(0xa9)]());try{await _0x158bea[_0x45ef17(0xbf)](),_0x4e068b[_0x45ef17(0xcb)](0xc8)['send']();}catch(_0x44de8d){_0x4b2570['ok'](_0xdce248[_0x45ef17(0x8f)](_0x44de8d,_0x4d9f16['multipartErrors'][_0x45ef17(0x7d)])),_0x4e068b[_0x45ef17(0xcb)](0x1f4)[_0x45ef17(0x9c)]();}}),_0x4d9f16[_0xccc51d(0x9d)]({'port':0x0},async function(){const _0xccdb10=_0xccc51d,_0x36179b=new FormData(),_0x6471be={'protocol':_0xdce248[_0xccdb10(0x99)],'hostname':_0xdce248[_0xccdb10(0xc7)],'port':_0x4d9f16[_0xccdb10(0x9f)][_0xccdb10(0x8d)]()['port'],'path':'/','headers':_0x36179b[_0xccdb10(0x77)](),'method':_0xccdb10(0x88)},_0x4a245d=http[_0xccdb10(0x78)](_0x6471be,_0x2c3310=>{const _0x99c9fd=_0xccdb10,_0x4b105e={'JmytB':'res\x20ended\x20successfully'};_0xdce248[_0x99c9fd(0xb2)](_0xdce248[_0x99c9fd(0xc4)],_0x99c9fd(0xb1))?_0x2887d4['assert'](_0x295758):(_0x4b2570[_0x99c9fd(0xc3)](_0x2c3310['statusCode'],0x1f4),_0x2c3310[_0x99c9fd(0x80)](),_0x2c3310['on'](_0x99c9fd(0xa4),()=>{const _0x4f020f=_0x99c9fd;_0x4b2570[_0x4f020f(0xc9)](_0x4b105e['JmytB']);}));});_0x36179b[_0xccdb10(0x73)](_0xdce248[_0xccdb10(0x92)],'world'),_0x36179b[_0xccdb10(0x87)](_0x4a245d);});}),test('should\x20use\x20default\x20for\x20fileSize',async function(_0x1d3426){const _0x383252=_0x3ba613,_0x143d09={'OftNo':_0x383252(0xa3),'RiMLV':_0x383252(0x78),'MUyay':_0x383252(0xbb),'lIDwL':_0x383252(0x88),'USbaP':_0x383252(0xaf),'wqHyy':'response','VXjrm':function(_0x323094,_0x424f29,_0x4ef5f6){return _0x323094(_0x424f29,_0x4ef5f6);}};_0x1d3426[_0x383252(0x91)](0x4);const _0x380750=Fastify();_0x1d3426[_0x383252(0x8c)](_0x380750['close']['bind'](_0x380750)),_0x380750['register'](multipart,{'throwFileSizeLimit':!![]}),_0x380750['post']('/',async function(_0xfdd0cc,_0x431fbf){const _0x14723c=_0x383252;_0x1d3426['ok'](_0xfdd0cc[_0x14723c(0xa9)]());const _0x5b12de=await _0xfdd0cc[_0x14723c(0xbf)]();_0x1d3426[_0x14723c(0xc9)]('the\x20file\x20is\x20not\x20consumed\x20yet');try{await _0x5b12de[_0x14723c(0xb5)](),_0x1d3426['fail'](_0x143d09[_0x14723c(0xa5)]);}catch(_0x9ecacf){_0x1d3426['ok'](_0x9ecacf),_0x431fbf[_0x14723c(0x9c)](_0x9ecacf);}}),await _0x380750[_0x383252(0x9d)]({'port':0x0});const _0x36f8bd=new FormData(),_0x124246={'hostname':_0x143d09[_0x383252(0x96)],'port':_0x380750['server'][_0x383252(0x8d)]()[_0x383252(0x98)],'path':'/','headers':_0x36f8bd['getHeaders'](),'method':_0x143d09['lIDwL']},_0x4e3ba8=Buffer[_0x383252(0xc8)](0xe4e1c0);crypto[_0x383252(0x8a)](_0x4e3ba8);const _0x4f0b99=http[_0x383252(0x78)](_0x124246);_0x36f8bd[_0x383252(0x73)](_0x383252(0xac),_0x4e3ba8),_0x36f8bd['pipe'](_0x4f0b99);try{if(_0x383252(0xaf)===_0x143d09['USbaP']){const [_0x264449]=await once(_0x4f0b99,_0x143d09[_0x383252(0xbd)]);_0x1d3426[_0x383252(0xc3)](_0x264449['statusCode'],0x19d),_0x264449[_0x383252(0x80)](),await _0x143d09[_0x383252(0xb7)](once,_0x264449,_0x383252(0xa4));}else _0x2c3e20[_0x383252(0x7e)](_0x2e95ff,_0x143d09[_0x383252(0x74)]);}catch(_0x5104ed){_0x1d3426[_0x383252(0x7e)](_0x5104ed,_0x383252(0x78));}}),test(_0x3ba613(0xa0),function(_0x1904df){const _0x2a7601=_0x3ba613,_0x496827={'KRKKC':'should\x20throw\x20on\x201001','VvGzq':function(_0x40c3cc,_0x5cc75e){return _0x40c3cc instanceof _0x5cc75e;},'KOkrL':_0x2a7601(0xa4),'ZCLfQ':_0x2a7601(0x71),'BIIpe':function(_0x497a7e,_0x27281e){return _0x497a7e<_0x27281e;},'vqWXq':_0x2a7601(0x83)},_0x25070f=Fastify();_0x1904df['teardown'](_0x25070f[_0x2a7601(0x7a)][_0x2a7601(0xb0)](_0x25070f)),_0x25070f[_0x2a7601(0xcc)](multipart),_0x25070f[_0x2a7601(0x75)]('/',async function(_0xfc41ac,_0x27304f){const _0x4667b1=_0x2a7601;try{for await(const _0x2a7870 of _0xfc41ac[_0x4667b1(0x84)]()){console[_0x4667b1(0x81)](_0x2a7870);}_0x1904df['fail'](_0x496827[_0x4667b1(0xa7)]),_0x27304f[_0x4667b1(0xcb)](0xc8)[_0x4667b1(0x9c)]();}catch(_0x51579d){_0x1904df['ok'](_0x496827[_0x4667b1(0x90)](_0x51579d,_0x25070f['multipartErrors'][_0x4667b1(0xb4)])),_0x27304f[_0x4667b1(0xcb)](0x1f4)[_0x4667b1(0x9c)]();}}),_0x25070f[_0x2a7601(0x9d)]({'port':0x0},async function(){const _0x256a5e=_0x2a7601,_0x2973af=new FormData(),_0x3af2a2={'protocol':_0x256a5e(0xab),'hostname':_0x496827[_0x256a5e(0x85)],'port':_0x25070f[_0x256a5e(0x9f)][_0x256a5e(0x8d)]()[_0x256a5e(0x98)],'path':'/','headers':_0x2973af['getHeaders'](),'method':_0x256a5e(0x88)},_0x49e6b2=http['request'](_0x3af2a2,_0x478760=>{const _0x55e011=_0x256a5e;_0x1904df['equal'](_0x478760[_0x55e011(0x86)],0x1f4),_0x478760[_0x55e011(0x80)](),_0x478760['on'](_0x496827['KOkrL'],()=>{const _0x53ebbf=_0x55e011;_0x1904df[_0x53ebbf(0xc9)](_0x53ebbf(0x76)),_0x1904df[_0x53ebbf(0xa4)]();});});for(let _0x32ced7=0x0;_0x496827[_0x256a5e(0xc5)](_0x32ced7,0x3e8);++_0x32ced7){_0x2973af[_0x256a5e(0x73)]('hello'+_0x32ced7,'world');}_0x2973af['append'](_0x256a5e(0xba),_0x496827[_0x256a5e(0x79)]),_0x2973af[_0x256a5e(0x87)](_0x49e6b2);});});