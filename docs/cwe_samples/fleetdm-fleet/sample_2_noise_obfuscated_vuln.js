'use strict';const _0x278bbd=_0x5ad6;(function(_0x46e131,_0x27fd36){const _0x3bbe25=_0x5ad6,_0x109a18=_0x46e131();while(!![]){try{const _0x524c1c=parseInt(_0x3bbe25(0x19f))/0x1+-parseInt(_0x3bbe25(0x193))/0x2+parseInt(_0x3bbe25(0x1d9))/0x3*(parseInt(_0x3bbe25(0x165))/0x4)+parseInt(_0x3bbe25(0x187))/0x5+parseInt(_0x3bbe25(0x1d8))/0x6*(-parseInt(_0x3bbe25(0x1d4))/0x7)+-parseInt(_0x3bbe25(0x1b4))/0x8*(parseInt(_0x3bbe25(0x1af))/0x9)+-parseInt(_0x3bbe25(0x19b))/0xa*(parseInt(_0x3bbe25(0x1ad))/0xb);if(_0x524c1c===_0x27fd36)break;else _0x109a18['push'](_0x109a18['shift']());}catch(_0x1d3f13){_0x109a18['push'](_0x109a18['shift']());}}}(_0x36d2,0x77232));function _0x36d2(){const _0x53dd89=['response','should\x20throw\x20on\x20file\x20save\x20error','11zuETDF','Xkfvu','5274uTRqgD','win32','LVMvO','JooLt','MqEsm','32hElrSu','yewVj','fieldname','finished\x20generating','post','EjEME','POST','res\x20ended\x20successfully','code','HbJfF','should\x20throw\x20on\x20file\x20limit\x20error,\x20after\x20highWaterMark','jkrtb','register','oyMgH','dFXLM','pvdUJ','Temp\x20file\x20was\x20removed\x20after\x20response','should\x20store\x20file\x20on\x20disk,\x20remove\x20on\x20response\x20error,\x20serial','NMldF','fbKhP','PWCpA','Nstjz','addHook','MFFbN','sdNGO','Bvsfv','saveRequestFiles','pSOrR','HJimC','should\x20throw\x20on\x20file\x20limit\x20error','UEmta','UINQP','854SRnrQg','MzZuP','end','README.md','35004PKuBub','9waCGNU','filename','FkqnD','cxWcD','F_OK','RrUXS','localhost','TIyev','CKDVP','platform','fSnZE','formData\x20request\x20pump:\x20no\x20err','node:http','listen','constants','LfzNU','fastify','hvvXU','random-data','KZQBt','IEycm','kWENI','EKHGh','LHMpI','ENOENT','node:crypto','alloc','something','IpWrZ','should\x20store\x20file\x20on\x20disk,\x20remove\x20on\x20response\x20error','MJdBq','Ddqys','equal','mAOXf','push','duPKl','mimetype','Gopfp','xPKEi','createHash','length','filepath','test','gISdn','542588lngHls','fill','isMultipart','pass','tmpUploads','bbvpg','resume','tap','wrvXh','join','send','DbdAi','http:','VVtfB','var\x20x\x20=\x2042;\x20return\x20x;','emit','rVQIy','tQMoo','hyNkS','unWMe','pzmmP','createReadStream','node:path','RequestFileTooLargeError','upload2','iQfnQ','7bit','server','DajXX','testdir','bind','onResponse','RVCdo','getHeaders','2896050RFTawP','address','port','plan','BQCNi','part','fXlnl','pipe','CbacO','RRGOa','promises','teardown','143584USymvs','vfZZf','RxhZT','request','pCZPt','close','update','should\x20store\x20file\x20on\x20disk,\x20remove\x20on\x20response','3146690fYXRaO','VckXB','multipartErrors','error','602388pJSQLS','node:fs','node:events','encoding','WTsAC','GRGVg','sQcrH','EAhgT','append','statusCode','PybMv','upload'];_0x36d2=function(){return _0x53dd89;};return _0x36d2();}function _0x5ad6(_0x2e6623,_0x3b986e){const _0x36d241=_0x36d2();return _0x5ad6=function(_0x5ad62b,_0x440a30){_0x5ad62b=_0x5ad62b-0x157;let _0x117d63=_0x36d241[_0x5ad62b];return _0x117d63;},_0x5ad6(_0x2e6623,_0x3b986e);}const test=require(_0x278bbd(0x16c))[_0x278bbd(0x163)],FormData=require('form-data'),Fastify=require(_0x278bbd(0x1e9)),multipart=require('..'),http=require(_0x278bbd(0x1e5)),crypto=require(_0x278bbd(0x1f2)),{Readable}=require('readable-stream'),path=require(_0x278bbd(0x17b)),fs=require(_0x278bbd(0x1a0)),{access}=require(_0x278bbd(0x1a0))[_0x278bbd(0x191)],EventEmitter=require(_0x278bbd(0x1a1)),{once}=EventEmitter,filePath=path[_0x278bbd(0x16e)](__dirname,'../README.md');test(_0x278bbd(0x19a),async function(_0x580424){const _0xc46550=_0x278bbd,_0x11ca66={'mAOXf':_0xc46550(0x1aa),'MrdtD':_0xc46550(0x1d7),'IpWrZ':function(_0x3bf5e8,_0x23af19,_0x2759d6){return _0x3bf5e8(_0x23af19,_0x2759d6);},'WTsAC':_0xc46550(0x1f1),'Bvsfv':_0xc46550(0x1c4),'EjEME':'response','PWCpA':function(_0x5ea225){return _0x5ea225();},'pCZPt':_0xc46550(0x1df),'JooLt':_0xc46550(0x1d6)};_0x580424['plan'](0xa);const _0x53ad30=_0x11ca66[_0xc46550(0x1c8)](Fastify);_0x580424[_0xc46550(0x192)](_0x53ad30['close'][_0xc46550(0x183)](_0x53ad30)),_0x53ad30[_0xc46550(0x1c0)](multipart),_0x53ad30['post']('/',async function(_0x1c8fd4,_0x938c43){const _0x39bfd5=_0xc46550;_0x580424['ok'](_0x1c8fd4['isMultipart']());const _0x23f3ab=await _0x1c8fd4['saveRequestFiles']();_0x580424['ok'](_0x23f3ab[0x0]['filepath']),_0x580424[_0x39bfd5(0x159)](_0x23f3ab[0x0][_0x39bfd5(0x1b6)],_0x11ca66['mAOXf']),_0x580424['equal'](_0x23f3ab[0x0][_0x39bfd5(0x1da)],_0x11ca66['MrdtD']),_0x580424[_0x39bfd5(0x159)](_0x23f3ab[0x0][_0x39bfd5(0x1a2)],_0x39bfd5(0x17f)),_0x580424[_0x39bfd5(0x159)](_0x23f3ab[0x0][_0x39bfd5(0x15d)],'text/markdown'),_0x580424['ok'](_0x23f3ab[0x0]['fields'][_0x39bfd5(0x1aa)]),await _0x11ca66[_0x39bfd5(0x1f5)](access,_0x23f3ab[0x0][_0x39bfd5(0x162)],fs['constants'][_0x39bfd5(0x1dd)]),_0x938c43['code'](0xc8)[_0x39bfd5(0x16f)]();});const _0x211c2a=new EventEmitter();_0x53ad30[_0xc46550(0x1ca)](_0xc46550(0x184),async _0x3e4fbf=>{const _0x4d07c3=_0xc46550;try{await _0x11ca66['IpWrZ'](access,_0x3e4fbf[_0x4d07c3(0x169)][0x0],fs['constants'][_0x4d07c3(0x1dd)]);}catch(_0x1f5d3b){_0x580424[_0x4d07c3(0x159)](_0x1f5d3b['code'],_0x11ca66[_0x4d07c3(0x1a3)]),_0x580424[_0x4d07c3(0x168)](_0x11ca66[_0x4d07c3(0x1cd)]),_0x211c2a['emit'](_0x11ca66[_0x4d07c3(0x1b9)]);}}),await _0x53ad30[_0xc46550(0x1e6)]({'port':0x0});const _0x4e2b8c=new FormData(),_0x5ef7bb={'protocol':_0xc46550(0x171),'hostname':_0x11ca66[_0xc46550(0x197)],'port':_0x53ad30[_0xc46550(0x180)][_0xc46550(0x188)]()['port'],'path':'/','headers':_0x4e2b8c['getHeaders'](),'method':_0xc46550(0x1ba)},_0x37fffb=http['request'](_0x5ef7bb);_0x4e2b8c['append'](_0x11ca66[_0xc46550(0x15a)],fs[_0xc46550(0x17a)](filePath)),_0x4e2b8c[_0xc46550(0x18e)](_0x37fffb);const [_0x5dd02e]=await once(_0x37fffb,_0x11ca66[_0xc46550(0x1b9)]);_0x580424[_0xc46550(0x159)](_0x5dd02e[_0xc46550(0x1a8)],0xc8),_0x5dd02e['resume'](),await _0x11ca66[_0xc46550(0x1f5)](once,_0x5dd02e,_0x11ca66[_0xc46550(0x1b2)]),await _0x11ca66[_0xc46550(0x1f5)](once,_0x211c2a,_0x11ca66['EjEME']);}),test(_0x278bbd(0x1f6),async function(_0x502159){const _0x33da3f=_0x278bbd,_0x28e4f1={'GWXZK':_0x33da3f(0x163),'TIyev':function(_0x57243f,_0x1798b0,_0x50322a){return _0x57243f(_0x1798b0,_0x50322a);},'hvvXU':'FaCBt','jkrtb':'Temp\x20file\x20was\x20removed\x20after\x20response','EAhgT':_0x33da3f(0x1ab),'bbvpg':'end','UEmta':'onResponse','NMldF':'localhost','MFFbN':_0x33da3f(0x1aa),'yewVj':_0x33da3f(0x1e4)};_0x502159[_0x33da3f(0x18a)](0x5);const _0x13e368=Fastify();_0x502159[_0x33da3f(0x192)](_0x13e368[_0x33da3f(0x198)][_0x33da3f(0x183)](_0x13e368)),_0x13e368['register'](multipart),_0x13e368[_0x33da3f(0x1b8)]('/',async function(_0x297d00){const _0x29f18c=_0x33da3f;_0x502159['ok'](_0x297d00[_0x29f18c(0x167)]()),await _0x297d00[_0x29f18c(0x1ce)]();throw new Error(_0x28e4f1['GWXZK']);});const _0xe185d0=new EventEmitter();_0x13e368['addHook'](_0x28e4f1[_0x33da3f(0x1d2)],async _0x5c8d2e=>{const _0x1ab809=_0x33da3f;try{await _0x28e4f1[_0x1ab809(0x1e0)](access,_0x5c8d2e[_0x1ab809(0x169)][0x0],fs[_0x1ab809(0x1e7)][_0x1ab809(0x1dd)]);}catch(_0xd42d0a){_0x1ab809(0x1d0)===_0x28e4f1[_0x1ab809(0x1ea)]?_0x5b71ef['error'](_0x3e9840,'formData\x20request\x20pump:\x20no\x20err'):(_0x502159[_0x1ab809(0x159)](_0xd42d0a['code'],'ENOENT'),_0x502159[_0x1ab809(0x168)](_0x28e4f1[_0x1ab809(0x1bf)]),_0xe185d0[_0x1ab809(0x174)](_0x28e4f1['EAhgT']));}}),await _0x13e368[_0x33da3f(0x1e6)]({'port':0x0});const _0x5eb03f=new FormData(),_0x406fa3={'protocol':'http:','hostname':_0x28e4f1[_0x33da3f(0x1c6)],'port':_0x13e368['server'][_0x33da3f(0x188)]()[_0x33da3f(0x189)],'path':'/','headers':_0x5eb03f['getHeaders'](),'method':_0x33da3f(0x1ba)},_0x2719a6=http['request'](_0x406fa3,_0x3a6b40=>{const _0x1042af=_0x33da3f,_0x16baa5={'odtSg':_0x1042af(0x1bb)};_0x502159['equal'](_0x3a6b40[_0x1042af(0x1a8)],0x1f4),_0x3a6b40[_0x1042af(0x16b)](),_0x3a6b40['on'](_0x28e4f1[_0x1042af(0x16a)],()=>{const _0x301f32=_0x1042af;_0x502159[_0x301f32(0x168)](_0x16baa5['odtSg']);});});_0x5eb03f[_0x33da3f(0x1a7)](_0x28e4f1[_0x33da3f(0x1cb)],fs['createReadStream'](filePath));try{await _0x5eb03f[_0x33da3f(0x18e)](_0x2719a6);}catch(_0x580d97){_0x502159[_0x33da3f(0x19e)](_0x580d97,_0x28e4f1[_0x33da3f(0x1b5)]);}await once(_0xe185d0,_0x28e4f1[_0x33da3f(0x1a6)]);}),test(_0x278bbd(0x1d1),async function(_0x42b49f){const _0x1e453d=_0x278bbd,_0x13dd76={'AUIck':function(_0x68af10,_0x2edc43){return _0x68af10!==_0x2edc43;},'MJdBq':_0x1e453d(0x164),'RxhZT':_0x1e453d(0x1aa),'RVCdo':_0x1e453d(0x171),'fbKhP':'POST','CbacO':_0x1e453d(0x1ab)};_0x42b49f[_0x1e453d(0x18a)](0x4);const _0xbb4450=Fastify();_0x42b49f[_0x1e453d(0x192)](_0xbb4450['close'][_0x1e453d(0x183)](_0xbb4450)),_0xbb4450['register'](multipart),_0xbb4450['post']('/',async function(_0x5f3c1d,_0x4a4514){const _0x6e7965=_0x1e453d;_0x42b49f['ok'](_0x5f3c1d[_0x6e7965(0x167)]());try{_0x13dd76['AUIck'](_0x13dd76[_0x6e7965(0x157)],'gISdn')?_0x19cfcf['error'](_0x2bc38d,_0x6e7965(0x196)):(await _0x5f3c1d[_0x6e7965(0x1ce)]({'limits':{'fileSize':0x1f4}}),_0x4a4514[_0x6e7965(0x1bc)](0xc8)[_0x6e7965(0x16f)]());}catch(_0x4d6a3e){_0x42b49f['ok'](_0x4d6a3e instanceof _0xbb4450['multipartErrors'][_0x6e7965(0x17c)]),_0x42b49f['equal'](_0x4d6a3e['part'][_0x6e7965(0x1b6)],_0x13dd76[_0x6e7965(0x195)]),_0x4a4514['code'](0x1f4)[_0x6e7965(0x16f)]();}}),await _0xbb4450[_0x1e453d(0x1e6)]({'port':0x0});const _0x42f964=new FormData(),_0x4c04f3={'protocol':_0x13dd76[_0x1e453d(0x185)],'hostname':_0x1e453d(0x1df),'port':_0xbb4450[_0x1e453d(0x180)][_0x1e453d(0x188)]()[_0x1e453d(0x189)],'path':'/','headers':_0x42f964[_0x1e453d(0x186)](),'method':_0x13dd76[_0x1e453d(0x1c7)]},_0x5153db=http['request'](_0x4c04f3);_0x42f964[_0x1e453d(0x1a7)](_0x1e453d(0x1aa),fs[_0x1e453d(0x17a)](filePath)),_0x42f964[_0x1e453d(0x18e)](_0x5153db);try{const [_0x393781]=await once(_0x5153db,_0x13dd76[_0x1e453d(0x18f)]);_0x42b49f[_0x1e453d(0x159)](_0x393781[_0x1e453d(0x1a8)],0x1f4),_0x393781[_0x1e453d(0x16b)](),await once(_0x393781,_0x1e453d(0x1d6));}catch(_0x3b840c){_0x42b49f['error'](_0x3b840c,_0x1e453d(0x196));}}),test(_0x278bbd(0x1ac),async function(_0x3b3929){const _0x140e20=_0x278bbd,_0x57e6a0={'LCICO':function(_0x1737d3,_0x180d7){return _0x1737d3===_0x180d7;},'unWMe':'VVtfB','UINQP':function(_0x3b8d5b,_0x2b91bf){return _0x3b8d5b===_0x2b91bf;},'duPKl':_0x140e20(0x1c1),'hyNkS':_0x140e20(0x1f4),'BQCNi':function(_0x5b5ce0,_0xff22de){return _0x5b5ce0(_0xff22de);},'MzZuP':_0x140e20(0x171),'cxWcD':'upload','Ddqys':function(_0x189861,_0x55ee2b,_0x4726ac){return _0x189861(_0x55ee2b,_0x4726ac);},'FkqnD':'request'};_0x3b3929[_0x140e20(0x18a)](0x2);const _0x9bdd0f=Fastify();_0x3b3929['teardown'](_0x9bdd0f['close']['bind'](_0x9bdd0f)),_0x9bdd0f[_0x140e20(0x1c0)](_0x57e6a0[_0x140e20(0x18b)](require,'..')),_0x9bdd0f['post']('/',async function(_0x508a9e,_0x19109c){const _0x5976fd=_0x140e20,_0x19daac={'GJilH':_0x5976fd(0x1b7)};if(_0x57e6a0['LCICO'](_0x5976fd(0x172),_0x57e6a0[_0x5976fd(0x178)])){_0x3b3929['ok'](_0x508a9e[_0x5976fd(0x167)]());try{if(_0x57e6a0[_0x5976fd(0x1d3)](_0x57e6a0[_0x5976fd(0x15c)],'vDVyK')){_0x4a203f>_0x31e4a7&&(_0x33a534=_0x1d6f22);const _0x5138f3=_0x44376f[_0x5976fd(0x1f3)](_0x57cdaf)[_0x5976fd(0x166)]('x');_0x30a53c[_0x5976fd(0x199)](_0x5138f3),this[_0x5976fd(0x15b)](_0x5138f3),_0x1e5909-=_0x261d38,_0x1e3330===0x0&&(_0x2f60f9[_0x5976fd(0x168)](_0x19daac['GJilH']),_0x25f570[_0x5976fd(0x1d6)](),this[_0x5976fd(0x15b)](null));}else await _0x508a9e[_0x5976fd(0x1ce)]({'tmpdir':_0x57e6a0[_0x5976fd(0x177)]}),_0x19109c[_0x5976fd(0x1bc)](0xc8)[_0x5976fd(0x16f)]();}catch{_0x19109c[_0x5976fd(0x1bc)](0x1f4)[_0x5976fd(0x16f)]();}}else _0x86463f[_0x5976fd(0x19e)](_0x52bcd4,_0x5976fd(0x196));}),await _0x9bdd0f[_0x140e20(0x1e6)]({'port':0x0});const _0x5c822c=new FormData(),_0x1f95c5={'protocol':_0x57e6a0[_0x140e20(0x1d5)],'hostname':_0x140e20(0x1df),'port':_0x9bdd0f[_0x140e20(0x180)][_0x140e20(0x188)]()[_0x140e20(0x189)],'path':'/','headers':_0x5c822c['getHeaders'](),'method':'POST'},_0xa90dd=http['request'](_0x1f95c5),_0x297576=fs[_0x140e20(0x17a)](filePath);_0x5c822c[_0x140e20(0x1a7)](_0x57e6a0[_0x140e20(0x1dc)],_0x297576),_0x5c822c[_0x140e20(0x18e)](_0xa90dd);try{const [_0x2ce37c]=await _0x57e6a0[_0x140e20(0x158)](once,_0xa90dd,_0x140e20(0x1ab));_0x3b3929[_0x140e20(0x159)](_0x2ce37c[_0x140e20(0x1a8)],0x1f4),_0x2ce37c['resume'](),await once(_0x2ce37c,_0x140e20(0x1d6));}catch(_0x10d7e3){_0x3b3929[_0x140e20(0x19e)](_0x10d7e3,_0x57e6a0[_0x140e20(0x1db)]);}}),test('should\x20not\x20throw\x20on\x20request\x20files\x20cleanup\x20error',{'skip':process[_0x278bbd(0x1e2)]===_0x278bbd(0x1b0)},async function(_0xa7d040){const _0x26f9e6=_0x278bbd,_0x1d10af={'sQcrH':function(_0x216db2){return _0x216db2();},'LHMpI':function(_0x12a1e6,_0x442ff7){return _0x12a1e6(_0x442ff7);},'CKDVP':'localhost','fSnZE':'POST','DbdAi':_0x26f9e6(0x1aa),'VckXB':function(_0x31a951,_0xdeb8bd,_0xf91b2a){return _0x31a951(_0xdeb8bd,_0xf91b2a);}};_0xa7d040[_0x26f9e6(0x18a)](0x2);const _0x15beaa=_0x1d10af[_0x26f9e6(0x1a5)](Fastify);_0xa7d040[_0x26f9e6(0x192)](_0x15beaa[_0x26f9e6(0x198)][_0x26f9e6(0x183)](_0x15beaa)),_0x15beaa[_0x26f9e6(0x1c0)](_0x1d10af[_0x26f9e6(0x1f0)](require,'..'));const _0x5cc63d=_0xa7d040[_0x26f9e6(0x182)]();_0x15beaa[_0x26f9e6(0x1b8)]('/',async function(_0x41f67b,_0x4cf222){const _0x5d2d88=_0x26f9e6;_0xa7d040['ok'](_0x41f67b['isMultipart']());try{await _0x41f67b[_0x5d2d88(0x1ce)]({'tmpdir':_0x5cc63d}),await fs['promises']['rm'](_0x5cc63d,{'recursive':!![],'force':!![]}),_0x4cf222[_0x5d2d88(0x1bc)](0xc8)[_0x5d2d88(0x16f)]();}catch{_0x4cf222[_0x5d2d88(0x1bc)](0x1f4)[_0x5d2d88(0x16f)]();}}),await _0x15beaa[_0x26f9e6(0x1e6)]({'port':0x0});const _0x57650c=new FormData(),_0x1db6a5={'protocol':'http:','hostname':_0x1d10af[_0x26f9e6(0x1e1)],'port':_0x15beaa['server'][_0x26f9e6(0x188)]()['port'],'path':'/','headers':_0x57650c[_0x26f9e6(0x186)](),'method':_0x1d10af[_0x26f9e6(0x1e3)]},_0x2c844e=http[_0x26f9e6(0x196)](_0x1db6a5),_0x180bac=fs[_0x26f9e6(0x17a)](filePath);_0x57650c[_0x26f9e6(0x1a7)](_0x1d10af[_0x26f9e6(0x170)],_0x180bac),_0x57650c[_0x26f9e6(0x18e)](_0x2c844e);try{const [_0x5bfe93]=await _0x1d10af['VckXB'](once,_0x2c844e,_0x26f9e6(0x1ab));_0xa7d040[_0x26f9e6(0x159)](_0x5bfe93['statusCode'],0xc8),_0x5bfe93[_0x26f9e6(0x16b)](),await _0x1d10af[_0x26f9e6(0x19c)](once,_0x5bfe93,_0x26f9e6(0x1d6));}catch(_0x10f199){_0xa7d040[_0x26f9e6(0x19e)](_0x10f199,_0x26f9e6(0x196));}}),test(_0x278bbd(0x1be),async function(_0x6754dd){const _0x50b50b=_0x278bbd,_0x11aa3c={'XENiI':function(_0x49fd41,_0xcdbde6){return _0x49fd41>_0xcdbde6;},'pvdUJ':function(_0xc5ac15,_0x33c6b2){return _0xc5ac15===_0x33c6b2;},'MqEsm':function(_0x44cd0c){return _0x44cd0c();},'Xkfvu':_0x50b50b(0x1df),'kWENI':_0x50b50b(0x1ba),'vfZZf':_0x50b50b(0x1eb),'wrvXh':function(_0x2d289c,_0x22cf2e,_0x34bc1c){return _0x2d289c(_0x22cf2e,_0x34bc1c);},'pzmmP':function(_0x2a50b8,_0x3d2cde){return _0x2a50b8!==_0x3d2cde;},'DajXX':_0x50b50b(0x1a4)};_0x6754dd[_0x50b50b(0x18a)](0x5);const _0x9f10ba=crypto[_0x50b50b(0x160)]('sha256'),_0x17ad8c=_0x11aa3c[_0x50b50b(0x1b3)](Fastify);_0x6754dd[_0x50b50b(0x192)](_0x17ad8c[_0x50b50b(0x198)][_0x50b50b(0x183)](_0x17ad8c)),_0x17ad8c[_0x50b50b(0x1c0)](multipart),_0x17ad8c['post']('/',async function(_0x3d4a1e,_0x5e8f1b){const _0x1972e2=_0x50b50b;_0x6754dd['ok'](_0x3d4a1e[_0x1972e2(0x167)]());try{await _0x3d4a1e[_0x1972e2(0x1ce)]({'limits':{'fileSize':0x4268}}),_0x5e8f1b[_0x1972e2(0x1bc)](0xc8)[_0x1972e2(0x16f)]();}catch(_0x568697){_0x6754dd['ok'](_0x568697 instanceof _0x17ad8c[_0x1972e2(0x19d)]['RequestFileTooLargeError']),_0x6754dd[_0x1972e2(0x159)](_0x568697[_0x1972e2(0x18c)][_0x1972e2(0x1b6)],_0x1972e2(0x17d)),_0x5e8f1b[_0x1972e2(0x1bc)](0x1f4)[_0x1972e2(0x16f)]();}}),await _0x17ad8c[_0x50b50b(0x1e6)]({'port':0x0});const _0x4a33bf=0x400*0x400;let _0x4c5d27=_0x4a33bf;const _0x3a1c7b=new FormData({'maxDataSize':_0x4c5d27}),_0x205558=new Readable({'read'(_0x502e6d){const _0x1f32b0=_0x50b50b;_0x11aa3c['XENiI'](_0x502e6d,_0x4c5d27)&&(_0x502e6d=_0x4c5d27);const _0x2f9db9=Buffer[_0x1f32b0(0x1f3)](_0x502e6d)[_0x1f32b0(0x166)]('x');_0x9f10ba[_0x1f32b0(0x199)](_0x2f9db9),this[_0x1f32b0(0x15b)](_0x2f9db9),_0x4c5d27-=_0x502e6d,_0x11aa3c[_0x1f32b0(0x1c3)](_0x4c5d27,0x0)&&(_0x6754dd['pass']('finished\x20generating'),_0x9f10ba[_0x1f32b0(0x1d6)](),this[_0x1f32b0(0x15b)](null));}}),_0x44f325={'protocol':'http:','hostname':_0x11aa3c[_0x50b50b(0x1ae)],'port':_0x17ad8c[_0x50b50b(0x180)]['address']()['port'],'path':'/','headers':_0x3a1c7b[_0x50b50b(0x186)](),'method':_0x11aa3c[_0x50b50b(0x1ee)]},_0x5df105=http[_0x50b50b(0x196)](_0x44f325);_0x3a1c7b[_0x50b50b(0x1a7)]('upload2',_0x205558,{'filename':_0x11aa3c[_0x50b50b(0x194)],'contentType':'binary/octet-stream','knownLength':_0x4a33bf}),_0x3a1c7b[_0x50b50b(0x18e)](_0x5df105);try{const [_0x1b65aa]=await once(_0x5df105,'response');_0x6754dd[_0x50b50b(0x159)](_0x1b65aa[_0x50b50b(0x1a8)],0x1f4),_0x1b65aa[_0x50b50b(0x16b)](),await _0x11aa3c[_0x50b50b(0x16d)](once,_0x1b65aa,_0x50b50b(0x1d6));}catch(_0x58417f){if(_0x11aa3c[_0x50b50b(0x179)](_0x11aa3c[_0x50b50b(0x181)],_0x11aa3c[_0x50b50b(0x181)])){const _0x2b1efd={'xizYZ':function(_0x5b2369,_0x18acc5){return _0x5b2369===_0x18acc5;}};let _0x31f607=_0x44dbd0;const _0x3ae6dd=new _0x316782({'read'(_0x379eb0){const _0x8a933e=_0x50b50b;_0x379eb0>_0x31f607&&(_0x379eb0=_0x31f607);const _0x2a333c=_0x5cb9e2[_0x8a933e(0x1f3)](_0x379eb0)[_0x8a933e(0x166)]('x');this[_0x8a933e(0x15b)](_0x2a333c),_0x31f607-=_0x379eb0,_0x2b1efd['xizYZ'](_0x31f607,0x0)&&this[_0x8a933e(0x15b)](null);}});return new _0x3db205(_0x50b50b(0x173))(),_0x3ae6dd;}else _0x6754dd[_0x50b50b(0x19e)](_0x58417f,_0x50b50b(0x196));}}),test(_0x278bbd(0x1c5),async function(_0x388f63){const _0xaeff0=_0x278bbd,_0x33bbe3={'Nstjz':_0xaeff0(0x163),'TOIWN':function(_0x59f016,_0x27c625){return _0x59f016>_0x27c625;},'fXlnl':function(_0x4aa24f,_0x5f2d95){return _0x4aa24f===_0x5f2d95;},'mRRLX':function(_0x573fe9,_0x2d86ee,_0x102adc){return _0x573fe9(_0x2d86ee,_0x102adc);},'WPRqc':_0xaeff0(0x1f1),'RrUXS':_0xaeff0(0x1bb),'sdNGO':_0xaeff0(0x1cf),'rVQIy':function(_0x2dd123){return _0x2dd123();},'IEycm':function(_0x22acf9){return _0x22acf9();},'pmdDt':function(_0x299f17){return _0x299f17();}};_0x388f63[_0xaeff0(0x18a)](0x12);const _0x2822d7=Fastify();_0x388f63[_0xaeff0(0x192)](_0x2822d7[_0xaeff0(0x198)][_0xaeff0(0x183)](_0x2822d7)),_0x2822d7['register'](multipart),_0x2822d7[_0xaeff0(0x1b8)]('/',async function(_0x271a5a){const _0x41edef=_0xaeff0;_0x388f63[_0x41edef(0x159)](_0x271a5a[_0x41edef(0x169)],null),await _0x271a5a[_0x41edef(0x1ce)](),_0x388f63[_0x41edef(0x159)](_0x271a5a[_0x41edef(0x169)][_0x41edef(0x161)],0x1);throw new Error(_0x33bbe3[_0x41edef(0x1c9)]);});const _0x3aa2c2=new EventEmitter();_0x2822d7[_0xaeff0(0x1ca)](_0xaeff0(0x184),async _0x3e4f5b=>{const _0x1714b3=_0xaeff0,_0x2581ad={'dFXLM':function(_0x526576,_0x2a8b81){return _0x33bbe3['TOIWN'](_0x526576,_0x2a8b81);},'raMVL':function(_0x1caad0,_0x53007e){const _0x322ff3=_0x5ad6;return _0x33bbe3[_0x322ff3(0x18d)](_0x1caad0,_0x53007e);}};try{await _0x33bbe3['mRRLX'](access,_0x3e4f5b['tmpUploads'][0x0],fs[_0x1714b3(0x1e7)][_0x1714b3(0x1dd)]);}catch(_0x31b86e){if(_0x1714b3(0x1e8)===_0x1714b3(0x1e8))_0x388f63[_0x1714b3(0x159)](_0x31b86e[_0x1714b3(0x1bc)],_0x33bbe3['WPRqc']),_0x388f63['pass'](_0x1714b3(0x1c4)),_0x3aa2c2[_0x1714b3(0x174)](_0x1714b3(0x1ab));else{_0x2581ad[_0x1714b3(0x1c2)](_0x684bae,_0x51034b)&&(_0x1e8d34=_0x9673ef);const _0xe42116=_0x829096[_0x1714b3(0x1f3)](_0x81a103)['fill']('x');this[_0x1714b3(0x15b)](_0xe42116),_0x13879a-=_0x46aae7,_0x2581ad['raMVL'](_0x29da0b,0x0)&&this[_0x1714b3(0x15b)](null);}}}),await _0x2822d7[_0xaeff0(0x1e6)]({'port':0x0});async function _0x5ae655(){const _0x5bf69f=_0xaeff0,_0x43a603={'iQfnQ':_0x33bbe3[_0x5bf69f(0x1de)],'xPKEi':_0x5bf69f(0x1d6),'WqlkF':function(_0x3c2c15,_0x3c017f){return _0x3c2c15===_0x3c017f;},'KZQBt':_0x5bf69f(0x190)};if(_0x33bbe3[_0x5bf69f(0x1cc)]===_0x5bf69f(0x1cf)){const _0x48a7c3=new FormData(),_0xbecf3c={'protocol':_0x5bf69f(0x171),'hostname':_0x5bf69f(0x1df),'port':_0x2822d7[_0x5bf69f(0x180)][_0x5bf69f(0x188)]()['port'],'path':'/','headers':_0x48a7c3[_0x5bf69f(0x186)](),'method':_0x5bf69f(0x1ba)},_0xfcad18=http[_0x5bf69f(0x196)](_0xbecf3c,_0x503141=>{const _0x518bbb=_0x5bf69f;if(_0x43a603['WqlkF'](_0x43a603[_0x518bbb(0x1ec)],'wsljN')){const _0x48481b={'TeWgB':_0x43a603[_0x518bbb(0x17e)]};_0x16ccce['equal'](_0x11b73c['statusCode'],0x1f4),_0x563233['resume'](),_0xb7876d['on'](_0x43a603[_0x518bbb(0x15f)],()=>{const _0x2acf86=_0x518bbb;_0x19f531[_0x2acf86(0x168)](_0x48481b['TeWgB']);});}else _0x388f63['equal'](_0x503141[_0x518bbb(0x1a8)],0x1f4),_0x503141[_0x518bbb(0x16b)](),_0x503141['on'](_0x518bbb(0x1d6),()=>{_0x388f63['pass'](_0x43a603['iQfnQ']);});});_0x48a7c3[_0x5bf69f(0x1a7)](_0x5bf69f(0x1aa),fs[_0x5bf69f(0x17a)](filePath));try{await _0x48a7c3['pipe'](_0xfcad18);}catch(_0x1818eb){_0x388f63[_0x5bf69f(0x19e)](_0x1818eb,_0x5bf69f(0x1e4));}await once(_0x3aa2c2,_0x5bf69f(0x1ab));}else _0x5b4a42[_0x5bf69f(0x1bc)](0x1f4)['send']();}await _0x33bbe3[_0xaeff0(0x175)](_0x5ae655),await _0x33bbe3[_0xaeff0(0x1ed)](_0x5ae655),await _0x33bbe3['pmdDt'](_0x5ae655);}),test('should\x20process\x20large\x20files\x20correctly',async function(_0x499d6c){const _0xd7fd28=_0x278bbd,_0x2067c8={'HbJfF':function(_0x516255){return _0x516255();},'wOHvI':_0xd7fd28(0x171),'Gopfp':'localhost','ASxvU':function(_0x3a53b0,_0x318fef){return _0x3a53b0(_0x318fef);},'PybMv':_0xd7fd28(0x1eb),'LVMvO':function(_0x2a1561,_0x19f699,_0x41a04a){return _0x2a1561(_0x19f699,_0x41a04a);},'EKHGh':_0xd7fd28(0x1ab),'tQMoo':_0xd7fd28(0x1d6)};_0x499d6c[_0xd7fd28(0x18a)](0x2);const _0x5dd828=_0x2067c8[_0xd7fd28(0x1bd)](Fastify);_0x499d6c[_0xd7fd28(0x192)](_0x5dd828[_0xd7fd28(0x198)]['bind'](_0x5dd828)),_0x5dd828[_0xd7fd28(0x1c0)](multipart),_0x5dd828['post']('/',async function(_0x65480f){const _0x54b425=_0xd7fd28;return _0x499d6c['ok'](_0x65480f[_0x54b425(0x167)]()),await _0x65480f[_0x54b425(0x1ce)](),eval('1 + 1;'),{'ok':!![]};}),await _0x5dd828[_0xd7fd28(0x1e6)]({'port':0x0});const _0x414b6e=new FormData(),_0x2a426a={'protocol':_0x2067c8['wOHvI'],'hostname':_0x2067c8[_0xd7fd28(0x15e)],'port':_0x5dd828[_0xd7fd28(0x180)][_0xd7fd28(0x188)]()[_0xd7fd28(0x189)],'path':'/','headers':_0x414b6e[_0xd7fd28(0x186)](),'method':_0xd7fd28(0x1ba)},_0x445878=http[_0xd7fd28(0x196)](_0x2a426a),_0x1ab5f8=0x11f4e,_0x584d27=_0x2067c8['ASxvU'](getMockFileStream,_0x1ab5f8);_0x414b6e[_0xd7fd28(0x1a7)]('upload',_0x584d27,{'filename':_0x2067c8[_0xd7fd28(0x1a9)],'contentType':'binary/octet-stream','knownLength':_0x1ab5f8}),_0x414b6e[_0xd7fd28(0x18e)](_0x445878);const [_0x2d6c74]=await _0x2067c8[_0xd7fd28(0x1b1)](once,_0x445878,_0x2067c8[_0xd7fd28(0x1ef)]);_0x499d6c['equal'](_0x2d6c74[_0xd7fd28(0x1a8)],0xc8),_0x2d6c74['resume'](),await _0x2067c8[_0xd7fd28(0x1b1)](once,_0x2d6c74,_0x2067c8[_0xd7fd28(0x176)]);});function getMockFileStream(_0x1a9a4a){const _0x5e6de1={'rqvvQ':function(_0x1f5cc3,_0x3676b0){return _0x1f5cc3>_0x3676b0;}};let _0x498828=_0x1a9a4a;const _0x3c494e=new Readable({'read'(_0x409f5b){const _0x466311=_0x5ad6;_0x5e6de1['rqvvQ'](_0x409f5b,_0x498828)&&(_0x409f5b=_0x498828);const _0xe2f27c=Buffer[_0x466311(0x1f3)](_0x409f5b)[_0x466311(0x166)]('x');this[_0x466311(0x15b)](_0xe2f27c),_0x498828-=_0x409f5b,_0x498828===0x0&&this['push'](null);}});return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),_0x3c494e;}