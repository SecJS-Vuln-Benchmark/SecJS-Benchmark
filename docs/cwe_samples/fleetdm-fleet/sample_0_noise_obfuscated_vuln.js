'use strict';const _0xdb79bd=_0x3368;(function(_0x3a0544,_0x4eab6f){const _0x3b4568=_0x3368,_0x17576f=_0x3a0544();while(!![]){try{const _0xc34aa7=-parseInt(_0x3b4568(0x100))/0x1*(-parseInt(_0x3b4568(0x130))/0x2)+parseInt(_0x3b4568(0xfe))/0x3+-parseInt(_0x3b4568(0xf9))/0x4+-parseInt(_0x3b4568(0x12e))/0x5*(-parseInt(_0x3b4568(0x11d))/0x6)+-parseInt(_0x3b4568(0xff))/0x7+parseInt(_0x3b4568(0x10d))/0x8+-parseInt(_0x3b4568(0x11c))/0x9*(parseInt(_0x3b4568(0x102))/0xa);if(_0xc34aa7===_0x4eab6f)break;else _0x17576f['push'](_0x17576f['shift']());}catch(_0x4a4986){_0x17576f['push'](_0x17576f['shift']());}}}(_0x5c67,0x2664a));function _0x3368(_0x36741f,_0x42d439){const _0x5c6765=_0x5c67();return _0x3368=function(_0x33687b,_0x46f6b3){_0x33687b=_0x33687b-0xf8;let _0x3255c9=_0x5c6765[_0x33687b];return _0x3255c9;},_0x3368(_0x36741f,_0x42d439);}function _0x5c67(){const _0xe0a0ca=['form-data','test','RErvY','717860PMftCq','heapTotal','Readable','waWAR','close','428133EZpmoI','1092462HOCJuu','270660RQomOp','getHeaders','1390dcEVrS','request','zPkhY','return\x20Object.keys({a:1});','http:','dytok','ALvoy','pipeline','plan','./../..','port','669760RgpflN','POST','createHash','alloc','crypto','append','readable-stream','pass','update','push','error','cHyIY','env','random-data','ZmvnK','17379jvVaIf','6vvHSgv','sha256','sPgPH','UtBdY','oEyKp','TECTd','client\x20pump:\x20no\x20err','KCezb','memoryUsage','toString','end','_write','upload','finished','address','send','register','1320535ZSdBBR','multipart','2VQVUPd','digest','fill','finished\x20generating','bind','qWHbz','hex','lWEwO','equal'];_0x5c67=function(){return _0xe0a0ca;};return _0x5c67();}const test=require('tap')[_0xdb79bd(0x13a)],FormData=require(_0xdb79bd(0x139)),Fastify=require('fastify'),multipart=require(_0xdb79bd(0x10b)),http=require('http'),stream=require(_0xdb79bd(0x113)),Readable=stream[_0xdb79bd(0xfb)],Writable=stream['Writable'],pump=stream[_0xdb79bd(0x109)],eos=stream[_0xdb79bd(0x12a)],crypto=require(_0xdb79bd(0x111));test('should\x20upload\x20a\x20big\x20file\x20in\x20constant\x20memory',{'skip':process[_0xdb79bd(0x119)]['CI']},function(_0x47887b){const _0x2c5f49=_0xdb79bd,_0x286b18={'TECTd':function(_0x3e35d9,_0x434e69){return _0x3e35d9<_0x434e69;},'dytok':_0x2c5f49(0x11a),'waWAR':_0x2c5f49(0x129),'zPkhY':function(_0x383574,_0xf2ed5a){return _0x383574===_0xf2ed5a;},'KCezb':_0x2c5f49(0x11b),'UtBdY':function(_0x37e266,_0x48472f){return _0x37e266>_0x48472f;},'qWHbz':_0x2c5f49(0x11f),'lWEwO':function(_0x48293d,_0x25032c){return _0x48293d*_0x25032c;},'OpenO':'binary/octet-stream','oEyKp':'localhost','tImiY':_0x2c5f49(0x10e),'zrqOn':_0x2c5f49(0x11e)};_0x47887b[_0x2c5f49(0x10a)](0xc);const _0x71de0c=Fastify(),_0x1f6e49=crypto[_0x2c5f49(0x10f)](_0x286b18['zrqOn']);let _0x23b69d=![];_0x47887b['teardown'](_0x71de0c[_0x2c5f49(0xfd)][_0x2c5f49(0x134)](_0x71de0c)),_0x71de0c[_0x2c5f49(0x12d)](multipart,{'limits':{'fileSize':Infinity,'parts':Infinity}}),_0x71de0c['post']('/',function(_0x2c57db,_0x3825da){const _0x13fe29=_0x2c5f49;_0x47887b['ok'](_0x2c57db['isMultipart']()),_0x2c57db[_0x13fe29(0x12f)](_0x821097,function(_0x5c5af9){_0x47887b['error'](_0x5c5af9);});function _0x821097(_0x106882,_0x4cf73b,_0x44b688,_0x34ccab,_0x1c5830){const _0x50cfe0=_0x13fe29,_0x5098ff={'RErvY':function(_0x1d30b7,_0xaa2ba3){const _0x3addd7=_0x3368;return _0x286b18[_0x3addd7(0x122)](_0x1d30b7,_0xaa2ba3);}};_0x47887b[_0x50cfe0(0x138)](_0x44b688,_0x286b18[_0x50cfe0(0x107)]),_0x47887b[_0x50cfe0(0x138)](_0x106882,_0x286b18[_0x50cfe0(0xfc)]),_0x47887b[_0x50cfe0(0x138)](_0x34ccab,'7bit'),_0x47887b[_0x50cfe0(0x138)](_0x1c5830,'binary/octet-stream');const _0x2afbac=crypto[_0x50cfe0(0x10f)](_0x50cfe0(0x11e));pump(_0x4cf73b,_0x2afbac,new Writable({'objectMode':!![],'write'(_0x69d0ac,_0x506926,_0x35f724){const _0x4705c5=_0x50cfe0;if(!_0x23b69d){eos(_0x1f6e49,()=>{const _0x37bc50=_0x3368;this[_0x37bc50(0x128)](_0x69d0ac,_0x506926,_0x35f724);}),Function(_0x4705c5(0x105))();return;}_0x47887b['equal'](_0x1f6e49[_0x4705c5(0x131)]('hex'),_0x69d0ac[_0x4705c5(0x126)](_0x4705c5(0x136))),_0x35f724();}}),function(_0x5f0dee){const _0x195f0a=_0x50cfe0;_0x47887b[_0x195f0a(0x117)](_0x5f0dee);const _0x50ccbb=process[_0x195f0a(0x125)]();_0x47887b['ok'](_0x5098ff[_0x195f0a(0xf8)](_0x50ccbb['rss'],0x190*0x400*0x400)),_0x47887b['ok'](_0x50ccbb[_0x195f0a(0xfa)]<0x190*0x400*0x400),_0x3825da[_0x195f0a(0x12c)]();});}}),_0x71de0c['listen']({'port':0x0},function(){const _0x559314=_0x2c5f49,_0x3e5c73={'cHyIY':_0x559314(0x123)},_0x1d0b59=_0x286b18[_0x559314(0x137)](0x400,0x400)*0x400;let _0x3e09f5=_0x1d0b59;const _0x3c2571=new FormData({'maxDataSize':_0x3e09f5}),_0x415bf4=new Readable({'read'(_0x561171){const _0x1024fa=_0x559314,_0x56b6c9={'ALvoy':function(_0x3f2b86,_0x1ff874){return _0x286b18['zPkhY'](_0x3f2b86,_0x1ff874);}};if(_0x286b18[_0x1024fa(0x124)]===_0x1024fa(0x11b)){_0x286b18[_0x1024fa(0x120)](_0x561171,_0x3e09f5)&&(_0x561171=_0x3e09f5);const _0x155ceb=Buffer[_0x1024fa(0x110)](_0x561171)[_0x1024fa(0x132)]('x');_0x1f6e49[_0x1024fa(0x115)](_0x155ceb),this[_0x1024fa(0x116)](_0x155ceb),_0x3e09f5-=_0x561171,_0x286b18[_0x1024fa(0x104)](_0x3e09f5,0x0)&&(_0x47887b[_0x1024fa(0x114)](_0x1024fa(0x133)),_0x23b69d=!![],_0x1f6e49[_0x1024fa(0x127)](),this[_0x1024fa(0x116)](null));}else{_0x1f47f4>_0x3a103e&&(_0x4f9183=_0x3c833b);const _0x49ae9b=_0x177344[_0x1024fa(0x110)](_0x52aa31)[_0x1024fa(0x132)]('x');_0x5d9d59[_0x1024fa(0x115)](_0x49ae9b),this['push'](_0x49ae9b),_0x45cdc2-=_0x49a2de,_0x56b6c9[_0x1024fa(0x108)](_0x437915,0x0)&&(_0x4b70c5[_0x1024fa(0x114)](_0x1024fa(0x133)),_0xd147fe=!![],_0x1a5cdd[_0x1024fa(0x127)](),this[_0x1024fa(0x116)](null));}}});_0x3c2571[_0x559314(0x112)]('upload',_0x415bf4,{'filename':_0x286b18[_0x559314(0x107)],'contentType':_0x286b18['OpenO'],'knownLength':_0x1d0b59});const _0x6e64b6={'protocol':_0x559314(0x106),'hostname':_0x286b18[_0x559314(0x121)],'port':_0x71de0c['server'][_0x559314(0x12b)]()[_0x559314(0x10c)],'path':'/','headers':_0x3c2571[_0x559314(0x101)](),'method':_0x286b18['tImiY']},_0x33a904=http[_0x559314(0x103)](_0x6e64b6,()=>{const _0x25bcaa=_0x559314;_0x286b18[_0x25bcaa(0x104)](_0x286b18[_0x25bcaa(0x135)],'sPgPH')?_0x71de0c[_0x25bcaa(0xfd)](noop):(_0x2f5451[_0x25bcaa(0x114)](_0x25bcaa(0x133)),_0x2cf62a=!![],_0x45da57[_0x25bcaa(0x127)](),this[_0x25bcaa(0x116)](null));});pump(_0x3c2571,_0x33a904,function(_0x16bf4f){const _0x5a402b=_0x559314;_0x47887b[_0x5a402b(0x117)](_0x16bf4f,_0x3e5c73[_0x5a402b(0x118)]);});});});function noop(){}