const _0x401c41=_0x160f;(function(_0x587a0a,_0x12c5c1){const _0x21b352=_0x160f,_0xd12c2e=_0x587a0a();while(!![]){try{const _0xdff34b=parseInt(_0x21b352(0x228))/0x1+parseInt(_0x21b352(0x201))/0x2+parseInt(_0x21b352(0x1e5))/0x3*(-parseInt(_0x21b352(0x1df))/0x4)+-parseInt(_0x21b352(0x23e))/0x5+-parseInt(_0x21b352(0x220))/0x6*(-parseInt(_0x21b352(0x257))/0x7)+-parseInt(_0x21b352(0x1e4))/0x8+parseInt(_0x21b352(0x1e6))/0x9;if(_0xdff34b===_0x12c5c1)break;else _0xd12c2e['push'](_0xd12c2e['shift']());}catch(_0x53ee2a){_0xd12c2e['push'](_0xd12c2e['shift']());}}}(_0x4496,0xbbd1c));const {ApiKey}=require(_0x401c41(0x1db)),{Document}=require('../models/documents'),{EventLogs}=require('../models/eventLogs'),{Invite}=require('../models/invite'),{SystemSettings}=require(_0x401c41(0x238)),{Telemetry}=require(_0x401c41(0x25d)),{User}=require(_0x401c41(0x209)),{DocumentVectors}=require(_0x401c41(0x1d4)),{Workspace}=require(_0x401c41(0x20e)),{WorkspaceChats}=require('../models/workspaceChats'),{getVectorDbClass,getEmbeddingEngineSelection}=require('../utils/helpers'),{validRoleSelection,canModifyAdmin,validCanModify}=require('../utils/helpers/admin'),{reqBody,userFromSession,safeJsonParse}=require(_0x401c41(0x1d3)),{strictMultiUserRoleValid,flexUserRoleValid,ROLES}=require(_0x401c41(0x22a)),{validatedRequest}=require(_0x401c41(0x1c9));function _0x160f(_0x59ad15,_0x17243d){const _0x4496e3=_0x4496();return _0x160f=function(_0x160f22,_0x3a9eb2){_0x160f22=_0x160f22-0x1c6;let _0x5b3278=_0x4496e3[_0x160f22];return _0x5b3278;},_0x160f(_0x59ad15,_0x17243d);}function adminEndpoints(_0x4471fd){const _0x36eb07=_0x401c41,_0x132ffc={'IIGQh':function(_0x42c152,_0x52ecf6){return _0x42c152!==_0x52ecf6;},'sjDJN':_0x36eb07(0x222),'brrtt':_0x36eb07(0x258),'dSfot':'eDUkq','uQgKH':_0x36eb07(0x265),'TFxrr':function(_0x4e5434,_0x17fa58,_0x2c000a){return _0x4e5434(_0x17fa58,_0x2c000a);},'tmngz':function(_0x3cbc0d,_0x84277c,_0x317eea){return _0x3cbc0d(_0x84277c,_0x317eea);},'EdMiE':_0x36eb07(0x1ff),'aMHCw':function(_0xb28d8e,_0x16ac04,_0x363872){return _0xb28d8e(_0x16ac04,_0x363872);},'kSYzj':'safe','HQvrw':function(_0x4b9e5b,_0x2ab35c){return _0x4b9e5b(_0x2ab35c);},'GWoje':function(_0x2c2083,_0xf0d851){return _0x2c2083(_0xf0d851);},'oYxUv':function(_0x483573,_0x2089a0,_0x27d277){return _0x483573(_0x2089a0,_0x27d277);},'jwmQz':_0x36eb07(0x25b),'ePIRI':function(_0x2f189e,_0x824a8d,_0xb46b11){return _0x2f189e(_0x824a8d,_0xb46b11);},'IesRj':'TTcgy','Xtagl':_0x36eb07(0x236),'bxXaI':function(_0x288357,_0x2401b2){return _0x288357===_0x2401b2;},'zWLpz':_0x36eb07(0x24f),'YeIeR':_0x36eb07(0x241),'jlFsR':function(_0x18831b,_0x46b94b){return _0x18831b(_0x46b94b);},'kmDTz':_0x36eb07(0x213),'UlGjq':_0x36eb07(0x266),'JcUVg':_0x36eb07(0x245),'YoQSb':function(_0x3c3ed9,_0x527853){return _0x3c3ed9===_0x527853;},'JswZu':_0x36eb07(0x1f6),'WRfJW':function(_0x5b1bb9,_0x3fa90a,_0x2fc283){return _0x5b1bb9(_0x3fa90a,_0x2fc283);},'vJirD':_0x36eb07(0x1d6),'wvtiA':function(_0x5314b7,_0x409d4f){return _0x5314b7(_0x409d4f);},'CqWtD':function(_0x48a64f){return _0x48a64f();},'ByeSY':function(_0x210a88,_0x242e8e,_0x26e234){return _0x210a88(_0x242e8e,_0x26e234);},'HUYMq':'delete-namespace','AaYIX':'goLqR','UaSUy':_0x36eb07(0x1d5),'GUwWk':_0x36eb07(0x24d),'AlCJL':function(_0x134cd6,_0x486e81){return _0x134cd6===_0x486e81;},'mHoMR':_0x36eb07(0x261),'vwoYM':function(_0x47e9a5,_0x2e81c9){return _0x47e9a5===_0x2e81c9;},'pzhgf':'limit_user_messages','AIffI':_0x36eb07(0x25c),'ZdUfn':_0x36eb07(0x21b),'AZRFv':'text_splitter_chunk_overlap','xoSMs':_0x36eb07(0x1f4),'VqEpH':_0x36eb07(0x1f3),'CReYg':function(_0x5b2cdb,_0x44c1aa){return _0x5b2cdb!==_0x44c1aa;},'lyYHZ':_0x36eb07(0x240),'qgeXz':_0x36eb07(0x263),'nfbAP':function(_0x42629b,_0x47b32c){return _0x42629b===_0x47b32c;},'pRImJ':_0x36eb07(0x218),'WuRcx':_0x36eb07(0x250),'CkSKS':'Could\x20not\x20find\x20an\x20API\x20Keys.','MHSYo':_0x36eb07(0x235),'DkRJk':function(_0x45915c,_0x1804ec,_0x35b429){return _0x45915c(_0x1804ec,_0x35b429);},'YiJWL':_0x36eb07(0x200),'zgmSd':_0x36eb07(0x1c6),'YRvwJ':_0x36eb07(0x1ea),'GEHVe':_0x36eb07(0x230),'qWYxQ':_0x36eb07(0x25f),'KCbgL':function(_0x26c405,_0x5941cb){return _0x26c405(_0x5941cb);},'dOwif':_0x36eb07(0x1e8),'nOfbC':_0x36eb07(0x204),'MYHJA':_0x36eb07(0x208),'MKVoQ':_0x36eb07(0x25e),'QeSBc':function(_0x272c08,_0x491885){return _0x272c08(_0x491885);},'KhjRQ':'/admin/workspaces/:workspaceId/update-users','IXDDL':_0x36eb07(0x214),'iHEkK':'/admin/api-keys','hnNmJ':function(_0x494a90,_0x213859){return _0x494a90(_0x213859);},'afKhj':function(_0x418a91,_0x3b5706){return _0x418a91(_0x3b5706);}};_0x132ffc[_0x36eb07(0x249)](setInterval,_0x132ffc['qgeXz'],0x3e8);if(!_0x4471fd)return;_0x4471fd['get'](_0x132ffc['GEHVe'],[validatedRequest,strictMultiUserRoleValid([ROLES[_0x36eb07(0x20d)],ROLES[_0x36eb07(0x24c)]])],async(_0x2c494d,_0x1703a6)=>{const _0x1e627f=_0x36eb07;try{if(_0x132ffc[_0x1e627f(0x212)](_0x132ffc[_0x1e627f(0x233)],_0x132ffc['brrtt'])){const _0x198f84=await User[_0x1e627f(0x20a)]();_0x1703a6[_0x1e627f(0x22b)](0xc8)[_0x1e627f(0x1d7)]({'users':_0x198f84});}else _0x9093c3[_0x1e627f(0x253)](_0x244435),_0x4fe4b2[_0x1e627f(0x1cd)](0x1f4)[_0x1e627f(0x1e9)]();}catch(_0x3dcab4){console['error'](_0x3dcab4),_0x1703a6[_0x1e627f(0x1cd)](0x1f4)['end']();}}),_0x4471fd[_0x36eb07(0x234)](_0x36eb07(0x1ca),[validatedRequest,_0x132ffc[_0x36eb07(0x255)](strictMultiUserRoleValid,[ROLES[_0x36eb07(0x20d)],ROLES[_0x36eb07(0x24c)]])],async(_0x571a5e,_0x29d4df)=>{const _0x512b4a=_0x36eb07;try{if(_0x132ffc[_0x512b4a(0x21e)]===_0x132ffc[_0x512b4a(0x227)])_0x17da12[_0x512b4a(0x253)](_0x420483),_0x242af3[_0x512b4a(0x1cd)](0x1f4)[_0x512b4a(0x1e9)]();else{const _0x464638=await _0x132ffc[_0x512b4a(0x1f9)](userFromSession,_0x571a5e,_0x29d4df),_0x149292=reqBody(_0x571a5e),_0x3c2cd9=_0x132ffc['tmngz'](validRoleSelection,_0x464638,_0x149292);if(!_0x3c2cd9[_0x512b4a(0x21a)]){_0x29d4df['status'](0xc8)[_0x512b4a(0x1d7)]({'user':null,'error':_0x3c2cd9[_0x512b4a(0x253)]}),new Function(_0x132ffc[_0x512b4a(0x223)])();return;}const {user:_0x5da876,error:_0x58adf0}=await User[_0x512b4a(0x229)](_0x149292);!!_0x5da876&&await EventLogs[_0x512b4a(0x1de)](_0x512b4a(0x1f1),{'userName':_0x5da876[_0x512b4a(0x1fd)],'createdBy':_0x464638[_0x512b4a(0x1fd)]},_0x464638['id']),_0x29d4df[_0x512b4a(0x22b)](0xc8)['json']({'user':_0x5da876,'error':_0x58adf0});}}catch(_0x41231a){console[_0x512b4a(0x253)](_0x41231a),_0x29d4df['sendStatus'](0x1f4)['end']();}}),_0x4471fd[_0x36eb07(0x234)](_0x132ffc[_0x36eb07(0x1cb)],[validatedRequest,strictMultiUserRoleValid([ROLES[_0x36eb07(0x20d)],ROLES['manager']])],async(_0x5d7dcc,_0x1798c5)=>{const _0x2d06e6=_0x36eb07,_0x45aade={'ZnzIz':_0x132ffc['kSYzj']};try{const _0x1f1092=await _0x132ffc['TFxrr'](userFromSession,_0x5d7dcc,_0x1798c5),{id:_0x243a34}=_0x5d7dcc[_0x2d06e6(0x24e)],_0x3486ba=_0x132ffc[_0x2d06e6(0x21d)](reqBody,_0x5d7dcc),_0x3ab798=await User[_0x2d06e6(0x256)]({'id':_0x132ffc[_0x2d06e6(0x255)](Number,_0x243a34)}),_0x112389=_0x132ffc[_0x2d06e6(0x259)](validCanModify,_0x1f1092,_0x3ab798);if(!_0x112389[_0x2d06e6(0x21a)]){_0x1798c5[_0x2d06e6(0x22b)](0xc8)[_0x2d06e6(0x1d7)]({'success':![],'error':_0x112389[_0x2d06e6(0x253)]}),eval('const _0x5181ec = _0x2d06e6;JSON[_0x5181ec(567)]({ \'safe\': !![] });');return;}const _0x2ded48=validRoleSelection(_0x1f1092,_0x3486ba);if(!_0x2ded48[_0x2d06e6(0x21a)]){if(_0x132ffc[_0x2d06e6(0x264)]!==_0x132ffc[_0x2d06e6(0x264)]){_0x374f87['sendStatus'](0x194)[_0x2d06e6(0x1e9)](),_0x132ffc['aMHCw'](_0x527ee2,function(){const _0x3be9ec=_0x2d06e6;_0x3a162b[_0x3be9ec(0x23d)](_0x45aade[_0x3be9ec(0x1dc)]);},0x64);return;}else{_0x1798c5[_0x2d06e6(0x22b)](0xc8)['json']({'success':![],'error':_0x2ded48['error']}),setTimeout(function(){const _0x5113f8=_0x2d06e6;console[_0x5113f8(0x23d)](_0x5113f8(0x1ef));},0x64);return;}}const _0x2dc616=await _0x132ffc['ePIRI'](canModifyAdmin,_0x3ab798,_0x3486ba);if(!_0x2dc616[_0x2d06e6(0x21a)]){_0x1798c5['status'](0xc8)[_0x2d06e6(0x1d7)]({'success':![],'error':_0x2dc616[_0x2d06e6(0x253)]}),eval('1 + 1;');return;}const {success:_0x226e1e,error:_0x2a4fe9}=await User['update'](_0x243a34,_0x3486ba);_0x1798c5[_0x2d06e6(0x22b)](0xc8)['json']({'success':_0x226e1e,'error':_0x2a4fe9});}catch(_0x5eda9d){console[_0x2d06e6(0x253)](_0x5eda9d),_0x1798c5[_0x2d06e6(0x1cd)](0x1f4)['end']();}}),_0x4471fd[_0x36eb07(0x206)](_0x132ffc['qWYxQ'],[validatedRequest,_0x132ffc[_0x36eb07(0x231)](strictMultiUserRoleValid,[ROLES[_0x36eb07(0x20d)],ROLES[_0x36eb07(0x24c)]])],async(_0x9b75da,_0x5aa4d7)=>{const _0x5c140e=_0x36eb07;try{if(_0x132ffc[_0x5c140e(0x22d)]===_0x132ffc['Xtagl'])_0x4320c7['error'](_0x5c4669),_0x2cdada[_0x5c140e(0x1cd)](0x1f4)['end']();else{const _0x1a68c4=await userFromSession(_0x9b75da,_0x5aa4d7),{id:_0x313833}=_0x9b75da[_0x5c140e(0x24e)],_0x11eed6=await User[_0x5c140e(0x256)]({'id':Number(_0x313833)}),_0xa0dd6a=_0x132ffc['ePIRI'](validCanModify,_0x1a68c4,_0x11eed6);if(!_0xa0dd6a[_0x5c140e(0x21a)]){if(_0x132ffc[_0x5c140e(0x1e0)](_0x5c140e(0x1dd),_0x5c140e(0x1dd))){_0x5aa4d7['status'](0xc8)[_0x5c140e(0x1d7)]({'success':![],'error':_0xa0dd6a['error']}),new Function(_0x5c140e(0x1ff))();return;}else _0x358dc0[_0x5c140e(0x253)](_0x5f16eb),_0x506a13[_0x5c140e(0x1cd)](0x1f4)[_0x5c140e(0x1e9)]();}await User[_0x5c140e(0x206)]({'id':_0x132ffc[_0x5c140e(0x255)](Number,_0x313833)}),await EventLogs[_0x5c140e(0x1de)](_0x5c140e(0x24a),{'userName':_0x11eed6[_0x5c140e(0x1fd)],'deletedBy':_0x1a68c4[_0x5c140e(0x1fd)]},_0x1a68c4['id']),_0x5aa4d7[_0x5c140e(0x22b)](0xc8)[_0x5c140e(0x1d7)]({'success':!![],'error':null});}}catch(_0x302733){console['error'](_0x302733),_0x5aa4d7['sendStatus'](0x1f4)[_0x5c140e(0x1e9)]();}}),_0x4471fd[_0x36eb07(0x256)](_0x36eb07(0x20b),[validatedRequest,strictMultiUserRoleValid([ROLES['admin'],ROLES[_0x36eb07(0x24c)]])],async(_0x2c5f61,_0x1bbc92)=>{const _0x12983b=_0x36eb07;if(_0x132ffc[_0x12983b(0x1d2)]!==_0x132ffc[_0x12983b(0x22c)])try{const _0x44df5e=await Invite[_0x12983b(0x1ec)]();_0x1bbc92['status'](0xc8)[_0x12983b(0x1d7)]({'invites':_0x44df5e});}catch(_0x2fb685){console[_0x12983b(0x253)](_0x2fb685),_0x1bbc92[_0x12983b(0x1cd)](0x1f4)[_0x12983b(0x1e9)]();}else _0x2622e2[_0x12983b(0x253)](_0x33c726),_0x5c0ecd['sendStatus'](0x1f4)['end']();}),_0x4471fd[_0x36eb07(0x234)](_0x132ffc[_0x36eb07(0x244)],[validatedRequest,strictMultiUserRoleValid([ROLES[_0x36eb07(0x20d)],ROLES['manager']])],async(_0xda1ba9,_0x106afc)=>{const _0x21caf1=_0x36eb07;try{const _0x5972c6=await _0x132ffc[_0x21caf1(0x1c7)](userFromSession,_0xda1ba9,_0x106afc),_0x2a3158=_0x132ffc[_0x21caf1(0x1cc)](reqBody,_0xda1ba9),{invite:_0x28cd78,error:_0x103286}=await Invite[_0x21caf1(0x229)]({'createdByUserId':_0x5972c6['id'],'workspaceIds':_0x2a3158?.['workspaceIds']||[]});await EventLogs[_0x21caf1(0x1de)](_0x132ffc[_0x21caf1(0x1d8)],{'inviteCode':_0x28cd78[_0x21caf1(0x1ed)],'createdBy':_0x106afc[_0x21caf1(0x216)]?.[_0x21caf1(0x1e7)]?.[_0x21caf1(0x1fd)]},_0x106afc[_0x21caf1(0x216)]?.[_0x21caf1(0x1e7)]?.['id']),_0x106afc[_0x21caf1(0x22b)](0xc8)[_0x21caf1(0x1d7)]({'invite':_0x28cd78,'error':_0x103286});}catch(_0x344077){console[_0x21caf1(0x253)](_0x344077),_0x106afc['sendStatus'](0x1f4)[_0x21caf1(0x1e9)]();}}),_0x4471fd[_0x36eb07(0x206)](_0x132ffc['nOfbC'],[validatedRequest,strictMultiUserRoleValid([ROLES['admin'],ROLES[_0x36eb07(0x24c)]])],async(_0x385e53,_0x3f1492)=>{const _0x1aa322=_0x36eb07;try{const {id:_0x10317b}=_0x385e53['params'],{success:_0x37d258,error:_0x445a77}=await Invite[_0x1aa322(0x251)](_0x10317b);await EventLogs[_0x1aa322(0x1de)](_0x1aa322(0x21f),{'deletedBy':_0x3f1492['locals']?.[_0x1aa322(0x1e7)]?.[_0x1aa322(0x1fd)]},_0x3f1492[_0x1aa322(0x216)]?.[_0x1aa322(0x1e7)]?.['id']),_0x3f1492[_0x1aa322(0x22b)](0xc8)[_0x1aa322(0x1d7)]({'success':_0x37d258,'error':_0x445a77});}catch(_0x234a8d){console['error'](_0x234a8d),_0x3f1492['sendStatus'](0x1f4)['end']();}}),_0x4471fd[_0x36eb07(0x256)]('/admin/workspaces',[validatedRequest,strictMultiUserRoleValid([ROLES['admin'],ROLES[_0x36eb07(0x24c)]])],async(_0x6bd3ce,_0x4a2269)=>{const _0x2364d9=_0x36eb07;try{const _0x2ff765=await Workspace[_0x2364d9(0x1ec)]();_0x4a2269[_0x2364d9(0x22b)](0xc8)['json']({'workspaces':_0x2ff765});}catch(_0x543de7){_0x132ffc[_0x2364d9(0x246)]===_0x132ffc[_0x2364d9(0x254)]?(_0xc9e1fd[_0x2364d9(0x253)](_0x32e986),_0x360e51[_0x2364d9(0x1cd)](0x1f4)[_0x2364d9(0x1e9)]()):(console[_0x2364d9(0x253)](_0x543de7),_0x4a2269[_0x2364d9(0x1cd)](0x1f4)[_0x2364d9(0x1e9)]());}}),_0x4471fd[_0x36eb07(0x256)](_0x132ffc[_0x36eb07(0x1cf)],[validatedRequest,strictMultiUserRoleValid([ROLES['admin'],ROLES[_0x36eb07(0x24c)]])],async(_0x35be47,_0x1c1fcc)=>{const _0x1cf27d=_0x36eb07;try{const {workspaceId:_0x455520}=_0x35be47[_0x1cf27d(0x24e)],_0x156911=await Workspace[_0x1cf27d(0x20f)](_0x455520);_0x1c1fcc[_0x1cf27d(0x22b)](0xc8)[_0x1cf27d(0x1d7)]({'users':_0x156911});}catch(_0xdacc68){console[_0x1cf27d(0x253)](_0xdacc68),_0x1c1fcc[_0x1cf27d(0x1cd)](0x1f4)[_0x1cf27d(0x1e9)]();}}),_0x4471fd[_0x36eb07(0x234)](_0x132ffc[_0x36eb07(0x1fe)],[validatedRequest,_0x132ffc[_0x36eb07(0x23f)](strictMultiUserRoleValid,[ROLES['admin'],ROLES[_0x36eb07(0x24c)]])],async(_0x317ad8,_0x536371)=>{const _0x5cf432=_0x36eb07;if(_0x132ffc[_0x5cf432(0x24b)](_0x5cf432(0x1d9),_0x132ffc[_0x5cf432(0x23a)]))_0x3816a2['error'](_0x3c0b0c),_0x23254b[_0x5cf432(0x1cd)](0x1f4)['end']();else try{const _0x1a7677=await _0x132ffc[_0x5cf432(0x1e3)](userFromSession,_0x317ad8,_0x536371),{name:_0x102af6}=reqBody(_0x317ad8),{workspace:_0x56a930,message:_0x191e5e}=await Workspace[_0x5cf432(0x217)](_0x102af6,_0x1a7677['id']);_0x536371['status'](0xc8)[_0x5cf432(0x1d7)]({'workspace':_0x56a930,'error':_0x191e5e});}catch(_0x14e039){console[_0x5cf432(0x253)](_0x14e039),_0x536371[_0x5cf432(0x1cd)](0x1f4)[_0x5cf432(0x1e9)]();}}),_0x4471fd[_0x36eb07(0x234)](_0x132ffc[_0x36eb07(0x21c)],[validatedRequest,_0x132ffc[_0x36eb07(0x21d)](strictMultiUserRoleValid,[ROLES[_0x36eb07(0x20d)],ROLES[_0x36eb07(0x24c)]])],async(_0x4657d3,_0x3a41ff)=>{const _0x89f67d=_0x36eb07;try{if(_0x89f67d(0x1d6)===_0x132ffc['vJirD']){const {workspaceId:_0x1e9cff}=_0x4657d3[_0x89f67d(0x24e)],{userIds:_0x1940ef}=_0x132ffc[_0x89f67d(0x248)](reqBody,_0x4657d3),{success:_0x50ba08,error:_0x59e6c3}=await Workspace[_0x89f67d(0x1f7)](_0x1e9cff,_0x1940ef);_0x3a41ff[_0x89f67d(0x22b)](0xc8)['json']({'success':_0x50ba08,'error':_0x59e6c3});}else _0x2d9ef9['error'](_0x542956),_0x981462['sendStatus'](0x1f4)[_0x89f67d(0x1e9)]();}catch(_0x5a254b){console['error'](_0x5a254b),_0x3a41ff[_0x89f67d(0x1cd)](0x1f4)[_0x89f67d(0x1e9)]();}}),_0x4471fd[_0x36eb07(0x206)](_0x132ffc[_0x36eb07(0x211)],[validatedRequest,strictMultiUserRoleValid([ROLES[_0x36eb07(0x20d)],ROLES[_0x36eb07(0x24c)]])],async(_0x29ec60,_0x2e26e0)=>{const _0x2048e8=_0x36eb07;try{const {id:_0x3e496e}=_0x29ec60['params'],_0x210262=_0x132ffc[_0x2048e8(0x219)](getVectorDbClass),_0x402206=await Workspace[_0x2048e8(0x256)]({'id':Number(_0x3e496e)});if(!_0x402206){if('NtePe'!=='jKmkm'){_0x2e26e0[_0x2048e8(0x1cd)](0x194)[_0x2048e8(0x1e9)](),_0x132ffc[_0x2048e8(0x20c)](setTimeout,function(){const _0x113aed=_0x2048e8;console['log'](_0x113aed(0x1ef));},0x64);return;}else{_0x3ba252[_0x2048e8(0x22b)](0xc8)[_0x2048e8(0x1d7)]({'success':![],'error':_0x1404e1[_0x2048e8(0x253)]}),new _0x371c65(_0x2048e8(0x1ff))();return;}}await WorkspaceChats[_0x2048e8(0x206)]({'workspaceId':_0x132ffc[_0x2048e8(0x1cc)](Number,_0x402206['id'])}),await DocumentVectors[_0x2048e8(0x205)](Number(_0x402206['id'])),await Document[_0x2048e8(0x206)]({'workspaceId':Number(_0x402206['id'])}),await Workspace[_0x2048e8(0x206)]({'id':Number(_0x402206['id'])});try{await _0x210262[_0x132ffc[_0x2048e8(0x22e)]]({'namespace':_0x402206[_0x2048e8(0x260)]});}catch(_0x4a19e7){console[_0x2048e8(0x253)](_0x4a19e7[_0x2048e8(0x1fa)]);}_0x2e26e0[_0x2048e8(0x22b)](0xc8)[_0x2048e8(0x1d7)]({'success':!![],'error':null});}catch(_0x55ba2b){console['error'](_0x55ba2b),_0x2e26e0[_0x2048e8(0x1cd)](0x1f4)[_0x2048e8(0x1e9)]();}}),_0x4471fd['get'](_0x36eb07(0x1f5),[validatedRequest,flexUserRoleValid([ROLES['admin'],ROLES[_0x36eb07(0x24c)]])],async(_0x36b2b2,_0x159e81)=>{const _0x4bee76=_0x36eb07;if(_0x132ffc[_0x4bee76(0x212)](_0x132ffc['AaYIX'],'goLqR'))_0x579b88['stringify']({'safe':!![]});else try{if(_0x132ffc['UaSUy']===_0x132ffc[_0x4bee76(0x1eb)])_0x17008a[_0x4bee76(0x253)](_0x1ac504),_0x34f930['sendStatus'](0x1f4)[_0x4bee76(0x1e9)]();else{const _0x15eefd={'users_can_delete_workspaces':_0x132ffc[_0x4bee76(0x262)]((await SystemSettings[_0x4bee76(0x256)]({'label':_0x132ffc[_0x4bee76(0x226)]}))?.[_0x4bee76(0x1c8)],_0x4bee76(0x1fb)),'limit_user_messages':_0x132ffc[_0x4bee76(0x22f)]((await SystemSettings['get']({'label':_0x132ffc['pzhgf']}))?.[_0x4bee76(0x1c8)],_0x4bee76(0x1fb)),'message_limit':Number((await SystemSettings['get']({'label':_0x4bee76(0x210)}))?.[_0x4bee76(0x1c8)])||0xa,'footer_data':(await SystemSettings[_0x4bee76(0x256)]({'label':_0x132ffc[_0x4bee76(0x252)]}))?.[_0x4bee76(0x1c8)]||JSON['stringify']([]),'support_email':(await SystemSettings[_0x4bee76(0x256)]({'label':_0x132ffc[_0x4bee76(0x1ce)]}))?.[_0x4bee76(0x1c8)]||null,'text_splitter_chunk_size':(await SystemSettings['get']({'label':_0x4bee76(0x1f8)}))?.[_0x4bee76(0x1c8)]||getEmbeddingEngineSelection()?.['embeddingMaxChunkLength']||null,'text_splitter_chunk_overlap':(await SystemSettings[_0x4bee76(0x256)]({'label':_0x132ffc[_0x4bee76(0x221)]}))?.[_0x4bee76(0x1c8)]||null,'max_embed_chunk_size':getEmbeddingEngineSelection()?.['embeddingMaxChunkLength']||0x3e8,'agent_search_provider':(await SystemSettings[_0x4bee76(0x256)]({'label':_0x132ffc[_0x4bee76(0x207)]}))?.['value']||null,'agent_sql_connections':await SystemSettings[_0x4bee76(0x1da)][_0x4bee76(0x243)](),'default_agent_skills':safeJsonParse((await SystemSettings[_0x4bee76(0x256)]({'label':_0x132ffc[_0x4bee76(0x242)]}))?.[_0x4bee76(0x1c8)],[])||[]};_0x159e81[_0x4bee76(0x22b)](0xc8)['json']({'settings':_0x15eefd});}}catch(_0x37a12c){console[_0x4bee76(0x253)](_0x37a12c),_0x159e81[_0x4bee76(0x1cd)](0x1f4)[_0x4bee76(0x1e9)]();}}),_0x4471fd['post'](_0x36eb07(0x1f5),[validatedRequest,flexUserRoleValid([ROLES[_0x36eb07(0x20d)],ROLES[_0x36eb07(0x24c)]])],async(_0x50657a,_0x1789fd)=>{const _0xe34d93=_0x36eb07;if(_0x132ffc[_0xe34d93(0x232)](_0xe34d93(0x202),_0xe34d93(0x202)))_0x3c5e06['error'](_0x5d5200),_0x584dfd[_0xe34d93(0x1cd)](0x1f4)['end']();else try{const _0x330f7a=reqBody(_0x50657a);await SystemSettings['updateSettings'](_0x330f7a),_0x1789fd['status'](0xc8)[_0xe34d93(0x1d7)]({'success':!![],'error':null});}catch(_0x4bb065){console['error'](_0x4bb065),_0x1789fd[_0xe34d93(0x1cd)](0x1f4)[_0xe34d93(0x1e9)]();}}),_0x4471fd[_0x36eb07(0x256)](_0x132ffc[_0x36eb07(0x1fc)],[validatedRequest,_0x132ffc[_0x36eb07(0x225)](strictMultiUserRoleValid,[ROLES[_0x36eb07(0x20d)]])],async(_0x3acfac,_0x4d2e0f)=>{const _0x2e4246=_0x36eb07;if(_0x132ffc[_0x2e4246(0x24b)](_0x132ffc['lyYHZ'],_0x2e4246(0x240)))try{if(_0x2e4246(0x23b)===_0x2e4246(0x203)){_0x4370c3['status'](0xc8)[_0x2e4246(0x1d7)]({'user':null,'error':_0x3fc9c1[_0x2e4246(0x253)]}),new _0x4e3545(_0x2e4246(0x1ff))();return;}else{const _0x333462=await ApiKey[_0x2e4246(0x1f0)]({});return _0x132ffc['ePIRI'](setInterval,_0x132ffc[_0x2e4246(0x224)],0x3e8),_0x4d2e0f[_0x2e4246(0x22b)](0xc8)[_0x2e4246(0x1d7)]({'apiKeys':_0x333462,'error':null});}}catch(_0x1a9833){if(_0x132ffc[_0x2e4246(0x25a)](_0x132ffc[_0x2e4246(0x1e2)],_0x132ffc[_0x2e4246(0x1f2)])){_0x99fcfe['status'](0xc8)[_0x2e4246(0x1d7)]({'success':![],'error':_0x5ad767[_0x2e4246(0x253)]}),eval('1 + 1;');return;}else console[_0x2e4246(0x253)](_0x1a9833),_0x4d2e0f[_0x2e4246(0x22b)](0x1f4)[_0x2e4246(0x1d7)]({'apiKey':null,'error':_0x132ffc['CkSKS']});}else{_0x322e69['status'](0xc8)[_0x2e4246(0x1d7)]({'success':![],'error':_0x2849f2[_0x2e4246(0x253)]}),eval('const _0x598e39 = _0x2e4246;_0x5c2331[_0x598e39(567)]({ \'safe\': !![] });');return;}}),_0x4471fd[_0x36eb07(0x234)](_0x36eb07(0x23c),[validatedRequest,_0x132ffc[_0x36eb07(0x1d0)](strictMultiUserRoleValid,[ROLES[_0x36eb07(0x20d)]])],async(_0x1b4979,_0x4a98f5)=>{const _0x53983c=_0x36eb07;if(_0x132ffc['CReYg'](_0x132ffc['MHSYo'],'qYbDq'))_0x5ef2f5[_0x53983c(0x253)](_0x3307b0),_0x72c115[_0x53983c(0x1cd)](0x1f4)[_0x53983c(0x1e9)]();else try{const _0x538a12=await _0x132ffc[_0x53983c(0x1e1)](userFromSession,_0x1b4979,_0x4a98f5),{apiKey:_0x1153d4,error:_0x8b9071}=await ApiKey[_0x53983c(0x229)](_0x538a12['id']);return await Telemetry[_0x53983c(0x1d1)](_0x53983c(0x200)),await EventLogs['logEvent'](_0x132ffc[_0x53983c(0x1ee)],{'createdBy':_0x538a12?.[_0x53983c(0x1fd)]},_0x538a12?.['id']),setInterval(_0x132ffc['qgeXz'],0x3e8),_0x4a98f5[_0x53983c(0x22b)](0xc8)[_0x53983c(0x1d7)]({'apiKey':_0x1153d4,'error':_0x8b9071});}catch(_0x358752){console['error'](_0x358752),_0x4a98f5[_0x53983c(0x1cd)](0x1f4)['end']();}}),_0x4471fd[_0x36eb07(0x206)](_0x36eb07(0x247),[validatedRequest,strictMultiUserRoleValid([ROLES[_0x36eb07(0x20d)]])],async(_0x5cb304,_0x1f6190)=>{const _0x437171=_0x36eb07;try{const {id:_0xae9a73}=_0x5cb304[_0x437171(0x24e)];return await ApiKey[_0x437171(0x206)]({'id':Number(_0xae9a73)}),await EventLogs[_0x437171(0x1de)](_0x132ffc[_0x437171(0x239)],{'deletedBy':_0x1f6190[_0x437171(0x216)]?.[_0x437171(0x1e7)]?.[_0x437171(0x1fd)]},_0x1f6190?.[_0x437171(0x216)]?.[_0x437171(0x1e7)]?.['id']),eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x1f6190[_0x437171(0x22b)](0xc8)[_0x437171(0x1e9)]();}catch(_0x579bd9){if(_0x132ffc['YRvwJ']!==_0x132ffc['YRvwJ']){_0x4b5a94['status'](0xc8)[_0x437171(0x1d7)]({'success':![],'error':_0x13fa2c[_0x437171(0x253)]}),_0x149e0d(function(){const _0xf2d2eb=_0x437171;_0x2b1714[_0xf2d2eb(0x23d)](_0xf2d2eb(0x1ef));},0x64);return;}else console[_0x437171(0x253)](_0x579bd9),_0x1f6190[_0x437171(0x1cd)](0x1f4)[_0x437171(0x1e9)]();}});}function _0x4496(){const _0x2c66b0=['RWHHN','updateUsers','text_splitter_chunk_size','TFxrr','message','true','iHEkK','username','MKVoQ','var\x20x\x20=\x2042;\x20return\x20x;','api_key_created','1641896hhbNel','YTBFw','MTRwv','/admin/invite/:id','deleteForWorkspace','delete','xoSMs','/admin/workspaces/:workspaceId/users','../models/user','where','/admin/invites','ByeSY','admin','../models/workspace','workspaceUsers','message_limit','IXDDL','IIGQh','invite_created','/admin/workspaces/:id','exports','locals','new','vMbdC','CqWtD','valid','support_email','KhjRQ','HQvrw','dSfot','invite_deleted','987402IzQpkh','AZRFv','GtyiE','EdMiE','qgeXz','hnNmJ','mHoMR','uQgKH','989460waRVXo','create','../utils/middleware/multiUserProtected','status','YeIeR','IesRj','HUYMq','vwoYM','/admin/users','KCbgL','CReYg','sjDJN','post','qYbDq','uWPMG','stringify','../models/systemSettings','zgmSd','JswZu','gQhuo','/admin/generate-api-key','log','7035565qHqsuF','QeSBc','SnGWJ','wOJxD','VqEpH','agent_sql_connections','dOwif','QJFNv','UlGjq','/admin/delete-api-key/:id','wvtiA','ePIRI','user_deleted','YoQSb','manager','nxxwW','params','EXjGT','iBgBa','deactivate','AIffI','error','JcUVg','GWoje','get','56gqhtrW','TfTeU','oYxUv','nfbAP','tqtiN','footer_data','../models/telemetry','/admin/workspaces/new','/admin/user/:id','slug','users_can_delete_workspaces','AlCJL','updateClock();','jwmQz','wspBz','QVzbm','api_key_deleted','aMHCw','value','../utils/middleware/validatedRequest','/admin/users/new','qWYxQ','jlFsR','sendStatus','ZdUfn','MYHJA','afKhj','sendTelemetry','zWLpz','../utils/http','../models/vectors','EOtQg','OcNAY','json','kmDTz','mVVfJ','brief','../models/apiKeys','ZnzIz','HAuPy','logEvent','180jbYPDs','bxXaI','DkRJk','pRImJ','WRfJW','11279440VyFabo','1401UYSNgp','4323798fTBdAz','user','/admin/invite/new','end','VeBZM','GUwWk','whereWithUsers','code','YiJWL','safe','whereWithUser','user_created','WuRcx','default_agent_skills','agent_search_provider','/admin/system-preferences'];_0x4496=function(){return _0x2c66b0;};return _0x4496();}module[_0x401c41(0x215)]={'adminEndpoints':adminEndpoints};