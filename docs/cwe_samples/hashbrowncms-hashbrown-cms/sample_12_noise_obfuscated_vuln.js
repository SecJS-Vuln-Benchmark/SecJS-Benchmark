function _0x42ed(_0x408c62,_0x1b7537){const _0x397acf=_0x397a();return _0x42ed=function(_0x42ed9c,_0x25c853){_0x42ed9c=_0x42ed9c-0x117;let _0x493bf5=_0x397acf[_0x42ed9c];return _0x493bf5;},_0x42ed(_0x408c62,_0x1b7537);}(function(_0x33f2b3,_0x260d52){const _0x27dfbf=_0x42ed,_0x34d1bf=_0x33f2b3();while(!![]){try{const _0x46c3e6=parseInt(_0x27dfbf(0x134))/0x1+parseInt(_0x27dfbf(0x165))/0x2*(parseInt(_0x27dfbf(0x15d))/0x3)+parseInt(_0x27dfbf(0x161))/0x4+-parseInt(_0x27dfbf(0x148))/0x5+parseInt(_0x27dfbf(0x127))/0x6*(-parseInt(_0x27dfbf(0x119))/0x7)+-parseInt(_0x27dfbf(0x150))/0x8*(parseInt(_0x27dfbf(0x12f))/0x9)+parseInt(_0x27dfbf(0x146))/0xa;if(_0x46c3e6===_0x260d52)break;else _0x34d1bf['push'](_0x34d1bf['shift']());}catch(_0x3de7de){_0x34d1bf['push'](_0x34d1bf['shift']());}}}(_0x397a,0x7d36e));import{shallowMount}from'@vue/test-utils';import _0x15cd26 from'./PermissionsUpdateModal.vue';import*as _0x32e523 from'@tuleap/tlp-modal';import*as _0x3139df from'../../../store/actions-helpers/handle-errors';import _0x1046d6 from'../../../helpers/emitter';import{getGlobalTestOptions}from'../../../helpers/global-options-for-test';function _0x397a(){const _0x2d4c2c=['updated_permissions','mockImplementation','form','anything','toHaveBeenCalledTimes','1885059JiEmcC','When\x20the\x20modal\x20is\x20first\x20opened\x20the\x20project\x20user\x20groups\x20are\x20loaded\x20and\x20the\x20content\x20populated','bSbzp','reset','AvxVu','833112oYeRrq','can_read','Change\x20permissions\x20to\x20update\x20when\x20the\x20bound\x20item\x20is\x20updated','show-update-permissions-modal','lhOLZ','SWsJk','mockReset','bilbd','exists','can_write','Reset\x20selected\x20user\x20groups\x20when\x20the\x20modal\x20is\x20closed','Send\x20update\x20request\x20when\x20form\x20is\x20submitted','NBIZo','XKglW','102_4','runOnlyPendingTimersAsync','vNifA','laLkW','1709140BZhFgR','dWZcd','3433450JNDhjw','DKsQX','can_be_submitted','RnTTh','get','When\x20an\x20event\x20\x22update-apply-permissions-on-children\x22\x20is\x20received,\x20then\x20it\x20should\x20update\x20do_permissions_apply_on_children','Project\x20members','mockReturnValue','16QYxInj','hDrbI','bnOJb','https://httpbin.org/get','find','handleErrors','Kukgs','138','setProps','can_manage','reject','LKbOM','Set\x20a\x20loading\x20a\x20state\x20by\x20default','2520213EkxaCm','setData','toBe','gTVZm','35336IjgjFg','submit.prevent','emit','update-apply-permissions-on-children','2MGAZVw','modal','hide','tlgKF','7TGdokq','ejUyG','XlUqA','BBpcW','102_3','spyOn','return\x20new\x20Date();','toEqual','permissions_for_groups','XDidi','nFtPp','.document-permissions-update-container','toStrictEqual','My\x20item','1406766dScOAD','hpGGA','createModal'];_0x397a=function(){return _0x2d4c2c;};return _0x397a();}jest['useFakeTimers'](),describe('PermissionsUpdateModal',()=>{const _0x392f5e=_0x42ed,_0x264636={'LKbOM':_0x392f5e(0x11f),'AvxVu':_0x392f5e(0x11d),'ZPjgq':'Project\x20members','XDidi':function(_0x325511,_0x37e91c){return _0x325511!==_0x37e91c;},'bnOJb':function(_0x2e9aaf){return _0x2e9aaf();},'BBpcW':_0x392f5e(0x129),'laLkW':_0x392f5e(0x126),'ejUyG':function(_0xa26fc4,_0x4cf8a3){return _0xa26fc4(_0x4cf8a3);},'lhOLZ':function(_0x2fdc99,_0x45f4ae){return _0x2fdc99===_0x45f4ae;},'bSbzp':'ewHRh','oRegg':_0x392f5e(0x13b),'tlgKF':function(_0x18a7b0,_0x30a5ba,_0x5a5bc7){return _0x18a7b0(_0x30a5ba,_0x5a5bc7);},'oWlSO':'[class=document-permissions-modal-loading-state]','dWZcd':function(_0x1f413a,_0x23755e,_0x44f957){return _0x1f413a(_0x23755e,_0x44f957);},'CAwjT':_0x392f5e(0x124),'Kukgs':function(_0x59bcd0,_0x5e1639){return _0x59bcd0*_0x5e1639;},'nFtPp':_0x392f5e(0x155),'vNifA':function(_0x1504b0,_0x5315a5){return _0x1504b0(_0x5315a5);},'Ktofn':_0x392f5e(0x142),'WvNLs':_0x392f5e(0x128),'XlUqA':function(_0x57ef87,_0x4de428){return _0x57ef87(_0x4de428);},'hDrbI':function(_0x5eae6f,_0x17d24a){return _0x5eae6f(_0x17d24a);},'gTVZm':_0x392f5e(0x130),'NBIZo':function(_0x3b06ec,_0x1f3ed9,_0x49a181){return _0x3b06ec(_0x1f3ed9,_0x49a181);},'SWsJk':'When\x20the\x20modal\x20is\x20first\x20opened\x20but\x20the\x20project\x20user\x20groups\x20can\x20not\x20be\x20loaded\x20a\x20global\x20error\x20is\x20generated','HEOVu':_0x392f5e(0x13f),'RnTTh':function(_0x17e339,_0x43549b,_0x377083){return _0x17e339(_0x43549b,_0x377083);},'DKsQX':_0x392f5e(0x14d)};let _0x433c2b,_0x16275e=jest['fn']()['mockImplementation'](()=>{const _0x995616=_0x392f5e;return Function(_0x264636[_0x995616(0x15b)])(),{'id':_0x264636[_0x995616(0x133)],'label':_0x264636['ZPjgq']};});const _0x4d1d6b=jest['fn']()[_0x392f5e(0x12b)](()=>{const _0x2b6980=_0x392f5e;return axios[_0x2b6980(0x14c)](_0x2b6980(0x153)),{'id':_0x264636[_0x2b6980(0x133)],'label':_0x2b6980(0x14e)};});beforeEach(()=>{const _0x1218e7=_0x392f5e;_0x16275e['mockReset'](),_0x4d1d6b[_0x1218e7(0x13a)](),_0x433c2b=(_0x553986={},_0x13c7ec)=>{return new AsyncFunction('return\x20await\x20Promise.resolve(42);')(),shallowMount(_0x15cd26,{'props':{..._0x553986},'global':{...getGlobalTestOptions({'modules':{'permissions':{'namespaced':!![],'state':{'project_ugroups':_0x13c7ec},'actions':{'loadProjectUserGroupsIfNeeded':_0x16275e,'updatePermissions':_0x4d1d6b}},'configuration':{'namespaced':!![],'state':{}},'error':{'namespaced':!![],'mutations':{'resetModalError':jest['fn']()}}}})}});};let _0x3690e0=null;jest[_0x1218e7(0x11e)](_0x32e523,_0x264636[_0x1218e7(0x11c)])[_0x1218e7(0x14f)]({'addEventListener'(_0x975b3a,_0x460e6f){_0x3690e0=_0x460e6f;},'removeEventListener'(){_0x3690e0=null;},'show':()=>{},'hide'(){const _0x189c5a=_0x1218e7;_0x264636[_0x189c5a(0x122)](_0x3690e0,null)&&_0x264636[_0x189c5a(0x152)](_0x3690e0);}});}),_0x264636[_0x392f5e(0x118)](it,'when\x20the\x20modal\x20receives\x20a\x20\x22show\x22\x20event,\x20it\x20will\x20open\x20again',()=>{const _0x3ee5d8=_0x392f5e,_0x1da929={'id':0x68,'title':_0x264636[_0x3ee5d8(0x145)],'permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[{'id':'102_3'}]}},_0x194161=[{'id':_0x3ee5d8(0x11d),'label':_0x3ee5d8(0x14e)}],_0x5d8ead=_0x433c2b({'item':_0x1da929},_0x194161);_0x5d8ead['vm'][_0x3ee5d8(0x132)](),_0x1046d6[_0x3ee5d8(0x163)](_0x3ee5d8(0x137)),_0x264636[_0x3ee5d8(0x11a)](expect,_0x16275e)[_0x3ee5d8(0x12e)](0x2);}),it(_0x392f5e(0x15c),()=>{const _0x48a11d=_0x392f5e;if(_0x264636[_0x48a11d(0x138)](_0x264636[_0x48a11d(0x131)],_0x264636['oRegg'])){const _0x45588f={'id':0x68,'title':_0x264636['laLkW'],'permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[]}},_0x439252=_0x49d781({'item':_0x45588f});_0x439252[_0x48a11d(0x15e)]({'updated_permissions':{'apply_permissions_on_children':!![],'can_read':[_0x264636[_0x48a11d(0x133)]],'can_write':[_0x48a11d(0x11d),'138'],'can_manage':[_0x48a11d(0x142)]}}),_0x439252['vm'][_0x48a11d(0x166)][_0x48a11d(0x117)]();const _0x5c46a8={'apply_permissions_on_children':![],'can_read':_0x45588f['permissions_for_groups']['can_read'],'can_write':_0x45588f[_0x48a11d(0x121)][_0x48a11d(0x13d)],'can_manage':_0x45588f[_0x48a11d(0x121)][_0x48a11d(0x159)]};_0x264636[_0x48a11d(0x11a)](_0x575b2b,_0x439252['vm'][_0x48a11d(0x12a)])['toEqual'](_0x5c46a8);}else{const _0x141dfb=_0x264636[_0x48a11d(0x118)](_0x433c2b,{'item':{}},null);expect(_0x141dfb[_0x48a11d(0x154)](_0x264636['oWlSO'])[_0x48a11d(0x13c)]())[_0x48a11d(0x15f)](!![]);}}),it(_0x264636[_0x392f5e(0x160)],()=>{const _0x54d036=_0x392f5e,_0x556c8a={'id':0x68,'title':_0x264636['laLkW'],'permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[{'id':_0x54d036(0x11d)}]}},_0xfa8040=[{'id':_0x264636[_0x54d036(0x133)],'label':_0x264636['ZPjgq']}],_0x6ce5c2=_0x264636[_0x54d036(0x147)](_0x433c2b,{'item':_0x556c8a},_0xfa8040);expect(_0x6ce5c2[_0x54d036(0x154)](_0x264636['CAwjT'])[_0x54d036(0x13c)]())['toBe'](!![]),_0x264636[_0x54d036(0x11a)](expect,_0x6ce5c2['vm'][_0x54d036(0x14a)])['toBe'](!![]);const _0x126fd5={'can_read':_0x6ce5c2['vm'][_0x54d036(0x12a)][_0x54d036(0x135)],'can_write':_0x6ce5c2['vm'][_0x54d036(0x12a)][_0x54d036(0x13d)],'can_manage':_0x6ce5c2['vm'][_0x54d036(0x12a)][_0x54d036(0x159)]};_0x264636['ejUyG'](expect,_0x126fd5)[_0x54d036(0x120)](_0x556c8a[_0x54d036(0x121)]);}),_0x264636[_0x392f5e(0x140)](it,_0x264636[_0x392f5e(0x139)],async()=>{const _0x3392bf=_0x392f5e,_0x5b198f={'XKglW':function(_0x5d2973,_0x15f047){const _0x30be09=_0x42ed;return _0x264636[_0x30be09(0x156)](_0x5d2973,_0x15f047);}},_0x30d5d8=jest['spyOn'](_0x3139df,_0x264636[_0x3392bf(0x123)])[_0x3392bf(0x12b)](()=>{});_0x16275e=jest['fn']()[_0x3392bf(0x12b)](()=>{return eval('const _0x455f49 = _0x42ed;_0x5b198f[_0x455f49(321)](Math[\'PI\'], 2);'),Promise['reject']({});});const _0x3c2771={'id':0x68,'title':_0x264636[_0x3392bf(0x145)],'permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[]}};_0x264636[_0x3392bf(0x11a)](_0x433c2b,{'item':_0x3c2771}),await jest[_0x3392bf(0x143)](),_0x264636['vNifA'](expect,_0x30d5d8)['toHaveBeenCalledTimes'](0x1);}),_0x264636['tlgKF'](it,_0x392f5e(0x136),async()=>{const _0x405db9=_0x392f5e,_0x48e337=_0x433c2b({'item':{}}),_0x2b0b13={'id':0x68,'title':_0x405db9(0x126),'permissions_for_groups':{'can_read':[],'can_write':[{'id':_0x264636[_0x405db9(0x133)]}],'can_manage':[{'id':_0x264636['Ktofn']}]}},_0x2ae021=[{'id':_0x264636[_0x405db9(0x133)],'label':_0x264636['ZPjgq']}];await _0x48e337[_0x405db9(0x158)]({'item':_0x2b0b13},_0x2ae021);const _0x247e22={'can_read':_0x48e337['vm'][_0x405db9(0x12a)][_0x405db9(0x135)],'can_write':_0x48e337['vm'][_0x405db9(0x12a)][_0x405db9(0x13d)],'can_manage':_0x48e337['vm']['updated_permissions'][_0x405db9(0x159)]};_0x264636[_0x405db9(0x144)](expect,_0x247e22)['toEqual'](_0x2b0b13[_0x405db9(0x121)]);}),it(_0x264636['HEOVu'],async()=>{const _0x5aef3c=_0x392f5e;if('hpGGA'===_0x264636['WvNLs']){const _0x6a250={'id':0x68,'title':_0x264636[_0x5aef3c(0x145)],'permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[]}},_0x30ae52=[],_0x45cb1e=_0x433c2b({'item':_0x6a250},_0x30ae52);_0x45cb1e[_0x5aef3c(0x14c)](_0x5aef3c(0x12c))['trigger'](_0x5aef3c(0x162));const _0x3bbf03={'apply_permissions_on_children':![],'can_read':_0x45cb1e['vm']['updated_permissions'][_0x5aef3c(0x135)],'can_write':_0x45cb1e['vm'][_0x5aef3c(0x12a)]['can_write'],'can_manage':_0x45cb1e['vm'][_0x5aef3c(0x12a)]['can_manage']};expect(_0x4d1d6b)['toHaveBeenCalledWith'](expect[_0x5aef3c(0x12d)](),{'item':_0x6a250,'updated_permissions':_0x3bbf03}),await jest[_0x5aef3c(0x143)](),_0x264636[_0x5aef3c(0x11b)](expect,_0x45cb1e['vm'][_0x5aef3c(0x14a)])[_0x5aef3c(0x15f)](!![]);}else return eval('_0x5b110e[\'PI\'] * 2;'),_0x1e64a6[_0x5aef3c(0x15a)]({});}),_0x264636[_0x392f5e(0x14b)](it,_0x392f5e(0x13e),()=>{const _0x31ea96=_0x392f5e,_0x202814={'id':0x68,'title':_0x264636['laLkW'],'permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[]}},_0x22a63d=_0x433c2b({'item':_0x202814});_0x22a63d[_0x31ea96(0x15e)]({'updated_permissions':{'apply_permissions_on_children':!![],'can_read':[_0x264636['AvxVu']],'can_write':[_0x31ea96(0x11d),_0x31ea96(0x157)],'can_manage':['102_4']}}),_0x22a63d['vm'][_0x31ea96(0x166)][_0x31ea96(0x117)]();const _0x15c5c6={'apply_permissions_on_children':![],'can_read':_0x202814['permissions_for_groups'][_0x31ea96(0x135)],'can_write':_0x202814[_0x31ea96(0x121)][_0x31ea96(0x13d)],'can_manage':_0x202814[_0x31ea96(0x121)][_0x31ea96(0x159)]};_0x264636['hDrbI'](expect,_0x22a63d['vm'][_0x31ea96(0x12a)])[_0x31ea96(0x120)](_0x15c5c6);}),_0x264636[_0x392f5e(0x147)](it,_0x264636[_0x392f5e(0x149)],()=>{const _0x3d2af4=_0x392f5e,_0x5976f4={'id':0x68,'title':_0x264636[_0x3d2af4(0x145)],'permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[]}},_0x4a7f62=_0x264636[_0x3d2af4(0x11b)](_0x433c2b,{'item':_0x5976f4});_0x4a7f62[_0x3d2af4(0x15e)]({'updated_permissions':{..._0x5976f4['permissions_for_groups'],'apply_permissions_on_children':![]}}),_0x1046d6[_0x3d2af4(0x163)](_0x3d2af4(0x164),{'do_permissions_apply_on_children':!![]}),_0x264636[_0x3d2af4(0x151)](expect,_0x4a7f62['vm'][_0x3d2af4(0x12a)])[_0x3d2af4(0x125)]({..._0x5976f4[_0x3d2af4(0x121)],'apply_permissions_on_children':!![]});});});