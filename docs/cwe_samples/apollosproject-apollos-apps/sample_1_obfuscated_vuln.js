const _0xc775e9=_0x50f9;(function(_0x4da64a,_0x2ca77f){const _0x550fd5=_0x50f9,_0x48b975=_0x4da64a();while(!![]){try{const _0x5e8f6c=parseInt(_0x550fd5(0xdf))/0x1*(-parseInt(_0x550fd5(0xdb))/0x2)+parseInt(_0x550fd5(0xe3))/0x3+parseInt(_0x550fd5(0xc1))/0x4*(parseInt(_0x550fd5(0xe5))/0x5)+parseInt(_0x550fd5(0xc6))/0x6*(parseInt(_0x550fd5(0xe1))/0x7)+-parseInt(_0x550fd5(0xc8))/0x8+parseInt(_0x550fd5(0xda))/0x9*(-parseInt(_0x550fd5(0xe6))/0xa)+parseInt(_0x550fd5(0xbd))/0xb*(-parseInt(_0x550fd5(0xbf))/0xc);if(_0x5e8f6c===_0x2ca77f)break;else _0x48b975['push'](_0x48b975['shift']());}catch(_0x39a6f7){_0x48b975['push'](_0x48b975['shift']());}}}(_0x2ec5,0x66005));function _0x50f9(_0x547629,_0x5d1784){const _0x2ec515=_0x2ec5();return _0x50f9=function(_0x50f90a,_0x7d5c58){_0x50f90a=_0x50f90a-0xb2;let _0x17e3fc=_0x2ec515[_0x50f90a];return _0x17e3fc;},_0x50f9(_0x547629,_0x5d1784);}import{AuthenticationError,UserInputError}from'apollo-server';import{camelCase,mapKeys}from'lodash';import _0x338a68 from'@apollosproject/rock-apollo-data-source';import _0x3f34e8 from'moment';import{fieldsAsObject}from'../utils';function _0x2ec5(){const _0x26ae3a=['BirthDate\x20must\x20be\x20a\x20valid\x20date','getFromId','isValid','first','filter','hCOrg','select','Photo','dBYqT','Gender','9306vIDMdz','46Okizqr','vzVih','create','/People/','5658bDWmRx','Rock\x20gender\x20must\x20be\x20either\x20Unknown,\x20Male,\x20or\x20Female','743267rYrawi','uploadProfileImage','1562373XULNAm','context','1317110XybtWx','3110IgfySK','/PersonAlias','request','BirthDate','PersonId','date','expand','resource','Xwvtt','number','/People','year','Invalid\x20Credentials','1330714rzDQwn','mapGender','12sdytmf','Auth','4GfLgXx','month','keys','dataSources','People','36aZptHR','HhoQH','3446560XmuEVq','uploadFile','getCurrentPerson','oSKOq','mapApollosFieldsToRock','updateProfile','post','xuYkG'];_0x2ec5=function(){return _0x26ae3a;};return _0x2ec5();}const RockGenderMap={'Unknown':0x0,'Male':0x1,'Female':0x2};export const mapApollosFieldsToRock=_0x4f9216=>{const _0x2dcd6a=_0x50f9,_0x5b02a2={..._0x4f9216};if(_0x5b02a2['Gender']){if(!Object[_0x2dcd6a(0xc3)](RockGenderMap)['includes'](_0x5b02a2[_0x2dcd6a(0xd9)]))throw new UserInputError(_0x2dcd6a(0xe0));_0x5b02a2[_0x2dcd6a(0xd9)]=RockGenderMap[_0x5b02a2['Gender']];}let _0x1900b6={..._0x5b02a2};if(_0x5b02a2[_0x2dcd6a(0xb3)]){delete _0x1900b6['BirthDate'];const _0x18be39=_0x3f34e8(_0x5b02a2[_0x2dcd6a(0xb3)]);if(!_0x18be39[_0x2dcd6a(0xd2)]())throw new UserInputError(_0x2dcd6a(0xd0));_0x1900b6={..._0x1900b6,'BirthMonth':_0x18be39[_0x2dcd6a(0xc2)]()+0x1,'BirthDay':_0x18be39[_0x2dcd6a(0xb5)](),'BirthYear':_0x18be39[_0x2dcd6a(0xbb)]()};}return _0x1900b6;};export default class Person extends _0x338a68{[_0xc775e9(0xb7)]=_0xc775e9(0xc5);['getFromId']=_0x4ff664=>this[_0xc775e9(0xb2)]()[_0xc775e9(0xd4)]('Id\x20eq\x20'+_0x4ff664)[_0xc775e9(0xb6)](_0xc775e9(0xd7))[_0xc775e9(0xd3)]();['getFromAliasId']=async _0x5899bb=>{const _0x1fdcec=_0xc775e9,_0x58b5a5={'HIOir':_0x1fdcec(0xe7),'hCOrg':_0x1fdcec(0xb4)},_0x375885=await this[_0x1fdcec(0xb2)](_0x58b5a5['HIOir'])['filter']('Id\x20eq\x20'+_0x5899bb)[_0x1fdcec(0xd6)](_0x58b5a5[_0x1fdcec(0xd5)])[_0x1fdcec(0xd3)]();if(_0x375885)return this[_0x1fdcec(0xd1)](_0x375885['personId']);return null;};[_0xc775e9(0xdd)]=_0x51161c=>{const _0x52c1fa=_0xc775e9,_0x548ce4={'HhoQH':_0x52c1fa(0xba)},_0x44ff65=this[_0x52c1fa(0xcc)](_0x51161c);return this[_0x52c1fa(0xce)](_0x548ce4[_0x52c1fa(0xc7)],{'Gender':0x0,..._0x44ff65,'IsSystem':![]});};[_0xc775e9(0xbe)]=({gender:_0xd46225})=>{const _0x564c38=_0xc775e9,_0x256a6f={'vzVih':function(_0x4d77d6,_0x50cd3d){return _0x4d77d6===_0x50cd3d;}};if(_0x256a6f[_0x564c38(0xdc)](typeof _0xd46225,_0x564c38(0xb9)))return Object['keys'](RockGenderMap)['find'](_0x420a74=>RockGenderMap[_0x420a74]===_0xd46225);return _0xd46225;};[_0xc775e9(0xcc)]=_0x58be90=>{return mapApollosFieldsToRock(_0x58be90);};[_0xc775e9(0xcd)]=async _0x507e04=>{const _0xab7a9a=_0xc775e9,_0xab6df9={'xuYkG':_0xab7a9a(0xbc),'oSKOq':function(_0x47ed12,_0x120009){return _0x47ed12(_0x120009);},'dBYqT':function(_0x4c0079,_0xaa0191,_0x9f82c8){return _0x4c0079(_0xaa0191,_0x9f82c8);}},_0x576091=await this[_0xab7a9a(0xe4)][_0xab7a9a(0xc4)][_0xab7a9a(0xc0)][_0xab7a9a(0xca)]();if(!_0x576091)throw new AuthenticationError(_0xab6df9[_0xab7a9a(0xcf)]);const _0x13b512=_0xab6df9[_0xab7a9a(0xcb)](fieldsAsObject,_0x507e04),_0x390ea4=this[_0xab7a9a(0xcc)](_0x13b512);return await this['patch'](_0xab7a9a(0xde)+_0x576091['id'],_0x390ea4),{..._0x576091,..._0xab6df9[_0xab7a9a(0xd8)](mapKeys,_0x13b512,(_0x2e1537,_0x2bac5d)=>camelCase(_0x2bac5d))};};[_0xc775e9(0xe2)]=async(_0x3a951d,_0xaa9628)=>{const _0x5ab382=_0xc775e9,_0x56f60d={'Xwvtt':_0x5ab382(0xbc)},{dataSources:{Auth:_0x302bb8,BinaryFiles:_0xce5ef0}}=this['context'],_0x370bd2=await _0x302bb8['getCurrentPerson']();if(!_0x370bd2)throw new AuthenticationError(_0x56f60d[_0x5ab382(0xb8)]);const {createReadStream:_0x200521,filename:_0x100fd4}=await _0x3a951d,_0x22b59a=_0x200521(),_0x48fa78=await _0xce5ef0[_0x5ab382(0xc9)]({'filename':_0x100fd4,'stream':_0x22b59a,'length':_0xaa9628}),_0xe6342f=await this[_0x5ab382(0xcd)]([{'field':'PhotoId','value':_0x48fa78}]),_0x5adc85=await _0xce5ef0[_0x5ab382(0xd1)](_0x48fa78);return{..._0xe6342f,'photo':_0x5adc85};};}