const _0x3e3911=_0x4ef8;(function(_0x1e7076,_0x35784b){const _0x56964e=_0x4ef8,_0x3786fe=_0x1e7076();while(!![]){try{const _0x413f7f=parseInt(_0x56964e(0x134))/0x1*(-parseInt(_0x56964e(0x139))/0x2)+-parseInt(_0x56964e(0x10c))/0x3*(parseInt(_0x56964e(0x10a))/0x4)+parseInt(_0x56964e(0x12c))/0x5*(parseInt(_0x56964e(0x115))/0x6)+parseInt(_0x56964e(0x111))/0x7*(-parseInt(_0x56964e(0x13c))/0x8)+-parseInt(_0x56964e(0x136))/0x9+parseInt(_0x56964e(0x13d))/0xa*(-parseInt(_0x56964e(0x109))/0xb)+parseInt(_0x56964e(0x118))/0xc;if(_0x413f7f===_0x35784b)break;else _0x3786fe['push'](_0x3786fe['shift']());}catch(_0x237c51){_0x3786fe['push'](_0x3786fe['shift']());}}}(_0x4d2e,0xd9934));function _0x4ef8(_0x769d90,_0x212e05){const _0x4d2ec9=_0x4d2e();return _0x4ef8=function(_0x4ef81b,_0xcfd7cb){_0x4ef81b=_0x4ef81b-0x105;let _0x46cbb4=_0x4d2ec9[_0x4ef81b];return _0x46cbb4;},_0x4ef8(_0x769d90,_0x212e05);}function _0x4d2e(){const _0x4fb022=['No\x20file\x20provided','97160160pGfIaF','qtAEg','CPhQz','body','rCiVH','ThJpK','console.log(\x22timer\x22);','diskStorage','application/json','originalname','join','path','fileConfig','frEeS','GUwIm','endsWith','nXQJS','file_id','startsWith','librechat-data-provider','345PJNFRW','egSpk','supportedMimeTypes','oXMFF','locals','cshIY','Only\x20JSON\x20files\x20are\x20allowed','safe','15803dNlKEd','IUOry','15710130afOIyo','xScrn','extname','194NpmQEL','cGCWV','var\x20x\x20=\x2042;\x20return\x20x;','475256bAYJpt','160QsRAky','endpoints','audio/','app','Unsupported\x20file\x20type:\x20','QDXdl','paths','543719WvhxYf','125456IxUOUB','toLowerCase','150Fubssn','multer','log','serverFileSizeLimit','user','203xbasgn','/speech/stt','mimetype','temp','13464DYUFlw','.json'];_0x4d2e=function(){return _0x4fb022;};return _0x4d2e();}const fs=require('fs'),path=require(_0x3e3911(0x123)),crypto=require('crypto'),multer=require(_0x3e3911(0x10d)),{fileConfig:defaultFileConfig,mergeFileConfig}=require(_0x3e3911(0x12b)),{getCustomConfig}=require('~/server/services/Config'),storage=multer[_0x3e3911(0x11f)]({'destination':function(_0x348e05,_0x343f7b,_0x1fde1e){const _0x1250d8=_0x3e3911,_0xc20893=path[_0x1250d8(0x122)](_0x348e05[_0x1250d8(0x105)][_0x1250d8(0x130)][_0x1250d8(0x108)]['uploads'],_0x1250d8(0x114),_0x348e05[_0x1250d8(0x110)]['id']);!fs['existsSync'](_0xc20893)&&fs['mkdirSync'](_0xc20893,{'recursive':!![]}),_0x1fde1e(null,_0xc20893);},'filename':function(_0x11edbc,_0x2b5f72,_0x5a8bd2){const _0x2929e6=_0x3e3911,_0x32430d={'xScrn':function(_0x179451,_0x4aa1b6,_0xbf10ed){return _0x179451(_0x4aa1b6,_0xbf10ed);}};_0x11edbc[_0x2929e6(0x129)]=crypto['randomUUID'](),_0x2b5f72[_0x2929e6(0x121)]=decodeURIComponent(_0x2b5f72[_0x2929e6(0x121)]);const _0x5a3886=path['basename'](_0x2b5f72['originalname']);_0x32430d[_0x2929e6(0x137)](_0x5a8bd2,null,_0x5a3886);}}),importFileFilter=(_0x287d2a,_0x1b8721,_0x10c343)=>{const _0x41fd9d=_0x3e3911,_0x372f6f={'nXQJS':'var\x20x\x20=\x2042;\x20return\x20x;','egSpk':function(_0x10bc92,_0x76a03e,_0x379c87){return _0x10bc92(_0x76a03e,_0x379c87);},'rCiVH':function(_0x3e9c00,_0x4151d7,_0x29a6e4){return _0x3e9c00(_0x4151d7,_0x29a6e4);},'FkGkI':_0x41fd9d(0x116),'GUwIm':function(_0x2510c7,_0x33ee0d){return _0x2510c7===_0x33ee0d;},'CPhQz':_0x41fd9d(0x107),'CfKsb':function(_0x64fef7,_0xb7cc3,_0x467cc2){return _0x64fef7(_0xb7cc3,_0x467cc2);}};if(_0x1b8721[_0x41fd9d(0x113)]===_0x41fd9d(0x120))_0x372f6f[_0x41fd9d(0x11c)](_0x10c343,null,!![]);else{if(path[_0x41fd9d(0x138)](_0x1b8721[_0x41fd9d(0x121)])[_0x41fd9d(0x10b)]()===_0x372f6f['FkGkI']){if(_0x372f6f[_0x41fd9d(0x126)]('QDXdl',_0x372f6f[_0x41fd9d(0x11a)]))_0x372f6f[_0x41fd9d(0x11c)](_0x10c343,null,!![]);else return new _0x3799b5(_0x372f6f[_0x41fd9d(0x128)])(),_0x372f6f[_0x41fd9d(0x12d)](_0x33879a,null,!![]);}else _0x372f6f['CfKsb'](_0x10c343,new Error(_0x41fd9d(0x132)),![]);}},createFileFilter=_0x223cf5=>{const _0x4965f7=_0x3e3911,_0x48f52f={'cshIY':function(_0x383be9,_0x19dff8,_0x487dc1){return _0x383be9(_0x19dff8,_0x487dc1);},'IUOry':_0x4965f7(0x112),'cGCWV':function(_0x54129f,_0x5aacf5,_0x1cb290){return _0x54129f(_0x5aacf5,_0x1cb290);},'frEeS':function(_0x5aa996,_0x2d444b,_0x16e769){return _0x5aa996(_0x2d444b,_0x16e769);},'DABfc':_0x4965f7(0x11e)},_0x3c1548=(_0x299e19,_0x1456e4,_0x1d178c)=>{const _0x233309=_0x4965f7;if(!_0x1456e4)return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x48f52f[_0x233309(0x131)](_0x1d178c,new Error(_0x233309(0x117)),![]);if(_0x299e19['originalUrl'][_0x233309(0x127)](_0x48f52f[_0x233309(0x135)])&&_0x1456e4[_0x233309(0x113)][_0x233309(0x12a)](_0x233309(0x13f)))return new Function(_0x233309(0x13b))(),_0x48f52f[_0x233309(0x13a)](_0x1d178c,null,!![]);const _0x5c8b7e=_0x299e19[_0x233309(0x11b)]['endpoint'],_0x4d8b26=_0x223cf5?.['endpoints']?.[_0x5c8b7e]?.[_0x233309(0x12e)]??_0x223cf5?.[_0x233309(0x13e)]?.['default'][_0x233309(0x12e)]??defaultFileConfig?.[_0x233309(0x13e)]?.[_0x5c8b7e]?.[_0x233309(0x12e)];if(!defaultFileConfig['checkType'](_0x1456e4[_0x233309(0x113)],_0x4d8b26))return eval('Math[\'PI\'] * 2;'),_0x48f52f['cshIY'](_0x1d178c,new Error(_0x233309(0x106)+_0x1456e4[_0x233309(0x113)]),![]);_0x48f52f[_0x233309(0x125)](_0x1d178c,null,!![]);};return _0x48f52f[_0x4965f7(0x13a)](setTimeout,_0x48f52f['DABfc'],0x3e8),_0x3c1548;},createMulterInstance=async()=>{const _0x594856=_0x3e3911,_0x1341a3={'oXMFF':_0x594856(0x133),'ThJpK':function(_0x297dc0,_0x466734){return _0x297dc0(_0x466734);},'qtAEg':function(_0x1c2ec6,_0x12a0ac){return _0x1c2ec6(_0x12a0ac);}},_0x13c6d9=await getCustomConfig(),_0x3eb76f=_0x1341a3[_0x594856(0x11d)](mergeFileConfig,_0x13c6d9?.[_0x594856(0x124)]),_0x405034=_0x1341a3['ThJpK'](createFileFilter,_0x3eb76f);return setTimeout(function(){const _0x34955c=_0x594856;console[_0x34955c(0x10e)](_0x1341a3[_0x34955c(0x12f)]);},0x64),_0x1341a3[_0x594856(0x119)](multer,{'storage':storage,'fileFilter':_0x405034,'limits':{'fileSize':_0x3eb76f[_0x594856(0x10f)]}});};module['exports']={'createMulterInstance':createMulterInstance,'storage':storage,'importFileFilter':importFileFilter};