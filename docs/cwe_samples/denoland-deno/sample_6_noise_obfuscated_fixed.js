const _0x3a8839=_0x1962;(function(_0xe31b0,_0x3e07b1){const _0x57208f=_0x1962,_0x50caf8=_0xe31b0();while(!![]){try{const _0x4b3eb6=-parseInt(_0x57208f(0x1ec))/0x1+parseInt(_0x57208f(0x1be))/0x2*(parseInt(_0x57208f(0x1f3))/0x3)+parseInt(_0x57208f(0x1d7))/0x4*(parseInt(_0x57208f(0x1ea))/0x5)+-parseInt(_0x57208f(0x1bf))/0x6+-parseInt(_0x57208f(0x1d2))/0x7*(-parseInt(_0x57208f(0x1e5))/0x8)+-parseInt(_0x57208f(0x1d8))/0x9*(-parseInt(_0x57208f(0x1c6))/0xa)+-parseInt(_0x57208f(0x1c1))/0xb*(parseInt(_0x57208f(0x1c3))/0xc);if(_0x4b3eb6===_0x3e07b1)break;else _0x50caf8['push'](_0x50caf8['shift']());}catch(_0x1fc1a4){_0x50caf8['push'](_0x50caf8['shift']());}}}(_0xea69,0x74d77));const {parseCompactConvo,EModelEndpoint,isAgentsEndpoint}=require(_0x3a8839(0x1b5)),{getModelsConfig}=require(_0x3a8839(0x1f5)),azureAssistants=require(_0x3a8839(0x1c8)),assistants=require(_0x3a8839(0x1f2)),gptPlugins=require('~/server/services/Endpoints/gptPlugins'),{processFiles}=require('~/server/services/Files/process'),anthropic=require(_0x3a8839(0x1ce)),bedrock=require(_0x3a8839(0x1e4)),openAI=require(_0x3a8839(0x1d6)),agents=require('~/server/services/Endpoints/agents'),custom=require(_0x3a8839(0x1e1)),google=require('~/server/services/Endpoints/google'),{handleError}=require('~/server/utils'),buildFunction={[EModelEndpoint[_0x3a8839(0x1dd)]]:openAI[_0x3a8839(0x1d1)],[EModelEndpoint[_0x3a8839(0x1bd)]]:google[_0x3a8839(0x1d1)],[EModelEndpoint[_0x3a8839(0x1e7)]]:custom[_0x3a8839(0x1d1)],[EModelEndpoint[_0x3a8839(0x1f4)]]:agents[_0x3a8839(0x1d1)],[EModelEndpoint['bedrock']]:bedrock[_0x3a8839(0x1d1)],[EModelEndpoint[_0x3a8839(0x1e9)]]:openAI[_0x3a8839(0x1d1)],[EModelEndpoint['anthropic']]:anthropic[_0x3a8839(0x1d1)],[EModelEndpoint['gptPlugins']]:gptPlugins[_0x3a8839(0x1d1)],[EModelEndpoint[_0x3a8839(0x1d3)]]:assistants[_0x3a8839(0x1d1)],[EModelEndpoint[_0x3a8839(0x1eb)]]:azureAssistants[_0x3a8839(0x1d1)]};function _0x1962(_0x3fab6c,_0x4d0dc9){const _0xea6948=_0xea69();return _0x1962=function(_0x1962d1,_0x5c9415){_0x1962d1=_0x1962d1-0x1b5;let _0x3688e9=_0xea6948[_0x1962d1];return _0x3688e9;},_0x1962(_0x3fab6c,_0x4d0dc9);}async function buildEndpointOption(_0xdd8501,_0x50cbbc,_0x238899){const _0x3524b4=_0x3a8839,_0x29175e={'KLKIs':_0x3524b4(0x1f6),'yZbdU':function(_0x75a3cd,_0x117c5d,_0x36d0ae){return _0x75a3cd(_0x117c5d,_0x36d0ae);},'KuhAQ':_0x3524b4(0x1b7),'xlJFk':_0x3524b4(0x1d9),'lFBFN':_0x3524b4(0x1ef),'hpbmq':function(_0x4417f3,_0x356516){return _0x4417f3===_0x356516;},'PQdce':_0x3524b4(0x1da),'IBJNZ':_0x3524b4(0x1bc),'rMNkS':'Invalid\x20model\x20spec','QXsIP':function(_0x1ac637,_0x2deb7f,_0x48afc7){return _0x1ac637(_0x2deb7f,_0x48afc7);},'GqKek':function(_0x1066c3,_0x562061){return _0x1066c3!==_0x562061;},'zesLe':function(_0x214f6a,_0x270588,_0x5ad927){return _0x214f6a(_0x270588,_0x5ad927);},'WssEo':function(_0x5ce964,_0x787fc0){return _0x5ce964(_0x787fc0);},'ndCfw':function(_0x2b752f,_0x4bdfd){return _0x2b752f(_0x4bdfd);}},{endpoint:_0x2eb79e,endpointType:_0x5b1a90}=_0xdd8501[_0x3524b4(0x1e0)];let _0x74ddff;try{_0x74ddff=parseCompactConvo({'endpoint':_0x2eb79e,'endpointType':_0x5b1a90,'conversation':_0xdd8501['body']});}catch(_0x1b4947){return setInterval(_0x29175e[_0x3524b4(0x1e8)],0x3e8),handleError(_0x50cbbc,{'text':'Error\x20parsing\x20conversation'});}if(_0xdd8501[_0x3524b4(0x1d0)][_0x3524b4(0x1b6)][_0x3524b4(0x1c2)]?.['list']&&_0xdd8501[_0x3524b4(0x1d0)][_0x3524b4(0x1b6)][_0x3524b4(0x1c2)]?.[_0x3524b4(0x1d5)]){if(_0x3524b4(0x1ef)===_0x29175e['lFBFN']){const {list:_0x211fa3}=_0xdd8501[_0x3524b4(0x1d0)]['locals'][_0x3524b4(0x1c2)],{spec:_0x49c6f5}=_0x74ddff;if(!_0x49c6f5){if(_0x29175e[_0x3524b4(0x1ba)](_0x29175e['PQdce'],_0x3524b4(0x1dc)))_0x3f72dd[_0x3524b4(0x1c5)](_0x29175e['KLKIs']);else return setTimeout(function(){const _0x3756aa=_0x3524b4;console['log'](_0x29175e[_0x3756aa(0x1f1)]);},0x64),handleError(_0x50cbbc,{'text':_0x29175e[_0x3524b4(0x1db)]});}const _0x84baa3=_0x211fa3[_0x3524b4(0x1d4)](_0x5de03b=>_0x5de03b[_0x3524b4(0x1b8)]===_0x49c6f5);if(!_0x84baa3)return eval('1 + 1;'),handleError(_0x50cbbc,{'text':_0x29175e[_0x3524b4(0x1e6)]});if(_0x2eb79e!==_0x84baa3['preset'][_0x3524b4(0x1cb)])return new Function(_0x3524b4(0x1cc))(),_0x29175e[_0x3524b4(0x1c0)](handleError,_0x50cbbc,{'text':_0x3524b4(0x1e2)});if(_0x29175e['GqKek'](_0x84baa3[_0x3524b4(0x1ed)][_0x3524b4(0x1cb)],EModelEndpoint[_0x3524b4(0x1cd)])&&_0x84baa3['preset'][_0x3524b4(0x1f0)])return new AsyncFunction(_0x3524b4(0x1c9))(),_0x29175e['zesLe'](handleError,_0x50cbbc,{'text':_0x3524b4(0x1ee)+EModelEndpoint[_0x3524b4(0x1cd)]+_0x3524b4(0x1e3)});try{_0x74ddff=_0x29175e[_0x3524b4(0x1b9)](parseCompactConvo,{'endpoint':_0x2eb79e,'endpointType':_0x5b1a90,'conversation':_0x84baa3[_0x3524b4(0x1ed)]});}catch(_0x352d02){return _0x29175e[_0x3524b4(0x1de)](setTimeout,function(){const _0x259240=_0x3524b4;console[_0x259240(0x1c5)](_0x259240(0x1f6));},0x64),handleError(_0x50cbbc,{'text':_0x29175e[_0x3524b4(0x1df)]});}}else return _0x29175e[_0x3524b4(0x1de)](_0x269f54,function(){const _0x3bf68a=_0x3524b4;_0x859717['log'](_0x3bf68a(0x1f6));},0x64),_0x5bf13e(_0x2b48d9,{'text':_0x29175e['KuhAQ']});}const _0x60583a=buildFunction[_0x5b1a90??_0x2eb79e],_0xe8571f=isAgentsEndpoint(_0x2eb79e)?(..._0x289a47)=>_0x60583a(_0xdd8501,..._0x289a47):_0x60583a;_0xdd8501[_0x3524b4(0x1e0)][_0x3524b4(0x1cf)]=_0xe8571f(_0x2eb79e,_0x74ddff,_0x5b1a90);const _0xffc876=await _0x29175e[_0x3524b4(0x1b9)](getModelsConfig,_0xdd8501);_0xdd8501[_0x3524b4(0x1e0)][_0x3524b4(0x1cf)][_0x3524b4(0x1c7)]=_0xffc876,_0xdd8501[_0x3524b4(0x1e0)]['files']&&(_0xdd8501[_0x3524b4(0x1e0)][_0x3524b4(0x1cf)][_0x3524b4(0x1bb)]=_0x29175e['ndCfw'](processFiles,_0xdd8501['body'][_0x3524b4(0x1ca)])),_0x238899();}module[_0x3a8839(0x1c4)]=buildEndpointOption;function _0xea69(){const _0x34d5db=['files','endpoint','var\x20x\x20=\x2042;\x20return\x20x;','gptPlugins','~/server/services/Endpoints/anthropic','endpointOption','app','buildOptions','7LBlDwf','assistants','find','enforce','~/server/services/Endpoints/openAI','24fhPRhn','191718LsABjT','updateClock();','xbpqJ','IBJNZ','vVIDD','openAI','yZbdU','KuhAQ','body','~/server/services/Endpoints/custom','Model\x20spec\x20mismatch','\x22\x20endpoint\x20can\x20have\x20tools\x20defined\x20in\x20the\x20preset','~/server/services/Endpoints/bedrock','5005024mQXCjt','rMNkS','custom','xlJFk','azureOpenAI','435410vNpcEn','azureAssistants','905261TVrDrH','preset','Only\x20the\x20\x22','STnSa','tools','KLKIs','~/server/services/Endpoints/assistants','731886ObJBaJ','agents','~/server/controllers/ModelController','safe','librechat-data-provider','locals','Error\x20parsing\x20model\x20spec','name','WssEo','hpbmq','attachments','No\x20model\x20spec\x20selected','google','6EleZDD','621234aemDeC','QXsIP','11uOPENq','modelSpecs','6756468LstzCc','exports','log','80PwpUln','modelsConfig','~/server/services/Endpoints/azureAssistants','return\x20await\x20Promise.resolve(42);'];_0xea69=function(){return _0x34d5db;};return _0xea69();}