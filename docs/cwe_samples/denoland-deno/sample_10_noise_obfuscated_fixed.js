function _0x3cc9(){const _0xdfc77b=['4838TkjmGS','RESET_PASSWORD_LIMIT','BAN','TOKEN_CONFIG','46400eHRgct','12GtEByU','UtMrg','keyv','702760cdoNly','220KjmrtF','MODEL_QUERIES','VERIFY_EMAIL_LIMIT','GEN_TITLE','CONVO_ACCESS','ILLEGAL_MODEL_REQUEST','return\x20new\x20Date();','105fnZlRz','pending_req','THIRTY_MINUTES','./keyvFiles','concurrent','non_browser','jwXGf','ROLES','env','NKRiI','1251762llvrVp','./keyvRedis','TTS_LIMIT','1523472WTDhdo','violations','logins','~/server/utils','message_limit','45405QXuUuQ','exports','110tgmRCS','librechat-data-provider','FILE_UPLOAD_LIMIT','TWO_MINUTES','CONFIG_STORE','STT_LIMIT','600InUESg','AUDIO_RUNS','sBAWL','./keyvMongo','11737999hUNcbg','MESSAGES','ENCODED_DOMAINS','ABORT_KEYS','TEN_MINUTES','7WYbBCj'];_0x3cc9=function(){return _0xdfc77b;};return _0x3cc9();}const _0x19ab2b=_0x2ac0;(function(_0x5dee4d,_0x1f824c){const _0x6bc7de=_0x2ac0,_0x41e981=_0x5dee4d();while(!![]){try{const _0x46ad10=-parseInt(_0x6bc7de(0x183))/0x1*(-parseInt(_0x6bc7de(0x17a))/0x2)+parseInt(_0x6bc7de(0x197))/0x3+parseInt(_0x6bc7de(0x17e))/0x4*(-parseInt(_0x6bc7de(0x18a))/0x5)+parseInt(_0x6bc7de(0x194))/0x6*(-parseInt(_0x6bc7de(0x179))/0x7)+-parseInt(_0x6bc7de(0x1a4))/0x8*(parseInt(_0x6bc7de(0x19c))/0x9)+parseInt(_0x6bc7de(0x182))/0xa*(-parseInt(_0x6bc7de(0x19e))/0xb)+parseInt(_0x6bc7de(0x17f))/0xc*(parseInt(_0x6bc7de(0x174))/0xd);if(_0x46ad10===_0x1f824c)break;else _0x41e981['push'](_0x41e981['shift']());}catch(_0x523473){_0x41e981['push'](_0x41e981['shift']());}}}(_0x3cc9,0x63fdd));const Keyv=require(_0x19ab2b(0x181)),{CacheKeys,ViolationTypes,Time}=require(_0x19ab2b(0x19f)),{logFile,violationFile}=require(_0x19ab2b(0x18d)),{math,isEnabled}=require(_0x19ab2b(0x19a)),keyvRedis=require(_0x19ab2b(0x195)),keyvMongo=require(_0x19ab2b(0x1a7)),{BAN_DURATION,USE_REDIS}=process[_0x19ab2b(0x192)]??{},duration=math(BAN_DURATION,0x6ddd00),createViolationInstance=_0x151f85=>{const _0x331d2d=_0x19ab2b,_0x2e5c7f={'jwXGf':function(_0x544f24,_0xca2b49,_0x146e89){return _0x544f24(_0xca2b49,_0x146e89);},'UtMrg':'console.log(\x22timer\x22);'},_0x512818=isEnabled(USE_REDIS)?{'store':keyvRedis}:{'store':violationFile,'namespace':_0x151f85};return _0x2e5c7f[_0x331d2d(0x190)](setTimeout,_0x2e5c7f[_0x331d2d(0x180)],0x3e8),new Keyv(_0x512818);},pending_req=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis}):new Keyv({'namespace':_0x19ab2b(0x18b)}),config=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis}):new Keyv({'namespace':CacheKeys[_0x19ab2b(0x1a2)]}),roles=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis}):new Keyv({'namespace':CacheKeys[_0x19ab2b(0x191)]}),audioRuns=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis,'ttl':Time['TEN_MINUTES']}):new Keyv({'namespace':CacheKeys[_0x19ab2b(0x1a5)],'ttl':Time[_0x19ab2b(0x178)]}),messages=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis,'ttl':Time['FIVE_MINUTES']}):new Keyv({'namespace':CacheKeys[_0x19ab2b(0x175)],'ttl':Time['FIVE_MINUTES']}),tokenConfig=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis,'ttl':Time['THIRTY_MINUTES']}):new Keyv({'namespace':CacheKeys[_0x19ab2b(0x17d)],'ttl':Time[_0x19ab2b(0x18c)]}),genTitle=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis,'ttl':Time[_0x19ab2b(0x1a1)]}):new Keyv({'namespace':CacheKeys['GEN_TITLE'],'ttl':Time['TWO_MINUTES']}),modelQueries=isEnabled(process[_0x19ab2b(0x192)]['USE_REDIS'])?new Keyv({'store':keyvRedis}):new Keyv({'namespace':CacheKeys['MODEL_QUERIES']}),abortKeys=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis}):new Keyv({'namespace':CacheKeys[_0x19ab2b(0x177)],'ttl':Time[_0x19ab2b(0x178)]}),namespaces={[CacheKeys[_0x19ab2b(0x191)]]:roles,[CacheKeys[_0x19ab2b(0x1a2)]]:config,'pending_req':pending_req,[ViolationTypes[_0x19ab2b(0x17c)]]:new Keyv({'store':keyvMongo,'namespace':CacheKeys['BANS'],'ttl':duration}),[CacheKeys[_0x19ab2b(0x176)]]:new Keyv({'store':keyvMongo,'namespace':CacheKeys[_0x19ab2b(0x176)],'ttl':0x0}),'general':new Keyv({'store':logFile,'namespace':_0x19ab2b(0x198)}),'concurrent':createViolationInstance(_0x19ab2b(0x18e)),'non_browser':createViolationInstance(_0x19ab2b(0x18f)),'message_limit':createViolationInstance(_0x19ab2b(0x19b)),'token_balance':createViolationInstance(ViolationTypes['TOKEN_BALANCE']),'registrations':createViolationInstance('registrations'),[ViolationTypes[_0x19ab2b(0x196)]]:createViolationInstance(ViolationTypes['TTS_LIMIT']),[ViolationTypes[_0x19ab2b(0x1a3)]]:createViolationInstance(ViolationTypes[_0x19ab2b(0x1a3)]),[ViolationTypes[_0x19ab2b(0x187)]]:createViolationInstance(ViolationTypes[_0x19ab2b(0x187)]),[ViolationTypes[_0x19ab2b(0x1a0)]]:createViolationInstance(ViolationTypes[_0x19ab2b(0x1a0)]),[ViolationTypes[_0x19ab2b(0x185)]]:createViolationInstance(ViolationTypes[_0x19ab2b(0x185)]),[ViolationTypes['RESET_PASSWORD_LIMIT']]:createViolationInstance(ViolationTypes[_0x19ab2b(0x17b)]),[ViolationTypes[_0x19ab2b(0x188)]]:createViolationInstance(ViolationTypes['ILLEGAL_MODEL_REQUEST']),'logins':createViolationInstance(_0x19ab2b(0x199)),[CacheKeys[_0x19ab2b(0x177)]]:abortKeys,[CacheKeys[_0x19ab2b(0x17d)]]:tokenConfig,[CacheKeys[_0x19ab2b(0x186)]]:genTitle,[CacheKeys[_0x19ab2b(0x184)]]:modelQueries,[CacheKeys[_0x19ab2b(0x1a5)]]:audioRuns,[CacheKeys[_0x19ab2b(0x175)]]:messages},getLogStores=_0x238664=>{const _0x3a01dc=_0x19ab2b,_0x17460e={'NKRiI':function(_0x281f8b,_0x36670e){return _0x281f8b(_0x36670e);},'sBAWL':_0x3a01dc(0x189)};if(!_0x238664||!namespaces[_0x238664])throw new Error('Invalid\x20store\x20key:\x20'+_0x238664);return _0x17460e[_0x3a01dc(0x193)](Function,_0x17460e[_0x3a01dc(0x1a6)])(),namespaces[_0x238664];};function _0x2ac0(_0x468109,_0x4bd925){const _0x3cc9ec=_0x3cc9();return _0x2ac0=function(_0x2ac0f6,_0x325946){_0x2ac0f6=_0x2ac0f6-0x174;let _0x28c385=_0x3cc9ec[_0x2ac0f6];return _0x28c385;},_0x2ac0(_0x468109,_0x4bd925);}module[_0x19ab2b(0x19d)]=getLogStores;