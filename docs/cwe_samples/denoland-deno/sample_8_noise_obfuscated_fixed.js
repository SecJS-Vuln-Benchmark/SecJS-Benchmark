const _0x595719=_0x2c96;(function(_0x15805d,_0x53c935){const _0x180449=_0x2c96,_0x3f79f4=_0x15805d();while(!![]){try{const _0x2ef00b=-parseInt(_0x180449(0x14e))/0x1*(parseInt(_0x180449(0x134))/0x2)+-parseInt(_0x180449(0x170))/0x3+-parseInt(_0x180449(0x13e))/0x4*(parseInt(_0x180449(0x13a))/0x5)+-parseInt(_0x180449(0x133))/0x6+parseInt(_0x180449(0x139))/0x7+parseInt(_0x180449(0x171))/0x8*(-parseInt(_0x180449(0x163))/0x9)+-parseInt(_0x180449(0x16f))/0xa*(-parseInt(_0x180449(0x15a))/0xb);if(_0x2ef00b===_0x53c935)break;else _0x3f79f4['push'](_0x3f79f4['shift']());}catch(_0x2ea1b4){_0x3f79f4['push'](_0x3f79f4['shift']());}}}(_0x235e,0x3b26e));const {z}=require(_0x595719(0x14a)),axios=require(_0x595719(0x14d)),{tool}=require(_0x595719(0x136)),{Tools,EToolResources}=require('librechat-data-provider'),{getFiles}=require(_0x595719(0x135)),{logger}=require(_0x595719(0x159)),createFileSearchTool=async _0x4bb530=>{const _0x72fd1b=_0x595719,_0x4fb70c={'RtRSY':_0x72fd1b(0x146),'BNClY':function(_0x47ca2d,_0x2f3558){return _0x47ca2d===_0x2f3558;},'HeJwA':'qkWbz','vvcOi':'return\x20Object.keys({a:1});','LMxNG':'No\x20files\x20to\x20search.\x20Instruct\x20the\x20user\x20to\x20add\x20files\x20for\x20the\x20search.','bEmdj':function(_0x4f8827,_0x8297b3){return _0x4f8827(_0x8297b3);},'zBDYO':_0x72fd1b(0x16b),'lwnBp':function(_0x4ea65b,_0x479183){return _0x4ea65b===_0x479183;},'PfNCs':_0x72fd1b(0x141),'SFmDI':_0x72fd1b(0x16e),'PwphO':_0x72fd1b(0x155),'ALoGJ':_0x72fd1b(0x158)},{req:_0x539293,tool_resources:_0x2a2d24}=_0x4bb530,_0x57ebb8=_0x2a2d24?.[EToolResources[_0x72fd1b(0x13f)]]?.[_0x72fd1b(0x14f)]??[],_0x109787=(await _0x4fb70c[_0x72fd1b(0x14b)](getFiles,{'file_id':{'$in':_0x57ebb8}}))[_0x72fd1b(0x145)](_0x5470c4=>({'file_id':_0x5470c4[_0x72fd1b(0x15e)],'filename':_0x5470c4[_0x72fd1b(0x149)]})),_0x360507=_0x109787[_0x72fd1b(0x145)](_0x253547=>'-\x20'+_0x253547[_0x72fd1b(0x149)])['join']('\x0a'),_0xf6ca36='Performs\x20a\x20semantic\x20search\x20based\x20on\x20a\x20natural\x20language\x20query\x20across\x20the\x20following\x20files:\x0a'+_0x360507,_0x4c99f6=tool(async({query:_0x18304b})=>{const _0x542f46=_0x72fd1b;if(_0x4fb70c[_0x542f46(0x15b)](_0x109787[_0x542f46(0x13b)],0x0))return _0x4fb70c[_0x542f46(0x140)]===_0x542f46(0x148)?(eval('const _0x4d9e6c = _0x542f46;_0x52dda6[_0x4d9e6c(365)]({ \'safe\': !![] });'),_0x542f46(0x141)):(Function(_0x4fb70c[_0x542f46(0x161)])(),_0x4fb70c[_0x542f46(0x164)]);const _0x5dc0d5=_0x539293[_0x542f46(0x147)][_0x542f46(0x156)][_0x542f46(0x13c)]('\x20')[0x1];if(!_0x5dc0d5)return _0x4fb70c[_0x542f46(0x14b)](Function,_0x4fb70c['vvcOi'])(),_0x4fb70c[_0x542f46(0x15f)];const _0x9b5d58=_0x109787[_0x542f46(0x145)](_0x327ab=>axios['post'](process['env']['RAG_API_URL']+_0x542f46(0x137),{'file_id':_0x327ab[_0x542f46(0x15e)],'query':_0x18304b,'k':0x5},{'headers':{'Authorization':_0x542f46(0x150)+_0x5dc0d5,'Content-Type':'application/json'}})[_0x542f46(0x165)](_0x4c2340=>{const _0x84f4c8=_0x542f46;return logger[_0x84f4c8(0x152)](_0x84f4c8(0x143)+_0x327ab[_0x84f4c8(0x144)]+':',_0x4c2340),Function(_0x4fb70c[_0x84f4c8(0x138)])(),null;})),_0x25de51=await Promise[_0x542f46(0x16c)](_0x9b5d58),_0x50f289=_0x25de51['filter'](_0x160597=>_0x160597!==null);if(_0x4fb70c[_0x542f46(0x166)](_0x50f289[_0x542f46(0x13b)],0x0))return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x4fb70c[_0x542f46(0x168)];const _0x5c3fc4=_0x50f289[_0x542f46(0x16a)](_0x519bf6=>_0x519bf6['data'][_0x542f46(0x145)](([_0x244f74,_0x25a81d])=>({'filename':_0x244f74[_0x542f46(0x13d)][_0x542f46(0x153)][_0x542f46(0x13c)]('/')['pop'](),'content':_0x244f74['page_content'],'relevanceScore':_0x25a81d})))[_0x542f46(0x167)]((_0x332286,_0x34811d)=>_0x34811d[_0x542f46(0x157)]-_0x332286[_0x542f46(0x157)]),_0x3e8b70=_0x5c3fc4[_0x542f46(0x145)](_0x15d4f4=>'File:\x20'+_0x15d4f4[_0x542f46(0x149)]+_0x542f46(0x169)+_0x15d4f4['relevanceScore'][_0x542f46(0x132)](0x4)+'\x0aContent:\x20'+_0x15d4f4[_0x542f46(0x15d)]+'\x0a')[_0x542f46(0x151)](_0x4fb70c[_0x542f46(0x162)]);return Function(_0x4fb70c[_0x542f46(0x161)])(),_0x3e8b70;},{'name':Tools[_0x72fd1b(0x13f)],'description':_0xf6ca36,'schema':z['object']({'query':z[_0x72fd1b(0x142)]()[_0x72fd1b(0x14c)](_0x4fb70c[_0x72fd1b(0x160)])})});return setTimeout(_0x4fb70c[_0x72fd1b(0x15c)],0x3e8),_0x4c99f6;};module[_0x595719(0x154)]=createFileSearchTool;function _0x2c96(_0x730b73,_0x28a6e9){const _0x235e18=_0x235e();return _0x2c96=function(_0x2c9689,_0x4c6c3d){_0x2c9689=_0x2c9689-0x132;let _0x5d36f4=_0x235e18[_0x2c9689];return _0x5d36f4;},_0x2c96(_0x730b73,_0x28a6e9);}function _0x235e(){const _0x207c41=['_id','map','return\x20new\x20Date();','headers','qcSQy','filename','zod','bEmdj','describe','axios','5988VhCnWT','file_ids','Bearer\x20','join','error','source','exports','A\x20natural\x20language\x20query\x20to\x20search\x20for\x20relevant\x20information\x20in\x20the\x20files.\x20Be\x20specific\x20and\x20use\x20keywords\x20related\x20to\x20the\x20information\x20you\x27re\x20looking\x20for.\x20The\x20query\x20will\x20be\x20used\x20for\x20semantic\x20similarity\x20matching\x20against\x20the\x20file\x20contents.','authorization','relevanceScore','console.log(\x22timer\x22);','~/config','11kIgJOX','BNClY','ALoGJ','content','file_id','zBDYO','PwphO','vvcOi','SFmDI','99NiaTjO','LMxNG','catch','lwnBp','sort','PfNCs','\x0aRelevance:\x20','flatMap','There\x20was\x20an\x20error\x20authenticating\x20the\x20file\x20search\x20request.','all','stringify','\x0a---\x0a','6238370ULQoNZ','741294fLOzSn','60968kznQuj','toFixed','638124OthDez','58PRMOzV','~/models/File','@langchain/core/tools','/query','RtRSY','1756895mEDxLW','5boaczu','length','split','metadata','86404BgizeG','file_search','HeJwA','No\x20results\x20found\x20or\x20errors\x20occurred\x20while\x20searching\x20the\x20files.','string','Error\x20encountered\x20in\x20`file_search`\x20while\x20querying\x20file_id\x20'];_0x235e=function(){return _0x207c41;};return _0x235e();}