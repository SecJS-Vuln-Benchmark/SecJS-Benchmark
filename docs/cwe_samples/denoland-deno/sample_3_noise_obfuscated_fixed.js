function _0x40a4(_0x53b47b,_0x5b2728){const _0x4e2d97=_0x4e2d();return _0x40a4=function(_0x40a40b,_0x13ae29){_0x40a40b=_0x40a40b-0xff;let _0x160759=_0x4e2d97[_0x40a40b];return _0x160759;},_0x40a4(_0x53b47b,_0x5b2728);}function _0x4e2d(){const _0x27e31d=['1726109WKQcXF','file','313504dPebQh','5162274GQfILJ','User\x20ID\x20is\x20undefined','20QbmWWE','fileStrategy','multer','107061pRNciU','locals','status','imageOutputType','~/config','198498JQrcfa','body','1291512oDRLJe','express','35sIJujA','single','190627sfehpz','buffer','An\x20error\x20occurred\x20while\x20uploading\x20the\x20profile\x20picture','app','input','json','error'];_0x4e2d=function(){return _0x27e31d;};return _0x4e2d();}const _0x4a1714=_0x40a4;(function(_0x52d843,_0x5175d3){const _0x51fbc3=_0x40a4,_0x2be425=_0x52d843();while(!![]){try{const _0x1cb522=parseInt(_0x51fbc3(0x10b))/0x1+parseInt(_0x51fbc3(0x114))/0x2+-parseInt(_0x51fbc3(0x100))/0x3*(-parseInt(_0x51fbc3(0x117))/0x4)+parseInt(_0x51fbc3(0x109))/0x5*(-parseInt(_0x51fbc3(0x105))/0x6)+parseInt(_0x51fbc3(0x112))/0x7+parseInt(_0x51fbc3(0x107))/0x8+-parseInt(_0x51fbc3(0x115))/0x9;if(_0x1cb522===_0x5175d3)break;else _0x2be425['push'](_0x2be425['shift']());}catch(_0x17c572){_0x2be425['push'](_0x2be425['shift']());}}}(_0x4e2d,0x1f6a1));const multer=require(_0x4a1714(0xff)),express=require(_0x4a1714(0x108)),{getStrategyFunctions}=require('~/server/services/Files/strategies'),{resizeAvatar}=require('~/server/services/Files/images/avatar'),{logger}=require(_0x4a1714(0x104)),upload=multer(),router=express['Router']();router['post']('/',upload[_0x4a1714(0x10a)](_0x4a1714(0x10f)),async(_0x5787ae,_0x5df76e)=>{const _0xcb8d77=_0x4a1714;try{const _0x9d7387=_0x5787ae['user']['id'],{manual:_0x1bdef2}=_0x5787ae[_0xcb8d77(0x106)],_0x5a0233=_0x5787ae[_0xcb8d77(0x113)][_0xcb8d77(0x10c)];if(!_0x9d7387)throw new Error(_0xcb8d77(0x116));const _0xa63b8e=_0x5787ae[_0xcb8d77(0x10e)][_0xcb8d77(0x101)][_0xcb8d77(0x118)],_0x3ff372=_0x5787ae[_0xcb8d77(0x10e)][_0xcb8d77(0x101)][_0xcb8d77(0x103)],_0x3d4973=await resizeAvatar({'userId':_0x9d7387,'input':_0x5a0233,'desiredFormat':_0x3ff372}),{processAvatar:_0x53bb72}=getStrategyFunctions(_0xa63b8e),_0x40eba9=await _0x53bb72({'buffer':_0x3d4973,'userId':_0x9d7387,'manual':_0x1bdef2});_0x5df76e['json']({'url':_0x40eba9});}catch(_0x19e666){const _0x177f7a=_0xcb8d77(0x10d);logger[_0xcb8d77(0x111)](_0x177f7a,_0x19e666),_0x5df76e[_0xcb8d77(0x102)](0x1f4)[_0xcb8d77(0x110)]({'message':_0x177f7a});}}),module['exports']=router;