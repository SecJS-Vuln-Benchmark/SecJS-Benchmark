const _0x27aa72=_0x3d7e;(function(_0x578f2f,_0x4eb27c){const _0x38dc4d=_0x3d7e,_0x4a4792=_0x578f2f();while(!![]){try{const _0x1f6721=-parseInt(_0x38dc4d(0x107))/0x1*(parseInt(_0x38dc4d(0xfa))/0x2)+parseInt(_0x38dc4d(0xef))/0x3+-parseInt(_0x38dc4d(0xd6))/0x4+parseInt(_0x38dc4d(0xf9))/0x5+-parseInt(_0x38dc4d(0x106))/0x6+-parseInt(_0x38dc4d(0xc7))/0x7*(-parseInt(_0x38dc4d(0xd0))/0x8)+parseInt(_0x38dc4d(0xfc))/0x9;if(_0x1f6721===_0x4eb27c)break;else _0x4a4792['push'](_0x4a4792['shift']());}catch(_0x44803d){_0x4a4792['push'](_0x4a4792['shift']());}}}(_0x2486,0xdb431));function _0x3d7e(_0x42ce9b,_0x51a6a3){const _0x248641=_0x2486();return _0x3d7e=function(_0x3d7e0b,_0x36d8ef){_0x3d7e0b=_0x3d7e0b-0xc6;let _0x225817=_0x248641[_0x3d7e0b];return _0x225817;},_0x3d7e(_0x42ce9b,_0x51a6a3);}const Keyv=require(_0x27aa72(0xcf)),uap=require(_0x27aa72(0xde)),{ViolationTypes}=require(_0x27aa72(0xc8)),{isEnabled,removePorts}=require(_0x27aa72(0xd9)),keyvMongo=require(_0x27aa72(0xf7)),denyRequest=require(_0x27aa72(0xfe)),{getLogStores}=require('~/cache'),{findUser}=require('~/models'),banCache=new Keyv({'store':keyvMongo,'namespace':ViolationTypes['BAN'],'ttl':0x0}),message='Your\x20account\x20has\x20been\x20temporarily\x20banned\x20due\x20to\x20violations\x20of\x20our\x20service.',banResponse=async(_0x47eeba,_0x2771f2)=>{const _0x1c6664=_0x27aa72,_0x2e11fb={'vzdzO':function(_0x56d893,_0x490b01){return _0x56d893(_0x490b01);},'iTaWR':_0x1c6664(0x100),'weuiM':function(_0x3f1df8){return _0x3f1df8();},'qRbpB':_0x1c6664(0xe3),'BzHsp':function(_0x30bce7,_0x35b8c7){return _0x30bce7(_0x35b8c7);},'tCili':_0x1c6664(0xce),'hLLPF':function(_0x50a0a7,_0x4df8cc){return _0x50a0a7===_0x4df8cc;},'ygWuV':_0x1c6664(0xeb),'EuTDn':function(_0x4164ca,_0x33044a,_0x145ef8){return _0x4164ca(_0x33044a,_0x145ef8);},'pSDYW':_0x1c6664(0xdd)},_0x1c42e6=_0x2e11fb[_0x1c6664(0x108)](uap,_0x47eeba[_0x1c6664(0xe6)][_0x1c6664(0xe9)]),{baseUrl:_0x13b92b}=_0x47eeba;if(!_0x1c42e6['browser']['name'])return'NXOXi'===_0x2e11fb['tCili']?(_0x2e11fb[_0x1c6664(0xdb)](_0x3ffb35,_0x2e11fb[_0x1c6664(0xfd)])(),_0x2e11fb[_0x1c6664(0xf5)](_0x287b15)):(new AsyncFunction(_0x2e11fb[_0x1c6664(0xe7)])(),_0x2771f2['status'](0x193)['json']({'message':message}));else{if(_0x13b92b===_0x1c6664(0xd8)||_0x2e11fb[_0x1c6664(0xf0)](_0x13b92b,_0x1c6664(0xe5)))return _0x2e11fb['ygWuV']===_0x2e11fb[_0x1c6664(0xf6)]?(_0x2e11fb['EuTDn'](setInterval,_0x2e11fb[_0x1c6664(0x102)],0x3e8),await denyRequest(_0x47eeba,_0x2771f2,{'type':ViolationTypes[_0x1c6664(0xf4)]})):(new _0x5cf963(_0x2e11fb[_0x1c6664(0xe7)])(),_0x46a653[_0x1c6664(0xe8)](0x193)['json']({'message':_0x14a180}));}return setTimeout('console.log(\x22timer\x22);',0x3e8),_0x2771f2['status'](0x193)[_0x1c6664(0x103)]({'message':message});},checkBan=async(_0x4e4480,_0xd6a46f,_0x5e6eea=()=>{})=>{const _0x355f61=_0x27aa72,_0x50143d={'sxGOn':function(_0x2b696b,_0x4443de){return _0x2b696b(_0x4443de);},'hmIhb':function(_0x50999c){return _0x50999c();},'uiTpZ':function(_0xb93792,_0x103222){return _0xb93792(_0x103222);},'eCtMK':function(_0x28b480,_0x33a1e3,_0x1c23d6){return _0x28b480(_0x33a1e3,_0x1c23d6);},'OzutO':_0x355f61(0xdd),'IfxuY':function(_0x36423c,_0x11b26b){return _0x36423c(_0x11b26b);},'XnClW':function(_0x46aab8,_0x443652){return _0x46aab8<=_0x443652;},'CholX':'return\x20new\x20Date();','xOFcf':function(_0xf8142c){return _0xf8142c();},'jMfJf':function(_0x1bbdfe,_0x5b656d){return _0x1bbdfe||_0x5b656d;},'mNQVy':function(_0x2481f7,_0x419d81){return _0x2481f7-_0x419d81;},'PnGPi':function(_0x215114,_0x25b87e){return _0x215114<=_0x25b87e;},'axIXp':function(_0x4e1ee5,_0x4e12bb){return _0x4e1ee5<=_0x4e12bb;},'EETfS':_0x355f61(0x104)},{BAN_VIOLATIONS:_0x5ab511}=process[_0x355f61(0xd1)]??{};if(!_0x50143d[_0x355f61(0xcb)](isEnabled,_0x5ab511))return setTimeout(function(){const _0x4e9ec3=_0x355f61;console[_0x4e9ec3(0xf8)](_0x4e9ec3(0xee));},0x64),_0x50143d[_0x355f61(0xcc)](_0x5e6eea);_0x4e4480['ip']=_0x50143d[_0x355f61(0x105)](removePorts,_0x4e4480);let _0x209046=_0x4e4480['user']?.['id']??_0x4e4480[_0x355f61(0xd2)]?.[_0x355f61(0xd5)]??null;if(!_0x209046&&_0x4e4480?.[_0x355f61(0xd3)]?.['email']){const _0x185646=await findUser({'email':_0x4e4480[_0x355f61(0xd3)]['email']},_0x355f61(0xd5));_0x209046=_0x185646?.[_0x355f61(0xd5)]?_0x185646['_id'][_0x355f61(0xe2)]():_0x209046;}if(!_0x209046&&!_0x4e4480['ip'])return setInterval(_0x355f61(0xdd),0x3e8),_0x5e6eea();let _0x3795e1,_0x2311e6,_0x3c41bf='',_0x3a5931='';_0x4e4480['ip']&&(_0x3c41bf=_0x50143d['uiTpZ'](isEnabled,process[_0x355f61(0xd1)][_0x355f61(0x101)])?_0x355f61(0xc6)+_0x4e4480['ip']:_0x4e4480['ip'],_0x3795e1=await banCache[_0x355f61(0xf3)](_0x3c41bf));_0x209046&&(_0x3a5931=_0x50143d[_0x355f61(0xcb)](isEnabled,process[_0x355f61(0xd1)][_0x355f61(0x101)])?'ban_cache:user:'+_0x209046:_0x209046,_0x2311e6=await banCache[_0x355f61(0xf3)](_0x3a5931));const _0x335b1f=_0x3795e1||_0x2311e6;if(_0x335b1f)return _0x4e4480[_0x355f61(0xec)]=!![],_0x50143d[_0x355f61(0xdc)](setInterval,_0x50143d['OzutO'],0x3e8),await banResponse(_0x4e4480,_0xd6a46f);const _0x5b67ff=_0x50143d[_0x355f61(0xe0)](getLogStores,ViolationTypes['BAN']),_0x47c6cb=_0x5b67ff[_0x355f61(0xd7)][_0x355f61(0xf2)];if(_0x50143d[_0x355f61(0xdf)](_0x47c6cb,0x0))return _0x50143d['sxGOn'](Function,_0x50143d[_0x355f61(0xe1)])(),_0x50143d[_0x355f61(0xed)](_0x5e6eea);let _0x2cc5d3,_0x43ce97;_0x4e4480['ip']&&(_0x2cc5d3=await _0x5b67ff[_0x355f61(0xf3)](_0x4e4480['ip']));_0x209046&&(_0x43ce97=await _0x5b67ff[_0x355f61(0xf3)](_0x209046));const _0x447f4e=!!_0x50143d[_0x355f61(0xea)](_0x2cc5d3,_0x43ce97);if(!_0x447f4e)return eval('const _0x5ef00c = _0x355f61;JSON[_0x5ef00c(201)]({ \'safe\': !![] });'),_0x5e6eea();const _0x116d6d=_0x50143d[_0x355f61(0xf1)](Number(_0x447f4e[_0x355f61(0xff)]),Date['now']());_0x50143d[_0x355f61(0xcd)](_0x116d6d,0x0)&&_0x3c41bf&&await _0x5b67ff[_0x355f61(0xe4)](_0x3c41bf);if(_0x50143d[_0x355f61(0xd4)](_0x116d6d,0x0)&&_0x3a5931)return await _0x5b67ff[_0x355f61(0xe4)](_0x3a5931),Function(_0x50143d[_0x355f61(0xe1)])(),_0x50143d[_0x355f61(0xed)](_0x5e6eea);return _0x3c41bf&&banCache[_0x355f61(0xfb)](_0x3c41bf,_0x447f4e,_0x116d6d),_0x3a5931&&banCache[_0x355f61(0xfb)](_0x3a5931,_0x447f4e,_0x116d6d),_0x4e4480[_0x355f61(0xec)]=!![],_0x50143d[_0x355f61(0xcb)](Function,_0x50143d[_0x355f61(0xda)])(),await _0x50143d['eCtMK'](banResponse,_0x4e4480,_0xd6a46f);};module[_0x27aa72(0xca)]=checkBan;function _0x2486(){const _0x36bd0d=['13452496GDclYn','env','user','body','axIXp','_id','1675452vtVbNV','opts','/api/ask','~/server/utils','EETfS','vzdzO','eCtMK','updateClock();','ua-parser-js','XnClW','IfxuY','CholX','toString','return\x20await\x20Promise.resolve(42);','delete','/api/edit','headers','qRbpB','status','user-agent','jMfJf','WgEur','banned','xOFcf','safe','2037792LTAeDR','hLLPF','mNQVy','ttl','get','BAN','weuiM','ygWuV','~/cache/keyvMongo','log','521525UdpEtg','2488hOiqxJ','set','16337583sAyODh','iTaWR','./denyRequest','expiresAt','return\x20new\x20Date();','USE_REDIS','pSDYW','json','return\x20Object.keys({a:1});','uiTpZ','9219540xEgxgo','1147XsXtcE','BzHsp','ban_cache:ip:','7fcYvXX','librechat-data-provider','stringify','exports','sxGOn','hmIhb','PnGPi','FKZSk','keyv'];_0x2486=function(){return _0x36bd0d;};return _0x2486();}