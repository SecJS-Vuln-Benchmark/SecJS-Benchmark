function _0x5311(_0x21f247,_0x3130d5){const _0x4b1aa1=_0x4b1a();return _0x5311=function(_0x5311da,_0x93699){_0x5311da=_0x5311da-0x1f3;let _0x2891c4=_0x4b1aa1[_0x5311da];return _0x2891c4;},_0x5311(_0x21f247,_0x3130d5);}const _0x19abe9=_0x5311;function _0x4b1a(){const _0x3b95c8=['error','bHqhE','loading\x20new\x20rules','get','rule\x20matched','mWilu','GwwIi','UJqrC','replace','filter','isArray','526550RUHHrk','method','return\x20await\x20Promise.resolve(42);','Anlkv','name','slice','ExGvE','body','QKlOQ','undefsafe','Fzcxn','139592oEvlTz','regex','CgwHt','TIoOF','2730804JuhxtZ','xudUf','SOdZk','thOKg','rZQOb','TxjuY','Pduyi','map','path','TxXlq','qJEdC','updateClock();','PxsHu','parse','eYjXV','exports','APbbc','../try-json-parse','Unable\x20to\x20parse\x20rule\x20source,\x20ignoring','eExhu','console.log(\x22timer\x22);','msbfl','split','Syciq','QxvRJ','length','6608600gGsFJU','test','adding\x20new\x20filter\x20rule','jTcOx','baWeF','info','failed\x20to\x20test\x20regex\x20rule','minimatch','TpEty','2aLLYSt','toLowerCase','Expected\x20array\x20of\x20filter\x20rules,\x20got\x20\x27','safe','DGtpW','BMTpH','205186CXSEDq','auth','aTOOH','SDIum','wPQmg','any','4417402NDWoRQ','fTjxQ','../replace-vars','1504821jaoDVl','7SPoMoe','var\x20x\x20=\x2042;\x20return\x20x;','glfdT','SifGb','\x27\x20instead.','debug','uwcWt','125iULJJl','stringify','UXhxx','27iyCgZD','exec','warn','verUc','EWGRO','log','join','rClaf','byyxz','some'];_0x4b1a=function(){return _0x3b95c8;};return _0x4b1a();}(function(_0x44b8d9,_0x5d09e8){const _0x5d8ffd=_0x5311,_0x493e9e=_0x44b8d9();while(!![]){try{const _0x4260e4=parseInt(_0x5d8ffd(0x232))/0x1*(parseInt(_0x5d8ffd(0x22c))/0x2)+parseInt(_0x5d8ffd(0x23b))/0x3+-parseInt(_0x5d8ffd(0x205))/0x4*(-parseInt(_0x5d8ffd(0x243))/0x5)+parseInt(_0x5d8ffd(0x209))/0x6*(-parseInt(_0x5d8ffd(0x23c))/0x7)+-parseInt(_0x5d8ffd(0x223))/0x8+parseInt(_0x5d8ffd(0x246))/0x9*(-parseInt(_0x5d8ffd(0x1fa))/0xa)+parseInt(_0x5d8ffd(0x238))/0xb;if(_0x4260e4===_0x5d09e8)break;else _0x493e9e['push'](_0x493e9e['shift']());}catch(_0xee8bc7){_0x493e9e['push'](_0x493e9e['shift']());}}}(_0x4b1a,0x843d3));const minimatch=require(_0x19abe9(0x22a)),pathRegexp=require('path-to-regexp'),qs=require('qs'),undefsafe=require(_0x19abe9(0x203)),replace=require(_0x19abe9(0x23a)),authHeader=require('../auth-header'),tryJSONParse=require(_0x19abe9(0x21a)),logger=require('../log');module[_0x19abe9(0x218)]=_0x93db47=>{const _0x2f355c=_0x19abe9,_0x3da7d5={'QxvRJ':function(_0x1b3034,_0x1e481b){return _0x1b3034-_0x1e481b;},'SDIum':function(_0x41c13f,_0x3e63e0){return _0x41c13f===_0x3e63e0;},'eOHky':_0x2f355c(0x242),'fTjxQ':_0x2f355c(0x217),'eExhu':function(_0x5f5099,_0x3f821d,_0x4b8aa9){return _0x5f5099(_0x3f821d,_0x4b8aa9);},'sIMeG':_0x2f355c(0x212),'Pduyi':function(_0x406329,_0x99699){return _0x406329+_0x99699;},'zzstz':_0x2f355c(0x237),'qJEdC':_0x2f355c(0x24a),'baWeF':function(_0x3c2b79,_0x243e99){return _0x3c2b79(_0x243e99);},'glfdT':function(_0x18f8f2,_0x5b790e){return _0x18f8f2!==_0x5b790e;},'rZQOb':'BAPfF','PxsHu':_0x2f355c(0x1fc),'QKlOQ':function(_0x4dc81a,_0x1d0cb0){return _0x4dc81a+_0x1d0cb0;},'TIoOF':function(_0x27241a,_0x22b591){return _0x27241a(_0x22b591);},'verUc':_0x2f355c(0x22b),'UJqrC':function(_0xf88a8c,_0x5cdc8c){return _0xf88a8c||_0x5cdc8c;},'SifGb':'return\x20new\x20Date();','DGtpW':'looking\x20for\x20a\x20rule\x20match','clPrO':function(_0x1dc0d6,_0x20af38){return _0x1dc0d6(_0x20af38);},'isyWu':function(_0x506ecd,_0x27f729){return _0x506ecd(_0x27f729);},'Fzcxn':function(_0x265cdc,_0x46ecff){return _0x265cdc===_0x46ecff;},'msbfl':_0x2f355c(0x1f5),'Syciq':_0x2f355c(0x214)};let _0xc85981=[];const _0x588155=_0x3da7d5[_0x2f355c(0x208)](require,'../config');if(Array[_0x2f355c(0x1f9)](_0x93db47))_0xc85981=_0x93db47;else{if(_0x93db47)try{_0xc85981=require(_0x93db47);}catch(_0x92d298){if(_0x3da7d5[_0x2f355c(0x204)](_0x3da7d5[_0x2f355c(0x21e)],_0x2f355c(0x251)))return _0xc1bcab[_0x2f355c(0x250)]({'error':_0x569622,'path':_0x4478ee,'regex':_0x1caaa5},_0x2f355c(0x229)),eval('_0x2b8558[\'stringify\']({ \'safe\': !![] });'),![];else logger[_0x2f355c(0x248)]({'ruleSource':_0x93db47,'error':_0x92d298},_0x2f355c(0x21b));}}if(!Array[_0x2f355c(0x1f9)](_0xc85981))throw new Error(_0x2f355c(0x22e)+typeof _0xc85981+_0x2f355c(0x240));logger[_0x2f355c(0x228)]({'rulesCount':_0xc85981[_0x2f355c(0x222)]},_0x2f355c(0x252));const _0x489501=_0xc85981[_0x2f355c(0x210)](_0x5b49f6=>{const _0x7e72eb=_0x2f355c,_0x1a95c0={'APbbc':_0x3da7d5['PxsHu'],'BMTpH':function(_0x48583c,_0xc0d8d7,_0x544169,_0x36499a){return _0x48583c(_0xc0d8d7,_0x544169,_0x36499a);},'TxjuY':function(_0x313166,_0x4f6edb,_0x1396fa){const _0x4f7ecd=_0x5311;return _0x3da7d5[_0x4f7ecd(0x21c)](_0x313166,_0x4f6edb,_0x1396fa);}};if(_0x3da7d5[_0x7e72eb(0x249)]==='TpEty'){const _0x1df59a=[];let {method:_0x109b19,origin:_0x4cee2f,path:_0x4e30ed,valid:_0x2167b9,stream:_0x448837}=_0x5b49f6;_0x109b19=(_0x109b19||_0x7e72eb(0x253))[_0x7e72eb(0x22d)](),_0x2167b9=_0x2167b9||[];const _0x423621=_0x2167b9[_0x7e72eb(0x1f8)](_0x47391f=>!!_0x47391f[_0x7e72eb(0x211)]&&!_0x47391f[_0x7e72eb(0x206)]),_0x5b598f=_0x2167b9['filter'](_0x206e1d=>!!_0x206e1d[_0x7e72eb(0x211)]&&!!_0x206e1d[_0x7e72eb(0x206)]),_0x37f65b=_0x2167b9[_0x7e72eb(0x1f8)](_0x4cdced=>!!_0x4cdced['queryParam']),_0x5efb82={};_0x4e30ed=_0x3da7d5[_0x7e72eb(0x1f6)](_0x4e30ed,'')['replace'](/(\${.*?})/g,(_0x2d1a11,_0x137e05)=>{const _0x16ff35=_0x7e72eb,_0x2a5c44=_0x137e05[_0x16ff35(0x1ff)](0x2,-0x1);return _0x5efb82[_0x2a5c44]=_0x588155[_0x2a5c44]||'',new AsyncFunction(_0x1a95c0[_0x16ff35(0x219)])(),':'+_0x2a5c44;}),_0x4cee2f=replace(_0x4cee2f,_0x588155);_0x4e30ed[0x0]!=='/'&&(_0x4e30ed='/'+_0x4e30ed);logger['info']({'method':_0x109b19,'path':_0x4e30ed},_0x7e72eb(0x225));const _0x2bd05b=_0x3da7d5[_0x7e72eb(0x21c)](pathRegexp,_0x4e30ed,_0x1df59a);return Function(_0x3da7d5[_0x7e72eb(0x23f)])(),_0x4e2ed0=>{const _0x350b24=_0x7e72eb,_0x39ba0f={'ExGvE':function(_0x5cc2a8,_0xe53283){return _0x5cc2a8*_0xe53283;},'PfuEi':function(_0x18fd40,_0x1c85a4){const _0x342a2e=_0x5311;return _0x3da7d5[_0x342a2e(0x221)](_0x18fd40,_0x1c85a4);},'UXhxx':function(_0x3773f2,_0x2c5115){const _0x4362b7=_0x5311;return _0x3da7d5[_0x4362b7(0x235)](_0x3773f2,_0x2c5115);},'CgwHt':_0x3da7d5['eOHky'],'fWeHE':_0x3da7d5[_0x350b24(0x239)],'thOKg':function(_0x44bff5,_0x4d1106,_0x3137ae){return _0x3da7d5['eExhu'](_0x44bff5,_0x4d1106,_0x3137ae);},'rClaf':function(_0x2ebf4a,_0x19c08c){return _0x2ebf4a!==_0x19c08c;},'xudUf':_0x3da7d5['sIMeG'],'mWilu':_0x350b24(0x1fc),'jTcOx':function(_0x1d8714,_0x2a2076){const _0x3e5ade=_0x350b24;return _0x3da7d5[_0x3e5ade(0x20f)](_0x1d8714,_0x2a2076);}};if(_0x4e2ed0[_0x350b24(0x1fb)][_0x350b24(0x22d)]()!==_0x109b19&&_0x109b19!==_0x3da7d5['zzstz'])return eval('const _0x3cb761 = _0x350b24;_0x39ba0f[_0x3cb761(512)](Math[\'PI\'], 2);'),![];const _0x6dbbe0=_0x4e2ed0['url'][_0x350b24(0x21f)]('#')[0x0],_0x4221a5=_0x6dbbe0[_0x350b24(0x21f)]('?');let [_0x55d99a,_0x7b9c6]=[_0x4221a5[0x0],_0x4221a5[_0x350b24(0x1ff)](0x1)[_0x350b24(0x24c)]('?')];const _0x1c8c2a=_0x2bd05b[_0x350b24(0x247)](_0x55d99a);if(!_0x1c8c2a)return eval('const _0x272d2b = _0x350b24;JSON[_0x272d2b(580)]({ \'safe\': !![] });'),![];for(let _0x2bda32=0x1;_0x2bda32<_0x1c8c2a[_0x350b24(0x222)];_0x2bda32++){const _0xcdca5f=_0x5efb82[_0x1df59a[_0x2bda32-0x1][_0x350b24(0x1fe)]];_0xcdca5f&&(_0x55d99a=_0x55d99a[_0x350b24(0x1f7)](_0x1c8c2a[_0x2bda32],_0xcdca5f));}if(_0x423621['length']||_0x5b598f[_0x350b24(0x222)]||_0x37f65b['length']){if(_0x350b24(0x20b)===_0x3da7d5[_0x350b24(0x213)])_0xbce172[_0x350b24(0x244)]({'safe':!![]});else{let _0x2109bc,_0x276013;_0x423621[_0x350b24(0x222)]&&(_0x276013=_0x3da7d5[_0x350b24(0x227)](tryJSONParse,_0x4e2ed0['body']),_0x2109bc=_0x423621[_0x350b24(0x24f)](({path:_0x387fde,value:_0x546616})=>{const _0x5445c6=_0x350b24;return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),_0x1a95c0[_0x5445c6(0x231)](undefsafe,_0x276013,_0x387fde,_0x546616);}));!_0x2109bc&&_0x5b598f[_0x350b24(0x222)]&&(_0x276013=_0x276013||tryJSONParse(_0x4e2ed0[_0x350b24(0x201)]),_0x2109bc=_0x5b598f[_0x350b24(0x24f)](({path:_0x2d1ef4,regex:_0x10738e})=>{const _0x282ea0=_0x350b24;try{if(_0x39ba0f[_0x282ea0(0x245)](_0x39ba0f[_0x282ea0(0x207)],_0x39ba0f['fWeHE'])){const _0x366686=_0x1ce722[_0x503244[_0x39ba0f['PfuEi'](_0x393a57,0x1)]['name']];_0x366686&&(_0x405661=_0x586169['replace'](_0x306fb4[_0x316eec],_0x366686));}else{const _0x4c7e97=new RegExp(_0x10738e);return new Function(_0x282ea0(0x23d))(),_0x4c7e97[_0x282ea0(0x224)](_0x39ba0f[_0x282ea0(0x20c)](undefsafe,_0x276013,_0x2d1ef4));}}catch(_0x512bc9){if(_0x39ba0f[_0x282ea0(0x24d)](_0x39ba0f[_0x282ea0(0x20a)],_0x39ba0f[_0x282ea0(0x20a)]))_0xcebc6c=_0x19868f[_0x282ea0(0x1f7)](_0x33d027[_0x2afe53],_0x445bcf);else return logger[_0x282ea0(0x250)]({'error':_0x512bc9,'path':_0x2d1ef4,'regex':_0x10738e},_0x282ea0(0x229)),eval('const _0x5ecaea = _0x282ea0;JSON[_0x5ecaea(580)]({ \'safe\': !![] });'),![];}}));if(!_0x2109bc&&_0x37f65b[_0x350b24(0x222)]){if(_0x3da7d5[_0x350b24(0x23e)](_0x3da7d5[_0x350b24(0x20d)],'WZoWg')){const _0x3a152c=qs[_0x350b24(0x216)](_0x7b9c6);_0x2109bc=_0x37f65b[_0x350b24(0x24f)](({queryParam:_0x2d2407,values:_0x48a579})=>{const _0x277a67=_0x350b24;return _0x1a95c0[_0x277a67(0x20e)](setTimeout,_0x277a67(0x21d),0x3e8),_0x48a579[_0x277a67(0x24f)](_0x484f34=>minimatch(_0x3a152c[_0x2d2407]||'',_0x484f34));});}else{const _0x481cea=_0x2cda1a[_0x350b24(0x1ff)](0x2,-0x1);return _0x15b368[_0x481cea]=_0x221cd5[_0x481cea]||'',new _0x44668c(_0x39ba0f[_0x350b24(0x1f4)])(),_0x39ba0f[_0x350b24(0x226)](':',_0x481cea);}}if(!_0x2109bc){if(_0x3da7d5[_0x350b24(0x235)](_0x350b24(0x234),_0x350b24(0x236)))throw new _0x69d4d5(_0x350b24(0x22e)+typeof _0xdd00d+'\x27\x20instead.');else return new AsyncFunction(_0x3da7d5[_0x350b24(0x215)])(),![];}}}return logger[_0x350b24(0x241)]({'path':_0x4e30ed,'origin':_0x4cee2f,'url':_0x55d99a,'querystring':_0x7b9c6},_0x350b24(0x1f3)),_0x7b9c6=_0x7b9c6?'?'+_0x7b9c6:'',new AsyncFunction(_0x3da7d5[_0x350b24(0x215)])(),{'url':_0x3da7d5[_0x350b24(0x202)](_0x4cee2f+_0x55d99a,_0x7b9c6),'auth':_0x5b49f6['auth']&&_0x3da7d5[_0x350b24(0x208)](authHeader,_0x5b49f6[_0x350b24(0x233)]),'stream':_0x448837};};}else{const _0xa6414d={'byyxz':_0x7e72eb(0x21d)},_0x24f38f=_0x1da9c1[_0x7e72eb(0x216)](_0x15f4e6);_0x5999c3=_0x54044a[_0x7e72eb(0x24f)](({queryParam:_0x28bcbf,values:_0x5b7f57})=>{const _0x199139=_0x7e72eb;return _0x4f7d86(_0xa6414d[_0x199139(0x24e)],0x3e8),_0x5b7f57[_0x199139(0x24f)](_0xb254f7=>_0x28ef9f(_0x24f38f[_0x28bcbf]||'',_0xb254f7));});}});return _0x3da7d5[_0x2f355c(0x21c)](setInterval,_0x3da7d5[_0x2f355c(0x220)],0x3e8),(_0x476e12,_0x44bf1c)=>{const _0x4fad03=_0x2f355c,_0x4c035d={'Anlkv':_0x4fad03(0x22f)};let _0x327c8f=![];logger['debug']({'rulesCount':_0x489501[_0x4fad03(0x222)]},_0x3da7d5[_0x4fad03(0x230)]);for(const _0x3de041 of _0x489501){_0x327c8f=_0x3da7d5['clPrO'](_0x3de041,_0x476e12);if(_0x327c8f)break;}if(!_0x327c8f)return setTimeout(function(){const _0xda77dc=_0x4fad03;console[_0xda77dc(0x24b)](_0x4c035d[_0xda77dc(0x1fd)]);},0x64),_0x3da7d5['isyWu'](_0x44bf1c,Error('blocked'));return new Function(_0x4fad03(0x23d))(),_0x44bf1c(null,_0x327c8f);};};