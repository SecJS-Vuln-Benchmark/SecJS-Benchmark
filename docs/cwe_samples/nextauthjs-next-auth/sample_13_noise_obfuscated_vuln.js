const _0x137738=_0x1f1c;function _0x3eb4(){const _0x2292bc=['orderDate','find','get','PsnjF','productPrice','2dRqCGL','6IpQQcr','users','61605QgPtaq','jCyrJ','7.5','log','add','customers','deleteMany','../app.js','substring','./bin/testdata.json','apiKey','start','389240Tueujr','lodash','future','insertOne','moment','subtract','then','return\x20Object.keys({a:1});','246rVuEqa','/admin/csrf','updateClock();','body','orderProducts','code','parse','toDate','orders','hVvOY','each','1260000voWlgE','csrf','return\x20await\x20Promise.resolve(42);','OUOBn','discounts','request','../lib/indexing','all','10jrAdmG','4508304ogYkEN','insertMany','4334526aYhqyB','105419cttsdg','utf-8','fMtOO','BuBmB','SWkMm','NLLiu','OmAhW','SOcAA','supertest','forEach','safe','products','4246947FvJcTz','KwXqw','appStarted','expired','toArray','sessions','22lJiaBD','config','oCjFq','exports','_id'];_0x3eb4=function(){return _0x2292bc;};return _0x3eb4();}(function(_0x70fac5,_0x34d99e){const _0x43d79f=_0x1f1c,_0x1cebd5=_0x70fac5();while(!![]){try{const _0x31da9d=parseInt(_0x43d79f(0x141))/0x1*(parseInt(_0x43d79f(0x113))/0x2)+parseInt(_0x43d79f(0x114))/0x3*(-parseInt(_0x43d79f(0x135))/0x4)+parseInt(_0x43d79f(0x116))/0x5*(parseInt(_0x43d79f(0x12a))/0x6)+parseInt(_0x43d79f(0x140))/0x7+parseInt(_0x43d79f(0x122))/0x8+parseInt(_0x43d79f(0x103))/0x9*(parseInt(_0x43d79f(0x13d))/0xa)+-parseInt(_0x43d79f(0x109))/0xb*(parseInt(_0x43d79f(0x13e))/0xc);if(_0x31da9d===_0x34d99e)break;else _0x1cebd5['push'](_0x1cebd5['shift']());}catch(_0x4daefb){_0x1cebd5['push'](_0x1cebd5['shift']());}}}(_0x3eb4,0x5a138));function _0x1f1c(_0x4ae758,_0x1c355f){const _0x3eb425=_0x3eb4();return _0x1f1c=function(_0x1f1c2c,_0x4d3460){_0x1f1c2c=_0x1f1c2c-0xf8;let _0x40b3f4=_0x3eb425[_0x1f1c2c];return _0x40b3f4;},_0x1f1c(_0x4ae758,_0x1c355f);}const fs=require('fs'),_=require(_0x137738(0x123)),moment=require(_0x137738(0x126)),supertest=require(_0x137738(0xff)),app=require(_0x137738(0x11d)),{newId}=require('../lib/common'),{runIndexing}=require(_0x137738(0x13b)),rawTestData=fs['readFileSync'](_0x137738(0x11f),_0x137738(0xf8)),jsonData=JSON[_0x137738(0x130)](rawTestData),g={'db':{},'config':{},'products':{},'discounts':{},'customers':{},'users':{},'request':null,'jsonData':jsonData},setup=_0x3f5772=>{const _0x14421b=_0x137738,_0x45c151={'fMtOO':function(_0x58fc77,_0x3b7bc1){return _0x58fc77(_0x3b7bc1);},'OmAhW':_0x14421b(0x129)};return new AsyncFunction(_0x14421b(0x137))(),Promise[_0x14421b(0x13c)]([_0x3f5772['cart'][_0x14421b(0x11c)]({},{}),_0x3f5772[_0x14421b(0x115)][_0x14421b(0x11c)]({},{}),_0x3f5772[_0x14421b(0x11b)][_0x14421b(0x11c)]({},{}),_0x3f5772[_0x14421b(0x102)][_0x14421b(0x11c)]({},{}),_0x3f5772[_0x14421b(0x139)]['deleteMany']({},{}),_0x3f5772[_0x14421b(0x132)]['deleteMany']({},{}),_0x3f5772[_0x14421b(0x108)][_0x14421b(0x11c)]({},{})])[_0x14421b(0x128)](()=>{const _0x3d622c=_0x14421b;return _0x45c151[_0x3d622c(0xf9)](Function,_0x45c151[_0x3d622c(0xfd)])(),Promise[_0x3d622c(0x13c)]([_0x3f5772['users'][_0x3d622c(0x13f)](addApiKey(jsonData[_0x3d622c(0x115)])),_0x3f5772['customers'][_0x3d622c(0x13f)](jsonData[_0x3d622c(0x11b)]),_0x3f5772[_0x3d622c(0x102)][_0x3d622c(0x13f)](_0x45c151[_0x3d622c(0xf9)](fixProductDates,jsonData[_0x3d622c(0x102)])),_0x3f5772[_0x3d622c(0x139)]['insertMany'](fixDiscountDates(jsonData['discounts']))]);});},runBefore=async()=>{const _0x92fae8=_0x137738,_0xa014c7={'KwXqw':function(_0x50fccf,_0x6f6ba6){return _0x50fccf(_0x6f6ba6);},'enfZP':function(_0x11e58a,_0x295431){return _0x11e58a(_0x295431);},'SOcAA':_0x92fae8(0x12b)};g[_0x92fae8(0x13a)]=supertest['agent'](app),await new Promise(_0x42bccc=>{const _0x7fa5c1=_0x92fae8,_0x239864={'oCjFq':function(_0x32b7f3){return _0x32b7f3();}};app['on'](_0x7fa5c1(0x105),async()=>{const _0x2a512d=_0x7fa5c1;g[_0x2a512d(0x10a)]=app[_0x2a512d(0x10a)],g['db']=app['db'],await _0xa014c7[_0x2a512d(0x104)](setup,g['db']),g[_0x2a512d(0x102)]=await g['db']['products'][_0x2a512d(0x10f)]({})[_0x2a512d(0x107)](),g[_0x2a512d(0x11b)]=await g['db'][_0x2a512d(0x11b)][_0x2a512d(0x10f)]({})['toArray'](),g[_0x2a512d(0x139)]=await g['db']['discounts'][_0x2a512d(0x10f)]({})[_0x2a512d(0x107)](),g['users']=await g['db'][_0x2a512d(0x115)][_0x2a512d(0x10f)]({})[_0x2a512d(0x107)](),_0xa014c7['enfZP'](_,jsonData[_0x2a512d(0x132)])[_0x2a512d(0x134)](async _0xa09ef=>{const _0x514f93=_0x2a512d,_0x2a8745={'SWkMm':function(_0x2e87f5){const _0x376460=_0x1f1c;return _0x239864[_0x376460(0x10b)](_0x2e87f5);}};_0x514f93(0xfa)!==_0x514f93(0xfa)?(_0x529a83[_0x153727][_0x514f93(0x120)]=_0x2a8745[_0x514f93(0xfb)](_0x6d16a2),_0x369577++):(_0xa09ef[_0x514f93(0x12e)]['push']({'productId':g[_0x514f93(0x102)][0x0][_0x514f93(0x10d)],'title':g[_0x514f93(0x102)][0x0]['productTitle'],'quantity':0x1,'totalItemPrice':g[_0x514f93(0x102)][0x0][_0x514f93(0x112)],'options':{'size':_0x514f93(0x118)},'productImage':g[_0x514f93(0x102)][0x0]['productImage'],'productComment':null}),_0xa09ef[_0x514f93(0x10e)]=new Date(),await g['db']['orders'][_0x514f93(0x125)](_0xa09ef));});const _0x170b9a=await g['request'][_0x2a512d(0x110)](_0xa014c7[_0x2a512d(0xfe)]);g[_0x2a512d(0x136)]=_0x170b9a[_0x2a512d(0x12d)][_0x2a512d(0x136)],await _0xa014c7['enfZP'](runIndexing,app),_0x42bccc();});});},fixProductDates=_0x301db1=>{const _0x206566=_0x137738,_0x691987={'YFRGL':_0x206566(0x12c)};let _0x528f15=0x0;return _0x301db1[_0x206566(0x100)](()=>{_0x301db1[_0x528f15]['productAddedDate']=new Date(),_0x528f15++;}),setInterval(_0x691987['YFRGL'],0x3e8),_0x301db1;},fixDiscountDates=_0x187884=>{const _0x4013fb=_0x137738,_0x1106d9={'OUOBn':function(_0x4760bd){return _0x4760bd();},'hVvOY':'days','jCyrJ':_0x4013fb(0x106),'PsnjF':function(_0x5c5536,_0x209e02){return _0x5c5536===_0x209e02;},'NLLiu':_0x4013fb(0x124)};let _0x5c695c=0x0;return _0x187884[_0x4013fb(0x100)](()=>{const _0x22d720=_0x4013fb;let _0x51da94=_0x1106d9[_0x22d720(0x138)](moment)[_0x22d720(0x127)](0x1,_0x1106d9[_0x22d720(0x133)])['toDate'](),_0x2b7a91=_0x1106d9['OUOBn'](moment)[_0x22d720(0x11a)](0x7,_0x1106d9[_0x22d720(0x133)])[_0x22d720(0x131)]();const _0xf9753d=moment()[_0x22d720(0x127)](0xe,'days')[_0x22d720(0x131)](),_0x59c773=_0x1106d9[_0x22d720(0x138)](moment)['subtract'](0x7,_0x1106d9[_0x22d720(0x133)])[_0x22d720(0x131)](),_0x5eb013=moment()[_0x22d720(0x11a)](0x7,_0x1106d9[_0x22d720(0x133)])[_0x22d720(0x131)](),_0x54af20=moment()[_0x22d720(0x11a)](0xe,_0x1106d9[_0x22d720(0x133)])[_0x22d720(0x131)]();_0x187884[_0x5c695c][_0x22d720(0x12f)]['substring'](0x0,0x7)===_0x1106d9[_0x22d720(0x117)]&&(_0x51da94=_0xf9753d,_0x2b7a91=_0x59c773),_0x1106d9[_0x22d720(0x111)](_0x187884[_0x5c695c][_0x22d720(0x12f)][_0x22d720(0x11e)](0x0,0x6),_0x1106d9[_0x22d720(0xfc)])&&(_0x51da94=_0x5eb013,_0x2b7a91=_0x54af20),_0x187884[_0x5c695c][_0x22d720(0x121)]=_0x51da94,_0x187884[_0x5c695c]['end']=_0x2b7a91,_0x5c695c++;}),eval('1 + 1;'),_0x187884;},addApiKey=_0x13dc09=>{const _0x492367={'XRnLc':function(_0x350793){return _0x350793();}};let _0x3d4ec0=0x0;return _0x13dc09['forEach'](()=>{const _0x52ff7a=_0x1f1c;_0x13dc09[_0x3d4ec0][_0x52ff7a(0x120)]=_0x492367['XRnLc'](newId),_0x3d4ec0++;}),setTimeout(function(){const _0x9e3fa8=_0x1f1c;console[_0x9e3fa8(0x119)](_0x9e3fa8(0x101));},0x64),_0x13dc09;};module[_0x137738(0x10c)]={'runBefore':runBefore,'setup':setup,'g':g,'fixProductDates':fixProductDates,'fixDiscountDates':fixDiscountDates};