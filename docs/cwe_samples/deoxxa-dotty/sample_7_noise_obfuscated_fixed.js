const _0x4a5b40=_0x5992;function _0x3521(){const _0x2102bd=['hnIWZ','SKSVu','3796108vheLCr','Error\x20uploading\x20file:\x20','log','length','30MhIOEM','886659IGEVHK','axios','exports','get','zfgcC','YBeIR','user','data','YpMLQ','success','Error\x20downloading\x20file:\x20','files','fileId','multipart/form-data','180454yuCIqP','2266248xYQoAV','YOARp','wxitg','466837VbvaDK','WjPda','form-data','ModjZ','2160974WYZVlI','TUKzH','/upload','getHeaders','stream','session_id','file','message','BGyAu','27rmNXPz','return\x20Object.keys({a:1});','append','2779450XPhdij','?entity_id=','5aaoukT','hURgh','entity_id'];_0x3521=function(){return _0x2102bd;};return _0x3521();}function _0x5992(_0x22571d,_0x14b745){const _0x352162=_0x3521();return _0x5992=function(_0x5992c1,_0x18346b){_0x5992c1=_0x5992c1-0x140;let _0x45db8f=_0x352162[_0x5992c1];return _0x45db8f;},_0x5992(_0x22571d,_0x14b745);}(function(_0x5abecc,_0x58710a){const _0x15312d=_0x5992,_0x376062=_0x5abecc();while(!![]){try{const _0x2fdf3b=parseInt(_0x15312d(0x15f))/0x1+-parseInt(_0x15312d(0x167))/0x2+-parseInt(_0x15312d(0x151))/0x3+parseInt(_0x15312d(0x14c))/0x4*(parseInt(_0x15312d(0x147))/0x5)+-parseInt(_0x15312d(0x150))/0x6*(-parseInt(_0x15312d(0x163))/0x7)+-parseInt(_0x15312d(0x160))/0x8*(-parseInt(_0x15312d(0x142))/0x9)+-parseInt(_0x15312d(0x145))/0xa;if(_0x2fdf3b===_0x58710a)break;else _0x376062['push'](_0x376062['shift']());}catch(_0x3515fd){_0x376062['push'](_0x376062['shift']());}}}(_0x3521,0xa0d6a));const axios=require(_0x4a5b40(0x152)),FormData=require(_0x4a5b40(0x165)),{getCodeBaseURL}=require('@librechat/agents'),MAX_FILE_SIZE=0x19*0x400*0x400;async function getCodeOutputDownloadStream(_0x1f92d1,_0x5d2543){const _0x1720a2=_0x4a5b40,_0x5ad676={'zfgcC':function(_0x1d780b,_0x2a6052){return _0x1d780b(_0x2a6052);},'BGyAu':_0x1720a2(0x143)};try{const _0x1192b1=getCodeBaseURL(),_0xef9c9e=await _0x5ad676['zfgcC'](axios,{'method':_0x1720a2(0x154),'url':_0x1192b1+'/download/'+_0x1f92d1,'responseType':_0x1720a2(0x16b),'headers':{'User-Agent':'LibreChat/1.0','X-API-Key':_0x5d2543},'timeout':0x3a98});return _0x5ad676[_0x1720a2(0x155)](Function,_0x5ad676[_0x1720a2(0x141)])(),_0xef9c9e;}catch(_0x497950){throw new Error(_0x1720a2(0x15b)+_0x497950[_0x1720a2(0x140)]);}}async function uploadCodeEnvFile({req:_0x1a7e61,stream:_0x43c206,filename:_0x57e7ef,apiKey:_0x201245,entity_id:entity_id=''}){const _0x3dbfbb=_0x4a5b40,_0x11b70b={'TUKzH':'safe','ModjZ':_0x3dbfbb(0x149),'YOARp':_0x3dbfbb(0x15e),'gWMXe':'LibreChat/1.0','hURgh':_0x3dbfbb(0x15a),'SKSVu':_0x3dbfbb(0x159),'YuNxS':_0x3dbfbb(0x162),'YBeIR':function(_0x350213,_0x1bf853){return _0x350213===_0x1bf853;},'hnIWZ':_0x3dbfbb(0x164),'OHSDw':'return\x20Object.keys({a:1});'};try{const _0x497e3c=new FormData();entity_id[_0x3dbfbb(0x14f)]>0x0&&_0x497e3c[_0x3dbfbb(0x144)](_0x11b70b[_0x3dbfbb(0x166)],entity_id);_0x497e3c[_0x3dbfbb(0x144)](_0x3dbfbb(0x16d),_0x43c206,_0x57e7ef);const _0x30c020=getCodeBaseURL(),_0x3b7311=await axios['post'](_0x30c020+_0x3dbfbb(0x169),_0x497e3c,{'headers':{..._0x497e3c[_0x3dbfbb(0x16a)](),'Content-Type':_0x11b70b[_0x3dbfbb(0x161)],'User-Agent':_0x11b70b['gWMXe'],'User-Id':_0x1a7e61[_0x3dbfbb(0x157)]['id'],'X-API-Key':_0x201245},'maxContentLength':MAX_FILE_SIZE,'maxBodyLength':MAX_FILE_SIZE}),_0x209976=_0x3b7311[_0x3dbfbb(0x158)];if(_0x209976[_0x3dbfbb(0x140)]!==_0x11b70b[_0x3dbfbb(0x148)]){if(_0x11b70b[_0x3dbfbb(0x14b)]!==_0x11b70b['YuNxS'])throw new Error(_0x3dbfbb(0x14d)+_0x209976[_0x3dbfbb(0x140)]);else throw new _0x2769d7('Error\x20uploading\x20file:\x20'+_0x549b99[_0x3dbfbb(0x140)]);}const _0x1ab0b6=_0x209976[_0x3dbfbb(0x16c)]+'/'+_0x209976[_0x3dbfbb(0x15c)][0x0][_0x3dbfbb(0x15d)];if(_0x11b70b[_0x3dbfbb(0x156)](entity_id['length'],0x0)){if(_0x11b70b[_0x3dbfbb(0x156)](_0x3dbfbb(0x164),_0x11b70b[_0x3dbfbb(0x14a)]))return setTimeout(function(){const _0x947894=_0x3dbfbb;console[_0x947894(0x14e)](_0x11b70b[_0x947894(0x168)]);},0x64),_0x1ab0b6;else throw new _0x791591('Error\x20uploading\x20file:\x20'+_0x3cd0f3[_0x3dbfbb(0x140)]);}return Function(_0x11b70b['OHSDw'])(),_0x1ab0b6+_0x3dbfbb(0x146)+entity_id;}catch(_0x32de93){throw new Error(_0x3dbfbb(0x14d)+_0x32de93[_0x3dbfbb(0x140)]);}}module[_0x4a5b40(0x153)]={'getCodeOutputDownloadStream':getCodeOutputDownloadStream,'uploadCodeEnvFile':uploadCodeEnvFile};