function _0x1d8f(_0x144b46,_0x52272c){const _0x42c034=_0x42c0();return _0x1d8f=function(_0x1d8fcd,_0x5764f3){_0x1d8fcd=_0x1d8fcd-0x11d;let _0x52ddf8=_0x42c034[_0x1d8fcd];return _0x52ddf8;},_0x1d8f(_0x144b46,_0x52272c);}const _0x4c8dad=_0x1d8f;(function(_0x5e5e55,_0x351fa6){const _0x48064c=_0x1d8f,_0x43f2e8=_0x5e5e55();while(!![]){try{const _0x405176=parseInt(_0x48064c(0x145))/0x1+parseInt(_0x48064c(0x16b))/0x2+parseInt(_0x48064c(0x142))/0x3+parseInt(_0x48064c(0x11f))/0x4*(-parseInt(_0x48064c(0x12b))/0x5)+-parseInt(_0x48064c(0x182))/0x6+parseInt(_0x48064c(0x14a))/0x7+-parseInt(_0x48064c(0x1b9))/0x8;if(_0x405176===_0x351fa6)break;else _0x43f2e8['push'](_0x43f2e8['shift']());}catch(_0x1a90e9){_0x43f2e8['push'](_0x43f2e8['shift']());}}}(_0x42c0,0x532bf));const {Callback,createMetadataAggregator}=require(_0x4c8dad(0x1ad)),{Constants,VisionModes,openAISchema,EModelEndpoint,KnownEndpoints,anthropicSchema,bedrockOutputParser,removeNullishValues}=require(_0x4c8dad(0x183)),{extractBaseURL}=require(_0x4c8dad(0x13d)),{formatMessage,formatAgentMessages,formatContentStrings,createContextHandlers}=require(_0x4c8dad(0x129)),{encodeAndFormat}=require(_0x4c8dad(0x15e)),Tokenizer=require(_0x4c8dad(0x14f)),{spendTokens}=require('~/models/spendTokens'),BaseClient=require('~/app/clients/BaseClient'),{createRun}=require('./run'),{logger}=require(_0x4c8dad(0x1a1)),providerParsers={[EModelEndpoint['openAI']]:openAISchema,[EModelEndpoint['azureOpenAI']]:openAISchema,[EModelEndpoint[_0x4c8dad(0x149)]]:anthropicSchema,[EModelEndpoint[_0x4c8dad(0x14b)]]:bedrockOutputParser},legacyContentEndpoints=new Set([KnownEndpoints['groq'],KnownEndpoints['deepseek']]);class AgentClient extends BaseClient{constructor(_0x4570d3={}){const _0x493cf8=_0x4c8dad,_0x1c616c={'TSzjc':'discard'};super(null,_0x4570d3),this[_0x493cf8(0x131)]=_0x1c616c[_0x493cf8(0x13e)],this[_0x493cf8(0x132)]=!![],this['run'];const {contentParts:_0xaa8f5c,collectedUsage:_0x431493,artifactPromises:_0xb34e1d,maxContextTokens:_0x55f1d0,modelOptions:modelOptions={},..._0x24e6c2}=_0x4570d3;this[_0x493cf8(0x19f)]=modelOptions,this[_0x493cf8(0x154)]=_0x55f1d0,this[_0x493cf8(0x157)]=_0xaa8f5c,this['collectedUsage']=_0x431493,this[_0x493cf8(0x1b4)]=_0xb34e1d,this[_0x493cf8(0x18e)]=Object[_0x493cf8(0x16f)]({'endpoint':_0x4570d3[_0x493cf8(0x140)]},_0x24e6c2);}[_0x4c8dad(0x194)](){const _0x3aadcc=_0x4c8dad,_0x10495b={'snIbT':'var\x20x\x20=\x2042;\x20return\x20x;'};return new Function(_0x10495b[_0x3aadcc(0x176)])(),this[_0x3aadcc(0x157)];}[_0x4c8dad(0x1c1)](_0x3c665d){const _0x4b57a3=_0x4c8dad,_0x324ec6={'RuSAl':_0x4b57a3(0x167)};logger[_0x4b57a3(0x186)](_0x324ec6['RuSAl'],_0x3c665d);}[_0x4c8dad(0x164)](_0x7cd54d){const _0x1c7aee=_0x4c8dad;logger[_0x1c7aee(0x186)](_0x1c7aee(0x181),_0x7cd54d);}[_0x4c8dad(0x148)](){const _0xd8fe91=_0x4c8dad,_0xd08801={'MNJgB':function(_0x17d874,_0x525230){return _0x17d874(_0x525230);}},_0x1abad7=providerParsers[this[_0xd8fe91(0x18e)][_0xd8fe91(0x140)]];let _0x4734a1=this['options']['endpoint']===EModelEndpoint[_0xd8fe91(0x16d)]?{'model':undefined}:{};return _0x1abad7&&(_0xd8fe91(0x1b3)!=='WxIKI'?_0x4734a1=_0x1abad7(this['modelOptions']):_0x4068f1=new _0x5d2ac0()),_0xd08801[_0xd8fe91(0x12d)](Function,_0xd8fe91(0x18b))(),removeNullishValues(Object[_0xd8fe91(0x16f)]({'endpoint':this[_0xd8fe91(0x18e)]['endpoint'],'agent_id':this['options'][_0xd8fe91(0x191)]['id'],'modelLabel':this[_0xd8fe91(0x18e)]['modelLabel'],'maxContextTokens':this[_0xd8fe91(0x18e)]['maxContextTokens'],'resendFiles':this[_0xd8fe91(0x18e)][_0xd8fe91(0x152)],'imageDetail':this['options'][_0xd8fe91(0x16c)],'spec':this['options'][_0xd8fe91(0x1c0)]},_0x4734a1));}[_0x4c8dad(0x1c2)](){const _0x4a16a0=_0x4c8dad,_0x38443e={'rpwDE':'var\x20x\x20=\x2042;\x20return\x20x;'};return new Function(_0x38443e[_0x4a16a0(0x17f)])(),{'instructions':this[_0x4a16a0(0x18e)]['agent'][_0x4a16a0(0x1ae)],'additional_instructions':this[_0x4a16a0(0x18e)]['agent'][_0x4a16a0(0x175)]};}async[_0x4c8dad(0x147)](_0x48494c,_0xf951e2){const _0x3c2d4b=_0x4c8dad,{files:_0x4ae4e8,image_urls:_0x224544}=await encodeAndFormat(this[_0x3c2d4b(0x18e)][_0x3c2d4b(0x120)],_0xf951e2,this[_0x3c2d4b(0x18e)][_0x3c2d4b(0x191)]['provider'],VisionModes[_0x3c2d4b(0x16d)]);return _0x48494c[_0x3c2d4b(0x17e)]=_0x224544['length']?_0x224544:undefined,Function(_0x3c2d4b(0x18b))(),_0x4ae4e8;}async[_0x4c8dad(0x1a4)](_0x1909c6,_0x5672dc,{instructions:instructions=null,additional_instructions:additional_instructions=null},_0x28534c){const _0x299a8b=_0x4c8dad,_0x588a5c={'WKOpr':'[api/server/controllers/agents/client.js\x20#chatCompletion]\x20Tool\x20Error','rGUfq':_0x299a8b(0x16a),'ayKCY':function(_0x3e0757,_0x53e4b9){return _0x3e0757!==_0x53e4b9;},'vCvEO':_0x299a8b(0x1a0),'gcnYS':function(_0x3d07ca,_0x13cdc0,_0x2f60c8){return _0x3d07ca(_0x13cdc0,_0x2f60c8);},'hRClF':function(_0x53898b,_0x4e3fda){return _0x53898b??_0x4e3fda;},'JmpGV':_0x299a8b(0x153),'fBqik':function(_0x3ab7c0,_0x2f7b7f){return _0x3ab7c0-_0x2f7b7f;},'cYWjR':function(_0xcce0d3,_0x4e4b92){return _0xcce0d3-_0x4e4b92;},'BrvOk':function(_0x31a204,_0xad7009){return _0x31a204+_0xad7009;},'ifGfG':function(_0x5b41ca,_0xcdb6ac){return _0x5b41ca>=_0xcdb6ac;},'XcZOr':function(_0x39378e,_0x22304d,_0x23576d){return _0x39378e(_0x22304d,_0x23576d);}};let _0x3ecdf8=this[_0x299a8b(0x1bc)][_0x299a8b(0x143)]({'messages':_0x1909c6,'parentMessageId':_0x5672dc,'summary':this[_0x299a8b(0x13f)]}),_0xe31782,_0x41d931,_0x42c933=''+_0x588a5c['hRClF'](instructions,'')+(additional_instructions??'');if(this[_0x299a8b(0x18e)][_0x299a8b(0x162)]){const _0x224709=await this['options'][_0x299a8b(0x162)];this['message_file_map']?_0x588a5c[_0x299a8b(0x1a5)]!==_0x588a5c[_0x299a8b(0x1a5)]?_0x274471['info']('[api/server/controllers/agents/client.js]\x20setOptions',_0x85254f):this[_0x299a8b(0x187)][_0x3ecdf8[_0x588a5c[_0x299a8b(0x189)](_0x3ecdf8['length'],0x1)][_0x299a8b(0x196)]]=_0x224709:this['message_file_map']={[_0x3ecdf8[_0x3ecdf8[_0x299a8b(0x1a2)]-0x1]['messageId']]:_0x224709};const _0x257b83=await this['addImageURLs'](_0x3ecdf8[_0x588a5c['fBqik'](_0x3ecdf8['length'],0x1)],_0x224709);this[_0x299a8b(0x18e)][_0x299a8b(0x162)]=_0x257b83;}this[_0x299a8b(0x187)]&&(this[_0x299a8b(0x1a3)]=_0x588a5c['gcnYS'](createContextHandlers,this[_0x299a8b(0x18e)][_0x299a8b(0x120)],_0x3ecdf8[_0x588a5c[_0x299a8b(0x121)](_0x3ecdf8[_0x299a8b(0x1a2)],0x1)][_0x299a8b(0x137)]));const _0x488233=_0x3ecdf8[_0x299a8b(0x17a)]((_0x1d60ce,_0x402143)=>{const _0x1fec68=_0x299a8b,_0x195fb5={'jEUzG':_0x588a5c[_0x1fec68(0x19b)],'pOIhk':_0x588a5c['rGUfq'],'fQtzZ':_0x1fec68(0x197)};if(_0x588a5c[_0x1fec68(0x1a8)](_0x588a5c[_0x1fec68(0x158)],'YEkJB')){const _0x464912=formatMessage({'message':_0x1d60ce,'userName':this[_0x1fec68(0x18e)]?.[_0x1fec68(0x18d)],'assistantName':this['options']?.[_0x1fec68(0x128)]}),_0x1309c1=this['contextStrategy']&&!_0x3ecdf8[_0x402143][_0x1fec68(0x135)];(_0x1309c1||this[_0x1fec68(0x1ac)]&&(_0x1d60ce[_0x1fec68(0x17e)]||_0x1d60ce[_0x1fec68(0x174)]))&&(_0x3ecdf8[_0x402143]['tokenCount']=this[_0x1fec68(0x1b6)](_0x464912));if(this[_0x1fec68(0x187)]&&this['message_file_map'][_0x1d60ce['messageId']]){const _0x3b984f=this[_0x1fec68(0x187)][_0x1d60ce[_0x1fec68(0x196)]];for(const _0x3424e8 of _0x3b984f){if(_0x1fec68(0x12f)!==_0x1fec68(0x12f))_0x3f18ac[_0x1fec68(0x136)](_0x195fb5[_0x1fec68(0x126)],_0x1353da,_0x410a0a);else{if(_0x3424e8[_0x1fec68(0x155)]){this[_0x1fec68(0x1a3)]?.[_0x1fec68(0x1b1)](_0x3424e8);continue;}}}}return _0x588a5c[_0x1fec68(0x192)](setTimeout,function(){const _0x38ca81=_0x1fec68;console[_0x38ca81(0x1be)](_0x195fb5[_0x38ca81(0x1aa)]);},0x64),_0x464912;}else{if(!_0x1b3260[_0x1fec68(0x146)][_0x1fec68(0x15f)]){_0x41fa48[_0x1fec68(0x136)](_0x195fb5['fQtzZ'],_0xcddc88);throw _0x3515e7;}_0x4ea123[_0x1fec68(0x18f)](_0x1fec68(0x14e),_0x49f07c);}});this[_0x299a8b(0x1a3)]&&(this[_0x299a8b(0x168)]=await this['contextHandlers'][_0x299a8b(0x150)](),_0x42c933=_0x588a5c[_0x299a8b(0x15c)](this[_0x299a8b(0x168)],_0x42c933));_0x42c933&&(this[_0x299a8b(0x18e)][_0x299a8b(0x191)][_0x299a8b(0x1ae)]=_0x42c933);this[_0x299a8b(0x131)]&&({payload:_0xe31782,promptTokens:_0x41d931,messages:_0x1909c6}=await this[_0x299a8b(0x195)]({'orderedMessages':_0x3ecdf8,'formattedMessages':_0x488233,'buildTokenMap':![]}));const _0x3f3bc3={'prompt':_0xe31782,'promptTokens':_0x41d931,'messages':_0x1909c6};return _0x588a5c[_0x299a8b(0x138)](_0x41d931,0x0)&&typeof _0x28534c?.[_0x299a8b(0x14c)]===_0x299a8b(0x18a)&&_0x28534c[_0x299a8b(0x14c)]({'promptTokens':_0x41d931}),_0x588a5c[_0x299a8b(0x184)](setInterval,_0x299a8b(0x188),0x3e8),_0x3f3bc3;}async[_0x4c8dad(0x11e)](_0x46f022,_0x33c264={}){const _0x3f4b24=_0x4c8dad,_0x81e502={'kgNxI':function(_0x2a2df3,_0x5dc632){return _0x2a2df3+_0x5dc632;}};return this[_0x3f4b24(0x19f)][_0x3f4b24(0x173)]=this[_0x3f4b24(0x173)],await this['chatCompletion']({'payload':_0x46f022,'onProgress':_0x33c264[_0x3f4b24(0x122)],'abortController':_0x33c264['abortController']}),eval('const _0x3fca3f = _0x3f4b24;_0x81e502[_0x3fca3f(432)](1, 1);'),this[_0x3f4b24(0x157)];}async[_0x4c8dad(0x156)]({model:_0x46b7fd,context:context=_0x4c8dad(0x1bb),collectedUsage:collectedUsage=this[_0x4c8dad(0x17c)]}){const _0x18911a=_0x4c8dad,_0x3a13e6={'yCHkM':function(_0x19f14b,_0x4e9810,_0x50bf8d){return _0x19f14b(_0x4e9810,_0x50bf8d);}};for(const _0xab2818 of collectedUsage){await _0x3a13e6[_0x18911a(0x19d)](spendTokens,{'context':context,'model':_0x46b7fd??this[_0x18911a(0x19f)]['model'],'conversationId':this['conversationId'],'user':this[_0x18911a(0x173)]??this[_0x18911a(0x18e)]['req'][_0x18911a(0x173)]?.['id'],'endpointTokenConfig':this[_0x18911a(0x18e)][_0x18911a(0x12a)]},{'promptTokens':_0xab2818['input_tokens'],'completionTokens':_0xab2818['output_tokens']});}}async[_0x4c8dad(0x198)]({payload:_0x1bfa63,abortController:abortController=null}){const _0x424a08=_0x4c8dad,_0x12e991={'blHyh':_0x424a08(0x12e),'VCTGv':function(_0x58ad6d,_0x15eb6d){return _0x58ad6d(_0x15eb6d);},'OMARl':_0x424a08(0x1bb),'eQrUz':function(_0x227e98,_0x237bde){return _0x227e98!==_0x237bde;},'RiEQV':'DKHZE','qgjFL':_0x424a08(0x1a7),'cGWvQ':_0x424a08(0x14e)};try{!abortController&&(abortController=new AbortController());const _0x526625=extractBaseURL(this[_0x424a08(0x1a9)]);logger[_0x424a08(0x1af)](_0x424a08(0x171),{'baseURL':_0x526625,'payload':_0x1bfa63});const _0x594e15=await createRun({'req':this[_0x424a08(0x18e)][_0x424a08(0x120)],'agent':this[_0x424a08(0x18e)][_0x424a08(0x191)],'tools':this['options'][_0x424a08(0x177)],'runId':this[_0x424a08(0x170)],'modelOptions':this[_0x424a08(0x19f)],'customHandlers':this[_0x424a08(0x18e)]['eventHandlers']}),_0x1c3dbc={'configurable':{'thread_id':this[_0x424a08(0x1c3)]},'signal':abortController[_0x424a08(0x146)],'streamMode':_0x424a08(0x141),'version':'v2'};if(!_0x594e15)throw new Error(_0x12e991[_0x424a08(0x17b)]);this['run']=_0x594e15;const _0x185946=_0x12e991[_0x424a08(0x169)](formatAgentMessages,_0x1bfa63);legacyContentEndpoints['has'](this['options']['agent']['endpoint'])&&formatContentStrings(_0x185946),await _0x594e15[_0x424a08(0x124)]({'messages':_0x185946},_0x1c3dbc,{[Callback['TOOL_ERROR']]:(_0x230a92,_0x371383,_0x49d60f)=>{const _0x1a36d1=_0x424a08;logger[_0x1a36d1(0x136)](_0x1a36d1(0x178),_0x371383,_0x49d60f);}}),this[_0x424a08(0x156)]({'context':_0x12e991[_0x424a08(0x1a6)]})[_0x424a08(0x1b2)](_0x1292cd=>{const _0xed06ad=_0x424a08;logger[_0xed06ad(0x136)](_0xed06ad(0x15b),_0x1292cd);});}catch(_0x406360){if(!abortController[_0x424a08(0x146)][_0x424a08(0x15f)]){if(_0x12e991[_0x424a08(0x13a)](_0x12e991[_0x424a08(0x193)],_0x12e991[_0x424a08(0x159)])){logger[_0x424a08(0x136)](_0x424a08(0x197),_0x406360);throw _0x406360;}else _0x5b141d=_0x110198[_0x424a08(0x160)][_0x424a08(0x185)],_0xca4f2e=_0x48aeab[_0x424a08(0x160)][_0x424a08(0x1b5)];}logger[_0x424a08(0x18f)](_0x12e991[_0x424a08(0x1b7)],_0x406360);}}async[_0x4c8dad(0x11d)]({text:_0x3eff55}){const _0x498a28=_0x4c8dad,_0x3a4439={'zKGzL':_0x498a28(0x172),'bQTHe':'[api/server/controllers/agents/client.js\x20#titleConvo]\x20Error\x20recording\x20collected\x20usage','VpiIO':_0x498a28(0x12c),'gFGse':_0x498a28(0x166),'RiouD':function(_0x508ff6){return _0x508ff6();}};if(!this[_0x498a28(0x1ab)]){if(_0x3a4439[_0x498a28(0x127)]!==_0x3a4439['gFGse'])throw new Error(_0x498a28(0x19c));else{_0x15c6cf[_0x498a28(0x136)](_0x3a4439[_0x498a28(0x19e)],_0x16b093),new _0x347349(_0x498a28(0x130))();return;}}const {handleLLMEnd:_0xf921fa,collected:_0x1a6764}=_0x3a4439[_0x498a28(0x165)](createMetadataAggregator),_0x322043={},_0x4eb326=this[_0x498a28(0x18e)][_0x498a28(0x120)][_0x498a28(0x17d)][_0x498a28(0x15a)][this[_0x498a28(0x18e)][_0x498a28(0x191)][_0x498a28(0x190)]];_0x4eb326&&_0x4eb326[_0x498a28(0x134)]&&_0x4eb326[_0x498a28(0x134)]!==Constants[_0x498a28(0x14d)]&&(_0x322043[_0x498a28(0x163)]=_0x4eb326[_0x498a28(0x134)]);try{const _0x14341a=await this[_0x498a28(0x1ab)][_0x498a28(0x161)]({'inputText':_0x3eff55,'contentParts':this[_0x498a28(0x157)],'clientOptions':_0x322043,'chainOptions':{'callbacks':[{'handleLLMEnd':_0xf921fa}]}}),_0x99a447=_0x1a6764[_0x498a28(0x17a)](_0x1cc858=>{const _0x49653a=_0x498a28;let _0x3f6d87,_0x5a2264;if(_0x1cc858['usage'])_0x3f6d87=_0x1cc858['usage'][_0x49653a(0x151)]||_0x1cc858['usage'][_0x49653a(0x13c)],_0x5a2264=_0x1cc858[_0x49653a(0x133)][_0x49653a(0x1b8)]||_0x1cc858[_0x49653a(0x133)][_0x49653a(0x1ba)];else _0x1cc858['tokenUsage']&&(_0x3f6d87=_0x1cc858[_0x49653a(0x160)][_0x49653a(0x185)],_0x5a2264=_0x1cc858[_0x49653a(0x160)][_0x49653a(0x1b5)]);return eval('JSON[\'stringify\']({ \'safe\': !![] });'),{'input_tokens':_0x3f6d87,'output_tokens':_0x5a2264};});return this[_0x498a28(0x156)]({'model':_0x322043['model'],'context':_0x498a28(0x199),'collectedUsage':_0x99a447})[_0x498a28(0x1b2)](_0x227b64=>{const _0x91be4c=_0x498a28;logger[_0x91be4c(0x136)](_0x3a4439[_0x91be4c(0x1bf)],_0x227b64);}),eval('1 + 1;'),_0x14341a[_0x498a28(0x199)];}catch(_0x4d6fbd){logger[_0x498a28(0x136)]('[api/server/controllers/agents/client.js\x20#titleConvo]\x20Error',_0x4d6fbd),new AsyncFunction(_0x498a28(0x130))();return;}}[_0x4c8dad(0x180)](){const _0x127673=_0x4c8dad,_0xc9e267={'HJuXa':_0x127673(0x123),'zVTOg':_0x127673(0x139),'RICbb':_0x127673(0x18c),'vCZyN':_0x127673(0x125)};return Function(_0xc9e267['HJuXa'])(),this[_0x127673(0x19f)][_0x127673(0x163)]?.[_0x127673(0x1bd)](_0xc9e267[_0x127673(0x144)])?_0xc9e267[_0x127673(0x15d)]:_0xc9e267[_0x127673(0x13b)];}[_0x4c8dad(0x19a)](_0x4f20d8){const _0x47c5d3=_0x4c8dad,_0x1fb856=this[_0x47c5d3(0x180)]();return eval('const _0x503dc0 = _0x47c5d3;JSON[_0x503dc0(377)]({ \'safe\': !![] });'),Tokenizer[_0x47c5d3(0x19a)](_0x4f20d8,_0x1fb856);}}module[_0x4c8dad(0x16e)]=AgentClient;function _0x42c0(){const _0x514d95=['additional_instructions','snIbT','tools','[api/server/controllers/agents/client.js\x20#chatCompletion]\x20Tool\x20Error','stringify','map','blHyh','collectedUsage','app','image_urls','rpwDE','getEncoding','[api/server/controllers/agents/client.js\x20#checkVisionRequest]\x20not\x20implemented','1492326VkjmaK','librechat-data-provider','XcZOr','promptTokens','info','message_file_map','updateClock();','fBqik','function','return\x20new\x20Date();','o200k_base','name','options','warn','provider','agent','gcnYS','RiEQV','getContentParts','handleContextStrategy','messageId','[api/server/controllers/agents/client.js\x20#sendCompletion]\x20Unhandled\x20error\x20type','chatCompletion','title','getTokenCount','WKOpr','Run\x20not\x20initialized','yCHkM','zKGzL','modelOptions','BwzDn','~/config','length','contextHandlers','buildMessages','JmpGV','OMARl','GcZPO','ayKCY','completionsUrl','pOIhk','run','isVisionModel','@librechat/agents','instructions','debug','kgNxI','processFile','catch','dFDSG','artifactPromises','completionTokens','getTokenCountForMessage','cGWvQ','output_tokens','6637312UyLywf','outputTokens','message','constructor','includes','log','bQTHe','spec','setOptions','getBuildMessagesOptions','conversationId','titleConvo','sendCompletion','933396XkLicn','req','cYWjR','onProgress','return\x20Object.keys({a:1});','processStream','cl100k_base','jEUzG','VpiIO','modelLabel','~/app/clients/prompts','endpointTokenConfig','5oGCAVj','zEqXe','MNJgB','Failed\x20to\x20create\x20run','zGTnT','return\x20await\x20Promise.resolve(42);','contextStrategy','isChatCompletion','usage','titleModel','tokenCount','error','text','ifGfG','gpt-4o','eQrUz','vCZyN','inputTokens','~/utils','TSzjc','shouldSummarize','endpoint','values','959112BNOFBP','getMessagesForConversation','zVTOg','234332uKiLDi','signal','addImageURLs','getSaveOptions','anthropic','4009873VJeNna','bedrock','getReqData','CURRENT_MODEL','[api/server/controllers/agents/client.js\x20#sendCompletion]\x20Operation\x20aborted','~/server/services/Tokenizer','createContext','input_tokens','resendFiles','EWqfd','maxContextTokens','embedded','recordCollectedUsage','contentParts','vCvEO','qgjFL','locals','[api/server/controllers/agents/client.js\x20#chatCompletion]\x20Error\x20recording\x20collected\x20usage','BrvOk','RICbb','~/server/services/Files/images/encode','aborted','tokenUsage','generateTitle','attachments','model','checkVisionRequest','RiouD','HzqUT','[api/server/controllers/agents/client.js]\x20setOptions','augmentedPrompt','VCTGv','safe','1051060PtHksb','imageDetail','agents','exports','assign','responseMessageId','[api/server/controllers/agents/client.js]\x20chatCompletion','[api/server/controllers/agents/client.js\x20#titleConvo]\x20Error','user','files'];_0x42c0=function(){return _0x514d95;};return _0x42c0();}