const _0x29856e=_0xec13;(function(_0xb24967,_0x3df508){const _0x293beb=_0xec13,_0x762211=_0xb24967();while(!![]){try{const _0x5102f5=parseInt(_0x293beb(0x298))/0x1*(parseInt(_0x293beb(0x234))/0x2)+parseInt(_0x293beb(0x235))/0x3+parseInt(_0x293beb(0x218))/0x4*(-parseInt(_0x293beb(0x20a))/0x5)+-parseInt(_0x293beb(0x1f7))/0x6*(-parseInt(_0x293beb(0x29e))/0x7)+-parseInt(_0x293beb(0x23e))/0x8*(-parseInt(_0x293beb(0x283))/0x9)+parseInt(_0x293beb(0x277))/0xa*(parseInt(_0x293beb(0x25a))/0xb)+-parseInt(_0x293beb(0x267))/0xc*(parseInt(_0x293beb(0x26f))/0xd);if(_0x5102f5===_0x3df508)break;else _0x762211['push'](_0x762211['shift']());}catch(_0x1f589f){_0x762211['push'](_0x762211['shift']());}}}(_0x1480,0x3f389));const Parse=require('parse/node');import{isDeepStrictEqual}from'util';import{getRequestObject,resolveError}from'./triggers';function _0xec13(_0x36f6df,_0xf6f6a7){const _0x148048=_0x1480();return _0xec13=function(_0xec13b0,_0xcbb2cc){_0xec13b0=_0xec13b0-0x1f1;let _0x22fd8f=_0x148048[_0xec13b0];return _0x22fd8f;},_0xec13(_0x36f6df,_0xf6f6a7);}import{logger}from'./logger';import _0x52bf16 from'./RestQuery';import _0x26f6d1 from'./RestWrite';function Auth({config:_0x396fc1,cacheController:cacheController=undefined,isMaster:isMaster=![],isMaintenance:isMaintenance=![],isReadOnly:isReadOnly=![],user:_0xf88713,installationId:_0x53e940}){const _0x2496a2=_0xec13;this[_0x2496a2(0x2a9)]=_0x396fc1,this[_0x2496a2(0x26a)]=cacheController||_0x396fc1&&_0x396fc1[_0x2496a2(0x26a)],this['installationId']=_0x53e940,this[_0x2496a2(0x237)]=isMaster,this[_0x2496a2(0x242)]=isMaintenance,this[_0x2496a2(0x2b7)]=_0xf88713,this[_0x2496a2(0x21b)]=isReadOnly,this['userRoles']=[],this[_0x2496a2(0x1fe)]=![],this['rolePromise']=null;}Auth[_0x29856e(0x245)][_0x29856e(0x25c)]=function(){const _0x1e2a94=_0x29856e,_0x1e043c={'UIRZQ':function(_0x12e968,_0x40a2dd){return _0x12e968===_0x40a2dd;},'Yztpt':_0x1e2a94(0x21e)};if(this[_0x1e2a94(0x237)])return![];if(this[_0x1e2a94(0x242)]){if(_0x1e043c[_0x1e2a94(0x230)](_0x1e2a94(0x25e),_0x1e043c[_0x1e2a94(0x276)])){if(_0x19bd52===_0x1e2a94(0x2a6))return;const _0x1ba1a1=_0x6678dd[_0x4ab26e],_0x8c95d7=_0x490825[_0x550893];!_0x1c1734(_0x1ba1a1,_0x8c95d7)&&(_0x33a3dc[_0x15cf57]=_0x1ba1a1);}else return![];}if(this[_0x1e2a94(0x2b7)])return![];return!![];};function master(_0x446d6b){return new Auth({'config':_0x446d6b,'isMaster':!![]});}function maintenance(_0x21899a){return new Auth({'config':_0x21899a,'isMaintenance':!![]});}function readOnly(_0x4f389f){return new Auth({'config':_0x4f389f,'isMaster':!![],'isReadOnly':!![]});}function nobody(_0x3b4dfd){return new Auth({'config':_0x3b4dfd,'isMaster':![]});}function shouldUpdateSessionExpiry(_0xe8e5d2,_0x1d3da4){const _0x50608a=_0x29856e,_0x28136e=_0xe8e5d2[_0x50608a(0x221)]/0x2,_0x289e45=new Date(_0x1d3da4?.[_0x50608a(0x2ad)]),_0x380958=new Date();return _0x380958['setTime'](_0x380958['getTime']()-_0x28136e*0x3e8),_0x289e45<=_0x380958;}function _0x1480(){const _0x5b1337=['kvXLc','toJSON','dncOb','generateSessionExpiresAt','CoWbU','solo','role:','1|2|3|4|0','AigKA','RzPWa','Method','GTUDB','BRmCP','find','33fRmlRw','name','isUnauthenticated','code','NOxiB','buildParseObjects','mEnYU','FTHKm','reduce','qccVw','sDmvC','User','database','2662392kuAYTK','fJTjj','_encode','cacheController','then','doNotSave','role','udWCp','52LPsyxs','equalTo','extendSessionOnUse','odbOo','VeMCK','AonpE','zsjhx','Yztpt','448340pGcdtb','fomfs','ceceE','koVJQ','jJCob','knXRg','some','beforeFind','resolve','INTERNAL_SERVER_ERROR','ihnza','aYkym','1359eZDMSy','4|0|2|3|1','expiresAt','BLaus','del','kQjzJ','tsZVw','error','Pointer','LBHPv','kDsvY','getUserId','Session\x20token\x20is\x20expired.','gvumv','Could\x20not\x20update\x20session\x20expiry:\x20','names','additional','Auth\x20failed.\x20Unknown\x20error.','installationId','call','SfaSA','1HmwVPs','DgtSD','DmdUv','include','_User','containedIn','138152wUEPLv','get','AvIcM','cvXWx','vHHxs','userRoles','oUCjt','validator','anonymous','password','OTHER_CAUSE','config','Object','oRBqJ','results','updatedAt','jvPnY','Failed\x20running\x20auth\x20step\x20','auth','INVALID_SESSION_TOKEN','response','tflzY','getRolesByIds','XMSMo','className','user','YmPfG','save','yMsLa','exports','OVJsb','HXYMS','enabled','_getAllRolesNamesForRoleIds','ktHYy','each','_Role','Error','fromJSON','map','concat','ssPfZ','length','_loadRoles','96BDciSM','getRolesForUser','authDataManager','Missing\x20additional\x20authData\x20','BUSAS','OfIwO','sessionToken','fetchedRoles','mhieK','ifEFY','triggerName','nVXMK','btYQR','startsWith','LnbFs','CrHPf','method','limit','push','170cagVgF','Invalid\x20session\x20token','SmEEK','join','AsQIR','rolePromise','pGlXV','execute','Role','put','ufGJa','objectId','ids','\x20with\x20Error:\x20','24104DJKWYW','ZSgvb','invalid\x20legacy\x20session\x20token','isReadOnly','clearRoleCache','WNZHC','bgLeu','fetch','TwpWg','sessionLength','roles','keys','DyhMw','authData','cacheRoles','yqFmX','.id','VOrmH','zEYCj','split','GMNdU','_Session','NBABu','users','UIRZQ','OBJECT_NOT_FOUND','Query','iso','50284EEUxTT','1099674lnzXMH','sort','isMaster','This\x20authentication\x20method\x20is\x20unsupported.','./RestQuery','data','filter','SCRIPT_FAILED','JHCPe','26984duSRJU','Zlyit','ywPoz','mEJKL','isMaintenance','function','getValidatorForProvider','prototype','policy','all','UNSUPPORTED_SERVICE','adapter','VWeaA','fJIdZ'];_0x1480=function(){return _0x5b1337;};return _0x1480();}const throttle={},renewSessionIfNeeded=async({config:_0x1e13d9,session:_0x244e89,sessionToken:_0x2788e2})=>{const _0x3e22c0=_0x29856e,_0x31b2f8={'DmdUv':_0x3e22c0(0x253),'yMsLa':function(_0x526d01,_0x660058){return _0x526d01(_0x660058);},'qccVw':_0x3e22c0(0x22d),'koVJQ':function(_0x4dafae,_0x1a2dc8,_0x5879b8){return _0x4dafae(_0x1a2dc8,_0x5879b8);},'oRBqJ':function(_0x33fa7c,_0x498b9d){return _0x33fa7c(_0x498b9d);},'ufGJa':function(_0x25c456,_0x315135){return _0x25c456!==_0x315135;},'fomfs':'APftQ','LBHPv':_0x3e22c0(0x22e)};if(!_0x1e13d9?.[_0x3e22c0(0x271)]){if(_0x31b2f8[_0x3e22c0(0x214)](_0x31b2f8[_0x3e22c0(0x278)],_0x31b2f8[_0x3e22c0(0x28c)]))return;else{const _0x10baf7=_0x31b2f8[_0x3e22c0(0x29a)][_0x3e22c0(0x22b)]('|');let _0x720526=0x0;while(!![]){switch(_0x10baf7[_0x720526++]){case'0':return this[_0x3e22c0(0x20f)];case'1':if(this[_0x3e22c0(0x237)]||this[_0x3e22c0(0x242)]||!this[_0x3e22c0(0x2b7)])return _0x5b3b94[_0x3e22c0(0x27f)]([]);continue;case'2':if(this[_0x3e22c0(0x1fe)])return _0x5b6089[_0x3e22c0(0x27f)](this[_0x3e22c0(0x2a3)]);continue;case'3':if(this[_0x3e22c0(0x20f)])return this['rolePromise'];continue;case'4':this['rolePromise']=this[_0x3e22c0(0x1f6)]();continue;}break;}}}_0x31b2f8['yMsLa'](clearTimeout,throttle[_0x2788e2]),throttle[_0x2788e2]=setTimeout(async()=>{const _0x48cecd=_0x3e22c0;try{if(!_0x244e89){const _0x103bee=await _0x31b2f8[_0x48cecd(0x2ba)](_0x52bf16,{'method':_0x52bf16[_0x48cecd(0x256)][_0x48cecd(0x29f)],'config':_0x1e13d9,'auth':master(_0x1e13d9),'runBeforeFind':![],'className':_0x31b2f8[_0x48cecd(0x263)],'restWhere':{'sessionToken':_0x2788e2},'restOptions':{'limit':0x1}}),{results:_0x29831f}=await _0x103bee[_0x48cecd(0x211)]();_0x244e89=_0x29831f[0x0];}if(!_0x31b2f8[_0x48cecd(0x27a)](shouldUpdateSessionExpiry,_0x1e13d9,_0x244e89)||!_0x244e89)return;const _0x54aae5=_0x1e13d9[_0x48cecd(0x24f)]();await new _0x26f6d1(_0x1e13d9,_0x31b2f8[_0x48cecd(0x2ab)](master,_0x1e13d9),_0x48cecd(0x22d),{'objectId':_0x244e89[_0x48cecd(0x215)]},{'expiresAt':Parse[_0x48cecd(0x269)](_0x54aae5)})['execute']();}catch(_0x4856ff){_0x4856ff?.[_0x48cecd(0x25d)]!==Parse[_0x48cecd(0x2c3)][_0x48cecd(0x231)]&&logger[_0x48cecd(0x28a)]('Could\x20not\x20update\x20session\x20expiry:\x20',_0x4856ff);}},0x1f4);},getAuthForSessionToken=async function({config:_0x4c1e22,cacheController:_0x553769,sessionToken:_0x183b7a,installationId:_0x4e82ee}){const _0x3b298a=_0x29856e,_0x45f2d4={'CJEsb':function(_0x483b24,_0x2b2b1d){return _0x483b24!==_0x2b2b1d;},'sUswm':function(_0x379f16,_0x2fd7ca){return _0x379f16(_0x2fd7ca);},'ZSgvb':function(_0x52ad36,_0x53a251){return _0x52ad36===_0x53a251;},'AigKA':_0x3b298a(0x220),'knXRg':_0x3b298a(0x2bc),'DyhMw':'user','SmEEK':function(_0x2b121e,_0x41d8e0){return _0x2b121e(_0x41d8e0);},'AvIcM':_0x3b298a(0x1fd),'fJTjj':function(_0x360059,_0x505ae1){return _0x360059<_0x505ae1;},'mEJKL':_0x3b298a(0x28f),'gvumv':_0x3b298a(0x215),'JsxdF':'string','aYkym':_0x3b298a(0x252),'dncOb':'Invalid\x20object\x20ID.'};_0x553769=_0x553769||_0x4c1e22&&_0x4c1e22[_0x3b298a(0x26a)];if(_0x553769){const _0x577f40=await _0x553769[_0x3b298a(0x2b7)][_0x3b298a(0x29f)](_0x183b7a);if(_0x577f40){const _0x6ac5ad=Parse['Object'][_0x3b298a(0x1f1)](_0x577f40);return _0x45f2d4['sUswm'](renewSessionIfNeeded,{'config':_0x4c1e22,'sessionToken':_0x183b7a}),Promise[_0x3b298a(0x27f)](new Auth({'config':_0x4c1e22,'cacheController':_0x553769,'isMaster':![],'installationId':_0x4e82ee,'user':_0x6ac5ad}));}}let _0x3439e3;if(_0x4c1e22){if(_0x45f2d4[_0x3b298a(0x219)](_0x45f2d4[_0x3b298a(0x254)],_0x45f2d4[_0x3b298a(0x27c)])){const _0x33afdf=_0x45f2d4['CJEsb'](_0x1169d9[_0x1a3ac1],!![]);return _0x70569d[_0x4753d2]=!![],_0x33afdf;}else{const _0x15145e={'limit':0x1,'include':_0x45f2d4[_0x3b298a(0x224)]},_0x219608=require('./RestQuery'),_0x1fd316=await _0x45f2d4[_0x3b298a(0x20c)](_0x219608,{'method':_0x219608[_0x3b298a(0x256)]['get'],'config':_0x4c1e22,'runBeforeFind':![],'auth':_0x45f2d4[_0x3b298a(0x20c)](master,_0x4c1e22),'className':'_Session','restWhere':{'sessionToken':_0x183b7a},'restOptions':_0x15145e});_0x3439e3=(await _0x1fd316['execute']())[_0x3b298a(0x2ac)];}}else _0x3439e3=(await new Parse[(_0x3b298a(0x232))](Parse['Session'])[_0x3b298a(0x208)](0x1)[_0x3b298a(0x29b)](_0x45f2d4[_0x3b298a(0x224)])[_0x3b298a(0x270)](_0x45f2d4[_0x3b298a(0x2a0)],_0x183b7a)[_0x3b298a(0x259)]({'useMasterKey':!![]}))[_0x3b298a(0x1f2)](_0x3fabf4=>_0x3fabf4[_0x3b298a(0x24d)]());if(_0x3439e3[_0x3b298a(0x1f5)]!==0x1||!_0x3439e3[0x0][_0x45f2d4[_0x3b298a(0x224)]])throw new Parse[(_0x3b298a(0x2c3))](Parse[_0x3b298a(0x2c3)][_0x3b298a(0x2b1)],_0x3b298a(0x20b));const _0x249832=_0x3439e3[0x0],_0x2ceab4=new Date(),_0x3bc731=_0x249832[_0x3b298a(0x285)]?new Date(_0x249832[_0x3b298a(0x285)][_0x3b298a(0x233)]):undefined;if(_0x45f2d4[_0x3b298a(0x268)](_0x3bc731,_0x2ceab4))throw new Parse['Error'](Parse['Error']['INVALID_SESSION_TOKEN'],_0x45f2d4[_0x3b298a(0x241)]);const _0x5cf868=_0x249832[_0x3b298a(0x2b7)];if(_0x45f2d4['ZSgvb'](typeof _0x5cf868[_0x45f2d4[_0x3b298a(0x290)]],_0x45f2d4['JsxdF'])&&_0x5cf868[_0x45f2d4[_0x3b298a(0x290)]][_0x3b298a(0x204)](_0x45f2d4[_0x3b298a(0x282)]))throw new Parse['Error'](Parse['Error'][_0x3b298a(0x280)],_0x45f2d4[_0x3b298a(0x24e)]);delete _0x5cf868[_0x3b298a(0x2a7)],_0x5cf868[_0x3b298a(0x2b6)]=_0x3b298a(0x29c),_0x5cf868[_0x3b298a(0x1fd)]=_0x183b7a;_0x553769&&_0x553769[_0x3b298a(0x2b7)][_0x3b298a(0x213)](_0x183b7a,_0x5cf868);renewSessionIfNeeded({'config':_0x4c1e22,'session':_0x249832,'sessionToken':_0x183b7a});const _0x4d1dcf=Parse['Object']['fromJSON'](_0x5cf868);return new Auth({'config':_0x4c1e22,'cacheController':_0x553769,'isMaster':![],'installationId':_0x4e82ee,'user':_0x4d1dcf});};var getAuthForLegacySessionToken=async function({config:_0x38c16a,sessionToken:_0x33ee,installationId:_0xf8c77d}){const _0xad43ca=_0x29856e,_0x49a8d1={'GMNdU':function(_0x1ba048,_0x2af9c7){return _0x1ba048!==_0x2af9c7;},'yPppg':function(_0x70be6d,_0x549fb9){return _0x70be6d(_0x549fb9);},'HXYMS':function(_0x1cab1d,_0x58e558){return _0x1cab1d(_0x58e558);},'VWeaA':_0xad43ca(0x29c)};var _0xcb4771={'limit':0x1};const _0xa1dd59=_0x49a8d1['yPppg'](require,_0xad43ca(0x239));var _0x2d7ae6=await _0x49a8d1[_0xad43ca(0x2bd)](_0xa1dd59,{'method':_0xa1dd59[_0xad43ca(0x256)][_0xad43ca(0x29f)],'config':_0x38c16a,'runBeforeFind':![],'auth':master(_0x38c16a),'className':_0x49a8d1[_0xad43ca(0x24a)],'restWhere':{'_session_token':_0x33ee},'restOptions':_0xcb4771});return _0x2d7ae6[_0xad43ca(0x211)]()['then'](_0x22060f=>{const _0x40fd92=_0xad43ca;var _0xfc3878=_0x22060f[_0x40fd92(0x2ac)];if(_0x49a8d1[_0x40fd92(0x22c)](_0xfc3878[_0x40fd92(0x1f5)],0x1))throw new Parse[(_0x40fd92(0x2c3))](Parse['Error'][_0x40fd92(0x2b1)],_0x40fd92(0x21a));const _0x22540f=_0xfc3878[0x0];_0x22540f[_0x40fd92(0x2b6)]=_0x40fd92(0x29c);const _0x4f095f=Parse[_0x40fd92(0x2aa)][_0x40fd92(0x1f1)](_0x22540f);return new Auth({'config':_0x38c16a,'isMaster':![],'installationId':_0xf8c77d,'user':_0x4f095f});});};Auth[_0x29856e(0x245)]['getUserRoles']=function(){const _0x5e2bcb=_0x29856e,_0x73b426={'AsQIR':_0x5e2bcb(0x284)},_0xa4ce79=_0x73b426[_0x5e2bcb(0x20e)][_0x5e2bcb(0x22b)]('|');let _0x34afdb=0x0;while(!![]){switch(_0xa4ce79[_0x34afdb++]){case'0':if(this[_0x5e2bcb(0x1fe)])return Promise[_0x5e2bcb(0x27f)](this[_0x5e2bcb(0x2a3)]);continue;case'1':return this[_0x5e2bcb(0x20f)];case'2':if(this[_0x5e2bcb(0x20f)])return this['rolePromise'];continue;case'3':this[_0x5e2bcb(0x20f)]=this[_0x5e2bcb(0x1f6)]();continue;case'4':if(this['isMaster']||this[_0x5e2bcb(0x242)]||!this[_0x5e2bcb(0x2b7)])return Promise['resolve']([]);continue;}break;}},Auth[_0x29856e(0x245)]['getRolesForUser']=async function(){const _0x56ae09=_0x29856e,_0x2120bd={'VeMCK':_0x56ae09(0x239),'nVXMK':'_Role','mPVOk':_0x56ae09(0x22f)},_0x5db36b=[];if(this['config']){const _0x323e9a={'users':{'__type':_0x56ae09(0x28b),'className':_0x56ae09(0x29c),'objectId':this['user']['id']}},_0x3142c9=require(_0x2120bd[_0x56ae09(0x273)]),_0x1886d0=await _0x3142c9({'method':_0x3142c9[_0x56ae09(0x256)][_0x56ae09(0x259)],'runBeforeFind':![],'config':this['config'],'auth':master(this[_0x56ae09(0x2a9)]),'className':_0x2120bd[_0x56ae09(0x202)],'restWhere':_0x323e9a});await _0x1886d0[_0x56ae09(0x2c1)](_0x909af4=>_0x5db36b[_0x56ae09(0x209)](_0x909af4));}else await new Parse['Query'](Parse[_0x56ae09(0x212)])['equalTo'](_0x2120bd['mPVOk'],this[_0x56ae09(0x2b7)])[_0x56ae09(0x2c1)](_0x41e07e=>_0x5db36b['push'](_0x41e07e[_0x56ae09(0x24d)]()),{'useMasterKey':!![]});return _0x5db36b;},Auth['prototype'][_0x29856e(0x1f6)]=async function(){const _0x56d4f5=_0x29856e,_0xcd732e={'kDsvY':_0x56d4f5(0x258)};if(this[_0x56d4f5(0x26a)]){const _0x284f04=await this[_0x56d4f5(0x26a)]['role'][_0x56d4f5(0x29f)](this['user']['id']);if(_0x284f04!=null)return this['fetchedRoles']=!![],this[_0x56d4f5(0x2a3)]=_0x284f04,_0x284f04;}const _0x526c48=await this[_0x56d4f5(0x1f8)]();if(!_0x526c48[_0x56d4f5(0x1f5)])return _0xcd732e[_0x56d4f5(0x28d)]!==_0x56d4f5(0x258)?![]:(this[_0x56d4f5(0x2a3)]=[],this[_0x56d4f5(0x1fe)]=!![],this['rolePromise']=null,this[_0x56d4f5(0x226)](),this[_0x56d4f5(0x2a3)]);const _0x488dd4=_0x526c48[_0x56d4f5(0x262)]((_0x46b76c,_0x47f0d5)=>{const _0x682bd7=_0x56d4f5;return _0x46b76c[_0x682bd7(0x292)][_0x682bd7(0x209)](_0x47f0d5[_0x682bd7(0x25b)]),_0x46b76c[_0x682bd7(0x216)]['push'](_0x47f0d5[_0x682bd7(0x215)]),_0x46b76c;},{'ids':[],'names':[]}),_0x2e7013=await this['_getAllRolesNamesForRoleIds'](_0x488dd4[_0x56d4f5(0x216)],_0x488dd4['names']);return this[_0x56d4f5(0x2a3)]=_0x2e7013[_0x56d4f5(0x1f2)](_0xb1f50a=>{const _0xe4c380=_0x56d4f5;return _0xe4c380(0x252)+_0xb1f50a;}),this['fetchedRoles']=!![],this[_0x56d4f5(0x20f)]=null,this[_0x56d4f5(0x226)](),this[_0x56d4f5(0x2a3)];},Auth[_0x29856e(0x245)][_0x29856e(0x226)]=function(){const _0xe75c70=_0x29856e,_0x109d97={'SfaSA':function(_0x44342e,..._0x5f3122){return _0x44342e(..._0x5f3122);}};if(!this['cacheController'])return![];return this[_0xe75c70(0x26a)][_0xe75c70(0x26d)]['put'](this[_0xe75c70(0x2b7)]['id'],_0x109d97[_0xe75c70(0x297)](Array,...this[_0xe75c70(0x2a3)])),!![];},Auth['prototype'][_0x29856e(0x21c)]=function(_0x139cec){const _0x5603ab=_0x29856e;if(!this[_0x5603ab(0x26a)])return![];return this[_0x5603ab(0x26a)]['role'][_0x5603ab(0x287)](this[_0x5603ab(0x2b7)]['id']),this[_0x5603ab(0x26a)][_0x5603ab(0x2b7)]['del'](_0x139cec),!![];},Auth[_0x29856e(0x245)]['getRolesByIds']=async function(_0x3f12f3){const _0xd904d3=_0x29856e,_0x57adb5={'CrHPf':_0xd904d3(0x294),'FglQc':function(_0x511cd8,_0x57a614){return _0x511cd8+_0x57a614;},'LnbFs':_0xd904d3(0x2b3),'zEYCj':_0xd904d3(0x28b),'BLaus':_0xd904d3(0x222),'mUFnI':function(_0x2b1302,_0x54abb1){return _0x2b1302(_0x54abb1);},'YmPfG':function(_0x6227f3,_0x41a60d){return _0x6227f3(_0x41a60d);}},_0x5cd25f=[];if(!this[_0xd904d3(0x2a9)])await new Parse['Query'](Parse[_0xd904d3(0x212)])[_0xd904d3(0x29d)](_0x57adb5[_0xd904d3(0x286)],_0x3f12f3[_0xd904d3(0x1f2)](_0x169482=>{const _0x1b8049=_0xd904d3,_0x5a7663=new Parse['Object'](Parse[_0x1b8049(0x212)]);return _0x5a7663['id']=_0x169482,_0x5a7663;}))[_0xd904d3(0x2c1)](_0x4a2843=>_0x5cd25f['push'](_0x4a2843[_0xd904d3(0x24d)]()),{'useMasterKey':!![]});else{const _0xc73c61=_0x3f12f3[_0xd904d3(0x1f2)](_0x193ed8=>{const _0x2b8e68=_0xd904d3,_0x4fc725={'kvXLc':function(_0x503e53,_0x5a329f,_0x346843){return _0x503e53(_0x5a329f,_0x346843);},'UFqrD':_0x57adb5[_0x2b8e68(0x206)],'jJCob':function(_0x1d1f02,_0x494efb){return _0x57adb5['FglQc'](_0x1d1f02,_0x494efb);}};if(_0x2b8e68(0x2b3)===_0x57adb5[_0x2b8e68(0x205)])return{'__type':_0x57adb5[_0x2b8e68(0x22a)],'className':'_Role','objectId':_0x193ed8};else{const _0x44071d=_0x4fc725[_0x2b8e68(0x24c)](_0x1a9ff3,_0x2c6f55,{'code':_0x5c8e18[_0x2b8e68(0x2c3)][_0x2b8e68(0x23c)],'message':_0x4fc725['UFqrD']}),_0x36c119=_0x236f32[_0x2b8e68(0x2b0)]&&_0x9376d[_0x2b8e68(0x2b0)][_0x2b8e68(0x2b7)]?_0x5a3ff0[_0x2b8e68(0x2b0)]['user']['id']:_0x2cff4f[_0x2b8e68(0x23a)][_0x2b8e68(0x215)]||_0x50dc60;_0x4423fd[_0x2b8e68(0x28a)](_0x4fc725[_0x2b8e68(0x27b)]('Failed\x20running\x20auth\x20step\x20'+_0x5303fc+'\x20for\x20'+_0x55d536+'\x20for\x20user\x20'+_0x36c119+_0x2b8e68(0x217),_0x32a737['stringify'](_0x44071d)),{'authenticationStep':_0x32c3ff,'error':_0x44071d,'user':_0x36c119,'provider':_0x47999b});throw _0x44071d;}}),_0x327acd={'roles':{'$in':_0xc73c61}},_0x92c02a=require('./RestQuery'),_0x1ceceb=await _0x57adb5['mUFnI'](_0x92c02a,{'method':_0x92c02a['Method'][_0xd904d3(0x259)],'config':this[_0xd904d3(0x2a9)],'runBeforeFind':![],'auth':_0x57adb5[_0xd904d3(0x2b8)](master,this[_0xd904d3(0x2a9)]),'className':_0xd904d3(0x2c2),'restWhere':_0x327acd});await _0x1ceceb['each'](_0x30deaf=>_0x5cd25f['push'](_0x30deaf));}return _0x5cd25f;},Auth[_0x29856e(0x245)]['_getAllRolesNamesForRoleIds']=function(_0x36a274,_0x304314=[],_0x567559={}){const _0x2b36a8=_0x29856e,_0x5e8160={'oUCjt':function(_0x2b7be0,_0x24b134){return _0x2b7be0!==_0x24b134;},'jvPnY':_0x2b36a8(0x21a),'ihnza':_0x2b36a8(0x1f4)},_0x44c071=_0x36a274[_0x2b36a8(0x23b)](_0x10c945=>{const _0x337fed=_0x2b36a8,_0x2a3af8=_0x5e8160[_0x337fed(0x2a4)](_0x567559[_0x10c945],!![]);return _0x567559[_0x10c945]=!![],_0x2a3af8;});if(_0x44c071['length']==0x0)return Promise['resolve']([...new Set(_0x304314)]);return this[_0x2b36a8(0x2b4)](_0x44c071)[_0x2b36a8(0x26b)](_0x346802=>{const _0x20ca9e=_0x2b36a8;if(_0x20ca9e(0x1f4)===_0x5e8160[_0x20ca9e(0x281)]){if(!_0x346802[_0x20ca9e(0x1f5)])return Promise['resolve'](_0x304314);const _0x385f16=_0x346802['reduce']((_0x1a90bc,_0x3c7dfd)=>{const _0x37e10b=_0x20ca9e;return _0x1a90bc['names']['push'](_0x3c7dfd[_0x37e10b(0x25b)]),_0x1a90bc['ids'][_0x37e10b(0x209)](_0x3c7dfd[_0x37e10b(0x215)]),_0x1a90bc;},{'ids':[],'names':[]});return _0x304314=_0x304314[_0x20ca9e(0x1f3)](_0x385f16[_0x20ca9e(0x292)]),this[_0x20ca9e(0x2bf)](_0x385f16['ids'],_0x304314,_0x567559);}else throw new _0x50da21[(_0x20ca9e(0x2c3))](_0x24059a[_0x20ca9e(0x2c3)]['INVALID_SESSION_TOKEN'],_0x5e8160[_0x20ca9e(0x2ae)]);})['then'](_0x46fb0b=>{const _0x318538=_0x2b36a8;return Promise[_0x318538(0x27f)]([...new Set(_0x46fb0b)]);});};const findUsersWithAuthData=async(_0x5ee4bd,_0x33c788,_0x3951f3)=>{const _0x2d42bc=_0x29856e,_0x3624e3={'jqNCh':function(_0x26d82c,_0xdce209){return _0x26d82c===_0xdce209;},'YficQ':function(_0x26b279,_0x19a923){return _0x26b279===_0x19a923;},'Zlyit':'function'},_0x12a2ab=Object[_0x2d42bc(0x223)](_0x33c788),_0x427d00=await Promise[_0x2d42bc(0x247)](_0x12a2ab[_0x2d42bc(0x1f2)](async _0x15d05f=>{const _0x384b85=_0x2d42bc;if(_0x3624e3['jqNCh'](_0x384b85(0x2b5),_0x384b85(0x274)))return _0x5d7642[_0x384b85(0x27f)](_0xf25b19);else{const _0x1b0b3d=_0x33c788[_0x15d05f],_0x3061d8=_0x5ee4bd[_0x384b85(0x1f9)]['getValidatorForProvider'](_0x15d05f)?.['adapter'];_0x3951f3&&_0x3624e3['YficQ'](typeof _0x3061d8?.[_0x384b85(0x27e)],_0x3624e3[_0x384b85(0x23f)])&&await _0x3061d8[_0x384b85(0x27e)](_0x1b0b3d);if(!_0x1b0b3d?.['id'])return null;return{['authData.'+_0x15d05f+_0x384b85(0x228)]:_0x1b0b3d['id']};}})),_0x25e6bf=_0x427d00[_0x2d42bc(0x23b)](_0x392165=>_0x392165!==null);if(!_0x25e6bf[_0x2d42bc(0x1f5)])return[];return _0x5ee4bd[_0x2d42bc(0x266)][_0x2d42bc(0x259)]('_User',{'$or':_0x25e6bf},{'limit':0x2});},hasMutatedAuthData=(_0x32c47c,_0x52a703)=>{const _0x781e39=_0x29856e,_0xdb9cca={'DgtSD':function(_0x161024,_0x44736d){return _0x161024===_0x44736d;},'cvXWx':function(_0x3980f6,_0x2f9df1,_0x3a60f0){return _0x3980f6(_0x2f9df1,_0x3a60f0);},'WNZHC':function(_0x1e42c6,_0x59146d){return _0x1e42c6!==_0x59146d;}};if(!_0x52a703)return{'hasMutatedAuthData':!![],'mutatedAuthData':_0x32c47c};const _0x57b6d1={};Object['keys'](_0x32c47c)['forEach'](_0x383d81=>{const _0x19c5e3=_0xec13;if(_0xdb9cca[_0x19c5e3(0x299)](_0x383d81,_0x19c5e3(0x2a6))){if('GxTqi'!=='GxTqi')return this[_0x19c5e3(0x1fe)]=!![],this[_0x19c5e3(0x2a3)]=_0x1e1cf4,_0x16c83c;else return;}const _0x57476f=_0x32c47c[_0x383d81],_0x582b89=_0x52a703[_0x383d81];!_0xdb9cca[_0x19c5e3(0x2a1)](isDeepStrictEqual,_0x57476f,_0x582b89)&&(_0x57b6d1[_0x383d81]=_0x57476f);});const _0x352160=_0xdb9cca[_0x781e39(0x21d)](Object['keys'](_0x57b6d1)[_0x781e39(0x1f5)],0x0);return{'hasMutatedAuthData':_0x352160,'mutatedAuthData':_0x57b6d1};},checkIfUserHasProvidedConfiguredProvidersForLogin=(_0x172660={},_0x352119={},_0x3311d7={},_0x5d38e4)=>{const _0x57b566=_0x29856e,_0xe96b49={'CoWbU':_0x57b566(0x291),'btYQR':function(_0x208f32,_0x1aca67){return _0x208f32===_0x1aca67;},'FTHKm':'function','OfIwO':function(_0x3e4f49,_0x23974a){return _0x3e4f49!==_0x23974a;},'sDmvC':function(_0x159b3b,_0x25e2a5){return _0x159b3b===_0x25e2a5;},'IjZJS':_0x57b566(0x28f),'GOZEI':_0x57b566(0x24b),'JHCPe':_0x57b566(0x279)},_0xb830aa=Object[_0x57b566(0x223)](_0x3311d7)[_0x57b566(0x1f2)](_0x177544=>({'name':_0x177544,'adapter':_0x5d38e4['authDataManager'][_0x57b566(0x244)](_0x177544)[_0x57b566(0x249)]})),_0x23c35c=_0xb830aa['some'](_0x3f6ab9=>_0x3f6ab9&&_0x3f6ab9['adapter']&&_0x3f6ab9['adapter'][_0x57b566(0x246)]===_0x57b566(0x251)&&_0x352119[_0x3f6ab9[_0x57b566(0x25b)]]);if(_0x23c35c){if(_0xe96b49[_0x57b566(0x203)](_0xe96b49['GOZEI'],_0x57b566(0x24b)))return;else this[_0x57b566(0x2a9)]=_0xc4f8cb,this['cacheController']=_0x5c6280||_0x2dcb6f&&_0x1c6db0[_0x57b566(0x26a)],this[_0x57b566(0x295)]=_0x9a0532,this['isMaster']=_0x3bfa6b,this['isMaintenance']=_0x1626e3,this[_0x57b566(0x2b7)]=_0x32ce34,this[_0x57b566(0x21b)]=_0xfe6411,this[_0x57b566(0x2a3)]=[],this['fetchedRoles']=![],this[_0x57b566(0x20f)]=null;}const _0x174b36=[],_0x31c3ed=_0xb830aa[_0x57b566(0x27d)](_0x4a64c0=>{const _0x25def0=_0x57b566,_0x3e34ac={'pGlXV':function(_0x5118ef,_0x1608a9){return _0x5118ef!==_0x1608a9;},'mEnYU':_0xe96b49[_0x25def0(0x250)]};let _0x1ead04=_0x4a64c0[_0x25def0(0x249)]['policy'];if(_0xe96b49[_0x25def0(0x203)](typeof _0x1ead04,_0xe96b49[_0x25def0(0x261)])){if(_0xe96b49[_0x25def0(0x1fc)](_0x25def0(0x255),_0x25def0(0x227))){const _0x31d209={'ip':_0x172660[_0x25def0(0x2a9)]['ip'],'user':_0x172660[_0x25def0(0x2b0)][_0x25def0(0x2b7)],'master':_0x172660[_0x25def0(0x2b0)][_0x25def0(0x237)]};_0x1ead04=_0x1ead04[_0x25def0(0x296)](_0x4a64c0[_0x25def0(0x249)],_0x31d209,_0x3311d7[_0x4a64c0[_0x25def0(0x25b)]]);}else _0x3e34ac[_0x25def0(0x210)](_0x3e40b5?.['code'],_0x508116[_0x25def0(0x2c3)][_0x25def0(0x231)])&&_0x2e5188[_0x25def0(0x28a)](_0x3e34ac[_0x25def0(0x260)],_0x72eacd);}if(_0xe96b49[_0x25def0(0x264)](_0x1ead04,_0x25def0(0x293))){if(_0xe96b49[_0x25def0(0x264)](_0x25def0(0x1fb),_0x25def0(0x26e)))return;else{if(_0x352119[_0x4a64c0['name']])return!![];else _0x174b36['push'](_0x4a64c0[_0x25def0(0x25b)]);}}});if(_0x31c3ed||!_0x174b36['length']){if('ceceE'===_0xe96b49[_0x57b566(0x23d)])return;else throw new _0x34ef33['Error'](_0x101a00[_0x57b566(0x2c3)][_0x57b566(0x2b1)],_0xe96b49['IjZJS']);}throw new Parse[(_0x57b566(0x2c3))](Parse[_0x57b566(0x2c3)][_0x57b566(0x2a8)],_0x57b566(0x1fa)+_0x174b36[_0x57b566(0x20d)](','));},handleAuthDataValidation=async(_0x331b14,_0x4ddd6a,_0x51681a)=>{const _0x5f6392=_0x29856e,_0x3fad54={'kQjzJ':_0x5f6392(0x29c),'ktHYy':function(_0x29e1a7,_0x1bc2e0){return _0x29e1a7===_0x1bc2e0;},'ifEFY':function(_0x3fe8f9,_0xa9375){return _0x3fe8f9===_0xa9375;},'vHHxs':_0x5f6392(0x243),'zsjhx':'tsZVw','odbOo':_0x5f6392(0x238),'GTUDB':_0x5f6392(0x229),'KlMWA':_0x5f6392(0x240)};let _0x2dac79;if(_0x51681a)_0x2dac79=Parse[_0x5f6392(0x265)][_0x5f6392(0x1f1)]({'className':_0x3fad54[_0x5f6392(0x288)],..._0x51681a});else(_0x4ddd6a[_0x5f6392(0x2b0)]&&_0x4ddd6a['auth'][_0x5f6392(0x2b7)]&&_0x3fad54['ktHYy'](typeof _0x4ddd6a[_0x5f6392(0x28e)],_0x5f6392(0x243))&&_0x3fad54['ifEFY'](_0x4ddd6a['getUserId'](),_0x4ddd6a[_0x5f6392(0x2b0)][_0x5f6392(0x2b7)]['id'])||_0x4ddd6a[_0x5f6392(0x2b0)]&&_0x4ddd6a['auth']['isMaster']&&typeof _0x4ddd6a[_0x5f6392(0x28e)]===_0x3fad54[_0x5f6392(0x2a2)]&&_0x4ddd6a['getUserId']())&&(_0x2dac79=new Parse[(_0x5f6392(0x265))](),_0x2dac79['id']=_0x4ddd6a[_0x5f6392(0x2b0)][_0x5f6392(0x237)]?_0x4ddd6a['getUserId']():_0x4ddd6a[_0x5f6392(0x2b0)][_0x5f6392(0x2b7)]['id'],await _0x2dac79[_0x5f6392(0x21f)]({'useMasterKey':!![]}));const {updatedObject:_0x5e2a20}=_0x4ddd6a[_0x5f6392(0x25f)](),_0x3ea706=getRequestObject(undefined,_0x4ddd6a[_0x5f6392(0x2b0)],_0x5e2a20,_0x2dac79,_0x4ddd6a[_0x5f6392(0x2a9)]),_0x1c5338={'authData':{},'authDataResponse':{}},_0x89965b=Object[_0x5f6392(0x223)](_0x331b14)[_0x5f6392(0x236)]();for(const _0x171968 of _0x89965b){let _0x2de217='';try{if(_0x331b14[_0x171968]===null){if(_0x3fad54[_0x5f6392(0x200)](_0x3fad54[_0x5f6392(0x275)],_0x5f6392(0x289))){_0x1c5338[_0x5f6392(0x225)][_0x171968]=null;continue;}else{const _0x4b631c='0|3|4|1|2'['split']('|');let _0xcbd286=0x0;while(!![]){switch(_0x4b631c[_0xcbd286++]){case'0':this['userRoles']=[];continue;case'1':this[_0x5f6392(0x226)]();continue;case'2':return this[_0x5f6392(0x2a3)];case'3':this['fetchedRoles']=!![];continue;case'4':this[_0x5f6392(0x20f)]=null;continue;}break;}}}const {validator:_0x219891}=_0x4ddd6a[_0x5f6392(0x2a9)][_0x5f6392(0x1f9)][_0x5f6392(0x244)](_0x171968)||{},_0x158e36=(_0x4ddd6a[_0x5f6392(0x2a9)]['auth']||{})[_0x171968]||{};if(!_0x219891||_0x3fad54[_0x5f6392(0x2c0)](_0x158e36[_0x5f6392(0x2be)],![]))throw new Parse['Error'](Parse[_0x5f6392(0x2c3)][_0x5f6392(0x248)],_0x3fad54[_0x5f6392(0x272)]);let _0x390394=await _0x219891(_0x331b14[_0x171968],_0x4ddd6a,_0x2dac79,_0x3ea706);_0x2de217=_0x390394&&_0x390394[_0x5f6392(0x207)],_0x3ea706[_0x5f6392(0x201)]=_0x2de217;_0x390394&&_0x390394['validator']&&(_0x390394=await _0x390394[_0x5f6392(0x2a5)]());if(!_0x390394){_0x1c5338['authData'][_0x171968]=_0x331b14[_0x171968];continue;}if(!Object[_0x5f6392(0x223)](_0x390394)[_0x5f6392(0x1f5)]){_0x1c5338[_0x5f6392(0x225)][_0x171968]=_0x331b14[_0x171968];continue;}_0x390394['response']&&(_0x3fad54[_0x5f6392(0x257)]===_0x5f6392(0x1ff)?_0x4e7185['authDataResponse'][_0x4537c0]=_0x1d8c23['response']:_0x1c5338['authDataResponse'][_0x171968]=_0x390394[_0x5f6392(0x2b2)]),!_0x390394[_0x5f6392(0x26c)]&&(_0x1c5338[_0x5f6392(0x225)][_0x171968]=_0x390394[_0x5f6392(0x2b9)]||_0x331b14[_0x171968]);}catch(_0x66fef){if(_0x5f6392(0x240)===_0x3fad54['KlMWA']){const _0x4d6ad7=resolveError(_0x66fef,{'code':Parse['Error'][_0x5f6392(0x23c)],'message':_0x5f6392(0x294)}),_0x5e16a2=_0x4ddd6a[_0x5f6392(0x2b0)]&&_0x4ddd6a['auth'][_0x5f6392(0x2b7)]?_0x4ddd6a[_0x5f6392(0x2b0)]['user']['id']:_0x4ddd6a['data'][_0x5f6392(0x215)]||undefined;logger[_0x5f6392(0x28a)](_0x5f6392(0x2af)+_0x2de217+'\x20for\x20'+_0x171968+'\x20for\x20user\x20'+_0x5e16a2+_0x5f6392(0x217)+JSON['stringify'](_0x4d6ad7),{'authenticationStep':_0x2de217,'error':_0x4d6ad7,'user':_0x5e16a2,'provider':_0x171968});throw _0x4d6ad7;}else return!![];}}return _0x1c5338;};module[_0x29856e(0x2bb)]={'Auth':Auth,'master':master,'maintenance':maintenance,'nobody':nobody,'readOnly':readOnly,'shouldUpdateSessionExpiry':shouldUpdateSessionExpiry,'getAuthForSessionToken':getAuthForSessionToken,'getAuthForLegacySessionToken':getAuthForLegacySessionToken,'findUsersWithAuthData':findUsersWithAuthData,'hasMutatedAuthData':hasMutatedAuthData,'checkIfUserHasProvidedConfiguredProvidersForLogin':checkIfUserHasProvidedConfiguredProvidersForLogin,'handleAuthDataValidation':handleAuthDataValidation};