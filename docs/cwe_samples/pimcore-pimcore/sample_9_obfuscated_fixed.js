const _0x277f87=_0x4167;(function(_0x44195a,_0x3dfa9d){const _0x4506c4=_0x4167,_0x5b488c=_0x44195a();while(!![]){try{const _0x57feb3=-parseInt(_0x4506c4(0xf5))/0x1*(-parseInt(_0x4506c4(0xf8))/0x2)+parseInt(_0x4506c4(0x13d))/0x3*(parseInt(_0x4506c4(0xf7))/0x4)+parseInt(_0x4506c4(0x13b))/0x5+-parseInt(_0x4506c4(0x12e))/0x6+parseInt(_0x4506c4(0xfd))/0x7*(-parseInt(_0x4506c4(0xff))/0x8)+parseInt(_0x4506c4(0x153))/0x9*(-parseInt(_0x4506c4(0x119))/0xa)+parseInt(_0x4506c4(0xeb))/0xb;if(_0x57feb3===_0x3dfa9d)break;else _0x5b488c['push'](_0x5b488c['shift']());}catch(_0x35612a){_0x5b488c['push'](_0x5b488c['shift']());}}}(_0x3a87,0xceca9));import{randomString}from'../cryptoUtils';import{inflate}from'../triggers';import _0x361321 from'./AdaptableController';function _0x3a87(){const _0x4602d4=['Ftywz','MdOeP','_perishable_token_expires_at','appId','email','update','ftnsH','function','get','wdUiT','xrBtk','username','regenerateEmailVerifyToken','uCWyR','results','WCULp','uaULd','lyMfo','jSgXs','uNSXU','&username=','verifyUserEmails','farTw','BxHeo','mktEu','objectId','3180144vRYUJm','sLWFp','MHejf','shouldVerifyEmails','WJTjr','emailVerified','config','rOSLw','UpBsf','passwordPolicy','956818TdOXdF','NhYgI','2036GYfMsl','2JtaAhe','You\x20are\x20being\x20asked\x20to\x20confirm\x20the\x20e-mail\x20address\x20','Password\x20Reset\x20for\x20','resolve','itnJr','7sPokFN','getUserIfNeeded','2985192TkSbvf','includes','generatePasswordResetTokenExpiresAt','Hi,\x0a\x0a','publicServerURL','\x20with\x20','_encode','zgvuO','yyltU','defaultVerificationEmail','Delete','../RestQuery','AEoKz','_email_verify_token','fromJSON','KETnM','QfCTE','replace','DlGki','BveJw','checkResetTokenValidity','tWbDl','cyzSu','master','hwpNU','iso','33320xriyNZ','assign','expectedAdapterType','ypscp','fieldsChangedByTrigger','adapter','Click\x20here\x20to\x20reset\x20it:\x0a','Click\x20here\x20to\x20confirm\x20it:\x0a','znsok','verifyEmailURL','options','ESGev','ICcLy','gzcqr','../Auth','updatePassword','then','bFAfy','sendPasswordResetEmail','EFYoQ','sACxQ','8244576SrDjoI','EixYC','parseFrameURL','dVXZM','UHYTl','PfTuF','IvxhZ','defaultResetPasswordEmail','resetTokenValidityDuration','OnvCn','.\x0a\x0a','length','emailVerifyTokenValidityDuration','1296245KrHNpD','setEmailVerifyToken','8049MzEWBH','noRus','KxRPI','MaKfH','Vmsug','execute','OHhBY','auth','jLPrJ','The\x20password\x20reset\x20link\x20has\x20expired','OsKzD','dhjuv','validateAdapter','token=','?link=','message','unlockAccount','_perishable_token','resendVerificationEmail','moBDb','\x20(your\x20username\x20is\x20\x27','sendVerificationEmail','747hygciz','generateEmailVerifyTokenExpiresAt','_email_verify_token_expires_at','pfsLF','reject','PkAvZ','RCLag','requestResetPasswordURL','zpPHA','kdAgZ','_User','catch','Method','Date','eVlWU','Please\x20verify\x20your\x20e-mail\x20for\x20','database','setPasswordResetToken','sendMail','maintenance','appName','cFIcy','VdQus','LKqrl','__type'];_0x3a87=function(){return _0x4602d4;};return _0x3a87();}import _0xa3d1aa from'../Adapters/Email/MailAdapter';import _0x30c2b8 from'../rest';function _0x4167(_0x5de977,_0x2f378a){const _0x3a87b2=_0x3a87();return _0x4167=function(_0x4167cd,_0x10b6a6){_0x4167cd=_0x4167cd-0xea;let _0x24ea26=_0x3a87b2[_0x4167cd];return _0x24ea26;},_0x4167(_0x5de977,_0x2f378a);}import _0x4d842e from'parse/node';import _0x3bd165 from'../AccountLockout';import _0x51e5be from'../Config';var RestQuery=require(_0x277f87(0x10a)),Auth=require(_0x277f87(0x127));export class UserController extends _0x361321{constructor(_0x5a04b7,_0x26ced0,_0x1ad45e={}){super(_0x5a04b7,_0x26ced0,_0x1ad45e);}get['config'](){const _0x5a2cb7=_0x277f87;return _0x51e5be[_0x5a2cb7(0x174)](this[_0x5a2cb7(0x16f)]);}['validateAdapter'](_0x320d52){const _0x3cacd3=_0x277f87,_0x1eace8={'WJTjr':function(_0x92e84c,_0x1ba502){return _0x92e84c===_0x1ba502;},'znsok':_0x3cacd3(0x156)};if(!_0x320d52&&!this['shouldVerifyEmails']){if(_0x1eace8[_0x3cacd3(0xef)](_0x3cacd3(0x156),_0x1eace8[_0x3cacd3(0x121)]))return;else _0x4ab476[_0x3cacd3(0x155)]=_0x38fc71[_0x3cacd3(0x105)](this['config']['generateEmailVerifyTokenExpiresAt']());}super[_0x3cacd3(0x149)](_0x320d52);}[_0x277f87(0x11b)](){return _0xa3d1aa;}get['shouldVerifyEmails'](){const _0x591df1=_0x277f87;return(this[_0x591df1(0xf1)]||this[_0x591df1(0x123)])[_0x591df1(0x181)];}async[_0x277f87(0x13c)](_0x32f6f9,_0x16b85a,_0x571c35={}){const _0x40d79a=_0x277f87,_0x1e5414={'xYYPn':function(_0x4bd217,_0x165fe7){return _0x4bd217===_0x165fe7;},'yzKyi':_0x40d79a(0x173),'noRus':'emailVerified'},_0x2101a6=_0x1e5414['xYYPn'](this['shouldVerifyEmails'],!![])||typeof this[_0x40d79a(0xee)]===_0x1e5414['yzKyi']&&await Promise['resolve'](this[_0x40d79a(0xee)](_0x16b85a))===!![];if(!_0x2101a6)return![];return _0x571c35['sendVerificationEmail']=!![],_0x32f6f9[_0x40d79a(0x10c)]=randomString(0x19),(!_0x571c35[_0x40d79a(0x11d)]||!_0x571c35[_0x40d79a(0x11d)][_0x40d79a(0x100)](_0x1e5414[_0x40d79a(0x13e)]))&&(_0x32f6f9[_0x40d79a(0xf0)]=![]),this['config'][_0x40d79a(0x13a)]&&(_0x32f6f9[_0x40d79a(0x155)]=_0x4d842e['_encode'](this[_0x40d79a(0xf1)][_0x40d79a(0x154)]())),!![];}async['verifyEmail'](_0x1c6816,_0x233d5f){const _0x5030b2=_0x277f87,_0x32594b={'MyNlV':_0x5030b2(0x160),'EixYC':function(_0x4125b4,_0x561fcf){return _0x4125b4<_0x561fcf;},'BveJw':_0x5030b2(0x146),'tabin':function(_0x255dd0,_0x6fb925){return _0x255dd0!==_0x6fb925;},'rOSLw':_0x5030b2(0x15c),'PfTuF':_0x5030b2(0x109),'UpBsf':function(_0x4f5042,_0x3b5c52){return _0x4f5042(_0x3b5c52);}};if(!this['shouldVerifyEmails'])throw undefined;const _0x18255f={'username':_0x1c6816,'_email_verify_token':_0x233d5f},_0xc62d84={'emailVerified':!![],'_email_verify_token':{'__op':_0x5030b2(0x109)}};if(this['config'][_0x5030b2(0x13a)]){if(_0x32594b['tabin'](_0x5030b2(0x15c),_0x32594b[_0x5030b2(0xf2)])){let _0x34497c=_0x574144[0x0]['_perishable_token_expires_at'];_0x34497c&&_0x34497c[_0x5030b2(0x16b)]==_0x32594b['MyNlV']&&(_0x34497c=new _0x37512c(_0x34497c[_0x5030b2(0x118)]));if(_0x32594b[_0x5030b2(0x12f)](_0x34497c,new _0x2c96a6()))throw _0x32594b[_0x5030b2(0x112)];}else _0x18255f['emailVerified']=![],_0x18255f[_0x5030b2(0x155)]={'$gt':_0x4d842e[_0x5030b2(0x105)](new Date())},_0xc62d84[_0x5030b2(0x155)]={'__op':_0x32594b[_0x5030b2(0x133)]};}const _0x3b0303=Auth[_0x5030b2(0x166)](this[_0x5030b2(0xf1)]);var _0x4191d2=await _0x32594b[_0x5030b2(0xf3)](RestQuery,{'method':RestQuery[_0x5030b2(0x15f)]['get'],'config':this['config'],'auth':_0x3b0303,'className':'_User','restWhere':{'username':_0x1c6816}});return _0x4191d2['execute']()['then'](_0x253aa7=>{const _0x53aea7=_0x5030b2;if(_0x253aa7[_0x53aea7(0x17a)][_0x53aea7(0x139)]&&_0x253aa7['results'][0x0][_0x53aea7(0xf0)])return Promise[_0x53aea7(0xfb)](_0x253aa7[_0x53aea7(0x17a)]['length'][0x0]);else _0x253aa7[_0x53aea7(0x17a)][_0x53aea7(0x139)]&&(_0x18255f[_0x53aea7(0xea)]=_0x253aa7[_0x53aea7(0x17a)][0x0][_0x53aea7(0xea)]);return _0x30c2b8[_0x53aea7(0x171)](this[_0x53aea7(0xf1)],_0x3b0303,_0x53aea7(0x15d),_0x18255f,_0xc62d84);});}[_0x277f87(0x113)](_0x5a79f8,_0x4397f9){const _0x2388a3=_0x277f87,_0x398b2b={'OsKzD':function(_0x378050,_0x23d6d5){return _0x378050!=_0x23d6d5;},'vUHlP':'Failed\x20to\x20reset\x20password:\x20username\x20/\x20email\x20/\x20token\x20is\x20invalid','moBDb':function(_0x2cd533,_0x39931e){return _0x2cd533==_0x39931e;},'hwpNU':function(_0x4c9bdf,_0x3b3e75){return _0x4c9bdf!==_0x3b3e75;},'itnJr':_0x2388a3(0x125),'LKqrl':'_User'};return this[_0x2388a3(0xf1)][_0x2388a3(0x163)]['find'](_0x398b2b[_0x2388a3(0x16a)],{'username':_0x5a79f8,'_perishable_token':_0x4397f9},{'limit':0x1},Auth[_0x2388a3(0x166)](this[_0x2388a3(0xf1)]))[_0x2388a3(0x129)](_0x4a116e=>{const _0x5999ec=_0x2388a3;if(_0x398b2b[_0x5999ec(0x147)](_0x4a116e[_0x5999ec(0x139)],0x1))throw _0x398b2b['vUHlP'];if(this[_0x5999ec(0xf1)]['passwordPolicy']&&this[_0x5999ec(0xf1)][_0x5999ec(0xf4)][_0x5999ec(0x136)]){let _0x52be4d=_0x4a116e[0x0][_0x5999ec(0x16e)];_0x52be4d&&_0x398b2b[_0x5999ec(0x150)](_0x52be4d[_0x5999ec(0x16b)],_0x5999ec(0x160))&&(_0x52be4d=new Date(_0x52be4d[_0x5999ec(0x118)]));if(_0x52be4d<new Date()){if(_0x398b2b[_0x5999ec(0x117)](_0x398b2b[_0x5999ec(0xfc)],_0x398b2b['itnJr']))return;else throw _0x5999ec(0x146);}}return _0x4a116e[0x0];});}async['getUserIfNeeded'](_0x9f94f0){const _0x170a3a=_0x277f87,_0x1e7007={'MHejf':function(_0x8d0fb4,_0x49f9b4){return _0x8d0fb4!==_0x49f9b4;},'KxRPI':_0x170a3a(0x183),'kKitU':'AKGVL'};var _0x164d69={};_0x9f94f0[_0x170a3a(0x177)]&&(_0x164d69[_0x170a3a(0x177)]=_0x9f94f0['username']);if(_0x9f94f0[_0x170a3a(0x170)]){if(_0x1e7007[_0x170a3a(0xed)](_0x1e7007[_0x170a3a(0x13f)],_0x1e7007['kKitU']))_0x164d69[_0x170a3a(0x170)]=_0x9f94f0[_0x170a3a(0x170)];else return _0x41a2de[_0x170a3a(0x157)](_0x207ab6);}var _0x27dea1=await RestQuery({'method':RestQuery['Method'][_0x170a3a(0x174)],'config':this[_0x170a3a(0xf1)],'runBeforeFind':![],'auth':Auth[_0x170a3a(0x116)](this[_0x170a3a(0xf1)]),'className':_0x170a3a(0x15d),'restWhere':_0x164d69});const _0x36b54b=await _0x27dea1[_0x170a3a(0x142)]();if(_0x36b54b[_0x170a3a(0x17a)]['length']!=0x1)throw undefined;return _0x36b54b[_0x170a3a(0x17a)][0x0];}async['sendVerificationEmail'](_0x48d3e9,_0x49b212){const _0x419b03=_0x277f87,_0x57159d={'AEoKz':function(_0x24d886,_0x254b6b){return _0x24d886(_0x254b6b);},'Ftywz':function(_0x65c86b,_0x29fe6a){return _0x65c86b===_0x29fe6a;},'bFAfy':function(_0x3cb33a,_0x27a465){return _0x3cb33a===_0x27a465;},'tWbDl':_0x419b03(0x182),'KETnM':function(_0xe2af62,_0x392663,_0x21d601,_0x24e37e,_0x249c7f){return _0xe2af62(_0x392663,_0x21d601,_0x24e37e,_0x249c7f);},'mktEu':function(_0x7dca9d,_0x208f23){return _0x7dca9d===_0x208f23;},'ESGev':_0x419b03(0xf6)};if(!this[_0x419b03(0xee)])return;const _0x4beae7=encodeURIComponent(_0x48d3e9['_email_verify_token']),_0x1ec6bd=await this[_0x419b03(0xfe)](_0x48d3e9);let _0x2a7bfd=this[_0x419b03(0xf1)]['sendUserEmailVerification'];if(_0x57159d[_0x419b03(0x16c)](typeof _0x2a7bfd,_0x419b03(0x173))){const _0x164a40=await Promise[_0x419b03(0xfb)](this[_0x419b03(0xf1)]['sendUserEmailVerification']({'user':_0x4d842e['Object'][_0x419b03(0x10d)]({'className':_0x419b03(0x15d),..._0x1ec6bd}),'master':_0x49b212[_0x419b03(0x144)]?.['isMaster']}));_0x2a7bfd=!!_0x164a40;}if(!_0x2a7bfd){if(_0x57159d[_0x419b03(0x12a)](_0x57159d[_0x419b03(0x114)],_0x57159d[_0x419b03(0x114)]))return;else throw'Failed\x20to\x20reset\x20password:\x20username\x20/\x20email\x20/\x20token\x20is\x20invalid';}const _0x4e598d=_0x57159d[_0x419b03(0x10b)](encodeURIComponent,_0x1ec6bd[_0x419b03(0x177)]),_0xf52e58=_0x57159d[_0x419b03(0x10e)](buildEmailLink,this[_0x419b03(0xf1)][_0x419b03(0x122)],_0x4e598d,_0x4beae7,this[_0x419b03(0xf1)]),_0x134c60={'appName':this[_0x419b03(0xf1)][_0x419b03(0x167)],'link':_0xf52e58,'user':inflate(_0x419b03(0x15d),_0x1ec6bd)};if(this[_0x419b03(0x11e)][_0x419b03(0x152)]){if(_0x419b03(0x168)!==_0x419b03(0x132))this[_0x419b03(0x11e)][_0x419b03(0x152)](_0x134c60);else{const _0x3af0e3={'_perishable_token':_0x57159d[_0x419b03(0x10b)](_0x1a593a,0x19)};return this[_0x419b03(0xf1)][_0x419b03(0xf4)]&&this['config'][_0x419b03(0xf4)][_0x419b03(0x136)]&&(_0x3af0e3[_0x419b03(0x16e)]=_0x4fcf91['_encode'](this['config'][_0x419b03(0x101)]())),this[_0x419b03(0xf1)][_0x419b03(0x163)]['update'](_0x419b03(0x15d),{'$or':[{'email':_0x5e5646},{'username':_0x131f7f,'email':{'$exists':![]}}]},_0x3af0e3,{},!![]);}}else{if(_0x57159d[_0x419b03(0x184)](_0x57159d[_0x419b03(0x124)],_0x419b03(0xf6)))this[_0x419b03(0x11e)]['sendMail'](this[_0x419b03(0x108)](_0x134c60));else{if(_0x21c924[_0x419b03(0x17a)][_0x419b03(0x139)]&&_0x41a25a['results'][0x0][_0x419b03(0xf0)])return _0x4b4577[_0x419b03(0xfb)](_0x2b8f02[_0x419b03(0x17a)]['length'][0x0]);else _0x355af8['results'][_0x419b03(0x139)]&&(_0x20c2a5['objectId']=_0x578730['results'][0x0][_0x419b03(0xea)]);return _0x4f756b['update'](this[_0x419b03(0xf1)],_0x85a4ed,_0x419b03(0x15d),_0x366210,_0x41597c);}}}async['regenerateEmailVerifyToken'](_0x2cc251,_0x28b711,_0x527981,_0x566a8e){const _0x40e72f=_0x277f87,_0x32d5c1={'MgbeL':function(_0x227319,_0x4aa1b3){return _0x227319===_0x4aa1b3;}},{_email_verify_token:_0x23f5ec}=_0x2cc251;let {_email_verify_token_expires_at:_0x3b9460}=_0x2cc251;_0x3b9460&&_0x32d5c1['MgbeL'](_0x3b9460[_0x40e72f(0x16b)],_0x40e72f(0x160))&&(_0x3b9460=_0x3b9460['iso']);if(this[_0x40e72f(0xf1)]['emailVerifyTokenReuseIfValid']&&this['config']['emailVerifyTokenValidityDuration']&&_0x23f5ec&&new Date()<new Date(_0x3b9460))return Promise[_0x40e72f(0xfb)](!![]);const _0x5ad26e=await this['setEmailVerifyToken'](_0x2cc251,{'object':_0x4d842e['User'][_0x40e72f(0x10d)](Object[_0x40e72f(0x11a)]({'className':_0x40e72f(0x15d)},_0x2cc251)),'master':_0x28b711,'installationId':_0x527981,'ip':_0x566a8e,'resendRequest':!![]});if(!_0x5ad26e)return;return this[_0x40e72f(0xf1)][_0x40e72f(0x163)][_0x40e72f(0x171)](_0x40e72f(0x15d),{'username':_0x2cc251['username']},_0x2cc251);}async[_0x277f87(0x14f)](_0xc93427,_0x4262a3){const _0x495517=_0x277f87,_0xfd62d1=await this['getUserIfNeeded']({'username':_0xc93427});if(!_0xfd62d1||_0xfd62d1[_0x495517(0xf0)])throw undefined;const _0x356c13=await this[_0x495517(0x178)](_0xfd62d1,_0x4262a3[_0x495517(0x144)]?.['isMaster'],_0x4262a3['auth']?.['installationId'],_0x4262a3['ip']);_0x356c13&&this[_0x495517(0x152)](_0xfd62d1,_0x4262a3);}[_0x277f87(0x164)](_0x1d03e3){const _0x5e2f50=_0x277f87,_0x3e36b1={'JjfLa':function(_0xe8cdc8,_0x1d5756){return _0xe8cdc8(_0x1d5756);},'uCWyR':_0x5e2f50(0x15d)},_0x57ece2={'_perishable_token':_0x3e36b1['JjfLa'](randomString,0x19)};return this['config']['passwordPolicy']&&this[_0x5e2f50(0xf1)][_0x5e2f50(0xf4)]['resetTokenValidityDuration']&&(_0x57ece2[_0x5e2f50(0x16e)]=_0x4d842e['_encode'](this[_0x5e2f50(0xf1)][_0x5e2f50(0x101)]())),this[_0x5e2f50(0xf1)][_0x5e2f50(0x163)][_0x5e2f50(0x171)](_0x3e36b1[_0x5e2f50(0x179)],{'$or':[{'email':_0x1d03e3},{'username':_0x1d03e3,'email':{'$exists':![]}}]},_0x57ece2,{},!![]);}async[_0x277f87(0x12b)](_0x18bdd9){const _0xee6514=_0x277f87,_0x4a6ced={'OHhBY':function(_0x48af95,_0x410e99){return _0x48af95+_0x410e99;},'lyMfo':function(_0x1e813f,_0x249043){return _0x1e813f+_0x249043;},'QfCTE':'Hi,\x0a\x0a','nUaoc':_0xee6514(0x170),'EFYoQ':_0xee6514(0x162),'OnvCn':'Trying\x20to\x20send\x20a\x20reset\x20password\x20but\x20no\x20adapter\x20is\x20set','dVXZM':_0xee6514(0x15d),'eVlWU':function(_0x2c1118,_0x385177){return _0x2c1118==_0x385177;},'TzfNg':'Date','wdUiT':function(_0x4e0db3,_0x236ec7){return _0x4e0db3>_0x236ec7;},'VdQus':function(_0x48f556,_0x1d85c0){return _0x48f556(_0x1d85c0);},'yyltU':function(_0x2d3059,_0x152457){return _0x2d3059(_0x152457);},'JODnQ':function(_0x2b6df4,_0x4b3b3d,_0x346e0d,_0x3f1188,_0x240029){return _0x2b6df4(_0x4b3b3d,_0x346e0d,_0x3f1188,_0x240029);},'sACxQ':function(_0x367bc9,_0x534d0c,_0x387f2b){return _0x367bc9(_0x534d0c,_0x387f2b);},'jSgXs':function(_0xeee9a6,_0x4ad0b7){return _0xeee9a6===_0x4ad0b7;},'MdOeP':_0xee6514(0x148)};if(!this[_0xee6514(0x11e)])throw _0x4a6ced[_0xee6514(0x137)];let _0x401d3c;if(this[_0xee6514(0xf1)][_0xee6514(0xf4)]&&this[_0xee6514(0xf1)][_0xee6514(0xf4)]['resetTokenReuseIfValid']&&this['config'][_0xee6514(0xf4)][_0xee6514(0x136)]){const _0x53f7d3=await this[_0xee6514(0xf1)][_0xee6514(0x163)]['find'](_0x4a6ced[_0xee6514(0x131)],{'$or':[{'email':_0x18bdd9,'_perishable_token':{'$exists':!![]}},{'username':_0x18bdd9,'email':{'$exists':![]},'_perishable_token':{'$exists':!![]}}]},{'limit':0x1},Auth[_0xee6514(0x166)](this[_0xee6514(0xf1)]));if(_0x4a6ced[_0xee6514(0x161)](_0x53f7d3[_0xee6514(0x139)],0x1)){let _0x26cef4=_0x53f7d3[0x0][_0xee6514(0x16e)];_0x26cef4&&_0x4a6ced['eVlWU'](_0x26cef4[_0xee6514(0x16b)],_0x4a6ced['TzfNg'])&&(_0x26cef4=new Date(_0x26cef4[_0xee6514(0x118)])),_0x4a6ced[_0xee6514(0x175)](_0x26cef4,new Date())&&(_0x401d3c=_0x53f7d3[0x0]);}}(!_0x401d3c||!_0x401d3c[_0xee6514(0x14e)])&&(_0x401d3c=await this[_0xee6514(0x164)](_0x18bdd9));const _0x437af4=_0x4a6ced[_0xee6514(0x169)](encodeURIComponent,_0x401d3c[_0xee6514(0x14e)]),_0x2e0535=_0x4a6ced[_0xee6514(0x107)](encodeURIComponent,_0x401d3c[_0xee6514(0x177)]),_0x5d371f=_0x4a6ced['JODnQ'](buildEmailLink,this['config'][_0xee6514(0x15a)],_0x2e0535,_0x437af4,this[_0xee6514(0xf1)]),_0x5202a2={'appName':this[_0xee6514(0xf1)]['appName'],'link':_0x5d371f,'user':_0x4a6ced[_0xee6514(0x12d)](inflate,_0x4a6ced[_0xee6514(0x131)],_0x401d3c)};if(this[_0xee6514(0x11e)][_0xee6514(0x12b)]){if(_0x4a6ced[_0xee6514(0x17e)](_0x4a6ced[_0xee6514(0x16d)],_0x4a6ced[_0xee6514(0x16d)]))this[_0xee6514(0x11e)][_0xee6514(0x12b)](_0x5202a2);else{const _0x24c9f1=_0x4a6ced['OHhBY'](_0x4a6ced[_0xee6514(0x143)](_0x4a6ced['lyMfo'](_0x4a6ced[_0xee6514(0x17d)](_0x4a6ced[_0xee6514(0x10f)]+'You\x20are\x20being\x20asked\x20to\x20confirm\x20the\x20e-mail\x20address\x20'+_0x3ac842['get'](_0x4a6ced['nUaoc']),_0xee6514(0x104)),_0x14712d)+'\x0a\x0a'+'',_0xee6514(0x120)),_0x1247d3),_0x2cd889=_0x512f65['get'](_0xee6514(0x170)),_0x3d17e2=_0x4a6ced[_0xee6514(0x12c)]+_0x34ccf1;return{'text':_0x24c9f1,'to':_0x2cd889,'subject':_0x3d17e2};}}else this[_0xee6514(0x11e)][_0xee6514(0x165)](this[_0xee6514(0x135)](_0x5202a2));return Promise[_0xee6514(0xfb)](_0x401d3c);}[_0x277f87(0x128)](_0x45eef5,_0x5a5d3e,_0x5579a1){const _0x3133b5=_0x277f87;return this['checkResetTokenValidity'](_0x45eef5,_0x5a5d3e)[_0x3133b5(0x129)](_0x48825d=>updateUserPassword(_0x48825d,_0x5579a1,this[_0x3133b5(0xf1)]))[_0x3133b5(0x129)](_0x528e14=>{const _0x74a53e=_0x3133b5,_0x442643=new _0x3bd165(_0x528e14,this['config']);return _0x442643[_0x74a53e(0x14d)]();})[_0x3133b5(0x15e)](_0x3c26db=>{const _0x20fc1a=_0x3133b5;return _0x3c26db&&_0x3c26db[_0x20fc1a(0x14c)]?Promise['reject'](_0x3c26db[_0x20fc1a(0x14c)]):Promise[_0x20fc1a(0x157)](_0x3c26db);});}[_0x277f87(0x108)]({link:_0x1d4109,user:_0x7d29a9,appName:_0x23d6e5}){const _0x5dd19c=_0x277f87,_0x4a4c4f={'sLWFp':function(_0x1988c5,_0x16d81b){return _0x1988c5+_0x16d81b;},'ftnsH':function(_0x2083d0,_0x4126de){return _0x2083d0+_0x4126de;},'WCULp':function(_0x46ee0b,_0x176753){return _0x46ee0b+_0x176753;},'zgvuO':function(_0x187743,_0x2f5881){return _0x187743+_0x2f5881;},'cyzSu':_0x5dd19c(0xf9),'RCLag':'email','PkAvZ':'Please\x20verify\x20your\x20e-mail\x20for\x20'},_0x4fa688=_0x4a4c4f['sLWFp'](_0x4a4c4f[_0x5dd19c(0xec)](_0x4a4c4f['ftnsH'](_0x4a4c4f[_0x5dd19c(0x17b)](_0x4a4c4f[_0x5dd19c(0x106)](_0x4a4c4f[_0x5dd19c(0x172)](_0x5dd19c(0x102),_0x4a4c4f[_0x5dd19c(0x115)]),_0x7d29a9[_0x5dd19c(0x174)](_0x4a4c4f['RCLag'])),_0x5dd19c(0x104)),_0x23d6e5)+'\x0a\x0a',''),_0x5dd19c(0x120))+_0x1d4109,_0x2f5817=_0x7d29a9[_0x5dd19c(0x174)](_0x4a4c4f[_0x5dd19c(0x159)]),_0x3e9cd6=_0x4a4c4f[_0x5dd19c(0x158)]+_0x23d6e5;return{'text':_0x4fa688,'to':_0x2f5817,'subject':_0x3e9cd6};}[_0x277f87(0x135)]({link:_0x5df5a6,user:_0x3d6af4,appName:_0x555bd4}){const _0x1c0c9a=_0x277f87,_0x2c32ea={'ypscp':function(_0x35f5d2,_0x36ff7d){return _0x35f5d2+_0x36ff7d;},'uNSXU':function(_0x33092b,_0x3b0d40){return _0x33092b+_0x3b0d40;},'xrBtk':'Hi,\x0a\x0a','zpPHA':'You\x20requested\x20to\x20reset\x20your\x20password\x20for\x20','Vmsug':_0x1c0c9a(0x177),'MaKfH':_0x1c0c9a(0x151),'DlGki':_0x1c0c9a(0x138),'dfJiS':_0x1c0c9a(0x11f),'jLPrJ':function(_0x181d9f,_0x4b73cb){return _0x181d9f+_0x4b73cb;}},_0x55dc3f=_0x2c32ea[_0x1c0c9a(0x11c)](_0x2c32ea[_0x1c0c9a(0x11c)](_0x2c32ea[_0x1c0c9a(0x17f)](_0x2c32ea[_0x1c0c9a(0x176)]+_0x2c32ea[_0x1c0c9a(0x15b)],_0x555bd4),_0x3d6af4[_0x1c0c9a(0x174)](_0x2c32ea[_0x1c0c9a(0x141)])?_0x2c32ea[_0x1c0c9a(0x140)]+_0x3d6af4[_0x1c0c9a(0x174)](_0x1c0c9a(0x177))+'\x27)':'')+_0x2c32ea[_0x1c0c9a(0x111)]+'',_0x2c32ea['dfJiS'])+_0x5df5a6,_0x2ceb43=_0x3d6af4['get'](_0x1c0c9a(0x170))||_0x3d6af4['get'](_0x2c32ea['Vmsug']),_0x1c9f09=_0x2c32ea[_0x1c0c9a(0x145)](_0x1c0c9a(0xfa),_0x555bd4);return{'text':_0x55dc3f,'to':_0x2ceb43,'subject':_0x1c9f09};}}function updateUserPassword(_0x211d79,_0x41014e,_0x58a036){const _0x14722d=_0x277f87;return _0x30c2b8[_0x14722d(0x171)](_0x58a036,Auth[_0x14722d(0x116)](_0x58a036),_0x14722d(0x15d),{'objectId':_0x211d79[_0x14722d(0xea)]},{'password':_0x41014e})[_0x14722d(0x129)](()=>_0x211d79);}function buildEmailLink(_0x24259c,_0x78db6e,_0x4b0c0c,_0x53649b){const _0x40ffd8=_0x277f87,_0x3cc92b={'iJEHQ':function(_0x5129e6,_0x57f9bf){return _0x5129e6(_0x57f9bf);},'IvxhZ':function(_0x3a5fcd,_0x2c6db8){return _0x3a5fcd!==_0x2c6db8;},'gzcqr':_0x40ffd8(0x17c)},_0x335360=_0x40ffd8(0x14a)+_0x4b0c0c+_0x40ffd8(0x180)+_0x78db6e;if(_0x53649b[_0x40ffd8(0x130)]){const _0x4aade2=_0x24259c[_0x40ffd8(0x110)](_0x53649b[_0x40ffd8(0x103)],'');return _0x53649b[_0x40ffd8(0x130)]+_0x40ffd8(0x14b)+_0x3cc92b['iJEHQ'](encodeURIComponent,_0x4aade2)+'&'+_0x335360;}else{if(_0x3cc92b[_0x40ffd8(0x134)](_0x3cc92b[_0x40ffd8(0x126)],_0x40ffd8(0x17c)))_0xa1690c[_0x40ffd8(0xf0)]=![];else return _0x24259c+'?'+_0x335360;}}export default UserController;