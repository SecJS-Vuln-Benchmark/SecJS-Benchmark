const _0x694ae1=_0x2061;(function(_0x48c24e,_0x3c85bf){const _0x2faa6e=_0x2061,_0x575fe9=_0x48c24e();while(!![]){try{const _0x158687=parseInt(_0x2faa6e(0x10e))/0x1*(parseInt(_0x2faa6e(0x114))/0x2)+parseInt(_0x2faa6e(0x115))/0x3+parseInt(_0x2faa6e(0x135))/0x4*(-parseInt(_0x2faa6e(0x12b))/0x5)+-parseInt(_0x2faa6e(0x113))/0x6*(-parseInt(_0x2faa6e(0x14f))/0x7)+-parseInt(_0x2faa6e(0x110))/0x8*(parseInt(_0x2faa6e(0x112))/0x9)+parseInt(_0x2faa6e(0x146))/0xa+-parseInt(_0x2faa6e(0x13e))/0xb;if(_0x158687===_0x3c85bf)break;else _0x575fe9['push'](_0x575fe9['shift']());}catch(_0x46cb3a){_0x575fe9['push'](_0x575fe9['shift']());}}}(_0x5501,0xed4de));function _0x2061(_0x9ada49,_0x21225a){const _0x55014c=_0x5501();return _0x2061=function(_0x2061db,_0xaf3f8f){_0x2061db=_0x2061db-0x10e;let _0x282748=_0x55014c[_0x2061db];return _0x282748;},_0x2061(_0x9ada49,_0x21225a);}const toml=require(_0x694ae1(0x145)),os=require('os'),fs=require('fs'),{validateOnlyUserReadWritePermissionAndOwner,generateChecksum}=require('../file_util'),path=require(_0x694ae1(0x14a)),Logger=require(_0x694ae1(0x153)),AuthenticationTypes=require(_0x694ae1(0x141)),Util=require('../util');function defaultIfNotSet(_0x4417d3,_0x1bfa3a){const _0x16a554=_0x694ae1,_0x53dab9={'jeFeE':function(_0x1e5cb1,_0x4acde4){return _0x1e5cb1===_0x4acde4;},'fWnhy':_0x16a554(0x133),'aarCy':'VOLDU'};return _0x4417d3===null||_0x53dab9['jeFeE'](typeof _0x4417d3,_0x53dab9[_0x16a554(0x130)])||_0x53dab9[_0x16a554(0x138)](_0x4417d3,'')?_0x53dab9[_0x16a554(0x138)](_0x16a554(0x122),_0x53dab9[_0x16a554(0x13c)])?_0x33a5e9:_0x1bfa3a:_0x4417d3;}function _0x5501(){const _0x18fb2d=['user','dDOni','../authentication/authentication_types','utf-8','parse','trace','toml','14381580fRQtLt','OPaTI','Loading\x20connection\x20configuration\x20from\x20the\x20local\x20files...','FpfxB','path','SNOWFLAKE_HOME','homedir','username','The\x20token\x20does\x20not\x20exist\x20or\x20has\x20empty\x20value','6013UKXDRY','.snowflake','ZJDiB','XRkce','../logger','SNOWFLAKE_DEFAULT_CONNECTION_NAME','6774qULkBH','aQynI','4456128QHSzoB','KRuMm','27wRlFDy','5178tjfRcU','510iGaCai','4372509QPRvjl','env','tlkwr','token','The\x20token\x20does\x20not\x20exist\x20or\x20has\x20empty\x20value.','isNotNullOrEmpty','string','Trying\x20to\x20read\x20token\x20from\x20config\x20file.','getInstance','toUpperCase','PQojc','OAUTH_AUTHENTICATOR','Empty\x20Username\x20field\x20will\x20be\x20filled\x20with\x20\x27User\x27\x20field\x20value.','MUSZP','loadConnectionConfiguration','YKdfw','GkjZm','error','/snowflake/session/token','join','LUyis','info','97105RspFgp','ibzpe','\x20does\x20not\x20exist','trim','Trying\x20to\x20parse\x20the\x20config\x20file','fWnhy','Token\x20used\x20in\x20connection\x20has\x20been\x20read\x20from\x20file:\x20%s.\x20Checksum:\x20%s','DuoWK','undefined','readFileSync','108BdZIXJ','realpathSync','connections.toml','jeFeE','lmIYR','token_file_path','rtTAZ','aarCy','Connection\x20configuration\x20with\x20name\x20%s\x20does\x20not\x20exist\x20in\x20the\x20file\x20%s','24166285LSdXSV'];_0x5501=function(){return _0x18fb2d;};return _0x5501();}function shouldReadTokenFromFile(_0x532663){const _0x1ac785=_0x694ae1,_0x3683ad={'tlkwr':function(_0x37370c,_0x31798d){return _0x37370c===_0x31798d;}};return _0x532663&&_0x532663['authenticator']&&_0x3683ad[_0x1ac785(0x117)](_0x532663['authenticator'][_0x1ac785(0x11e)](),AuthenticationTypes[_0x1ac785(0x120)])&&!Util[_0x1ac785(0x11b)][_0x1ac785(0x11a)](_0x532663['token']);}function readTokenFromFile(_0x38eb57){const _0x5aa084=_0x694ae1,_0x3780ab={'ZJDiB':'Token\x20file\x20path\x20is\x20:\x20%s','FpfxB':_0x5aa084(0x142),'lmIYR':_0x5aa084(0x14e),'OPaTI':function(_0x83e325,_0xe58837){return _0x83e325(_0xe58837);},'bshZe':_0x5aa084(0x131)},_0xfac643=_0x38eb57[_0x5aa084(0x13a)]?_0x38eb57[_0x5aa084(0x13a)]:_0x5aa084(0x127),_0xcef7b3=fs[_0x5aa084(0x136)](_0xfac643);Logger['getInstance']()[_0x5aa084(0x144)](_0x3780ab[_0x5aa084(0x151)],_0xfac643),validateOnlyUserReadWritePermissionAndOwner(_0xcef7b3),_0x38eb57['token']=fs[_0x5aa084(0x134)](_0xcef7b3,_0x3780ab[_0x5aa084(0x149)])[_0x5aa084(0x12e)]();if(!_0x38eb57[_0x5aa084(0x118)]){Logger[_0x5aa084(0x11d)]()['error'](_0x5aa084(0x119));throw new Error(_0x3780ab[_0x5aa084(0x139)]);}const _0x2cb696=_0x3780ab[_0x5aa084(0x147)](generateChecksum,_0x38eb57[_0x5aa084(0x118)]);Logger[_0x5aa084(0x11d)]()[_0x5aa084(0x12a)](_0x3780ab['bshZe'],_0xcef7b3,_0x2cb696);}function loadConnectionConfiguration(){const _0x1afc01=_0x694ae1,_0x42fb91={'ibzpe':_0x1afc01(0x148),'DuoWK':_0x1afc01(0x150),'KRuMm':'utf8','tSIux':'Connection\x20configuration\x20file\x20is\x20read\x20from\x20path:\x20%s.\x20Checksum:\x20%s','PQojc':function(_0x2f53e4,_0x3f9476,_0x2ecfe1){return _0x2f53e4(_0x3f9476,_0x2ecfe1);},'LUyis':function(_0x1987cd,_0x584a58){return _0x1987cd!==_0x584a58;},'dDOni':function(_0x11a22f,_0x16fad7){return _0x11a22f(_0x16fad7);},'GkjZm':'Trying\x20to\x20read\x20token\x20from\x20config\x20file.','FvJdG':'NTmew','YKdfw':_0x1afc01(0x13d)};Logger[_0x1afc01(0x11d)]()[_0x1afc01(0x144)](_0x42fb91[_0x1afc01(0x12c)]);const _0x3fb35a=defaultIfNotSet(process[_0x1afc01(0x116)][_0x1afc01(0x14b)],path[_0x1afc01(0x128)](os[_0x1afc01(0x14c)](),_0x42fb91[_0x1afc01(0x132)]));Logger[_0x1afc01(0x11d)]()[_0x1afc01(0x144)]('Looking\x20for\x20connection\x20file\x20in\x20directory\x20%s',_0x3fb35a);const _0x15f120=path[_0x1afc01(0x128)](_0x3fb35a,_0x1afc01(0x137)),_0x469520=fs['realpathSync'](_0x15f120);Logger[_0x1afc01(0x11d)]()[_0x1afc01(0x144)]('Connection\x20configuration\x20file\x20found\x20under\x20the\x20path\x20%s.\x20Validating\x20file\x20access.',_0x469520),validateOnlyUserReadWritePermissionAndOwner(_0x469520);const _0x2562fa=fs[_0x1afc01(0x134)](_0x469520,{'encoding':_0x42fb91[_0x1afc01(0x111)]}),_0x4771b8=generateChecksum(_0x2562fa);Logger[_0x1afc01(0x11d)]()[_0x1afc01(0x12a)](_0x42fb91['tSIux'],_0x469520,_0x4771b8),Logger[_0x1afc01(0x11d)]()[_0x1afc01(0x144)](_0x1afc01(0x12f));const _0x785427=toml[_0x1afc01(0x143)](_0x2562fa),_0x1686da=_0x42fb91[_0x1afc01(0x11f)](defaultIfNotSet,process[_0x1afc01(0x116)][_0x1afc01(0x154)],'default');if(_0x42fb91[_0x1afc01(0x129)](_0x785427[_0x1686da],undefined)){const _0x1004a2=fixUserKey(_0x785427[_0x1686da]);return _0x42fb91[_0x1afc01(0x140)](shouldReadTokenFromFile,_0x1004a2)&&(Logger[_0x1afc01(0x11d)]()['info'](_0x42fb91[_0x1afc01(0x125)]),readTokenFromFile(_0x1004a2)),_0x1004a2;}else{if('PYQfH'===_0x42fb91['FvJdG'])_0x515e2d[_0x1afc01(0x11d)]()['info'](_0x1afc01(0x11c)),_0x492981(_0x5da575);else{Logger[_0x1afc01(0x11d)]()[_0x1afc01(0x126)](_0x42fb91[_0x1afc01(0x124)],_0x1686da,_0x469520);throw new Error('Connection\x20configuration\x20with\x20name\x20'+_0x1686da+_0x1afc01(0x12d));}}}function fixUserKey(_0x217d21){const _0x577a92=_0x694ae1,_0x172195={'rtTAZ':function(_0x2b9002,_0x5c70df){return _0x2b9002===_0x5c70df;},'XRkce':_0x577a92(0x14d),'aQynI':_0x577a92(0x13f)};return Logger['getInstance']()[_0x577a92(0x144)](_0x577a92(0x121)),_0x172195[_0x577a92(0x13b)](_0x217d21[_0x172195[_0x577a92(0x152)]],undefined)&&_0x217d21[_0x172195[_0x577a92(0x10f)]]!==undefined&&(_0x217d21['username']=_0x217d21[_0x172195[_0x577a92(0x10f)]]),_0x217d21;}exports[_0x694ae1(0x123)]=loadConnectionConfiguration;