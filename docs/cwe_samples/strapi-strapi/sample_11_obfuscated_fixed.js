function _0x1b29(_0x1535f2,_0x2fa681){const _0x234c31=_0x234c();return _0x1b29=function(_0x1b294d,_0x21a222){_0x1b294d=_0x1b294d-0x172;let _0x40976e=_0x234c31[_0x1b294d];return _0x40976e;},_0x1b29(_0x1535f2,_0x2fa681);}const _0x44847f=_0x1b29;function _0x234c(){const _0x21f1d3=['645078lnFxly','36GytlPH','adding\x20new\x20filter\x20rule','loading\x20new\x20rules','42PzjwMK','ZCoqe','rASDR','some','map','toLowerCase','length','bgOQe','path','blocked','join','dtTQT','regex','PWdwy','260YhFCcy','BJuJK','replace','1740584PnrocS','test','NQlbn','SpyNx','cYouP','slice','../log','4965024vvHDrX','path-to-regexp','44sAMRPJ','108812RjnVbm','body','../replace-vars','246508YqpjQT','../config','jnCHY','name','Expected\x20array\x20of\x20filter\x20rules,\x20got\x20\x27','PKEwG','16JbYCod','filter','parse','url','fMeol','../try-json-parse','exports','normalize','exec','any','undefsafe','info','kcZZN','1570092UYcphe','failed\x20to\x20test\x20regex\x20rule','error','looking\x20for\x20a\x20rule\x20match','eIAcQ','65UsAuJD','isArray','auth','Unable\x20to\x20parse\x20rule\x20source,\x20ignoring','get','ghADb','40370FdgKta'];_0x234c=function(){return _0x21f1d3;};return _0x234c();}(function(_0x3e1975,_0x381d65){const _0x3a68fb=_0x1b29,_0x32f0cf=_0x3e1975();while(!![]){try{const _0xbd0e29=-parseInt(_0x3a68fb(0x17c))/0x1*(-parseInt(_0x3a68fb(0x185))/0x2)+parseInt(_0x3a68fb(0x179))/0x3+-parseInt(_0x3a68fb(0x17f))/0x4*(-parseInt(_0x3a68fb(0x197))/0x5)+parseInt(_0x3a68fb(0x1a2))/0x6*(-parseInt(_0x3a68fb(0x19e))/0x7)+parseInt(_0x3a68fb(0x172))/0x8*(parseInt(_0x3a68fb(0x19f))/0x9)+-parseInt(_0x3a68fb(0x19d))/0xa*(-parseInt(_0x3a68fb(0x17b))/0xb)+-parseInt(_0x3a68fb(0x192))/0xc*(parseInt(_0x3a68fb(0x1b0))/0xd);if(_0xbd0e29===_0x381d65)break;else _0x32f0cf['push'](_0x32f0cf['shift']());}catch(_0x3ec8c7){_0x32f0cf['push'](_0x32f0cf['shift']());}}}(_0x234c,0xe839d));const minimatch=require('minimatch'),pathRegexp=require(_0x44847f(0x17a)),qs=require('qs'),path=require('path'),undefsafe=require(_0x44847f(0x18f)),replace=require(_0x44847f(0x17e)),authHeader=require('../auth-header'),tryJSONParse=require(_0x44847f(0x18a)),logger=require(_0x44847f(0x178));module[_0x44847f(0x18b)]=_0x23a3f6=>{const _0x49b703=_0x44847f,_0x5a82db={'SpyNx':function(_0xc2e976,_0x5d9e70){return _0xc2e976!==_0x5d9e70;},'rASDR':function(_0x4f77d8,_0x1bb355){return _0x4f77d8<_0x1bb355;},'jnCHY':function(_0x3e345e,_0x5ba594){return _0x3e345e-_0x5ba594;},'PKEwG':'ISsOm','FEgJZ':function(_0x541e53,_0x3670a2){return _0x541e53(_0x3670a2);},'ghADb':'xfmHE','cYouP':function(_0x10cc20,_0x4912a8){return _0x10cc20||_0x4912a8;},'kcZZN':_0x49b703(0x19b),'Khjfm':function(_0x12f77b,_0x322448){return _0x12f77b+_0x322448;},'joNUU':_0x49b703(0x1a0),'fDsFM':function(_0x21c817,_0x1df4b7){return _0x21c817(_0x1df4b7);},'PWdwy':_0x49b703(0x1ab),'BJuJK':_0x49b703(0x19a)};let _0x29212c=[];const _0x4bd4e2=require(_0x49b703(0x180));if(Array[_0x49b703(0x198)](_0x23a3f6))_0x29212c=_0x23a3f6;else{if(_0x23a3f6){if(_0x49b703(0x1a9)===_0x49b703(0x1a9))try{_0x29212c=require(_0x23a3f6);}catch(_0x48252e){logger['warn']({'ruleSource':_0x23a3f6,'error':_0x48252e},_0x5a82db[_0x49b703(0x1b1)]);}else try{const _0x4b25b3=new _0x3fa1ee(_0x3eb17a);return _0x4b25b3[_0x49b703(0x173)](_0x45a40d(_0x86ce8e,_0x306229));}catch(_0x3bf161){return _0xc505c3[_0x49b703(0x194)]({'error':_0x3bf161,'path':_0x4daf98,'regex':_0x2a9dc8},'failed\x20to\x20test\x20regex\x20rule'),![];}}}if(!Array[_0x49b703(0x198)](_0x29212c))throw new Error(_0x49b703(0x183)+typeof _0x29212c+'\x27\x20instead.');logger[_0x49b703(0x190)]({'rulesCount':_0x29212c['length']},_0x49b703(0x1a1));const _0xa455de=_0x29212c[_0x49b703(0x1a6)](_0x553896=>{const _0x22300d=_0x49b703;if(_0x5a82db[_0x22300d(0x19c)]!==_0x5a82db[_0x22300d(0x19c)])return![];else{const _0x146152=[];let {method:_0x2a6928,origin:_0x1d53ec,path:_0x585209,valid:_0xd41022,stream:_0x31ee76}=_0x553896;_0x2a6928=_0x5a82db['cYouP'](_0x2a6928,_0x5a82db[_0x22300d(0x191)])[_0x22300d(0x1a7)](),_0xd41022=_0xd41022||[];const _0x2bc31d=_0xd41022[_0x22300d(0x186)](_0x4ea0dd=>!!_0x4ea0dd[_0x22300d(0x1aa)]&&!_0x4ea0dd[_0x22300d(0x1ae)]),_0x47453e=_0xd41022['filter'](_0x1325cc=>!!_0x1325cc[_0x22300d(0x1aa)]&&!!_0x1325cc[_0x22300d(0x1ae)]),_0x37e034=_0xd41022['filter'](_0x111a6e=>!!_0x111a6e['queryParam']),_0x460922={};_0x585209=_0x5a82db[_0x22300d(0x176)](_0x585209,'')[_0x22300d(0x1b2)](/(\${.*?})/g,(_0x26cab0,_0x306c11)=>{const _0x479c2e=_0x22300d,_0x570220=_0x306c11[_0x479c2e(0x177)](0x2,-0x1);return _0x460922[_0x570220]=_0x4bd4e2[_0x570220]||'',':'+_0x570220;}),_0x1d53ec=replace(_0x1d53ec,_0x4bd4e2);_0x5a82db[_0x22300d(0x175)](_0x585209[0x0],'/')&&(_0x585209=_0x5a82db['Khjfm']('/',_0x585209));logger[_0x22300d(0x190)]({'method':_0x2a6928,'path':_0x585209},_0x5a82db['joNUU']);const _0x1c5129=pathRegexp(_0x585209,_0x146152);return _0x47b540=>{const _0x48c599=_0x22300d,_0x35a3d6={'OXogY':function(_0x1e967d,_0x2fcd26,_0x1dcefa){return _0x1e967d(_0x2fcd26,_0x1dcefa);},'eIAcQ':_0x48c599(0x1a3),'dtTQT':function(_0x40cea3,_0xeb1424,_0x45f418,_0x25fad7){return _0x40cea3(_0xeb1424,_0x45f418,_0x25fad7);}};if(_0x5a82db[_0x48c599(0x175)](_0x47b540['method'][_0x48c599(0x1a7)](),_0x2a6928)&&_0x2a6928!==_0x48c599(0x18e)){if('fMeol'!==_0x48c599(0x189))_0x155dd5=_0x223b2b||_0x2007d1(_0x11f037[_0x48c599(0x17d)]),_0x3aab19=_0x350d9f[_0x48c599(0x1a5)](({path:_0x4142bd,regex:_0x64ea20})=>{const _0x2c11c1=_0x48c599;try{const _0x24fe7e=new _0x223b57(_0x64ea20);return _0x24fe7e[_0x2c11c1(0x173)](_0x35a3d6['OXogY'](_0x4a50ef,_0x3842ff,_0x4142bd));}catch(_0x445bb8){return _0x4907a1[_0x2c11c1(0x194)]({'error':_0x445bb8,'path':_0x4142bd,'regex':_0x64ea20},_0x2c11c1(0x193)),![];}});else return![];}if(path[_0x48c599(0x18c)](_0x47b540[_0x48c599(0x188)])!==_0x47b540[_0x48c599(0x188)])return![];const _0x5a2954=_0x47b540['url']['split']('#')[0x0],_0x20df0e=_0x5a2954['split']('?');let [_0x5b3b93,_0x49cdd1]=[_0x20df0e[0x0],_0x20df0e[_0x48c599(0x177)](0x1)[_0x48c599(0x1ac)]('?')];const _0x32243c=_0x1c5129[_0x48c599(0x18d)](_0x5b3b93);if(!_0x32243c)return![];for(let _0x44fbe3=0x1;_0x5a82db[_0x48c599(0x1a4)](_0x44fbe3,_0x32243c['length']);_0x44fbe3++){if('NQlbn'!==_0x48c599(0x174))_0x4bcffa=_0x2a130c[_0x48c599(0x1b2)](_0x82cde6[_0x2fdc47],_0x2d88c5);else{const _0x39d854=_0x460922[_0x146152[_0x5a82db[_0x48c599(0x181)](_0x44fbe3,0x1)][_0x48c599(0x182)]];_0x39d854&&(_0x5b3b93=_0x5b3b93[_0x48c599(0x1b2)](_0x32243c[_0x44fbe3],_0x39d854));}}if(_0x2bc31d[_0x48c599(0x1a8)]||_0x47453e[_0x48c599(0x1a8)]||_0x37e034[_0x48c599(0x1a8)]){let _0x589876,_0x4553fd;if(_0x2bc31d[_0x48c599(0x1a8)]){if(_0x5a82db[_0x48c599(0x175)](_0x5a82db[_0x48c599(0x184)],_0x5a82db[_0x48c599(0x184)]))return![];else _0x4553fd=tryJSONParse(_0x47b540[_0x48c599(0x17d)]),_0x589876=_0x2bc31d['some'](({path:_0xc178af,value:_0x36931d})=>{const _0x54e6a7=_0x48c599;if(_0x54e6a7(0x1a3)!==_0x35a3d6[_0x54e6a7(0x196)]){const _0x5192c4=_0x5be6a3[_0x54e6a7(0x187)](_0x232a45);_0x59b08f=_0x53726c[_0x54e6a7(0x1a5)](({queryParam:_0x3dc6c6,values:_0x13e8ab})=>{return _0x13e8ab['some'](_0x733b51=>_0x4c0057(_0x5192c4[_0x3dc6c6]||'',_0x733b51));});}else return _0x35a3d6[_0x54e6a7(0x1ad)](undefsafe,_0x4553fd,_0xc178af,_0x36931d);});}!_0x589876&&_0x47453e[_0x48c599(0x1a8)]&&(_0x4553fd=_0x4553fd||_0x5a82db['FEgJZ'](tryJSONParse,_0x47b540[_0x48c599(0x17d)]),_0x589876=_0x47453e[_0x48c599(0x1a5)](({path:_0x26df4c,regex:_0xd653ff})=>{const _0x8a7ed0=_0x48c599;try{const _0x563b88=new RegExp(_0xd653ff);return _0x563b88[_0x8a7ed0(0x173)](undefsafe(_0x4553fd,_0x26df4c));}catch(_0x217aa3){return logger[_0x8a7ed0(0x194)]({'error':_0x217aa3,'path':_0x26df4c,'regex':_0xd653ff},_0x8a7ed0(0x193)),![];}}));if(!_0x589876&&_0x37e034[_0x48c599(0x1a8)]){const _0x2dbce3=qs['parse'](_0x49cdd1);_0x589876=_0x37e034[_0x48c599(0x1a5)](({queryParam:_0x1d3572,values:_0x2fef26})=>{const _0x3626eb=_0x48c599;return _0x2fef26[_0x3626eb(0x1a5)](_0x197b31=>minimatch(_0x2dbce3[_0x1d3572]||'',_0x197b31));});}if(!_0x589876)return![];}return logger['debug']({'path':_0x585209,'origin':_0x1d53ec,'url':_0x5b3b93,'querystring':_0x49cdd1},'rule\x20matched'),_0x49cdd1=_0x49cdd1?'?'+_0x49cdd1:'',{'url':_0x1d53ec+_0x5b3b93+_0x49cdd1,'auth':_0x553896[_0x48c599(0x199)]&&authHeader(_0x553896[_0x48c599(0x199)]),'stream':_0x31ee76};};}});return(_0xdcbded,_0x4bb268)=>{const _0x8e44c3=_0x49b703;let _0xcf8b5f=![];logger['debug']({'rulesCount':_0xa455de[_0x8e44c3(0x1a8)]},_0x8e44c3(0x195));for(const _0x538270 of _0xa455de){_0xcf8b5f=_0x5a82db['fDsFM'](_0x538270,_0xdcbded);if(_0xcf8b5f)break;}if(!_0xcf8b5f)return _0x4bb268(Error(_0x5a82db[_0x8e44c3(0x1af)]));return _0x4bb268(null,_0xcf8b5f);};};