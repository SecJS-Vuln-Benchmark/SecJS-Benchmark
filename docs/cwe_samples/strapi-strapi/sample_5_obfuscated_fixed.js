const _0x18bab6=_0x518f;(function(_0xb6420d,_0xdfa976){const _0x24a7d3=_0x518f,_0x24dab9=_0xb6420d();while(!![]){try{const _0x4ae85f=-parseInt(_0x24a7d3(0x1ed))/0x1*(parseInt(_0x24a7d3(0x1b1))/0x2)+parseInt(_0x24a7d3(0x1ae))/0x3*(-parseInt(_0x24a7d3(0x1e2))/0x4)+-parseInt(_0x24a7d3(0x1e6))/0x5+-parseInt(_0x24a7d3(0x1e3))/0x6*(-parseInt(_0x24a7d3(0x1f3))/0x7)+parseInt(_0x24a7d3(0x1e1))/0x8*(parseInt(_0x24a7d3(0x1a0))/0x9)+-parseInt(_0x24a7d3(0x1dc))/0xa*(-parseInt(_0x24a7d3(0x19f))/0xb)+parseInt(_0x24a7d3(0x1de))/0xc;if(_0x4ae85f===_0xdfa976)break;else _0x24dab9['push'](_0x24dab9['shift']());}catch(_0x2c2e22){_0x24dab9['push'](_0x24dab9['shift']());}}}(_0x219d,0x57abc));const crypto=require(_0x18bab6(0x1b5)),fs=require('fs'),fsPromises=require(_0x18bab6(0x1d9)),path=require(_0x18bab6(0x198)),struct=require(_0x18bab6(0x1b0)),zlib=require(_0x18bab6(0x1e7)),os=require('os'),glob=require(_0x18bab6(0x1cd)),Logger=require('./logger'),resultStatus={'ERROR':_0x18bab6(0x1f0),'UPLOADED':_0x18bab6(0x199),'DOWNLOADED':_0x18bab6(0x1c7),'COLLISION':_0x18bab6(0x1ba),'SKIPPED':_0x18bab6(0x19d),'RENEW_TOKEN':_0x18bab6(0x195),'RENEW_PRESIGNED_URL':'RENEW_PRESIGNED_URL','NOT_FOUND_FILE':'NOT_FOUND_FILE','NEED_RETRY':_0x18bab6(0x1a7),'NEED_RETRY_WITH_LOWER_CONCURRENCY':_0x18bab6(0x1e5)};exports[_0x18bab6(0x1d2)]=resultStatus;function _0x518f(_0x2a3b77,_0x5d60d6){const _0x219dfc=_0x219d();return _0x518f=function(_0x518fde,_0x46e0f8){_0x518fde=_0x518fde-0x18f;let _0x4b0845=_0x219dfc[_0x518fde];return _0x4b0845;},_0x518f(_0x2a3b77,_0x5d60d6);}function _0x219d(){const _0x36d82a=['ERROR','normalizeGzipHeader','createGzip','1428707REwjth','platform','qeZdg','statSync','validateOnlyUserReadWritePermissionAndOwner','oigRz','debug',').\x20Make\x20sure\x20the\x20system\x20user\x20are\x20the\x20owner\x20of\x20the\x20file\x20otherwise\x20please\x20remove\x20the\x20file\x20and\x20re-run\x20the\x20driver.','600','FjRnQ','update','RENEW_TOKEN','getDigestAndSizeForFile','oCqDB','path','UPLOADED','access','SAeFH','JoRRQ','SKIPPED','zAZjR','782452OFQOOf','414PhAhkg','createWriteStream','toString','afdCq','oyiKb','code','size','NEED_RETRY','witeq','_c.gz','uGqtd','urDrZ','pipe','concat','3BoJiKh','openSync','python-struct','2CqiryN','sha256','then','ddYPs','crypto','mode','F_OK','CGdNg','Invalid\x20file\x20owner\x20for\x20file\x20','COLLISION','constants','getInstance','uid','join','sync','utf8','HwJFc','rs+','qRIfx','XqQFy','vXvbs','AbtLp','DOWNLOADED','createHash','createReadStream','userInfo','BNKQN','WKmhl','glob','KtRYB','xKeIL','fs/promises','FileHeader','resultStatus','digest','basename','writeSync','Invalid\x20file\x20permissions\x20(','EEqEg','hex','node:fs/promises','isFileNotWritableByGroupOrOthers','pack','50nUHNWG','getMatchingFilePaths','2357208BNxiMV','substring','stat','61688MeZJZE','1405604HpdYml','12LYZHAa','BQOTS','NEED_RETRY_WITH_LOWER_CONCURRENCY','2111970EQCKNg','zlib','win32',',\x20Permission:\x20','Validated\x20file\x20owner','replace','RTWeJ','182107VcqFTN','base64','WUxPx'];_0x219d=function(){return _0x36d82a;};return _0x219d();}function FileHeader(_0x6ef0e5,_0x3b0d06,_0x43574b){return{'digest':_0x6ef0e5,'contentLength':_0x3b0d06,'encryptionMetadata':_0x43574b};}exports[_0x18bab6(0x1d1)]=FileHeader;function FileUtil(){const _0x271d14=_0x18bab6,_0x265228={'SAeFH':function(_0xd9b6bb,_0x5bf68a){return _0xd9b6bb+_0x5bf68a;},'uFHHq':_0x271d14(0x1a9),'qeZdg':'data','JoRRQ':function(_0x2ebab6,_0x20a5de){return _0x2ebab6*_0x20a5de;}};this['compressFileWithGZIP']=async function(_0x5d0374,_0x5769ed){const _0x24d3cd=_0x271d14,_0x2aec7f=path[_0x24d3cd(0x1d4)](_0x5d0374),_0xa67ae6=path[_0x24d3cd(0x1be)](_0x5769ed,_0x265228[_0x24d3cd(0x19b)](_0x2aec7f,_0x265228['uFHHq']));await new Promise(function(_0x5bf6c1){const _0x11f9bf=_0x24d3cd,_0x2b0a55={'afdCq':function(_0x22de9c){return _0x22de9c();}},_0x2e5406=zlib[_0x11f9bf(0x1f2)](),_0x40bb6e=fs[_0x11f9bf(0x1c9)](_0x5d0374),_0x22178d=fs[_0x11f9bf(0x1a1)](_0xa67ae6),_0x42e1d3=_0x40bb6e[_0x11f9bf(0x1ac)](_0x2e5406)[_0x11f9bf(0x1ac)](_0x22178d);_0x42e1d3['on']('finish',function(){const _0x56005c=_0x11f9bf;_0x2b0a55[_0x56005c(0x1a3)](_0x5bf6c1);});}),await this[_0x24d3cd(0x1f1)](_0xa67ae6);const _0x470ef0=fs[_0x24d3cd(0x1f6)](_0xa67ae6);return{'name':_0xa67ae6,'size':_0x470ef0[_0x24d3cd(0x1a6)]};},this[_0x271d14(0x1f1)]=async function(_0x3fdeb1){const _0xcb6566=_0x271d14,_0x5ba54d=fs[_0xcb6566(0x1af)](_0x3fdeb1,_0xcb6566(0x1c2));fs[_0xcb6566(0x1d5)](_0x5ba54d,struct[_0xcb6566(0x1db)]('<L',0x0),0x0,0x1,0x4),fs['closeSync'](_0x5ba54d);},this[_0x271d14(0x196)]=async function(_0x54cadd){const _0x1105ed=_0x271d14,_0x258fb5=_0x265228[_0x1105ed(0x19c)](0x10*0x4,0x400),_0x55f205=fs[_0x1105ed(0x1f6)](_0x54cadd),_0x31d201=_0x55f205[_0x1105ed(0x1a6)];let _0x57c40a=[];await new Promise(function(_0x1a2318){const _0xc16b02=_0x1105ed,_0x2ca759=fs['createReadStream'](_0x54cadd,{'highWaterMark':_0x258fb5});_0x2ca759['on'](_0x265228[_0xc16b02(0x1f5)],function(_0x387e21){_0x57c40a['push'](_0x387e21);}),_0x2ca759['on']('close',function(){const _0x27ee1f=_0xc16b02;_0x57c40a=Buffer[_0x27ee1f(0x1ad)](_0x57c40a),_0x1a2318();});});const _0x20bd31=crypto[_0x1105ed(0x1c8)](_0x1105ed(0x1b2))[_0x1105ed(0x194)](_0x57c40a)[_0x1105ed(0x1d3)](_0x1105ed(0x1ee));return{'digest':_0x20bd31,'size':_0x31d201};};}exports['FileUtil']=FileUtil,exports[_0x18bab6(0x1dd)]=function(_0xfdc2f6,_0x27af4b){const _0x2081c1=_0x18bab6,_0x2cebaa={'uGqtd':function(_0x2572e7,_0x3ca27c){return _0x2572e7===_0x3ca27c;},'xKeIL':_0x2081c1(0x1e8)},_0x5cff37=path[_0x2081c1(0x1be)](_0xfdc2f6,_0x27af4b),_0x5e5086=_0x2cebaa[_0x2081c1(0x1aa)](os[_0x2081c1(0x1f4)](),_0x2cebaa[_0x2081c1(0x1cf)])?_0x5cff37[_0x2081c1(0x1eb)](/\\/g,'/'):_0x5cff37;return glob[_0x2081c1(0x1bf)](_0x5e5086);},exports[_0x18bab6(0x1f7)]=async function(_0x26ed11,_0x30e03a){const _0xbfd7ce=_0x18bab6,_0x149462={'FjRnQ':function(_0x51d19c,_0x48471a){return _0x51d19c(_0x48471a);},'xzOyb':_0xbfd7ce(0x1d0),'BNKQN':function(_0x257e49,_0x17c361){return _0x257e49===_0x17c361;},'pZZXX':'win32','oyiKb':function(_0xb545a7,_0x10696f){return _0xb545a7!==_0x10696f;},'lipQz':'YFkKV','XqQFy':_0xbfd7ce(0x192),'EfPSf':function(_0x57eb2f,_0x64036e){return _0x57eb2f===_0x64036e;},'CGdNg':_0xbfd7ce(0x1ce),'vXvbs':function(_0x22de09,_0x129490){return _0x22de09===_0x129490;},'WUxPx':'puDze'},_0x5b5296=_0x30e03a?_0x30e03a:_0x149462[_0xbfd7ce(0x193)](require,_0x149462['xzOyb']);if(_0x149462[_0xbfd7ce(0x1cb)](os[_0xbfd7ce(0x1f4)](),_0x149462['pZZXX'])){if(_0x149462[_0xbfd7ce(0x1a4)](_0x149462['lipQz'],'YFkKV'))_0x1156d7=_0x5cfa08[_0xbfd7ce(0x1ad)](_0x29e412),_0x11b9c2();else return;}try{const _0x28ee69=await _0x5b5296[_0xbfd7ce(0x1e0)](_0x26ed11),_0x4d9807=_0x28ee69['mode'],_0x215e9a=_0x4d9807&0x1ff,_0x1ace7b=_0x215e9a[_0xbfd7ce(0x1a2)](0x8);if(_0x1ace7b===_0x149462[_0xbfd7ce(0x1c4)])Logger[_0xbfd7ce(0x1bc)]()[_0xbfd7ce(0x190)]('Validated\x20that\x20the\x20user\x20has\x20only\x20read\x20and\x20write\x20permission\x20for\x20file:\x20'+_0x26ed11+_0xbfd7ce(0x1e9)+_0x215e9a);else throw new Error(_0xbfd7ce(0x1d6)+_0x1ace7b+'\x20for\x20file\x20'+_0x26ed11+').\x20Make\x20sure\x20you\x20have\x20read\x20and\x20write\x20permissions\x20and\x20other\x20users\x20do\x20not\x20have\x20access\x20to\x20it.\x20Please\x20remove\x20the\x20file\x20and\x20re-run\x20the\x20driver.');const _0x14dc01=os[_0xbfd7ce(0x1ca)]();if(_0x149462['EfPSf'](_0x28ee69[_0xbfd7ce(0x1bd)],_0x14dc01[_0xbfd7ce(0x1bd)]))Logger[_0xbfd7ce(0x1bc)]()[_0xbfd7ce(0x190)](_0xbfd7ce(0x1ea));else{if(_0x149462[_0xbfd7ce(0x1b8)]!=='sVogE')throw new Error(_0xbfd7ce(0x1b9)+_0x26ed11+_0xbfd7ce(0x191));else return _0x2f0db7[_0xbfd7ce(0x1c8)](_0x56d671||_0xbfd7ce(0x1b2))[_0xbfd7ce(0x194)](_0xa242b,_0xbfd7ce(0x1c0))[_0xbfd7ce(0x1d3)](_0x18fef9||_0xbfd7ce(0x1d8))[_0xbfd7ce(0x1df)](0x0,0x20);}}catch(_0x48a880){if(_0x48a880[_0xbfd7ce(0x1a5)]==='ENOENT')return;else{if(_0x149462[_0xbfd7ce(0x1c5)](_0x149462[_0xbfd7ce(0x1ef)],_0xbfd7ce(0x197)))_0x546525['push'](_0x292b1c);else throw _0x48a880;}}},exports['isFileModeCorrect']=async function(_0x43cac4,_0x538cb6,_0x4ef91a){const _0x1b068e=_0x18bab6,_0x115960={'EEqEg':function(_0xafdae3,_0x5072fb){return _0xafdae3-_0x5072fb;},'witeq':function(_0x28d34b,_0x2952df){return _0x28d34b<<_0x2952df;},'zAZjR':function(_0x562ae2,_0x3f21a1){return _0x562ae2===_0x3f21a1;}};if(_0x115960[_0x1b068e(0x19e)](os[_0x1b068e(0x1f4)](),_0x1b068e(0x1e8)))return!![];return await _0x4ef91a[_0x1b068e(0x1e0)](_0x43cac4)[_0x1b068e(0x1b3)](_0x24601d=>{const _0x2304a6=_0x1b068e,_0x4f8cbe=_0x115960[_0x2304a6(0x1d7)](_0x115960[_0x2304a6(0x1a8)](0x1,0x9),0x1);return(_0x24601d[_0x2304a6(0x1b6)]&_0x4f8cbe)===_0x538cb6;});},exports[_0x18bab6(0x1da)]=async function(_0x179475,_0x563d2b){const _0x2f6955=_0x18bab6,_0x42cf23={'RTWeJ':function(_0x2a4e34,_0x5e9c0c){return _0x2a4e34===_0x5e9c0c;},'AbtLp':function(_0x5453e7,_0x4abee5){return _0x5453e7<<_0x4abee5;},'BQOTS':function(_0x22d50d,_0x3f208e){return _0x22d50d&_0x3f208e;}};if(_0x42cf23['RTWeJ'](os[_0x2f6955(0x1f4)](),_0x2f6955(0x1e8)))return!![];const _0x359de7=await _0x563d2b[_0x2f6955(0x1e0)](_0x179475);return(_0x359de7[_0x2f6955(0x1b6)]&_0x42cf23[_0x2f6955(0x1c6)](0x1,0x4))===0x0&&_0x42cf23[_0x2f6955(0x1ec)](_0x42cf23[_0x2f6955(0x1e4)](_0x359de7['mode'],0x1<<0x1),0x0);},exports['generateChecksum']=function(_0x12e816,_0x21f42e,_0x2ad07d){const _0x9ffde3=_0x18bab6,_0x2e1905={'qRIfx':function(_0x4d89ac,_0x4b0bd8){return _0x4d89ac||_0x4b0bd8;},'WKmhl':_0x9ffde3(0x1b2),'HwJFc':'utf8'};return crypto[_0x9ffde3(0x1c8)](_0x2e1905[_0x9ffde3(0x1c3)](_0x21f42e,_0x2e1905[_0x9ffde3(0x1cc)]))[_0x9ffde3(0x194)](_0x12e816,_0x2e1905[_0x9ffde3(0x1c1)])[_0x9ffde3(0x1d3)](_0x2e1905[_0x9ffde3(0x1c3)](_0x2ad07d,'hex'))[_0x9ffde3(0x1df)](0x0,0x20);},exports['IsFileExisted']=async function(_0xbe65d3){const _0x1186ad=_0x18bab6,_0x595ecd={'ddYPs':function(_0x16ba88,_0x19a609){return _0x16ba88!==_0x19a609;},'oigRz':_0x1186ad(0x1ab)};try{return await fsPromises[_0x1186ad(0x19a)](_0xbe65d3,fs[_0x1186ad(0x1bb)][_0x1186ad(0x1b7)]),!![];}catch(_0x101aa8){if(_0x595ecd[_0x1186ad(0x1b4)](_0x595ecd[_0x1186ad(0x18f)],_0x595ecd[_0x1186ad(0x18f)]))return;else return![];}};