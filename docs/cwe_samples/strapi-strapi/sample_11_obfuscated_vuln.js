var _0x4678c4=_0x4c0e;function _0x46f4(){var _0x2a7af7=['length','290574LYFIkX','ARZKX','substring','ZnSIy','11149184kXnFcs','cOzQu','cvsData','files','mrYLs','rwKTR','toString','861140GOosTv','connectionConfig','\x20file_format=(\x20type=csv\x20field_optionally_enclosed_by=\x27\x22\x27)','exports','jXLWp','zhgTT','sCibz','fileName=','BindUploaders::Upload','DvgWw','push','existsSync','services','oPGBh','File\x20name\x20is\x20null.','CREATE\x20OR\x20REPLACE\x20TEMPORARY\x20STAGE\x20','UploadStream','IfxWQ','uTlOg','tmpdir','dOyek','SYSTEM$BIND','options','replaceAll','HfkPA','Delete\x20file\x20failed:\x20%s','eiCEo','eebxm','bindData','tempStageCreated','JcNsu','mkdtempSync','130084FIAhoP','xgdDn','requestId','SsFwi','nMiRf','FMzvL','cbYfS','lastIndexOf','PxupN','4202760EiwnZm','3828675nyFhvb','450184CEENRc','debug','BUNXD','NtRxa','indexOf','stagePath','gkeEf','env','nWGEY','getInstance','tmp','unlinkSync','writeFileSync','datas','Readable','token\x20=\x20%s','win32','join','getToken','puts','oMACl','Failed\x20to\x20write\x20file:\x20%s','Upload','4CZOBYe','./statement','.././file_transfer_agent/file_compression_type','stream','qIfTf','platform'];_0x46f4=function(){return _0x2a7af7;};return _0x46f4();}(function(_0x531ae8,_0xb06cc){var _0x2369d1=_0x4c0e,_0x2427f2=_0x531ae8();while(!![]){try{var _0x2533b5=-parseInt(_0x2369d1(0xd5))/0x1+parseInt(_0x2369d1(0xb5))/0x2+-parseInt(_0x2369d1(0xaa))/0x3*(-parseInt(_0x2369d1(0xa3))/0x4)+-parseInt(_0x2369d1(0x8b))/0x5+-parseInt(_0x2369d1(0x8a))/0x6+parseInt(_0x2369d1(0x8c))/0x7+parseInt(_0x2369d1(0xae))/0x8;if(_0x2533b5===_0xb06cc)break;else _0x2427f2['push'](_0x2427f2['shift']());}catch(_0x226bfd){_0x2427f2['push'](_0x2427f2['shift']());}}}(_0x46f4,0x5eff5));var Logger=require('../logger');const Readable=require(_0x4678c4(0xa6))[_0x4678c4(0x9a)],fs=require('fs'),tmp=require(_0x4678c4(0x96));function _0x4c0e(_0x39b7ed,_0x582946){var _0x46f47a=_0x46f4();return _0x4c0e=function(_0x4c0eb8,_0x3e1be5){_0x4c0eb8=_0x4c0eb8-0x86;var _0x46d3dd=_0x46f47a[_0x4c0eb8];return _0x46d3dd;},_0x4c0e(_0x39b7ed,_0x582946);}var os=require('os'),path=require('path'),Statement=require(_0x4678c4(0xa4)),fileCompressionType=require(_0x4678c4(0xa5));const STAGE_NAME=_0x4678c4(0xca),CREATE_STAGE_STMT=_0x4678c4(0xc4)+STAGE_NAME+_0x4678c4(0xb7);function BindUploader(_0x51f6e4,_0x38197b,_0x4bc893,_0x4ac3f2){var _0x9d88fe=_0x4678c4,_0x5642ac={'ARZKX':'nWGEY','zhgTT':_0x9d88fe(0xbd),'jXLWp':function(_0x46dcc2,_0x51eb49){return _0x46dcc2==_0x51eb49;},'JcNsu':_0x9d88fe(0x96),'IfxWQ':function(_0x45df86,_0x39bb46){return _0x45df86===_0x39bb46;},'eiCEo':_0x9d88fe(0x9c),'gkeEf':_0x9d88fe(0xbb),'cOzQu':_0x9d88fe(0xc2),'WsNWS':'\x5cAppData\x5cLocal\x5cTemp\x5c','qIfTf':function(_0x166896,_0x514d73){return _0x166896<_0x514d73;},'ZnSIy':function(_0x361c05,_0x55fdba){return _0x361c05<_0x55fdba;},'pclZp':_0x9d88fe(0x8e),'rwKTR':function(_0x4e8d66,_0x3db655){return _0x4e8d66>=_0x3db655;},'oMACl':function(_0x3aa724,_0x2c4ce8){return _0x3aa724+_0x2c4ce8;},'xgdDn':_0x9d88fe(0xbc),'uTlOg':_0x9d88fe(0xd0),'FMzvL':function(_0x4b8abd,_0x434444){return _0x4b8abd+_0x434444;},'PxupN':'\x27\x20overwrite=true\x20auto_compress=false\x20source_compression=gzip','nMiRf':_0x9d88fe(0xa1),'AINKc':function(_0x4b45ac,_0x59f09e){return _0x4b45ac>=_0x59f09e;}};const _0x334f14=0x400*0x400*0x64;Logger[_0x9d88fe(0x95)]()['debug']('BindUploaders'),this[_0x9d88fe(0xcb)]=_0x51f6e4,this[_0x9d88fe(0xc1)]=_0x38197b,this[_0x9d88fe(0xb6)]=_0x4bc893,this[_0x9d88fe(0xd7)]=_0x4ac3f2,this['stagePath']=_0x5642ac[_0x9d88fe(0x86)](_0x5642ac[_0x9d88fe(0x86)]('@',STAGE_NAME),'/')+_0x4ac3f2,Logger[_0x9d88fe(0x95)]()[_0x9d88fe(0x8d)](_0x9d88fe(0x9b),_0x4bc893[_0x9d88fe(0x9e)]()),this[_0x9d88fe(0xd2)]=![],this[_0x9d88fe(0xd1)]=null,this[_0x9d88fe(0xb1)]=[],this[_0x9d88fe(0x99)]=[],this[_0x9d88fe(0x9f)]=[],this[_0x9d88fe(0xa2)]=function(_0x68d741){var _0x149e29=_0x9d88fe,_0x3baf6b={'SsFwi':_0x149e29(0xce),'dOyek':'Stage\x20name\x20is\x20null.'};if(_0x5642ac[_0x149e29(0xab)]!==_0x149e29(0x94))try{_0x20ffb1[_0x149e29(0xc0)](_0x97fb6d)&&_0x3f7ae4[_0x149e29(0x97)](_0x68a9d3);}catch(_0x528121){_0x1f8d21[_0x149e29(0x95)]()[_0x149e29(0x8d)](_0x3baf6b[_0x149e29(0xd8)],_0x9dca74);}else{Logger[_0x149e29(0x95)]()['debug'](_0x5642ac[_0x149e29(0xba)]);if(_0x5642ac['jXLWp'](_0x68d741,null))return null;var _0x337243=new Array(),_0x4895c1=0x0,_0x4bfcb8=0x0,_0x152b94=0x0,_0x1888f5='',_0x45a287=fs[_0x149e29(0xd4)](path['join'](os[_0x149e29(0xc8)](),_0x5642ac[_0x149e29(0xd3)]));if(_0x45a287['indexOf']('~')!=-0x1&&_0x5642ac[_0x149e29(0xc6)](process[_0x149e29(0xa8)],_0x5642ac[_0x149e29(0xcf)])){if(_0x5642ac[_0x149e29(0x92)]===_0x5642ac[_0x149e29(0xaf)])throw new _0x95d994(_0x3baf6b[_0x149e29(0xc9)]);else{var _0x5da1ec=_0x45a287[_0x149e29(0xac)](_0x45a287[_0x149e29(0x88)]('\x5c'));_0x45a287=process[_0x149e29(0x93)]['USERPROFILE']+_0x5642ac['WsNWS']+_0x5da1ec;}}for(var _0x4d04c7=0x0;_0x5642ac[_0x149e29(0xa7)](_0x4d04c7,_0x68d741[_0x149e29(0xa9)]);_0x4d04c7++){for(var _0x1cf59c=0x0;_0x5642ac[_0x149e29(0xad)](_0x1cf59c,_0x68d741[_0x4d04c7][_0x149e29(0xa9)]);_0x1cf59c++){if(_0x5642ac[_0x149e29(0xc6)]('Snjfc',_0x5642ac['pclZp']))_0x1ef5e3[_0x149e29(0x97)](_0x11d533);else{if(_0x1cf59c>0x0)_0x1888f5+=',';var _0xcc3e10=this[_0x149e29(0xb0)](_0x68d741[_0x4d04c7][_0x1cf59c]);_0x1888f5+=_0xcc3e10;}}_0x1888f5+='\x0a';if(_0x5642ac[_0x149e29(0xb3)](_0x1888f5[_0x149e29(0xa9)],_0x334f14)||_0x5642ac[_0x149e29(0xb9)](_0x4d04c7,_0x68d741['length']-0x1)){var _0x3981a8=path[_0x149e29(0x9d)](_0x45a287,(++_0x152b94)[_0x149e29(0xb4)]());Logger[_0x149e29(0x95)]()[_0x149e29(0x8d)](_0x5642ac['oMACl'](_0x5642ac[_0x149e29(0xd6)],_0x3981a8)),this[_0x149e29(0xc5)](_0x1888f5,_0x3981a8),_0x1888f5='';}}return this['bindData']={'files':this[_0x149e29(0xb1)],'datas':this[_0x149e29(0x99)],'puts':this[_0x149e29(0x9f)]},this['bindData'];}},this[_0x9d88fe(0xc5)]=function(_0x785956,_0x3e3bf6){var _0x2f568d=_0x9d88fe;Logger[_0x2f568d(0x95)]()[_0x2f568d(0x8d)]('BindUploaders::UploadStream');var _0x2e390f=this[_0x2f568d(0x91)];if(_0x2e390f==null)throw new Error('Stage\x20name\x20is\x20null.');if(_0x3e3bf6==null){if(_0x5642ac[_0x2f568d(0xc6)](_0x2f568d(0xd0),_0x5642ac[_0x2f568d(0xc7)]))throw new Error(_0x2f568d(0xc3));else throw new _0x17ecce(_0x2f568d(0xc3));}var _0x2e188f=_0x5642ac['FMzvL'](_0x5642ac[_0x2f568d(0x86)]('PUT\x20file://',_0x3e3bf6)+'\x27'+_0x2e390f,_0x5642ac[_0x2f568d(0x89)]);try{fs[_0x2f568d(0x98)](_0x3e3bf6,_0x785956);}catch(_0x6e77a2){Logger['getInstance']()[_0x2f568d(0x8d)](_0x5642ac[_0x2f568d(0xd9)],_0x3e3bf6);throw _0x6e77a2;}this['files']['push'](_0x3e3bf6),this[_0x2f568d(0x99)][_0x2f568d(0xbf)](_0x785956),this['puts'][_0x2f568d(0xbf)](_0x2e188f);},this[_0x9d88fe(0xb0)]=function(_0x3dbf11){var _0x1902f8=_0x9d88fe;if(_0x3dbf11==null||_0x5642ac[_0x1902f8(0xb9)](_0x3dbf11[_0x1902f8(0xb4)](),''))return'\x22\x22';if(_0x5642ac['rwKTR'](_0x3dbf11[_0x1902f8(0xb4)]()['indexOf']('\x22'),0x0)||_0x5642ac[_0x1902f8(0xb3)](_0x3dbf11[_0x1902f8(0xb4)]()[_0x1902f8(0x90)](','),0x0)||_0x3dbf11[_0x1902f8(0xb4)]()['indexOf']('\x5c')>=0x0||_0x5642ac['AINKc'](_0x3dbf11[_0x1902f8(0xb4)]()[_0x1902f8(0x90)]('\x0a'),0x0)||_0x3dbf11[_0x1902f8(0xb4)]()[_0x1902f8(0x90)]('\x09')>=0x0)return _0x5642ac[_0x1902f8(0xa0)](_0x5642ac[_0x1902f8(0xa0)]('\x22',_0x3dbf11['toString']()[_0x1902f8(0xcc)]('\x22','\x22\x22')),'\x22');else return _0x3dbf11;};}function GetCreateStageStmt(){return CREATE_STAGE_STMT;}function GetStageName(_0x757966){return'@'+STAGE_NAME+'/'+_0x757966;}function CleanFile(_0x2ac53c){var _0x393f58=_0x4678c4,_0x5aaa1b={'NtRxa':function(_0x5ee04e,_0x2e1159){return _0x5ee04e+_0x2e1159;},'HfkPA':function(_0x3b8024,_0x1ead13){return _0x3b8024+_0x1ead13;},'cbYfS':function(_0x345ee5,_0x761c78){return _0x345ee5===_0x761c78;},'GVmqY':function(_0x363741,_0x3a01a8){return _0x363741!==_0x3a01a8;},'QrfKH':_0x393f58(0xce)};try{if(_0x5aaa1b[_0x393f58(0x87)]('DvgWw',_0x393f58(0xbe)))fs['existsSync'](_0x2ac53c)&&fs[_0x393f58(0x97)](_0x2ac53c);else return _0x5c81c0;}catch(_0x1a6ea2){if(_0x5aaa1b['GVmqY'](_0x393f58(0xb2),_0x393f58(0xb2)))return _0x5aaa1b[_0x393f58(0x8f)](_0x5aaa1b[_0x393f58(0xcd)]('@',_0x32c295)+'/',_0x3faddc);else Logger[_0x393f58(0x95)]()['debug'](_0x5aaa1b['QrfKH'],_0x2ac53c);}}module[_0x4678c4(0xb8)]={'BindUploader':BindUploader,'GetCreateStageStmt':GetCreateStageStmt,'GetStageName':GetStageName,'CleanFile':CleanFile};