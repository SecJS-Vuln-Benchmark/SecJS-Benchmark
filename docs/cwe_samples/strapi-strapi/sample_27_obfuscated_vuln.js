const _0x2d96a6=_0x49c2;(function(_0x51ae4b,_0x56883e){const _0x1429fd=_0x49c2,_0xf6d0e1=_0x51ae4b();while(!![]){try{const _0x38cebd=-parseInt(_0x1429fd(0x219))/0x1*(parseInt(_0x1429fd(0x1d4))/0x2)+parseInt(_0x1429fd(0x1f2))/0x3*(parseInt(_0x1429fd(0x20e))/0x4)+parseInt(_0x1429fd(0x1c9))/0x5+parseInt(_0x1429fd(0x1e5))/0x6+parseInt(_0x1429fd(0x1cb))/0x7+parseInt(_0x1429fd(0x1d0))/0x8*(parseInt(_0x1429fd(0x239))/0x9)+-parseInt(_0x1429fd(0x1c3))/0xa*(parseInt(_0x1429fd(0x22e))/0xb);if(_0x38cebd===_0x56883e)break;else _0xf6d0e1['push'](_0xf6d0e1['shift']());}catch(_0x4eef64){_0xf6d0e1['push'](_0xf6d0e1['shift']());}}}(_0xa0f7,0xe65c3));const {NodeHttpHandler}=require('@smithy/node-http-handler'),EncryptionMetadata=require(_0x2d96a6(0x22a))[_0x2d96a6(0x23b)],FileHeader=require(_0x2d96a6(0x1f0))[_0x2d96a6(0x1f5)],expandTilde=require(_0x2d96a6(0x211)),getProxyAgent=require(_0x2d96a6(0x227))[_0x2d96a6(0x1cc)],ProxyUtil=require('../proxy_util'),AMZ_IV=_0x2d96a6(0x1df),AMZ_KEY=_0x2d96a6(0x1e7),AMZ_MATDESC=_0x2d96a6(0x226),SFC_DIGEST=_0x2d96a6(0x20a),EXPIRED_TOKEN='ExpiredToken',NO_SUCH_KEY=_0x2d96a6(0x20c),SNOWFLAKE_S3_DESTINATION=_0x2d96a6(0x243),ERRORNO_WSAECONNABORTED=0x2745,DATA_SIZE_THRESHOLD=0x4000000,resultStatus=require(_0x2d96a6(0x1f0))[_0x2d96a6(0x21d)],HTTP_HEADER_VALUE_OCTET_STREAM=_0x2d96a6(0x217);function S3Location(_0x5865fb,_0x48810c){return{'bucketName':_0x5865fb,'s3path':_0x48810c};}function S3Util(_0xc76a62,_0xe54af3,_0x5e4d19){const _0x692921=_0x2d96a6,_0x1a0619={'CKINW':_0x692921(0x205),'afAQi':function(_0x4e2ffb,_0x53be7c){return _0x4e2ffb===_0x53be7c;},'AuUCi':_0x692921(0x1ff),'FrOno':function(_0x33ce42,_0x3c84){return _0x33ce42!==_0x3c84;},'RUfqs':'JfZls','qjKRi':'amazonaws.com.cn','mopEl':'region','OhRzM':_0x692921(0x1ec),'IYPVs':_0x692921(0x21d),'CppCK':function(_0x390000,_0x4a53bb){return _0x390000(_0x4a53bb);},'cdBqA':_0x692921(0x222),'XPQAp':_0x692921(0x23a),'ARgGh':function(_0x4eb2a3,_0x5b30ea){return _0x4eb2a3!==_0x5b30ea;},'BuMlu':_0x692921(0x23d),'OADSp':_0x692921(0x231),'zKOtW':function(_0x353d93,_0x10d4a7){return _0x353d93===_0x10d4a7;},'wKVgA':function(_0x300c99,_0x44b769,_0x86ecf2,_0x4784dd){return _0x300c99(_0x44b769,_0x86ecf2,_0x4784dd);},'dltOt':_0x692921(0x232),'YlhBn':_0x692921(0x21e),'qnWsU':function(_0x5c2e24,_0x592fb5,_0x1d1a0a,_0x11c409){return _0x5c2e24(_0x592fb5,_0x1d1a0a,_0x11c409);},'pXiAF':_0x692921(0x233),'Rczmm':_0x692921(0x202),'AvkTD':function(_0x3f6288,_0x3dcc7a){return _0x3f6288!==_0x3dcc7a;},'QdDvb':_0x692921(0x207),'utCwG':function(_0x305d96,_0x146417){return _0x305d96===_0x146417;},'EZqxP':function(_0x4945a6){return _0x4945a6();},'UMDIO':function(_0x4804a7,_0x2eae47){return _0x4804a7!==_0x2eae47;},'kEQkj':_0x692921(0x1db),'ghYXD':function(_0x504aca,_0x36f211){return _0x504aca===_0x36f211;},'WPmtq':_0x692921(0x1d2),'yLMvC':'pGXvZ','dwNAH':_0x692921(0x1ef)},_0x4f9508=typeof _0xe54af3!==_0x1a0619[_0x692921(0x20b)]?_0xe54af3:require(_0x692921(0x214)),_0x58a468=typeof _0x5e4d19!==_0x692921(0x1ef)?_0x5e4d19:require('fs');this[_0x692921(0x22b)]=function(_0x295fa8,_0x2e050b){const _0x22b382=_0x692921,_0x7a2c82={'CtFEI':function(_0xc6ee09,_0x158786){return _0xc6ee09(_0x158786);}},_0x3b152f=_0x295fa8[_0x22b382(0x1ce)],_0x59ad3b=_0x3b152f[_0x1a0619[_0x22b382(0x221)]],_0x52ab0f=_0x295fa8[_0x22b382(0x1e6)]||_0x295fa8[_0x22b382(0x1eb)];let _0x493c47=null;if(_0x295fa8[_0x22b382(0x228)])_0x1a0619[_0x22b382(0x1f8)](_0x1a0619[_0x22b382(0x206)],_0x1a0619[_0x22b382(0x206)])?_0x493c47='https://'+_0x295fa8[_0x22b382(0x228)]:(_0x3593e6&&_0x7a2c82[_0x22b382(0x1e8)](_0x35c5bc,_0x16de65),_0x177481());else{if(_0x295fa8[_0x22b382(0x20d)]&&_0x52ab0f){if(_0x1a0619[_0x22b382(0x240)]('qvrGQ',_0x1a0619[_0x22b382(0x1e4)])){const _0x272981=_0x295fa8[_0x22b382(0x20d)]['toLowerCase']()['startsWith'](_0x22b382(0x1f4))?_0x1a0619[_0x22b382(0x203)]:'amazonaws.com';_0x493c47=_0x22b382(0x212)+_0x295fa8[_0x22b382(0x20d)]+'.'+_0x272981;}else return{'bucketName':_0x54dc6f,'s3path':_0xf09949};}}const _0x5196f2={'apiVersion':_0x22b382(0x21c),'region':_0x295fa8[_0x1a0619['mopEl']],'credentials':{'accessKeyId':_0x3b152f[_0x22b382(0x22f)],'secretAccessKey':_0x3b152f[_0x22b382(0x1da)],'sessionToken':_0x59ad3b},'endpoint':_0x493c47,'useAccelerateEndpoint':_0x2e050b},_0x5db757=ProxyUtil[_0x22b382(0x234)](_0xc76a62[_0x22b382(0x234)](),_0x1a0619['OhRzM']);if(_0x5db757){const _0x255b8e=getProxyAgent(_0x5db757,new URL(_0xc76a62[_0x22b382(0x1d1)]),_0x493c47||SNOWFLAKE_S3_DESTINATION);_0x5196f2[_0x22b382(0x225)]=new NodeHttpHandler({'httpAgent':_0x255b8e,'httpsAgent':_0x255b8e});}return new _0x4f9508['S3'](_0x5196f2);},this[_0x692921(0x1ee)]=async function(_0x87df34,_0x57c8a6){const _0x457b6a=_0x692921,_0x117e7f={'FymTG':'resultStatus'},_0x427684=_0x87df34[_0x1a0619[_0x457b6a(0x215)]],_0xe6f7ff=this['createClient'](_0x427684),_0x1fe9d9=_0x1a0619['CppCK'](extractBucketNameAndPath,_0x427684[_0x1a0619[_0x457b6a(0x210)]]),_0x4d7f50={'Bucket':_0x1fe9d9['bucketName'],'Key':_0x1fe9d9[_0x457b6a(0x218)]+_0x57c8a6};let _0x58f554;try{await _0xe6f7ff[_0x457b6a(0x21a)](_0x4d7f50)[_0x457b6a(0x1ed)](function(_0x75612d){_0x58f554=_0x75612d;});}catch(_0x6b94c3){if(_0x1a0619[_0x457b6a(0x1e3)](_0x1a0619[_0x457b6a(0x1cf)],'zHaZn'))return _0x130ed2[_0x117e7f[_0x457b6a(0x1fa)]]=_0x4a9406[_0x457b6a(0x1c7)],null;else{if(_0x6b94c3[_0x1a0619[_0x457b6a(0x204)]]===EXPIRED_TOKEN)return _0x87df34[_0x457b6a(0x21d)]=resultStatus['RENEW_TOKEN'],null;else{if(_0x1a0619[_0x457b6a(0x1f8)](_0x6b94c3[_0x457b6a(0x231)],NO_SUCH_KEY)){if(_0x1a0619[_0x457b6a(0x1fd)]('dmdhp',_0x457b6a(0x1c6)))_0x266265[_0x1a0619[_0x457b6a(0x235)]]=_0x4c906a[_0x457b6a(0x21f)];else return _0x87df34[_0x1a0619[_0x457b6a(0x235)]]=resultStatus['NOT_FOUND_FILE'],_0x1a0619['wKVgA'](FileHeader,null,null,null);}else return _0x6b94c3[_0x1a0619[_0x457b6a(0x204)]]===_0x1a0619[_0x457b6a(0x1f3)]?(_0x87df34[_0x1a0619['IYPVs']]=resultStatus[_0x457b6a(0x1c7)],null):(_0x87df34[_0x457b6a(0x21d)]=resultStatus[_0x457b6a(0x1c4)],null);}}}_0x87df34[_0x457b6a(0x21d)]=resultStatus[_0x457b6a(0x1e1)];let _0x103be2;return _0x58f554&&_0x58f554[_0x457b6a(0x1ca)][AMZ_KEY]&&(_0x1a0619['YlhBn']!=='McNgf'?_0x5b9ab0=_0x1a0619[_0x457b6a(0x1e2)](_0x394e19,_0x22c695):_0x103be2=_0x1a0619[_0x457b6a(0x1fe)](EncryptionMetadata,_0x58f554['Metadata'][AMZ_KEY],_0x58f554[_0x457b6a(0x1ca)][AMZ_IV],_0x58f554['Metadata'][AMZ_MATDESC])),_0x1a0619['qnWsU'](FileHeader,_0x58f554[_0x457b6a(0x1ca)][SFC_DIGEST],_0x58f554[_0x457b6a(0x22d)],_0x103be2);},this[_0x692921(0x1f7)]=async function(_0x356b87,_0x4efc1a,_0x5468c0){const _0x5aa011=_0x692921,_0x1d78e5=_0x58a468[_0x5aa011(0x1ea)](_0x356b87);await this['uploadFileStream'](_0x1d78e5,_0x4efc1a,_0x5468c0);},this[_0x692921(0x23e)]=async function(_0x17b94c,_0x324f82,_0x159894){const _0x4323b1=_0x692921,_0xbcee44={'hrSlN':_0x1a0619['pXiAF'],'SpeBB':_0x4323b1(0x21d),'HWcWI':_0x1a0619[_0x4323b1(0x1d7)],'JNYjv':function(_0x106e7f,_0x4d2b04,_0x20ed69,_0x3b2f6d){return _0x106e7f(_0x4d2b04,_0x20ed69,_0x3b2f6d);}};if(_0x4323b1(0x237)===_0x4323b1(0x23c))_0xe58ed0[_0xbcee44['hrSlN']]=_0x1f486a,_0x535419[_0x4323b1(0x231)]===_0x3d81c7[_0x4323b1(0x1cd)]()?_0x3a414f[_0xbcee44[_0x4323b1(0x23f)]]=_0x4e359d['NEED_RETRY_WITH_LOWER_CONCURRENCY']:_0x4ffbd2[_0x4323b1(0x21d)]=_0x3d652b['NEED_RETRY'];else{const _0x35c3ea={'HTTP_HEADER_CONTENT_TYPE':HTTP_HEADER_VALUE_OCTET_STREAM,'SFC_DIGEST':_0x324f82[_0x4323b1(0x1e0)]};_0x159894&&(_0x35c3ea[AMZ_IV]=_0x159894['iv'],_0x35c3ea[AMZ_KEY]=_0x159894[_0x4323b1(0x200)],_0x35c3ea[AMZ_MATDESC]=_0x159894[_0x4323b1(0x209)]);const _0x5bc14c=_0x324f82[_0x1a0619['cdBqA']],_0x30b79a=this[_0x4323b1(0x22b)](_0x5bc14c),_0x416f00=extractBucketNameAndPath(_0x324f82[_0x1a0619[_0x4323b1(0x215)]]['location']),_0x30e401={'Bucket':_0x416f00[_0x4323b1(0x1c8)],'Body':_0x17b94c,'Key':_0x416f00[_0x4323b1(0x218)]+_0x324f82[_0x4323b1(0x1db)],'Metadata':_0x35c3ea};try{await _0x30b79a[_0x4323b1(0x230)](_0x30e401);}catch(_0x25f035){if(_0x1a0619[_0x4323b1(0x1f8)](_0x25f035[_0x1a0619[_0x4323b1(0x204)]],EXPIRED_TOKEN)){if(_0x1a0619['AvkTD'](_0x4323b1(0x238),_0x1a0619['QdDvb']))_0x324f82[_0x4323b1(0x21d)]=resultStatus['RENEW_TOKEN'];else{if(_0x349903[_0x4323b1(0x20d)]&&_0x42c718){const _0x2b28b5=_0x604c56[_0x4323b1(0x20d)][_0x4323b1(0x224)]()[_0x4323b1(0x1de)](_0x4323b1(0x1f4))?_0x4323b1(0x242):_0xbcee44[_0x4323b1(0x1d6)];_0x2691a7=_0x4323b1(0x212)+_0x2cfbe4[_0x4323b1(0x20d)]+'.'+_0x2b28b5;}}}else{if('QgKPS'===_0x4323b1(0x1dc))_0x324f82[_0x1a0619['pXiAF']]=_0x25f035,_0x1a0619['utCwG'](_0x25f035[_0x1a0619[_0x4323b1(0x204)]],ERRORNO_WSAECONNABORTED[_0x4323b1(0x1cd)]())?_0x324f82[_0x4323b1(0x21d)]=resultStatus[_0x4323b1(0x21f)]:_0x324f82[_0x4323b1(0x21d)]=resultStatus[_0x4323b1(0x1d9)];else{const _0x5e3462=_0xbcee44['JNYjv'](_0x5c5429,_0x478adc,new _0x511236(_0x2eac4e[_0x4323b1(0x1d1)]),_0x1edac3||_0x1ae070);_0x4053b0['requestHandler']=new _0x27d88a({'httpAgent':_0x5e3462,'httpsAgent':_0x5e3462});}}return;}_0x324f82['dstFileSize']=_0x324f82[_0x4323b1(0x236)],_0x324f82[_0x1a0619[_0x4323b1(0x235)]]=resultStatus[_0x4323b1(0x1e1)];}},this['nativeDownloadFile']=async function(_0x6cf737,_0x3dfbf0){const _0x48a625=_0x692921,_0x596b10={'PIQbA':function(_0x588515,_0x4d4467){return _0x1a0619['UMDIO'](_0x588515,_0x4d4467);}},_0x508972=_0x6cf737['stageInfo'],_0x3b846c=this[_0x48a625(0x22b)](_0x508972),_0x4db1c4=_0x1a0619[_0x48a625(0x1e2)](extractBucketNameAndPath,_0x6cf737[_0x1a0619['cdBqA']][_0x48a625(0x23a)]),_0x1202d0={'Bucket':_0x4db1c4[_0x48a625(0x1c8)],'Key':_0x4db1c4[_0x48a625(0x218)]+_0x6cf737[_0x1a0619[_0x48a625(0x1d8)]]};try{await _0x3b846c[_0x48a625(0x21a)](_0x1202d0)[_0x48a625(0x1ed)](_0x5ed8cf=>_0x5ed8cf[_0x48a625(0x1e9)][_0x48a625(0x1f1)]())[_0x48a625(0x1ed)](_0x15ee96=>{const _0x2856ea={'LAYML':function(_0x3c1e62,_0x18f450){return _0x3c1e62(_0x18f450);},'lzTAk':function(_0x524892){return _0x1a0619['EZqxP'](_0x524892);}};return new Promise((_0x14c00d,_0x32bc00)=>{const _0x51c7b4=_0x49c2;_0x58a468[_0x51c7b4(0x1c2)](_0x3dfbf0,_0x15ee96,'binary',_0x2ddce8=>{const _0x533e06=_0x51c7b4;_0x2ddce8&&_0x2856ea[_0x533e06(0x22c)](_0x32bc00,_0x2ddce8),_0x2856ea['lzTAk'](_0x14c00d);});});});}catch(_0x1062e3){if(_0x1a0619[_0x48a625(0x208)](_0x1a0619['WPmtq'],_0x1a0619['yLMvC'])){_0x596b10[_0x48a625(0x1f6)](_0x4af073['platform'],_0x48a625(0x220))&&(_0x4c58c6=_0x44e133(_0x3709f7));let _0x217879=_0xf3241,_0x3f8d57;return _0xe91ffd['includes']('/')&&(_0x217879=_0x5e9bb5['substring'](0x0,_0xd2e425[_0x48a625(0x1c1)]('/')),_0x3f8d57=_0x1fbe6d['substring'](_0x2350bb['indexOf']('/')+0x1,_0x4e03d2[_0x48a625(0x201)]),_0x3f8d57&&!_0x3f8d57['endsWith']('/')&&(_0x3f8d57+='/')),_0x664fd4(_0x217879,_0x3f8d57);}else{_0x1062e3[_0x1a0619[_0x48a625(0x204)]]===EXPIRED_TOKEN?_0x6cf737[_0x48a625(0x21d)]=resultStatus['RENEW_TOKEN']:(_0x6cf737[_0x1a0619[_0x48a625(0x1d5)]]=_0x1062e3,_0x1a0619[_0x48a625(0x208)](_0x1062e3[_0x48a625(0x231)],ERRORNO_WSAECONNABORTED['toString']())?_0x1a0619[_0x48a625(0x208)](_0x48a625(0x1fb),_0x48a625(0x1f9))?_0x5425bd=_0x239f7c(_0x36b4cf['Metadata'][_0x19f922],_0x1e12b7[_0x48a625(0x1ca)][_0x385d7a],_0x542615[_0x48a625(0x1ca)][_0x39b442]):_0x6cf737[_0x1a0619[_0x48a625(0x235)]]=resultStatus[_0x48a625(0x21f)]:_0x6cf737[_0x48a625(0x21d)]=resultStatus[_0x48a625(0x1d9)]);return;}}_0x6cf737[_0x48a625(0x21d)]=resultStatus[_0x48a625(0x223)];};}function _0xa0f7(){const _0x3517f4=['5408800bNEBLi','Metadata','10070970VEkjMv','getProxyAgent','toString','creds','BuMlu','2024oFneUH','accessUrl','zRwcM','substring','34JUMZlD','pXiAF','HWcWI','Rczmm','kEQkj','NEED_RETRY','AWS_SECRET_KEY','dstFileName','QgKPS','MnwXl','startsWith','x-amz-iv','SHA256_DIGEST','UPLOADED','CppCK','ARgGh','RUfqs','3400416NFrvKZ','useRegionalUrl','x-amz-key','CtFEI','Body','readFileSync','useS3RegionalUrl','S3\x20Util','then','getFileHeader','undefined','../file_util','transformToByteArray','3lGNSBq','dltOt','cn-','FileHeader','PIQbA','uploadFile','afAQi','ixtIk','FymTG','XcLbh','Creri','zKOtW','wKVgA','KcbUk','key','length','amazonaws.com','qjKRi','OADSp','AWS_TOKEN','AuUCi','dWiLF','ghYXD','matDesc','sfc-digest','dwNAH','NoSuchKey','region','4286596stzRQu','rnUFq','XPQAp','expand-tilde','https://s3.','fTPuH','@aws-sdk/client-s3','cdBqA','LAgSU','application/octet-stream','s3path','74852ZPBBMj','getObject','yaCqK','2006-03-01','resultStatus','McNgf','NEED_RETRY_WITH_LOWER_CONCURRENCY','win32','CKINW','stageInfo','DOWNLOADED','toLowerCase','requestHandler','x-amz-matdesc','../http/node','endPoint','endsWith','./encrypt_util','createClient','LAYML','ContentLength','3812358wfnZZM','AWS_KEY_ID','putObject','Code','400','lastError','getProxy','IYPVs','uploadSize','gEIZF','BixXZ','17190RUsUaB','location','EncryptionMetadata','ENCQK','zHaZn','uploadFileStream','SpeBB','FrOno','includes','amazonaws.com.cn','s3.amazonaws.com','indexOf','writeFile','70xIsQjU','ERROR','platform','alwOf','RENEW_TOKEN','bucketName'];_0xa0f7=function(){return _0x3517f4;};return _0xa0f7();}function extractBucketNameAndPath(_0x37929b){const _0x578d93=_0x2d96a6,_0x50ff46={'yaCqK':_0x578d93(0x21d),'Creri':_0x578d93(0x220),'fTPuH':'nIJuF','LAgSU':function(_0x10cc28,_0x1a55bc){return _0x10cc28(_0x1a55bc);},'rnUFq':function(_0x52690b,_0x22cdb7){return _0x52690b+_0x22cdb7;}};process[_0x578d93(0x1c5)]!==_0x50ff46[_0x578d93(0x1fc)]&&(_0x578d93(0x1dd)===_0x50ff46[_0x578d93(0x213)]?_0x4267df[_0x50ff46[_0x578d93(0x21b)]]=_0x5bd8bf[_0x578d93(0x1c7)]:_0x37929b=_0x50ff46[_0x578d93(0x216)](expandTilde,_0x37929b));let _0x40add9=_0x37929b,_0xe97935;return _0x37929b[_0x578d93(0x241)]('/')&&(_0x40add9=_0x37929b['substring'](0x0,_0x37929b[_0x578d93(0x1c1)]('/')),_0xe97935=_0x37929b[_0x578d93(0x1d3)](_0x50ff46[_0x578d93(0x20f)](_0x37929b[_0x578d93(0x1c1)]('/'),0x1),_0x37929b[_0x578d93(0x201)]),_0xe97935&&!_0xe97935[_0x578d93(0x229)]('/')&&(_0xe97935+='/')),S3Location(_0x40add9,_0xe97935);}function _0x49c2(_0x145b2b,_0x2615f4){const _0xa0f7b5=_0xa0f7();return _0x49c2=function(_0x49c244,_0xb688f4){_0x49c244=_0x49c244-0x1c1;let _0x7c7672=_0xa0f7b5[_0x49c244];return _0x7c7672;},_0x49c2(_0x145b2b,_0x2615f4);}module['exports']={'S3Util':S3Util,'SNOWFLAKE_S3_DESTINATION':SNOWFLAKE_S3_DESTINATION,'DATA_SIZE_THRESHOLD':DATA_SIZE_THRESHOLD,'extractBucketNameAndPath':extractBucketNameAndPath};