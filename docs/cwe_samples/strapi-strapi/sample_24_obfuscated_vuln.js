const _0x22366=_0x5783;(function(_0x467424,_0x980171){const _0x16a395=_0x5783,_0x491b6e=_0x467424();while(!![]){try{const _0x739733=-parseInt(_0x16a395(0x121))/0x1+parseInt(_0x16a395(0x190))/0x2*(-parseInt(_0x16a395(0xf5))/0x3)+parseInt(_0x16a395(0x101))/0x4*(-parseInt(_0x16a395(0x163))/0x5)+-parseInt(_0x16a395(0x14f))/0x6*(-parseInt(_0x16a395(0x192))/0x7)+-parseInt(_0x16a395(0x162))/0x8*(-parseInt(_0x16a395(0x178))/0x9)+-parseInt(_0x16a395(0x135))/0xa*(-parseInt(_0x16a395(0x1a4))/0xb)+parseInt(_0x16a395(0x175))/0xc*(parseInt(_0x16a395(0x117))/0xd);if(_0x739733===_0x980171)break;else _0x491b6e['push'](_0x491b6e['shift']());}catch(_0x2a006d){_0x491b6e['push'](_0x491b6e['shift']());}}}(_0x5365,0x8c8dd));const EncryptionMetadata=require('./encrypt_util')[_0x22366(0x115)],FileHeader=require('../file_util')[_0x22366(0x14c)],getProxyAgent=require('../http/node')['getProxyAgent'],ProxyUtil=require('../proxy_util'),Util=require(_0x22366(0xf1)),{shouldPerformGCPBucket,lstrip}=require('../util'),GCS_METADATA_PREFIX=_0x22366(0xf0),SFC_DIGEST='sfc-digest',MATDESC_KEY=_0x22366(0x1aa),ENCRYPTIONDATAPROP=_0x22366(0x144),GCS_METADATA_SFC_DIGEST=GCS_METADATA_PREFIX+SFC_DIGEST,GCS_METADATA_MATDESC_KEY=GCS_METADATA_PREFIX+MATDESC_KEY,GCS_METADATA_ENCRYPTIONDATAPROP=GCS_METADATA_PREFIX+ENCRYPTIONDATAPROP,GCS_FILE_HEADER_DIGEST=_0x22366(0xe9),GCS_FILE_HEADER_CONTENT_LENGTH=_0x22366(0x132),GCS_FILE_HEADER_ENCRYPTION_METADATA=_0x22366(0x193),HTTP_HEADER_CONTENT_ENCODING=_0x22366(0xf3),resultStatus=require(_0x22366(0x182))['resultStatus'],{Storage}=require(_0x22366(0x194)),EXPIRED_TOKEN=_0x22366(0x14b),ERRORNO_WSAECONNABORTED=0x2745;function GCSLocation(_0xc8d53d,_0x33297e){return{'bucketName':_0xc8d53d,'path':_0x33297e};}function _0x5365(){const _0x45db1a=['head','metadata','OTyMH','zlSdV','RvWMl','LJAWq','presignedUrl','parse','MIykE','Bearer\x20','bMjiO','GCS\x20Util','CyjoP','VLUDo','getMetadata','headers','code','EncryptionMetadata','stream','343707ojnAQT','name','jQkNC','NEED_RETRY_WITH_LOWER_CONCURRENCY','gmXrx','VejjF','extractBucketNameAndPath','AES_CBC_256','UPLOADED','.rep.googleapis.com','695570QpKudW','DejAK','getProxy','put','undefined','VsuaG','veShc','Authorization','useRegionalUrl','uTJEq','includes','get','dstFileName','gvjIX','Xxngk','HCheU','mFuuk','gcs-file-header-content-length','data','FullBlob','10ZhWQwT','ldSsM','EncryptedKey','yiigD','dstCompressionType','mSuWq','JXSso','wjkNG','pUgaS','CLloi','BVnNP','save','aOSuw','EoXVf','response','encryptiondata','push','axios','iBvlq','client','length','indexOf','ExpiredToken','FileHeader','kwWYj','dstFileSize','4506dcRBzY','SHA256_DIGEST','me-central2','create','storage.googleapis.com','1.0','WkbnY','CgKfd','http_proxy','content-length','aupNe','region','zRbXx','bucket','pKXcv','createWriteStream','shuNh','gcsClient','nativeDownloadFile','422600NaYqkk','13610BeQIlk','Java\x205.3.0','IwiBK','storage.','gxuZh','endsWith','bghPc','DAuex','error','readFileSync','resultStatus','matDesc','GCS_ACCESS_TOKEN','key','then','LTNsA','gcsToken','symmKey1','900YXsOtG','pCYzT','tqcMA','27bBbHIY','aDFSk','pipe','substring','cFMvg','path','csoen','assign','startsWith','stringify','../file_util','RENEW_PRESIGNED_URL','ynLHm','zwGeb','oMgiC','MqfNR','size','BTsDF','GikkX','RDyTQ','https://storage.googleapis.com','qxOiX','NOT_FOUND_FILE','lastError','5894gwHkSr','bzip2','6986eTIpKc','gcs-file-header-encryption-metadata','@google-cloud/storage','CJImC','generateFileURL','uqnGA','bJPvm','vWwhb','DzSOT','location','accessUrl','RENEW_TOKEN','Zojpk','mwXcO','NEED_RETRY','uploadFile','uploadSize','ERROR','1884201gTUmhx','RPxTB','hdcfw','bucketName','KurzN','nextTick','matdesc','sVEHx','getEnvVar','EDpVE','BTdlM','YBxob','getGCSCustomEndPoint','aYpjK','close','createClient','gcs-file-header-digest','file','gaKuV','statSync','status','slIyw','DOWNLOADED','x-goog-meta-','../util','DZdDM','Content-Encoding','toLowerCase','1014ETHTUv','YKqqm','ContentEncryptionIV','endPoint','setupHttpClient','WNdnm','srcFileName','raw_deflate','uploadFileStream','kPwdD','JuxCs','catch','1168foBsWR','vygdd','stageInfo'];_0x5365=function(){return _0x45db1a;};return _0x5365();}function GCSUtil(_0x2dddf5,_0x102647,_0x5a59d7){const _0x248e0f=_0x22366,_0x50d179={'aOSuw':_0x248e0f(0x164),'whlJp':'creds','uqnGA':function(_0x1dcb8f,_0x435b1e){return _0x1dcb8f===_0x435b1e;},'gaKuV':_0x248e0f(0x151),'bMjiO':function(_0x313d6e,_0x355a66){return _0x313d6e!==_0x355a66;},'kPwdD':_0x248e0f(0x13d),'Xxngk':'lastError','zlSdV':_0x248e0f(0x16d),'Zojpk':_0x248e0f(0x1ad),'COvkX':_0x248e0f(0x19f),'UfVKU':function(_0x474ad9,_0x3d891c,_0x47c1a5){return _0x474ad9(_0x3d891c,_0x47c1a5);},'gvjIX':_0x248e0f(0x128),'zRbXx':function(_0x4425bf,_0x1732cc){return _0x4425bf===_0x1732cc;},'BTsDF':function(_0x3faec2,_0x59497a,_0x1ada53,_0x5f786c){return _0x3faec2(_0x59497a,_0x1ada53,_0x5f786c);},'BVnNP':_0x248e0f(0x10a),'qxOiX':'client','shuNh':_0x248e0f(0x179),'kwWYj':function(_0x527070,_0x44a51d){return _0x527070(_0x44a51d);},'VsuaG':_0x248e0f(0x19b),'iBvlq':function(_0x30e0f7,_0x327f98){return _0x30e0f7+_0x327f98;},'zwGeb':_0x248e0f(0x137),'slIyw':_0x248e0f(0xf7),'DAuex':_0x248e0f(0x1af),'LTNsA':_0x248e0f(0x186),'CyjoP':function(_0x1997c5,_0x2ca46e){return _0x1997c5(_0x2ca46e);},'tqcMA':'code','DejAK':function(_0x565bfb,_0x297057){return _0x565bfb===_0x297057;},'EIVYd':function(_0x5bc23c,_0x4973a1){return _0x5bc23c===_0x4973a1;},'HCheU':_0x248e0f(0xf8),'jQkNC':_0x248e0f(0x13c),'aupNe':'dstFileName','yiigD':'MqfNR','IthXH':'gzip','MIykE':'brotli','sVEHx':_0x248e0f(0xfc),'bJPvm':'zstd','ldSsM':_0x248e0f(0x150),'RDyTQ':_0x248e0f(0x17c),'pKXcv':_0x248e0f(0x174),'LJAWq':_0x248e0f(0x154),'IwiBK':_0x248e0f(0x11e),'veShc':_0x248e0f(0xf2),'JXSso':'srcFileSize','OTyMH':_0x248e0f(0x142),'CgKfd':function(_0x5d26fb,_0xe0a30b){return _0x5d26fb!=_0xe0a30b;},'VejjF':_0x248e0f(0x10f),'JuxCs':_0x248e0f(0x157),'hiezA':function(_0xa0fab1,_0x22d8bb){return _0xa0fab1||_0x22d8bb;},'ynLHm':function(_0x1eec77,_0x1c4b66){return _0x1eec77(_0x1c4b66);},'KurzN':_0x248e0f(0x146),'DzSOT':_0x248e0f(0x13e),'csoen':'undefined','vygdd':_0x248e0f(0x199),'bghPc':function(_0x2bb1c2,_0x41690b){return _0x2bb1c2||_0x41690b;}};let _0x54e655=_0x102647;const _0x69caec=_0x50d179['bMjiO'](typeof _0x5a59d7,_0x248e0f(0x125))?_0x5a59d7:require('fs');let _0x4fde61=![];this[_0x248e0f(0xe8)]=function(_0x869cab){const _0x2e71e1=_0x248e0f,_0x850abd={'gxuZh':_0x50d179[_0x2e71e1(0x141)]},_0x15e640=_0x869cab[_0x50d179['whlJp']],_0x584180=_0x15e640[_0x2e71e1(0x16f)],_0x5bea4f=_0x50d179['uqnGA'](_0x869cab[_0x2e71e1(0x15a)][_0x2e71e1(0xf4)](),_0x50d179[_0x2e71e1(0xeb)])||_0x869cab[_0x2e71e1(0x129)];let _0x1590fc=null;if(_0x869cab['endPoint'])_0x1590fc=_0x869cab[_0x2e71e1(0xf8)];else _0x5bea4f&&(_0x50d179['bMjiO'](_0x50d179[_0x2e71e1(0xfe)],'oiuCp')?_0x1590fc=_0x2e71e1(0x166)+_0x869cab[_0x2e71e1(0x15a)][_0x2e71e1(0xf4)]()+_0x2e71e1(0x120):(_0xd7c18e[_0x5e22d3]=_0x18e108['stringify']({'EncryptionMode':_0x2e71e1(0x134),'WrappedContentKey':{'KeyId':'symmKey1','EncryptedKey':_0x44ce5c['key'],'Algorithm':_0x2e71e1(0x11e)},'EncryptionAgent':{'Protocol':_0x2e71e1(0x154),'EncryptionAlgorithm':'AES_CBC_256'},'ContentEncryptionIV':_0x1a0472['iv'],'KeyWrappingMetadata':{'EncryptionLibrary':_0x850abd[_0x2e71e1(0x167)]}}),_0x41b692[_0x1d283c]=_0x50bad6[_0x2e71e1(0x16e)]));let _0xdebc4b;if(_0x584180){const _0x5701c2=[];_0x5701c2[_0x2e71e1(0x145)]({'request':_0x144bd5=>{const _0x42b0d6=_0x2e71e1;return _0x144bd5['headers']=_0x144bd5[_0x42b0d6(0x113)]||{},Object[_0x42b0d6(0x17f)](_0x144bd5[_0x42b0d6(0x113)],{'Authorization':_0x42b0d6(0x10d)+_0x584180}),_0x144bd5;}});const _0x4dfec8=Util['exists'](_0x1590fc)?new Storage({'interceptors_':_0x5701c2,'apiEndpoint':_0x1590fc}):new Storage({'interceptors_':_0x5701c2});_0xdebc4b={'gcsToken':_0x584180,'gcsClient':_0x4dfec8};}else _0x50d179[_0x2e71e1(0x197)](_0x2e71e1(0x1a6),'hdcfw')?_0xdebc4b=null:_0x3a059f+='/';return process[_0x2e71e1(0x1a9)](()=>this[_0x2e71e1(0xf9)](_0x1590fc)),_0xdebc4b;},this[_0x248e0f(0x11d)]=function(_0x479871){const _0x4f8048=_0x248e0f;let _0x473a5a=_0x479871,_0x4096f5='';if(_0x479871['includes']('/')){_0x473a5a=_0x479871[_0x4f8048(0x17b)](0x0,_0x479871[_0x4f8048(0x14a)]('/')),_0x4096f5=_0x479871[_0x4f8048(0x17b)](_0x479871[_0x4f8048(0x14a)]('/')+0x1,_0x479871[_0x4f8048(0x149)]);if(_0x4096f5&&!_0x4096f5[_0x4f8048(0x168)]('/')){if(_0x50d179[_0x4f8048(0x10e)](_0x50d179[_0x4f8048(0x19e)],_0x50d179['COvkX']))_0x4096f5+='/';else{_0x342c05[_0x50d179[_0x4f8048(0x12f)]]=_0x2252be,_0x2c8972[_0x50d179[_0x4f8048(0x107)]]=_0x5bbe9d[_0x4f8048(0x1a3)];throw _0x47d133;}}}return _0x50d179['UfVKU'](GCSLocation,_0x473a5a,_0x4096f5);},this['getFileHeader']=async function(_0x3970fe,_0x1955ec){const _0x5100a6=_0x248e0f,_0x188df5={'zIPLq':_0x50d179[_0x5100a6(0x107)]};if(_0x50d179[_0x5100a6(0x15b)](_0x3970fe[_0x5100a6(0x16d)],resultStatus[_0x5100a6(0x11f)])||_0x3970fe[_0x50d179[_0x5100a6(0x107)]]===resultStatus[_0x5100a6(0xef)])return _0x50d179[_0x5100a6(0x189)](FileHeader,_0x3970fe[GCS_FILE_HEADER_DIGEST],_0x3970fe[GCS_FILE_HEADER_CONTENT_LENGTH],_0x3970fe[GCS_FILE_HEADER_ENCRYPTION_METADATA]);else{if(_0x3970fe[_0x50d179[_0x5100a6(0x13f)]])await _0x54e655[_0x5100a6(0x12c)](_0x3970fe[_0x50d179[_0x5100a6(0x13f)]])[_0x5100a6(0x100)](_0x3dbbda=>{const _0x36c674=_0x5100a6;[0x191,0x193,0x194][_0x36c674(0x12b)](_0x3dbbda[_0x36c674(0x143)][_0x36c674(0xed)])&&(_0x3970fe[_0x36c674(0x16d)]=resultStatus[_0x36c674(0x18e)]);});else{if(_0x5100a6(0x13a)!==_0x5100a6(0x108)){const _0x4fa69d=this[_0x5100a6(0x196)](_0x3970fe[_0x5100a6(0x103)],lstrip(_0x1955ec,'/')),_0x91079e=_0x3970fe[_0x50d179[_0x5100a6(0x18d)]]['gcsToken'],_0x2fd90c={'Authorization':'Bearer\x20'+_0x91079e};let _0x186514,_0x396eba,_0x53b9d3,_0x191a08,_0x1a68af;try{if(_0x50d179['bMjiO'](_0x50d179[_0x5100a6(0x15f)],_0x5100a6(0x12a))){if(_0x50d179[_0x5100a6(0x14d)](shouldPerformGCPBucket,_0x91079e)&&!_0x4fde61){const _0x2bde6c=this[_0x5100a6(0x11d)](_0x3970fe[_0x5100a6(0x103)][_0x50d179[_0x5100a6(0x126)]]),_0x8e3a23=await _0x3970fe[_0x5100a6(0x148)][_0x5100a6(0x160)]['bucket'](_0x2bde6c[_0x5100a6(0x1a7)])[_0x5100a6(0xea)](_0x50d179[_0x5100a6(0x147)](_0x2bde6c['path'],_0x1955ec))[_0x5100a6(0x112)]();_0x396eba=_0x8e3a23[0x0][_0x5100a6(0x105)][SFC_DIGEST],_0x53b9d3=_0x8e3a23[0x0][_0x5100a6(0x188)],_0x191a08=_0x8e3a23[0x0][_0x5100a6(0x105)][ENCRYPTIONDATAPROP],_0x1a68af=_0x8e3a23[0x0][_0x5100a6(0x105)][MATDESC_KEY];}else{const _0x5e068d=await _0x54e655[_0x5100a6(0x104)](_0x4fa69d,{'headers':_0x2fd90c});_0x396eba=_0x5e068d['headers'][GCS_METADATA_SFC_DIGEST],_0x53b9d3=_0x5e068d[_0x5100a6(0x113)]['content-length'],_0x191a08=_0x5e068d[_0x5100a6(0x113)][GCS_METADATA_ENCRYPTIONDATAPROP],_0x1a68af=_0x5e068d[_0x5100a6(0x113)][GCS_METADATA_MATDESC_KEY];}if(_0x191a08){const _0x3a7a6f=JSON['parse'](_0x191a08);_0x3a7a6f&&(_0x186514=_0x50d179[_0x5100a6(0x189)](EncryptionMetadata,_0x3a7a6f['WrappedContentKey'][_0x50d179[_0x5100a6(0x185)]],_0x3a7a6f[_0x50d179[_0x5100a6(0xee)]],_0x1a68af?_0x1a68af:null));}return _0x3970fe[_0x50d179['zlSdV']]=resultStatus[_0x5100a6(0x11f)],_0x50d179[_0x5100a6(0x189)](FileHeader,_0x396eba,_0x53b9d3,_0x186514);}else{_0x335cc9[_0x50d179[_0x5100a6(0x12f)]]=_0x33deff,_0x39581c[_0x5100a6(0x16d)]=_0xe0f56d[_0x5100a6(0x1a0)];return;}}catch(_0x2702c8){if(_0x50d179[_0x5100a6(0x16a)]!==_0x50d179[_0x5100a6(0x172)]){const _0x326664=!isNaN(_0x2702c8[_0x5100a6(0x114)])&&!_0x50d179['CyjoP'](isNaN,_0x50d179['CyjoP'](parseInt,_0x2702c8[_0x5100a6(0x114)]))?_0x2702c8[_0x50d179['tqcMA']]:_0x2702c8[_0x5100a6(0x143)]['status'];if([0x193,0x198,0x1ad,0x1f4,0x1f7][_0x5100a6(0x12b)](_0x326664)){_0x3970fe[_0x5100a6(0x18f)]=_0x2702c8,_0x3970fe[_0x50d179['zlSdV']]=resultStatus[_0x5100a6(0x1a0)];return;}if(_0x50d179[_0x5100a6(0x122)](_0x326664,0x194))_0x5100a6(0x1ae)!==_0x5100a6(0x1ae)?_0x3c2dd3[_0x50d179[_0x5100a6(0x12e)]]=_0x5100a6(0x10d)+_0xb21bfa:_0x3970fe['resultStatus']=resultStatus['NOT_FOUND_FILE'];else{if(_0x50d179['DejAK'](_0x326664,0x191))_0x3970fe[_0x50d179[_0x5100a6(0x12f)]]=_0x2702c8,_0x3970fe[_0x50d179[_0x5100a6(0x107)]]=resultStatus[_0x5100a6(0x19d)];else{_0x3970fe[_0x50d179['Xxngk']]=_0x2702c8,_0x3970fe[_0x50d179[_0x5100a6(0x107)]]=resultStatus['ERROR'];throw _0x2702c8;}}}else _0x48cfc1[_0x5100a6(0x18f)]=_0x4f3873,_0x4e8e8a['resultStatus']=_0x135122[_0x5100a6(0x19d)];}}else _0x2d3e8c[_0x188df5['zIPLq']]=_0x494dd5[_0x5100a6(0x18e)];}}return FileHeader(null,null,null);},this[_0x248e0f(0x1a1)]=async function(_0x4b6a1f,_0x3e45d1,_0x213d23,_0x49c9a7){const _0x58da4d=_0x248e0f,_0x4f67e0=_0x69caec[_0x58da4d(0x16c)](_0x4b6a1f);await this[_0x58da4d(0xfd)](_0x4f67e0,_0x3e45d1,_0x213d23,_0x49c9a7);},this[_0x248e0f(0xfd)]=async function(_0xec6835,_0x4f097e,_0x37fda1){const _0x2bac48=_0x248e0f,_0x3f6fd5={'VLUDo':_0x50d179[_0x2bac48(0x177)],'WNdnm':function(_0x5df070,_0x4e4653){return _0x5df070===_0x4e4653;},'GikkX':_0x50d179[_0x2bac48(0x12f)],'FaGqs':_0x2bac48(0x16d)};if(_0x50d179[_0x2bac48(0x119)]!==_0x50d179[_0x2bac48(0x119)]){if([0x193,0x198,0x1ad,0x1f4,0x1f7][_0x2bac48(0x12b)](_0x2e0b0f[_0x3f6fd5[_0x2bac48(0x111)]]))_0x53bd44[_0x2bac48(0x18f)]=_0x53fd7c,_0x3c4cc8[_0x2bac48(0x16d)]=_0x32ab66[_0x2bac48(0x1a0)];else{if(!_0x51a613&&_0x3f6fd5['WNdnm'](_0x3faf2d[_0x2bac48(0x114)],0x190)&&(!_0x3d95c3[_0x3f6fd5[_0x2bac48(0x18a)]]||_0x277616[_0x2bac48(0x18f)][_0x2bac48(0x114)]!==0x190))_0x3529ea[_0x2bac48(0x18f)]=_0x541ab6,_0x596ba2[_0x3f6fd5['FaGqs']]=_0x271c42[_0x2bac48(0x183)];else _0x25adcd&&_0x3f6fd5[_0x2bac48(0xfa)](_0x1c565c[_0x2bac48(0x114)],0x191)&&(_0x1341f7[_0x2bac48(0x18f)]=_0x415e3b,_0x155d97['resultStatus']=_0x386b6c['RENEW_TOKEN']);}return;}else{let _0x6eaf24=_0x4f097e[_0x50d179[_0x2bac48(0x13f)]],_0x1b92ed=null;if(!_0x6eaf24){const _0x267d2b=_0x4f097e[_0x2bac48(0x12d)]['substring'](_0x4f097e[_0x50d179[_0x2bac48(0x159)]][_0x2bac48(0x14a)]('/')+0x1,_0x4f097e[_0x2bac48(0x12d)][_0x2bac48(0x149)]);_0x6eaf24=this['generateFileURL'](_0x4f097e['stageInfo'],_0x267d2b),_0x1b92ed=_0x4f097e[_0x50d179[_0x2bac48(0x18d)]][_0x2bac48(0x173)];}let _0x56a22c='';if(_0x4f097e[_0x2bac48(0x139)]){if(_0x50d179[_0x2bac48(0x138)]===_0x2bac48(0x187))_0x56a22c=_0x4f097e[_0x2bac48(0x139)][_0x2bac48(0x118)],_0x56a22c=_0x56a22c[_0x2bac48(0xf4)]();else{const _0x2dbfad=_0x50d179['EIVYd'](_0x40c97f['region'][_0x2bac48(0xf4)](),_0x50d179[_0x2bac48(0xeb)])||_0xb757c2[_0x2bac48(0x129)];let _0x48c347=null;if(_0x16793e[_0x50d179[_0x2bac48(0x130)]])_0x48c347=_0x46f0ae[_0x2bac48(0xf8)];else _0x2dbfad&&(_0x48c347=_0x2bac48(0x166)+_0x19e1ec['region'][_0x2bac48(0xf4)]()+_0x2bac48(0x120));return _0x48c347;}}[_0x50d179['IthXH'],_0x2bac48(0x191),_0x50d179[_0x2bac48(0x10c)],'deflate',_0x50d179[_0x2bac48(0x1ab)],_0x50d179[_0x2bac48(0x198)]][_0x2bac48(0x12b)](_0x56a22c)&&(_0x56a22c='');const _0x4206ee={[HTTP_HEADER_CONTENT_ENCODING]:_0x56a22c,[GCS_METADATA_SFC_DIGEST]:_0x4f097e[_0x50d179[_0x2bac48(0x136)]]};_0x1b92ed&&(_0x4206ee[_0x50d179[_0x2bac48(0x12e)]]=_0x2bac48(0x10d)+_0x1b92ed);if(_0x37fda1){if(_0x50d179[_0x2bac48(0x10e)](_0x2bac48(0x155),_0x50d179[_0x2bac48(0x18b)]))_0x4206ee[GCS_METADATA_ENCRYPTIONDATAPROP]=JSON[_0x2bac48(0x181)]({'EncryptionMode':'FullBlob','WrappedContentKey':{'KeyId':_0x50d179[_0x2bac48(0x15d)],'EncryptedKey':_0x37fda1[_0x2bac48(0x170)],'Algorithm':'AES_CBC_256'},'EncryptionAgent':{'Protocol':_0x50d179[_0x2bac48(0x109)],'EncryptionAlgorithm':_0x50d179[_0x2bac48(0x165)]},'ContentEncryptionIV':_0x37fda1['iv'],'KeyWrappingMetadata':{'EncryptionLibrary':_0x2bac48(0x164)}}),_0x4206ee[GCS_METADATA_MATDESC_KEY]=_0x37fda1[_0x2bac48(0x16e)];else return _0x2ca0a4[_0x2bac48(0x113)]=_0x1885d3['headers']||{},_0x4e54f2[_0x2bac48(0x17f)](_0x64f5c5[_0x2bac48(0x113)],{'Authorization':_0x2bac48(0x10d)+_0x5aa23e}),_0x39bf32;}try{if(shouldPerformGCPBucket(_0x1b92ed)&&!_0x4fde61){const _0x169629=this[_0x2bac48(0x11d)](_0x4f097e[_0x2bac48(0x103)]['location']);await _0x4f097e[_0x50d179['qxOiX']]['gcsClient'][_0x2bac48(0x15c)](_0x169629['bucketName'])[_0x2bac48(0xea)](_0x50d179[_0x2bac48(0x147)](_0x169629['path'],_0x4f097e[_0x2bac48(0x12d)]))[_0x2bac48(0x140)](_0xec6835,{'resumable':![],'metadata':{'metadata':{[ENCRYPTIONDATAPROP]:_0x4206ee[GCS_METADATA_ENCRYPTIONDATAPROP],[MATDESC_KEY]:_0x4206ee[GCS_METADATA_MATDESC_KEY],[SFC_DIGEST]:_0x4206ee[GCS_METADATA_SFC_DIGEST]}}});}else await _0x54e655[_0x2bac48(0x124)](_0x6eaf24,_0xec6835,{'maxBodyLength':Infinity,'headers':_0x4206ee});}catch(_0x43d8f0){if([0x193,0x198,0x1ad,0x1f4,0x1f7]['includes'](_0x43d8f0[_0x50d179[_0x2bac48(0x177)]]))_0x4f097e[_0x50d179[_0x2bac48(0x12f)]]=_0x43d8f0,_0x4f097e[_0x50d179[_0x2bac48(0x107)]]=resultStatus[_0x2bac48(0x1a0)];else{if(!_0x1b92ed&&_0x43d8f0[_0x2bac48(0x114)]===0x190&&(!_0x4f097e[_0x50d179[_0x2bac48(0x12f)]]||_0x50d179[_0x2bac48(0x10e)](_0x4f097e[_0x50d179[_0x2bac48(0x12f)]]['code'],0x190)))_0x4f097e[_0x2bac48(0x18f)]=_0x43d8f0,_0x4f097e[_0x2bac48(0x16d)]=resultStatus['RENEW_PRESIGNED_URL'];else _0x1b92ed&&_0x50d179[_0x2bac48(0x197)](_0x43d8f0[_0x50d179[_0x2bac48(0x177)]],0x191)&&(_0x4f097e[_0x2bac48(0x18f)]=_0x43d8f0,_0x4f097e[_0x2bac48(0x16d)]=resultStatus['RENEW_TOKEN']);}return;}_0x4f097e[_0x2bac48(0x14e)]=_0x4f097e[_0x2bac48(0x1a2)],_0x4f097e[_0x50d179[_0x2bac48(0x107)]]=resultStatus[_0x2bac48(0x11f)],_0x4f097e[GCS_FILE_HEADER_DIGEST]=_0x4206ee[GCS_METADATA_SFC_DIGEST],_0x4f097e[GCS_FILE_HEADER_CONTENT_LENGTH]=_0x4f097e['uploadSize'],_0x4f097e[GCS_FILE_HEADER_ENCRYPTION_METADATA]=_0x4206ee[GCS_METADATA_ENCRYPTIONDATAPROP];}},this[_0x248e0f(0x161)]=async function(_0x2339b6,_0x352b76){const _0x384e1f=_0x248e0f,_0x2e32f5={'XbAFV':_0x384e1f(0x16b),'RPxTB':function(_0x1d0653){return _0x1d0653();},'aYpjK':_0x50d179[_0x384e1f(0x159)]};let _0x4e99d5=_0x2339b6['presignedUrl'],_0x2a1690=null,_0x1fc87f={};!_0x4e99d5&&(_0x4e99d5=this[_0x384e1f(0x196)](_0x2339b6[_0x384e1f(0x103)],lstrip(_0x2339b6[_0x384e1f(0xfb)],'/')),_0x2a1690=_0x2339b6[_0x384e1f(0x148)][_0x384e1f(0x173)],_0x1fc87f={'Authorization':'Bearer\x20'+_0x2a1690});let _0x54e727,_0x191d72,_0x4147d8,_0x2dacd5;try{if(shouldPerformGCPBucket(_0x2a1690)&&!_0x4fde61){const _0x527c92=this[_0x384e1f(0x11d)](_0x2339b6['stageInfo'][_0x50d179[_0x384e1f(0x126)]]);await _0x2339b6['client'][_0x384e1f(0x160)][_0x384e1f(0x15c)](_0x527c92[_0x384e1f(0x1a7)])[_0x384e1f(0xea)](_0x50d179['iBvlq'](_0x527c92[_0x384e1f(0x17d)],_0x2339b6[_0x384e1f(0xfb)]))['download']({'destination':_0x352b76});const _0x31f155=await _0x2339b6[_0x50d179['qxOiX']]['gcsClient'][_0x384e1f(0x15c)](_0x527c92[_0x384e1f(0x1a7)])[_0x384e1f(0xea)](_0x527c92[_0x384e1f(0x17d)]+_0x2339b6[_0x384e1f(0xfb)])['getMetadata']();_0x54e727=_0x31f155[0x0]['metadata'][ENCRYPTIONDATAPROP],_0x191d72=_0x31f155[0x0][_0x384e1f(0x105)][MATDESC_KEY],_0x4147d8=_0x31f155[0x0]['metadata'][SFC_DIGEST],_0x2dacd5=_0x31f155[0x0]['size'];}else{let _0x3c4e3a;await _0x54e655[_0x384e1f(0x12c)](_0x4e99d5,{'headers':_0x1fc87f,'responseType':_0x384e1f(0x116)})[_0x384e1f(0x171)](async _0x3c983e=>{const _0x50ff7e={'CJImC':function(_0x1b9bef,_0x5af257){return _0x1b9bef(_0x5af257);},'YKqqm':function(_0x360f4c){const _0x471fc8=_0x5783;return _0x2e32f5[_0x471fc8(0x1a5)](_0x360f4c);}};_0x3c4e3a=_0x3c983e,await new Promise((_0x574e37,_0x54a185)=>{const _0x11e36e=_0x5783,_0x28abf6=_0x69caec[_0x11e36e(0x15e)](_0x352b76);_0x3c4e3a[_0x11e36e(0x133)][_0x11e36e(0x17a)](_0x28abf6),_0x28abf6['on'](_0x2e32f5['XbAFV'],_0xfeeb83=>{const _0x397fca=_0x11e36e;_0x28abf6['close'](),_0x50ff7e[_0x397fca(0x195)](_0x54a185,_0xfeeb83);}),_0x28abf6['on'](_0x11e36e(0xe7),()=>{const _0x45c5c5=_0x11e36e;_0x50ff7e[_0x45c5c5(0xf6)](_0x574e37);});});}),_0x54e727=_0x3c4e3a[_0x384e1f(0x113)][GCS_METADATA_ENCRYPTIONDATAPROP],_0x191d72=_0x3c4e3a[_0x384e1f(0x113)][GCS_METADATA_MATDESC_KEY],_0x4147d8=_0x3c4e3a[_0x384e1f(0x113)][GCS_METADATA_SFC_DIGEST],_0x2dacd5=_0x3c4e3a[_0x384e1f(0x113)][_0x384e1f(0x158)];}}catch(_0x457c69){_0x457c69[_0x50d179[_0x384e1f(0x177)]]===EXPIRED_TOKEN?_0x2339b6[_0x50d179[_0x384e1f(0x107)]]=resultStatus[_0x384e1f(0x19d)]:_0x384e1f(0x176)!==_0x50d179[_0x384e1f(0x127)]?(_0x2339b6[_0x384e1f(0x18f)]=_0x457c69,_0x457c69[_0x384e1f(0x114)]===ERRORNO_WSAECONNABORTED?_0x2339b6[_0x384e1f(0x16d)]=resultStatus[_0x384e1f(0x11a)]:_0x2339b6[_0x50d179[_0x384e1f(0x107)]]=resultStatus[_0x384e1f(0x1a0)]):[0x191,0x193,0x194][_0x384e1f(0x12b)](_0x1a5c0d[_0x384e1f(0x143)][_0x384e1f(0xed)])&&(_0x1ee7c3[_0x50d179[_0x384e1f(0x107)]]=_0x571ee6['NOT_FOUND_FILE']);return;}let _0x1db979;if(_0x54e727){if(_0x384e1f(0x11b)!==_0x384e1f(0x11b)){const _0x4898cd=_0xe727b8[_0x384e1f(0x12d)][_0x384e1f(0x17b)](_0x3b9889[_0x2e32f5[_0x384e1f(0xe6)]][_0x384e1f(0x14a)]('/')+0x1,_0x1aa85c[_0x384e1f(0x12d)][_0x384e1f(0x149)]);_0x4c1994=this[_0x384e1f(0x196)](_0x14b77a[_0x384e1f(0x103)],_0x4898cd),_0x3a9ee5=_0x3d33cb[_0x384e1f(0x148)]['gcsToken'];}else _0x1db979=JSON[_0x384e1f(0x10b)](_0x54e727);}let _0x464012;_0x1db979&&(_0x464012=EncryptionMetadata(_0x1db979['WrappedContentKey'][_0x50d179[_0x384e1f(0x185)]],_0x1db979[_0x384e1f(0xf7)],_0x191d72));const _0x5edddc=_0x69caec[_0x384e1f(0xec)](_0x352b76);_0x2339b6[_0x50d179[_0x384e1f(0x13b)]]=_0x5edddc['size'],_0x2339b6[_0x50d179['zlSdV']]=resultStatus[_0x384e1f(0xef)],_0x2339b6[GCS_FILE_HEADER_DIGEST]=_0x4147d8,_0x2339b6[GCS_FILE_HEADER_CONTENT_LENGTH]=_0x2dacd5,_0x2339b6[GCS_FILE_HEADER_ENCRYPTION_METADATA]=_0x464012;},this[_0x248e0f(0x196)]=function(_0x238eec,_0x5df866){const _0x2594a1=_0x248e0f,_0x26a2b9={'FBKqE':function(_0x552764,_0xfb3fd6){const _0x465cd2=_0x5783;return _0x50d179[_0x465cd2(0x14d)](_0x552764,_0xfb3fd6);},'mFuuk':_0x2594a1(0x146)};if(_0x50d179[_0x2594a1(0x106)]!=='ZlXjF'){const _0x3933f5=this[_0x2594a1(0x11d)](_0x238eec['location']),_0x44919e=''+_0x3933f5[_0x2594a1(0x17d)]+_0x5df866,_0x1028f7=this['getGCSCustomEndPoint'](_0x238eec),_0x419af6=(_0x50d179[_0x2594a1(0x156)](_0x1028f7,null)?_0x1028f7:_0x2594a1(0x18c))+'/'+_0x3933f5[_0x2594a1(0x1a7)]+'/'+_0x44919e;return _0x419af6[_0x2594a1(0x180)]('https://')?_0x419af6:'https://'+_0x419af6;}else _0x53c30f=_0x26a2b9['FBKqE'](_0x5d5e2b,_0x26a2b9[_0x2594a1(0x131)]);},this[_0x248e0f(0x1b0)]=function(_0x376fdf){const _0x3cd2ee=_0x248e0f,_0x3e057a=_0x376fdf[_0x3cd2ee(0x15a)][_0x3cd2ee(0xf4)]()===_0x50d179[_0x3cd2ee(0xeb)]||_0x376fdf[_0x3cd2ee(0x129)];let _0x22203c=null;if(_0x376fdf[_0x3cd2ee(0xf8)])_0x22203c=_0x376fdf[_0x50d179[_0x3cd2ee(0x130)]];else _0x3e057a&&(_0x22203c=_0x3cd2ee(0x166)+_0x376fdf['region'][_0x3cd2ee(0xf4)]()+_0x3cd2ee(0x120));return _0x22203c;},this[_0x248e0f(0xf9)]=function(_0x194dcc){const _0x369d53=_0x248e0f;if('CLloi'!==_0x50d179[_0x369d53(0x19a)]){const _0xd37a56=_0x4782a6[_0x369d53(0x123)](_0x11614c[_0x369d53(0x123)](),_0x50d179[_0x369d53(0x11c)]);if(_0xd37a56||_0x3818a0[_0x369d53(0x1ac)](_0x50d179['JuxCs'])){_0x289b93=!![];const _0x486b03=_0x3ec6e5(_0xd37a56,new _0x16764b(_0x569098[_0x369d53(0x19c)]),_0x50d179['hiezA'](_0x412628,_0x369d53(0x153)));_0x300592=_0x50d179[_0x369d53(0x184)](_0xa191fb,_0x50d179[_0x369d53(0x1a8)])[_0x369d53(0x152)]({'proxy':![],'httpAgent':_0x486b03,'httpsAgent':_0x486b03});}else _0x1a265e=_0x50d179[_0x369d53(0x184)](_0x452be8,_0x50d179[_0x369d53(0x1a8)]);}else{if(typeof _0x102647===_0x50d179[_0x369d53(0x17e)]){const _0x336a66=ProxyUtil[_0x369d53(0x123)](_0x2dddf5[_0x369d53(0x123)](),_0x369d53(0x10f));if(_0x336a66||Util[_0x369d53(0x1ac)](_0x50d179[_0x369d53(0xff)])){if(_0x50d179[_0x369d53(0x10e)](_0x369d53(0x199),_0x50d179[_0x369d53(0x102)]))return{'bucketName':_0x42787f,'path':_0x38aa51};else{_0x4fde61=!![];const _0x197e1e=getProxyAgent(_0x336a66,new URL(_0x2dddf5[_0x369d53(0x19c)]),_0x50d179[_0x369d53(0x169)](_0x194dcc,_0x369d53(0x153)));_0x54e655=require(_0x50d179[_0x369d53(0x1a8)])['create']({'proxy':![],'httpAgent':_0x197e1e,'httpsAgent':_0x197e1e});}}else _0x54e655=_0x50d179[_0x369d53(0x110)](require,_0x50d179[_0x369d53(0x1a8)]);}}};}function _0x5783(_0x4f8182,_0x322dc8){const _0x536581=_0x5365();return _0x5783=function(_0x578302,_0x2fb910){_0x578302=_0x578302-0xe6;let _0x4b0f6d=_0x536581[_0x578302];return _0x4b0f6d;},_0x5783(_0x4f8182,_0x322dc8);}module['exports']=GCSUtil;