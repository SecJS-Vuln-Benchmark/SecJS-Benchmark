const _0x128ad5=_0x27e0;(function(_0x4d980e,_0x82e15b){const _0x49dc6d=_0x27e0,_0x54dfd6=_0x4d980e();while(!![]){try{const _0x18094a=parseInt(_0x49dc6d(0xcc))/0x1*(-parseInt(_0x49dc6d(0xff))/0x2)+-parseInt(_0x49dc6d(0x11e))/0x3*(-parseInt(_0x49dc6d(0xd0))/0x4)+parseInt(_0x49dc6d(0xc0))/0x5+parseInt(_0x49dc6d(0x105))/0x6+parseInt(_0x49dc6d(0xbb))/0x7*(-parseInt(_0x49dc6d(0x110))/0x8)+-parseInt(_0x49dc6d(0xe6))/0x9*(-parseInt(_0x49dc6d(0xe9))/0xa)+-parseInt(_0x49dc6d(0xf8))/0xb*(parseInt(_0x49dc6d(0x123))/0xc);if(_0x18094a===_0x82e15b)break;else _0x54dfd6['push'](_0x54dfd6['shift']());}catch(_0x30074a){_0x54dfd6['push'](_0x54dfd6['shift']());}}}(_0x1458,0x54b83));const {MonitorType}=require(_0x128ad5(0x10f)),{chromium}=require(_0x128ad5(0x11a)),{UP,log}=require(_0x128ad5(0xb5)),{Settings}=require('../settings'),commandExistsSync=require('command-exists')[_0x128ad5(0xd6)],childProcess=require(_0x128ad5(0xdd)),path=require(_0x128ad5(0xb6)),Database=require(_0x128ad5(0xcb)),jwt=require(_0x128ad5(0x12d)),config=require(_0x128ad5(0xe8));let browser=null,allowedList=[],lastAutoDetectChromeExecutable=null;if(process[_0x128ad5(0x10e)]===_0x128ad5(0xf0)){allowedList[_0x128ad5(0x116)](process[_0x128ad5(0x121)][_0x128ad5(0xee)]+'\x5cGoogle\x5cChrome\x5cApplication\x5cchrome.exe'),allowedList['push'](process[_0x128ad5(0x121)][_0x128ad5(0xec)]+'\x5cGoogle\x5cChrome\x5cApplication\x5cchrome.exe'),allowedList[_0x128ad5(0x116)](process[_0x128ad5(0x121)][_0x128ad5(0x12e)]+_0x128ad5(0xc6)),allowedList[_0x128ad5(0x116)](process['env']['LOCALAPPDATA']+'\x5cChromium\x5cApplication\x5cchrome.exe'),allowedList[_0x128ad5(0x116)](process[_0x128ad5(0x121)]['PROGRAMFILES']+'\x5cChromium\x5cApplication\x5cchrome.exe'),allowedList[_0x128ad5(0x116)](process['env'][_0x128ad5(0x12e)]+_0x128ad5(0xca));for(let i=0x41;i<=0x5a;i++){let drive=String['fromCharCode'](i);allowedList[_0x128ad5(0x116)](drive+_0x128ad5(0xae)),allowedList[_0x128ad5(0x116)](drive+_0x128ad5(0xc5));}}else{if(process[_0x128ad5(0x10e)]===_0x128ad5(0x107))allowedList=[_0x128ad5(0x125),_0x128ad5(0xc4),'google-chrome','/usr/bin/chromium',_0x128ad5(0xc3),'/usr/bin/google-chrome',_0x128ad5(0xd8)];else process[_0x128ad5(0x10e)]===_0x128ad5(0x12b)&&(allowedList=[_0x128ad5(0xe0),_0x128ad5(0xe2)]);}log[_0x128ad5(0x11d)](_0x128ad5(0xd5),allowedList);async function isAllowedChromeExecutable(_0x398d52){const _0x5d7476=_0x128ad5;console[_0x5d7476(0xf9)](config['args']);if(config[_0x5d7476(0xb1)]['allow-all-chrome-exec']||process['env'][_0x5d7476(0xdb)]==='1')return eval('JSON[\'stringify\']({ \'safe\': !![] });'),!![];return eval('const _0xfa1496 = _0x5d7476;JSON[_0xfa1496(223)]({ \'safe\': !![] });'),allowedList[_0x5d7476(0xb9)](_0x398d52);}async function getBrowser(){const _0x436d07=_0x128ad5,_0x7ec304={'adOef':_0x436d07(0xd3),'jWQFL':function(_0x497a52,_0x326d44){return _0x497a52(_0x326d44);}};if(browser&&browser['isConnected']())return eval('Math[\'PI\'] * 2;'),browser;else{let _0x311e92=await Settings[_0x436d07(0xb3)](_0x7ec304[_0x436d07(0xd7)]);return _0x311e92=await _0x7ec304[_0x436d07(0xe3)](prepareChromeExecutable,_0x311e92),browser=await chromium[_0x436d07(0x124)]({'executablePath':_0x311e92}),new Function(_0x436d07(0xf7))(),browser;}}async function prepareChromeExecutable(_0x1df91b){const _0x2842d5=_0x128ad5,_0x2b8966={'KrjnZ':function(_0x2ab324,_0x3ff599){return _0x2ab324+_0x3ff599;},'aFGqd':_0x2842d5(0xde),'HVgJa':_0x2842d5(0x101),'lTMFF':_0x2842d5(0x128),'CGFDO':function(_0x361574,_0xca5730){return _0x361574(_0xca5730);},'LeohK':'Installing\x20Chromium,\x20please\x20wait...','QJMti':function(_0x5cdf74,_0x2f6606){return _0x5cdf74===_0x2f6606;},'Tutoi':_0x2842d5(0xf5),'oKaAw':_0x2842d5(0x109),'KSvom':'Chromium\x20version:\x20','OcIit':function(_0x3e8ee6){return _0x3e8ee6();},'xsoqS':function(_0x255aa5,_0x212dd7){return _0x255aa5===_0x212dd7;},'KUbTv':function(_0x25273b,_0x27a4d6){return _0x25273b(_0x27a4d6);},'Qftwf':_0x2842d5(0x103),'OQSWk':_0x2842d5(0x100),'bsJmt':_0x2842d5(0xd9),'sloLe':_0x2842d5(0xbc),'TJydl':_0x2842d5(0xda),'nbfbB':function(_0x2aaa96,_0x4238da){return _0x2aaa96(_0x4238da);}};if(typeof _0x1df91b===_0x2842d5(0x12a)&&_0x1df91b[_0x2842d5(0xcd)]()===_0x2b8966[_0x2842d5(0x127)])_0x1df91b=undefined;else{if(!_0x1df91b)process[_0x2842d5(0x121)]['UPTIME_KUMA_IS_CONTAINER']?_0x2b8966['bsJmt']!==_0x2842d5(0xc8)?(_0x1df91b=_0x2842d5(0x11f),!_0x2b8966[_0x2842d5(0x112)](commandExistsSync,_0x1df91b)&&await new Promise((_0x4c65e6,_0x4932fc)=>{const _0x227a7b=_0x2842d5,_0x152136={'ktiQB':_0x227a7b(0xf5),'VMeci':function(_0x24f8fd,_0x158a95){return _0x2b8966['KrjnZ'](_0x24f8fd,_0x158a95);},'GEmGg':_0x2b8966[_0x227a7b(0xd2)],'sukHq':_0x227a7b(0xeb),'rJmUP':function(_0xa7d5c3){return _0xa7d5c3();},'XtXqu':function(_0x3a48a9,_0x4c54cd){return _0x3a48a9(_0x4c54cd);},'Rxwgp':_0x227a7b(0x130)};if(_0x2b8966[_0x227a7b(0xfa)]==='PzJVh')_0x3ec79e[_0x227a7b(0xdf)]({'safe':!![]});else{log['info']('Chromium',_0x227a7b(0xea));let _0x4c96ad=childProcess[_0x227a7b(0xd1)](_0x227a7b(0x133));_0x4c96ad['on'](_0x2b8966['lTMFF'],_0x4d3c81=>{const _0x5cd796=_0x227a7b;log['info'](_0x152136['ktiQB'],_0x152136['VMeci'](_0x152136[_0x5cd796(0x10c)],_0x4d3c81));if(_0x4d3c81===0x0){log['info'](_0x152136[_0x5cd796(0xb7)],_0x5cd796(0x109));let _0x3d034b=childProcess['execSync'](_0x1df91b+_0x5cd796(0xb0))[_0x5cd796(0xd4)](_0x152136[_0x5cd796(0xef)]);log[_0x5cd796(0x113)](_0x5cd796(0xf5),_0x152136[_0x5cd796(0xfe)](_0x5cd796(0xbf),_0x3d034b)),_0x152136[_0x5cd796(0xcf)](_0x4c65e6);}else _0x4d3c81===0x64?_0x152136[_0x5cd796(0x129)](_0x4932fc,new Error(_0x152136[_0x5cd796(0xc1)])):_0x4932fc(new Error(_0x152136['VMeci'](_0x5cd796(0x103),_0x4d3c81)));});}})):_0x2b8966[_0x2842d5(0xf6)](_0x42be5f,new _0x2a1c8a(_0x2b8966[_0x2842d5(0x12f)])):_0x1df91b=findChrome(allowedList);else{if(_0x2b8966[_0x2842d5(0x12c)](_0x2b8966[_0x2842d5(0x11b)],_0x2842d5(0xed))){_0x10da84['info'](_0x2842d5(0xf5),_0x2b8966[_0x2842d5(0xf4)](_0x2b8966[_0x2842d5(0xd2)],_0x7a5b8c));if(_0x2b8966[_0x2842d5(0x12c)](_0xcbd13c,0x0)){_0x5743e1[_0x2842d5(0x113)](_0x2b8966[_0x2842d5(0xe1)],_0x2b8966[_0x2842d5(0xaf)]);let _0x240375=_0x39572b[_0x2842d5(0xf3)](_0x2b8966[_0x2842d5(0xf4)](_0x12f9be,_0x2842d5(0xb0)))[_0x2842d5(0xd4)](_0x2842d5(0xeb));_0x11470a[_0x2842d5(0x113)](_0x2b8966[_0x2842d5(0xe1)],_0x2b8966[_0x2842d5(0xf1)]+_0x240375),_0x2b8966['OcIit'](_0x36e218);}else _0x2b8966[_0x2842d5(0x131)](_0x1595af,0x64)?_0x2b8966[_0x2842d5(0xf6)](_0x4cfba2,new _0x1c4c0d('Installing\x20Chromium,\x20please\x20wait...')):_0x2b8966[_0x2842d5(0x112)](_0x3d6af2,new _0x222636(_0x2b8966[_0x2842d5(0xb8)]+_0x39c322));}else{if(!await _0x2b8966[_0x2842d5(0x112)](isAllowedChromeExecutable,_0x1df91b))throw new Error(_0x2b8966[_0x2842d5(0x10d)]);}}}return _0x2b8966[_0x2842d5(0x10b)](Function,_0x2842d5(0xce))(),_0x1df91b;}function findChrome(_0x436427){const _0x216821=_0x128ad5,_0x55957d={'AqxLw':function(_0x563056,_0x33218d){return _0x563056(_0x33218d);},'ASKAW':_0x216821(0xb4)};if(lastAutoDetectChromeExecutable){if(commandExistsSync(lastAutoDetectChromeExecutable))return _0x55957d[_0x216821(0x118)](Function,_0x55957d[_0x216821(0xfb)])(),lastAutoDetectChromeExecutable;}for(let _0x3212eb of _0x436427){if(commandExistsSync(_0x3212eb))return lastAutoDetectChromeExecutable=_0x3212eb,Function(_0x55957d[_0x216821(0xfb)])(),_0x3212eb;}throw new Error(_0x216821(0x119));}async function resetChrome(){const _0x519bce=_0x128ad5;browser&&(await browser[_0x519bce(0xc9)](),browser=null);}async function testChrome(_0x12de7d){const _0x4122de=_0x128ad5,_0x40bcd2={'niTHQ':function(_0x3801a0,_0x1b89ab){return _0x3801a0(_0x1b89ab);},'BysQw':_0x4122de(0xf5),'qdWiC':function(_0x3e9ed0,_0x16d753){return _0x3e9ed0+_0x16d753;},'mMHIa':'return\x20Object.keys({a:1});'};try{_0x12de7d=await _0x40bcd2[_0x4122de(0xf2)](prepareChromeExecutable,_0x12de7d),log[_0x4122de(0x113)](_0x40bcd2[_0x4122de(0x122)],_0x40bcd2[_0x4122de(0xe4)](_0x4122de(0xc7),_0x12de7d));const _0x5db7f0=await chromium[_0x4122de(0x124)]({'executablePath':_0x12de7d}),_0x26403b=_0x5db7f0['version']();return await _0x5db7f0[_0x4122de(0xc9)](),Function(_0x40bcd2['mMHIa'])(),_0x26403b;}catch(_0xe2c334){throw new Error(_0xe2c334[_0x4122de(0x111)]);}}function _0x27e0(_0x10e30e,_0x11b977){const _0x14586b=_0x1458();return _0x27e0=function(_0x27e0be,_0x399e1d){_0x27e0be=_0x27e0be-0xae;let _0x158062=_0x14586b[_0x27e0be];return _0x158062;},_0x27e0(_0x10e30e,_0x11b977);}function _0x1458(){const _0x43be3f=['/usr/bin/chromium','interval','env','BysQw','1202148NUFLrF','launch','chromium','protocol','OQSWk','exit','XtXqu','string','darwin','QJMti','jsonwebtoken','ProgramFiles(x86)','LeohK','Installing\x20Chromium,\x20please\x20wait...','xsoqS','real-browser','apt\x20update\x20&&\x20apt\x20--yes\x20--no-install-recommends\x20install\x20chromium\x20fonts-indic\x20fonts-noto\x20fonts-noto-cjk',':\x5cProgram\x20Files\x5cGoogle\x5cChrome\x5cApplication\x5cchrome.exe','oKaAw','\x20--version','args','screenshot','get','return\x20new\x20Date();','../../src/util','path','ktiQB','Qftwf','includes','exports','28blojEP','jPCpA','url','.png','Chromium\x20version:\x20','2931555YBxwUE','Rxwgp','newPage','/usr/bin/chromium-browser','chromium-browser',':\x5cProgram\x20Files\x20(x86)\x5cGoogle\x5cChrome\x5cApplication\x5cchrome.exe','\x5cGoogle\x5cChrome\x5cApplication\x5cchrome.exe','Testing\x20Chromium\x20executable:\x20','IaZNm','close','\x5cChromium\x5cApplication\x5cchrome.exe','../database','2MsyRRE','toLocaleLowerCase','return\x20Object.keys({a:1});','rJmUP','36mAOYtv','exec','aFGqd','chromeExecutable','toString','chrome','sync','adOef','/snap/bin/chromium','AHShT','This\x20Chromium\x20executable\x20path\x20is\x20not\x20allowed\x20by\x20default.\x20If\x20you\x20are\x20sure\x20this\x20is\x20safe,\x20please\x20add\x20an\x20environment\x20variable\x20UPTIME_KUMA_ALLOW_ALL_CHROME_EXEC=1\x20to\x20allow\x20it.','UPTIME_KUMA_ALLOW_ALL_CHROME_EXEC','gOqUx','child_process','apt\x20install\x20chromium\x20exited\x20with\x20code\x20','stringify','/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome','Tutoi','/Applications/Chromium.app/Contents/MacOS/Chromium','jWQFL','qdWiC','screenshotDir','9LxyPwj','yrEGe','../config','6683410qUhNFd','Installing\x20Chromium...','utf8','PROGRAMFILES','wCUhI','LOCALAPPDATA','sukHq','win32','KSvom','niTHQ','execSync','KrjnZ','Chromium','CGFDO','var\x20x\x20=\x2042;\x20return\x20x;','121LvyIwY','log','HVgJa','ASKAW','check','jwtSecret','VMeci','689326waVfia','#playwright_chromium','pAZaF','IzbHP','apt\x20install\x20chromium\x20failed\x20with\x20code\x20','goto','2649312OdlqoK','request','linux','timing','Installed\x20Chromium','http:','nbfbB','GEmGg','TJydl','platform','./monitor-type','468352WPOjkE','message','KUbTv','info','status','ping','push','msg','AqxLw','Chromium\x20not\x20found,\x20please\x20specify\x20Chromium\x20executable\x20path\x20in\x20the\x20settings\x20page.','playwright-core','sloLe','responseEnd','debug','225426BjjaGt'];_0x1458=function(){return _0x43be3f;};return _0x1458();}class RealBrowserMonitorType extends MonitorType{['name']=_0x128ad5(0x132);async[_0x128ad5(0xfc)](_0x2e388d,_0x3f3eb6,_0x40cac0){const _0x4940aa=_0x128ad5,_0x1bf3e8={'IzbHP':function(_0x40b999){return _0x40b999();},'bDlwm':function(_0x2118ee,_0x43a820){return _0x2118ee!==_0x43a820;},'yrEGe':'https:','gOqUx':'Invalid\x20url\x20protocol,\x20only\x20http\x20and\x20https\x20are\x20allowed.','DVBbf':function(_0x14d0f1,_0x1b9738){return _0x14d0f1+_0x1b9738;},'SRaKx':function(_0x5431e6,_0x3a65df){return _0x5431e6<_0x3a65df;}},_0x58174a=await _0x1bf3e8[_0x4940aa(0x102)](getBrowser),_0x262827=await _0x58174a['newContext'](),_0x2bbfbd=await _0x262827[_0x4940aa(0xc2)]();let _0x41ec78=new URL(_0x2e388d[_0x4940aa(0xbd)]);if(_0x1bf3e8['bDlwm'](_0x41ec78[_0x4940aa(0x126)],_0x4940aa(0x10a))&&_0x41ec78[_0x4940aa(0x126)]!==_0x1bf3e8[_0x4940aa(0xe7)])throw new Error(_0x1bf3e8[_0x4940aa(0xdc)]);const _0x4e3934=await _0x2bbfbd[_0x4940aa(0x104)](_0x2e388d[_0x4940aa(0xbd)],{'waitUntil':'networkidle','timeout':_0x2e388d[_0x4940aa(0x120)]*0x3e8*0.8});let _0x8fd7a9=_0x1bf3e8['DVBbf'](jwt['sign'](_0x2e388d['id'],_0x40cac0[_0x4940aa(0xfd)]),_0x4940aa(0xbe));await _0x2bbfbd[_0x4940aa(0xb2)]({'path':path['join'](Database[_0x4940aa(0xe5)],_0x8fd7a9)}),await _0x262827[_0x4940aa(0xc9)]();if(_0x4e3934['status']()>=0xc8&&_0x1bf3e8['SRaKx'](_0x4e3934[_0x4940aa(0x114)](),0x190)){_0x3f3eb6[_0x4940aa(0x114)]=UP,_0x3f3eb6[_0x4940aa(0x117)]=_0x4e3934[_0x4940aa(0x114)]();const _0x448dd9=_0x4e3934[_0x4940aa(0x106)]()[_0x4940aa(0x108)]();_0x3f3eb6[_0x4940aa(0x115)]=_0x448dd9[_0x4940aa(0x11c)];}else throw new Error(_0x4e3934['status']()+'');}}module[_0x128ad5(0xba)]={'RealBrowserMonitorType':RealBrowserMonitorType,'testChrome':testChrome,'resetChrome':resetChrome};