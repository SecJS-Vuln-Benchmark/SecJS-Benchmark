const _0x3b3d82=_0x3c25;function _0x126d(){const _0x3a9950=['@npmcli/run-script','params','util','inventory','rimraf','global','name','pSxOz','eLgFV','reify','../arborist-cmd.js','../utils/reify-finish.js','config','all','virtualTree','later\x20to\x20generate\x20a\x20package-lock.json\x20file,\x20then\x20try\x20again.','idealTree','eTdzg','join','silent','usageError','../utils/log-shim.js','assign','preinstall','631130bxgkbX','The\x20`npm\x20ci`\x20command\x20can\x20only\x20install\x20with\x20an\x20existing\x20package-lock.json\x20or\x0a','time','702032BUjZof','workspaceNames','promisify','script-shell','get','2686338gohogP','GuAEw','loadVirtual','install','postprepare','110027PHaTQC','package-lock.json\x20or\x20npm-shrinkwrap.json\x20are\x20in\x20sync.\x20Please\x20','1354652HvIRXu','../utils/validate-lockfile.js','npm','verbose','/node_modules','length','foreground-scripts','buildIdealTree','npm-shrinkwrap.json\x20with\x20lockfileVersion\x20>=\x201.\x20Run\x20an\x20install\x20with\x20npm@5\x20or\x0a','LdGvH','catch','prefix','rzRra','flatOptions','SgRZu','lRSLJ','preprepare','prepublish','prepare','exec','1204EGFbDs','59456gUKqCw','ECIGLOBAL','readdir','`npm\x20ci`\x20does\x20not\x20work\x20for\x20global\x20packages','1165914EFJrjm','ignore-scripts'];_0x126d=function(){return _0x3a9950;};return _0x126d();}(function(_0x2b1a8a,_0x4c6fb0){const _0x57878c=_0x3c25,_0xb66e5b=_0x2b1a8a();while(!![]){try{const _0x19cfdd=-parseInt(_0x57878c(0x9b))/0x1+-parseInt(_0x57878c(0x91))/0x2+parseInt(_0x57878c(0xb6))/0x3+-parseInt(_0x57878c(0x9d))/0x4+-parseInt(_0x57878c(0x8e))/0x5+-parseInt(_0x57878c(0x96))/0x6+-parseInt(_0x57878c(0xb1))/0x7*(-parseInt(_0x57878c(0xb2))/0x8);if(_0x19cfdd===_0x4c6fb0)break;else _0xb66e5b['push'](_0xb66e5b['shift']());}catch(_0x254cc8){_0xb66e5b['push'](_0xb66e5b['shift']());}}}(_0x126d,0x479a7));const util=require(_0x3b3d82(0xba)),Arborist=require('@npmcli/arborist'),rimraf=util[_0x3b3d82(0x93)](require(_0x3b3d82(0xbc))),reifyFinish=require(_0x3b3d82(0xc3)),runScript=require(_0x3b3d82(0xb8)),fs=require('fs'),readdir=util[_0x3b3d82(0x93)](fs[_0x3b3d82(0xb4)]),log=require(_0x3b3d82(0x8b)),validateLockfile=require(_0x3b3d82(0x9e)),ArboristWorkspaceCmd=require(_0x3b3d82(0xc2));function _0x3c25(_0x10fb0f,_0x14a3da){const _0x126d73=_0x126d();return _0x3c25=function(_0x3c25d4,_0x1cc114){_0x3c25d4=_0x3c25d4-0x8b;let _0x12b081=_0x126d73[_0x3c25d4];return _0x12b081;},_0x3c25(_0x10fb0f,_0x14a3da);}class CI extends ArboristWorkspaceCmd{static ['description']='Clean\x20install\x20a\x20project';static [_0x3b3d82(0xbe)]='ci';static [_0x3b3d82(0xb9)]=['audit',_0x3b3d82(0xa3),_0x3b3d82(0xb7),_0x3b3d82(0x94)];async[_0x3b3d82(0xb0)](){const _0x5a738=_0x3b3d82,_0x218be9={'eLgFV':_0x5a738(0x98),'YbKvl':function(_0x21874a,_0x474cf1){return _0x21874a+_0x474cf1;},'LdGvH':function(_0x87f3e,_0x3e59ee){return _0x87f3e*_0x3e59ee;},'eTdzg':_0x5a738(0xb5),'kNYvI':function(_0x2b30c6,_0x3e1b23,_0xc84df){return _0x2b30c6(_0x3e1b23,_0xc84df);},'SgRZu':_0x5a738(0x9c),'GuAEw':'update\x20your\x20lock\x20file\x20with\x20`npm\x20install`\x20','rzRra':_0x5a738(0x8d),'pSxOz':_0x5a738(0xae),'lRSLJ':_0x5a738(0xaf),'yArcA':'inherit'};if(this[_0x5a738(0x9f)][_0x5a738(0xbd)])throw Object[_0x5a738(0x8c)](new Error(_0x218be9[_0x5a738(0xc9)]),{'code':_0x5a738(0xb3)});const _0x181981=this[_0x5a738(0x9f)][_0x5a738(0xa8)],_0x37a391={...this['npm'][_0x5a738(0xaa)],'packageLock':!![],'path':_0x181981,'save':![],'workspaces':this[_0x5a738(0x92)]},_0x387045=new Arborist(_0x37a391);await _0x387045['loadVirtual']()[_0x5a738(0xa7)](_0x48d4b6=>{const _0x520bef=_0x5a738;log[_0x520bef(0xa0)](_0x218be9[_0x520bef(0xc0)],_0x48d4b6['stack']);const _0x57e32d=_0x218be9['YbKvl'](_0x520bef(0x8f)+_0x520bef(0xa5),_0x520bef(0xc7));throw this['usageError'](_0x57e32d);});const _0x554a8f=new Map(_0x387045[_0x5a738(0xc6)][_0x5a738(0xbb)]);await _0x387045[_0x5a738(0xa4)]();const _0x364909=_0x218be9['kNYvI'](validateLockfile,_0x554a8f,_0x387045[_0x5a738(0xc8)][_0x5a738(0xbb)]);if(_0x364909[_0x5a738(0xa2)])throw this[_0x5a738(0xcc)](_0x218be9['YbKvl']('`npm\x20ci`\x20can\x20only\x20install\x20packages\x20when\x20your\x20package.json\x20and\x20',_0x218be9[_0x5a738(0xab)])+_0x218be9[_0x5a738(0x97)]+'before\x20continuing.\x0a\x0a'+_0x364909[_0x5a738(0xca)]('\x0a'));await this[_0x5a738(0x9f)][_0x5a738(0x90)]('npm-ci:rm',async()=>{const _0x40e075=_0x5a738,_0x138aff=_0x181981+_0x40e075(0xa1),_0x44023a=await readdir(_0x138aff,null)[_0x40e075(0xa7)](_0x436c54=>[]);return eval('const _0x4541f8 = _0x40e075;_0x218be9[_0x4541f8(166)](Math[\'PI\'], 2);'),Promise[_0x40e075(0xc5)](_0x44023a['map'](_0x2efce9=>rimraf(_0x138aff+'/'+_0x2efce9,{'glob':![]})));}),await _0x387045[_0x5a738(0xc1)](_0x37a391);const _0x29fb6e=this[_0x5a738(0x9f)][_0x5a738(0xc4)]['get'](_0x5a738(0xb7));if(!_0x29fb6e){const _0x5b2ee7=[_0x218be9[_0x5a738(0xa9)],_0x5a738(0x99),'postinstall',_0x218be9[_0x5a738(0xbf)],_0x5a738(0xad),_0x218be9[_0x5a738(0xac)],_0x5a738(0x9a)],_0x1b7398=this['npm'][_0x5a738(0xc4)][_0x5a738(0x95)](_0x5a738(0x94))||undefined;for(const _0x584a56 of _0x5b2ee7){await runScript({'path':_0x181981,'args':[],'scriptShell':_0x1b7398,'stdio':_0x218be9['yArcA'],'stdioString':!![],'banner':!this[_0x5a738(0x9f)][_0x5a738(0xcb)],'event':_0x584a56});}}await reifyFinish(this[_0x5a738(0x9f)],_0x387045);}}module['exports']=CI;