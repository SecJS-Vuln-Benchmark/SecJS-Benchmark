'use strict';function _0xc014(){const _0x179ba1=['VYfvk','Qyrdc','value','should','4401395Hvjblj','series','\x20errCode\x20','util','node-opcua-service-secure-channel','dvQuw','../test_fixtures/fixture_GetEndPointResponse','SecureMessageChunkManager','fromCharCode','requestHandle','readUInt8','PWVMb','Error\x20:\x20code\x200x','greaterThan','async','CloseSecureChannelResponse','\x20On\x20raw\x20Buffer\x20\x0a','node-opcua-debug','buffer','should\x20test\x20CloseSecureChannelResponse','fixture2','should\x20reconstruct\x20a\x20valid\x20message\x20when\x20message\x20is\x20received\x20in\x20multiple\x20chunks','error','full_message_body','NDYqp','node-opcua-utils','Mcnzv','push','UNAyC','toString','ZMSdd','serviceResult','xRvtL','equal','949203toXUGH','gVYYA','xcJHn','117879qaEtGj','AuYpE','\x20message\x20','290cwjWmw','should\x20receive\x20and\x20handle\x20an\x20ERR\x20message','Lttbg','125474SMcjmZ','length','feed','qhRtJ','GSOXb','70ugLlsX','yNRZd','message','slice','Unexpected\x20error\x20event\x20received','MSG','aJxht','CSyMb','6461856KBHJLD','502878azuUVI','pFMsq','fail','QbhEb','12qhgpez','responseHeader','431588rqWdyX'];_0xc014=function(){return _0x179ba1;};return _0xc014();}const _0x4b2450=_0x15aa;(function(_0x3ece7e,_0x35f4fb){const _0x6ac243=_0x15aa,_0x86a3ab=_0x3ece7e();while(!![]){try{const _0x5af857=parseInt(_0x6ac243(0xb0))/0x1+parseInt(_0x6ac243(0xc2))/0x2*(-parseInt(_0x6ac243(0xaa))/0x3)+parseInt(_0x6ac243(0xc4))/0x4+-parseInt(_0x6ac243(0xc9))/0x5+parseInt(_0x6ac243(0xbe))/0x6*(-parseInt(_0x6ac243(0xb5))/0x7)+-parseInt(_0x6ac243(0xbd))/0x8+parseInt(_0x6ac243(0xa7))/0x9*(parseInt(_0x6ac243(0xad))/0xa);if(_0x5af857===_0x35f4fb)break;else _0x86a3ab['push'](_0x86a3ab['shift']());}catch(_0x4da567){_0x86a3ab['push'](_0x86a3ab['shift']());}}}(_0xc014,0x8165f));function _0x15aa(_0x19eaf4,_0x5b6396){const _0xc0141d=_0xc014();return _0x15aa=function(_0x15aace,_0x2cf80b){_0x15aace=_0x15aace-0x98;let _0xfbf8a9=_0xc0141d[_0x15aace];return _0xfbf8a9;},_0x15aa(_0x19eaf4,_0x5b6396);}const util=require(_0x4b2450(0xcc)),should=require(_0x4b2450(0xc8)),async=require(_0x4b2450(0xd7)),secure_channel=require(_0x4b2450(0xcd)),CloseSecureChannelResponse=secure_channel[_0x4b2450(0xd8)],{encode_decode_round_trip_test}=require('node-opcua-packet-analyzer/dist/test_helpers'),{compare_buffers}=require(_0x4b2450(0x9e)),{clone_buffer}=require('node-opcua-buffer-utils'),{hexDump}=require(_0x4b2450(0xda)),debugLog=require(_0x4b2450(0xda))['make_debugLog'](__filename),{MessageBuilder,MessageChunker}=require('..');describe(_0x4b2450(0xd0),function(){const _0x9b5c8e=_0x4b2450,_0x555e3a={'xRvtL':function(_0x3576b1,_0x30357b){return _0x3576b1===_0x30357b;},'CSyMb':'AuYpE','NDYqp':function(_0x4b66e9,_0x57072b){return _0x4b66e9-_0x57072b;},'pFMsq':_0x9b5c8e(0xcf),'PWVMb':function(_0x4c62b8,_0x3bb20e){return _0x4c62b8(_0x3bb20e);},'mrlJQ':function(_0x4dfe6c,_0x627739,_0x1b89d3){return _0x4dfe6c(_0x627739,_0x1b89d3);},'oBdPa':function(_0x72ccf4){return _0x72ccf4();},'Mcnzv':_0x9b5c8e(0xcb),'Lttbg':_0x9b5c8e(0x9c),'dvQuw':_0x9b5c8e(0xb7),'vuuHJ':_0x9b5c8e(0x9b),'yNRZd':function(_0x29ecfd,_0x500ad1){return _0x29ecfd!==_0x500ad1;},'qhRtJ':_0x9b5c8e(0xc1),'aJxht':function(_0x12cfa7,_0xeb8cf2,_0x5b8bdf){return _0x12cfa7(_0xeb8cf2,_0x5b8bdf);},'VYfvk':_0x9b5c8e(0x9a),'gVYYA':_0x9b5c8e(0xae),'UNAyC':_0x9b5c8e(0x98)};_0x555e3a[_0x9b5c8e(0xbb)](it,_0x555e3a[_0x9b5c8e(0xc5)],function(_0x341b6e){const _0x5039b8=_0x9b5c8e,_0x3264b4={'ZMSdd':function(_0x62d32){return _0x62d32();},'Qyrdc':'error'},_0x1843cd=require(_0x555e3a[_0x5039b8(0xbf)])[_0x5039b8(0x99)],_0x3e9fce=0x1000,_0x24f5e8=[];let _0x548a51=null;async[_0x5039b8(0xca)]([function(_0xda3e18){const _0x493c8d=_0x5039b8,_0x2cdc56={'requestId':_0x3e9fce,'tokenId':0x1};_0x1843cd[_0x493c8d(0xc3)][_0x493c8d(0xd2)]=_0x3e9fce;const _0x53fd16=new MessageChunker();_0x53fd16['chunkSecureMessage'](_0x493c8d(0xba),_0x2cdc56,_0x1843cd,function(_0x49f815){const _0x1798b2=_0x493c8d;_0x49f815?_0x24f5e8[_0x1798b2(0xa0)](clone_buffer(_0x49f815)):(_0x548a51=clone_buffer(_0x53fd16['_stream'][_0x1798b2(0xdb)]),_0x3264b4[_0x1798b2(0xa3)](_0xda3e18));});},function(_0x12bee1){const _0x29a123=_0x5039b8;if(_0x555e3a[_0x29a123(0xa5)](_0x29a123(0xab),_0x555e3a[_0x29a123(0xbc)])){_0x24f5e8[_0x29a123(0xb1)][_0x29a123(0xc8)]['be'][_0x29a123(0xd6)](0x0);for(let _0x4f10d6=0x0;_0x4f10d6<_0x555e3a[_0x29a123(0x9d)](_0x24f5e8[_0x29a123(0xb1)],0x1);_0x4f10d6++){String[_0x29a123(0xd1)](_0x24f5e8[_0x4f10d6][_0x29a123(0xd3)](0x3))['should']['equal']('C');}String[_0x29a123(0xd1)](_0x24f5e8[_0x24f5e8[_0x29a123(0xb1)]-0x1]['readUInt8'](0x3))['should']['equal']('F'),_0x12bee1();}else _0x319e43[_0x29a123(0xd1)](_0x550f23[_0x543227]['readUInt8'](0x3))[_0x29a123(0xc8)][_0x29a123(0xa6)]('C');},function(_0x5b2464){const _0x14d511=_0x5039b8,_0x2fb8ce={'GSOXb':function(_0x26f7ef,_0x2d9325){return _0x26f7ef/_0x2d9325;}};_0x24f5e8[_0x14d511(0xb1)][_0x14d511(0xc8)]['be'][_0x14d511(0xd6)](0x0);const _0xf81dc1=new MessageBuilder();_0xf81dc1['on']('full_message_body',function(_0x43590d){compare_buffers(_0x548a51,_0x43590d,0x28);})['on'](_0x14d511(0xb7),function(_0x2d7b39){const _0xbb938b=_0x14d511;_0x2d7b39[_0xbb938b(0xa2)]()['should']['eql'](_0x1843cd[_0xbb938b(0xa2)]()),_0x5b2464();})['on'](_0x3264b4[_0x14d511(0xc6)],function(_0x20c200){const _0xcfb952=_0x14d511;_0x5b2464(new Error(_0xcfb952(0xd5)+_0x20c200[_0xcfb952(0xa2)](0x10)));}),_0x24f5e8['forEach'](function(_0x2e6c34){const _0x3a1a5f=_0x14d511,_0x1d5a26=Math['round'](_0x2fb8ce[_0x3a1a5f(0xb4)](_0x2e6c34['length'],0x3)),_0x50ace3=_0x2e6c34[_0x3a1a5f(0xb8)](0x0,_0x1d5a26),_0x5f39ab=_0x2e6c34['slice'](_0x1d5a26);_0xf81dc1[_0x3a1a5f(0xb2)](_0x50ace3),_0xf81dc1[_0x3a1a5f(0xb2)](_0x5f39ab);});}],_0x341b6e);}),_0x555e3a[_0x9b5c8e(0xbb)](it,_0x555e3a[_0x9b5c8e(0xa8)],function(_0x45cb4b){const _0x4c9a34=_0x9b5c8e,_0x35a9a3={'awcFn':_0x555e3a[_0x4c9a34(0x9f)]},_0x1cf3e2=new MessageBuilder();_0x1cf3e2['on'](_0x555e3a[_0x4c9a34(0xaf)],function(_0x1a6df5){const _0x3e192c=_0x4c9a34;debugLog(_0x3e192c(0xd9)),_0x555e3a[_0x3e192c(0xd4)](debugLog,hexDump(_0x1a6df5));})['on'](_0x555e3a[_0x4c9a34(0xce)],function(_0x43adcc){const _0x44e12e=_0x4c9a34;_0x555e3a['mrlJQ'](debugLog,_0x44e12e(0xac),_0x43adcc),_0x43adcc[_0x44e12e(0xc3)][_0x44e12e(0xa4)][_0x44e12e(0xc7)][_0x44e12e(0xc8)]['eql'](0x80820000),_0x555e3a['oBdPa'](_0x45cb4b);})['on'](_0x555e3a['vuuHJ'],function(_0x4693ee){const _0x5c63f8=_0x4c9a34;debugLog(_0x35a9a3['awcFn'],_0x4693ee),should[_0x5c63f8(0xc0)](),_0x45cb4b(new Error('Unexpected\x20error\x20event\x20received'));});const _0x4de95f=require('node-opcua-debug')['makeBufferFromTrace'],_0x3013c5=_0x4de95f(function(){});_0x1cf3e2[_0x4c9a34(0xb2)](_0x3013c5);}),it(_0x555e3a[_0x9b5c8e(0xa1)],function(){const _0x2351fd=_0x9b5c8e;if(_0x555e3a[_0x2351fd(0xb6)](_0x555e3a[_0x2351fd(0xb3)],_0x2351fd(0xa9))){const _0x269c65=new CloseSecureChannelResponse({});encode_decode_round_trip_test(_0x269c65);}else _0x9549b9(_0x555e3a[_0x2351fd(0x9f)],_0x6b3f7),_0x563192['fail'](),_0x555e3a[_0x2351fd(0xd4)](_0x165419,new _0x41e5e3(_0x2351fd(0xb9)));});});