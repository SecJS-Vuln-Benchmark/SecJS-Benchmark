const _0x199f6f=_0x2788;(function(_0x43c3fe,_0xcba7d){const _0x2df763=_0x2788,_0xc2f014=_0x43c3fe();while(!![]){try{const _0x5de72f=parseInt(_0x2df763(0x18f))/0x1*(parseInt(_0x2df763(0x181))/0x2)+-parseInt(_0x2df763(0x190))/0x3*(parseInt(_0x2df763(0x194))/0x4)+-parseInt(_0x2df763(0x18d))/0x5+-parseInt(_0x2df763(0x18c))/0x6+-parseInt(_0x2df763(0x17d))/0x7+-parseInt(_0x2df763(0x19c))/0x8*(parseInt(_0x2df763(0x183))/0x9)+parseInt(_0x2df763(0x19d))/0xa;if(_0x5de72f===_0xcba7d)break;else _0xc2f014['push'](_0xc2f014['shift']());}catch(_0x54a9a2){_0xc2f014['push'](_0xc2f014['shift']());}}}(_0x1c97,0x22e55));import _0x4fdcbe from'express';import _0x2779cb from'cors';import _0x513925 from'morgan';import _0x3df1c0 from'body-parser';function _0x1c97(){const _0x2b0439=['/invalidate','join','/api','339922XAMaLi','static','27kjjcay','platform','json','dev','server.showErrorStack','/graphql','HOST','log','use','657552qiwQEz','793320JpUyUz','map','1zVNcfz','50412BDCZja','XccUP','corsHeaders','.assetPath','20LivmyU','listen','dRTrq','iRgQk','filter','server.host','get','params','332872SOJHFo','4888980WMZNUP','PORT','jxMLn','env','urlencoded','JSMzE','status','WRoNU','bodyLimit','/media','server.port','/img/:width/:height/:action/:image','/graphiql','271761qMvhVJ'];_0x1c97=function(){return _0x2b0439;};return _0x1c97();}import _0x55a0f5 from'./db';import _0x44ad31 from'./middleware';import{loadAdditionalCertificates}from'./helpers/loadAdditionalCertificates';import _0x3fd92e from'./api';import _0x476952 from'config';import _0x40bf81 from'./api/img';import _0x4eb0ea from'./api/invalidate';import{graphqlExpress,graphiqlExpress}from'apollo-server-express';import{makeExecutableSchema}from'graphql-tools';import _0x36c3c5 from'./graphql/resolvers';import _0x1fe36b from'./graphql/schema';import*as _0x47d95b from'path';const app=_0x4fdcbe();app[_0x199f6f(0x18b)](_0x513925(_0x199f6f(0x186))),app[_0x199f6f(0x18b)](_0x199f6f(0x1a6),_0x4fdcbe[_0x199f6f(0x182)](_0x47d95b[_0x199f6f(0x17f)](__dirname,_0x476952[_0x199f6f(0x19a)](_0x476952['get'](_0x199f6f(0x184))+_0x199f6f(0x193))))),app[_0x199f6f(0x18b)](_0x2779cb({'exposedHeaders':_0x476952[_0x199f6f(0x19a)](_0x199f6f(0x192))})),app['use'](_0x3df1c0[_0x199f6f(0x185)]({'limit':_0x476952[_0x199f6f(0x19a)](_0x199f6f(0x1a5))})),loadAdditionalCertificates(),_0x55a0f5(_0x481b95=>{const _0x2e200d=_0x199f6f,_0x40da13={'WRoNU':function(_0x36c5cb,_0x425a02){return _0x36c5cb(_0x425a02);},'jxMLn':'/img','dRTrq':_0x2e200d(0x1a8),'XccUP':'/invalidate','JSMzE':_0x2e200d(0x1a7),'iRgQk':function(_0x3e2862,_0x4a2369){return _0x3e2862(_0x4a2369);}};app[_0x2e200d(0x18b)](_0x40da13['WRoNU'](_0x44ad31,{'config':_0x476952,'db':_0x481b95})),app[_0x2e200d(0x18b)](_0x2e200d(0x180),_0x40da13[_0x2e200d(0x1a4)](_0x3fd92e,{'config':_0x476952,'db':_0x481b95})),app[_0x2e200d(0x18b)](_0x40da13[_0x2e200d(0x19f)],_0x40bf81({'config':_0x476952,'db':_0x481b95})),app['use'](_0x40da13[_0x2e200d(0x196)],(_0x1a95c1,_0x3f1fa7,_0x334bff)=>{const _0x4ce795=_0x2e200d;console[_0x4ce795(0x18a)](_0x1a95c1[_0x4ce795(0x19b)]);}),app['post'](_0x40da13[_0x2e200d(0x191)],_0x4eb0ea),app[_0x2e200d(0x19a)](_0x2e200d(0x17e),_0x4eb0ea);const _0x137d6e=process['env'][_0x2e200d(0x19e)]||_0x476952[_0x2e200d(0x19a)](_0x40da13[_0x2e200d(0x1a2)]),_0x202ee2=process[_0x2e200d(0x1a0)][_0x2e200d(0x189)]||_0x476952[_0x2e200d(0x19a)](_0x2e200d(0x199));app[_0x2e200d(0x195)](_0x40da13[_0x2e200d(0x197)](parseInt,_0x137d6e),_0x202ee2,()=>{const _0x51a2dd=_0x2e200d;console[_0x51a2dd(0x18a)]('Vue\x20Storefront\x20API\x20started\x20at\x20http://'+_0x202ee2+':'+_0x137d6e);});});function _0x2788(_0x2d6e42,_0x5cfe3c){const _0x1c9757=_0x1c97();return _0x2788=function(_0x2788c6,_0x1f4a5a){_0x2788c6=_0x2788c6-0x17c;let _0x24d3ee=_0x1c9757[_0x2788c6];return _0x24d3ee;},_0x2788(_0x2d6e42,_0x5cfe3c);}const schema=makeExecutableSchema({'typeDefs':_0x1fe36b,'resolvers':_0x36c3c5});app[_0x199f6f(0x18b)](_0x3df1c0[_0x199f6f(0x1a1)]({'extended':!![]})),app['use'](_0x3df1c0[_0x199f6f(0x185)]()),app[_0x199f6f(0x18b)](_0x199f6f(0x188),graphqlExpress(_0x523602=>({'schema':schema,'context':{'req':_0x523602},'rootValue':global}))),app[_0x199f6f(0x18b)](_0x199f6f(0x17c),graphiqlExpress({'endpointURL':_0x199f6f(0x188)})),app['use']((_0x1ab087,_0x4657c7,_0x4039da,_0x9a2d86)=>{const _0x251db7=_0x199f6f,{statusCode:_0x2533b6,message:message='',stack:stack=''}=_0x1ab087,_0x45b019=stack['split'](/\r?\n/)[_0x251db7(0x18e)](_0x120b94=>_0x120b94['trim']())[_0x251db7(0x198)](_0x4d889c=>_0x4d889c!=='');_0x4039da[_0x251db7(0x1a3)](_0x2533b6)[_0x251db7(0x185)]({'code':_0x2533b6,'result':message,..._0x476952['get'](_0x251db7(0x187))?{'stack':_0x45b019}:{}});});export default app;