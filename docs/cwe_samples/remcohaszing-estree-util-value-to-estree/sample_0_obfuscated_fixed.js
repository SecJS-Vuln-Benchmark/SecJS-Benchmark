function _0x45f9(){const _0x54990d=['481920pThbni','users','type','thumbnails','private,\x20max-age=900','10466sGlXnI','4222vOdXPU','set','369mHBqjg','3000SjVyhw','res','attachments','success','path','wlLnO','notFound','Cache-Control','filename','Attachment\x20not\x20found','ATTACHMENT_NOT_FOUND','config','9166905mwLONM','getProjectPath','isBoardMember','req','4339881BpnOFL','pathNotFound','2523504YJGcaN','2472OfEZxZ','join','exports','string','custom','isProjectManager'];_0x45f9=function(){return _0x54990d;};return _0x45f9();}const _0x4f2974=_0x58a9;(function(_0x53a526,_0x2a0a0d){const _0x2de9d3=_0x58a9,_0x205482=_0x53a526();while(!![]){try{const _0x2cc2fa=-parseInt(_0x2de9d3(0x1aa))/0x1+-parseInt(_0x2de9d3(0x1ab))/0x2*(parseInt(_0x2de9d3(0x1ad))/0x3)+parseInt(_0x2de9d3(0x1a5))/0x4+-parseInt(_0x2de9d3(0x1ae))/0x5*(parseInt(_0x2de9d3(0x19f))/0x6)+-parseInt(_0x2de9d3(0x19c))/0x7+parseInt(_0x2de9d3(0x19e))/0x8+parseInt(_0x2de9d3(0x198))/0x9;if(_0x2cc2fa===_0x2a0a0d)break;else _0x205482['push'](_0x205482['shift']());}catch(_0x152d59){_0x205482['push'](_0x205482['shift']());}}}(_0x45f9,0x4d6e9));function _0x58a9(_0x5b1746,_0x4f23c0){const _0x45f933=_0x45f9();return _0x58a9=function(_0x58a921,_0x44156b){_0x58a921=_0x58a921-0x18d;let _0x167e8c=_0x45f933[_0x58a921];return _0x167e8c;},_0x58a9(_0x5b1746,_0x4f23c0);}const fs=require('fs'),path=require(_0x4f2974(0x190)),Errors={'ATTACHMENT_NOT_FOUND':{'attachmentNotFound':_0x4f2974(0x195)}};module[_0x4f2974(0x1a1)]={'inputs':{'id':{'type':_0x4f2974(0x1a2),'regex':/^[0-9]+$/,'required':!![]},'filename':{'type':_0x4f2974(0x1a2),'required':!![]}},'exits':{'attachmentNotFound':{'responseType':_0x4f2974(0x192)}},async 'fn'(_0x4e8d6c,_0x56d2f5){const _0x26aab0=_0x4f2974,_0x45a4ea={'JkaRD':_0x26aab0(0x1a8),'wlLnO':_0x26aab0(0x193)},{currentUser:_0x4a486e}=this[_0x26aab0(0x19b)],{attachment:_0x39bd89,card:_0xed7f02,project:_0x59b8f9}=await sails['helpers'][_0x26aab0(0x18e)][_0x26aab0(0x199)](_0x4e8d6c['id'])['intercept'](_0x26aab0(0x19d),()=>Errors[_0x26aab0(0x196)]),_0x53bb4a=await sails['helpers'][_0x26aab0(0x1a6)][_0x26aab0(0x19a)](_0x4a486e['id'],_0xed7f02['boardId']);if(!_0x53bb4a){const _0x4dfc10=await sails['helpers'][_0x26aab0(0x1a6)][_0x26aab0(0x1a4)](_0x4a486e['id'],_0x59b8f9['id']);if(!_0x4dfc10)throw Errors[_0x26aab0(0x196)];}if(!_0x39bd89['image'])throw Errors['ATTACHMENT_NOT_FOUND'];const _0x586fa2=path[_0x26aab0(0x1a0)](sails[_0x26aab0(0x197)][_0x26aab0(0x1a3)]['attachmentsPath'],_0x39bd89['dirname'],_0x45a4ea['JkaRD'],_0x4e8d6c[_0x26aab0(0x194)]);if(!fs['existsSync'](_0x586fa2))throw Errors['ATTACHMENT_NOT_FOUND'];return this[_0x26aab0(0x18d)][_0x26aab0(0x1a7)](_0x39bd89['filename']),this[_0x26aab0(0x18d)][_0x26aab0(0x1ac)](_0x45a4ea[_0x26aab0(0x191)],_0x26aab0(0x1a9)),_0x56d2f5[_0x26aab0(0x18f)](fs['createReadStream'](_0x586fa2));}};