const _0x4ff50b=_0x4a38;(function(_0xc933b7,_0x1cf053){const _0x318299=_0x4a38,_0x50c366=_0xc933b7();while(!![]){try{const _0x16a1f9=-parseInt(_0x318299(0x10b))/0x1+-parseInt(_0x318299(0xf4))/0x2+parseInt(_0x318299(0xfd))/0x3+parseInt(_0x318299(0xf9))/0x4*(-parseInt(_0x318299(0x102))/0x5)+parseInt(_0x318299(0x116))/0x6*(-parseInt(_0x318299(0xfe))/0x7)+-parseInt(_0x318299(0xe4))/0x8+parseInt(_0x318299(0xca))/0x9*(parseInt(_0x318299(0x108))/0xa);if(_0x16a1f9===_0x1cf053)break;else _0x50c366['push'](_0x50c366['shift']());}catch(_0xfd8998){_0x50c366['push'](_0x50c366['shift']());}}}(_0x5960,0xca7b4));function _0x5960(){const _0x500782=['chai','deep','calledOnce','1234567890','sITCG','proxyquire','should\x20always\x20add\x20the\x20step\x20to\x20the\x20action\x20even\x20if\x20error\x20occurs','throws','new\x20idx\x20files:\x20new1.idx','8823728ECHQhW','new1.idx','should\x20execute\x20git\x20receive-pack\x20with\x20correct\x20parameters','../../src/proxy/actions','QmZLY','calledWith','jNYBL','expect','sinon','test/repo','log','itMjU','../../src/proxy/processors/push-action/writePack','exec','LlkmU','wBwUe','3100686HYfSOL','ZJTnI','onFirstCall','oMPUl','stub','224VyxZSq','callCount','receive.unpackLimit','error','2405790xNwztF','119tWTpca','kfQbQ','Ocxod','alDKp','102395ysWxMF','pack\x20data','spy','push','ZbBUR','yJAVU','670ekqvBl','GCqvw','setError','125114WdCgdL','should','uaTZb','should\x20have\x20the\x20correct\x20displayName','proxyGitPath','/path/to','have','displayName','FItSB','secondCall','WRRVE','232776yNDguP','returns','include','equal','should\x20handle\x20errors\x20from\x20git\x20receive-pack','MkwwH','old1.idx','setContent','BLMZb','RxNAr','receive-pack','AEfxT','KKdPP','JTAJY','/path/to/repo','619551LgojFp','bOjaJ','git','lengthOf','POST','prototype','XRLee','restore','repo','newIdxFiles','XgCdt','true','args','firstCall','git\x20receive-pack\x20output','onSecondCall','steps'];_0x5960=function(){return _0x500782;};return _0x5960();}function _0x4a38(_0xe77040,_0x4711d1){const _0x59606d=_0x5960();return _0x4a38=function(_0x4a38ff,_0x3ed7d3){_0x4a38ff=_0x4a38ff-0xbd;let _0x2fdcd2=_0x59606d[_0x4a38ff];return _0x2fdcd2;},_0x4a38(_0xe77040,_0x4711d1);}const chai=require(_0x4ff50b(0xdb)),sinon=require(_0x4ff50b(0xec)),proxyquire=require(_0x4ff50b(0xe0)),{Action,Step}=require(_0x4ff50b(0xe7));chai[_0x4ff50b(0x10c)]();const expect=chai[_0x4ff50b(0xeb)];describe('writePack',()=>{const _0x2a317e=_0x4ff50b,_0x2d2c2e={'XgCdt':_0x2a317e(0xe5),'Jobvz':_0x2a317e(0x10a),'rEqJx':'../../src/proxy/processors/push-action/writePack','jNYBL':_0x2a317e(0x103),'QmZLY':_0x2a317e(0xce),'FBPHW':_0x2a317e(0xed),'BLMZb':_0x2a317e(0xd2),'bOjaJ':function(_0x56e76d,_0x389acd){return _0x56e76d(_0x389acd);},'alDKp':'config','UZZMN':_0x2a317e(0xfb),'LlkmU':_0x2a317e(0xc5),'ZbBUR':_0x2a317e(0x110),'jFLyx':function(_0x4a0c96,_0x42089c){return _0x4a0c96(_0x42089c);},'QEFaK':_0x2a317e(0xc2),'KKdPP':'git\x20error','Xhukr':function(_0x42b6cb,_0x1ce561){return _0x42b6cb!==_0x1ce561;},'yJAVU':_0x2a317e(0xbf),'ZJTnI':function(_0x419e53,_0x3ee11d,_0x402026){return _0x419e53(_0x3ee11d,_0x402026);},'QLRsO':_0x2a317e(0xe1),'oMPUl':_0x2a317e(0x10e),'AEfxT':function(_0xd5d2f5,_0x2c3258,_0x47078b){return _0xd5d2f5(_0x2c3258,_0x47078b);},'Ocxod':_0x2a317e(0xf1)};let _0x5e0289,_0x40eaf0,_0x2a1d10,_0xbfae01,_0x25aea3,_0x335793;_0x2d2c2e['jFLyx'](beforeEach,()=>{const _0x30bdce=_0x2a317e;_0x2a1d10=sinon[_0x30bdce(0xf8)](),_0x40eaf0=sinon[_0x30bdce(0xf8)](),_0x40eaf0[_0x30bdce(0xf6)]()[_0x30bdce(0x117)]([_0x30bdce(0xc1)]),_0x40eaf0[_0x30bdce(0xd9)]()['returns']([_0x30bdce(0xc1),_0x2d2c2e[_0x30bdce(0xd4)]]),_0xbfae01=sinon[_0x30bdce(0x104)](Step[_0x30bdce(0xcf)],'log'),_0x25aea3=sinon[_0x30bdce(0x104)](Step['prototype'],'setContent'),_0x335793=sinon[_0x30bdce(0x104)](Step['prototype'],_0x2d2c2e['Jobvz']);const _0x288701=proxyquire(_0x2d2c2e['rEqJx'],{'child_process':{'spawnSync':_0x2a1d10},'fs':{'readdirSync':_0x40eaf0}});_0x5e0289=_0x288701[_0x30bdce(0xf1)];}),afterEach(()=>{const _0x55964f=_0x2a317e;sinon[_0x55964f(0xd1)]();}),_0x2d2c2e[_0x2a317e(0xc6)](describe,_0x2d2c2e[_0x2a317e(0x100)],()=>{const _0x57c6ff=_0x2a317e,_0x13a4cc={'MkwwH':_0x57c6ff(0xc1),'AXIoe':_0x2d2c2e['QEFaK'],'sITCG':_0x2d2c2e[_0x57c6ff(0xc7)],'Bnnwh':function(_0x455ee2,_0x331911){return _0x2d2c2e['Xhukr'](_0x455ee2,_0x331911);},'FItSB':_0x57c6ff(0xc4),'GCqvw':function(_0x51928c,_0x3a2ba2,_0x1b9aec){return _0x51928c(_0x3a2ba2,_0x1b9aec);},'JTAJY':function(_0x158204,_0x37a6c3){return _0x158204(_0x37a6c3);},'kfQbQ':function(_0x2e72f4,_0x9e616e,_0x49456){return _0x2e72f4(_0x9e616e,_0x49456);},'uaTZb':'writePack.exec'};let _0x14e80e,_0x27b52a;beforeEach(()=>{const _0x48dce8=_0x57c6ff;_0x27b52a={'body':_0x2d2c2e[_0x48dce8(0xea)]},_0x14e80e=new Action(_0x48dce8(0xde),_0x48dce8(0x105),_0x2d2c2e[_0x48dce8(0xe8)],0x499602d2,_0x2d2c2e['FBPHW']),_0x14e80e[_0x48dce8(0x10f)]=_0x48dce8(0x110),_0x14e80e['repoName']=_0x2d2c2e[_0x48dce8(0xc3)];}),it(_0x57c6ff(0xe6),async()=>{const _0x352a3e=_0x57c6ff,_0x44f76d={'stdout':_0x352a3e(0xd8),'stderr':'','status':0x0};_0x2a1d10[_0x352a3e(0x117)](_0x44f76d);const _0x2db1c7=await _0x5e0289(_0x27b52a,_0x14e80e);_0x2d2c2e[_0x352a3e(0xcb)](expect,_0x2a1d10[_0x352a3e(0xfa)])['to'][_0x352a3e(0xbe)](0x2),expect(_0x2a1d10['firstCall']['args'][0x0])['to'][_0x352a3e(0xbe)](_0x352a3e(0xcc)),_0x2d2c2e[_0x352a3e(0xcb)](expect,_0x2a1d10[_0x352a3e(0xd7)][_0x352a3e(0xd6)][0x1])['to'][_0x352a3e(0xdc)][_0x352a3e(0xbe)]([_0x2d2c2e[_0x352a3e(0x101)],_0x2d2c2e['UZZMN'],'0']),_0x2d2c2e[_0x352a3e(0xcb)](expect,_0x2a1d10[_0x352a3e(0xd7)]['args'][0x2])['to']['include']({'cwd':_0x352a3e(0xc9)}),expect(_0x2a1d10[_0x352a3e(0x114)][_0x352a3e(0xd6)][0x0])['to']['equal']('git'),expect(_0x2a1d10[_0x352a3e(0x114)][_0x352a3e(0xd6)][0x1])['to']['deep']['equal']([_0x2d2c2e[_0x352a3e(0xf2)],_0x2d2c2e[_0x352a3e(0xc3)]]),expect(_0x2a1d10['secondCall'][_0x352a3e(0xd6)][0x2])['to'][_0x352a3e(0xbd)]({'cwd':_0x2d2c2e[_0x352a3e(0x106)],'input':_0x2d2c2e[_0x352a3e(0xea)]}),expect(_0xbfae01['calledWith'](_0x352a3e(0xe3)))['to']['be']['true'],expect(_0x25aea3[_0x352a3e(0xe9)](_0x44f76d))['to']['be'][_0x352a3e(0xd5)],_0x2d2c2e[_0x352a3e(0xcb)](expect,_0x2db1c7[_0x352a3e(0xda)])['to']['have']['lengthOf'](0x1),expect(_0x2db1c7['steps'][0x0][_0x352a3e(0xfc)])['to']['be']['false'],_0x2d2c2e['jFLyx'](expect,_0x2db1c7[_0x352a3e(0xd3)])['to'][_0x352a3e(0xdc)][_0x352a3e(0xbe)]([_0x352a3e(0xe5)]);}),it(_0x2d2c2e[_0x57c6ff(0x107)],async()=>{const _0x22e0a8=_0x57c6ff,_0x77c590={'XRLee':_0x13a4cc[_0x22e0a8(0xc0)],'wBwUe':_0x22e0a8(0xe5),'WRRVE':_0x13a4cc['AXIoe'],'itMjU':function(_0x2e8600,_0x572669,_0x458271){return _0x2e8600(_0x572669,_0x458271);}},_0x44a20d=new Error(_0x13a4cc[_0x22e0a8(0xdf)]);_0x2a1d10['throws'](_0x44a20d);try{if(_0x13a4cc['Bnnwh'](_0x22e0a8(0xc4),_0x13a4cc[_0x22e0a8(0x113)])){_0x17e2e1=_0x24a0fd['stub'](),_0x4ea9ed=_0xe66b7f[_0x22e0a8(0xf8)](),_0x383c4c['onFirstCall']()[_0x22e0a8(0x117)]([_0x77c590[_0x22e0a8(0xd0)]]),_0x3360e3['onSecondCall']()[_0x22e0a8(0x117)]([_0x77c590['XRLee'],_0x77c590[_0x22e0a8(0xf3)]]),_0x2ecd50=_0x4a18e0[_0x22e0a8(0x104)](_0x560c8d[_0x22e0a8(0xcf)],_0x22e0a8(0xee)),_0x31c823=_0x3daeed[_0x22e0a8(0x104)](_0x15cb19[_0x22e0a8(0xcf)],_0x77c590[_0x22e0a8(0x115)]),_0x29184c=_0x10c4cf['spy'](_0x31386f[_0x22e0a8(0xcf)],'setError');const _0x3fb9c8=_0x77c590[_0x22e0a8(0xef)](_0x55a6e2,_0x22e0a8(0xf0),{'child_process':{'spawnSync':_0x121d3d},'fs':{'readdirSync':_0x53df4c}});_0x5e6bfc=_0x3fb9c8[_0x22e0a8(0xf1)];}else{await _0x13a4cc[_0x22e0a8(0x109)](_0x5e0289,_0x27b52a,_0x14e80e);throw new Error('Expected\x20error\x20to\x20be\x20thrown');}}catch(_0x108e8b){expect(_0x335793[_0x22e0a8(0xdd)])['to']['be'][_0x22e0a8(0xd5)],expect(_0x335793['firstCall'][_0x22e0a8(0xd6)][0x0])['to']['include']('git\x20error'),_0x13a4cc[_0x22e0a8(0xc8)](expect,_0x14e80e['steps'])['to']['have'][_0x22e0a8(0xcd)](0x1),expect(_0x14e80e['steps'][0x0][_0x22e0a8(0xfc)])['to']['be']['true'];}}),_0x2d2c2e[_0x57c6ff(0xf5)](it,_0x2d2c2e['QLRsO'],async()=>{const _0xacb849=_0x57c6ff;_0x2a1d10[_0xacb849(0xe2)](new Error('git\x20error'));try{await _0x13a4cc[_0xacb849(0xff)](_0x5e0289,_0x27b52a,_0x14e80e);}catch(_0x527da2){_0x13a4cc[_0xacb849(0xc8)](expect,_0x14e80e['steps'])['to'][_0xacb849(0x111)][_0xacb849(0xcd)](0x1);}}),it(_0x2d2c2e[_0x57c6ff(0xf7)],()=>{const _0xfeba4b=_0x57c6ff;_0x13a4cc[_0xfeba4b(0xc8)](expect,_0x5e0289[_0xfeba4b(0x112)])['to'][_0xfeba4b(0xbe)](_0x13a4cc[_0xfeba4b(0x10d)]);});});});