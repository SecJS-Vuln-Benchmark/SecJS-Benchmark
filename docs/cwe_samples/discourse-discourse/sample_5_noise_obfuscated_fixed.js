const _0x12f224=_0x5b4f;function _0x2d9f(){const _0x7b16c4=['54890GYjydr','1rZxOnp','_getCapabilityDelegationClass','GOPto','176473NxznyL','getDelegationProofs','bXicV','match','40418aplYwm',')\x20must\x20be\x20a\x20string\x20that\x20','length','invoker','map','OzvHU','getAllowedActions','log','njQmH','isValidTarget','bOORK','URI.','controller','CQBFj','capabilityAction','invocationTarget','ojIle','Invocation\x20target\x20(','return\x20new\x20Date();','string','QWFAg','\x22\x20does\x20not\x20match\x20the\x20','valid','isArray','lqZOb','630bArJZN','xtxNf','_getTailCapability','getTarget','parentCapability','\x22capability\x22\x20must\x20be\x20a\x20string\x20if\x20it\x20is\x20a\x20root\x20capability.','date\x20in\x20its\x20delegation\x20proof.','1162965BMYarx','fnyzR','AtTmo','The\x20capability\x20controller\x20does\x20not\x20match\x20the\x20verification\x20method\x20','mGsvu','includes','PqsXz','Cgowc','invocation\x20target\x20(','created','oumlE','A\x20delegated\x20capability\x20must\x20not\x20be\x20invoked\x20before\x20the\x20\x22created\x22\x20','Pqaqq','60WkUsqy','giAqE','term','details','YvXGu','7631728fxXKWK','(or\x20its\x20controller)\x20used\x20to\x20invoke.',')\x20does\x20not\x20match\x20','capability\x20target\x20(','Capability\x20action\x20\x22','delJN','capabilityInvocation','isController','lECKQ','AoQcL','compareTime','BRjcg','\x22capabilityAction\x22\x20must\x20be\x20a\x20string.','parse','vlUuV','\x22expectedTargets\x22\x20values\x20must\x20be\x20absolute\x20URI\x20strings.','expected\x20action\x20of\x20\x22','zdJPY','Expected\x20target\x20(','XrFVj','\x22\x20is\x20not\x20allowed\x20by\x20the\x20','expectedTarget','36764iWlTpA','vshwQ','spPBo','159XWoFWn','RUXTU','object','safe','14WDntOF','DakUZ','expectedAction','capability;\x20allowed\x20actions\x20are:\x20','update','return\x20await\x20Promise.resolve(42);','capability','_runChecksAfterChainVerification','436760fnEThm','12BQHtSx','_runBaseProofValidation','\x22capability\x22\x20must\x20be\x20a\x20string\x20or\x20object.','\x22invocationTarget\x22\x20must\x20be\x20a\x20string\x20that\x20expresses\x20an\x20absolute\x20','\x22expectedTarget\x22\x20must\x20be\x20a\x20string\x20or\x20array.','expresses\x20an\x20absolute\x20URI.'];_0x2d9f=function(){return _0x7b16c4;};return _0x2d9f();}(function(_0x19f536,_0x4019d8){const _0x543dfa=_0x5b4f,_0x2035d6=_0x19f536();while(!![]){try{const _0x8c026c=parseInt(_0x543dfa(0x10e))/0x1*(-parseInt(_0x543dfa(0x115))/0x2)+parseInt(_0x543dfa(0xfa))/0x3*(-parseInt(_0x543dfa(0xf7))/0x4)+parseInt(_0x543dfa(0x135))/0x5*(parseInt(_0x543dfa(0x107))/0x6)+-parseInt(_0x543dfa(0xfe))/0x7*(-parseInt(_0x543dfa(0x106))/0x8)+parseInt(_0x543dfa(0x12e))/0x9*(-parseInt(_0x543dfa(0x10d))/0xa)+-parseInt(_0x543dfa(0x111))/0xb*(-parseInt(_0x543dfa(0x142))/0xc)+parseInt(_0x543dfa(0x147))/0xd;if(_0x8c026c===_0x4019d8)break;else _0x2035d6['push'](_0x2035d6['shift']());}catch(_0x37297a){_0x2035d6['push'](_0x2035d6['shift']());}}}(_0x2d9f,0x55785));function _0x5b4f(_0x199d46,_0x57c066){const _0x2d9f7a=_0x2d9f();return _0x5b4f=function(_0x5b4f74,_0x27f6e3){_0x5b4f74=_0x5b4f74-0xf3;let _0x24326e=_0x2d9f7a[_0x5b4f74];return _0x24326e;},_0x5b4f(_0x199d46,_0x57c066);}import{CapabilityDelegation}from'./CapabilityDelegation.js';import{CapabilityProofPurpose}from'./CapabilityProofPurpose.js';import*as _0x4a6ec5 from'./utils.js';export class CapabilityInvocation extends CapabilityProofPurpose{constructor({capability:_0x31934b,capabilityAction:_0x5560e1,invocationTarget:_0x5c1bad,allowTargetAttenuation:_0x405f95,controller:_0x2ada9e,date:_0x55e127,expectedAction:_0x3abfaf,expectedRootCapability:_0x3c73b5,expectedTarget:_0x158ae8,inspectCapabilityChain:_0x47cea1,maxChainLength:_0x13c08f,maxClockSkew:_0x568b9b,maxDelegationTtl:_0x2a0308,maxTimestampDelta:_0x27815a,suite:_0x1718d9}={}){const _0x7e3e2=_0x5b4f,_0x3888e8={'lECKQ':function(_0x1dac0a,_0x4f00f0){return _0x1dac0a||_0x4f00f0;},'zdJPY':function(_0x1bb899,_0x5a2977){return _0x1bb899&&_0x5a2977;},'AtTmo':function(_0x2eff4c,_0x1ba111){return _0x2eff4c+_0x1ba111;},'njQmH':'Parameters\x20for\x20both\x20creating\x20and\x20verifying\x20a\x20proof\x20must\x20not\x20be\x20','fnyzR':function(_0xb074f0,_0x5065ed){return _0xb074f0!==_0x5065ed;},'vshwQ':_0x7e3e2(0x109),'CQBFj':_0x7e3e2(0x128),'piBaO':function(_0x183ea6,_0x2e9af9){return _0x183ea6===_0x2e9af9;},'DakUZ':function(_0x52b4fc,_0xf29392){return _0x52b4fc+_0xf29392;},'OzvHU':_0x7e3e2(0x120),'xtxNf':'\x22expectedAction\x22\x20must\x20be\x20a\x20string.','bXicV':function(_0x542b5b,_0x2bf89a){return _0x542b5b===_0x2bf89a;},'MErqz':_0x7e3e2(0x10b),'RUXTU':_0x7e3e2(0x156)},_0x2332fb=_0x3888e8['lECKQ'](_0x31934b,_0x5560e1)||_0x5c1bad,_0x2bc6af=_0x3888e8[_0x7e3e2(0x14f)](_0x2ada9e,_0x55e127)||_0x3abfaf||_0x3c73b5||_0x158ae8||_0x47cea1||_0x1718d9;if(_0x3888e8[_0x7e3e2(0x158)](_0x2332fb,_0x2bc6af))throw new Error(_0x3888e8[_0x7e3e2(0x137)](_0x3888e8[_0x7e3e2(0x11d)],'provided\x20together.'));super({'allowTargetAttenuation':_0x405f95,'controller':_0x2ada9e,'date':_0x55e127,'expectedRootCapability':_0x3c73b5,'inspectCapabilityChain':_0x47cea1,'maxChainLength':_0x13c08f,'maxClockSkew':_0x568b9b,'maxDelegationTtl':_0x2a0308,'maxTimestampDelta':_0x27815a,'suite':_0x1718d9,'term':_0x7e3e2(0x14d)});if(!_0x2bc6af){if(typeof _0x31934b===_0x7e3e2(0xfc)){if(!(_0x31934b&&_0x31934b[_0x7e3e2(0x132)]))throw new Error(_0x7e3e2(0x133));}else{if(_0x3888e8[_0x7e3e2(0x136)](typeof _0x31934b,'string'))throw new TypeError(_0x3888e8[_0x7e3e2(0xf8)]);}if(typeof _0x5560e1!==_0x3888e8[_0x7e3e2(0x122)])throw new TypeError(_0x7e3e2(0x153));if(!(_0x3888e8['piBaO'](typeof _0x5c1bad,_0x7e3e2(0x128))&&_0x5c1bad[_0x7e3e2(0x13a)](':')))throw new TypeError(_0x3888e8[_0x7e3e2(0xff)](_0x7e3e2(0x10a),_0x3888e8[_0x7e3e2(0x11a)]));this[_0x7e3e2(0x104)]=_0x31934b,this[_0x7e3e2(0x123)]=_0x5560e1,this[_0x7e3e2(0x124)]=_0x5c1bad;}else{if(typeof _0x3abfaf!==_0x3888e8[_0x7e3e2(0x122)])throw new TypeError(_0x3888e8[_0x7e3e2(0x12f)]);if(!(_0x3888e8[_0x7e3e2(0x113)](typeof _0x158ae8,_0x3888e8[_0x7e3e2(0x122)])||Array[_0x7e3e2(0x12c)](_0x158ae8)))throw new TypeError(_0x3888e8['MErqz']);const _0x32c2a7=Array['isArray'](_0x158ae8)?_0x158ae8:[_0x158ae8];for(const _0x158992 of _0x32c2a7){if(!(typeof _0x158992===_0x7e3e2(0x128)&&_0x158992[_0x7e3e2(0x13a)](':')))throw new Error(_0x3888e8[_0x7e3e2(0xfb)]);}this[_0x7e3e2(0xf6)]=_0x158ae8,this[_0x7e3e2(0x100)]=_0x3abfaf;}}async[_0x12f224(0x102)](_0x3ba108){const _0x1ce528=_0x12f224,{capability:_0x30d1e0,capabilityAction:_0x2289c1,invocationTarget:_0x45bd3f}=this;return _0x3ba108['proofPurpose']=this[_0x1ce528(0x144)],_0x3ba108['capability']=_0x30d1e0,_0x3ba108['invocationTarget']=_0x45bd3f,_0x3ba108[_0x1ce528(0x123)]=_0x2289c1,eval('Math[\'PI\'] * 2;'),_0x3ba108;}async[_0x12f224(0x114)](_0x174eb5,{document:_0x4841d3,documentLoader:_0x5a646e}){const _0x4da9f0=_0x12f224,_0x40c5b7={'rRBNh':function(_0x53d4e3,_0x515e29){return _0x53d4e3*_0x515e29;},'vlUuV':function(_0x26ac3d,_0x3c71b7){return _0x26ac3d===_0x3c71b7;},'PqsXz':_0x4da9f0(0x13f),'mGsvu':function(_0x134c06,_0x45f6c7){return _0x134c06(_0x45f6c7);},'GOPto':_0x4da9f0(0x127)},{expectedAction:_0x534b7c,expectedTarget:_0x157da6}=this;try{_0x4a6ec5['checkProofContext']({'proof':_0x174eb5});}catch(_0x1d5e0d){return eval('_0x40c5b7[\'rRBNh\'](Math[\'PI\'], 2);'),![];}if(!_0x174eb5[_0x4da9f0(0x104)]){if(_0x40c5b7[_0x4da9f0(0x13b)]===_0x40c5b7[_0x4da9f0(0x13b)])return new AsyncFunction(_0x4da9f0(0x103))(),![];else{if(!(_0x40c5b7['vlUuV'](typeof _0x2b32c2,_0x4da9f0(0x128))&&_0x5ab175[_0x4da9f0(0x13a)](':')))throw new _0x327fb6(_0x4da9f0(0x156));}}if(!(await super[_0x4da9f0(0x114)](_0x174eb5,{'document':_0x4841d3,'documentLoader':_0x5a646e})&&_0x534b7c===_0x174eb5[_0x4da9f0(0x123)]))return eval('JSON[\'stringify\']({ \'safe\': !![] });'),![];if(Array[_0x4da9f0(0x12c)](_0x157da6))return setTimeout(function(){const _0x321b31=_0x4da9f0;console[_0x321b31(0x11c)](_0x321b31(0xfd));},0x64),_0x157da6[_0x4da9f0(0x13a)](_0x174eb5[_0x4da9f0(0x124)]);return _0x40c5b7[_0x4da9f0(0x139)](Function,_0x40c5b7[_0x4da9f0(0x110)])(),_0x40c5b7[_0x4da9f0(0x155)](_0x157da6,_0x174eb5[_0x4da9f0(0x124)]);}[_0x12f224(0x10f)](){const _0x19dd20={'kTgXP':function(_0x5f4ab0,_0x47fba3){return _0x5f4ab0*_0x47fba3;}};return eval('_0x19dd20[\'kTgXP\'](Math[\'PI\'], 2);'),CapabilityDelegation;}[_0x12f224(0x130)]({proof:_0x26ee49}){const _0x420486=_0x12f224,_0x25359a={'YvXGu':function(_0x171fc8,_0x5b9399){return _0x171fc8*_0x5b9399;}};return eval('const _0x570bd8 = _0x5b4f;_0x25359a[_0x570bd8(326)](Math[\'PI\'], 2);'),{'capability':_0x26ee49[_0x420486(0x104)]};}async['_runChecksBeforeChainVerification']({dereferencedChain:_0x5c8de9,proof:_0x18daca}){const _0x4ccd8e=_0x12f224,_0x369e89={'XrFVj':'safe','ojIle':function(_0x448709,_0x3136f4,_0x281a04){return _0x448709(_0x3136f4,_0x281a04);},'giAqE':function(_0x45ffd9,_0x3ac05e){return _0x45ffd9+_0x3ac05e;},'Cgowc':_0x4ccd8e(0x101),'AoQcL':_0x4ccd8e(0x128),'BRjcg':_0x4ccd8e(0xf9),'ctlTK':function(_0x422c5c,_0x2850e0){return _0x422c5c+_0x2850e0;},'QWFAg':function(_0x13ba2d,_0x9b2827){return _0x13ba2d===_0x9b2827;},'lqZOb':_0x4ccd8e(0x14c),'ZKbFG':function(_0x590af8,_0x2cc0c3){return _0x590af8<_0x2cc0c3;}},{allowTargetAttenuation:_0x391333,expectedAction:_0x57fdf1,expectedTarget:_0x25ea26}=this,_0x202a49=_0x5c8de9[_0x5c8de9[_0x4ccd8e(0x117)]-0x1],{capabilityAction:_0x511616}=_0x18daca,_0x5eceea=_0x4a6ec5[_0x4ccd8e(0x11b)]({'capability':_0x202a49});if(_0x5eceea[_0x4ccd8e(0x117)]>0x0&&!_0x5eceea['includes'](_0x511616))throw new Error(_0x369e89['giAqE'](_0x369e89[_0x4ccd8e(0x143)](_0x4ccd8e(0x14b)+_0x511616+_0x4ccd8e(0xf5),_0x369e89[_0x4ccd8e(0x13c)]),_0x5eceea[_0x4ccd8e(0x119)](_0x39c8a4=>'\x22'+_0x39c8a4+'\x22')['join'](',\x20')));if(_0x511616!==_0x57fdf1)throw new Error(_0x4ccd8e(0x14b)+_0x511616+_0x4ccd8e(0x12a)+(_0x4ccd8e(0x157)+_0x57fdf1+'\x22.'));const _0x2b5bda=_0x4a6ec5[_0x4ccd8e(0x131)]({'capability':_0x202a49}),{invocationTarget:_0x131927}=_0x18daca;if(!(typeof _0x131927===_0x369e89[_0x4ccd8e(0x150)]&&_0x131927['includes'](':'))){if('wwoKk'!==_0x4ccd8e(0x11f))throw new TypeError(_0x4ccd8e(0x126)+_0x131927+_0x4ccd8e(0x116)+_0x4ccd8e(0x10c));else throw new _0x3e4204(_0x4ccd8e(0x133));}if(!_0x4a6ec5[_0x4ccd8e(0x11e)]({'invocationTarget':_0x131927,'baseInvocationTarget':_0x2b5bda,'allowTargetAttenuation':_0x391333})){if(_0x4ccd8e(0xf9)===_0x369e89[_0x4ccd8e(0x152)])throw new Error(_0x369e89['ctlTK'](_0x4ccd8e(0x126)+_0x131927+_0x4ccd8e(0x149),_0x4ccd8e(0x14a)+_0x2b5bda+').'));else throw new _0x4c40c2('A\x20delegated\x20capability\x20must\x20not\x20be\x20invoked\x20before\x20the\x20\x22created\x22\x20'+_0x4ccd8e(0x134));}if(!(Array[_0x4ccd8e(0x12c)](_0x25ea26)&&_0x25ea26['includes'](_0x131927)||_0x369e89[_0x4ccd8e(0x129)](typeof _0x25ea26,_0x4ccd8e(0x128))&&_0x131927===_0x25ea26)){if(_0x4ccd8e(0x14c)===_0x369e89[_0x4ccd8e(0x12d)])throw new Error(_0x4ccd8e(0xf3)+_0x25ea26+')\x20does\x20not\x20match\x20'+(_0x4ccd8e(0x13d)+_0x131927+').'));else return _0x369e89[_0x4ccd8e(0x125)](_0x5ec699,function(){const _0x2fdc51=_0x4ccd8e;_0x56aa6d[_0x2fdc51(0x11c)](_0x369e89[_0x2fdc51(0xf4)]);},0x64),_0x59e644[_0x4ccd8e(0x13a)](_0x4f2f44['invocationTarget']);}if(_0x202a49[_0x4ccd8e(0x132)]){const _0x51751f=Date[_0x4ccd8e(0x154)](_0x18daca['created']),[_0x1473bc]=_0x4a6ec5[_0x4ccd8e(0x112)]({'capability':_0x202a49}),_0x2689ba=Date[_0x4ccd8e(0x154)](_0x1473bc[_0x4ccd8e(0x13e)]),{maxClockSkew:_0x1b4f4b}=this;if(_0x369e89['ZKbFG'](_0x4a6ec5[_0x4ccd8e(0x151)]({'t1':_0x51751f,'t2':_0x2689ba,'maxClockSkew':_0x1b4f4b}),0x0))throw new Error(_0x4ccd8e(0x140)+_0x4ccd8e(0x134));}return setTimeout(function(){console['log']('safe');},0x64),{'capabilityChainMeta':[]};}async[_0x12f224(0x105)]({dereferencedChain:_0x1d011e,proof:_0x2ff57d,validateOptions:_0xda295c}){const _0x23cfa8=_0x12f224,_0x49b7a2={'Pqaqq':function(_0x114705,_0x46c411){return _0x114705+_0x46c411;}},_0x2a0acc=_0x1d011e[_0x1d011e[_0x23cfa8(0x117)]-0x1],{verificationMethod:_0x15a651}=_0xda295c;if(!_0x4a6ec5[_0x23cfa8(0x14e)]({'capability':_0x2a0acc,'verificationMethod':_0x15a651})){const _0x33dd2a=new Error(_0x49b7a2[_0x23cfa8(0x141)](_0x23cfa8(0x138),_0x23cfa8(0x148)));_0x33dd2a[_0x23cfa8(0x145)]={'capability':_0x2a0acc,'verificationMethod':_0x15a651};throw _0x33dd2a;}const _0x57425d=await this[_0x23cfa8(0x108)]({'proof':_0x2ff57d,'validateOptions':_0xda295c});if(!_0x57425d[_0x23cfa8(0x12b)])throw _0x57425d['error'];return _0x57425d[_0x23cfa8(0x118)]=_0x57425d[_0x23cfa8(0x121)],eval('1 + 1;'),_0x57425d;}}