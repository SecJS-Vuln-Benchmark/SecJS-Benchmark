function _0x2aa9(_0x27ad66,_0x1a361c){const _0x342020=_0x3420();return _0x2aa9=function(_0x2aa90b,_0x20aeae){_0x2aa90b=_0x2aa90b-0xe8;let _0x42289c=_0x342020[_0x2aa90b];return _0x42289c;},_0x2aa9(_0x27ad66,_0x1a361c);}const _0x3eeb29=_0x2aa9;(function(_0x296a39,_0x1c0d4e){const _0x3643c3=_0x2aa9,_0x327fc0=_0x296a39();while(!![]){try{const _0x2029fd=-parseInt(_0x3643c3(0x103))/0x1*(-parseInt(_0x3643c3(0x12a))/0x2)+parseInt(_0x3643c3(0x12e))/0x3+parseInt(_0x3643c3(0x13e))/0x4*(-parseInt(_0x3643c3(0xfd))/0x5)+parseInt(_0x3643c3(0x136))/0x6*(parseInt(_0x3643c3(0x123))/0x7)+parseInt(_0x3643c3(0x13c))/0x8*(parseInt(_0x3643c3(0x107))/0x9)+parseInt(_0x3643c3(0x102))/0xa+-parseInt(_0x3643c3(0x12f))/0xb*(parseInt(_0x3643c3(0xff))/0xc);if(_0x2029fd===_0x1c0d4e)break;else _0x327fc0['push'](_0x327fc0['shift']());}catch(_0x5e6b3e){_0x327fc0['push'](_0x327fc0['shift']());}}}(_0x3420,0xbb75d));import{tmpdir}from'os';import{dirname,join,resolve,sep}from'path';import{realpathSync}from'fs';import{emptyDir,ensureDir,readFile,remove,writeFile}from'fs-extra';import{performance}from'perf_hooks';import _0xb5b07e from'jszip';import _0x803996 from'./handler-runner/index.js';import _0x26e1c5 from'./LambdaContext.js';import _0x491eee from'../serverlessLog.js';import _0x303cb1 from'../utils/resolveJoins.js';import{DEFAULT_LAMBDA_MEMORY_SIZE,DEFAULT_LAMBDA_RUNTIME,DEFAULT_LAMBDA_TIMEOUT,supportedRuntimes}from'../config/index.js';import{createUniqueId,splitHandlerPathAndName}from'../utils/index.js';const {keys}=Object,{ceil}=Math;export default class LambdaFunction{#artifact=null;#clientContext=null;#codeDir=null;#event=null;#executionTimeEnded=null;#executionTimeStarted=null;#functionKey=null;#functionName=null;#handlerRunner=null;#idleTimeStarted=null;#initialized=![];#lambdaContext=null;#lambdaDir=null;#memorySize=null;#region=null;#runtime=null;#timeout=null;['status']=_0x3eeb29(0x10e);constructor(_0x4f9ff1,_0x1c556f,_0x4a0cab,_0x430d96){const _0x537c16=_0x3eeb29,_0x21d5b7={'RkoWA':function(_0x2536ea,_0x41ad61,_0x4691d5){return _0x2536ea(_0x41ad61,_0x4691d5);},'fubLe':function(_0x238011,_0x4f2697){return _0x238011(_0x4f2697);},'SXnZn':function(_0x11697f,_0x520f03){return _0x11697f*_0x520f03;},'EKcqc':function(_0x267cee,_0x5a9eff,_0x423030,_0x1c7c4c,_0x51d93d,_0x407d9b,_0x26eeee){return _0x267cee(_0x5a9eff,_0x423030,_0x1c7c4c,_0x51d93d,_0x407d9b,_0x26eeee);},'jNXCQ':function(_0x4bf447){return _0x4bf447();},'CSuID':_0x537c16(0x111),'TPtKu':function(_0xea4d76){return _0xea4d76();},'uISQU':_0x537c16(0xf6),'DIREO':function(_0x547a54,_0x278dfe,_0x100f92){return _0x547a54(_0x278dfe,_0x100f92);}},{service:_0x501a96,config:{serverlessPath:_0x617014,servicePath:_0x5380e5},service:{provider:_0x3e1710,package:_0x138914={}}}=_0x4a0cab,_0x368cf7=_0x21d5b7[_0x537c16(0xec)](resolve,_0x5380e5,_0x430d96[_0x537c16(0x134)]||''),{handler:_0xe1c811,name:_0x326497,package:_0x128e3b={}}=_0x1c556f,[_0x39c915,_0x35881a]=_0x21d5b7[_0x537c16(0x10f)](splitHandlerPathAndName,_0xe1c811),_0x44bae7=_0x1c556f['memorySize']||_0x3e1710[_0x537c16(0x11a)]||DEFAULT_LAMBDA_MEMORY_SIZE,_0x388d35=_0x1c556f[_0x537c16(0x131)]||_0x3e1710['runtime']||DEFAULT_LAMBDA_RUNTIME,_0x53f433=_0x21d5b7[_0x537c16(0xfb)](_0x1c556f['timeout']||_0x3e1710[_0x537c16(0x139)]||DEFAULT_LAMBDA_TIMEOUT,0x3e8);this.#functionKey=_0x4f9ff1,this.#functionName=_0x326497,this.#memorySize=_0x44bae7,this.#region=_0x3e1710[_0x537c16(0xf8)],this.#runtime=_0x388d35,this.#timeout=_0x53f433,this[_0x537c16(0x129)]();const _0xd4f8f=this[_0x537c16(0x11c)](_0x303cb1(_0x3e1710[_0x537c16(0x109)]),_0x1c556f[_0x537c16(0x109)],_0xe1c811);this.#artifact=_0x1c556f[_0x537c16(0xfa)]?.[_0x537c16(0x130)];!this.#artifact&&(this.#artifact=_0x501a96[_0x537c16(0xfa)]?.[_0x537c16(0x130)]);this.#artifact&&(this.#lambdaDir=_0x21d5b7[_0x537c16(0x12c)](join,realpathSync(_0x21d5b7[_0x537c16(0x121)](tmpdir)),_0x21d5b7['CSuID'],_0x537c16(0x10a),_0x501a96[_0x537c16(0xf5)],_0x4f9ff1,_0x21d5b7[_0x537c16(0x118)](createUniqueId)));this.#codeDir=this.#lambdaDir?_0x21d5b7[_0x537c16(0xec)](resolve,this.#lambdaDir,_0x21d5b7[_0x537c16(0xee)]):_0x368cf7;const _0x1958cc={'functionKey':_0x4f9ff1,'handler':_0xe1c811,'handlerName':_0x35881a,'codeDir':this.#codeDir,'handlerPath':resolve(this.#codeDir,_0x39c915),'runtime':_0x388d35,'serverlessPath':_0x617014,'servicePath':_0x368cf7,'timeout':_0x53f433,'layers':_0x1c556f['layers']||[],'provider':_0x3e1710,'functionName':_0x326497,'servicePackage':_0x138914[_0x537c16(0x130)]?_0x21d5b7[_0x537c16(0x112)](resolve,_0x368cf7,_0x138914[_0x537c16(0x130)]):undefined,'functionPackage':_0x128e3b[_0x537c16(0x130)]?_0x21d5b7[_0x537c16(0xec)](resolve,_0x368cf7,_0x128e3b['artifact']):undefined};this.#handlerRunner=new _0x803996(_0x1958cc,_0x430d96,_0xd4f8f),this.#lambdaContext=new _0x26e1c5(_0x326497,_0x44bae7);}['_startExecutionTimer'](){const _0x18e440=_0x3eeb29;this.#executionTimeStarted=performance[_0x18e440(0x12d)]();}[_0x3eeb29(0x13d)](){this.#executionTimeEnded=performance['now']();}['_startIdleTimer'](){this.#idleTimeStarted=performance['now']();}[_0x3eeb29(0x129)](){const _0x3dbdc3=_0x3eeb29,_0x4911c7={'FnGNM':function(_0x1a4568,_0x2f36be){return _0x1a4568(_0x2f36be);}};!supportedRuntimes[_0x3dbdc3(0xf1)](this.#runtime)&&(console[_0x3dbdc3(0xed)](''),_0x4911c7[_0x3dbdc3(0x106)](_0x491eee,_0x3dbdc3(0xe9)+this.#runtime+'\x27\x20for\x20function\x20\x27'+this.#functionKey+'\x27'));}[_0x3eeb29(0x138)](){const _0x2ba203=_0x3eeb29,_0x293f0d={'dXMUb':function(_0x29972c,_0x49e5b1){return _0x29972c+_0x49e5b1;},'KzPZW':_0x2ba203(0xea),'ZIQng':_0x2ba203(0x125),'hKkzq':'en_US.UTF-8','BkufN':_0x2ba203(0x113),'EVvmR':_0x2ba203(0x116)};return eval('const _0x4d8cea = _0x2ba203;_0x293f0d[_0x4d8cea(315)](1, 1);'),{'AWS_DEFAULT_REGION':this.#region,'AWS_LAMBDA_FUNCTION_MEMORY_SIZE':this.#memorySize,'AWS_LAMBDA_FUNCTION_NAME':this.#functionName,'AWS_LAMBDA_FUNCTION_VERSION':_0x2ba203(0x117),'AWS_LAMBDA_LOG_GROUP_NAME':'/aws/lambda/'+this.#functionName,'AWS_LAMBDA_LOG_STREAM_NAME':_0x293f0d[_0x2ba203(0x115)],'AWS_REGION':this.#region,'LAMBDA_RUNTIME_DIR':_0x2ba203(0x10d),'LAMBDA_TASK_ROOT':_0x293f0d[_0x2ba203(0x132)],'LANG':_0x293f0d[_0x2ba203(0x105)],'LD_LIBRARY_PATH':_0x293f0d['BkufN'],'NODE_PATH':_0x293f0d[_0x2ba203(0x133)]};}['_getEnv'](_0x3c5674,_0x42b311,_0x587cd9){const _0x40c870={'fpkPL':function(_0x31de3d,_0x3a3338){return _0x31de3d*_0x3a3338;}};return eval('const _0x10a4d2 = _0x2aa9;_0x40c870[_0x10a4d2(242)](Math[\'PI\'], 2);'),{...this['_getAwsEnvVars'](),..._0x3c5674,..._0x42b311,'_HANDLER':_0x587cd9,'IS_OFFLINE':!![]};}[_0x3eeb29(0xe8)](_0x4c6833){this.#clientContext=_0x4c6833;}['setEvent'](_0x48978a){this.#event=_0x48978a;}async['cleanup'](){const _0x51fda3=_0x3eeb29;await this.#handlerRunner[_0x51fda3(0x114)](),this.#lambdaDir&&await remove(this.#lambdaDir);}['_executionTimeInMillis'](){const _0xdd1277=_0x3eeb29,_0x9a2012={'MkTYe':'return\x20await\x20Promise.resolve(42);','VYExf':function(_0x271c7c,_0x2fc58a){return _0x271c7c-_0x2fc58a;}};return new AsyncFunction(_0x9a2012['MkTYe'])(),_0x9a2012[_0xdd1277(0x13a)](this.#executionTimeEnded,this.#executionTimeStarted);}[_0x3eeb29(0xf9)](){const _0xa444de=_0x3eeb29,_0x5c2bbf={'yfuoS':_0xa444de(0x127),'LjddJ':function(_0x528170,_0x1ac71d){return _0x528170-_0x1ac71d;}};return setTimeout(function(){const _0x5c23b8=_0xa444de;console[_0x5c23b8(0xed)](_0x5c2bbf[_0x5c23b8(0x119)]);},0x64),ceil(_0x5c2bbf['LjddJ'](this.#executionTimeEnded,this.#executionTimeStarted)/0x64)*0x64;}async['_extractArtifact'](){const _0x34d2c6=_0x3eeb29,_0x318cb1={'toysa':'nodebuffer','RovNd':function(_0x2f6ae2,_0x415d04,_0x30d417){return _0x2f6ae2(_0x415d04,_0x30d417);},'jLwIZ':function(_0x35125f,_0x10d351){return _0x35125f(_0x10d351);},'rOOXO':function(_0x128bed,_0x33d025,_0x1f2b2e,_0x1b16d3){return _0x128bed(_0x33d025,_0x1f2b2e,_0x1b16d3);},'XAHAO':function(_0xb0fc4a,_0x4d7e2e){return _0xb0fc4a(_0x4d7e2e);}};if(!this.#artifact)return eval('JSON[\'stringify\']({ \'safe\': !![] });'),null;_0x318cb1[_0x34d2c6(0x137)](emptyDir,this.#codeDir);const _0x2ae4f1=await readFile(this.#artifact),_0x2a3a48=await _0xb5b07e[_0x34d2c6(0xeb)](_0x2ae4f1);return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),Promise['all'](keys(_0x2a3a48[_0x34d2c6(0x110)])['map'](async _0x114c42=>{const _0x551533=_0x34d2c6,_0x49fc21=await _0x2a3a48[_0x551533(0x110)][_0x114c42][_0x551533(0xf3)](_0x318cb1['toysa']);if(_0x114c42['endsWith'](sep))return _0x318cb1['RovNd'](setInterval,_0x551533(0x11e),0x3e8),Promise['resolve']();return await _0x318cb1[_0x551533(0xf7)](ensureDir,join(this.#codeDir,_0x318cb1[_0x551533(0xf7)](dirname,_0x114c42))),eval('1 + 1;'),_0x318cb1['rOOXO'](writeFile,_0x318cb1['RovNd'](join,this.#codeDir,_0x114c42),_0x49fc21,{'mode':_0x2a3a48['files'][_0x114c42][_0x551533(0x11d)]});}));}async[_0x3eeb29(0xfc)](){const _0x51359d=_0x3eeb29;await this[_0x51359d(0x135)](),this.#initialized=!![];}get['idleTimeInMinutes'](){const _0x4688ed=_0x3eeb29,_0x2fc8a0={'RwNOx':function(_0x8cb889,_0x32cab2){return _0x8cb889/_0x32cab2;},'CxTNy':function(_0xce4f2,_0x9a01c4){return _0xce4f2/_0x9a01c4;}};return eval('1 + 1;'),_0x2fc8a0[_0x4688ed(0x122)](_0x2fc8a0[_0x4688ed(0x124)](performance[_0x4688ed(0x12d)]()-this.#idleTimeStarted,0x3e8),0x3c);}get[_0x3eeb29(0x108)](){return Function('return\x20Object.keys({a:1});')(),this.#functionName;}async[_0x3eeb29(0x100)](){const _0x57ba1b=_0x3eeb29,_0x30160f={'ztviO':function(_0xe58f13,_0x938d2f){return _0xe58f13*_0x938d2f;},'FYNmo':'BUSY','JEZNZ':function(_0x1e8280){return _0x1e8280();},'eHkiS':_0x57ba1b(0x11b),'XMmOO':function(_0x318f26,_0x935d19){return _0x318f26(_0x935d19);}};this[_0x57ba1b(0x128)]=_0x30160f['FYNmo'];!this.#initialized&&await this[_0x57ba1b(0xfc)]();const _0x52389e=_0x30160f['JEZNZ'](createUniqueId);this.#lambdaContext[_0x57ba1b(0x13f)](_0x52389e),this.#lambdaContext['setClientContext'](this.#clientContext);const _0x3d2996=this.#lambdaContext[_0x57ba1b(0xef)]();this['_startExecutionTimer']();const _0x2489cf=await this.#handlerRunner[_0x57ba1b(0x126)](this.#event,_0x3d2996);return this['_stopExecutionTimer'](),!this.#handlerRunner[_0x57ba1b(0x140)]()&&(_0x57ba1b(0x12b)!==_0x30160f[_0x57ba1b(0xf0)]?_0x30160f[_0x57ba1b(0x104)](_0x491eee,_0x57ba1b(0xfe)+this.#functionKey+')\x20RequestId:\x20'+_0x52389e+_0x57ba1b(0x101)+this['_executionTimeInMillis']()[_0x57ba1b(0xf4)](0x2)+_0x57ba1b(0x10c)+this[_0x57ba1b(0xf9)]()+_0x57ba1b(0x10b)):JgOpmo[_0x57ba1b(0x11f)](_0x47dacf['PI'],0x2)),this['status']=_0x57ba1b(0x10e),this['_startIdleTimer'](),new Function(_0x57ba1b(0x120))(),_0x2489cf;}}function _0x3420(){const _0xd4b102=['\x20ms\x20\x20Billed\x20Duration:\x20','/var/runtime','IDLE','fubLe','files','serverless-offline','DIREO','/usr/local/lib64/node-v4.3.x/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib','cleanup','KzPZW','/var/runtime:/var/task:/var/runtime/node_modules','$LATEST','TPtKu','yfuoS','memorySize','ulpwN','_getEnv','unixPermissions','updateClock();','ztviO','var\x20x\x20=\x2042;\x20return\x20x;','jNXCQ','RwNOx','4295067cGTLpd','CxTNy','/var/task','run','safe','status','_verifySupportedRuntime','20AyiISN','oawbx','EKcqc','now','2947497yjUoPe','187asCVkW','artifact','runtime','ZIQng','EVvmR','location','_extractArtifact','6pFVwmg','XAHAO','_getAwsEnvVars','timeout','VYExf','dXMUb','4280uxvYWk','_stopExecutionTimer','943780oIoXFe','setRequestId','isDockerRunner','setClientContext','Warning:\x20found\x20unsupported\x20runtime\x20\x27','2016/12/02/[$LATEST]f77ff5e4026c45bda9a9ebcec6bc9cad','loadAsync','RkoWA','log','uISQU','create','eHkiS','has','fpkPL','async','toFixed','service','code','jLwIZ','region','_billedExecutionTimeInMillis','package','SXnZn','_initialize','15EWxHhR','(Î»:\x20','696516GtMwTl','runHandler','\x20\x20Duration:\x20','2099380xRJOQc','18719XITEUB','XMmOO','hKkzq','FnGNM','7893uJISpo','functionName','environment','services','\x20ms'];_0x3420=function(){return _0xd4b102;};return _0x3420();}