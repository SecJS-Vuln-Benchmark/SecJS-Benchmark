const _0x1b59d9=_0x5ac1;function _0x5ac1(_0x53f7ec,_0x38f4f4){const _0x3c8ca1=_0x3c8c();return _0x5ac1=function(_0x5ac1b5,_0x5f1a48){_0x5ac1b5=_0x5ac1b5-0x1ec;let _0x594f33=_0x3c8ca1[_0x5ac1b5];return _0x594f33;},_0x5ac1(_0x53f7ec,_0x38f4f4);}(function(_0x816351,_0x28a191){const _0x97da12=_0x5ac1,_0x1fa574=_0x816351();while(!![]){try{const _0x398554=-parseInt(_0x97da12(0x200))/0x1*(parseInt(_0x97da12(0x1f9))/0x2)+parseInt(_0x97da12(0x217))/0x3*(parseInt(_0x97da12(0x1f7))/0x4)+-parseInt(_0x97da12(0x1f1))/0x5+parseInt(_0x97da12(0x219))/0x6+-parseInt(_0x97da12(0x209))/0x7*(-parseInt(_0x97da12(0x1ff))/0x8)+-parseInt(_0x97da12(0x206))/0x9+-parseInt(_0x97da12(0x20e))/0xa*(parseInt(_0x97da12(0x215))/0xb);if(_0x398554===_0x28a191)break;else _0x1fa574['push'](_0x1fa574['shift']());}catch(_0x1921cf){_0x1fa574['push'](_0x1fa574['shift']());}}}(_0x3c8c,0x5083e));function _0x3c8c(){const _0x173ccd=['btVrU','./schema/presetSchema','string','error','isArray','3421431coKcoK','SMEMM','_id','406931bglCxq','find','TBVnf','Error\x20saving\x20preset','map','424670KMUjpP','[savePreset]\x20Error\x20saving\x20preset','XSlaY','order','mdfIz','IWbDJ','filter','66vWbIpO','tMOyA','1601685dQeTlu','presetId','3266574trLGMu','Error\x20getting\x20single\x20preset','findOne','updatedAt','YiBkv','[getPresets]\x20Error\x20getting\x20presets','710010pmKtuU','exports','AmoyS','~/config','[getPreset]\x20Error\x20getting\x20single\x20preset','xZlyg','4NqkAMd','defaultPreset','214aTSkAI','lean','$unset','tools','hoTIN','GyDFO','72MYnnoO','4624ODJKGF'];_0x3c8c=function(){return _0x173ccd;};return _0x3c8c();}const Preset=require(_0x1b59d9(0x202)),{logger}=require(_0x1b59d9(0x1f4)),getPreset=async(_0x2e427b,_0x18efad)=>{const _0x24a4ba=_0x1b59d9,_0xf4ae30={'GyDFO':_0x24a4ba(0x1f5)};try{return await Preset[_0x24a4ba(0x1ed)]({'user':_0x2e427b,'presetId':_0x18efad})[_0x24a4ba(0x1fa)]();}catch(_0x3cc2b0){return logger[_0x24a4ba(0x204)](_0xf4ae30[_0x24a4ba(0x1fe)],_0x3cc2b0),{'message':_0x24a4ba(0x1ec)};}};module[_0x1b59d9(0x1f2)]={'Preset':Preset,'getPreset':getPreset,'getPresets':async(_0x4d7016,_0x3df717)=>{const _0x57f9e2=_0x1b59d9,_0x319c2f={'SMEMM':function(_0x43c96e,_0x34c0ea){return _0x43c96e!==_0x34c0ea;},'TBVnf':function(_0x2e3ef3,_0x484464){return _0x2e3ef3-_0x484464;},'hoTIN':function(_0x5a95ff,_0x2a3595){return _0x5a95ff===_0x2a3595;},'DbKld':_0x57f9e2(0x1f0),'IWbDJ':'Error\x20retrieving\x20presets'};try{if(_0x319c2f[_0x57f9e2(0x1fd)](_0x57f9e2(0x216),_0x57f9e2(0x1f6)))_0x1250b5['presetId']=_0xeebb19;else{const _0x2b08af=await Preset[_0x57f9e2(0x20a)]({..._0x3df717,'user':_0x4d7016})[_0x57f9e2(0x1fa)](),_0x5d968f=0x2710;return _0x2b08af['sort']((_0x20ea23,_0x421234)=>{const _0x3d605b=_0x57f9e2;let _0x4a28b2=_0x20ea23[_0x3d605b(0x211)]!==undefined?_0x20ea23[_0x3d605b(0x211)]:_0x5d968f,_0x521eec=_0x319c2f[_0x3d605b(0x207)](_0x421234['order'],undefined)?_0x421234[_0x3d605b(0x211)]:_0x5d968f;if(_0x4a28b2!==_0x521eec)return _0x319c2f[_0x3d605b(0x20b)](_0x4a28b2,_0x521eec);return _0x421234['updatedAt']-_0x20ea23[_0x3d605b(0x1ee)];}),_0x2b08af;}}catch(_0x236719){return logger[_0x57f9e2(0x204)](_0x319c2f['DbKld'],_0x236719),{'message':_0x319c2f[_0x57f9e2(0x213)]};}},'savePreset':async(_0x150e39,{presetId:_0x158e0f,newPresetId:_0x505b7c,defaultPreset:_0x2dfbc9,..._0x59815d})=>{const _0x1ff695=_0x1b59d9,_0x38c215={'TWqXZ':_0x1ff695(0x20f),'btVrU':_0x1ff695(0x1f3),'XSlaY':_0x1ff695(0x1ef),'mdfIz':function(_0x3a170e,_0x3f2526){return _0x3a170e!==_0x3f2526;}};try{const _0x136e90={'$set':{}},{user:_0x56537e,..._0x4a76eb}=_0x59815d,_0x2636f3={'presetId':_0x158e0f,..._0x4a76eb};_0x59815d[_0x1ff695(0x1fc)]&&Array[_0x1ff695(0x205)](_0x59815d[_0x1ff695(0x1fc)])&&(_0x2636f3[_0x1ff695(0x1fc)]=_0x59815d[_0x1ff695(0x1fc)][_0x1ff695(0x20d)](_0x5f3312=>_0x5f3312?.['pluginKey']??_0x5f3312)[_0x1ff695(0x214)](_0x38a5dc=>typeof _0x38a5dc===_0x1ff695(0x203))??[]);_0x505b7c&&(_0x2636f3[_0x1ff695(0x218)]=_0x505b7c);if(_0x2dfbc9){if(_0x38c215[_0x1ff695(0x201)]!==_0x38c215[_0x1ff695(0x210)]){_0x2636f3['defaultPreset']=_0x2dfbc9,_0x2636f3[_0x1ff695(0x211)]=0x0;const _0x192e7a=await Preset[_0x1ff695(0x1ed)]({'defaultPreset':!![],'user':_0x150e39});_0x192e7a&&_0x38c215[_0x1ff695(0x212)](_0x192e7a['presetId'],_0x158e0f)&&await Preset['findByIdAndUpdate'](_0x192e7a[_0x1ff695(0x208)],{'$unset':{'defaultPreset':'','order':''}});}else return _0x58c0ec[_0x1ff695(0x204)](_0x38c215['TWqXZ'],_0x530195),{'message':_0x1ff695(0x20c)};}else _0x2dfbc9===![]&&(_0x2636f3[_0x1ff695(0x1f8)]=undefined,_0x2636f3[_0x1ff695(0x211)]=undefined,_0x136e90[_0x1ff695(0x1fb)]={'defaultPreset':'','order':''});return _0x136e90['$set']=_0x2636f3,await Preset['findOneAndUpdate']({'presetId':_0x158e0f,'user':_0x150e39},_0x136e90,{'new':!![],'upsert':!![]});}catch(_0x1e554d){return logger['error'](_0x38c215['TWqXZ'],_0x1e554d),{'message':'Error\x20saving\x20preset'};}},'deletePresets':async(_0x4bb3de,_0x12aa62)=>{let _0x8070d=await Preset['deleteMany']({..._0x12aa62,'user':_0x4bb3de});return _0x8070d;}};