function _0x1cb5(_0x281418,_0x407a57){const _0x32da8d=_0x32da();return _0x1cb5=function(_0x1cb5d1,_0xfa5ace){_0x1cb5d1=_0x1cb5d1-0x1c8;let _0x301ad5=_0x32da8d[_0x1cb5d1];return _0x301ad5;},_0x1cb5(_0x281418,_0x407a57);}(function(_0x56f620,_0x4cc1aa){const _0x54db42=_0x1cb5,_0x282b08=_0x56f620();while(!![]){try{const _0x271cda=-parseInt(_0x54db42(0x1f9))/0x1*(-parseInt(_0x54db42(0x1dd))/0x2)+parseInt(_0x54db42(0x242))/0x3+parseInt(_0x54db42(0x212))/0x4*(-parseInt(_0x54db42(0x254))/0x5)+parseInt(_0x54db42(0x220))/0x6+parseInt(_0x54db42(0x264))/0x7+parseInt(_0x54db42(0x1d4))/0x8*(-parseInt(_0x54db42(0x24a))/0x9)+parseInt(_0x54db42(0x23e))/0xa*(-parseInt(_0x54db42(0x213))/0xb);if(_0x271cda===_0x4cc1aa)break;else _0x282b08['push'](_0x282b08['shift']());}catch(_0x377650){_0x282b08['push'](_0x282b08['shift']());}}}(_0x32da,0x89602));function _0x32da(){const _0x450c61=['\x22\x20from\x20capability\x20chain.','includes','oUnYK','274yiHHZW','qUyid','parentCapability','JyKXE','sbRBa','XWUIa','Capability\x20chain\x20is\x20invalid;\x20the\x20last\x20entry\x20does\x20not\x20','tNrZQ','qGOiI','match\x20the\x20parent\x20capability.','nUmAP','cbRFQ','QZqJP','OjrHs','PBBjA','value\x20that\x20expresses\x20an\x20absolute\x20URI.','fdoBg','OXlnR','parse','nusbp','with\x20\x22','Capability\x20chain\x20is\x20invalid;\x20it\x20contains\x20a\x20capability\x20ID\x20','ckMQS','SWlBA','WdHRs','qVpax','ACuZC','Delegated\x20capability\x20must\x20have\x20an\x20\x22@context\x22\x20array\x20','4883mqsVaz','Delegated\x20capability\x20must\x20have\x20a\x20valid\x20proof\x20\x22created\x22\x20date.','OYATi','invocationTarget','Capability\x20must\x20have\x20an\x20\x22invocationTarget\x22\x20with\x20a\x20string\x20value\x20that\x20','UZKsB','var\x20x\x20=\x2042;\x20return\x20x;','LzTag','VxNKH','The\x20capability\x20chain\x20contains\x20a\x20cycle.','be\x20an\x20object\x20with\x20an\x20\x22id\x22\x20property\x20that\x20is\x20a\x20string.','KMxEE','not\x20the\x20root\x20capability\x20yet\x20it\x20does\x20not\x20have\x20exactly\x20one\x20delegation\x20','DMGmJ','QVHfb','rWeWb','Capability\x20controller\x20not\x20found.','ieQds','QpLkf','oXUCU','zfhrr','sTlWN','updateClock();','EfGfY','virMm','189188oRoLTD','11OtgdMy','Delegated\x20capability\x20must\x20have\x20a\x20valid\x20expires\x20date.','Capability\x20must\x20have\x20an\x20\x22id\x22\x20with\x20a\x20string\x20value\x20that\x20expresses\x20an\x20','of\x20capability\x20IDs\x20except\x20the\x20last\x20capability\x20if\x20it\x20is\x20','Cannot\x20compute\x20capability\x20chain;\x20parent\x20capability\x20chain\x20is\x20','match\x20reference\x20ID\x20\x22','Root\x20capability\x20must\x20not\x20have\x20an\x20\x22expires\x22\x20field.','created','yFyoC','eVejd','TqGlQ','isArray','root\x20capability\x20yet\x20it\x20does\x20not\x20have\x20exactly\x20one\x20delegation\x20proof.','2988090PGKAjQ','If\x20present\x20on\x20a\x20capability,\x20\x22allowedAction\x22\x20must\x20be\x20a\x20string\x20or\x20a\x20','UwyKk','a\x20\x22capabilityChain\x22\x20array\x20in\x20its\x20delegation\x20proof.','psRVO','some','MYwfg','return\x20new\x20Date();','controller','Expected\x20capability\x20\x22','stringify','zyQln','dOOcr','mVGuL','the\x20last\x20capability\x20if\x20it\x20is\x20delegated,\x20in\x20which\x20case\x20it\x20must\x20','slice','cFlWP','RFqQu','proof.','The\x20capability\x20chain\x20is\x20inconsistent.','MOtrg','DJOkY','Cannot\x20get\x20capability\x20chain;\x20capability\x20is\x20invalid;\x20it\x20does\x20not\x20have\x20','fLVRt','wwPNm','QcRhC','cSkAU','McbXw','Capability\x20chain\x20is\x20invalid;\x20it\x20must\x20consist\x20of\x20strings\x20','gMXMg','2593940nMGcsQ','qpvwE','expires','entries','1352007ggzETJ','Delegated\x20capability\x20must\x20have\x20a\x20\x22proof\x22.','expresses\x20an\x20absolute\x20URI.','zcsAU','get','LTZqc','push','azGHi','117cKhxhf','cTSlU','Cannot\x20get\x20capability\x20chain;\x20capability\x20is\x20invalid;\x20it\x20is\x20not\x20the\x20','GwrAP','azkIe','safe','proof','kMLWr','set','that\x20is\x20not\x20an\x20absolute\x20URI.','35IHxmgL','tDRxe','\x22\x20does\x20not\x20','sCEsc','length','Xmlrz','eIXEm','object','tsQOv','VQpjB','pBAHE','capabilityDelegation','zanYZ','return\x20await\x20Promise.resolve(42);','absolute\x20URI.','HvrMy','1120469ophbfd','log','nusMp','ivMVQ','MEJTA','The\x20capability\x20chain\x20length\x20is\x20incongruent.','Dereferenced\x20root\x20capability\x20ID\x20\x22','abs','cmtYi','qtgnY','jCzKK','LxnXm','oIIqz','aLYxj','SMQOT','property\x20that\x20is\x20a\x20string.','string','\x22\x20to\x20be\x20delegated\x20but\x20it\x20is\x20root.','every','rdExc','test','ShaUh','384344bbIROr','wciFk','DtDVx','qFVVv','\x22\x20to\x20be\x20root\x20','invalid\x20because\x20uses\x20relative\x20URL(s)\x20in\x20its\x20capability\x20chain.'];_0x32da=function(){return _0x450c61;};return _0x32da();}import{MAX_CHAIN_LENGTH,ZCAP_CONTEXT_URL,ZCAP_ROOT_PREFIX}from'./constants.js';export function createRootCapability({controller:_0x150652,invocationTarget:_0x4aa4e1}){return eval('Math[\'PI\'] * 2;'),{'@context':ZCAP_CONTEXT_URL,'id':''+ZCAP_ROOT_PREFIX+encodeURIComponent(_0x4aa4e1),'controller':_0x150652,'invocationTarget':_0x4aa4e1};}export function getControllers({capability:_0x5c2ae1}){const _0x1ac594=_0x1cb5,{controller:_0xe7aa3b}=_0x5c2ae1;if(!_0xe7aa3b)throw new Error('Capability\x20controller\x20not\x20found.');return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),Array[_0x1ac594(0x21e)](_0xe7aa3b)?_0xe7aa3b:[_0xe7aa3b];}export function isController({capability:_0x29b2e0,verificationMethod:_0x3f8af9}){const _0x599adc=_0x1cb5,_0x4459a3={'fNlwa':function(_0x575f88,_0x48d760){return _0x575f88+_0x48d760;},'boaMV':function(_0xecddc3,_0x3276c3){return _0xecddc3(_0x3276c3);}},_0x3a1c9b=_0x4459a3['boaMV'](getControllers,{'capability':_0x29b2e0});return eval('_0x4459a3[\'fNlwa\'](1, 1);'),_0x3a1c9b['includes'](_0x3f8af9[_0x599adc(0x228)])||_0x3a1c9b[_0x599adc(0x1db)](_0x3f8af9['id']);}export function getAllowedActions({capability:_0x401275}){const _0x4d3a41=_0x1cb5,_0x186c1e={'GwrAP':function(_0x2a595c,_0x4eeddc){return _0x2a595c+_0x4eeddc;},'cmtYi':function(_0xa463fb,_0x4419b6){return _0xa463fb+_0x4419b6;},'VxNKH':'Cannot\x20compute\x20capability\x20chain;\x20parent\x20capability\x20is\x20invalid;\x20it\x20is\x20','XbjYh':'proof.','oXUCU':function(_0xdfd746,_0x58414d){return _0xdfd746===_0x58414d;},'Xmlrz':_0x4d3a41(0x25c),'cFlWP':_0x4d3a41(0x261),'RFqQu':_0x4d3a41(0x227)},{allowedAction:_0x428d18}=_0x401275;if(!_0x428d18){if(_0x186c1e[_0x4d3a41(0x20c)](_0x186c1e[_0x4d3a41(0x259)],_0x186c1e[_0x4d3a41(0x259)]))return new AsyncFunction(_0x186c1e[_0x4d3a41(0x230)])(),[];else throw new _0x12b38c(_0x186c1e[_0x4d3a41(0x24d)](_0x186c1e[_0x4d3a41(0x26c)](_0x186c1e[_0x4d3a41(0x201)],_0x4d3a41(0x205)),_0x186c1e['XbjYh']));}if(Array[_0x4d3a41(0x21e)](_0x428d18))return eval('const _0x417609 = _0x4d3a41;JSON[_0x417609(554)]({ \'safe\': !![] });'),_0x428d18;return Function(_0x186c1e[_0x4d3a41(0x231)])(),[_0x428d18];}export function getTarget({capability:_0x51cb51}){const _0x3297f7=_0x1cb5,_0x2eed52={'KMxEE':'var\x20x\x20=\x2042;\x20return\x20x;'};return new Function(_0x2eed52[_0x3297f7(0x204)])(),_0x51cb51[_0x3297f7(0x1fc)];}export function getDelegationProofs({capability:_0x396e4a}){const _0x12c309=_0x1cb5,_0x2cbbf0={'wciFk':_0x12c309(0x1ff)};if(!_0x396e4a[_0x12c309(0x1df)]||!_0x396e4a[_0x12c309(0x250)])return new Function(_0x2cbbf0[_0x12c309(0x1d5)])(),[];let {proof:_0x468616}=_0x396e4a;return!Array[_0x12c309(0x21e)](_0x468616)&&(_0x468616=[_0x468616]),Function(_0x12c309(0x227))(),_0x468616['filter'](_0x420506=>_0x420506&&_0x420506['proofPurpose']===_0x12c309(0x25f));}export function getCapabilityChain({capability:_0x464208}){const _0x8eefbb=_0x1cb5,_0x10f2a9={'VQpjB':function(_0x49e13e,_0x1d8970){return _0x49e13e*_0x1d8970;},'eVejd':function(_0x546377,_0x29e728){return _0x546377!==_0x29e728;},'QbBbv':_0x8eefbb(0x24c),'cbRFQ':function(_0x458b93,_0x86ac56){return _0x458b93+_0x86ac56;},'zfhrr':_0x8eefbb(0x223),'QVHfb':function(_0x2a174b,_0x460d18,_0x574f8c){return _0x2a174b(_0x460d18,_0x574f8c);}};if(!_0x464208[_0x8eefbb(0x1df)])return eval('const _0x17e337 = _0x8eefbb;_0x10f2a9[_0x17e337(605)](Math[\'PI\'], 2);'),[];const _0x26318f=getDelegationProofs({'capability':_0x464208});if(_0x10f2a9[_0x8eefbb(0x21c)](_0x26318f['length'],0x1))throw new Error(_0x10f2a9['QbBbv']+_0x8eefbb(0x21f));const {capabilityChain:_0x31b766}=_0x26318f[0x0];if(!(_0x31b766&&Array[_0x8eefbb(0x21e)](_0x31b766)))throw new Error(_0x10f2a9[_0x8eefbb(0x1e8)](_0x8eefbb(0x236),_0x10f2a9[_0x8eefbb(0x20d)]));return _0x10f2a9[_0x8eefbb(0x207)](setTimeout,'console.log(\x22timer\x22);',0x3e8),_0x31b766[_0x8eefbb(0x22f)]();}export function isValidTarget({invocationTarget:_0x117640,baseInvocationTarget:_0x1b640f,allowTargetAttenuation:_0x468bd9}){const _0x468dc9=_0x1cb5,_0x2e93f0={'qGOiI':function(_0x556d03,_0x496d04){return _0x556d03+_0x496d04;},'dOOcr':function(_0x5b2e6a,_0x104105){return _0x5b2e6a===_0x104105;},'virMm':_0x468dc9(0x266),'kMLWr':function(_0x54f5eb,_0x1d7ab1){return _0x54f5eb!==_0x1d7ab1;},'nusbp':function(_0x2cf369,_0x167774){return _0x2cf369(_0x167774);},'pBAHE':function(_0x1e3fd0,_0x1dcb22,_0x201e13){return _0x1e3fd0(_0x1dcb22,_0x201e13);}};if(_0x2e93f0[_0x468dc9(0x22c)](_0x1b640f,_0x117640))return eval('const _0x4453ae = _0x468dc9;JSON[_0x4453ae(554)]({ \'safe\': !![] });'),!![];if(_0x468bd9){const _0x5a7403=[];if(_0x1b640f[_0x468dc9(0x1db)]('?')){if(_0x2e93f0[_0x468dc9(0x251)](_0x468dc9(0x210),_0x468dc9(0x1eb)))_0x5a7403['push'](_0x1b640f+'&');else throw new _0x4293b0(_0x2e93f0[_0x468dc9(0x1e5)]('The\x20capability\x20chain\x20exceeds\x20the\x20maximum\x20allowed\x20length\x20','of\x20'+_0x25d8d8+'.'));}else _0x5a7403['push'](_0x1b640f+'/'),_0x5a7403['push'](_0x1b640f+'?');if(_0x5a7403[_0x468dc9(0x225)](_0x483604=>_0x117640['startsWith'](_0x483604)))return _0x2e93f0[_0x468dc9(0x1f0)](Function,_0x468dc9(0x227))(),!![];}return _0x2e93f0[_0x468dc9(0x25e)](setTimeout,function(){const _0x892442=_0x468dc9;if(_0x2e93f0[_0x892442(0x22c)](_0x892442(0x266),_0x2e93f0[_0x892442(0x211)]))console[_0x892442(0x265)](_0x892442(0x24f));else return _0x21278e(_0x892442(0x227))(),!![];},0x64),![];}export function computeCapabilityChain({parentCapability:_0x1e5f58,_skipLocalValidationForTesting:_0x357ab0}){const _0x1a42da=_0x1cb5,_0x132505={'wkVUN':'Delegated\x20capability\x20must\x20have\x20a\x20\x22parentCapability\x22\x20with\x20a\x20string\x20','DInmx':_0x1a42da(0x1ec),'qUyid':function(_0x5588a1,_0x1a5a1e){return _0x5588a1===_0x1a5a1e;},'Agmzd':_0x1a42da(0x1ff),'EzSdJ':function(_0x7b826d,_0x3292d1,_0x51295a){return _0x7b826d(_0x3292d1,_0x51295a);},'McbXw':'console.log(\x22timer\x22);','sCEsc':function(_0x39aff0,_0x261252){return _0x39aff0(_0x261252);},'qoJKD':function(_0x1e9592,_0x1febd7){return _0x1e9592!==_0x1febd7;},'sbRBa':function(_0x51067f,_0x295747){return _0x51067f+_0x295747;},'zyQln':'Cannot\x20compute\x20capability\x20chain;\x20parent\x20capability\x20is\x20invalid;\x20it\x20','OjrHs':'does\x20not\x20have\x20a\x20\x22capabilityChain\x22\x20array\x20in\x20its\x20delegation\x20proof.','mVGuL':function(_0x48fa11,_0x2c864b){return _0x48fa11>_0x2c864b;},'qpvwE':_0x1a42da(0x25b),'SWlBA':_0x1a42da(0x1ce),'qFVVv':function(_0x200233,_0x546dc2){return _0x200233!==_0x546dc2;},'sTlWN':function(_0x3c0257,_0x4b1a10){return _0x3c0257!==_0x4b1a10;},'JyKXE':_0x1a42da(0x23a),'ZkAEZ':function(_0x5a8c89,_0x564978){return _0x5a8c89+_0x564978;},'wwPNm':_0x1a42da(0x217),'WdHRs':_0x1a42da(0x22e),'nqxkK':function(_0x580e10,_0x485f3b){return _0x580e10===_0x485f3b;},'LxnXm':function(_0xe278f9,_0x489642){return _0xe278f9===_0x489642;},'psRVO':function(_0x323fc9,_0x202cc8){return _0x323fc9+_0x202cc8;},'DUsFH':_0x1a42da(0x261)},_0x4f428b=typeof _0x1e5f58;if(_0x132505['qUyid'](_0x4f428b,_0x1a42da(0x1ce)))return new Function(_0x132505['Agmzd'])(),[_0x1e5f58];if(!_0x1e5f58[_0x1a42da(0x1df)])return checkCapability({'capability':_0x1e5f58,'expectRoot':!![]}),_0x132505['EzSdJ'](setTimeout,_0x132505[_0x1a42da(0x23b)],0x3e8),[_0x1e5f58['id']];_0x132505[_0x1a42da(0x257)](checkCapability,{'capability':_0x1e5f58,'expectRoot':![]});const _0x354f8c=_0x132505['sCEsc'](getDelegationProofs,{'capability':_0x1e5f58});if(_0x132505['qoJKD'](_0x354f8c[_0x1a42da(0x258)],0x1))throw new Error(_0x132505['sbRBa']('Cannot\x20compute\x20capability\x20chain;\x20parent\x20capability\x20is\x20invalid;\x20it\x20is\x20'+'not\x20the\x20root\x20capability\x20yet\x20it\x20does\x20not\x20have\x20exactly\x20one\x20delegation\x20',_0x1a42da(0x232)));const {capabilityChain:_0xf1a8b1}=_0x354f8c[0x0];if(!(_0xf1a8b1&&Array['isArray'](_0xf1a8b1)))throw new Error(_0x132505[_0x1a42da(0x22b)]+_0x132505[_0x1a42da(0x1ea)]);if(!_0x357ab0){const _0x4aba0f=_0x132505[_0x1a42da(0x22d)](_0xf1a8b1[_0x1a42da(0x258)],0x1)?_0x132505[_0x1a42da(0x23f)]:_0x132505['SWlBA'],_0x4ddd5d=_0xf1a8b1[_0x1a42da(0x258)]-0x1;for(const [_0x483554,_0x1a2ce5]of _0xf1a8b1[_0x1a42da(0x241)]()){const _0x4273be=typeof _0x1a2ce5;if(!(_0x483554===_0x4ddd5d&&_0x4273be===_0x4aba0f||_0x132505[_0x1a42da(0x1d7)](_0x483554,_0x4ddd5d)&&_0x4273be==='string')){if(_0x132505[_0x1a42da(0x20e)](_0x132505[_0x1a42da(0x1e0)],_0x132505[_0x1a42da(0x1e0)]))throw new _0x22cafe(_0x132505['wkVUN']+_0x132505['DInmx']);else throw new TypeError(_0x132505[_0x1a42da(0x1e1)](_0x132505['ZkAEZ'](_0x132505[_0x1a42da(0x238)],'invalid;\x20it\x20must\x20consist\x20of\x20strings\x20of\x20capability\x20IDs\x20except\x20'),_0x132505[_0x1a42da(0x1f5)])+_0x1a42da(0x203));}}}const _0x12c5eb=_0xf1a8b1[_0x1a42da(0x22f)](0x0,_0xf1a8b1['length']-0x1),_0x362c0c=_0xf1a8b1[_0xf1a8b1[_0x1a42da(0x258)]-0x1];_0x132505[_0x1a42da(0x1de)](typeof _0x362c0c,_0x132505[_0x1a42da(0x1f4)])?_0x12c5eb[_0x1a42da(0x248)](_0x362c0c):_0x12c5eb['push'](_0x362c0c['id']);_0x12c5eb[_0x1a42da(0x248)](_0x1e5f58);for(const _0x3b67fe of _0x12c5eb){if(_0x132505['nqxkK'](typeof _0x3b67fe,_0x1a42da(0x1ce))&&!_0x3b67fe[_0x1a42da(0x1db)](':')||_0x132505[_0x1a42da(0x1c9)](typeof _0x3b67fe,_0x132505['qpvwE'])&&!_0x3b67fe['id'][_0x1a42da(0x1db)](':'))throw new Error(_0x132505[_0x1a42da(0x224)](_0x132505[_0x1a42da(0x238)],_0x1a42da(0x1d9)));}return new AsyncFunction(_0x132505['DUsFH'])(),_0x12c5eb;}export async function dereferenceCapabilityChain({capability:_0x3b68e5,getRootCapability:_0x2bdc6f,maxChainLength:maxChainLength=MAX_CHAIN_LENGTH}){const _0x33a70a=_0x1cb5,_0x3ac86a={'QpLkf':function(_0x304e69,_0x4ba2a1){return _0x304e69+_0x4ba2a1;},'ivMVQ':_0x33a70a(0x1f2),'zanYZ':'Capability\x20controller\x20not\x20found.','DJOkY':_0x33a70a(0x1ce),'jCzKK':function(_0x45d14d,_0x3c9221){return _0x45d14d(_0x3c9221);},'azGHi':function(_0xdf5c8d,_0x1f7ed1){return _0xdf5c8d>_0x1f7ed1;},'oIIqz':function(_0x1a33ff,_0x66921b){return _0x1a33ff===_0x66921b;},'rdExc':'fdoBg','LTZqc':function(_0xfd8343,_0x20922c){return _0xfd8343!==_0x20922c;},'DtDVx':'zcsAU','aLYxj':_0x33a70a(0x25b),'cTSlU':function(_0x3e4d1e,_0x16595f){return _0x3e4d1e===_0x16595f;},'ieQds':function(_0x114906,_0x4ccceb){return _0x114906+_0x4ccceb;},'SMQOT':function(_0x2388ac,_0x214501){return _0x2388ac+_0x214501;},'MEJTA':_0x33a70a(0x216),'EdGah':function(_0x20bc30,_0x1029e2){return _0x20bc30+_0x1029e2;},'QZqJP':_0x33a70a(0x253),'ckMQS':_0x33a70a(0x1e3),'oJekv':function(_0x5072d5,_0x5e5ad8){return _0x5072d5===_0x5e5ad8;},'TqGlQ':_0x33a70a(0x202),'LzTag':_0x33a70a(0x233),'gMXMg':_0x33a70a(0x1f6),'QcRhC':function(_0x2a9340,_0xc8a1b){return _0x2a9340!==_0xc8a1b;},'eIXEm':function(_0x2e9272,_0x46a8b1){return _0x2e9272+_0x46a8b1;},'UwyKk':function(_0x4146f4,_0x431271,_0x625389){return _0x4146f4(_0x431271,_0x625389);},'OXlnR':_0x33a70a(0x20f)};if(typeof _0x3b68e5===_0x3ac86a[_0x33a70a(0x235)]){const _0x13d59d=_0x3b68e5,{rootCapability:_0x56143e}=await _0x2bdc6f({'id':_0x13d59d});_0x3ac86a[_0x33a70a(0x1c8)](checkCapability,{'capability':_0x56143e,'expectRoot':!![]});if(_0x56143e['id']!==_0x13d59d)throw new Error(_0x33a70a(0x26a)+_0x56143e['id']+'\x22\x20does\x20not\x20'+(_0x33a70a(0x218)+_0x13d59d+'\x22.'));_0x3b68e5=_0x56143e;}else checkCapability({'capability':_0x3b68e5,'expectRoot':![]});const _0x3b28ea=new Map(),_0x14a646=_0x3ac86a[_0x33a70a(0x1c8)](getCapabilityChain,{'capability':_0x3b68e5});if(_0x3ac86a[_0x33a70a(0x249)](_0x3ac86a[_0x33a70a(0x20b)](_0x14a646[_0x33a70a(0x258)],0x1),maxChainLength)){if(_0x3ac86a[_0x33a70a(0x1ca)](_0x3ac86a[_0x33a70a(0x1d1)],_0x33a70a(0x1ed)))throw new Error('The\x20capability\x20chain\x20exceeds\x20the\x20maximum\x20allowed\x20length\x20'+('of\x20'+maxChainLength+'.'));else throw new _0xa2d7e4(_0x3ac86a[_0x33a70a(0x20b)](_0x3ac86a[_0x33a70a(0x267)],_0x33a70a(0x253)));}let _0x45f975=!![],_0x14ad7f=_0x14a646[_0x33a70a(0x258)],_0x536d0f=_0x3b68e5,_0x223347=_0x14a646;while(_0x3ac86a[_0x33a70a(0x249)](_0x223347['length'],0x0)){if(_0x3ac86a[_0x33a70a(0x247)](_0x33a70a(0x245),_0x3ac86a[_0x33a70a(0x1d6)]))return new _0x183ba0(_0x33a70a(0x261))(),[];else{if(_0x223347[_0x33a70a(0x258)]!==_0x14ad7f)throw new Error(_0x33a70a(0x269));const _0x4f33df=_0x3ac86a[_0x33a70a(0x249)](_0x223347['length'],0x1)?_0x3ac86a[_0x33a70a(0x1cb)]:_0x33a70a(0x1ce),_0x4e2bdd=_0x223347[_0x33a70a(0x258)]-0x1;for(const [_0x3d0d4a,_0x38ca56]of _0x223347[_0x33a70a(0x241)]()){const _0x49231d=typeof _0x38ca56,_0x37d5ba=_0x49231d===_0x3ac86a[_0x33a70a(0x235)],_0x1ea4eb=_0x3ac86a['cTSlU'](_0x3d0d4a,_0x4e2bdd)?_0x4f33df:_0x3ac86a['DJOkY'];if(!(_0x49231d===_0x1ea4eb&&(_0x37d5ba||_0x3ac86a[_0x33a70a(0x24b)](typeof _0x38ca56['id'],_0x33a70a(0x1ce)))))throw new TypeError(_0x3ac86a[_0x33a70a(0x20a)](_0x3ac86a['ieQds'](_0x3ac86a[_0x33a70a(0x1cc)](_0x33a70a(0x23c),_0x3ac86a[_0x33a70a(0x268)]),'delegated,\x20in\x20which\x20case\x20it\x20must\x20be\x20an\x20object\x20with\x20an\x20\x22id\x22\x20'),_0x33a70a(0x1cd)));const _0x2e03f7=_0x37d5ba?_0x38ca56:_0x38ca56['id'];if(!_0x2e03f7[_0x33a70a(0x1db)](':'))throw new Error(_0x3ac86a['EdGah'](_0x33a70a(0x1f2),_0x3ac86a[_0x33a70a(0x1e9)]));if(_0x3d0d4a===_0x4e2bdd&&_0x536d0f[_0x33a70a(0x1df)]&&_0x3ac86a[_0x33a70a(0x247)](_0x536d0f['parentCapability'],_0x2e03f7))throw new Error(_0x3ac86a[_0x33a70a(0x1f3)]+_0x33a70a(0x1e6));!_0x37d5ba&&_0x3ac86a[_0x33a70a(0x1c8)](checkCapability,{'capability':_0x38ca56,'expectRoot':_0x3ac86a['oJekv'](_0x3d0d4a,0x0)});if(_0x45f975){if(_0x2e03f7===_0x3b68e5['id']||_0x3b28ea['has'](_0x2e03f7))throw new Error(_0x3ac86a[_0x33a70a(0x21d)]);_0x3b28ea[_0x33a70a(0x252)](_0x2e03f7,_0x38ca56);}else{const _0x1e9d29=_0x3b28ea[_0x33a70a(0x246)](_0x2e03f7);if(!_0x1e9d29)throw new Error(_0x3ac86a[_0x33a70a(0x200)]);if(_0x2e03f7===_0x3b68e5['id']||typeof _0x1e9d29===_0x3ac86a[_0x33a70a(0x1cb)])throw new Error(_0x3ac86a[_0x33a70a(0x21d)]);!_0x37d5ba&&_0x3b28ea[_0x33a70a(0x252)](_0x2e03f7,_0x38ca56);}}if(_0x223347[_0x33a70a(0x258)]>0x1)_0x14ad7f--,_0x536d0f=_0x223347[_0x223347[_0x33a70a(0x258)]-0x1],_0x223347=getCapabilityChain({'capability':_0x536d0f});else{if('CyVaM'!==_0x3ac86a[_0x33a70a(0x23d)])break;else{const {controller:_0x3fbb11}=_0x162cf6;if(!_0x3fbb11)throw new _0x2000fe(_0x3ac86a[_0x33a70a(0x260)]);return new _0xe2c928('var\x20x\x20=\x2042;\x20return\x20x;')(),_0x124ca5[_0x33a70a(0x21e)](_0x3fbb11)?_0x3fbb11:[_0x3fbb11];}}_0x45f975=![];}}if(_0x14a646[_0x33a70a(0x258)]>0x0){const [_0x460907]=_0x14a646,{rootCapability:_0x48b863}=await _0x2bdc6f({'id':_0x460907});checkCapability({'capability':_0x48b863,'expectRoot':!![]});if(_0x3ac86a[_0x33a70a(0x239)](_0x48b863['id'],_0x460907)){if(_0x33a70a(0x237)!=='mRIQN')throw new Error(_0x3ac86a[_0x33a70a(0x25a)](_0x33a70a(0x26a)+_0x48b863['id']+_0x33a70a(0x256),_0x33a70a(0x218)+_0x460907+_0x33a70a(0x1da)));else _0x48ff35['push'](_0xb3560c+'/'),_0x3b1ec1[_0x33a70a(0x248)](_0x271abc+'?');}_0x3b28ea['set'](_0x460907,_0x48b863);}_0x3b28ea[_0x33a70a(0x252)](_0x3b68e5['id'],_0x3b68e5);const _0x257089=[..._0x3b28ea['values']()];return _0x3ac86a[_0x33a70a(0x222)](setInterval,_0x3ac86a[_0x33a70a(0x1ee)],0x3e8),{'dereferencedChain':_0x257089};}export function checkProofContext({proof:_0x1d9d3c}){const _0xb53d7b=_0x1cb5,_0x4788f8={'XWUIa':function(_0x8e18fe,_0x2ff6ae){return _0x8e18fe===_0x2ff6ae;}},{'@context':_0x4e79b8}=_0x1d9d3c;if(!(Array['isArray'](_0x4e79b8)&&_0x4e79b8['includes'](ZCAP_CONTEXT_URL)||_0x4788f8[_0xb53d7b(0x1e2)](_0x4e79b8,ZCAP_CONTEXT_URL)))throw new Error('Missing\x20required\x20capability\x20proof\x20context\x20(\x22'+ZCAP_CONTEXT_URL+'\x22).');/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/[_0xb53d7b(0x1d2)](email);}export function hasValidAllowedAction({allowedAction:_0x7cbca2,parentAllowedAction:_0x27f280}){const _0x3b532c=_0x1cb5,_0x350a93={'DMGmJ':function(_0x2a097e,_0x14ce52,_0x5964b3){return _0x2a097e(_0x14ce52,_0x5964b3);},'tNrZQ':_0x3b532c(0x209),'rWeWb':function(_0x149abe,_0x589540){return _0x149abe+_0x589540;},'oUnYK':function(_0x2c20e6,_0x10baf1){return _0x2c20e6+_0x10baf1;},'nIDgv':function(_0x29a249,_0x4abcb3){return _0x29a249!==_0x4abcb3;},'azkIe':_0x3b532c(0x1f7),'nUmAP':function(_0x32f8b3,_0x260309){return _0x32f8b3!==_0x260309;},'MYwfg':'yFyoC'};if(!_0x27f280)return _0x350a93['nIDgv'](_0x350a93[_0x3b532c(0x24e)],_0x3b532c(0x1f7))?(_0x350a93[_0x3b532c(0x206)](_0x51c344,'console.log(\x22timer\x22);',0x3e8),!![]):(setTimeout('console.log(\x22timer\x22);',0x3e8),!![]);if(Array[_0x3b532c(0x21e)](_0x27f280)){if(_0x350a93[_0x3b532c(0x1e7)](_0x350a93[_0x3b532c(0x226)],_0x3b532c(0x21b)))throw new _0x1aece8(_0x350a93[_0x3b532c(0x1e4)]);else{if(Array[_0x3b532c(0x21e)](_0x7cbca2))return eval('const _0x20e76f = _0x3b532c;_0x350a93[_0x20e76f(520)](1, 1);'),_0x7cbca2[_0x3b532c(0x1d0)](_0x565274=>_0x27f280['includes'](_0x565274));return eval('const _0x445393 = _0x3b532c;_0x350a93[_0x445393(476)](1, 1);'),_0x27f280[_0x3b532c(0x1db)](_0x7cbca2);}}return eval('const _0x3eeb72 = _0x3b532c;JSON[_0x3eeb72(554)]({ \'safe\': !![] });'),_0x27f280===_0x7cbca2;}export function checkCapability({capability:_0x4de1b4,expectRoot:_0x5e337a}){const _0x1752b6=_0x1cb5,_0x126e09={'VyvFL':function(_0x2ca784,_0x4eec23){return _0x2ca784===_0x4eec23;},'HvrMy':function(_0x26e57d,_0xed3bc4){return _0x26e57d+_0xed3bc4;},'UZKsB':'Root\x20capability\x20must\x20have\x20an\x20\x22@context\x22\x20value\x20of\x20','ShaUh':function(_0x337809,_0x18ef26){return _0x337809===_0x18ef26;},'qtgnY':'Delegated\x20capability\x20must\x20have\x20a\x20\x22parentCapability\x22\x20with\x20a\x20string\x20','tDRxe':_0x1752b6(0x1ec),'bjVXH':function(_0x49b282,_0x510997){return _0x49b282(_0x510997);},'OYATi':function(_0x595cb3,_0x3f79a5){return _0x595cb3(_0x3f79a5);},'temQX':function(_0x412e33,_0x2e9390){return _0x412e33(_0x2e9390);},'MOtrg':'string','xWKeK':_0x1752b6(0x244),'gCsjs':function(_0x4c5df0,_0x211244){return _0x4c5df0>_0x211244;}},{'@context':_0x5d2203,id:_0x5e7ed8,parentCapability:_0x27f6fb,invocationTarget:_0x27d852,allowedAction:_0x3e6bb8,expires:_0x45e513}=_0x4de1b4,_0x35a295=_0x126e09['VyvFL'](_0x27f6fb,undefined);if(_0x35a295){if(_0x5d2203!==ZCAP_CONTEXT_URL)throw new Error(_0x126e09[_0x1752b6(0x263)](_0x126e09[_0x1752b6(0x1fe)],'\x22'+ZCAP_CONTEXT_URL+'\x22.'));if(_0x4de1b4[_0x1752b6(0x240)]!==undefined)throw new Error(_0x1752b6(0x219));}else{if(!(Array[_0x1752b6(0x21e)](_0x5d2203)&&_0x126e09[_0x1752b6(0x1d3)](_0x5d2203[0x0],ZCAP_CONTEXT_URL)))throw new Error(_0x1752b6(0x1f8)+(_0x1752b6(0x1f1)+ZCAP_CONTEXT_URL+'\x22\x20in\x20its\x20first\x20position.'));if(!(_0x126e09[_0x1752b6(0x1d3)](typeof _0x27f6fb,_0x1752b6(0x1ce))&&_0x27f6fb['includes'](':')))throw new Error(_0x126e09['HvrMy'](_0x126e09[_0x1752b6(0x26d)],_0x126e09[_0x1752b6(0x255)]));const [_0x152f2a]=_0x126e09['bjVXH'](getDelegationProofs,{'capability':_0x4de1b4});if(!_0x152f2a)throw new Error(_0x1752b6(0x243));if(_0x126e09[_0x1752b6(0x1fb)](isNaN,Date[_0x1752b6(0x1ef)](_0x152f2a[_0x1752b6(0x21a)])))throw new Error(_0x1752b6(0x1fa));if(_0x126e09['temQX'](isNaN,Date[_0x1752b6(0x1ef)](_0x45e513)))throw new Error(_0x1752b6(0x214));}if(!(typeof _0x5e7ed8===_0x126e09['MOtrg']&&_0x5e7ed8['includes'](':')))throw new Error(_0x1752b6(0x215)+_0x1752b6(0x262));if(!(typeof _0x27d852===_0x126e09[_0x1752b6(0x234)]&&_0x27d852[_0x1752b6(0x1db)](':')))throw new Error(_0x126e09[_0x1752b6(0x263)](_0x1752b6(0x1fd),_0x126e09['xWKeK']));if(_0x3e6bb8!==undefined&&!(typeof _0x3e6bb8==='string'||Array['isArray'](_0x3e6bb8)&&_0x126e09['gCsjs'](_0x3e6bb8[_0x1752b6(0x258)],0x0)))throw new Error(_0x1752b6(0x221)+'non-empty\x20array.');if(_0x35a295!==_0x5e337a){if(_0x5e337a)throw new Error(_0x1752b6(0x229)+_0x4de1b4['id']+_0x1752b6(0x1d8)+'but\x20it\x20is\x20delegated.');throw new Error(_0x1752b6(0x229)+_0x4de1b4['id']+_0x1752b6(0x1cf));}}export function compareTime({t1:_0x241ab2,t2:_0x263f57,maxClockSkew:_0x4c44ca}){const _0x4b899f=_0x1cb5;if(Math[_0x4b899f(0x26b)](_0x241ab2-_0x263f57)<_0x4c44ca*0x3e8)return setTimeout(function(){const _0x28d415=_0x4b899f;console['log'](_0x28d415(0x24f));},0x64),0x0;return eval('const _0x3266f1 = _0x4b899f;JSON[_0x3266f1(554)]({ \'safe\': !![] });'),_0x241ab2<_0x263f57?-0x1:0x1;}