function _0x1d21(){const _0x27fcea=['endsWith','supportedMimeTypes','3QyjqBg','623790EzezOM','paths','locals','randomUUID','.json','checkType','4507910uhmJQL','NdTOm','229356LcQZEM','DiUle','extname','rpTMt','uploads','endpoint','~/server/services/Config','gWxhe','iRjBy','25habRpX','toLowerCase','OAqUK','tqcNT','app','multer','~/server/utils/handleText','path','daXov','originalname','existsSync','Unsupported\x20file\x20type:\x20','qiSyU','diskStorage','/speech/stt','user','serverFileSizeLimit','1325734eyZPFi','join','12510nYlPyY','mimetype','audio/','temp','ZeYgU','tDVPI','UvCUP','librechat-data-provider','mkdirSync','fileConfig','LrXCl','ApsEt','56OzAlDO','OhvdI','file_id','nFLAP','application/json','1704tdDBSd','crypto','WKjaZ','No\x20file\x20provided','startsWith','CvuXn','11176924huSYgp','puXiy','HsfIy','QpnFT','149676RWQugL','SwBRr'];_0x1d21=function(){return _0x27fcea;};return _0x1d21();}const _0x15f013=_0x234c;(function(_0x1ddda2,_0x28d064){const _0x20e811=_0x234c,_0x499e0f=_0x1ddda2();while(!![]){try{const _0x30a905=parseInt(_0x20e811(0x163))/0x1+parseInt(_0x20e811(0x185))/0x2*(parseInt(_0x20e811(0x162))/0x3)+-parseInt(_0x20e811(0x16b))/0x4*(parseInt(_0x20e811(0x174))/0x5)+parseInt(_0x20e811(0x15e))/0x6*(parseInt(_0x20e811(0x14f))/0x7)+-parseInt(_0x20e811(0x154))/0x8*(parseInt(_0x20e811(0x187))/0x9)+parseInt(_0x20e811(0x169))/0xa+-parseInt(_0x20e811(0x15a))/0xb;if(_0x30a905===_0x28d064)break;else _0x499e0f['push'](_0x499e0f['shift']());}catch(_0x531023){_0x499e0f['push'](_0x499e0f['shift']());}}}(_0x1d21,0x528f7));function _0x234c(_0x888002,_0x4e2e2d){const _0x1d2190=_0x1d21();return _0x234c=function(_0x234c0e,_0x3c469f){_0x234c0e=_0x234c0e-0x148;let _0x289309=_0x1d2190[_0x234c0e];return _0x289309;},_0x234c(_0x888002,_0x4e2e2d);}const fs=require('fs'),path=require(_0x15f013(0x17b)),crypto=require(_0x15f013(0x155)),multer=require(_0x15f013(0x179)),{fileConfig:defaultFileConfig,mergeFileConfig}=require(_0x15f013(0x14a)),{sanitizeFilename}=require(_0x15f013(0x17a)),{getCustomConfig}=require(_0x15f013(0x171)),storage=multer[_0x15f013(0x181)]({'destination':function(_0x1081f8,_0x6d3b4e,_0x3faa97){const _0x3406f8=_0x15f013,_0x439025={'LjGul':_0x3406f8(0x18a),'CvuXn':function(_0x277f25,_0x294e65,_0x54ff69){return _0x277f25(_0x294e65,_0x54ff69);}},_0xc3fd38=path[_0x3406f8(0x186)](_0x1081f8[_0x3406f8(0x178)]['locals']['paths'][_0x3406f8(0x16f)],_0x439025['LjGul'],_0x1081f8[_0x3406f8(0x183)]['id']);!fs[_0x3406f8(0x17e)](_0xc3fd38)&&fs[_0x3406f8(0x14b)](_0xc3fd38,{'recursive':!![]}),_0x439025[_0x3406f8(0x159)](_0x3faa97,null,_0xc3fd38);},'filename':function(_0x46b74b,_0x23430f,_0x406113){const _0x4b901e=_0x15f013,_0x296c9d={'HsfIy':function(_0x5278f5,_0x382a89){return _0x5278f5(_0x382a89);},'tqcNT':function(_0x31cd8c,_0x4d1c82,_0x333cb7){return _0x31cd8c(_0x4d1c82,_0x333cb7);}};_0x46b74b[_0x4b901e(0x151)]=crypto[_0x4b901e(0x166)](),_0x23430f[_0x4b901e(0x17d)]=_0x296c9d[_0x4b901e(0x15c)](decodeURIComponent,_0x23430f[_0x4b901e(0x17d)]);const _0x1a8f23=sanitizeFilename(_0x23430f[_0x4b901e(0x17d)]);_0x296c9d[_0x4b901e(0x177)](_0x406113,null,_0x1a8f23);}}),importFileFilter=(_0x3abbcc,_0x3a2dc0,_0x30556a)=>{const _0x56185b=_0x15f013,_0x4b65e8={'rpTMt':function(_0x13b558,_0x3b0c01){return _0x13b558===_0x3b0c01;},'ddDGd':function(_0x1ef2ae,_0xdacd75,_0x1551be){return _0x1ef2ae(_0xdacd75,_0x1551be);},'QpnFT':'Only\x20JSON\x20files\x20are\x20allowed','ZeYgU':function(_0x1c0c46,_0x1567c3){return _0x1c0c46===_0x1567c3;},'DiUle':_0x56185b(0x167)};if(_0x4b65e8[_0x56185b(0x16e)](_0x3a2dc0[_0x56185b(0x188)],'application/json')){if(_0x56185b(0x14e)===_0x56185b(0x17c)){if(_0x5c8115['mimetype']===_0x56185b(0x153))_0x58d434(null,!![]);else _0x4b65e8[_0x56185b(0x16e)](_0x1da2d7[_0x56185b(0x16d)](_0x580ba1[_0x56185b(0x17d)])[_0x56185b(0x175)](),_0x56185b(0x167))?_0x4b65e8['ddDGd'](_0x7251ec,null,!![]):_0x521e4f(new _0x2f140c(_0x4b65e8[_0x56185b(0x15d)]),![]);}else _0x30556a(null,!![]);}else _0x4b65e8[_0x56185b(0x18b)](path[_0x56185b(0x16d)](_0x3a2dc0[_0x56185b(0x17d)])[_0x56185b(0x175)](),_0x4b65e8[_0x56185b(0x16c)])?_0x4b65e8['ddDGd'](_0x30556a,null,!![]):_0x30556a(new Error(_0x4b65e8['QpnFT']),![]);},createFileFilter=_0x108342=>{const _0x12c28f=_0x15f013,_0x7fef28={'gWxhe':function(_0x2cc021,_0x1e0d77,_0x47b94e){return _0x2cc021(_0x1e0d77,_0x47b94e);},'iRjBy':function(_0x52c738,_0x455abd,_0x2b0a9a){return _0x52c738(_0x455abd,_0x2b0a9a);},'UvCUP':_0x12c28f(0x182),'SwBRr':_0x12c28f(0x15b),'nFLAP':function(_0x1ef13c,_0x28288e,_0x1b72fe){return _0x1ef13c(_0x28288e,_0x1b72fe);},'tDVPI':function(_0x59ac9a,_0x336182){return _0x59ac9a!==_0x336182;},'NdTOm':_0x12c28f(0x180),'gUySI':function(_0x5bb988,_0x6894f4){return _0x5bb988+_0x6894f4;},'OhvdI':_0x12c28f(0x17f)},_0x6318ba=(_0x55b28c,_0x5c12a6,_0x274972)=>{const _0x3959e4=_0x12c28f;if(!_0x5c12a6){if('LrXCl'!==_0x3959e4(0x14d))_0x5ebe03(null,!![]);else return _0x7fef28[_0x3959e4(0x173)](_0x274972,new Error(_0x3959e4(0x157)),![]);}if(_0x55b28c['originalUrl'][_0x3959e4(0x160)](_0x7fef28[_0x3959e4(0x149)])&&_0x5c12a6[_0x3959e4(0x188)][_0x3959e4(0x158)](_0x3959e4(0x189))){if(_0x3959e4(0x176)===_0x7fef28[_0x3959e4(0x15f)])_0x7fef28['gWxhe'](_0x224011,null,!![]);else return _0x7fef28['nFLAP'](_0x274972,null,!![]);}const _0x58799e=_0x55b28c['body'][_0x3959e4(0x170)],_0x14d8ba=_0x108342?.['endpoints']?.[_0x58799e]?.['supportedMimeTypes']??_0x108342?.['endpoints']?.['default'][_0x3959e4(0x161)]??defaultFileConfig?.['endpoints']?.[_0x58799e]?.['supportedMimeTypes'];if(!defaultFileConfig[_0x3959e4(0x168)](_0x5c12a6['mimetype'],_0x14d8ba)){if(_0x7fef28[_0x3959e4(0x148)](_0x7fef28[_0x3959e4(0x16a)],_0x3959e4(0x156)))return _0x274972(new Error(_0x7fef28['gUySI'](_0x7fef28[_0x3959e4(0x150)],_0x5c12a6[_0x3959e4(0x188)])),![]);else{const _0x24161f=_0x57b2cd[_0x3959e4(0x186)](_0x30322b[_0x3959e4(0x178)][_0x3959e4(0x165)][_0x3959e4(0x164)][_0x3959e4(0x16f)],'temp',_0x3dc0db['user']['id']);!_0xd1e4c9[_0x3959e4(0x17e)](_0x24161f)&&_0x17f8b7[_0x3959e4(0x14b)](_0x24161f,{'recursive':!![]}),_0x7fef28[_0x3959e4(0x172)](_0x49089a,null,_0x24161f);}}_0x7fef28[_0x3959e4(0x152)](_0x274972,null,!![]);};return _0x6318ba;},createMulterInstance=async()=>{const _0x3905d9=_0x15f013,_0x24c098=await getCustomConfig(),_0x39e01c=mergeFileConfig(_0x24c098?.[_0x3905d9(0x14c)]),_0x56f185=createFileFilter(_0x39e01c);return multer({'storage':storage,'fileFilter':_0x56f185,'limits':{'fileSize':_0x39e01c[_0x3905d9(0x184)]}});};module['exports']={'createMulterInstance':createMulterInstance,'storage':storage,'importFileFilter':importFileFilter};