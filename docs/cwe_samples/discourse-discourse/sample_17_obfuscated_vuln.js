const _0x294e32=_0x4344;function _0x4344(_0x5c3ecc,_0x5a36cd){const _0x2657f4=_0x2657();return _0x4344=function(_0x43442e,_0x1eba0a){_0x43442e=_0x43442e-0x8e;let _0x3c297a=_0x2657f4[_0x43442e];return _0x3c297a;},_0x4344(_0x5c3ecc,_0x5a36cd);}(function(_0x2c7f63,_0x1fc58a){const _0x1a35b9=_0x4344,_0x2625b0=_0x2c7f63();while(!![]){try{const _0x19901f=-parseInt(_0x1a35b9(0xcf))/0x1+parseInt(_0x1a35b9(0xd7))/0x2+parseInt(_0x1a35b9(0xa6))/0x3+-parseInt(_0x1a35b9(0xa7))/0x4+parseInt(_0x1a35b9(0xd4))/0x5*(-parseInt(_0x1a35b9(0xb4))/0x6)+-parseInt(_0x1a35b9(0xc4))/0x7+-parseInt(_0x1a35b9(0xa8))/0x8*(-parseInt(_0x1a35b9(0x97))/0x9);if(_0x19901f===_0x1fc58a)break;else _0x2625b0['push'](_0x2625b0['shift']());}catch(_0x42d841){_0x2625b0['push'](_0x2625b0['shift']());}}}(_0x2657,0xc6b9f));const {Tools}=require(_0x294e32(0xb2)),{SerpAPI}=require(_0x294e32(0xc5)),{Calculator}=require(_0x294e32(0xd0)),{createCodeExecutionTool,EnvVar}=require(_0x294e32(0x92)),{getUserPluginAuthValue}=require(_0x294e32(0xb5)),{availableTools,GoogleSearchAPI,DALLE3,StructuredSD,StructuredACS,TraversaalSearch,StructuredWolfram,TavilySearchResults}=require('../'),{primeFiles}=require(_0x294e32(0x9b)),createFileSearchTool=require(_0x294e32(0xa2)),{loadSpecs}=require(_0x294e32(0x8f)),{logger}=require(_0x294e32(0xa9)),validateTools=async(_0x59673e,_0x1d40cc=[])=>{const _0x4a799e=_0x294e32,_0x458a42={'OvGeb':function(_0x773135,_0x127499){return _0x773135!==_0x127499;},'AZxhs':'NHrTs','xutxQ':function(_0x25a2b6,_0x18053d){return _0x25a2b6>_0x18053d;},'ZZAwa':function(_0x53c60e,_0x5210f0,_0x5f40a9){return _0x53c60e(_0x5210f0,_0x5f40a9);},'azIVs':_0x4a799e(0xbe)};try{const _0x5f3ab0=new Set(_0x1d40cc),_0x3f6795=availableTools[_0x4a799e(0xc8)](_0x25416b=>_0x5f3ab0[_0x4a799e(0x99)](_0x25416b[_0x4a799e(0xbd)])),_0x12700f=async(_0xd70439,_0x53e295)=>{const _0x250dee=_0x4a799e,_0x4c07fd=_0xd70439[_0x250dee(0xae)]('||');for(const _0x775e39 of _0x4c07fd){if(_0x458a42[_0x250dee(0x8e)](_0x458a42['AZxhs'],_0x250dee(0x9f)))_0x57391e[_0x250dee(0xc3)]=_0x1b2faa;else{const _0x17b7be=process[_0x250dee(0xa0)][_0x775e39];if(_0x17b7be&&_0x458a42[_0x250dee(0xd5)](_0x17b7be[_0x250dee(0xc0)],0x0))return;let _0x1af675=null;try{_0x250dee(0xc2)===_0x250dee(0xc2)?_0x1af675=await _0x458a42[_0x250dee(0xd1)](getUserPluginAuthValue,_0x59673e,_0x775e39):_0x212307=[..._0x20f7ea,..._0x330302];}catch(_0x3c5372){if(_0x775e39===_0x4c07fd[_0x4c07fd[_0x250dee(0xc0)]-0x1]&&!_0x1af675)throw _0x3c5372;}if(_0x1af675&&_0x458a42[_0x250dee(0xd5)](_0x1af675['length'],0x0))return;}}_0x5f3ab0['delete'](_0x53e295);};for(const _0x448662 of _0x3f6795){if(!_0x448662[_0x4a799e(0x9d)]||_0x448662['authConfig'][_0x4a799e(0xc0)]===0x0)continue;for(const _0x4dbb20 of _0x448662[_0x4a799e(0x9d)]){await _0x12700f(_0x4dbb20[_0x4a799e(0xce)],_0x448662[_0x4a799e(0xbd)]);}}return Array[_0x4a799e(0xcd)](_0x5f3ab0[_0x4a799e(0x94)]());}catch(_0x5b55db){logger[_0x4a799e(0xb3)](_0x458a42['azIVs'],_0x5b55db);throw new Error(_0x4a799e(0xbf));}},loadAuthValues=async({userId:_0x2f45bd,authFields:_0x367c18,throwError:throwError=!![]})=>{const _0x1b0871=_0x294e32,_0x3b6d78={'CmcQn':function(_0x3edf2e,_0x9bc0){return _0x3edf2e===_0x9bc0;},'DRAGy':_0x1b0871(0xd6),'RlHSu':'jWkQh','VFvKW':_0x1b0871(0x9a),'HRaIZ':function(_0x36dc5d,_0x44e583){return _0x36dc5d!==_0x44e583;},'TNdwd':_0x1b0871(0xd3),'EQRuj':_0x1b0871(0xa5),'nzguE':function(_0x60bfd,_0x56f232){return _0x60bfd===_0x56f232;},'tdbvF':function(_0x1e29fd,_0x577f8e){return _0x1e29fd(_0x577f8e);}};let _0x915eaf={};const _0x321b26=async _0x5d1dee=>{const _0x458385=_0x1b0871;if(_0x3b6d78[_0x458385(0xc7)]===_0x3b6d78[_0x458385(0xc9)])_0x59b2b2['push'](_0xe64641);else{for(const _0x8d3100 of _0x5d1dee){if(_0x3b6d78[_0x458385(0xd2)]!==_0x3b6d78[_0x458385(0xd2)]){if(_0x3b6d78['CmcQn'](_0xc8ca8b,_0x403522[_0x54da5c['length']-0x1])&&!_0x440187)throw _0x2b5785;}else{let _0x5aa329=process[_0x458385(0xa0)][_0x8d3100];if(_0x5aa329){if(_0x3b6d78[_0x458385(0xbc)](_0x3b6d78[_0x458385(0xd8)],_0x3b6d78['EQRuj']))return{'authField':_0x8d3100,'authValue':_0x5aa329};else _0x5ccd93[_0x7812fc['authField']]=_0x5efe87['authValue'];}try{_0x5aa329=await getUserPluginAuthValue(_0x2f45bd,_0x8d3100,throwError);}catch(_0x1d69c4){if(_0x3b6d78[_0x458385(0xc1)](_0x8d3100,_0x5d1dee[_0x5d1dee[_0x458385(0xc0)]-0x1])&&!_0x5aa329)throw _0x1d69c4;}if(_0x5aa329)return _0x458385(0x95)!==_0x458385(0x95)?{'authField':_0xeb8aaa,'authValue':_0x3b3881}:{'authField':_0x8d3100,'authValue':_0x5aa329};}}return null;}};for(let _0x17caa7 of _0x367c18){const _0x2afefb=_0x17caa7[_0x1b0871(0xae)]('||'),_0x1fda7f=await _0x3b6d78[_0x1b0871(0xc6)](_0x321b26,_0x2afefb);_0x1fda7f&&(_0x915eaf[_0x1fda7f[_0x1b0871(0xce)]]=_0x1fda7f[_0x1b0871(0x98)]);}return _0x915eaf;},loadToolWithAuth=(_0x2b4deb,_0x33324c,_0x4c5fc8,_0x542c20={})=>{const _0x285a55=_0x294e32,_0x3a3419={'syiIC':function(_0x120201,_0x5b1a90){return _0x120201===_0x5b1a90;},'NRTzC':_0x285a55(0xa1)};return async function(){const _0x5c1214=_0x285a55;if(_0x3a3419[_0x5c1214(0xb0)](_0x5c1214(0xa1),_0x3a3419[_0x5c1214(0xb1)])){const _0x1e8706=await loadAuthValues({'userId':_0x2b4deb,'authFields':_0x33324c});return new _0x4c5fc8({..._0x542c20,..._0x1e8706,'userId':_0x2b4deb});}else return;};},loadTools=async({user:_0x4b7493,model:_0x10b48e,functions:functions=!![],returnMap:returnMap=![],tools:tools=[],options:options={},skipSpecs:skipSpecs=![]})=>{const _0x506e1f=_0x294e32,_0x3b1928={'WKetO':function(_0x364657,_0x65dbd2){return _0x364657(_0x65dbd2);},'muJKz':function(_0x37a3ab,_0x5f2880){return _0x37a3ab===_0x5f2880;},'uwqVQ':function(_0x2b9c5e,_0x3855b6){return _0x2b9c5e(_0x3855b6);},'gaxLj':function(_0x3f6a73,_0x3220dd){return _0x3f6a73>_0x3220dd;},'yDbuk':function(_0x371277,_0x41e293){return _0x371277!==_0x41e293;},'humal':'hsgfE','vxGoU':function(_0x39f132,_0x57eba8){return _0x39f132!==_0x57eba8;}},_0x21c59d={'calculator':Calculator,'google':GoogleSearchAPI,'wolfram':StructuredWolfram,'stable-diffusion':StructuredSD,'azure-ai-search':StructuredACS,'traversaal_search':TraversaalSearch,'tavily_search_results_json':TavilySearchResults},_0x3895f0={'serpapi':async()=>{const _0x3db2b5=_0x4344;let _0x4b18df=process[_0x3db2b5(0xa0)]['SERPAPI_API_KEY'];return!_0x4b18df&&(_0x4b18df=await getUserPluginAuthValue(_0x4b7493,_0x3db2b5(0x96))),new SerpAPI(_0x4b18df,{'location':_0x3db2b5(0xba),'hl':'en','gl':'us'});}},_0x999231={};functions&&(_0x21c59d[_0x506e1f(0xc3)]=DALLE3);const _0x2e7eeb={'req':options[_0x506e1f(0xa4)],'fileStrategy':options[_0x506e1f(0xa3)],'processFileURL':options[_0x506e1f(0x90)],'returnMetadata':options[_0x506e1f(0xcb)],'uploadImageBuffer':options[_0x506e1f(0xab)]},_0x2f2b0d={'serpapi':{'location':_0x506e1f(0xba),'hl':'en','gl':'us'},'dalle':_0x2e7eeb,'dall-e':_0x2e7eeb,'stable-diffusion':_0x2e7eeb},_0x414ac5={};availableTools[_0x506e1f(0x9c)](_0x1a57f7=>{const _0x3b449e=_0x506e1f;if(_0x3895f0[_0x1a57f7[_0x3b449e(0xbd)]])return;_0x414ac5[_0x1a57f7['pluginKey']]=_0x1a57f7[_0x3b449e(0x9d)][_0x3b449e(0xcc)](_0x3286c9=>_0x3286c9[_0x3b449e(0xce)]);});const _0xe5b63d=[];for(const _0xe7629b of tools){if(_0x3b1928[_0x506e1f(0xb8)](_0xe7629b,Tools[_0x506e1f(0xb7)])){const _0x212030=await _0x3b1928['uwqVQ'](loadAuthValues,{'userId':_0x4b7493,'authFields':[EnvVar[_0x506e1f(0x93)]]}),_0x488968=_0x212030[EnvVar[_0x506e1f(0x93)]],_0x4c56b2=await primeFiles(options,_0x488968);_0x999231[_0xe7629b]=()=>{const _0x58982a=_0x506e1f,_0x21c78a=_0x3b1928[_0x58982a(0xbb)](createCodeExecutionTool,{'user_id':_0x4b7493,'files':_0x4c56b2,..._0x212030});return _0x21c78a[_0x58982a(0xb9)]=_0x488968,_0x21c78a;};continue;}else{if(_0xe7629b===Tools['file_search']){if('QUDGe'===_0x506e1f(0x9e))return;else{_0x999231[_0xe7629b]=()=>createFileSearchTool(options);continue;}}}if(_0x3895f0[_0xe7629b]){_0x999231[_0xe7629b]=_0x3895f0[_0xe7629b];continue;}if(_0x21c59d[_0xe7629b]){const _0x24138f=_0x2f2b0d[_0xe7629b]||{},_0x17c57c=loadToolWithAuth(_0x4b7493,_0x414ac5[_0xe7629b],_0x21c59d[_0xe7629b],_0x24138f);_0x999231[_0xe7629b]=_0x17c57c;continue;}functions&&_0xe5b63d[_0x506e1f(0xb6)](_0xe7629b);}let _0x5e29e2=null;if(functions&&_0x3b1928['gaxLj'](_0xe5b63d[_0x506e1f(0xc0)],0x0)&&skipSpecs!==!![]){if(_0x3b1928[_0x506e1f(0xaf)]('hsgfE',_0x3b1928[_0x506e1f(0xca)]))return _0x34f463;else _0x5e29e2=await loadSpecs({'llm':_0x10b48e,'user':_0x4b7493,'message':options['message'],'memory':options['memory'],'signal':options['signal'],'tools':_0xe5b63d,'map':!![],'verbose':![]});}for(const _0x14e835 of _0xe5b63d){_0x5e29e2&&_0x5e29e2[_0x14e835]&&(_0x999231[_0x14e835]=_0x5e29e2[_0x14e835]);}if(returnMap)return _0x999231;let _0x4e309c=[];for(const _0x4bdaba of tools){const _0x1dc812=_0x999231[_0x4bdaba];if(!_0x1dc812)continue;const _0x287d52=await _0x1dc812();if(Array['isArray'](_0x287d52)){if(_0x3b1928[_0x506e1f(0xaa)](_0x506e1f(0xac),_0x506e1f(0xad)))_0x4e309c=[..._0x4e309c,..._0x287d52];else return;}else _0x287d52&&_0x4e309c[_0x506e1f(0xb6)](_0x287d52);}return _0x4e309c;};function _0x2657(){const _0x5f2705=['WKetO','HRaIZ','pluginKey','[validateTools]\x20There\x20was\x20a\x20problem\x20validating\x20tools','There\x20was\x20a\x20problem\x20validating\x20tools','length','nzguE','bIEfI','dalle','7342244YgYICv','@langchain/community/tools/serpapi','tdbvF','DRAGy','filter','RlHSu','humal','returnMetadata','map','from','authField','628146fiZAOp','@langchain/community/tools/calculator','ZZAwa','VFvKW','CrBmA','40435UDEKiJ','xutxQ','gwlkw','2811872DLYMPq','TNdwd','OvGeb','./loadSpecs','processFileURL','exports','@librechat/agents','CODE_API_KEY','values','tJAqE','SERPAPI_API_KEY','18239670BbhWaE','authValue','has','jbyVg','~/server/services/Files/Code/process','forEach','authConfig','iJFbn','NHrTs','env','GsudQ','./createFileSearchTool','fileStrategy','req','yzkav','4641474oDHLRq','3582256EIvwLs','8srROaV','~/config','vxGoU','uploadImageBuffer','mlMxR','GRjbR','split','yDbuk','syiIC','NRTzC','librechat-data-provider','error','1182hjiRLv','~/server/services/PluginService','push','execute_code','muJKz','apiKey','Austin,Texas,United\x20States'];_0x2657=function(){return _0x5f2705;};return _0x2657();}module[_0x294e32(0x91)]={'loadToolWithAuth':loadToolWithAuth,'loadAuthValues':loadAuthValues,'validateTools':validateTools,'loadTools':loadTools};