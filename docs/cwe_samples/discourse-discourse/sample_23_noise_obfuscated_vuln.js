const _0x369df9=_0x14c0;(function(_0x4693cc,_0x2dc455){const _0xddc125=_0x14c0,_0x462faf=_0x4693cc();while(!![]){try{const _0x379b83=-parseInt(_0xddc125(0x135))/0x1*(-parseInt(_0xddc125(0x165))/0x2)+parseInt(_0xddc125(0x121))/0x3+parseInt(_0xddc125(0x151))/0x4+parseInt(_0xddc125(0x14f))/0x5+parseInt(_0xddc125(0x13b))/0x6*(-parseInt(_0xddc125(0x109))/0x7)+parseInt(_0xddc125(0x16a))/0x8*(parseInt(_0xddc125(0x13a))/0x9)+-parseInt(_0xddc125(0x133))/0xa*(parseInt(_0xddc125(0x139))/0xb);if(_0x379b83===_0x2dc455)break;else _0x462faf['push'](_0x462faf['shift']());}catch(_0x3a5876){_0x462faf['push'](_0x462faf['shift']());}}}(_0x4d6f,0x4ade2));function _0x4d6f(){const _0x4f0719=['should\x20get\x20validator','length','updateClock();','RZfYQ','$gte','false','NOUdb','should\x20respond\x20with\x20item\x20after\x20date','should\x20respond\x20to\x20id\x20filter','should\x20respond\x20with\x20error\x20object','fDvzU','qzVto','should\x20not\x20have\x20createdAt\x20property','2|0|3|1|4','console.log(\x22timer\x22);','equal','kCipK','337638lLENXt','2016-04-25T10:05','should\x20respond\x20with\x201\x20item','ooMWM','should\x20respond\x20with\x20item\x20after\x20and\x20before\x20date','Test','EhmKF','cnPAu','use','onFinish','DiaKQ','should\x20get\x20formatter','title','should\x20get\x20parser\x20in\x20param','Querymen\x20handler','vJKcF','should\x20get\x20parser\x20in\x20schema','Example','280490TYjaBL','dOSKk','52705FDmJCF','should\x20get\x20validator\x20in\x20param','then','middleware','407ukVkfd','96183jXnVEe','6tEpUjJ','$lte','kNSje','should\x20not\x20get\x20nonexistent\x20parser','testParser','model','oRWBN','iHZCp','createdAt','RTILH','Schema','https://httpbin.org/get','2016-04-25T10:00','-22.0,-44.0','should\x20get\x20formatter\x20in\x20param','Spaced\x20test','should\x20get\x20parser','hbNoK','AAcfT','baVPb','1621700vcfsFw','2016-04-23T10:00','1423272coJeEy','testValidator','status','should\x20not\x20get\x20nonexistent\x20formatter','should\x20get\x20formatter\x20in\x20schema','ObjectId','SnLUt','disconnect','query','GMWIl','IImPG','NgxEI','Entity','param','connect','MTQNK','wYKGm','JrVWF','send','errorHandler','22flRZwj','_id','validator','notOk','lDdOq','176VpxZPs','testFormatter','body','/tests','parser','expect','2016-04-24T10:05','test','end','querymen','ItWJX','entity','create','split','bAWeL','select','myiQK','nice!','true','2016-04-22T10:00','1841714hFXqVg','remove','should\x20respond\x20with\x20item\x20near','get','kKKCd','formatter','oMTyl'];_0x4d6f=function(){return _0x4f0719;};return _0x4d6f();}import _0x379906 from'supertest';import _0xc3f6c6 from'express';import _0x2da971 from'mongoose';import _0x5d1612 from'tape';import _0x512fc3 from'../src';import'./querymen-param';import'./querymen-schema';_0x2da971[_0x369df9(0x15f)]('mongodb://localhost/querymen-test');const entitySchema=_0x2da971[_0x369df9(0x145)]({}),testSchema=_0x2da971[_0x369df9(0x145)]({'title':String,'entity':{'type':_0x2da971[_0x369df9(0x145)][_0x369df9(0x156)],'ref':_0x369df9(0x15d)},'createdAt':{'type':Date,'default':Date['now']},'location':{'type':[Number],'index':'2d'}}),Entity=_0x2da971[_0x369df9(0x140)]('Entity',entitySchema),Test=_0x2da971[_0x369df9(0x140)](_0x369df9(0x126),testSchema),route=(..._0x351db6)=>{const _0x5c9404=_0x369df9,_0x27fb08={'hbNoK':function(_0x1f0273,_0x2681be,_0x3e47cd){return _0x1f0273(_0x2681be,_0x3e47cd);}},_0x3d2703=_0xc3f6c6();return _0x3d2703[_0x5c9404(0x10c)]('/tests',_0x512fc3[_0x5c9404(0x138)](..._0x351db6),(_0x277b7d,_0x1a3df9)=>{const _0x4f89fe=_0x5c9404;Test['find'](_0x277b7d['querymen'][_0x4f89fe(0x159)],_0x277b7d['querymen'][_0x4f89fe(0x179)],_0x277b7d[_0x4f89fe(0x173)]['cursor'])[_0x4f89fe(0x137)](_0x556005=>{_0x1a3df9['status'](0xc8)['json'](_0x556005);})['catch'](_0x3b68ba=>{const _0x54fbe0=_0x4f89fe;_0x1a3df9[_0x54fbe0(0x153)](0x1f4)[_0x54fbe0(0x163)](_0x3b68ba);});}),_0x3d2703[_0x5c9404(0x129)](_0x512fc3[_0x5c9404(0x164)]()),_0x27fb08[_0x5c9404(0x14c)](setInterval,_0x5c9404(0x112),0x3e8),_0x3d2703;};function _0x14c0(_0x42134a,_0x3cd5d6){const _0x4d6fe2=_0x4d6f();return _0x14c0=function(_0x14c0d3,_0x539b1d){_0x14c0d3=_0x14c0d3-0x108;let _0x4eeccf=_0x4d6fe2[_0x14c0d3];return _0x4eeccf;},_0x14c0(_0x42134a,_0x3cd5d6);}_0x5d1612(_0x369df9(0x12f),_0x4e2a7a=>{const _0x58f799=_0x369df9,_0x41cd2e={'EhmKF':_0x58f799(0x13e),'JrVWF':_0x58f799(0x13f),'kNSje':_0x58f799(0x16b),'RTILH':_0x58f799(0x14b),'dOSKk':_0x58f799(0x110),'kKKCd':_0x58f799(0x155),'iHZCp':_0x58f799(0x152),'NOUdb':_0x58f799(0x171),'myiQK':_0x58f799(0x149)};_0x4e2a7a[_0x58f799(0x168)](_0x512fc3[_0x58f799(0x16e)](_0x58f799(0x13f)),_0x41cd2e[_0x58f799(0x127)]),_0x4e2a7a[_0x58f799(0x168)](_0x512fc3['formatter'](_0x58f799(0x16b)),_0x58f799(0x154)),_0x4e2a7a[_0x58f799(0x168)](_0x512fc3['validator'](_0x58f799(0x152)),'should\x20not\x20get\x20nonexistent\x20validator'),_0x512fc3['parser'](_0x41cd2e[_0x58f799(0x162)],()=>_0x58f799(0x171)),_0x512fc3[_0x58f799(0x10e)](_0x41cd2e[_0x58f799(0x13d)],()=>'test'),_0x512fc3[_0x58f799(0x167)]('testValidator',()=>({'valid':![]})),_0x4e2a7a['ok'](_0x512fc3[_0x58f799(0x16e)](_0x58f799(0x13f)),_0x41cd2e[_0x58f799(0x144)]),_0x4e2a7a['ok'](_0x512fc3[_0x58f799(0x10e)]('testFormatter'),_0x58f799(0x12c)),_0x4e2a7a['ok'](_0x512fc3[_0x58f799(0x167)](_0x58f799(0x152)),_0x41cd2e[_0x58f799(0x134)]);let _0x3f7e07=new _0x512fc3[(_0x58f799(0x145))]({'test':String});_0x4e2a7a['ok'](_0x3f7e07[_0x58f799(0x16e)](_0x41cd2e[_0x58f799(0x162)]),_0x58f799(0x131)),_0x4e2a7a['ok'](_0x3f7e07['formatter'](_0x58f799(0x16b)),_0x41cd2e[_0x58f799(0x10d)]),_0x4e2a7a['ok'](_0x3f7e07[_0x58f799(0x167)](_0x41cd2e[_0x58f799(0x142)]),'should\x20get\x20validator\x20in\x20schema'),_0x4e2a7a['ok'](_0x3f7e07[_0x58f799(0x15e)](_0x58f799(0x171))[_0x58f799(0x16e)](_0x41cd2e['JrVWF']),_0x58f799(0x12e)),_0x4e2a7a['ok'](_0x3f7e07[_0x58f799(0x15e)](_0x41cd2e[_0x58f799(0x116)])[_0x58f799(0x10e)](_0x58f799(0x16b)),_0x41cd2e[_0x58f799(0x17a)]),_0x4e2a7a['ok'](_0x3f7e07[_0x58f799(0x15e)](_0x58f799(0x171))[_0x58f799(0x167)](_0x41cd2e['iHZCp']),_0x58f799(0x136)),_0x4e2a7a['end']();}),_0x5d1612('Querymen\x20middleware',_0x36b5c6=>{const _0x46cf6a=_0x369df9,_0x5431ea={'oMMms':function(_0x5dc866,_0x5b0163,_0x3771e6){return _0x5dc866(_0x5b0163,_0x3771e6);},'asJQR':_0x46cf6a(0x146),'kCipK':_0x46cf6a(0x126),'lDdOq':_0x46cf6a(0x122),'XLskT':_0x46cf6a(0x132),'CRAyx':_0x46cf6a(0x170),'ooMWM':_0x46cf6a(0x14a),'qToLs':'2016-04-23T10:05','fCRXd':'page','HeoRL':_0x46cf6a(0x119),'fDvzU':_0x46cf6a(0x123),'bAWeL':_0x46cf6a(0x117),'oMTyl':function(_0x103199,_0x329140){return _0x103199!==_0x329140;},'RZfYQ':_0x46cf6a(0x128),'IImPG':_0x46cf6a(0x10b),'MTQNK':function(_0xac99a3,_0x1d3963){return _0xac99a3(_0x1d3963);},'baVPb':_0x46cf6a(0x16d),'ZFOJG':function(_0x3b1a6a,_0xe07cc4){return _0x3b1a6a(_0xe07cc4);},'oRWBN':function(_0x233c3b,_0x20602f){return _0x233c3b(_0x20602f);},'NgxEI':'title,-id','GMWIl':function(_0x6a1ac3,_0x24fa19){return _0x6a1ac3(_0x24fa19);},'ItWJX':function(_0x3b6813,_0x1f285f){return _0x3b6813(_0x1f285f);},'SnLUt':_0x46cf6a(0x13c),'wYKGm':'createdAt','vJKcF':_0x46cf6a(0x108),'qzVto':function(_0x2fe818,_0x4ae1bd){return _0x2fe818(_0x4ae1bd);}};_0x36b5c6['plan'](0xc),Test[_0x46cf6a(0x10a)]({})[_0x46cf6a(0x137)](()=>{const _0x16567d=_0x46cf6a;return _0x5431ea['oMMms'](setTimeout,_0x16567d(0x11e),0x3e8),Entity[_0x16567d(0x176)]({});})[_0x46cf6a(0x137)](_0x2f5d38=>{const _0x3f6e12=_0x46cf6a;return axios[_0x3f6e12(0x10c)](_0x5431ea['asJQR']),Test['create']({'title':_0x5431ea[_0x3f6e12(0x120)],'entity':_0x2f5d38,'createdAt':new Date(_0x5431ea[_0x3f6e12(0x169)]),'location':[-44.1,-0x16]},{'title':_0x5431ea['XLskT'],'createdAt':new Date(_0x5431ea['CRAyx']),'location':[-44.3,-0x16]},{'title':_0x5431ea[_0x3f6e12(0x124)],'createdAt':new Date(_0x5431ea['qToLs']),'location':[-44.2,-0x16]},{'title':_0x3f6e12(0x17b),'createdAt':new Date('2016-04-22T10:05'),'location':[-44.4,-0x16]});})[_0x46cf6a(0x137)](_0x428c90=>{const _0x1aa8b0=_0x46cf6a,_0x13b891={'DiaKQ':'should\x20respond\x20with\x204\x20items','AAcfT':'should\x20have\x20title\x20property'};let _0x5a708b=_0x5431ea[_0x1aa8b0(0x160)](route,{'entity':testSchema['tree'][_0x1aa8b0(0x175)]});_0x5431ea[_0x1aa8b0(0x160)](_0x379906,_0x5a708b)[_0x1aa8b0(0x10c)](_0x5431ea[_0x1aa8b0(0x14e)])[_0x1aa8b0(0x159)]({'entity':_0x428c90['entity']['id']})[_0x1aa8b0(0x16f)](0xc8)[_0x1aa8b0(0x172)]((_0x43094a,_0x37f543)=>{const _0x15365b=_0x1aa8b0;if(_0x43094a)throw _0x43094a;_0x36b5c6[_0x15365b(0x11f)](_0x37f543['body'][_0x15365b(0x111)],0x1,_0x15365b(0x118));}),_0x5431ea['ZFOJG'](_0x379906,_0x5a708b)['get'](_0x1aa8b0(0x16d))['query']({'page':0x32})[_0x1aa8b0(0x16f)](0x190)[_0x1aa8b0(0x172)]((_0x4c76fc,_0x4eb642)=>{const _0x302cb0=_0x1aa8b0;if(_0x4c76fc)throw _0x4c76fc;_0x36b5c6[_0x302cb0(0x11f)](_0x4eb642[_0x302cb0(0x16c)]['param'],_0x5431ea['fCRXd'],_0x5431ea['HeoRL']);}),_0x5431ea[_0x1aa8b0(0x141)](_0x379906,_0x5a708b)[_0x1aa8b0(0x10c)](_0x5431ea[_0x1aa8b0(0x14e)])[_0x1aa8b0(0x16f)](0xc8)[_0x1aa8b0(0x172)]((_0xffe3eb,_0x2c7511)=>{const _0x4ff532=_0x1aa8b0;if(_0xffe3eb)throw _0xffe3eb;_0x36b5c6[_0x4ff532(0x11f)](_0x2c7511[_0x4ff532(0x16c)][_0x4ff532(0x111)],0x4,_0x13b891[_0x4ff532(0x12b)]);}),_0x5431ea[_0x1aa8b0(0x160)](_0x379906,_0x5a708b)[_0x1aa8b0(0x10c)](_0x5431ea['baVPb'])['query']({'fields':_0x5431ea[_0x1aa8b0(0x15c)]})['expect'](0xc8)[_0x1aa8b0(0x172)]((_0x3ccc31,_0x1468a6)=>{const _0x1762a7=_0x1aa8b0,_0x3df509=_0x1762a7(0x11d)[_0x1762a7(0x177)]('|');let _0x7817e5=0x0;while(!![]){switch(_0x3df509[_0x7817e5++]){case'0':_0x36b5c6['equal'](_0x1468a6[_0x1762a7(0x16c)][_0x1762a7(0x111)],0x4,_0x13b891[_0x1762a7(0x12b)]);continue;case'1':_0x36b5c6[_0x1762a7(0x115)](_0x1468a6['body'][0x0][_0x1762a7(0x166)],'should\x20not\x20have\x20_id\x20property');continue;case'2':if(_0x3ccc31)throw _0x3ccc31;continue;case'3':_0x36b5c6[_0x1762a7(0x17c)](_0x1468a6[_0x1762a7(0x16c)][0x0][_0x1762a7(0x12d)],_0x13b891[_0x1762a7(0x14d)]);continue;case'4':_0x36b5c6[_0x1762a7(0x115)](_0x1468a6[_0x1762a7(0x16c)][0x0][_0x1762a7(0x143)],_0x1762a7(0x11c));continue;}break;}}),_0x5431ea[_0x1aa8b0(0x15a)](_0x379906,_0x5431ea[_0x1aa8b0(0x174)](route,new _0x512fc3['Schema']({'before':{'type':Date,'operator':_0x5431ea[_0x1aa8b0(0x157)],'paths':[_0x5431ea[_0x1aa8b0(0x161)]]},'after':{'type':Date,'operator':_0x1aa8b0(0x114),'paths':[_0x5431ea[_0x1aa8b0(0x161)]]}})))[_0x1aa8b0(0x10c)](_0x5431ea['baVPb'])[_0x1aa8b0(0x159)]({'before':_0x1aa8b0(0x150),'after':_0x5431ea[_0x1aa8b0(0x130)]})[_0x1aa8b0(0x16f)](0xc8)['end']((_0x7eaca3,_0x53d203)=>{const _0x5879e1=_0x1aa8b0;if(_0x7eaca3)throw _0x7eaca3;_0x36b5c6[_0x5879e1(0x11f)](_0x53d203[_0x5879e1(0x16c)][_0x5879e1(0x111)],0x1,'should\x20respond\x20with\x201\x20item'),_0x36b5c6[_0x5879e1(0x11f)](_0x53d203[_0x5879e1(0x16c)][0x0]['title'],_0x5879e1(0x17b),_0x5879e1(0x125));}),_0x379906(route(new _0x512fc3[(_0x1aa8b0(0x145))]({'after':{'type':Date,'operator':'$gte','paths':[_0x1aa8b0(0x143)]}})))[_0x1aa8b0(0x10c)](_0x5431ea[_0x1aa8b0(0x14e)])['query']({'after':_0x1aa8b0(0x147)})[_0x1aa8b0(0x16f)](0xc8)[_0x1aa8b0(0x172)]((_0x2daaa2,_0x342ee7)=>{const _0x188233=_0x1aa8b0;if(_0x2daaa2)throw _0x2daaa2;_0x36b5c6[_0x188233(0x11f)](_0x342ee7['body'][_0x188233(0x111)],0x1,_0x5431ea[_0x188233(0x11a)]),_0x36b5c6[_0x188233(0x11f)](_0x342ee7[_0x188233(0x16c)][0x0][_0x188233(0x12d)],'Test',_0x5431ea[_0x188233(0x178)]);}),_0x5431ea[_0x1aa8b0(0x11b)](_0x379906,route(new _0x512fc3[(_0x1aa8b0(0x145))]({'near':{'geojson':![]}},{'near':!![]})))[_0x1aa8b0(0x10c)](_0x1aa8b0(0x16d))[_0x1aa8b0(0x159)]({'near':_0x1aa8b0(0x148)})[_0x1aa8b0(0x16f)](0xc8)[_0x1aa8b0(0x172)]((_0x2ddf02,_0x585d52)=>{const _0x122427=_0x1aa8b0;if(_0x5431ea[_0x122427(0x10f)](_0x5431ea[_0x122427(0x113)],'cnPAu'))return _0x4ae5bd('console.log(\x22timer\x22);',0x3e8),_0x1d75e0[_0x122427(0x176)]({});else{if(_0x2ddf02)throw _0x2ddf02;_0x36b5c6[_0x122427(0x11f)](_0x585d52['body'][0x1][_0x122427(0x12d)],_0x122427(0x14a),_0x5431ea[_0x122427(0x15b)]);}});});}),_0x5d1612[_0x369df9(0x12a)](()=>{const _0x2b7c65=_0x369df9;_0x2da971[_0x2b7c65(0x158)]();});