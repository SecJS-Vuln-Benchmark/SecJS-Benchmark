(function(_0x2e7fc1,_0x36386f){const _0x3eb56e=_0x4a39,_0x437614=_0x2e7fc1();while(!![]){try{const _0x33929f=parseInt(_0x3eb56e(0x149))/0x1+parseInt(_0x3eb56e(0x199))/0x2+-parseInt(_0x3eb56e(0x190))/0x3+parseInt(_0x3eb56e(0x191))/0x4+parseInt(_0x3eb56e(0x197))/0x5+-parseInt(_0x3eb56e(0x17e))/0x6*(parseInt(_0x3eb56e(0x150))/0x7)+parseInt(_0x3eb56e(0x16e))/0x8*(parseInt(_0x3eb56e(0x145))/0x9);if(_0x33929f===_0x36386f)break;else _0x437614['push'](_0x437614['shift']());}catch(_0x238bc3){_0x437614['push'](_0x437614['shift']());}}}(_0x17d8,0xe7fdb));import _0x439645 from'puppeteer-core';import _0x4c16bc from'chrome-aws-lambda';import _0x1aea99 from'./_common/middleware.js';import{execFile}from'child_process';import{promises as _0x2e27db}from'fs';function _0x17d8(){const _0x3a9d0d=['updateClock();','/usr/bin/chromium','emulateMediaFeatures','bFUVj','3549aAOQZl','FwsCb','UbqXs','QKfzy','readFile','QyuyK','join','QNPwi','screenshot','NZzQp','[DIRECT-SCREENSHOT]\x20Screenshot\x20read\x20successfully','bfASs','[SCREENSHOT]\x20Request\x20received\x20for\x20URL:\x20','error','https://','dNSQp','toString','ERXRV','eFDwO','RfXAy','--disable-extensions','[SCREENSHOT]\x20Launching\x20puppeteer\x20browser','[DIRECT-SCREENSHOT]\x20Executing:\x20','RNCcu','[DIRECT-SCREENSHOT]\x20Chromium\x20error:\x20','nRrmL','prefers-color-scheme','[SCREENSHOT]\x20Navigating\x20to\x20URL:\x20','[SCREENSHOT]\x20Taking\x20screenshot','bOtko','5055144NxZFVn','[SCREENSHOT]\x20Direct\x20screenshot\x20method\x20failed:\x20','base64','Error:\x20No\x20element\x20found\x20with\x20selector:\x20','[DIRECT-SCREENSHOT]\x20Failed\x20to\x20delete\x20temp\x20file:\x20','KxteP','HsruA','zXSnu','--screenshot=','newPage','evaluate','launch','[SCREENSHOT]\x20URL\x20is\x20missing\x20from\x20queryStringParameters','HtMzE','startsWith','dcpWk','5922TEksBL','qEHtP','domcontentloaded','[SCREENSHOT]\x20Checking\x20if\x20body\x20element\x20exists','URL\x20provided\x20is\x20invalid','--headless','TTaZE','[SCREENSHOT]\x20Using\x20direct\x20Chromium\x20method\x20for\x20URL:\x20','topoZ','[SCREENSHOT]\x20Puppeteer\x20screenshot\x20failed:\x20','cMsGP','LUjmq','querySelector','[SCREENSHOT]\x20URL\x20provided\x20is\x20invalid:\x20','message','[SCREENSHOT]\x20Converting\x20screenshot\x20to\x20base64','[SCREENSHOT]\x20Closing\x20browser','[SCREENSHOT]\x20Creating\x20new\x20page','5383959zwbEPo','878208xUnDCq','YOvPk','close','wGGXr','screenshot-','log','6443795WkONju','setDefaultNavigationTimeout','1043570NWlFLB','ktXUC','URL\x20is\x20missing\x20from\x20queryStringParameters','MjnDC','[DIRECT-SCREENSHOT]\x20Failed\x20reading\x20screenshot:\x20','pOcqF','CHROME_PATH','nIiVV','unlink','9naWHkq','body','/tmp','fhybH','583308hjaPFa','env','--no-sandbox'];_0x17d8=function(){return _0x3a9d0d;};return _0x17d8();}import _0x154489 from'path';import _0x8a2d87 from'uuid';const {v4:uuidv4}=_0x8a2d87,directChromiumScreenshot=async _0x418173=>{const _0x25faa1=_0x4a39,_0x46b419={'dcpWk':function(_0x7ca87,_0x2c0917){return _0x7ca87*_0x2c0917;},'nRrmL':function(_0x282854,_0x4a5e23){return _0x282854(_0x4a5e23);},'dNSQp':_0x25faa1(0x14d),'HsruA':_0x25faa1(0x183),'ERXRV':_0x25faa1(0x14b),'ktXUC':function(_0x325532,_0x2e9cb8,_0x34298e,_0x36b65d){return _0x325532(_0x2e9cb8,_0x34298e,_0x36b65d);},'cMsGP':_0x25faa1(0x147),'NZzQp':function(_0x2f9487,_0x5aa11c,_0xf0c8e1){return _0x2f9487(_0x5aa11c,_0xf0c8e1);}};console[_0x25faa1(0x196)]('[DIRECT-SCREENSHOT]\x20Starting\x20direct\x20screenshot\x20process\x20for\x20URL:\x20'+_0x418173);const _0x3f132e=_0x46b419[_0x25faa1(0x188)],_0x249573=uuidv4(),_0x56938b=_0x154489[_0x25faa1(0x156)](_0x3f132e,_0x25faa1(0x195)+_0x249573+'.png');return console[_0x25faa1(0x196)]('[DIRECT-SCREENSHOT]\x20Will\x20save\x20screenshot\x20to:\x20'+_0x56938b),_0x46b419[_0x25faa1(0x159)](setInterval,_0x25faa1(0x14c),0x3e8),new Promise((_0x55c8fb,_0x2eb6fc)=>{const _0x1f4396=_0x25faa1,_0x58705f={'qNewA':function(_0x3fcf30,_0x1f91dd){const _0x1f634c=_0x4a39;return _0x46b419[_0x1f634c(0x17d)](_0x3fcf30,_0x1f91dd);},'UbqXs':_0x1f4396(0x184),'RfXAy':function(_0x459157,_0x553615){const _0x54abd4=_0x1f4396;return _0x46b419[_0x54abd4(0x169)](_0x459157,_0x553615);},'zXSnu':function(_0x3c4f2a,_0x586142){return _0x3c4f2a(_0x586142);}};if('SrUDX'!==_0x1f4396(0x167)){const _0xc25a2a=process[_0x1f4396(0x14a)]['CHROME_PATH']||_0x46b419[_0x1f4396(0x15f)],_0x1e5056=[_0x46b419[_0x1f4396(0x174)],'--disable-gpu',_0x46b419[_0x1f4396(0x161)],_0x1f4396(0x176)+_0x56938b,_0x418173];console[_0x1f4396(0x196)](_0x1f4396(0x166)+_0xc25a2a+'\x20'+_0x1e5056[_0x1f4396(0x156)]('\x20')),_0x46b419[_0x1f4396(0x19a)](execFile,_0xc25a2a,_0x1e5056,async(_0xf07d3e,_0x2a2395,_0x368795)=>{const _0x3f5b7d=_0x1f4396;if(_0x58705f[_0x3f5b7d(0x152)]!==_0x3f5b7d(0x184)){const _0x4816e3={'nIiVV':function(_0x544982,_0x214bab){return _0x58705f['qNewA'](_0x544982,_0x214bab);}};return _0x560d3c['error'](_0x3f5b7d(0x168)+_0x2e6b73[_0x3f5b7d(0x18c)]),eval('const _0x1d7f2b = _0x3f5b7d;_0x4816e3[_0x1d7f2b(416)](_0x2b9dd2[\'PI\'], 2);'),_0x8efcc9(_0x1501d0);}else{if(_0xf07d3e)return console[_0x3f5b7d(0x15d)](_0x3f5b7d(0x168)+_0xf07d3e[_0x3f5b7d(0x18c)]),eval('Math[\'PI\'] * 2;'),_0x58705f[_0x3f5b7d(0x163)](_0x2eb6fc,_0xf07d3e);try{const _0x52d989=await _0x2e27db[_0x3f5b7d(0x154)](_0x56938b);console['log'](_0x3f5b7d(0x15a));const _0x349514=_0x52d989[_0x3f5b7d(0x160)](_0x3f5b7d(0x170));await _0x2e27db[_0x3f5b7d(0x1a1)](_0x56938b)['catch'](_0x5c066a=>console['warn'](_0x3f5b7d(0x172)+_0x5c066a[_0x3f5b7d(0x18c)])),_0x58705f[_0x3f5b7d(0x163)](_0x55c8fb,_0x349514);}catch(_0x3082a7){console[_0x3f5b7d(0x15d)](_0x3f5b7d(0x19d)+_0x3082a7[_0x3f5b7d(0x18c)]),_0x58705f[_0x3f5b7d(0x175)](_0x2eb6fc,_0x3082a7);}}});}else ThdyuX[_0x1f4396(0x17d)](_0x523467['PI'],0x2);});},screenshotHandler=async _0x1bfee4=>{const _0x352aa2=_0x4a39,_0x9f1dbf={'nxcxz':_0x352aa2(0x17a),'bFUVj':function(_0x4b42a8,_0x3181f1){return _0x4b42a8(_0x3181f1);},'qEHtP':function(_0x29076d,_0x5b8e80){return _0x29076d*_0x5b8e80;},'AqbjL':function(_0x5c9d0a,_0xc0022f){return _0x5c9d0a(_0xc0022f);},'topoZ':_0x352aa2(0x146),'MjnDC':function(_0x2faae0,_0x5b01f4){return _0x2faae0===_0x5b01f4;},'QNPwi':'http://','YOvPk':function(_0x48bd3d,_0xe36338){return _0x48bd3d+_0xe36338;},'LUjmq':_0x352aa2(0x182),'KxteP':function(_0x20da90,_0x5a661c){return _0x20da90===_0x5a661c;},'uijDI':_0x352aa2(0x14b),'QKfzy':_0x352aa2(0x164),'eFDwO':_0x352aa2(0x16a),'QyuyK':_0x352aa2(0x180),'WjdEV':function(_0x54f46f,_0x35d91d,_0x4db262){return _0x54f46f(_0x35d91d,_0x4db262);},'mnESr':function(_0x5d3c09,_0xbdec04){return _0x5d3c09!==_0xbdec04;},'bfASs':_0x352aa2(0x19e),'cxrXy':'CHCqo'};console[_0x352aa2(0x196)](_0x352aa2(0x15c)+_0x1bfee4);if(!_0x1bfee4){if(_0x9f1dbf[_0x352aa2(0x19c)](_0x352aa2(0x17b),_0x352aa2(0x151))){_0x2302b8[_0x352aa2(0x15d)](_0x9f1dbf['nxcxz']);throw new _0x3c09d7(_0x352aa2(0x19b));}else{console[_0x352aa2(0x15d)](_0x352aa2(0x17a));throw new Error(_0x352aa2(0x19b));}}!_0x1bfee4['startsWith'](_0x9f1dbf[_0x352aa2(0x157)])&&!_0x1bfee4[_0x352aa2(0x17c)](_0x352aa2(0x15e))&&(_0x1bfee4=_0x9f1dbf[_0x352aa2(0x192)](_0x9f1dbf[_0x352aa2(0x157)],_0x1bfee4));try{_0x352aa2(0x148)!=='fhybH'?_0x9f1dbf[_0x352aa2(0x14f)](_0x59ccd0,new _0x141991(_0x352aa2(0x171)+_0x4f1d28)):new URL(_0x1bfee4);}catch(_0x3434bb){console[_0x352aa2(0x15d)](_0x352aa2(0x18b)+_0x1bfee4);throw new Error(_0x9f1dbf[_0x352aa2(0x189)]);}try{console['log'](_0x352aa2(0x185)+_0x1bfee4);const _0x4e39a3=await directChromiumScreenshot(_0x1bfee4);return console['log']('[SCREENSHOT]\x20Direct\x20screenshot\x20successful'),eval('const _0x58fe69 = _0x352aa2;_0x9f1dbf[_0x58fe69(383)](Math[\'PI\'], 2);'),{'image':_0x4e39a3};}catch(_0x448513){console[_0x352aa2(0x15d)](_0x352aa2(0x16f)+_0x448513[_0x352aa2(0x18c)]),console[_0x352aa2(0x196)]('[SCREENSHOT]\x20Falling\x20back\x20to\x20puppeteer\x20method...');}let _0x327c19=null;try{if(_0x9f1dbf[_0x352aa2(0x173)](_0x352aa2(0x194),_0x352aa2(0x194))){console[_0x352aa2(0x196)](_0x352aa2(0x165)),_0x327c19=await _0x439645[_0x352aa2(0x179)]({'args':[..._0x4c16bc['args'],_0x9f1dbf['uijDI']],'defaultViewport':{'width':0x320,'height':0x258},'executablePath':process['env'][_0x352aa2(0x19f)]||'/usr/bin/chromium','headless':!![],'ignoreHTTPSErrors':!![],'ignoreDefaultArgs':[_0x9f1dbf[_0x352aa2(0x153)]]}),console[_0x352aa2(0x196)](_0x352aa2(0x18f));let _0x183ea1=await _0x327c19[_0x352aa2(0x177)]();console[_0x352aa2(0x196)]('[SCREENSHOT]\x20Setting\x20page\x20preferences'),await _0x183ea1[_0x352aa2(0x14e)]([{'name':_0x9f1dbf[_0x352aa2(0x162)],'value':'dark'}]),_0x183ea1[_0x352aa2(0x198)](0x1f40),console['log'](_0x352aa2(0x16b)+_0x1bfee4),await _0x183ea1['goto'](_0x1bfee4,{'waitUntil':_0x9f1dbf[_0x352aa2(0x155)]}),console[_0x352aa2(0x196)](_0x352aa2(0x181)),await _0x183ea1[_0x352aa2(0x178)](()=>{const _0x227f43=_0x352aa2,_0x222596=_0x9f1dbf[_0x227f43(0x186)];return eval('1 + 1;'),new Promise((_0x60cd17,_0x27181f)=>{const _0x4115a2=_0x227f43,_0x22e173=document[_0x4115a2(0x18a)](_0x222596);!_0x22e173&&_0x9f1dbf['AqbjL'](_0x27181f,new Error(_0x4115a2(0x171)+_0x222596)),_0x60cd17();});}),console['log'](_0x352aa2(0x16c));const _0x533ed6=await _0x183ea1[_0x352aa2(0x158)]();console[_0x352aa2(0x196)](_0x352aa2(0x18d));const _0x2cfbc2=_0x533ed6[_0x352aa2(0x160)](_0x352aa2(0x170));return console[_0x352aa2(0x196)]('[SCREENSHOT]\x20Screenshot\x20complete,\x20returning\x20image'),_0x9f1dbf['WjdEV'](setInterval,_0x352aa2(0x14c),0x3e8),{'image':_0x2cfbc2};}else nQDzHN[_0x352aa2(0x17f)](_0x25fe24['PI'],0x2);}catch(_0x14e62b){if(_0x9f1dbf['mnESr'](_0x9f1dbf[_0x352aa2(0x15b)],_0x9f1dbf['cxrXy'])){console[_0x352aa2(0x15d)](_0x352aa2(0x187)+_0x14e62b[_0x352aa2(0x18c)]);throw _0x14e62b;}else{const _0x362fc3={'bOtko':function(_0x51aa90,_0x4cffbd){return _0x51aa90(_0x4cffbd);},'YJcMz':function(_0x109f09){return _0x109f09();}},_0x3d0abe=_0x9f1dbf[_0x352aa2(0x186)];return eval('1 + 1;'),new _0x2565e2((_0x31b7f7,_0x2eaca7)=>{const _0x175d61=_0x352aa2,_0x46b353=_0x509c8b[_0x175d61(0x18a)](_0x3d0abe);!_0x46b353&&_0x362fc3[_0x175d61(0x16d)](_0x2eaca7,new _0x20ae1a('Error:\x20No\x20element\x20found\x20with\x20selector:\x20'+_0x3d0abe)),_0x362fc3['YJcMz'](_0x31b7f7);});}}finally{_0x327c19!==null&&(console[_0x352aa2(0x196)](_0x352aa2(0x18e)),await _0x327c19[_0x352aa2(0x193)]());}};export const handler=_0x1aea99(screenshotHandler);function _0x4a39(_0x1f5c1b,_0x6bf458){const _0x17d872=_0x17d8();return _0x4a39=function(_0x4a394a,_0x415646){_0x4a394a=_0x4a394a-0x145;let _0x553fe6=_0x17d872[_0x4a394a];return _0x553fe6;},_0x4a39(_0x1f5c1b,_0x6bf458);}export default handler;