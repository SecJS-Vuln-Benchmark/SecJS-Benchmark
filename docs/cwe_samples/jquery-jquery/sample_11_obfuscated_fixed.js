const _0x4e1506=_0x1f45;(function(_0x799054,_0x2f3a94){const _0x199581=_0x1f45,_0x10af9e=_0x799054();while(!![]){try{const _0x31c834=parseInt(_0x199581(0x10c))/0x1+parseInt(_0x199581(0xfc))/0x2*(parseInt(_0x199581(0xc8))/0x3)+-parseInt(_0x199581(0x104))/0x4+parseInt(_0x199581(0xd3))/0x5+parseInt(_0x199581(0xc3))/0x6*(-parseInt(_0x199581(0x110))/0x7)+parseInt(_0x199581(0xd9))/0x8+parseInt(_0x199581(0xf6))/0x9*(-parseInt(_0x199581(0xee))/0xa);if(_0x31c834===_0x2f3a94)break;else _0x10af9e['push'](_0x10af9e['shift']());}catch(_0x25cc3d){_0x10af9e['push'](_0x10af9e['shift']());}}}(_0x4728,0x8fc3a));import _0x316e41 from'escape-html';import _0x251773 from'../../../components/cardbuilder/cardBuilder';function _0x4728(){const _0x37e6bf=['catsM','DeleteDeviceConfirmation','HlfdE','querySelector','2071066QmOEGT','TYpxw','all','VbIxs','</a>','btnDeviceMenu','IuivE','\x27);background-size:\x20auto\x2064%;background-position:center\x20center;\x22>','2260972mbdVYB','target','Delete','xsQmQ','parse','getDefaultBackgroundClass','DeleteDevicesConfirmation','Devices','511288DFnhMo','click','iaNbe','CxHPh','868ZEfqOH','<div\x20class=\x22cardPadder\x20cardPadder-backdrop\x22></div>','join','IIjOL','cmlTw','map','qpoaz','HkVYZ','Name','Yzuau','<div\x20class=\x22cardFooter\x22>','tAEsD','iWFbu','THzEZ','grCsd','qDGos','then','UepTC','getAttribute','HeaderDeleteDevice','nOPvQ','rRoYp','<div\x20class=\x22cardScalable\x22>','\x27\x20class=\x27card\x20backdropCard\x27>','navigate','zHHPD','<div\x20class=\x27cardText\x27>','Menu','deviceId','&nbsp;','</div>','CoEcE','nnjRH','viewshow','AppName','37758CaODwq','innerHTML','kpUlj','Edit','llQTj','3amqLSg','.devicesList','Zatyb','FnCEp','hide','deleteDevice','mode_edit','filter','\x22\x20title=\x22','LastUserName','TqBul','1133720lbSQOd','\x22\x20class=\x22btnDeviceMenu\x22><span\x20class=\x22material-icons\x20more_vert\x22\x20aria-hidden=\x22true\x22></span></button>','3.4.1.31','#!/device.html?id=','Items','ddECl','6873152nqlYXm','Clqya','push','bHegb','getDeviceIcon','parentWithClass','gjWHj','TwGYS','translate','delete','kMrlV','SEwjm','<div\x20class=\x22cardImage\x22\x20style=\x22background-image:url(\x27','MqXOL','<a\x20is=\x22emby-linkbutton\x22\x20href=\x22','isMinServerVersion','open','cmNJC','data-id','<span\x20class=\x22cardImageIcon\x20material-icons\x20tablet_android\x22\x20aria-hidden=\x22true\x22></span>','hPblK','6982760RdzBhq','\x22\x20class=\x22cardContent\x20cardImageContainer\x20','../../../components/actionSheet/actionSheet','addEventListener','ePIPR','HeaderDeleteDevices','typBs','show','9GbiTlB','MEKXZ'];_0x4728=function(){return _0x37e6bf;};return _0x4728();}import _0x284cf4 from'../../../components/loading/loading';import _0x56bcde from'../../../scripts/dom';import _0x306fbe from'../../../scripts/globalize';import _0x34db01 from'../../../scripts/imagehelper';import{formatDistanceToNow}from'date-fns';import{getLocaleWithSuffix}from'../../../scripts/dfnshelper';import'../../../elements/emby-button/emby-button';import'../../../elements/emby-itemscontainer/emby-itemscontainer';import'../../../components/cardbuilder/card.scss';import _0x13c4fc from'../../../scripts/clientUtils';import _0x207edb from'../../../components/confirm/confirm';let deviceIds=[];function canDelete(_0x2b0dae){const _0x524280=_0x1f45;return _0x2b0dae!==ApiClient[_0x524280(0xbc)]();}function deleteAllDevices(_0x2274a2){const _0x11f54b=_0x1f45,_0x49ccd7={'HkVYZ':function(_0x4ec662,_0x485305){return _0x4ec662(_0x485305);},'iaNbe':_0x11f54b(0xf3),'kpUlj':_0x11f54b(0x106)},_0x2ebde0=_0x306fbe[_0x11f54b(0xe1)](_0x11f54b(0x10a));_0x207edb({'text':_0x2ebde0,'title':_0x306fbe['translate'](_0x49ccd7[_0x11f54b(0x10e)]),'confirmText':_0x306fbe[_0x11f54b(0xe1)](_0x49ccd7[_0x11f54b(0xc5)]),'primary':'delete'})[_0x11f54b(0xb0)](async()=>{const _0xadb00c=_0x11f54b;_0x284cf4[_0xadb00c(0xf5)](),await Promise[_0xadb00c(0xfe)](deviceIds[_0xadb00c(0xcf)](canDelete)[_0xadb00c(0xa5)](_0x35bf79=>ApiClient[_0xadb00c(0xcd)](_0x35bf79))),_0x49ccd7[_0xadb00c(0xa7)](loadData,_0x2274a2);});}function deleteDevice(_0x5e9a30,_0x2b65bf){const _0x21d4e7=_0x1f45,_0x332e6d={'jNrNx':function(_0x5defa2,_0x5e0a59){return _0x5defa2(_0x5e0a59);},'CJLvZ':_0x21d4e7(0xf9),'CxHPh':_0x21d4e7(0xb3),'SEwjm':_0x21d4e7(0x106),'typBs':'delete'},_0x430a84=_0x306fbe[_0x21d4e7(0xe1)](_0x332e6d['CJLvZ']);_0x207edb({'text':_0x430a84,'title':_0x306fbe[_0x21d4e7(0xe1)](_0x332e6d[_0x21d4e7(0x10f)]),'confirmText':_0x306fbe[_0x21d4e7(0xe1)](_0x332e6d[_0x21d4e7(0xe4)]),'primary':_0x332e6d[_0x21d4e7(0xf4)]})[_0x21d4e7(0xb0)](async()=>{const _0x5d7740=_0x21d4e7;_0x284cf4[_0x5d7740(0xf5)](),await ApiClient[_0x5d7740(0xcd)](_0x2b65bf),_0x332e6d['jNrNx'](loadData,_0x5e9a30);});}function _0x1f45(_0x37a226,_0x4a66ed){const _0x47289c=_0x4728();return _0x1f45=function(_0x1f4539,_0x58682e){_0x1f4539=_0x1f4539-0xa3;let _0x4dc2b4=_0x47289c[_0x1f4539];return _0x4dc2b4;},_0x1f45(_0x37a226,_0x4a66ed);}function showDeviceMenu(_0x2810ef,_0x250dc0,_0xffa66d){const _0x386bd2=_0x1f45,_0x50a53c={'nvLqR':_0x386bd2(0xe9),'TYpxw':function(_0x2319af,_0x43a394){return _0x2319af+_0x43a394;},'XZXqt':function(_0x278795,_0x395528){return _0x278795!==_0x395528;},'MqXOL':'PSScB','twOuP':_0x386bd2(0xc6),'IIjOL':function(_0x4a0889,_0x1c81f1){return _0x4a0889(_0x1c81f1);}},_0x5886b4=[];canEdit&&_0x5886b4[_0x386bd2(0xdb)]({'name':_0x306fbe[_0x386bd2(0xe1)](_0x50a53c['twOuP']),'id':_0x386bd2(0xe9),'icon':_0x386bd2(0xce)}),_0x50a53c[_0x386bd2(0xa3)](canDelete,_0xffa66d)&&_0x5886b4[_0x386bd2(0xdb)]({'name':_0x306fbe[_0x386bd2(0xe1)](_0x386bd2(0x106)),'id':_0x386bd2(0xe2),'icon':_0x386bd2(0xe2)}),import(_0x386bd2(0xf0))[_0x386bd2(0xb0)](({default:_0x3afe63})=>{const _0x33916d=_0x386bd2,_0x238264={'THzEZ':_0x50a53c['nvLqR'],'rRoYp':function(_0xbbffa,_0x20f617){const _0x6bf32e=_0x1f45;return _0x50a53c[_0x6bf32e(0xfd)](_0xbbffa,_0x20f617);},'zHHPD':'device.html?id=','ePIPR':_0x33916d(0xe2)};_0x50a53c['XZXqt'](_0x50a53c[_0x33916d(0xe6)],_0x50a53c[_0x33916d(0xe6)])?_0x20ee57(this):_0x3afe63[_0x33916d(0xf5)]({'items':_0x5886b4,'positionTo':_0x250dc0,'callback':function(_0x4513e){const _0x294e0d=_0x33916d;switch(_0x4513e){case _0x238264[_0x294e0d(0xad)]:_0x13c4fc[_0x294e0d(0xb8)](_0x238264[_0x294e0d(0xb5)](_0x238264[_0x294e0d(0xb9)],_0xffa66d));break;case _0x238264[_0x294e0d(0xf2)]:deleteDevice(_0x2810ef,_0xffa66d);}}});});}function load(_0x359a6b,_0x1a98cd){const _0x5f4365=_0x1f45,_0x613393={'qDGos':_0x5f4365(0x101),'qygHw':function(_0x326036,_0x52c734,_0x31179e,_0x4dbf37){return _0x326036(_0x52c734,_0x31179e,_0x4dbf37);},'FnCEp':_0x5f4365(0xeb),'VbIxs':_0x5f4365(0x10b),'Clqya':_0x5f4365(0xb7),'HlfdE':_0x5f4365(0xb6),'TwGYS':function(_0xfbb35c,_0x2bb55c){return _0xfbb35c+_0x2bb55c;},'qpoaz':_0x5f4365(0xd6),'gjWHj':function(_0x3c8107,_0x3da3f7){return _0x3c8107===_0x3da3f7;},'SYpOC':_0x5f4365(0xec),'ccQNU':_0x5f4365(0x100),'CoEcE':_0x5f4365(0xaa),'MEKXZ':function(_0x3d586a,_0x1b57e7){return _0x3d586a(_0x1b57e7);},'grCsd':function(_0x14a28e,_0x5d78cc){return _0x14a28e+_0x5d78cc;},'sbmgX':function(_0x3fe913,_0x41db25){return _0x3fe913+_0x41db25;},'xsQmQ':'<button\x20type=\x22button\x22\x20is=\x22paper-icon-button-light\x22\x20data-id=\x22','bHegb':_0x5f4365(0xd0),'cmNJC':_0x5f4365(0xbb),'UepTC':'</div>','tAEsD':_0x5f4365(0xba),'iWFbu':'<div\x20class=\x27cardText\x20cardText-secondary\x27>','cmlTw':function(_0x403607,_0x56ad00){return _0x403607(_0x56ad00);},'IuivE':_0x5f4365(0xf8)},_0x5300e5=getLocaleWithSuffix();let _0x1f1e45='';_0x1f1e45+=_0x1a98cd[_0x5f4365(0xa5)](function(_0x5a4f2c){const _0xbbc893=_0x5f4365,_0x753bee={'Yzuau':function(_0x2040f6,_0x1a869c,_0x460eef){return _0x2040f6(_0x1a869c,_0x460eef);},'Zatyb':_0x613393[_0xbbc893(0xff)]};let _0x2edce5='';_0x2edce5+='<div\x20data-id=\x27'+_0x316e41(_0x5a4f2c['Id'])+_0x613393[_0xbbc893(0xda)],_0x2edce5+='<div\x20class=\x22cardBox\x20visualCardBox\x22>',_0x2edce5+=_0x613393[_0xbbc893(0xfa)],_0x2edce5+=_0xbbc893(0x111),_0x2edce5+=_0xbbc893(0xe7)+(canEdit?_0x613393['TwGYS'](_0x613393[_0xbbc893(0xa6)],_0x316e41(_0x5a4f2c['Id'])):'#')+_0xbbc893(0xef)+_0x251773[_0xbbc893(0x109)]()+'\x22>';const _0x41dee8=_0x34db01[_0xbbc893(0xdd)](_0x5a4f2c);_0x41dee8?_0x613393[_0xbbc893(0xdf)](_0xbbc893(0xd8),_0xbbc893(0xb4))?(_0x5f4588[_0xbbc893(0xf5)](),_0xb02f83['getJSON'](_0x60c38f['getUrl'](_0x753bee[_0xbbc893(0xca)]))[_0xbbc893(0xb0)](function(_0x419faf){const _0x59600e=_0xbbc893;_0x753bee[_0x59600e(0xa9)](_0x408f23,_0x47dc35,_0x419faf[_0x59600e(0xd7)]),_0x18f17=_0x419faf[_0x59600e(0xd7)][_0x59600e(0xa5)](_0x2dd6ea=>_0x2dd6ea['Id']),_0x5753a8[_0x59600e(0xcc)]();})):(_0x2edce5+=_0x613393[_0xbbc893(0xe0)](_0xbbc893(0xe5)+_0x41dee8,_0xbbc893(0x103)),_0x2edce5+=_0xbbc893(0xbe)):_0x2edce5+=_0x613393['SYpOC'];_0x2edce5+=_0x613393['ccQNU'],_0x2edce5+=_0xbbc893(0xbe),_0x2edce5+=_0x613393[_0xbbc893(0xbf)];(canEdit||_0x613393[_0xbbc893(0xf7)](canDelete,_0x5a4f2c['Id']))&&(_0x2edce5+='<div\x20style=\x22text-align:right;\x20float:right;padding-top:5px;\x22>',_0x2edce5+=_0x613393[_0xbbc893(0xae)](_0x613393['sbmgX'](_0x613393['grCsd'](_0x613393[_0xbbc893(0x107)],_0x316e41(_0x5a4f2c['Id'])),_0x613393[_0xbbc893(0xdc)]),_0x306fbe['translate'](_0x613393[_0xbbc893(0xea)]))+_0xbbc893(0xd4),_0x2edce5+=_0x613393[_0xbbc893(0xb1)]);_0x2edce5+=_0x613393[_0xbbc893(0xab)],_0x2edce5+=_0x613393['MEKXZ'](_0x316e41,_0x5a4f2c[_0xbbc893(0xa8)]),_0x2edce5+=_0x613393[_0xbbc893(0xb1)],_0x2edce5+=_0x613393[_0xbbc893(0xac)],_0x2edce5+=_0x613393[_0xbbc893(0xa4)](_0x316e41,_0x5a4f2c[_0xbbc893(0xc2)]+'\x20'+_0x5a4f2c['AppVersion']),_0x2edce5+=_0x613393[_0xbbc893(0xb1)],_0x2edce5+=_0x613393[_0xbbc893(0xac)];if(_0x5a4f2c[_0xbbc893(0xd1)]){if('gDQCf'!==_0x613393[_0xbbc893(0x102)])_0x2edce5+=_0x316e41(_0x5a4f2c[_0xbbc893(0xd1)]),_0x2edce5+=',\x20'+formatDistanceToNow(Date[_0xbbc893(0x108)](_0x5a4f2c['DateLastActivity']),_0x5300e5);else{const _0x3d7e19=_0x512338[_0xbbc893(0xde)](_0x22bbb2[_0xbbc893(0x105)],_0x613393[_0xbbc893(0xaf)]);_0x3d7e19&&_0x613393['qygHw'](_0x8f6323,_0xc56461,_0x3d7e19,_0x3d7e19[_0xbbc893(0xb2)](_0x613393[_0xbbc893(0xcb)]));}}return _0x2edce5+=_0xbbc893(0xbd),_0x2edce5+=_0x613393[_0xbbc893(0xb1)],_0x2edce5+=_0x613393['UepTC'],_0x2edce5+=_0x613393[_0xbbc893(0xb1)],_0x2edce5+=_0x613393[_0xbbc893(0xb1)],_0x2edce5;})[_0x5f4365(0x112)](''),_0x359a6b[_0x5f4365(0xfb)]('.devicesList')[_0x5f4365(0xc4)]=_0x1f1e45;}function loadData(_0x120b36){const _0x36a949=_0x1f45;_0x284cf4[_0x36a949(0xf5)](),ApiClient['getJSON'](ApiClient['getUrl'](_0x36a949(0x10b)))[_0x36a949(0xb0)](function(_0xb91951){const _0x3cfc1b=_0x36a949;load(_0x120b36,_0xb91951['Items']),deviceIds=_0xb91951[_0x3cfc1b(0xd7)][_0x3cfc1b(0xa5)](_0x5b83d4=>_0x5b83d4['Id']),_0x284cf4['hide']();});}const canEdit=ApiClient[_0x4e1506(0xe8)](_0x4e1506(0xd5));export default function (view){const _0x42d044=_0x4e1506,hTGQld={'nnjRH':_0x42d044(0x101),'hPblK':'data-id','kEryg':function(x,y){return x!==y;},'TqBul':_0x42d044(0xe3)};view[_0x42d044(0xfb)](_0x42d044(0xc9))['addEventListener'](_0x42d044(0x10d),function(e){const _0x81ac61=_0x42d044,btnDeviceMenu=_0x56bcde['parentWithClass'](e[_0x81ac61(0x105)],hTGQld[_0x81ac61(0xc0)]);btnDeviceMenu&&showDeviceMenu(view,btnDeviceMenu,btnDeviceMenu[_0x81ac61(0xb2)](hTGQld[_0x81ac61(0xed)]));}),view[_0x42d044(0xf1)](_0x42d044(0xc1),function(){loadData(this);}),view['querySelector']('#deviceDeleteAll')['addEventListener']('click',function(){const _0x1a88b2=_0x42d044;if(hTGQld[_0x1a88b2(0xd2)]!==_0x1a88b2(0xc7))deleteAllDevices(view);else return hTGQld['kEryg'](_0x251279,_0x2a94ca['deviceId']());});}