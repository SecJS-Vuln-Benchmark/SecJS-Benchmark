const _0x441e0c=_0x11e6;(function(_0x35b7ef,_0x4a45ec){const _0x17bbc0=_0x11e6,_0x33db9a=_0x35b7ef();while(!![]){try{const _0x3eb100=parseInt(_0x17bbc0(0x16b))/0x1+parseInt(_0x17bbc0(0x160))/0x2*(-parseInt(_0x17bbc0(0x173))/0x3)+parseInt(_0x17bbc0(0x162))/0x4*(parseInt(_0x17bbc0(0x16d))/0x5)+parseInt(_0x17bbc0(0x15a))/0x6*(-parseInt(_0x17bbc0(0x13b))/0x7)+-parseInt(_0x17bbc0(0x16e))/0x8*(parseInt(_0x17bbc0(0x178))/0x9)+-parseInt(_0x17bbc0(0x177))/0xa*(-parseInt(_0x17bbc0(0x147))/0xb)+parseInt(_0x17bbc0(0x176))/0xc;if(_0x3eb100===_0x4a45ec)break;else _0x33db9a['push'](_0x33db9a['shift']());}catch(_0x5b6f10){_0x33db9a['push'](_0x33db9a['shift']());}}}(_0x57ef,0xe735a));function _0x11e6(_0x2fc216,_0x761831){const _0x57efd2=_0x57ef();return _0x11e6=function(_0x11e6c4,_0xa0400c){_0x11e6c4=_0x11e6c4-0x136;let _0x2d9403=_0x57efd2[_0x11e6c4];return _0x2d9403;},_0x11e6(_0x2fc216,_0x761831);}function _0x57ef(){const _0x3602df=['safe','nuqlB','cwd','Restore\x20failed','crypto','X-AUTH-TOKEN','lNgHT','/tmp','UjTGo','Not\x20authenticated','header','JtGxZ','wveWF','ARRBl','VlsfD','LltNg','get','mongo.port','828xUeyAe','kbSMv','config','../../../cronjob/trailingTradeHelper/common','global','join','1258TWuMlk','SVhBU','4dYWnyn','CHNvV','KwkJl','tnUjD','xBOjC','dNmZk','bOhey','Nhxvt','child','583475YBcLYz','QafrF','2533445goINAG','1580816ywAhtD','post','/restore-post','info','dDTVq','8493DkGBvf','toString','send','32918052oLEIFJ','290SFGLGh','45fbZNUG','SBcdO','/scripts/restore.sh','xinsP','randomBytes','return\x20await\x20Promise.resolve(42);','demoMode','log','KvdnU','exports','POST','54726wiMMpd','puecq','Please\x20authenticate\x20first.','child_process','TMOIY','NnJGi','UzkcJ','You\x20cannot\x20restore\x20database\x20in\x20the\x20demo\x20mode.','code','Restore\x20success','hex','CAYTZ','364628MIAbph'];_0x57ef=function(){return _0x3602df;};return _0x57ef();}const {execFile}=require(_0x441e0c(0x13e)),config=require(_0x441e0c(0x15c)),path=require('path'),crypto=require(_0x441e0c(0x14c)),{verifyAuthenticated}=require(_0x441e0c(0x15d)),{slack}=require('../../../helpers'),handleRestorePost=async(_0x5aebe2,_0x2b0dc6)=>{const _0x2fa7bd=_0x441e0c,_0x18f08c={'xbOFz':function(_0x199363,_0x5d2658){return _0x199363+_0x5d2658;},'CHNvV':function(_0x3e9d8d,_0x2355e9){return _0x3e9d8d+_0x2355e9;},'nuqlB':_0x2fa7bd(0x13d),'wveWF':function(_0x3424bf,_0x54667c){return _0x3424bf!==_0x54667c;},'KvdnU':function(_0x8ea47e,_0x1c44e0,_0x180521,_0x591827){return _0x8ea47e(_0x1c44e0,_0x180521,_0x591827);},'SVhBU':_0x2fa7bd(0x159),'tnUjD':function(_0x19867a,_0x3c029,_0x5e7c52){return _0x19867a(_0x3c029,_0x5e7c52);},'kbSMv':_0x2fa7bd(0x136),'UzkcJ':_0x2fa7bd(0x13c),'SBcdO':'return\x20new\x20Date();','ISisz':_0x2fa7bd(0x142),'WpJiE':_0x2fa7bd(0x14d),'QafrF':function(_0x21cc12,_0x3be287,_0x38cc9f){return _0x21cc12(_0x3be287,_0x38cc9f);},'NnJGi':function(_0x5cee1e,_0x493128){return _0x5cee1e===_0x493128;},'KwkJl':_0x2fa7bd(0x145),'Nhxvt':_0x2fa7bd(0x14f),'lNgHT':function(_0x3249cc,_0x3c7f23){return _0x3249cc!==_0x3c7f23;},'LltNg':_0x2fa7bd(0x15e),'LgoDJ':function(_0x108655,_0x3bdf6a,_0x12a631){return _0x108655(_0x3bdf6a,_0x12a631);},'bOhey':_0x2fa7bd(0x13a),'CAYTZ':_0x2fa7bd(0x170),'VlsfD':'/restore'},_0x4835dd=_0x5aebe2[_0x2fa7bd(0x16a)]({'method':_0x18f08c[_0x2fa7bd(0x168)],'endpoint':_0x18f08c[_0x2fa7bd(0x146)]});_0x2b0dc6['route'](_0x18f08c[_0x2fa7bd(0x156)])[_0x2fa7bd(0x16f)](async(_0xac6ef2,_0x4a4aa1)=>{const _0xc7ba70=_0x2fa7bd,_0x4b5f7c={'xBOjC':'WsIqN','ARRBl':function(_0x364d52,_0x57c473){return _0x364d52(_0x57c473);},'TMOIY':function(_0x591d1d,_0x31e216,_0x1e588e){const _0x4db119=_0x11e6;return _0x18f08c[_0x4db119(0x165)](_0x591d1d,_0x31e216,_0x1e588e);}};if(config[_0xc7ba70(0x158)](_0x18f08c[_0xc7ba70(0x15b)])){if(_0xc7ba70(0x13c)!==_0x18f08c[_0xc7ba70(0x141)])XzxSrD['xbOFz'](0x1,0x1);else return Function(_0x18f08c[_0xc7ba70(0x179)])(),_0x4a4aa1[_0xc7ba70(0x175)]({'success':![],'status':0x193,'message':_0x18f08c['ISisz'],'data':{}});}const _0x359ff5=_0xac6ef2[_0xc7ba70(0x152)](_0x18f08c['WpJiE']),_0x39a842=await _0x18f08c[_0xc7ba70(0x16c)](verifyAuthenticated,_0x4835dd,_0x359ff5);if(_0x18f08c[_0xc7ba70(0x140)](_0x39a842,![]))return _0x4835dd['info']('Not\x20authenticated'),eval('1 + 1;'),_0x4a4aa1['send']({'success':![],'status':0x193,'message':_0x18f08c[_0xc7ba70(0x149)],'data':{}});const {archive:_0x4aca65}=_0xac6ef2['files'],_0x124e09=crypto[_0xc7ba70(0x17c)](0x10)[_0xc7ba70(0x174)](_0x18f08c[_0xc7ba70(0x164)]),_0x28ba0a=path[_0xc7ba70(0x15f)](_0x18f08c[_0xc7ba70(0x169)],''+_0x124e09);await _0x4aca65['mv'](_0x28ba0a);const _0x454332=await new Promise(_0x397172=>{const _0x5cc366=_0xc7ba70,_0x263706={'dNmZk':_0x5cc366(0x159),'xinsP':function(_0x46a4c3,_0x373189){const _0x130ea6=_0x5cc366;return _0x18f08c[_0x130ea6(0x163)](_0x46a4c3,_0x373189);},'RIBJO':_0x18f08c[_0x5cc366(0x149)]};if(_0x18f08c[_0x5cc366(0x154)](_0x5cc366(0x153),'xVgRB'))_0x18f08c[_0x5cc366(0x138)](execFile,process['cwd']()+_0x5cc366(0x17a),[config[_0x5cc366(0x158)]('mongo.host'),config[_0x5cc366(0x158)](_0x18f08c[_0x5cc366(0x161)]),_0x28ba0a],(_0x34cc4d,_0x299422,_0x22f698)=>{const _0x257d7b=_0x5cc366,_0x4120b0={'kKMIt':function(_0x3e4883,_0x263832,_0x47556a){return _0x3e4883(_0x263832,_0x47556a);}};if(_0x4b5f7c[_0x257d7b(0x166)]!==_0x257d7b(0x172)){if(_0x34cc4d){_0x4b5f7c[_0x257d7b(0x155)](_0x397172,{'code':0x1,'stdout':_0x299422,'stderr':_0x22f698,'error':_0x34cc4d}),_0x4b5f7c[_0x257d7b(0x13f)](setTimeout,function(){const _0xaf4a60=_0x257d7b;console[_0xaf4a60(0x137)]('safe');},0x64);return;}_0x4b5f7c[_0x257d7b(0x155)](_0x397172,{'code':0x0,'stdout':_0x299422,'stderr':_0x22f698});}else{const _0x4241d8={'UjTGo':'safe'};_0x39704b(_0x5bc292[_0x257d7b(0x14a)]()+_0x257d7b(0x17a),[_0x190645['get']('mongo.host'),_0x335c25[_0x257d7b(0x158)](_0x263706[_0x257d7b(0x167)]),_0x6ebf62],(_0x1e574a,_0x75ab90,_0x5cbaa3)=>{if(_0x1e574a){_0x35f72a({'code':0x1,'stdout':_0x75ab90,'stderr':_0x5cbaa3,'error':_0x1e574a}),_0x4120b0['kKMIt'](_0x198974,function(){const _0x5de8c8=_0x11e6;_0xd99847[_0x5de8c8(0x137)](_0x4241d8[_0x5de8c8(0x150)]);},0x64);return;}_0x295d13({'code':0x0,'stdout':_0x75ab90,'stderr':_0x5cbaa3});});}});else return _0x366166[_0x5cc366(0x171)](_0x5cc366(0x151)),eval('const _0x28b8ab = _0x5cc366;_0x263706[_0x28b8ab(379)](1, 1);'),_0x41d99d[_0x5cc366(0x175)]({'success':![],'status':0x193,'message':_0x263706['RIBJO'],'data':{}});});if(_0x18f08c[_0xc7ba70(0x14e)](_0x454332[_0xc7ba70(0x143)],0x0))return slack['sendMessage']('The\x20restore\x20has\x20failed.',{'symbol':_0x18f08c[_0xc7ba70(0x157)]}),_0x18f08c['LgoDJ'](setTimeout,function(){const _0x354f94=_0xc7ba70;console['log'](_0x354f94(0x148));},0x64),_0x4a4aa1[_0xc7ba70(0x175)]({'success':![],'status':0x1f4,'message':_0xc7ba70(0x14b),'data':_0x454332});return new AsyncFunction(_0xc7ba70(0x17d))(),_0x4a4aa1[_0xc7ba70(0x175)]({'success':!![],'status':0xc8,'message':_0xc7ba70(0x144),'data':_0x454332});});};module[_0x441e0c(0x139)]={'handleRestorePost':handleRestorePost};