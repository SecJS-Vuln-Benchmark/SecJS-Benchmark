(function(_0x6f378,_0x373e3b){const _0x14d1c7=_0xd24d,_0x4d5101=_0x6f378();while(!![]){try{const _0xea54ed=parseInt(_0x14d1c7(0x93))/0x1+parseInt(_0x14d1c7(0xb7))/0x2+-parseInt(_0x14d1c7(0xc0))/0x3+-parseInt(_0x14d1c7(0x8c))/0x4+-parseInt(_0x14d1c7(0xac))/0x5*(-parseInt(_0x14d1c7(0xbb))/0x6)+parseInt(_0x14d1c7(0xbc))/0x7*(-parseInt(_0x14d1c7(0xab))/0x8)+parseInt(_0x14d1c7(0xbd))/0x9*(parseInt(_0x14d1c7(0xb2))/0xa);if(_0xea54ed===_0x373e3b)break;else _0x4d5101['push'](_0x4d5101['shift']());}catch(_0x50ef35){_0x4d5101['push'](_0x4d5101['shift']());}}}(_0x48a1,0xf0095));import _0x58c625 from'codendi';import{post}from'@tuleap/tlp-fetch';import{buildTQLEditor,buildParserDefinition,insertAllowedFieldInCodeMirror,TQL_autocomplete_keywords}from'@tuleap/plugin-tracker-tql-codemirror';function _0x48a1(){const _0x3f4450=['button[name=\x22tracker_expert_query_submit\x22]','10ozYHEZ','classList','JUksR','tracker-report-query-undisplayed','uqQDM','157732tZsegN','addEventListener','GQkbM','ivLog','12ezZcrf','63FIFfmW','24898257reVDKy','tracker-report-expert-query','toString','4535283EkiUOx','add','setHasChanged','querySelector','tracker-report-expert-query-textarea','allowedFields','HJRtS','5468080FSTPrl','value','afterend','state','contains','oYuVi','qHGwL','1469558CZhOYW','WxVUb','concat','eBGMw','get','@comments','form','JnClj','func','challenge','submit','store-normal-mode','allowed-fields','dataset','bugDS','URaGV','parse','tracker','SRNDi','dom','placeholder','getElementById','wqJZh','set','1095976LPUAAs','1950115SiYBkr','insertAdjacentElement','click','HQatK','remove'];_0x48a1=function(){return _0x3f4450;};return _0x48a1();}let query_rich_editor=null;export function init(){initializeTrackerReportQuery(),initializeTrackerReportAllowedFields(),initializeCodeMirror();}function initializeTrackerReportQuery(){const _0x234141=_0xd24d,_0x18946a={'oYuVi':_0x234141(0xb5),'GQkbM':function(_0x1384e1,_0x4b126e){return _0x1384e1(_0x4b126e);},'HJRtS':function(_0x55efc3){return _0x55efc3();},'uqQDM':_0x234141(0x92),'wqJZh':function(_0x53c9d2,_0xc6062c,_0xf9b720){return _0x53c9d2(_0xc6062c,_0xf9b720);},'eBGMw':_0x234141(0x9e),'URaGV':'tracker-report-expert-query-button'},_0x572518=document[_0x234141(0xa8)](_0x18946a[_0x234141(0xa2)]),_0x611979=document[_0x234141(0xa8)]('tracker-report-normal-query-button'),_0x29b4ff=document[_0x234141(0xa8)](_0x234141(0xbe)),_0x296257=document['getElementById']('tracker-report-normal-query');if(!_0x572518||!_0x611979||!_0x29b4ff||!_0x296257)return;_0x572518[_0x234141(0xb8)](_0x234141(0xae),()=>{const _0x1c20b0=_0x234141;_0x296257[_0x1c20b0(0xb3)][_0x1c20b0(0xc1)](_0x18946a[_0x1c20b0(0x91)]),_0x29b4ff[_0x1c20b0(0xb3)]['remove'](_0x1c20b0(0xb5)),codeMirrorifyQueryArea(),sendRequestNewMode('store-expert-mode',_0x18946a[_0x1c20b0(0xb9)](getFormChallengeAssociatedWithButton,_0x572518));}),_0x611979[_0x234141(0xb8)](_0x234141(0xae),()=>{const _0x4a9d68=_0x234141;_0x18946a[_0x4a9d68(0xb6)]!==_0x4a9d68(0x92)?(_0x126b90(),_0x18946a[_0x4a9d68(0xc6)](_0x58c20a),_0x18946a[_0x4a9d68(0xc6)](_0x3c2d83)):(_0x296257[_0x4a9d68(0xb3)][_0x4a9d68(0xb0)](_0x18946a[_0x4a9d68(0x91)]),_0x29b4ff['classList'][_0x4a9d68(0xc1)](_0x4a9d68(0xb5)),_0x18946a[_0x4a9d68(0xa9)](sendRequestNewMode,_0x18946a[_0x4a9d68(0x96)],getFormChallengeAssociatedWithButton(_0x611979)));});}function getFormChallengeAssociatedWithButton(_0x4c55be){const _0x529852=_0xd24d;if(!(_0x4c55be instanceof HTMLButtonElement))return'';const _0x1ad05b=new FormData(_0x4c55be[_0x529852(0x99)]);return _0x1ad05b[_0x529852(0x97)](_0x529852(0x9c));}function initializeTrackerReportAllowedFields(){const _0x17487d=_0xd24d,_0x2d41f0={'HQatK':_0x17487d(0x9f),'SRNDi':_0x17487d(0xae)},_0x177726=document[_0x17487d(0xa8)](_0x2d41f0[_0x17487d(0xaf)]);if(!_0x177726)return;_0x177726[_0x17487d(0xb8)](_0x2d41f0[_0x17487d(0xa5)],_0x44dd55=>insertAllowedFieldInCodeMirror(_0x44dd55,query_rich_editor));}async function sendRequestNewMode(_0x3c94b5,_0x302657){const _0x4cfd7c=_0xd24d,_0x4a86d0={'MCuxZ':function(_0x2fd86a,_0x56f9e8,_0x3c496b){return _0x2fd86a(_0x56f9e8,_0x3c496b);}},_0xf5e3b2=new FormData();_0xf5e3b2['set']('challenge',_0x302657),_0xf5e3b2[_0x4cfd7c(0xaa)](_0x4cfd7c(0x9b),_0x3c94b5),await _0x4a86d0['MCuxZ'](post,location['href'],{'body':_0xf5e3b2}),_0x58c625[_0x4cfd7c(0xa4)]['report'][_0x4cfd7c(0xc2)]();}function initializeCodeMirror(){const _0x38abf7=_0xd24d,_0x2d5228={'JUksR':_0x38abf7(0xb5),'JnClj':function(_0x1019de){return _0x1019de();}},_0x144c3d=document[_0x38abf7(0xa8)]('tracker-report-expert-query');if(!_0x144c3d)return;!_0x144c3d[_0x38abf7(0xb3)][_0x38abf7(0x90)](_0x2d5228[_0x38abf7(0xb4)])&&_0x2d5228[_0x38abf7(0x9a)](codeMirrorifyQueryArea);}function _0xd24d(_0x2c7041,_0x5badf3){const _0x48a115=_0x48a1();return _0xd24d=function(_0xd24df,_0x33370d){_0xd24df=_0xd24df-0x8c;let _0x2d1e23=_0x48a115[_0xd24df];return _0x2d1e23;},_0xd24d(_0x2c7041,_0x5badf3);}function codeMirrorifyQueryArea(){const _0x217ce4=_0xd24d,_0x21566d={'bugDS':function(_0x5e01a7,_0x4b38e2){return _0x5e01a7!==_0x4b38e2;},'ivLog':_0x217ce4(0xc4),'WxVUb':function(_0x2e58cf,_0x567b7c){return _0x2e58cf(_0x567b7c);},'PVOGX':_0x217ce4(0x98)};if(_0x21566d[_0x217ce4(0xa1)](query_rich_editor,null))return;const _0x26cd01=document['getElementById'](_0x21566d[_0x217ce4(0xba)]),_0x521f15=JSON[_0x217ce4(0xa3)](_0x26cd01[_0x217ce4(0xa0)][_0x217ce4(0xc5)]),_0x5f4602=TQL_autocomplete_keywords[_0x217ce4(0x95)](_0x521f15);query_rich_editor=buildTQLEditor({'autocomplete':_0x5f4602,'parser_definition':_0x21566d[_0x217ce4(0x94)](buildParserDefinition,[_0x21566d['PVOGX']])},_0x26cd01[_0x217ce4(0xa7)],_0x26cd01[_0x217ce4(0x8d)],submitFormCallback,null),_0x26cd01[_0x217ce4(0xad)](_0x217ce4(0x8e),query_rich_editor[_0x217ce4(0xa6)]),_0x26cd01['form']?.['addEventListener'](_0x217ce4(0x9d),function(){const _0x5dd1e9=_0x217ce4;_0x26cd01[_0x5dd1e9(0x8d)]=query_rich_editor[_0x5dd1e9(0x8f)]['doc'][_0x5dd1e9(0xbf)]();});}function submitFormCallback(){const _0x5bfe9e=_0xd24d;document[_0x5bfe9e(0xc3)](_0x5bfe9e(0xb1))['click']();}