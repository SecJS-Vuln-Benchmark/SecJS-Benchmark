const _0x3af1ab=_0x3870;(function(_0x1c0b76,_0x48e8e0){const _0x5f1a72=_0x3870,_0x46db83=_0x1c0b76();while(!![]){try{const _0x3c971d=-parseInt(_0x5f1a72(0xdf))/0x1+-parseInt(_0x5f1a72(0xe9))/0x2*(-parseInt(_0x5f1a72(0xd2))/0x3)+-parseInt(_0x5f1a72(0xcc))/0x4+-parseInt(_0x5f1a72(0xe3))/0x5*(parseInt(_0x5f1a72(0xe7))/0x6)+parseInt(_0x5f1a72(0xe6))/0x7*(-parseInt(_0x5f1a72(0xee))/0x8)+parseInt(_0x5f1a72(0xd6))/0x9*(parseInt(_0x5f1a72(0xe0))/0xa)+-parseInt(_0x5f1a72(0xf2))/0xb*(-parseInt(_0x5f1a72(0xd3))/0xc);if(_0x3c971d===_0x48e8e0)break;else _0x46db83['push'](_0x46db83['shift']());}catch(_0x35b2c5){_0x46db83['push'](_0x46db83['shift']());}}}(_0x5531,0x1b288));function _0x3870(_0xd74bf2,_0x458ef0){const _0x55313b=_0x5531();return _0x3870=function(_0x3870e6,_0x3a94bb){_0x3870e6=_0x3870e6-0xcc;let _0x88a86c=_0x55313b[_0x3870e6];return _0x88a86c;},_0x3870(_0xd74bf2,_0x458ef0);}const {Keyv}=require('keyv'),express=require(_0x3af1ab(0xd4)),{MeiliSearch}=require(_0x3af1ab(0xce)),{Conversation}=require(_0x3af1ab(0xf4)),requireJwtAuth=require(_0x3af1ab(0xd7)),{Message}=require(_0x3af1ab(0xdd)),{isEnabled}=require(_0x3af1ab(0xeb)),keyvRedis=require(_0x3af1ab(0xdc)),router=express[_0x3af1ab(0xd1)](),expiration=0x3c*0x3e8,cache=isEnabled(process[_0x3af1ab(0xef)][_0x3af1ab(0xda)])?new Keyv({'store':keyvRedis}):new Keyv({'namespace':_0x3af1ab(0xcf),'ttl':expiration});router[_0x3af1ab(0xd8)](requireJwtAuth),router[_0x3af1ab(0xd5)](_0x3af1ab(0xde),async function(_0x5b441a,_0x128618){const _0x194181=_0x3af1ab,_0x3a46a6={'hOfzQ':_0x194181(0xe1)};await Message[_0x194181(0xdb)](),await Conversation['syncWithMeili'](),_0x128618[_0x194181(0xec)](_0x3a46a6[_0x194181(0xf3)]);}),router['get'](_0x3af1ab(0xf1),async function(_0x34e19c,_0x3d14e7){const _0x1bb7bf=_0x3af1ab,_0x5f1c4d={'CGsxl':'text'},{q:_0x3ab13e}=_0x34e19c['query'],_0x381a24=(await Message[_0x1bb7bf(0xed)](_0x3ab13e,{'attributesToHighlight':[_0x5f1c4d[_0x1bb7bf(0xd9)]]},!![]))[_0x1bb7bf(0xe5)][_0x1bb7bf(0xe4)](_0x443bb4=>{const _0x319f6f=_0x1bb7bf,{_formatted:_0x2e5f1a,..._0x51caac}=_0x443bb4;return{..._0x51caac,'searchResult':!![],'text':_0x2e5f1a[_0x319f6f(0xf0)]};});_0x3d14e7[_0x1bb7bf(0xec)](_0x381a24);}),router['get'](_0x3af1ab(0xea),async function(_0x4558b4,_0x48d2e7){const _0x8370fd=_0x3af1ab,_0x3d2def={'sAEwM':_0x8370fd(0xd0)};let _0x205aef=![];try{const _0x44adae=new MeiliSearch({'host':process['env'][_0x8370fd(0xe2)],'apiKey':process[_0x8370fd(0xef)]['MEILI_MASTER_KEY']}),{status:_0x25bbb9}=await _0x44adae[_0x8370fd(0xe8)]();return _0x205aef=_0x25bbb9===_0x3d2def[_0x8370fd(0xcd)]&&!!process['env']['SEARCH'],_0x48d2e7[_0x8370fd(0xec)](_0x205aef);}catch(_0x438f3f){return _0x48d2e7['send'](![]);}}),module['exports']=router;function _0x5531(){const _0x45bb68=['~/models/Message','/sync','120579tFQytS','10WGsUBQ','synced','MEILI_HOST','5aypzyy','map','hits','2177SWIAgr','1097082UNJlCX','health','2RobafM','/enable','~/server/utils','send','meiliSearch','5608GBYtpO','env','text','/test','5038143kVGlum','hOfzQ','~/models/Conversation','192392cbbGYL','sAEwM','meilisearch','search','available','Router','584385dILvEm','12jcgTBZ','express','get','251703Cvkreb','~/server/middleware/requireJwtAuth','use','CGsxl','USE_REDIS','syncWithMeili','~/cache/keyvRedis'];_0x5531=function(){return _0x45bb68;};return _0x5531();}