const _0x4bf6b6=_0x1075;function _0x44cd(){const _0x248f75=['2052015WhGNXl','~/server/services/Files/strategies','pYkub','error','user','4604388gtGTqV','exports','app','post','694852GneEgF','296474TrTrYC','locals','3712986YvMdZa','express','body','~/config','input','fFVmq','An\x20error\x20occurred\x20while\x20uploading\x20the\x20profile\x20picture','Router','588014aRghcR','64NbYOOn','20583ggfkxv','multer','file','126AKSjEC','json','aRkWX','~/server/services/Files/images/avatar','User\x20ID\x20is\x20undefined'];_0x44cd=function(){return _0x248f75;};return _0x44cd();}(function(_0x32232f,_0x1e5432){const _0x345e87=_0x1075,_0x3834e7=_0x32232f();while(!![]){try{const _0x1036ee=parseInt(_0x345e87(0xae))/0x1+parseInt(_0x345e87(0xbd))/0x2*(-parseInt(_0x345e87(0xba))/0x3)+-parseInt(_0x345e87(0xad))/0x4+parseInt(_0x345e87(0xc2))/0x5+-parseInt(_0x345e87(0xa9))/0x6+-parseInt(_0x345e87(0xb8))/0x7*(-parseInt(_0x345e87(0xb9))/0x8)+parseInt(_0x345e87(0xb0))/0x9;if(_0x1036ee===_0x1e5432)break;else _0x3834e7['push'](_0x3834e7['shift']());}catch(_0x287c71){_0x3834e7['push'](_0x3834e7['shift']());}}}(_0x44cd,0x6612d));function _0x1075(_0x11573a,_0x4b5ebe){const _0x44cd29=_0x44cd();return _0x1075=function(_0x107508,_0x44a133){_0x107508=_0x107508-0xa6;let _0x6b7e66=_0x44cd29[_0x107508];return _0x6b7e66;},_0x1075(_0x11573a,_0x4b5ebe);}const multer=require(_0x4bf6b6(0xbb)),express=require(_0x4bf6b6(0xb1)),{getStrategyFunctions}=require(_0x4bf6b6(0xc3)),{resizeAvatar}=require(_0x4bf6b6(0xc0)),{logger}=require(_0x4bf6b6(0xb3)),upload=multer(),router=express[_0x4bf6b6(0xb7)]();router[_0x4bf6b6(0xac)]('/',upload['single'](_0x4bf6b6(0xb4)),async(_0x3fc34f,_0xc0e716)=>{const _0x4bcfed=_0x4bf6b6,_0x5bc6da={'yuqpu':_0x4bcfed(0xc1),'pYkub':function(_0x2947ec,_0x46c551){return _0x2947ec(_0x46c551);},'aRkWX':function(_0x192ce2,_0x393558){return _0x192ce2(_0x393558);},'fFVmq':_0x4bcfed(0xb6)};try{const _0x35628e=_0x3fc34f[_0x4bcfed(0xa8)]['id'],{manual:_0x1649ee}=_0x3fc34f[_0x4bcfed(0xb2)],_0x19b711=_0x3fc34f[_0x4bcfed(0xbc)]['buffer'];if(!_0x35628e)throw new Error(_0x5bc6da['yuqpu']);const _0x5f3882=_0x3fc34f[_0x4bcfed(0xab)][_0x4bcfed(0xaf)]['fileStrategy'],_0x164e8e=_0x3fc34f[_0x4bcfed(0xab)]['locals']['imageOutputType'],_0x9e830f=await _0x5bc6da[_0x4bcfed(0xa6)](resizeAvatar,{'userId':_0x35628e,'input':_0x19b711,'desiredFormat':_0x164e8e}),{processAvatar:_0x29cef4}=_0x5bc6da[_0x4bcfed(0xbf)](getStrategyFunctions,_0x5f3882),_0x4e26ca=await _0x29cef4({'buffer':_0x9e830f,'userId':_0x35628e,'manual':_0x1649ee});_0xc0e716[_0x4bcfed(0xbe)]({'url':_0x4e26ca});}catch(_0x43bae6){const _0x21e45f=_0x5bc6da[_0x4bcfed(0xb5)];logger[_0x4bcfed(0xa7)](_0x21e45f,_0x43bae6),_0xc0e716['status'](0x1f4)['json']({'message':_0x21e45f});}}),module[_0x4bf6b6(0xaa)]=router;