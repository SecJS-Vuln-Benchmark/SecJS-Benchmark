function _0x1e60(_0x44ca38,_0x3c092d){const _0x571430=_0x5714();return _0x1e60=function(_0x1e60bb,_0x5bf4ca){_0x1e60bb=_0x1e60bb-0x10a;let _0x11fb40=_0x571430[_0x1e60bb];return _0x11fb40;},_0x1e60(_0x44ca38,_0x3c092d);}function _0x5714(){const _0x7439d9=['RvIII','465396MrScBq','firstChild','hiddenField','input','1503qdBWcG','saveButton','length','\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22\x22\x20alt=\x22','addEventListener','console.log(\x22timer\x22);','</div>\x0a\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>','bDpuz','remove','return\x20await\x20Promise.resolve(42);','\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>','HwKYz','button[data-dropzone-cancel]','nKOux','fPrbv','checked','createElement','dialogOpen','uploadFile','locales','\x22]\x20progress','<li>','lzsvC','div','[data-dropzone]','push','removable','click','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','from','label','textContent','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>','img','10LVDGzE','validated','cleanAllFiles','204842TXfCET','</ul>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','test','\x20data-filename=\x22','attachmentCounter','chsNT','siHYO','directUploadUrl','button','updateDropZone','3913268vYuzMK','validation_error','pblZW','YjNNC','children','hidden','replaceChild','data-attachment-id=\x22','JJAVD','bind','assign','disabled','SJBcq','dRIEN','removeAttribute','\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20<span>','dropZone','nextElementSibling','\x0a\x20\x20\x20\x20\x20\x20<li\x20','903025vIIfnT','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>','[data-dialog-title]','\x22\x20data-state=\x22','is-disabled','createUploadItem','error','innerHTML','4462bGwsMf','modal','classList','src','ERROR','setAttribute','options','dataset','</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','title','updateAddAttachmentsButton','hvgxS','onload','QDLVN','titled','add','errors','map','querySelector','image','preloadFiles','238fwrqWS','[data-dropzone-items]','autoloadImage','10921590HrNZsd','uploadItems','upload','signed_id','224872EEEpNw','attachmentId','appendChild','QQSBT','uploadFiles','name','button[data-dropzone-save]','ESOSd','emptyItems','setProgressBar','items','value','then','[data-dropzone-no-items]','cancelButton','[data-filename]','VfbKJ','modalTitle','\x22></progress>\x0a\x20\x20\x20\x20\x20\x20</li>','cIVWv','1560supgCC','iQZDL','\x0a\x20\x20\x20\x20\x20\x20<div>','closest','parse','zdanN','join','UGlTv','type','editlabel'];_0x5714=function(){return _0x7439d9;};return _0x5714();}const _0x3008a5=_0x1e60;(function(_0x4233ff,_0x11dcc1){const _0x5e2bf2=_0x1e60,_0x11a53b=_0x4233ff();while(!![]){try{const _0x51855d=-parseInt(_0x5e2bf2(0x161))/0x1+-parseInt(_0x5e2bf2(0x169))/0x2*(-parseInt(_0x5e2bf2(0x11e))/0x3)+parseInt(_0x5e2bf2(0x14e))/0x4+parseInt(_0x5e2bf2(0x141))/0x5*(parseInt(_0x5e2bf2(0x11a))/0x6)+-parseInt(_0x5e2bf2(0x17e))/0x7*(-parseInt(_0x5e2bf2(0x185))/0x8)+parseInt(_0x5e2bf2(0x181))/0x9+-parseInt(_0x5e2bf2(0x10f))/0xa*(parseInt(_0x5e2bf2(0x144))/0xb);if(_0x51855d===_0x11dcc1)break;else _0x11a53b['push'](_0x11a53b['shift']());}catch(_0x302f87){_0x11a53b['push'](_0x11a53b['shift']());}}}(_0x5714,0x957f3));import{Uploader}from'src/decidim/direct_uploads/redesigned_uploader';import _0x59b786 from'src/decidim/redesigned_icon';import{truncateFilename}from'src/decidim/direct_uploads/upload_utility';const STATUS={'VALIDATED':_0x3008a5(0x142),'ERROR':_0x3008a5(0x167)};export default class UploadModal{constructor(_0x125ca6,_0x282683={}){const _0x44332e=_0x3008a5;this[_0x44332e(0x14c)]=_0x125ca6;let _0x5978aa={};try{_0x5978aa=JSON[_0x44332e(0x113)](_0x125ca6[_0x44332e(0x170)][_0x44332e(0x183)]);}catch(_0x4fc558){}this['options']=Object[_0x44332e(0x158)](_0x5978aa,_0x282683),this[_0x44332e(0x16a)]=document['querySelector']('#'+_0x125ca6['dataset'][_0x44332e(0x130)]),this[_0x44332e(0x11f)]=this[_0x44332e(0x16a)][_0x44332e(0x17b)](_0x44332e(0x18b)),this[_0x44332e(0x193)]=this[_0x44332e(0x16a)][_0x44332e(0x17b)](_0x44332e(0x12b)),this[_0x44332e(0x10c)]=this[_0x44332e(0x16a)][_0x44332e(0x17b)](_0x44332e(0x163)),this[_0x44332e(0x15e)]=this[_0x44332e(0x16a)]['querySelector'](_0x44332e(0x137)),this[_0x44332e(0x18d)]=this[_0x44332e(0x16a)]['querySelector'](_0x44332e(0x192)),this[_0x44332e(0x182)]=this[_0x44332e(0x16a)]['querySelector'](_0x44332e(0x17f)),this[_0x44332e(0x11d)]=this[_0x44332e(0x15e)]['querySelector'](_0x44332e(0x11d)),this['items']=[],this[_0x44332e(0x148)]=0x0,this[_0x44332e(0x132)]=JSON[_0x44332e(0x113)](this[_0x44332e(0x182)][_0x44332e(0x170)][_0x44332e(0x132)]),this[_0x44332e(0x14d)]();}[_0x3008a5(0x189)](_0x454668){const _0x67aeb5=_0x3008a5,_0x333e20={'ESOSd':'img','SJBcq':function(_0x5ddc2e,_0x493ca0){return _0x5ddc2e!==_0x493ca0;},'zdanN':_0x67aeb5(0x15b)};if(this[_0x67aeb5(0x16f)]['multiple']){if(_0x333e20[_0x67aeb5(0x15a)](_0x333e20[_0x67aeb5(0x114)],_0x333e20[_0x67aeb5(0x114)])){const _0x2c82c2=_0x284c7a[_0x67aeb5(0x17b)](_0x333e20[_0x67aeb5(0x18c)]);_0x2c82c2[_0x67aeb5(0x16c)]=_0x446de1;}else Array[_0x67aeb5(0x13c)](_0x454668)['forEach'](_0x13f3ff=>this[_0x67aeb5(0x131)](_0x13f3ff));}else!this['uploadItems'][_0x67aeb5(0x152)][_0x67aeb5(0x120)]&&this[_0x67aeb5(0x131)](_0x454668[0x0]);}[_0x3008a5(0x131)](_0x33ea4c){const _0x4750fc=_0x3008a5,_0x4107d0={'lzsvC':_0x4750fc(0x188)},_0x42de7a=new Uploader(this,{'file':_0x33ea4c,'url':this[_0x4750fc(0x11d)][_0x4750fc(0x170)][_0x4750fc(0x14b)],'attachmentName':_0x33ea4c[_0x4750fc(0x18a)]}),_0x5a6244=this[_0x4750fc(0x166)](_0x33ea4c,_0x42de7a[_0x4750fc(0x179)]);this[_0x4750fc(0x182)][_0x4750fc(0x187)](_0x5a6244),_0x42de7a[_0x4750fc(0x179)][_0x4750fc(0x120)]?this[_0x4750fc(0x14d)]():_0x42de7a[_0x4750fc(0x183)]['create']((_0x2763c7,_0x217349)=>{const _0x23ba0f=_0x4750fc;_0x2763c7?_0x42de7a[_0x23ba0f(0x179)]=[_0x2763c7]:(_0x33ea4c[_0x23ba0f(0x11c)]=_0x217349['signed_id'],_0x42de7a['validate'](_0x217349[_0x23ba0f(0x184)])[_0x23ba0f(0x191)](()=>{const _0x3ae20b=_0x23ba0f;_0x42de7a[_0x3ae20b(0x179)]['length']?this['uploadItems'][_0x3ae20b(0x154)](this[_0x3ae20b(0x166)](_0x33ea4c,_0x42de7a['errors'],{'value':0x64}),_0x5a6244):_0x4107d0[_0x3ae20b(0x135)]===_0x3ae20b(0x188)?(this[_0x3ae20b(0x18f)][_0x3ae20b(0x138)](_0x33ea4c),this[_0x3ae20b(0x180)](_0x5a6244,_0x33ea4c)):this['uploadItems'][_0x3ae20b(0x17b)]('[data-filename=\x22'+_0x134bcd+_0x3ae20b(0x133))[_0x3ae20b(0x190)]=_0x50830a,this['updateDropZone']();}));});}[_0x3008a5(0x180)](_0x8c642a,_0x5e8a3d){const _0x313a74=_0x3008a5,_0xa68fb4={'VfbKJ':_0x313a74(0x140)};if(!/image/[_0x313a74(0x146)](_0x5e8a3d[_0x313a74(0x117)])){eval('Math[\'PI\'] * 2;');return;}const _0x375653=new FileReader();_0x375653['readAsDataURL'](_0x5e8a3d),_0x375653[_0x313a74(0x175)]=({target:{result:_0x5ff4fc}})=>{const _0x465861=_0x313a74,_0x56826e={'buWfU':_0x465861(0x177)};if(_0x465861(0x176)!==_0x465861(0x176))_0x1ead07=_0x3c5575,_0x39563d=_0x56826e['buWfU'];else{const _0x2ada33=_0x8c642a['querySelector'](_0xa68fb4[_0x465861(0x10b)]);_0x2ada33[_0x465861(0x16c)]=_0x5ff4fc;}};}async[_0x3008a5(0x17d)](_0x16bf1f){const _0xced823=_0x3008a5,_0x322216={'bDpuz':function(_0x54665a,_0x324ef5){return _0x54665a*_0x324ef5;},'UGlTv':_0xced823(0x140),'JJAVD':'pblZW','nKOux':function(_0x1ae08d,_0x4e87cf){return _0x1ae08d(_0x4e87cf);},'HwKYz':_0xced823(0x17c)},{src:_0x3a98ab}=_0x16bf1f[_0xced823(0x17b)](_0x322216[_0xced823(0x116)])||{};let _0x5a7c64='',_0x6cf588='';if(_0x3a98ab){if(_0x322216[_0xced823(0x156)]===_0xced823(0x150))_0x5a7c64=await _0x322216[_0xced823(0x12c)](fetch,_0x3a98ab)[_0xced823(0x191)](_0x3d74bc=>_0x3d74bc['arrayBuffer']()),_0x6cf588=_0x322216[_0xced823(0x12a)];else{eval('const _0x2b5758 = _0xced823;_0x322216[_0x2b5758(294)](_0x41cb01[\'PI\'], 2);');return;}}const _0x1689b5=new File([_0x5a7c64],_0x16bf1f['dataset']['filename'],{'type':_0x6cf588}),_0x3e36a4=this['createUploadItem'](_0x1689b5,[],{..._0x16bf1f[_0xced823(0x170)],'value':0x64});_0x1689b5[_0xced823(0x186)]=_0x16bf1f['dataset'][_0xced823(0x186)],this[_0xced823(0x18f)][_0xced823(0x138)](_0x1689b5),this[_0xced823(0x182)]['appendChild'](_0x3e36a4),this[_0xced823(0x180)](_0x3e36a4,_0x1689b5);}['getOrdinalNumber'](){const _0xcd6671=_0x3008a5,_0x3ba61a=this[_0xcd6671(0x148)];return this['attachmentCounter']+=0x1,new AsyncFunction(_0xcd6671(0x128))(),_0x3ba61a;}['updateDropZone'](){const _0x53541c=_0x3008a5,_0x17809d={'fPrbv':function(_0x281c1e,_0x1bb216){return _0x281c1e>_0x1bb216;},'siHYO':_0x53541c(0x165),'hvgxS':_0x53541c(0x13d)},{children:_0x131deb}=this['uploadItems'],_0x85e895=_0x131deb[_0x53541c(0x120)]>0x0;this[_0x53541c(0x182)][_0x53541c(0x153)]=!_0x85e895,this[_0x53541c(0x11f)]['disabled']=_0x17809d[_0x53541c(0x12d)](Array[_0x53541c(0x13c)](_0x131deb)['filter'](({dataset:{state:_0x26184d}})=>_0x26184d===STATUS[_0x53541c(0x16d)])[_0x53541c(0x120)],0x0);const _0x3bd239=!_0x131deb[_0x53541c(0x120)]||this[_0x53541c(0x16f)]['multiple'];this[_0x53541c(0x11d)][_0x53541c(0x159)]=!_0x3bd239,_0x3bd239?(this[_0x53541c(0x18d)][_0x53541c(0x16b)]['remove'](_0x17809d[_0x53541c(0x14a)]),this[_0x53541c(0x18d)][_0x53541c(0x17b)](_0x17809d[_0x53541c(0x174)])[_0x53541c(0x15c)](_0x53541c(0x159))):(this[_0x53541c(0x18d)][_0x53541c(0x16b)][_0x53541c(0x178)](_0x53541c(0x165)),this[_0x53541c(0x18d)][_0x53541c(0x17b)](_0x53541c(0x13d))[_0x53541c(0x16e)](_0x53541c(0x159),!![]));}['createUploadItem'](_0x172256,_0x5700be,_0x41086e={}){const _0x4401bf=_0x3008a5,_0x511470={'iQZDL':function(_0x398d48,_0x3687cd){return _0x398d48(_0x3687cd);},'RvIII':_0x4401bf(0x177),'YjNNC':'button','chsNT':function(_0x474d84,_0x11fa6f,_0x12c25c){return _0x474d84(_0x11fa6f,_0x12c25c);}},_0x241f6d=_0x4401bf(0x122)+_0x172256[_0x4401bf(0x18a)]+_0x4401bf(0x15d)+truncateFilename(_0x172256['name'])+'</span>\x0a\x20\x20\x20\x20',_0x5adbf8=_0x4401bf(0x111)+_0x59b786('error-warning-line')+_0x4401bf(0x125)+_0x511470[_0x4401bf(0x110)](truncateFilename,_0x172256['name'])+_0x4401bf(0x13f)+this[_0x4401bf(0x132)][_0x4401bf(0x14f)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<ul>'+_0x5700be[_0x4401bf(0x17a)](_0x5acebb=>_0x4401bf(0x134)+_0x5acebb+'</li>')[_0x4401bf(0x115)]('\x0a')+_0x4401bf(0x145),_0x114178=_0x4401bf(0x122)+_0x172256[_0x4401bf(0x18a)]+_0x4401bf(0x129)+this[_0x4401bf(0x132)]['filename']+_0x4401bf(0x171)+_0x511470[_0x4401bf(0x110)](truncateFilename,_0x172256[_0x4401bf(0x18a)])+_0x4401bf(0x162)+this[_0x4401bf(0x132)][_0x4401bf(0x172)]+'</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20class=\x22sm\x22\x20type=\x22text\x22\x20value=\x22'+(_0x41086e['title']||truncateFilename(_0x172256[_0x4401bf(0x18a)]))+_0x4401bf(0x121);let _0x1e2012=STATUS['VALIDATED'],_0x161183=_0x241f6d,_0xc6d4da='ok';_0x5700be['length']&&(_0x1e2012=STATUS[_0x4401bf(0x16d)],_0x161183=_0x5adbf8,_0xc6d4da='error');!_0x5700be[_0x4401bf(0x120)]&&this['options'][_0x4401bf(0x177)]&&(_0x161183=_0x114178,_0xc6d4da=_0x511470[_0x4401bf(0x119)]);const _0x4140a8=_0x41086e[_0x4401bf(0x186)]?_0x4401bf(0x155)+_0x41086e[_0x4401bf(0x186)]+'\x22':'',_0x4e4a19=_0x4401bf(0x160)+_0x4140a8+_0x4401bf(0x147)+_0x172256[_0x4401bf(0x18a)]+_0x4401bf(0x164)+_0x1e2012+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20data-template=\x22'+_0xc6d4da+_0x4401bf(0x13b)+_0x161183['trim']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button>'+this['locales'][_0x4401bf(0x127)]+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<progress\x20max=\x22100\x22\x20value=\x22'+(_0x41086e[_0x4401bf(0x190)]||0x0)+_0x4401bf(0x10d),_0x51b2a4=document[_0x4401bf(0x12f)](_0x4401bf(0x136));_0x51b2a4[_0x4401bf(0x168)]=_0x4e4a19['trim']();const _0x29c845=_0x51b2a4[_0x4401bf(0x11b)];return _0x29c845[_0x4401bf(0x17b)](_0x511470[_0x4401bf(0x151)])[_0x4401bf(0x123)](_0x4401bf(0x13a),this['handleButtonClick'][_0x4401bf(0x157)](this)),_0x511470[_0x4401bf(0x149)](setTimeout,_0x4401bf(0x124),0x3e8),_0x29c845;}['handleButtonClick']({currentTarget:_0x594b08}){const _0x2e1fb2=_0x3008a5,_0x325457=_0x594b08[_0x2e1fb2(0x112)](_0x2e1fb2(0x10a)),{filename:_0x7f5d10}=_0x325457[_0x2e1fb2(0x170)];_0x325457[_0x2e1fb2(0x127)]();const _0x14e95c=this[_0x2e1fb2(0x18f)]['findIndex'](({name:_0x11a7be})=>_0x11a7be===_0x7f5d10);_0x14e95c>-0x1&&(this['items'][_0x14e95c][_0x2e1fb2(0x139)]=!![]),this[_0x2e1fb2(0x14d)]();}[_0x3008a5(0x18e)](_0x5aee79,_0x3e5f09){const _0x27295c=_0x3008a5;this[_0x27295c(0x182)]['querySelector']('[data-filename=\x22'+_0x5aee79+_0x27295c(0x133))[_0x27295c(0x190)]=_0x3e5f09;}[_0x3008a5(0x173)](){const _0x872c41=_0x3008a5,_0x396eb4={'cIVWv':function(_0x428012,_0xc95882){return _0x428012>_0xc95882;}};this['uploadItems'][_0x872c41(0x152)][_0x872c41(0x120)]===0x0?this[_0x872c41(0x14c)]['innerHTML']=this[_0x872c41(0x10c)][_0x872c41(0x170)]['addlabel']:this[_0x872c41(0x14c)][_0x872c41(0x168)]=this[_0x872c41(0x10c)]['dataset'][_0x872c41(0x118)];const _0x594b6b=this['button'][_0x872c41(0x15f)];_0x594b6b&&(_0x594b6b[_0x872c41(0x12e)]=_0x396eb4[_0x872c41(0x10e)](this[_0x872c41(0x182)][_0x872c41(0x152)][_0x872c41(0x120)],0x0));}[_0x3008a5(0x143)](){const _0x17249d=_0x3008a5;this[_0x17249d(0x18f)]=[],this['uploadItems'][_0x17249d(0x13e)]='',this[_0x17249d(0x14d)]();}}