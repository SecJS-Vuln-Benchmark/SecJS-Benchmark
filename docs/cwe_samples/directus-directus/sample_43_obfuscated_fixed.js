function _0x1f27(_0x10b6b9,_0x3c35c4){const _0x5f35ef=_0x5f35();return _0x1f27=function(_0x1f27a0,_0x39e6d2){_0x1f27a0=_0x1f27a0-0xb2;let _0x434a28=_0x5f35ef[_0x1f27a0];return _0x434a28;},_0x1f27(_0x10b6b9,_0x3c35c4);}const _0x4550aa=_0x1f27;function _0x5f35(){const _0x3cf284=['message_limit','2804240XPPvWm','ROLES','Invalid\x20store\x20key:\x20','BANS','TEN_MINUTES','TOKEN_BALANCE','260633AvjKcy','concurrent','TWO_MINUTES','logins','AUDIO_RUNS','FIVE_MINUTES','145XyLkoC','CONFIG_STORE','GEN_TITLE','ABORT_KEYS','TTS_LIMIT','7268672lrXBLu','Vwnxe','STT_LIMIT','ENCODED_DOMAINS','VERIFY_EMAIL_LIMIT','CONVO_ACCESS','MESSAGES','BAN','./keyvMongo','RESET_PASSWORD_LIMIT','./keyvRedis','8952580Osvtym','exports','MODEL_QUERIES','pending_req','2755233umSavI','3464076pkyblG','violations','./keyvFiles','env','TOKEN_CONFIG','300516DhCSTY','ILLEGAL_MODEL_REQUEST','THIRTY_MINUTES','non_browser','FILE_UPLOAD_LIMIT'];_0x5f35=function(){return _0x3cf284;};return _0x5f35();}(function(_0x4fd13f,_0x524b61){const _0x442e4a=_0x1f27,_0x527d7f=_0x4fd13f();while(!![]){try{const _0x4d8999=parseInt(_0x442e4a(0xcc))/0x1+-parseInt(_0x442e4a(0xc6))/0x2+parseInt(_0x442e4a(0xba))/0x3+-parseInt(_0x442e4a(0xbb))/0x4+parseInt(_0x442e4a(0xd2))/0x5*(parseInt(_0x442e4a(0xc0))/0x6)+parseInt(_0x442e4a(0xb6))/0x7+-parseInt(_0x442e4a(0xd7))/0x8;if(_0x4d8999===_0x524b61)break;else _0x527d7f['push'](_0x527d7f['shift']());}catch(_0xcdec3){_0x527d7f['push'](_0x527d7f['shift']());}}}(_0x5f35,0xb323b));const Keyv=require('keyv'),{CacheKeys,ViolationTypes,Time}=require('librechat-data-provider'),{logFile,violationFile}=require(_0x4550aa(0xbd)),{math,isEnabled}=require('~/server/utils'),keyvRedis=require(_0x4550aa(0xb5)),keyvMongo=require(_0x4550aa(0xb3)),{BAN_DURATION,USE_REDIS}=process['env']??{},duration=math(BAN_DURATION,0x6ddd00),createViolationInstance=_0x2b5589=>{const _0x1e9d03=_0x4550aa,_0x56a104={'Vwnxe':function(_0x39746f,_0xb303c8){return _0x39746f(_0xb303c8);}},_0x403e2f=_0x56a104[_0x1e9d03(0xd8)](isEnabled,USE_REDIS)?{'store':keyvRedis}:{'store':violationFile,'namespace':_0x2b5589};return new Keyv(_0x403e2f);},pending_req=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis}):new Keyv({'namespace':_0x4550aa(0xb9)}),config=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis}):new Keyv({'namespace':CacheKeys[_0x4550aa(0xd3)]}),roles=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis}):new Keyv({'namespace':CacheKeys['ROLES']}),audioRuns=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis,'ttl':Time['TEN_MINUTES']}):new Keyv({'namespace':CacheKeys[_0x4550aa(0xd0)],'ttl':Time[_0x4550aa(0xca)]}),messages=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis,'ttl':Time[_0x4550aa(0xd1)]}):new Keyv({'namespace':CacheKeys['MESSAGES'],'ttl':Time[_0x4550aa(0xd1)]}),tokenConfig=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis,'ttl':Time['THIRTY_MINUTES']}):new Keyv({'namespace':CacheKeys['TOKEN_CONFIG'],'ttl':Time[_0x4550aa(0xc2)]}),genTitle=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis,'ttl':Time[_0x4550aa(0xce)]}):new Keyv({'namespace':CacheKeys[_0x4550aa(0xd4)],'ttl':Time['TWO_MINUTES']}),modelQueries=isEnabled(process[_0x4550aa(0xbe)]['USE_REDIS'])?new Keyv({'store':keyvRedis}):new Keyv({'namespace':CacheKeys[_0x4550aa(0xb8)]}),abortKeys=isEnabled(USE_REDIS)?new Keyv({'store':keyvRedis}):new Keyv({'namespace':CacheKeys['ABORT_KEYS'],'ttl':Time[_0x4550aa(0xca)]}),namespaces={[CacheKeys[_0x4550aa(0xc7)]]:roles,[CacheKeys[_0x4550aa(0xd3)]]:config,'pending_req':pending_req,[ViolationTypes[_0x4550aa(0xb2)]]:new Keyv({'store':keyvMongo,'namespace':CacheKeys[_0x4550aa(0xc9)],'ttl':duration}),[CacheKeys[_0x4550aa(0xda)]]:new Keyv({'store':keyvMongo,'namespace':CacheKeys[_0x4550aa(0xda)],'ttl':0x0}),'general':new Keyv({'store':logFile,'namespace':_0x4550aa(0xbc)}),'concurrent':createViolationInstance(_0x4550aa(0xcd)),'non_browser':createViolationInstance(_0x4550aa(0xc3)),'message_limit':createViolationInstance(_0x4550aa(0xc5)),'token_balance':createViolationInstance(ViolationTypes[_0x4550aa(0xcb)]),'registrations':createViolationInstance('registrations'),[ViolationTypes[_0x4550aa(0xd6)]]:createViolationInstance(ViolationTypes[_0x4550aa(0xd6)]),[ViolationTypes['STT_LIMIT']]:createViolationInstance(ViolationTypes[_0x4550aa(0xd9)]),[ViolationTypes[_0x4550aa(0xdc)]]:createViolationInstance(ViolationTypes[_0x4550aa(0xdc)]),[ViolationTypes[_0x4550aa(0xc4)]]:createViolationInstance(ViolationTypes[_0x4550aa(0xc4)]),[ViolationTypes['VERIFY_EMAIL_LIMIT']]:createViolationInstance(ViolationTypes[_0x4550aa(0xdb)]),[ViolationTypes[_0x4550aa(0xb4)]]:createViolationInstance(ViolationTypes[_0x4550aa(0xb4)]),[ViolationTypes[_0x4550aa(0xc1)]]:createViolationInstance(ViolationTypes[_0x4550aa(0xc1)]),'logins':createViolationInstance(_0x4550aa(0xcf)),[CacheKeys[_0x4550aa(0xd5)]]:abortKeys,[CacheKeys[_0x4550aa(0xbf)]]:tokenConfig,[CacheKeys[_0x4550aa(0xd4)]]:genTitle,[CacheKeys[_0x4550aa(0xb8)]]:modelQueries,[CacheKeys[_0x4550aa(0xd0)]]:audioRuns,[CacheKeys[_0x4550aa(0xdd)]]:messages},getLogStores=_0x46cab8=>{const _0x306a8d=_0x4550aa;if(!_0x46cab8||!namespaces[_0x46cab8])throw new Error(_0x306a8d(0xc8)+_0x46cab8);return namespaces[_0x46cab8];};module[_0x4550aa(0xb7)]=getLogStores;