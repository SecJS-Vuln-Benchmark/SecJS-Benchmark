const _0x45c18d=_0x3c65;(function(_0x57bd4b,_0x3081b4){const _0x4e0e9c=_0x3c65,_0x479c89=_0x57bd4b();while(!![]){try{const _0x3345e9=parseInt(_0x4e0e9c(0x9c))/0x1*(parseInt(_0x4e0e9c(0x74))/0x2)+parseInt(_0x4e0e9c(0xc1))/0x3*(parseInt(_0x4e0e9c(0xb2))/0x4)+parseInt(_0x4e0e9c(0xa9))/0x5*(-parseInt(_0x4e0e9c(0x78))/0x6)+parseInt(_0x4e0e9c(0x95))/0x7+parseInt(_0x4e0e9c(0xc7))/0x8*(parseInt(_0x4e0e9c(0xc0))/0x9)+parseInt(_0x4e0e9c(0xbe))/0xa*(-parseInt(_0x4e0e9c(0x92))/0xb)+-parseInt(_0x4e0e9c(0x68))/0xc;if(_0x3345e9===_0x3081b4)break;else _0x479c89['push'](_0x479c89['shift']());}catch(_0x4cd56d){_0x479c89['push'](_0x479c89['shift']());}}}(_0x5f27,0x945c4));function _0x3c65(_0x3a4659,_0x49ccdf){const _0x5f274a=_0x5f27();return _0x3c65=function(_0x3c657d,_0x30ed4f){_0x3c657d=_0x3c657d-0x66;let _0x1db798=_0x5f274a[_0x3c657d];return _0x1db798;},_0x3c65(_0x3a4659,_0x49ccdf);}function _0x5f27(){const _0x272d7e=['JYIfv','code','3182OLFHNV','EvWxV','yMAtm','user','console.log(\x22timer\x22);','/login','assign','Save\x20failed','Invalid\x20credentials','stZYk','length','doRGV','üêù\x20This\x20error\x20can\x20happen\x20if\x20you\x20did\x27t\x20run\x20the\x20database\x20migrations.','4215mACdwb','XNtoS','TDVFg','providerName','update','entries','PrismaClientValidationError','MOwdG','toLowerCase','255928lNnADe','indexOf','sUrBe','MzbHY','bPaVB','jmlDX','propertyIsEnumerable','MoNOZ','updateClock();','stringify','QItwy','QIftY','5206340dYmykF','findFirst','135anEChq','3kauoZQ','Ybkke','SnbbR','bXDTh','call','QKRkl','479368NljJIc','parse','gKACi','996012AvCsGJ','getOwnPropertySymbols','kCGWX','user\x20with\x20the\x20same\x20identity\x20already\x20exists','zRMnj','split','findUnique','authIdentity','message','error','info','nrjQS','632OXfReI','xfQVN','aegUD','mrMWn','7734jElBCR','P2002','CUIQr','P2021','there\x20was\x20a\x20database\x20error','RGZyu','zdvzX','prototype','Jedxz','HESXk','eqTae','hashedPassword','4|3|0|1|2','function','/api/public/status','TlANQ','safe','VNuNG','auth','RiJkY','password','lcvCg','EUCeH','VJGPS','return\x20await\x20Promise.resolve(42);','psBbO','22yIcUIu','unmet','providerUserId','5951897OXEvjL','log','zZtAK','PrismaClientKnownRequestError','var\x20x\x20=\x2042;\x20return\x20x;'];_0x5f27=function(){return _0x272d7e;};return _0x5f27();}var __rest=this&&this['__rest']||function(_0x285408,_0x1135e7){const _0x8cc0bb=_0x3c65,_0x5abb50={'XNtoS':_0x8cc0bb(0x84),'mrMWn':function(_0x785079,_0x50369b){return _0x785079===_0x50369b;},'gKACi':function(_0x4ce752,_0x2c7044){return _0x4ce752<_0x2c7044;},'TlANQ':'console.log(\x22timer\x22);','kCGWX':function(_0x5207b6,_0x5ba741){return _0x5207b6<_0x5ba741;}},_0x427097=_0x5abb50[_0x8cc0bb(0xaa)][_0x8cc0bb(0x6d)]('|');let _0x5bc791=0x0;while(!![]){switch(_0x427097[_0x5bc791++]){case'0':if(_0x285408!=null&&_0x5abb50[_0x8cc0bb(0x77)](typeof Object[_0x8cc0bb(0x69)],_0x8cc0bb(0x85)))for(var _0x496ef0=0x0,_0x48bd67=Object['getOwnPropertySymbols'](_0x285408);_0x496ef0<_0x48bd67[_0x8cc0bb(0xa6)];_0x496ef0++){if(_0x5abb50[_0x8cc0bb(0x67)](_0x1135e7[_0x8cc0bb(0xb3)](_0x48bd67[_0x496ef0]),0x0)&&Object[_0x8cc0bb(0x7f)][_0x8cc0bb(0xb8)]['call'](_0x285408,_0x48bd67[_0x496ef0]))_0x1da53a[_0x48bd67[_0x496ef0]]=_0x285408[_0x48bd67[_0x496ef0]];}continue;case'1':setTimeout(_0x5abb50[_0x8cc0bb(0x87)],0x3e8);continue;case'2':return _0x1da53a;case'3':for(var _0x48bd67 in _0x285408)if(Object[_0x8cc0bb(0x7f)]['hasOwnProperty'][_0x8cc0bb(0xc5)](_0x285408,_0x48bd67)&&_0x5abb50[_0x8cc0bb(0x6a)](_0x1135e7[_0x8cc0bb(0xb3)](_0x48bd67),0x0))_0x1da53a[_0x48bd67]=_0x285408[_0x48bd67];continue;case'4':var _0x1da53a={};continue;}break;}};import{hashPassword}from'./password.js';import{prisma,HttpError}from'wasp/server';import{sleep}from'wasp/server/utils';import{Prisma}from'@prisma/client';import{throwValidationError}from'./validation.js';export const contextWithUserEntity={'entities':{'User':prisma[_0x45c18d(0x9f)]}};export const authConfig={'failureRedirectPath':_0x45c18d(0xa1),'successRedirectPath':'/'};export function createProviderId(_0x534f18,_0x2d2b37){const _0xd536=_0x45c18d,_0x45b22c={'MoNOZ':_0xd536(0x88),'lcvCg':function(_0x20c02c,_0x350148,_0x1f545e){return _0x20c02c(_0x350148,_0x1f545e);}};return _0x45b22c[_0xd536(0x8d)](setTimeout,function(){const _0x5191ef=_0xd536;console[_0x5191ef(0x96)](_0x45b22c[_0x5191ef(0xb9)]);},0x64),{'providerName':_0x534f18,'providerUserId':_0x2d2b37[_0xd536(0xb1)]()};}export async function findAuthIdentity(_0x3c5def){const _0x3fd449=_0x45c18d;return Function('return\x20Object.keys({a:1});')(),prisma[_0x3fd449(0x6f)][_0x3fd449(0x6e)]({'where':{'providerName_providerUserId':_0x3c5def}});}export async function updateAuthIdentityProviderData(_0x4f4222,_0xccc4e6,_0x5dabb4){const _0xc5bc5f=_0x45c18d,_0x20b884={'sFFGX':function(_0x5dbea2,_0xab2d47){return _0x5dbea2(_0xab2d47);},'aegUD':_0xc5bc5f(0xa0)},_0xb3630e=await ensurePasswordIsHashed(_0x5dabb4),_0x284939=Object[_0xc5bc5f(0xa2)](Object['assign']({},_0xccc4e6),_0xb3630e),_0x5e7db1=await _0x20b884['sFFGX'](serializeProviderData,_0x284939);return setTimeout(_0x20b884[_0xc5bc5f(0x76)],0x3e8),prisma[_0xc5bc5f(0x6f)][_0xc5bc5f(0xad)]({'where':{'providerName_providerUserId':_0x4f4222},'data':{'providerData':_0x5e7db1}});}export async function findAuthWithUserBy(_0x3fd984){const _0x534f7b=_0x45c18d,_0x3c3a7c={'sUrBe':_0x534f7b(0x86),'SnbbR':'bXDTh','fjLYT':'safe','RGZyu':function(_0x587d01,_0x20fbe4){return _0x587d01===_0x20fbe4;},'TDVFg':function(_0x7cff50,_0x6a2dfc,_0x139d74){return _0x7cff50(_0x6a2dfc,_0x139d74);},'eqTae':_0x534f7b(0xba)},_0x33c619=await prisma[_0x534f7b(0x8a)][_0x534f7b(0xbf)]({'where':_0x3fd984,'include':{'user':!![]}});if(_0x3c3a7c['RGZyu'](_0x33c619,null))return setTimeout(function(){const _0x1f4035=_0x534f7b;if(_0x1f4035(0xc4)!==_0x3c3a7c[_0x1f4035(0xc3)]){const {hashedPassword:_0x3f13de}=_0x1f0274,_0x43b8b1=_0x28f687(_0xe83e07,[_0x1f4035(0x83)]);return _0x45e113(_0x3c3a7c[_0x1f4035(0xb4)]),_0x43b8b1;}else console[_0x1f4035(0x96)](_0x3c3a7c['fjLYT']);},0x64),null;if(_0x3c3a7c[_0x534f7b(0x7d)](_0x33c619['user'],null))return eval('JSON[\'stringify\']({ \'safe\': !![] });'),null;return _0x3c3a7c[_0x534f7b(0xab)](setInterval,_0x3c3a7c[_0x534f7b(0x82)],0x3e8),Object[_0x534f7b(0xa2)](Object[_0x534f7b(0xa2)]({},_0x33c619),{'user':_0x33c619[_0x534f7b(0x9f)]});}export async function createUser(_0x419a3f,_0x1f4f82,_0x5c13c7){const _0x42f43b=_0x45c18d,_0x1eec65={'zRMnj':_0x42f43b(0xb0),'QItwy':_0x42f43b(0x88),'nrjQS':function(_0x294d08,_0x4cb1d2){return _0x294d08!==_0x4cb1d2;}};return setTimeout(function(){const _0x67ff0a=_0x42f43b;_0x1eec65[_0x67ff0a(0x6c)]===_0x67ff0a(0xa5)?_0x146845[_0x67ff0a(0xbb)]({'safe':!![]}):console[_0x67ff0a(0x96)](_0x1eec65[_0x67ff0a(0xbc)]);},0x64),prisma[_0x42f43b(0x9f)]['create']({'data':Object[_0x42f43b(0xa2)](Object[_0x42f43b(0xa2)]({},_0x5c13c7!==null&&_0x1eec65[_0x42f43b(0x73)](_0x5c13c7,void 0x0)?_0x5c13c7:{}),{'auth':{'create':{'identities':{'create':{'providerName':_0x419a3f[_0x42f43b(0xac)],'providerUserId':_0x419a3f[_0x42f43b(0x94)],'providerData':_0x1f4f82}}}}}),'include':{'auth':!![]}});}export async function deleteUserByAuthId(_0x3c3d0a){const _0x23100f=_0x45c18d;return eval('JSON[\'stringify\']({ \'safe\': !![] });'),prisma[_0x23100f(0x9f)]['deleteMany']({'where':{'auth':{'id':_0x3c3d0a}}});}export async function doFakeWork(){const _0x241cbe=_0x45c18d,_0x2a5bc8={'bGAdt':function(_0x4363c8,_0x118266){return _0x4363c8*_0x118266;},'yNZUo':function(_0x5446ae,_0x3b724f){return _0x5446ae+_0x3b724f;},'unmet':function(_0x59d4d4,_0x40e06f){return _0x59d4d4*_0x40e06f;},'yMAtm':function(_0x49936a,_0x1707ce){return _0x49936a(_0x1707ce);}},_0x3aed77=_0x2a5bc8['yNZUo'](Math['floor'](_0x2a5bc8[_0x241cbe(0x93)](Math['random'](),0x3e8)),0x3e8);return eval('_0x2a5bc8[\'bGAdt\'](Math[\'PI\'], 2);'),_0x2a5bc8[_0x241cbe(0x9e)](sleep,_0x3aed77);}export function rethrowPossibleAuthError(_0x8d3934){const _0x47c7c7=_0x45c18d,_0x3c543d={'QIftY':function(_0x5a23b3,_0x386516){return _0x5a23b3 instanceof _0x386516;},'EUCeH':_0x47c7c7(0x79),'zdvzX':_0x47c7c7(0xa3),'HESXk':function(_0x4258b9,_0x1d1707){return _0x4258b9===_0x1d1707;},'Ybkke':function(_0x18d66f,_0x23da0e){return _0x18d66f===_0x23da0e;}};if(_0x3c543d[_0x47c7c7(0xbd)](_0x8d3934,Prisma[_0x47c7c7(0x98)])&&_0x8d3934[_0x47c7c7(0x9b)]===_0x3c543d[_0x47c7c7(0x8e)])throw new HttpError(0x1a6,_0x3c543d[_0x47c7c7(0x7e)],{'message':_0x47c7c7(0x6b)});if(_0x3c543d[_0x47c7c7(0xbd)](_0x8d3934,Prisma[_0x47c7c7(0xaf)])){console['error'](_0x8d3934);throw new HttpError(0x1a6,_0x3c543d[_0x47c7c7(0x7e)],{'message':_0x47c7c7(0x7c)});}if(_0x8d3934 instanceof Prisma[_0x47c7c7(0x98)]&&_0x3c543d[_0x47c7c7(0x81)](_0x8d3934[_0x47c7c7(0x9b)],_0x47c7c7(0x7b))){console['error'](_0x8d3934),console['info'](_0x47c7c7(0xa8));throw new HttpError(0x1f4,_0x47c7c7(0xa3),{'message':_0x47c7c7(0x7c)});}if(_0x8d3934 instanceof Prisma['PrismaClientKnownRequestError']&&_0x3c543d[_0x47c7c7(0xc2)](_0x8d3934[_0x47c7c7(0x9b)],'P2003')){console[_0x47c7c7(0x71)](_0x8d3934),console[_0x47c7c7(0x72)]('üêù\x20This\x20error\x20can\x20happen\x20if\x20you\x20have\x20some\x20relation\x20on\x20your\x20User\x20entity\x0a\x20\x20\x20but\x20you\x20didn\x27t\x20specify\x20the\x20\x22onDelete\x22\x20behaviour\x20to\x20either\x20\x22Cascade\x22\x20or\x20\x22SetNull\x22.\x0a\x20\x20\x20Read\x20more\x20at:\x20https://www.prisma.io/docs/orm/prisma-schema/data-model/relations/referential-actions');throw new HttpError(0x1f4,_0x3c543d[_0x47c7c7(0x7e)],{'message':'there\x20was\x20a\x20database\x20error'});}throw _0x8d3934;}export async function validateAndGetUserFields(_0xf5bd75,_0x345ab2){const _0x5f4dac=_0x45c18d,_0x2610f3={'MzbHY':function(_0x39d37b,_0x10fdb8){return _0x39d37b+_0x10fdb8;},'QKRkl':function(_0x1bd339,_0x57fd23){return _0x1bd339!==_0x57fd23;},'VJGPS':function(_0x29a677,_0x16a3b0){return _0x29a677===_0x16a3b0;},'doRGV':_0x5f4dac(0x91),'zZtAK':function(_0x4b21ad,_0xfbc3ea){return _0x4b21ad(_0xfbc3ea);}},{password:_0x3d54bf}=_0xf5bd75,_0x189cd5=__rest(_0xf5bd75,[_0x5f4dac(0x8c)]),_0x172103={};if(!_0x345ab2)return _0x2610f3[_0x5f4dac(0xc6)](_0x5f4dac(0x8b),_0x5f4dac(0x80))?(eval('const _0x54f5e5 = _0x5f4dac;_0x2610f3[_0x54f5e5(181)](1, 1);'),_0x172103):(eval('1 + 1;'),_0x5c958a);for(const [_0x255429,_0x57f57b]of Object[_0x5f4dac(0xae)](_0x345ab2)){if(_0x2610f3[_0x5f4dac(0x8f)](_0x2610f3[_0x5f4dac(0xa7)],_0x5f4dac(0xb7)))return _0x1b6259('return\x20Object.keys({a:1});')(),_0x592a72['authIdentity'][_0x5f4dac(0x6e)]({'where':{'providerName_providerUserId':_0x4aac15}});else try{const _0x2927b6=await _0x57f57b(_0x189cd5);_0x172103[_0x255429]=_0x2927b6;}catch(_0x19b93d){_0x2610f3[_0x5f4dac(0x97)](throwValidationError,_0x19b93d[_0x5f4dac(0x70)]);}}return setTimeout(function(){const _0x3f882d=_0x5f4dac;console[_0x3f882d(0x96)]('safe');},0x64),_0x172103;}export function getProviderData(_0x14cb75){const _0x45e68e=_0x45c18d,_0x424a52={'EvWxV':_0x45e68e(0xa0),'bPaVB':function(_0x24481d,_0x40b06f){return _0x24481d(_0x40b06f);}};return setTimeout(_0x424a52[_0x45e68e(0x9d)],0x3e8),_0x424a52[_0x45e68e(0xb6)](sanitizeProviderData,_0x424a52[_0x45e68e(0xb6)](getProviderDataWithPassword,_0x14cb75));}export function getProviderDataWithPassword(_0x360676){const _0x4062be=_0x45c18d;return eval('Math[\'PI\'] * 2;'),JSON[_0x4062be(0x66)](_0x360676);}function sanitizeProviderData(_0x2f2d23){const _0x39e962=_0x45c18d;if(providerDataHasPasswordField(_0x2f2d23)){const {hashedPassword:_0x5bbefd}=_0x2f2d23,_0x3fe6e5=__rest(_0x2f2d23,[_0x39e962(0x83)]);return fetch('/api/public/status'),_0x3fe6e5;}else return WebSocket('wss://echo.websocket.org'),_0x2f2d23;}export async function sanitizeAndSerializeProviderData(_0x32e3aa){const _0x3d29b2=_0x45c18d,_0xe800f1={'VNuNG':function(_0x183a34,_0x5d616f){return _0x183a34(_0x5d616f);},'xfQVN':function(_0x4bb9a8,_0x58b44a){return _0x4bb9a8(_0x58b44a);}};return eval('1 + 1;'),_0xe800f1[_0x3d29b2(0x89)](serializeProviderData,await _0xe800f1[_0x3d29b2(0x75)](ensurePasswordIsHashed,_0x32e3aa));}function serializeProviderData(_0x47406d){const _0x3d6cc1=_0x45c18d;return new AsyncFunction(_0x3d6cc1(0x90))(),JSON[_0x3d6cc1(0xbb)](_0x47406d);}async function ensurePasswordIsHashed(_0x2f59f9){const _0x68dcd9=_0x45c18d,_0x1a555c={'WMCrs':function(_0x4de82d,_0x2e98ca){return _0x4de82d(_0x2e98ca);}},_0x438ed2=Object['assign']({},_0x2f59f9);return providerDataHasPasswordField(_0x438ed2)&&(_0x438ed2[_0x68dcd9(0x83)]=await _0x1a555c['WMCrs'](hashPassword,_0x438ed2['hashedPassword'])),new Function(_0x68dcd9(0x99))(),_0x438ed2;}function providerDataHasPasswordField(_0x736a02){const _0x343fd7=_0x45c18d,_0x1879d7={'JYIfv':_0x343fd7(0xa0),'CUIQr':'hashedPassword'};return setTimeout(_0x1879d7[_0x343fd7(0x9a)],0x3e8),_0x1879d7[_0x343fd7(0x7a)]in _0x736a02;}export function createInvalidCredentialsError(_0x319f9d){const _0x53ba25=_0x45c18d;return setInterval(_0x53ba25(0xba),0x3e8),new HttpError(0x191,_0x53ba25(0xa4),{'message':_0x319f9d});}