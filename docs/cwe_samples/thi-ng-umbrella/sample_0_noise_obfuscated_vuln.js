'use strict';function _0xc187(_0x236936,_0x51fcf1){const _0x501c5f=_0x501c();return _0xc187=function(_0xc18757,_0x2f64c9){_0xc18757=_0xc18757-0x1af;let _0x5bf7aa=_0x501c5f[_0xc18757];return _0x5bf7aa;},_0xc187(_0x236936,_0x51fcf1);}const _0x189843=_0xc187;function _0x501c(){const _0x365af0=['GhjKd','123','MHUAE','not','4649010EQeznx','it\x20validates\x20the\x20max\x20constraint\x20if\x20the\x20integer\x20is\x20lower\x20than\x20the\x20define\x20max','it\x20validates\x20the\x20unique\x20constraint\x20if\x20there\x20is\x20no\x20other\x20record\x20in\x20the\x20database','mockResolvedValueOnce','305038kifydo','unique','it\x20fails\x20the\x20validation\x20if\x20the\x20number\x20is\x20integer\x20than\x20the\x20define\x20max','rbVLs','validateYupSchema','Integer\x20validator','YHAHx','it\x20validates\x20the\x20min\x20constraint\x20if\x20the\x20integer\x20is\x20higher\x20than\x20the\x20define\x20min','6LqInqa','PAIzV','test-model','82971yDrPpn','yBOOY','attrIntegerUnique','it\x20fails\x20the\x20validation\x20if\x20the\x20integer\x20is\x20lower\x20than\x20the\x20define\x20min','LBEED','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20for\x20the\x20checked\x20attribute','bJYxK','toHaveBeenCalledWith','IyfcZ','YxhlX','@strapi/utils','qWiJI','117MlQuru','../validators','min','toBeInstanceOf','it\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20data\x20has\x20not\x20changed\x20even\x20if\x20there\x20is\x20a\x20record\x20in\x20the\x20database\x20with\x20the\x20same\x20attribute\x20value','334ZCSzyH','tXAhI','204TgJPdr','it\x20does\x20not\x20validates\x20the\x20max\x20constraint\x20if\x20the\x20attribute\x20max\x20is\x20not\x20an\x20integer','it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20value\x20is\x20`null`','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20but\x20not\x20the\x20same\x20id\x20for\x20the\x20checked\x20attribute\x20if\x20an\x20entity\x20is\x20passed','okZBp','nullable','clearAllMocks','qSEvE','assertions','toHaveBeenCalled','296uESPGB','IQIfE','clnVm','it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20is\x20not\x20set\x20as\x20unique','7975WhTXhZ','268829SZpWkT','integer','toBe','875637kdgMEl','984KowuyN','vkZsb','it\x20does\x20not\x20validates\x20the\x20min\x20constraint\x20if\x20the\x20attribute\x20min\x20is\x20not\x20a\x20number','KesCE','gsdNr'];_0x501c=function(){return _0x365af0;};return _0x501c();}(function(_0x4e8983,_0x2c7e0b){const _0x55626c=_0xc187,_0x4ee4e0=_0x4e8983();while(!![]){try{const _0x2d1f4f=parseInt(_0x55626c(0x1ba))/0x1+parseInt(_0x55626c(0x1d6))/0x2*(-parseInt(_0x55626c(0x1d1))/0x3)+parseInt(_0x55626c(0x1eb))/0x4*(-parseInt(_0x55626c(0x1e6))/0x5)+-parseInt(_0x55626c(0x1c2))/0x6*(parseInt(_0x55626c(0x1ea))/0x7)+-parseInt(_0x55626c(0x1e2))/0x8*(parseInt(_0x55626c(0x1c5))/0x9)+parseInt(_0x55626c(0x1b6))/0xa+parseInt(_0x55626c(0x1e7))/0xb*(parseInt(_0x55626c(0x1d8))/0xc);if(_0x2d1f4f===_0x2c7e0b)break;else _0x4ee4e0['push'](_0x4ee4e0['shift']());}catch(_0x2e1b6d){_0x4ee4e0['push'](_0x4ee4e0['shift']());}}}(_0x501c,0x4e345));const strapiUtils=require(_0x189843(0x1cf)),{errors:{YupValidationError}}=require('@strapi/utils'),validators=require(_0x189843(0x1d2));describe(_0x189843(0x1bf),()=>{const _0xc8894f=_0x189843,_0x43aacf={'KesCE':_0xc8894f(0x1c7),'rbVLs':function(_0x4c4424,_0x2ca853){return _0x4c4424(_0x2ca853);},'GhjKd':_0xc8894f(0x1e8),'PAIzV':function(_0x1550f1,_0x5a4e21){return _0x1550f1(_0x5a4e21);},'qWiJI':function(_0x15cd22,_0x4d6368){return _0x15cd22(_0x4d6368);},'LBEED':function(_0x20beba,_0x362aa1){return _0x20beba(_0x362aa1);},'YHAHx':function(_0x5a586e,_0xdbbffa){return _0x5a586e(_0xdbbffa);},'Nvmdo':'contentType','vkZsb':_0xc8894f(0x1e5),'tXAhI':'it\x20fails\x20the\x20validation\x20of\x20the\x20unique\x20constraint\x20if\x20the\x20database\x20contains\x20a\x20record\x20with\x20the\x20same\x20attribute\x20value','clnVm':_0xc8894f(0x1d5),'okZBp':function(_0x44929f,_0x1800bc,_0xf05c05){return _0x44929f(_0x1800bc,_0xf05c05);},'gsdNr':function(_0x64e21,_0x5a1e17){return _0x64e21(_0x5a1e17);},'YxhlX':_0xc8894f(0x1af),'HUamL':_0xc8894f(0x1c8),'eAfZI':function(_0x42bb17,_0x3fed59){return _0x42bb17(_0x3fed59);},'IQIfE':_0xc8894f(0x1d9),'bJYxK':function(_0x425e69,_0x2c494c,_0x419bda){return _0x425e69(_0x2c494c,_0x419bda);}};describe(_0xc8894f(0x1bb),()=>{const _0x51752c=_0xc8894f,_0x22bdba={'qSEvE':'attrIntegerUnique','MHUAE':function(_0x4b9847,_0x346608){const _0xb8a648=_0xc187;return _0x43aacf[_0xb8a648(0x1c0)](_0x4b9847,_0x346608);}},_0x16c025=jest['fn']();global['strapi']={'db':{'query':jest['fn'](()=>({'findOne':_0x16c025}))}},_0x43aacf[_0x51752c(0x1bd)](afterEach,()=>{const _0x538a22=_0x51752c;jest[_0x538a22(0x1de)](),_0x16c025['mockReset']();});const _0x423e74={'kind':_0x43aacf['Nvmdo'],'uid':'test-uid','modelName':_0x51752c(0x1c4),'privateAttributes':[],'options':{},'attributes':{'attrIntegerUnique':{'type':_0x43aacf['GhjKd'],'unique':!![]}}};test(_0x43aacf[_0x51752c(0x1ec)],async()=>{const _0x4e7ef5=_0x51752c;_0x16c025[_0x4e7ef5(0x1b9)](null);const _0x217e17=strapiUtils[_0x4e7ef5(0x1be)](validators['integer']({'attr':{'type':_0x4e7ef5(0x1e8)},'model':_0x423e74,'updatedAttribute':{'name':_0x43aacf[_0x4e7ef5(0x1b0)],'value':0x1},'entity':null},{'isDraft':![]}));await _0x217e17(0x1),_0x43aacf[_0x4e7ef5(0x1bd)](expect,_0x16c025)['not']['toHaveBeenCalled']();}),test(_0x51752c(0x1da),async()=>{const _0xfa719e=_0x51752c;_0x16c025[_0xfa719e(0x1b9)](null);const _0x1c68e8=strapiUtils[_0xfa719e(0x1be)](validators[_0xfa719e(0x1e8)]({'attr':{'type':_0x43aacf[_0xfa719e(0x1b2)],'unique':!![]},'model':_0x423e74,'updatedAttribute':{'name':_0x43aacf[_0xfa719e(0x1b0)],'value':null},'entity':null},{'isDraft':![]})[_0xfa719e(0x1dd)]());await _0x1c68e8(null),_0x43aacf['PAIzV'](expect,_0x16c025)[_0xfa719e(0x1b5)][_0xfa719e(0x1e1)]();}),test(_0x51752c(0x1b8),async()=>{const _0x2611ba=_0x51752c;_0x16c025[_0x2611ba(0x1b9)](null);const _0x34c3ef=strapiUtils[_0x2611ba(0x1be)](validators[_0x2611ba(0x1e8)]({'attr':{'type':_0x43aacf[_0x2611ba(0x1b2)],'unique':!![]},'model':_0x423e74,'updatedAttribute':{'name':_0x43aacf[_0x2611ba(0x1b0)],'value':0x2},'entity':null},{'isDraft':![]}));expect(await _0x43aacf['qWiJI'](_0x34c3ef,0x1))[_0x2611ba(0x1e9)](0x1);}),test(_0x43aacf[_0x51752c(0x1d7)],async()=>{const _0xb7b073=_0x51752c;expect[_0xb7b073(0x1e0)](0x1),_0x16c025[_0xb7b073(0x1b9)]({'attrIntegerUnique':0x2});const _0x396f15=strapiUtils[_0xb7b073(0x1be)](validators[_0xb7b073(0x1e8)]({'attr':{'type':_0xb7b073(0x1e8),'unique':!![]},'model':_0x423e74,'updatedAttribute':{'name':_0xb7b073(0x1c7),'value':0x2},'entity':null},{'isDraft':![]}));try{await _0x43aacf[_0xb7b073(0x1d0)](_0x396f15,0x2);}catch(_0x54b7c5){_0x43aacf[_0xb7b073(0x1d0)](expect,_0x54b7c5)['toBeInstanceOf'](YupValidationError);}}),test(_0x43aacf[_0x51752c(0x1e4)],async()=>{const _0x3a9096=_0x51752c;_0x16c025[_0x3a9096(0x1b9)]({'attrIntegerUnique':0x3});const _0xc04bf6=strapiUtils[_0x3a9096(0x1be)](validators[_0x3a9096(0x1e8)]({'attr':{'type':_0x43aacf['GhjKd'],'unique':!![]},'model':_0x423e74,'updatedAttribute':{'name':_0x3a9096(0x1c7),'value':0x3},'entity':{'id':0x1,'attrIntegerUnique':0x3}},{'isDraft':![]}));expect(await _0x43aacf[_0x3a9096(0x1c9)](_0xc04bf6,0x3))['toBe'](0x3);}),test(_0x51752c(0x1ca),async()=>{const _0x26b3af=_0x51752c;_0x16c025[_0x26b3af(0x1b9)](null);const _0x156bbd=strapiUtils[_0x26b3af(0x1be)](validators['integer']({'attr':{'type':_0x26b3af(0x1e8),'unique':!![]},'model':_0x423e74,'updatedAttribute':{'name':_0x22bdba[_0x26b3af(0x1df)],'value':0x4},'entity':null},{'isDraft':![]}));await _0x156bbd(0x4),_0x22bdba[_0x26b3af(0x1b4)](expect,_0x16c025)[_0x26b3af(0x1cc)]({'select':['id'],'where':{'attrIntegerUnique':0x4}});}),_0x43aacf[_0x51752c(0x1dc)](test,_0x51752c(0x1db),async()=>{const _0x1e0dbe=_0x51752c;_0x16c025[_0x1e0dbe(0x1b9)](null);const _0x3de697=strapiUtils[_0x1e0dbe(0x1be)](validators[_0x1e0dbe(0x1e8)]({'attr':{'type':'integer','unique':!![]},'model':_0x423e74,'updatedAttribute':{'name':_0x1e0dbe(0x1c7),'value':0x5},'entity':{'id':0x1,'attrIntegerUnique':0x2a}},{'isDraft':![]}));await _0x3de697(0x5),_0x43aacf[_0x1e0dbe(0x1c3)](expect,_0x16c025)[_0x1e0dbe(0x1cc)]({'select':['id'],'where':{'$and':[{'attrIntegerUnique':0x5},{'$not':{'id':0x1}}]}});});}),describe(_0xc8894f(0x1d3),()=>{const _0x4eac9a=_0xc8894f;test(_0x43aacf[_0x4eac9a(0x1ce)],async()=>{const _0x306172=_0x4eac9a,_0x3ad30d=strapiUtils[_0x306172(0x1be)](validators[_0x306172(0x1e8)]({'attr':{'type':_0x306172(0x1e8),'minLength':_0x306172(0x1b3)}},{'isDraft':![]}));_0x43aacf[_0x306172(0x1c0)](expect,await _0x43aacf[_0x306172(0x1bd)](_0x3ad30d,0x1))[_0x306172(0x1e9)](0x1);}),test(_0x43aacf['HUamL'],async()=>{const _0x250e01=_0x4eac9a;expect[_0x250e01(0x1e0)](0x1);const _0x40b607=strapiUtils[_0x250e01(0x1be)](validators[_0x250e01(0x1e8)]({'attr':{'type':_0x43aacf['GhjKd'],'min':0x3}},{'isDraft':![]}));try{await _0x43aacf[_0x250e01(0x1bd)](_0x40b607,0x1);}catch(_0x5c7744){_0x43aacf[_0x250e01(0x1b1)](expect,_0x5c7744)[_0x250e01(0x1d4)](YupValidationError);}}),_0x43aacf['okZBp'](test,_0x4eac9a(0x1c1),async()=>{const _0x4ad293=_0x4eac9a,_0x579a6f=strapiUtils['validateYupSchema'](validators['integer']({'attr':{'type':_0x43aacf[_0x4ad293(0x1b2)],'min':0x3}},{'isDraft':![]}));expect(await _0x579a6f(0x4))['toBe'](0x4);});}),describe('max',()=>{const _0x4b42e2=_0xc8894f,_0x1abea0={'IyfcZ':_0x4b42e2(0x1e8),'yBOOY':function(_0x400814,_0x34732e){const _0x52e08f=_0x4b42e2;return _0x43aacf[_0x52e08f(0x1d0)](_0x400814,_0x34732e);}};test(_0x43aacf[_0x4b42e2(0x1e3)],async()=>{const _0x53e800=_0x4b42e2,_0xd2d7df=strapiUtils[_0x53e800(0x1be)](validators[_0x53e800(0x1e8)]({'attr':{'type':_0x1abea0[_0x53e800(0x1cd)],'maxLength':'123'}},{'isDraft':![]}));expect(await _0x1abea0[_0x53e800(0x1c6)](_0xd2d7df,0x1))['toBe'](0x1);}),_0x43aacf[_0x4b42e2(0x1cb)](test,_0x4b42e2(0x1bc),async()=>{const _0x2cf04a=_0x4b42e2;expect[_0x2cf04a(0x1e0)](0x1);const _0x42f7e7=strapiUtils[_0x2cf04a(0x1be)](validators[_0x2cf04a(0x1e8)]({'attr':{'type':'integer','max':0x3}},{'isDraft':![]}));try{await _0x1abea0[_0x2cf04a(0x1c6)](_0x42f7e7,0x4);}catch(_0x1b48cd){expect(_0x1b48cd)[_0x2cf04a(0x1d4)](YupValidationError);}}),_0x43aacf['okZBp'](test,_0x4b42e2(0x1b7),async()=>{const _0x285d60=_0x4b42e2,_0x2d110a=strapiUtils['validateYupSchema'](validators[_0x285d60(0x1e8)]({'attr':{'type':_0x285d60(0x1e8),'max':0x3}},{'isDraft':![]}));_0x43aacf['eAfZI'](expect,await _0x2d110a(0x2))[_0x285d60(0x1e9)](0x2);});});});