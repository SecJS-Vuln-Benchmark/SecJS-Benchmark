'use strict';const _0xfa2483=_0x53a5;(function(_0x8d9985,_0x10b16d){const _0x29ad0a=_0x53a5,_0x24b340=_0x8d9985();while(!![]){try{const _0x55da06=parseInt(_0x29ad0a(0x138))/0x1*(-parseInt(_0x29ad0a(0x185))/0x2)+-parseInt(_0x29ad0a(0x164))/0x3+parseInt(_0x29ad0a(0x17c))/0x4+-parseInt(_0x29ad0a(0x166))/0x5+-parseInt(_0x29ad0a(0x173))/0x6+-parseInt(_0x29ad0a(0x14a))/0x7+parseInt(_0x29ad0a(0x17a))/0x8;if(_0x55da06===_0x10b16d)break;else _0x24b340['push'](_0x24b340['shift']());}catch(_0x160447){_0x24b340['push'](_0x24b340['shift']());}}}(_0x2f2d,0xb7ecd));class UserController extends HashBrown['Controller']['ApiController']{static[_0xfa2483(0x152)](_0x2d2ed3){const _0x401b5d=_0xfa2483,_0x4f84ce={'xilEF':_0x401b5d(0x13e),'dUqCr':'/api/users/:id','DoUCB':'/api/user/logout','OSroT':'/api/user/login','oHJBi':'/api/users','RCkWB':_0x401b5d(0x13a),'lunyv':_0x401b5d(0x175),'npInl':_0x401b5d(0x156)},_0x1ab4a0=_0x4f84ce[_0x401b5d(0x183)]['split']('|');let _0x953bac=0x0;while(!![]){switch(_0x1ab4a0[_0x953bac++]){case'0':_0x2d2ed3[_0x401b5d(0x136)](_0x4f84ce[_0x401b5d(0x15a)],this['middleware']({'setProject':![]}),this[_0x401b5d(0x174)]);continue;case'1':_0x2d2ed3[_0x401b5d(0x136)]('/api/users/new',this[_0x401b5d(0x160)]({'setProject':![],'needsAdmin':!![]}),this['createUser']);continue;case'2':_0x2d2ed3[_0x401b5d(0x18b)](_0x401b5d(0x171),this[_0x401b5d(0x144)]);continue;case'3':_0x2d2ed3[_0x401b5d(0x136)](_0x4f84ce['DoUCB'],this[_0x401b5d(0x184)]);continue;case'4':_0x2d2ed3[_0x401b5d(0x13f)](_0x401b5d(0x172),this['middleware']({'setProject':![],'needsAdmin':!![]}),this[_0x401b5d(0x187)]);continue;case'5':_0x2d2ed3['post'](_0x4f84ce['OSroT'],this['login']);continue;case'6':_0x2d2ed3[_0x401b5d(0x18b)]('/api/:project/:environment/users/:id',this[_0x401b5d(0x160)](),this['getUser']);continue;case'7':_0x2d2ed3[_0x401b5d(0x18b)]('/api/user/scopes',this[_0x401b5d(0x157)]);continue;case'8':_0x2d2ed3[_0x401b5d(0x18b)](_0x4f84ce[_0x401b5d(0x18c)],this[_0x401b5d(0x160)]({'needsAdmin':!![],'setProject':![]}),this[_0x401b5d(0x176)]);continue;case'9':_0x2d2ed3[_0x401b5d(0x136)](_0x4f84ce['RCkWB'],this[_0x401b5d(0x15b)]);continue;case'10':_0x2d2ed3[_0x401b5d(0x136)](_0x4f84ce['lunyv'],this['middleware'](),this['postUser']);continue;case'11':_0x2d2ed3[_0x401b5d(0x18b)](_0x4f84ce['npInl'],this['middleware'](),this[_0x401b5d(0x176)]);continue;case'12':_0x2d2ed3[_0x401b5d(0x18b)](_0x401b5d(0x172),this[_0x401b5d(0x160)]({'needsAdmin':!![],'setProject':![]}),this['getUser']);continue;}break;}}static async[_0xfa2483(0x16e)](_0x1280a0,_0x4b8ed7){const _0x175976=_0xfa2483,_0x1a6175={'rBeLI':function(_0x32acdb,_0x15d2b9){return _0x32acdb==_0x15d2b9;},'ORxfJ':_0x175976(0x179),'goQRm':_0x175976(0x17e),'VsQbL':_0x175976(0x14e)};let _0x87a9f2=_0x1280a0[_0x175976(0x14c)][_0x175976(0x155)],_0x286dad=_0x1280a0[_0x175976(0x14c)][_0x175976(0x148)],_0x375aba=_0x1a6175[_0x175976(0x15c)](_0x1280a0[_0x175976(0x143)][_0x175976(0x181)],_0x1a6175['ORxfJ'])||_0x1a6175['rBeLI'](_0x1280a0[_0x175976(0x143)]['persist'],!![]);try{let _0x4f2966=await HashBrown[_0x175976(0x165)]['UserService']['loginUser'](_0x87a9f2,_0x286dad,_0x375aba);_0x4b8ed7['status'](0xc8)[_0x175976(0x163)](_0x175976(0x15d),_0x4f2966)[_0x175976(0x153)](_0x4f2966);}catch(_0x39296f){_0x1a6175[_0x175976(0x13b)]!==_0x1a6175[_0x175976(0x180)]?_0x4b8ed7['status'](0x193)[_0x175976(0x153)](this[_0x175976(0x17d)](_0x39296f)):_0x3eb9c2['status'](0x193)[_0x175976(0x153)](this[_0x175976(0x17d)](_0x426e23));}}static async['logout'](_0x30e5a8,_0x426e7c){const _0x36febc=_0xfa2483,_0x458665={'JVpJa':_0x36febc(0x15d)};try{await HashBrown[_0x36febc(0x165)]['UserService']['logoutUser'](_0x30e5a8[_0x36febc(0x15e)][_0x36febc(0x15d)]),_0x426e7c[_0x36febc(0x189)](0xc8)['cookie'](_0x458665[_0x36febc(0x137)],'')[_0x36febc(0x139)]('/');}catch(_0x4c3526){_0x426e7c[_0x36febc(0x189)](0x193)[_0x36febc(0x153)](this['printError'](_0x4c3526));}}static async['getCurrentUser'](_0x1b7c4a,_0xd984f0){const _0x399628=_0xfa2483,_0x548c6c={'aUXPz':_0x399628(0x140)};try{if(_0x548c6c['aUXPz']===_0x399628(0x140)){let _0xa7bc35=await UserController[_0x399628(0x162)](_0x1b7c4a['cookies'][_0x399628(0x15d)]);_0xa7bc35=_0xa7bc35[_0x399628(0x178)](),delete _0xa7bc35['tokens'],delete _0xa7bc35[_0x399628(0x148)],_0xd984f0['status'](0xc8)['send'](_0xa7bc35);}else _0x42bbee[_0x399628(0x189)](0x190)['send'](this[_0x399628(0x17d)](_0x394d5d));}catch(_0x453e4b){_0xd984f0['status'](0x193)[_0x399628(0x153)](this['printError'](_0x453e4b));}}static async['getScopes'](_0x583516,_0x3c9979){const _0x28917d=_0xfa2483;try{let _0x11f108=await UserController[_0x28917d(0x162)](_0x583516[_0x28917d(0x15e)]['token']);_0x3c9979[_0x28917d(0x153)](_0x11f108[_0x28917d(0x182)]);}catch(_0x141685){_0x3c9979[_0x28917d(0x189)](0x193)['send'](this[_0x28917d(0x17d)](_0x141685));}}static async['getUsers'](_0xdcd6be,_0x5f059e){const _0xbce595=_0xfa2483,_0x1b48e1={'Wpzot':function(_0x42de45,_0x4935da){return _0x42de45==_0x4935da;}};let _0x559ec=_0xdcd6be['params']['project'];try{let _0x32cd32=await HashBrown[_0xbce595(0x165)][_0xbce595(0x15f)][_0xbce595(0x149)](_0x559ec);for(let _0x43ae17 in _0x32cd32){_0x32cd32[_0x43ae17]=_0x32cd32[_0x43ae17][_0xbce595(0x178)](),_0x32cd32[_0x43ae17][_0xbce595(0x169)]=_0x1b48e1[_0xbce595(0x150)](_0x32cd32[_0x43ae17]['id'],_0xdcd6be['user']['id']),delete _0x32cd32[_0x43ae17][_0xbce595(0x158)],delete _0x32cd32[_0x43ae17][_0xbce595(0x148)];}_0x5f059e[_0xbce595(0x189)](0xc8)[_0xbce595(0x153)](_0x32cd32);}catch(_0x3661cf){_0x5f059e[_0xbce595(0x189)](0x193)[_0xbce595(0x153)](this['printError'](_0x3661cf));}}static async[_0xfa2483(0x14b)](_0x39c22b,_0x211a2e){const _0x24b425=_0xfa2483,_0x5d872c={'nhjkb':function(_0x388913,_0x5b5f42){return _0x388913===_0x5b5f42;},'hcSxe':_0x24b425(0x170)};let _0x4194e4=_0x39c22b['params']['id'];try{let _0x1a3555=await HashBrown['Service'][_0x24b425(0x15f)]['getUserById'](_0x4194e4);_0x211a2e[_0x24b425(0x189)](0xc8)[_0x24b425(0x153)](_0x1a3555);}catch(_0xdd958c){_0x5d872c[_0x24b425(0x14f)](_0x5d872c[_0x24b425(0x16f)],_0x5d872c[_0x24b425(0x16f)])?_0x211a2e[_0x24b425(0x189)](0x194)[_0x24b425(0x153)](this[_0x24b425(0x17d)](_0xdd958c)):_0x5abf9b[_0x24b425(0x189)](0x1f6)['send'](this[_0x24b425(0x17d)](_0x3ebd23));}}static async[_0xfa2483(0x174)](_0x44c793,_0x2312ba){const _0x40f5be=_0xfa2483,_0x185a0b={'WnzZm':_0x40f5be(0x17b),'Qiavs':_0x40f5be(0x151),'HqNqy':function(_0xbb7940,_0x379d18){return _0xbb7940===_0x379d18;},'vbLNQ':_0x40f5be(0x17f),'TdtzC':function(_0x1608fc,_0x4e17c8){return _0x1608fc!==_0x4e17c8;}};let _0x3c05d9=_0x44c793['params']['id'],_0xf154b2=_0x44c793[_0x40f5be(0x14c)];try{if(_0x185a0b[_0x40f5be(0x16c)]===_0x185a0b[_0x40f5be(0x188)])_0x3a8873[_0x18ad53]=_0x397b7c[_0xf99c09][_0x40f5be(0x178)](),_0x2da77d[_0x1b4dc9]['isCurrent']=_0xad9b73[_0xf1d8d7]['id']==_0x5c96bc['user']['id'],delete _0x2e6a35[_0xe34714][_0x40f5be(0x158)],delete _0x445259[_0x8472de][_0x40f5be(0x148)];else{let _0x3b0f82=await UserController[_0x40f5be(0x162)](_0x44c793[_0x40f5be(0x15e)][_0x40f5be(0x15d)]);if(_0x3b0f82['id']!==_0x3c05d9&&!_0x3b0f82[_0x40f5be(0x16b)])throw new Error(_0x40f5be(0x13d));!_0x3b0f82[_0x40f5be(0x16b)]&&(_0x185a0b['HqNqy'](_0x185a0b[_0x40f5be(0x145)],'ppADq')?(delete _0xf154b2[_0x40f5be(0x182)],delete _0xf154b2[_0x40f5be(0x16b)]):_0x46340d['status'](0x193)[_0x40f5be(0x153)](this[_0x40f5be(0x17d)](_0x131259))),_0x185a0b[_0x40f5be(0x154)](_0x3b0f82['id'],_0x3c05d9)&&delete _0xf154b2[_0x40f5be(0x159)],_0x3b0f82=await HashBrown[_0x40f5be(0x165)]['UserService'][_0x40f5be(0x161)](_0x3c05d9,_0xf154b2),_0x2312ba['status'](0xc8)[_0x40f5be(0x153)](_0x3b0f82);}}catch(_0x2d3ac6){_0x40f5be(0x167)!=='qPaev'?(delete _0x241670['scopes'],delete _0x5dcb05['isAdmin']):_0x2312ba[_0x40f5be(0x189)](0x190)['send'](this[_0x40f5be(0x17d)](_0x2d3ac6));}}static async[_0xfa2483(0x187)](_0x596255,_0x19622c){const _0x4be4ba=_0xfa2483;let _0x2466e0=_0x596255[_0x4be4ba(0x18e)]['id'];try{let _0x59e89f=await HashBrown['Service'][_0x4be4ba(0x15f)][_0x4be4ba(0x16a)](_0x2466e0);_0x19622c[_0x4be4ba(0x189)](0xc8)[_0x4be4ba(0x153)](_0x59e89f);}catch(_0x677f6e){'ONWKx'!==_0x4be4ba(0x147)?_0x25095f[_0x4be4ba(0x189)](0x193)['send'](this[_0x4be4ba(0x17d)](_0x51b1a6)):_0x19622c[_0x4be4ba(0x189)](0x1f6)['send'](this['printError'](_0x677f6e));}}static async[_0xfa2483(0x15b)](_0x5f03c0,_0x39b433){const _0x9b0b41=_0xfa2483,_0x2966fe={'JMwat':function(_0x459425,_0x419251){return _0x459425>_0x419251;},'jnhcW':_0x9b0b41(0x186)};let _0x3cba27=_0x5f03c0['body'][_0x9b0b41(0x155)],_0x2c37ba=_0x5f03c0[_0x9b0b41(0x14c)]['password'];try{let _0x21ea5f=await HashBrown[_0x9b0b41(0x165)][_0x9b0b41(0x15f)][_0x9b0b41(0x149)]();if(_0x21ea5f&&_0x2966fe[_0x9b0b41(0x14d)](_0x21ea5f[_0x9b0b41(0x13c)],0x0))throw new Error(_0x2966fe[_0x9b0b41(0x177)]);let _0x984de3=await HashBrown[_0x9b0b41(0x165)][_0x9b0b41(0x15f)][_0x9b0b41(0x18a)](_0x3cba27,_0x2c37ba,!![]),_0x569d19=await HashBrown[_0x9b0b41(0x165)][_0x9b0b41(0x15f)][_0x9b0b41(0x146)](_0x3cba27,_0x2c37ba);_0x39b433['status'](0xc8)[_0x9b0b41(0x163)]('token',_0x569d19)[_0x9b0b41(0x153)](_0x569d19);}catch(_0x46a751){_0x39b433[_0x9b0b41(0x189)](0x193)['send'](this[_0x9b0b41(0x17d)](_0x46a751));}}static async[_0xfa2483(0x18a)](_0x765ccf,_0xb96a9f){const _0x414662=_0xfa2483,_0x59833b={'NkXCN':_0x414662(0x186),'YzgkE':_0x414662(0x18d),'hQkzP':'SNXDg'};let _0x45e005=_0x765ccf[_0x414662(0x14c)]['username'],_0x1e52a9=_0x765ccf[_0x414662(0x14c)][_0x414662(0x148)];try{if(_0x414662(0x142)===_0x59833b['YzgkE'])_0x197b1d[_0x414662(0x189)](0x194)[_0x414662(0x153)](this[_0x414662(0x17d)](_0x3c4675));else{let _0x486e48=await HashBrown[_0x414662(0x165)][_0x414662(0x15f)][_0x414662(0x18a)](_0x45e005,_0x1e52a9,![],_0x765ccf[_0x414662(0x14c)]);_0xb96a9f['status'](0xc8)[_0x414662(0x153)](_0x486e48);}}catch(_0x4357ed){if(_0x59833b[_0x414662(0x18f)]!==_0x414662(0x141))_0xb96a9f[_0x414662(0x189)](0x190)[_0x414662(0x153)](this[_0x414662(0x17d)](_0x4357ed));else throw new _0x3e8074(_0x59833b[_0x414662(0x16d)]);}}}function _0x2f2d(){const _0x1e1f56=['login','hcSxe','nLPXO','/api/user','/api/users/:id','443778zkJdzh','postUser','/api/:project/:environment/users/:id','getUsers','jnhcW','getObject','true','27256048thQRbd','SKLJQ','1597472ODLHkr','printError','KvrEc','ppADq','VsQbL','persist','scopes','xilEF','logout','240506UvblLb','Cannot\x20create\x20first\x20admin,\x20users\x20already\x20exist.\x20If\x20you\x20lost\x20your\x20credentials,\x20please\x20assign\x20the\x20the\x20admin\x20from\x20the\x20commandline.','deleteUser','Qiavs','status','createUser','get','oHJBi','Opswx','params','hQkzP','post','JVpJa','11Hijlvi','redirect','/api/users/first','goQRm','length','You\x20do\x20not\x20have\x20sufficient\x20privileges\x20to\x20change\x20this\x20user\x27s\x20information','2|7|5|3|12|8|9|1|0|4|11|6|10','delete','WOuAc','lMNez','UgaoQ','query','getCurrentUser','vbLNQ','loginUser','ONWKx','password','getAllUsers','3357571wForYC','getUser','body','JMwat','bnMgX','nhjkb','Wpzot','uKkaS','init','send','TdtzC','username','/api/:project/:environment/users','getScopes','tokens','theme','dUqCr','createFirstAdmin','rBeLI','token','cookies','UserService','middleware','updateUserById','authenticate','cookie','319458QTzUYX','Service','5350660MwJqke','qPaev','exports','isCurrent','removeUser','isAdmin','WnzZm','NkXCN'];_0x2f2d=function(){return _0x1e1f56;};return _0x2f2d();}function _0x53a5(_0x5f3d03,_0x3e8505){const _0x2f2d04=_0x2f2d();return _0x53a5=function(_0x53a500,_0x37a5fd){_0x53a500=_0x53a500-0x136;let _0x2bb811=_0x2f2d04[_0x53a500];return _0x2bb811;},_0x53a5(_0x5f3d03,_0x3e8505);}module[_0xfa2483(0x168)]=UserController;