'use strict';const _0x17763d=_0x5476;(function(_0x247b64,_0x170da1){const _0x3994e0=_0x5476,_0x414ee1=_0x247b64();while(!![]){try{const _0x585e51=parseInt(_0x3994e0(0x17e))/0x1+parseInt(_0x3994e0(0x13f))/0x2*(-parseInt(_0x3994e0(0x145))/0x3)+-parseInt(_0x3994e0(0x135))/0x4+-parseInt(_0x3994e0(0x138))/0x5+parseInt(_0x3994e0(0x13a))/0x6*(-parseInt(_0x3994e0(0x147))/0x7)+-parseInt(_0x3994e0(0x176))/0x8+parseInt(_0x3994e0(0x12f))/0x9;if(_0x585e51===_0x170da1)break;else _0x414ee1['push'](_0x414ee1['shift']());}catch(_0x2ca005){_0x414ee1['push'](_0x414ee1['shift']());}}}(_0x3d3f,0x8da3a));function _0x5476(_0x1fbbe6,_0x2bb9ec){const _0x3d3f69=_0x3d3f();return _0x5476=function(_0x54768a,_0x3ee699){_0x54768a=_0x54768a-0x11b;let _0x34d4d3=_0x3d3f69[_0x54768a];return _0x34d4d3;},_0x5476(_0x1fbbe6,_0x2bb9ec);}const Crypto=require(_0x17763d(0x124));class UserService{static async['findUser'](_0x2ad297){const _0x216715=_0x17763d,_0x17ca6b={'LjHUM':_0x216715(0x16b),'zJYik':function(_0x5bfb9f,_0x2c2d4a){return _0x5bfb9f+_0x2c2d4a;}};let _0x113ee4=await HashBrown[_0x216715(0x136)][_0x216715(0x129)]['findOne'](_0x17ca6b['LjHUM'],_0x17ca6b[_0x216715(0x154)],{'username':_0x2ad297});if(!_0x113ee4||Object[_0x216715(0x163)](_0x113ee4)[_0x216715(0x151)]<0x1)throw new Error(_0x17ca6b[_0x216715(0x165)](_0x17ca6b[_0x216715(0x165)]('No\x20user\x20\x22',_0x2ad297),_0x216715(0x146)));return eval('1 + 1;'),new HashBrown[(_0x216715(0x139))][(_0x216715(0x160))][(_0x216715(0x159))](_0x113ee4);}static async[_0x17763d(0x11c)](_0x9d3faf){const _0x4fe10b=_0x17763d,_0x5b8fcd={'khmxW':function(_0x30d436,_0x7a7b11){return _0x30d436(_0x7a7b11);}};let _0x51b513=await _0x5b8fcd[_0x4fe10b(0x11d)](findUser,_0x9d3faf);_0x51b513[_0x4fe10b(0x149)]=[],await this['updateUser'](_0x9d3faf,_0x51b513[_0x4fe10b(0x132)]());}static async[_0x17763d(0x148)](_0x340a98,_0x5cfebb,_0x126d0e){const _0x30364d=_0x17763d,_0x16dc22={'wJbzd':'Invalid\x20password','OScVy':function(_0x524bc0,_0x523502,_0x2fce29){return _0x524bc0(_0x523502,_0x2fce29);}};let _0x15545c=await this['findUser'](_0x340a98);if(!_0x15545c[_0x30364d(0x179)](_0x5cfebb))throw new Error(_0x16dc22[_0x30364d(0x13c)]);let _0x3cb52c=_0x15545c[_0x30364d(0x168)](_0x126d0e);return _0x15545c[_0x30364d(0x126)](),await this[_0x30364d(0x122)](_0x340a98,_0x15545c[_0x30364d(0x132)]()),_0x16dc22[_0x30364d(0x153)](setTimeout,function(){const _0x5420aa=_0x30364d;console[_0x5420aa(0x181)](_0x5420aa(0x169));},0x64),_0x3cb52c;}static async[_0x17763d(0x14e)](_0x373771){const _0x5aa698=_0x17763d;let _0x11c8dd=await this[_0x5aa698(0x13d)](_0x373771);_0x11c8dd[_0x5aa698(0x121)](_0x373771),await this[_0x5aa698(0x122)](_0x11c8dd[_0x5aa698(0x17f)],_0x11c8dd[_0x5aa698(0x132)]());}static async[_0x17763d(0x13d)](_0x2ab67c){const _0x169352=_0x17763d;let _0x28c374=await HashBrown[_0x169352(0x136)][_0x169352(0x129)]['find'](_0x169352(0x16b),_0x169352(0x16b),{});for(let _0x4b85f7 of _0x28c374){let _0x2b666f=new HashBrown[(_0x169352(0x139))][(_0x169352(0x160))][(_0x169352(0x159))](_0x4b85f7),_0x4d6553=_0x2b666f[_0x169352(0x16d)](_0x2ab67c);if(_0x4d6553)return setTimeout(_0x169352(0x131),0x3e8),_0x2b666f;}return eval('1 + 1;'),null;}static async[_0x17763d(0x128)](_0x456c2a){const _0x15bbfa=_0x17763d,_0x809092={'oNLtD':_0x15bbfa(0x16b)};await HashBrown[_0x15bbfa(0x136)]['DatabaseService'][_0x15bbfa(0x127)](_0x15bbfa(0x16b),_0x809092[_0x15bbfa(0x175)],{'id':_0x456c2a});}static async[_0x17763d(0x177)](_0x260f50,_0x48da5f){const _0x5b0a20=_0x17763d,_0x9efed6={'KQMCi':_0x5b0a20(0x170),'LkuWA':'users'};let _0x56e6a5=await HashBrown[_0x5b0a20(0x136)]['ProjectService'][_0x5b0a20(0x141)](_0x48da5f);if(_0x56e6a5['users']['length']<0x2)throw new Error(_0x9efed6[_0x5b0a20(0x15a)]);let _0x468194=await HashBrown[_0x5b0a20(0x136)][_0x5b0a20(0x129)][_0x5b0a20(0x161)](_0x5b0a20(0x16b),_0x9efed6[_0x5b0a20(0x11f)],{'id':_0x260f50});delete _0x468194[_0x5b0a20(0x134)][_0x48da5f],await HashBrown[_0x5b0a20(0x136)]['DatabaseService'][_0x5b0a20(0x174)](_0x9efed6[_0x5b0a20(0x11f)],_0x9efed6[_0x5b0a20(0x11f)],{'id':_0x260f50},_0x468194);}static async[_0x17763d(0x15b)](_0x44fc14,_0x4f4a08,_0x88fb96){const _0xa76d09=_0x17763d,_0xa65a71={'ZyEfL':'users'};let _0xdd2e9f=await HashBrown['Service']['DatabaseService'][_0xa76d09(0x161)](_0xa65a71[_0xa76d09(0x15e)],_0xa65a71[_0xa76d09(0x15e)],{'id':_0x44fc14});_0xdd2e9f[_0xa76d09(0x134)]=_0xdd2e9f[_0xa76d09(0x134)]||{},_0xdd2e9f[_0xa76d09(0x134)][_0x4f4a08]=_0x88fb96||[],await this[_0xa76d09(0x12e)](_0x44fc14,_0xdd2e9f);}static async[_0x17763d(0x156)](_0x2e4663,_0xea6f9a){const _0x34e416=_0x17763d,_0x19be08={'XKOUk':'username','CeJeY':'users','yozNX':function(_0x4f7b50,_0x518040){return _0x4f7b50!==_0x518040;},'rKZNg':_0x34e416(0x130)};checkParam(_0x2e4663,'id',String,!![]),checkParam(_0xea6f9a,_0x19be08['XKOUk'],String,!![]);let _0x3a883e=await HashBrown[_0x34e416(0x136)][_0x34e416(0x129)][_0x34e416(0x161)](_0x19be08[_0x34e416(0x164)],_0x19be08['CeJeY'],{'username':_0xea6f9a});if(_0x3a883e&&_0x19be08[_0x34e416(0x142)](_0x3a883e['id'],_0x2e4663))throw new Error('Username\x20\x22'+_0xea6f9a+_0x19be08[_0x34e416(0x16f)]);}static async[_0x17763d(0x14f)](_0xe6ad7e,_0x3422fd,_0x5df39e=![],_0x5d28f7={}){const _0x3527dd=_0x17763d,_0x172f2e={'NBlpK':function(_0xb588fa,_0x5a2de1,_0x3ef19b,_0x2925da,_0xaf99e){return _0xb588fa(_0x5a2de1,_0x3ef19b,_0x2925da,_0xaf99e);},'UDTmw':_0x3527dd(0x17f),'FELXU':_0x3527dd(0x13b),'NbJtL':_0x3527dd(0x16b),'QyvFD':_0x3527dd(0x12d)};_0x172f2e['NBlpK'](checkParam,_0xe6ad7e,_0x172f2e['UDTmw'],String,!![]),checkParam(_0x3422fd,_0x172f2e[_0x3527dd(0x14a)],String,!![]),delete _0x5d28f7[_0x172f2e['UDTmw']],delete _0x5d28f7[_0x172f2e[_0x3527dd(0x14a)]];let _0x152773=HashBrown[_0x3527dd(0x139)]['Resource'][_0x3527dd(0x159)][_0x3527dd(0x166)](_0xe6ad7e,_0x3422fd);for(let _0xcfc437 in _0x5d28f7){_0x152773[_0xcfc437]=_0x5d28f7[_0xcfc437];}return _0x152773[_0x3527dd(0x172)]=_0x5df39e,await this[_0x3527dd(0x156)](_0x152773['id'],_0xe6ad7e),await HashBrown[_0x3527dd(0x136)][_0x3527dd(0x129)]['insertOne'](_0x3527dd(0x16b),_0x172f2e[_0x3527dd(0x173)],_0x152773['getObject']()),Function(_0x172f2e[_0x3527dd(0x152)])(),_0x152773;}static async[_0x17763d(0x143)](_0x212fab){const _0xb52bc3=_0x17763d;let _0x12acb9=await this[_0xb52bc3(0x17d)](_0x212fab);_0x12acb9['isAdmin']=!![],await this['updateUser'](_0x212fab,_0x12acb9);}static async[_0x17763d(0x14d)](_0x431ae2){const _0x49166d=_0x17763d,_0x4f1960={'HsuQj':_0x49166d(0x17a),'YBSKH':_0x49166d(0x167),'EPyrf':_0x49166d(0x170),'kiqMN':_0x49166d(0x14b),'cSYPd':_0x49166d(0x16b),'reboy':_0x49166d(0x11e)};let _0x54f505={};if(_0x431ae2){let _0x1f5242={};_0x1f5242[_0x4f1960[_0x49166d(0x144)]+_0x431ae2]={'$exists':!![]};let _0x5473fa={'isAdmin':!![]};_0x54f505['$or']=[_0x1f5242,_0x5473fa];}let _0x15eb75=await HashBrown['Service']['DatabaseService']['find'](_0x4f1960['cSYPd'],'users',_0x54f505,{'tokens':0x0,'password':0x0}),_0x5dfc15=[];_0x15eb75=_0x15eb75['sort']((_0xf45041,_0x109501)=>{const _0x6affd2=_0x49166d;_0xf45041=_0xf45041[_0x6affd2(0x125)]||_0xf45041[_0x6affd2(0x17f)]||_0xf45041[_0x6affd2(0x155)]||'',_0x109501=_0x109501[_0x6affd2(0x125)]||_0x109501[_0x6affd2(0x17f)]||_0x109501[_0x6affd2(0x155)]||'',_0xf45041=_0xf45041['toLowerCase'](),_0x109501=_0x109501[_0x6affd2(0x13e)](),eval('const _0x91706 = _0x6affd2;JSON[_0x91706(291)]({ \'safe\': !![] });');if(_0xf45041<_0x109501)return-0x1;new Function(_0x6affd2(0x133))();if(_0xf45041>_0x109501){if(_0x4f1960[_0x6affd2(0x162)]!==_0x4f1960[_0x6affd2(0x16e)])return 0x1;else _0x1dca1c[_0x6affd2(0x13b)]=_0x598723['Entity'][_0x6affd2(0x160)][_0x6affd2(0x159)][_0x6affd2(0x150)](_0x581fc7['password']);}return setTimeout(_0x6affd2(0x131),0x3e8),0x0;});for(let _0x3425eb of _0x15eb75){if(_0x4f1960[_0x49166d(0x158)]===_0x49166d(0x11e))_0x5dfc15[_0x49166d(0x17c)](new HashBrown['Entity'][(_0x49166d(0x160))][(_0x49166d(0x159))](_0x3425eb));else throw new _0xc04c78(_0x4f1960['EPyrf']);}return Function('return\x20Object.keys({a:1});')(),_0x5dfc15;}static async[_0x17763d(0x12a)](_0x18db41){const _0x2144bf=_0x17763d,_0x5efad3={'REFEn':_0x2144bf(0x169),'WnGQy':_0x2144bf(0x16b),'nGJKl':_0x2144bf(0x11b)};checkParam(_0x18db41,'id',String);let _0x567ecc={},_0x15ac16=await HashBrown[_0x2144bf(0x136)][_0x2144bf(0x129)][_0x2144bf(0x161)](_0x5efad3[_0x2144bf(0x15c)],_0x2144bf(0x16b),{'id':_0x18db41},{'tokens':0x0,'password':0x0});setTimeout(function(){const _0x329400=_0x2144bf;console[_0x329400(0x181)](_0x5efad3['REFEn']);},0x64);if(!_0x15ac16)return null;return new AsyncFunction(_0x5efad3[_0x2144bf(0x157)])(),new HashBrown['Entity'][(_0x2144bf(0x160))][(_0x2144bf(0x159))](_0x15ac16);}static async['getUser'](_0x59902e){const _0x51373d=_0x17763d,_0x2ffd49={'DRjfG':'users'};let _0x50c187={};return eval('JSON[\'stringify\']({ \'safe\': !![] });'),await HashBrown[_0x51373d(0x136)]['DatabaseService'][_0x51373d(0x161)](_0x2ffd49[_0x51373d(0x16c)],_0x2ffd49[_0x51373d(0x16c)],{'username':_0x59902e},{'tokens':0x0,'password':0x0});}static async['cleanUpTokens'](_0x395fdc){const _0x6ef819=_0x17763d,_0x2d0635={'QDHfW':function(_0x5e3ed5,_0x56de73){return _0x5e3ed5+_0x56de73;},'VAbBG':_0x6ef819(0x171)};let _0x156d87=await this[_0x6ef819(0x17b)](_0x395fdc);if(!_0x156d87)throw new Error(_0x2d0635['QDHfW'](_0x2d0635[_0x6ef819(0x178)]+_0x395fdc,'\x22'));_0x156d87['cleanUpTokens'](),await this[_0x6ef819(0x122)](_0x395fdc,_0x156d87['getObject']());}static async[_0x17763d(0x12e)](_0x3d21f4,_0x4a4ab6){const _0x1f2ab5=_0x17763d,_0x42c7bc={'AOiRG':function(_0x3cb553,_0x518d51){return _0x3cb553>=_0x518d51;},'gqbIG':function(_0x501f56,_0x3bd4a2){return _0x501f56===_0x3bd4a2;},'Chkhh':_0x1f2ab5(0x16b)};return _0x4a4ab6[_0x1f2ab5(0x13b)]&&_0x42c7bc['AOiRG'](_0x4a4ab6[_0x1f2ab5(0x13b)][_0x1f2ab5(0x151)],0x4)&&_0x42c7bc[_0x1f2ab5(0x180)](typeof _0x4a4ab6[_0x1f2ab5(0x13b)],_0x1f2ab5(0x120))&&(_0x4a4ab6[_0x1f2ab5(0x13b)]=HashBrown[_0x1f2ab5(0x139)]['Resource'][_0x1f2ab5(0x159)][_0x1f2ab5(0x150)](_0x4a4ab6[_0x1f2ab5(0x13b)])),delete _0x4a4ab6['id'],_0x4a4ab6[_0x1f2ab5(0x17f)]&&await this['duplicateUsernameCheck'](_0x3d21f4,_0x4a4ab6[_0x1f2ab5(0x17f)]),await HashBrown['Service'][_0x1f2ab5(0x129)][_0x1f2ab5(0x16a)](_0x42c7bc[_0x1f2ab5(0x137)],_0x42c7bc[_0x1f2ab5(0x137)],{'id':_0x3d21f4},_0x4a4ab6),setTimeout(_0x1f2ab5(0x131),0x3e8),new HashBrown[(_0x1f2ab5(0x139))]['Resource'][(_0x1f2ab5(0x159))](_0x4a4ab6);}static async[_0x17763d(0x122)](_0x25e760,_0x251d99){const _0x1f28ac=_0x17763d,_0x255535={'vqRLF':function(_0x5cc804,_0x304b78){return _0x5cc804===_0x304b78;},'oXeTD':_0x1f28ac(0x140),'ARgSu':_0x1f28ac(0x14c)};if(_0x251d99['password']&&_0x251d99[_0x1f28ac(0x13b)][_0x1f28ac(0x151)]>=0x4&&_0x255535['vqRLF'](typeof _0x251d99[_0x1f28ac(0x13b)],'string')){if(_0x255535[_0x1f28ac(0x12c)](_0x255535[_0x1f28ac(0x12b)],_0x255535[_0x1f28ac(0x15d)]))return-0x1;else _0x251d99[_0x1f28ac(0x13b)]=HashBrown[_0x1f28ac(0x139)][_0x1f28ac(0x160)][_0x1f28ac(0x159)][_0x1f28ac(0x150)](_0x251d99[_0x1f28ac(0x13b)]);}delete _0x251d99['id'],delete proeprties[_0x1f28ac(0x17f)],await HashBrown[_0x1f28ac(0x136)][_0x1f28ac(0x129)]['mergeOne'](_0x1f28ac(0x16b),_0x1f28ac(0x16b),{'username':_0x25e760},_0x251d99);}}function _0x3d3f(){const _0x1bf494=['addUserProjectScope','WnGQy','ARgSu','ZyEfL','exports','Resource','findOne','HsuQj','keys','CeJeY','zJYik','create','eduPm','generateToken','safe','mergeOne','users','DRjfG','validateToken','YBSKH','rKZNg','The\x20last\x20user\x20can\x27t\x20be\x20removed\x20from\x20a\x20project.\x20If\x20you\x20want\x20to\x20delete\x20the\x20project,\x20please\x20do\x20so\x20explicitly','No\x20user\x20by\x20username\x20\x22','isAdmin','NbJtL','updateOne','oNLtD','967384wcOgVh','removeUserProjectScope','VAbBG','validatePassword','soRta','findUser','push','getUser','572248OkaZXF','username','gqbIG','log','return\x20await\x20Promise.resolve(42);','revokeTokens','khmxW','xOvEZ','LkuWA','string','removeToken','updateUser','stringify','crypto','fullName','cleanUpTokens','removeOne','removeUser','DatabaseService','getUserById','oXeTD','vqRLF','return\x20new\x20Date();','updateUserById','14559750ZvPqzt','\x22\x20is\x20already\x20taken','console.log(\x22timer\x22);','getObject','var\x20x\x20=\x2042;\x20return\x20x;','scopes','1299548byTsyF','Service','Chkhh','3009260dqshmj','Entity','4374vqBVdA','password','wJbzd','findToken','toLowerCase','2kAxOXB','bDnKO','getProject','yozNX','makeUserAdmin','kiqMN','1435041YEHjhF','\x22\x20found','805foXHQt','loginUser','tokens','FELXU','scopes.','FPTZy','getAllUsers','logoutUser','createUser','createPasswordHashSalt','length','QyvFD','OScVy','LjHUM','email','duplicateUsernameCheck','nGJKl','reboy','User','KQMCi'];_0x3d3f=function(){return _0x1bf494;};return _0x3d3f();}module[_0x17763d(0x15f)]=UserService;