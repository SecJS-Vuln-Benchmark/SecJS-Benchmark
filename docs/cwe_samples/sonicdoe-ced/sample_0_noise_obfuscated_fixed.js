const _0x2643ce=_0x5243;(function(_0x2f53c9,_0x27b876){const _0x1656fd=_0x5243,_0x4cb2d2=_0x2f53c9();while(!![]){try{const _0x554587=-parseInt(_0x1656fd(0x126))/0x1+parseInt(_0x1656fd(0xfb))/0x2*(-parseInt(_0x1656fd(0x10c))/0x3)+-parseInt(_0x1656fd(0xfd))/0x4*(parseInt(_0x1656fd(0x11d))/0x5)+-parseInt(_0x1656fd(0xf2))/0x6*(parseInt(_0x1656fd(0x106))/0x7)+-parseInt(_0x1656fd(0xfe))/0x8*(parseInt(_0x1656fd(0xe8))/0x9)+-parseInt(_0x1656fd(0x117))/0xa*(parseInt(_0x1656fd(0x124))/0xb)+parseInt(_0x1656fd(0x122))/0xc;if(_0x554587===_0x27b876)break;else _0x4cb2d2['push'](_0x4cb2d2['shift']());}catch(_0x3afe94){_0x4cb2d2['push'](_0x4cb2d2['shift']());}}}(_0x2aaa,0x6d7c2));function _0x2aaa(){const _0x4dc95a=['mockFile','44755VzZyjS','should\x20take\x20config\x20from\x20connection\x20string','should\x20return\x20null\x20if\x20config\x20could\x20not\x20be\x20found','laoik','\x22\x0a\x20\x20}\x20\x0a}','30854736gjJzjg','Configuration\x20finding\x20tests','306163stOfbv','name','119924fFFdhi','random\x20content','Info','should\x20take\x20config\x20from\x20driver\x20directory\x20if\x20no\x20input\x20nor\x20environmental\x20variable\x20present','./../../../lib/configuration/client_configuration','IXuFi','message','MMuiu','DshES','qgfCy','99207cuNjNT','process','../mock/mock_file','Dzjre','bad_perm_config.json','fs/promises','klvlQ','return\x20new\x20Date();','nGpgB','deepEqual','42iBToqR','{\x0a\x20\x20\x22common\x22:\x20{\x0a\x20\x20\x20\x20\x22log_level\x22:\x20\x22','idbNI','HvZgc','\x22,\x0a\x20\x20\x20\x20\x22log_path\x22:\x20\x22','hFaOh','return\x20await\x20Promise.resolve(42);','/some-path/some-directory','join','86YsjauI','Configuration\x20file:\x20','72DlaZsN','472OyRnJB','should\x20take\x20config\x20from\x20home\x20directory\x20if\x20no\x20input\x20nor\x20environmental\x20variable\x20nor\x20in\x20driver\x20directory\x20present','rejects','zyGQp','fail','homedir','should\x20take\x20config\x20from\x20environmental\x20variable\x20if\x20no\x20input\x20present','assert','334649QeiUqO','getClientConfig','strictEqual','BhkcJ','driver\x20directory\x20not\x20set','./../../../lib/util','46179vKHISk','dNuks','conn_config.json','sf_client_config.json','configPath','env_config.json','avEIg','\x20can\x20be\x20modified\x20by\x20group\x20or\x20others','gibberish','stop','cause','70xxrCtS','QqTjG','NtytK','IncorrectPerms','PUwwp'];_0x2aaa=function(){return _0x4dc95a;};return _0x2aaa();}function _0x5243(_0x1856e4,_0x349574){const _0x2aaa62=_0x2aaa();return _0x5243=function(_0x524311,_0xdba29c){_0x524311=_0x524311-0xe2;let _0x2165a0=_0x2aaa62[_0x524311];return _0x2165a0;},_0x5243(_0x1856e4,_0x349574);}const os=require('os'),path=require('path'),assert=require(_0x2643ce(0x105)),mock=require('mock-require'),{Levels,ConfigurationUtil}=require(_0x2643ce(0xe2)),{getDriverDirectory,isWindows}=require(_0x2643ce(0x10b)),{mockFiles,mockClientConfigFileEnvVariable,createFsMock}=require(_0x2643ce(0xea)),defaultConfigName=_0x2643ce(0x10f),badPermissionsConfig=_0x2643ce(0xec),driverDirectory=getDriverDirectory(),configInDriverDirectory=path[_0x2643ce(0xfa)](driverDirectory,defaultConfigName),configInHomeDirectory=path[_0x2643ce(0xfa)](os['homedir'](),defaultConfigName),configFromEnvVariable=_0x2643ce(0x111),configFromConnectionString=_0x2643ce(0x10e),logLevel=Levels[_0x2643ce(0x128)],logPath=_0x2643ce(0xf9),fileContent=_0x2643ce(0xf3)+logLevel+_0x2643ce(0xf6)+logPath+_0x2643ce(0x121),clientConfig={'loggingConfig':{'logLevel':logLevel,'logPath':logPath}};describe(_0x2643ce(0x123),function(){const _0x47bc0b=_0x2643ce,_0x363067={'nGpgB':_0x47bc0b(0xe9),'MMuiu':function(_0x1ea8d9){return _0x1ea8d9();},'hFaOh':'random\x20content','idbNI':function(_0x2d04c8,_0x50231c){return _0x2d04c8(_0x50231c);},'KTHuR':_0x47bc0b(0x10e),'avEIg':function(_0x9f5bd3){return _0x9f5bd3();},'HvZgc':function(_0x32e295,_0x5a7264){return _0x32e295(_0x5a7264);},'qgfCy':_0x47bc0b(0xed),'PUwwp':function(_0x3950bb,_0x4f39c1){return _0x3950bb(_0x4f39c1);},'klvlQ':function(_0x361811,_0x302ccd){return _0x361811(_0x302ccd);},'BhkcJ':function(_0x5dc741,_0x5b288c){return _0x5dc741(_0x5b288c);},'QqTjG':function(_0x323a92,_0x3c4183){return _0x323a92(_0x3c4183);},'BqXYi':_0x47bc0b(0x11a),'zyGQp':_0x47bc0b(0xf8),'Dzjre':function(_0x337b94,_0x63a7a1){return _0x337b94(_0x63a7a1);},'dNuks':function(_0x4ed064,_0x3e05ad,_0x8ff98b){return _0x4ed064(_0x3e05ad,_0x8ff98b);},'laoik':_0x47bc0b(0x129),'DshES':function(_0x24dff8,_0x220bc2){return _0x24dff8(_0x220bc2);},'IXuFi':_0x47bc0b(0xef),'NtytK':_0x47bc0b(0x11f)};after(()=>{const _0x443e54=_0x47bc0b;!driverDirectory&&assert[_0x443e54(0x102)](_0x443e54(0x10a)),mock[_0x443e54(0x115)](_0x443e54(0xed)),mock[_0x443e54(0x115)](_0x363067[_0x443e54(0xf0)]);}),_0x363067[_0x47bc0b(0x10d)](it,_0x47bc0b(0x11e),async function(){const _0x4bd049=_0x47bc0b,_0x429ea4=_0x363067[_0x4bd049(0xe5)](createFsMock)[_0x4bd049(0x11c)](configFromConnectionString,fileContent)[_0x4bd049(0x11c)](configFromEnvVariable,_0x363067[_0x4bd049(0xf7)])['mockFile'](configInDriverDirectory,_0x4bd049(0x127))[_0x4bd049(0x11c)](configInHomeDirectory,_0x4bd049(0x127));_0x363067[_0x4bd049(0xf4)](mockFiles,_0x429ea4),_0x363067[_0x4bd049(0xf4)](mockClientConfigFileEnvVariable,configFromEnvVariable);const _0x18ae70=require(_0x4bd049(0xed)),_0x5048e6=_0x363067[_0x4bd049(0xf4)](require,_0x363067[_0x4bd049(0xf0)]),_0x261063=new ConfigurationUtil(_0x18ae70,_0x5048e6);clientConfig[_0x4bd049(0x110)]=_0x363067['KTHuR'];const _0x3d35a9=await _0x261063['getClientConfig'](configFromConnectionString,!![]);assert['deepEqual'](_0x3d35a9,clientConfig);}),it(_0x47bc0b(0x104),async function(){const _0x2b2dc3=_0x47bc0b,_0x214ed1=_0x363067[_0x2b2dc3(0x112)](createFsMock)['mockFile'](configFromEnvVariable,fileContent)[_0x2b2dc3(0x11c)](configInDriverDirectory,_0x2b2dc3(0x127))[_0x2b2dc3(0x11c)](configInHomeDirectory,_0x2b2dc3(0x127));_0x363067[_0x2b2dc3(0xf4)](mockFiles,_0x214ed1),mockClientConfigFileEnvVariable(configFromEnvVariable);const _0x55ffd0=_0x363067[_0x2b2dc3(0xf5)](require,_0x363067['qgfCy']),_0x296b7d=require(_0x2b2dc3(0xe9)),_0xee4f77=new ConfigurationUtil(_0x55ffd0,_0x296b7d);clientConfig['configPath']=_0x2b2dc3(0x111);const _0x536bdd=await _0xee4f77[_0x2b2dc3(0x107)](null,!![]);assert[_0x2b2dc3(0xf1)](_0x536bdd,clientConfig);}),it(_0x363067[_0x47bc0b(0x120)],async function(){const _0x186bc2=_0x47bc0b,_0x8cfdee=createFsMock()[_0x186bc2(0x11c)](configInDriverDirectory,fileContent)[_0x186bc2(0x11c)](configInHomeDirectory,'random\x20content');_0x363067[_0x186bc2(0x11b)](mockFiles,_0x8cfdee),mockClientConfigFileEnvVariable(undefined);const _0x256c24=require(_0x186bc2(0xed)),_0x8aad6d=require(_0x363067[_0x186bc2(0xf0)]),_0x32a3b7=new ConfigurationUtil(_0x256c24,_0x8aad6d);clientConfig['configPath']=configInDriverDirectory;const _0x48f2e2=await _0x32a3b7[_0x186bc2(0x107)](null,!![]);assert[_0x186bc2(0xf1)](_0x48f2e2,clientConfig);}),it(_0x47bc0b(0xff),async function(){const _0x2874e6=_0x47bc0b,_0x56e947=createFsMock()[_0x2874e6(0x11c)](configInHomeDirectory,fileContent);mockFiles(_0x56e947),mockClientConfigFileEnvVariable(undefined);const _0x147b64=require('fs/promises'),_0x508805=_0x363067[_0x2874e6(0xee)](require,_0x2874e6(0xe9)),_0x39e56e=new ConfigurationUtil(_0x147b64,_0x508805);clientConfig[_0x2874e6(0x110)]=path['join'](os[_0x2874e6(0x103)](),_0x2874e6(0x10f));const _0x151e7a=await _0x39e56e[_0x2874e6(0x107)](null,!![]);assert['deepEqual'](_0x151e7a,clientConfig);}),_0x363067[_0x47bc0b(0xe6)](Function,_0x363067[_0x47bc0b(0xe3)])(),it(_0x363067[_0x47bc0b(0x119)],async function(){const _0xe4d526=_0x47bc0b,_0x244773=createFsMock();_0x363067[_0xe4d526(0xf4)](mockFiles,_0x244773),_0x363067[_0xe4d526(0x109)](mockClientConfigFileEnvVariable,undefined);const _0xe6c4ce=_0x363067[_0xe4d526(0x118)](require,_0x363067[_0xe4d526(0xe7)]),_0x3df995=_0x363067[_0xe4d526(0xee)](require,_0x363067['nGpgB']),_0xbd7163=new ConfigurationUtil(_0xe6c4ce,_0x3df995),_0x420acd=await _0xbd7163['getClientConfig'](null);assert[_0xe4d526(0x108)](_0x420acd,null);}),!isWindows()&&it('should\x20fail\x20to\x20open\x20config\x20when\x20file\x20has\x20bad\x20permissions',async function(){const _0x5531e8=_0x47bc0b,_0x25a88e=_0x363067[_0x5531e8(0xe5)](createFsMock)[_0x5531e8(0x11c)](badPermissionsConfig,_0x5531e8(0x114));mockFiles(_0x25a88e);const _0x4189db=_0x363067[_0x5531e8(0xeb)](require,_0x5531e8(0xed)),_0x39aee9=require(_0x363067[_0x5531e8(0xf0)]),_0x3ad1a8=new ConfigurationUtil(_0x4189db,_0x39aee9),_0x47cff=_0x3ad1a8['getClientConfig'](badPermissionsConfig);await assert[_0x5531e8(0x100)](async()=>await _0x47cff,_0x26be9d=>{const _0x240310=_0x5531e8;return assert[_0x240310(0x108)](_0x26be9d[_0x240310(0x125)],'ConfigurationError'),assert[_0x240310(0x108)](_0x26be9d[_0x240310(0xe4)],_0x240310(0xfc)+badPermissionsConfig+_0x240310(0x113)),assert[_0x240310(0x108)](_0x26be9d[_0x240310(0x116)],_0x363067['BqXYi']),new AsyncFunction(_0x363067[_0x240310(0x101)])(),!![];});});});