function _0x3084(){const _0xef8d8b=['aMfgl','Error\x20trying\x20to\x20retrieve\x20data\x20for\x20statistics.','QnyZB','MHGrq','XiTVZ','bXgnB','map','isArray','listLeases','hostname','Parameter\x20\x27budgetCurrency\x27\x20missing.','130837BMudiS','NntCp','Internal\x20error\x20while\x20trying\x20to\x20execute\x20task.','WTjbi','ozskS','CEzvo','mgoDI','Gkykn','fEXQO','nhgGm','byteLength','MmwQD','nDsWT','yfhwM','rVuIb','leases','DCE_API_GW','SqSQQ','DnlhF','waqnr','lBRec','usage?limit=1000','@aws-sdk/client-dynamodb','jqBvU','3227733wvddZv','accounts?limit=500','endDate','REGION','40uXpdhZ','nAoFb','CkRol','handler','Parameter\x20\x27leaseStatusReason\x27\x20missing.','4707879LywnvD','\x20successfully\x20created.','successMessage','toISOString','282pKqJoP','costAmount','eSqzf','VgwGJ','dHqpN','JjDDs','XpaRJ','https','kqkhX','ToRSm','catch','@aws-sdk/lib-dynamodb','AlreadyExistsError','YJyQW','createdOn','principalId','BrcXd','log','updateLease','JUEOC','\x27paramJson\x27\x20contains\x20malformed\x20JSON\x20string.','request','ZKZCc','No\x20more\x20free\x20AWS\x20accounts\x20available.','XJvUY','RYpdV','Akpxc','eWoGw','Internal\x20error\x20while\x20trying\x20to\x20update\x20lease.','sign','fnlhF','Parameter\x20\x27budgetNotificationEmails\x27\x20missing.','CPira','112054sLprPu','OKRRa','aKBPV','action','execute-api','olGzW','rVERd','kKiMB','Internal\x20error\x20while\x20trying\x20to\x20delete\x20lease.','HVVQg','then','Failed\x20to\x20terminate\x20lease\x20for\x20','leases?limit=500','Lease\x20for\x20','xUeKe','ribyL','UCShF','Parameter\x20\x27expiresOn\x27\x20missing.','FKpSM','end','error','ZBnII','jluQI','code','13743390fxFFSV','zOaqi','mDzIj','kBjSC','Internal\x20error\x20while\x20trying\x20to\x20create\x20lease.','expiresOn','pathname','wXmRq','KvroD','Lambda\x20invoked\x20with\x20the\x20following\x20parameters:\x20','mouJp','startDate','26dQqjKY','Eljox','cSRkx','Parameter\x20\x27principalId\x27\x20missing.','Failed\x20to\x20load\x20statistics\x20data.','rBIMF','toString','tLAjm','pjWBK','JpTAM','rscNN','IDnHg','ServerError','uJUrd','lxJOO','njzbW','WIsqk','getStatistics','createLease','message','unknown\x20API\x20action\x20\x27','success','pZayp','from','sowyN','DELETE','\x20successfully\x20terminated.','Parameter\x20\x27user\x27\x20missing.','write','5DpAZYg','body','dFEYW','Failed\x20to\x20list\x20leases.','GET','WwxxS','aws4','UPDATED_NEW','iFGoh','YWuJJ','oRgNI','Bobgk','Event\x20arguments\x20missing.','parse','Failed\x20to\x20create\x20lease\x20for\x20','Found\x20already\x20existing\x20lease\x20for\x20','substring','Error\x20trying\x20to\x20retrieve\x20usage\x20data.','Parameter\x20\x27accountId\x27\x20missing.','XGlcr','ZvRlJ','kNlwZ','send','JNsix','all','Error\x20trying\x20to\x20update\x20DynamoDB\x20table\x20record\x20for\x20lease\x20for\x20','MlAIW','sgbgU','listUsage','JPzcK','DYsoZ','sVUnn','1223676dEzCkE','Internal\x20error\x20while\x20trying\x20to\x20terminate\x20lease.','DVsIa','paramJson','oZcIN','\x20successfully\x20updated.','IZVEc','pilbO','Parameter\x20\x27budgetAmount\x27\x20missing.','NWeXB','Parameter\x20\x27leaseStatus\x27\x20missing.','Error\x20trying\x20to\x20delete\x20lease\x20for\x20','\x20successfully\x20deleted.','EaVDd','7106264tTySVR','Failed\x20to\x20load\x20usage\x20data.','4|2|0|5|3|1','No\x20Available\x20accounts\x20at\x20this\x20moment','Statistics\x20data\x20successfully\x20compiled.','POST','gnZBN','stringify','env','JNRJf','sMggC','DynamoDB\x20table\x20record\x20for\x20lease\x20for\x20','eMqBp','data','BiiGp','headers','DCE_LEASES_TABLE','TygvG','eFmvT'];_0x3084=function(){return _0xef8d8b;};return _0x3084();}function _0x57eb(_0x68bad8,_0xff1229){const _0x308420=_0x3084();return _0x57eb=function(_0x57eb46,_0x3702ab){_0x57eb46=_0x57eb46-0x1f4;let _0x4f9fa4=_0x308420[_0x57eb46];return _0x4f9fa4;},_0x57eb(_0x68bad8,_0xff1229);}const _0x4a5574=_0x57eb;(function(_0x171bb1,_0x363d19){const _0x444afa=_0x57eb,_0x2ecda2=_0x171bb1();while(!![]){try{const _0xeabbbb=-parseInt(_0x444afa(0x2a4))/0x1*(-parseInt(_0x444afa(0x280))/0x2)+parseInt(_0x444afa(0x20e))/0x3+-parseInt(_0x444afa(0x21c))/0x4*(-parseInt(_0x444afa(0x2c1))/0x5)+-parseInt(_0x444afa(0x25f))/0x6*(-parseInt(_0x444afa(0x23a))/0x7)+-parseInt(_0x444afa(0x256))/0x8*(parseInt(_0x444afa(0x252))/0x9)+-parseInt(_0x444afa(0x298))/0xa+-parseInt(_0x444afa(0x25b))/0xb;if(_0xeabbbb===_0x363d19)break;else _0x2ecda2['push'](_0x2ecda2['shift']());}catch(_0x4960c3){_0x2ecda2['push'](_0x2ecda2['shift']());}}}(_0x3084,0xe19dc));const https=require(_0x4a5574(0x266)),aws4=require(_0x4a5574(0x1f4)),{DynamoDBClient}=require(_0x4a5574(0x250)),{DynamoDBDocumentClient,UpdateCommand,DeleteCommand}=require(_0x4a5574(0x26a)),apiUrl=new URL(process[_0x4a5574(0x224)][_0x4a5574(0x24a)]),region=process[_0x4a5574(0x224)][_0x4a5574(0x255)],leasesTable=process['env'][_0x4a5574(0x22c)],serviceName=_0x4a5574(0x284),ddbClient=new DynamoDBClient({'region':region}),ddbDocClient=DynamoDBDocumentClient[_0x4a5574(0x2bb)](ddbClient),respondWithError=(_0x315720='Internal\x20error.',_0x51b20d={})=>{const _0x448887=_0x4a5574,_0x377369={'ImOZw':_0x448887(0x294)};return console[_0x448887(0x294)](_0x315720,_0x51b20d),JSON[_0x448887(0x223)]({'status':_0x377369['ImOZw'],'message':_0x315720,'errorObject':_0x51b20d});},respondWithSuccess=(_0x2a027f='',_0x1820da={})=>{const _0x3ac81e=_0x4a5574,_0x421fb9={'eSqzf':function(_0x31ea4b,_0x241b78){return _0x31ea4b!==_0x241b78;}};let _0x4c26e4={'status':_0x3ac81e(0x2b9),'body':_0x1820da};return _0x421fb9[_0x3ac81e(0x261)](_0x2a027f,'')&&(console[_0x3ac81e(0x270)](_0x2a027f,_0x1820da),_0x4c26e4[_0x3ac81e(0x25d)]=_0x2a027f),JSON['stringify'](_0x4c26e4);},invokeApi=(_0x4a96cb,_0x13eb82,_0x5512a3=null)=>{const _0x39b868=_0x4a5574,_0x180758={'WIsqk':_0x39b868(0x229),'sgbgU':_0x39b868(0x294),'MNEvr':function(_0x259ae4,_0x262f3a){return _0x259ae4(_0x262f3a);},'oRgNI':_0x39b868(0x20a),'XiTVZ':function(_0x3681a9,_0x1fb03f){return _0x3681a9+_0x1fb03f;},'rscNN':function(_0x33c894,_0x58b5bf){return _0x33c894!==_0x58b5bf;},'pjWBK':function(_0x2ec8ad,_0x5743ae){return _0x2ec8ad===_0x5743ae;},'mgoDI':_0x39b868(0x210)};return new Promise((_0x4ee3af,_0x32ff95)=>{const _0x46e51c=_0x39b868,_0x4786b1={'waqnr':'listLeases','uJUrd':function(_0x29a2d6,_0x5c8743){return _0x180758['MNEvr'](_0x29a2d6,_0x5c8743);},'WTjbi':function(_0x4eb0da,_0x700580){return _0x4eb0da(_0x700580);},'YWuJJ':'deleteLease','JNRJf':_0x46e51c(0x2b5),'DYsoZ':_0x180758[_0x46e51c(0x1f8)]},_0x922c57=JSON[_0x46e51c(0x223)](_0x5512a3);let _0x2f55f8={'hostname':apiUrl[_0x46e51c(0x238)],'service':serviceName,'region':region,'method':_0x13eb82,'path':_0x180758[_0x46e51c(0x233)](apiUrl[_0x46e51c(0x29e)]+'/',_0x4a96cb)};if(_0x180758[_0x46e51c(0x2ae)](_0x5512a3,null)){if(_0x180758[_0x46e51c(0x2ac)]('IlRMg',_0x180758[_0x46e51c(0x240)]))switch(_0x2fd33f[_0x46e51c(0x283)]){case _0x4786b1[_0x46e51c(0x24d)]:return _0x1e2545();case'updateLease':return _0x4786b1['uJUrd'](_0x3d8c71,_0x10e36b);case'createLease':return _0x4786b1[_0x46e51c(0x23d)](_0x3cccd1,_0x48d630);case'terminateLease':return _0x4786b1[_0x46e51c(0x2b1)](_0x13673e,_0x2bab21);case _0x4786b1[_0x46e51c(0x1f7)]:return _0x4786b1[_0x46e51c(0x2b1)](_0x841eac,_0x5f2be9);case _0x4786b1[_0x46e51c(0x225)]:return _0x596000();case _0x4786b1[_0x46e51c(0x20c)]:return _0x2c6e9f();default:throw new _0xdac121(_0x46e51c(0x2b8)+_0x1b07cf[_0x46e51c(0x283)]+'\x27');}else _0x2f55f8[_0x46e51c(0x2c2)]=_0x922c57,_0x2f55f8[_0x46e51c(0x22b)]={'Content-Type':'application/json','Content-Length':Buffer[_0x46e51c(0x244)](_0x922c57)};}const _0x54703a=https[_0x46e51c(0x274)](aws4[_0x46e51c(0x27c)](_0x2f55f8),_0xcda08a=>{const _0x2f4240=_0x46e51c,_0x145bd5={'IDnHg':_0x2f4240(0x246)};let _0x96318e='';_0xcda08a['on'](_0x180758[_0x2f4240(0x2b4)],_0x4f804f=>{_0x96318e+=_0x4f804f;}),_0xcda08a['on'](_0x2f4240(0x293),()=>{const _0x5c3745=_0x2f4240;let _0x42e855;try{_0x42e855=JSON[_0x5c3745(0x1fb)](_0x96318e[_0x5c3745(0x2aa)]());}catch(_0xc154eb){if(_0x145bd5[_0x5c3745(0x2af)]!==_0x5c3745(0x246))return _0x4388c4('Internal\x20error\x20while\x20trying\x20to\x20execute\x20task.',_0x337822);else _0x42e855=_0x96318e[_0x5c3745(0x2aa)]();}_0x4ee3af(_0x42e855);}),_0xcda08a['on'](_0x180758[_0x2f4240(0x209)],_0x2de332=>_0x32ff95(_0x2de332));});_0x54703a[_0x46e51c(0x2c0)](_0x922c57),_0x54703a[_0x46e51c(0x293)]();});},listLeases=()=>{const _0x3e9e0d=_0x4a5574,_0x2cbfc2={'MlAIW':function(_0x3d25cf,_0x2d5afe,_0x434508){return _0x3d25cf(_0x2d5afe,_0x434508);},'wXmRq':_0x3e9e0d(0x288),'CEzvo':'Parameter\x20\x27principalId\x27\x20missing.','OKRRa':_0x3e9e0d(0x200),'VgwGJ':'Parameter\x20\x27user\x27\x20missing.','CkRol':function(_0x353eea,_0x27432e,_0x349200){return _0x353eea(_0x27432e,_0x349200);},'ZvRlJ':'Failed\x20to\x20list\x20usage.','kKiMB':_0x3e9e0d(0x2c4),'XpaRJ':'GET','jluQI':function(_0x46c2c9,_0x39713d,_0x2ff710){return _0x46c2c9(_0x39713d,_0x2ff710);},'Akpxc':_0x3e9e0d(0x24f)},_0x42ef0b=_0x1a780d=>{const _0x2c49a2=_0x3e9e0d;if(_0x2c49a2(0x22a)===_0x2c49a2(0x22a))return new Date(_0x1a780d)[_0x2c49a2(0x25e)]()[_0x2c49a2(0x1fe)](0x0,0xa);else{if(!_0x2d6cd8)return _0x2cbfc2['MlAIW'](_0x43dea9,_0x2cbfc2[_0x2c49a2(0x29f)],_0x2cbfc2[_0x2c49a2(0x23f)]);if(!_0x1d3274)return _0x477907(_0x2cbfc2['wXmRq'],_0x2cbfc2[_0x2c49a2(0x281)]);if(!_0x25ac71)return _0x9af0f7(_0x2cbfc2[_0x2c49a2(0x29f)],_0x2cbfc2[_0x2c49a2(0x262)]);return _0x147b4e[_0x2c49a2(0x204)](new _0x41288f({'TableName':_0x5db815,'Key':{'AccountId':_0x23ab44,'PrincipalId':_0x1a0ae6}}))[_0x2c49a2(0x28a)](_0x532282=>_0x24c33c(_0x2c49a2(0x28d)+_0x325f09+_0x2c49a2(0x21a),_0x532282))['catch'](_0x1c2231=>_0x570455(_0x2c49a2(0x219)+_0x1e9ddc+'.',_0x1c2231));}};return Promise[_0x3e9e0d(0x206)]([_0x2cbfc2[_0x3e9e0d(0x258)](invokeApi,_0x3e9e0d(0x28c),_0x2cbfc2[_0x3e9e0d(0x265)]),_0x2cbfc2[_0x3e9e0d(0x296)](invokeApi,_0x2cbfc2[_0x3e9e0d(0x279)],_0x2cbfc2[_0x3e9e0d(0x265)])])[_0x3e9e0d(0x28a)](_0x3d6c3c=>{const _0x2181ea=_0x3e9e0d,_0x176630=_0x2181ea(0x21e)['split']('|');let _0x2d2735=0x0;while(!![]){switch(_0x176630[_0x2d2735++]){case'0':if(_0x3d6c3c[0x1][_0x2181ea(0x2b7)])return _0x2cbfc2[_0x2181ea(0x258)](respondWithError,_0x2cbfc2[_0x2181ea(0x202)],_0x3d6c3c[0x1]['message']);continue;case'1':return _0x2cbfc2['CkRol'](respondWithSuccess,'',{'leases':_0x3d6c3c[0x0][_0x2181ea(0x235)](_0x4b2870=>({..._0x4b2870,'spendAmount':_0x3d6c3c[0x1]['reduce']((_0x21131a,_0x41d69c)=>_0x41d69c[_0x2181ea(0x26e)]===_0x4b2870[_0x2181ea(0x26e)]&&_0x41d69c['accountId']===_0x4b2870['accountId']&&_0x42ef0b(_0x41d69c[_0x2181ea(0x2a3)])>=_0x42ef0b(_0x4b2870[_0x2181ea(0x26d)])&&_0x42ef0b(_0x41d69c[_0x2181ea(0x254)])<=_0x42ef0b(_0x4b2870[_0x2181ea(0x29d)])?_0x21131a+parseFloat(_0x41d69c[_0x2181ea(0x260)]):_0x21131a,0x0)}))});case'2':if(_0x3d6c3c[0x0][_0x2181ea(0x2b7)])return _0x2cbfc2[_0x2181ea(0x208)](respondWithError,_0x2cbfc2[_0x2181ea(0x287)],_0x3d6c3c[0x0][_0x2181ea(0x2b7)]);continue;case'3':if(!Array[_0x2181ea(0x236)](_0x3d6c3c[0x1]))return respondWithError(_0x2cbfc2['kKiMB'],_0x3d6c3c[0x1]);continue;case'4':if(_0x3d6c3c[_0x2181ea(0x294)])return respondWithError(_0x2cbfc2[_0x2181ea(0x287)],_0x3d6c3c[_0x2181ea(0x294)]);continue;case'5':if(!Array[_0x2181ea(0x236)](_0x3d6c3c[0x0]))return respondWithError(_0x2181ea(0x2c4),_0x3d6c3c[0x0]);continue;}break;}});},createLease=({budgetAmount:_0x52c27c,expiresOn:_0x454929,principalId:_0x27f18b,budgetNotificationEmails:_0x222b6d,budgetCurrency:_0x1916e7,user:_0x14896a})=>{const _0xcc5052=_0x4a5574,_0x3b0194={'aKBPV':_0xcc5052(0x2a8),'kBjSC':_0xcc5052(0x220),'iFGoh':_0xcc5052(0x2a9),'oZcIN':function(_0xdfa6b9,_0x1281f4,_0x86c9d9){return _0xdfa6b9(_0x1281f4,_0x86c9d9);},'bXgnB':_0xcc5052(0x276),'FKpSM':function(_0x1beafa,_0x44dd2b){return _0x1beafa+_0x44dd2b;},'nAoFb':'Failed\x20to\x20create\x20lease\x20for\x20','RYpdV':function(_0x527273,_0x56cc72,_0x27fd8a){return _0x527273(_0x56cc72,_0x27fd8a);},'kqkhX':_0xcc5052(0x216),'rVERd':_0xcc5052(0x29c),'sVUnn':_0xcc5052(0x291),'NntCp':_0xcc5052(0x2a7),'YJyQW':_0xcc5052(0x27e),'dFEYW':_0xcc5052(0x249),'dHqpN':_0xcc5052(0x221)};if(!_0x52c27c)return _0x3b0194[_0xcc5052(0x278)](respondWithError,_0xcc5052(0x29c),_0x3b0194[_0xcc5052(0x267)]);if(!_0x454929)return respondWithError(_0x3b0194[_0xcc5052(0x286)],_0x3b0194[_0xcc5052(0x20d)]);if(!_0x27f18b)return _0x3b0194['RYpdV'](respondWithError,_0xcc5052(0x29c),_0x3b0194[_0xcc5052(0x23b)]);if(!_0x1916e7)return respondWithError(_0xcc5052(0x29c),_0xcc5052(0x239));if(!_0x222b6d)return _0x3b0194[_0xcc5052(0x278)](respondWithError,_0x3b0194[_0xcc5052(0x286)],_0x3b0194[_0xcc5052(0x26c)]);if(!_0x14896a)return _0x3b0194[_0xcc5052(0x278)](respondWithError,_0xcc5052(0x29c),'Parameter\x20\x27user\x27\x20missing.');return invokeApi(_0x3b0194[_0xcc5052(0x2c3)],_0x3b0194[_0xcc5052(0x263)],{'budgetAmount':_0x52c27c,'expiresOn':_0x454929,'principalId':_0x27f18b,'budgetNotificationEmails':_0x222b6d,'budgetCurrency':_0x1916e7})['then'](_0x3464d0=>{const _0x1cea13=_0xcc5052;if(_0x3464d0[_0x1cea13(0x294)]){if('rBIMF'!==_0x3b0194[_0x1cea13(0x1f6)]){if(_0x1be8e1['error'])return _0x3a8119(_0x3b0194[_0x1cea13(0x282)],_0x31ff32[_0x1cea13(0x294)]);if(_0x14f752[0x0][_0x1cea13(0x2b7)]||_0x4feed4[0x1]['message']||_0x13617b[0x2][_0x1cea13(0x2b7)]||!_0x5bda7f[_0x1cea13(0x236)](_0x542948[0x0])||!_0x3c3e3a['isArray'](_0x2963a0[0x1])||!_0x9756a6[_0x1cea13(0x236)](_0x34cdf5[0x2]))return _0x223b1e('Failed\x20to\x20load\x20statistics\x20data.',_0x50317d);return _0x24bf1e(_0x3b0194[_0x1cea13(0x29b)],{'leases':_0x351625[0x0],'accounts':_0x45b23d[0x1],'usage':_0x4b18c3[0x2]});}else switch(_0x3464d0['error'][_0x1cea13(0x297)]){case _0x1cea13(0x2b0):if(_0x3464d0[_0x1cea13(0x294)]['message']===_0x1cea13(0x21f))return _0x3b0194['oZcIN'](respondWithError,_0x3b0194[_0x1cea13(0x234)],_0x3464d0[_0x1cea13(0x294)]);else return respondWithError(_0x3b0194['FKpSM'](_0x3b0194[_0x1cea13(0x257)]+_0x14896a,'.'),_0x3464d0[_0x1cea13(0x294)]);case _0x1cea13(0x26b):return _0x3b0194[_0x1cea13(0x212)](respondWithError,_0x3b0194[_0x1cea13(0x292)](_0x1cea13(0x1fd),_0x14896a)+'.',_0x3464d0[_0x1cea13(0x294)]);default:return respondWithError('Failed\x20to\x20create\x20lease\x20for\x20'+_0x14896a+'.',_0x3464d0[_0x1cea13(0x294)]);}}return respondWithSuccess(_0x3b0194[_0x1cea13(0x292)](_0x1cea13(0x28d),_0x14896a)+_0x1cea13(0x25c),_0x3464d0);})[_0xcc5052(0x269)](_0x55bf0e=>respondWithError('Failed\x20to\x20create\x20lease\x20for\x20'+_0x14896a+'.',_0x55bf0e));},updateLease=({accountId:_0x93c118,leaseStatus:_0x5f423e,leaseStatusReason:_0x3e5b28,budgetAmount:_0x5e7cbb,expiresOn:_0x1ad5e5,principalId:_0x5189e4,budgetNotificationEmails:_0x4ff413,user:_0x495217})=>{const _0x440946=_0x4a5574,_0x1f6cff={'WwxxS':function(_0x3065ba,_0x3e12f7,_0x26aef4){return _0x3065ba(_0x3e12f7,_0x26aef4);},'lBRec':_0x440946(0x218),'oeOlo':function(_0x32ac5e,_0x358fec,_0x4ef86c){return _0x32ac5e(_0x358fec,_0x4ef86c);},'yfhwM':_0x440946(0x216),'jqBvU':function(_0x3f6353,_0x46bbc0,_0x19cac4){return _0x3f6353(_0x46bbc0,_0x19cac4);},'JpTAM':_0x440946(0x27b),'pZayp':function(_0x3ddc99,_0x16e1e7,_0x51297){return _0x3ddc99(_0x16e1e7,_0x51297);},'aMfgl':'Parameter\x20\x27budgetNotificationEmails\x27\x20missing.','Gkykn':'set\x20LeaseStatus\x20=\x20:s,\x20LeaseStatusReason=:r,\x20BudgetAmount=:b,\x20ExpiresOn=:e,\x20BudgetNotificationEmails=:n','fzwFb':_0x440946(0x1f5)};if(!_0x5f423e)return _0x1f6cff[_0x440946(0x2c6)](respondWithError,_0x440946(0x27b),_0x1f6cff[_0x440946(0x24e)]);if(!_0x3e5b28)return _0x1f6cff[_0x440946(0x2c6)](respondWithError,'Internal\x20error\x20while\x20trying\x20to\x20update\x20lease.',_0x440946(0x25a));if(!_0x5e7cbb)return _0x1f6cff['oeOlo'](respondWithError,_0x440946(0x27b),_0x1f6cff[_0x440946(0x247)]);if(!_0x1ad5e5)return _0x1f6cff[_0x440946(0x251)](respondWithError,_0x1f6cff[_0x440946(0x2ad)],'Parameter\x20\x27expiresOn\x27\x20missing.');if(!_0x93c118)return respondWithError(_0x1f6cff[_0x440946(0x2ad)],_0x440946(0x200));if(!_0x5189e4)return _0x1f6cff[_0x440946(0x2ba)](respondWithError,_0x1f6cff[_0x440946(0x2ad)],'Parameter\x20\x27principalId\x27\x20missing.');if(!_0x4ff413)return respondWithError(_0x440946(0x27b),_0x1f6cff[_0x440946(0x22f)]);if(!_0x495217)return respondWithError(_0x440946(0x27b),_0x440946(0x2bf));return ddbDocClient[_0x440946(0x204)](new UpdateCommand({'TableName':leasesTable,'Key':{'AccountId':_0x93c118,'PrincipalId':_0x5189e4},'UpdateExpression':_0x1f6cff[_0x440946(0x241)],'ExpressionAttributeValues':{':s':_0x5f423e,':r':_0x3e5b28,':b':_0x5e7cbb,':e':_0x1ad5e5,':n':_0x4ff413},'ReturnValues':_0x1f6cff['fzwFb']}))[_0x440946(0x28a)](_0x2917a9=>respondWithSuccess(_0x440946(0x227)+_0x495217+_0x440946(0x213),_0x2917a9))[_0x440946(0x269)](_0x5cc7f7=>respondWithError(_0x440946(0x207)+_0x495217+'.',_0x5cc7f7));},terminateLease=({user:_0x581be2,principalId:_0x2b741f,accountId:_0x22eafd})=>{const _0x2deae6=_0x4a5574,_0x3df3c3={'TygvG':function(_0x1178d1,_0x103f60,_0x2e3a0a){return _0x1178d1(_0x103f60,_0x2e3a0a);},'sowyN':function(_0x1b85cb,_0x24f212){return _0x1b85cb+_0x24f212;},'nNDpU':function(_0x171862,_0x57e497){return _0x171862+_0x57e497;},'MHGrq':_0x2deae6(0x28b),'gnZBN':function(_0x13605e,_0x37807a,_0x17e5bd){return _0x13605e(_0x37807a,_0x17e5bd);},'eMqBp':function(_0x515104,_0x3f8963){return _0x515104+_0x3f8963;},'nhgGm':_0x2deae6(0x28d),'qdCwc':_0x2deae6(0x2a7),'XGlcr':_0x2deae6(0x20f),'QnyZB':_0x2deae6(0x2bf),'xNrDn':function(_0x886bf9,_0x2ff366,_0x5a62a7,_0x465392){return _0x886bf9(_0x2ff366,_0x5a62a7,_0x465392);},'BGMzs':_0x2deae6(0x249)};if(!_0x2b741f)return respondWithError(_0x2deae6(0x20f),_0x3df3c3['qdCwc']);if(!_0x22eafd)return respondWithError(_0x3df3c3['XGlcr'],_0x2deae6(0x200));if(!_0x581be2)return _0x3df3c3[_0x2deae6(0x222)](respondWithError,_0x3df3c3[_0x2deae6(0x201)],_0x3df3c3[_0x2deae6(0x231)]);return _0x3df3c3['xNrDn'](invokeApi,_0x3df3c3['BGMzs'],_0x2deae6(0x2bd),{'principalId':_0x2b741f,'accountId':_0x22eafd})[_0x2deae6(0x28a)](_0x2b53aa=>{const _0x44f6ee=_0x2deae6;if(_0x2b53aa[_0x44f6ee(0x2b7)])return _0x3df3c3[_0x44f6ee(0x22d)](respondWithError,_0x3df3c3[_0x44f6ee(0x2bc)](_0x3df3c3['nNDpU'](_0x3df3c3[_0x44f6ee(0x232)],_0x581be2),'.'),_0x2b53aa[_0x44f6ee(0x2b7)]);return _0x3df3c3[_0x44f6ee(0x222)](respondWithSuccess,_0x3df3c3[_0x44f6ee(0x228)](_0x3df3c3[_0x44f6ee(0x243)]+_0x581be2,_0x44f6ee(0x2be)),_0x2b53aa);})[_0x2deae6(0x269)](_0x6845a8=>respondWithError(_0x2deae6(0x28b)+_0x581be2+'.',_0x6845a8));},deleteLease=({accountId:_0x1fa311,principalId:_0x3d2006,user:_0x309e77})=>{const _0x47626f=_0x4a5574,_0xa7fdaa={'DnlhF':function(_0x1aaf17,_0x321918,_0x503797){return _0x1aaf17(_0x321918,_0x503797);},'EaVDd':_0x47626f(0x2a7),'ZKZCc':'Parameter\x20\x27user\x27\x20missing.'};if(!_0x3d2006)return _0xa7fdaa['DnlhF'](respondWithError,_0x47626f(0x288),_0xa7fdaa[_0x47626f(0x21b)]);if(!_0x1fa311)return _0xa7fdaa[_0x47626f(0x24c)](respondWithError,_0x47626f(0x288),_0x47626f(0x200));if(!_0x309e77)return respondWithError('Internal\x20error\x20while\x20trying\x20to\x20delete\x20lease.',_0xa7fdaa[_0x47626f(0x275)]);return ddbDocClient[_0x47626f(0x204)](new DeleteCommand({'TableName':leasesTable,'Key':{'AccountId':_0x1fa311,'PrincipalId':_0x3d2006}}))[_0x47626f(0x28a)](_0x53161c=>respondWithSuccess('Lease\x20for\x20'+_0x309e77+'\x20successfully\x20deleted.',_0x53161c))[_0x47626f(0x269)](_0x30005c=>respondWithError(_0x47626f(0x219)+_0x309e77+'.',_0x30005c));},getStatistics=()=>{const _0x322415=_0x4a5574,_0xada99e={'fnlhF':'Failed\x20to\x20load\x20statistics\x20data.','CPira':_0x322415(0x220),'JjDDs':function(_0x2c8cfd,_0x182949,_0x38be6d){return _0x2c8cfd(_0x182949,_0x38be6d);}};return Promise['all']([invokeApi(_0x322415(0x28c),_0x322415(0x2c5)),_0xada99e[_0x322415(0x264)](invokeApi,_0x322415(0x253),_0x322415(0x2c5)),invokeApi('usage?limit10500',_0x322415(0x2c5))])[_0x322415(0x28a)](_0x12459e=>{const _0x900bc5=_0x322415;if(_0x12459e[_0x900bc5(0x294)])return respondWithError(_0x900bc5(0x2a8),_0x12459e[_0x900bc5(0x294)]);if(_0x12459e[0x0]['message']||_0x12459e[0x1][_0x900bc5(0x2b7)]||_0x12459e[0x2][_0x900bc5(0x2b7)]||!Array['isArray'](_0x12459e[0x0])||!Array['isArray'](_0x12459e[0x1])||!Array[_0x900bc5(0x236)](_0x12459e[0x2]))return respondWithError(_0xada99e[_0x900bc5(0x27d)],_0x12459e);return respondWithSuccess(_0xada99e[_0x900bc5(0x27f)],{'leases':_0x12459e[0x0],'accounts':_0x12459e[0x1],'usage':_0x12459e[0x2]});})[_0x322415(0x269)](_0x3e2d62=>respondWithError(_0x322415(0x230),_0x3e2d62));},listUsage=()=>{const _0x59f1e8=_0x4a5574,_0x327de9={'SlJev':'Failed\x20to\x20terminate\x20lease\x20for\x20','VDUsm':_0x59f1e8(0x20f),'ozskS':_0x59f1e8(0x2a7),'olGzW':function(_0x40e7fd,_0x51d4ce,_0x39df60){return _0x40e7fd(_0x51d4ce,_0x39df60);},'JNsix':function(_0xeaf468,_0x118dbb,_0x511efb){return _0xeaf468(_0x118dbb,_0x511efb);},'kNlwZ':_0x59f1e8(0x249),'eFmvT':function(_0x438337,_0x1f0617){return _0x438337!==_0x1f0617;},'bsXfo':_0x59f1e8(0x215),'mouJp':_0x59f1e8(0x217),'JUEOC':_0x59f1e8(0x21d),'mDzIj':function(_0x2437e3,_0x14f84e,_0x4bdbde){return _0x2437e3(_0x14f84e,_0x4bdbde);},'JPzcK':_0x59f1e8(0x2c5),'sMggC':_0x59f1e8(0x24f)};return Promise[_0x59f1e8(0x206)]([invokeApi(_0x59f1e8(0x28c),_0x327de9[_0x59f1e8(0x20b)]),_0x327de9[_0x59f1e8(0x285)](invokeApi,_0x327de9[_0x59f1e8(0x226)],_0x327de9['JPzcK'])])[_0x59f1e8(0x28a)](_0x426e28=>{const _0x3cc37a=_0x59f1e8;if(_0x327de9[_0x3cc37a(0x22e)](_0x327de9['bsXfo'],_0x327de9[_0x3cc37a(0x2a2)])){if(_0x426e28['error'])return respondWithError(_0x327de9[_0x3cc37a(0x272)],_0x426e28['error']);if(_0x426e28[0x0]['message']||_0x426e28[0x1][_0x3cc37a(0x2b7)]||!Array[_0x3cc37a(0x236)](_0x426e28[0x0])||!Array['isArray'](_0x426e28[0x1]))return _0x327de9['JNsix'](respondWithError,_0x3cc37a(0x21d),_0x426e28[_0x3cc37a(0x2b7)]);return _0x327de9[_0x3cc37a(0x29a)](respondWithSuccess,'Usage\x20data\x20successfully\x20loaded.',{'leases':_0x426e28[0x0],'usage':_0x426e28[0x1]});}else{const _0x5e01c7={'HVVQg':function(_0x4555ed,_0x2fc3b9,_0x35e4c7){return _0x4555ed(_0x2fc3b9,_0x35e4c7);},'WVFZa':_0x327de9['SlJev']};if(!_0x3b964a)return _0x5a91d1(_0x327de9['VDUsm'],_0x327de9[_0x3cc37a(0x23e)]);if(!_0x3955dc)return _0x327de9[_0x3cc37a(0x285)](_0x23940e,_0x3cc37a(0x20f),_0x3cc37a(0x200));if(!_0x58120d)return _0x327de9[_0x3cc37a(0x205)](_0x2087ba,_0x3cc37a(0x20f),'Parameter\x20\x27user\x27\x20missing.');return _0x100f12(_0x327de9[_0x3cc37a(0x203)],_0x3cc37a(0x2bd),{'principalId':_0x18bc2d,'accountId':_0x4520dd})[_0x3cc37a(0x28a)](_0x292c9c=>{const _0x2595b4=_0x3cc37a;if(_0x292c9c[_0x2595b4(0x2b7)])return _0x5e01c7[_0x2595b4(0x289)](_0x3f9a1c,_0x5e01c7['WVFZa']+_0x1ea489+'.',_0x292c9c[_0x2595b4(0x2b7)]);return _0x1d2417(_0x2595b4(0x28d)+_0x1146a8+'\x20successfully\x20terminated.',_0x292c9c);})[_0x3cc37a(0x269)](_0x1adc97=>_0x495daf(_0x3cc37a(0x28b)+_0x774967+'.',_0x1adc97));}})[_0x59f1e8(0x269)](_0xf2da41=>respondWithError(_0x59f1e8(0x1ff),_0xf2da41));};exports[_0x4a5574(0x259)]=async(_0x55c50a,_0x501cfb)=>{const _0x212539=_0x4a5574,_0x396bb9={'MmwQD':_0x212539(0x21f),'UCShF':function(_0x23de9d,_0x253d7,_0x5935db){return _0x23de9d(_0x253d7,_0x5935db);},'KvroD':function(_0x27491e,_0x4bd21d){return _0x27491e+_0x4bd21d;},'IZVEc':function(_0x55c112,_0x31e95e){return _0x55c112+_0x31e95e;},'fXJRh':_0x212539(0x1fc),'ajJTD':'AlreadyExistsError','ZBnII':function(_0x57b1ca,_0x513f43){return _0x57b1ca+_0x513f43;},'tLAjm':_0x212539(0x1fd),'lxJOO':function(_0x21f6af,_0x14a6ab,_0x7bad98){return _0x21f6af(_0x14a6ab,_0x7bad98);},'SqSQQ':function(_0x377560,_0x3cbf44){return _0x377560+_0x3cbf44;},'ToRSm':function(_0x30ff7d,_0x11ae3c){return _0x30ff7d+_0x11ae3c;},'cSRkx':_0x212539(0x28d),'uOExp':_0x212539(0x2a1),'ribyL':_0x212539(0x1fa),'Yuniq':'Internal\x20error\x20while\x20trying\x20to\x20execute\x20task.','xUeKe':_0x212539(0x273),'Eljox':function(_0x615dd7){return _0x615dd7();},'IQPpG':_0x212539(0x271),'eWoGw':function(_0xc81ee9,_0x29d6f1){return _0xc81ee9(_0x29d6f1);},'rVuIb':_0x212539(0x2b6),'njzbW':'deleteLease','Bobgk':function(_0x3bfce2,_0x43572f){return _0x3bfce2(_0x43572f);},'fEXQO':_0x212539(0x2b5),'BrcXd':_0x212539(0x2b8),'zOaqi':'XJvUY'};console[_0x212539(0x270)](_0x396bb9['uOExp'],_0x55c50a,_0x501cfb);let _0x149787=_0x55c50a['arguments'];if(!_0x149787)return _0x396bb9[_0x212539(0x290)](respondWithError,_0x212539(0x23c),_0x396bb9[_0x212539(0x28f)]);if(!_0x149787[_0x212539(0x283)])return respondWithError(_0x396bb9['Yuniq'],'Parameter\x20\x27action\x27\x20missing.');let _0x57edf5;if(_0x149787['paramJson'])try{_0x57edf5=JSON['parse'](_0x149787[_0x212539(0x211)]);}catch(_0x4ab1ca){return respondWithError(_0x396bb9[_0x212539(0x28e)]);}try{switch(_0x149787[_0x212539(0x283)]){case _0x212539(0x237):return _0x396bb9[_0x212539(0x2a5)](listLeases);case _0x396bb9['IQPpG']:return _0x396bb9[_0x212539(0x27a)](updateLease,_0x57edf5);case _0x396bb9[_0x212539(0x248)]:return createLease(_0x57edf5);case'terminateLease':return terminateLease(_0x57edf5);case _0x396bb9[_0x212539(0x2b3)]:return _0x396bb9[_0x212539(0x1f9)](deleteLease,_0x57edf5);case _0x396bb9[_0x212539(0x242)]:return _0x396bb9[_0x212539(0x2a5)](getStatistics);case _0x212539(0x20a):return listUsage();default:throw new Error(_0x396bb9[_0x212539(0x26f)]+_0x149787['action']+'\x27');}}catch(_0x23f6f0){if(_0x212539(0x277)!==_0x396bb9[_0x212539(0x299)]){if(_0x6db57f['error'])switch(_0x58cb87[_0x212539(0x294)][_0x212539(0x297)]){case _0x212539(0x2b0):if(_0x241af9[_0x212539(0x294)][_0x212539(0x2b7)]===_0x396bb9[_0x212539(0x245)])return _0x396bb9[_0x212539(0x290)](_0x404419,'No\x20more\x20free\x20AWS\x20accounts\x20available.',_0xf6df62[_0x212539(0x294)]);else return _0x396bb9[_0x212539(0x290)](_0x5b00ed,_0x396bb9[_0x212539(0x2a0)](_0x396bb9[_0x212539(0x214)](_0x396bb9['fXJRh'],_0x16f72f),'.'),_0x493da3[_0x212539(0x294)]);case _0x396bb9['ajJTD']:return _0x396bb9[_0x212539(0x290)](_0x499cd3,_0x396bb9[_0x212539(0x295)](_0x396bb9[_0x212539(0x2ab)]+_0x111b16,'.'),_0x41b38e[_0x212539(0x294)]);default:return _0x396bb9[_0x212539(0x2b2)](_0x545f5d,_0x396bb9[_0x212539(0x24b)](_0x212539(0x1fc),_0x469dac)+'.',_0x2027ff[_0x212539(0x294)]);}return _0x25a98d(_0x396bb9[_0x212539(0x268)](_0x396bb9['SqSQQ'](_0x396bb9[_0x212539(0x2a6)],_0x58b7e5),_0x212539(0x25c)),_0x282324);}else return respondWithError(_0x212539(0x23c),_0x23f6f0);}};