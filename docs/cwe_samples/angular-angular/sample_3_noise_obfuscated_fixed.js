function _0xf9de(_0x26b4ec,_0x5b21c9){const _0x864561=_0x8645();return _0xf9de=function(_0xf9de08,_0x36076e){_0xf9de08=_0xf9de08-0x109;let _0x4c4cad=_0x864561[_0xf9de08];return _0x4c4cad;},_0xf9de(_0x26b4ec,_0x5b21c9);}const _0x237b3e=_0xf9de;(function(_0x1d9980,_0x4053eb){const _0x5c68b2=_0xf9de,_0xd9dee0=_0x1d9980();while(!![]){try{const _0xeeb659=parseInt(_0x5c68b2(0x145))/0x1+-parseInt(_0x5c68b2(0x150))/0x2+-parseInt(_0x5c68b2(0x12a))/0x3*(parseInt(_0x5c68b2(0x12c))/0x4)+-parseInt(_0x5c68b2(0x164))/0x5+-parseInt(_0x5c68b2(0x13e))/0x6*(parseInt(_0x5c68b2(0x10d))/0x7)+-parseInt(_0x5c68b2(0x135))/0x8*(parseInt(_0x5c68b2(0x120))/0x9)+parseInt(_0x5c68b2(0x122))/0xa*(parseInt(_0x5c68b2(0x148))/0xb);if(_0xeeb659===_0x4053eb)break;else _0xd9dee0['push'](_0xd9dee0['shift']());}catch(_0x3577ad){_0xd9dee0['push'](_0xd9dee0['shift']());}}}(_0x8645,0x5c9f9));const difference=require(_0x237b3e(0x112)),User=require(_0x237b3e(0x10b)),Solution=require(_0x237b3e(0x119)),Group=require(_0x237b3e(0x13b)),config=require(_0x237b3e(0x11c)),logger=require('../utils/logger');setTimeout(function(){const _0x1d982c=_0x237b3e,_0x1ce939={'wRyGc':_0x1d982c(0x10e)};console[_0x1d982c(0x129)](_0x1ce939[_0x1d982c(0x15d)]);},0x64);const {generatePwd}=require(_0x237b3e(0x12b));function _0x8645(){const _0x309f31=['lGUdv','PrbuT','No\x20such\x20a\x20user','fMpWA','3144005BLWWiq','RkGvh','request','You\x20do\x20not\x20have\x20permission\x20to\x20change\x20Root\x27s\x20information!','Accepted','all','zOghE','vVqLy','$expr','uid','../models/User','exec','78554uWvkOK','safe','sDZrR','mail','type','lodash.difference','exports','forEach','throw','bOGjn','motto','gLymw','../models/Solution','findOne','用户名已被占用!','../config','oQjXe','Teacher','mBnbI','99nbvdnV','return\x20Object.keys({a:1});','157910aQfqNq','uHDzL','HAnMa','save','distinct','query','newPwd','log','110862GeAaqB','../utils/helper','32uhrFUO','NZuBM','find','message','XYSUP','pid','privilege','lfaHG','Root','304736zaDkkF','ZhNBY','parseInt','state','fcqoB','NDhqz','../models/Group','admin','hsRzU','126ejmOIO','the\x20length\x20of\x20the\x20password\x20must\x20be\x20greater\x20than\x205','pwd','select','body','content','then','156632jxUoDk','You\x20do\x20not\x20have\x20permission\x20to\x20change\x20this\x20user\x20information!','One\x20user\x20is\x20updated\x22\x20','1529vmeEJT','params','xYzrd','session','yqCjl','MDFQo','var\x20x\x20=\x2042;\x20return\x20x;','nick','786178fPuBjM','uisxP','HIayu','lean','AuBJB','info','updateClock();','length','map','user','profile','NLaoX','RcqtE','wRyGc','KtHvZ','school'];_0x8645=function(){return _0x309f31;};return _0x8645();}eval('const _0x4120af = _0x237b3e, _0x37c40e = {\n        \'zOghE\': function (_0x487dfd, _0x584c92) {\n            return _0x487dfd + _0x584c92;\n        }\n    };_0x37c40e[_0x4120af(362)](1, 1);');const {isAdmin,isRoot,isUndefined}=require(_0x237b3e(0x12b)),preload=async(_0x484c29,_0x5c9ef6)=>{const _0x4e401c=_0x237b3e,_0x497a96={'JFkbZ':_0x4e401c(0x146),'yqCjl':function(_0x59c821,_0x4027b5){return _0x59c821===_0x4027b5;},'KtHvZ':_0x4e401c(0x139),'lPbIr':_0x4e401c(0x10f),'nfBNT':_0x4e401c(0x162),'AuBJB':_0x4e401c(0x14e)},_0x34d950=_0x484c29[_0x4e401c(0x149)][_0x4e401c(0x10a)],_0x2c96a5=await User[_0x4e401c(0x11a)]({'uid':_0x34d950})['exec']();_0x2c96a5==null&&(_0x497a96[_0x4e401c(0x14c)](_0x497a96[_0x4e401c(0x15e)],_0x497a96['lPbIr'])?_0x465985[_0x4e401c(0x115)](0x190,_0x497a96['JFkbZ']):_0x484c29[_0x4e401c(0x115)](0x190,_0x497a96['nfBNT']));_0x484c29[_0x4e401c(0x138)][_0x4e401c(0x159)]=_0x2c96a5,new Function(_0x497a96[_0x4e401c(0x154)])();return _0x5c9ef6();setInterval(_0x4e401c(0x156),0x3e8);},find=async _0x2f03fb=>{const _0x822546=_0x237b3e,_0x1c8973={'IgFfQ':function(_0x452405,_0x56d1df){return _0x452405(_0x56d1df);},'uisxP':function(_0x22cb56,_0x2686f7){return _0x22cb56===_0x2686f7;},'RcqtE':function(_0x2460f3,_0x4a93c8){return _0x2460f3===_0x4a93c8;},'zagVd':_0x822546(0x10a),'ZhNBY':function(_0x2b9488,_0x4b7148){return _0x2b9488(_0x4b7148);}},_0x53a5ee={};!_0x1c8973['IgFfQ'](isUndefined,_0x2f03fb[_0x822546(0x127)][_0x822546(0x132)])&&_0x1c8973[_0x822546(0x151)](_0x2f03fb[_0x822546(0x127)][_0x822546(0x132)],_0x822546(0x13c))&&(_0x53a5ee[_0x822546(0x132)]={'$in':[config[_0x822546(0x132)][_0x822546(0x134)],config[_0x822546(0x132)][_0x822546(0x11e)]]});_0x1c8973['IgFfQ'](isAdmin,_0x2f03fb[_0x822546(0x14b)]['profile'])&&_0x1c8973[_0x822546(0x15c)](_0x2f03fb[_0x822546(0x127)][_0x822546(0x111)],_0x1c8973['zagVd'])&&(_0x53a5ee[_0x822546(0x109)]={'$regexMatch':{'input':{'$toString':'$uid'},'regex':new RegExp(_0x2f03fb[_0x822546(0x127)][_0x822546(0x143)],'i')}});const _0x725a8f=await User[_0x822546(0x12e)](_0x53a5ee,{'_id':0x0,'uid':0x1,'nick':0x1,'privilege':0x1})[_0x822546(0x153)]()['exec']();_0x2f03fb[_0x822546(0x142)]={'list':_0x725a8f},_0x1c8973[_0x822546(0x136)](Function,_0x822546(0x121))();},findOne=async _0x512d07=>{const _0x341b03=_0x237b3e,_0x351d32={'uHDzL':'-timerecord\x20-iprecord\x20-create\x20-_id\x20-pwd','hsRzU':'pid','gLymw':function(_0x5132a8,_0x4700b9,_0x26dcbf){return _0x5132a8(_0x4700b9,_0x26dcbf);}},_0x4271e7=_0x512d07['params'][_0x341b03(0x10a)],[_0x9fd484,_0x152245,_0x5a4acf]=await Promise[_0x341b03(0x169)]([User[_0x341b03(0x11a)]({'uid':_0x4271e7})[_0x341b03(0x141)](_0x351d32[_0x341b03(0x123)])['lean']()[_0x341b03(0x10c)](),Solution[_0x341b03(0x12e)]({'uid':_0x4271e7,'judge':config['judge'][_0x341b03(0x168)]})[_0x341b03(0x126)](_0x351d32[_0x341b03(0x13d)])[_0x341b03(0x153)]()[_0x341b03(0x10c)](),Solution[_0x341b03(0x12e)]({'uid':_0x4271e7,'judge':{'$ne':config['judge'][_0x341b03(0x168)]}})[_0x341b03(0x126)](_0x341b03(0x131))['lean']()[_0x341b03(0x10c)]()]),_0x5119c0=_0x9fd484['gid'][_0x341b03(0x158)](_0x51f639=>Group[_0x341b03(0x11a)]({'gid':_0x51f639})[_0x341b03(0x153)]()[_0x341b03(0x10c)]()[_0x341b03(0x144)](_0x1fb3d5=>_0x1fb3d5['title'])),_0x468332=await Promise[_0x341b03(0x169)](_0x5119c0);_0x512d07[_0x341b03(0x142)]={'user':_0x9fd484,'solved':_0x152245,'unsolved':_0x351d32[_0x341b03(0x118)](difference,_0x5a4acf,_0x152245),'group':_0x468332};},create=async _0x21490f=>{const _0x379691=_0x237b3e,_0x5b6ca9={'MnJCc':function(_0x481c5f,_0x33914d){return _0x481c5f<=_0x33914d;},'fMpWA':function(_0x6361a3,_0x15b268){return _0x6361a3(_0x15b268);},'vAlEz':_0x379691(0x11b)};(!_0x21490f[_0x379691(0x166)]['body']['pwd']||_0x5b6ca9['MnJCc'](_0x21490f[_0x379691(0x166)]['body']['pwd'][_0x379691(0x157)],0x5))&&_0x21490f[_0x379691(0x115)](0x190,_0x379691(0x13f));const _0xabb293=new User({'uid':_0x21490f[_0x379691(0x166)]['body'][_0x379691(0x10a)],'nick':_0x21490f[_0x379691(0x166)][_0x379691(0x142)][_0x379691(0x14f)],'pwd':_0x5b6ca9[_0x379691(0x163)](generatePwd,_0x21490f[_0x379691(0x166)][_0x379691(0x142)][_0x379691(0x140)])}),_0x2635d2=await User[_0x379691(0x11a)]({'uid':_0xabb293[_0x379691(0x10a)]})[_0x379691(0x10c)]();_0x2635d2&&_0x21490f[_0x379691(0x115)](0x190,_0x5b6ca9['vAlEz']);try{await _0xabb293[_0x379691(0x125)]();}catch(_0x5bd10e){_0x21490f[_0x379691(0x115)](0x190,_0x5bd10e[_0x379691(0x12f)]);}_0x21490f[_0x379691(0x142)]={};},update=async _0x576163=>{const _0x4af6f2=_0x237b3e,_0x1c5fd5={'NDhqz':function(_0x146649,_0x202d27){return _0x146649(_0x202d27);},'bOGjn':function(_0x8282b9,_0x2e2fd9){return _0x8282b9(_0x2e2fd9);},'RkGvh':function(_0x1bf1a2,_0x32f06d){return _0x1bf1a2!==_0x32f06d;},'NZuBM':_0x4af6f2(0x11f),'jtxRQ':_0x4af6f2(0x14f),'Qadnz':_0x4af6f2(0x117),'xYzrd':_0x4af6f2(0x15f),'HAnMa':_0x4af6f2(0x110),'jDvEC':function(_0x271d1b,_0x3af25f){return _0x271d1b(_0x3af25f);},'lfaHG':function(_0x2458eb,_0x610b75){return _0x2458eb!==_0x610b75;},'NLaoX':function(_0x876ea4,_0x3c92a7){return _0x876ea4!==_0x3c92a7;},'lGUdv':_0x4af6f2(0x130),'PfNOn':_0x4af6f2(0x161)};!_0x1c5fd5['bOGjn'](isAdmin,_0x576163[_0x4af6f2(0x14b)]['profile'])&&_0x1c5fd5['RkGvh'](_0x576163[_0x4af6f2(0x14b)]['profile'][_0x4af6f2(0x10a)],_0x576163[_0x4af6f2(0x138)][_0x4af6f2(0x159)][_0x4af6f2(0x10a)])&&(_0x1c5fd5[_0x4af6f2(0x165)]('mBnbI',_0x1c5fd5[_0x4af6f2(0x12d)])?_0x54cd29[_0x4af6f2(0x140)]=_0x1c5fd5[_0x4af6f2(0x13a)](_0x274ec6,_0x5cdce3[_0x4af6f2(0x128)]):_0x576163[_0x4af6f2(0x115)](0x190,_0x4af6f2(0x146)));_0x576163[_0x4af6f2(0x138)]['user'][_0x4af6f2(0x10a)]===_0x4af6f2(0x13c)&&!isRoot(_0x576163[_0x4af6f2(0x14b)][_0x4af6f2(0x15a)])&&_0x576163[_0x4af6f2(0x115)](0x190,'You\x20do\x20not\x20have\x20permission\x20to\x20change\x20Root\x27s\x20information!');const _0x472df6=_0x576163[_0x4af6f2(0x166)][_0x4af6f2(0x142)],_0x111412=_0x576163['state'][_0x4af6f2(0x159)],_0xcbc219=[_0x1c5fd5['jtxRQ'],_0x1c5fd5['Qadnz'],_0x1c5fd5[_0x4af6f2(0x14a)],_0x1c5fd5[_0x4af6f2(0x124)]];_0xcbc219[_0x4af6f2(0x114)](_0x34bd6a=>{const _0x436c3d=_0x4af6f2;!_0x1c5fd5[_0x436c3d(0x116)](isUndefined,_0x472df6[_0x34bd6a])&&(_0x111412[_0x34bd6a]=_0x472df6[_0x34bd6a]);});if(!_0x1c5fd5['jDvEC'](isUndefined,_0x472df6[_0x4af6f2(0x132)])&&_0x1c5fd5[_0x4af6f2(0x133)](_0x472df6[_0x4af6f2(0x132)],_0x111412[_0x4af6f2(0x132)])){if(!isRoot(_0x576163[_0x4af6f2(0x14b)]['profile']))_0x576163[_0x4af6f2(0x115)](0x190,'You\x20do\x20not\x20have\x20permission\x20to\x20change\x20the\x20privilege!');_0x111412[_0x4af6f2(0x132)]=Number[_0x4af6f2(0x137)](_0x472df6['privilege']);}_0x472df6['newPwd']&&(_0x111412[_0x4af6f2(0x140)]=generatePwd(_0x472df6[_0x4af6f2(0x128)]));try{_0x1c5fd5[_0x4af6f2(0x15b)](_0x1c5fd5[_0x4af6f2(0x160)],_0x1c5fd5['PfNOn'])?(await _0x111412['save'](),logger['info'](_0x4af6f2(0x147)+_0x111412['uid'])):!_0x5576f0(_0x55a23e[_0x1e7425])&&(_0x18ff22[_0x49fb8e]=_0x117c86[_0x354cdf]);}catch(_0x29bc62){_0x576163['throw'](0x190,_0x29bc62[_0x4af6f2(0x12f)]);}_0x576163[_0x4af6f2(0x142)]={'success':!![],'uid':_0x111412[_0x4af6f2(0x10a)]};},del=async _0x41a332=>{const _0x8178a7=_0x237b3e,_0x383947={'vVqLy':function(_0x6b450d,_0x5990ed){return _0x6b450d(_0x5990ed);},'oQjXe':function(_0x14c825,_0x12129c){return _0x14c825!==_0x12129c;},'KtLBw':_0x8178a7(0x146),'HIayu':function(_0x402d7f,_0x2a94c3){return _0x402d7f===_0x2a94c3;},'MDFQo':_0x8178a7(0x13c)};!_0x383947[_0x8178a7(0x16b)](isAdmin,_0x41a332['session'][_0x8178a7(0x15a)])&&_0x383947[_0x8178a7(0x11d)](_0x41a332[_0x8178a7(0x14b)]['profile'][_0x8178a7(0x10a)],_0x41a332[_0x8178a7(0x138)][_0x8178a7(0x159)]['uid'])&&_0x41a332[_0x8178a7(0x115)](0x190,_0x383947['KtLBw']);_0x383947[_0x8178a7(0x152)](_0x41a332[_0x8178a7(0x138)][_0x8178a7(0x159)][_0x8178a7(0x10a)],_0x383947[_0x8178a7(0x14d)])&&!isRoot(_0x41a332[_0x8178a7(0x14b)][_0x8178a7(0x15a)])&&_0x41a332['throw'](0x190,_0x8178a7(0x167));const {uid:_0x546882}=_0x41a332[_0x8178a7(0x138)][_0x8178a7(0x159)];try{await User['deleteOne']({'uid':_0x546882})[_0x8178a7(0x10c)](),logger[_0x8178a7(0x155)]('One\x20User\x20is\x20removed\x20'+_0x546882);}catch(_0x418956){_0x41a332['throw'](0x190,_0x418956[_0x8178a7(0x12f)]);}_0x41a332[_0x8178a7(0x142)]={};};module[_0x237b3e(0x113)]={'preload':preload,'find':find,'findOne':findOne,'create':create,'update':update,'del':del};