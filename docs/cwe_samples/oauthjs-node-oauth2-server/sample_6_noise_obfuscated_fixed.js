'use strict';const _0x3fb549=_0x57ed;function _0x31e2(){const _0x29b8f8=['294802pUODSX','expect','IcSmS','kUefw','join','PYZSt','HUCmc','push','verify','return\x20new\x20Date();','smtp-server','sQiJB','FonSa','dMbMR','forEach','getHeader','hncmg','JFBeQ','VYBlx','TBDSK','vYIwm','OMCSq','xqNhZ','code','host','4ECihfV','Should\x20verify\x20connection\x20with\x20success','RATac','ZfhDs','end','5zcZjQE','not','sqfDN','KWmbj','cFZxL','XOAUTH2','SejNZ','log','teretere','Authenticated\x20sender\x20tests','options','OLnWx','NGJOj','true','401','bearer\x20mac','send','2901576EqHTIF','xZFSb','FbuhL','Orjor','my_smtp_access_scope_name','listen','armLB','ZKLBT','trim','smtp:localhost:','OvGEA','RkigM','LPKij','close','Zhvxo','xrwWC','SMTP\x20Transport\x20Tests','teretere,\x20vana\x20kere\x0a','BuTrx','keCGC','test@invalid.sender','test@valid.sender','Should\x20recover\x20unexpeced\x20close\x20during\x20transmission','eJPah','var\x20x\x20=\x2042;\x20return\x20x;','Zmwkl','stream','Xwrml','timeout','messageId','dfuDw','Anonymous\x20sender\x20tests','connections','tqHlV','test@valid.recipient','EAUTH','Only\x20user@valid.recipient\x20is\x20allowed\x20to\x20receive\x20mail','mid','equal','naRld','removeListener','updateClock();','sOZJW','testtoken','dataReady','nGwab','pYxyx','env','PgkAw','yUuLL','vloVs','../../lib/smtp-transport','kDXfT','SklxF','secure','wmENZ','PvBAh','connect','Iqdet','KKEYI','test','hjwFt','rawMessage','xIZbZ','auapC','STARTTLS','bpngE','tbYRq','Should\x20detect\x20wellknown\x20data','pfhjL','EWciE','oAAaQ','return\x20await\x20Promise.resolve(42);','createReadStream','name','17509740uVbfFr','message','yAlPm','Should\x20send\x20mail','Invalid\x20username\x20or\x20password','replace','envelope','jaovX','_socket','error','bTcfX','smtp:testuser:testpass@localhost:','XZOan','MuknM','vZYJf','woFAk','lFXHB','testpass','getEnvelope','ApmcY','HkpeG','exist','EENVELOPE','kSDyi','concat','Should\x20login\x20and\x20send\x20mail\x20using\x20proxied\x20socket','QWMGF','msZjA','PLAIN','tXTSV','address','XZBOv','nUYGJ','59848qglgfI','ngzPw','GmGrV','IjytS','26772KrRrzR','username','cDLEn','ErSuz','2548437GtRRVs','safe','mIijD','QLaOz','91eXiCuM','NfKhr','QRHys','dYNvU','10542465kWHVgz','net','version','google\x20mail','data','AUTH','nqZLv','SixlV','nSbyJ','zzz','YqNdU','QAXcc','lkCuP','Oarxa','<test>','JhyeU','virll','includeStack','toString','UMxnx','InSuH','npyoc','hHfXE','ShEVv','dnWMd','lNULp','tEBBF','Should\x20fail\x20auth\x20if\x20forceAuth=true','chai','AsWgt','Should\x20fail\x20envelope','imtNJ','SMTPServer','RbKwY','?logger=false','LgBAQ','stringify','DjCUq'];_0x31e2=function(){return _0x29b8f8;};return _0x31e2();}(function(_0x60aed8,_0x57c2dc){const _0x1dc846=_0x57ed,_0x190a13=_0x60aed8();while(!![]){try{const _0x30b887=-parseInt(_0x1dc846(0x159))/0x1+-parseInt(_0x1dc846(0x18b))/0x2+-parseInt(_0x1dc846(0x15d))/0x3*(-parseInt(_0x1dc846(0x1a4))/0x4)+-parseInt(_0x1dc846(0x1a9))/0x5*(parseInt(_0x1dc846(0x1ba))/0x6)+parseInt(_0x1dc846(0x161))/0x7*(-parseInt(_0x1dc846(0x155))/0x8)+-parseInt(_0x1dc846(0x165))/0x9+parseInt(_0x1dc846(0x205))/0xa;if(_0x30b887===_0x57c2dc)break;else _0x190a13['push'](_0x190a13['shift']());}catch(_0x5a6306){_0x190a13['push'](_0x190a13['shift']());}}}(_0x31e2,0xa48fe));function _0x57ed(_0x4f4634,_0x3ab678){const _0x31e22d=_0x31e2();return _0x57ed=function(_0x57ed03,_0x110bf1){_0x57ed03=_0x57ed03-0x148;let _0x500795=_0x31e22d[_0x57ed03];return _0x500795;},_0x57ed(_0x4f4634,_0x3ab678);}process[_0x3fb549(0x1e9)]['NODE_TLS_REJECT_UNAUTHORIZED']='0';const chai=require(_0x3fb549(0x181)),net=require(_0x3fb549(0x166)),expect=chai[_0x3fb549(0x18c)],PassThrough=require(_0x3fb549(0x1d4))['PassThrough'],SMTPTransport=require(_0x3fb549(0x1ed)),SMTPServer=require(_0x3fb549(0x195))[_0x3fb549(0x185)];chai['config'][_0x3fb549(0x176)]=!![];const PORT_NUMBER=0x20cd;class MockBuilder{constructor(_0x5c5401,_0xe52e68,_0x2c543f){const _0x182c18=_0x3fb549,_0x53de11={'RATac':function(_0xd81af,_0x517da8){return _0xd81af||_0x517da8;}};this[_0x182c18(0x20b)]=_0x5c5401,this[_0x182c18(0x1f8)]=_0xe52e68,this['mid']=_0x53de11[_0x182c18(0x1a6)](_0x2c543f,_0x182c18(0x173));}[_0x3fb549(0x217)](){const _0x2548cc=_0x3fb549,_0x26fc51={'XNwmD':function(_0x5a35e1,_0x4e6809,_0xe2121d){return _0x5a35e1(_0x4e6809,_0xe2121d);}};return _0x26fc51['XNwmD'](setTimeout,function(){const _0x46c6da=_0x57ed;console['log'](_0x46c6da(0x15e));},0x64),this[_0x2548cc(0x20b)];}[_0x3fb549(0x1d7)](){const _0x5ad413=_0x3fb549,_0x21f0ec={'QWMGF':function(_0x1dd9c5,_0x16a5f2){return _0x1dd9c5*_0x16a5f2;}};return eval('const _0x37b526 = _0x57ed;_0x21f0ec[_0x37b526(334)](Math[\'PI\'], 2);'),this[_0x5ad413(0x1df)];}[_0x3fb549(0x203)](){const _0x15004e=_0x3fb549;let _0x2947ea=new PassThrough();return setImmediate(()=>_0x2947ea[_0x15004e(0x1a8)](this[_0x15004e(0x1f8)])),setInterval('updateClock();',0x3e8),_0x2947ea;}[_0x3fb549(0x19a)](){const _0x4b0870=_0x3fb549,_0x262b6b={'ShEVv':_0x4b0870(0x15e),'hHfXE':_0x4b0870(0x1b1)};return setTimeout(function(){const _0x6f4458=_0x4b0870;console[_0x6f4458(0x1b0)](_0x262b6b[_0x6f4458(0x17c)]);},0x64),_0x262b6b[_0x4b0870(0x17b)];}}describe(_0x3fb549(0x1ca),function(){const _0x1fa2c3=_0x3fb549,_0x413554={'woFAk':function(_0x663d31,_0x4eacc3,_0x244a3a){return _0x663d31(_0x4eacc3,_0x244a3a);},'KKEYI':function(_0x4d5646,_0x2eef24){return _0x4d5646(_0x2eef24);},'dMbMR':_0x1fa2c3(0x1de),'GDMAQ':function(_0x1e26a6){return _0x1e26a6();},'QRHys':_0x1fa2c3(0x168),'YqNdU':_0x1fa2c3(0x1ce),'QLaOz':function(_0x33e477){return _0x33e477();},'PgkAw':function(_0x24237c,_0x51a65b){return _0x24237c===_0x51a65b;},'Xwrml':_0x1fa2c3(0x1cf),'LPKij':'test@valid.recipient','OLnWx':function(_0x4a2a4a,_0x383b5c){return _0x4a2a4a+_0x383b5c;},'UooBP':function(_0xea3892,_0x1ddfa5){return _0xea3892+_0x1ddfa5;},'nqZLv':_0x1fa2c3(0x1cb),'PvBAh':'DjCUq','InSuH':function(_0x1dab24,_0x13a9b3){return _0x1dab24(_0x13a9b3);},'hncmg':function(_0x41245f,_0xfc7b99){return _0x41245f(_0xfc7b99);},'ErSuz':'smtp:localhost:','YlOQY':'safe','HiOOa':'return\x20new\x20Date();','SejNZ':function(_0x2ceb02){return _0x2ceb02();},'JhyeU':_0x1fa2c3(0x169),'sqfDN':function(_0x5a3ab6){return _0x5a3ab6();},'SklxF':'pUGJa','FonSa':_0x1fa2c3(0x1fd),'LgBAQ':function(_0x2d4593,_0x48d6c2,_0x53d8f6){return _0x2d4593(_0x48d6c2,_0x53d8f6);},'VYBlx':_0x1fa2c3(0x1fe),'Orjor':_0x1fa2c3(0x183),'sQiJB':'Should\x20not\x20fail\x20auth','pYxyx':_0x1fa2c3(0x1d0),'tEBBF':function(_0x5a8597,_0x43da22,_0x403a90){return _0x5a8597(_0x43da22,_0x403a90);},'zBSMW':'Only\x20user@valid.sender\x20is\x20allowed\x20to\x20send\x20mail','sOZJW':_0x1fa2c3(0x150),'cFZxL':function(_0xcf272d,_0x2d30fc){return _0xcf272d!==_0x2d30fc;},'tXTSV':'XOAUTH2','dnWMd':_0x1fa2c3(0x1e5),'InvdF':function(_0x19b28e,_0xb33fd6,_0x2db4d2){return _0x19b28e(_0xb33fd6,_0x2db4d2);},'NGJOj':_0x1fa2c3(0x1b7),'OZQHY':_0x1fa2c3(0x1e6),'nUYGJ':function(_0xa99c8,_0x5efeb2){return _0xa99c8(_0x5efeb2);},'eiYVb':_0x1fa2c3(0x1a5),'lkCuP':'Should\x20not\x20verify\x20connection','vloVs':_0x1fa2c3(0x14d)};this[_0x1fa2c3(0x1d6)](0x2710),_0x413554[_0x1fa2c3(0x188)](describe,_0x1fa2c3(0x1d9),function(){const _0x113837=_0x1fa2c3,_0x375a37={'imtNJ':_0x413554['YlOQY'],'uAnxP':function(_0x3910ad,_0x47f5e8){const _0x29f115=_0x57ed;return _0x413554[_0x29f115(0x1b4)](_0x3910ad,_0x47f5e8);},'wmENZ':function(_0x1a71fa,_0x35be7a){return _0x413554['hncmg'](_0x1a71fa,_0x35be7a);},'HkpeG':'Only\x20user@valid.sender\x20is\x20allowed\x20to\x20send\x20mail','IcSmS':_0x413554['HiOOa'],'msZjA':function(_0x141085){const _0x2a583c=_0x57ed;return _0x413554[_0x2a583c(0x1af)](_0x141085);},'RkigM':_0x413554[_0x113837(0x174)],'dfuDw':function(_0x5db8ca){const _0x5deae8=_0x113837;return _0x413554[_0x5deae8(0x1ab)](_0x5db8ca);},'LNjvz':function(_0x5385d4,_0x9d1e00){return _0x5385d4+_0x9d1e00;},'rHgVL':_0x113837(0x210),'ZfhDs':_0x113837(0x1dc),'Oarxa':function(_0x2f913f,_0x54412f,_0x4b0e4e){return _0x2f913f(_0x54412f,_0x4b0e4e);},'oAAaQ':_0x113837(0x1fb),'EFEXp':'EAUTH','bdvlR':_0x413554['Xwrml'],'nSbyJ':_0x413554[_0x113837(0x1ef)]};if(_0x413554[_0x113837(0x197)]!==_0x413554[_0x113837(0x197)]){if(!/@valid.recipient/[_0x113837(0x1f6)](_0x58b3f6[_0x113837(0x152)]))return _0x413554[_0x113837(0x214)](_0x46cdf9,function(){const _0x434386=_0x113837;_0x45f3a4[_0x434386(0x1b0)](_0x375a37[_0x434386(0x184)]);},0x64),_0x413554['KKEYI'](_0x325e80,new _0x47b8a4(_0x413554[_0x113837(0x198)]));return eval('_0x375a37[\'uAnxP\'](1, 1);'),_0x413554['GDMAQ'](_0x357660);}else{let _0x14cea4,_0x4f0fa2;beforeEach(function(_0x47e858){const _0x1551e4=_0x113837,_0x5b82e5={'UEVgD':_0x1551e4(0x1e3),'naRld':function(_0x5c3603,_0x551db2){return _0x5c3603(_0x551db2);},'TBDSK':_0x1551e4(0x16c),'cDLEn':_0x1551e4(0x1de),'vWOKs':'console.log(\x22timer\x22);','npyoc':function(_0x4ce778,_0x23e53d){return _0x4ce778(_0x23e53d);},'vZYJf':function(_0x26aff1){return _0x26aff1();},'kUefw':_0x375a37['rHgVL'],'Iqdet':_0x1551e4(0x169),'EWciE':_0x1551e4(0x1cf),'bTcfX':_0x375a37[_0x1551e4(0x1a7)],'fTEHX':_0x1551e4(0x1db),'lxtqW':function(_0x54addb,_0x113f2e,_0x393479){const _0x374dec=_0x1551e4;return _0x375a37[_0x374dec(0x172)](_0x54addb,_0x113f2e,_0x393479);},'MuknM':function(_0x568ce6){return _0x568ce6();}};_0x14cea4=new SMTPServer({'disabledCommands':[_0x1551e4(0x1fb),_0x1551e4(0x16a)],'onData'(_0x3e4dbe,_0x496915,_0x338508){const _0x28b7e2=_0x1551e4;_0x3e4dbe['on'](_0x28b7e2(0x169),function(){}),_0x3e4dbe['on']('end',_0x338508);},'onMailFrom'(_0x40e3c7,_0x86742a,_0x339dc8){const _0x55d5de=_0x1551e4;if(!/@valid.sender/[_0x55d5de(0x1f6)](_0x40e3c7[_0x55d5de(0x152)]))return setInterval(_0x55d5de(0x1e3),0x3e8),_0x375a37[_0x55d5de(0x1f1)](_0x339dc8,new Error(_0x375a37[_0x55d5de(0x148)]));return _0x375a37[_0x55d5de(0x1f1)](Function,_0x375a37[_0x55d5de(0x18d)])(),_0x375a37[_0x55d5de(0x14f)](_0x339dc8);},'onRcptTo'(_0x10b48a,_0x58042a,_0x1b320a){const _0x4ff1e5=_0x1551e4;if(_0x4ff1e5(0x16c)===_0x5b82e5[_0x4ff1e5(0x19e)]){if(!/@valid.recipient/['test'](_0x10b48a[_0x4ff1e5(0x152)]))return new Function(_0x4ff1e5(0x1d2))(),_0x5b82e5[_0x4ff1e5(0x1e1)](_0x1b320a,new Error(_0x5b82e5[_0x4ff1e5(0x15b)]));return setTimeout(_0x5b82e5['vWOKs'],0x3e8),_0x1b320a();}else return _0x324c67(_0x5b82e5['UEVgD'],0x3e8),_0x5b82e5[_0x4ff1e5(0x1e1)](_0x7285d7,new _0x5473da(_0x4ff1e5(0x209)));},'logger':![]}),_0x4f0fa2=new SMTPServer({'disabledCommands':[_0x375a37[_0x1551e4(0x201)],_0x1551e4(0x16a)],'onData'(_0xa7f2e){const _0x575f31=_0x1551e4;_0xa7f2e['on'](_0x375a37[_0x575f31(0x1c5)],()=>![]),_0xa7f2e['on'](_0x575f31(0x1a8),()=>{setTimeout(()=>{const _0x3a8e3b=_0x57ed;this[_0x3a8e3b(0x1da)][_0x3a8e3b(0x199)](_0x570358=>_0x570358[_0x3a8e3b(0x20d)]['destroy']());},0x96);});},'onMailFrom'(_0x155e12,_0x24195e,_0x522970){const _0x53e466=_0x1551e4;if(!/@valid.sender/[_0x53e466(0x1f6)](_0x155e12[_0x53e466(0x152)]))return new Function(_0x53e466(0x1d2))(),_0x522970(new Error('Only\x20user@valid.sender\x20is\x20allowed\x20to\x20send\x20mail'));return eval('const _0x2f29f4 = _0x53e466;JSON[_0x2f29f4(393)]({ \'safe\': !![] });'),_0x375a37[_0x53e466(0x1d8)](_0x522970);},'onRcptTo'(_0x1d43a7,_0xe81923,_0x2c2219){const _0x164ce0=_0x1551e4;if(!/@valid.recipient/[_0x164ce0(0x1f6)](_0x1d43a7[_0x164ce0(0x152)])){if(_0x164ce0(0x158)!==_0x5b82e5['fTEHX'])return new AsyncFunction(_0x164ce0(0x202))(),_0x5b82e5[_0x164ce0(0x17a)](_0x2c2219,new Error(_0x5b82e5[_0x164ce0(0x15b)]));else{const _0x4d1a77={'lNULp':function(_0x34055a,_0x9dda43){return _0x34055a(_0x9dda43);},'dOvQF':function(_0x321c18,_0x5bf0d6,_0x1d8c52){return _0x321c18(_0x5bf0d6,_0x1d8c52);},'xrwWC':function(_0x35ba39,_0x32bf27){const _0x30386e=_0x164ce0;return _0x5b82e5[_0x30386e(0x17a)](_0x35ba39,_0x32bf27);},'OMCSq':function(_0x1da4af){const _0x461c41=_0x164ce0;return _0x5b82e5[_0x461c41(0x213)](_0x1da4af);}};let _0x4bc0a3=new _0x40cf9a({'url':_0x5b82e5[_0x164ce0(0x18e)]+_0x1d1c7e,'logger':![]}),_0x2d0624=[],_0x19ea32=new _0x4b5ec3(0x400)['join'](_0x164ce0(0x1cb));_0xffaf95['on'](_0x5b82e5[_0x164ce0(0x1f4)],function(_0x52b665,_0x423367){const _0x5585c2=_0x164ce0;_0x2d0624[_0x5585c2(0x192)](_0x423367);}),_0x55b8b5['on'](_0x164ce0(0x1e6),function(_0x482c80,_0x841466){const _0x33e08e=_0x164ce0;let _0x3b0149=_0x3a5ed3[_0x33e08e(0x14c)](_0x2d0624);_0x4d1a77[_0x33e08e(0x17e)](_0x310bf1,_0x3b0149[_0x33e08e(0x177)]())['to'][_0x33e08e(0x1e0)](_0x19ea32[_0x33e08e(0x1c2)]()[_0x33e08e(0x20a)](/\n/g,'\x0d\x0a')),_0x4d1a77['dOvQF'](_0x841466,null,!![]);}),_0x4bc0a3[_0x164ce0(0x1b9)]({'data':{},'message':new _0x3ef065({'from':_0x5b82e5[_0x164ce0(0x200)],'to':_0x5b82e5[_0x164ce0(0x20f)]},_0x19ea32)},function(_0x44a6b8){const _0x35d41f=_0x164ce0;_0x4d1a77[_0x35d41f(0x1c9)](_0x1f47d1,_0x44a6b8)['to']['not'][_0x35d41f(0x149)],_0x4d1a77[_0x35d41f(0x1a0)](_0x3dd99a);});}}return _0x5b82e5['lxtqW'](setTimeout,'console.log(\x22timer\x22);',0x3e8),_0x5b82e5[_0x164ce0(0x212)](_0x2c2219);},'logger':![]}),_0x14cea4[_0x1551e4(0x1bf)](PORT_NUMBER,_0x4c3314=>{const _0x302ccc=_0x1551e4;if(_0x4c3314)return eval('1 + 1;'),_0x47e858(_0x4c3314);_0x4f0fa2[_0x302ccc(0x1bf)](_0x375a37['LNjvz'](PORT_NUMBER,0x1),_0x47e858);});}),afterEach(function(_0x1b4c8a){const _0x3a300c=_0x113837;_0x14cea4[_0x3a300c(0x1c7)](()=>_0x4f0fa2[_0x3a300c(0x1c7)](_0x1b4c8a));}),_0x413554[_0x113837(0x188)](it,'Should\x20expose\x20version\x20number',function(){const _0x105377=_0x113837;let _0x9d55a6=new SMTPTransport();expect(_0x9d55a6[_0x105377(0x204)])['to']['exist'],expect(_0x9d55a6[_0x105377(0x167)])['to']['exist'];}),_0x413554[_0x113837(0x214)](it,_0x413554[_0x113837(0x19d)],function(){const _0xe685ac=_0x113837;let _0x1173e3=new SMTPTransport({'service':_0x413554[_0xe685ac(0x163)],'logger':![]});_0x413554['KKEYI'](expect,_0x1173e3[_0xe685ac(0x1b3)][_0xe685ac(0x1a3)])['to'][_0xe685ac(0x1e0)]('smtp.gmail.com'),_0x413554['KKEYI'](expect,_0x1173e3['options']['port'])['to'][_0xe685ac(0x1e0)](0x1d1),expect(_0x1173e3[_0xe685ac(0x1b3)][_0xe685ac(0x1f0)])['to']['be'][_0xe685ac(0x1b6)];}),it(_0x413554[_0x113837(0x1bd)],function(_0x4cc2b6){const _0xdda5d9=_0x113837;let _0x6863b7=new SMTPTransport({'port':PORT_NUMBER,'logger':![]});_0x6863b7[_0xdda5d9(0x1b9)]({'data':{},'message':new MockBuilder({'from':_0x413554[_0xdda5d9(0x16f)],'to':_0xdda5d9(0x1dc)},_0xdda5d9(0x1f6))},function(_0x165d78){const _0x5a28fd=_0xdda5d9;_0x375a37['wmENZ'](expect,_0x165d78[_0x5a28fd(0x1a2)])['to'][_0x5a28fd(0x1e0)](_0x5a28fd(0x14a)),_0x4cc2b6();});}),it(_0x413554[_0x113837(0x196)],function(_0x7ff363){const _0x42640f=_0x113837,_0x582aa7={'KWmbj':function(_0x24126f,_0x16df05){return _0x413554['KKEYI'](_0x24126f,_0x16df05);},'Zmwkl':_0x42640f(0x1dd),'xqNhZ':function(_0x2eff05){const _0x1d2224=_0x42640f;return _0x413554[_0x1d2224(0x160)](_0x2eff05);}};if(_0x413554[_0x42640f(0x1ea)](_0x42640f(0x15f),_0x42640f(0x207)))_0x582aa7[_0x42640f(0x1ac)](_0x21c139,_0x2399e5[_0x42640f(0x1a2)])['to'][_0x42640f(0x1e0)](_0x582aa7[_0x42640f(0x1d3)]),_0x582aa7[_0x42640f(0x1a1)](_0x61b5ec);else{let _0x19ed68=new SMTPTransport({'port':PORT_NUMBER,'auth':{'user':_0x42640f(0x16e)},'logger':![]});_0x19ed68[_0x42640f(0x1b9)]({'data':{},'message':new MockBuilder({'from':_0x413554[_0x42640f(0x1d5)],'to':_0x413554['LPKij']},_0x42640f(0x206))},function(_0x30ea51){const _0x22f8f4=_0x42640f;_0x375a37[_0x22f8f4(0x1f1)](expect,_0x30ea51)['to'][_0x22f8f4(0x1aa)][_0x22f8f4(0x149)],_0x375a37[_0x22f8f4(0x1d8)](_0x7ff363);});}}),it(_0x113837(0x180),function(_0x1b5784){const _0x5db34e=_0x113837,_0x31770c={'vYIwm':_0x375a37['EFEXp'],'bpngE':function(_0x1c008d){const _0x3c6669=_0x57ed;return _0x375a37[_0x3c6669(0x14f)](_0x1c008d);}};let _0x2cd66b=new SMTPTransport({'port':PORT_NUMBER,'auth':{'user':'zzz'},'forceAuth':!![],'logger':![]});_0x2cd66b[_0x5db34e(0x1b9)]({'data':{},'message':new MockBuilder({'from':_0x375a37['bdvlR'],'to':_0x5db34e(0x1dc)},'message')},function(_0x33c2fa){const _0xdc0224=_0x5db34e;expect(_0x33c2fa[_0xdc0224(0x1a2)])['to'][_0xdc0224(0x1e0)](_0x31770c[_0xdc0224(0x19f)]),_0x31770c[_0xdc0224(0x1fc)](_0x1b5784);});}),it(_0x113837(0x208),function(_0x275c7e){const _0x1ace6c=_0x113837,_0x186810={'armLB':function(_0x5c3bba,_0xb70e0b){return _0x5c3bba(_0xb70e0b);}};let _0x485d6c=new SMTPTransport(_0x413554['OLnWx'](_0x413554['UooBP'](_0x1ace6c(0x1c3),PORT_NUMBER),_0x1ace6c(0x187))),_0x8d72f7=[],_0x2d9aea=new Array(0x400)['join'](_0x413554[_0x1ace6c(0x16b)]);_0x14cea4['on'](_0x1ace6c(0x169),function(_0x1e91eb,_0x2a717f){const _0x3afca1=_0x1ace6c;_0x375a37['nSbyJ']!==_0x375a37[_0x3afca1(0x16d)]?(this[_0x3afca1(0x20b)]=_0x512dd3,this[_0x3afca1(0x1f8)]=_0x6c2dcb,this[_0x3afca1(0x1df)]=_0x2647ac||_0x3afca1(0x173)):_0x8d72f7[_0x3afca1(0x192)](_0x2a717f);}),_0x14cea4['on'](_0x1ace6c(0x1e6),function(_0x3e9e65,_0x269b0c){const _0x38be66=_0x1ace6c;let _0x127c9f=Buffer[_0x38be66(0x14c)](_0x8d72f7);_0x186810[_0x38be66(0x1c0)](expect,_0x127c9f['toString']())['to'][_0x38be66(0x1e0)](_0x2d9aea['trim']()['replace'](/\n/g,'\x0d\x0a')),_0x269b0c(null,!![]);}),_0x485d6c[_0x1ace6c(0x1b9)]({'data':{},'message':new MockBuilder({'from':_0x1ace6c(0x1cf),'to':'test@valid.recipient'},_0x2d9aea)},function(_0x321447){const _0x5c9375=_0x1ace6c;_0x375a37[_0x5c9375(0x1f1)](expect,_0x321447)['to'][_0x5c9375(0x1aa)]['exist'],_0x275c7e();});}),it(_0x413554[_0x113837(0x1e8)],function(_0x1bf857){const _0x28f40c=_0x113837,_0x141e42={'Zhvxo':function(_0x466a3a,_0x49f87f,_0x3e64c3){const _0x28b68f=_0x57ed;return _0x413554[_0x28b68f(0x214)](_0x466a3a,_0x49f87f,_0x3e64c3);},'dYNvU':function(_0x31da8a){return _0x31da8a();},'FDKnR':_0x413554[_0x28f40c(0x1f2)],'GmGrV':function(_0x5de9c9,_0x5e762c){const _0x4756d9=_0x28f40c;return _0x413554[_0x4756d9(0x179)](_0x5de9c9,_0x5e762c);},'UMxnx':function(_0x1723b8,_0x95d7cd){const _0x10c969=_0x28f40c;return _0x413554[_0x10c969(0x19b)](_0x1723b8,_0x95d7cd);}};let _0x3354bb=new SMTPTransport(_0x413554[_0x28f40c(0x1b4)](_0x413554[_0x28f40c(0x15c)],PORT_NUMBER+0x1)+_0x28f40c(0x187)),_0x54d738=[],_0x5412e4=new Array(0x400)[_0x28f40c(0x18f)]('teretere,\x20vana\x20kere\x0a');_0x14cea4['on'](_0x28f40c(0x169),function(_0x328c9b,_0x47e600){_0x54d738['push'](_0x47e600);}),_0x14cea4['on'](_0x28f40c(0x1e6),function(_0x3445e8,_0x408293){const _0x3d021f=_0x28f40c,_0x49060e={'RbKwY':function(_0x4218a4,_0x506cee,_0x9a4529){const _0x230fa9=_0x57ed;return _0x141e42[_0x230fa9(0x1c8)](_0x4218a4,_0x506cee,_0x9a4529);},'QAXcc':function(_0x20a7ec){const _0x4c4456=_0x57ed;return _0x141e42[_0x4c4456(0x164)](_0x20a7ec);}};if(_0x3d021f(0x18a)!==_0x141e42['FDKnR']){if(!/@valid.sender/[_0x3d021f(0x1f6)](_0x2c01ac[_0x3d021f(0x152)]))return _0x49060e[_0x3d021f(0x186)](_0x44fe80,_0x3d021f(0x1e3),0x3e8),_0x2d4735(new _0x4868e1('Only\x20user@valid.sender\x20is\x20allowed\x20to\x20send\x20mail'));return _0x18768c(_0x3d021f(0x194))(),_0x49060e[_0x3d021f(0x170)](_0x37884c);}else{let _0x29ba5f=Buffer[_0x3d021f(0x14c)](_0x54d738);_0x141e42[_0x3d021f(0x157)](expect,_0x29ba5f[_0x3d021f(0x177)]())['to']['equal'](_0x5412e4[_0x3d021f(0x1c2)]()[_0x3d021f(0x20a)](/\n/g,'\x0d\x0a')),_0x408293(null,!![]);}}),_0x3354bb[_0x28f40c(0x1b9)]({'data':{},'message':new MockBuilder({'from':'test@valid.sender','to':_0x413554[_0x28f40c(0x1c6)]},_0x5412e4)},function(_0x51a59b){const _0x2261ff=_0x28f40c;_0x141e42[_0x2261ff(0x178)](expect,_0x51a59b)['to'][_0x2261ff(0x149)],_0x1bf857();});});}}),_0x413554[_0x1fa2c3(0x188)](describe,_0x1fa2c3(0x1b2),function(){const _0x18626b=_0x1fa2c3,_0x383e1a={'yUuLL':function(_0x263eed,_0x24e728){const _0x1fc3d7=_0x57ed;return _0x413554[_0x1fc3d7(0x1ad)](_0x263eed,_0x24e728);},'NSiEJ':_0x413554[_0x18626b(0x151)],'BuTrx':_0x18626b(0x1c1),'fiOhp':function(_0x55299a,_0x474e98){return _0x55299a!==_0x474e98;},'OvGEA':'testuser','kDXfT':function(_0x5863fb,_0x5049f6,_0x286b40){return _0x5863fb(_0x5049f6,_0x286b40);},'LhCSZ':_0x18626b(0x1e3),'ApmcY':function(_0x2d6f31,_0x51c8f2){const _0x30bde0=_0x18626b;return _0x413554[_0x30bde0(0x1f5)](_0x2d6f31,_0x51c8f2);},'kSDyi':function(_0x1c63ea,_0x2c4ba1){const _0x5dd04c=_0x18626b;return _0x413554[_0x5dd04c(0x1ad)](_0x1c63ea,_0x2c4ba1);},'qVeOF':_0x413554[_0x18626b(0x17d)],'ToXCZ':'var\x20x\x20=\x2042;\x20return\x20x;','qIxzO':function(_0x46f555,_0x4fb1fd,_0x165daa){return _0x413554['InvdF'](_0x46f555,_0x4fb1fd,_0x165daa);},'eJPah':_0x413554[_0x18626b(0x1b5)],'JFBeQ':_0x18626b(0x1be),'AsWgt':_0x18626b(0x190),'keCGC':function(_0x2ebba7){return _0x2ebba7();},'hjwFt':_0x18626b(0x210),'virll':'data','HUCmc':_0x413554['OZQHY'],'ALykR':function(_0x440c96,_0x4605f2){return _0x440c96+_0x4605f2;},'XZOan':'smtp:testuser:testpass@localhost:999','dwwiK':function(_0x5a96b9,_0x132f02,_0xf0429d){return _0x413554['LgBAQ'](_0x5a96b9,_0x132f02,_0xf0429d);},'lFXHB':_0x413554['LPKij']};let _0x56bb5d;beforeEach(function(_0x44db84){const _0x33cff5=_0x18626b,_0x1b542b={'jaovX':_0x413554[_0x33cff5(0x174)],'xIZbZ':function(_0x4473f8,_0x1076cc,_0x6a6285){const _0x5f55fe=_0x33cff5;return _0x413554[_0x5f55fe(0x17f)](_0x4473f8,_0x1076cc,_0x6a6285);},'xZFSb':'console.log(\x22timer\x22);','ngzPw':_0x413554['zBSMW'],'WnTmo':function(_0x3c0225,_0x15cead){return _0x3c0225+_0x15cead;},'FbuhL':_0x413554['YlOQY'],'NfKhr':function(_0x5964b7,_0xf3d75b,_0x1a20ff){return _0x5964b7(_0xf3d75b,_0x1a20ff);},'auapC':function(_0x266114){const _0xf25e3=_0x33cff5;return _0x413554[_0xf25e3(0x1af)](_0x266114);}};_0x56bb5d=new SMTPServer({'authMethods':[_0x413554[_0x33cff5(0x1e4)],_0x33cff5(0x1ae)],'disabledCommands':[_0x33cff5(0x1fb)],'onData'(_0x2c3c67,_0x680188,_0x4f4c18){const _0x22f6ef=_0x33cff5;_0x2c3c67['on'](_0x1b542b[_0x22f6ef(0x20c)],function(){}),_0x2c3c67['on'](_0x22f6ef(0x1a8),_0x4f4c18);},'onAuth'(_0x3e734e,_0x5a1e7a,_0x45d9bc){const _0x969c88=_0x33cff5,_0x374f8d={'lgHct':function(_0x3424fc,_0x38c13c){return _0x3424fc(_0x38c13c);}};if(_0x383e1a[_0x969c88(0x1eb)](_0x3e734e['method'],_0x383e1a['NSiEJ'])){if(_0x383e1a[_0x969c88(0x1eb)](_0x383e1a[_0x969c88(0x1cc)],'XBWLq')){if(_0x383e1a['fiOhp'](_0x3e734e['username'],_0x383e1a[_0x969c88(0x1c4)])||_0x3e734e['password']!==_0x969c88(0x216))return _0x383e1a[_0x969c88(0x1ee)](setInterval,_0x383e1a['LhCSZ'],0x3e8),_0x383e1a[_0x969c88(0x218)](_0x45d9bc,new Error(_0x969c88(0x209)));}else{let _0x365507=new _0x53e227();_0x1b5385(_0x365507['name'])['to']['exist'],_0x374f8d['lgHct'](_0x56a4d1,_0x365507[_0x969c88(0x167)])['to']['exist'];}}else{if(_0x383e1a['fiOhp'](_0x3e734e[_0x969c88(0x15a)],_0x383e1a['OvGEA'])||_0x383e1a[_0x969c88(0x14b)](_0x3e734e['accessToken'],_0x383e1a['qVeOF']))return new Function(_0x383e1a['ToXCZ'])(),_0x383e1a['qIxzO'](_0x45d9bc,null,{'data':{'status':_0x383e1a[_0x969c88(0x1d1)],'schemes':_0x969c88(0x1b8),'scope':_0x383e1a[_0x969c88(0x19c)]}});}_0x45d9bc(null,{'user':0x7b});},'onMailFrom'(_0x80e174,_0x490849,_0x35a982){const _0xb1f7be=_0x33cff5;if(!/@valid.sender/[_0xb1f7be(0x1f6)](_0x80e174[_0xb1f7be(0x152)]))return _0x1b542b[_0xb1f7be(0x1f9)](setTimeout,_0x1b542b[_0xb1f7be(0x1bb)],0x3e8),_0x35a982(new Error(_0x1b542b[_0xb1f7be(0x156)]));return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x35a982();},'onRcptTo'(_0x3f1546,_0x25a3a1,_0x15f1e1){const _0xa42682=_0x33cff5,_0x5e5c1c={'Qrknx':_0x1b542b[_0xa42682(0x1bc)]};if(!/@valid.recipient/[_0xa42682(0x1f6)](_0x3f1546[_0xa42682(0x152)]))return _0x1b542b[_0xa42682(0x162)](setTimeout,function(){const _0x401989=_0xa42682;console[_0x401989(0x1b0)](_0x5e5c1c['Qrknx']);},0x64),_0x15f1e1(new Error(_0xa42682(0x1de)));return eval('_0x1b542b[\'WnTmo\'](1, 1);'),_0x1b542b[_0xa42682(0x1fa)](_0x15f1e1);},'logger':![]}),_0x56bb5d[_0x33cff5(0x1bf)](PORT_NUMBER,_0x44db84);}),_0x413554[_0x18626b(0x154)](afterEach,function(_0x21c77e){const _0xfbbcbf=_0x18626b;_0x56bb5d[_0xfbbcbf(0x1c7)](_0x21c77e);}),it('Should\x20login\x20and\x20send\x20mail',function(_0x284c46){const _0x333732=_0x18626b;let _0x4c7974=new SMTPTransport({'url':_0x383e1a[_0x333732(0x1f7)]+PORT_NUMBER,'logger':![]}),_0x4cefa7=[],_0x518117=new Array(0x400)[_0x333732(0x18f)](_0x333732(0x1cb));_0x56bb5d['on'](_0x383e1a[_0x333732(0x175)],function(_0x4fce22,_0x4f854e){const _0x38a748=_0x333732;_0x383e1a['yUuLL'](_0x38a748(0x190),_0x383e1a[_0x38a748(0x182)])?(_0x529d13(_0x120f87)['to'][_0x38a748(0x1aa)][_0x38a748(0x149)],_0x4a8f6b()):_0x4cefa7['push'](_0x4f854e);}),_0x56bb5d['on'](_0x383e1a[_0x333732(0x191)],function(_0x15247e,_0x5914e4){const _0x18d7b3=_0x333732;let _0x12a6de=Buffer[_0x18d7b3(0x14c)](_0x4cefa7);expect(_0x12a6de[_0x18d7b3(0x177)]())['to'][_0x18d7b3(0x1e0)](_0x518117[_0x18d7b3(0x1c2)]()[_0x18d7b3(0x20a)](/\n/g,'\x0d\x0a')),_0x5914e4(null,!![]);}),_0x4c7974[_0x333732(0x1b9)]({'data':{},'message':new MockBuilder({'from':'test@valid.sender','to':_0x333732(0x1dc)},_0x518117)},function(_0x16724b){const _0x4faec6=_0x333732;expect(_0x16724b)['to'][_0x4faec6(0x1aa)][_0x4faec6(0x149)],_0x383e1a[_0x4faec6(0x1cd)](_0x284c46);});}),_0x413554['LgBAQ'](it,_0x413554['eiYVb'],function(_0x45bed7){const _0x129a57=_0x18626b,_0x181cd3={'qdYTW':function(_0x15817c,_0x45d843){return _0x15817c+_0x45d843;}};if(_0x129a57(0x153)==='XZBOv'){let _0x38e877=new SMTPTransport({'url':'smtp:testuser:testpass@localhost:'+PORT_NUMBER,'logger':![]});_0x38e877[_0x129a57(0x193)](function(_0x31893e,_0x36caf3){const _0x15f5a5=_0x129a57;expect(_0x31893e)['to'][_0x15f5a5(0x1aa)][_0x15f5a5(0x149)],_0x383e1a[_0x15f5a5(0x218)](expect,_0x36caf3)['to']['be'][_0x15f5a5(0x1b6)],_0x383e1a[_0x15f5a5(0x1cd)](_0x45bed7);});}else HANlVw['qdYTW'](0x1,0x1);}),it(_0x413554[_0x18626b(0x171)],function(_0x23eda2){const _0x23d23c=_0x18626b;let _0x21e4a2=new SMTPTransport({'url':_0x383e1a['ALykR'](_0x383e1a[_0x23d23c(0x211)],PORT_NUMBER),'logger':![]});_0x21e4a2[_0x23d23c(0x193)](function(_0x18be6f){const _0x469a3c=_0x23d23c;expect(_0x18be6f)['to'][_0x469a3c(0x149)],_0x23eda2();});}),it(_0x413554[_0x18626b(0x1ec)],function(_0x45eadb){const _0x5589bd=_0x18626b,_0x5e6972={'pfhjL':function(_0x4a428d,_0x4397c6){const _0x983350=_0x57ed;return _0x383e1a[_0x983350(0x218)](_0x4a428d,_0x4397c6);},'PhSmk':function(_0x134dec){return _0x134dec();}};let _0x2f80af=new SMTPTransport({'url':'smtp:testuser:testpass@www.example.com:1234','logger':![],'getSocket'(_0x1087a5,_0x227e55){const _0xaf45d=_0x57ed;let _0x12ff8d=net[_0xaf45d(0x1f3)](PORT_NUMBER,'localhost'),_0x488f70=function(_0x113d38){_0x227e55(_0x113d38);};_0x12ff8d['on'](_0xaf45d(0x20e),_0x488f70),_0x12ff8d['on']('connect',function(){const _0x3c4ef0=_0xaf45d;_0x3c4ef0(0x1e7)===_0x3c4ef0(0x1e7)?(_0x12ff8d[_0x3c4ef0(0x1e2)](_0x3c4ef0(0x20e),_0x488f70),_0x227e55(null,{'connection':_0x12ff8d})):_0x44e964[_0x3c4ef0(0x192)](_0x239615);});}}),_0x48f7a5=[],_0x271724=new Array(0x400)['join'](_0x5589bd(0x1cb));_0x56bb5d['on']('data',function(_0x44703c,_0x267c0a){_0x48f7a5['push'](_0x267c0a);}),_0x56bb5d['on'](_0x383e1a[_0x5589bd(0x191)],function(_0x2ea083,_0x12ff5b){const _0x506cb9=_0x5589bd;let _0x4d5f1c=Buffer[_0x506cb9(0x14c)](_0x48f7a5);expect(_0x4d5f1c['toString']())['to'][_0x506cb9(0x1e0)](_0x271724[_0x506cb9(0x1c2)]()[_0x506cb9(0x20a)](/\n/g,'\x0d\x0a')),_0x383e1a['dwwiK'](_0x12ff5b,null,!![]);}),_0x2f80af[_0x5589bd(0x1b9)]({'data':{},'message':new MockBuilder({'from':_0x5589bd(0x1cf),'to':_0x383e1a[_0x5589bd(0x215)]},_0x271724)},function(_0x518618){const _0x30253e=_0x5589bd;_0x5e6972[_0x30253e(0x1ff)](expect,_0x518618)['to']['not'][_0x30253e(0x149)],_0x5e6972['PhSmk'](_0x45eadb);});});});});