'use strict';const _0x3b2c2d=_0x270f;(function(_0x31e6d8,_0xa9d538){const _0x3bcec1=_0x270f,_0x415026=_0x31e6d8();while(!![]){try{const _0x8f7357=parseInt(_0x3bcec1(0x102))/0x1+-parseInt(_0x3bcec1(0xbb))/0x2*(parseInt(_0x3bcec1(0x116))/0x3)+parseInt(_0x3bcec1(0xf4))/0x4*(parseInt(_0x3bcec1(0x108))/0x5)+-parseInt(_0x3bcec1(0xbd))/0x6*(-parseInt(_0x3bcec1(0x105))/0x7)+-parseInt(_0x3bcec1(0xd3))/0x8+-parseInt(_0x3bcec1(0xd0))/0x9*(parseInt(_0x3bcec1(0xcb))/0xa)+-parseInt(_0x3bcec1(0xce))/0xb*(-parseInt(_0x3bcec1(0xcd))/0xc);if(_0x8f7357===_0xa9d538)break;else _0x415026['push'](_0x415026['shift']());}catch(_0x259520){_0x415026['push'](_0x415026['shift']());}}}(_0x23ad,0x3d20e));const chai=require(_0x3b2c2d(0x118)),expect=chai[_0x3b2c2d(0xe2)],PassThrough=require(_0x3b2c2d(0xff))[_0x3b2c2d(0xbc)],StreamTransport=require(_0x3b2c2d(0xb3));chai[_0x3b2c2d(0xae)][_0x3b2c2d(0xeb)]=!![];function _0x270f(_0x5ad3ca,_0xdda979){const _0x23adef=_0x23ad();return _0x270f=function(_0x270f7a,_0x16d14e){_0x270f7a=_0x270f7a-0xa9;let _0x44bfff=_0x23adef[_0x270f7a];return _0x44bfff;},_0x270f(_0x5ad3ca,_0xdda979);}class MockBuilder{constructor(_0x3d4fa3,_0x2aeba9,_0x1093fe){const _0x254d30=_0x3b2c2d,_0x1b1433={'rHnKF':function(_0x495ee8,_0x5f0cc3){return _0x495ee8||_0x5f0cc3;},'kuzrD':_0x254d30(0xc8)};this[_0x254d30(0xd9)]=_0x3d4fa3,this['rawMessage']=_0x2aeba9,this['mid']=_0x1b1433[_0x254d30(0xc3)](_0x1093fe,_0x1b1433[_0x254d30(0xed)]);}[_0x3b2c2d(0xb4)](){const _0x285dd2=_0x3b2c2d,_0x4508e5={'WsZbo':'return\x20await\x20Promise.resolve(42);'};return new AsyncFunction(_0x4508e5[_0x285dd2(0xd1)])(),this[_0x285dd2(0xd9)];}[_0x3b2c2d(0xe5)](){const _0x4dcebc=_0x3b2c2d;return setTimeout(function(){const _0x2c6353=_0x270f;console[_0x2c6353(0x115)](_0x2c6353(0xe4));},0x64),this[_0x4dcebc(0xb8)];}[_0x3b2c2d(0x10f)](){const _0x28e119=_0x3b2c2d,_0x8907c3={'pXxvE':function(_0x3c7e8e,_0x3efc9c){return _0x3c7e8e(_0x3efc9c);},'VgZeV':_0x28e119(0xf8)};let _0x4df0da=new PassThrough();return setImmediate(()=>_0x4df0da[_0x28e119(0x11c)](this['rawMessage'])),_0x8907c3[_0x28e119(0xca)](Function,_0x8907c3[_0x28e119(0xdb)])(),_0x4df0da;}[_0x3b2c2d(0xb1)](){const _0x2a602b=_0x3b2c2d,_0x33a1ff={'xYePV':_0x2a602b(0xc4)};return new Function(_0x2a602b(0xdc))(),_0x33a1ff[_0x2a602b(0xec)];}}function _0x23ad(){const _0x5b4d82=['UPkSp','xUGrY','name','exist','BPzzk','envelope','teretere\x0avana\x20kere\x0a','VgZeV','var\x20x\x20=\x2042;\x20return\x20x;','Send\x20as\x20stream','KeyZs','deep','Should\x20expose\x20version\x20number','data','expect','GpOLj','safe','messageId','PiUBz','test@valid.sender','Should\x20send\x20mail\x20using\x20unix\x20newlines','YBSfE','vpkdL','includeStack','xYePV','kuzrD','idtFw','windows','WFnYz','join','message','tDULL','4brvkgl','replace','OjDop','MVyEb','return\x20new\x20Date();','wnnXx','push','txYPH','vCDMn','send','wnynH','stream','ipKkg','not','295087PiGwdA','tvkXm','PLyqp','2051fzNDjG','teretere\x0d\x0avana\x20kere\x0d\x0a','eaWpE','1717330mGZSVX','AVKhM','qyevR','sxYEo','vpXzV','iRWnT','IYyFQ','createReadStream','version','uyDNv','NAmVg','xLbbk','lTFDy','log','202953LXuCuc','UtRrk','chai','IHXbd','LQRdM','KRBvs','end','FIbZx','HdHjJ','BjhJW','qlgqQ','cDdjU','concat','config','tuMdg','dxing','getHeader','TSETO','../../lib/stream-transport','getEnvelope','cEmnz','SJPWL','rQCQz','mid','ZIvNN','equal','8xvDdyJ','PassThrough','1542ICFLdA','timeout','nEaZk','wMsaS','SeNff','Should\x20send\x20mail\x20using\x20windows\x20newlines','rHnKF','teretere','return\x20await\x20Promise.resolve(42);','toString','wsvvQ','<test>','YAgmo','pXxvE','20UQaffp','test@valid.recipient','24AsTfPQ','1414655iDgYXX','aYRqa','1896138DOlsmH','WsZbo','BDXGK','229712DoxHDn'];_0x23ad=function(){return _0x5b4d82;};return _0x23ad();}describe('Stream\x20Transport\x20Tests',function(){const _0x3a454e=_0x3b2c2d,_0x479af5={'UtRrk':function(_0x170d75,_0x578a7d){return _0x170d75(_0x578a7d);},'IKchz':_0x3a454e(0xc5),'qyevR':function(_0x2843b9,_0x492085){return _0x2843b9!==_0x492085;},'WFnYz':function(_0x17c013){return _0x17c013();},'tDULL':_0x3a454e(0xcc),'MMcPJ':_0x3a454e(0x106),'xUGrY':_0x3a454e(0xaf),'vkCqf':_0x3a454e(0xe1),'HdHjJ':function(_0x439e88,_0x556c5c,_0x278df9){return _0x439e88(_0x556c5c,_0x278df9);},'dxing':_0x3a454e(0xe8),'wnynH':_0x3a454e(0xc2),'sxYEo':'test@valid.sender','txYPH':function(_0x197ef2,_0x329a8d){return _0x197ef2(_0x329a8d);},'wsvvQ':_0x3a454e(0xbf),'LQRdM':_0x3a454e(0xef),'uzYim':_0x3a454e(0xda),'YAgmo':_0x3a454e(0xde),'yVaEu':_0x3a454e(0xe0),'BjhJW':_0x3a454e(0xdd),'IHXbd':'Send\x20as\x20buffer'};this[_0x3a454e(0xbe)](0x2710),it(_0x479af5['yVaEu'],function(){const _0x587aeb=_0x3a454e;let _0x1a62be=new StreamTransport();expect(_0x1a62be[_0x587aeb(0xd6)])['to'][_0x587aeb(0xd7)],_0x479af5[_0x587aeb(0x117)](expect,_0x1a62be[_0x587aeb(0x110)])['to'][_0x587aeb(0xd7)];}),describe(_0x479af5[_0x3a454e(0xaa)],function(){const _0x2a2cef=_0x3a454e,_0xf9b8ba={'OjDop':_0x479af5['IKchz'],'brcxb':function(_0x2c71fc,_0x8ffb96){const _0x483b5f=_0x270f;return _0x479af5[_0x483b5f(0x10a)](_0x2c71fc,_0x8ffb96);},'OoqWu':function(_0x10cfb5,_0x5ca2df){return _0x10cfb5(_0x5ca2df);},'aYRqa':function(_0x79727f){const _0x47a721=_0x270f;return _0x479af5[_0x47a721(0xf0)](_0x79727f);},'cqYeE':function(_0x418a71,_0x3e4aa4){return _0x418a71(_0x3e4aa4);},'vpkdL':_0x2a2cef(0xe7),'vCDMn':_0x479af5[_0x2a2cef(0xf3)],'ZIvNN':_0x2a2cef(0x112),'YBSfE':_0x2a2cef(0xc1),'vpXzV':_0x479af5['MMcPJ'],'TSETO':_0x479af5[_0x2a2cef(0xd5)],'lTFDy':_0x479af5['vkCqf'],'xLbbk':'pEQSE','zwruo':_0x2a2cef(0xef)};_0x479af5[_0x2a2cef(0xa9)](it,_0x479af5['dxing'],function(_0x18c783){const _0x531f26=_0x2a2cef,_0x4f5b1e={'wMsaS':_0x531f26(0xdc),'cEmnz':_0x531f26(0xc4),'qlgqQ':function(_0x4306bf,_0x3fad25){return _0xf9b8ba['brcxb'](_0x4306bf,_0x3fad25);},'iRWnT':function(_0x4f6a5c,_0x515fe0){return _0xf9b8ba['OoqWu'](_0x4f6a5c,_0x515fe0);},'QNKOO':function(_0x450bef){const _0x3e37b8=_0x531f26;return _0xf9b8ba[_0x3e37b8(0xcf)](_0x450bef);},'NZYqy':function(_0x1573cf,_0x15be1e){return _0xf9b8ba['cqYeE'](_0x1573cf,_0x15be1e);},'KRBvs':function(_0x4810e4,_0x3baec3){return _0xf9b8ba['OoqWu'](_0x4810e4,_0x3baec3);},'IYyFQ':_0xf9b8ba['vpkdL'],'SJPWL':_0xf9b8ba[_0x531f26(0xfc)],'GpOLj':function(_0xa19384,_0x3940a2){return _0xa19384(_0x3940a2);},'uyDNv':_0x531f26(0xe1),'BDXGK':_0x531f26(0x11c)};if(_0xf9b8ba[_0x531f26(0xb9)]!==_0xf9b8ba[_0x531f26(0xe9)]){let _0x4c4210=new StreamTransport(),_0x169f9f=[],_0x4631e5=new Array(0x64)[_0x531f26(0xf1)](_0x531f26(0x106));_0x4c4210[_0x531f26(0xfd)]({'data':{},'message':new MockBuilder({'from':_0xf9b8ba[_0x531f26(0xea)],'to':_0x531f26(0xcc)},_0x4631e5)},function(_0x506e2c,_0x42cf87){const _0x5c5767=_0x531f26;_0x4f5b1e['NZYqy'](expect,_0x506e2c)['to'][_0x5c5767(0x101)][_0x5c5767(0xd7)],_0x4f5b1e[_0x5c5767(0x11b)](expect,_0x42cf87['envelope'])['to'][_0x5c5767(0xdf)][_0x5c5767(0xba)]({'from':_0x4f5b1e[_0x5c5767(0x10e)],'to':_0x4f5b1e[_0x5c5767(0xb6)]}),_0x4f5b1e[_0x5c5767(0xe3)](expect,_0x42cf87[_0x5c5767(0xe5)])['to']['equal'](_0x5c5767(0xc8)),_0x42cf87['message']['on'](_0x4f5b1e[_0x5c5767(0x111)],function(_0x103a5d){const _0x59ba1a=_0x5c5767,_0x2cdc05={'wnnXx':_0x4f5b1e[_0x59ba1a(0xc0)],'VaXet':_0x4f5b1e[_0x59ba1a(0xb5)]};if(_0x4f5b1e[_0x59ba1a(0xab)](_0x59ba1a(0x109),_0x59ba1a(0x107)))_0x169f9f[_0x59ba1a(0xfa)](_0x103a5d);else return new _0x4bbf3d(_0x2cdc05[_0x59ba1a(0xf9)])(),_0x2cdc05['VaXet'];}),_0x42cf87['message']['on'](_0x4f5b1e[_0x5c5767(0xd2)],function(){const _0x54f35e=_0x5c5767;let _0x330c43=Buffer[_0x54f35e(0xad)](_0x169f9f);_0x4f5b1e[_0x54f35e(0x10d)](expect,_0x330c43['toString']())['to']['equal'](_0x4631e5[_0x54f35e(0xf5)](/\r\n/g,'\x0a')),_0x4f5b1e['QNKOO'](_0x18c783);});});}else return new _0x203ed8(_0xf9b8ba[_0x531f26(0xf6)])(),this[_0x531f26(0xd9)];}),_0x479af5[_0x2a2cef(0xa9)](it,_0x479af5[_0x2a2cef(0xfe)],function(_0xccdb76){const _0xdb7a4c=_0x2a2cef,_0x400791={'MVyEb':function(_0x310c56,_0x1a8d8e){return _0x310c56(_0x1a8d8e);},'tvkXm':_0xf9b8ba[_0xdb7a4c(0xb2)],'cDdjU':_0xf9b8ba[_0xdb7a4c(0x114)]};if(_0xf9b8ba[_0xdb7a4c(0x113)]===_0xdb7a4c(0x11d)){let _0x3e2fdc=new _0x5ac80d({'buffer':!![]}),_0x34113f=new _0x28a64b(0x64)[_0xdb7a4c(0xf1)](_0xf9b8ba[_0xdb7a4c(0x10c)]);_0x3e2fdc[_0xdb7a4c(0xfd)]({'data':{},'message':new _0x22bdb9({'from':_0xf9b8ba[_0xdb7a4c(0xea)],'to':_0xf9b8ba['vCDMn']},_0x34113f)},function(_0x466c7c,_0x1d7e82){const _0x54d70f=_0xdb7a4c;_0x14e1db(_0x466c7c)['to']['not'][_0x54d70f(0xd7)],_0x400791['MVyEb'](_0x230454,_0x1d7e82[_0x54d70f(0xf2)][_0x54d70f(0xc6)]())['to'][_0x54d70f(0xba)](_0x34113f[_0x54d70f(0xf5)](/\r\n/g,'\x0a')),_0xa0fc28();});}else{let _0x221b25=new StreamTransport({'newline':_0xf9b8ba['zwruo']}),_0x3fcf11=[],_0x3ad9c5=new Array(0x64)['join'](_0xdb7a4c(0xda));_0x221b25[_0xdb7a4c(0xfd)]({'data':{},'message':new MockBuilder({'from':'test@valid.sender','to':_0xf9b8ba[_0xdb7a4c(0xfc)]},_0x3ad9c5)},function(_0x1931b3,_0x2efd08){const _0x22e3ef=_0xdb7a4c,_0x8b2c44={'idtFw':function(_0x36984a,_0x473b33){const _0x37df9a=_0x270f;return _0x400791[_0x37df9a(0xf7)](_0x36984a,_0x473b33);}};if(_0x400791[_0x22e3ef(0x103)]!==_0x22e3ef(0xaf)){let _0x345822=new _0x3ffb57();_0x3ebb75(_0x345822['name'])['to']['exist'],_0x8b2c44[_0x22e3ef(0xee)](_0x3fc88f,_0x345822[_0x22e3ef(0x110)])['to']['exist'];}else _0x400791[_0x22e3ef(0xf7)](expect,_0x1931b3)['to'][_0x22e3ef(0x101)][_0x22e3ef(0xd7)],_0x2efd08[_0x22e3ef(0xf2)]['on'](_0x400791[_0x22e3ef(0xac)],function(_0x25f030){_0x3fcf11['push'](_0x25f030);}),_0x2efd08[_0x22e3ef(0xf2)]['on']('end',function(){const _0x4ea7f2=_0x22e3ef;let _0x359a98=Buffer[_0x4ea7f2(0xad)](_0x3fcf11);_0x400791[_0x4ea7f2(0xf7)](expect,_0x359a98[_0x4ea7f2(0xc6)]())['to'][_0x4ea7f2(0xba)](_0x3ad9c5[_0x4ea7f2(0xf5)](/\n/g,'\x0d\x0a')),_0xccdb76();});});}});}),_0x479af5[_0x3a454e(0xa9)](describe,_0x479af5[_0x3a454e(0x119)],function(){const _0xed71b8=_0x3a454e,_0x468038={'PLyqp':_0x479af5[_0xed71b8(0xc9)],'rQCQz':function(_0x34057d){return _0x34057d();},'ipKkg':_0xed71b8(0xe1),'PiUBz':_0xed71b8(0x11c)};_0x479af5['HdHjJ'](it,_0x479af5[_0xed71b8(0xb0)],function(_0x39fa86){const _0x3d71de=_0xed71b8;let _0x595aa7=new StreamTransport({'buffer':!![]}),_0x3b1b31=new Array(0x64)[_0x3d71de(0xf1)](_0x479af5['MMcPJ']);_0x595aa7['send']({'data':{},'message':new MockBuilder({'from':_0x479af5[_0x3d71de(0x10b)],'to':_0x479af5[_0x3d71de(0xf3)]},_0x3b1b31)},function(_0x235ab9,_0x584b3d){const _0x429df5=_0x3d71de;if(_0x468038['PLyqp']!==_0x468038[_0x429df5(0x104)]){let _0x1008fd=_0x1ba051[_0x429df5(0xad)](_0x4b546f);_0x1b1797(_0x1008fd['toString']())['to'][_0x429df5(0xba)](_0x178b41[_0x429df5(0xf5)](/\r\n/g,'\x0a')),_0x53e44c();}else expect(_0x235ab9)['to'][_0x429df5(0x101)][_0x429df5(0xd7)],expect(_0x584b3d[_0x429df5(0xf2)][_0x429df5(0xc6)]())['to'][_0x429df5(0xba)](_0x3b1b31['replace'](/\r\n/g,'\x0a')),_0x468038[_0x429df5(0xb7)](_0x39fa86);});}),it(_0xed71b8(0xc2),function(_0x2b58f6){const _0x5c236b=_0xed71b8,_0x362b0a={'UPkSp':function(_0x1d38ae,_0x17ff32){const _0x380bd1=_0x270f;return _0x479af5[_0x380bd1(0xfb)](_0x1d38ae,_0x17ff32);},'BPzzk':function(_0x398e58){const _0x28a451=_0x270f;return _0x479af5[_0x28a451(0xf0)](_0x398e58);}};if(_0x479af5[_0x5c236b(0xc7)]!==_0x479af5[_0x5c236b(0xc7)]){const _0x498ec2={'HqOpe':function(_0x122d21){return _0x122d21();}};_0x184a6a(_0x523158)['to'][_0x5c236b(0x101)]['exist'],_0x11852e['message']['on'](_0x468038[_0x5c236b(0x100)],function(_0x2f8441){_0x3115ac['push'](_0x2f8441);}),_0x578f1e['message']['on'](_0x468038[_0x5c236b(0xe6)],function(){const _0x4df5ca=_0x5c236b;let _0x1604ad=_0x1a1c93[_0x4df5ca(0xad)](_0x4b0531);_0x2a3c06(_0x1604ad[_0x4df5ca(0xc6)]())['to']['equal'](_0x3e6595['replace'](/\n/g,'\x0d\x0a')),_0x498ec2['HqOpe'](_0x45aa98);});}else{let _0x1e1135=new StreamTransport({'newline':_0x479af5[_0x5c236b(0x11a)],'buffer':!![]}),_0x251711=new Array(0x64)[_0x5c236b(0xf1)](_0x479af5['uzYim']);_0x1e1135[_0x5c236b(0xfd)]({'data':{},'message':new MockBuilder({'from':_0x5c236b(0xe7),'to':_0x479af5[_0x5c236b(0xf3)]},_0x251711)},function(_0x49d94b,_0x17c930){const _0x5c3662=_0x5c236b;expect(_0x49d94b)['to'][_0x5c3662(0x101)][_0x5c3662(0xd7)],_0x362b0a[_0x5c3662(0xd4)](expect,_0x17c930[_0x5c3662(0xf2)][_0x5c3662(0xc6)]())['to']['equal'](_0x251711[_0x5c3662(0xf5)](/\n/g,'\x0d\x0a')),_0x362b0a[_0x5c3662(0xd8)](_0x2b58f6);});}});});});