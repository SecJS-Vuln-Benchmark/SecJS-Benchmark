'use strict';const _0x37590a=_0x554e;(function(_0xdc966b,_0xf2041d){const _0x2a9fbb=_0x554e,_0x52d64a=_0xdc966b();while(!![]){try{const _0x58bef9=parseInt(_0x2a9fbb(0x2ea))/0x1*(parseInt(_0x2a9fbb(0x2e3))/0x2)+-parseInt(_0x2a9fbb(0x2d1))/0x3+-parseInt(_0x2a9fbb(0x29a))/0x4*(-parseInt(_0x2a9fbb(0x2ad))/0x5)+-parseInt(_0x2a9fbb(0x2b2))/0x6*(parseInt(_0x2a9fbb(0x1dd))/0x7)+-parseInt(_0x2a9fbb(0x2b0))/0x8+parseInt(_0x2a9fbb(0x238))/0x9+parseInt(_0x2a9fbb(0x237))/0xa*(parseInt(_0x2a9fbb(0x267))/0xb);if(_0x58bef9===_0xf2041d)break;else _0x52d64a['push'](_0x52d64a['shift']());}catch(_0x4972d7){_0x52d64a['push'](_0x52d64a['shift']());}}}(_0x3133,0xc0484));function _0x554e(_0x252d1b,_0x3f7fce){const _0x313326=_0x3133();return _0x554e=function(_0x554e49,_0x133e77){_0x554e49=_0x554e49-0x1d6;let _0x6f0b7=_0x313326[_0x554e49];return _0x6f0b7;},_0x554e(_0x252d1b,_0x3f7fce);}const MongoStorageAdapter=require('../lib/Adapters/Storage/Mongo/MongoStorageAdapter')[_0x37590a(0x21a)],{MongoClient,Collection}=require(_0x37590a(0x231)),databaseURI='mongodb://localhost:27017/parseServerMongoAdapterTestDatabase',request=require('../lib/request'),Config=require('../lib/Config'),TestUtils=require('../lib/TestUtils'),fakeClient={'s':{'options':{'dbName':null}},'db':()=>null};function _0x3133(){const _0xf47edb=['dropAllIndexes','myValue','hlfQj','objectId','session','transaction','tan','stores\x20pointers\x20with\x20a\x20_p_\x20prefix','IQIhM','epyoY','toBeDefined','Tvfcp','username','qwerty','/1/classes/MyObject/','gJapX','catch','Number','Bunny','APointerDarkly','dqcfy','schemaCache','Array','fPBnr','fHLMd','7TcsyKB','Stuff','eVfch','dMNbg','Mnjkx','application/json','fields','foo','should\x20not\x20use\x20transaction\x20in\x20a\x20batch\x20with\x20no\x20transaction\x20option\x20sent','MONGODB_TOPOLOGY','toBeRejectedWith','SAWRG','executionStats','ohuEa','JustThePointer$qwerty','FIcio','and','WHyZh','<5.1\x20||\x20>=6','FPiUf','should\x20not\x20use\x20transactions\x20when\x20using\x20SDK\x20update','AFIpA','uuid','maxTimeMS\x20should\x20not\x20affect\x20fast\x20queries\x20','fzfDF','User','should\x20delete\x20field\x20without\x20index','find\x20fails\x20when\x20query\x20exceeds\x20maxTimeMS','EeYUw','FgbTk','NJsuH','find','signUp','transactions','should\x20delete\x20field\x20with\x20index','EzSMd','date','paXHq','ljiDs','deleteAllClasses','Object','ViLlJ','opaDB','2016-05-26T20:55:01.154Z','ucFfe','className','POST','LdXCd','MongoStorageAdapter','length','log','RzAyO','database','kRDhd','mkQAj','CXAtO','classLevelPermissions','lbEdI','NuBFL','eXekp','fail','default','YXiuR','GePBc','qkpdh','operation\x20exceeded\x20time\x20limit','TetpZ','sPvgd','_id','tuNjH','FOBBE','console.log(\x22timer\x22);','toEqual','any','WPPiF','handles\x20creating\x20an\x20array,\x20object,\x20date','mongo','vmVNa','amount','destroyAllDataPermanently','aMFfz','save','should\x20not\x20use\x20transactions\x20when\x20using\x20SDK\x20delete','toHaveBeenCalledWith','mongodb','setCLP','oJFEC','LfOGE','state','gaqav','10LUhctD','8367219WUbYZg','SetOnInsert','TkYrM','KCgab','MgLCB','Server','MsfMf','auDgi','update','hZeiZ','LLPqx','Date','tvAIu','string','String','return\x20await\x20Promise.resolve(42);','rest','byond','_User','lhSjd','Yjiih','oXXrQ','getClass\x20if\x20not\x20exists','nttmK','TSdUv','lYlMO','COLLSCAN','subdoc','doesn\x27t\x20double\x20escape\x20already\x20URI-encoded\x20information','uixbn','toBeUndefined','then','AaJEX','mHNsU','Qotgm','object','should\x20not\x20use\x20transactions\x20when\x20using\x20SDK\x20insert','uDjCD','connect','IovrY','lmzIg','handles\x20updating\x20a\x20single\x20object\x20with\x20array,\x20object\x20date','_p_aPointer','returnValue','abcde','deleteFields','should\x20not\x20use\x20transaction\x20in\x20a\x20batch\x20with\x20transaction\x20=\x20false','10638683LtLpJh','applicationId','watch\x20_SCHEMA','handles\x20nested\x20dates','callThrough','mongodb://localhost:27017/parseServerMongoAdapterTestDatabase?replicaSet=replicaset','myAttribute','toBeFalsy','JumdX','FIanW','Schema','qMfvd','MongoServerError','handles\x20object\x20and\x20subdocument','upserts\x20with\x20$setOnInsert','nrgib','KvpBX','toBeTrue','TRANSACTION_COMMITTED','aKlUf','CMxCJ','wkuyN','BpOzz','hYFuE','mBvHR','cTxNP','zJcQD','bar','LXVoP','cXLXF','all','rlgIf','gVezj','fWAex','JnsQf','getClass\x20if\x20exists','lTEpw','OMrBo','current','auto-escapes\x20symbols\x20in\x20auth\x20information','toBe','xItDm','createObject','stringify','TigcE','http://localhost:8378/1/batch','handleShutdown','XtDwC','Gduig','Bugs','JustThePointer','688876ujpcyE','createClass','wsIxd','ATPrB','connections','destroy','serverStatus','admin','bnaKv','find\x20succeeds\x20when\x20query\x20is\x20within\x20maxTimeMS','PUT','_onchange','CfSYh','iUucN','uRncZ','count','sleep(','ensureIndex','Foo','35oSShMH','SAZLr','XxltJ','10536696HZqBqL','dAIYz','9363522LRtTzU','args','executionStages','should\x20change','stage','adapter','getClass','hgktY','set','handles\x20nested\x20dates\x20in\x20array\x20','array','iso','should\x20use\x20index\x20for\x20caseInsensitive\x20query','PpAAt','VZsSx','code','FNeBs','ruYIf','get','toBeGreaterThan','findOneAndUpdate','message','CowHN','Find\x20succeeded\x20despite\x20taking\x20too\x20long!','calls','clan','Client\x20must\x20be\x20connected\x20before\x20running\x20operations','MyClass','_rawFind','qrIKf','WCnJB','300366xOfpJe','zfYGl','MyObject','oGXyx','ciXYG','Increment','resolve','jWiKE','mongodb://test:testpass@ds056315-a0.mongolab.com:59325,ds059315-a1.mongolab.com:59315/testDBname?replicaSet=rs-ds059415','fMwbj','lzxip','jpMcK','prototype','DzERd','return\x20Object.keys({a:1});','rSuDe','test','zWVGb','1326014RvhIhx','__type','gRMZL','WSxDF','ieRnQ','stores\x20objectId\x20in\x20_id','forEach','1pUZyFb','enableSchemaHooks','JYLZE','insertOne','MvQvf','http://localhost:8378/1/classes/MyObject/','TGGxk','mongodb://user!with@+\x20symbols:password!with@+\x20symbols@localhost:1234/parse'];_0x3133=function(){return _0xf47edb;};return _0x3133();}describe_only_db(_0x37590a(0x229))(_0x37590a(0x20d),()=>{const _0x11ea47=_0x37590a,_0x5332ee={'LdXCd':function(_0x1657e6,_0x5567c0,_0x19ea01){return _0x1657e6(_0x5567c0,_0x19ea01);},'oIluj':_0x11ea47(0x2f1),'TigcE':function(_0x47581b,_0x1152d0){return _0x47581b(_0x1152d0);},'JYLZE':'mongodb://user!with%40%2B%20symbols:password!with%40%2B%20symbols@localhost:1234/parse','rlgIf':'connect','JnsQf':function(_0xdf3762,_0x5d583d){return _0xdf3762(_0x5d583d);},'lbEdI':_0x11ea47(0x2d9),'qMfvd':_0x11ea47(0x264),'GePBc':function(_0x53917b,_0x4331c5){return _0x53917b(_0x4331c5);},'iUucN':_0x11ea47(0x273),'dMNbg':function(_0x2d03e8,_0x3f582b){return _0x2d03e8(_0x3f582b);},'DTJaa':_0x11ea47(0x245),'FIanW':function(_0x505f9a,_0x435bc){return _0x505f9a(_0x435bc);},'ohuEa':_0x11ea47(0x1eb),'jWiKE':'Pointer','gaqav':_0x11ea47(0x246),'EzSMd':function(_0x59cfdb,_0x3bb93e){return _0x59cfdb!==_0x3bb93e;},'FPiUf':_0x11ea47(0x21b),'LLPqx':function(_0x5084d4,_0x25274a){return _0x5084d4(_0x25274a);},'cTxNP':_0x11ea47(0x25b),'ucFfe':function(_0x596d32,_0x3747fc){return _0x596d32(_0x3747fc);},'mkQAj':'bar','lTEpw':_0x11ea47(0x2f8),'hYFuE':_0x11ea47(0x2cd),'tvAIu':function(_0x5b0744){return _0x5b0744();},'PpAAt':function(_0x589bd8,_0x4872de){return _0x589bd8 instanceof _0x4872de;},'UfmTM':function(_0x2f5a0b,_0x44261b){return _0x2f5a0b(_0x44261b);},'zJcQD':_0x11ea47(0x208),'uRncZ':_0x11ea47(0x243),'ljiDs':'Object','LXVoP':function(_0x4c0d45,_0x17aa70){return _0x4c0d45(_0x17aa70);},'rSuDe':function(_0x1f8df6,_0x6f7905){return _0x1f8df6(_0x6f7905);},'VZsSx':function(_0x3efbf5,_0x373d36){return _0x3efbf5(_0x373d36);},'nttmK':function(_0x14ad5d,_0x6a075f){return _0x14ad5d instanceof _0x6a075f;},'AhtuQ':_0x11ea47(0x201),'opaDB':function(_0x5b73a1,_0x2be065){return _0x5b73a1(_0x2be065);},'fMwbj':_0x11ea47(0x1f3),'IQIhM':_0x11ea47(0x303),'WSxDF':_0x11ea47(0x239),'AFIpA':_0x11ea47(0x2d6),'gVezj':function(_0x581834,_0x591057){return _0x581834(_0x591057);},'IDBnT':function(_0x47db65,_0x3a28d1){return _0x47db65(_0x3a28d1);},'hgktY':function(_0x17a078,_0x2dcd27){return _0x17a078(_0x2dcd27);},'paXHq':function(_0x4dff63,_0x548347){return _0x4dff63(_0x548347);},'eGzeM':function(_0x626279,_0x20ee36){return _0x626279>_0x20ee36;},'dAIYz':_0x11ea47(0x1da),'wQguq':function(_0x5e1cf7,_0x31559e){return _0x5e1cf7(_0x31559e);},'dJtzp':'UnknownClass','YaofI':_0x11ea47(0x2fe),'sPvgd':_0x11ea47(0x298),'sWHzl':'password','lhSjd':_0x11ea47(0x1d6),'nrgib':_0x11ea47(0x24a),'DtFFK':'bugs','XsTyk':function(_0xca20da,_0xf1bfef){return _0xca20da(_0xf1bfef);},'Qotgm':function(_0xbfd8f,_0x4b1e8d){return _0xbfd8f(_0x4b1e8d);},'hlfQj':_0x11ea47(0x2d3),'KvpBX':_0x11ea47(0x2e1),'TGGxk':function(_0x2cca07,_0x45fd34){return _0x2cca07(_0x45fd34);},'MsfMf':function(_0x294e99,_0x3ac376){return _0x294e99(_0x3ac376);},'NuBFL':_0x11ea47(0x23b),'eXekp':function(_0x138c51,_0x2869d7){return _0x138c51(_0x2869d7);},'fHLMd':function(_0x5c1cad,_0x54165a,_0x363eb4){return _0x5c1cad(_0x54165a,_0x363eb4);},'aMFfz':'findOneAndUpdate','cXLXF':_0x11ea47(0x20b),'SAZLr':_0x11ea47(0x2a4),'MgLCB':_0x11ea47(0x300),'ciXYG':'myValue','wkuyN':function(_0x944406,_0x3a00f3){return _0x944406(_0x3a00f3);},'oXXrQ':function(_0x2fc2e8,_0x1235bd){return _0x2fc2e8+_0x1235bd;},'dqcfy':function(_0x5deb91,_0x81a83d){return _0x5deb91(_0x81a83d);},'TErsm':function(_0x46f792,_0x2c3c16){return _0x46f792(_0x2c3c16);},'SZbHo':_0x11ea47(0x1e2),'epyoY':function(_0x330d1b,_0x2bc3d6,_0x1bd310){return _0x330d1b(_0x2bc3d6,_0x1bd310);},'vmVNa':_0x11ea47(0x266),'zfYGl':_0x11ea47(0x1e5),'Yjiih':'should\x20not\x20use\x20transaction\x20in\x20a\x20put\x20request','qkpdh':_0x11ea47(0x25c),'aGYPT':function(_0x5e0c57,_0x4dbfc2,_0x5bd820){return _0x5e0c57(_0x4dbfc2,_0x5bd820);},'byond':_0x11ea47(0x1f1),'fPBnr':function(_0x5eb51c,_0x5b5e74,_0x271240){return _0x5eb51c(_0x5b5e74,_0x271240);},'ieRnQ':_0x11ea47(0x279),'CiFMB':function(_0xa9d3e,_0x58aa80,_0x8750c9){return _0xa9d3e(_0x58aa80,_0x8750c9);},'IovrY':_0x11ea47(0x254),'mHNsU':function(_0x527b2c,_0x1909ea,_0x157e69){return _0x527b2c(_0x1909ea,_0x157e69);},'ruYIf':_0x11ea47(0x2a3),'JumdX':_0x11ea47(0x2f9),'CowHN':function(_0x4fb897,_0x514e73,_0x49f972){return _0x4fb897(_0x514e73,_0x49f972);},'mBvHR':_0x11ea47(0x228),'uixbn':function(_0x384b7f,_0x51d27b,_0x49a8dc){return _0x384b7f(_0x51d27b,_0x49a8dc);},'SAWRG':_0x11ea47(0x26a),'hZeiZ':_0x11ea47(0x2bb),'TSdUv':function(_0x543bc2,_0x51e4fa,_0xa71abc){return _0x543bc2(_0x51e4fa,_0xa71abc);},'aKlUf':_0x11ea47(0x275),'JJdvg':function(_0x5ecc8f,_0x3fdbe8,_0x44c938){return _0x5ecc8f(_0x3fdbe8,_0x44c938);},'NJsuH':_0x11ea47(0x24e),'TetpZ':function(_0x38514c,_0x362f46,_0x3dfd12){return _0x38514c(_0x362f46,_0x3dfd12);},'gRMZL':_0x11ea47(0x1ff),'AUyGu':_0x11ea47(0x1fe)};beforeEach(async()=>{const _0x3e846e=_0x11ea47;await new MongoStorageAdapter({'uri':databaseURI})[_0x3e846e(0x204)](),Config[_0x3e846e(0x2c4)](Parse[_0x3e846e(0x268)])[_0x3e846e(0x1d9)]['clear']();}),_0x5332ee[_0x11ea47(0x1db)](it,_0x11ea47(0x28e),()=>{const _0x60b79b=_0x11ea47;_0x5332ee[_0x60b79b(0x20c)](spyOn,MongoClient,_0x60b79b(0x25e))[_0x60b79b(0x1ed)]['returnValue'](Promise[_0x60b79b(0x2d7)](fakeClient)),new MongoStorageAdapter({'uri':_0x5332ee['oIluj']})[_0x60b79b(0x25e)](),_0x5332ee[_0x60b79b(0x293)](expect,MongoClient[_0x60b79b(0x25e)])['toHaveBeenCalledWith'](_0x5332ee['JYLZE'],jasmine['any'](Object));}),_0x5332ee['CiFMB'](it,_0x5332ee[_0x11ea47(0x25f)],()=>{const _0x5d6195=_0x11ea47;spyOn(MongoClient,_0x5332ee[_0x5d6195(0x286)])[_0x5d6195(0x1ed)][_0x5d6195(0x263)](Promise[_0x5d6195(0x2d7)](fakeClient)),new MongoStorageAdapter({'uri':_0x5332ee[_0x5d6195(0x2ec)]})[_0x5d6195(0x25e)](),_0x5332ee[_0x5d6195(0x289)](expect,MongoClient['connect'])[_0x5d6195(0x230)](_0x5332ee['JYLZE'],jasmine[_0x5d6195(0x226)](Object));}),it('preserves\x20replica\x20sets',()=>{const _0x2645f8=_0x11ea47;spyOn(MongoClient,_0x5332ee[_0x2645f8(0x286)])[_0x2645f8(0x1ed)]['returnValue'](Promise[_0x2645f8(0x2d7)](fakeClient)),new MongoStorageAdapter({'uri':_0x5332ee['lbEdI']})[_0x2645f8(0x25e)](),expect(MongoClient['connect'])[_0x2645f8(0x230)](_0x5332ee[_0x2645f8(0x216)],jasmine[_0x2645f8(0x226)](Object));}),it(_0x11ea47(0x2e8),_0x5c16ad=>{const _0x218a49=_0x11ea47,_0x41bfb0={'lmzIg':function(_0x4512b1,_0x209048){const _0x4462a9=_0x554e;return _0x5332ee[_0x4462a9(0x293)](_0x4512b1,_0x209048);},'RzAyO':function(_0x30b412){return _0x30b412();}},_0x3cf468=new MongoStorageAdapter({'uri':databaseURI});_0x3cf468[_0x218a49(0x291)](_0x218a49(0x2ac),{'fields':{}},{'objectId':_0x5332ee['qMfvd']})[_0x218a49(0x257)](()=>_0x3cf468['_rawFind'](_0x218a49(0x2ac),{}))[_0x218a49(0x257)](_0x38523b=>{const _0x27159e=_0x218a49;expect(_0x38523b[_0x27159e(0x20e)])[_0x27159e(0x225)](0x1);const _0x5ec026=_0x38523b[0x0];_0x41bfb0[_0x27159e(0x260)](expect,_0x5ec026['_id'])[_0x27159e(0x225)](_0x27159e(0x264)),expect(_0x5ec026['objectId'])[_0x27159e(0x256)](),_0x41bfb0[_0x27159e(0x210)](_0x5c16ad);});}),_0x5332ee[_0x11ea47(0x259)](it,_0x5332ee[_0x11ea47(0x2c3)],_0x2647c9=>{const _0x636fd7=_0x11ea47,_0x4b75ae=0xfa,_0x51a734=new MongoStorageAdapter({'uri':databaseURI,'mongoOptions':{'maxTimeMS':_0x4b75ae}});_0x51a734[_0x636fd7(0x291)](_0x636fd7(0x2ac),{'fields':{}},{'objectId':_0x5332ee[_0x636fd7(0x272)]})[_0x636fd7(0x257)](()=>_0x51a734[_0x636fd7(0x2ce)](_0x636fd7(0x2ac),{'$where':_0x636fd7(0x2aa)+_0x4b75ae/0x2+')'}))[_0x636fd7(0x257)](()=>_0x2647c9(),_0xe9642f=>{const _0x55c90a=_0x636fd7;_0x2647c9[_0x55c90a(0x219)](_0x55c90a(0x1f4)+_0xe9642f);});}),_0x5332ee[_0x11ea47(0x2fb)](it,_0x11ea47(0x1f8),_0x1f78ab=>{const _0x2ccd40=_0x11ea47,_0x209a7b=0xfa,_0x36729e=new MongoStorageAdapter({'uri':databaseURI,'mongoOptions':{'maxTimeMS':_0x209a7b}});_0x36729e[_0x2ccd40(0x291)](_0x2ccd40(0x2ac),{'fields':{}},{'objectId':_0x5332ee[_0x2ccd40(0x272)]})['then'](()=>_0x36729e[_0x2ccd40(0x2ce)](_0x2ccd40(0x2ac),{'$where':'sleep('+_0x209a7b*0x2+')'}))[_0x2ccd40(0x257)](()=>{const _0x41090b=_0x2ccd40;_0x1f78ab[_0x41090b(0x219)](_0x41090b(0x2c9));},_0x4894db=>{const _0x4d16ab=_0x2ccd40;_0x5332ee['GePBc'](expect,_0x4894db['name'])[_0x4d16ab(0x225)](_0x5332ee[_0x4d16ab(0x2a7)]),expect(_0x4894db[_0x4d16ab(0x2c1)])['toEqual'](0x32),expect(_0x4894db[_0x4d16ab(0x2c7)])['toMatch'](_0x4d16ab(0x21e)),_0x1f78ab();});}),_0x5332ee['mHNsU'](it,_0x5332ee[_0x11ea47(0x26f)],_0x27876b=>{const _0x37d7e2=_0x11ea47,_0x39df08={'objectId':_0x37d7e2(0x282),'aPointer':{'__type':_0x5332ee['jWiKE'],'className':_0x37d7e2(0x299),'objectId':_0x37d7e2(0x2ff)}},_0x3513ef=new MongoStorageAdapter({'uri':databaseURI});_0x3513ef[_0x37d7e2(0x291)](_0x37d7e2(0x1d7),{'fields':{'objectId':{'type':_0x5332ee[_0x37d7e2(0x236)]},'aPointer':{'type':_0x5332ee[_0x37d7e2(0x2d8)],'targetClass':_0x37d7e2(0x299)}}},_0x39df08)[_0x37d7e2(0x257)](()=>_0x3513ef['_rawFind'](_0x37d7e2(0x1d7),{}))['then'](_0x31051e=>{const _0x225ab6=_0x37d7e2;_0x5332ee[_0x225ab6(0x21c)](expect,_0x31051e['length'])['toEqual'](0x1);const _0x3810ca=_0x31051e[0x0];_0x5332ee[_0x225ab6(0x1e0)](expect,typeof _0x3810ca['_id'])[_0x225ab6(0x225)](_0x5332ee['DTJaa']),expect(typeof _0x3810ca[_0x225ab6(0x262)])[_0x225ab6(0x225)]('string'),_0x5332ee[_0x225ab6(0x270)](expect,_0x3810ca['_p_aPointer'])[_0x225ab6(0x225)](_0x5332ee[_0x225ab6(0x1ea)]),_0x5332ee[_0x225ab6(0x270)](expect,_0x3810ca['aPointer'])[_0x225ab6(0x256)](),_0x27876b();});}),_0x5332ee[_0x11ea47(0x2c8)](it,_0x11ea47(0x274),_0x5b58c5=>{const _0xf56188=_0x11ea47,_0x1e8059={'ZplCH':_0x5332ee[_0xf56188(0x272)],'ZHSBF':function(_0xdb5209,_0x1eb28a){return _0xdb5209(_0x1eb28a);}},_0x2905e5=new MongoStorageAdapter({'uri':databaseURI}),_0x5a52ab={'fields':{'subdoc':{'type':_0xf56188(0x205)}}},_0x161c05={'subdoc':{'foo':_0x5332ee['mkQAj'],'wu':_0x5332ee[_0xf56188(0x28b)]}};_0x2905e5[_0xf56188(0x291)](_0xf56188(0x2cd),_0x5a52ab,_0x161c05)[_0xf56188(0x257)](()=>_0x2905e5['_rawFind'](_0xf56188(0x2cd),{}))['then'](_0x6ae872=>{const _0x35edd9=_0xf56188,_0x41e5ba={'tuNjH':function(_0x1cf0a6,_0x4c07d9){return _0x1cf0a6(_0x4c07d9);}};if(_0x5332ee[_0x35edd9(0x200)](_0x5332ee['FPiUf'],_0x5332ee[_0x35edd9(0x1f0)])){const _0x416d8f=new _0x168669({'uri':_0x56cd8e});_0x416d8f[_0x35edd9(0x291)](_0x35edd9(0x2ac),{'fields':{}},{'objectId':_0x1e8059['ZplCH']})['then'](()=>_0x416d8f[_0x35edd9(0x2ce)](_0x35edd9(0x2ac),{}))[_0x35edd9(0x257)](_0x18024e=>{const _0x1c3d54=_0x35edd9;_0x32a47e(_0x18024e[_0x1c3d54(0x20e)])[_0x1c3d54(0x225)](0x1);const _0x4c87c2=_0x18024e[0x0];_0x41e5ba[_0x1c3d54(0x222)](_0x200a4d,_0x4c87c2[_0x1c3d54(0x221)])[_0x1c3d54(0x225)](_0x1c3d54(0x264)),_0x41e5ba[_0x1c3d54(0x222)](_0x5355bc,_0x4c87c2[_0x1c3d54(0x2f5)])[_0x1c3d54(0x256)](),_0x49b0f5();});}else{_0x5332ee[_0x35edd9(0x289)](expect,_0x6ae872[_0x35edd9(0x20e)])['toEqual'](0x1);const _0x9b02f8=_0x6ae872[0x0];_0x5332ee[_0x35edd9(0x242)](expect,typeof _0x9b02f8[_0x35edd9(0x253)])['toBe'](_0x5332ee[_0x35edd9(0x280)]),_0x5332ee[_0x35edd9(0x209)](expect,_0x9b02f8[_0x35edd9(0x253)][_0x35edd9(0x1e4)])[_0x35edd9(0x28f)](_0x5332ee['mkQAj']),expect(_0x9b02f8[_0x35edd9(0x253)]['wu'])[_0x35edd9(0x28f)](_0x5332ee['lTEpw']);const _0x4e7b99={'subdoc.wu':_0x35edd9(0x2cb)};return setTimeout(_0x35edd9(0x224),0x3e8),_0x2905e5[_0x35edd9(0x2c6)](_0x5332ee[_0x35edd9(0x27e)],_0x5a52ab,{},_0x4e7b99);}})[_0xf56188(0x257)](()=>_0x2905e5[_0xf56188(0x2ce)](_0xf56188(0x2cd),{}))[_0xf56188(0x257)](_0x15a8f3=>{const _0x4f0b9c=_0xf56188;expect(_0x15a8f3[_0x4f0b9c(0x20e)])['toEqual'](0x1);const _0x3b39bc=_0x15a8f3[0x0];expect(typeof _0x3b39bc[_0x4f0b9c(0x253)])[_0x4f0b9c(0x28f)](_0x4f0b9c(0x25b)),_0x1e8059['ZHSBF'](expect,_0x3b39bc['subdoc'][_0x4f0b9c(0x1e4)])['toBe'](_0x4f0b9c(0x282)),_0x1e8059['ZHSBF'](expect,_0x3b39bc[_0x4f0b9c(0x253)]['wu'])['toBe'](_0x4f0b9c(0x2cb)),_0x5b58c5();});}),it(_0x5332ee[_0x11ea47(0x27f)],_0x2625dc=>{const _0x2c3f4b=_0x11ea47,_0x1d36ae={'BpOzz':function(_0x445917,_0x1cd43f){const _0x4281a3=_0x554e;return _0x5332ee[_0x4281a3(0x21c)](_0x445917,_0x1cd43f);},'Mnjkx':function(_0xffc1de,_0x40cb5c){const _0x5cd1b7=_0x554e;return _0x5332ee[_0x5cd1b7(0x2bf)](_0xffc1de,_0x40cb5c);},'oJFEC':_0x2c3f4b(0x243),'CfSYh':_0x2c3f4b(0x2df),'MvQvf':_0x2c3f4b(0x2db),'LfOGE':function(_0x5702d1,_0x263eec){return _0x5332ee['UfmTM'](_0x5702d1,_0x263eec);},'CMxCJ':function(_0x730b7f,_0x936bb4){return _0x730b7f instanceof _0x936bb4;},'lYlMO':function(_0x2df1a3,_0x4f457a){return _0x5332ee['GePBc'](_0x2df1a3,_0x4f457a);},'WCnJB':'return\x20new\x20Date();','ATPrB':function(_0x1b54f3,_0x20ed26){return _0x1b54f3(_0x20ed26);},'FIcio':_0x5332ee[_0x2c3f4b(0x281)]},_0x292a76=new MongoStorageAdapter({'uri':databaseURI}),_0x4c6345={'array':[0x1,0x2,0x3],'object':{'foo':_0x2c3f4b(0x282)},'date':{'__type':_0x5332ee[_0x2c3f4b(0x2a8)],'iso':_0x5332ee[_0x2c3f4b(0x281)]}},_0x224136={'fields':{'array':{'type':'Array'},'object':{'type':_0x5332ee[_0x2c3f4b(0x203)]},'date':{'type':_0x5332ee[_0x2c3f4b(0x2a8)]}}};_0x292a76[_0x2c3f4b(0x291)](_0x2c3f4b(0x2cd),_0x224136,_0x4c6345)[_0x2c3f4b(0x257)](()=>_0x292a76['_rawFind'](_0x2c3f4b(0x2cd),{}))[_0x2c3f4b(0x257)](_0x3c2a7d=>{const _0x30ad78=_0x2c3f4b,_0x31f0a6={'XxltJ':function(_0x227479,_0x5dd5ba){return _0x1d36ae['BpOzz'](_0x227479,_0x5dd5ba);},'WHyZh':function(_0x1b2e6b,_0x2a5bdd){const _0x201a9b=_0x554e;return _0x1d36ae[_0x201a9b(0x1e1)](_0x1b2e6b,_0x2a5bdd);},'ViLlJ':'object','kRkVa':function(_0x2ec9f6,_0x26b1f6){const _0x3b8f51=_0x554e;return _0x1d36ae[_0x3b8f51(0x27d)](_0x2ec9f6,_0x26b1f6);},'EeYUw':_0x1d36ae[_0x30ad78(0x233)],'OiwyI':_0x1d36ae[_0x30ad78(0x2a6)]};if(_0x1d36ae[_0x30ad78(0x2ee)]!==_0x30ad78(0x2db)){const _0x1172e1=_0x3387a9;return _0x31f0a6['XxltJ'](_0x5e12ee,_0x31f0a6[_0x30ad78(0x1ee)](_0x1172e1['array'],_0x27ebba))[_0x30ad78(0x28f)](!![]),_0x31f0a6[_0x30ad78(0x2af)](_0x4956bb,typeof _0x1172e1[_0x30ad78(0x25b)])[_0x30ad78(0x28f)](_0x31f0a6[_0x30ad78(0x206)]),_0x31f0a6['kRkVa'](_0x2cf076,_0x1172e1[_0x30ad78(0x201)]['__type'])[_0x30ad78(0x28f)](_0x31f0a6[_0x30ad78(0x1f9)]),_0x5e0df9(_0x1172e1[_0x30ad78(0x201)][_0x30ad78(0x2bd)])[_0x30ad78(0x28f)](_0x30ad78(0x208)),_0x23f627(_0x31f0a6['OiwyI'])(),_0x1e1330[_0x30ad78(0x2ce)]('MyClass',{});}else{_0x1d36ae['BpOzz'](expect,_0x3c2a7d[_0x30ad78(0x20e)])[_0x30ad78(0x225)](0x1);const _0x13c6e9=_0x3c2a7d[0x0];return _0x1d36ae[_0x30ad78(0x234)](expect,_0x1d36ae[_0x30ad78(0x27b)](_0x13c6e9['array'],Array))[_0x30ad78(0x28f)](!![]),_0x1d36ae[_0x30ad78(0x251)](expect,typeof _0x13c6e9[_0x30ad78(0x25b)])['toBe'](_0x30ad78(0x25b)),expect(_0x13c6e9[_0x30ad78(0x201)]instanceof Date)[_0x30ad78(0x28f)](!![]),Function(_0x1d36ae[_0x30ad78(0x2d0)])(),_0x292a76[_0x30ad78(0x1fc)](_0x30ad78(0x2cd),_0x224136,{},{});}})[_0x2c3f4b(0x257)](_0x34c6d0=>{const _0x46e37a=_0x2c3f4b;expect(_0x34c6d0[_0x46e37a(0x20e)])[_0x46e37a(0x225)](0x1);const _0x15ec4e=_0x34c6d0[0x0];expect(_0x1d36ae[_0x46e37a(0x27b)](_0x15ec4e[_0x46e37a(0x2bc)],Array))[_0x46e37a(0x28f)](!![]),_0x1d36ae[_0x46e37a(0x29d)](expect,typeof _0x15ec4e[_0x46e37a(0x25b)])['toBe'](_0x46e37a(0x25b)),expect(_0x15ec4e[_0x46e37a(0x201)]['__type'])[_0x46e37a(0x28f)](_0x1d36ae[_0x46e37a(0x233)]),expect(_0x15ec4e[_0x46e37a(0x201)][_0x46e37a(0x2bd)])[_0x46e37a(0x28f)](_0x1d36ae[_0x46e37a(0x1ec)]),_0x2625dc();})[_0x2c3f4b(0x302)](_0x11f884=>{const _0xe992e0=_0x2c3f4b;console['log'](_0x11f884),_0x5332ee[_0xe992e0(0x244)](fail),_0x5332ee['tvAIu'](_0x2625dc);});}),_0x5332ee[_0x11ea47(0x255)](it,_0x5332ee[_0x11ea47(0x1e8)],async()=>{const _0x3719b3=_0x11ea47;await new Parse[(_0x3719b3(0x205))](_0x5332ee['hYFuE'],{'foo':{'test':{'date':new Date()}},'bar':{'date':new Date()},'date':new Date()})[_0x3719b3(0x22e)]();const _0x2db92b=Config[_0x3719b3(0x2c4)](Parse[_0x3719b3(0x268)])['database'][_0x3719b3(0x2b7)],[_0x5eb9b2]=await _0x2db92b[_0x3719b3(0x2ce)](_0x5332ee[_0x3719b3(0x27e)],{});_0x5332ee[_0x3719b3(0x283)](expect,_0x5332ee[_0x3719b3(0x2bf)](_0x5eb9b2[_0x3719b3(0x201)],Date))['toBeTrue'](),expect(_0x5332ee[_0x3719b3(0x2bf)](_0x5eb9b2[_0x3719b3(0x282)][_0x3719b3(0x201)],Date))['toBeTrue'](),expect(_0x5eb9b2[_0x3719b3(0x1e4)]['test']['date']instanceof Date)[_0x3719b3(0x278)]();}),it(_0x5332ee[_0x11ea47(0x241)],async()=>{const _0x261a74=_0x11ea47;await new Parse[(_0x261a74(0x205))](_0x5332ee[_0x261a74(0x27e)],{'foo':{'test':{'date':[new Date()]}},'bar':{'date':[new Date()]},'date':[new Date()]})[_0x261a74(0x22e)]();const _0x7e77fb=Config[_0x261a74(0x2c4)](Parse[_0x261a74(0x268)])[_0x261a74(0x211)][_0x261a74(0x2b7)],[_0x91ad29]=await _0x7e77fb[_0x261a74(0x2ce)](_0x5332ee[_0x261a74(0x27e)],{});expect(_0x91ad29[_0x261a74(0x201)][0x0]instanceof Date)[_0x261a74(0x278)](),_0x5332ee[_0x261a74(0x2e0)](expect,_0x5332ee[_0x261a74(0x2bf)](_0x91ad29['bar'][_0x261a74(0x201)][0x0],Date))[_0x261a74(0x278)](),_0x5332ee[_0x261a74(0x2c0)](expect,_0x91ad29[_0x261a74(0x1e4)][_0x261a74(0x2e1)][_0x261a74(0x201)][0x0]instanceof Date)[_0x261a74(0x278)]();const _0x26e3ae=await new Parse['Query'](_0x5332ee[_0x261a74(0x27e)])['first']({'useMasterKey':!![]});expect(_0x5332ee[_0x261a74(0x24f)](_0x26e3ae['get'](_0x5332ee['AhtuQ'])[0x0],Date))[_0x261a74(0x278)](),_0x5332ee[_0x261a74(0x207)](expect,_0x5332ee[_0x261a74(0x2bf)](_0x26e3ae[_0x261a74(0x2c4)](_0x5332ee[_0x261a74(0x213)])[_0x261a74(0x201)][0x0],Date))[_0x261a74(0x278)](),expect(_0x5332ee['PpAAt'](_0x26e3ae[_0x261a74(0x2c4)](_0x261a74(0x1e4))[_0x261a74(0x2e1)][_0x261a74(0x201)][0x0],Date))[_0x261a74(0x278)]();}),_0x5332ee[_0x11ea47(0x250)](it,_0x5332ee[_0x11ea47(0x27a)],async()=>{const _0x551976=_0x11ea47,_0x2848a9=require(_0x5332ee[_0x551976(0x2da)]),_0x1cde3e=_0x2848a9['v4'](),_0x2fc5f0=_0x2848a9['v4'](),_0x2a7240={'className':'MyClass','fields':{'x':{'type':_0x5332ee[_0x551976(0x2fa)]},'count':{'type':_0x551976(0x303)}},'classLevelPermissions':{}},_0x1178ea=new Parse[(_0x551976(0x271))](_0x2a7240[_0x551976(0x20a)]);_0x1178ea[_0x551976(0x232)](_0x2a7240[_0x551976(0x215)]),await _0x1178ea[_0x551976(0x22e)]();const _0x527b9e={'x':0x1},_0x2484ac={'objectId':{'__op':_0x5332ee[_0x551976(0x2e6)],'amount':_0x1cde3e},'count':{'__op':_0x5332ee[_0x551976(0x1f2)],'amount':0x1}};await Parse[_0x551976(0x23d)]['database'][_0x551976(0x240)](_0x551976(0x2cd),_0x527b9e,_0x2484ac,{'upsert':!![]}),_0x2484ac[_0x551976(0x2f5)][_0x551976(0x22b)]=_0x2fc5f0,await Parse[_0x551976(0x23d)][_0x551976(0x211)][_0x551976(0x240)](_0x5332ee['hYFuE'],_0x527b9e,_0x2484ac,{'upsert':!![]});const _0x40e684=await Parse['Server'][_0x551976(0x211)][_0x551976(0x1fc)](_0x2a7240[_0x551976(0x20a)],{},{});expect(_0x40e684[_0x551976(0x20e)])[_0x551976(0x28f)](0x1),_0x5332ee[_0x551976(0x287)](expect,_0x40e684[0x0][_0x551976(0x2f5)])[_0x551976(0x28f)](_0x1cde3e),_0x5332ee['IDBnT'](expect,_0x40e684[0x0][_0x551976(0x2a9)])[_0x551976(0x28f)](0x2),expect(_0x40e684[0x0]['x'])[_0x551976(0x28f)](0x1);}),it(_0x11ea47(0x261),_0x10e550=>{const _0x3e662e=_0x11ea47,_0x1953f9={'FuACy':function(_0x3598b6,_0x150583){const _0x5ce42d=_0x554e;return _0x5332ee[_0x5ce42d(0x2b9)](_0x3598b6,_0x150583);},'bnaKv':function(_0x58b59a,_0xc52cea){return _0x58b59a(_0xc52cea);},'wsIxd':_0x5332ee['cTxNP'],'xItDm':function(_0x254236,_0x420c92){const _0x4d50c2=_0x554e;return _0x5332ee[_0x4d50c2(0x2b9)](_0x254236,_0x420c92);},'zWVGb':_0x3e662e(0x2cd)},_0xc92e51=new MongoStorageAdapter({'uri':databaseURI}),_0x6c6a4a={'fields':{'array':{'type':_0x3e662e(0x1da)},'object':{'type':_0x5332ee[_0x3e662e(0x203)]},'date':{'type':_0x5332ee[_0x3e662e(0x2a8)]}}};_0xc92e51[_0x3e662e(0x291)](_0x5332ee[_0x3e662e(0x27e)],_0x6c6a4a,{})[_0x3e662e(0x257)](()=>_0xc92e51[_0x3e662e(0x2ce)](_0x3e662e(0x2cd),{}))[_0x3e662e(0x257)](_0x249d28=>{const _0x213732=_0x3e662e;expect(_0x249d28[_0x213732(0x20e)])[_0x213732(0x225)](0x1);const _0x1bad69={'array':[0x1,0x2,0x3],'object':{'foo':_0x5332ee[_0x213732(0x213)]},'date':{'__type':_0x213732(0x243),'iso':_0x5332ee[_0x213732(0x281)]}},_0x325247={};return new AsyncFunction(_0x213732(0x247))(),_0xc92e51['findOneAndUpdate']('MyClass',_0x6c6a4a,_0x325247,_0x1bad69);})[_0x3e662e(0x257)](_0x3a077f=>{const _0x2dc3fa=_0x3e662e,_0x461dbf=_0x3a077f;return _0x1953f9['FuACy'](expect,_0x461dbf[_0x2dc3fa(0x2bc)]instanceof Array)[_0x2dc3fa(0x28f)](!![]),_0x1953f9[_0x2dc3fa(0x2a2)](expect,typeof _0x461dbf[_0x2dc3fa(0x25b)])[_0x2dc3fa(0x28f)](_0x1953f9[_0x2dc3fa(0x29c)]),_0x1953f9[_0x2dc3fa(0x290)](expect,_0x461dbf[_0x2dc3fa(0x201)][_0x2dc3fa(0x2e4)])['toBe'](_0x2dc3fa(0x243)),expect(_0x461dbf['date'][_0x2dc3fa(0x2bd)])[_0x2dc3fa(0x28f)](_0x2dc3fa(0x208)),Function(_0x2dc3fa(0x2df))(),_0xc92e51[_0x2dc3fa(0x2ce)](_0x1953f9[_0x2dc3fa(0x2e2)],{});})[_0x3e662e(0x257)](_0x274a3a=>{const _0x1a8076=_0x3e662e;expect(_0x274a3a[_0x1a8076(0x20e)])[_0x1a8076(0x225)](0x1);const _0x2c2a94=_0x274a3a[0x0];_0x5332ee[_0x1a8076(0x207)](expect,_0x2c2a94['array']instanceof Array)[_0x1a8076(0x28f)](!![]),expect(typeof _0x2c2a94[_0x1a8076(0x25b)])[_0x1a8076(0x28f)](_0x1a8076(0x25b)),expect(_0x2c2a94[_0x1a8076(0x201)]instanceof Date)[_0x1a8076(0x28f)](!![]),_0x10e550();})[_0x3e662e(0x302)](_0x5d5ec4=>{const _0x21459e=_0x3e662e;console[_0x21459e(0x20f)](_0x5d5ec4),fail(),_0x10e550();});}),_0x5332ee['JJdvg'](it,'handleShutdown,\x20close\x20connection',async()=>{const _0x3753f9=_0x11ea47,_0x7939ca=new MongoStorageAdapter({'uri':databaseURI}),_0x3a2a54={'fields':{'array':{'type':_0x3753f9(0x1da)},'object':{'type':'Object'},'date':{'type':_0x3753f9(0x243)}}};await _0x7939ca['createObject'](_0x5332ee[_0x3753f9(0x27e)],_0x3a2a54,{});const _0x32e7d6=await _0x7939ca[_0x3753f9(0x211)][_0x3753f9(0x2a1)]()[_0x3753f9(0x2a0)]();_0x5332ee[_0x3753f9(0x202)](expect,_0x5332ee['eGzeM'](_0x32e7d6[_0x3753f9(0x29e)][_0x3753f9(0x28d)],0x0))[_0x3753f9(0x225)](!![]),await _0x7939ca[_0x3753f9(0x295)]();try{await _0x7939ca[_0x3753f9(0x211)][_0x3753f9(0x2a1)]()['serverStatus'](),expect(![])[_0x3753f9(0x28f)](!![]);}catch(_0x5345a8){expect(_0x5345a8['message'])['toEqual'](_0x3753f9(0x2cc));}}),it(_0x11ea47(0x28a),async()=>{const _0x14e93d=_0x11ea47,_0x269e76=new MongoStorageAdapter({'uri':databaseURI}),_0x259e73={'fields':{'array':{'type':_0x5332ee[_0x14e93d(0x2b1)]},'object':{'type':_0x14e93d(0x205)},'date':{'type':_0x5332ee['uRncZ']}}};await _0x269e76[_0x14e93d(0x29b)](_0x14e93d(0x2cd),_0x259e73);const _0x1b47c2=await _0x269e76[_0x14e93d(0x2b8)](_0x5332ee[_0x14e93d(0x27e)]);expect(_0x1b47c2)[_0x14e93d(0x2fc)]();}),it(_0x5332ee[_0x11ea47(0x1fb)],async()=>{const _0x185d4f=_0x11ea47,_0x5741b4=new MongoStorageAdapter({'uri':databaseURI});await _0x5332ee['wQguq'](expectAsync,_0x5741b4[_0x185d4f(0x2b8)](_0x5332ee['dJtzp']))[_0x185d4f(0x1e7)](undefined);}),it_only_mongodb_version(_0x11ea47(0x1ef))(_0x11ea47(0x2be),async()=>{const _0x15386c=_0x11ea47,_0x418254=new Parse[(_0x15386c(0x1f6))]();_0x418254[_0x15386c(0x2ba)](_0x5332ee['YaofI'],_0x5332ee[_0x15386c(0x220)]),_0x418254[_0x15386c(0x2ba)](_0x5332ee['sWHzl'],_0x5332ee[_0x15386c(0x24b)]),await _0x418254[_0x15386c(0x1fd)]();const _0x124545=Config[_0x15386c(0x2c4)](Parse[_0x15386c(0x268)])[_0x15386c(0x211)];await _0x124545[_0x15386c(0x2b7)][_0x15386c(0x2f2)](_0x15386c(0x24a));const _0x2da24a=await _0x124545[_0x15386c(0x1fc)](_0x5332ee[_0x15386c(0x276)],{'username':_0x5332ee['DtFFK']},{'caseInsensitive':!![],'explain':!![]}),_0x2955eb=await new Parse[(_0x15386c(0x271))](_0x15386c(0x24a))['get']();await _0x124545[_0x15386c(0x2b7)][_0x15386c(0x2ab)](_0x15386c(0x24a),_0x2955eb,[_0x15386c(0x2fe)],'case_insensitive_username',!![]);const _0x4837d8=await _0x124545[_0x15386c(0x1fc)](_0x5332ee[_0x15386c(0x276)],{'username':'bugs'},{'caseInsensitive':!![],'explain':!![]});_0x5332ee['XsTyk'](expect,_0x2da24a[_0x15386c(0x1e9)][_0x15386c(0x2b4)][_0x15386c(0x2b6)])[_0x15386c(0x28f)](_0x15386c(0x252)),_0x5332ee[_0x15386c(0x25a)](expect,_0x4837d8[_0x15386c(0x1e9)][_0x15386c(0x2b4)]['stage'])[_0x15386c(0x28f)]('FETCH');}),it(_0x11ea47(0x1f7),async()=>{const _0x2cda1a=_0x11ea47,_0x40e613=Config[_0x2cda1a(0x2c4)](Parse[_0x2cda1a(0x268)])[_0x2cda1a(0x211)],_0x1c3a73=new Parse[(_0x2cda1a(0x205))](_0x5332ee[_0x2cda1a(0x2f4)]);_0x1c3a73[_0x2cda1a(0x2ba)](_0x5332ee[_0x2cda1a(0x277)],0x1),await _0x1c3a73[_0x2cda1a(0x22e)]();const _0x245381=await new Parse['Schema'](_0x2cda1a(0x2d3))[_0x2cda1a(0x2c4)]();await _0x40e613[_0x2cda1a(0x2b7)][_0x2cda1a(0x265)](_0x5332ee[_0x2cda1a(0x2f4)],_0x245381,[_0x2cda1a(0x2e1)]);const _0x48d51b=await new Parse[(_0x2cda1a(0x271))](_0x5332ee[_0x2cda1a(0x2f4)])[_0x2cda1a(0x2c4)]();_0x5332ee[_0x2cda1a(0x2f0)](expect,_0x245381[_0x2cda1a(0x1e3)][_0x2cda1a(0x2e1)])[_0x2cda1a(0x2fc)](),_0x5332ee[_0x2cda1a(0x23e)](expect,_0x48d51b['fields'][_0x2cda1a(0x2e1)])[_0x2cda1a(0x256)]();}),_0x5332ee[_0x11ea47(0x21f)](it,_0x5332ee[_0x11ea47(0x2e5)],async()=>{const _0x4798de=_0x11ea47;if(_0x5332ee['EzSMd'](_0x5332ee[_0x4798de(0x217)],_0x4798de(0x297))){const _0x215552=Config[_0x4798de(0x2c4)](Parse[_0x4798de(0x268)])['database'],_0x91d87f=new Parse[(_0x4798de(0x205))](_0x5332ee['hlfQj']);_0x91d87f['set'](_0x5332ee[_0x4798de(0x277)],0x1),await _0x91d87f[_0x4798de(0x22e)]();const _0x1ccef0=await new Parse[(_0x4798de(0x271))](_0x4798de(0x2d3))[_0x4798de(0x2c4)]();await _0x215552[_0x4798de(0x2b7)]['ensureIndex'](_0x4798de(0x2d3),_0x1ccef0,[_0x4798de(0x2e1)]),await _0x215552[_0x4798de(0x2b7)][_0x4798de(0x265)](_0x5332ee['hlfQj'],_0x1ccef0,[_0x4798de(0x2e1)]);const _0x557b4b=await new Parse[(_0x4798de(0x271))](_0x5332ee[_0x4798de(0x2f4)])[_0x4798de(0x2c4)]();expect(_0x1ccef0[_0x4798de(0x1e3)][_0x4798de(0x2e1)])[_0x4798de(0x2fc)](),_0x5332ee[_0x4798de(0x218)](expect,_0x557b4b['fields'][_0x4798de(0x2e1)])['toBeUndefined']();}else _0xfe32ce[_0x4798de(0x219)](_0x4798de(0x1f4)+_0x2aeb14);}),process['env'][_0x11ea47(0x1e6)]==='replicaset'&&(describe(_0x5332ee['AUyGu'],()=>{const _0x3cea1f=_0x11ea47,_0x19ec14={'auDgi':function(_0x565ee4,_0x19ec27){return _0x565ee4(_0x19ec27);},'BCIgz':_0x3cea1f(0x26c),'WPPiF':function(_0x79c0ab,_0x4af471){return _0x79c0ab(_0x4af471);},'PMCmT':'TRANSACTION_COMMITTED','FgbTk':function(_0x4039a5,_0x4aec67,_0x40dcba){return _0x5332ee['fHLMd'](_0x4039a5,_0x4aec67,_0x40dcba);},'MQKzX':function(_0x1a3b77,_0x39f483){const _0x5f0ad6=_0x3cea1f;return _0x5332ee[_0x5f0ad6(0x24d)](_0x1a3b77,_0x39f483);},'eVfch':_0x5332ee['ciXYG'],'fWAex':function(_0x56640e,_0x5deb94){const _0x5a372b=_0x3cea1f;return _0x5332ee[_0x5a372b(0x1d8)](_0x56640e,_0x5deb94);},'FNeBs':_0x3cea1f(0x2a4),'OMrBo':function(_0x3f6c22,_0x438aa4){return _0x3f6c22+_0x438aa4;},'hwdDb':function(_0x473770,_0x3a9186){const _0x1cec52=_0x3cea1f;return _0x5332ee[_0x1cec52(0x202)](_0x473770,_0x3a9186);},'AaJEX':function(_0x356430,_0x4390a0,_0x53c8ee){const _0x1b4b8a=_0x3cea1f;return _0x5332ee[_0x1b4b8a(0x1dc)](_0x356430,_0x4390a0,_0x53c8ee);},'ZnOMP':_0x5332ee[_0x3cea1f(0x2f4)],'CXAtO':function(_0x387cac,_0x4b3b07,_0x4ccc8b){return _0x387cac(_0x4b3b07,_0x4ccc8b);},'jpMcK':function(_0x393e8a,_0x3a47df){return _0x5332ee['TErsm'](_0x393e8a,_0x3a47df);}},_0x403f53={'Content-Type':_0x5332ee['SZbHo'],'X-Parse-Application-Id':_0x3cea1f(0x2e1),'X-Parse-REST-API-Key':_0x3cea1f(0x248)};_0x5332ee['Qotgm'](beforeEach,async()=>{const _0x42f350=_0x3cea1f;await _0x19ec14[_0x42f350(0x23f)](reconfigureServer,{'databaseAdapter':undefined,'databaseURI':_0x19ec14['BCIgz']}),await TestUtils[_0x42f350(0x22c)](!![]);}),it('should\x20use\x20transaction\x20in\x20a\x20batch\x20with\x20transaction\x20=\x20true',async()=>{const _0x4a2bac=_0x3cea1f,_0x6d43fe=new Parse[(_0x4a2bac(0x205))](_0x4a2bac(0x2d3));await _0x6d43fe[_0x4a2bac(0x22e)](),_0x19ec14['FgbTk'](spyOn,Collection[_0x4a2bac(0x2dd)],_0x4a2bac(0x2c6))[_0x4a2bac(0x1ed)][_0x4a2bac(0x26b)](),await request({'method':_0x4a2bac(0x20b),'headers':_0x403f53,'url':'http://localhost:8378/1/batch','body':JSON['stringify']({'requests':[{'method':_0x4a2bac(0x2a4),'path':_0x19ec14['MQKzX']('/1/classes/MyObject/',_0x6d43fe['id']),'body':{'myAttribute':_0x19ec14['eVfch']}}],'transaction':!![]})});let _0x42733a=![];Collection[_0x4a2bac(0x2dd)][_0x4a2bac(0x2c6)][_0x4a2bac(0x2ca)][_0x4a2bac(0x285)]()['forEach'](_0x30656b=>{const _0x3d0f06=_0x4a2bac;_0x42733a=!![],_0x19ec14[_0x3d0f06(0x227)](expect,_0x30656b['args'][0x2][_0x3d0f06(0x2f6)][_0x3d0f06(0x2f7)][_0x3d0f06(0x235)])[_0x3d0f06(0x28f)](_0x19ec14['PMCmT']);}),expect(_0x42733a)[_0x4a2bac(0x28f)](!![]);}),_0x5332ee[_0x3cea1f(0x2fb)](it,_0x5332ee[_0x3cea1f(0x22a)],async()=>{const _0x4d334f=_0x3cea1f,_0x398026=new Parse[(_0x4d334f(0x205))](_0x5332ee['hlfQj']);await _0x398026[_0x4d334f(0x22e)](),_0x5332ee['fHLMd'](spyOn,Collection[_0x4d334f(0x2dd)],_0x5332ee[_0x4d334f(0x22d)])[_0x4d334f(0x1ed)][_0x4d334f(0x26b)](),await _0x5332ee[_0x4d334f(0x242)](request,{'method':_0x5332ee[_0x4d334f(0x284)],'headers':_0x403f53,'url':_0x4d334f(0x294),'body':JSON[_0x4d334f(0x292)]({'requests':[{'method':_0x5332ee[_0x4d334f(0x2ae)],'path':_0x5332ee[_0x4d334f(0x23c)]+_0x398026['id'],'body':{'myAttribute':_0x5332ee[_0x4d334f(0x2d5)]}}],'transaction':![]})});let _0x3987fe=![];Collection[_0x4d334f(0x2dd)][_0x4d334f(0x2c6)][_0x4d334f(0x2ca)]['all']()['forEach'](_0x28198c=>{const _0x7b9dd5=_0x4d334f;_0x3987fe=!![],expect(_0x28198c['args'][0x2][_0x7b9dd5(0x2f6)])[_0x7b9dd5(0x26e)]();}),expect(_0x3987fe)['toBe'](!![]);}),_0x5332ee[_0x3cea1f(0x1dc)](it,_0x5332ee[_0x3cea1f(0x2d2)],async()=>{const _0x3f876f=_0x3cea1f,_0x212c14=new Parse[(_0x3f876f(0x205))](_0x3f876f(0x2d3));await _0x212c14[_0x3f876f(0x22e)](),spyOn(Collection[_0x3f876f(0x2dd)],_0x3f876f(0x2c6))[_0x3f876f(0x1ed)][_0x3f876f(0x26b)](),await request({'method':_0x3f876f(0x20b),'headers':_0x403f53,'url':_0x3f876f(0x294),'body':JSON[_0x3f876f(0x292)]({'requests':[{'method':_0x5332ee[_0x3f876f(0x2ae)],'path':_0x5332ee['MgLCB']+_0x212c14['id'],'body':{'myAttribute':_0x5332ee['ciXYG']}}]})});let _0x3844ee=![];Collection[_0x3f876f(0x2dd)][_0x3f876f(0x2c6)][_0x3f876f(0x2ca)][_0x3f876f(0x285)]()['forEach'](_0x2a1457=>{const _0x566128=_0x3f876f;_0x3844ee=!![],_0x19ec14['auDgi'](expect,_0x2a1457['args'][0x2][_0x566128(0x2f6)])['toBeFalsy']();}),_0x5332ee[_0x3f876f(0x27c)](expect,_0x3844ee)['toBe'](!![]);}),it(_0x5332ee[_0x3cea1f(0x24c)],async()=>{const _0x3ca75a=_0x3cea1f,_0x256558=new Parse[(_0x3ca75a(0x205))](_0x3ca75a(0x2d3));await _0x256558[_0x3ca75a(0x22e)](),_0x19ec14[_0x3ca75a(0x1fa)](spyOn,Collection[_0x3ca75a(0x2dd)],'findOneAndUpdate')[_0x3ca75a(0x1ed)]['callThrough'](),await request({'method':_0x19ec14[_0x3ca75a(0x2c2)],'headers':_0x403f53,'url':_0x19ec14[_0x3ca75a(0x28c)](_0x3ca75a(0x2ef),_0x256558['id']),'body':{'myAttribute':_0x19ec14[_0x3ca75a(0x1df)]}});let _0x456797=![];Collection[_0x3ca75a(0x2dd)][_0x3ca75a(0x2c6)]['calls'][_0x3ca75a(0x285)]()[_0x3ca75a(0x2e9)](_0x5a1627=>{const _0x3113da=_0x3ca75a;_0x456797=!![],_0x19ec14[_0x3113da(0x288)](expect,_0x5a1627[_0x3113da(0x2b3)][0x2]['session'])[_0x3113da(0x26e)]();}),_0x19ec14['hwdDb'](expect,_0x456797)[_0x3ca75a(0x28f)](!![]);}),it(_0x5332ee[_0x3cea1f(0x21d)],async()=>{const _0x3ed337=_0x3cea1f,_0x5b3b3c={'oGXyx':function(_0x2f726c,_0x4a0a26){const _0x5c4485=_0x554e;return _0x19ec14[_0x5c4485(0x23f)](_0x2f726c,_0x4a0a26);}};_0x19ec14[_0x3ed337(0x258)](spyOn,Collection['prototype'],_0x3ed337(0x2ed))['and'][_0x3ed337(0x26b)]();const _0x3245e3=new Parse[(_0x3ed337(0x205))](_0x19ec14['ZnOMP']);await _0x3245e3[_0x3ed337(0x22e)]();const _0x5d32b5=Collection[_0x3ed337(0x2dd)][_0x3ed337(0x2ed)]['calls'][_0x3ed337(0x285)]();expect(_0x5d32b5['length'])[_0x3ed337(0x2c5)](0x0),_0x5d32b5[_0x3ed337(0x2e9)](_0x5df9a4=>{const _0x5708b6=_0x3ed337;_0x5b3b3c[_0x5708b6(0x2d4)](expect,_0x5df9a4[_0x5708b6(0x2b3)][0x1][_0x5708b6(0x2f6)])[_0x5708b6(0x26e)]();});}),_0x5332ee['aGYPT'](it,_0x5332ee[_0x3cea1f(0x249)],async()=>{const _0x4da60b=_0x3cea1f,_0xe7e3f2={'uDjCD':function(_0x48d0ee,_0xa1bde5){return _0x48d0ee(_0xa1bde5);}};_0x5332ee['fHLMd'](spyOn,Collection[_0x4da60b(0x2dd)],_0x5332ee['aMFfz'])['and'][_0x4da60b(0x26b)]();const _0x3fec3f=new Parse[(_0x4da60b(0x205))](_0x5332ee['hlfQj']);await _0x3fec3f[_0x4da60b(0x22e)](),_0x3fec3f[_0x4da60b(0x2ba)](_0x4da60b(0x26d),_0x4da60b(0x2f3)),await _0x3fec3f[_0x4da60b(0x22e)]();const _0xd4c62e=Collection['prototype'][_0x4da60b(0x2c6)][_0x4da60b(0x2ca)]['all']();_0x5332ee[_0x4da60b(0x209)](expect,_0xd4c62e['length'])[_0x4da60b(0x2c5)](0x0),_0xd4c62e[_0x4da60b(0x2e9)](_0x78f61b=>{const _0x58bfd0=_0x4da60b;_0xe7e3f2[_0x58bfd0(0x25d)](expect,_0x78f61b['args'][0x2][_0x58bfd0(0x2f6)])[_0x58bfd0(0x26e)]();});}),_0x5332ee[_0x3cea1f(0x1db)](it,_0x3cea1f(0x22f),async()=>{const _0x3de7b7=_0x3cea1f;_0x19ec14[_0x3de7b7(0x214)](spyOn,Collection['prototype'],'deleteMany')[_0x3de7b7(0x1ed)][_0x3de7b7(0x26b)]();const _0x3cd0de=new Parse[(_0x3de7b7(0x205))](_0x3de7b7(0x2d3));await _0x3cd0de[_0x3de7b7(0x22e)](),await _0x3cd0de[_0x3de7b7(0x29f)]();const _0x212033=Collection['prototype']['deleteMany']['calls'][_0x3de7b7(0x285)]();_0x19ec14[_0x3de7b7(0x2dc)](expect,_0x212033['length'])[_0x3de7b7(0x2c5)](0x0),_0x212033[_0x3de7b7(0x2e9)](_0x530943=>{const _0x5d9397=_0x3de7b7;expect(_0x530943[_0x5d9397(0x2b3)][0x1][_0x5d9397(0x2f6)])['toBeFalsy']();});});}),_0x5332ee['fPBnr'](describe,_0x11ea47(0x269),()=>{const _0x20415e=_0x11ea47,_0x3c55d7={'fzfDF':function(_0x4013bf,_0xe5d5e3){return _0x4013bf(_0xe5d5e3);},'MXGlg':_0x5332ee[_0x20415e(0x2e7)],'FOBBE':_0x20415e(0x296),'gJapX':function(_0xf2ef83,_0x173805){return _0xf2ef83!==_0x173805;},'RAwek':function(_0x21c29c,_0x23f83f,_0x1a8ddd){const _0x3b1de7=_0x20415e;return _0x5332ee[_0x3b1de7(0x20c)](_0x21c29c,_0x23f83f,_0x1a8ddd);},'DzERd':_0x5332ee['ljiDs']};_0x5332ee[_0x20415e(0x2fb)](it,_0x20415e(0x2b5),async _0x148869=>{const _0x13f788=_0x20415e,_0x4c31e3={'TkYrM':function(_0x474af4,_0x2bd397){const _0x1efa79=_0x554e;return _0x3c55d7[_0x1efa79(0x1f5)](_0x474af4,_0x2bd397);},'ujoju':_0x3c55d7['MXGlg'],'kRDhd':_0x3c55d7[_0x13f788(0x223)],'qrIKf':function(_0x2e44e2){return _0x2e44e2();}};if(_0x3c55d7[_0x13f788(0x301)](_0x13f788(0x2fd),_0x13f788(0x2fd)))_0x32eabd(_0x182d29[_0x13f788(0x2b3)][0x1][_0x13f788(0x2f6)])[_0x13f788(0x26e)]();else{const _0x488d30=new MongoStorageAdapter({'uri':databaseURI,'collectionPrefix':'','mongoOptions':{'enableSchemaHooks':!![]}});await reconfigureServer({'databaseAdapter':_0x488d30}),expect(_0x488d30[_0x13f788(0x2eb)])[_0x13f788(0x28f)](!![]),_0x3c55d7['RAwek'](spyOn,_0x488d30,_0x13f788(0x2a5));const _0x355781={'fields':{'array':{'type':_0x13f788(0x1da)},'object':{'type':_0x3c55d7[_0x13f788(0x2de)]},'date':{'type':_0x13f788(0x243)}}};await _0x488d30[_0x13f788(0x29b)]('Stuff',_0x355781);const _0x41bc9b=await _0x488d30['getClass'](_0x13f788(0x1de));expect(_0x41bc9b)[_0x13f788(0x2fc)](),setTimeout(()=>{const _0x15730b=_0x13f788;'XtDwC'===_0x4c31e3[_0x15730b(0x212)]?(_0x4c31e3[_0x15730b(0x23a)](expect,_0x488d30['_onchange'])['toHaveBeenCalled'](),_0x4c31e3[_0x15730b(0x2cf)](_0x148869)):(_0x47b2b4=!![],_0x4c31e3[_0x15730b(0x23a)](_0x394767,_0x3ce5ae[_0x15730b(0x2b3)][0x2][_0x15730b(0x2f6)]['transaction']['state'])[_0x15730b(0x28f)](_0x4c31e3['ujoju']));},0x1388);}});}));});