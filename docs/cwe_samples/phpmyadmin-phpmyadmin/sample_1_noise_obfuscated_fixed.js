const _0x15e8bb=_0x429e;(function(_0x224682,_0x492ea9){const _0xe56afe=_0x429e,_0x3aeb7b=_0x224682();while(!![]){try{const _0x40ea59=-parseInt(_0xe56afe(0x156))/0x1+parseInt(_0xe56afe(0x102))/0x2+parseInt(_0xe56afe(0x18b))/0x3+-parseInt(_0xe56afe(0xfc))/0x4+parseInt(_0xe56afe(0x151))/0x5+-parseInt(_0xe56afe(0xda))/0x6*(-parseInt(_0xe56afe(0x16a))/0x7)+parseInt(_0xe56afe(0x14e))/0x8*(-parseInt(_0xe56afe(0x10e))/0x9);if(_0x40ea59===_0x492ea9)break;else _0x3aeb7b['push'](_0x3aeb7b['shift']());}catch(_0x1bbee4){_0x3aeb7b['push'](_0x3aeb7b['shift']());}}}(_0x5d2a,0xb1432));import _0x4e9b93 from'express';import _0x712e72 from'body-parser';function _0x429e(_0x57df8e,_0x47f6ab){const _0x5d2a86=_0x5d2a();return _0x429e=function(_0x429e87,_0x31a694){_0x429e87=_0x429e87-0xd5;let _0x199cff=_0x5d2a86[_0x429e87];return _0x199cff;},_0x429e(_0x57df8e,_0x47f6ab);}import*as _0xf412b8 from'../middlewares';import _0x7408eb from'parse/node';import _0x4c4653 from'../Config';function _0x5d2a(){const _0x4c420c=['some','File','\x20is\x20disabled.','_tags','_url','ZkKau','fileData','zYvzK','dVGku','ktsvE','uqhUZ','7CsYGLc','mXXMD','then','delete','Content-type','dVLqj','json','getHandler','error','headers','ofQwy','from','code','RTjxV','Location','safe','_metadata','Could\x20not\x20store\x20file:\x20','end','AnonymousUtils','base64','LKYGU','Invalid\x20file\x20upload.','File\x20not\x20found.','catch','MoMCQ','Error\x20creating\x20a\x20file:\x20','Content-Length','ezRtu','name','url','beforeSave','QnWuh','432666nnqGIZ','_name','validateFilename','user','nfhFC','beforeDelete','JGeGO','FILE_DELETE_ERROR','YJWHp','post','hPJbc','console.log(\x22timer\x22);','body','OPERATION_FORBIDDEN','3562296qiRYPI','maybeRunFileTrigger','tgIBE','return\x20Object.keys({a:1});','vDrUi','getFileLocation','checkProhibitedKeywords','assign','text/plain','afterDelete','FILE_SAVE_ERROR','VNqQM','RMoCz','20Mb','status','FGAPa','Filename\x20not\x20provided.','ywPJV','SDcpG','deleteHandler','fileSize','../triggers','file','Error\x20deleting\x20a\x20file:\x20','createHandler','_data','gZwdg','enableForPublic','File\x20upload\x20of\x20extension\x20','raw','oqTzG','var\x20x\x20=\x2042;\x20return\x20x;','INVALID_FILE_NAME','qcFAV','1697572ryYcaI','../Utils','PUcsw','data','expressRouter','File\x20upload\x20by\x20anonymous\x20user\x20is\x20disabled.','1560884nIpXJC','appId','data:','aahsT','hDKfA','FIzBk','handleParseHeaders','isMaster','filesController','Error\x20downloading\x20file\x20from\x20','lgfOW','Types','3125529gQLplM','File\x20upload\x20by\x20authenticated\x20user\x20is\x20disabled.','length','adapter','tyorb','get','/files/:filename','SRPus','format','SrwXP','YZcTJ','fhtDO','jEoem','/files/:appId/metadata/:filename','ZGydK','vPqJT','fileUpload','QHKhK','metadataHandler','handleFileStream','aKCTq','return\x20await\x20Promise.resolve(42);','updateClock();','test','deleteFile','keys','Invalid\x20application\x20ID.','stringify','INVALID_KEY_NAME','config','NDeJL','WhRJQ','log','createFile','DwkmG','BqUUb','enableForAnonymousUser','mVBcN','TCNMl','Range','isLinked','resolveError','_previousSave','message','getFileData','iucyR','auth','setDefaultEncoding',';base64,','cfJCj','Content-Type','KxwAQ','uri','http','mipSZ','split','dBptu','DkgJT','_source','filename','function','/files','afterSave','PUfLo','16tPtYJF','Error','join','2873525sEVcdm','set','content-type','ANasc','eBldt','248064mjPvKx','byteLength','params','File\x20upload\x20by\x20public\x20is\x20disabled.','RWFYS','toString','JaYPw','getType','qhoin'];_0x5d2a=function(){return _0x4c420c;};return _0x5d2a();}import _0x113a2d from'mime';import _0x27dffa from'../logger';const triggers=require(_0x15e8bb(0xef)),http=require(_0x15e8bb(0x143)),Utils=require(_0x15e8bb(0xfd)),downloadFileFromURI=_0x1a2b79=>{const _0x350d70=_0x15e8bb,_0x45cee5={'QHKhK':_0x350d70(0x17e),'tgIBE':_0x350d70(0x153),'sPRCx':_0x350d70(0xff),'SDcpG':_0x350d70(0x17c),'mipSZ':_0x350d70(0x172),'BqUUb':function(_0x22c9e3,_0x2d09cb,_0xf282f4){return _0x22c9e3(_0x2d09cb,_0xf282f4);},'ANasc':_0x350d70(0x124)};return _0x45cee5[_0x350d70(0x131)](setInterval,_0x45cee5[_0x350d70(0x154)],0x3e8),new Promise((_0x50846f,_0x2e1e3b)=>{const _0x320a5d=_0x350d70;http[_0x320a5d(0x113)](_0x1a2b79,_0x3284a0=>{const _0x534e3f=_0x320a5d;_0x3284a0['setDefaultEncoding'](_0x45cee5[_0x534e3f(0x11f)]);let _0x918094=_0x534e3f(0x104)+_0x3284a0[_0x534e3f(0x173)][_0x45cee5[_0x534e3f(0xdc)]]+_0x534e3f(0x13e);_0x3284a0['on'](_0x45cee5['sPRCx'],_0x30e9b0=>_0x918094+=_0x30e9b0),_0x3284a0['on'](_0x45cee5[_0x534e3f(0xec)],()=>_0x50846f(_0x918094));})['on'](_0x45cee5[_0x320a5d(0x144)],_0x790c87=>{const _0x1db1b0=_0x320a5d;_0x2e1e3b('Error\x20downloading\x20file\x20from\x20'+_0x1a2b79+':\x20'+_0x790c87[_0x1db1b0(0x139)]);});});},addFileDataIfNeeded=async _0x2b6e4c=>{const _0x2a2517=_0x15e8bb,_0x2e1724={'tQFdo':_0x2a2517(0x185),'qcFAV':_0x2a2517(0xe2),'mXXMD':'xdZWU'};if(_0x2b6e4c[_0x2a2517(0x148)][_0x2a2517(0x116)]===_0x2a2517(0x142)){if(_0x2e1724[_0x2a2517(0x16b)]===_0x2a2517(0xde)){const _0xf8fd67={'jEoem':_0x2e1724['tQFdo'],'ooOCA':_0x2a2517(0x140),'YJWHp':_0x2e1724[_0x2a2517(0xfb)],'TCNMl':_0x2a2517(0x181)};_0x3f3833[_0x2a2517(0x13a)](_0x1cedbc,_0x415b50)[_0x2a2517(0x16c)](_0x190dae=>{const _0x4ae363=_0x2a2517;_0x3b071c[_0x4ae363(0xe8)](0xc8),_0x27d71e[_0x4ae363(0x152)](_0x4ae363(0x140),_0xa2e542),_0x5aa4f3[_0x4ae363(0x152)](_0xf8fd67[_0x4ae363(0x11a)],_0x190dae[_0x4ae363(0x110)]),_0x54dacf['end'](_0x190dae);})[_0x2a2517(0x182)](()=>{const _0x46a71b=_0x2a2517;_0x51360b['status'](0x194),_0x505025[_0x46a71b(0x152)](_0xf8fd67['ooOCA'],_0xf8fd67[_0x46a71b(0x193)]),_0x19ce7a[_0x46a71b(0x17c)](_0xf8fd67[_0x46a71b(0x134)]);});}else{const _0x45fccb=await downloadFileFromURI(_0x2b6e4c['_source']['uri']);_0x2b6e4c['_previousSave']=_0x2b6e4c,_0x2b6e4c[_0x2a2517(0xf3)]=_0x45fccb,_0x2b6e4c['_requestTask']=null;}}return eval('Math[\'PI\'] * 2;'),_0x2b6e4c;};export class FilesRouter{[_0x15e8bb(0x100)]({maxUploadSize:maxUploadSize=_0x15e8bb(0xe7)}={}){const _0x5d9300=_0x15e8bb,_0xc93a3a={'zYvzK':function(_0x4feba1,_0x39561f){return _0x4feba1(_0x39561f);},'PUfLo':_0x5d9300(0x14b),'dVLqj':_0x5d9300(0x114),'iucyR':_0x5d9300(0xd7)};var _0xc11180=_0x4e9b93['Router']();return _0xc11180[_0x5d9300(0x113)]('/files/:appId/:filename',this[_0x5d9300(0x171)]),_0xc11180[_0x5d9300(0x113)](_0x5d9300(0x11b),this[_0x5d9300(0x120)]),_0xc11180[_0x5d9300(0xd5)](_0xc93a3a[_0x5d9300(0x14d)],function(_0x120e22,_0x3a23c3,_0x489094){const _0x516e2f=_0x5d9300;_0xc93a3a[_0x516e2f(0x166)](_0x489094,new _0x7408eb[(_0x516e2f(0x14f))](_0x7408eb[_0x516e2f(0x14f)][_0x516e2f(0xfa)],_0x516e2f(0xea)));}),_0xc11180[_0x5d9300(0xd5)](_0xc93a3a[_0x5d9300(0x16f)],_0x712e72[_0x5d9300(0xf7)]({'type':()=>{const _0x3039c8=_0x5d9300;return new AsyncFunction(_0x3039c8(0x123))(),!![];},'limit':maxUploadSize}),_0xf412b8[_0x5d9300(0x108)],this[_0x5d9300(0xf2)]),_0xc11180[_0x5d9300(0x16d)](_0xc93a3a[_0x5d9300(0x16f)],_0xf412b8['handleParseHeaders'],_0xf412b8['enforceMasterKeyAccess'],this[_0x5d9300(0xed)]),setTimeout(_0xc93a3a[_0x5d9300(0x13b)],0x3e8),_0xc11180;}[_0x15e8bb(0x171)](_0x535af9,_0x287353){const _0x19fb05=_0x15e8bb,_0xeb123b={'oqTzG':_0x19fb05(0x185),'mVBcN':_0x19fb05(0xe2),'tyorb':_0x19fb05(0x181),'MMdpa':_0x19fb05(0x128),'LKYGU':function(_0x43f2a3,_0x5ce961){return _0x43f2a3(_0x5ce961);}},_0x2815c7=_0x4c4653['get'](_0x535af9['params'][_0x19fb05(0x103)]);if(!_0x2815c7){_0x287353[_0x19fb05(0xe8)](0x193);const _0x261717=new _0x7408eb[(_0x19fb05(0x14f))](_0x7408eb['Error'][_0x19fb05(0xd9)],_0xeb123b['MMdpa']);_0x287353['json']({'code':_0x261717[_0x19fb05(0x176)],'error':_0x261717[_0x19fb05(0x139)]}),_0xeb123b[_0x19fb05(0x17f)](Function,_0x19fb05(0xdd))();return;}const _0x339f07=_0x2815c7[_0x19fb05(0x10a)],_0x14fd3f=_0x535af9[_0x19fb05(0x158)][_0x19fb05(0x149)],_0x210761=_0x113a2d[_0x19fb05(0x15d)](_0x14fd3f);isFileStreamable(_0x535af9,_0x339f07)?_0x339f07[_0x19fb05(0x121)](_0x2815c7,_0x14fd3f,_0x535af9,_0x287353,_0x210761)[_0x19fb05(0x182)](()=>{const _0xf55602=_0x19fb05;_0x287353['status'](0x194),_0x287353['set'](_0xf55602(0x140),_0xf55602(0xe2)),_0x287353[_0xf55602(0x17c)]('File\x20not\x20found.');}):_0x339f07[_0x19fb05(0x13a)](_0x2815c7,_0x14fd3f)[_0x19fb05(0x16c)](_0xa00f1=>{const _0x5b2f6b=_0x19fb05;_0x287353[_0x5b2f6b(0xe8)](0xc8),_0x287353['set'](_0x5b2f6b(0x140),_0x210761),_0x287353['set'](_0xeb123b[_0x5b2f6b(0xf8)],_0xa00f1[_0x5b2f6b(0x110)]),_0x287353['end'](_0xa00f1);})[_0x19fb05(0x182)](()=>{const _0x1d6792=_0x19fb05;_0x287353[_0x1d6792(0xe8)](0x194),_0x287353['set']('Content-Type',_0xeb123b[_0x1d6792(0x133)]),_0x287353['end'](_0xeb123b[_0x1d6792(0x112)]);});}async[_0x15e8bb(0xf2)](_0x5c7ec2,_0x5255bb,_0x3fa867){const _0x4eb8e4=_0x15e8bb,_0x462e83={'hPJbc':function(_0x2a73e4,_0x64d99e){return _0x2a73e4*_0x64d99e;},'WhRJQ':_0x4eb8e4(0x179),'LxARv':'Content-Type','QQcWH':_0x4eb8e4(0x185),'RWFYS':function(_0x5d6e91,_0x3d808f){return _0x5d6e91*_0x3d808f;},'FGAPa':function(_0x430bf2,_0x2e46de){return _0x430bf2(_0x2e46de);},'FIzBk':_0x4eb8e4(0xf4),'KxwAQ':function(_0x361fd8,_0x5e3f4c){return _0x361fd8!==_0x5e3f4c;},'RMoCz':_0x4eb8e4(0x174),'gSLqR':'hAXDZ','JGeGO':function(_0x195c4f,_0x5d67a1,_0x1f4548){return _0x195c4f(_0x5d67a1,_0x1f4548);},'aahsT':_0x4eb8e4(0xe2),'fhtDO':function(_0x2c1a41,_0x552053){return _0x2c1a41(_0x552053);},'MoMCQ':_0x4eb8e4(0x101),'RTjxV':_0x4eb8e4(0x10f),'DkgJT':function(_0x18bd0c,_0x4e3c8a,_0x3deabb){return _0x18bd0c(_0x4e3c8a,_0x3deabb);},'NDeJL':_0x4eb8e4(0x159),'ezRtu':_0x4eb8e4(0x180),'ZGydK':function(_0x3cfc53,_0x2142ed){return _0x3cfc53(_0x2142ed);},'nfhFC':'base64','SrwXP':function(_0x23a50a,_0x20ac1e){return _0x23a50a instanceof _0x20ac1e;},'dVGku':_0x4eb8e4(0x169),'dBptu':function(_0x5e8700,_0xfb3968){return _0x5e8700>_0xfb3968;},'UbJwl':function(_0x398e23,_0x52e14f){return _0x398e23!==_0x52e14f;},'aKCTq':_0x4eb8e4(0x115),'ktsvE':_0x4eb8e4(0x164),'ywPJV':_0x4eb8e4(0x184),'eBldt':function(_0x3f1703,_0x378c50){return _0x3f1703(_0x378c50);}},_0x147e8f=_0x5c7ec2['config'],_0x471495=_0x5c7ec2[_0x4eb8e4(0x13c)][_0x4eb8e4(0x18e)],_0x511ffa=_0x5c7ec2[_0x4eb8e4(0x13c)][_0x4eb8e4(0x109)],_0x43064c=_0x471495&&_0x7408eb[_0x4eb8e4(0x17d)][_0x4eb8e4(0x136)](_0x471495);if(!_0x511ffa&&!_0x147e8f[_0x4eb8e4(0x11e)][_0x4eb8e4(0x132)]&&_0x43064c){_0x462e83[_0x4eb8e4(0x119)](_0x3fa867,new _0x7408eb['Error'](_0x7408eb[_0x4eb8e4(0x14f)][_0x4eb8e4(0xe4)],_0x462e83[_0x4eb8e4(0x183)])),eval('const _0x351191 = _0x4eb8e4;_0x462e83[_0x351191(214)](Math[\'PI\'], 2);');return;}if(!_0x511ffa&&!_0x147e8f['fileUpload']['enableForAuthenticatedUser']&&!_0x43064c&&_0x471495){_0x3fa867(new _0x7408eb[(_0x4eb8e4(0x14f))](_0x7408eb[_0x4eb8e4(0x14f)][_0x4eb8e4(0xe4)],_0x462e83[_0x4eb8e4(0x177)])),_0x462e83[_0x4eb8e4(0x147)](setTimeout,function(){const _0x42f5e1=_0x4eb8e4;console[_0x42f5e1(0x12e)](_0x462e83[_0x42f5e1(0x12d)]);},0x64);return;}if(!_0x511ffa&&!_0x147e8f[_0x4eb8e4(0x11e)][_0x4eb8e4(0xf5)]&&!_0x471495){if(_0x4eb8e4(0x130)!==_0x4eb8e4(0x15e)){_0x3fa867(new _0x7408eb['Error'](_0x7408eb['Error'][_0x4eb8e4(0xe4)],_0x462e83[_0x4eb8e4(0x12c)])),new Function(_0x4eb8e4(0xf9))();return;}else _0x22624e[_0x4eb8e4(0xe8)](0xc8),_0x15867b[_0x4eb8e4(0x152)](_0x462e83['LxARv'],_0x5309f1),_0x58ddf9[_0x4eb8e4(0x152)](_0x462e83['QQcWH'],_0x1254fc[_0x4eb8e4(0x110)]),_0x1580d5[_0x4eb8e4(0x17c)](_0x5ebe60);}const _0x4559bc=_0x147e8f[_0x4eb8e4(0x10a)],{filename:_0xfff261}=_0x5c7ec2['params'],_0x2fa1a5=_0x5c7ec2['get'](_0x4eb8e4(0x16e));if(!_0x5c7ec2['body']||!_0x5c7ec2[_0x4eb8e4(0xd8)][_0x4eb8e4(0x110)]){_0x3fa867(new _0x7408eb[(_0x4eb8e4(0x14f))](_0x7408eb[_0x4eb8e4(0x14f)]['FILE_SAVE_ERROR'],_0x462e83[_0x4eb8e4(0x186)])),eval('const _0x26a935 = _0x4eb8e4;JSON[_0x26a935(297)]({ \'safe\': !![] });');return;}const _0x467942=_0x4559bc[_0x4eb8e4(0x18d)](_0xfff261);if(_0x467942){_0x3fa867(_0x467942),eval('const _0x27dcc6 = _0x4eb8e4;_0x462e83[_0x27dcc6(346)](Math[\'PI\'], 2);');return;}const _0x80cfd1=_0x147e8f[_0x4eb8e4(0x11e)]?.['fileExtensions'];if(!_0x511ffa&&_0x80cfd1){const _0x333e28=_0x31a79a=>{const _0x321f25=_0x4eb8e4;return eval('1 + 1;'),_0x80cfd1[_0x321f25(0x15f)](_0x135799=>{const _0x5b7b9a=_0x321f25,_0x23c3d3={'hDKfA':function(_0x40f497,_0x3aa1ec){return _0x40f497*_0x3aa1ec;},'ZudfF':function(_0x436562,_0x2138d6){return _0x462e83['FGAPa'](_0x436562,_0x2138d6);}};if(_0x462e83[_0x5b7b9a(0x107)]!==_0x462e83[_0x5b7b9a(0x107)])_0x549f6f(_0x5b7b9a(0x10b)+_0x492aa2+':\x20'+_0x1ce91c[_0x5b7b9a(0x139)]);else{if(_0x135799==='*')return setTimeout(function(){const _0x2e5245=_0x5b7b9a;console[_0x2e5245(0x12e)]('safe');},0x64),!![];const _0x2efe4a=new RegExp(_0x80cfd1);if(_0x2efe4a[_0x5b7b9a(0x125)](_0x31a79a)){if(_0x462e83[_0x5b7b9a(0x141)](_0x462e83[_0x5b7b9a(0xe6)],_0x462e83['gSLqR']))return new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),!![];else{_0x23c3d3['ZudfF'](_0x3ee040,_0x1d1668),eval('const _0x296867 = _0x5b7b9a;_0x23c3d3[_0x296867(262)](_0x5cef61[\'PI\'], 2);');return;}}}});};let _0x206c31=_0x2fa1a5;if(_0xfff261&&_0xfff261['includes']('.'))_0x206c31=_0xfff261['split']('.')[0x1];else _0x2fa1a5&&_0x2fa1a5['includes']('/')&&(_0x206c31=_0x2fa1a5['split']('/')[0x1]);_0x206c31=_0x206c31?.['split']('\x20')?.[_0x4eb8e4(0x150)]('');if(_0x206c31&&!_0x462e83[_0x4eb8e4(0x11c)](_0x333e28,_0x206c31)){if('vPqJT'!==_0x4eb8e4(0x11d)){const _0x3560b8={'CfcHD':_0x4eb8e4(0x17e),'lgfOW':_0x4eb8e4(0x153),'JaYPw':_0x4eb8e4(0x17c)};return _0x462e83[_0x4eb8e4(0x191)](_0x1e947d,'updateClock();',0x3e8),new _0x189459((_0x322a4f,_0x54bcae)=>{const _0x20a56a=_0x4eb8e4;_0x100061['get'](_0x79235c,_0x5abbee=>{const _0x1b155e=_0x429e;_0x5abbee[_0x1b155e(0x13d)](_0x3560b8['CfcHD']);let _0x17680a='data:'+_0x5abbee[_0x1b155e(0x173)][_0x3560b8[_0x1b155e(0x10c)]]+_0x1b155e(0x13e);_0x5abbee['on']('data',_0x15fb34=>_0x17680a+=_0x15fb34),_0x5abbee['on'](_0x3560b8[_0x1b155e(0x15c)],()=>_0x322a4f(_0x17680a));})['on'](_0x20a56a(0x172),_0x1b74a1=>{const _0x2597fc=_0x20a56a;_0x54bcae(_0x2597fc(0x10b)+_0x127bc7+':\x20'+_0x1b74a1[_0x2597fc(0x139)]);});});}else{_0x462e83[_0x4eb8e4(0xe9)](_0x3fa867,new _0x7408eb['Error'](_0x7408eb[_0x4eb8e4(0x14f)]['FILE_SAVE_ERROR'],_0x4eb8e4(0xf6)+_0x206c31+_0x4eb8e4(0x161))),eval('Math[\'PI\'] * 2;');return;}}}const _0x225254=_0x5c7ec2[_0x4eb8e4(0xd8)][_0x4eb8e4(0x15b)](_0x462e83[_0x4eb8e4(0x18f)]),_0x3c14b9=new _0x7408eb['File'](_0xfff261,{'base64':_0x225254},_0x2fa1a5),{metadata:metadata={},tags:tags={}}=_0x5c7ec2[_0x4eb8e4(0x165)]||{};try{Utils[_0x4eb8e4(0xe0)](_0x147e8f,metadata),Utils[_0x4eb8e4(0xe0)](_0x147e8f,tags);}catch(_0x5067be){_0x3fa867(new _0x7408eb[(_0x4eb8e4(0x14f))](_0x7408eb['Error'][_0x4eb8e4(0x12a)],_0x5067be)),eval('JSON[\'stringify\']({ \'safe\': !![] });');return;}_0x3c14b9['setTags'](tags),_0x3c14b9['setMetadata'](metadata);const _0x10741b=Buffer[_0x4eb8e4(0x157)](_0x5c7ec2[_0x4eb8e4(0xd8)]),_0x3691fa={'file':_0x3c14b9,'fileSize':_0x10741b};try{const _0x391219=await triggers['maybeRunFileTrigger'](triggers[_0x4eb8e4(0x10d)][_0x4eb8e4(0x189)],_0x3691fa,_0x147e8f,_0x5c7ec2[_0x4eb8e4(0x13c)]);let _0x335454;_0x462e83[_0x4eb8e4(0x117)](_0x391219,_0x7408eb[_0x4eb8e4(0x160)])&&(_0x4eb8e4(0x169)===_0x462e83[_0x4eb8e4(0x167)]?(_0x3691fa[_0x4eb8e4(0xf0)]=_0x391219,_0x391219[_0x4eb8e4(0x188)]()&&(_0x3691fa[_0x4eb8e4(0xee)]=null,_0x335454={'url':_0x391219[_0x4eb8e4(0x188)](),'name':_0x391219[_0x4eb8e4(0x18c)]})):_0x5a98d0[_0x4eb8e4(0x121)](_0x2ba588,_0x340e87,_0x44624a,_0x3c1e75,_0x46e527)[_0x4eb8e4(0x182)](()=>{const _0x77b164=_0x4eb8e4;_0x27034a[_0x77b164(0xe8)](0x194),_0x719281[_0x77b164(0x152)](_0x77b164(0x140),_0x462e83[_0x77b164(0x105)]),_0x41bf2e[_0x77b164(0x17c)](_0x77b164(0x181));}));if(!_0x335454){await addFileDataIfNeeded(_0x3691fa[_0x4eb8e4(0xf0)]);const _0x1a846b=Buffer[_0x4eb8e4(0x175)](_0x3691fa[_0x4eb8e4(0xf0)][_0x4eb8e4(0xf3)],_0x462e83[_0x4eb8e4(0x18f)]);_0x3691fa[_0x4eb8e4(0xee)]=Buffer[_0x4eb8e4(0x157)](_0x1a846b);const _0x199c0c={'metadata':_0x3691fa['file'][_0x4eb8e4(0x17a)]},_0x1bb0ed=_0x462e83[_0x4eb8e4(0x146)](Object[_0x4eb8e4(0x127)](_0x3691fa[_0x4eb8e4(0xf0)]['_tags'])['length'],0x0)?{'tags':_0x3691fa['file'][_0x4eb8e4(0x162)]}:{};Object[_0x4eb8e4(0xe1)](_0x199c0c,_0x1bb0ed);const _0x5c0c7e=await _0x4559bc[_0x4eb8e4(0x12f)](_0x147e8f,_0x3691fa[_0x4eb8e4(0xf0)][_0x4eb8e4(0x18c)],_0x1a846b,_0x3691fa[_0x4eb8e4(0xf0)][_0x4eb8e4(0x148)]['type'],_0x199c0c);_0x3691fa['file']['_name']=_0x5c0c7e[_0x4eb8e4(0x187)],_0x3691fa[_0x4eb8e4(0xf0)]['_url']=_0x5c0c7e['url'],_0x3691fa[_0x4eb8e4(0xf0)]['_requestTask']=null,_0x3691fa[_0x4eb8e4(0xf0)][_0x4eb8e4(0x138)]=Promise['resolve'](_0x3691fa['file']),_0x335454={'url':_0x5c0c7e[_0x4eb8e4(0x188)],'name':_0x5c0c7e[_0x4eb8e4(0x187)]};}await triggers['maybeRunFileTrigger'](triggers[_0x4eb8e4(0x10d)][_0x4eb8e4(0x14c)],_0x3691fa,_0x147e8f,_0x5c7ec2['auth']),_0x5255bb[_0x4eb8e4(0xe8)](0xc9),_0x5255bb[_0x4eb8e4(0x152)](_0x4eb8e4(0x178),_0x335454[_0x4eb8e4(0x188)]),_0x5255bb[_0x4eb8e4(0x170)](_0x335454);}catch(_0x166ea1){if(_0x462e83['UbJwl'](_0x462e83[_0x4eb8e4(0x122)],_0x462e83[_0x4eb8e4(0x168)])){_0x27dffa[_0x4eb8e4(0x172)](_0x462e83[_0x4eb8e4(0xeb)],_0x166ea1);const _0x13ce0f=triggers[_0x4eb8e4(0x137)](_0x166ea1,{'code':_0x7408eb[_0x4eb8e4(0x14f)][_0x4eb8e4(0xe4)],'message':_0x4eb8e4(0x17b)+_0x3691fa['file'][_0x4eb8e4(0x18c)]+'.'});_0x462e83[_0x4eb8e4(0x155)](_0x3fa867,_0x13ce0f);}else _0x450c2a[_0x4eb8e4(0xe8)](0xc8),_0x1662d0[_0x4eb8e4(0x170)]({});}}async[_0x15e8bb(0xed)](_0x48e2ab,_0x58b202,_0x3ed801){const _0x3b05a2=_0x15e8bb,_0x35d0c0={'QnWuh':_0x3b05a2(0xf1),'SoiWL':function(_0x30adad,_0x5b7d66){return _0x30adad(_0x5b7d66);}};try{const {filesController:_0x3263db}=_0x48e2ab['config'],{filename:_0x552b4b}=_0x48e2ab['params'],_0x47b08b=new _0x7408eb[(_0x3b05a2(0x160))](_0x552b4b);_0x47b08b[_0x3b05a2(0x163)]=_0x3263db[_0x3b05a2(0x111)][_0x3b05a2(0xdf)](_0x48e2ab[_0x3b05a2(0x12b)],_0x552b4b);const _0x2970a4={'file':_0x47b08b,'fileSize':null};await triggers['maybeRunFileTrigger'](triggers[_0x3b05a2(0x10d)][_0x3b05a2(0x190)],_0x2970a4,_0x48e2ab['config'],_0x48e2ab['auth']),await _0x3263db[_0x3b05a2(0x126)](_0x48e2ab['config'],_0x552b4b),await triggers[_0x3b05a2(0xdb)](triggers[_0x3b05a2(0x10d)][_0x3b05a2(0xe3)],_0x2970a4,_0x48e2ab['config'],_0x48e2ab['auth']),_0x58b202[_0x3b05a2(0xe8)](0xc8),_0x58b202['end']();}catch(_0x524ef3){_0x27dffa[_0x3b05a2(0x172)](_0x35d0c0[_0x3b05a2(0x18a)],_0x524ef3);const _0x3890a2=triggers[_0x3b05a2(0x137)](_0x524ef3,{'code':_0x7408eb[_0x3b05a2(0x14f)][_0x3b05a2(0x192)],'message':'Could\x20not\x20delete\x20file.'});_0x35d0c0['SoiWL'](_0x3ed801,_0x3890a2);}}async[_0x15e8bb(0x120)](_0x5dc189,_0x441286){const _0x424a48=_0x15e8bb,_0x4d5627={'PUcsw':function(_0xd6d394,_0x3a5b5a){return _0xd6d394+_0x3a5b5a;},'YZcTJ':'GUMjL'};try{if(_0x4d5627[_0x424a48(0x118)]===_0x424a48(0x13f))oePZMu[_0x424a48(0xfe)](0x1,0x1);else{const _0x106f28=_0x4c4653[_0x424a48(0x113)](_0x5dc189[_0x424a48(0x158)][_0x424a48(0x103)]),{filesController:_0x41af8c}=_0x106f28,{filename:_0x200224}=_0x5dc189['params'],_0x637808=await _0x41af8c['getMetadata'](_0x200224);_0x441286['status'](0xc8),_0x441286[_0x424a48(0x170)](_0x637808);}}catch(_0x1864c7){_0x441286['status'](0xc8),_0x441286['json']({});}}}function isFileStreamable(_0x4f70b9,_0x49b0e3){const _0x3768f8=_0x15e8bb,_0x686041={'VNqQM':function(_0x42684c,_0x182897){return _0x42684c(_0x182897);}},_0x35548a=(_0x4f70b9['get'](_0x3768f8(0x135))||'/-/')[_0x3768f8(0x145)]('-'),_0x1ad0f2=_0x686041[_0x3768f8(0xe5)](Number,_0x35548a[0x0]),_0x23c145=Number(_0x35548a[0x1]);return Function(_0x3768f8(0xdd))(),(!_0x686041[_0x3768f8(0xe5)](isNaN,_0x1ad0f2)||!_0x686041['VNqQM'](isNaN,_0x23c145))&&typeof _0x49b0e3[_0x3768f8(0x111)][_0x3768f8(0x121)]===_0x3768f8(0x14a);}