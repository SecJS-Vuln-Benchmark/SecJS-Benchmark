const _0x125b8b=_0x13b4;function _0x4216(){const _0x5a913e=['6815778WldROd','EcgDb','gpCez','Ivdnx','kJQgN','syQfF','RSpjk','should\x20convert\x20dependency\x20array\x20to\x20record\x20format','gqwmk','4.17.21','DQsRv','quErG','toEqual','^11.4.2','readFileSync','23561bnOxSh','docker\x20daemon\x20not\x20running','TJQYP','TqbDc','NGNBC','64Uuiypn','should\x20return\x20false\x20when\x20no\x20docker\x20indicators\x20are\x20present','oguSu','should\x20return\x20true\x20when\x20docker\x20environment\x20variables\x20are\x20set','DOCKER_ENV','BtWDy','alfonsograziano/node-chartjs-canvas:latest','should\x20add\x20chartjs-node-canvas\x20for\x20chartjs\x20image','express','eIupz','Vutcn','Ufnpt','mock','GzGlh','existsSync','GRHPR','execSync','from','mockReturnValue','DOCKER_CONTAINER','kvCBV','340820QSMijN','uwpnZ','llqcL','ByvRz','13471880SGiAMa','96xSAGYH','WCLBZ','spyOn','IEdyY','wOWor','NexmS','cXFkt','docker\x20info','MLzRD','4.18.2','utf8','node:lts-slim','KArib','eNNxg','should\x20handle\x20file\x20system\x20errors\x20gracefully','ZeeeW','cGRPU','lodash','/.dockerenv','WphKw','12631266xoRSoq','AswCd','QiSGr','qnaca','vjCEh','env','llcjN','lfjki','MAuZF','tmKaQ','MkUuX','toHaveBeenCalledWith','node:child_process','/proc/1/cgroup','BLwEY','resetAllMocks','should\x20return\x20true\x20when\x20/.dockerenv\x20exists','toBe','should\x20not\x20add\x20chartjs-node-canvas\x20for\x20non-chartjs\x20images','ihESh','gEllR','3214608lARdzS','fOLBO','oYXgH','nKavd','isRunningInDocker','utils','ZyYnB','ggBcu','4003692skdoHg','SNoVh','bKXUF','WcERI','kkqJi','mockImplementation','ugiUs','12:memory:/kubepods/somecontainerid','aUOuA','12:memory:/docker/somecontainerid','IzrtQ','4.0.0','DnaEk','clearAllMocks'];_0x4216=function(){return _0x5a913e;};return _0x4216();}(function(_0x462664,_0x4fee08){const _0xfd8482=_0x13b4,_0x178b30=_0x462664();while(!![]){try{const _0x5c7c86=parseInt(_0xfd8482(0x122))/0x1*(-parseInt(_0xfd8482(0xd4))/0x2)+-parseInt(_0xfd8482(0xfd))/0x3+parseInt(_0xfd8482(0x127))/0x4*(parseInt(_0xfd8482(0x13c))/0x5)+parseInt(_0xfd8482(0x113))/0x6+parseInt(_0xfd8482(0x105))/0x7+parseInt(_0xfd8482(0xd3))/0x8+-parseInt(_0xfd8482(0xe8))/0x9;if(_0x5c7c86===_0x4fee08)break;else _0x178b30['push'](_0x178b30['shift']());}catch(_0x1b6201){_0x178b30['push'](_0x178b30['shift']());}}}(_0x4216,0xd602e));import{describe,it,expect,vi,beforeEach,afterEach}from'vitest';function _0x13b4(_0x476c4c,_0x26240c){const _0x4216d3=_0x4216();return _0x13b4=function(_0x13b4d4,_0x3c1814){_0x13b4d4=_0x13b4d4-0xd1;let _0x4e2974=_0x4216d3[_0x13b4d4];return _0x4e2974;},_0x13b4(_0x476c4c,_0x26240c);}import*as _0x17c201 from'fs';import{isRunningInDocker,isDockerRunning,preprocessDependencies}from'../src/utils.ts';import*as _0x244882 from'node:child_process';vi[_0x125b8b(0x133)]('fs'),vi[_0x125b8b(0x133)](_0x125b8b(0xf4)),describe(_0x125b8b(0x102),()=>{const _0x367609=_0x125b8b,_0x3969fe={'cGRPU':function(_0x462e34,_0x3af714){return _0x462e34===_0x3af714;},'ihESh':'/.dockerenv','oYXgH':'existsSync','MkUuX':_0x367609(0x10e),'kkqJi':function(_0x1ac07c,_0x25d204){return _0x1ac07c(_0x25d204);},'Vutcn':function(_0x36d056){return _0x36d056();},'DnaEk':_0x367609(0xf5),'aUOuA':function(_0x42a723){return _0x42a723();},'McYqv':function(_0x3711ad,_0x2316f7){return _0x3711ad===_0x2316f7;},'QiSGr':_0x367609(0x121),'fOLBO':function(_0x3de661,_0x5c7323){return _0x3de661(_0x5c7323);},'ByvRz':_0x367609(0xf8),'oguSu':function(_0x225d50,_0x341471,_0xd14753){return _0x225d50(_0x341471,_0xd14753);},'IEdyY':function(_0x688340,_0x15b7d3,_0x3b7450){return _0x688340(_0x15b7d3,_0x3b7450);},'WCLBZ':_0x367609(0x12a),'DQsRv':_0x367609(0x128),'tmKaQ':_0x367609(0xe5),'GRHPR':_0x367609(0x12f),'IzrtQ':_0x367609(0xdd),'Ufnpt':function(_0x10a31c,_0x2726d3){return _0x10a31c(_0x2726d3);},'ZyYnB':_0x367609(0x11c),'KArib':'alfonsograziano/node-chartjs-canvas:latest','gqwmk':function(_0x28247d,_0x429ae9,_0x24e429){return _0x28247d(_0x429ae9,_0x24e429);},'gEllR':_0x367609(0x11a),'llqcL':_0x367609(0xfa),'eeAvb':function(_0x1116a2,_0x1e3b96){return _0x1116a2(_0x1e3b96);},'Ivdnx':_0x367609(0x115),'ugiUs':'should\x20return\x20false\x20when\x20docker\x20info\x20command\x20fails','lfjki':function(_0x42ee06,_0x40a458){return _0x42ee06===_0x40a458;},'wOWor':function(_0x30c862,_0x1797d4){return _0x30c862(_0x1797d4);},'bKXUF':_0x367609(0x120),'syQfF':function(_0x2ba183,_0x1070cc,_0x1988bb){return _0x2ba183(_0x1070cc,_0x1988bb);},'qnaca':function(_0x561848,_0x290b82){return _0x561848(_0x290b82);},'llcjN':function(_0x4bfabe,_0x4daacb,_0x896891){return _0x4bfabe(_0x4daacb,_0x896891);},'cXFkt':_0x367609(0x101)};_0x3969fe[_0x367609(0xeb)](beforeEach,()=>{const _0x176140=_0x367609;if(_0x3969fe[_0x176140(0xe4)](_0x176140(0x114),_0x176140(0x114)))vi[_0x176140(0xf7)]();else return _0x3969fe[_0x176140(0xe4)](_0x2b5799,_0x3969fe[_0x176140(0xfb)]);}),afterEach(()=>{const _0x2c4ab8=_0x367609;vi[_0x2c4ab8(0x112)]();}),_0x3969fe[_0x367609(0xee)](describe,_0x3969fe[_0x367609(0xda)],()=>{const _0x4c007f=_0x367609,_0x56b7fb={'fGUAf':function(_0x17a0d5,_0x351171){return _0x3969fe['McYqv'](_0x17a0d5,_0x351171);},'vjCEh':function(_0x5f0a36,_0x1c8402){return _0x5f0a36(_0x1c8402);},'NexmS':function(_0x22a4fc,_0x14f251){return _0x22a4fc===_0x14f251;},'BLwEY':_0x3969fe[_0x4c007f(0x111)],'MLzRD':_0x3969fe[_0x4c007f(0xff)],'kvCBV':_0x3969fe[_0x4c007f(0xea)],'eNNxg':function(_0x406637,_0x132e96){const _0x8686c7=_0x4c007f;return _0x3969fe[_0x8686c7(0xfe)](_0x406637,_0x132e96);},'nKavd':function(_0x2f7c69,_0x17be45){return _0x3969fe['cGRPU'](_0x2f7c69,_0x17be45);}};it(_0x3969fe[_0x4c007f(0xd2)],()=>{const _0x5db5b6=_0x4c007f,_0x439fc8={'AswCd':function(_0x49c4a3,_0x5dd086){return _0x56b7fb['fGUAf'](_0x49c4a3,_0x5dd086);}};vi[_0x5db5b6(0xd6)](_0x17c201,_0x5db5b6(0x135))['mockImplementation'](_0x1d9dea=>{const _0x533b72=_0x5db5b6;return _0x439fc8[_0x533b72(0xe9)](_0x1d9dea,_0x533b72(0xe6));}),_0x56b7fb[_0x5db5b6(0xec)](expect,isRunningInDocker())['toBe'](!![]),expect(_0x17c201[_0x5db5b6(0x135)])['toHaveBeenCalledWith']('/.dockerenv');}),it('should\x20return\x20true\x20when\x20/proc/1/cgroup\x20exists\x20and\x20contains\x20docker',()=>{const _0xb675e9=_0x4c007f;vi[_0xb675e9(0xd6)](_0x17c201,_0x3969fe[_0xb675e9(0xff)])[_0xb675e9(0x10a)](_0x11111d=>{const _0x389fa7=_0xb675e9;return _0x56b7fb[_0x389fa7(0xd9)](_0x11111d,_0x56b7fb[_0x389fa7(0xf6)]);}),vi[_0xb675e9(0xd6)](_0x17c201,_0xb675e9(0x121))[_0xb675e9(0x139)](Buffer[_0xb675e9(0x138)](_0x3969fe[_0xb675e9(0xf2)])),_0x3969fe[_0xb675e9(0x109)](expect,_0x3969fe[_0xb675e9(0x131)](isRunningInDocker))['toBe'](!![]),_0x3969fe[_0xb675e9(0x109)](expect,_0x17c201[_0xb675e9(0x135)])['toHaveBeenCalledWith'](_0xb675e9(0xe6)),_0x3969fe[_0xb675e9(0x109)](expect,_0x17c201[_0xb675e9(0x135)])[_0xb675e9(0xf3)]('/proc/1/cgroup'),_0x3969fe[_0xb675e9(0x109)](expect,_0x17c201[_0xb675e9(0x121)])[_0xb675e9(0xf3)](_0x3969fe[_0xb675e9(0x111)],_0xb675e9(0xde));}),_0x3969fe['oguSu'](it,'should\x20return\x20true\x20when\x20/proc/1/cgroup\x20exists\x20and\x20contains\x20kubepods',()=>{const _0x1087a6=_0x4c007f;vi[_0x1087a6(0xd6)](_0x17c201,_0x56b7fb[_0x1087a6(0xdc)])[_0x1087a6(0x10a)](_0x33c1f6=>{const _0x512884=_0x1087a6;return _0x33c1f6===_0x512884(0xf5);}),vi['spyOn'](_0x17c201,_0x56b7fb[_0x1087a6(0x13b)])['mockReturnValue'](Buffer[_0x1087a6(0x138)](_0x1087a6(0x10c))),expect(isRunningInDocker())[_0x1087a6(0xf9)](!![]);}),_0x3969fe[_0x4c007f(0xd7)](it,_0x3969fe[_0x4c007f(0xd5)],()=>{const _0x133d10=_0x4c007f;vi[_0x133d10(0xd6)](_0x17c201,'existsSync')[_0x133d10(0x139)](![]);const _0x4ae206=process[_0x133d10(0xed)];process[_0x133d10(0xed)]={..._0x4ae206,'DOCKER_CONTAINER':'true'},_0x56b7fb[_0x133d10(0xe1)](expect,isRunningInDocker())[_0x133d10(0xf9)](!![]),process[_0x133d10(0xed)]=_0x4ae206;}),_0x3969fe[_0x4c007f(0xd7)](it,_0x4c007f(0xe2),()=>{const _0x133c20=_0x4c007f;vi['spyOn'](_0x17c201,_0x3969fe['oYXgH'])['mockImplementation'](_0x4f8dce=>{const _0x5e9507=_0x13b4;return _0x56b7fb[_0x5e9507(0x100)](_0x4f8dce,_0x5e9507(0xf5));}),vi[_0x133c20(0xd6)](_0x17c201,'readFileSync')[_0x133c20(0x10a)](()=>{throw new Error('Permission\x20denied');}),_0x3969fe[_0x133c20(0x109)](expect,_0x3969fe['aUOuA'](isRunningInDocker))['toBe'](![]);}),_0x3969fe[_0x4c007f(0x129)](it,_0x3969fe[_0x4c007f(0x11d)],()=>{const _0x2ac46c=_0x4c007f;vi[_0x2ac46c(0xd6)](_0x17c201,_0x3969fe['oYXgH'])[_0x2ac46c(0x139)](![]);const _0x5395d6=process[_0x2ac46c(0xed)];process['env']={..._0x5395d6},delete process[_0x2ac46c(0xed)][_0x2ac46c(0x13a)],delete process[_0x2ac46c(0xed)][_0x2ac46c(0x12b)],expect(isRunningInDocker())['toBe'](![]),process['env']=_0x5395d6;});}),describe('isDockerRunning',()=>{const _0x1094b8=_0x367609,_0xdb32ab={'quErG':'4.17.21'};if(_0x3969fe[_0x1094b8(0x116)]!==_0x1094b8(0x115)){const _0x5e29d4={'JdccW':_0x3969fe[_0x1094b8(0xf1)],'ZeeeW':_0x3969fe[_0x1094b8(0x136)],'WphKw':_0x3969fe[_0x1094b8(0x10f)],'RSpjk':function(_0x1cfd31,_0x281f7f){const _0x4e3ce3=_0x1094b8;return _0x3969fe[_0x4e3ce3(0x132)](_0x1cfd31,_0x281f7f);},'SNoVh':_0x3969fe[_0x1094b8(0x103)],'NGNBC':_0x3969fe[_0x1094b8(0xe0)],'TqbDc':'4.0.0','MAuZF':'^11.4.2'};_0x3969fe[_0x1094b8(0x11b)](_0x45922e,_0x3969fe[_0x1094b8(0xfc)],()=>{const _0x98034f=_0x1094b8,_0x58ce94=[{'name':_0x5e29d4['JdccW'],'version':'4.17.21'},{'name':_0x5e29d4[_0x98034f(0xe3)],'version':_0x5e29d4[_0x98034f(0xe7)]}],_0x3dd089=_0x5e29d4[_0x98034f(0x119)](_0x49e3c2,{'dependencies':_0x58ce94});_0x5c39e3(_0x3dd089)['toEqual']({'lodash':_0x5e29d4[_0x98034f(0x106)],'express':_0x98034f(0xdd)});}),_0x3969fe[_0x1094b8(0xd7)](_0xafb1e8,_0x1094b8(0x12e),()=>{const _0x5efe75=_0x1094b8,_0x49d982=[{'name':_0x5efe75(0xe5),'version':_0x5e29d4[_0x5efe75(0x106)]}],_0x300ecf=_0x5e29d4[_0x5efe75(0x119)](_0x1b3ffa,{'dependencies':_0x49d982,'image':_0x5e29d4[_0x5efe75(0x126)]});_0x36f331(_0x300ecf)['toEqual']({'lodash':_0x5e29d4[_0x5efe75(0x106)],'chartjs-node-canvas':_0x5e29d4[_0x5efe75(0x125)],'@mermaid-js/mermaid-cli':_0x5e29d4[_0x5efe75(0xf0)]});}),_0x436fcf(_0x3969fe[_0x1094b8(0xd1)],()=>{const _0x5dc62f=_0x1094b8,_0x3e3b05=[{'name':_0x5dc62f(0xe5),'version':_0xdb32ab[_0x5dc62f(0x11e)]}],_0x5cfce7=_0x44ffce({'dependencies':_0x3e3b05,'image':_0x5dc62f(0xdf)});_0x41569e(_0x5cfce7)['toEqual']({'lodash':_0xdb32ab[_0x5dc62f(0x11e)]});});}else _0x3969fe[_0x1094b8(0xd7)](it,'should\x20return\x20true\x20when\x20docker\x20info\x20command\x20succeeds',()=>{const _0x3f978b=_0x1094b8;vi[_0x3f978b(0xd6)](_0x244882,'execSync')[_0x3f978b(0x10a)](()=>Buffer[_0x3f978b(0x138)]('')),expect(_0x3969fe[_0x3f978b(0x10d)](isDockerRunning))[_0x3f978b(0xf9)](!![]),_0x3969fe['eeAvb'](expect,_0x244882[_0x3f978b(0x137)])[_0x3f978b(0xf3)](_0x3f978b(0xdb));}),it(_0x3969fe[_0x1094b8(0x10b)],()=>{const _0x20826f=_0x1094b8;vi['spyOn'](_0x244882,'execSync')['mockImplementation'](()=>{const _0x404faf=_0x13b4;throw new Error(_0x404faf(0x123));}),expect(_0x3969fe[_0x20826f(0x10d)](isDockerRunning))[_0x20826f(0xf9)](![]),expect(_0x244882[_0x20826f(0x137)])[_0x20826f(0xf3)](_0x20826f(0xdb));});}),describe('preprocessDependencies',()=>{const _0x6db93b=_0x367609,_0x5d6b27={'uwpnZ':_0x3969fe['tmKaQ'],'BtWDy':_0x6db93b(0x11c),'sELcB':'express','WcERI':_0x3969fe[_0x6db93b(0x10f)],'kJQgN':function(_0x3f1487,_0x2e12b8){const _0xd42224=_0x6db93b;return _0x3969fe[_0xd42224(0x132)](_0x3f1487,_0x2e12b8);},'GzGlh':function(_0x38dcff,_0x4ec52e){return _0x38dcff(_0x4ec52e);}};_0x3969fe[_0x6db93b(0x118)](it,_0x6db93b(0x11a),()=>{const _0x1b9085=_0x6db93b,_0x4c957c=[{'name':_0x5d6b27[_0x1b9085(0x13d)],'version':_0x5d6b27['BtWDy']},{'name':_0x5d6b27['sELcB'],'version':_0x5d6b27[_0x1b9085(0x108)]}],_0x2489da=_0x5d6b27['kJQgN'](preprocessDependencies,{'dependencies':_0x4c957c});_0x5d6b27[_0x1b9085(0x134)](expect,_0x2489da)[_0x1b9085(0x11f)]({'lodash':_0x5d6b27[_0x1b9085(0x12c)],'express':_0x5d6b27['WcERI']});}),_0x3969fe['syQfF'](it,_0x6db93b(0x12e),()=>{const _0x14a54d=_0x6db93b,_0x4d32df={'eIupz':function(_0x283724,_0x469f5a){const _0x155f6e=_0x13b4;return _0x3969fe[_0x155f6e(0xef)](_0x283724,_0x469f5a);},'ggBcu':_0x14a54d(0xf5)};if(_0x14a54d(0x124)===_0x14a54d(0x124)){const _0x514adf=[{'name':_0x3969fe['tmKaQ'],'version':_0x3969fe['ZyYnB']}],_0x289d9b=_0x3969fe[_0x14a54d(0xd8)](preprocessDependencies,{'dependencies':_0x514adf,'image':_0x14a54d(0x12d)});expect(_0x289d9b)[_0x14a54d(0x11f)]({'lodash':_0x3969fe[_0x14a54d(0x103)],'chartjs-node-canvas':_0x14a54d(0x110),'@mermaid-js/mermaid-cli':_0x3969fe[_0x14a54d(0x107)]});}else return _0x4d32df[_0x14a54d(0x130)](_0xbdf9ce,_0x4d32df[_0x14a54d(0x104)]);}),it('should\x20not\x20add\x20chartjs-node-canvas\x20for\x20non-chartjs\x20images',()=>{const _0x399880=_0x6db93b,_0x1c0066=[{'name':_0x399880(0xe5),'version':_0x5d6b27[_0x399880(0x12c)]}],_0xc8cf85=_0x5d6b27[_0x399880(0x117)](preprocessDependencies,{'dependencies':_0x1c0066,'image':_0x399880(0xdf)});_0x5d6b27[_0x399880(0x134)](expect,_0xc8cf85)[_0x399880(0x11f)]({'lodash':_0x5d6b27[_0x399880(0x12c)]});});});});