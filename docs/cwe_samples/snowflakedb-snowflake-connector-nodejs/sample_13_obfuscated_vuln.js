'use strict';const _0x213902=_0xa3e7;function _0xa3e7(_0x42ec69,_0x4784f5){const _0x1ae966=_0x1ae9();return _0xa3e7=function(_0xa3e744,_0x45d62a){_0xa3e744=_0xa3e744-0x1e9;let _0x17af9f=_0x1ae966[_0xa3e744];return _0x17af9f;},_0xa3e7(_0x42ec69,_0x4784f5);}(function(_0x30f486,_0xc8a2d3){const _0x2dc3a7=_0xa3e7,_0xd8400=_0x30f486();while(!![]){try{const _0x8d17dc=-parseInt(_0x2dc3a7(0x227))/0x1*(-parseInt(_0x2dc3a7(0x22b))/0x2)+parseInt(_0x2dc3a7(0x1ee))/0x3*(parseInt(_0x2dc3a7(0x23e))/0x4)+-parseInt(_0x2dc3a7(0x1fc))/0x5+-parseInt(_0x2dc3a7(0x222))/0x6+parseInt(_0x2dc3a7(0x23a))/0x7*(parseInt(_0x2dc3a7(0x231))/0x8)+parseInt(_0x2dc3a7(0x226))/0x9+-parseInt(_0x2dc3a7(0x24e))/0xa;if(_0x8d17dc===_0xc8a2d3)break;else _0xd8400['push'](_0xd8400['shift']());}catch(_0x1bcfbf){_0xd8400['push'](_0xd8400['shift']());}}}(_0x1ae9,0x32480));const {Pool}=require('sequelize-pool'),_=require('lodash'),semver=require(_0x213902(0x200)),Promise=require(_0x213902(0x25a)),errors=require(_0x213902(0x1ec)),{logger}=require(_0x213902(0x1e9)),debug=logger['debugContext'](_0x213902(0x237));class ConnectionManager{constructor(_0x12c049,_0x1d317c){const _0x4636b2=_0x213902,_0xfccd85=_['cloneDeep'](_0x1d317c[_0x4636b2(0x221)]);this[_0x4636b2(0x250)]=_0x1d317c,this['config']=_0xfccd85,this[_0x4636b2(0x229)]=_0x12c049,this['versionPromise']=null,this[_0x4636b2(0x1f5)]=this[_0x4636b2(0x250)][_0x4636b2(0x207)][_0x4636b2(0x229)];if(_0xfccd85[_0x4636b2(0x237)]===![])throw new Error(_0x4636b2(0x247));_0xfccd85[_0x4636b2(0x237)]=_['defaults'](_0xfccd85[_0x4636b2(0x237)]||{},{'max':0x5,'min':0x0,'idle':0x2710,'acquire':0xea60,'evict':0x3e8,'validate':this['_validate'][_0x4636b2(0x246)](this)}),this['initPools']();}['refreshTypeParser'](_0x55614e){_['each'](_0x55614e,_0x99826d=>{const _0x41107b=_0xa3e7;if(_0x99826d[_0x41107b(0x253)](_0x41107b(0x220))){if(_0x99826d[_0x41107b(0x1fe)][this[_0x41107b(0x1f5)]])this[_0x41107b(0x1f1)](_0x99826d);else throw new Error('Parse\x20function\x20not\x20supported\x20for\x20type\x20'+_0x99826d['key']+_0x41107b(0x20d)+this[_0x41107b(0x1f5)]);}});}['_loadDialectModule'](_0x47323c){const _0x1cd8d3=_0x213902,_0x23c216={'PauQr':function(_0x556e06,_0x43eb6d){return _0x556e06(_0x43eb6d);},'LIANg':function(_0x1d2ecc,_0x4e6493){return _0x1d2ecc===_0x4e6493;}};try{if(this[_0x1cd8d3(0x250)][_0x1cd8d3(0x221)][_0x1cd8d3(0x1eb)])return _0x23c216['PauQr'](require,this[_0x1cd8d3(0x250)]['config'][_0x1cd8d3(0x1eb)]);if(this[_0x1cd8d3(0x250)][_0x1cd8d3(0x221)][_0x1cd8d3(0x234)])return this[_0x1cd8d3(0x250)][_0x1cd8d3(0x221)][_0x1cd8d3(0x234)];return require(_0x47323c);}catch(_0x2f6d38){if(_0x23c216[_0x1cd8d3(0x23f)](_0x2f6d38[_0x1cd8d3(0x22d)],_0x1cd8d3(0x20a))){if(this[_0x1cd8d3(0x250)][_0x1cd8d3(0x221)][_0x1cd8d3(0x1eb)])throw new Error(_0x1cd8d3(0x233)+this[_0x1cd8d3(0x250)][_0x1cd8d3(0x221)][_0x1cd8d3(0x1eb)]);throw new Error('Please\x20install\x20'+_0x47323c+_0x1cd8d3(0x228));}throw _0x2f6d38;}}['_onProcessExit'](){const _0x40ef7d=_0x213902,_0x5522e6={'ITuml':'beforeConnect','uhuzV':_0x40ef7d(0x236),'aYMmf':function(_0x5d4bf5,_0x391623){return _0x5d4bf5(_0x391623);},'vMaNi':function(_0xf0eff8,_0x1edbdb){return _0xf0eff8!==_0x1edbdb;},'xqUlG':_0x40ef7d(0x24f)};if(!this[_0x40ef7d(0x237)])return _0x5522e6[_0x40ef7d(0x251)]('ETNvG',_0x5522e6[_0x40ef7d(0x206)])?this[_0x40ef7d(0x250)][_0x40ef7d(0x239)](_0x5522e6['ITuml'],_0x2ffe97)[_0x40ef7d(0x21e)](()=>this[_0x40ef7d(0x229)][_0x40ef7d(0x25b)][_0x40ef7d(0x209)](_0x170025))[_0x40ef7d(0x21e)](_0x289fcb=>this[_0x40ef7d(0x250)][_0x40ef7d(0x239)](_0x40ef7d(0x219),_0x289fcb,_0x19d4f4)['return'](_0x289fcb)):Promise['resolve']();return this[_0x40ef7d(0x237)][_0x40ef7d(0x213)]()['then'](()=>{const _0x493d1b=_0x40ef7d;if(_0x5522e6['uhuzV']==='JNMsu')_0x3b4b3d(_0x493d1b(0x257));else return _0x5522e6[_0x493d1b(0x1f2)](debug,_0x493d1b(0x23c)),this[_0x493d1b(0x237)][_0x493d1b(0x252)]();});}['close'](){const _0x52e7f1=_0x213902,_0x57642e={'RhgSv':_0x52e7f1(0x21b)};return this['getConnection']=function _0x21597e(){return Promise['reject'](new Error(_0x57642e['RhgSv']));},this[_0x52e7f1(0x245)]();}['initPools'](){const _0x1b0bda=_0x213902,_0x236c81={'RaKyw':function(_0x356e79,_0x3d918e){return _0x356e79===_0x3d918e;},'ckeyS':_0x1b0bda(0x210),'IMQpR':_0x1b0bda(0x24d),'IxInx':_0x1b0bda(0x21a),'eDrKN':_0x1b0bda(0x1f0),'Pegdm':'write','LhbBQ':_0x1b0bda(0x255),'TlPob':_0x1b0bda(0x1ed),'VWBCa':function(_0x4ca920,_0x4990bf){return _0x4ca920(_0x4990bf);}},_0x37e250=this['config'];if(!_0x37e250['replication']){this[_0x1b0bda(0x237)]=new Pool({'name':'sequelize','create':()=>this[_0x1b0bda(0x1ff)](_0x37e250),'destroy':_0x1e07c6=>{const _0x2480a4=_0x1b0bda;return this['_disconnect'](_0x1e07c6)[_0x2480a4(0x23b)](()=>{const _0x48f3c4=_0x2480a4;debug(_0x48f3c4(0x1f0));});},'validate':_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x249)],'max':_0x37e250['pool'][_0x1b0bda(0x1fd)],'min':_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x208)],'acquireTimeoutMillis':_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x21c)],'idleTimeoutMillis':_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x259)],'reapIntervalMillis':_0x37e250[_0x1b0bda(0x237)]['evict']}),debug(_0x1b0bda(0x235)+_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x1fd)]+'/'+_0x37e250[_0x1b0bda(0x237)]['min']+_0x1b0bda(0x203));return;}!Array[_0x1b0bda(0x230)](_0x37e250[_0x1b0bda(0x255)]['read'])&&(_0x37e250[_0x1b0bda(0x255)][_0x1b0bda(0x210)]=[_0x37e250[_0x1b0bda(0x255)][_0x1b0bda(0x210)]]);_0x37e250[_0x1b0bda(0x255)][_0x1b0bda(0x232)]=_['defaults'](_0x37e250[_0x1b0bda(0x255)]['write'],_[_0x1b0bda(0x258)](_0x37e250,_0x236c81[_0x1b0bda(0x201)])),_0x37e250[_0x1b0bda(0x255)][_0x1b0bda(0x210)]=_0x37e250[_0x1b0bda(0x255)][_0x1b0bda(0x210)][_0x1b0bda(0x248)](_0x31904f=>_['defaults'](_0x31904f,_['omit'](this[_0x1b0bda(0x221)],_0x1b0bda(0x255))));let _0x29d117=0x0;this[_0x1b0bda(0x237)]={'release':_0x4c03dd=>{const _0x5ecbb6=_0x1b0bda;if(_0x236c81['RaKyw']('pZhGd',_0x5ecbb6(0x22a)))return _0x115b3f[_0x5ecbb6(0x242)](this['pool'][_0x5ecbb6(0x210)][_0x5ecbb6(0x252)](),this[_0x5ecbb6(0x237)][_0x5ecbb6(0x232)][_0x5ecbb6(0x252)]())[_0x5ecbb6(0x23b)](()=>{const _0x2ebe2b=_0x5ecbb6;_0x543776(_0x2ebe2b(0x257));});else _0x236c81[_0x5ecbb6(0x241)](_0x4c03dd[_0x5ecbb6(0x20b)],_0x236c81[_0x5ecbb6(0x214)])?this['pool'][_0x5ecbb6(0x210)]['release'](_0x4c03dd):this['pool'][_0x5ecbb6(0x232)][_0x5ecbb6(0x217)](_0x4c03dd);},'acquire':(_0x1922e1,_0x48800d)=>{const _0x323f91=_0x1b0bda;if(_0x236c81['IMQpR']===_0x323f91(0x24d)){_0x48800d=_0x48800d===undefined?![]:_0x48800d;if(_0x1922e1===_0x236c81[_0x323f91(0x22f)]&&!_0x48800d)return this[_0x323f91(0x237)][_0x323f91(0x210)][_0x323f91(0x21c)]();return this[_0x323f91(0x237)][_0x323f91(0x232)][_0x323f91(0x21c)]();}else return!![];},'destroy':_0x2ed9c4=>{const _0x22e8ae=_0x1b0bda;this['pool'][_0x2ed9c4[_0x22e8ae(0x20b)]]['destroy'](_0x2ed9c4),debug(_0x236c81[_0x22e8ae(0x205)]);},'destroyAllNow':()=>{const _0x369759=_0x1b0bda,_0x332ada={'yvlbt':function(_0x428d15,_0x3b38a4){return _0x428d15(_0x3b38a4);}};return Promise[_0x369759(0x242)](this['pool'][_0x369759(0x210)]['destroyAllNow'](),this[_0x369759(0x237)][_0x369759(0x232)][_0x369759(0x252)]())[_0x369759(0x23b)](()=>{const _0x34249c=_0x369759;_0x332ada[_0x34249c(0x244)](debug,_0x34249c(0x257));});},'drain':()=>{const _0xa5b148=_0x1b0bda;return Promise[_0xa5b148(0x242)](this[_0xa5b148(0x237)][_0xa5b148(0x232)][_0xa5b148(0x213)](),this[_0xa5b148(0x237)][_0xa5b148(0x210)]['drain']());},'read':new Pool({'name':_0x236c81['TlPob'],'create':()=>{const _0x40fb0f=_0x1b0bda,_0x1f9450={'gAmcS':_0x236c81[_0x40fb0f(0x214)]},_0x23a123=_0x29d117++%_0x37e250[_0x40fb0f(0x255)][_0x40fb0f(0x210)][_0x40fb0f(0x238)];return this[_0x40fb0f(0x1ff)](_0x37e250['replication'][_0x40fb0f(0x210)][_0x23a123])[_0x40fb0f(0x23b)](_0x2908fa=>{const _0xe5d78a=_0x40fb0f;_0x2908fa[_0xe5d78a(0x20b)]=_0x1f9450[_0xe5d78a(0x224)];});},'destroy':_0x53d086=>this[_0x1b0bda(0x23d)](_0x53d086),'validate':_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x249)],'max':_0x37e250['pool'][_0x1b0bda(0x1fd)],'min':_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x208)],'acquireTimeoutMillis':_0x37e250['pool'][_0x1b0bda(0x21c)],'idleTimeoutMillis':_0x37e250['pool'][_0x1b0bda(0x259)],'reapIntervalMillis':_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x20e)]}),'write':new Pool({'name':'sequelize:write','create':()=>{const _0x50d6fd=_0x1b0bda,_0x1fe98d={'LoXYi':_0x236c81[_0x50d6fd(0x1f4)]};return this[_0x50d6fd(0x1ff)](_0x37e250[_0x50d6fd(0x255)]['write'])[_0x50d6fd(0x23b)](_0x29b9bb=>{const _0x2b94c1=_0x50d6fd;_0x29b9bb['queryType']=_0x1fe98d[_0x2b94c1(0x212)];});},'destroy':_0x481d8c=>this[_0x1b0bda(0x23d)](_0x481d8c),'validate':_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x249)],'max':_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x1fd)],'min':_0x37e250[_0x1b0bda(0x237)]['min'],'acquireTimeoutMillis':_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x21c)],'idleTimeoutMillis':_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x259)],'reapIntervalMillis':_0x37e250['pool']['evict']})},_0x236c81['VWBCa'](debug,_0x1b0bda(0x235)+_0x37e250['pool'][_0x1b0bda(0x1fd)]+'/'+_0x37e250[_0x1b0bda(0x237)][_0x1b0bda(0x208)]+_0x1b0bda(0x1ef));}['getConnection'](_0x1c6750){const _0x57e24f=_0x213902,_0x408808={'roQRC':_0x57e24f(0x210),'rzRjX':_0x57e24f(0x20f),'dHnsI':function(_0x30a67d,_0xda9bfb){return _0x30a67d(_0xda9bfb);},'bvsep':function(_0x141b41,_0x5d9cb3){return _0x141b41||_0x5d9cb3;},'kYsBh':_0x57e24f(0x22e),'pcuIA':function(_0x4b83a2,_0x4c426c){return _0x4b83a2===_0x4c426c;}};_0x1c6750=_0x408808[_0x57e24f(0x1f6)](_0x1c6750,{});let _0x3fec33;if(this[_0x57e24f(0x250)][_0x57e24f(0x207)][_0x57e24f(0x1ea)]===0x0){if(_0x57e24f(0x22e)===_0x408808['kYsBh']){if(this['versionPromise'])_0x3fec33=this[_0x57e24f(0x20c)];else{if(_0x408808[_0x57e24f(0x254)](_0x57e24f(0x243),_0x57e24f(0x22c))){if(this['sequelize'][_0x57e24f(0x221)][_0x57e24f(0x1eb)])throw new _0x362de6('Unable\x20to\x20find\x20dialect\x20at\x20'+this[_0x57e24f(0x250)]['config'][_0x57e24f(0x1eb)]);throw new _0x367ad0('Please\x20install\x20'+_0x3366ff+'\x20package\x20manually');}else _0x3fec33=this[_0x57e24f(0x20c)]=this[_0x57e24f(0x1ff)](this[_0x57e24f(0x221)][_0x57e24f(0x255)][_0x57e24f(0x232)]||this[_0x57e24f(0x221)])[_0x57e24f(0x21e)](_0x1588e6=>{const _0x54558c=_0x57e24f,_0x18d0f6={'QyTwW':_0x54558c(0x1f7)},_0x27d80c={};_0x27d80c['transaction']={'connection':_0x1588e6},_0x27d80c[_0x54558c(0x202)]=()=>{},_0x27d80c['logging'][_0x54558c(0x24c)]=!![];if(this['sequelize'][_0x54558c(0x207)][_0x54558c(0x1ea)]===0x0)return this[_0x54558c(0x250)]['databaseVersion'](_0x27d80c)[_0x54558c(0x21e)](_0x16b78e=>{const _0x19b1b6=_0x54558c,_0x3de0af=_[_0x19b1b6(0x218)](semver[_0x19b1b6(0x1f9)](_0x16b78e),_0x18d0f6[_0x19b1b6(0x223)])||_0x16b78e;return this['sequelize'][_0x19b1b6(0x207)][_0x19b1b6(0x1ea)]=semver[_0x19b1b6(0x24b)](_0x3de0af)?_0x3de0af:this[_0x19b1b6(0x1f8)],this[_0x19b1b6(0x20c)]=null,this[_0x19b1b6(0x23d)](_0x1588e6);});return this[_0x54558c(0x20c)]=null,this[_0x54558c(0x23d)](_0x1588e6);})[_0x57e24f(0x21f)](_0xb5bf22=>{this['versionPromise']=null;throw _0xb5bf22;});}}else _0xb0ecb1['queryType']=_0x408808[_0x57e24f(0x211)];}else _0x3fec33=Promise[_0x57e24f(0x1f3)]();return _0x3fec33['then'](()=>{const _0x141b78=_0x57e24f,_0x392d02={'zHCHp':function(_0x2359b7,_0x2d930b){const _0x1150f1=_0xa3e7;return _0x408808[_0x1150f1(0x21d)](_0x2359b7,_0x2d930b);}};return this[_0x141b78(0x237)][_0x141b78(0x21c)](_0x1c6750[_0x141b78(0x216)],_0x1c6750['useMaster'])['catch'](Promise['TimeoutError'],_0x5cf9dd=>{const _0x3f538c=_0x141b78;if(_0x408808[_0x3f538c(0x204)]==='Hujze')throw new errors[(_0x3f538c(0x24a))](_0x5cf9dd);else return this['_connect'](_0x267ff5['replication'][_0x3f538c(0x232)])[_0x3f538c(0x23b)](_0x4a7b91=>{const _0x1a7df4=_0x3f538c;_0x4a7b91['queryType']=_0x1a7df4(0x232);});})[_0x141b78(0x23b)](()=>{_0x392d02['zHCHp'](debug,'connection\x20acquired');});});}['releaseConnection'](_0x3c8126){return Promise['try'](()=>{const _0x1af356=_0xa3e7;this['pool'][_0x1af356(0x217)](_0x3c8126),debug(_0x1af356(0x225));});}['_connect'](_0x1801c0){const _0x2570fd=_0x213902;return this[_0x2570fd(0x250)]['runHooks'](_0x2570fd(0x215),_0x1801c0)[_0x2570fd(0x21e)](()=>this[_0x2570fd(0x229)][_0x2570fd(0x25b)]['connect'](_0x1801c0))['then'](_0x2d8528=>this[_0x2570fd(0x250)][_0x2570fd(0x239)](_0x2570fd(0x219),_0x2d8528,_0x1801c0)[_0x2570fd(0x256)](_0x2d8528));}[_0x213902(0x23d)](_0x12d700){const _0x3c58e3=_0x213902;return this['dialect'][_0x3c58e3(0x25b)]['disconnect'](_0x12d700);}['_validate'](_0xb61a53){const _0x35db26=_0x213902;if(!this[_0x35db26(0x229)]['connectionManager']['validate'])return!![];return this['dialect'][_0x35db26(0x25b)][_0x35db26(0x249)](_0xb61a53);}}function _0x1ae9(){const _0x5aed54=['tap','connection\x20drain\x20due\x20to\x20process\x20exit','_disconnect','175196Oqskxp','LIANg','exports','RaKyw','join','VAGDE','yvlbt','_onProcessExit','bind','Support\x20for\x20pool:false\x20was\x20removed\x20in\x20v4.0','map','validate','ConnectionAcquireTimeoutError','valid','__testLoggingFn','FNOyL','6064450zyIMkY','ETNvG','sequelize','vMaNi','destroyAllNow','hasOwnProperty','pcuIA','replication','return','all\x20connections\x20destroyed','omit','idle','../../promise','connectionManager','../../utils/logger','databaseVersion','dialectModulePath','../../errors','sequelize:read','6LoWmga',',\x20with\x20replication','connection\x20destroy','_refreshTypeParser','aYMmf','resolve','Pegdm','dialectName','bvsep','version','defaultVersion','coerce','ConnectionManager','default','524250GcyRUT','max','types','_connect','semver','LhbBQ','logging',',\x20no\x20replication','rzRjX','eDrKN','xqUlG','options','min','connect','MODULE_NOT_FOUND','queryType','versionPromise','\x20in\x20dialect\x20','evict','Hujze','read','roQRC','LoXYi','drain','ckeyS','beforeConnect','type','release','get','afterConnect','SELECT','ConnectionManager.getConnection\x20was\x20called\x20after\x20the\x20connection\x20manager\x20was\x20closed!','acquire','dHnsI','then','catch','parse','config','724470SpjcPt','QyTwW','gAmcS','connection\x20released','2981223luXRVZ','1fSAeqT','\x20package\x20manually','dialect','rNOhz','783620aigukd','ckRBq','code','StSls','IxInx','isArray','606232vckSkW','write','Unable\x20to\x20find\x20dialect\x20at\x20','dialectModule','pool\x20created\x20with\x20max/min:\x20','cdNVw','pool','length','runHooks','21PXPRky'];_0x1ae9=function(){return _0x5aed54;};return _0x1ae9();}module['exports']=ConnectionManager,module['exports'][_0x213902(0x1fa)]=ConnectionManager,module[_0x213902(0x240)][_0x213902(0x1fb)]=ConnectionManager;