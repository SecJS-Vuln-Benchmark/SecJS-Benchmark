const _0x3e0191=_0x4539;(function(_0x102cc5,_0x2c7bfa){const _0x202544=_0x4539,_0x3cb957=_0x102cc5();while(!![]){try{const _0x57d733=parseInt(_0x202544(0x1d7))/0x1*(-parseInt(_0x202544(0x1d3))/0x2)+-parseInt(_0x202544(0x237))/0x3*(-parseInt(_0x202544(0x20f))/0x4)+-parseInt(_0x202544(0x1f7))/0x5+-parseInt(_0x202544(0x251))/0x6*(-parseInt(_0x202544(0x20c))/0x7)+-parseInt(_0x202544(0x1f3))/0x8+-parseInt(_0x202544(0x209))/0x9+parseInt(_0x202544(0x1e5))/0xa;if(_0x57d733===_0x2c7bfa)break;else _0x3cb957['push'](_0x3cb957['shift']());}catch(_0x5edb27){_0x3cb957['push'](_0x3cb957['shift']());}}}(_0x130f,0x6cd4b));import _0x2e583c from'src/core/service/login.service';import _0xca4a6 from'src/core/factory/http.factory';import _0x1929f3 from'axios-mock-adapter';import{CookieStorage}from'cookie-storage';function _0x4539(_0x273031,_0x2cf46d){const _0x130fd3=_0x130f();return _0x4539=function(_0x453975,_0x282a0b){_0x453975=_0x453975-0x1cc;let _0x54a8e7=_0x130fd3[_0x453975];return _0x54a8e7;},_0x4539(_0x273031,_0x2cf46d);}const getClientMock=()=>{const _0x10647a={'DDCFN':function(_0x2c2e49){return _0x2c2e49();}},_0x517d0d=_0x10647a['DDCFN'](_0xca4a6),_0x51e1a3=new _0x1929f3(_0x517d0d);return{'client':_0x517d0d,'clientMock':_0x51e1a3};},loginServiceFactory=()=>{const {client:_0x292771,clientMock:_0x87f606}=getClientMock(),_0x150a68={};return{'loginService':new _0x2e583c(_0x292771,_0x150a68),'clientMock':_0x87f606};};function _0x130f(){const _0x2cf506=['reply','toBeTruthy','should\x20refresh\x20the\x20actual\x20bearer\x20auth','eOzxO','should\x20call\x20the\x20login\x20listener\x20when\x20redirect\x20from\x20the\x20login','nTYqo','should\x20check\x20if\x20user\x20is\x20logged\x20in','grant_type','nXcrp','5172paSwDr','VovPD','NvtuG','addOnLoginListener','161YQMCck','toBeDefined','MIskJ','QvURu','should\x20be\x20logged\x20in\x20when\x20token\x20exists','should\x20set\x20the\x20bearer\x20authentication\x20with\x20the\x20right\x20expiry','sxZLV','should\x20not\x20call\x20the\x20login\x20listener\x20when\x20you\x20not\x20redirecting\x20from\x20the\x20login','pSBvc','rejects','iTylJ','sDdFd','rEfReSh_ToKeN','OYyds','7715960HYckOI','eFxUS','xYaRh','ZiRoq','should\x20clear\x20the\x20cookie\x20successfully\x20after\x20each\x20test','setBearerAuthentication','scMod','xibdO','toBeFalsy','history','TmLdN','bearerAuth=%7B%22access%22%3A%22eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImU5Njk3NjdmMWQ0M2FhMzBiOGRjNDU3NDU0YWNjZWU4YjM3MzRjYTMyZDVlZDcwYTU4Yjg3ZWZjMWRkYzI5MjFhYTE1NzBjOWI4Zjk0NjZkIn0.eyJhdWQiOiJhZG1pbmlzdHJhdGlvbiIsImp0aSI6ImU5Njk3NjdmMWQ0M2FhMzBiOGRjNDU3NDU0YWNjZWU4YjM3MzRjYTMyZDVlZDcwYTU4Yjg3ZWZjMWRkYzI5MjFhYTE1NzBjOWI4Zjk0NjZkIiwiaWF0IjoxNjA2Mjk0MTM2LCJuYmYiOjE2MDYyOTQxMzYsImV4cCI6MTYwNjI5NDczNiwic3ViIjoiZTAzOWY0YzMyZjllNGMxZjgyMDNlMzVmZjdmZDQ1NzUiLCJzY29wZXMiOlsid3JpdGUiLCJhZG1pbiJdfQ.KNMWZqRJXM-lamNSuNvCsyZkR0zYkvS72DxjbJDAKqQex-PNUsDBDll9E4B7W5dLmIurTbxbzB4c8ztfPVkdXcZg5EORIIU8JRTjpbtwKhnXohEODsNqFPYGjFfhJnwcpt8tXvJ1BFXQdGR0UcHqPe-qLqWP9U1CZRht3A-9EvQFfzyqV9RJTs83tZ5MQI1LowjKIx1C6yxQ4CaQ-d-YUkerDguCukCg_z_Qkf2ME5tfdiiVp_uKCqknXNrNzs5y6LX0xnrLXBOGrcC3ZNF7RxmWxM-MzLaDa6kcYxc-k-QP3I89qDitZVU7LYTvK4WW_eH4qfOyVEzqSJuwtsoShA%22%2C%22refresh%22%3A%22def502006b139951ad0e625d58b94953b05b68ab5cd05abbc68b375ba21abf3e155a162020fd3175f2b057dc095c7ee53ac6686df506baba3053521be09354faa0142aee26a1548edf3f11fb724b1f0c60d044bc66c1c1304f59501a2f1b60378a5200e9254fcbde8c25fc9f745f31aacdaebbc77b3611226d22ee68128f28182a419ab2b04bfba9f240c4d743263dd8e798afccc7c0c2d2cc1c2df6ac6c097d17d9f991a408b5b6534a4a71fad3f7348139fa5b95b483fd2d3e206047fda7c60e099723dab5ff5197113faccd23a3aba8d8c948fd7e4d8da59dc74f9c160fd1de812900f51b5d06bd61dae754b87dc18efec9acdc82447042189871e69db6cbaaed1d82aef3cc8958c553cd5c75c98f0d174887c6a71a3f60aae584e2711198d3af88177f43bb630c6ee4e2453b11a6783953e1e6ef84ba2085f1414a4bf0638e65a047f1fb1b0b0dd59f4df68ef245d465c38dae2a7c887db636832b060c78e40b11667641653e5e4ec7a0eaacb1fdb1eef80e699d695183be585f4f3db16022e33f36ad300282487fcc17eee807085d079cdd2f129b30c5d5aea861d0%22%2C%22expiry%22%3A1606294737%7D','getToken','NGEOS','3215568yhdCUC','Bliek','jBHqG','aCcEsS_tOkEn','512090TSyORt','dlKMY','ahils','should\x20not\x20be\x20logged\x20in\x20when\x20token\x20does\x20not\x20exists','should\x20set\x20the\x20bearer\x20auth\x20also\x20in\x20non\x20document\x20environments','removeItem','should\x20return\x20the\x20storage\x20key','should\x20start\x20auto\x20refresh\x20the\x20token\x20after\x20token\x20refresh','tHfgc','fvKdJ','notifyOnLoginListener','shopware','VBImk','isLoggedIn','should\x20return\x20CookieStorage','rEfReSh_ToKeN_first','onPost','vJprp','474264xqmzRG','aCcEsS_tOkEn_TwO','srJGY','33719ylVmQs','toBe','should\x20reject\x20when\x20no\x20refresh\x20token\x20was\x20found','8412trAaji','not','core/service/login.service.js','qkiDT','UkCdR','addOnTokenChangedListener','FRXxq','password','should\x20call\x20the\x20listener','ezVZq','hEhkc','rEfReSh_ToKeN_tWo','TwoFS','JhNIt','lQzKN','ZikwP','/oauth/token','refreshToken','uKBVU','now','document','OQail','logout','useFakeTimers','should\x20start\x20auto\x20refresh\x20the\x20token\x20after\x20login','bearerAuth=%7B%22acce{{\x22ss%%3A1577882400%7D','toHaveBeenCalled','parse','OsUCq','cJPrK','should\x20login\x20and\x20return\x20the\x20bearer\x20token','toThrowError','RGbLc','function','refresh_token','Mnqtu','aLLic','FCmoH','xeXzm','hBGGK','3BrlOxv','addOnLogoutListener','JKkFr','toHaveProperty','loginByUsername','MokXg','setItem','defineProperty','ukQYH','admin','jWzkp','post','getBearerAuthentication','XaRYx','getStorage','aWpxF','Bearer','data','runAllTimers','Zqelz','toEqual','JPesD','FWPZP','CDkem','cookie','Date','804DjcQlh','vMFJd','mockImplementation','localStorage','xCZnz','elEuj','spyOn','bbAMI'];_0x130f=function(){return _0x2cf506;};return _0x130f();}let cookieStorageMock='';describe(_0x3e0191(0x211),()=>{const _0xb87482=_0x3e0191,_0x10b97a={'srJGY':_0xb87482(0x24f),'FWPZP':_0xb87482(0x250),'bbAMI':'redirectFromLogin','eFxUS':function(_0x27caae,_0x1dc904){return _0x27caae(_0x1dc904);},'CDkem':'refreshToken','dlKMY':function(_0x234e19,_0x33f36f){return _0x234e19(_0x33f36f);},'uKBVU':_0xb87482(0x1f1),'tHfgc':_0xb87482(0x1ea),'scMod':function(_0x27c538,_0x3219d5){return _0x27c538(_0x3219d5);},'Bliek':'logout','xeXzm':function(_0xf3fc5a,_0x47ea29){return _0xf3fc5a(_0x47ea29);},'iTylJ':'addOnLogoutListener','ZikwP':_0xb87482(0x1d6),'ukQYH':function(_0x820ea5,_0x52962f){return _0x820ea5(_0x52962f);},'YijQy':'notifyOnLoginListener','XaRYx':function(_0x4f26f5){return _0x4f26f5();},'vMFJd':_0xb87482(0x1e3),'hEhkc':_0xb87482(0x21f),'JhNIt':_0xb87482(0x247),'jmcOJ':function(_0x461e4){return _0x461e4();},'aWpxF':function(_0x222940,_0x56db0e){return _0x222940(_0x56db0e);},'QvURu':_0xb87482(0x240),'nTYqo':_0xb87482(0x20a),'nXcrp':function(_0xe15704,_0x52317b){return _0xe15704(_0x52317b);},'elEuj':_0xb87482(0x1f6),'xCZnz':_0xb87482(0x202),'JPesD':_0xb87482(0x21a),'VBImk':function(_0x2f7412){return _0x2f7412();},'NGEOS':function(_0x24a877,_0x689130){return _0x24a877(_0x689130);},'Mnqtu':function(_0x165d1d,_0x1acc0b){return _0x165d1d!==_0x1acc0b;},'jWzkp':_0xb87482(0x212),'FRXxq':function(_0x5c7769,_0x45602e){return _0x5c7769(_0x45602e);},'JKkFr':_0xb87482(0x228),'WBOkE':function(_0x1e63b2,_0x154b2b){return _0x1e63b2(_0x154b2b);},'hGIrc':function(_0x5baef5){return _0x5baef5();},'ZDQNS':function(_0x3b0b50){return _0x3b0b50();},'FCmoH':function(_0x4ca56d,_0x301fba){return _0x4ca56d(_0x301fba);},'aLLic':function(_0xb4a0e1){return _0xb4a0e1();},'jBHqG':function(_0x24b7ee,_0x43343e){return _0x24b7ee(_0x43343e);},'sDdFd':function(_0xccc612){return _0xccc612();},'xibdO':function(_0x2d3d64,_0x45019f){return _0x2d3d64!==_0x45019f;},'NvtuG':_0xb87482(0x23c),'ahils':function(_0x2f37fc){return _0x2f37fc();},'CGFeh':_0xb87482(0x206),'ZQoxt':_0xb87482(0x216),'UkCdR':function(_0x464c76,_0x29915f){return _0x464c76(_0x29915f);},'OQail':_0xb87482(0x1df),'kwTtN':_0xb87482(0x1e7),'uAGRX':_0xb87482(0x231),'Zqelz':_0xb87482(0x230),'cJPrK':function(_0x1db731,_0x1fe035){return _0x1db731(_0x1fe035);},'fvKdJ':function(_0x5caa07,_0x53f9b4,_0x3b7f3d){return _0x5caa07(_0x53f9b4,_0x3b7f3d);},'TwoFS':function(_0xe0a633,_0x2dc6c8,_0x4d8c2d){return _0xe0a633(_0x2dc6c8,_0x4d8c2d);},'ofmlH':function(_0x19ae15,_0x97aace,_0x385bfd){return _0x19ae15(_0x97aace,_0x385bfd);},'sxZLV':_0xb87482(0x1e9),'OYyds':'should\x20login\x20and\x20logout\x20successfully','OsUCq':_0xb87482(0x1d0),'GayVs':function(_0x4520e7,_0x3f88b4,_0x38c976){return _0x4520e7(_0x3f88b4,_0x38c976);},'ezVZq':'should\x20return\x20only\x20the\x20token','QoIoh':_0xb87482(0x1fb),'lQzKN':function(_0x2119e5,_0x154d5a,_0x592832){return _0x2119e5(_0x154d5a,_0x592832);},'MIskJ':function(_0x36b08e,_0x171c4a,_0x1bbd29){return _0x36b08e(_0x171c4a,_0x1bbd29);},'hBGGK':_0xb87482(0x20e),'RGbLc':_0xb87482(0x1db),'VovPD':_0xb87482(0x227),'eOzxO':function(_0x39c617,_0x14aa07,_0x5f3972){return _0x39c617(_0x14aa07,_0x5f3972);}};_0x10b97a[_0xb87482(0x23f)](beforeAll,()=>{const _0x5ae7e1=_0xb87482;Object[_0x5ae7e1(0x23e)](document,_0x10b97a[_0x5ae7e1(0x20b)],{'set':function(_0x5e2a54){cookieStorageMock=_0x5e2a54;},'get':function(){return cookieStorageMock;}});const _0xfe3e75=new Date(0x16f61158d40);jest[_0x5ae7e1(0x257)](global,_0x10b97a[_0x5ae7e1(0x24d)])[_0x5ae7e1(0x253)](()=>_0xfe3e75),Date['now']=jest['fn'](()=>0x5e0c7bb0);}),beforeEach(()=>{const _0x584054=_0xb87482;window[_0x584054(0x254)][_0x584054(0x1fc)](_0x10b97a['bbAMI']),document[_0x584054(0x24f)]='';}),_0x10b97a[_0xb87482(0x200)](it,'should\x20contain\x20all\x20public\x20functions',async()=>{const _0x15b465=_0xb87482,{loginService:_0x4d0329}=loginServiceFactory();expect(_0x4d0329)[_0x15b465(0x23a)]('loginByUsername'),_0x10b97a[_0x15b465(0x1e6)](expect,_0x4d0329)['toHaveProperty'](_0x10b97a[_0x15b465(0x24e)]),_0x10b97a[_0x15b465(0x1f8)](expect,_0x4d0329)['toHaveProperty'](_0x10b97a[_0x15b465(0x221)]),_0x10b97a[_0x15b465(0x1e6)](expect,_0x4d0329)[_0x15b465(0x23a)](_0x15b465(0x243)),expect(_0x4d0329)[_0x15b465(0x23a)](_0x10b97a[_0x15b465(0x1ff)]),_0x10b97a[_0x15b465(0x1eb)](expect,_0x4d0329)[_0x15b465(0x23a)](_0x10b97a[_0x15b465(0x1f4)]),expect(_0x4d0329)[_0x15b465(0x23a)](_0x15b465(0x204)),_0x10b97a['dlKMY'](expect,_0x4d0329)['toHaveProperty'](_0x15b465(0x214)),_0x10b97a[_0x15b465(0x235)](expect,_0x4d0329)[_0x15b465(0x23a)](_0x10b97a[_0x15b465(0x1e1)]),_0x10b97a[_0x15b465(0x235)](expect,_0x4d0329)[_0x15b465(0x23a)](_0x10b97a[_0x15b465(0x21e)]),_0x10b97a['ukQYH'](expect,_0x4d0329)[_0x15b465(0x23a)](_0x10b97a['YijQy']);}),_0x10b97a[_0xb87482(0x21b)](it,_0xb87482(0x1dc),async()=>{const _0x356a0e=_0xb87482,{loginService:_0x44c3a8}=_0x10b97a[_0x356a0e(0x244)](loginServiceFactory),_0x49e7d4=_0x44c3a8['setBearerAuthentication']({'expiry':0x12c,'access':_0x356a0e(0x1f6),'refresh':_0x10b97a[_0x356a0e(0x252)]});expect(_0x49e7d4)[_0x356a0e(0x24b)]({'expiry':0x5e0c91f4,'access':_0x356a0e(0x1f6),'refresh':_0x356a0e(0x1e3)});}),it(_0xb87482(0x22d),async()=>{const _0x4e4452=_0xb87482,{loginService:_0x15952d,clientMock:_0x50e7c4}=loginServiceFactory();_0x50e7c4[_0x4e4452(0x207)](_0x10b97a[_0x4e4452(0x219)])['reply'](0xc8,{'token_type':_0x10b97a[_0x4e4452(0x21c)],'expires_in':0x258,'access_token':_0x4e4452(0x1f6),'refresh_token':_0x4e4452(0x1e3)});const _0x591d8f=await _0x15952d[_0x4e4452(0x23b)]('admin',_0x4e4452(0x202));expect(_0x591d8f)[_0x4e4452(0x24b)]({'expiry':0x5e0c9320,'access':'aCcEsS_tOkEn','refresh':_0x10b97a[_0x4e4452(0x252)]});}),_0x10b97a['ofmlH'](it,_0x10b97a[_0xb87482(0x1dd)],async()=>{const _0xdd622a=_0xb87482;if(_0xdd622a(0x208)!=='vJprp'){const {loginService:_0x3e8a81}=_0x4c42ff();_0x1e68ae[_0xdd622a(0x254)]['setItem'](_0x10b97a['bbAMI'],!![]);const _0xb9d402=_0x50eccc['fn']();_0x3e8a81[_0xdd622a(0x1d6)](_0xb9d402),_0x50123e(_0xb9d402)[_0xdd622a(0x210)][_0xdd622a(0x229)](),_0x3e8a81[_0xdd622a(0x201)](),_0x10b97a[_0xdd622a(0x1e6)](_0x21684c,_0xb9d402)[_0xdd622a(0x229)]();}else{const {loginService:_0x4dc74f}=_0x10b97a['jmcOJ'](loginServiceFactory),_0x89164=_0x4dc74f['getBearerAuthentication']();_0x10b97a[_0xdd622a(0x246)](expect,_0x89164)[_0xdd622a(0x1ed)]();}}),_0x10b97a[_0xb87482(0x21b)](it,'should\x20get\x20a\x20new\x20token',async()=>{const _0x42e8d2=_0xb87482,{loginService:_0x2b48ed,clientMock:_0x240c31}=loginServiceFactory();_0x240c31['onPost'](_0x10b97a[_0x42e8d2(0x219)])[_0x42e8d2(0x259)](0xc8,{'token_type':_0x10b97a[_0x42e8d2(0x21c)],'expires_in':0x258,'access_token':'aCcEsS_tOkEn','refresh_token':_0x10b97a['vMFJd']}),await _0x2b48ed[_0x42e8d2(0x23b)](_0x10b97a['QvURu'],'shopware'),_0x240c31[_0x42e8d2(0x207)](_0x10b97a[_0x42e8d2(0x219)])[_0x42e8d2(0x259)](0xc8,{'token_type':_0x42e8d2(0x247),'expires_in':0x258,'access_token':_0x10b97a['nTYqo'],'refresh_token':_0x42e8d2(0x21a)});const _0x4219e9=await _0x2b48ed[_0x42e8d2(0x220)]();_0x10b97a[_0x42e8d2(0x1d2)](expect,_0x4219e9)['toEqual'](_0x10b97a[_0x42e8d2(0x1cf)]);}),_0x10b97a[_0xb87482(0x200)](it,_0xb87482(0x1cc),async()=>{const _0x2c2b3e=_0xb87482,{loginService:_0x2dd1df,clientMock:_0x138a37}=loginServiceFactory();_0x138a37['onPost'](_0x10b97a[_0x2c2b3e(0x219)])['reply'](0xc8,{'token_type':_0x10b97a[_0x2c2b3e(0x21c)],'expires_in':0x258,'access_token':_0x10b97a['elEuj'],'refresh_token':_0x2c2b3e(0x1e3)}),await _0x2dd1df[_0x2c2b3e(0x23b)](_0x2c2b3e(0x240),_0x10b97a[_0x2c2b3e(0x255)]),_0x138a37[_0x2c2b3e(0x207)](_0x2c2b3e(0x21f))['reply'](0xc8,{'token_type':_0x10b97a[_0x2c2b3e(0x21c)],'expires_in':0x190,'access_token':_0x10b97a[_0x2c2b3e(0x1cf)],'refresh_token':_0x10b97a['JPesD']}),await _0x2dd1df['refreshToken']();const _0x266077=_0x2dd1df[_0x2c2b3e(0x243)]();_0x10b97a[_0x2c2b3e(0x246)](expect,_0x266077)[_0x2c2b3e(0x24b)]({'access':_0x10b97a[_0x2c2b3e(0x1cf)],'expiry':0x5e0c9258,'refresh':_0x10b97a[_0x2c2b3e(0x24c)]});}),it(_0x10b97a[_0xb87482(0x1e4)],async()=>{const _0x3ce8c4=_0xb87482,{loginService:_0x681a4b,clientMock:_0x345668}=_0x10b97a[_0x3ce8c4(0x244)](loginServiceFactory);_0x345668[_0x3ce8c4(0x207)](_0x10b97a['hEhkc'])[_0x3ce8c4(0x259)](0xc8,{'token_type':_0x3ce8c4(0x247),'expires_in':0x258,'access_token':'aCcEsS_tOkEn','refresh_token':_0x3ce8c4(0x1e3)}),await _0x681a4b[_0x3ce8c4(0x23b)](_0x10b97a[_0x3ce8c4(0x1da)],'shopware');const _0x2d2977=_0x681a4b[_0x3ce8c4(0x243)]();_0x10b97a[_0x3ce8c4(0x1f8)](expect,_0x2d2977)[_0x3ce8c4(0x24b)]({'expiry':0x5e0c9320,'access':_0x10b97a['elEuj'],'refresh':'rEfReSh_ToKeN'}),_0x681a4b[_0x3ce8c4(0x225)]();const _0x39c2e5=_0x681a4b[_0x3ce8c4(0x243)]();expect(_0x39c2e5)[_0x3ce8c4(0x1ed)]();}),it(_0xb87482(0x1fd),async()=>{const _0x211331=_0xb87482,{loginService:_0x1ab013}=_0x10b97a[_0x211331(0x203)](loginServiceFactory);expect(_0x1ab013['getStorageKey']())[_0x211331(0x24b)]('bearerAuth');}),it(_0x10b97a[_0xb87482(0x22b)],async()=>{const _0x21442f=_0xb87482,{loginService:_0x1786ea,clientMock:_0xae8cca}=loginServiceFactory();_0x10b97a['NGEOS'](expect,_0x1786ea[_0x21442f(0x204)]())[_0x21442f(0x1ed)](),_0xae8cca[_0x21442f(0x207)](_0x10b97a[_0x21442f(0x219)])[_0x21442f(0x259)](0xc8,{'token_type':_0x21442f(0x247),'expires_in':0x258,'access_token':'aCcEsS_tOkEn','refresh_token':_0x21442f(0x1e3)}),await _0x1786ea[_0x21442f(0x23b)](_0x10b97a[_0x21442f(0x1da)],'shopware'),_0x10b97a[_0x21442f(0x1f2)](expect,_0x1786ea[_0x21442f(0x204)]())[_0x21442f(0x25a)]();}),_0x10b97a['GayVs'](it,_0x10b97a[_0xb87482(0x218)],async()=>{const _0x4ff6de=_0xb87482;if(_0x10b97a[_0x4ff6de(0x232)]('gkqyW',_0x10b97a[_0x4ff6de(0x241)])){const {loginService:_0x416cd4,clientMock:_0x55fb1a}=loginServiceFactory();_0x55fb1a[_0x4ff6de(0x207)](_0x4ff6de(0x21f))[_0x4ff6de(0x259)](0xc8,{'token_type':'Bearer','expires_in':0x258,'access_token':_0x10b97a[_0x4ff6de(0x256)],'refresh_token':_0x10b97a[_0x4ff6de(0x252)]}),await _0x416cd4[_0x4ff6de(0x23b)](_0x10b97a[_0x4ff6de(0x1da)],_0x4ff6de(0x202)),_0x10b97a[_0x4ff6de(0x215)](expect,_0x416cd4['getToken']())[_0x4ff6de(0x24b)](_0x4ff6de(0x1f6));}else{_0x5952d0[_0x4ff6de(0x23e)](_0x58d3f7,_0x10b97a[_0x4ff6de(0x20b)],{'set':function(_0x3b01e0){_0x43d42e=_0x3b01e0;},'get':function(){return _0x490a2f;}});const _0x3fe9b7=new _0x49bd8d(0x16f61158d40);_0x12e8cb[_0x4ff6de(0x257)](_0x23c522,'Date')['mockImplementation'](()=>_0x3fe9b7),_0x479010[_0x4ff6de(0x222)]=_0x5ad919['fn'](()=>0x5e0c7bb0);}}),it('should\x20return\x20false\x20when\x20token\x20is\x20unparsable',async()=>{const _0x8fd7f3=_0xb87482,{loginService:_0x388b3c}=loginServiceFactory();document[_0x8fd7f3(0x24f)]=_0x10b97a[_0x8fd7f3(0x239)],_0x10b97a['WBOkE'](expect,_0x388b3c[_0x8fd7f3(0x243)]())[_0x8fd7f3(0x1ed)]();}),it(_0x10b97a['QoIoh'],async()=>{const _0x412cdd=_0xb87482,{loginService:_0x38e15f,clientMock:_0x1a5c13}=loginServiceFactory(),_0x367ac9=global[_0x412cdd(0x223)];delete global['document'],global[_0x412cdd(0x223)]=undefined,_0x1a5c13[_0x412cdd(0x207)](_0x10b97a[_0x412cdd(0x219)])['reply'](0xc8,{'token_type':_0x10b97a[_0x412cdd(0x21c)],'expires_in':0x258,'access_token':_0x10b97a[_0x412cdd(0x256)],'refresh_token':_0x10b97a[_0x412cdd(0x252)]}),await _0x38e15f[_0x412cdd(0x23b)](_0x412cdd(0x240),_0x10b97a[_0x412cdd(0x255)]),global['document']=_0x367ac9;}),it(_0xb87482(0x217),async()=>{const _0x447c22=_0xb87482,{loginService:_0x442144,clientMock:_0x71dcdb}=_0x10b97a['hGIrc'](loginServiceFactory),_0x5493e9=jest['fn'](),_0x1ef3bd=jest['fn']();_0x442144[_0x447c22(0x238)](_0x5493e9),_0x442144['addOnTokenChangedListener'](_0x1ef3bd),_0x71dcdb[_0x447c22(0x207)](_0x10b97a[_0x447c22(0x219)])[_0x447c22(0x259)](0xc8,{'token_type':_0x10b97a[_0x447c22(0x21c)],'expires_in':0x258,'access_token':'aCcEsS_tOkEn','refresh_token':_0x10b97a[_0x447c22(0x252)]}),_0x10b97a[_0x447c22(0x1eb)](expect,_0x1ef3bd)['not'][_0x447c22(0x229)](),await _0x442144[_0x447c22(0x23b)](_0x10b97a[_0x447c22(0x1da)],_0x447c22(0x202)),expect(_0x1ef3bd)[_0x447c22(0x229)](),expect(_0x5493e9)[_0x447c22(0x210)]['toHaveBeenCalled'](),_0x442144['logout'](),expect(_0x5493e9)[_0x447c22(0x229)]();}),_0x10b97a[_0xb87482(0x21d)](it,_0xb87482(0x1de),async()=>{const _0x2f8a69=_0xb87482,{loginService:_0x48034a}=_0x10b97a['ZDQNS'](loginServiceFactory),_0x3a3d0a=jest['fn']();_0x48034a[_0x2f8a69(0x1d6)](_0x3a3d0a),expect(_0x3a3d0a)['not']['toHaveBeenCalled'](),_0x48034a[_0x2f8a69(0x201)](),_0x10b97a[_0x2f8a69(0x234)](expect,_0x3a3d0a)[_0x2f8a69(0x210)]['toHaveBeenCalled']();}),_0x10b97a[_0xb87482(0x1d9)](it,_0xb87482(0x1ce),async()=>{const _0x12c16c=_0xb87482,{loginService:_0x5e6c46}=_0x10b97a[_0x12c16c(0x233)](loginServiceFactory);window[_0x12c16c(0x254)][_0x12c16c(0x23d)](_0x10b97a[_0x12c16c(0x258)],!![]);const _0x324a08=jest['fn']();_0x5e6c46[_0x12c16c(0x1d6)](_0x324a08),expect(_0x324a08)['not']['toHaveBeenCalled'](),_0x5e6c46[_0x12c16c(0x201)](),_0x10b97a[_0x12c16c(0x1f5)](expect,_0x324a08)[_0x12c16c(0x229)]();}),_0x10b97a[_0xb87482(0x21d)](it,_0x10b97a[_0xb87482(0x236)],async()=>{const _0x49df54=_0xb87482,{loginService:_0x1fa083}=loginServiceFactory();await _0x10b97a[_0x49df54(0x1f8)](expect,_0x1fa083[_0x49df54(0x220)]())[_0x49df54(0x1e0)][_0x49df54(0x22e)]();}),it(_0x10b97a[_0xb87482(0x22f)],async()=>{const _0x26d813=_0xb87482;document[_0x26d813(0x24f)]=_0x26d813(0x1f0);const {loginService:_0x4df479}=_0x10b97a[_0x26d813(0x1e2)](loginServiceFactory);await _0x10b97a[_0x26d813(0x1f8)](expect,_0x4df479[_0x26d813(0x204)]())['toBe'](!![]);}),it(_0xb87482(0x1fa),async()=>{const _0x1905b8=_0xb87482;if(_0x10b97a[_0x1905b8(0x1ec)](_0x10b97a[_0x1905b8(0x1d5)],_0x10b97a[_0x1905b8(0x1d5)])){const {loginService:_0xa0cf9a}=_0x1abbc1();_0x1afccf['cookie']=_0x1905b8(0x228),_0x329e92(_0xa0cf9a['getBearerAuthentication']())['toBeFalsy']();}else{document[_0x1905b8(0x24f)]='';const {loginService:_0x4072e4}=_0x10b97a[_0x1905b8(0x1f9)](loginServiceFactory);await expect(_0x4072e4[_0x1905b8(0x204)]())[_0x1905b8(0x20d)](![]);}}),it(_0x10b97a[_0xb87482(0x1d4)],async()=>{const _0xeacf5e=_0xb87482;jest[_0xeacf5e(0x226)]();const {loginService:_0x268c5c,clientMock:_0xe8b347}=loginServiceFactory();_0xe8b347[_0xeacf5e(0x207)](_0xeacf5e(0x21f))[_0xeacf5e(0x259)](0xc8,{'token_type':_0x10b97a[_0xeacf5e(0x21c)],'expires_in':0x258,'access_token':'aCcEsS_tOkEn_first','refresh_token':_0x10b97a['CGFeh']}),await _0x268c5c[_0xeacf5e(0x23b)](_0x10b97a[_0xeacf5e(0x1da)],_0x10b97a[_0xeacf5e(0x255)]),expect(_0xe8b347['history']['post'][0x0])[_0xeacf5e(0x1d8)](),_0x10b97a['nXcrp'](expect,_0xe8b347[_0xeacf5e(0x1ee)][_0xeacf5e(0x242)][0x1])['toBeUndefined'](),_0x10b97a[_0xeacf5e(0x246)](expect,JSON['parse'](_0xe8b347[_0xeacf5e(0x1ee)][_0xeacf5e(0x242)][0x0][_0xeacf5e(0x248)])[_0xeacf5e(0x1d1)])[_0xeacf5e(0x24b)](_0x10b97a['ZQoxt']),await jest[_0xeacf5e(0x249)](),expect(_0xe8b347[_0xeacf5e(0x1ee)]['post'][0x1])[_0xeacf5e(0x1d8)](),_0x10b97a[_0xeacf5e(0x234)](expect,JSON[_0xeacf5e(0x22a)](_0xe8b347[_0xeacf5e(0x1ee)][_0xeacf5e(0x242)][0x1]['data'])[_0xeacf5e(0x1d1)])[_0xeacf5e(0x24b)](_0xeacf5e(0x231));}),_0x10b97a[_0xb87482(0x21d)](it,_0xb87482(0x1fe),async()=>{const _0x555bec=_0xb87482,_0x47ebe2={'ZiRoq':_0x10b97a[_0x555bec(0x256)],'xKVOb':function(_0x13907e,_0x4b59b7){const _0x43066c=_0x555bec;return _0x10b97a[_0x43066c(0x213)](_0x13907e,_0x4b59b7);},'TmLdN':_0x10b97a[_0x555bec(0x252)]};if(_0x10b97a[_0x555bec(0x224)]===_0x10b97a['kwTtN']){const {loginService:_0x1f279d}=_0x546b5f(),_0x597b09=_0x1f279d[_0x555bec(0x1ea)]({'expiry':0x12c,'access':_0x47ebe2[_0x555bec(0x1e8)],'refresh':_0x555bec(0x1e3)});_0x47ebe2['xKVOb'](_0x34b708,_0x597b09)[_0x555bec(0x24b)]({'expiry':0x5e0c91f4,'access':_0x47ebe2[_0x555bec(0x1e8)],'refresh':_0x47ebe2[_0x555bec(0x1ef)]});}else{const {loginService:_0x1d6dc9,clientMock:_0x5f26c6}=_0x10b97a[_0x555bec(0x233)](loginServiceFactory);_0x5f26c6[_0x555bec(0x207)](_0x10b97a['hEhkc'])[_0x555bec(0x259)](0xc8,{'token_type':_0x555bec(0x247),'expires_in':0x258,'access_token':_0x10b97a[_0x555bec(0x256)],'refresh_token':'rEfReSh_ToKeN'}),await _0x1d6dc9[_0x555bec(0x23b)]('admin','shopware'),_0x5f26c6[_0x555bec(0x207)](_0x555bec(0x21f))[_0x555bec(0x259)](0xc8,{'token_type':_0x10b97a[_0x555bec(0x21c)],'expires_in':0x190,'access_token':_0x10b97a[_0x555bec(0x1cf)],'refresh_token':_0x10b97a[_0x555bec(0x24c)]}),await _0x1d6dc9[_0x555bec(0x220)](),expect(_0x5f26c6[_0x555bec(0x1ee)][_0x555bec(0x242)][0x1])['toBeDefined'](),_0x10b97a[_0x555bec(0x1eb)](expect,JSON[_0x555bec(0x22a)](_0x5f26c6[_0x555bec(0x1ee)]['post'][0x1]['data'])[_0x555bec(0x1d1)])[_0x555bec(0x24b)](_0x10b97a['uAGRX']);}}),_0x10b97a[_0xb87482(0x1cd)](it,_0xb87482(0x205),async()=>{const _0x376f36=_0xb87482,{loginService:_0x278f62}=loginServiceFactory();expect(typeof _0x278f62['getStorage'])[_0x376f36(0x20d)](_0x10b97a[_0x376f36(0x24a)]);const _0x1e7ba6=_0x278f62[_0x376f36(0x245)]();_0x10b97a[_0x376f36(0x22c)](expect,_0x1e7ba6 instanceof CookieStorage)[_0x376f36(0x20d)](!![]);});});