const _0x599689=_0x1b89;function _0x1b89(_0x58def2,_0x285a42){const _0x6b8c29=_0x6b8c();return _0x1b89=function(_0x1b897d,_0x2e56dd){_0x1b897d=_0x1b897d-0x12c;let _0x1e737a=_0x6b8c29[_0x1b897d];return _0x1e737a;},_0x1b89(_0x58def2,_0x285a42);}function _0x6b8c(){const _0xf1a117=['GITHUB_REF','KJUR','approle','sxiye','HXvnw','parse','Unable\x20to\x20retrieve\x20token\x20from\x20','authPayload','\x27s\x20login\x20endpoint.','56201lbfDlZ','startGroup','/login','4505424UlTvOs','GITHUB_REPOSITORY','jwtTtl','getInput','zgnIR','auth','Token\x20Info','trim','3750470BBKONn','getNow','gtjjw','4gxmyLz','JWS','yzfPx','/login\x20endpoint','body','split','When\x20using\x20a\x20custom\x20authentication\x20method,\x20you\x20must\x20provide\x20the\x20payload','1174445BYZBfI','env','ezuxG','GITHUB_ACTOR','getKey','@actions/core','jwtPrivateKey','37392yXkfmu','JWT','âœ”\x20Vault\x20Token\x20successfully\x20retrieved','EvvQU','KEYUTIL','Token\x20Metadata:\x20','hpnRq','WtWHK','from','5|4|0|1|2|3','1710uitrUH','IntDate','3600','vault-action','1710pYsIUO','YsWtd','RS256','GITHUB_WORKFLOW','GITHUB_EVENT_NAME','token','githubToken','endGroup','Retrieving\x20Vault\x20Token\x20from\x20v1/auth/','2975TeDMYN','client_token','stringify','88PLtvIn','exports','post','jwtKeyPassword','cQFDF','10536pvmYJV','policies','json','role','vvlus','JcrFT','GITHUB_SHA','fWiWO','jws','secretId','debug'];_0x6b8c=function(){return _0xf1a117;};return _0x6b8c();}(function(_0x19aa8f,_0x4c4674){const _0x6a7a00=_0x1b89,_0x24b2ad=_0x19aa8f();while(!![]){try{const _0x5ae59c=parseInt(_0x6a7a00(0x154))/0x1*(parseInt(_0x6a7a00(0x162))/0x2)+-parseInt(_0x6a7a00(0x170))/0x3*(parseInt(_0x6a7a00(0x13b))/0x4)+parseInt(_0x6a7a00(0x169))/0x5+parseInt(_0x6a7a00(0x12f))/0x6*(-parseInt(_0x6a7a00(0x138))/0x7)+-parseInt(_0x6a7a00(0x140))/0x8*(-parseInt(_0x6a7a00(0x17a))/0x9)+-parseInt(_0x6a7a00(0x15f))/0xa+parseInt(_0x6a7a00(0x157))/0xb;if(_0x5ae59c===_0x4c4674)break;else _0x24b2ad['push'](_0x24b2ad['shift']());}catch(_0x5e4a8a){_0x24b2ad['push'](_0x24b2ad['shift']());}}}(_0x6b8c,0x39cb5));const core=require(_0x599689(0x16e)),rsasign=require('jsrsasign');async function retrieveToken(_0x86146c,_0x57e7fe){const _0x394cb8=_0x599689,_0x4eb6e1={'hpnRq':_0x394cb8(0x14d),'HXvnw':_0x394cb8(0x149),'YsWtd':function(_0x4538b5,_0x932ff1,_0x4a4ac2,_0x335629){return _0x4538b5(_0x932ff1,_0x4a4ac2,_0x335629);},'sEwZF':_0x394cb8(0x143),'afQky':'base64','cQFDF':_0x394cb8(0x13e),'EvvQU':_0x394cb8(0x12d),'vvlus':function(_0x5b341f,_0x4e975f){return _0x5b341f(_0x4e975f);},'BASiB':function(_0xb24548,_0x1a0fd2,_0x5a5fb0,_0x472f0b){return _0xb24548(_0x1a0fd2,_0x5a5fb0,_0x472f0b);},'ezuxG':function(_0x2fcfa3,_0xf9914f){return _0x2fcfa3===_0xf9914f;},'gtjjw':_0x394cb8(0x152),'WtWHK':_0x394cb8(0x168)};switch(_0x86146c){case _0x4eb6e1[_0x394cb8(0x176)]:{const _0xb210c=core[_0x394cb8(0x15a)]('roleId',{'required':!![]}),_0x5cc4bc=core['getInput'](_0x4eb6e1[_0x394cb8(0x14f)],{'required':!![]});return await _0x4eb6e1[_0x394cb8(0x130)](getClientToken,_0x57e7fe,_0x86146c,{'role_id':_0xb210c,'secret_id':_0x5cc4bc});}case'github':{const _0x5310cf=core[_0x394cb8(0x15a)](_0x394cb8(0x135),{'required':!![]});return await getClientToken(_0x57e7fe,_0x86146c,{'token':_0x5310cf});}case'jwt':{const _0x376d5d=core[_0x394cb8(0x15a)](_0x4eb6e1['sEwZF'],{'required':!![]}),_0x106936=core[_0x394cb8(0x15a)](_0x394cb8(0x16f),{'required':!![]}),_0x272e90=Buffer[_0x394cb8(0x178)](_0x106936,_0x4eb6e1['afQky'])['toString'](),_0x31d703=core[_0x394cb8(0x15a)](_0x4eb6e1[_0x394cb8(0x13f)],{'required':![]}),_0x569cad=core[_0x394cb8(0x15a)](_0x394cb8(0x159),{'required':![]})||_0x4eb6e1[_0x394cb8(0x173)],_0x5ee1a7=generateJwt(_0x272e90,_0x31d703,_0x4eb6e1[_0x394cb8(0x144)](Number,_0x569cad));return await _0x4eb6e1['BASiB'](getClientToken,_0x57e7fe,_0x86146c,{'jwt':_0x5ee1a7,'role':_0x376d5d});}default:{if(!_0x86146c||_0x4eb6e1[_0x394cb8(0x16b)](_0x86146c,_0x394cb8(0x134)))return core['getInput'](_0x394cb8(0x134),{'required':!![]});else{const _0x5de0f6=core[_0x394cb8(0x15a)](_0x4eb6e1[_0x394cb8(0x161)],{'required':!![]});if(!_0x5de0f6)throw Error(_0x4eb6e1[_0x394cb8(0x177)]);return await getClientToken(_0x57e7fe,_0x86146c,JSON[_0x394cb8(0x150)](_0x5de0f6[_0x394cb8(0x15e)]()));}}}}function generateJwt(_0x39c0f6,_0x258fda,_0x5783ca){const _0x21304f=_0x599689,_0x28b720={'JcrFT':_0x21304f(0x12e)},_0x3ae058='RS256',_0x463490={'alg':_0x3ae058,'typ':_0x21304f(0x171)},_0x49d225=rsasign[_0x21304f(0x14c)][_0x21304f(0x148)][_0x21304f(0x12c)][_0x21304f(0x160)](),_0x25e89a={'iss':_0x28b720[_0x21304f(0x145)],'iat':_0x49d225,'nbf':_0x49d225,'exp':_0x49d225+_0x5783ca,'event':process[_0x21304f(0x16a)][_0x21304f(0x133)],'workflow':process[_0x21304f(0x16a)]['GITHUB_WORKFLOW'],'sha':process['env'][_0x21304f(0x146)],'actor':process[_0x21304f(0x16a)][_0x21304f(0x16c)],'repository':process[_0x21304f(0x16a)][_0x21304f(0x158)],'ref':process['env'][_0x21304f(0x14b)]},_0x5ee3dc=rsasign[_0x21304f(0x174)][_0x21304f(0x16d)](_0x39c0f6,_0x258fda);return rsasign['KJUR'][_0x21304f(0x148)][_0x21304f(0x163)]['sign'](_0x3ae058,JSON[_0x21304f(0x13a)](_0x463490),JSON['stringify'](_0x25e89a),_0x5ee3dc);}async function getClientToken(_0x4b105d,_0x83653c,_0x3dcf81){const _0x12ff16=_0x599689,_0x4c71e6={'HTkUd':_0x12ff16(0x171),'hntlz':_0x12ff16(0x12e),'zgnIR':function(_0x3bd81d,_0x4045a6){return _0x3bd81d+_0x4045a6;},'BvprK':_0x12ff16(0x142),'fWiWO':_0x12ff16(0x15d),'sxiye':_0x12ff16(0x172)},_0x2c9a60=_0x4c71e6['BvprK'];var _0x3f4812={'json':_0x3dcf81,'responseType':_0x2c9a60};core[_0x12ff16(0x14a)](_0x12ff16(0x137)+_0x83653c+_0x12ff16(0x165));const _0x64350a=await _0x4b105d[_0x12ff16(0x13d)]('v1/auth/'+_0x83653c+_0x12ff16(0x156),_0x3f4812);if(_0x64350a&&_0x64350a[_0x12ff16(0x166)]&&_0x64350a['body'][_0x12ff16(0x15c)]&&_0x64350a[_0x12ff16(0x166)][_0x12ff16(0x15c)][_0x12ff16(0x139)]){const _0x8c08ab=_0x12ff16(0x179)[_0x12ff16(0x167)]('|');let _0x49d31e=0x0;while(!![]){switch(_0x8c08ab[_0x49d31e++]){case'0':core[_0x12ff16(0x14a)]('Operating\x20under\x20policies:\x20'+JSON['stringify'](_0x64350a['body'][_0x12ff16(0x15c)][_0x12ff16(0x141)]));continue;case'1':core['debug'](_0x12ff16(0x175)+JSON[_0x12ff16(0x13a)](_0x64350a[_0x12ff16(0x166)][_0x12ff16(0x15c)]['metadata']));continue;case'2':core[_0x12ff16(0x136)]();continue;case'3':return _0x64350a['body'][_0x12ff16(0x15c)][_0x12ff16(0x139)];case'4':core[_0x12ff16(0x155)](_0x4c71e6[_0x12ff16(0x147)]);continue;case'5':core[_0x12ff16(0x14a)](_0x4c71e6[_0x12ff16(0x14e)]);continue;}break;}}else{if(_0x12ff16(0x164)===_0x12ff16(0x164))throw Error(_0x12ff16(0x151)+_0x83653c+_0x12ff16(0x153));else{const _0x22fca8=_0x12ff16(0x131),_0x42049d={'alg':_0x22fca8,'typ':_0x4c71e6['HTkUd']},_0x46279f=_0x9469dc[_0x12ff16(0x14c)]['jws'][_0x12ff16(0x12c)]['getNow'](),_0x47481e={'iss':_0x4c71e6['hntlz'],'iat':_0x46279f,'nbf':_0x46279f,'exp':_0x4c71e6[_0x12ff16(0x15b)](_0x46279f,_0x42d1f1),'event':_0x5e10a1['env'][_0x12ff16(0x133)],'workflow':_0x5a06c1[_0x12ff16(0x16a)][_0x12ff16(0x132)],'sha':_0x22515a[_0x12ff16(0x16a)]['GITHUB_SHA'],'actor':_0x580356[_0x12ff16(0x16a)]['GITHUB_ACTOR'],'repository':_0x55447c['env'][_0x12ff16(0x158)],'ref':_0x5b635d[_0x12ff16(0x16a)][_0x12ff16(0x14b)]},_0xc4aa88=_0x42c4f3[_0x12ff16(0x174)][_0x12ff16(0x16d)](_0x1f15c7,_0x2ed9cc);return _0x545a1d[_0x12ff16(0x14c)][_0x12ff16(0x148)][_0x12ff16(0x163)]['sign'](_0x22fca8,_0x5de8ca[_0x12ff16(0x13a)](_0x42049d),_0x3da1ca[_0x12ff16(0x13a)](_0x47481e),_0xc4aa88);}}}module[_0x599689(0x13c)]={'retrieveToken':retrieveToken};