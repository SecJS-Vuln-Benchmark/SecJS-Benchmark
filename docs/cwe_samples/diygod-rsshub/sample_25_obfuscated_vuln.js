(function(_0x1f74d3,_0x4d8872){const _0x2b882e=_0x4dcb,_0x3b067c=_0x1f74d3();while(!![]){try{const _0x3448b0=-parseInt(_0x2b882e(0x150))/0x1*(parseInt(_0x2b882e(0x132))/0x2)+-parseInt(_0x2b882e(0x119))/0x3+parseInt(_0x2b882e(0x12a))/0x4+-parseInt(_0x2b882e(0x157))/0x5+-parseInt(_0x2b882e(0x14c))/0x6+-parseInt(_0x2b882e(0x14e))/0x7*(parseInt(_0x2b882e(0x144))/0x8)+parseInt(_0x2b882e(0x15a))/0x9*(parseInt(_0x2b882e(0x11e))/0xa);if(_0x3448b0===_0x4d8872)break;else _0x3b067c['push'](_0x3b067c['shift']());}catch(_0x1ea812){_0x3b067c['push'](_0x3b067c['shift']());}}}(_0xaad8,0x77d00));import _0x566ca9 from'jquery';import _0x45d84a from'tippy.js';import _0x11d3d4 from'../templates/personal_menu.hbs';import*as _0x3f7277 from'./channel';import*as _0x352acd from'./narrow';function _0xaad8(){const _0x17ac06=['popper','GwPFc','wBWUq','/json/settings','5406426GFpbkS','top','14eTJCid','hdkTw','8483RSPPwg','UWpxk','sender','get_by_user_id','wQGXK','email','setContent','946440oANWlE','ZaJQd','get_personal_menu_content_context','9aRUpFo','eventListeners','color_scheme','change','prop','.narrow-self-direct-message','MJBTn','hide_all','406848ZnmSiP','data-theme-code','user_id','popover_instances','update','26908950kzUaVH','#personal-menu','AHfnp','click','hide_current_popover_if_visible','one','.personal-menu-clear-status','checked','personal_menu','FzYCR','popperInstance','wqwlx','755892JzpSAV','SznLW','CVXtd','server_update_status','zfKnF','MjksA','register_popover_menu','preventDefault','138zFoQzN','attr','.open-profile-settings','BDaSq','trigger','pbNfY','vKRuq','destroy','fixed','gwgLC','XBNEa','GFcRG','.narrow-messages-sent','cAClU','ljjGJ','bottom','input[data-theme-code=\x22','QGsHm','2311256KEYgnk','personal\x20menu','currentTarget','navbar-dropdown-menu'];_0xaad8=function(){return _0x17ac06;};return _0xaad8();}import*as _0x4008f7 from'./people';import*as _0x4b0fab from'./popover_menus';import*as _0x3b98a2 from'./popover_menus_data';import*as _0xf38a76 from'./popovers';import{current_user}from'./state_data';import{parse_html}from'./ui_util';import{user_settings}from'./user_settings';import*as _0x30333e from'./user_status';export function initialize(){const _0x2d2215=_0x4dcb,_0x4f568a={'GFcRG':function(_0x277b6b,_0x536371){return _0x277b6b===_0x536371;},'GwPFc':_0x2d2215(0x12b),'UWpxk':'personal\x20menu','ZaJQd':_0x2d2215(0x125),'riXxF':_0x2d2215(0x14b),'ZwFhU':function(_0x4db5cf,_0xc033fb){return _0x4db5cf===_0xc033fb;},'MJBTn':'zfKnF','BNzMz':function(_0x5dc802,_0x3540f2){return _0x5dc802(_0x3540f2);},'hdkTw':function(_0xb6802d,_0x2e9562,_0x45a703){return _0xb6802d(_0x2e9562,_0x45a703);},'vehww':_0x2d2215(0x14d),'pbNfY':_0x2d2215(0x13e),'ljjGJ':_0x2d2215(0x134),'AHfnp':_0x2d2215(0x11f),'wqwlx':_0x2d2215(0x147),'XBNEa':_0x2d2215(0x141),'BDaSq':_0x2d2215(0x13a),'wBWUq':_0x2d2215(0x15b)};_0x4b0fab[_0x2d2215(0x130)](_0x4f568a[_0x2d2215(0x120)],{'theme':_0x4f568a[_0x2d2215(0x129)],'placement':_0x4f568a[_0x2d2215(0x13c)],'offset':[-0x32,0x0],'popperOptions':{'strategy':_0x4f568a[_0x2d2215(0x135)],'modifiers':[{'name':_0x4f568a[_0x2d2215(0x14a)],'options':{'scroll':![]}}]},'onMount'(_0x28f7b2){const _0x40e2fb=_0x2d2215,_0x52614f={'gwgLC':_0x4f568a[_0x40e2fb(0x158)],'wQGXK':_0x4f568a['riXxF'],'FzYCR':function(_0x31d270,_0x1a92ec){return _0x31d270(_0x1a92ec);},'CVXtd':function(_0x193ddc,_0x4a165d){return _0x4f568a['ZwFhU'](_0x193ddc,_0x4a165d);},'MjksA':_0x4f568a[_0x40e2fb(0x160)]},_0x12c44f=_0x4f568a['BNzMz'](_0x566ca9,_0x28f7b2[_0x40e2fb(0x148)]);_0x4b0fab[_0x40e2fb(0x11c)][_0x40e2fb(0x126)]=_0x28f7b2,_0x4f568a[_0x40e2fb(0x14f)](_0x45d84a,'.personal-menu-clear-status',{'placement':_0x4f568a['vehww'],'appendTo':document['body']}),_0x12c44f['on'](_0x40e2fb(0x15d),'input[name=\x27theme-select\x27]',_0x317243=>{const _0x1afd62=_0x40e2fb,_0x5c8699={'cAClU':_0x52614f[_0x1afd62(0x13b)]},_0x4262a2=_0x566ca9(_0x317243[_0x1afd62(0x146)])[_0x1afd62(0x133)](_0x1afd62(0x11a));_0x3f7277['patch']({'url':_0x52614f[_0x1afd62(0x154)],'data':{'color_scheme':_0x4262a2},'error'(){setTimeout(()=>{const _0x3aef3d=_0x4dcb,_0x388474=user_settings[_0x3aef3d(0x15c)];_0x566ca9(_0x317243[_0x3aef3d(0x146)])['parent']()['find'](_0x3aef3d(0x142)+_0x388474+'\x22]')[_0x3aef3d(0x15e)](_0x5c8699[_0x3aef3d(0x13f)],!![]);},0x1f4);}});}),_0x12c44f['one'](_0x40e2fb(0x121),_0x40e2fb(0x124),_0xa73d95=>{const _0x441a1e=_0x40e2fb;_0xa73d95[_0x441a1e(0x131)]();const _0x47f89c=current_user[_0x441a1e(0x11b)];_0x30333e[_0x441a1e(0x12d)]({'user_id':_0x47f89c,'status_text':'','emoji_name':'','emoji_code':'','success'(){const _0x59dd6c=_0x441a1e;_0x4b0fab[_0x59dd6c(0x122)](_0x28f7b2);}});}),_0x12c44f[_0x40e2fb(0x123)](_0x40e2fb(0x121),_0x40e2fb(0x15f),_0x247d9b=>{const _0x2f4dcb=_0x40e2fb;if(_0x4f568a[_0x2f4dcb(0x13d)](_0x4f568a[_0x2f4dcb(0x149)],_0x2f4dcb(0x143))){const _0x54cf9=_0x4619da[_0x2f4dcb(0x159)]();_0x119bbe[_0x2f4dcb(0x156)](_0x52614f[_0x2f4dcb(0x127)](_0x2c359c,_0x145506(_0x54cf9)));}else{const _0x3bbb9d=current_user['user_id'],_0x4e1330=_0x4008f7[_0x2f4dcb(0x153)](_0x3bbb9d)[_0x2f4dcb(0x155)];_0x352acd['by']('dm',_0x4e1330,{'trigger':_0x2f4dcb(0x145)}),_0xf38a76['hide_all'](),_0x247d9b[_0x2f4dcb(0x131)]();}}),_0x12c44f[_0x40e2fb(0x123)]('click',_0x4f568a[_0x40e2fb(0x137)],_0x51cf51=>{const _0x45cd7c=_0x40e2fb,_0x447446=current_user[_0x45cd7c(0x11b)],_0x23370f=_0x4008f7[_0x45cd7c(0x153)](_0x447446)[_0x45cd7c(0x155)];_0x352acd['by'](_0x45cd7c(0x152),_0x23370f,{'trigger':_0x4f568a[_0x45cd7c(0x151)]}),_0xf38a76['hide_all'](),_0x51cf51[_0x45cd7c(0x131)]();}),_0x12c44f['one']('click',_0x4f568a[_0x40e2fb(0x140)],_0x582041=>{const _0x5d3984=_0x40e2fb;_0x52614f[_0x5d3984(0x12c)](_0x5d3984(0x12e),_0x52614f[_0x5d3984(0x12f)])?(_0x582041['currentTarget'][_0x5d3984(0x121)](),_0xf38a76[_0x5d3984(0x161)](),_0x582041[_0x5d3984(0x131)]()):(_0x45f2cb[_0x5d3984(0x139)](),_0x3915be['popover_instances'][_0x5d3984(0x126)]=_0x597274);}),_0x28f7b2[_0x40e2fb(0x128)][_0x40e2fb(0x11d)]();},'onShow'(_0x53212f){const _0x9576ae=_0x2d2215,_0x5f5510=_0x3b98a2[_0x9576ae(0x159)]();_0x53212f['setContent'](_0x4f568a['BNzMz'](parse_html,_0x11d3d4(_0x5f5510)));},'onHidden'(_0x41ac1d){const _0x2fbe91=_0x2d2215;_0x41ac1d[_0x2fbe91(0x139)](),_0x4b0fab[_0x2fbe91(0x11c)][_0x2fbe91(0x126)]=undefined;}});}function _0x4dcb(_0x3ff464,_0x1cbc47){const _0xaad8de=_0xaad8();return _0x4dcb=function(_0x4dcb40,_0x5acabb){_0x4dcb40=_0x4dcb40-0x119;let _0x482582=_0xaad8de[_0x4dcb40];return _0x482582;},_0x4dcb(_0x3ff464,_0x1cbc47);}export function toggle(){const _0x219b04=_0x4dcb,_0x2e6d79={'iJGvG':function(_0x9df28c,_0x45e874){return _0x9df28c(_0x45e874);},'vKRuq':_0x219b04(0x121)};_0x2e6d79['iJGvG'](_0x566ca9,_0x219b04(0x11f))[_0x219b04(0x136)](_0x2e6d79[_0x219b04(0x138)]);}