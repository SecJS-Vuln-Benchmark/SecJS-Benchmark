const _0x32e626=_0x26b5;function _0x5cd2(){const _0x4dede2=['getTextWithoutBlockBreak','WCkJj','CSkUU','vcBXO','PbafB','file\x20attachment','input','unHzL','left','IKHzE','VRQIm','woylt','http://example.org','bold','appendChild','right','editor_empty','zuxDh','161338OHAQSy','QDWPk','7168440zPorvr','fFuHU','document','HlzFz','7256095xgjpge','eZShd','yOMGu','iubBJ','42HnzIJu','sPweD','OcRTi','3914253MRRxcM','figure','UEkFH','removeChild','selecting\x20an\x20attachment\x20deactivates\x20toolbar\x20dialog','notOk','removeAttribute','applying\x20formatting\x20to\x20an\x20unfocused\x20editor','1NnwdUP','getLevel','urLBr','NiPRM','inserting\x20a\x20javascript:\x20link\x20is\x20forbidden','jvLYm','ahttp://example.com\x0a','MGoOA','sfKKz','jrcgH','NTdLF','javascript:alert(\x27XSS\x27)','1633830oXqPzY','applying\x20formatting\x20and\x20then\x20typing','textAttributes','aTiLB','igCsf','EgYnG','hPuUJ','EZwoC','oPqUl','MMEbb','href','locationRange','backspacing\x20newline\x20after\x20text','http://example.com','BtHjd','getBlockAtIndex','SikIw','textForStringWithAttributes','typing\x20after\x20a\x20link','yQHvd','232860jhFOYd','removing\x20a\x20link','applying\x20attributes\x20to\x20text','focus','gclQI','body','applying\x20a\x20link\x20to\x20an\x20attachment\x20with\x20a\x20host-provided\x20href','30NWnyWM','GHasM','1172300MvYwiM','UFYBA','split'];_0x5cd2=function(){return _0x4dede2;};return _0x5cd2();}function _0x26b5(_0x35ba05,_0x1e47c1){const _0x5cd2b6=_0x5cd2();return _0x26b5=function(_0x26b54b,_0x5c0b27){_0x26b54b=_0x26b54b-0x107;let _0x392d3f=_0x5cd2b6[_0x26b54b];return _0x392d3f;},_0x26b5(_0x35ba05,_0x1e47c1);}(function(_0x3635dc,_0x48fc9b){const _0x57b00f=_0x26b5,_0x31f307=_0x3635dc();while(!![]){try{const _0x500572=parseInt(_0x57b00f(0x155))/0x1*(parseInt(_0x57b00f(0x140))/0x2)+parseInt(_0x57b00f(0x10e))/0x3+parseInt(_0x57b00f(0x12b))/0x4+parseInt(_0x57b00f(0x122))/0x5*(parseInt(_0x57b00f(0x14a))/0x6)+-parseInt(_0x57b00f(0x146))/0x7+-parseInt(_0x57b00f(0x142))/0x8+-parseInt(_0x57b00f(0x14d))/0x9*(-parseInt(_0x57b00f(0x129))/0xa);if(_0x500572===_0x48fc9b)break;else _0x31f307['push'](_0x31f307['shift']());}catch(_0x1dcf56){_0x31f307['push'](_0x31f307['shift']());}}}(_0x5cd2,0x96815));import*as _0x1cd0f4 from'trix/config';import{makeElement}from'trix/core/helpers';import _0x1aea16 from'trix/models/text';import{assert,clickElement,clickToolbarButton,clickToolbarDialogButton,collapseSelection,expandSelection,expectDocument,fixtures,insertString,insertText,isToolbarButtonActive,isToolbarButtonDisabled,isToolbarDialogActive,moveCursor,pressKey,test,testGroup,testIf,typeCharacters,typeInToolbarDialog,typeToolbarKeyCommand}from'test/test_helper';testGroup('Text\x20formatting',{'template':_0x32e626(0x13e)},()=>{const _0x54cbc2=_0x32e626,_0x9fcb3b={'XfZJj':'1|3|5|2|4|0','yQHvd':function(_0x4a7bef,_0x2989b9){return _0x4a7bef(_0x2989b9);},'SikIw':'abc','NiPRM':function(_0x80620a,_0x3eb729){return _0x80620a(_0x3eb729);},'jrcgH':function(_0x56b280,_0x210dd5){return _0x56b280(_0x210dd5);},'WCkJj':function(_0x3d6ee5,_0x19b316){return _0x3d6ee5(_0x19b316);},'GHasM':_0x54cbc2(0x118),'yOMGu':function(_0x506fe6,_0x5c443a,_0x55eec7){return _0x506fe6(_0x5c443a,_0x55eec7);},'igCsf':'http://example.com','aTiLB':function(_0xf53637,_0x17d348){return _0xf53637(_0x17d348);},'gclQI':function(_0x40c9f5,_0x4b58c6,_0x595dce){return _0x40c9f5(_0x4b58c6,_0x595dce);},'PbafB':'8|7|5|4|1|0|6|2|3','CSkUU':function(_0x4f2e21,_0x4a39e9,_0x34732c){return _0x4f2e21(_0x4a39e9,_0x34732c);},'rtRjR':_0x54cbc2(0x10d),'eZShd':function(_0xeacb80,_0x4addad){return _0xeacb80(_0x4addad);},'oPqUl':function(_0x555ab5,_0x2bb134){return _0x555ab5(_0x2bb134);},'MGoOA':function(_0x5662be,_0x267c8d){return _0x5662be(_0x267c8d);},'QDWPk':_0x54cbc2(0x136),'NTdLF':function(_0x195722,_0x241008,_0x50f992){return _0x195722(_0x241008,_0x50f992);},'HlzFz':_0x54cbc2(0x13a),'vcBXO':function(_0x20bf41,_0x52c556){return _0x20bf41(_0x52c556);},'rreAa':_0x54cbc2(0x153),'wILWZ':_0x54cbc2(0x133),'unHzL':_0x54cbc2(0x13b),'sfKKz':function(_0x479936,_0x3d08c7){return _0x479936(_0x3d08c7);},'jvLYm':function(_0x363ac2,_0x3e74f6){return _0x363ac2(_0x3e74f6);},'UFYBA':function(_0x44cce8,_0x116673,_0x56ab96){return _0x44cce8(_0x116673,_0x56ab96);},'DGeZK':_0x54cbc2(0x134),'aWtxQ':'text','NHRrE':function(_0x17746e,_0x1fc2ea){return _0x17746e(_0x1fc2ea);},'EgYnG':function(_0x33dafb,_0x448ff7){return _0x33dafb(_0x448ff7);},'EZwoC':function(_0x2a0794,_0x1a13b2){return _0x2a0794(_0x1a13b2);},'MMEbb':_0x54cbc2(0x13d),'UEkFH':'backspace','urLBr':_0x54cbc2(0x124),'rZtRd':'applying\x20a\x20link\x20to\x20text','fFuHU':'inserting\x20a\x20link','sPweD':_0x54cbc2(0x159),'iubBJ':'editing\x20a\x20link','zuxDh':function(_0x48c9dd,_0x86b11e,_0x4578fe){return _0x48c9dd(_0x86b11e,_0x4578fe);},'VRQIm':_0x54cbc2(0x151),'IKHzE':'typing\x20over\x20a\x20selected\x20attachment\x20does\x20not\x20apply\x20disabled\x20formatting\x20attributes','woylt':function(_0x368abf,_0x181ba8,_0x1c0621){return _0x368abf(_0x181ba8,_0x1c0621);},'KRtxi':_0x54cbc2(0x120),'OcRTi':_0x54cbc2(0x10f),'BtHjd':function(_0x4589b6,_0x2a724e,_0x5554a6){return _0x4589b6(_0x2a724e,_0x5554a6);},'hPuUJ':'key\x20command\x20activates\x20toolbar\x20button'};_0x9fcb3b[_0x54cbc2(0x10c)](test,_0x9fcb3b[_0x54cbc2(0x157)],async()=>{const _0x271a77=_0x54cbc2,_0x2a4916=_0x9fcb3b['XfZJj'][_0x271a77(0x12d)]('|');let _0x5d3bb2=0x0;while(!![]){switch(_0x2a4916[_0x5d3bb2++]){case'0':assert[_0x271a77(0x110)]([0x3,0x4],{'blockBreak':!![]});continue;case'1':await _0x9fcb3b[_0x271a77(0x121)](typeCharacters,_0x9fcb3b[_0x271a77(0x11e)]);continue;case'2':assert[_0x271a77(0x110)]([0x0,0x2],{});continue;case'3':await _0x9fcb3b[_0x271a77(0x158)](expandSelection,_0x271a77(0x136));continue;case'4':assert['textAttributes']([0x2,0x3],{'bold':!![]});continue;case'5':await _0x9fcb3b[_0x271a77(0x10b)](clickToolbarButton,{'attribute':_0x271a77(0x13b)});continue;}break;}}),test(_0x9fcb3b['rZtRd'],async()=>{const _0x2d8baf=_0x54cbc2;await _0x9fcb3b[_0x2d8baf(0x12f)](typeCharacters,_0x9fcb3b[_0x2d8baf(0x11e)]),await _0x9fcb3b[_0x2d8baf(0x10b)](moveCursor,_0x2d8baf(0x136)),await expandSelection(_0x2d8baf(0x136)),await _0x9fcb3b[_0x2d8baf(0x10b)](clickToolbarButton,{'attribute':_0x9fcb3b[_0x2d8baf(0x12a)]}),assert['ok'](isToolbarDialogActive({'attribute':_0x9fcb3b[_0x2d8baf(0x12a)]})),await _0x9fcb3b[_0x2d8baf(0x148)](typeInToolbarDialog,_0x9fcb3b[_0x2d8baf(0x112)],{'attribute':_0x2d8baf(0x118)}),assert['textAttributes']([0x0,0x1],{}),assert[_0x2d8baf(0x110)]([0x1,0x2],{'href':_0x2d8baf(0x11b)}),assert[_0x2d8baf(0x110)]([0x2,0x3],{});}),_0x9fcb3b[_0x54cbc2(0x126)](test,_0x9fcb3b[_0x54cbc2(0x143)],async()=>{const _0x3cbc5e=_0x54cbc2;await typeCharacters('a'),await _0x9fcb3b['aTiLB'](clickToolbarButton,{'attribute':_0x9fcb3b[_0x3cbc5e(0x12a)]}),assert['ok'](isToolbarDialogActive({'attribute':_0x9fcb3b[_0x3cbc5e(0x12a)]})),await _0x9fcb3b['gclQI'](typeInToolbarDialog,_0x3cbc5e(0x11b),{'attribute':_0x9fcb3b['GHasM']}),assert['textAttributes']([0x0,0x1],{}),assert[_0x3cbc5e(0x110)]([0x1,0x13],{'href':_0x9fcb3b[_0x3cbc5e(0x112)]}),expectDocument(_0x3cbc5e(0x108));}),test(_0x9fcb3b[_0x54cbc2(0x14b)],async()=>{const _0x1a792b=_0x54cbc2,_0x22420d=_0x9fcb3b[_0x1a792b(0x132)]['split']('|');let _0x26c59a=0x0;while(!![]){switch(_0x22420d[_0x26c59a++]){case'0':await _0x9fcb3b[_0x1a792b(0x130)](typeInToolbarDialog,_0x9fcb3b['rtRjR'],{'attribute':_0x1a792b(0x118)});continue;case'1':assert['ok'](isToolbarDialogActive({'attribute':_0x9fcb3b[_0x1a792b(0x12a)]}));continue;case'2':assert['textAttributes']([0x1,0x2],{'frozen':!![]});continue;case'3':assert[_0x1a792b(0x110)]([0x2,0x3],{});continue;case'4':await _0x9fcb3b[_0x1a792b(0x147)](clickToolbarButton,{'attribute':_0x9fcb3b[_0x1a792b(0x12a)]});continue;case'5':await expandSelection(_0x1a792b(0x136));continue;case'6':assert[_0x1a792b(0x110)]([0x0,0x1],{});continue;case'7':await moveCursor(_0x1a792b(0x136));continue;case'8':await typeCharacters('XSS');continue;}break;}}),test(_0x9fcb3b[_0x54cbc2(0x149)],async()=>{const _0x44a115=_0x54cbc2;_0x9fcb3b[_0x44a115(0x116)](insertString,'a');const _0x700e9e=_0x1aea16[_0x44a115(0x11f)]('bc',{'href':_0x44a115(0x11b)});insertText(_0x700e9e),_0x9fcb3b['eZShd'](insertString,'d'),await _0x9fcb3b[_0x44a115(0x109)](moveCursor,{'direction':_0x9fcb3b['QDWPk'],'times':0x2}),await clickToolbarButton({'attribute':_0x9fcb3b[_0x44a115(0x12a)]}),assert['ok'](isToolbarDialogActive({'attribute':_0x9fcb3b[_0x44a115(0x12a)]})),assert[_0x44a115(0x119)]({'index':0x0,'offset':0x1},{'index':0x0,'offset':0x3}),await _0x9fcb3b['NTdLF'](typeInToolbarDialog,_0x9fcb3b[_0x44a115(0x145)],{'attribute':_0x9fcb3b[_0x44a115(0x12a)]}),assert[_0x44a115(0x110)]([0x0,0x1],{}),assert[_0x44a115(0x110)]([0x1,0x3],{'href':_0x44a115(0x13a)}),assert[_0x44a115(0x110)]([0x3,0x4],{});}),_0x9fcb3b[_0x54cbc2(0x13f)](test,_0x54cbc2(0x123),async()=>{const _0x1a95c8=_0x54cbc2,_0x4b9b53=_0x1aea16[_0x1a95c8(0x11f)]('ab',{'href':'http://example.com'});_0x9fcb3b[_0x1a95c8(0x131)](insertText,_0x4b9b53),assert[_0x1a95c8(0x110)]([0x0,0x2],{'href':_0x1a95c8(0x11b)}),await expandSelection({'direction':_0x1a95c8(0x136),'times':0x2}),await _0x9fcb3b['oPqUl'](clickToolbarButton,{'attribute':_0x9fcb3b[_0x1a95c8(0x12a)]}),await _0x9fcb3b[_0x1a95c8(0x10b)](clickToolbarDialogButton,{'method':_0x9fcb3b['rreAa']}),await assert[_0x1a95c8(0x110)]([0x0,0x2],{});}),_0x9fcb3b[_0x54cbc2(0x126)](test,'selecting\x20an\x20attachment\x20disables\x20text\x20formatting',async()=>{const _0x1b56ef=_0x54cbc2,_0x223732=fixtures[_0x9fcb3b['wILWZ']][_0x1b56ef(0x144)]['getBlockAtIndex'](0x0)[_0x1b56ef(0x12e)]();insertText(_0x223732),await typeCharacters('a'),assert[_0x1b56ef(0x152)](isToolbarButtonDisabled({'attribute':_0x9fcb3b['unHzL']})),await _0x9fcb3b[_0x1b56ef(0x10a)](expandSelection,_0x1b56ef(0x136)),assert[_0x1b56ef(0x152)](_0x9fcb3b[_0x1b56ef(0x116)](isToolbarButtonDisabled,{'attribute':_0x9fcb3b[_0x1b56ef(0x135)]})),await expandSelection(_0x9fcb3b[_0x1b56ef(0x141)]),assert['ok'](_0x9fcb3b['sfKKz'](isToolbarButtonDisabled,{'attribute':_0x1b56ef(0x13b)}));}),test(_0x9fcb3b[_0x54cbc2(0x138)],async()=>{const _0x4d18fa=_0x54cbc2,_0x238321=fixtures[_0x4d18fa(0x133)][_0x4d18fa(0x144)][_0x4d18fa(0x11d)](0x0)[_0x4d18fa(0x12e)]();_0x9fcb3b['eZShd'](insertText,_0x238321),await clickToolbarButton({'attribute':_0x4d18fa(0x118)}),assert['ok'](isToolbarDialogActive({'attribute':'href'})),await clickElement(getEditorElement()['querySelector'](_0x4d18fa(0x14e))),assert[_0x4d18fa(0x152)](_0x9fcb3b['MGoOA'](isToolbarDialogActive,{'attribute':_0x4d18fa(0x118)})),assert['ok'](isToolbarButtonDisabled({'attribute':'href'}));}),test(_0x9fcb3b[_0x54cbc2(0x137)],async()=>{const _0x4e8588=_0x54cbc2,_0x46a8e6=fixtures[_0x4e8588(0x133)][_0x4e8588(0x144)]['getBlockAtIndex'](0x0)['getTextWithoutBlockBreak']();insertText(_0x46a8e6),await _0x9fcb3b[_0x4e8588(0x147)](expandSelection,_0x9fcb3b[_0x4e8588(0x141)]),assert['ok'](_0x9fcb3b['WCkJj'](isToolbarButtonDisabled,{'attribute':_0x9fcb3b[_0x4e8588(0x135)]})),await typeCharacters('a'),assert['textAttributes']([0x0,0x1],{}),expectDocument('a\x0a');}),test(_0x54cbc2(0x128),async()=>{const _0x364d7c=_0x54cbc2,_0x4ac6d5=fixtures[_0x364d7c(0x133)][_0x364d7c(0x144)][_0x364d7c(0x11d)](0x0)[_0x364d7c(0x12e)]();insertText(_0x4ac6d5),await typeCharacters('a'),assert[_0x364d7c(0x152)](isToolbarButtonDisabled({'attribute':_0x9fcb3b['GHasM']})),await expandSelection(_0x364d7c(0x136)),assert[_0x364d7c(0x152)](isToolbarButtonDisabled({'attribute':'href'})),await expandSelection(_0x364d7c(0x136)),assert['ok'](isToolbarButtonDisabled({'attribute':_0x9fcb3b[_0x364d7c(0x12a)]}));}),_0x9fcb3b[_0x54cbc2(0x139)](test,_0x9fcb3b['KRtxi'],async()=>{const _0x212649=_0x54cbc2;await _0x9fcb3b[_0x212649(0x111)](typeCharacters,'ab'),await _0x9fcb3b[_0x212649(0x107)](expandSelection,{'direction':_0x212649(0x136),'times':0x2}),await clickToolbarButton({'attribute':_0x212649(0x118)}),await _0x9fcb3b['yOMGu'](typeInToolbarDialog,_0x212649(0x11b),{'attribute':_0x212649(0x118)}),await _0x9fcb3b['sfKKz'](collapseSelection,'right'),assert[_0x212649(0x119)]({'index':0x0,'offset':0x2}),await typeCharacters('c'),assert[_0x212649(0x110)]([0x0,0x2],{'href':_0x212649(0x11b)}),assert[_0x212649(0x110)]([0x2,0x3],{}),await _0x9fcb3b[_0x212649(0x121)](moveCursor,_0x212649(0x136)),assert[_0x212649(0x152)](isToolbarButtonActive({'attribute':_0x212649(0x118)})),await moveCursor(_0x9fcb3b[_0x212649(0x141)]),assert['ok'](isToolbarButtonActive({'attribute':_0x212649(0x118)}));}),test(_0x9fcb3b[_0x54cbc2(0x14c)],async()=>{const _0x4a2733=_0x54cbc2;await typeCharacters('a'),await clickToolbarButton({'attribute':_0x4a2733(0x13b)}),await _0x9fcb3b[_0x4a2733(0x107)](typeCharacters,'bcd'),await _0x9fcb3b[_0x4a2733(0x116)](clickToolbarButton,{'attribute':'bold'}),await typeCharacters('e'),assert['textAttributes']([0x0,0x1],{}),assert[_0x4a2733(0x110)]([0x1,0x4],{'bold':!![]}),assert[_0x4a2733(0x110)]([0x4,0x5],{});}),_0x9fcb3b[_0x54cbc2(0x148)](test,'applying\x20formatting\x20and\x20then\x20moving\x20the\x20cursor\x20away',async()=>{const _0x411950=_0x54cbc2;await typeCharacters('abc'),await _0x9fcb3b[_0x411950(0x121)](moveCursor,_0x9fcb3b[_0x411950(0x141)]),assert[_0x411950(0x152)](isToolbarButtonActive({'attribute':_0x411950(0x13b)})),await clickToolbarButton({'attribute':_0x9fcb3b['unHzL']}),assert['ok'](isToolbarButtonActive({'attribute':'bold'})),await moveCursor(_0x411950(0x13d)),assert[_0x411950(0x152)](isToolbarButtonActive({'attribute':_0x9fcb3b[_0x411950(0x135)]})),await _0x9fcb3b[_0x411950(0x131)](moveCursor,_0x411950(0x136)),assert[_0x411950(0x152)](isToolbarButtonActive({'attribute':_0x9fcb3b[_0x411950(0x135)]})),assert[_0x411950(0x110)]([0x0,0x3],{}),assert['textAttributes']([0x3,0x4],{'blockBreak':!![]});}),test(_0x54cbc2(0x154),async()=>{const _0x5006bf=_0x54cbc2,_0x5113de=_0x9fcb3b[_0x5006bf(0x12c)](makeElement,_0x9fcb3b['DGeZK'],{'type':_0x9fcb3b['aWtxQ']});document[_0x5006bf(0x127)][_0x5006bf(0x13c)](_0x5113de),_0x5113de[_0x5006bf(0x125)](),await clickToolbarButton({'attribute':_0x9fcb3b[_0x5006bf(0x135)]}),await typeCharacters('a'),assert[_0x5006bf(0x110)]([0x0,0x1],{'bold':!![]}),document[_0x5006bf(0x127)][_0x5006bf(0x150)](_0x5113de);}),_0x9fcb3b[_0x54cbc2(0x11c)](test,'editing\x20formatted\x20text',async()=>{const _0x4ad717=_0x54cbc2;await _0x9fcb3b['NHRrE'](clickToolbarButton,{'attribute':_0x9fcb3b[_0x4ad717(0x135)]}),await typeCharacters('ab'),await _0x9fcb3b[_0x4ad717(0x107)](clickToolbarButton,{'attribute':_0x4ad717(0x13b)}),await typeCharacters('c'),assert['notOk'](isToolbarButtonActive({'attribute':_0x4ad717(0x13b)})),await moveCursor(_0x9fcb3b[_0x4ad717(0x141)]),assert['ok'](_0x9fcb3b[_0x4ad717(0x111)](isToolbarButtonActive,{'attribute':_0x9fcb3b[_0x4ad717(0x135)]})),await moveCursor(_0x9fcb3b[_0x4ad717(0x141)]),assert['ok'](_0x9fcb3b[_0x4ad717(0x113)](isToolbarButtonActive,{'attribute':_0x9fcb3b['unHzL']})),await _0x9fcb3b[_0x4ad717(0x115)](typeCharacters,'Z'),assert['ok'](isToolbarButtonActive({'attribute':'bold'})),assert['textAttributes']([0x0,0x3],{'bold':!![]}),assert[_0x4ad717(0x110)]([0x3,0x4],{}),assert[_0x4ad717(0x110)]([0x4,0x5],{'blockBreak':!![]}),await moveCursor('right'),assert['ok'](_0x9fcb3b[_0x4ad717(0x10b)](isToolbarButtonActive,{'attribute':_0x9fcb3b[_0x4ad717(0x135)]})),await moveCursor(_0x9fcb3b[_0x4ad717(0x117)]),assert['notOk'](_0x9fcb3b[_0x4ad717(0x147)](isToolbarButtonActive,{'attribute':_0x4ad717(0x13b)}));}),testIf(_0x1cd0f4['input'][_0x54cbc2(0x156)]()===0x0,_0x9fcb3b[_0x54cbc2(0x114)],async()=>{const _0x204d74=_0x54cbc2;await typeToolbarKeyCommand({'attribute':_0x9fcb3b[_0x204d74(0x135)]}),assert['ok'](_0x9fcb3b[_0x204d74(0x158)](isToolbarButtonActive,{'attribute':_0x9fcb3b[_0x204d74(0x135)]}));}),_0x9fcb3b[_0x54cbc2(0x10c)](test,_0x54cbc2(0x11a),async()=>{const _0x989489=_0x54cbc2;await typeCharacters('a\x0a'),await _0x9fcb3b[_0x989489(0x12f)](pressKey,_0x9fcb3b[_0x989489(0x14f)]),_0x9fcb3b[_0x989489(0x109)](expectDocument,'a\x0a');});});