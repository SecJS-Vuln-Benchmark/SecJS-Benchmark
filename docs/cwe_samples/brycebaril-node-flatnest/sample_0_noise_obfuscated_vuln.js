function _0x3d8a(){const _0xf1994e=['key\x20command\x20activates\x20toolbar\x20button','input','gXKrE','CGgMc','ZhwNv','276kjVNef','KmgDt','left','locationRange','JGddW','55XTCPtU','text','ggHRq','EthrG','teOwA','typing\x20over\x20a\x20selected\x20attachment\x20does\x20not\x20apply\x20disabled\x20formatting\x20attributes','editor_empty','bcd','zaZnH','rZJtB','aQSDr','8|4|6|2|5|3|1|0|7','JSiWK','inserting\x20a\x20link','elhtl','1088930DMXtfI','qtidU','body','typing\x20after\x20a\x20link','12|6|8|2|4|5|0|10|11|3|1|7|9','5|2|0|1|4|3','http://example.com','jszsU','47BAZROB','104ggZCdo','textForStringWithAttributes','editing\x20a\x20link','focus','WiYlV','IhhsJ','href','applying\x20formatting\x20to\x20an\x20unfocused\x20editor','amlIN','ChnAQ','CosbX','applying\x20formatting\x20and\x20then\x20moving\x20the\x20cursor\x20away','1253964vCoNLv','urbBY','selecting\x20an\x20attachment\x20deactivates\x20toolbar\x20dialog','dFEbd','RPuvN','backspace','bold','applying\x20a\x20link\x20to\x20an\x20attachment\x20with\x20a\x20host-provided\x20href','EOIYE','4710PZpKjS','notOk','TnghO','CYpiE','plAZb','zwRUb','XbsUu','textAttributes','imccF','NYgCw','aueQR','removeChild','636381kwpOUL','applying\x20attributes\x20to\x20text','pwRRF','ahttp://example.com\x0a','abc','http://example.org','getBlockAtIndex','figure','file\x20attachment','8030qidhIC','Text\x20formatting','applying\x20a\x20link\x20to\x20text','removing\x20a\x20link','VRdVn','21896OkPPPw','selecting\x20an\x20attachment\x20disables\x20text\x20formatting','qUWgs','307647tBBvZH','IepgP','document','eRljz','appendChild','56PmvYOQ','getTextWithoutBlockBreak','split','zZtTB'];_0x3d8a=function(){return _0xf1994e;};return _0x3d8a();}const _0x515255=_0x1834;(function(_0x4dc2f6,_0x29cb0c){const _0x10b9a8=_0x1834,_0x2c3b1e=_0x4dc2f6();while(!![]){try{const _0xdfda8d=-parseInt(_0x10b9a8(0x141))/0x1*(parseInt(_0x10b9a8(0x157))/0x2)+-parseInt(_0x10b9a8(0x163))/0x3+-parseInt(_0x10b9a8(0x142))/0x4*(parseInt(_0x10b9a8(0x16c))/0x5)+-parseInt(_0x10b9a8(0x182))/0x6*(parseInt(_0x10b9a8(0x171))/0x7)+parseInt(_0x10b9a8(0x179))/0x8*(parseInt(_0x10b9a8(0x174))/0x9)+-parseInt(_0x10b9a8(0x139))/0xa+-parseInt(_0x10b9a8(0x12a))/0xb*(-parseInt(_0x10b9a8(0x14e))/0xc);if(_0xdfda8d===_0x29cb0c)break;else _0x2c3b1e['push'](_0x2c3b1e['shift']());}catch(_0x4bd18c){_0x2c3b1e['push'](_0x2c3b1e['shift']());}}}(_0x3d8a,0x23421));import*as _0x4ae772 from'trix/config';import{makeElement}from'trix/core/helpers';import _0x5a6d48 from'trix/models/text';function _0x1834(_0x41d189,_0x33c315){const _0x3d8a26=_0x3d8a();return _0x1834=function(_0x183405,_0xad5fbc){_0x183405=_0x183405-0x128;let _0x38ec0f=_0x3d8a26[_0x183405];return _0x38ec0f;},_0x1834(_0x41d189,_0x33c315);}import{assert,clickElement,clickToolbarButton,clickToolbarDialogButton,collapseSelection,expandSelection,expectDocument,fixtures,insertString,insertText,isToolbarButtonActive,isToolbarButtonDisabled,isToolbarDialogActive,moveCursor,pressKey,test,testGroup,testIf,typeCharacters,typeInToolbarDialog,typeToolbarKeyCommand}from'test/test_helper';testGroup(_0x515255(0x16d),{'template':_0x515255(0x130)},()=>{const _0x104c07=_0x515255,_0x34dc2f={'zaZnH':_0x104c07(0x154),'amlIN':_0x104c07(0x184),'dFEbd':_0x104c07(0x135),'IepgP':'http://example.com','zZtTB':function(_0x31c132,_0x18323f){return _0x31c132(_0x18323f);},'JSiWK':_0x104c07(0x148),'elhtl':function(_0x28b208,_0x5cdf5e){return _0x28b208(_0x5cdf5e);},'ggHRq':function(_0x171033,_0x425def){return _0x171033(_0x425def);},'gBxam':function(_0x4f00fb,_0x1c5a61){return _0x4f00fb(_0x1c5a61);},'aQSDr':function(_0x160749,_0x15d56e){return _0x160749(_0x15d56e);},'imccF':function(_0x3b7c6c,_0x37defb){return _0x3b7c6c(_0x37defb);},'qUWgs':_0x104c07(0x168),'XbsUu':function(_0x552ae2,_0xb548){return _0x552ae2(_0xb548);},'ieFSJ':function(_0x51eff6,_0x238b15){return _0x51eff6(_0x238b15);},'eRljz':function(_0x2d9ca9,_0x453b29){return _0x2d9ca9(_0x453b29);},'CYpiE':function(_0x57c0a6,_0x1e7b75){return _0x57c0a6(_0x1e7b75);},'EOIYE':_0x104c07(0x16b),'aueQR':function(_0x12f411,_0x5c5358){return _0x12f411(_0x5c5358);},'KmgDt':function(_0x433f31,_0x5a3e81){return _0x433f31(_0x5a3e81);},'IhhsJ':function(_0x18e948,_0xc421d4){return _0x18e948(_0xc421d4);},'qtidU':_0x104c07(0x13d),'CGgMc':function(_0x450f5d,_0x5bfb39,_0x1fb1d8){return _0x450f5d(_0x5bfb39,_0x1fb1d8);},'EthrG':'right','ZhwNv':function(_0x39c94b,_0x39437a){return _0x39c94b(_0x39437a);},'CosbX':function(_0xcbf639,_0x261f1f){return _0xcbf639(_0x261f1f);},'VRdVn':function(_0x3cfcdf,_0x3eeb59){return _0x3cfcdf(_0x3eeb59);},'jszsU':function(_0x39fb86,_0x1ce621){return _0x39fb86(_0x1ce621);},'RRWxL':function(_0x508bf4,_0x8c0241){return _0x508bf4(_0x8c0241);},'bMObz':function(_0x4c6411,_0x2299cd){return _0x4c6411(_0x2299cd);},'rZJtB':function(_0x10e140,_0x1a092d){return _0x10e140(_0x1a092d);},'hKjCL':_0x104c07(0x153),'gXKrE':function(_0x1efd9a,_0x1275fe,_0x410937){return _0x1efd9a(_0x1275fe,_0x410937);},'zwRUb':_0x104c07(0x16e),'urbBY':function(_0x374428,_0x3425a7,_0x4868a0){return _0x374428(_0x3425a7,_0x4868a0);},'TnghO':_0x104c07(0x137),'kvSiB':_0x104c07(0x16f),'vSYqL':_0x104c07(0x172),'teOwA':_0x104c07(0x12f),'RPuvN':_0x104c07(0x155),'NYgCw':function(_0x5e846e,_0x4d5bbb,_0x44b9f1){return _0x5e846e(_0x4d5bbb,_0x44b9f1);},'WiYlV':_0x104c07(0x13c),'IbHWc':function(_0x59abda,_0x531089,_0x4f7b92){return _0x59abda(_0x531089,_0x4f7b92);},'qeekr':_0x104c07(0x14d),'pwRRF':_0x104c07(0x149),'ChnAQ':function(_0x3bba66,_0x5dc6ba,_0x2d300c){return _0x3bba66(_0x5dc6ba,_0x2d300c);},'JGddW':'editing\x20formatted\x20text','WBfov':function(_0x1fbabf,_0x15d45f){return _0x1fbabf===_0x15d45f;},'plAZb':_0x104c07(0x17d)};test(_0x104c07(0x164),async()=>{const _0x1667df=_0x104c07,_0x3f2155=_0x1667df(0x13e)[_0x1667df(0x17b)]('|');let _0x242c04=0x0;while(!![]){switch(_0x3f2155[_0x242c04++]){case'0':await clickToolbarButton({'attribute':_0x34dc2f[_0x1667df(0x132)]});continue;case'1':assert[_0x1667df(0x15e)]([0x0,0x2],{});continue;case'2':await expandSelection(_0x34dc2f[_0x1667df(0x14a)]);continue;case'3':assert['textAttributes']([0x3,0x4],{'blockBreak':!![]});continue;case'4':assert[_0x1667df(0x15e)]([0x2,0x3],{'bold':!![]});continue;case'5':await typeCharacters('abc');continue;}break;}}),_0x34dc2f[_0x104c07(0x17f)](test,_0x34dc2f[_0x104c07(0x15c)],async()=>{const _0x130419=_0x104c07,_0x7c323=_0x34dc2f[_0x130419(0x151)][_0x130419(0x17b)]('|');let _0x5c5338=0x0;while(!![]){switch(_0x7c323[_0x5c5338++]){case'0':assert[_0x130419(0x15e)]([0x1,0x2],{'href':_0x34dc2f[_0x130419(0x175)]});continue;case'1':assert[_0x130419(0x15e)]([0x0,0x1],{});continue;case'2':await _0x34dc2f[_0x130419(0x17c)](clickToolbarButton,{'attribute':_0x34dc2f[_0x130419(0x136)]});continue;case'3':await typeInToolbarDialog(_0x130419(0x13f),{'attribute':_0x130419(0x148)});continue;case'4':await moveCursor(_0x34dc2f[_0x130419(0x14a)]);continue;case'5':assert['ok'](_0x34dc2f['zZtTB'](isToolbarDialogActive,{'attribute':_0x130419(0x148)}));continue;case'6':await _0x34dc2f[_0x130419(0x138)](expandSelection,_0x34dc2f[_0x130419(0x14a)]);continue;case'7':assert['textAttributes']([0x2,0x3],{});continue;case'8':await typeCharacters(_0x130419(0x167));continue;}break;}}),_0x34dc2f[_0x104c07(0x14f)](test,_0x34dc2f[_0x104c07(0x159)],async()=>{const _0x14b204=_0x104c07;await typeCharacters('a'),await _0x34dc2f[_0x14b204(0x12c)](clickToolbarButton,{'attribute':_0x14b204(0x148)}),assert['ok'](_0x34dc2f['gBxam'](isToolbarDialogActive,{'attribute':_0x34dc2f[_0x14b204(0x136)]})),await typeInToolbarDialog(_0x14b204(0x13f),{'attribute':'href'}),assert[_0x14b204(0x15e)]([0x0,0x1],{}),assert[_0x14b204(0x15e)]([0x1,0x13],{'href':'http://example.com'}),expectDocument(_0x14b204(0x166));}),test(_0x104c07(0x144),async()=>{const _0x2acad2=_0x104c07;insertString('a');const _0x38fdce=_0x5a6d48[_0x2acad2(0x143)]('bc',{'href':_0x2acad2(0x13f)});_0x34dc2f[_0x2acad2(0x134)](insertText,_0x38fdce),_0x34dc2f['imccF'](insertString,'d'),await moveCursor({'direction':_0x34dc2f['amlIN'],'times':0x2}),await clickToolbarButton({'attribute':'href'}),assert['ok'](isToolbarDialogActive({'attribute':_0x34dc2f[_0x2acad2(0x136)]})),assert[_0x2acad2(0x128)]({'index':0x0,'offset':0x1},{'index':0x0,'offset':0x3}),await typeInToolbarDialog(_0x34dc2f[_0x2acad2(0x173)],{'attribute':_0x34dc2f[_0x2acad2(0x136)]}),assert[_0x2acad2(0x15e)]([0x0,0x1],{}),assert[_0x2acad2(0x15e)]([0x1,0x3],{'href':_0x2acad2(0x168)}),assert[_0x2acad2(0x15e)]([0x3,0x4],{});}),test(_0x34dc2f['kvSiB'],async()=>{const _0x3bd97a=_0x104c07,_0x3744c1=_0x5a6d48['textForStringWithAttributes']('ab',{'href':_0x3bd97a(0x13f)});insertText(_0x3744c1),assert['textAttributes']([0x0,0x2],{'href':_0x34dc2f[_0x3bd97a(0x175)]}),await expandSelection({'direction':_0x34dc2f[_0x3bd97a(0x14a)],'times':0x2}),await clickToolbarButton({'attribute':_0x34dc2f[_0x3bd97a(0x136)]}),await _0x34dc2f[_0x3bd97a(0x15d)](clickToolbarDialogButton,{'method':'removeAttribute'}),await assert[_0x3bd97a(0x15e)]([0x0,0x2],{});}),_0x34dc2f[_0x104c07(0x14f)](test,_0x34dc2f['vSYqL'],async()=>{const _0x2e50d8=_0x104c07,_0x101b96=fixtures[_0x2e50d8(0x16b)][_0x2e50d8(0x176)][_0x2e50d8(0x169)](0x0)[_0x2e50d8(0x17a)]();_0x34dc2f['ieFSJ'](insertText,_0x101b96),await typeCharacters('a'),assert[_0x2e50d8(0x158)](isToolbarButtonDisabled({'attribute':_0x2e50d8(0x154)})),await _0x34dc2f[_0x2e50d8(0x177)](expandSelection,_0x2e50d8(0x184)),assert[_0x2e50d8(0x158)](_0x34dc2f[_0x2e50d8(0x15a)](isToolbarButtonDisabled,{'attribute':_0x34dc2f[_0x2e50d8(0x132)]})),await _0x34dc2f['elhtl'](expandSelection,_0x2e50d8(0x184)),assert['ok'](isToolbarButtonDisabled({'attribute':_0x34dc2f[_0x2e50d8(0x132)]}));}),test(_0x104c07(0x150),async()=>{const _0x505761=_0x104c07,_0x149cbb=fixtures[_0x34dc2f[_0x505761(0x156)]]['document']['getBlockAtIndex'](0x0)['getTextWithoutBlockBreak']();insertText(_0x149cbb),await clickToolbarButton({'attribute':'href'}),assert['ok'](isToolbarDialogActive({'attribute':'href'})),await clickElement(getEditorElement()['querySelector'](_0x505761(0x16a))),assert[_0x505761(0x158)](isToolbarDialogActive({'attribute':_0x34dc2f[_0x505761(0x136)]})),assert['ok'](isToolbarButtonDisabled({'attribute':_0x505761(0x148)}));}),test(_0x34dc2f[_0x104c07(0x12e)],async()=>{const _0x451e59=_0x104c07,_0x5e9a61=fixtures[_0x34dc2f['EOIYE']][_0x451e59(0x176)]['getBlockAtIndex'](0x0)[_0x451e59(0x17a)]();_0x34dc2f[_0x451e59(0x138)](insertText,_0x5e9a61),await _0x34dc2f[_0x451e59(0x161)](expandSelection,_0x451e59(0x184)),assert['ok'](_0x34dc2f['imccF'](isToolbarButtonDisabled,{'attribute':_0x34dc2f[_0x451e59(0x132)]})),await typeCharacters('a'),assert[_0x451e59(0x15e)]([0x0,0x1],{}),_0x34dc2f[_0x451e59(0x183)](expectDocument,'a\x0a');}),test(_0x34dc2f[_0x104c07(0x152)],async()=>{const _0x27854a=_0x104c07,_0xcb9986=fixtures[_0x27854a(0x16b)]['document'][_0x27854a(0x169)](0x0)[_0x27854a(0x17a)]();insertText(_0xcb9986),await typeCharacters('a'),assert[_0x27854a(0x158)](_0x34dc2f['elhtl'](isToolbarButtonDisabled,{'attribute':'href'})),await expandSelection(_0x34dc2f[_0x27854a(0x14a)]),assert[_0x27854a(0x158)](_0x34dc2f['IhhsJ'](isToolbarButtonDisabled,{'attribute':_0x27854a(0x148)})),await expandSelection(_0x34dc2f[_0x27854a(0x14a)]),assert['ok'](isToolbarButtonDisabled({'attribute':_0x34dc2f[_0x27854a(0x136)]}));}),_0x34dc2f[_0x104c07(0x160)](test,_0x34dc2f[_0x104c07(0x146)],async()=>{const _0x3a6347=_0x104c07,_0xa651e7=_0x34dc2f[_0x3a6347(0x13a)][_0x3a6347(0x17b)]('|');let _0x42c43e=0x0;while(!![]){switch(_0xa651e7[_0x42c43e++]){case'0':await typeCharacters('c');continue;case'1':assert['notOk'](_0x34dc2f['eRljz'](isToolbarButtonActive,{'attribute':_0x34dc2f['JSiWK']}));continue;case'2':await _0x34dc2f[_0x3a6347(0x180)](typeInToolbarDialog,'http://example.com',{'attribute':_0x34dc2f['JSiWK']});continue;case'3':await moveCursor(_0x34dc2f[_0x3a6347(0x14a)]);continue;case'4':await collapseSelection(_0x34dc2f['EthrG']);continue;case'5':assert[_0x3a6347(0x128)]({'index':0x0,'offset':0x2});continue;case'6':await expandSelection({'direction':_0x34dc2f[_0x3a6347(0x14a)],'times':0x2});continue;case'7':await moveCursor(_0x34dc2f[_0x3a6347(0x14a)]);continue;case'8':await _0x34dc2f[_0x3a6347(0x15d)](clickToolbarButton,{'attribute':'href'});continue;case'9':assert['ok'](isToolbarButtonActive({'attribute':_0x34dc2f['JSiWK']}));continue;case'10':assert['textAttributes']([0x0,0x2],{'href':_0x34dc2f['IepgP']});continue;case'11':assert[_0x3a6347(0x15e)]([0x2,0x3],{});continue;case'12':await _0x34dc2f[_0x3a6347(0x15f)](typeCharacters,'ab');continue;}break;}}),_0x34dc2f[_0x104c07(0x14f)](test,'applying\x20formatting\x20and\x20then\x20typing',async()=>{const _0x46e245=_0x104c07;await typeCharacters('a'),await clickToolbarButton({'attribute':_0x34dc2f['zaZnH']}),await typeCharacters(_0x46e245(0x131)),await clickToolbarButton({'attribute':_0x34dc2f['zaZnH']}),await typeCharacters('e'),assert[_0x46e245(0x15e)]([0x0,0x1],{}),assert[_0x46e245(0x15e)]([0x1,0x4],{'bold':!![]}),assert[_0x46e245(0x15e)]([0x4,0x5],{});}),_0x34dc2f['IbHWc'](test,_0x34dc2f['qeekr'],async()=>{const _0x17b1b3=_0x104c07,_0x4b1725='8|4|5|2|1|7|10|9|6|3|0'[_0x17b1b3(0x17b)]('|');let _0x9f34=0x0;while(!![]){switch(_0x4b1725[_0x9f34++]){case'0':assert[_0x17b1b3(0x15e)]([0x3,0x4],{'blockBreak':!![]});continue;case'1':assert['ok'](_0x34dc2f[_0x17b1b3(0x134)](isToolbarButtonActive,{'attribute':_0x17b1b3(0x154)}));continue;case'2':await clickToolbarButton({'attribute':_0x17b1b3(0x154)});continue;case'3':assert[_0x17b1b3(0x15e)]([0x0,0x3],{});continue;case'4':await _0x34dc2f['imccF'](moveCursor,_0x34dc2f[_0x17b1b3(0x14a)]);continue;case'5':assert[_0x17b1b3(0x158)](isToolbarButtonActive({'attribute':_0x17b1b3(0x154)}));continue;case'6':assert[_0x17b1b3(0x158)](_0x34dc2f[_0x17b1b3(0x181)](isToolbarButtonActive,{'attribute':_0x34dc2f[_0x17b1b3(0x132)]}));continue;case'7':await moveCursor(_0x34dc2f[_0x17b1b3(0x12d)]);continue;case'8':await _0x34dc2f[_0x17b1b3(0x14c)](typeCharacters,_0x17b1b3(0x167));continue;case'9':await _0x34dc2f[_0x17b1b3(0x170)](moveCursor,'left');continue;case'10':assert[_0x17b1b3(0x158)](_0x34dc2f[_0x17b1b3(0x140)](isToolbarButtonActive,{'attribute':_0x17b1b3(0x154)}));continue;}break;}}),_0x34dc2f['NYgCw'](test,_0x34dc2f[_0x104c07(0x165)],async()=>{const _0xc7bf0b=_0x104c07,_0x26fe4e=makeElement(_0xc7bf0b(0x17e),{'type':_0xc7bf0b(0x12b)});document['body'][_0xc7bf0b(0x178)](_0x26fe4e),_0x26fe4e[_0xc7bf0b(0x145)](),await clickToolbarButton({'attribute':_0x34dc2f[_0xc7bf0b(0x132)]}),await typeCharacters('a'),assert[_0xc7bf0b(0x15e)]([0x0,0x1],{'bold':!![]}),document[_0xc7bf0b(0x13b)][_0xc7bf0b(0x162)](_0x26fe4e);}),_0x34dc2f[_0x104c07(0x14b)](test,_0x34dc2f[_0x104c07(0x129)],async()=>{const _0xb55996=_0x104c07;await clickToolbarButton({'attribute':_0x34dc2f[_0xb55996(0x132)]}),await typeCharacters('ab'),await clickToolbarButton({'attribute':_0xb55996(0x154)}),await _0x34dc2f[_0xb55996(0x14c)](typeCharacters,'c'),assert[_0xb55996(0x158)](isToolbarButtonActive({'attribute':_0xb55996(0x154)})),await _0x34dc2f[_0xb55996(0x147)](moveCursor,_0xb55996(0x184)),assert['ok'](_0x34dc2f[_0xb55996(0x17c)](isToolbarButtonActive,{'attribute':_0x34dc2f[_0xb55996(0x132)]})),await _0x34dc2f['RRWxL'](moveCursor,_0xb55996(0x184)),assert['ok'](isToolbarButtonActive({'attribute':_0x34dc2f['zaZnH']})),await typeCharacters('Z'),assert['ok'](isToolbarButtonActive({'attribute':_0x34dc2f[_0xb55996(0x132)]})),assert[_0xb55996(0x15e)]([0x0,0x3],{'bold':!![]}),assert['textAttributes']([0x3,0x4],{}),assert['textAttributes']([0x4,0x5],{'blockBreak':!![]}),await _0x34dc2f['bMObz'](moveCursor,_0x34dc2f['EthrG']),assert['ok'](isToolbarButtonActive({'attribute':_0xb55996(0x154)})),await moveCursor(_0x34dc2f[_0xb55996(0x12d)]),assert[_0xb55996(0x158)](_0x34dc2f['zZtTB'](isToolbarButtonActive,{'attribute':_0x34dc2f[_0xb55996(0x132)]}));}),testIf(_0x34dc2f['WBfov'](_0x4ae772[_0x104c07(0x17e)]['getLevel'](),0x0),_0x34dc2f[_0x104c07(0x15b)],async()=>{const _0x3d9286=_0x104c07;await _0x34dc2f[_0x3d9286(0x133)](typeToolbarKeyCommand,{'attribute':_0x34dc2f['zaZnH']}),assert['ok'](_0x34dc2f[_0x3d9286(0x140)](isToolbarButtonActive,{'attribute':_0x34dc2f[_0x3d9286(0x132)]}));}),test('backspacing\x20newline\x20after\x20text',async()=>{const _0x328615=_0x104c07;await _0x34dc2f['elhtl'](typeCharacters,'a\x0a'),await _0x34dc2f[_0x328615(0x177)](pressKey,_0x34dc2f['hKjCL']),expectDocument('a\x0a');});});