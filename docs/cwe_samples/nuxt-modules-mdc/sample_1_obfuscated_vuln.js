function _0x26ae(_0x3890c6,_0x252ac8){const _0x146bc2=_0x146b();return _0x26ae=function(_0x26ae94,_0x35130f){_0x26ae94=_0x26ae94-0x102;let _0x592ba6=_0x146bc2[_0x26ae94];return _0x592ba6;},_0x26ae(_0x3890c6,_0x252ac8);}const _0x12777d=_0x26ae;(function(_0x3c6ef8,_0x2400bf){const _0x498697=_0x26ae,_0x359ce7=_0x3c6ef8();while(!![]){try{const _0x293039=parseInt(_0x498697(0x12a))/0x1+parseInt(_0x498697(0x109))/0x2*(parseInt(_0x498697(0x13d))/0x3)+-parseInt(_0x498697(0x126))/0x4*(-parseInt(_0x498697(0x14b))/0x5)+-parseInt(_0x498697(0x135))/0x6*(parseInt(_0x498697(0x11b))/0x7)+parseInt(_0x498697(0x14a))/0x8*(parseInt(_0x498697(0x116))/0x9)+-parseInt(_0x498697(0x157))/0xa*(-parseInt(_0x498697(0x156))/0xb)+-parseInt(_0x498697(0x153))/0xc;if(_0x293039===_0x2400bf)break;else _0x359ce7['push'](_0x359ce7['shift']());}catch(_0x2abea0){_0x359ce7['push'](_0x359ce7['shift']());}}}(_0x146b,0x6ff18));const should=require('should'),chalk=require(_0x12777d(0x10c)),{AttributeIds,VariableIds,OPCUAClient,resolveNodeId,TimestampsToReturn,MonitoringMode}=require(_0x12777d(0x122)),{make_debugLog,checkDebugFlag}=require(_0x12777d(0x13a)),{perform_operation_on_subscription_async}=require(_0x12777d(0x102)),{pause}=require('../discovery/_helper');function f(_0x2c87e2){const _0x574e49=_0x12777d,_0x4fb031={'FJXbk':function(_0x5b5ec5,_0x11343b){return _0x5b5ec5+_0x11343b;},'ZDNGt':_0x574e49(0x110),'gxqZp':'**$1**','DexCp':function(_0x35a2de,_0x572177){return _0x35a2de(_0x572177);}};return function(_0x106aaf){const _0x4cf98a=_0x574e49;return console[_0x4cf98a(0x151)](_0x4fb031[_0x4cf98a(0x131)](_0x4fb031[_0x4cf98a(0x111)],_0x2c87e2[_0x4cf98a(0x14e)]['replace'](/_/g,'\x20')['replace'](/(given|when|then)/,chalk[_0x4cf98a(0x119)](_0x4fb031[_0x4cf98a(0x139)])))),_0x4fb031[_0x4cf98a(0x14f)](_0x2c87e2,_0x106aaf);};}const debugLog=make_debugLog(_0x12777d(0x11d)),errorLog=make_debugLog(_0x12777d(0x11d)),doDebug=checkDebugFlag('TEST');let sessionCounter=0x0;async function connectAndCreateSession(_0x4404ed){const _0x502f43=_0x12777d,_0x2f66d6={'bFEeP':function(_0xe3d47,_0x1b71d0){return _0xe3d47(_0x1b71d0);},'XABdJ':_0x502f43(0x14d)};await _0x2f66d6[_0x502f43(0x148)](pause,0x64);const _0x492d18=OPCUAClient['create']({'name':_0x2f66d6[_0x502f43(0x155)]+sessionCounter++});await _0x492d18[_0x502f43(0x10b)](_0x4404ed);const _0xfeff64=await _0x492d18[_0x502f43(0x124)]();return{'client':_0x492d18,'session':_0xfeff64};}async function closeSessionAndDisconnect({client:_0x3b6d1a,session:_0x1b94da}){const _0x4e3893=_0x12777d,_0x9ced37={'mwLry':function(_0x480453,_0x9318d5){return _0x480453(_0x9318d5);}};await _0x9ced37[_0x4e3893(0x113)](pause,0x64),await _0x1b94da['close'](),await _0x3b6d1a['disconnect']();}const currentSessionCountNodeId=resolveNodeId(VariableIds[_0x12777d(0x104)]),cumulatedSessionCountNodeId=resolveNodeId(VariableIds[_0x12777d(0x12e)]);function _0x146b(){const _0x5c377e=['Qhomb','23947RRtMco','gWdSS','TEST','yNvpn','GMRXr','mhzxo','**$1**','node-opcua','replace','createSession','FxPpn','14316wphvwu','vVNTy','exports','endpointUrl','864106xYnZLa','new\x20currentSessionCount=','Never\x20received\x20','Value','Server_ServerDiagnostics_ServerDiagnosticsSummary_CumulatedSessionCount','TGxWF','JkuZm','FJXbk','kRjvS','Reporting','Never\x20received\x20changedx\x20for\x20id','924HBPTpA','beEMd','push','UKcPc','gxqZp','node-opcua-debug','kYtOk','fzcWR','1104246MJZRDp','ugEhK','value','PxAuz','WNacA','test\x20that\x20current\x20SessionCount\x20increments\x20and\x20decrements\x20appropriately','installMonitoredItem','rolGv','connecting','changed','bmKLE','bFEeP','FLvhy','240kYyFHE','755aLNQPu','all','client','name','DexCp','ENeuL','log','disconnecting','18377016EoKKEj','CTynD','XABdJ','1463XSDQNy','15110jYSmYk','Jorjm','../../test_helpers/perform_operation_on_client_session','once','Server_ServerDiagnostics_ServerDiagnosticsSummary_CurrentSessionCount','eql','cbVYA','should','Both','4Zudubi','read','connect','chalk','lwIzD','YzQlI','toString','\x20\x20\x20\x20\x20\x20\x20*\x20','ZDNGt','iVKLm','mwLry','mXFOz','QoVXa','52533cxKFQF','create','zurkH','green'];_0x146b=function(){return _0x5c377e;};return _0x146b();}async function installMonitoredItem(_0x5c4623,_0x1d40c6){const _0x1e8f69=_0x12777d,_0x3cbcb1={'Qhomb':'\x20\x20\x20\x20\x20\x20\x20*\x20','QoVXa':_0x1e8f69(0x121),'DlNbT':_0x1e8f69(0x136),'mhzxo':'Never\x20received\x20changedx\x20for\x20id','YlEuc':_0x1e8f69(0x150),'fMPcx':function(_0x503a1c,_0x55a0ee,_0x3b51db){return _0x503a1c(_0x55a0ee,_0x3b51db);},'lwIzD':_0x1e8f69(0x146),'cbVYA':function(_0x3d057a,_0x1430b6,_0x4f8039){return _0x3d057a(_0x1430b6,_0x4f8039);},'zurkH':_0x1e8f69(0x143)};_0x3cbcb1[_0x1e8f69(0x106)](debugLog,_0x3cbcb1[_0x1e8f69(0x118)],_0x1d40c6[_0x1e8f69(0x10f)]());const _0x1e4651=await _0x5c4623['monitor']({'nodeId':_0x1d40c6,'attributeId':AttributeIds['Value']},{'samplingInterval':0x0,'discardOldest':!![],'queueSize':0xa},TimestampsToReturn[_0x1e8f69(0x108)],MonitoringMode[_0x1e8f69(0x133)]),_0xba489f=[];return _0x1e4651['on'](_0x3cbcb1['lwIzD'],function(_0x1c749d){const _0x1ca016=_0x1e8f69;_0xba489f[_0x1ca016(0x137)](_0x1c749d[_0x1ca016(0x13f)][_0x1ca016(0x13f)]),debugLog('change\x20=',_0xba489f);}),await new Promise((_0x32f7a7,_0x23c064)=>{const _0x2169eb=_0x1e8f69,_0x235652={'yXWWC':function(_0xf193f,_0x153a33){return _0xf193f+_0x153a33;},'GiThL':_0x3cbcb1[_0x2169eb(0x11a)],'iVKLm':_0x3cbcb1[_0x2169eb(0x115)],'UsizG':_0x3cbcb1['DlNbT'],'PxAuz':function(_0x2abe99,_0x5b1185){return _0x2abe99+_0x5b1185;},'mXFOz':_0x3cbcb1[_0x2169eb(0x120)],'TGxWF':function(_0xfedea1,_0xd15d9d,_0x3c2a40){return _0xfedea1(_0xd15d9d,_0x3c2a40);},'FxPpn':_0x3cbcb1['YlEuc'],'aNZfD':function(_0x1af6bc,_0x284a4b){return _0x1af6bc(_0x284a4b);},'YzQlI':function(_0x2e0f12,_0x9d23f){return _0x2e0f12(_0x9d23f);}},_0x539e55=_0x3cbcb1['fMPcx'](setTimeout,()=>{const _0x4f43ca=_0x2169eb;if(_0x4f43ca(0x136)!==_0x235652['UsizG']){const _0x17c9b9={'FLvhy':function(_0x94d562,_0xe170ba){return _0x235652['yXWWC'](_0x94d562,_0xe170ba);},'bmKLE':_0x235652['GiThL'],'DMjWd':_0x235652[_0x4f43ca(0x112)],'fzcWR':function(_0x36ab83,_0x1170f2){return _0x36ab83(_0x1170f2);}};return function(_0x3ba31f){const _0x1c43e2=_0x4f43ca;return _0x2fcac9['log'](_0x17c9b9[_0x1c43e2(0x149)](_0x17c9b9[_0x1c43e2(0x147)],_0x473f3a[_0x1c43e2(0x14e)]['replace'](/_/g,'\x20')[_0x1c43e2(0x123)](/(given|when|then)/,_0x39eb34['green'](_0x17c9b9['DMjWd'])))),_0x17c9b9[_0x1c43e2(0x13c)](_0x4e6f24,_0x3ba31f);};}else console[_0x4f43ca(0x151)](_0x1e4651),_0x23c064(new Error(_0x235652[_0x4f43ca(0x140)](_0x235652[_0x4f43ca(0x114)],_0x1d40c6[_0x4f43ca(0x10f)]())));},0x3a98);_0x1e4651['once'](_0x3cbcb1[_0x2169eb(0x10d)],function(_0x5668f4){const _0x523e64=_0x2169eb;if(_0x523e64(0x132)!==_0x235652[_0x523e64(0x125)])_0x235652['aNZfD'](clearTimeout,_0x539e55),_0x235652[_0x523e64(0x10e)](_0x32f7a7,[_0xba489f,_0x1e4651]);else{const _0x84dff5={'xoJWv':_0x235652[_0x523e64(0x114)],'vVNTy':function(_0x70f57,_0x256e12){return _0x70f57(_0x256e12);}},_0x5e1ff0=_0x235652[_0x523e64(0x12f)](_0x436cbc,()=>{const _0x5063e8=_0x523e64;_0xaf384c[_0x5063e8(0x151)](_0x50c4c2),_0x454f66(new _0x22067a(_0x84dff5['xoJWv']+_0x47083e[_0x5063e8(0x10f)]()));},0x3a98);_0x315189['once']('changed',function(_0x5e74f9){const _0x5a3350=_0x523e64;_0x84dff5[_0x5a3350(0x127)](_0x5c7dad,_0x5e1ff0),_0x16e889([_0x83c1,_0x17181e]);});}});});}async function installCurrentSessionCounter(_0x343572){const _0x557bed=_0x12777d,_0x472a0b={'kYtOk':function(_0x129693,_0x5e3997,_0x42c3fc){return _0x129693(_0x5e3997,_0x42c3fc);}};return await _0x472a0b[_0x557bed(0x13b)](installMonitoredItem,_0x343572,currentSessionCountNodeId);}async function installCumulatedSessionCounter(_0x4218ec){return await installMonitoredItem(_0x4218ec,cumulatedSessionCountNodeId);}async function waitSessionCountChange(_0x3046c4){const _0xd1de1d=_0x12777d,_0x2162f0={'tdTXM':_0xd1de1d(0x12b),'JkuZm':_0xd1de1d(0x12c)};return await new Promise((_0x1226b3,_0x1b7287)=>{const _0x47522f=_0xd1de1d,_0x134b84={'gWdSS':function(_0x8de114,_0x5a7185){return _0x8de114(_0x5a7185);},'CTynD':_0x2162f0[_0x47522f(0x130)]},_0x2c4d2f=setTimeout(()=>{const _0x50c2b4=_0x47522f;console[_0x50c2b4(0x151)](_0x3046c4),_0x134b84[_0x50c2b4(0x11c)](_0x1b7287,new Error(_0x134b84[_0x50c2b4(0x154)],_0x3046c4[_0x50c2b4(0x10f)]()));},0x3a98);_0x3046c4[_0x47522f(0x103)](_0x47522f(0x146),function(_0x1f4413){const _0xd4cf1c=_0x47522f;clearTimeout(_0x2c4d2f);const _0x4623e7=_0x1f4413['value'][_0xd4cf1c(0x13f)];debugLog(_0x2162f0['tdTXM'],_0x1f4413[_0xd4cf1c(0x10f)]()),_0x1226b3(_0x4623e7);});});}module[_0x12777d(0x128)]=function(_0x195e9e){const _0x12f486=_0x12777d,_0x53edf2={'aJoHP':function(_0x4183d1){return _0x4183d1();},'yNvpn':function(_0x39a5ea,_0x26078d){return _0x39a5ea+_0x26078d;},'GMRXr':_0x12f486(0x142)};describe('Testing\x20bug\x20#445\x20-\x20server.serverDiagnosticsSummary.currentSessionCount',function(){const _0x51319d=_0x12f486;it(_0x53edf2[_0x51319d(0x11f)],async()=>{const _0x436608=_0x51319d,_0x5ecfcf={'ugEhK':function(_0xfaa9ff,_0x6ac2bd){return _0xfaa9ff(_0x6ac2bd);},'jjzUV':'Jorjm','rolGv':function(_0x44396d){return _0x53edf2['aJoHP'](_0x44396d);},'WNacA':function(_0xb44cda,_0x1031aa){const _0x5d04c9=_0x26ae;return _0x53edf2[_0x5d04c9(0x11e)](_0xb44cda,_0x1031aa);},'UKcPc':function(_0x44f604,_0x1a6a14){return _0x53edf2['yNvpn'](_0x44f604,_0x1a6a14);},'xrWzt':function(_0xfca34d,_0x56cf73){return _0xfca34d+_0x56cf73;}},_0x584bfb=_0x195e9e[_0x436608(0x129)],_0x5151f5=OPCUAClient[_0x436608(0x117)]({});await perform_operation_on_subscription_async(_0x5151f5,_0x584bfb,async(_0x39af05,_0x1a3b43)=>{const _0x1bcc50=_0x436608,[_0x4848a6,_0x47f6c1]=await _0x5ecfcf[_0x1bcc50(0x13e)](installCurrentSessionCounter,_0x1a3b43),[_0x226410]=await _0x5ecfcf[_0x1bcc50(0x13e)](installCumulatedSessionCounter,_0x1a3b43);let _0x205667=(await _0x39af05[_0x1bcc50(0x10a)]({'nodeId':currentSessionCountNodeId,'attributeId':AttributeIds[_0x1bcc50(0x12d)]}))[_0x1bcc50(0x13f)][_0x1bcc50(0x13f)];async function _0x5621db(){const _0x532db0=_0x1bcc50;debugLog(_0x532db0(0x145),_0x39af05['name']);const _0x42c475=[_0x5ecfcf[_0x532db0(0x13e)](waitSessionCountChange,_0x47f6c1),connectAndCreateSession(_0x584bfb)];return await Promise[_0x532db0(0x14c)](_0x42c475);}async function _0x326dff({client:_0x442499,session:_0x32b36d}){const _0x7e506=_0x1bcc50;if(_0x5ecfcf['jjzUV']!==_0x7e506(0x158))_0x3548a6['log'](_0x31cd2b),_0x92fe39(new _0x26a623(_0x7e506(0x134)+_0x483836['toString']()));else{debugLog(_0x7e506(0x152),_0x32b36d[_0x7e506(0x14e)]);const _0x33a04b=[_0x5ecfcf[_0x7e506(0x13e)](waitSessionCountChange,_0x47f6c1),_0x5ecfcf[_0x7e506(0x13e)](closeSessionAndDisconnect,{'client':_0x442499,'session':_0x32b36d})];return await Promise[_0x7e506(0x14c)](_0x33a04b);}}const [_0x43bbf9,_0x2dcf3c]=await _0x5ecfcf[_0x1bcc50(0x144)](_0x5621db),[_0x3082ef,_0x191aab]=await _0x5621db(),[_0x5e4d97]=await _0x326dff(_0x2dcf3c),[_0x2a40d6]=await _0x326dff(_0x191aab);_0x43bbf9[_0x1bcc50(0x107)][_0x1bcc50(0x105)](_0x5ecfcf[_0x1bcc50(0x141)](_0x205667,0x1)),_0x3082ef[_0x1bcc50(0x107)][_0x1bcc50(0x105)](_0x205667+0x2),_0x5e4d97['should'][_0x1bcc50(0x105)](_0x5ecfcf[_0x1bcc50(0x141)](_0x205667,0x1)),_0x2a40d6[_0x1bcc50(0x107)][_0x1bcc50(0x105)](_0x5ecfcf[_0x1bcc50(0x138)](_0x205667,0x0));const _0x92f500=_0x226410[0x0];_0x226410['should'][_0x1bcc50(0x105)]([_0x92f500,_0x5ecfcf['xrWzt'](_0x92f500,0x1),_0x92f500+0x2]);const _0x21d15b=_0x205667-0x1;_0x4848a6['should'][_0x1bcc50(0x105)]([_0x21d15b+0x1,_0x21d15b+0x2,_0x21d15b+0x3,_0x21d15b+0x2,_0x21d15b+0x1]);});});});};