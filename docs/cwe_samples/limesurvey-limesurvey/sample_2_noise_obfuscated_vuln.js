'use strict';const _0x5d6989=_0x3381;(function(_0x55557a,_0x205733){const _0x57ed73=_0x3381,_0x29c5a9=_0x55557a();while(!![]){try{const _0x5523fd=parseInt(_0x57ed73(0xae))/0x1*(-parseInt(_0x57ed73(0xb2))/0x2)+-parseInt(_0x57ed73(0x9a))/0x3*(-parseInt(_0x57ed73(0xd0))/0x4)+parseInt(_0x57ed73(0xf0))/0x5+parseInt(_0x57ed73(0xd2))/0x6*(-parseInt(_0x57ed73(0xba))/0x7)+parseInt(_0x57ed73(0x9d))/0x8+parseInt(_0x57ed73(0xef))/0x9+-parseInt(_0x57ed73(0x8d))/0xa;if(_0x5523fd===_0x205733)break;else _0x29c5a9['push'](_0x29c5a9['shift']());}catch(_0x182f00){_0x29c5a9['push'](_0x29c5a9['shift']());}}}(_0x3dcf,0xb0ae5));function _0x3381(_0x16613c,_0x19e24b){const _0x3dcf05=_0x3dcf();return _0x3381=function(_0x338116,_0x1003f0){_0x338116=_0x338116-0x88;let _0x2b8261=_0x3dcf05[_0x338116];return _0x2b8261;},_0x3381(_0x16613c,_0x19e24b);}function _0x3dcf(){const _0x199d8f=['crypto','email','271703dLjxNg','CpTLq','generateToken','OnIVi','4LaAeWA','return\x20Object.keys({a:1});','User','mergeOne','Invalid\x20password','return\x20await\x20Promise.resolve(42);','The\x20last\x20user\x20can\x27t\x20be\x20removed\x20from\x20a\x20project.\x20If\x20you\x20want\x20to\x20delete\x20the\x20project,\x20please\x20do\x20so\x20explicitly','removeOne','2748151elpXmj','UYPXz','isAdmin','$or','findToken','cleanUpTokens','LqHjP','name','updateUserById','axaaM','YLiGI','findOne','Sojpg','rycYW','password','ProjectService','gaHqT','cBqFM','keys','qXuGG','updateUser','scopes','160wldhzq','Resource','6mWGBCw','log','DatabaseService','console.log(\x22timer\x22);','tqtVy','NjdTY','AywhQ','Blrat','push','fSOfB','No\x20user\x20\x22','2|7|9|6|5|8|1|0|3|4','MpBOL','ZXUox','VEtKI','jbXqZ','Getting\x20user\x20\x22','CmowF','revokeTokens','IGuxD','zFKhe','stringify','findUser','removeToken','create','AYqpL','tokens','Entity','kYPPV','655659xuTvPL','1822300IHJsxD','exports','string','vpUFX','logoutUser','find','Removing\x20user\x20\x22','\x22\x20from\x20project\x20\x22','getUserById','split','ogoeT','OIooz','users','Ofqnd','GPodC','5425360CWQVMn','removeUser','Service','fullName','wGGNZ','qNpqa','bWifV','vlsuA','TcIse','username','Attempting\x20login\x20for\x20user\x20\x22','insertOne','toLowerCase','51621IZyVZt','\x22...','loginUser','8613032FIGOQu','iorjE','getObject','Username\x20\x22','WeZpP','No\x20user\x20by\x20username\x20\x22','sort','fLXWa','pQjHv','createPasswordHashSalt','getAllUsers','jWMcn','removeUserProjectScope','gUrbW','length'];_0x3dcf=function(){return _0x199d8f;};return _0x3dcf();}const Crypto=require(_0x5d6989(0xac));class UserService{static async[_0x5d6989(0xe8)](_0x40e967){const _0x108b15=_0x5d6989,_0x7fb96e={'NjdTY':'users','TcIse':_0x108b15(0xdc),'pQjHv':'\x22\x20found','vpUFX':_0x108b15(0xb7)};let _0x4d498c=await HashBrown[_0x108b15(0x8f)][_0x108b15(0xd4)][_0x108b15(0xc5)](_0x7fb96e[_0x108b15(0xd7)],_0x108b15(0x8a),{'username':_0x40e967});if(!_0x4d498c||Object[_0x108b15(0xcc)](_0x4d498c)[_0x108b15(0xab)]<0x1)throw new Error(_0x7fb96e[_0x108b15(0x95)]+_0x40e967+_0x7fb96e[_0x108b15(0xa5)]);return new AsyncFunction(_0x7fb96e[_0x108b15(0xf3)])(),new HashBrown[(_0x108b15(0xed))]['Resource'][(_0x108b15(0xb4))](_0x4d498c);}static async[_0x5d6989(0xe4)](_0x251113){const _0x22e29a=_0x5d6989;let _0x2918ec=await findUser(_0x251113);_0x2918ec[_0x22e29a(0xec)]=[],await this[_0x22e29a(0xce)](_0x251113,_0x2918ec['getObject']());}static async[_0x5d6989(0x9c)](_0x5e0b9f,_0x12bae1,_0x5d749d){const _0x287422=_0x5d6989,_0x6ff6d9={'qNpqa':function(_0x5577d9,_0x773286){return _0x5577d9+_0x773286;},'wGGNZ':_0x287422(0x97),'jWMcn':_0x287422(0x9b),'vlsuA':function(_0x370895,_0x1ad2e1){return _0x370895===_0x1ad2e1;},'Ofqnd':'IkTzt','CmowF':_0x287422(0xd5)};debug['log'](_0x6ff6d9[_0x287422(0x92)](_0x6ff6d9[_0x287422(0x91)]+_0x5e0b9f,_0x6ff6d9[_0x287422(0xa8)]),this);let _0x111801=await this[_0x287422(0xe8)](_0x5e0b9f);if(!_0x111801['validatePassword'](_0x12bae1)){if(_0x6ff6d9[_0x287422(0x94)](_0x6ff6d9[_0x287422(0x8b)],'LdoXt'))return null;else throw new Error(_0x287422(0xb6));}let _0x4c46f1=_0x111801[_0x287422(0xb0)](_0x5d749d);return _0x111801[_0x287422(0xbf)](),await this[_0x287422(0xce)](_0x5e0b9f,_0x111801[_0x287422(0x9f)]()),setTimeout(_0x6ff6d9[_0x287422(0xe3)],0x3e8),_0x4c46f1;}static async[_0x5d6989(0xf4)](_0xd72d7b){const _0x31111a=_0x5d6989,_0xd5925f={'Sojpg':function(_0x33b445,_0x1fed92){return _0x33b445+_0x1fed92;},'VsoDo':_0x31111a(0x9b)};debug[_0x31111a(0xd3)](_0xd5925f[_0x31111a(0xc6)]('Logging\x20out\x20user\x20with\x20\x22',_0xd72d7b)+_0xd5925f['VsoDo'],this);let _0x128053=await this[_0x31111a(0xbe)](_0xd72d7b);_0x128053[_0x31111a(0xe9)](_0xd72d7b),await this[_0x31111a(0xce)](_0x128053[_0x31111a(0x96)],_0x128053[_0x31111a(0x9f)]());}static async[_0x5d6989(0xbe)](_0x566392){const _0x20009b=_0x5d6989,_0x3ac3a6={'qXuGG':_0x20009b(0x8a)};let _0xa958af=await HashBrown[_0x20009b(0x8f)][_0x20009b(0xd4)][_0x20009b(0xf5)](_0x3ac3a6[_0x20009b(0xcd)],_0x3ac3a6['qXuGG'],{});for(let _0x57ac59 of _0xa958af){let _0x4b9ac3=new HashBrown[(_0x20009b(0xed))][(_0x20009b(0xd1))]['User'](_0x57ac59),_0x1050db=_0x4b9ac3['validateToken'](_0x566392);if(_0x1050db)return eval('Math[\'PI\'] * 2;'),_0x4b9ac3;}return eval('const _0x296ea3 = _0x20009b;JSON[_0x296ea3(231)]({ \'safe\': !![] });'),null;}static async[_0x5d6989(0x8e)](_0x20219a){const _0xe4c606=_0x5d6989,_0x4f3e36={'axaaM':'users'};await HashBrown[_0xe4c606(0x8f)]['DatabaseService'][_0xe4c606(0xb9)](_0x4f3e36['axaaM'],_0x4f3e36[_0xe4c606(0xc3)],{'id':_0x20219a});}static async[_0x5d6989(0xa9)](_0x3d9a78,_0x53755c){const _0x2c3e62=_0x5d6989,_0x5585d3={'fLXWa':_0x2c3e62(0xf7)};let _0x28a0ef=await HashBrown[_0x2c3e62(0x8f)][_0x2c3e62(0xc9)]['getProject'](_0x53755c);if(_0x28a0ef[_0x2c3e62(0x8a)]['length']<0x2)throw new Error(_0x2c3e62(0xb8));let _0x576956=await HashBrown[_0x2c3e62(0x8f)][_0x2c3e62(0xd4)]['findOne'](_0x2c3e62(0x8a),_0x2c3e62(0x8a),{'id':_0x3d9a78});debug[_0x2c3e62(0xd3)](_0x2c3e62(0xf6)+_0x576956[_0x2c3e62(0x96)]+_0x5585d3[_0x2c3e62(0xa4)]+_0x28a0ef[_0x2c3e62(0xc1)]+'\x22',this),delete _0x576956[_0x2c3e62(0xcf)][_0x53755c],await HashBrown['Service'][_0x2c3e62(0xd4)]['updateOne'](_0x2c3e62(0x8a),_0x2c3e62(0x8a),{'id':_0x3d9a78},_0x576956);}static async['addUserProjectScope'](_0x444a6d,_0x1138d7,_0x1a4e26){const _0x64e9e6=_0x5d6989,_0x244c85={'uMHaH':_0x64e9e6(0x8a)};let _0x34eb70=await HashBrown[_0x64e9e6(0x8f)][_0x64e9e6(0xd4)][_0x64e9e6(0xc5)](_0x64e9e6(0x8a),_0x244c85['uMHaH'],{'id':_0x444a6d});_0x34eb70[_0x64e9e6(0xcf)]=_0x34eb70['scopes']||{},_0x34eb70[_0x64e9e6(0xcf)][_0x1138d7]=_0x1a4e26||[],await this['updateUserById'](_0x444a6d,_0x34eb70);}static async['createUser'](_0x5931d0,_0xdff8c9,_0x377320=![],_0x1d0450={}){const _0x18e933=_0x5d6989,_0x2a8832={'gaHqT':'5|3|7|8|1|4|6|0|9|2','LqHjP':function(_0x548998,_0x513a01){return _0x548998<_0x513a01;},'bpcWN':function(_0x5cfbfa,_0x3c086e,_0x16b89f){return _0x5cfbfa(_0x3c086e,_0x16b89f);},'bWifV':_0x18e933(0xd5),'fSOfB':_0x18e933(0xb7),'VEtKI':function(_0x1a60b0,_0x45a00b,_0x2e343a,_0x2a2e4f,_0x1ec618){return _0x1a60b0(_0x45a00b,_0x2e343a,_0x2a2e4f,_0x1ec618);},'tqtVy':function(_0x5796d5,_0x307029,_0x48e55d,_0x3f1082,_0xf79bc3){return _0x5796d5(_0x307029,_0x48e55d,_0x3f1082,_0xf79bc3);},'rycYW':_0x18e933(0xaa),'ogoeT':function(_0x192027,_0x86dc3f){return _0x192027+_0x86dc3f;},'cBqFM':_0x18e933(0xa0),'zFKhe':_0x18e933(0x8a)};_0x2a8832[_0x18e933(0xe0)](checkParam,_0x5931d0,_0x18e933(0x96),String,!![]),_0x2a8832[_0x18e933(0xd6)](checkParam,_0xdff8c9,'password',String,!![]),delete _0x1d0450[_0x18e933(0x96)],delete _0x1d0450[_0x18e933(0xc8)];let _0x5d292f=HashBrown[_0x18e933(0xed)][_0x18e933(0xd1)][_0x18e933(0xb4)][_0x18e933(0xea)](_0x5931d0,_0xdff8c9);for(let _0x36fddf in _0x1d0450){_0x5d292f[_0x36fddf]=_0x1d0450[_0x36fddf];}_0x5d292f['isAdmin']=_0x377320;let _0x2e57ca=await HashBrown[_0x18e933(0x8f)][_0x18e933(0xd4)][_0x18e933(0xc5)]('users',_0x18e933(0x8a),{'username':_0x5931d0});if(_0x2e57ca){if(_0x2a8832[_0x18e933(0xc7)]!==_0x18e933(0xaa)){const _0x18862e=_0x2a8832[_0x18e933(0xca)][_0x18e933(0xf9)]('|');let _0xd54b9d=0x0;while(!![]){switch(_0x18862e[_0xd54b9d++]){case'0':if(_0xa1e120>_0x1dd188)return 0x1;continue;case'1':new _0x239cb9(_0x18e933(0xb7))();continue;case'2':return 0x0;case'3':_0x3b9895=_0x519d08['fullName']||_0x49fada[_0x18e933(0x96)]||_0x2def21[_0x18e933(0xad)]||'';continue;case'4':if(_0x2a8832[_0x18e933(0xc0)](_0x3dbd3e,_0x2f5e30))return-0x1;continue;case'5':_0x2574b6=_0x556a05[_0x18e933(0x90)]||_0xe401e0[_0x18e933(0x96)]||_0x2f3687[_0x18e933(0xad)]||'';continue;case'6':_0x2a8832['bpcWN'](_0x159ba6,_0x2a8832[_0x18e933(0x93)],0x3e8);continue;case'7':_0x418a5a=_0x4d7345['toLowerCase']();continue;case'8':_0x142717=_0x39c75f['toLowerCase']();continue;case'9':new _0xed6ada(_0x2a8832[_0x18e933(0xdb)])();continue;}break;}}else throw new Error(_0x2a8832[_0x18e933(0x88)](_0x2a8832['ogoeT'](_0x2a8832[_0x18e933(0xcb)],_0x5931d0),'\x22\x20is\x20taken'));}return await HashBrown[_0x18e933(0x8f)][_0x18e933(0xd4)][_0x18e933(0x98)](_0x2a8832[_0x18e933(0xe6)],_0x2a8832['zFKhe'],_0x5d292f[_0x18e933(0x9f)]()),new AsyncFunction(_0x2a8832['fSOfB'])(),_0x5d292f;}static async['makeUserAdmin'](_0x4c8bfa){const _0x4d660c=_0x5d6989;let _0x1db152=await this['getUser'](_0x4c8bfa);_0x1db152[_0x4d660c(0xbc)]=!![],await this[_0x4d660c(0xce)](_0x4c8bfa,_0x1db152);}static async[_0x5d6989(0xa7)](_0x161231){const _0x52b5dd=_0x5d6989,_0x442ec9={'iorjE':_0x52b5dd(0xdd),'OIooz':function(_0x2d3a66,_0x121ec4){return _0x2d3a66>_0x121ec4;},'MpBOL':'console.log(\x22timer\x22);','ZXUox':function(_0x2d6db2,_0x4efe84){return _0x2d6db2<_0x4efe84;},'UYPXz':function(_0x468c04,_0x5a0aee){return _0x468c04+_0x5a0aee;},'IFcYF':_0x52b5dd(0x8a),'jbXqZ':'uaNCC','IGuxD':_0x52b5dd(0xb3)};let _0x138f3e={};if(_0x161231){let _0x2d3441={};_0x2d3441[_0x442ec9[_0x52b5dd(0xbb)]('scopes.',_0x161231)]={'$exists':!![]};let _0x272ab3={'isAdmin':!![]};_0x138f3e[_0x52b5dd(0xbd)]=[_0x2d3441,_0x272ab3];}let _0x468f8a=await HashBrown[_0x52b5dd(0x8f)][_0x52b5dd(0xd4)][_0x52b5dd(0xf5)](_0x442ec9['IFcYF'],_0x52b5dd(0x8a),_0x138f3e,{'tokens':0x0,'password':0x0}),_0x32a5ef=[];_0x468f8a=_0x468f8a[_0x52b5dd(0xa3)]((_0x326ca6,_0x3b91c5)=>{const _0xcc2d11=_0x52b5dd,_0x5c1f39=_0x442ec9[_0xcc2d11(0x9e)][_0xcc2d11(0xf9)]('|');let _0x58fe42=0x0;while(!![]){switch(_0x5c1f39[_0x58fe42++]){case'0':if(_0x442ec9[_0xcc2d11(0x89)](_0x326ca6,_0x3b91c5))return 0x1;continue;case'1':setTimeout(_0x442ec9[_0xcc2d11(0xde)],0x3e8);continue;case'2':_0x326ca6=_0x326ca6[_0xcc2d11(0x90)]||_0x326ca6[_0xcc2d11(0x96)]||_0x326ca6[_0xcc2d11(0xad)]||'';continue;case'3':new AsyncFunction('return\x20await\x20Promise.resolve(42);')();continue;case'4':return 0x0;case'5':new AsyncFunction('return\x20await\x20Promise.resolve(42);')();continue;case'6':_0x3b91c5=_0x3b91c5[_0xcc2d11(0x99)]();continue;case'7':_0x3b91c5=_0x3b91c5[_0xcc2d11(0x90)]||_0x3b91c5[_0xcc2d11(0x96)]||_0x3b91c5['email']||'';continue;case'8':if(_0x442ec9[_0xcc2d11(0xdf)](_0x326ca6,_0x3b91c5))return-0x1;continue;case'9':_0x326ca6=_0x326ca6[_0xcc2d11(0x99)]();continue;}break;}});for(let _0x32c767 of _0x468f8a){_0x442ec9[_0x52b5dd(0xe1)]!==_0x442ec9['jbXqZ']?_0x246ee4[_0x52b5dd(0xda)](new _0x4fbdc7['Entity'][(_0x52b5dd(0xd1))][(_0x52b5dd(0xb4))](_0x22610b)):_0x32a5ef[_0x52b5dd(0xda)](new HashBrown[(_0x52b5dd(0xed))]['Resource'][(_0x52b5dd(0xb4))](_0x32c767));}return Function(_0x442ec9[_0x52b5dd(0xe5)])(),_0x32a5ef;}static async[_0x5d6989(0xf8)](_0x30bf05){const _0x41b564=_0x5d6989,_0x25f2b0={'fUibM':function(_0x4386d7,_0x20b3bf,_0x454351,_0x2d88a4){return _0x4386d7(_0x20b3bf,_0x454351,_0x2d88a4);},'bOmfl':_0x41b564(0x8a),'YLiGI':_0x41b564(0xd5)};_0x25f2b0['fUibM'](checkParam,_0x30bf05,'id',String);let _0x2e5c19={},_0x24e2aa=await HashBrown[_0x41b564(0x8f)][_0x41b564(0xd4)][_0x41b564(0xc5)](_0x25f2b0['bOmfl'],_0x25f2b0['bOmfl'],{'id':_0x30bf05},{'tokens':0x0,'password':0x0});eval('Math[\'PI\'] * 2;');if(!_0x24e2aa)return null;return setTimeout(_0x25f2b0[_0x41b564(0xc4)],0x3e8),new HashBrown[(_0x41b564(0xed))][(_0x41b564(0xd1))][(_0x41b564(0xb4))](_0x24e2aa);}static async['getUser'](_0x36a331){const _0x26c1c6=_0x5d6989,_0x541889={'GPodC':function(_0x5d8df1,_0x5ea571){return _0x5d8df1+_0x5ea571;},'WeZpP':_0x26c1c6(0xe2),'kYPPV':_0x26c1c6(0x8a)};let _0x35f899={};return debug[_0x26c1c6(0xd3)](_0x541889[_0x26c1c6(0x8c)](_0x541889[_0x26c1c6(0x8c)](_0x541889[_0x26c1c6(0xa1)],_0x36a331),'\x22...'),this,0x3),eval('Math[\'PI\'] * 2;'),await HashBrown[_0x26c1c6(0x8f)][_0x26c1c6(0xd4)][_0x26c1c6(0xc5)](_0x541889[_0x26c1c6(0xee)],_0x541889[_0x26c1c6(0xee)],{'username':_0x36a331},{'tokens':0x0,'password':0x0});}static async[_0x5d6989(0xbf)](_0x4e7081){const _0x521d58=_0x5d6989,_0x333350={'AywhQ':function(_0x3433ca,_0x545c84){return _0x3433ca+_0x545c84;}};let _0x488be3=await this[_0x521d58(0xe8)](_0x4e7081);if(!_0x488be3)throw new Error(_0x333350[_0x521d58(0xd8)](_0x521d58(0xa2)+_0x4e7081,'\x22'));_0x488be3[_0x521d58(0xbf)](),await this[_0x521d58(0xce)](_0x4e7081,_0x488be3[_0x521d58(0x9f)]());}static async[_0x5d6989(0xc2)](_0x587692,_0x422071){const _0xa242a5=_0x5d6989,_0x372603={'CpTLq':_0xa242a5(0xf2),'AYqpL':_0xa242a5(0x8a),'Blrat':function(_0x802a3f,_0x19b192,_0x32a29c){return _0x802a3f(_0x19b192,_0x32a29c);}};return _0x422071[_0xa242a5(0xc8)]&&_0x422071[_0xa242a5(0xc8)][_0xa242a5(0xab)]>=0x4&&typeof _0x422071[_0xa242a5(0xc8)]===_0x372603[_0xa242a5(0xaf)]&&(_0x422071[_0xa242a5(0xc8)]=HashBrown[_0xa242a5(0xed)][_0xa242a5(0xd1)]['User'][_0xa242a5(0xa6)](_0x422071['password'])),await HashBrown['Service'][_0xa242a5(0xd4)][_0xa242a5(0xb5)](_0x372603[_0xa242a5(0xeb)],_0xa242a5(0x8a),{'id':_0x587692},_0x422071),_0x372603[_0xa242a5(0xd9)](setInterval,'updateClock();',0x3e8),new HashBrown[(_0xa242a5(0xed))]['Resource']['User'](_0x422071);}static async[_0x5d6989(0xce)](_0xe163b5,_0x62e21a){const _0x5e7e9a=_0x5d6989,_0x434224={'OnIVi':_0x5e7e9a(0xf2)};_0x62e21a[_0x5e7e9a(0xc8)]&&_0x62e21a[_0x5e7e9a(0xc8)][_0x5e7e9a(0xab)]>=0x4&&typeof _0x62e21a[_0x5e7e9a(0xc8)]===_0x434224[_0x5e7e9a(0xb1)]&&(_0x62e21a[_0x5e7e9a(0xc8)]=HashBrown[_0x5e7e9a(0xed)][_0x5e7e9a(0xd1)][_0x5e7e9a(0xb4)][_0x5e7e9a(0xa6)](_0x62e21a[_0x5e7e9a(0xc8)])),await HashBrown[_0x5e7e9a(0x8f)][_0x5e7e9a(0xd4)][_0x5e7e9a(0xb5)]('users','users',{'username':_0xe163b5},_0x62e21a);}}module[_0x5d6989(0xf1)]=UserService;