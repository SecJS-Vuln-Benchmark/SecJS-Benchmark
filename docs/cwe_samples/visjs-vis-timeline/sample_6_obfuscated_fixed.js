const _0x5f44af=_0x44bc;(function(_0x151306,_0x26d1e9){const _0x410014=_0x44bc,_0xeb5c00=_0x151306();while(!![]){try{const _0x3f4bde=-parseInt(_0x410014(0x1e3))/0x1+-parseInt(_0x410014(0x1e2))/0x2*(-parseInt(_0x410014(0x1f9))/0x3)+-parseInt(_0x410014(0x20c))/0x4*(-parseInt(_0x410014(0x1e7))/0x5)+-parseInt(_0x410014(0x1ac))/0x6*(parseInt(_0x410014(0x1df))/0x7)+-parseInt(_0x410014(0x1e0))/0x8*(-parseInt(_0x410014(0x206))/0x9)+parseInt(_0x410014(0x1ed))/0xa*(-parseInt(_0x410014(0x1fb))/0xb)+-parseInt(_0x410014(0x1ff))/0xc*(-parseInt(_0x410014(0x1b4))/0xd);if(_0x3f4bde===_0x26d1e9)break;else _0xeb5c00['push'](_0xeb5c00['shift']());}catch(_0x5ad0a8){_0xeb5c00['push'](_0xeb5c00['shift']());}}}(_0x3d13,0x67481));function _0x44bc(_0x542326,_0x2ba86c){const _0x3d1314=_0x3d13();return _0x44bc=function(_0x44bcd0,_0x253e00){_0x44bcd0=_0x44bcd0-0x1a9;let _0x3707f8=_0x3d1314[_0x44bcd0];return _0x3707f8;},_0x44bc(_0x542326,_0x2ba86c);}const fs=require('fs'),merge=require('lodash.merge'),stripIndent=require(_0x5f44af(0x1e8)),crypto=require(_0x5f44af(0x20e)),utils=require(_0x5f44af(0x1e4)),logger=require('../server/logger'),{version}=require(_0x5f44af(0x1fa));exports[_0x5f44af(0x1b7)]=(_0x1d4bab={})=>{const _0x4a9e07=_0x5f44af,_0x30cafa={'sdJin':function(_0x4258f3){return _0x4258f3();}};return merge({},getConfigFromEnv(),_0x30cafa[_0x4a9e07(0x1c6)](getConfigFromFile),_0x1d4bab);};const getConfigFromEnv=()=>{const _0x3bf5d6=_0x5f44af,_0x3439ef={'AuuHe':function(_0x4c8996,_0x25f0e5){return _0x4c8996(_0x25f0e5);},'CQIoN':'COMPANION_FACEBOOK_SECRET','PjhDO':'COMPANION_ONEDRIVE_SECRET','fUZfz':function(_0x61ea44,_0x29fb53){return _0x61ea44(_0x29fb53);},'tjysO':'COMPANION_AWS_SECRET','nsVwB':function(_0x4b37ca,_0x5a384f,_0x4f860e){return _0x4b37ca(_0x5a384f,_0x4f860e);},'nyPeq':function(_0xf6d72,_0x1adffb,_0x1e011c){return _0xf6d72(_0x1adffb,_0x1e011c);},'FtLnR':_0x3bf5d6(0x1f1),'IzzSB':function(_0x436a0b,_0x529f2c){return _0x436a0b(_0x529f2c);},'KMBmg':'COMPANION_PREAUTH_SECRET','YcJPL':function(_0xe9c239){return _0xe9c239();},'wZfNS':function(_0x5aabce,_0xe8ff59){return _0x5aabce===_0xe8ff59;},'NBvXQ':'true'},_0x18e794=process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x210)],_0x4a8dcf=process[_0x3bf5d6(0x1dd)]['COMPANION_DOMAINS']||process['env'][_0x3bf5d6(0x1fd)]||null,_0x560ae=_0x4a8dcf?_0x4a8dcf[_0x3bf5d6(0x1f2)](','):[];return{'providerOptions':{'drive':{'key':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1f8)],'secret':getSecret(_0x3bf5d6(0x20f)),'credentialsURL':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1d6)]},'dropbox':{'key':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x20a)],'secret':_0x3439ef[_0x3bf5d6(0x1f7)](getSecret,_0x3bf5d6(0x203)),'credentialsURL':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1d7)]},'box':{'key':process['env'][_0x3bf5d6(0x1be)],'secret':getSecret('COMPANION_BOX_SECRET')},'instagram':{'key':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1cb)],'secret':_0x3439ef[_0x3bf5d6(0x1f7)](getSecret,_0x3bf5d6(0x1b6)),'credentialsURL':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1ce)]},'facebook':{'key':process['env'][_0x3bf5d6(0x1ef)],'secret':getSecret(_0x3439ef['CQIoN']),'credentialsURL':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1af)]},'onedrive':{'key':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1ca)],'secret':_0x3439ef[_0x3bf5d6(0x1f7)](getSecret,_0x3439ef[_0x3bf5d6(0x1bd)]),'credentialsURL':process[_0x3bf5d6(0x1dd)]['COMPANION_ONEDRIVE_KEYS_ENDPOINT']},'zoom':{'key':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1bf)],'secret':_0x3439ef['fUZfz'](getSecret,_0x3bf5d6(0x1f6)),'verificationToken':getSecret('COMPANION_ZOOM_VERIFICATION_TOKEN'),'credentialsURL':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1dc)]},'searchProviders':{'unsplash':{'key':process['env'][_0x3bf5d6(0x1bb)],'secret':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x208)]}},'s3':{'key':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1b9)],'secret':getSecret(_0x3439ef[_0x3bf5d6(0x1da)]),'bucket':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1fc)],'endpoint':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1a9)],'region':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1d3)],'useAccelerateEndpoint':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1b1)]===_0x3bf5d6(0x1e9),'expires':parseInt(process['env'][_0x3bf5d6(0x1cc)]||_0x3bf5d6(0x1e1),0xa),'acl':process[_0x3bf5d6(0x1dd)]['COMPANION_AWS_ACL']||_0x3bf5d6(0x1aa)}},'server':{'host':process['env'][_0x3bf5d6(0x1fd)],'protocol':process['env']['COMPANION_PROTOCOL'],'path':process[_0x3bf5d6(0x1dd)]['COMPANION_PATH'],'implicitPath':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1d8)],'oauthDomain':process['env'][_0x3bf5d6(0x20d)],'validHosts':_0x560ae},'periodicPingUrls':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1d0)]?process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1d0)][_0x3bf5d6(0x1f2)](','):[],'periodicPingInterval':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1b8)]?_0x3439ef[_0x3bf5d6(0x1d5)](parseInt,process['env'][_0x3bf5d6(0x1b8)],0xa):undefined,'periodicPingStaticPayload':process[_0x3bf5d6(0x1dd)]['COMPANION_PERIODIC_PING_STATIC_JSON_PAYLOAD']?JSON[_0x3bf5d6(0x1ec)](process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1d9)]):undefined,'periodicPingCount':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1ba)]?_0x3439ef[_0x3bf5d6(0x1e5)](parseInt,process['env'][_0x3bf5d6(0x1ba)],0xa):undefined,'filePath':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1b5)],'redisUrl':process[_0x3bf5d6(0x1dd)]['COMPANION_REDIS_URL'],'redisOptions':{},'sendSelfEndpoint':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1f5)],'uploadUrls':_0x18e794?_0x18e794[_0x3bf5d6(0x1f2)](','):null,'secret':_0x3439ef[_0x3bf5d6(0x202)](getSecret,_0x3439ef[_0x3bf5d6(0x1d4)])||generateSecret(),'preAuthSecret':_0x3439ef['IzzSB'](getSecret,_0x3439ef[_0x3bf5d6(0x1db)])||_0x3439ef[_0x3bf5d6(0x1c5)](generateSecret),'allowLocalUrls':_0x3439ef['wZfNS'](process[_0x3bf5d6(0x1dd)]['COMPANION_ALLOW_LOCAL_URLS'],_0x3439ef['NBvXQ']),'cookieDomain':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x204)],'multipleInstances':!![],'streamingUpload':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1b2)]===_0x3439ef[_0x3bf5d6(0x1c4)],'maxFileSize':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1c9)]?_0x3439ef[_0x3bf5d6(0x1d5)](parseInt,process['env'][_0x3bf5d6(0x1c9)],0xa):undefined,'chunkSize':process[_0x3bf5d6(0x1dd)][_0x3bf5d6(0x1ee)]?parseInt(process['env'][_0x3bf5d6(0x1ee)],0xa):undefined};},getSecret=_0x2fe92c=>{const _0x3f2b88=_0x5f44af,_0x21e9b5=process[_0x3f2b88(0x1dd)][_0x2fe92c+_0x3f2b88(0x1f4)];return _0x21e9b5?fs['readFileSync'](_0x21e9b5)['toString']():process['env'][_0x2fe92c];},generateSecret=()=>{const _0x32beff=_0x5f44af,_0x540604={'BVzqX':_0x32beff(0x1f3)};return logger[_0x32beff(0x1fe)](_0x32beff(0x205),_0x540604[_0x32beff(0x1c0)]),crypto['randomBytes'](0x40)[_0x32beff(0x1ea)](_0x32beff(0x1cf));},getConfigFromFile=()=>{const _0x2d6502=_0x5f44af,_0x4b8446={'LelJK':function(_0x3bdec8){return _0x3bdec8();}},_0xd62251=_0x4b8446[_0x2d6502(0x1c8)](getConfigPath);if(!_0xd62251)return{};const _0x1392c6=fs['readFileSync'](_0x4b8446[_0x2d6502(0x1c8)](getConfigPath));return JSON[_0x2d6502(0x1ec)](_0x1392c6);},getConfigPath=()=>{const _0x1ceb83=_0x5f44af,_0x203387={'emaIO':function(_0x532613,_0x463e7a){return _0x532613===_0x463e7a;},'YzgKS':function(_0x4e6ee9,_0xcd2f4e,_0x6d2a9b){return _0x4e6ee9(_0xcd2f4e,_0x6d2a9b);},'RXKbD':function(_0x14afd9,_0x181b8e,_0x451aa0){return _0x14afd9(_0x181b8e,_0x451aa0);},'rSneZ':function(_0xdcd819,_0x16c843){return _0xdcd819<=_0x16c843;},'QBKGL':function(_0x5f03f5,_0x5d3aac){return _0x5f03f5!==_0x5d3aac;},'aqoMe':_0x1ceb83(0x1cd),'NONvW':_0x1ceb83(0x1c1),'lTbVr':function(_0x4d28a7,_0x17b605){return _0x4d28a7+_0x17b605;}};let _0x1524e5;for(let _0x45c2d6=process[_0x1ceb83(0x207)][_0x1ceb83(0x1d2)]-0x1;_0x45c2d6>=0x0;_0x45c2d6--){const _0x246bf8=process[_0x1ceb83(0x207)][_0x45c2d6]==='-c'||process[_0x1ceb83(0x207)][_0x45c2d6]===_0x1ceb83(0x201),_0x5ef21d=_0x203387[_0x1ceb83(0x1e6)](_0x45c2d6+0x1,process[_0x1ceb83(0x207)]['length']);if(_0x246bf8&&_0x5ef21d){if(_0x203387[_0x1ceb83(0x1f0)](_0x203387[_0x1ceb83(0x211)],_0x203387[_0x1ceb83(0x1b3)])){_0x1524e5=process[_0x1ceb83(0x207)][_0x203387[_0x1ceb83(0x212)](_0x45c2d6,0x1)];break;}else{const _0x4f81b7=_0x41df6a[_0x1ceb83(0x1c2)](_0x2d7ba2),_0x2ed4b2=[];return _0x4ce600[_0x1ceb83(0x1ae)](_0x37da7d['providerOptions'])[_0x1ceb83(0x213)](_0x4f5040=>{const _0x5a0dcd=_0x1ceb83;if(_0x203387['emaIO'](_0x4f5040,'s3'))return;_0x2ed4b2[_0x5a0dcd(0x1de)](_0x203387[_0x5a0dcd(0x1c3)](_0x4f81b7,_0x5a0dcd(0x209)+_0x4f5040+_0x5a0dcd(0x1ad),!![]));}),_0x4d654c`
    Welcome to Companion v${_0x3d565a}
    ===================================

    Congratulations on setting up Companion! Thanks for joining our cause, you have taken
    the first step towards the future of file uploading! We
    hope you are as excited about this as we are!

    While you did an awesome job on getting Companion running, this is just the welcome
    message, so let's talk about the places that really matter:

    - Be sure to add ${_0x2ed4b2[_0x1ceb83(0x1c7)](',\x20')} as your Oauth redirect uris on their corresponding developer interfaces.
    - The URL ${_0x203387['RXKbD'](_0x4f81b7,_0x1ceb83(0x200),!![])} is available for  statistics to keep Companion running smoothly
    - https://github.com/transloadit/uppy/issues - report your bugs here

    So quit lollygagging, start uploading and experience the future!
  `;}}}return _0x1524e5;};function _0x3d13(){const _0x5ac12e=['iDaHV','COMPANION_INSTAGRAM_KEYS_ENDPOINT','hex','COMPANION_PERIODIC_PING_URLS','rBqol','length','COMPANION_AWS_REGION','FtLnR','nsVwB','COMPANION_GOOGLE_KEYS_ENDPOINT','COMPANION_DROPBOX_KEYS_ENDPOINT','COMPANION_IMPLICIT_PATH','COMPANION_PERIODIC_PING_STATIC_JSON_PAYLOAD','tjysO','KMBmg','COMPANION_ZOOM_KEYS_ENDPOINT','env','push','28CipunH','3416gwPrWZ','300','110QLOqyj','457551WzYWyi','../server/helpers/utils','nyPeq','rSneZ','98470mnYPop','common-tags/lib/stripIndent','true','toString','startsWith','parse','32420cOncRd','COMPANION_CHUNK_SIZE','COMPANION_FACEBOOK_KEY','QBKGL','COMPANION_SECRET','split','startup.secret','_FILE','COMPANION_SELF_ENDPOINT','COMPANION_ZOOM_SECRET','AuuHe','COMPANION_GOOGLE_KEY','756lOHznD','../../package.json','1210yEsMQD','COMPANION_AWS_BUCKET','COMPANION_DOMAIN','warn','7372248tYwlGE','/metrics','--config','fUZfz','COMPANION_DROPBOX_SECRET','COMPANION_COOKIE_DOMAIN','auto-generating\x20server\x20secret\x20because\x20none\x20was\x20specified','4068SKFZER','argv','COMPANION_UNSPLASH_SECRET','/connect/','COMPANION_DROPBOX_KEY','ZPDTj','8NcgyuE','COMPANION_OAUTH_DOMAIN','crypto','COMPANION_GOOGLE_SECRET','COMPANION_UPLOAD_URLS','aqoMe','lTbVr','forEach','COMPANION_AWS_ENDPOINT','public-read','iMjIP','356622CwaqTQ','/redirect','keys','COMPANION_FACEBOOK_KEYS_ENDPOINT','FITkr','COMPANION_AWS_USE_ACCELERATE_ENDPOINT','COMPANION_STREAMING_UPLOAD','NONvW','26FKWjRd','COMPANION_DATADIR','COMPANION_INSTAGRAM_SECRET','getCompanionOptions','COMPANION_PERIODIC_PING_INTERVAL','COMPANION_AWS_KEY','COMPANION_PERIODIC_PING_COUNT','COMPANION_UNSPLASH_KEY','https://','PjhDO','COMPANION_BOX_KEY','COMPANION_ZOOM_KEY','BVzqX','EcUmx','getURLBuilder','YzgKS','NBvXQ','YcJPL','sdJin','join','LelJK','COMPANION_MAX_FILE_SIZE','COMPANION_ONEDRIVE_KEY','COMPANION_INSTAGRAM_KEY','COMPANION_AWS_EXPIRES'];_0x3d13=function(){return _0x5ac12e;};return _0x3d13();}exports['hasProtocol']=_0x16cf94=>{const _0x5e6841=_0x5f44af,_0xfbae1e={'rBqol':'http://','iMjIP':_0x5e6841(0x1bc)};return _0x16cf94[_0x5e6841(0x1eb)](_0xfbae1e[_0x5e6841(0x1d1)])||_0x16cf94['startsWith'](_0xfbae1e[_0x5e6841(0x1ab)]);},exports['buildHelpfulStartupMessage']=_0xf024b1=>{const _0x15d047=_0x5f44af,_0x1c1ecc={'FITkr':function(_0x32ec4f,_0xbbfd88,_0x553276){return _0x32ec4f(_0xbbfd88,_0x553276);},'ZPDTj':_0x15d047(0x200)},_0x56e261=utils[_0x15d047(0x1c2)](_0xf024b1),_0x187f76=[];return Object[_0x15d047(0x1ae)](_0xf024b1['providerOptions'])[_0x15d047(0x213)](_0x44875e=>{const _0x631594=_0x15d047;if(_0x44875e==='s3')return;_0x187f76['push'](_0x1c1ecc[_0x631594(0x1b0)](_0x56e261,'/connect/'+_0x44875e+_0x631594(0x1ad),!![]));}),stripIndent`
    Welcome to Companion v${version}
    ===================================

    Congratulations on setting up Companion! Thanks for joining our cause, you have taken
    the first step towards the future of file uploading! We
    hope you are as excited about this as we are!

    While you did an awesome job on getting Companion running, this is just the welcome
    message, so let's talk about the places that really matter:

    - Be sure to add ${_0x187f76['join'](',\x20')} as your Oauth redirect uris on their corresponding developer interfaces.
    - The URL ${_0x56e261(_0x1c1ecc[_0x15d047(0x20b)],!![])} is available for  statistics to keep Companion running smoothly
    - https://github.com/transloadit/uppy/issues - report your bugs here

    So quit lollygagging, start uploading and experience the future!
  `;};