const _0x44aaea=_0x57f2;(function(_0x3dbf98,_0x503ee7){const _0x42d0b1=_0x57f2,_0x47f184=_0x3dbf98();while(!![]){try{const _0x2b73f1=-parseInt(_0x42d0b1(0x1d9))/0x1+parseInt(_0x42d0b1(0x1bb))/0x2*(-parseInt(_0x42d0b1(0x1fe))/0x3)+-parseInt(_0x42d0b1(0x208))/0x4+-parseInt(_0x42d0b1(0x1cb))/0x5+parseInt(_0x42d0b1(0x1a6))/0x6+-parseInt(_0x42d0b1(0x1b2))/0x7*(-parseInt(_0x42d0b1(0x1c5))/0x8)+-parseInt(_0x42d0b1(0x1cc))/0x9*(-parseInt(_0x42d0b1(0x1cd))/0xa);if(_0x2b73f1===_0x503ee7)break;else _0x47f184['push'](_0x47f184['shift']());}catch(_0x1abb62){_0x47f184['push'](_0x47f184['shift']());}}}(_0x4259,0x526c1));function _0x57f2(_0x3843c4,_0x5cd6de){const _0x42596e=_0x4259();return _0x57f2=function(_0x57f228,_0x38b142){_0x57f228=_0x57f228-0x19e;let _0x4e37cb=_0x42596e[_0x57f228];return _0x4e37cb;},_0x57f2(_0x3843c4,_0x5cd6de);}const fs=require('fs'),merge=require(_0x44aaea(0x19f)),stripIndent=require(_0x44aaea(0x1ba)),crypto=require('crypto'),utils=require('../server/helpers/utils'),logger=require(_0x44aaea(0x1e2)),{version}=require(_0x44aaea(0x1a9));exports[_0x44aaea(0x20a)]=(_0x124b63={})=>{const _0x10d130=_0x44aaea,_0x189c34={'crSii':function(_0x4d486f,_0x357079,_0xe955c,_0x1838dc,_0x332b54){return _0x4d486f(_0x357079,_0xe955c,_0x1838dc,_0x332b54);},'fZgvf':function(_0x2cd79d){return _0x2cd79d();}};return _0x189c34[_0x10d130(0x1b6)](merge,{},_0x189c34[_0x10d130(0x1d7)](getConfigFromEnv),_0x189c34[_0x10d130(0x1d7)](getConfigFromFile),_0x124b63);};function _0x4259(){const _0x5c6ce9=['public-read','300','COMPANION_GOOGLE_SECRET','vznxr','hhEdZ','KmYRB','COMPANION_ONEDRIVE_KEYS_ENDPOINT','keys','argv','COMPANION_INSTAGRAM_KEY','20679HpzFUp','COMPANION_ZOOM_KEY','COMPANION_ONEDRIVE_SECRET','COMPANION_BOX_SECRET','auto-generating\x20server\x20secret\x20because\x20none\x20was\x20specified','OOZrM','COMPANION_PERIODIC_PING_COUNT','COMPANION_PERIODIC_PING_URLS','gfpfp','dRFCN','1706556nLcruX','zVSfy','getCompanionOptions','COMPANION_BOX_KEY','COMPANION_ZOOM_VERIFICATION_TOKEN','COMPANION_IMPLICIT_PATH','COMPANION_ZOOM_KEYS_ENDPOINT','COMPANION_INSTAGRAM_KEYS_ENDPOINT','lodash.merge','true','PUZsQ','COMPANION_STREAMING_UPLOAD','COMPANION_DOMAINS','COMPANION_MAX_FILE_SIZE','toString','578598eGDeFH','env','production','../../package.json','https://','COMPANION_FACEBOOK_KEYS_ENDPOINT','APgPU','JcdHW','OXWJS','warn','startup.secret','http://','7mZfSIY','length','COMPANION_FACEBOOK_SECRET','COMPANION_UNSPLASH_KEY','crSii','COMPANION_PERIODIC_PING_INTERVAL','COMPANION_PERIODIC_PING_STATIC_JSON_PAYLOAD','getURLBuilder','common-tags/lib/stripIndent','2eYvEJr','COMPANION_ONEDRIVE_KEY','COMPANION_REDIS_URL','randomBytes','KbThx','COMPANION_AWS_REGION','--config','hckSA','forEach','COMPANION_UPLOAD_URLS','2200664eZgWqG','/connect/','eTjkf','mJqCL','buildHelpfulStartupMessage','/metrics','326390eONRvL','1580049eHLPMr','40EvoHgl','NODE_ENV','COMPANION_AWS_BUCKET','hex','COMPANION_DROPBOX_SECRET','COMPANION_COOKIE_DOMAIN','MdyFY','tRbqo','hKfmo','COMPANION_DATADIR','fZgvf','COMPANION_AWS_EXPIRES','237349rHsyGI','ZzCId','fxtSf','providerOptions','join','split','JobUF','readFileSync','COMPANION_AWS_KEY','../server/logger','COMPANION_CHUNK_SIZE','COMPANION_PATH','COMPANION_DOMAIN','YJLny','COMPANION_DROPBOX_KEY','_FILE','GbyOu','COMPANION_UNSPLASH_SECRET','JLxOq','iHGds','COMPANION_DROPBOX_KEYS_ENDPOINT','startsWith','bsHmc','COMPANION_AWS_ACL','parse','COMPANION_ZOOM_SECRET','COMPANION_SELF_ENDPOINT'];_0x4259=function(){return _0x5c6ce9;};return _0x4259();}const getConfigFromEnv=()=>{const _0x36eaf5=_0x44aaea,_0x488f4f={'APgPU':function(_0x54226c,_0x158794){return _0x54226c(_0x158794);},'uQKHg':_0x36eaf5(0x1d1),'YJLny':_0x36eaf5(0x201),'EomJB':function(_0x53d1fd,_0x5479c5){return _0x53d1fd(_0x5479c5);},'voDcd':'COMPANION_INSTAGRAM_SECRET','hKfmo':function(_0x3b0888,_0x4dee67){return _0x3b0888(_0x4dee67);},'JWGtx':'COMPANION_AWS_SECRET','PBrhw':_0x36eaf5(0x1a0),'vznxr':_0x36eaf5(0x1f5),'MdyFY':_0x36eaf5(0x1f4),'hckSA':function(_0x1f7a66,_0x233eac,_0x2b7128){return _0x1f7a66(_0x233eac,_0x2b7128);},'KmYRB':function(_0x3135f7,_0x1a7573){return _0x3135f7(_0x1a7573);},'tRbqo':'COMPANION_SECRET','DoRgt':function(_0x1a7892,_0x43ef95){return _0x1a7892(_0x43ef95);},'dRFCN':function(_0x5cbe63,_0x2b1cdf){return _0x5cbe63===_0x2b1cdf;},'OOZrM':function(_0x1b6e07,_0x51bca5,_0x7370ea){return _0x1b6e07(_0x51bca5,_0x7370ea);}},_0x3976ef=process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1c4)],_0x24af7d=process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1a3)]||process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1e5)]||null,_0x5bb1bf=_0x24af7d?_0x24af7d[_0x36eaf5(0x1de)](','):[];return{'providerOptions':{'drive':{'key':process[_0x36eaf5(0x1a7)]['COMPANION_GOOGLE_KEY'],'secret':getSecret(_0x36eaf5(0x1f6)),'credentialsURL':process[_0x36eaf5(0x1a7)]['COMPANION_GOOGLE_KEYS_ENDPOINT']},'dropbox':{'key':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1e7)],'secret':_0x488f4f[_0x36eaf5(0x1ac)](getSecret,_0x488f4f['uQKHg']),'credentialsURL':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1ed)]},'box':{'key':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x20b)],'secret':getSecret(_0x488f4f[_0x36eaf5(0x1e6)])},'instagram':{'key':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1fd)],'secret':_0x488f4f['EomJB'](getSecret,_0x488f4f['voDcd']),'credentialsURL':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x19e)]},'facebook':{'key':process[_0x36eaf5(0x1a7)]['COMPANION_FACEBOOK_KEY'],'secret':_0x488f4f[_0x36eaf5(0x1d5)](getSecret,_0x36eaf5(0x1b4)),'credentialsURL':process['env'][_0x36eaf5(0x1ab)]},'onedrive':{'key':process['env'][_0x36eaf5(0x1bc)],'secret':_0x488f4f['hKfmo'](getSecret,_0x36eaf5(0x200)),'credentialsURL':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1fa)]},'zoom':{'key':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1ff)],'secret':getSecret(_0x36eaf5(0x1f2)),'verificationToken':_0x488f4f[_0x36eaf5(0x1ac)](getSecret,_0x36eaf5(0x20c)),'credentialsURL':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x20e)]},'searchProviders':{'unsplash':{'key':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1b5)],'secret':process['env'][_0x36eaf5(0x1ea)]}},'s3':{'key':process['env'][_0x36eaf5(0x1e1)],'secret':_0x488f4f['hKfmo'](getSecret,_0x488f4f['JWGtx']),'bucket':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1cf)],'endpoint':process[_0x36eaf5(0x1a7)]['COMPANION_AWS_ENDPOINT'],'region':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1c0)],'useAccelerateEndpoint':process[_0x36eaf5(0x1a7)]['COMPANION_AWS_USE_ACCELERATE_ENDPOINT']===_0x488f4f['PBrhw'],'expires':parseInt(process['env'][_0x36eaf5(0x1d8)]||_0x488f4f[_0x36eaf5(0x1f7)],0xa),'acl':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1f0)]||_0x488f4f[_0x36eaf5(0x1d3)]}},'server':{'host':process['env']['COMPANION_DOMAIN'],'protocol':process['env']['COMPANION_PROTOCOL'],'path':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1e4)],'implicitPath':process['env'][_0x36eaf5(0x20d)],'oauthDomain':process['env']['COMPANION_OAUTH_DOMAIN'],'validHosts':_0x5bb1bf},'periodicPingUrls':process[_0x36eaf5(0x1a7)]['COMPANION_PERIODIC_PING_URLS']?process[_0x36eaf5(0x1a7)][_0x36eaf5(0x205)][_0x36eaf5(0x1de)](','):[],'periodicPingInterval':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1b7)]?_0x488f4f[_0x36eaf5(0x1c2)](parseInt,process['env'][_0x36eaf5(0x1b7)],0xa):undefined,'periodicPingStaticPayload':process['env'][_0x36eaf5(0x1b8)]?JSON[_0x36eaf5(0x1f1)](process['env'][_0x36eaf5(0x1b8)]):undefined,'periodicPingCount':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x204)]?parseInt(process[_0x36eaf5(0x1a7)][_0x36eaf5(0x204)],0xa):undefined,'filePath':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1d6)],'redisUrl':process['env'][_0x36eaf5(0x1bd)],'redisOptions':{},'sendSelfEndpoint':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1f3)],'uploadUrls':_0x3976ef?_0x3976ef['split'](','):null,'secret':_0x488f4f[_0x36eaf5(0x1f9)](getSecret,_0x488f4f[_0x36eaf5(0x1d4)])||generateSecret(),'preAuthSecret':_0x488f4f['DoRgt'](getSecret,'COMPANION_PREAUTH_SECRET')||generateSecret(),'debug':process['env'][_0x36eaf5(0x1ce)]&&process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1ce)]!==_0x36eaf5(0x1a8),'cookieDomain':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1d2)],'multipleInstances':!![],'streamingUpload':_0x488f4f[_0x36eaf5(0x207)](process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1a2)],_0x488f4f['PBrhw']),'maxFileSize':process[_0x36eaf5(0x1a7)][_0x36eaf5(0x1a4)]?parseInt(process['env']['COMPANION_MAX_FILE_SIZE'],0xa):undefined,'chunkSize':process['env'][_0x36eaf5(0x1e3)]?_0x488f4f[_0x36eaf5(0x203)](parseInt,process['env']['COMPANION_CHUNK_SIZE'],0xa):undefined};},getSecret=_0x340de1=>{const _0x25fc7a=_0x44aaea,_0x4b5b2b=process[_0x25fc7a(0x1a7)][_0x340de1+_0x25fc7a(0x1e8)];return _0x4b5b2b?fs[_0x25fc7a(0x1e0)](_0x4b5b2b)[_0x25fc7a(0x1a5)]():process[_0x25fc7a(0x1a7)][_0x340de1];},generateSecret=()=>{const _0x5b35d4=_0x44aaea,_0x56440e={'eTjkf':_0x5b35d4(0x202),'zVSfy':_0x5b35d4(0x1d0)};return logger[_0x5b35d4(0x1af)](_0x56440e[_0x5b35d4(0x1c7)],_0x5b35d4(0x1b0)),crypto[_0x5b35d4(0x1be)](0x40)[_0x5b35d4(0x1a5)](_0x56440e[_0x5b35d4(0x209)]);},getConfigFromFile=()=>{const _0x3dbf0f=_0x44aaea,_0x25dfe7={'mJqCL':function(_0x5a7235){return _0x5a7235();}},_0x532401=_0x25dfe7[_0x3dbf0f(0x1c8)](getConfigPath);if(!_0x532401)return{};const _0x11eefc=fs[_0x3dbf0f(0x1e0)](getConfigPath());return JSON[_0x3dbf0f(0x1f1)](_0x11eefc);},getConfigPath=()=>{const _0x248577=_0x44aaea,_0x4dff6a={'gfpfp':function(_0x265815,_0x5d26c0,_0x53df90,_0x333f37,_0x31c68f){return _0x265815(_0x5d26c0,_0x53df90,_0x333f37,_0x31c68f);},'fxtSf':function(_0x21f31b){return _0x21f31b();},'KbThx':function(_0x5cda5e,_0x23fe4f){return _0x5cda5e-_0x23fe4f;},'JcdHW':function(_0x2afc75,_0x1765fb){return _0x2afc75>=_0x1765fb;},'JLxOq':function(_0x39b3a4,_0xded7a8){return _0x39b3a4===_0xded7a8;},'JobUF':_0x248577(0x1c1),'ZzCId':function(_0x44c88f,_0x211e42){return _0x44c88f<=_0x211e42;},'CuDmp':function(_0x425ced,_0x5e5223){return _0x425ced&&_0x5e5223;},'bsHmc':'PUZsQ','OXWJS':function(_0x4285e6,_0x5e4ffe){return _0x4285e6+_0x5e4ffe;}};let _0x38861d;for(let _0x566880=_0x4dff6a[_0x248577(0x1bf)](process['argv']['length'],0x1);_0x4dff6a[_0x248577(0x1ad)](_0x566880,0x0);_0x566880--){const _0x1b30aa=process[_0x248577(0x1fc)][_0x566880]==='-c'||_0x4dff6a[_0x248577(0x1eb)](process[_0x248577(0x1fc)][_0x566880],_0x4dff6a[_0x248577(0x1df)]),_0x41cf66=_0x4dff6a[_0x248577(0x1da)](_0x566880+0x1,process[_0x248577(0x1fc)][_0x248577(0x1b3)]);if(_0x4dff6a['CuDmp'](_0x1b30aa,_0x41cf66)){if(_0x4dff6a[_0x248577(0x1ef)]===_0x248577(0x1a1)){_0x38861d=process[_0x248577(0x1fc)][_0x4dff6a[_0x248577(0x1ae)](_0x566880,0x1)];break;}else return _0x4dff6a[_0x248577(0x206)](_0x23332e,{},_0x4dff6a[_0x248577(0x1db)](_0x104b44),_0x35b70e(),_0x425c03);}}return _0x38861d;};exports['hasProtocol']=_0x40eb26=>{const _0x7dc43e=_0x44aaea,_0x495e44={'iHGds':_0x7dc43e(0x1aa)};return _0x40eb26['startsWith'](_0x7dc43e(0x1b1))||_0x40eb26[_0x7dc43e(0x1ee)](_0x495e44[_0x7dc43e(0x1ec)]);},exports[_0x44aaea(0x1c9)]=_0xd57243=>{const _0x5dda3c=_0x44aaea,_0x59d9b7={'hhEdZ':function(_0x4cdbd9,_0x575d39){return _0x4cdbd9===_0x575d39;},'GbyOu':function(_0x1edef0,_0x136832,_0x5ecfc1){return _0x1edef0(_0x136832,_0x5ecfc1);}},_0x3221f4=utils[_0x5dda3c(0x1b9)](_0xd57243),_0x10a54b=[];return Object[_0x5dda3c(0x1fb)](_0xd57243[_0x5dda3c(0x1dc)])[_0x5dda3c(0x1c3)](_0x5ec1b8=>{const _0xc4aa6a=_0x5dda3c;if(_0x59d9b7[_0xc4aa6a(0x1f8)](_0x5ec1b8,'s3'))return;_0x10a54b['push'](_0x59d9b7[_0xc4aa6a(0x1e9)](_0x3221f4,_0xc4aa6a(0x1c6)+_0x5ec1b8+'/redirect',!![]));}),stripIndent`
    Welcome to Companion v${version}
    ===================================

    Congratulations on setting up Companion! Thanks for joining our cause, you have taken
    the first step towards the future of file uploading! We
    hope you are as excited about this as we are!

    While you did an awesome job on getting Companion running, this is just the welcome
    message, so let's talk about the places that really matter:

    - Be sure to add ${_0x10a54b[_0x5dda3c(0x1dd)](',\x20')} as your Oauth redirect uris on their corresponding developer interfaces.
    - The URL ${_0x3221f4(_0x5dda3c(0x1ca),!![])} is available for  statistics to keep Companion running smoothly
    - https://github.com/transloadit/uppy/issues - report your bugs here

    So quit lollygagging, start uploading and experience the future!
  `;};