const _0x1f05f7=_0x3b80;(function(_0x52c10f,_0x55bb77){const _0x29b10f=_0x3b80,_0x32b3ee=_0x52c10f();while(!![]){try{const _0x3ca732=-parseInt(_0x29b10f(0xbd))/0x1*(parseInt(_0x29b10f(0xeb))/0x2)+parseInt(_0x29b10f(0xcb))/0x3*(-parseInt(_0x29b10f(0xc3))/0x4)+-parseInt(_0x29b10f(0xb4))/0x5*(parseInt(_0x29b10f(0xc8))/0x6)+parseInt(_0x29b10f(0xee))/0x7+-parseInt(_0x29b10f(0xc4))/0x8+-parseInt(_0x29b10f(0xbc))/0x9*(-parseInt(_0x29b10f(0xe0))/0xa)+parseInt(_0x29b10f(0xd7))/0xb*(parseInt(_0x29b10f(0xce))/0xc);if(_0x3ca732===_0x55bb77)break;else _0x32b3ee['push'](_0x32b3ee['shift']());}catch(_0x254676){_0x32b3ee['push'](_0x32b3ee['shift']());}}}(_0x120f,0xa67d4));function _0x120f(){const _0x4bd3c8=['URL\x20file\x20import\x20handler\x20running','abort','/get','options','isURL','../logger','validator','5176259QmLMHM','url','dSSYL','json','TSTNS','../helpers/upload','Router','Invalid\x20request\x20body','post','25410obtaxg','body','BEtSq','express','AwbZj','pause','debug','Invalid\x20request\x20body\x20detected.\x20Exiting\x20url\x20import\x20handler.','error','failed\x20to\x20fetch\x20URL\x20metadata','MJEmV','2joxsvG','protocol','uxuGq','7840469DNbsCR','YjvGp','1045DnAGJK','/meta','GET','status','NKNeF','BUwXY','IaeBO','fvlBi','3204BPsnPc','616016ADCIrq','kNFVg','response','JNTAZ','companion','DhZvx','7704ClnNdb','7001432sjADsg','sMmju','statusCode','URL\x20server\x20responded\x20with\x20status:\x20','10260rXYnPG','ukxtj','controller.url.download.error','678fqhwJZ','dVWwi','TbpuD','24DKoNQz','controller.url.error'];_0x120f=function(){return _0x4bd3c8;};return _0x120f();}const router=require(_0x1f05f7(0xe3))[_0x1f05f7(0xdd)],request=require('request'),{URL}=require(_0x1f05f7(0xd8)),validator=require(_0x1f05f7(0xd6)),{startDownUpload}=require(_0x1f05f7(0xdc)),{getURLMeta,getRedirectEvaluator,getProtectedHttpAgent}=require('../helpers/request'),logger=require(_0x1f05f7(0xd5)),validateURL=(_0x46b775,_0x38c57a)=>{const _0x36e8cc=_0x1f05f7,_0x45ea33={'YjvGp':_0x36e8cc(0xca),'TbpuD':_0x36e8cc(0xb9),'uxuGq':_0x36e8cc(0xd9)};if(!_0x46b775)return![];const _0x4e8921={'protocols':['http','https'],'require_protocol':!![],'require_tld':!_0x38c57a};if(!validator[_0x36e8cc(0xd4)](_0x46b775,_0x4e8921)){if(_0x45ea33[_0x36e8cc(0xcd)]===_0x45ea33[_0x36e8cc(0xed)])_0x56f185['error'](_0x4312dd,_0x45ea33[_0x36e8cc(0xef)],_0x5e8a57),_0x52348c(_0x16194b);else return![];}return!![];},downloadURL=async(_0x2e46ed,_0x374d0b,_0x39ca5f)=>{const _0x83029e=_0x1f05f7,_0x2ef6e6={'sMmju':function(_0x2e3e70,_0x1fb8b5){return _0x2e3e70(_0x1fb8b5);},'TSTNS':function(_0x349dd8,_0x4050dc){return _0x349dd8(_0x4050dc);},'AwbZj':_0x83029e(0xe8),'fvlBi':_0x83029e(0xb6)},_0x2abeae={'uri':_0x2e46ed,'method':_0x2ef6e6[_0x83029e(0xbb)],'followRedirect':getRedirectEvaluator(_0x2e46ed,_0x374d0b),'agentClass':getProtectedHttpAgent(new URL(_0x2e46ed)[_0x83029e(0xec)],_0x374d0b)};return new Promise((_0x4b0f72,_0x4ef9d9)=>{const _0x349989=_0x83029e,_0x147547={'WyjDc':function(_0x45b4e9,_0xc0bc62){const _0x3b4120=_0x3b80;return _0x2ef6e6[_0x3b4120(0xc5)](_0x45b4e9,_0xc0bc62);},'BEtSq':function(_0x14fa14,_0x550e63){const _0x3e2ae6=_0x3b80;return _0x2ef6e6[_0x3e2ae6(0xdb)](_0x14fa14,_0x550e63);}},_0x2e9a71=_0x2ef6e6['TSTNS'](request,_0x2abeae)['on'](_0x349989(0xbf),_0x24c711=>{const _0x2b4600=_0x349989;if(_0x24c711[_0x2b4600(0xc6)]>=0x12c){_0x2e9a71[_0x2b4600(0xd1)](),_0x147547['WyjDc'](_0x4ef9d9,new Error(_0x2b4600(0xc7)+_0x24c711[_0x2b4600(0xc6)]));return;}_0x24c711[_0x2b4600(0xe5)](),_0x147547[_0x2b4600(0xe2)](_0x4b0f72,_0x24c711);})['on'](_0x2ef6e6[_0x349989(0xe4)],_0x4dc015=>{const _0x30e7b5=_0x349989;logger[_0x30e7b5(0xe8)](_0x4dc015,_0x30e7b5(0xca),_0x39ca5f),_0x2ef6e6[_0x30e7b5(0xc5)](_0x4ef9d9,_0x4dc015);});});},meta=async(_0x53a9e6,_0x288e17)=>{const _0x3ae770=_0x1f05f7,_0x405e8a={'MJEmV':'URL\x20file\x20import\x20handler\x20running','ukxtj':'Invalid\x20request\x20body\x20detected.\x20Exiting\x20url\x20meta\x20handler.','JNTAZ':'Invalid\x20request\x20body','IaeBO':function(_0x4f4f08,_0x3a8986,_0x1e9bd1){return _0x4f4f08(_0x3a8986,_0x1e9bd1);},'ieRtb':'controller.url.meta.error','NKNeF':_0x3ae770(0xe9)};try{logger[_0x3ae770(0xe6)](_0x405e8a[_0x3ae770(0xea)],null,_0x53a9e6['id']);const {allowLocalUrls:_0x5c5abe}=_0x53a9e6[_0x3ae770(0xc1)][_0x3ae770(0xd3)];if(!validateURL(_0x53a9e6[_0x3ae770(0xe1)]['url'],_0x5c5abe))return logger[_0x3ae770(0xe6)](_0x405e8a[_0x3ae770(0xc9)],null,_0x53a9e6['id']),_0x288e17[_0x3ae770(0xb7)](0x190)[_0x3ae770(0xda)]({'error':_0x405e8a[_0x3ae770(0xc0)]});const _0x221db0=await _0x405e8a[_0x3ae770(0xba)](getURLMeta,_0x53a9e6[_0x3ae770(0xe1)][_0x3ae770(0xd8)],!_0x5c5abe);return _0x288e17[_0x3ae770(0xda)](_0x221db0);}catch(_0x516b12){return logger[_0x3ae770(0xe8)](_0x516b12,_0x405e8a['ieRtb'],_0x53a9e6['id']),_0x288e17[_0x3ae770(0xb7)](_0x516b12[_0x3ae770(0xb7)]||0x1f4)[_0x3ae770(0xda)]({'message':_0x405e8a[_0x3ae770(0xb8)]});}},get=async(_0x48bf9c,_0x4e4bf6)=>{const _0x1dea36=_0x1f05f7,_0x1460a3={'kNFVg':function(_0x16d42d,_0x4f03cb,_0x3466c1){return _0x16d42d(_0x4f03cb,_0x3466c1);},'dVWwi':function(_0x1276e8,_0x4142ec,_0x3cc487,_0xab847d){return _0x1276e8(_0x4142ec,_0x3cc487,_0xab847d);},'DhZvx':_0x1dea36(0xd0)};logger['debug'](_0x1460a3[_0x1dea36(0xc2)],null,_0x48bf9c['id']);const {allowLocalUrls:_0x4616ea}=_0x48bf9c[_0x1dea36(0xc1)][_0x1dea36(0xd3)];if(!_0x1460a3[_0x1dea36(0xbe)](validateURL,_0x48bf9c[_0x1dea36(0xe1)][_0x1dea36(0xd8)],_0x4616ea)){logger['debug'](_0x1dea36(0xe7),null,_0x48bf9c['id']),_0x4e4bf6[_0x1dea36(0xb7)](0x190)['json']({'error':_0x1dea36(0xde)});return;}async function _0xf0d089(){const _0x36d651=_0x1dea36,{size:_0x23d8fb}=await _0x1460a3[_0x36d651(0xbe)](getURLMeta,_0x48bf9c[_0x36d651(0xe1)]['url'],!_0x4616ea);return _0x23d8fb;}async function _0x20c445(){const _0xbe3212=_0x1dea36;return _0x1460a3[_0xbe3212(0xcc)](downloadURL,_0x48bf9c[_0xbe3212(0xe1)][_0xbe3212(0xd8)],!_0x4616ea,_0x48bf9c['id']);}function _0xcfb1c7(_0x178115){const _0x547fd0=_0x1dea36;logger['error'](_0x178115,_0x547fd0(0xcf),_0x48bf9c['id']),_0x4e4bf6[_0x547fd0(0xb7)](_0x178115[_0x547fd0(0xb7)]||0x1f4)[_0x547fd0(0xda)]({'message':_0x547fd0(0xe9)});}startDownUpload({'req':_0x48bf9c,'res':_0x4e4bf6,'getSize':_0xf0d089,'download':_0x20c445,'onUnhandledError':_0xcfb1c7});};function _0x3b80(_0xf6c6dc,_0x37c6d1){const _0x120f96=_0x120f();return _0x3b80=function(_0x3b807c,_0x3ced9e){_0x3b807c=_0x3b807c-0xb4;let _0x25c62d=_0x120f96[_0x3b807c];return _0x25c62d;},_0x3b80(_0xf6c6dc,_0x37c6d1);}module['exports']=()=>router()[_0x1f05f7(0xdf)](_0x1f05f7(0xb5),meta)[_0x1f05f7(0xdf)](_0x1f05f7(0xd2),get);