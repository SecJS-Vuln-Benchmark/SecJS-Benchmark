const _0x2be776=_0x2fc1;function _0x2fc1(_0x256a61,_0x5776db){const _0x599a80=_0x599a();return _0x2fc1=function(_0x2fc118,_0x17d845){_0x2fc118=_0x2fc118-0xac;let _0x2fa7fd=_0x599a80[_0x2fc118];return _0x2fa7fd;},_0x2fc1(_0x256a61,_0x5776db);}(function(_0x310882,_0x33258b){const _0x3cd303=_0x2fc1,_0x4f0f2e=_0x310882();while(!![]){try{const _0x47677f=-parseInt(_0x3cd303(0xb7))/0x1*(-parseInt(_0x3cd303(0xd5))/0x2)+-parseInt(_0x3cd303(0xb2))/0x3+-parseInt(_0x3cd303(0xe3))/0x4+-parseInt(_0x3cd303(0xbd))/0x5+-parseInt(_0x3cd303(0xc6))/0x6*(parseInt(_0x3cd303(0xcd))/0x7)+-parseInt(_0x3cd303(0xd4))/0x8*(parseInt(_0x3cd303(0xca))/0x9)+parseInt(_0x3cd303(0xcb))/0xa;if(_0x47677f===_0x33258b)break;else _0x4f0f2e['push'](_0x4f0f2e['shift']());}catch(_0x51c410){_0x4f0f2e['push'](_0x4f0f2e['shift']());}}}(_0x599a,0x793ed));const {expect}=require('chai'),sinon=require(_0x2be776(0xe0)),net=require('net'),tls=require(_0x2be776(0xc9)),ActiveConnector=require('../../src/connector/active'),{getNextPortFactory}=require(_0x2be776(0xdc));describe(_0x2be776(0xc4),function(){const _0x38069e=_0x2be776,_0x5f2b9a={'OkDFT':function(_0xb9ae7f){return _0xb9ae7f();},'kRbVw':function(_0x5ed7e6,_0x24e2fd){return _0x5ed7e6 instanceof _0x24e2fd;},'pPgjH':function(_0x327000,_0x261f6b){return _0x327000===_0x261f6b;},'PEzcZ':function(_0x3238ad,_0x4d24ae){return _0x3238ad(_0x4d24ae);},'YNHtz':function(_0x1b03c1,_0x47f161){return _0x1b03c1(_0x47f161);},'PbPbz':'123.45.67.89','QdYUJ':_0x38069e(0xc8),'gdFxK':function(_0x526625,_0x376c0a){return _0x526625(_0x376c0a);},'mzBSy':'127.0.0.1','CcuQB':function(_0x2c79f8,_0x3d38d7){return _0x2c79f8(_0x3d38d7);},'MAnrx':function(_0x74f9e0,_0x3069cf,_0x405593){return _0x74f9e0(_0x3069cf,_0x405593);},'PVQZX':_0x38069e(0xdb),'ExiPh':_0x38069e(0xb3)},_0x3bda56=_0x5f2b9a[_0x38069e(0xe5)];let _0x6533d4=getNextPortFactory(_0x3bda56,0x400),_0x4e1c58,_0x3fe552,_0xb7ed9f={'commandSocket':{'remoteAddress':_0x38069e(0xe1)}},_0x38cfce,_0x415d61;_0x5f2b9a['gdFxK'](beforeEach,_0x4c9d85=>{const _0x430dd0=_0x38069e;_0x3fe552=new ActiveConnector(_0xb7ed9f),_0x38cfce=sinon[_0x430dd0(0xdd)][_0x430dd0(0xd7)]()[_0x430dd0(0xae)](Promise),_0x5f2b9a[_0x430dd0(0xb0)](_0x6533d4)[_0x430dd0(0xc2)](_0x41fc4d=>{const _0x58bc9b=_0x430dd0;_0x4e1c58=_0x41fc4d,_0x415d61=net[_0x58bc9b(0xb1)]()['on']('connection',_0x47d659=>_0x47d659[_0x58bc9b(0xc8)]())[_0x58bc9b(0xbb)](_0x4e1c58,()=>_0x4c9d85());});}),_0x5f2b9a[_0x38069e(0xce)](afterEach,()=>{const _0x219697=_0x38069e;_0x38cfce[_0x219697(0xde)](),_0x415d61[_0x219697(0xb4)](),_0x3fe552[_0x219697(0xad)]();}),it(_0x38069e(0xc3),function(){const _0x952bb=_0x38069e;return _0x3fe552['setupConnection'](_0x3bda56,_0x4e1c58)[_0x952bb(0xc2)](()=>{const _0x24c170=_0x952bb,_0x3e57f9={'tuQyz':function(_0x29744b,_0x5a2424){return _0x5f2b9a['kRbVw'](_0x29744b,_0x5a2424);}};if(_0x5f2b9a['pPgjH'](_0x24c170(0xc1),'bCebO'))_0x5f2b9a[_0x24c170(0xc5)](expect,_0x3fe552[_0x24c170(0xd1)])['to'][_0x24c170(0xb8)];else{const _0x28c43e={'kbLPz':function(_0x2de694,_0x1909da){return _0x2de694(_0x1909da);},'cMCXn':function(_0x210bfb,_0x346ad9){const _0x43e22f=_0x24c170;return _0x3e57f9[_0x43e22f(0xb6)](_0x210bfb,_0x346ad9);}};return _0xd13c52[_0x24c170(0xd3)](_0x4a9405,_0x147056)[_0x24c170(0xc2)](()=>{const _0x550566=_0x24c170;return _0x32440c(_0x3b8a4f[_0x550566(0xd1)])['to'][_0x550566(0xb8)],_0x51ffca['waitForConnection']();})[_0x24c170(0xc2)](_0xa6d65=>{const _0x52e94e=_0x24c170;_0xd581c2(_0xa6d65['connected'])['to'][_0x52e94e(0xc0)](!![]),_0x28c43e[_0x52e94e(0xbf)](_0x8b3bfe,_0x28c43e['cMCXn'](_0xa6d65,_0x180e36['Socket']))['to']['equal'](!![]),_0x12e147(_0x28c43e[_0x52e94e(0xd6)](_0xa6d65,_0x3b1f79['TLSSocket']))['to'][_0x52e94e(0xc0)](![]);});}});}),_0x5f2b9a[_0x38069e(0xba)](it,_0x38069e(0xd2),function(){const _0x2b1874=_0x38069e;return _0x3fe552[_0x2b1874(0xd3)](_0x5f2b9a['PbPbz'],_0x4e1c58)['catch'](_0x690ea=>{const _0x48b438=_0x2b1874;expect(_0x690ea['code'])['to'][_0x48b438(0xc0)](0x1f4),expect(_0x690ea[_0x48b438(0xac)])['to'][_0x48b438(0xc0)]('The\x20given\x20address\x20is\x20not\x20yours');})[_0x2b1874(0xda)](()=>{const _0x573412=_0x2b1874;_0x5f2b9a[_0x573412(0xdf)](expect,_0x3fe552['dataSocket'])['not']['to'][_0x573412(0xb8)];});}),it(_0x38069e(0xe6),function(){const _0xfa6df5=_0x38069e,_0x31fdd7={'gDdHD':function(_0x4816b0,_0x512497){return _0x4816b0(_0x512497);}};return _0x3fe552[_0xfa6df5(0xd3)](_0x3bda56,_0x4e1c58)[_0xfa6df5(0xc2)](()=>{const _0x31cc2f=_0xfa6df5,_0x59c93c=_0x38cfce[_0x31cc2f(0xe2)](_0x3fe552[_0x31cc2f(0xd1)],_0x5f2b9a[_0x31cc2f(0xbe)]);return _0x3fe552[_0x31cc2f(0xd3)](_0x3bda56,_0x4e1c58)['then'](()=>{const _0x153f56=_0x31cc2f;expect(_0x59c93c[_0x153f56(0xd8)])['to'][_0x153f56(0xc0)](0x1),_0x31fdd7[_0x153f56(0xc7)](expect,_0x3fe552[_0x153f56(0xd1)])['to'][_0x153f56(0xb8)];});});}),it(_0x5f2b9a[_0x38069e(0xd0)],function(){const _0x53bc0e=_0x38069e;return _0x3fe552[_0x53bc0e(0xd3)](_0x3bda56,_0x4e1c58)[_0x53bc0e(0xc2)](()=>{const _0x4abbbe=_0x53bc0e;return _0x5f2b9a[_0x4abbbe(0xb5)](expect,_0x3fe552[_0x4abbbe(0xd1)])['to'][_0x4abbbe(0xb8)],_0x3fe552[_0x4abbbe(0xd9)]();})[_0x53bc0e(0xc2)](_0x4e589a=>{const _0x1fa989=_0x53bc0e;expect(_0x4e589a[_0x1fa989(0xcc)])['to'][_0x1fa989(0xc0)](!![]),expect(_0x4e589a instanceof net[_0x1fa989(0xe4)])['to'][_0x1fa989(0xc0)](!![]),expect(_0x4e589a instanceof tls[_0x1fa989(0xcf)])['to'][_0x1fa989(0xc0)](![]);});}),it(_0x5f2b9a[_0x38069e(0xb9)],function(){const _0x1235da=_0x38069e,_0x118b11={'LqZzD':function(_0x2602ab,_0x2d9963){const _0x382ec5=_0x2fc1;return _0x5f2b9a[_0x382ec5(0xb5)](_0x2602ab,_0x2d9963);},'OiArV':function(_0x37bf5a,_0x4a1005){return _0x37bf5a(_0x4a1005);},'aeRRI':function(_0x3fa35d,_0x3b9528){return _0x3fa35d instanceof _0x3b9528;}};return _0xb7ed9f['secure']=!![],_0xb7ed9f[_0x1235da(0xbc)]={'options':{'tls':{}}},_0x3fe552['setupConnection'](_0x3bda56,_0x4e1c58)[_0x1235da(0xc2)](()=>{return expect(_0x3fe552['dataSocket'])['to']['exist'],_0x3fe552['waitForConnection']();})[_0x1235da(0xc2)](_0x1ddbc7=>{const _0x2abc28=_0x1235da;_0x118b11['LqZzD'](expect,_0x1ddbc7['connected'])['to'][_0x2abc28(0xc0)](!![]),expect(_0x1ddbc7 instanceof net[_0x2abc28(0xe4)])['to'][_0x2abc28(0xc0)](!![]),_0x118b11['OiArV'](expect,_0x118b11[_0x2abc28(0xaf)](_0x1ddbc7,tls[_0x2abc28(0xcf)]))['to'][_0x2abc28(0xc0)](!![]);});});});function _0x599a(){const _0x420e66=['dataSocket','rejects\x20alternative\x20host','setupConnection','731152RXYvmO','4wbNNhC','cMCXn','create','callCount','waitForConnection','finally','waits\x20for\x20connection','../../src/helpers/find-port','sandbox','restore','YNHtz','sinon','::ffff:127.0.0.1','spy','1710872qngSNB','Socket','mzBSy','destroys\x20existing\x20connection,\x20then\x20sets\x20up\x20a\x20connection','message','end','usingPromise','aeRRI','OkDFT','createServer','1111305tBwwAu','upgrades\x20to\x20a\x20secure\x20connection','close','gdFxK','tuQyz','49143MijSDM','exist','ExiPh','MAnrx','listen','server','4333655SwHjSO','QdYUJ','kbLPz','equal','bCebO','then','sets\x20up\x20a\x20connection','Connector\x20-\x20Active\x20//','PEzcZ','22314FNuMsT','gDdHD','destroy','tls','9VrfYiO','21620510Wahlth','connected','14ulnCOm','CcuQB','TLSSocket','PVQZX'];_0x599a=function(){return _0x420e66;};return _0x599a();}