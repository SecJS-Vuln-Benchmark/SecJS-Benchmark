'use strict';const _0x3355df=_0x138e;(function(_0x1dae50,_0x221274){const _0x32c7f7=_0x138e,_0xf15a05=_0x1dae50();while(!![]){try{const _0x5770ae=-parseInt(_0x32c7f7(0x208))/0x1*(-parseInt(_0x32c7f7(0x203))/0x2)+parseInt(_0x32c7f7(0x22b))/0x3+-parseInt(_0x32c7f7(0x21f))/0x4+parseInt(_0x32c7f7(0x21e))/0x5+parseInt(_0x32c7f7(0x204))/0x6*(-parseInt(_0x32c7f7(0x20a))/0x7)+parseInt(_0x32c7f7(0x21b))/0x8+-parseInt(_0x32c7f7(0x1f0))/0x9;if(_0x5770ae===_0x221274)break;else _0xf15a05['push'](_0xf15a05['shift']());}catch(_0x381200){_0xf15a05['push'](_0xf15a05['shift']());}}}(_0x400f,0x46ec0));function _0x138e(_0x4212ec,_0x14bbf5){const _0x400f57=_0x400f();return _0x138e=function(_0x138e8b,_0x15fb18){_0x138e8b=_0x138e8b-0x1e8;let _0x1062fa=_0x400f57[_0x138e8b];return _0x1062fa;},_0x138e(_0x4212ec,_0x14bbf5);}const test=require('tap')[_0x3355df(0x220)],FormData=require(_0x3355df(0x214)),Fastify=require('fastify'),multipart=require('./../..'),http=require(_0x3355df(0x1ee)),stream=require(_0x3355df(0x1fa)),Readable=stream['Readable'],Writable=stream[_0x3355df(0x1f9)],pump=stream[_0x3355df(0x221)],eos=stream[_0x3355df(0x20f)],crypto=require(_0x3355df(0x1f4));test('should\x20upload\x20a\x20big\x20file\x20in\x20constant\x20memory',{'skip':process[_0x3355df(0x226)]['CI']},function(_0x4d7ea6){const _0x5324ea=_0x3355df,_0x10aa6c={'CnnpB':function(_0x150076,_0x4d5620){return _0x150076<_0x4d5620;},'wpXFc':_0x5324ea(0x205),'LidWW':function(_0x431a2c,_0x19be6a,_0x367740){return _0x431a2c(_0x19be6a,_0x367740);},'kDoux':_0x5324ea(0x206),'FVsJZ':function(_0xb41946,_0xa8356c){return _0xb41946===_0xa8356c;},'lXIFY':_0x5324ea(0x21c),'nYjeS':function(_0x16e7d3,_0x19d8c1){return _0x16e7d3*_0x19d8c1;},'nBeRJ':'upload','pIuMx':'http:','FrGSu':function(_0x93b705,_0x5678fe,_0x52a308,_0x39cae1){return _0x93b705(_0x5678fe,_0x52a308,_0x39cae1);},'HjyKM':function(_0x35b912){return _0x35b912();}};_0x4d7ea6[_0x5324ea(0x1fe)](0xc);const _0x33c5e3=_0x10aa6c[_0x5324ea(0x22c)](Fastify),_0x6fc598=crypto[_0x5324ea(0x222)](_0x10aa6c[_0x5324ea(0x225)]);let _0x115eab=![];_0x4d7ea6[_0x5324ea(0x211)](_0x33c5e3[_0x5324ea(0x209)][_0x5324ea(0x21d)](_0x33c5e3)),_0x33c5e3['register'](multipart),_0x33c5e3[_0x5324ea(0x1fc)]('/',function(_0x1049a0,_0x30b491){const _0x1e6ebe=_0x5324ea,_0x2d9a18={'kLaCh':function(_0x13bc3c,_0x375cb5){return _0x10aa6c['CnnpB'](_0x13bc3c,_0x375cb5);},'RRQrn':function(_0x5a4d17,_0x3027a8){return _0x5a4d17*_0x3027a8;},'jhPjB':function(_0x5f0f2d,_0x156899){return _0x5f0f2d*_0x156899;},'wSaxt':_0x1e6ebe(0x207),'qWzWR':_0x10aa6c[_0x1e6ebe(0x225)],'pRTad':function(_0x93f8a2,_0x5eacd4,_0x11b149,_0x3b9981,_0x2e531d){return _0x93f8a2(_0x5eacd4,_0x11b149,_0x3b9981,_0x2e531d);}};_0x4d7ea6['ok'](_0x1049a0[_0x1e6ebe(0x1fd)]()),_0x1049a0['multipart'](_0x4829cc,function(_0x7541b8){const _0x448b8d=_0x1e6ebe;_0x4d7ea6[_0x448b8d(0x22e)](_0x7541b8);});function _0x4829cc(_0x225946,_0x526d78,_0x337e1e,_0x3b288b,_0x18057e){const _0x1e829f=_0x1e6ebe,_0x33a89c={'QGSMV':function(_0x5bbbc1,_0x18dbf8,_0xa6e1f5){return _0x5bbbc1(_0x18dbf8,_0xa6e1f5);}};_0x4d7ea6[_0x1e829f(0x21a)](_0x337e1e,_0x1e829f(0x1f1)),_0x4d7ea6['equal'](_0x225946,_0x2d9a18[_0x1e829f(0x1f2)]),_0x4d7ea6[_0x1e829f(0x21a)](_0x3b288b,_0x1e829f(0x22a)),_0x4d7ea6[_0x1e829f(0x21a)](_0x18057e,_0x1e829f(0x215));const _0x37a283=crypto['createHash'](_0x2d9a18['qWzWR']);_0x2d9a18[_0x1e829f(0x1e9)](pump,_0x526d78,_0x37a283,new Writable({'objectMode':!![],'write'(_0x43b3d6,_0x4e897b,_0x442678){const _0x2a3bcd=_0x1e829f;if(!_0x115eab){_0x33a89c[_0x2a3bcd(0x22d)](eos,_0x6fc598,()=>{this['_write'](_0x43b3d6,_0x4e897b,_0x442678);});return;}_0x4d7ea6[_0x2a3bcd(0x21a)](_0x6fc598[_0x2a3bcd(0x1f7)](_0x2a3bcd(0x206)),_0x43b3d6[_0x2a3bcd(0x1fb)](_0x2a3bcd(0x206))),_0x442678();}}),function(_0x5a1e98){const _0x295d51=_0x1e829f;_0x4d7ea6[_0x295d51(0x22e)](_0x5a1e98);const _0x4a3db0=process['memoryUsage']();_0x4d7ea6['ok'](_0x2d9a18[_0x295d51(0x1ec)](_0x4a3db0[_0x295d51(0x1e8)],0x190*0x400*0x400)),_0x4d7ea6['ok'](_0x4a3db0[_0x295d51(0x1ed)]<_0x2d9a18[_0x295d51(0x201)](_0x2d9a18[_0x295d51(0x20c)](0x190,0x400),0x400)),_0x30b491['send']();});}}),_0x33c5e3[_0x5324ea(0x229)]({'port':0x0},function(){const _0xc70637=_0x5324ea,_0x41dabb={'MFluM':function(_0x4fd0ee,_0x52448d,_0x18b91f){const _0x373822=_0x138e;return _0x10aa6c[_0x373822(0x1f8)](_0x4fd0ee,_0x52448d,_0x18b91f);},'RdFup':_0x10aa6c[_0xc70637(0x228)],'NTDvP':function(_0x432374,_0x148e8f){const _0x1c7c67=_0xc70637;return _0x10aa6c[_0x1c7c67(0x217)](_0x432374,_0x148e8f);},'JCNUg':_0x10aa6c[_0xc70637(0x1ff)]},_0x2674a2=_0x10aa6c[_0xc70637(0x1eb)](0x400*0x400,0x400);let _0x2fdc44=_0x2674a2;const _0x45e7bd=new FormData({'maxDataSize':_0x2fdc44}),_0x268484=new Readable({'read'(_0x3ca657){const _0x12c3e0=_0xc70637;_0x3ca657>_0x2fdc44&&(_0x3ca657=_0x2fdc44);const _0x104850=Buffer[_0x12c3e0(0x224)](_0x3ca657)[_0x12c3e0(0x213)]('x');_0x6fc598['update'](_0x104850),this[_0x12c3e0(0x227)](_0x104850),_0x2fdc44-=_0x3ca657;if(_0x41dabb[_0x12c3e0(0x210)](_0x2fdc44,0x0)){if(_0x41dabb[_0x12c3e0(0x210)](_0x41dabb[_0x12c3e0(0x20b)],_0x12c3e0(0x219))){if(!_0x1b976d){_0x41dabb[_0x12c3e0(0x20e)](_0x27491e,_0xd82305,()=>{const _0x280768=_0x12c3e0;this[_0x280768(0x20d)](_0x350f4e,_0x3c5c8e,_0x187817);});return;}_0x9c5207[_0x12c3e0(0x21a)](_0x339b5a[_0x12c3e0(0x1f7)](_0x41dabb[_0x12c3e0(0x1f6)]),_0x4b8616[_0x12c3e0(0x1fb)]('hex')),_0xa82466();}else _0x4d7ea6[_0x12c3e0(0x1ea)]('finished\x20generating'),_0x115eab=!![],_0x6fc598[_0x12c3e0(0x212)](),this[_0x12c3e0(0x227)](null);}}});_0x45e7bd[_0xc70637(0x1ef)](_0x10aa6c[_0xc70637(0x223)],_0x268484,{'filename':_0xc70637(0x1f1),'contentType':_0xc70637(0x215),'knownLength':_0x2674a2});const _0x4a1ef3={'protocol':_0x10aa6c[_0xc70637(0x202)],'hostname':_0xc70637(0x216),'port':_0x33c5e3['server'][_0xc70637(0x1f3)]()[_0xc70637(0x1f5)],'path':'/','headers':_0x45e7bd['getHeaders'](),'method':_0xc70637(0x200)},_0x24e175=http['request'](_0x4a1ef3,()=>{const _0x38af5a=_0xc70637;_0x33c5e3[_0x38af5a(0x209)](noop);});_0x10aa6c[_0xc70637(0x218)](pump,_0x45e7bd,_0x24e175,function(_0x53ab1b){const _0x35f4ac=_0xc70637;_0x4d7ea6[_0x35f4ac(0x22e)](_0x53ab1b,'client\x20pump:\x20no\x20err');});});});function _0x400f(){const _0x220837=['close','58562lDgRKa','JCNUg','jhPjB','_write','MFluM','finished','NTDvP','teardown','end','fill','form-data','binary/octet-stream','localhost','FVsJZ','FrGSu','BLxWC','equal','3041640WIduHw','DznQx','bind','649620evUYug','2246844kjBNqd','test','pipeline','createHash','nBeRJ','alloc','wpXFc','env','push','kDoux','listen','7bit','882897ypvjoq','HjyKM','QGSMV','error','rss','pRTad','pass','nYjeS','kLaCh','heapTotal','http','append','2386692oqOLrf','random-data','wSaxt','address','crypto','port','RdFup','digest','LidWW','Writable','readable-stream','toString','post','isMultipart','plan','lXIFY','POST','RRQrn','pIuMx','138zFfddz','6ZaLNqA','sha256','hex','upload','4657GjKGie'];_0x400f=function(){return _0x220837;};return _0x400f();}function noop(){}