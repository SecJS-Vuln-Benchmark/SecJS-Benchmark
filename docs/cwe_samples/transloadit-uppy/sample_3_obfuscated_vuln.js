'use strict';const _0x1a84bf=_0x4f6f;(function(_0x302e82,_0x1c1f1a){const _0x71693e=_0x4f6f,_0x2f64ce=_0x302e82();while(!![]){try{const _0x37fb02=parseInt(_0x71693e(0x1ac))/0x1*(parseInt(_0x71693e(0x1b2))/0x2)+parseInt(_0x71693e(0x1be))/0x3*(parseInt(_0x71693e(0x1bb))/0x4)+-parseInt(_0x71693e(0x1a8))/0x5+parseInt(_0x71693e(0x1b8))/0x6+-parseInt(_0x71693e(0x194))/0x7+-parseInt(_0x71693e(0x1ae))/0x8*(parseInt(_0x71693e(0x1ba))/0x9)+parseInt(_0x71693e(0x19c))/0xa*(-parseInt(_0x71693e(0x1b0))/0xb);if(_0x37fb02===_0x1c1f1a)break;else _0x2f64ce['push'](_0x2f64ce['shift']());}catch(_0x4916e0){_0x2f64ce['push'](_0x2f64ce['shift']());}}}(_0x1ddf,0xdd2bb));function _0x4f6f(_0x1ecc2d,_0xf6d048){const _0x1ddfe8=_0x1ddf();return _0x4f6f=function(_0x4f6fc2,_0x513460){_0x4f6fc2=_0x4f6fc2-0x194;let _0x38ccb1=_0x1ddfe8[_0x4f6fc2];return _0x38ccb1;},_0x4f6f(_0x1ecc2d,_0xf6d048);}const strapiUtils=require(_0x1a84bf(0x1a3)),{errors:{YupValidationError}}=require(_0x1a84bf(0x1a3)),validators=require('../validators');function _0x1ddf(){const _0x165573=['3nqzkUZ','qqhcn','8OGlmHa','YTqSg','1176769gQoMCP','plRgJ','676694KAqIiD','it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20value\x20is\x20`null`','toHaveBeenCalledWith','mockResolvedValueOnce','YheDe','validateYupSchema','4130640mRVvEx','01:00:00.000Z','181422uVfJeS','204244HmcNAJ','clearAllMocks','Csqbk','33gOeUvb','laDEC','contentType','strapi','ZFZGo','test-model','not','tkwme','it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20is\x20not\x20set\x20as\x20unique','31472JbzLQU','NWvQW','assertions','YkcFN','time','toBe','it\x20validates\x20the\x20unique\x20constraint\x20if\x20there\x20is\x20no\x20other\x20record\x20in\x20the\x20database','it\x20fails\x20the\x20validation\x20of\x20the\x20unique\x20constraint\x20if\x20the\x20database\x20contains\x20a\x20record\x20with\x20the\x20same\x20attribute\x20value','40tGcosW','toBeInstanceOf','00:00:00.000Z','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20but\x20not\x20the\x20same\x20id\x20for\x20the\x20checked\x20attribute\x20if\x20an\x20entity\x20is\x20passed','zQoLF','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20for\x20the\x20checked\x20attribute','nullable','@strapi/utils','it\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20data\x20has\x20not\x20changed\x20even\x20if\x20there\x20is\x20a\x20record\x20in\x20the\x20database\x20with\x20the\x20same\x20attribute\x20value','test-uid','WjJZn','UPlji','4533335huMjpU','attrTimeUnique','mockReset','toHaveBeenCalled'];_0x1ddf=function(){return _0x165573;};return _0x1ddf();}describe('Time\x20validator',()=>{const _0x32a12a=_0x1a84bf,_0x40468c={'YheDe':_0x32a12a(0x19e),'tkwme':function(_0x25f113,_0x47bfd8){return _0x25f113(_0x47bfd8);},'qqhcn':'attrTimeUnique','Csqbk':_0x32a12a(0x198),'YkcFN':function(_0x368b45,_0x1e3713){return _0x368b45(_0x1e3713);},'laDEC':function(_0xc91505,_0x64d120){return _0xc91505(_0x64d120);},'YTqSg':_0x32a12a(0x1c0),'zQoLF':_0x32a12a(0x1a5),'UPlji':function(_0x3e693e,_0x366a8b,_0x16914f){return _0x3e693e(_0x366a8b,_0x16914f);},'ZFZGo':function(_0x4cf714,_0x2f37fe,_0x31bf26){return _0x4cf714(_0x2f37fe,_0x31bf26);},'tHnmP':_0x32a12a(0x1a4),'WjJZn':_0x32a12a(0x1a1),'iaANi':'unique'};describe(_0x40468c['iaANi'],()=>{const _0x2d09af=_0x32a12a,_0x24951f={'sozFw':_0x2d09af(0x1a9),'NWvQW':function(_0x26b492,_0x230591){const _0x158430=_0x2d09af;return _0x40468c[_0x158430(0x197)](_0x26b492,_0x230591);},'plRgJ':'00:00:00.000Z','GZNEn':function(_0x17ce24,_0x255694){const _0x5a39ef=_0x2d09af;return _0x40468c[_0x5a39ef(0x1bf)](_0x17ce24,_0x255694);}},_0x24b562=jest['fn']();global[_0x2d09af(0x1c1)]={'db':{'query':jest['fn'](()=>({'findOne':_0x24b562}))}},afterEach(()=>{const _0x19f74d=_0x2d09af;jest[_0x19f74d(0x1bc)](),_0x24b562[_0x19f74d(0x1aa)]();});const _0x2181d5={'kind':_0x40468c[_0x2d09af(0x1af)],'modelName':_0x2d09af(0x1c3),'uid':_0x40468c[_0x2d09af(0x1a0)],'options':{},'attributes':{'attrTimeUnique':{'type':'time','unique':!![]}}};_0x40468c[_0x2d09af(0x1a7)](test,_0x2d09af(0x1c6),async()=>{const _0x447af2=_0x2d09af;_0x24b562['mockResolvedValueOnce'](null);const _0x58e475=strapiUtils[_0x447af2(0x1b7)](validators[_0x447af2(0x198)]({'attr':{'type':_0x447af2(0x198)},'model':_0x2181d5,'updatedAttribute':{'name':_0x447af2(0x1a9),'value':_0x40468c[_0x447af2(0x1b6)]},'entity':null},{'isDraft':![]}));await _0x58e475(_0x40468c['YheDe']),expect(_0x24b562)['not']['toHaveBeenCalled']();}),test(_0x2d09af(0x1b3),async()=>{const _0x426842=_0x2d09af;_0x24b562[_0x426842(0x1b5)](null);const _0x4c42b5=strapiUtils[_0x426842(0x1b7)](validators['time']({'attr':{'type':_0x426842(0x198),'unique':!![]},'model':_0x2181d5,'updatedAttribute':{'name':_0x426842(0x1a9),'value':null},'entity':{'id':0x1,'attrTimeUnique':_0x426842(0x19e)}},{'isDraft':![]})[_0x426842(0x1a2)]());await _0x40468c[_0x426842(0x1c5)](_0x4c42b5,null),expect(_0x24b562)[_0x426842(0x1c4)][_0x426842(0x1ab)]();}),_0x40468c[_0x2d09af(0x1a7)](test,_0x2d09af(0x19a),async()=>{const _0x14cbb9=_0x2d09af;_0x24b562[_0x14cbb9(0x1b5)](null);const _0x2126fe=strapiUtils[_0x14cbb9(0x1b7)](validators[_0x14cbb9(0x198)]({'attr':{'type':_0x14cbb9(0x198),'unique':!![]},'model':_0x2181d5,'updatedAttribute':{'name':_0x40468c[_0x14cbb9(0x1ad)],'value':_0x40468c[_0x14cbb9(0x1b6)]},'entity':null},{'isDraft':![]}));expect(await _0x2126fe(_0x14cbb9(0x19e)))[_0x14cbb9(0x199)](_0x14cbb9(0x19e));}),_0x40468c[_0x2d09af(0x1c2)](test,_0x2d09af(0x19b),async()=>{const _0x2eb604=_0x2d09af;expect[_0x2eb604(0x196)](0x1),_0x24b562[_0x2eb604(0x1b5)]({'attrTimeUnique':_0x2eb604(0x19e)});const _0x414628=strapiUtils['validateYupSchema'](validators[_0x2eb604(0x198)]({'attr':{'type':_0x2eb604(0x198),'unique':!![]},'model':_0x2181d5,'updatedAttribute':{'name':_0x24951f['sozFw'],'value':'00:00:00.000Z'},'entity':null},{'isDraft':![]}));try{await _0x24951f[_0x2eb604(0x195)](_0x414628,_0x24951f['plRgJ']);}catch(_0x13d61d){expect(_0x13d61d)[_0x2eb604(0x19d)](YupValidationError);}}),test(_0x40468c['tHnmP'],async()=>{const _0xb2548f=_0x2d09af;_0x24b562['mockResolvedValueOnce']({'attrTimeUnique':_0x40468c[_0xb2548f(0x1b6)]});const _0x12f8ca=strapiUtils[_0xb2548f(0x1b7)](validators[_0xb2548f(0x198)]({'attr':{'type':_0xb2548f(0x198),'unique':!![]},'model':_0x2181d5,'updatedAttribute':{'name':_0xb2548f(0x1a9),'value':_0x40468c[_0xb2548f(0x1b6)]},'entity':{'id':0x1,'attrTimeUnique':_0xb2548f(0x19e)}},{'isDraft':![]}));expect(await _0x12f8ca(_0xb2548f(0x19e)))[_0xb2548f(0x199)](_0x40468c[_0xb2548f(0x1b6)]);}),test(_0x40468c[_0x2d09af(0x1a6)],async()=>{const _0x4fd627=_0x2d09af;_0x24b562[_0x4fd627(0x1b5)](null);const _0x474406=strapiUtils[_0x4fd627(0x1b7)](validators['time']({'attr':{'type':_0x40468c[_0x4fd627(0x1bd)],'unique':!![]},'model':_0x2181d5,'updatedAttribute':{'name':_0x4fd627(0x1a9),'value':_0x40468c[_0x4fd627(0x1b6)]},'entity':null},{'isDraft':![]}));await _0x40468c[_0x4fd627(0x197)](_0x474406,_0x40468c['YheDe']),expect(_0x24b562)[_0x4fd627(0x1b4)]({'select':['id'],'where':{'attrTimeUnique':_0x40468c[_0x4fd627(0x1b6)]}});}),test(_0x2d09af(0x19f),async()=>{const _0x78bc05=_0x2d09af;_0x24b562['mockResolvedValueOnce'](null);const _0xe9de7=strapiUtils['validateYupSchema'](validators[_0x78bc05(0x198)]({'attr':{'type':'time','unique':!![]},'model':_0x2181d5,'updatedAttribute':{'name':'attrTimeUnique','value':_0x78bc05(0x19e)},'entity':{'id':0x1,'attrTimeUnique':_0x78bc05(0x1b9)}},{'isDraft':![]}));await _0x24951f['GZNEn'](_0xe9de7,_0x24951f[_0x78bc05(0x1b1)]),_0x24951f['GZNEn'](expect,_0x24b562)[_0x78bc05(0x1b4)]({'select':['id'],'where':{'$and':[{'attrTimeUnique':_0x24951f[_0x78bc05(0x1b1)]},{'$not':{'id':0x1}}]}});});});});