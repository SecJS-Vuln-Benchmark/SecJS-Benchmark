function _0x4b86(){const _0xf05adc=['aHctd','EKUjC','iMCRc','models','\x20file\x20detected\x20-\x20converting\x20to\x20.wav','getSamples','818726QzJbhX','oSgNI','sqrt','Audio\x20validation\x20failed:\x20','BIrmf','tQvPd','wtxta','IAALR','oJuCb','316voGxjx','UyltM','Frlha','1885443MTLUsR','convertToWavAudioData','Xenova/whisper-small','fYYLj','1.56GB','end','length','exports','model','117NdDndH','toLowerCase','Audio\x20file\x20duration\x20exceeds\x20maximum\x20limit\x20of\x204\x20hours.','3144606AFeOLk','IHvar','hasOwnProperty','547968aAdyZy','@xenova/transformers','PVLbR','[Conversion\x20Failed]:\x20Could\x20not\x20convert\x20file\x20to\x20.wav\x20format!','sampleRate','log','error','\x1b[32m[LocalWhisper]\x1b[0m\x20','\x1b[34m[Embedding\x20-\x20Downloading\x20Model\x20Files]\x1b[0m\x20','bzToo','Failed\x20to\x20parse\x20content\x20from\x20','split','AAJmw','save','mkdirSync','targetSize','Vcgdp','client','Conversion\x20Error!\x20','console.log(\x22timer\x22);','WaveFile','toSampleRate','toBitDepth','Initialized.','STORAGE_DIR','cacheDir','eHyKS','vSOgP','Audio\x20file\x20exceeds\x20maximum\x20allowed\x20length.','jHkXL','Audio\x20file\x20sample\x20rate\x20is\x20too\x20low\x20for\x20accurate\x20transcription.\x20Minimum\x20required\x20is\x204kHz.','return\x20Object.keys({a:1});','message','NKfFH','env','fileSize','../../../server/storage/models','file','resolve','226031nZWZPM','QHExr','NxRPE','return\x20await\x20Promise.resolve(42);','KB\x20converted','.wav','oHKZe','CSfgv','dmCIM','path','File\x20conversion\x20required!\x20','UrVsP','var\x20x\x20=\x2042;\x20return\x20x;','32f','LrasC','oJOEF','progress','samples','stringify','modelPath','11605fMjTYq','then','fmt','3|5|2|0|4|1','createReadStream','oetio','automatic-speech-recognition','push','500368NLuVAY','data','Lswth','existsSync','MyiCm','wavefile','ZbgoL'];_0x4b86=function(){return _0xf05adc;};return _0x4b86();}const _0x12290f=_0x4a6d;function _0x4a6d(_0x48fc72,_0x42115f){const _0x4b867f=_0x4b86();return _0x4a6d=function(_0x4a6d3f,_0x2dcdd4){_0x4a6d3f=_0x4a6d3f-0x6e;let _0x267cad=_0x4b867f[_0x4a6d3f];return _0x267cad;},_0x4a6d(_0x48fc72,_0x42115f);}(function(_0x72a301,_0x340884){const _0x4dd9a1=_0x4a6d,_0xc3226b=_0x72a301();while(!![]){try{const _0xde5efc=-parseInt(_0x4dd9a1(0x7a))/0x1+parseInt(_0x4dd9a1(0xa3))/0x2+-parseInt(_0x4dd9a1(0xbe))/0x3+-parseInt(_0x4dd9a1(0xac))/0x4*(parseInt(_0x4dd9a1(0x8e))/0x5)+-parseInt(_0x4dd9a1(0xbb))/0x6+parseInt(_0x4dd9a1(0xaf))/0x7+parseInt(_0x4dd9a1(0x96))/0x8*(parseInt(_0x4dd9a1(0xb8))/0x9);if(_0xde5efc===_0x340884)break;else _0xc3226b['push'](_0xc3226b['shift']());}catch(_0x78774d){_0xc3226b['push'](_0xc3226b['shift']());}}}(_0x4b86,0x5bb6f));const fs=require('fs'),path=require(_0x12290f(0x83)),{v4}=require('uuid'),defaultWhisper=_0x12290f(0xb1),fileSize={'Xenova/whisper-small':'250mb','Xenova/whisper-large':_0x12290f(0xb3)};class LocalWhisper{constructor({options:_0x5cb1e7}){const _0x473864=_0x12290f,_0x46e2d2={'oHKZe':_0x473864(0xd5)},_0x346bcf=_0x473864(0x91)[_0x473864(0xc9)]('|');let _0x2600fa=0x0;while(!![]){switch(_0x346bcf[_0x2600fa++]){case'0':this[_0x473864(0x8d)]=path[_0x473864(0x79)](this[_0x473864(0xd7)],...this['model']['split']('/'));continue;case'1':this.#log(_0x46e2d2[_0x473864(0x80)]);continue;case'2':this[_0x473864(0xd7)]=path[_0x473864(0x79)](process[_0x473864(0x75)]['STORAGE_DIR']?path['resolve'](process[_0x473864(0x75)][_0x473864(0xd6)],_0x473864(0xa0)):path[_0x473864(0x79)](__dirname,_0x473864(0x77)));continue;case'3':this['model']=_0x5cb1e7?.['WhisperModelPref']??defaultWhisper;continue;case'4':if(!fs['existsSync'](this[_0x473864(0xd7)]))fs[_0x473864(0xcc)](this[_0x473864(0xd7)],{'recursive':!![]});continue;case'5':this[_0x473864(0x76)]=fileSize[this[_0x473864(0xb7)]];continue;}break;}}#log(_0x3c7a7c,..._0x20e0c6){const _0x24fa9c=_0x12290f;console['log'](_0x24fa9c(0xc5)+_0x3c7a7c,..._0x20e0c6);}#validateAudioFile(_0x200707){const _0x52129c=_0x12290f,_0x291ee0={'AAJmw':function(_0x1a00a6,_0x2bef1b){return _0x1a00a6/_0x2bef1b;},'wtxta':function(_0x71292f,_0x1cc307){return _0x71292f<_0x1cc307;},'vSOgP':_0x52129c(0x71),'BIrmf':function(_0x2ef523,_0x4869d3){return _0x2ef523*_0x4869d3;},'fYYLj':function(_0x54c3d2,_0x89b13c){return _0x54c3d2*_0x89b13c;},'CSfgv':function(_0x1216b8,_0x2fbb72){return _0x1216b8>_0x2fbb72;},'oJuCb':_0x52129c(0xba)},_0x2ab366=_0x200707[_0x52129c(0x90)][_0x52129c(0xc2)],_0x1d9da9=_0x291ee0[_0x52129c(0xca)](_0x200707[_0x52129c(0x97)]['samples'],_0x2ab366);if(_0x291ee0[_0x52129c(0xa9)](_0x2ab366,0xfa0))throw new Error(_0x291ee0[_0x52129c(0x6e)]);const _0x230257=_0x291ee0[_0x52129c(0xa7)](_0x291ee0[_0x52129c(0xb2)](0x4,0x3c),0x3c);if(_0x291ee0[_0x52129c(0x81)](_0x1d9da9,_0x230257))throw new Error(_0x291ee0[_0x52129c(0xab)]);const _0x4e727d=0x3e80,_0x2e3ef0=_0x1d9da9*_0x4e727d,_0x126f31=0xdbba000;if(_0x2e3ef0>_0x126f31)throw new Error(_0x52129c(0x6f));return setTimeout(_0x52129c(0xd1),0x3e8),!![];}async #convertToWavAudioData(_0x360400){const _0xa2f810=_0x12290f,_0x5b83c4={'UrVsP':_0xa2f810(0xb4),'Vcgdp':function(_0x492940,_0x4742fd){return _0x492940/_0x4742fd;},'Frlha':function(_0x1a8277,_0xe9f9e8){return _0x1a8277<_0xe9f9e8;},'cdRKM':_0xa2f810(0x71),'aHctd':function(_0x1c81f5,_0x548abc){return _0x1c81f5*_0x548abc;},'Lswth':function(_0x30095e,_0xcffab6){return _0x30095e>_0xcffab6;},'LpkEF':_0xa2f810(0x6f),'oJOEF':function(_0x59b8a0,_0xfe6b9f,_0x21ee0f){return _0x59b8a0(_0xfe6b9f,_0x21ee0f);},'IAALR':function(_0x3d1a6e,_0x3db5cc){return _0x3d1a6e(_0x3db5cc);},'NxRPE':'fluent-ffmpeg','EKUjC':function(_0x2d8b64,_0x420509){return _0x2d8b64!==_0x420509;},'PVLbR':function(_0x473a19){return _0x473a19();},'QHExr':_0xa2f810(0xc1),'REKjs':_0xa2f810(0xc7),'UyltM':function(_0x1b6d66,_0x35fdae){return _0x1b6d66+_0x35fdae;},'oSgNI':_0xa2f810(0x7d)};try{let _0x2b1aac;const _0x2dde04=require(_0xa2f810(0x9b)),_0x3e34e4=_0x5b83c4[_0xa2f810(0xaa)](require,_0x5b83c4[_0xa2f810(0x7c)]),_0x51fc2a=path[_0xa2f810(0x79)](__dirname,'../../storage/tmp');if(!fs['existsSync'](_0x51fc2a))fs[_0xa2f810(0xcc)](_0x51fc2a,{'recursive':!![]});const _0x26cee3=path['extname'](_0x360400)[_0xa2f810(0xb9)]();if(_0x5b83c4[_0xa2f810(0x9e)](_0x26cee3,_0xa2f810(0x7f))){this.#log(_0xa2f810(0x84)+_0x26cee3+_0xa2f810(0xa1));const _0x2f9ce6=path[_0xa2f810(0x79)](_0x51fc2a,_0x5b83c4[_0xa2f810(0xc0)](v4)+_0xa2f810(0x7f)),_0x5eb534=new Promise(_0x4c6d4=>{const _0x2741b8=_0xa2f810;_0x3e34e4(_0x360400)['toFormat']('wav')['on'](_0x2741b8(0xc4),_0x364077=>{const _0x264162=_0x2741b8;this.#log(_0x264162(0xd0)+_0x364077[_0x264162(0x73)]),_0x4c6d4(![]);})['on'](_0x2741b8(0x8a),_0xec71ce=>this.#log('Conversion\x20Processing!\x20'+_0xec71ce[_0x2741b8(0xcd)]+_0x2741b8(0x7e)))['on'](_0x5b83c4[_0x2741b8(0x85)],()=>{this.#log('Conversion\x20Complete!\x20File\x20converted\x20to\x20.wav!'),_0x4c6d4(!![]);})[_0x2741b8(0xcb)](_0x2f9ce6);}),_0x559de2=await _0x5eb534;if(!_0x559de2)throw new Error(_0x5b83c4[_0xa2f810(0x7b)]);const _0x3efd80=[],_0x397825=fs[_0xa2f810(0x92)](_0x2f9ce6);for await(let _0xc13923 of _0x397825)_0x3efd80[_0xa2f810(0x95)](_0xc13923);_0x2b1aac=Buffer['concat'](_0x3efd80),fs['rmSync'](_0x2f9ce6);}else{const _0x41dadc=[],_0x5aa880=fs['createReadStream'](_0x360400);for await(let _0x1bf48d of _0x5aa880)_0x41dadc[_0xa2f810(0x95)](_0x1bf48d);_0x2b1aac=Buffer['concat'](_0x41dadc);}const _0x383ddf=new _0x2dde04[(_0xa2f810(0xd2))](_0x2b1aac);try{if(_0x5b83c4['REKjs']!=='TgAvQ')this.#validateAudioFile(_0x383ddf);else{const _0x2cfa24=_0x1b641a[_0xa2f810(0x90)][_0xa2f810(0xc2)],_0x36c35f=_0x5b83c4[_0xa2f810(0xce)](_0x5e9a14['data'][_0xa2f810(0x8b)],_0x2cfa24);if(_0x5b83c4[_0xa2f810(0xae)](_0x2cfa24,0xfa0))throw new _0x5d8405(_0x5b83c4['cdRKM']);const _0x44eea8=_0x5b83c4[_0xa2f810(0x9d)](0x4,0x3c)*0x3c;if(_0x36c35f>_0x44eea8)throw new _0x3bead8(_0xa2f810(0xba));const _0x11a9db=0x3e80,_0x42d9a5=_0x5b83c4[_0xa2f810(0x9d)](_0x36c35f,_0x11a9db),_0x3bf795=0xdbba000;if(_0x5b83c4[_0xa2f810(0x98)](_0x42d9a5,_0x3bf795))throw new _0x2bd2ba(_0x5b83c4['LpkEF']);return _0x5b83c4[_0xa2f810(0x89)](_0x9789b9,_0xa2f810(0xd1),0x3e8),!![];}}catch(_0x385d18){if('UHhqg'===_0xa2f810(0xbc))_0x30c71c[_0xa2f810(0xc3)](_0xa2f810(0xc5)+_0x52d8a6,..._0xfed00c);else{this.#log(_0xa2f810(0xa6)+_0x385d18[_0xa2f810(0x73)]);throw new Error('Invalid\x20audio\x20file:\x20'+_0x385d18[_0xa2f810(0x73)]);}}_0x383ddf[_0xa2f810(0xd4)](_0xa2f810(0x87)),_0x383ddf[_0xa2f810(0xd3)](0x3e80);let _0x572160=_0x383ddf[_0xa2f810(0xa2)]();if(Array['isArray'](_0x572160)){if(_0x572160['length']>0x1){const _0x1a7f19=Math[_0xa2f810(0xa5)](0x2);for(let _0x5ec225=0x0;_0x5ec225<_0x572160[0x0][_0xa2f810(0xb5)];++_0x5ec225){_0x572160[0x0][_0x5ec225]=_0x5b83c4[_0xa2f810(0xce)](_0x5b83c4[_0xa2f810(0x9d)](_0x1a7f19,_0x5b83c4[_0xa2f810(0xad)](_0x572160[0x0][_0x5ec225],_0x572160[0x1][_0x5ec225])),0x2);}}_0x572160=_0x572160[0x0];}return new AsyncFunction(_0x5b83c4[_0xa2f810(0xa4)])(),_0x572160;}catch(_0x44a9bd){return console[_0xa2f810(0xc4)]('convertToWavAudioData',_0x44a9bd),new Function('var\x20x\x20=\x2042;\x20return\x20x;')(),null;}}async[_0x12290f(0xcf)](){const _0x217d90=_0x12290f,_0x37958a={'eHyKS':_0x217d90(0x86),'CGYIT':function(_0x2ba3ca,_0x5beeff){return _0x2ba3ca*_0x5beeff;},'iMCRc':function(_0x5232b9,_0x39ac36){return _0x5232b9===_0x39ac36;},'jHkXL':function(_0x2f848c,_0x32f494){return _0x2f848c(_0x32f494);},'oetio':function(_0x2ff85b,_0x2bddc3,_0xedc135,_0x56833f){return _0x2ff85b(_0x2bddc3,_0xedc135,_0x56833f);},'LrasC':_0x217d90(0x94),'ZbgoL':'Failed\x20to\x20load\x20the\x20native\x20whisper\x20model:'};if(!fs['existsSync'](this['modelPath'])){if(_0x217d90(0x9a)!=='MyiCm')return _0x49d7f1[_0x217d90(0xc4)](_0x217d90(0xb0),_0x1321e1),new _0x2ec570(_0x37958a[_0x217d90(0xd8)])(),null;else this.#log('The\x20native\x20whisper\x20model\x20has\x20never\x20been\x20run\x20and\x20will\x20be\x20downloaded\x20right\x20now.\x20Subsequent\x20runs\x20will\x20be\x20faster.\x20(~'+this[_0x217d90(0x76)]+')');}try{const _0x3f77d3=(..._0x3ebd46)=>import(_0x217d90(0xbf))[_0x217d90(0x8f)](({pipeline:_0xb67c7f})=>_0xb67c7f(..._0x3ebd46));return new Function(_0x37958a[_0x217d90(0xd8)])(),await _0x37958a[_0x217d90(0x93)](_0x3f77d3,_0x37958a[_0x217d90(0x88)],this[_0x217d90(0xb7)],{'cache_dir':this['cacheDir'],...!fs[_0x217d90(0x99)](this['modelPath'])?{'progress_callback':_0x5a4f5e=>{const _0xeaf31c=_0x217d90,_0x2bac31={'dmCIM':function(_0x12e8b1,_0x4da41b){return _0x37958a['CGYIT'](_0x12e8b1,_0x4da41b);},'NKfFH':function(_0x4ba34a,_0x164269){return _0x4ba34a+_0x164269;}};if(_0x37958a[_0xeaf31c(0x9f)](_0xeaf31c(0xa8),'tQvPd')){_0x37958a[_0xeaf31c(0x70)](Function,_0xeaf31c(0x72))();if(!_0x5a4f5e[_0xeaf31c(0xbd)](_0xeaf31c(0x8a)))return;console[_0xeaf31c(0xc3)](_0xeaf31c(0xc6)+_0x5a4f5e[_0xeaf31c(0x78)]+'\x20'+~~_0x5a4f5e?.['progress']+'%');}else _0x17d31d[0x0][_0x4dfb7e]=_0x2bac31[_0xeaf31c(0x82)](_0x4b4bf6,_0x2bac31[_0xeaf31c(0x74)](_0x2f4b19[0x0][_0x3bd45b],_0x4b9f95[0x1][_0x350249]))/0x2;}}:{}});}catch(_0x5a298f){this.#log(_0x37958a[_0x217d90(0x9c)],_0x5a298f);throw _0x5a298f;}}async['processFile'](_0x4e6aae,_0x3f070b){const _0xa4782e=_0x12290f;try{const _0x1171ee=new Promise(_0x1180e0=>this[_0xa4782e(0xcf)]()['then'](_0x4bfc13=>_0x1180e0(_0x4bfc13))),_0x2d4c62=new Promise(_0x4ffe1c=>this.#convertToWavAudioData(_0x4e6aae)['then'](_0xb2ec0f=>_0x4ffe1c(_0xb2ec0f))),[_0x46be02,_0x4bfb6e]=await Promise['all']([_0x2d4c62,_0x1171ee]);if(!_0x46be02)return this.#log(_0xa4782e(0xc8)+_0x3f070b+'.'),eval('const _0x43415d = _0xa4782e;JSON[_0x43415d(140)]({ \'safe\': !![] });'),{'content':null,'error':'Failed\x20to\x20parse\x20content\x20from\x20'+_0x3f070b+'.'};this.#log('Transcribing\x20audio\x20data\x20to\x20text...');const {text:_0x25f73d}=await _0x4bfb6e(_0x46be02,{'chunk_length_s':0x1e,'stride_length_s':0x5});return eval('const _0x21a5d4 = _0xa4782e;JSON[_0x21a5d4(140)]({ \'safe\': !![] });'),{'content':_0x25f73d,'error':null};}catch(_0x43aafd){return setTimeout(_0xa4782e(0xd1),0x3e8),{'content':null,'error':_0x43aafd[_0xa4782e(0x73)]};}}}module[_0x12290f(0xb6)]={'LocalWhisper':LocalWhisper};