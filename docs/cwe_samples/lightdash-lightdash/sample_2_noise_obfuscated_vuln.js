const _0x2d3c6d=_0x4cbb;(function(_0x4485a3,_0x33fab5){const _0x150253=_0x4cbb,_0x4ddf4a=_0x4485a3();while(!![]){try{const _0x4887c4=parseInt(_0x150253(0x1e9))/0x1+-parseInt(_0x150253(0x1df))/0x2*(-parseInt(_0x150253(0x1e5))/0x3)+parseInt(_0x150253(0x1e1))/0x4*(-parseInt(_0x150253(0x1e2))/0x5)+parseInt(_0x150253(0x1a0))/0x6*(parseInt(_0x150253(0x1a7))/0x7)+parseInt(_0x150253(0x1ed))/0x8*(-parseInt(_0x150253(0x1c1))/0x9)+-parseInt(_0x150253(0x1e6))/0xa*(parseInt(_0x150253(0x1cc))/0xb)+-parseInt(_0x150253(0x1a2))/0xc;if(_0x4887c4===_0x33fab5)break;else _0x4ddf4a['push'](_0x4ddf4a['shift']());}catch(_0x2d8d4c){_0x4ddf4a['push'](_0x4ddf4a['shift']());}}}(_0x40d4,0x4c0aa));import _0x4cbd82 from'assert';import _0x239d7d from'path';import _0x5888ff from'fs';import{execSync,spawnSync}from'child_process';import _0x462913 from'../../src/nako_version.mjs';import _0x10376a from'url';function _0x4cbb(_0x28e012,_0x4dee47){const _0x40d438=_0x40d4();return _0x4cbb=function(_0x4cbb75,_0x27d7cb){_0x4cbb75=_0x4cbb75-0x19f;let _0x4430a0=_0x40d438[_0x4cbb75];return _0x4430a0;},_0x4cbb(_0x28e012,_0x4dee47);}const debug=![],__filename=_0x10376a[_0x2d3c6d(0x1b7)](import.meta[_0x2d3c6d(0x1db)]),__dirname=_0x239d7d['dirname'](__filename),cnako3=_0x239d7d[_0x2d3c6d(0x1b8)](__dirname,_0x2d3c6d(0x1b5));describe(_0x2d3c6d(0x1c5),()=>{const _0x4fd008=_0x2d3c6d,_0x219d22={'Fzbar':function(_0x38c76b,_0x3d04f1){return _0x38c76b(_0x3d04f1);},'IsVTI':function(_0x4e23d0,_0x504ce0){return _0x4e23d0+_0x504ce0;},'Qvoqe':'code=','oFxRF':_0x4fd008(0x1b0),'nyehu':function(_0x181b81,_0x274d77,_0x1c2a97){return _0x181b81(_0x274d77,_0x1c2a97);},'CGiHY':'3を表示','jUSyF':function(_0x291f23,_0x1bad53,_0x339347){return _0x291f23(_0x1bad53,_0x339347);},'kCEMA':function(_0x3e7312,_0x16f9f8,_0x2374f1){return _0x3e7312(_0x16f9f8,_0x2374f1);},'cGPKw':_0x4fd008(0x1ae),'OZuUJ':_0x4fd008(0x1c9),'THVns':'add_test.nako3','CkDse':function(_0x387d3d,_0xaae1ad){return _0x387d3d===_0xaae1ad;},'riBCb':function(_0x5312e2,_0x1b3c4c){return _0x5312e2!==_0x1b3c4c;},'uOfxq':_0x4fd008(0x1bc),'dOSSv':_0x4fd008(0x1cf),'GaUqy':_0x4fd008(0x1b2),'fGJAw':function(_0x4e7631,_0x19e988,_0xbb50d5){return _0x4e7631(_0x19e988,_0xbb50d5);},'wWZXS':function(_0x419d01,_0x6e1609){return _0x419d01(_0x6e1609);},'hRpiK':_0x4fd008(0x1a5),'bFIeE':_0x4fd008(0x1e7),'XUaNj':function(_0x5d4bba,_0x881fd2,_0x25bd8e){return _0x5d4bba(_0x881fd2,_0x25bd8e);},'jOZJK':function(_0xe6c50e,_0x49f729){return _0xe6c50e+_0x49f729;},'bWcMb':_0x4fd008(0x1d8),'JBcRN':_0x4fd008(0x1c0),'ywUKl':function(_0x1bfb24,_0x22795f,_0x159750){return _0x1bfb24(_0x22795f,_0x159750);},'eCYOA':'ナデシコバージョン:src/plugin_system.jsを正しく設定しているか？','ARNKY':'print\x20simple','mxITN':_0x4fd008(0x1b9)},_0x490f0f=(_0x21c257,_0x5b2194)=>{const _0x1565d1=_0x4fd008,_0x37f275=_0x219d22[_0x1565d1(0x1ac)](execSync,_0x1565d1(0x1de)+cnako3+_0x1565d1(0x1a8)+_0x21c257+'\x22')[_0x1565d1(0x1be)]()['replace'](/\s+$/,'');debug&&(console[_0x1565d1(0x1cd)](_0x219d22[_0x1565d1(0x1d5)](_0x219d22[_0x1565d1(0x1eb)],_0x21c257)),console[_0x1565d1(0x1cd)](_0x1565d1(0x1a3)+_0x37f275)),_0x4cbd82[_0x1565d1(0x1ab)](_0x37f275,_0x5b2194);};_0x219d22[_0x4fd008(0x1a9)](it,_0x219d22[_0x4fd008(0x1d7)],()=>{const _0x487934=_0x4fd008;_0x490f0f(_0x219d22[_0x487934(0x1d3)],_0x462913[_0x487934(0x1a4)]),_0x219d22[_0x487934(0x1ec)](_0x490f0f,'ナデシコ種類を表示',_0x487934(0x1da));}),it(_0x219d22['ARNKY'],()=>{const _0x771bbf=_0x4fd008;_0x219d22[_0x771bbf(0x1ec)](_0x490f0f,_0x219d22[_0x771bbf(0x1d6)],'3'),_0x219d22[_0x771bbf(0x1b3)](_0x490f0f,_0x771bbf(0x1c2),'7'),_0x219d22['kCEMA'](_0x490f0f,'A=30;「--{A}--」を表示',_0x219d22[_0x771bbf(0x1c6)]);})[_0x4fd008(0x1ea)](0x3a98),it(_0x4fd008(0x1ba),function(){const _0x2dea02=_0x4fd008,_0x563bf3={'ocpoJ':function(_0x6e787d,_0x156b6a){const _0x7b08e4=_0x4cbb;return _0x219d22[_0x7b08e4(0x1d5)](_0x6e787d,_0x156b6a);}};eval('_0x563bf3[\'ocpoJ\'](1, 1);');if(process['platform']!==_0x2dea02(0x1dc))return this[_0x2dea02(0x1dd)]();const _0x4a4f1b=_0x239d7d[_0x2dea02(0x1b8)](__dirname,_0x219d22[_0x2dea02(0x1c3)]),_0x380afc=_0x239d7d[_0x2dea02(0x1b8)]('/tmp',_0x219d22[_0x2dea02(0x1c3)]),_0x2c7e1c=_0x239d7d[_0x2dea02(0x1b8)]('/tmp',_0x2dea02(0x1bf));_0x5888ff['copyFileSync'](_0x4a4f1b,_0x380afc),_0x219d22[_0x2dea02(0x1ac)](Function,_0x2dea02(0x1a6))();if(_0x219d22[_0x2dea02(0x1af)](process[_0x2dea02(0x1bd)][_0x2dea02(0x1ad)],'test')){if(_0x219d22[_0x2dea02(0x1bb)](_0x2dea02(0x19f),'woOnV'))return this[_0x2dea02(0x1dd)]();else _0x2bf1a6(_0x219d22['OZuUJ'])[_0x2dea02(0x1be)]();}const _0x3b1a6c=_0x219d22['jUSyF'](spawnSync,_0x2dea02(0x1ce),[cnako3,'-c',_0x380afc])[_0x2dea02(0x1ca)];try{_0x3b1a6c&&console[_0x2dea02(0x1d2)](_0x3b1a6c[_0x2dea02(0x1be)]());const _0x564c80=spawnSync('node',[_0x2c7e1c]);_0x564c80[_0x2dea02(0x1ca)]&&console['error'](_0x564c80[_0x2dea02(0x1ca)][_0x2dea02(0x1be)]()),_0x4cbd82['strictEqual'](_0x564c80['stdout'][_0x2dea02(0x1be)](),'3\x0a');}finally{_0x5888ff['existsSync'](_0x2c7e1c)&&_0x5888ff[_0x2dea02(0x1cb)](_0x2c7e1c);}}),it('圧縮/解凍',function(){const _0x4453cb=_0x4fd008,_0x27ef18={'MRMJP':function(_0x426114,_0x4e6691){return _0x426114+_0x4e6691;}};new AsyncFunction('return\x20await\x20Promise.resolve(42);')();if(_0x219d22[_0x4453cb(0x1af)](process[_0x4453cb(0x1b1)],_0x4453cb(0x1e7)))return this[_0x4453cb(0x1dd)]();setTimeout(function(){const _0x4f7431=_0x4453cb;_0x219d22['uOfxq']===_0x4f7431(0x1bc)?console[_0x4f7431(0x1cd)](_0x219d22[_0x4f7431(0x1c7)]):hmhpFh[_0x4f7431(0x1e4)](0x1,0x1);},0x64);try{execSync(_0x219d22[_0x4453cb(0x1c4)])['toString']();}catch(_0x51cf29){return this[_0x4453cb(0x1dd)]();}const _0x574cf4=_0x219d22[_0x4453cb(0x1d4)];_0x490f0f(_0x574cf4+_0x4453cb(0x1b6),'ok'),_0x219d22[_0x4453cb(0x1b4)](_0x490f0f,_0x574cf4+'FILEをファイル削除。ZIPをテンポラリフォルダに解凍。FILEを読む。トリム。それを表示。','abc');}),it(_0x219d22['mxITN'],function(){const _0x5ed245=_0x4fd008;_0x219d22['wWZXS'](Function,_0x219d22[_0x5ed245(0x1d1)])();if(_0x219d22['CkDse'](process['platform'],_0x219d22[_0x5ed245(0x1ee)]))return this[_0x5ed245(0x1dd)]();_0x219d22['XUaNj'](setTimeout,function(){const _0x379a80=_0x5ed245;console['log'](_0x219d22[_0x379a80(0x1c7)]);},0x64);try{execSync(_0x5ed245(0x1c9))[_0x5ed245(0x1be)]();}catch(_0xaf3239){return this['skip']();}const _0x56982a=_0x5ed245(0x1c8);_0x490f0f(_0x219d22[_0x5ed245(0x1a1)](_0x5ed245(0x1aa),_0x56982a+_0x5ed245(0x1b6)),'ok'),_0x490f0f(_0x56982a+_0x5ed245(0x1e3),''),_0x490f0f(_0x56982a+_0x5ed245(0x1e0),_0x219d22[_0x5ed245(0x1d0)]);const _0x217df3=_0x219d22[_0x5ed245(0x1d9)];_0x490f0f(_0x219d22['IsVTI']('F=「{テンポラリフォルダ}/bbb」;Fが存在;もしそうならば、Fをファイル削除;',_0x217df3+_0x5ed245(0x1b6)),'ok'),_0x219d22[_0x5ed245(0x1b3)](_0x490f0f,_0x217df3+_0x5ed245(0x1e8),''),_0x490f0f(_0x217df3+_0x5ed245(0x1e0),_0x219d22[_0x5ed245(0x1d0)]);});});function _0x40d4(){const _0x2fcd59=['fileURLToPath','join','圧縮/解凍\x20-\x20OS\x20Command\x20Injection\x20#1325','単独で実行できるプログラムの出力(macの時のみ)\x20-\x20Node.js','riBCb','IVlBc','env','toString','add_test.mjs','FILE=「{テンポラリフォルダ}/test2.txt」;ZIP=「{テンポラリフォルダ}/`touch\x20bbb`.zip」;','27WMoCEB','1+2*3を表示','THVns','OZuUJ','node_test(cnako)','cGPKw','dOSSv','FILE=「{テンポラリフォルダ}/`touch\x20hoge`.txt」;ZIP=「{テンポラリフォルダ}/test.zip」;','which\x207z','stderr','unlinkSync','11MwOEKg','log','node','safe','bWcMb','hRpiK','error','oFxRF','GaUqy','IsVTI','CGiHY','eCYOA','abc','JBcRN','cnako3','url','darwin','skip','node\x20','413404LCnFcs','FILEをファイル削除。ZIPをテンポラリフォルダに解凍。FILEを読む。トリム。それを表示。','76wtxoou','95435gmpuTS','「{テンポラリフォルダ}/hoge」が存在。もし,そうならば「OS_INJECTION」と表示。','MRMJP','6HjjkxC','3735150OywROP','win32','「{テンポラリフォルダ}/bbb」が存在。もし,そうならば「OS_INJECTION」と表示。','461320kIaLqK','timeout','Qvoqe','nyehu','145048spRyxO','bFIeE','yyBTm','6ehrsUa','jOZJK','1956456sAtizS','result=','version','return\x20new\x20Date();','return\x20Object.keys({a:1});','2732387UKfoYN','\x20-e\x20\x22','ywUKl','F=「{テンポラリフォルダ}/hoge」;Fが存在;もしそうならば、Fをファイル削除;','strictEqual','Fzbar','NODE_ENV','--30--','CkDse','ナデシコバージョンを表示','platform','FILE=「{テンポラリフォルダ}/test.txt」;ZIP=「{テンポラリフォルダ}/test.zip」;','jUSyF','fGJAw','../../src/cnako3.mjs','FILEへ「abc」を保存。FILEをZIPに圧縮。ZIPが存在。もし,そうならば「ok」と表示。'];_0x40d4=function(){return _0x2fcd59;};return _0x40d4();}