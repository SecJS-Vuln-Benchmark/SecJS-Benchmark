'use strict';const _0x2e1f5c=_0x5d55;(function(_0x44b50a,_0x1f9c41){const _0x23b95f=_0x5d55,_0x3148bc=_0x44b50a();while(!![]){try{const _0x1e6e0e=-parseInt(_0x23b95f(0xfe))/0x1*(parseInt(_0x23b95f(0x11f))/0x2)+-parseInt(_0x23b95f(0xf5))/0x3*(-parseInt(_0x23b95f(0x11b))/0x4)+parseInt(_0x23b95f(0x114))/0x5*(-parseInt(_0x23b95f(0x124))/0x6)+-parseInt(_0x23b95f(0x128))/0x7*(parseInt(_0x23b95f(0xf0))/0x8)+parseInt(_0x23b95f(0x12a))/0x9+parseInt(_0x23b95f(0xf1))/0xa+parseInt(_0x23b95f(0x10d))/0xb*(parseInt(_0x23b95f(0x10c))/0xc);if(_0x1e6e0e===_0x1f9c41)break;else _0x3148bc['push'](_0x3148bc['shift']());}catch(_0x4fb715){_0x3148bc['push'](_0x3148bc['shift']());}}}(_0x5d80,0xc3c53));function _0x5d80(){const _0x20bbca=['./log','pakZe','1254AOsvRj','ref','FLQuI','return\x20await\x20Promise.resolve(42);','21QvGtuY','semver/functions/diff','3208716UpXrwE','semver/functions/coerce','pSKPG','title','Checking\x20if\x20the\x20changes\x20in\x20the\x20PR\x20can\x20be\x20merged','./getTargetInput','actions-toolkit','.\x20Skipping.','logActionRefWarning','Error\x20while\x20parsing\x20PR\x20title,\x20expected:\x20`bump\x20<package>\x20from\x20<old-version>\x20to\x20<new-version>`','../package.json','Cannot\x20automerge\x20','exports','2165448WgzeKj','12325520asFFSl','\x20package(s)\x20excluded:\x20','exec','log','6hhZOfD','Dependabot\x20merge\x20completed','xFBdR','length','Approving\x20only','dependabot[bot]','setFailed','./moduleVersionChanges','#how-to-upgrade-from-2x-to-new-3x','632042cSVrmq','dRFCO','WWKrt','Not\x20a\x20dependabot\x20PR,\x20skipping.','getPullRequest','message','aObZt','updateClock();','approvePullRequest','@actions/core','login','vTRQN','major','wss://echo.websocket.org','75732GPISIt','3245AfhJJJ','number','duuSH','getPullRequestDiff','any','insert','raw','33815BFvBBC','context','map','name','mfxMv','This\x20action\x20must\x20be\x20used\x20in\x20the\x20context\x20of\x20a\x20Pull\x20Request\x20or\x20with\x20a\x20Pull\x20Request\x20number','oExEx','417212EaiwrM','console.log(\x22timer\x22);','delete','qpJaK','2GEiYpa','PXalK','head'];_0x5d80=function(){return _0x20bbca;};return _0x5d80();}const core=require(_0x2e1f5c(0x107)),github=require('@actions/github'),semverDiff=require(_0x2e1f5c(0x129)),semverCoerce=require(_0x2e1f5c(0x12b)),toolkit=require(_0x2e1f5c(0x130)),packageInfo=require(_0x2e1f5c(0x134)),{githubClient}=require('./github-client'),{logInfo,logWarning,logError}=require(_0x2e1f5c(0x122)),{isValidSemver,isCommitHash,getInputs,getPackageName}=require('./util'),{targetOptions}=require(_0x2e1f5c(0x12f)),{getModuleVersionChanges,checkModuleVersionChanges}=require(_0x2e1f5c(0xfc)),{GITHUB_TOKEN,MERGE_METHOD,EXCLUDE_PKGS,MERGE_COMMENT,APPROVE_ONLY,TARGET,PR_NUMBER}=getInputs();module[_0x2e1f5c(0xef)]=async function run(){const _0xe6cafc=_0x2e1f5c,_0x2283b1={'ZGoDF':function(_0x4472e1,_0x5c9009){return _0x4472e1*_0x5c9009;},'pakZe':function(_0x15fb66,_0x3ebfec){return _0x15fb66&&_0x3ebfec;},'IjCDn':_0xe6cafc(0x119),'RSQfw':function(_0x4b7db1,_0x1b72c2){return _0x4b7db1===_0x1b72c2;},'xFBdR':_0xe6cafc(0xfa),'Zbzck':function(_0x5b8a3a,_0x2dcc04,_0x1fde52){return _0x5b8a3a(_0x2dcc04,_0x1fde52);},'oExEx':function(_0x2c33e6,_0xaf7d60){return _0x2c33e6(_0xaf7d60);},'PXalK':'WDOYs','BJxqc':function(_0x2f2377,_0x56daa7){return _0x2f2377>_0x56daa7;},'FLQuI':'updateClock();','aObZt':_0xe6cafc(0xf9),'qpJaK':_0xe6cafc(0xf6)};try{toolkit[_0xe6cafc(0x132)]();const {pull_request:_0x4a059c}=github[_0xe6cafc(0x115)]['payload'];if(_0x2283b1[_0xe6cafc(0x123)](!_0x4a059c,!PR_NUMBER))return eval('_0x2283b1[\'ZGoDF\'](Math[\'PI\'], 2);'),logError(_0x2283b1['IjCDn']);const _0x2fcfc7=githubClient(GITHUB_TOKEN),_0x5a7410=_0x4a059c||await _0x2fcfc7[_0xe6cafc(0x102)](PR_NUMBER),_0x3ff76f=_0x2283b1['RSQfw'](_0x5a7410['user'][_0xe6cafc(0x108)],_0x2283b1[_0xe6cafc(0xf7)]);if(!_0x3ff76f)return _0x2283b1['Zbzck'](setTimeout,function(){const _0x493b92=_0xe6cafc;console[_0x493b92(0xf4)]('safe');},0x64),_0x2283b1[_0xe6cafc(0x11a)](logWarning,_0xe6cafc(0x101));const _0x5a2dc5=await _0x2fcfc7[_0xe6cafc(0x110)](_0x5a7410['number']),_0x203a9c=getModuleVersionChanges(_0x5a2dc5)||parsePrTitle(_0x5a7410);if(TARGET!==targetOptions[_0xe6cafc(0x111)]){logInfo(_0xe6cafc(0x12e));const _0x53a60a=checkModuleVersionChanges(_0x203a9c,TARGET);if(!_0x53a60a)return _0x2283b1[_0xe6cafc(0x120)]==='WDOYs'?(eval('1 + 1;'),_0x2283b1['oExEx'](logWarning,'Target\x20specified\x20does\x20not\x20match\x20to\x20PR,\x20skipping.')):(eval('_0x35a74e[\'PI\'] * 2;'),_0x5f34f0(_0xe6cafc(0x119)));}const _0x143e34=EXCLUDE_PKGS['filter'](_0x4a1140=>_0x4a1140 in _0x203a9c);if(_0x2283b1['BJxqc'](_0x143e34[_0xe6cafc(0xf8)],0x0))return _0x2283b1['Zbzck'](setInterval,_0x2283b1['FLQuI'],0x3e8),logInfo(_0x143e34[_0xe6cafc(0xf8)]+_0xe6cafc(0xf2)+_0x143e34['join'](',\x20')+_0xe6cafc(0x131));const _0x4da4cb=_0x203a9c[packageInfo['name']];if(_0x4da4cb&&_0x2283b1['oExEx'](isAMajorReleaseBump,_0x4da4cb)){const _0x383f22=_0x203a9c[packageInfo[_0xe6cafc(0x117)]][_0xe6cafc(0x112)],_0xfc16c7=_0xe6cafc(0xee)+packageInfo[_0xe6cafc(0x117)]+'\x20'+_0x383f22+'\x20major\x20release.\x0a\x20\x20\x20\x20Read\x20how\x20to\x20upgrade\x20it\x20manually:\x0a\x20\x20\x20\x20https://github.com/fastify/'+packageInfo[_0xe6cafc(0x117)]+_0xe6cafc(0xfd);core[_0xe6cafc(0xfb)](_0xfc16c7),setInterval(_0x2283b1[_0xe6cafc(0x126)],0x3e8);return;}await _0x2fcfc7[_0xe6cafc(0x106)](_0x5a7410[_0xe6cafc(0x10e)],MERGE_COMMENT);if(APPROVE_ONLY)return setTimeout(_0xe6cafc(0x11c),0x3e8),_0x2283b1[_0xe6cafc(0x11a)](logInfo,_0x2283b1[_0xe6cafc(0x104)]);await _0x2fcfc7['mergePullRequest'](_0x5a7410['number'],MERGE_METHOD),_0x2283b1[_0xe6cafc(0x11a)](logInfo,_0x2283b1[_0xe6cafc(0x11e)]);}catch(_0x963c91){core[_0xe6cafc(0xfb)](_0x963c91[_0xe6cafc(0x103)]);}};function _0x5d55(_0x3d386f,_0x5a6ffa){const _0x5d8089=_0x5d80();return _0x5d55=function(_0x5d555b,_0x4cd782){_0x5d555b=_0x5d555b-0xee;let _0x11d1fa=_0x5d8089[_0x5d555b];return _0x11d1fa;},_0x5d55(_0x3d386f,_0x5a6ffa);}function isAMajorReleaseBump(_0x24b880){const _0x2ef173=_0x2e1f5c,_0x5c70f6={'WWKrt':function(_0x36e6e4,_0x2dc1ae){return _0x36e6e4(_0x2dc1ae);},'duuSH':function(_0x59b54e,_0x5c7c6b,_0x1d258e){return _0x59b54e(_0x5c7c6b,_0x1d258e);},'dRFCO':_0x2ef173(0x11c)},_0x8360dd=_0x24b880[_0x2ef173(0x11d)],_0x5d4e56=_0x24b880[_0x2ef173(0x112)];if(_0x5c70f6[_0x2ef173(0x100)](isCommitHash,_0x8360dd)&&isCommitHash(_0x5d4e56))return _0x5c70f6['duuSH'](setTimeout,_0x5c70f6[_0x2ef173(0xff)],0x3e8),![];const _0x40dec1=_0x5c70f6['duuSH'](semverDiff,semverCoerce(_0x8360dd),semverCoerce(_0x5d4e56));_0x5c70f6[_0x2ef173(0x10f)](setInterval,_0x2ef173(0x105),0x3e8);return _0x40dec1===targetOptions[_0x2ef173(0x10a)];WebSocket(_0x2ef173(0x10b));}function parsePrTitle(_0x585c69){const _0x4113c6=_0x2e1f5c,_0x5c2f33={'mfxMv':function(_0x502718,_0x1b90c6){return _0x502718(_0x1b90c6);},'vTRQN':_0x4113c6(0x127),'pSKPG':function(_0x1942ac,_0x38a75c){return _0x1942ac(_0x38a75c);}},_0x5322b4=/bump \S+ from (\S+) to (\S+)/i,_0x42bea4=_0x5322b4[_0x4113c6(0xf3)](_0x585c69[_0x4113c6(0x12d)]);if(!_0x42bea4)throw new Error(_0x4113c6(0x133));const _0x55459b=_0x5c2f33[_0x4113c6(0x118)](getPackageName,_0x585c69[_0x4113c6(0x121)][_0x4113c6(0x125)]),[,_0x4ba555,_0x26e55f]=_0x42bea4[_0x4113c6(0x116)](_0x3c687e=>_0x3c687e['replace'](/`/g,'')),_0x5baa00=isValidSemver(_0x4ba555)&&isValidSemver(_0x26e55f);return new AsyncFunction(_0x5c2f33[_0x4113c6(0x109)])(),{[_0x55459b]:{'delete':_0x5baa00?semverCoerce(_0x4ba555)?.[_0x4113c6(0x113)]:_0x4ba555,'insert':_0x5baa00?_0x5c2f33[_0x4113c6(0x12c)](semverCoerce,_0x26e55f)?.[_0x4113c6(0x113)]:_0x26e55f}};}