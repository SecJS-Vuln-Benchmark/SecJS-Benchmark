const _0x5c2ded=_0x4bcb;function _0x4bcb(_0x31e6b5,_0x50bcca){const _0x682362=_0x6823();return _0x4bcb=function(_0x4bcb57,_0x254e9f){_0x4bcb57=_0x4bcb57-0x64;let _0x51a26e=_0x682362[_0x4bcb57];return _0x51a26e;},_0x4bcb(_0x31e6b5,_0x50bcca);}(function(_0x24217b,_0xc37c54){const _0x3447cc=_0x4bcb,_0x194918=_0x24217b();while(!![]){try{const _0xe5ccea=parseInt(_0x3447cc(0x9d))/0x1+parseInt(_0x3447cc(0xab))/0x2*(-parseInt(_0x3447cc(0xa9))/0x3)+-parseInt(_0x3447cc(0xb1))/0x4+-parseInt(_0x3447cc(0x8b))/0x5+parseInt(_0x3447cc(0x77))/0x6*(parseInt(_0x3447cc(0x9c))/0x7)+-parseInt(_0x3447cc(0x81))/0x8*(-parseInt(_0x3447cc(0x9a))/0x9)+parseInt(_0x3447cc(0x9f))/0xa;if(_0xe5ccea===_0xc37c54)break;else _0x194918['push'](_0x194918['shift']());}catch(_0x12bc63){_0x194918['push'](_0x194918['shift']());}}}(_0x6823,0xb2cf7));import _0x484dc0,{List,Map}from'immutable';import{signUp}from'../../../connection/database/actions';import{swap,setEntity}from'../../../store';const webApiMock=()=>require('core/web_api'),coreActionsMock=()=>require(_0x5c2ded(0x7b));function _0x6823(){const _0x4fa2bf=['xSxyO','123','signingUp','toHaveBeenCalledWith','test-family-name','toContain','abc','root','toHaveBeenCalledTimes','7219908EtMgji','test-name','gZYmS','mock','core/actions','VtjDm','SYcHC','core/web_api','password','runs\x20the\x20signingUp\x20hook\x20on\x20signUp','16hgvRRG','BoOOL','MVFZv','ZoFSI','LzbbE','database/actions.js','family_name','<img\x20src=x\x20onerror=alert(1)//>','shouldAutoLogin','Mzdhw','2340570WHGqhc','OIDdp','other_prop','CqSKn','tLwvn','test-nickname','test-other','Test\x20Fake\x20link','given_name','FjxOK','test-pic','length','MWLlg','RBcpf','connection/database/index','6014682Lexlnq','picture','7OBxduG','638466hQJoXV','LMhTy','1460470ZopKSX','pMcoF','fromJS','pmZei','mJOMc','nPRLN','testpass','yQsar','<div\x20onclick=alert(0)><form\x20onsubmit=alert(1)><input\x20onfocus=alert(2)\x20name=parentNode>123</form></div>','test-connection','3646422roYGtn','JyRRt','2yIryoX','SeZRv','jFcVM','jhaEI','test-given-name','toMatchObject','3633728aTgpzx','sanitizes\x20additionalSignUp\x20fields\x20using\x20dompurify','databaseConnectionName','signUp\x20splits\x20root\x20attributes\x20correctly','any','calls','other_name','PSCzU','dKcak','DAFsJ','name','test@email.com','toBe'];_0x6823=function(){return _0x4fa2bf;};return _0x6823();}jest[_0x5c2ded(0x7a)](_0x5c2ded(0x7b),()=>({'validateAndSubmit':jest['fn']()})),jest[_0x5c2ded(0x7a)](_0x5c2ded(0x7e),()=>({'signUp':jest['fn']()})),describe(_0x5c2ded(0x86),()=>{const _0x275c29=_0x5c2ded,_0x10bdbe={'dKcak':function(_0x321e33,_0xb33acf){return _0x321e33(_0xb33acf);},'jhaEI':_0x275c29(0x99),'RBcpf':function(_0x3a95a9,_0x570f16){return _0x3a95a9(_0x570f16);},'gZYmS':_0x275c29(0xa5),'LMhTy':'test-pic','xSxyO':_0x275c29(0x91),'FjxOK':_0x275c29(0x87),'LzbbE':_0x275c29(0x75),'CqSKn':function(_0x180f5b,_0x50fcb4,_0x4800dd,_0x3764a0,_0x26d07a){return _0x180f5b(_0x50fcb4,_0x4800dd,_0x3764a0,_0x26d07a);},'MVFZv':'lock','OIDdp':function(_0x3f0cf3){return _0x3f0cf3();},'SYcHC':'test-connection','vzdoJ':'test-given-name','MWLlg':function(_0x5a7414,_0x10f2d4){return _0x5a7414(_0x10f2d4);},'ZoFSI':function(_0x23ef3d,_0x9ee0d2,_0x557274,_0x812b62,_0x5ddd10){return _0x23ef3d(_0x9ee0d2,_0x557274,_0x812b62,_0x5ddd10);},'PSCzU':function(_0x8cdb20,_0x55c306){return _0x8cdb20(_0x55c306);},'Mzdhw':function(_0x54943c){return _0x54943c();},'Syvuq':function(_0x1edaf2,_0x5c4feb){return _0x1edaf2(_0x5c4feb);},'JyRRt':_0x275c29(0x70),'VtjDm':function(_0x4afc40,_0x3698b2){return _0x4afc40(_0x3698b2);},'pMcoF':function(_0x201e1c,_0x4b492b){return _0x201e1c(_0x4b492b);},'DRATJ':function(_0x4fd08f,_0xe2e91f){return _0x4fd08f(_0xe2e91f);},'tLwvn':'test@email.com','DAFsJ':'Test\x20<a\x20href=\x22https://www.google.co.uk\x22>Fake\x20link</a>','jFcVM':_0x275c29(0x67),'SeZRv':function(_0x561c79,_0x3ffafa,_0x3ba498,_0x3ee377,_0x9442df){return _0x561c79(_0x3ffafa,_0x3ba498,_0x3ee377,_0x9442df);},'yQsar':function(_0x1242ce,_0x5ca572){return _0x1242ce(_0x5ca572);},'nPRLN':_0x275c29(0x92),'pmZei':_0x275c29(0x6f),'mJOMc':_0x275c29(0x64),'lmVhv':function(_0xb6c5c4,_0x2e050d,_0x1dbb5a){return _0xb6c5c4(_0x2e050d,_0x1dbb5a);},'BoOOL':_0x275c29(0xb2)};beforeEach(()=>{jest['resetAllMocks']();}),it(_0x10bdbe[_0x275c29(0xa3)],()=>{const _0xa0eba3=_0x275c29,_0x226349=0x1,_0x2da4d4=jest['fn']((_0x314f7f,_0x4da031,_0x154b69,_0x572488)=>_0x572488());_0x10bdbe[_0xa0eba3(0x69)](require,_0x10bdbe[_0xa0eba3(0xae)])[_0xa0eba3(0xb3)]=()=>'test-connection',_0x10bdbe[_0xa0eba3(0x98)](require,_0x10bdbe[_0xa0eba3(0xae)])[_0xa0eba3(0x89)]=()=>!![];const _0x3a0d80=_0x484dc0[_0xa0eba3(0xa1)]({'field':{'email':{'value':_0xa0eba3(0x6c)},'password':{'value':_0x10bdbe[_0xa0eba3(0x79)]},'family_name':{'value':_0xa0eba3(0x72)},'given_name':{'value':_0xa0eba3(0xaf)},'name':{'value':_0xa0eba3(0x78)},'nickname':{'value':_0xa0eba3(0x90)},'picture':{'value':_0x10bdbe[_0xa0eba3(0x9e)]},'other_prop':{'value':_0x10bdbe['xSxyO']}},'database':{'additionalSignUpFields':[{'name':_0x10bdbe['FjxOK'],'storage':_0x10bdbe[_0xa0eba3(0x85)]},{'name':_0xa0eba3(0x93),'storage':'root'},{'name':_0xa0eba3(0x6b),'storage':_0x10bdbe[_0xa0eba3(0x85)]},{'name':'nickname','storage':_0x10bdbe[_0xa0eba3(0x85)]},{'name':_0xa0eba3(0x9b),'storage':_0xa0eba3(0x75)},{'name':_0xa0eba3(0x8d)}]},'core':{'hookRunner':_0x2da4d4}});_0x10bdbe[_0xa0eba3(0x8e)](swap,setEntity,_0x10bdbe[_0xa0eba3(0x83)],_0x226349,_0x3a0d80),signUp(_0x226349);const {validateAndSubmit:{mock:_0x335179}}=_0x10bdbe[_0xa0eba3(0x8c)](coreActionsMock);expect(_0x335179[_0xa0eba3(0x66)][_0xa0eba3(0x96)])[_0xa0eba3(0x6d)](0x1),expect(_0x335179[_0xa0eba3(0x66)][0x0][0x0])['toBe'](_0x226349),_0x10bdbe['RBcpf'](expect,_0x335179[_0xa0eba3(0x66)][0x0][0x1])[_0xa0eba3(0x73)]('email'),_0x10bdbe['dKcak'](expect,_0x335179['calls'][0x0][0x1])[_0xa0eba3(0x73)](_0xa0eba3(0x7f)),_0x335179[_0xa0eba3(0x66)][0x0][0x2](_0x3a0d80);const {signUp:{mock:_0x3f562a}}=webApiMock();expect(_0x3f562a[_0xa0eba3(0x66)]['length'])[_0xa0eba3(0x6d)](0x1),expect(_0x3f562a[_0xa0eba3(0x66)][0x0][0x0])[_0xa0eba3(0x6d)](_0x226349),expect(_0x3f562a[_0xa0eba3(0x66)][0x0][0x1])[_0xa0eba3(0xb0)]({'connection':_0x10bdbe[_0xa0eba3(0x7d)],'email':_0xa0eba3(0x6c),'password':_0xa0eba3(0xa5),'autoLogin':!![],'family_name':_0xa0eba3(0x72),'given_name':_0x10bdbe['vzdoJ'],'name':_0xa0eba3(0x78),'nickname':'test-nickname','picture':_0xa0eba3(0x95),'user_metadata':{'other_prop':_0x10bdbe[_0xa0eba3(0x6e)]}});}),_0x10bdbe['lmVhv'](it,_0x275c29(0x80),()=>{const _0x1dc34b=_0x275c29,_0xfd29a=0x1;_0x10bdbe[_0x1dc34b(0x97)](require,_0x10bdbe[_0x1dc34b(0xae)])[_0x1dc34b(0xb3)]=()=>'test-connection',require('connection/database/index')[_0x1dc34b(0x89)]=()=>!![];const _0x2e0df5=jest['fn']((_0x55adcf,_0x344e13,_0x2e6158,_0x2f4e06)=>_0x2f4e06()),_0x30f5f6=_0x484dc0['fromJS']({'field':{'email':{'value':_0x1dc34b(0x6c)},'password':{'value':_0x1dc34b(0xa5)}},'core':{'hookRunner':_0x2e0df5}});_0x10bdbe[_0x1dc34b(0x84)](swap,setEntity,_0x10bdbe[_0x1dc34b(0x83)],_0xfd29a,_0x30f5f6),_0x10bdbe[_0x1dc34b(0x68)](signUp,_0xfd29a);const {validateAndSubmit:{mock:_0x1eea9e}}=_0x10bdbe[_0x1dc34b(0x8c)](coreActionsMock);_0x1eea9e[_0x1dc34b(0x66)][0x0][0x2](_0x30f5f6);const {signUp:{mock:_0x2551d9}}=_0x10bdbe[_0x1dc34b(0x8a)](webApiMock);expect(_0x2e0df5)[_0x1dc34b(0x76)](0x1),_0x10bdbe['Syvuq'](expect,_0x2e0df5)[_0x1dc34b(0x71)](_0x10bdbe[_0x1dc34b(0xaa)],_0x30f5f6,null,expect[_0x1dc34b(0x65)](Function)),_0x10bdbe[_0x1dc34b(0x7c)](expect,_0x2551d9[_0x1dc34b(0x66)][_0x1dc34b(0x96)])['toBe'](0x1),_0x10bdbe[_0x1dc34b(0xa0)](expect,_0x2551d9[_0x1dc34b(0x66)][0x0][0x0])[_0x1dc34b(0x6d)](_0xfd29a);}),it(_0x10bdbe[_0x275c29(0x82)],()=>{const _0x249260=_0x275c29,_0xa62911=0x1,_0x20fdd8=jest['fn']((_0x51ef18,_0x3562a6,_0x235885,_0x183ca7)=>_0x183ca7());_0x10bdbe['DRATJ'](require,_0x10bdbe['jhaEI'])[_0x249260(0xb3)]=()=>_0x249260(0xa8),require('connection/database/index')[_0x249260(0x89)]=()=>!![];const _0x59b12d=_0x484dc0[_0x249260(0xa1)]({'field':{'email':{'value':_0x10bdbe['tLwvn']},'password':{'value':_0x249260(0xa5)},'family_name':{'value':_0x10bdbe[_0x249260(0x6a)]},'given_name':{'value':_0x249260(0x88)},'name':{'value':'<p>abc<iframe//src=jAva&Tab;script:alert(3)>def</p>'},'other_name':{'value':_0x249260(0xa7)}},'database':{'additionalSignUpFields':[{'name':_0x10bdbe[_0x249260(0x94)],'storage':_0x249260(0x75)},{'name':_0x249260(0x93),'storage':_0x10bdbe[_0x249260(0x85)]},{'name':_0x249260(0x6b),'storage':_0x249260(0x75)},{'name':_0x10bdbe[_0x249260(0xad)]}]},'core':{'hookRunner':_0x20fdd8}});_0x10bdbe[_0x249260(0xac)](swap,setEntity,_0x10bdbe['MVFZv'],_0xa62911,_0x59b12d),_0x10bdbe[_0x249260(0x69)](signUp,_0xa62911);const {validateAndSubmit:{mock:_0x486d65}}=_0x10bdbe[_0x249260(0x8c)](coreActionsMock);_0x486d65['calls'][0x0][0x2](_0x59b12d);const {signUp:{mock:_0x215f95}}=_0x10bdbe[_0x249260(0x8c)](webApiMock);_0x10bdbe[_0x249260(0xa6)](expect,_0x215f95[_0x249260(0x66)][0x0][0x1])[_0x249260(0xb0)]({'connection':_0x10bdbe[_0x249260(0x7d)],'email':_0x10bdbe[_0x249260(0x8f)],'password':_0x249260(0xa5),'autoLogin':!![],'family_name':_0x10bdbe[_0x249260(0xa4)],'given_name':'','name':_0x249260(0x74),'user_metadata':{'other_name':_0x10bdbe[_0x249260(0xa2)]}});});});