function _0x3e7b(){const _0x4c5e37=['EVFDL','1681035QlsAWN','dstFileName','x-amz-iv','bucketName','RENEW_TOKEN','AWS_KEY_ID','key','QMvxm','stageInfo','createClient','Code','dstFileSize','AFEqd','endPoint','endsWith','ntwwF','lastError','startsWith','sfc-digest','substring','400','AWS_TOKEN','s3.amazonaws.com','toLowerCase','UPLOADED','LemDh','platform','readFileSync','PgRVy','NEED_RETRY','aPLfl','getObject','LhgVQ','SjRKB','96jgqyWI','9082512nEsUMN','S3\x20Util','eIZWi','binary','../proxy_util','exports','NoSuchKey','NEED_RETRY_WITH_LOWER_CONCURRENCY','amazonaws.com.cn','https://','rjRxD','699048fEUmaR','Metadata','vvgBv','then','yNfrS','mgFsW','nativeDownloadFile','win32','writeFile','ContentLength','transformToByteArray','wSjMU','Gqclp','x-amz-key','@aws-sdk/client-s3','toString','45843YhCAPF','EncryptionMetadata','https://s3.','NSkaZ','jTsxH','useS3RegionalUrl','getProxy','DMogz','useRegionalUrl','getFileHeader','../http/node','region','oiLPZ','indexOf','ttUIY','FileHeader','length','114bVSKYx','ExpiredToken','accessUrl','s3path','requestHandler','aqvNY','cn-','lkCsm','uploadFile','uploadSize','uZzOH','tsjHE','hqbUI','resultStatus','mrUDT','InbBC','nlxba','114385DQIlao','x-amz-matdesc','OLius','HCNda','matDesc','wcAEo','BzBNj','uploadFileStream','location','amazonaws.com','getProxyAgent','2006-03-01','DOWNLOADED','1130687HtVRLY','ERROR','Body','./file_util','application/octet-stream','njipi','GIvbk','IJxxI','2723730hHWRmt','HanVB','Hpcvc','AWS_SECRET_KEY','wPotL','SHA256_DIGEST','2Rumumk'];_0x3e7b=function(){return _0x4c5e37;};return _0x3e7b();}const _0x2427b4=_0x5916;(function(_0x228e7d,_0x2068bf){const _0x4e7962=_0x5916,_0x3e604e=_0x228e7d();while(!![]){try{const _0x33eaa8=parseInt(_0x4e7962(0x1f6))/0x1+parseInt(_0x4e7962(0x204))/0x2*(parseInt(_0x4e7962(0x206))/0x3)+parseInt(_0x4e7962(0x234))/0x4+-parseInt(_0x4e7962(0x1e9))/0x5*(parseInt(_0x4e7962(0x1d8))/0x6)+parseInt(_0x4e7962(0x1c7))/0x7*(-parseInt(_0x4e7962(0x228))/0x8)+-parseInt(_0x4e7962(0x229))/0x9+parseInt(_0x4e7962(0x1fe))/0xa;if(_0x33eaa8===_0x2068bf)break;else _0x3e604e['push'](_0x3e604e['shift']());}catch(_0x25f5cf){_0x3e604e['push'](_0x3e604e['shift']());}}}(_0x3e7b,0x96544));const {NodeHttpHandler}=require('@smithy/node-http-handler'),EncryptionMetadata=require('./encrypt_util')[_0x2427b4(0x1c8)],FileHeader=require(_0x2427b4(0x1f9))[_0x2427b4(0x1d6)],expandTilde=require('expand-tilde'),getProxyAgent=require(_0x2427b4(0x1d1))[_0x2427b4(0x1f3)],ProxyUtil=require(_0x2427b4(0x22d)),AMZ_IV=_0x2427b4(0x208),AMZ_KEY=_0x2427b4(0x1c4),AMZ_MATDESC=_0x2427b4(0x1ea),SFC_DIGEST=_0x2427b4(0x218),EXPIRED_TOKEN=_0x2427b4(0x1d9),NO_SUCH_KEY=_0x2427b4(0x22f),SNOWFLAKE_S3_DESTINATION=_0x2427b4(0x21c),ERRORNO_WSAECONNABORTED=0x2745,DATA_SIZE_THRESHOLD=0x4000000,resultStatus=require('./file_util')[_0x2427b4(0x1e5)],HTTP_HEADER_VALUE_OCTET_STREAM=_0x2427b4(0x1fa);function S3Location(_0x127960,_0x98549){return{'bucketName':_0x127960,'s3path':_0x98549};}function _0x5916(_0x2bd71f,_0x4a06ce){const _0x3e7b4a=_0x3e7b();return _0x5916=function(_0x591610,_0x12b713){_0x591610=_0x591610-0x1c2;let _0x75501a=_0x3e7b4a[_0x591610];return _0x75501a;},_0x5916(_0x2bd71f,_0x4a06ce);}function S3Util(_0x28a4bf,_0x3f7d46,_0x5c83b1){const _0x38d6dc=_0x2427b4,_0x3b9ce2={'njipi':_0x38d6dc(0x1de),'uZzOH':_0x38d6dc(0x1f2),'QMvxm':function(_0x15345e,_0x5e92c4){return _0x15345e!==_0x5e92c4;},'mgFsW':'zUTSE','LCySl':_0x38d6dc(0x231),'ttUIY':_0x38d6dc(0x22a),'Gqclp':function(_0x856882,_0x263a8f){return _0x856882||_0x263a8f;},'ntwwF':function(_0x167fbf,_0x113747){return _0x167fbf(_0x113747);},'HanVB':_0x38d6dc(0x210),'wcAEo':_0x38d6dc(0x1e5),'LemDh':function(_0x439f0b,_0x13069f,_0x5cb74c,_0x476d0d){return _0x439f0b(_0x13069f,_0x5cb74c,_0x476d0d);},'yNfrS':function(_0x735aa1,_0x19bf23){return _0x735aa1===_0x19bf23;},'mrUDT':'stageInfo','hqbUI':function(_0x579127,_0x148c18){return _0x579127===_0x148c18;},'hjHLw':_0x38d6dc(0x216),'RLTWF':_0x38d6dc(0x233),'OLius':_0x38d6dc(0x211),'aPLfl':_0x38d6dc(0x22c),'GIvbk':_0x38d6dc(0x1f1),'EVFDL':function(_0x8c29ce,_0x56ffe9){return _0x8c29ce+_0x56ffe9;},'DMogz':'undefined'},_0x1b4af1=typeof _0x3f7d46!==_0x3b9ce2[_0x38d6dc(0x1ce)]?_0x3f7d46:require(_0x38d6dc(0x1c5)),_0x3820b9=_0x3b9ce2['QMvxm'](typeof _0x5c83b1,'undefined')?_0x5c83b1:_0x3b9ce2[_0x38d6dc(0x215)](require,'fs');this[_0x38d6dc(0x20f)]=function(_0x1acc11,_0x8710f8){const _0x426475=_0x38d6dc,_0x550355={'wPotL':_0x3b9ce2[_0x426475(0x1fb)],'wSjMU':_0x3b9ce2[_0x426475(0x1e2)]},_0x276fdf=_0x1acc11['creds'],_0x16c2af=_0x276fdf[_0x426475(0x21b)],_0x5675e2=_0x1acc11[_0x426475(0x1cf)]||_0x1acc11[_0x426475(0x1cc)];let _0x5a0a32=null;if(_0x1acc11['endPoint'])_0x5a0a32=_0x426475(0x232)+_0x1acc11[_0x426475(0x213)];else{if(_0x1acc11[_0x426475(0x1d2)]&&_0x5675e2){if(_0x3b9ce2[_0x426475(0x20d)](_0x3b9ce2[_0x426475(0x239)],_0x426475(0x236))){const _0x12572d=_0x1acc11[_0x426475(0x1d2)]['toLowerCase']()[_0x426475(0x217)](_0x426475(0x1de))?_0x3b9ce2['LCySl']:_0x426475(0x1f2);_0x5a0a32=_0x426475(0x1c9)+_0x1acc11[_0x426475(0x1d2)]+'.'+_0x12572d;}else{if(_0x56ca56[_0x426475(0x1d2)]&&_0x206c6a){const _0x188eb8=_0x25f5f4['region'][_0x426475(0x21d)]()[_0x426475(0x217)](_0x550355[_0x426475(0x202)])?_0x426475(0x231):_0x550355[_0x426475(0x1c2)];_0x3b53bd=_0x426475(0x1c9)+_0x222554[_0x426475(0x1d2)]+'.'+_0x188eb8;}}}}const _0x1cf8bf={'apiVersion':_0x426475(0x1f4),'region':_0x1acc11[_0x426475(0x1d2)],'credentials':{'accessKeyId':_0x276fdf[_0x426475(0x20b)],'secretAccessKey':_0x276fdf[_0x426475(0x201)],'sessionToken':_0x16c2af},'endpoint':_0x5a0a32,'useAccelerateEndpoint':_0x8710f8},_0x7b5ec2=ProxyUtil[_0x426475(0x1cd)](_0x28a4bf[_0x426475(0x1cd)](),_0x3b9ce2[_0x426475(0x1d5)]);if(_0x7b5ec2){const _0xec8cc2=getProxyAgent(_0x7b5ec2,new URL(_0x28a4bf[_0x426475(0x1da)]),_0x3b9ce2[_0x426475(0x1c3)](_0x5a0a32,SNOWFLAKE_S3_DESTINATION));_0x1cf8bf[_0x426475(0x1dc)]=new NodeHttpHandler({'httpAgent':_0xec8cc2,'httpsAgent':_0xec8cc2});}return new _0x1b4af1['S3'](_0x1cf8bf);},this[_0x38d6dc(0x1d0)]=async function(_0x410cd4,_0x4110c9){const _0xd70838=_0x38d6dc,_0x5f5993={'neJjt':function(_0x4a9e03,_0x3ec429){return _0x4a9e03===_0x3ec429;},'Hpcvc':_0xd70838(0x1ca)},_0x1b9b50=_0x410cd4[_0xd70838(0x20e)],_0x583140=this['createClient'](_0x1b9b50),_0x4bf53e=_0x3b9ce2[_0xd70838(0x215)](extractBucketNameAndPath,_0x1b9b50[_0xd70838(0x1f1)]),_0x3f47eb={'Bucket':_0x4bf53e[_0xd70838(0x209)],'Key':_0x4bf53e['s3path']+_0x4110c9};let _0x466940;try{await _0x583140['getObject'](_0x3f47eb)[_0xd70838(0x237)](function(_0x423382){const _0x117a4a=_0xd70838;_0x5f5993['neJjt'](_0x5f5993['Hpcvc'],_0x5f5993[_0x117a4a(0x200)])?_0x466940=_0x423382:(_0x4d9622[_0x3eb87f]=_0x22fa9f['iv'],_0x54aacc[_0x4bd94f]=_0xbaad79[_0x117a4a(0x20c)],_0x17899b[_0x293b97]=_0x23a2c4[_0x117a4a(0x1ed)]);});}catch(_0x3f9b47){if(_0x3f9b47[_0x3b9ce2[_0xd70838(0x1ff)]]===EXPIRED_TOKEN)return _0x410cd4[_0x3b9ce2[_0xd70838(0x1ee)]]=resultStatus[_0xd70838(0x20a)],null;else{if(_0x3f9b47[_0x3b9ce2[_0xd70838(0x1ff)]]===NO_SUCH_KEY)return _0x410cd4[_0x3b9ce2[_0xd70838(0x1ee)]]=resultStatus['NOT_FOUND_FILE'],_0x3b9ce2[_0xd70838(0x21f)](FileHeader,null,null,null);else return _0x3b9ce2[_0xd70838(0x238)](_0x3f9b47[_0xd70838(0x210)],_0xd70838(0x21a))?(_0x410cd4['resultStatus']=resultStatus[_0xd70838(0x20a)],null):(_0x410cd4[_0xd70838(0x1e5)]=resultStatus[_0xd70838(0x1f7)],null);}}_0x410cd4[_0x3b9ce2['wcAEo']]=resultStatus['UPLOADED'];let _0x454eaf;return _0x466940&&_0x466940[_0xd70838(0x235)][AMZ_KEY]&&(_0x454eaf=EncryptionMetadata(_0x466940[_0xd70838(0x235)][AMZ_KEY],_0x466940[_0xd70838(0x235)][AMZ_IV],_0x466940['Metadata'][AMZ_MATDESC])),FileHeader(_0x466940[_0xd70838(0x235)][SFC_DIGEST],_0x466940[_0xd70838(0x23d)],_0x454eaf);},this[_0x38d6dc(0x1e0)]=async function(_0x19b3b2,_0x56fe7a,_0x4b7d52){const _0x5efb49=_0x38d6dc,_0x2422aa=_0x3820b9[_0x5efb49(0x221)](_0x19b3b2);await this[_0x5efb49(0x1f0)](_0x2422aa,_0x56fe7a,_0x4b7d52);},this['uploadFileStream']=async function(_0x189fa3,_0x5b7c38,_0x142acc){const _0x4fad94=_0x38d6dc,_0x1c5e1a={'HTTP_HEADER_CONTENT_TYPE':HTTP_HEADER_VALUE_OCTET_STREAM,'SFC_DIGEST':_0x5b7c38[_0x4fad94(0x203)]};_0x142acc&&(_0x1c5e1a[AMZ_IV]=_0x142acc['iv'],_0x1c5e1a[AMZ_KEY]=_0x142acc['key'],_0x1c5e1a[AMZ_MATDESC]=_0x142acc[_0x4fad94(0x1ed)]);const _0x4bfc8a=_0x5b7c38[_0x3b9ce2['mrUDT']],_0x4ea366=this['createClient'](_0x4bfc8a),_0x1d1897=extractBucketNameAndPath(_0x5b7c38[_0x3b9ce2[_0x4fad94(0x1e6)]]['location']),_0x104d16={'Bucket':_0x1d1897[_0x4fad94(0x209)],'Body':_0x189fa3,'Key':_0x1d1897[_0x4fad94(0x1db)]+_0x5b7c38[_0x4fad94(0x207)],'Metadata':_0x1c5e1a};try{await _0x4ea366['putObject'](_0x104d16);}catch(_0x12e258){_0x3b9ce2[_0x4fad94(0x1e4)](_0x12e258[_0x3b9ce2['HanVB']],EXPIRED_TOKEN)?_0x5b7c38[_0x3b9ce2[_0x4fad94(0x1ee)]]=resultStatus['RENEW_TOKEN']:(_0x5b7c38[_0x3b9ce2['hjHLw']]=_0x12e258,_0x12e258[_0x3b9ce2['HanVB']]===ERRORNO_WSAECONNABORTED[_0x4fad94(0x1c6)]()?_0x5b7c38[_0x4fad94(0x1e5)]=resultStatus[_0x4fad94(0x230)]:_0x4fad94(0x233)===_0x3b9ce2['RLTWF']?_0x5b7c38[_0x4fad94(0x1e5)]=resultStatus[_0x4fad94(0x223)]:_0xfb80a5[_0x3b9ce2['wcAEo']]=_0x3951f8[_0x4fad94(0x230)]);return;}_0x5b7c38[_0x3b9ce2[_0x4fad94(0x1eb)]]=_0x5b7c38[_0x4fad94(0x1e1)],_0x5b7c38[_0x3b9ce2[_0x4fad94(0x1ee)]]=resultStatus[_0x4fad94(0x21e)];},this[_0x38d6dc(0x23a)]=async function(_0x2b4c2e,_0x4be0a5){const _0x44f094=_0x38d6dc,_0x26c1e0={'LhgVQ':_0x3b9ce2[_0x44f094(0x1ee)],'InbBC':_0x3b9ce2[_0x44f094(0x224)]};if(_0x44f094(0x1d3)===_0x44f094(0x1d3)){const _0x3e95e1=_0x2b4c2e[_0x44f094(0x20e)],_0x4b9f71=this[_0x44f094(0x20f)](_0x3e95e1),_0x5e3ac1=extractBucketNameAndPath(_0x2b4c2e[_0x44f094(0x20e)][_0x3b9ce2[_0x44f094(0x1fc)]]),_0x43b364={'Bucket':_0x5e3ac1[_0x44f094(0x209)],'Key':_0x3b9ce2[_0x44f094(0x205)](_0x5e3ac1[_0x44f094(0x1db)],_0x2b4c2e['dstFileName'])};try{await _0x4b9f71[_0x44f094(0x225)](_0x43b364)[_0x44f094(0x237)](_0x45c6fd=>_0x45c6fd[_0x44f094(0x1f8)][_0x44f094(0x23e)]())[_0x44f094(0x237)](_0x572d20=>{const _0x1baad9=_0x44f094,_0xabb67e={'eADAb':_0x26c1e0[_0x1baad9(0x226)],'jTsxH':function(_0x107e46,_0x4f4426){return _0x107e46===_0x4f4426;},'tsjHE':_0x26c1e0[_0x1baad9(0x1e7)]};return new Promise((_0x7ec057,_0x5beec7)=>{const _0x3ca381=_0x1baad9,_0x59b87b={'HCNda':_0xabb67e['eADAb'],'PgRVy':function(_0x398624,_0x5ed637){const _0x100893=_0x5916;return _0xabb67e[_0x100893(0x1cb)](_0x398624,_0x5ed637);},'BzBNj':function(_0x4d919b,_0x3954a6){return _0x4d919b(_0x3954a6);},'eIZWi':function(_0x1a6dbf){return _0x1a6dbf();}};_0x3820b9[_0x3ca381(0x23c)](_0x4be0a5,_0x572d20,_0xabb67e[_0x3ca381(0x1e3)],_0x29ddad=>{const _0x209c93=_0x3ca381;_0x59b87b[_0x209c93(0x222)](_0x209c93(0x227),_0x209c93(0x1fd))?_0x1216fc[_0x59b87b[_0x209c93(0x1ec)]]=_0x2465a1['NEED_RETRY_WITH_LOWER_CONCURRENCY']:(_0x29ddad&&_0x59b87b[_0x209c93(0x1ef)](_0x5beec7,_0x29ddad),_0x59b87b[_0x209c93(0x22b)](_0x7ec057));});});});}catch(_0x427ff6){_0x427ff6[_0x44f094(0x210)]===EXPIRED_TOKEN?_0x2b4c2e[_0x3b9ce2[_0x44f094(0x1ee)]]=resultStatus[_0x44f094(0x20a)]:(_0x2b4c2e[_0x44f094(0x216)]=_0x427ff6,_0x427ff6['Code']===ERRORNO_WSAECONNABORTED[_0x44f094(0x1c6)]()?_0x2b4c2e[_0x44f094(0x1e5)]=resultStatus[_0x44f094(0x230)]:_0x2b4c2e[_0x3b9ce2[_0x44f094(0x1ee)]]=resultStatus[_0x44f094(0x223)]);return;}_0x2b4c2e[_0x44f094(0x1e5)]=resultStatus[_0x44f094(0x1f5)];}else _0x454f65[_0x44f094(0x1e5)]=_0x1394ca['NEED_RETRY'];};}function extractBucketNameAndPath(_0x13c332){const _0xde3091=_0x2427b4,_0x3ce022={'nlxba':function(_0x4bcf3c,_0x552b60){return _0x4bcf3c!==_0x552b60;},'AFEqd':_0xde3091(0x23b),'aqvNY':function(_0x59d080,_0x17520f){return _0x59d080(_0x17520f);},'lkCsm':function(_0x4306cd,_0x4a47dc,_0xb50536){return _0x4306cd(_0x4a47dc,_0xb50536);}};_0x3ce022[_0xde3091(0x1e8)](process[_0xde3091(0x220)],_0x3ce022[_0xde3091(0x212)])&&(_0x13c332=_0x3ce022[_0xde3091(0x1dd)](expandTilde,_0x13c332));let _0x4c8bbe=_0x13c332,_0x2d41ae;return _0x13c332['includes']('/')&&(_0x4c8bbe=_0x13c332[_0xde3091(0x219)](0x0,_0x13c332[_0xde3091(0x1d4)]('/')),_0x2d41ae=_0x13c332[_0xde3091(0x219)](_0x13c332['indexOf']('/')+0x1,_0x13c332[_0xde3091(0x1d7)]),_0x2d41ae&&!_0x2d41ae[_0xde3091(0x214)]('/')&&(_0x2d41ae+='/')),_0x3ce022[_0xde3091(0x1df)](S3Location,_0x4c8bbe,_0x2d41ae);}module[_0x2427b4(0x22e)]={'S3Util':S3Util,'SNOWFLAKE_S3_DESTINATION':SNOWFLAKE_S3_DESTINATION,'DATA_SIZE_THRESHOLD':DATA_SIZE_THRESHOLD,'extractBucketNameAndPath':extractBucketNameAndPath};