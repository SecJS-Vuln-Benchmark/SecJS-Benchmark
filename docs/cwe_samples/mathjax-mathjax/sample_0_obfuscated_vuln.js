const _0x293c5f=_0x2713;function _0x1ba6(){const _0x41cb3c=['msg','defaultCertExpValueSuffix','certInfo','query','FfxoG','defaultWarnColor','kAcyd','diff','duration','getPreviousHeartbeat','calcUptime','defaultStyle','/api/badge/:id/avg-response/:duration?','XeGUO','store','json','tOkVA','isoDateTimeMillis','send','/api/badge/:id/uptime/:duration?','message','ping','EPqoG','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20AVG(ping)\x20FROM\x20monitor_group,\x20`group`,\x20heartbeat\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.time\x20>\x20DATETIME(\x27now\x27,\x20?\x20||\x20\x27\x20hours\x27)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.ping\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','dJNqH','tAwTH','x-forwarded-host','5\x20minutes','TyVHk','params','CSWhM','defaultCertExpireDownDays','156AGPYeC','PBTUD','label','clearCache','sendNotification','domainMappingList','jFfcc','FuYfj','status','daysRemaining','defaultPingValueSuffix','toJSON','time','findOne','utc','aCSRf','DlYOA','rVkcx','juBNH','ldgEn','/api/push/:pushToken','naColor','monitor','trpcF','ARdEc','zfKtb','../prometheus','debug','ikXCq','Maintenance','image/svg+xml','ftNjm','kpcDH','date','IWOUE','color','isUpsideDown','YVaqN','DXwzq','Down','dayjs','defaultMaintenanceColor','Current\x20Status:\x20','validTo','dispense','Pending','format','2591768QLsEPk','RVGgg','Monitor\x20under\x20maintenance','chjma','monitor_id','user_id','oLNqX','uRecS','393868dFMfZO','pgmVN','pYQml','../uptime-kuma-server','Monitor\x20not\x20found\x20or\x20not\x20active.','Tqcdf','NnXea','BsYYE','heartbeat','parse','defaultDownColor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20monitor_group.monitor_id\x20FROM\x20monitor_group,\x20`group`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20monitor_group.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','54114MKLucu','/api/push/\x20called\x20at\x20','getRow','trustProxy','lIsyL','No/Bad\x20Cert','get','yhtcg','buHJo','isImportantForNotification','defaultUptimeLabelSuffix','middleware','defaultUptimeValueSuffix','getCell','TRDJG','../../src/util','Avg.\x20Response\x20(','redbean-node','sFATY','RtNBq','flbXe','qHlBT','express','statusPageSlug','uNeLL','669462wIEYER','jpekm','miNds','router','labelColor','monitor_tls_info','second','gIqCq','toPrecision','MbRki','headers','CYiJU','valid','defaultPendingColor','72954uAgERN','update','qghil','KdUgC','WZXZA','QpaMR','WTQEA','../util-server','N/A','jmiMY','PreviousStatus:\x20','YYYY-MM-DD\x20HH:mm:ss.SSS','Bad\x20Cert','PcUwO','/api/entry-page','type','jFRDo','statusPageMatchedDomain','isUnderMaintenance','defaultPingColor','GTvLu','jCytR','entryPage','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20AVG(ping)\x20FROM\x20monitor_group,\x20`group`,\x20heartbeat\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.time\x20>\x20DATETIME(\x27now\x27,\x20?\x20||\x20\x27\x20hours\x27)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.ping\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','../modules/apicache','djxbs','EqjUX','RTGaP','min','cMhfF','djrAs','KPXOQ','4823EFuvke','1504270XpCYoX'];_0x1ba6=function(){return _0x41cb3c;};return _0x1ba6();}(function(_0x51b192,_0x3a6a6c){const _0x46e9c3=_0x2713,_0x494ba0=_0x51b192();while(!![]){try{const _0x57bcb2=-parseInt(_0x46e9c3(0x191))/0x1+parseInt(_0x46e9c3(0x10c))/0x2+parseInt(_0x46e9c3(0xfe))/0x3+parseInt(_0x46e9c3(0x185))/0x4+parseInt(_0x46e9c3(0x12d))/0x5+-parseInt(_0x46e9c3(0x14e))/0x6*(parseInt(_0x46e9c3(0x12c))/0x7)+-parseInt(_0x46e9c3(0x17d))/0x8;if(_0x57bcb2===_0x3a6a6c)break;else _0x494ba0['push'](_0x494ba0['shift']());}catch(_0x498f53){_0x494ba0['push'](_0x494ba0['shift']());}}}(_0x1ba6,0x40329));let express=require(_0x293c5f(0xfb));const {setting,allowDevAllOrigin,allowAllOrigin,percentageToColor,filterAndJoin,sendHttpError}=require(_0x293c5f(0x113)),{R}=require(_0x293c5f(0xf6)),apicache=require(_0x293c5f(0x124)),Monitor=require('../model/monitor'),dayjs=require(_0x293c5f(0x176)),{UP,MAINTENANCE,DOWN,PENDING,flipStatus,log,badgeConstants}=require(_0x293c5f(0xf4)),StatusPage=require('../model/status_page'),{UptimeKumaServer}=require(_0x293c5f(0x188)),{UptimeCacheList}=require('../uptime-cache-list'),{makeBadge}=require('badge-maker'),{Prometheus}=require(_0x293c5f(0x168));let router=express['Router'](),cache=apicache[_0x293c5f(0xf0)];function _0x2713(_0x247fe5,_0x1d7514){const _0x1ba671=_0x1ba6();return _0x2713=function(_0x2713da,_0x590448){_0x2713da=_0x2713da-0xec;let _0xd1012b=_0x1ba671[_0x2713da];return _0xd1012b;},_0x2713(_0x247fe5,_0x1d7514);}const server=UptimeKumaServer['getInstance']();let io=server['io'];router[_0x293c5f(0x197)](_0x293c5f(0x11a),async(_0x78c8c1,_0x3c16bb)=>{const _0x30620e=_0x293c5f,_0x45fbe0={'KdUgC':_0x30620e(0x148),'pYQml':function(_0x5163c1,_0xed0fed){return _0x5163c1(_0xed0fed);},'BsYYE':_0x30620e(0x194),'ldgEn':function(_0x8c152c,_0x105c0d){return _0x8c152c===_0x105c0d;},'sFATY':_0x30620e(0xf8),'jFfcc':_0x30620e(0x11d),'IWOUE':'mvvcg'};_0x45fbe0[_0x30620e(0x187)](allowDevAllOrigin,_0x3c16bb);let _0x46b553={},_0x2c9737=_0x78c8c1['hostname'];await setting(_0x45fbe0[_0x30620e(0x18c)])&&_0x78c8c1['headers'][_0x45fbe0[_0x30620e(0x10f)]]&&(_0x45fbe0[_0x30620e(0x161)](_0x45fbe0[_0x30620e(0xf7)],'RtNBq')?_0x2c9737=_0x78c8c1['headers'][_0x45fbe0['KdUgC']]:_0xe616a0(_0x514e24,_0x507e57[_0x30620e(0x142)])),_0x2c9737 in StatusPage[_0x30620e(0x153)]?(_0x46b553['type']=_0x45fbe0[_0x30620e(0x154)],_0x46b553[_0x30620e(0xfc)]=StatusPage[_0x30620e(0x153)][_0x2c9737]):_0x45fbe0['ldgEn'](_0x45fbe0[_0x30620e(0x170)],_0x30620e(0x155))?_0x8cadf8=_0x3a41b7[_0x30620e(0x108)][_0x45fbe0[_0x30620e(0x10f)]]:(_0x46b553[_0x30620e(0x11b)]=_0x30620e(0x122),_0x46b553[_0x30620e(0x122)]=server['entryPage']),_0x3c16bb[_0x30620e(0x13d)](_0x46b553);}),router[_0x293c5f(0x197)](_0x293c5f(0x162),async(_0x3b64d4,_0x12c67c)=>{const _0x52e773=_0x293c5f,_0x15f712={'RVGgg':function(_0x42bfd9,_0x18bd8a){return _0x42bfd9(_0x18bd8a);},'tOkVA':function(_0x414377,_0x147e6d){return _0x414377===_0x147e6d;},'djxbs':_0x52e773(0x164),'QLbtQ':'\x20push_token\x20=\x20?\x20AND\x20active\x20=\x201\x20','PcUwO':_0x52e773(0x104),'trpcF':_0x52e773(0x17f),'ftNjm':_0x52e773(0x101),'YpUQe':_0x52e773(0x116),'miNds':function(_0x2a5604,_0xad4f70){return _0x2a5604+_0xad4f70;},'GtoxX':function(_0x20a2fb,_0x603603){return _0x20a2fb!==_0x603603;},'FfxoG':_0x52e773(0x105)};try{let _0x30f36e=_0x3b64d4['params']['pushToken'],_0x4e4a43=_0x3b64d4[_0x52e773(0x131)][_0x52e773(0x12e)]||'OK',_0x5ccb28=_0x15f712[_0x52e773(0x17e)](parseFloat,_0x3b64d4[_0x52e773(0x131)][_0x52e773(0x143)])||null,_0x59cd08=_0x3b64d4['query'][_0x52e773(0x156)]||'up',_0xa78261=_0x15f712[_0x52e773(0x13e)](_0x59cd08,'up')?UP:DOWN,_0x1e46f5=await R[_0x52e773(0x15b)](_0x15f712[_0x52e773(0x125)],_0x15f712['QLbtQ'],[_0x30f36e]);if(!_0x1e46f5)throw new Error(_0x52e773(0x189));const _0x1dd67d=await Monitor[_0x52e773(0x137)](_0x1e46f5['id']);_0x1e46f5[_0x52e773(0x172)]()&&(_0xa78261=flipStatus(_0xa78261));let _0x4941ff=!![],_0x5ecb90=_0xa78261,_0xb57c7e=0x0,_0x6edbe=R[_0x52e773(0x17a)]('heartbeat');_0x6edbe[_0x52e773(0x15a)]=R[_0x52e773(0x13f)](dayjs[_0x52e773(0x15c)]()),_0x1dd67d&&(_0x4941ff=![],_0x5ecb90=_0x1dd67d['status'],_0xb57c7e=dayjs(_0x6edbe[_0x52e773(0x15a)])[_0x52e773(0x135)](dayjs(_0x1dd67d[_0x52e773(0x15a)]),_0x15f712[_0x52e773(0x119)])),await Monitor[_0x52e773(0x11e)](_0x1e46f5['id'])&&(_0x4e4a43=_0x15f712[_0x52e773(0x165)],_0xa78261=MAINTENANCE),log[_0x52e773(0x169)](_0x52e773(0x101),_0x52e773(0x192)+dayjs()[_0x52e773(0x17c)](_0x52e773(0x117))),log[_0x52e773(0x169)](_0x15f712[_0x52e773(0x16d)],_0x15f712['YpUQe']+_0x5ecb90),log[_0x52e773(0x169)](_0x52e773(0x101),_0x15f712[_0x52e773(0x100)](_0x52e773(0x178),_0xa78261)),_0x6edbe['important']=Monitor['isImportantBeat'](_0x4941ff,_0x5ecb90,_0xa78261),_0x6edbe[_0x52e773(0x181)]=_0x1e46f5['id'],_0x6edbe[_0x52e773(0x156)]=_0xa78261,_0x6edbe[_0x52e773(0x12e)]=_0x4e4a43,_0x6edbe['ping']=_0x5ccb28,_0x6edbe[_0x52e773(0x136)]=_0xb57c7e,await R[_0x52e773(0x13c)](_0x6edbe),io['to'](_0x1e46f5[_0x52e773(0x182)])['emit'](_0x52e773(0x18d),_0x6edbe[_0x52e773(0x159)]()),UptimeCacheList[_0x52e773(0x151)](_0x1e46f5['id']),Monitor['sendStats'](io,_0x1e46f5['id'],_0x1e46f5[_0x52e773(0x182)]),new Prometheus(_0x1e46f5)[_0x52e773(0x10d)](_0x6edbe,undefined),_0x12c67c[_0x52e773(0x13d)]({'ok':!![]}),Monitor[_0x52e773(0xee)](_0x4941ff,_0x5ecb90,_0xa78261)&&await Monitor[_0x52e773(0x152)](_0x4941ff,_0x1e46f5,_0x6edbe);}catch(_0x455135){_0x15f712['GtoxX'](_0x15f712[_0x52e773(0x132)],_0x15f712[_0x52e773(0x132)])?(_0x27d495[_0x52e773(0x142)]=_0x52e773(0x114),_0x51de82['color']=_0x47f37d[_0x52e773(0x163)]):_0x12c67c[_0x52e773(0x156)](0x194)[_0x52e773(0x13d)]({'ok':![],'msg':_0x455135[_0x52e773(0x142)]});}}),router['get']('/api/badge/:id/status',cache(_0x293c5f(0x149)),async(_0x5d9c58,_0x46d776)=>{const _0x143a2b=_0x293c5f,_0x28e15b={'YVaqN':function(_0xff3327,_0x44fe37){return _0xff3327(_0x44fe37);},'rVkcx':function(_0x46efe1,_0x3dd156){return _0x46efe1!==_0x3dd156;},'KPXOQ':'Status','flbXe':function(_0x542558,_0x1eae22,_0x3efaeb){return _0x542558(_0x1eae22,_0x3efaeb);}};_0x28e15b[_0x143a2b(0x173)](allowAllOrigin,_0x46d776);const {label:_0x296dc0,upLabel:upLabel='Up',downLabel:downLabel=_0x143a2b(0x175),pendingLabel:pendingLabel=_0x143a2b(0x17b),maintenanceLabel:maintenanceLabel=_0x143a2b(0x16b),upColor:upColor=badgeConstants['defaultUpColor'],downColor:downColor=badgeConstants[_0x143a2b(0x18f)],pendingColor:pendingColor=badgeConstants[_0x143a2b(0x10b)],maintenanceColor:maintenanceColor=badgeConstants[_0x143a2b(0x177)],style:style=badgeConstants[_0x143a2b(0x139)],value:_0x3d347e}=_0x5d9c58[_0x143a2b(0x131)];try{const _0x635416=parseInt(_0x5d9c58['params']['id'],0xa),_0x16a05d=_0x28e15b[_0x143a2b(0x15f)](_0x3d347e,undefined)?parseInt(_0x3d347e):undefined;let _0x578155=await R[_0x143a2b(0x193)](_0x143a2b(0x190),[_0x635416]);const _0x2e9058={'style':style};if(!_0x578155)_0x2e9058[_0x143a2b(0x142)]=_0x143a2b(0x114),_0x2e9058[_0x143a2b(0x171)]=badgeConstants[_0x143a2b(0x163)];else{if(_0x143a2b(0x16a)!==_0x143a2b(0xfa)){const _0xe03817=await Monitor[_0x143a2b(0x137)](_0x635416),_0xba4ea2=_0x16a05d!==undefined?_0x16a05d:_0xe03817[_0x143a2b(0x156)];_0x296dc0===undefined?_0x2e9058[_0x143a2b(0x150)]=_0x28e15b[_0x143a2b(0x12b)]:_0x2e9058[_0x143a2b(0x150)]=_0x296dc0;switch(_0xba4ea2){case DOWN:_0x2e9058[_0x143a2b(0x171)]=downColor,_0x2e9058[_0x143a2b(0x142)]=downLabel;break;case UP:_0x2e9058[_0x143a2b(0x171)]=upColor,_0x2e9058[_0x143a2b(0x142)]=upLabel;break;case PENDING:_0x2e9058[_0x143a2b(0x171)]=pendingColor,_0x2e9058[_0x143a2b(0x142)]=pendingLabel;break;case MAINTENANCE:_0x2e9058['color']=maintenanceColor,_0x2e9058[_0x143a2b(0x142)]=maintenanceLabel;break;default:_0x2e9058[_0x143a2b(0x171)]=badgeConstants['naColor'],_0x2e9058[_0x143a2b(0x142)]=_0x143a2b(0x114);}}else _0x2758e1['status'](0x194)[_0x143a2b(0x13d)]({'ok':![],'msg':_0x4d5dd1[_0x143a2b(0x142)]});}const _0x4570e4=makeBadge(_0x2e9058);_0x46d776[_0x143a2b(0x11b)](_0x143a2b(0x16c)),_0x46d776[_0x143a2b(0x140)](_0x4570e4);}catch(_0x263635){_0x28e15b[_0x143a2b(0xf9)](sendHttpError,_0x46d776,_0x263635['message']);}}),router[_0x293c5f(0x197)](_0x293c5f(0x141),cache(_0x293c5f(0x149)),async(_0x404182,_0x59b310)=>{const _0x19f2c8=_0x293c5f,_0x134878={'VUKyE':_0x19f2c8(0x17f),'AZhMe':function(_0x334359,_0x119eab){return _0x334359(_0x119eab);},'jmiMY':_0x19f2c8(0xff),'jFRDo':function(_0x2e428d,_0x556825,_0x2c1ccf){return _0x2e428d(_0x556825,_0x2c1ccf);},'qghil':function(_0x2910fb,_0x1abd67){return _0x2910fb??_0x1abd67;},'DlYOA':function(_0x298df6,_0x2fe2cc){return _0x298df6(_0x2fe2cc);},'jCytR':function(_0x18ae8c,_0x2950e0){return _0x18ae8c===_0x2950e0;}};_0x134878['AZhMe'](allowAllOrigin,_0x59b310);const {label:_0x59fac4,labelPrefix:_0x341ac2,labelSuffix:labelSuffix=badgeConstants[_0x19f2c8(0xef)],prefix:_0x58c8de,suffix:suffix=badgeConstants[_0x19f2c8(0xf1)],color:_0x13857d,labelColor:_0x4246c1,style:style=badgeConstants[_0x19f2c8(0x139)],value:_0x73ae35}=_0x404182['query'];try{if(_0x19f2c8(0x112)!==_0x134878[_0x19f2c8(0x115)]){const _0x293ffa=parseInt(_0x404182['params']['id'],0xa),_0x5840d0=_0x404182[_0x19f2c8(0x14b)]['duration']!==undefined?_0x134878[_0x19f2c8(0x11c)](parseInt,_0x404182[_0x19f2c8(0x14b)][_0x19f2c8(0x136)],0xa):0x18,_0x237405=_0x73ae35&&parseFloat(_0x73ae35);let _0xa7773f=await R[_0x19f2c8(0x193)](_0x19f2c8(0x190),[_0x293ffa]);const _0x3499ba={'style':style};if(!_0xa7773f)_0x3499ba[_0x19f2c8(0x142)]=_0x19f2c8(0x114),_0x3499ba[_0x19f2c8(0x171)]=badgeConstants[_0x19f2c8(0x163)];else{const _0x2069a3=_0x237405??await Monitor[_0x19f2c8(0x138)](_0x5840d0,_0x293ffa),_0x3e54d4=(_0x2069a3*0x64)[_0x19f2c8(0x106)](0x4);_0x3499ba[_0x19f2c8(0x171)]=_0x13857d??percentageToColor(_0x2069a3),_0x3499ba[_0x19f2c8(0x102)]=_0x134878[_0x19f2c8(0x10e)](_0x4246c1,''),_0x3499ba[_0x19f2c8(0x150)]=filterAndJoin([_0x341ac2,_0x59fac4??'Uptime\x20('+_0x5840d0+labelSuffix+')']),_0x3499ba[_0x19f2c8(0x142)]=filterAndJoin([_0x58c8de,_0x3e54d4,suffix]);}const _0x339df7=_0x134878[_0x19f2c8(0x15e)](makeBadge,_0x3499ba);_0x59b310[_0x19f2c8(0x11b)](_0x19f2c8(0x16c)),_0x59b310[_0x19f2c8(0x140)](_0x339df7);}else _0x5d18f7['message']='N/A',_0x24c442[_0x19f2c8(0x171)]=_0xb33142['naColor'];}catch(_0x4fcfec){_0x134878[_0x19f2c8(0x121)]('zfNHq','wVzMD')?(_0x1f9eea=_0x134878['VUKyE'],_0x4af85f=_0x154794):sendHttpError(_0x59b310,_0x4fcfec[_0x19f2c8(0x142)]);}}),router[_0x293c5f(0x197)]('/api/badge/:id/ping/:duration?',cache('5\x20minutes'),async(_0x34f4c3,_0x36d3c0)=>{const _0x1aef2d=_0x293c5f,_0x1cc3df={'buHJo':_0x1aef2d(0x118),'WZXZA':function(_0x23f11a,_0x574f21,_0x2ff41d){return _0x23f11a(_0x574f21,_0x2ff41d);},'wLJoC':function(_0x597ca7,_0x84a1f5){return _0x597ca7(_0x84a1f5);},'kAcyd':function(_0x3b5613,_0x52946c){return _0x3b5613(_0x52946c);},'SPHsU':_0x1aef2d(0x114),'kpcDH':function(_0x1a5d73,_0x19631a){return _0x1a5d73??_0x19631a;},'pgmVN':function(_0xe6bec9,_0x5d845b){return _0xe6bec9(_0x5d845b);},'djrAs':_0x1aef2d(0x16c),'TyVHk':function(_0x8d8fa1,_0x3250a5){return _0x8d8fa1!==_0x3250a5;},'XeGUO':_0x1aef2d(0x146)};allowAllOrigin(_0x36d3c0);const {label:_0x452389,labelPrefix:_0x2cc106,labelSuffix:labelSuffix=badgeConstants['defaultPingLabelSuffix'],prefix:_0x899fda,suffix:suffix=badgeConstants[_0x1aef2d(0x158)],color:color=badgeConstants[_0x1aef2d(0x11f)],labelColor:_0x15dfd6,style:style=badgeConstants[_0x1aef2d(0x139)],value:_0x1ef9e7}=_0x34f4c3[_0x1aef2d(0x131)];try{const _0x3744d6=_0x1cc3df[_0x1aef2d(0x110)](parseInt,_0x34f4c3[_0x1aef2d(0x14b)]['id'],0xa),_0x52b96e=Math[_0x1aef2d(0x128)](_0x34f4c3[_0x1aef2d(0x14b)][_0x1aef2d(0x136)]?_0x1cc3df[_0x1aef2d(0x110)](parseInt,_0x34f4c3[_0x1aef2d(0x14b)][_0x1aef2d(0x136)],0xa):0x18,0x2d0),_0x3ba525=_0x1ef9e7&&_0x1cc3df['wLJoC'](parseFloat,_0x1ef9e7),_0x121d68=_0x1cc3df[_0x1aef2d(0x134)](parseInt,await R[_0x1aef2d(0xf2)](_0x1aef2d(0x145),[-_0x52b96e,_0x3744d6])),_0x52f498={'style':style};if(!_0x121d68)_0x52f498[_0x1aef2d(0x142)]=_0x1cc3df['SPHsU'],_0x52f498[_0x1aef2d(0x171)]=badgeConstants[_0x1aef2d(0x163)];else{const _0x1a65ff=_0x1cc3df[_0x1aef2d(0x134)](parseInt,_0x1cc3df[_0x1aef2d(0x16e)](_0x3ba525,_0x121d68));_0x52f498[_0x1aef2d(0x171)]=color,_0x52f498[_0x1aef2d(0x102)]=_0x1cc3df['kpcDH'](_0x15dfd6,''),_0x52f498['label']=_0x1cc3df[_0x1aef2d(0x186)](filterAndJoin,[_0x2cc106,_0x452389??'Avg.\x20Ping\x20('+_0x52b96e+labelSuffix+')']),_0x52f498[_0x1aef2d(0x142)]=filterAndJoin([_0x899fda,_0x1a65ff,suffix]);}const _0x585c5f=makeBadge(_0x52f498);_0x36d3c0['type'](_0x1cc3df[_0x1aef2d(0x12a)]),_0x36d3c0[_0x1aef2d(0x140)](_0x585c5f);}catch(_0x3ea38e){_0x1cc3df[_0x1aef2d(0x14a)](_0x1cc3df[_0x1aef2d(0x13b)],_0x1cc3df[_0x1aef2d(0x13b)])?(_0x34e366['message']=_0x1cc3df[_0x1aef2d(0xed)],_0x300054[_0x1aef2d(0x171)]=_0xf8e281):sendHttpError(_0x36d3c0,_0x3ea38e['message']);}}),router[_0x293c5f(0x197)](_0x293c5f(0x13a),cache('5\x20minutes'),async(_0x3500c6,_0xdbed53)=>{const _0x51ade8=_0x293c5f,_0x460763={'tAwTH':function(_0x4d1fc3,_0x1672e6){return _0x4d1fc3(_0x1672e6);},'RTGaP':function(_0x469d00,_0x55e198,_0x417449){return _0x469d00(_0x55e198,_0x417449);},'TRDJG':_0x51ade8(0x114),'EqjUX':function(_0x29e24b,_0x480f4e){return _0x29e24b(_0x480f4e);},'MbRki':_0x51ade8(0x16c)};_0x460763[_0x51ade8(0x147)](allowAllOrigin,_0xdbed53);const {label:_0x1bce7d,labelPrefix:_0x49b129,labelSuffix:_0x20dad9,prefix:_0x153395,suffix:suffix=badgeConstants[_0x51ade8(0x158)],color:color=badgeConstants[_0x51ade8(0x11f)],labelColor:_0x3ab965,style:style=badgeConstants[_0x51ade8(0x139)],value:_0x2b01bf}=_0x3500c6[_0x51ade8(0x131)];try{const _0x2d87d2=parseInt(_0x3500c6[_0x51ade8(0x14b)]['id'],0xa),_0x218320=Math[_0x51ade8(0x128)](_0x3500c6[_0x51ade8(0x14b)][_0x51ade8(0x136)]?_0x460763['RTGaP'](parseInt,_0x3500c6[_0x51ade8(0x14b)][_0x51ade8(0x136)],0xa):0x18,0x2d0),_0x136105=_0x2b01bf&&_0x460763[_0x51ade8(0x147)](parseFloat,_0x2b01bf),_0xb8cbd1=parseInt(await R[_0x51ade8(0xf2)](_0x51ade8(0x123),[-_0x218320,_0x2d87d2])),_0x275092={'style':style};if(!_0xb8cbd1)_0x275092[_0x51ade8(0x142)]=_0x460763[_0x51ade8(0xf3)],_0x275092[_0x51ade8(0x171)]=badgeConstants['naColor'];else{const _0x5bd4b9=_0x460763[_0x51ade8(0x147)](parseInt,_0x136105??_0xb8cbd1);_0x275092[_0x51ade8(0x171)]=color,_0x275092['labelColor']=_0x3ab965??'',_0x275092[_0x51ade8(0x150)]=filterAndJoin([_0x49b129,_0x1bce7d??_0x51ade8(0xf5)+_0x218320+'h)',_0x20dad9]),_0x275092[_0x51ade8(0x142)]=_0x460763['EqjUX'](filterAndJoin,[_0x153395,_0x5bd4b9,suffix]);}const _0x486561=_0x460763[_0x51ade8(0x126)](makeBadge,_0x275092);_0xdbed53['type'](_0x460763[_0x51ade8(0x107)]),_0xdbed53[_0x51ade8(0x140)](_0x486561);}catch(_0x213915){_0x460763[_0x51ade8(0x127)](sendHttpError,_0xdbed53,_0x213915['message']);}}),router[_0x293c5f(0x197)]('/api/badge/:id/cert-exp',cache(_0x293c5f(0x149)),async(_0x526023,_0x53e55e)=>{const _0x254035=_0x293c5f,_0x13cdab={'aCSRf':function(_0x5188d6,_0x47e42f,_0x2fbb3a){return _0x5188d6(_0x47e42f,_0x2fbb3a);},'chjma':_0x254035(0x114),'ARdEc':_0x254035(0x103),'CSWhM':_0x254035(0x118),'CYiJU':function(_0x597cb0,_0x1ee0db){return _0x597cb0(_0x1ee0db);},'zfKtb':function(_0xc6bf0b,_0x462474){return _0xc6bf0b>_0x462474;},'lIsyL':function(_0x5e95e3,_0x23bfed){return _0x5e95e3!==_0x23bfed;},'yhtcg':_0x254035(0x184),'EPqoG':function(_0x30a3d4,_0x568af8){return _0x30a3d4??_0x568af8;},'Tqcdf':'Cert\x20Exp.','GTvLu':_0x254035(0x16c)};allowAllOrigin(_0x53e55e);const _0x20ccc4=_0x526023[_0x254035(0x131)][_0x254035(0x16f)],{label:_0x512651,labelPrefix:_0x5758c2,labelSuffix:_0x20b5c3,prefix:_0x30c9a7,suffix:suffix=_0x20ccc4?'':badgeConstants[_0x254035(0x12f)],upColor:upColor=badgeConstants['defaultUpColor'],warnColor:warnColor=badgeConstants[_0x254035(0x133)],downColor:downColor=badgeConstants[_0x254035(0x18f)],warnDays:warnDays=badgeConstants['defaultCertExpireWarnDays'],downDays:downDays=badgeConstants[_0x254035(0x14d)],labelColor:_0x25d742,style:style=badgeConstants[_0x254035(0x139)],value:_0x54af5f}=_0x526023['query'];try{const _0x1c8cbf=_0x13cdab[_0x254035(0x15d)](parseInt,_0x526023[_0x254035(0x14b)]['id'],0xa),_0x2a6bc9=_0x54af5f&&parseFloat(_0x54af5f);let _0x16b382=await R[_0x254035(0x193)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20monitor_group.monitor_id\x20FROM\x20monitor_group,\x20`group`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20monitor_group.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',[_0x1c8cbf]);const _0x34825d={'style':style};if(!_0x16b382)_0x34825d['message']=_0x13cdab[_0x254035(0x180)],_0x34825d[_0x254035(0x171)]=badgeConstants[_0x254035(0x163)];else{const _0x32ba3a=await R[_0x254035(0x15b)](_0x13cdab[_0x254035(0x166)],'monitor_id\x20=\x20?',[_0x1c8cbf]);if(!_0x32ba3a)_0x34825d['message']=_0x254035(0x196),_0x34825d[_0x254035(0x171)]=badgeConstants[_0x254035(0x163)];else{const _0x2ec1db=JSON[_0x254035(0x18e)](_0x32ba3a['info_json']);if(!_0x2ec1db[_0x254035(0x10a)])_0x34825d[_0x254035(0x142)]=_0x13cdab[_0x254035(0x14c)],_0x34825d[_0x254035(0x171)]=downColor;else{const _0x371f18=_0x13cdab[_0x254035(0x109)](parseInt,_0x2a6bc9??_0x2ec1db[_0x254035(0x130)][_0x254035(0x157)]);if(_0x13cdab[_0x254035(0x167)](_0x371f18,warnDays))_0x34825d[_0x254035(0x171)]=upColor;else _0x371f18>downDays?_0x34825d[_0x254035(0x171)]=warnColor:_0x13cdab[_0x254035(0x195)](_0x13cdab[_0x254035(0xec)],'uRecS')?_0x182fc5[_0x254035(0x171)]=_0x59a8f6:_0x34825d[_0x254035(0x171)]=downColor;_0x34825d[_0x254035(0x102)]=_0x25d742??'',_0x34825d[_0x254035(0x150)]=filterAndJoin([_0x5758c2,_0x13cdab[_0x254035(0x144)](_0x512651,_0x13cdab[_0x254035(0x18a)]),_0x20b5c3]),_0x34825d[_0x254035(0x142)]=_0x13cdab['CYiJU'](filterAndJoin,[_0x30c9a7,_0x20ccc4?_0x2ec1db[_0x254035(0x130)][_0x254035(0x179)]:_0x371f18,suffix]);}}}const _0x3a4256=_0x13cdab['CYiJU'](makeBadge,_0x34825d);_0x53e55e[_0x254035(0x11b)](_0x13cdab[_0x254035(0x120)]),_0x53e55e[_0x254035(0x140)](_0x3a4256);}catch(_0x103829){_0x13cdab[_0x254035(0x15d)](sendHttpError,_0x53e55e,_0x103829['message']);}}),router[_0x293c5f(0x197)]('/api/badge/:id/response',cache('5\x20minutes'),async(_0x109743,_0x3dde9d)=>{const _0x4a2194=_0x293c5f,_0x8606a2={'NnXea':function(_0x20c8a8,_0x26cf85){return _0x20c8a8(_0x26cf85);},'QpaMR':function(_0x430de6,_0x3445e1,_0x39bd76){return _0x430de6(_0x3445e1,_0x39bd76);},'juBNH':function(_0x3e6d6a,_0x425fb2){return _0x3e6d6a(_0x425fb2);},'cMhfF':_0x4a2194(0x114),'PBTUD':function(_0x51814c,_0x329498){return _0x51814c(_0x329498);},'uNeLL':function(_0x3f634e,_0x40b6de){return _0x3f634e??_0x40b6de;},'YJIQd':'image/svg+xml','oLNqX':'DXwzq'};allowAllOrigin(_0x3dde9d);const {label:_0x4d9812,labelPrefix:_0x34b929,labelSuffix:_0x3a1f14,prefix:_0x5a8991,suffix:suffix=badgeConstants['defaultPingValueSuffix'],color:color=badgeConstants[_0x4a2194(0x11f)],labelColor:_0x4d2f9f,style:style=badgeConstants[_0x4a2194(0x139)],value:_0x22b367}=_0x109743[_0x4a2194(0x131)];try{const _0x46c365=_0x8606a2[_0x4a2194(0x111)](parseInt,_0x109743['params']['id'],0xa),_0xfc3202=_0x22b367&&_0x8606a2['juBNH'](parseFloat,_0x22b367);let _0x176ab6=await R['getRow']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20monitor_group.monitor_id\x20FROM\x20monitor_group,\x20`group`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20monitor_group.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',[_0x46c365]);const _0x4f9720={'style':style};if(!_0x176ab6)_0x4f9720[_0x4a2194(0x142)]=_0x8606a2[_0x4a2194(0x129)],_0x4f9720[_0x4a2194(0x171)]=badgeConstants[_0x4a2194(0x163)];else{const _0x137381=await Monitor[_0x4a2194(0x137)](_0x46c365);if(!_0x137381[_0x4a2194(0x143)])_0x4f9720[_0x4a2194(0x142)]=_0x4a2194(0x114),_0x4f9720[_0x4a2194(0x171)]=badgeConstants['naColor'];else{const _0x189a61=_0x8606a2[_0x4a2194(0x14f)](parseInt,_0xfc3202??_0x137381[_0x4a2194(0x143)]);_0x4f9720[_0x4a2194(0x171)]=color,_0x4f9720[_0x4a2194(0x102)]=_0x8606a2[_0x4a2194(0xfd)](_0x4d2f9f,''),_0x4f9720[_0x4a2194(0x150)]=_0x8606a2[_0x4a2194(0x160)](filterAndJoin,[_0x34b929,_0x8606a2['uNeLL'](_0x4d9812,'Response'),_0x3a1f14]),_0x4f9720[_0x4a2194(0x142)]=filterAndJoin([_0x5a8991,_0x189a61,suffix]);}}const _0x4838d7=_0x8606a2[_0x4a2194(0x14f)](makeBadge,_0x4f9720);_0x3dde9d[_0x4a2194(0x11b)](_0x8606a2['YJIQd']),_0x3dde9d[_0x4a2194(0x140)](_0x4838d7);}catch(_0x57b3ba){_0x4a2194(0x174)!==_0x8606a2[_0x4a2194(0x183)]?_0x408a71=_0x8606a2[_0x4a2194(0x18b)](_0x49239a,_0x23a689):sendHttpError(_0x3dde9d,_0x57b3ba['message']);}}),module['exports']=router;