const _0x1693e4=_0x2d73;(function(_0x41ceec,_0x5804aa){const _0x2d0f2e=_0x2d73,_0x20aaef=_0x41ceec();while(!![]){try{const _0x4d404f=-parseInt(_0x2d0f2e(0x163))/0x1*(-parseInt(_0x2d0f2e(0x109))/0x2)+-parseInt(_0x2d0f2e(0x130))/0x3*(-parseInt(_0x2d0f2e(0x103))/0x4)+-parseInt(_0x2d0f2e(0xce))/0x5+-parseInt(_0x2d0f2e(0xdf))/0x6+-parseInt(_0x2d0f2e(0xe9))/0x7*(-parseInt(_0x2d0f2e(0x12e))/0x8)+-parseInt(_0x2d0f2e(0x102))/0x9*(-parseInt(_0x2d0f2e(0x110))/0xa)+-parseInt(_0x2d0f2e(0x187))/0xb;if(_0x4d404f===_0x5804aa)break;else _0x20aaef['push'](_0x20aaef['shift']());}catch(_0x96bf19){_0x20aaef['push'](_0x20aaef['shift']());}}}(_0x9d75,0x9e3c3));function _0x2d73(_0x24d55a,_0xd77bd9){const _0x9d759e=_0x9d75();return _0x2d73=function(_0x2d73d5,_0x374078){_0x2d73d5=_0x2d73d5-0xb3;let _0xd2e323=_0x9d759e[_0x2d73d5];return _0xd2e323;},_0x2d73(_0x24d55a,_0xd77bd9);}import{expect}from'@esm-bundle/chai';async function loadWebFinger(){const _0x28bdbb=_0x2d73,_0x589988={'mdxSJ':'script','SOPLl':function(_0x5b9513,_0x2337e3){return _0x5b9513===_0x2337e3;},'DuocY':'SMifF','tCrNy':'TciZN'};if(window[_0x28bdbb(0xec)])return new Function(_0x28bdbb(0xe8))(),window['WebFinger'];return new Function(_0x28bdbb(0xe8))(),new Promise((_0x364f68,_0x97ec48)=>{const _0x1acd94=_0x28bdbb,_0x3d2642={'ySLJp':_0x589988[_0x1acd94(0x192)]};if(_0x589988[_0x1acd94(0xfd)](_0x589988['DuocY'],_0x589988[_0x1acd94(0x17d)])){const _0x3d3d15=_0x2df448['createElement'](_0x3d2642['ySLJp']);_0x3d3d15[_0x1acd94(0x198)]=_0x1acd94(0xc5),_0x3d3d15[_0x1acd94(0x12c)]=()=>_0x5cc93a(_0xfe720b['WebFinger']),_0x3d3d15[_0x1acd94(0xf2)]=_0x5020b0,_0x30669a[_0x1acd94(0x180)][_0x1acd94(0xf4)](_0x3d3d15);}else{const _0xdc1c00=document['createElement'](_0x589988['mdxSJ']);_0xdc1c00['src']=_0x1acd94(0xc5),_0xdc1c00['onload']=()=>_0x364f68(window[_0x1acd94(0xec)]),_0xdc1c00['onerror']=_0x97ec48,document[_0x1acd94(0x180)]['appendChild'](_0xdc1c00);}});}describe(_0x1693e4(0x199),()=>{const _0xfd5a70=_0x1693e4,_0x36fd80={'ZdKMW':function(_0x599844,_0x48e216){return _0x599844(_0x48e216);},'emKnS':'function','FClAe':function(_0x1952ea,_0x170b72,_0x5be31d){return _0x1952ea(_0x170b72,_0x5be31d);},'CYJhz':'should\x20load\x20WebFinger\x20in\x20browser','JFIio':'should\x20create\x20a\x20WebFinger\x20instance','fUsYM':function(_0x32f6d7,_0x200e47){return _0x32f6d7===_0x200e47;},'ioAyX':_0xfd5a70(0xc3),'ldqQn':'cTtXW','CFgyx':function(_0x44a835,_0x3dd43a){return _0x44a835(_0x3dd43a);},'UCNDw':_0xfd5a70(0x188),'iKaCC':_0xfd5a70(0x13a),'CfaXI':function(_0x3d955f,_0x4f55a3){return _0x3d955f(_0x4f55a3);},'sPBvA':_0xfd5a70(0xc1),'PEkdy':'resource','cllzS':_0xfd5a70(0xcd),'mKVnP':_0xfd5a70(0xef),'ebVXP':_0xfd5a70(0xc7),'QpuVF':function(_0xa941d4,_0x38af0a,_0x1cea2f){return _0xa941d4(_0x38af0a,_0x1cea2f);},'lkhmq':_0xfd5a70(0x139),'EcGwy':_0xfd5a70(0x14f),'ZYBrF':function(_0x554772,_0x25b311){return _0x554772!==_0x25b311;},'WSpAr':'MJtoe','Wvspy':'JriuR','uRYkh':'rel','glSou':function(_0x338057,_0x33d6c7){return _0x338057(_0x33d6c7);},'oDHXN':'href','yXxmU':_0xfd5a70(0xea),'UftkM':function(_0x4c1697,_0x17721c){return _0x4c1697(_0x17721c);},'myHYq':function(_0x377995){return _0x377995();},'OmzWT':function(_0x44542b,_0x324168){return _0x44542b(_0x324168);},'itFzL':function(_0x393d10,_0x4c1308){return _0x393d10(_0x4c1308);},'ewKvn':function(_0x47ea08,_0x16506f,_0x220d6b){return _0x47ea08(_0x16506f,_0x220d6b);},'NieUu':_0xfd5a70(0xbc),'aJiDY':function(_0x1d86d7,_0x3c6448){return _0x1d86d7(_0x3c6448);},'FUBUo':'https://example.com/test','OgYWh':function(_0xe2fae,_0x228348){return _0xe2fae+_0x228348;},'ouVzs':_0xfd5a70(0x147),'nnbuT':'owSgO','yuNkQ':'nonexistent','iPobq':function(_0x42ac7e,_0x3cb06c){return _0x42ac7e(_0x3cb06c);},'chAWS':_0xfd5a70(0x12f),'vYWeO':function(_0x3916ac,_0x38e3b4){return _0x3916ac(_0x38e3b4);},'MACbU':'unfhK','sKXcE':_0xfd5a70(0x15a),'swLbc':'should\x20handle\x20network\x20error\x20scenarios','JllEx':_0xfd5a70(0x170),'jqlRj':function(_0x310896,_0x405ed3){return _0x310896(_0x405ed3);},'VAADd':'private\x20or\x20internal\x20addresses\x20are\x20not\x20allowed','oUqCn':'test@192.168.1.1','qxDbz':_0xfd5a70(0x145),'qZydN':function(_0x52d273,_0x329f3a,_0x3d5100){return _0x52d273(_0x329f3a,_0x3d5100);},'rvNwN':_0xfd5a70(0x17f),'RewZO':_0xfd5a70(0xf1),'ZfzNn':function(_0x169c29,_0x22cd2b,_0x246c04){return _0x169c29(_0x22cd2b,_0x246c04);},'OJJkd':function(_0x37d9be,_0x2b87ef,_0x1b7861){return _0x37d9be(_0x2b87ef,_0x1b7861);},'Tjohd':_0xfd5a70(0x125),'CxMRc':function(_0x692aca,_0x228b60,_0x290123){return _0x692aca(_0x228b60,_0x290123);},'WgyZo':'Security\x20Features'};let _0x4aef5c,_0x3be8e6;_0x36fd80['ZdKMW'](before,async()=>{_0x4aef5c=await loadWebFinger();}),_0x36fd80[_0xfd5a70(0xe7)](beforeEach,()=>{_0x3be8e6=new _0x4aef5c({'webfist_fallback':!![],'uri_fallback':!![],'request_timeout':0x1388,'allow_private_addresses':!![]});}),_0x36fd80['qZydN'](describe,_0xfd5a70(0x169),()=>{const _0xb631d4=_0xfd5a70,_0x261e64={'rxQFJ':function(_0xdc6bd5,_0x2d4c6a){return _0xdc6bd5(_0x2d4c6a);}};_0x36fd80['FClAe'](it,_0x36fd80['CYJhz'],()=>{const _0x179874=_0x2d73;_0x36fd80['ZdKMW'](expect,_0x4aef5c)['to']['be']['a'](_0x36fd80[_0x179874(0x144)]);}),it(_0x36fd80[_0xb631d4(0xb8)],()=>{const _0x16516a=_0xb631d4,_0x35c43c=new _0x4aef5c();_0x261e64[_0x16516a(0x175)](expect,_0x35c43c)['to']['be']['instanceOf'](_0x4aef5c),_0x261e64[_0x16516a(0x175)](expect,_0x35c43c['lookup'])['to']['be']['a'](_0x16516a(0x178)),expect(_0x35c43c[_0x16516a(0xeb)])['to']['be']['a'](_0x16516a(0x178));});}),describe(_0x36fd80['rvNwN'],()=>{const _0x2a270f=_0xfd5a70,_0x38480d={'WJlNc':_0x36fd80[_0x2a270f(0x15b)],'iAqAI':_0x36fd80['cllzS'],'mRFlx':_0x36fd80['mKVnP'],'oEtJj':_0x36fd80[_0x2a270f(0x156)],'Bgstd':function(_0x1a4596,_0x528133,_0xba04e1){const _0x200912=_0x2a270f;return _0x36fd80[_0x200912(0xe3)](_0x1a4596,_0x528133,_0xba04e1);},'WEtlS':_0x2a270f(0x122),'zGLCB':'application/json'};_0x36fd80[_0x2a270f(0x14b)](it,_0x2a270f(0x138),async()=>{const _0x2237ac=_0x2a270f;if(_0x36fd80['fUsYM'](_0x2237ac(0x17b),'tQFnC')){const _0xcad08d=_0x1b11dc[_0x2237ac(0xc4)][_0x2237ac(0x155)](_0x38480d[_0x2237ac(0xfb)]),_0x5a2c97=_0xcad08d?.[_0x2237ac(0x126)](_0x2237ac(0x140),'')['replace'](':'+_0x1b4c80[_0x2237ac(0x111)],'');if(_0x5a2c97&&_0x529d91[_0x5a2c97]){const _0x2c8f22=_0x5d59fd[_0x2237ac(0x17e)](_0x4ecbe8[_0x2237ac(0x10d)](_0xa752c9[_0x5a2c97]));_0x2c8f22[_0x2237ac(0x18b)]=_0x2c8f22['subject']['replace']('PORT',_0x131a8f[_0x2237ac(0x111)]);const _0x3e7430=_0x157adc[_0x2237ac(0x10d)](_0x2c8f22);return new _0x442548(_0x38480d[_0x2237ac(0xc2)])(),_0x57e66a['resolve']({'ok':!![],'status':0xc8,'headers':new _0x123e3c({'content-type':_0x38480d[_0x2237ac(0x118)]}),'json':()=>_0x52b85a[_0x2237ac(0x11f)](_0x2c8f22),'text':()=>_0x2c57bf[_0x2237ac(0x11f)](_0x3e7430)});}else{const _0x462f6b={'error':_0x38480d[_0x2237ac(0x101)]},_0x1adfd5=_0x1a20b1['stringify'](_0x462f6b);return _0x38480d['Bgstd'](_0x3f4508,_0x38480d[_0x2237ac(0xfc)],0x3e8),_0x479ce1[_0x2237ac(0x11f)]({'ok':![],'status':0x194,'headers':new _0x228134({'content-type':_0x38480d['zGLCB']}),'json':()=>_0x141284[_0x2237ac(0x11f)](_0x462f6b),'text':()=>_0x30d160[_0x2237ac(0x11f)](_0x1adfd5)});}}else try{await _0x3be8e6[_0x2237ac(0xf6)]();throw new Error(_0x36fd80['ioAyX']);}catch(_0x2df49a){if(_0x36fd80['ldqQn']!==_0x2237ac(0x185))return new _0x1dea65('var\x20x\x20=\x2042;\x20return\x20x;')(),_0x4fb42b['WebFinger'];else _0x36fd80['CFgyx'](expect,_0x2df49a[_0x2237ac(0x18c)])['to'][_0x2237ac(0xd8)](_0x36fd80[_0x2237ac(0x131)]);}}),_0x36fd80[_0x2a270f(0xe3)](it,'should\x20reject\x20invalid\x20useraddress\x20format',async()=>{const _0x57ceb6=_0x2a270f;try{await _0x3be8e6[_0x57ceb6(0xf6)](_0x36fd80['iKaCC']);throw new Error(_0x57ceb6(0xc3));}catch(_0x29fcf0){_0x36fd80[_0x57ceb6(0xf7)](expect,_0x29fcf0[_0x57ceb6(0x18c)])['to'][_0x57ceb6(0xd8)](_0x36fd80['sPBvA']);}});}),describe(_0xfd5a70(0x127),()=>{const _0x347de9=_0xfd5a70,_0x19abae={'Qhvsg':function(_0x461fed,_0x35e2c1){return _0x461fed(_0x35e2c1);},'Ezjua':'function'};it(_0x36fd80['lkhmq'],()=>{const _0x3dcf4e=_0x2d73;_0x19abae[_0x3dcf4e(0x108)](expect,window['fetch'])['to']['be']['a'](_0x19abae[_0x3dcf4e(0x166)]);}),_0x36fd80[_0x347de9(0xe3)](it,_0x347de9(0x15f),()=>{const _0x7cff8d=_0x347de9;_0x36fd80[_0x7cff8d(0x196)](expect,window[_0x7cff8d(0xd6)])['to'][_0x7cff8d(0xbd)],expect(document)['to'][_0x7cff8d(0xbd)];});}),describe('Configuration',()=>{const _0x471e95=_0xfd5a70,_0x57b8c2={'FnKIX':_0x36fd80[_0x471e95(0x149)],'OTppO':function(_0x5dd43f,_0xc2ffc6){return _0x5dd43f(_0xc2ffc6);}};it(_0x471e95(0x152),()=>{const _0x1688f6=_0x471e95;if(_0x57b8c2[_0x1688f6(0x179)]!==_0x57b8c2[_0x1688f6(0x179)])0x1+0x1;else{const _0x238966=new _0x4aef5c({'tls_only':![],'webfist_fallback':!![],'uri_fallback':!![],'request_timeout':0x3a98});_0x57b8c2['OTppO'](expect,_0x238966)['to']['be'][_0x1688f6(0x19a)](_0x4aef5c);}});}),describe(_0x36fd80[_0xfd5a70(0x17c)],()=>{const _0x301ebc=_0xfd5a70,_0xd87559={'YCXQr':_0x36fd80[_0x301ebc(0x15c)],'liVPg':function(_0x1c9cdc,_0x3aa2e1){const _0x1dfd52=_0x301ebc;return _0x36fd80[_0x1dfd52(0x14d)](_0x1c9cdc,_0x3aa2e1);},'OMXWw':_0x36fd80['oDHXN'],'Wnvtc':_0x36fd80[_0x301ebc(0x10b)],'hmugS':function(_0x48a8a8,_0x3d1022){const _0x552741=_0x301ebc;return _0x36fd80[_0x552741(0xd5)](_0x48a8a8,_0x3d1022);},'YWpMI':function(_0x445019,_0x2cfbf9){return _0x445019(_0x2cfbf9);}};let _0xab6e20,_0x48ae7d;_0x36fd80[_0x301ebc(0xd5)](before,async()=>{const _0x2c729c=_0x301ebc;_0xab6e20=await createMockServer(),_0x48ae7d=_0xab6e20[_0x2c729c(0x111)];}),_0x36fd80[_0x301ebc(0xf7)](after,async()=>{const _0x23c9f3=_0x301ebc;_0xab6e20&&(_0x36fd80['ZYBrF'](_0x36fd80[_0x23c9f3(0x191)],_0x23c9f3(0x16c))?await _0xab6e20['stop']():(_0x267656(_0x5f1b72)['to'][_0x23c9f3(0x13b)][_0x23c9f3(0xca)](_0xd87559['YCXQr'])[_0x23c9f3(0xd9)]['is']['a'](_0x23c9f3(0xea)),_0xd87559[_0x23c9f3(0x14c)](_0x18a200,_0x5edf94)['to'][_0x23c9f3(0x13b)][_0x23c9f3(0xca)](_0xd87559['OMXWw'])['that']['is']['a'](_0xd87559['Wnvtc'])));}),it(_0x301ebc(0xd0),async()=>{const _0x2f348d=_0x301ebc,_0x390c02=new _0x4aef5c({'tls_only':![],'request_timeout':0x1388,'allow_private_addresses':!![]}),_0x395cc5=await _0x390c02['lookup'](_0x2f348d(0x15e)+_0x48ae7d);_0xd87559[_0x2f348d(0xcf)](expect,_0x395cc5)['to']['be']['an'](_0x2f348d(0x153)),expect(_0x395cc5['object'][_0x2f348d(0x18b)])['to'][_0x2f348d(0xd7)](_0x2f348d(0x15d)+_0x48ae7d),_0xd87559[_0x2f348d(0x182)](expect,_0x395cc5[_0x2f348d(0x151)])['to']['be']['an'](_0x2f348d(0x153));}),it('should\x20handle\x20server\x20errors\x20gracefully',async()=>{const _0x419b5c=_0x301ebc,_0x475878=new _0x4aef5c({'tls_only':![],'request_timeout':0x1388,'allow_private_addresses':!![]});try{if(_0x36fd80[_0x419b5c(0xcb)]!==_0x36fd80['Wvspy'])0x1+0x1;else{await _0x475878[_0x419b5c(0xf6)]('nonexistent@localhost:'+_0x48ae7d);throw new Error(_0x36fd80[_0x419b5c(0x12a)]);}}catch(_0x5d9572){expect(_0x5d9572[_0x419b5c(0x18c)])['to'][_0x419b5c(0xd8)](_0x36fd80[_0x419b5c(0x156)]);}});}),describe(_0xfd5a70(0x10e),()=>{const _0x196fbb=_0xfd5a70,_0x351879={'zPIKD':function(_0x9eb8c3,_0xec64a9){const _0x4a555b=_0x2d73;return _0x36fd80[_0x4a555b(0x195)](_0x9eb8c3,_0xec64a9);},'vhDmv':'rel','zTYug':'string','pEwoT':function(_0x93cd5f,_0x100316){return _0x93cd5f(_0x100316);},'kyUIz':_0x196fbb(0xd4),'ngWti':function(_0x4339bc,_0x53be76){return _0x4339bc(_0x53be76);},'BEfHq':'object','dXvZD':_0x196fbb(0x158)};let _0x549dde,_0x25f54e;before(async()=>{const _0x2e0871=_0x196fbb;_0x549dde=await _0x36fd80[_0x2e0871(0x18a)](createMockServer),_0x25f54e=_0x549dde[_0x2e0871(0x111)];}),_0x36fd80[_0x196fbb(0x137)](after,async()=>{const _0x5c4cb7=_0x196fbb,_0x2fea78={'agGgS':_0x36fd80['ebVXP'],'twuAF':function(_0x4a61f8,_0x68d6c9,_0x5c25a5){return _0x4a61f8(_0x68d6c9,_0x5c25a5);},'cDBMj':_0x5c4cb7(0xf3)};if(_0x36fd80[_0x5c4cb7(0x129)](_0x5c4cb7(0x18f),_0x5c4cb7(0x14a))){const _0x521024={'error':_0x2fea78[_0x5c4cb7(0x123)]},_0x25dced=_0x465933['stringify'](_0x521024);return _0x2fea78[_0x5c4cb7(0x172)](_0x535d2f,_0x5c4cb7(0x122),0x3e8),_0x7e4978['resolve']({'ok':![],'status':0x194,'headers':new _0x1865bb({'content-type':_0x2fea78[_0x5c4cb7(0xba)]}),'json':()=>_0x323d46[_0x5c4cb7(0x11f)](_0x521024),'text':()=>_0x355b12[_0x5c4cb7(0x11f)](_0x25dced)});}else _0x549dde&&await _0x549dde['stop']();}),setInterval(_0x196fbb(0x122),0x3e8),it(_0x196fbb(0x197),async()=>{const _0x3d72a6=_0x196fbb,_0x23286d=new _0x4aef5c({'tls_only':![],'request_timeout':0x1388,'allow_private_addresses':!![]}),_0x2bf2c7=await _0x23286d['lookup'](_0x3d72a6(0x15e)+_0x25f54e);expect(_0x2bf2c7['object'][_0x3d72a6(0x18b)])['to']['be']['a'](_0x3d72a6(0xea)),_0x351879[_0x3d72a6(0x177)](expect,_0x2bf2c7[_0x3d72a6(0x153)][_0x3d72a6(0xb3)])['to']['be']['an'](_0x3d72a6(0xcc)),expect(_0x2bf2c7[_0x3d72a6(0x151)])['to']['be']['an'](_0x351879[_0x3d72a6(0x160)]),_0x2bf2c7['object'][_0x3d72a6(0xb3)][_0x3d72a6(0x159)](_0x181fe3=>{const _0x27cb4d=_0x3d72a6;_0x351879[_0x27cb4d(0xc6)](expect,_0x181fe3)['to'][_0x27cb4d(0x13b)][_0x27cb4d(0xca)](_0x351879[_0x27cb4d(0x141)])[_0x27cb4d(0xd9)]['is']['a'](_0x351879[_0x27cb4d(0x181)]),_0x351879[_0x27cb4d(0x143)](expect,_0x181fe3)['to'][_0x27cb4d(0x13b)][_0x27cb4d(0xca)](_0x351879['kyUIz'])[_0x27cb4d(0xd9)]['is']['a'](_0x351879[_0x27cb4d(0x181)]);});}),_0x36fd80[_0x196fbb(0xd3)](it,_0x196fbb(0xf9),async()=>{const _0x40821e=_0x196fbb,_0x5ccf61=new _0x4aef5c({'tls_only':![],'request_timeout':0x1388,'allow_private_addresses':!![]}),_0x49340a=await _0x5ccf61[_0x40821e(0xf6)]('user@localhost:'+_0x25f54e);expect(_0x49340a[_0x40821e(0x153)][_0x40821e(0x136)])['to']['be']['an'](_0x351879[_0x40821e(0x160)]),expect(_0x49340a['object'][_0x40821e(0x136)][_0x351879[_0x40821e(0x120)]])['to']['equal'](_0x40821e(0xd1));});}),_0x36fd80[_0xfd5a70(0x12d)](describe,_0xfd5a70(0xff),()=>{const _0x34d50d=_0xfd5a70,_0x5caff1={'aFGdy':function(_0x1d2cba,_0x1a10e0){const _0xacbc51=_0x2d73;return _0x36fd80[_0xacbc51(0x115)](_0x1d2cba,_0x1a10e0);}};let _0x226e63,_0xc5aaf2;_0x36fd80[_0x34d50d(0x168)](before,async()=>{const _0x2b4931=_0x34d50d;_0x226e63=await _0x36fd80['myHYq'](createMockServer),_0xc5aaf2=_0x226e63[_0x2b4931(0x111)];}),after(async()=>{const _0xff6dcd=_0x34d50d;_0x226e63&&await _0x226e63[_0xff6dcd(0xb5)]();}),it(_0x34d50d(0xe1),async()=>{const _0x907122=_0x34d50d,_0x7f09a4=new _0x4aef5c({'tls_only':![],'request_timeout':0x1388,'allow_private_addresses':!![]}),_0x2d6942=await _0x7f09a4[_0x907122(0xeb)](_0x907122(0x15e)+_0xc5aaf2,_0x36fd80[_0x907122(0x14e)]);_0x36fd80[_0x907122(0xe7)](expect,_0x2d6942)['to']['be']['an'](_0x907122(0x153)),_0x36fd80[_0x907122(0xf7)](expect,_0x2d6942[_0x907122(0xd4)])['to'][_0x907122(0xd7)](_0x36fd80[_0x907122(0xed)]),_0x36fd80['itFzL'](expect,_0x2d6942[_0x907122(0x16e)])['to'][_0x907122(0xd7)](_0x907122(0x171));}),eval('const _0x4e7579 = _0x34d50d;_0x36fd80[_0x4e7579(359)](1, 1);'),it(_0x36fd80[_0x34d50d(0x112)],async()=>{const _0xa1a416=_0x34d50d;if(_0x36fd80[_0xa1a416(0xf0)]===_0x36fd80['nnbuT'])_0x5caff1['aFGdy'](_0x5cb7b4,_0x48f722[_0xa1a416(0x18c)])['to']['include'](_0xa1a416(0x16d));else{const _0x4f224e=new _0x4aef5c({'tls_only':![],'request_timeout':0x1388,'allow_private_addresses':!![]});try{await _0x4f224e[_0xa1a416(0xeb)]('test@localhost:'+_0xc5aaf2,_0x36fd80['yuNkQ']);throw new Error(_0x36fd80[_0xa1a416(0x12a)]);}catch(_0x3f7c99){expect(_0x3f7c99)['to'][_0xa1a416(0xd8)]('unsupported\x20rel');}}});}),_0x36fd80[_0xfd5a70(0xbe)](describe,_0x36fd80[_0xfd5a70(0xb9)],()=>{const _0x1cd819=_0xfd5a70,_0x1172cf={'MKJoa':function(_0x56c497){return _0x56c497();},'VNBjO':function(_0x5523e8,_0x199423){const _0x3d47af=_0x2d73;return _0x36fd80[_0x3d47af(0x115)](_0x5523e8,_0x199423);},'KoZsZ':_0x1cd819(0x153),'XtHFT':_0x1cd819(0xf3),'oZhDJ':_0x1cd819(0xe6),'THBMo':'test@nonexistent-domain-12345.com','yDyos':_0x1cd819(0xc3),'qpUzN':function(_0x5133cf,_0x53085b){const _0x45bf91=_0x1cd819;return _0x36fd80[_0x45bf91(0x16b)](_0x5133cf,_0x53085b);},'xHAiR':_0x1cd819(0x152)};if('unfhK'===_0x36fd80['MACbU']){let _0x4ee24,_0x44b5bd;_0x36fd80[_0x1cd819(0xf7)](before,async()=>{const _0x3c7088=_0x1cd819;_0x4ee24=await _0x1172cf[_0x3c7088(0xdd)](createMockServer),_0x44b5bd=_0x4ee24[_0x3c7088(0x111)];}),after(async()=>{const _0x46cfb9=_0x1cd819;_0x4ee24&&await _0x4ee24[_0x46cfb9(0xb5)]();}),_0x36fd80[_0x1cd819(0xe3)](it,_0x36fd80[_0x1cd819(0xee)],async()=>{const _0x2f5ce5=_0x1cd819,_0x16bc8d=new _0x4aef5c({'tls_only':![],'uri_fallback':!![],'request_timeout':0x1388,'allow_private_addresses':!![]}),_0x3fa890=await _0x16bc8d[_0x2f5ce5(0xf6)](_0x2f5ce5(0x15e)+_0x44b5bd);_0x1172cf[_0x2f5ce5(0xbb)](expect,_0x3fa890)['to']['be']['an'](_0x1172cf[_0x2f5ce5(0x184)]),expect(_0x3fa890[_0x2f5ce5(0x153)]['subject'])['to'][_0x2f5ce5(0xd7)](_0x2f5ce5(0x15d)+_0x44b5bd);}),it(_0x36fd80['swLbc'],async function(){const _0x264672=_0x1cd819;this[_0x264672(0x11e)](0x1f40);const _0xc1394e=new _0x4aef5c({'tls_only':![],'request_timeout':0x3e8,'allow_private_addresses':!![]});try{if(_0x264672(0xe6)!==_0x1172cf['oZhDJ']){const _0x5a287c={'links':[{'rel':'lrdd','template':_0x264672(0x157)+_0x1bd3b5['port']+_0x264672(0xe2)}]},_0x255060=_0x26fd12[_0x264672(0x10d)](_0x5a287c);return _0x5955bb(_0x264672(0x122),0x3e8),_0x56d2b6[_0x264672(0x11f)]({'ok':!![],'status':0xc8,'headers':new _0x2af041({'content-type':_0x1172cf[_0x264672(0xb6)]}),'json':()=>_0x55af51['resolve'](_0x5a287c),'text':()=>_0x580e87[_0x264672(0x11f)](_0x255060)});}else{await _0xc1394e[_0x264672(0xf6)](_0x1172cf[_0x264672(0x104)]);throw new Error(_0x1172cf[_0x264672(0x16f)]);}}catch(_0x3130b8){_0x1172cf[_0x264672(0x17a)](expect,_0x3130b8[_0x264672(0x18c)])['to'][_0x264672(0x128)](/(failed.*fetch|network)/i);}});}else{const _0x331017={'wwQTe':function(_0x447ebc,_0x459370){return _0x447ebc(_0x459370);}};_0x46260c(_0x1172cf['xHAiR'],()=>{const _0x4cb110=_0x1cd819,_0x22339a=new _0x4887ea({'tls_only':![],'webfist_fallback':!![],'uri_fallback':!![],'request_timeout':0x3a98});_0x331017['wwQTe'](_0x416f20,_0x22339a)['to']['be'][_0x4cb110(0x19a)](_0xc7d4bc);});}}),_0x36fd80['CxMRc'](describe,_0x36fd80['WgyZo'],()=>{const _0x337965=_0xfd5a70,_0x52a728={'QyaJc':_0x36fd80[_0x337965(0xe4)],'OtWJf':function(_0x4d17bb,_0x267b0f){return _0x4d17bb(_0x267b0f);},'dPPYx':_0x36fd80['VAADd']};'lvtbW'===_0x36fd80[_0x337965(0x13f)]?_0xfbfca8(_0x469b6f[_0x337965(0x18c)])['to'][_0x337965(0xd8)](_0x337965(0xc7)):(_0x36fd80[_0x337965(0x14b)](it,_0x337965(0xf5),async()=>{const _0x5c0915=_0x337965,_0x354cc0=new _0x4aef5c({'tls_only':![],'allow_private_addresses':![],'request_timeout':0x3e8});try{await _0x354cc0[_0x5c0915(0xf6)](_0x36fd80['JllEx']);throw new Error(_0x5c0915(0xc3));}catch(_0x49fe97){_0x36fd80[_0x5c0915(0x190)](expect,_0x49fe97[_0x5c0915(0x18c)])['to'][_0x5c0915(0xd8)](_0x36fd80[_0x5c0915(0x189)]);}}),it(_0x337965(0xb7),async()=>{const _0x5b01c7=_0x337965,_0x3ac791=new _0x4aef5c({'allow_private_addresses':![],'request_timeout':0x3e8});try{await _0x3ac791[_0x5b01c7(0xf6)](_0x52a728[_0x5b01c7(0xf8)]);throw new Error(_0x5b01c7(0xc3));}catch(_0x56b2aa){_0x52a728[_0x5b01c7(0x105)](expect,_0x56b2aa['message'])['to']['include'](_0x52a728[_0x5b01c7(0x116)]);}}));});});function _0x9d75(){const _0x620678=['Failed\x20to\x20fetch','OmzWT','ZdKMW','should\x20return\x20properly\x20structured\x20JRD\x20response','src','WebFinger\x20Browser\x20Tests','instanceOf','links','KFWMK','stop','XtHFT','should\x20block\x20private\x20IPv4\x20addresses','JFIio','Tjohd','cDBMj','VNBjO','profile','exist','OJJkd','https://example.com/test','pKVGy','invalid\x20useraddress\x20format','iAqAI','Should\x20have\x20thrown','searchParams','/.tmp/webfinger.js','zPIKD','resource\x20not\x20found','yMtgi','pathname','property','Wvspy','array','return\x20await\x20Promise.resolve(42);','782210hugZOU','hmugS','should\x20perform\x20successful\x20WebFinger\x20lookup\x20with\x20mock\x20server','Test\x20User','originalFetch','ewKvn','href','UftkM','location','equal','include','that','http://webfinger.net/rel/avatar','dkeaB','jFggp','MKJoa','ZsZKj','6309258rPJOCA','Yktfk','should\x20find\x20specific\x20link\x20relations','/.well-known/webfinger?resource={uri}','FClAe','oUqCn','createElement','wMJmr','aJiDY','var\x20x\x20=\x2042;\x20return\x20x;','14658uRkAgJ','string','lookupLink','WebFinger','FUBUo','sKXcE','application/jrd+json','ouVzs','Real\x20WebFinger\x20Lookups','onerror','application/json','appendChild','should\x20block\x20private\x20addresses\x20when\x20allow_private_addresses\x20is\x20false','lookup','CfaXI','QyaJc','should\x20handle\x20JRD\x20with\x20properties','yYpwM','WJlNc','WEtlS','SOPLl','CQUHN','Link\x20Relation\x20Lookups','eWfJZ','oEtJj','27909iwQBiR','100UKrIZb','THBMo','OtWJf','zXMJg','bfaRJ','Qhvsg','32YGxoWI','lrdd','yXxmU','blBYW','stringify','JRD\x20Data\x20Structure\x20Validation','TdlWN','2580IPWZWc','port','chAWS','NPRld','ayrLn','iPobq','dPPYx','reject','mRFlx','/.well-known/webfinger','pWRkZ','mvWDu','OiCmy','acct:user@localhost:PORT','timeout','resolve','dXvZD','fetch','updateClock();','agGgS','https://example.com/user','Fallback\x20Mechanisms','replace','Browser\x20Environment','match','fUsYM','ioAyX','zccdU','onload','ZfzNn','2120kVkEvU','should\x20return\x20null\x20for\x20non-existent\x20link\x20relations','119379LdEckk','UCNDw','YqAhu','user@localhost','cvXQq','LhgAN','properties','itFzL','should\x20reject\x20when\x20called\x20with\x20no\x20parameters','should\x20have\x20access\x20to\x20fetch\x20API','asdfg','have','USlIk','CMSqq','CXPpV','qxDbz','acct:','vhDmv','test@localhost','pEwoT','emKnS','WaAYe','CnFGP','TxVxf','kfZsw','EcGwy','FEjDU','QpuVF','liVPg','glSou','NieUu','upUrs','acct:test@localhost:PORT','idx','should\x20create\x20instance\x20with\x20custom\x20configuration','object','PORT','get','ebVXP','http://localhost:','http://packetizer.com/ns/name','forEach','should\x20work\x20with\x20uri_fallback\x20enabled','PEkdy','uRYkh','acct:test@localhost:','test@localhost:','should\x20work\x20with\x20browser\x20globals','BEfHq','TryYd','pDKry','23363oWvqSD','/.well-known/host-meta.json','YcTlJ','Ezjua','OgYWh','CFgyx','Module\x20Loading','KTdZw','vYWeO','ZPsKu','private\x20or\x20internal\x20addresses\x20are\x20not\x20allowed','rel','yDyos','test@localhost:8080','http://webfinger.net/rel/profile-page','twuAF','rXuXK','https://example.com/avatar.png','rxQFJ','floor','ngWti','function','FnKIX','qpUzN','lmOLm','RewZO','tCrNy','parse','Input\x20Validation','head','zTYug','YWpMI','zIRec','KoZsZ','cTtXW','wjZxF','9542335yHddhv','address\x20is\x20required','VAADd','myHYq','subject','message','/.well-known/host-meta','cuehy','zrKlq','jqlRj','WSpAr','mdxSJ','YGkVv'];_0x9d75=function(){return _0x620678;};return _0x9d75();}async function createMockServer(){const _0x41512e=_0x1693e4,_0x893c62={'ohXtG':function(_0x57d816,_0x211f45){return _0x57d816(_0x211f45);},'yYpwM':'localhost','YcTlJ':function(_0x31a338,_0x350d60){return _0x31a338===_0x350d60;},'pWRkZ':_0x41512e(0x13c),'cvXQq':_0x41512e(0xe0),'mvWDu':_0x41512e(0x18d),'YGkVv':'resource','HWlEI':_0x41512e(0x154),'otFnN':_0x41512e(0xcd),'pDKry':_0x41512e(0xef),'yMtgi':_0x41512e(0x148),'bfaRJ':_0x41512e(0xc7),'YqAhu':_0x41512e(0xf3),'TdlWN':function(_0x480c89,_0x4f240c){return _0x480c89+_0x4f240c;},'CXPpV':_0x41512e(0xbf),'CnFGP':_0x41512e(0x174),'dkeaB':_0x41512e(0x11d),'ayrLn':'http://webfinger.net/rel/profile-page','tOHbd':_0x41512e(0x124)},_0x1b5656={[_0x41512e(0x142)]:{'subject':_0x41512e(0x150),'links':[{'rel':_0x41512e(0x171),'href':_0x893c62[_0x41512e(0x13e)]},{'rel':_0x41512e(0xda),'href':_0x893c62[_0x41512e(0x146)]}]},[_0x41512e(0x133)]:{'subject':_0x893c62[_0x41512e(0xdb)],'properties':{'http://packetizer.com/ns/name':_0x41512e(0xd1)},'links':[{'rel':_0x893c62[_0x41512e(0x114)],'href':_0x893c62['tOHbd']}]}},_0x22ceeb=new Promise(_0x529840=>{const _0x16f64e=_0x41512e,_0x46e2ff={'tYdQR':function(_0x1cc324,_0x48960f){return _0x893c62['ohXtG'](_0x1cc324,_0x48960f);},'WyzGK':'script','TryYd':_0x893c62[_0x16f64e(0xfa)],'jFggp':function(_0x111542,_0xb39e8c){const _0x2288db=_0x16f64e;return _0x893c62[_0x2288db(0x165)](_0x111542,_0xb39e8c);},'RISTf':_0x893c62[_0x16f64e(0x11a)],'CQUHN':_0x893c62[_0x16f64e(0x134)],'NPRld':_0x16f64e(0x194),'KFWMK':function(_0x425887,_0x2575ee){return _0x893c62['YcTlJ'](_0x425887,_0x2575ee);},'KTdZw':_0x893c62[_0x16f64e(0x11b)],'DyqZn':function(_0x3876b4,_0x1ccf72){return _0x3876b4!==_0x1ccf72;},'cuehy':_0x16f64e(0x173),'zccdU':_0x16f64e(0x119),'ZzYAA':_0x893c62[_0x16f64e(0x193)],'cTqYg':_0x893c62['HWlEI'],'wjZxF':_0x893c62['otFnN'],'CMSqq':_0x893c62[_0x16f64e(0x162)],'LhgAN':_0x893c62[_0x16f64e(0xc8)],'DpsOJ':_0x16f64e(0x100),'blBYW':_0x893c62[_0x16f64e(0x107)],'ZsZKj':function(_0x2c63a9,_0x537b66,_0x706e25){return _0x2c63a9(_0x537b66,_0x706e25);},'zXMJg':_0x893c62[_0x16f64e(0x132)],'MMUOg':'/.well-known/host-meta.json','pKVGy':_0x16f64e(0x122)},_0xdbd9fc={'port':0x1f91+Math[_0x16f64e(0x176)](Math['random']()*0x3e8),'responses':_0x1b5656,'stop':async()=>{}},_0x6a5efa=window[_0x16f64e(0x121)];window[_0x16f64e(0x121)]=function(_0x134ed7,_0x5b43ad){const _0x25914e=_0x16f64e,_0x2c7972={'zIRec':_0x46e2ff['WyzGK'],'OiCmy':'/.tmp/webfinger.js'},_0x11ddc8=new URL(_0x134ed7);if(!_0x134ed7['includes'](_0x46e2ff[_0x25914e(0x161)])){if(_0x46e2ff[_0x25914e(0xdc)](_0x46e2ff['RISTf'],_0x46e2ff[_0x25914e(0xfe)]))_0x46e2ff['tYdQR'](_0x5acca2,_0x418e00)['to']['be']['a'](_0x25914e(0x178));else return eval('const _0x56afb3 = _0x25914e;JSON[_0x56afb3(269)]({ \'safe\': !![] });'),Promise[_0x25914e(0x117)](new Error(_0x46e2ff[_0x25914e(0x113)]));}if(_0x11ddc8[_0x25914e(0xc9)]===_0x25914e(0x119)||_0x46e2ff['KFWMK'](_0x11ddc8[_0x25914e(0xc9)],_0x46e2ff[_0x25914e(0x16a)])||_0x11ddc8[_0x25914e(0xc9)]===_0x25914e(0x164)){if(_0x46e2ff['DyqZn']('YWUsh',_0x46e2ff[_0x25914e(0x18e)])){if(_0x11ddc8[_0x25914e(0xc9)]===_0x46e2ff[_0x25914e(0x12b)]){const _0x4089f4=_0x11ddc8[_0x25914e(0xc4)][_0x25914e(0x155)](_0x46e2ff['ZzYAA']),_0x37bf42=_0x4089f4?.[_0x25914e(0x126)]('acct:','')['replace'](':'+_0xdbd9fc[_0x25914e(0x111)],'');if(_0x37bf42&&_0x1b5656[_0x37bf42]){const _0x193431=JSON[_0x25914e(0x17e)](JSON['stringify'](_0x1b5656[_0x37bf42]));_0x193431[_0x25914e(0x18b)]=_0x193431['subject'][_0x25914e(0x126)](_0x46e2ff['cTqYg'],_0xdbd9fc[_0x25914e(0x111)]);const _0x4f0043=JSON[_0x25914e(0x10d)](_0x193431);return new AsyncFunction(_0x46e2ff[_0x25914e(0x186)])(),Promise[_0x25914e(0x11f)]({'ok':!![],'status':0xc8,'headers':new Headers({'content-type':_0x46e2ff[_0x25914e(0x13d)]}),'json':()=>Promise['resolve'](_0x193431),'text':()=>Promise[_0x25914e(0x11f)](_0x4f0043)});}else{if(_0x46e2ff[_0x25914e(0xb4)](_0x46e2ff[_0x25914e(0x135)],_0x46e2ff['DpsOJ']))_0xb6397f(_0x25c67d[_0x25914e(0x18c)])['to']['include'](_0x25914e(0xc1));else{const _0xeca246={'error':_0x46e2ff[_0x25914e(0x10c)]},_0x3de1f7=JSON[_0x25914e(0x10d)](_0xeca246);return _0x46e2ff[_0x25914e(0xde)](setInterval,_0x25914e(0x122),0x3e8),Promise['resolve']({'ok':![],'status':0x194,'headers':new Headers({'content-type':_0x46e2ff[_0x25914e(0x106)]}),'json':()=>Promise[_0x25914e(0x11f)](_0xeca246),'text':()=>Promise[_0x25914e(0x11f)](_0x3de1f7)});}}}if(_0x11ddc8['pathname']===_0x46e2ff[_0x25914e(0x16a)]||_0x46e2ff['KFWMK'](_0x11ddc8['pathname'],_0x46e2ff['MMUOg'])){const _0x46a1c5={'links':[{'rel':_0x25914e(0x10a),'template':_0x25914e(0x157)+_0xdbd9fc[_0x25914e(0x111)]+_0x25914e(0xe2)}]},_0x510742=JSON[_0x25914e(0x10d)](_0x46a1c5);return setInterval('updateClock();',0x3e8),Promise[_0x25914e(0x11f)]({'ok':!![],'status':0xc8,'headers':new Headers({'content-type':_0x25914e(0xf3)}),'json':()=>Promise[_0x25914e(0x11f)](_0x46a1c5),'text':()=>Promise[_0x25914e(0x11f)](_0x510742)});}}else{if(_0x1f148c['WebFinger'])return new _0xead07b(_0x25914e(0xe8))(),_0x4065da[_0x25914e(0xec)];return new _0x114914(_0x25914e(0xe8))(),new _0xc7567f((_0x563a61,_0x4e535e)=>{const _0x2284b6=_0x25914e,_0x280585=_0x1a3f45[_0x2284b6(0xe5)](_0x2c7972[_0x2284b6(0x183)]);_0x280585[_0x2284b6(0x198)]=_0x2c7972[_0x2284b6(0x11c)],_0x280585[_0x2284b6(0x12c)]=()=>_0x563a61(_0x588205['WebFinger']),_0x280585['onerror']=_0x4e535e,_0x58cab6[_0x2284b6(0x180)]['appendChild'](_0x280585);});}}return _0x46e2ff[_0x25914e(0xde)](setInterval,_0x46e2ff[_0x25914e(0xc0)],0x3e8),_0x6a5efa['call'](this,_0x134ed7,_0x5b43ad);},_0xdbd9fc[_0x16f64e(0xd2)]=_0x6a5efa,_0xdbd9fc['stop']=async()=>{const _0x52e880=_0x16f64e;window[_0x52e880(0x121)]=_0x6a5efa;},_0x893c62['ohXtG'](_0x529840,_0xdbd9fc);});return eval('const _0x54f475 = _0x41512e;_0x893c62[_0x54f475(271)](1, 1);'),_0x22ceeb;}