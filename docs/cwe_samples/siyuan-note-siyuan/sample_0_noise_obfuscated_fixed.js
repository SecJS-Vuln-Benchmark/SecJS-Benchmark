const _0x1fc136=_0x5aa7;(function(_0x32c6b7,_0x5231cd){const _0x22cfc6=_0x5aa7,_0x14c5d9=_0x32c6b7();while(!![]){try{const _0x4f5ae8=parseInt(_0x22cfc6(0x19a))/0x1+-parseInt(_0x22cfc6(0x19f))/0x2+-parseInt(_0x22cfc6(0x1a7))/0x3*(parseInt(_0x22cfc6(0x140))/0x4)+parseInt(_0x22cfc6(0x13a))/0x5*(-parseInt(_0x22cfc6(0x130))/0x6)+parseInt(_0x22cfc6(0x1c6))/0x7+-parseInt(_0x22cfc6(0x187))/0x8*(-parseInt(_0x22cfc6(0x1ce))/0x9)+parseInt(_0x22cfc6(0x1e5))/0xa*(parseInt(_0x22cfc6(0x198))/0xb);if(_0x4f5ae8===_0x5231cd)break;else _0x14c5d9['push'](_0x14c5d9['shift']());}catch(_0x2ad597){_0x14c5d9['push'](_0x14c5d9['shift']());}}}(_0xe31d,0x630a0));import{expect}from'@esm-bundle/chai';async function loadWebFinger(){const _0x469ac6=_0x5aa7,_0x3a51e8={'weIBL':_0x469ac6(0x162),'aBgPZ':'unsupported\x20rel','onhDe':function(_0x42f3a4,_0x816c0c){return _0x42f3a4===_0x816c0c;},'YDdQd':_0x469ac6(0x1c3),'LEsZn':_0x469ac6(0x149),'jvmHC':_0x469ac6(0x1ac),'cBCqR':function(_0x2b499f,_0x5289aa,_0x2deb55){return _0x2b499f(_0x5289aa,_0x2deb55);}};if(window[_0x469ac6(0x1be)])return eval('Math[\'PI\'] * 2;'),window[_0x469ac6(0x1be)];return _0x3a51e8[_0x469ac6(0x1d4)](setTimeout,function(){const _0x2cd456=_0x469ac6;_0x2cd456(0x1ea)===_0x2cd456(0x15c)?_0x22b21d[_0x2cd456(0x154)]('safe'):console[_0x2cd456(0x154)](_0x3a51e8[_0x2cd456(0x178)]);},0x64),new Promise((_0x234ccc,_0xa63a4f)=>{const _0x23a464=_0x469ac6;if(_0x3a51e8[_0x23a464(0x16f)](_0x3a51e8['YDdQd'],_0x23a464(0x1c3))){const _0x179e2c=document[_0x23a464(0x1cd)](_0x3a51e8[_0x23a464(0x1b0)]);_0x179e2c['src']=_0x3a51e8[_0x23a464(0x167)],_0x179e2c[_0x23a464(0x17c)]=()=>_0x234ccc(window[_0x23a464(0x1be)]),_0x179e2c[_0x23a464(0x1ee)]=_0xa63a4f,document[_0x23a464(0x1eb)][_0x23a464(0x1b7)](_0x179e2c);}else _0xc1eec1(_0x386262)['to'][_0x23a464(0x1e0)](_0x3a51e8[_0x23a464(0x1df)]);});}describe(_0x1fc136(0x1b3),()=>{const _0x244624=_0x1fc136,_0x3cfe62={'dEvSI':function(_0x410201,_0x1653da,_0x36603f){return _0x410201(_0x1653da,_0x36603f);},'nByuh':_0x244624(0x145),'ZSDtc':function(_0x1a7ad0,_0x477f4c){return _0x1a7ad0!==_0x477f4c;},'eelft':_0x244624(0x131),'YJEJT':_0x244624(0x1c0),'zvaEp':'Pskxi','UOfEE':function(_0x2f56cf,_0x1c35c6){return _0x2f56cf(_0x1c35c6);},'dINLr':_0x244624(0x132),'VRLKE':'should\x20reject\x20invalid\x20useraddress\x20format','XAbQp':function(_0x5d8525,_0x4ab6e1){return _0x5d8525===_0x4ab6e1;},'XQewh':_0x244624(0x134),'jkMUz':_0x244624(0x1a1),'vTrmW':_0x244624(0x1a4),'escEQ':_0x244624(0x14a),'aTomK':_0x244624(0x175),'Fgsze':function(_0x458783,_0x2cd58d){return _0x458783(_0x2cd58d);},'GSFgo':function(_0x39c3d1,_0x36cbc2){return _0x39c3d1(_0x36cbc2);},'sSHpm':function(_0xf9ab09,_0x5cfa50,_0xfecc3){return _0xf9ab09(_0x5cfa50,_0xfecc3);},'pslMN':function(_0x39fb8e,_0x55ae70){return _0x39fb8e===_0x55ae70;},'mOTyE':_0x244624(0x1a6),'ORjKA':function(_0x46db9d,_0x8d8b28){return _0x46db9d(_0x8d8b28);},'rtZDc':_0x244624(0x15f),'ovvbI':_0x244624(0x1e2),'IoNHQ':_0x244624(0x19e),'HLUCN':_0x244624(0x137),'GuHTg':_0x244624(0x168),'xRBgH':function(_0x4cb058){return _0x4cb058();},'NeVZG':_0x244624(0x1e8),'HcbdT':_0x244624(0x15d),'VhPEF':'should\x20return\x20properly\x20structured\x20JRD\x20response','SxuZB':_0x244624(0x1dd),'mXoCH':_0x244624(0x1d0),'pKdsP':function(_0x5ce23f,_0x4c4121){return _0x5ce23f(_0x4c4121);},'mfvlv':'eJqYb','cSEYv':_0x244624(0x19b),'CVFbO':function(_0xc6ee3c,_0x28d16e){return _0xc6ee3c(_0x28d16e);},'xFByq':_0x244624(0x1ba),'whQFQ':_0x244624(0x196),'yiHVh':_0x244624(0x18e),'hNryn':_0x244624(0x1a0),'AZnUt':function(_0x554268,_0x137a6b,_0x5921aa){return _0x554268(_0x137a6b,_0x5921aa);},'FqgGA':'should\x20work\x20with\x20uri_fallback\x20enabled','tttbR':_0x244624(0x1d7),'CYMns':function(_0x21a02c,_0x4b1f54){return _0x21a02c(_0x4b1f54);},'BAIZk':_0x244624(0x1de),'ymVTD':function(_0x58ed6c,_0x175dd9,_0x55a903){return _0x58ed6c(_0x175dd9,_0x55a903);},'kRiVv':_0x244624(0x1f3),'ideBB':_0x244624(0x1db)};let _0x1c5503,_0x53d88e;_0x3cfe62[_0x244624(0x1c5)](before,async()=>{_0x1c5503=await loadWebFinger();}),beforeEach(()=>{_0x53d88e=new _0x1c5503({'webfist_fallback':!![],'uri_fallback':!![],'request_timeout':0x1388});}),describe('Module\x20Loading',()=>{const _0x218dac=_0x244624,_0x48f8c4={'fBoGA':function(_0x4c4eb0,_0x4627b6){return _0x4c4eb0(_0x4627b6);},'oJoIK':_0x218dac(0x143)};_0x3cfe62[_0x218dac(0x1b2)](it,_0x3cfe62[_0x218dac(0x152)],()=>{_0x48f8c4['fBoGA'](expect,_0x1c5503)['to']['be']['a'](_0x48f8c4['oJoIK']);}),it('should\x20create\x20a\x20WebFinger\x20instance',()=>{const _0x506149=_0x218dac,_0x389088=new _0x1c5503();expect(_0x389088)['to']['be']['instanceOf'](_0x1c5503),_0x48f8c4[_0x506149(0x136)](expect,_0x389088[_0x506149(0x146)])['to']['be']['a'](_0x506149(0x143)),_0x48f8c4['fBoGA'](expect,_0x389088[_0x506149(0x1d5)])['to']['be']['a'](_0x48f8c4['oJoIK']);});}),_0x3cfe62['dEvSI'](describe,_0x244624(0x166),()=>{const _0x392e2c=_0x244624,_0x498d03={'LvcdR':_0x392e2c(0x1a0),'dfDxX':_0x3cfe62['zvaEp'],'TYlky':function(_0x1b8c02,_0x130211){return _0x3cfe62['UOfEE'](_0x1b8c02,_0x130211);}};_0x3cfe62[_0x392e2c(0x1b2)](it,_0x3cfe62['dINLr'],async()=>{const _0x7c4be8=_0x392e2c,_0x53fa1b={'yaTLX':function(_0x460b03,_0x3ad25f){return _0x460b03*_0x3ad25f;}};try{await _0x53d88e[_0x7c4be8(0x146)]();throw new Error(_0x7c4be8(0x1a0));}catch(_0x479fcc){if(_0x3cfe62[_0x7c4be8(0x133)](_0x3cfe62['eelft'],_0x3cfe62['eelft'])){const _0x2fb6de={'fOQcJ':function(_0x244104,_0x325df7){return _0x53fa1b['yaTLX'](_0x244104,_0x325df7);}};return eval('const _0x9924b2 = _0x7c4be8;_0x2fb6de[_0x9924b2(413)](_0x56537b[\'PI\'], 2);'),_0x3b805f['WebFinger'];}else expect(_0x479fcc['message'])['to']['include'](_0x3cfe62[_0x7c4be8(0x1af)]);}}),it(_0x3cfe62[_0x392e2c(0x1f5)],async()=>{const _0x2748c8=_0x392e2c,_0x1ebd6d={'RsZUR':'address\x20is\x20required'};try{await _0x53d88e[_0x2748c8(0x146)]('asdfg');throw new Error(_0x498d03[_0x2748c8(0x141)]);}catch(_0x8a0629){_0x498d03[_0x2748c8(0x156)]!==_0x498d03[_0x2748c8(0x156)]?_0x569409(_0x10cfc1[_0x2748c8(0x1b6)])['to']['include'](_0x1ebd6d[_0x2748c8(0x1b4)]):_0x498d03['TYlky'](expect,_0x8a0629[_0x2748c8(0x1b6)])['to'][_0x2748c8(0x1e0)]('invalid\x20useraddress\x20format');}});}),describe(_0x3cfe62[_0x244624(0x1a3)],()=>{const _0xbf06b9=_0x244624,_0x3e9eb4={'tFUpx':function(_0x552c22,_0x3ef90b){const _0x25043d=_0x5aa7;return _0x3cfe62[_0x25043d(0x18d)](_0x552c22,_0x3ef90b);},'XYOPi':function(_0x5272a5,_0x1f2fa6){return _0x5272a5(_0x1f2fa6);}};_0x3cfe62[_0xbf06b9(0x13c)](_0x3cfe62[_0xbf06b9(0x1bc)],_0x3cfe62[_0xbf06b9(0x181)])?_0x44081d['PI']*0x2:(_0x3cfe62[_0xbf06b9(0x1b2)](it,_0xbf06b9(0x1d9),()=>{const _0xbe6bf7=_0xbf06b9;_0x3cfe62['UOfEE'](expect,window[_0xbe6bf7(0x1e4)])['to']['be']['a']('function');}),it(_0x3cfe62['vTrmW'],()=>{const _0x2e19a2=_0xbf06b9;_0x3e9eb4['tFUpx'](expect,window[_0x2e19a2(0x144)])['to']['exist'],_0x3e9eb4[_0x2e19a2(0x177)](expect,document)['to'][_0x2e19a2(0x139)];}));}),describe(_0x244624(0x1aa),()=>{const _0x28c340=_0x244624;it(_0x3cfe62[_0x28c340(0x191)],()=>{const _0x14c55e=new _0x1c5503({'tls_only':![],'webfist_fallback':!![],'uri_fallback':!![],'request_timeout':0x3a98});expect(_0x14c55e)['to']['be']['instanceOf'](_0x1c5503);});}),describe('Real\x20WebFinger\x20Lookups',()=>{const _0x484921=_0x244624,_0x5306af={'iNMez':function(_0xd46aa2){return _0xd46aa2();},'hYItd':function(_0xae3309,_0x48dbfd){return _0xae3309(_0x48dbfd);}};let _0x32bcaf,_0x300117;before(async()=>{const _0x3a1c46=_0x5aa7;_0x32bcaf=await _0x5306af[_0x3a1c46(0x16d)](createMockServer),_0x300117=_0x32bcaf[_0x3a1c46(0x19c)];}),_0x3cfe62[_0x484921(0x151)](after,async()=>{const _0x23f42a=_0x484921;_0x32bcaf&&await _0x32bcaf[_0x23f42a(0x1ad)]();}),_0x3cfe62[_0x484921(0x1b2)](it,_0x484921(0x169),async()=>{const _0x5aedea=_0x484921,_0x5c4c1c=new _0x1c5503({'tls_only':![],'request_timeout':0x1388}),_0x9b5e81=await _0x5c4c1c[_0x5aedea(0x146)](_0x5aedea(0x180)+_0x300117);expect(_0x9b5e81)['to']['be']['an'](_0x3cfe62[_0x5aedea(0x1c7)]),_0x3cfe62[_0x5aedea(0x18d)](expect,_0x9b5e81['object'][_0x5aedea(0x194)])['to'][_0x5aedea(0x163)](_0x5aedea(0x1f9)+_0x300117),_0x3cfe62[_0x5aedea(0x164)](expect,_0x9b5e81[_0x5aedea(0x14e)])['to']['be']['an'](_0x5aedea(0x175));}),_0x3cfe62[_0x484921(0x18b)](it,'should\x20handle\x20server\x20errors\x20gracefully',async()=>{const _0x266db3=_0x484921,_0x2adb9a=new _0x1c5503({'tls_only':![],'request_timeout':0x1388});try{await _0x2adb9a[_0x266db3(0x146)](_0x266db3(0x13b)+_0x300117);throw new Error('Should\x20have\x20thrown');}catch(_0x2306af){_0x5306af['hYItd'](expect,_0x2306af[_0x266db3(0x1b6)])['to'][_0x266db3(0x1e0)](_0x266db3(0x168));}});}),_0x3cfe62['ymVTD'](describe,_0x3cfe62['kRiVv'],()=>{const _0x483486=_0x244624,_0x236f3f={'MRkWL':function(_0x578640){const _0x2ce440=_0x5aa7;return _0x3cfe62[_0x2ce440(0x1ed)](_0x578640);},'nHaPo':_0x3cfe62[_0x483486(0x17e)],'ykOLO':_0x483486(0x1a6),'zsCrV':function(_0x5832e0,_0x5c8531){return _0x5832e0(_0x5c8531);}};if('zApos'!==_0x3cfe62[_0x483486(0x186)]){let _0x5a17b6,_0x5bcea8;_0x3cfe62[_0x483486(0x151)](before,async()=>{const _0x1f7cbc=_0x483486;_0x5a17b6=await _0x236f3f['MRkWL'](createMockServer),_0x5bcea8=_0x5a17b6[_0x1f7cbc(0x19c)];}),_0x3cfe62[_0x483486(0x164)](after,async()=>{const _0x1ba5e9=_0x483486;_0x5a17b6&&(_0x3cfe62[_0x1ba5e9(0x15e)](_0x1ba5e9(0x189),_0x1ba5e9(0x189))?await _0x5a17b6['stop']():_0x66eb17(_0x576a93['fetch'])['to']['be']['a']('function'));}),setInterval('updateClock();',0x3e8),it(_0x3cfe62[_0x483486(0x161)],async()=>{const _0x42821a=_0x483486,_0xeb93d5=new _0x1c5503({'tls_only':![],'request_timeout':0x1388}),_0x2bfe27=await _0xeb93d5['lookup'](_0x42821a(0x180)+_0x5bcea8);_0x3cfe62[_0x42821a(0x151)](expect,_0x2bfe27[_0x42821a(0x175)][_0x42821a(0x194)])['to']['be']['a'](_0x3cfe62[_0x42821a(0x1f4)]),_0x3cfe62[_0x42821a(0x14c)](expect,_0x2bfe27[_0x42821a(0x175)][_0x42821a(0x1ec)])['to']['be']['an'](_0x42821a(0x170)),expect(_0x2bfe27[_0x42821a(0x14e)])['to']['be']['an'](_0x3cfe62['aTomK']),_0x2bfe27[_0x42821a(0x175)][_0x42821a(0x1ec)][_0x42821a(0x172)](_0x5c9359=>{const _0x8c3975=_0x42821a;expect(_0x5c9359)['to'][_0x8c3975(0x14d)][_0x8c3975(0x1ae)](_0x236f3f[_0x8c3975(0x17a)])[_0x8c3975(0x1f1)]['is']['a'](_0x236f3f[_0x8c3975(0x185)]),_0x236f3f[_0x8c3975(0x1bd)](expect,_0x5c9359)['to']['have'][_0x8c3975(0x1ae)](_0x8c3975(0x192))['that']['is']['a'](_0x236f3f[_0x8c3975(0x185)]);});}),it('should\x20handle\x20JRD\x20with\x20properties',async()=>{const _0x13681=_0x483486,_0x3b1f80={'VAKql':'acct:','MjPUi':_0x3cfe62['rtZDc'],'HnCGR':_0x13681(0x1c9),'Viapz':function(_0x60e232,_0x41f25d,_0xf349d7){return _0x60e232(_0x41f25d,_0xf349d7);},'UnAVp':'application/json'};if(_0x3cfe62[_0x13681(0x133)](_0x3cfe62[_0x13681(0x16b)],_0x13681(0x12f))){const _0x2a9492=new _0x1c5503({'tls_only':![],'request_timeout':0x1388}),_0x20f54c=await _0x2a9492[_0x13681(0x146)]('user@localhost:'+_0x5bcea8);_0x3cfe62[_0x13681(0x164)](expect,_0x20f54c[_0x13681(0x175)][_0x13681(0x1a5)])['to']['be']['an']('object'),_0x3cfe62[_0x13681(0x164)](expect,_0x20f54c[_0x13681(0x175)]['properties'][_0x3cfe62['IoNHQ']])['to'][_0x13681(0x163)](_0x3cfe62[_0x13681(0x1a8)]);}else{const _0x1461d0=_0x26208f[_0x13681(0x1c8)]['get']('resource'),_0x31b0be=_0x1461d0?.[_0x13681(0x188)](_0x3b1f80[_0x13681(0x1b8)],'')['replace'](':'+_0x6b0ab9[_0x13681(0x19c)],'');if(_0x31b0be&&_0x467c37[_0x31b0be]){const _0x865d66=_0x1cb5e1['parse'](_0x3bfca5[_0x13681(0x1d3)](_0x4b9739[_0x31b0be]));_0x865d66[_0x13681(0x194)]=_0x865d66['subject']['replace'](_0x3b1f80[_0x13681(0x159)],_0x58a3c6[_0x13681(0x19c)]);const _0x2c6224=_0x332a98['stringify'](_0x865d66);return _0x3ede36(_0x3b1f80['HnCGR'],0x3e8),_0x2528f0[_0x13681(0x14f)]({'ok':!![],'status':0xc8,'headers':new _0x4041a2({'content-type':'application/jrd+json'}),'json':()=>_0x2c4afb[_0x13681(0x14f)](_0x865d66),'text':()=>_0xa0149a[_0x13681(0x14f)](_0x2c6224)});}else{const _0x2bd189={'error':_0x13681(0x168)},_0x4226f8=_0x1400b0[_0x13681(0x1d3)](_0x2bd189);return _0x3b1f80[_0x13681(0x153)](_0xcabd25,_0x13681(0x1c9),0x3e8),_0x4f4d8b[_0x13681(0x14f)]({'ok':![],'status':0x194,'headers':new _0x4b6e2a({'content-type':_0x3b1f80['UnAVp']}),'json':()=>_0x8092ab[_0x13681(0x14f)](_0x2bd189),'text':()=>_0x282163['resolve'](_0x4226f8)});}}});}else _0x290a83(_0x1d2a88[_0x483486(0x1b6)])['to'][_0x483486(0x1e0)](_0x3cfe62['GuHTg']);}),describe(_0x3cfe62['ideBB'],()=>{const _0x567f12=_0x244624,_0x28e26c={'ZkrJd':function(_0x3be06b,_0x1b6be5){return _0x3be06b(_0x1b6be5);},'dqnsw':function(_0x3beb35,_0x3b29ed){const _0x2f32fa=_0x5aa7;return _0x3cfe62[_0x2f32fa(0x133)](_0x3beb35,_0x3b29ed);}};let _0x481aba,_0x1a7e81;_0x3cfe62[_0x567f12(0x1d8)](before,async()=>{const _0x21a40d=_0x567f12;if(_0x28e26c['dqnsw'](_0x21a40d(0x18c),_0x21a40d(0x1a9)))_0x481aba=await createMockServer(),_0x1a7e81=_0x481aba['port'];else{const _0x13dd78=new _0x18c4ba({'tls_only':![],'webfist_fallback':!![],'uri_fallback':!![],'request_timeout':0x3a98});_0x28e26c['ZkrJd'](_0x37653f,_0x13dd78)['to']['be'][_0x21a40d(0x1f8)](_0x28b4cd);}}),_0x3cfe62[_0x567f12(0x1bf)](after,async()=>{_0x481aba&&await _0x481aba['stop']();}),_0x3cfe62['dEvSI'](it,_0x3cfe62[_0x567f12(0x17f)],async()=>{const _0x44c06a=_0x567f12,_0x39122f=new _0x1c5503({'tls_only':![],'request_timeout':0x1388}),_0x5cb86b=await _0x39122f[_0x44c06a(0x1d5)](_0x44c06a(0x180)+_0x1a7e81,_0x44c06a(0x173));expect(_0x5cb86b)['to']['be']['an'](_0x3cfe62[_0x44c06a(0x1c7)]),expect(_0x5cb86b['href'])['to'][_0x44c06a(0x163)](_0x3cfe62[_0x44c06a(0x160)]),expect(_0x5cb86b['rel'])['to'][_0x44c06a(0x163)](_0x3cfe62['mXoCH']);}),new Function(_0x3cfe62[_0x567f12(0x157)])(),it(_0x567f12(0x1fa),async()=>{const _0x4a8a73=_0x567f12,_0x120743={'kksBT':function(_0x1986b3,_0x300b7d){return _0x3cfe62['pKdsP'](_0x1986b3,_0x300b7d);}};if(_0x3cfe62[_0x4a8a73(0x1b9)]===_0x4a8a73(0x1c2))_0x4ebe4b(_0x4f1759[_0x4a8a73(0x1b6)])['to']['match'](/(failed.*fetch|network)/i);else{const _0x1f3732=new _0x1c5503({'tls_only':![],'request_timeout':0x1388});try{await _0x1f3732[_0x4a8a73(0x1d5)]('test@localhost:'+_0x1a7e81,_0x4a8a73(0x15a));throw new Error(_0x4a8a73(0x1a0));}catch(_0x287222){_0x3cfe62[_0x4a8a73(0x18f)]!=='FUOoW'?expect(_0x287222)['to']['include'](_0x4a8a73(0x1d6)):_0x120743[_0x4a8a73(0x1f7)](_0xcfcfe5,_0xd7a1f7['message'])['to']['include'](_0x4a8a73(0x199));}}});}),describe(_0x244624(0x155),()=>{const _0x278ba3=_0x244624,_0x42198b={'kzqrS':_0x3cfe62[_0x278ba3(0x191)]};let _0x27f706,_0x1b2ec4;before(async()=>{const _0x31a01c=_0x278ba3;_0x27f706=await createMockServer(),_0x1b2ec4=_0x27f706[_0x31a01c(0x19c)];}),after(async()=>{_0x27f706&&await _0x27f706['stop']();}),_0x3cfe62[_0x278ba3(0x135)](it,_0x3cfe62[_0x278ba3(0x1e9)],async()=>{const _0x3e34df=_0x278ba3,_0x155ebb=new _0x1c5503({'tls_only':![],'uri_fallback':!![],'request_timeout':0x1388}),_0x19c21d=await _0x155ebb[_0x3e34df(0x146)](_0x3e34df(0x180)+_0x1b2ec4);expect(_0x19c21d)['to']['be']['an'](_0x3cfe62[_0x3e34df(0x1c7)]),expect(_0x19c21d['object'][_0x3e34df(0x194)])['to']['equal'](_0x3e34df(0x1f9)+_0x1b2ec4);}),_0x3cfe62[_0x278ba3(0x18b)](it,_0x3cfe62[_0x278ba3(0x13f)],async function(){const _0x274c98=_0x278ba3;if(_0x3cfe62[_0x274c98(0x1e3)]!==_0x274c98(0x18e))_0x26d7ac(_0x42198b['kzqrS'],()=>{const _0x1e8dc8=_0x274c98,_0x109090=new _0x129e89({'tls_only':![],'webfist_fallback':!![],'uri_fallback':!![],'request_timeout':0x3a98});_0xa6a3ae(_0x109090)['to']['be'][_0x1e8dc8(0x1f8)](_0x42b5fe);});else{this[_0x274c98(0x165)](0x1f40);const _0x37fdf9=new _0x1c5503({'tls_only':![],'request_timeout':0x3e8});try{await _0x37fdf9['lookup'](_0x274c98(0x193));throw new Error(_0x3cfe62[_0x274c98(0x1d2)]);}catch(_0x4043c9){_0x3cfe62[_0x274c98(0x14c)](expect,_0x4043c9[_0x274c98(0x1b6)])['to'][_0x274c98(0x1b5)](/(failed.*fetch|network)/i);}}});});});async function createMockServer(){const _0x28d77c=_0x1fc136,_0xd3d58b={'bhNxd':_0x28d77c(0x1f6),'xFkta':_0x28d77c(0x182),'DwQbZ':function(_0x2bfe3c,_0x346fc3){return _0x2bfe3c!==_0x346fc3;},'SiTaD':_0x28d77c(0x1e7),'rHiIv':function(_0xb10d4e,_0x190466){return _0xb10d4e===_0x190466;},'xkulb':_0x28d77c(0x1e1),'tLPMh':_0x28d77c(0x1c9),'SLoAn':_0x28d77c(0x138),'PoZHk':_0x28d77c(0x196),'wtRij':_0x28d77c(0x174),'JJLpf':'https://example.com/test','XOJro':_0x28d77c(0x1a2),'qFalp':'acct:user@localhost:PORT'},_0x5916d8={['test@localhost']:{'subject':_0xd3d58b[_0x28d77c(0x183)],'links':[{'rel':'http://webfinger.net/rel/profile-page','href':_0xd3d58b[_0x28d77c(0x17b)]},{'rel':_0xd3d58b['XOJro'],'href':'https://example.com/avatar.png'}]},[_0x28d77c(0x1c4)]:{'subject':_0xd3d58b[_0x28d77c(0x13d)],'properties':{'http://packetizer.com/ns/name':_0x28d77c(0x137)},'links':[{'rel':_0x28d77c(0x1d0),'href':'https://example.com/user'}]}},_0x3b8c9e=new Promise(_0x14cccc=>{const _0x415af9=_0x28d77c,_0x274d9f={'AgiqM':function(_0x4557c8,_0x46e7f0){return _0x4557c8+_0x46e7f0;},'BsXgC':function(_0x15c5fb,_0x492f22,_0x3b7a99){return _0x15c5fb(_0x492f22,_0x3b7a99);},'suiBs':'localhost','MxYZM':_0xd3d58b[_0x415af9(0x195)],'asdiE':_0xd3d58b[_0x415af9(0x1cb)],'gyDdP':_0x415af9(0x148),'bPFmh':function(_0x57a12a,_0x460f5c){const _0x112523=_0x415af9;return _0xd3d58b[_0x112523(0x15b)](_0x57a12a,_0x460f5c);},'gbElI':_0xd3d58b[_0x415af9(0x1f2)],'SuMmF':function(_0x5bd6f8,_0x558e0f){const _0x2379da=_0x415af9;return _0xd3d58b[_0x2379da(0x147)](_0x5bd6f8,_0x558e0f);},'JDODr':_0xd3d58b[_0x415af9(0x1ef)],'Vdghg':'application/jrd+json','BPXLl':_0xd3d58b['tLPMh'],'twkxg':_0xd3d58b['SLoAn'],'PytgC':function(_0x3d4006,_0x3202dc){return _0x3d4006===_0x3202dc;},'LAhak':'/.well-known/host-meta','MdJdT':_0xd3d58b[_0x415af9(0x18a)]},_0x2d4b88={'port':0x1f91+Math['floor'](Math[_0x415af9(0x1b1)]()*0x3e8),'responses':_0x5916d8,'stop':async()=>{}},_0x42c31e=window[_0x415af9(0x1e4)];window[_0x415af9(0x1e4)]=function(_0x239c58,_0x28e838){const _0x23f7f7=_0x415af9,_0x522755={'NgBcr':function(_0x50367c,_0x2518ed,_0x37da5){const _0x43bf47=_0x5aa7;return _0x274d9f[_0x43bf47(0x158)](_0x50367c,_0x2518ed,_0x37da5);},'VVPQt':function(_0x1afd72,_0x346496,_0x4c70c8){return _0x1afd72(_0x346496,_0x4c70c8);}},_0x9882f3=new URL(_0x239c58);if(!_0x239c58['includes'](_0x274d9f['suiBs']))return eval('const _0x3adfab = _0x5aa7;_0x274d9f[_0x3adfab(364)](1, 1);'),Promise[_0x23f7f7(0x1bb)](new Error(_0x274d9f[_0x23f7f7(0x1f0)]));if(_0x9882f3[_0x23f7f7(0x13e)]===_0x274d9f[_0x23f7f7(0x190)]||_0x9882f3[_0x23f7f7(0x13e)]==='/.well-known/host-meta'||_0x9882f3[_0x23f7f7(0x13e)]===_0x274d9f[_0x23f7f7(0x16a)]){if(_0x274d9f[_0x23f7f7(0x14b)](_0x274d9f[_0x23f7f7(0x1cc)],_0x274d9f[_0x23f7f7(0x1cc)])){const _0x441cb5={'AkLsR':function(_0x336590,_0x1c4c55){return _0x336590(_0x1c4c55);}};_0x522755[_0x23f7f7(0x142)](_0x109c78,_0x23f7f7(0x1d9),()=>{const _0x1c18f9=_0x23f7f7;_0x232b40(_0xfa7d0c[_0x1c18f9(0x1e4)])['to']['be']['a'](_0x1c18f9(0x143));}),_0x522755[_0x23f7f7(0x16e)](_0x3b4315,_0x23f7f7(0x1a4),()=>{const _0x20fd3d=_0x23f7f7;_0x441cb5[_0x20fd3d(0x1e6)](_0x11d105,_0x33b96c[_0x20fd3d(0x144)])['to'][_0x20fd3d(0x139)],_0x441cb5[_0x20fd3d(0x1e6)](_0x4d79e2,_0x1ebb63)['to'][_0x20fd3d(0x139)];});}else{if(_0x274d9f[_0x23f7f7(0x150)](_0x9882f3[_0x23f7f7(0x13e)],'/.well-known/webfinger')){const _0x139e73=_0x9882f3[_0x23f7f7(0x1c8)][_0x23f7f7(0x17d)](_0x274d9f['JDODr']),_0x984a1f=_0x139e73?.[_0x23f7f7(0x188)](_0x23f7f7(0x1ca),'')[_0x23f7f7(0x188)](':'+_0x2d4b88[_0x23f7f7(0x19c)],'');if(_0x984a1f&&_0x5916d8[_0x984a1f]){const _0x2a7fbe=JSON['parse'](JSON[_0x23f7f7(0x1d3)](_0x5916d8[_0x984a1f]));_0x2a7fbe[_0x23f7f7(0x194)]=_0x2a7fbe[_0x23f7f7(0x194)][_0x23f7f7(0x188)](_0x23f7f7(0x15f),_0x2d4b88[_0x23f7f7(0x19c)]);const _0x16c8b8=JSON[_0x23f7f7(0x1d3)](_0x2a7fbe);return setTimeout('console.log(\x22timer\x22);',0x3e8),Promise[_0x23f7f7(0x14f)]({'ok':!![],'status':0xc8,'headers':new Headers({'content-type':_0x274d9f[_0x23f7f7(0x1d1)]}),'json':()=>Promise[_0x23f7f7(0x14f)](_0x2a7fbe),'text':()=>Promise['resolve'](_0x16c8b8)});}else{const _0x43864f={'error':_0x23f7f7(0x168)},_0x288f9e=JSON['stringify'](_0x43864f);return _0x274d9f[_0x23f7f7(0x158)](setTimeout,_0x274d9f[_0x23f7f7(0x176)],0x3e8),Promise['resolve']({'ok':![],'status':0x194,'headers':new Headers({'content-type':_0x274d9f['twkxg']}),'json':()=>Promise[_0x23f7f7(0x14f)](_0x43864f),'text':()=>Promise[_0x23f7f7(0x14f)](_0x288f9e)});}}if(_0x274d9f[_0x23f7f7(0x171)](_0x9882f3[_0x23f7f7(0x13e)],_0x274d9f[_0x23f7f7(0x1ab)])||_0x274d9f['SuMmF'](_0x9882f3['pathname'],_0x274d9f[_0x23f7f7(0x16a)])){const _0xfb6f12={'links':[{'rel':_0x23f7f7(0x197),'template':'http://localhost:'+_0x2d4b88[_0x23f7f7(0x19c)]+_0x23f7f7(0x1da)}]},_0x402f59=JSON['stringify'](_0xfb6f12);return new Function(_0x274d9f[_0x23f7f7(0x1c1)])(),Promise[_0x23f7f7(0x14f)]({'ok':!![],'status':0xc8,'headers':new Headers({'content-type':_0x274d9f[_0x23f7f7(0x1cf)]}),'json':()=>Promise[_0x23f7f7(0x14f)](_0xfb6f12),'text':()=>Promise[_0x23f7f7(0x14f)](_0x402f59)});}}}return setTimeout(_0x23f7f7(0x1c9),0x3e8),_0x42c31e[_0x23f7f7(0x1dc)](this,_0x239c58,_0x28e838);},_0x2d4b88[_0x415af9(0x184)]=_0x42c31e,_0x2d4b88['stop']=async()=>{window['fetch']=_0x42c31e;},_0x14cccc(_0x2d4b88);});return setInterval(_0x28d77c(0x179),0x3e8),_0x3b8c9e;}function _0x5aa7(_0x65edb5,_0x1d7610){const _0xe31d96=_0xe31d();return _0x5aa7=function(_0x5aa7ec,_0x480847){_0x5aa7ec=_0x5aa7ec-0x12f;let _0x5dd01b=_0xe31d96[_0x5aa7ec];return _0x5dd01b;},_0x5aa7(_0x65edb5,_0x1d7610);}function _0xe31d(){const _0x5ec7e4=['Input\x20Validation','jvmHC','resource\x20not\x20found','should\x20perform\x20successful\x20WebFinger\x20lookup\x20with\x20mock\x20server','gyDdP','ovvbI','AgiqM','iNMez','VVPQt','onhDe','array','PytgC','forEach','profile','acct:test@localhost:PORT','object','BPXLl','XYOPi','weIBL','updateClock();','nHaPo','JJLpf','onload','get','NeVZG','xFByq','test@localhost:','jkMUz','/.well-known/webfinger','wtRij','originalFetch','ykOLO','HcbdT','16ZgVOKs','replace','uuFRv','PoZHk','sSHpm','iMldx','UOfEE','zTlaD','cSEYv','asdiE','escEQ','href','test@nonexistent-domain-12345.com','subject','bhNxd','var\x20x\x20=\x2042;\x20return\x20x;','lrdd','8764811XEreLm','invalid\x20useraddress\x20format','158482nSfDNN','xmoja','port','fOQcJ','http://packetizer.com/ns/name','809708YZmvNr','Should\x20have\x20thrown','nrIUr','http://webfinger.net/rel/avatar','BAIZk','should\x20work\x20with\x20browser\x20globals','properties','string','6RWeDtZ','HLUCN','gXIeh','Configuration','LAhak','/.tmp/webfinger.js','stop','property','YJEJT','LEsZn','random','dEvSI','WebFinger\x20Browser\x20Tests','RsZUR','match','message','appendChild','VAKql','mfvlv','should\x20find\x20specific\x20link\x20relations','reject','XQewh','zsCrV','WebFinger','CVFbO','address\x20is\x20required','MdJdT','tlsvD','tJySH','user@localhost','CYMns','3503346RJKLPI','aTomK','searchParams','console.log(\x22timer\x22);','acct:','xFkta','gbElI','createElement','271935sxBACS','twkxg','http://webfinger.net/rel/profile-page','Vdghg','hNryn','stringify','cBCqR','lookupLink','unsupported\x20rel','should\x20handle\x20network\x20error\x20scenarios','pKdsP','should\x20have\x20access\x20to\x20fetch\x20API','/.well-known/webfinger?resource={uri}','Link\x20Relation\x20Lookups','call','https://example.com/test','Browser\x20Environment','aBgPZ','include','resource','eopdB','yiHVh','fetch','10MeLYSS','AkLsR','RFmAh','rel','FqgGA','Zdxrw','head','links','xRBgH','onerror','xkulb','MxYZM','that','SiTaD','JRD\x20Data\x20Structure\x20Validation','mOTyE','VRLKE','Failed\x20to\x20fetch','kksBT','instanceOf','acct:test@localhost:','should\x20return\x20null\x20for\x20non-existent\x20link\x20relations','CgkSi','3068514JurtXU','NSMGO','should\x20reject\x20when\x20called\x20with\x20no\x20parameters','ZSDtc','iRgcz','AZnUt','fBoGA','Test\x20User','application/json','exist','5vPHDaM','nonexistent@localhost:','XAbQp','qFalp','pathname','tttbR','388508PnDNhH','LvcdR','NgBcr','function','location','should\x20load\x20WebFinger\x20in\x20browser','lookup','rHiIv','/.well-known/host-meta.json','script','should\x20create\x20instance\x20with\x20custom\x20configuration','bPFmh','ORjKA','have','idx','resolve','SuMmF','GSFgo','nByuh','Viapz','log','Fallback\x20Mechanisms','dfDxX','whQFQ','BsXgC','MjPUi','nonexistent','DwQbZ','bOSUN','WzYBA','pslMN','PORT','SxuZB','VhPEF','safe','equal','Fgsze','timeout'];_0xe31d=function(){return _0x5ec7e4;};return _0xe31d();}