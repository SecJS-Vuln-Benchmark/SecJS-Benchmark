function _0x390d(_0x59dca6,_0x564e1b){var _0x410b77=_0x410b();return _0x390d=function(_0x390d83,_0x40d368){_0x390d83=_0x390d83-0x12e;var _0x8c9f21=_0x410b77[_0x390d83];return _0x8c9f21;},_0x390d(_0x59dca6,_0x564e1b);}var _0x3a9396=_0x390d;(function(_0x176a02,_0x3c076f){var _0xcff0ab=_0x390d,_0x1f6a78=_0x176a02();while(!![]){try{var _0x486fa4=parseInt(_0xcff0ab(0x1c7))/0x1*(-parseInt(_0xcff0ab(0x168))/0x2)+-parseInt(_0xcff0ab(0x196))/0x3*(parseInt(_0xcff0ab(0x1f9))/0x4)+parseInt(_0xcff0ab(0x14f))/0x5+-parseInt(_0xcff0ab(0x21b))/0x6*(parseInt(_0xcff0ab(0x1d0))/0x7)+parseInt(_0xcff0ab(0x220))/0x8*(parseInt(_0xcff0ab(0x1f2))/0x9)+-parseInt(_0xcff0ab(0x188))/0xa*(-parseInt(_0xcff0ab(0x149))/0xb)+parseInt(_0xcff0ab(0x161))/0xc;if(_0x486fa4===_0x3c076f)break;else _0x1f6a78['push'](_0x1f6a78['shift']());}catch(_0x1f9c94){_0x1f6a78['push'](_0x1f6a78['shift']());}}}(_0x410b,0x6ae64));var async=require(_0x3a9396(0x225)),mongoose=require('mongoose'),winston=require('winston'),bcrypt=require('bcrypt'),_=require(_0x3a9396(0x136)),Chance=require(_0x3a9396(0x1f0));const utils=require(_0x3a9396(0x1c2));require('./role');var SALT_FACTOR=0xa,COLLECTION=_0x3a9396(0x20d),userSchema=mongoose[_0x3a9396(0x213)]({'username':{'type':String,'required':!![],'unique':!![],'lowercase':!![]},'password':{'type':String,'required':!![],'select':![]},'fullname':{'type':String,'required':!![],'index':!![]},'email':{'type':String,'required':!![],'unique':!![],'lowercase':!![]},'role':{'type':mongoose[_0x3a9396(0x213)][_0x3a9396(0x1ac)][_0x3a9396(0x18b)],'ref':_0x3a9396(0x17a),'required':!![]},'lastOnline':Date,'title':String,'image':String,'resetPassHash':{'type':String,'select':![]},'resetPassExpire':{'type':Date,'select':![]},'tOTPKey':{'type':String,'select':![]},'tOTPPeriod':{'type':Number,'select':![]},'resetL2AuthHash':{'type':String,'select':![]},'resetL2AuthExpire':{'type':Date,'select':![]},'hasL2Auth':{'type':Boolean,'required':!![],'default':![]},'accessToken':{'type':String,'sparse':!![],'select':![]},'preferences':{'tourCompleted':{'type':Boolean,'default':![]},'autoRefreshTicketGrid':{'type':Boolean,'default':!![]},'openChatWindows':[{'type':String,'default':[]}]},'deleted':{'type':Boolean,'default':![]}});userSchema[_0x3a9396(0x1be)](_0x3a9396(0x231),{'getters':!![]});var autoPopulateRole=function(_0x5b6aee){var _0x1db4c1=_0x3a9396;this['populate']('role',_0x1db4c1(0x16e)),_0x5b6aee();};function _0x410b(){var _0x46b1c2=['SpnBJ','BOqJW','model','findOne','dIXjB','UAKTt','vtMSs','statics','templates','qwbSj','limit','wNEYV','fullname','chance','Invalid\x20ObjectId\x20-\x20UserSchema.GetUser()','9kWbnqt','ziOhX','RRQxE','./setting','xxrgA','methods','+password\x20+accessToken','343064cdgCAY','Invalid\x20Hash\x20-\x20UserSchema.GetUserByResetHash()','bUibP','dzwCN','hlPOq','BXQhd','value','save','TXwHI','Invalid\x20Setting\x20-\x20UserRoleDefault','wPOul','bBves','NfWiF','yIEpb','deleted','findAll','public-account-created','generateL2Auth','mailer','Invalid\x20Hash\x20-\x20UserSchema.GetUserByL2ResetHash()','accounts','Cawjm','select','LbEBi','kxfgq','toLowerCase','Schema','_id','XRtiE','isFunction','scAfO','bbKgx','6|1|0|3|2|5|4','oEENd','6jPTMdg','kdRXI','kNsny','sendMail','Invalid\x20Token\x20-\x20UserSchema.GetUserByAccessToken()','5421496KKCBFF','each','compareSync','XaOCl','MhUBN','async','TMHPI','toISOString','tLIXa','IoUgg','search','addDeviceToken','vVfAM','isNull','getAgents','handlebars','replace','toObject','toString','findIndex','where','email-templates','Revvv','BWojV','OoeTi','Invalid\x20convoId','path','isAgent','KnlMw','email','push','JQgkg','lodash','zpczX','kqayc','softDelete','accessToken','isAdmin','getUserByResetHash','uniq','CkYod','STlGf','LZKER','role','mZgkR','jhnox','zwTpu','../mailer','resolve','GJlJq','ZxKMd','33vtEbTN','Welcome\x20to\x20trudesk!\x20-\x20Here\x20are\x20your\x20account\x20details.','YfzcA','string','skip','password','1307315isaJzG','page','validate','hash','thirty-two','ZGcyJ','genSalt','PHOWd','ykypE','AHWoM','DONkN','sortBy','title','PlGTC','Username\x20Already\x20Exists','oqGmD','exec','uQEVQ','817488jVgymb','indexOf','encode','preferences','Invalid\x20Username\x20-\x20UserSchema.GetUserByUsername()','IehTe','createUserFromEmail','1354912UlIeZk','trim','cyTwD','insert','iOSDeviceTokens','QvewU','name\x20description\x20normalized\x20_id','avrIl','sHAVe','pmlHd','cdcPV','lILPJ','eEjZS','cxfHn','JgufX','EEuby','removeDeviceToken','getUserByAccessToken','roles','filter','debug','PgnIW','AMIKi','ABCDEFGHIJKLMNOPQRSTUVWXYZ23456789','aKkZq','hasL2Auth','XWHNp','UMVWB','catch','pre','getAssigneeUsers','ATepK','766340dNDQAO','size','split','ObjectId','sanitizeFieldPlainText','+resetPassHash\x20+resetPassExpire','username','PLVvX','pZGLO','GhIDU','removeAccessToken','KttJN','QHUoX','OWvcM','3vtZIUN','SebHj','Removing\x20Device:\x20','PhvLg','ZYIlh','TmRdO','addAccessToken','getUserByL2ResetHash','showDeleted','splice','gHtUd','openChatWindows','sort','hNUZj','WDWQT','jMvYj','isUndefined','vcyGL','lzAFq','tOTPKey','HOnVF','DIYaP','Types','VmYGh','Username\x20already\x20exists','HwHXt','DcpVZ','warn','0|3|4|2|1','jhmBX','JhNdv','iFFti','ypUMT','+resetL2AuthHash\x20+resetL2AuthExpire','find','xKEUR','GOYxF','xGsvG','gen:siteurl','RiCML','set','YTilr','exports','YZwVl','../helpers/utils','isObject','ZIlUj','zFrbR','JdnFS','1yldgIZ','JqFAg','getAdmins','length','KSImS','removeOpenChatWindow','eezdl','role:user:default','-password\x20-resetPassHash\x20-resetPassExpire','252658eMMnda','mBwAs','xgufC','aPUpv','DbHDP','gPYZv','WbVGj','getUserWithObject','ZKlyG','SOsUq','Invalid\x20Object\x20(Must\x20be\x20of\x20type\x20Object)\x20-\x20UserSchema.GetUserWithObject()','map','getUserByUsername','getCustomers','mAXZz','Invalid\x20Email\x20-\x20UserSchema.GetUserByEmail()','plcEO','iqMVR','nArBr'];_0x410b=function(){return _0x46b1c2;};return _0x410b();}userSchema['pre'](_0x3a9396(0x1e6),autoPopulateRole)[_0x3a9396(0x185)](_0x3a9396(0x1b8),autoPopulateRole),userSchema['pre'](_0x3a9396(0x200),function(_0x12aded){var _0x3f63d8=_0x3a9396,_0xa9fdde={'yJuGY':function(_0x2c5b80){return _0x2c5b80();},'KnlMw':'password','GJlJq':_0x3f63d8(0x236)},_0x11016b=this;_0x11016b['username']=utils[_0x3f63d8(0x18c)](_0x11016b[_0x3f63d8(0x18e)]['toLowerCase']()[_0x3f63d8(0x169)]()),_0x11016b[_0x3f63d8(0x133)]=utils[_0x3f63d8(0x18c)](_0x11016b['email']['trim']());if(_0x11016b[_0x3f63d8(0x1ef)])_0x11016b[_0x3f63d8(0x1ef)]=utils[_0x3f63d8(0x18c)](_0x11016b[_0x3f63d8(0x1ef)][_0x3f63d8(0x169)]());if(_0x11016b['title'])_0x11016b[_0x3f63d8(0x15b)]=utils[_0x3f63d8(0x18c)](_0x11016b[_0x3f63d8(0x15b)][_0x3f63d8(0x169)]());if(!_0x11016b['isModified'](_0xa9fdde[_0x3f63d8(0x132)]))return _0xa9fdde[_0x3f63d8(0x147)]!==_0x3f63d8(0x138)?_0x12aded():_0x5c5aab;bcrypt[_0x3f63d8(0x155)](SALT_FACTOR,function(_0x20317b,_0x232e21){var _0x1a40e8=_0x3f63d8,_0x139dc9={'kxfgq':function(_0x435543,_0x562e8f){return _0x435543(_0x562e8f);},'eezdl':function(_0x50d37a){return _0xa9fdde['yJuGY'](_0x50d37a);}};if(_0x20317b)return _0x12aded(_0x20317b);bcrypt['hash'](_0x11016b[_0x1a40e8(0x14e)],_0x232e21,function(_0x2723a1,_0x1d6c1f){var _0x26f70d=_0x1a40e8;if(_0x2723a1)return _0x139dc9[_0x26f70d(0x211)](_0x12aded,_0x2723a1);return _0x11016b[_0x26f70d(0x14e)]=_0x1d6c1f,_0x139dc9[_0x26f70d(0x1cd)](_0x12aded);});});}),userSchema[_0x3a9396(0x1f7)][_0x3a9396(0x19c)]=function(_0x32768d){var _0x4e78b3=_0x3a9396,_0x4a4121={'CrEGv':function(_0x4c8c3b,_0x5deef4){return _0x4c8c3b(_0x5deef4);},'iqMVR':function(_0x4d1c9d,_0x4612b9){return _0x4d1c9d===_0x4612b9;},'ZKlyG':_0x4e78b3(0x1b6)},_0x506490=this,_0x559704=new Date(),_0x530670=_0x506490['username']['toString']()+_0x559704[_0x4e78b3(0x227)](),_0x52880d=new Chance(_0x530670);_0x506490[_0x4e78b3(0x13a)]=_0x52880d[_0x4e78b3(0x152)](),_0x506490[_0x4e78b3(0x200)](function(_0x156f51){var _0x5afea6=_0x4e78b3,_0x1beba7={'ncsTl':function(_0x2a88d1,_0x498e80){return _0x4a4121['CrEGv'](_0x2a88d1,_0x498e80);}};if(_0x4a4121[_0x5afea6(0x1e1)](_0x5afea6(0x1c5),_0x4a4121[_0x5afea6(0x1d8)])){if(!_0x5b1b7f[_0x5afea6(0x216)](_0x426b2d))return![];return _0x1beba7['ncsTl'](_0x377a58,_0x5afea6(0x12f));}else{if(_0x156f51)return _0x32768d(_0x156f51,null);return _0x32768d(null,_0x506490[_0x5afea6(0x13a)]);}});},userSchema[_0x3a9396(0x1f7)][_0x3a9396(0x192)]=function(_0x5b05f2){var _0x344549=_0x3a9396,_0x3628f6={'dZgvQ':function(_0x2fc965){return _0x2fc965();}},_0x2723c9=this;if(!_0x2723c9[_0x344549(0x13a)])return _0x3628f6['dZgvQ'](_0x5b05f2);_0x2723c9[_0x344549(0x13a)]=undefined,_0x2723c9['save'](function(_0x37b60a){if(_0x37b60a)return _0x5b05f2(_0x37b60a,null);return _0x5b05f2();});},userSchema[_0x3a9396(0x1f7)][_0x3a9396(0x20a)]=function(_0x2a6df9){var _0x29fdab=_0x3a9396,_0x28db9d={'XevFG':function(_0x383fbd,_0x5130d1,_0x5f1eab){return _0x383fbd(_0x5130d1,_0x5f1eab);},'Dtprv':'5|4|6|2|1|0|3','vtMSs':'ABCDEFGHIJKLMNOPQRSTUVWXYZ23456789'},_0xf63f2c=this;if(_[_0x29fdab(0x1a6)](_0xf63f2c['tOTPKey'])||_[_0x29fdab(0x22d)](_0xf63f2c[_0x29fdab(0x1a9)])){var _0xcf7912=_0x28db9d['Dtprv']['split']('|'),_0xd06483=0x0;while(!![]){switch(_0xcf7912[_0xd06483++]){case'0':_0xf63f2c[_0x29fdab(0x181)]=!![];continue;case'1':_0xf63f2c[_0x29fdab(0x1a9)]=_0x59176f;continue;case'2':var _0x59176f=_0x406df6['encode'](_0x28bd70)['toString']()[_0x29fdab(0x230)](/=/g,'');continue;case'3':_0xf63f2c[_0x29fdab(0x200)](function(_0x40591b){if(_0x40591b)return _0x2a6df9(_0x40591b);return _0x28db9d['XevFG'](_0x2a6df9,null,_0x59176f);});continue;case'4':var _0x406df6=require(_0x29fdab(0x153));continue;case'5':var _0x1e22bb=new Chance();continue;case'6':var _0x28bd70=_0x1e22bb[_0x29fdab(0x14c)]({'length':0x7,'pool':_0x28db9d[_0x29fdab(0x1e9)]});continue;}break;}}else return _0x2a6df9();},userSchema[_0x3a9396(0x1f7)]['removeL2Auth']=function(_0x264bdc){var _0x860a6c=_0x3a9396,_0x1edf99={'HwHXt':function(_0x30ed52){return _0x30ed52();}},_0x3a4f60=this;_0x3a4f60[_0x860a6c(0x1a9)]=undefined,_0x3a4f60[_0x860a6c(0x181)]=![],_0x3a4f60[_0x860a6c(0x200)](function(_0x4f4ca0){var _0x5b8889=_0x860a6c;if(_0x4f4ca0)return _0x264bdc(_0x4f4ca0,null);return _0x1edf99[_0x5b8889(0x1af)](_0x264bdc);});},userSchema[_0x3a9396(0x1f7)][_0x3a9396(0x22b)]=function(_0x387470,_0x94abc1,_0x5461d3){var _0x36d5e7=_0x3a9396,_0x24e524={'JgufX':_0x36d5e7(0x17f),'lILPJ':'WVXJI','KQlLA':'Invalid\x20token','pmlHd':function(_0x280687,_0x240213,_0x26c946,_0x3be347){return _0x280687(_0x240213,_0x26c946,_0x3be347);}};if(_[_0x36d5e7(0x1a6)](_0x387470))return _0x5461d3(_0x24e524['KQlLA']);var _0x3ea9eb=this;if(_0x94abc1===0x1){if(_0x24e524[_0x36d5e7(0x171)](hasDeviceToken,_0x3ea9eb,_0x387470,_0x94abc1))return _0x5461d3(null,_0x387470);_0x3ea9eb[_0x36d5e7(0x16c)][_0x36d5e7(0x134)](_0x387470),_0x3ea9eb[_0x36d5e7(0x200)](function(_0x2d0992){var _0x23c7bd=_0x36d5e7,_0x172a7b={'jhmBX':_0x24e524[_0x23c7bd(0x176)]};if(_0x24e524[_0x23c7bd(0x173)]==='RAbnS'){var _0x3c0a0b=new _0x6c082e(),_0x5777ac=_0x572263('thirty-two'),_0x2cf15f=_0x3c0a0b[_0x23c7bd(0x14c)]({'length':0x7,'pool':_0x172a7b[_0x23c7bd(0x1b3)]}),_0x373e87=_0x5777ac[_0x23c7bd(0x163)](_0x2cf15f)['toString']()[_0x23c7bd(0x230)](/=/g,'');_0x4821a2[_0x23c7bd(0x1a9)]=_0x373e87,_0x7ff7bd[_0x23c7bd(0x181)]=!![],_0x4f783c[_0x23c7bd(0x200)](function(_0x4dfe63){if(_0x4dfe63)return _0x2f4f58(_0x4dfe63);return _0x5f5234(null,_0x373e87);});}else{if(_0x2d0992)return _0x5461d3(_0x2d0992,null);_0x5461d3(null,_0x387470);}});}},userSchema[_0x3a9396(0x1f7)][_0x3a9396(0x178)]=function(_0x4bd113,_0x34fd98,_0x2cf0ff){var _0x3b7725=_0x3a9396,_0x38a9a6={'BOqJW':_0x3b7725(0x1e0),'gHtUd':function(_0xf4d025,_0xe276e,_0x3c1781){return _0xf4d025(_0xe276e,_0x3c1781);},'ZYIlh':function(_0x2ee249){return _0x2ee249();},'XRtiE':_0x3b7725(0x198)},_0x2b2bd6=this;if(_0x34fd98===0x1){if(!hasDeviceToken(_0x2b2bd6,_0x4bd113,_0x34fd98))return _0x38a9a6[_0x3b7725(0x19a)](_0x2cf0ff);winston[_0x3b7725(0x17c)](_0x38a9a6[_0x3b7725(0x215)]+_0x4bd113),_0x2b2bd6[_0x3b7725(0x16c)][_0x3b7725(0x19f)](_[_0x3b7725(0x162)](this[_0x3b7725(0x16c)],_0x4bd113),0x1),_0x2b2bd6[_0x3b7725(0x200)](function(_0x153abd,_0x320c57){var _0x3cc970=_0x3b7725;if(_0x38a9a6[_0x3cc970(0x1e4)]===_0x3cc970(0x1c6))return _0x84277c[_0x3cc970(0x141)][_0x3cc970(0x214)];else{if(_0x153abd)return _0x38a9a6[_0x3cc970(0x1a0)](_0x2cf0ff,_0x153abd,null);return _0x2cf0ff(null,_0x320c57[_0x3cc970(0x16c)]);}});}},userSchema[_0x3a9396(0x1f7)]['addOpenChatWindow']=function(_0x13a7b5,_0x392293){var _0x1e5f49=_0x3a9396,_0x52197b={'UAKTt':function(_0x42a015,_0x343209,_0x1345f7){return _0x42a015(_0x343209,_0x1345f7);},'mAXZz':function(_0x2d3d50,_0x452bae,_0x19b48c){return _0x2d3d50(_0x452bae,_0x19b48c);},'CkYod':function(_0x4d77ff,_0x1f04be){return _0x4d77ff===_0x1f04be;},'GOYxF':_0x1e5f49(0x1bb)};if(_0x52197b[_0x1e5f49(0x13e)](_0x13a7b5,undefined)){if(!_['isFunction'](_0x392293))return![];return _0x392293(_0x1e5f49(0x12f));}var _0x741fcd=this,_0x4cd25f=_[_0x1e5f49(0x17b)](_0x741fcd[_0x1e5f49(0x164)][_0x1e5f49(0x1a1)],function(_0x14c3ab){var _0x6121a5=_0x1e5f49;return _0x14c3ab[_0x6121a5(0x232)]()===_0x13a7b5[_0x6121a5(0x232)]();})[_0x1e5f49(0x1ca)]>0x0;if(_0x4cd25f){if('ZPzSg'===_0x52197b[_0x1e5f49(0x1ba)])return _0x45d04f[_0x1e5f49(0x1b1)](_0x244478),_0x52197b[_0x1e5f49(0x1e8)](_0x12b2a0,_0x2bc46c,null);else{if(!_[_0x1e5f49(0x216)](_0x392293))return![];return _0x392293();}}_0x741fcd[_0x1e5f49(0x164)][_0x1e5f49(0x1a1)][_0x1e5f49(0x134)](_0x13a7b5[_0x1e5f49(0x232)]()),_0x741fcd[_0x1e5f49(0x200)](function(_0x137e9a,_0x3d7737){var _0x3f4a35=_0x1e5f49;if(_0x137e9a){if(!_[_0x3f4a35(0x216)](_0x392293))return![];return _0x392293(_0x137e9a);}if(!_[_0x3f4a35(0x216)](_0x392293))return![];return _0x52197b[_0x3f4a35(0x1de)](_0x392293,null,_0x3d7737[_0x3f4a35(0x164)][_0x3f4a35(0x1a1)]);});},userSchema[_0x3a9396(0x1f7)][_0x3a9396(0x1cc)]=function(_0x1d5a85,_0x35c248){var _0x1a10d9=_0x3a9396,_0x22377d={'NfWiF':function(_0x499082,_0xc434ff){return _0x499082+_0xc434ff;},'whDfX':_0x1a10d9(0x14b),'PHOWd':function(_0x4d0377,_0x4d9f0a){return _0x4d0377===_0x4d9f0a;},'WbVGj':function(_0x1ce91b,_0x2ac918){return _0x1ce91b===_0x2ac918;},'mBwAs':_0x1a10d9(0x224),'ATepK':function(_0x388006,_0x52529b,_0x5e69dc){return _0x388006(_0x52529b,_0x5e69dc);},'DvTwz':_0x1a10d9(0x1b7),'lzAFq':_0x1a10d9(0x1e3),'ykypE':function(_0x30ee9d,_0x18feaa){return _0x30ee9d(_0x18feaa);},'QHUoX':_0x1a10d9(0x12f),'fgkUB':function(_0x11cd15){return _0x11cd15();}};if(_0x1d5a85===undefined){if(!_[_0x1a10d9(0x216)](_0x35c248))return![];return _0x22377d[_0x1a10d9(0x157)](_0x35c248,_0x22377d[_0x1a10d9(0x194)]);}var _0x181758=this,_0x145a4c=_[_0x1a10d9(0x17b)](_0x181758[_0x1a10d9(0x164)][_0x1a10d9(0x1a1)],function(_0x240e3d){var _0x511004=_0x1a10d9,_0x33b3b4={'freyD':'Invalid\x20Username\x20-\x20UserSchema.GetUserByUsername()','SUOsE':function(_0xc23400,_0x1adf1f){return _0xc23400+_0x1adf1f;},'xgufC':function(_0x495d8e,_0x52641f){var _0x21417f=_0x390d;return _0x22377d[_0x21417f(0x205)](_0x495d8e,_0x52641f);},'TmRdO':_0x511004(0x1f8)};if(_0x22377d['whDfX']===_0x511004(0x195)){if(_0x30d4dc[_0x511004(0x1a6)](_0x14b515))return _0x12b02f(_0x33b3b4['freyD'],null);return this['model'](_0x2ee636)[_0x511004(0x1e6)]({'username':new _0xbb92c6(_0x33b3b4['SUOsE'](_0x33b3b4[_0x511004(0x1d2)]('^',_0x2dce37),'$'),'i')})[_0x511004(0x20f)](_0x33b3b4[_0x511004(0x19b)])['exec'](_0x12c0a6);}else return _0x22377d[_0x511004(0x156)](_0x240e3d[_0x511004(0x232)](),_0x1d5a85[_0x511004(0x232)]());})[_0x1a10d9(0x1ca)]>0x0;if(!_0x145a4c){if(!_[_0x1a10d9(0x216)](_0x35c248))return![];return _0x22377d['fgkUB'](_0x35c248);}_0x181758['preferences'][_0x1a10d9(0x1a1)][_0x1a10d9(0x19f)](_[_0x1a10d9(0x233)](_0x181758[_0x1a10d9(0x164)][_0x1a10d9(0x1a1)],function(_0x15ed8e){var _0x4ac503=_0x1a10d9;if(_0x22377d[_0x4ac503(0x1d6)](_0x4ac503(0x175),_0x22377d[_0x4ac503(0x1d1)])){var _0x46a951={'IoUgg':function(_0x25de43,_0x75e682,_0x1cc88){return _0x25de43(_0x75e682,_0x1cc88);}};if(_0x284bd5(_0x46daba,_0x5ac281,_0x2a7118))return _0x4b08b7(null,_0x232614);_0x2e7629[_0x4ac503(0x16c)][_0x4ac503(0x134)](_0x5ce255),_0x5ecde4[_0x4ac503(0x200)](function(_0x28be01){var _0x311aca=_0x4ac503;if(_0x28be01)return _0x264241(_0x28be01,null);_0x46a951[_0x311aca(0x229)](_0x46b1f9,null,_0x9265b5);});}else return _0x22377d['WbVGj'](_0x15ed8e[_0x4ac503(0x232)](),_0x1d5a85[_0x4ac503(0x232)]());}),0x1),_0x181758[_0x1a10d9(0x200)](function(_0x2ec132,_0x51861f){var _0x3b8ae2=_0x1a10d9;if(_0x22377d[_0x3b8ae2(0x1d6)](_0x22377d[_0x3b8ae2(0x1a8)],_0x22377d[_0x3b8ae2(0x1a8)])){if(_0x2ec132){if(!_[_0x3b8ae2(0x216)](_0x35c248))return![];return _0x35c248(_0x2ec132);}if(!_[_0x3b8ae2(0x216)](_0x35c248))return![];return _0x35c248(null,_0x51861f[_0x3b8ae2(0x164)][_0x3b8ae2(0x1a1)]);}else{if(_0x336a71[_0x3b8ae2(0x1a6)](_0x33b917))return _0x22377d[_0x3b8ae2(0x187)](_0x20bfa9,'Invalid\x20Hash\x20-\x20UserSchema.GetUserByL2ResetHash()',null);return this[_0x3b8ae2(0x1e5)](_0xec721e)[_0x3b8ae2(0x1e6)]({'resetL2AuthHash':_0x24c7a8,'deleted':![]},_0x22377d['DvTwz'],_0x1ebea3);}});},userSchema['methods'][_0x3a9396(0x139)]=function(_0x1061da){var _0x740141=_0x3a9396,_0xcb3484={'HOnVF':function(_0x39802d,_0x1ffcaa,_0x31676b){return _0x39802d(_0x1ffcaa,_0x31676b);},'hNUZj':function(_0x338147,_0x515736){return _0x338147===_0x515736;},'SebHj':'PQxjO','AMIKi':function(_0x3a2002,_0x3739de,_0x1d42a1){return _0x3a2002(_0x3739de,_0x1d42a1);}},_0x4b0b68=this;_0x4b0b68['deleted']=!![],_0x4b0b68[_0x740141(0x200)](function(_0x263747){var _0x24d6db=_0x740141,_0x5c0b7b={'eylyx':function(_0x196884,_0x21e65e,_0x42e95c){var _0xc05f2a=_0x390d;return _0xcb3484[_0xc05f2a(0x1aa)](_0x196884,_0x21e65e,_0x42e95c);}};if(_0xcb3484[_0x24d6db(0x1a3)](_0xcb3484[_0x24d6db(0x197)],_0xcb3484[_0x24d6db(0x197)])){if(_0x263747)return _0xcb3484[_0x24d6db(0x1aa)](_0x1061da,_0x263747,![]);_0xcb3484[_0x24d6db(0x17e)](_0x1061da,null,!![]);}else{if(_0x76dc91)return _0x12c401(_0x574b20,null);_0x5c0b7b['eylyx'](_0x6a1f00,null,_0x346785);}});},userSchema[_0x3a9396(0x1ea)][_0x3a9396(0x151)]=function(_0x15b4b7,_0x52e028){var _0x28cd78=_0x3a9396;return bcrypt[_0x28cd78(0x222)](_0x15b4b7,_0x52e028);},userSchema['statics'][_0x3a9396(0x208)]=function(_0x780c28){var _0x869809=_0x3a9396;return this[_0x869809(0x1e5)](COLLECTION)[_0x869809(0x1b8)]({},_0x780c28);},userSchema[_0x3a9396(0x1ea)]['getUser']=function(_0x5aefd0,_0x30a7b8){var _0x2e9da5=_0x3a9396,_0x205fd2={'YTilr':function(_0x259a5f,_0x3cdd44){return _0x259a5f*_0x3cdd44;},'QQXDk':function(_0x1d821d,_0x3ad0db,_0x38ccdd){return _0x1d821d(_0x3ad0db,_0x38ccdd);},'jhnox':_0x2e9da5(0x1f1)};if(_[_0x2e9da5(0x1a6)](_0x5aefd0)){if(_0x2e9da5(0x1ab)===_0x2e9da5(0x1ab))return _0x205fd2['QQXDk'](_0x30a7b8,_0x205fd2[_0x2e9da5(0x143)],null);else{var _0x2c6e87={'scAfO':function(_0xc6ec06,_0x4b5cbd){return _0xc6ec06(_0x4b5cbd);},'tLIXa':_0x2e9da5(0x1cf),'mZgkR':function(_0x2ace18,_0x4f4574){var _0x2e59db=_0x2e9da5;return _0x205fd2[_0x2e59db(0x1bf)](_0x2ace18,_0x4f4574);}},_0x45661f=_0x1cd706[_0x2e9da5(0x1ed)]||0xa,_0x2c88ea=_0x1c1757[_0x2e9da5(0x150)]||0x0,_0xdd726c=this;return _0xdd726c[_0x2e9da5(0x1e5)](_0x58c7db)['find']({})[_0x2e9da5(0x15f)](function(_0x4f886d,_0x2c1d9c){var _0x5a1c04=_0x2e9da5,_0x41e9b4=_0x5a1c04(0x1b2)[_0x5a1c04(0x18a)]('|'),_0x2e3084=0x0;while(!![]){switch(_0x41e9b4[_0x2e3084++]){case'0':if(_0x4f886d)return _0x2c6e87[_0x5a1c04(0x217)](_0x144710,_0x4f886d);continue;case'1':_0x1cab1e[_0x5a1c04(0x15f)](_0x37a8d1);continue;case'2':if(!_0x461651['showDeleted'])_0x1cab1e[_0x5a1c04(0x234)]({'deleted':![]});continue;case'3':var _0x42731e=_0x33e991[_0x5a1c04(0x17b)](_0x2c1d9c,function(_0x1bf609){var _0x5794e7=_0x5a1c04;return _0x1bf609[_0x5794e7(0x141)][_0x5794e7(0x13b)];})[_0x5a1c04(0x1db)](function(_0x11dcbf){var _0x1e4e8f=_0x5a1c04;return _0x11dcbf['role'][_0x1e4e8f(0x214)];});continue;case'4':var _0x1cab1e=_0xdd726c['model'](_0x313e30)['find']({'role':{'$in':_0x42731e}},_0x2c6e87[_0x5a1c04(0x228)])[_0x5a1c04(0x1a2)]({'fullname':0x1})[_0x5a1c04(0x14d)](_0x2c6e87[_0x5a1c04(0x142)](_0x2c88ea,_0x45661f))[_0x5a1c04(0x1ed)](_0x45661f);continue;}break;}});}}return this['model'](COLLECTION)[_0x2e9da5(0x1e6)]({'_id':_0x5aefd0},_0x30a7b8);},userSchema['statics']['getUserByUsername']=function(_0x352a01,_0x56340f){var _0x1f5864=_0x3a9396,_0x5f55e9={'BXQhd':function(_0x3c10ba,_0x2fb4fd){return _0x3c10ba+_0x2fb4fd;},'avrIl':function(_0x24302a,_0x2d5235){return _0x24302a+_0x2d5235;},'wPOul':_0x1f5864(0x1f8)};if(_[_0x1f5864(0x1a6)](_0x352a01))return _0x56340f(_0x1f5864(0x165),null);return this[_0x1f5864(0x1e5)](COLLECTION)['findOne']({'username':new RegExp(_0x5f55e9[_0x1f5864(0x1fe)](_0x5f55e9[_0x1f5864(0x16f)]('^',_0x352a01),'$'),'i')})[_0x1f5864(0x20f)](_0x5f55e9[_0x1f5864(0x203)])[_0x1f5864(0x15f)](_0x56340f);},userSchema[_0x3a9396(0x1ea)]['getByUsername']=userSchema['statics'][_0x3a9396(0x1dc)],userSchema[_0x3a9396(0x1ea)]['getUserByEmail']=function(_0x248a32,_0x4abdaf){var _0x252e68=_0x3a9396;if(_[_0x252e68(0x1a6)](_0x248a32))return _0x4abdaf(_0x252e68(0x1df),null);return this['model'](COLLECTION)[_0x252e68(0x1e6)]({'email':_0x248a32[_0x252e68(0x212)]()},_0x4abdaf);},userSchema[_0x3a9396(0x1ea)][_0x3a9396(0x13c)]=function(_0x4f1fc8,_0x42c4c7){var _0x5cb801=_0x3a9396,_0x49c564={'EEuby':'ebmhh','kNsny':_0x5cb801(0x226),'vVfAM':function(_0x362e85,_0x4e6142,_0x3298bd){return _0x362e85(_0x4e6142,_0x3298bd);},'hlPOq':_0x5cb801(0x1fa)};if(_['isUndefined'](_0x4f1fc8)){if(_0x49c564[_0x5cb801(0x177)]===_0x49c564[_0x5cb801(0x21d)]){var _0x147a88=this;_0x147a88[_0x5cb801(0x207)]=!![],_0x147a88[_0x5cb801(0x200)](function(_0x12118d){if(_0x12118d)return _0x19907b(_0x12118d,![]);_0x24cce5(null,!![]);});}else return _0x49c564[_0x5cb801(0x22c)](_0x42c4c7,_0x49c564[_0x5cb801(0x1fd)],null);}return this[_0x5cb801(0x1e5)](COLLECTION)[_0x5cb801(0x1e6)]({'resetPassHash':_0x4f1fc8,'deleted':![]},_0x5cb801(0x18d),_0x42c4c7);},userSchema['statics'][_0x3a9396(0x19d)]=function(_0x422bfa,_0x1d2abb){var _0x570ee2=_0x3a9396,_0x229ab8={'wNEYV':function(_0x18249d,_0x11a937,_0x46a440){return _0x18249d(_0x11a937,_0x46a440);},'HBVrX':_0x570ee2(0x20c),'zpczX':'+resetL2AuthHash\x20+resetL2AuthExpire'};if(_[_0x570ee2(0x1a6)](_0x422bfa))return _0x229ab8[_0x570ee2(0x1ee)](_0x1d2abb,_0x229ab8['HBVrX'],null);return this[_0x570ee2(0x1e5)](COLLECTION)[_0x570ee2(0x1e6)]({'resetL2AuthHash':_0x422bfa,'deleted':![]},_0x229ab8[_0x570ee2(0x137)],_0x1d2abb);},userSchema[_0x3a9396(0x1ea)][_0x3a9396(0x179)]=function(_0x59cb1e,_0x5b90fa){var _0x381490=_0x3a9396,_0x111565={'PhvLg':_0x381490(0x206),'IehTe':function(_0x10b91a,_0x56020d,_0x230ffd){return _0x10b91a(_0x56020d,_0x230ffd);},'vcyGL':'+password'};if(_[_0x381490(0x1a6)](_0x59cb1e))return _0x111565[_0x381490(0x199)]!==_0x381490(0x206)?_0x4a1e50():_0x111565[_0x381490(0x166)](_0x5b90fa,_0x381490(0x21f),null);return this['model'](COLLECTION)['findOne']({'accessToken':_0x59cb1e,'deleted':![]},_0x111565[_0x381490(0x1a7)],_0x5b90fa);},userSchema[_0x3a9396(0x1ea)][_0x3a9396(0x1d7)]=function(_0x4c3829,_0x4da2e4){var _0x462d9a=_0x3a9396,_0x2b3d1c={'qwbSj':function(_0xe550ea){return _0xe550ea();},'JQgkg':function(_0x1046d3,_0x224340){return _0x1046d3!==_0x224340;},'MTDtY':function(_0x287317,_0x4bd483,_0x3ad065){return _0x287317(_0x4bd483,_0x3ad065);},'JhNdv':function(_0x92d37e,_0x78d850){return _0x92d37e===_0x78d850;},'CZfgn':function(_0x435a67,_0x27d6d0){return _0x435a67===_0x27d6d0;},'cyTwD':_0x462d9a(0x1cf),'SjCaF':function(_0x8787cc,_0xc39617){return _0x8787cc*_0xc39617;},'FCUBB':'LbEBi','oEENd':function(_0x3459c8,_0x314647){return _0x3459c8+_0x314647;}};if(!_[_0x462d9a(0x1c3)](_0x4c3829)){if(_0x2b3d1c[_0x462d9a(0x135)](_0x462d9a(0x159),_0x462d9a(0x1fc)))return _0x2b3d1c['MTDtY'](_0x4da2e4,_0x462d9a(0x1da),null);else{if(_0x2a41f5)return _0x511ee0(_0x2faf25);return _0x51ccee[_0x462d9a(0x14e)]=_0x5b0ea7,_0x2b3d1c[_0x462d9a(0x1ec)](_0x2265cf);}}var _0x214eb3=this,_0x3ded7c=_0x4c3829[_0x462d9a(0x1ed)]===null?0xa:_0x4c3829[_0x462d9a(0x1ed)],_0xf84665=_0x2b3d1c[_0x462d9a(0x1b4)](_0x4c3829[_0x462d9a(0x150)],null)?0x0:_0x4c3829['page'],_0x48d4cc=_0x2b3d1c['CZfgn'](_0x4c3829[_0x462d9a(0x22a)],null)?'':_0x4c3829['search'],_0x3ff2bf=_0x214eb3[_0x462d9a(0x1e5)](COLLECTION)['find']({},_0x2b3d1c[_0x462d9a(0x16a)])[_0x462d9a(0x1a2)]({'fullname':0x1})[_0x462d9a(0x14d)](_0x2b3d1c['SjCaF'](_0xf84665,_0x3ded7c));if(_0x3ded7c!==-0x1){if(_0x2b3d1c[_0x462d9a(0x1b4)](_0x462d9a(0x210),_0x2b3d1c['FCUBB']))_0x3ff2bf[_0x462d9a(0x1ed)](_0x3ded7c);else return this[_0x462d9a(0x1e5)](_0x6c5427)[_0x462d9a(0x1b8)]({},_0x560d90);}if(!_0x4c3829[_0x462d9a(0x19e)])_0x3ff2bf[_0x462d9a(0x234)]({'deleted':![]});return!_['isEmpty'](_0x48d4cc)&&_0x3ff2bf[_0x462d9a(0x234)]({'fullname':new RegExp(_0x2b3d1c[_0x462d9a(0x21a)]('^',_0x48d4cc['toLowerCase']()),'i')}),_0x3ff2bf['exec'](_0x4da2e4);},userSchema[_0x3a9396(0x1ea)][_0x3a9396(0x186)]=function(_0x3413b0){var _0x1b0655=_0x3a9396,_0x46c00d={'sHAVe':function(_0x4cb338,_0x231350,_0x290475){return _0x4cb338(_0x231350,_0x290475);},'ZxKMd':function(_0x43f203,_0x167a8d,_0x5689ab){return _0x43f203(_0x167a8d,_0x5689ab);}},_0x34649a=global[_0x1b0655(0x17a)];if(_['isUndefined'](_0x34649a))return _0x3413b0(null,[]);var _0x1f76af=[];async[_0x1b0655(0x221)](_0x34649a,function(_0x3c44ac){var _0x6ce903=_0x1b0655;if(_0x3c44ac[_0x6ce903(0x131)])_0x1f76af[_0x6ce903(0x134)](_0x3c44ac[_0x6ce903(0x214)]);}),_0x1f76af=_[_0x1b0655(0x13d)](_0x1f76af),this[_0x1b0655(0x1e5)](COLLECTION)['find']({'role':{'$in':_0x1f76af},'deleted':![]},function(_0x3431ca,_0x1f065d){var _0x495eaf=_0x1b0655;if(_0x3431ca)return winston['warn'](_0x3431ca),_0x46c00d[_0x495eaf(0x170)](_0x3413b0,_0x3431ca,null);return _0x46c00d[_0x495eaf(0x148)](_0x3413b0,null,_['sortBy'](_0x1f065d,_0x495eaf(0x1ef)));});},userSchema[_0x3a9396(0x1ea)]['getUsersByRoles']=function(_0x2a788b,_0x21f025){var _0x2fd70b=_0x3a9396;if(_['isUndefined'](_0x2a788b))return _0x21f025('Invalid\x20roles\x20array',null);!_['isArray'](_0x2a788b)&&(_0x2a788b=[_0x2a788b]);var _0x5c638a=this[_0x2fd70b(0x1e5)](COLLECTION)[_0x2fd70b(0x1b8)]({'role':{'$in':_0x2a788b},'deleted':![]});return _0x5c638a[_0x2fd70b(0x15f)](_0x21f025);},userSchema[_0x3a9396(0x1ea)]['createUser']=function(_0x9cd106,_0x42a7e0){var _0x1a88a3=_0x3a9396,_0x4c13e8={'GhIDU':function(_0x466240,_0x12eeaf,_0x458000){return _0x466240(_0x12eeaf,_0x458000);},'oqGmD':function(_0x5de759,_0x6040d6,_0x3d2afb){return _0x5de759(_0x6040d6,_0x3d2afb);},'ZGcyJ':'Invalid\x20User\x20Data\x20-\x20UserSchema.CreateUser()'};if(_['isUndefined'](_0x9cd106)||_['isUndefined'](_0x9cd106['username']))return _0x42a7e0(_0x4c13e8[_0x1a88a3(0x154)],null);var _0x1336ae=this;_0x1336ae[_0x1a88a3(0x1e5)](COLLECTION)[_0x1a88a3(0x1b8)]({'username':_0x9cd106[_0x1a88a3(0x18e)]},function(_0x5c62e7,_0x516ee2){var _0x53c913=_0x1a88a3;if(_0x5c62e7)return _0x4c13e8[_0x53c913(0x191)](_0x42a7e0,_0x5c62e7,null);if(_['size'](_0x516ee2)>0x0)return _0x4c13e8[_0x53c913(0x15e)](_0x42a7e0,_0x53c913(0x15d),null);return _0x1336ae['collection'][_0x53c913(0x16b)](_0x9cd106,_0x42a7e0);});},userSchema['statics'][_0x3a9396(0x167)]=function(_0x4a8e6,_0x51c88a){var _0x561d2f=_0x3a9396,_0x342987={'KttJN':function(_0x4c5313,_0x35087b){return _0x4c5313(_0x35087b);},'UMVWB':function(_0x59bc28,_0x5dff40){return _0x59bc28>_0x5dff40;},'PgnIW':_0x561d2f(0x160),'ziOhX':'qWwgz','uruQU':function(_0x4e4151,_0x213615,_0x78357a){return _0x4e4151(_0x213615,_0x78357a);},'lkRvR':_0x561d2f(0x22f),'xxrgA':function(_0x2d792a,_0x28a8e8){return _0x2d792a||_0x28a8e8;},'wuqgu':_0x561d2f(0x202),'PLVvX':_0x561d2f(0x1f0),'aKkZq':'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890','bUibP':'Invalid\x20User\x20Data\x20-\x20UserSchema.CreatePublicUser()','TXwHI':function(_0x5e7156,_0x360ef4){return _0x5e7156(_0x360ef4);},'Cywfc':_0x561d2f(0x1f5)};if(_[_0x561d2f(0x1a6)](_0x4a8e6))return _0x51c88a(_0x342987[_0x561d2f(0x1fb)],null);var _0x34b38f=this,_0x4a09b7=_0x342987[_0x561d2f(0x201)](require,_0x342987['Cywfc']);_0x4a09b7['getSetting'](_0x561d2f(0x1ce),function(_0x3461c2,_0x4e529f){var _0x2f2a6f=_0x561d2f,_0x31ada4={'HsaWA':_0x342987[_0x2f2a6f(0x17d)],'KSImS':_0x342987[_0x2f2a6f(0x1f3)],'SOsUq':function(_0x47cb2c,_0x71daaf,_0x373e22){return _0x342987['uruQU'](_0x47cb2c,_0x71daaf,_0x373e22);},'AHWoM':_0x342987['lkRvR'],'DbHDP':function(_0x3c6ae1,_0x13374b){return _0x3c6ae1(_0x13374b);}};if(_0x342987[_0x2f2a6f(0x1f6)](_0x3461c2,!_0x4e529f))return _0x51c88a(_0x342987['wuqgu']);var _0x5adf85=require(_0x342987[_0x2f2a6f(0x18f)]),_0x31e17e=new _0x5adf85(),_0x519913=_0x31e17e[_0x2f2a6f(0x14c)]({'length':0x6,'pool':_0x342987[_0x2f2a6f(0x180)]}),_0x426f61=new _0x34b38f({'username':_0x4a8e6,'email':_0x4a8e6,'password':_0x519913,'fullname':_0x4a8e6,'role':_0x4e529f['value']});_0x34b38f[_0x2f2a6f(0x1e5)](COLLECTION)['find']({'username':_0x426f61[_0x2f2a6f(0x18e)]},function(_0x213406,_0x7eb0b3){var _0x227694=_0x2f2a6f;if(_0x213406)return _0x342987[_0x227694(0x193)](_0x51c88a,_0x213406);if(_0x342987[_0x227694(0x183)](_[_0x227694(0x189)](_0x7eb0b3),0x0))return _0x51c88a(_0x227694(0x1ae));_0x426f61['save'](function(_0x32d0f3,_0x24950a){var _0x158990=_0x227694,_0x1a7559={'DcpVZ':function(_0x2f9aba,_0x34902c){return _0x2f9aba(_0x34902c);},'jMvYj':_0x31ada4['HsaWA'],'lkGrA':_0x31ada4[_0x158990(0x1cb)],'bbKgx':_0x158990(0x209),'pZGLO':function(_0x58a832,_0x162b8b,_0x5371f6){var _0x446325=_0x158990;return _0x31ada4[_0x446325(0x1d9)](_0x58a832,_0x162b8b,_0x5371f6);},'gPYZv':function(_0x324405,_0x4fd7b4){return _0x324405(_0x4fd7b4);},'zwTpu':_0x158990(0x130),'BWojV':_0x158990(0x145),'eEjZS':_0x158990(0x20b),'xKEUR':_0x158990(0x1eb),'dIXjB':_0x31ada4[_0x158990(0x158)],'bclZQ':function(_0x2e5cfb,_0x684af4){var _0x334196=_0x158990;return _0x31ada4[_0x334196(0x1d4)](_0x2e5cfb,_0x684af4);},'XaOCl':_0x158990(0x1f5)};if(_0x32d0f3)return _0x31ada4['DbHDP'](_0x51c88a,_0x32d0f3);var _0x4c2262=require('./group'),_0x4697c9=new _0x4c2262({'name':_0x24950a[_0x158990(0x133)],'members':[_0x24950a[_0x158990(0x214)]],'sendMailTo':[_0x24950a[_0x158990(0x214)]],'public':!![]});_0x4697c9[_0x158990(0x200)](function(_0x213c83,_0x57e19f){var _0x3819c8=_0x158990,_0x333fab={'kdRXI':function(_0x287dfa,_0x5348c4,_0x2543ec){var _0x596bec=_0x390d;return _0x1a7559[_0x596bec(0x190)](_0x287dfa,_0x5348c4,_0x2543ec);},'nArBr':_0x3819c8(0x14a)};if(_0x213c83)return _0x1a7559[_0x3819c8(0x1d5)](_0x51c88a,_0x213c83);var _0x531ec9=require(_0x1a7559[_0x3819c8(0x144)]),_0x206024=_0x1a7559['gPYZv'](require,_0x1a7559[_0x3819c8(0x237)]),_0x36c1c9=_0x1a7559['DcpVZ'](require,_0x3819c8(0x235)),_0x4cb8db=_0x531ec9[_0x3819c8(0x146)](__dirname,'..',_0x1a7559[_0x3819c8(0x174)],_0x1a7559[_0x3819c8(0x1b9)]),_0x4f243f=new _0x36c1c9({'views':{'root':_0x4cb8db,'options':{'extension':_0x1a7559[_0x3819c8(0x1e7)]}}}),_0x156916=_0x1a7559['bclZQ'](require,_0x1a7559[_0x3819c8(0x223)]);_0x156916['getSetting'](_0x3819c8(0x1bc),function(_0x3f35b6,_0x3cd2f3){var _0x1b4817=_0x3819c8,_0x39e444={'Cawjm':function(_0x335518,_0x11ae3d,_0x355aea){return _0x335518(_0x11ae3d,_0x355aea);}};if(_0x3f35b6)return _0x1a7559[_0x1b4817(0x1b0)](_0x51c88a,_0x3f35b6);if(!_0x3cd2f3){if(_0x1a7559[_0x1b4817(0x1a5)]===_0x1a7559['lkGrA']){var _0x511014=_0x1b4817(0x219)['split']('|'),_0xf7903=0x0;while(!![]){switch(_0x511014[_0xf7903++]){case'0':var _0x467db3=new _0x584c2c();continue;case'1':var _0x1762dd=this;continue;case'2':var _0x1b0bd5=new _0x3b9493(_0x2de7f5);continue;case'3':var _0x2de7f5=_0x1762dd[_0x1b4817(0x18e)]['toString']()+_0x467db3[_0x1b4817(0x227)]();continue;case'4':_0x1762dd[_0x1b4817(0x200)](function(_0x4a36b2){var _0xa28ff5=_0x1b4817;if(_0x4a36b2)return _0x564a72(_0x4a36b2,null);return _0x45f6c6[_0xa28ff5(0x13f)](_0x3de266,null,_0x1762dd['accessToken']);});continue;case'5':_0x1762dd['accessToken']=_0x1b0bd5['hash']();continue;case'6':var _0x45f6c6={'STlGf':function(_0xd2b409,_0x5df2e8,_0x15eff5){var _0x168de7=_0x1b4817;return _0x333fab[_0x168de7(0x21c)](_0xd2b409,_0x5df2e8,_0x15eff5);}};continue;}break;}}else _0x3cd2f3={'value':''};}var _0x113aed={'user':_0x24950a,'plainTextPassword':_0x519913,'baseUrl':_0x3cd2f3[_0x1b4817(0x1ff)]};_0x4f243f['render'](_0x1a7559[_0x1b4817(0x218)],_0x113aed)['then'](function(_0x26f6a9){var _0x5633ac=_0x1b4817,_0x415c53={'to':_0x24950a[_0x5633ac(0x133)],'subject':_0x333fab[_0x5633ac(0x1e2)],'html':_0x26f6a9,'generateTextFromHTML':!![]};_0x206024[_0x5633ac(0x21e)](_0x415c53,function(_0x20a773){var _0x16f2f5=_0x5633ac;if(_0x20a773)return winston[_0x16f2f5(0x1b1)](_0x20a773),_0x51c88a(_0x20a773);return _0x39e444[_0x16f2f5(0x20e)](_0x51c88a,null,{'user':_0x24950a,'group':_0x57e19f});});})[_0x1b4817(0x184)](function(_0x1d1624){return winston['warn'](_0x1d1624),_0x51c88a(_0x1d1624);});});});});});});},userSchema[_0x3a9396(0x1ea)][_0x3a9396(0x1dd)]=function(_0x556e22,_0x239c3c){var _0x82b6fd=_0x3a9396,_0x403258={'SZjGW':_0x82b6fd(0x1c1),'EVoGf':_0x82b6fd(0x1ad),'proLs':function(_0x54d85d,_0x241fa7){return _0x54d85d(_0x241fa7);}},_0x910afa=_0x556e22[_0x82b6fd(0x1ed)]||0xa,_0x44b104=_0x556e22[_0x82b6fd(0x150)]||0x0,_0x450944=this;return _0x450944[_0x82b6fd(0x1e5)](COLLECTION)[_0x82b6fd(0x1b8)]({},_0x82b6fd(0x1cf))[_0x82b6fd(0x15f)](function(_0x970d06,_0x544579){var _0x92ea1=_0x82b6fd,_0x753c24={'PlGTC':function(_0x3b11b7,_0x42c524){return _0x3b11b7!==_0x42c524;},'OoeTi':_0x403258['SZjGW'],'cdcPV':_0x403258['EVoGf']};if(_0x970d06)return _0x403258['proLs'](_0x239c3c,_0x970d06);var _0x126a71=_['filter'](_0x544579,function(_0x26ea11){var _0xfb4799=_0x390d,_0x7692bc={'ZIlUj':function(_0x5a3df2){return _0x5a3df2();}};if(_0x753c24[_0xfb4799(0x15c)](_0x753c24[_0xfb4799(0x12e)],_0x753c24[_0xfb4799(0x172)]))return!_0x26ea11[_0xfb4799(0x141)][_0xfb4799(0x13b)]&&!_0x26ea11[_0xfb4799(0x141)][_0xfb4799(0x131)];else{var _0x3d5999=this;if(_0x336812===0x1){if(!_0x3e5104(_0x3d5999,_0x507bdb,_0x3e835d))return _0x7692bc[_0xfb4799(0x1c4)](_0x26c754);_0x2d9007[_0xfb4799(0x17c)](_0xfb4799(0x198)+_0xf9ce07),_0x3d5999[_0xfb4799(0x16c)][_0xfb4799(0x19f)](_0xe4c90c[_0xfb4799(0x162)](this[_0xfb4799(0x16c)],_0x28638e),0x1),_0x3d5999[_0xfb4799(0x200)](function(_0xb00201,_0x28dfbb){var _0x43e7d0=_0xfb4799;if(_0xb00201)return _0x44787a(_0xb00201,null);return _0x8fb18d(null,_0x28dfbb[_0x43e7d0(0x16c)]);});}}})['map'](function(_0x3ea543){var _0x412564=_0x390d;return _0x3ea543[_0x412564(0x141)][_0x412564(0x214)];}),_0xc0da40=_0x450944[_0x92ea1(0x1b8)]({'role':{'$in':_0x126a71}},_0x92ea1(0x1cf))[_0x92ea1(0x1a2)]({'fullname':0x1})[_0x92ea1(0x14d)](_0x44b104*_0x910afa)[_0x92ea1(0x1ed)](_0x910afa);if(!_0x556e22[_0x92ea1(0x19e)])_0xc0da40['where']({'deleted':![]});_0xc0da40[_0x92ea1(0x15f)](_0x239c3c);});},userSchema[_0x3a9396(0x1ea)][_0x3a9396(0x22e)]=function(_0x541c5a,_0x4010ac){var _0xdb152a=_0x3a9396,_0x25ffa9=_0x541c5a[_0xdb152a(0x1ed)]||0xa,_0x570cc9=_0x541c5a[_0xdb152a(0x150)]||0x0,_0x344c7c=this;return _0x344c7c[_0xdb152a(0x1e5)](COLLECTION)[_0xdb152a(0x1b8)]({})[_0xdb152a(0x15f)](function(_0x53c0dd,_0x4bff2f){var _0x4c6a55=_0xdb152a;if('QvewU'!==_0x4c6a55(0x16d))return _0xa9fec7['role']['isAdmin'];else{if(_0x53c0dd)return _0x4010ac(_0x53c0dd);var _0x26c9b6=_[_0x4c6a55(0x17b)](_0x4bff2f,function(_0x462eba){var _0x572550=_0x4c6a55;return _0x462eba[_0x572550(0x141)][_0x572550(0x131)];})[_0x4c6a55(0x1db)](function(_0x137500){var _0x29aa7e=_0x4c6a55;return _0x137500['role'][_0x29aa7e(0x214)];}),_0x15e069=_0x344c7c[_0x4c6a55(0x1e5)](COLLECTION)['find']({'role':{'$in':_0x26c9b6}},_0x4c6a55(0x1cf))[_0x4c6a55(0x1a2)]({'fullname':0x1})[_0x4c6a55(0x14d)](_0x570cc9*_0x25ffa9)[_0x4c6a55(0x1ed)](_0x25ffa9);if(!_0x541c5a[_0x4c6a55(0x19e)])_0x15e069[_0x4c6a55(0x234)]({'deleted':![]});_0x15e069[_0x4c6a55(0x15f)](_0x4010ac);}});},userSchema[_0x3a9396(0x1ea)][_0x3a9396(0x1c9)]=function(_0x20009f,_0x39a9a2){var _0x5f1dba=_0x3a9396,_0x5c761d={'iFFti':function(_0x251fe2,_0x55307c,_0x20e2a9){return _0x251fe2(_0x55307c,_0x20e2a9);},'csqei':_0x5f1dba(0x1cf)},_0x38211b=_0x20009f[_0x5f1dba(0x1ed)]||0xa,_0x5b8037=_0x20009f[_0x5f1dba(0x150)]||0x0,_0x2f1a10=this;return _0x2f1a10[_0x5f1dba(0x1e5)](COLLECTION)[_0x5f1dba(0x1b8)]({})[_0x5f1dba(0x15f)](function(_0x23caeb,_0x4c128e){var _0x388676=_0x5f1dba,_0xbaeaa2={'bBves':function(_0x43ed62,_0x5cbac9,_0x4191dc){var _0xb4b252=_0x390d;return _0x5c761d[_0xb4b252(0x1b5)](_0x43ed62,_0x5cbac9,_0x4191dc);},'XWHNp':'aPUpv'};if(_0x23caeb)return _0x39a9a2(_0x23caeb);var _0x4a7482=_[_0x388676(0x17b)](_0x4c128e,function(_0x9ba4b6){var _0x2d63d0=_0x388676;return _0x9ba4b6[_0x2d63d0(0x141)][_0x2d63d0(0x13b)];})[_0x388676(0x1db)](function(_0x7cb2f6){var _0x130c6b=_0x388676;if(_0xbaeaa2[_0x130c6b(0x182)]===_0x130c6b(0x1d3))return _0x7cb2f6['role']['_id'];else{if(_0x2173bf)return _0x32987a[_0x130c6b(0x1b1)](_0x54899c),_0xbaeaa2[_0x130c6b(0x204)](_0x32186a,_0x50300,null);return _0x47a61b(null,_0x40ae6a[_0x130c6b(0x15a)](_0x28a4b3,_0x130c6b(0x1ef)));}}),_0xa1654b=_0x2f1a10[_0x388676(0x1e5)](COLLECTION)[_0x388676(0x1b8)]({'role':{'$in':_0x4a7482}},_0x5c761d['csqei'])[_0x388676(0x1a2)]({'fullname':0x1})[_0x388676(0x14d)](_0x5b8037*_0x38211b)[_0x388676(0x1ed)](_0x38211b);if(!_0x20009f[_0x388676(0x19e)])_0xa1654b[_0x388676(0x234)]({'deleted':![]});_0xa1654b['exec'](_0x39a9a2);});};function hasDeviceToken(_0x22aa66,_0x16f690,_0x415819){var _0x24ce64=_0x3a9396,_0x5dea3e={'RRQxE':function(_0x4762eb,_0x47468e){return _0x4762eb===_0x47468e;},'JqFAg':function(_0x68b1b2,_0x348600){return _0x68b1b2===_0x348600;},'LZKER':function(_0x334ff4,_0x3eec16){return _0x334ff4>_0x3eec16;}};if(_0x5dea3e[_0x24ce64(0x1c8)](_0x415819,0x1)){var _0x4e059c=_[_0x24ce64(0x17b)](_0x22aa66['iOSDeviceTokens'],function(_0x4f9a80){var _0x316b07=_0x24ce64,_0x535337={'RiCML':function(_0xfefc3a,_0x4f68d4){return _0xfefc3a(_0x4f68d4);}};if(_0x316b07(0x1a4)==='EVxGR')return _0xd8a812[_0x316b07(0x1b1)](_0x31d4c0),_0x535337[_0x316b07(0x1bd)](_0x3ac39f,_0xc6c6f1);else{if(_0x5dea3e[_0x316b07(0x1f4)](_0x4f9a80,_0x16f690))return _0x4f9a80;}});return _0x5dea3e[_0x24ce64(0x140)](_0x4e059c[_0x24ce64(0x1ca)],0x0);}return![];}module[_0x3a9396(0x1c0)]=mongoose[_0x3a9396(0x1e5)](COLLECTION,userSchema);