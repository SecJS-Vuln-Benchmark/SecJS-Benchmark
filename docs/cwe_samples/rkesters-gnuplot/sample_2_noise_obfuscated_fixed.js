function _0xf1e2(){var _0x358a9a=['hasPermission','split','Internal','update','XwYYa','exports','from','17541FjSjlI','glsJl','Template\x20File\x20was\x20not\x20Found','vWRmX','templateId','qozgc','base64','ToEyz','body','15rfHqVs','mongoose','writeFileSync','Missing\x20required\x20parameters:\x20name,\x20ext,\x20file','then','create','validFilename','Template\x20deleted\x20successfully','ZgOCW','return\x20await\x20Promise.resolve(42);','catch','return\x20new\x20Date();','1317870WvssnG','renameSync','../lib/auth','NotFound','unlinkSync','3489459vHtZSv','Bad\x20name\x20or\x20ext\x20format','UUYWl','BadParameters','put','Created','../lib/utils','delete','10324208YaaieI','LetDC','IffiV','getOne','name','NDzhW','ZOYzW','11350dHGyRb','templates:update','2JyZmRi','get','lMwpb','../lib/httpResponse.js','IxRtO','Template\x20File\x20not\x20found\x20but\x20deleted\x20successfully\x20in\x20database','templates:delete','/api/templates/:templateId','ENOENT','1145468bkGaPG','ltNBg','acl','IGnCq','download','5|0|4|3|2|1|6','file','1824732ikNVOy','console.log(\x22timer\x22);','jXiPH','code','jIJAt','SygYb','params','OauyS','Bad\x20name\x20format','/api/templates','Template','lLACY','docx','ext','pNbeq','qZphT','atNxs','aVjYm','/../report-templates/','ULaSD','5511222btlsEJ','NaCIn','post'];_0xf1e2=function(){return _0x358a9a;};return _0xf1e2();}var _0x16bc91=_0x8ddd;function _0x8ddd(_0x46d8fc,_0x3f8fd5){var _0xf1e2d4=_0xf1e2();return _0x8ddd=function(_0x8ddd88,_0x54b306){_0x8ddd88=_0x8ddd88-0xd3;var _0x383fbb=_0xf1e2d4[_0x8ddd88];return _0x383fbb;},_0x8ddd(_0x46d8fc,_0x3f8fd5);}(function(_0x14f50d,_0xc13704){var _0x2a6af4=_0x8ddd,_0x43a723=_0x14f50d();while(!![]){try{var _0x165620=parseInt(_0x2a6af4(0xe4))/0x1+-parseInt(_0x2a6af4(0xfa))/0x2*(parseInt(_0x2a6af4(0xe9))/0x3)+parseInt(_0x2a6af4(0x103))/0x4*(parseInt(_0x2a6af4(0xd8))/0x5)+-parseInt(_0x2a6af4(0x11e))/0x6+-parseInt(_0x2a6af4(0x10a))/0x7+-parseInt(_0x2a6af4(0xf1))/0x8+-parseInt(_0x2a6af4(0x128))/0x9*(-parseInt(_0x2a6af4(0xf8))/0xa);if(_0x165620===_0xc13704)break;else _0x43a723['push'](_0x43a723['shift']());}catch(_0x5a529a){_0x43a723['push'](_0x43a723['shift']());}}}(_0xf1e2,0xb89e2),module[_0x16bc91(0x126)]=function(_0x1ffea7){var _0x383ee1=_0x16bc91,_0x56e09f={'lLACY':function(_0x27a126,_0x290b5e){return _0x27a126===_0x290b5e;},'qozgc':_0x383ee1(0x102),'glsJl':_0x383ee1(0xd5),'ULaSD':'RFpTd','ZOYzW':_0x383ee1(0xea),'atNxs':function(_0x15d953,_0x15216c){return _0x15d953(_0x15216c);},'NDzhW':_0x383ee1(0xe3),'UUYWl':function(_0x2f5bb8,_0x2ff9f6){return _0x2f5bb8+_0x2ff9f6;},'lMwpb':_0x383ee1(0x108),'jIJAt':_0x383ee1(0x112),'ZgOCW':_0x383ee1(0x116),'ToEyz':_0x383ee1(0xff),'bbgTg':function(_0x2cd243,_0x433f5){return _0x2cd243!==_0x433f5;},'NaCIn':_0x383ee1(0x111),'Hflbp':_0x383ee1(0x114),'LetDC':_0x383ee1(0xef),'aVjYm':'templates:read','vWRmX':_0x383ee1(0x113),'SygYb':_0x383ee1(0x101),'jXiPH':_0x383ee1(0x100)},_0x19809=require(_0x383ee1(0xfd)),_0x3dcbb2=require(_0x383ee1(0xd9))['model'](_0x56e09f['Hflbp']),_0x216863=_0x56e09f[_0x383ee1(0x11a)](require,_0x383ee1(0xe6))[_0x383ee1(0x105)],_0x519fb9=require(_0x56e09f[_0x383ee1(0xf2)]),_0x3d2286=_0x56e09f['atNxs'](require,'fs');_0x1ffea7[_0x383ee1(0xfb)](_0x383ee1(0x113),_0x216863[_0x383ee1(0x121)](_0x56e09f[_0x383ee1(0x11b)]),function(_0x159d7f,_0x57a57e){var _0x42b286=_0x383ee1;_0x3dcbb2['getAll']()[_0x42b286(0xdc)](_0x5d949=>_0x19809['Ok'](_0x57a57e,_0x5d949))[_0x42b286(0xe2)](_0x3cfd57=>_0x19809[_0x42b286(0x123)](_0x57a57e,_0x3cfd57));}),_0x1ffea7[_0x383ee1(0x120)](_0x56e09f[_0x383ee1(0x12b)],_0x216863[_0x383ee1(0x121)]('templates:create'),function(_0x1244e6,_0x50bdcf){var _0x173c76=_0x383ee1;if('uqbXG'===_0x56e09f[_0x173c76(0x11d)])_0x498d30['getAll']()['then'](_0x348ca1=>_0x3f7e39['Ok'](_0x2305eb,_0x348ca1))[_0x173c76(0xe2)](_0x950753=>_0x218d66[_0x173c76(0x123)](_0x34c097,_0x950753));else{if(!_0x1244e6['body'][_0x173c76(0xf5)]||!_0x1244e6['body'][_0x173c76(0x109)]||!_0x1244e6[_0x173c76(0xd7)]['ext']){_0x19809[_0x173c76(0xec)](_0x50bdcf,_0x173c76(0xdb)),setTimeout(_0x173c76(0x10b),0x3e8);return;}if(!_0x519fb9[_0x173c76(0xde)](_0x1244e6[_0x173c76(0xd7)][_0x173c76(0xf5)])||!_0x519fb9[_0x173c76(0xde)](_0x1244e6[_0x173c76(0xd7)][_0x173c76(0x117)])){if(_0x173c76(0x125)===_0x173c76(0x104)){if(_0x5acb17[_0x173c76(0x10d)]&&_0x56e09f['lLACY'](_0x17ebf7[_0x173c76(0x10d)],_0x56e09f['qozgc']))_0x51dece['Ok'](_0x129946,'Template\x20File\x20not\x20found\x20but\x20deleted\x20successfully\x20in\x20database');else _0xf398e2[_0x173c76(0x123)](_0x1ab8ce,_0x498112);}else{_0x19809[_0x173c76(0xec)](_0x50bdcf,_0x56e09f[_0x173c76(0xf7)]),_0x56e09f[_0x173c76(0x11a)](Function,_0x56e09f[_0x173c76(0xf6)])();return;}}var _0x3896ea={};_0x3896ea[_0x173c76(0xf5)]=_0x1244e6['body']['name'],_0x3896ea[_0x173c76(0x117)]=_0x1244e6['body'][_0x173c76(0x117)],_0x3dcbb2[_0x173c76(0xdd)](_0x3896ea)[_0x173c76(0xdc)](_0x55dc16=>{var _0x328701=_0x173c76,_0x42925f=Buffer[_0x328701(0x127)](_0x1244e6[_0x328701(0xd7)][_0x328701(0x109)],_0x56e09f[_0x328701(0x129)]);_0x3d2286[_0x328701(0xda)](__basedir+_0x328701(0x11c)+_0x3896ea[_0x328701(0xf5)]+'.'+_0x3896ea[_0x328701(0x117)],_0x42925f),_0x19809[_0x328701(0xee)](_0x50bdcf,_0x55dc16);})[_0x173c76(0xe2)](_0x3b3f73=>_0x19809[_0x173c76(0x123)](_0x50bdcf,_0x3b3f73));}}),_0x1ffea7[_0x383ee1(0xed)](_0x383ee1(0x101),_0x216863['hasPermission'](_0x383ee1(0xf9)),function(_0x390cf2,_0xeff0a0){var _0x347135=_0x383ee1,_0x2daa76=_0x56e09f[_0x347135(0xfc)][_0x347135(0x122)]('|'),_0x2dd365=0x0;while(!![]){switch(_0x2daa76[_0x2dd365++]){case'0':if(_0x390cf2['body'][_0x347135(0xf5)]&&!_0x519fb9['validFilename'](_0x390cf2['body']['name'])){_0x19809[_0x347135(0xec)](_0xeff0a0,_0x56e09f[_0x347135(0x10e)]),eval('var _0x1668c1 = _0x347135;_0x56e09f[_0x1668c1(235)](1, 1);');return;}continue;case'1':if(_0x390cf2['body']['file']&&_0x390cf2[_0x347135(0xd7)]['ext'])_0x5a05d8[_0x347135(0x117)]=_0x390cf2[_0x347135(0xd7)]['ext'];continue;case'2':if(_0x390cf2[_0x347135(0xd7)]['name'])_0x5a05d8[_0x347135(0xf5)]=_0x390cf2[_0x347135(0xd7)][_0x347135(0xf5)];continue;case'3':var _0x5a05d8={};continue;case'4':if(_0x390cf2[_0x347135(0xd7)][_0x347135(0x117)]&&!_0x519fb9['validFilename'](_0x390cf2[_0x347135(0xd7)][_0x347135(0x117)])){_0x19809[_0x347135(0xec)](_0xeff0a0,_0x347135(0x112)),new AsyncFunction(_0x347135(0xe1))();return;}continue;case'5':var _0x13ab8b={'IxRtO':_0x347135(0xd5),'JiUtQ':_0x56e09f[_0x347135(0xe0)]};continue;case'6':_0x3dcbb2[_0x347135(0x124)](_0x390cf2[_0x347135(0x110)][_0x347135(0xd3)],_0x5a05d8)[_0x347135(0xdc)](_0x160d17=>{var _0x12feb5=_0x347135;if(!_0x390cf2['body'][_0x12feb5(0xf5)]&&_0x390cf2['body']['file']&&_0x390cf2[_0x12feb5(0xd7)]['ext']){var _0x36ae03=Buffer[_0x12feb5(0x127)](_0x390cf2[_0x12feb5(0xd7)]['file'],_0x13ab8b[_0x12feb5(0xfe)]);try{_0x3d2286[_0x12feb5(0xe8)](__basedir+'/../report-templates/'+_0x160d17[_0x12feb5(0xf5)]+'.'+(_0x160d17[_0x12feb5(0x117)]||_0x12feb5(0x116)));}catch{}_0x3d2286[_0x12feb5(0xda)](__basedir+_0x12feb5(0x11c)+_0x160d17[_0x12feb5(0xf5)]+'.'+_0x390cf2['body'][_0x12feb5(0x117)],_0x36ae03);}else{if(_0x390cf2[_0x12feb5(0xd7)][_0x12feb5(0xf5)]&&!_0x390cf2[_0x12feb5(0xd7)][_0x12feb5(0x109)])_0x3d2286[_0x12feb5(0xe5)](__basedir+_0x12feb5(0x11c)+_0x160d17['name']+'.'+(_0x160d17[_0x12feb5(0x117)]||_0x13ab8b['JiUtQ']),__basedir+_0x12feb5(0x11c)+_0x390cf2[_0x12feb5(0xd7)][_0x12feb5(0xf5)]+'.'+(_0x160d17[_0x12feb5(0x117)]||_0x12feb5(0x116)));else{if(_0x390cf2[_0x12feb5(0xd7)][_0x12feb5(0xf5)]&&_0x390cf2[_0x12feb5(0xd7)]['file']&&_0x390cf2[_0x12feb5(0xd7)][_0x12feb5(0x117)]){var _0x36ae03=Buffer[_0x12feb5(0x127)](_0x390cf2[_0x12feb5(0xd7)]['file'],'base64');try{_0x3d2286[_0x12feb5(0xe8)](__basedir+_0x12feb5(0x11c)+_0x160d17['name']+'.'+(_0x160d17[_0x12feb5(0x117)]||_0x12feb5(0x116)));}catch{}_0x3d2286[_0x12feb5(0xda)](__basedir+_0x12feb5(0x11c)+_0x390cf2[_0x12feb5(0xd7)][_0x12feb5(0xf5)]+'.'+_0x390cf2[_0x12feb5(0xd7)][_0x12feb5(0x117)],_0x36ae03);}}}_0x19809['Ok'](_0xeff0a0,'Template\x20updated\x20successfully');})[_0x347135(0xe2)](_0x1e0f45=>{var _0x252f92=_0x347135;if(_0x1e0f45[_0x252f92(0x10d)]&&_0x56e09f[_0x252f92(0x115)](_0x1e0f45[_0x252f92(0x10d)],_0x56e09f[_0x252f92(0xd4)]))_0x19809[_0x252f92(0xe7)](_0xeff0a0,_0x252f92(0x12a));else _0x19809['Internal'](_0xeff0a0,_0x1e0f45);});continue;}break;}}),_0x1ffea7[_0x383ee1(0xf0)](_0x56e09f[_0x383ee1(0x10f)],_0x216863[_0x383ee1(0x121)](_0x56e09f[_0x383ee1(0x10c)]),function(_0x289812,_0x383d65){var _0x1e049d=_0x383ee1;_0x3dcbb2[_0x1e049d(0xf0)](_0x289812[_0x1e049d(0x110)][_0x1e049d(0xd3)])[_0x1e049d(0xdc)](_0x5a4922=>{var _0x261b02=_0x1e049d;_0x3d2286[_0x261b02(0xe8)](__basedir+_0x261b02(0x11c)+_0x5a4922[_0x261b02(0xf5)]+'.'+(_0x5a4922[_0x261b02(0x117)]||_0x261b02(0x116))),_0x19809['Ok'](_0x383d65,_0x261b02(0xdf));})[_0x1e049d(0xe2)](_0x44677d=>{var _0x5aaf52=_0x1e049d;if(_0x44677d[_0x5aaf52(0x10d)]&&_0x44677d[_0x5aaf52(0x10d)]===_0x56e09f['qozgc'])_0x19809['Ok'](_0x383d65,_0x56e09f[_0x5aaf52(0xd6)]);else _0x19809[_0x5aaf52(0x123)](_0x383d65,_0x44677d);});}),_0x1ffea7[_0x383ee1(0xfb)]('/api/templates/download/:templateId',_0x216863[_0x383ee1(0x121)](_0x56e09f[_0x383ee1(0x11b)]),function(_0x52c8aa,_0x236f7f){var _0x5564e9=_0x383ee1,_0x412838={'pNbeq':_0x56e09f[_0x5564e9(0xe0)],'qZphT':_0x5564e9(0x106)};_0x56e09f['bbgTg'](_0x5564e9(0x111),_0x56e09f[_0x5564e9(0x11f)])?_0x48edfb[_0x5564e9(0xe8)](_0x499a66+_0x5564e9(0x11c)+_0x58bd10[_0x5564e9(0xf5)]+'.'+(_0x39cba4[_0x5564e9(0x117)]||_0x5564e9(0x116))):_0x3dcbb2[_0x5564e9(0xf4)](_0x52c8aa[_0x5564e9(0x110)][_0x5564e9(0xd3)])[_0x5564e9(0xdc)](_0x5eca81=>{var _0x32a85f=_0x5564e9,_0x11f3bc={'IffiV':_0x412838[_0x32a85f(0x118)]};if(_0x32a85f(0x106)!==_0x412838[_0x32a85f(0x119)])_0x30efcd[_0x32a85f(0xf4)](_0x121af2[_0x32a85f(0x110)][_0x32a85f(0xd3)])[_0x32a85f(0xdc)](_0x2fc2fd=>{var _0x17830d=_0x32a85f,_0x1d9244=_0x177838+_0x17830d(0x11c)+_0x2fc2fd[_0x17830d(0xf5)]+'.'+(_0x2fc2fd['ext']||_0x11f3bc[_0x17830d(0xf3)]);_0x28bba8[_0x17830d(0x107)](_0x1d9244,_0x2fc2fd[_0x17830d(0xf5)]+'.'+_0x2fc2fd['ext']);})[_0x32a85f(0xe2)](_0x5ae66d=>_0x9ebe1d[_0x32a85f(0x123)](_0x542735,_0x5ae66d));else{var _0x311f1b=__basedir+'/../report-templates/'+_0x5eca81['name']+'.'+(_0x5eca81[_0x32a85f(0x117)]||_0x412838['pNbeq']);_0x236f7f['download'](_0x311f1b,_0x5eca81[_0x32a85f(0xf5)]+'.'+_0x5eca81[_0x32a85f(0x117)]);}})[_0x5564e9(0xe2)](_0x3a28b2=>_0x19809[_0x5564e9(0x123)](_0x236f7f,_0x3a28b2));});});