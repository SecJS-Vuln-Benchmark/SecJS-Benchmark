const _0x26ab73=_0x4bde;(function(_0x5c2f3b,_0x3db9fb){const _0xfe3c85=_0x4bde,_0x4c0be1=_0x5c2f3b();while(!![]){try{const _0x3352bd=parseInt(_0xfe3c85(0xb5))/0x1*(parseInt(_0xfe3c85(0xc9))/0x2)+parseInt(_0xfe3c85(0xb7))/0x3+-parseInt(_0xfe3c85(0xfa))/0x4+-parseInt(_0xfe3c85(0xf8))/0x5*(-parseInt(_0xfe3c85(0xe7))/0x6)+-parseInt(_0xfe3c85(0xec))/0x7+-parseInt(_0xfe3c85(0xf3))/0x8*(parseInt(_0xfe3c85(0xc4))/0x9)+parseInt(_0xfe3c85(0xcc))/0xa*(parseInt(_0xfe3c85(0xbb))/0xb);if(_0x3352bd===_0x3db9fb)break;else _0x4c0be1['push'](_0x4c0be1['shift']());}catch(_0x55c59b){_0x4c0be1['push'](_0x4c0be1['shift']());}}}(_0x511e,0x19d66));const express=require(_0x26ab73(0xf7)),cb=require('cb'),createError=require(_0x26ab73(0xbd)),debug=require(_0x26ab73(0xe8))(_0x26ab73(0xca)),{get:getConfig}=require(_0x26ab73(0xe1)),{get:getClient}=require(_0x26ab73(0xe9)),{requiresAuth}=require(_0x26ab73(0xe4)),attemptSilentLogin=require(_0x26ab73(0xf5)),TransientCookieHandler=require(_0x26ab73(0xde)),{RequestContext,ResponseContext}=require(_0x26ab73(0xf6)),appSession=require('../lib/appSession'),{regenerateSessionStoreId,replaceSession}=appSession,{decodeState}=require(_0x26ab73(0xfc)),enforceLeadingSlash=_0x69e4c0=>{const _0x4f331d=_0x26ab73,_0x7f2701={'Vskbk':function(_0x526d57,_0x44cf0){return _0x526d57===_0x44cf0;}};return _0x7f2701[_0x4f331d(0xed)](_0x69e4c0[_0x4f331d(0xb6)]('')[0x0],'/')?_0x69e4c0:'/'+_0x69e4c0;},auth=function(_0x2dbba8){const _0x9ba1d7=_0x26ab73,_0x53a8e0={'dtTYm':function(_0xf7569c,_0x17b89f,_0x4c6373,_0x27b973){return _0xf7569c(_0x17b89f,_0x4c6373,_0x27b973);},'yvlKi':_0x9ba1d7(0xdb),'tJsAD':function(_0x3e2b44,_0x7560db){return _0x3e2b44(_0x7560db);},'KuKxL':function(_0x245470,_0x3c024e){return _0x245470(_0x3c024e);},'glFBO':function(_0x2aae11,_0x55a9fc){return _0x2aae11(_0x55a9fc);},'waztN':function(_0x246081,_0x46360e){return _0x246081(_0x46360e);},'cCvKL':_0x9ba1d7(0xd7),'ldfqT':function(_0x9cfba1,_0x25cd4e,_0x9d07cb){return _0x9cfba1(_0x25cd4e,_0x9d07cb);},'UVUyb':function(_0x4444d2){return _0x4444d2();},'dEAIR':_0x9ba1d7(0xda),'zOkqE':_0x9ba1d7(0xd0),'XowqI':function(_0x4ef293,_0x35d52a,_0x29729c){return _0x4ef293(_0x35d52a,_0x29729c);},'UAJlX':_0x9ba1d7(0xdf),'lhvMl':_0x9ba1d7(0xce)},_0x5441a5=_0x53a8e0['tJsAD'](getConfig,_0x2dbba8);_0x53a8e0[_0x9ba1d7(0xd1)](debug,_0x53a8e0[_0x9ba1d7(0xb3)],_0x5441a5);const _0x57e173=new express[(_0x9ba1d7(0xbf))](),_0x2a5e6b=new TransientCookieHandler(_0x5441a5);_0x57e173[_0x9ba1d7(0xfb)](_0x53a8e0[_0x9ba1d7(0xe0)](appSession,_0x5441a5)),_0x57e173[_0x9ba1d7(0xfb)](async(_0x3eaf64,_0x28854d,_0x3743e8)=>{const _0x58351f=_0x9ba1d7;if(_0x58351f(0xbc)!=='OWxyv')return;else _0x3eaf64[_0x58351f(0xf2)]=new RequestContext(_0x5441a5,_0x3eaf64,_0x28854d,_0x3743e8),_0x28854d['oidc']=new ResponseContext(_0x5441a5,_0x3eaf64,_0x28854d,_0x3743e8,_0x2a5e6b),_0x3743e8();});if(_0x5441a5[_0x9ba1d7(0xee)][_0x9ba1d7(0xeb)]){const _0x16f025=_0x53a8e0[_0x9ba1d7(0xc2)](enforceLeadingSlash,_0x5441a5['routes'][_0x9ba1d7(0xeb)]);debug(_0x9ba1d7(0xdf),_0x16f025),_0x57e173['get'](_0x16f025,express[_0x9ba1d7(0xf0)]({'extended':![]}),(_0x19aea9,_0xdb63d1)=>_0xdb63d1[_0x9ba1d7(0xf2)]['login']({'returnTo':_0x5441a5[_0x9ba1d7(0xd9)]}));}else debug(_0x53a8e0['zOkqE']);if(_0x5441a5[_0x9ba1d7(0xee)][_0x9ba1d7(0xc6)]){const _0xc52a42=enforceLeadingSlash(_0x5441a5[_0x9ba1d7(0xee)][_0x9ba1d7(0xc6)]);_0x53a8e0['XowqI'](debug,_0x53a8e0[_0x9ba1d7(0xf4)],_0xc52a42),_0x57e173[_0x9ba1d7(0xdc)](_0xc52a42,(_0x21436a,_0x1124bf)=>_0x1124bf[_0x9ba1d7(0xf2)]['logout']());}else debug(_0x9ba1d7(0xbe));{let _0x1f7b17;const _0x574a1e=_0x53a8e0[_0x9ba1d7(0xc5)](enforceLeadingSlash,_0x5441a5[_0x9ba1d7(0xee)][_0x9ba1d7(0xe6)]),_0x2a4f97=[(_0x59a2a7,_0x51ce8f,_0x49b225)=>{const _0x321372=_0x9ba1d7;_0x53a8e0[_0x321372(0xea)](debug,_0x53a8e0['yvlKi'],_0x59a2a7['method'],_0x574a1e),_0x49b225();},async(_0x3c4a41,_0x60af78,_0x5e350d)=>{const _0x30013d=_0x9ba1d7;_0x5e350d=cb(_0x5e350d)[_0x30013d(0xdd)](),_0x1f7b17=_0x1f7b17||await _0x53a8e0[_0x30013d(0xc5)](getClient,_0x5441a5)[_0x30013d(0xb9)](_0x4652dd=>{const _0x3e8257=_0x30013d;_0x53a8e0[_0x3e8257(0xe0)](_0x5e350d,_0x4652dd);});if(!_0x1f7b17)return;try{const _0x1ac4bb=_0x60af78['oidc'][_0x30013d(0xd2)]();let _0x289be5;try{const _0x77bd72=_0x1f7b17[_0x30013d(0xf9)](_0x3c4a41),_0x5ae235=_0x2a5e6b['getOnce'](_0x30013d(0xd6),_0x3c4a41,_0x60af78),{max_age:_0x5f2644,code_verifier:_0x1e631d,nonce:_0x690470,state:_0xbcea33}=_0x5ae235?JSON['parse'](_0x5ae235):{};_0x3c4a41[_0x30013d(0xd5)]=_0x53a8e0[_0x30013d(0xc2)](decodeState,_0xbcea33);const _0x1dbadf={'max_age':_0x5f2644,'code_verifier':_0x1e631d,'nonce':_0x690470,'state':_0xbcea33};let _0x28e3e1;_0x5441a5[_0x30013d(0xf1)]&&(_0x28e3e1={'exchangeBody':_0x5441a5[_0x30013d(0xf1)]}),_0x289be5=await _0x1f7b17[_0x30013d(0xe6)](_0x1ac4bb,_0x77bd72,_0x1dbadf,_0x28e3e1);}catch(_0x2e78ad){throw createError[_0x30013d(0xcf)](_0x2e78ad[_0x30013d(0xcd)]);}let _0x2cd379=Object['assign']({},_0x289be5);_0x5441a5['afterCallback']&&(_0x2cd379=await _0x5441a5[_0x30013d(0xb8)](_0x3c4a41,_0x60af78,_0x2cd379,_0x3c4a41[_0x30013d(0xd5)])),_0x3c4a41[_0x30013d(0xf2)][_0x30013d(0xcb)]()?_0x30013d(0xd7)===_0x53a8e0[_0x30013d(0xd8)]?_0x3c4a41[_0x30013d(0xf2)][_0x30013d(0xb1)]['sub']===_0x289be5[_0x30013d(0xc3)]()[_0x30013d(0xe3)]?Object[_0x30013d(0xd4)](_0x3c4a41[_0x5441a5['session'][_0x30013d(0xe2)]],_0x2cd379):(replaceSession(_0x3c4a41,_0x2cd379,_0x5441a5),_0x53a8e0['ldfqT'](regenerateSessionStoreId,_0x3c4a41,_0x5441a5)):_0x53a8e0[_0x30013d(0xfd)](_0x4eec22,'login\x20handling\x20route\x20not\x20applied'):(Object[_0x30013d(0xd4)](_0x3c4a41[_0x5441a5['session'][_0x30013d(0xe2)]],_0x2cd379),regenerateSessionStoreId(_0x3c4a41,_0x5441a5)),attemptSilentLogin['resumeSilentLogin'](_0x3c4a41,_0x60af78),_0x53a8e0['UVUyb'](_0x5e350d);}catch(_0x227c28){_0x3c4a41[_0x30013d(0xd5)]&&_0x3c4a41['openidState']['attemptingSilentLogin']?_0x5e350d():_0x5e350d(_0x227c28);}},(_0x51b135,_0x2da305)=>_0x2da305[_0x9ba1d7(0xc0)](_0x51b135[_0x9ba1d7(0xd5)][_0x9ba1d7(0xb2)]||_0x5441a5[_0x9ba1d7(0xd9)])];_0x53a8e0[_0x9ba1d7(0xd1)](debug,_0x53a8e0[_0x9ba1d7(0xf4)],_0x574a1e),_0x57e173['get'](_0x574a1e,..._0x2a4f97),debug(_0x9ba1d7(0xba),_0x574a1e),_0x57e173[_0x9ba1d7(0xef)](_0x574a1e,express[_0x9ba1d7(0xf0)]({'extended':![]}),..._0x2a4f97);}return _0x5441a5['authRequired']?(debug(_0x9ba1d7(0xc8)),_0x57e173[_0x9ba1d7(0xfb)](requiresAuth())):_0x53a8e0[_0x9ba1d7(0xe0)](debug,_0x53a8e0[_0x9ba1d7(0xc7)]+_0x9ba1d7(0xe5)),_0x5441a5[_0x9ba1d7(0xb4)]&&(debug(_0x9ba1d7(0xd3)),_0x57e173[_0x9ba1d7(0xfb)](attemptSilentLogin())),_0x57e173;};function _0x511e(){const _0x551c19=['Vskbk','routes','post','urlencoded','tokenEndpointParams','oidc','5296uOgKYV','UAJlX','./attemptSilentLogin','../lib/context','express','5cnZlWl','callbackParams','367356sTSNHd','use','../lib/hooks/getLoginState','KuKxL','user','returnTo','dEAIR','attemptSilentLogin','1rClfyV','split','294237AWGWzY','afterCallback','catch','adding\x20POST\x20%s\x20route','22781HqbxMb','OWxyv','http-errors','logout\x20handling\x20route\x20not\x20applied','Router','redirect','Store','waztN','claims','2313AyoaRe','glFBO','logout','lhvMl','authentication\x20is\x20required\x20for\x20all\x20routes\x20this\x20middleware\x20is\x20applied\x20to','306442yeHvcc','auth','isAuthenticated','470ppEXGf','message','authentication\x20is\x20not\x20required\x20for\x20any\x20of\x20the\x20routes\x20this\x20middleware\x20is\x20applied\x20to\x20','BadRequest','login\x20handling\x20route\x20not\x20applied','ldfqT','getRedirectUri','silent\x20login\x20will\x20be\x20attempted\x20on\x20end-user\x27s\x20initial\x20HTML\x20request','assign','openidState','auth_verification','mRUVg','cCvKL','baseURL','configuration\x20object\x20processed,\x20resulting\x20configuration:\x20%O','%s\x20%s\x20called','get','once','../lib/transientHandler','adding\x20GET\x20%s\x20route','tJsAD','../lib/config','name','sub','./requiresAuth','see\x20and\x20apply\x20`requiresAuth`\x20middlewares\x20to\x20your\x20protected\x20resources','callback','999246VNUqJp','../lib/debug','../lib/client','dtTYm','login','1031625Swobay'];_0x511e=function(){return _0x551c19;};return _0x511e();}function _0x4bde(_0x583c92,_0x1bbd1c){const _0x511ebc=_0x511e();return _0x4bde=function(_0x4bde4f,_0x23052c){_0x4bde4f=_0x4bde4f-0xb1;let _0x5e04fb=_0x511ebc[_0x4bde4f];return _0x5e04fb;},_0x4bde(_0x583c92,_0x1bbd1c);}auth[_0x26ab73(0xc1)]=function(){},module['exports']=auth;