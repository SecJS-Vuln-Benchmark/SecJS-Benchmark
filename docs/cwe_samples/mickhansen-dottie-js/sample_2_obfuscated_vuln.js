const _0x3de7b7=_0xa21b;(function(_0x2304be,_0x3bc4f9){const _0x46083d=_0xa21b,_0x4b6856=_0x2304be();while(!![]){try{const _0x4826b1=parseInt(_0x46083d(0x195))/0x1+parseInt(_0x46083d(0x18d))/0x2*(parseInt(_0x46083d(0x17c))/0x3)+-parseInt(_0x46083d(0x180))/0x4+parseInt(_0x46083d(0x1a8))/0x5+-parseInt(_0x46083d(0x1ae))/0x6*(-parseInt(_0x46083d(0x197))/0x7)+parseInt(_0x46083d(0x16c))/0x8*(parseInt(_0x46083d(0x19f))/0x9)+-parseInt(_0x46083d(0x18c))/0xa*(parseInt(_0x46083d(0x171))/0xb);if(_0x4826b1===_0x3bc4f9)break;else _0x4b6856['push'](_0x4b6856['shift']());}catch(_0x3e0b67){_0x4b6856['push'](_0x4b6856['shift']());}}}(_0x490d,0x78c0f));import{REFERENCE_RELATION}from'matrix-events-sdk';function _0xa21b(_0x4e2933,_0x4824da){const _0x490d6d=_0x490d();return _0xa21b=function(_0xa21bba,_0x51c1a7){_0xa21bba=_0xa21bba-0x16a;let _0x2f288a=_0x490d6d[_0xa21bba];return _0x2f288a;},_0xa21b(_0x4e2933,_0x4824da);}import{LocationAssetType,M_ASSET,M_LOCATION,M_TIMESTAMP}from'../../src/@types/location';import{M_TOPIC}from'../../src/@types/topic';import{makeBeaconContent,makeBeaconInfoContent,makeTopicContent,parseTopicContent}from'../../src/content-helpers';function _0x490d(){const _0x473aae=['gTeAH','parseTopicContent()','owrps','gggcF','itaHe','VIgAZ','AYfWF','VFkMJ','4577785XTcUHJ','VuPpq','makeBeaconContent()','rrHsZ','text/plain','oqANA','704382EmDEry','lIcrv','PIkLk','AlzMy','ueXeu','makeTopicContent()','name','jvAdF','$1234','YZUiS','gziay','1942864qsbtrh','bxMTJ','BjcGp','spyOn','mFofK','14774782QDLfBT','pizza','ysMNn','toEqual','Self','fVmVn','YeDuf','ihbUm','Date','WVFpC','makeBeaconInfoContent()','161901hkylCD','QobCC','geo:foo','Pin','1623892CPdciH','EJnDn','UxwCy','CrSje','test\x20description','OQmyH','creates\x20event\x20content\x20with\x20description','YfWtN','mockRestore','defaults\x20asset\x20type\x20to\x20self\x20when\x20not\x20set','creates\x20event\x20content\x20without\x20description','creates\x20fully\x20defined\x20event\x20content\x20without\x20html','10UfDzNc','4rvXKCu','text/html','DZAOs','Topic\x20content\x20helpers','objectContaining','XVCnY','oNhzG','KzJIf','859996GXExjv','Viglp','7kDNoip','now','aGaMY','yKJUJ','qcAhA','<b>pizza</b>','qwIdU','nice\x20beacon_info','9yLwPXk'];_0x490d=function(){return _0x473aae;};return _0x490d();}describe('Beacon\x20content\x20helpers',()=>{const _0x3ce7a5=_0xa21b,_0x153707={'biKcm':'now','TnAFV':_0x3ce7a5(0x1a3),'fVmVn':function(_0xdcce3c,_0x257d8b,_0x3dc37f,_0x4c378c,_0x2226cd,_0x1cdb1c){return _0xdcce3c(_0x257d8b,_0x3dc37f,_0x4c378c,_0x2226cd,_0x1cdb1c);},'oqANA':function(_0x2bc9c4,_0x1407de){return _0x2bc9c4(_0x1407de);},'FtpgI':'nice\x20beacon_info','lIcrv':'defaults\x20timestamp\x20to\x20current\x20time','AlzMy':function(_0x570e27,_0x203b73,_0xc63491){return _0x570e27(_0x203b73,_0xc63491);},'bxMTJ':'uses\x20timestamp\x20when\x20provided','EJnDn':function(_0x4704cc,_0x102c5f,_0x326e81){return _0x4704cc(_0x102c5f,_0x326e81);},'BjcGp':function(_0x2ce123,_0x1b7f83){return _0x2ce123(_0x1b7f83);},'QobCC':_0x3ce7a5(0x17e),'Viglp':_0x3ce7a5(0x1b6),'YeDuf':function(_0x1a44fb,_0x1de49e,_0x177627,_0x1b2500){return _0x1a44fb(_0x1de49e,_0x177627,_0x1b2500);},'rrHsZ':_0x3ce7a5(0x186),'aGaMY':function(_0x4b9d49,_0x5bd51e,_0x10001c){return _0x4b9d49(_0x5bd51e,_0x10001c);},'yKJUJ':_0x3ce7a5(0x17b)};_0x153707[_0x3ce7a5(0x199)](describe,_0x153707[_0x3ce7a5(0x19a)],()=>{const _0x3eab22=_0x3ce7a5,_0x4697db={'AYfWF':_0x3eab22(0x198),'ihbUm':function(_0x3b2f4c,_0x327ba1){const _0x2fd6b6=_0x3eab22;return _0x153707[_0x2fd6b6(0x1ad)](_0x3b2f4c,_0x327ba1);},'VFkMJ':function(_0x550897,_0x1584b0){return _0x550897(_0x1584b0);},'PDhAE':function(_0x1ee9cc,_0x1ed83f,_0x354460,_0x591f1c,_0x5d9a20){return _0x1ee9cc(_0x1ed83f,_0x354460,_0x591f1c,_0x5d9a20);},'OQmyH':_0x153707['FtpgI']},_0x37c48e=0x75bcd15;beforeEach(()=>{const _0x837fa1=_0x3eab22;jest[_0x837fa1(0x16f)](global[_0x837fa1(0x179)],_0x153707['biKcm'])['mockReturnValue'](_0x37c48e);}),afterAll(()=>{const _0x1d1826=_0x3eab22;jest[_0x1d1826(0x16f)](global['Date'],_0x4697db[_0x1d1826(0x1a6)])[_0x1d1826(0x188)]();}),it('create\x20fully\x20defined\x20event\x20content',()=>{const _0x2eb23a=_0x3eab22;_0x4697db[_0x2eb23a(0x178)](expect,makeBeaconInfoContent(0x4d2,!![],_0x2eb23a(0x19e),LocationAssetType['Pin']))['toEqual']({'description':_0x2eb23a(0x19e),'timeout':0x4d2,'live':!![],[M_TIMESTAMP[_0x2eb23a(0x1b4)]]:_0x37c48e,[M_ASSET[_0x2eb23a(0x1b4)]]:{'type':LocationAssetType[_0x2eb23a(0x17f)]}});}),it(_0x153707[_0x3eab22(0x1af)],()=>{const _0x1c79fc=_0x3eab22;_0x4697db[_0x1c79fc(0x1a7)](expect,_0x4697db['PDhAE'](makeBeaconInfoContent,0x4d2,!![],_0x4697db[_0x1c79fc(0x185)],LocationAssetType['Pin']))['toEqual'](expect[_0x1c79fc(0x191)]({[M_TIMESTAMP[_0x1c79fc(0x1b4)]]:_0x37c48e}));}),_0x153707['AlzMy'](it,_0x153707[_0x3eab22(0x16d)],()=>{const _0x123404=_0x3eab22,_0x40685f={'itaHe':function(_0x2eaecc,_0x2228c9){return _0x2eaecc(_0x2228c9);},'jbWHw':_0x123404(0x19e)};_0x153707['TnAFV']===_0x123404(0x1a3)?expect(_0x153707[_0x123404(0x176)](makeBeaconInfoContent,0x4d2,!![],'nice\x20beacon_info',LocationAssetType[_0x123404(0x17f)],0x1869f))[_0x123404(0x174)](expect[_0x123404(0x191)]({[M_TIMESTAMP['name']]:0x1869f})):_0x40685f[_0x123404(0x1a4)](_0x3e0e5e,_0x478ad5(0x4d2,!![],_0x123404(0x19e),_0x36b2fb[_0x123404(0x17f)]))[_0x123404(0x174)]({'description':_0x40685f['jbWHw'],'timeout':0x4d2,'live':!![],[_0x456cbf['name']]:_0x49bbfb,[_0xf3ab1a[_0x123404(0x1b4)]]:{'type':_0x4b104c['Pin']}});}),_0x153707[_0x3eab22(0x181)](it,_0x3eab22(0x189),()=>{const _0x149261=_0x3eab22;expect(makeBeaconInfoContent(0x4d2,!![],_0x4697db[_0x149261(0x185)]))[_0x149261(0x174)](expect[_0x149261(0x191)]({[M_ASSET[_0x149261(0x1b4)]]:{'type':LocationAssetType[_0x149261(0x175)]}}));});}),describe(_0x3ce7a5(0x1aa),()=>{const _0x206e47=_0x3ce7a5,_0x211aab={'jvAdF':function(_0xd8a6d0,_0x5bae74,_0x423bdc,_0x5beacf){const _0x1df9de=_0xa21b;return _0x153707[_0x1df9de(0x177)](_0xd8a6d0,_0x5bae74,_0x423bdc,_0x5beacf);},'qwIdU':'$1234'};_0x153707['AlzMy'](it,_0x206e47(0x18a),()=>{const _0x423628=_0x206e47;expect(_0x211aab[_0x423628(0x1b5)](makeBeaconContent,_0x423628(0x17e),0x7b,_0x211aab[_0x423628(0x19d)]))[_0x423628(0x174)]({[M_LOCATION[_0x423628(0x1b4)]]:{'description':undefined,'uri':'geo:foo'},[M_TIMESTAMP[_0x423628(0x1b4)]]:0x7b,'m.relates_to':{'rel_type':REFERENCE_RELATION[_0x423628(0x1b4)],'event_id':_0x423628(0x1b6)}});}),_0x153707[_0x206e47(0x1b1)](it,_0x153707[_0x206e47(0x1ab)],()=>{const _0x434158=_0x206e47;_0x153707[_0x434158(0x16e)](expect,makeBeaconContent(_0x153707[_0x434158(0x17d)],0x7b,_0x434158(0x1b6),'test\x20description'))[_0x434158(0x174)]({[M_LOCATION['name']]:{'description':_0x434158(0x184),'uri':_0x434158(0x17e)},[M_TIMESTAMP[_0x434158(0x1b4)]]:0x7b,'m.relates_to':{'rel_type':REFERENCE_RELATION[_0x434158(0x1b4)],'event_id':_0x153707[_0x434158(0x196)]}});});});}),describe(_0x3de7b7(0x190),()=>{const _0x4bdca8=_0x3de7b7,_0x39e316={'VuPpq':function(_0x300306,_0x29c182,_0x5cae6a,_0x16d342,_0x20965c){return _0x300306(_0x29c182,_0x5cae6a,_0x16d342,_0x20965c);},'KzJIf':function(_0x59b246,_0x494487){return _0x59b246(_0x494487);},'owrps':_0x4bdca8(0x172),'hblhO':_0x4bdca8(0x18e),'YfWtN':_0x4bdca8(0x182),'CrSje':function(_0x2e1e8c,_0xce3f51,_0x3604a3){return _0x2e1e8c(_0xce3f51,_0x3604a3);},'oNhzG':_0x4bdca8(0x18b),'UBPYZ':'creates\x20fully\x20defined\x20event\x20content\x20with\x20html','gTeAH':function(_0xc7133b,_0x208084){return _0xc7133b(_0x208084);},'ueXeu':'text/plain','CWotX':_0x4bdca8(0x19c),'PIkLk':function(_0x5b3823,_0xbe0e0e,_0x32cdb1){return _0x5b3823(_0xbe0e0e,_0x32cdb1);},'ZHNKS':'parses\x20event\x20content\x20with\x20plain\x20text\x20topic','Oyrpy':'parses\x20event\x20content\x20with\x20html\x20topic','ysMNn':_0x4bdca8(0x1a1)};_0x39e316[_0x4bdca8(0x1b0)](describe,_0x4bdca8(0x1b3),()=>{const _0x295cf3=_0x4bdca8,_0x222ba7={'DZAOs':function(_0x28b9a3,_0xcb3e71){const _0x22b409=_0xa21b;return _0x39e316[_0x22b409(0x194)](_0x28b9a3,_0xcb3e71);},'XVCnY':_0x39e316[_0x295cf3(0x1a2)],'YZUiS':_0x39e316['hblhO']};_0x295cf3(0x170)===_0x39e316[_0x295cf3(0x187)]?_0x147e1b(_0x39e316[_0x295cf3(0x1a9)](_0x3d52d6,0x4d2,!![],_0x295cf3(0x19e),_0x2ffe35[_0x295cf3(0x17f)]))['toEqual'](_0x42b8f1[_0x295cf3(0x191)]({[_0x26fd0d[_0x295cf3(0x1b4)]]:_0x420fee})):(_0x39e316[_0x295cf3(0x183)](it,_0x39e316[_0x295cf3(0x193)],()=>{const _0x2db208=_0x295cf3;expect(_0x222ba7[_0x2db208(0x18f)](makeTopicContent,_0x222ba7[_0x2db208(0x192)]))[_0x2db208(0x174)]({'topic':_0x2db208(0x172),[M_TOPIC[_0x2db208(0x1b4)]]:[{'body':_0x222ba7['XVCnY'],'mimetype':_0x2db208(0x1ac)}]});}),it(_0x39e316['UBPYZ'],()=>{const _0x93a14c=_0x295cf3;_0x222ba7[_0x93a14c(0x18f)](expect,makeTopicContent(_0x222ba7['XVCnY'],_0x93a14c(0x19c)))[_0x93a14c(0x174)]({'topic':_0x93a14c(0x172),[M_TOPIC[_0x93a14c(0x1b4)]]:[{'body':_0x93a14c(0x172),'mimetype':'text/plain'},{'body':'<b>pizza</b>','mimetype':_0x222ba7[_0x93a14c(0x16a)]}]});}));}),describe(_0x39e316[_0x4bdca8(0x173)],()=>{const _0x5d9d45=_0x4bdca8,_0x139b61={'WVFpC':function(_0x42a8b9,_0x124d8b){return _0x39e316['gTeAH'](_0x42a8b9,_0x124d8b);},'qcAhA':_0x5d9d45(0x172),'wsUYp':function(_0x45ff7d,_0x2aabb4){return _0x39e316['gTeAH'](_0x45ff7d,_0x2aabb4);},'VIgAZ':_0x39e316['CWotX'],'gziay':_0x39e316['hblhO']};_0x39e316['PIkLk'](it,'parses\x20event\x20content\x20with\x20plain\x20text\x20topic\x20without\x20mimetype',()=>{const _0xc056bf=_0x5d9d45;_0x139b61[_0xc056bf(0x17a)](expect,_0x139b61[_0xc056bf(0x17a)](parseTopicContent,{'topic':_0x139b61['qcAhA'],[M_TOPIC[_0xc056bf(0x1b4)]]:[{'body':_0xc056bf(0x172)}]}))[_0xc056bf(0x174)]({'text':_0x139b61['qcAhA']});}),it(_0x39e316['ZHNKS'],()=>{const _0x3c6cbc=_0x5d9d45;_0x39e316[_0x3c6cbc(0x1a0)](expect,_0x39e316['gTeAH'](parseTopicContent,{'topic':'pizza',[M_TOPIC[_0x3c6cbc(0x1b4)]]:[{'body':'pizza','mimetype':_0x39e316[_0x3c6cbc(0x1b2)]}]}))[_0x3c6cbc(0x174)]({'text':_0x3c6cbc(0x172)});}),it(_0x39e316['Oyrpy'],()=>{const _0x3012dc=_0x5d9d45;_0x139b61['wsUYp'](expect,_0x139b61[_0x3012dc(0x17a)](parseTopicContent,{'topic':_0x139b61[_0x3012dc(0x19b)],[M_TOPIC[_0x3012dc(0x1b4)]]:[{'body':_0x139b61[_0x3012dc(0x1a5)],'mimetype':_0x139b61[_0x3012dc(0x16b)]}]}))[_0x3012dc(0x174)]({'text':_0x3012dc(0x172),'html':_0x3012dc(0x19c)});});});});