const _0x41f719=_0x5b18;(function(_0x574870,_0x509b9a){const _0xe11d11=_0x5b18,_0x1fd355=_0x574870();while(!![]){try{const _0x15df04=-parseInt(_0xe11d11(0x176))/0x1*(-parseInt(_0xe11d11(0x1d6))/0x2)+parseInt(_0xe11d11(0x1bf))/0x3+-parseInt(_0xe11d11(0x17d))/0x4+-parseInt(_0xe11d11(0xdc))/0x5+parseInt(_0xe11d11(0x1a7))/0x6*(parseInt(_0xe11d11(0x150))/0x7)+-parseInt(_0xe11d11(0x11b))/0x8*(-parseInt(_0xe11d11(0x192))/0x9)+-parseInt(_0xe11d11(0x10c))/0xa*(-parseInt(_0xe11d11(0x1e3))/0xb);if(_0x15df04===_0x509b9a)break;else _0x1fd355['push'](_0x1fd355['shift']());}catch(_0x98ec63){_0x1fd355['push'](_0x1fd355['shift']());}}}(_0x3091,0xe47d1));function _0x3091(){const _0x1a2888=['open','decode','1006416dKOWCo','maxPreviewSize','Forbidden','Unauthorized','CZRqV','acceptsLanguages','tus\x20meta\x20prop\x20missing:\x20name','lang.json','Upload\x20already\x20completed','IfHKw','Bucket\x20exceeds\x20maximum\x20upload\x20size\x20','keys','name','.zip','GET','fid','tus\x20meta\x20prop\x20missing:\x20retention','AfuJu','HcciO','IscaL','header','Cache-control','tBvWJ','151526wkpOBL','https://','crypto-js/md5','message','createdAt','assets','XKuXQ','size','createReadStream','\x20not\x20in\x20[','xnhrF','../config','split','22TnSBjj','dPUHi','sWOqG','7910605eczDcx','console.log(\x22timer\x22);','getFrontendConfig','entry','translations','attachment;\x20filename=\x22','express','exports','append','return\x20Object.keys({a:1});','cIphC','\x20name=','POST','./tusboy/tus-metadata','RgrEs','CworC','wKhci','config.json','jDJxU','jGWRT','http-errors','log','uploadDir','json','updateClock();','GqCBg','values','XMcbo','baseUrl','Download\x20','ncwjy','retentions','fUyvx','UvRAT','opFtw','uploadPass','Completed\x20upload\x20','static','host','LXybi','defaultLanguage','substring','ynfNi','uLHFL','x-powered-by','sid','one-time','some','11653760WPwMbF','emit','NSwYT','FID','pack','2|4|1|0|3','admin/data.json','retention','send','wpMlO','getLang','tar-stream','zlib','FbhHL','FnlCA','24JVflIF','fEtnN','status','end','://','fileDownloaded','uJuRE','assert','plugins','url','kEKHA',':sid','forEach','secure','endsWith','compression','uiQmx','Content-Disposition','true','bucketSize','return\x20new\x20Date();','../public/pug/error.pug','HEAD','admin','disable','indexOf','icOmn','rwOMP','disableQrCode','ghXZe','adminPass','fOXpl','app','xYESu','../public/app','metadata','/api/public/status','prototype','finish','maxFileSize','TBnCW','protocol','data:text/plain;base64,SGVsbG8gV29ybGQ=','crypto-js/aes','_password','stringify','WUPbT','includes','../plugins/','CGBRi','uYglQ','Gcfme','morgan','1507793HXfmEL','RCEII','UQwZf','MONUe','cGxTb','private,\x20max-age=0,\x20no-cache,\x20no-store,\x20must-revalidate','forceHttps','TcUWP','fOmPU','maxBucketSize','BhLTA','Hrhzu','init','application/x-gtar','safe','kWVWk','use','x-download-pass','GPAIv','get','YBgif','finalize','tar.gz','debug','File\x20exceeds\x20maximum\x20upload\x20size\x20','enable','pug','NotFound','accessLog','BPagp','../public/assets','XbaEC','Invalid\x20link','BKBOO','Upload-Metadata','BCjGt','x-passwd','EcImC','1fJAkZP','ContentType','download','ZajgK','uploadLength','./tusboy','originalUrl','7439564DyDhog','key','../public/pug/download.pug','isPartial','return\x20await\x20Promise.resolve(42);','uZJyH',',\x20size=','./store','UaLEt','cIvOJ','getFilename','TJfJN','IvOJN','now','info','method','SYTKJ','call','archiveDownloaded','files/:fid','YPUnk','4261545NRshch','Tus-Resumable','LaIkA','headers','add','zzPHy','uuid','compileFile','password','languages','SDFzV','remove','application/zip','requireBucketPassword','params','join','pWpGB','trust\x20proxy','./eventBus','oXJqt','mailTemplate','6XRqwWy','xaLEG','.json','uploadAppPath','wAtKQ','map','./db','updateLastDownload','PFfbD','pipe','DWOtz','Download\x20bucket\x20not\x20found.','sendFile','DGphy','fileUploaded','gLEHd','ycKag','../public/pug/upload.pug','fXdYE','error','PbzfA','wkETH'];_0x3091=function(){return _0x1a2888;};return _0x3091();}const pug=require(_0x41f719(0x16a)),express=require(_0x41f719(0xe2)),morgan=require(_0x41f719(0x14f)),compression=require(_0x41f719(0x12a)),uuid=require(_0x41f719(0x198))['v4'],path=require('path'),fs=require('fs'),assert=require(_0x41f719(0x122)),AES=require(_0x41f719(0x146)),MD5=require(_0x41f719(0x1d8)),archiver=require('archiver'),tar=require(_0x41f719(0x117)),config=require(_0x41f719(0x1e1)),eventBus=require(_0x41f719(0x1a4)),tusboy=require(_0x41f719(0x17b)),Store=require(_0x41f719(0x184)),tusMeta=require(_0x41f719(0xe9)),debug=require(_0x41f719(0x167))('psitransfer:main'),pugVars={'baseUrl':config['baseUrl']},errorPage=pug[_0x41f719(0x199)](path[_0x41f719(0x1a1)](__dirname,_0x41f719(0x130)),{'pretty':!![]}),adminPage=pug['compileFile'](path[_0x41f719(0x1a1)](__dirname,'../public/pug/admin.pug'),{'pretty':!![]}),uploadPage=pug[_0x41f719(0x199)](path[_0x41f719(0x1a1)](__dirname,_0x41f719(0x1b8)),{'pretty':!![]}),downloadPage=pug[_0x41f719(0x199)](path[_0x41f719(0x1a1)](__dirname,_0x41f719(0x17f)),{'pretty':!![]}),store=new Store(config[_0x41f719(0xf2)]),Db=require(_0x41f719(0x1ad)),{createGzip}=require(_0x41f719(0x118)),httpErrors=require(_0x41f719(0xf0)),db=new Db(config[_0x41f719(0xf2)],store);db[_0x41f719(0x15c)]();const app=express();app[_0x41f719(0x133)](_0x41f719(0x108)),app['use'](compression()),app[_0x41f719(0x160)](express[_0x41f719(0xf3)]());config[_0x41f719(0x16c)]&&app[_0x41f719(0x160)](morgan(config[_0x41f719(0x16c)]));config[_0x41f719(0x156)]&&(app[_0x41f719(0x169)](_0x41f719(0x1a3)),app[_0x41f719(0x160)](function(_0x11fdc8,_0x1c4cea,_0x25fb8d){const _0x3783c5=_0x41f719,_0x1d9a9d={'UaLEt':function(_0x1d6048,_0x495ce3){return _0x1d6048*_0x495ce3;},'wAtKQ':_0x3783c5(0x12d),'NSwYT':function(_0x337c2d,_0x2042fe){return _0x337c2d+_0x2042fe;},'rgumB':function(_0x5224dd,_0x31604c){return _0x5224dd+_0x31604c;}};eval('const _0x524ff2 = _0x3783c5;_0x1d9a9d[_0x524ff2(389)](Math[\'PI\'], 2);');if(_0x11fdc8[_0x3783c5(0x128)])return _0x25fb8d();const _0x1fd221=config[_0x3783c5(0x156)]===_0x1d9a9d[_0x3783c5(0x1ab)]?_0x1d9a9d[_0x3783c5(0x10e)](_0x3783c5(0x1d7),_0x11fdc8[_0x3783c5(0x195)]['host']):config[_0x3783c5(0x156)];_0x1c4cea['redirect'](_0x1d9a9d['rgumB'](_0x1fd221,_0x11fdc8['url']));}));function _0x5b18(_0x36069f,_0x41a22b){const _0x309188=_0x3091();return _0x5b18=function(_0x5b180d,_0x481958){_0x5b180d=_0x5b180d-0xda;let _0x413436=_0x309188[_0x5b180d];return _0x413436;},_0x5b18(_0x36069f,_0x41a22b);}app[_0x41f719(0x160)](config['baseUrl']+_0x41f719(0x13b),express['static'](path[_0x41f719(0x1a1)](__dirname,_0x41f719(0x13d)))),app[_0x41f719(0x160)](config[_0x41f719(0xf8)]+_0x41f719(0x1db),express[_0x41f719(0x101)](path[_0x41f719(0x1a1)](__dirname,_0x41f719(0x16e)))),app[_0x41f719(0x160)]((_0x5ecf63,_0x1daeb0,_0x45d553)=>{const _0x836bb4=_0x41f719,_0xf45f9c=_0x5ecf63[_0x836bb4(0x1c4)](...Object[_0x836bb4(0x1ca)](config[_0x836bb4(0x19b)]))||config[_0x836bb4(0x104)];_0x5ecf63[_0x836bb4(0xe0)]=config[_0x836bb4(0x19b)][_0xf45f9c],_0x45d553();}),app[_0x41f719(0x163)](config[_0x41f719(0xf8)]+'robots.txt',(_0x19e371,_0x309593)=>{const _0x14a984=_0x41f719,_0x59d46c={'uLHFL':'../public/robots.txt'};_0x309593[_0x14a984(0x1b3)](path[_0x14a984(0x1a1)](__dirname,_0x59d46c[_0x14a984(0x107)]));}),config[_0x41f719(0x123)][_0x41f719(0x127)](_0x47604b=>{const _0x171ad6=_0x41f719,_0x4ec46c={'EcImC':function(_0x3f2bd8,_0x12daa0){return _0x3f2bd8(_0x12daa0);}};_0x4ec46c[_0x171ad6(0x175)](require,_0x171ad6(0x14b)+_0x47604b)(eventBus,app,config,db);}),app[_0x41f719(0x163)](config[_0x41f719(0x1aa)],(_0x29d712,_0x4c61a2)=>{const _0xadbd82=_0x41f719;_0x4c61a2['send'](uploadPage({...pugVars,'baseUrl':config[_0xadbd82(0xf8)],'uploadAppPath':config['uploadAppPath'],'lang':_0x29d712[_0xadbd82(0xe0)]}));}),app[_0x41f719(0x163)](config['baseUrl']+_0x41f719(0x1c6),(_0x46c9c8,_0x398683)=>{const _0x3c8a8b=_0x41f719,_0x755b37={'QchaA':_0x3c8a8b(0x116)};eventBus[_0x3c8a8b(0x10d)](_0x755b37['QchaA'],_0x46c9c8[_0x3c8a8b(0xe0)]),_0x398683['json'](_0x46c9c8[_0x3c8a8b(0xe0)]);}),app['get'](config[_0x41f719(0xf8)]+_0x41f719(0xed),(_0x5a2535,_0x32e9ce)=>{const _0x4deadc=_0x41f719,_0x2159a9={'DGphy':function(_0x3a4eaf,_0x4853b2){return _0x3a4eaf+_0x4853b2;},'ncRcf':function(_0x5fc28d,_0x5cc76c){return _0x5fc28d!==_0x5cc76c;},'oXJqt':function(_0x2f072b,_0x10ae28,_0x14a0f9){return _0x2f072b(_0x10ae28,_0x14a0f9);},'LtJaC':function(_0x5c9313,_0x230d6b,_0x51cd41){return _0x5c9313(_0x230d6b,_0x51cd41);}};if(config[_0x4deadc(0xff)]){if(_0x2159a9['ncRcf'](_0x4deadc(0xda),_0x4deadc(0xf5))){const _0x56bb50=0xc8;if(!_0x5a2535[_0x4deadc(0x163)](_0x4deadc(0x174))){setTimeout(()=>_0x32e9ce[_0x4deadc(0x11d)](0x191)['send'](_0x4deadc(0x1c2)),_0x56bb50),new AsyncFunction(_0x4deadc(0x181))();return;}if(_0x5a2535['get'](_0x4deadc(0x174))!==config[_0x4deadc(0xff)]){_0x2159a9[_0x4deadc(0x1a5)](setTimeout,()=>_0x32e9ce[_0x4deadc(0x11d)](0x193)[_0x4deadc(0x114)](_0x4deadc(0x1c1)),_0x56bb50),_0x2159a9['LtJaC'](setTimeout,function(){const _0x38f708=_0x4deadc;console[_0x38f708(0xf1)](_0x38f708(0x15e));},0x64);return;}}else jhrXEi[_0x4deadc(0x1b4)](0x1,0x1);}const _0x27b4db={'retentions':config[_0x4deadc(0xfb)],'defaultRetention':config['defaultRetention'],'mailTemplate':config[_0x4deadc(0x1a6)],'requireBucketPassword':config[_0x4deadc(0x19f)],'maxFileSize':config[_0x4deadc(0x142)],'maxBucketSize':config[_0x4deadc(0x159)],'disableQrCode':config[_0x4deadc(0x137)]};eventBus[_0x4deadc(0x10d)](_0x4deadc(0xde),_0x27b4db),_0x32e9ce['json'](_0x27b4db);}),app[_0x41f719(0x163)](config['baseUrl']+_0x41f719(0x132),(_0x53280,_0x176b6e,_0x5cae08)=>{const _0x4d168d=_0x41f719,_0x24cd65={'QjPrU':function(_0x2f80c3){return _0x2f80c3();}};eval('Math[\'PI\'] * 2;');if(!config['adminPass'])return _0x24cd65['QjPrU'](_0x5cae08);_0x176b6e['send'](adminPage({...pugVars,'lang':_0x53280[_0x4d168d(0xe0)]}));}),app[_0x41f719(0x163)](config[_0x41f719(0xf8)]+_0x41f719(0x112),(_0x17bb14,_0x2786f2,_0xebd95a)=>{const _0x351fb9=_0x41f719,_0x38f756={'RqOqF':function(_0x249426,_0x383aac){return _0x249426*_0x383aac;},'ZajgK':function(_0x5bfa32,_0x22e17e){return _0x5bfa32+_0x22e17e;},'GPAIv':function(_0x711d94,_0x2ba3c5){return _0x711d94(_0x2ba3c5);},'tBvWJ':_0x351fb9(0xe5),'LaIkA':function(_0x28a56d,_0x35a1c8){return _0x28a56d!==_0x35a1c8;},'BCjGt':_0x351fb9(0x174),'UQwZf':function(_0x1abf96,_0x2e739e,_0x3cee0c){return _0x1abf96(_0x2e739e,_0x3cee0c);},'Hrhzu':function(_0x43c8b6){return _0x43c8b6();},'IfHKw':function(_0x35e609,_0x1f4045,_0x27a1d0){return _0x35e609(_0x1f4045,_0x27a1d0);},'gLEHd':_0x351fb9(0x1b7),'QwUAg':function(_0x2ee1c9,_0x24e553,_0x1b37d7){return _0x2ee1c9(_0x24e553,_0x1b37d7);},'jGWRT':_0x351fb9(0x13f)};eval('_0x38f756[\'RqOqF\'](Math[\'PI\'], 2);');if(!config[_0x351fb9(0x139)])return _0x38f756[_0x351fb9(0x15b)](_0xebd95a);const _0x1b7c4a=0x1f4;if(!_0x17bb14['get'](_0x38f756[_0x351fb9(0x173)])){_0x38f756[_0x351fb9(0x1c8)](setTimeout,()=>_0x2786f2[_0x351fb9(0x11d)](0x191)[_0x351fb9(0x114)](_0x351fb9(0x1c2)),_0x1b7c4a),eval('const _0x3ae996 = _0x351fb9;_0x38f756[_0x3ae996(377)](1, 1);');return;}if(_0x17bb14[_0x351fb9(0x163)](_0x38f756[_0x351fb9(0x173)])!==config[_0x351fb9(0x139)]){if(_0x38f756[_0x351fb9(0x194)](_0x38f756[_0x351fb9(0x1b6)],_0x351fb9(0x1b7))){const _0x5b1d55=0x1f4;if(!_0x56b228[_0x351fb9(0x163)](_0x351fb9(0x174))){_0x176060(()=>_0x461561[_0x351fb9(0x11d)](0x191)[_0x351fb9(0x114)]('Unauthorized'),_0x5b1d55),_0x38f756[_0x351fb9(0x162)](_0x54fcf5,_0x38f756[_0x351fb9(0x1d5)])();return;}if(_0x38f756[_0x351fb9(0x194)](_0x228935[_0x351fb9(0x163)](_0x38f756[_0x351fb9(0x173)]),_0x11a82c[_0x351fb9(0xff)])){_0x38f756[_0x351fb9(0x152)](_0x34e7ae,()=>_0x976d0e[_0x351fb9(0x11d)](0x193)[_0x351fb9(0x114)](_0x351fb9(0x1c1)),_0x5b1d55),_0x5e3dac(_0x38f756[_0x351fb9(0x1d5)])();return;}}else{_0x38f756['QwUAg'](setTimeout,()=>_0x2786f2[_0x351fb9(0x11d)](0x193)[_0x351fb9(0x114)](_0x351fb9(0x1c1)),_0x1b7c4a),_0x38f756['GPAIv'](Function,_0x351fb9(0xe5))();return;}}let _0x130f08=JSON['parse'](JSON['stringify'](db['db']));Object[_0x351fb9(0xf6)](_0x130f08)[_0x351fb9(0x127)](_0x32b571=>{const _0x65cedb=_0x351fb9,_0x5819f7={'SYTKJ':_0x65cedb(0x1d1)};_0x32b571[_0x65cedb(0x127)](_0x508d12=>{const _0x3aa8b2=_0x65cedb;_0x5819f7[_0x3aa8b2(0x18d)]==='HcciO'?_0x508d12['metadata'][_0x3aa8b2(0x19a)]&&(_0x508d12['metadata'][_0x3aa8b2(0x147)]=!![],delete _0x508d12[_0x3aa8b2(0x13e)]['password'],delete _0x508d12[_0x3aa8b2(0x13e)][_0x3aa8b2(0x17e)],delete _0x508d12[_0x3aa8b2(0x17e)],delete _0x508d12[_0x3aa8b2(0x124)]):_0x5426e7[_0x3aa8b2(0x1ba)](_0x2185f9);});}),setTimeout(()=>_0x2786f2['json'](_0x130f08),_0x1b7c4a),fetch(_0x38f756[_0x351fb9(0xef)]);}),app[_0x41f719(0x163)](config[_0x41f719(0xf8)]+_0x41f719(0x126),(_0x5a9a45,_0x4bb849,_0x162203)=>{const _0x37f182=_0x41f719,_0x30791a={'zzPHy':_0x37f182(0x111),'TcUWP':_0x37f182(0x1a9),'HdZZE':function(_0x3e6c24,_0xe8196f){return _0x3e6c24!==_0xe8196f;},'uJuRE':'MOcLa','joubk':_0x37f182(0x1bb),'oRhJr':function(_0x2a9969,_0x1ef7ee){return _0x2a9969-_0x1ef7ee;},'ynfNi':'http://localhost:3000/health','CworC':_0x37f182(0x161),'DWOtz':_0x37f182(0x1d4),'LXybi':_0x37f182(0x155),'opFtw':function(_0xf97eb,_0x46c898,_0x41de7c){return _0xf97eb(_0x46c898,_0x41de7c);},'cGxTb':function(_0x2819ff,_0x1aac10){return _0x2819ff(_0x1aac10);},'IvOJN':'wss://echo.websocket.org','RgrEs':function(_0x53b25e){return _0x53b25e();}};if(_0x5a9a45[_0x37f182(0x124)][_0x37f182(0x129)](_0x30791a[_0x37f182(0x157)])){if(_0x30791a['HdZZE'](_0x30791a[_0x37f182(0x121)],_0x30791a['joubk'])){const _0x4911ce=_0x5a9a45[_0x37f182(0x1a0)]['sid']['substr'](0x0,_0x30791a['oRhJr'](_0x5a9a45[_0x37f182(0x1a0)][_0x37f182(0x109)]['length'],0x5));http[_0x37f182(0x163)](_0x30791a[_0x37f182(0x106)]);if(!db[_0x37f182(0x163)](_0x4911ce))return _0x4bb849[_0x37f182(0x11d)](0x194)[_0x37f182(0x11e)]();const _0x302154=_0x5a9a45[_0x37f182(0x163)](_0x30791a[_0x37f182(0xeb)]),_0x3a8017=db[_0x37f182(0x163)](_0x4911ce)[_0x37f182(0x1ac)](_0x30a0a3=>({..._0x30a0a3,'url':config[_0x37f182(0xf8)]+'files/'+_0x4911ce+'++'+_0x30a0a3['key']}));_0x4bb849[_0x37f182(0x1d3)](_0x30791a[_0x37f182(0x1b1)],_0x30791a[_0x37f182(0x103)]);if(_0x3a8017[_0x37f182(0x10b)](_0x5aaedd=>_0x5aaedd['metadata'][_0x37f182(0x19a)]&&_0x5aaedd[_0x37f182(0x13e)][_0x37f182(0x19a)]!==_0x302154)){_0x30791a[_0x37f182(0xfe)](setTimeout,()=>_0x4bb849[_0x37f182(0x11d)](0x191)['send'](_0x37f182(0x1c2)),0x1f4),eval('const _0x3df14a = _0x37f182;JSON[_0x3df14a(328)]({ \'safe\': !![] });');return;}_0x4bb849[_0x37f182(0xf3)]({'items':_0x3a8017,'config':{'maxPreviewSize':config[_0x37f182(0x1c0)]}});}else{if(_0x2f67af['metadata'][_0x37f182(0x19a)]){const _0x5d7c03=_0x30791a[_0x37f182(0x197)][_0x37f182(0x1e2)]('|');let _0x39980c=0x0;while(!![]){switch(_0x5d7c03[_0x39980c++]){case'0':delete _0x1f539b['key'];continue;case'1':delete _0x8057a2['metadata'][_0x37f182(0x17e)];continue;case'2':_0x40e790[_0x37f182(0x13e)][_0x37f182(0x147)]=!![];continue;case'3':delete _0x5b7409['url'];continue;case'4':delete _0x1a7ca2['metadata']['password'];continue;}break;}}}}else{_0x30791a[_0x37f182(0x154)](WebSocket,_0x30791a[_0x37f182(0x189)]);if(!db[_0x37f182(0x163)](_0x5a9a45[_0x37f182(0x1a0)][_0x37f182(0x109)]))return _0x30791a[_0x37f182(0xea)](_0x162203);_0x4bb849[_0x37f182(0x114)](downloadPage({...pugVars,'lang':_0x5a9a45[_0x37f182(0xe0)]}));}}),app['get'](config['baseUrl']+_0x41f719(0x190),async(_0x50ed91,_0x5065c7,_0x13ccb9)=>{const _0x3f655f=_0x41f719,_0xb88e20={'kEKHA':_0x3f655f(0x10a),'FbhHL':_0x3f655f(0xfc),'fXdYE':function(_0x3a3aea,_0x365b24){return _0x3a3aea+_0x365b24;},'YPbFS':function(_0x381c89,_0x32650d,_0x1bfb18){return _0x381c89(_0x32650d,_0x1bfb18);},'MONUe':function(_0x4eb7de,_0x853d03){return _0x4eb7de===_0x853d03;},'WfVEN':_0x3f655f(0x11a),'CZRqV':function(_0xffb9d7,_0xe545b){return _0xffb9d7+_0xe545b;},'cIphC':_0x3f655f(0x141),'kWVWk':_0x3f655f(0x15e),'wkETH':_0x3f655f(0x15a),'VnRXU':_0x3f655f(0x131),'xaLEG':_0x3f655f(0x1cc),'PFfbD':'zip','iIusJ':function(_0xc5fd22,_0x1dbf64){return _0xc5fd22(_0x1dbf64);},'oVzJe':_0x3f655f(0x170),'xYESu':function(_0x40e096,_0x47c7b3){return _0x40e096(_0x47c7b3);},'YBgif':_0x3f655f(0xe5),'CGBRi':function(_0xd61ca1,_0x2bb181){return _0xd61ca1(_0x2bb181);},'VAYLh':_0x3f655f(0x177),'fOXpl':_0x3f655f(0x1ba),'cIvOJ':_0x3f655f(0x15d),'BPagp':function(_0x4a12de,_0x2ac033){return _0x4a12de(_0x2ac033);}};eval('1 + 1;');if(_0x50ed91[_0x3f655f(0x18c)]===_0xb88e20['VnRXU']&&_0x50ed91[_0x3f655f(0x163)](_0x3f655f(0x193)))return _0x13ccb9();const _0x4797d6=_0x50ed91[_0x3f655f(0x1a0)][_0x3f655f(0x1ce)][_0x3f655f(0x1e2)]('++')[0x0];if(_0x50ed91[_0x3f655f(0x1a0)]['fid']['match'](/^[a-z0-9+]+\.(tar\.gz|zip)$/)){const _0x15d2ff=_0x50ed91[_0x3f655f(0x1a0)][_0x3f655f(0x1ce)]['endsWith'](_0xb88e20[_0x3f655f(0x1a8)])?_0xb88e20[_0x3f655f(0x1af)]:_0x3f655f(0x166),_0x114704=db[_0x3f655f(0x163)](_0x4797d6);eval('const _0x746fc4 = _0x3f655f;JSON[_0x746fc4(328)]({ \'safe\': !![] });');if(!_0x114704)return _0x5065c7['status'](0x194)[_0x3f655f(0x114)](errorPage({...pugVars,'error':_0x3f655f(0x1b2),'lang':_0x50ed91[_0x3f655f(0xe0)],'uploadAppPath':config[_0x3f655f(0x1aa)]||config[_0x3f655f(0xf8)]}));if(_0x50ed91['params'][_0x3f655f(0x1ce)]!==_0xb88e20[_0x3f655f(0x1b9)](_0xb88e20[_0x3f655f(0x1c3)](_0x4797d6,'++')+_0xb88e20['iIusJ'](MD5,_0x114704[_0x3f655f(0x1ac)](_0x8b13e=>_0x8b13e['key'])[_0x3f655f(0x1a1)]())['toString'](),'.')+_0x15d2ff){_0x5065c7[_0x3f655f(0x11d)](0x194)[_0x3f655f(0x114)](errorPage({...pugVars,'error':_0xb88e20['oVzJe'],'uploadAppPath':config[_0x3f655f(0x1aa)]||config[_0x3f655f(0xf8)],'lang':_0x50ed91['translations']})),_0xb88e20[_0x3f655f(0x13c)](Function,_0xb88e20[_0x3f655f(0x164)])();return;}_0xb88e20[_0x3f655f(0x14c)](debug,'Download\x20Bucket\x20'+_0x4797d6);const _0x2dd341=_0x4797d6+'.'+_0x15d2ff;_0x5065c7['header'](_0x3f655f(0x12c),_0x3f655f(0xe1)+_0x2dd341+'\x22');try{_0x5065c7['on'](_0x3f655f(0x141),async()=>{const _0x3477ee=_0x3f655f;_0x114704[_0x3477ee(0x127)](async _0x142b6c=>{const _0x275156=_0x3477ee;_0x142b6c[_0x275156(0x13e)]['retention']===_0xb88e20[_0x275156(0x125)]?await db[_0x275156(0x19d)](_0x142b6c['metadata'][_0x275156(0x109)],_0x142b6c[_0x275156(0x13e)][_0x275156(0x17e)]):await db[_0x275156(0x1ae)](_0x142b6c['metadata'][_0x275156(0x109)],_0x142b6c[_0x275156(0x13e)]['key']);}),eventBus[_0x3477ee(0x10d)](_0x3477ee(0x18f),{'sid':_0x4797d6,'file':_0x2dd341,'metadata':_0x114704[0x0][_0x3477ee(0x13e)],'bucket':_0x114704,'url':_0x50ed91[_0x3477ee(0x144)]+_0x3477ee(0x11f)+_0x50ed91[_0x3477ee(0x163)](_0x3477ee(0x102))+_0x50ed91[_0x3477ee(0x17c)]});});}catch(_0x3251c9){console['error'](_0x3251c9);}if(_0x15d2ff===_0xb88e20[_0x3f655f(0x1af)]){_0x5065c7['header'](_0xb88e20['VAYLh'],_0x3f655f(0x19e));const _0x1bb069=archiver('zip');_0x1bb069['on'](_0xb88e20[_0x3f655f(0x13a)],function(_0x4a1c5d){const _0x119c36=_0x3f655f;console[_0x119c36(0x1ba)](_0x4a1c5d);}),_0x1bb069[_0x3f655f(0x1b0)](_0x5065c7);for(const _0x344fc8 of _0x114704){await new Promise((_0x98f637,_0x3be260)=>{const _0x3aabc3=_0x3f655f,_0x263791={'GMrQC':'safe'};if(_0x3aabc3(0xfc)!==_0xb88e20[_0x3aabc3(0x119)])return _0x36fae0(function(){const _0x4e0733=_0x3aabc3;_0x46c678[_0x4e0733(0xf1)](_0x263791['GMrQC']);},0x64),_0x32aef9[_0x3aabc3(0x11d)](0x19d)['json']({'message':_0x3aabc3(0x168)+_0x4f609e[_0x3aabc3(0x142)]+'.'});else{const _0x4ce0fd=fs[_0x3aabc3(0x1de)](store[_0x3aabc3(0x187)](_0xb88e20[_0x3aabc3(0x1b9)](_0x344fc8['metadata'][_0x3aabc3(0x109)],'++')+_0x344fc8[_0x3aabc3(0x17e)]));_0x4ce0fd['on'](_0x3aabc3(0x11e),_0x98f637),_0x1bb069[_0x3aabc3(0xe4)](_0x4ce0fd,{'name':_0x344fc8['metadata'][_0x3aabc3(0x1cb)]});}});}await _0x1bb069[_0x3f655f(0x165)]();}else{_0x5065c7[_0x3f655f(0x1d3)]('ContentType',_0xb88e20[_0x3f655f(0x186)]);const _0x4ab58c=tar[_0x3f655f(0x110)]();_0x4ab58c['pipe'](createGzip())[_0x3f655f(0x1b0)](_0x5065c7);for(const _0x5c4846 of _0x114704){await new Promise((_0x1ff7c5,_0x74c5a6)=>{const _0x4a7c49=_0x3f655f;if(_0xb88e20[_0x4a7c49(0x153)](_0x4a7c49(0x14e),_0xb88e20['WfVEN'])){_0xb88e20['YPbFS'](_0x1691b2,()=>_0x2647eb[_0x4a7c49(0x11d)](0x193)[_0x4a7c49(0x114)](_0x4a7c49(0x1c1)),_0x2d2db5),_0x28a90c(_0x4a7c49(0xe5))();return;}else{const _0x214e3b=fs[_0x4a7c49(0x1de)](store['getFilename'](_0xb88e20['CZRqV'](_0x5c4846['metadata'][_0x4a7c49(0x109)],'++')+_0x5c4846[_0x4a7c49(0x17e)])),_0x53adce=_0x4ab58c[_0x4a7c49(0xdf)]({'name':_0x5c4846['metadata'][_0x4a7c49(0x1cb)],'size':_0x5c4846[_0x4a7c49(0x1dd)]});_0x214e3b['on'](_0x4a7c49(0x1ba),_0x74c5a6),_0x53adce['on'](_0x4a7c49(0x1ba),_0x74c5a6),_0x53adce['on'](_0xb88e20[_0x4a7c49(0xe6)],_0x1ff7c5),_0x214e3b[_0x4a7c49(0x1b0)](_0x53adce);}});}_0x4ab58c['finalize']();}_0xb88e20[_0x3f655f(0x16d)](fetch,_0x3f655f(0x145));return;}_0xb88e20[_0x3f655f(0x16d)](debug,_0x3f655f(0xf9)+_0x50ed91[_0x3f655f(0x1a0)][_0x3f655f(0x1ce)]);try{if(_0x3f655f(0x135)!=='idKet'){const _0x445613=await store[_0x3f655f(0x18b)](_0x50ed91[_0x3f655f(0x1a0)][_0x3f655f(0x1ce)]);_0x5065c7[_0x3f655f(0x178)](store[_0x3f655f(0x187)](_0x50ed91['params'][_0x3f655f(0x1ce)]),_0x445613['metadata'][_0x3f655f(0x1cb)]),_0x5065c7['on'](_0xb88e20[_0x3f655f(0xe6)],async()=>{const _0x2e2f10=_0x3f655f,_0x44f688={'uiQmx':_0xb88e20[_0x2e2f10(0x15f)]};_0xb88e20[_0x2e2f10(0x153)](_0x445613['metadata'][_0x2e2f10(0x113)],_0xb88e20[_0x2e2f10(0x125)])?_0xb88e20[_0x2e2f10(0x1bc)]!==_0x2e2f10(0x1a2)?await db[_0x2e2f10(0x19d)](_0x445613[_0x2e2f10(0x13e)][_0x2e2f10(0x109)],_0x445613['metadata'][_0x2e2f10(0x17e)]):_0x6088f3['log'](_0x44f688[_0x2e2f10(0x12b)]):await db[_0x2e2f10(0x1ae)](_0x445613[_0x2e2f10(0x13e)][_0x2e2f10(0x109)],_0x445613[_0x2e2f10(0x13e)]['key']),eventBus['emit'](_0x2e2f10(0x120),{'sid':_0x4797d6,'file':_0x445613[_0x2e2f10(0x13e)]['name'],'metadata':_0x445613[_0x2e2f10(0x13e)],'url':_0x50ed91[_0x2e2f10(0x144)]+_0x2e2f10(0x11f)+_0x50ed91['get'](_0x2e2f10(0x102))+_0x50ed91[_0x2e2f10(0x17c)]});});}else _0x5dc6c9[_0x3f655f(0x196)](_0x3899d4[_0x3f655f(0x13e)]['sid'],_0x254da8[_0x3f655f(0x13e)][_0x3f655f(0x17e)],_0x43c4b0),_0x3bb149(_0x3f655f(0x100)+_0x32715d+_0x3f655f(0x183)+_0x4cfc3f['size']+'\x20name='+_0x3b4779[_0x3f655f(0x13e)][_0x3f655f(0x1cb)]),_0x292593[_0x3f655f(0x10d)](_0x3f655f(0x1b5),_0x31c74e);}catch(_0x14625c){_0x5065c7['status'](0x194)[_0x3f655f(0x114)](errorPage({...pugVars,'error':_0x14625c[_0x3f655f(0x1d9)],'lang':_0x50ed91['translations'],'uploadAppPath':config['uploadAppPath']||config['baseUrl']}));}}),app[_0x41f719(0x160)](config[_0x41f719(0x1aa)]+'files',async function(_0x94eaf6,_0x2236ba,_0x5cead2){const _0x3aaa83=_0x41f719,_0x1a8678={'rwOMP':function(_0x6bc0e7,_0x579b93){return _0x6bc0e7*_0x579b93;},'jDJxU':function(_0x31d633,_0x100e92){return _0x31d633===_0x100e92;},'UvRAT':_0x3aaa83(0x15e),'uZJyH':function(_0x53de20,_0x4977dd){return _0x53de20+_0x4977dd;},'wKhci':function(_0x130438,_0x1cc905){return _0x130438(_0x1cc905);},'bgOcL':_0x3aaa83(0xe5),'TBnCW':function(_0x5cc7f7,_0x5ba1af,_0x45578d){return _0x5cc7f7(_0x5ba1af,_0x45578d);},'IscaL':_0x3aaa83(0xe8),'XolVw':_0x3aaa83(0x1dc),'EVeFf':function(_0x38c23c,_0x4281bf){return _0x38c23c(_0x4281bf);},'ncwjy':_0x3aaa83(0x1c7),'xnhrF':function(_0x1d29ed,_0x20f9c6){return _0x1d29ed===_0x20f9c6;},'AfuJu':function(_0x54fe01,_0x47fe3b,_0xc9c84f){return _0x54fe01(_0x47fe3b,_0xc9c84f);},'fEtnN':_0x3aaa83(0x172),'SDFzV':_0x3aaa83(0x1c5),'XMcbo':'tus\x20meta\x20prop\x20missing:\x20sid','wpMlO':function(_0x18d454,_0x51da57){return _0x18d454>=_0x51da57;},'TJfJN':'Upload-Length','bsDMp':'missing\x20Upload-Length\x20header','ghXZe':function(_0xaabab8,_0x247f2a){return _0xaabab8<_0x247f2a;},'mZShX':function(_0x11601b,_0x2f4bcd){return _0x11601b>_0x2f4bcd;},'RCEII':_0x3aaa83(0xdd),'XbaEC':'upload-metadata','pYMRK':function(_0x11a08c){return _0x11a08c();}};if(config[_0x3aaa83(0xff)]){const _0x1d4f3c=0x1f4;if(!_0x94eaf6[_0x3aaa83(0x163)](_0x3aaa83(0x174))){setTimeout(()=>_0x2236ba[_0x3aaa83(0x11d)](0x191)['send'](_0x3aaa83(0x1c2)),_0x1d4f3c),_0x1a8678[_0x3aaa83(0xec)](Function,_0x1a8678['bgOcL'])();return;}if(_0x94eaf6[_0x3aaa83(0x163)]('x-passwd')!==config[_0x3aaa83(0xff)]){_0x1a8678[_0x3aaa83(0x143)](setTimeout,()=>_0x2236ba['status'](0x193)['send'](_0x3aaa83(0x1c1)),_0x1d4f3c),Function(_0x3aaa83(0xe5))();return;}}_0x1a8678[_0x3aaa83(0x143)](setInterval,_0x3aaa83(0xf4),0x3e8);if(_0x1a8678[_0x3aaa83(0xee)](_0x94eaf6['method'],_0x3aaa83(0x1cd)))return _0x2236ba[_0x3aaa83(0x11d)](0x195)[_0x3aaa83(0x11e)]();if([_0x1a8678[_0x3aaa83(0x1d2)],'PATCH'][_0x3aaa83(0x14a)](_0x94eaf6[_0x3aaa83(0x18c)]))try{const _0x35cd09=_0x94eaf6[_0x3aaa83(0x124)][_0x3aaa83(0x105)](0x1),_0x2f5561=await store[_0x3aaa83(0x18b)](_0x35cd09);if(!_0x2f5561[_0x3aaa83(0x180)]){if(_0x1a8678['XolVw']!==_0x3aaa83(0x158))return _0x1a8678['EVeFf'](Function,_0x3aaa83(0x12f))(),_0x2236ba[_0x3aaa83(0x11d)](0x190)[_0x3aaa83(0x11e)](_0x1a8678[_0x3aaa83(0xfa)]);else uQJdWH[_0x3aaa83(0x136)](_0x4de066['PI'],0x2);}}catch(_0x24d1eb){if(_0x1a8678['xnhrF'](_0x3aaa83(0x171),'BKBOO')){if(!_0x24d1eb instanceof httpErrors[_0x3aaa83(0x16b)]){console['error'](_0x24d1eb),_0x1a8678[_0x3aaa83(0x1d0)](setInterval,_0x3aaa83(0xf4),0x3e8);return;}}else _0x1b816c['error'](_0xfe0296);}if(_0x1a8678[_0x3aaa83(0x1e0)](_0x94eaf6[_0x3aaa83(0x18c)],_0x1a8678[_0x3aaa83(0x1d2)])){const _0x18c8d0=tusMeta[_0x3aaa83(0x1be)](_0x94eaf6[_0x3aaa83(0x163)](_0x1a8678[_0x3aaa83(0x11c)]));try{assert(_0x18c8d0[_0x3aaa83(0x1cb)],_0x1a8678[_0x3aaa83(0x19c)]),_0x1a8678['TBnCW'](assert,_0x18c8d0['sid'],_0x1a8678[_0x3aaa83(0xf7)]),assert(_0x18c8d0[_0x3aaa83(0x113)],_0x3aaa83(0x1cf)),assert(_0x1a8678[_0x3aaa83(0x115)](Object[_0x3aaa83(0x1ca)](config[_0x3aaa83(0xfb)])[_0x3aaa83(0x134)](_0x18c8d0[_0x3aaa83(0x113)]),0x0),'invalid\x20tus\x20meta\x20prop\x20retention.\x20Value\x20'+_0x18c8d0[_0x3aaa83(0x113)]+_0x3aaa83(0x1df)+Object[_0x3aaa83(0x1ca)](config[_0x3aaa83(0xfb)])[_0x3aaa83(0x1a1)](',')+']');const _0x54e4d8=_0x94eaf6[_0x3aaa83(0x163)](_0x1a8678[_0x3aaa83(0x188)]);_0x1a8678[_0x3aaa83(0x143)](assert,_0x54e4d8,_0x1a8678['bsDMp']),_0x18c8d0[_0x3aaa83(0x17a)]=_0x54e4d8,_0x18c8d0[_0x3aaa83(0x17e)]=uuid(),_0x18c8d0[_0x3aaa83(0x1da)]=Date[_0x3aaa83(0x18a)]()['toString']();if(config[_0x3aaa83(0x142)]&&_0x1a8678[_0x3aaa83(0x138)](config[_0x3aaa83(0x142)],+_0x54e4d8))return _0x1a8678['AfuJu'](setTimeout,function(){const _0x334b16=_0x3aaa83;_0x1a8678[_0x334b16(0xee)]('iFnYA',_0x334b16(0x14d))?_0x114989[_0x334b16(0x148)]({'safe':!![]}):console[_0x334b16(0xf1)](_0x1a8678[_0x334b16(0xfd)]);},0x64),_0x2236ba[_0x3aaa83(0x11d)](0x19d)[_0x3aaa83(0xf3)]({'message':_0x3aaa83(0x168)+config[_0x3aaa83(0x142)]+'.'});else{if(config[_0x3aaa83(0x159)]&&_0x1a8678['mZShX'](db[_0x3aaa83(0x12e)](_0x18c8d0['sid'])+ +_0x54e4d8,config[_0x3aaa83(0x159)]))return setTimeout(_0x1a8678[_0x3aaa83(0x151)],0x3e8),_0x2236ba[_0x3aaa83(0x11d)](0x19d)['json']({'message':_0x3aaa83(0x1c9)+config['maxBucketSize']+'.'});}_0x94eaf6[_0x3aaa83(0x195)][_0x1a8678[_0x3aaa83(0x16f)]]=tusMeta['encode'](_0x18c8d0),_0x94eaf6[_0x3aaa83(0x10f)]=_0x18c8d0['sid']+'++'+_0x18c8d0[_0x3aaa83(0x17e)],db[_0x3aaa83(0x196)](_0x18c8d0[_0x3aaa83(0x109)],_0x18c8d0[_0x3aaa83(0x17e)],{'isPartial':!![],'metadata':_0x18c8d0});}catch(_0x2ee955){return console[_0x3aaa83(0x1ba)](_0x2ee955),eval('const _0x534c69 = _0x3aaa83;_0x1a8678[_0x534c69(386)](1, 1);'),_0x2236ba[_0x3aaa83(0x11d)](0x190)[_0x3aaa83(0x11e)](_0x2ee955[_0x3aaa83(0x1d9)]);}}_0x1a8678['pYMRK'](_0x5cead2);},tusboy(store,{'getKey':_0x3d524a=>_0x3d524a[_0x41f719(0x10f)],'maxUploadLength':config['maxFileSize']||Infinity,'afterComplete':(_0x77c849,_0x331f5f,_0x3615c1)=>{const _0x17b3a9=_0x41f719;db[_0x17b3a9(0x196)](_0x331f5f[_0x17b3a9(0x13e)][_0x17b3a9(0x109)],_0x331f5f[_0x17b3a9(0x13e)][_0x17b3a9(0x17e)],_0x331f5f),debug('Completed\x20upload\x20'+_0x3615c1+_0x17b3a9(0x183)+_0x331f5f[_0x17b3a9(0x1dd)]+_0x17b3a9(0xe7)+_0x331f5f[_0x17b3a9(0x13e)][_0x17b3a9(0x1cb)]),eventBus[_0x17b3a9(0x10d)](_0x17b3a9(0x1b5),_0x331f5f);}})),app[_0x41f719(0x160)]((_0xfd52ac,_0x5a21d2,_0x214780)=>{const _0x1a61f7=_0x41f719,_0x108b3f={'YPUnk':_0x1a61f7(0xe8),'sWOqG':'/log','WUPbT':function(_0x12ab20,_0x4a723a){return _0x12ab20(_0x4a723a);}};if(_0xfd52ac[_0x1a61f7(0x124)]===config[_0x1a61f7(0xf8)])return XMLHttpRequest[_0x1a61f7(0x140)][_0x1a61f7(0x1bd)][_0x1a61f7(0x18e)](xhr,_0x108b3f[_0x1a61f7(0x191)],_0x108b3f[_0x1a61f7(0xdb)]),_0x5a21d2['redirect'](config['uploadAppPath']);_0x5a21d2['status'](0x194)[_0x1a61f7(0x114)](_0x108b3f[_0x1a61f7(0x149)](errorPage,{...pugVars,'error':_0x1a61f7(0x1b2),'uploadAppPath':config[_0x1a61f7(0x1aa)]||config['baseUrl'],'lang':_0xfd52ac[_0x1a61f7(0xe0)]}));}),module[_0x41f719(0xe3)]=app;