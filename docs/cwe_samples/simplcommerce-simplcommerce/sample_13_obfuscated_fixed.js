const _0x19112b=_0x2308;function _0x5a5b(){const _0x515a89=['ZfNZq','tryGetPackage','allowDevAccounts','kXlCn','sha256','Rgszu','emailToken','NABNX','Uwhjc','6025752TZCdZI','XzZpy','974830hIwWoj','bFeqz','KajAB','insert','CHSDY','dFMGX','New\x20server\x20migrations\x20applied\x20elsewhere','stashedOldUser','migrations_applied','ILixI','find','replicaNumber','string','vXLXz','qCybU','ROOT_URL','storageUsage','KzBwA','indexOf','return','smtpUrl','packageId','findOne','pnrXA','unverifiedMail','organizationLdap','Sxwxs','nLjYn','grains','YfaaO','getProductivitySuiteAppIds','HYmjm','expires','wait','handle','Error\x20while\x20backfilling\x20grain\x20sizes:','sDUue','value','kjType','stop','Error\x20while\x20backfilling\x20grain\x20size\x20for','loginIdentities','require','accountId','jDWWg','zRdTH','localhost','sUIkh','note','auth','vxTTa','DqRyG','sessions','IFFHD','brOCq','identity','getIdentity','LunoQ','organizationEmail','lastIndexOf','yonJF','\x20/\x20','2CfNxTX','GfQxT','FcdkF','service','rusQa','Waiting\x20for\x20migrations\x20on\x20replica\x20zero...','wrapAsync','aggregate','observe','YogEk','roleAssignment','digest','UrKup','urRoC','LLCLF','ddRQk','pronoun','DXVPk','Applying\x20migration\x20','env','knxaf','BpHKm','grainId','EAfYu','keys','appTitle','cFuDI','NljkK','demo','WRNxR','admin','_id','fetch','hostname','xPkoZ','setTimeout','AzDZm','LWMDU','User\x20does\x20not\x20have\x20exactly\x20one\x20identity:\x20','owner','cantRenewFeatureKey','BKhvS','resume','lastActive','appIndex','hKjqr','signupEmail','vexLy','stack','user','ZtJpv','4747137tLxyhT','WNUnc','VuYHS','mhNXi','verified_email','ciIeR','new_server_migrations_applied','map','google','signupNote','petname','ServiceConfiguration','plan','services.emailToken','dfQMd','verifiedEmail','oaBeX','Migrations\x20have\x20completed\x20on\x20replica\x20zero.','GWCPR','Scphs','dZzzV','hasCompletedSignup','UqQtQ','ZEMtx','KqtOl','sharer','checking\x20PGP\x20signature\x20for\x20package:','wJzsi','identities','gmGBB','ufgNz','appIcon','XTNGp','getSystemSuiteAppIds','stJRB','uANAu','kItHr','WwKGe','MTXOq','github','eJSPd','devName','sendReferralProgramNotification','BjIvN','CILkR','PFpyd','failed','frontendRef','noODx','jfhEK','fibers/future','email','smtpConfig','8660246oKYluL','configurations','collections','pick','kYYJT','Migrations\x20applied\x20elsewhere:\x20','upsert','log','QOQqZ','getGrainStorageUsage','Applied\x20migration\x20','isAdmin','stagedServices','9438bbfRxj','JiSxp','remove','uOCDX','error','migrations','dCUlZ','forEach','$grainId','SxXwW','wOxXv','update','createHash','port','EPWUD','MklsW','QxDdA','cvUid','dev','lBXuu','HZqPA','services','picture','2557452TjXTui','apiTokens','BxcoY','zmxha','dAPqA','returnAddress','setPreinstalledApps','tokens','roleAssignments','khMqc','afLgK','name','cExIX','KypbS','extend','jupen','hFuzQ','Migrations\x20already\x20applied:\x20','crypto','packages','recipient','public','kGELj','JDHAb','organizationGoogle','48402945WDrWLf','nonloginIdentities','SNrLl','cap','https://apps.sandstorm.io','$unset','Thmic','organizationMembership','signupKeys','isReferralEnabled','profile','redirect','ocpfu','iUkdb','identityId','notifications','unverifiedEmail','WdxVp','size','parse','trialFeatureKeyExpired','KBCsW','hex','lastUsed','length','caJfm','noLogin','denormalizedGrainMetadata','RlFGY','vKQYj','isNumber','LFCjV','email:','E-mail\x20invite\x20to\x20','serverTitle','slice','bind','OmQIY','ThBvO','title','contacts','updateAppIndex','userActions','fOXpN','settings','tMhgz','appId','Running\x20new\x20server\x20startup\x20function\x20','PHnZD','gsqqp','ZSkxa','ZFUtv','signupKey','Fetching\x20user\x20picture:','main','yYEif','5365SERLig','KaJrd','users','concat','ejsrw'];_0x5a5b=function(){return _0x515a89;};return _0x5a5b();}(function(_0x3a19cd,_0x4ac63e){const _0x467973=_0x2308,_0x105d62=_0x3a19cd();while(!![]){try{const _0x55d85e=-parseInt(_0x467973(0x190))/0x1+parseInt(_0x467973(0x1ce))/0x2*(-parseInt(_0x467973(0x201))/0x3)+-parseInt(_0x467973(0x25a))/0x4+parseInt(_0x467973(0x180))/0x5*(-parseInt(_0x467973(0x243))/0x6)+parseInt(_0x467973(0x236))/0x7+-parseInt(_0x467973(0x18e))/0x8+parseInt(_0x467973(0x273))/0x9;if(_0x55d85e===_0x4ac63e)break;else _0x105d62['push'](_0x105d62['shift']());}catch(_0x34386a){_0x105d62['push'](_0x105d62['shift']());}}}(_0x5a5b,0xeeaff));import{Meteor}from'meteor/meteor';import{_}from'meteor/underscore';import{Match}from'meteor/check';import{userPictureUrl,fetchPicture}from'/imports/server/accounts/picture.js';import{waitPromise}from'/imports/server/async-helpers.js';const Future=Npm[_0x19112b(0x1ba)](_0x19112b(0x233)),Url=Npm[_0x19112b(0x1ba)]('url'),Crypto=Npm['require'](_0x19112b(0x26c)),updateLoginStyleToRedirect=function(_0x2b87c2,_0x5a697d){const _0x129609=_0x19112b,_0x1e3f5b={'ddRQk':function(_0x5177f4,_0x55259a){return _0x5177f4!==_0x55259a;},'BxcoY':'KzBwA','gmGBB':_0x129609(0x228)},_0x31590f=Package['service-configuration'][_0x129609(0x20c)][_0x129609(0x237)];['google',_0x1e3f5b[_0x129609(0x21e)]][_0x129609(0x24a)](function(_0x2fd217){const _0xeb4ec2=_0x129609,_0x1436dc=_0x31590f[_0xeb4ec2(0x1a6)]({'service':_0x2fd217});if(_0x1436dc&&_0x1e3f5b[_0xeb4ec2(0x1dd)](_0x1436dc['loginStyle'],_0xeb4ec2(0x153))){if(_0xeb4ec2(0x1a1)!==_0x1e3f5b[_0xeb4ec2(0x25c)]){const _0x4258af=_0x3aa51d[_0xeb4ec2(0x1f5)][_0xeb4ec2(0x1ff)][_0xeb4ec2(0x163)][_0xeb4ec2(0x220)];_0x2674b2[_0xeb4ec2(0x238)][_0xeb4ec2(0x25b)][_0xeb4ec2(0x24e)]({'_id':_0x2fff9d['_id']},{'$set':{'owner.user.denormalizedGrainMetadata.icon':_0x4258af},'$unset':{'owner.user.denormalizedGrainMetadata.appIcon':!![]}});}else _0x31590f['update']({'service':_0x2fd217},{'$set':{'loginStyle':_0xeb4ec2(0x153)}});}});},enableLegacyOAuthProvidersIfNotInSettings=function(_0x13ac15,_0x40a5ea){const _0x2602c0=_0x19112b,_0x425105={'LWMDU':_0x2602c0(0x209),'jaaQD':_0x2602c0(0x228)},_0x10ae1b=ServiceConfiguration[_0x2602c0(0x237)];[_0x425105[_0x2602c0(0x1f3)],_0x425105['jaaQD']]['forEach'](function(_0x3e4f63){const _0x118c74=_0x2602c0,_0x21479c=_0x10ae1b[_0x118c74(0x1a6)]({'service':_0x3e4f63}),_0x1710f1=_0x13ac15[_0x118c74(0x238)]['settings'][_0x118c74(0x1a6)]({'_id':_0x3e4f63});_0x21479c&&!_0x1710f1&&_0x13ac15[_0x118c74(0x238)]['settings'][_0x118c74(0x193)]({'_id':_0x3e4f63,'value':!![]});});},denormalizeInviteInfo=function(_0x4d8860,_0xd540fb){const _0x1a4b20=_0x19112b,_0x3521d2={'ZEMtx':function(_0x435db7,_0xb46b1e){return _0x435db7===_0xb46b1e;},'brOCq':_0x1a4b20(0x19c),'RlFGY':function(_0x2e6457,_0x5db84d){return _0x2e6457!==_0x5db84d;}};_0x4d8860[_0x1a4b20(0x238)][_0x1a4b20(0x182)][_0x1a4b20(0x19a)]()['forEach'](function(_0x4bfde4){const _0x181046=_0x1a4b20;if(_0x4bfde4[_0x181046(0x17c)]&&_0x3521d2[_0x181046(0x218)](typeof _0x4bfde4[_0x181046(0x17c)],_0x3521d2[_0x181046(0x1c6)])&&_0x3521d2[_0x181046(0x164)](_0x4bfde4[_0x181046(0x17c)],_0x181046(0x1ec))){const _0x49a34f=_0x4d8860[_0x181046(0x238)][_0x181046(0x150)]['findOne'](_0x4bfde4[_0x181046(0x17c)]);if(_0x49a34f&&_0x49a34f[_0x181046(0x1c0)]){const _0x31281f={'signupNote':_0x49a34f[_0x181046(0x1c0)]},_0x1f0957=_0x181046(0x169);_0x49a34f[_0x181046(0x1c0)]['lastIndexOf'](_0x1f0957)===0x0&&(_0x31281f['signupEmail']=_0x49a34f[_0x181046(0x1c0)][_0x181046(0x16b)](_0x1f0957['length'])),_0x4d8860[_0x181046(0x238)][_0x181046(0x182)][_0x181046(0x24e)](_0x4bfde4['_id'],{'$set':_0x31281f});}}});},mergeRoleAssignmentsIntoApiTokens=function(_0x364482,_0x169790){const _0x3b358b=_0x19112b;_0x364482[_0x3b358b(0x238)][_0x3b358b(0x262)][_0x3b358b(0x19a)]()[_0x3b358b(0x24a)](function(_0x2b8f8b){const _0x2cd175=_0x3b358b;_0x364482[_0x2cd175(0x238)]['apiTokens']['insert']({'grainId':_0x2b8f8b[_0x2cd175(0x1e4)],'userId':_0x2b8f8b[_0x2cd175(0x21a)],'roleAssignment':_0x2b8f8b[_0x2cd175(0x1d8)],'petname':_0x2b8f8b[_0x2cd175(0x20b)],'created':_0x2b8f8b['created'],'owner':{'user':{'userId':_0x2b8f8b[_0x2cd175(0x26e)],'title':_0x2b8f8b[_0x2cd175(0x16f)]}}});});},fixOasisStorageUsageStats=function(_0x2d506c,_0x1f82da){},fetchProfilePictures=function(_0x3dba42,_0x5d1674){const _0x4d243f=_0x19112b,_0x10c576={'gsqqp':function(_0x105345,_0x10dd44,_0x4ec046){return _0x105345(_0x10dd44,_0x4ec046);},'WNUnc':function(_0x5d93d9,_0x3870cd){return _0x5d93d9===_0x3870cd;},'cvUid':_0x4d243f(0x1db),'yYEif':'Fetching\x20user\x20picture:','buaqA':function(_0x365cb0,_0x1c1992,_0x29987e){return _0x365cb0(_0x1c1992,_0x29987e);}};_0x3dba42[_0x4d243f(0x238)][_0x4d243f(0x182)][_0x4d243f(0x19a)]({})[_0x4d243f(0x24a)](function(_0x355100){const _0x2c9f85=_0x4d243f,_0x3dfe00={'sUIkh':_0x2c9f85(0x17d),'zzNEY':function(_0x120ce0,_0x43695f,_0x43e4d8){const _0x5d74a4=_0x2c9f85;return _0x10c576[_0x5d74a4(0x179)](_0x120ce0,_0x43695f,_0x43e4d8);}},_0x3fcf98=userPictureUrl(_0x355100);if(_0x3fcf98){if(_0x10c576[_0x2c9f85(0x202)](_0x10c576[_0x2c9f85(0x254)],'urRoC')){console[_0x2c9f85(0x23d)](_0x10c576[_0x2c9f85(0x17f)],_0x3fcf98);const _0x301196=_0x10c576['buaqA'](fetchPicture,_0x3dba42,_0x3fcf98);_0x301196&&_0x3dba42['collections'][_0x2c9f85(0x182)][_0x2c9f85(0x24e)](_0x355100['_id'],{'$set':{'profile.picture':_0x301196}});}else _0x272ea3[_0x2c9f85(0x238)]['users'][_0x2c9f85(0x19a)]({})[_0x2c9f85(0x24a)](function(_0x3b75e8){const _0x446016=_0x2c9f85,_0x420ac4=_0x5a1ccc(_0x3b75e8);if(_0x420ac4){_0x497779[_0x446016(0x23d)](_0x3dfe00[_0x446016(0x1bf)],_0x420ac4);const _0x39062a=_0x3dfe00['zzNEY'](_0x419536,_0x366b50,_0x420ac4);_0x39062a&&_0x503b37[_0x446016(0x238)]['users'][_0x446016(0x24e)](_0x3b75e8[_0x446016(0x1ed)],{'$set':{'profile.picture':_0x39062a}});}});}});},assignPlans=function(_0x5acda3,_0x12a782){},removeKeyrings=function(_0x5db914,_0x23d7d8){const _0x6bc518=_0x19112b;_0x5db914[_0x6bc518(0x238)]['packages']['update']({'manifest.metadata.pgpKeyring':{'$exists':!![]}},{'$unset':{'manifest.metadata.pgpKeyring':''}},{'multi':!![]});},useLocalizedTextInUserActions=function(_0x1f61ee,_0x1b13f6){const _0x41e3d7=_0x19112b,_0xad503a={'FcdkF':function(_0x436020,_0x476ffa){return _0x436020===_0x476ffa;},'vxTTa':_0x41e3d7(0x19c),'PHnZD':function(_0x413b5e,_0x332b42,_0x54e71e,_0x2709d5){return _0x413b5e(_0x332b42,_0x54e71e,_0x2709d5);},'dfQMd':_0x41e3d7(0x16f),'WRNxR':function(_0x1e6f58,_0x28fe1e,_0x7f42ee,_0x3bd5d6){return _0x1e6f58(_0x28fe1e,_0x7f42ee,_0x3bd5d6);},'QxDdA':'nounPhrase'};function _0x27b57c(_0x59d56e,_0x556a9f,_0x4031d6){const _0x48352c=_0x41e3d7;_0x4031d6 in _0x556a9f&&(_0xad503a[_0x48352c(0x1d0)](typeof _0x556a9f[_0x4031d6],_0xad503a[_0x48352c(0x1c2)])?_0x59d56e[_0x4031d6]={'defaultText':_0x556a9f[_0x4031d6]}:_0x59d56e[_0x4031d6]=_0x556a9f[_0x4031d6]);}_0x1f61ee[_0x41e3d7(0x238)][_0x41e3d7(0x172)][_0x41e3d7(0x19a)]({})[_0x41e3d7(0x24a)](function(_0x1b7df7){const _0x481cd7=_0x41e3d7,_0x4c1784={};_0xad503a[_0x481cd7(0x178)](_0x27b57c,_0x4c1784,_0x1b7df7,_0x481cd7(0x1e7)),_0x27b57c(_0x4c1784,_0x1b7df7,_0xad503a[_0x481cd7(0x20f)]),_0xad503a[_0x481cd7(0x1eb)](_0x27b57c,_0x4c1784,_0x1b7df7,_0xad503a[_0x481cd7(0x253)]),_0x1f61ee['collections'][_0x481cd7(0x172)][_0x481cd7(0x24e)](_0x1b7df7[_0x481cd7(0x1ed)],{'$set':_0x4c1784});});},verifyAllPgpSignatures=function(_0x55487b,_0x1f0716){const _0x272068=_0x19112b,_0x27d2d9={'lBXuu':function(_0x1b3c9d,_0x1a2418){return _0x1b3c9d(_0x1a2418);},'UqQtQ':_0x272068(0x235),'cExIX':_0x272068(0x21b),'QOQqZ':function(_0x66e9fb,_0x4e05ee){return _0x66e9fb+_0x4e05ee;},'WdxVp':_0x272068(0x211)};_0x55487b[_0x272068(0x238)][_0x272068(0x26d)][_0x272068(0x19a)]({})[_0x272068(0x24a)](function(_0x22abc6){const _0x2fc758=_0x272068;try{console['log'](_0x27d2d9[_0x2fc758(0x266)],_0x22abc6[_0x2fc758(0x1ed)]);const _0x2290d1=waitPromise(_0x1f0716[_0x2fc758(0x276)]()[_0x2fc758(0x186)](_0x22abc6['_id']));if(_0x2290d1['authorPgpKeyFingerprint'])console[_0x2fc758(0x23d)](_0x27d2d9[_0x2fc758(0x23e)]('\x20\x20',_0x2290d1['authorPgpKeyFingerprint'])),_0x55487b[_0x2fc758(0x238)][_0x2fc758(0x26d)][_0x2fc758(0x24e)](_0x22abc6[_0x2fc758(0x1ed)],{'$set':{'authorPgpKeyFingerprint':_0x2290d1['authorPgpKeyFingerprint']}});else{if(_0x27d2d9['WdxVp']!==_0x27d2d9[_0x2fc758(0x159)]){const _0x57d50d=_0x58667d[_0x2fc758(0x1b5)];_0x57d50d['port']&&(_0x57d50d[_0x2fc758(0x250)]=_0x322b00[_0x2fc758(0x166)](_0x57d50d[_0x2fc758(0x250)])?_0x57d50d[_0x2fc758(0x250)]:_0x27d2d9[_0x2fc758(0x256)](_0xa9b459,_0x57d50d[_0x2fc758(0x250)]),_0xd695ac[_0x2fc758(0x238)][_0x2fc758(0x174)][_0x2fc758(0x23c)]({'_id':_0x27d2d9[_0x2fc758(0x217)]},{'value':_0x57d50d}));}else console['log']('\x20\x20no\x20signature');}}catch(_0xa27c74){console[_0x2fc758(0x247)](_0xa27c74[_0x2fc758(0x1fe)]);}});},splitUserIdsIntoAccountIdsAndIdentityIds=function(_0x38563b,_0x1bdbd0){const _0x324bbb=_0x19112b,_0xbb759e={'pnrXA':_0x324bbb(0x255),'stJRB':function(_0x31f75d,_0xa9ac48){return _0x31f75d in _0xa9ac48;},'jDWWg':_0x324bbb(0x1ea),'kGELj':function(_0x3bb64e,_0x2ceee9){return _0x3bb64e in _0x2ceee9;},'knxaf':_0x324bbb(0x209),'EAfYu':_0x324bbb(0x18b),'vXLXz':function(_0x305138,_0x2dae0a){return _0x305138===_0x2dae0a;},'ILixI':_0x324bbb(0x18c),'HYmjm':_0x324bbb(0x195),'WwKGe':function(_0x5d709c,_0x492ef9){return _0x5d709c>_0x492ef9;}};_0x38563b[_0x324bbb(0x238)]['users'][_0x324bbb(0x19a)]()[_0x324bbb(0x24a)](function(_0x12f718){const _0x717af1=_0x324bbb,_0x9b62de={};let _0x15f464;if(_0x717af1(0x22a)in _0x12f718)_0x9b62de[_0x717af1(0x1d1)]=_0xbb759e[_0x717af1(0x1a7)],_0x15f464=_0x12f718[_0x717af1(0x22a)];else{if(_0xbb759e[_0x717af1(0x223)](_0x717af1(0x1b0),_0x12f718))_0x9b62de[_0x717af1(0x1d1)]=_0xbb759e[_0x717af1(0x1bc)],_0x15f464=_0x12f718['_id'];else{if(_0x12f718[_0x717af1(0x258)]&&_0xbb759e[_0x717af1(0x270)](_0xbb759e[_0x717af1(0x1e2)],_0x12f718[_0x717af1(0x258)]))_0x9b62de[_0x717af1(0x1d1)]='google',_0x12f718[_0x717af1(0x258)][_0x717af1(0x209)]['email']&&_0x12f718[_0x717af1(0x258)][_0x717af1(0x209)][_0x717af1(0x205)]&&(_0x9b62de[_0x717af1(0x210)]=_0x12f718['services'][_0x717af1(0x209)][_0x717af1(0x234)]),_0x15f464=_0x12f718[_0x717af1(0x258)][_0x717af1(0x209)]['id'];else{if(_0x12f718[_0x717af1(0x258)]&&_0x717af1(0x228)in _0x12f718[_0x717af1(0x258)])_0x9b62de[_0x717af1(0x1d1)]=_0x717af1(0x228),_0x9b62de[_0x717af1(0x158)]=_0x12f718[_0x717af1(0x258)][_0x717af1(0x228)]['email'],_0x15f464=_0x12f718[_0x717af1(0x258)][_0x717af1(0x228)]['id'];else _0x12f718[_0x717af1(0x258)]&&_0xbb759e[_0x717af1(0x1e5)]in _0x12f718[_0x717af1(0x258)]&&(_0x9b62de[_0x717af1(0x1d1)]=_0x717af1(0x18b),_0x9b62de[_0x717af1(0x210)]=_0x12f718[_0x717af1(0x258)][_0x717af1(0x18b)][_0x717af1(0x234)],_0x15f464=_0x12f718[_0x717af1(0x258)]['emailToken']['email']);}}}_0x9b62de['id']=Crypto[_0x717af1(0x24f)]('sha256')[_0x717af1(0x24e)](_0x9b62de[_0x717af1(0x1d1)]+':'+_0x15f464)[_0x717af1(0x1d9)](_0x717af1(0x15e));_0x12f718[_0x717af1(0x152)]&&(_0xbb759e[_0x717af1(0x19d)](_0x717af1(0x1ad),_0x717af1(0x194))?_0x594a9f[_0x717af1(0x1b5)]&&(_0x2d2581[_0x717af1(0x23d)](_0x717af1(0x196)),_0xbdf9b7['return']()):(_0x12f718[_0x717af1(0x152)][_0x717af1(0x265)]&&(_0x9b62de['name']=_0x12f718[_0x717af1(0x152)]['name']),_0x12f718['profile'][_0x717af1(0x1b2)]&&(_0xbb759e[_0x717af1(0x19d)](_0x717af1(0x214),_0xbb759e[_0x717af1(0x199)])?(_0x1bb452[_0x717af1(0x238)]['grains']['update']({},{'$set':{'ownerSeenAllActivity':!![]}},{'multi':!![]}),_0x1fdc65[_0x717af1(0x238)][_0x717af1(0x25b)]['update']({'owner.user':{'$exists':!![]}},{'$set':{'owner.user.seenAllActivity':!![]}},{'multi':!![]})):_0x9b62de['handle']=_0x12f718[_0x717af1(0x152)][_0x717af1(0x1b2)]),_0x12f718['profile']['picture']&&(_0x9b62de[_0x717af1(0x259)]=_0x12f718[_0x717af1(0x152)][_0x717af1(0x259)]),_0x12f718[_0x717af1(0x152)][_0x717af1(0x1de)]&&(_0x9b62de[_0x717af1(0x1de)]=_0x12f718['profile']['pronoun']),_0x12f718[_0x717af1(0x152)][_0x717af1(0x234)]&&(_0xbb759e[_0x717af1(0x1af)]!==_0x717af1(0x195)?_0x18636c[_0x717af1(0x22b)](_0x6f6f57[_0x717af1(0x1ed)]):_0x9b62de[_0x717af1(0x158)]=_0x12f718['profile'][_0x717af1(0x234)])));_0x9b62de[_0x717af1(0x17e)]=!![],_0x38563b[_0x717af1(0x238)][_0x717af1(0x182)][_0x717af1(0x24e)](_0x12f718[_0x717af1(0x1ed)],{'$set':{'identities':[_0x9b62de]}}),_0x38563b[_0x717af1(0x238)][_0x717af1(0x1ac)]['update']({'userId':_0x12f718[_0x717af1(0x1ed)]},{'$set':{'identityId':_0x9b62de['id']}},{'multi':!![]}),_0x38563b['collections'][_0x717af1(0x1c4)][_0x717af1(0x24e)]({'userId':_0x12f718['_id']},{'$set':{'identityId':_0x9b62de['id']}},{'multi':!![]}),_0x38563b[_0x717af1(0x238)]['apiTokens']['update']({'userId':_0x12f718[_0x717af1(0x1ed)]},{'$set':{'identityId':_0x9b62de['id']}},{'multi':!![]}),_0x38563b['collections'][_0x717af1(0x25b)]['update']({'owner.user.userId':_0x12f718[_0x717af1(0x1ed)]},{'$set':{'owner.user.identityId':_0x9b62de['id']}},{'multi':!![]}),_0x38563b[_0x717af1(0x238)][_0x717af1(0x25b)]['update']({'owner.grain.introducerUser':_0x12f718[_0x717af1(0x1ed)]},{'$set':{'owner.grain.introducerIdentity':_0x9b62de['id']}},{'multi':!![]});while(_0xbb759e[_0x717af1(0x226)](_0x38563b[_0x717af1(0x238)][_0x717af1(0x25b)]['update']({'requirements.permissionsHeld.userId':_0x12f718['_id']},{'$set':{'requirements.$.permissionsHeld.identityId':_0x9b62de['id']},'$unset':{'requirements.$.permissionsHeld.userId':0x1}},{'multi':!![]}),0x0));}),_0x38563b['collections'][_0x324bbb(0x25b)][_0x324bbb(0x245)]({'userInfo':{'$exists':!![]}});},appUpdateSettings=function(_0x3063a9,_0x1b2090){const _0x9da37b=_0x19112b,_0x4edbbe={'xPkoZ':_0x9da37b(0x277),'hFuzQ':'appIndexUrl'};_0x3063a9[_0x9da37b(0x238)][_0x9da37b(0x174)][_0x9da37b(0x193)]({'_id':'appMarketUrl','value':_0x4edbbe[_0x9da37b(0x1f0)]}),_0x3063a9['collections'][_0x9da37b(0x174)][_0x9da37b(0x193)]({'_id':_0x4edbbe[_0x9da37b(0x26a)],'value':'https://app-index.sandstorm.io'}),_0x3063a9[_0x9da37b(0x238)][_0x9da37b(0x174)][_0x9da37b(0x193)]({'_id':'appUpdatesEnabled','value':!![]});},moveDevAndEmailLoginDataIntoIdentities=function(_0x3f4e98,_0x360fd5){const _0x54b295=_0x19112b,_0x72e476={'bFeqz':function(_0x58f9e0,_0x477bbb){return _0x58f9e0!==_0x477bbb;},'HZqPA':'noLogin','PFpyd':_0x54b295(0x265),'JDHAb':_0x54b295(0x1b2),'VuYHS':_0x54b295(0x14e),'ZtJpv':_0x54b295(0x1aa),'XzZpy':_0x54b295(0x20e),'iUkdb':function(_0x579c91,_0x5c158b){return _0x579c91>_0x5c158b;}};_0x3f4e98[_0x54b295(0x238)][_0x54b295(0x182)][_0x54b295(0x19a)]()[_0x54b295(0x24a)](function(_0x5e3ebd){const _0x3845c5=_0x54b295;if(_0x72e476[_0x3845c5(0x191)](_0x5e3ebd[_0x3845c5(0x21d)][_0x3845c5(0x160)],0x1))throw new Error('User\x20does\x20not\x20have\x20exactly\x20one\x20identity:\x20',_0x5e3ebd);const _0x1355a7=_0x5e3ebd['identities'][0x0];if(Match['test'](_0x1355a7[_0x3845c5(0x1d1)],Object))return;const _0x545838=_[_0x3845c5(0x239)](_0x1355a7,'id',_0x3845c5(0x17e),_0x72e476[_0x3845c5(0x257)],_0x3845c5(0x210),_0x3845c5(0x158));_0x545838[_0x3845c5(0x152)]=_['pick'](_0x1355a7,_0x72e476[_0x3845c5(0x22e)],_0x72e476[_0x3845c5(0x271)],'picture',_0x3845c5(0x1de));const _0x5017ca={},_0x4d4082={};if(_0x1355a7[_0x3845c5(0x1d1)]==='dev')_0x5017ca[_0x3845c5(0x265)]=_0x5e3ebd[_0x3845c5(0x22a)],_0x4d4082['devName']=0x1;else{if(_0x1355a7[_0x3845c5(0x1d1)]==='emailToken'){if(_0x72e476[_0x3845c5(0x203)]===_0x72e476[_0x3845c5(0x200)]){const _0x12c380=_0xf801f8[_0x3845c5(0x1a6)]({'service':_0xfabf1b}),_0x21dda5=_0x5e35fe['collections'][_0x3845c5(0x174)][_0x3845c5(0x1a6)]({'_id':_0x2e8925});_0x12c380&&!_0x21dda5&&_0x2e407c[_0x3845c5(0x238)]['settings'][_0x3845c5(0x193)]({'_id':_0x2dc4e1,'value':!![]});}else _0x5017ca[_0x3845c5(0x261)]=_0x5e3ebd[_0x3845c5(0x258)][_0x3845c5(0x18b)][_0x3845c5(0x261)],_0x5017ca[_0x3845c5(0x234)]=_0x5e3ebd[_0x3845c5(0x258)]['emailToken'][_0x3845c5(0x234)],_0x4d4082[_0x72e476[_0x3845c5(0x18f)]]=0x1;}}_0x545838[_0x3845c5(0x1d1)]={},_0x545838[_0x3845c5(0x1d1)][_0x1355a7['service']]=_0x5017ca;const _0x426455={'$set':{'identities':[_0x545838]}};_0x72e476[_0x3845c5(0x155)](Object['keys'](_0x4d4082)[_0x3845c5(0x160)],0x0)&&(_0x426455[_0x3845c5(0x14d)]=_0x4d4082),_0x3f4e98[_0x3845c5(0x238)][_0x3845c5(0x182)][_0x3845c5(0x24e)]({'_id':_0x5e3ebd[_0x3845c5(0x1ed)]},_0x426455);});},repairEmailIdentityIds=function(_0x1495d0,_0x508ba9){const _0x1806df=_0x19112b,_0x23ca0b={'ZSkxa':function(_0x403490,_0x118e89){return _0x403490!==_0x118e89;},'kXlCn':_0x1806df(0x162),'GfQxT':'verifiedEmail','YogEk':_0x1806df(0x1a8),'afLgK':function(_0x3aca9a,_0x31f46f){return _0x3aca9a+_0x31f46f;}};_0x1495d0[_0x1806df(0x238)][_0x1806df(0x182)][_0x1806df(0x19a)]({'identities.service.emailToken':{'$exists':0x1}})[_0x1806df(0x24a)](function(_0x54ef07){const _0x458c19=_0x1806df;if(_0x23ca0b[_0x458c19(0x17a)](_0x54ef07[_0x458c19(0x21d)][_0x458c19(0x160)],0x1))throw new Error(_0x458c19(0x1f4),_0x54ef07);const _0x1618cb=_0x54ef07['identities'][0x0],_0x417c0a=_['pick'](_0x1618cb,_0x458c19(0x17e),_0x23ca0b[_0x458c19(0x188)],_0x23ca0b[_0x458c19(0x1cf)],_0x23ca0b[_0x458c19(0x1d7)],_0x458c19(0x152));_0x417c0a[_0x458c19(0x1d1)]={'email':_0x1618cb[_0x458c19(0x1d1)][_0x458c19(0x18b)]},_0x417c0a['id']=Crypto[_0x458c19(0x24f)](_0x458c19(0x189))[_0x458c19(0x24e)](_0x23ca0b[_0x458c19(0x264)]('email:',_0x1618cb['service'][_0x458c19(0x18b)][_0x458c19(0x234)]))[_0x458c19(0x1d9)](_0x458c19(0x15e)),_0x1495d0[_0x458c19(0x238)][_0x458c19(0x1ac)]['update']({'identityId':_0x1618cb['id']},{'$set':{'identityId':_0x417c0a['id']}},{'multi':!![]}),_0x1495d0[_0x458c19(0x238)][_0x458c19(0x1c4)]['update']({'identityId':_0x1618cb['id']},{'$set':{'identityId':_0x417c0a['id']}},{'multi':!![]}),_0x1495d0[_0x458c19(0x238)][_0x458c19(0x25b)]['update']({'identityId':_0x1618cb['id']},{'$set':{'identityId':_0x417c0a['id']}},{'multi':!![]}),_0x1495d0[_0x458c19(0x238)]['apiTokens'][_0x458c19(0x24e)]({'owner.user.identityId':_0x1618cb['id']},{'$set':{'owner.user.identityId':_0x417c0a['id']}},{'multi':!![]}),_0x1495d0['collections'][_0x458c19(0x25b)][_0x458c19(0x24e)]({'owner.grain.introducerIdentity':_0x1618cb['id']},{'$set':{'owner.grain.introducerIdentity':_0x417c0a['id']}},{'multi':!![]});while(_0x1495d0[_0x458c19(0x238)][_0x458c19(0x25b)]['update']({'requirements.permissionsHeld.identityId':_0x1618cb['id']},{'$set':{'requirements.$.permissionsHeld.identityId':_0x417c0a['id']}},{'multi':!![]})>0x0);_0x1495d0[_0x458c19(0x238)]['users'][_0x458c19(0x24e)]({'_id':_0x54ef07['_id']},{'$set':{'identities':[_0x417c0a]}});});},splitAccountUsersAndIdentityUsers=function(_0x53599b,_0x4251d3){const _0x5e36fa=_0x19112b,_0x4374c6={'IFFHD':_0x5e36fa(0x207),'CDvep':'emailToken','JiSxp':function(_0xf43e0a,_0x322a3b){return _0xf43e0a!==_0x322a3b;},'mhNXi':_0x5e36fa(0x1f9),'Uwhjc':_0x5e36fa(0x1b0),'KaJrd':function(_0xad1bb4,_0x3ac2ee){return _0xad1bb4!==_0x3ac2ee;},'MTXOq':_0x5e36fa(0x24c),'DXVPk':function(_0x28f8b8,_0x3eef71){return _0x28f8b8===_0x3eef71;},'zRdTH':'NAQfg','rWiDu':'createdAt','khMqc':_0x5e36fa(0x241),'dAPqA':_0x5e36fa(0x20a),'dZzzV':'isAppDemoUser','gkMbQ':'appDemoId','IbONB':'payments','wOxXv':_0x5e36fa(0x216),'LunoQ':_0x5e36fa(0x1cc),'nLjYn':'efdtP'};_0x53599b['collections'][_0x5e36fa(0x182)][_0x5e36fa(0x19a)]({'identities':{'$exists':!![]}})[_0x5e36fa(0x24a)](function(_0x1a9d54){const _0x4968a9=_0x5e36fa,_0x5ac8d8={'EPWUD':_0x4374c6['CDvep']};if(_0x1a9d54[_0x4968a9(0x21d)][_0x4968a9(0x160)]!==0x1){if(_0x4374c6[_0x4968a9(0x244)](_0x4968a9(0x246),_0x4968a9(0x246)))_0x3973d6[_0x4968a9(0x238)][_0x4968a9(0x248)][_0x4968a9(0x193)]({'_id':'migrations_applied','value':0x0}),_0x25c000=0x0,_0x4bc770[_0x4968a9(0x238)][_0x4968a9(0x248)][_0x4968a9(0x193)]({'_id':_0x4374c6[_0x4968a9(0x1c5)],'value':![]});else throw new Error(_0x4968a9(0x1f4),_0x1a9d54);}const _0x292c0c=_0x1a9d54[_0x4968a9(0x21d)][0x0],_0x49c8f0=_[_0x4968a9(0x239)](_0x1a9d54,'createdAt',_0x4374c6[_0x4968a9(0x204)],_0x4374c6[_0x4968a9(0x18d)]);_0x49c8f0['_id']=_0x292c0c['id'],_0x49c8f0[_0x4968a9(0x152)]=_0x292c0c[_0x4968a9(0x152)],_[_0x4968a9(0x268)](_0x49c8f0,_[_0x4968a9(0x239)](_0x292c0c,'unverifiedEmail')),_0x49c8f0['profile'][_0x4968a9(0x1d1)]=Object[_0x4968a9(0x1e6)](_0x292c0c[_0x4968a9(0x1d1)])[0x0],_0x49c8f0[_0x4968a9(0x242)]=_['omit'](_0x1a9d54['services'],'resume');if(_0x292c0c[_0x4968a9(0x1d1)][_0x4968a9(0x255)]){if(_0x4374c6[_0x4968a9(0x181)](_0x4968a9(0x24c),_0x4374c6[_0x4968a9(0x227)]))return;else _0x49c8f0['stagedServices'][_0x4968a9(0x255)]=_0x292c0c[_0x4968a9(0x1d1)][_0x4968a9(0x255)];}else _0x292c0c[_0x4968a9(0x1d1)][_0x4968a9(0x234)]&&(_0x4374c6[_0x4968a9(0x1df)]('NAQfg',_0x4374c6[_0x4968a9(0x1bd)])?_0x49c8f0['stagedServices'][_0x4968a9(0x234)]=_0x292c0c[_0x4968a9(0x1d1)][_0x4968a9(0x234)]:(_0x588eef[_0x4968a9(0x1d1)]=_0x5ac8d8[_0x4968a9(0x251)],_0x11ee5c['verifiedEmail']=_0x6804c4[_0x4968a9(0x258)][_0x4968a9(0x18b)][_0x4968a9(0x234)],_0x9b9d50=_0x5602b1[_0x4968a9(0x258)]['emailToken'][_0x4968a9(0x234)]));const _0x4d8fd6=_['pick'](_0x1a9d54,'_id',_0x4374c6['rWiDu'],_0x4374c6[_0x4968a9(0x204)],_0x4968a9(0x1b0),_0x4374c6[_0x4968a9(0x263)],_0x4968a9(0x17c),_0x4374c6[_0x4968a9(0x25e)],'signupEmail',_0x4968a9(0x20d),_0x4968a9(0x1a0),_0x4374c6[_0x4968a9(0x215)],_0x4374c6['gkMbQ'],_0x4374c6['IbONB'],'dailySentMailCount',_0x4374c6[_0x4968a9(0x24d)]);_0x4d8fd6[_0x4968a9(0x1b9)]=[_[_0x4968a9(0x239)](_0x292c0c,'id')],_0x4d8fd6[_0x4968a9(0x274)]=[],_0x1a9d54['services']&&_0x1a9d54[_0x4968a9(0x258)]['resume']&&(_0x4d8fd6[_0x4968a9(0x258)]={'resume':_0x1a9d54[_0x4968a9(0x258)][_0x4968a9(0x1f8)]}),_0x4d8fd6[_0x4968a9(0x197)]=_0x1a9d54,_0x53599b[_0x4968a9(0x238)][_0x4968a9(0x25b)]['update']({'identityId':_0x49c8f0[_0x4968a9(0x1ed)]},{'$set':{'accountId':_0x1a9d54[_0x4968a9(0x1ed)]}},{'multi':!![]}),_0x53599b[_0x4968a9(0x238)]['users'][_0x4968a9(0x23c)]({'_id':_0x49c8f0[_0x4968a9(0x1ed)]},_0x49c8f0),_0x53599b[_0x4968a9(0x238)][_0x4968a9(0x182)][_0x4968a9(0x24e)]({'_id':_0x1a9d54['_id']},_0x4d8fd6);}),_0x53599b['collections'][_0x5e36fa(0x182)][_0x5e36fa(0x19a)]({'stagedServices':{'$exists':!![]}})[_0x5e36fa(0x24a)](function(_0xfd5adb){const _0x572de1=_0x5e36fa;_0x4374c6[_0x572de1(0x1c9)]!==_0x4374c6[_0x572de1(0x1ab)]?_0x53599b[_0x572de1(0x238)][_0x572de1(0x182)][_0x572de1(0x24e)]({'_id':_0xfd5adb[_0x572de1(0x1ed)]},{'$unset':{'stagedServices':0x1},'$set':{'services':_0xfd5adb[_0x572de1(0x242)]}}):(_0x50c8bf[_0x572de1(0x247)]('Error\x20while\x20backfilling\x20grain\x20size\x20for',_0x358576[_0x572de1(0x1ed)],':',_0x32a369[_0x572de1(0x1fe)]),_0xd4b122[_0x572de1(0x238)][_0x572de1(0x1ac)][_0x572de1(0x24e)]({'_id':_0x5379ab[_0x572de1(0x1ed)],'size':{'$exists':![]}},{'$set':{'size':0x0}}));});},populateContactsFromApiTokens=function(_0x353d8f,_0x37265b){const _0x5e3e9d=_0x19112b;_0x353d8f[_0x5e3e9d(0x238)][_0x5e3e9d(0x25b)][_0x5e3e9d(0x19a)]({'owner.user.identityId':{'$exists':0x1},'accountId':{'$exists':0x1}})[_0x5e3e9d(0x24a)](function(_0x5dbe0d){const _0x23a40b=_0x5e3e9d,_0x49ec06=_0x5dbe0d[_0x23a40b(0x1f5)]['user'][_0x23a40b(0x156)],_0x22dd16=_0x353d8f[_0x23a40b(0x1c8)](_0x49ec06);if(_0x22dd16){const _0xa058e9=_0x22dd16['profile'];_0x353d8f[_0x23a40b(0x238)][_0x23a40b(0x170)]['upsert']({'ownerId':_0x5dbe0d[_0x23a40b(0x1bb)],'identityId':_0x49ec06},{'ownerId':_0x5dbe0d[_0x23a40b(0x1bb)],'petname':_0xa058e9&&_0xa058e9['name'],'created':new Date(),'identityId':_0x49ec06,'profile':_0xa058e9});}});},cleanUpApiTokens=function(_0x48c370,_0x4f2103){const _0xf9f512=_0x19112b,_0x1be98c={'sDUue':function(_0x1ecad2,_0x52360d){return _0x1ecad2(_0x52360d);}};_0x48c370['collections'][_0xf9f512(0x25b)][_0xf9f512(0x245)]({'userId':{'$exists':!![]},'identityId':{'$exists':![]}}),_0x48c370[_0xf9f512(0x238)]['apiTokens']['remove']({'owner.user.userId':{'$exists':!![]},'owner.user.identityId':{'$exists':![]}}),_0x48c370['collections'][_0xf9f512(0x25b)][_0xf9f512(0x19a)]({'owner.user.denormalizedGrainMetadata.appIcon':{'$exists':!![]}})[_0xf9f512(0x24a)](function(_0x4d1353){const _0x291d16=_0xf9f512,_0x1917e0=_0x4d1353[_0x291d16(0x1f5)][_0x291d16(0x1ff)][_0x291d16(0x163)][_0x291d16(0x220)];_0x48c370[_0x291d16(0x238)][_0x291d16(0x25b)][_0x291d16(0x24e)]({'_id':_0x4d1353[_0x291d16(0x1ed)]},{'$set':{'owner.user.denormalizedGrainMetadata.icon':_0x1917e0},'$unset':{'owner.user.denormalizedGrainMetadata.appIcon':!![]}});});function _0x2b041f(_0x4f4d94){const _0x5239e0=_0xf9f512;_0x48c370[_0x5239e0(0x238)][_0x5239e0(0x25b)][_0x5239e0(0x19a)]({'parentToken':_0x4f4d94['_id'],'grainId':{'$exists':!![]},'identityId':{'$exists':![]}})[_0x5239e0(0x24a)](function(_0x50b11f){const _0x18e871=_0x5239e0;_0x48c370[_0x18e871(0x238)][_0x18e871(0x25b)][_0x18e871(0x24e)]({'_id':_0x50b11f[_0x18e871(0x1ed)]},{'$set':{'identityId':_0x4f4d94[_0x18e871(0x156)]}}),_0x1be98c[_0x18e871(0x1b4)](_0x2b041f,_0x50b11f);});}_0x48c370[_0xf9f512(0x238)][_0xf9f512(0x25b)][_0xf9f512(0x19a)]({'grainId':{'$exists':!![]},'identityId':{'$exists':!![]},'parentToken':{'$exists':![]}})['forEach'](_0x2b041f);},initServerTitleAndReturnAddress=function(_0x137694,_0x53a64d){const _0x7f8995=_0x19112b,_0x99b5f9={'KOrpd':function(_0x1475d0,_0x585a0f){return _0x1475d0+_0x585a0f;}},_0x1e4849=Url[_0x7f8995(0x15b)](process[_0x7f8995(0x1e1)][_0x7f8995(0x19f)])[_0x7f8995(0x1ef)];_0x137694[_0x7f8995(0x238)][_0x7f8995(0x174)][_0x7f8995(0x193)]({'_id':_0x7f8995(0x16a),'value':_0x1e4849}),_0x137694[_0x7f8995(0x238)]['settings']['insert']({'_id':_0x7f8995(0x25f),'value':_0x99b5f9['KOrpd']('no-reply@',_0x1e4849)});},sendReferralNotifications=function(_0x149278,_0x48e969){const _0x335604=_0x19112b;_0x149278[_0x335604(0x151)]()&&_0x149278[_0x335604(0x238)][_0x335604(0x182)][_0x335604(0x19a)]({'loginIdentities':{'$exists':!![]},'expires':{'$exists':![]}},{'fields':{'_id':0x1}})['forEach'](function(_0x45c1c2){_0x149278['sendReferralProgramNotification'](_0x45c1c2['_id']);});},assignBonuses=function(_0x3c6f06,_0x30f9c2){},splitSmtpUrl=function(_0x59f27c,_0x267616){const _0x45a230=_0x19112b,_0x2e1c5a={'ESjqX':_0x45a230(0x1be),'exMsX':_0x45a230(0x16e),'BKhvS':function(_0x574565,_0x363e48){return _0x574565+_0x363e48;},'LLCLF':'smtpUrl'},_0x42851a=_0x59f27c[_0x45a230(0x238)][_0x45a230(0x174)][_0x45a230(0x1a6)]({'_id':_0x45a230(0x1a4)}),_0x3a7625=_0x42851a?_0x42851a[_0x45a230(0x1b5)]:process[_0x45a230(0x1e1)]['MAIL_URL'],_0x201239=_0x59f27c['collections'][_0x45a230(0x174)]['findOne']({'_id':_0x45a230(0x25f)}),_0x2602d5={'hostname':_0x2e1c5a['ESjqX'],'port':'25','auth':undefined,'returnAddress':_0x201239[_0x45a230(0x1b5)]};let _0x5cb653;try{_0x5cb653=_0x3a7625&&Url[_0x45a230(0x15b)](_0x3a7625);}catch(_0x546b63){}if(_0x5cb653){let _0x48eaed=undefined;if(_0x5cb653['auth']){const _0x4b682f=_0x5cb653[_0x45a230(0x1c1)][_0x45a230(0x1a2)](':');let _0x5be418=undefined,_0x12f596=undefined;if(_0x4b682f!==-0x1){if(_0x2e1c5a['exMsX']!==_0x45a230(0x16e)){_0x528e78['log']('Fetching\x20user\x20picture:',_0x8b7b31);const _0x2fef23=_0x6d8109(_0x528a4a,_0x4c9e57);_0x2fef23&&_0x3b3ac2[_0x45a230(0x238)][_0x45a230(0x182)][_0x45a230(0x24e)](_0x1fbf90[_0x45a230(0x1ed)],{'$set':{'profile.picture':_0x2fef23}});}else _0x5be418=_0x5cb653[_0x45a230(0x1c1)]['slice'](0x0,_0x4b682f),_0x12f596=_0x5cb653[_0x45a230(0x1c1)]['slice'](_0x2e1c5a[_0x45a230(0x1f7)](_0x4b682f,0x1));}_0x48eaed={'user':_0x5be418,'pass':_0x12f596};}_0x2602d5[_0x45a230(0x1ef)]=_0x5cb653[_0x45a230(0x1ef)]||_0x45a230(0x1be),_0x2602d5[_0x45a230(0x250)]=_0x5cb653[_0x45a230(0x250)]||'25',_0x2602d5[_0x45a230(0x1c1)]=_0x48eaed;}_0x59f27c[_0x45a230(0x238)][_0x45a230(0x174)]['upsert']({'_id':'smtpConfig'},{'value':_0x2602d5}),_0x59f27c[_0x45a230(0x238)]['settings'][_0x45a230(0x245)]({'_id':_0x45a230(0x25f)}),_0x59f27c['collections'][_0x45a230(0x174)]['remove']({'_id':_0x2e1c5a[_0x45a230(0x1dc)]});},smtpPortShouldBeNumber=function(_0x7a65e,_0x9faaea){const _0x25fb4d=_0x19112b,_0x1d03ee={'JWltO':'smtpConfig'},_0x583b03=_0x7a65e[_0x25fb4d(0x238)][_0x25fb4d(0x174)][_0x25fb4d(0x1a6)]({'_id':_0x25fb4d(0x235)});if(_0x583b03){const _0x4b1404=_0x583b03['value'];_0x4b1404[_0x25fb4d(0x250)]&&(_0x4b1404[_0x25fb4d(0x250)]=_[_0x25fb4d(0x166)](_0x4b1404[_0x25fb4d(0x250)])?_0x4b1404['port']:parseInt(_0x4b1404['port']),_0x7a65e['collections'][_0x25fb4d(0x174)][_0x25fb4d(0x23c)]({'_id':_0x1d03ee['JWltO']},{'value':_0x4b1404}));}},consolidateOrgSettings=function(_0x4242dd,_0x137caf){const _0x4a2516=_0x19112b,_0x3a2c6e={'tDUdr':'organizationSaml'},_0x3a4e0c=_0x4242dd[_0x4a2516(0x238)][_0x4a2516(0x174)],_0x15c35f=_0x3a4e0c['findOne']({'_id':_0x4a2516(0x272)}),_0x2c0620=_0x3a4e0c['findOne']({'_id':_0x4a2516(0x1ca)}),_0x5841e4=_0x3a4e0c['findOne']({'_id':_0x4a2516(0x1a9)}),_0x10a216=_0x3a4e0c[_0x4a2516(0x1a6)]({'_id':_0x3a2c6e['tDUdr']}),_0xc2c4e4={'google':{'enabled':_0x15c35f?!!_0x15c35f[_0x4a2516(0x1b5)]:![],'domain':_0x15c35f?_0x15c35f[_0x4a2516(0x1b5)]:''},'email':{'enabled':_0x2c0620?!!_0x2c0620[_0x4a2516(0x1b5)]:![],'domain':_0x2c0620?_0x2c0620[_0x4a2516(0x1b5)]:''},'ldap':{'enabled':_0x5841e4?_0x5841e4['value']:![]},'saml':{'enabled':_0x10a216?_0x10a216[_0x4a2516(0x1b5)]:![]}};_0x3a4e0c['upsert']({'_id':_0x4a2516(0x14f)},{'value':_0xc2c4e4}),_0x3a4e0c['remove']({'_id':_0x4a2516(0x272)}),_0x3a4e0c['remove']({'_id':_0x4a2516(0x1ca)}),_0x3a4e0c[_0x4a2516(0x245)]({'_id':_0x4a2516(0x1a9)}),_0x3a4e0c['remove']({'_id':_0x3a2c6e['tDUdr']});},unsetSmtpDefaultHostnameIfNoUsersExist=function(_0x3d4986,_0x133abf){const _0x532abf=_0x19112b,_0x111de2={'eJSPd':function(_0x53a7fa,_0x1929f2){return _0x53a7fa===_0x1929f2;},'fOXpN':_0x532abf(0x21c)},_0x4b26f3=_0x3d4986[_0x532abf(0x238)][_0x532abf(0x182)]['findOne']();if(!_0x4b26f3){const _0x5d5452=_0x3d4986[_0x532abf(0x238)][_0x532abf(0x174)][_0x532abf(0x1a6)]({'_id':'smtpConfig'}),_0x491e26=_0x5d5452['value'];_0x111de2['eJSPd'](_0x491e26[_0x532abf(0x1ef)],_0x532abf(0x1be))&&(_0x111de2[_0x532abf(0x229)](_0x111de2[_0x532abf(0x173)],_0x532abf(0x21c))?(_0x491e26[_0x532abf(0x1ef)]='',_0x3d4986[_0x532abf(0x238)][_0x532abf(0x174)][_0x532abf(0x23c)]({'_id':'smtpConfig'},{'value':_0x491e26})):_0x202b06[_0x532abf(0x14d)]=_0x1def14);}},extractLastUsedFromApiTokenOwner=function(_0x56f5d5,_0x51a292){const _0x3ac101=_0x19112b;_0x56f5d5[_0x3ac101(0x238)][_0x3ac101(0x25b)][_0x3ac101(0x19a)]({'owner.user':{'$exists':!![]}})[_0x3ac101(0x24a)](function(_0x3ef31b){const _0x21339d=_0x3ac101,_0x3e06b9=_0x3ef31b[_0x21339d(0x1f5)]['user'][_0x21339d(0x15f)];_0x56f5d5[_0x21339d(0x238)]['apiTokens'][_0x21339d(0x24e)]({'_id':_0x3ef31b[_0x21339d(0x1ed)]},{'$set':{'lastUsed':_0x3e06b9},'$unset':{'owner.user.lastUsed':!![]}});});},setUpstreamTitles=function(_0x3ffc37,_0x4efc00){const _0x4977e6=_0x19112b,_0x53957a={'ciIeR':function(_0x1f6e2b,_0x157069){return _0x1f6e2b%_0x157069;},'jupen':function(_0x46f50c,_0x169b10){return _0x46f50c+_0x169b10;},'OmQIY':_0x4977e6(0x1cd),'QkAlH':_0x4977e6(0x24b)},_0x3ee196=_0x3ffc37[_0x4977e6(0x238)][_0x4977e6(0x25b)]['rawCollection'](),_0x579d42=Meteor[_0x4977e6(0x1d4)](_0x3ee196[_0x4977e6(0x1d5)],_0x3ee196),_0x6d13e9=_0x579d42([{'$match':{'owner.user':{'$exists':!![]},'grainId':{'$exists':!![]}}},{'$group':{'_id':_0x53957a['QkAlH']}}])['map'](_0x37723a=>_0x37723a[_0x4977e6(0x1ed)]);let _0x66cdec=0x0;_0x3ffc37[_0x4977e6(0x238)][_0x4977e6(0x1ac)]['find']({'_id':{'$in':_0x6d13e9}},{'fields':{'title':0x1}})[_0x4977e6(0x24a)](_0xfbcad0=>{const _0xe92e6c=_0x4977e6;_0x53957a[_0xe92e6c(0x206)](_0x66cdec,0x64)==0x0&&console[_0xe92e6c(0x23d)](_0x53957a[_0xe92e6c(0x269)](_0x66cdec,_0x53957a[_0xe92e6c(0x16d)])+_0x6d13e9['length']),++_0x66cdec,_0x3ffc37[_0xe92e6c(0x238)][_0xe92e6c(0x25b)][_0xe92e6c(0x24e)]({'grainId':_0xfbcad0[_0xe92e6c(0x1ed)],'owner.user.title':{'$exists':!![],'$ne':_0xfbcad0[_0xe92e6c(0x16f)]}},{'$set':{'owner.user.upstreamTitle':_0xfbcad0[_0xe92e6c(0x16f)]}},{'multi':!![]});});},markAllRead=function(_0x4bb3ca,_0x256cb8){const _0x1b0a84=_0x19112b;_0x4bb3ca[_0x1b0a84(0x238)]['grains'][_0x1b0a84(0x24e)]({},{'$set':{'ownerSeenAllActivity':!![]}},{'multi':!![]}),_0x4bb3ca[_0x1b0a84(0x238)][_0x1b0a84(0x25b)][_0x1b0a84(0x24e)]({'owner.user':{'$exists':!![]}},{'$set':{'owner.user.seenAllActivity':!![]}},{'multi':!![]});},clearAppIndex=function(_0x2b49f6,_0x4e3aff){const _0x4a1ede=_0x19112b;_0x2b49f6[_0x4a1ede(0x238)][_0x4a1ede(0x1fa)]['remove']({});},assignEmailVerifierIds=function(_0x24f029,_0x488dfb){const _0x1fcfaf=_0x19112b,_0x7488aa={'KajAB':'gabLc'};_0x24f029[_0x1fcfaf(0x238)]['apiTokens'][_0x1fcfaf(0x19a)]({'frontendRef.emailVerifier':{'$exists':!![]}})[_0x1fcfaf(0x24a)](_0x3ceee6=>{const _0x2c02f0=_0x1fcfaf;_0x2c02f0(0x275)===_0x7488aa[_0x2c02f0(0x192)]?_0x59bffb[_0x2c02f0(0x1f1)](_0x287cb3,0x0):_0x24f029[_0x2c02f0(0x238)]['apiTokens'][_0x2c02f0(0x24e)](_0x3ceee6['_id'],{'$set':{'frontendRef.emailVerifier.id':_0x3ceee6[_0x2c02f0(0x1ed)]}});});},startPreinstallingApps=function(_0x3d5c33,_0x1a1070){const _0x573957=_0x19112b,_0x2d2fb9={'zmxha':_0x573957(0x22c)},_0x11f4e4=function(){const _0x3e8e79=_0x573957;if(_0x2d2fb9[_0x3e8e79(0x25d)]===_0x3e8e79(0x22c)){_0x3d5c33[_0x3e8e79(0x171)]();const _0x1ad44b=_0x3d5c33[_0x3e8e79(0x238)][_0x3e8e79(0x1fa)][_0x3e8e79(0x19a)]({'_id':{'$in':_0x3d5c33[_0x3e8e79(0x1ae)]()[_0x3e8e79(0x183)](_0x3d5c33[_0x3e8e79(0x222)]())}})[_0x3e8e79(0x1ee)](),_0x3746a4=_['map'](_0x1ad44b,_0xbe6738=>{const _0x27561a=_0x3e8e79;return{'appId':_0xbe6738[_0x27561a(0x176)],'packageId':_0xbe6738[_0x27561a(0x1a5)]};});_0x3d5c33[_0x3e8e79(0x260)](_0x3746a4);}else _0x143dfe['stagedServices'][_0x3e8e79(0x234)]=_0x194e97['service'][_0x3e8e79(0x234)];};!Meteor[_0x573957(0x174)][_0x573957(0x26f)]['isTesting']&&!_0x3d5c33[_0x573957(0x187)]()&&Meteor[_0x573957(0x1f1)](_0x11f4e4,0x0);},setNewServer=function(_0x6272c9,_0x19fb34){const _0x37ad26=_0x19112b;!_0x6272c9[_0x37ad26(0x238)]['migrations'][_0x37ad26(0x1a6)]({'_id':'new_server_migrations_applied'})&&_0x6272c9[_0x37ad26(0x238)][_0x37ad26(0x248)][_0x37ad26(0x193)]({'_id':_0x37ad26(0x207),'value':!![]});},addMembraneRequirementsToIdentities=function(_0x398ea9,_0x76c0ec){const _0x34e249=_0x19112b,_0x1de326={'frontendRef.identity':{'$exists':!![]},'owner.grain.grainId':{'$exists':!![]},'requirements.0':{'$exists':![]}};_0x398ea9['collections']['apiTokens'][_0x34e249(0x19a)](_0x1de326)['map'](_0x54b4db=>{const _0x3d4420=_0x34e249;_0x398ea9[_0x3d4420(0x238)][_0x3d4420(0x25b)][_0x3d4420(0x24e)]({'_id':_0x54b4db[_0x3d4420(0x1ed)]},{'$push':{'requirements':{'permissionsHeld':{'grainId':_0x54b4db[_0x3d4420(0x1f5)]['grain'][_0x3d4420(0x1e4)],'identityId':_0x54b4db[_0x3d4420(0x230)][_0x3d4420(0x1c7)],'permissions':[]}}}});});},addEncryptionToFrontendRefIpNetwork=function(_0x4fd31a,_0x1f0e0e){const _0x5535a0=_0x19112b,_0x110058={'DqRyG':_0x5535a0(0x169)};_0x4fd31a[_0x5535a0(0x238)][_0x5535a0(0x25b)][_0x5535a0(0x19a)]({'frontendRef.ipNetwork':!![]})[_0x5535a0(0x208)](_0x5c5bbe=>{const _0x464aba=_0x5535a0,_0x25909e={'LGyLa':_0x110058[_0x464aba(0x1c3)]};if(_0x464aba(0x22d)===_0x464aba(0x22d))_0x4fd31a['collections'][_0x464aba(0x25b)][_0x464aba(0x24e)]({'_id':_0x5c5bbe[_0x464aba(0x1ed)]},{'$set':{'frontendRef.ipNetwork':{'encryption':{'none':null}}}});else{const _0x1d53f0=_0x2b5d17[_0x464aba(0x238)][_0x464aba(0x150)][_0x464aba(0x1a6)](_0xa9fa7a[_0x464aba(0x17c)]);if(_0x1d53f0&&_0x1d53f0[_0x464aba(0x1c0)]){const _0x19f4ae={'signupNote':_0x1d53f0['note']},_0x41168b=_0x25909e['LGyLa'];_0x1d53f0[_0x464aba(0x1c0)][_0x464aba(0x1cb)](_0x41168b)===0x0&&(_0x19f4ae[_0x464aba(0x1fc)]=_0x1d53f0['note'][_0x464aba(0x16b)](_0x41168b[_0x464aba(0x160)])),_0x4c7ab9[_0x464aba(0x238)][_0x464aba(0x182)][_0x464aba(0x24e)](_0x2eda31['_id'],{'$set':_0x19f4ae});}}});};function backgroundFillInGrainSizes(_0x2a5d6e,_0x13f80c){const _0x332f80=_0x19112b,_0x335f09={'NljkK':_0x332f80(0x22f),'ZfNZq':_0x332f80(0x1b3)};try{const _0x2bf5e8=_0x2a5d6e[_0x332f80(0x238)][_0x332f80(0x1ac)][_0x332f80(0x1a6)]({'size':{'$exists':![]}},{'fields':{'_id':0x1,'userId':0x1}});if(_0x2bf5e8){try{const _0x4c9909=waitPromise(_0x13f80c['cap']()[_0x332f80(0x23f)](_0x2bf5e8['userId'],_0x2bf5e8[_0x332f80(0x1ed)]));_0x2a5d6e[_0x332f80(0x238)][_0x332f80(0x1ac)][_0x332f80(0x24e)]({'_id':_0x2bf5e8[_0x332f80(0x1ed)],'size':{'$exists':![]}},{'$set':{'size':parseInt(_0x4c9909[_0x332f80(0x15a)])}});}catch(_0x32cdf3){if(_0x32cdf3[_0x332f80(0x1b6)]===_0x335f09[_0x332f80(0x1e9)])console[_0x332f80(0x247)](_0x332f80(0x1b8),_0x2bf5e8[_0x332f80(0x1ed)],':',_0x32cdf3[_0x332f80(0x1fe)]),_0x2a5d6e[_0x332f80(0x238)][_0x332f80(0x1ac)][_0x332f80(0x24e)]({'_id':_0x2bf5e8[_0x332f80(0x1ed)],'size':{'$exists':![]}},{'$set':{'size':0x0}});else throw _0x32cdf3;}Meteor[_0x332f80(0x1f1)](backgroundFillInGrainSizes[_0x332f80(0x16c)](this,_0x2a5d6e,_0x13f80c),0x3e8);}}catch(_0x4ea30b){console[_0x332f80(0x247)](_0x335f09[_0x332f80(0x185)],_0x4ea30b[_0x332f80(0x1fe)]);}}function _0x2308(_0x1eb330,_0x505ebb){const _0x5a5b93=_0x5a5b();return _0x2308=function(_0x2308cf,_0x3e0756){_0x2308cf=_0x2308cf-0x14d;let _0x9af6c=_0x5a5b93[_0x2308cf];return _0x9af6c;},_0x2308(_0x1eb330,_0x505ebb);}function removeFeatureKeys(_0x43480a,_0x3c3ad1){const _0x50a7d8=_0x19112b,_0x5c90c9={'Rgszu':_0x50a7d8(0x1f6),'BpHKm':_0x50a7d8(0x15c)};_0x43480a['notifications'][_0x50a7d8(0x245)]({'admin.type':_0x5c90c9[_0x50a7d8(0x18a)]}),_0x43480a[_0x50a7d8(0x157)][_0x50a7d8(0x245)]({'admin.type':_0x5c90c9[_0x50a7d8(0x1e3)]});}const MIGRATIONS=[updateLoginStyleToRedirect,enableLegacyOAuthProvidersIfNotInSettings,denormalizeInviteInfo,mergeRoleAssignmentsIntoApiTokens,fixOasisStorageUsageStats,fetchProfilePictures,assignPlans,removeKeyrings,useLocalizedTextInUserActions,verifyAllPgpSignatures,splitUserIdsIntoAccountIdsAndIdentityIds,appUpdateSettings,moveDevAndEmailLoginDataIntoIdentities,repairEmailIdentityIds,splitAccountUsersAndIdentityUsers,populateContactsFromApiTokens,cleanUpApiTokens,initServerTitleAndReturnAddress,sendReferralNotifications,assignBonuses,splitSmtpUrl,smtpPortShouldBeNumber,consolidateOrgSettings,unsetSmtpDefaultHostnameIfNoUsersExist,extractLastUsedFromApiTokenOwner,setUpstreamTitles,markAllRead,clearAppIndex,assignEmailVerifierIds,setNewServer,addMembraneRequirementsToIdentities,addEncryptionToFrontendRefIpNetwork],NEW_SERVER_STARTUP=[startPreinstallingApps],migrateToLatest=function(_0xa29177,_0x4da361){const _0x3bd6d3=_0x19112b,_0x5bae18={'GWCPR':function(_0x4be1d8,_0x2f57ef){return _0x4be1d8+_0x2f57ef;},'ufgNz':function(_0x431cbb,_0x32c7a8){return _0x431cbb>=_0x32c7a8;},'BNXTV':_0x3bd6d3(0x196),'qCybU':function(_0x310a77,_0x4f7045){return _0x310a77!==_0x4f7045;},'ZFUtv':_0x3bd6d3(0x1f4),'UrKup':_0x3bd6d3(0x162),'LFCjV':_0x3bd6d3(0x210),'KqtOl':_0x3bd6d3(0x152),'fZbCk':_0x3bd6d3(0x168),'rusQa':_0x3bd6d3(0x15e),'jfhEK':function(_0x38ea26,_0x376be){return _0x38ea26===_0x376be;},'vexLy':_0x3bd6d3(0x249),'KypbS':function(_0x260b8e,_0x243892){return _0x260b8e===_0x243892;},'CqvlT':'EMPVm','ejsrw':_0x3bd6d3(0x198),'tMhgz':function(_0x718fdd,_0x4df91c){return _0x718fdd+_0x4df91c;},'MklsW':_0x3bd6d3(0x26b),'kYYJT':function(_0x6ecbaa,_0x1477b9){return _0x6ecbaa<_0x1477b9;},'vKQYj':function(_0x44675b,_0x535a33){return _0x44675b+_0x535a33;},'cFuDI':function(_0x313ee4,_0xb8af73){return _0x313ee4+_0xb8af73;},'caJfm':_0x3bd6d3(0x240),'nBPTU':'new_server_migrations_applied','ocpfu':function(_0x5ab565,_0x26299b){return _0x5ab565<_0x26299b;},'uANAu':_0x3bd6d3(0x15d),'JVVKG':_0x3bd6d3(0x221),'Abtek':function(_0x1206ab,_0x967de6){return _0x1206ab+_0x967de6;},'hKjqr':'Running\x20new\x20server\x20startup\x20function\x20','noODx':function(_0x55332a,_0x37d5b6){return _0x55332a+_0x37d5b6;},'IqWHz':function(_0x438811,_0x23839e){return _0x438811+_0x23839e;},'AzDZm':function(_0x4e47f0,_0x5c49a7,_0x3e2105){return _0x4e47f0(_0x5c49a7,_0x3e2105);}};if(Meteor[_0x3bd6d3(0x174)][_0x3bd6d3(0x19b)]){console[_0x3bd6d3(0x23d)](_0x3bd6d3(0x1d3));const _0x110f13=new Future(),_0x12a571=function(_0x4fb9e6){const _0x940774=_0x3bd6d3;if(_0x940774(0x225)!==_0x940774(0x225))_0x2df917['pronoun']=_0x52cfdd[_0x940774(0x152)]['pronoun'];else{console['log'](_0x5bae18[_0x940774(0x213)](_0x5bae18[_0x940774(0x213)](_0x940774(0x23b)+_0x4fb9e6[_0x940774(0x1b5)],'/'),MIGRATIONS['length']));if(_0x5bae18[_0x940774(0x21f)](_0x4fb9e6['value'],MIGRATIONS[_0x940774(0x160)]))_0x110f13[_0x940774(0x1a3)]();}},_0x46cf14=_0xa29177[_0x3bd6d3(0x238)]['migrations'][_0x3bd6d3(0x19a)]({'_id':_0x3bd6d3(0x198)})[_0x3bd6d3(0x1d6)]({'added':_0x12a571,'changed':_0x12a571}),_0x59e4dc=new Future(),_0x48d986=function(_0x34625d){const _0x20036a=_0x3bd6d3;_0x34625d['value']&&(console[_0x20036a(0x23d)](_0x5bae18['BNXTV']),_0x59e4dc['return']());},_0x141e8c=_0xa29177[_0x3bd6d3(0x238)][_0x3bd6d3(0x248)][_0x3bd6d3(0x19a)]({'_id':_0x3bd6d3(0x207)})[_0x3bd6d3(0x1d6)]({'added':_0x48d986,'changed':_0x48d986});_0x110f13[_0x3bd6d3(0x1b1)](),_0x46cf14[_0x3bd6d3(0x1b7)](),_0x59e4dc[_0x3bd6d3(0x1b1)](),_0x141e8c[_0x3bd6d3(0x1b7)](),console[_0x3bd6d3(0x23d)](_0x3bd6d3(0x212));}else{if(_0x5bae18[_0x3bd6d3(0x232)](_0x5bae18[_0x3bd6d3(0x1fd)],'TBmoP'))_0x5ba8fa[_0x3bd6d3(0x238)]['users']['find']({'identities.service.emailToken':{'$exists':0x1}})['forEach'](function(_0x48587c){const _0x4bcc1d=_0x3bd6d3;if(_0x5bae18[_0x4bcc1d(0x19e)](_0x48587c[_0x4bcc1d(0x21d)][_0x4bcc1d(0x160)],0x1))throw new _0x1bb41e(_0x5bae18[_0x4bcc1d(0x17b)],_0x48587c);const _0x5229e9=_0x48587c[_0x4bcc1d(0x21d)][0x0],_0x433628=_0x52c150['pick'](_0x5229e9,'main',_0x5bae18[_0x4bcc1d(0x1da)],_0x5bae18[_0x4bcc1d(0x167)],_0x4bcc1d(0x1a8),_0x5bae18[_0x4bcc1d(0x219)]);_0x433628[_0x4bcc1d(0x1d1)]={'email':_0x5229e9['service'][_0x4bcc1d(0x18b)]},_0x433628['id']=_0xea442b['createHash'](_0x4bcc1d(0x189))[_0x4bcc1d(0x24e)](_0x5bae18['fZbCk']+_0x5229e9[_0x4bcc1d(0x1d1)][_0x4bcc1d(0x18b)][_0x4bcc1d(0x234)])[_0x4bcc1d(0x1d9)](_0x5bae18[_0x4bcc1d(0x1d2)]),_0x3657ab[_0x4bcc1d(0x238)]['grains'][_0x4bcc1d(0x24e)]({'identityId':_0x5229e9['id']},{'$set':{'identityId':_0x433628['id']}},{'multi':!![]}),_0x1f795f[_0x4bcc1d(0x238)]['sessions'][_0x4bcc1d(0x24e)]({'identityId':_0x5229e9['id']},{'$set':{'identityId':_0x433628['id']}},{'multi':!![]}),_0x3be0c7[_0x4bcc1d(0x238)][_0x4bcc1d(0x25b)][_0x4bcc1d(0x24e)]({'identityId':_0x5229e9['id']},{'$set':{'identityId':_0x433628['id']}},{'multi':!![]}),_0x405b99[_0x4bcc1d(0x238)]['apiTokens'][_0x4bcc1d(0x24e)]({'owner.user.identityId':_0x5229e9['id']},{'$set':{'owner.user.identityId':_0x433628['id']}},{'multi':!![]}),_0x142506['collections'][_0x4bcc1d(0x25b)][_0x4bcc1d(0x24e)]({'owner.grain.introducerIdentity':_0x5229e9['id']},{'$set':{'owner.grain.introducerIdentity':_0x433628['id']}},{'multi':!![]});while(_0x2f4bca[_0x4bcc1d(0x238)][_0x4bcc1d(0x25b)][_0x4bcc1d(0x24e)]({'requirements.permissionsHeld.identityId':_0x5229e9['id']},{'$set':{'requirements.$.permissionsHeld.identityId':_0x433628['id']}},{'multi':!![]})>0x0);_0x171cb3[_0x4bcc1d(0x238)][_0x4bcc1d(0x182)]['update']({'_id':_0x48587c[_0x4bcc1d(0x1ed)]},{'$set':{'identities':[_0x433628]}});});else{const _0x18f0d8=_0xa29177[_0x3bd6d3(0x238)]['migrations'][_0x3bd6d3(0x1a6)]({'_id':_0x3bd6d3(0x198)});let _0x2d3b1a;!_0x18f0d8?_0x5bae18[_0x3bd6d3(0x267)](_0x5bae18['CqvlT'],'UndFy')?(_0x42d8ac[_0x3bd6d3(0x1ef)]='',_0x2dcdf3[_0x3bd6d3(0x238)][_0x3bd6d3(0x174)][_0x3bd6d3(0x23c)]({'_id':_0x3bd6d3(0x235)},{'value':_0x565367})):(_0xa29177[_0x3bd6d3(0x238)][_0x3bd6d3(0x248)]['insert']({'_id':_0x5bae18[_0x3bd6d3(0x184)],'value':0x0}),_0x2d3b1a=0x0,_0xa29177[_0x3bd6d3(0x238)][_0x3bd6d3(0x248)][_0x3bd6d3(0x193)]({'_id':_0x3bd6d3(0x207),'value':![]})):_0x2d3b1a=_0x18f0d8[_0x3bd6d3(0x1b5)];console['log'](_0x5bae18[_0x3bd6d3(0x175)](_0x5bae18[_0x3bd6d3(0x252)],_0x2d3b1a)+'/'+MIGRATIONS[_0x3bd6d3(0x160)]);for(let _0x5278eb=_0x2d3b1a;_0x5bae18[_0x3bd6d3(0x23a)](_0x5278eb,MIGRATIONS[_0x3bd6d3(0x160)]);_0x5278eb++){console[_0x3bd6d3(0x23d)](_0x5bae18[_0x3bd6d3(0x175)](_0x3bd6d3(0x1e0),_0x5bae18[_0x3bd6d3(0x165)](_0x5278eb,0x1))),MIGRATIONS[_0x5278eb](_0xa29177,_0x4da361),_0xa29177[_0x3bd6d3(0x238)][_0x3bd6d3(0x248)]['update']({'_id':_0x3bd6d3(0x198)},{'$set':{'value':_0x5bae18[_0x3bd6d3(0x1e8)](_0x5278eb,0x1)}}),console[_0x3bd6d3(0x23d)](_0x5bae18[_0x3bd6d3(0x161)]+(_0x5278eb+0x1));}if(!_0xa29177[_0x3bd6d3(0x238)][_0x3bd6d3(0x248)][_0x3bd6d3(0x1a6)]({'_id':_0x5bae18['nBPTU']})['value']){for(let _0xcf308b=0x0;_0x5bae18[_0x3bd6d3(0x154)](_0xcf308b,NEW_SERVER_STARTUP['length']);_0xcf308b++){_0x5bae18[_0x3bd6d3(0x232)](_0x5bae18[_0x3bd6d3(0x224)],_0x5bae18['JVVKG'])?(_0x4c7b3e['notifications'][_0x3bd6d3(0x245)]({'admin.type':_0x3bd6d3(0x1f6)}),_0x377c03[_0x3bd6d3(0x157)][_0x3bd6d3(0x245)]({'admin.type':_0x3bd6d3(0x15c)})):(console['log'](_0x5bae18['Abtek'](_0x5bae18[_0x3bd6d3(0x1fb)],_0x5bae18[_0x3bd6d3(0x231)](_0xcf308b,0x1))),NEW_SERVER_STARTUP[_0xcf308b](_0xa29177,_0x4da361),console[_0x3bd6d3(0x23d)](_0x5bae18['IqWHz'](_0x3bd6d3(0x177),_0xcf308b+0x1)));}_0xa29177['collections'][_0x3bd6d3(0x248)]['update']({'_id':_0x3bd6d3(0x207)},{'$set':{'value':!![]}});}_0x5bae18[_0x3bd6d3(0x1f2)](backgroundFillInGrainSizes,_0xa29177,_0x4da361);}}};export{migrateToLatest};