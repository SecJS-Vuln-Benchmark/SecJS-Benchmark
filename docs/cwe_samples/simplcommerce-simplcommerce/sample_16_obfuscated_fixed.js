function _0x4911(_0x4a0381,_0x1b4e15){const _0x483179=_0x4831();return _0x4911=function(_0x4911e1,_0x12a31b){_0x4911e1=_0x4911e1-0x11a;let _0x43628e=_0x483179[_0x4911e1];return _0x43628e;},_0x4911(_0x4a0381,_0x1b4e15);}const _0x557131=_0x4911;(function(_0x35958a,_0x39e093){const _0x2c0345=_0x4911,_0xb40aa8=_0x35958a();while(!![]){try{const _0x46e2bb=parseInt(_0x2c0345(0x1ad))/0x1+parseInt(_0x2c0345(0x12d))/0x2+-parseInt(_0x2c0345(0x18d))/0x3*(parseInt(_0x2c0345(0x162))/0x4)+-parseInt(_0x2c0345(0x179))/0x5*(parseInt(_0x2c0345(0x15c))/0x6)+parseInt(_0x2c0345(0x134))/0x7+-parseInt(_0x2c0345(0x1dc))/0x8*(parseInt(_0x2c0345(0x14c))/0x9)+parseInt(_0x2c0345(0x12f))/0xa;if(_0x46e2bb===_0x39e093)break;else _0xb40aa8['push'](_0xb40aa8['shift']());}catch(_0x1a20e9){_0xb40aa8['push'](_0xb40aa8['shift']());}}}(_0x4831,0xa08e4));const Crypto=Npm['require'](_0x557131(0x151)),Http=Npm[_0x557131(0x11f)](_0x557131(0x172)),Https=Npm[_0x557131(0x11f)]('https'),Net=Npm['require'](_0x557131(0x140)),Dgram=Npm[_0x557131(0x11f)](_0x557131(0x12e)),Capnp=Npm[_0x557131(0x11f)](_0x557131(0x1d4));import{hashSturdyRef,checkRequirements,fetchApiToken}from'/imports/server/persistent.js';function _0x4831(){const _0x518c8b=['sandstorm/supervisor.capnp','cachedViewInfo','fNLts','ozNee','hQqQU','CSPRNG\x20is\x20bad\x20or\x20has\x20insufficient\x20entropy.','ROOT_URL','Webkey\x20urls\x20cannot\x20contain\x20a\x20path.','doesn\x27t\x20have\x20a\x20token.','pick','sandstorm/email.capnp','net','erUbn','typeId','sandstorm/ip.capnp','tags','concat','rcbXE','dDQon','FMJgh','slice','requestingSession','overloaded','387PzvtGw','NnsUm','No\x20such\x20token.','_offerOrFulfill','GdfUb','crypto','getIdentity','UiView','ccNTD','claimRequest','jeqQG','Capability','PowerboxTag','Status\x20code\x20','qPjsN','host','6vfvQIk','Request\x20timed\x20out.','apiHostIdForToken','sturdyRef','pathname','ljCiR','189084KIhGnW','MHFnH','saveLabel','Protocol\x20not\x20recognized.','Session\x20has\x20neither\x20an\x20identityId\x20nor\x20a\x20hashedToken.','identityId','value','UthKk','obsoleteListApiTokens','removeApiTokens','wIYoN','tabId','_getUserAddress','Jcjzz','protocol','toString','http','sBvDF','pcKMC','cPnpu','hashedToken','obsoleteGenerateApiToken','hostname','1503785jYhglC','bind','requirements','KLGJE','Hsdrk','Ufjch','userId','TuedO','castAs','iopJn','autoUrl','offer','no\x20such\x20session','frSTx','http://','\x20received\x20in\x20response.','revokeApiToken()\x20has\x20been\x20removed.\x20Use\x20offer\x20templates\x20instead.','floor','userHasIdentity','WmUSG','45gWgOTy','HackSessionContext','request','parse','findOne','FLEfu','parentTokenKey','Invalid\x20webkey:\x20token\x20doesn\x27t\x20match\x20hostname.','setTimeout','sessionId','unverifiedEmail','publicId','Cannot\x20accept\x20powerbox\x20request\x20from\x20anonymous\x20session\x20that\x20','hash','dCrRD','profile','join','indexOf','calCT','powerboxRequest','data','Optional','grainId','_id','activity','networkFailure','nature','methods','trashed','grains','email','isApiHostId','1130769lOWbHm','https://','Grain\x20does\x20not\x20exist.','statusCode','No\x20value\x20provided\x20for\x20UiView.PowerboxTag.title.','Error','npeUj','anonymous','Supervisor','end','hcwAW','isDemoUser','address','ObjectIncluding','roleAssignment','listApiTokens()\x20has\x20been\x20removed.\x20Use\x20offer\x20templates\x20instead.','SqQJS','Any','cap','precondition','expires','izvyq','tokenId','name','title','YQyUa','xFphz','durability','obsoleteRevokeApiToken','sandstorm/powerbox.capnp','generateApiToken()\x20has\x20been\x20removed.\x20Use\x20offer\x20templates\x20instead.','update','zDDrB','LFkXt','getUserAddress','localBug','No\x20grain\x20found\x20for\x20token.','zjtKk','umYbA','capnp','save','yogEA','supported\x20(yet)','apiTokens','KlIRn','trim','Not\x20an\x20identity\x20of\x20the\x20current\x20user:\x20','224104cbdSef','sandstorm/grain.capnp','collections','qplYz','meQwk','CDFHT','Invalid\x20webkey.\x20You\x20must\x20pass\x20in\x20the\x20full\x20webkey,\x20','esITI','error','kEeFK','location','split','revoked','require','pVxuX','QitqQ','bONPb','Invalid\x20status\x20code\x20','bkItO','owner.user.identityId','_getPublicId','push','aHnTQ','skuDh','YBkPN','PowerboxDescriptor','ccjTb','934150nJOJPm','dgram','1451500RAvqlD','headers','importSystem','serializePacked','httpGet','7903161JSLYsn'];_0x4831=function(){return _0x518c8b;};return _0x4831();}import{inMeteor,waitPromise}from'/imports/server/async-helpers.js';const EmailRpc=Capnp[_0x557131(0x131)](_0x557131(0x13f)),HackSessionContext=Capnp[_0x557131(0x131)]('sandstorm/hack-session.capnp')[_0x557131(0x18e)],Supervisor=Capnp[_0x557131(0x131)](_0x557131(0x135))[_0x557131(0x1b5)],SystemPersistent=Capnp[_0x557131(0x131)](_0x557131(0x135))['SystemPersistent'],IpRpc=Capnp[_0x557131(0x131)](_0x557131(0x143)),EmailSendPort=EmailRpc['EmailSendPort'],Grain=Capnp[_0x557131(0x131)](_0x557131(0x1dd)),Powerbox=Capnp['importSystem'](_0x557131(0x1ca)),Url=Npm[_0x557131(0x11f)]('url');ROOT_URL=Url[_0x557131(0x190)](process['env'][_0x557131(0x13b)]),HOSTNAME=ROOT_URL[_0x557131(0x178)],SessionContextImpl=class SessionContextImpl{constructor(_0x28ee1f,_0x1629ec,_0x164bb7,_0x26f277){const _0x2b8f3e=_0x557131;this['grainId']=_0x28ee1f,this[_0x2b8f3e(0x196)]=_0x1629ec,this[_0x2b8f3e(0x167)]=_0x164bb7,this[_0x2b8f3e(0x16d)]=_0x26f277;}[_0x557131(0x155)](_0x3cc142,_0x2777d7){const _0x5e85fe=_0x557131,_0x5e9cc6={'ccjTb':function(_0x8c3b17,_0x1a54d2,_0x327d9e,_0x2de001){return _0x8c3b17(_0x1a54d2,_0x327d9e,_0x2de001);},'jsDSc':'no\x20such\x20token','rcbXE':function(_0x2f73eb,_0x14997b){return _0x2f73eb+_0x14997b;},'npeUj':_0x5e85fe(0x199),'calCT':function(_0x556485,_0x44b932,_0x16fe73,_0x344d5d,_0x1b65ea,_0xf9a452){return _0x556485(_0x44b932,_0x16fe73,_0x344d5d,_0x1b65ea,_0xf9a452);},'esITI':function(_0x34ab28,_0x277145){return _0x34ab28(_0x277145);}};return _0x5e9cc6[_0x5e85fe(0x1e3)](inMeteor,()=>{const _0x4008bd=_0x5e85fe,_0x278d14=_0x5e9cc6[_0x4008bd(0x12c)](fetchApiToken,globalDb,_0x3cc142,{'owner.clientPowerboxRequest.sessionId':this['sessionId']});if(!_0x278d14)throw new Error(_0x5e9cc6['jsDSc']);const _0x24507a=Sessions[_0x4008bd(0x191)]({'_id':this[_0x4008bd(0x196)]});if(!_0x24507a)throw new Error(_0x4008bd(0x185));const _0x40b643=[];if(_0x24507a[_0x4008bd(0x176)])_0x40b643['push']({'permissionsHeld':{'permissions':_0x2777d7||[],'tokenId':_0x24507a[_0x4008bd(0x176)],'grainId':this[_0x4008bd(0x1a3)]}});else{if(_0x24507a[_0x4008bd(0x167)])_0x40b643[_0x4008bd(0x127)]({'permissionsHeld':{'permissions':_0x2777d7||[],'identityId':_0x24507a[_0x4008bd(0x167)],'grainId':this[_0x4008bd(0x1a3)]}});else{if(_0x4008bd(0x128)!=='SHEnf')throw new Error(_0x5e9cc6[_0x4008bd(0x146)](_0x5e9cc6[_0x4008bd(0x1b3)],_0x4008bd(0x13d)));else throw new _0x1d2fe9[(_0x4008bd(0x1b2))](0x190,_0x4008bd(0x14e));}}return _0x5e9cc6[_0x4008bd(0x19f)](restoreInternal,globalDb,_0x3cc142,{'clientPowerboxRequest':Match[_0x4008bd(0x1ba)]({'sessionId':this[_0x4008bd(0x196)]})},_0x40b643,_0x278d14);});}[_0x557131(0x14f)](_0x146e35,_0x41da0c,_0x4b5019,_0x16ce38,_0xd4df50){const _0x33a34c=_0x557131,_0x31e784={'WmUSG':_0x33a34c(0x166),'KaTYj':function(_0x4bc10c,_0x1402da){return _0x4bc10c===_0x1402da;},'dDQon':'Cannot\x20offer\x20to\x20anonymous\x20session\x20that\x20does\x20not\x20have\x20a\x20token.','fNLts':'base64','PpVaT':_0x33a34c(0x1a3),'meQwk':_0x33a34c(0x17b),'TuedO':'parentToken','pVxuX':_0x33a34c(0x167),'LFkXt':'accountId','wKhRF':function(_0x376e02,_0x1f445a){return _0x376e02(_0x1f445a);}};return _0x31e784['wKhRF'](inMeteor,()=>{const _0x21154c=_0x33a34c,_0x2bccc1=Sessions[_0x21154c(0x191)]({'_id':this['sessionId']});if(!_0x2bccc1[_0x21154c(0x167)]&&!_0x2bccc1[_0x21154c(0x176)])throw new Error(_0x31e784[_0x21154c(0x18c)]);_0x146e35&&!_0x2bccc1[_0x21154c(0x1a0)]&&(_0x146e35=![]);const _0x58c739=_0x41da0c[_0x21154c(0x181)](SystemPersistent);let _0x5ccc2a={'clientPowerboxOffer':{'sessionId':this[_0x21154c(0x196)]}};const _0x4042b3=_0x16ce38&&_0x16ce38['tags']&&_0x16ce38[_0x21154c(0x144)]['length']===0x1&&_0x16ce38[_0x21154c(0x144)][0x0]&&_0x16ce38[_0x21154c(0x144)][0x0]['id']&&_0x31e784['KaTYj'](_0x16ce38[_0x21154c(0x144)][0x0]['id'],Grain[_0x21154c(0x153)][_0x21154c(0x142)]);if(_0x4042b3){let _0x2d36da={};_0x16ce38[_0x21154c(0x144)][0x0]['value']&&(_0x2d36da=Capnp[_0x21154c(0x190)](Grain['UiView'][_0x21154c(0x158)],_0x16ce38[_0x21154c(0x144)][0x0][_0x21154c(0x168)]));if(!_0x2d36da[_0x21154c(0x1c5)])throw new Error(_0x21154c(0x1b1));_0x2bccc1['identityId']&&(_0x5ccc2a={'user':{'identityId':this[_0x21154c(0x167)],'title':_0x2d36da[_0x21154c(0x1c5)]}});}_0x146e35&&(_0x5ccc2a={'clientPowerboxRequest':{'sessionId':_0x2bccc1[_0x21154c(0x1a0)][_0x21154c(0x14a)]}});const _0x3b522f={'grainId':this['grainId'],'permissions':_0x4b5019};if(_0x2bccc1[_0x21154c(0x176)])_0x3b522f[_0x21154c(0x1c3)]=_0x2bccc1[_0x21154c(0x176)];else{if(_0x2bccc1[_0x21154c(0x167)])_0x3b522f[_0x21154c(0x167)]=_0x2bccc1[_0x21154c(0x167)];else throw new Error(_0x31e784[_0x21154c(0x147)]);}const _0x4cb43d={'permissionsHeld':_0x3b522f};checkRequirements(globalDb,[_0x4cb43d]);const _0x2ee0c2=_0x58c739[_0x21154c(0x1d5)](_0x5ccc2a),_0x5b1d11=waitPromise(_0x2ee0c2)[_0x21154c(0x15f)];ApiTokens[_0x21154c(0x1cc)]({'_id':hashSturdyRef(_0x5b1d11)},{'$push':{'requirements':_0x4cb43d}});let _0x12fc52;if(_0x146e35)_0x12fc52={'fulfill':{'token':_0x5b1d11['toString'](),'descriptor':Capnp[_0x21154c(0x132)](Powerbox[_0x21154c(0x12b)],_0x16ce38)[_0x21154c(0x171)](_0x31e784[_0x21154c(0x137)])}};else{if(_0x4042b3){if(_0x2bccc1[_0x21154c(0x167)]){const _0x566ce2=fetchApiToken(globalDb,_0x5b1d11[_0x21154c(0x171)]());let _0x214e69=_0x566ce2[_0x21154c(0x1a4)];const _0x457990=_[_0x21154c(0x13e)](_0x566ce2,_0x31e784['PpVaT'],_0x21154c(0x1bb),_0x31e784[_0x21154c(0x1e0)],_0x31e784[_0x21154c(0x180)],_0x21154c(0x193),_0x31e784[_0x21154c(0x120)],_0x31e784[_0x21154c(0x1ce)]);_0x457990[_0x21154c(0x1a4)]={'$ne':_0x566ce2[_0x21154c(0x1a4)]},_0x457990[_0x21154c(0x125)]=this[_0x21154c(0x167)],_0x457990[_0x21154c(0x1a9)]={'$exists':![]},_0x457990[_0x21154c(0x11e)]={'$exists':![]};const _0x429c88=ApiTokens[_0x21154c(0x191)](_0x457990);_0x429c88&&(globalDb[_0x21154c(0x16b)]({'_id':_0x214e69}),_0x214e69=_0x429c88['_id']),_0x12fc52={'offer':{'uiView':{'tokenId':_0x214e69}}};}else _0x12fc52={'offer':{'uiView':{'token':_0x5b1d11[_0x21154c(0x171)]()}}};}else _0x12fc52={'offer':{'token':_0x5b1d11[_0x21154c(0x171)]()}};}Sessions[_0x21154c(0x1cc)]({'_id':this[_0x21154c(0x196)]},{'$set':{'powerboxView':_0x12fc52}});});}[_0x557131(0x184)](_0xa4dced,_0x5dbe1a,_0x17861e,_0x293b7a){return this['_offerOrFulfill'](![],_0xa4dced,_0x5dbe1a,_0x17861e,_0x293b7a);}['fulfillRequest'](_0x28d21b,_0x522d04,_0x5d5e0f,_0x55485f){return this['_offerOrFulfill'](!![],_0x28d21b,_0x522d04,_0x5d5e0f,_0x55485f);}[_0x557131(0x1a5)](_0xa98871){const _0x2da009=_0x557131,_0x3bf982={'Ufjch':_0x2da009(0x1b4),'Hsdrk':function(_0x1e2be3,_0x3d14e9){return _0x1e2be3(_0x3d14e9);}};return _0x3bf982[_0x2da009(0x17d)](inMeteor,()=>{const _0xb85b8=_0x2da009;logActivity(this[_0xb85b8(0x1a3)],this[_0xb85b8(0x167)]||_0x3bf982[_0xb85b8(0x17e)],_0xa98871);});}},Meteor[_0x557131(0x1a8)]({'finishPowerboxRequest'(_0x4e2963,_0x12f98e,_0x5cc33d,_0xa3ccce,_0x2e6ec3){const _0xb8f3e1=_0x557131,_0x1b37ff={'qPjsN':function(_0x5d4d57,_0x5c2986,_0x526780){return _0x5d4d57(_0x5c2986,_0x526780);},'KLGJE':function(_0x430eb1,_0x425450,_0x3d5535){return _0x430eb1(_0x425450,_0x3d5535);},'sBvDF':function(_0x5d78af,_0x326e30){return _0x5d78af+_0x326e30;},'bONPb':function(_0x36ad63,_0x279ab5){return _0x36ad63(_0x279ab5);},'Jcjzz':_0xb8f3e1(0x1e2),'kEeFK':function(_0x104f5c,_0x3cdd9c,_0x8cf434,_0x3cb515,_0x200104){return _0x104f5c(_0x3cdd9c,_0x8cf434,_0x3cb515,_0x200104);}};_0x1b37ff['qPjsN'](check,_0x4e2963,String),check(_0x12f98e,String),_0x1b37ff[_0xb8f3e1(0x15a)](check,_0x5cc33d,Match['OneOf'](undefined,null,String)),_0x1b37ff[_0xb8f3e1(0x15a)](check,_0xa3ccce,String),_0x1b37ff[_0xb8f3e1(0x17c)](check,_0x2e6ec3,String);const _0x4fb462=this['connection']['sandstormDb'],_0x517870=Meteor[_0xb8f3e1(0x17f)]();if(!_0x517870||!_0x4fb462[_0xb8f3e1(0x18b)](_0x517870,_0xa3ccce))throw new Meteor[(_0xb8f3e1(0x1b2))](0x193,_0x1b37ff['sBvDF'](_0xb8f3e1(0x1db),_0xa3ccce));const _0x2587f1=Url[_0xb8f3e1(0x190)](_0x12f98e[_0xb8f3e1(0x1da)]()),_0x5bfa15=_0x1b37ff[_0xb8f3e1(0x122)](matchWildcardHost,_0x2587f1['host']);if(!_0x5bfa15||!_0x4fb462[_0xb8f3e1(0x1ac)](_0x5bfa15))throw new Meteor[(_0xb8f3e1(0x1b2))](0x1f4,_0x1b37ff[_0xb8f3e1(0x173)]('Hostname\x20does\x20not\x20match\x20this\x20server.\x20External\x20webkeys\x20are\x20not\x20',_0xb8f3e1(0x1d7)));let _0x3a84a8=_0x2587f1[_0xb8f3e1(0x19a)];if(!_0x3a84a8)throw new Meteor[(_0xb8f3e1(0x1b2))](0x190,_0x1b37ff[_0xb8f3e1(0x16f)]+'including\x20domain\x20name\x20and\x20hash\x20fragment');_0x3a84a8=_0x3a84a8[_0xb8f3e1(0x149)](0x1);if(_0x4fb462['isTokenSpecificHostId'](_0x5bfa15)&&_0x5bfa15!==_0x4fb462[_0xb8f3e1(0x15e)](_0x3a84a8))throw new Meteor['Error'](0x190,_0xb8f3e1(0x194));const _0x19ab12=_0x1b37ff[_0xb8f3e1(0x11b)](restoreInternal,_0x4fb462,_0x3a84a8,Match[_0xb8f3e1(0x1a2)]({'webkey':Match[_0xb8f3e1(0x1a2)](Match[_0xb8f3e1(0x1be)])}),[])[_0xb8f3e1(0x1bf)],_0x439133=_0x19ab12[_0xb8f3e1(0x181)](SystemPersistent),_0x430b02={'clientPowerboxRequest':{'grainId':_0x2e6ec3,'introducerIdentity':_0xa3ccce,'sessionId':_0x4e2963}};_0x5cc33d&&(grainOwner[_0xb8f3e1(0x164)]={'defaultText':_0x5cc33d});const _0x17408d=_0x439133[_0xb8f3e1(0x1d5)](_0x430b02),_0x1f2216=_0x1b37ff[_0xb8f3e1(0x122)](waitPromise,_0x17408d)[_0xb8f3e1(0x15f)];return _0x1f2216[_0xb8f3e1(0x171)]();},'finishPowerboxOffer'(_0x21bea2){const _0x26723e=_0x557131,_0x21a7e0={'zjtKk':function(_0x5b2c60,_0x16d699,_0x19fea9){return _0x5b2c60(_0x16d699,_0x19fea9);}};_0x21a7e0[_0x26723e(0x1d2)](check,_0x21bea2,String),Sessions[_0x26723e(0x1cc)]({'_id':_0x21bea2},{'$unset':{'powerboxView':null}});},'getViewInfoForApiToken'(_0x3ae3e7){const _0x18fdab=_0x557131,_0x4bf423={'frSTx':_0x18fdab(0x1d1)};check(_0x3ae3e7,String);const _0x2cc080=globalDb[_0x18fdab(0x1de)][_0x18fdab(0x1d8)][_0x18fdab(0x191)](_0x3ae3e7);if(!_0x2cc080)throw new Meteor[(_0x18fdab(0x1b2))](0x190,_0x18fdab(0x14e));const _0x36352e=globalDb[_0x18fdab(0x1de)][_0x18fdab(0x1aa)]['findOne'](_0x2cc080[_0x18fdab(0x1a3)]);if(!_0x36352e)throw new Meteor[(_0x18fdab(0x1b2))](0x1f4,_0x4bf423[_0x18fdab(0x186)]);return _0x36352e[_0x18fdab(0x136)];}}),HackSessionContextImpl=class HackSessionContextImpl extends SessionContextImpl{constructor(_0xb73d3e,_0xefdb41,_0x4e9dd5,_0xc01994){super(_0xb73d3e,_0xefdb41,_0x4e9dd5,_0xc01994);}['_getPublicId'](){const _0xb3fd8d=_0x557131,_0x408c54={'NnsUm':function(_0x5b8ed2,_0x352b0a){return _0x5b8ed2!==_0x352b0a;},'HCsFX':function(_0x3ff3b5,_0xdcd7dc){return _0x3ff3b5+_0xdcd7dc;},'erUbn':_0xb3fd8d(0x199),'iopJn':_0xb3fd8d(0x154),'yogEA':'esqiZ','pcKMC':_0xb3fd8d(0x1af),'QitqQ':function(_0x198284,_0x1bd85c){return _0x198284(_0x1bd85c);},'ljCiR':_0xb3fd8d(0x1c2),'YQyUa':_0xb3fd8d(0x148)};while(!this[_0xb3fd8d(0x198)]){if(_0x408c54[_0xb3fd8d(0x182)]!==_0x408c54[_0xb3fd8d(0x1d6)]){const _0x395fe7=Grains['findOne'](this[_0xb3fd8d(0x1a3)],{'fields':{'publicId':0x1}});if(!_0x395fe7)throw new Error(_0x408c54[_0xb3fd8d(0x174)]);if(_0x395fe7[_0xb3fd8d(0x198)])this[_0xb3fd8d(0x198)]=_0x395fe7[_0xb3fd8d(0x198)];else{const _0x15142e=_0x408c54[_0xb3fd8d(0x121)](generateRandomHostname,0x14);if(Grains[_0xb3fd8d(0x191)]({'publicId':_0x15142e})){console[_0xb3fd8d(0x11a)]('CRITICAL\x20PROBLEM:\x20Public\x20ID\x20collision.\x20'+_0xb3fd8d(0x13a));continue;}if(Grains[_0xb3fd8d(0x1cc)]({'_id':this[_0xb3fd8d(0x1a3)],'publicId':{'$exists':![]}},{'$set':{'publicId':_0x15142e}})>0x0){if(_0x408c54[_0xb3fd8d(0x161)]!==_0x408c54[_0xb3fd8d(0x1c6)])this['publicId']=_0x15142e;else{const _0x2bbb20=_0x2b1d4e[_0xb3fd8d(0x190)](_0x10d66f);if(_0x2bbb20['hash']){if(_0x2bbb20[_0xb3fd8d(0x160)]&&_0x408c54[_0xb3fd8d(0x14d)](_0x2bbb20[_0xb3fd8d(0x160)],'/'))throw new _0x3f37ad(_0xb3fd8d(0x13c));const _0x102018=_0x2bbb20[_0xb3fd8d(0x19a)][_0xb3fd8d(0x149)](0x1),_0x1dd94a=_0x3ede25(_0x2bbb20[_0xb3fd8d(0x15b)]);return{'view':new _0x2acf55(_0x5c6107,_0x102018)};}else return{'view':new _0x4f822b(_0xa28b6f)};}}}}else throw new _0xe21992(_0x408c54['HCsFX'](_0x408c54[_0xb3fd8d(0x141)],_0xb3fd8d(0x13d)));}return this[_0xb3fd8d(0x198)];}['_getAddress'](){const _0x1ab39c=_0x557131,_0x5bc9d1={'SqQJS':function(_0x274069,_0x1b9b1a){return _0x274069+_0x1b9b1a;}};return _0x5bc9d1[_0x1ab39c(0x1bd)](this['_getPublicId']()+'@',HOSTNAME);}[_0x557131(0x16e)](){const _0x392dff=_0x557131,_0x218cec=Grains['findOne'](this[_0x392dff(0x1a3)],{'fields':{'identityId':0x1}}),_0x1a397a=globalDb[_0x392dff(0x152)](_0x218cec['identityId']),_0x4422df=_['findWhere'](SandstormDb['getVerifiedEmails'](_0x1a397a),{'primary':!![]}),_0x1a7bc5=_0x4422df&&_0x4422df[_0x392dff(0x1ab)]||_0x1a397a[_0x392dff(0x197)],_0x1ee996={};return _0x1a7bc5&&(_0x1ee996[_0x392dff(0x1b9)]=_0x1a7bc5),_0x1a397a[_0x392dff(0x19c)]['name']&&(_0x1ee996[_0x392dff(0x1c4)]=_0x1a397a[_0x392dff(0x19c)][_0x392dff(0x1c4)]),_0x1ee996;}['send'](_0x10479d){const _0x452cc7=_0x557131,_0x41b57d={'KlIRn':function(_0x23f809,_0x442e16,_0x24fb71){return _0x23f809(_0x442e16,_0x24fb71);}};return _0x41b57d[_0x452cc7(0x1d9)](hackSendEmail,this,_0x10479d);}['getPublicId'](){const _0x2c362c=_0x557131,_0x1e5785={'ozNee':function(_0x46d123,_0x3828d7){return _0x46d123(_0x3828d7);}};return _0x1e5785[_0x2c362c(0x138)](inMeteor,function(){const _0x459219=_0x2c362c,_0x34af43={};_0x34af43['publicId']=this[_0x459219(0x126)](),_0x34af43['hostname']=HOSTNAME,_0x34af43[_0x459219(0x183)]=ROOT_URL[_0x459219(0x170)]+'//'+makeWildcardHost(_0x34af43['publicId']);const _0x7426e1=Grains[_0x459219(0x191)](this['grainId'],{'fields':{'userId':0x1}});return _0x34af43[_0x459219(0x1b8)]=Meteor['users'][_0x459219(0x191)](_0x7426e1[_0x459219(0x17f)])[_0x459219(0x1c1)]?!![]:![],_0x34af43;}['bind'](this));}[_0x557131(0x133)](_0x10aedc){const _0xd05f6d=_0x557131,_0x412d10={'rZLKz':'content-type','bVVvY':_0xd05f6d(0x1b6),'dCrRD':function(_0x459b0a,_0x1dfe62){return _0x459b0a+_0x1dfe62;},'skuDh':_0xd05f6d(0x159),'xFphz':function(_0x4019a7,_0x4973ea){return _0x4019a7+_0x4973ea;},'umYbA':_0xd05f6d(0x1d0),'GdfUb':'1|0|4|2|3','wBvap':_0xd05f6d(0x15d),'FLEfu':_0xd05f6d(0x14b),'zeptW':function(_0x2d4cd3,_0x17a117){return _0x2d4cd3(_0x17a117);},'wIYoN':_0xd05f6d(0x1ae),'cPnpu':function(_0x50fbbd,_0x22c536){return _0x50fbbd!==_0x22c536;},'hQqQU':_0xd05f6d(0x187),'fyTYh':_0xd05f6d(0x165),'ipIUd':'precondition','AHtfq':function(_0x2af259,_0x1c4395){return _0x2af259(_0x1c4395);}},_0x36339b=this,_0x4ff65e=_0x36339b;return new Promise((_0x3a63a6,_0x57e637)=>{const _0x52642b=_0xd05f6d,_0x5d7ed1={'UthKk':_0x52642b(0x1a6),'jeqQG':_0x412d10[_0x52642b(0x150)],'bkItO':_0x412d10['wBvap'],'zDDrB':_0x412d10[_0x52642b(0x192)],'qplYz':function(_0x25284f,_0x5aa0e4){return _0x412d10['zeptW'](_0x25284f,_0x5aa0e4);},'xeBbp':_0x412d10[_0x52642b(0x1d3)]};let _0x40f459=Http[_0x52642b(0x18f)];if(_0x10aedc[_0x52642b(0x19e)](_0x412d10[_0x52642b(0x16c)])===0x0)_0x40f459=Https['request'];else _0x412d10[_0x52642b(0x175)](_0x10aedc[_0x52642b(0x19e)](_0x412d10[_0x52642b(0x139)]),0x0)&&(err=new Error(_0x412d10['fyTYh']),err['nature']=_0x412d10['ipIUd'],_0x412d10['AHtfq'](_0x57e637,err));req=_0x40f459(_0x10aedc,_0x1c3f91=>{const _0x40a0d5=_0x52642b,_0x4dadce={'CDFHT':function(_0x3c175b,_0x4f03bd){return _0x3c175b(_0x4f03bd);},'ZJHly':_0x412d10['rZLKz']},_0x555b88=[];let _0x29e4a3;switch(Math[_0x40a0d5(0x18a)](_0x1c3f91[_0x40a0d5(0x1b0)]/0x64)){case 0x2:_0x1c3f91['on'](_0x40a0d5(0x1a1),_0x5da336=>{const _0x57a7fe=_0x40a0d5;_0x555b88[_0x57a7fe(0x127)](_0x5da336);}),_0x1c3f91['on'](_0x412d10['bVVvY'],()=>{const _0x180486=_0x40a0d5;_0x4dadce[_0x180486(0x1e1)](_0x3a63a6,{'content':Buffer[_0x180486(0x145)](_0x555b88),'mimeType':_0x1c3f91[_0x180486(0x130)][_0x4dadce['ZJHly']]||null});});break;case 0x3:_0x3a63a6(_0x4ff65e[_0x40a0d5(0x133)](_0x1c3f91[_0x40a0d5(0x130)][_0x40a0d5(0x11c)]));break;case 0x4:_0x29e4a3=new Error(_0x412d10[_0x40a0d5(0x19b)]('Status\x20code\x20'+_0x1c3f91['statusCode'],_0x40a0d5(0x188))),_0x29e4a3[_0x40a0d5(0x1a7)]=_0x40a0d5(0x1c0),_0x57e637(_0x29e4a3);break;case 0x5:_0x29e4a3=new Error(_0x412d10[_0x40a0d5(0x129)]+_0x1c3f91[_0x40a0d5(0x1b0)]+_0x40a0d5(0x188)),_0x29e4a3[_0x40a0d5(0x1a7)]=_0x40a0d5(0x1d0),_0x57e637(_0x29e4a3);break;default:_0x29e4a3=new Error(_0x412d10[_0x40a0d5(0x19b)](_0x412d10[_0x40a0d5(0x1c7)](_0x40a0d5(0x123),_0x1c3f91[_0x40a0d5(0x1b0)]),_0x40a0d5(0x188))),_0x29e4a3[_0x40a0d5(0x1a7)]=_0x412d10['umYbA'],_0x57e637(_0x29e4a3);break;}}),req['on']('error',_0x3cdec6=>{const _0x1b3316=_0x52642b;_0x3cdec6[_0x1b3316(0x1a7)]=_0x5d7ed1[_0x1b3316(0x169)],_0x57e637(_0x3cdec6);}),req[_0x52642b(0x195)](0x3a98,()=>{const _0x1fdfb9=_0x52642b,_0x2dd412=_0x5d7ed1[_0x1fdfb9(0x156)][_0x1fdfb9(0x11d)]('|');let _0xf75967=0x0;while(!![]){switch(_0x2dd412[_0xf75967++]){case'0':err=new Error(_0x5d7ed1[_0x1fdfb9(0x124)]);continue;case'1':req['abort']();continue;case'2':err[_0x1fdfb9(0x1c8)]=_0x5d7ed1[_0x1fdfb9(0x1cd)];continue;case'3':_0x5d7ed1[_0x1fdfb9(0x1df)](_0x57e637,err);continue;case'4':err['nature']=_0x5d7ed1['xeBbp'];continue;}break;}}),req[_0x52642b(0x1b6)]();});}[_0x557131(0x1cf)](){const _0x3536cf=_0x557131;return inMeteor(function(){const _0x38b3d1=_0x4911;return this[_0x38b3d1(0x16e)]();}[_0x3536cf(0x17a)](this));}[_0x557131(0x177)](_0x48d78b,_0x7c5d80,_0x3a49d0){const _0x41fb15=_0x557131;throw new Error(_0x41fb15(0x1cb));}[_0x557131(0x16a)](){const _0xe3fda6=_0x557131,_0x59030a={'YBkPN':_0xe3fda6(0x1bc)};throw new Error(_0x59030a[_0xe3fda6(0x12a)]);}[_0x557131(0x1c9)](_0x4b81ca){const _0x375e1b=_0x557131,_0x48708d={'hcwAW':_0x375e1b(0x189)};throw new Error(_0x48708d[_0x375e1b(0x1b7)]);}['getUiViewForEndpoint'](_0x143cb7){const _0x308a43=_0x557131,_0x3b825f={'MHFnH':_0x308a43(0x13c)},_0x230cc3=Url[_0x308a43(0x190)](_0x143cb7);if(_0x230cc3['hash']){if(_0x230cc3[_0x308a43(0x160)]&&_0x230cc3['pathname']!=='/')throw new Error(_0x3b825f[_0x308a43(0x163)]);const _0x49da43=_0x230cc3[_0x308a43(0x19a)][_0x308a43(0x149)](0x1),_0x480465=matchWildcardHost(_0x230cc3['host']);return{'view':new ExternalUiView(_0x143cb7,_0x49da43)};}else return{'view':new ExternalUiView(_0x143cb7)};}},makeHackSessionContext=(_0x501de8,_0x81f19a,_0x1329a7,_0x1aaae5)=>{const _0x87ec43=_0x557131;return new Capnp[(_0x87ec43(0x157))](new HackSessionContextImpl(_0x501de8,_0x81f19a,_0x1329a7,_0x1aaae5),HackSessionContext);};const HOSTNAME_CHARS='abcdefghijklmnopqrstuvwxyz0123456789';generateRandomHostname=_0x5d0962=>{const _0x3df65a=_0x557131,_0x154b33=[];for(let _0x300376=0x0;_0x300376<_0x5d0962;_0x300376++){_0x154b33[_0x300376]=Random['choice'](HOSTNAME_CHARS);}return _0x154b33[_0x3df65a(0x19d)]('');};