const _0x1a7e81=_0x3ba9;(function(_0x1ca8b5,_0x45467c){const _0x53e0ce=_0x3ba9,_0x43c64b=_0x1ca8b5();while(!![]){try{const _0x3ae2b8=parseInt(_0x53e0ce(0xaf))/0x1*(parseInt(_0x53e0ce(0xc6))/0x2)+parseInt(_0x53e0ce(0xa2))/0x3+parseInt(_0x53e0ce(0xbc))/0x4+parseInt(_0x53e0ce(0x84))/0x5*(-parseInt(_0x53e0ce(0xcb))/0x6)+-parseInt(_0x53e0ce(0xb8))/0x7+parseInt(_0x53e0ce(0x7e))/0x8+-parseInt(_0x53e0ce(0xd2))/0x9;if(_0x3ae2b8===_0x45467c)break;else _0x43c64b['push'](_0x43c64b['shift']());}catch(_0x328292){_0x43c64b['push'](_0x43c64b['shift']());}}}(_0x4be7,0xa7949));import _0x301397 from'escape-html';import _0x400eca from'../../../components/cardbuilder/cardBuilder';import _0x40081e from'../../../components/loading/loading';import _0x461e9e from'../../../scripts/dom';import _0x498543 from'../../../scripts/globalize';import _0x45e7ac from'../../../scripts/imagehelper';import{formatDistanceToNow}from'date-fns';import{getLocaleWithSuffix}from'../../../scripts/dfnshelper';import'../../../elements/emby-button/emby-button';import'../../../elements/emby-itemscontainer/emby-itemscontainer';function _0x4be7(){const _0x26aabe=['innerHTML','<div\x20class=\x22cardPadder\x20cardPadder-backdrop\x22></div>','66GUvyLs','Menu','click','<div\x20data-id=\x27','KGKlU','push','kFUZA','18882351rOFrXe','tgamW','mfUQK','<a\x20is=\x22emby-linkbutton\x22\x20href=\x22','xbvRf','then','Delete','</a>','navigate','<span\x20class=\x22cardImageIcon\x20material-icons\x20tablet_android\x22\x20aria-hidden=\x22true\x22></span>','data-id','querySelector','deleteDevice','hdmzi','#deviceDeleteAll','open','<div\x20style=\x22text-align:right;\x20float:right;padding-top:5px;\x22>','Items','AppName','QGuaS','\x22\x20class=\x22btnDeviceMenu\x22><span\x20class=\x22material-icons\x20more_vert\x22\x20aria-hidden=\x22true\x22></span></button>','AYsqN','getDeviceIcon','&nbsp;','10515456yAJbma','HeaderDeleteDevices','thwGz','hide','stringify','\x27\x20class=\x27card\x20backdropCard\x27>','74285KyvDEl','NhpkV','map','Name','<div\x20class=\x27cardText\x27>','pHSMS','Devices','INCGf','xNoUB','filter','#!/device.html?id=','getUrl','bBuLo','all','../../../components/actionSheet/actionSheet','qpjyJ','BaErj','getJSON','3.4.1.31','LastUserName','sycJr','btnDeviceMenu','<button\x20type=\x22button\x22\x20is=\x22paper-icon-button-light\x22\x20data-id=\x22','KDbAD','MLfIr','mWQVj','deviceId','show','parentWithClass','delete','2728896OLpJfR','ZyGbc','translate','\x27);background-size:\x20auto\x2064%;background-position:center\x20center;\x22>','UnZMp','tRwsr','eiwlv','RcMdy','TZFfw','\x22\x20title=\x22','\x22\x20class=\x22cardContent\x20cardImageContainer\x20','AppVersion','viewshow','5017SWjgsY','DeleteDeviceConfirmation','</div>','addEventListener','tPddA','Edit','HDmuP','target','IOYML','1628753zquuuI','parse','BPqto','AYgSJ','3524940GUpHdW','<div\x20class=\x22cardBox\x20visualCardBox\x22>','sCqeB','getDefaultBackgroundClass','getAttribute','return\x20await\x20Promise.resolve(42);','.devicesList','dUiYl','GnxPk','nTNFV','30maPfro','HeaderDeleteDevice','lQBFI'];_0x4be7=function(){return _0x26aabe;};return _0x4be7();}import'../../../components/cardbuilder/card.scss';import _0xe04fd from'../../../scripts/clientUtils';import _0x5f45df from'../../../components/confirm/confirm';let deviceIds=[];function canDelete(_0x19b625){const _0x534f4d=_0x3ba9,_0x18548e={'IOYML':_0x534f4d(0xc1)};return new AsyncFunction(_0x18548e[_0x534f4d(0xb7)])(),_0x19b625!==ApiClient[_0x534f4d(0x9e)]();}function deleteAllDevices(_0xc4bb5f){const _0x20b45b=_0x3ba9,_0x827a36={'LEOpZ':function(_0x24af0c,_0x502447){return _0x24af0c(_0x502447);},'jCIJW':_0x20b45b(0x7f),'mWQVj':_0x20b45b(0x6c),'mfUQK':_0x20b45b(0xa1)},_0x547cff=_0x498543[_0x20b45b(0xa4)]('DeleteDevicesConfirmation');_0x5f45df({'text':_0x547cff,'title':_0x498543[_0x20b45b(0xa4)](_0x827a36['jCIJW']),'confirmText':_0x498543['translate'](_0x827a36[_0x20b45b(0x9d)]),'primary':_0x827a36[_0x20b45b(0x68)]})[_0x20b45b(0x6b)](async()=>{const _0x149332=_0x20b45b;_0x40081e[_0x149332(0x9f)](),await Promise[_0x149332(0x91)](deviceIds[_0x149332(0x8d)](canDelete)[_0x149332(0x86)](_0x45f13b=>ApiClient[_0x149332(0x72)](_0x45f13b))),_0x827a36['LEOpZ'](loadData,_0xc4bb5f);});}function _0x3ba9(_0x155fdf,_0x2fdeb7){const _0x4be714=_0x4be7();return _0x3ba9=function(_0x3ba9a3,_0x543f24){_0x3ba9a3=_0x3ba9a3-0x68;let _0x29c5e0=_0x4be714[_0x3ba9a3];return _0x29c5e0;},_0x3ba9(_0x155fdf,_0x2fdeb7);}function deleteDevice(_0x2b3318,_0xcc55b5){const _0x55a0a5=_0x3ba9,_0x1305f1={'JkVhn':_0x55a0a5(0xc7),'KDbAD':'Delete','ydnuP':'delete'},_0x5c99bc=_0x498543[_0x55a0a5(0xa4)](_0x55a0a5(0xb0));_0x5f45df({'text':_0x5c99bc,'title':_0x498543[_0x55a0a5(0xa4)](_0x1305f1['JkVhn']),'confirmText':_0x498543[_0x55a0a5(0xa4)](_0x1305f1[_0x55a0a5(0x9b)]),'primary':_0x1305f1['ydnuP']})['then'](async()=>{const _0x5db2af=_0x55a0a5;_0x40081e[_0x5db2af(0x9f)](),await ApiClient[_0x5db2af(0x72)](_0xcc55b5),loadData(_0x2b3318);});}function showDeviceMenu(_0xf5def1,_0xbeb55c,_0x8aba47){const _0x4d750d=_0x3ba9,_0x332acf={'INCGf':function(_0xad3e1d,_0x5df498,_0x13dfd2,_0x1594ba){return _0xad3e1d(_0x5df498,_0x13dfd2,_0x1594ba);},'iaQES':_0x4d750d(0x75),'tgamW':'qPlqC','pHSMS':_0x4d750d(0xb4),'bQcGW':'mode_edit','UZGQl':function(_0x47323c,_0x196678){return _0x47323c!==_0x196678;},'KGKlU':'vxMDU','bBuLo':_0x4d750d(0x6c),'HDmuP':_0x4d750d(0xa1)},_0x45dc9a=[];canEdit&&(_0x332acf[_0x4d750d(0xd3)]===_0x4d750d(0xc3)?(_0x4fba6d['show'](),_0x43b077[_0x4d750d(0x95)](_0x436c82[_0x4d750d(0x8f)](_0x4d750d(0x8a)))[_0x4d750d(0x6b)](function(_0x640ec2){const _0x3ecf61=_0x4d750d;_0x390a6a(_0x311741,_0x640ec2[_0x3ecf61(0x77)]),_0x4b5402=_0x640ec2['Items'][_0x3ecf61(0x86)](_0x58f7ac=>_0x58f7ac['Id']),_0x3cc4fb[_0x3ecf61(0x81)]();})):_0x45dc9a['push']({'name':_0x498543[_0x4d750d(0xa4)](_0x332acf[_0x4d750d(0x89)]),'id':_0x4d750d(0x75),'icon':_0x332acf['bQcGW']}));if(canDelete(_0x8aba47)){if(_0x332acf['UZGQl'](_0x4d750d(0xa6),_0x332acf[_0x4d750d(0xcf)]))_0x45dc9a[_0x4d750d(0xd0)]({'name':_0x498543[_0x4d750d(0xa4)](_0x332acf[_0x4d750d(0x90)]),'id':'delete','icon':_0x332acf[_0x4d750d(0xb5)]});else{const _0x4aaee3=_0xe381ef[_0x4d750d(0xa0)](_0x213389[_0x4d750d(0xb6)],_0x4d750d(0x99));_0x4aaee3&&_0x332acf[_0x4d750d(0x8b)](_0x60aea7,_0x163af2,_0x4aaee3,_0x4aaee3[_0x4d750d(0xc0)]('data-id'));}}import(_0x4d750d(0x92))[_0x4d750d(0x6b)](({default:_0x149707})=>{const _0x525120=_0x4d750d,_0x2b508b={'thwGz':_0x332acf['iaQES'],'gXUrI':'device.html?id='};_0x149707[_0x525120(0x9f)]({'items':_0x45dc9a,'positionTo':_0xbeb55c,'callback':function(_0x5e68f0){const _0x117d50=_0x525120;switch(_0x5e68f0){case _0x2b508b[_0x117d50(0x80)]:_0xe04fd[_0x117d50(0x6e)](_0x2b508b['gXUrI']+_0x8aba47);break;case'delete':deleteDevice(_0xf5def1,_0x8aba47);}}});});}function load(_0x1b9491,_0x515466){const _0x10d11d=_0x3ba9,_0x38df07={'GnxPk':function(_0x36d11a,_0x230f8f){return _0x36d11a+_0x230f8f;},'kFUZA':_0x10d11d(0xbd),'RrZJE':_0x10d11d(0xca),'MLfIr':function(_0x59568b,_0x4d4fee){return _0x59568b+_0x4d4fee;},'NhpkV':function(_0x53692e,_0x336eef){return _0x53692e!==_0x336eef;},'sycJr':_0x10d11d(0xba),'ZyGbc':function(_0x3b473d,_0x134101){return _0x3b473d+_0x134101;},'AHLJG':_0x10d11d(0x9a),'sCqeB':_0x10d11d(0xcc),'oOlpS':_0x10d11d(0x7a),'eiwlv':function(_0x5b9d65,_0x2c1ba8){return _0x5b9d65(_0x2c1ba8);},'hdmzi':function(_0x5d631f,_0x1c7b0e){return _0x5d631f+_0x1c7b0e;},'qpjyJ':'<div\x20class=\x27cardText\x20cardText-secondary\x27>','tRwsr':function(_0x30a12e,_0x3d534f){return _0x30a12e(_0x3d534f);},'xNoUB':function(_0x373223,_0x565040){return _0x373223+_0x565040;},'xbvRf':function(_0xddae4,_0x2ae9cb,_0xf70714){return _0xddae4(_0x2ae9cb,_0xf70714);},'nTNFV':_0x10d11d(0xb1),'AYgSJ':'return\x20await\x20Promise.resolve(42);','xEhfl':function(_0x219c09){return _0x219c09();},'QGuaS':'.devicesList'},_0x310b8a=_0x38df07['xEhfl'](getLocaleWithSuffix);let _0x130cc0='';_0x130cc0+=_0x515466[_0x10d11d(0x86)](function(_0x1b587f){const _0x466a72=_0x10d11d;let _0x2f081c='';_0x2f081c+=_0x38df07[_0x466a72(0xc4)](_0x466a72(0xce)+_0x1b587f['Id'],_0x466a72(0x83)),_0x2f081c+=_0x38df07[_0x466a72(0xd1)],_0x2f081c+='<div\x20class=\x22cardScalable\x22>',_0x2f081c+=_0x38df07['RrZJE'],_0x2f081c+=_0x466a72(0x69)+(canEdit?_0x466a72(0x8e)+_0x1b587f['Id']:'#')+_0x466a72(0xac)+_0x400eca[_0x466a72(0xbf)]()+'\x22>';const _0x3c38b6=_0x45e7ac[_0x466a72(0x7c)](_0x1b587f);return _0x3c38b6?(_0x2f081c+=_0x38df07[_0x466a72(0x9c)]('<div\x20class=\x22cardImage\x22\x20style=\x22background-image:url(\x27'+_0x3c38b6,_0x466a72(0xa5)),_0x2f081c+=_0x466a72(0xb1)):_0x38df07[_0x466a72(0x85)](_0x38df07[_0x466a72(0x98)],_0x38df07[_0x466a72(0x98)])?_0x25b86b(this):_0x2f081c+=_0x466a72(0x6f),_0x2f081c+=_0x466a72(0x6d),_0x2f081c+=_0x466a72(0xb1),_0x2f081c+='<div\x20class=\x22cardFooter\x22>',(canEdit||canDelete(_0x1b587f['Id']))&&(_0x2f081c+=_0x466a72(0x76),_0x2f081c+=_0x38df07['GnxPk'](_0x38df07[_0x466a72(0xc4)](_0x38df07[_0x466a72(0xa3)](_0x38df07['AHLJG']+_0x1b587f['Id'],_0x466a72(0xab)),_0x498543[_0x466a72(0xa4)](_0x38df07[_0x466a72(0xbe)])),_0x38df07['oOlpS']),_0x2f081c+=_0x466a72(0xb1)),_0x2f081c+=_0x466a72(0x88),_0x2f081c+=_0x38df07[_0x466a72(0xa8)](_0x301397,_0x1b587f[_0x466a72(0x87)]),_0x2f081c+=_0x466a72(0xb1),_0x2f081c+='<div\x20class=\x27cardText\x20cardText-secondary\x27>',_0x2f081c+=_0x38df07['eiwlv'](_0x301397,_0x38df07['MLfIr'](_0x38df07[_0x466a72(0x73)](_0x1b587f[_0x466a72(0x78)],'\x20'),_0x1b587f[_0x466a72(0xad)])),_0x2f081c+=_0x466a72(0xb1),_0x2f081c+=_0x38df07[_0x466a72(0x93)],_0x1b587f[_0x466a72(0x97)]&&(_0x2f081c+=_0x38df07[_0x466a72(0xa7)](_0x301397,_0x1b587f[_0x466a72(0x97)]),_0x2f081c+=_0x38df07[_0x466a72(0x8c)](',\x20',_0x38df07[_0x466a72(0x6a)](formatDistanceToNow,Date[_0x466a72(0xb9)](_0x1b587f['DateLastActivity']),_0x310b8a))),_0x2f081c+=_0x466a72(0x7d),_0x2f081c+=_0x38df07[_0x466a72(0xc5)],_0x2f081c+=_0x466a72(0xb1),_0x2f081c+=_0x466a72(0xb1),_0x2f081c+='</div>',new AsyncFunction(_0x38df07[_0x466a72(0xbb)])(),_0x2f081c;})['join'](''),_0x1b9491[_0x10d11d(0x71)](_0x38df07[_0x10d11d(0x79)])[_0x10d11d(0xc9)]=_0x130cc0,eval('const _0xb8bc41 = _0x10d11d;JSON[_0xb8bc41(130)]({ \'safe\': !![] });');}function loadData(_0x4169b7){const _0x46a1d4=_0x3ba9,_0x5f0f9c={'lQBFI':_0x46a1d4(0x8a)};_0x40081e[_0x46a1d4(0x9f)](),ApiClient[_0x46a1d4(0x95)](ApiClient['getUrl'](_0x5f0f9c[_0x46a1d4(0xc8)]))[_0x46a1d4(0x6b)](function(_0x1334e1){const _0x274b45=_0x46a1d4;load(_0x4169b7,_0x1334e1[_0x274b45(0x77)]),deviceIds=_0x1334e1['Items'][_0x274b45(0x86)](_0x38389c=>_0x38389c['Id']),_0x40081e[_0x274b45(0x81)]();});}const canEdit=ApiClient['isMinServerVersion'](_0x1a7e81(0x96));export default function (view){const _0x569de5=_0x1a7e81,BnixRg={'AYsqN':_0x569de5(0xb3),'RcMdy':function(callee,param1,param2,param3){return callee(param1,param2,param3);},'TZFfw':function(callee,param1){return callee(param1);}};view['querySelector'](_0x569de5(0xc2))[_0x569de5(0xb2)](_0x569de5(0xcd),function(e){const _0x1dd98c=_0x569de5,btnDeviceMenu=_0x461e9e['parentWithClass'](e[_0x1dd98c(0xb6)],_0x1dd98c(0x99));btnDeviceMenu&&(BnixRg[_0x1dd98c(0x7b)]!==_0x1dd98c(0x94)?BnixRg[_0x1dd98c(0xa9)](showDeviceMenu,view,btnDeviceMenu,btnDeviceMenu[_0x1dd98c(0xc0)](_0x1dd98c(0x70))):(_0x45c7ee+=_0x17b975(_0x30cdb6[_0x1dd98c(0x97)]),_0x42db58+=',\x20'+_0xdb2cd(_0x5ec4ce[_0x1dd98c(0xb9)](_0x12663d['DateLastActivity']),_0x24e25b)));}),view[_0x569de5(0xb2)](_0x569de5(0xae),function(){const _0x2b8818=_0x569de5;BnixRg[_0x2b8818(0xaa)](loadData,this);}),view[_0x569de5(0x71)](_0x569de5(0x74))['addEventListener']('click',function(){const _0x1bebc4=_0x569de5;BnixRg[_0x1bebc4(0xaa)](deleteAllDevices,view);});}