const _0x3dd7bc=_0x1611;(function(_0xda5fb4,_0x5f1270){const _0x2ce554=_0x1611,_0x2587e1=_0xda5fb4();while(!![]){try{const _0x28b048=-parseInt(_0x2ce554(0xf6))/0x1+parseInt(_0x2ce554(0x117))/0x2+parseInt(_0x2ce554(0xf1))/0x3+-parseInt(_0x2ce554(0x110))/0x4+parseInt(_0x2ce554(0x118))/0x5*(-parseInt(_0x2ce554(0x123))/0x6)+parseInt(_0x2ce554(0xf7))/0x7+parseInt(_0x2ce554(0x124))/0x8;if(_0x28b048===_0x5f1270)break;else _0x2587e1['push'](_0x2587e1['shift']());}catch(_0x1a314b){_0x2587e1['push'](_0x2587e1['shift']());}}}(_0x336e,0xd59df));const router=require(_0x3dd7bc(0x11e))[_0x3dd7bc(0x106)],request=require('request'),{URL}=require(_0x3dd7bc(0x115)),validator=require(_0x3dd7bc(0x113)),{startDownUpload}=require(_0x3dd7bc(0x11f)),{getURLMeta,getRedirectEvaluator,getProtectedHttpAgent}=require('../helpers/request'),logger=require(_0x3dd7bc(0xf4)),validateURL=(_0x182277,_0x6239ae)=>{const _0x30b38f=_0x3dd7bc,_0x1d52f8={'XeJBN':function(_0x5929b2,_0x1ce3fb){return _0x5929b2*_0x1ce3fb;},'oCjwh':_0x30b38f(0xe6)};if(!_0x182277)return eval('Math[\'PI\'] * 2;'),![];const _0x466c8e={'protocols':[_0x30b38f(0x10b),_0x1d52f8[_0x30b38f(0x112)]],'require_protocol':!![],'require_tld':!_0x6239ae};if(!validator[_0x30b38f(0xec)](_0x182277,_0x466c8e))return eval('const _0x3843f0 = _0x30b38f;_0x1d52f8[_0x3843f0(273)](Math[\'PI\'], 2);'),![];return new Function(_0x30b38f(0x102))(),!![];},downloadURL=async(_0x2c727f,_0x1ab2ad,_0x36b750)=>{const _0x74ed01=_0x3dd7bc,_0x4d099f={'RCOPt':_0x74ed01(0x101),'RqwnO':_0x74ed01(0x11d),'IISSM':'return\x20Object.keys({a:1});','QvKBv':function(_0x43f967,_0xc58d14){return _0x43f967===_0xc58d14;},'eLlhS':function(_0x400d2c,_0x578d5c){return _0x400d2c(_0x578d5c);},'xblGh':_0x74ed01(0xe5),'mTuZw':function(_0x1023b8,_0x2c6d66,_0x18d2dd){return _0x1023b8(_0x2c6d66,_0x18d2dd);}},_0x14b808={'uri':_0x2c727f,'method':_0x4d099f[_0x74ed01(0xe8)],'followRedirect':getRedirectEvaluator(_0x2c727f,_0x1ab2ad),'agentClass':getProtectedHttpAgent(new URL(_0x2c727f)[_0x74ed01(0xfa)],_0x1ab2ad)};return _0x4d099f[_0x74ed01(0xfd)](setTimeout,function(){const _0x18e5d8=_0x74ed01;_0x18e5d8(0x101)===_0x4d099f[_0x18e5d8(0xe7)]?console[_0x18e5d8(0x11b)](_0x4d099f[_0x18e5d8(0xfe)]):_0x1eea92['PI']*0x2;},0x64),new Promise((_0x1b0673,_0x2f1412)=>{const _0x30369c=_0x74ed01,_0x1db078={'Lcktb':_0x4d099f['IISSM'],'rCLuN':function(_0x3c532a,_0x2804d1){return _0x3c532a(_0x2804d1);},'QyvgR':function(_0xe77309,_0x52c9d1){const _0x53c2bf=_0x1611;return _0x4d099f[_0x53c2bf(0xff)](_0xe77309,_0x52c9d1);},'HaAbh':'Smsjf','jitpb':'controller.url.download.error'},_0x343e7f=_0x4d099f[_0x30369c(0x105)](request,_0x14b808)['on'](_0x30369c(0xe3),_0x2c5937=>{const _0xed05dc=_0x30369c;if(_0x2c5937['statusCode']>=0x12c){_0x343e7f[_0xed05dc(0x120)](),_0x2f1412(new Error('URL\x20server\x20responded\x20with\x20status:\x20'+_0x2c5937['statusCode'])),Function(_0x1db078['Lcktb'])();return;}_0x2c5937[_0xed05dc(0xf5)](),_0x1b0673(_0x2c5937);})['on'](_0x30369c(0xe2),_0xaccc48=>{const _0x381071=_0x30369c;_0x1db078[_0x381071(0x107)](_0x1db078[_0x381071(0x10d)],_0x1db078[_0x381071(0x10d)])?(logger[_0x381071(0xe2)](_0xaccc48,_0x1db078[_0x381071(0x10a)],_0x36b750),_0x1db078[_0x381071(0xef)](_0x2f1412,_0xaccc48)):(_0x30c03c['error'](_0x16d6be,_0x381071(0xe9),_0x12c265),_0x1db078[_0x381071(0xef)](_0x566a42,_0x4cc0a8));});});},meta=async(_0x412dd9,_0x35cb95)=>{const _0xf54c35=_0x3dd7bc,_0x445322={'KQjrR':function(_0x1f1664,_0x1f22a8,_0x2f2524){return _0x1f1664(_0x1f22a8,_0x2f2524);},'zgZQb':'updateClock();','OlcAM':function(_0x4cb4e2,_0x3a28ec,_0x4d372b){return _0x4cb4e2(_0x3a28ec,_0x4d372b);},'xddco':_0xf54c35(0x102)};try{logger[_0xf54c35(0xf8)](_0xf54c35(0x109),null,_0x412dd9['id']);const {debug:_0x1ee306}=_0x412dd9[_0xf54c35(0xe0)][_0xf54c35(0xf3)];if(!_0x445322[_0xf54c35(0x10e)](validateURL,_0x412dd9['body']['url'],_0x1ee306))return logger[_0xf54c35(0xf8)](_0xf54c35(0x108),null,_0x412dd9['id']),setInterval(_0x445322[_0xf54c35(0xea)],0x3e8),_0x35cb95[_0xf54c35(0xe4)](0x190)[_0xf54c35(0xfc)]({'error':_0xf54c35(0xee)});const _0x35506f=await _0x445322[_0xf54c35(0xf9)](getURLMeta,_0x412dd9[_0xf54c35(0xdf)][_0xf54c35(0x115)],!_0x1ee306);return new Function(_0x445322['xddco'])(),_0x35cb95[_0xf54c35(0xfc)](_0x35506f);}catch(_0x33aa91){return logger[_0xf54c35(0xe2)](_0x33aa91,_0xf54c35(0x11a),_0x412dd9['id']),setTimeout(_0xf54c35(0xe1),0x3e8),_0x35cb95['status'](_0x33aa91[_0xf54c35(0xe4)]||0x1f4)[_0xf54c35(0xfc)]({'message':'failed\x20to\x20fetch\x20URL\x20metadata'});}},get=async(_0x355602,_0x275d61)=>{const _0x23f33b=_0x3dd7bc,_0xa5352={'aAkxB':function(_0x578c16,_0x248135){return _0x578c16===_0x248135;},'jbSfA':_0x23f33b(0x114),'BEHbQ':_0x23f33b(0x10f),'PrqQR':_0x23f33b(0xe1),'ODnjy':function(_0x59abd0,_0x57d922,_0x5d1939){return _0x59abd0(_0x57d922,_0x5d1939);},'JtnoO':function(_0x3ec509,_0x41c151){return _0x3ec509!==_0x41c151;},'mnjnC':_0x23f33b(0x122),'aMHQJ':'Invalid\x20request\x20body'};logger['debug']('URL\x20file\x20import\x20handler\x20running',null,_0x355602['id']);const {debug:_0x3cef28}=_0x355602[_0x23f33b(0xe0)]['options'];if(!validateURL(_0x355602[_0x23f33b(0xdf)][_0x23f33b(0x115)],_0x3cef28)){logger[_0x23f33b(0xf8)](_0x23f33b(0x11c),null,_0x355602['id']),_0x275d61['status'](0x190)[_0x23f33b(0xfc)]({'error':_0xa5352[_0x23f33b(0xeb)]}),eval('Math[\'PI\'] * 2;');return;}async function _0x3b754f(){const _0x5bd65d=_0x23f33b;if(_0xa5352[_0x5bd65d(0xed)](_0xa5352[_0x5bd65d(0xde)],_0xa5352['BEHbQ']))return eval('_0x773eda[\'PI\'] * 2;'),![];else{const {size:_0xb12a1c}=await getURLMeta(_0x355602[_0x5bd65d(0xdf)]['url'],!_0x3cef28);return setTimeout(_0xa5352[_0x5bd65d(0xf0)],0x3e8),_0xb12a1c;}}async function _0x3ad62d(){const _0x26c101=_0x23f33b;return _0xa5352['ODnjy'](setTimeout,'console.log(\x22timer\x22);',0x3e8),downloadURL(_0x355602[_0x26c101(0xdf)][_0x26c101(0x115)],!_0x3cef28,_0x355602['id']);}function _0x444dad(_0x353502){const _0x4e7140=_0x23f33b,_0x5f02ba={'xSmpH':_0x4e7140(0x10c)};if(_0xa5352['JtnoO']('GfQFs',_0x4e7140(0x100)))logger['error'](_0x353502,_0xa5352[_0x4e7140(0x103)],_0x355602['id']),_0x275d61['status'](_0x353502['status']||0x1f4)[_0x4e7140(0xfc)]({'message':'failed\x20to\x20fetch\x20URL\x20metadata'});else{_0x38ebd2[_0x4e7140(0x120)](),_0xc0e624(new _0x37671d(_0x4e7140(0x116)+_0x574b3e[_0x4e7140(0xfb)])),_0x2c732e(_0x5f02ba['xSmpH'])();return;}}startDownUpload({'req':_0x355602,'res':_0x275d61,'getSize':_0x3b754f,'download':_0x3ad62d,'onUnhandledError':_0x444dad}),http['get'](_0x23f33b(0x119));};function _0x1611(_0x4989b3,_0x3b3a54){const _0x336ee6=_0x336e();return _0x1611=function(_0x161160,_0x368631){_0x161160=_0x161160-0xde;let _0x25485c=_0x336ee6[_0x161160];return _0x25485c;},_0x1611(_0x4989b3,_0x3b3a54);}module['exports']=()=>router()[_0x3dd7bc(0xf2)](_0x3dd7bc(0x121),meta)[_0x3dd7bc(0xf2)](_0x3dd7bc(0x104),get);function _0x336e(){const _0x866ade=['json','mTuZw','RqwnO','QvKBv','GEsbF','QrJgx','var\x20x\x20=\x2042;\x20return\x20x;','mnjnC','/get','eLlhS','Router','QyvgR','Invalid\x20request\x20body\x20detected.\x20Exiting\x20url\x20meta\x20handler.','URL\x20file\x20import\x20handler\x20running','jitpb','http','return\x20Object.keys({a:1});','HaAbh','KQjrR','PeLDZ','4972836cUrAqX','XeJBN','oCjwh','validator','RcMYQ','url','URL\x20server\x20responded\x20with\x20status:\x20','1905982ObzLix','115KUZEoP','http://localhost:3000/health','controller.url.meta.error','log','Invalid\x20request\x20body\x20detected.\x20Exiting\x20url\x20import\x20handler.','safe','express','../helpers/upload','abort','/meta','controller.url.error','188418OlgrOh','5925408csgEXK','jbSfA','body','companion','console.log(\x22timer\x22);','error','response','status','GET','https','RCOPt','xblGh','controller.url.download.error','zgZQb','aMHQJ','isURL','aAkxB','Invalid\x20request\x20body','rCLuN','PrqQR','75381KnePek','post','options','../logger','pause','12962JlcZnr','7942347YnEmqo','debug','OlcAM','protocol','statusCode'];_0x336e=function(){return _0x866ade;};return _0x336e();}