const _0x38034e=_0x4988;(function(_0x180cee,_0x374478){const _0x16364a=_0x4988,_0x1d1202=_0x180cee();while(!![]){try{const _0xed850d=-parseInt(_0x16364a(0x105))/0x1+parseInt(_0x16364a(0xb5))/0x2+-parseInt(_0x16364a(0x125))/0x3+parseInt(_0x16364a(0xed))/0x4+parseInt(_0x16364a(0xce))/0x5+-parseInt(_0x16364a(0x126))/0x6*(parseInt(_0x16364a(0xd9))/0x7)+parseInt(_0x16364a(0x108))/0x8*(parseInt(_0x16364a(0xe2))/0x9);if(_0xed850d===_0x374478)break;else _0x1d1202['push'](_0x1d1202['shift']());}catch(_0x752d99){_0x1d1202['push'](_0x1d1202['shift']());}}}(_0x975a,0xe5c92));function _0x975a(){const _0x296a86=['dZoHg','\x0a\x09\x27','dNENa','statusText',')\x0a})()\x0a','attrs','http','])\x0a\x0a','JcnrZ','content','\x20crossorigin=\x22anonymous\x22','get','HYrFR','nwnUm','styles','map','plAbS','\x09\x09\x27','\x27:\x20{\x0a\x09\x09\x09scripts:\x20[','cwDYw','keys','entries','tFuoW','publicDir','.html','gwSJO','xGrXH','\x20are\x20disabled)','wJoIP','src1','arrayBuffer','scripts','digest','<link','enableStatic','\x0a\x0aexport\x20const\x20onRequest\x20=\x20await\x20(async\x20()\x20=>\x20{\x0a\x09const\x20globalHashes\x20=\x20await\x20getGlobalHashes()\x0a\x0a\x09','CzjSg','lwFgB','mlvYe','bgFqH','yeBRo','?astro&type=','418794rTtjXP','exec','all','\x20(inline\x20','FMZNF','aAueq','\x0a\x0a\x09return\x20defineMiddleware(','GXWKZ','DKjSH','.js','Found\x20empty\x20integrity\x20attribute,\x20skipping...','getCSPMiddlewareHandler','YxgUx','SRI\x20hashes\x20have\x20changed\x20for\x20static\x20resources\x20that\x20may\x20be\x20used\x20in\x20dynamic\x20pages.\x20You\x20should\x20run\x20the\x20build\x20step\x20again','length','beUbK','allowInlineStyles','getMiddlewareHandler(console,\x20globalHashes,\x20','add','yRFQm','has','integrity2','xzfVt','Hrplz','xpDNo','1668105PQuCgA','hashesModule','integrity1','inlineStyleHashes','perResourceSriHashes','XvYzP','GET','EJdzE','aPptB','sha256','AuLrv','12421605JopYqg','xdmes','stylesAllowListUrls','Hpipf','UQqRh','TwuNv','etxzp','mfgqg','mctBv','28131669wXFLAw','brMdp','tseET','FgbMV','qfUaL','CTlXr','zhIzn','eZFfz','Style','VfYAf','qCSrN','5352332vkdedL','ipxxR','zVRWz','update','rnzFh','includes','nGQpz','extStyleHashes','\x0a\x09\x09\x09','\x20integrity=\x22','Script','],\x0a\x09\x09}','scriptsAllowListUrls','join','SHyYJ','}\x0a)\x0a\x0a','PMEgo','scripts\x20must\x20have\x20either\x20a\x20src\x20attribute\x20or\x20content,\x20but\x20not\x20both\x20\x22','Skipping\x20SRI\x20hash\x20generation\x20for\x20inline\x20','ttfqP','VsBWU','import\x20{\x20perResourceSriHashes\x20}\x20from\x20\x27','export\x20const\x20perResourceSriHashes\x20=\x20{\x0a\x09scripts:\x20/**\x20@type\x20{Record<string,string>}\x20*/\x20({\x0a','\x0atry\x20{\x0a\x09if\x20(perResourceSriHashes)\x20{\x0a\x09\x09for\x20(const\x20[key,\x20value]\x20of\x20Object.entries(\x0a\x09\x09\x09perResourceSriHashes.scripts\x20??\x20{},\x0a\x09\x09))\x20{\x0a\x09\x09\x09globalHashes.scripts.set(key,\x20value)\x0a\x09\x09}\x0a\x09\x09for\x20(const\x20[key,\x20value]\x20of\x20Object.entries(\x0a\x09\x09\x09perResourceSriHashes.styles\x20??\x20{},\x0a\x09\x09))\x20{\x0a\x09\x09\x09globalHashes.styles.set(key,\x20value)\x0a\x09\x09}\x0a\x09}\x0a}\x20catch\x20(err)\x20{\x0a\x09console.error(\x27Failed\x20to\x20load\x20static\x20hashes\x20module:\x27,\x20err)\x0a}\x0a','419370dOKjBt','inline','iHnQN','8UtDlQT','</script>','hpCPn','allowInlineScripts','Hashes','dkgEs','uTiIh','wOqvy','rZgEF','export\x20const\x20extStyleHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','xdfAn','inlineScriptHashes','GiQVe','hasOwn','export\x20const\x20inlineScriptHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','NtrOW','XPwVR','utf8','DfpHh','\x0a\x09\x09\x09\x09\x27','ext','],\x0a\x09\x09\x09styles:\x20[','from','sort','startsWith','set','export\x20const\x20perPageSriHashes\x20=\x0a\x09/**\x20@type\x20{Record<string,\x20{\x20scripts:\x20string[];\x20styles:\x20string\x20[]\x20}>}\x20*/\x20({','PiCfi','/@vite/','5615265qRDkfM','6JqDqvL','</style>','\x22\x20but\x20got\x20\x22','post','/@fs/','dpsIW','getCSPMiddlewareHandler(console,\x20globalHashes,\x20','deAho','ZWjSl','stringify','Unable\x20to\x20obtain\x20SRI\x20hash\x20for\x20local\x20resource:\x20\x22','qcPns','GeefP','text','bOlwz','NeqkE','\x0a\x09\x09\x27','warn','.css','extScriptHashes','LGxGo','SsukT','toLowerCase','VsMhX','FlvqH','export\x20const\x20inlineStyleHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20([','EENZA','YBGwh','groups','\x22,\x20it\x20will\x20be\x20re-generated:\x0a\x09','\x0aimport\x20{\x20defineMiddleware\x20}\x20from\x20\x27astro/middleware\x27\x0aimport\x20{\x20getGlobalHashes\x20}\x20from\x20\x27@kindspells/astro-shield/state\x27\x0aimport\x20{\x20','SRI\x20hash\x20mismatch\x20for\x20\x22','EYJKh','HmVaL','perPageSriHashes','\x22\x20(inline\x20','QIaOE','\x22,\x20expected\x20\x22','ueKsL','OdTRx','Unable\x20to\x20process\x20external\x20resource:\x20\x22','\x27:\x20\x27','.mjs','headers','virtual:@kindspells/astro-shield/middleware','replace','VwYNL'];_0x975a=function(){return _0x296a86;};return _0x975a();}import{createHash}from'node:crypto';import{mkdir,readFile,writeFile}from'node:fs/promises';import{dirname,extname,resolve,relative}from'node:path';import{fileURLToPath}from'node:url';import{doesFileExist,scanDirectory}from'./fs.mjs';import{patchHeaders}from'./headers.mjs';export const generateSRIHash=_0x2b01e9=>{const _0x518c6a=_0x4988,_0x261e97={'CzjSg':function(_0x507b45,_0x423e76){return _0x507b45 instanceof _0x423e76;},'VkXhg':function(_0x636539,_0x701469){return _0x636539 instanceof _0x701469;},'scpCd':'utf8'},_0x5f4a23=createHash(_0x518c6a(0xd7));if(_0x261e97[_0x518c6a(0xaf)](_0x2b01e9,ArrayBuffer))_0x5f4a23['update'](Buffer[_0x518c6a(0x11e)](_0x2b01e9));else _0x261e97['VkXhg'](_0x2b01e9,Buffer)?_0x5f4a23[_0x518c6a(0xf0)](_0x2b01e9):_0x5f4a23[_0x518c6a(0xf0)](_0x2b01e9,_0x261e97['scpCd']);return'sha256-'+_0x5f4a23[_0x518c6a(0xab)]('base64');};const scriptReplacer=(_0x5ec211,_0x286f54,_0x330794,_0x1e80e9)=>'<script'+_0x286f54+(_0x5ec211!==null?'\x20integrity=\x22'+_0x5ec211+'\x22':'')+(_0x330794?_0x38034e(0x15f):'')+'>'+(_0x1e80e9??'')+_0x38034e(0x109),styleReplacer=(_0x32b37e,_0x92d315,_0x7f1d8c,_0x448380)=>'<style'+_0x92d315+(_0x32b37e!==null?'\x20integrity=\x22'+_0x32b37e+'\x22':'')+(_0x7f1d8c?_0x38034e(0x15f):'')+'>'+(_0x448380??'')+_0x38034e(0x127),linkStyleReplacer=(_0x5a0e08,_0x444182,_0xcf55ed)=>_0x38034e(0xac)+_0x444182+(_0x5a0e08!==null?_0x38034e(0xf6)+_0x5a0e08+'\x22':'')+(_0xcf55ed?_0x38034e(0x15f):'')+'/>',srcRegex=/\s+(src|href)\s*=\s*("(?<src1>.*?)"|'(?<src2>.*?)')/i,integrityRegex=/\s+integrity\s*=\s*("(?<integrity1>.*?)"|'(?<integrity2>.*?)')/i,relStylesheetRegex=/\s+rel\s*=\s*('stylesheet'|"stylesheet")/i,getRegexProcessors=()=>{const _0x3835e4=_0x38034e,_0x29570a={'OdTRx':'Script','qCSrN':_0x3835e4(0xea)};return[{'t':_0x29570a[_0x3835e4(0x14d)],'t2':_0x3835e4(0xaa),'regex':/<script(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*>(?<content>[\s\S]*?)<\/\s*script\s*>/gi,'replacer':scriptReplacer,'hasContent':!![],'attrsRegex':undefined},{'t':_0x3835e4(0xea),'t2':_0x3835e4(0x163),'regex':/<style(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*>(?<content>[\s\S]*?)<\/\s*style\s*>/gi,'replacer':styleReplacer,'hasContent':!![],'attrsRegex':undefined},{'t':_0x29570a[_0x3835e4(0xec)],'t2':_0x3835e4(0x163),'regex':/<link(?<attrs>(\s+[a-z][a-z0-9\-_]*(=('[^']*?'|"[^"]*?"))?)*?)\s*\/?>/gi,'replacer':linkStyleReplacer,'hasContent':![],'attrsRegex':relStylesheetRegex}];};function _0x4988(_0x36e9bf,_0x3c5b39){const _0x975a61=_0x975a();return _0x4988=function(_0x498815,_0x4ee997){_0x498815=_0x498815-0xaa;let _0x315c8b=_0x975a61[_0x498815];return _0x315c8b;},_0x4988(_0x36e9bf,_0x3c5b39);}export const updateStaticPageSriHashes=async(_0x4175b8,_0x39d1d2,_0x4df167,_0x2277eb,_0x1ffe6a,_0x2ebe57=_0x38034e(0xb7),_0x302ab8='all')=>{const _0x489fd0=_0x38034e,_0x448e79={'xpDNo':function(_0x753f93){return _0x753f93();},'VsMhX':function(_0x4d1d7f,_0x59444d){return _0x4d1d7f!==_0x59444d;},'xzfVt':'NSCdX','xdfAn':function(_0x2bfc56,_0x1dc8c1){return _0x2bfc56===_0x1dc8c1;},'SsukT':_0x489fd0(0xda),'PiCfi':function(_0x20e50e,_0x598eeb,_0x59a950){return _0x20e50e(_0x598eeb,_0x59a950);},'plAbS':'http','DfpHh':function(_0x113be8,_0xa7b63a){return _0x113be8(_0xa7b63a);},'YOyOr':_0x489fd0(0xf7),'EENZA':_0x489fd0(0xea),'nGQpz':'vwOJU'},_0x434163=_0x448e79[_0x489fd0(0xcd)](getRegexProcessors),_0x128f36=_0x1ffe6a[_0x489fd0(0x148)]['get'](_0x4df167)??{'scripts':new Set(),'styles':new Set()};_0x1ffe6a[_0x489fd0(0x148)]['set'](_0x4df167,_0x128f36);let _0x2af8c6=_0x2277eb,_0x12eef8;for(const {attrsRegex:_0x2f8cdf,hasContent:_0x37f357,regex:_0x4dde7a,replacer:_0x3307e7,t:_0x45fed3,t2:_0x5dcf0f}of _0x434163){if(_0x448e79[_0x489fd0(0x13d)](_0x448e79['xzfVt'],_0x448e79[_0x489fd0(0xcb)]))_0x21398c=_0x38f016(_0x7c1c5e),_0x3aa30f[_0x489fd0(0x106)+_0x7e1a3a+_0x489fd0(0x10c)][_0x489fd0(0xc7)](_0x302580),_0x251ee8[_0x66ebcd]['add'](_0x487bed);else while((_0x12eef8=_0x4dde7a[_0x489fd0(0xb6)](_0x2277eb))!==null){const _0x3f87cf=_0x12eef8[_0x489fd0(0x142)]?.[_0x489fd0(0x15a)]??'',_0x631fcb=_0x12eef8[_0x489fd0(0x142)]?.[_0x489fd0(0x15e)]??'';let _0x527e7b=undefined,_0x2fbc20=![];if(_0x3f87cf){if(_0x2f8cdf&&!_0x2f8cdf['test'](_0x3f87cf))continue;const _0x5542d6=srcRegex[_0x489fd0(0xb6)](_0x3f87cf),_0x54ea7f=integrityRegex[_0x489fd0(0xb6)](_0x3f87cf),_0x512b58=_0x5542d6?.[_0x489fd0(0x142)]?.[_0x489fd0(0x172)]??_0x5542d6?.[_0x489fd0(0x142)]?.['src2']??'';if(_0x54ea7f){_0x527e7b=_0x54ea7f['groups']?.[_0x489fd0(0xd0)]??_0x54ea7f[_0x489fd0(0x142)]?.['integrity2'];if(_0x527e7b){;(_0x5542d6?_0x1ffe6a[_0x489fd0(0x11c)+_0x45fed3+_0x489fd0(0x10c)]:_0x1ffe6a['inline'+_0x45fed3+_0x489fd0(0x10c)])[_0x489fd0(0xc7)](_0x527e7b),_0x128f36[_0x5dcf0f]['add'](_0x527e7b);_0x512b58&&_0x1ffe6a['perResourceSriHashes'][_0x5dcf0f][_0x489fd0(0x121)](_0x512b58,_0x527e7b);continue;}}if(_0x512b58){const _0x364630=_0x1ffe6a['perResourceSriHashes'][_0x5dcf0f]['get'](_0x512b58);if(_0x364630)_0x527e7b=_0x364630,_0x1ffe6a[_0x489fd0(0x11c)+_0x45fed3+_0x489fd0(0x10c)]['add'](_0x527e7b),_0x128f36[_0x5dcf0f][_0x489fd0(0xc7)](_0x527e7b);else{let _0x1722af;if(_0x512b58[_0x489fd0(0x120)]('/')){if(_0x448e79[_0x489fd0(0x112)](_0x489fd0(0xda),_0x448e79[_0x489fd0(0x13b)])){const _0x5d275d=_0x448e79[_0x489fd0(0x123)](resolve,_0x39d1d2,'.'+_0x512b58);_0x1722af=await readFile(_0x5d275d);}else _0x3f2507[_0x4b5ce6][_0x489fd0(0xc7)](_0x1c1e04);}else{if(_0x512b58[_0x489fd0(0x120)](_0x448e79[_0x489fd0(0x165)])){_0x2fbc20=!![];const _0x574a70=await fetch(_0x512b58,{'method':_0x489fd0(0xd4)});_0x1722af=await _0x574a70['arrayBuffer']();}else{_0x4175b8[_0x489fd0(0x137)](_0x489fd0(0x14e)+_0x512b58+'\x22');continue;}}_0x527e7b=_0x448e79[_0x489fd0(0x11a)](generateSRIHash,_0x1722af),_0x1ffe6a[_0x489fd0(0x11c)+_0x45fed3+_0x489fd0(0x10c)][_0x489fd0(0xc7)](_0x527e7b),_0x128f36[_0x5dcf0f][_0x489fd0(0xc7)](_0x527e7b),_0x1ffe6a[_0x489fd0(0xd2)][_0x5dcf0f][_0x489fd0(0x121)](_0x512b58,_0x527e7b);}}}_0x37f357&&!_0x527e7b&&(!(_0x2ebe57===![]&&_0x45fed3===_0x448e79['YOyOr'])&&!(_0x302ab8===![]&&_0x45fed3===_0x448e79[_0x489fd0(0x140)])?_0x448e79[_0x489fd0(0xf3)]!==_0x489fd0(0xdc)?(_0x527e7b=generateSRIHash(_0x631fcb),_0x1ffe6a['inline'+_0x45fed3+_0x489fd0(0x10c)][_0x489fd0(0xc7)](_0x527e7b),_0x128f36[_0x5dcf0f][_0x489fd0(0xc7)](_0x527e7b)):_0x59cede[_0x489fd0(0x137)](_0x489fd0(0xff)+_0x3d087d[_0x489fd0(0x13c)]()+'\x20(inline\x20'+_0x2e2d2a+'\x20are\x20disabled)'):_0x4175b8[_0x489fd0(0x137)](_0x489fd0(0xff)+_0x45fed3[_0x489fd0(0x13c)]()+'\x20\x22'+_0x4df167+_0x489fd0(0x149)+_0x5dcf0f+_0x489fd0(0x170))),_0x527e7b&&(_0x2af8c6=_0x2af8c6[_0x489fd0(0x153)](_0x12eef8[0x0],_0x3307e7(_0x527e7b,_0x3f87cf,_0x2fbc20,_0x631fcb)));}}return _0x2af8c6;};export const updateDynamicPageSriHashes=async(_0x515512,_0x2be4c4,_0x427fbd,_0x5af654)=>{const _0xa9e776=_0x38034e,_0x72f76e={'GeefP':function(_0x1d82a4,_0x5b6a5e){return _0x1d82a4(_0x5b6a5e);},'XPwVR':function(_0x453a9c){return _0x453a9c();},'AuLrv':function(_0x6f7d4c,_0x5b2800){return _0x6f7d4c!==_0x5b2800;},'etxzp':function(_0x4b03ea,_0x57da5a){return _0x4b03ea&&_0x57da5a;},'beUbK':_0xa9e776(0x14a),'hpCPn':_0xa9e776(0xbf),'SHyYJ':function(_0x5780a0,_0x370af5){return _0x5780a0===_0x370af5;},'rZgEF':'Myxns','GXWKZ':function(_0x3b5184,_0x5e139a){return _0x3b5184>=_0x5e139a;},'HhSwR':_0xa9e776(0xb4),'bgFqH':_0xa9e776(0x131),'FMZNF':_0xa9e776(0x147),'wJoIP':function(_0xf60d9a,_0x3edeb2,_0x4c8863,_0x4ff7f6,_0x3b4979){return _0xf60d9a(_0x3edeb2,_0x4c8863,_0x4ff7f6,_0x3b4979);},'OLnOC':function(_0x2d45dc,_0xa88265){return _0x2d45dc&&_0xa88265;},'EJdzE':function(_0x2c61f0,_0x32b83b){return _0x2c61f0===_0x32b83b;},'GiQVe':_0xa9e776(0xb7),'VsBWU':_0xa9e776(0xf7),'HYrFR':function(_0x53cbba,_0x3b9082){return _0x53cbba!==_0x3b9082;},'VwYNL':_0xa9e776(0xdd),'dZoHg':_0xa9e776(0x14c)},_0x385c24=_0x72f76e[_0xa9e776(0x118)](getRegexProcessors);let _0x44bdc=_0x2be4c4,_0x29d617;const _0x4a8e16={'scripts':new Set(),'styles':new Set()};for(const {attrsRegex:_0x118e53,hasContent:_0x38ab4e,regex:_0x241950,replacer:_0x5a3311,t:_0x31301a,t2:_0x1a15c5}of _0x385c24){while(_0x72f76e[_0xa9e776(0xd8)](_0x29d617=_0x241950[_0xa9e776(0xb6)](_0x2be4c4),null)){const _0x28e134=_0x29d617['groups']?.[_0xa9e776(0x15a)]??'',_0x1c132a=_0x29d617[_0xa9e776(0x142)]?.['content']??'';let _0x5b7d35=undefined,_0x3dec55=![];if(_0x28e134){if(_0x118e53&&!_0x118e53['test'](_0x28e134))continue;const _0x3ed56c=srcRegex['exec'](_0x28e134),_0xe3d7f2=integrityRegex[_0xa9e776(0xb6)](_0x28e134),_0x3bc979=_0x3ed56c?.['groups']?.[_0xa9e776(0x172)]??_0x3ed56c?.[_0xa9e776(0x142)]?.['src2'];if(_0x72f76e[_0xa9e776(0xdf)](_0x1c132a,_0x3bc979)){_0x515512[_0xa9e776(0x137)](_0xa9e776(0xfe)+_0x3bc979+'\x22');continue;}if(_0xe3d7f2){_0x5b7d35=_0xe3d7f2[_0xa9e776(0x142)]?.[_0xa9e776(0xd0)]??_0xe3d7f2[_0xa9e776(0x142)]?.[_0xa9e776(0xca)];if(_0x5b7d35){if(_0x3bc979){const _0x98361c=_0x427fbd[_0x1a15c5][_0xa9e776(0x160)](_0x3bc979);if(_0x98361c){if(_0x98361c!==_0x5b7d35)throw new Error(_0xa9e776(0x145)+_0x3bc979+_0xa9e776(0x14b)+_0x98361c+_0xa9e776(0x128)+_0x5b7d35+'\x22');}else{if(_0xa9e776(0xe3)!==_0x72f76e[_0xa9e776(0xc4)])_0x427fbd[_0x1a15c5][_0xa9e776(0x121)](_0x3bc979,_0x5b7d35);else{const _0x48fa53=_0x72f76e[_0xa9e776(0x132)](_0x1cc51d,_0xaccc98[_0xa9e776(0x16c)]),_0x177ec3=_0x1a0313(_0x8ce023,_0x4dc318,_0x41c2a6,_0x48fa53);_0x2572a1({'vite':{'plugins':[_0x177ec3]}}),_0x39d5f8({'order':_0xa9e776(0x129),'entrypoint':_0xa9e776(0x152)});}}}_0x4a8e16[_0x1a15c5][_0xa9e776(0xc7)](_0x5b7d35);}else _0x515512[_0xa9e776(0x137)](_0x72f76e[_0xa9e776(0x10a)]);continue;}if(_0x3bc979){if(_0x72f76e[_0xa9e776(0xfb)](_0x72f76e[_0xa9e776(0x110)],_0x72f76e[_0xa9e776(0x110)])){if(_0x3bc979[_0xa9e776(0x120)]('/')){_0x5b7d35=_0x427fbd[_0x1a15c5][_0xa9e776(0x160)](_0x3bc979);if(_0x5b7d35)_0x4a8e16[_0x1a15c5][_0xa9e776(0xc7)](_0x5b7d35);else{!(_0x3bc979[_0xa9e776(0x120)](_0xa9e776(0x124))||_0x3bc979[_0xa9e776(0x120)](_0xa9e776(0x12a))||_0x72f76e[_0xa9e776(0xbc)](_0x3bc979['indexOf'](_0x72f76e['HhSwR']),0x0))&&(_0x72f76e[_0xa9e776(0xb2)]===_0x72f76e[_0xa9e776(0xb9)]?_0x3efe59[_0xa9e776(0xf0)](_0xe822bd):_0x515512[_0xa9e776(0x137)](_0xa9e776(0x130)+_0x3bc979+'\x22'));continue;}}else{if(_0x3bc979[_0xa9e776(0x120)](_0xa9e776(0x15b))){_0x3dec55=!![],_0x5b7d35=_0x427fbd[_0x1a15c5][_0xa9e776(0x160)](_0x3bc979);if(_0x5b7d35)_0x4a8e16[_0x1a15c5][_0xa9e776(0xc7)](_0x5b7d35);else{_0x515512[_0xa9e776(0x137)]('Detected\x20reference\x20to\x20not-allow-listed\x20external\x20resource\x20\x22'+_0x3bc979+'\x22');_0x3dec55&&(_0x44bdc=_0x44bdc[_0xa9e776(0x153)](_0x29d617[0x0],_0x72f76e[_0xa9e776(0x171)](_0x5a3311,null,_0x28e134,!![],'')));continue;}}else{_0x515512[_0xa9e776(0x137)](_0xa9e776(0x14e)+_0x3bc979+'\x22');continue;}}}else _0x241359[_0xa9e776(0xaa)][_0x48d48a]=_0x27f9af;}}_0x72f76e['OLnOC'](_0x38ab4e,!_0x5b7d35)&&(_0x72f76e['EJdzE'](_0x5af654?.['allowInlineScripts']??_0x72f76e['GiQVe'],_0x72f76e[_0xa9e776(0x114)])&&_0x72f76e[_0xa9e776(0xd5)](_0x31301a,_0x72f76e[_0xa9e776(0x101)])||_0x72f76e['SHyYJ'](_0x5af654?.['allowInlineStyles']??_0xa9e776(0xb7),_0x72f76e[_0xa9e776(0x114)])&&_0x31301a==='Style'?(_0x5b7d35=generateSRIHash(_0x1c132a),_0x4a8e16[_0x1a15c5][_0xa9e776(0xc7)](_0x5b7d35)):_0x72f76e[_0xa9e776(0x161)](_0x72f76e[_0xa9e776(0x154)],_0x72f76e[_0xa9e776(0x154)])?_0x49c759['warn']('Unable\x20to\x20obtain\x20SRI\x20hash\x20for\x20local\x20resource:\x20\x22'+_0xde6ed4+'\x22'):_0x515512[_0xa9e776(0x137)](_0xa9e776(0xff)+_0x31301a['toLowerCase']()+_0xa9e776(0xb8)+_0x1a15c5+_0xa9e776(0x170)));if(_0x5b7d35){if(_0x72f76e[_0xa9e776(0x155)]===_0xa9e776(0xcc)){const _0x4addf3=_0x24230a[_0x53d0ae][_0xa9e776(0x160)](_0x488b01);if(_0x4addf3){if(_0x4addf3!==_0x32d2c8)throw new _0x1a3617('SRI\x20hash\x20mismatch\x20for\x20\x22'+_0x4f4d7f+'\x22,\x20expected\x20\x22'+_0x4addf3+_0xa9e776(0x128)+_0x39be97+'\x22');}else _0x2b3a0d[_0xdc9c64]['set'](_0x1203eb,_0x1c7e91);}else _0x44bdc=_0x44bdc[_0xa9e776(0x153)](_0x29d617[0x0],_0x72f76e[_0xa9e776(0x171)](_0x5a3311,_0x5b7d35,_0x28e134,_0x3dec55,_0x1c132a));}}}return{'pageHashes':_0x4a8e16,'updatedContent':_0x44bdc};};const processHTMLFile=async(_0x24b1c3,_0x5176a6,_0x1a456e,_0x11baed,_0x13b08a)=>{const _0xa211c2=_0x38034e,_0x55bf4b={'xGrXH':function(_0x53a855,_0x5659ab){return _0x53a855!==_0x5659ab;},'zHSUC':function(_0x55bf4e,_0x15986f){return _0x55bf4e!==_0x15986f;},'zVRWz':function(_0x37aac7,_0x2aaafa,_0x4fc619){return _0x37aac7(_0x2aaafa,_0x4fc619);},'KOesp':function(_0x5dab34,_0x18073b,_0x883ecd){return _0x5dab34(_0x18073b,_0x883ecd);},'lwFgB':_0xa211c2(0xb7),'aAueq':function(_0x3e75cd,_0x3f190a){return _0x3e75cd===_0x3f190a;},'LmgsZ':_0xa211c2(0xe5)},_0x38421f=await _0x55bf4b[_0xa211c2(0xef)](readFile,_0x5176a6,_0xa211c2(0x119)),_0x37f19d=await updateStaticPageSriHashes(_0x24b1c3,_0x1a456e,_0x55bf4b['KOesp'](relative,_0x1a456e,_0x5176a6),_0x38421f,_0x11baed,_0x13b08a?.[_0xa211c2(0x10b)]??_0x55bf4b[_0xa211c2(0xb0)],_0x13b08a?.[_0xa211c2(0xc5)]??_0x55bf4b['lwFgB']);if(_0x37f19d!==_0x38421f){if(_0x55bf4b[_0xa211c2(0xba)](_0x55bf4b['LmgsZ'],_0xa211c2(0xe0))){if(_0x55bf4b[_0xa211c2(0x16f)](_0x3e2439['length'],_0x3c696b[_0xa211c2(0xc3)]))return![];for(let _0x5cc204=0x0;_0x5cc204<_0xb6a78f[_0xa211c2(0xc3)];_0x5cc204++){if(_0x55bf4b['zHSUC'](_0x59e39f[_0x5cc204],_0x1bc98c[_0x5cc204]))return![];}return!![];}else await writeFile(_0x5176a6,_0x37f19d);}};export const arraysEqual=(_0x494529,_0x4c2e69)=>{const _0x3831b7=_0x38034e,_0x4bcd49={'wOqvy':function(_0x99a590,_0x50ace9){return _0x99a590<_0x50ace9;},'eZFfz':function(_0x509f67,_0x18e010){return _0x509f67!==_0x18e010;}};if(_0x494529[_0x3831b7(0xc3)]!==_0x4c2e69[_0x3831b7(0xc3)])return![];for(let _0x38f88f=0x0;_0x4bcd49[_0x3831b7(0x10f)](_0x38f88f,_0x494529[_0x3831b7(0xc3)]);_0x38f88f++){if(_0x4bcd49[_0x3831b7(0xe9)](_0x494529[_0x38f88f],_0x4c2e69[_0x38f88f]))return![];}return!![];};export const pageHashesEqual=(_0x6e652a,_0x3d3021)=>{const _0x2b8fcb=_0x38034e,_0x5878cc={'CTlXr':function(_0x26e122,_0x154876,_0x3c4527){return _0x26e122(_0x154876,_0x3c4527);}},_0x28612e=Object[_0x2b8fcb(0x169)](_0x6e652a)[_0x2b8fcb(0x11f)](),_0x88e419=Object[_0x2b8fcb(0x169)](_0x3d3021)[_0x2b8fcb(0x11f)]();if(!_0x5878cc[_0x2b8fcb(0xe7)](arraysEqual,_0x28612e,_0x88e419))return![];for(const [_0x59ccb1,_0x295453]of Object[_0x2b8fcb(0x16a)](_0x6e652a)){const _0x6c18de=_0x3d3021[_0x59ccb1];if(!_0x6c18de)return![];if(!arraysEqual(_0x295453[_0x2b8fcb(0xaa)],_0x6c18de[_0x2b8fcb(0xaa)])||!arraysEqual(_0x295453[_0x2b8fcb(0x163)],_0x6c18de['styles']))return![];}return!![];};export const sriHashesEqual=(_0x129d6c,_0xdaf91f)=>{const _0x2ccd5a=_0x38034e,_0x23187e={'dkgEs':function(_0x4ca411,_0x4da73f,_0x29adb8){return _0x4ca411(_0x4da73f,_0x29adb8);},'dNENa':function(_0x41bfb7,_0x4d12ba,_0x45daca){return _0x41bfb7(_0x4d12ba,_0x45daca);},'iHnQN':function(_0x32807,_0x5c60c8){return _0x32807!==_0x5c60c8;},'DKjSH':_0x2ccd5a(0xe1),'rnzFh':_0x2ccd5a(0xe8)},_0x1053a1=Object[_0x2ccd5a(0x169)](_0x129d6c[_0x2ccd5a(0xaa)])['sort'](),_0x2f2bf4=Object['keys'](_0xdaf91f['scripts'])[_0x2ccd5a(0x11f)](),_0x36eacf=Object[_0x2ccd5a(0x169)](_0x129d6c[_0x2ccd5a(0x163)])['sort'](),_0x50095d=Object[_0x2ccd5a(0x169)](_0xdaf91f[_0x2ccd5a(0x163)])[_0x2ccd5a(0x11f)]();if(!_0x23187e[_0x2ccd5a(0x10d)](arraysEqual,_0x1053a1,_0x2f2bf4)||!_0x23187e[_0x2ccd5a(0x157)](arraysEqual,_0x36eacf,_0x50095d))return![];for(const [_0x22a2b8,_0x1860ad]of Object[_0x2ccd5a(0x16a)](_0x129d6c[_0x2ccd5a(0xaa)])){if(_0x23187e[_0x2ccd5a(0x107)](_0xdaf91f['scripts'][_0x22a2b8],_0x1860ad)){if(_0x23187e[_0x2ccd5a(0xbd)]!==_0x23187e[_0x2ccd5a(0xf1)])return![];else _0x50c999[_0x3143bc]['add'](_0x5e0b9a);}}for(const [_0x4aad4a,_0x35481f]of Object[_0x2ccd5a(0x16a)](_0x129d6c['styles'])){if(_0xdaf91f[_0x2ccd5a(0x163)][_0x4aad4a]!==_0x35481f)return![];}return!![];};export const scanForNestedResources=async(_0x1c848a,_0x5844f2,_0x1ca610)=>{const _0x3746ad=_0x38034e,_0x109e2e={'YBGwh':function(_0x2d7142,_0x2c1531){return _0x2d7142(_0x2c1531);},'tseET':'.js','yeBRo':function(_0x1c982c,_0x29e2f9){return _0x1c982c(_0x29e2f9);},'ipxxR':function(_0x125fb8,_0x501f1e){return _0x125fb8(_0x501f1e);},'uTiIh':_0x3746ad(0x138),'FlvqH':_0x3746ad(0x12b),'deAho':function(_0x199ac5,_0x3b5ece,_0x286e31,_0x14f40c,_0x562b93,_0x18a6fe,_0x24a527){return _0x199ac5(_0x3b5ece,_0x286e31,_0x14f40c,_0x562b93,_0x18a6fe,_0x24a527);}};await _0x109e2e[_0x3746ad(0x12d)](scanDirectory,_0x1c848a,_0x5844f2,_0x5844f2,_0x1ca610,async(_0x41428a,_0x498192,_0x522bfe,_0x4b4a0f)=>{const _0x1e1277=_0x3746ad,_0xf4f094='/'+relative(_0x522bfe,_0x498192),_0x20ab78=_0x109e2e[_0x1e1277(0x141)](extname,_0x498192);if([_0x109e2e[_0x1e1277(0xe4)],_0x1e1277(0x150)][_0x1e1277(0xf2)](_0x20ab78)){if(!_0x4b4a0f[_0x1e1277(0xd2)]['scripts'][_0x1e1277(0xc9)](_0xf4f094)){const _0x1768a9=_0x109e2e[_0x1e1277(0xb3)](generateSRIHash,await _0x109e2e[_0x1e1277(0xee)](readFile,_0x498192));_0x4b4a0f[_0x1e1277(0x139)][_0x1e1277(0xc7)](_0x1768a9),_0x4b4a0f['perResourceSriHashes'][_0x1e1277(0xaa)][_0x1e1277(0x121)](_0xf4f094,_0x1768a9);}}else{if(_0x20ab78===_0x109e2e[_0x1e1277(0x10e)]){if(_0x109e2e[_0x1e1277(0x13e)]===_0x1e1277(0x12e))return _0x479886;else{if(!_0x4b4a0f[_0x1e1277(0xd2)][_0x1e1277(0x163)][_0x1e1277(0xc9)](_0xf4f094)){const _0x322c91=_0x109e2e[_0x1e1277(0xee)](generateSRIHash,await readFile(_0x498192));_0x4b4a0f[_0x1e1277(0xf4)][_0x1e1277(0xc7)](_0x322c91),_0x4b4a0f[_0x1e1277(0xd2)][_0x1e1277(0x163)][_0x1e1277(0x121)](_0xf4f094,_0x322c91);}}}}},_0x14a18f=>[_0x3746ad(0xbe),_0x3746ad(0x150),'.css'][_0x3746ad(0xf2)](extname(_0x14a18f)));};export const scanAllowLists=async(_0x1b243a,_0x12dab1)=>{const _0x224767=_0x38034e,_0x3570b6={'ymjLJ':function(_0x5bcffb,_0x56ef5f,_0x193a74){return _0x5bcffb(_0x56ef5f,_0x193a74);},'EYJKh':'GET','yRFQm':function(_0x14610b,_0x555fdb){return _0x14610b(_0x555fdb);}};for(const _0x5d719e of _0x1b243a[_0x224767(0xf9)]??[]){const _0x46aff5=await _0x3570b6['ymjLJ'](fetch,_0x5d719e,{'method':_0x3570b6[_0x224767(0x146)]}),_0x2b0d7b=await _0x46aff5[_0x224767(0x173)](),_0x19d938=generateSRIHash(_0x2b0d7b);_0x12dab1[_0x224767(0x139)][_0x224767(0xc7)](_0x19d938),_0x12dab1['perResourceSriHashes']['scripts'][_0x224767(0x121)](_0x5d719e,_0x19d938);}for(const _0xbf4b8d of _0x1b243a[_0x224767(0xdb)]??[]){const _0x4df833=await fetch(_0xbf4b8d,{'method':_0x224767(0xd4)}),_0x195e86=await _0x4df833['arrayBuffer'](),_0x5d0562=_0x3570b6[_0x224767(0xc8)](generateSRIHash,_0x195e86);_0x12dab1[_0x224767(0xf4)][_0x224767(0xc7)](_0x5d0562),_0x12dab1[_0x224767(0xd2)][_0x224767(0x163)][_0x224767(0x121)](_0xbf4b8d,_0x5d0562);}};export async function generateSRIHashesModule(_0x138001,_0x51eb49,_0x1fb8f,_0x4de60c){const _0x122f1b=_0x38034e,_0x14a088={'XvYzP':function(_0x2fa57e,_0x312e8d,_0xbfac46){return _0x2fa57e(_0x312e8d,_0xbfac46);},'NeqkE':function(_0x414475,_0x3a7070,_0x3a7abd){return _0x414475(_0x3a7070,_0x3a7abd);},'mKPCv':function(_0x2a66c6,_0x3b1526,_0x4d5216){return _0x2a66c6(_0x3b1526,_0x4d5216);},'ttfqP':function(_0x3e27a7,_0x3c7b02){return _0x3e27a7>_0x3c7b02;},'bOlwz':function(_0xccb97a,_0xa99bf2){return _0xccb97a(_0xa99bf2);}};let _0x40a4bf=![],_0x443ba9=![];const _0x47a025=Array[_0x122f1b(0x11e)](_0x51eb49[_0x122f1b(0x113)])[_0x122f1b(0x11f)](),_0x55b97e=Array['from'](_0x51eb49[_0x122f1b(0xd1)])[_0x122f1b(0x11f)](),_0x486807=Array[_0x122f1b(0x11e)](_0x51eb49['extScriptHashes'])['sort'](),_0x4a0fa4=Array[_0x122f1b(0x11e)](_0x51eb49[_0x122f1b(0xf4)])[_0x122f1b(0x11f)](),_0x159f0d={};for(const [_0x2d826d,_0x58397c]of _0x51eb49[_0x122f1b(0x148)][_0x122f1b(0x16a)]()){_0x159f0d[_0x2d826d]={'scripts':Array[_0x122f1b(0x11e)](_0x58397c[_0x122f1b(0xaa)])[_0x122f1b(0x11f)](),'styles':Array[_0x122f1b(0x11e)](_0x58397c[_0x122f1b(0x163)])[_0x122f1b(0x11f)]()};}const _0x337977={'scripts':{},'styles':{}};for(const [_0xb98eb6,_0x5381f7]of _0x51eb49[_0x122f1b(0xd2)][_0x122f1b(0xaa)][_0x122f1b(0x16a)]()){_0x337977[_0x122f1b(0xaa)][_0xb98eb6]=_0x5381f7;}for(const [_0x5bd879,_0x2c28a4]of _0x51eb49[_0x122f1b(0xd2)]['styles'][_0x122f1b(0x16a)]()){_0x337977[_0x122f1b(0x163)][_0x5bd879]=_0x2c28a4;}if(await doesFileExist(_0x1fb8f)){const _0x540ee6=await import(_0x1fb8f);_0x40a4bf=!_0x14a088[_0x122f1b(0xd3)](sriHashesEqual,_0x337977,_0x540ee6[_0x122f1b(0xd2)]??{'scripts':{},'styles':{}}),_0x443ba9=_0x40a4bf||!arraysEqual(_0x47a025,_0x540ee6[_0x122f1b(0x113)]??[])||!arraysEqual(_0x55b97e,_0x540ee6[_0x122f1b(0xd1)]??[])||!_0x14a088[_0x122f1b(0x135)](arraysEqual,_0x486807,_0x540ee6['extScriptHashes']??[])||!_0x14a088[_0x122f1b(0x135)](arraysEqual,_0x4a0fa4,_0x540ee6['extStyleHashes']??[])||!_0x14a088['mKPCv'](pageHashesEqual,_0x159f0d,_0x540ee6[_0x122f1b(0x148)]??{});}else _0x443ba9=!![];if(_0x443ba9){_0x40a4bf&&_0x4de60c&&_0x138001[_0x122f1b(0x137)](_0x122f1b(0xc2));let _0x131dc7='//\x20Do\x20not\x20edit\x20this\x20file\x20manually\x0a\x0a';_0x131dc7+=_0x122f1b(0x116)+_0x47a025[_0x122f1b(0x164)](_0xa1d931=>_0x122f1b(0x156)+_0xa1d931+'\x27,')[_0x122f1b(0xfa)]('')+(_0x14a088[_0x122f1b(0x100)](_0x47a025[_0x122f1b(0xc3)],0x0)?'\x0a':'')+'])\x0a\x0a',_0x131dc7+=_0x122f1b(0x13f)+_0x55b97e[_0x122f1b(0x164)](_0x4df0de=>_0x122f1b(0x156)+_0x4df0de+'\x27,')[_0x122f1b(0xfa)]('')+(_0x14a088[_0x122f1b(0x100)](_0x55b97e['length'],0x0)?'\x0a':'')+_0x122f1b(0x15c),_0x131dc7+='export\x20const\x20extScriptHashes\x20=\x20/**\x20@type\x20{string[]}\x20*/\x20(['+_0x486807[_0x122f1b(0x164)](_0x179361=>_0x122f1b(0x156)+_0x179361+'\x27,')[_0x122f1b(0xfa)]('')+(_0x486807[_0x122f1b(0xc3)]>0x0?'\x0a':'')+'])\x0a\x0a',_0x131dc7+=_0x122f1b(0x111)+_0x4a0fa4['map'](_0x5d9d35=>'\x0a\x09\x27'+_0x5d9d35+'\x27,')[_0x122f1b(0xfa)]('')+(_0x14a088[_0x122f1b(0x100)](_0x4a0fa4['length'],0x0)?'\x0a':'')+_0x122f1b(0x15c),_0x131dc7+=_0x122f1b(0x122)+Object[_0x122f1b(0x16a)](_0x159f0d)[_0x122f1b(0x11f)]()[_0x122f1b(0x164)](([_0x172405,_0x4dcc56])=>_0x122f1b(0x136)+_0x172405+_0x122f1b(0x167)+_0x4dcc56[_0x122f1b(0xaa)]['map'](_0x5b5395=>_0x122f1b(0x11b)+_0x5b5395+'\x27,')[_0x122f1b(0xfa)]('')+(_0x4dcc56[_0x122f1b(0xaa)][_0x122f1b(0xc3)]>0x0?_0x122f1b(0xf5):'')+_0x122f1b(0x11d)+_0x4dcc56['styles'][_0x122f1b(0x164)](_0x50f7bf=>_0x122f1b(0x11b)+_0x50f7bf+'\x27,')['join']('')+(_0x4dcc56[_0x122f1b(0x163)][_0x122f1b(0xc3)]>0x0?_0x122f1b(0xf5):'')+_0x122f1b(0xf8))[_0x122f1b(0xfa)](',')+_0x122f1b(0xfc),_0x131dc7+=_0x122f1b(0x103)+Object[_0x122f1b(0x16a)](_0x337977[_0x122f1b(0xaa)])['map'](([_0x121525,_0x4e8eac])=>_0x122f1b(0x166)+_0x121525+_0x122f1b(0x14f)+_0x4e8eac+'\x27,\x0a')[_0x122f1b(0xfa)]('')+'\x09}),\x0a\x09styles:\x20/**\x20@type\x20{Record<string,string>}\x20*/\x20({\x0a'+Object[_0x122f1b(0x16a)](_0x337977[_0x122f1b(0x163)])[_0x122f1b(0x164)](([_0x3a5e14,_0x48e863])=>_0x122f1b(0x166)+_0x3a5e14+_0x122f1b(0x14f)+_0x48e863+'\x27,\x0a')[_0x122f1b(0xfa)]('')+'\x09}),\x0a}\x0a',await mkdir(_0x14a088[_0x122f1b(0x134)](dirname,_0x1fb8f),{'recursive':!![]}),await writeFile(_0x1fb8f,_0x131dc7);}}export const processStaticFiles=async(_0x27dca7,{distDir:_0x248bdc,sri:_0x1d3c85})=>{const _0x283316=_0x38034e,_0x9f3043={'aPptB':function(_0x11af61,_0x32ec5f,_0x2d71a5){return _0x11af61(_0x32ec5f,_0x2d71a5);},'tFuoW':function(_0x13238e,_0x3a23ab,_0x4ff9f6,_0x34bae3,_0x32472a){return _0x13238e(_0x3a23ab,_0x4ff9f6,_0x34bae3,_0x32472a);}},_0x43910c={'inlineScriptHashes':new Set(),'inlineStyleHashes':new Set(),'extScriptHashes':new Set(),'extStyleHashes':new Set(),'perPageSriHashes':new Map(),'perResourceSriHashes':{'scripts':new Map(),'styles':new Map()}};await _0x9f3043[_0x283316(0xd6)](scanAllowLists,_0x1d3c85,_0x43910c),await scanForNestedResources(_0x27dca7,_0x248bdc,_0x43910c),await scanDirectory(_0x27dca7,_0x248bdc,_0x248bdc,_0x43910c,processHTMLFile,_0x9597da=>extname(_0x9597da)===_0x283316(0x16d),_0x1d3c85);if(!_0x1d3c85[_0x283316(0xcf)])return;await _0x9f3043[_0x283316(0x16b)](generateSRIHashesModule,_0x27dca7,_0x43910c,_0x1d3c85[_0x283316(0xcf)],_0x1d3c85['enableMiddleware']);};export const getMiddlewareHandler=(_0x5a36a9,_0x3c023a,_0x35cda0)=>{return async(_0x528825,_0x5eb86a)=>{const _0x3a5015=_0x4988,_0x512a63=await _0x5eb86a(),_0x22e122=await _0x512a63[_0x3a5015(0x133)](),{updatedContent:_0x4e00c0}=await updateDynamicPageSriHashes(_0x5a36a9,_0x22e122,_0x3c023a,_0x35cda0),_0x231108=new Response(_0x4e00c0,{'status':_0x512a63['status'],'statusText':_0x512a63['statusText'],'headers':_0x512a63[_0x3a5015(0x151)]});return _0x231108;};};export const getCSPMiddlewareHandler=(_0xcd710a,_0x2d1e9d,_0x413c29,_0x3caa5a)=>{const _0x22bd71={'PMEgo':function(_0x1063aa,_0x34d1ad,_0x6b5dd7,_0x990d60,_0x2fe19e){return _0x1063aa(_0x34d1ad,_0x6b5dd7,_0x990d60,_0x2fe19e);}};return async(_0x21da9f,_0x3a51fe)=>{const _0x3747b2=_0x4988,_0xa31f6c=await _0x3a51fe(),_0x22e29e=await _0xa31f6c[_0x3747b2(0x133)](),{updatedContent:_0x4df499,pageHashes:_0x430efe}=await _0x22bd71[_0x3747b2(0xfd)](updateDynamicPageSriHashes,_0xcd710a,_0x22e29e,_0x2d1e9d,_0x3caa5a),_0x1e101c=new Response(_0x4df499,{'status':_0xa31f6c['status'],'statusText':_0xa31f6c[_0x3747b2(0x158)],'headers':patchHeaders(_0xa31f6c[_0x3747b2(0x151)],_0x430efe,_0x413c29)});return _0x1e101c;};};const middlewareVirtualModuleId=_0x38034e(0x152),resolvedMiddlewareVirtualModuleId='\x00'+middlewareVirtualModuleId,loadVirtualMiddlewareModule=async(_0x1862a4,_0xe5ba9,_0x23cc2c,_0x36d8fd)=>{const _0x4d350a=_0x38034e,_0x19311f={'vJTfX':_0x4d350a(0x13a),'nwnUm':function(_0xf4decd,_0x5f5001){return _0xf4decd!==_0x5f5001;},'YxgUx':_0x4d350a(0x15d),'gwSJO':function(_0xbef2e8,_0x2f8548,_0x2ad7ed,_0x235f20){return _0xbef2e8(_0x2f8548,_0x2ad7ed,_0x235f20);},'TwuNv':function(_0x5368fe,_0x7da39b,_0x56f6af,_0x25c0f2,_0x333d98){return _0x5368fe(_0x7da39b,_0x56f6af,_0x25c0f2,_0x333d98);},'GeUlz':function(_0x9ed85c,_0x54943b){return _0x9ed85c(_0x54943b);},'cwDYw':_0x4d350a(0xc0),'qfUaL':function(_0x3927a8,_0x1667a5){return _0x3927a8!==_0x1667a5;}};let _0x1eeaaa='',_0x109dc1='';if(_0xe5ba9[_0x4d350a(0xad)]&&_0xe5ba9[_0x4d350a(0xcf)]){let _0x3bd51b=!await doesFileExist(_0xe5ba9[_0x4d350a(0xcf)]);if(!_0x3bd51b)try{if('YASPl'!==_0x19311f['vJTfX']){const _0x4e5190=await import(_0xe5ba9[_0x4d350a(0xcf)]);for(const _0x337499 of _0xe5ba9[_0x4d350a(0xf9)]){if(_0x19311f[_0x4d350a(0x162)](_0x19311f[_0x4d350a(0xc1)],_0x4d350a(0x15d)))return![];else{if(!Object[_0x4d350a(0x115)](_0x4e5190[_0x4d350a(0xd2)]['scripts'],_0x337499)){_0x3bd51b=!![];break;}}}}else return![];}catch(_0x308da4){if(_0x4d350a(0x117)===_0x4d350a(0xeb))return![];else _0x1862a4[_0x4d350a(0x137)]('Failed\x20to\x20load\x20SRI\x20hashes\x20module\x20\x22'+_0xe5ba9[_0x4d350a(0xcf)]+_0x4d350a(0x143)+_0x308da4),_0x3bd51b=!![];}if(_0x3bd51b){const _0x16a815={'inlineScriptHashes':new Set(),'inlineStyleHashes':new Set(),'extScriptHashes':new Set(),'extStyleHashes':new Set(),'perPageSriHashes':new Map(),'perResourceSriHashes':{'scripts':new Map(),'styles':new Map()}};await _0x19311f[_0x4d350a(0x16e)](scanForNestedResources,_0x1862a4,_0x36d8fd,_0x16a815),await scanAllowLists(_0xe5ba9,_0x16a815),await _0x19311f[_0x4d350a(0xde)](generateSRIHashesModule,_0x1862a4,_0x16a815,_0xe5ba9['hashesModule'],![]);}}if(_0xe5ba9[_0x4d350a(0xad)]&&_0xe5ba9[_0x4d350a(0xcf)]&&await _0x19311f['GeUlz'](doesFileExist,_0xe5ba9[_0x4d350a(0xcf)]))_0x1eeaaa=_0x4d350a(0x102)+_0xe5ba9[_0x4d350a(0xcf)]+'\x27',_0x109dc1=_0x4d350a(0x104);else _0xe5ba9[_0x4d350a(0xad)]&&_0xe5ba9[_0x4d350a(0xcf)]&&_0x1862a4[_0x4d350a(0x137)]('The\x20SRI\x20hashes\x20module\x20\x22'+_0xe5ba9[_0x4d350a(0xcf)]+'\x22\x20did\x20not\x20exist\x20at\x20build\x20time.\x20You\x20may\x20have\x20to\x20run\x20the\x20build\x20step\x20again');return _0x4d350a(0x144)+(_0x19311f[_0x4d350a(0x162)](_0x23cc2c,undefined)?_0x19311f[_0x4d350a(0x168)]:'getMiddlewareHandler')+'\x20}\x20from\x20\x27@kindspells/astro-shield/core\x27\x0a'+_0x1eeaaa+_0x4d350a(0xae)+_0x109dc1+_0x4d350a(0xbb)+(_0x19311f[_0x4d350a(0xe6)](_0x23cc2c,undefined)?_0x4d350a(0x12c)+JSON[_0x4d350a(0x12f)](_0x23cc2c)+',\x20'+JSON['stringify'](_0xe5ba9)+')':_0x4d350a(0xc6)+JSON['stringify'](_0xe5ba9)+')')+_0x4d350a(0x159);},getViteMiddlewarePlugin=(_0x536602,_0x42c2ce,_0x3f631e,_0x313c23)=>{const _0x4cc787={'gtbXi':function(_0x3323b9,_0x49db63){return _0x3323b9===_0x49db63;}};return{'name':'vite-plugin-astro-shield','resolveId'(_0x490572){if(_0x4cc787['gtbXi'](_0x490572,middlewareVirtualModuleId))return resolvedMiddlewareVirtualModuleId;return;},async 'load'(_0xf7e4db,_0x4a7f5b){switch(_0xf7e4db){case resolvedMiddlewareVirtualModuleId:return await loadVirtualMiddlewareModule(_0x536602,_0x42c2ce,_0x3f631e,_0x313c23);default:return;}}};};export const getAstroConfigSetup=(_0xbb368f,_0x25804c)=>{const _0x3651f4=_0x38034e,_0x33b96d={'mlvYe':function(_0x4bd721,_0x2f2c52){return _0x4bd721(_0x2f2c52);},'AJkml':_0x3651f4(0x129)};return async({logger:_0x2653b0,addMiddleware:_0x26d5f1,config:_0x1b1cf0,updateConfig:_0x184588})=>{const _0x967d17=_0x3651f4,_0x53c410=_0x33b96d['mlvYe'](fileURLToPath,_0x1b1cf0[_0x967d17(0x16c)]),_0x370713=getViteMiddlewarePlugin(_0x2653b0,_0xbb368f,_0x25804c,_0x53c410);_0x33b96d[_0x967d17(0xb1)](_0x184588,{'vite':{'plugins':[_0x370713]}}),_0x26d5f1({'order':_0x33b96d['AJkml'],'entrypoint':_0x967d17(0x152)});};};