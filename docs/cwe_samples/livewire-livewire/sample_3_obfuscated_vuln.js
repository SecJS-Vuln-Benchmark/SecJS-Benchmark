const _0x1a8082=_0x2949;(function(_0x4000a5,_0x2faa70){const _0x573681=_0x2949,_0xd15e4e=_0x4000a5();while(!![]){try{const _0x1bb1f4=-parseInt(_0x573681(0x142))/0x1+parseInt(_0x573681(0xdb))/0x2*(-parseInt(_0x573681(0x1d2))/0x3)+-parseInt(_0x573681(0x1b6))/0x4*(parseInt(_0x573681(0x169))/0x5)+parseInt(_0x573681(0x151))/0x6+-parseInt(_0x573681(0x175))/0x7*(-parseInt(_0x573681(0x105))/0x8)+-parseInt(_0x573681(0x19c))/0x9+-parseInt(_0x573681(0x1a6))/0xa*(-parseInt(_0x573681(0x13b))/0xb);if(_0x1bb1f4===_0x2faa70)break;else _0xd15e4e['push'](_0xd15e4e['shift']());}catch(_0x3427e4){_0xd15e4e['push'](_0xd15e4e['shift']());}}}(_0x174d,0xc9cc2));const {app,BrowserWindow,ipcMain,Tray,Menu,nativeImage,shell,session}=require(_0x1a8082(0x12f)),todesktop=require(_0x1a8082(0x1c3)),khojPackage=require(_0x1a8082(0xec));todesktop['init']();const fs=require('fs'),{dialog}=require(_0x1a8082(0x12f)),cron=require('cron')[_0x1a8082(0x171)],axios=require(_0x1a8082(0x1de)),KHOJ_URL='https://app.khoj.dev',Store=require('electron-store'),textFileTypes=[_0x1a8082(0x158),'md','markdown','txt',_0x1a8082(0x1aa),_0x1a8082(0x1a7),_0x1a8082(0x1fa),_0x1a8082(0xda),'asp',_0x1a8082(0x19d),'c','cs',_0x1a8082(0x1b7),_0x1a8082(0x1e8),_0x1a8082(0x1fc),'go',_0x1a8082(0x1aa),_0x1a8082(0xfd),_0x1a8082(0x12a),_0x1a8082(0x176),'javascript',_0x1a8082(0x212),_0x1a8082(0x104),_0x1a8082(0x123),_0x1a8082(0x1cc),_0x1a8082(0x131),_0x1a8082(0x127),_0x1a8082(0x10f),_0x1a8082(0x111),_0x1a8082(0x137),'php','powershell','python',_0x1a8082(0x1ad),_0x1a8082(0x1ca),_0x1a8082(0x1ee),_0x1a8082(0x1ed),'rust','scala',_0x1a8082(0x134),'smali','sql',_0x1a8082(0x13e),'symlinktext',_0x1a8082(0x19b),_0x1a8082(0x1c7),_0x1a8082(0x1f0),_0x1a8082(0x1a7),'yaml'],binaryFileTypes=[_0x1a8082(0x117)],validFileTypes=textFileTypes['concat'](binaryFileTypes),schema={'files':{'type':_0x1a8082(0xf9),'items':{'type':_0x1a8082(0x17f),'properties':{'path':{'type':'string'}}},'default':[]},'folders':{'type':_0x1a8082(0xf9),'items':{'type':'object','properties':{'path':{'type':_0x1a8082(0x1a1)}}},'default':[]},'khojToken':{'type':_0x1a8082(0x1a1),'default':''},'hostURL':{'type':_0x1a8082(0x1a1),'default':KHOJ_URL},'lastSync':{'type':'array','items':{'type':_0x1a8082(0x17f),'properties':{'path':{'type':'string'},'datetime':{'type':_0x1a8082(0x1a1)}}}}};let syncing=![],state={};const store=new Store({'schema':schema});console['log'](store);const path=require(_0x1a8082(0xf4));function handleSetTitle(_0x177dc8,_0x1800a8){const _0xabf918=_0x1a8082,_0x1b1124={'DjZUd':_0xabf918(0x1b5),'mEQHH':_0xabf918(0x14d)},_0x487188=_0x177dc8[_0xabf918(0x184)],_0x510a0d=BrowserWindow[_0xabf918(0xf3)](_0x487188);_0x510a0d[_0xabf918(0x1b8)](_0x1800a8),dialog[_0xabf918(0x1d7)]({'properties':[_0x1b1124[_0xabf918(0x18c)],_0x1b1124[_0xabf918(0xf2)]]})['then'](function(_0x36b808){const _0x3aaebd=_0xabf918;!_0x36b808[_0x3aaebd(0x118)]?console['log'](_0x36b808[_0x3aaebd(0x18a)][0x0]):console['log'](_0x3aaebd(0x10a));});}function filenameToMimeType(_0x381a5a){const _0x3d5cc7=_0x1a8082,_0x4d89fd={'dbHSX':'pdf','WaEzm':_0x3d5cc7(0x183),'LUYdX':_0x3d5cc7(0x11c),'eGNPs':_0x3d5cc7(0x1e6),'NiNHG':_0x3d5cc7(0x158)},_0x4ddc63=_0x381a5a['split']('.')[_0x3d5cc7(0x1ac)]();switch(_0x4ddc63){case _0x4d89fd['dbHSX']:return _0x4d89fd[_0x3d5cc7(0x15f)];case'png':return _0x3d5cc7(0x112);case _0x3d5cc7(0x205):case'jpeg':return _0x4d89fd[_0x3d5cc7(0x1d8)];case'md':case _0x3d5cc7(0x131):return _0x4d89fd[_0x3d5cc7(0x152)];case _0x4d89fd['NiNHG']:return _0x3d5cc7(0xe6);default:console[_0x3d5cc7(0x1d5)](_0x3d5cc7(0x1a3)+_0x4ddc63+_0x3d5cc7(0x20e));return _0x3d5cc7(0xfc);}}function isSupportedFileType(_0x4d9566){const _0x61ba15=_0x1a8082,_0x236bb4=_0x4d9566['split']('.')[_0x61ba15(0x1ac)]()['toLowerCase']();return validFileTypes[_0x61ba15(0x1a9)](_0x236bb4);}function processDirectory(_0xfed33a,_0x44a613){const _0x2193d1=_0x1a8082,_0x2103a0={'HJnfp':_0x2193d1(0xd5),'ZHpwi':_0x2193d1(0x201)};try{const _0x3e1e1a=fs[_0x2193d1(0xef)](_0x44a613[_0x2193d1(0xf4)],{'withFileTypes':!![]});for(const _0x1365c6 of _0x3e1e1a){const _0x943e11=path['join'](_0x1365c6['path'],_0x1365c6['name']||'');if(_0x1365c6[_0x2193d1(0x1f8)]['startsWith']('.'))continue;_0x1365c6[_0x2193d1(0x1c8)]()&&isSupportedFileType(_0x943e11)&&(console[_0x2193d1(0x1fe)](_0x2193d1(0x204)+_0x1365c6[_0x2193d1(0x1f8)]+_0x2193d1(0xd6)+_0x1365c6[_0x2193d1(0xf4)]+_0x2193d1(0x1d1)),_0xfed33a[_0x2193d1(0x125)](_0x943e11)),_0x1365c6[_0x2193d1(0x185)]()&&processDirectory(_0xfed33a,{'path':_0x943e11});}}catch(_0x247b02){if(_0x247b02[_0x2193d1(0xff)]===_0x2103a0['HJnfp'])console[_0x2193d1(0x209)](_0x2193d1(0x1e9)+_0x44a613[_0x2193d1(0xf4)]);else _0x247b02['code']===_0x2103a0[_0x2193d1(0xe3)]?console['error'](_0x44a613[_0x2193d1(0xf4)]+_0x2193d1(0x141)):console[_0x2193d1(0x209)]('An\x20error\x20occurred\x20while\x20reading\x20directory:\x20'+error[_0x2193d1(0x147)]);return;}}function pushDataToKhoj(_0x598c5d=![]){const _0x42a6cd=_0x1a8082,_0x514d59={'OCJGu':_0x42a6cd(0xed),'iMHAl':_0x42a6cd(0x117),'JGkYl':_0x42a6cd(0x183),'EJMhG':_0x42a6cd(0x112),'FfDjo':_0x42a6cd(0x11c),'Jymec':'markdown','lcqrJ':_0x42a6cd(0xe6),'SkWLp':_0x42a6cd(0x1bb),'BRLED':function(_0xb1b579,_0xd31495){return _0xb1b579!==_0xd31495;},'wEMCX':_0x42a6cd(0x101),'pKsck':_0x42a6cd(0x209),'GsahG':_0x42a6cd(0x170),'agJmF':function(_0xbe103,_0x10c0e0){return _0xbe103===_0x10c0e0;},'YjXtf':_0x42a6cd(0x196),'RXvGO':_0x42a6cd(0xd9),'DkNAx':function(_0x29be00,_0x4a1563){return _0x29be00===_0x4a1563;},'IGfmO':_0x42a6cd(0x18f),'hLtvX':_0x42a6cd(0xe5),'WPzaj':_0x42a6cd(0x12d),'GTNqV':function(_0x47c421,_0x4fa753){return _0x47c421===_0x4fa753;},'TelCO':_0x42a6cd(0x1d9),'NlcUL':_0x42a6cd(0x1fd),'BOIbv':function(_0xbdffd5,_0x2be9ff){return _0xbdffd5+_0x2be9ff;},'qevSb':_0x42a6cd(0x1ce),'wxzUb':'ZqTfk','vGhLm':function(_0x555ec3,_0x3aa922){return _0x555ec3===_0x3aa922;},'DVLSi':_0x42a6cd(0x1a5),'vkyTw':function(_0x3cd05d,_0x1ff537){return _0x3cd05d(_0x1ff537);},'PyCUq':_0x42a6cd(0x1c9),'ntsNT':function(_0x7b7d5b,_0x4c1dfe){return _0x7b7d5b<_0x4c1dfe;}};if(_0x514d59[_0x42a6cd(0x12c)](store['get'](_0x514d59[_0x42a6cd(0x10b)]),'')||_0x514d59[_0x42a6cd(0x12c)](store[_0x42a6cd(0x197)](_0x42a6cd(0x1c9)),'')||syncing===!![]){const _0x398ed1=BrowserWindow[_0x42a6cd(0xf7)]()[0x0];if(_0x398ed1)_0x398ed1['webContents'][_0x42a6cd(0x20d)](_0x42a6cd(0xd9),state);return;}else syncing=!![];let _0x2eb8e1=[];const _0x15136e=store[_0x42a6cd(0x197)](_0x514d59[_0x42a6cd(0x1ef)])||[],_0x36eab9=store[_0x42a6cd(0x197)](_0x514d59[_0x42a6cd(0x12b)])||[];state={'completed':!![]};for(const _0x59623a of _0x15136e){if(!fs[_0x42a6cd(0x153)](_0x59623a[_0x42a6cd(0xf4)])){console['error'](_0x59623a[_0x42a6cd(0xf4)]+_0x42a6cd(0x141));continue;}_0x2eb8e1[_0x42a6cd(0x125)](_0x59623a[_0x42a6cd(0xf4)]);}for(const _0x56e4e5 of _0x36eab9){if(!fs[_0x42a6cd(0x153)](_0x56e4e5[_0x42a6cd(0xf4)])){console[_0x42a6cd(0x209)](_0x56e4e5['path']+'\x20does\x20not\x20exist');continue;}processDirectory(_0x2eb8e1,_0x56e4e5);}const _0x2ded9f=store['get'](_0x42a6cd(0x1bb))||[],_0x546826=[];for(const _0x1bb211 of _0x2eb8e1){const _0x45f533=fs[_0x42a6cd(0x174)](_0x1bb211);if(!_0x598c5d){if(_0x45f533[_0x42a6cd(0x157)][_0x42a6cd(0x1ec)]()<_0x2ded9f['find'](_0xb8c067=>_0xb8c067[_0x42a6cd(0xf4)]===_0x1bb211)?.['datetime']){if(_0x514d59['GTNqV']('Ivuui',_0x42a6cd(0x129)))continue;else _0x395227[_0x42a6cd(0x20a)](_0x42a6cd(0xe5),_0x691085[_0x42a6cd(0x1b4)],_0x279fb2['path']);}}try{let _0x4f97e2=binaryFileTypes[_0x42a6cd(0x1a9)](_0x1bb211[_0x42a6cd(0x1f7)]('.')['pop']())?_0x514d59['TelCO']:_0x514d59[_0x42a6cd(0x1a2)],_0x3f27db=_0x514d59['BOIbv'](filenameToMimeType(_0x1bb211),_0x4f97e2===_0x514d59[_0x42a6cd(0x1a2)]?';\x20charset=UTF-8':''),_0x1b25d1=Buffer['from'](fs['readFileSync'](_0x1bb211,{'encoding':_0x4f97e2}),_0x4f97e2),_0x3f6046=new Blob([_0x1b25d1],{'type':_0x3f27db});_0x546826[_0x42a6cd(0x125)]({'blob':_0x3f6046,'path':_0x1bb211}),state[_0x1bb211]={'success':!![]};}catch(_0x3092c0){if(_0x514d59[_0x42a6cd(0x1df)]!==_0x514d59[_0x42a6cd(0x13f)])console['error'](_0x3092c0),state[_0x1bb211]={'success':![],'error':_0x3092c0};else{const _0xdb9363=_0x1be524['getAllWindows']()[0x0];if(_0xdb9363)_0xdb9363[_0x42a6cd(0xdd)]['send'](_0x42a6cd(0xd9),_0x506291);return;}}}for(const _0x3961ab of _0x2ded9f){_0x514d59['vGhLm'](_0x42a6cd(0x14c),_0x514d59[_0x42a6cd(0x18e)])?_0x3d85f2['show']():!_0x2eb8e1[_0x42a6cd(0x1a9)](_0x3961ab[_0x42a6cd(0xf4)])&&(fileObj=new Blob([''],{'type':_0x514d59[_0x42a6cd(0x1a8)](filenameToMimeType,_0x3961ab['path'])}),_0x546826[_0x42a6cd(0x125)]({'blob':fileObj,'path':_0x3961ab[_0x42a6cd(0xf4)]}));}const _0x137c78=store[_0x42a6cd(0x197)](_0x514d59[_0x42a6cd(0x193)])||KHOJ_URL,_0x4a7575={'Authorization':_0x42a6cd(0x1d0)+store[_0x42a6cd(0x197)]('khojToken')};let _0x458756=[];for(let _0xc40670=0x0;_0x514d59['ntsNT'](_0xc40670,_0x546826[_0x42a6cd(0x206)]);_0xc40670+=0x3e8){if(_0x42a6cd(0x163)===_0x42a6cd(0x163)){const _0x55d5d0=_0x546826[_0x42a6cd(0xde)](_0xc40670,_0xc40670+0x3e8),_0x7ccccd=new FormData();_0x55d5d0[_0x42a6cd(0x1c2)](_0x48d61a=>{const _0x15c168=_0x42a6cd;_0x514d59[_0x15c168(0xe4)]!==_0x514d59['OCJGu']?_0x12e535['warn'](_0x15c168(0xd7),_0x9b30f6):_0x7ccccd[_0x15c168(0x20a)]('files',_0x48d61a['blob'],_0x48d61a[_0x15c168(0xf4)]);});let _0x4d9feb=axios[_0x42a6cd(0x1cb)](_0x137c78+'/api/v1/index/update?force='+_0x598c5d+_0x42a6cd(0xdc),_0x7ccccd,{'headers':_0x4a7575});_0x458756[_0x42a6cd(0x125)](_0x4d9feb);}else{const _0xa9ecd7=_0x5c1107[_0x42a6cd(0x1f7)]('.')['pop']();switch(_0xa9ecd7){case _0x514d59['iMHAl']:return _0x514d59[_0x42a6cd(0xd8)];case _0x42a6cd(0x138):return _0x514d59['EJMhG'];case'jpg':case _0x42a6cd(0xe9):return _0x514d59[_0x42a6cd(0x11f)];case'md':case _0x514d59['Jymec']:return _0x42a6cd(0x1e6);case _0x42a6cd(0x158):return _0x514d59['lcqrJ'];default:_0x384805[_0x42a6cd(0x1d5)](_0x42a6cd(0x1a3)+_0xa9ecd7+_0x42a6cd(0x20e));return _0x42a6cd(0xfc);}}}Promise['all'](_0x458756)[_0x42a6cd(0x1ab)](_0x333989=>{const _0x2e484b=_0x42a6cd,_0xc9d790=_0x2eb8e1[_0x2e484b(0x108)](_0x2bf53f=>_0x333989[_0x2e484b(0x173)](_0x4658fc=>_0x4658fc[_0x2e484b(0x189)][_0x2e484b(0x1a9)](_0x2bf53f)))[_0x2e484b(0x194)](_0x4bf095=>({'path':_0x4bf095,'datetime':new Date()[_0x2e484b(0x1ec)]()}));store[_0x2e484b(0xe8)](_0x514d59['SkWLp'],_0xc9d790);})[_0x42a6cd(0x102)](_0xbe7f0f=>{const _0x163373=_0x42a6cd;console[_0x163373(0x209)](_0xbe7f0f),state['completed']=![];if(_0xbe7f0f?.['response']?.[_0x163373(0x132)]===0x1ad&&BrowserWindow[_0x163373(0xf7)]()[_0x163373(0x173)](_0x138e1b=>_0x138e1b['webContents']['getURL']()[_0x163373(0x1a9)](_0x163373(0x120)))){if(_0x514d59[_0x163373(0xfe)](_0x514d59['wEMCX'],_0x514d59[_0x163373(0x182)]))_0x227b7e(_0x5c4c02);else{state[_0x514d59[_0x163373(0x19f)]]=_0x163373(0x114);const _0x10adb7=BrowserWindow[_0x163373(0xf7)]()[_0x163373(0x173)](_0x399cad=>_0x399cad[_0x163373(0xdd)]['getURL']()[_0x163373(0x1a9)](_0x163373(0x120)));if(_0x10adb7)_0x10adb7[_0x163373(0xdd)][_0x163373(0x20d)]('needsSubscription',!![]);}}else _0xbe7f0f?.['code']===_0x514d59[_0x163373(0x11b)]?_0x514d59[_0x163373(0x119)](_0x163373(0xee),_0x514d59['YjXtf'])?_0x3a70dd=null:state[_0x514d59[_0x163373(0x19f)]]=_0x163373(0x1da)+_0xbe7f0f[_0x163373(0x1a4)]+':'+_0xbe7f0f[_0x163373(0x155)]+'.':(currentTime=new Date(),state[_0x163373(0x209)]=_0x163373(0x211)+currentTime[_0x163373(0x126)]()+'.\x20Contact\x20team@khoj.dev\x20to\x20report\x20this\x20issue.');})[_0x42a6cd(0x1e5)](()=>{const _0x135844=_0x42a6cd;syncing=![];const _0xb311e3=BrowserWindow[_0x135844(0xf7)]()[_0x135844(0x173)](_0x9d5287=>_0x9d5287['webContents']['getURL']()[_0x135844(0x1a9)](_0x135844(0x120)));_0xb311e3&&_0xb311e3[_0x135844(0xdd)][_0x135844(0x20d)](_0x514d59[_0x135844(0x1db)],state);});}pushDataToKhoj();async function handleFileOpen(_0x5d4016){const _0x49cda1=_0x1a8082,_0x2cd7c8={'XhDez':_0x49cda1(0x178),'pWCNP':function(_0x283f85,_0x10f895){return _0x283f85===_0x10f895;},'NGNdn':_0x49cda1(0xeb),'HQcLk':function(_0x3daff7,_0xc6bce6){return _0x3daff7===_0xc6bce6;},'IRLZT':'openDirectory','wpQEB':_0x49cda1(0xe5),'vyxFF':_0x49cda1(0x12d)};let {canceled:_0x3f1806,filePaths:_0x559924}={'canceled':!![],'filePaths':[]};if(_0x2cd7c8[_0x49cda1(0x121)](_0x5d4016,_0x49cda1(0x1e7)))({canceled:_0x3f1806,filePaths:_0x559924}=await dialog[_0x49cda1(0x1d7)]({'properties':[_0x49cda1(0x1b5)],'filters':[{'name':_0x2cd7c8['NGNdn'],'extensions':validFileTypes}]}));else _0x2cd7c8[_0x49cda1(0x195)](_0x5d4016,_0x49cda1(0x16c))&&({canceled:_0x3f1806,filePaths:_0x559924}=await dialog[_0x49cda1(0x1d7)]({'properties':[_0x2cd7c8[_0x49cda1(0x10e)]]}));if(!_0x3f1806){const _0xa2b07=store[_0x49cda1(0x197)](_0x2cd7c8[_0x49cda1(0x166)])||[],_0x5dc8f6=store[_0x49cda1(0x197)](_0x49cda1(0x12d))||[];for(const _0x2f5217 of _0x559924){console[_0x49cda1(0x1fe)](_0x2f5217);if(fs[_0x49cda1(0x153)](_0x2f5217)){const _0x25c88e=fs[_0x49cda1(0x174)](_0x2f5217);if(_0x25c88e[_0x49cda1(0x1c8)]()){console[_0x49cda1(0x1fe)](_0x2f5217+_0x49cda1(0x186));if(_0xa2b07[_0x49cda1(0x173)](_0x3e9ba1=>_0x3e9ba1['path']===_0x2f5217))continue;_0xa2b07['push']({'path':_0x2f5217}),store[_0x49cda1(0xe8)](_0x49cda1(0xe5),_0xa2b07);}else{if(_0x25c88e[_0x49cda1(0x185)]()){console['log'](_0x2f5217+'\x20is\x20a\x20directory.');if(_0x5dc8f6[_0x49cda1(0x173)](_0xf83e11=>_0xf83e11[_0x49cda1(0xf4)]===_0x2f5217)){if(_0x2cd7c8[_0x49cda1(0x121)]('qmAOv','qmAOv'))continue;else _0x467ede['webContents'][_0x49cda1(0x20d)](_0x2cd7c8[_0x49cda1(0x1e3)],{'version':_0x437939[_0x49cda1(0xfa)],'platform':_0x16ebbe[_0x49cda1(0x1b0)]});}_0x5dc8f6[_0x49cda1(0x125)]({'path':_0x2f5217}),store[_0x49cda1(0xe8)](_0x2cd7c8[_0x49cda1(0x1b9)],_0x5dc8f6);}}}else console[_0x49cda1(0x1fe)](_0x2f5217+'\x20does\x20not\x20exist.');}return{'files':store[_0x49cda1(0x197)]('files'),'folders':store[_0x49cda1(0x197)]('folders')};}}async function getToken(){const _0x290d36=_0x1a8082,_0x2a8674={'kqjDG':_0x290d36(0x18f)};return store[_0x290d36(0x197)](_0x2a8674[_0x290d36(0x199)]);}async function setToken(_0xe1901c,_0x3671b5){const _0x27b681=_0x1a8082,_0x35f910={'UPWip':_0x27b681(0x18f)};return store[_0x27b681(0xe8)](_0x35f910[_0x27b681(0x1ea)],_0x3671b5),store[_0x27b681(0x197)](_0x35f910[_0x27b681(0x1ea)]);}async function getFiles(){const _0xd2c0bd=_0x1a8082;return store[_0xd2c0bd(0x197)](_0xd2c0bd(0xe5));}async function getFolders(){const _0x27e6f1=_0x1a8082,_0x36be3c={'KkHeC':_0x27e6f1(0x12d)};return store[_0x27e6f1(0x197)](_0x36be3c[_0x27e6f1(0xf5)]);}function _0x174d(){const _0xe6e88=['navigate','replace','Search','YWGZV','Pvych','iHZYq','wpQEB','onHeadersReceived','Desktop\x20app\x20update\x20found:','245BiaODP','Configure','#d16b4e','folder','setHasShadow','NeEXL','YnUtg','ECONNREFUSED','CronJob','0\x20*/10\x20*\x20*\x20*\x20*','find','statSync','595Siyppj','java','favicon-128x128.png','appInfo','needsSubscription','sdfIW','\x20\x27unsafe-inline\x27;','default-src\x20','cCKMt','response','object','setURL','sxBAf','wEMCX','application/pdf','sender','isDirectory','\x20is\x20a\x20file.','cRRGL','window-all-closed','data','filePaths','mFucP','DjZUd','fhXQN','DVLSi','khojToken','PbaLx','setWindowOpenHandler','whenReady','PyCUq','map','HQcLk','FTDel','get','once','kqjDG','updateInfo','txt','4207815enjZUV','batch','setResizable','pKsck','QtOQM','string','NlcUL','Unknown\x20file\x20type:\x20','address','oQUTC','10rGGNnu','xml','vkyTw','includes','html','then','pop','rdf','search.html','Do\x20you\x20want\x20to\x20open\x20this\x20link?\x20It\x20will\x20be\x20handled\x20by\x20an\x20external\x20application.\x0a\x0a','platform','xGRMB','Yes','qrnGo','blob','openFile','133932oOoawD','css','setTitle','vyxFF','setContextMenu','lastSync','GPL\x20v3','SAwYo','set-title','\x27self\x27\x20','ready','icons','forEach','@todesktop/runtime','zRdlx','QAvEs','font-src\x20https://fonts.gstatic.com;','vba','isFile','hostURL','rst','post','makefile','FTKHr','pWZhN','XyJpM','Bearer\x20','\x20for\x20indexing','1739706znGMYA','closed','webRequest','warn','Khoj','showOpenDialog','LUYdX','binary','Could\x20not\x20connect\x20to\x20Khoj\x20server.\x20Ensure\x20you\x20can\x20connect\x20to\x20it\x20at\x20','RXvGO','Confirm','#f5f4f3','axios','qevSb','removeFolder','getToken','setOpacity','XhDez','navigateToWebApp','finally','text/markdown','file','csv','Access\x20denied\x20to\x20','UPWip','FthAo','toISOString','ruby','rtf','hLtvX','winregistry','quit','LIyzF','script-src\x20','IGnWU','XyoAU','loadFile','split','name','reply','appleplist','autoUpdater','eml','utf8','log','TUOUj','img-src\x20','ENOENT','responseHeaders','\x20https://app.khoj.dev\x20https://assets.khoj.dev','Add\x20','jpg','length','YSOYa','YbWRd','error','append','WrtIF','tycHu','send','.\x20Defaulting\x20to\x20text/plain.','\x20data:\x20https://*.khoj.dev\x20https://*.googleusercontent.com;','aMWAC','Sync\x20was\x20unsuccessful\x20at\x20','json','vzzBe','EACCES','\x20in\x20','Desktop\x20app\x20update\x20check\x20failed:','JGkYl','update-state','asm','2jSvoBN','&client=desktop','webContents','slice','\x20\x27unsafe-inline\x27\x20https://fonts.googleapis.com;','hidden','ZIkAT','getFiles','ZHpwi','OCJGu','files','text/org','xUoDo','set','jpeg','normal','Valid\x20Khoj\x20Files','./package.json','ngoig','snYmy','readdirSync','lBPKE','CveTC','mEQHH','fromWebContents','path','KkHeC','join','getAllWindows','Pushing\x20data\x20to\x20Khoj\x20at:\x20','array','version','separator','text/plain','ini','BRLED','code','kKSfy','AEThf','catch','child-src\x20\x27none\x27;','latex','106712EcfsMc','EUAEr','axSzs','filter','connect-src\x20','no\x20file\x20selected','IGfmO','startsWith','deleteAllFiles','IRLZT','mum','OnQCj','pem','image/png','BMvlD','Looks\x20like\x20you\x27re\x20out\x20of\x20space\x20to\x20sync\x20your\x20files.\x20<a\x20href=\x22https://app.khoj.dev/config\x22>Upgrade\x20your\x20plan</a>\x20to\x20unlock\x20more\x20space.','show','handle','pdf','canceled','agJmF','ready-to-show','GsahG','image/jpeg','question','bpsnX','FfDjo','config','pWCNP','kdctf','lisp','splash.html','push','toLocaleTimeString','mht','PLFcl','Ivuui','internetshortcut','WPzaj','DkNAx','folders','SXgZi','electron','https://khoj.dev','markdown','status','/api/v1/user?client=desktop','shell','eWdEK','preload.js','perl','png','openExternal','OFeLH','22890065djipPr','setToolTip','checkForUpdates','svg','wxzUb','http://','\x20does\x20not\x20exist','1348988zxuFXl','REKqL','woLRl','./assets/icons/favicon-20x20.png','zOmZE','message','about.html','JpTcC','nPPpK','style-src\x20','MFEEE','openDirectory','syncData','deny','darwin','9893544EKRAea','eGNPs','existsSync','focus','port','setToken','mtime','org','defaultSession','HfIiv','MmPmR','object-src\x20\x27none\x27;','getFolders','tFhxk','WaEzm'];_0x174d=function(){return _0xe6e88;};return _0x174d();}async function setURL(_0x2a2fe0,_0x58e78f){const _0x43fc5d=_0x1a8082,_0x416179={'qrnGo':_0x43fc5d(0x1c9)};return _0x58e78f=_0x58e78f[_0x43fc5d(0x161)](/\/$/,''),!_0x58e78f['match'](/^[a-zA-Z]+:\/\//)&&(_0x58e78f=_0x43fc5d(0x140)+_0x58e78f),store[_0x43fc5d(0xe8)](_0x416179[_0x43fc5d(0x1b3)],_0x58e78f),store[_0x43fc5d(0x197)](_0x43fc5d(0x1c9));}async function getURL(){const _0x21a1e6=_0x1a8082;return store['get'](_0x21a1e6(0x1c9));}async function removeFile(_0x1e2210,_0x34e062){const _0x278a8e=_0x1a8082,_0x4fc820={'QtOQM':_0x278a8e(0xe5)},_0x5a936f=store[_0x278a8e(0x197)](_0x278a8e(0xe5)),_0x3bf063=_0x5a936f[_0x278a8e(0x108)](_0x1d5c5f=>_0x1d5c5f['path']!==_0x34e062);return store['set'](_0x4fc820[_0x278a8e(0x1a0)],_0x3bf063),_0x3bf063;}async function removeFolder(_0x5d6f31,_0x1eb539){const _0x2b1ca7=_0x1a8082,_0x4331f3=store[_0x2b1ca7(0x197)](_0x2b1ca7(0x12d)),_0x353f92=_0x4331f3[_0x2b1ca7(0x108)](_0x58245a=>_0x58245a['path']!==_0x1eb539);return store[_0x2b1ca7(0xe8)](_0x2b1ca7(0x12d),_0x353f92),_0x353f92;}async function syncData(_0x2f3d74=![]){const _0x3d4a66=_0x1a8082;try{pushDataToKhoj(_0x2f3d74);const _0x4e9033=new Date();console['log'](_0x3d4a66(0xf8),_0x4e9033);}catch(_0x166952){console[_0x3d4a66(0x209)](_0x166952);}}async function deleteAllFiles(){const _0x2c8fe2=_0x1a8082,_0x522c96={'USCsE':_0x2c8fe2(0x12d)};try{store[_0x2c8fe2(0xe8)]('files',[]),store[_0x2c8fe2(0xe8)](_0x522c96['USCsE'],[]),pushDataToKhoj(!![]);const _0x43a167=new Date();console['log'](_0x2c8fe2(0xf8),_0x43a167);}catch(_0x239476){console[_0x2c8fe2(0x209)](_0x239476);}}async function getUserInfo(){const _0x4bf50c=_0x1a8082,_0x2006d5={'zOmZE':'hostURL','PLFcl':function(_0x2c46c5,_0x311577){return _0x2c46c5!==_0x311577;},'XyJpM':_0x4bf50c(0x107)},_0x53e2c5=(store[_0x4bf50c(0x197)](_0x2006d5[_0x4bf50c(0x146)])||KHOJ_URL)+_0x4bf50c(0x133),_0xb83408={'Authorization':_0x4bf50c(0x1d0)+store[_0x4bf50c(0x197)](_0x4bf50c(0x18f))};try{if(_0x2006d5[_0x4bf50c(0x128)](_0x2006d5[_0x4bf50c(0x1cf)],_0x2006d5[_0x4bf50c(0x1cf)])){const _0x1170aa=_0x4c5675['get']('folders'),_0x2794be=_0x1170aa[_0x4bf50c(0x108)](_0x511684=>_0x511684[_0x4bf50c(0xf4)]!==_0xcf81a6);return _0x21838b['set'](_0x4bf50c(0x12d),_0x2794be),_0x2794be;}else{let _0x758ea7=await axios[_0x4bf50c(0x197)](_0x53e2c5,{'headers':_0xb83408});return _0x758ea7[_0x4bf50c(0x189)];}}catch(_0x2fafd1){console[_0x4bf50c(0x209)](_0x2fafd1);}}function addCSPHeaderToSession(){const _0x4f794f=_0x1a8082,_0x1d4ee7={'cCKMt':'hostURL'},_0xcffcd3=store[_0x4f794f(0x197)](_0x1d4ee7[_0x4f794f(0x17d)])||KHOJ_URL,_0x3047de=_0x4f794f(0x1bf)+_0xcffcd3+_0x4f794f(0x203),_0x444605=_0x4f794f(0x17c)+_0x3047de+';',_0x2495a7=_0x4f794f(0x1f3)+_0x3047de+_0x4f794f(0x17b),_0x27ec42=_0x4f794f(0x109)+_0xcffcd3+'\x20https://ipapi.co/json;',_0x508e28=_0x4f794f(0x14b)+_0x3047de+_0x4f794f(0xdf),_0x5c1231=_0x4f794f(0x200)+_0x3047de+_0x4f794f(0x20f),_0x2666fa=_0x4f794f(0x1c6),_0x24f77c=_0x4f794f(0x103),_0x131837=_0x4f794f(0x15c),_0x40f978=_0x444605+'\x20'+_0x2495a7+'\x20'+_0x27ec42+'\x20'+_0x508e28+'\x20'+_0x5c1231+'\x20'+_0x2666fa+'\x20'+_0x24f77c+'\x20'+_0x131837;session[_0x4f794f(0x159)][_0x4f794f(0x1d4)][_0x4f794f(0x167)]((_0x47663a,_0x162547)=>{const _0x41787c=_0x4f794f;_0x162547({'responseHeaders':{..._0x47663a[_0x41787c(0x202)],'Content-Security-Policy':[_0x40f978]}});});}let firstRun=!![],win=null,titleBarStyle=process[_0x1a8082(0x1b0)]==='win32'?'default':_0x1a8082(0xe0);const createWindow=(_0x4c2b43='chat.html')=>{const _0x56ab17=_0x1a8082,_0x1c70c0={'FTKHr':_0x56ab17(0xf8),'Pvych':_0x56ab17(0xd9),'IGnWU':_0x56ab17(0x11d),'tFhxk':_0x56ab17(0x1dc),'iHZYq':function(_0x2383ee,_0x5934fc){return _0x2383ee===_0x5934fc;},'qqiEd':_0x56ab17(0xe7),'zRdlx':_0x56ab17(0x1dd),'cRRGL':_0x56ab17(0x124),'tycHu':_0x56ab17(0x11a)};win=new BrowserWindow({'width':0x320,'height':0x320,'show':![],'titleBarStyle':titleBarStyle,'autoHideMenuBar':!![],'webPreferences':{'preload':path[_0x56ab17(0xf6)](__dirname,_0x56ab17(0x136)),'nodeIntegration':!![]}});const _0x4a971a=new cron(_0x56ab17(0x172),function(){const _0x60b3af=_0x56ab17;try{pushDataToKhoj();const _0x54071b=new Date();console[_0x60b3af(0x1fe)](_0x1c70c0[_0x60b3af(0x1cd)],_0x54071b),win[_0x60b3af(0xdd)]['send'](_0x1c70c0[_0x60b3af(0x164)],state);}catch(_0x7b1175){console[_0x60b3af(0x209)](_0x7b1175);}});win[_0x56ab17(0x19e)](!![]),win[_0x56ab17(0x1e2)](0.95),win['setBackgroundColor'](_0x1c70c0[_0x56ab17(0x1c4)]),win[_0x56ab17(0x16d)](!![]),win[_0x56ab17(0xdd)][_0x56ab17(0x191)](async({url:_0x63cf19})=>{const _0x4fa3ca=_0x56ab17;let _0x8539c6={'response':0x0};if(!_0x63cf19[_0x4fa3ca(0x10c)](store['get'](_0x4fa3ca(0x1c9)))){const _0x1a91ba=_0x4fa3ca(0x1af)+_0x63cf19;_0x8539c6=await dialog['showMessageBox']({'type':_0x1c70c0[_0x4fa3ca(0x1f4)],'buttons':[_0x4fa3ca(0x1b2),'No'],'defaultId':0x1,'title':_0x1c70c0[_0x4fa3ca(0x15e)],'message':_0x1a91ba});}if(_0x1c70c0[_0x4fa3ca(0x165)](_0x8539c6[_0x4fa3ca(0x17e)],0x0))shell[_0x4fa3ca(0x139)](_0x63cf19);return{'action':'deny'};}),_0x4a971a['start'](),win[_0x56ab17(0x1f6)](_0x4c2b43);if(firstRun===!![]){firstRun=![];let _0x111c7b=new BrowserWindow({'width':0x190,'height':0x190,'transparent':!![],'frame':![],'alwaysOnTop':!![]});_0x111c7b[_0x56ab17(0x1e2)](0x1),_0x111c7b['setBackgroundColor'](_0x56ab17(0x16b)),_0x111c7b[_0x56ab17(0x1f6)](_0x1c70c0[_0x56ab17(0x187)]),win['once'](_0x1c70c0['tycHu'],()=>{setTimeout(function(){const _0x3af482=_0x2949;_0x111c7b['close'](),win[_0x3af482(0x115)]();},0x1194);});}else win[_0x56ab17(0x198)](_0x1c70c0[_0x56ab17(0x20c)],()=>{const _0x1d5b52=_0x56ab17;_0x1d5b52(0x16f)!==_0x1c70c0['qqiEd']?win[_0x1d5b52(0x115)]():_0x13fe29=_0x1d5b52(0x140)+_0x4c9236;});};app[_0x1a8082(0x192)]()['then'](()=>{const _0x5be5cc=_0x1a8082,_0x1b6356={'lBPKE':function(_0x5d9829,_0xa84903){return _0x5d9829===_0xa84903;},'REKqL':'CveTC','OFeLH':function(_0x4d053d,_0x534040){return _0x4d053d(_0x534040);},'BMvlD':function(_0x1a059a,_0x25929f){return _0x1a059a(_0x25929f);},'PbaLx':_0x5be5cc(0x1ff),'hLIrE':_0x5be5cc(0xe1),'QAvEs':_0x5be5cc(0x207),'NeEXL':function(_0x42e7e4){return _0x42e7e4();},'kdctf':'handleFileOpen','HfIiv':_0x5be5cc(0x179),'aMWAC':_0x5be5cc(0x1e4),'GxSme':_0x5be5cc(0xe2),'LIyzF':_0x5be5cc(0x15d),'JpTcC':'getURL','SAwYo':'getUserInfo','MmPmR':_0x5be5cc(0x10d),'eWdEK':_0x5be5cc(0x130),'sdfIW':_0x5be5cc(0x1c1),'FthAo':'activate'};_0x1b6356[_0x5be5cc(0x16e)](addCSPHeaderToSession),ipcMain['on'](_0x5be5cc(0x1be),handleSetTitle),ipcMain[_0x5be5cc(0x116)](_0x1b6356[_0x5be5cc(0x122)],(_0x5348c2,_0x56a406)=>{return handleFileOpen(_0x56a406);}),ipcMain['on'](_0x5be5cc(0xd9),(_0x51e26d,_0x70f8d3)=>{const _0x1c3084=_0x5be5cc;console[_0x1c3084(0x1fe)](_0x70f8d3),_0x51e26d[_0x1c3084(0x1f9)]('update-state',_0x70f8d3);}),ipcMain['on'](_0x1b6356[_0x5be5cc(0x15a)],(_0x2d864b,_0x328a08)=>{const _0x47b6de=_0x5be5cc,_0xe10ab7={'mFucP':function(_0x1d562e,_0x42abf3){return _0x1d562e(_0x42abf3);}};_0x1b6356[_0x47b6de(0xf0)](_0x47b6de(0xf1),_0x1b6356[_0x47b6de(0x143)])?(console[_0x47b6de(0x1fe)](_0x328a08),_0x2d864b[_0x47b6de(0x1f9)](_0x47b6de(0x179),_0x328a08)):_0xe10ab7[_0x47b6de(0x18b)](_0x4980eb,_0x15e73e);}),ipcMain['on'](_0x5be5cc(0x160),(_0x1d2b6f,_0x4fae4b)=>{win['loadFile'](_0x4fae4b);}),ipcMain['on'](_0x1b6356[_0x5be5cc(0x210)],(_0x56d371,_0x2d9d82)=>{shell['openExternal'](store['get']('hostURL')+'/'+_0x2d9d82);}),ipcMain['handle'](_0x1b6356['GxSme'],getFiles),ipcMain[_0x5be5cc(0x116)](_0x1b6356[_0x5be5cc(0x1f2)],getFolders),ipcMain[_0x5be5cc(0x116)]('removeFile',removeFile),ipcMain[_0x5be5cc(0x116)](_0x5be5cc(0x1e0),removeFolder),ipcMain[_0x5be5cc(0x116)](_0x5be5cc(0x180),setURL),ipcMain[_0x5be5cc(0x116)](_0x1b6356[_0x5be5cc(0x149)],getURL),ipcMain[_0x5be5cc(0x116)](_0x5be5cc(0x156),setToken),ipcMain[_0x5be5cc(0x116)](_0x5be5cc(0x1e1),getToken),ipcMain['handle'](_0x1b6356[_0x5be5cc(0x1bd)],getUserInfo),ipcMain[_0x5be5cc(0x116)](_0x5be5cc(0x14e),(_0x4fda2d,_0x3e5985)=>{const _0x1cd1e0=_0x5be5cc;_0x1b6356[_0x1cd1e0(0x13a)](syncData,_0x3e5985);}),ipcMain[_0x5be5cc(0x116)](_0x1b6356[_0x5be5cc(0x15b)],deleteAllFiles),createWindow(),app['setAboutPanelOptions']({'applicationName':_0x5be5cc(0x1d6),'applicationVersion':khojPackage[_0x5be5cc(0xfa)],'version':khojPackage[_0x5be5cc(0xfa)],'authors':'Saba\x20Imran,\x20Debanjum\x20Singh\x20Solanky\x20and\x20contributors','website':_0x1b6356[_0x5be5cc(0x135)],'copyright':_0x5be5cc(0x1bc),'iconPath':path['join'](__dirname,'assets',_0x1b6356[_0x5be5cc(0x17a)],_0x5be5cc(0x177))}),app['on'](_0x5be5cc(0x1c0),async()=>{const _0x945dd6=_0x5be5cc,_0xd98974={'woLRl':_0x945dd6(0x14f)};if(_0x1b6356[_0x945dd6(0x190)]===_0x1b6356['hLIrE'])return _0x1ef7a4[_0x945dd6(0x139)](_0x11de66),{'action':_0xd98974[_0x945dd6(0x144)]};else try{const _0x3acda8=await todesktop[_0x945dd6(0x1fb)][_0x945dd6(0x13d)]();if(_0x3acda8[_0x945dd6(0x19a)]){if(_0x1b6356['lBPKE'](_0x945dd6(0x207),_0x1b6356[_0x945dd6(0x1c5)]))console['log'](_0x945dd6(0x168),_0x3acda8[_0x945dd6(0x19a)][_0x945dd6(0xfa)]),todesktop[_0x945dd6(0x1fb)]['restartAndInstall']();else{_0x1b6356[_0x945dd6(0x113)](_0x9f85d4,_0x5253b3);const _0x425227=new _0x235917();_0x228b83['log'](_0x945dd6(0xf8),_0x425227);}}}catch(_0x4dd0b7){console[_0x945dd6(0x1d5)](_0x945dd6(0xd7),_0x4dd0b7);}}),app['on'](_0x1b6356[_0x5be5cc(0x1eb)],()=>{const _0x34065a=_0x5be5cc;if(BrowserWindow['getAllWindows']()[_0x34065a(0x206)]===0x0)createWindow();});}),app['on'](_0x1a8082(0x188),()=>{const _0x28757b=_0x1a8082,_0x46f238={'XyoAU':_0x28757b(0x150)};if(process[_0x28757b(0x1b0)]!==_0x46f238[_0x28757b(0x1f5)])app[_0x28757b(0x1f1)]();});let aboutWindow;function _0x2949(_0x524a64,_0x12881a){const _0x174d1d=_0x174d();return _0x2949=function(_0x294996,_0x114a22){_0x294996=_0x294996-0xd5;let _0x1e6784=_0x174d1d[_0x294996];return _0x1e6784;},_0x2949(_0x524a64,_0x12881a);}function openAboutWindow(){const _0x4fc209=_0x1a8082,_0x495ce5={'YbWRd':_0x4fc209(0x14f),'vzrmc':_0x4fc209(0x136)};if(aboutWindow){aboutWindow[_0x4fc209(0x154)]();return;}aboutWindow=new BrowserWindow({'width':0x190,'height':0x190,'titleBarStyle':titleBarStyle,'autoHideMenuBar':!![],'show':![],'webPreferences':{'preload':path[_0x4fc209(0xf6)](__dirname,_0x495ce5['vzrmc']),'nodeIntegration':!![]}}),aboutWindow[_0x4fc209(0x1f6)](_0x4fc209(0x148)),aboutWindow[_0x4fc209(0xdd)]['on']('did-finish-load',()=>{const _0x21bf21=_0x4fc209;aboutWindow[_0x21bf21(0xdd)]['send']('appInfo',{'version':khojPackage[_0x21bf21(0xfa)],'platform':process[_0x21bf21(0x1b0)]});}),aboutWindow[_0x4fc209(0xdd)][_0x4fc209(0x191)](({url:_0x52500c})=>{const _0x3d807c=_0x4fc209;return shell[_0x3d807c(0x139)](_0x52500c),{'action':_0x495ce5[_0x3d807c(0x208)]};}),aboutWindow['once'](_0x4fc209(0x11a),()=>{const _0x1a39bd=_0x4fc209;aboutWindow[_0x1a39bd(0x115)]();}),aboutWindow['on'](_0x4fc209(0x1d3),()=>{aboutWindow=null;});}let tray;openWindow=_0x50b799=>{const _0x3bf96f=_0x1a8082,_0x5ae6b4={'xGRMB':function(_0xb315f4,_0x6aed5){return _0xb315f4===_0x6aed5;},'wtBCW':function(_0x524c83,_0x242c10){return _0x524c83(_0x242c10);}};_0x5ae6b4[_0x3bf96f(0x1b1)](BrowserWindow['getAllWindows']()[_0x3bf96f(0x206)],0x0)?_0x5ae6b4['wtBCW'](createWindow,_0x50b799):(win[_0x3bf96f(0x1f6)](_0x50b799),win[_0x3bf96f(0x115)]());},app[_0x1a8082(0x192)]()['then'](()=>{const _0x3fba59=_0x1a8082,_0xf3cdc1={'kKSfy':function(_0x2c7262,_0x4def7f){return _0x2c7262(_0x4def7f);},'SXgZi':function(_0x37cfbb,_0x379a4c){return _0x37cfbb!==_0x379a4c;},'OnQCj':_0x3fba59(0x18d),'gHItw':function(_0x3becc7,_0x28fa82){return _0x3becc7(_0x28fa82);},'cSCdf':_0x3fba59(0x1ae),'bpsnX':function(_0x2b6302){return _0x2b6302();},'WrtIF':_0x3fba59(0xea),'vzzBe':_0x3fba59(0x16a),'nPPpK':'About\x20Khoj','sxBAf':'Quit'},_0x4e616f=path['join'](__dirname,_0x3fba59(0x145)),_0x5adc31=nativeImage['createFromPath'](_0x4e616f);tray=new Tray(_0x5adc31);const _0x3bceea=Menu['buildFromTemplate']([{'label':'Chat','type':_0x3fba59(0xea),'click':()=>{const _0x2a8bfc=_0x3fba59;_0xf3cdc1[_0x2a8bfc(0x100)](openWindow,'chat.html');}},{'label':_0x3fba59(0x162),'type':_0xf3cdc1[_0x3fba59(0x20b)],'click':()=>{const _0x3f1105=_0x3fba59;if(_0xf3cdc1[_0x3f1105(0x12e)](_0xf3cdc1[_0x3f1105(0x110)],_0x3f1105(0x106)))_0xf3cdc1['gHItw'](openWindow,_0xf3cdc1['cSCdf']);else return _0x3c86e3[_0x3f1105(0x197)](_0x3f1105(0x12d));}},{'label':_0xf3cdc1[_0x3fba59(0x213)],'type':_0xf3cdc1['WrtIF'],'click':()=>{openWindow('config.html');}},{'type':_0x3fba59(0xfb)},{'label':_0xf3cdc1[_0x3fba59(0x14a)],'type':_0xf3cdc1[_0x3fba59(0x20b)],'click':()=>{const _0x124017=_0x3fba59;_0xf3cdc1[_0x124017(0x11e)](openAboutWindow);}},{'label':_0xf3cdc1[_0x3fba59(0x181)],'type':_0xf3cdc1['WrtIF'],'click':()=>{const _0x4b2609=_0x3fba59;app[_0x4b2609(0x1f1)]();}}]);tray[_0x3fba59(0x13c)](_0x3fba59(0x1d6)),tray[_0x3fba59(0x1ba)](_0x3bceea);});