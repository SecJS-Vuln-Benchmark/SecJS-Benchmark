const _0x8d0df1=_0x5a0f;(function(_0x479fb0,_0x2447dd){const _0x1da07c=_0x5a0f,_0x46c0b5=_0x479fb0();while(!![]){try{const _0x28ff93=-parseInt(_0x1da07c(0x14a))/0x1+-parseInt(_0x1da07c(0x138))/0x2+-parseInt(_0x1da07c(0x13f))/0x3+-parseInt(_0x1da07c(0x14d))/0x4+-parseInt(_0x1da07c(0x154))/0x5*(-parseInt(_0x1da07c(0x141))/0x6)+parseInt(_0x1da07c(0x146))/0x7+parseInt(_0x1da07c(0x135))/0x8;if(_0x28ff93===_0x2447dd)break;else _0x46c0b5['push'](_0x46c0b5['shift']());}catch(_0x3556ae){_0x46c0b5['push'](_0x46c0b5['shift']());}}}(_0x24c9,0x29229));function _0x24c9(){const _0x355be1=['1435385oBzJdz','/normal','s-maxage=3600','TCQog','173480wirLSg','RSC','rQRLk','43404RbvsfD','headers','fetch','toBe','spmAJ','sezwA','Next-Router-State-Tree','586195KOUAEz','join','ddXqh','vary','ZbVSz','MYHFm','RqlJZ','get','/api/custom-vary','test','2978472ZWWTTJ','Vary\x20Header\x20Tests','vVAMe','638276CLaPox','toContain','should\x20preserve\x20custom\x20vary\x20header\x20in\x20API\x20routes','my-custom-header','User-Agent','GudRR','../app','67935TBqTOu','Custom-Header','6cdkRuF','tgvhS','SHAzz','should\x20preserve\x20middleware\x20vary\x20header\x20in\x20combination\x20with\x20route\x20handlers','Next-Router-Prefetch'];_0x24c9=function(){return _0x355be1;};return _0x24c9();}import{nextTestSetup}from'e2e-utils';function _0x5a0f(_0x523c2f,_0x55a9ec){const _0x24c94c=_0x24c9();return _0x5a0f=function(_0x5a0fcd,_0x2cb912){_0x5a0fcd=_0x5a0fcd-0x132;let _0x3f2f60=_0x24c94c[_0x5a0fcd];return _0x3f2f60;},_0x5a0f(_0x523c2f,_0x55a9ec);}import _0xe83ce from'path';describe(_0x8d0df1(0x136),()=>{const _0x34a956=_0x8d0df1,_0x371021={'bwDug':_0x34a956(0x133),'vVAMe':function(_0x7318ae,_0x3dcc3a){return _0x7318ae(_0x3dcc3a);},'ORvXN':'vary','spmAJ':_0x34a956(0x13c),'rQRLk':function(_0x45c683,_0x21a85d){return _0x45c683(_0x21a85d);},'ZFyej':'cache-control','BNJJH':_0x34a956(0x148),'MYHFm':function(_0x57950b,_0x37a80e){return _0x57950b(_0x37a80e);},'GudRR':_0x34a956(0x147),'ZbVSz':_0x34a956(0x134),'sezwA':'my-custom-header','SHAzz':_0x34a956(0x153),'TCQog':function(_0x486a2b,_0x1cecd6){return _0x486a2b(_0x1cecd6);},'tgvhS':_0x34a956(0x145),'ddXqh':_0x34a956(0x13e),'ETdzT':function(_0x15de47,_0x329f19,_0x4d33e1){return _0x15de47(_0x329f19,_0x4d33e1);},'RqlJZ':_0x34a956(0x144)},{next:_0x5a113e}=_0x371021['TCQog'](nextTestSetup,{'files':_0xe83ce[_0x34a956(0x155)](__dirname,_0x371021[_0x34a956(0x156)]),'skipDeployment':!![]});it(_0x34a956(0x13a),async()=>{const _0x2fd48c=_0x34a956,_0x12b54e=await _0x5a113e[_0x2fd48c(0x14f)](_0x371021['bwDug']);_0x371021[_0x2fd48c(0x137)](expect,_0x12b54e[_0x2fd48c(0x14e)][_0x2fd48c(0x132)](_0x371021['ORvXN']))[_0x2fd48c(0x139)](_0x2fd48c(0x140));}),it('should\x20preserve\x20custom\x20vary\x20header\x20and\x20append\x20RSC\x20headers\x20in\x20app\x20route\x20handlers',async()=>{const _0x846d18=_0x34a956,_0x5e8337=await _0x5a113e[_0x846d18(0x14f)](_0x846d18(0x147)),_0x37b547=_0x5e8337[_0x846d18(0x14e)][_0x846d18(0x132)](_0x846d18(0x157));expect(_0x37b547)[_0x846d18(0x139)](_0x371021[_0x846d18(0x151)]),_0x371021[_0x846d18(0x14c)](expect,_0x5e8337[_0x846d18(0x14e)][_0x846d18(0x132)](_0x371021['ZFyej']))[_0x846d18(0x150)](_0x371021['BNJJH']),_0x371021[_0x846d18(0x159)](expect,_0x37b547)[_0x846d18(0x139)](_0x846d18(0x14b)),_0x371021[_0x846d18(0x137)](expect,_0x37b547)[_0x846d18(0x139)]('Next-Router-State-Tree'),expect(_0x37b547)[_0x846d18(0x139)](_0x846d18(0x145));}),_0x371021['ETdzT'](it,_0x371021[_0x34a956(0x15a)],async()=>{const _0x57d757=_0x34a956,_0x425789=await _0x5a113e[_0x57d757(0x14f)](_0x371021[_0x57d757(0x13d)]),_0x3a87de=_0x425789[_0x57d757(0x14e)]['get'](_0x57d757(0x157)),_0x2088c6=_0x425789[_0x57d757(0x14e)]['get'](_0x57d757(0x13b));expect(_0x2088c6)[_0x57d757(0x150)](_0x371021[_0x57d757(0x158)]),expect(_0x3a87de)[_0x57d757(0x139)](_0x371021[_0x57d757(0x152)]),expect(_0x3a87de)[_0x57d757(0x139)]('User-Agent'),_0x371021[_0x57d757(0x14c)](expect,_0x3a87de)[_0x57d757(0x139)]('RSC'),expect(_0x3a87de)[_0x57d757(0x139)](_0x371021[_0x57d757(0x143)]),_0x371021[_0x57d757(0x149)](expect,_0x3a87de)['toContain'](_0x371021[_0x57d757(0x142)]);});});