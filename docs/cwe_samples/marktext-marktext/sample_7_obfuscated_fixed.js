const _0x59ded5=_0x1174;(function(_0x30b3a9,_0x8743c){const _0x2fa806=_0x1174,_0x3b446b=_0x30b3a9();while(!![]){try{const _0x1d87c9=-parseInt(_0x2fa806(0x89))/0x1*(parseInt(_0x2fa806(0xd3))/0x2)+parseInt(_0x2fa806(0xd4))/0x3*(parseInt(_0x2fa806(0x81))/0x4)+parseInt(_0x2fa806(0xca))/0x5+parseInt(_0x2fa806(0xa2))/0x6*(-parseInt(_0x2fa806(0xb7))/0x7)+-parseInt(_0x2fa806(0xae))/0x8*(parseInt(_0x2fa806(0xbd))/0x9)+-parseInt(_0x2fa806(0xb2))/0xa*(parseInt(_0x2fa806(0xc5))/0xb)+parseInt(_0x2fa806(0x78))/0xc*(parseInt(_0x2fa806(0xa3))/0xd);if(_0x1d87c9===_0x8743c)break;else _0x3b446b['push'](_0x3b446b['shift']());}catch(_0x4d6af9){_0x3b446b['push'](_0x3b446b['shift']());}}}(_0x43b2,0xb0f01));let express=require(_0x59ded5(0x7e));const apicache=require(_0x59ded5(0xb3)),{UptimeKumaServer}=require(_0x59ded5(0x93)),StatusPage=require('../model/status_page'),{allowDevAllOrigin,sendHttpError}=require(_0x59ded5(0xc7)),{R}=require('redbean-node'),Monitor=require(_0x59ded5(0xcd)),{badgeConstants}=require(_0x59ded5(0xa5)),{makeBadge}=require(_0x59ded5(0xc3));function _0x1174(_0x263600,_0x2f60d9){const _0x43b2ad=_0x43b2();return _0x1174=function(_0x11743b,_0x189133){_0x11743b=_0x11743b-0x77;let _0x23db40=_0x43b2ad[_0x11743b];return _0x23db40;},_0x1174(_0x263600,_0x2f60d9);}let router=express['Router'](),cache=apicache[_0x59ded5(0xd0)];function _0x43b2(){const _0xe3f9f4=['erjds','MzvJi','color','#808080','692SourBl','afill','handleStatusPageResponse','128x128','slugToID','title','rYdRf','aLzIy','type','sssjP','../uptime-kuma-server','label','/api/status-page/heartbeat/:slug','send','defaultStyle','getInstance','hYowS','indexHTML','status','IgCNb','pEyID','icon','getStatusPageData','/status-page','megQk','12hOcjYi','13DpkIVg','/status/:slug','../config','params','status_page','xvaTA','default','heartbeat','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20heartbeat\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20time\x20DESC\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x2050\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','/api/status-page/:slug/manifest.json','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20heartbeat\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20time\x20DESC\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','420328odGXFp','Down','toPublicJSON','/api/status-page/:slug/badge','20ZnrBsx','../modules/apicache','SbIyB','jukgW','nDYUa','3064439KRSsRP','Degraded','reverse','/api/status-page/:slug','#F6BE00','length','72NuTbRT','message','convertToBeans','fLJMM','1440\x20minutes','slug','badge-maker','kNBVD','5760238qXmLFJ','standalone','../util-server','MigCl','GQpUK','7058315sJRckb','5\x20minutes','MemHg','../model/monitor','defaultDownColor','Not\x20Found','middleware','Maintenance','\x20slug\x20=\x20?\x20','1654JpZHOz','98139CmBHZq','json','hEwxr','calcUptime','RHpSh','eRuRf','image/png','findOne','map','9862764IFMUny','tENvO','hUCgc','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20monitor_group.monitor_id\x20FROM\x20monitor_group,\x20`group`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20`group`.status_page_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20','get','/status','express','exports','1\x20minutes','172deUJhc','jwllS','naColor','/status/'];_0x43b2=function(){return _0xe3f9f4;};return _0x43b2();}const server=UptimeKumaServer[_0x59ded5(0x98)]();router[_0x59ded5(0x7c)](_0x59ded5(0xa4),cache('5\x20minutes'),async(_0x1e8167,_0x3b1e9d)=>{const _0x25b3ea=_0x59ded5;let _0x1e3c03=_0x1e8167['params'][_0x25b3ea(0xc2)];await StatusPage[_0x25b3ea(0x8b)](_0x3b1e9d,server[_0x25b3ea(0x9a)],_0x1e3c03);}),router[_0x59ded5(0x7c)](_0x59ded5(0x7d),cache(_0x59ded5(0xcb)),async(_0x1af3af,_0x383ac5)=>{const _0x203c8b=_0x59ded5,_0x600217={'FlJqt':'default'};let _0x5b9e32=_0x600217['FlJqt'];await StatusPage['handleStatusPageResponse'](_0x383ac5,server[_0x203c8b(0x9a)],_0x5b9e32);}),router[_0x59ded5(0x7c)](_0x59ded5(0xa0),cache(_0x59ded5(0xcb)),async(_0x120d88,_0x167d55)=>{const _0x201538=_0x59ded5,_0x360c62={'rYdRf':_0x201538(0xa9)};let _0x589253=_0x360c62[_0x201538(0x8f)];await StatusPage[_0x201538(0x8b)](_0x167d55,server[_0x201538(0x9a)],_0x589253);}),router[_0x59ded5(0x7c)](_0x59ded5(0xba),cache(_0x59ded5(0xcb)),async(_0x4b1edc,_0x3a1f48)=>{const _0x4c1b63=_0x59ded5,_0x2710c8={'megQk':function(_0x3ca599,_0x38827f,_0x3d830f){return _0x3ca599(_0x38827f,_0x3d830f);},'Wmppd':_0x4c1b63(0xd2),'hYowS':function(_0x3866df,_0xfc9d0e){return _0x3866df===_0xfc9d0e;}};allowDevAllOrigin(_0x3a1f48);let _0x519baf=_0x4b1edc[_0x4c1b63(0xa6)][_0x4c1b63(0xc2)];try{let _0x27df24=await R[_0x4c1b63(0xdb)](_0x4c1b63(0xa7),_0x2710c8['Wmppd'],[_0x519baf]);if(!_0x27df24)return null;let _0x1dd049=await StatusPage[_0x4c1b63(0x9f)](_0x27df24);if(!_0x1dd049){if(_0x2710c8[_0x4c1b63(0x99)](_0x4c1b63(0x8a),_0x4c1b63(0x8a))){_0x2710c8[_0x4c1b63(0xa1)](sendHttpError,_0x3a1f48,_0x4c1b63(0xcf));return;}else _0x2710c8['megQk'](_0x4227d6,_0x41ba22,_0x676e2b['message']);}_0x3a1f48['json'](_0x1dd049);}catch(_0x4595e8){_0x2710c8[_0x4c1b63(0xa1)](sendHttpError,_0x3a1f48,_0x4595e8['message']);}}),router[_0x59ded5(0x7c)](_0x59ded5(0x95),cache(_0x59ded5(0x80)),async(_0x579486,_0x1393c7)=>{const _0x5cd0a5=_0x59ded5,_0x1952cf={'erjds':function(_0x5a9ad7,_0x3594fc){return _0x5a9ad7(_0x3594fc);},'MemHg':_0x5cd0a5(0xaa),'eRuRf':function(_0x28c86a,_0x105d95,_0xd1914e){return _0x28c86a(_0x105d95,_0xd1914e);}};_0x1952cf[_0x5cd0a5(0x85)](allowDevAllOrigin,_0x1393c7);try{let _0x4a7432={},_0x559308={},_0x5539f1=_0x579486[_0x5cd0a5(0xa6)][_0x5cd0a5(0xc2)],_0x30e599=await StatusPage[_0x5cd0a5(0x8d)](_0x5539f1),_0x92f5e4=await R['getCol'](_0x5cd0a5(0x7b),[_0x30e599]);for(let _0x4b3d16 of _0x92f5e4){let _0x56c6cc=await R['getAll'](_0x5cd0a5(0xab),[_0x4b3d16]);_0x56c6cc=R[_0x5cd0a5(0xbf)](_0x1952cf[_0x5cd0a5(0xcc)],_0x56c6cc),_0x4a7432[_0x4b3d16]=_0x56c6cc[_0x5cd0a5(0xb9)]()[_0x5cd0a5(0x77)](_0x182378=>_0x182378[_0x5cd0a5(0xb0)]());const _0x489b92=0x18;_0x559308[_0x4b3d16+'_'+_0x489b92]=await Monitor[_0x5cd0a5(0xd7)](_0x489b92,_0x4b3d16);}_0x1393c7['json']({'heartbeatList':_0x4a7432,'uptimeList':_0x559308});}catch(_0xaeecc){_0x1952cf[_0x5cd0a5(0xd9)](sendHttpError,_0x1393c7,_0xaeecc[_0x5cd0a5(0xbe)]);}}),router[_0x59ded5(0x7c)](_0x59ded5(0xac),cache(_0x59ded5(0xc1)),async(_0x3d01e6,_0x8f070)=>{const _0x56f1e1=_0x59ded5,_0x1983bc={'RHpSh':function(_0x1b4995,_0x126af9){return _0x1b4995(_0x126af9);},'sssjP':'\x20slug\x20=\x20?\x20','HCJGa':function(_0x49bc28,_0x266d7f,_0x2640ca){return _0x49bc28(_0x266d7f,_0x2640ca);},'tdJOb':_0x56f1e1(0xcf),'nDYUa':_0x56f1e1(0x84),'pEyID':_0x56f1e1(0xc6),'SbIyB':_0x56f1e1(0x8c)};_0x1983bc[_0x56f1e1(0xd8)](allowDevAllOrigin,_0x8f070);let _0x5c548b=_0x3d01e6[_0x56f1e1(0xa6)][_0x56f1e1(0xc2)];try{let _0x93596f=await R[_0x56f1e1(0xdb)](_0x56f1e1(0xa7),_0x1983bc[_0x56f1e1(0x92)],[_0x5c548b]);if(!_0x93596f){_0x1983bc['HCJGa'](sendHttpError,_0x8f070,_0x1983bc['tdJOb']);return;}_0x8f070[_0x56f1e1(0xd5)]({'name':_0x93596f[_0x56f1e1(0x8e)],'start_url':_0x1983bc[_0x56f1e1(0xb6)]+_0x93596f[_0x56f1e1(0xc2)],'display':_0x1983bc[_0x56f1e1(0x9d)],'icons':[{'src':_0x93596f[_0x56f1e1(0x9e)],'sizes':_0x1983bc[_0x56f1e1(0xb4)],'type':_0x56f1e1(0xda)}]});}catch(_0x285b5f){sendHttpError(_0x8f070,_0x285b5f['message']);}}),router['get'](_0x59ded5(0xb1),cache(_0x59ded5(0xcb)),async(_0x5508ff,_0x50871c)=>{const _0x90375e=_0x59ded5,_0x437266={'tENvO':function(_0x57aa3a,_0x1df377,_0x12628d){return _0x57aa3a(_0x1df377,_0x12628d);},'aLzIy':_0x90375e(0xcf),'kNBVD':_0x90375e(0x88),'jwllS':function(_0x26d767,_0x53a929){return _0x26d767===_0x53a929;},'hUCgc':function(_0x1b4a91,_0x5bb1db){return _0x1b4a91!==_0x5bb1db;},'FthFC':function(_0x2c6603,_0x359fba){return _0x2c6603!==_0x359fba;},'FoGVD':_0x90375e(0x86),'eXbFW':function(_0x596232,_0x45e1b6){return _0x596232!==_0x45e1b6;},'fLJMM':_0x90375e(0xd1),'MigCl':_0x90375e(0xb8),'hEwxr':function(_0x2404e8,_0x6a7332){return _0x2404e8(_0x6a7332);},'YyBsg':_0x90375e(0xb5)};allowDevAllOrigin(_0x50871c);const _0x12aadb=_0x5508ff['params'][_0x90375e(0xc2)],_0x2f44f1=await StatusPage[_0x90375e(0x8d)](_0x12aadb),{label:_0x307a3d,upColor:upColor=badgeConstants['defaultUpColor'],downColor:downColor=badgeConstants[_0x90375e(0xce)],partialColor:partialColor=_0x90375e(0xbb),maintenanceColor:maintenanceColor=_0x437266[_0x90375e(0xc4)],style:style=badgeConstants[_0x90375e(0x97)]}=_0x5508ff['query'];try{let _0x9a818f=await R['getCol'](_0x90375e(0x7b),[_0x2f44f1]),_0x1447d6=![],_0x26b1ce=![],_0x364f68=![];for(let _0x5ca7d3 of _0x9a818f){let _0x26dec1=await R['getAll'](_0x90375e(0xad),[_0x5ca7d3]);if(_0x437266['jwllS'](_0x26dec1[_0x90375e(0xbc)],0x0))continue;if(_0x437266[_0x90375e(0x82)](_0x26dec1[0x0][_0x90375e(0x9b)],0x3))_0x364f68=!![];else{if(_0x26dec1[0x0]['status']===0x2){}else{if(_0x26dec1[0x0]['status']===0x1)_0x1447d6=!![];else{if(_0x437266[_0x90375e(0x7a)](_0x90375e(0xa8),_0x90375e(0xa8)))return null;else _0x26b1ce=!![];}}}}const _0x32f6ad={'style':style};if(!_0x1447d6&&!_0x26b1ce&&!_0x364f68)_0x437266['FthFC'](_0x90375e(0xc9),_0x437266['FoGVD'])?(_0x32f6ad[_0x90375e(0xbe)]='N/A',_0x32f6ad[_0x90375e(0x87)]=badgeConstants[_0x90375e(0x83)]):(_0x92f4ea['label']=_0x622f76?_0xee3931:'',_0x428b5b[_0x90375e(0x87)]=_0x32361f,_0x2f04c2[_0x90375e(0xbe)]='Up');else{if(_0x364f68)_0x437266['eXbFW'](_0x90375e(0x9c),_0x90375e(0x9c))?(_0x5769b6[_0x90375e(0x94)]=_0x594cd6?_0x2cf426:'',_0x20b9a4['color']=_0x5a02fd,_0x39c94[_0x90375e(0xbe)]=_0x90375e(0xaf)):(_0x32f6ad[_0x90375e(0x94)]=_0x307a3d?_0x307a3d:'',_0x32f6ad['color']=maintenanceColor,_0x32f6ad[_0x90375e(0xbe)]=_0x437266[_0x90375e(0xc0)]);else{if(_0x1447d6&&!_0x26b1ce)_0x32f6ad['label']=_0x307a3d?_0x307a3d:'',_0x32f6ad['color']=upColor,_0x32f6ad[_0x90375e(0xbe)]='Up';else _0x1447d6&&_0x26b1ce?(_0x32f6ad[_0x90375e(0x94)]=_0x307a3d?_0x307a3d:'',_0x32f6ad[_0x90375e(0x87)]=partialColor,_0x32f6ad[_0x90375e(0xbe)]=_0x437266[_0x90375e(0xc8)]):(_0x32f6ad[_0x90375e(0x94)]=_0x307a3d?_0x307a3d:'',_0x32f6ad[_0x90375e(0x87)]=downColor,_0x32f6ad[_0x90375e(0xbe)]=_0x90375e(0xaf));}}const _0x4373c6=_0x437266[_0x90375e(0xd6)](makeBadge,_0x32f6ad);_0x50871c[_0x90375e(0x91)]('image/svg+xml'),_0x50871c[_0x90375e(0x96)](_0x4373c6);}catch(_0x3f7d1c){if(_0x437266[_0x90375e(0x82)](_0x437266['YyBsg'],'AuiZd')){_0x437266[_0x90375e(0x79)](_0x504379,_0x472af4,_0x437266[_0x90375e(0x90)]);return;}else sendHttpError(_0x50871c,_0x3f7d1c[_0x90375e(0xbe)]);}}),module[_0x59ded5(0x7f)]=router;