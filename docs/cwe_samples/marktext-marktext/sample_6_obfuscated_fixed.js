const _0x3bd2a8=_0x5976;(function(_0x4fee82,_0x4e7f3d){const _0x4464dc=_0x5976,_0x172c65=_0x4fee82();while(!![]){try{const _0x2df31a=parseInt(_0x4464dc(0x1b1))/0x1*(parseInt(_0x4464dc(0x214))/0x2)+-parseInt(_0x4464dc(0x1ad))/0x3*(parseInt(_0x4464dc(0x1da))/0x4)+parseInt(_0x4464dc(0x1a5))/0x5+-parseInt(_0x4464dc(0x1c3))/0x6*(-parseInt(_0x4464dc(0x1e1))/0x7)+-parseInt(_0x4464dc(0x1de))/0x8+-parseInt(_0x4464dc(0x1fd))/0x9+-parseInt(_0x4464dc(0x20f))/0xa;if(_0x2df31a===_0x4e7f3d)break;else _0x172c65['push'](_0x172c65['shift']());}catch(_0x23da7c){_0x172c65['push'](_0x172c65['shift']());}}}(_0x1f18,0xebdb3));let express=require(_0x3bd2a8(0x1a4));const {setting,allowDevAllOrigin,allowAllOrigin,percentageToColor,filterAndJoin,sendHttpError}=require(_0x3bd2a8(0x1a8)),{R}=require(_0x3bd2a8(0x1a1)),apicache=require('../modules/apicache'),Monitor=require('../model/monitor'),dayjs=require(_0x3bd2a8(0x1b7)),{UP,MAINTENANCE,DOWN,PENDING,flipStatus,log}=require(_0x3bd2a8(0x1a7)),StatusPage=require(_0x3bd2a8(0x170)),{UptimeKumaServer}=require('../uptime-kuma-server'),{UptimeCacheList}=require(_0x3bd2a8(0x1b8)),{makeBadge}=require('badge-maker'),{badgeConstants}=require(_0x3bd2a8(0x202)),{Prometheus}=require(_0x3bd2a8(0x1b0));let router=express['Router'](),cache=apicache[_0x3bd2a8(0x1e8)];const server=UptimeKumaServer[_0x3bd2a8(0x1e7)]();function _0x5976(_0x550203,_0xbf8481){const _0x1f18c0=_0x1f18();return _0x5976=function(_0x597674,_0x2a3cb2){_0x597674=_0x597674-0x16d;let _0x1f4eb7=_0x1f18c0[_0x597674];return _0x1f4eb7;},_0x5976(_0x550203,_0xbf8481);}function _0x1f18(){const _0x57349e=['defaultPingLabelSuffix','gtQrj','heartbeat','calcUptime','QRgzy','PdSwi','getPreviousHeartbeat','/api/badge/:id/ping/:duration?','Cert\x20Exp.','defaultPingColor','duration','QotGj','N/A','defaultUptimeLabelSuffix','GmBbM','defaultCertExpireWarnDays','bVCbO','PQdyW','4xBCqsa','query','isImportantBeat','defaultStyle','5271576HqFfVU','huAWy','json','49EYSGpj','send','trustProxy','bkOZL','mWOMT','YAQUp','getInstance','middleware','TBsIB','isImportantForNotification','hMZUT','entryPage','WsSAG','monitor','get','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20monitor_group.monitor_id\x20FROM\x20monitor_group,\x20`group`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20monitor_group.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','zJbVA','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20AVG(ping)\x20FROM\x20monitor_group,\x20`group`,\x20heartbeat\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.time\x20>\x20DATETIME(\x27now\x27,\x20?\x20||\x20\x27\x20hours\x27)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.ping\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','monitor_id\x20=\x20?','date','Ldqqj','nEmvh','NVYnG','color','AqvGk','exports','clearCache','isUpsideDown','6999480kRhAtK','monitor_id','status','pJJCQ','defaultUpColor','../config','statusPageSlug','wcXXA','xebfF','headers','Current\x20Status:\x20','hUxCv','mtejT','Pending','No/Bad\x20Cert','info_json','pwgzC','CYJSf','20536400bukmQW','msg','defaultCertExpValueSuffix','user_id','valid','4KfEmug','vukmE','/api/badge/:id/response','monitor_tls_info','VTxdU','toPrecision','defaultDownColor','OOwXm','defaultUptimeValueSuffix','5\x20minutes','yTjot','isUnderMaintenance','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20AVG(ping)\x20FROM\x20monitor_group,\x20`group`,\x20heartbeat\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.time\x20>\x20DATETIME(\x27now\x27,\x20?\x20||\x20\x27\x20hours\x27)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.ping\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20heartbeat.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','domainMappingList','/api/entry-page','important','Ultta','LlIhT','Monitor\x20not\x20found\x20or\x20not\x20active.','message','pVABW','mpqWi','nxjbo','geLEM','uNydb','parse','dptUP','../model/status_page','router','PmeRy','cmHwQ','min','gYuAu','yRENE','LGAtR','QegZW','getCell','defaultWarnColor','certInfo','VWDYU','dVoig','/api/badge/:id/avg-response/:duration?','daysRemaining','statusPageMatchedDomain','xaptA','utc','type','iNfXK','rWIyw','Avg.\x20Ping\x20(','ping','store','findOne','raFpr','x-forwarded-host','VTgOP','tluyF','yjNrs','hostname','Status','yWOdi','CqdcO','WdPzf','twEfW','second','iAzrQ','SgqCn','/api/push/\x20called\x20at\x20','/api/badge/:id/uptime/:duration?','naColor','labelColor','OvRSQ','defaultPingValueSuffix','UZtNC','whsnt','SQsGC','redbean-node','getRow','fLMeA','express','7498485OJjvxs','FwFMC','../../src/util','../util-server','GwQBJ','xJWfF','defaultMaintenanceColor','PreviousStatus:\x20','825813MVPwND','zkpHu','sXMzF','../prometheus','953081xPtyen','emit','pushToken','defaultPendingColor','zHLtE','COeDL','dayjs','../uptime-cache-list','debug','validTo','LIIJE','CANKf','params','OMTwe','image/svg+xml','Uptime\x20(','time','format','1136388lqUJRF','Bad\x20Cert','YgdbW','label','rqFhl'];_0x1f18=function(){return _0x57349e;};return _0x1f18();}let io=server['io'];router[_0x3bd2a8(0x1ef)](_0x3bd2a8(0x222),async(_0x1a3b4c,_0x5b3581)=>{const _0x1a130c=_0x3bd2a8,_0x520c6a={'uNydb':function(_0x477414,_0x497461){return _0x477414(_0x497461);},'twEfW':_0x1a130c(0x1e3),'Ldqqj':_0x1a130c(0x18b),'lTrAV':function(_0x53f529,_0x1ee2c1){return _0x53f529 in _0x1ee2c1;},'QegZW':_0x1a130c(0x1ec)};_0x520c6a[_0x1a130c(0x16d)](allowDevAllOrigin,_0x5b3581);let _0x52c2b8={},_0x18d00e=_0x1a3b4c[_0x1a130c(0x18f)];await setting(_0x520c6a[_0x1a130c(0x194)])&&_0x1a3b4c[_0x1a130c(0x206)][_0x520c6a[_0x1a130c(0x1f5)]]&&(_0x18d00e=_0x1a3b4c[_0x1a130c(0x206)][_0x520c6a[_0x1a130c(0x1f5)]]),_0x520c6a['lTrAV'](_0x18d00e,StatusPage[_0x1a130c(0x221)])?(_0x52c2b8[_0x1a130c(0x183)]=_0x1a130c(0x180),_0x52c2b8[_0x1a130c(0x203)]=StatusPage[_0x1a130c(0x221)][_0x18d00e]):(_0x52c2b8[_0x1a130c(0x183)]=_0x520c6a[_0x1a130c(0x178)],_0x52c2b8[_0x1a130c(0x1ec)]=server['entryPage']),_0x5b3581[_0x1a130c(0x1e0)](_0x52c2b8);}),router[_0x3bd2a8(0x1ef)]('/api/push/:pushToken',async(_0x38c33e,_0x43934b)=>{const _0x3878ea=_0x3bd2a8,_0x20094d={'PdSwi':function(_0x2ed90c,_0x5139ee){return _0x2ed90c>_0x5139ee;},'pVABW':function(_0x1a130f,_0x2de626){return _0x1a130f??_0x2de626;},'Ultta':_0x3878ea(0x1d0),'OvRSQ':function(_0x1fdfec,_0xbc1047){return _0x1fdfec===_0xbc1047;},'AnnwT':'\x20push_token\x20=\x20?\x20AND\x20active\x20=\x201\x20','zHLtE':function(_0x4f40a8,_0x381c60){return _0x4f40a8(_0x381c60);},'bkOZL':function(_0x32a559,_0x449e0f){return _0x32a559(_0x449e0f);},'VTgOP':'Monitor\x20under\x20maintenance','sXMzF':_0x3878ea(0x171),'iAzrQ':function(_0x35f1de){return _0x35f1de();},'igOdQ':function(_0x30dea6,_0x570e1d){return _0x30dea6+_0x570e1d;},'xaptA':_0x3878ea(0x1ac),'CYJSf':_0x3878ea(0x1ca)};try{if(_0x20094d[_0x3878ea(0x19c)](_0x3878ea(0x192),_0x3878ea(0x192))){let _0x1e01e2=_0x38c33e[_0x3878ea(0x1bd)][_0x3878ea(0x1b3)],_0x385cc4=_0x38c33e[_0x3878ea(0x1db)][_0x3878ea(0x210)]||'OK',_0x1771c1=parseFloat(_0x38c33e[_0x3878ea(0x1db)][_0x3878ea(0x187)])||null,_0x5371ee=_0x38c33e[_0x3878ea(0x1db)]['status']||'up',_0x510fac=_0x20094d[_0x3878ea(0x19c)](_0x5371ee,'up')?UP:DOWN,_0x279354=await R['findOne'](_0x3878ea(0x1ee),_0x20094d['AnnwT'],[_0x1e01e2]);if(!_0x279354)throw new Error(_0x3878ea(0x226));const _0x33095e=await Monitor['getPreviousHeartbeat'](_0x279354['id']);_0x279354[_0x3878ea(0x1fc)]()&&(_0x510fac=flipStatus(_0x510fac));let _0x15a355=!![],_0x3231c5=_0x510fac,_0x59bfba=0x0,_0x2163a1=R['dispense'](_0x3878ea(0x1ca));_0x2163a1[_0x3878ea(0x1c1)]=R['isoDateTimeMillis'](dayjs[_0x3878ea(0x182)]()),_0x33095e&&(_0x15a355=![],_0x3231c5=_0x33095e[_0x3878ea(0x1ff)],_0x59bfba=_0x20094d[_0x3878ea(0x1b5)](dayjs,_0x2163a1['time'])['diff'](_0x20094d[_0x3878ea(0x1e4)](dayjs,_0x33095e[_0x3878ea(0x1c1)]),_0x3878ea(0x195))),await Monitor[_0x3878ea(0x21f)](_0x279354['id'])&&(_0x385cc4=_0x20094d[_0x3878ea(0x18c)],_0x510fac=MAINTENANCE),log[_0x3878ea(0x1b9)](_0x20094d[_0x3878ea(0x1af)],_0x3878ea(0x198)+_0x20094d[_0x3878ea(0x196)](dayjs)[_0x3878ea(0x1c2)]('YYYY-MM-DD\x20HH:mm:ss.SSS')),log[_0x3878ea(0x1b9)](_0x20094d[_0x3878ea(0x1af)],_0x20094d['igOdQ'](_0x20094d[_0x3878ea(0x181)],_0x3231c5)),log[_0x3878ea(0x1b9)](_0x20094d[_0x3878ea(0x1af)],_0x3878ea(0x207)+_0x510fac),_0x2163a1[_0x3878ea(0x223)]=Monitor[_0x3878ea(0x1dc)](_0x15a355,_0x3231c5,_0x510fac),_0x2163a1[_0x3878ea(0x1fe)]=_0x279354['id'],_0x2163a1['status']=_0x510fac,_0x2163a1[_0x3878ea(0x210)]=_0x385cc4,_0x2163a1[_0x3878ea(0x187)]=_0x1771c1,_0x2163a1[_0x3878ea(0x1d2)]=_0x59bfba,await R[_0x3878ea(0x188)](_0x2163a1),io['to'](_0x279354[_0x3878ea(0x212)])[_0x3878ea(0x1b2)](_0x20094d[_0x3878ea(0x20e)],_0x2163a1['toJSON']()),UptimeCacheList[_0x3878ea(0x1fb)](_0x279354['id']),Monitor['sendStats'](io,_0x279354['id'],_0x279354['user_id']),new Prometheus(_0x279354)['update'](_0x2163a1,undefined),_0x43934b['json']({'ok':!![]}),Monitor[_0x3878ea(0x1ea)](_0x15a355,_0x3231c5,_0x510fac)&&await Monitor['sendNotification'](_0x15a355,_0x279354,_0x2163a1);}else{const _0x2b6e14=_0x1ba661(_0x2ed0c1??_0x41012c[_0x3878ea(0x17b)][_0x3878ea(0x17f)]);if(_0x2b6e14>_0x1b51e7)_0x5723e8[_0x3878ea(0x1f8)]=_0x3a7df6;else _0x20094d[_0x3878ea(0x1cd)](_0x2b6e14,_0x53512f)?_0x2d6e57[_0x3878ea(0x1f8)]=_0x5c07cb:_0x1969d0[_0x3878ea(0x1f8)]=_0x19db9e;_0x41887c[_0x3878ea(0x19b)]=_0x20094d[_0x3878ea(0x228)](_0x5736fe,''),_0x1f082b[_0x3878ea(0x1c6)]=_0x760295([_0x56b472,_0x3fff2a??_0x20094d[_0x3878ea(0x224)],_0x1e28c1]),_0x39b190['message']=_0xb37b61([_0x2571c4,_0x3980b3?_0x1cfca4['certInfo'][_0x3878ea(0x1ba)]:_0x2b6e14,_0x2e4813]);}}catch(_0x50ff57){_0x43934b['status'](0x194)[_0x3878ea(0x1e0)]({'ok':![],'msg':_0x50ff57[_0x3878ea(0x227)]});}}),router['get']('/api/badge/:id/status',cache(_0x3bd2a8(0x21d)),async(_0x4f96dc,_0x42111a)=>{const _0x1a494a=_0x3bd2a8,_0x43b739={'VTxdU':function(_0x38ecec,_0x46b0b8){return _0x38ecec(_0x46b0b8);},'CANKf':'Down','YFCXi':'Maintenance','dVoig':'N/A','nEmvh':function(_0x9584b4,_0x58de45){return _0x9584b4===_0x58de45;},'GmBbM':_0x1a494a(0x1ae),'TBsIB':function(_0x7e3b52,_0x59f506,_0x30e24c){return _0x7e3b52(_0x59f506,_0x30e24c);}};_0x43b739[_0x1a494a(0x218)](allowAllOrigin,_0x42111a);const {label:_0x542cb0,upLabel:upLabel='Up',downLabel:downLabel=_0x43b739[_0x1a494a(0x1bc)],pendingLabel:pendingLabel=_0x1a494a(0x20a),maintenanceLabel:maintenanceLabel=_0x43b739['YFCXi'],upColor:upColor=badgeConstants[_0x1a494a(0x201)],downColor:downColor=badgeConstants[_0x1a494a(0x21a)],pendingColor:pendingColor=badgeConstants[_0x1a494a(0x1b4)],maintenanceColor:maintenanceColor=badgeConstants[_0x1a494a(0x1ab)],style:style=badgeConstants[_0x1a494a(0x1dd)],value:_0x45d175}=_0x4f96dc[_0x1a494a(0x1db)];try{const _0x552517=parseInt(_0x4f96dc[_0x1a494a(0x1bd)]['id'],0xa),_0x312e3c=_0x45d175!==undefined?parseInt(_0x45d175):undefined;let _0x4cbed4=await R['getRow'](_0x1a494a(0x1f0),[_0x552517]);const _0x486656={'style':style};if(!_0x4cbed4)_0x486656[_0x1a494a(0x227)]=_0x1a494a(0x1d4),_0x486656['color']=badgeConstants[_0x1a494a(0x19a)];else{const _0x59d6a7=await Monitor[_0x1a494a(0x1ce)](_0x552517),_0xe9c467=_0x312e3c!==undefined?_0x312e3c:_0x59d6a7[_0x1a494a(0x1ff)];_0x542cb0===undefined?_0x486656['label']=_0x1a494a(0x190):_0x486656[_0x1a494a(0x1c6)]=_0x542cb0;switch(_0xe9c467){case DOWN:_0x486656[_0x1a494a(0x1f8)]=downColor,_0x486656[_0x1a494a(0x227)]=downLabel;break;case UP:_0x486656[_0x1a494a(0x1f8)]=upColor,_0x486656[_0x1a494a(0x227)]=upLabel;break;case PENDING:_0x486656[_0x1a494a(0x1f8)]=pendingColor,_0x486656[_0x1a494a(0x227)]=pendingLabel;break;case MAINTENANCE:_0x486656[_0x1a494a(0x1f8)]=maintenanceColor,_0x486656['message']=maintenanceLabel;break;default:_0x486656[_0x1a494a(0x1f8)]=badgeConstants[_0x1a494a(0x19a)],_0x486656[_0x1a494a(0x227)]=_0x43b739[_0x1a494a(0x17d)];}}const _0x230b4f=_0x43b739[_0x1a494a(0x218)](makeBadge,_0x486656);_0x42111a[_0x1a494a(0x183)](_0x1a494a(0x1bf)),_0x42111a[_0x1a494a(0x1e2)](_0x230b4f);}catch(_0x302d24){_0x43b739[_0x1a494a(0x1f6)](_0x43b739[_0x1a494a(0x1d6)],_0x43b739[_0x1a494a(0x1d6)])?_0x43b739[_0x1a494a(0x1e9)](sendHttpError,_0x42111a,_0x302d24[_0x1a494a(0x227)]):_0x5571c2(_0x1e10e3,_0x23ce40['message']);}}),router[_0x3bd2a8(0x1ef)](_0x3bd2a8(0x199),cache(_0x3bd2a8(0x21d)),async(_0x3ce742,_0x1bdc92)=>{const _0x1d6b27=_0x3bd2a8,_0x8de645={'WsSAG':function(_0x5ebb94,_0x1771e5){return _0x5ebb94(_0x1771e5);},'fLUWh':function(_0x1ef51c,_0x3d1b11){return _0x1ef51c!==_0x3d1b11;},'yjNrs':function(_0x4ccb6f,_0x3e430b){return _0x4ccb6f!==_0x3e430b;},'tluyF':_0x1d6b27(0x16f),'SQsGC':function(_0x36141e,_0x372c8a){return _0x36141e*_0x372c8a;},'geLEM':function(_0x9f25dd,_0x3d02ee){return _0x9f25dd(_0x3d02ee);},'hMZUT':_0x1d6b27(0x1bf),'CxvLP':function(_0x1e7fab,_0x4359e1,_0x15f725){return _0x1e7fab(_0x4359e1,_0x15f725);}};_0x8de645[_0x1d6b27(0x1ed)](allowAllOrigin,_0x1bdc92);const {label:_0x180f70,labelPrefix:_0x46c370,labelSuffix:labelSuffix=badgeConstants[_0x1d6b27(0x1d5)],prefix:_0x30189b,suffix:suffix=badgeConstants[_0x1d6b27(0x21c)],color:_0x6ed3d6,labelColor:_0x48e319,style:style=badgeConstants['defaultStyle'],value:_0x52ea51}=_0x3ce742[_0x1d6b27(0x1db)];try{const _0x196133=parseInt(_0x3ce742[_0x1d6b27(0x1bd)]['id'],0xa),_0x449e15=_0x8de645['fLUWh'](_0x3ce742[_0x1d6b27(0x1bd)][_0x1d6b27(0x1d2)],undefined)?parseInt(_0x3ce742['params'][_0x1d6b27(0x1d2)],0xa):0x18,_0x15e090=_0x52ea51&&_0x8de645['WsSAG'](parseFloat,_0x52ea51);let _0x32df00=await R[_0x1d6b27(0x1a2)](_0x1d6b27(0x1f0),[_0x196133]);const _0xf1174a={'style':style};if(!_0x32df00)_0x8de645[_0x1d6b27(0x18e)](_0x8de645['tluyF'],_0x8de645[_0x1d6b27(0x18d)])?_0x1fa71f['color']=_0x1ae468:(_0xf1174a[_0x1d6b27(0x227)]=_0x1d6b27(0x1d4),_0xf1174a[_0x1d6b27(0x1f8)]=badgeConstants[_0x1d6b27(0x19a)]);else{const _0x1d65ae=_0x15e090??await Monitor[_0x1d6b27(0x1cb)](_0x449e15,_0x196133),_0x43e4a8=_0x8de645[_0x1d6b27(0x1a0)](_0x1d65ae,0x64)[_0x1d6b27(0x219)](0x4);_0xf1174a[_0x1d6b27(0x1f8)]=_0x6ed3d6??percentageToColor(_0x1d65ae),_0xf1174a['labelColor']=_0x48e319??'',_0xf1174a['label']=_0x8de645[_0x1d6b27(0x22b)](filterAndJoin,[_0x46c370,_0x180f70??_0x1d6b27(0x1c0)+_0x449e15+labelSuffix+')']),_0xf1174a[_0x1d6b27(0x227)]=_0x8de645['WsSAG'](filterAndJoin,[_0x30189b,_0x43e4a8,suffix]);}const _0x4d76c8=_0x8de645['geLEM'](makeBadge,_0xf1174a);_0x1bdc92[_0x1d6b27(0x183)](_0x8de645[_0x1d6b27(0x1eb)]),_0x1bdc92['send'](_0x4d76c8);}catch(_0x69a8ce){_0x8de645['CxvLP'](sendHttpError,_0x1bdc92,_0x69a8ce['message']);}}),router[_0x3bd2a8(0x1ef)](_0x3bd2a8(0x1cf),cache(_0x3bd2a8(0x21d)),async(_0x8b8252,_0x4c0945)=>{const _0x1f8f4c=_0x3bd2a8,_0x4b9188={'zJbVA':function(_0x2b01b6,_0x334596){return _0x2b01b6(_0x334596);},'OMTwe':function(_0x3fae18,_0x1587a9){return _0x3fae18!==_0x1587a9;},'LIIJE':_0x1f8f4c(0x172),'GwQBJ':function(_0x4f5b18,_0x23e1f2,_0x552a84){return _0x4f5b18(_0x23e1f2,_0x552a84);},'fLMeA':function(_0x51f633,_0x55b94b){return _0x51f633(_0x55b94b);},'gtQrj':function(_0x5ade43,_0x2f4649){return _0x5ade43(_0x2f4649);},'kPNZk':function(_0x4ae918,_0x1e24db){return _0x4ae918(_0x1e24db);},'pJJCQ':'image/svg+xml'};_0x4b9188[_0x1f8f4c(0x1f1)](allowAllOrigin,_0x4c0945);const {label:_0x392afe,labelPrefix:_0x4e0c66,labelSuffix:labelSuffix=badgeConstants[_0x1f8f4c(0x1c8)],prefix:_0x190ced,suffix:suffix=badgeConstants[_0x1f8f4c(0x19d)],color:color=badgeConstants[_0x1f8f4c(0x1d1)],labelColor:_0x3544fe,style:style=badgeConstants[_0x1f8f4c(0x1dd)],value:_0x391f6d}=_0x8b8252['query'];try{if(_0x4b9188[_0x1f8f4c(0x1be)](_0x1f8f4c(0x172),_0x4b9188[_0x1f8f4c(0x1bb)]))_0x49183b[_0x1f8f4c(0x1ff)](0x194)[_0x1f8f4c(0x1e0)]({'ok':![],'msg':_0x153131[_0x1f8f4c(0x227)]});else{const _0x3e77a0=parseInt(_0x8b8252[_0x1f8f4c(0x1bd)]['id'],0xa),_0x4502ca=Math[_0x1f8f4c(0x174)](_0x8b8252[_0x1f8f4c(0x1bd)]['duration']?_0x4b9188[_0x1f8f4c(0x1a9)](parseInt,_0x8b8252['params'][_0x1f8f4c(0x1d2)],0xa):0x18,0x2d0),_0x570d9d=_0x391f6d&&parseFloat(_0x391f6d),_0x3c1870=_0x4b9188[_0x1f8f4c(0x1f1)](parseInt,await R['getCell'](_0x1f8f4c(0x1f2),[-_0x4502ca,_0x3e77a0])),_0x4a5eaa={'style':style};if(!_0x3c1870)_0x4a5eaa[_0x1f8f4c(0x227)]='N/A',_0x4a5eaa[_0x1f8f4c(0x1f8)]=badgeConstants[_0x1f8f4c(0x19a)];else{const _0x2adc14=_0x4b9188[_0x1f8f4c(0x1a3)](parseInt,_0x570d9d??_0x3c1870);_0x4a5eaa[_0x1f8f4c(0x1f8)]=color,_0x4a5eaa[_0x1f8f4c(0x19b)]=_0x3544fe??'',_0x4a5eaa[_0x1f8f4c(0x1c6)]=_0x4b9188[_0x1f8f4c(0x1c9)](filterAndJoin,[_0x4e0c66,_0x392afe??_0x1f8f4c(0x186)+_0x4502ca+labelSuffix+')']),_0x4a5eaa[_0x1f8f4c(0x227)]=_0x4b9188['kPNZk'](filterAndJoin,[_0x190ced,_0x2adc14,suffix]);}const _0x1360fa=makeBadge(_0x4a5eaa);_0x4c0945[_0x1f8f4c(0x183)](_0x4b9188[_0x1f8f4c(0x200)]),_0x4c0945[_0x1f8f4c(0x1e2)](_0x1360fa);}}catch(_0xa7c6f5){sendHttpError(_0x4c0945,_0xa7c6f5[_0x1f8f4c(0x227)]);}}),router['get'](_0x3bd2a8(0x17e),cache(_0x3bd2a8(0x21d)),async(_0x45678a,_0x57203e)=>{const _0x2bae58=_0x3bd2a8,_0x408055={'xebfF':function(_0x3404cc,_0x548763,_0x25f635){return _0x3404cc(_0x548763,_0x25f635);},'yRENE':function(_0x37a6d1,_0x10d8ad){return _0x37a6d1(_0x10d8ad);},'wcXXA':function(_0x5e3d2c,_0x94eb6e){return _0x5e3d2c??_0x94eb6e;},'QRgzy':'Response','iNfXK':function(_0x219961,_0x54e8e7){return _0x219961(_0x54e8e7);},'iJcVN':function(_0x2fec06,_0x22e6ac){return _0x2fec06===_0x22e6ac;},'xJWfF':_0x2bae58(0x1b6),'whsnt':_0x2bae58(0x1a6),'AhhpK':_0x2bae58(0x1d4),'YAQUp':function(_0x5c12b4,_0xaccd39){return _0x5c12b4!==_0xaccd39;},'mpqWi':_0x2bae58(0x209),'lywwZ':function(_0xf04ecd,_0x32b073){return _0xf04ecd(_0x32b073);},'WAGJi':_0x2bae58(0x1bf),'UZtNC':function(_0x3862b9,_0x2b290a,_0x516d17){return _0x3862b9(_0x2b290a,_0x516d17);}};_0x408055[_0x2bae58(0x184)](allowAllOrigin,_0x57203e);const {label:_0x4706cb,labelPrefix:_0x29f88c,labelSuffix:_0x55d3b1,prefix:_0x2b386d,suffix:suffix=badgeConstants['defaultPingValueSuffix'],color:color=badgeConstants['defaultPingColor'],labelColor:_0x5a9600,style:style=badgeConstants[_0x2bae58(0x1dd)],value:_0x507b6d}=_0x45678a[_0x2bae58(0x1db)];try{if(_0x408055['iJcVN'](_0x408055[_0x2bae58(0x1aa)],_0x408055[_0x2bae58(0x19f)]))_0xd24cf7(_0x181eae,_0x3d685c[_0x2bae58(0x227)]);else{const _0x156d67=parseInt(_0x45678a['params']['id'],0xa),_0x97bd59=Math['min'](_0x45678a[_0x2bae58(0x1bd)]['duration']?_0x408055[_0x2bae58(0x205)](parseInt,_0x45678a[_0x2bae58(0x1bd)][_0x2bae58(0x1d2)],0xa):0x18,0x2d0),_0x3f0e74=_0x507b6d&&parseFloat(_0x507b6d),_0xf43175=parseInt(await R[_0x2bae58(0x179)](_0x2bae58(0x220),[-_0x97bd59,_0x156d67])),_0x5c58f9={'style':style};if(!_0xf43175)_0x5c58f9[_0x2bae58(0x227)]=_0x408055['AhhpK'],_0x5c58f9[_0x2bae58(0x1f8)]=badgeConstants[_0x2bae58(0x19a)];else{if(_0x408055[_0x2bae58(0x1e6)](_0x408055[_0x2bae58(0x229)],'Otlsh')){const _0x52fa7f=_0x408055['lywwZ'](parseInt,_0x408055[_0x2bae58(0x204)](_0x3f0e74,_0xf43175));_0x5c58f9['color']=color,_0x5c58f9['labelColor']=_0x5a9600??'',_0x5c58f9[_0x2bae58(0x1c6)]=filterAndJoin([_0x29f88c,_0x4706cb??'Avg.\x20Response\x20('+_0x97bd59+'h)',_0x55d3b1]),_0x5c58f9[_0x2bae58(0x227)]=filterAndJoin([_0x2b386d,_0x52fa7f,suffix]);}else _0x408055[_0x2bae58(0x205)](_0x47c517,_0x3365f1,_0x690e89[_0x2bae58(0x227)]);}const _0x43924a=_0x408055['yRENE'](makeBadge,_0x5c58f9);_0x57203e[_0x2bae58(0x183)](_0x408055['WAGJi']),_0x57203e[_0x2bae58(0x1e2)](_0x43924a);}}catch(_0x3a8e80){if(_0x2bae58(0x1d3)===_0x2bae58(0x1d3))_0x408055[_0x2bae58(0x19e)](sendHttpError,_0x57203e,_0x3a8e80[_0x2bae58(0x227)]);else{const _0x5aa949=_0x20d247(_0xe27f18??_0x58ef38[_0x2bae58(0x187)]);_0x10bdce[_0x2bae58(0x1f8)]=_0x41fb8c,_0x3a13a9[_0x2bae58(0x19b)]=_0x3dcc32??'',_0x4b1888[_0x2bae58(0x1c6)]=_0x408055[_0x2bae58(0x176)](_0x194d03,[_0x41db10,_0x408055[_0x2bae58(0x204)](_0x11204e,_0x408055[_0x2bae58(0x1cc)]),_0x29d9df]),_0x812005[_0x2bae58(0x227)]=_0x1d2bee([_0x2a511d,_0x5aa949,_0x44b075]);}}}),router[_0x3bd2a8(0x1ef)]('/api/badge/:id/cert-exp',cache('5\x20minutes'),async(_0x159bd9,_0x5827aa)=>{const _0x4fa94e=_0x3bd2a8,_0xb379ce={'zzfJZ':_0x4fa94e(0x1c4),'VWDYU':function(_0x4d3623,_0x2e214f,_0x488278){return _0x4d3623(_0x2e214f,_0x488278);},'AqvGk':function(_0x298942,_0x48dc2b){return _0x298942(_0x48dc2b);},'raFpr':_0x4fa94e(0x1f3),'gYuAu':function(_0x5d1e59,_0x20f49d){return _0x5d1e59!==_0x20f49d;},'SqCTO':'huAWy','rqFhl':_0x4fa94e(0x173),'rWIyw':function(_0x59ee7d,_0x234bba){return _0x59ee7d(_0x234bba);},'YgdbW':function(_0x4ac22a,_0x52dc93){return _0x4ac22a??_0x52dc93;},'pwgzC':function(_0x20be21,_0x22d520){return _0x20be21(_0x22d520);}};_0xb379ce[_0x4fa94e(0x1f9)](allowAllOrigin,_0x5827aa);const _0x12a033=_0x159bd9[_0x4fa94e(0x1db)][_0x4fa94e(0x1f4)],{label:_0x507c0f,labelPrefix:_0x1b91c0,labelSuffix:_0x13fcb8,prefix:_0x2de332,suffix:suffix=_0x12a033?'':badgeConstants[_0x4fa94e(0x211)],upColor:upColor=badgeConstants['defaultUpColor'],warnColor:warnColor=badgeConstants[_0x4fa94e(0x17a)],downColor:downColor=badgeConstants[_0x4fa94e(0x21a)],warnDays:warnDays=badgeConstants[_0x4fa94e(0x1d7)],downDays:downDays=badgeConstants['defaultCertExpireDownDays'],labelColor:_0x2f752c,style:style=badgeConstants[_0x4fa94e(0x1dd)],value:_0x52b013}=_0x159bd9[_0x4fa94e(0x1db)];try{if(_0x4fa94e(0x1f7)===_0x4fa94e(0x215))_0x2668e1[_0x4fa94e(0x227)]=_0xb379ce['zzfJZ'],_0x1017f9[_0x4fa94e(0x1f8)]=_0x18cc2a;else{const _0x171dc3=_0xb379ce[_0x4fa94e(0x17c)](parseInt,_0x159bd9[_0x4fa94e(0x1bd)]['id'],0xa),_0x35d001=_0x52b013&&parseFloat(_0x52b013);let _0x1d5aee=await R[_0x4fa94e(0x1a2)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20monitor_group.monitor_id\x20FROM\x20monitor_group,\x20`group`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20monitor_group.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',[_0x171dc3]);const _0x32379c={'style':style};if(!_0x1d5aee)_0x32379c[_0x4fa94e(0x227)]='N/A',_0x32379c['color']=badgeConstants['naColor'];else{const _0x2413bf=await R[_0x4fa94e(0x189)](_0x4fa94e(0x217),_0xb379ce[_0x4fa94e(0x18a)],[_0x171dc3]);if(!_0x2413bf)_0x32379c['message']=_0x4fa94e(0x20b),_0x32379c[_0x4fa94e(0x1f8)]=badgeConstants[_0x4fa94e(0x19a)];else{const _0x39ff21=JSON[_0x4fa94e(0x16e)](_0x2413bf[_0x4fa94e(0x20c)]);if(!_0x39ff21[_0x4fa94e(0x213)])_0x32379c[_0x4fa94e(0x227)]='Bad\x20Cert',_0x32379c[_0x4fa94e(0x1f8)]=downColor;else{if(_0xb379ce[_0x4fa94e(0x175)](_0x4fa94e(0x1df),_0xb379ce['SqCTO']))_0x494cbd[_0x4fa94e(0x1f8)]=_0x3c4c10;else{const _0x36f3fc=parseInt(_0x35d001??_0x39ff21[_0x4fa94e(0x17b)][_0x4fa94e(0x17f)]);if(_0x36f3fc>warnDays)_0xb379ce[_0x4fa94e(0x175)](_0xb379ce[_0x4fa94e(0x1c7)],_0x4fa94e(0x22a))?_0x32379c[_0x4fa94e(0x1f8)]=upColor:_0xb379ce[_0x4fa94e(0x17c)](_0x4bf1d0,_0x10f655,_0x205ca6[_0x4fa94e(0x227)]);else _0x36f3fc>downDays?_0x32379c[_0x4fa94e(0x1f8)]=warnColor:_0x32379c[_0x4fa94e(0x1f8)]=downColor;_0x32379c['labelColor']=_0x2f752c??'',_0x32379c['label']=_0xb379ce[_0x4fa94e(0x185)](filterAndJoin,[_0x1b91c0,_0xb379ce[_0x4fa94e(0x1c5)](_0x507c0f,_0x4fa94e(0x1d0)),_0x13fcb8]),_0x32379c[_0x4fa94e(0x227)]=filterAndJoin([_0x2de332,_0x12a033?_0x39ff21[_0x4fa94e(0x17b)][_0x4fa94e(0x1ba)]:_0x36f3fc,suffix]);}}}}const _0x58b984=_0xb379ce[_0x4fa94e(0x20d)](makeBadge,_0x32379c);_0x5827aa['type'](_0x4fa94e(0x1bf)),_0x5827aa[_0x4fa94e(0x1e2)](_0x58b984);}}catch(_0x4eb88b){_0xb379ce[_0x4fa94e(0x17c)](sendHttpError,_0x5827aa,_0x4eb88b[_0x4fa94e(0x227)]);}}),router[_0x3bd2a8(0x1ef)](_0x3bd2a8(0x216),cache(_0x3bd2a8(0x21d)),async(_0x5d11d7,_0x41a10e)=>{const _0x3552fb=_0x3bd2a8,_0x26f54c={'LlIhT':_0x3552fb(0x1d4),'PQdyW':function(_0x50db00,_0x1f1433){return _0x50db00===_0x1f1433;},'yTjot':'jTnnL','OOwXm':function(_0x9aff9e,_0x5758ee){return _0x9aff9e!==_0x5758ee;},'Rswwm':'WdPzf','yWOdi':function(_0x3de796,_0xd1630a){return _0x3de796??_0xd1630a;},'hUxCv':function(_0x188834,_0x3898b0){return _0x188834(_0x3898b0);},'SgqCn':'Response','bVCbO':_0x3552fb(0x1bf),'vYXmz':_0x3552fb(0x177),'mWOMT':function(_0x274f10,_0x523a2b,_0x59ad17){return _0x274f10(_0x523a2b,_0x59ad17);}};allowAllOrigin(_0x41a10e);const {label:_0x32aad0,labelPrefix:_0x326e6b,labelSuffix:_0x52cf30,prefix:_0x36ad11,suffix:suffix=badgeConstants[_0x3552fb(0x19d)],color:color=badgeConstants[_0x3552fb(0x1d1)],labelColor:_0x33e9ac,style:style=badgeConstants[_0x3552fb(0x1dd)],value:_0x2461f6}=_0x5d11d7['query'];try{const _0x209fa7=parseInt(_0x5d11d7['params']['id'],0xa),_0x578d8f=_0x2461f6&&parseFloat(_0x2461f6);let _0x57f739=await R[_0x3552fb(0x1a2)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20monitor_group.monitor_id\x20FROM\x20monitor_group,\x20`group`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20monitor_group.group_id\x20=\x20`group`.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20monitor_group.monitor_id\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20public\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',[_0x209fa7]);const _0x1cde37={'style':style};if(!_0x57f739)_0x1cde37[_0x3552fb(0x227)]=_0x26f54c[_0x3552fb(0x225)],_0x1cde37[_0x3552fb(0x1f8)]=badgeConstants[_0x3552fb(0x19a)];else{if(_0x26f54c[_0x3552fb(0x1d9)](_0x26f54c[_0x3552fb(0x21e)],_0x26f54c[_0x3552fb(0x21e)])){const _0x57a27c=await Monitor[_0x3552fb(0x1ce)](_0x209fa7);if(!_0x57a27c[_0x3552fb(0x187)])_0x26f54c[_0x3552fb(0x21b)](_0x3552fb(0x193),_0x26f54c['Rswwm'])?(_0x45de80[_0x3552fb(0x227)]=_0x3552fb(0x20b),_0x53fe16[_0x3552fb(0x1f8)]=_0x23860c[_0x3552fb(0x19a)]):(_0x1cde37[_0x3552fb(0x227)]=_0x3552fb(0x1d4),_0x1cde37[_0x3552fb(0x1f8)]=badgeConstants['naColor']);else{const _0x230b14=parseInt(_0x578d8f??_0x57a27c[_0x3552fb(0x187)]);_0x1cde37[_0x3552fb(0x1f8)]=color,_0x1cde37[_0x3552fb(0x19b)]=_0x26f54c[_0x3552fb(0x191)](_0x33e9ac,''),_0x1cde37[_0x3552fb(0x1c6)]=_0x26f54c[_0x3552fb(0x208)](filterAndJoin,[_0x326e6b,_0x32aad0??_0x26f54c[_0x3552fb(0x197)],_0x52cf30]),_0x1cde37['message']=filterAndJoin([_0x36ad11,_0x230b14,suffix]);}}else _0x915835[_0x3552fb(0x227)]=_0x3552fb(0x1d4),_0x1d3462[_0x3552fb(0x1f8)]=_0x239939[_0x3552fb(0x19a)];}const _0x186b4b=makeBadge(_0x1cde37);_0x41a10e[_0x3552fb(0x183)](_0x26f54c[_0x3552fb(0x1d8)]),_0x41a10e[_0x3552fb(0x1e2)](_0x186b4b);}catch(_0x35992c){_0x3552fb(0x177)!==_0x26f54c['vYXmz']?_0x1580fe=_0x49a435['headers'][_0x3552fb(0x18b)]:_0x26f54c[_0x3552fb(0x1e5)](sendHttpError,_0x41a10e,_0x35992c[_0x3552fb(0x227)]);}}),module[_0x3bd2a8(0x1fa)]=router;