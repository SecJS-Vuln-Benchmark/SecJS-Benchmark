const _0x1b3798=_0x30e7;(function(_0x416f1a,_0x5892e1){const _0x2e5018=_0x30e7,_0x1ef2a9=_0x416f1a();while(!![]){try{const _0x572d7e=-parseInt(_0x2e5018(0x9b))/0x1+-parseInt(_0x2e5018(0x7d))/0x2*(-parseInt(_0x2e5018(0xcd))/0x3)+-parseInt(_0x2e5018(0xb2))/0x4+parseInt(_0x2e5018(0xa9))/0x5*(-parseInt(_0x2e5018(0x8c))/0x6)+-parseInt(_0x2e5018(0xa5))/0x7*(-parseInt(_0x2e5018(0x7f))/0x8)+-parseInt(_0x2e5018(0x77))/0x9+parseInt(_0x2e5018(0xe0))/0xa*(parseInt(_0x2e5018(0x79))/0xb);if(_0x572d7e===_0x5892e1)break;else _0x1ef2a9['push'](_0x1ef2a9['shift']());}catch(_0x5276a8){_0x1ef2a9['push'](_0x1ef2a9['shift']());}}}(_0x2155,0x3879d));const {MonitorType}=require('./monitor-type'),{chromium}=require(_0x1b3798(0xab)),{UP,log}=require(_0x1b3798(0xbd)),{Settings}=require(_0x1b3798(0x89)),commandExistsSync=require(_0x1b3798(0x82))[_0x1b3798(0xa6)],childProcess=require('child_process'),path=require('path'),Database=require(_0x1b3798(0xb8)),jwt=require('jsonwebtoken'),config=require(_0x1b3798(0xc2));let browser=null,allowedList=[],lastAutoDetectChromeExecutable=null;if(process[_0x1b3798(0xb1)]===_0x1b3798(0x86)){allowedList[_0x1b3798(0x7a)](process[_0x1b3798(0xcf)][_0x1b3798(0x8f)]+_0x1b3798(0xa8)),allowedList[_0x1b3798(0x7a)](process['env']['PROGRAMFILES']+_0x1b3798(0xa8)),allowedList[_0x1b3798(0x7a)](process['env']['ProgramFiles(x86)']+_0x1b3798(0xa8)),allowedList['push'](process[_0x1b3798(0xcf)][_0x1b3798(0x8f)]+'\x5cChromium\x5cApplication\x5cchrome.exe'),allowedList[_0x1b3798(0x7a)](process[_0x1b3798(0xcf)]['PROGRAMFILES']+'\x5cChromium\x5cApplication\x5cchrome.exe'),allowedList[_0x1b3798(0x7a)](process['env'][_0x1b3798(0x8a)]+_0x1b3798(0x9d));for(let i=0x41;i<=0x5a;i++){let drive=String[_0x1b3798(0xf5)](i);allowedList[_0x1b3798(0x7a)](drive+_0x1b3798(0x92)),allowedList[_0x1b3798(0x7a)](drive+':\x5cProgram\x20Files\x20(x86)\x5cGoogle\x5cChrome\x5cApplication\x5cchrome.exe');}}else{if(process['platform']===_0x1b3798(0xa3))allowedList=[_0x1b3798(0xd9),_0x1b3798(0xcc),_0x1b3798(0xb6),_0x1b3798(0x96),_0x1b3798(0xbe),_0x1b3798(0xb3),_0x1b3798(0xcb)];else process[_0x1b3798(0xb1)]===_0x1b3798(0xe8)&&(allowedList=[_0x1b3798(0xb4),_0x1b3798(0xdb)]);}log[_0x1b3798(0x85)](_0x1b3798(0xe6),allowedList);function _0x30e7(_0x52e51b,_0x459b9d){const _0x2155c7=_0x2155();return _0x30e7=function(_0x30e7a9,_0x3927bf){_0x30e7a9=_0x30e7a9-0x77;let _0xec363c=_0x2155c7[_0x30e7a9];return _0xec363c;},_0x30e7(_0x52e51b,_0x459b9d);}async function isAllowedChromeExecutable(_0x309e09){const _0x1bdcb8=_0x1b3798,_0x2f3f71={'jfhpx':function(_0x4ac860,_0x2a04d6){return _0x4ac860===_0x2a04d6;}};console['log'](config[_0x1bdcb8(0xf0)]);if(config[_0x1bdcb8(0xf0)]['allow-all-chrome-exec']||_0x2f3f71['jfhpx'](process['env'][_0x1bdcb8(0xd2)],'1'))return!![];return allowedList[_0x1bdcb8(0xec)](_0x309e09);}async function getBrowser(){const _0x1e3201=_0x1b3798;if(browser&&browser[_0x1e3201(0x7c)]())return browser;else{if('xvipu'!==_0x1e3201(0xf1))return _0x3dff5c=_0x2cfe2c,_0x376ff5;else{let _0x41f142=await Settings['get']('chromeExecutable');return _0x41f142=await prepareChromeExecutable(_0x41f142),browser=await chromium[_0x1e3201(0xaa)]({'executablePath':_0x41f142}),browser;}}}async function prepareChromeExecutable(_0x211f01){const _0x91cd5e=_0x1b3798,_0x1faec3={'RIeOD':_0x91cd5e(0x7e),'pcleG':'\x20--version','mpIxG':_0x91cd5e(0x78),'BsMza':function(_0x1de6a2,_0x5bbc45){return _0x1de6a2(_0x5bbc45);},'JXLMD':_0x91cd5e(0x93),'nNVKo':_0x91cd5e(0x84),'oQCnD':_0x91cd5e(0xed),'rdwqf':_0x91cd5e(0xaf),'KGxar':_0x91cd5e(0xb4),'XzyWZ':function(_0x9c585e,_0x2f5a4e){return _0x9c585e===_0x2f5a4e;},'plAHs':function(_0xcc1cfd,_0x38e1b3){return _0xcc1cfd===_0x38e1b3;},'hFjyN':'Fqres','MxKzk':'vgZTI','ZZEbE':'/usr/bin/chromium','VSjjY':_0x91cd5e(0xba),'xzalN':_0x91cd5e(0xce),'cBQkV':_0x91cd5e(0xc6)};if(_0x1faec3['XzyWZ'](typeof _0x211f01,'string')&&_0x1faec3[_0x91cd5e(0xe3)](_0x211f01[_0x91cd5e(0xeb)](),_0x91cd5e(0xac)))_0x211f01=undefined;else{if(!_0x211f01){if(_0x1faec3[_0x91cd5e(0xd7)]!==_0x1faec3[_0x91cd5e(0x90)]){if(process[_0x91cd5e(0xcf)][_0x91cd5e(0x80)]){if('oWbZH'!==_0x91cd5e(0x9e))_0x211f01=_0x1faec3[_0x91cd5e(0xf6)],!_0x1faec3[_0x91cd5e(0xd5)](commandExistsSync,_0x211f01)&&await new Promise((_0xe219f5,_0x1ab9d9)=>{const _0x4887e0=_0x91cd5e,_0x4c1997={'kDJbd':_0x1faec3[_0x4887e0(0xb0)],'mkLaw':_0x1faec3[_0x4887e0(0xe5)],'WZpGB':_0x4887e0(0xe2),'gyHdM':'Installing\x20Chromium,\x20please\x20wait...','jCljM':_0x1faec3['mpIxG'],'qUEUr':function(_0x1ab2ee,_0x1e4568){const _0xa33816=_0x4887e0;return _0x1faec3[_0xa33816(0xd5)](_0x1ab2ee,_0x1e4568);},'WTUNh':_0x1faec3[_0x4887e0(0xc7)]};log[_0x4887e0(0x81)](_0x4887e0(0x7e),_0x1faec3[_0x4887e0(0x9a)]);let _0xfbd2bf=childProcess[_0x4887e0(0x95)](_0x1faec3[_0x4887e0(0xf3)]);_0xfbd2bf['on']('exit',_0x15fd3d=>{const _0x23b5e7=_0x4887e0;log[_0x23b5e7(0x81)](_0x23b5e7(0x7e),_0x23b5e7(0xc0)+_0x15fd3d);if(_0x15fd3d===0x0){log[_0x23b5e7(0x81)](_0x4c1997[_0x23b5e7(0xe4)],_0x23b5e7(0xc4));let _0x3d58a2=childProcess[_0x23b5e7(0x8b)](_0x211f01+_0x4c1997['mkLaw'])['toString'](_0x4c1997[_0x23b5e7(0x91)]);log[_0x23b5e7(0x81)](_0x23b5e7(0x7e),_0x23b5e7(0xaf)+_0x3d58a2),_0xe219f5();}else{if(_0x15fd3d===0x64)_0x1ab9d9(new Error(_0x4c1997['gyHdM']));else{if('kBlzu'!==_0x4c1997[_0x23b5e7(0x98)])return!![];else _0x4c1997[_0x23b5e7(0xd4)](_0x1ab9d9,new Error(_0x4c1997[_0x23b5e7(0x8d)]+_0x15fd3d));}}});});else{_0x3c2937['info'](_0x1faec3[_0x91cd5e(0xb0)],_0x91cd5e(0xc4));let _0x5bf5b4=_0x16d776[_0x91cd5e(0x8b)](_0x228d65+_0x1faec3[_0x91cd5e(0xe5)])[_0x91cd5e(0xbf)](_0x91cd5e(0xe2));_0x3f6073[_0x91cd5e(0x81)](_0x91cd5e(0x7e),_0x1faec3[_0x91cd5e(0xa0)]+_0x5bf5b4),_0x50b0cd();}}else{if('VPmRc'===_0x1faec3[_0x91cd5e(0xbc)])throw new _0x35c59b(_0x42d9d5[_0x91cd5e(0xa2)]);else _0x211f01=_0x1faec3['BsMza'](findChrome,allowedList);}}else _0x132d91=[_0x1faec3['KGxar'],_0x91cd5e(0xdb)];}else{if(_0x1faec3[_0x91cd5e(0x8e)]!==_0x91cd5e(0x83)){if(!await isAllowedChromeExecutable(_0x211f01))throw new Error(_0x1faec3[_0x91cd5e(0xf4)]);}else return _0x362f76;}}return _0x211f01;}function findChrome(_0xd489a9){const _0x2ec2eb=_0x1b3798,_0x99b12d={'DrlEz':function(_0x1d8080,_0x4c6e01){return _0x1d8080(_0x4c6e01);},'jXnEO':function(_0x4e699f,_0x564fd7){return _0x4e699f(_0x564fd7);}};if(lastAutoDetectChromeExecutable){if(_0x99b12d[_0x2ec2eb(0xc8)](commandExistsSync,lastAutoDetectChromeExecutable)){if(_0x2ec2eb(0xd8)===_0x2ec2eb(0xea))_0x4871db=_0x28a871;else return lastAutoDetectChromeExecutable;}}for(let _0x2aa27b of _0xd489a9){if(_0x99b12d[_0x2ec2eb(0xb7)](commandExistsSync,_0x2aa27b))return lastAutoDetectChromeExecutable=_0x2aa27b,_0x2aa27b;}throw new Error(_0x2ec2eb(0xa7));}async function resetChrome(){const _0x2ef331=_0x1b3798;browser&&(await browser[_0x2ef331(0x87)](),browser=null);}async function testChrome(_0x3d478c){const _0x54951b=_0x1b3798,_0x5b2513={'IKyhU':_0x54951b(0x7e),'OYZvb':function(_0x344309,_0xe595b9){return _0x344309===_0xe595b9;},'SUzNp':_0x54951b(0xc4),'qnmWq':function(_0x43a2a2,_0x881fc8){return _0x43a2a2+_0x881fc8;},'YHaYY':_0x54951b(0xe2),'zbzIQ':'Chromium\x20version:\x20','CFqmG':function(_0x17ebf0){return _0x17ebf0();},'LHjci':function(_0x1abc78,_0x801752){return _0x1abc78===_0x801752;},'edIAC':function(_0x2e6975,_0x2c7081){return _0x2e6975(_0x2c7081);},'Ojuho':_0x54951b(0xa4),'ymIQK':function(_0x212a8d,_0x2b21fd){return _0x212a8d+_0x2b21fd;},'gfyHi':_0x54951b(0xe1)};try{_0x3d478c=await prepareChromeExecutable(_0x3d478c),log[_0x54951b(0x81)](_0x54951b(0x7e),'Testing\x20Chromium\x20executable:\x20'+_0x3d478c);const _0x2b4859=await chromium[_0x54951b(0xaa)]({'executablePath':_0x3d478c}),_0x192690=_0x2b4859[_0x54951b(0xe9)]();return await _0x2b4859['close'](),_0x192690;}catch(_0x3737d6){if(_0x5b2513['LHjci'](_0x5b2513[_0x54951b(0xb5)],_0x54951b(0xe1)))throw new Error(_0x3737d6[_0x54951b(0xa2)]);else{_0x5bcb5b[_0x54951b(0x81)](_0x5b2513[_0x54951b(0x97)],_0x54951b(0xc0)+_0x5374d6);if(_0x5b2513['OYZvb'](_0x1ce297,0x0)){_0xa0c576['info'](_0x5b2513[_0x54951b(0x97)],_0x5b2513[_0x54951b(0xf2)]);let _0x5eb233=_0x428970['execSync'](_0x5b2513[_0x54951b(0x7b)](_0x29316d,_0x54951b(0x88)))[_0x54951b(0xbf)](_0x5b2513[_0x54951b(0xd6)]);_0x276e1e[_0x54951b(0x81)](_0x54951b(0x7e),_0x5b2513[_0x54951b(0xc3)]+_0x5eb233),_0x5b2513['CFqmG'](_0x61894b);}else _0x5b2513[_0x54951b(0xc1)](_0x1ca569,0x64)?_0x5b2513['edIAC'](_0x586dda,new _0x5726e9(_0x5b2513[_0x54951b(0xde)])):_0x1432c7(new _0x1ddc67(_0x5b2513[_0x54951b(0xef)](_0x54951b(0x93),_0x2bfaef)));}}}class RealBrowserMonitorType extends MonitorType{[_0x1b3798(0x94)]=_0x1b3798(0xbb);async[_0x1b3798(0x99)](_0x4d6dc7,_0x2272fa,_0x4c256d){const _0x10e1be=_0x1b3798,_0x12dcef={'flYdq':function(_0x420753,_0x2bb485){return _0x420753+_0x2bb485;},'MvFMW':_0x10e1be(0xa1),'oVgNi':function(_0x288f38,_0x47d99c){return _0x288f38<_0x47d99c;}},_0x3ce2fe=await getBrowser(),_0xf1659c=await _0x3ce2fe[_0x10e1be(0xc9)](),_0x453de1=await _0xf1659c[_0x10e1be(0xae)](),_0x1ea885=await _0x453de1[_0x10e1be(0xb9)](_0x4d6dc7['url'],{'waitUntil':_0x10e1be(0xc5),'timeout':_0x4d6dc7[_0x10e1be(0xad)]*0x3e8*0.8});let _0x54ce13=_0x12dcef[_0x10e1be(0xdf)](jwt['sign'](_0x4d6dc7['id'],_0x4c256d[_0x10e1be(0xda)]),_0x12dcef[_0x10e1be(0x9f)]);await _0x453de1[_0x10e1be(0xdc)]({'path':path[_0x10e1be(0xe7)](Database[_0x10e1be(0xca)],_0x54ce13)}),await _0xf1659c[_0x10e1be(0x87)]();if(_0x1ea885[_0x10e1be(0xd3)]()>=0xc8&&_0x12dcef[_0x10e1be(0xd1)](_0x1ea885['status'](),0x190)){_0x2272fa[_0x10e1be(0xd3)]=UP,_0x2272fa['msg']=_0x1ea885['status']();const _0x3f4703=_0x1ea885[_0x10e1be(0xdd)]()['timing']();_0x2272fa[_0x10e1be(0xd0)]=_0x3f4703[_0x10e1be(0xee)];}else throw new Error(_0x1ea885['status']()+'');}}function _0x2155(){const _0x190abc=['oQCnD','cBQkV','fromCharCode','ZZEbE','2571228gVuGHl','kBlzu','74503szEFfJ','push','qnmWq','isConnected','4bTQulF','Chromium','32UPSUTU','UPTIME_KUMA_IS_CONTAINER','info','command-exists','nybpc','Installing\x20Chromium...','debug','win32','close','\x20--version','../settings','ProgramFiles(x86)','execSync','166884KYMXzH','WTUNh','xzalN','LOCALAPPDATA','MxKzk','WZpGB',':\x5cProgram\x20Files\x5cGoogle\x5cChrome\x5cApplication\x5cchrome.exe','apt\x20install\x20chromium\x20failed\x20with\x20code\x20','name','exec','/usr/bin/chromium','IKyhU','jCljM','check','nNVKo','44804ehPElA','exports','\x5cChromium\x5cApplication\x5cchrome.exe','ejpvY','MvFMW','rdwqf','.png','message','linux','Installing\x20Chromium,\x20please\x20wait...','587419GnHQzj','sync','Chromium\x20not\x20found,\x20please\x20specify\x20Chromium\x20executable\x20path\x20in\x20the\x20settings\x20page.','\x5cGoogle\x5cChrome\x5cApplication\x5cchrome.exe','60yWKAsE','launch','playwright-core','#playwright_chromium','interval','newPage','Chromium\x20version:\x20','RIeOD','platform','501124yzFdve','/usr/bin/google-chrome','/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome','gfyHi','google-chrome','jXnEO','../database','goto','jwBIG','real-browser','VSjjY','../../src/util','/usr/bin/chromium-browser','toString','apt\x20install\x20chromium\x20exited\x20with\x20code\x20','LHjci','../config','zbzIQ','Installed\x20Chromium','networkidle','This\x20Chromium\x20executable\x20path\x20is\x20not\x20allowed\x20by\x20default.\x20If\x20you\x20are\x20sure\x20this\x20is\x20safe,\x20please\x20add\x20an\x20environment\x20variable\x20UPTIME_KUMA_ALLOW_ALL_CHROME_EXEC=1\x20to\x20allow\x20it.','JXLMD','DrlEz','newContext','screenshotDir','/snap/bin/chromium','chromium-browser','641742CfEryd','mDjmI','env','ping','oVgNi','UPTIME_KUMA_ALLOW_ALL_CHROME_EXEC','status','qUEUr','BsMza','YHaYY','hFjyN','NHQql','chromium','jwtSecret','/Applications/Chromium.app/Contents/MacOS/Chromium','screenshot','request','Ojuho','flYdq','380SwiWYc','xyOyY','utf8','plAHs','kDJbd','pcleG','chrome','join','darwin','version','CXOUb','toLocaleLowerCase','includes','apt\x20update\x20&&\x20apt\x20--yes\x20--no-install-recommends\x20install\x20chromium\x20fonts-indic\x20fonts-noto\x20fonts-noto-cjk','responseEnd','ymIQK','args','xvipu','SUzNp'];_0x2155=function(){return _0x190abc;};return _0x2155();}module[_0x1b3798(0x9c)]={'RealBrowserMonitorType':RealBrowserMonitorType,'testChrome':testChrome,'resetChrome':resetChrome};