function _0x4c78(_0x8c1d6c,_0x28e38d){const _0x54d71e=_0x54d7();return _0x4c78=function(_0x4c783d,_0x45cd49){_0x4c783d=_0x4c783d-0xfa;let _0x434ed1=_0x54d71e[_0x4c783d];return _0x434ed1;},_0x4c78(_0x8c1d6c,_0x28e38d);}const _0x2d7eff=_0x4c78;(function(_0x781f3c,_0x15c8fb){const _0x162bad=_0x4c78,_0x54bec9=_0x781f3c();while(!![]){try{const _0x40b62a=parseInt(_0x162bad(0x10d))/0x1+-parseInt(_0x162bad(0x10a))/0x2*(parseInt(_0x162bad(0x104))/0x3)+parseInt(_0x162bad(0x10b))/0x4*(parseInt(_0x162bad(0x120))/0x5)+parseInt(_0x162bad(0xfe))/0x6+parseInt(_0x162bad(0x11a))/0x7+parseInt(_0x162bad(0x115))/0x8+-parseInt(_0x162bad(0x109))/0x9*(parseInt(_0x162bad(0x11c))/0xa);if(_0x40b62a===_0x15c8fb)break;else _0x54bec9['push'](_0x54bec9['shift']());}catch(_0x32f9a0){_0x54bec9['push'](_0x54bec9['shift']());}}}(_0x54d7,0xcbb25));function _0x54d7(){const _0x5b9c59=['error','1689GcBaHO','where','FAILED\x20TO\x20GET\x20BROWSER\x20EXTENSION\x20API\x20KEY.','admin','FAILED\x20TO\x20GET\x20BROWSER\x20EXTENSION\x20API\x20KEYS.','81333PWPdoS','1292nIvyet','4LiusWL','SrADZ','698269VVTfBf','findMany','browser_extension_api_keys','ZOxpb','Failed\x20to\x20create\x20browser\x20extension\x20API\x20key','SBeEH','Successfully\x20migrated\x20API\x20keys\x20to\x20multi-user\x20mode','Error\x20migrating\x20API\x20keys\x20to\x20multi-user\x20mode:','5567728NMWzZN','PdvVI','uuid-apikey','isMultiUserMode','lvVfP','6650413qybbWF','startsWith','3260OlWldY','delete','create','KbAzx','5269735HGdgxL','user_id','exports','BbGHM','brx-','apiKey','QlWgt','updateMany','4475160XMvvRV','findUnique','includes','message','Failed\x20to\x20delete\x20browser\x20extension\x20API\x20key'];_0x54d7=function(){return _0x5b9c59;};return _0x54d7();}const prisma=require('../utils/prisma'),{SystemSettings}=require('./systemSettings'),{ROLES}=require('../utils/middleware/multiUserProtected'),BrowserExtensionApiKey={'makeSecret':()=>{const _0x2ba04f=_0x4c78,_0x2ad6d5={'KbAzx':function(_0x497d25,_0x2fd2c2){return _0x497d25(_0x2fd2c2);},'vcOpg':_0x2ba04f(0x117)},_0x768625=_0x2ad6d5[_0x2ba04f(0x11f)](require,_0x2ad6d5['vcOpg']);return _0x2ba04f(0xfa)+_0x768625[_0x2ba04f(0x11e)]()[_0x2ba04f(0xfb)];},'create':async function(_0x226c07=null){const _0x2031ca=_0x4c78,_0x146448={'tVGRe':function(_0x23000d,_0x28bf14){return _0x23000d===_0x28bf14;},'BbGHM':_0x2031ca(0x111)};try{const _0x40cade=await prisma[_0x2031ca(0x10f)][_0x2031ca(0x11e)]({'data':{'key':this['makeSecret'](),'user_id':_0x226c07}});return{'apiKey':_0x40cade,'error':null};}catch(_0x5ad3db){if(_0x146448['tVGRe'](_0x2031ca(0x112),_0x2031ca(0x112)))return console[_0x2031ca(0x103)](_0x146448[_0x2031ca(0x123)],_0x5ad3db),{'apiKey':null,'error':_0x5ad3db[_0x2031ca(0x101)]};else _0x4df933[_0x2031ca(0x103)]('Error\x20migrating\x20API\x20keys\x20to\x20multi-user\x20mode:',_0x11c00d);}},'validate':async function(_0x3824de){const _0x487f9e=_0x4c78,_0x4750c8={'QlWgt':_0x487f9e(0xfa)};if(!_0x3824de[_0x487f9e(0x11b)](_0x4750c8[_0x487f9e(0xfc)]))return![];const _0x255dfd=await prisma[_0x487f9e(0x10f)][_0x487f9e(0xff)]({'where':{'key':_0x3824de['toString']()},'include':{'user':!![]}});if(!_0x255dfd)return![];const _0x3f3fcc=await SystemSettings[_0x487f9e(0x118)]();if(!_0x3f3fcc)return _0x255dfd;return _0x255dfd[_0x487f9e(0x121)]?_0x255dfd:![];},'get':async function(_0x11661f={}){const _0x357cc8=_0x4c78;try{const _0x44a388=await prisma[_0x357cc8(0x10f)]['findFirst']({'where':_0x11661f});return _0x44a388;}catch(_0xf71ac2){return console[_0x357cc8(0x103)]('FAILED\x20TO\x20GET\x20BROWSER\x20EXTENSION\x20API\x20KEY.',_0xf71ac2['message']),null;}},'delete':async function(_0xb31822){const _0x579413=_0x4c78,_0x3f291a={'lvVfP':'PdvVI','ZOxpb':_0x579413(0x102)};try{return _0x3f291a[_0x579413(0x119)]!==_0x579413(0x116)?(_0xbcc26e[_0x579413(0x103)](_0x579413(0x106),_0x13ea6d['message']),null):(await prisma[_0x579413(0x10f)][_0x579413(0x11d)]({'where':{'id':parseInt(_0xb31822)}}),{'success':!![],'error':null});}catch(_0x2d0c03){return console[_0x579413(0x103)](_0x3f291a[_0x579413(0x110)],_0x2d0c03),{'success':![],'error':_0x2d0c03['message']};}},'where':async function(_0x3b4f18={},_0x40800a=null,_0x3f9d93=null){const _0x34c5d5=_0x4c78,_0x431dbe={'SrADZ':function(_0x5574de,_0x63235c){return _0x5574de!==_0x63235c;}};try{const _0x288276=await prisma['browser_extension_api_keys'][_0x34c5d5(0x10e)]({'where':_0x3b4f18,..._0x431dbe[_0x34c5d5(0x10c)](_0x40800a,null)?{'take':_0x40800a}:{},..._0x3f9d93!==null?{'orderBy':_0x3f9d93}:{},'include':{'user':!![]}});return _0x288276;}catch(_0x9dd979){return console['error'](_0x34c5d5(0x108),_0x9dd979['message']),[];}},'whereWithUser':async function(_0x1ca9e4,_0xb243d3={},_0x13517b=null,_0x44a2d0=null){const _0x3e7b98=_0x4c78;if([ROLES[_0x3e7b98(0x107)]][_0x3e7b98(0x100)](_0x1ca9e4['role']))return await this[_0x3e7b98(0x105)](_0xb243d3,_0x13517b,_0x44a2d0);try{const _0x621ca6=await prisma[_0x3e7b98(0x10f)]['findMany']({'where':{..._0xb243d3,'user_id':_0x1ca9e4['id']},'include':{'user':!![]},..._0x13517b!==null?{'take':_0x13517b}:{},..._0x44a2d0!==null?{'orderBy':_0x44a2d0}:{}});return _0x621ca6;}catch(_0x1bc5de){return console[_0x3e7b98(0x103)](_0x1bc5de[_0x3e7b98(0x101)]),[];}},'migrateApiKeysToMultiUser':async function(_0x1cf482){const _0x38be0f=_0x4c78,_0x1806a3={'kRCvl':_0x38be0f(0x113)};try{await prisma[_0x38be0f(0x10f)][_0x38be0f(0xfd)]({'where':{'user_id':null},'data':{'user_id':_0x1cf482}}),console['log'](_0x1806a3['kRCvl']);}catch(_0x4b448b){console[_0x38be0f(0x103)](_0x38be0f(0x114),_0x4b448b);}}};module[_0x2d7eff(0x122)]={'BrowserExtensionApiKey':BrowserExtensionApiKey};