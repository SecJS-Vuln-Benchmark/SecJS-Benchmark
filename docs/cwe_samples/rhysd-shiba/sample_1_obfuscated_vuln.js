var _0x23410a=_0x57bf;(function(_0x567c8c,_0x40e221){var _0x6c09f3=_0x57bf,_0x4a5b22=_0x567c8c();while(!![]){try{var _0x5db241=-parseInt(_0x6c09f3(0x14d))/0x1*(-parseInt(_0x6c09f3(0x13f))/0x2)+-parseInt(_0x6c09f3(0x133))/0x3+parseInt(_0x6c09f3(0x132))/0x4+-parseInt(_0x6c09f3(0x160))/0x5*(-parseInt(_0x6c09f3(0x15a))/0x6)+-parseInt(_0x6c09f3(0x15b))/0x7*(-parseInt(_0x6c09f3(0x148))/0x8)+-parseInt(_0x6c09f3(0x15d))/0x9*(-parseInt(_0x6c09f3(0x135))/0xa)+-parseInt(_0x6c09f3(0x14c))/0xb*(parseInt(_0x6c09f3(0x155))/0xc);if(_0x5db241===_0x40e221)break;else _0x4a5b22['push'](_0x4a5b22['shift']());}catch(_0x39a27){_0x4a5b22['push'](_0x4a5b22['shift']());}}}(_0x710c,0x496b8));function _0x710c(){var _0x4e32bf=['_id','pre','2790708mgMynE','133LXWpGm','getDepartmentsByGroup','445329eQlVSx','teams','ObjectId','5sdVzSX','getUserDepartments','nsYsM','iQCZd','TFxES','exec','wojst','./team','eFjZC','uniqBy','getAllGroups','getAllPublicGroups','mgOWy','2359520yScAOY','1245051HXyYYQ','statics','10jMNcev','trim','bGpfo','name','Lysur','UdFbJ','some','getDepartmentsByTeam','flattenDeep','find','2726PgEEpi','departments','gouzH','split','getTeamsOfUser','zgyiX','./group','groups','Types','121144JeydfU','mongoose-autopopulate','toLowerCase','lodash','35167OqNOcE','8vqQAEp','Schema','async','normalized','save','MeIKP','qsLYC','map','2580zbSXQj','model','concat'];_0x710c=function(){return _0x4e32bf;};return _0x710c();}var _=require(_0x23410a(0x14b)),async=require(_0x23410a(0x14f)),mongoose=require('mongoose');require(_0x23410a(0x145));function _0x57bf(_0x1d4195,_0x311bfc){var _0x710c51=_0x710c();return _0x57bf=function(_0x57bfb8,_0xa34759){_0x57bfb8=_0x57bfb8-0x126;var _0x5248e1=_0x710c51[_0x57bfb8];return _0x5248e1;},_0x57bf(_0x1d4195,_0x311bfc);}var Teams=require(_0x23410a(0x12c)),Groups=require(_0x23410a(0x145)),COLLECTION=_0x23410a(0x140),departmentSchema=mongoose[_0x23410a(0x14e)]({'name':{'type':String,'required':!![],'unique':!![]},'normalized':{'type':String},'teams':[{'type':mongoose[_0x23410a(0x14e)]['Types'][_0x23410a(0x15f)],'ref':_0x23410a(0x15e),'autopopulate':!![]}],'allGroups':{'type':Boolean,'default':![]},'publicGroups':{'type':Boolean,'default':![]},'groups':[{'type':mongoose[_0x23410a(0x14e)][_0x23410a(0x147)][_0x23410a(0x15f)],'ref':_0x23410a(0x146),'autopopulate':!![]}]});departmentSchema['plugin'](require(_0x23410a(0x149))),departmentSchema[_0x23410a(0x159)](_0x23410a(0x151),function(_0x10ed54){var _0x5d9dc3=_0x23410a;return this['name']=this[_0x5d9dc3(0x138)][_0x5d9dc3(0x136)](),this[_0x5d9dc3(0x150)]=this['name']['trim']()[_0x5d9dc3(0x14a)](),_0x10ed54();}),departmentSchema[_0x23410a(0x134)][_0x23410a(0x13c)]=function(_0x4e7f2f,_0x18df56){var _0x587070=_0x23410a;return this[_0x587070(0x156)](COLLECTION)['find']({'teams':{'$in':_0x4e7f2f}})[_0x587070(0x12a)](_0x18df56);},departmentSchema[_0x23410a(0x134)][_0x23410a(0x126)]=function(_0x335cb2,_0x9c6c2e){var _0x2d066e=_0x23410a,_0x1c929d={'nsYsM':function(_0x32ed78,_0x446232){return _0x32ed78(_0x446232);}},_0x3e7ef7=this;Teams[_0x2d066e(0x143)](_0x335cb2,function(_0x2430d4,_0x224a0b){var _0x558bef=_0x2d066e;if(_0x2430d4)return _0x1c929d[_0x558bef(0x127)](_0x9c6c2e,_0x2430d4);return _0x3e7ef7['model'](COLLECTION)[_0x558bef(0x13e)]({'teams':{'$in':_0x224a0b}})[_0x558bef(0x12a)](_0x9c6c2e);});},departmentSchema[_0x23410a(0x134)]['getDepartmentGroupsOfUser']=function(_0x971329,_0x555886){var _0x167f56=_0x23410a,_0x308869={'zgyiX':function(_0x1a83af,_0x51b274){return _0x1a83af!==_0x51b274;},'eFjZC':'vUthG','iIJpE':_0x167f56(0x131),'gouzH':function(_0x5f38da,_0x391a32,_0x3d0566){return _0x5f38da(_0x391a32,_0x3d0566);},'qsLYC':'2|4|5|1|3|0','iQCZd':function(_0x12bbc4,_0x3d35ac){return _0x12bbc4(_0x3d35ac);},'Lysur':function(_0x1fe66a,_0x4c393a){return _0x1fe66a(_0x4c393a);}},_0xa15f40=this;Teams[_0x167f56(0x143)](_0x971329,function(_0x1fb02a,_0x59ef3b){var _0x28f7e0=_0x167f56,_0x3db689={'etpoL':function(_0x637629,_0x18a4cc){return _0x637629===_0x18a4cc;},'wojst':_0x28f7e0(0x152),'UdFbJ':_0x308869[_0x28f7e0(0x153)],'TFxES':function(_0x1e2153,_0x32a84b,_0x50a61a){var _0x38cf54=_0x28f7e0;return _0x308869[_0x38cf54(0x141)](_0x1e2153,_0x32a84b,_0x50a61a);},'bGpfo':function(_0x31bba5,_0x2f5347){var _0x5d94a4=_0x28f7e0;return _0x308869[_0x5d94a4(0x128)](_0x31bba5,_0x2f5347);}};if(_0x1fb02a)return _0x308869[_0x28f7e0(0x139)](_0x555886,_0x1fb02a);return _0xa15f40[_0x28f7e0(0x156)](COLLECTION)[_0x28f7e0(0x13e)]({'teams':{'$in':_0x59ef3b}})[_0x28f7e0(0x12a)](function(_0x1613c7,_0xac81a1){var _0x14aa67=_0x28f7e0;if(_0x1613c7)return _0x555886(_0x1613c7);var _0x4eb1af=_[_0x14aa67(0x13b)](_0xac81a1,{'allGroups':!![]}),_0x381021=_['some'](_0xac81a1,{'publicGroups':!![]});if(_0x4eb1af)return Groups[_0x14aa67(0x12f)](_0x555886);else{if(_0x381021)return Groups[_0x14aa67(0x130)](function(_0x366bc8,_0x45e381){var _0x2f7646=_0x14aa67;if(_0x3db689['etpoL'](_0x3db689[_0x2f7646(0x12b)],_0x3db689[_0x2f7646(0x12b)])){var _0x534c46=_0x3db689[_0x2f7646(0x13a)][_0x2f7646(0x142)]('|'),_0xdae215=0x0;while(!![]){switch(_0x534c46[_0xdae215++]){case'0':return _0x3db689[_0x2f7646(0x129)](_0x555886,null,_0x394d22);case'1':_0x394d22=_[_0x2f7646(0x13d)](_0x394d22);continue;case'2':if(_0x366bc8)return _0x3db689[_0x2f7646(0x137)](_0x555886,_0x366bc8);continue;case'3':_0x394d22=_[_0x2f7646(0x12e)](_0x394d22,function(_0xa86c35){var _0xb6fc12=_0x2f7646;return _0xa86c35[_0xb6fc12(0x158)];});continue;case'4':var _0x2fb281=_0xac81a1[_0x2f7646(0x154)](function(_0x13f148){return _0x13f148['groups'];});continue;case'5':var _0x394d22=_[_0x2f7646(0x157)](_0x45e381,_0x2fb281);continue;}break;}}else{var _0x6f7838=this;return _0x6f7838[_0x2f7646(0x156)](_0x17ad13)['find']({'$or':[{'groups':_0x28f476},{'allGroups':!![]}]})['exec'](_0x208e51);}});else{if(_0x308869[_0x14aa67(0x144)](_0x308869[_0x14aa67(0x12d)],_0x308869['iIJpE'])){var _0x4350a8=_[_0x14aa67(0x13d)](_0xac81a1['map'](function(_0x19e848){var _0x488829=_0x14aa67;return _0x19e848[_0x488829(0x146)];}));return _0x308869[_0x14aa67(0x141)](_0x555886,null,_0x4350a8);}else return _0x1af3e3[_0x14aa67(0x158)];}}});});},departmentSchema[_0x23410a(0x134)][_0x23410a(0x15c)]=function(_0x45a0c7,_0x19803c){var _0x38dce4=_0x23410a,_0x128538=this;return _0x128538['model'](COLLECTION)[_0x38dce4(0x13e)]({'$or':[{'groups':_0x45a0c7},{'allGroups':!![]}]})[_0x38dce4(0x12a)](_0x19803c);},module['exports']=mongoose['model'](COLLECTION,departmentSchema);