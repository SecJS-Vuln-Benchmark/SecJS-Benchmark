'use strict';const _0x342117=_0x3d96;(function(_0x334a82,_0x2a9384){const _0x23bea3=_0x3d96,_0x4deef9=_0x334a82();while(!![]){try{const _0x1a5ffc=parseInt(_0x23bea3(0x167))/0x1*(-parseInt(_0x23bea3(0x195))/0x2)+-parseInt(_0x23bea3(0x16b))/0x3+parseInt(_0x23bea3(0x1ba))/0x4*(parseInt(_0x23bea3(0x1ad))/0x5)+-parseInt(_0x23bea3(0x175))/0x6*(-parseInt(_0x23bea3(0x1a9))/0x7)+-parseInt(_0x23bea3(0x190))/0x8*(-parseInt(_0x23bea3(0x18e))/0x9)+parseInt(_0x23bea3(0x154))/0xa*(-parseInt(_0x23bea3(0x1b7))/0xb)+parseInt(_0x23bea3(0x181))/0xc;if(_0x1a5ffc===_0x2a9384)break;else _0x4deef9['push'](_0x4deef9['shift']());}catch(_0x3e4c42){_0x4deef9['push'](_0x4deef9['shift']());}}}(_0x364e,0x2f5ed));function _0x3d96(_0x4ece4a,_0x10b7e6){const _0x364e7e=_0x364e();return _0x3d96=function(_0x3d9662,_0x202f70){_0x3d9662=_0x3d9662-0x14c;let _0x44c76f=_0x364e7e[_0x3d9662];return _0x44c76f;},_0x3d96(_0x4ece4a,_0x10b7e6);}const test=require(_0x342117(0x150))[_0x342117(0x1e5)],FormData=require(_0x342117(0x1a4)),Fastify=require(_0x342117(0x1e8)),multipart=require('..'),http=require('node:http'),crypto=require('node:crypto'),{Readable}=require('readable-stream'),path=require('node:path'),fs=require(_0x342117(0x1b8)),{access}=require(_0x342117(0x1b8))[_0x342117(0x186)],EventEmitter=require('node:events'),{once}=EventEmitter,util=require(_0x342117(0x169)),sleep=util['promisify'](setTimeout),filePath=path[_0x342117(0x1e2)](__dirname,'../README.md');test(_0x342117(0x19b),async function(_0x3bb223){const _0x5dd193=_0x342117,_0x529a8a={'byXjU':_0x5dd193(0x1ae),'oFdqY':_0x5dd193(0x1cd),'bzfBx':function(_0x4cc72a,_0x2e8232,_0x111431){return _0x4cc72a(_0x2e8232,_0x111431);},'RwEQQ':'end','jLSXg':_0x5dd193(0x1dd),'NIczr':_0x5dd193(0x1d5),'wtLGV':function(_0x55c970){return _0x55c970();},'sUmXy':_0x5dd193(0x1d1),'bvHZp':_0x5dd193(0x15e)};_0x3bb223[_0x5dd193(0x16d)](0xa);const _0x34ef=_0x529a8a[_0x5dd193(0x14d)](Fastify);_0x3bb223[_0x5dd193(0x1e4)](_0x34ef[_0x5dd193(0x180)][_0x5dd193(0x19f)](_0x34ef)),_0x34ef[_0x5dd193(0x1cf)](multipart),_0x34ef[_0x5dd193(0x1bc)]('/',async function(_0x13a337,_0x3e896c){const _0x410358=_0x5dd193;if(_0x410358(0x1bf)!=='jtLvp'){_0x3bb223['ok'](_0x13a337[_0x410358(0x1ab)]());const _0x31bca6=await _0x13a337[_0x410358(0x1d9)]();_0x3bb223['ok'](_0x31bca6[0x0][_0x410358(0x171)]),_0x3bb223['equal'](_0x31bca6[0x0]['fieldname'],_0x410358(0x1a3)),_0x3bb223[_0x410358(0x165)](_0x31bca6[0x0]['filename'],_0x410358(0x177)),_0x3bb223[_0x410358(0x165)](_0x31bca6[0x0][_0x410358(0x18f)],_0x529a8a[_0x410358(0x1be)]),_0x3bb223[_0x410358(0x165)](_0x31bca6[0x0][_0x410358(0x1ca)],_0x529a8a[_0x410358(0x151)]),_0x3bb223['ok'](_0x31bca6[0x0][_0x410358(0x1a6)][_0x410358(0x1a3)]),await _0x529a8a[_0x410358(0x19d)](access,_0x31bca6[0x0][_0x410358(0x171)],fs[_0x410358(0x1c1)][_0x410358(0x1ce)]),_0x3e896c[_0x410358(0x1c4)](0xc8)['send']();}else _0x3a2bc5[_0x410358(0x1b1)](_0x410358(0x1b6));});const _0x224eef=new EventEmitter();_0x34ef[_0x5dd193(0x1dc)](_0x5dd193(0x183),async _0x255841=>{const _0x548cb6=_0x5dd193;try{_0x548cb6(0x1b4)===_0x548cb6(0x15b)?(_0x4c7c98[_0x548cb6(0x165)](_0xacc3d1[_0x548cb6(0x17a)],0x1f4),_0x5bdd7c[_0x548cb6(0x170)](),_0x4569cf['on'](_0x529a8a[_0x548cb6(0x197)],()=>{const _0x49fa5b=_0x548cb6;_0x5038a5[_0x49fa5b(0x1b1)](_0x49fa5b(0x1b6));})):await _0x529a8a[_0x548cb6(0x19d)](access,_0x255841[_0x548cb6(0x1c3)][0x0],fs[_0x548cb6(0x1c1)]['F_OK']);}catch(_0x329f28){_0x3bb223['equal'](_0x329f28[_0x548cb6(0x1c4)],_0x529a8a[_0x548cb6(0x178)]),_0x3bb223[_0x548cb6(0x1b1)](_0x548cb6(0x157)),_0x224eef[_0x548cb6(0x19c)](_0x529a8a[_0x548cb6(0x1da)]);}}),await _0x34ef[_0x5dd193(0x1d0)]({'port':0x0});const _0x24241f=new FormData(),_0xb8548={'protocol':_0x529a8a['sUmXy'],'hostname':_0x5dd193(0x1af),'port':_0x34ef[_0x5dd193(0x1a7)][_0x5dd193(0x18d)]()[_0x5dd193(0x1d4)],'path':'/','headers':_0x24241f[_0x5dd193(0x1c5)](),'method':_0x529a8a[_0x5dd193(0x1cc)]},_0x13dc9e=http[_0x5dd193(0x156)](_0xb8548);_0x24241f[_0x5dd193(0x155)]('upload',fs[_0x5dd193(0x14f)](filePath)),_0x24241f[_0x5dd193(0x187)](_0x13dc9e);const [_0x3b30b2]=await once(_0x13dc9e,_0x529a8a[_0x5dd193(0x1da)]);_0x3bb223[_0x5dd193(0x165)](_0x3b30b2['statusCode'],0xc8),_0x3b30b2[_0x5dd193(0x170)](),await once(_0x3b30b2,_0x5dd193(0x1d8)),await _0x529a8a['bzfBx'](once,_0x224eef,_0x5dd193(0x1d5));}),test('should\x20store\x20file\x20on\x20disk,\x20remove\x20on\x20response\x20error',async function(_0x425cd1){const _0x32f0ca=_0x342117,_0x195e00={'KjYkp':'test','kASor':function(_0x163f4a,_0x3a9f57,_0x4233c7){return _0x163f4a(_0x3a9f57,_0x4233c7);},'Ejmyl':_0x32f0ca(0x1d8),'tGWBe':_0x32f0ca(0x1a2),'lruoe':_0x32f0ca(0x1dd),'LZvaX':_0x32f0ca(0x1d5),'DBpeR':_0x32f0ca(0x1af),'kiFEk':_0x32f0ca(0x15e),'zLYIQ':_0x32f0ca(0x1a3),'iwoyx':function(_0x20a667,_0x46e3fc){return _0x20a667!==_0x46e3fc;},'LqnMn':_0x32f0ca(0x1df),'NUqhF':function(_0x2198eb,_0x878082){return _0x2198eb===_0x878082;},'XeieD':'ivbJq','czhCK':function(_0x202944,_0x420cf6,_0x3ea6c2){return _0x202944(_0x420cf6,_0x3ea6c2);}};_0x425cd1[_0x32f0ca(0x16d)](0x5);const _0x29db76=Fastify();_0x425cd1['teardown'](_0x29db76[_0x32f0ca(0x180)][_0x32f0ca(0x19f)](_0x29db76)),_0x29db76['register'](multipart),_0x29db76['post']('/',async function(_0x343f19){const _0x243f91=_0x32f0ca;_0x425cd1['ok'](_0x343f19[_0x243f91(0x1ab)]()),await _0x343f19[_0x243f91(0x1d9)]();throw new Error(_0x195e00[_0x243f91(0x1a1)]);});const _0x18e2d5=new EventEmitter();_0x29db76[_0x32f0ca(0x1dc)](_0x32f0ca(0x183),async _0x189b0b=>{const _0x46538e=_0x32f0ca;try{await _0x195e00['kASor'](access,_0x189b0b['tmpUploads'][0x0],fs[_0x46538e(0x1c1)]['F_OK']);}catch(_0x5897ba){_0x425cd1[_0x46538e(0x165)](_0x5897ba['code'],_0x46538e(0x1dd)),_0x425cd1['pass'](_0x46538e(0x157)),_0x18e2d5[_0x46538e(0x19c)]('response');}}),await _0x29db76[_0x32f0ca(0x1d0)]({'port':0x0});const _0xf820f8=new FormData(),_0x2be2f2={'protocol':_0x32f0ca(0x1d1),'hostname':_0x195e00[_0x32f0ca(0x161)],'port':_0x29db76[_0x32f0ca(0x1a7)]['address']()[_0x32f0ca(0x1d4)],'path':'/','headers':_0xf820f8[_0x32f0ca(0x1c5)](),'method':_0x195e00[_0x32f0ca(0x1cb)]},_0x3cd5b1=http[_0x32f0ca(0x156)](_0x2be2f2,_0x4bf900=>{const _0x2e2f07=_0x32f0ca;_0x425cd1[_0x2e2f07(0x165)](_0x4bf900['statusCode'],0x1f4),_0x4bf900[_0x2e2f07(0x170)](),_0x4bf900['on'](_0x195e00[_0x2e2f07(0x1c2)],()=>{const _0x89c8d5=_0x2e2f07;_0x425cd1[_0x89c8d5(0x1b1)](_0x89c8d5(0x1b6));});});_0xf820f8[_0x32f0ca(0x155)](_0x195e00[_0x32f0ca(0x1c9)],fs[_0x32f0ca(0x14f)](filePath));try{_0x195e00[_0x32f0ca(0x1b2)](_0x195e00[_0x32f0ca(0x1d6)],_0x195e00['LqnMn'])?_0x5f006f[_0x32f0ca(0x191)](_0x145c4d,_0x195e00[_0x32f0ca(0x17f)]):await _0xf820f8['pipe'](_0x3cd5b1);}catch(_0x53060f){_0x195e00[_0x32f0ca(0x193)](_0x32f0ca(0x172),_0x195e00['XeieD'])?_0x425cd1[_0x32f0ca(0x191)](_0x53060f,_0x32f0ca(0x1a2)):(_0x3bd13b[_0x32f0ca(0x165)](_0x40a0be[_0x32f0ca(0x1c4)],_0x195e00[_0x32f0ca(0x1c8)]),_0x43a839['pass']('Temp\x20file\x20was\x20removed\x20after\x20response'),_0x4c0102[_0x32f0ca(0x19c)](_0x195e00['LZvaX']));}await _0x195e00[_0x32f0ca(0x198)](once,_0x18e2d5,'response');}),test(_0x342117(0x19a),async function(_0x4dd62d){const _0x5975d0=_0x342117,_0x16a9ea={'hhVjp':_0x5975d0(0x1a3),'OewXc':_0x5975d0(0x1d1),'dmSEc':_0x5975d0(0x1af),'WyoWA':function(_0x5aa686,_0x1ca7f9,_0x66ec7c){return _0x5aa686(_0x1ca7f9,_0x66ec7c);},'sxokg':_0x5975d0(0x1d5),'lfHjh':function(_0x1873b1,_0x5a26c4,_0x4cf2fa){return _0x1873b1(_0x5a26c4,_0x4cf2fa);},'TQUWr':_0x5975d0(0x1d8),'iWcvd':'request'};_0x4dd62d[_0x5975d0(0x16d)](0x4);const _0x411ee7=Fastify();_0x4dd62d[_0x5975d0(0x1e4)](_0x411ee7['close']['bind'](_0x411ee7)),_0x411ee7[_0x5975d0(0x1cf)](multipart),_0x411ee7[_0x5975d0(0x1bc)]('/',async function(_0x1853da,_0x45888e){const _0x22db89=_0x5975d0;_0x4dd62d['ok'](_0x1853da[_0x22db89(0x1ab)]());try{await _0x1853da[_0x22db89(0x1d9)]({'limits':{'fileSize':0x1f4}}),_0x45888e[_0x22db89(0x1c4)](0xc8)['send']();}catch(_0x1a8ecb){_0x4dd62d['ok'](_0x1a8ecb instanceof _0x411ee7[_0x22db89(0x1bb)][_0x22db89(0x164)]),_0x4dd62d[_0x22db89(0x165)](_0x1a8ecb[_0x22db89(0x15d)][_0x22db89(0x16a)],_0x16a9ea[_0x22db89(0x18a)]),_0x45888e['code'](0x1f4)[_0x22db89(0x19e)]();}}),await _0x411ee7[_0x5975d0(0x1d0)]({'port':0x0});const _0x445813=new FormData(),_0x49ddf3={'protocol':_0x16a9ea['OewXc'],'hostname':_0x16a9ea['dmSEc'],'port':_0x411ee7[_0x5975d0(0x1a7)][_0x5975d0(0x18d)]()[_0x5975d0(0x1d4)],'path':'/','headers':_0x445813[_0x5975d0(0x1c5)](),'method':_0x5975d0(0x15e)},_0x29cac6=http['request'](_0x49ddf3);_0x445813[_0x5975d0(0x155)](_0x16a9ea[_0x5975d0(0x18a)],fs[_0x5975d0(0x14f)](filePath)),_0x445813['pipe'](_0x29cac6);try{const [_0x15e624]=await _0x16a9ea['WyoWA'](once,_0x29cac6,_0x16a9ea[_0x5975d0(0x160)]);_0x4dd62d[_0x5975d0(0x165)](_0x15e624[_0x5975d0(0x17a)],0x1f4),_0x15e624['resume'](),await _0x16a9ea[_0x5975d0(0x1a8)](once,_0x15e624,_0x16a9ea[_0x5975d0(0x17b)]);}catch(_0x5b6523){_0x4dd62d[_0x5975d0(0x191)](_0x5b6523,_0x16a9ea[_0x5975d0(0x14c)]);}}),test(_0x342117(0x173),async function(_0x5a0351){const _0xcab34f=_0x342117,_0x5805e8={'TwUat':_0xcab34f(0x166),'kblFs':_0xcab34f(0x156),'jBLDc':_0xcab34f(0x1d1),'juzSW':_0xcab34f(0x1af),'QZCwE':_0xcab34f(0x15e),'FJuYG':_0xcab34f(0x1a3),'vkHOf':function(_0x184188,_0x11e934){return _0x184188!==_0x11e934;},'uzjUz':'AXSit','pqpNy':function(_0x3105fa,_0x370c3b,_0x35d04c){return _0x3105fa(_0x370c3b,_0x35d04c);}};_0x5a0351[_0xcab34f(0x16d)](0x2);const _0x4170dc=Fastify();_0x5a0351[_0xcab34f(0x1e4)](_0x4170dc[_0xcab34f(0x180)][_0xcab34f(0x19f)](_0x4170dc)),_0x4170dc[_0xcab34f(0x1cf)](require('..')),_0x4170dc['post']('/',async function(_0x4bebf5,_0xbe8c99){const _0x1914fc=_0xcab34f;if(_0x5805e8['TwUat']!==_0x5805e8['TwUat'])this[_0x1914fc(0x1bd)](null);else{_0x5a0351['ok'](_0x4bebf5[_0x1914fc(0x1ab)]());try{await _0x4bebf5[_0x1914fc(0x1d9)]({'tmpdir':'something'}),_0xbe8c99[_0x1914fc(0x1c4)](0xc8)[_0x1914fc(0x19e)]();}catch{_0xbe8c99['code'](0x1f4)['send']();}}}),await _0x4170dc['listen']({'port':0x0});const _0x285efa=new FormData(),_0x33fd70={'protocol':_0x5805e8['jBLDc'],'hostname':_0x5805e8[_0xcab34f(0x168)],'port':_0x4170dc[_0xcab34f(0x1a7)][_0xcab34f(0x18d)]()[_0xcab34f(0x1d4)],'path':'/','headers':_0x285efa[_0xcab34f(0x1c5)](),'method':_0x5805e8['QZCwE']},_0x5c3caa=http[_0xcab34f(0x156)](_0x33fd70),_0x505d42=fs[_0xcab34f(0x14f)](filePath);_0x285efa[_0xcab34f(0x155)](_0x5805e8['FJuYG'],_0x505d42),_0x285efa[_0xcab34f(0x187)](_0x5c3caa);try{if(_0x5805e8[_0xcab34f(0x1e6)](_0x5805e8[_0xcab34f(0x1e3)],'AXSit'))_0x43ae03[_0xcab34f(0x191)](_0x2fe7a5,_0x5805e8[_0xcab34f(0x16f)]);else{const [_0x2b4a52]=await _0x5805e8[_0xcab34f(0x1d2)](once,_0x5c3caa,_0xcab34f(0x1d5));_0x5a0351['equal'](_0x2b4a52['statusCode'],0x1f4),_0x2b4a52[_0xcab34f(0x170)](),await once(_0x2b4a52,_0xcab34f(0x1d8));}}catch(_0x28c47f){_0x5a0351[_0xcab34f(0x191)](_0x28c47f,_0xcab34f(0x156));}}),test(_0x342117(0x163),{'skip':process['platform']===_0x342117(0x1db)},async function(_0x4825c3){const _0xda0452=_0x342117,_0x36db17={'yTAxf':function(_0x137b9e){return _0x137b9e();},'fAqxF':_0xda0452(0x1d1),'MBZGT':_0xda0452(0x1af),'GDGLw':_0xda0452(0x1a3),'kDnRW':_0xda0452(0x1d5),'imJYu':function(_0x10795e,_0x198f52,_0x12afd){return _0x10795e(_0x198f52,_0x12afd);},'YGXqe':_0xda0452(0x156)};_0x4825c3[_0xda0452(0x16d)](0x2);const _0x1e4efa=_0x36db17[_0xda0452(0x15a)](Fastify);_0x4825c3['teardown'](_0x1e4efa[_0xda0452(0x180)][_0xda0452(0x19f)](_0x1e4efa)),_0x1e4efa[_0xda0452(0x1cf)](require('..'));const _0x3e9bf5=_0x4825c3[_0xda0452(0x15f)]();_0x1e4efa[_0xda0452(0x1bc)]('/',async function(_0x4a4b5c,_0x895e2f){const _0x45a936=_0xda0452;_0x4825c3['ok'](_0x4a4b5c['isMultipart']());try{await _0x4a4b5c[_0x45a936(0x1d9)]({'tmpdir':_0x3e9bf5}),await fs['promises']['rm'](_0x3e9bf5,{'recursive':!![],'force':!![]}),_0x895e2f[_0x45a936(0x1c4)](0xc8)[_0x45a936(0x19e)]();}catch{_0x895e2f[_0x45a936(0x1c4)](0x1f4)[_0x45a936(0x19e)]();}}),await _0x1e4efa[_0xda0452(0x1d0)]({'port':0x0});const _0x5106bc=new FormData(),_0x2ffcdb={'protocol':_0x36db17[_0xda0452(0x17c)],'hostname':_0x36db17[_0xda0452(0x1b9)],'port':_0x1e4efa[_0xda0452(0x1a7)][_0xda0452(0x18d)]()[_0xda0452(0x1d4)],'path':'/','headers':_0x5106bc[_0xda0452(0x1c5)](),'method':_0xda0452(0x15e)},_0x49d5eb=http[_0xda0452(0x156)](_0x2ffcdb),_0x3ccc9b=fs['createReadStream'](filePath);_0x5106bc[_0xda0452(0x155)](_0x36db17[_0xda0452(0x1d3)],_0x3ccc9b),_0x5106bc[_0xda0452(0x187)](_0x49d5eb);try{const [_0x1bd983]=await once(_0x49d5eb,_0x36db17[_0xda0452(0x196)]);_0x4825c3[_0xda0452(0x165)](_0x1bd983[_0xda0452(0x17a)],0xc8),_0x1bd983['resume'](),await _0x36db17[_0xda0452(0x182)](once,_0x1bd983,_0xda0452(0x1d8));}catch(_0x2aa272){_0x4825c3[_0xda0452(0x191)](_0x2aa272,_0x36db17[_0xda0452(0x1b5)]);}}),test('should\x20throw\x20on\x20file\x20limit\x20error,\x20after\x20highWaterMark',async function(_0x330e43){const _0x27ef06=_0x342117,_0x4ace5d={'iUoMM':function(_0x19ba3a,_0x547305){return _0x19ba3a instanceof _0x547305;},'WBJNw':function(_0x38e787,_0x37acb8){return _0x38e787>_0x37acb8;},'MheaO':'finished\x20generating','uKzIy':function(_0x473a7f){return _0x473a7f();},'frSxA':_0x27ef06(0x1d1),'FPGws':'localhost','cohhi':_0x27ef06(0x1c7),'luJCK':'random-data','dmZtW':'binary/octet-stream','tYrVB':'response','yjHdF':_0x27ef06(0x1d8)};_0x330e43[_0x27ef06(0x16d)](0x5);const _0x55017e=crypto['createHash'](_0x27ef06(0x1ac)),_0x1d774e=_0x4ace5d['uKzIy'](Fastify);_0x330e43[_0x27ef06(0x1e4)](_0x1d774e[_0x27ef06(0x180)]['bind'](_0x1d774e)),_0x1d774e[_0x27ef06(0x1cf)](multipart),_0x1d774e['post']('/',async function(_0x1e24c5,_0x4a8f7b){const _0x416650=_0x27ef06;_0x330e43['ok'](_0x1e24c5[_0x416650(0x1ab)]());try{await _0x1e24c5['saveRequestFiles']({'limits':{'fileSize':0x4268}}),_0x4a8f7b[_0x416650(0x1c4)](0xc8)[_0x416650(0x19e)]();}catch(_0xfabf0c){_0x330e43['ok'](_0x4ace5d[_0x416650(0x1a5)](_0xfabf0c,_0x1d774e[_0x416650(0x1bb)][_0x416650(0x164)])),_0x330e43[_0x416650(0x165)](_0xfabf0c[_0x416650(0x15d)][_0x416650(0x16a)],_0x416650(0x1c7)),_0x4a8f7b[_0x416650(0x1c4)](0x1f4)[_0x416650(0x19e)]();}}),await _0x1d774e[_0x27ef06(0x1d0)]({'port':0x0});const _0x37db1d=0x400*0x400;let _0x3b3d6a=_0x37db1d;const _0x3d939b=new FormData({'maxDataSize':_0x3b3d6a}),_0xfa9536=new Readable({'read'(_0x45b41e){const _0x4f90b5=_0x27ef06;_0x4ace5d['WBJNw'](_0x45b41e,_0x3b3d6a)&&(_0x45b41e=_0x3b3d6a);const _0x1a8d36=Buffer[_0x4f90b5(0x15c)](_0x45b41e)['fill']('x');_0x55017e['update'](_0x1a8d36),this['push'](_0x1a8d36),_0x3b3d6a-=_0x45b41e,_0x3b3d6a===0x0&&(_0x330e43[_0x4f90b5(0x1b1)](_0x4ace5d[_0x4f90b5(0x1b0)]),_0x55017e['end'](),this[_0x4f90b5(0x1bd)](null));}}),_0x381908={'protocol':_0x4ace5d[_0x27ef06(0x16c)],'hostname':_0x4ace5d[_0x27ef06(0x199)],'port':_0x1d774e[_0x27ef06(0x1a7)][_0x27ef06(0x18d)]()[_0x27ef06(0x1d4)],'path':'/','headers':_0x3d939b[_0x27ef06(0x1c5)](),'method':_0x27ef06(0x15e)},_0xd10382=http[_0x27ef06(0x156)](_0x381908);_0x3d939b[_0x27ef06(0x155)](_0x4ace5d[_0x27ef06(0x1aa)],_0xfa9536,{'filename':_0x4ace5d['luJCK'],'contentType':_0x4ace5d['dmZtW'],'knownLength':_0x37db1d}),_0x3d939b['pipe'](_0xd10382);try{const [_0x418ca6]=await once(_0xd10382,_0x4ace5d[_0x27ef06(0x1a0)]);_0x330e43[_0x27ef06(0x165)](_0x418ca6['statusCode'],0x1f4),_0x418ca6[_0x27ef06(0x170)](),await once(_0x418ca6,_0x4ace5d['yjHdF']);}catch(_0x370829){_0x330e43[_0x27ef06(0x191)](_0x370829,_0x27ef06(0x156));}}),test(_0x342117(0x16e),async function(_0x583243){const _0xf65592=_0x342117,_0x2d2f27={'mHOPp':'test','EnrpX':_0xf65592(0x156),'cqtsg':function(_0x5e0058,_0x229a0d){return _0x5e0058===_0x229a0d;},'XaUEr':_0xf65592(0x194),'BLfbO':_0xf65592(0x1d5),'lmyQL':_0xf65592(0x17e),'stgEm':_0xf65592(0x1c6),'GBewm':'XnhAQ','zxpkE':'end','AkcOF':_0xf65592(0x1d1),'fxRMz':_0xf65592(0x1af),'WegQV':_0xf65592(0x1a3),'seBTm':_0xf65592(0x183),'dVGiX':function(_0x5e899f){return _0x5e899f();}};_0x583243[_0xf65592(0x16d)](0x12);const _0xf4fcef=Fastify();_0x583243[_0xf65592(0x1e4)](_0xf4fcef[_0xf65592(0x180)][_0xf65592(0x19f)](_0xf4fcef)),_0xf4fcef[_0xf65592(0x1cf)](multipart),_0xf4fcef[_0xf65592(0x1bc)]('/',async function(_0x39614a){const _0x65a99a=_0xf65592;_0x583243[_0x65a99a(0x165)](_0x39614a[_0x65a99a(0x1c3)],null),await _0x39614a['saveRequestFiles'](),_0x583243[_0x65a99a(0x165)](_0x39614a[_0x65a99a(0x1c3)][_0x65a99a(0x152)],0x1);throw new Error(_0x2d2f27[_0x65a99a(0x188)]);});const _0x4302c8=new EventEmitter();_0xf4fcef['addHook'](_0x2d2f27['seBTm'],async _0xd6e0a7=>{const _0x1375c1=_0xf65592;if(_0x2d2f27['cqtsg'](_0x2d2f27['XaUEr'],_0x2d2f27[_0x1375c1(0x185)]))try{await access(_0xd6e0a7[_0x1375c1(0x1c3)][0x0],fs['constants'][_0x1375c1(0x1ce)]);}catch(_0x52edad){_0x583243[_0x1375c1(0x165)](_0x52edad['code'],'ENOENT'),_0x583243[_0x1375c1(0x1b1)](_0x1375c1(0x157)),_0x4302c8[_0x1375c1(0x19c)](_0x2d2f27[_0x1375c1(0x179)]);}else _0x5c47c9['error'](_0x911aaa,_0x2d2f27[_0x1375c1(0x192)]);}),await _0xf4fcef[_0xf65592(0x1d0)]({'port':0x0});async function _0x313711(){const _0x21371c=_0xf65592,_0x3200d9={'SCFfP':_0x2d2f27[_0x21371c(0x153)],'fptrQ':_0x2d2f27['stgEm'],'aqyPL':_0x2d2f27[_0x21371c(0x1de)],'zScUS':_0x2d2f27['zxpkE']},_0x10a73e=new FormData(),_0x4f2f5e={'protocol':_0x2d2f27[_0x21371c(0x174)],'hostname':_0x2d2f27[_0x21371c(0x18b)],'port':_0xf4fcef[_0x21371c(0x1a7)]['address']()['port'],'path':'/','headers':_0x10a73e[_0x21371c(0x1c5)](),'method':'POST'},_0x15cf5b=http[_0x21371c(0x156)](_0x4f2f5e,_0x211a27=>{const _0x5810ee=_0x21371c;_0x3200d9['fptrQ']!==_0x3200d9['aqyPL']?(_0x583243['equal'](_0x211a27['statusCode'],0x1f4),_0x211a27[_0x5810ee(0x170)](),_0x211a27['on'](_0x3200d9[_0x5810ee(0x184)],()=>{const _0x4802be=_0x5810ee;_0x4802be(0x159)!==_0x3200d9[_0x4802be(0x14e)]?_0x583243[_0x4802be(0x1b1)]('res\x20ended\x20successfully'):(_0x1218f1[_0x4802be(0x1b1)](_0x4802be(0x1c0)),_0x5e448c[_0x4802be(0x1d8)](),this['push'](null));})):(_0x4a0c4a['ok'](_0x1b2ad1 instanceof _0x530a5b[_0x5810ee(0x1bb)]['RequestFileTooLargeError']),_0x2b04b2['equal'](_0xbf6a4f[_0x5810ee(0x15d)]['fieldname'],_0x5810ee(0x1c7)),_0x5a10bd[_0x5810ee(0x1c4)](0x1f4)[_0x5810ee(0x19e)]());});_0x10a73e[_0x21371c(0x155)](_0x2d2f27[_0x21371c(0x1e7)],fs[_0x21371c(0x14f)](filePath));try{await _0x10a73e[_0x21371c(0x187)](_0x15cf5b);}catch(_0xba7d82){_0x583243[_0x21371c(0x191)](_0xba7d82,_0x21371c(0x1a2));}await once(_0x4302c8,_0x21371c(0x1d5));}await _0x2d2f27[_0xf65592(0x158)](_0x313711),await _0x2d2f27[_0xf65592(0x158)](_0x313711),await _0x2d2f27['dVGiX'](_0x313711);}),test(_0x342117(0x189),async function(_0xa84288){const _0x5b06c2=_0x342117,_0x1ca9ff={'DKyTX':_0x5b06c2(0x1d1),'NdVWs':_0x5b06c2(0x1af),'LNJey':_0x5b06c2(0x1d7),'mJuzS':'binary/octet-stream','KeFqD':function(_0x2c13ff,_0x5598e9,_0x240a96){return _0x2c13ff(_0x5598e9,_0x240a96);},'WYcsn':_0x5b06c2(0x1d5)};_0xa84288[_0x5b06c2(0x16d)](0x2);const _0x4cdfec=Fastify();_0xa84288['teardown'](_0x4cdfec['close'][_0x5b06c2(0x19f)](_0x4cdfec)),_0x4cdfec[_0x5b06c2(0x1cf)](multipart),_0x4cdfec[_0x5b06c2(0x1bc)]('/',async function(_0x5627dd){const _0x151a29=_0x5b06c2;return _0xa84288['ok'](_0x5627dd[_0x151a29(0x1ab)]()),await _0x5627dd['saveRequestFiles'](),eval('1 + 1;'),{'ok':!![]};}),await _0x4cdfec[_0x5b06c2(0x1d0)]({'port':0x0});const _0x435270=new FormData(),_0x25ee1c={'protocol':_0x1ca9ff[_0x5b06c2(0x18c)],'hostname':_0x1ca9ff[_0x5b06c2(0x17d)],'port':_0x4cdfec['server'][_0x5b06c2(0x18d)]()[_0x5b06c2(0x1d4)],'path':'/','headers':_0x435270['getHeaders'](),'method':_0x5b06c2(0x15e)},_0x3e0c27=http[_0x5b06c2(0x156)](_0x25ee1c),_0x2dce7a=0x11f4e,_0x3f2d93=getMockFileStream(_0x2dce7a);_0x435270['append'](_0x5b06c2(0x1a3),_0x3f2d93,{'filename':_0x1ca9ff[_0x5b06c2(0x1e0)],'contentType':_0x1ca9ff[_0x5b06c2(0x176)],'knownLength':_0x2dce7a}),_0x435270['pipe'](_0x3e0c27);const [_0x24a6fb]=await _0x1ca9ff[_0x5b06c2(0x1e1)](once,_0x3e0c27,_0x1ca9ff['WYcsn']);_0xa84288[_0x5b06c2(0x165)](_0x24a6fb[_0x5b06c2(0x17a)],0xc8),_0x24a6fb[_0x5b06c2(0x170)](),await once(_0x24a6fb,_0x5b06c2(0x1d8));});function getMockFileStream(_0x4b8f61){const _0x5b6dee={'SMALm':function(_0x372abd,_0x588170){return _0x372abd>_0x588170;},'iDyeh':function(_0x217ed2,_0x93bf08){return _0x217ed2===_0x93bf08;},'rLIDT':function(_0x4d2546,_0x42fff9){return _0x4d2546*_0x42fff9;}};let _0x4e9446=_0x4b8f61;const _0x178e76=new Readable({'read'(_0x33097f){const _0x4ffdbc=_0x3d96;_0x5b6dee[_0x4ffdbc(0x162)](_0x33097f,_0x4e9446)&&(_0x33097f=_0x4e9446);const _0x489637=Buffer['alloc'](_0x33097f)[_0x4ffdbc(0x1b3)]('x');this[_0x4ffdbc(0x1bd)](_0x489637),_0x4e9446-=_0x33097f,_0x5b6dee[_0x4ffdbc(0x1e9)](_0x4e9446,0x0)&&this['push'](null);}});return eval('_0x5b6dee[\'rLIDT\'](Math[\'PI\'], 2);'),_0x178e76;}function _0x364e(){const _0xfa1d8a=['363587YeHCjf','juzSW','node:util','fieldname','927612DybMpP','frSxA','plan','should\x20store\x20file\x20on\x20disk,\x20remove\x20on\x20response\x20error,\x20serial','kblFs','resume','filepath','ivbJq','should\x20throw\x20on\x20file\x20save\x20error','AkcOF','82374qEEORl','mJuzS','README.md','jLSXg','BLfbO','statusCode','TQUWr','fAqxF','NdVWs','TenJl','tGWBe','close','7193868kWxYjj','imJYu','onResponse','zScUS','XaUEr','promises','pipe','mHOPp','should\x20process\x20large\x20files\x20correctly','hhVjp','fxRMz','DKyTX','address','432189ijMMbd','encoding','40xWzUIR','error','EnrpX','NUqhF','lNBxS','2ldMceD','kDnRW','RwEQQ','czhCK','FPGws','should\x20throw\x20on\x20file\x20limit\x20error','should\x20store\x20file\x20on\x20disk,\x20remove\x20on\x20response','emit','bzfBx','send','bind','tYrVB','KjYkp','formData\x20request\x20pump:\x20no\x20err','upload','form-data','iUoMM','fields','server','lfHjh','35JICwFS','cohhi','isMultipart','sha256','428030iMDcQa','7bit','localhost','MheaO','pass','iwoyx','fill','UwRzv','YGXqe','res\x20ended\x20successfully','55891mndgys','node:fs','MBZGT','4XCnIvr','multipartErrors','post','push','byXjU','owXEI','finished\x20generating','constants','Ejmyl','tmpUploads','code','getHeaders','HRHkA','upload2','lruoe','zLYIQ','mimetype','kiFEk','bvHZp','text/markdown','F_OK','register','listen','http:','pqpNy','GDGLw','port','response','LqnMn','random-data','end','saveRequestFiles','NIczr','win32','addHook','ENOENT','GBewm','wgsEx','LNJey','KeFqD','join','uzjUz','teardown','test','vkHOf','WegQV','fastify','iDyeh','iWcvd','wtLGV','SCFfP','createReadStream','tap','oFdqY','length','lmyQL','250SIFfuQ','append','request','Temp\x20file\x20was\x20removed\x20after\x20response','dVGiX','NlqyY','yTAxf','JnWeu','alloc','part','POST','testdir','sxokg','DBpeR','SMALm','should\x20not\x20throw\x20on\x20request\x20files\x20cleanup\x20error','RequestFileTooLargeError','equal','SbVCw'];_0x364e=function(){return _0xfa1d8a;};return _0x364e();}