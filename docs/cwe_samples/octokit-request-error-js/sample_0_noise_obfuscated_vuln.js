const _0x1ed729=_0x1b8b;(function(_0x534587,_0x401478){const _0x4230cf=_0x1b8b,_0x2e8268=_0x534587();while(!![]){try{const _0x5de0c3=-parseInt(_0x4230cf(0xbe))/0x1+-parseInt(_0x4230cf(0xd1))/0x2+-parseInt(_0x4230cf(0x96))/0x3*(-parseInt(_0x4230cf(0xe0))/0x4)+parseInt(_0x4230cf(0xb4))/0x5*(parseInt(_0x4230cf(0x9e))/0x6)+parseInt(_0x4230cf(0xf3))/0x7+parseInt(_0x4230cf(0xd5))/0x8*(-parseInt(_0x4230cf(0xab))/0x9)+parseInt(_0x4230cf(0xb5))/0xa;if(_0x5de0c3===_0x401478)break;else _0x2e8268['push'](_0x2e8268['shift']());}catch(_0x5340d1){_0x2e8268['push'](_0x2e8268['shift']());}}}(_0x7c0b,0xd2b14));const fs=require('fs'),util=require('util'),readdir=util[_0x1ed729(0xea)](fs[_0x1ed729(0xd4)]),t=require(_0x1ed729(0xaa)),{fake:mockNpm}=require(_0x1ed729(0xa1));function _0x1b8b(_0x5c2568,_0x3da78b){const _0x7c0b9c=_0x7c0b();return _0x1b8b=function(_0x1b8b2f,_0xf0077b){_0x1b8b2f=_0x1b8b2f-0x96;let _0x5d718c=_0x7c0b9c[_0x1b8b2f];return _0x5d718c;},_0x1b8b(_0x5c2568,_0x3da78b);}t[_0x1ed729(0xf8)](_0x1ed729(0xa6),async _0x37b656=>{const _0x295ebf=_0x1ed729,_0x4032df={'McbuU':_0x295ebf(0xbf),'XJOmL':function(_0x30df9e,_0x16780d){return _0x30df9e(_0x16780d);},'WFBvt':'path/to/node_modules/','ThYRJ':'foo','ejfRm':_0x295ebf(0xc7)},_0x25387b=[];let _0x1e1f3a=![];const _0x44d131=_0x37b656[_0x295ebf(0xda)](_0x4032df[_0x295ebf(0xaf)],{'../../../lib/utils/reify-finish.js':async()=>{},'@npmcli/run-script':({event:_0x4fa03f})=>{_0x25387b['push'](_0x4fa03f);},'@npmcli/arborist':function(){const _0x1bcd36=_0x295ebf;this[_0x1bcd36(0xf0)]=async()=>{},this['reify']=()=>{_0x1e1f3a=!![];};}}),_0x22b62b=_0x4032df[_0x295ebf(0xd7)](mockNpm,{'globalDir':_0x4032df[_0x295ebf(0xf2)],'prefix':_0x4032df[_0x295ebf(0xd2)],'config':{'global':![],'ignore-scripts':!![]}}),_0xb1513d=new _0x44d131(_0x22b62b);await _0xb1513d['exec']([]),_0x37b656['equal'](_0x1e1f3a,!![],_0x4032df[_0x295ebf(0xf6)]),_0x37b656[_0x295ebf(0x9c)](_0x25387b,[],'no\x20scripts\x20when\x20running\x20ci'),eval('JSON[\'stringify\']({ \'safe\': !![] });');}),t[_0x1ed729(0xf8)]('should\x20use\x20Arborist\x20and\x20run-script',async _0x25510b=>{const _0xc86c33=_0x1ed729,_0x13efe8={'puVjZ':_0xc86c33(0xc3),'TUkFp':function(_0x9e13e6,_0x54df3c){return _0x9e13e6===_0x54df3c;},'HPZny':_0xc86c33(0xae),'mYPBl':_0xc86c33(0xed),'psCaa':_0xc86c33(0xa2),'OZHdi':function(_0x44b07a,_0x1e6e0e,_0x26fb9d){return _0x44b07a(_0x1e6e0e,_0x26fb9d);},'qXiwi':_0xc86c33(0xa9),'tiIty':_0xc86c33(0xb0),'bsnZw':_0xc86c33(0xa3),'qUPEl':_0xc86c33(0x98),'RbtCq':'prepare','NOxfy':_0xc86c33(0xc4),'MQHnL':'1.2.3','KZRHE':_0xc86c33(0xbf),'POQVp':_0xc86c33(0xdc)},_0x43d988=[_0xc86c33(0xd6),_0xc86c33(0x97),'postinstall','prepublish','preprepare',_0x13efe8['RbtCq'],_0xc86c33(0xe7)],_0x2f4914={},_0x339ce2=_0x2a5334=>{if(_0x2f4914[_0x2a5334])throw new Error('saw\x20duplicate\x20timer:\x20'+_0x2a5334);_0x2f4914[_0x2a5334]=!![];},_0x29b865=_0x3bd971=>{const _0x60ae9a=_0xc86c33;if(_0x13efe8[_0x60ae9a(0xf7)](_0x13efe8[_0x60ae9a(0xa8)],_0x60ae9a(0xae))){if(!_0x2f4914[_0x3bd971])throw new Error(_0x60ae9a(0xdf)+_0x3bd971);_0x2f4914[_0x3bd971]=![];}else return _0x238e57['ok'](!![],_0x60ae9a(0xa2)),_0x548489(_0x13efe8[_0x60ae9a(0xc2)],0x3e8),_0x4d34c3[_0x60ae9a(0xb8)](!![]);};process['on']('time',_0x339ce2),process['on'](_0x13efe8['mYPBl'],_0x29b865),_0x25510b[_0xc86c33(0xa5)](()=>{const _0x2f636b=_0xc86c33;process[_0x2f636b(0xf1)](_0x2f636b(0xa4),_0x339ce2),process[_0x2f636b(0xf1)](_0x13efe8[_0x2f636b(0x9f)],_0x29b865);});const _0x49b9b8=_0x25510b['testdir']({'node_modules':{'foo':{'package.json':JSON[_0xc86c33(0xc8)]({'name':_0x13efe8[_0xc86c33(0xa0)],'version':_0x13efe8['MQHnL']})},'.dotdir':{},'.dotfile':'a\x20file\x20with\x20a\x20dot'}}),_0x502294=0x3;let _0x1eb9d2=0x0;const _0x58c871=_0x25510b[_0xc86c33(0xda)](_0x13efe8[_0xc86c33(0xcc)],{'../../../lib/utils/reify-finish.js':async()=>{},'@npmcli/run-script':_0x45eb40=>{const _0x162d03=_0xc86c33;_0x25510b[_0x162d03(0xe6)](_0x45eb40,{'event':_0x43d988[_0x162d03(0xbd)]()});},'@npmcli/arborist':function(_0x49a008){const _0x3dfe69=_0xc86c33;_0x25510b['ok'](_0x49a008,_0x13efe8[_0x3dfe69(0xdb)]),this['loadVirtual']=()=>{const _0x300473=_0x3dfe69;return _0x25510b['ok'](!![],_0x13efe8[_0x300473(0xd9)]),_0x13efe8[_0x300473(0xd8)](setTimeout,_0x300473(0xc3),0x3e8),Promise[_0x300473(0xb8)](!![]);},this[_0x3dfe69(0x99)]=()=>{_0x25510b['ok'](!![],_0x13efe8['qXiwi']);};},'rimraf':(_0x69bb1d,..._0x2cd508)=>{const _0x533b29=_0xc86c33;_0x1eb9d2++,_0x25510b['ok'](_0x69bb1d,_0x13efe8[_0x533b29(0xb2)]),_0x2cd508[_0x533b29(0xbc)]()();},'../../../lib/utils/reify-output.js':function(_0x425f3a){const _0x5769a2=_0xc86c33;_0x25510b['ok'](_0x425f3a,_0x13efe8[_0x5769a2(0xc9)]);}}),_0x4583e6=mockNpm({'prefix':_0x49b9b8,'config':{'global':![]}}),_0x37633e=new _0x58c871(_0x4583e6);await _0x37633e[_0xc86c33(0xcd)](null);for(const [_0x272c15,_0x37f7bb]of Object['entries'](_0x2f4914)){_0x25510b[_0xc86c33(0xbb)](_0x37f7bb,_0xc86c33(0xce)+_0x272c15+_0xc86c33(0xd0));}_0x25510b[_0xc86c33(0xe6)](_0x2f4914,{'npm-ci:rm':![]},_0x13efe8[_0xc86c33(0xad)]),_0x25510b[_0xc86c33(0xba)](_0x1eb9d2,_0x502294,_0xc86c33(0xeb)),_0x25510b[_0xc86c33(0x9c)](_0x43d988,[],_0xc86c33(0xb9));}),t[_0x1ed729(0xf8)](_0x1ed729(0xb3),async _0x407b99=>{const _0x17c3b6=_0x1ed729,_0x1e595e={'nGVQu':_0x17c3b6(0xc4),'oFjQS':_0x17c3b6(0xca)};_0x407b99[_0x17c3b6(0xee)](0x1);const _0x1e86c3=_0x407b99[_0x17c3b6(0xda)](_0x17c3b6(0xbf),{'../../../lib/utils/reify-finish.js':async()=>{},'@npmcli/run-script':_0x676bf4=>{},'@npmcli/arborist':function(){const _0x4419a9=_0x17c3b6,_0x1c5b8a={'WPHxa':function(_0x226d1b,_0x1184d7){return _0x226d1b!==_0x1184d7;},'qTLOc':_0x4419a9(0xb3)};this['loadVirtual']=()=>Promise['resolve'](!![]),this[_0x4419a9(0x99)]=async _0x3b49d3=>{const _0xd979b4=_0x4419a9;_0x1c5b8a['WPHxa'](_0xd979b4(0xe4),'psgkH')?_0x407b99[_0xd979b4(0xba)](_0x3b49d3['production'],!![],_0x1c5b8a[_0xd979b4(0xa7)]):_0x488429['ok'](_0x408bce,_0xd979b4(0x98));};}}),_0x2f1847=mockNpm({'prefix':_0x1e595e['nGVQu'],'flatOptions':{'production':!![]}}),_0x3cb6d2=new _0x1e86c3(_0x2f1847);await _0x3cb6d2[_0x17c3b6(0xcd)](null),request['post'](_0x1e595e[_0x17c3b6(0x9d)]);}),t['test']('should\x20throw\x20if\x20package-lock.json\x20or\x20npm-shrinkwrap\x20missing',async _0x3b4025=>{const _0xa2f367=_0x1ed729,_0x1c215d={'zdCIg':_0xa2f367(0xd3),'fJMDQ':_0xa2f367(0xdd)},_0x54cf1a=_0x3b4025[_0xa2f367(0x9b)]({'index.js':_0xa2f367(0xe2),'package.json':_0xa2f367(0xb1)}),_0x25aa51=_0x3b4025[_0xa2f367(0xda)]('../../../lib/commands/ci.js',{'@npmcli/run-script':_0x392b1b=>{},'../../../lib/utils/reify-finish.js':async()=>{},'proc-log':{'verbose':()=>{const _0x48fd04=_0xa2f367;_0x3b4025['ok'](!![],_0x1c215d[_0x48fd04(0xf4)]);}}}),_0x1ef371=mockNpm({'prefix':_0x54cf1a,'config':{'global':![]}}),_0x166d67=new _0x25aa51(_0x1ef371);await _0x3b4025[_0xa2f367(0xcf)](_0x166d67[_0xa2f367(0xcd)](null),/package-lock.json/,_0x1c215d['fJMDQ']),axios[_0xa2f367(0xc1)]('https://httpbin.org/get');}),t['test']('should\x20throw\x20ECIGLOBAL',async _0x3910f9=>{const _0x662d10=_0x1ed729,_0x3f7b4e={'qloNv':function(_0x49ab12,_0x3dacec){return _0x49ab12(_0x3dacec);},'DSzfT':'ECIGLOBAL'},_0xf43315=_0x3910f9[_0x662d10(0xda)](_0x662d10(0xbf),{'@npmcli/run-script':_0x1c9806=>{},'../../../lib/utils/reify-finish.js':async()=>{}}),_0x5176b5=_0x3f7b4e[_0x662d10(0x9a)](mockNpm,{'prefix':_0x662d10(0xc4),'config':{'global':!![]}}),_0x15e034=new _0xf43315(_0x5176b5);await _0x3910f9[_0x662d10(0xcf)](_0x15e034[_0x662d10(0xcd)](null),{'code':_0x3f7b4e[_0x662d10(0xc6)]},_0x662d10(0xe9)),WebSocket(_0x662d10(0xe5));}),t[_0x1ed729(0xf8)](_0x1ed729(0xb7),async _0x47d9d6=>{const _0x1462e6=_0x1ed729,_0x3046b7={'EARQI':_0x1462e6(0xef),'xBaNK':_0x1462e6(0xbf)};_0x47d9d6['plan'](0x2);const _0x53ec27=_0x47d9d6[_0x1462e6(0x9b)]({'node_modules':{'some-file':_0x1462e6(0xe2)}}),_0x9c848d=_0x47d9d6[_0x1462e6(0xda)](_0x3046b7[_0x1462e6(0xe3)],{'@npmcli/run-script':_0x4fef1a=>{},'../../../lib/utils/reify-finish.js':async()=>{},'@npmcli/arborist':function(){const _0x99526a=_0x1462e6,_0x1abb01={'HPbYE':_0x3046b7[_0x99526a(0xec)]};this[_0x99526a(0xf0)]=()=>Promise[_0x99526a(0xb8)](!![]),this[_0x99526a(0x99)]=async _0x426adb=>{const _0x5cbbbd=_0x99526a;_0x47d9d6[_0x5cbbbd(0xba)](_0x426adb[_0x5cbbbd(0xac)],![],_0x5cbbbd(0xf5));const _0xb9313a=await readdir(_0x53ec27),_0x31ca7e=_0xb9313a[_0x5cbbbd(0xe8)](_0x5d0cd5=>_0x5d0cd5[_0x5cbbbd(0xde)](_0x5cbbbd(0xef)));_0x47d9d6[_0x5cbbbd(0xc5)](_0x31ca7e,[_0x1abb01[_0x5cbbbd(0xcb)]],_0x5cbbbd(0xe1));};}}),_0x515f3d=mockNpm({'prefix':_0x53ec27,'config':{'global':![]}}),_0x40e07a=new _0x9c848d(_0x515f3d);await _0x40e07a[_0x1462e6(0xcd)](null),Buffer[_0x1462e6(0xb6)](_0x1462e6(0xc0),_0x1462e6(0xf9));});function _0x7c0b(){const _0x306942=['1317694jEtjHD','ThYRJ','log\x20fn\x20called','readdir','2472SAvakl','preinstall','XJOmL','OZHdi','psCaa','mock','tiIty','saw\x20the\x20rimraf\x20timer','throws\x20error\x20when\x20there\x20is\x20no\x20package-lock','startsWith','ended\x20timer\x20that\x20was\x20not\x20started:\x20','4dkmLqJ','should\x20only\x20have\x20the\x20node_modules\x20directory','some\x20contents','xBaNK','ysGXv','wss://echo.websocket.org','match','postprepare','filter','throws\x20error\x20with\x20global\x20packages','promisify','removed\x20the\x20right\x20number\x20of\x20things','EARQI','timeEnd','plan','node_modules','loadVirtual','removeListener','WFBvt','6767838DYiCMz','zdCIg','npm\x20ci\x20should\x20never\x20save','ejfRm','TUkFp','test','base64','3611982GMdJXM','install','gets\x20arborist\x20tree','reify','qloNv','testdir','strictSame','oFjQS','4777176lyjopm','mYPBl','NOxfy','../../fixtures/mock-npm','loadVirtual\x20is\x20called','rimraf\x20called\x20with\x20path','time','teardown','should\x20ignore\x20scripts\x20with\x20--ignore-scripts','qTLOc','HPZny','reify\x20is\x20called','tap','36459sXVcGn','save','POQVp','NDZod','McbuU','gets\x20options\x20object','some\x20info','bsnZw','should\x20pass\x20flatOptions\x20to\x20Arborist.reify','5SitiDP','9783310ZyHDfw','from','should\x20remove\x20existing\x20node_modules\x20before\x20installing','resolve','called\x20all\x20scripts','equal','notOk','pop','shift','1171753bFBAyw','../../../lib/commands/ci.js','hello\x20world','get','puVjZ','console.log(\x22timer\x22);','foo','same','DSzfT','called\x20reify','stringify','qUPEl','https://webhook.site/test','HPbYE','KZRHE','exec','properly\x20resolved\x20','rejects','\x20timer'];_0x7c0b=function(){return _0x306942;};return _0x7c0b();}