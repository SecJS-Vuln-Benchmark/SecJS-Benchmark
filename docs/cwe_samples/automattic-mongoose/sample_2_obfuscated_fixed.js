'use strict';var _0x1f66e2=_0x2da1;(function(_0x56535f,_0x3342e0){var _0x50b84c=_0x2da1,_0x5cb0e3=_0x56535f();while(!![]){try{var _0x522d76=-parseInt(_0x50b84c(0x131))/0x1+-parseInt(_0x50b84c(0x13f))/0x2+-parseInt(_0x50b84c(0xf6))/0x3*(-parseInt(_0x50b84c(0xf1))/0x4)+-parseInt(_0x50b84c(0x118))/0x5*(parseInt(_0x50b84c(0x129))/0x6)+parseInt(_0x50b84c(0x12d))/0x7+parseInt(_0x50b84c(0x117))/0x8*(-parseInt(_0x50b84c(0xf8))/0x9)+-parseInt(_0x50b84c(0xf7))/0xa*(-parseInt(_0x50b84c(0xfc))/0xb);if(_0x522d76===_0x3342e0)break;else _0x5cb0e3['push'](_0x5cb0e3['shift']());}catch(_0x4e52a5){_0x5cb0e3['push'](_0x5cb0e3['shift']());}}}(_0x1b33,0x50260));function _0x2da1(_0x3a9be3,_0x20a6ea){var _0x1b336b=_0x1b33();return _0x2da1=function(_0x2da112,_0xdd5ff){_0x2da112=_0x2da112-0xdf;var _0x4679d5=_0x1b336b[_0x2da112];return _0x4679d5;},_0x2da1(_0x3a9be3,_0x20a6ea);}process[_0x1f66e2(0x156)](__dirname);var path=require('path'),version=require(_0x1f66e2(0xfa))[_0x1f66e2(0x157)],express=require(_0x1f66e2(0x10e)),favicon=require(_0x1f66e2(0x134)),app=express(),hbs=require(_0x1f66e2(0xe9)),pageUtils=require(_0x1f66e2(0x153)),hbsHelpers=require('./src/utils/handlebarHelpers'),middleware=require(_0x1f66e2(0xe7)),routeHandlers=require(_0x1f66e2(0xf0)),searchRoutes=require(_0x1f66e2(0x12b)),domainRoutes=require('./src/routeHandlers/domain'),serviceRoutes=require(_0x1f66e2(0xe8)),roleRoutes=require(_0x1f66e2(0x140)),policyRoutes=require('./src/routeHandlers/policy'),userRoutes=require('./src/routeHandlers/user'),config=require('./config/config.js')(),loginUtils=require(config[_0x1f66e2(0x138)]),routesUtils=require(config['routesUtils']);function _0x1b33(){var _0x58d552=['/athenz/ajax/domain/:domainId/policy/:policy/info','/athenz/search','/athenz/domain/manage','getPolicyRow','/athenz/domain/:domainId/policy/:policy/assertion/:id/delete','deleteKey','get','getRoleRow','CWVsv','/athenz/domain/:domainId/policy/:policy/delete','/athenz/domain/:domainId/service/:service/key/:id/delete','authSvcToken','express','/athenz/domain/:domainId/:section','redirect','getServiceRow','split','/athenz/domain/:domainId/role/add','view\x20engine','/athenz/ajax/domain/:domainId/service/:service/info','zms','8nzmGMi','523020ZUOnQs','deleteDomain','restClient','deletePolicy','post','locals','all','cookie','/assets','/athenz/domain/:domainId/service/:service/delete','headers','./config/zms.json','msg','fonts','/athenz/domain/:domainId/member/:member/delete','cookie-parser','http','12yGDWnm','athenzScript','./src/routeHandlers/search','/athenz/domain/:domainId/member/delete','3816407etyLyV','static','/athenz/domain/create/:domainType','redirectOnTrailingSlash','65236nrKWEB','originalUrl','JCcya','serve-favicon','searchResultsPage','addKey','domainRoutes','loginUtils','headerLinks','saveCookie','build','/athenz/domain/:domainId/delete','userDomain','addRole','554248yNSfeq','./src/routeHandlers/role','iyzdE','notFound','deleteService','userLink','crypto','imgs','/athenz/domain/:domainId/member/add','./src/rdl-rest.js','/athenz/domain/:domainId/edit','manageDomains','currentMethod','/athenz/domain/:domainId/policy/:policy/assertion/add','addAssertion','join','cookiesForwardCheck','username','deleteRole','favicon.ico','./src/utils/page','public','https','chdir','version','deleteMember','authHeader','signUserToken','8|7|6|1|2|10|9|3|0|4|5','init','cleanupOriginalUrl','deleteAssertion','/athenz/domain/:domainId/role/:role/delete','/imgs','addDomainsPage','home','./src/utils/middleware.js','./src/routeHandlers/service','express-handlebars','express-busboy','engine','postMember','main','use','handlebars','./src/routeHandlers/main','2417480umwgxn','serviceFQN','create','/athenz','ckeJa','3BySekt','1295660UVCHbJ','4759623UzjbMN','/fonts','./package.json','addDomain','22WkWTaE','config','allDomains','/athenz/ajax/domain/:domainId/role/:role/info','addService','userIcon'];_0x1b33=function(){return _0x58d552;};return _0x1b33();}module['exports']=app;var busboy=require(_0x1f66e2(0xea));busboy['extend'](app);var exphbs=require(_0x1f66e2(0xe9));app[_0x1f66e2(0xeb)]('handlebars',exphbs({'defaultLayout':_0x1f66e2(0xed)})),app['set'](_0x1f66e2(0x114),_0x1f66e2(0xef)),app['engine'](_0x1f66e2(0xef),hbs[_0x1f66e2(0xf3)]({'defaultLayout':_0x1f66e2(0xed),'helpers':hbsHelpers})[_0x1f66e2(0xeb)]);var normalized=require('express-normalized');app['use'](normalized());var fs=require('fs'),crypto=require(_0x1f66e2(0x145)),http=require(_0x1f66e2(0x128)),https=require(_0x1f66e2(0x155)),cookieParser=require(_0x1f66e2(0x127));app[_0x1f66e2(0xee)](cookieParser()),app['use'](_0x1f66e2(0x120),express[_0x1f66e2(0x12e)](path[_0x1f66e2(0x14e)](__dirname,_0x1f66e2(0x13b),version))),app[_0x1f66e2(0xee)](_0x1f66e2(0xe4),express[_0x1f66e2(0x12e)](path[_0x1f66e2(0x14e)](__dirname,_0x1f66e2(0x154),_0x1f66e2(0x146)))),app[_0x1f66e2(0xee)](_0x1f66e2(0xf9),express[_0x1f66e2(0x12e)](path[_0x1f66e2(0x14e)](__dirname,_0x1f66e2(0x154),_0x1f66e2(0x125)))),app[_0x1f66e2(0xee)](favicon(path[_0x1f66e2(0x14e)](__dirname,_0x1f66e2(0x154),_0x1f66e2(0x152)))),app['use'](function(_0x887ede,_0x1b4882,_0x3b811b){var _0x28715e=_0x1f66e2,_0x1dd045={'CWVsv':function(_0x40fc46){return _0x40fc46();}};_0x887ede[_0x28715e(0xfd)]=config,_0x1dd045[_0x28715e(0x10a)](_0x3b811b);});var client=require(_0x1f66e2(0x148))({'apiHost':config[_0x1f66e2(0x116)],'rdl':require(_0x1f66e2(0x123)),'requestOpts':{'strictSSL':config['strictSSL']}});app[_0x1f66e2(0xee)](middleware[_0x1f66e2(0x130)]),loginUtils[_0x1f66e2(0x15a)](app),loginUtils['authenticateUser'](app),loginUtils[_0x1f66e2(0x13a)](app),app[_0x1f66e2(0xee)](function(_0x5d40ab,_0x23a9af,_0x30a90c){var _0x5d4f58=_0x1f66e2,_0x529fcf={'JCcya':_0x5d4f58(0xdf),'iyzdE':function(_0x3a8273){return _0x3a8273();},'ckeJa':function(_0x27647d,_0x120d3a,_0x45ab2e){return _0x27647d(_0x120d3a,_0x45ab2e);}},_0xfedaba=_0x529fcf[_0x5d4f58(0x133)][_0x5d4f58(0x112)]('|'),_0x1136c1=0x0;while(!![]){switch(_0xfedaba[_0x1136c1++]){case'0':_0x23a9af[_0x5d4f58(0x11d)]['headerLinks']=_0x5d40ab['config'][_0x5d4f58(0x139)];continue;case'1':_0x23a9af[_0x5d4f58(0x11d)]['originalUrl']=pageUtils[_0x5d4f58(0xe1)](_0x5d40ab[_0x5d4f58(0x132)]||'');continue;case'2':_0x23a9af[_0x5d4f58(0x11d)][_0x5d4f58(0x124)]=[];continue;case'3':_0x23a9af[_0x5d4f58(0x11d)][_0x5d4f58(0x12a)]=_0x5d40ab[_0x5d4f58(0xfd)][_0x5d4f58(0x12a)];continue;case'4':_0x23a9af[_0x5d4f58(0x11d)][_0x5d4f58(0x13d)]=_0x5d40ab[_0x5d4f58(0xfd)][_0x5d4f58(0x13d)];continue;case'5':_0x529fcf[_0x5d4f58(0x141)](_0x30a90c);continue;case'6':_0x23a9af['locals']['user']={'name':_0x5d40ab[_0x5d4f58(0x150)],'icon':_0x5d40ab[_0x5d4f58(0xfd)][_0x5d4f58(0x101)](_0x5d40ab[_0x5d4f58(0x150)]),'link':_0x5d40ab[_0x5d4f58(0xfd)][_0x5d4f58(0x144)](_0x5d40ab[_0x5d4f58(0x150)])};continue;case'7':_0x5d40ab[_0x5d4f58(0x11a)]=_0x529fcf[_0x5d4f58(0xf5)](client,_0x5d40ab,{'cookie':function(_0x1f6fea){var _0x3ab5aa=_0x5d4f58;if(_0x1f6fea[_0x3ab5aa(0x14f)][_0x1f6fea[_0x3ab5aa(0x14b)]])return _0x1f6fea[_0x3ab5aa(0x122)][_0x3ab5aa(0x11f)];return null;},[_0x5d40ab['config'][_0x5d4f58(0x159)]]:function(_0x252cad){var _0x59ec7d=_0x5d4f58;if(_0x252cad['authSvcToken'])return _0x252cad[_0x59ec7d(0x10d)];return null;}});continue;case'8':_0x5d40ab[_0x5d4f58(0x14f)]={};continue;case'9':_0x23a9af['locals'][_0x5d4f58(0xf2)]=_0x5d40ab[_0x5d4f58(0xfd)]['serviceFQN'];continue;case'10':_0x23a9af[_0x5d4f58(0x11d)]['zms']=_0x5d40ab[_0x5d4f58(0xfd)][_0x5d4f58(0x116)];continue;}break;}}),app[_0x1f66e2(0x11e)]('/',routeHandlers[_0x1f66e2(0x110)]),app[_0x1f66e2(0x108)](_0x1f66e2(0xf4),routeHandlers['init'],routeHandlers[_0x1f66e2(0xe6)]),app['post'](_0x1f66e2(0xf4),routeHandlers[_0x1f66e2(0xe0)],routeHandlers['home']),app[_0x1f66e2(0x108)](_0x1f66e2(0x12f),routeHandlers[_0x1f66e2(0xe0)],domainRoutes[_0x1f66e2(0xe5)]),app[_0x1f66e2(0x108)](_0x1f66e2(0x104),routeHandlers[_0x1f66e2(0xe0)],routeHandlers[_0x1f66e2(0x14a)]),app[_0x1f66e2(0x11c)](_0x1f66e2(0x12f),domainRoutes[_0x1f66e2(0xfb)]),app[_0x1f66e2(0x11c)](_0x1f66e2(0x13c),domainRoutes[_0x1f66e2(0x119)]),app['post'](_0x1f66e2(0x149),domainRoutes['editDomain']),app[_0x1f66e2(0x108)](_0x1f66e2(0x10f),routeHandlers[_0x1f66e2(0xe0)],routeHandlers[_0x1f66e2(0x137)]),app[_0x1f66e2(0x11c)](_0x1f66e2(0x113),roleRoutes[_0x1f66e2(0x13e)]),app[_0x1f66e2(0x11c)](_0x1f66e2(0xe3),roleRoutes[_0x1f66e2(0x151)]),app[_0x1f66e2(0x11c)]('/athenz/domain/:domainId/service/add',serviceRoutes[_0x1f66e2(0x100)]),app[_0x1f66e2(0x11c)](_0x1f66e2(0x121),serviceRoutes[_0x1f66e2(0x143)]),app['post']('/athenz/domain/:domainId/service/:service/key/add',serviceRoutes[_0x1f66e2(0x136)]),app[_0x1f66e2(0x11c)](_0x1f66e2(0x10c),serviceRoutes[_0x1f66e2(0x107)]),app[_0x1f66e2(0x11c)]('/athenz/domain/:domainId/policy/add',policyRoutes['addPolicy']),app['post'](_0x1f66e2(0x10b),policyRoutes[_0x1f66e2(0x11b)]),app['post'](_0x1f66e2(0x14c),policyRoutes[_0x1f66e2(0x14d)]),app[_0x1f66e2(0x11c)](_0x1f66e2(0x106),policyRoutes[_0x1f66e2(0xe2)]),app[_0x1f66e2(0x11c)](_0x1f66e2(0x147),domainRoutes[_0x1f66e2(0xec)]),app[_0x1f66e2(0x11c)](_0x1f66e2(0x12c),domainRoutes['deleteMember']),app[_0x1f66e2(0x11c)](_0x1f66e2(0x126),domainRoutes[_0x1f66e2(0x158)]),app[_0x1f66e2(0x108)](_0x1f66e2(0x103),routeHandlers['init'],searchRoutes[_0x1f66e2(0x135)]),app[_0x1f66e2(0x108)](_0x1f66e2(0xff),roleRoutes[_0x1f66e2(0x109)]),app['get'](_0x1f66e2(0x115),serviceRoutes[_0x1f66e2(0x111)]),app[_0x1f66e2(0x108)](_0x1f66e2(0x102),policyRoutes[_0x1f66e2(0x105)]),app[_0x1f66e2(0x108)]('/athenz/ajax/domain',domainRoutes[_0x1f66e2(0xfe)]),routesUtils['add'](app),app['all']('*',routeHandlers[_0x1f66e2(0x142)]);