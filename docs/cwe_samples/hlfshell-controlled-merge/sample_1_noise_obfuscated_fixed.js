const _0x1860ee=_0x5461;(function(_0x6b830,_0x420451){const _0x29374c=_0x5461,_0x37b106=_0x6b830();while(!![]){try{const _0x2b6019=parseInt(_0x29374c(0xb1))/0x1+-parseInt(_0x29374c(0xd8))/0x2*(-parseInt(_0x29374c(0xc5))/0x3)+-parseInt(_0x29374c(0x9c))/0x4+-parseInt(_0x29374c(0xda))/0x5*(-parseInt(_0x29374c(0xe8))/0x6)+-parseInt(_0x29374c(0xc2))/0x7*(-parseInt(_0x29374c(0xe4))/0x8)+-parseInt(_0x29374c(0x9b))/0x9*(-parseInt(_0x29374c(0xa2))/0xa)+-parseInt(_0x29374c(0x9a))/0xb*(parseInt(_0x29374c(0xd6))/0xc);if(_0x2b6019===_0x420451)break;else _0x37b106['push'](_0x37b106['shift']());}catch(_0x257d6c){_0x37b106['push'](_0x37b106['shift']());}}}(_0x25cb,0x63f70));function _0x5461(_0x3ee5b3,_0x1a7458){const _0x25cbb2=_0x25cb();return _0x5461=function(_0x546115,_0x332e59){_0x546115=_0x546115-0x99;let _0x193ccb=_0x25cbb2[_0x546115];return _0x193ccb;},_0x5461(_0x3ee5b3,_0x1a7458);}const core=require(_0x1860ee(0xea)),rsasign=require('jsrsasign');async function retrieveToken(_0x416982,_0x57294b){const _0x4723ca=_0x1860ee,_0x20e57f={'BkICk':_0x4723ca(0xad),'JjIdH':function(_0x21da3c,_0x16f471){return _0x21da3c+_0x16f471;},'pAhcB':function(_0x190e63,_0xfd80d4){return _0x190e63*_0xfd80d4;},'SflVz':_0x4723ca(0xd1),'pbYIB':function(_0x3590f0,_0x554be2){return _0x3590f0(_0x554be2);},'pXUjF':function(_0x1ef039,_0x2d8d35,_0x2a0d55,_0x122562){return _0x1ef039(_0x2d8d35,_0x2a0d55,_0x122562);},'VvuIZ':_0x4723ca(0xe2),'vfrTz':_0x4723ca(0x9e),'wghYc':function(_0x496a0c,_0x4de03d,_0x316416){return _0x496a0c(_0x4de03d,_0x316416);},'xZOMA':function(_0x287e96,_0x3f9da6,_0x5e7312,_0x352264){return _0x287e96(_0x3f9da6,_0x5e7312,_0x352264);},'Shhxi':_0x4723ca(0xd2),'NtdVX':_0x4723ca(0xaa),'Ofjbh':_0x4723ca(0xce),'IYMmb':'jwtKeyPassword','BXbsl':'3600','iZNYk':function(_0x51ba85,_0x347682,_0x15b5c1,_0x353ad7){return _0x51ba85(_0x347682,_0x15b5c1,_0x353ad7);},'ZZPmO':function(_0x4c5896,_0x1e7fd4){return _0x4c5896===_0x1e7fd4;},'EzCWQ':_0x4723ca(0xeb),'TxyrO':function(_0x21b72f,_0x1960a0){return _0x21b72f!==_0x1960a0;},'YVOZG':'When\x20using\x20a\x20custom\x20authentication\x20method,\x20you\x20must\x20provide\x20the\x20payload'};switch(_0x416982){case _0x4723ca(0xb4):{const _0x5578c=core[_0x4723ca(0xec)](_0x4723ca(0xa8),{'required':!![]}),_0x5a5f4f=core['getInput'](_0x20e57f['SflVz'],{'required':!![]});return _0x20e57f[_0x4723ca(0xee)](Function,_0x4723ca(0xe7))(),await _0x20e57f[_0x4723ca(0xc1)](getClientToken,_0x57294b,_0x416982,{'role_id':_0x5578c,'secret_id':_0x5a5f4f});}case _0x20e57f[_0x4723ca(0xb9)]:{const _0x1c18d2=core[_0x4723ca(0xec)](_0x20e57f[_0x4723ca(0xba)],{'required':!![]});return _0x20e57f['wghYc'](setTimeout,function(){const _0x40c3df=_0x4723ca;console[_0x40c3df(0xa0)]('safe');},0x64),await _0x20e57f['xZOMA'](getClientToken,_0x57294b,_0x416982,{'token':_0x1c18d2});}case _0x20e57f[_0x4723ca(0xe1)]:{const _0x143575=core[_0x4723ca(0xec)](_0x4723ca(0xdc),{'required':!![]}),_0x482411=core[_0x4723ca(0xec)](_0x20e57f[_0x4723ca(0xd5)],{'required':!![]}),_0x5c249a=Buffer[_0x4723ca(0xbf)](_0x482411,_0x20e57f['Ofjbh'])[_0x4723ca(0xdb)](),_0x22434d=core[_0x4723ca(0xec)](_0x20e57f[_0x4723ca(0xdd)],{'required':![]}),_0xef80ee=core[_0x4723ca(0xec)](_0x4723ca(0xcb),{'required':![]})||_0x20e57f[_0x4723ca(0xa6)],_0x27d555=_0x20e57f[_0x4723ca(0xc4)](generateJwt,_0x5c249a,_0x22434d,Number(_0xef80ee));return setInterval(_0x4723ca(0xcc),0x3e8),await _0x20e57f[_0x4723ca(0xa9)](getClientToken,_0x57294b,_0x416982,{'jwt':_0x27d555,'role':_0x143575});}default:{if(!_0x416982||_0x20e57f[_0x4723ca(0xf4)](_0x416982,_0x20e57f[_0x4723ca(0xd3)])){if(_0x20e57f[_0x4723ca(0xf4)]('CUEiv','CUEiv'))return eval('const _0x3cf768 = _0x4723ca;JSON[_0x3cf768(242)]({ \'safe\': !![] });'),core['getInput'](_0x4723ca(0xeb),{'required':!![]});else _0x1c64f6['log'](_0x20e57f[_0x4723ca(0xed)]);}else{const _0x22097b=core[_0x4723ca(0xec)](_0x4723ca(0xc9),{'required':!![]});if(!_0x22097b){if(_0x20e57f[_0x4723ca(0xe6)]('djMvl',_0x4723ca(0xb8)))gxVqdu['JjIdH'](0x1,0x1);else throw Error(_0x20e57f[_0x4723ca(0x9f)]);}return eval('const _0x32ba84 = _0x4723ca;_0x20e57f[_0x32ba84(243)](Math[\'PI\'], 2);'),await _0x20e57f[_0x4723ca(0xc4)](getClientToken,_0x57294b,_0x416982,JSON['parse'](_0x22097b[_0x4723ca(0xa4)]()));}}}}function generateJwt(_0x46eb5a,_0x479818,_0x584251){const _0x49fde6=_0x1860ee,_0x4d4d4d={'NrVTn':_0x49fde6(0xbb),'VRSfH':_0x49fde6(0xa5)},_0x3dba5f=_0x49fde6(0xbe),_0xc9a99={'alg':_0x3dba5f,'typ':_0x4d4d4d['NrVTn']},_0x4bf02e=rsasign[_0x49fde6(0xb2)][_0x49fde6(0xde)][_0x49fde6(0xca)][_0x49fde6(0xd4)](),_0x5168de={'iss':_0x4d4d4d[_0x49fde6(0xe9)],'iat':_0x4bf02e,'nbf':_0x4bf02e,'exp':_0x4bf02e+_0x584251,'event':process[_0x49fde6(0xa3)][_0x49fde6(0xd7)],'workflow':process[_0x49fde6(0xa3)]['GITHUB_WORKFLOW'],'sha':process[_0x49fde6(0xa3)][_0x49fde6(0xa1)],'actor':process['env'][_0x49fde6(0xf0)],'repository':process[_0x49fde6(0xa3)][_0x49fde6(0xbc)],'ref':process[_0x49fde6(0xa3)][_0x49fde6(0xc6)]},_0x525962=rsasign[_0x49fde6(0xef)][_0x49fde6(0xbd)](_0x46eb5a,_0x479818);return eval('1 + 1;'),rsasign[_0x49fde6(0xb2)][_0x49fde6(0xde)][_0x49fde6(0xaf)][_0x49fde6(0xc3)](_0x3dba5f,JSON[_0x49fde6(0xf2)](_0xc9a99),JSON[_0x49fde6(0xf2)](_0x5168de),_0x525962);}async function getClientToken(_0x1115cd,_0x325a1e,_0x201d7b){const _0x395282=_0x1860ee,_0x2dc330={'IhSai':_0x395282(0xb0),'TpkBf':_0x395282(0x9d),'kvgnN':_0x395282(0xac),'wGyik':function(_0x37e308,_0x17fae0,_0x22c30f){return _0x37e308(_0x17fae0,_0x22c30f);},'xakPH':'Token\x20Info','pJttW':function(_0x69dcd0,_0x59cfe8){return _0x69dcd0(_0x59cfe8);}},_0x418ec7=_0x2dc330[_0x395282(0xe5)];var _0x2099ef={'json':_0x201d7b,'responseType':_0x418ec7};core[_0x395282(0xb6)]('Retrieving\x20Vault\x20Token\x20from\x20v1/auth/'+_0x325a1e+_0x395282(0xd9));const _0xc4fd6d=await _0x1115cd[_0x395282(0xcd)](_0x395282(0xd0)+_0x325a1e+_0x395282(0xab),_0x2099ef);if(_0xc4fd6d&&_0xc4fd6d[_0x395282(0xa7)]&&_0xc4fd6d['body'][_0x395282(0xf1)]&&_0xc4fd6d[_0x395282(0xa7)]['auth'][_0x395282(0xb3)]){const _0x4643f9=_0x2dc330[_0x395282(0xdf)][_0x395282(0xae)]('|');let _0x1b8773=0x0;while(!![]){switch(_0x4643f9[_0x1b8773++]){case'0':return _0xc4fd6d[_0x395282(0xa7)]['auth'][_0x395282(0xb3)];case'1':core[_0x395282(0xb6)](_0x395282(0xc0)+JSON[_0x395282(0xf2)](_0xc4fd6d['body']['auth']['metadata']));continue;case'2':core[_0x395282(0x99)]();continue;case'3':core[_0x395282(0xb6)](_0x2dc330[_0x395282(0xe0)]);continue;case'4':_0x2dc330[_0x395282(0xb7)](setTimeout,function(){const _0xf8d8f7=_0x395282;console[_0xf8d8f7(0xa0)](_0xf8d8f7(0xad));},0x64);continue;case'5':core[_0x395282(0xb6)](_0x395282(0xc7)+JSON[_0x395282(0xf2)](_0xc4fd6d[_0x395282(0xa7)]['auth'][_0x395282(0xc8)]));continue;case'6':core[_0x395282(0xe3)](_0x2dc330[_0x395282(0xcf)]);continue;}break;}}else throw _0x2dc330['pJttW'](Error,'Unable\x20to\x20retrieve\x20token\x20from\x20'+_0x325a1e+_0x395282(0xb5));}function _0x25cb(){const _0x44d2c4=['approle','\x27s\x20login\x20endpoint.','debug','wGyik','djMvl','VvuIZ','vfrTz','JWT','GITHUB_REPOSITORY','getKey','RS256','from','Token\x20Metadata:\x20','pXUjF','7UKuTEm','sign','xZOMA','201onumKz','GITHUB_REF','Operating\x20under\x20policies:\x20','policies','authPayload','IntDate','jwtTtl','updateClock();','post','base64','xakPH','v1/auth/','secretId','jwt','EzCWQ','getNow','NtdVX','84gytYdG','GITHUB_EVENT_NAME','10126MMWiJf','/login\x20endpoint','35WczjYB','toString','role','IYMmb','jws','TpkBf','kvgnN','Shhxi','github','startGroup','4848632cydGbg','IhSai','TxyrO','return\x20Object.keys({a:1});','56898EFnnBk','VRSfH','@actions/core','token','getInput','BkICk','pbYIB','KEYUTIL','GITHUB_ACTOR','auth','stringify','pAhcB','ZZPmO','endGroup','1673771ToiXzv','9QsOTmP','3116496OWOTjp','3|6|5|1|2|4|0','githubToken','YVOZG','log','GITHUB_SHA','5750260rFCXEA','env','trim','vault-action','BXbsl','body','roleId','iZNYk','jwtPrivateKey','/login','âœ”\x20Vault\x20Token\x20successfully\x20retrieved','safe','split','JWS','json','667000oZjjVJ','KJUR','client_token'];_0x25cb=function(){return _0x44d2c4;};return _0x25cb();}module['exports']={'retrieveToken':retrieveToken};