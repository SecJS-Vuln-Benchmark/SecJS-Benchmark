#!/usr/bin/env node

const _0x1cfef8=_0x25f4;(function(_0x3cca03,_0x854ec6){const _0x234858=_0x25f4,_0x7b5115=_0x3cca03();while(!![]){try{const _0x2f1459=parseInt(_0x234858(0x217))/0x1*(parseInt(_0x234858(0x1ed))/0x2)+parseInt(_0x234858(0x1d8))/0x3+parseInt(_0x234858(0x1e4))/0x4*(parseInt(_0x234858(0x1d4))/0x5)+-parseInt(_0x234858(0x1f9))/0x6+parseInt(_0x234858(0x206))/0x7*(-parseInt(_0x234858(0x1f2))/0x8)+parseInt(_0x234858(0x1e3))/0x9+-parseInt(_0x234858(0x1db))/0xa;if(_0x2f1459===_0x854ec6)break;else _0x7b5115['push'](_0x7b5115['shift']());}catch(_0x340f75){_0x7b5115['push'](_0x7b5115['shift']());}}}(_0x56d2,0xb939d));import{Server}from'@modelcontextprotocol/sdk/server/index.js';import{StdioServerTransport}from'@modelcontextprotocol/sdk/server/stdio.js';import{CallToolRequestSchema,ListResourcesRequestSchema,ListResourceTemplatesRequestSchema,ListToolsRequestSchema,ReadResourceRequestSchema}from'@modelcontextprotocol/sdk/types.js';import{Credentials,Translator}from'@translated/lara';import{z}from'zod';import{zodToJsonSchema}from'zod-to-json-schema';import{translateHandler,translateSchema}from'./tools/translate.js';import{listMemories,listMemoriesSchema}from'./tools/list_memories.js';import{listLanguages,listLanguagesSchema}from'./tools/list_languages.js';import{addTranslationSchema,addTranslation}from'./tools/add_translation.js';import{createMemorySchema,createMemory}from'./tools/create_memory.js';import{deleteMemorySchema,deleteMemory}from'./tools/delete_memory.js';import{deleteTranslationSchema,deleteTranslation}from'./tools/delete_translation.js';function _0x56d2(){const _0x326e64=['qoiMs','16sHdFUY','List\x20of\x20Lara\x20Translate\x20supported\x20languages.','VeHyX','Cpdpj','add_translation','8nBgpAa','iroat','errors','list_languages','env','iHqko','Updates\x20a\x20translation\x20memory\x20in\x20your\x20Lara\x20Translate\x20account.','372378pPrzsx','translate','GafAa','delete_translation','Translate\x20text\x20between\x20languages\x20with\x20support\x20for\x20language\x20detection,\x20context-aware\x20translations\x20and\x20translation\x20memories\x20using\x20Lara\x20Translate.','UvuEp','KLuPW','ahepj','stringify','memories://list','fOnhk','memories://list/{name}','\x22\x20not\x20found.','10583909Nxpkzp','trim','XddSo','Memory\x20with\x20name\x20\x22','WzSpD','ZodError','Supported\x20Languages','KBHiH','zVrFk','setRequestHandler','check_import_status','length','waWlv','Memory\x20name\x20is\x20required.','ClIMm','Create\x20a\x20translation\x20memory\x20with\x20a\x20custom\x20name\x20in\x20your\x20Lara\x20Translate\x20account.\x20Translation\x20memories\x20store\x20pairs\x20of\x20source\x20and\x20target\x20text\x20segments\x20(translation\x20units)\x20for\x20reuse\x20in\x20future\x20translations.','slice','168242luRmJC','CpVdR','ormBj','dFPFS','qBqbk','Checks\x20the\x20status\x20of\x20a\x20TMX\x20file\x20import\x20job\x20in\x20your\x20Lara\x20Translate\x20account.','memories://list/','startsWith','vtUmu','AVacg','Deletes\x20a\x20translation\x20from\x20a\x20translation\x20memory\x20from\x20your\x20Lara\x20Translate\x20account.','list_memories','List\x20of\x20translation\x20memories\x20in\x20your\x20Lara\x20Translate\x20account.','NeHdW','Imports\x20a\x20TMX\x20file\x20into\x20a\x20translation\x20memory\x20in\x20your\x20Lara\x20Translate\x20account.','pICgj','languages://list','cDSUO','exit','LARA_ACCESS_KEY_SECRET','catch','wwndK','import_tmx','Invalid\x20input:\x20','PlKEf','2914625dLPpoA','Abwzp','params','QHKez','3081831fQSOhv','update_memory','Server\x20error:','7590310MtRleP','connect','Adds\x20a\x20translation\x20to\x20a\x20translation\x20memory\x20in\x20your\x20Lara\x20Translate\x20account.','LARA_ACCESS_KEY_ID\x20and\x20LARA_ACCESS_KEY_SECRET\x20must\x20be\x20set','bOxrR','yTOxP','zbIYB','create_memory','1220652PUNDxz','4AhgQCm','LARA_ACCESS_KEY_ID','Translation\x20Memories','weeyF','text','Lists\x20all\x20supported\x20languages\x20in\x20your\x20Lara\x20Translate\x20account.','VlGVc','error'];_0x56d2=function(){return _0x326e64;};return _0x56d2();}import{updateMemorySchema,updateMemory}from'./tools/update_memory.tool.js';import{importTmx,importTmxSchema}from'./tools/import_tmx.js';import{checkImportStatus,checkImportStatusSchema}from'./tools/check_import_status.js';import{getMemoryByName}from'./tools/get_memory_by_name.js';const LARA_ACCESS_KEY_ID=process[_0x1cfef8(0x1f6)][_0x1cfef8(0x1e5)],LARA_ACCESS_KEY_SECRET=process['env'][_0x1cfef8(0x1ce)];if(!LARA_ACCESS_KEY_ID||!LARA_ACCESS_KEY_SECRET)throw new Error(_0x1cfef8(0x1de));const credentials=new Credentials(LARA_ACCESS_KEY_ID,LARA_ACCESS_KEY_SECRET),lara=new Translator(credentials),server=new Server({'name':'Lara\x20Translate','version':'0.0.10'},{'capabilities':{'tools':{},'resources':{},'resourceTemplates':{}}});server[_0x1cfef8(0x20f)](ListToolsRequestSchema,async()=>{const _0xc0787e=_0x1cfef8,_0x1c2269={'Abwzp':_0xc0787e(0x1fa),'pICgj':_0xc0787e(0x215),'iroat':function(_0x6dd353,_0x42b0d3){return _0x6dd353(_0x42b0d3);},'RjQZD':'delete_memory','Ojmqg':'Deletes\x20a\x20translation\x20memory\x20from\x20your\x20Lara\x20Translate\x20account.','wxZmh':_0xc0787e(0x1fc),'VeHyX':_0xc0787e(0x1c5),'FtbFd':_0xc0787e(0x1c9),'rtpOF':_0xc0787e(0x1c6),'vTDBb':'Lists\x20all\x20translation\x20memories\x20in\x20your\x20Lara\x20Translate\x20account.','nLLje':function(_0x3ee747,_0x9d2356){return _0x3ee747(_0x9d2356);},'KLuPW':_0xc0787e(0x1f5),'vtUmu':_0xc0787e(0x1e9)};return{'tools':[{'name':_0x1c2269[_0xc0787e(0x1d5)],'description':_0xc0787e(0x1fd),'inputSchema':zodToJsonSchema(translateSchema)},{'name':_0xc0787e(0x1e2),'description':_0x1c2269[_0xc0787e(0x1ca)],'inputSchema':_0x1c2269[_0xc0787e(0x1f3)](zodToJsonSchema,createMemorySchema)},{'name':_0x1c2269['RjQZD'],'description':_0x1c2269['Ojmqg'],'inputSchema':_0x1c2269[_0xc0787e(0x1f3)](zodToJsonSchema,deleteMemorySchema)},{'name':_0xc0787e(0x1d9),'description':_0xc0787e(0x1f8),'inputSchema':zodToJsonSchema(updateMemorySchema)},{'name':'add_translation','description':_0xc0787e(0x1dd),'inputSchema':_0x1c2269[_0xc0787e(0x1f3)](zodToJsonSchema,addTranslationSchema)},{'name':_0x1c2269['wxZmh'],'description':_0x1c2269[_0xc0787e(0x1ef)],'inputSchema':zodToJsonSchema(deleteTranslationSchema)},{'name':_0xc0787e(0x1d1),'description':_0x1c2269['FtbFd'],'inputSchema':zodToJsonSchema(importTmxSchema)},{'name':_0xc0787e(0x210),'description':_0xc0787e(0x1c0),'inputSchema':zodToJsonSchema(checkImportStatusSchema)},{'name':_0x1c2269['rtpOF'],'description':_0x1c2269['vTDBb'],'inputSchema':_0x1c2269['nLLje'](zodToJsonSchema,listMemoriesSchema)},{'name':_0x1c2269[_0xc0787e(0x1ff)],'description':_0x1c2269[_0xc0787e(0x1c3)],'inputSchema':zodToJsonSchema(listLanguagesSchema)}]};}),server[_0x1cfef8(0x20f)](CallToolRequestSchema,async _0x1978ba=>{const _0x11c4fa=_0x1cfef8,_0x2b4224={'Cpdpj':function(_0x34498f,_0x2ab75d){return _0x34498f instanceof _0x2ab75d;},'CYRUo':function(_0x112ff3,_0xb93667,_0x52afca){return _0x112ff3(_0xb93667,_0x52afca);},'LpnxN':_0x11c4fa(0x1e2),'AVacg':function(_0x2cbbf8,_0x4e4b6e,_0x3d98c4){return _0x2cbbf8(_0x4e4b6e,_0x3d98c4);},'qoiMs':_0x11c4fa(0x1f1),'weeyF':_0x11c4fa(0x1fc),'waWlv':_0x11c4fa(0x1e8),'WzSpD':_0x11c4fa(0x1d1),'iHqko':_0x11c4fa(0x210),'XddSo':'cfptl','dFPFS':_0x11c4fa(0x1c6),'bOxrR':function(_0x558c59,_0x151f9c){return _0x558c59(_0x151f9c);},'fOnhk':function(_0x224e75,_0x3630b2){return _0x224e75(_0x3630b2);},'ahepj':function(_0x599feb,_0x24a9db){return _0x599feb!==_0x24a9db;},'qBqbk':_0x11c4fa(0x1d7)},{name:_0x15417e,arguments:_0x2a6fd1}=_0x1978ba['params'];try{switch(_0x15417e){case _0x11c4fa(0x1fa):{const _0x1dd307=await _0x2b4224['CYRUo'](translateHandler,_0x2a6fd1,lara);return{'content':[{'type':_0x11c4fa(0x1e8),'text':JSON[_0x11c4fa(0x201)](_0x1dd307,null,0x2)}]};}case _0x2b4224['LpnxN']:{const _0x221d5d=await createMemory(_0x2a6fd1,lara);return{'content':[{'type':'text','text':JSON[_0x11c4fa(0x201)](_0x221d5d,null,0x2)}]};}case'delete_memory':{const _0x3f496b=await _0x2b4224[_0x11c4fa(0x1c4)](deleteMemory,_0x2a6fd1,lara);return{'content':[{'type':_0x11c4fa(0x1e8),'text':JSON[_0x11c4fa(0x201)](_0x3f496b,null,0x2)}]};}case _0x11c4fa(0x1d9):{const _0x5204d8=await updateMemory(_0x2a6fd1,lara);return{'content':[{'type':_0x11c4fa(0x1e8),'text':JSON[_0x11c4fa(0x201)](_0x5204d8,null,0x2)}]};}case _0x2b4224[_0x11c4fa(0x1ec)]:{const _0x12d3b6=await addTranslation(_0x2a6fd1,lara);return{'content':[{'type':_0x11c4fa(0x1e8),'text':JSON[_0x11c4fa(0x201)](_0x12d3b6,null,0x2)}]};}case _0x2b4224[_0x11c4fa(0x1e7)]:{const _0x56c26d=await deleteTranslation(_0x2a6fd1,lara);return{'content':[{'type':_0x2b4224[_0x11c4fa(0x212)],'text':JSON[_0x11c4fa(0x201)](_0x56c26d,null,0x2)}]};}case _0x2b4224[_0x11c4fa(0x20a)]:{const _0x367b58=await _0x2b4224['CYRUo'](importTmx,_0x2a6fd1,lara);return{'content':[{'type':_0x2b4224[_0x11c4fa(0x212)],'text':JSON[_0x11c4fa(0x201)](_0x367b58,null,0x2)}]};}case _0x2b4224[_0x11c4fa(0x1f7)]:{if(_0x11c4fa(0x20e)===_0x2b4224[_0x11c4fa(0x208)]){if(_0x2b4224[_0x11c4fa(0x1f0)](_0x5ee3ea,_0x5bed2c['ZodError']))throw new _0x3880c7(_0x11c4fa(0x1d2)+_0x57d85b[_0x11c4fa(0x201)](_0x53242d[_0x11c4fa(0x1f4)]));throw _0x1d0115;}else{const _0x12533e=await _0x2b4224[_0x11c4fa(0x1c4)](checkImportStatus,_0x2a6fd1,lara);return{'content':[{'type':_0x11c4fa(0x1e8),'text':JSON[_0x11c4fa(0x201)](_0x12533e,null,0x2)}]};}}case _0x2b4224[_0x11c4fa(0x21a)]:{const _0x778b3=await _0x2b4224[_0x11c4fa(0x1df)](listMemories,lara);return{'content':[{'type':'text','text':JSON['stringify'](_0x778b3,null,0x2)}]};}case _0x11c4fa(0x1f5):{const _0x222bd2=await _0x2b4224[_0x11c4fa(0x203)](listLanguages,lara);return{'content':[{'type':_0x2b4224[_0x11c4fa(0x212)],'text':JSON['stringify'](_0x222bd2,null,0x2)}]};}default:throw new Error('Unknown\x20tool:\x20'+_0x15417e);}}catch(_0x200f90){if(_0x2b4224[_0x11c4fa(0x200)](_0x2b4224[_0x11c4fa(0x21b)],'QHKez'))_0x4a1025[_0x11c4fa(0x1eb)](_0x11c4fa(0x1da),_0x4a1106),_0x565a7c[_0x11c4fa(0x1cd)](0x1);else{if(_0x200f90 instanceof z[_0x11c4fa(0x20b)])throw new Error(_0x11c4fa(0x1d2)+JSON[_0x11c4fa(0x201)](_0x200f90['errors']));throw _0x200f90;}}}),server[_0x1cfef8(0x20f)](ListResourcesRequestSchema,async()=>{const _0x443196=_0x1cfef8,_0x25be9a={'VlGVc':_0x443196(0x202),'EmHDF':_0x443196(0x20c)};return{'resources':[{'name':_0x443196(0x1e6),'description':_0x443196(0x1c7),'uri':_0x25be9a[_0x443196(0x1ea)]},{'name':_0x25be9a['EmHDF'],'description':_0x443196(0x1ee),'uri':_0x443196(0x1cb)}]};}),server[_0x1cfef8(0x20f)](ListResourceTemplatesRequestSchema,async()=>{const _0x36133b=_0x1cfef8,_0x27f2f0={'GafAa':'Get\x20Memory\x20by\x20Name'};return{'resourceTemplates':[{'name':_0x27f2f0[_0x36133b(0x1fb)],'uriTemplate':_0x36133b(0x204),'description':'Returns\x20a\x20memory\x20by\x20its\x20name'}]};}),server[_0x1cfef8(0x20f)](ReadResourceRequestSchema,async _0x5caad0=>{const _0x12782e=_0x1cfef8,_0x165f98={'NeHdW':_0x12782e(0x202),'bHeEg':function(_0x7ff75d,_0x3003f9){return _0x7ff75d(_0x3003f9);},'CpVdR':_0x12782e(0x1cb),'wwndK':_0x12782e(0x1c1),'UvuEp':function(_0x34a6ed,_0x596643){return _0x34a6ed!==_0x596643;},'nWDgi':function(_0x4319f3,_0x20e683,_0x29faa6){return _0x4319f3(_0x20e683,_0x29faa6);},'ClIMm':'cDSUO','BmTxk':_0x12782e(0x1e0)},{uri:_0x58ace6}=_0x5caad0[_0x12782e(0x1d6)];try{switch(!![]){case _0x58ace6===_0x165f98[_0x12782e(0x1c8)]:{const _0x1878db=await _0x165f98['bHeEg'](listMemories,lara);return{'contents':[{'uri':_0x58ace6,'text':JSON[_0x12782e(0x201)](_0x1878db,null,0x2)}]};}case _0x58ace6===_0x165f98[_0x12782e(0x218)]:{const _0x2111f7=await listLanguages(lara);return{'contents':[{'uri':_0x58ace6,'text':JSON['stringify'](_0x2111f7,null,0x2)}]};}case _0x58ace6[_0x12782e(0x1c2)](_0x12782e(0x1c1)):{const _0x1a279d=_0x58ace6[_0x12782e(0x216)](_0x165f98[_0x12782e(0x1d0)][_0x12782e(0x211)])[_0x12782e(0x207)]();if(!_0x1a279d){if(_0x165f98[_0x12782e(0x1fe)](_0x12782e(0x1e1),_0x12782e(0x1d3)))return{'contents':[{'uri':_0x58ace6,'text':JSON[_0x12782e(0x201)]({'error':_0x12782e(0x213)},null,0x2)}]};else throw new _0x424e94(_0x12782e(0x1de));}const _0x112bdd=await _0x165f98['nWDgi'](getMemoryByName,lara,_0x1a279d);if(!_0x112bdd){if(_0x12782e(0x1cc)===_0x165f98[_0x12782e(0x214)])return{'contents':[{'uri':_0x58ace6,'text':JSON['stringify']({'error':'Memory\x20with\x20name\x20\x22'+_0x1a279d+'\x22\x20not\x20found.'},null,0x2)}]};else throw new _0x456dce(_0x12782e(0x1d2)+_0x5eafc6[_0x12782e(0x201)](_0x17d662['errors']));}return{'contents':[{'uri':_0x58ace6,'text':JSON[_0x12782e(0x201)](_0x112bdd,null,0x2)}]};}default:throw new Error('Unknown\x20resource:\x20'+_0x58ace6);}}catch(_0x2a9207){if(_0x12782e(0x20d)!==_0x165f98['BmTxk']){if(_0x2a9207 instanceof z[_0x12782e(0x20b)])throw new Error(_0x12782e(0x1d2)+JSON['stringify'](_0x2a9207['errors']));throw _0x2a9207;}else return{'contents':[{'uri':_0x3866d9,'text':_0x4c1d4d[_0x12782e(0x201)]({'error':_0x12782e(0x209)+_0x101ce6+_0x12782e(0x205)},null,0x2)}]};}});const transport=new StdioServerTransport();function _0x25f4(_0x153201,_0x20d60c){const _0x56d2e2=_0x56d2();return _0x25f4=function(_0x25f483,_0x45b94c){_0x25f483=_0x25f483-0x1c0;let _0x2ce450=_0x56d2e2[_0x25f483];return _0x2ce450;},_0x25f4(_0x153201,_0x20d60c);}server[_0x1cfef8(0x1dc)](transport)[_0x1cfef8(0x1cf)](_0xb3322b=>{const _0x10e9d3=_0x1cfef8,_0x24e7cb={'ormBj':'Server\x20error:'};console[_0x10e9d3(0x1eb)](_0x24e7cb[_0x10e9d3(0x219)],_0xb3322b),process['exit'](0x1);});