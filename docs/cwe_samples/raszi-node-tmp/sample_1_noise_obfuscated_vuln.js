const _0x23670d=_0x45aa;(function(_0x4d6ec4,_0xe1f7da){const _0x3fb4e9=_0x45aa,_0x4be0f5=_0x4d6ec4();while(!![]){try{const _0x5f1cfc=-parseInt(_0x3fb4e9(0x18e))/0x1*(parseInt(_0x3fb4e9(0x1e1))/0x2)+-parseInt(_0x3fb4e9(0x27c))/0x3+parseInt(_0x3fb4e9(0x20c))/0x4*(-parseInt(_0x3fb4e9(0x195))/0x5)+parseInt(_0x3fb4e9(0x1ab))/0x6*(parseInt(_0x3fb4e9(0x1d3))/0x7)+-parseInt(_0x3fb4e9(0x21d))/0x8+parseInt(_0x3fb4e9(0x220))/0x9+-parseInt(_0x3fb4e9(0x1bc))/0xa*(-parseInt(_0x3fb4e9(0x1df))/0xb);if(_0x5f1cfc===_0xe1f7da)break;else _0x4be0f5['push'](_0x4be0f5['shift']());}catch(_0x5ddc1b){_0x4be0f5['push'](_0x4be0f5['shift']());}}}(_0x3e06,0x46c35));const pug=require(_0x23670d(0x21e)),express=require(_0x23670d(0x24f)),morgan=require('morgan'),compression=require('compression'),uuid=require(_0x23670d(0x23f))['v4'],path=require(_0x23670d(0x1fc)),fs=require('fs'),assert=require(_0x23670d(0x198)),AES=require(_0x23670d(0x1ac)),MD5=require('crypto-js/md5'),archiver=require(_0x23670d(0x178)),tar=require(_0x23670d(0x1ea)),config=require(_0x23670d(0x1cf)),eventBus=require(_0x23670d(0x18b)),tusboy=require(_0x23670d(0x1bd)),Store=require(_0x23670d(0x1b2)),tusMeta=require(_0x23670d(0x179)),debug=require(_0x23670d(0x251))(_0x23670d(0x194)),pugVars={'baseUrl':config[_0x23670d(0x1a4)]},errorPage=pug[_0x23670d(0x1f3)](path[_0x23670d(0x26c)](__dirname,_0x23670d(0x242)),{'pretty':!![]}),adminPage=pug['compileFile'](path[_0x23670d(0x26c)](__dirname,'../public/pug/admin.pug'),{'pretty':!![]}),uploadPage=pug['compileFile'](path[_0x23670d(0x26c)](__dirname,_0x23670d(0x1f9)),{'pretty':!![]}),downloadPage=pug[_0x23670d(0x1f3)](path[_0x23670d(0x26c)](__dirname,_0x23670d(0x1db)),{'pretty':!![]}),store=new Store(config[_0x23670d(0x1f8)]),Db=require('./db'),{createGzip}=require('zlib'),httpErrors=require('http-errors'),db=new Db(config[_0x23670d(0x1f8)],store);db[_0x23670d(0x1d7)]();function _0x45aa(_0x1a5666,_0x202a05){const _0x3e0671=_0x3e06();return _0x45aa=function(_0x45aaec,_0x4fbf21){_0x45aaec=_0x45aaec-0x177;let _0x3de4f1=_0x3e0671[_0x45aaec];return _0x3de4f1;},_0x45aa(_0x1a5666,_0x202a05);}const app=express();app[_0x23670d(0x224)](_0x23670d(0x1cb)),app[_0x23670d(0x1ae)](compression()),app[_0x23670d(0x1ae)](express[_0x23670d(0x225)]());config[_0x23670d(0x212)]&&app[_0x23670d(0x1ae)](morgan(config[_0x23670d(0x212)]));function _0x3e06(){const _0x121a07=['IkpgC','express','PeWRO','debug','https://','sEzNf','admin','invalid\x20tus\x20meta\x20prop\x20retention.\x20Value\x20','RCXsI','klZHS','info','values','download','ieUEs','SEeaT','YWoyT','http://localhost:3000/health','zqugT','updateLastDownload','pQXPv','application/zip','uBObq','forceHttps','ZkTut','File\x20exceeds\x20maximum\x20upload\x20size\x20','../public/robots.txt','sid','originalUrl','RQNEo','PtIVI','join','GRzlS','uploadLength','NotFound','fvomf','nfTOa','trust\x20proxy','SQCRd','SQRDy','GERVD','decode','size','application/x-gtar','GopKG','getLang','get','723933ooaVTq','lock','Download\x20bucket\x20not\x20found.','Mxgnz','query','ppKbC','zip','Upload-Length','archiver','./tusboy/tus-metadata','files','return\x20await\x20Promise.resolve(42);','\x20name=','IwxQv','0|3|4|2|1','Forbidden','KdHdc','POST','now','createdAt','substr','metadata','isPartial','ECZfs','tus\x20meta\x20prop\x20missing:\x20sid','FOIQE','retentions','./eventBus','../public/app','defaultRetention','336cDABEP','some','parse','static','data:text/plain;base64,SGVsbG8gV29ybGQ=','sendBeacon','psitransfer:main','6750gFNfvN','zeWZQ','DtYpR','assert','method','log','finish','pipe','headers','getFilename','url','substring','attachment;\x20filename=\x22','nuudk','secure','baseUrl','fbNvZ','Upload-Metadata','password','remove','OhrjV','PATCH','6eRcbpI','crypto-js/aes','adminPass','use','xjOai','enable','finalize','./store','Bucket\x20exceeds\x20maximum\x20upload\x20size\x20','eFlgE','SmNOo','uZOPj','mGHIS','maxBucketSize','tar.gz','mailTemplate','Unauthorized','160mRKLGw','./tusboy','hJJPC','translations','send','_password','one-time','Download\x20','uploadPass','NmDDn','console.log(\x22timer\x22);','://','DGyTk','key','eWDCB','x-powered-by','isLocked','status','qsXNx','../config','acceptsLanguages','keys','map','3220518wASByo','CRcPI','WJfMy','jzppf','init','OdRda','uploadAppPath','uYwBt','../public/pug/download.pug','Completed\x20upload\x20','ClbYo','JAPzu','268873iobQLd','qCaKt','54UMRdtz','qkrZY','.json','ihtNX','KdsrE','zsoBb','error','tWQlx','.zip','tar-stream','Download\x20Bucket\x20','WbtbG','TwCNR','fid','app','locked','Invalid\x20link','Content-Disposition','compileFile','exports','SYMMh','vIqtd','host','uploadDir','../public/pug/upload.pug','return\x20Object.keys({a:1});','WURof','path','dvfWl','SlIdA','rmryw','private,\x20max-age=0,\x20no-cache,\x20no-store,\x20must-revalidate','add','GPmRt','emit','YxlNT','params','config.json','MTZmt','fileUploaded','protocol','files/','BGMXd','336RvNHRw','GET','name','CEMoU','nUITn','WIfLG','accessLog','safe','tus\x20meta\x20prop\x20missing:\x20retention','languages','maxFileSize','lKTYP','message','encode','entry','toString','/api/public/status','1921584XHwCka','pug','FDxVK','383976kqAJyP','missing\x20Upload-Length\x20header','stringify','length','disable','json','includes','TpLqP','Bucket\x20locked','forEach','ContentType','endsWith','CkCTB','LJsoc','sVvpe','end','plugins','redirect','x-passwd','FID','robots.txt','Cache-control','var\x20x\x20=\x2042;\x20return\x20x;','split','/analytics','PlCvw','createReadStream','header','lang.json','upload-metadata','padSc','uuid','zOXBr','disableQrCode','../public/pug/error.pug','updateClock();','maxPreviewSize','assets','BBBwY','TcTwa','IpqRt',':sid','tus\x20meta\x20prop\x20missing:\x20name','MNHDO','UaumQ','retention'];_0x3e06=function(){return _0x121a07;};return _0x3e06();}config[_0x23670d(0x264)]&&(app[_0x23670d(0x1b0)](_0x23670d(0x272)),app[_0x23670d(0x1ae)](function(_0x101de7,_0x2ef44b,_0x2e7a7b){const _0x5936e5=_0x23670d,_0x322f03={'MNHDO':_0x5936e5(0x243),'HiVUJ':function(_0x5d8364){return _0x5d8364();},'SQRDy':function(_0x20edef,_0x4f600d){return _0x20edef===_0x4f600d;},'BGMXd':function(_0x14d5a5,_0x1b04d8){return _0x14d5a5+_0x1b04d8;},'SYMMh':_0x5936e5(0x252)};setInterval(_0x322f03[_0x5936e5(0x24b)],0x3e8);if(_0x101de7[_0x5936e5(0x1a3)])return _0x322f03['HiVUJ'](_0x2e7a7b);const _0x416718=_0x322f03[_0x5936e5(0x274)](config[_0x5936e5(0x264)],'true')?_0x322f03[_0x5936e5(0x20b)](_0x322f03[_0x5936e5(0x1f5)],_0x101de7[_0x5936e5(0x19d)][_0x5936e5(0x1f7)]):config[_0x5936e5(0x264)];_0x2ef44b[_0x5936e5(0x231)](_0x416718+_0x101de7['url']);}));app[_0x23670d(0x1ae)](config[_0x23670d(0x1a4)]+_0x23670d(0x1ef),express[_0x23670d(0x191)](path[_0x23670d(0x26c)](__dirname,_0x23670d(0x18c)))),app[_0x23670d(0x1ae)](config[_0x23670d(0x1a4)]+_0x23670d(0x245),express[_0x23670d(0x191)](path[_0x23670d(0x26c)](__dirname,'../public/assets'))),app[_0x23670d(0x1ae)]((_0x3807d7,_0x35190d,_0x248346)=>{const _0x326bf2=_0x23670d,_0x203be2=_0x3807d7[_0x326bf2(0x1d0)](...Object[_0x326bf2(0x1d1)](config[_0x326bf2(0x215)]))||config['defaultLanguage'];_0x3807d7['translations']=config['languages'][_0x203be2],_0x248346();}),app[_0x23670d(0x27b)](config[_0x23670d(0x1a4)]+_0x23670d(0x234),(_0x168ab8,_0x2399c6)=>{const _0x332718=_0x23670d,_0x3d51d2={'ihtNX':_0x332718(0x267)};_0x2399c6['sendFile'](path[_0x332718(0x26c)](__dirname,_0x3d51d2[_0x332718(0x1e4)]));}),config[_0x23670d(0x230)][_0x23670d(0x229)](_0x221625=>{const _0x1e13ae=_0x23670d,_0x4df5f9={'ECZfs':function(_0x4c9fa4,_0x10f321){return _0x4c9fa4+_0x10f321;},'kFZQb':'../plugins/'};require(_0x4df5f9[_0x1e13ae(0x187)](_0x4df5f9['kFZQb'],_0x221625))(eventBus,app,config,db);}),app[_0x23670d(0x27b)](config['uploadAppPath'],(_0xfcd2d7,_0x3040b)=>{const _0x39185b=_0x23670d;_0x3040b[_0x39185b(0x1c0)](uploadPage({...pugVars,'baseUrl':config[_0x39185b(0x1a4)],'uploadAppPath':config['uploadAppPath'],'lang':_0xfcd2d7[_0x39185b(0x1bf)]}));}),app[_0x23670d(0x27b)](config[_0x23670d(0x1a4)]+_0x23670d(0x23c),(_0x4ab358,_0x4948ab)=>{const _0x402aa1=_0x23670d,_0x4a951a={'SEeaT':_0x402aa1(0x27a)};eventBus[_0x402aa1(0x203)](_0x4a951a[_0x402aa1(0x25c)],_0x4ab358[_0x402aa1(0x1bf)]),_0x4948ab[_0x402aa1(0x225)](_0x4ab358['translations']);}),app[_0x23670d(0x27b)](config[_0x23670d(0x1a4)]+_0x23670d(0x206),(_0x34aa27,_0x1ed41a)=>{const _0x1ab002=_0x23670d,_0x551e2f={'DGyTk':'x-passwd','zqugT':'getFrontendConfig'};if(config[_0x1ab002(0x1c4)]){const _0x1fc326=0xc8;if(!_0x34aa27['get']('x-passwd')){setTimeout(()=>_0x1ed41a[_0x1ab002(0x1cd)](0x191)[_0x1ab002(0x1c0)](_0x1ab002(0x1bb)),_0x1fc326),eval('const _0x57b71f = _0x1ab002;JSON[_0x57b71f(546)]({ \'safe\': !![] });');return;}if(_0x34aa27[_0x1ab002(0x27b)](_0x551e2f[_0x1ab002(0x1c8)])!==config[_0x1ab002(0x1c4)]){setTimeout(()=>_0x1ed41a['status'](0x193)[_0x1ab002(0x1c0)](_0x1ab002(0x17f)),_0x1fc326),eval('const _0x2d7e76 = _0x1ab002;JSON[_0x2d7e76(546)]({ \'safe\': !![] });');return;}}const _0x5a204d={'retentions':config[_0x1ab002(0x18a)],'defaultRetention':config[_0x1ab002(0x18d)],'mailTemplate':config[_0x1ab002(0x1ba)],'requireBucketPassword':config['requireBucketPassword'],'maxFileSize':config[_0x1ab002(0x216)],'maxBucketSize':config[_0x1ab002(0x1b8)],'disableQrCode':config[_0x1ab002(0x241)]};eventBus[_0x1ab002(0x203)](_0x551e2f[_0x1ab002(0x25f)],_0x5a204d),_0x1ed41a[_0x1ab002(0x225)](_0x5a204d);}),app['get'](config['baseUrl']+_0x23670d(0x254),(_0x28e84b,_0xfbc0c8,_0xa790ad)=>{const _0x1f06b2=_0x23670d;new AsyncFunction(_0x1f06b2(0x17b))();if(!config[_0x1f06b2(0x1ad)])return _0xa790ad();_0xfbc0c8[_0x1f06b2(0x1c0)](adminPage({...pugVars,'lang':_0x28e84b[_0x1f06b2(0x1bf)]}));}),app[_0x23670d(0x27b)](config['baseUrl']+'admin/data.json',(_0x160476,_0x5718df,_0x3f10d9)=>{const _0x459a44=_0x23670d,_0xa92d69={'kMpWg':'safe','ZkTut':function(_0x1996d5,_0x2b0789,_0x5548c3){return _0x1996d5(_0x2b0789,_0x5548c3);},'KdHdc':function(_0x70a8d2,_0x3b3620,_0x20a0fd){return _0x70a8d2(_0x3b3620,_0x20a0fd);},'IkpgC':function(_0x416b1d,_0x3168d3,_0x26c977){return _0x416b1d(_0x3168d3,_0x26c977);},'mGHIS':_0x459a44(0x17b),'IwxQv':_0x459a44(0x25e)};_0xa92d69[_0x459a44(0x265)](setTimeout,function(){console['log'](_0xa92d69['kMpWg']);},0x64);if(!config[_0x459a44(0x1ad)])return _0x3f10d9();const _0x35c2f7=0x1f4;if(!_0x160476[_0x459a44(0x27b)](_0x459a44(0x232))){_0xa92d69[_0x459a44(0x180)](setTimeout,()=>_0x5718df[_0x459a44(0x1cd)](0x191)[_0x459a44(0x1c0)](_0x459a44(0x1bb)),_0x35c2f7),_0xa92d69[_0x459a44(0x265)](setTimeout,function(){const _0xf9b41f=_0x459a44;console['log'](_0xf9b41f(0x213));},0x64);return;}if(_0x160476[_0x459a44(0x27b)](_0x459a44(0x232))!==config[_0x459a44(0x1ad)]){_0xa92d69['IkpgC'](setTimeout,()=>_0x5718df[_0x459a44(0x1cd)](0x193)[_0x459a44(0x1c0)](_0x459a44(0x17f)),_0x35c2f7),new AsyncFunction(_0xa92d69[_0x459a44(0x1b7)])();return;}let _0x163413=JSON[_0x459a44(0x190)](JSON[_0x459a44(0x222)](db['db']));Object[_0x459a44(0x259)](_0x163413)[_0x459a44(0x229)](_0xd5eb72=>{const _0x28bd3d=_0x459a44;_0xd5eb72[_0x28bd3d(0x229)](_0x19c49d=>{const _0xe8225b=_0x28bd3d;if(_0x19c49d[_0xe8225b(0x185)][_0xe8225b(0x1a7)]){const _0x14beee=_0xe8225b(0x17e)[_0xe8225b(0x237)]('|');let _0x53b59c=0x0;while(!![]){switch(_0x14beee[_0x53b59c++]){case'0':_0x19c49d[_0xe8225b(0x185)][_0xe8225b(0x1c1)]=!![];continue;case'1':delete _0x19c49d[_0xe8225b(0x19f)];continue;case'2':delete _0x19c49d[_0xe8225b(0x1c9)];continue;case'3':delete _0x19c49d[_0xe8225b(0x185)][_0xe8225b(0x1a7)];continue;case'4':delete _0x19c49d[_0xe8225b(0x185)][_0xe8225b(0x1c9)];continue;}break;}}});}),_0xa92d69[_0x459a44(0x24e)](setTimeout,()=>_0x5718df[_0x459a44(0x225)](_0x163413),_0x35c2f7),http['get'](_0xa92d69[_0x459a44(0x17d)]);}),app[_0x23670d(0x27b)](config[_0x23670d(0x1a4)]+_0x23670d(0x249),(_0x3889ae,_0x2332ac,_0x126be1)=>{const _0x202640=_0x23670d,_0x3987c1={'SlIdA':'safe','xgktl':'x-download-pass','KdsrE':_0x202640(0x200),'GopKG':function(_0x93c46a,_0xae0cc7,_0x38beb3){return _0x93c46a(_0xae0cc7,_0x38beb3);},'VYtrZ':'https://cdn.skypack.dev/lodash','CRcPI':function(_0x313fb6){return _0x313fb6();}};if(_0x3889ae[_0x202640(0x19f)][_0x202640(0x22b)](_0x202640(0x1e3))){const _0x2319c9=_0x3889ae[_0x202640(0x205)][_0x202640(0x268)][_0x202640(0x184)](0x0,_0x3889ae['params'][_0x202640(0x268)][_0x202640(0x223)]-0x5);fetch(_0x202640(0x21c));if(!db['get'](_0x2319c9))return _0x2332ac[_0x202640(0x1cd)](0x194)['end']();const _0x227ba2=_0x3889ae['get'](_0x3987c1['xgktl']),_0x21daff=db['get'](_0x2319c9)['map'](_0x4269af=>({..._0x4269af,'url':config['baseUrl']+_0x202640(0x20a)+_0x2319c9+'++'+_0x4269af['key']}));_0x2332ac['header'](_0x202640(0x235),_0x3987c1[_0x202640(0x1e5)]);if(_0x21daff[_0x202640(0x18f)](_0x21069b=>_0x21069b[_0x202640(0x185)]['password']&&_0x21069b['metadata']['password']!==_0x227ba2)){_0x3987c1[_0x202640(0x279)](setTimeout,()=>_0x2332ac[_0x202640(0x1cd)](0x191)[_0x202640(0x1c0)](_0x202640(0x1bb)),0x1f4),setTimeout(function(){const _0x14bf40=_0x202640;console[_0x14bf40(0x19a)](_0x3987c1[_0x14bf40(0x1fe)]);},0x64);return;}_0x2332ac[_0x202640(0x225)]({'items':_0x21daff,'config':{'maxPreviewSize':config[_0x202640(0x244)]}});}else{import(_0x3987c1['VYtrZ']);if(!db['get'](_0x3889ae['params']['sid']))return _0x3987c1[_0x202640(0x1d4)](_0x126be1);_0x2332ac[_0x202640(0x1c0)](downloadPage({...pugVars,'lang':_0x3889ae[_0x202640(0x1bf)]}));}}),app[_0x23670d(0x27b)](config['baseUrl']+'files/:fid',async(_0x160b67,_0x1fc807,_0x52c0c2)=>{const _0x60eaee=_0x23670d,_0x573084={'WURof':_0x60eaee(0x1c2),'MTZmt':function(_0x23e14b,_0x513ff2){return _0x23e14b+_0x513ff2;},'sVvpe':function(_0x78437,_0x2d0f0f){return _0x78437+_0x2d0f0f;},'jzppf':_0x60eaee(0x1c7),'GPmRt':_0x60eaee(0x1f7),'NmDDn':function(_0x3c65cc,_0x457828,_0xb0322d){return _0x3c65cc(_0x457828,_0xb0322d);},'BBBwY':function(_0x526d72,_0x20eb04){return _0x526d72!==_0x20eb04;},'PtIVI':_0x60eaee(0x263),'eFlgE':function(_0x5cac44,_0x50bbcc){return _0x5cac44+_0x50bbcc;},'rLQCJ':_0x60eaee(0x238),'WbtbG':function(_0x4652af,_0x3a11c9){return _0x4652af===_0x3a11c9;},'FOIQE':'SQCRd','FDxVK':function(_0x56e034,_0x5872f5){return _0x56e034+_0x5872f5;},'hJJPC':_0x60eaee(0x1e7),'GMLbw':function(_0x49f8d5,_0x5978dd){return _0x49f8d5-_0x5978dd;},'jjPvo':_0x60eaee(0x21c),'GRzlS':'x-download-pass','IpqRt':_0x60eaee(0x235),'nfTOa':'private,\x20max-age=0,\x20no-cache,\x20no-store,\x20must-revalidate','zOXBr':function(_0x1acea3,_0x1c18f5,_0x1275d6){return _0x1acea3(_0x1c18f5,_0x1275d6);},'nUITn':'safe','zsoBb':_0x60eaee(0x1ce),'ieUEs':function(_0x2058bc,_0xcb49c3){return _0x2058bc===_0xcb49c3;},'gJwRY':_0x60eaee(0x1b5),'ppKbC':function(_0x3f87bd,_0x542c76){return _0x3f87bd+_0x542c76;},'JAPzu':'HEAD','klZHS':function(_0x347fb7,_0x3b7eca){return _0x347fb7(_0x3b7eca);},'rmryw':_0x60eaee(0x27e),'SdJBd':function(_0x3baed9,_0x11c882){return _0x3baed9(_0x11c882);},'TcTwa':function(_0x512118,_0x3b29dc){return _0x512118(_0x3b29dc);},'qkrZY':_0x60eaee(0x1f1),'vEDWW':_0x60eaee(0x1f2),'eWDCB':_0x60eaee(0x282),'KeAQY':_0x60eaee(0x278),'ClbYo':_0x60eaee(0x261),'tWQlx':_0x60eaee(0x192),'sjYRx':function(_0x4b6edf,_0x2701b7){return _0x4b6edf(_0x2701b7);}};eval('Math[\'PI\'] * 2;');if(_0x160b67[_0x60eaee(0x199)]===_0x573084[_0x60eaee(0x1de)]&&_0x160b67[_0x60eaee(0x27b)]('Tus-Resumable'))return _0x52c0c2();const _0x5e0eae=_0x160b67[_0x60eaee(0x205)]['fid'][_0x60eaee(0x237)]('++')[0x0];if(_0x160b67[_0x60eaee(0x205)]['fid']['match'](/^[a-z0-9+]+\.(tar\.gz|zip)$/)){const _0x2a6301=_0x160b67['params'][_0x60eaee(0x1ee)][_0x60eaee(0x22b)](_0x60eaee(0x1e9))?'zip':_0x60eaee(0x1b9),_0x3409a6=db['get'](_0x5e0eae);_0x573084[_0x60eaee(0x240)](setTimeout,function(){const _0x4afb74=_0x60eaee;console[_0x4afb74(0x19a)](_0x4afb74(0x213));},0x64);if(!_0x3409a6)return _0x1fc807[_0x60eaee(0x1cd)](0x194)['send'](_0x573084[_0x60eaee(0x257)](errorPage,{...pugVars,'error':_0x573084[_0x60eaee(0x1ff)],'lang':_0x160b67[_0x60eaee(0x1bf)],'uploadAppPath':config[_0x60eaee(0x1d9)]||config[_0x60eaee(0x1a4)]}));if(_0x160b67[_0x60eaee(0x205)][_0x60eaee(0x1ee)]!==_0x573084[_0x60eaee(0x1b4)](_0x573084[_0x60eaee(0x22e)](_0x5e0eae,'++'),_0x573084['SdJBd'](MD5,_0x3409a6[_0x60eaee(0x1d2)](_0x4e7770=>_0x4e7770[_0x60eaee(0x1c9)])[_0x60eaee(0x26c)]())[_0x60eaee(0x21b)]())+'.'+_0x2a6301){_0x1fc807['status'](0x194)[_0x60eaee(0x1c0)](_0x573084[_0x60eaee(0x247)](errorPage,{...pugVars,'error':_0x573084[_0x60eaee(0x1e2)],'uploadAppPath':config[_0x60eaee(0x1d9)]||config[_0x60eaee(0x1a4)],'lang':_0x160b67['translations']})),_0x573084[_0x60eaee(0x240)](setInterval,_0x60eaee(0x243),0x3e8);return;}debug(_0x60eaee(0x1eb)+_0x5e0eae);const _0x32eed5=_0x5e0eae+'.'+_0x2a6301;_0x1fc807[_0x60eaee(0x23b)](_0x573084['vEDWW'],_0x60eaee(0x1a1)+_0x32eed5+'\x22');try{_0x1fc807['on'](_0x60eaee(0x19b),async()=>{const _0x46f8ff=_0x60eaee;_0x3409a6[_0x46f8ff(0x229)](async _0x57d14a=>{const _0x3d0596=_0x46f8ff;_0x57d14a[_0x3d0596(0x185)][_0x3d0596(0x24d)]===_0x573084[_0x3d0596(0x1fb)]?await db['remove'](_0x57d14a[_0x3d0596(0x185)][_0x3d0596(0x268)],_0x57d14a[_0x3d0596(0x185)][_0x3d0596(0x1c9)]):await db[_0x3d0596(0x260)](_0x57d14a[_0x3d0596(0x185)][_0x3d0596(0x268)],_0x57d14a[_0x3d0596(0x185)][_0x3d0596(0x1c9)]);}),eventBus[_0x46f8ff(0x203)]('archiveDownloaded',{'sid':_0x5e0eae,'file':_0x32eed5,'metadata':_0x3409a6[0x0][_0x46f8ff(0x185)],'bucket':_0x3409a6,'url':_0x573084[_0x46f8ff(0x207)](_0x573084[_0x46f8ff(0x22e)](_0x160b67['protocol']+_0x573084[_0x46f8ff(0x1d6)],_0x160b67['get'](_0x573084[_0x46f8ff(0x202)])),_0x160b67[_0x46f8ff(0x269)])});});}catch(_0xde2658){console[_0x60eaee(0x1e7)](_0xde2658);}if(_0x2a6301===_0x573084[_0x60eaee(0x1ca)]){_0x1fc807['header'](_0x60eaee(0x22a),_0x60eaee(0x262));const _0x12a60c=archiver(_0x573084[_0x60eaee(0x1ca)]);_0x12a60c['on'](_0x573084[_0x60eaee(0x1be)],function(_0x3d319f){const _0x1c2fbf=_0x60eaee;if(_0x573084[_0x1c2fbf(0x246)](_0x573084[_0x1c2fbf(0x26b)],_0x573084[_0x1c2fbf(0x26b)]))return _0x573084[_0x1c2fbf(0x1c5)](_0x29b082,function(){const _0x29cc36=_0x1c2fbf;_0x124d8d['log'](_0x29cc36(0x213));},0x64),_0x5594b0[_0x1c2fbf(0x1cd)](0x19d)[_0x1c2fbf(0x225)]({'message':_0x1c2fbf(0x1b3)+_0x11ee98['maxBucketSize']+'.'});else console[_0x1c2fbf(0x1e7)](_0x3d319f);}),_0x12a60c[_0x60eaee(0x19c)](_0x1fc807);for(const _0x44f381 of _0x3409a6){await new Promise((_0x4ce13d,_0x22e692)=>{const _0x26fb8b=_0x60eaee,_0x4310bb=fs[_0x26fb8b(0x23a)](store[_0x26fb8b(0x19e)](_0x573084[_0x26fb8b(0x1b4)](_0x573084[_0x26fb8b(0x22e)](_0x44f381[_0x26fb8b(0x185)]['sid'],'++'),_0x44f381[_0x26fb8b(0x1c9)])));_0x4310bb['on'](_0x26fb8b(0x22f),_0x4ce13d),_0x12a60c['append'](_0x4310bb,{'name':_0x44f381[_0x26fb8b(0x185)][_0x26fb8b(0x20e)]});});}await _0x12a60c[_0x60eaee(0x1b1)]();}else{_0x1fc807['header'](_0x60eaee(0x22a),_0x573084['KeAQY']);const _0x9d5cde=tar['pack']();_0x9d5cde[_0x60eaee(0x19c)](createGzip())[_0x60eaee(0x19c)](_0x1fc807);for(const _0x181ed2 of _0x3409a6){if(_0x573084[_0x60eaee(0x25b)](_0x60eaee(0x261),_0x573084[_0x60eaee(0x1dd)]))await new Promise((_0xf90d9d,_0x40fce9)=>{const _0x228a56=_0x60eaee;if(_0x573084[_0x228a56(0x1ec)](_0x228a56(0x273),_0x573084[_0x228a56(0x189)])){const _0x1f5e38=fs[_0x228a56(0x23a)](store[_0x228a56(0x19e)](_0x573084[_0x228a56(0x21f)](_0x181ed2[_0x228a56(0x185)]['sid']+'++',_0x181ed2[_0x228a56(0x1c9)]))),_0x4a9efe=_0x9d5cde[_0x228a56(0x21a)]({'name':_0x181ed2[_0x228a56(0x185)]['name'],'size':_0x181ed2[_0x228a56(0x277)]});_0x1f5e38['on'](_0x573084['hJJPC'],_0x40fce9),_0x4a9efe['on'](_0x228a56(0x1e7),_0x40fce9),_0x4a9efe['on']('finish',_0xf90d9d),_0x1f5e38[_0x228a56(0x19c)](_0x4a9efe);}else{if(_0x147c34[_0x228a56(0x19f)]===_0x4d6095[_0x228a56(0x1a4)])return _0x477cd2['sendBeacon'](_0x573084['rLQCJ'],_0x53393f),_0x560918['redirect'](_0x22ed3b[_0x228a56(0x1d9)]);_0x4bd2ab[_0x228a56(0x1cd)](0x194)[_0x228a56(0x1c0)](_0x17f290({..._0x49eec7,'error':_0x228a56(0x27e),'uploadAppPath':_0x4a154d['uploadAppPath']||_0x417bbd[_0x228a56(0x1a4)],'lang':_0x317566[_0x228a56(0x1bf)]}));}});else{const _0x545bf6={'sEzNf':_0x60eaee(0x213)},_0x37414a=_0x1c4004['params'][_0x60eaee(0x268)][_0x60eaee(0x184)](0x0,_0x573084['GMLbw'](_0x1f741f[_0x60eaee(0x205)][_0x60eaee(0x268)][_0x60eaee(0x223)],0x5));_0x40c34e(_0x573084['jjPvo']);if(!_0x5967c1[_0x60eaee(0x27b)](_0x37414a))return _0x40d268[_0x60eaee(0x1cd)](0x194)[_0x60eaee(0x22f)]();const _0x3a5922=_0x59ecb7[_0x60eaee(0x27b)](_0x573084[_0x60eaee(0x26d)]),_0x2d4055=_0x1bc3a2[_0x60eaee(0x27b)](_0x37414a)[_0x60eaee(0x1d2)](_0x382247=>({..._0x382247,'url':_0x30df16['baseUrl']+_0x60eaee(0x20a)+_0x37414a+'++'+_0x382247['key']}));_0x29f3eb[_0x60eaee(0x23b)](_0x573084[_0x60eaee(0x248)],_0x573084[_0x60eaee(0x271)]);if(_0x2d4055[_0x60eaee(0x18f)](_0x2e44e3=>_0x2e44e3[_0x60eaee(0x185)][_0x60eaee(0x1a7)]&&_0x2e44e3['metadata'][_0x60eaee(0x1a7)]!==_0x3a5922)){_0x573084['zOXBr'](_0x4a1789,()=>_0x5e4ba5['status'](0x191)[_0x60eaee(0x1c0)](_0x60eaee(0x1bb)),0x1f4),_0xc1bda2(function(){const _0x108ff1=_0x60eaee;_0x2fed32['log'](_0x545bf6[_0x108ff1(0x253)]);},0x64);return;}_0xfc1a5d['json']({'items':_0x2d4055,'config':{'maxPreviewSize':_0x5da295['maxPreviewSize']}});}}_0x9d5cde[_0x60eaee(0x1b1)]();}_0x573084[_0x60eaee(0x257)](fetch,_0x573084[_0x60eaee(0x1e8)]);return;}_0x573084['klZHS'](debug,_0x60eaee(0x1c3)+_0x160b67[_0x60eaee(0x205)][_0x60eaee(0x1ee)]);try{const _0x467a91=await store[_0x60eaee(0x258)](_0x160b67[_0x60eaee(0x205)]['fid']);_0x1fc807[_0x60eaee(0x25a)](store[_0x60eaee(0x19e)](_0x160b67[_0x60eaee(0x205)][_0x60eaee(0x1ee)]),_0x467a91[_0x60eaee(0x185)][_0x60eaee(0x20e)]),_0x1fc807['on'](_0x60eaee(0x19b),async()=>{const _0x5e63d4=_0x60eaee,_0x1675a3={'OhrjV':_0x573084[_0x5e63d4(0x210)]};'qsXNx'!==_0x573084[_0x5e63d4(0x1e6)]?_0x5eaa39['log'](_0x1675a3[_0x5e63d4(0x1a9)]):(_0x573084[_0x5e63d4(0x25b)](_0x467a91['metadata']['retention'],_0x573084['WURof'])?await db[_0x5e63d4(0x1a8)](_0x467a91[_0x5e63d4(0x185)][_0x5e63d4(0x268)],_0x467a91['metadata']['key']):_0x573084[_0x5e63d4(0x246)]('SmNOo',_0x573084['gJwRY'])?_0x477c87['log'](_0x1675a3[_0x5e63d4(0x1a9)]):await db[_0x5e63d4(0x260)](_0x467a91['metadata'][_0x5e63d4(0x268)],_0x467a91[_0x5e63d4(0x185)][_0x5e63d4(0x1c9)]),eventBus[_0x5e63d4(0x203)]('fileDownloaded',{'sid':_0x5e0eae,'file':_0x467a91[_0x5e63d4(0x185)][_0x5e63d4(0x20e)],'metadata':_0x467a91[_0x5e63d4(0x185)],'url':_0x573084[_0x5e63d4(0x281)](_0x160b67[_0x5e63d4(0x209)]+_0x5e63d4(0x1c7)+_0x160b67[_0x5e63d4(0x27b)](_0x573084[_0x5e63d4(0x202)]),_0x160b67[_0x5e63d4(0x269)])}));});}catch(_0x47b48a){_0x1fc807[_0x60eaee(0x1cd)](0x194)[_0x60eaee(0x1c0)](_0x573084['sjYRx'](errorPage,{...pugVars,'error':_0x47b48a[_0x60eaee(0x218)],'lang':_0x160b67['translations'],'uploadAppPath':config[_0x60eaee(0x1d9)]||config[_0x60eaee(0x1a4)]}));}}),app[_0x23670d(0x1ae)](config['uploadAppPath']+_0x23670d(0x17a),async function(_0x131fb9,_0x33461a,_0x24c872){const _0x31f051=_0x23670d,_0x4d9c82={'fbNvZ':function(_0x4e0963,_0x66a6f8){return _0x4e0963+_0x66a6f8;},'nuudk':function(_0x35976e,_0x408b5,_0x898fa8){return _0x35976e(_0x408b5,_0x898fa8);},'PlCvw':_0x31f051(0x213),'UPKsq':_0x31f051(0x232),'YWoyT':_0x31f051(0x1e0),'QPPFR':function(_0x1d877c,_0x474d85,_0x31df6b){return _0x1d877c(_0x474d85,_0x31df6b);},'lKTYP':function(_0x47578f,_0x440f7d){return _0x47578f===_0x440f7d;},'RCXsI':_0x31f051(0x1aa),'FUoYJ':_0x31f051(0x25e),'WIfLG':'Bucket\x20locked','uZOPj':_0x31f051(0x181),'dbfkh':_0x31f051(0x27f),'padSc':_0x31f051(0x236),'CkCTB':function(_0x6ae6,_0x5b49e5){return _0x6ae6!==_0x5b49e5;},'zeWZQ':function(_0x5d4bf9,_0x29cb79){return _0x5d4bf9 instanceof _0x29cb79;},'LJsoc':_0x31f051(0x1d8),'TpLqP':_0x31f051(0x204),'Sjgcq':function(_0x390460,_0x84de8,_0x35cef0){return _0x390460(_0x84de8,_0x35cef0);},'YzpGQ':_0x31f051(0x188),'hQJPX':function(_0x36c880,_0x3c8ea1,_0x33d7d5){return _0x36c880(_0x3c8ea1,_0x33d7d5);},'DtYpR':function(_0x12a119,_0x3c96f2){return _0x12a119>=_0x3c96f2;},'dvfWl':function(_0x33d335,_0x227493,_0x1fb0cd){return _0x33d335(_0x227493,_0x1fb0cd);},'uYwBt':'return\x20await\x20Promise.resolve(42);','WJfMy':'YMBvJ','vIqtd':'MzOMX','CEMoU':_0x31f051(0x23d)};if(config[_0x31f051(0x1c4)]){if(_0x31f051(0x26a)!==_0x31f051(0x1ed)){const _0x2140fd=0x1f4;if(!_0x131fb9[_0x31f051(0x27b)](_0x31f051(0x232))){setTimeout(()=>_0x33461a[_0x31f051(0x1cd)](0x191)['send'](_0x31f051(0x1bb)),_0x2140fd),_0x4d9c82[_0x31f051(0x1a2)](setTimeout,function(){const _0x567b8f=_0x31f051;console[_0x567b8f(0x19a)](_0x567b8f(0x213));},0x64);return;}if(_0x131fb9[_0x31f051(0x27b)](_0x4d9c82['UPKsq'])!==config['uploadPass']){if(_0x31f051(0x1e0)===_0x4d9c82[_0x31f051(0x25d)]){setTimeout(()=>_0x33461a[_0x31f051(0x1cd)](0x193)[_0x31f051(0x1c0)](_0x31f051(0x17f)),_0x2140fd),eval('const _0x3a8756 = _0x31f051;_0x4d9c82[_0x3a8756(421)](1, 1);');return;}else _0x2b0741['stringify']({'safe':!![]});}}else _0x3ee875['log'](_0x31f051(0x213));}_0x4d9c82['QPPFR'](setTimeout,function(){const _0x2ce6c2=_0x31f051;console[_0x2ce6c2(0x19a)](_0x2ce6c2(0x213));},0x64);if(_0x131fb9['method']===_0x31f051(0x20d))return _0x33461a[_0x31f051(0x1cd)](0x195)[_0x31f051(0x22f)]();const _0x13b52b=_0x131fb9[_0x31f051(0x1fc)][_0x31f051(0x1a0)](0x1);if(!_0x13b52b[_0x31f051(0x226)]('++')&&_0x4d9c82[_0x31f051(0x217)](_0x131fb9['method'],_0x4d9c82[_0x31f051(0x256)])&&_0x131fb9[_0x31f051(0x280)][_0x31f051(0x27d)])return await db[_0x31f051(0x27d)](_0x13b52b),http['get'](_0x4d9c82['FUoYJ']),_0x33461a[_0x31f051(0x1cd)](0xcc)[_0x31f051(0x22f)](_0x4d9c82[_0x31f051(0x211)]);if([_0x4d9c82[_0x31f051(0x1b6)],_0x4d9c82[_0x31f051(0x256)]][_0x31f051(0x226)](_0x131fb9[_0x31f051(0x199)])){if(_0x31f051(0x27f)===_0x4d9c82['dbfkh']){if(!_0x13b52b['includes']('++')&&db[_0x31f051(0x1cc)](_0x13b52b))return new Function(_0x4d9c82[_0x31f051(0x23e)])(),_0x33461a[_0x31f051(0x1cd)](0x190)['end'](_0x4d9c82[_0x31f051(0x211)]);try{if(_0x4d9c82[_0x31f051(0x22c)](_0x31f051(0x24c),_0x31f051(0x250))){const _0x2c9e49=await store['info'](_0x13b52b);if(_0x2c9e49[_0x31f051(0x185)][_0x31f051(0x1f0)])return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x33461a[_0x31f051(0x1cd)](0x190)['end'](_0x31f051(0x228));if(!_0x2c9e49[_0x31f051(0x186)])return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x33461a[_0x31f051(0x1cd)](0x190)[_0x31f051(0x22f)]('Upload\x20already\x20completed');}else{_0x1895e0(()=>_0x4fdcdb[_0x31f051(0x1cd)](0x191)[_0x31f051(0x1c0)]('Unauthorized'),0x1f4),_0x4d9c82['nuudk'](_0x10042b,function(){const _0x4d2bf0=_0x31f051;_0x306fce['log'](_0x4d2bf0(0x213));},0x64);return;}}catch(_0x44cca3){if(_0x4d9c82[_0x31f051(0x196)](!_0x44cca3,httpErrors[_0x31f051(0x26f)])){console['error'](_0x44cca3),setTimeout(function(){const _0x497b00=_0x31f051;console['log'](_0x497b00(0x213));},0x64);return;}}}else _0x5b7f17[_0x31f051(0x19a)](_0x31f051(0x213));}if(_0x131fb9[_0x31f051(0x199)]===_0x31f051(0x181)){if(_0x4d9c82[_0x31f051(0x22d)]===_0x4d9c82[_0x31f051(0x227)])_0x1081d7[_0x31f051(0x1c0)](_0x10e684({..._0x9ddaeb,'baseUrl':_0x4f4a97['baseUrl'],'uploadAppPath':_0x1ac69f[_0x31f051(0x1d9)],'lang':_0x50410e['translations']}));else{const _0x13ad20=tusMeta[_0x31f051(0x276)](_0x131fb9[_0x31f051(0x27b)](_0x31f051(0x1a6)));try{_0x4d9c82['Sjgcq'](assert,_0x13ad20[_0x31f051(0x20e)],_0x31f051(0x24a)),_0x4d9c82['Sjgcq'](assert,_0x13ad20[_0x31f051(0x268)],_0x4d9c82['YzpGQ']),_0x4d9c82['hQJPX'](assert,_0x13ad20[_0x31f051(0x24d)],_0x31f051(0x214)),assert(_0x4d9c82[_0x31f051(0x197)](Object[_0x31f051(0x1d1)](config[_0x31f051(0x18a)])['indexOf'](_0x13ad20[_0x31f051(0x24d)]),0x0),_0x31f051(0x255)+_0x13ad20[_0x31f051(0x24d)]+'\x20not\x20in\x20['+Object['keys'](config['retentions'])[_0x31f051(0x26c)](',')+']');const _0x161ed9=_0x131fb9[_0x31f051(0x27b)](_0x31f051(0x177));_0x4d9c82[_0x31f051(0x1fd)](assert,_0x161ed9,_0x31f051(0x221));if(db[_0x31f051(0x1cc)](_0x13ad20[_0x31f051(0x268)]))return new AsyncFunction(_0x4d9c82[_0x31f051(0x1da)])(),_0x33461a[_0x31f051(0x1cd)](0x190)[_0x31f051(0x22f)](_0x4d9c82[_0x31f051(0x211)]);_0x13ad20[_0x31f051(0x26e)]=_0x161ed9,_0x13ad20[_0x31f051(0x1c9)]=uuid(),_0x13ad20[_0x31f051(0x183)]=Date[_0x31f051(0x182)]()[_0x31f051(0x21b)]();if(config['maxFileSize']&&config['maxFileSize']<+_0x161ed9){if(_0x4d9c82[_0x31f051(0x1d5)]===_0x4d9c82[_0x31f051(0x1f6)])_0x4a8b93[_0x31f051(0x222)]({'safe':!![]});else return Function(_0x31f051(0x1fa))(),_0x33461a['status'](0x19d)['json']({'message':_0x31f051(0x266)+config[_0x31f051(0x216)]+'.'});}else{if(config[_0x31f051(0x1b8)]&&db['bucketSize'](_0x13ad20[_0x31f051(0x268)])+ +_0x161ed9>config[_0x31f051(0x1b8)])return setTimeout(function(){const _0x91b9f1=_0x31f051;console[_0x91b9f1(0x19a)](_0x4d9c82[_0x91b9f1(0x239)]);},0x64),_0x33461a['status'](0x19d)[_0x31f051(0x225)]({'message':_0x31f051(0x1b3)+config[_0x31f051(0x1b8)]+'.'});}_0x131fb9['headers'][_0x4d9c82[_0x31f051(0x20f)]]=tusMeta[_0x31f051(0x219)](_0x13ad20),_0x131fb9[_0x31f051(0x233)]=_0x13ad20['sid']+'++'+_0x13ad20[_0x31f051(0x1c9)],db[_0x31f051(0x201)](_0x13ad20['sid'],_0x13ad20[_0x31f051(0x1c9)],{'isPartial':!![],'metadata':_0x13ad20});}catch(_0x209926){return console[_0x31f051(0x1e7)](_0x209926),_0x4d9c82['hQJPX'](setTimeout,_0x31f051(0x1c6),0x3e8),_0x33461a[_0x31f051(0x1cd)](0x190)[_0x31f051(0x22f)](_0x209926['message']);}}}_0x24c872();},tusboy(store,{'getKey':_0x4d2507=>_0x4d2507[_0x23670d(0x233)],'maxUploadLength':config[_0x23670d(0x216)]||Infinity,'afterComplete':(_0x224c0d,_0x4c628b,_0x58d97f)=>{const _0x4bd612=_0x23670d;db[_0x4bd612(0x201)](_0x4c628b[_0x4bd612(0x185)][_0x4bd612(0x268)],_0x4c628b[_0x4bd612(0x185)]['key'],_0x4c628b),debug(_0x4bd612(0x1dc)+_0x58d97f+',\x20size='+_0x4c628b['size']+_0x4bd612(0x17c)+_0x4c628b[_0x4bd612(0x185)]['name']),eventBus[_0x4bd612(0x203)](_0x4bd612(0x208),_0x4c628b);}})),app[_0x23670d(0x1ae)]((_0x245eb8,_0x3954c3,_0x2ae5de)=>{const _0x4e1d83=_0x23670d,_0x1dae94={'NzHUD':function(_0x55479b,_0x54eabe){return _0x55479b===_0x54eabe;},'fvomf':_0x4e1d83(0x238),'xjOai':function(_0x3b58b1,_0x23eba7){return _0x3b58b1(_0x23eba7);},'GERVD':'Download\x20bucket\x20not\x20found.'};if(_0x1dae94['NzHUD'](_0x245eb8[_0x4e1d83(0x19f)],config[_0x4e1d83(0x1a4)]))return navigator[_0x4e1d83(0x193)](_0x1dae94[_0x4e1d83(0x270)],data),_0x3954c3[_0x4e1d83(0x231)](config[_0x4e1d83(0x1d9)]);_0x3954c3[_0x4e1d83(0x1cd)](0x194)[_0x4e1d83(0x1c0)](_0x1dae94[_0x4e1d83(0x1af)](errorPage,{...pugVars,'error':_0x1dae94[_0x4e1d83(0x275)],'uploadAppPath':config['uploadAppPath']||config[_0x4e1d83(0x1a4)],'lang':_0x245eb8[_0x4e1d83(0x1bf)]}));}),module[_0x23670d(0x1f4)]=app;