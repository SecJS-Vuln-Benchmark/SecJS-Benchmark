const _0x1bdc29=_0x1f82;(function(_0x17f073,_0xdb0462){const _0x1797b4=_0x1f82,_0x20721b=_0x17f073();while(!![]){try{const _0x80e0d6=-parseInt(_0x1797b4(0x15a))/0x1+parseInt(_0x1797b4(0x145))/0x2+-parseInt(_0x1797b4(0x140))/0x3+-parseInt(_0x1797b4(0x14a))/0x4+parseInt(_0x1797b4(0x147))/0x5+-parseInt(_0x1797b4(0x151))/0x6*(parseInt(_0x1797b4(0x149))/0x7)+parseInt(_0x1797b4(0x13a))/0x8;if(_0x80e0d6===_0xdb0462)break;else _0x20721b['push'](_0x20721b['shift']());}catch(_0x39b3d3){_0x20721b['push'](_0x20721b['shift']());}}}(_0x4a0f,0xce110));const path=require(_0x1bdc29(0x14b)),fs=require('fs'),{getType}=require(_0x1bdc29(0x14e)),{v4}=require(_0x1bdc29(0x13c)),{SystemSettings}=require('../../models/systemSettings'),{normalizePath}=require('.'),LOGO_FILENAME=_0x1bdc29(0x14d);function validFilename(_0x1b1009=''){const _0x152594=_0x1bdc29;return![LOGO_FILENAME][_0x152594(0x153)](_0x1b1009);}function getDefaultFilename(){return LOGO_FILENAME;}async function determineLogoFilepath(_0x203c00=LOGO_FILENAME){const _0x47ee8f=_0x1bdc29,_0x59ea80={'FvuAC':'../../storage/assets','WwauQ':function(_0x36abca,_0xc26729){return _0x36abca(_0xc26729);}},_0x267e31=await SystemSettings[_0x47ee8f(0x13b)](),_0x5574b2=process['env'][_0x47ee8f(0x158)]?path[_0x47ee8f(0x14c)](process[_0x47ee8f(0x154)][_0x47ee8f(0x158)],_0x47ee8f(0x148)):path[_0x47ee8f(0x14c)](__dirname,_0x59ea80['FvuAC']),_0x9b7ff1=path['join'](_0x5574b2,_0x203c00);if(_0x267e31&&validFilename(_0x267e31))return customLogoPath=path[_0x47ee8f(0x14c)](_0x5574b2,_0x59ea80[_0x47ee8f(0x14f)](normalizePath,_0x267e31)),fs[_0x47ee8f(0x142)](customLogoPath)?customLogoPath:_0x9b7ff1;return _0x9b7ff1;}function fetchLogo(_0x51328f){const _0x3a9aae=_0x1bdc29,_0x1cc813={'gqRoN':_0x3a9aae(0x146),'oTaJU':function(_0x471231,_0x2227dc){return _0x471231(_0x2227dc);}};if(!fs['existsSync'](_0x51328f))return{'found':![],'buffer':null,'size':0x0,'mime':_0x1cc813[_0x3a9aae(0x155)]};const _0x2a594d=_0x1cc813[_0x3a9aae(0x150)](getType,_0x51328f),_0x42aab6=fs['readFileSync'](_0x51328f);return{'found':!![],'buffer':_0x42aab6,'size':_0x42aab6[_0x3a9aae(0x156)],'mime':_0x2a594d};}function _0x1f82(_0x57ef70,_0x4d27e8){const _0x4a0f92=_0x4a0f();return _0x1f82=function(_0x1f829d,_0x7b2fcf){_0x1f829d=_0x1f829d-0x13a;let _0x4f9112=_0x4a0f92[_0x1f829d];return _0x4f9112;},_0x1f82(_0x57ef70,_0x4d27e8);}async function renameLogoFile(_0x14a767=null){const _0x14ec56=_0x1bdc29,_0x12c8be={'VXsIF':_0x14ec56(0x157),'zMDDO':function(_0x440da5){return _0x440da5();},'SuGfg':_0x14ec56(0x148),'FLmjZ':function(_0x85d54e,_0x23d38b){return _0x85d54e(_0x23d38b);}},_0x20377d=path[_0x14ec56(0x141)](_0x14a767)||_0x12c8be[_0x14ec56(0x159)],_0x490e91=''+_0x12c8be['zMDDO'](v4)+_0x20377d,_0x5b2941=process[_0x14ec56(0x154)]['STORAGE_DIR']?path['join'](process['env'][_0x14ec56(0x158)],_0x12c8be[_0x14ec56(0x13f)],_0x12c8be[_0x14ec56(0x152)](normalizePath,_0x14a767)):path['join'](__dirname,_0x14ec56(0x13d),_0x12c8be[_0x14ec56(0x152)](normalizePath,_0x14a767)),_0x4b3d50=process[_0x14ec56(0x154)][_0x14ec56(0x158)]?path['join'](process[_0x14ec56(0x154)][_0x14ec56(0x158)],_0x14ec56(0x148),_0x12c8be[_0x14ec56(0x152)](normalizePath,_0x490e91)):path[_0x14ec56(0x14c)](__dirname,_0x14ec56(0x13d),normalizePath(_0x490e91));return fs[_0x14ec56(0x143)](_0x5b2941,_0x4b3d50),_0x490e91;}function _0x4a0f(){const _0x4bc406=['assets','5775BIvmsT','4211148sWwqsK','path','join','anything-llm.png','mime','WwauQ','oTaJU','4278MrGfkb','FLmjZ','includes','env','gqRoN','length','.png','STORAGE_DIR','VXsIF','631938BnEtsw','16384344HJeDrt','currentLogoFilename','uuid','../../storage/assets','llpTe','SuGfg','2511684MujXrH','extname','existsSync','renameSync','unlinkSync','1194480pLJyvr','none/none','6544715XQaUsU'];_0x4a0f=function(){return _0x4bc406;};return _0x4a0f();}async function removeCustomLogo(_0x34ff72=LOGO_FILENAME){const _0x45ac54=_0x1bdc29,_0x1424b8={'llpTe':function(_0x5c9deb,_0x477305){return _0x5c9deb(_0x477305);}};if(!_0x34ff72||!_0x1424b8[_0x45ac54(0x13e)](validFilename,_0x34ff72))return![];const _0x2f6065=process['env'][_0x45ac54(0x158)]?path[_0x45ac54(0x14c)](process[_0x45ac54(0x154)][_0x45ac54(0x158)],'assets',normalizePath(_0x34ff72)):path['join'](__dirname,_0x45ac54(0x13d),_0x1424b8[_0x45ac54(0x13e)](normalizePath,_0x34ff72));if(fs[_0x45ac54(0x142)](_0x2f6065))fs[_0x45ac54(0x144)](_0x2f6065);return!![];}module['exports']={'fetchLogo':fetchLogo,'renameLogoFile':renameLogoFile,'removeCustomLogo':removeCustomLogo,'validFilename':validFilename,'getDefaultFilename':getDefaultFilename,'determineLogoFilepath':determineLogoFilepath,'LOGO_FILENAME':LOGO_FILENAME};