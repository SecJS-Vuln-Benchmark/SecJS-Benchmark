'use strict';function _0x51d8(){const _0x1f2ade=['TEqwi','should\x20redirect\x20to\x20Referer','response','<script>','should\x20redirect\x20to\x20the\x20given\x20url','2082XoMKjF','text/plain','/index.html','type','365YbKUtv','Redirecting\x20to\x20<a\x20href=\x22','RLBmT','kwLhc','SjGNi','hKDZi','XROEG','CIXXi','should\x20default\x20redirect\x20to\x20/','supertest','Redirecting\x20to\x20','replace','location','assert','should\x20auto\x20fix\x20not\x20encode\x20url','EfOrg','rhelS','384Qvpjty','OExhc','vcVZF','fRPPg','vEDXi','should\x20redirect\x20to\x20Referrer','FNJiA','with\x20\x22back\x22','150ZlmaOR','status','kyRVj','iMysQ','when\x20status\x20is\x20301','CoWfA','uhWHo','&quot;','callback','should\x20escape\x20the\x20url','sqqSr','NYDpf','aqLTd','ewBXK','</a>.','text/html','eWFto','62824TINuNj','OwBQJ','back','XyrpR','when\x20status\x20is\x20304','req','/login','sVdoQ','lMhJG','text/html;\x20charset=utf-8','ORTPQ','YzkVV','10571729hOJQZm','header','IWwBn','DMeCz','http://google.com','ZyDJn','../..','when\x20content-type\x20was\x20present','http://google.com/%F0%9F%98%93','BCmFw','kCqEH','XVnuA','lWIIU','OQPTi','redirect','cVCcQ','sccpp','caTUt','when\x20text\x20is\x20accepted','JdeiA','nFanO','53206274kdxNrX','lRHqw','xqPCU','accept','9wZWxfx','REWuU','oZelo','use','frvKO','9896512cmoWhn','301iWchZn','XemVo','&amp;','cMHIC','PlPJy','4008320alzLmu','UjvsI','LyCyM','body','ieWaY','should\x20overwrite\x20content-type','WQNlA','elcxE','strictEqual'];_0x51d8=function(){return _0x1f2ade;};return _0x51d8();}const _0x1e054b=_0x3ced;(function(_0x2ceb6f,_0x71662d){const _0xebc81a=_0x3ced,_0x3d839f=_0x2ceb6f();while(!![]){try{const _0x3f7126=-parseInt(_0xebc81a(0x1ff))/0x1*(parseInt(_0xebc81a(0x227))/0x2)+parseInt(_0xebc81a(0x22f))/0x3*(-parseInt(_0xebc81a(0x240))/0x4)+parseInt(_0xebc81a(0x216))/0x5*(parseInt(_0xebc81a(0x212))/0x6)+-parseInt(_0xebc81a(0x24c))/0x7+parseInt(_0xebc81a(0x1fe))/0x8*(-parseInt(_0xebc81a(0x1f9))/0x9)+-parseInt(_0xebc81a(0x204))/0xa+parseInt(_0xebc81a(0x1f5))/0xb;if(_0x3f7126===_0x71662d)break;else _0x3d839f['push'](_0x3d839f['shift']());}catch(_0x4bc3e2){_0x3d839f['push'](_0x3d839f['shift']());}}}(_0x51d8,0xd4a76));const assert=require(_0x1e054b(0x223)),request=require(_0x1e054b(0x21f)),context=require('../../test-helpers/context'),Koa=require(_0x1e054b(0x1e6));function _0x3ced(_0x560df4,_0x472530){const _0x51d8ff=_0x51d8();return _0x3ced=function(_0x3cedb4,_0x4881df){_0x3cedb4=_0x3cedb4-0x1e4;let _0x1195e8=_0x51d8ff[_0x3cedb4];return _0x1195e8;},_0x3ced(_0x560df4,_0x472530);}describe('ctx.redirect(url)',()=>{const _0x33486c=_0x1e054b,_0x493167={'SjGNi':function(_0x2c935c){return _0x2c935c();},'NYDpf':_0x33486c(0x1e4),'aFdUZ':_0x33486c(0x21d),'vEDXi':_0x33486c(0x1e8),'OQPTi':function(_0x39efca,_0x4d11bb){return _0x39efca(_0x4d11bb);},'xqPCU':'/login','XemVo':'back','REWuU':_0x33486c(0x214),'elcxE':function(_0x4ea02d){return _0x4ea02d();},'frvKO':_0x33486c(0x22c),'nFanO':_0x33486c(0x20e),'TEqwi':'should\x20default\x20to\x20alt','UjvsI':_0x33486c(0x21e),'DMeCz':_0x33486c(0x210),'sqqSr':'text/html','EfOrg':'content-type','ebiSb':_0x33486c(0x218),'JtLsX':'should\x20respond\x20with\x20html','ieWaY':function(_0x21894b){return _0x21894b();},'LAZgs':function(_0x5edb50,_0x4f573d){return _0x5edb50===_0x4f573d;},'kwLhc':_0x33486c(0x22a),'lWIIU':function(_0x3ed3e9,_0x1bc46b,_0x4679d1){return _0x3ed3e9(_0x1bc46b,_0x4679d1);},'eWFto':'should\x20respond\x20with\x20text','OwBQJ':function(_0x6e8105){return _0x6e8105();},'caTUt':_0x33486c(0x213),'kCqEH':'should\x20change\x20the\x20status\x20code','XyrpR':function(_0x3254d5,_0xcc470b){return _0x3254d5!==_0xcc470b;},'FNJiA':_0x33486c(0x231),'cVCcQ':_0x33486c(0x202),'kwUGk':_0x33486c(0x209),'rhelS':_0x33486c(0x211),'BCmFw':_0x33486c(0x224),'YzkVV':function(_0x41e9b1,_0x4be3b6,_0x3eb08d){return _0x41e9b1(_0x4be3b6,_0x3eb08d);},'XVnuA':_0x33486c(0x22e),'JdjtE':function(_0x5778a6,_0x35cf3c,_0x4d6391){return _0x5778a6(_0x35cf3c,_0x4d6391);},'ewBXK':_0x33486c(0x1f2),'aqLTd':_0x33486c(0x244)};it(_0x493167[_0x33486c(0x226)],()=>{const _0x428a87=_0x33486c,_0x1ed902=_0x493167[_0x428a87(0x21a)](context);_0x1ed902[_0x428a87(0x1ee)](_0x493167[_0x428a87(0x23a)]),assert[_0x428a87(0x20c)](_0x1ed902[_0x428a87(0x20f)][_0x428a87(0x24d)][_0x428a87(0x222)],_0x493167['NYDpf']),assert['strictEqual'](_0x1ed902[_0x428a87(0x230)],0x12e);}),it(_0x493167[_0x33486c(0x1e9)],_0x4293f9=>{const _0x192bd=_0x33486c,_0x14c326={'CoWfA':function(_0x91ea09){const _0x4c40dc=_0x3ced;return _0x493167[_0x4c40dc(0x21a)](_0x91ea09);},'sccpp':_0x192bd(0x213),'MMWaA':_0x192bd(0x1e4)},_0x541603=new Koa();_0x541603[_0x192bd(0x1fc)](_0x2317c6=>{const _0xaec7dc=_0x192bd;if(_0x493167['aFdUZ']==='dhfTs'){const _0x38922c=_0x14c326[_0xaec7dc(0x234)](_0x5d2d50),_0x2bef95=_0xaec7dc(0x1e4);_0x38922c[_0xaec7dc(0x230)]=0x130,_0x38922c['header'][_0xaec7dc(0x1f8)]=_0x14c326[_0xaec7dc(0x1f0)],_0x38922c['redirect'](_0x14c326['MMWaA']),_0x207535[_0xaec7dc(0x20c)](_0x38922c[_0xaec7dc(0x230)],0x12e),_0x5e2270[_0xaec7dc(0x20c)](_0x38922c[_0xaec7dc(0x207)],_0xaec7dc(0x220)+_0x2bef95+'.');}else _0x2317c6['redirect']('http://google.com/ðŸ˜“');}),_0x493167[_0x192bd(0x1ed)](request,_0x541603[_0x192bd(0x237)]())['get']('/')['end']((_0x489a31,_0x4e8557)=>{const _0xa89c0=_0x192bd;if(_0x489a31)return _0x4293f9(_0x489a31);assert[_0xa89c0(0x20c)](_0x4e8557[_0xa89c0(0x230)],0x12e),assert['strictEqual'](_0x4e8557['headers'][_0xa89c0(0x222)],_0x493167[_0xa89c0(0x22b)]),_0x493167[_0xa89c0(0x21a)](_0x4293f9);});}),_0x493167['YzkVV'](describe,_0x493167[_0x33486c(0x1eb)],()=>{const _0x15d4af=_0x33486c;it(_0x493167[_0x15d4af(0x1fd)],()=>{const _0x40d398=_0x15d4af,_0x48af4a=context();_0x48af4a['req']['headers']['referrer']=_0x40d398(0x246),_0x48af4a[_0x40d398(0x1ee)](_0x40d398(0x242)),assert['strictEqual'](_0x48af4a[_0x40d398(0x20f)][_0x40d398(0x24d)][_0x40d398(0x222)],_0x493167[_0x40d398(0x1f7)]);}),it(_0x493167[_0x15d4af(0x1f4)],()=>{const _0xd1e6ec=_0x15d4af,_0x144a40=context();_0x144a40[_0xd1e6ec(0x245)]['headers']['referer']=_0xd1e6ec(0x246),_0x144a40[_0xd1e6ec(0x1ee)](_0xd1e6ec(0x242)),assert['strictEqual'](_0x144a40[_0xd1e6ec(0x20f)][_0xd1e6ec(0x24d)][_0xd1e6ec(0x222)],_0x493167[_0xd1e6ec(0x1f7)]);}),it(_0x493167[_0x15d4af(0x20d)],()=>{const _0x555d1d=_0x15d4af,_0x250721=_0x493167[_0x555d1d(0x21a)](context);_0x250721[_0x555d1d(0x1ee)](_0x493167[_0x555d1d(0x200)],'/index.html'),assert[_0x555d1d(0x20c)](_0x250721['response'][_0x555d1d(0x24d)][_0x555d1d(0x222)],_0x493167[_0x555d1d(0x1fa)]);}),it(_0x493167[_0x15d4af(0x205)],()=>{const _0x3db0ed=_0x15d4af,_0x106599=_0x493167[_0x3db0ed(0x20b)](context);_0x106599[_0x3db0ed(0x1ee)]('back'),assert[_0x3db0ed(0x20c)](_0x106599[_0x3db0ed(0x20f)][_0x3db0ed(0x24d)]['location'],'/');});}),_0x493167['JdjtE'](describe,'when\x20html\x20is\x20accepted',()=>{const _0x1c77f1=_0x33486c,_0x1b56b9={'oZelo':function(_0xf2bfd3,_0x468a58){return _0xf2bfd3!==_0x468a58;},'wLcTD':_0x493167['ebiSb'],'LWFrY':_0x493167[_0x1c77f1(0x23a)],'ZyDJn':_0x1c77f1(0x23e)};it(_0x493167['JtLsX'],()=>{const _0x339fea=_0x1c77f1,_0x147aec={'ORTPQ':function(_0x2d55f3){return _0x2d55f3();},'IWwBn':'back'};if(_0x1b56b9[_0x339fea(0x1fb)](_0x1b56b9['wLcTD'],_0x339fea(0x1f6))){const _0x221c46=context(),_0x25f37d=_0x1b56b9['LWFrY'];_0x221c46[_0x339fea(0x24d)][_0x339fea(0x1f8)]=_0x1b56b9[_0x339fea(0x1e5)],_0x221c46['redirect'](_0x25f37d),assert[_0x339fea(0x20c)](_0x221c46[_0x339fea(0x20f)][_0x339fea(0x24d)]['content-type'],'text/html;\x20charset=utf-8'),assert[_0x339fea(0x20c)](_0x221c46[_0x339fea(0x207)],_0x339fea(0x217)+_0x25f37d+'\x22>'+_0x25f37d+_0x339fea(0x23d));}else{const _0x319a63=_0x147aec[_0x339fea(0x24a)](_0x5d2169);_0x319a63['redirect'](_0x147aec[_0x339fea(0x24e)],'/index.html'),_0x23f885[_0x339fea(0x20c)](_0x319a63[_0x339fea(0x20f)][_0x339fea(0x24d)]['location'],_0x339fea(0x214));}}),it(_0x1c77f1(0x238),()=>{const _0x5a2213=_0x1c77f1,_0x284f87=context();let _0x6b983d=_0x493167[_0x5a2213(0x24f)];_0x284f87[_0x5a2213(0x24d)]['accept']=_0x493167[_0x5a2213(0x239)],_0x284f87['redirect'](_0x6b983d),_0x6b983d=_0x493167[_0x5a2213(0x1ed)](escape,_0x6b983d),assert[_0x5a2213(0x20c)](_0x284f87['response'][_0x5a2213(0x24d)][_0x493167[_0x5a2213(0x225)]],_0x5a2213(0x249)),assert[_0x5a2213(0x20c)](_0x284f87[_0x5a2213(0x207)],_0x5a2213(0x217)+_0x6b983d+'\x22>'+_0x6b983d+_0x5a2213(0x23d));});}),_0x493167[_0x33486c(0x24b)](describe,_0x493167[_0x33486c(0x23c)],()=>{const _0x525361=_0x33486c;_0x493167[_0x525361(0x1ec)](it,_0x493167[_0x525361(0x23f)],()=>{const _0xd308d8=_0x525361,_0xb81631={'lMhJG':function(_0xd6515e){const _0x5c3ffd=_0x3ced;return _0x493167[_0x5c3ffd(0x208)](_0xd6515e);},'JdeiA':_0xd308d8(0x1e4),'LyCyM':_0x493167['sqqSr'],'pAQHF':_0x493167[_0xd308d8(0x225)],'sVdoQ':_0xd308d8(0x249)};if(_0x493167['LAZgs'](_0x493167[_0xd308d8(0x219)],_0x493167[_0xd308d8(0x219)])){const _0x2c053a=context(),_0x5be662=_0x493167[_0xd308d8(0x23a)];_0x2c053a['header'][_0xd308d8(0x1f8)]=_0xd308d8(0x213),_0x2c053a[_0xd308d8(0x1ee)](_0x5be662),assert[_0xd308d8(0x20c)](_0x2c053a['body'],_0xd308d8(0x220)+_0x5be662+'.');}else{const _0x4d77f8=_0xb81631[_0xd308d8(0x248)](_0x39acd7),_0x4dd6c7=_0xb81631[_0xd308d8(0x1f3)];_0x4d77f8['header'][_0xd308d8(0x1f8)]=_0xb81631[_0xd308d8(0x206)],_0x4d77f8[_0xd308d8(0x1ee)](_0x4dd6c7),_0x128b34[_0xd308d8(0x20c)](_0x4d77f8[_0xd308d8(0x20f)]['header'][_0xb81631['pAQHF']],_0xb81631[_0xd308d8(0x247)]),_0x9adfed[_0xd308d8(0x20c)](_0x4d77f8['body'],_0xd308d8(0x217)+_0x4dd6c7+'\x22>'+_0x4dd6c7+_0xd308d8(0x23d));}});}),describe(_0x33486c(0x233),()=>{_0x493167['lWIIU'](it,'should\x20not\x20change\x20the\x20status\x20code',()=>{const _0x25a5a9=_0x3ced,_0x28c769=_0x493167[_0x25a5a9(0x20b)](context),_0x93302f=_0x493167[_0x25a5a9(0x23a)];_0x28c769[_0x25a5a9(0x230)]=0x12d,_0x28c769[_0x25a5a9(0x24d)][_0x25a5a9(0x1f8)]=_0x25a5a9(0x213),_0x28c769['redirect'](_0x493167[_0x25a5a9(0x23a)]),assert[_0x25a5a9(0x20c)](_0x28c769['status'],0x12d),assert['strictEqual'](_0x28c769[_0x25a5a9(0x207)],'Redirecting\x20to\x20'+_0x93302f+'.');});}),describe(_0x493167[_0x33486c(0x23b)],()=>{const _0x43eec4=_0x33486c,_0x526dc8={'uhWHo':function(_0x2214a0){const _0x5d0807=_0x3ced;return _0x493167[_0x5d0807(0x241)](_0x2214a0);},'jHvbM':_0x493167[_0x43eec4(0x23a)],'iMysQ':_0x493167[_0x43eec4(0x1f1)]};it(_0x493167[_0x43eec4(0x1ea)],()=>{const _0x387074=_0x43eec4,_0x2031f0=_0x526dc8[_0x387074(0x235)](context),_0x2bb853=_0x526dc8['jHvbM'];_0x2031f0[_0x387074(0x230)]=0x130,_0x2031f0[_0x387074(0x24d)][_0x387074(0x1f8)]=_0x526dc8[_0x387074(0x232)],_0x2031f0[_0x387074(0x1ee)](_0x526dc8['jHvbM']),assert[_0x387074(0x20c)](_0x2031f0[_0x387074(0x230)],0x12e),assert[_0x387074(0x20c)](_0x2031f0[_0x387074(0x207)],_0x387074(0x220)+_0x2bb853+'.');});}),describe(_0x33486c(0x1e7),()=>{const _0x373e91=_0x33486c,_0x423bc0={'OExhc':function(_0x24ed85){return _0x24ed85();},'hKDZi':_0x493167[_0x373e91(0x23a)],'XROEG':_0x493167['caTUt']};if(_0x493167[_0x373e91(0x243)](_0x493167[_0x373e91(0x22d)],_0x493167[_0x373e91(0x1ef)]))it(_0x493167['kwUGk'],()=>{const _0x4cc3a2=_0x373e91,_0x5a6092=_0x423bc0[_0x4cc3a2(0x228)](context);_0x5a6092[_0x4cc3a2(0x207)]={};const _0x329cce=_0x423bc0[_0x4cc3a2(0x21b)];_0x5a6092['header'][_0x4cc3a2(0x1f8)]=_0x423bc0[_0x4cc3a2(0x21c)],_0x5a6092[_0x4cc3a2(0x1ee)](_0x4cc3a2(0x1e4)),assert[_0x4cc3a2(0x20c)](_0x5a6092[_0x4cc3a2(0x230)],0x12e),assert['strictEqual'](_0x5a6092[_0x4cc3a2(0x207)],_0x4cc3a2(0x220)+_0x329cce+'.'),assert[_0x4cc3a2(0x20c)](_0x5a6092[_0x4cc3a2(0x215)],'text/plain');});else{const _0x5a15a8=_0x20b7d4(),_0x18e320=_0x373e91(0x1e4);_0x5a15a8[_0x373e91(0x230)]=0x12d,_0x5a15a8[_0x373e91(0x24d)][_0x373e91(0x1f8)]=_0x493167['caTUt'],_0x5a15a8[_0x373e91(0x1ee)](_0x373e91(0x1e4)),_0x4668a8[_0x373e91(0x20c)](_0x5a15a8[_0x373e91(0x230)],0x12d),_0x5a0849[_0x373e91(0x20c)](_0x5a15a8['body'],_0x373e91(0x220)+_0x18e320+'.');}});});function escape(_0x48fbf2){const _0x396fdd=_0x1e054b,_0x379406={'ikvQI':function(_0x12102e,_0x95370e){return _0x12102e(_0x95370e);},'vcVZF':_0x396fdd(0x201),'PlPJy':_0x396fdd(0x236),'WQNlA':'&lt;'};return _0x379406['ikvQI'](String,_0x48fbf2)['replace'](/&/g,_0x379406[_0x396fdd(0x229)])[_0x396fdd(0x221)](/"/g,_0x379406[_0x396fdd(0x203)])['replace'](/</g,_0x379406[_0x396fdd(0x20a)])[_0x396fdd(0x221)](/>/g,'&gt;');}