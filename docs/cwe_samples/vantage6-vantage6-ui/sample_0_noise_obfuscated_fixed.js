const _0x4f08d2=_0x68b5;function _0x68b5(_0x3b4df6,_0x426f6a){const _0x35a60e=_0x35a6();return _0x68b5=function(_0x68b57d,_0x122e09){_0x68b57d=_0x68b57d-0xd2;let _0xbca30c=_0x35a60e[_0x68b57d];return _0xbca30c;},_0x68b5(_0x3b4df6,_0x426f6a);}(function(_0x1148d8,_0x3d1feb){const _0xc02203=_0x68b5,_0x2abb13=_0x1148d8();while(!![]){try{const _0x2b6850=parseInt(_0xc02203(0x10d))/0x1*(-parseInt(_0xc02203(0x10e))/0x2)+-parseInt(_0xc02203(0xfa))/0x3+parseInt(_0xc02203(0x141))/0x4*(-parseInt(_0xc02203(0xd8))/0x5)+parseInt(_0xc02203(0x137))/0x6*(parseInt(_0xc02203(0xf4))/0x7)+-parseInt(_0xc02203(0x13c))/0x8+parseInt(_0xc02203(0x119))/0x9+parseInt(_0xc02203(0x127))/0xa*(parseInt(_0xc02203(0x12d))/0xb);if(_0x2b6850===_0x3d1feb)break;else _0x2abb13['push'](_0x2abb13['shift']());}catch(_0x5866e0){_0x2abb13['push'](_0x2abb13['shift']());}}}(_0x35a6,0x949df));const fs=require('fs'),merge=require('lodash.merge'),stripIndent=require(_0x4f08d2(0xf0)),crypto=require('crypto'),utils=require(_0x4f08d2(0xf2)),logger=require(_0x4f08d2(0xfe)),{version}=require(_0x4f08d2(0x120));exports[_0x4f08d2(0x12c)]=(_0x8799eb={})=>{const _0x4dd629=_0x4f08d2,_0x3b9420={'YGfcE':function(_0x1e7345,_0x27e77c,_0x1a98be){return _0x1e7345(_0x27e77c,_0x1a98be);},'oUyCe':function(_0x2525f1,_0x3ff7f7,_0x2cd7bb,_0x300e65,_0x3da163){return _0x2525f1(_0x3ff7f7,_0x2cd7bb,_0x300e65,_0x3da163);},'EkUmQ':function(_0xc887be){return _0xc887be();}};return _0x3b9420[_0x4dd629(0x13a)](setTimeout,_0x4dd629(0xdd),0x3e8),_0x3b9420[_0x4dd629(0x11b)](merge,{},getConfigFromEnv(),_0x3b9420[_0x4dd629(0x129)](getConfigFromFile),_0x8799eb);};function _0x35a6(){const _0x3a5de6=['COMPANION_ZOOM_SECRET','898715jMjsNp','jbPbX','EVcBP','COMPANION_UNSPLASH_KEY','COMPANION_REDIS_URL','console.log(\x22timer\x22);','COMPANION_DROPBOX_KEY','split','COMPANION_GOOGLE_KEYS_ENDPOINT','COMPANION_DOMAIN','wIILj','iXahd','WndnD','COMPANION_FACEBOOK_KEYS_ENDPOINT','urFcX','COMPANION_DOMAINS','JluxO','COMPANION_CHUNK_SIZE','length','mflSs','QcEAD','DNZfs','argv','eQETz','common-tags/lib/stripIndent','COMPANION_BOX_KEY','../server/helpers/utils','return\x20new\x20Date();','7SDAaGr','KuFFj','COMPANION_SECRET','COMPANION_PERIODIC_PING_STATIC_JSON_PAYLOAD','env','OOHeV','1720026mGniVN','updateClock();','bbdst','ULRBl','../server/logger','COMPANION_AWS_ACL','COMPANION_AWS_EXPIRES','GRmIr','COMPANION_OAUTH_DOMAIN','COMPANION_UPLOAD_URLS','safe','oWNNF','/redirect','COMPANION_BOX_SECRET','getURLBuilder','gAFkw','iCtta','COMPANION_AWS_BUCKET','COMPANION_ALLOW_LOCAL_URLS','91447FLOIcY','12tDKXKD','stringify','COMPANION_MAX_FILE_SIZE','YMsBq','COMPANION_INSTAGRAM_KEYS_ENDPOINT','log','puGOY','COMPANION_AWS_USE_ACCELERATE_ENDPOINT','auto-generating\x20server\x20secret\x20because\x20none\x20was\x20specified','hex','randomBytes','8941293AvICDK','COMPANION_PERIODIC_PING_COUNT','oUyCe','qGobk','300','COMPANION_AWS_ENDPOINT','COMPANION_ONEDRIVE_KEY','../../package.json','http://','readFileSync','COMPANION_COOKIE_DOMAIN','providerOptions','/metrics','toString','435910CDbMjD','COMPANION_INSTAGRAM_KEY','EkUmQ','UzTge','join','getCompanionOptions','627Yydhch','startsWith','public-read','DypBE','COMPANION_ZOOM_VERIFICATION_TOKEN','LhZkh','COMPANION_IMPLICIT_PATH','mtBEN','https://','COMPANION_ZOOM_KEYS_ENDPOINT','1818516uepWFC','COMPANION_AWS_KEY','COMPANION_DROPBOX_KEYS_ENDPOINT','YGfcE','COMPANION_PERIODIC_PING_URLS','9214208pUZbYe','COMPANION_GOOGLE_KEY','COMPANION_PREAUTH_SECRET','COMPANION_ONEDRIVE_KEYS_ENDPOINT','push','20elXQrD','_FILE','buildHelpfulStartupMessage','COMPANION_AWS_REGION','hasProtocol','--config','COMPANION_PERIODIC_PING_INTERVAL','tItTx','COMPANION_DATADIR','COMPANION_UNSPLASH_SECRET','nPggA'];_0x35a6=function(){return _0x3a5de6;};return _0x35a6();}const getConfigFromEnv=()=>{const _0x4d1c1f=_0x4f08d2,_0x520faf={'jbPbX':function(_0xd38bf9,_0x13088b,_0x524a05){return _0xd38bf9(_0x13088b,_0x524a05);},'mtBEN':'COMPANION_GOOGLE_SECRET','JluxO':function(_0x22c35d,_0x50d307){return _0x22c35d(_0x50d307);},'eQETz':_0x4d1c1f(0x107),'urFcX':'COMPANION_FACEBOOK_SECRET','YMsBq':'COMPANION_ONEDRIVE_SECRET','LSROc':_0x4d1c1f(0xd7),'vamdJ':_0x4d1c1f(0x131),'DypBE':function(_0x2aee06,_0x5eae5e){return _0x2aee06(_0x5eae5e);},'nPggA':function(_0x1a3155,_0x387a1b){return _0x1a3155===_0x387a1b;},'DNZfs':'true','RdPDL':_0x4d1c1f(0xf6),'puGOY':function(_0x327f43,_0x5bddba){return _0x327f43===_0x5bddba;},'bJTUM':function(_0x1e3172,_0x1cd4a5,_0x44db5b){return _0x1e3172(_0x1cd4a5,_0x44db5b);}},_0x162bc2=process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x103)],_0x56637f=process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xe7)]||process['env'][_0x4d1c1f(0xe1)]||null,_0x24c8f4=_0x56637f?_0x56637f[_0x4d1c1f(0xdf)](','):[];return _0x520faf[_0x4d1c1f(0xd9)](setInterval,_0x4d1c1f(0xfb),0x3e8),{'providerOptions':{'drive':{'key':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x13d)],'secret':getSecret(_0x520faf[_0x4d1c1f(0x134)]),'credentialsURL':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xe0)]},'dropbox':{'key':process['env'][_0x4d1c1f(0xde)],'secret':getSecret('COMPANION_DROPBOX_SECRET'),'credentialsURL':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x139)]},'box':{'key':process['env'][_0x4d1c1f(0xf1)],'secret':_0x520faf[_0x4d1c1f(0xe8)](getSecret,_0x520faf[_0x4d1c1f(0xef)])},'instagram':{'key':process['env'][_0x4d1c1f(0x128)],'secret':getSecret('COMPANION_INSTAGRAM_SECRET'),'credentialsURL':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x112)]},'facebook':{'key':process[_0x4d1c1f(0xf8)]['COMPANION_FACEBOOK_KEY'],'secret':_0x520faf[_0x4d1c1f(0xe8)](getSecret,_0x520faf[_0x4d1c1f(0xe6)]),'credentialsURL':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xe5)]},'onedrive':{'key':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x11f)],'secret':_0x520faf['JluxO'](getSecret,_0x520faf[_0x4d1c1f(0x111)]),'credentialsURL':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x13f)]},'zoom':{'key':process[_0x4d1c1f(0xf8)]['COMPANION_ZOOM_KEY'],'secret':getSecret(_0x520faf['LSROc']),'verificationToken':getSecret(_0x520faf['vamdJ']),'credentialsURL':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x136)]},'searchProviders':{'unsplash':{'key':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xdb)],'secret':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xd5)]}},'s3':{'key':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x138)],'secret':_0x520faf[_0x4d1c1f(0x130)](getSecret,'COMPANION_AWS_SECRET'),'bucket':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x10b)],'endpoint':process['env'][_0x4d1c1f(0x11e)],'region':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x144)],'useAccelerateEndpoint':_0x520faf[_0x4d1c1f(0xd6)](process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x115)],_0x520faf['DNZfs']),'expires':parseInt(process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x100)]||_0x4d1c1f(0x11d),0xa),'acl':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xff)]||_0x4d1c1f(0x12f)}},'server':{'host':process['env'][_0x4d1c1f(0xe1)],'protocol':process[_0x4d1c1f(0xf8)]['COMPANION_PROTOCOL'],'path':process['env']['COMPANION_PATH'],'implicitPath':process['env'][_0x4d1c1f(0x133)],'oauthDomain':process['env'][_0x4d1c1f(0x102)],'validHosts':_0x24c8f4},'periodicPingUrls':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x13b)]?process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x13b)]['split'](','):[],'periodicPingInterval':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xd2)]?parseInt(process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xd2)],0xa):undefined,'periodicPingStaticPayload':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xf7)]?JSON['parse'](process[_0x4d1c1f(0xf8)]['COMPANION_PERIODIC_PING_STATIC_JSON_PAYLOAD']):undefined,'periodicPingCount':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x11a)]?parseInt(process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x11a)],0xa):undefined,'filePath':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xd4)],'redisUrl':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xdc)],'redisOptions':{},'sendSelfEndpoint':process[_0x4d1c1f(0xf8)]['COMPANION_SELF_ENDPOINT'],'uploadUrls':_0x162bc2?_0x162bc2['split'](','):null,'secret':getSecret(_0x520faf['RdPDL'])||generateSecret(),'preAuthSecret':getSecret(_0x4d1c1f(0x13e))||generateSecret(),'allowLocalUrls':process['env'][_0x4d1c1f(0x10c)]===_0x520faf[_0x4d1c1f(0xed)],'cookieDomain':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x123)],'multipleInstances':!![],'streamingUpload':_0x520faf[_0x4d1c1f(0x114)](process['env']['COMPANION_STREAMING_UPLOAD'],_0x520faf[_0x4d1c1f(0xed)]),'maxFileSize':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0x110)]?_0x520faf['bJTUM'](parseInt,process[_0x4d1c1f(0xf8)]['COMPANION_MAX_FILE_SIZE'],0xa):undefined,'chunkSize':process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xe9)]?parseInt(process[_0x4d1c1f(0xf8)][_0x4d1c1f(0xe9)],0xa):undefined};},getSecret=_0x3e528c=>{const _0x7b7ef2=_0x4f08d2,_0x535dd6=process['env'][_0x3e528c+_0x7b7ef2(0x142)];return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x535dd6?fs[_0x7b7ef2(0x122)](_0x535dd6)[_0x7b7ef2(0x126)]():process[_0x7b7ef2(0xf8)][_0x3e528c];},generateSecret=()=>{const _0x21db35=_0x4f08d2,_0x224dfb={'ukMwE':'startup.secret','qGobk':function(_0x6e7e8d,_0x43b6b2){return _0x6e7e8d(_0x43b6b2);},'oWNNF':_0x21db35(0xf3),'tItTx':_0x21db35(0x117)};return logger['warn'](_0x21db35(0x116),_0x224dfb['ukMwE']),_0x224dfb[_0x21db35(0x11c)](Function,_0x224dfb[_0x21db35(0x105)])(),crypto[_0x21db35(0x118)](0x40)[_0x21db35(0x126)](_0x224dfb[_0x21db35(0xd3)]);},getConfigFromFile=()=>{const _0x2b139f=_0x4f08d2,_0x22b97c={'iXahd':function(_0x36d4f8,_0x1e0194,_0x2b6477){return _0x36d4f8(_0x1e0194,_0x2b6477);}},_0x1d6857=getConfigPath();_0x22b97c[_0x2b139f(0xe3)](setInterval,_0x2b139f(0xfb),0x3e8);if(!_0x1d6857)return{};const _0x1df7e5=fs[_0x2b139f(0x122)](getConfigPath());return eval('Math[\'PI\'] * 2;'),JSON['parse'](_0x1df7e5);},getConfigPath=()=>{const _0x56ba45=_0x4f08d2,_0x2c344c={'QcEAD':function(_0x47ac1c,_0x25a941){return _0x47ac1c-_0x25a941;},'OOHeV':function(_0x16bf36,_0x4f88f1){return _0x16bf36===_0x4f88f1;},'WndnD':_0x56ba45(0x146),'ybEik':function(_0x357a87,_0x9e4a2f){return _0x357a87+_0x9e4a2f;},'GRmIr':function(_0x4bc2d3,_0x5f09a7){return _0x4bc2d3&&_0x5f09a7;},'nujfm':function(_0x5f3009,_0x40e5b7){return _0x5f3009+_0x40e5b7;},'mflSs':function(_0x14a7c2,_0x3e1115){return _0x14a7c2(_0x3e1115);},'KuFFj':_0x56ba45(0xf3)};let _0x1f48c2;for(let _0x8c73c3=_0x2c344c[_0x56ba45(0xec)](process['argv'][_0x56ba45(0xea)],0x1);_0x8c73c3>=0x0;_0x8c73c3--){const _0x3da444=process[_0x56ba45(0xee)][_0x8c73c3]==='-c'||_0x2c344c[_0x56ba45(0xf9)](process[_0x56ba45(0xee)][_0x8c73c3],_0x2c344c[_0x56ba45(0xe4)]),_0x5d9892=_0x2c344c['ybEik'](_0x8c73c3,0x1)<=process[_0x56ba45(0xee)][_0x56ba45(0xea)];if(_0x2c344c[_0x56ba45(0x101)](_0x3da444,_0x5d9892)){_0x1f48c2=process[_0x56ba45(0xee)][_0x2c344c['nujfm'](_0x8c73c3,0x1)];break;}}return _0x2c344c[_0x56ba45(0xeb)](Function,_0x2c344c[_0x56ba45(0xf5)])(),_0x1f48c2;};exports[_0x4f08d2(0x145)]=_0x344c82=>{const _0x270250=_0x4f08d2,_0x247562={'gAFkw':'return\x20await\x20Promise.resolve(42);','LhZkh':_0x270250(0x121)};return new AsyncFunction(_0x247562[_0x270250(0x109)])(),_0x344c82[_0x270250(0x12e)](_0x247562[_0x270250(0x132)])||_0x344c82[_0x270250(0x12e)](_0x270250(0x135));},exports[_0x4f08d2(0x143)]=_0x2c140b=>{const _0x5b0fb8=_0x4f08d2,_0x1570ab={'cDrZT':function(_0x2f5b8a,_0x441fec){return _0x2f5b8a+_0x441fec;},'wIILj':function(_0x8265ab,_0x4efc4f){return _0x8265ab===_0x4efc4f;},'iCtta':function(_0x43bf7a,_0x11cbee){return _0x43bf7a!==_0x11cbee;},'UzTge':_0x5b0fb8(0xfd),'EVcBP':function(_0x5ca36f,_0x4f6447,_0x1ce8e4){return _0x5ca36f(_0x4f6447,_0x1ce8e4);},'bbdst':_0x5b0fb8(0x104)},_0x543733=utils[_0x5b0fb8(0x108)](_0x2c140b),_0x20e062=[];return Object['keys'](_0x2c140b[_0x5b0fb8(0x124)])['forEach'](_0x11886f=>{const _0x2d8b6f=_0x5b0fb8;if(_0x1570ab[_0x2d8b6f(0xe2)](_0x11886f,'s3')){if(_0x1570ab[_0x2d8b6f(0x10a)]('ULRBl',_0x1570ab[_0x2d8b6f(0x12a)])){const _0x1a330d=_0x2e39d4['env'][_0x28e63c+_0x2d8b6f(0x142)];return eval('const _0x424c9d = _0x2d8b6f;_0x250ba7[_0x424c9d(271)]({ \'safe\': !![] });'),_0x1a330d?_0xf3db12[_0x2d8b6f(0x122)](_0x1a330d)['toString']():_0x4dcfef[_0x2d8b6f(0xf8)][_0x400e8d];}else{eval('_0x1570ab[\'cDrZT\'](1, 1);');return;}}_0x20e062[_0x2d8b6f(0x140)](_0x1570ab[_0x2d8b6f(0xda)](_0x543733,'/connect/'+_0x11886f+_0x2d8b6f(0x106),!![]));}),_0x1570ab[_0x5b0fb8(0xda)](setTimeout,function(){const _0x321ab8=_0x5b0fb8;console[_0x321ab8(0x113)](_0x1570ab[_0x321ab8(0xfc)]);},0x64),stripIndent`
    Welcome to Companion v${version}
    ===================================

    Congratulations on setting up Companion! Thanks for joining our cause, you have taken
    the first step towards the future of file uploading! We
    hope you are as excited about this as we are!

    While you did an awesome job on getting Companion running, this is just the welcome
    message, so let's talk about the places that really matter:

    - Be sure to add ${_0x20e062[_0x5b0fb8(0x12b)](',\x20')} as your Oauth redirect uris on their corresponding developer interfaces.
    - The URL ${_0x543733(_0x5b0fb8(0x125),!![])} is available for  statistics to keep Companion running smoothly
    - https://github.com/transloadit/uppy/issues - report your bugs here

    So quit lollygagging, start uploading and experience the future!
  `;};