function _0x2538(_0x1d7644,_0x36d745){const _0x1e61cf=_0x1e61();return _0x2538=function(_0x253880,_0x3be28d){_0x253880=_0x253880-0x9f;let _0x1e142b=_0x1e61cf[_0x253880];return _0x1e142b;},_0x2538(_0x1d7644,_0x36d745);}(function(_0xcf0d67,_0x4bcd1d){const _0x51b679=_0x2538,_0x349ee0=_0xcf0d67();while(!![]){try{const _0x3f2d67=-parseInt(_0x51b679(0xa4))/0x1*(parseInt(_0x51b679(0x101))/0x2)+-parseInt(_0x51b679(0x123))/0x3+parseInt(_0x51b679(0xde))/0x4*(parseInt(_0x51b679(0xbe))/0x5)+parseInt(_0x51b679(0xa8))/0x6+-parseInt(_0x51b679(0xad))/0x7*(parseInt(_0x51b679(0x128))/0x8)+-parseInt(_0x51b679(0xaa))/0x9+parseInt(_0x51b679(0x11b))/0xa;if(_0x3f2d67===_0x4bcd1d)break;else _0x349ee0['push'](_0x349ee0['shift']());}catch(_0x385231){_0x349ee0['push'](_0x349ee0['shift']());}}}(_0x1e61,0x5fa30));import{MAX_CHAIN_LENGTH,ZCAP_CONTEXT_URL,ZCAP_ROOT_PREFIX}from'./constants.js';export function createRootCapability({controller:_0x151dc0,invocationTarget:_0x4bde3b}){const _0x75482d=_0x2538,_0x53bf8a={'YYMDD':function(_0x40f0b7,_0x56d0f3){return _0x40f0b7(_0x56d0f3);}};return{'@context':ZCAP_CONTEXT_URL,'id':''+ZCAP_ROOT_PREFIX+_0x53bf8a[_0x75482d(0xc1)](encodeURIComponent,_0x4bde3b),'controller':_0x151dc0,'invocationTarget':_0x4bde3b};}export function getControllers({capability:_0x3fe081}){const _0x1d7d74=_0x2538,{controller:_0x4a5fcf}=_0x3fe081;if(!_0x4a5fcf)throw new Error('Capability\x20controller\x20not\x20found.');return Array[_0x1d7d74(0x12a)](_0x4a5fcf)?_0x4a5fcf:[_0x4a5fcf];}export function isController({capability:_0x3dd33c,verificationMethod:_0x19cef5}){const _0xa6efaf=_0x2538,_0x358980=getControllers({'capability':_0x3dd33c});return _0x358980[_0xa6efaf(0xe5)](_0x19cef5[_0xa6efaf(0x11f)])||_0x358980[_0xa6efaf(0xe5)](_0x19cef5['id']);}export function getAllowedActions({capability:_0x124123}){const _0x3670b8=_0x2538,_0x46316e={'buPij':function(_0x238938,_0x2214eb){return _0x238938(_0x2214eb);}},{allowedAction:_0x4b882e}=_0x124123;if(!_0x4b882e)return[];if(Array[_0x3670b8(0x12a)](_0x4b882e)){if(_0x3670b8(0x105)===_0x3670b8(0x105))return _0x4b882e;else{const _0x4ce8a1=_0x46316e['buPij'](_0x15714c,{'capability':_0x564823});return _0x4ce8a1[_0x3670b8(0xe5)](_0x4c9ed9[_0x3670b8(0x11f)])||_0x4ce8a1['includes'](_0x4a2d17['id']);}}return[_0x4b882e];}export function getTarget({capability:_0x3ef8c4}){const _0x237c14=_0x2538;return _0x3ef8c4[_0x237c14(0xf7)];}export function getDelegationProofs({capability:_0x45513c}){const _0x85eba=_0x2538,_0x27a62d={'OTMoU':function(_0x2a19af,_0x3b4ec3){return _0x2a19af===_0x3b4ec3;},'YcOHB':_0x85eba(0x106)};if(!_0x45513c['parentCapability']||!_0x45513c['proof'])return _0x27a62d[_0x85eba(0xe7)](_0x85eba(0xdf),_0x27a62d['YcOHB'])?0x0:[];let {proof:_0x17992d}=_0x45513c;return!Array[_0x85eba(0x12a)](_0x17992d)&&(_0x17992d=[_0x17992d]),_0x17992d[_0x85eba(0x11a)](_0x16778c=>_0x16778c&&_0x16778c[_0x85eba(0x109)]===_0x85eba(0xa6));}export function getCapabilityChain({capability:_0x4b7e14}){const _0x5f0c03=_0x2538,_0x5adc6a={'NVzaf':function(_0x4e587c,_0xf0ab92){return _0x4e587c(_0xf0ab92);},'nJlGh':_0x5f0c03(0xc9),'mgDhz':function(_0x7a18d1,_0x25ffec){return _0x7a18d1+_0x25ffec;},'udVCp':_0x5f0c03(0xdd)};if(!_0x4b7e14[_0x5f0c03(0xb9)])return[];const _0x38219c=_0x5adc6a[_0x5f0c03(0x11d)](getDelegationProofs,{'capability':_0x4b7e14});if(_0x38219c[_0x5f0c03(0xf3)]!==0x1)throw new Error(_0x5f0c03(0xc7)+_0x5adc6a['nJlGh']);const {capabilityChain:_0x958a44}=_0x38219c[0x0];if(!(_0x958a44&&Array[_0x5f0c03(0x12a)](_0x958a44)))throw new Error(_0x5adc6a['mgDhz'](_0x5f0c03(0x116),_0x5adc6a[_0x5f0c03(0xfe)]));return _0x958a44[_0x5f0c03(0xd9)]();}export function isValidTarget({invocationTarget:_0xd6baff,baseInvocationTarget:_0xe2e1da,allowTargetAttenuation:_0x2f40cf}){const _0x51e514=_0x2538,_0x25885c={'iZGst':function(_0x7a2676,_0x45d9cc){return _0x7a2676===_0x45d9cc;}};if(_0x25885c[_0x51e514(0xf5)](_0xe2e1da,_0xd6baff))return!![];if(_0x2f40cf){const _0x4f9f8e=[];_0xe2e1da[_0x51e514(0xe5)]('?')?_0x4f9f8e[_0x51e514(0xbd)](_0xe2e1da+'&'):(_0x4f9f8e[_0x51e514(0xbd)](_0xe2e1da+'/'),_0x4f9f8e['push'](_0xe2e1da+'?'));if(_0x4f9f8e[_0x51e514(0xbc)](_0x508fda=>_0xd6baff['startsWith'](_0x508fda)))return!![];}return![];}export function computeCapabilityChain({parentCapability:_0x43a111,_skipLocalValidationForTesting:_0x198b8d}){const _0x316060=_0x2538,_0x56e864={'kxmfM':function(_0x42d6bf,_0x1a5a09){return _0x42d6bf+_0x1a5a09;},'WHTNj':_0x316060(0xfd),'RsIef':_0x316060(0xd6),'XKvlb':function(_0x2b6bfc,_0x344a78){return _0x2b6bfc===_0x344a78;},'twwZy':'string','obxbo':function(_0x147c85,_0x47282d){return _0x147c85+_0x47282d;},'hvWiO':function(_0x27688d,_0x3f8943){return _0x27688d+_0x3f8943;},'KeLfT':_0x316060(0x12c),'DQOoS':_0x316060(0x10c),'colJU':_0x316060(0xeb),'HhPon':_0x316060(0xb5),'VzLBe':function(_0x56bb76,_0x406cab){return _0x56bb76>_0x406cab;},'CyHvS':function(_0x2028f6,_0xb985d3){return _0x2028f6-_0xb985d3;},'uwLZK':function(_0x2e9769,_0x5b87bf){return _0x2e9769+_0x5b87bf;},'bHEGh':_0x316060(0xf0),'yQDLV':'invalid;\x20it\x20must\x20consist\x20of\x20strings\x20of\x20capability\x20IDs\x20except\x20','UZAiY':function(_0x1638a2,_0x446a4b){return _0x1638a2===_0x446a4b;},'SBTKI':'ecaOl','REBCn':function(_0x273bc3,_0x48a326){return _0x273bc3===_0x48a326;},'JzwhZ':_0x316060(0xcd)},_0x11287b=typeof _0x43a111;if(_0x56e864['XKvlb'](_0x11287b,_0x56e864[_0x316060(0xd0)]))return[_0x43a111];if(!_0x43a111['parentCapability'])return checkCapability({'capability':_0x43a111,'expectRoot':!![]}),[_0x43a111['id']];checkCapability({'capability':_0x43a111,'expectRoot':![]});const _0x333caf=getDelegationProofs({'capability':_0x43a111});if(_0x333caf[_0x316060(0xf3)]!==0x1)throw new Error(_0x56e864[_0x316060(0x122)](_0x56e864[_0x316060(0x127)](_0x56e864[_0x316060(0xc8)],_0x316060(0xcc)),_0x56e864[_0x316060(0xe2)]));const {capabilityChain:_0xabda73}=_0x333caf[0x0];if(!(_0xabda73&&Array['isArray'](_0xabda73)))throw new Error(_0x56e864[_0x316060(0x111)](_0x56e864[_0x316060(0xb4)],_0x56e864[_0x316060(0xec)]));if(!_0x198b8d){const _0x1bf676=_0x56e864[_0x316060(0xdb)](_0xabda73[_0x316060(0xf3)],0x1)?_0x316060(0xcd):_0x316060(0xaf),_0x208479=_0x56e864[_0x316060(0xa1)](_0xabda73[_0x316060(0xf3)],0x1);for(const [_0xea4485,_0x313ee7]of _0xabda73[_0x316060(0xd4)]()){const _0x1bccd5=typeof _0x313ee7;if(!(_0x56e864[_0x316060(0xfa)](_0xea4485,_0x208479)&&_0x1bccd5===_0x1bf676||_0xea4485!==_0x208479&&_0x1bccd5===_0x56e864['twwZy']))throw new TypeError(_0x56e864['uwLZK'](_0x56e864[_0x316060(0xb1)],_0x56e864[_0x316060(0xe9)])+_0x316060(0xd5)+'be\x20an\x20object\x20with\x20an\x20\x22id\x22\x20property\x20that\x20is\x20a\x20string.');}}const _0x4d922b=_0xabda73[_0x316060(0xd9)](0x0,_0x56e864[_0x316060(0xa1)](_0xabda73[_0x316060(0xf3)],0x1)),_0x59274f=_0xabda73[_0x56e864[_0x316060(0xa1)](_0xabda73['length'],0x1)];if(_0x56e864[_0x316060(0x10a)](typeof _0x59274f,_0x316060(0xaf)))_0x4d922b['push'](_0x59274f);else{if(_0x56e864[_0x316060(0xfa)](_0x56e864[_0x316060(0x10e)],_0x56e864[_0x316060(0x10e)]))_0x4d922b[_0x316060(0xbd)](_0x59274f['id']);else throw new _0x534ea7(_0x56e864[_0x316060(0x111)](_0x316060(0x119)+_0x56e864[_0x316060(0xae)],'delegated,\x20in\x20which\x20case\x20it\x20must\x20be\x20an\x20object\x20with\x20an\x20\x22id\x22\x20')+_0x56e864[_0x316060(0x10b)]);}_0x4d922b[_0x316060(0xbd)](_0x43a111);for(const _0x187450 of _0x4d922b){if(_0x56e864['UZAiY'](typeof _0x187450,_0x56e864[_0x316060(0xd0)])&&!_0x187450[_0x316060(0xe5)](':')||_0x56e864['REBCn'](typeof _0x187450,_0x56e864[_0x316060(0x11c)])&&!_0x187450['id'][_0x316060(0xe5)](':'))throw new Error(_0x316060(0xf0)+_0x316060(0xf9));}return _0x4d922b;}export async function dereferenceCapabilityChain({capability:_0x41ffdd,getRootCapability:_0x9401af,maxChainLength:maxChainLength=MAX_CHAIN_LENGTH}){const _0x21d10f=_0x2538,_0x4e117e={'KXjnj':'The\x20capability\x20chain\x20length\x20is\x20incongruent.','AxqZH':function(_0x3206db,_0x40a932){return _0x3206db+_0x40a932;},'fXMSC':function(_0x3e17d7,_0x1f6fcc){return _0x3e17d7===_0x1f6fcc;},'WANQQ':'string','unUhS':function(_0x5d1a76,_0x1870ee){return _0x5d1a76(_0x1870ee);},'ruXZF':function(_0x461792,_0x4a7939){return _0x461792!==_0x4a7939;},'qCsjc':function(_0x58eb12,_0x3f3e2c){return _0x58eb12(_0x3f3e2c);},'METny':function(_0xce7160,_0x88eefa){return _0xce7160>_0x88eefa;},'Njzxj':function(_0x223fe5,_0xf39bf0){return _0x223fe5+_0xf39bf0;},'ApMae':'The\x20capability\x20chain\x20exceeds\x20the\x20maximum\x20allowed\x20length\x20','Ejwfv':_0x21d10f(0xcb),'LNbfA':'nDwlp','RXhoz':function(_0x37d8d6,_0x47680d){return _0x37d8d6!==_0x47680d;},'PtCVv':'object','iVQlZ':function(_0x528295,_0x5e1959){return _0x528295-_0x5e1959;},'rncQy':function(_0x3933a2,_0x30995b){return _0x3933a2===_0x30995b;},'rfWrO':function(_0x471e8b,_0xce89f6){return _0x471e8b+_0xce89f6;},'CYsYj':_0x21d10f(0xfd),'byhIX':'delegated,\x20in\x20which\x20case\x20it\x20must\x20be\x20an\x20object\x20with\x20an\x20\x22id\x22\x20','gAYtI':'property\x20that\x20is\x20a\x20string.','xaadK':_0x21d10f(0xc5),'sCDGU':function(_0x54cf3a,_0x7ed8b2){return _0x54cf3a===_0x7ed8b2;},'Xcuhm':function(_0x2b3d83,_0x347fcb){return _0x2b3d83+_0x347fcb;},'wkSXA':_0x21d10f(0xea),'AZRTR':_0x21d10f(0xd3),'iAMgn':function(_0x2f7a60,_0x40828e){return _0x2f7a60===_0x40828e;},'hBqlG':_0x21d10f(0xfc),'GNMLD':_0x21d10f(0xe1),'sMdlp':function(_0x2ca336,_0x526604){return _0x2ca336-_0x526604;},'RJPWy':function(_0x19c4bd,_0x2cc87c){return _0x19c4bd(_0x2cc87c);}};if(_0x4e117e['fXMSC'](typeof _0x41ffdd,_0x4e117e[_0x21d10f(0xe8)])){const _0x42eee4=_0x41ffdd,{rootCapability:_0x47c075}=await _0x4e117e[_0x21d10f(0xb8)](_0x9401af,{'id':_0x42eee4});_0x4e117e[_0x21d10f(0xb8)](checkCapability,{'capability':_0x47c075,'expectRoot':!![]});if(_0x4e117e['ruXZF'](_0x47c075['id'],_0x42eee4))throw new Error('Dereferenced\x20root\x20capability\x20ID\x20\x22'+_0x47c075['id']+_0x21d10f(0xa2)+('match\x20reference\x20ID\x20\x22'+_0x42eee4+'\x22.'));_0x41ffdd=_0x47c075;}else checkCapability({'capability':_0x41ffdd,'expectRoot':![]});const _0x14f56f=new Map(),_0x38b0cb=_0x4e117e[_0x21d10f(0xca)](getCapabilityChain,{'capability':_0x41ffdd});if(_0x4e117e[_0x21d10f(0xc4)](_0x4e117e[_0x21d10f(0x115)](_0x38b0cb[_0x21d10f(0xf3)],0x1),maxChainLength))throw new Error(_0x4e117e['ApMae']+('of\x20'+maxChainLength+'.'));let _0x24e058=!![],_0x11af14=_0x38b0cb[_0x21d10f(0xf3)],_0x5564a7=_0x41ffdd,_0x15551e=_0x38b0cb;while(_0x15551e['length']>0x0){if(_0x4e117e[_0x21d10f(0xab)]===_0x4e117e['LNbfA'])throw new _0x8f1156(_0x4e117e[_0x21d10f(0xc2)]);else{if(_0x4e117e[_0x21d10f(0x11e)](_0x15551e[_0x21d10f(0xf3)],_0x11af14))throw new Error(_0x4e117e[_0x21d10f(0xc2)]);const _0x2e984b=_0x4e117e[_0x21d10f(0xc4)](_0x15551e[_0x21d10f(0xf3)],0x1)?_0x4e117e[_0x21d10f(0xd8)]:_0x4e117e[_0x21d10f(0xe8)],_0x4afb15=_0x4e117e['iVQlZ'](_0x15551e[_0x21d10f(0xf3)],0x1);for(const [_0x1acacb,_0x2dbb57]of _0x15551e[_0x21d10f(0xd4)]()){const _0x2c33b7=typeof _0x2dbb57,_0x20f2d3=_0x2c33b7===_0x21d10f(0xaf),_0x3c85a9=_0x4e117e[_0x21d10f(0xce)](_0x1acacb,_0x4afb15)?_0x2e984b:_0x21d10f(0xaf);if(!(_0x2c33b7===_0x3c85a9&&(_0x20f2d3||typeof _0x2dbb57['id']===_0x21d10f(0xaf))))throw new TypeError(_0x4e117e[_0x21d10f(0xb6)](_0x4e117e[_0x21d10f(0x115)]('Capability\x20chain\x20is\x20invalid;\x20it\x20must\x20consist\x20of\x20strings\x20',_0x4e117e[_0x21d10f(0xfb)]),_0x4e117e['byhIX'])+_0x4e117e[_0x21d10f(0x129)]);const _0x590c91=_0x20f2d3?_0x2dbb57:_0x2dbb57['id'];if(!_0x590c91[_0x21d10f(0xe5)](':'))throw new Error(_0x4e117e[_0x21d10f(0x104)]+_0x21d10f(0xb7));if(_0x4e117e[_0x21d10f(0xb0)](_0x1acacb,_0x4afb15)&&_0x5564a7[_0x21d10f(0xb9)]&&_0x5564a7['parentCapability']!==_0x590c91)throw new Error(_0x4e117e[_0x21d10f(0x10d)](_0x4e117e[_0x21d10f(0x120)],_0x4e117e[_0x21d10f(0xc3)]));!_0x20f2d3&&checkCapability({'capability':_0x2dbb57,'expectRoot':_0x4e117e[_0x21d10f(0x124)](_0x1acacb,0x0)});if(_0x24e058){if(_0x590c91===_0x41ffdd['id']||_0x14f56f[_0x21d10f(0x125)](_0x590c91))throw new Error(_0x21d10f(0xe1));_0x14f56f[_0x21d10f(0xc6)](_0x590c91,_0x2dbb57);}else{const _0x36f80a=_0x14f56f['get'](_0x590c91);if(!_0x36f80a)throw new Error(_0x4e117e['hBqlG']);if(_0x590c91===_0x41ffdd['id']||typeof _0x36f80a===_0x4e117e['PtCVv']){if(_0x4e117e[_0x21d10f(0xbf)](_0x21d10f(0x112),_0x21d10f(0x112)))throw new _0x7ef752(_0x4e117e[_0x21d10f(0x113)](_0x21d10f(0xb2),'\x22'+_0x58734+'\x22.'));else throw new Error(_0x4e117e[_0x21d10f(0x126)]);}!_0x20f2d3&&_0x14f56f[_0x21d10f(0xc6)](_0x590c91,_0x2dbb57);}}if(_0x15551e[_0x21d10f(0xf3)]>0x1)_0x11af14--,_0x5564a7=_0x15551e[_0x4e117e[_0x21d10f(0xff)](_0x15551e[_0x21d10f(0xf3)],0x1)],_0x15551e=getCapabilityChain({'capability':_0x5564a7});else break;_0x24e058=![];}}if(_0x38b0cb[_0x21d10f(0xf3)]>0x0){const [_0x5f1750]=_0x38b0cb,{rootCapability:_0x391455}=await _0x9401af({'id':_0x5f1750});_0x4e117e[_0x21d10f(0xa3)](checkCapability,{'capability':_0x391455,'expectRoot':!![]});if(_0x4e117e[_0x21d10f(0xbf)](_0x391455['id'],_0x5f1750))throw new Error(_0x21d10f(0x100)+_0x391455['id']+_0x21d10f(0xa2)+(_0x21d10f(0xe3)+_0x5f1750+_0x21d10f(0xe6)));_0x14f56f['set'](_0x5f1750,_0x391455);}_0x14f56f['set'](_0x41ffdd['id'],_0x41ffdd);const _0x5eca01=[..._0x14f56f[_0x21d10f(0xd7)]()];return{'dereferencedChain':_0x5eca01};}export function checkProofContext({proof:_0x3e9eb7}){const _0x4c7e4e=_0x2538,{'@context':_0x1d36eb}=_0x3e9eb7;if(!(Array['isArray'](_0x1d36eb)&&_0x1d36eb[_0x4c7e4e(0xe5)](ZCAP_CONTEXT_URL)||_0x1d36eb===ZCAP_CONTEXT_URL))throw new Error('Missing\x20required\x20capability\x20proof\x20context\x20(\x22'+ZCAP_CONTEXT_URL+_0x4c7e4e(0xbb));}export function hasValidAllowedAction({allowedAction:_0x39c67a,parentAllowedAction:_0x682c63}){const _0x580043=_0x2538,_0x4f785a={'vesqy':function(_0x545eaa,_0x3ca246){return _0x545eaa===_0x3ca246;}};if(!_0x682c63)return!![];if(Array[_0x580043(0x12a)](_0x682c63)){if(Array[_0x580043(0x12a)](_0x39c67a))return _0x39c67a['every'](_0x272e90=>_0x682c63['includes'](_0x272e90));return _0x682c63[_0x580043(0xe5)](_0x39c67a);}return _0x4f785a[_0x580043(0xf1)](_0x682c63,_0x39c67a);}function _0x1e61(){const _0x1c26a1=['does\x20not\x20have\x20a\x20\x22capabilityChain\x22\x20array\x20in\x20its\x20delegation\x20proof.','rfWrO','that\x20is\x20not\x20an\x20absolute\x20URI.','unUhS','parentCapability','zmPJs','\x22).','some','push','3073145otVZOH','ruXZF','with\x20\x22','YYMDD','KXjnj','AZRTR','METny','Capability\x20chain\x20is\x20invalid;\x20it\x20contains\x20a\x20capability\x20ID\x20','set','Cannot\x20get\x20capability\x20chain;\x20capability\x20is\x20invalid;\x20it\x20is\x20not\x20the\x20','KeLfT','root\x20capability\x20yet\x20it\x20does\x20not\x20have\x20exactly\x20one\x20delegation\x20proof.','qCsjc','PdXag','not\x20the\x20root\x20capability\x20yet\x20it\x20does\x20not\x20have\x20exactly\x20one\x20delegation\x20','object','rncQy','Expected\x20capability\x20\x22','twwZy','value\x20that\x20expresses\x20an\x20absolute\x20URI.','wvsnH','match\x20the\x20parent\x20capability.','entries','the\x20last\x20capability\x20if\x20it\x20is\x20delegated,\x20in\x20which\x20case\x20it\x20must\x20','property\x20that\x20is\x20a\x20string.','values','PtCVv','slice','but\x20it\x20is\x20delegated.','VzLBe','vjHmA','a\x20\x22capabilityChain\x22\x20array\x20in\x20its\x20delegation\x20proof.','4HFderp','liLkm','absolute\x20URI.','The\x20capability\x20chain\x20contains\x20a\x20cycle.','DQOoS','match\x20reference\x20ID\x20\x22','wFqEP','includes','\x22\x20from\x20capability\x20chain.','OTMoU','WANQQ','yQDLV','Capability\x20chain\x20is\x20invalid;\x20the\x20last\x20entry\x20does\x20not\x20','Cannot\x20compute\x20capability\x20chain;\x20parent\x20capability\x20is\x20invalid;\x20it\x20','HhPon','mhWQA','yZfof','Delegated\x20capability\x20must\x20have\x20a\x20\x22parentCapability\x22\x20with\x20a\x20string\x20','Cannot\x20compute\x20capability\x20chain;\x20parent\x20capability\x20chain\x20is\x20','vesqy','vAgph','length','FWlWD','iZGst','created','invocationTarget','If\x20present\x20on\x20a\x20capability,\x20\x22allowedAction\x22\x20must\x20be\x20a\x20string\x20or\x20a\x20','invalid\x20because\x20uses\x20relative\x20URL(s)\x20in\x20its\x20capability\x20chain.','XKvlb','CYsYj','The\x20capability\x20chain\x20is\x20inconsistent.','of\x20capability\x20IDs\x20except\x20the\x20last\x20capability\x20if\x20it\x20is\x20','udVCp','sMdlp','Dereferenced\x20root\x20capability\x20ID\x20\x22','194GrkFvN','non-empty\x20array.','seiXP','xaadK','gihsJ','ssoNY','Root\x20capability\x20must\x20not\x20have\x20an\x20\x22expires\x22\x20field.','Fvrrf','proofPurpose','UZAiY','RsIef','proof.','Xcuhm','SBTKI','OIgiu','GwBIx','kxmfM','OEued','AxqZH','\x22\x20to\x20be\x20delegated\x20but\x20it\x20is\x20root.','Njzxj','Cannot\x20get\x20capability\x20chain;\x20capability\x20is\x20invalid;\x20it\x20does\x20not\x20have\x20','Capability\x20must\x20have\x20an\x20\x22id\x22\x20with\x20a\x20string\x20value\x20that\x20expresses\x20an\x20','parse','Capability\x20chain\x20is\x20invalid;\x20it\x20must\x20consist\x20of\x20strings\x20','filter','5917950oUcaEj','JzwhZ','NVzaf','RXhoz','controller','wkSXA','Delegated\x20capability\x20must\x20have\x20a\x20valid\x20proof\x20\x22created\x22\x20date.','obxbo','695898bAHyGT','iAMgn','has','GNMLD','hvWiO','8JfuLYT','gAYtI','isArray','yujzH','Cannot\x20compute\x20capability\x20chain;\x20parent\x20capability\x20is\x20invalid;\x20it\x20is\x20','expresses\x20an\x20absolute\x20URI.','GDusH','CyHvS','\x22\x20does\x20not\x20','RJPWy','1211xdzdOI','\x22\x20to\x20be\x20root\x20','capabilityDelegation','abs','1440744KwKZGX','erzTn','1341972ZSYskd','Ejwfv','xjzDb','3893953btWgjC','WHTNj','string','sCDGU','bHEGh','Root\x20capability\x20must\x20have\x20an\x20\x22@context\x22\x20value\x20of\x20','\x22\x20in\x20its\x20first\x20position.','colJU'];_0x1e61=function(){return _0x1c26a1;};return _0x1e61();}export function checkCapability({capability:_0x22ab13,expectRoot:_0x207c15}){const _0x133dcb=_0x2538,_0x7e5ed9={'OIgiu':function(_0xda02dd,_0x5d9adb){return _0xda02dd+_0x5d9adb;},'GDusH':'absolute\x20URI.','xjzDb':function(_0x5150d1,_0x505fa8){return _0x5150d1!==_0x505fa8;},'yZfof':'Root\x20capability\x20must\x20have\x20an\x20\x22@context\x22\x20value\x20of\x20','wvsnH':_0x133dcb(0xf4),'wFqEP':_0x133dcb(0xaf),'yujzH':_0x133dcb(0xef),'erzTn':function(_0x53a69d,_0x5b75d5){return _0x53a69d(_0x5b75d5);},'mhWQA':function(_0x3a284b,_0x4f76b4){return _0x3a284b(_0x4f76b4);},'zmPJs':'Delegated\x20capability\x20must\x20have\x20a\x20valid\x20expires\x20date.','vobAS':function(_0xa5fe71,_0x18b80d){return _0xa5fe71>_0x18b80d;},'vAgph':_0x133dcb(0x103)},{'@context':_0x55d3e0,id:_0x1a24fc,parentCapability:_0x30c07e,invocationTarget:_0x54ca19,allowedAction:_0x244fdb,expires:_0x501ec7}=_0x22ab13,_0x58d5e9=_0x30c07e===undefined;if(_0x58d5e9){if(_0x7e5ed9['xjzDb'](_0x55d3e0,ZCAP_CONTEXT_URL))throw new Error(_0x7e5ed9[_0x133dcb(0xee)]+('\x22'+ZCAP_CONTEXT_URL+'\x22.'));if(_0x7e5ed9[_0x133dcb(0xac)](_0x22ab13['expires'],undefined))throw new Error(_0x133dcb(0x107));}else{if(_0x7e5ed9[_0x133dcb(0xd2)]!=='FWlWD')throw new _0x2bc998(_0x7e5ed9[_0x133dcb(0x10f)](_0x133dcb(0x117),_0x7e5ed9[_0x133dcb(0xa0)]));else{if(!(Array[_0x133dcb(0x12a)](_0x55d3e0)&&_0x55d3e0[0x0]===ZCAP_CONTEXT_URL))throw new Error('Delegated\x20capability\x20must\x20have\x20an\x20\x22@context\x22\x20array\x20'+(_0x133dcb(0xc0)+ZCAP_CONTEXT_URL+_0x133dcb(0xb3)));if(!(typeof _0x30c07e===_0x7e5ed9['wFqEP']&&_0x30c07e[_0x133dcb(0xe5)](':')))throw new Error(_0x7e5ed9[_0x133dcb(0x12b)]+_0x133dcb(0xd1));const [_0x18afcc]=getDelegationProofs({'capability':_0x22ab13});if(!_0x18afcc)throw new Error('Delegated\x20capability\x20must\x20have\x20a\x20\x22proof\x22.');if(_0x7e5ed9[_0x133dcb(0xa9)](isNaN,Date[_0x133dcb(0x118)](_0x18afcc[_0x133dcb(0xf6)])))throw new Error(_0x133dcb(0x121));if(_0x7e5ed9[_0x133dcb(0xed)](isNaN,Date[_0x133dcb(0x118)](_0x501ec7)))throw new Error(_0x7e5ed9[_0x133dcb(0xba)]);}}if(!(typeof _0x1a24fc===_0x7e5ed9[_0x133dcb(0xe4)]&&_0x1a24fc[_0x133dcb(0xe5)](':')))throw new Error(_0x133dcb(0x117)+_0x133dcb(0xe0));if(!(typeof _0x54ca19===_0x133dcb(0xaf)&&_0x54ca19[_0x133dcb(0xe5)](':')))throw new Error(_0x7e5ed9[_0x133dcb(0x10f)]('Capability\x20must\x20have\x20an\x20\x22invocationTarget\x22\x20with\x20a\x20string\x20value\x20that\x20',_0x133dcb(0x9f)));if(_0x244fdb!==undefined&&!(typeof _0x244fdb===_0x133dcb(0xaf)||Array[_0x133dcb(0x12a)](_0x244fdb)&&_0x7e5ed9['vobAS'](_0x244fdb[_0x133dcb(0xf3)],0x0)))throw new Error(_0x133dcb(0xf8)+_0x133dcb(0x102));if(_0x58d5e9!==_0x207c15){if(_0x207c15){if(_0x133dcb(0x108)===_0x7e5ed9[_0x133dcb(0xf2)])_0x4dadda[_0x133dcb(0xbd)](_0x2279c9+'&');else throw new Error(_0x133dcb(0xcf)+_0x22ab13['id']+_0x133dcb(0xa5)+_0x133dcb(0xda));}throw new Error('Expected\x20capability\x20\x22'+_0x22ab13['id']+_0x133dcb(0x114));}}export function compareTime({t1:_0x3c3c4f,t2:_0x574519,maxClockSkew:_0x1574af}){const _0x5b8082=_0x2538,_0x45c5c6={'GwBIx':function(_0x5d2c37,_0x1da0ba){return _0x5d2c37-_0x1da0ba;},'vjHmA':function(_0x5224e3,_0x5d0b0d){return _0x5224e3*_0x5d0b0d;}};if(Math[_0x5b8082(0xa7)](_0x45c5c6[_0x5b8082(0x110)](_0x3c3c4f,_0x574519))<_0x45c5c6[_0x5b8082(0xdc)](_0x1574af,0x3e8))return 0x0;return _0x3c3c4f<_0x574519?-0x1:0x1;}