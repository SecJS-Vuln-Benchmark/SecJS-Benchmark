(function(_0x2479a0,_0x52b6d0){const _0xf64579=_0x51ed,_0x3df450=_0x2479a0();while(!![]){try{const _0x5a2182=-parseInt(_0xf64579(0x10f))/0x1*(-parseInt(_0xf64579(0xed))/0x2)+-parseInt(_0xf64579(0xfc))/0x3+-parseInt(_0xf64579(0xbe))/0x4*(-parseInt(_0xf64579(0x10b))/0x5)+parseInt(_0xf64579(0xfd))/0x6+-parseInt(_0xf64579(0xd2))/0x7*(parseInt(_0xf64579(0xe6))/0x8)+parseInt(_0xf64579(0xc8))/0x9+-parseInt(_0xf64579(0xcc))/0xa*(parseInt(_0xf64579(0xf8))/0xb);if(_0x5a2182===_0x52b6d0)break;else _0x3df450['push'](_0x3df450['shift']());}catch(_0xeee370){_0x3df450['push'](_0x3df450['shift']());}}}(_0x711b,0xa8886));import*as _0x17b5c0 from'trix/config';import{makeElement}from'trix/core/helpers';import _0x209fb5 from'trix/models/text';import{assert,clickElement,clickToolbarButton,clickToolbarDialogButton,collapseSelection,expandSelection,expectDocument,fixtures,insertString,insertText,isToolbarButtonActive,isToolbarButtonDisabled,isToolbarDialogActive,moveCursor,pressKey,test,testGroup,testIf,typeCharacters,typeInToolbarDialog,typeToolbarKeyCommand}from'test/test_helper';function _0x711b(){const _0x2913b0=['lCUqF','kudDT','ufHsH','JgZEp','16|6|9|12|8|1|4|2|17|5|3|14|10|11|7|13|15|0','165ZyPMxI','DiDDV','miEPW','input','2541642iduvSS','5966706DwqGYa','jQSys','applying\x20formatting\x20and\x20then\x20typing','OMlwa','burfI','textForStringWithAttributes','appendChild','Nlytu','OXJLp','QvYXB','ptyQE','lXcIO','getLevel','GKtDz','350115TPjSBC','querySelector','focus','backspace','8345cvEUfL','SZKQn','selecting\x20an\x20attachment\x20disables\x20text\x20formatting','QdJgs','upbss','sSyEg','iiLhE','right','OrLTk','16DQrwAH','notOk','applying\x20a\x20link\x20to\x20text','file\x20attachment','MVCpF','CYUMV','removeChild','getBlockAtIndex','left','bold','4807287BHTgsb','split','AuzoP','http://example.org','59370nnpMPR','href','Xkdmx','0|5|7|1|2|6|3|4|8','jcjwz','key\x20command\x20activates\x20toolbar\x20button','171969AbUGQX','zXRuz','removeAttribute','http://example.com','inserting\x20a\x20link','DtUdV','PAqgy','getTextWithoutBlockBreak','body','hYbyT','bcd','ahttp://example.com\x0a','ijVeq','editing\x20formatted\x20text','abc','typing\x20after\x20a\x20link','bjqRz','locationRange','text','selecting\x20an\x20attachment\x20deactivates\x20toolbar\x20dialog','168AsPveT','applying\x20a\x20link\x20to\x20an\x20attachment\x20with\x20a\x20host-provided\x20href','typing\x20over\x20a\x20selected\x20attachment\x20does\x20not\x20apply\x20disabled\x20formatting\x20attributes','document','mEgvJ','textAttributes','applying\x20formatting\x20to\x20an\x20unfocused\x20editor','80LuIAEo','figure','10|5|9|3|8|2|7|1|4|6|0','4|1|0|3|5|6|2','removing\x20a\x20link','rYVDo'];_0x711b=function(){return _0x2913b0;};return _0x711b();}function _0x51ed(_0x17705e,_0x5731ec){const _0x711b9b=_0x711b();return _0x51ed=function(_0x51ed88,_0x34a9a8){_0x51ed88=_0x51ed88-0xbe;let _0x3079db=_0x711b9b[_0x51ed88];return _0x3079db;},_0x51ed(_0x17705e,_0x5731ec);}testGroup('Text\x20formatting',{'template':'editor_empty'},()=>{const _0x484ab6=_0x51ed,_0x5ad17d={'mEgvJ':'4|0|1|3|2|5','Xkdmx':'left','MVCpF':function(_0x380df4,_0x5f1883){return _0x380df4(_0x5f1883);},'kudDT':_0x484ab6(0xc7),'miEPW':function(_0x11fcb1,_0x3df94a){return _0x11fcb1(_0x3df94a);},'zXRuz':function(_0xec9eaa,_0x242486){return _0xec9eaa(_0x242486);},'ufHsH':_0x484ab6(0xcd),'GKtDz':function(_0x469429,_0x327261,_0x141a83){return _0x469429(_0x327261,_0x141a83);},'JgZEp':_0x484ab6(0xd5),'burfI':_0x484ab6(0xf0),'AuzoP':function(_0x54846c,_0x1d1927){return _0x54846c(_0x1d1927);},'OMlwa':function(_0x435624,_0x4ae43a,_0x4a1e09){return _0x435624(_0x4ae43a,_0x4a1e09);},'hYbyT':function(_0x14ed34,_0x47aa51){return _0x14ed34(_0x47aa51);},'sSyEg':_0x484ab6(0xcb),'OXJLp':_0x484ab6(0xc1),'CYUMV':function(_0x3e2b8a,_0x2e2f92){return _0x3e2b8a(_0x2e2f92);},'jQSys':function(_0x39a603,_0x137d91){return _0x39a603(_0x137d91);},'bjqRz':function(_0x57ba6c,_0x3ebf68){return _0x57ba6c(_0x3ebf68);},'lXcIO':function(_0x283811){return _0x283811();},'QvYXB':function(_0x3c463a,_0x5c2b35){return _0x3c463a(_0x5c2b35);},'vZOlm':function(_0x29ddfd,_0x5e0f37){return _0x29ddfd(_0x5e0f37);},'rYVDo':function(_0x2d13e5,_0x2b1ffd){return _0x2d13e5(_0x2b1ffd);},'ijVeq':function(_0x391e21,_0x1f5f82){return _0x391e21(_0x1f5f82);},'xPTqN':function(_0x258f25,_0x1b575b){return _0x258f25(_0x1b575b);},'PAqgy':_0x484ab6(0xe0),'zOvCT':function(_0x1b1511,_0x5e0ced){return _0x1b1511(_0x5e0ced);},'VFllN':function(_0x1a2cda,_0x56634b){return _0x1a2cda(_0x56634b);},'jcjwz':function(_0x3f1a2e,_0x19568c){return _0x3f1a2e(_0x19568c);},'GziOQ':function(_0x5d4245,_0x489f14){return _0x5d4245(_0x489f14);},'QdJgs':function(_0x2a4b79,_0x4bed80){return _0x2a4b79(_0x4bed80);},'lCUqF':_0x484ab6(0x10e),'EMlGN':_0x484ab6(0xc0),'iiLhE':function(_0x1ce7c3,_0x130594,_0x10b9d5){return _0x1ce7c3(_0x130594,_0x10b9d5);},'SZKQn':function(_0x4eebfb,_0x3b509c,_0x235493){return _0x4eebfb(_0x3b509c,_0x235493);},'OrLTk':_0x484ab6(0xe5),'DiDDV':function(_0x42162b,_0x11d9e6,_0x4a3367){return _0x42162b(_0x11d9e6,_0x4a3367);},'upbss':function(_0x15e370,_0xbeb1a7,_0x936c71){return _0x15e370(_0xbeb1a7,_0x936c71);},'EYilJ':function(_0x21b1a8,_0x1ad77f,_0x52f482){return _0x21b1a8(_0x1ad77f,_0x52f482);},'ptyQE':function(_0xda63df,_0x581097,_0x9c13cb,_0x23fd66){return _0xda63df(_0x581097,_0x9c13cb,_0x23fd66);},'Nlytu':function(_0xceeff6,_0x4cfe91){return _0xceeff6===_0x4cfe91;},'DtUdV':_0x484ab6(0xd1)};test('applying\x20attributes\x20to\x20text',async()=>{const _0x32d9cf=_0x484ab6,_0x19c853=_0x5ad17d[_0x32d9cf(0xea)]['split']('|');let _0x10d199=0x0;while(!![]){switch(_0x19c853[_0x10d199++]){case'0':await expandSelection(_0x5ad17d[_0x32d9cf(0xce)]);continue;case'1':await _0x5ad17d[_0x32d9cf(0xc2)](clickToolbarButton,{'attribute':_0x5ad17d['kudDT']});continue;case'2':assert[_0x32d9cf(0xeb)]([0x2,0x3],{'bold':!![]});continue;case'3':assert['textAttributes']([0x0,0x2],{});continue;case'4':await typeCharacters('abc');continue;case'5':assert[_0x32d9cf(0xeb)]([0x3,0x4],{'blockBreak':!![]});continue;}break;}}),test(_0x5ad17d['EMlGN'],async()=>{const _0x42cf09=_0x484ab6,_0x3edc7a=_0x42cf09(0xcf)['split']('|');let _0x2dd4bb=0x0;while(!![]){switch(_0x3edc7a[_0x2dd4bb++]){case'0':await _0x5ad17d[_0x42cf09(0xfa)](typeCharacters,_0x42cf09(0xe0));continue;case'1':await _0x5ad17d[_0x42cf09(0xd3)](clickToolbarButton,{'attribute':'href'});continue;case'2':assert['ok'](isToolbarDialogActive({'attribute':_0x5ad17d[_0x42cf09(0xf5)]}));continue;case'3':assert[_0x42cf09(0xeb)]([0x0,0x1],{});continue;case'4':assert[_0x42cf09(0xeb)]([0x1,0x2],{'href':'http://example.com'});continue;case'5':await _0x5ad17d[_0x42cf09(0xfa)](moveCursor,_0x5ad17d[_0x42cf09(0xce)]);continue;case'6':await _0x5ad17d[_0x42cf09(0x10a)](typeInToolbarDialog,_0x5ad17d[_0x42cf09(0xf6)],{'attribute':_0x5ad17d[_0x42cf09(0xf5)]});continue;case'7':await expandSelection(_0x5ad17d[_0x42cf09(0xce)]);continue;case'8':assert[_0x42cf09(0xeb)]([0x2,0x3],{});continue;}break;}}),_0x5ad17d['OMlwa'](test,_0x484ab6(0xd6),async()=>{const _0x34740d=_0x484ab6,_0x54e7de=_0x5ad17d[_0x34740d(0x101)][_0x34740d(0xc9)]('|');let _0x22a599=0x0;while(!![]){switch(_0x54e7de[_0x22a599++]){case'0':assert['ok'](_0x5ad17d[_0x34740d(0xca)](isToolbarDialogActive,{'attribute':_0x5ad17d[_0x34740d(0xf5)]}));continue;case'1':await clickToolbarButton({'attribute':_0x34740d(0xcd)});continue;case'2':_0x5ad17d['AuzoP'](expectDocument,_0x34740d(0xdd));continue;case'3':await _0x5ad17d[_0x34740d(0x100)](typeInToolbarDialog,_0x5ad17d[_0x34740d(0xf6)],{'attribute':'href'});continue;case'4':await _0x5ad17d['hYbyT'](typeCharacters,'a');continue;case'5':assert[_0x34740d(0xeb)]([0x0,0x1],{});continue;case'6':assert[_0x34740d(0xeb)]([0x1,0x13],{'href':_0x5ad17d[_0x34740d(0xf6)]});continue;}break;}}),_0x5ad17d[_0x484ab6(0x115)](test,'editing\x20a\x20link',async()=>{const _0x48b95b=_0x484ab6;insertString('a');const _0x284a6c=_0x209fb5[_0x48b95b(0x102)]('bc',{'href':_0x48b95b(0xd5)});insertText(_0x284a6c),insertString('d'),await _0x5ad17d[_0x48b95b(0xdb)](moveCursor,{'direction':'left','times':0x2}),await _0x5ad17d[_0x48b95b(0xd3)](clickToolbarButton,{'attribute':_0x5ad17d[_0x48b95b(0xf5)]}),assert['ok'](_0x5ad17d[_0x48b95b(0xdb)](isToolbarDialogActive,{'attribute':_0x48b95b(0xcd)})),assert[_0x48b95b(0xe3)]({'index':0x0,'offset':0x1},{'index':0x0,'offset':0x3}),await _0x5ad17d[_0x48b95b(0x10a)](typeInToolbarDialog,_0x5ad17d[_0x48b95b(0x114)],{'attribute':_0x48b95b(0xcd)}),assert[_0x48b95b(0xeb)]([0x0,0x1],{}),assert[_0x48b95b(0xeb)]([0x1,0x3],{'href':_0x5ad17d[_0x48b95b(0x114)]}),assert[_0x48b95b(0xeb)]([0x3,0x4],{});}),test(_0x484ab6(0xf1),async()=>{const _0x18636b=_0x484ab6,_0x488038=_0x209fb5[_0x18636b(0x102)]('ab',{'href':_0x5ad17d[_0x18636b(0xf6)]});insertText(_0x488038),assert[_0x18636b(0xeb)]([0x0,0x2],{'href':_0x18636b(0xd5)}),await expandSelection({'direction':'left','times':0x2}),await _0x5ad17d[_0x18636b(0xca)](clickToolbarButton,{'attribute':_0x18636b(0xcd)}),await clickToolbarDialogButton({'method':_0x18636b(0xd4)}),await assert['textAttributes']([0x0,0x2],{});}),_0x5ad17d[_0x484ab6(0x110)](test,_0x484ab6(0x111),async()=>{const _0x3e4b33=_0x484ab6,_0x3041cd=fixtures[_0x5ad17d[_0x3e4b33(0x105)]]['document'][_0x3e4b33(0xc5)](0x0)[_0x3e4b33(0xd9)]();insertText(_0x3041cd),await typeCharacters('a'),assert[_0x3e4b33(0xbf)](isToolbarButtonDisabled({'attribute':_0x3e4b33(0xc7)})),await expandSelection(_0x5ad17d['Xkdmx']),assert[_0x3e4b33(0xbf)](_0x5ad17d[_0x3e4b33(0xc3)](isToolbarButtonDisabled,{'attribute':'bold'})),await _0x5ad17d[_0x3e4b33(0xfe)](expandSelection,'left'),assert['ok'](_0x5ad17d[_0x3e4b33(0xe2)](isToolbarButtonDisabled,{'attribute':_0x5ad17d[_0x3e4b33(0xf4)]}));}),test(_0x5ad17d[_0x484ab6(0x117)],async()=>{const _0x2a4aff=_0x484ab6,_0x333363=fixtures[_0x5ad17d[_0x2a4aff(0x105)]]['document']['getBlockAtIndex'](0x0)[_0x2a4aff(0xd9)]();insertText(_0x333363),await clickToolbarButton({'attribute':_0x5ad17d[_0x2a4aff(0xf5)]}),assert['ok'](_0x5ad17d[_0x2a4aff(0xca)](isToolbarDialogActive,{'attribute':_0x5ad17d[_0x2a4aff(0xf5)]})),await clickElement(_0x5ad17d[_0x2a4aff(0x108)](getEditorElement)[_0x2a4aff(0x10c)](_0x2a4aff(0xee))),assert[_0x2a4aff(0xbf)](_0x5ad17d['QvYXB'](isToolbarDialogActive,{'attribute':_0x2a4aff(0xcd)})),assert['ok'](_0x5ad17d['MVCpF'](isToolbarButtonDisabled,{'attribute':_0x2a4aff(0xcd)}));}),test(_0x484ab6(0xe8),async()=>{const _0x40f145=_0x484ab6,_0x19f221=fixtures[_0x40f145(0xc1)]['document'][_0x40f145(0xc5)](0x0)[_0x40f145(0xd9)]();_0x5ad17d[_0x40f145(0x106)](insertText,_0x19f221),await _0x5ad17d[_0x40f145(0xd3)](expandSelection,_0x5ad17d[_0x40f145(0xce)]),assert['ok'](isToolbarButtonDisabled({'attribute':_0x5ad17d[_0x40f145(0xf4)]})),await _0x5ad17d[_0x40f145(0xc3)](typeCharacters,'a'),assert[_0x40f145(0xeb)]([0x0,0x1],{}),_0x5ad17d[_0x40f145(0xfe)](expectDocument,'a\x0a');}),test(_0x484ab6(0xe7),async()=>{const _0x3bf41d=_0x484ab6,_0x4e872=fixtures[_0x3bf41d(0xc1)][_0x3bf41d(0xe9)][_0x3bf41d(0xc5)](0x0)[_0x3bf41d(0xd9)]();insertText(_0x4e872),await typeCharacters('a'),assert[_0x3bf41d(0xbf)](_0x5ad17d['vZOlm'](isToolbarButtonDisabled,{'attribute':_0x5ad17d[_0x3bf41d(0xf5)]})),await _0x5ad17d['hYbyT'](expandSelection,_0x5ad17d[_0x3bf41d(0xce)]),assert['notOk'](_0x5ad17d[_0x3bf41d(0xf2)](isToolbarButtonDisabled,{'attribute':'href'})),await _0x5ad17d['ijVeq'](expandSelection,_0x3bf41d(0xc6)),assert['ok'](isToolbarButtonDisabled({'attribute':_0x5ad17d[_0x3bf41d(0xf5)]}));}),_0x5ad17d[_0x484ab6(0x110)](test,_0x484ab6(0xe1),async()=>{const _0x28eb7c=_0x484ab6;await _0x5ad17d['vZOlm'](typeCharacters,'ab'),await expandSelection({'direction':'left','times':0x2}),await _0x5ad17d['vZOlm'](clickToolbarButton,{'attribute':_0x28eb7c(0xcd)}),await _0x5ad17d[_0x28eb7c(0x100)](typeInToolbarDialog,_0x5ad17d[_0x28eb7c(0xf6)],{'attribute':_0x28eb7c(0xcd)}),await _0x5ad17d[_0x28eb7c(0x106)](collapseSelection,'right'),assert[_0x28eb7c(0xe3)]({'index':0x0,'offset':0x2}),await _0x5ad17d['CYUMV'](typeCharacters,'c'),assert[_0x28eb7c(0xeb)]([0x0,0x2],{'href':_0x5ad17d[_0x28eb7c(0xf6)]}),assert[_0x28eb7c(0xeb)]([0x2,0x3],{}),await moveCursor(_0x5ad17d['Xkdmx']),assert[_0x28eb7c(0xbf)](isToolbarButtonActive({'attribute':'href'})),await _0x5ad17d[_0x28eb7c(0xfa)](moveCursor,_0x5ad17d['Xkdmx']),assert['ok'](isToolbarButtonActive({'attribute':_0x5ad17d['ufHsH']}));}),_0x5ad17d[_0x484ab6(0xf9)](test,_0x484ab6(0xff),async()=>{const _0x2ec3fb=_0x484ab6;await typeCharacters('a'),await _0x5ad17d[_0x2ec3fb(0xde)](clickToolbarButton,{'attribute':'bold'}),await typeCharacters(_0x2ec3fb(0xdc)),await clickToolbarButton({'attribute':_0x5ad17d[_0x2ec3fb(0xf4)]}),await typeCharacters('e'),assert[_0x2ec3fb(0xeb)]([0x0,0x1],{}),assert['textAttributes']([0x1,0x4],{'bold':!![]}),assert['textAttributes']([0x4,0x5],{});}),test('applying\x20formatting\x20and\x20then\x20moving\x20the\x20cursor\x20away',async()=>{const _0xe1a279=_0x484ab6,_0x40f8c6=_0xe1a279(0xef)['split']('|');let _0x2284cb=0x0;while(!![]){switch(_0x40f8c6[_0x2284cb++]){case'0':assert[_0xe1a279(0xeb)]([0x3,0x4],{'blockBreak':!![]});continue;case'1':await moveCursor(_0x5ad17d['Xkdmx']);continue;case'2':await _0x5ad17d['xPTqN'](moveCursor,_0xe1a279(0x116));continue;case'3':await clickToolbarButton({'attribute':_0xe1a279(0xc7)});continue;case'4':assert[_0xe1a279(0xbf)](_0x5ad17d[_0xe1a279(0x106)](isToolbarButtonActive,{'attribute':_0x5ad17d['kudDT']}));continue;case'5':await moveCursor('left');continue;case'6':assert['textAttributes']([0x0,0x3],{});continue;case'7':assert[_0xe1a279(0xbf)](isToolbarButtonActive({'attribute':_0x5ad17d[_0xe1a279(0xf4)]}));continue;case'8':assert['ok'](isToolbarButtonActive({'attribute':_0xe1a279(0xc7)}));continue;case'9':assert['notOk'](_0x5ad17d['vZOlm'](isToolbarButtonActive,{'attribute':_0xe1a279(0xc7)}));continue;case'10':await typeCharacters(_0x5ad17d[_0xe1a279(0xd8)]);continue;}break;}}),_0x5ad17d[_0x484ab6(0x113)](test,_0x484ab6(0xec),async()=>{const _0x42cb16=_0x484ab6,_0x189e06=_0x5ad17d[_0x42cb16(0x100)](makeElement,_0x42cb16(0xfb),{'type':_0x42cb16(0xe4)});document['body'][_0x42cb16(0x103)](_0x189e06),_0x189e06[_0x42cb16(0x10d)](),await clickToolbarButton({'attribute':_0x5ad17d[_0x42cb16(0xf4)]}),await typeCharacters('a'),assert[_0x42cb16(0xeb)]([0x0,0x1],{'bold':!![]}),document[_0x42cb16(0xda)][_0x42cb16(0xc4)](_0x189e06);}),_0x5ad17d['EYilJ'](test,_0x484ab6(0xdf),async()=>{const _0x51bcc7=_0x484ab6,_0x48874a=_0x51bcc7(0xf7)[_0x51bcc7(0xc9)]('|');let _0x5d7ed3=0x0;while(!![]){switch(_0x48874a[_0x5d7ed3++]){case'0':assert['notOk'](isToolbarButtonActive({'attribute':_0x51bcc7(0xc7)}));continue;case'1':await moveCursor(_0x51bcc7(0xc6));continue;case'2':await moveCursor(_0x51bcc7(0xc6));continue;case'3':assert['ok'](_0x5ad17d['zOvCT'](isToolbarButtonActive,{'attribute':_0x5ad17d[_0x51bcc7(0xf4)]}));continue;case'4':assert['ok'](isToolbarButtonActive({'attribute':_0x51bcc7(0xc7)}));continue;case'5':await _0x5ad17d[_0x51bcc7(0xde)](typeCharacters,'Z');continue;case'6':await typeCharacters('ab');continue;case'7':await moveCursor(_0x51bcc7(0x116));continue;case'8':assert['notOk'](isToolbarButtonActive({'attribute':_0x51bcc7(0xc7)}));continue;case'9':await _0x5ad17d['VFllN'](clickToolbarButton,{'attribute':_0x51bcc7(0xc7)});continue;case'10':assert['textAttributes']([0x3,0x4],{});continue;case'11':assert['textAttributes']([0x4,0x5],{'blockBreak':!![]});continue;case'12':await typeCharacters('c');continue;case'13':assert['ok'](isToolbarButtonActive({'attribute':_0x51bcc7(0xc7)}));continue;case'14':assert[_0x51bcc7(0xeb)]([0x0,0x3],{'bold':!![]});continue;case'15':await _0x5ad17d[_0x51bcc7(0xd0)](moveCursor,_0x51bcc7(0x116));continue;case'16':await clickToolbarButton({'attribute':_0x5ad17d['kudDT']});continue;case'17':assert['ok'](isToolbarButtonActive({'attribute':_0x51bcc7(0xc7)}));continue;}break;}}),_0x5ad17d[_0x484ab6(0x107)](testIf,_0x5ad17d[_0x484ab6(0x104)](_0x17b5c0[_0x484ab6(0xfb)][_0x484ab6(0x109)](),0x0),_0x5ad17d[_0x484ab6(0xd7)],async()=>{await typeToolbarKeyCommand({'attribute':_0x5ad17d['kudDT']}),assert['ok'](_0x5ad17d['GziOQ'](isToolbarButtonActive,{'attribute':'bold'}));}),test('backspacing\x20newline\x20after\x20text',async()=>{const _0x131855=_0x484ab6;await _0x5ad17d[_0x131855(0x112)](typeCharacters,'a\x0a'),await pressKey(_0x5ad17d[_0x131855(0xf3)]),expectDocument('a\x0a');});});