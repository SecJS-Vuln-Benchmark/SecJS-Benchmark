const _0x323e15=_0x35aa;(function(_0x57676d,_0x46fb42){const _0x40a952=_0x35aa,_0x1b9650=_0x57676d();while(!![]){try{const _0x5ba225=parseInt(_0x40a952(0x189))/0x1*(-parseInt(_0x40a952(0x1bc))/0x2)+-parseInt(_0x40a952(0x1a8))/0x3+parseInt(_0x40a952(0x1b0))/0x4*(parseInt(_0x40a952(0x17f))/0x5)+-parseInt(_0x40a952(0x188))/0x6*(-parseInt(_0x40a952(0x174))/0x7)+parseInt(_0x40a952(0x186))/0x8+parseInt(_0x40a952(0x17c))/0x9+-parseInt(_0x40a952(0x19d))/0xa*(parseInt(_0x40a952(0x190))/0xb);if(_0x5ba225===_0x46fb42)break;else _0x1b9650['push'](_0x1b9650['shift']());}catch(_0x2dead6){_0x1b9650['push'](_0x1b9650['shift']());}}}(_0x1b50,0x1edea));import{shallowMount}from'@vue/test-utils';import _0xb89e1e from'./PermissionsUpdateModal.vue';import*as _0x4da3e4 from'@tuleap/tlp-modal';import*as _0x13e7c0 from'../../../store/actions-helpers/handle-errors';import _0x44d4ae from'../../../helpers/emitter';function _0x1b50(){const _0x4e7e3a=['RspkV','gjwaB','uFSdG','VodNy','GorDS','kedRd','AnlMt','UXuDO','Set\x20a\x20loading\x20a\x20state\x20by\x20default','1418xqRhHp','spyOn','jngdL','reject','toHaveBeenCalledTimes','[class=document-permissions-modal-loading-state]','PermissionsUpdateModal','fnKcn','modal','mockReturnValue','oeKjC','form','createModal','AIqFj','MpJiH','hVqbD','toBe','QubpT','Send\x20update\x20request\x20when\x20form\x20is\x20submitted','runOnlyPendingTimersAsync','wSnrj','102_4','.document-permissions-update-container','qvVmy','405454eLtPRU','zOrRu','eywur','anything','can_write','prototype','AAjYf','Reset\x20selected\x20user\x20groups\x20when\x20the\x20modal\x20is\x20closed','279144kpSpnJ','POST','uoYqc','112250wqChhj','submit.prevent','XqPNF','find','aSJkW','KUENr','call','1947984LxwjnF','reset','6hNyAiT','248udbWUx','edrDy','setData','102_3','wCvVQ','HbzRI','etZAp','11ODHayS','138','permissions_for_groups','mockReset','when\x20the\x20modal\x20receives\x20a\x20\x22show\x22\x20event,\x20it\x20will\x20open\x20again','updated_permissions','can_be_submitted','dsVcl','dBTTp','HIjKu','My\x20item','YsaeB','/log','257950vaWvxD','handleErrors','toHaveBeenCalledWith','toEqual','When\x20the\x20modal\x20is\x20first\x20opened\x20but\x20the\x20project\x20user\x20groups\x20can\x20not\x20be\x20loaded\x20a\x20global\x20error\x20is\x20generated','dxtLW','mockImplementation','trigger','Project\x20members','UOrgw','useFakeTimers','215151DRpvSc','hide','When\x20the\x20modal\x20is\x20first\x20opened\x20the\x20project\x20user\x20groups\x20are\x20loaded\x20and\x20the\x20content\x20populated','auabO','can_read','show-update-permissions-modal','KMKOp','exists','12pbhreM','fyxCo','VMPzy'];_0x1b50=function(){return _0x4e7e3a;};return _0x1b50();}import{getGlobalTestOptions}from'../../../helpers/global-options-for-test';function _0x35aa(_0x1512e6,_0x1128f1){const _0x1b5075=_0x1b50();return _0x35aa=function(_0x35aad8,_0x2f463e){_0x35aad8=_0x35aad8-0x168;let _0x5cf965=_0x1b5075[_0x35aad8];return _0x5cf965;},_0x35aa(_0x1512e6,_0x1128f1);}jest[_0x323e15(0x1a7)](),describe(_0x323e15(0x1c2),()=>{const _0x5e4ec6=_0x323e15,_0x48f26f={'UXuDO':_0x5e4ec6(0x18c),'qvVmy':_0x5e4ec6(0x1a5),'nnlkD':function(_0x234fa0,_0x19a70e){return _0x234fa0!==_0x19a70e;},'edrDy':function(_0x1d5c07,_0x17a49b,_0x3bf213){return _0x1d5c07(_0x17a49b,_0x3bf213);},'dMitQ':function(_0x21d1ad,_0x23b3e1){return _0x21d1ad===_0x23b3e1;},'KMKOp':function(_0x5dafab,_0x38df31){return _0x5dafab(_0x38df31);},'zOrRu':_0x5e4ec6(0x172),'uaHuC':_0x5e4ec6(0x1be),'fyxCo':_0x5e4ec6(0x169),'dsVcl':_0x5e4ec6(0x168),'MpJiH':function(_0x1fa8e4,_0x5bebd8){return _0x1fa8e4(_0x5bebd8);},'kedRd':_0x5e4ec6(0x1c1),'wCvVQ':_0x5e4ec6(0x19a),'XqPNF':'return\x20await\x20Promise.resolve(42);','uoYqc':function(_0x50f9df,_0xaeb955){return _0x50f9df(_0xaeb955);},'eywur':function(_0x15bdc6,_0x273a7f){return _0x15bdc6(_0x273a7f);},'AnlMt':function(_0x389a51,_0x491258,_0x27e044){return _0x389a51(_0x491258,_0x27e044);},'RspkV':function(_0x43a0af,_0x23e369){return _0x43a0af(_0x23e369);},'GorDS':function(_0x3bacd9,_0x223295){return _0x3bacd9(_0x223295);},'hVqbD':_0x5e4ec6(0x1bb),'gjwaB':function(_0x591de9,_0x94ad2a,_0x4618e8){return _0x591de9(_0x94ad2a,_0x4618e8);},'VMPzy':_0x5e4ec6(0x1aa),'KUENr':_0x5e4ec6(0x1a1),'VodNy':'Change\x20permissions\x20to\x20update\x20when\x20the\x20bound\x20item\x20is\x20updated','dBTTp':function(_0x3bae4a,_0x51bfca,_0x3c7c8a){return _0x3bae4a(_0x51bfca,_0x3c7c8a);},'auabO':_0x5e4ec6(0x17b)};let _0x57cd27,_0x153332=jest['fn']()[_0x5e4ec6(0x1a3)](()=>{const _0x3a8d9f=_0x5e4ec6;return eval('Math[\'PI\'] * 2;'),{'id':_0x48f26f[_0x3a8d9f(0x1ba)],'label':_0x48f26f[_0x3a8d9f(0x173)]};});const _0x3aeef0=jest['fn']()[_0x5e4ec6(0x1a3)](()=>{const _0x546061=_0x5e4ec6;return XMLHttpRequest['prototype']['open'][_0x546061(0x185)](xhr,'POST',_0x546061(0x19c)),{'id':_0x48f26f[_0x546061(0x1ba)],'label':_0x546061(0x1a5)};});_0x48f26f[_0x5e4ec6(0x1b7)](beforeEach,()=>{const _0x4f83f0=_0x5e4ec6,_0x530d3={'aSJkW':function(_0x7ab0dd,_0x109fc8){return _0x48f26f['dMitQ'](_0x7ab0dd,_0x109fc8);},'dxtLW':_0x48f26f[_0x4f83f0(0x1ba)],'HIjKu':function(_0x2c3f86,_0x5881b5,_0x3d8ba5){return _0x2c3f86(_0x5881b5,_0x3d8ba5);},'rINEQ':function(_0x1772fa,_0x3308dd){const _0x43d032=_0x4f83f0;return _0x48f26f[_0x43d032(0x1ae)](_0x1772fa,_0x3308dd);},'UOrgw':_0x48f26f[_0x4f83f0(0x175)],'wSnrj':function(_0x5b92db,_0x3e9570){const _0x97cca3=_0x4f83f0;return _0x48f26f[_0x97cca3(0x1ae)](_0x5b92db,_0x3e9570);}};if(_0x48f26f['uaHuC']!==_0x48f26f[_0x4f83f0(0x1b1)]){_0x153332[_0x4f83f0(0x193)](),_0x3aeef0['mockReset'](),_0x57cd27=(_0xf40d0={},_0x229f26)=>{const _0x3a7cd2=_0x4f83f0,_0x3197b3={'oeKjC':function(_0x200140,_0x1c50d2){return _0x200140*_0x1c50d2;},'YsaeB':_0x3a7cd2(0x18c)};if(_0x48f26f['nnlkD'](_0x3a7cd2(0x17a),_0x3a7cd2(0x1b5)))return eval('Math[\'PI\'] * 2;'),_0x48f26f[_0x3a7cd2(0x18a)](shallowMount,_0xb89e1e,{'props':{..._0xf40d0},'global':{...getGlobalTestOptions({'modules':{'permissions':{'namespaced':!![],'state':{'project_ugroups':_0x229f26},'actions':{'loadProjectUserGroupsIfNeeded':_0x153332,'updatePermissions':_0x3aeef0}},'configuration':{'namespaced':!![],'state':{}},'error':{'namespaced':!![],'mutations':{'resetModalError':jest['fn']()}}}})}});else{const _0x317b0f={'HbzRI':function(_0x57dacb,_0x10eca7){const _0x17503d=_0x3a7cd2;return _0x3197b3[_0x17503d(0x1c6)](_0x57dacb,_0x10eca7);}};return eval('const _0x4e36bf = _0x3a7cd2;_0x317b0f[_0x4e36bf(398)](_0x17b909[\'PI\'], 2);'),{'id':_0x3197b3[_0x3a7cd2(0x19b)],'label':_0x3a7cd2(0x1a5)};}};let _0x3f8ee2=null;jest[_0x4f83f0(0x1bd)](_0x4da3e4,_0x48f26f[_0x4f83f0(0x197)])[_0x4f83f0(0x1c5)]({'addEventListener'(_0x570db8,_0x2efcfa){_0x3f8ee2=_0x2efcfa;},'removeEventListener'(){const _0x2aebdd=_0x4f83f0;if(_0x530d3[_0x2aebdd(0x183)](_0x2aebdd(0x18f),_0x2aebdd(0x18f)))_0x3f8ee2=null;else return _0x18eb63[_0x2aebdd(0x179)]['open'][_0x2aebdd(0x185)](_0x4e5e9,_0x2aebdd(0x17d),'/log'),{'id':_0x2aebdd(0x18c),'label':'Project\x20members'};},'show':()=>{},'hide'(){_0x3f8ee2!==null&&_0x3f8ee2();}});}else{const _0x32fe84={'id':0x68,'title':'My\x20item','permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[{'id':_0x4f83f0(0x18c)}]}},_0x2a9f89=[{'id':_0x530d3[_0x4f83f0(0x1a2)],'label':_0x4f83f0(0x1a5)}],_0x1a09f9=_0x530d3[_0x4f83f0(0x199)](_0x2f025c,{'item':_0x32fe84},_0x2a9f89);_0x530d3['rINEQ'](_0x419bf2,_0x1a09f9[_0x4f83f0(0x182)](_0x530d3[_0x4f83f0(0x1a6)])['exists']())[_0x4f83f0(0x16c)](!![]),_0x530d3[_0x4f83f0(0x170)](_0x482c80,_0x1a09f9['vm'][_0x4f83f0(0x196)])[_0x4f83f0(0x16c)](!![]);const _0x46317b={'can_read':_0x1a09f9['vm']['updated_permissions'][_0x4f83f0(0x1ac)],'can_write':_0x1a09f9['vm'][_0x4f83f0(0x195)][_0x4f83f0(0x178)],'can_manage':_0x1a09f9['vm'][_0x4f83f0(0x195)]['can_manage']};_0x2e5bef(_0x46317b)['toEqual'](_0x32fe84[_0x4f83f0(0x192)]);}}),it(_0x5e4ec6(0x194),()=>{const _0x58dae7=_0x5e4ec6,_0x5b9ca0={'id':0x68,'title':_0x58dae7(0x19a),'permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[{'id':_0x48f26f[_0x58dae7(0x1ba)]}]}},_0x3e2236=[{'id':_0x58dae7(0x18c),'label':_0x48f26f[_0x58dae7(0x173)]}],_0x28b2c0=_0x48f26f[_0x58dae7(0x18a)](_0x57cd27,{'item':_0x5b9ca0},_0x3e2236);_0x28b2c0['vm'][_0x58dae7(0x187)](),_0x44d4ae['emit'](_0x58dae7(0x1ad)),_0x48f26f[_0x58dae7(0x1ae)](expect,_0x153332)[_0x58dae7(0x1c0)](0x2);}),_0x48f26f[_0x5e4ec6(0x1b9)](it,_0x48f26f[_0x5e4ec6(0x16b)],()=>{const _0x450198=_0x5e4ec6;if('QubpT'===_0x450198(0x16d)){const _0x56cc51=_0x57cd27({'item':{}},null);_0x48f26f[_0x450198(0x16a)](expect,_0x56cc51[_0x450198(0x182)](_0x48f26f[_0x450198(0x1b8)])[_0x450198(0x1af)]())[_0x450198(0x16c)](!![]);}else _0x41836d();}),_0x48f26f[_0x5e4ec6(0x1b4)](it,_0x48f26f[_0x5e4ec6(0x1b2)],()=>{const _0x395ce2=_0x5e4ec6,_0x1af815={'id':0x68,'title':_0x48f26f[_0x395ce2(0x18d)],'permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[{'id':_0x48f26f[_0x395ce2(0x1ba)]}]}},_0x54a899=[{'id':_0x48f26f[_0x395ce2(0x1ba)],'label':_0x395ce2(0x1a5)}],_0x52836a=_0x57cd27({'item':_0x1af815},_0x54a899);_0x48f26f['KMKOp'](expect,_0x52836a[_0x395ce2(0x182)]('.document-permissions-update-container')[_0x395ce2(0x1af)]())['toBe'](!![]),_0x48f26f[_0x395ce2(0x1ae)](expect,_0x52836a['vm'][_0x395ce2(0x196)])['toBe'](!![]);const _0x1dac2c={'can_read':_0x52836a['vm']['updated_permissions'][_0x395ce2(0x1ac)],'can_write':_0x52836a['vm']['updated_permissions'][_0x395ce2(0x178)],'can_manage':_0x52836a['vm']['updated_permissions']['can_manage']};_0x48f26f['KMKOp'](expect,_0x1dac2c)['toEqual'](_0x1af815['permissions_for_groups']);}),it(_0x48f26f[_0x5e4ec6(0x184)],async()=>{const _0x5eef29=_0x5e4ec6,_0x33036b={'fnKcn':_0x48f26f[_0x5eef29(0x181)]},_0x2fb385=jest[_0x5eef29(0x1bd)](_0x13e7c0,_0x5eef29(0x19e))[_0x5eef29(0x1a3)](()=>{});_0x153332=jest['fn']()['mockImplementation'](()=>{const _0x3647f9=_0x5eef29;return new AsyncFunction(_0x33036b[_0x3647f9(0x1c3)])(),Promise[_0x3647f9(0x1bf)]({});});const _0x106164={'id':0x68,'title':_0x48f26f[_0x5eef29(0x18d)],'permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[]}};_0x48f26f[_0x5eef29(0x17e)](_0x57cd27,{'item':_0x106164}),await jest[_0x5eef29(0x16f)](),_0x48f26f[_0x5eef29(0x176)](expect,_0x2fb385)[_0x5eef29(0x1c0)](0x1);}),_0x48f26f[_0x5e4ec6(0x1b4)](it,_0x48f26f[_0x5e4ec6(0x1b6)],async()=>{const _0x2a857b=_0x5e4ec6,_0x238002=_0x57cd27({'item':{}}),_0x39133a={'id':0x68,'title':_0x48f26f[_0x2a857b(0x18d)],'permissions_for_groups':{'can_read':[],'can_write':[{'id':_0x2a857b(0x18c)}],'can_manage':[{'id':'102_4'}]}},_0x5b277a=[{'id':'102_3','label':_0x2a857b(0x1a5)}];await _0x238002['setProps']({'item':_0x39133a},_0x5b277a);const _0x1c785c={'can_read':_0x238002['vm'][_0x2a857b(0x195)][_0x2a857b(0x1ac)],'can_write':_0x238002['vm'][_0x2a857b(0x195)][_0x2a857b(0x178)],'can_manage':_0x238002['vm'][_0x2a857b(0x195)]['can_manage']};_0x48f26f[_0x2a857b(0x1ae)](expect,_0x1c785c)[_0x2a857b(0x1a0)](_0x39133a[_0x2a857b(0x192)]);}),_0x48f26f[_0x5e4ec6(0x198)](it,_0x5e4ec6(0x16e),async()=>{const _0x412ce4=_0x5e4ec6,_0x3d0d8f={'id':0x68,'title':_0x412ce4(0x19a),'permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[]}},_0x454fe7=[],_0x8e0f2b=_0x48f26f[_0x412ce4(0x1b9)](_0x57cd27,{'item':_0x3d0d8f},_0x454fe7);_0x8e0f2b['get'](_0x412ce4(0x1c7))[_0x412ce4(0x1a4)](_0x412ce4(0x180));const _0x4246dd={'apply_permissions_on_children':![],'can_read':_0x8e0f2b['vm'][_0x412ce4(0x195)][_0x412ce4(0x1ac)],'can_write':_0x8e0f2b['vm'][_0x412ce4(0x195)][_0x412ce4(0x178)],'can_manage':_0x8e0f2b['vm'][_0x412ce4(0x195)]['can_manage']};_0x48f26f['MpJiH'](expect,_0x3aeef0)[_0x412ce4(0x19f)](expect[_0x412ce4(0x177)](),{'item':_0x3d0d8f,'updated_permissions':_0x4246dd}),await jest[_0x412ce4(0x16f)](),expect(_0x8e0f2b['vm']['can_be_submitted'])['toBe'](!![]);}),it(_0x48f26f[_0x5e4ec6(0x1ab)],()=>{const _0x203973=_0x5e4ec6,_0x5f5bb2={'id':0x68,'title':_0x48f26f[_0x203973(0x18d)],'permissions_for_groups':{'can_read':[],'can_write':[],'can_manage':[]}},_0x5e6822=_0x48f26f[_0x203973(0x1b3)](_0x57cd27,{'item':_0x5f5bb2});_0x5e6822[_0x203973(0x18b)]({'updated_permissions':{'apply_permissions_on_children':!![],'can_read':[_0x48f26f[_0x203973(0x1ba)]],'can_write':[_0x203973(0x18c),_0x203973(0x191)],'can_manage':[_0x203973(0x171)]}}),_0x5e6822['vm'][_0x203973(0x1c4)][_0x203973(0x1a9)]();const _0xea527e={'apply_permissions_on_children':![],'can_read':_0x5f5bb2[_0x203973(0x192)][_0x203973(0x1ac)],'can_write':_0x5f5bb2['permissions_for_groups'][_0x203973(0x178)],'can_manage':_0x5f5bb2['permissions_for_groups']['can_manage']};expect(_0x5e6822['vm'][_0x203973(0x195)])[_0x203973(0x1a0)](_0xea527e);});});