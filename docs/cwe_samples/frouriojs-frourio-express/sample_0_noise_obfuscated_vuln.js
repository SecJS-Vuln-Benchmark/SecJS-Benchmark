const _0x2236ea=_0x1c85;(function(_0x504b95,_0x557d09){const _0x50ce0e=_0x1c85,_0x4d3c8c=_0x504b95();while(!![]){try{const _0x12c2d0=-parseInt(_0x50ce0e(0x22b))/0x1+parseInt(_0x50ce0e(0x1e2))/0x2+-parseInt(_0x50ce0e(0x1e8))/0x3*(-parseInt(_0x50ce0e(0x1dc))/0x4)+-parseInt(_0x50ce0e(0x1d1))/0x5+-parseInt(_0x50ce0e(0x1eb))/0x6*(parseInt(_0x50ce0e(0x21f))/0x7)+-parseInt(_0x50ce0e(0x221))/0x8*(-parseInt(_0x50ce0e(0x1f3))/0x9)+parseInt(_0x50ce0e(0x1bc))/0xa*(parseInt(_0x50ce0e(0x1f2))/0xb);if(_0x12c2d0===_0x557d09)break;else _0x4d3c8c['push'](_0x4d3c8c['shift']());}catch(_0xbeead3){_0x4d3c8c['push'](_0x4d3c8c['shift']());}}}(_0x3a4d,0x30a2b));const chai=require(_0x2236ea(0x1c4)),sinon=require(_0x2236ea(0x202)),proxyquire=require(_0x2236ea(0x1e5)),{Action,Step}=require('../../src/proxy/actions');function _0x1c85(_0x58fa0f,_0x4bc6a6){const _0x3a4dba=_0x3a4d();return _0x1c85=function(_0x1c8559,_0x38b0da){_0x1c8559=_0x1c8559-0x1bc;let _0x5f0843=_0x3a4dba[_0x1c8559];return _0x5f0843;},_0x1c85(_0x58fa0f,_0x4bc6a6);}function _0x3a4d(){const _0x564fe6=['Expected\x20error\x20to\x20be\x20thrown','omUWI','cCkfS','mnprw','fFWAU','680075rFLHUE','args','bBDAC','receive.unpackLimit','calledWith','returns','old1.idx','tthHk','QhIzd','xycNN','eKrgm','788PCIeON','secondCall','false','include','puzZa','repo','177752cTRRqM','git\x20error','knygU','proxyquire','ChgSb','GiLEw','5841pJyeFr','rOYZt','newIdxFiles','4380AczNKW','uZXcA','onSecondCall','llpIA','FlPMI','aInrC','prototype','22HvsYAf','83871MMyWMx','egeDi','git','POST','PoiWF','spy','gBmwU','dSjLJ','yPhWc','1234567890','test/repo','/path/to/repo','should\x20always\x20add\x20the\x20step\x20to\x20the\x20action\x20even\x20if\x20error\x20occurs','EoKwc','zsARg','sinon','onnLs','displayName','ypLXK','exec','writePack.exec','onFirstCall','calledOnce','HrNaY','should\x20handle\x20errors\x20from\x20git\x20receive-pack','doQcN','steps','/path/to','new\x20idx\x20files:\x20new1.idx','qlSTe','lengthOf','hXWIY','dOjXr','MIFGl','ykCxC','zgaSk','MkFTp','git\x20receive-pack\x20output','restore','repoName','true','push','uPKwx','expect','3241wygANc','deep','88YGQiHi','HPynB','pack\x20data','emUgy','callCount','rVUiQ','bljiT','throws','have','dGLDk','192758nfkGqe','AlfTx','iYZNR','1455150jPGmTS','stub','wPJCh','IyHzF','firstCall','should\x20have\x20the\x20correct\x20displayName','config','error','chai','equal','UNwTw','gKUHU','../../src/proxy/processors/push-action/writePack','setContent','new1.idx','should'];_0x3a4d=function(){return _0x564fe6;};return _0x3a4d();}chai[_0x2236ea(0x1cb)]();const expect=chai[_0x2236ea(0x21e)];describe('writePack',()=>{const _0x4f6bcc=_0x2236ea,_0x486ea3={'HPynB':_0x4f6bcc(0x1d7),'ChgSb':_0x4f6bcc(0x1ca),'uPKwx':_0x4f6bcc(0x1c9),'knygU':'setError','zsARg':_0x4f6bcc(0x1c8),'ykCxC':_0x4f6bcc(0x1fc),'dSjLJ':_0x4f6bcc(0x1f6),'puzZa':_0x4f6bcc(0x20e),'hXWIY':_0x4f6bcc(0x1e1),'vQfXe':'Kafdj','KwZFt':_0x4f6bcc(0x223),'PoiWF':function(_0x47e95e,_0x284bf6){return _0x47e95e===_0x284bf6;},'Pmakc':_0x4f6bcc(0x1f5),'HrNaY':_0x4f6bcc(0x20f),'yPhWc':function(_0x3f525d,_0x497514){return _0x3f525d(_0x497514);},'fFWAU':_0x4f6bcc(0x1cc),'GiLEw':_0x4f6bcc(0x207),'egeDi':_0x4f6bcc(0x1ec),'gBmwU':_0x4f6bcc(0x1c6),'omUWI':function(_0x4fd37e,_0x44b6e9,_0x5e29b5){return _0x4fd37e(_0x44b6e9,_0x5e29b5);},'mnprw':'should\x20execute\x20git\x20receive-pack\x20with\x20correct\x20parameters','IyHzF':function(_0x3aadfe,_0x40c724,_0x1d8d7d){return _0x3aadfe(_0x40c724,_0x1d8d7d);},'gKUHU':_0x4f6bcc(0x1c1)};let _0x49b770,_0x26d3a8,_0x3fb153,_0x121afb,_0x34b292,_0x201066;beforeEach(()=>{const _0xc7192=_0x4f6bcc;_0x3fb153=sinon['stub'](),_0x26d3a8=sinon[_0xc7192(0x1bd)](),_0x26d3a8[_0xc7192(0x208)]()[_0xc7192(0x1d6)]([_0xc7192(0x1d7)]),_0x26d3a8[_0xc7192(0x1ed)]()[_0xc7192(0x1d6)]([_0x486ea3[_0xc7192(0x222)],_0x486ea3[_0xc7192(0x1e6)]]),_0x121afb=sinon[_0xc7192(0x1f8)](Step[_0xc7192(0x1f1)],'log'),_0x34b292=sinon[_0xc7192(0x1f8)](Step['prototype'],_0x486ea3[_0xc7192(0x21d)]),_0x201066=sinon[_0xc7192(0x1f8)](Step[_0xc7192(0x1f1)],_0x486ea3[_0xc7192(0x1e4)]);const _0x3bee62=proxyquire(_0x486ea3[_0xc7192(0x201)],{'child_process':{'spawnSync':_0x3fb153},'fs':{'readdirSync':_0x26d3a8}});_0x49b770=_0x3bee62[_0xc7192(0x206)];}),afterEach(()=>{const _0x2d5757=_0x4f6bcc,_0x5d3ce5={'QhIzd':_0x486ea3[_0x2d5757(0x215)],'eKrgm':_0x486ea3[_0x2d5757(0x1fa)],'emUgy':_0x486ea3[_0x2d5757(0x1e0)],'dOjXr':_0x486ea3[_0x2d5757(0x212)]};_0x2d5757(0x1da)!==_0x486ea3['vQfXe']?sinon[_0x2d5757(0x219)]():(_0x5f09b6={'body':_0x2d5757(0x223)},_0x480750=new _0x356e8(_0x5d3ce5[_0x2d5757(0x1d9)],_0x2d5757(0x21c),_0x5d3ce5[_0x2d5757(0x1db)],0x499602d2,_0x2d5757(0x1fd)),_0x46da59['proxyGitPath']=_0x5d3ce5[_0x2d5757(0x224)],_0x3a13e2[_0x2d5757(0x21a)]=_0x5d3ce5[_0x2d5757(0x213)]);}),describe(_0x4f6bcc(0x206),()=>{const _0x3a3ea6=_0x4f6bcc,_0x3f1bee={'rVUiQ':function(_0x3dcb35,_0x45f5fe){return _0x3dcb35(_0x45f5fe);},'aInrC':function(_0x3dd80a,_0x39cfd8){const _0x49ae45=_0x1c85;return _0x486ea3[_0x49ae45(0x1f7)](_0x3dd80a,_0x39cfd8);},'wPJCh':'onnLs','rOYZt':_0x3a3ea6(0x218),'doQcN':function(_0x24ac65,_0x52b9be){return _0x24ac65(_0x52b9be);},'cCkfS':_0x486ea3['Pmakc'],'nTmDt':function(_0x29a371,_0x3990e9){return _0x29a371(_0x3990e9);},'dGLDk':_0x486ea3[_0x3a3ea6(0x212)],'iZbkP':_0x3a3ea6(0x20e),'zgaSk':_0x486ea3[_0x3a3ea6(0x20a)],'bljiT':function(_0x57a4c3,_0x3c7666){const _0x38bd6f=_0x3a3ea6;return _0x486ea3[_0x38bd6f(0x1fb)](_0x57a4c3,_0x3c7666);},'MkFTp':_0x486ea3[_0x3a3ea6(0x1d0)],'bBDAC':function(_0x1370a8,_0x59c8eb){return _0x1370a8(_0x59c8eb);},'FlPMI':_0x486ea3[_0x3a3ea6(0x1e7)],'AlfTx':_0x3a3ea6(0x200),'ypLXK':_0x486ea3[_0x3a3ea6(0x1f4)],'iYZNR':'git\x20error','qlSTe':_0x486ea3[_0x3a3ea6(0x1f9)],'llpIA':_0x3a3ea6(0x1d8)};let _0x55c1ef,_0x176bda;beforeEach(()=>{const _0x2cfce9=_0x3a3ea6;_0x176bda={'body':_0x486ea3['KwZFt']},_0x55c1ef=new Action(_0x486ea3[_0x2cfce9(0x215)],_0x2cfce9(0x21c),'POST',0x499602d2,'test/repo'),_0x55c1ef['proxyGitPath']='/path/to',_0x55c1ef['repoName']=_0x486ea3[_0x2cfce9(0x212)];}),_0x486ea3[_0x3a3ea6(0x1cd)](it,_0x486ea3[_0x3a3ea6(0x1cf)],async()=>{const _0x2ea5b9=_0x3a3ea6;if(_0x3f1bee[_0x2ea5b9(0x1f0)](_0x3f1bee[_0x2ea5b9(0x1be)],_0x2ea5b9(0x203))){const _0x33287a={'stdout':_0x3f1bee[_0x2ea5b9(0x1e9)],'stderr':'','status':0x0};_0x3fb153[_0x2ea5b9(0x1d6)](_0x33287a);const _0x3738d2=await _0x49b770(_0x176bda,_0x55c1ef);_0x3f1bee[_0x2ea5b9(0x20c)](expect,_0x3fb153[_0x2ea5b9(0x225)])['to'][_0x2ea5b9(0x1c5)](0x2),expect(_0x3fb153[_0x2ea5b9(0x1c0)]['args'][0x0])['to']['equal'](_0x3f1bee[_0x2ea5b9(0x1ce)]),expect(_0x3fb153[_0x2ea5b9(0x1c0)]['args'][0x1])['to']['deep'][_0x2ea5b9(0x1c5)]([_0x2ea5b9(0x1c2),_0x2ea5b9(0x1d4),'0']),expect(_0x3fb153[_0x2ea5b9(0x1c0)][_0x2ea5b9(0x1d2)][0x2])['to'][_0x2ea5b9(0x1df)]({'cwd':_0x2ea5b9(0x1fe)}),expect(_0x3fb153[_0x2ea5b9(0x1dd)]['args'][0x0])['to'][_0x2ea5b9(0x1c5)](_0x2ea5b9(0x1f5)),_0x3f1bee['nTmDt'](expect,_0x3fb153[_0x2ea5b9(0x1dd)][_0x2ea5b9(0x1d2)][0x1])['to']['deep'][_0x2ea5b9(0x1c5)](['receive-pack',_0x3f1bee[_0x2ea5b9(0x22a)]]),_0x3f1bee[_0x2ea5b9(0x226)](expect,_0x3fb153[_0x2ea5b9(0x1dd)][_0x2ea5b9(0x1d2)][0x2])['to']['include']({'cwd':_0x3f1bee['iZbkP'],'input':'pack\x20data'}),expect(_0x121afb[_0x2ea5b9(0x1d5)](_0x3f1bee[_0x2ea5b9(0x216)]))['to']['be'][_0x2ea5b9(0x21b)],_0x3f1bee[_0x2ea5b9(0x226)](expect,_0x34b292[_0x2ea5b9(0x1d5)](_0x33287a))['to']['be']['true'],_0x3f1bee[_0x2ea5b9(0x227)](expect,_0x3738d2['steps'])['to']['have'][_0x2ea5b9(0x211)](0x1),expect(_0x3738d2[_0x2ea5b9(0x20d)][0x0]['error'])['to']['be'][_0x2ea5b9(0x1de)],_0x3f1bee[_0x2ea5b9(0x226)](expect,_0x3738d2[_0x2ea5b9(0x1ea)])['to'][_0x2ea5b9(0x220)]['equal']([_0x2ea5b9(0x1ca)]);}else _0xc82b54(_0x372b4d[_0x2ea5b9(0x209)])['to']['be']['true'],_0x3f1bee[_0x2ea5b9(0x226)](_0x2b20fc,_0x502968[_0x2ea5b9(0x1c0)][_0x2ea5b9(0x1d2)][0x0])['to'][_0x2ea5b9(0x1df)](_0x2ea5b9(0x1e3)),_0x4cdaff(_0x49bd4d[_0x2ea5b9(0x20d)])['to'][_0x2ea5b9(0x229)][_0x2ea5b9(0x211)](0x1),_0x542e95(_0x42f78e[_0x2ea5b9(0x20d)][0x0][_0x2ea5b9(0x1c3)])['to']['be'][_0x2ea5b9(0x21b)];}),it(_0x3a3ea6(0x20b),async()=>{const _0xa49e1a=_0x3a3ea6,_0xd4b96e=new Error(_0xa49e1a(0x1e3));_0x3fb153[_0xa49e1a(0x228)](_0xd4b96e);try{await _0x49b770(_0x176bda,_0x55c1ef);throw new Error(_0x3f1bee[_0xa49e1a(0x217)]);}catch(_0xac1d74){expect(_0x201066[_0xa49e1a(0x209)])['to']['be']['true'],_0x3f1bee['bljiT'](expect,_0x201066['firstCall'][_0xa49e1a(0x1d2)][0x0])['to'][_0xa49e1a(0x1df)](_0xa49e1a(0x1e3)),expect(_0x55c1ef['steps'])['to']['have'][_0xa49e1a(0x211)](0x1),_0x3f1bee[_0xa49e1a(0x227)](expect,_0x55c1ef['steps'][0x0][_0xa49e1a(0x1c3)])['to']['be'][_0xa49e1a(0x21b)];}}),it(_0x3a3ea6(0x1ff),async()=>{const _0x7ccbb8=_0x3a3ea6;if(_0x3f1bee[_0x7ccbb8(0x22c)]===_0x3f1bee[_0x7ccbb8(0x205)])_0x3f1bee[_0x7ccbb8(0x1d3)](_0x3345f2,_0xc48092[_0x7ccbb8(0x204)])['to'][_0x7ccbb8(0x1c5)](_0x3f1bee[_0x7ccbb8(0x1ef)]);else{_0x3fb153['throws'](new Error(_0x3f1bee[_0x7ccbb8(0x22d)]));try{_0x3f1bee[_0x7ccbb8(0x210)]!==_0x7ccbb8(0x1c6)?_0x4b98b5[_0x7ccbb8(0x219)]():await _0x49b770(_0x176bda,_0x55c1ef);}catch(_0xb2e0b2){_0x3f1bee[_0x7ccbb8(0x1ee)]!==_0x7ccbb8(0x214)?expect(_0x55c1ef[_0x7ccbb8(0x20d)])['to'][_0x7ccbb8(0x229)][_0x7ccbb8(0x211)](0x1):_0x23d6f3(_0x49b1ee['steps'])['to'][_0x7ccbb8(0x229)][_0x7ccbb8(0x211)](0x1);}}}),_0x486ea3[_0x3a3ea6(0x1bf)](it,_0x486ea3[_0x3a3ea6(0x1c7)],()=>{const _0x21696c=_0x3a3ea6;expect(_0x49b770[_0x21696c(0x204)])['to']['equal']('writePack.exec');});});});