'use strict';const _0x123b5b=_0x1c54;(function(_0x13c852,_0x5cf0a5){const _0x4a64ae=_0x1c54,_0x1a233d=_0x13c852();while(!![]){try{const _0x3c9c16=parseInt(_0x4a64ae(0x1a3))/0x1*(parseInt(_0x4a64ae(0x1fe))/0x2)+-parseInt(_0x4a64ae(0x1c2))/0x3+parseInt(_0x4a64ae(0x21a))/0x4*(parseInt(_0x4a64ae(0x1a2))/0x5)+parseInt(_0x4a64ae(0x1cd))/0x6*(-parseInt(_0x4a64ae(0x204))/0x7)+-parseInt(_0x4a64ae(0x1e8))/0x8*(parseInt(_0x4a64ae(0x1b9))/0x9)+parseInt(_0x4a64ae(0x212))/0xa*(-parseInt(_0x4a64ae(0x19e))/0xb)+parseInt(_0x4a64ae(0x1d7))/0xc*(parseInt(_0x4a64ae(0x209))/0xd);if(_0x3c9c16===_0x5cf0a5)break;else _0x1a233d['push'](_0x1a233d['shift']());}catch(_0x42c1a0){_0x1a233d['push'](_0x1a233d['shift']());}}}(_0x158d,0xa0fbc));function _0x158d(){const _0x2f1c64=['AHbbd','znFQh','statusCode','notOk','eXuxE','AxUwj','9696906SpFUUK','WUOIQ','should\x20not\x20remove\x20any\x20content\x20type\x20parser\x20if\x20content\x20type\x20does\x20not\x20exist','addContentTypeParser','YfMTk','rDyCg','toString','should\x20only\x20accept\x20string\x20and\x20RegExp','nwxiW','2779659AAEgAo','parserList','VEbIW','should\x20work\x20with\x20string\x20and\x20RegExp','should\x20prefer\x20content\x20type\x20parser\x20with\x20string\x20value','image/gif','hoQFi','constructor;\x20charset=utf-8','equal','application/javascript','should\x20know\x20about\x20internal\x20parsers','78WBkRBo','YXfrm','JWIRc','EtZqH','IzAhx','KaNrT','GmpxV','ZbsBB','let\x20you\x20override\x20the\x20default\x20parser\x20once','get','26417328RStYGB','getOwnPropertyNames','JfIfa','POST','vfdzo','dmkNc','ready','Safeguard\x20against\x20malicious\x20content-type\x20/\x201','izoVA','text/html','length','Content\x20type\x20parser\x20\x27text/plain\x27\x20already\x20present','find','CESur','Error\x20thrown\x20415\x20from\x20content\x20type\x20is\x20null\x20and\x20make\x20post\x20request\x20to\x20server','QGORC','text','8dAYoUP','bFNYL','payload','pTigy','kContentTypeParser','hasContentTypeParser','BuYKJ','RAKXo','application/jsoff','yggaw','customParsers','XaIPL','IZMFj','getParser','same','PvOwq','should\x20return\x20matching\x20parser\x20with\x20caching','WfCof','jDavF','\x5cu0063\x5cu006fnstructor','FGRLO','should\x20throw\x20an\x20error\x20if\x20content\x20type\x20is\x20neither\x20string\x20nor\x20RegExp','6232kfcipH','YKLrZ','bdIEq','VXBhm','XUjBK','ubuEb','143857TJEMAC','cache','text/test','LGbJx','UFkXX','13jQbSyK','throws','error','test','end','should\x20remove\x20default\x20parser','should\x20return\x20parser\x20that\x20catches\x20all\x20if\x20no\x20other\x20is\x20set','plan','inject','10EUUhmn','ZefRI','kGMiO','EGOvu','should\x20remove\x20RegExp\x20parser','message','post','send','4sVCnEz','HZfyu','add','size','xBtaD','keys','application/xml','some\x20text','hiTeS','iYkRf','BLyiZ','UUuiR','remove','Sbxqu','returns\x20always\x20false\x20for\x20\x22*\x22','qPICp','oUFTg','EKHES','should\x20set\x20\x22*\x22\x20as\x20parser\x20that\x20catches\x20all','BdWPd','blhxZ','image/png','setErrorHandler','application/t+xml','bghgN','The\x20content\x20type\x20should\x20be\x20a\x20string\x20or\x20a\x20RegExp','4963277GXvNAK','zbmxN','application/json','tap','962645Ezvfaa','317ioEyTX','text/plain','Safeguard\x20against\x20malicious\x20content-type\x20/\x203','should\x20return\x20matching\x20parser','../lib/symbols','__proto__','DvHnV','weirdType/','sCpYp','ynJJg','bHUaL','existingParser','GIgsr','text/html\x20','jTDWV','EitYr'];_0x158d=function(){return _0x2f1c64;};return _0x158d();}const t=require(_0x123b5b(0x1a1)),test=t[_0x123b5b(0x20c)],Fastify=require('..'),keys=require(_0x123b5b(0x1a7)),{FST_ERR_CTP_ALREADY_PRESENT,FST_ERR_CTP_INVALID_TYPE,FST_ERR_CTP_INVALID_MEDIA_TYPE}=require('../lib/errors'),first=function(_0x5f8c8,_0x139d0b,_0x501e88){},second=function(_0x3f18a2,_0x4360d3,_0x4aab48){},third=function(_0x222ac4,_0x3cb6ba,_0x250c5d){};function _0x1c54(_0x504dc5,_0x1b5fc2){const _0x158df9=_0x158d();return _0x1c54=function(_0x1c54c2,_0x5f1427){_0x1c54c2=_0x1c54c2-0x194;let _0x4fcd49=_0x158df9[_0x1c54c2];return _0x4fcd49;},_0x1c54(_0x504dc5,_0x1b5fc2);}test(_0x123b5b(0x1ed),_0xc8f891=>{const _0x4b6de8=_0x123b5b,_0x36320f={'RAKXo':function(_0x19a45a){return _0x19a45a();},'AHbbd':'image/gif','PeShx':_0x4b6de8(0x199),'jDavF':_0x4b6de8(0x1cc),'KZhYd':function(_0x136fba,_0x383421,_0x403451){return _0x136fba(_0x383421,_0x403451);},'rDyCg':_0x4b6de8(0x1c5)};test(_0x36320f[_0x4b6de8(0x1fa)],_0x2dd0b5=>{const _0x19c213=_0x4b6de8,_0x3593f1={'EGOvu':_0x19c213(0x1e0)};_0x2dd0b5[_0x19c213(0x210)](0x4);const _0x9a2fee=_0x36320f[_0x19c213(0x1ef)](Fastify);_0x9a2fee[_0x19c213(0x1dd)](_0x541ed1=>{const _0x567497=_0x19c213,_0x42adc7={'VXBhm':_0x3593f1[_0x567497(0x215)]};if(_0x567497(0x195)!==_0x567497(0x195)){_0x5221cc[_0x567497(0x210)](0x6);const _0x5649f1=_0x41b90b();_0x5649f1['addContentTypeParser'](_0x42adc7['VXBhm'],_0x1c77cf),_0x5dc2ce['equal'](_0x5649f1[_0x34b6d8['kContentTypeParser']]['getParser'](_0x42adc7[_0x567497(0x201)])['fn'],_0x3b3dc8),_0x2b3faa[_0x567497(0x1ca)](_0x5649f1[_0x220d25[_0x567497(0x1ec)]][_0x567497(0x205)][_0x567497(0x21d)],0x0),_0x47e4af[_0x567497(0x1ca)](_0x5649f1[_0x139d0f[_0x567497(0x1ec)]][_0x567497(0x1f5)](_0x567497(0x1b0))['fn'],_0x2bdcdc),_0x48becc[_0x567497(0x1ca)](_0x5649f1[_0x3ef70d[_0x567497(0x1ec)]]['cache'][_0x567497(0x21d)],0x1),_0xf7f2ed[_0x567497(0x1ca)](_0x5649f1[_0x3f9978[_0x567497(0x1ec)]][_0x567497(0x1f5)](_0x567497(0x1b0))['fn'],_0x296d02),_0x4286ab[_0x567497(0x1ca)](_0x5649f1[_0x51aebd[_0x567497(0x1ec)]]['cache'][_0x567497(0x21d)],0x1);}else _0x2dd0b5[_0x567497(0x20b)](_0x541ed1),_0x2dd0b5['ok'](_0x9a2fee[_0x567497(0x1ed)](_0x567497(0x1a0))),_0x2dd0b5['ok'](_0x9a2fee[_0x567497(0x1ed)](_0x567497(0x1a4))),_0x2dd0b5[_0x567497(0x1b6)](_0x9a2fee[_0x567497(0x1ed)](_0x567497(0x1f0)));});}),_0x36320f['KZhYd'](test,_0x36320f[_0x4b6de8(0x1be)],_0x1b047c=>{const _0x19ae4a=_0x4b6de8;_0x1b047c['plan'](0x7);const _0x43332a=Fastify();_0x43332a[_0x19ae4a(0x1bc)](/^image\/.*/,first),_0x43332a[_0x19ae4a(0x1bc)](/^application\/.+\+xml/,first),_0x43332a[_0x19ae4a(0x1bc)](_0x19ae4a(0x1c7),first),_0x1b047c['ok'](_0x43332a[_0x19ae4a(0x1ed)](_0x19ae4a(0x1a0))),_0x1b047c['ok'](_0x43332a['hasContentTypeParser'](/^image\/.*/)),_0x1b047c['ok'](_0x43332a[_0x19ae4a(0x1ed)](/^application\/.+\+xml/)),_0x1b047c['ok'](_0x43332a[_0x19ae4a(0x1ed)](_0x36320f[_0x19ae4a(0x1b3)])),_0x1b047c['notOk'](_0x43332a[_0x19ae4a(0x1ed)](/^image\/.+\+xml/)),_0x1b047c[_0x19ae4a(0x1b6)](_0x43332a[_0x19ae4a(0x1ed)](_0x36320f['PeShx'])),_0x1b047c['notOk'](_0x43332a[_0x19ae4a(0x1ed)]('*'));}),_0xc8f891[_0x4b6de8(0x20d)]();}),test(_0x123b5b(0x1f5),_0x41ca4d=>{const _0x1679e6=_0x123b5b,_0x3e892c={'BLyiZ':'text/html','izoVA':_0x1679e6(0x19b),'oUFTg':function(_0x123614){return _0x123614();},'wraRS':'eParY','vfdzo':_0x1679e6(0x1d9),'HxMVk':function(_0x5edfbf){return _0x5edfbf();},'VEbIW':'text/html\x20','BdWPd':'image/gif','yggaw':function(_0x22b8ef){return _0x22b8ef();},'hoQFi':_0x1679e6(0x1cb),'GIgsr':function(_0x40b9c2,_0x3ed2fa,_0x525d65){return _0x40b9c2(_0x3ed2fa,_0x525d65);},'sCpYp':_0x1679e6(0x1c6),'THwKY':function(_0x3faee4,_0xc219d0,_0x2833e7){return _0x3faee4(_0xc219d0,_0x2833e7);},'kGMiO':'should\x20return\x20undefined\x20if\x20no\x20matching\x20parser\x20exist'};test(_0x1679e6(0x1a6),_0xf424c5=>{const _0x2807b5=_0x1679e6;_0xf424c5['plan'](0x3);const _0xd49f68=Fastify();_0xd49f68['addContentTypeParser'](/^image\/.*/,first),_0xd49f68[_0x2807b5(0x1bc)](/^application\/.+\+xml/,second),_0xd49f68[_0x2807b5(0x1bc)](_0x3e892c[_0x2807b5(0x224)],third),_0xf424c5[_0x2807b5(0x1ca)](_0xd49f68[keys[_0x2807b5(0x1ec)]]['getParser'](_0x3e892c[_0x2807b5(0x1df)])['fn'],second),_0xf424c5['equal'](_0xd49f68[keys[_0x2807b5(0x1ec)]][_0x2807b5(0x1f5)]('image/png')['fn'],first),_0xf424c5[_0x2807b5(0x1ca)](_0xd49f68[keys[_0x2807b5(0x1ec)]][_0x2807b5(0x1f5)](_0x3e892c['BLyiZ'])['fn'],third);}),test(_0x1679e6(0x1f8),_0x545970=>{const _0x507cec=_0x1679e6;if(_0x3e892c['wraRS']!==_0x3e892c[_0x507cec(0x1db)]){_0x545970[_0x507cec(0x210)](0x6);const _0x4c3376=_0x3e892c['HxMVk'](Fastify);_0x4c3376['addContentTypeParser'](_0x3e892c[_0x507cec(0x224)],first),_0x545970['equal'](_0x4c3376[keys[_0x507cec(0x1ec)]][_0x507cec(0x1f5)](_0x507cec(0x1e0))['fn'],first),_0x545970['equal'](_0x4c3376[keys[_0x507cec(0x1ec)]][_0x507cec(0x205)][_0x507cec(0x21d)],0x0),_0x545970[_0x507cec(0x1ca)](_0x4c3376[keys['kContentTypeParser']][_0x507cec(0x1f5)](_0x3e892c[_0x507cec(0x1c4)])['fn'],first),_0x545970['equal'](_0x4c3376[keys[_0x507cec(0x1ec)]][_0x507cec(0x205)][_0x507cec(0x21d)],0x1),_0x545970['equal'](_0x4c3376[keys['kContentTypeParser']]['getParser'](_0x3e892c[_0x507cec(0x1c4)])['fn'],first),_0x545970['equal'](_0x4c3376[keys[_0x507cec(0x1ec)]]['cache'][_0x507cec(0x21d)],0x1);}else{_0x141b33[_0x507cec(0x210)](0x1);const _0x1f0291=_0x3e892c[_0x507cec(0x194)](_0x5d36af),_0x36f83f=_0x1f0291[_0x3eed03['kContentTypeParser']];_0x36f83f[_0x507cec(0x21c)]('*',{},_0xf471f4),_0x27a9d8[_0x507cec(0x1ca)](_0x36f83f['customParsers']['get']('')['fn'],_0x15a0d5);}}),_0x3e892c[_0x1679e6(0x1af)](test,_0x3e892c[_0x1679e6(0x1ab)],_0x36e776=>{const _0xecc333=_0x1679e6;_0x36e776[_0xecc333(0x210)](0x2);const _0x42b9cd=Fastify();_0x42b9cd[_0xecc333(0x1bc)](/^image\/.*/,first),_0x42b9cd[_0xecc333(0x1bc)](_0x3e892c[_0xecc333(0x197)],second),_0x36e776[_0xecc333(0x1ca)](_0x42b9cd[keys['kContentTypeParser']][_0xecc333(0x1f5)](_0x3e892c[_0xecc333(0x197)])['fn'],second),_0x36e776[_0xecc333(0x1ca)](_0x42b9cd[keys[_0xecc333(0x1ec)]][_0xecc333(0x1f5)]('image/png')['fn'],first);}),_0x3e892c[_0x1679e6(0x1af)](test,_0x1679e6(0x20f),_0x1da9b2=>{const _0x5d8640=_0x1679e6;_0x1da9b2['plan'](0x3);const _0x384856=Fastify();_0x384856[_0x5d8640(0x1bc)]('*',first),_0x384856[_0x5d8640(0x1bc)](/^text\/.*/,second),_0x1da9b2['equal'](_0x384856[keys[_0x5d8640(0x1ec)]]['getParser']('image/gif')['fn'],first),_0x1da9b2[_0x5d8640(0x1ca)](_0x384856[keys[_0x5d8640(0x1ec)]][_0x5d8640(0x1f5)](_0x3e892c[_0x5d8640(0x224)])['fn'],second),_0x1da9b2[_0x5d8640(0x1ca)](_0x384856[keys[_0x5d8640(0x1ec)]][_0x5d8640(0x1f5)](_0x5d8640(0x1e7))['fn'],first);}),_0x3e892c['THwKY'](test,_0x3e892c[_0x1679e6(0x214)],_0xd75ea=>{const _0x4682de=_0x1679e6;_0xd75ea[_0x4682de(0x210)](0x2);const _0x45bd1b=_0x3e892c[_0x4682de(0x1f1)](Fastify);_0x45bd1b['addContentTypeParser'](/^weirdType\/.+/,first),_0x45bd1b['addContentTypeParser'](_0x3e892c[_0x4682de(0x1c8)],first),_0xd75ea[_0x4682de(0x1b6)](_0x45bd1b[keys['kContentTypeParser']][_0x4682de(0x1f5)](_0x4682de(0x220))),_0xd75ea[_0x4682de(0x1b6)](_0x45bd1b[keys['kContentTypeParser']]['getParser'](_0x4682de(0x1aa)));}),_0x41ca4d['end']();}),test(_0x123b5b(0x1ae),_0x49d52f=>{const _0xcfb8f5=_0x123b5b,_0x2300c2={'IZMFj':function(_0xff980f){return _0xff980f();},'qPICp':_0xcfb8f5(0x1a0),'xBtaD':'Content\x20type\x20parser\x20\x27application/json\x27\x20already\x20present','YXfrm':_0xcfb8f5(0x1e2),'blhxZ':function(_0x44ab2e,_0xd58f2d,_0x45ae50){return _0x44ab2e(_0xd58f2d,_0x45ae50);},'GmpxV':_0xcfb8f5(0x228),'UFkXX':_0xcfb8f5(0x1e0),'aAhsR':'text/plain','hiTeS':_0xcfb8f5(0x199)};_0x2300c2[_0xcfb8f5(0x198)](test,_0x2300c2[_0xcfb8f5(0x1d3)],_0x367fa2=>{const _0x19de1e=_0xcfb8f5;_0x367fa2['plan'](0x2);const _0x3add57=Fastify();_0x3add57[_0x19de1e(0x1bc)](/^image\/.*/,first),_0x3add57['addContentTypeParser'](/^application\/.+\+xml/,first),_0x3add57[_0x19de1e(0x1bc)]('text/html',first),_0x367fa2[_0x19de1e(0x1b6)](_0x3add57[keys[_0x19de1e(0x1ec)]][_0x19de1e(0x1ae)]('*')),_0x3add57[_0x19de1e(0x1bc)]('*',first),_0x367fa2['notOk'](_0x3add57[keys[_0x19de1e(0x1ec)]][_0x19de1e(0x1ae)]('*'));}),test(_0xcfb8f5(0x1d5),_0x3df14a=>{const _0x25f164=_0xcfb8f5;_0x3df14a[_0x25f164(0x210)](0x2);const _0x14e139=_0x2300c2['IZMFj'](Fastify);_0x14e139['addContentTypeParser'](_0x2300c2[_0x25f164(0x229)],first),_0x14e139['addContentTypeParser'](_0x25f164(0x1a4),first),_0x3df14a[_0x25f164(0x20a)](()=>_0x14e139[_0x25f164(0x1bc)]('application/json',first),FST_ERR_CTP_ALREADY_PRESENT,_0x2300c2[_0x25f164(0x21e)]),_0x3df14a[_0x25f164(0x20a)](()=>_0x14e139[_0x25f164(0x1bc)](_0x25f164(0x1a4),first),FST_ERR_CTP_ALREADY_PRESENT,_0x2300c2[_0x25f164(0x1ce)]);});const _0x1096cb=_0x2300c2[_0xcfb8f5(0x1f4)](Fastify),_0x334a76=_0x1096cb[keys[_0xcfb8f5(0x1ec)]];_0x1096cb[_0xcfb8f5(0x1bc)](/^image\/.*/,first),_0x1096cb['addContentTypeParser'](/^application\/.+\+xml/,first),_0x1096cb[_0xcfb8f5(0x1bc)]('text/html',first),_0x49d52f['ok'](_0x334a76[_0xcfb8f5(0x1ae)](/^image\/.*/)),_0x49d52f['ok'](_0x334a76[_0xcfb8f5(0x1ae)](_0x2300c2[_0xcfb8f5(0x208)])),_0x49d52f['ok'](_0x334a76[_0xcfb8f5(0x1ae)](/^application\/.+\+xml/)),_0x49d52f[_0xcfb8f5(0x1b6)](_0x334a76[_0xcfb8f5(0x1ae)](_0x2300c2[_0xcfb8f5(0x229)])),_0x49d52f[_0xcfb8f5(0x1b6)](_0x334a76[_0xcfb8f5(0x1ae)](_0x2300c2['aAhsR'])),_0x49d52f['notOk'](_0x334a76[_0xcfb8f5(0x1ae)](_0x2300c2[_0xcfb8f5(0x222)])),_0x49d52f[_0xcfb8f5(0x1b6)](_0x334a76[_0xcfb8f5(0x1ae)](/^application\/.+\+json/)),_0x49d52f[_0xcfb8f5(0x20d)]();}),test(_0x123b5b(0x21c),_0xb29c8a=>{const _0x40face=_0x123b5b,_0x4cf420={'iYkRf':_0x40face(0x19d),'KaNrT':function(_0x685d98,_0x160822,_0x2c062a){return _0x685d98(_0x160822,_0x2c062a);},'bghgN':_0x40face(0x1c0),'DvHnV':'should\x20set\x20\x22*\x22\x20as\x20parser\x20that\x20catches\x20all','YJMbc':_0x40face(0x1ff),'LGbJx':function(_0x413fb4){return _0x413fb4();}};_0x4cf420[_0x40face(0x1d2)](test,_0x4cf420['bghgN'],_0x1a49ba=>{const _0x3f8f84=_0x40face;_0x1a49ba[_0x3f8f84(0x210)](0x4);const _0x262add=Fastify(),_0x320a17=_0x262add[keys[_0x3f8f84(0x1ec)]];_0x1a49ba[_0x3f8f84(0x20b)](_0x320a17[_0x3f8f84(0x21c)](_0x3f8f84(0x20c),{},first)),_0x1a49ba[_0x3f8f84(0x20b)](_0x320a17[_0x3f8f84(0x21c)](/test/,{},first)),_0x1a49ba[_0x3f8f84(0x20a)](()=>_0x320a17[_0x3f8f84(0x21c)]({},{},first),FST_ERR_CTP_INVALID_TYPE,_0x4cf420[_0x3f8f84(0x223)]),_0x1a49ba[_0x3f8f84(0x20a)](()=>_0x320a17[_0x3f8f84(0x21c)](0x1,{},first),FST_ERR_CTP_INVALID_TYPE,_0x3f8f84(0x19d));}),_0x4cf420[_0x40face(0x1d2)](test,_0x40face(0x196),_0x3fe87b=>{const _0xcc0d66=_0x40face;if(_0xcc0d66(0x1f7)!==_0x4cf420['YJMbc']){_0x3fe87b[_0xcc0d66(0x210)](0x1);const _0x599784=_0x4cf420[_0xcc0d66(0x207)](Fastify),_0x17b83e=_0x599784[keys['kContentTypeParser']];_0x17b83e['add']('*',{},first),_0x3fe87b[_0xcc0d66(0x1ca)](_0x17b83e['customParsers'][_0xcc0d66(0x1d6)]('')['fn'],first);}else{const _0x3f7422={'bHUaL':function(_0x39b7e9){return _0x39b7e9();},'AxUwj':_0x4cf420[_0xcc0d66(0x223)]};_0x4cf420[_0xcc0d66(0x1d2)](_0x258292,_0x4cf420[_0xcc0d66(0x19c)],_0x57965e=>{const _0x2df35a=_0xcc0d66;_0x57965e[_0x2df35a(0x210)](0x4);const _0x1e4dbf=_0x3f7422[_0x2df35a(0x1ad)](_0x2c7cd8),_0x4725b3=_0x1e4dbf[_0x10690c[_0x2df35a(0x1ec)]];_0x57965e[_0x2df35a(0x20b)](_0x4725b3[_0x2df35a(0x21c)]('test',{},_0x3e1896)),_0x57965e['error'](_0x4725b3[_0x2df35a(0x21c)](/test/,{},_0x26c56c)),_0x57965e['throws'](()=>_0x4725b3['add']({},{},_0x353639),_0x593552,_0x3f7422[_0x2df35a(0x1b8)]),_0x57965e[_0x2df35a(0x20a)](()=>_0x4725b3['add'](0x1,{},_0x4b8d28),_0xc7493b,'The\x20content\x20type\x20should\x20be\x20a\x20string\x20or\x20a\x20RegExp');}),_0x34e109(_0x4cf420[_0xcc0d66(0x1a9)],_0x49cc0f=>{const _0x42bbb8=_0xcc0d66;_0x49cc0f[_0x42bbb8(0x210)](0x1);const _0x3b4fe4=_0x4fbd11(),_0xe4e171=_0x3b4fe4[_0x1b530f[_0x42bbb8(0x1ec)]];_0xe4e171[_0x42bbb8(0x21c)]('*',{},_0x243710),_0x49cc0f[_0x42bbb8(0x1ca)](_0xe4e171[_0x42bbb8(0x1f2)][_0x42bbb8(0x1d6)]('')['fn'],_0xecec98);}),_0x97d8f2[_0xcc0d66(0x20d)]();}}),_0xb29c8a[_0x40face(0x20d)]();}),test('non-Error\x20thrown\x20from\x20content\x20parser\x20is\x20properly\x20handled',_0x498f4c=>{const _0x2b6cdb=_0x123b5b,_0x2ee83d={'zbmxN':'Content\x20type\x20parser\x20\x27application/json\x27\x20already\x20present','CESur':_0x2b6cdb(0x1e2),'WUOIQ':function(_0x350565,_0x306133){return _0x350565(_0x306133);},'Sbxqu':function(_0x49448e,_0x38874d){return _0x49448e!==_0x38874d;},'YfMTk':_0x2b6cdb(0x1fc),'HZfyu':_0x2b6cdb(0x206)};_0x498f4c['plan'](0x3);const _0x3b66f=Fastify(),_0x561d43=_0x2b6cdb(0x20c),_0xfd6584='error';_0x3b66f[_0x2b6cdb(0x1bc)](_0x2ee83d[_0x2b6cdb(0x21b)],(_0x13067f,_0x2708bf,_0x359bd1)=>{const _0xa45056=_0x2b6cdb,_0x59f933={'bFNYL':function(_0x2723b5){return _0x2723b5();},'EDsGo':_0xa45056(0x1a4),'ynJJg':_0x2ee83d[_0xa45056(0x19f)],'rByvB':_0x2ee83d[_0xa45056(0x1e4)]};if(_0xa45056(0x1b2)!=='EitYr'){_0x4d10d0['plan'](0x2);const _0x4833db=_0x59f933[_0xa45056(0x1e9)](_0x5321a1);_0x4833db[_0xa45056(0x1bc)](_0xa45056(0x1a0),_0x21e198),_0x4833db[_0xa45056(0x1bc)](_0x59f933['EDsGo'],_0x52ce1a),_0x4ea212[_0xa45056(0x20a)](()=>_0x4833db[_0xa45056(0x1bc)]('application/json',_0x4b431b),_0x31c971,_0x59f933[_0xa45056(0x1ac)]),_0x1bd278[_0xa45056(0x20a)](()=>_0x4833db[_0xa45056(0x1bc)]('text/plain',_0x479ce9),_0xdb0c63,_0x59f933['rByvB']);}else _0x2ee83d[_0xa45056(0x1ba)](_0x359bd1,_0x561d43);}),_0x3b66f[_0x2b6cdb(0x218)]('/',(_0x27dbaf,_0x597eed)=>{}),_0x3b66f[_0x2b6cdb(0x19a)]((_0x5664c7,_0x3c8fc4,_0x1ca597)=>{const _0x10a8a2=_0x2b6cdb;_0x498f4c[_0x10a8a2(0x1ca)](_0x5664c7,_0x561d43),_0x1ca597[_0x10a8a2(0x219)](_0xfd6584);}),_0x3b66f[_0x2b6cdb(0x211)]({'method':'POST','url':'/','headers':{'Content-Type':_0x2b6cdb(0x206)},'body':_0x2b6cdb(0x221)},(_0x5767d2,_0x2c42f7)=>{const _0x2bc5f6=_0x2b6cdb;if(_0x2ee83d[_0x2bc5f6(0x227)](_0x2ee83d[_0x2bc5f6(0x1bd)],_0x2ee83d[_0x2bc5f6(0x1bd)]))return'ok';else _0x498f4c[_0x2bc5f6(0x20b)](_0x5767d2),_0x498f4c[_0x2bc5f6(0x1ca)](_0x2c42f7[_0x2bc5f6(0x1ea)],_0xfd6584);});}),test(_0x123b5b(0x1e5),_0x270b56=>{const _0x21761d=_0x123b5b,_0x1258d9={'IzAhx':function(_0x51c5ea){return _0x51c5ea();},'nwxiW':'image/gif','XaIPL':_0x21761d(0x199),'dmkNc':function(_0x784963,_0x115265){return _0x784963===_0x115265;},'pTigy':_0x21761d(0x202),'ZbsBB':_0x21761d(0x200),'IbqIf':'POST','znFQh':'some\x20text'};_0x270b56['plan'](0x3);const _0x17d8bc=Fastify(),_0x24ab96=new FST_ERR_CTP_INVALID_MEDIA_TYPE(undefined)[_0x21761d(0x217)];_0x17d8bc[_0x21761d(0x218)]('/',(_0x47e571,_0x3cbc40)=>{}),_0x17d8bc[_0x21761d(0x211)]({'method':_0x1258d9['IbqIf'],'url':'/','body':_0x1258d9[_0x21761d(0x1b4)]},(_0x451f09,_0x487dbc)=>{const _0x3c9a59=_0x21761d;if(_0x1258d9[_0x3c9a59(0x1dc)](_0x1258d9[_0x3c9a59(0x1eb)],_0x1258d9[_0x3c9a59(0x1d4)])){_0x512317[_0x3c9a59(0x210)](0x2);const _0xaa0421=_0x1258d9[_0x3c9a59(0x1d1)](_0x4e530);_0xaa0421['addContentTypeParser'](/^image\/.*/,_0x551713),_0xaa0421[_0x3c9a59(0x1bc)](_0x1258d9[_0x3c9a59(0x1c1)],_0x96043e),_0x2b1d6e[_0x3c9a59(0x1ca)](_0xaa0421[_0x16169e[_0x3c9a59(0x1ec)]][_0x3c9a59(0x1f5)](_0x1258d9[_0x3c9a59(0x1c1)])['fn'],_0x4c2c07),_0x443d96[_0x3c9a59(0x1ca)](_0xaa0421[_0x9628ad[_0x3c9a59(0x1ec)]]['getParser'](_0x1258d9[_0x3c9a59(0x1f3)])['fn'],_0x3d29bc);}else _0x270b56[_0x3c9a59(0x20b)](_0x451f09),_0x270b56[_0x3c9a59(0x1ca)](_0x487dbc[_0x3c9a59(0x1b5)],0x19f),_0x270b56['equal'](JSON['parse'](_0x487dbc['body'])[_0x3c9a59(0x217)],_0x24ab96);});}),test('remove',_0x1149c5=>{const _0x38cb48=_0x123b5b,_0x17dada={'UUuiR':function(_0x525b0b){return _0x525b0b();},'EtZqH':function(_0x295847){return _0x295847();},'qupXE':function(_0x4ed38d){return _0x4ed38d();},'AgvXa':_0x38cb48(0x20e),'QGORC':_0x38cb48(0x216),'WfCof':function(_0x1511fb,_0xcd184b,_0x56e977){return _0x1511fb(_0xcd184b,_0x56e977);},'tYAkZ':'should\x20not\x20throw\x20error\x20if\x20content\x20type\x20does\x20not\x20exist','ubuEb':_0x38cb48(0x1bb)};test(_0x17dada['AgvXa'],_0x28250c=>{const _0x127af7=_0x38cb48;_0x28250c[_0x127af7(0x210)](0x2);const _0x22e464=_0x17dada[_0x127af7(0x225)](Fastify),_0x5c7b26=_0x22e464[keys['kContentTypeParser']];_0x5c7b26['remove'](_0x127af7(0x1a0)),_0x28250c[_0x127af7(0x1b6)](_0x5c7b26[_0x127af7(0x1f2)]['application/json']),_0x28250c[_0x127af7(0x1b6)](_0x5c7b26[_0x127af7(0x1c3)][_0x127af7(0x1e3)](_0x20a514=>_0x20a514===_0x127af7(0x1a0)));}),test(_0x17dada[_0x38cb48(0x1e6)],_0x3f872d=>{const _0x122a46=_0x38cb48;_0x3f872d[_0x122a46(0x210)](0x2);const _0x3e6a27=_0x17dada[_0x122a46(0x225)](Fastify);_0x3e6a27[_0x122a46(0x1bc)](/^text\/*/,first);const _0x329930=_0x3e6a27[keys['kContentTypeParser']];_0x329930[_0x122a46(0x226)](/^text\/*/),_0x3f872d[_0x122a46(0x1b6)](_0x329930['customParsers'][/^text\/*/]),_0x3f872d[_0x122a46(0x1b6)](_0x329930['parserRegExpList'][_0x122a46(0x1e3)](_0x33ab6c=>_0x33ab6c[_0x122a46(0x1bf)]()===/^text\/*/[_0x122a46(0x1bf)]()));}),_0x17dada[_0x38cb48(0x1f9)](test,_0x38cb48(0x1fd),_0x316ee1=>{const _0x5e51f=_0x38cb48;_0x316ee1[_0x5e51f(0x210)](0x1);const _0x333d4b=_0x17dada[_0x5e51f(0x1d0)](Fastify);_0x316ee1[_0x5e51f(0x20a)](()=>_0x333d4b[keys['kContentTypeParser']][_0x5e51f(0x226)](0xc),FST_ERR_CTP_INVALID_TYPE);}),test(_0x17dada['tYAkZ'],_0x1522dd=>{const _0xc49e5f=_0x38cb48;_0x1522dd[_0xc49e5f(0x210)](0x1);const _0xf8d0e6=Fastify();_0x1522dd['doesNotThrow'](()=>_0xf8d0e6[keys['kContentTypeParser']][_0xc49e5f(0x226)]('image/png'));}),_0x17dada[_0x38cb48(0x1f9)](test,_0x17dada[_0x38cb48(0x203)],_0x468e59=>{const _0x59ec8e=_0x38cb48;_0x468e59[_0x59ec8e(0x210)](0x1);const _0x1ef245=_0x17dada['qupXE'](Fastify),_0x1107c6=_0x1ef245[keys[_0x59ec8e(0x1ec)]];_0x1107c6[_0x59ec8e(0x226)]('image/png'),_0x468e59['same'](_0x1107c6[_0x59ec8e(0x1f2)]['size'],0x2);}),_0x1149c5[_0x38cb48(0x20d)]();}),test('remove\x20all\x20should\x20remove\x20all\x20existing\x20parsers\x20and\x20reset\x20cache',_0x54d87e=>{const _0x27a5f1=_0x123b5b,_0x27cd52={'eXuxE':function(_0x923068){return _0x923068();}};_0x54d87e['plan'](0x4);const _0x1ed2cf=_0x27cd52[_0x27a5f1(0x1b7)](Fastify);_0x1ed2cf[_0x27a5f1(0x1bc)](_0x27a5f1(0x220),first),_0x1ed2cf[_0x27a5f1(0x1bc)](/^image\/.*/,first);const _0xf9a674=_0x1ed2cf[keys[_0x27a5f1(0x1ec)]];_0xf9a674[_0x27a5f1(0x1f5)]('application/xml'),_0xf9a674['removeAll'](),_0x54d87e[_0x27a5f1(0x1f6)](_0xf9a674['cache'][_0x27a5f1(0x21d)],0x0),_0x54d87e[_0x27a5f1(0x1f6)](_0xf9a674[_0x27a5f1(0x1c3)]['length'],0x0),_0x54d87e['same'](_0xf9a674['parserRegExpList'][_0x27a5f1(0x1e1)],0x0),_0x54d87e[_0x27a5f1(0x1f6)](Object[_0x27a5f1(0x21f)](_0xf9a674[_0x27a5f1(0x1f2)])[_0x27a5f1(0x1e1)],0x0);}),test(_0x123b5b(0x1de),async _0x45c042=>{const _0x634a85=_0x123b5b,_0x7834bc={'ZefRI':function(_0x1f1840){return _0x1f1840();},'BuYKJ':_0x634a85(0x1da)},_0x29b809=Object[_0x634a85(0x1d8)]({}[_0x634a85(0x1a8)]);_0x45c042[_0x634a85(0x210)](_0x29b809[_0x634a85(0x1e1)]);const _0x2e7750=_0x7834bc[_0x634a85(0x213)](Fastify);_0x2e7750['post']('/',async()=>{return'ok';});for(const _0x225753 of _0x29b809){const _0x3b38a7=await _0x2e7750[_0x634a85(0x211)]({'method':_0x7834bc[_0x634a85(0x1ee)],'path':'/','headers':{'content-type':_0x225753},'body':''});_0x45c042['same'](_0x3b38a7[_0x634a85(0x1b5)],0x19f);}}),test('Safeguard\x20against\x20malicious\x20content-type\x20/\x202',async _0x4698d1=>{const _0xd67c6c=_0x123b5b,_0x40ef79={'JWIRc':_0xd67c6c(0x1da)};_0x4698d1[_0xd67c6c(0x210)](0x1);const _0x53b522=Fastify();_0x53b522[_0xd67c6c(0x218)]('/',async()=>{return'ok';});const _0x1c2382=await _0x53b522['inject']({'method':_0x40ef79[_0xd67c6c(0x1cf)],'path':'/','headers':{'content-type':_0xd67c6c(0x1fb)},'body':''});_0x4698d1[_0xd67c6c(0x1f6)](_0x1c2382['statusCode'],0x19f);}),test(_0x123b5b(0x1a5),async _0x4cf28d=>{const _0x5a2db5=_0x123b5b,_0x44fd85={'jTDWV':_0x5a2db5(0x1da)};_0x4cf28d[_0x5a2db5(0x210)](0x1);const _0x58b48f=Fastify();_0x58b48f[_0x5a2db5(0x218)]('/',async()=>{return'ok';});const _0x7f9827=await _0x58b48f[_0x5a2db5(0x211)]({'method':_0x44fd85[_0x5a2db5(0x1b1)],'path':'/','headers':{'content-type':_0x5a2db5(0x1c9)},'body':''});_0x4cf28d[_0x5a2db5(0x1f6)](_0x7f9827[_0x5a2db5(0x1b5)],0x19f);});