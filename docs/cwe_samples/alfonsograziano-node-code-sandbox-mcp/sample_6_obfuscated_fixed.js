function _0x212c(){const _0x4b9349=['test@email.com','bMdGV','CDoye','mmOZy','sZmsJ','VlYWq','OUsfp','REGNG','https://site.com/blah/my-post/?action=signin&success=true#comment-123','updateMemberNewsletters','test','IaQlU','HqWxR','UtGvi','true','VHWTT','https://custom.com/redirect/','1312625onLfaV','ouvOh','https://custom.com/paid/','VcWgV','returns\x20400\x20on\x20error','redirect','Product','zoGZK','HLCqz','eql','1296576cwqrnw','Members\x20Service\x20Middleware','https://custom.com/paid','split','39874744QmnfBY','OCmSg','1301644RlUbRk','https://external.com/whatever/','should','end','qwKZJ','restore','/members','hlghv','member','init','HujDC','LfLna','Test\x20Error','stub','rejects','get','LLFnW','redirects\x20correctly\x20on\x20failure','NlRsU','LYmrt','getSubdir','tzrNa','signup','redirects\x20member\x20to\x20referrer\x20param\x20path\x20on\x20signup\x20if\x20it\x20is\x20on\x20the\x20site','hJrCH','/members?token=test&action=signup&r=https%3A%2F%2Fsite.com%2Fblah%2Fmy-post%2F','gZkyM','GuZUO','msChU','redirects\x20paid\x20member\x20to\x20custom\x20redirect\x20on\x20signup','getSiteUrl','../../../../../core/server/services/members','firstCall','signin','active','redirects\x20member\x20to\x20referrer\x20param\x20path\x20on\x20signin\x20if\x20it\x20is\x20on\x20the\x20site','/members?token=test&action=signup','writeHead','../../../../../core/server/services/members/middleware','resolves','3|0|2|1|4|5|6','tJzWB','args','WAEkr','false','jGiNs','qhXvZ','Atbid','returns\x20404\x20if\x20member\x20uuid\x20is\x20not\x20found','ssr','sinon','KnOAq','with','paTOq','ZMFfH','attempts\x20to\x20update\x20newsletters','jIOjC','json','/blah/?action=signup&success=false','Test\x20Name','redirects\x20free\x20member\x20to\x20custom\x20redirect\x20on\x20signup','HKDSh','OZTtL','Zofsr','https://site.com/blah','free','JkvzX','returns','jTXzU','6|0|4|1|5|2|3','2791272AmYRUZ','Email\x20address\x20not\x20found.','2|6|9|1|8|3|5|0|7|4','Array','api','yLzDp','NNxie','exchangeTokenForSession','GYhQU','0|2|4|3|5|1','BGtNw','CXGaw','ehhgO','BkHsT','gQliJ','urpJZ','/blah/?action=signup&success=true','BkiVt','does\x20not\x20redirect\x20to\x20referrer\x20param\x20if\x20it\x20is\x20external','/members?token=test&action=signin&r=https%3A%2F%2Fsite.com%2Fblah%2Fmy-post%2F','query','calledOnce','Lybvc','XgmAp','/blah','tIpnP','redirects\x20correctly\x20on\x20success','gOdJm','../../../../../core/shared/url-utils','url','jmBXl','stringify','createSessionFromMagicLink','/blah/?action=signin&success=true','4|5|1|3|0|2|6','5557465sMrRSU','LdIbT','3017574CTMMRm'];_0x212c=function(){return _0x4b9349;};return _0x212c();}const _0xf21fbf=_0xca7c;(function(_0xbce4da,_0x59b14d){const _0x399264=_0xca7c,_0x464138=_0xbce4da();while(!![]){try{const _0x306f99=-parseInt(_0x399264(0x1a0))/0x1+-parseInt(_0x399264(0x1b0))/0x2+-parseInt(_0x399264(0x18e))/0x3+-parseInt(_0x399264(0x1aa))/0x4+-parseInt(_0x399264(0x18c))/0x5+-parseInt(_0x399264(0x169))/0x6+parseInt(_0x399264(0x1ae))/0x7;if(_0x306f99===_0x59b14d)break;else _0x464138['push'](_0x464138['shift']());}catch(_0x4c88e9){_0x464138['push'](_0x464138['shift']());}}}(_0x212c,0xc9b7e));const should=require(_0xf21fbf(0x1b2)),sinon=require(_0xf21fbf(0x155)),urlUtils=require(_0xf21fbf(0x185)),membersService=require(_0xf21fbf(0x1cf)),membersMiddleware=require(_0xf21fbf(0x149)),models=require('../../../../../core/server/models');function _0xca7c(_0x36b1c3,_0x268d44){const _0x212c4c=_0x212c();return _0xca7c=function(_0xca7c39,_0xf713e3){_0xca7c39=_0xca7c39-0x149;let _0x1df42f=_0x212c4c[_0xca7c39];return _0x1df42f;},_0xca7c(_0x36b1c3,_0x268d44);}describe(_0xf21fbf(0x1ab),function(){const _0x204fd7=_0xf21fbf,_0x4d6bbd={'Zofsr':_0x204fd7(0x1b6),'GuZUO':_0x204fd7(0x19f),'jTXzU':_0x204fd7(0x199),'LdIbT':'signup','poToy':'https://site.com/blah/my-post/#comment-123','jmBXl':_0x204fd7(0x16b),'qwKZJ':_0x204fd7(0x1d4),'REGNG':_0x204fd7(0x1a2),'msChU':_0x204fd7(0x17c),'LfLna':_0x204fd7(0x1d1),'CTxXr':'/members?token=test&action=signin&r=https%3A%2F%2Fexternal.com%2Fwhatever%2F','tJzWB':function(_0x320a33,_0x3383ee){return _0x320a33(_0x3383ee);},'uLCKY':function(_0x5316b1,_0x512e22){return _0x5316b1(_0x512e22);},'HKDSh':'calls\x20next\x20if\x20url\x20does\x20not\x20include\x20a\x20token','BkiVt':function(_0x5aef9e,_0x39856f,_0x6b27bf){return _0x5aef9e(_0x39856f,_0x6b27bf);},'NNxie':function(_0x58690c,_0x19e213,_0x5eb66a){return _0x58690c(_0x19e213,_0x5eb66a);},'CXGaw':_0x204fd7(0x1c1),'jIOjC':_0x204fd7(0x1cd),'Atbid':_0x204fd7(0x16a),'JkvzX':_0x204fd7(0x14b),'yLzDp':_0x204fd7(0x1c3),'BGtNw':_0x204fd7(0x18f),'OCmSg':_0x204fd7(0x164),'hlghv':'0|2|4|1|5|3|6','KnOAq':'Failed\x20to\x20update\x20newsletters','mmOZy':function(_0x4b1572,_0x89c067){return _0x4b1572!==_0x89c067;},'VlYWq':_0x204fd7(0x1a1),'VHWTT':function(_0x232638,_0x6a627f){return _0x232638(_0x6a627f);},'GYhQU':function(_0x2e7aeb,_0x24e07b,_0x3b4c45){return _0x2e7aeb(_0x24e07b,_0x3b4c45);},'paTOq':_0x204fd7(0x15a),'sZmsJ':_0x204fd7(0x198)};describe('createSessionFromMagicLink',function(){const _0x999339=_0x204fd7,_0x3d6f36={'fCYeI':_0x4d6bbd[_0x999339(0x187)],'XgmAp':_0x999339(0x163),'HLCqz':_0x999339(0x181),'OUsfp':'test','qhXvZ':_0x999339(0x1d2),'VcWgV':_0x999339(0x1c2),'wLAJA':_0x999339(0x18b),'IaQlU':_0x4d6bbd[_0x999339(0x1b4)],'OZTtL':_0x999339(0x1c6),'gQliJ':_0x999339(0x15d),'HujDC':_0x4d6bbd[_0x999339(0x196)],'urpJZ':_0x999339(0x197),'nlekL':_0x4d6bbd[_0x999339(0x1cc)],'tIpnP':_0x999339(0x168),'zoGZK':_0x4d6bbd[_0x999339(0x1bb)],'tPjvk':_0x999339(0x18a),'LLFnW':_0x4d6bbd['CTxXr']};let _0x4d6a70,_0x215763,_0x268ca6,_0x3e2310,_0x1825cf;_0x4d6bbd['tJzWB'](before,function(){const _0x4dd97f=_0x999339;models[_0x4dd97f(0x1b9)]();}),_0x4d6bbd[_0x999339(0x14c)](beforeEach,function(){const _0x3f802e=_0x999339,_0x47a005=_0x3d6f36['fCYeI'][_0x3f802e(0x1ad)]('|');let _0x4bd1ea=0x0;while(!![]){switch(_0x47a005[_0x4bd1ea++]){case'0':models[_0x3f802e(0x1a6)]={'findOne':sinon[_0x3f802e(0x1bd)]()};continue;case'1':_0x3e2310[_0x3f802e(0x1a5)]=sinon['stub']()[_0x3f802e(0x166)]('');continue;case'2':_0x268ca6={};continue;case'3':membersService[_0x3f802e(0x154)]={'exchangeTokenForSession':sinon[_0x3f802e(0x1bd)]()};continue;case'4':sinon[_0x3f802e(0x1bd)](urlUtils,_0x3f802e(0x1ce))['returns'](_0x3d6f36[_0x3f802e(0x180)]);continue;case'5':_0x215763=models['Product'];continue;case'6':_0x3e2310={};continue;case'7':sinon[_0x3f802e(0x1bd)](urlUtils,'getSubdir')[_0x3f802e(0x166)](_0x3f802e(0x181));continue;case'8':_0x4d6a70=membersService[_0x3f802e(0x154)];continue;case'9':_0x1825cf=sinon[_0x3f802e(0x1bd)]();continue;}break;}}),_0x4d6bbd['uLCKY'](afterEach,function(){const _0x5b6c64=_0x999339,_0x150048={'gOdJm':_0x3d6f36[_0x5b6c64(0x1a8)]};_0x5b6c64(0x159)!=='NsKyM'?(membersService[_0x5b6c64(0x154)]=_0x4d6a70,models[_0x5b6c64(0x1a6)]=_0x215763,sinon['restore']()):(_0x3111d0={},_0x149dab={},_0xf2c246=_0x328292[_0x5b6c64(0x1bd)](),_0x28829f[_0x5b6c64(0x1a5)]=_0x2233fb[_0x5b6c64(0x1bd)]()[_0x5b6c64(0x166)](''),_0x2d43df=_0x4bbc10['ssr'],_0x38e8db['ssr']={'exchangeTokenForSession':_0x191b52[_0x5b6c64(0x1bd)]()},_0x30f006=_0xfc4243['Product'],_0x4df2ca[_0x5b6c64(0x1a6)]={'findOne':_0x3c321a[_0x5b6c64(0x1bd)]()},_0x51d418['stub'](_0x24abdd,_0x5b6c64(0x1c4))[_0x5b6c64(0x166)](_0x150048[_0x5b6c64(0x184)]),_0x1a39ae[_0x5b6c64(0x1bd)](_0x3dd532,_0x5b6c64(0x1ce))[_0x5b6c64(0x166)]('https://site.com/blah'));}),it(_0x4d6bbd[_0x999339(0x160)],async function(){const _0x4bdd52=_0x999339;_0x268ca6[_0x4bdd52(0x186)]=_0x4d6bbd[_0x4bdd52(0x162)],_0x268ca6[_0x4bdd52(0x17d)]={},await membersMiddleware['createSessionFromMagicLink'](_0x268ca6,_0x3e2310,_0x1825cf),_0x1825cf['calledOnce'][_0x4bdd52(0x1b2)]['be'][_0x4bdd52(0x19d)](),_0x1825cf[_0x4bdd52(0x1d0)][_0x4bdd52(0x14d)]['should']['be']['an'][_0x4bdd52(0x16c)]()[_0x4bdd52(0x157)]['lengthOf'](0x0);}),_0x4d6bbd[_0x999339(0x17a)](it,_0x999339(0x183),async function(){const _0x5b9874=_0x999339;_0x268ca6[_0x5b9874(0x186)]=_0x5b9874(0x1d4),_0x268ca6[_0x5b9874(0x17d)]={'token':_0x3d6f36[_0x5b9874(0x195)],'action':_0x5b9874(0x1c6)},membersService['ssr']['exchangeTokenForSession'][_0x5b9874(0x14a)]({'subscriptions':[{'status':_0x3d6f36[_0x5b9874(0x151)],'tier':{'welcome_page_url':''}}]}),await membersMiddleware['createSessionFromMagicLink'](_0x268ca6,_0x3e2310,_0x1825cf),_0x1825cf[_0x5b9874(0x17e)][_0x5b9874(0x1b2)]['be'][_0x5b9874(0x14f)](),_0x3e2310[_0x5b9874(0x1a5)]['calledOnce'][_0x5b9874(0x1b2)]['be']['true'](),_0x3e2310['redirect'][_0x5b9874(0x1d0)][_0x5b9874(0x14d)][0x0]['should'][_0x5b9874(0x1a9)](_0x5b9874(0x179));}),_0x4d6bbd['NNxie'](it,_0x4d6bbd[_0x999339(0x174)],async function(){const _0x4db347=_0x999339;if('NlRsU'!==_0x3d6f36[_0x4db347(0x1a3)])_0x100a9f[_0x4db347(0x1b5)]();else{const _0x1b272e=_0x3d6f36['wLAJA'][_0x4db347(0x1ad)]('|');let _0xe5fb69=0x0;while(!![]){switch(_0x1b272e[_0xe5fb69++]){case'0':_0x1825cf[_0x4db347(0x17e)][_0x4db347(0x1b2)]['be'][_0x4db347(0x14f)]();continue;case'1':membersService[_0x4db347(0x154)][_0x4db347(0x170)][_0x4db347(0x1be)]();continue;case'2':_0x3e2310[_0x4db347(0x1a5)]['calledOnce'][_0x4db347(0x1b2)]['be'][_0x4db347(0x19d)]();continue;case'3':await membersMiddleware[_0x4db347(0x189)](_0x268ca6,_0x3e2310,_0x1825cf);continue;case'4':_0x268ca6['url']=_0x3d6f36[_0x4db347(0x19a)];continue;case'5':_0x268ca6[_0x4db347(0x17d)]={'token':_0x3d6f36[_0x4db347(0x195)],'action':_0x3d6f36[_0x4db347(0x161)]};continue;case'6':_0x3e2310['redirect'][_0x4db347(0x1d0)][_0x4db347(0x14d)][0x0][_0x4db347(0x1b2)][_0x4db347(0x1a9)](_0x3d6f36[_0x4db347(0x177)]);continue;}break;}}}),_0x4d6bbd[_0x999339(0x17a)](it,_0x999339(0x15f),async function(){const _0x408a26=_0x999339,_0x2b08f1={'jGiNs':_0x4d6bbd[_0x408a26(0x1cb)]};_0x268ca6[_0x408a26(0x186)]=_0x408a26(0x1d4),_0x268ca6['query']={'token':_0x4d6bbd[_0x408a26(0x167)],'action':_0x4d6bbd[_0x408a26(0x18d)]},membersService[_0x408a26(0x154)]['exchangeTokenForSession']['resolves']({}),models['Product']['findOne']['resolves']({'get':()=>{const _0x48f81b=_0x408a26;return _0x2b08f1[_0x48f81b(0x150)];}}),await membersMiddleware[_0x408a26(0x189)](_0x268ca6,_0x3e2310,_0x1825cf),_0x1825cf['calledOnce'][_0x408a26(0x1b2)]['be'][_0x408a26(0x14f)](),_0x3e2310[_0x408a26(0x1a5)][_0x408a26(0x17e)]['should']['be']['true'](),_0x3e2310[_0x408a26(0x1a5)]['firstCall'][_0x408a26(0x14d)][0x0][_0x408a26(0x1b2)][_0x408a26(0x1a9)](_0x408a26(0x19f));}),it(_0x4d6bbd[_0x999339(0x15b)],async function(){const _0x1834fb=_0x999339;_0x268ca6[_0x1834fb(0x186)]='/members?token=test&action=signup',_0x268ca6[_0x1834fb(0x17d)]={'token':_0x3d6f36[_0x1834fb(0x195)],'action':_0x1834fb(0x1c6)},membersService['ssr']['exchangeTokenForSession'][_0x1834fb(0x14a)]({'subscriptions':[{'status':_0x1834fb(0x1d2),'tier':{'welcome_page_url':_0x1834fb(0x1ac)}}]}),await membersMiddleware['createSessionFromMagicLink'](_0x268ca6,_0x3e2310,_0x1825cf),_0x1825cf['calledOnce'][_0x1834fb(0x1b2)]['be']['false'](),_0x3e2310[_0x1834fb(0x1a5)][_0x1834fb(0x17e)][_0x1834fb(0x1b2)]['be']['true'](),_0x3e2310[_0x1834fb(0x1a5)]['firstCall'][_0x1834fb(0x14d)][0x0][_0x1834fb(0x1b2)][_0x1834fb(0x1a9)](_0x3d6f36[_0x1834fb(0x1ba)]);}),it(_0x999339(0x1d3),async function(){const _0x4e2554=_0x999339,_0x1101e9='5|1|2|0|4|6|3'[_0x4e2554(0x1ad)]('|');let _0x4193dc=0x0;while(!![]){switch(_0x1101e9[_0x4193dc++]){case'0':await membersMiddleware[_0x4e2554(0x189)](_0x268ca6,_0x3e2310,_0x1825cf);continue;case'1':_0x268ca6[_0x4e2554(0x17d)]={'token':_0x3d6f36[_0x4e2554(0x195)],'action':_0x4e2554(0x1d1),'r':'https://site.com/blah/my-post/#comment-123'};continue;case'2':membersService[_0x4e2554(0x154)][_0x4e2554(0x170)][_0x4e2554(0x14a)]({});continue;case'3':_0x3e2310['redirect'][_0x4e2554(0x1d0)][_0x4e2554(0x14d)][0x0][_0x4e2554(0x1b2)][_0x4e2554(0x1a9)](_0x3d6f36[_0x4e2554(0x178)]);continue;case'4':_0x1825cf[_0x4e2554(0x17e)][_0x4e2554(0x1b2)]['be'][_0x4e2554(0x14f)]();continue;case'5':_0x268ca6['url']=_0x3d6f36['nlekL'];continue;case'6':_0x3e2310[_0x4e2554(0x1a5)][_0x4e2554(0x17e)][_0x4e2554(0x1b2)]['be'][_0x4e2554(0x19d)]();continue;}break;}}),it(_0x999339(0x1c7),async function(){const _0x199669=_0x999339;_0x268ca6['url']=_0x199669(0x1c9),_0x268ca6[_0x199669(0x17d)]={'token':_0x4d6bbd[_0x199669(0x167)],'action':_0x4d6bbd[_0x199669(0x18d)],'r':_0x4d6bbd['poToy']},membersService[_0x199669(0x154)][_0x199669(0x170)]['resolves']({}),await membersMiddleware['createSessionFromMagicLink'](_0x268ca6,_0x3e2310,_0x1825cf),_0x1825cf['calledOnce'][_0x199669(0x1b2)]['be'][_0x199669(0x14f)](),_0x3e2310['redirect']['calledOnce'][_0x199669(0x1b2)]['be']['true'](),_0x3e2310[_0x199669(0x1a5)][_0x199669(0x1d0)][_0x199669(0x14d)][0x0][_0x199669(0x1b2)][_0x199669(0x1a9)]('https://site.com/blah/my-post/?action=signup&success=true#comment-123');}),it(_0x999339(0x17b),async function(){const _0x44720e=_0x999339,_0x3d21a3=_0x3d6f36[_0x44720e(0x182)][_0x44720e(0x1ad)]('|');let _0x1301b8=0x0;while(!![]){switch(_0x3d21a3[_0x1301b8++]){case'0':_0x268ca6[_0x44720e(0x17d)]={'token':_0x3d6f36[_0x44720e(0x195)],'action':_0x3d6f36[_0x44720e(0x1a7)],'r':_0x44720e(0x1b1)};continue;case'1':await membersMiddleware[_0x44720e(0x189)](_0x268ca6,_0x3e2310,_0x1825cf);continue;case'2':_0x3e2310[_0x44720e(0x1a5)][_0x44720e(0x17e)][_0x44720e(0x1b2)]['be']['true']();continue;case'3':_0x3e2310['redirect'][_0x44720e(0x1d0)][_0x44720e(0x14d)][0x0][_0x44720e(0x1b2)]['eql'](_0x3d6f36['tPjvk']);continue;case'4':membersService[_0x44720e(0x154)]['exchangeTokenForSession'][_0x44720e(0x14a)]({});continue;case'5':_0x1825cf['calledOnce'][_0x44720e(0x1b2)]['be'][_0x44720e(0x14f)]();continue;case'6':_0x268ca6[_0x44720e(0x186)]=_0x3d6f36[_0x44720e(0x1c0)];continue;}break;}});}),_0x4d6bbd[_0x204fd7(0x16f)](describe,_0x4d6bbd[_0x204fd7(0x193)],function(){const _0x3250ba=_0x204fd7,_0x1da6c6={'gQQzx':_0x4d6bbd[_0x3250ba(0x152)],'YXZJe':'https://custom.com/redirect/','UtGvi':_0x3250ba(0x1c5),'HqWxR':_0x4d6bbd[_0x3250ba(0x165)],'Lybvc':_0x3250ba(0x16d),'BkHsT':_0x4d6bbd[_0x3250ba(0x16e)],'gZkyM':_0x4d6bbd[_0x3250ba(0x173)],'hJrCH':_0x3250ba(0x15e),'CDoye':_0x4d6bbd[_0x3250ba(0x1af)],'bMdGV':_0x4d6bbd[_0x3250ba(0x1b7)],'ehhgO':_0x4d6bbd[_0x3250ba(0x156)]};if(_0x4d6bbd[_0x3250ba(0x192)](_0x4d6bbd[_0x3250ba(0x194)],_0x3250ba(0x14e))){let _0x10b6cb,_0x3b096c;_0x4d6bbd[_0x3250ba(0x14c)](before,function(){const _0xd3b6f0=_0x3250ba;models[_0xd3b6f0(0x1b9)]();}),beforeEach(function(){const _0x12d681=_0x3250ba;_0x10b6cb={'body':{'newsletters':[],'enable_comment_notifications':null}},_0x3b096c={'writeHead':sinon[_0x12d681(0x1bd)](),'end':sinon[_0x12d681(0x1bd)]()};}),_0x4d6bbd[_0x3250ba(0x19e)](afterEach,function(){sinon['restore']();}),it('returns\x20404\x20if\x20no\x20member\x20uuid\x20is\x20part\x20of\x20the\x20request',async function(){const _0xcfe483=_0x3250ba,_0x47f0a1=_0xcfe483(0x172)[_0xcfe483(0x1ad)]('|');let _0x2c7817=0x0;while(!![]){switch(_0x47f0a1[_0x2c7817++]){case'0':_0x10b6cb[_0xcfe483(0x17d)]={};continue;case'1':_0x3b096c[_0xcfe483(0x1b3)][_0xcfe483(0x1d0)]['args'][0x0][_0xcfe483(0x1b2)][_0xcfe483(0x1a9)](_0x1da6c6['gQQzx']);continue;case'2':await membersMiddleware[_0xcfe483(0x198)](_0x10b6cb,_0x3b096c);continue;case'3':_0x3b096c['writeHead'][_0xcfe483(0x1d0)][_0xcfe483(0x14d)][0x0][_0xcfe483(0x1b2)]['eql'](0x194);continue;case'4':_0x3b096c[_0xcfe483(0x1d5)][_0xcfe483(0x17e)][_0xcfe483(0x1b2)]['be'][_0xcfe483(0x19d)]();continue;case'5':_0x3b096c[_0xcfe483(0x1b3)][_0xcfe483(0x17e)]['should']['be'][_0xcfe483(0x19d)]();continue;}break;}}),_0x4d6bbd['NNxie'](it,_0x3250ba(0x153),async function(){const _0x5e4a92=_0x3250ba;if(_0x1da6c6[_0x5e4a92(0x19c)]!==_0x5e4a92(0x1c5))return _0x1da6c6['YXZJe'];else{const _0x5bfc05=_0x1da6c6[_0x5e4a92(0x19b)][_0x5e4a92(0x1ad)]('|');let _0x1c7a1f=0x0;while(!![]){switch(_0x5bfc05[_0x1c7a1f++]){case'0':sinon['stub'](membersService,_0x1da6c6[_0x5e4a92(0x17f)])[_0x5e4a92(0x1bf)](()=>{const _0x8c2c5f=_0x5e4a92;return{'members':{'get':sinon['stub']()[_0x8c2c5f(0x14a)]()}};});continue;case'1':_0x3b096c[_0x5e4a92(0x1d5)]['calledOnce'][_0x5e4a92(0x1b2)]['be'][_0x5e4a92(0x19d)]();continue;case'2':await membersMiddleware[_0x5e4a92(0x198)](_0x10b6cb,_0x3b096c);continue;case'3':_0x10b6cb[_0x5e4a92(0x17d)]={'uuid':_0x5e4a92(0x199)};continue;case'4':_0x3b096c[_0x5e4a92(0x1d5)][_0x5e4a92(0x1d0)][_0x5e4a92(0x14d)][0x0][_0x5e4a92(0x1b2)][_0x5e4a92(0x1a9)](0x194);continue;case'5':_0x3b096c[_0x5e4a92(0x1b3)][_0x5e4a92(0x17e)][_0x5e4a92(0x1b2)]['be'][_0x5e4a92(0x19d)]();continue;case'6':_0x3b096c['end']['firstCall'][_0x5e4a92(0x14d)][0x0][_0x5e4a92(0x1b2)][_0x5e4a92(0x1a9)](_0x5e4a92(0x16a));continue;}break;}}}),_0x4d6bbd[_0x3250ba(0x171)](it,_0x4d6bbd[_0x3250ba(0x158)],async function(){const _0x1733c2=_0x3250ba;_0x3b096c[_0x1733c2(0x15c)]=sinon[_0x1733c2(0x1bd)](),_0x10b6cb[_0x1733c2(0x1b8)]={'id':_0x1733c2(0x199),'email':_0x1da6c6[_0x1733c2(0x1ca)],'name':_0x1da6c6[_0x1733c2(0x1c8)],'newsletters':[],'enable_comment_notifications':![],'status':_0x1da6c6[_0x1733c2(0x191)]},sinon['stub'](membersService,_0x1733c2(0x16d))[_0x1733c2(0x1bf)](()=>{const _0x24b871=_0x1733c2;if('LYmrt'!==_0x1da6c6[_0x24b871(0x176)])_0x45f241[_0x24b871(0x1b9)]();else return{'members':{'update':sinon[_0x24b871(0x1bd)]()['resolves']({..._0x10b6cb['member'],'toJSON':()=>JSON[_0x24b871(0x188)](_0x10b6cb[_0x24b871(0x1b8)])})}};}),await membersMiddleware[_0x1733c2(0x198)](_0x10b6cb,_0x3b096c),_0x3b096c[_0x1733c2(0x15c)][_0x1733c2(0x17e)]['should']['be'][_0x1733c2(0x19d)]();}),it(_0x3250ba(0x1a4),async function(){const _0x38ce99=_0x3250ba,_0x20acb0=_0x1da6c6[_0x38ce99(0x190)][_0x38ce99(0x1ad)]('|');let _0x46364d=0x0;while(!![]){switch(_0x20acb0[_0x46364d++]){case'0':_0x10b6cb['member']={'id':undefined,'email':'test@email.com','name':_0x1da6c6[_0x38ce99(0x1c8)],'newsletters':[],'enable_comment_notifications':![],'status':_0x1da6c6[_0x38ce99(0x191)]};continue;case'1':_0x3b096c[_0x38ce99(0x1d5)][_0x38ce99(0x17e)]['should']['be'][_0x38ce99(0x19d)]();continue;case'2':sinon[_0x38ce99(0x1bd)](membersService,_0x38ce99(0x16d))[_0x38ce99(0x1bf)](()=>{const _0xec71a5=_0x38ce99;return{'members':{'update':sinon[_0xec71a5(0x1bd)]()[_0xec71a5(0x1be)](new Error(_0xec71a5(0x1bc)))}};});continue;case'3':_0x3b096c[_0x38ce99(0x1b3)][_0x38ce99(0x17e)][_0x38ce99(0x1b2)]['be']['true']();continue;case'4':await membersMiddleware[_0x38ce99(0x198)](_0x10b6cb,_0x3b096c);continue;case'5':_0x3b096c[_0x38ce99(0x1d5)]['firstCall']['args'][0x0][_0x38ce99(0x1b2)][_0x38ce99(0x1a9)](0x190);continue;case'6':_0x3b096c[_0x38ce99(0x1b3)][_0x38ce99(0x1d0)]['args'][0x0][_0x38ce99(0x1b2)][_0x38ce99(0x1a9)](_0x1da6c6[_0x38ce99(0x175)]);continue;}break;}});}else _0x3df652[_0x3250ba(0x1b9)]();});});