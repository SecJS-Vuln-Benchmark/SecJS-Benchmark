const _0x4f42de=_0x29b4;(function(_0x24b7b1,_0x3d375f){const _0x48b5c2=_0x29b4,_0x56c897=_0x24b7b1();while(!![]){try{const _0x943184=-parseInt(_0x48b5c2(0x152))/0x1*(parseInt(_0x48b5c2(0x162))/0x2)+parseInt(_0x48b5c2(0x173))/0x3+-parseInt(_0x48b5c2(0x16d))/0x4*(-parseInt(_0x48b5c2(0x15a))/0x5)+-parseInt(_0x48b5c2(0x169))/0x6*(parseInt(_0x48b5c2(0x166))/0x7)+parseInt(_0x48b5c2(0x159))/0x8+parseInt(_0x48b5c2(0x140))/0x9+-parseInt(_0x48b5c2(0x18b))/0xa;if(_0x943184===_0x3d375f)break;else _0x56c897['push'](_0x56c897['shift']());}catch(_0x32746c){_0x56c897['push'](_0x56c897['shift']());}}}(_0x119f,0x6972d));const tpl=require(_0x4f42de(0x13a)),errors=require(_0x4f42de(0x18f)),{EmailAddressParser}=require('@tryghost/email-addresses'),logging=require(_0x4f42de(0x18e)),messages={'incorrectKeyType':_0x4f42de(0x184)};function _0x119f(){const _0x56eff2=['DlbOH','fHrpS','PCpgw','secret_key','oIorC','IncorrectUsageError','guhNf','labs','type\x20must\x20be\x20one\x20of\x20\x22direct\x22\x20or\x20\x22connect\x22.','stringify','getDefaultEmail','isMembersInviteOnly','noreply@','UuLGV','match','7419380uQFvIJ','URXyk','members_signup_access','@tryghost/logging','@tryghost/errors','tqOdN','config','none','@tryghost/tpl','ezAhu','portal_plans','connect_','length','stripeDirect','6407010aXVzkm','urlFor','scbUz','publishable_key','connect','all','direct','EnKhj','BeYln','GxREx','aYprd','gSCgT','Missing\x20mail.from\x20config,\x20falling\x20back\x20to\x20a\x20generated\x20email\x20address.\x20Please\x20update\x20your\x20config\x20file\x20and\x20set\x20a\x20valid\x20from\x20address','hostSettings:managedEmail:sendingDomain','kvRZu','getActiveStripeKeys','get','hostSettings:managedEmail:enabled','9587tlhCXM','free','arePaidMembersEnabled','isMembersEnabled','pVFLP','^https?://([^/:?#]+)(?:[/:?#]|$)','firstpromoter_id','23480IhOyFD','5STcuQL','getNoReplyAddress','stripe_','gYVfH','indexOf','getMembersSupportAddress','getStripeKeys','useNewEmailAddresses','138llIKgF','settingsCache','getDefaultEmailAddress','isStripeConnected','19201DvTwGG','invite','BEOfM','258mjjyvk','substring','includes','members_email_auth_secret','1944604VGWovK','EqIDl','getLegacyNoReplyAddress','getDefaultEmailDomain','zBLBb','urlUtils','2256993FbRpaj','home','www.','mail:from','warn','pNhvg','exports','firstpromoter','incorrectKeyType'];_0x119f=function(){return _0x56eff2;};return _0x119f();}class SettingsHelpers{constructor({settingsCache:_0xca4f7f,urlUtils:_0x3e9eee,config:_0x44236d,labs:_0x1a1d45}){const _0x1fdc00=_0x4f42de;this['settingsCache']=_0xca4f7f,this['urlUtils']=_0x3e9eee,this[_0x1fdc00(0x138)]=_0x44236d,this[_0x1fdc00(0x183)]=_0x1a1d45;}[_0x4f42de(0x155)](){const _0x5945b7=_0x4f42de,_0x2b8d5a={'EnKhj':function(_0x23c7ab,_0x50a209){return _0x23c7ab!==_0x50a209;},'MeVYN':_0x5945b7(0x18d),'URXyk':_0x5945b7(0x139)};return _0x2b8d5a[_0x5945b7(0x147)](this[_0x5945b7(0x163)]['get'](_0x2b8d5a['MeVYN']),_0x2b8d5a[_0x5945b7(0x18c)]);}[_0x4f42de(0x187)](){const _0x1b87a8=_0x4f42de,_0x3afd16={'ezAhu':function(_0xdeae55,_0x3792b3){return _0xdeae55===_0x3792b3;},'gYVfH':_0x1b87a8(0x167)};return _0x3afd16[_0x1b87a8(0x13b)](this[_0x1b87a8(0x163)][_0x1b87a8(0x150)](_0x1b87a8(0x18d)),_0x3afd16[_0x1b87a8(0x15d)]);}['allowSelfSignup'](){const _0x3d5494=_0x4f42de,_0x4c6dc8={'PCpgw':_0x3d5494(0x18d),'pNhvg':_0x3d5494(0x145),'BEOfM':_0x3d5494(0x13c),'pVFLP':_0x3d5494(0x153)};return this[_0x3d5494(0x163)][_0x3d5494(0x150)](_0x4c6dc8[_0x3d5494(0x17e)])===_0x4c6dc8[_0x3d5494(0x178)]&&(this[_0x3d5494(0x163)][_0x3d5494(0x150)](_0x4c6dc8[_0x3d5494(0x168)])[_0x3d5494(0x16b)](_0x4c6dc8[_0x3d5494(0x156)])||!this[_0x3d5494(0x154)]());}[_0x4f42de(0x160)](_0x3adddc){const _0xa49d6e=_0x4f42de,_0x5e81f1={'kvRZu':function(_0x542833,_0x493fef){return _0x542833!==_0x493fef;},'guhNf':_0xa49d6e(0x17d),'aYprd':function(_0x36c936,_0xee374){return _0x36c936(_0xee374);},'DlbOH':_0xa49d6e(0x144),'scbUz':function(_0x44a4d5,_0xef62f8){return _0x44a4d5===_0xef62f8;},'oIorC':function(_0xb79ef4,_0x1da5eb){return _0xb79ef4||_0x1da5eb;}};if(_0x3adddc!==_0xa49d6e(0x146)&&_0x5e81f1['kvRZu'](_0x3adddc,_0xa49d6e(0x144))){if(_0x5e81f1[_0xa49d6e(0x14e)](_0x5e81f1['guhNf'],_0x5e81f1[_0xa49d6e(0x182)]))return this[_0xa49d6e(0x160)]('direct');else throw new errors[(_0xa49d6e(0x181))]({'message':_0x5e81f1[_0xa49d6e(0x14a)](tpl,messages[_0xa49d6e(0x17b)])});}const _0x1fe1e5=this[_0xa49d6e(0x163)][_0xa49d6e(0x150)]('stripe_'+(_0x3adddc===_0x5e81f1[_0xa49d6e(0x17c)]?'connect_':'')+_0xa49d6e(0x17f)),_0x226b31=this[_0xa49d6e(0x163)][_0xa49d6e(0x150)](_0xa49d6e(0x15c)+(_0x5e81f1[_0xa49d6e(0x142)](_0x3adddc,_0x5e81f1[_0xa49d6e(0x17c)])?_0xa49d6e(0x13d):'')+_0xa49d6e(0x143));if(_0x5e81f1[_0xa49d6e(0x180)](!_0x1fe1e5,!_0x226b31))return null;return{'secretKey':_0x1fe1e5,'publicKey':_0x226b31};}[_0x4f42de(0x14f)](){const _0x55f6c1=_0x4f42de,_0x38face={'flcta':_0x55f6c1(0x146)},_0x521e82=this['config']['get'](_0x55f6c1(0x13f));if(_0x521e82)return this[_0x55f6c1(0x160)](_0x38face['flcta']);const _0x22d193=this[_0x55f6c1(0x160)](_0x55f6c1(0x144));if(!_0x22d193)return this[_0x55f6c1(0x160)](_0x38face['flcta']);return _0x22d193;}['isStripeConnected'](){const _0x54ca38=_0x4f42de;return this[_0x54ca38(0x14f)]()!==null;}['arePaidMembersEnabled'](){const _0x4c45fc=_0x4f42de;return this[_0x4c45fc(0x155)]()&&this[_0x4c45fc(0x165)]();}['getFirstpromoterId'](){const _0x449d19=_0x4f42de,_0x3dfc29={'gSCgT':_0x449d19(0x158)};if(!this[_0x449d19(0x163)][_0x449d19(0x150)](_0x449d19(0x17a)))return null;return this[_0x449d19(0x163)]['get'](_0x3dfc29[_0x449d19(0x14b)]);}['getDefaultEmailDomain'](){const _0x5797d1=_0x4f42de,_0x28faee={'EqIDl':_0x5797d1(0x175)};if(this.#managedEmailEnabled()){const _0x4bec81=this.#managedSendingDomain();if(_0x4bec81)return _0x4bec81;}const _0x122924=this[_0x5797d1(0x172)][_0x5797d1(0x141)](_0x5797d1(0x174),!![])[_0x5797d1(0x18a)](new RegExp(_0x5797d1(0x157),'i')),_0xb09ef8=_0x122924&&_0x122924[0x1]||'';if(_0xb09ef8['startsWith'](_0x28faee[_0x5797d1(0x16e)]))return _0xb09ef8[_0x5797d1(0x16a)](_0x28faee['EqIDl'][_0x5797d1(0x13e)]);return _0xb09ef8;}['getMembersValidationKey'](){const _0xdad5a0=_0x4f42de,_0x1295f2={'UuLGV':_0xdad5a0(0x16c)};return this[_0xdad5a0(0x163)]['get'](_0x1295f2[_0xdad5a0(0x189)]);}[_0x4f42de(0x15f)](){const _0x49466c=_0x4f42de,_0x683403={'zBLBb':'members_support_address','WAsSa':function(_0x2b0f7c,_0x1fcb85){return _0x2b0f7c||_0x1fcb85;},'BeYln':'noreply','GxREx':function(_0x4f2643,_0x50a55b){return _0x4f2643<_0x50a55b;}};let _0x574960=this['settingsCache']['get'](_0x683403[_0x49466c(0x171)]);if(!_0x574960&&this['useNewEmailAddresses']())return EmailAddressParser[_0x49466c(0x185)](this[_0x49466c(0x186)]());_0x574960=_0x683403['WAsSa'](_0x574960,_0x683403[_0x49466c(0x148)]);if(_0x683403[_0x49466c(0x149)](_0x574960[_0x49466c(0x15e)]('@'),0x0))return _0x574960+'@'+this[_0x49466c(0x170)]();return _0x574960;}[_0x4f42de(0x15b)](){const _0x5b1766=_0x4f42de;return this[_0x5b1766(0x164)]();}['getDefaultEmailAddress'](){const _0x275d1a=_0x4f42de;return this[_0x275d1a(0x186)]()['address'];}[_0x4f42de(0x186)](){const _0x2fe8aa=_0x4f42de;if(this['useNewEmailAddresses']()){const _0x1e6f5a=this['config'][_0x2fe8aa(0x150)](_0x2fe8aa(0x176)),_0x53ace3=EmailAddressParser['parse'](_0x1e6f5a);if(_0x53ace3)return _0x53ace3;logging[_0x2fe8aa(0x177)](_0x2fe8aa(0x14c));}return{'address':this['getLegacyNoReplyAddress']()};}[_0x4f42de(0x16f)](){const _0x3c3ad0=_0x4f42de;return _0x3c3ad0(0x188)+this['getDefaultEmailDomain']();}['areDonationsEnabled'](){const _0x3faf7d=_0x4f42de;return this[_0x3faf7d(0x165)]();}[_0x4f42de(0x161)](){const _0x177094=_0x4f42de,_0x4611f7={'GjaLy':'newEmailAddresses'};return this.#managedEmailEnabled()||this[_0x177094(0x183)]['isSet'](_0x4611f7['GjaLy']);}#managedEmailEnabled(){const _0x16f1f9=_0x4f42de,_0x261cf1={'tqOdN':_0x16f1f9(0x151)};return!!this[_0x16f1f9(0x138)][_0x16f1f9(0x150)](_0x261cf1[_0x16f1f9(0x190)]);}#managedSendingDomain(){const _0x224611=_0x4f42de;return this[_0x224611(0x138)][_0x224611(0x150)](_0x224611(0x14d));}}function _0x29b4(_0x1b0467,_0x3a2c90){const _0x119fbc=_0x119f();return _0x29b4=function(_0x29b488,_0x4f9b71){_0x29b488=_0x29b488-0x138;let _0x542af4=_0x119fbc[_0x29b488];return _0x542af4;},_0x29b4(_0x1b0467,_0x3a2c90);}module[_0x4f42de(0x179)]=SettingsHelpers;