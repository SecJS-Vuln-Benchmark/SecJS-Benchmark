function _0x18c0(){const _0x24ed24=['FJgeM','authenticationtest@email.com','bGNfb','AKRaV','xDxkf','00000000-0000-0000-0000-000000000000','hNRqP','Throws\x20for\x20nonexisting\x20post','getMembersAPIAgent','uuid','79332TxIMsN','145AdfZUm','&key=1234','Can\x20change\x20existing\x20feedback','Validation','useFakeTimers','score','DtNgZ','findOne','abc123dontstealme','stub','MemberFeedback','matchBodySnapshot','sPrCb','&key=','getTime','2213367UIqopP','get','87uYhXqf','digest','assert/strict','feedback','update','crypto','Throws\x20for\x20nonexisting\x20uuid','../../utils/e2e-framework','CpDvO','sinon','expectStatus','650993DmpyHD','Allows\x20authentication\x20via\x20uuid\x20(+\x20key)','getMembersValidationKey','loginAs','jKcYX','Throws\x20for\x20invalid\x20score\x20type','sCuOR','WJaNd','post','RvZQh','equal','posts','../../../core/server/models','3890814gxhsSL','hex','body','EuOWN','TAqZd','HZyei','HOwuS','11621448TLJgxl','/api/feedback/','/api/feedback/?uuid=','init','updated_at','members','matchHeaderSnapshot','ZRnhA','Can\x20add\x20positive\x20feedback','createHmac','tick','nMspD','/api/feedback/?uuid=1234','../../../core/server/services/settings-helpers','3946616hfiZSj','20782XGUxwu','text','sha256','biwXx','rZwEG','MvOvU','returns','Throws\x20for\x20invalid\x20uuid','duplicate','Mblwg','Throws\x20for\x20invalid\x20score'];_0x18c0=function(){return _0x24ed24;};return _0x18c0();}const _0xba9b2d=_0x458c;function _0x458c(_0x28dd2f,_0x49aa41){const _0x18c09e=_0x18c0();return _0x458c=function(_0x458c35,_0xd06d0b){_0x458c35=_0x458c35-0x84;let _0x69e587=_0x18c09e[_0x458c35];return _0x69e587;},_0x458c(_0x28dd2f,_0x49aa41);}(function(_0x589bdd,_0x31e46d){const _0x31ad96=_0x458c,_0x32d9eb=_0x589bdd();while(!![]){try{const _0x20f2aa=parseInt(_0x31ad96(0xc3))/0x1*(parseInt(_0x31ad96(0x9c))/0x2)+-parseInt(_0x31ad96(0xc1))/0x3+-parseInt(_0x31ad96(0xb1))/0x4*(-parseInt(_0x31ad96(0xb2))/0x5)+parseInt(_0x31ad96(0x86))/0x6+-parseInt(_0x31ad96(0xce))/0x7+parseInt(_0x31ad96(0x9b))/0x8+-parseInt(_0x31ad96(0x8d))/0x9;if(_0x20f2aa===_0x31e46d)break;else _0x32d9eb['push'](_0x32d9eb['shift']());}catch(_0x22976f){_0x32d9eb['push'](_0x32d9eb['shift']());}}}(_0x18c0,0x79cde));const assert=require(_0xba9b2d(0xc5)),{agentProvider,mockManager,fixtureManager,matchers,configUtils}=require(_0xba9b2d(0xca)),{anyEtag,anyObjectId,anyLocationFor,anyErrorId}=matchers,models=require(_0xba9b2d(0x85)),sinon=require(_0xba9b2d(0xcc)),settingsHelpers=require(_0xba9b2d(0x9a)),crypto=require(_0xba9b2d(0xc8)),membersValidationKeyMock=_0xba9b2d(0xba);describe('Members\x20Feedback',function(){const _0xa7e541=_0xba9b2d,_0x455a83={'bGNfb':'0|2|4|3|1','nMspD':_0xa7e541(0x9e),'DtNgZ':_0xa7e541(0x87),'Mblwg':_0xa7e541(0x8e),'HZyei':function(_0x194872,_0x256e1b){return _0x194872(_0x256e1b);},'WJaNd':_0xa7e541(0x84),'BaJcJ':'Allows\x20authentication\x20via\x20session','FJgeM':function(_0x36dec8,_0x11d101,_0xf0547d){return _0x36dec8(_0x11d101,_0xf0547d);},'scWzG':'Throws\x20for\x20missing\x20key','HOwuS':'Thorws\x20for\x20invalid\x20key','hNRqP':function(_0xd03239,_0x57a007,_0x1bcfb9){return _0xd03239(_0x57a007,_0x1bcfb9);},'AKRaV':_0xa7e541(0xa3),'TAqZd':function(_0x2f22b4,_0x5a5309,_0x7be5ee){return _0x2f22b4(_0x5a5309,_0x7be5ee);},'sCuOR':'123','RvZQh':function(_0x2d0495,_0x189923,_0xd9ca9d){return _0x2d0495(_0x189923,_0xd9ca9d);},'EuOWN':_0xa7e541(0xd3),'LRkyG':function(_0x3e76a4,_0x5a319d){return _0x3e76a4(_0x5a319d);},'BeIUE':function(_0x38ec71,_0x58faae){return _0x38ec71(_0x58faae);},'sPrCb':'feedback','ZRnhA':'updated_at','xDxkf':function(_0x4b2c66,_0x41b543){return _0x4b2c66*_0x41b543;},'fLDSr':function(_0x5195fb,_0x54bace){return _0x5195fb*_0x54bace;},'ytDQr':function(_0x35fcd1,_0x4da86f){return _0x35fcd1(_0x4da86f);},'rZwEG':function(_0x13f522,_0x3a8160){return _0x13f522(_0x3a8160);},'jKcYX':function(_0x28593f,_0x4054a2,_0x1ccabf){return _0x28593f(_0x4054a2,_0x1ccabf);},'MvOvU':_0xa7e541(0x95)};let _0x57c11c,_0x9c2106,_0x5a73eb,_0x19df07,_0x419f9c;_0x455a83[_0xa7e541(0xa0)](before,async function(){const _0x4bc91c=_0xa7e541,_0x35fd08=_0x455a83[_0x4bc91c(0xa9)]['split']('|');let _0x4b6e66=0x0;while(!![]){switch(_0x35fd08[_0x4b6e66++]){case'0':_0x57c11c=await agentProvider[_0x4bc91c(0xaf)]();continue;case'1':_0x19df07=crypto[_0x4bc91c(0x96)](_0x455a83[_0x4bc91c(0x98)],membersValidationKeyMock)[_0x4bc91c(0xc7)](_0x5a73eb)[_0x4bc91c(0xc4)](_0x455a83[_0x4bc91c(0xb8)]);continue;case'2':_0x9c2106=_0x57c11c[_0x4bc91c(0xa4)]();continue;case'3':_0x5a73eb=fixtureManager[_0x4bc91c(0xc2)](_0x4bc91c(0x92),0x0)[_0x4bc91c(0xb0)];continue;case'4':await fixtureManager[_0x4bc91c(0x90)](_0x4bc91c(0x84),'members');continue;}break;}}),beforeEach(function(){const _0x2cfba8=_0xa7e541;sinon[_0x2cfba8(0xbb)](settingsHelpers,_0x2cfba8(0xd0))[_0x2cfba8(0xa2)](membersValidationKeyMock),mockManager['mockMail']();}),afterEach(async function(){_0x419f9c?.['restore'](),_0x419f9c=undefined,await configUtils['restore'](),mockManager['restore']();}),_0x455a83[_0xa7e541(0xa7)](describe,'Authentication',function(){const _0x3ae4ba=_0xa7e541,_0x50496f={'CpDvO':_0x455a83[_0x3ae4ba(0xd5)],'biwXx':_0x3ae4ba(0xac)};it(_0x455a83['BaJcJ'],async function(){const _0x53f13c=_0x3ae4ba,_0x394dd4=fixtureManager[_0x53f13c(0xc2)](_0x53f13c(0x84),0x0)['id'];await _0x9c2106[_0x53f13c(0xd1)](_0x53f13c(0xa8)),await _0x9c2106['post'](_0x455a83[_0x53f13c(0xa5)])[_0x53f13c(0x88)]({'feedback':[{'score':0x1,'post_id':_0x394dd4}]})[_0x53f13c(0xcd)](0xc9)[_0x53f13c(0x93)]({'etag':anyEtag,'location':anyLocationFor(_0x53f13c(0xc6))})[_0x53f13c(0xbd)]({'feedback':[{'id':anyObjectId,'memberId':anyObjectId,'postId':anyObjectId}]});}),_0x455a83['FJgeM'](it,_0x3ae4ba(0xcf),async function(){const _0x1bbd22=_0x3ae4ba,_0x2db8e7=fixtureManager[_0x1bbd22(0xc2)](_0x1bbd22(0x84),0x0)['id'];await _0x57c11c[_0x1bbd22(0xd6)](_0x1bbd22(0x8f)+_0x5a73eb+'&key='+_0x19df07)[_0x1bbd22(0x88)]({'feedback':[{'score':0x1,'post_id':_0x2db8e7}]})[_0x1bbd22(0xcd)](0xc9)[_0x1bbd22(0x93)]({'etag':anyEtag,'location':_0x455a83[_0x1bbd22(0x8b)](anyLocationFor,_0x1bbd22(0xc6))})[_0x1bbd22(0xbd)]({'feedback':[{'id':anyObjectId,'memberId':anyObjectId,'postId':anyObjectId}]});}),it(_0x455a83['scWzG'],async function(){const _0x468119=_0x3ae4ba,_0x5395c5=fixtureManager['get'](_0x468119(0x84),0x0)['id'];await _0x57c11c[_0x468119(0xd6)](_0x468119(0x8f)+_0x5a73eb)[_0x468119(0x88)]({'feedback':[{'score':0x1,'post_id':_0x5395c5}]})[_0x468119(0xcd)](0x191)[_0x468119(0xbd)]({'errors':[{'id':anyErrorId}]});}),it(_0x455a83[_0x3ae4ba(0x8c)],async function(){const _0xfdc23b=_0x3ae4ba,_0x2ee9df=fixtureManager[_0xfdc23b(0xc2)](_0x455a83[_0xfdc23b(0xd5)],0x0)['id'];await _0x57c11c[_0xfdc23b(0xd6)]('/api/feedback/?uuid='+_0x5a73eb+_0xfdc23b(0xb3))['body']({'feedback':[{'score':0x1,'post_id':_0x2ee9df}]})['expectStatus'](0x191)[_0xfdc23b(0xbd)]({'errors':[{'id':anyErrorId}]});}),_0x455a83[_0x3ae4ba(0xad)](it,_0x455a83[_0x3ae4ba(0xaa)],async function(){const _0x331126=_0x3ae4ba,_0x4e2351=fixtureManager[_0x331126(0xc2)](_0x50496f[_0x331126(0xcb)],0x0)['id'];await _0x57c11c[_0x331126(0xd6)](_0x331126(0x99))[_0x331126(0x88)]({'feedback':[{'score':0x1,'post_id':_0x4e2351}]})[_0x331126(0xcd)](0x191)[_0x331126(0xbd)]({'errors':[{'id':anyErrorId}]});}),_0x455a83[_0x3ae4ba(0x8a)](it,_0x3ae4ba(0xc9),async function(){const _0x20cedb=_0x3ae4ba,_0x51b5e9=fixtureManager[_0x20cedb(0xc2)](_0x20cedb(0x84),0x0)['id'],_0x1870c6=_0x50496f[_0x20cedb(0x9f)];await _0x57c11c[_0x20cedb(0xd6)](_0x20cedb(0x8f)+_0x1870c6)[_0x20cedb(0x88)]({'feedback':[{'score':0x1,'post_id':_0x51b5e9}]})[_0x20cedb(0xcd)](0x191)['matchBodySnapshot']({'errors':[{'id':anyErrorId}]});});}),_0x455a83[_0xa7e541(0xd7)](describe,_0xa7e541(0xb5),function(){const _0x3937b8=_0xa7e541,_0x433519=fixtureManager[_0x3937b8(0xc2)](_0x3937b8(0x84),0x0)['id'];_0x455a83[_0x3937b8(0xd7)](it,_0x3937b8(0xa6),async function(){const _0x1b0209=_0x3937b8;await _0x57c11c[_0x1b0209(0xd6)]('/api/feedback/?uuid='+_0x5a73eb+_0x1b0209(0xbf)+_0x19df07)[_0x1b0209(0x88)]({'feedback':[{'score':0x2,'post_id':_0x433519}]})['expectStatus'](0x1a6)[_0x1b0209(0xbd)]({'errors':[{'id':anyErrorId}]});}),it(_0x455a83[_0x3937b8(0x89)],async function(){const _0x318807=_0x3937b8;await _0x57c11c[_0x318807(0xd6)](_0x318807(0x8f)+_0x5a73eb+'&key='+_0x19df07)[_0x318807(0x88)]({'feedback':[{'score':_0x318807(0x9d),'post_id':_0x433519}]})[_0x318807(0xcd)](0x1a6)[_0x318807(0xbd)]({'errors':[{'id':anyErrorId}]});}),_0x455a83[_0x3937b8(0xd7)](it,_0x3937b8(0xae),async function(){const _0x740a3d=_0x3937b8;await _0x57c11c[_0x740a3d(0xd6)](_0x740a3d(0x8f)+_0x5a73eb+_0x740a3d(0xbf)+_0x19df07)['body']({'feedback':[{'score':0x1,'post_id':_0x455a83[_0x740a3d(0xd4)]}]})['expectStatus'](0x194)[_0x740a3d(0xbd)]({'errors':[{'id':anyErrorId}]});});}),_0x455a83[_0xa7e541(0xd2)](it,_0x455a83[_0xa7e541(0xa1)],async function(){const _0x432c76=_0xa7e541,_0x33ff53=fixtureManager[_0x432c76(0xc2)](_0x432c76(0x84),0x0)['id'];await _0x57c11c[_0x432c76(0xd6)](_0x432c76(0x8f)+_0x5a73eb+'&key='+_0x19df07)[_0x432c76(0x88)]({'feedback':[{'score':0x1,'post_id':_0x33ff53}]})['expectStatus'](0xc9)[_0x432c76(0x93)]({'etag':anyEtag,'location':_0x455a83['LRkyG'](anyLocationFor,_0x432c76(0xc6))})[_0x432c76(0xbd)]({'feedback':[{'id':anyObjectId,'memberId':anyObjectId,'postId':anyObjectId}]});}),it(_0xa7e541(0xb4),async function(){const _0x1d2a4c=_0xa7e541;_0x419f9c=sinon[_0x1d2a4c(0xb6)](new Date());const _0x15bd5e=fixtureManager[_0x1d2a4c(0xc2)](_0x455a83[_0x1d2a4c(0xd5)],0x1)['id'],{body:_0x305741}=await _0x57c11c[_0x1d2a4c(0xd6)](_0x1d2a4c(0x8f)+_0x5a73eb+'&key='+_0x19df07)[_0x1d2a4c(0x88)]({'feedback':[{'score':0x0,'post_id':_0x15bd5e}]})[_0x1d2a4c(0xcd)](0xc9)[_0x1d2a4c(0x93)]({'etag':anyEtag,'location':_0x455a83['BeIUE'](anyLocationFor,_0x455a83[_0x1d2a4c(0xbe)])})['matchBodySnapshot']({'feedback':[{'id':anyObjectId,'memberId':anyObjectId,'postId':anyObjectId}]});assert['equal'](_0x305741[_0x1d2a4c(0xc6)][0x0]['score'],0x0);const _0x4104e1=_0x305741[_0x1d2a4c(0xc6)][0x0]['id'],_0xf1993d=await models[_0x1d2a4c(0xbc)][_0x1d2a4c(0xb9)]({'id':_0x4104e1},{'require':!![]});_0x419f9c[_0x1d2a4c(0x97)](0xa*0x3c*0x3e8);const {body:_0x3b648b}=await _0x57c11c['post']('/api/feedback/?uuid='+_0x5a73eb+_0x1d2a4c(0xbf)+_0x19df07)[_0x1d2a4c(0x88)]({'feedback':[{'score':0x1,'post_id':_0x15bd5e}]})[_0x1d2a4c(0xcd)](0xc9)[_0x1d2a4c(0x93)]({'etag':anyEtag,'location':anyLocationFor(_0x455a83[_0x1d2a4c(0xbe)])})[_0x1d2a4c(0xbd)]({'feedback':[{'id':anyObjectId,'memberId':anyObjectId,'postId':anyObjectId}]});assert[_0x1d2a4c(0xd8)](_0x3b648b[_0x1d2a4c(0xc6)][0x0]['id'],_0x4104e1),assert[_0x1d2a4c(0xd8)](_0x3b648b['feedback'][0x0][_0x1d2a4c(0xb7)],0x1);const _0xf78d7=await models[_0x1d2a4c(0xbc)][_0x1d2a4c(0xb9)]({'id':_0x4104e1},{'require':!![]});assert['notEqual'](_0xf78d7['get'](_0x1d2a4c(0x91))[_0x1d2a4c(0xc0)](),_0xf1993d[_0x1d2a4c(0xc2)](_0x455a83[_0x1d2a4c(0x94)])[_0x1d2a4c(0xc0)]()),_0x419f9c[_0x1d2a4c(0x97)](_0x455a83[_0x1d2a4c(0xab)](_0x455a83['fLDSr'](0xa,0x3c),0x3e8));const {body:_0x8fc9aa}=await _0x57c11c[_0x1d2a4c(0xd6)](_0x1d2a4c(0x8f)+_0x5a73eb+'&key='+_0x19df07)[_0x1d2a4c(0x88)]({'feedback':[{'score':0x1,'post_id':_0x15bd5e}]})[_0x1d2a4c(0xcd)](0xc9)[_0x1d2a4c(0x93)]({'etag':anyEtag,'location':_0x455a83['ytDQr'](anyLocationFor,_0x1d2a4c(0xc6))})['matchBodySnapshot']({'feedback':[{'id':anyObjectId,'memberId':anyObjectId,'postId':anyObjectId}]}),_0x369476=await models[_0x1d2a4c(0xbc)][_0x1d2a4c(0xb9)]({'id':_0x4104e1},{'require':!![]});assert[_0x1d2a4c(0xd8)](_0x8fc9aa[_0x1d2a4c(0xc6)][0x0]['id'],_0x4104e1),assert['equal'](_0x8fc9aa[_0x1d2a4c(0xc6)][0x0][_0x1d2a4c(0xb7)],0x1),assert[_0x1d2a4c(0xd8)](_0x369476[_0x1d2a4c(0xc2)](_0x455a83[_0x1d2a4c(0x94)])[_0x1d2a4c(0xc0)](),_0xf78d7['get'](_0x455a83[_0x1d2a4c(0x94)])['getTime']());});});