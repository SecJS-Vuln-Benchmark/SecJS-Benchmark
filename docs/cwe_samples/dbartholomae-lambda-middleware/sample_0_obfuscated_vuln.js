function _0x36a7(){const _0x52a6f8=['http://localhost:8080','RxLqJ','lqkuj','2803900kLOSVb','PfGws','./..',',\x20proto=http','proto=http;host=','HcRCP','test.org','should\x20append\x20append\x20queryParams\x20after\x20\x27to\x27\x20path','rmrJM','relativeRoot','x-forwarded-host','wTxhT','gheWL','ERDfO','vscode','\x20->\x20[','259BxqkVZ','woBMm','toBe','qZOyG','http','for=127.0.0.1;proto=http;host=','FsbqH','hwztr','zyeyQ','./vscode?folder=/Users/jp/dev/coder','hIcnQ','CkKEG','DtjrQ','UVlsA','19542uQqFmt','forEach','./../..','/foo','vDKdv','/Users/jp/dev/coder','/foo/bar\x20','IAfnb','host','oWRVZ','expected',',\x20for=127.0.0.1','KurJW','LSuvt','UtovC','473792LUEqcQ','1|0|3|4|2','307978BUHYsK','9882324lWgZCQ','constructRedirectPath','721418DJOTVy','toStrictEqual','clearAllMocks','/foo/','RpVuK','ZbCDM','DFDYL','./?folder=/Users/jp/dev/coder','sjUQI','/foo/bar/','SgejC','should\x20construct\x20a\x20relative\x20path\x20to\x20the\x20root','authenticateOrigin','3864320dYJsxt','origin','VtuWO','pNPcV','3ifwiie','localhost:8080','jYzLe','forwarded','should\x20use\x20an\x20empty\x20string\x20if\x20no\x20query\x20params','for=127.0.0.1,\x20host=','xlmqP','KLTZM'];_0x36a7=function(){return _0x52a6f8;};return _0x36a7();}const _0x40be41=_0x4ca6;(function(_0x20f152,_0x252216){const _0x2db5b5=_0x4ca6,_0x335d3b=_0x20f152();while(!![]){try{const _0x467b09=-parseInt(_0x2db5b5(0x219))/0x1+-parseInt(_0x2db5b5(0x216))/0x2*(-parseInt(_0x2db5b5(0x22a))/0x3)+-parseInt(_0x2db5b5(0x214))/0x4+parseInt(_0x2db5b5(0x235))/0x5+-parseInt(_0x2db5b5(0x205))/0x6*(parseInt(_0x2db5b5(0x1f7))/0x7)+-parseInt(_0x2db5b5(0x226))/0x8+parseInt(_0x2db5b5(0x217))/0x9;if(_0x467b09===_0x252216)break;else _0x335d3b['push'](_0x335d3b['shift']());}catch(_0x140b9b){_0x335d3b['push'](_0x335d3b['shift']());}}}(_0x36a7,0x5a2ee));import{getMockReq}from'@jest-mock/express';import*as _0x1c6d9d from'../../../src/node/http';function _0x4ca6(_0x35b2f7,_0x70f9eb){const _0x36a70c=_0x36a7();return _0x4ca6=function(_0x4ca658,_0x2cffd4){_0x4ca658=_0x4ca658-0x1ec;let _0x5dc0a0=_0x36a70c[_0x4ca658];return _0x5dc0a0;},_0x4ca6(_0x35b2f7,_0x70f9eb);}import{mockLogger}from'../../utils/helpers';describe(_0x40be41(0x1fb),()=>{const _0x19597b=_0x40be41,_0x8b27a9={'xlmqP':_0x19597b(0x215),'PfGws':function(_0x58009d,_0x4fa923){return _0x58009d(_0x4fa923);},'LSuvt':_0x19597b(0x208),'XnWcN':_0x19597b(0x222),'qZOyG':_0x19597b(0x207),'woBMm':_0x19597b(0x237),'KLTZM':_0x19597b(0x20d),'HcRCP':'forwarded','IWrDh':function(_0x332235,_0x18f7a7,_0x462ba3){return _0x332235(_0x18f7a7,_0x462ba3);},'DtjrQ':_0x19597b(0x1f2),'oWRVZ':_0x19597b(0x232),'jYzLe':'localhost:8081','vDKdv':'localhost:8080','RxLqJ':_0x19597b(0x20a),'Apfyy':function(_0x58b37a,_0x538f4d){return _0x58b37a!==_0x538f4d;},'ZbCDM':_0x19597b(0x200),'SgejC':'should\x20append\x20the\x20\x27to\x27\x20path\x20relative\x20to\x20the\x20originalUrl','hIcnQ':function(_0xb76747,_0x7c1775,_0x17f601){return _0xb76747(_0x7c1775,_0x17f601);},'pNPcV':_0x19597b(0x227),'UtovC':function(_0x4486ad,_0x2d4adc,_0x3a0b3e){return _0x4486ad(_0x2d4adc,_0x3a0b3e);}};_0x8b27a9[_0x19597b(0x236)](beforeEach,()=>{mockLogger();}),afterEach(()=>{const _0x33a7d9=_0x19597b;jest[_0x33a7d9(0x21b)]();}),it(_0x19597b(0x224),()=>{const _0x2929b3=_0x19597b,_0x26901a=_0x8b27a9[_0x2929b3(0x230)]['split']('|');let _0x1a1203=0x0;while(!![]){switch(_0x26901a[_0x1a1203++]){case'0':_0x8b27a9[_0x2929b3(0x236)](expect,_0x1c6d9d[_0x2929b3(0x1f0)](_0x8b27a9[_0x2929b3(0x212)]))['toStrictEqual']('.');continue;case'1':expect(_0x1c6d9d[_0x2929b3(0x1f0)]('/'))[_0x2929b3(0x21a)]('.');continue;case'2':_0x8b27a9[_0x2929b3(0x236)](expect,_0x1c6d9d['relativeRoot'](_0x8b27a9['XnWcN']))[_0x2929b3(0x21a)](_0x8b27a9[_0x2929b3(0x1fa)]);continue;case'3':expect(_0x1c6d9d[_0x2929b3(0x1f0)](_0x2929b3(0x21c)))[_0x2929b3(0x21a)]('./..');continue;case'4':expect(_0x1c6d9d[_0x2929b3(0x1f0)](_0x2929b3(0x20b)))[_0x2929b3(0x21a)](_0x8b27a9[_0x2929b3(0x1f8)]);continue;}break;}}),describe(_0x8b27a9[_0x19597b(0x229)],()=>{const _0xf0fa8c=_0x19597b,_0x3c4ec5={'UVlsA':function(_0x1f9556,_0x6cfa1b,_0x2c12fe){return _0x8b27a9['IWrDh'](_0x1f9556,_0x6cfa1b,_0x2c12fe);}};if(_0xf0fa8c(0x21d)!==_0x8b27a9[_0xf0fa8c(0x203)]){;[{'origin':'','host':'','expected':!![]},{'origin':_0xf0fa8c(0x232),'host':'','expected':![]},{'origin':_0x8b27a9[_0xf0fa8c(0x20e)],'host':_0xf0fa8c(0x22b),'expected':!![]},{'origin':_0x8b27a9[_0xf0fa8c(0x20e)],'host':_0x8b27a9[_0xf0fa8c(0x22c)],'expected':![]},{'origin':_0x8b27a9[_0xf0fa8c(0x209)],'host':_0x8b27a9[_0xf0fa8c(0x209)],'expected':![]},{'origin':_0xf0fa8c(0x1ed),'host':_0x8b27a9[_0xf0fa8c(0x209)],'expected':![]}][_0xf0fa8c(0x206)](_0x3d2724=>{const _0x1d5f8e=_0xf0fa8c;;[[_0x8b27a9[_0x1d5f8e(0x231)],_0x3d2724[_0x1d5f8e(0x20d)]],['x-forwarded-host',_0x3d2724[_0x1d5f8e(0x20d)]],[_0x8b27a9[_0x1d5f8e(0x1ec)],'for=127.0.0.1,\x20host='+_0x3d2724[_0x1d5f8e(0x20d)]+_0x1d5f8e(0x238)],['forwarded',_0x1d5f8e(0x1fc)+_0x3d2724[_0x1d5f8e(0x20d)]],['forwarded',_0x1d5f8e(0x239)+_0x3d2724[_0x1d5f8e(0x20d)]+_0x1d5f8e(0x210)]][_0x1d5f8e(0x206)](([_0x51c6b0,_0x44909a])=>{const _0xf669ac=_0x1d5f8e,_0x249692={'lqkuj':function(_0x175cc8,_0x29818d){return _0x175cc8(_0x29818d);}};_0x3c4ec5[_0xf669ac(0x204)](it,_0x3d2724[_0xf669ac(0x227)]+'\x20->\x20['+_0x51c6b0+':\x20'+_0x44909a+']',()=>{const _0x337a71=_0xf669ac,_0x113acd=getMockReq({'originalUrl':_0x337a71(0x22b),'headers':{'origin':_0x3d2724['origin'],[_0x51c6b0]:_0x44909a}});_0x249692[_0x337a71(0x234)](expect,_0x1c6d9d[_0x337a71(0x225)](_0x113acd))[_0x337a71(0x1f9)](_0x3d2724[_0x337a71(0x20f)]);});});});}else{const _0x1822f8=_0x3e5490({'originalUrl':_0xf0fa8c(0x22b)}),_0x59876d={'folder':_0xf0fa8c(0x20a)},_0x13377='',_0x19d487=_0xbe3adf[_0xf0fa8c(0x218)](_0x1822f8,_0x59876d,_0x13377),_0x50d043=_0xf0fa8c(0x220);_0x1c258e(_0x19d487)[_0xf0fa8c(0x1f9)](_0x50d043);}}),_0x8b27a9[_0x19597b(0x213)](describe,_0x19597b(0x218),()=>{const _0x40af7f=_0x19597b,_0x22fd3d={'gheWL':_0x40af7f(0x22b),'hwztr':_0x8b27a9[_0x40af7f(0x233)],'VtuWO':function(_0x2ecce1,_0x4fcdd2){return _0x2ecce1(_0x4fcdd2);},'DFDYL':_0x40af7f(0x22d),'zWeYm':function(_0x12d3d3,_0xf255e4){return _0x8b27a9['Apfyy'](_0x12d3d3,_0xf255e4);},'ERDfO':_0x40af7f(0x1f5),'zyeyQ':'./vscode','IAfnb':_0x8b27a9[_0x40af7f(0x21e)]};it('should\x20preserve\x20slashes\x20in\x20queryString\x20so\x20they\x20are\x20human-readable',()=>{const _0x1bfdf0=_0x40af7f,_0x2a8138=getMockReq({'originalUrl':_0x22fd3d['gheWL']}),_0x4fc28b={'folder':_0x22fd3d['hwztr']},_0x4cc06f='',_0x1da9d4=_0x1c6d9d['constructRedirectPath'](_0x2a8138,_0x4fc28b,_0x4cc06f),_0x4cc379='./?folder=/Users/jp/dev/coder';_0x22fd3d[_0x1bfdf0(0x228)](expect,_0x1da9d4)[_0x1bfdf0(0x1f9)](_0x4cc379);}),it(_0x40af7f(0x22e),()=>{const _0x1e93c9=_0x40af7f,_0x2641fd=getMockReq({'originalUrl':_0x1e93c9(0x22b)}),_0x3c1dd1={},_0x3c1406='',_0xefad01=_0x1c6d9d[_0x1e93c9(0x218)](_0x2641fd,_0x3c1dd1,_0x3c1406),_0x4d1cdd='./';_0x22fd3d[_0x1e93c9(0x228)](expect,_0xefad01)[_0x1e93c9(0x1f9)](_0x4d1cdd);}),it(_0x8b27a9[_0x40af7f(0x223)],()=>{const _0x1ad34e=_0x40af7f,_0x442e61={'FsbqH':function(_0x5e9de9,_0x569dc2){return _0x5e9de9(_0x569dc2);},'sjUQI':_0x22fd3d[_0x1ad34e(0x21f)]};if(_0x22fd3d['zWeYm'](_0x1ad34e(0x1ef),_0x1ad34e(0x211))){const _0x3347d6=getMockReq({'originalUrl':_0x22fd3d[_0x1ad34e(0x1f3)]}),_0x303f33={},_0x5ea471=_0x22fd3d[_0x1ad34e(0x1f4)],_0xbad49f=_0x1c6d9d[_0x1ad34e(0x218)](_0x3347d6,_0x303f33,_0x5ea471),_0x5d3e89=_0x22fd3d[_0x1ad34e(0x1ff)];_0x22fd3d[_0x1ad34e(0x228)](expect,_0xbad49f)['toBe'](_0x5d3e89);}else{const _0x501fd={'CkKEG':function(_0x19c4f6,_0x5065aa){const _0x430d3f=_0x1ad34e;return _0x442e61[_0x430d3f(0x1fd)](_0x19c4f6,_0x5065aa);}};;[[_0x1ad34e(0x20d),_0x493490[_0x1ad34e(0x20d)]],[_0x1ad34e(0x1f1),_0x2a2086[_0x1ad34e(0x20d)]],[_0x442e61[_0x1ad34e(0x221)],_0x1ad34e(0x22f)+_0x199dcd['host']+_0x1ad34e(0x238)],[_0x442e61[_0x1ad34e(0x221)],_0x1ad34e(0x1fc)+_0x47d9ca['host']],[_0x442e61[_0x1ad34e(0x221)],_0x1ad34e(0x239)+_0x27e6b8[_0x1ad34e(0x20d)]+',\x20for=127.0.0.1']]['forEach'](([_0x5280e4,_0x285527])=>{const _0x3ddf0c=_0x1ad34e,_0x4dce5a={'GTYfm':function(_0x42bcf7,_0x2754dc){const _0x433835=_0x4ca6;return _0x501fd[_0x433835(0x202)](_0x42bcf7,_0x2754dc);},'NSTMa':_0x3ddf0c(0x22b)};_0x23ba02(_0x4be8b8[_0x3ddf0c(0x227)]+_0x3ddf0c(0x1f6)+_0x5280e4+':\x20'+_0x285527+']',()=>{const _0x2f03b1=_0x3ddf0c,_0x3437e0=_0x4dce5a['GTYfm'](_0x19d28d,{'originalUrl':_0x4dce5a['NSTMa'],'headers':{'origin':_0x2165d4['origin'],[_0x5280e4]:_0x285527}});_0x4dce5a['GTYfm'](_0x386790,_0x159e88[_0x2f03b1(0x225)](_0x3437e0))[_0x2f03b1(0x1f9)](_0x45708e['expected']);});});}}),_0x8b27a9[_0x40af7f(0x201)](it,_0x40af7f(0x1ee),()=>{const _0x18c7d1=_0x40af7f,_0x216e94=getMockReq({'originalUrl':_0x22fd3d[_0x18c7d1(0x1f3)]}),_0x182e1b={'folder':_0x22fd3d[_0x18c7d1(0x1fe)]},_0x2e21f2=_0x18c7d1(0x1f5),_0x547703=_0x1c6d9d[_0x18c7d1(0x218)](_0x216e94,_0x182e1b,_0x2e21f2),_0x133aef=_0x22fd3d[_0x18c7d1(0x20c)];expect(_0x547703)[_0x18c7d1(0x1f9)](_0x133aef);});});});