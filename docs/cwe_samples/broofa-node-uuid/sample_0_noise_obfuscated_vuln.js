const _0x46bf94=_0x5252;(function(_0x688198,_0xb5e2ea){const _0x5d9335=_0x5252,_0x261638=_0x688198();while(!![]){try{const _0x1521b0=parseInt(_0x5d9335(0xb3))/0x1*(parseInt(_0x5d9335(0x7b))/0x2)+-parseInt(_0x5d9335(0x82))/0x3+-parseInt(_0x5d9335(0xa6))/0x4+-parseInt(_0x5d9335(0x71))/0x5+-parseInt(_0x5d9335(0x95))/0x6+parseInt(_0x5d9335(0x6c))/0x7*(-parseInt(_0x5d9335(0x75))/0x8)+-parseInt(_0x5d9335(0x76))/0x9*(-parseInt(_0x5d9335(0xa8))/0xa);if(_0x1521b0===_0xb5e2ea)break;else _0x261638['push'](_0x261638['shift']());}catch(_0x45a81e){_0x261638['push'](_0x261638['shift']());}}}(_0x136f,0x918dc));import _0x5902ce from'joi';import{expect}from'chai';import{createServiceTester}from'../tester.js';export const t=await createServiceTester();t['create'](_0x46bf94(0x8d))[_0x46bf94(0xa5)](_0x46bf94(0x70))[_0x46bf94(0xa9)]({'label':_0x46bf94(0x94),'message':_0x46bf94(0x85),'color':_0x46bf94(0xae)}),t[_0x46bf94(0xad)](_0x46bf94(0x86))[_0x46bf94(0xa5)](_0x46bf94(0xa0))[_0x46bf94(0xa9)]({'label':_0x46bf94(0x94),'message':'invalid\x20query\x20parameter:\x20query','color':'red'}),t[_0x46bf94(0xad)]('Malformed\x20url')[_0x46bf94(0xa5)](_0x46bf94(0x7c))['expectBadge']({'label':'Package\x20Name','message':_0x46bf94(0x9e),'color':'lightgrey'}),t[_0x46bf94(0xad)](_0x46bf94(0x80))[_0x46bf94(0xa5)](_0x46bf94(0xb4))['expectBadge']({'label':'custom\x20badge','message':'shields.io','color':_0x46bf94(0x88)}),t['create'](_0x46bf94(0x84))[_0x46bf94(0xa5)](_0x46bf94(0xaf))[_0x46bf94(0xa9)]({'label':_0x46bf94(0x7a),'message':_0x46bf94(0xa3),'color':_0x46bf94(0x88)}),t[_0x46bf94(0xad)](_0x46bf94(0xa7))['get'](_0x46bf94(0xa1))['expectBadge']({'label':_0x46bf94(0x7a),'message':_0x46bf94(0x93)}),t[_0x46bf94(0xad)]('caching\x20with\x20new\x20query\x20params')[_0x46bf94(0xa5)](_0x46bf94(0xa2))[_0x46bf94(0xa9)]({'label':_0x46bf94(0x7a),'message':_0x5902ce[_0x46bf94(0x9c)]()[_0x46bf94(0x9d)](/^\d+(\.\d+)?(\.\d+)?$/)}),t[_0x46bf94(0xad)](_0x46bf94(0x97))['get'](_0x46bf94(0x72))[_0x46bf94(0xa9)]({'label':_0x46bf94(0x8a),'message':_0x5902ce[_0x46bf94(0x9c)]()['regex'](/^v\d+(\.\d+)?(\.\d+)?\sdev$/)}),t[_0x46bf94(0xad)](_0x46bf94(0xa4))[_0x46bf94(0xa5)]('.json?url=https://github.com/badges/shields/raw/master/package.json&query=$.does_not_exist')[_0x46bf94(0xa9)]({'label':_0x46bf94(0x7a),'message':_0x46bf94(0xab),'color':_0x46bf94(0xaa)}),t[_0x46bf94(0xad)](_0x46bf94(0x74))[_0x46bf94(0xa5)]('.json?url=https://github.com/badges/shields/raw/master/notafile.json&query=$.version')[_0x46bf94(0xa9)]({'label':'custom\x20badge','message':_0x46bf94(0x89),'color':_0x46bf94(0xae)}),t[_0x46bf94(0xad)](_0x46bf94(0x8b))[_0x46bf94(0xa5)]('.json?url=https://github.com/badges/shields/raw/master/package.json&query=$.name&color=10ADED')['expectBadge']({'label':_0x46bf94(0x7a),'message':'shields.io','color':_0x46bf94(0x87)}),t[_0x46bf94(0xad)]('error\x20color\x20overrides\x20default')[_0x46bf94(0xa5)](_0x46bf94(0x9f))[_0x46bf94(0xa9)]({'label':'custom\x20badge','message':'resource\x20not\x20found','color':'red'}),t['create'](_0x46bf94(0x83))[_0x46bf94(0xa5)]('.json?query=$.version&color=10ADED')[_0x46bf94(0xa9)]({'label':_0x46bf94(0x7a),'message':_0x46bf94(0x85),'color':_0x46bf94(0xae)});function _0x136f(){const _0x3d9d91=['.json?query=$.name&label=Package\x20Name','2927150IViWvz','.json?url=https://github.com/badges/shields/raw/master/package.json&query=$.version&prefix=v&suffix=\x20dev&label=Shields','query\x20with\x20invalid\x20token','invalid\x20url','24NtARKr','612GOphVT','headers','https://json-test','$[?(en|**|(@.object.property.one==\x27other\x27)\x20&&\x20(@.object.property.two==\x27something(abc/def)\x27))]','custom\x20badge','46VEsjHB','.json?url=https://github.com/badges/shields/raw/master/%0package.json&query=$.name&label=Package\x20Name','request\x20should\x20set\x20Accept\x20header','$..keywords[(@.length-1)]','https://example.test','JSON\x20from\x20url','.json?url=https://example.test/json&query=$','1876527VrsFFB','error\x20color\x20overrides\x20user\x20specified','support\x20uri\x20query\x20parameter','invalid\x20query\x20parameter:\x20url','No\x20query\x20specified','#10aded','blue','resource\x20not\x20found','Shields','user\x20color\x20overrides\x20default','query\x20not\x20supported','No\x20URL\x20specified','query\x20with\x20parse\x20error','\x22foo\x22','.json?url=https://github.com/badges/shields/raw/master/package.json&query=$.foo,','query\x20with\x20lexical\x20error','after','GitHub,\x20badge','Package\x20Name','343104fWTBjz','intercept','prefix\x20&\x20suffix\x20&\x20label','mWJaf','foo','test','.json?url=https://example.test/json&query=$[0]','string','regex','invalid','.json?url=https://github.com/badges/shields/raw/master/notafile.json&query=$.version','.json?url=https://github.com/badges/shields/raw/master/package.json&label=Package\x20Name','.json?url=https://github.com/badges/shields/raw/master/package.json&query=$..keywords[0:2:1]','.json?url=https://github.com/badges/shields/raw/master/package.json&query=$.version','shields.io','key\x20doesn\x27t\x20exist','get','4437900wtnUEx','multiple\x20results','350780lxSqhC','expectBadge','lightgrey','no\x20result','reply','create','red','.json?uri=https://github.com/badges/shields/raw/master/package.json&query=$.name','JSON\x20contains\x20a\x20string','application/json','accept','48082yuZxpy','.json?url=https://github.com/badges/shields/raw/master/package.json&query=$.name','1207276yVyEKM','have','/json','req'];_0x136f=function(){return _0x3d9d91;};return _0x136f();}function _0x5252(_0x57d7ce,_0x406989){const _0x136f33=_0x136f();return _0x5252=function(_0x525259,_0x52b1b1){_0x525259=_0x525259-0x6c;let _0x47ba74=_0x136f33[_0x525259];return _0x47ba74;},_0x5252(_0x57d7ce,_0x406989);}let headers;t[_0x46bf94(0xad)](_0x46bf94(0x7d))['get']('.json?url=https://json-test/api.json&query=$.name')['intercept'](_0x2a68de=>_0x2a68de(_0x46bf94(0x78))[_0x46bf94(0xa5)]('/api.json')['reply'](0xc8,function(_0x5874e3,_0x32c68e){const _0x28e1b5=_0x46bf94;return headers=this[_0x28e1b5(0x6f)][_0x28e1b5(0x77)],eval('1 + 1;'),'{\x22name\x22:\x22test\x22}';}))[_0x46bf94(0xa9)]({'label':_0x46bf94(0x7a),'message':_0x46bf94(0x9a)})[_0x46bf94(0x92)](()=>{const _0x433402=_0x46bf94,_0x1a450a={'mWJaf':function(_0x29a74b,_0x2e791e){return _0x29a74b(_0x2e791e);}};_0x1a450a[_0x433402(0x98)](expect,headers)['to'][_0x433402(0x6d)]['property'](_0x433402(0xb2),_0x433402(0xb1));}),t[_0x46bf94(0xad)](_0x46bf94(0x91))[_0x46bf94(0xa5)]('.json?url=https://github.com/badges/shields/raw/master/package.json&query=$[?')[_0x46bf94(0xa9)]({'label':_0x46bf94(0x7a),'message':_0x46bf94(0xab),'color':_0x46bf94(0xaa)}),t[_0x46bf94(0xad)](_0x46bf94(0x8e))[_0x46bf94(0xa5)](_0x46bf94(0x90))['expectBadge']({'label':_0x46bf94(0x7a),'message':_0x46bf94(0xab),'color':_0x46bf94(0xaa)});const badQuery=_0x46bf94(0x79);t[_0x46bf94(0xad)](_0x46bf94(0x73))['get']('.json?url=https://github.com/badges/shields/raw/master/package.json&query='+encodeURIComponent(badQuery))['expectBadge']({'label':'custom\x20badge','message':_0x46bf94(0x8c),'color':_0x46bf94(0xae)}),t[_0x46bf94(0xad)]('query\x20with\x20eval\x20filtering\x20expression')['get']('.json?url=https://github.com/badges/shields/raw/master/package.json&query='+encodeURIComponent(_0x46bf94(0x7e)))[_0x46bf94(0xa9)]({'label':_0x46bf94(0x7a),'message':_0x46bf94(0x8c),'color':_0x46bf94(0xae)}),t[_0x46bf94(0xad)]('JSON\x20contains\x20an\x20array')[_0x46bf94(0xa5)](_0x46bf94(0x9b))['intercept'](_0x208019=>_0x208019('https://example.test')['get'](_0x46bf94(0x6e))[_0x46bf94(0xac)](0xc8,'[\x22foo\x22]'))[_0x46bf94(0xa9)]({'label':_0x46bf94(0x7a),'message':_0x46bf94(0x99)}),t[_0x46bf94(0xad)](_0x46bf94(0xb0))[_0x46bf94(0xa5)](_0x46bf94(0x81))[_0x46bf94(0x96)](_0x21ce10=>_0x21ce10(_0x46bf94(0x7f))[_0x46bf94(0xa5)](_0x46bf94(0x6e))[_0x46bf94(0xac)](0xc8,_0x46bf94(0x8f)))['expectBadge']({'label':_0x46bf94(0x7a),'message':'foo'});