var _0xc19875=_0x8f3e;(function(_0x13f77f,_0x383d87){var _0x2f2c35=_0x8f3e,_0x5c2081=_0x13f77f();while(!![]){try{var _0x397d6c=-parseInt(_0x2f2c35(0xef))/0x1*(parseInt(_0x2f2c35(0xea))/0x2)+parseInt(_0x2f2c35(0xbf))/0x3+-parseInt(_0x2f2c35(0xd3))/0x4*(-parseInt(_0x2f2c35(0xa6))/0x5)+-parseInt(_0x2f2c35(0xc1))/0x6+-parseInt(_0x2f2c35(0xdd))/0x7*(-parseInt(_0x2f2c35(0xe4))/0x8)+parseInt(_0x2f2c35(0xaf))/0x9*(parseInt(_0x2f2c35(0xcf))/0xa)+parseInt(_0x2f2c35(0x99))/0xb;if(_0x397d6c===_0x383d87)break;else _0x5c2081['push'](_0x5c2081['shift']());}catch(_0x424fe1){_0x5c2081['push'](_0x5c2081['shift']());}}}(_0x5138,0x450f0));function _0x5138(){var _0x4cc4c8=['/meta/handshake','with\x20an\x20incoming\x20extension\x20installed','iLFwh','458567pwYlKP','fKHge','ELDNV','Tgtgk','channel','password','does\x20not\x20pass\x20incoming\x20messages\x20through\x20the\x20extension','fakeclientid','4901512fdXdss','server','LZQkW','exactly','yvZCA','with\x20an\x20outgoing\x20extension\x20installed','hABfE','vniij','clientExists','tZizC','passes\x20outgoing\x20messages\x20through\x20the\x20extension','yssNK','zfXAH','3835tFkzCj','YOliy','with\x20subscription\x20auth\x20installed','process','subscribe','CpKWD','yvUxf','IdlEr','../../../src/engines/proxy','369JkwJZl','vfFOw','ikAoI','aSgJe','QrCoB','QVTHU','message','DyVXm','WMitD','Invalid\x20auth','Test','error','describe','gfOFG','KSEOP','EmRHG','982422rtRzor','yields','2447112ZpoiYm','MuWbA','elPqT','publish','HXLoY','does\x20not\x20pass\x20outgoing\x20messages\x20through\x20the\x20extension','ext','bnfee','does\x20not\x20subscribe\x20using\x20the\x20intended\x20channel','jstest','get','SmCIp','znukI','given','36170lbyvJt','nVQCx','IUFah','dDHgk','12KLlRRn','KPFYy','2|3|1|4|0','../../../src/protocol/server','addExtension','auth','YYUEz','bSJvL','/foo','handshake','1579333dPAqRu','zCKSH','eDsXm','dxPoA','OFWJs','hYiai','hello','8XgMMbh','AYgvw','rgRQd','xxGhR','returns','/meta/subscribe','2PXfPVD','GjGyv'];_0x5138=function(){return _0x4cc4c8;};return _0x5138();}var jstest=require(_0xc19875(0xca))[_0xc19875(0xb9)],Engine=require(_0xc19875(0xae)),Server=require(_0xc19875(0xd6));function _0x8f3e(_0x4316d3,_0xf621e4){var _0x513839=_0x5138();return _0x8f3e=function(_0x8f3e0,_0x4b7444){_0x8f3e0=_0x8f3e0-0x93;var _0x11c38f=_0x513839[_0x8f3e0];return _0x11c38f;},_0x8f3e(_0x4316d3,_0xf621e4);}jstest[_0xc19875(0xbb)]('Server\x20extensions',function(){var _0x38d982=_0xc19875,_0x52e132={'yvUxf':function(_0x11fc50,_0x3bd518,_0x1861c9){return _0x11fc50(_0x3bd518,_0x1861c9);},'dxPoA':_0x38d982(0xcb),'eDsXm':_0x38d982(0xb8),'qAABv':function(_0x1be59c,_0xef346){return _0x1be59c===_0xef346;},'vniij':'/foo','bnfee':_0x38d982(0xe3),'UTone':_0x38d982(0xdc),'GjGyv':_0x38d982(0xc4),'rgRQd':function(_0x3b12d3,_0x26a8b5){return _0x3b12d3(_0x26a8b5);},'KSEOP':'passes\x20incoming\x20messages\x20through\x20the\x20extension','AYgvw':function(_0x438d80,_0x2a5239){return _0x438d80!==_0x2a5239;},'bSJvL':_0x38d982(0x9d),'nVQCx':_0x38d982(0x98),'tZizC':_0x38d982(0xa1),'HQvYJ':'subscribe','OFWJs':_0x38d982(0xe9),'QrCoB':function(_0x226272,_0x5ea3f2,_0x2aed05){return _0x226272(_0x5ea3f2,_0x2aed05);},'hABfE':function(_0x194540,_0x37700f,_0x3060dc){return _0x194540(_0x37700f,_0x3060dc);},'znukI':'does\x20not\x20subscribe\x20using\x20an\x20extended\x20channel','IdlEr':function(_0x24714b,_0x352853){return _0x24714b(_0x352853);},'yssNK':_0x38d982(0xf0),'iLFwh':function(_0x315db5,_0x4d4e4c,_0x4bd335){return _0x315db5(_0x4d4e4c,_0x4bd335);},'LZQkW':_0x38d982(0x96),'aSgJe':_0x38d982(0x97),'dDHgk':_0x38d982(0xa3),'FAuTA':function(_0x20458d,_0x21a144,_0x21969a){return _0x20458d(_0x21a144,_0x21969a);},'ytJfl':_0x38d982(0xed),'ikAoI':_0x38d982(0xa8),'CpKWD':function(_0x62ae70,_0x5a4dfa,_0x202e3d){return _0x62ae70(_0x5a4dfa,_0x202e3d);}};with(this){before(function(){var _0x578ae2=_0x38d982;with(this){this['engine']={},_0x52e132[_0x578ae2(0xac)](stub,Engine,_0x52e132[_0x578ae2(0xe0)])[_0x578ae2(0xe8)](engine),this[_0x578ae2(0x9a)]=new Server();}}),_0x52e132['FAuTA'](describe,_0x52e132['ytJfl'],function(){var _0x3006d2=_0x38d982,_0x4d98ab={'hYiai':function(_0x4637b6,_0x52cfb2,_0x2a4021){return _0x4637b6(_0x52cfb2,_0x2a4021);},'YOliy':_0x3006d2(0xdb),'IUFah':'hello','vfFOw':_0x52e132['UTone'],'YYUEz':function(_0x512127,_0x1bc209,_0x349229){return _0x512127(_0x1bc209,_0x349229);},'Wojxz':_0x52e132[_0x3006d2(0xeb)]};with(this){_0x52e132[_0x3006d2(0xe6)](before,function(){var _0x23f6db=_0x3006d2,_0x3edf71={'vNeyL':_0x52e132[_0x23f6db(0xdf)]};with(this){if(_0x52e132['qAABv'](_0x23f6db(0xd4),'mIhZc'))_0x8608dd[_0x23f6db(0xba)]=_0x3edf71['vNeyL'];else{var _0x2a0e76={'incoming':function(_0x55a157,_0x1cb405){var _0x2ed0e6=_0x23f6db;_0x55a157[_0x2ed0e6(0xc7)]={'auth':_0x2ed0e6(0x96)},_0x1cb405(_0x55a157);}};server[_0x23f6db(0xd7)](_0x2a0e76),this[_0x23f6db(0xb5)]={'channel':_0x52e132[_0x23f6db(0xa0)],'data':_0x52e132[_0x23f6db(0xc8)]};}}}),it(_0x52e132[_0x3006d2(0xbd)],function(){var _0x4148f8=_0x3006d2;with(this){_0x4d98ab['hYiai'](expect,engine,_0x4148f8(0xc4))[_0x4148f8(0xce)]({'channel':_0x4d98ab[_0x4148f8(0xa7)],'data':'hello','ext':{'auth':_0x4148f8(0x96)}}),server[_0x4148f8(0xa9)](message,![],function(){});}}),it(_0x3006d2(0xc6),function(){var _0x15a124=_0x3006d2;with(this){var _0x59c223=_0x15a124(0xd5)['split']('|'),_0x2c15eb=0x0;while(!![]){switch(_0x59c223[_0x2c15eb++]){case'0':_0x4d98ab['hYiai'](assertEqual,[{'channel':'/foo','data':_0x4d98ab[_0x15a124(0xd1)]}],_0x1de9ee);continue;case'1':var _0x1de9ee=null;continue;case'2':_0x4d98ab[_0x15a124(0xe2)](stub,server,_0x4d98ab[_0x15a124(0xb0)])['yields']([message]);continue;case'3':_0x4d98ab[_0x15a124(0xd9)](stub,engine,_0x4d98ab['Wojxz']);continue;case'4':server['process']({'channel':_0x15a124(0xec)},![],function(_0x1a13b6){_0x1de9ee=_0x1a13b6;});continue;}break;}}});}}),_0x52e132[_0x38d982(0xee)](describe,_0x52e132[_0x38d982(0xb1)],function(){var _0x5d5c94=_0x38d982,_0x226a4f={'hCqqi':_0x5d5c94(0xb8),'Tgtgk':_0x52e132[_0x5d5c94(0xe1)],'mqGtD':_0x52e132[_0x5d5c94(0xd0)],'ELDNV':_0x5d5c94(0xdb),'WMitD':function(_0x2ead0f,_0x19c95a,_0xbfd0c7){var _0x339f0a=_0x5d5c94;return _0x52e132[_0x339f0a(0xb3)](_0x2ead0f,_0x19c95a,_0xbfd0c7);},'SmCIp':_0x5d5c94(0xaa),'elPqT':_0x5d5c94(0xa1),'QVTHU':function(_0x4ae01f,_0x4e4737,_0x353c8d){return _0x4ae01f(_0x4e4737,_0x353c8d);}};with(this){before(function(){var _0x50f95e=_0x5d5c94,_0xad0b17={'kHEuM':_0x50f95e(0xe9),'zfXAH':_0x226a4f['hCqqi']};with(this){var _0x4a326d={'incoming':function(_0x4c29f7,_0x56e742){var _0x2154cb=_0x50f95e;_0x4c29f7[_0x2154cb(0x95)]===_0xad0b17['kHEuM']&&!_0x4c29f7['auth']&&(_0x4c29f7['error']=_0xad0b17[_0x2154cb(0xa5)]),_0x56e742(_0x4c29f7);}};server[_0x50f95e(0xd7)](_0x4a326d);}}),it(_0x5d5c94(0xc9),function(){var _0x386865=_0x5d5c94;with(this){var _0xe1a9d4={'channel':_0x226a4f[_0x386865(0x94)],'clientId':_0x226a4f['mqGtD'],'subscription':_0x226a4f[_0x386865(0x93)]};_0x226a4f[_0x386865(0xb7)](stub,engine,_0x386865(0xa1))[_0x386865(0xc0)]([!![]]),expect(engine,_0x226a4f[_0x386865(0xcc)])['exactly'](0x0),server[_0x386865(0xa9)](_0xe1a9d4,![],function(){});}}),_0x52e132[_0x5d5c94(0x9f)](it,_0x52e132[_0x5d5c94(0xcd)],function(){var _0x3d53cc=_0x5d5c94;if(_0x52e132[_0x3d53cc(0xe5)](_0x3d53cc(0x9d),_0x52e132[_0x3d53cc(0xda)])){var _0x2b1ccd={'channel':_0x226a4f[_0x3d53cc(0x94)],'clientId':_0x226a4f['mqGtD'],'subscription':_0x226a4f[_0x3d53cc(0x93)]};_0x226a4f['WMitD'](_0x476c38,_0x581501,_0x226a4f[_0x3d53cc(0xc3)])['yields']([!![]]),_0x226a4f[_0x3d53cc(0xb4)](_0x373608,_0x30e194,'subscribe')[_0x3d53cc(0x9c)](0x0),_0x31f6be[_0x3d53cc(0xa9)](_0x2b1ccd,![],function(){});}else with(this){var _0x53f44f={'channel':'/meta/subscribe/x','clientId':_0x52e132['nVQCx'],'subscription':_0x52e132[_0x3d53cc(0xa0)]};_0x52e132['yvUxf'](stub,engine,_0x52e132[_0x3d53cc(0xa2)])[_0x3d53cc(0xc0)]([!![]]),_0x52e132[_0x3d53cc(0xac)](expect,engine,_0x52e132['HQvYJ'])[_0x3d53cc(0x9c)](0x0),server['process'](_0x53f44f,![],function(){});}});}}),_0x52e132[_0x38d982(0xab)](describe,_0x38d982(0x9e),function(){var _0x73f055=_0x38d982,_0x1fd20b={'HXLoY':_0x52e132[_0x73f055(0xa0)],'MuWbA':_0x73f055(0xe3),'xxGhR':function(_0x466f46,_0x43ba4e,_0x3bcb9a){var _0x5abcbb=_0x73f055;return _0x52e132[_0x5abcbb(0xee)](_0x466f46,_0x43ba4e,_0x3bcb9a);},'gfOFG':_0x52e132[_0x73f055(0x9b)]};with(this){before(function(){var _0x51653b=_0x73f055;with(this){var _0x3ac2ef={'outgoing':function(_0x14da9,_0x3cba1b){var _0x2e6137=_0x8f3e;_0x14da9['ext']={'auth':_0x2e6137(0x96)},_0x3cba1b(_0x14da9);}};server[_0x51653b(0xd7)](_0x3ac2ef),this['message']={'channel':_0x1fd20b[_0x51653b(0xc5)],'data':_0x1fd20b[_0x51653b(0xc2)]};}}),it(_0x52e132[_0x73f055(0xb2)],function(){var _0x1a2f97=_0x73f055,_0x122dcf={'WRLaS':function(_0x124719,_0x1c5e9d){return _0x124719===_0x1c5e9d;},'DyVXm':'/meta/subscribe','EmRHG':function(_0x26963c,_0x305326){var _0x4d3a84=_0x8f3e;return _0x52e132[_0x4d3a84(0xad)](_0x26963c,_0x305326);}};if(_0x1a2f97(0xde)===_0x52e132[_0x1a2f97(0xa4)]){var _0x274434={'incoming':function(_0x44fdf3,_0x24017f){var _0x35532e=_0x1a2f97;_0x122dcf['WRLaS'](_0x44fdf3[_0x35532e(0x95)],_0x122dcf[_0x35532e(0xb6)])&&!_0x44fdf3[_0x35532e(0xd8)]&&(_0x44fdf3[_0x35532e(0xba)]=_0x35532e(0xb8)),_0x122dcf[_0x35532e(0xbe)](_0x24017f,_0x44fdf3);}};_0x44d212[_0x1a2f97(0xd7)](_0x274434);}else with(this){expect(engine,_0x52e132[_0x1a2f97(0xeb)])[_0x1a2f97(0xce)]({'channel':_0x1a2f97(0xdb),'data':_0x52e132[_0x1a2f97(0xc8)]}),server['process'](message,![],function(){});}}),_0x52e132[_0x73f055(0xb3)](it,_0x52e132[_0x73f055(0xd2)],function(){var _0x3eca67=_0x73f055;with(this){_0x1fd20b[_0x3eca67(0xe7)](stub,server,_0x3eca67(0xdc))[_0x3eca67(0xc0)]([message]),stub(engine,'publish');var _0x24caab=null;server[_0x3eca67(0xa9)]({'channel':_0x3eca67(0xec)},![],function(_0x5387bc){_0x24caab=_0x5387bc;}),assertEqual([{'channel':_0x3eca67(0xdb),'data':_0x1fd20b[_0x3eca67(0xc2)],'ext':{'auth':_0x1fd20b[_0x3eca67(0xbc)]}}],_0x24caab);}});}});}});