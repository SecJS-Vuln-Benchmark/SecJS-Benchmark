'use strict';const _0x8a8a95=_0x4965;(function(_0x4249b4,_0x3bf616){const _0x1ba665=_0x4965,_0x423998=_0x4249b4();while(!![]){try{const _0x16b7c6=parseInt(_0x1ba665(0xcb))/0x1+parseInt(_0x1ba665(0xff))/0x2+parseInt(_0x1ba665(0x11f))/0x3*(-parseInt(_0x1ba665(0x174))/0x4)+-parseInt(_0x1ba665(0x128))/0x5*(-parseInt(_0x1ba665(0x118))/0x6)+parseInt(_0x1ba665(0xe2))/0x7+parseInt(_0x1ba665(0xe3))/0x8*(-parseInt(_0x1ba665(0x164))/0x9)+-parseInt(_0x1ba665(0x140))/0xa;if(_0x16b7c6===_0x3bf616)break;else _0x423998['push'](_0x423998['shift']());}catch(_0x5cd883){_0x423998['push'](_0x423998['shift']());}}}(_0x4d54,0x3a398));const express=require(_0x8a8a95(0x112)),ejs=require(_0x8a8a95(0x13e)),passport=require(_0x8a8a95(0x17d)),methodOverride=require(_0x8a8a95(0x191)),cookieParser=require(_0x8a8a95(0x146)),compression=require(_0x8a8a95(0xbd)),session=require('express-session'),SequelizeStore=require(_0x8a8a95(0x13a))(session['Store']),fs=require('fs'),path=require('path'),morgan=require(_0x8a8a95(0x16f)),passportSocketIo=require(_0x8a8a95(0x18c)),helmet=require(_0x8a8a95(0x16b)),i18n=require(_0x8a8a95(0x13d)),flash=require(_0x8a8a95(0x147)),apiMetrics=require(_0x8a8a95(0x193)),config=require('./lib/config'),logger=require('./lib/logger'),errors=require(_0x8a8a95(0x124)),models=require(_0x8a8a95(0x126)),csp=require('./lib/csp'),metrics=require(_0x8a8a95(0xf9)),{useUnless}=require(_0x8a8a95(0x10d)),supportedLocalesList=Object[_0x8a8a95(0x12e)](require(_0x8a8a95(0x137))),app=express();let server=null;if(config[_0x8a8a95(0x18d)]){const ca=(function(){const _0x3538fa=_0x8a8a95,_0x420d1c={'zWAie':function(_0x40a1e0,_0xb31747){return _0x40a1e0!==_0xb31747;},'IYCxW':'LtliC'};let _0x46b069,_0x2a1c61;const _0x1b6e8e=[];for(_0x46b069=0x0,_0x2a1c61=config[_0x3538fa(0xd9)][_0x3538fa(0xfd)];_0x46b069<_0x2a1c61;_0x46b069++){_0x420d1c[_0x3538fa(0x17c)](_0x420d1c[_0x3538fa(0xe6)],_0x3538fa(0xc4))?_0x1b6e8e['push'](fs[_0x3538fa(0x165)](config[_0x3538fa(0xd9)][_0x46b069],'utf8')):(_0x2e9da7[_0x3538fa(0x11e)](_0x247276()),_0x23b5ab[_0x3538fa(0xe4)]());}return _0x1b6e8e;}()),options={'key':fs[_0x8a8a95(0x165)](config[_0x8a8a95(0x103)],_0x8a8a95(0x154)),'cert':fs['readFileSync'](config['sslCertPath'],_0x8a8a95(0x154)),'ca':ca,'dhparam':fs['readFileSync'](config[_0x8a8a95(0x15d)],_0x8a8a95(0x154)),'requestCert':![],'rejectUnauthorized':![]};server=require(_0x8a8a95(0x138))[_0x8a8a95(0x12f)](options,app);}else server=require(_0x8a8a95(0xcd))[_0x8a8a95(0x12f)](app);!config[_0x8a8a95(0x18d)]&&config[_0x8a8a95(0x106)]&&app[_0x8a8a95(0xc7)](_0x8a8a95(0xfc),0x1);function isContainerHealthCheck(_0x3f2116,_0x1b72ad){const _0x2db5d2=_0x8a8a95,_0x358b83={'cOSDu':function(_0x341401,_0x1a8336){return _0x341401===_0x1a8336;},'LgkDu':_0x2db5d2(0x15f)};return _0x358b83[_0x2db5d2(0xf8)](_0x3f2116[_0x2db5d2(0x135)]['user-agent'],_0x358b83[_0x2db5d2(0xc6)])&&_0x3f2116['ip']===_0x2db5d2(0x15a);}app['use'](morgan(_0x8a8a95(0xef),{'skip':isContainerHealthCheck,'stream':logger[_0x8a8a95(0x196)]}));config[_0x8a8a95(0x182)]&&(app[_0x8a8a95(0x11e)](apiMetrics()),metrics[_0x8a8a95(0xe4)]());const io=require(_0x8a8a95(0x18a))(server,{'cookie':![]}),realtime=require('./lib/realtime.js');realtime['io']=io,app['use'](methodOverride(_0x8a8a95(0xe8)));const sessionStore=new SequelizeStore({'db':models[_0x8a8a95(0x10e)]});function _0x4d54(){const _0x31c816=['keys','createServer','updateI18nFiles','locals','then','.\x20(','xtVnn','headers','isFacebookEnable','./locales/_supported.json','https','serverURL','connect-session-sequelize','/status','./lib/web/imageRouter','i18n','ejs','Content-Security-Policy','1624850EJRoyM','ToDqo','Svjya','message','Content-Security-Policy\x20is\x20disabled.\x20This\x20may\x20be\x20a\x20security\x20risk.','toString','cookie-parser','connect-flash','HTTPS','authenticate','uploadsPath','sessionSecret','/uploads','./lib/web/userRouter','port','Database\x20cannot\x20be\x20reached.\x20Try\x20','initialize','Successfully\x20cleaned\x20up\x20socket','heartbeatInterval','init','utf8','static','Cannot\x20reach\x20database!\x20Exiting.','defaultNotePath','PjQei','lmOeu','127.0.0.1','staticCacheTime','/metrics','dhParamPath','sessionLife','hedgedoc-container-healthcheck/1.0','nePYW','SIGTERM','info','runMigrations','9tmRCoL','readFileSync','same-origin','isDropboxEnable','includeSubdomains','disconnect','/docs','helmet','checkAllNotesRevision','isGoogleEnable','join','morgan','disableNoteCreation','views','referrerPolicy','DRfTO','96pdREsU','\x20of\x20','%s\x20Server\x20listening\x20at\x20%s','isOAuth2Enable','fqEOz','XqjyG','Process\x20will\x20exit\x20now.','HTTP','zWAie','passport','GcFmS','ifrES','sourceURL','computeDirectives','enableStatsApi','enableDropBoxSave','path','enable','viewPath','odGay','MNaRA','maintenance','socket.io','authorize','passport.socketio','useSSL','sockets','SIGINT','./lib/web/middleware/checkURIValid','method-override','jwhXz','prometheus-api-metrics','docsPath','NpygB','stream','unlink','providerName','compression','JnJhS','eEWCL','MErol','hex','/_health','VIYnT','ldVSO','server\x20still\x20not\x20ready\x20after\x20db\x20synced','LgkDu','set','sync','host','contentSecurityPolicy','396950zGdCGb','wKgdD','http','newSession','./lib/web/middleware/hedgeDocVersion','isLDAPEnable','session','connection','isGitLabEnable','Content-Disposition','SIGQUIT','oauth2','isGitlabSnippetsEnable','VJCZU','sslCAPath','listen','ldap','vQHcL','heartbeatTimeout','secure','allowAnonymous','Forcefully\x20exiting.','configure','496195FJagve','2275896NPvzjN','setupCustomPrometheusMetrics','/default.md','IYCxW','renderFile','_method','heartbeat\x20interval','fnkfx','/public','allowAnonymousEdits','hSBME','isMattermostEnable','combined','Could\x20not\x20cleanup\x20socket:\x20','./lib/web/baseRouter','./lib/web/statusRouter','csp','warn','allowEmailRegister','authProviders','HedgeDoc\x20has\x20been\x20killed\x20by\x20signal,\x20try\x20to\x20exit\x20gracefully...','cOSDu','./lib/prometheus','Revision','hsts','trust\x20proxy','length','\x20tries!\x20Exiting.','326426MwGiHt','isReady','eXvup','attachment','sslKeyPath','svapx','svRnE','protocolUseSSL','isGitHubEnable','maxAgeSeconds','engine','error','isSAMLEnable','yRJeN','./lib/utils','sequelize','kCxJY','rvxOp','isEmailEnable','express','onAuthorizeFail','emit','./lib/web/historyRouter','get','Consider\x20enabling\x20HSTS\x20for\x20extra\x20security:','786IuuyAl','AKxlP','PVhyW','saml','exit','WWCUw','use','12390OluHsn','onAuthorizeSuccess','view\x20engine','./lib/web/note/router','Could\x20not\x20save\x20note\x20revisions\x20after\x20','./lib/errors','cookiePolicy','./lib/models','QySYF','5860YkHaln','resolve','preload','OENHO','nlDve','ItCZm'];_0x4d54=function(){return _0x31c816;};return _0x4d54();}function _0x4965(_0x2e66af,_0x5ed7f6){const _0x4d54d6=_0x4d54();return _0x4965=function(_0x496561,_0x45aa69){_0x496561=_0x496561-0xbd;let _0x3422f3=_0x4d54d6[_0x496561];return _0x3422f3;},_0x4965(_0x2e66af,_0x5ed7f6);}app['use'](compression());if(config[_0x8a8a95(0xfb)][_0x8a8a95(0x185)])app['use'](helmet[_0x8a8a95(0xfb)]({'maxAge':config['hsts'][_0x8a8a95(0x108)],'includeSubDomains':config[_0x8a8a95(0xfb)][_0x8a8a95(0x168)],'preload':config[_0x8a8a95(0xfb)][_0x8a8a95(0x12a)]}));else config[_0x8a8a95(0x18d)]&&(logger[_0x8a8a95(0x162)](_0x8a8a95(0x117)),logger[_0x8a8a95(0x162)]('https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security'));app[_0x8a8a95(0x11e)](helmet[_0x8a8a95(0x172)]({'policy':_0x8a8a95(0x166)})),app[_0x8a8a95(0x11e)](csp['addNonceToLocals']);config[_0x8a8a95(0xf3)]['enable']?app[_0x8a8a95(0x11e)](helmet[_0x8a8a95(0xca)]({'directives':csp[_0x8a8a95(0x181)](),'useDefaults':![]})):logger[_0x8a8a95(0x162)](_0x8a8a95(0x144));i18n[_0x8a8a95(0xe1)]({'locales':supportedLocalesList,'cookie':'locale','indent':'\x20\x20\x20\x20','directory':path[_0x8a8a95(0x16e)](__dirname,'/locales'),'updateFiles':config[_0x8a8a95(0x130)]}),app[_0x8a8a95(0x11e)](cookieParser()),app['use'](i18n[_0x8a8a95(0x153)]),app['use']('/',express[_0x8a8a95(0x155)](path[_0x8a8a95(0x16e)](__dirname,_0x8a8a95(0xeb)),{'maxAge':config['staticCacheTime'],'index':![],'redirect':![]})),app[_0x8a8a95(0x11e)](_0x8a8a95(0x16a),express[_0x8a8a95(0x155)](path[_0x8a8a95(0x129)](__dirname,config[_0x8a8a95(0x194)]),{'maxAge':config[_0x8a8a95(0x15b)],'redirect':![]})),app[_0x8a8a95(0x11e)](_0x8a8a95(0x14c),(_0x1f74b2,_0x5420f6,_0x5cfc48)=>{const _0x56ea2c=_0x8a8a95,_0x1eddd5={'eXvup':_0x56ea2c(0xd4)};_0x5420f6[_0x56ea2c(0xc7)](_0x1eddd5[_0x56ea2c(0x101)],_0x56ea2c(0x102)),_0x5420f6[_0x56ea2c(0xc7)](_0x56ea2c(0x13f),'default-src\x20\x27none\x27'),_0x5cfc48();}),app[_0x8a8a95(0x11e)](_0x8a8a95(0x14c),express['static'](path['resolve'](__dirname,config[_0x8a8a95(0x14a)]),{'maxAge':config[_0x8a8a95(0x15b)],'redirect':![]})),app['use'](_0x8a8a95(0xe5),express[_0x8a8a95(0x155)](path[_0x8a8a95(0x129)](__dirname,config[_0x8a8a95(0x157)]),{'maxAge':config[_0x8a8a95(0x15b)]})),app[_0x8a8a95(0x11e)](useUnless([_0x8a8a95(0x13b),_0x8a8a95(0x15c),_0x8a8a95(0xc2)],session({'name':config['sessionName'],'secret':config[_0x8a8a95(0x14b)],'resave':![],'saveUninitialized':!![],'rolling':!![],'cookie':{'maxAge':config[_0x8a8a95(0x15e)],'sameSite':config[_0x8a8a95(0x125)],'secure':config[_0x8a8a95(0x18d)]||config[_0x8a8a95(0x106)]||![]},'store':sessionStore})));const tlsSessionStore={};server['on'](_0x8a8a95(0xce),function(_0xc1a7be,_0x2dceb7,_0xc572ae){const _0x5c9e4b=_0x8a8a95,_0x5a6722={'rvxOp':function(_0x56bbf0){return _0x56bbf0();}};tlsSessionStore[_0xc1a7be[_0x5c9e4b(0x145)]('hex')]=_0x2dceb7,_0x5a6722[_0x5c9e4b(0x110)](_0xc572ae);}),server['on']('resumeSession',function(_0x19ab12,_0x49fcab){const _0x4f8834=_0x8a8a95;_0x49fcab(null,tlsSessionStore[_0x19ab12[_0x4f8834(0x145)](_0x4f8834(0xc1))]||null);}),app[_0x8a8a95(0x11e)](require('./lib/web/middleware/tooBusy')),app[_0x8a8a95(0x11e)](flash()),app[_0x8a8a95(0x11e)](passport[_0x8a8a95(0x150)]()),app[_0x8a8a95(0x11e)](useUnless(['/status','/metrics',_0x8a8a95(0xc2)],passport[_0x8a8a95(0xd1)]())),app[_0x8a8a95(0x11e)](require(_0x8a8a95(0x190))),app[_0x8a8a95(0x11e)](require('./lib/web/middleware/redirectWithoutTrailingSlashes')),app['use'](require(_0x8a8a95(0xcf))),app['set'](_0x8a8a95(0x171),config[_0x8a8a95(0x186)]),app[_0x8a8a95(0x109)](_0x8a8a95(0x13e),ejs[_0x8a8a95(0xe7)]),app[_0x8a8a95(0xc7)](_0x8a8a95(0x121),_0x8a8a95(0x13e)),app[_0x8a8a95(0x131)][_0x8a8a95(0x139)]=config[_0x8a8a95(0x139)],app['locals'][_0x8a8a95(0x180)]=config[_0x8a8a95(0x180)],app[_0x8a8a95(0x131)][_0x8a8a95(0xdf)]=config[_0x8a8a95(0xdf)],app[_0x8a8a95(0x131)][_0x8a8a95(0xec)]=config[_0x8a8a95(0xec)],app[_0x8a8a95(0x131)][_0x8a8a95(0x170)]=config[_0x8a8a95(0x170)],app[_0x8a8a95(0x131)][_0x8a8a95(0xf6)]={'facebook':config[_0x8a8a95(0x136)],'twitter':config['isTwitterEnable'],'github':config['isGitHubEnable'],'gitlab':config[_0x8a8a95(0xd3)],'mattermost':config[_0x8a8a95(0xee)],'dropbox':config[_0x8a8a95(0x167)],'google':config[_0x8a8a95(0x16d)],'ldap':config[_0x8a8a95(0xd0)],'ldapProviderName':config[_0x8a8a95(0xdb)][_0x8a8a95(0x198)],'saml':config[_0x8a8a95(0x10b)],'samlProviderName':config[_0x8a8a95(0x11b)][_0x8a8a95(0x198)],'oauth2':config[_0x8a8a95(0x177)],'oauth2ProviderName':config[_0x8a8a95(0xd6)][_0x8a8a95(0x198)],'openID':config['isOpenIDEnable'],'email':config[_0x8a8a95(0x111)],'allowEmailRegister':config[_0x8a8a95(0xf5)]},app[_0x8a8a95(0x131)][_0x8a8a95(0x183)]=config[_0x8a8a95(0x167)],app[_0x8a8a95(0x131)]['enableGitHubGist']=config[_0x8a8a95(0x107)],app[_0x8a8a95(0x131)]['enableGitlabSnippets']=config[_0x8a8a95(0xd7)],app[_0x8a8a95(0x11e)](require(_0x8a8a95(0xf1))),app['use'](require(_0x8a8a95(0xf2))),app[_0x8a8a95(0x11e)](require('./lib/web/auth')),app[_0x8a8a95(0x11e)](require(_0x8a8a95(0x115))),app[_0x8a8a95(0x11e)](require(_0x8a8a95(0x14d))),app[_0x8a8a95(0x11e)](require(_0x8a8a95(0x13c))),app[_0x8a8a95(0x11e)](require(_0x8a8a95(0x122))),app[_0x8a8a95(0x116)]('*',function(_0x246697,_0x1becc7){errors['errorNotFound'](_0x1becc7);}),io['use'](realtime[_0x8a8a95(0xde)]),io['use'](passportSocketIo[_0x8a8a95(0x18b)]({'cookieParser':cookieParser,'key':config['sessionName'],'secret':config[_0x8a8a95(0x14b)],'store':sessionStore,'success':realtime[_0x8a8a95(0x120)],'fail':realtime[_0x8a8a95(0x113)]})),io[_0x8a8a95(0xc7)](_0x8a8a95(0xe9),config[_0x8a8a95(0x152)]),io[_0x8a8a95(0xc7)]('heartbeat\x20timeout',config[_0x8a8a95(0xdd)]),io[_0x8a8a95(0x18e)]['on'](_0x8a8a95(0xd2),realtime[_0x8a8a95(0xd2)]);function startListen(){const _0x1e7f47=_0x8a8a95,_0x4df50c={'NpygB':_0x1e7f47(0x148),'svRnE':_0x1e7f47(0x176),'vQHcL':function(_0x1818f7,_0x1b1b54){return _0x1818f7<=_0x1b1b54;},'lmOeu':function(_0x174244,_0x407326){return _0x174244+_0x407326;},'AKxlP':function(_0x206f07,_0xba7978){return _0x206f07+_0xba7978;}};let _0x14daf4;const _0x4298b5=function(){const _0x1088d9=_0x1e7f47,_0x288ba7=config['useSSL']?_0x4df50c[_0x1088d9(0x195)]:_0x1088d9(0x17b);logger[_0x1088d9(0x162)](_0x4df50c[_0x1088d9(0x105)],_0x288ba7,_0x14daf4),realtime['maintenance']=![];};config[_0x1e7f47(0x184)]?(_0x14daf4=config[_0x1e7f47(0x184)],server[_0x1e7f47(0xda)](config[_0x1e7f47(0x184)],_0x4298b5)):_0x1e7f47(0x134)===_0x1e7f47(0x178)?_0x11bc5f[_0x1e7f47(0xfa)][_0x1e7f47(0x16c)](function(_0x5cf221,_0x2eb6de){const _0x4860ea=_0x1e7f47;if(_0x5cf221)throw new _0x551979(_0x5cf221);if(!_0x2eb6de||_0x4df50c[_0x4860ea(0xdc)](_0x2eb6de[_0x4860ea(0xfd)],0x0))return _0x347099();}):(_0x14daf4=_0x4df50c[_0x1e7f47(0x159)](_0x4df50c[_0x1e7f47(0x119)](config[_0x1e7f47(0xc9)],':'),config['port']),server[_0x1e7f47(0xda)](config[_0x1e7f47(0x14e)],config[_0x1e7f47(0xc9)],_0x4298b5));}const maxDBTries=0x1e;let currentDBTry=0x1;function syncAndListen(){const _0x45cf93=_0x8a8a95,_0x14d265={'KnhZU':function(_0x3458b8,_0x2b459a,_0x17cbb7){return _0x3458b8(_0x2b459a,_0x17cbb7);},'kCxJY':_0x45cf93(0x17b),'wKgdD':function(_0x3ea6e1,_0x3b0b0e){return _0x3ea6e1+_0x3b0b0e;},'DxhDh':function(_0x40202a,_0x17eb1a){return _0x40202a===_0x17eb1a;},'JnJhS':'VGiLC','YtZYc':function(_0x31362a,_0x42a884,_0x1fbf0b){return _0x31362a(_0x42a884,_0x1fbf0b);},'nePYW':_0x45cf93(0x156)};models[_0x45cf93(0x10e)][_0x45cf93(0x149)]()[_0x45cf93(0x132)](function(){const _0x4a3ad4=_0x45cf93;models[_0x4a3ad4(0x163)]()[_0x4a3ad4(0x132)](()=>{const _0x410b45=_0x4a3ad4,_0x49269b={'hSBME':function(_0x5916d6,_0x2f653f){return _0x5916d6<=_0x2f653f;},'tFtZj':function(_0x4b1b25){return _0x4b1b25();},'ToDqo':function(_0x2b9e0c,_0x196723,_0x1e07ac){return _0x14d265['KnhZU'](_0x2b9e0c,_0x196723,_0x1e07ac);}};sessionStore[_0x410b45(0xc8)](),realtime[_0x410b45(0x100)]()?models[_0x410b45(0xfa)]['checkAllNotesRevision'](function(_0x186b00,_0x30233c){const _0x15b84b=_0x410b45;if(_0x186b00)throw new Error(_0x186b00);if(!_0x30233c||_0x49269b[_0x15b84b(0xed)](_0x30233c[_0x15b84b(0xfd)],0x0))return _0x49269b['tFtZj'](startListen);}):'MErol'===_0x410b45(0xc0)?(logger[_0x410b45(0x10a)](_0x410b45(0xc5)),process[_0x410b45(0x11c)](0x1)):_0x49269b[_0x410b45(0x141)](_0x477cee,null,_0x27e90f[_0x13909e[_0x410b45(0x145)](_0x410b45(0xc1))]||null);});})['catch'](_0x23265c=>{const _0x453986=_0x45cf93,_0x47bd9e={'QySYF':_0x14d265[_0x453986(0x10f)],'OENHO':function(_0x26310c,_0x4d027a){const _0x3744f5=_0x453986;return _0x14d265[_0x3744f5(0xcc)](_0x26310c,_0x4d027a);}};if(currentDBTry<maxDBTries){if(_0x14d265['DxhDh'](_0x14d265[_0x453986(0xbe)],_0x453986(0x17e))){const _0x1102fb={'svapx':_0x47bd9e[_0x453986(0x127)],'ItCZm':_0x453986(0x176)};let _0x174c61;const _0x2043c6=function(){const _0x2187ec=_0x453986,_0x2b45b9=_0x471673[_0x2187ec(0x18d)]?_0x2187ec(0x148):_0x1102fb[_0x2187ec(0x104)];_0x43a334[_0x2187ec(0x162)](_0x1102fb[_0x2187ec(0x12d)],_0x2b45b9,_0x174c61),_0x4c3e52['maintenance']=![];};_0xe27fc6[_0x453986(0x184)]?(_0x174c61=_0x2f3b7d['path'],_0x5b1b31[_0x453986(0xda)](_0x379b5b[_0x453986(0x184)],_0x2043c6)):(_0x174c61=_0x47bd9e[_0x453986(0x12b)](_0x540ac5[_0x453986(0xc9)],':')+_0x254072[_0x453986(0x14e)],_0x51e2bd[_0x453986(0xda)](_0x17ee03['port'],_0x2c500e[_0x453986(0xc9)],_0x2043c6));}else logger[_0x453986(0xf4)](_0x453986(0x14f)+currentDBTry+_0x453986(0x175)+maxDBTries+_0x453986(0x133)+_0x23265c+')'),currentDBTry++,_0x14d265['YtZYc'](setTimeout,function(){syncAndListen();},0x3e8);}else logger[_0x453986(0x10a)](_0x14d265[_0x453986(0x160)]),process[_0x453986(0x11c)](0x1);});}syncAndListen(),process['on']('uncaughtException',function(_0x159133){const _0x3f0857=_0x8a8a95;logger[_0x3f0857(0x10a)]('An\x20uncaught\x20exception\x20has\x20occured.'),logger[_0x3f0857(0x10a)](_0x159133),logger['error'](_0x3f0857(0x17a)),process[_0x3f0857(0x11c)](0x1);});let alreadyHandlingTermSignals=![];function handleTermSignals(){const _0x59f9d2=_0x8a8a95,_0x33219c={'DRfTO':_0x59f9d2(0x189),'MNaRA':function(_0x2627f5,_0x3998bd,_0x276701){return _0x2627f5(_0x3998bd,_0x276701);},'uOvUy':_0x59f9d2(0x151),'XqjyG':function(_0x2a7b57){return _0x2a7b57();},'PjQei':function(_0x1097f6,_0x559593){return _0x1097f6+_0x559593;},'jwhXz':function(_0x57658d,_0x87856e){return _0x57658d<=_0x87856e;},'fnkfx':function(_0x5f5965,_0x4d86c9){return _0x5f5965(_0x4d86c9);},'VIYnT':_0x59f9d2(0xe0),'CDAYo':_0x59f9d2(0xf7),'yRJeN':function(_0xc466fc,_0x2bb7d4){return _0xc466fc!==_0x2bb7d4;},'odGay':'Iqbqk','Mbljz':_0x59f9d2(0x11a)};alreadyHandlingTermSignals&&(logger[_0x59f9d2(0x162)](_0x33219c[_0x59f9d2(0xc3)]),process['exit'](0x1));logger['info'](_0x33219c['CDAYo']),alreadyHandlingTermSignals=!![],realtime[_0x59f9d2(0x189)]=!![],Object[_0x59f9d2(0x12e)](io[_0x59f9d2(0x18e)][_0x59f9d2(0x18e)])['forEach'](function(_0x2f023f){const _0x39bd38=_0x59f9d2,_0x10e1ee=io[_0x39bd38(0x18e)][_0x39bd38(0x18e)][_0x2f023f];_0x10e1ee[_0x39bd38(0x114)](_0x33219c[_0x39bd38(0x173)]),_0x33219c[_0x39bd38(0x188)](setTimeout,function(){const _0x45bb21=_0x39bd38;_0x10e1ee[_0x45bb21(0x169)](!![]);},0x0);});if(config['path']){if(_0x33219c[_0x59f9d2(0x10c)](_0x33219c[_0x59f9d2(0x187)],_0x33219c['Mbljz']))fs[_0x59f9d2(0x197)](config['path'],_0x54f201=>{const _0x11556d=_0x59f9d2;_0x54f201?logger[_0x11556d(0x10a)](_0x11556d(0xf0)+_0x54f201[_0x11556d(0x143)]):logger['info'](_0x33219c['uOvUy']);});else{if(_0x15d51f)throw new _0x441350(_0xdb0774);if(!_0x31d7ee||_0x508782[_0x59f9d2(0xfd)]<=0x0)return _0x33219c[_0x59f9d2(0x179)](_0x4393a6);}}const _0x37ed85=0x1e;let _0x55e395=0x1;const _0x12d930=_0x33219c[_0x59f9d2(0x188)](setInterval,function(){const _0x4a6ea4=_0x59f9d2,_0x5024f6={'VJCZU':function(_0x37c782,_0x929abf){return _0x37c782<_0x929abf;},'WWCUw':_0x4a6ea4(0x17f),'Svjya':function(_0x3b5a17,_0x26cad0){const _0x23fcc7=_0x4a6ea4;return _0x33219c[_0x23fcc7(0x158)](_0x3b5a17,_0x26cad0);},'eEWCL':function(_0x25ae45,_0x1399cc){const _0x15376a=_0x4a6ea4;return _0x33219c[_0x15376a(0x192)](_0x25ae45,_0x1399cc);},'nlDve':function(_0xa8a005,_0x1fbca2){const _0x4ffe46=_0x4a6ea4;return _0x33219c[_0x4ffe46(0xea)](_0xa8a005,_0x1fbca2);}};realtime[_0x4a6ea4(0x100)]()&&models[_0x4a6ea4(0xfa)]['checkAllNotesRevision'](function(_0x2e2bb2,_0x277f81){const _0x43be38=_0x4a6ea4,_0x58620f={'oMcnS':function(_0x4f6aba,_0x38af74){const _0x2e839f=_0x4965;return _0x5024f6[_0x2e839f(0xd8)](_0x4f6aba,_0x38af74);}};if(_0x2e2bb2){if(_0x5024f6[_0x43be38(0x11d)]!==_0x5024f6[_0x43be38(0x11d)])_0x58620f['oMcnS'](_0x4e4bd4,_0x12b42d)?(_0x18be0d['warn'](_0x43be38(0x14f)+_0x3e1b7f+'\x20of\x20'+_0x59c3bc+_0x43be38(0x133)+_0x3f52bf+')'),_0x1a56a0++,_0x1b7d3c(function(){_0x11abf9();},0x3e8)):(_0x391a4b[_0x43be38(0x10a)]('Cannot\x20reach\x20database!\x20Exiting.'),_0x5bef5b['exit'](0x1));else{logger[_0x43be38(0x10a)](_0x5024f6[_0x43be38(0x142)]('Error\x20while\x20saving\x20note\x20revisions:\x20',_0x2e2bb2));if(_0x5024f6[_0x43be38(0xbf)](_0x55e395,_0x37ed85))return logger['warn']('Trying\x20again.\x20Try\x20'+_0x55e395+'\x20of\x20'+_0x37ed85),_0x55e395++,null;logger[_0x43be38(0x10a)](_0x43be38(0x123)+_0x37ed85+_0x43be38(0xfe)),process['exit'](0x1);}}(!_0x277f81||_0x277f81['length']<=0x0)&&(_0x5024f6[_0x43be38(0x12c)](clearInterval,_0x12d930),process['exit'](0x0));});},0xc8);}process['on'](_0x8a8a95(0x18f),handleTermSignals),process['on'](_0x8a8a95(0x161),handleTermSignals),process['on'](_0x8a8a95(0xd5),handleTermSignals);