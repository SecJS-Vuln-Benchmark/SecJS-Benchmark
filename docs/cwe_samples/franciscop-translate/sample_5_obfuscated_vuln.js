var _0x4ad0eb=_0xc358;function _0xf151(){var _0x5f0cb6=['should\x20not\x20crash\x20on\x20malformed\x20request\x20that\x20causes\x20two\x20errors\x20to\x20be\x20emitted\x20by\x20busboy','SUCCESS','lRRsZ','code','should\x20not\x20crash\x20on\x20malformed\x20request','19919000HBSJBN','FZRJT','Ictob','2103fbdZXj','POST','form-data','LIMIT_FILE_SIZE','single','FqtHI','xWxRS','QckhH','/t2','Router','end','status','TJEgc','jeqZF','localhost','../','concat-stream','error','Unexpected\x20end\x20of\x20form','KrteS','zLxsZ','/profile','ERROR','./_util','217UaABcU','1237638rDaMvn','AaB03x','tkAZV','208782RSnMJC','Malformed\x20part\x20header','bQwAI','buffer','384kBvJEz','ywvNe','PJIxd','2280620kdiELb','request','obvmP','nqpGq','dohfb','/upload2','response','ldxnD','Fzbaf','submit','QTgRS','ifError','PdywW','WQCEn','FcWbc','kfXdR','oVphU','229842TOHfQQ','7244PbLyxA','use','TEST','strictEqual','large.jpg','DKvxI','Request\x20should\x20not\x20be\x20processed','assert','rwJFw','QUhVx','statusCode','avatar','/t1','5|4|6|7|8|1|2|10|3|9|0','message','jBSEn','join','dcSaX','/upload','592792lGJOEF','post','fYYcL','listen','multipart/form-data;\x20boundary=','Express\x20Integration','file','Content-Type:\x20text/plain','write','test\x20without\x20end\x20boundary','spEzn','http','toString'];_0xf151=function(){return _0x5f0cb6;};return _0xf151();}function _0xc358(_0x29e12e,_0x21f09c){var _0xf15154=_0xf151();return _0xc358=function(_0xc35820,_0x29d59f){_0xc35820=_0xc35820-0xdc;var _0x32075b=_0xf15154[_0xc35820];return _0x32075b;},_0xc358(_0x29e12e,_0x21f09c);}(function(_0x540843,_0xf724df){var _0x444c59=_0xc358,_0x192dff=_0x540843();while(!![]){try{var _0x5c52b5=parseInt(_0x444c59(0x107))/0x1+parseInt(_0x444c59(0x135))/0x2+-parseInt(_0x444c59(0x11c))/0x3*(-parseInt(_0x444c59(0xf4))/0x4)+parseInt(_0x444c59(0xe2))/0x5+-parseInt(_0x444c59(0x138))/0x6*(-parseInt(_0x444c59(0x134))/0x7)+parseInt(_0x444c59(0xdf))/0x8*(-parseInt(_0x444c59(0xf3))/0x9)+-parseInt(_0x444c59(0x119))/0xa;if(_0x5c52b5===_0xf724df)break;else _0x192dff['push'](_0x192dff['shift']());}catch(_0x852c1){_0x192dff['push'](_0x192dff['shift']());}}}(_0xf151,0xc2e15));var assert=require(_0x4ad0eb(0xfb)),http=require(_0x4ad0eb(0x112)),multer=require(_0x4ad0eb(0x12b)),util=require(_0x4ad0eb(0x133)),express=require('express'),FormData=require(_0x4ad0eb(0x11e)),concat=require(_0x4ad0eb(0x12c)),port=0x85e7;describe(_0x4ad0eb(0x10c),function(){var _0x3bca98=_0x4ad0eb,_0x30a308={'nncDt':_0x3bca98(0xde),'FZRJT':function(_0x2a0827,_0x2fd139){return _0x2a0827+_0x2fd139;},'xWxRS':'http://localhost:','DKvxI':_0x3bca98(0x115),'bQwAI':_0x3bca98(0x11f),'QUhVx':_0x3bca98(0x100),'QTgRS':'/t1/profile','rwJFw':_0x3bca98(0xf6),'oVphU':function(_0x3b038f){return _0x3b038f();},'TJEgc':function(_0x3891ae,_0x4588ac){return _0x3891ae(_0x4588ac);},'Fzbaf':_0x3bca98(0xf8),'PJIxd':'avatar','rIlaL':_0x3bca98(0x124),'QckhH':function(_0x2b93d7,_0xc712ad){return _0x2b93d7===_0xc712ad;},'Ictob':_0x3bca98(0x12e),'lRRsZ':'Correct\x20error','xLDKL':function(_0x15a133){return _0x15a133();},'dohfb':'Content-Disposition:\x20form-data;\x20name=\x22file\x22;\x20filename=\x22test.txt\x22','KrteS':_0x3bca98(0x10e),'kfXdR':_0x3bca98(0x110),'WQCEn':_0x3bca98(0x12d),'dcSaX':_0x3bca98(0x12a),'FcWbc':_0x3bca98(0x10b),'oBBXy':_0x3bca98(0x136),'spEzn':function(_0x4c5429,_0x4f3ece,_0x71881a){return _0x4c5429(_0x4f3ece,_0x71881a);}},_0x1a399a;before(function(_0x2dc13a){var _0x58fbb6=_0x3bca98;_0x1a399a=express(),_0x1a399a[_0x58fbb6(0x10a)](port,_0x2dc13a);});function _0x5bd7f1(_0x4b5ab1,_0x49cb71,_0x511a00){var _0x4a3f08=_0x3bca98,_0x1d5bce=_0x4b5ab1[_0x4a3f08(0xeb)](_0x30a308['FZRJT'](_0x30a308[_0x4a3f08(0x122)],port)+_0x49cb71);_0x1d5bce['on']('error',_0x511a00),_0x1d5bce['on'](_0x4a3f08(0xe8),function(_0x50a6c9){var _0x25d237=_0x4a3f08;_0x50a6c9['on'](_0x25d237(0x12d),_0x511a00),_0x50a6c9['pipe'](concat({'encoding':_0x30a308['nncDt']},function(_0x1a388b){_0x511a00(null,_0x50a6c9,_0x1a388b);}));});}it('should\x20work\x20with\x20express\x20error\x20handling',function(_0x5de9ed){var _0x109bb3=_0x3bca98,_0x233d2e={'fileSize':0xc8},_0xc857b=multer({'limits':_0x233d2e}),_0x42550f=new express['Router'](),_0x238209=new FormData(),_0x34d138=0x0,_0x4a0c3f=0x0;_0x238209['append'](_0x109bb3(0xff),util[_0x109bb3(0x10d)]('large.jpg')),_0x42550f['post'](_0x109bb3(0x131),_0xc857b[_0x109bb3(0x120)](_0x109bb3(0xff)),function(_0x2f1c8b,_0x32a282,_0x113cd8){var _0x2e7973=_0x109bb3;_0x34d138++,_0x32a282[_0x2e7973(0x127)](0xc8)[_0x2e7973(0x126)](_0x30a308[_0x2e7973(0xf9)]);}),_0x42550f[_0x109bb3(0xf5)](function(_0x3b5e79,_0x465830,_0x393186,_0x27f230){var _0x5e3f3a=_0x109bb3;assert[_0x5e3f3a(0xf7)](_0x3b5e79[_0x5e3f3a(0x117)],_0x30a308[_0x5e3f3a(0xdd)]),_0x4a0c3f++,_0x393186[_0x5e3f3a(0x127)](0x1f4)[_0x5e3f3a(0x126)]('ERROR');}),_0x1a399a['use'](_0x30a308[_0x109bb3(0xfd)],_0x42550f),_0x5bd7f1(_0x238209,_0x30a308[_0x109bb3(0xec)],function(_0x22a361,_0x23b1d1,_0xa6605){var _0x2c52c1=_0x109bb3;assert[_0x2c52c1(0xed)](_0x22a361),assert[_0x2c52c1(0xf7)](_0x34d138,0x0),assert[_0x2c52c1(0xf7)](_0x4a0c3f,0x1),assert[_0x2c52c1(0xf7)](_0xa6605[_0x2c52c1(0x113)](),_0x2c52c1(0x132)),assert['strictEqual'](_0x23b1d1[_0x2c52c1(0xfe)],0x1f4),_0x5de9ed();});}),_0x30a308[_0x3bca98(0x111)](it,'should\x20work\x20when\x20receiving\x20error\x20from\x20fileFilter',function(_0x52ecea){var _0x52acce=_0x3bca98,_0x359eb1={'ldxnD':_0x30a308['rwJFw'],'qzJnm':_0x52acce(0x132),'zLxsZ':function(_0x5eed3a){var _0x5adcde=_0x52acce;return _0x30a308[_0x5adcde(0xf2)](_0x5eed3a);}};function _0x312f2b(_0x1de0ee,_0x123ef3,_0x4569b5){var _0x15c06e=_0x52acce;_0x4569b5(new Error(_0x30a308[_0x15c06e(0xfc)]));}var _0x7d4119=_0x30a308[_0x52acce(0x128)](multer,{'fileFilter':_0x312f2b}),_0x9eec2f=new express[(_0x52acce(0x125))](),_0x12a4d2=new FormData(),_0x1eceb8=0x0,_0x3ac260=0x0;_0x12a4d2['append'](_0x52acce(0xff),util[_0x52acce(0x10d)](_0x30a308[_0x52acce(0xea)])),_0x9eec2f[_0x52acce(0x108)](_0x52acce(0x131),_0x7d4119[_0x52acce(0x120)](_0x30a308[_0x52acce(0xe1)]),function(_0x330feb,_0x3126eb,_0x4fe61b){var _0x244d9a=_0x52acce;_0x1eceb8++,_0x3126eb[_0x244d9a(0x127)](0xc8)[_0x244d9a(0x126)](_0x244d9a(0x115));}),_0x9eec2f['use'](function(_0x2ef324,_0x29ce59,_0x357359,_0x13fea2){var _0x22672a=_0x52acce;assert['strictEqual'](_0x2ef324['message'],_0x359eb1[_0x22672a(0xe9)]),_0x3ac260++,_0x357359[_0x22672a(0x127)](0x1f4)[_0x22672a(0x126)](_0x22672a(0x132));}),_0x1a399a[_0x52acce(0xf5)](_0x30a308['rIlaL'],_0x9eec2f),_0x5bd7f1(_0x12a4d2,'/t2/profile',function(_0x398ff4,_0x23f8da,_0x14a606){var _0x4c5647=_0x52acce;assert[_0x4c5647(0xed)](_0x398ff4),assert[_0x4c5647(0xf7)](_0x1eceb8,0x0),assert[_0x4c5647(0xf7)](_0x3ac260,0x1),assert[_0x4c5647(0xf7)](_0x14a606[_0x4c5647(0x113)](),_0x359eb1['qzJnm']),assert['strictEqual'](_0x23f8da[_0x4c5647(0xfe)],0x1f4),_0x359eb1[_0x4c5647(0x130)](_0x52ecea);});}),_0x30a308['spEzn'](it,_0x3bca98(0x118),function(_0x50a8be){var _0x44c40a=_0x3bca98,_0x56b0f4={'tkAZV':function(_0x3af236,_0xcd9485){var _0xc33bf6=_0xc358;return _0x30a308[_0xc33bf6(0x123)](_0x3af236,_0xcd9485);},'fYYcL':_0x44c40a(0xee),'FqtHI':_0x30a308[_0x44c40a(0x11b)],'jBSEn':_0x30a308[_0x44c40a(0x116)],'nqpGq':function(_0x468120){return _0x30a308['xLDKL'](_0x468120);}},_0x50a06b=multer();_0x1a399a['post'](_0x44c40a(0x106),_0x50a06b[_0x44c40a(0x120)](_0x44c40a(0x10d)),function(_0x5d2022,_0x4e28fe){var _0x12d4ec=_0x44c40a;_0x4e28fe[_0x12d4ec(0x127)](0x1f4)[_0x12d4ec(0x126)](_0x12d4ec(0xfa));}),_0x1a399a[_0x44c40a(0xf5)](function(_0x16b24a,_0x23fc77,_0x3a74c1,_0x10dd07){var _0x4e1895=_0x44c40a;_0x56b0f4[_0x4e1895(0x137)](_0x56b0f4[_0x4e1895(0x109)],_0x4e1895(0x129))?_0xe5058f[_0x4e1895(0x127)](0x1f4)['end'](_0x4e1895(0xfa)):(assert[_0x4e1895(0xf7)](_0x16b24a[_0x4e1895(0x102)],_0x56b0f4[_0x4e1895(0x121)]),_0x3a74c1[_0x4e1895(0x127)](0xc8)['end'](_0x56b0f4[_0x4e1895(0x103)]));});var _0x2ac5f1='AaB03x',_0x2448ea=['--'+_0x2ac5f1,_0x30a308[_0x44c40a(0xe6)],_0x30a308[_0x44c40a(0x12f)],'',_0x30a308[_0x44c40a(0xf1)]][_0x44c40a(0x104)]('\x0d\x0a'),_0x19a599={'hostname':'localhost','port':port,'path':_0x44c40a(0x106),'method':_0x44c40a(0x11d),'headers':{'content-type':_0x44c40a(0x10b)+_0x2ac5f1,'content-length':_0x2448ea['length']}},_0x33a6a6=http['request'](_0x19a599,_0x504d57=>{var _0x410d24=_0x44c40a;assert[_0x410d24(0xf7)](_0x504d57[_0x410d24(0xfe)],0xc8),_0x56b0f4[_0x410d24(0xe5)](_0x50a8be);});_0x33a6a6['on'](_0x30a308[_0x44c40a(0xef)],_0x5bd3c8=>{_0x50a8be(_0x5bd3c8);}),_0x33a6a6[_0x44c40a(0x10f)](_0x2448ea),_0x33a6a6['end']();}),_0x30a308[_0x3bca98(0x111)](it,_0x3bca98(0x114),function(_0x21b658){var _0x4ad719=_0x3bca98,_0x51ac4e=_0x4ad719(0x101)['split']('|'),_0x1aebb9=0x0;while(!![]){switch(_0x51ac4e[_0x1aebb9++]){case'0':_0x10ff15[_0x4ad719(0x126)]();continue;case'1':var _0x4f4291=['--'+_0x88c7d4,'Content-Disposition:\x20form-data;\x20name=\x22file\x22;\x20filename=\x22test.txt\x22',_0x30a308[_0x4ad719(0x12f)],'',_0x30a308[_0x4ad719(0x11a)]('--'+_0x88c7d4,'--'),''][_0x4ad719(0x104)]('\x0d\x0a');continue;case'2':var _0x2da3fc={'hostname':_0x30a308[_0x4ad719(0x105)],'port':port,'path':_0x4ad719(0xe7),'method':_0x4ad719(0x11d),'headers':{'content-type':_0x30a308[_0x4ad719(0x11a)](_0x30a308[_0x4ad719(0xf0)],_0x88c7d4),'content-length':_0x4f4291['length']}};continue;case'3':_0x10ff15['on'](_0x30a308[_0x4ad719(0xef)],_0x3a981a=>{var _0x36acbf=_0x4ad719;_0x3e7afe[_0x36acbf(0xe4)](_0x21b658,_0x3a981a);});continue;case'4':var _0x534aa2=multer();continue;case'5':var _0x3e7afe={'ywvNe':function(_0xe3afe7){return _0x30a308['xLDKL'](_0xe3afe7);},'obvmP':function(_0x4d9c8d,_0x1b77ed){return _0x4d9c8d(_0x1b77ed);}};continue;case'6':_0x1a399a[_0x4ad719(0x108)](_0x4ad719(0xe7),_0x534aa2[_0x4ad719(0x120)]('file'),function(_0x242c3f,_0x520cba){var _0x3ad7da=_0x4ad719;_0x520cba[_0x3ad7da(0x127)](0x1f4)[_0x3ad7da(0x126)]('Request\x20should\x20not\x20be\x20processed');});continue;case'7':_0x1a399a[_0x4ad719(0xf5)](function(_0x46b3ce,_0x33e8f5,_0xe546c6,_0x9f8878){var _0x493c02=_0x4ad719;assert[_0x493c02(0xf7)](_0x46b3ce[_0x493c02(0x102)],_0x493c02(0xdc)),_0xe546c6[_0x493c02(0x127)](0xc8)[_0x493c02(0x126)](_0x30a308[_0x493c02(0x116)]);});continue;case'8':var _0x88c7d4=_0x30a308['oBBXy'];continue;case'9':_0x10ff15[_0x4ad719(0x10f)](_0x4f4291);continue;case'10':var _0x10ff15=http[_0x4ad719(0xe3)](_0x2da3fc,_0xd78c55=>{var _0x1b706b=_0x4ad719;assert[_0x1b706b(0xf7)](_0xd78c55[_0x1b706b(0xfe)],0xc8),_0x3e7afe[_0x1b706b(0xe0)](_0x21b658);});continue;}break;}});});