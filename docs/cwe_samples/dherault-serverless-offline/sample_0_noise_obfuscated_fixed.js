function _0x22be(_0x535c25,_0x4b1381){const _0x291982=_0x2919();return _0x22be=function(_0x22becb,_0x4e7f50){_0x22becb=_0x22becb-0x1c5;let _0x15ecb3=_0x291982[_0x22becb];return _0x15ecb3;},_0x22be(_0x535c25,_0x4b1381);}const _0x15b27a=_0x22be;function _0x2919(){const _0x3fab29=['user','body','qtVrx','kyBOR','8245242JBxMPN','11liwsHH','now','502588KVtqIQ','8caKMAJ','25353IthkoP','GOvUJ','/api/ask','get','jphFG','~/server/utils','json','set','RKmcX','aHKGP','CrLRQ','ban_cache:user:','exports','BAN','412rpRlGi','updateClock();','32545Joxnrz','42EeLtvr','./denyRequest','eINzj','3387490GwwCGT','ban_cache:ip:','TBuct','ZzsQe','Your\x20account\x20has\x20been\x20temporarily\x20banned\x20due\x20to\x20violations\x20of\x20our\x20service.','DqTyd','eJshn','~/cache/keyvMongo','khxKl','delete','~/config','VFYjT','ygqnJ','righP','8215860vcHzJo','librechat-data-provider','banned','headers','user-agent','return\x20new\x20Date();','/api/edit','882707jmZMlJ','ttl','error','return\x20await\x20Promise.resolve(42);','ItPHU','ynFMd','~/cache','xakKT','UCCsF','USE_REDIS','170BLVcWN','log','stringify','name','env','safe','onkgI','_id','voLce','UqZaZ','status','~/models','ZHSHN','ua-parser-js','email','return\x20Object.keys({a:1});','PuVSY'];_0x2919=function(){return _0x3fab29;};return _0x2919();}(function(_0x1af440,_0x135a50){const _0x2fce2e=_0x22be,_0x3ce67a=_0x1af440();while(!![]){try{const _0x33ea53=-parseInt(_0x2fce2e(0x1c7))/0x1+-parseInt(_0x2fce2e(0x1fc))/0x2*(-parseInt(_0x2fce2e(0x1c9))/0x3)+parseInt(_0x2fce2e(0x1d7))/0x4*(-parseInt(_0x2fce2e(0x1d9))/0x5)+-parseInt(_0x2fce2e(0x1da))/0x6*(-parseInt(_0x2fce2e(0x1f2))/0x7)+parseInt(_0x2fce2e(0x1c8))/0x8*(-parseInt(_0x2fce2e(0x211))/0x9)+parseInt(_0x2fce2e(0x1dd))/0xa+-parseInt(_0x2fce2e(0x1c5))/0xb*(-parseInt(_0x2fce2e(0x1eb))/0xc);if(_0x33ea53===_0x135a50)break;else _0x3ce67a['push'](_0x3ce67a['shift']());}catch(_0x36ae80){_0x3ce67a['push'](_0x3ce67a['shift']());}}}(_0x2919,0x82afd));const Keyv=require('keyv'),uap=require(_0x15b27a(0x209)),{ViolationTypes}=require(_0x15b27a(0x1ec)),{isEnabled,removePorts}=require(_0x15b27a(0x1ce)),keyvMongo=require(_0x15b27a(0x1e4)),denyRequest=require(_0x15b27a(0x1db)),{getLogStores}=require(_0x15b27a(0x1f8)),{findUser}=require(_0x15b27a(0x207)),{logger}=require(_0x15b27a(0x1e7)),banCache=new Keyv({'store':keyvMongo,'namespace':ViolationTypes['BAN'],'ttl':0x0}),message=_0x15b27a(0x1e1),banResponse=async(_0x2287e8,_0x3c2d76)=>{const _0x2a3fda=_0x15b27a,_0x321f13={'PuVSY':function(_0x45df0a,_0x49443a){return _0x45df0a(_0x49443a);},'righP':'return\x20Object.keys({a:1});','jphFG':'ynKUh','kyBOR':function(_0x5cf349,_0x59e33c){return _0x5cf349===_0x59e33c;},'RKmcX':function(_0x45015b,_0x144136){return _0x45015b===_0x144136;},'aHKGP':_0x2a3fda(0x1f1),'DqTyd':function(_0x14e445,_0x587ecc){return _0x14e445(_0x587ecc);},'ItPHU':function(_0x18d2fb,_0x51c6b8,_0x248d7b,_0x48a912){return _0x18d2fb(_0x51c6b8,_0x248d7b,_0x48a912);}},_0x2e35e1=uap(_0x2287e8[_0x2a3fda(0x1ee)][_0x2a3fda(0x1ef)]),{baseUrl:_0x5da7fc}=_0x2287e8;if(!_0x2e35e1['browser'][_0x2a3fda(0x1ff)])return _0x2a3fda(0x20f)===_0x321f13[_0x2a3fda(0x1cd)]?(_0x321f13['PuVSY'](_0x132c90,_0x321f13[_0x2a3fda(0x1ea)])(),_0x4f4163[_0x2a3fda(0x206)](0x193)[_0x2a3fda(0x1cf)]({'message':_0x582520})):(_0x321f13[_0x2a3fda(0x20c)](Function,_0x2a3fda(0x20b))(),_0x3c2d76[_0x2a3fda(0x206)](0x193)[_0x2a3fda(0x1cf)]({'message':message}));else{if(_0x321f13[_0x2a3fda(0x210)](_0x5da7fc,_0x2a3fda(0x1cb))||_0x321f13[_0x2a3fda(0x1d1)](_0x5da7fc,_0x321f13[_0x2a3fda(0x1d2)]))return _0x321f13[_0x2a3fda(0x1e2)](Function,_0x2a3fda(0x1f0))(),await _0x321f13[_0x2a3fda(0x1f6)](denyRequest,_0x2287e8,_0x3c2d76,{'type':ViolationTypes['BAN']});}return _0x321f13[_0x2a3fda(0x1e2)](Function,_0x2a3fda(0x1f0))(),_0x3c2d76[_0x2a3fda(0x206)](0x193)[_0x2a3fda(0x1cf)]({'message':message});},checkBan=async(_0x49ce3c,_0xe48bb1,_0x563b4e=()=>{})=>{const _0x100908=_0x15b27a,_0x208cf4={'khxKl':_0x100908(0x201),'onkgI':function(_0x994b50){return _0x994b50();},'UqZaZ':function(_0xcec17f,_0xbca646){return _0xcec17f(_0xbca646);},'ygqnJ':function(_0xcd540b){return _0xcd540b();},'TBuct':function(_0x232353,_0xe17b5b){return _0x232353||_0xe17b5b;},'voLce':_0x100908(0x1f5),'YoVph':function(_0xbc6d7c,_0x2f554e){return _0xbc6d7c(_0x2f554e);},'GOvUJ':function(_0x1e2c62,_0x410229){return _0x1e2c62<=_0x410229;},'ynFMd':_0x100908(0x1f9),'qlhuH':function(_0x5d3106,_0x170466){return _0x5d3106||_0x170466;},'VFYjT':function(_0x45fc3a,_0x39fc64,_0x6ef71){return _0x45fc3a(_0x39fc64,_0x6ef71);},'CrLRQ':function(_0x206f5){return _0x206f5();},'eINzj':function(_0x28ec42,_0x42e74e){return _0x28ec42-_0x42e74e;},'ZzsQe':function(_0x1f6476,_0x4ddb39){return _0x1f6476<=_0x4ddb39;},'UCCsF':_0x100908(0x20b),'eJshn':'Error\x20in\x20checkBan\x20middleware:'};try{const {BAN_VIOLATIONS:_0x1f4f53}=process[_0x100908(0x200)]??{};if(!isEnabled(_0x1f4f53))return eval('const _0x527020 = _0x100908;JSON[_0x527020(510)]({ \'safe\': !![] });'),_0x208cf4[_0x100908(0x202)](_0x563b4e);_0x49ce3c['ip']=_0x208cf4['UqZaZ'](removePorts,_0x49ce3c);let _0x357022=_0x49ce3c[_0x100908(0x20d)]?.['id']??_0x49ce3c[_0x100908(0x20d)]?.['_id']??null;if(!_0x357022&&_0x49ce3c?.[_0x100908(0x20e)]?.['email']){const _0x5eb542=await findUser({'email':_0x49ce3c[_0x100908(0x20e)][_0x100908(0x20a)]},_0x100908(0x203));_0x357022=_0x5eb542?.['_id']?_0x5eb542['_id']['toString']():_0x357022;}if(!_0x357022&&!_0x49ce3c['ip'])return setInterval(_0x100908(0x1d8),0x3e8),_0x208cf4[_0x100908(0x1e9)](_0x563b4e);let _0x53cada,_0x1cf5f1,_0x2719de='',_0x5255a1='';_0x49ce3c['ip']&&(_0x2719de=_0x208cf4[_0x100908(0x205)](isEnabled,process[_0x100908(0x200)][_0x100908(0x1fb)])?_0x100908(0x1de)+_0x49ce3c['ip']:_0x49ce3c['ip'],_0x53cada=await banCache['get'](_0x2719de));_0x357022&&(_0x5255a1=isEnabled(process[_0x100908(0x200)][_0x100908(0x1fb)])?_0x100908(0x1d4)+_0x357022:_0x357022,_0x1cf5f1=await banCache[_0x100908(0x1cc)](_0x5255a1));const _0x5b6bc5=_0x208cf4[_0x100908(0x1df)](_0x53cada,_0x1cf5f1);if(_0x5b6bc5)return _0x49ce3c['banned']=!![],new AsyncFunction(_0x208cf4[_0x100908(0x204)])(),await banResponse(_0x49ce3c,_0xe48bb1);const _0x4de051=_0x208cf4['YoVph'](getLogStores,ViolationTypes[_0x100908(0x1d6)]),_0x22d7fd=_0x4de051['opts'][_0x100908(0x1f3)];if(_0x208cf4[_0x100908(0x1ca)](_0x22d7fd,0x0))return _0x208cf4[_0x100908(0x1f7)]===_0x100908(0x208)?(_0x1e49eb(function(){const _0x1fb125=_0x100908;_0x3504a8[_0x1fb125(0x1fd)](_0x208cf4[_0x1fb125(0x1e5)]);},0x64),_0x208cf4[_0x100908(0x202)](_0x2e9593)):(eval('Math[\'PI\'] * 2;'),_0x563b4e());let _0x4a26e9,_0x3e7dbc;_0x49ce3c['ip']&&(_0x4a26e9=await _0x4de051['get'](_0x49ce3c['ip']));_0x357022&&(_0x3e7dbc=await _0x4de051[_0x100908(0x1cc)](_0x357022));const _0x13e871=!!_0x208cf4['qlhuH'](_0x4a26e9,_0x3e7dbc);if(!_0x13e871)return _0x208cf4[_0x100908(0x1e8)](setTimeout,function(){const _0x24fde4=_0x100908;console[_0x24fde4(0x1fd)]('safe');},0x64),_0x208cf4[_0x100908(0x1d3)](_0x563b4e);const _0x431453=_0x208cf4[_0x100908(0x1dc)](Number(_0x13e871['expiresAt']),Date[_0x100908(0x1c6)]());_0x208cf4[_0x100908(0x1ca)](_0x431453,0x0)&&_0x2719de&&await _0x4de051[_0x100908(0x1e6)](_0x2719de);if(_0x208cf4[_0x100908(0x1e0)](_0x431453,0x0)&&_0x5255a1)return await _0x4de051[_0x100908(0x1e6)](_0x5255a1),new AsyncFunction('return\x20await\x20Promise.resolve(42);')(),_0x208cf4[_0x100908(0x1d3)](_0x563b4e);return _0x2719de&&banCache[_0x100908(0x1d0)](_0x2719de,_0x13e871,_0x431453),_0x5255a1&&banCache[_0x100908(0x1d0)](_0x5255a1,_0x13e871,_0x431453),_0x49ce3c[_0x100908(0x1ed)]=!![],Function(_0x208cf4[_0x100908(0x1fa)])(),await _0x208cf4[_0x100908(0x1e8)](banResponse,_0x49ce3c,_0xe48bb1);}catch(_0x1c9176){logger[_0x100908(0x1f4)](_0x208cf4[_0x100908(0x1e3)],_0x1c9176);}};module[_0x15b27a(0x1d5)]=checkBan;