const _0x4f62d7=_0x1b26;(function(_0x237ede,_0x165c43){const _0x140a44=_0x1b26,_0x4afbea=_0x237ede();while(!![]){try{const _0x50c5f0=-parseInt(_0x140a44(0xee))/0x1+-parseInt(_0x140a44(0x12f))/0x2+parseInt(_0x140a44(0x158))/0x3*(-parseInt(_0x140a44(0xbb))/0x4)+-parseInt(_0x140a44(0xde))/0x5*(parseInt(_0x140a44(0x16e))/0x6)+parseInt(_0x140a44(0x113))/0x7+parseInt(_0x140a44(0xfe))/0x8*(parseInt(_0x140a44(0xc5))/0x9)+-parseInt(_0x140a44(0x118))/0xa*(-parseInt(_0x140a44(0x166))/0xb);if(_0x50c5f0===_0x165c43)break;else _0x4afbea['push'](_0x4afbea['shift']());}catch(_0x3f8384){_0x4afbea['push'](_0x4afbea['shift']());}}}(_0x548d,0x5ad91));const fs=require('fs'),path=require(_0x4f62d7(0x112)),mime=require('mime'),{v4}=require(_0x4f62d7(0x114)),{isUUID,megabyte,FileContext,FileSources,imageExtRegex,EModelEndpoint,EToolResources,mergeFileConfig,hostImageIdSuffix,checkOpenAIStorage,removeNullishValues,hostImageNamePrefix,isAssistantsEndpoint}=require(_0x4f62d7(0xc0)),{EnvVar}=require(_0x4f62d7(0x111)),{addResourceFileId,deleteResourceFileId}=require(_0x4f62d7(0x172)),{convertImage,resizeAndConvert}=require(_0x4f62d7(0xd1)),{addAgentResourceFile,removeAgentResourceFile}=require(_0x4f62d7(0xcf)),{getOpenAIClient}=require(_0x4f62d7(0x11d)),{createFile,updateFileUsage,deleteFiles}=require(_0x4f62d7(0xc3)),{loadAuthValues}=require(_0x4f62d7(0x131)),{LB_QueueAsyncCall}=require('~/server/utils/queue'),{getStrategyFunctions}=require(_0x4f62d7(0xdb)),{determineFileType}=require(_0x4f62d7(0xe4)),{logger}=require('~/config'),processFiles=async(_0x49e315,_0x1f72c0)=>{const _0x48bcfa=_0x4f62d7,_0x11b67d={'maOev':function(_0x4e1f90,_0x5d3e4a){return _0x4e1f90+_0x5d3e4a;},'fLgvo':function(_0x3cbc95,_0x22d745){return _0x3cbc95===_0x22d745;},'ubbff':_0x48bcfa(0x130),'EjMdF':_0x48bcfa(0xfb),'EqgNe':function(_0x1b6226,_0x373c40){return _0x1b6226===_0x373c40;},'JFGwo':_0x48bcfa(0xdf),'COnfw':function(_0x335561,_0x433943){return _0x335561(_0x433943);}},_0x5b4323=[],_0x2a9419=new Set();for(let _0x36bd66 of _0x49e315){const {file_id:_0x360a54}=_0x36bd66;if(_0x2a9419[_0x48bcfa(0x133)](_0x360a54)){if('xsxjr'!==_0x11b67d['EjMdF'])hLxEHs['maOev'](0x1,0x1);else continue;}_0x2a9419[_0x48bcfa(0x144)](_0x360a54),_0x5b4323[_0x48bcfa(0xc4)](updateFileUsage({'file_id':_0x360a54}));}if(!_0x1f72c0){if(_0x11b67d[_0x48bcfa(0xd7)](_0x11b67d[_0x48bcfa(0xb5)],_0x48bcfa(0xdf)))return Function(_0x48bcfa(0x124))(),await Promise['all'](_0x5b4323);else _0x3067bf[_0x48bcfa(0x149)]('safe');}for(let _0x2d3d8f of _0x1f72c0){if(_0x2a9419[_0x48bcfa(0x133)](_0x2d3d8f))continue;_0x2a9419[_0x48bcfa(0x144)](_0x2d3d8f),_0x5b4323[_0x48bcfa(0xc4)](_0x11b67d[_0x48bcfa(0xeb)](updateFileUsage,{'file_id':_0x2d3d8f}));}return setTimeout(function(){const _0x23757c=_0x48bcfa;_0x11b67d[_0x23757c(0x135)](_0x23757c(0xc7),_0x11b67d['ubbff'])?_0x2d854c[_0x23757c(0x183)]({'safe':!![]}):console[_0x23757c(0x149)](_0x23757c(0xd0));},0x64),await Promise[_0x48bcfa(0x167)](_0x5b4323);};function enqueueDeleteOperation({req:_0x38b8d5,file:_0xc0f2d8,deleteFile:_0xfce76a,promises:_0x12d56c,resolvedFileIds:_0x3613de,openai:_0x60ce96}){const _0x10ee3c=_0x4f62d7,_0x3f1a1b={'qpgvZ':_0x10ee3c(0x186),'krbRE':function(_0x4f76d0,_0x5a14b0){return _0x4f76d0(_0x5a14b0);},'sLigw':function(_0x4e4f8c,_0x3a6c43,_0x27c5a5,_0xb00f68){return _0x4e4f8c(_0x3a6c43,_0x27c5a5,_0xb00f68);},'bJLuA':function(_0x2c5ac3,_0x2dde83){return _0x2c5ac3(_0x2dde83);},'DNkLC':_0x10ee3c(0x162),'xVJoC':function(_0x26c5bc,_0x753d3e,_0x52f893){return _0x26c5bc(_0x753d3e,_0x52f893);},'rXjmw':function(_0x4bc459,_0x18522b){return _0x4bc459(_0x18522b);},'uoqqB':function(_0x1055a9,_0x593d1a){return _0x1055a9===_0x593d1a;},'xXTbk':_0x10ee3c(0x14a)};_0x3f1a1b[_0x10ee3c(0x11e)](checkOpenAIStorage,_0xc0f2d8['source'])?_0x12d56c[_0x10ee3c(0xc4)](new Promise((_0x1fa613,_0x4844d5)=>{_0x3f1a1b['sLigw'](LB_QueueAsyncCall,()=>_0xfce76a(_0x38b8d5,_0xc0f2d8,_0x60ce96),[],(_0xa429ef,_0x2477a7)=>{const _0x28826d=_0x1b26;_0xa429ef?(logger[_0x28826d(0x16f)](_0x3f1a1b[_0x28826d(0x17d)],_0xa429ef),_0x4844d5(_0xa429ef)):(_0x3613de[_0x28826d(0xc4)](_0xc0f2d8['file_id']),_0x3f1a1b[_0x28826d(0xed)](_0x1fa613,_0x2477a7));});})):_0x3f1a1b[_0x10ee3c(0x12d)](_0x3f1a1b[_0x10ee3c(0x11b)],_0x10ee3c(0x17e))?(_0x2d96b5[_0x10ee3c(0xc4)](_0x27ffbb[_0x10ee3c(0xdc)]),_0x3f1a1b['bJLuA'](_0x3755a7,_0x1faa46)):_0x12d56c[_0x10ee3c(0xc4)](_0x3f1a1b[_0x10ee3c(0x182)](_0xfce76a,_0x38b8d5,_0xc0f2d8)[_0x10ee3c(0x121)](()=>_0x3613de[_0x10ee3c(0xc4)](_0xc0f2d8['file_id']))[_0x10ee3c(0xe0)](_0x2716e1=>{const _0xf83f32=_0x10ee3c,_0x7657ab={'QsyIY':_0xf83f32(0xd0)};return logger[_0xf83f32(0x16f)](_0x3f1a1b[_0xf83f32(0xd3)],_0x2716e1),_0x3f1a1b[_0xf83f32(0x182)](setTimeout,function(){const _0x4818b7=_0xf83f32;console[_0x4818b7(0x149)](_0x7657ab['QsyIY']);},0x64),Promise['reject'](_0x2716e1);}));}const processDeleteRequest=async({req:_0x37c12b,files:_0x4cf058})=>{const _0x26eba1=_0x4f62d7,_0x139d3d={'dFtRU':_0x26eba1(0x14b),'NWUWV':_0x26eba1(0xca),'FitHt':function(_0x1fc819,_0x3d473a){return _0x1fc819(_0x3d473a);},'ZUWno':function(_0x5df531,_0x49fd3a){return _0x5df531!==_0x49fd3a;},'jRyUz':_0x26eba1(0x11c),'Xkdfb':_0x26eba1(0xe1),'iTzzU':function(_0x64d2c6,_0xe64cc5){return _0x64d2c6(_0xe64cc5);}},_0x20fa4b=[],_0x1f30b8={},_0x1062f1=[],_0x2206e0={[FileSources[_0x26eba1(0x185)]]:undefined,[FileSources[_0x26eba1(0x13a)]]:undefined},_0x4bf112=async()=>{const _0x52e078=_0x26eba1;if('eNAxE'!==_0x139d3d[_0x52e078(0xd8)])_0x145e9a[_0x52e078(0x16f)](_0x139d3d['dFtRU'],_0x327837),_0x1b8b48=null;else{const _0x46736d=await getOpenAIClient({'req':_0x37c12b,'overrideEndpoint':EModelEndpoint['assistants']});_0x2206e0[FileSources[_0x52e078(0x185)]]=_0x46736d[_0x52e078(0x185)];if(!_0x37c12b[_0x52e078(0x138)]['locals'][EModelEndpoint['azureOpenAI']]?.[_0x52e078(0xb3)]){setInterval(_0x52e078(0x160),0x3e8);return;}const _0x22de3f=await getOpenAIClient({'req':_0x37c12b,'overrideEndpoint':EModelEndpoint['azureAssistants']});_0x2206e0[FileSources['azure']]=_0x22de3f[_0x52e078(0x185)];}};_0x139d3d['ZUWno'](_0x37c12b['body']['assistant_id'],undefined)&&await _0x4bf112();for(const _0x4ba6a7 of _0x4cf058){if(_0x139d3d[_0x26eba1(0x180)]==='iaaHn')return eval('const _0x4b954c = _0x26eba1;_0xc42306[_0x4b954c(387)]({ \'safe\': !![] });'),_0x139d3d[_0x26eba1(0x146)](_0xdee71b,{..._0x16be4d,'updateUsage':!![]});else{const _0xdacf9f=_0x4ba6a7[_0x26eba1(0x163)]??FileSources['local'];_0x37c12b[_0x26eba1(0xda)][_0x26eba1(0x13e)]&&_0x37c12b[_0x26eba1(0xda)]['tool_resource']&&_0x1062f1[_0x26eba1(0xc4)](removeAgentResourceFile({'req':_0x37c12b,'file_id':_0x4ba6a7[_0x26eba1(0xdc)],'agent_id':_0x37c12b[_0x26eba1(0xda)][_0x26eba1(0x13e)],'tool_resource':_0x37c12b['body'][_0x26eba1(0xbc)]}));checkOpenAIStorage(_0xdacf9f)&&!_0x2206e0[_0xdacf9f]&&await _0x4bf112();const _0x29fe0e=_0x2206e0[_0xdacf9f];if(_0x37c12b[_0x26eba1(0xda)]['assistant_id']&&_0x37c12b[_0x26eba1(0xda)]['tool_resource'])_0x1062f1[_0x26eba1(0xc4)](_0x139d3d['FitHt'](deleteResourceFileId,{'req':_0x37c12b,'openai':_0x29fe0e,'file_id':_0x4ba6a7['file_id'],'assistant_id':_0x37c12b[_0x26eba1(0xda)][_0x26eba1(0xec)],'tool_resource':_0x37c12b[_0x26eba1(0xda)][_0x26eba1(0xbc)]}));else{if(_0x37c12b['body']['assistant_id']){if(_0x139d3d[_0x26eba1(0xf6)]===_0x26eba1(0xe1))_0x1062f1[_0x26eba1(0xc4)](_0x29fe0e[_0x26eba1(0x154)][_0x26eba1(0xb3)][_0x26eba1(0x143)][_0x26eba1(0x14d)](_0x37c12b[_0x26eba1(0xda)][_0x26eba1(0xec)],_0x4ba6a7[_0x26eba1(0xdc)]));else throw new _0x4304ef(_0x26eba1(0x12c));}}if(_0x1f30b8[_0xdacf9f]){enqueueDeleteOperation({'req':_0x37c12b,'file':_0x4ba6a7,'deleteFile':_0x1f30b8[_0xdacf9f],'promises':_0x1062f1,'resolvedFileIds':_0x20fa4b,'openai':_0x29fe0e});continue;}const {deleteFile:_0x31383d}=getStrategyFunctions(_0xdacf9f);if(!_0x31383d)throw new Error(_0x26eba1(0x155)+_0xdacf9f);_0x1f30b8[_0xdacf9f]=_0x31383d,enqueueDeleteOperation({'req':_0x37c12b,'file':_0x4ba6a7,'deleteFile':_0x31383d,'promises':_0x1062f1,'resolvedFileIds':_0x20fa4b,'openai':_0x29fe0e});}}await Promise['allSettled'](_0x1062f1),await _0x139d3d[_0x26eba1(0x134)](deleteFiles,_0x20fa4b);},processFileURL=async({fileStrategy:_0xfd620a,userId:_0x1a3870,URL:_0x1974aa,fileName:_0x50017a,basePath:_0x2ae04b,context:_0x35088a})=>{const _0x3f569c=_0x4f62d7,_0x4169f4={'QVOtP':function(_0x2d266e,_0x44f7e2){return _0x2d266e*_0x44f7e2;},'FLOqc':'LcFPv','mDtoR':function(_0x5c5cce,_0x105dc8,_0x32f5a0){return _0x5c5cce(_0x105dc8,_0x32f5a0);},'peVrG':function(_0x146f9e){return _0x146f9e();}},{saveURL:_0x2282cb,getFileURL:_0x5a86f7}=getStrategyFunctions(_0xfd620a);try{if(_0x3f569c(0xc2)===_0x4169f4[_0x3f569c(0xd5)]){const {bytes:bytes=0x0,type:type='',dimensions:dimensions={}}=await _0x2282cb({'userId':_0x1a3870,'URL':_0x1974aa,'fileName':_0x50017a,'basePath':_0x2ae04b})||{},_0x712382=await _0x5a86f7({'fileName':_0x1a3870+'/'+_0x50017a,'basePath':_0x2ae04b});return eval('_0x4169f4[\'QVOtP\'](Math[\'PI\'], 2);'),await _0x4169f4[_0x3f569c(0x100)](createFile,{'user':_0x1a3870,'file_id':_0x4169f4[_0x3f569c(0x15b)](v4),'bytes':bytes,'filepath':_0x712382,'filename':_0x50017a,'source':_0xfd620a,'type':type,'context':_0x35088a,'width':dimensions[_0x3f569c(0xfc)],'height':dimensions['height']},!![]);}else _0x492ec6['push'](_0x20e06c({'req':_0x38b38c,'file_id':_0x6d17b9['file_id'],'agent_id':_0x349aa4[_0x3f569c(0xda)][_0x3f569c(0x13e)],'tool_resource':_0x43e8b2[_0x3f569c(0xda)][_0x3f569c(0xbc)]}));}catch(_0x13d27a){logger['error'](_0x3f569c(0xe5)+_0xfd620a+':',_0x13d27a);throw new Error('Failed\x20to\x20process\x20the\x20image\x20with\x20'+_0xfd620a+'.\x20'+_0x13d27a['message']);}},processImageFile=async({req:_0x56e18e,res:_0x12086f,metadata:_0x53f963,returnFile:returnFile=![]})=>{const _0x3abb85=_0x4f62d7,_0x92a389={'cTVEJ':function(_0x23ae52,_0x4e7797){return _0x23ae52!==_0x4e7797;},'lGnno':'DMHXi','ruFyG':_0x3abb85(0x107),'hNunI':_0x3abb85(0x10f)},{file:_0x5d92de}=_0x56e18e,_0x5da46a=_0x56e18e['app'][_0x3abb85(0x140)][_0x3abb85(0x106)],{handleImageUpload:_0x483ad3}=getStrategyFunctions(_0x5da46a),{file_id:_0x1f3e40,temp_file_id:_0x11e1b8,endpoint:_0x2b7679}=_0x53f963,{filepath:_0x55b395,bytes:_0x3955b8,width:_0x19757f,height:_0x28088a}=await _0x483ad3({'req':_0x56e18e,'file':_0x5d92de,'file_id':_0x1f3e40,'endpoint':_0x2b7679}),_0x194690=await createFile({'user':_0x56e18e[_0x3abb85(0xb4)]['id'],'file_id':_0x1f3e40,'temp_file_id':_0x11e1b8,'bytes':_0x3955b8,'filepath':_0x55b395,'filename':_0x5d92de['originalname'],'context':FileContext['message_attachment'],'source':_0x5da46a,'type':'image/'+_0x56e18e['app'][_0x3abb85(0x140)][_0x3abb85(0x128)],'width':_0x19757f,'height':_0x28088a},!![]);if(returnFile){if(_0x92a389[_0x3abb85(0x116)](_0x3abb85(0x120),_0x92a389[_0x3abb85(0x178)]))return new AsyncFunction(_0x92a389[_0x3abb85(0x142)])(),_0x194690;else throw new _0x3d2864(_0x3abb85(0x125));}_0x12086f[_0x3abb85(0x17f)](0xc8)[_0x3abb85(0xb6)]({'message':_0x92a389['hNunI'],..._0x194690});},uploadImageBuffer=async({req:_0x3545b6,context:_0x5c4e79,metadata:metadata={},resize:resize=!![]})=>{const _0x2efb2e=_0x4f62d7,_0x3a45ef={'VQBnv':function(_0x407de6,_0x14331a){return _0x407de6(_0x14331a);},'tfQjM':function(_0x2fd4e1,_0x337d21,_0x571d0f){return _0x2fd4e1(_0x337d21,_0x571d0f);}},_0x2654da=_0x3545b6[_0x2efb2e(0x138)]['locals'][_0x2efb2e(0x106)],{saveBuffer:_0x2a7537}=getStrategyFunctions(_0x2654da);let {buffer:_0x37e5ac,width:_0x5d8f78,height:_0x127b8b,bytes:_0x26310e,filename:_0x4dfa45,file_id:_0x3999c2,type:_0x57d2e2}=metadata;resize&&(_0x3999c2=v4(),_0x57d2e2='image/'+_0x3545b6[_0x2efb2e(0x138)][_0x2efb2e(0x140)]['imageOutputType'],{buffer:_0x37e5ac,width:_0x5d8f78,height:_0x127b8b,bytes:_0x26310e}=await resizeAndConvert({'inputBuffer':_0x37e5ac,'desiredFormat':_0x3545b6[_0x2efb2e(0x138)]['locals'][_0x2efb2e(0x128)]}),_0x4dfa45=path[_0x2efb2e(0x17b)](_0x3545b6[_0x2efb2e(0xe9)][_0x2efb2e(0x15f)],path[_0x2efb2e(0x12b)](_0x3545b6[_0x2efb2e(0xe9)][_0x2efb2e(0x15f)]))+'.'+_0x3545b6[_0x2efb2e(0x138)][_0x2efb2e(0x140)][_0x2efb2e(0x128)]);const _0x58387e=await _0x3a45ef[_0x2efb2e(0xbf)](_0x2a7537,{'userId':_0x3545b6[_0x2efb2e(0xb4)]['id'],'fileName':_0x4dfa45,'buffer':_0x37e5ac});return _0x3a45ef[_0x2efb2e(0x10a)](setTimeout,'console.log(\x22timer\x22);',0x3e8),await _0x3a45ef['tfQjM'](createFile,{'user':_0x3545b6[_0x2efb2e(0xb4)]['id'],'file_id':_0x3999c2,'bytes':_0x26310e,'filepath':_0x58387e,'filename':_0x4dfa45,'context':_0x5c4e79,'source':_0x2654da,'type':_0x57d2e2,'width':_0x5d8f78,'height':_0x127b8b},!![]);},processFileUpload=async({req:_0x4b9e99,res:_0x32498a,metadata:_0x3eadee})=>{const _0x214802=_0x4f62d7,_0x17afc9={'YXJed':function(_0x999fde,_0x2fe300){return _0x999fde(_0x2fe300);},'txlnY':function(_0x2e4763,_0x5dc9d8){return _0x2e4763===_0x5dc9d8;},'AYDrN':function(_0x52969f,_0x5947ff){return _0x52969f(_0x5947ff);},'aEZmw':_0x214802(0x122),'RszDU':function(_0x3b6d5d,_0x37db95){return _0x3b6d5d(_0x37db95);},'CKVQr':function(_0x42a1d1,_0x4537f3,_0x109a22){return _0x42a1d1(_0x4537f3,_0x109a22);},'uhrWm':_0x214802(0x10f)},_0x16382f=_0x17afc9[_0x214802(0x101)](isAssistantsEndpoint,_0x3eadee[_0x214802(0xc9)]),_0x503a52=_0x17afc9[_0x214802(0x129)](_0x3eadee[_0x214802(0xc9)],EModelEndpoint[_0x214802(0xe7)])?FileSources[_0x214802(0x13a)]:FileSources['openai'],_0xdac38e=_0x16382f?_0x503a52:FileSources[_0x214802(0xf8)],{handleFileUpload:_0x4eb39f}=getStrategyFunctions(_0xdac38e),{file_id:_0x4c29ce,temp_file_id:_0x3e66cf}=_0x3eadee;let _0xbfa94a;checkOpenAIStorage(_0xdac38e)&&({openai:_0xbfa94a}=await getOpenAIClient({'req':_0x4b9e99}));const {file:_0x87e632}=_0x4b9e99,{id:_0x6fae7e,bytes:_0x3afc5b,filename:_0x20f5f4,filepath:_0x2ee951,embedded:_0x2e3a1b,height:_0x25cb35,width:_0x29923e}=await _0x17afc9[_0x214802(0x148)](_0x4eb39f,{'req':_0x4b9e99,'file':_0x87e632,'file_id':_0x4c29ce,'openai':_0xbfa94a});if(_0x16382f&&!_0x3eadee[_0x214802(0x179)]&&!_0x3eadee[_0x214802(0xbc)])await _0xbfa94a['beta'][_0x214802(0xb3)][_0x214802(0x143)][_0x214802(0x147)](_0x3eadee[_0x214802(0xec)],{'file_id':_0x6fae7e});else _0x16382f&&!_0x3eadee[_0x214802(0x179)]&&(_0x214802(0x122)===_0x17afc9[_0x214802(0x16c)]?await _0x17afc9[_0x214802(0x101)](addResourceFileId,{'req':_0x4b9e99,'openai':_0xbfa94a,'file_id':_0x6fae7e,'assistant_id':_0x3eadee[_0x214802(0xec)],'tool_resource':_0x3eadee[_0x214802(0xbc)]}):_0x3baa18?(_0x55929b[_0x214802(0x16f)](_0x214802(0x186),_0xf59acc),_0x5a06fd(_0xf69c31)):(_0x3b9783[_0x214802(0xc4)](_0x173585[_0x214802(0xdc)]),_0x31c9f2(_0x5b3cea)));let _0x47a5cf=_0x16382f?_0xbfa94a[_0x214802(0xf0)]+_0x214802(0x12a)+_0x6fae7e:_0x2ee951;if(_0x16382f&&_0x87e632[_0x214802(0x165)][_0x214802(0xb9)](_0x214802(0xea))){const _0x4a4e48=await _0x17afc9[_0x214802(0x16a)](processImageFile,{'req':_0x4b9e99,'file':_0x87e632,'metadata':{'file_id':v4()},'returnFile':!![]});_0x47a5cf=_0x4a4e48[_0x214802(0x104)];}const _0x2b763e=await _0x17afc9[_0x214802(0xf3)](createFile,{'user':_0x4b9e99['user']['id'],'file_id':_0x6fae7e??_0x4c29ce,'temp_file_id':_0x3e66cf,'bytes':_0x3afc5b,'filepath':_0x47a5cf,'filename':_0x20f5f4??_0x87e632['originalname'],'context':_0x16382f?FileContext[_0x214802(0xb3)]:FileContext[_0x214802(0x10d)],'model':_0x16382f?_0x4b9e99[_0x214802(0xda)]['model']:undefined,'type':_0x87e632[_0x214802(0x165)],'embedded':_0x2e3a1b,'source':_0xdac38e,'height':_0x25cb35,'width':_0x29923e},!![]);_0x32498a[_0x214802(0x17f)](0xc8)[_0x214802(0xb6)]({'message':_0x17afc9['uhrWm'],..._0x2b763e});},processAgentFileUpload=async({req:_0x528bf6,res:_0x23d1dc,metadata:_0x137650})=>{const _0x12f5d4=_0x4f62d7,_0x34cf03={'lSxBn':_0x12f5d4(0x169),'eReJk':function(_0x5e63ef,_0xbde9bf){return _0x5e63ef&&_0xbde9bf;},'jKMBO':function(_0x5d64ea,_0x202c24){return _0x5d64ea===_0x202c24;},'afxri':'image','SPAAc':function(_0x671fd2,_0x90ba29){return _0x671fd2(_0x90ba29);},'oeZQm':function(_0x27ddcc,_0x346ce4){return _0x27ddcc(_0x346ce4);},'Czwkm':function(_0x56c55c,_0x3cd224){return _0x56c55c&&_0x3cd224;},'VAhRc':function(_0x481d0b,_0x3b5fc7){return _0x481d0b(_0x3b5fc7);},'HEpBq':_0x12f5d4(0x151),'MBxkg':function(_0x304a40){return _0x304a40();},'eBnoE':function(_0x1c8876,_0x1d5d18,_0x49b78f){return _0x1c8876(_0x1d5d18,_0x49b78f);}},{file:_0x4c16c3}=_0x528bf6,{agent_id:_0x4abd70,tool_resource:_0x5d1107}=_0x137650;if(_0x34cf03['eReJk'](_0x4abd70,!_0x5d1107))throw new Error(_0x12f5d4(0x17c));if(_0x34cf03[_0x12f5d4(0xf2)](_0x5d1107,EToolResources['file_search'])&&_0x4c16c3[_0x12f5d4(0x165)][_0x12f5d4(0xb9)](_0x34cf03[_0x12f5d4(0x132)]))throw new Error(_0x12f5d4(0x174));let _0x2a8cc2=!!_0x137650[_0x12f5d4(0x179)];if(!_0x2a8cc2&&!_0x4abd70)throw new Error(_0x12f5d4(0x125));let _0x3f6cf8;if(_0x34cf03[_0x12f5d4(0xf2)](_0x5d1107,EToolResources['execute_code'])){const {handleFileUpload:_0xcca91e}=_0x34cf03[_0x12f5d4(0x127)](getStrategyFunctions,FileSources[_0x12f5d4(0x153)]),_0x348f61=await loadAuthValues({'userId':_0x528bf6[_0x12f5d4(0xb4)]['id'],'authFields':[EnvVar['CODE_API_KEY']]}),_0x9b2a93=fs[_0x12f5d4(0x14c)](_0x4c16c3[_0x12f5d4(0x112)]),_0xc02e1f=await _0xcca91e({'req':_0x528bf6,'stream':_0x9b2a93,'filename':_0x4c16c3[_0x12f5d4(0x15f)],'apiKey':_0x348f61[EnvVar[_0x12f5d4(0xcd)]],'entity_id':_0x34cf03[_0x12f5d4(0xf2)](_0x2a8cc2,!![])?undefined:_0x4abd70});_0x3f6cf8={'fileIdentifier':_0xc02e1f};}const _0x21616e=_0x34cf03[_0x12f5d4(0xf2)](_0x5d1107,EToolResources[_0x12f5d4(0x188)])?FileSources['vectordb']:_0x528bf6[_0x12f5d4(0x138)]['locals'][_0x12f5d4(0x106)],{handleFileUpload:_0x56669b}=getStrategyFunctions(_0x21616e),{file_id:_0x1cab27,temp_file_id:_0x57c7e9}=_0x137650,{bytes:_0x2a80f8,filename:_0x429494,filepath:_0x58ee95,embedded:_0x56a7fb,height:_0x3e0524,width:_0x25b9bc}=await _0x34cf03[_0x12f5d4(0x15d)](_0x56669b,{'req':_0x528bf6,'file':_0x4c16c3,'file_id':_0x1cab27});let _0x5dcb85=_0x58ee95;_0x34cf03[_0x12f5d4(0x175)](!_0x2a8cc2,_0x5d1107)&&await _0x34cf03[_0x12f5d4(0xb8)](addAgentResourceFile,{'req':_0x528bf6,'file_id':_0x1cab27,'agent_id':_0x4abd70,'tool_resource':_0x5d1107});if(_0x4c16c3[_0x12f5d4(0x165)][_0x12f5d4(0xb9)](_0x34cf03[_0x12f5d4(0x132)])){if(_0x34cf03[_0x12f5d4(0xf2)](_0x34cf03[_0x12f5d4(0x117)],_0x12f5d4(0xd6)))throw new _0x16264c(_0x34cf03[_0x12f5d4(0x17a)]);else{const _0x3ee581=await _0x34cf03[_0x12f5d4(0x127)](processImageFile,{'req':_0x528bf6,'file':_0x4c16c3,'metadata':{'file_id':_0x34cf03[_0x12f5d4(0x161)](v4)},'returnFile':!![]});_0x5dcb85=_0x3ee581[_0x12f5d4(0x104)];}}const _0x52e084=_0x34cf03['VAhRc'](removeNullishValues,{'user':_0x528bf6[_0x12f5d4(0xb4)]['id'],'file_id':_0x1cab27,'temp_file_id':_0x57c7e9,'bytes':_0x2a80f8,'filepath':_0x5dcb85,'filename':_0x429494??_0x4c16c3[_0x12f5d4(0x15f)],'context':_0x2a8cc2?FileContext['message_attachment']:FileContext[_0x12f5d4(0x170)],'model':_0x2a8cc2?undefined:_0x528bf6[_0x12f5d4(0xda)][_0x12f5d4(0x16b)],'metadata':_0x3f6cf8,'type':_0x4c16c3['mimetype'],'embedded':_0x56a7fb,'source':_0x21616e,'height':_0x3e0524,'width':_0x25b9bc}),_0xee7091=await _0x34cf03[_0x12f5d4(0x173)](createFile,_0x52e084,!![]);_0x23d1dc[_0x12f5d4(0x17f)](0xc8)['json']({'message':_0x12f5d4(0x141),..._0xee7091});},processOpenAIFile=async({openai:_0x15c500,file_id:_0x259adf,userId:_0x2c3fd3,filename:_0x23c4f7,saveFile:saveFile=![],updateUsage:updateUsage=![]})=>{const _0x262d9a=_0x4f62d7,_0x18d7bb={'Jixsb':'safe','kvYYU':function(_0x185fe7,_0x45f13d,_0x37362f){return _0x185fe7(_0x45f13d,_0x37362f);},'OWlBv':'mkaUF','ftaLY':'DZaiT','yjbqi':'ONFPc','ZxwVk':_0x262d9a(0x108)},_0x266a50=await _0x15c500[_0x262d9a(0x143)][_0x262d9a(0x123)](_0x259adf),_0x47cbd5=_0x23c4f7??(_0x266a50['filename']?path[_0x262d9a(0x17b)](_0x266a50[_0x262d9a(0x10e)]):undefined),_0x1b5885=_0x15c500[_0x262d9a(0xf0)]+_0x262d9a(0x12a)+_0x2c3fd3+'/'+_0x259adf+(_0x47cbd5?'/'+_0x47cbd5:''),_0x46cf45=mime[_0x262d9a(0x13b)](_0x47cbd5??_0x259adf),_0x3b6aae=_0x15c500[_0x262d9a(0x14f)]['body'][_0x262d9a(0xc9)]===EModelEndpoint[_0x262d9a(0xe7)]?FileSources['azure']:FileSources[_0x262d9a(0x185)],_0x2d80ca={..._0x266a50,'type':_0x46cf45,'file_id':_0x259adf,'filepath':_0x1b5885,'usage':0x1,'user':_0x2c3fd3,'context':_0x266a50[_0x262d9a(0x13c)],'source':_0x3b6aae,'model':_0x15c500['req'][_0x262d9a(0xda)][_0x262d9a(0x16b)],'filename':_0x47cbd5??_0x259adf};if(saveFile)await _0x18d7bb[_0x262d9a(0xfd)](createFile,_0x2d80ca,!![]);else{if(updateUsage)try{if(_0x18d7bb[_0x262d9a(0x115)]!==_0x18d7bb['ftaLY'])await updateFileUsage({'file_id':_0x259adf});else return _0x434ee3[_0x262d9a(0x16f)](_0x262d9a(0x162),_0x1c4a36),_0x316546(function(){const _0x41b8d7=_0x262d9a;_0x400eca[_0x41b8d7(0x149)](_0x18d7bb['Jixsb']);},0x64),_0x592e96[_0x262d9a(0x164)](_0x3c96fe);}catch(_0x33fef5){if(_0x18d7bb[_0x262d9a(0x181)]!==_0x262d9a(0xf7))throw new _0x3e675a(_0x262d9a(0x174));else logger[_0x262d9a(0x16f)](_0x18d7bb[_0x262d9a(0x137)],_0x33fef5);}}return Function(_0x262d9a(0x124))(),_0x2d80ca;},processOpenAIImageOutput=async({req:_0x1fe09e,buffer:_0x1bb442,file_id:_0x2a1b3d,filename:_0x4ccc41,fileExt:_0x1788a8})=>{const _0x5efd1e=_0x4f62d7,_0x2c45ec={'EblfP':function(_0x3f2950,_0x4958b9){return _0x3f2950+_0x4958b9;},'mdVlJ':function(_0x3d7859,_0x2f2719,_0x84b460,_0x4f550c,_0x1c2379){return _0x3d7859(_0x2f2719,_0x84b460,_0x4f550c,_0x1c2379);},'DNcYd':_0x5efd1e(0x15e),'oarCo':function(_0x3647eb,_0x3a74bf,_0x8690db){return _0x3647eb(_0x3a74bf,_0x8690db);},'ZVQmN':function(_0x25592b,_0x47fb85){return _0x25592b===_0x47fb85;},'khuhU':_0x5efd1e(0xd2)},_0x2f6072=new Date(),_0x3dfce1=_0x2f6072[_0x5efd1e(0x105)](),_0x3ca89e=await _0x2c45ec[_0x5efd1e(0xc1)](convertImage,_0x1fe09e,_0x1bb442,_0x2c45ec[_0x5efd1e(0x177)],''+_0x2a1b3d+_0x1788a8),_0x36cfda={..._0x3ca89e,'usage':0x1,'user':_0x1fe09e[_0x5efd1e(0xb4)]['id'],'type':'image/'+_0x1fe09e['app'][_0x5efd1e(0x140)][_0x5efd1e(0x128)],'createdAt':_0x3dfce1,'updatedAt':_0x3dfce1,'source':_0x1fe09e[_0x5efd1e(0x138)]['locals'][_0x5efd1e(0x106)],'context':FileContext[_0x5efd1e(0x12e)],'file_id':''+_0x2a1b3d+hostImageIdSuffix,'filename':''+hostImageNamePrefix+_0x4ccc41};_0x2c45ec[_0x5efd1e(0xba)](createFile,_0x36cfda,!![]);const _0x2602cd=_0x2c45ec[_0x5efd1e(0xce)](_0x1fe09e['body'][_0x5efd1e(0xc9)],EModelEndpoint['azureAssistants'])?FileSources[_0x5efd1e(0x13a)]:FileSources[_0x5efd1e(0x185)];_0x2c45ec[_0x5efd1e(0xba)](createFile,{..._0x36cfda,'file_id':_0x2a1b3d,'filename':_0x4ccc41,'source':_0x2602cd,'type':mime['getType'](_0x1788a8)},!![]),eval('const _0x4884fd = _0x5efd1e;_0x2c45ec[_0x4884fd(369)](1, 1);');return _0x36cfda;request['post'](_0x2c45ec[_0x5efd1e(0x16d)]);};function _0x1b26(_0x21fb26,_0x323f78){const _0x548d45=_0x548d();return _0x1b26=function(_0x1b26f5,_0x1a5085){_0x1b26f5=_0x1b26f5-0xb3;let _0xf77ec8=_0x548d45[_0x1b26f5];return _0xf77ec8;},_0x1b26(_0x21fb26,_0x323f78);}async function retrieveAndProcessFile({openai:_0x3fba0e,client:_0x5dbe57,file_id:_0x21875e,basename:_0x2bf41a,unknownType:_0x1d14f3}){const _0x3e1fa9=_0x4f62d7,_0x54b5ec={'iLcWB':_0x3e1fa9(0xd0),'xUKDI':function(_0x138c25,_0x146323){return _0x138c25!==_0x146323;},'BPtJj':'CGNAa','kxRuP':function(_0x51e1ed,_0x2a388d){return _0x51e1ed*_0x2a388d;},'mRvbi':_0x3e1fa9(0x17c),'uIKnE':function(_0x3833f0,_0x5f58d5){return _0x3833f0(_0x5f58d5);},'VKnUF':function(_0x2c1ab1,_0x4f161b){return _0x2c1ab1||_0x4f161b;},'tniEF':_0x3e1fa9(0x176),'KDLYM':function(_0x2784a9){return _0x2784a9();},'zlaTl':function(_0x220720,_0x1cc48c){return _0x220720===_0x1cc48c;},'YUWdc':'lyfCX','odpNk':_0x3e1fa9(0x14b),'bfVhg':_0x3e1fa9(0x107),'biKmR':_0x3e1fa9(0x11a),'VAXWv':'return\x20new\x20Date();'};if(!_0x21875e)return setTimeout(function(){const _0x4159cc=_0x3e1fa9;console['log'](_0x54b5ec[_0x4159cc(0x103)]);},0x64),null;let _0x4ee1cc=_0x2bf41a;const _0x187e26={'openai':_0x3fba0e,'file_id':_0x21875e,'filename':_0x4ee1cc,'userId':_0x5dbe57[_0x3e1fa9(0x14f)][_0x3e1fa9(0xb4)]['id']};if(!_0x4ee1cc)return new AsyncFunction(_0x3e1fa9(0x107))(),await _0x54b5ec['uIKnE'](processOpenAIFile,{..._0x187e26,'saveFile':!![]});const _0x277ea3=path['extname'](_0x4ee1cc);if(_0x5dbe57[_0x3e1fa9(0x10c)]?.[_0x3e1fa9(0x133)](_0x21875e)||_0x5dbe57['processedFileIds']?.[_0x3e1fa9(0x133)](_0x21875e))return eval('const _0x1a9673 = _0x3e1fa9;JSON[_0x1a9673(387)]({ \'safe\': !![] });'),_0x54b5ec['uIKnE'](processOpenAIFile,{..._0x187e26,'updateUsage':!![]});const _0x82ca2a=async()=>{const _0x41bcda=_0x3e1fa9;if(_0x54b5ec[_0x41bcda(0x152)](_0x54b5ec['BPtJj'],_0x54b5ec['BPtJj']))_0x51f953['stringify']({'safe':!![]});else{const _0x3c172e=await _0x3fba0e['files'][_0x41bcda(0xf9)](_0x21875e),_0x176d2e=await _0x3c172e[_0x41bcda(0x126)]();return eval('1 + 1;'),Buffer[_0x41bcda(0xef)](_0x176d2e);}};let _0x20c7bf;if(_0x54b5ec[_0x3e1fa9(0x159)](_0x1d14f3,!_0x277ea3)||imageExtRegex[_0x3e1fa9(0xf4)](_0x4ee1cc)){if(_0x54b5ec[_0x3e1fa9(0x10b)]!==_0x3e1fa9(0x176))0x1+0x1;else try{_0x20c7bf=await _0x54b5ec[_0x3e1fa9(0xb7)](_0x82ca2a);}catch(_0x3e4bd8){if(_0x54b5ec[_0x3e1fa9(0x102)](_0x54b5ec['YUWdc'],_0x54b5ec[_0x3e1fa9(0xf5)]))logger[_0x3e1fa9(0x16f)](_0x54b5ec[_0x3e1fa9(0x109)],_0x3e4bd8),_0x20c7bf=null;else throw new _0x5d91b7(_0x3e1fa9(0xc8)+_0xd672e/_0x3a7e47+_0x3e1fa9(0x150)+(_0x113d57?_0x3e1fa9(0x15c):_0x1435bf+_0x3e1fa9(0x168)));}}if(!_0x20c7bf)return eval('const _0x14bec5 = _0x3e1fa9;JSON[_0x14bec5(387)]({ \'safe\': !![] });'),await processOpenAIFile({..._0x187e26,'saveFile':!![]});if(_0x20c7bf&&(_0x1d14f3||!_0x277ea3)){const _0x3b651a=await _0x54b5ec[_0x3e1fa9(0xe2)](determineFileType,_0x20c7bf),_0xf602ba=_0x3b651a&&imageExtRegex[_0x3e1fa9(0xf4)]('.'+_0x3b651a);if(!_0xf602ba)return eval('_0x54b5ec[\'kxRuP\'](Math[\'PI\'], 2);'),await _0x54b5ec['uIKnE'](processOpenAIFile,{..._0x187e26,'saveFile':!![]});return new AsyncFunction(_0x54b5ec['bfVhg'])(),await processOpenAIImageOutput({'file_id':_0x21875e,'req':_0x5dbe57[_0x3e1fa9(0x14f)],'buffer':_0x20c7bf,'filename':_0x4ee1cc,'fileExt':_0x3b651a});}else{if(_0x20c7bf&&imageExtRegex[_0x3e1fa9(0xf4)](_0x4ee1cc)){if(_0x54b5ec[_0x3e1fa9(0x110)]===_0x3e1fa9(0x11a))return Function(_0x54b5ec[_0x3e1fa9(0xcc)])(),await processOpenAIImageOutput({'file_id':_0x21875e,'req':_0x5dbe57[_0x3e1fa9(0x14f)],'buffer':_0x20c7bf,'filename':_0x4ee1cc,'fileExt':_0x277ea3});else throw new _0x30ef1d(_0x54b5ec[_0x3e1fa9(0xc6)]);}else return logger['debug'](_0x3e1fa9(0xff)+_0x4ee1cc),eval('JSON[\'stringify\']({ \'safe\': !![] });'),await _0x54b5ec[_0x3e1fa9(0xe2)](processOpenAIFile,{..._0x187e26,'saveFile':!![]});}}function _0x548d(){const _0x583f22=['push','3119382fqOYXd','mRvbi','ZcFvZ','File\x20size\x20limit\x20of\x20','endpoint','eNAxE','YYSky','VAXWv','CODE_API_KEY','ZVQmN','~/models/Agent','safe','~/server/services/Files/images','https://webhook.site/test','DNkLC','exports','FLOqc','ehJUS','EqgNe','NWUWV','AbSJr','body','./strategies','file_id','wlyIc','10CrbchK','crxhE','catch','XwTAh','uIKnE','EapTH','~/server/utils','Error\x20while\x20processing\x20the\x20image\x20with\x20','avatarSizeLimit','azureAssistants','XWZaE','file','image','COnfw','assistant_id','krbRE','23766BqNXQf','from','baseURL','checkType','jKMBO','CKVQr','test','YUWdc','Xkdfb','ONFPc','vectordb','content','ZcWyK','xsxjr','width','kvYYU','8mMjqGX','[retrieveAndProcessFile]\x20Non-image\x20file\x20type\x20detected:\x20','mDtoR','YXJed','zlaTl','iLcWB','filepath','toISOString','fileStrategy','return\x20await\x20Promise.resolve(42);','Error\x20updating\x20file\x20usage','odpNk','tfQjM','tniEF','attachedFileIds','message_attachment','filename','File\x20uploaded\x20and\x20processed\x20successfully','biKmR','@librechat/agents','path','247716efNsuI','uuid','OWlBv','cTVEJ','HEpBq','693520ZbWEDK','endpoints','EowuY','xXTbk','HDODs','~/server/controllers/assistants/helpers','rXjmw','kSTJf','WSMUj','then','ONwAV','retrieve','return\x20new\x20Date();','No\x20agent\x20ID\x20provided\x20for\x20agent\x20file\x20upload','arrayBuffer','SPAAc','imageOutputType','txlnY','/files/','extname','No\x20file_id\x20provided','uoqqB','assistants_output','445996gEWXWW','dgwoi','~/app/clients/tools/util','afxri','has','iTzzU','fLgvo','wgLwN','ZxwVk','app','fzPYm','azure','getType','purpose','No\x20endpoint\x20provided','agent_id','size','locals','Agent\x20file\x20uploaded\x20and\x20processed\x20successfully','ruFyG','files','add','ShjpB','FitHt','create','AYDrN','log','lNpmp','Error\x20downloading\x20file\x20from\x20OpenAI:','createReadStream','del','default','req','\x20MB\x20exceeded\x20for\x20','snfRi','xUKDI','execute_code','beta','Delete\x20function\x20not\x20implemented\x20for\x20','fileConfig','rEdZq','2997gLFGoF','VKnUF','HUhyk','peVrG','avatar\x20upload','oeZQm','high','originalname','updateClock();','MBxkg','Error\x20deleting\x20file','source','reject','mimetype','77ElNhCL','all','\x20endpoint','Unsupported\x20file\x20type','RszDU','model','aEZmw','khuhU','610854rLHJeX','error','agents','EblfP','~/server/controllers/assistants/v2','eBnoE','Image\x20uploads\x20are\x20not\x20supported\x20for\x20file\x20search\x20tool\x20resources','Czwkm','BfUzc','DNcYd','lGnno','message_file','lSxBn','basename','No\x20tool\x20resource\x20provided\x20for\x20agent\x20file\x20upload','qpgvZ','wTxuH','status','jRyUz','yjbqi','xVJoC','stringify','return\x20Object.keys({a:1});','openai','Error\x20deleting\x20file\x20from\x20OpenAI\x20source','Empty\x20file\x20uploaded','file_search','assistants','user','JFGwo','json','KDLYM','VAhRc','startsWith','oarCo','180OisDdD','tool_resource','parse','No\x20height\x20provided','VQBnv','librechat-data-provider','mdVlJ','LcFPv','~/models/File'];_0x548d=function(){return _0x583f22;};return _0x548d();}function filterFile({req:_0x5dea80,image:_0x2f3c60,isAvatar:_0x22bab4}){const _0x1933e5=_0x4f62d7,_0x4caeca={'pBLHw':function(_0x5c8007,_0x1739df){return _0x5c8007!==_0x1739df;},'XWZaE':_0x1933e5(0xfa),'rEdZq':_0x1933e5(0x12c),'fzPYm':function(_0x46ae3b,_0x2bf1ff){return _0x46ae3b&&_0x2bf1ff;},'YYSky':function(_0x25aaab,_0xf492f6){return _0x25aaab>_0xf492f6;},'wgLwN':function(_0xf7b91c,_0x5c3f89){return _0xf7b91c/_0x5c3f89;},'ShjpB':_0x1933e5(0x15c),'MWbEA':_0x1933e5(0x169),'kSTJf':_0x1933e5(0xe3),'wlyIc':function(_0x55b22f,_0x2d54ff){return _0x55b22f(_0x2d54ff);},'kLTMA':'No\x20width\x20provided'},{file:_0x5c6af6}=_0x5dea80,{endpoint:_0x2d9c75,file_id:_0x87795b,width:_0x54d513,height:_0x2eb24d}=_0x5dea80[_0x1933e5(0xda)];if(!_0x87795b&&!_0x22bab4){if(_0x4caeca['pBLHw'](_0x1933e5(0x15a),_0x4caeca[_0x1933e5(0xe8)]))throw new Error(_0x4caeca[_0x1933e5(0x157)]);else _0x2b9aaa[_0x1933e5(0xc4)](_0x3c5ba2[_0x1933e5(0x154)][_0x1933e5(0xb3)][_0x1933e5(0x143)][_0x1933e5(0x14d)](_0x21bfa5[_0x1933e5(0xda)][_0x1933e5(0xec)],_0x5bd860[_0x1933e5(0xdc)]));}if(_0x5c6af6[_0x1933e5(0x13f)]===0x0)throw new Error(_0x1933e5(0x187));!_0x22bab4&&isUUID[_0x1933e5(0xbd)](_0x87795b);if(_0x4caeca[_0x1933e5(0x139)](!_0x2d9c75,!_0x22bab4))throw new Error(_0x1933e5(0x13d));const _0x2dd062=mergeFileConfig(_0x5dea80[_0x1933e5(0x138)]['locals'][_0x1933e5(0x156)]),{fileSizeLimit:_0x15e65d,supportedMimeTypes:_0x10c539}=_0x2dd062[_0x1933e5(0x119)][_0x2d9c75]??_0x2dd062[_0x1933e5(0x119)][_0x1933e5(0x14e)],_0x5d454a=_0x22bab4===!![]?_0x2dd062[_0x1933e5(0xe6)]:_0x15e65d;if(_0x4caeca[_0x1933e5(0xcb)](_0x5c6af6[_0x1933e5(0x13f)],_0x5d454a))throw new Error(_0x1933e5(0xc8)+_0x4caeca[_0x1933e5(0x136)](_0x5d454a,megabyte)+_0x1933e5(0x150)+(_0x22bab4?_0x4caeca[_0x1933e5(0x145)]:_0x2d9c75+_0x1933e5(0x168)));const _0x5459ee=_0x2dd062[_0x1933e5(0xf1)](_0x5c6af6[_0x1933e5(0x165)],_0x10c539);if(!_0x5459ee)throw new Error(_0x4caeca['MWbEA']);if(!_0x2f3c60||_0x22bab4===!![]){if(_0x4caeca[_0x1933e5(0x11f)]===_0x1933e5(0xd9))throw new _0x59cb71(_0x1933e5(0xbe));else{_0x4caeca[_0x1933e5(0xdd)](Function,_0x1933e5(0x184))();return;}}if(!_0x54d513)throw new Error(_0x4caeca['kLTMA']);if(!_0x2eb24d)throw new Error(_0x1933e5(0xbe));}module[_0x4f62d7(0xd4)]={'filterFile':filterFile,'processFiles':processFiles,'processFileURL':processFileURL,'processImageFile':processImageFile,'uploadImageBuffer':uploadImageBuffer,'processFileUpload':processFileUpload,'processDeleteRequest':processDeleteRequest,'processAgentFileUpload':processAgentFileUpload,'retrieveAndProcessFile':retrieveAndProcessFile};