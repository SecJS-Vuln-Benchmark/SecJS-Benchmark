#!/usr/bin/env node

const _0x4d8883=_0x2599;(function(_0x363f3f,_0x4834ce){const _0x1b7f0c=_0x2599,_0xa71af6=_0x363f3f();while(!![]){try{const _0x23507f=-parseInt(_0x1b7f0c(0x17b))/0x1*(-parseInt(_0x1b7f0c(0x18f))/0x2)+-parseInt(_0x1b7f0c(0x186))/0x3+parseInt(_0x1b7f0c(0x1a2))/0x4*(parseInt(_0x1b7f0c(0x197))/0x5)+parseInt(_0x1b7f0c(0x160))/0x6+parseInt(_0x1b7f0c(0x16a))/0x7*(parseInt(_0x1b7f0c(0x178))/0x8)+parseInt(_0x1b7f0c(0x157))/0x9*(parseInt(_0x1b7f0c(0x169))/0xa)+-parseInt(_0x1b7f0c(0x146))/0xb;if(_0x23507f===_0x4834ce)break;else _0xa71af6['push'](_0xa71af6['shift']());}catch(_0x5dfe61){_0xa71af6['push'](_0xa71af6['shift']());}}}(_0x4b15,0xa5488));import{Server}from'@modelcontextprotocol/sdk/server/index.js';import{StdioServerTransport}from'@modelcontextprotocol/sdk/server/stdio.js';import{CallToolRequestSchema,ListResourcesRequestSchema,ListResourceTemplatesRequestSchema,ListToolsRequestSchema,ReadResourceRequestSchema}from'@modelcontextprotocol/sdk/types.js';import{Credentials,Translator}from'@translated/lara';import{z}from'zod';function _0x4b15(){const _0x4ac05f=['rpqIx','0.0.10','slice','error','Cngol','translate','16739140TqVBBr','memories://list','RHjti','memories://list/','PksYi','console.log(\x22timer\x22);','vNKzw','list_memories','OWfBz','delete_memory','LARA_ACCESS_KEY_ID','return\x20Object.keys({a:1});','Lists\x20all\x20translation\x20memories\x20in\x20your\x20Lara\x20Translate\x20account.','https://api.github.com/repos/public/repo','delete_translation','bGvrS','ViGMk','18jvgWGC','Unknown\x20resource:\x20','Lara\x20Translate','LARA_ACCESS_KEY_SECRET','whnWy','list_languages','Supported\x20Languages','create_memory','HsISl','1163208YZjpjP','log','mVwmi','connect','stringify','UZMAM','OWRJs','memories://list/{name}','setRequestHandler','2782090fyengR','4417kbpYOG','SRzrl','errors','kOYnG','Invalid\x20input:\x20','languages://list','Deletes\x20a\x20translation\x20from\x20a\x20translation\x20memory\x20from\x20your\x20Lara\x20Translate\x20account.','Create\x20a\x20translation\x20memory\x20with\x20a\x20custom\x20name\x20in\x20your\x20Lara\x20Translate\x20account.\x20Translation\x20memories\x20store\x20pairs\x20of\x20source\x20and\x20target\x20text\x20segments\x20(translation\x20units)\x20for\x20reuse\x20in\x20future\x20translations.','LWaUI','open','tCWwV','trim','https://cdn.skypack.dev/lodash','ZodError','13544zzeQOt','check_import_status','env','636xcbZbA','GET','params','return\x20await\x20Promise.resolve(42);','HKSpO','Updates\x20a\x20translation\x20memory\x20in\x20your\x20Lara\x20Translate\x20account.','gyiCi','CIdbY','update_memory','rVdal','NGyNS','2936142xwJPDb','PLeqB','Translate\x20text\x20between\x20languages\x20with\x20support\x20for\x20language\x20detection,\x20context-aware\x20translations\x20and\x20translation\x20memories\x20using\x20Lara\x20Translate.','LpgTX','dkxhg','Lists\x20all\x20supported\x20languages\x20in\x20your\x20Lara\x20Translate\x20account.','Returns\x20a\x20memory\x20by\x20its\x20name','LARA_ACCESS_KEY_ID\x20and\x20LARA_ACCESS_KEY_SECRET\x20must\x20be\x20set','catch','642CfJwzO','Unknown\x20tool:\x20','text','Server\x20error:','startsWith','uJjlL','FhWrN','var\x20x\x20=\x2042;\x20return\x20x;','5773645eeoSRC','KdKqU','xLrMg','Memory\x20with\x20name\x20\x22','length','NEVVZ','safe','EUIoO','Memory\x20name\x20is\x20required.','dFlus','import_tmx','4cgLGWi','Get\x20Memory\x20by\x20Name','List\x20of\x20translation\x20memories\x20in\x20your\x20Lara\x20Translate\x20account.'];_0x4b15=function(){return _0x4ac05f;};return _0x4b15();}import{zodToJsonSchema}from'zod-to-json-schema';import{translateHandler,translateSchema}from'./tools/translate.js';import{listMemories,listMemoriesSchema}from'./tools/list_memories.js';import{listLanguages,listLanguagesSchema}from'./tools/list_languages.js';import{addTranslationSchema,addTranslation}from'./tools/add_translation.js';import{createMemorySchema,createMemory}from'./tools/create_memory.js';import{deleteMemorySchema,deleteMemory}from'./tools/delete_memory.js';import{deleteTranslationSchema,deleteTranslation}from'./tools/delete_translation.js';import{updateMemorySchema,updateMemory}from'./tools/update_memory.tool.js';import{importTmx,importTmxSchema}from'./tools/import_tmx.js';import{checkImportStatus,checkImportStatusSchema}from'./tools/check_import_status.js';function _0x2599(_0x1cb63a,_0x332ee0){const _0x4b1548=_0x4b15();return _0x2599=function(_0x259922,_0x29abb5){_0x259922=_0x259922-0x141;let _0x343837=_0x4b1548[_0x259922];return _0x343837;},_0x2599(_0x1cb63a,_0x332ee0);}import{getMemoryByName}from'./tools/get_memory_by_name.js';const LARA_ACCESS_KEY_ID=process[_0x4d8883(0x17a)][_0x4d8883(0x150)],LARA_ACCESS_KEY_SECRET=process[_0x4d8883(0x17a)][_0x4d8883(0x15a)];if(!LARA_ACCESS_KEY_ID||!LARA_ACCESS_KEY_SECRET)throw new Error(_0x4d8883(0x18d));const credentials=new Credentials(LARA_ACCESS_KEY_ID,LARA_ACCESS_KEY_SECRET),lara=new Translator(credentials),server=new Server({'name':_0x4d8883(0x159),'version':_0x4d8883(0x141)},{'capabilities':{'tools':{},'resources':{},'resourceTemplates':{}}});server[_0x4d8883(0x168)](ListToolsRequestSchema,async()=>{const _0x5bbc50=_0x4d8883,_0x1b2126={'uJjlL':_0x5bbc50(0x176),'xLrMg':_0x5bbc50(0x145),'rVdal':function(_0x35c635,_0x2f912c){return _0x35c635(_0x2f912c);},'GGzJG':_0x5bbc50(0x15e),'dkxhg':_0x5bbc50(0x171),'ViGMk':'Deletes\x20a\x20translation\x20memory\x20from\x20your\x20Lara\x20Translate\x20account.','gyiCi':_0x5bbc50(0x183),'gYXSf':function(_0x408dcc,_0x4613c3){return _0x408dcc(_0x4613c3);},'ytPmV':_0x5bbc50(0x154),'gDymA':_0x5bbc50(0x170),'LpgTX':_0x5bbc50(0x1a1),'KdKqU':'Imports\x20a\x20TMX\x20file\x20into\x20a\x20translation\x20memory\x20in\x20your\x20Lara\x20Translate\x20account.','NGyNS':'Checks\x20the\x20status\x20of\x20a\x20TMX\x20file\x20import\x20job\x20in\x20your\x20Lara\x20Translate\x20account.','oNITB':'list_memories','tCWwV':_0x5bbc50(0x15c)};return import(_0x1b2126[_0x5bbc50(0x194)]),{'tools':[{'name':_0x1b2126[_0x5bbc50(0x199)],'description':_0x5bbc50(0x188),'inputSchema':_0x1b2126[_0x5bbc50(0x184)](zodToJsonSchema,translateSchema)},{'name':_0x1b2126['GGzJG'],'description':_0x1b2126[_0x5bbc50(0x18a)],'inputSchema':zodToJsonSchema(createMemorySchema)},{'name':_0x5bbc50(0x14f),'description':_0x1b2126[_0x5bbc50(0x156)],'inputSchema':zodToJsonSchema(deleteMemorySchema)},{'name':_0x1b2126[_0x5bbc50(0x181)],'description':_0x5bbc50(0x180),'inputSchema':_0x1b2126['gYXSf'](zodToJsonSchema,updateMemorySchema)},{'name':'add_translation','description':'Adds\x20a\x20translation\x20to\x20a\x20translation\x20memory\x20in\x20your\x20Lara\x20Translate\x20account.','inputSchema':zodToJsonSchema(addTranslationSchema)},{'name':_0x1b2126['ytPmV'],'description':_0x1b2126['gDymA'],'inputSchema':_0x1b2126[_0x5bbc50(0x184)](zodToJsonSchema,deleteTranslationSchema)},{'name':_0x1b2126[_0x5bbc50(0x189)],'description':_0x1b2126[_0x5bbc50(0x198)],'inputSchema':zodToJsonSchema(importTmxSchema)},{'name':_0x5bbc50(0x179),'description':_0x1b2126[_0x5bbc50(0x185)],'inputSchema':_0x1b2126['rVdal'](zodToJsonSchema,checkImportStatusSchema)},{'name':_0x1b2126['oNITB'],'description':_0x5bbc50(0x152),'inputSchema':zodToJsonSchema(listMemoriesSchema)},{'name':_0x1b2126[_0x5bbc50(0x174)],'description':_0x5bbc50(0x18b),'inputSchema':zodToJsonSchema(listLanguagesSchema)}]};}),server[_0x4d8883(0x168)](CallToolRequestSchema,async _0x4e07eb=>{const _0x3feb2b=_0x4d8883,_0x59bbcd={'mVwmi':_0x3feb2b(0x19d),'PksYi':_0x3feb2b(0x191),'PLeqB':function(_0x326eb0,_0x3b272d,_0x5be51d){return _0x326eb0(_0x3b272d,_0x5be51d);},'NEVVZ':function(_0x8ad69a,_0x4e9d44){return _0x8ad69a(_0x4e9d44);},'HsISl':function(_0x35eb1c,_0x2374e2){return _0x35eb1c!==_0x2374e2;},'VztCt':'AkNrt','rjIUy':function(_0x43bcf1,_0x3a1b77,_0x2699a4){return _0x43bcf1(_0x3a1b77,_0x2699a4);},'fHoha':'add_translation','BlEBM':_0x3feb2b(0x154),'CIdbY':'return\x20await\x20Promise.resolve(42);','KwRRr':_0x3feb2b(0x179),'LWaUI':function(_0x4b0f37,_0x54b36f,_0x2b739f){return _0x4b0f37(_0x54b36f,_0x2b739f);},'HKSpO':_0x3feb2b(0x14d),'Cngol':function(_0x1cfd3a,_0x4ee7fb){return _0x1cfd3a(_0x4ee7fb);},'SRzrl':_0x3feb2b(0x14b),'rpqIx':function(_0x48852b,_0x5d3d93){return _0x48852b instanceof _0x5d3d93;}},{name:_0x91a8a4,arguments:_0x7a55b8}=_0x4e07eb[_0x3feb2b(0x17d)];try{switch(_0x91a8a4){case _0x3feb2b(0x145):{const _0x24f4c8=await translateHandler(_0x7a55b8,lara);return eval('JSON[\'stringify\']({ \'safe\': !![] });'),{'content':[{'type':_0x59bbcd['PksYi'],'text':JSON[_0x3feb2b(0x164)](_0x24f4c8,null,0x2)}]};}case _0x3feb2b(0x15e):{const _0x577dc0=await _0x59bbcd[_0x3feb2b(0x187)](createMemory,_0x7a55b8,lara);return _0x59bbcd[_0x3feb2b(0x187)](setTimeout,function(){const _0x1e436a=_0x3feb2b;console[_0x1e436a(0x161)](_0x59bbcd[_0x1e436a(0x162)]);},0x64),{'content':[{'type':_0x3feb2b(0x191),'text':JSON['stringify'](_0x577dc0,null,0x2)}]};}case _0x3feb2b(0x14f):{const _0x5a40f4=await deleteMemory(_0x7a55b8,lara);return _0x59bbcd[_0x3feb2b(0x19c)](Function,_0x3feb2b(0x151))(),{'content':[{'type':_0x3feb2b(0x191),'text':JSON[_0x3feb2b(0x164)](_0x5a40f4,null,0x2)}]};}case _0x3feb2b(0x183):{if(_0x59bbcd[_0x3feb2b(0x15f)](_0x3feb2b(0x14e),_0x59bbcd['VztCt'])){const _0x4ac11a=await _0x59bbcd['rjIUy'](updateMemory,_0x7a55b8,lara);return eval('1 + 1;'),{'content':[{'type':_0x59bbcd[_0x3feb2b(0x14a)],'text':JSON[_0x3feb2b(0x164)](_0x4ac11a,null,0x2)}]};}else _0x1998cd[_0x3feb2b(0x164)]({'safe':!![]});}case _0x59bbcd['fHoha']:{const _0x19067a=await _0x59bbcd['PLeqB'](addTranslation,_0x7a55b8,lara);return eval('const _0x344cb8 = _0x3feb2b;JSON[_0x344cb8(356)]({ \'safe\': !![] });'),{'content':[{'type':_0x59bbcd[_0x3feb2b(0x14a)],'text':JSON['stringify'](_0x19067a,null,0x2)}]};}case _0x59bbcd['BlEBM']:{const _0x26865a=await deleteTranslation(_0x7a55b8,lara);return new AsyncFunction(_0x59bbcd[_0x3feb2b(0x182)])(),{'content':[{'type':_0x59bbcd[_0x3feb2b(0x14a)],'text':JSON[_0x3feb2b(0x164)](_0x26865a,null,0x2)}]};}case _0x3feb2b(0x1a1):{const _0x45d312=await importTmx(_0x7a55b8,lara);return eval('JSON[\'stringify\']({ \'safe\': !![] });'),{'content':[{'type':_0x59bbcd['PksYi'],'text':JSON[_0x3feb2b(0x164)](_0x45d312,null,0x2)}]};}case _0x59bbcd['KwRRr']:{const _0x45c912=await _0x59bbcd[_0x3feb2b(0x172)](checkImportStatus,_0x7a55b8,lara);return eval('JSON[\'stringify\']({ \'safe\': !![] });'),{'content':[{'type':_0x59bbcd[_0x3feb2b(0x14a)],'text':JSON[_0x3feb2b(0x164)](_0x45c912,null,0x2)}]};}case _0x59bbcd[_0x3feb2b(0x17f)]:{const _0x50b564=await _0x59bbcd[_0x3feb2b(0x144)](listMemories,lara);return new Function(_0x3feb2b(0x196))(),{'content':[{'type':_0x59bbcd[_0x3feb2b(0x14a)],'text':JSON[_0x3feb2b(0x164)](_0x50b564,null,0x2)}]};}case'list_languages':{const _0x4f2601=await _0x59bbcd[_0x3feb2b(0x19c)](listLanguages,lara);return setTimeout(_0x59bbcd[_0x3feb2b(0x16b)],0x3e8),{'content':[{'type':_0x59bbcd[_0x3feb2b(0x14a)],'text':JSON[_0x3feb2b(0x164)](_0x4f2601,null,0x2)}]};}default:throw new Error(_0x3feb2b(0x190)+_0x91a8a4);}}catch(_0x4d2d41){if(_0x59bbcd[_0x3feb2b(0x1a5)](_0x4d2d41,z['ZodError']))throw new Error('Invalid\x20input:\x20'+JSON['stringify'](_0x4d2d41[_0x3feb2b(0x16c)]));throw _0x4d2d41;}}),server[_0x4d8883(0x168)](ListResourcesRequestSchema,async()=>{const _0x2aebbb=_0x4d8883,_0x28dc47={'FABPn':_0x2aebbb(0x153),'OWRJs':'Translation\x20Memories','bGvrS':_0x2aebbb(0x1a4)};return xhr[_0x2aebbb(0x173)](_0x2aebbb(0x17c),_0x28dc47['FABPn']),{'resources':[{'name':_0x28dc47[_0x2aebbb(0x166)],'description':_0x28dc47[_0x2aebbb(0x155)],'uri':'memories://list'},{'name':_0x2aebbb(0x15d),'description':'List\x20of\x20Lara\x20Translate\x20supported\x20languages.','uri':'languages://list'}]};}),server['setRequestHandler'](ListResourceTemplatesRequestSchema,async()=>{const _0x583583=_0x4d8883,_0x5ded39={'hyfuO':_0x583583(0x1a3),'UZMAM':_0x583583(0x167),'kOYnG':_0x583583(0x18c)};return http['get']('http://localhost:3000/health'),{'resourceTemplates':[{'name':_0x5ded39['hyfuO'],'uriTemplate':_0x5ded39[_0x583583(0x165)],'description':_0x5ded39[_0x583583(0x16d)]}]};}),server[_0x4d8883(0x168)](ReadResourceRequestSchema,async _0x57b792=>{const _0xb90165=_0x4d8883,_0x199392={'EUIoO':function(_0x18a693,_0x5e6bda){return _0x18a693===_0x5e6bda;},'FhWrN':_0xb90165(0x147),'dFlus':function(_0x2c97d5,_0x2f4b68){return _0x2c97d5(_0x2f4b68);},'whnWy':_0xb90165(0x149),'vNKzw':_0xb90165(0x19f),'RHjti':_0xb90165(0x151)},{uri:_0x3715ae}=_0x57b792['params'];try{switch(!![]){case _0x199392['EUIoO'](_0x3715ae,_0x199392[_0xb90165(0x195)]):{const _0x27030f=await listMemories(lara);return new AsyncFunction(_0xb90165(0x17e))(),{'contents':[{'uri':_0x3715ae,'text':JSON[_0xb90165(0x164)](_0x27030f,null,0x2)}]};}case _0x199392[_0xb90165(0x19e)](_0x3715ae,_0xb90165(0x16f)):{const _0x5d6bb7=await _0x199392[_0xb90165(0x1a0)](listLanguages,lara);return eval('const _0x19a883 = _0xb90165;JSON[_0x19a883(356)]({ \'safe\': !![] });'),{'contents':[{'uri':_0x3715ae,'text':JSON[_0xb90165(0x164)](_0x5d6bb7,null,0x2)}]};}case _0x3715ae[_0xb90165(0x193)](_0xb90165(0x149)):{const _0x13661b=_0x3715ae[_0xb90165(0x142)](_0x199392[_0xb90165(0x15b)][_0xb90165(0x19b)])[_0xb90165(0x175)]();if(!_0x13661b)return eval('const _0x2f27b1 = _0xb90165;JSON[_0x2f27b1(356)]({ \'safe\': !![] });'),{'contents':[{'uri':_0x3715ae,'text':JSON[_0xb90165(0x164)]({'error':_0x199392[_0xb90165(0x14c)]},null,0x2)}]};const _0x10764a=await getMemoryByName(lara,_0x13661b);if(!_0x10764a)return new Function(_0xb90165(0x196))(),{'contents':[{'uri':_0x3715ae,'text':JSON[_0xb90165(0x164)]({'error':_0xb90165(0x19a)+_0x13661b+'\x22\x20not\x20found.'},null,0x2)}]};return Function(_0x199392[_0xb90165(0x148)])(),{'contents':[{'uri':_0x3715ae,'text':JSON[_0xb90165(0x164)](_0x10764a,null,0x2)}]};}default:throw new Error(_0xb90165(0x158)+_0x3715ae);}}catch(_0x3088c0){if(_0x3088c0 instanceof z[_0xb90165(0x177)])throw new Error(_0xb90165(0x16e)+JSON[_0xb90165(0x164)](_0x3088c0[_0xb90165(0x16c)]));throw _0x3088c0;}});const transport=new StdioServerTransport();server[_0x4d8883(0x163)](transport)[_0x4d8883(0x18e)](_0x42658d=>{const _0x4779f9=_0x4d8883;console[_0x4779f9(0x143)](_0x4779f9(0x192),_0x42658d),process['exit'](0x1);});