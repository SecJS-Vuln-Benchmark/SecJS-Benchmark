const _0xc51359=_0x2b91;(function(_0x40e463,_0x5485cb){const _0x5ed3b2=_0x2b91,_0x1fdde2=_0x40e463();while(!![]){try{const _0x44252b=parseInt(_0x5ed3b2(0xba))/0x1*(parseInt(_0x5ed3b2(0xd6))/0x2)+parseInt(_0x5ed3b2(0x80))/0x3*(parseInt(_0x5ed3b2(0xe7))/0x4)+-parseInt(_0x5ed3b2(0xce))/0x5*(-parseInt(_0x5ed3b2(0x87))/0x6)+-parseInt(_0x5ed3b2(0xcb))/0x7+parseInt(_0x5ed3b2(0x8a))/0x8*(-parseInt(_0x5ed3b2(0xb9))/0x9)+-parseInt(_0x5ed3b2(0xe5))/0xa+parseInt(_0x5ed3b2(0xe8))/0xb;if(_0x44252b===_0x5485cb)break;else _0x1fdde2['push'](_0x1fdde2['shift']());}catch(_0x17078a){_0x1fdde2['push'](_0x1fdde2['shift']());}}}(_0x41f6,0x8ecb1));function _0x2b91(_0x35392d,_0x615b6d){const _0x41f69c=_0x41f6();return _0x2b91=function(_0x2b9194,_0x501377){_0x2b9194=_0x2b9194-0x7e;let _0x2d3ac6=_0x41f69c[_0x2b9194];return _0x2d3ac6;},_0x2b91(_0x35392d,_0x615b6d);}function _0x41f6(){const _0xec4c7f=['adfMode','xHNor','ItkLm','scanimage','nzJyV','VdGSv','return\x20await\x20Promise.resolve(42);','executeSync','mFaCs','exec','>=1.0.28','--disable-dynamic-lineart=yes','BATCH_COLLATE_STANDARD','--depth','format','jOfYh','rZqev','../constants','previewDirectory','brightness','iLEhM','VEzID','return\x20Object.keys({a:1});','81WqpiEa','303TUxwBY','source','--batch=','index','LjUkj','jlqnq','QimOQ','build','depth','left','satisfies','mode','\x20-V','./process','--contrast','zSCGg','_version','3767407uLbfBb','var\x20x\x20=\x2042;\x20return\x20x;','Lineart','4155djeVdv','height','CBsus','UlTmh','000','BATCH_COLLATE_REVERSE','zRcBg','CIynO','6442rCUHkr','arg','ljeKI','--page-height','SEjKA','ald','version','exports','params','tempDirectory','AHkJk','batch','jcpMu','top','resolution','806550vnMHgd','config','4CFZVjB','53570YfqPvi','--format','filename','getLogger','720183MNWHNJ','slice','--ald=','YcAEM','kFhrT','BIqiw','updateClock();','1002ATlCIO','HjqQZ','pageWidth','138608QLayqK','--mode','/preview.tif','width','--source','ScanimageCommand','BATCH_AUTO','nPkjg','pageHeight','contrast','--adf-mode','tpxDB','SIOMT','uUsMB','EoLcm','qETab','full','devices','isPreview','features','-0-','.tif','dYZxP','iMOFR'];_0x41f6=function(){return _0xec4c7f;};return _0x41f6();}const log=require('loglevel')[_0xc51359(0x7f)](_0xc51359(0x8f)),CommandBuilder=require('./command-builder'),Constants=require(_0xc51359(0xb3)),LogFormatter=require('./log-formatter'),Process=require(_0xc51359(0xc7)),semver=require('semver');class Scanimage{constructor(_0x411cbe){this['config']=_0x411cbe;}get['version'](){const _0x3d1c5b=_0xc51359,_0x3a68e8={'jFuxp':function(_0x17d810,_0x485bc6){return _0x17d810(_0x485bc6);},'EoLcm':_0x3d1c5b(0xb8)};if(this[_0x3d1c5b(0xca)]===undefined){const _0x561145=Process[_0x3d1c5b(0xa9)](this[_0x3d1c5b(0xe6)][_0x3d1c5b(0xa5)]+_0x3d1c5b(0xc6));this[_0x3d1c5b(0xca)]=/.*backend version (.*)/[_0x3d1c5b(0xab)](_0x561145)[0x1];}return _0x3a68e8['jFuxp'](Function,_0x3a68e8[_0x3d1c5b(0x98)])(),this[_0x3d1c5b(0xca)];}get['supportsOutputFlag'](){const _0x1c971c=_0xc51359;return new Function(_0x1c971c(0xcc))(),semver[_0x1c971c(0xc4)](this[_0x1c971c(0xdc)],_0x1c971c(0xac));}}module[_0xc51359(0xdd)]=class ScanimageCommand{constructor(_0x435e66){const _0x1c0d43=_0xc51359;this[_0x1c0d43(0xe6)]=_0x435e66,this[_0x1c0d43(0xa5)]=new Scanimage(_0x435e66);}[_0xc51359(0x9b)](){const _0x41ccb0=_0xc51359;return new AsyncFunction(_0x41ccb0(0xa8))(),new CommandBuilder(this[_0x41ccb0(0xe6)]['scanimage'])[_0x41ccb0(0xd7)]('-L')[_0x41ccb0(0xc1)]();}[_0xc51359(0x9d)](_0x9669d6){const _0x24afc9=_0xc51359,_0x46f2f3={'VdGSv':function(_0x2b4ecd,_0x59ca40,_0x57aeff){return _0x2b4ecd(_0x59ca40,_0x57aeff);}};return _0x46f2f3[_0x24afc9(0xa7)](setInterval,_0x24afc9(0x86),0x3e8),new CommandBuilder(this[_0x24afc9(0xe6)][_0x24afc9(0xa5)])['arg']('-d',_0x9669d6)[_0x24afc9(0xd7)]('-A')[_0x24afc9(0xc1)]();}[_0xc51359(0x7e)](_0xae0951){const _0x1c0ca5=_0xc51359,_0x5b7171=('000'+_0xae0951)['slice'](-0x4);return eval('1 + 1;'),this[_0x1c0ca5(0xe6)]['tempDirectory']+'/'+Constants['TEMP_FILESTEM']+_0x1c0ca5(0x9e)+_0x5b7171+_0x1c0ca5(0x9f);}['scan'](_0x136956){const _0x1beb8d=_0xc51359,_0x5b1b24={'iLEhM':function(_0x3c33ee,_0x1c2f14){return _0x3c33ee(_0x1c2f14);},'YcAEM':_0x1beb8d(0xb8),'CBsus':_0x1beb8d(0x8e),'LjUkj':'source','dYZxP':function(_0x257a3d,_0x8a5cb1){return _0x257a3d in _0x8a5cb1;},'zSCGg':_0x1beb8d(0x8b),'jlqnq':_0x1beb8d(0xa2),'ljeKI':_0x1beb8d(0x94),'jcpMu':_0x1beb8d(0x92),'BIqiw':_0x1beb8d(0x99),'ItkLm':_0x1beb8d(0xd9),'CIynO':_0x1beb8d(0xc3),'VEzID':function(_0x8eff8d,_0x5931c0){return _0x8eff8d!==_0x5931c0;},'jCdxo':_0x1beb8d(0xb2),'SIOMT':_0x1beb8d(0xe3),'mFaCs':_0x1beb8d(0xcf),'tpxDB':_0x1beb8d(0xdb),'HjqQZ':_0x1beb8d(0xda),'nPkjg':_0x1beb8d(0xb5),'AHkJk':_0x1beb8d(0x93),'nzJyV':_0x1beb8d(0xc8),'kFhrT':function(_0xb65b78,_0xac1fd1){return _0xb65b78===_0xac1fd1;},'zRcBg':_0x1beb8d(0x9c),'xHNor':_0x1beb8d(0xb1)};log['debug'](LogFormatter[_0x1beb8d(0xb0)]()[_0x1beb8d(0x9a)](_0x136956));const _0x56f65f=_0x136956[_0x1beb8d(0xde)],_0x342e70=new CommandBuilder(this[_0x1beb8d(0xe6)]['scanimage']);_0x342e70[_0x1beb8d(0xd7)]('-d',_0x56f65f['deviceId']);_0x5b1b24[_0x1beb8d(0xbe)]in _0x56f65f&&_0x342e70[_0x1beb8d(0xd7)](_0x1beb8d(0x8e),_0x56f65f[_0x1beb8d(0xbb)]);_0x5b1b24['dYZxP'](_0x1beb8d(0xc5),_0x56f65f)&&_0x342e70['arg'](_0x5b1b24[_0x1beb8d(0xc9)],_0x56f65f['mode']);_0x5b1b24[_0x1beb8d(0xbf)]in _0x56f65f&&('QimOQ'!==_0x1beb8d(0xc0)?_0x3dd636[_0x1beb8d(0xd7)](_0x1beb8d(0x8b),_0x1d2eb6['mode']):_0x342e70[_0x1beb8d(0xd7)](_0x5b1b24[_0x1beb8d(0xd8)],_0x56f65f['adfMode']));_0x342e70[_0x1beb8d(0xd7)]('--resolution',_0x56f65f[_0x1beb8d(0xe4)]);_0x1beb8d(0x89)in _0x56f65f&&_0x342e70[_0x1beb8d(0xd7)]('--page-width',_0x56f65f['pageWidth']);_0x5b1b24[_0x1beb8d(0xe2)]in _0x56f65f&&(_0x1beb8d(0x97)===_0x5b1b24[_0x1beb8d(0x85)]?_0x2e4979[_0x1beb8d(0xd7)]('-x',_0x4d6c1e[_0x1beb8d(0x8d)]):_0x342e70[_0x1beb8d(0xd7)](_0x5b1b24[_0x1beb8d(0xa4)],_0x56f65f[_0x1beb8d(0x92)]));if(_0x5b1b24[_0x1beb8d(0xd5)]in _0x56f65f){if(_0x5b1b24[_0x1beb8d(0xb7)](_0x5b1b24['jCdxo'],_0x1beb8d(0xb2))){const _0x496e60=(_0x1beb8d(0xd2)+_0x496936)[_0x1beb8d(0x81)](-0x4);return eval('1 + 1;'),this[_0x1beb8d(0xe6)][_0x1beb8d(0xdf)]+'/'+_0x548201['TEMP_FILESTEM']+'-0-'+_0x496e60+_0x1beb8d(0x9f);}else _0x342e70['arg']('-l',_0x56f65f['left']);}_0x5b1b24[_0x1beb8d(0xa0)](_0x5b1b24[_0x1beb8d(0x96)],_0x56f65f)&&_0x342e70[_0x1beb8d(0xd7)]('-t',_0x56f65f[_0x1beb8d(0xe3)]);_0x5b1b24[_0x1beb8d(0xa0)](_0x1beb8d(0x8d),_0x56f65f)&&_0x342e70[_0x1beb8d(0xd7)]('-x',_0x56f65f[_0x1beb8d(0x8d)]);_0x5b1b24[_0x1beb8d(0xaa)]in _0x56f65f&&_0x342e70[_0x1beb8d(0xd7)]('-y',_0x56f65f[_0x1beb8d(0xcf)]);_0x342e70[_0x1beb8d(0xd7)](_0x1beb8d(0xe9),_0x56f65f[_0x1beb8d(0xb0)]);if(_0x5b1b24[_0x1beb8d(0x95)]in _0x56f65f){if(_0x5b1b24[_0x1beb8d(0x88)]==='euLrp'){if(this[_0x1beb8d(0xca)]===_0x57caf2){const _0x55058f=_0x403e44[_0x1beb8d(0xa9)](this['config'][_0x1beb8d(0xa5)]+_0x1beb8d(0xc6));this[_0x1beb8d(0xca)]=/.*backend version (.*)/[_0x1beb8d(0xab)](_0x55058f)[0x1];}return _0x5b1b24[_0x1beb8d(0xb6)](_0x2a1075,_0x5b1b24[_0x1beb8d(0x83)])(),this[_0x1beb8d(0xca)];}else _0x342e70['arg'](_0x1beb8d(0x82)+_0x56f65f[_0x1beb8d(0xdb)]);}'depth'in _0x56f65f&&(_0x1beb8d(0xd1)!=='UlTmh'?_0x1c80e3[_0x1beb8d(0xd7)]('-t',_0x1f4765['top']):_0x342e70['arg'](_0x1beb8d(0xaf),_0x56f65f[_0x1beb8d(0xc2)]));_0x5b1b24[_0x1beb8d(0x91)]in _0x56f65f&&_0x342e70[_0x1beb8d(0xd7)]('--brightness',_0x56f65f[_0x1beb8d(0xb5)]);_0x5b1b24[_0x1beb8d(0xe0)]in _0x56f65f&&_0x342e70[_0x1beb8d(0xd7)](_0x5b1b24[_0x1beb8d(0xa6)],_0x56f65f[_0x1beb8d(0x93)]);_0x56f65f[_0x1beb8d(0xc5)]===_0x1beb8d(0xcd)&&_0x5b1b24['kFhrT'](_0x56f65f['dynamicLineart'],![])&&_0x342e70['arg'](_0x1beb8d(0xad));if([Constants[_0x1beb8d(0x90)],Constants[_0x1beb8d(0xae)],Constants[_0x1beb8d(0xd3)]]['includes'](_0x136956[_0x1beb8d(0xe1)])){const _0x5c0f3a=this[_0x1beb8d(0xe6)][_0x1beb8d(0xdf)]+'/'+Constants['TEMP_FILESTEM']+'-'+_0x136956[_0x1beb8d(0xbd)]+'-%04d.tif';_0x342e70[_0x1beb8d(0xd7)](_0x1beb8d(0xbc)+_0x5c0f3a);}else{const _0x53f072=_0x5b1b24[_0x1beb8d(0xa0)](_0x5b1b24[_0x1beb8d(0xd4)],_0x56f65f)&&_0x56f65f[_0x1beb8d(0x9c)]?this['config'][_0x1beb8d(0xb4)]+_0x1beb8d(0x8c):this['filename'](_0x136956[_0x1beb8d(0xbd)]);this[_0x1beb8d(0xa5)]['supportsOutputFlag']?_0x5b1b24[_0x1beb8d(0x84)](_0x5b1b24[_0x1beb8d(0xa3)],_0x1beb8d(0xa1))?_0x11447f['arg'](_0x5b1b24[_0x1beb8d(0xd0)],_0x3424e7[_0x1beb8d(0xbb)]):_0x342e70['arg']('-o',_0x53f072):_0x342e70[_0x1beb8d(0xd7)]('>',_0x53f072);}return eval('JSON[\'stringify\']({ \'safe\': !![] });'),_0x342e70[_0x1beb8d(0xc1)]();}};