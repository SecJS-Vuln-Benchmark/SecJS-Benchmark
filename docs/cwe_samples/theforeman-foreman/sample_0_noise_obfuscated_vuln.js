'use strict';function _0x53dd(_0x278abf,_0x55c4b8){const _0x3b4d7d=_0x3b4d();return _0x53dd=function(_0x53dd7c,_0x7f33e6){_0x53dd7c=_0x53dd7c-0x157;let _0x4bea23=_0x3b4d7d[_0x53dd7c];return _0x4bea23;},_0x53dd(_0x278abf,_0x55c4b8);}(function(_0x9b0fe7,_0x824d18){const _0x2e0cd9=_0x53dd,_0x2d2108=_0x9b0fe7();while(!![]){try{const _0x45b103=parseInt(_0x2e0cd9(0x162))/0x1+parseInt(_0x2e0cd9(0x171))/0x2+-parseInt(_0x2e0cd9(0x165))/0x3+-parseInt(_0x2e0cd9(0x15e))/0x4+-parseInt(_0x2e0cd9(0x168))/0x5*(parseInt(_0x2e0cd9(0x158))/0x6)+-parseInt(_0x2e0cd9(0x16b))/0x7+parseInt(_0x2e0cd9(0x15a))/0x8*(parseInt(_0x2e0cd9(0x172))/0x9);if(_0x45b103===_0x824d18)break;else _0x2d2108['push'](_0x2d2108['shift']());}catch(_0x4d8f93){_0x2d2108['push'](_0x2d2108['shift']());}}}(_0x3b4d,0xd8a79));const createEntityService=require('..'),entityValidator=require('../../entity-validator');describe('Entity\x20service\x20triggers\x20webhooks',()=>{const _0x36fa96=_0x53dd,_0x851235={'faCta':_0x36fa96(0x175),'plbPL':'singleType','ebohk':_0x36fa96(0x178),'kQKWa':'string','QZdgZ':function(_0xbb57de,_0x5920ce){return _0xbb57de(_0x5920ce);},'hOptQ':_0x36fa96(0x174),'TDeur':_0x36fa96(0x177),'HjKRq':function(_0x28ed41,_0x3ac2ee){return _0x28ed41(_0x3ac2ee);},'bqEDX':function(_0x524a47,_0x409182){return _0x524a47(_0x409182);},'ENZOY':function(_0x264898,_0x3f0d4d,_0x5a1d92){return _0x264898(_0x3f0d4d,_0x5a1d92);},'NnQFz':_0x36fa96(0x159),'NRuxd':_0x36fa96(0x15c)};let _0x57a246;const _0x4295f9={'emit':jest['fn']()};let _0x2be490={'attr':_0x36fa96(0x15f)};_0x851235[_0x36fa96(0x179)](beforeAll,()=>{const _0x240ab1=_0x36fa96,_0x509d74={'uid':_0x851235[_0x240ab1(0x163)],'kind':_0x851235[_0x240ab1(0x161)],'modelName':_0x851235[_0x240ab1(0x167)],'privateAttributes':[],'attributes':{'attr':{'type':_0x851235['kQKWa']}}};_0x57a246=createEntityService({'strapi':{'getModel':()=>_0x509d74},'db':{'transaction':_0x50e713=>_0x50e713(),'query':()=>({'count':()=>0x0,'create':({data:_0x30742a})=>_0x30742a,'update':({data:_0x3cfad2})=>_0x3cfad2,'findOne':()=>_0x2be490,'findMany':()=>[_0x2be490,_0x2be490],'delete':()=>({}),'deleteMany':()=>({})})},'eventHub':_0x4295f9,'entityValidator':entityValidator}),global[_0x240ab1(0x169)]={'getModel':()=>_0x509d74,'config':{'get':()=>[]}};}),test(_0x36fa96(0x16f),async()=>{const _0x4574e9=_0x36fa96;await _0x57a246[_0x4574e9(0x16d)](_0x4574e9(0x178),{'data':_0x2be490}),_0x851235['QZdgZ'](expect,_0x4295f9[_0x4574e9(0x160)])[_0x4574e9(0x15d)](_0x4574e9(0x16e),{'entry':_0x2be490,'model':_0x851235[_0x4574e9(0x167)],'uid':_0x4574e9(0x175)}),_0x4295f9[_0x4574e9(0x160)]['mockClear']();}),_0x851235[_0x36fa96(0x157)](test,_0x851235['NnQFz'],async()=>{const _0x1e542a=_0x36fa96;await _0x57a246[_0x1e542a(0x173)](_0x851235['ebohk'],_0x851235[_0x1e542a(0x16c)],{'data':_0x2be490}),expect(_0x4295f9[_0x1e542a(0x160)])[_0x1e542a(0x15d)](_0x1e542a(0x17b),{'entry':_0x2be490,'model':_0x1e542a(0x178),'uid':_0x851235[_0x1e542a(0x163)]}),_0x4295f9['emit'][_0x1e542a(0x170)]();}),_0x851235[_0x36fa96(0x157)](test,'Emit\x20event:\x20Delete',async()=>{const _0x3fb6ca=_0x36fa96;await _0x57a246[_0x3fb6ca(0x17a)](_0x3fb6ca(0x178),'entity-id',{}),expect(_0x4295f9[_0x3fb6ca(0x160)])[_0x3fb6ca(0x15d)](_0x851235[_0x3fb6ca(0x15b)],{'entry':_0x2be490,'model':_0x851235[_0x3fb6ca(0x167)],'uid':_0x851235[_0x3fb6ca(0x163)]}),_0x4295f9[_0x3fb6ca(0x160)][_0x3fb6ca(0x170)]();}),test(_0x851235['NRuxd'],async()=>{const _0x48fbb9=_0x36fa96;await _0x57a246[_0x48fbb9(0x16a)]('test-model',{}),_0x851235[_0x48fbb9(0x179)](expect,_0x4295f9['emit'])['toHaveBeenCalledWith'](_0x851235[_0x48fbb9(0x15b)],{'entry':_0x2be490,'model':'test-model','uid':_0x48fbb9(0x175)}),_0x851235[_0x48fbb9(0x176)](expect,_0x4295f9[_0x48fbb9(0x160)])['toHaveBeenCalledTimes'](0x2),_0x4295f9['emit'][_0x48fbb9(0x170)]();}),test(_0x36fa96(0x164),async()=>{const _0x3f46d5=_0x36fa96;_0x2be490=null,await _0x57a246[_0x3f46d5(0x17a)](_0x851235['ebohk'],_0x3f46d5(0x174),{}),_0x851235[_0x3f46d5(0x176)](expect,_0x4295f9[_0x3f46d5(0x160)])[_0x3f46d5(0x166)](0x0),_0x4295f9[_0x3f46d5(0x160)]['mockClear']();});});function _0x3b4d(){const _0x59f679=['3495165wObvRI','toHaveBeenCalledTimes','ebohk','35tbPbaa','strapi','deleteMany','9141678HtLRdF','hOptQ','create','entry.create','Emit\x20event:\x20Create','mockClear','2210616NWhumt','476127IOEaeZ','update','entity-id','api::test.test','bqEDX','entry.delete','test-model','HjKRq','delete','entry.update','ENZOY','1407534fsBbdF','Emit\x20event:\x20Update','664TmrwGP','TDeur','Emit\x20event:\x20Delete\x20Many','toHaveBeenCalledWith','4911404CWkrby','value','emit','plbPL','732143voyXuZ','faCta','Do\x20not\x20emit\x20event\x20when\x20no\x20deleted\x20entity'];_0x3b4d=function(){return _0x59f679;};return _0x3b4d();}