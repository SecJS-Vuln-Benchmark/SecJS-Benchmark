'use strict';const _0x119893=_0x5b5b;(function(_0x3877ee,_0x1719f3){const _0x5adb7f=_0x5b5b,_0x251c08=_0x3877ee();while(!![]){try{const _0x444e7c=-parseInt(_0x5adb7f(0x176))/0x1*(parseInt(_0x5adb7f(0x180))/0x2)+parseInt(_0x5adb7f(0x169))/0x3+parseInt(_0x5adb7f(0x199))/0x4*(-parseInt(_0x5adb7f(0x167))/0x5)+-parseInt(_0x5adb7f(0x19c))/0x6*(-parseInt(_0x5adb7f(0x18f))/0x7)+parseInt(_0x5adb7f(0x172))/0x8*(-parseInt(_0x5adb7f(0x16b))/0x9)+-parseInt(_0x5adb7f(0x185))/0xa+-parseInt(_0x5adb7f(0x17d))/0xb*(-parseInt(_0x5adb7f(0x181))/0xc);if(_0x444e7c===_0x1719f3)break;else _0x251c08['push'](_0x251c08['shift']());}catch(_0x50b41a){_0x251c08['push'](_0x251c08['shift']());}}}(_0x3bb3,0xd5ada));function _0x3bb3(){const _0x4ca1da=['gPLdz','ojNqS','@strapi/utils','toBeInstanceOf','validateYupSchema','154ShHgvR','mockResolvedValueOnce','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20for\x20the\x20checked\x20attribute','123','toBe','ZKgEv','ZsCLd','WJGQb','czCJD','PkAWs','8824PXrPEK','HhUZj','Ctxub','102498JesAps','it\x20does\x20not\x20validate\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20value\x20is\x20`null`','contentType','3685qQQXjI','test-model','2820249DtILFE','mockReset','639BnynYm','it\x20validates\x20the\x20unique\x20constraint\x20if\x20there\x20is\x20no\x20other\x20record\x20in\x20the\x20database','biginteger','attrBigIntegerUnique','OoRvw','toHaveBeenCalled','../validators','153672dKCptI','clearAllMocks','dMUkp','toHaveBeenCalledWith','158bwqGPU','strapi','BigInteger\x20validator','assertions','test-uid','not','it\x20does\x20not\x20validate\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20is\x20not\x20set\x20as\x20unique','5830770FhFVTv','min','WOClh','12146FCCnty','84TpZSXs','ZeZqO','BWhXm','UHpjH','2019780qnWHbO','xCjtX','nullable','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20but\x20not\x20the\x20same\x20id\x20for\x20the\x20checked\x20attribute\x20if\x20an\x20entity\x20is\x20passed','unique'];_0x3bb3=function(){return _0x4ca1da;};return _0x3bb3();}const strapiUtils=require(_0x119893(0x18c)),{errors:{YupValidationError}}=require(_0x119893(0x18c)),validators=require(_0x119893(0x171));function _0x5b5b(_0x277231,_0x222022){const _0x3bb3bc=_0x3bb3();return _0x5b5b=function(_0x5b5b77,_0x12c73f){_0x5b5b77=_0x5b5b77-0x167;let _0x30f3f8=_0x3bb3bc[_0x5b5b77];return _0x30f3f8;},_0x5b5b(_0x277231,_0x222022);}describe(_0x119893(0x178),()=>{const _0x52e416=_0x119893,_0xf3046b={'czCJD':function(_0xf95efd,_0xd2ae82){return _0xf95efd(_0xd2ae82);},'ZsCLd':_0x52e416(0x16d),'PkAWs':function(_0x3665d1,_0x4aa33a){return _0x3665d1(_0x4aa33a);},'yAWES':_0x52e416(0x16e),'OoRvw':_0x52e416(0x19e),'BWhXm':_0x52e416(0x168),'WOClh':function(_0x488785,_0x1ebfc4,_0x31c82e){return _0x488785(_0x1ebfc4,_0x31c82e);},'UHpjH':_0x52e416(0x16c),'BISLX':'it\x20fails\x20the\x20validation\x20of\x20the\x20unique\x20constraint\x20if\x20the\x20database\x20contains\x20a\x20record\x20with\x20the\x20same\x20attribute\x20value','ojNqS':'it\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20data\x20has\x20not\x20changed\x20even\x20if\x20there\x20is\x20a\x20record\x20in\x20the\x20database\x20with\x20the\x20same\x20attribute\x20value','WJGQb':function(_0xe916f7,_0x47915d,_0x18a637){return _0xe916f7(_0x47915d,_0x18a637);},'tcyVx':_0x52e416(0x191),'xCjtX':_0x52e416(0x192),'ZKgEv':_0x52e416(0x189),'gPLdz':_0x52e416(0x17e)};_0xf3046b[_0x52e416(0x196)](describe,_0xf3046b[_0x52e416(0x194)],()=>{const _0x5c2b16=_0x52e416,_0x2d5a4b={'Ctxub':_0x5c2b16(0x16d),'dMUkp':_0xf3046b['yAWES'],'ZeZqO':function(_0x4450ac,_0x464482){return _0x4450ac(_0x464482);},'HhUZj':function(_0x59d8b6,_0x3dbabe){return _0x59d8b6(_0x3dbabe);},'hdrFI':function(_0x20956c,_0x207c0d){return _0x20956c(_0x207c0d);}},_0x56077d=jest['fn']();global[_0x5c2b16(0x177)]={'db':{'query':jest['fn'](()=>({'findOne':_0x56077d}))}},afterEach(()=>{const _0x1f9c1a=_0x5c2b16;jest[_0x1f9c1a(0x173)](),_0x56077d[_0x1f9c1a(0x16a)]();});const _0xd8e1b4={'kind':_0xf3046b[_0x5c2b16(0x16f)],'modelName':_0xf3046b[_0x5c2b16(0x183)],'uid':_0x5c2b16(0x17a),'privateAttributes':[],'options':{},'attributes':{'attrBigIntegerUnique':{'type':_0xf3046b[_0x5c2b16(0x195)],'unique':!![]}}};_0xf3046b[_0x5c2b16(0x17f)](test,_0x5c2b16(0x17c),async()=>{const _0x46166f=_0x5c2b16;_0x56077d[_0x46166f(0x190)](null);const _0x231f59=strapiUtils[_0x46166f(0x18e)](validators[_0x46166f(0x16d)]({'attr':{'type':_0x46166f(0x16d)},'model':_0xd8e1b4,'updatedAttribute':{'name':'attrBigIntegerUnique','value':0x1},'entity':null},{'isDraft':![]}));await _0x231f59(0x1),_0xf3046b['czCJD'](expect,_0x56077d)[_0x46166f(0x17b)][_0x46166f(0x170)]();}),test(_0x5c2b16(0x19d),async()=>{const _0x14ce8c=_0x5c2b16;_0x56077d['mockResolvedValueOnce'](null);const _0x5d0c16=strapiUtils[_0x14ce8c(0x18e)](validators['biginteger']({'attr':{'type':_0x2d5a4b[_0x14ce8c(0x19b)],'unique':!![]},'model':_0xd8e1b4,'updatedAttribute':{'name':_0x2d5a4b[_0x14ce8c(0x174)],'value':null},'entity':null},{'isDraft':![]})[_0x14ce8c(0x187)]());await _0x5d0c16(null),_0x2d5a4b[_0x14ce8c(0x182)](expect,_0x56077d)[_0x14ce8c(0x17b)][_0x14ce8c(0x170)]();}),test(_0xf3046b[_0x5c2b16(0x184)],async()=>{const _0x5ea93f=_0x5c2b16;_0x56077d['mockResolvedValueOnce'](null);const _0x4cab21=strapiUtils[_0x5ea93f(0x18e)](validators['biginteger']({'attr':{'type':_0x2d5a4b[_0x5ea93f(0x19b)],'unique':!![]},'model':_0xd8e1b4,'updatedAttribute':{'name':_0x5ea93f(0x16e),'value':0x1},'entity':null},{'isDraft':![]}));expect(await _0x2d5a4b[_0x5ea93f(0x19a)](_0x4cab21,0x1))[_0x5ea93f(0x193)](0x1);}),_0xf3046b['WOClh'](test,_0xf3046b['BISLX'],async()=>{const _0x496e59=_0x5c2b16;expect[_0x496e59(0x179)](0x1),_0x56077d[_0x496e59(0x190)]({'attrBigIntegerUnique':0x2});const _0x2d9d91=strapiUtils[_0x496e59(0x18e)](validators[_0x496e59(0x16d)]({'attr':{'type':_0x2d5a4b['Ctxub'],'unique':!![]},'model':_0xd8e1b4,'updatedAttribute':{'name':_0x496e59(0x16e),'value':0x2},'entity':null},{'isDraft':![]}));try{await _0x2d5a4b[_0x496e59(0x182)](_0x2d9d91,0x2);}catch(_0x144a1b){expect(_0x144a1b)[_0x496e59(0x18d)](YupValidationError);}}),_0xf3046b[_0x5c2b16(0x17f)](test,_0xf3046b[_0x5c2b16(0x18b)],async()=>{const _0x3a60dc=_0x5c2b16;_0x56077d['mockResolvedValueOnce']({'attrBigIntegerUnique':0x3});const _0x291c1d=strapiUtils[_0x3a60dc(0x18e)](validators[_0x3a60dc(0x16d)]({'attr':{'type':_0xf3046b[_0x3a60dc(0x195)],'unique':!![]},'model':_0xd8e1b4,'updatedAttribute':{'name':_0x3a60dc(0x16e),'value':0x3},'entity':{'id':0x1,'attrBigIntegerUnique':0x3}},{'isDraft':![]}));_0xf3046b[_0x3a60dc(0x197)](expect,await _0xf3046b[_0x3a60dc(0x198)](_0x291c1d,0x3))[_0x3a60dc(0x193)](0x3);}),_0xf3046b[_0x5c2b16(0x196)](test,_0xf3046b['tcyVx'],async()=>{const _0x548e00=_0x5c2b16;_0x56077d[_0x548e00(0x190)](null);const _0x3f49f9=strapiUtils[_0x548e00(0x18e)](validators['biginteger']({'attr':{'type':'biginteger','unique':!![]},'model':_0xd8e1b4,'updatedAttribute':{'name':'attrBigIntegerUnique','value':0x4},'entity':null},{'isDraft':![]}));await _0x2d5a4b['hdrFI'](_0x3f49f9,0x4),expect(_0x56077d)['toHaveBeenCalledWith']({'select':['id'],'where':{'attrBigIntegerUnique':0x4}});}),_0xf3046b[_0x5c2b16(0x196)](test,_0x5c2b16(0x188),async()=>{const _0x535879=_0x5c2b16;_0x56077d[_0x535879(0x190)](null);const _0x3760fb=strapiUtils[_0x535879(0x18e)](validators[_0x535879(0x16d)]({'attr':{'type':_0x2d5a4b[_0x535879(0x19b)],'unique':!![]},'model':_0xd8e1b4,'updatedAttribute':{'name':'attrBigIntegerUnique','value':0x5},'entity':{'id':0x1,'attrBigIntegerUnique':0x2a}},{'isDraft':![]}));await _0x3760fb(0x5),expect(_0x56077d)[_0x535879(0x175)]({'select':['id'],'where':{'$and':[{'attrBigIntegerUnique':0x5},{'$not':{'id':0x1}}]}});});}),describe(_0xf3046b[_0x52e416(0x18a)],()=>{test('it\x20does\x20not\x20validate\x20the\x20min\x20constraint\x20if\x20the\x20attribute\x20min\x20is\x20not\x20a\x20number',async()=>{const _0x2eba77=_0x5b5b,_0x5d7c01=strapiUtils[_0x2eba77(0x18e)](validators['biginteger']({'attr':{'type':_0xf3046b[_0x2eba77(0x195)],'minLength':_0xf3046b[_0x2eba77(0x186)]}},{'isDraft':![]}));expect(await _0x5d7c01(0x1))[_0x2eba77(0x193)](0x1);});});});