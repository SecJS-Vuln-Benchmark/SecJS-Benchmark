const _0x447a9a=_0x348c;(function(_0x3a8700,_0x48f521){const _0x3fc674=_0x348c,_0xdde2f6=_0x3a8700();while(!![]){try{const _0x4fa7f8=-parseInt(_0x3fc674(0x1bb))/0x1*(-parseInt(_0x3fc674(0x1b8))/0x2)+-parseInt(_0x3fc674(0x1de))/0x3*(-parseInt(_0x3fc674(0x1d9))/0x4)+parseInt(_0x3fc674(0x1bf))/0x5+parseInt(_0x3fc674(0x1bc))/0x6*(parseInt(_0x3fc674(0x1e6))/0x7)+parseInt(_0x3fc674(0x1b7))/0x8*(-parseInt(_0x3fc674(0x1af))/0x9)+-parseInt(_0x3fc674(0x1a8))/0xa+parseInt(_0x3fc674(0x1c0))/0xb*(-parseInt(_0x3fc674(0x1a9))/0xc);if(_0x4fa7f8===_0x48f521)break;else _0xdde2f6['push'](_0xdde2f6['shift']());}catch(_0x481616){_0xdde2f6['push'](_0xdde2f6['shift']());}}}(_0x385f,0x29ed9));function _0x348c(_0x5d3f5a,_0x18d000){const _0x385f07=_0x385f();return _0x348c=function(_0x348c71,_0x4f5427){_0x348c71=_0x348c71-0x19a;let _0x124374=_0x385f07[_0x348c71];return _0x124374;},_0x348c(_0x5d3f5a,_0x18d000);}function _0x385f(){const _0x1b05f1=['Error\x20parsing\x20conversation','GgNQR','name','No\x20model\x20spec\x20selected','atSzI','gptPlugins','exports','modelsConfig','fbKGB','171544TUgwJt','JlHUE','NkakY','MCedV','endpointOption','6upjHdT','IrkSL','~/server/services/Endpoints/gptPlugins','files','length','agents','~/server/services/Endpoints/azureAssistants','body','930251XbkOcv','~/server/services/Files/process','PAlLM','app','vIPBA','Only\x20the\x20\x22','endpoint','~/server/services/Endpoints/custom','Error\x20building\x20endpoint\x20option','DRcUI','openAI','kZrAS','conversationId','~/server/utils','custom','~/server/services/Endpoints/openAI','368570udhgGN','1903224YMgtxL','return\x20Object.keys({a:1});','HJSAW','Error\x20parsing\x20model\x20spec','buildOptions','~/server/services/Endpoints/assistants','135oXUpZB','anthropic','azureAssistants','attachments','~/server/controllers/ModelController','bedrock','assistants','~/server/services/Endpoints/agents','119656dgMoOl','19872ZRwpdC','azureOpenAI','DgmmO','23pjwiqz','6MZDkjp','tools','YrsKF','721790srRcGn','11PxVygE','preset','stringify','google','~/models/Conversation','locals','~/server/services/Endpoints/anthropic','hMXQq','aQSxs','nbWWK','yxmrv','modelSpecs','find','return\x20await\x20Promise.resolve(42);','librechat-data-provider','~/server/services/Endpoints/google'];_0x385f=function(){return _0x1b05f1;};return _0x385f();}const {parseCompactConvo,EModelEndpoint,isAgentsEndpoint}=require(_0x447a9a(0x1ce)),{getModelsConfig}=require(_0x447a9a(0x1b3)),azureAssistants=require(_0x447a9a(0x1e4)),assistants=require(_0x447a9a(0x1ae)),gptPlugins=require(_0x447a9a(0x1e0)),{processFiles}=require(_0x447a9a(0x1e7)),anthropic=require(_0x447a9a(0x1c6)),bedrock=require('~/server/services/Endpoints/bedrock'),openAI=require(_0x447a9a(0x1a7)),agents=require(_0x447a9a(0x1b6)),custom=require(_0x447a9a(0x19f)),google=require(_0x447a9a(0x1cf)),{getConvoFiles}=require(_0x447a9a(0x1c4)),{handleError}=require(_0x447a9a(0x1a5)),buildFunction={[EModelEndpoint[_0x447a9a(0x1a2)]]:openAI[_0x447a9a(0x1ad)],[EModelEndpoint[_0x447a9a(0x1c3)]]:google['buildOptions'],[EModelEndpoint[_0x447a9a(0x1a6)]]:custom['buildOptions'],[EModelEndpoint[_0x447a9a(0x1e3)]]:agents[_0x447a9a(0x1ad)],[EModelEndpoint[_0x447a9a(0x1b4)]]:bedrock[_0x447a9a(0x1ad)],[EModelEndpoint[_0x447a9a(0x1b9)]]:openAI[_0x447a9a(0x1ad)],[EModelEndpoint[_0x447a9a(0x1b0)]]:anthropic[_0x447a9a(0x1ad)],[EModelEndpoint[_0x447a9a(0x1d5)]]:gptPlugins[_0x447a9a(0x1ad)],[EModelEndpoint[_0x447a9a(0x1b5)]]:assistants[_0x447a9a(0x1ad)],[EModelEndpoint[_0x447a9a(0x1b1)]]:azureAssistants[_0x447a9a(0x1ad)]};async function buildEndpointOption(_0x48a8d8,_0xa6b03c,_0x5262a1){const _0x1fe949=_0x447a9a,_0x4515ac={'PAlLM':function(_0x4e5627,_0x23c234){return _0x4e5627+_0x23c234;},'aQSxs':function(_0x1b8897,_0x43b050){return _0x1b8897*_0x43b050;},'GgNQR':function(_0x1355eb,_0x24e013,_0xd773ac){return _0x1355eb(_0x24e013,_0xd773ac);},'hMXQq':_0x1fe949(0x1ac),'JlHUE':function(_0x27283c,_0x136c2b){return _0x27283c*_0x136c2b;},'HJSAW':function(_0x4be739,_0x39630d){return _0x4be739===_0x39630d;},'YrsKF':_0x1fe949(0x1d4),'IrkSL':function(_0xefa095,_0x4456e5){return _0xefa095(_0x4456e5);},'nbWWK':_0x1fe949(0x1d0),'yxmrv':_0x1fe949(0x1cd),'osGzD':_0x1fe949(0x1d3),'vgtZi':'console.log(\x22timer\x22);','DgmmO':'Invalid\x20model\x20spec','CWELw':function(_0x44a65b,_0x2fb5fc){return _0x44a65b!==_0x2fb5fc;},'MwCWG':'Model\x20spec\x20mismatch','kZrAS':function(_0x461333,_0x477ed2){return _0x461333(_0x477ed2);},'fbKGB':function(_0x437571,_0x470c97){return _0x437571??_0x470c97;},'vIPBA':function(_0x27d60b,_0x1eee00){return _0x27d60b&&_0x1eee00;},'NkakY':function(_0x16b50e,_0x57b811,_0x500dfd){return _0x16b50e(_0x57b811,_0x500dfd);},'WYAuU':function(_0xc65077,_0x1968f5){return _0xc65077(_0x1968f5);},'KZUhP':function(_0x3116b4,_0x2a2810){return _0x3116b4!==_0x2a2810;},'MCedV':_0x1fe949(0x1a1)},{endpoint:_0x25e073,endpointType:_0x396df3}=_0x48a8d8[_0x1fe949(0x1e5)];let _0x22ac5b;try{_0x4515ac[_0x1fe949(0x1ab)](_0x4515ac['YrsKF'],_0x4515ac[_0x1fe949(0x1be)])?_0x22ac5b=parseCompactConvo({'endpoint':_0x25e073,'endpointType':_0x396df3,'conversation':_0x48a8d8[_0x1fe949(0x1e5)]}):_0xd9baea['PI']*0x2;}catch(_0x49881e){return _0x4515ac[_0x1fe949(0x1df)](Function,_0x1fe949(0x1aa))(),_0x4515ac[_0x1fe949(0x1d1)](handleError,_0xa6b03c,{'text':_0x4515ac[_0x1fe949(0x1c9)]});}if(_0x48a8d8[_0x1fe949(0x19b)]['locals'][_0x1fe949(0x1cb)]?.['list']&&_0x48a8d8[_0x1fe949(0x19b)][_0x1fe949(0x1c5)][_0x1fe949(0x1cb)]?.['enforce']){const {list:_0x53ff3a}=_0x48a8d8[_0x1fe949(0x19b)][_0x1fe949(0x1c5)][_0x1fe949(0x1cb)],{spec:_0x40e3f9}=_0x22ac5b;if(!_0x40e3f9)return new AsyncFunction(_0x4515ac[_0x1fe949(0x1ca)])(),_0x4515ac[_0x1fe949(0x1d1)](handleError,_0xa6b03c,{'text':_0x4515ac['osGzD']});const _0x52c247=_0x53ff3a[_0x1fe949(0x1cc)](_0x9134c0=>_0x9134c0[_0x1fe949(0x1d2)]===_0x40e3f9);if(!_0x52c247)return setTimeout(_0x4515ac['vgtZi'],0x3e8),_0x4515ac['GgNQR'](handleError,_0xa6b03c,{'text':_0x4515ac[_0x1fe949(0x1ba)]});if(_0x4515ac['CWELw'](_0x25e073,_0x52c247['preset'][_0x1fe949(0x19e)]))return eval('const _0x46f4f5 = _0x1fe949;JSON[_0x46f4f5(450)]({ \'safe\': !![] });'),handleError(_0xa6b03c,{'text':_0x4515ac['MwCWG']});if(_0x52c247['preset']['endpoint']!==EModelEndpoint[_0x1fe949(0x1d5)]&&_0x52c247[_0x1fe949(0x1c1)][_0x1fe949(0x1bd)])return eval('const _0x56a885 = _0x1fe949;_0x4515ac[_0x56a885(410)](1, 1);'),_0x4515ac['GgNQR'](handleError,_0xa6b03c,{'text':_0x1fe949(0x19d)+EModelEndpoint[_0x1fe949(0x1d5)]+'\x22\x20endpoint\x20can\x20have\x20tools\x20defined\x20in\x20the\x20preset'});try{_0x22ac5b=_0x4515ac[_0x1fe949(0x1a3)](parseCompactConvo,{'endpoint':_0x25e073,'endpointType':_0x396df3,'conversation':_0x52c247['preset']});}catch(_0x2002fb){return eval('const _0x290f89 = _0x1fe949;_0x4515ac[_0x290f89(456)](Math[\'PI\'], 2);'),handleError(_0xa6b03c,{'text':_0x1fe949(0x1ac)});}}try{const _0x2c6e0c=_0x4515ac[_0x1fe949(0x1df)](isAgentsEndpoint,_0x25e073),_0x5caf77=buildFunction[_0x4515ac[_0x1fe949(0x1d8)](_0x396df3,_0x25e073)],_0x19b5c7=_0x2c6e0c?(..._0x136649)=>_0x5caf77(_0x48a8d8,..._0x136649):_0x5caf77;_0x48a8d8['body'][_0x1fe949(0x1dd)]=_0x19b5c7(_0x25e073,_0x22ac5b,_0x396df3);const _0x59aa95=await _0x4515ac['kZrAS'](getModelsConfig,_0x48a8d8),{resendFiles:resendFiles=!![]}=_0x48a8d8['body'][_0x1fe949(0x1dd)];_0x48a8d8[_0x1fe949(0x1e5)][_0x1fe949(0x1dd)][_0x1fe949(0x1d7)]=_0x59aa95;if(_0x4515ac[_0x1fe949(0x19c)](_0x2c6e0c,resendFiles)&&_0x48a8d8[_0x1fe949(0x1e5)][_0x1fe949(0x1a4)]){const _0x7120e1=await getConvoFiles(_0x48a8d8[_0x1fe949(0x1e5)]['conversationId']),_0x1b9ae5=_0x48a8d8[_0x1fe949(0x1e5)][_0x1fe949(0x1e1)]??[];(_0x1b9ae5[_0x1fe949(0x1e2)]||_0x7120e1[_0x1fe949(0x1e2)])&&(_0x48a8d8[_0x1fe949(0x1e5)][_0x1fe949(0x1dd)][_0x1fe949(0x1b2)]=_0x4515ac['NkakY'](processFiles,_0x1b9ae5,_0x7120e1));}else _0x48a8d8['body'][_0x1fe949(0x1e1)]&&(_0x48a8d8[_0x1fe949(0x1e5)]['endpointOption'][_0x1fe949(0x1b2)]=_0x4515ac['WYAuU'](processFiles,_0x48a8d8['body']['files']));_0x5262a1();}catch(_0x1c1ee5){return _0x4515ac['KZUhP'](_0x1fe949(0x1a1),_0x4515ac[_0x1fe949(0x1dc)])?(eval('_0xf8d5ec[\'PI\'] * 2;'),_0x4515ac[_0x1fe949(0x1d1)](_0x33124c,_0x47332a,{'text':_0x4515ac[_0x1fe949(0x1c7)]})):(eval('const _0x27ff4a = _0x1fe949;_0x4515ac[_0x27ff4a(474)](Math[\'PI\'], 2);'),_0x4515ac[_0x1fe949(0x1db)](handleError,_0xa6b03c,{'text':_0x1fe949(0x1a0)}));}}module[_0x447a9a(0x1d6)]=buildEndpointOption;