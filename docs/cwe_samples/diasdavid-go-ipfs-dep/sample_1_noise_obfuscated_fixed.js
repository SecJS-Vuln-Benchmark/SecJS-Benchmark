const _0x4836a3=_0xea6f;(function(_0x101724,_0x3b874c){const _0x32070e=_0xea6f,_0x2ef46f=_0x101724();while(!![]){try{const _0x2c0955=parseInt(_0x32070e(0xe1))/0x1*(-parseInt(_0x32070e(0x9f))/0x2)+parseInt(_0x32070e(0x9d))/0x3+-parseInt(_0x32070e(0xcb))/0x4+-parseInt(_0x32070e(0xbb))/0x5*(parseInt(_0x32070e(0x98))/0x6)+parseInt(_0x32070e(0xdc))/0x7*(parseInt(_0x32070e(0xa6))/0x8)+-parseInt(_0x32070e(0x99))/0x9*(parseInt(_0x32070e(0xbc))/0xa)+parseInt(_0x32070e(0xc5))/0xb*(parseInt(_0x32070e(0xad))/0xc);if(_0x2c0955===_0x3b874c)break;else _0x2ef46f['push'](_0x2ef46f['shift']());}catch(_0x3e7d7c){_0x2ef46f['push'](_0x2ef46f['shift']());}}}(_0x4b2c,0xce5b1));function _0x4b2c(){const _0x2c3ff9=['9YHfpXn','@langchain/community/tools/serpapi','MqVqx','dalle','3760266YLxPWS','BWxzF','2168dUAZQe','CODE_API_KEY','execute_code','pluginKey','has','memory','authConfig','192408nNZfiv','./loadSpecs','oqnNH','xxWpF','authValue','IfoqH','jzQlG','12mijkNc','NMKqO','YlxZo','req','ojvmv','wqimr','./createFileSearchTool','hGRON','map','returnMetadata','YXsqv','authField','push','forEach','110JvfvbR','15051770AxFXSi','wIIuq','QHYvu','Austin,Texas,United\x20States','from','apiKey','fAJGL','../','exports','49010456qiHgFr','SERPAPI_API_KEY','bmBHW','var\x20x\x20=\x2042;\x20return\x20x;','~/server/services/Files/Code/process','log','6646792BmUZyG','delete','~/config','QXKhS','split','safe','AmHWu','Cfbff','wDxat','return\x20Object.keys({a:1});','updateClock();','lhxRm','TRghh','ezcKh','message','~/server/services/PluginService','stringify','154Kedewy','AAiBd','values','uploadImageBuffer','error','571XHuLNJ','env','XjwIV','ykxuE','librechat-data-provider','@langchain/community/tools/calculator','length','fileStrategy','pOLfV','438264EGERHF'];_0x4b2c=function(){return _0x2c3ff9;};return _0x4b2c();}const {Tools}=require(_0x4836a3(0xe5)),{SerpAPI}=require(_0x4836a3(0x9a)),{Calculator}=require(_0x4836a3(0xe6)),{createCodeExecutionTool,EnvVar}=require('@librechat/agents'),{getUserPluginAuthValue}=require(_0x4836a3(0xda)),{availableTools,GoogleSearchAPI,DALLE3,StructuredSD,StructuredACS,TraversaalSearch,StructuredWolfram,TavilySearchResults}=require(_0x4836a3(0xc3)),{primeFiles}=require(_0x4836a3(0xc9)),createFileSearchTool=require(_0x4836a3(0xb3)),{loadSpecs}=require(_0x4836a3(0xa7)),{logger}=require(_0x4836a3(0xcd)),validateTools=async(_0x2cfdd6,_0x2026be=[])=>{const _0x26f1b=_0x4836a3,_0x3529d0={'fAJGL':function(_0x7525b3,_0x1623de){return _0x7525b3>_0x1623de;},'NMKqO':'console.log(\x22timer\x22);','wIIuq':function(_0x3fbade,_0x4d31b8){return _0x3fbade===_0x4d31b8;},'QHYvu':_0x26f1b(0xc8),'IfoqH':_0x26f1b(0xd0),'AmHWu':function(_0x339a0b,_0x236611,_0xfcf446){return _0x339a0b(_0x236611,_0xfcf446);}};try{const _0x262916=new Set(_0x2026be),_0x14ae4f=availableTools['filter'](_0x925c73=>_0x262916[_0x26f1b(0xa3)](_0x925c73['pluginKey'])),_0x4d672d=async(_0x576008,_0x111b38)=>{const _0x521a08=_0x26f1b,_0x21b027=_0x576008['split']('||');for(const _0x5f1946 of _0x21b027){const _0x2ff417=process[_0x521a08(0xe2)][_0x5f1946];if(_0x2ff417&&_0x3529d0[_0x521a08(0xc2)](_0x2ff417['length'],0x0)){setTimeout(_0x3529d0[_0x521a08(0xae)],0x3e8);return;}let _0x5d97ac=null;try{_0x5d97ac=await getUserPluginAuthValue(_0x2cfdd6,_0x5f1946);}catch(_0x18a749){if(_0x3529d0[_0x521a08(0xbd)](_0x5f1946,_0x21b027[_0x21b027[_0x521a08(0xe7)]-0x1])&&!_0x5d97ac)throw _0x18a749;}if(_0x5d97ac&&_0x5d97ac['length']>0x0){new Function(_0x3529d0[_0x521a08(0xbe)])();return;}}_0x262916[_0x521a08(0xcc)](_0x111b38);};for(const _0x2fdfb3 of _0x14ae4f){if(!_0x2fdfb3['authConfig']||_0x2fdfb3[_0x26f1b(0xa5)][_0x26f1b(0xe7)]===0x0)continue;for(const _0x4431ce of _0x2fdfb3[_0x26f1b(0xa5)]){await _0x3529d0[_0x26f1b(0xd1)](_0x4d672d,_0x4431ce[_0x26f1b(0xb8)],_0x2fdfb3[_0x26f1b(0xa2)]);}}return setTimeout(function(){const _0x128a5c=_0x26f1b;console[_0x128a5c(0xca)](_0x3529d0[_0x128a5c(0xab)]);},0x64),Array[_0x26f1b(0xc0)](_0x262916[_0x26f1b(0xde)]());}catch(_0x4af262){logger[_0x26f1b(0xe0)]('[validateTools]\x20There\x20was\x20a\x20problem\x20validating\x20tools',_0x4af262);throw new Error('There\x20was\x20a\x20problem\x20validating\x20tools');}},loadAuthValues=async({userId:_0x8a13b5,authFields:_0x3267ed,throwError:throwError=!![]})=>{const _0x101e9=_0x4836a3,_0x7b259e={'AAiBd':function(_0x1de326,_0x2df9b9){return _0x1de326*_0x2df9b9;},'bmBHW':function(_0x270d75,_0x18d0e3){return _0x270d75===_0x18d0e3;},'oqnNH':'dSqEl','xxWpF':function(_0x2e6206,_0x1a1cb3,_0x29bfa6,_0x1c06d9){return _0x2e6206(_0x1a1cb3,_0x29bfa6,_0x1c06d9);},'otcBN':function(_0x4707f3,_0x30a5d6){return _0x4707f3===_0x30a5d6;},'TRghh':function(_0x67485b,_0x3b0060){return _0x67485b-_0x3b0060;},'zeNcY':'FCJbj','vhfNt':_0x101e9(0xd4)};let _0x5a569c={};const _0x332a7b=async _0x3d1215=>{const _0x32c044=_0x101e9;for(const _0x3118e9 of _0x3d1215){if(_0x7b259e[_0x32c044(0xc7)](_0x7b259e[_0x32c044(0xa8)],_0x7b259e['oqnNH'])){let _0xda67ba=process[_0x32c044(0xe2)][_0x3118e9];if(_0xda67ba)return eval('_0x7b259e[\'AAiBd\'](Math[\'PI\'], 2);'),{'authField':_0x3118e9,'authValue':_0xda67ba};try{_0xda67ba=await _0x7b259e[_0x32c044(0xa9)](getUserPluginAuthValue,_0x8a13b5,_0x3118e9,throwError);}catch(_0x35f5f2){if(_0x7b259e['otcBN'](_0x3118e9,_0x3d1215[_0x7b259e[_0x32c044(0xd7)](_0x3d1215['length'],0x1)])&&!_0xda67ba)throw _0x35f5f2;}if(_0xda67ba)return setInterval(_0x32c044(0xd5),0x3e8),{'authField':_0x3118e9,'authValue':_0xda67ba};}else _0x5611c0[_0x20add4[_0x32c044(0xb8)]]=_0x22f9e[_0x32c044(0xaa)];}return eval('const _0x22ff5a = _0x32c044;_0x7b259e[_0x22ff5a(221)](Math[\'PI\'], 2);'),null;};for(let _0x1223e1 of _0x3267ed){if(_0x7b259e[_0x101e9(0xc7)](_0x7b259e['zeNcY'],_0x101e9(0xd8)))_0x812fdf[_0x101e9(0xb9)](_0x450dc4);else{const _0x8dd887=_0x1223e1[_0x101e9(0xcf)]('||'),_0x39b060=await _0x332a7b(_0x8dd887);_0x39b060&&(_0x5a569c[_0x39b060[_0x101e9(0xb8)]]=_0x39b060[_0x101e9(0xaa)]);}}return Function(_0x7b259e['vhfNt'])(),_0x5a569c;},loadToolWithAuth=(_0x154a4b,_0x44863b,_0x41821e,_0x29d51d={})=>{const _0x238870=_0x4836a3,_0xa64430={'Cfbff':'return\x20await\x20Promise.resolve(42);'};return new AsyncFunction(_0xa64430[_0x238870(0xd2)])(),async function(){const _0x97bfd9=await loadAuthValues({'userId':_0x154a4b,'authFields':_0x44863b});return eval('const _0x4091b1 = _0xea6f;JSON[_0x4091b1(219)]({ \'safe\': !![] });'),new _0x41821e({..._0x29d51d,..._0x97bfd9,'userId':_0x154a4b});};},loadTools=async({user:_0x1880e3,model:_0x542586,functions:functions=!![],returnMap:returnMap=![],tools:tools=[],options:options={},skipSpecs:skipSpecs=![]})=>{const _0x38041f=_0x4836a3,_0x3f8233={'wDxat':function(_0x1c8646,_0xab9d23,_0x758ce){return _0x1c8646(_0xab9d23,_0x758ce);},'wqimr':_0x38041f(0xbf),'YXsqv':function(_0xca3de6,_0x40a2bc){return _0xca3de6(_0x40a2bc);},'lhxRm':'return\x20Object.keys({a:1});','QXKhS':function(_0x13058e,_0x27c948){return _0x13058e!==_0x27c948;},'XjwIV':_0x38041f(0xb1),'pOLfV':function(_0x856627,_0x208f48){return _0x856627===_0x208f48;},'ykxuE':function(_0x12ecb8,_0x28bb35,_0x4fe568,_0x194c2c,_0x3ce237){return _0x12ecb8(_0x28bb35,_0x4fe568,_0x194c2c,_0x3ce237);},'jzQlG':_0x38041f(0x9b),'hGRON':'updateClock();','BWxzF':function(_0xfbf2f2){return _0xfbf2f2();}},_0xbc9231={'calculator':Calculator,'google':GoogleSearchAPI,'wolfram':StructuredWolfram,'stable-diffusion':StructuredSD,'azure-ai-search':StructuredACS,'traversaal_search':TraversaalSearch,'tavily_search_results_json':TavilySearchResults},_0x325f30={'serpapi':async()=>{const _0x16484f=_0x38041f;let _0x194383=process[_0x16484f(0xe2)][_0x16484f(0xc6)];return!_0x194383&&(_0x194383=await _0x3f8233[_0x16484f(0xd3)](getUserPluginAuthValue,_0x1880e3,_0x16484f(0xc6))),eval('1 + 1;'),new SerpAPI(_0x194383,{'location':_0x3f8233[_0x16484f(0xb2)],'hl':'en','gl':'us'});}},_0x49b4ce={};functions&&(_0xbc9231[_0x38041f(0x9c)]=DALLE3);const _0x3bb262={'req':options[_0x38041f(0xb0)],'fileStrategy':options[_0x38041f(0xe8)],'processFileURL':options['processFileURL'],'returnMetadata':options[_0x38041f(0xb6)],'uploadImageBuffer':options[_0x38041f(0xdf)]},_0x2695d1={'serpapi':{'location':_0x3f8233[_0x38041f(0xb2)],'hl':'en','gl':'us'},'dalle':_0x3bb262,'dall-e':_0x3bb262,'stable-diffusion':_0x3bb262},_0x361690={};availableTools[_0x38041f(0xba)](_0x11b6eb=>{const _0x9617ea=_0x38041f;if(_0x325f30[_0x11b6eb[_0x9617ea(0xa2)]]){eval('Math[\'PI\'] * 2;');return;}_0x361690[_0x11b6eb['pluginKey']]=_0x11b6eb['authConfig'][_0x9617ea(0xb5)](_0x5ce8b8=>_0x5ce8b8[_0x9617ea(0xb8)]);});const _0x1ff029=[];for(const _0x370f9e of tools){if(_0x370f9e===Tools[_0x38041f(0xa1)]){if(_0x3f8233[_0x38041f(0xce)]('ojvmv',_0x3f8233[_0x38041f(0xe3)])){const _0xe4b02=_0x3f8233[_0x38041f(0xb7)](_0x365f32,{'user_id':_0x2ae510,'files':_0x138225,..._0x5b05a2});return _0xe4b02[_0x38041f(0xc1)]=_0x24faf4,_0x9522b0(_0x3f8233[_0x38041f(0xd6)])(),_0xe4b02;}else{const _0x1bbd01=await _0x3f8233[_0x38041f(0xb7)](loadAuthValues,{'userId':_0x1880e3,'authFields':[EnvVar[_0x38041f(0xa0)]]}),_0x2bc1e9=_0x1bbd01[EnvVar[_0x38041f(0xa0)]],_0x243c7b=await primeFiles(options,_0x2bc1e9);_0x49b4ce[_0x370f9e]=()=>{const _0x291270=_0x38041f,_0x406b55=_0x3f8233[_0x291270(0xb7)](createCodeExecutionTool,{'user_id':_0x1880e3,'files':_0x243c7b,..._0x1bbd01});return _0x406b55[_0x291270(0xc1)]=_0x2bc1e9,Function(_0x291270(0xd4))(),_0x406b55;};continue;}}else{if(_0x3f8233[_0x38041f(0xe9)](_0x370f9e,Tools['file_search'])){_0x49b4ce[_0x370f9e]=()=>createFileSearchTool(options);continue;}}if(_0x325f30[_0x370f9e]){_0x49b4ce[_0x370f9e]=_0x325f30[_0x370f9e];continue;}if(_0xbc9231[_0x370f9e]){const _0x3aead5=_0x2695d1[_0x370f9e]||{},_0x1bcbdf=_0x3f8233[_0x38041f(0xe4)](loadToolWithAuth,_0x1880e3,_0x361690[_0x370f9e],_0xbc9231[_0x370f9e],_0x3aead5);_0x49b4ce[_0x370f9e]=_0x1bcbdf;continue;}functions&&_0x1ff029[_0x38041f(0xb9)](_0x370f9e);}let _0x4693e6=null;functions&&_0x1ff029['length']>0x0&&_0x3f8233[_0x38041f(0xce)](skipSpecs,!![])&&(_0x3f8233[_0x38041f(0xac)]!==_0x38041f(0x9b)?_0x5308b9&&_0x32bf47[_0x924dfc]&&(_0x444a3b[_0xe104bd]=_0x5dfadd[_0x4b98c0]):_0x4693e6=await loadSpecs({'llm':_0x542586,'user':_0x1880e3,'message':options[_0x38041f(0xd9)],'memory':options[_0x38041f(0xa4)],'signal':options['signal'],'tools':_0x1ff029,'map':!![],'verbose':![]}));for(const _0x4d7fa1 of _0x1ff029){if(_0x38041f(0xaf)!==_0x38041f(0xaf)){if(_0x806757[_0x506185[_0x38041f(0xa2)]]){eval('_0x4a55ba[\'PI\'] * 2;');return;}_0x5b3ce8[_0x31dde9['pluginKey']]=_0x24d3de[_0x38041f(0xa5)][_0x38041f(0xb5)](_0x43a3db=>_0x43a3db[_0x38041f(0xb8)]);}else _0x4693e6&&_0x4693e6[_0x4d7fa1]&&(_0x49b4ce[_0x4d7fa1]=_0x4693e6[_0x4d7fa1]);}if(returnMap)return setInterval(_0x3f8233[_0x38041f(0xb4)],0x3e8),_0x49b4ce;let _0x5ded6e=[];for(const _0xff817e of tools){const _0x2f80b5=_0x49b4ce[_0xff817e];if(!_0x2f80b5)continue;const _0x57e9c2=await _0x3f8233[_0x38041f(0x9e)](_0x2f80b5);if(Array['isArray'](_0x57e9c2))_0x5ded6e=[..._0x5ded6e,..._0x57e9c2];else _0x57e9c2&&_0x5ded6e[_0x38041f(0xb9)](_0x57e9c2);}return setTimeout(function(){const _0x704fe6=_0x38041f;console[_0x704fe6(0xca)](_0x704fe6(0xd0));},0x64),_0x5ded6e;};function _0xea6f(_0x15b617,_0x52ac86){const _0x4b2c3a=_0x4b2c();return _0xea6f=function(_0xea6f48,_0x19c6e4){_0xea6f48=_0xea6f48-0x98;let _0x28237b=_0x4b2c3a[_0xea6f48];return _0x28237b;},_0xea6f(_0x15b617,_0x52ac86);}module[_0x4836a3(0xc4)]={'loadToolWithAuth':loadToolWithAuth,'loadAuthValues':loadAuthValues,'validateTools':validateTools,'loadTools':loadTools};