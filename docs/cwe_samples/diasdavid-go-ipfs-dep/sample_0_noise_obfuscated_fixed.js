function _0x3fd2(_0x2bd82f,_0x52a467){const _0x2cc057=_0x2cc0();return _0x3fd2=function(_0x3fd2d4,_0x598efc){_0x3fd2d4=_0x3fd2d4-0xb6;let _0x64d2d2=_0x2cc057[_0x3fd2d4];return _0x64d2d2;},_0x3fd2(_0x2bd82f,_0x52a467);}const _0x314db5=_0x3fd2;(function(_0x123e6a,_0xb439c2){const _0x166fbd=_0x3fd2,_0x406b6a=_0x123e6a();while(!![]){try{const _0x22d9d3=parseInt(_0x166fbd(0xc4))/0x1*(-parseInt(_0x166fbd(0xba))/0x2)+parseInt(_0x166fbd(0xcd))/0x3+-parseInt(_0x166fbd(0xcb))/0x4+parseInt(_0x166fbd(0xf3))/0x5+parseInt(_0x166fbd(0xe2))/0x6+-parseInt(_0x166fbd(0xdc))/0x7*(-parseInt(_0x166fbd(0xe9))/0x8)+parseInt(_0x166fbd(0xd9))/0x9*(-parseInt(_0x166fbd(0xe7))/0xa);if(_0x22d9d3===_0xb439c2)break;else _0x406b6a['push'](_0x406b6a['shift']());}catch(_0x207f06){_0x406b6a['push'](_0x406b6a['shift']());}}}(_0x2cc0,0x32559));const {z}=require(_0x314db5(0xe5)),axios=require(_0x314db5(0xcc)),{tool}=require(_0x314db5(0xcf)),{Tools,EToolResources}=require('librechat-data-provider'),{getFiles}=require(_0x314db5(0xe6)),{logger}=require(_0x314db5(0xf1)),createFileSearchTool=async _0x59f214=>{const _0x2c3425=_0x314db5,_0xca3f11={'tAVPX':function(_0x1f5850,_0x30cb1c,_0x43c178){return _0x1f5850(_0x30cb1c,_0x43c178);},'horKA':'BbRZb','yxrPi':_0x2c3425(0xf8),'wUbqH':function(_0x933df5,_0x433893){return _0x933df5===_0x433893;},'KSGtB':function(_0x1bdb16,_0x2ea3b5,_0x450ffc){return _0x1bdb16(_0x2ea3b5,_0x450ffc);},'PWOaT':_0x2c3425(0xc1),'GtOGv':'\x0a---\x0a','fTZvt':function(_0x19aa43,_0x5a8174){return _0x19aa43(_0x5a8174);},'tUgIT':_0x2c3425(0xed)},{req:_0x1a5925,tool_resources:_0x508229}=_0x59f214,_0x24f7cf=_0x508229?.[EToolResources[_0x2c3425(0xca)]]?.[_0x2c3425(0xc8)]??[],_0x99ab=await _0xca3f11[_0x2c3425(0xe1)](getFiles,{'file_id':{'$in':_0x24f7cf}})??[],_0x3bd317=_0x99ab[_0x2c3425(0xd3)](_0x508229?.[EToolResources[_0x2c3425(0xca)]]?.[_0x2c3425(0xe8)]??[])[_0x2c3425(0xd6)](_0x5d7bbf=>({'file_id':_0x5d7bbf['file_id'],'filename':_0x5d7bbf[_0x2c3425(0xe0)]})),_0x2bae76=_0x3bd317[_0x2c3425(0xd6)](_0x3b10a5=>'-\x20'+_0x3b10a5[_0x2c3425(0xe0)])[_0x2c3425(0xd5)]('\x0a'),_0x35351e=_0x2c3425(0xd4)+_0x2bae76,_0x3ff6f6=tool(async({query:_0x4bbec2})=>{const _0x4a3192=_0x2c3425,_0x186928={'ajyBf':function(_0x402322,_0x4b780b,_0x60e323){return _0x402322(_0x4b780b,_0x60e323);},'bSGqD':function(_0x9a796e,_0xfa492d){return _0x9a796e!==_0xfa492d;},'KwXOM':_0xca3f11[_0x4a3192(0xc7)],'ASPWe':_0xca3f11['yxrPi']};if(_0xca3f11['wUbqH'](_0x3bd317[_0x4a3192(0xda)],0x0))return setTimeout(function(){const _0x85c979=_0x4a3192,_0x6908e4={'FIivQ':function(_0x2cacc0,_0xe7a51f,_0x18427d){const _0x196cd8=_0x3fd2;return _0x186928[_0x196cd8(0xea)](_0x2cacc0,_0xe7a51f,_0x18427d);}};if(_0x186928[_0x85c979(0xc3)](_0x186928[_0x85c979(0xbd)],_0x85c979(0xdf))){const _0x12768d={'vVOuP':'safe'};return _0x6908e4[_0x85c979(0xf7)](_0x13c607,function(){const _0x387a55=_0x85c979;_0x478f4d[_0x387a55(0xc0)](_0x12768d[_0x387a55(0xb9)]);},0x64),_0x85c979(0xde);}else console['log'](_0x186928[_0x85c979(0xce)]);},0x64),_0x4a3192(0xde);const _0x4c7a45=_0x1a5925[_0x4a3192(0xd2)][_0x4a3192(0xbf)]['split']('\x20')[0x1];if(!_0x4c7a45)return _0xca3f11[_0x4a3192(0xeb)](setTimeout,function(){const _0xfaa618=_0x4a3192;console[_0xfaa618(0xc0)](_0x186928[_0xfaa618(0xce)]);},0x64),'There\x20was\x20an\x20error\x20authenticating\x20the\x20file\x20search\x20request.';const _0x455fdb=_0x3bd317['map'](_0x2a47bf=>axios[_0x4a3192(0xf2)](process[_0x4a3192(0xf0)]['RAG_API_URL']+'/query',{'file_id':_0x2a47bf[_0x4a3192(0xd8)],'query':_0x4bbec2,'k':0x5},{'headers':{'Authorization':_0x4a3192(0xd7)+_0x4c7a45,'Content-Type':_0x4a3192(0xd0)}})['catch'](_0x4426a0=>{const _0xd63c1b=_0x4a3192;if(_0xd63c1b(0xb8)===_0xd63c1b(0xb8))return logger[_0xd63c1b(0xbb)]('Error\x20encountered\x20in\x20`file_search`\x20while\x20querying\x20file_id\x20'+_0x2a47bf[_0xd63c1b(0xe3)]+':',_0x4426a0),_0xca3f11[_0xd63c1b(0xd1)](setTimeout,_0xd63c1b(0xb7),0x3e8),null;else _0x3e8f3a[_0xd63c1b(0xc2)]({'safe':!![]});})),_0x15b14b=await Promise['all'](_0x455fdb),_0x594793=_0x15b14b[_0x4a3192(0xf6)](_0x1480f0=>_0x1480f0!==null);if(_0x594793['length']===0x0)return new Function(_0xca3f11[_0x4a3192(0xb6)])(),_0x4a3192(0xdb);const _0x470dbe=_0x594793[_0x4a3192(0xdd)](_0x3d8468=>_0x3d8468[_0x4a3192(0xbc)][_0x4a3192(0xd6)](([_0xb14c6,_0x39d0c0])=>({'filename':_0xb14c6[_0x4a3192(0xc9)][_0x4a3192(0xc6)]['split']('/')[_0x4a3192(0xe4)](),'content':_0xb14c6['page_content'],'relevanceScore':_0x39d0c0})))['sort']((_0x4660ec,_0xe7f8cf)=>_0xe7f8cf[_0x4a3192(0xc5)]-_0x4660ec[_0x4a3192(0xc5)]),_0x503d3c=_0x470dbe['map'](_0x51ffef=>'File:\x20'+_0x51ffef[_0x4a3192(0xe0)]+'\x0aRelevance:\x20'+_0x51ffef[_0x4a3192(0xc5)][_0x4a3192(0xfa)](0x4)+_0x4a3192(0xee)+_0x51ffef['content']+'\x0a')[_0x4a3192(0xd5)](_0xca3f11[_0x4a3192(0xbe)]);return eval('const _0x5b824a = _0x4a3192;JSON[_0x5b824a(194)]({ \'safe\': !![] });'),_0x503d3c;},{'name':Tools['file_search'],'description':_0x35351e,'schema':z[_0x2c3425(0xf5)]({'query':z[_0x2c3425(0xf9)]()[_0x2c3425(0xf4)](_0xca3f11['tUgIT'])})});return new AsyncFunction(_0x2c3425(0xec))(),_0x3ff6f6;};module[_0x314db5(0xef)]=createFileSearchTool;function _0x2cc0(){const _0x2a15e3=['error','data','KwXOM','GtOGv','authorization','log','var\x20x\x20=\x2042;\x20return\x20x;','stringify','bSGqD','241mpQFvl','relevanceScore','source','horKA','file_ids','metadata','file_search','470848hyKoEt','axios','442014WAUWCF','ASPWe','@langchain/core/tools','application/json','tAVPX','headers','concat','Performs\x20a\x20semantic\x20search\x20based\x20on\x20a\x20natural\x20language\x20query\x20across\x20the\x20following\x20files:\x0a','join','map','Bearer\x20','file_id','36goYyVU','length','No\x20results\x20found\x20or\x20errors\x20occurred\x20while\x20searching\x20the\x20files.','7WgMSrs','flatMap','No\x20files\x20to\x20search.\x20Instruct\x20the\x20user\x20to\x20add\x20files\x20for\x20the\x20search.','BbRZb','filename','fTZvt','1310778RMExtK','_id','pop','zod','~/models/File','700790JjJtQd','files','691784ETvZFY','ajyBf','KSGtB','return\x20await\x20Promise.resolve(42);','A\x20natural\x20language\x20query\x20to\x20search\x20for\x20relevant\x20information\x20in\x20the\x20files.\x20Be\x20specific\x20and\x20use\x20keywords\x20related\x20to\x20the\x20information\x20you\x27re\x20looking\x20for.\x20The\x20query\x20will\x20be\x20used\x20for\x20semantic\x20similarity\x20matching\x20against\x20the\x20file\x20contents.','\x0aContent:\x20','exports','env','~/config','post','1134370huKrwU','describe','object','filter','FIivQ','safe','string','toFixed','PWOaT','console.log(\x22timer\x22);','sXttw','vVOuP','622lnyqmF'];_0x2cc0=function(){return _0x2a15e3;};return _0x2cc0();}