'use strict';var _0x399027=_0x2e33;(function(_0x4b5043,_0x23d262){var _0xce9bc=_0x2e33,_0x350c20=_0x4b5043();while(!![]){try{var _0x183e3f=parseInt(_0xce9bc(0x140))/0x1*(-parseInt(_0xce9bc(0x127))/0x2)+-parseInt(_0xce9bc(0x148))/0x3*(-parseInt(_0xce9bc(0x136))/0x4)+parseInt(_0xce9bc(0x164))/0x5+parseInt(_0xce9bc(0x123))/0x6*(parseInt(_0xce9bc(0x13a))/0x7)+-parseInt(_0xce9bc(0x14f))/0x8+parseInt(_0xce9bc(0x174))/0x9+-parseInt(_0xce9bc(0x15a))/0xa*(parseInt(_0xce9bc(0x11b))/0xb);if(_0x183e3f===_0x23d262)break;else _0x350c20['push'](_0x350c20['shift']());}catch(_0x3e7e67){_0x350c20['push'](_0x350c20['shift']());}}}(_0x37b4,0xce2db));var join=require(_0x399027(0x122))[_0x399027(0x134)],EventEmitter=require(_0x399027(0x13d)),pull=require('pull-stream'),ref=require('ssb-ref'),ssbKeys=require(_0x399027(0x170)),createDB=require(_0x399027(0x115)),extras=require('./extras'),u=require(_0x399027(0x141));function _0x2e33(_0x20d395,_0x116c3b){var _0x37b45b=_0x37b4();return _0x2e33=function(_0x2e3395,_0x4afc50){_0x2e3395=_0x2e3395-0x112;var _0x42a127=_0x37b45b[_0x2e3395];return _0x42a127;},_0x2e33(_0x20d395,_0x116c3b);}function isString(_0x53d72f){var _0x64abc4=_0x399027,_0x589c25={'ghAxz':'string'};return typeof _0x53d72f===_0x589c25[_0x64abc4(0x13f)];}function _0x37b4(){var _0x37dcec=['queue','cjkVk','fRxLS','generate','isInteger','80FNulTL','bChZE','replace','object','DIbdu','lfcqx','key','XwJnZ','GydIO','seq\x20is\x20null!','1760270USgXjJ','timestamp','DYzAh','ZSTyM','clock','del','xhzyr','drain','invalid','PvZZM','OtuXA','collect','ssb-keys','asyncMap','tkznb','PcgLW','8415216HxMugZ','AItja','Xzyry','_unbox','value','UjYhv','parseLink','./db','GLVvH','dwwrG','FWtuU','private','mKNwl','4406644vymbNK','opts','flush','fRAvv','CfKWF','kShuv','KOIeU','path','9423114wQRhXd','ZTMTd','VgoED','createFeed','846QVSaeD','get','unbox','amBUX','last','ZZYAY','query','deletion\x20target\x20must\x20be\x20a\x20message\x20or\x20feed','UTxTx','isMsgLink','fdgWi','path\x20must\x20be\x20provided','stream','join','isFeed','1811036dDOUDY','append','jBRVw','getVectorClock','7cCHCYL','getAtSequence','wlvRi','events','sequence','ghAxz','206IRbVbD','./util','EEwPL','Agppx','flume','nrWCY','createRawLogStream','__proto__','9LZbHMY','IhyFR','ngcYb','createWriteStream','WiSre','LbGKZ','createUserStream','635176BKMDFu','Pyyde','isMsg','keys','meta','ssb-db.get:\x20key\x20*must*\x20be\x20a\x20ssb\x20message\x20id\x20or\x20a\x20flume\x20offset'];_0x37b4=function(){return _0x37dcec;};return _0x37b4();}function errorCB(_0x88d96e){if(_0x88d96e)throw _0x88d96e;}module['exports']=function create(_0x3a7cbb,_0x3f29d5,_0x396027){var _0x2bbe3c=_0x399027,_0x335a99={'fRAvv':function(_0x2d09c7,_0x3bc2de,_0x36865b){return _0x2d09c7(_0x3bc2de,_0x36865b);},'ZZYAY':function(_0x28803c,_0x1d2616){return _0x28803c(_0x1d2616);},'xhzyr':function(_0xea715a,_0x2aa099){return _0xea715a==_0x2aa099;},'mKNwl':'Agppx','FtLAE':function(_0x27e2bb,_0x1d03ed){return _0x27e2bb===_0x1d03ed;},'kShuv':function(_0x3767bf,_0x547a6e){return _0x3767bf!==_0x547a6e;},'PvZZM':'sCACj','FWtuU':function(_0x44bdbb,_0xa350e3,_0x3ed5c4){return _0x44bdbb(_0xa350e3,_0x3ed5c4);},'UjYhv':function(_0xad9169,_0x2de72a,_0x3be822){return _0xad9169(_0x2de72a,_0x3be822);},'fRxLS':_0x2bbe3c(0x149),'DYzAh':function(_0x56ae3e,_0x5013a5,_0x316cc3){return _0x56ae3e(_0x5013a5,_0x316cc3);},'OtuXA':function(_0x48c418,_0x5807f6,_0x2aeec2){return _0x48c418(_0x5807f6,_0x2aeec2);},'GydIO':_0x2bbe3c(0x15d),'ngcYb':_0x2bbe3c(0x154),'jBRVw':_0x2bbe3c(0x167),'XwJnZ':function(_0xec05e6,_0x48fbb1){return _0xec05e6||_0x48fbb1;},'TdAAP':function(_0x1da2b0,_0x273102,_0x334917,_0x395364){return _0x1da2b0(_0x273102,_0x334917,_0x395364);},'KOIeU':_0x2bbe3c(0x144)};if(!_0x3a7cbb)throw new Error(_0x2bbe3c(0x132));_0x396027=_0x396027||ssbKeys['generate']();var _0x177110=_0x335a99['TdAAP'](createDB,join(_0x3f29d5['path']||_0x3a7cbb,_0x335a99[_0x2bbe3c(0x121)]),_0x396027,_0x3f29d5);_0x177110[_0x2bbe3c(0x147)]=new EventEmitter(),_0x177110[_0x2bbe3c(0x11c)]=_0x3f29d5;var _0x468dd1=_0x177110[_0x2bbe3c(0x128)],_0x1de9bf=_0x177110['del'];const _0xa07e2b=(_0xa8028b,_0x37c5e8)=>{var _0x4db229=_0x2bbe3c,_0x1a519b={'PcgLW':function(_0xd5e8af,_0x3ec8a5,_0x2aad27){var _0x4194ca=_0x2e33;return _0x335a99[_0x4194ca(0x11e)](_0xd5e8af,_0x3ec8a5,_0x2aad27);},'GLVvH':function(_0xc66afe,_0x11743f){var _0x415706=_0x2e33;return _0x335a99[_0x415706(0x12c)](_0xc66afe,_0x11743f);},'Xzyry':function(_0x57f12e,_0x3279a1){var _0x1e06b6=_0x2e33;return _0x335a99[_0x1e06b6(0x16a)](_0x57f12e,_0x3279a1);},'tkznb':_0x335a99[_0x4db229(0x11a)],'ZTMTd':function(_0x57453c,_0x5c9b1a,_0x59d81e){return _0x57453c(_0x5c9b1a,_0x59d81e);},'nMlnG':'ssb-db.get:\x20key\x20*must*\x20be\x20a\x20ssb\x20message\x20id\x20or\x20a\x20flume\x20offset'};if(_0x335a99['FtLAE'](_0x4db229(0x145),_0x4db229(0x12f))){var _0x3e2542={'eHxSb':function(_0x77b27f,_0x4519b5,_0x4768bf){var _0x2a8898=_0x4db229;return _0x1a519b[_0x2a8898(0x173)](_0x77b27f,_0x4519b5,_0x4768bf);}};if(!_0x20b8bf)_0x14faf5=_0x28fe94;_0x457fdb[_0x4db229(0x12b)][_0x4db229(0x128)](function(_0xef72eb,_0x1554ab){var _0x455448=_0x4db229;if(_0xef72eb)return _0x579a76(_0xef72eb);var _0x1d9efe={};for(var _0xcaeffb in _0x1554ab){_0x1d9efe[_0xcaeffb]=_0x1554ab[_0xcaeffb][_0x455448(0x13e)];}_0x3e2542['eHxSb'](_0x541c0c,null,_0x1d9efe);});}else pull(_0x177110[_0x4db229(0x14e)]({'id':_0xa8028b}),pull[_0x4db229(0x171)]((_0x3bb9e5,_0x4ea88f)=>{var _0x567ece=_0x4db229;if(_0x567ece(0x150)!==_0x567ece(0x142)){const _0x4e4697=_0x3bb9e5[_0x567ece(0x160)];_0x284964(_0x4e4697,_0x7407da=>{var _0x13f461=_0x567ece,_0x3a435a={'VgoED':function(_0xfcc0cd,_0x7bb93){var _0x37a982=_0x2e33;return _0x1a519b[_0x37a982(0x116)](_0xfcc0cd,_0x7bb93);},'aqQpF':function(_0x5e23d4,_0x1966c7){var _0x4d2b64=_0x2e33;return _0x1a519b[_0x4d2b64(0x176)](_0x5e23d4,_0x1966c7);},'fdgWi':function(_0x4fcbcd,_0x25500f){return _0x4fcbcd(_0x25500f);},'cjkVk':_0x13f461(0x163)};if(_0x13f461(0x143)!==_0x1a519b[_0x13f461(0x172)]){if(_0x15e124)return _0x3a435a[_0x13f461(0x125)](_0x278ea1,_0x151e82);if(_0x3a435a['aqQpF'](_0x8632dc,null))return _0x3a435a[_0x13f461(0x131)](_0x35fab2,new _0x3dbed5(_0x3a435a[_0x13f461(0x156)]));_0x484476(_0x38162e,_0x39eddf);}else _0x1a519b[_0x13f461(0x124)](_0x4ea88f,_0x7407da,_0x4e4697);});}else throw new _0x205750(_0x1a519b['nMlnG']);}),pull[_0x4db229(0x16f)](_0x37c5e8));},_0x284964=(_0x597518,_0x205f4b)=>{var _0x863707=_0x2bbe3c,_0x24ef92={'RhxGS':function(_0x553dfe,_0x17121c){var _0x4f19e7=_0x2e33;return _0x335a99[_0x4f19e7(0x120)](_0x553dfe,_0x17121c);},'bOpZK':_0x335a99[_0x863707(0x16d)]};_0x177110[_0x863707(0x152)]['get'](_0x597518,(_0x174068,_0x105629,_0x1a6280)=>{var _0x521288=_0x863707;if(_0x24ef92['RhxGS'](_0x521288(0x14d),_0x24ef92['bOpZK'])){if(_0x174068)return _0x205f4b(_0x174068);if(_0x1a6280==null)return _0x205f4b(new Error('seq\x20is\x20null!'));_0x1de9bf(_0x1a6280,_0x205f4b);}else _0x19185d(_0x2eaf79,_0x7df5cb);});};return _0x177110[_0x2bbe3c(0x169)]=(_0x1f3f80,_0x3103d4)=>{var _0x45ad38=_0x2bbe3c;if(_0x335a99['kShuv'](_0x335a99[_0x45ad38(0x157)],_0x45ad38(0x149))){if(_0x5606e5)return _0x335a99['ZZYAY'](_0x17a718,_0x443e5d);if(!_0x2ad403){if(_0x241354)_0x335a99[_0x45ad38(0x118)](_0x21dc51,null,{'key':_0x17005c,'value':_0x55f790['value'],'timestamp':_0x40100d[_0x45ad38(0x165)]});else _0x2ef7fa(null,_0x192e8b['value']);}else{const _0x1ac1a2=_0x3f48e2[_0x45ad38(0x177)](_0x422fac,_0xeac5ab);if(_0x559c51)_0x2acd9f(null,{'key':_0xcf585c,'value':_0x1ac1a2[_0x45ad38(0x112)],'timestamp':_0x1ac1a2[_0x45ad38(0x165)]});else _0x335a99[_0x45ad38(0x113)](_0x401afd,null,_0x1ac1a2['value']);}}else{if(ref[_0x45ad38(0x151)](_0x1f3f80))_0x284964(_0x1f3f80,_0x3103d4);else ref[_0x45ad38(0x135)](_0x1f3f80)?_0x335a99[_0x45ad38(0x166)](_0xa07e2b,_0x1f3f80,_0x3103d4):_0x3103d4(new Error(_0x45ad38(0x12e)));}},_0x177110[_0x2bbe3c(0x128)]=function(_0x1afbcb,_0x4f890a){var _0x40ca20=_0x2bbe3c,_0x326b89={'AItja':function(_0x262578,_0x2390bd,_0x230c67){var _0x229a8d=_0x2e33;return _0x335a99[_0x229a8d(0x16e)](_0x262578,_0x2390bd,_0x230c67);}};let _0x446a12=![],_0x18cc05,_0xdfda2d=![];typeof _0x1afbcb===_0x335a99[_0x40ca20(0x162)]&&(_0x446a12=_0x1afbcb[_0x40ca20(0x119)]===!![],_0x18cc05=_0x1afbcb[_0x40ca20(0x129)],_0xdfda2d=_0x1afbcb[_0x40ca20(0x153)],_0x1afbcb=_0x1afbcb['id']);if(ref[_0x40ca20(0x151)](_0x1afbcb))return _0x177110[_0x40ca20(0x152)][_0x40ca20(0x128)](_0x1afbcb,function(_0x46b951,_0x575e94){var _0x25e2c0=_0x40ca20;if(_0x46b951)return _0x4f890a(_0x46b951);if(!_0x446a12){if(_0xdfda2d)_0x326b89[_0x25e2c0(0x175)](_0x4f890a,null,{'key':_0x1afbcb,'value':_0x575e94['value'],'timestamp':_0x575e94[_0x25e2c0(0x165)]});else _0x326b89['AItja'](_0x4f890a,null,_0x575e94['value']);}else{const _0x513798=_0x177110['_unbox'](_0x575e94,_0x18cc05);if(_0xdfda2d)_0x326b89['AItja'](_0x4f890a,null,{'key':_0x1afbcb,'value':_0x513798[_0x25e2c0(0x112)],'timestamp':_0x513798[_0x25e2c0(0x165)]});else _0x326b89[_0x25e2c0(0x175)](_0x4f890a,null,_0x513798[_0x25e2c0(0x112)]);}});else{if(ref[_0x40ca20(0x130)](_0x1afbcb)){var _0xc8d5e5=ref[_0x40ca20(0x114)](_0x1afbcb);return _0x177110[_0x40ca20(0x128)]({'id':_0xc8d5e5['link'],'private':!![],'unbox':_0xc8d5e5[_0x40ca20(0x12d)]['unbox'][_0x40ca20(0x15c)](/\s/g,'+'),'meta':_0xc8d5e5['query'][_0x40ca20(0x153)]},_0x4f890a);}else{if(Number[_0x40ca20(0x159)](_0x1afbcb))_0x335a99[_0x40ca20(0x166)](_0x468dd1,_0x1afbcb,_0x4f890a);else throw new Error(_0x335a99[_0x40ca20(0x14a)]);}}},_0x177110['add']=function(_0x35f6a3,_0xffe922){var _0x327a1c=_0x2bbe3c;_0x177110[_0x327a1c(0x155)](_0x35f6a3,function(_0x14daf3,_0x2bf244){var _0x48cb4c=_0x327a1c,_0x435dfb={'DIbdu':function(_0x375c9f,_0x485a6e,_0x1fd96b){return _0x335a99['FWtuU'](_0x375c9f,_0x485a6e,_0x1fd96b);}};if(_0x14daf3)_0x335a99[_0x48cb4c(0x12c)](_0xffe922,_0x14daf3);else _0x177110['flush'](function(){var _0x272ae1=_0x48cb4c;_0x435dfb[_0x272ae1(0x15e)](_0xffe922,null,_0x2bf244);});});},_0x177110[_0x2bbe3c(0x126)]=function(_0x33d83c){var _0x1ee32e=_0x2bbe3c,_0x1bc064={'amBUX':function(_0x108484,_0x4c55c6,_0x576165){return _0x108484(_0x4c55c6,_0x576165);}};if(!_0x33d83c)_0x33d83c=ssbKeys[_0x1ee32e(0x158)]();function _0x297898(_0x2de807,_0x4880a5){var _0x4ecd9c=_0x1ee32e,_0xc1cb79={'lfcqx':function(_0x134e14,_0x171b1e){return _0x134e14===_0x171b1e;}};if(_0x335a99[_0x4ecd9c(0x138)]==='nlgXc')_0x26e4ce=_0xc1cb79[_0x4ecd9c(0x15f)](_0x3320b4[_0x4ecd9c(0x119)],!![]),_0x23bc31=_0x31541b['unbox'],_0x287308=_0x218e6a[_0x4ecd9c(0x153)],_0x2c61fc=_0x535070['id'];else{if(!_0x4880a5)return function(_0x44c976){var _0x2c5261=_0x4ecd9c;_0x1bc064[_0x2c5261(0x12a)](_0x297898,_0x2de807,_0x44c976);};_0x177110[_0x4ecd9c(0x137)]({'content':_0x2de807,'keys':_0x33d83c},_0x4880a5);}}return{'add':_0x297898,'publish':_0x297898,'id':_0x33d83c['id'],'keys':_0x33d83c};},_0x177110[_0x2bbe3c(0x146)]=function(_0x5aa3ce){var _0x4fe33d=_0x2bbe3c;return _0x177110[_0x4fe33d(0x133)](_0x5aa3ce);},extras(_0x177110,_0x3f29d5,_0x396027),_0x177110[_0x2bbe3c(0x14b)]=function(_0x5aeee0){var _0x449527=_0x2bbe3c,_0x215c3d={'dwwrG':_0x449527(0x16c)};return _0x5aeee0=_0x335a99[_0x449527(0x161)](_0x5aeee0,errorCB),pull(pull[_0x449527(0x171)](function(_0x17d1e1,_0x534c6d){_0x177110['queue'](_0x17d1e1,function(_0x1aa9c0,_0x38c860){var _0x1b1260=_0x2e33;_0x1aa9c0&&_0x177110['emit'](_0x215c3d[_0x1b1260(0x117)],_0x1aa9c0,_0x38c860),setImmediate(_0x534c6d);});}),pull[_0x449527(0x16b)](null,function(_0x116ea5){var _0x5acd52=_0x449527;if(_0x116ea5)return _0x335a99[_0x5acd52(0x12c)](_0x5aeee0,_0x116ea5);_0x177110[_0x5acd52(0x11d)](_0x5aeee0);}));},_0x177110['createHistoryStream']=_0x177110[_0x2bbe3c(0x168)]['createHistoryStream'],_0x177110[_0x2bbe3c(0x13b)]=function(_0x9393f4,_0x4732bf){var _0x409520=_0x2bbe3c,_0x560faa={'CfKWF':function(_0x23ebe5,_0x5b9b6b,_0xcd9aba){return _0x23ebe5(_0x5b9b6b,_0xcd9aba);}};_0x177110[_0x409520(0x168)][_0x409520(0x128)](isString(_0x9393f4)?_0x9393f4['split'](':'):_0x9393f4,function(_0x587e01,_0x45ceb6){var _0x491a67=_0x409520;if(_0x587e01)_0x4732bf(_0x587e01);else _0x560faa[_0x491a67(0x11f)](_0x4732bf,null,u['originalData'](_0x45ceb6));});},_0x177110[_0x2bbe3c(0x139)]=function(_0x3c05c0,_0xa86be3){var _0x42c795=_0x2bbe3c,_0x423a6f={'wlvRi':function(_0x2f06b2,_0x4ea652){return _0x2f06b2(_0x4ea652);}};if('WiSre'!==_0x42c795(0x14c)){const _0x35f404=_0x303484[_0x42c795(0x160)];_0x3cb3d1(_0x35f404,_0x2009cf=>{_0x5edc13(_0x2009cf,_0x35f404);});}else{if(!_0xa86be3)_0xa86be3=_0x3c05c0;_0x177110[_0x42c795(0x12b)][_0x42c795(0x128)](function(_0x5221a6,_0x3a47cf){var _0x3fce11=_0x42c795;if(_0x5221a6)return _0x423a6f[_0x3fce11(0x13c)](_0xa86be3,_0x5221a6);var _0x5d90cf={};for(var _0x115583 in _0x3a47cf){'BTfuY'!==_0x3fce11(0x15b)?_0x5d90cf[_0x115583]=_0x3a47cf[_0x115583][_0x3fce11(0x13e)]:_0x2a4d0e[_0x3fce11(0x155)](_0x59ac9b,function(_0x1e5c6b,_0x1383f1){var _0x357df6=_0x3fce11;if(_0x1e5c6b)_0x36bf01(_0x1e5c6b);else _0x2e7fd2[_0x357df6(0x11d)](function(){_0x49d636(null,_0x1383f1);});});}_0xa86be3(null,_0x5d90cf);});}},_0x177110;};