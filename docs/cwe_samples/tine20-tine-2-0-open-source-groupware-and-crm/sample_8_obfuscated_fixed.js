'use strict';var _0x4b7b05=_0x108f;(function(_0x5122db,_0x9c3f00){var _0x2e86fb=_0x108f,_0x1f4441=_0x5122db();while(!![]){try{var _0x414a2c=parseInt(_0x2e86fb(0xc6))/0x1+-parseInt(_0x2e86fb(0xd6))/0x2*(parseInt(_0x2e86fb(0xf7))/0x3)+-parseInt(_0x2e86fb(0xe5))/0x4*(-parseInt(_0x2e86fb(0xc8))/0x5)+parseInt(_0x2e86fb(0xc0))/0x6*(parseInt(_0x2e86fb(0x101))/0x7)+parseInt(_0x2e86fb(0xff))/0x8+parseInt(_0x2e86fb(0xdd))/0x9+-parseInt(_0x2e86fb(0xfa))/0xa*(parseInt(_0x2e86fb(0xea))/0xb);if(_0x414a2c===_0x9c3f00)break;else _0x1f4441['push'](_0x1f4441['shift']());}catch(_0x483ddf){_0x1f4441['push'](_0x1f4441['shift']());}}}(_0x3358,0x6d3ba));function _0x108f(_0x51da41,_0x1e480b){var _0x335814=_0x3358();return _0x108f=function(_0x108fe7,_0x2dedc7){_0x108fe7=_0x108fe7-0xbc;var _0x1efebd=_0x335814[_0x108fe7];return _0x1efebd;},_0x108f(_0x51da41,_0x1e480b);}var join=require(_0x4b7b05(0xf5))['join'],EventEmitter=require(_0x4b7b05(0xc4)),pull=require(_0x4b7b05(0xd8)),ref=require('ssb-ref'),ssbKeys=require(_0x4b7b05(0xe3)),createDB=require(_0x4b7b05(0xc1)),extras=require(_0x4b7b05(0xfd)),u=require(_0x4b7b05(0xcc));function isString(_0x27d233){var _0x54b27a=_0x4b7b05;return typeof _0x27d233===_0x54b27a(0x103);}function errorCB(_0x111ea9){if(_0x111ea9)throw _0x111ea9;}function _0x3358(){var _0x2ac72c=['clock','sfsGa','sBABp','link','CqZPw','createHistoryStream','originalData','meta','opts','path\x20must\x20be\x20provided','HUKzm','createRawLogStream','sequence','del','12juYjmn','./db','timestamp','bschV','events','createFeed','807671KNqXSO','BTknW','71105Ouzbjg','value','jIqDS','originalValue','./util','map','asyncMap','mZxQg','seq\x20is\x20null!','hsvrz','flush','ssb-db.get:\x20key\x20*must*\x20be\x20a\x20ssb\x20message\x20id\x20or\x20a\x20flume\x20offset','Focrn','PPJfr','54286moaZJk','invalid','pull-stream','isMsg','collect','OmFAf','Vojpc','6185628CbtQzr','isInteger','query','llBLO','DdcTw','SKIzr','ssb-keys','SKXwN','152OwNMQF','QRKdJ','MIGQD','etgXn','PjfNL','25763771ngSDso','AWCEm','createWriteStream','generate','unbox','EdLgG','isMsgLink','createUserStream','split','urIec','key','path','stream','51NFeduK','IQPIc','replace','10GKnPLe','AMkXs','getAtSequence','./extras','DFfWx','3734344dgTmuJ','deletion\x20target\x20must\x20be\x20a\x20message\x20or\x20feed','2620996kcGMgo','hxxpL','string','drain','qSrCH','NZagF','ecmHd','append','MXzkZ','SYOem','queue','private','zeYlL','get'];_0x3358=function(){return _0x2ac72c;};return _0x3358();}module['exports']=function create(_0x46c1db,_0x3123c9,_0x357f9c){var _0x2848dd=_0x4b7b05,_0x5a8688={'sBABp':function(_0x3647d1,_0x388a75,_0x343dd6){return _0x3647d1(_0x388a75,_0x343dd6);},'AMkXs':function(_0x2ab9bc,_0x26934e,_0x42a8ff,_0x15b7ba){return _0x2ab9bc(_0x26934e,_0x42a8ff,_0x15b7ba);},'BTknW':function(_0x4a0cf3,_0x3e9e81){return _0x4a0cf3(_0x3e9e81);},'hsvrz':function(_0x429533,_0x3d4f30){return _0x429533==_0x3d4f30;},'urIec':_0x2848dd(0x100),'IQPIc':function(_0x4b292d,_0x46eaff,_0x459b4e){return _0x4b292d(_0x46eaff,_0x459b4e);},'SKIzr':function(_0x282ede,_0x350f9e,_0x3c8c6c){return _0x282ede(_0x350f9e,_0x3c8c6c);},'HUKzm':_0x2848dd(0xe6),'sfsGa':_0x2848dd(0xd3),'Vojpc':function(_0x477f86,_0x3265c9){return _0x477f86===_0x3265c9;},'SYOem':_0x2848dd(0x109),'ecmHd':_0x2848dd(0xe0),'DFfWx':function(_0x2243aa,_0xe0c987){return _0x2243aa(_0xe0c987);},'jIqDS':function(_0x49cef7,_0x4588c2){return _0x49cef7||_0x4588c2;},'rucwl':function(_0x196ca4,_0x4bb3ef,_0x16526a){return _0x196ca4(_0x4bb3ef,_0x16526a);},'moMen':_0x2848dd(0x10d),'PPJfr':_0x2848dd(0x118)};if(!_0x46c1db)throw new Error(_0x5a8688[_0x2848dd(0xd5)]);_0x357f9c=_0x357f9c||ssbKeys[_0x2848dd(0xed)]();var _0x2b588e=_0x5a8688[_0x2848dd(0xfb)](createDB,join(_0x3123c9['path']||_0x46c1db,'flume'),_0x357f9c,_0x3123c9);_0x2b588e['__proto__']=new EventEmitter(),_0x2b588e[_0x2848dd(0x117)]=_0x3123c9;var _0x1a6ea2=_0x2b588e['get'],_0x2849e1=_0x2b588e['del'];const _0x262167=(_0xe6c0b8,_0x43a81a)=>{var _0x168930=_0x2848dd,_0x5a5fcd={'PjfNL':function(_0x4313e6,_0x485ccf,_0x566084){return _0x5a8688['sBABp'](_0x4313e6,_0x485ccf,_0x566084);}};_0x5a8688['AMkXs'](pull,_0x2b588e[_0x168930(0xf1)]({'id':_0xe6c0b8}),pull[_0x168930(0xce)]((_0x46e5cd,_0x1c4587)=>{var _0x21ddd9=_0x46e5cd['key'];_0x5a8688['sBABp'](_0x3c0805,_0x21ddd9,_0x5a7c3d=>{var _0x4e1294=_0x108f;_0x5a5fcd[_0x4e1294(0xe9)](_0x1c4587,_0x5a7c3d,_0x21ddd9);});}),pull[_0x168930(0xda)](_0x43a81a));},_0x3c0805=(_0x24c4cc,_0x33178d)=>{var _0x29ad95=_0x2848dd;_0x2b588e['keys'][_0x29ad95(0x10e)](_0x24c4cc,(_0x3209bc,_0x562047,_0xd5856c)=>{var _0x1524b0=_0x29ad95;if(_0x3209bc)return _0x5a8688[_0x1524b0(0xc7)](_0x33178d,_0x3209bc);if(_0x5a8688[_0x1524b0(0xd1)](_0xd5856c,null))return _0x33178d(new Error(_0x1524b0(0xd0)));_0x5a8688[_0x1524b0(0x111)](_0x2849e1,_0xd5856c,_0x33178d);});};return _0x2b588e[_0x2848dd(0xbf)]=(_0x4ef2a9,_0x2af60e)=>{var _0x3eefe1=_0x2848dd;if(ref[_0x3eefe1(0xd9)](_0x4ef2a9))_0x3c0805(_0x4ef2a9,_0x2af60e);else ref['isFeed'](_0x4ef2a9)?_0x262167(_0x4ef2a9,_0x2af60e):_0x2af60e(new Error(_0x5a8688[_0x3eefe1(0xf3)]));},_0x2b588e[_0x2848dd(0x10e)]=function(_0x365d55,_0x5b6040){var _0x382ba7=_0x2848dd,_0x24fe00={'hxxpL':function(_0x540850,_0x3d5ef6,_0x2a691e){var _0x1e3727=_0x108f;return _0x5a8688[_0x1e3727(0xe2)](_0x540850,_0x3d5ef6,_0x2a691e);}};if(_0x382ba7(0xe8)===_0x5a8688[_0x382ba7(0xbc)])_0x24fe00[_0x382ba7(0x102)](_0x4e9519,_0x364b53,_0x172995);else{let _0x3b5790=![],_0x30253e,_0x116125=![];typeof _0x365d55==='object'&&(_0x3b5790=_0x365d55[_0x382ba7(0x10c)]===!![],_0x30253e=_0x365d55[_0x382ba7(0xee)],_0x116125=_0x365d55[_0x382ba7(0x116)],_0x365d55=_0x365d55['id']);if(ref['isMsg'](_0x365d55))return _0x2b588e['keys'][_0x382ba7(0x10e)](_0x365d55,function(_0x10fe67,_0x469e6d){var _0x85fd18=_0x382ba7;if(_0x10fe67)return _0x5b6040(_0x10fe67);if(!_0x3b5790){if(_0x116125)_0x5a8688[_0x85fd18(0xf8)](_0x5b6040,null,{'key':_0x365d55,'value':u[_0x85fd18(0xcb)](_0x469e6d[_0x85fd18(0xc9)]),'timestamp':_0x469e6d['timestamp']});else _0x5a8688[_0x85fd18(0xf8)](_0x5b6040,null,u[_0x85fd18(0xcb)](_0x469e6d[_0x85fd18(0xc9)]));}else{const _0x40119f=_0x2b588e['_unbox'](_0x469e6d,_0x30253e);if(_0x116125)_0x5b6040(null,{'key':_0x365d55,'value':_0x40119f[_0x85fd18(0xc9)],'timestamp':_0x40119f['timestamp']});else _0x5a8688[_0x85fd18(0xe2)](_0x5b6040,null,_0x40119f[_0x85fd18(0xc9)]);}});else{if(ref[_0x382ba7(0xf0)](_0x365d55)){var _0x41abec=ref['parseLink'](_0x365d55);return _0x2b588e['get']({'id':_0x41abec[_0x382ba7(0x112)],'private':!![],'unbox':_0x41abec[_0x382ba7(0xdf)][_0x382ba7(0xee)][_0x382ba7(0xf9)](/\s/g,'+'),'meta':_0x41abec[_0x382ba7(0xdf)][_0x382ba7(0x116)]},_0x5b6040);}else{if(Number[_0x382ba7(0xde)](_0x365d55))_0x5a8688[_0x382ba7(0xf8)](_0x1a6ea2,_0x365d55,_0x5b6040);else throw new Error(_0x5a8688[_0x382ba7(0x110)]);}}}},_0x2b588e['add']=function(_0x50b3eb,_0xc78c0a){var _0x353579=_0x2848dd,_0x407f27={'EdLgG':_0x353579(0xdb),'mZxQg':function(_0x575e22,_0x5f0698){return _0x575e22(_0x5f0698);}};_0x2b588e[_0x353579(0x10b)](_0x50b3eb,function(_0x22f0da,_0x2e9bc2){var _0x58f578=_0x353579,_0x5ab11d={'MIGQD':function(_0x4e50da,_0x4b8d72,_0x4f0897){return _0x4e50da(_0x4b8d72,_0x4f0897);}};if(_0x58f578(0xdb)!==_0x407f27[_0x58f578(0xef)])_0x5ab11d[_0x58f578(0xe7)](_0x1ce325,_0x5ca3c9,_0x10169d);else{if(_0x22f0da)_0x407f27[_0x58f578(0xcf)](_0xc78c0a,_0x22f0da);else _0x2b588e[_0x58f578(0xd2)](function(){_0xc78c0a(null,_0x2e9bc2);});}});},_0x2b588e[_0x2848dd(0xc5)]=function(_0x8b3d01){var _0x5ed09c=_0x2848dd,_0x503cb3={'bschV':function(_0x1c0096,_0x22b888){return _0x1c0096!==_0x22b888;},'CyQuo':_0x5ed09c(0xd4)};if(!_0x8b3d01)_0x8b3d01=ssbKeys[_0x5ed09c(0xed)]();function _0x211652(_0x1108de,_0x1f888d){var _0x3ab62a=_0x5ed09c,_0x17fa42={'hdHxY':function(_0x13477e,_0x3046b5,_0x26d0dc){return _0x13477e(_0x3046b5,_0x26d0dc);},'CqZPw':function(_0x3d71f9,_0x3dc391){return _0x3d71f9(_0x3dc391);}};if(!_0x1f888d){if(_0x503cb3[_0x3ab62a(0xc3)]('INuRB',_0x503cb3['CyQuo']))return function(_0x35b8d6){_0x17fa42['hdHxY'](_0x211652,_0x1108de,_0x35b8d6);};else{if(_0x45936a)return _0x17fa42[_0x3ab62a(0x113)](_0x1a94f0,_0x117da5);if(!_0x193c7f){if(_0x4bf479)_0x219562(null,{'key':_0x5aa8cc,'value':_0x464d10[_0x3ab62a(0xcb)](_0x4c9083[_0x3ab62a(0xc9)]),'timestamp':_0x51b427[_0x3ab62a(0xc2)]});else _0x448e43(null,_0x32b9c2[_0x3ab62a(0xcb)](_0x4c36a0[_0x3ab62a(0xc9)]));}else{const _0x1c7624=_0x2723f8['_unbox'](_0x10d6f6,_0x151e96);if(_0x472ecb)_0x5651de(null,{'key':_0x566ed1,'value':_0x1c7624[_0x3ab62a(0xc9)],'timestamp':_0x1c7624[_0x3ab62a(0xc2)]});else _0x36aaa4(null,_0x1c7624['value']);}}}_0x2b588e[_0x3ab62a(0x108)]({'content':_0x1108de,'keys':_0x8b3d01},_0x1f888d);}return{'add':_0x211652,'publish':_0x211652,'id':_0x8b3d01['id'],'keys':_0x8b3d01};},_0x2b588e[_0x2848dd(0xbd)]=function(_0x16aa3a){var _0x324432=_0x2848dd;if(_0x5a8688[_0x324432(0x107)]!==_0x5a8688[_0x324432(0x107)])throw new _0x2cfd03(_0x5a8688[_0x324432(0x110)]);else return pull(_0x2b588e[_0x324432(0xf6)](_0x16aa3a),pull[_0x324432(0xcd)](({seq:_0x3282ef,value:_0x4e8e52})=>{var _0x3d141b=_0x324432,_0x37c1c4={'SKXwN':function(_0x544bd0,_0xf74c4c){return _0x544bd0(_0xf74c4c);},'DdcTw':function(_0x6ee554,_0x1cfc7b,_0x2d96b1){return _0x6ee554(_0x1cfc7b,_0x2d96b1);}};if(_0x5a8688[_0x3d141b(0xdc)](_0x5a8688[_0x3d141b(0x10a)],_0x5a8688[_0x3d141b(0x10a)]))return{'seq':_0x3282ef,'value':u[_0x3d141b(0x115)](_0x4e8e52)};else{if(_0x1f55c2)return _0x37c1c4[_0x3d141b(0xe4)](_0x31dac0,_0x534789);var _0x51e6c1={};for(var _0x5d8ca6 in _0x5f03cf){_0x51e6c1[_0x5d8ca6]=_0x1af1cb[_0x5d8ca6]['sequence'];}_0x37c1c4[_0x3d141b(0xe1)](_0x4e9d9e,null,_0x51e6c1);}}));},extras(_0x2b588e,_0x3123c9,_0x357f9c),_0x2b588e[_0x2848dd(0xec)]=function(_0x546152){var _0xbd0b1f=_0x2848dd,_0x374bc8={'qSrCH':_0xbd0b1f(0xd7)};return _0x546152=_0x5a8688[_0xbd0b1f(0xca)](_0x546152,errorCB),_0x5a8688['rucwl'](pull,pull[_0xbd0b1f(0xce)](function(_0x3700d1,_0x27ee23){var _0x12afab=_0xbd0b1f;_0x2b588e[_0x12afab(0x10b)](_0x3700d1,function(_0x78c868,_0x4a76c8){var _0x11c2da=_0x12afab;_0x78c868&&_0x2b588e['emit'](_0x374bc8[_0x11c2da(0x105)],_0x78c868,_0x4a76c8),setImmediate(_0x27ee23);});}),pull[_0xbd0b1f(0x104)](null,function(_0x408b48){var _0x25079d=_0xbd0b1f;if(_0x408b48)return _0x5a8688[_0x25079d(0xfe)](_0x546152,_0x408b48);_0x2b588e[_0x25079d(0xd2)](_0x546152);}));},_0x2b588e[_0x2848dd(0x114)]=_0x2b588e[_0x2848dd(0x10f)]['createHistoryStream'],_0x2b588e[_0x2848dd(0xfc)]=function(_0x2bfa30,_0x48eedc){var _0x31af39=_0x2848dd;_0x2b588e[_0x31af39(0x10f)]['get'](isString(_0x2bfa30)?_0x2bfa30[_0x31af39(0xf2)](':'):_0x2bfa30,function(_0x5a390a,_0x13bbdc){var _0x5e4643=_0x31af39;if(_0x5a390a)_0x48eedc(_0x5a390a);else _0x5a8688[_0x5e4643(0x111)](_0x48eedc,null,u['originalData'](_0x13bbdc));});},_0x2b588e['getVectorClock']=function(_0x586bf4,_0xa246bd){var _0x47d010=_0x2848dd,_0x14b148={'AWCEm':function(_0x3f30f4,_0x44f42b,_0x343c5d,_0x1692cb){return _0x3f30f4(_0x44f42b,_0x343c5d,_0x1692cb);}};if(!_0xa246bd)_0xa246bd=_0x586bf4;_0x2b588e['last'][_0x47d010(0x10e)](function(_0x578e71,_0x30de1d){var _0x4db8a0=_0x47d010;if(_0x4db8a0(0x106)===_0x5a8688['moMen'])_0x14b148[_0x4db8a0(0xeb)](_0x58ea27,_0x13a537[_0x4db8a0(0xf1)]({'id':_0x17a3fe}),_0x10d28c[_0x4db8a0(0xce)]((_0x1f80de,_0x56dc94)=>{var _0x3bcfa4=_0x4db8a0,_0x4a5f72=_0x1f80de[_0x3bcfa4(0xf4)];_0x1e3b0f(_0x4a5f72,_0xc26309=>{_0x56dc94(_0xc26309,_0x4a5f72);});}),_0x1e886e[_0x4db8a0(0xda)](_0x3968eb));else{if(_0x578e71)return _0xa246bd(_0x578e71);var _0x2fd7e9={};for(var _0x39aa71 in _0x30de1d){_0x2fd7e9[_0x39aa71]=_0x30de1d[_0x39aa71][_0x4db8a0(0xbe)];}_0xa246bd(null,_0x2fd7e9);}});},_0x2b588e;};