'use strict';function _0xd215(_0x490745,_0x1dfeb9){const _0xf947ac=_0xf947();return _0xd215=function(_0xd215da,_0x249567){_0xd215da=_0xd215da-0x17e;let _0x339281=_0xf947ac[_0xd215da];return _0x339281;},_0xd215(_0x490745,_0x1dfeb9);}const _0x16715e=_0xd215;(function(_0x56376b,_0x12ecdd){const _0x547e43=_0xd215,_0x3aff53=_0x56376b();while(!![]){try{const _0x4355b3=-parseInt(_0x547e43(0x1ad))/0x1+parseInt(_0x547e43(0x191))/0x2+parseInt(_0x547e43(0x195))/0x3+-parseInt(_0x547e43(0x1ae))/0x4*(-parseInt(_0x547e43(0x18c))/0x5)+parseInt(_0x547e43(0x197))/0x6*(-parseInt(_0x547e43(0x190))/0x7)+-parseInt(_0x547e43(0x18a))/0x8+parseInt(_0x547e43(0x1a5))/0x9*(-parseInt(_0x547e43(0x1af))/0xa);if(_0x4355b3===_0x12ecdd)break;else _0x3aff53['push'](_0x3aff53['shift']());}catch(_0x833f5c){_0x3aff53['push'](_0x3aff53['shift']());}}}(_0xf947,0x43874));function _0xf947(){const _0x5286b8=['validateYupSchema','YduFU','HcJwq','it\x20does\x20not\x20validate\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20value\x20is\x20`null`','it\x20validates\x20the\x20unique\x20constraint\x20if\x20there\x20is\x20no\x20other\x20record\x20in\x20the\x20database','toHaveBeenCalled','477pYFXmZ','clearAllMocks','../validators','contentType','test-model','VaJLE','jfHVw','BigInteger\x20validator','31358kvizjE','12pKWDRS','27970gLMbAg','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20but\x20not\x20the\x20same\x20id\x20for\x20the\x20checked\x20attribute\x20if\x20an\x20entity\x20is\x20passed','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20for\x20the\x20checked\x20attribute','hKvir','test-uid','toBeInstanceOf','attrBigIntegerUnique','mockReset','@strapi/utils','oJOlA','RGTHh','biginteger','chmko','AikRc','unique','it\x20fails\x20the\x20validation\x20of\x20the\x20unique\x20constraint\x20if\x20the\x20database\x20contains\x20a\x20record\x20with\x20the\x20same\x20attribute\x20value','min','toHaveBeenCalledWith','1539024tlHJZx','EPjuY','839435nrJFTT','QOobw','nullable','zKuPQ','3745931JLnykX','383002vxVwVN','strapi','mahNS','LRrvK','1465632KrZrss','AqGgL','6jTmKQU','not','gafkW','assertions','mockResolvedValueOnce','toBe','123','EZyzc'];_0xf947=function(){return _0x5286b8;};return _0xf947();}const strapiUtils=require(_0x16715e(0x180)),{errors:{YupValidationError}}=require(_0x16715e(0x180)),validators=require(_0x16715e(0x1a7));describe(_0x16715e(0x1ac),()=>{const _0xef4c88=_0x16715e,_0x1199e4={'YduFU':_0xef4c88(0x183),'gafkW':_0xef4c88(0x17e),'AikRc':function(_0x403087,_0x21dd14){return _0x403087(_0x21dd14);},'chmko':function(_0x10586f,_0x2e4064){return _0x10586f(_0x2e4064);},'zKuPQ':function(_0x4a2af,_0x5c1406){return _0x4a2af(_0x5c1406);},'mahNS':function(_0x41bc42,_0x223092){return _0x41bc42(_0x223092);},'VaJLE':'it\x20does\x20not\x20validate\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20is\x20not\x20set\x20as\x20unique','oJOlA':_0xef4c88(0x1a3),'hKvir':function(_0x2cf2c4,_0x38ef82,_0x32d12d){return _0x2cf2c4(_0x38ef82,_0x32d12d);},'AqGgL':_0xef4c88(0x187),'ajznc':function(_0x2c3487,_0x3ee91b,_0x4636ec){return _0x2c3487(_0x3ee91b,_0x4636ec);},'EPjuY':_0xef4c88(0x1b0),'RGTHh':_0xef4c88(0x19d),'LRrvK':function(_0x4d351d,_0x3fa24b,_0x1997ac){return _0x4d351d(_0x3fa24b,_0x1997ac);},'QOobw':_0xef4c88(0x188)};describe(_0xef4c88(0x186),()=>{const _0x565ecf=_0xef4c88,_0x157b5d={'EZyzc':function(_0x5ed74e,_0x55ed4c){return _0x5ed74e(_0x55ed4c);},'jfHVw':_0x565ecf(0x183)},_0x47f952=jest['fn']();global[_0x565ecf(0x192)]={'db':{'query':jest['fn'](()=>({'findOne':_0x47f952}))}},_0x1199e4[_0x565ecf(0x193)](afterEach,()=>{const _0x32bbfc=_0x565ecf;jest[_0x32bbfc(0x1a6)](),_0x47f952[_0x32bbfc(0x17f)]();});const _0x48504c={'kind':_0x565ecf(0x1a8),'modelName':_0x565ecf(0x1a9),'uid':_0x565ecf(0x1b3),'options':{},'attributes':{'attrBigIntegerUnique':{'type':_0x1199e4[_0x565ecf(0x1a0)],'unique':!![]}}};test(_0x1199e4[_0x565ecf(0x1aa)],async()=>{const _0x5cc5ef=_0x565ecf;_0x47f952['mockResolvedValueOnce'](null);const _0x114876=strapiUtils[_0x5cc5ef(0x19f)](validators[_0x5cc5ef(0x183)]({'attr':{'type':_0x1199e4[_0x5cc5ef(0x1a0)]},'model':_0x48504c,'updatedAttribute':{'name':_0x5cc5ef(0x17e),'value':0x1},'entity':null},{'isDraft':![]}));await _0x114876(0x1),expect(_0x47f952)[_0x5cc5ef(0x198)][_0x5cc5ef(0x1a4)]();}),test(_0x565ecf(0x1a2),async()=>{const _0x581819=_0x565ecf;_0x47f952['mockResolvedValueOnce'](null);const _0x2178fd=strapiUtils['validateYupSchema'](validators['biginteger']({'attr':{'type':_0x581819(0x183),'unique':!![]},'model':_0x48504c,'updatedAttribute':{'name':'attrBigIntegerUnique','value':null},'entity':null},{'isDraft':![]})[_0x581819(0x18e)]());await _0x157b5d[_0x581819(0x19e)](_0x2178fd,null),_0x157b5d[_0x581819(0x19e)](expect,_0x47f952)[_0x581819(0x198)][_0x581819(0x1a4)]();}),test(_0x1199e4[_0x565ecf(0x181)],async()=>{const _0x2c6647=_0x565ecf;_0x47f952[_0x2c6647(0x19b)](null);const _0x576f54=strapiUtils[_0x2c6647(0x19f)](validators[_0x2c6647(0x183)]({'attr':{'type':_0x157b5d[_0x2c6647(0x1ab)],'unique':!![]},'model':_0x48504c,'updatedAttribute':{'name':'attrBigIntegerUnique','value':0x1},'entity':null},{'isDraft':![]}));_0x157b5d['EZyzc'](expect,await _0x576f54(0x1))[_0x2c6647(0x19c)](0x1);}),_0x1199e4[_0x565ecf(0x1b2)](test,_0x1199e4[_0x565ecf(0x196)],async()=>{const _0x81c68a=_0x565ecf;expect[_0x81c68a(0x19a)](0x1),_0x47f952[_0x81c68a(0x19b)]({'attrBigIntegerUnique':0x2});const _0x40869e=strapiUtils[_0x81c68a(0x19f)](validators[_0x81c68a(0x183)]({'attr':{'type':_0x1199e4[_0x81c68a(0x1a0)],'unique':!![]},'model':_0x48504c,'updatedAttribute':{'name':_0x1199e4[_0x81c68a(0x199)],'value':0x2},'entity':null},{'isDraft':![]}));try{await _0x1199e4[_0x81c68a(0x185)](_0x40869e,0x2);}catch(_0x4cc73b){expect(_0x4cc73b)[_0x81c68a(0x1b4)](YupValidationError);}}),test('it\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20data\x20has\x20not\x20changed\x20even\x20if\x20there\x20is\x20a\x20record\x20in\x20the\x20database\x20with\x20the\x20same\x20attribute\x20value',async()=>{const _0xddd21e=_0x565ecf;_0x47f952[_0xddd21e(0x19b)]({'attrBigIntegerUnique':0x3});const _0x1b9c30=strapiUtils['validateYupSchema'](validators[_0xddd21e(0x183)]({'attr':{'type':'biginteger','unique':!![]},'model':_0x48504c,'updatedAttribute':{'name':'attrBigIntegerUnique','value':0x3},'entity':{'id':0x1,'attrBigIntegerUnique':0x3}},{'isDraft':![]}));_0x1199e4[_0xddd21e(0x185)](expect,await _0x1199e4[_0xddd21e(0x184)](_0x1b9c30,0x3))['toBe'](0x3);}),test(_0x565ecf(0x1b1),async()=>{const _0x33888d=_0x565ecf;_0x47f952['mockResolvedValueOnce'](null);const _0x596219=strapiUtils[_0x33888d(0x19f)](validators[_0x33888d(0x183)]({'attr':{'type':_0x1199e4['YduFU'],'unique':!![]},'model':_0x48504c,'updatedAttribute':{'name':'attrBigIntegerUnique','value':0x4},'entity':null},{'isDraft':![]}));await _0x1199e4[_0x33888d(0x18f)](_0x596219,0x4),expect(_0x47f952)[_0x33888d(0x189)]({'select':['id'],'where':{'attrBigIntegerUnique':0x4}});}),_0x1199e4['ajznc'](test,_0x1199e4[_0x565ecf(0x18b)],async()=>{const _0x532dce=_0x565ecf;_0x47f952[_0x532dce(0x19b)](null);const _0x25cfe4=strapiUtils[_0x532dce(0x19f)](validators[_0x532dce(0x183)]({'attr':{'type':_0x532dce(0x183),'unique':!![]},'model':_0x48504c,'updatedAttribute':{'name':_0x1199e4['gafkW'],'value':0x5},'entity':{'id':0x1,'attrBigIntegerUnique':0x2a}},{'isDraft':![]}));await _0x25cfe4(0x5),expect(_0x47f952)['toHaveBeenCalledWith']({'select':['id'],'where':{'$and':[{'attrBigIntegerUnique':0x5},{'$not':{'id':0x1}}]}});});}),_0x1199e4['hKvir'](describe,_0x1199e4[_0xef4c88(0x18d)],()=>{const _0x21f93e=_0xef4c88,_0x2200f1={'HcJwq':_0x21f93e(0x183),'giWSx':_0x1199e4[_0x21f93e(0x182)]};_0x1199e4[_0x21f93e(0x194)](test,'it\x20does\x20not\x20validate\x20the\x20min\x20constraint\x20if\x20the\x20attribute\x20min\x20is\x20not\x20a\x20number',async()=>{const _0xa5a44d=_0x21f93e,_0x4b9bfe=strapiUtils[_0xa5a44d(0x19f)](validators[_0xa5a44d(0x183)]({'attr':{'type':_0x2200f1[_0xa5a44d(0x1a1)],'minLength':_0x2200f1['giWSx']}},{'isDraft':![]}));expect(await _0x4b9bfe(0x1))['toBe'](0x1);});});});