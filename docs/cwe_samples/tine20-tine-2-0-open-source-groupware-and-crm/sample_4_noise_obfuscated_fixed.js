'use strict';function _0x4102(_0x4d2446,_0x3f1a13){const _0x97185f=_0x9718();return _0x4102=function(_0x410234,_0x4ef245){_0x410234=_0x410234-0xb2;let _0xadc60d=_0x97185f[_0x410234];return _0xadc60d;},_0x4102(_0x4d2446,_0x3f1a13);}const _0x143cbf=_0x4102;(function(_0x4e8da9,_0x54bb0e){const _0x4edfe5=_0x4102,_0x43913e=_0x4e8da9();while(!![]){try{const _0x532e05=-parseInt(_0x4edfe5(0xef))/0x1*(parseInt(_0x4edfe5(0xe8))/0x2)+-parseInt(_0x4edfe5(0xc6))/0x3*(parseInt(_0x4edfe5(0xd0))/0x4)+-parseInt(_0x4edfe5(0xf4))/0x5*(parseInt(_0x4edfe5(0xf0))/0x6)+-parseInt(_0x4edfe5(0xb8))/0x7*(parseInt(_0x4edfe5(0xcf))/0x8)+parseInt(_0x4edfe5(0xe0))/0x9*(parseInt(_0x4edfe5(0xe9))/0xa)+parseInt(_0x4edfe5(0xf7))/0xb*(-parseInt(_0x4edfe5(0xc3))/0xc)+-parseInt(_0x4edfe5(0xdc))/0xd*(-parseInt(_0x4edfe5(0xd6))/0xe);if(_0x532e05===_0x54bb0e)break;else _0x43913e['push'](_0x43913e['shift']());}catch(_0xf2f04f){_0x43913e['push'](_0x43913e['shift']());}}}(_0x9718,0x4d8fd));const strapiUtils=require(_0x143cbf(0xc8)),{errors:{YupValidationError}}=require(_0x143cbf(0xc8)),validators=require(_0x143cbf(0xf5));function _0x9718(){const _0x174c03=['VVlap','other-uid','rkXEd','51786gRhapL','test-model','toBe','WQpjc','JEaVB','unchanged-unique-uid','4940QAAhlu','fHYgK','LlhVt','nullable','2656341UAlkKc','validateYupSchema','wrongly\x5cformated||UID','attrUidUnique','uiqWg','UID\x20validator','it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20value\x20is\x20`null`','uid','2BvxPnE','10uudrjH','test-uid','assertions','FwmQD','contentType','properly.formated-uid','53602RoyDZQ','17268dmaTFe','uoHRY','loQhq','khRgl','1085qAcGpY','../validators','vCaoP','172238APIybI','regExp','unique','IdeDJ','clearAllMocks','toBeInstanceOf','unique-uid','mockResolvedValueOnce','ZGZai','52703RiauJr','it\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20data\x20has\x20not\x20changed\x20even\x20if\x20there\x20is\x20a\x20record\x20in\x20the\x20database\x20with\x20the\x20same\x20attribute\x20value','non-unique-uid','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20for\x20the\x20checked\x20attribute','HzdHT','fkVCy','VCMFh','IDuND','gACcy','FGjHc','it\x20always\x20validates\x20the\x20unique\x20constraint\x20even\x20if\x20the\x20attribute\x20is\x20not\x20set\x20as\x20unique','24YVlDqO','it\x20fails\x20the\x20validation\x20of\x20the\x20unique\x20constraint\x20if\x20the\x20database\x20contains\x20a\x20record\x20with\x20the\x20same\x20attribute\x20value','SmshC','36QiTKbq','fcuRr','@strapi/utils','it\x20validate\x20the\x20uid\x20if\x20it\x20fit\x20the\x20required\x20format','TPHCj','AvrdO','KlGto','not','toHaveBeenCalledWith','672DYynzh','13732vJbHve','it\x20fails\x20to\x20validate\x20the\x20uid\x20if\x20it\x20does\x20not\x20fit\x20the\x20requried\x20format','IroqU'];_0x9718=function(){return _0x174c03;};return _0x9718();}describe(_0x143cbf(0xe5),()=>{const _0x1a5005=_0x143cbf,_0x2e4343={'rkXEd':'uid','gACcy':'attrUidUnique','IroqU':function(_0x5c162d,_0x14b331){return _0x5c162d(_0x14b331);},'loQhq':'non-unique-uid','ZGZai':_0x1a5005(0xb5),'imciR':_0x1a5005(0xd4),'lDLwQ':function(_0x1a0f3b,_0xccc5c7){return _0x1a0f3b(_0xccc5c7);},'WQpjc':function(_0x2bfa63,_0x2a9ef7){return _0x2bfa63(_0x2a9ef7);},'IdeDJ':function(_0x2aedc6,_0x3a8375){return _0x2aedc6(_0x3a8375);},'FGjHc':function(_0x400e87,_0x235e70,_0xbe1421){return _0x400e87(_0x235e70,_0xbe1421);},'khRgl':function(_0x23a8f3,_0x15f79d,_0x4f4293){return _0x23a8f3(_0x15f79d,_0x4f4293);},'HzdHT':_0x1a5005(0xe6),'fHYgK':function(_0x8f8f2f,_0x11cb36,_0x54ad01){return _0x8f8f2f(_0x11cb36,_0x54ad01);},'zqLks':_0x1a5005(0xc2),'vCaoP':function(_0x4457d7,_0x59caf0,_0x15faff){return _0x4457d7(_0x59caf0,_0x15faff);},'musgk':_0x1a5005(0xb9),'SmshC':function(_0x102a6b,_0x5de56e,_0x1341b4){return _0x102a6b(_0x5de56e,_0x1341b4);},'IDuND':'it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20but\x20not\x20the\x20same\x20id\x20for\x20the\x20checked\x20attribute\x20if\x20an\x20entity\x20is\x20passed','uiqWg':_0x1a5005(0xea)},_0x15789f=jest['fn']();global['strapi']={'db':{'query':jest['fn'](()=>({'findOne':_0x15789f}))}},afterEach(()=>{const _0x4e5ca0=_0x1a5005;jest[_0x4e5ca0(0xb3)](),_0x15789f['mockReset']();});const _0x3dbbb3={'kind':_0x1a5005(0xed),'modelName':_0x1a5005(0xd7),'uid':_0x2e4343[_0x1a5005(0xe4)],'options':{},'attributes':{'attrUidUnique':{'type':_0x2e4343[_0x1a5005(0xd5)]}}};_0x2e4343[_0x1a5005(0xf3)](describe,_0x1a5005(0xf9),()=>{const _0x2236ba=_0x1a5005,_0x5a85dc={'JEaVB':_0x2236ba(0xba),'uoHRY':function(_0x539ae7,_0x2920de){const _0x4dc3ea=_0x2236ba;return _0x2e4343[_0x4dc3ea(0xb2)](_0x539ae7,_0x2920de);},'LlhVt':_0x2236ba(0xb5),'KlGto':_0x2e4343['rkXEd'],'QtkTD':function(_0x13bd32,_0x56e25b){return _0x13bd32(_0x56e25b);},'VVlap':_0x2236ba(0xdb)};_0x2e4343[_0x2236ba(0xc1)](test,'it\x20validates\x20the\x20unique\x20constraint\x20if\x20there\x20is\x20no\x20other\x20record\x20in\x20the\x20database',async()=>{const _0x176331=_0x2236ba;_0x15789f['mockResolvedValueOnce'](null);const _0x10c2f8=strapiUtils[_0x176331(0xe1)](validators[_0x176331(0xe7)]({'attr':{'type':_0x176331(0xe7),'unique':!![]},'model':_0x3dbbb3,'updatedAttribute':{'name':'attrUidUnique','value':_0x5a85dc[_0x176331(0xda)]},'entity':null},{'isDraft':![]}));_0x5a85dc[_0x176331(0xf1)](expect,await _0x10c2f8(_0x176331(0xba)))[_0x176331(0xd8)](_0x176331(0xba));}),_0x2e4343[_0x2236ba(0xf3)](test,_0x2e4343[_0x2236ba(0xbc)],async()=>{const _0x2b167f=_0x2236ba;_0x15789f[_0x2b167f(0xb6)](null);const _0x371fae=strapiUtils[_0x2b167f(0xe1)](validators[_0x2b167f(0xe7)]({'attr':{'type':_0x2e4343[_0x2b167f(0xd5)],'unique':!![]},'model':_0x3dbbb3,'updatedAttribute':{'name':_0x2e4343[_0x2b167f(0xc0)],'value':null},'entity':null},{'isDraft':![]})[_0x2b167f(0xdf)]());await _0x371fae(null),expect(_0x15789f)[_0x2b167f(0xcd)]['toHaveBeenCalled']();}),_0x2e4343[_0x2236ba(0xdd)](test,_0x2e4343['zqLks'],async()=>{const _0x4d3089=_0x2236ba;_0x15789f[_0x4d3089(0xb6)](null);const _0x4bd20f=strapiUtils[_0x4d3089(0xe1)](validators['uid']({'attr':{'type':'uid'},'model':_0x3dbbb3,'updatedAttribute':{'name':_0x2e4343[_0x4d3089(0xc0)],'value':_0x4d3089(0xba)},'entity':null},{'isDraft':![]}));_0x2e4343[_0x4d3089(0xd2)](expect,await _0x2e4343[_0x4d3089(0xd2)](_0x4bd20f,_0x2e4343[_0x4d3089(0xf2)]))[_0x4d3089(0xd8)](_0x2e4343[_0x4d3089(0xf2)]),expect(_0x15789f)[_0x4d3089(0xce)]({'select':['id'],'where':{'attrUidUnique':_0x4d3089(0xba)}});}),_0x2e4343['vCaoP'](test,_0x2236ba(0xc4),async()=>{const _0x75c19f=_0x2236ba;expect['assertions'](0x1),_0x15789f[_0x75c19f(0xb6)]({'attrUidUnique':_0x5a85dc['LlhVt']});const _0x47fd26=strapiUtils['validateYupSchema'](validators[_0x75c19f(0xe7)]({'attr':{'type':_0x5a85dc[_0x75c19f(0xcc)],'unique':!![]},'model':_0x3dbbb3,'updatedAttribute':{'name':_0x75c19f(0xe3),'value':_0x5a85dc['LlhVt']},'entity':null},{'isDraft':![]}));try{await _0x5a85dc['QtkTD'](_0x47fd26,_0x5a85dc[_0x75c19f(0xde)]);}catch(_0x94c274){expect(_0x94c274)['toBeInstanceOf'](YupValidationError);}}),test(_0x2e4343['musgk'],async()=>{const _0x4a79ab=_0x2236ba;_0x15789f[_0x4a79ab(0xb6)]({'attrUidUnique':_0x5a85dc[_0x4a79ab(0xd3)]});const _0x3d7947=strapiUtils[_0x4a79ab(0xe1)](validators[_0x4a79ab(0xe7)]({'attr':{'type':'uid','unique':!![]},'model':_0x3dbbb3,'updatedAttribute':{'name':_0x4a79ab(0xe3),'value':_0x4a79ab(0xdb)},'entity':{'id':0x1,'attrUidUnique':_0x4a79ab(0xdb)}},{'isDraft':![]}));_0x5a85dc['uoHRY'](expect,await _0x3d7947(_0x5a85dc[_0x4a79ab(0xd3)]))[_0x4a79ab(0xd8)](_0x5a85dc[_0x4a79ab(0xd3)]);}),_0x2e4343[_0x2236ba(0xc5)](test,_0x2236ba(0xbb),async()=>{const _0x117d6b=_0x2236ba;_0x15789f['mockResolvedValueOnce'](null);const _0x3131bd=strapiUtils[_0x117d6b(0xe1)](validators[_0x117d6b(0xe7)]({'attr':{'type':'uid','unique':!![]},'model':_0x3dbbb3,'updatedAttribute':{'name':_0x117d6b(0xe3),'value':_0x117d6b(0xb5)},'entity':null},{'isDraft':![]}));await _0x3131bd(_0x117d6b(0xb5)),expect(_0x15789f)[_0x117d6b(0xce)]({'select':['id'],'where':{'attrUidUnique':_0x117d6b(0xb5)}});}),test(_0x2e4343[_0x2236ba(0xbf)],async()=>{const _0x2644a2=_0x2236ba;_0x15789f[_0x2644a2(0xb6)](null);const _0x3631d1=strapiUtils[_0x2644a2(0xe1)](validators[_0x2644a2(0xe7)]({'attr':{'type':_0x2644a2(0xe7),'unique':!![]},'model':_0x3dbbb3,'updatedAttribute':{'name':_0x2644a2(0xe3),'value':_0x2e4343[_0x2644a2(0xb7)]},'entity':{'id':0x1,'attrUidUnique':_0x2e4343['imciR']}},{'isDraft':![]}));await _0x2e4343['lDLwQ'](_0x3631d1,_0x2e4343[_0x2644a2(0xb7)]),_0x2e4343[_0x2644a2(0xd9)](expect,_0x15789f)[_0x2644a2(0xce)]({'select':['id'],'where':{'$and':[{'attrUidUnique':_0x2e4343['ZGZai']},{'$not':{'id':0x1}}]}});});}),describe(_0x1a5005(0xf8),()=>{const _0x3145fc=_0x1a5005,_0x3895af={'AvrdO':_0x3145fc(0xe7),'FwmQD':_0x2e4343[_0x3145fc(0xc0)],'fcuRr':_0x3145fc(0xe2),'VCMFh':function(_0x946b99,_0x347a0b){return _0x946b99(_0x347a0b);},'MfoyA':_0x3145fc(0xba),'TPHCj':function(_0xc8cf3b,_0x4c17ff){return _0xc8cf3b(_0x4c17ff);},'fkVCy':_0x3145fc(0xee)};_0x2e4343[_0x3145fc(0xf6)](test,_0x3145fc(0xd1),async()=>{const _0x55fa81=_0x3145fc;expect[_0x55fa81(0xeb)](0x1),_0x15789f[_0x55fa81(0xb6)](null);const _0xb94ccb=strapiUtils[_0x55fa81(0xe1)](validators[_0x55fa81(0xe7)]({'attr':{'type':_0x3895af[_0x55fa81(0xcb)],'unique':!![]},'model':_0x3dbbb3,'updatedAttribute':{'name':_0x3895af[_0x55fa81(0xec)],'value':_0x55fa81(0xba)},'entity':null},{'isDraft':![]}));try{await _0xb94ccb(_0x3895af[_0x55fa81(0xc7)]);}catch(_0x51181b){_0x3895af[_0x55fa81(0xbe)](expect,_0x51181b)[_0x55fa81(0xb4)](YupValidationError);}}),test(_0x3145fc(0xc9),async()=>{const _0x5cccc1=_0x3145fc;_0x15789f[_0x5cccc1(0xb6)](null);const _0x2d4ecb=strapiUtils['validateYupSchema'](validators[_0x5cccc1(0xe7)]({'attr':{'type':_0x5cccc1(0xe7),'unique':!![]},'model':_0x3dbbb3,'updatedAttribute':{'name':_0x3895af[_0x5cccc1(0xec)],'value':_0x3895af['MfoyA']},'entity':null},{'isDraft':![]}));_0x3895af[_0x5cccc1(0xca)](expect,await _0x2d4ecb(_0x3895af[_0x5cccc1(0xbd)]))['toBe'](_0x3895af[_0x5cccc1(0xbd)]);});});});