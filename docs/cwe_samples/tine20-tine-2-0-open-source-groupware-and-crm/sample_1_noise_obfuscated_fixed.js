'use strict';const _0x35b422=_0x211f;function _0x211f(_0x49edad,_0x1af5cc){const _0x5d24b0=_0x5d24();return _0x211f=function(_0x211f8e,_0x403f16){_0x211f8e=_0x211f8e-0x178;let _0x34d503=_0x5d24b0[_0x211f8e];return _0x34d503;},_0x211f(_0x49edad,_0x1af5cc);}(function(_0x38d4f9,_0x9d604c){const _0x19c9dc=_0x211f,_0x609537=_0x38d4f9();while(!![]){try{const _0x12ac87=-parseInt(_0x19c9dc(0x1d8))/0x1+-parseInt(_0x19c9dc(0x1c5))/0x2+-parseInt(_0x19c9dc(0x1a4))/0x3+parseInt(_0x19c9dc(0x1e4))/0x4*(parseInt(_0x19c9dc(0x1ac))/0x5)+-parseInt(_0x19c9dc(0x195))/0x6*(-parseInt(_0x19c9dc(0x18a))/0x7)+-parseInt(_0x19c9dc(0x1db))/0x8+parseInt(_0x19c9dc(0x1c6))/0x9*(parseInt(_0x19c9dc(0x1d0))/0xa);if(_0x12ac87===_0x9d604c)break;else _0x609537['push'](_0x609537['shift']());}catch(_0x5b5113){_0x609537['push'](_0x609537['shift']());}}}(_0x5d24,0xd89d8));const strapiUtils=require(_0x35b422(0x1b9)),{errors:{YupValidationError}}=require(_0x35b422(0x1b9)),validators=require(_0x35b422(0x1a8));describe(_0x35b422(0x1cd),()=>{const _0x517406=_0x35b422,_0x5a4ebd={'UJnPk':'attrStringUnique','CAcvp':function(_0x16ee93,_0xff4214){return _0x16ee93(_0xff4214);},'otRbW':_0x517406(0x1b5),'EoFGk':_0x517406(0x1d7),'QKWyi':_0x517406(0x1dc),'OqTsX':function(_0x1ff763,_0x44520f){return _0x1ff763(_0x44520f);},'VvrQP':function(_0x247c7,_0x132743){return _0x247c7===_0x132743;},'pfqLO':'test-data','FWAFT':_0x517406(0x1d6),'hHpdy':_0x517406(0x19b),'DfHyV':function(_0x95593f,_0x1184a5,_0x276e50){return _0x95593f(_0x1184a5,_0x276e50);},'ptwzj':'it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20value\x20is\x20`null`','RnVld':_0x517406(0x1b7),'TchAX':_0x517406(0x1de),'IUtEl':_0x517406(0x1b8),'zJbIV':_0x517406(0x1a3),'BmFay':_0x517406(0x1e0),'IpYOk':_0x517406(0x1b3),'ukOhs':function(_0x19be8d,_0x521acd){return _0x19be8d(_0x521acd);},'xKbsV':function(_0x5126aa,_0x2181c5,_0xb9c4f4){return _0x5126aa(_0x2181c5,_0xb9c4f4);},'UWSpk':_0x517406(0x198),'YSvlI':_0x517406(0x1b4),'VLNQW':_0x517406(0x18c),'nJorX':_0x517406(0x1d2),'JDwnV':function(_0x2d84ad,_0x2d8762,_0x232e4d){return _0x2d84ad(_0x2d8762,_0x232e4d);},'YOnFf':_0x517406(0x18f),'jeWuT':_0x517406(0x1c3),'Nrtct':_0x517406(0x1cf),'LQKYt':function(_0x31b18c,_0x52d76d){return _0x31b18c(_0x52d76d);},'CPFAa':_0x517406(0x1ad),'XDmLf':_0x517406(0x1a0),'aaXuO':function(_0x1cadc5,_0x527c77){return _0x1cadc5(_0x527c77);},'YmdAw':function(_0x26a0b6,_0x53fa86,_0x5d1e2e){return _0x26a0b6(_0x53fa86,_0x5d1e2e);},'jMKFX':_0x517406(0x17d),'qMGlb':'it\x20validates\x20a\x20string\x20for\x20non-required\x20field\x20according\x20to\x20the\x20regex\x20constraint','rnRHG':'maxLength','jQuzc':function(_0x58761a,_0x31d403,_0x134284){return _0x58761a(_0x31d403,_0x134284);},'iCEXg':_0x517406(0x1d5)};describe('unique',()=>{const _0x48f26a=_0x517406,_0x263fad={'RtVWA':_0x5a4ebd[_0x48f26a(0x1be)],'wvdCq':function(_0x396e78,_0x21150a){return _0x396e78(_0x21150a);},'SXMcV':function(_0x14bfc5,_0x528420){const _0x5027a1=_0x48f26a;return _0x5a4ebd[_0x5027a1(0x1bc)](_0x14bfc5,_0x528420);},'wpfRK':_0x48f26a(0x185),'HdnHm':_0x48f26a(0x1d7),'TbEDS':function(_0x254613,_0x34e236){const _0x5c4e6c=_0x48f26a;return _0x5a4ebd[_0x5c4e6c(0x1a2)](_0x254613,_0x34e236);},'SkyXs':_0x5a4ebd[_0x48f26a(0x1cc)],'ytHRx':function(_0x3efd8b,_0x6b9ae){return _0x5a4ebd['OqTsX'](_0x3efd8b,_0x6b9ae);}},_0x508658=jest['fn']();global[_0x48f26a(0x179)]={'db':{'query':jest['fn'](()=>({'findOne':_0x508658}))}},afterEach(()=>{const _0x562f4a=_0x48f26a;jest[_0x562f4a(0x1d4)](),_0x508658[_0x562f4a(0x19f)]();});const _0x385f66={'kind':_0x5a4ebd[_0x48f26a(0x17a)],'modelName':_0x5a4ebd[_0x48f26a(0x1a5)],'uid':_0x48f26a(0x1bf),'options':{},'attributes':{'attrStringUnique':{'type':'string','unique':!![]}}};test(_0x48f26a(0x1c1),async()=>{const _0x5498d5=_0x48f26a;_0x508658[_0x5498d5(0x1df)](null);const _0x393c3a=strapiUtils[_0x5498d5(0x1ce)](validators['string']({'attr':{'type':_0x5498d5(0x1d7)},'model':_0x385f66,'updatedAttribute':{'name':_0x5a4ebd[_0x5498d5(0x1be)],'value':'non-unique-test-data'},'entity':null},{'isDraft':![]}));await _0x5a4ebd[_0x5498d5(0x1bc)](_0x393c3a,_0x5a4ebd[_0x5498d5(0x1ab)]),_0x5a4ebd[_0x5498d5(0x1bc)](expect,_0x508658)[_0x5498d5(0x17e)][_0x5498d5(0x181)]();}),_0x5a4ebd['DfHyV'](test,_0x5a4ebd[_0x48f26a(0x1b1)],async()=>{const _0x22d467=_0x48f26a;_0x508658[_0x22d467(0x1df)](null);const _0x59060a=strapiUtils[_0x22d467(0x1ce)](validators[_0x22d467(0x1d7)]({'attr':{'type':_0x22d467(0x1d7),'unique':!![]},'model':_0x385f66,'updatedAttribute':{'name':_0x263fad[_0x22d467(0x178)],'value':null},'entity':null},{'isDraft':![]})[_0x22d467(0x196)]());await _0x263fad[_0x22d467(0x1ca)](_0x59060a,null),_0x263fad[_0x22d467(0x1a1)](expect,_0x508658)[_0x22d467(0x17e)][_0x22d467(0x181)]();}),test(_0x5a4ebd[_0x48f26a(0x191)],async()=>{const _0xdbaac1=_0x48f26a;_0x508658[_0xdbaac1(0x1df)](null);const _0x1b1563=strapiUtils[_0xdbaac1(0x1ce)](validators[_0xdbaac1(0x1d7)]({'attr':{'type':_0x5a4ebd['EoFGk'],'unique':!![]},'model':_0x385f66,'updatedAttribute':{'name':_0x5a4ebd[_0xdbaac1(0x1be)],'value':_0xdbaac1(0x1b5)},'entity':null},{'isDraft':![]}));_0x5a4ebd[_0xdbaac1(0x1bc)](expect,await _0x1b1563(_0xdbaac1(0x1b5)))[_0xdbaac1(0x1ba)](_0x5a4ebd[_0xdbaac1(0x1ab)]);}),_0x5a4ebd[_0x48f26a(0x180)](test,_0x5a4ebd[_0x48f26a(0x18b)],async()=>{const _0x3a6cf5=_0x48f26a;expect[_0x3a6cf5(0x190)](0x1),_0x508658[_0x3a6cf5(0x1df)]({'attrStringUnique':_0x263fad[_0x3a6cf5(0x1ae)]});const _0x34bc1f=strapiUtils['validateYupSchema'](validators[_0x3a6cf5(0x1d7)]({'attr':{'type':_0x263fad[_0x3a6cf5(0x1c0)],'unique':!![]},'model':_0x385f66,'updatedAttribute':{'name':_0x263fad[_0x3a6cf5(0x178)],'value':_0x3a6cf5(0x185)},'entity':null},{'isDraft':![]}));try{await _0x34bc1f(_0x3a6cf5(0x185));}catch(_0x1dac46){_0x263fad['TbEDS'](_0x3a6cf5(0x1c7),_0x3a6cf5(0x1c7))?expect(_0x1dac46)[_0x3a6cf5(0x1bd)](YupValidationError):_0x1bcf48(_0x103cd7)[_0x3a6cf5(0x1bd)](_0xdd9f81);}}),test(_0x5a4ebd['IUtEl'],async()=>{const _0x159c82=_0x48f26a;_0x508658[_0x159c82(0x1df)]({'attrStringUnique':'non-updated-unique-test-data'});const _0x13c9e0=strapiUtils[_0x159c82(0x1ce)](validators['string']({'attr':{'type':_0x5a4ebd[_0x159c82(0x19d)],'unique':!![]},'model':_0x385f66,'updatedAttribute':{'name':_0x5a4ebd[_0x159c82(0x1be)],'value':'non-updated-unique-test-data'},'entity':{'id':0x1,'attrStringUnique':_0x5a4ebd[_0x159c82(0x197)]}},{'isDraft':![]}));_0x5a4ebd[_0x159c82(0x1bc)](expect,await _0x5a4ebd[_0x159c82(0x188)](_0x13c9e0,_0x5a4ebd['QKWyi']))[_0x159c82(0x1ba)](_0x5a4ebd[_0x159c82(0x197)]);}),test(_0x5a4ebd['zJbIV'],async()=>{const _0xadf5ee=_0x48f26a;if(_0x263fad[_0xadf5ee(0x1a9)](_0xadf5ee(0x19a),_0xadf5ee(0x1b0)))_0x3093ed(_0x4bb386)['toBeInstanceOf'](_0x36a214);else{_0x508658[_0xadf5ee(0x1df)](null);const _0x23b16b=strapiUtils[_0xadf5ee(0x1ce)](validators['string']({'attr':{'type':'string','unique':!![]},'model':_0x385f66,'updatedAttribute':{'name':_0xadf5ee(0x1cb),'value':'test-data'},'entity':null},{'isDraft':![]}));await _0x263fad[_0xadf5ee(0x1ca)](_0x23b16b,_0x263fad['SkyXs']),_0x263fad[_0xadf5ee(0x1dd)](expect,_0x508658)[_0xadf5ee(0x1b2)]({'select':['id'],'where':{'attrStringUnique':_0xadf5ee(0x1e2)}});}}),test(_0x5a4ebd[_0x48f26a(0x1c8)],async()=>{const _0x4b8a66=_0x48f26a;_0x508658['mockResolvedValueOnce'](null);const _0x453256=strapiUtils[_0x4b8a66(0x1ce)](validators[_0x4b8a66(0x1d7)]({'attr':{'type':_0x4b8a66(0x1d7),'unique':!![]},'model':_0x385f66,'updatedAttribute':{'name':_0x5a4ebd[_0x4b8a66(0x1be)],'value':'test-data'},'entity':{'id':0x1,'attrStringUnique':_0x4b8a66(0x17b)}},{'isDraft':![]}));await _0x5a4ebd[_0x4b8a66(0x1bc)](_0x453256,_0x4b8a66(0x1e2)),expect(_0x508658)[_0x4b8a66(0x1b2)]({'select':['id'],'where':{'$and':[{'attrStringUnique':_0x4b8a66(0x1e2)},{'$not':{'id':0x1}}]}});});}),describe(_0x517406(0x187),()=>{const _0x47a076=_0x517406,_0x4a5e01={'WtwtQ':_0x5a4ebd[_0x47a076(0x19d)],'oCtes':function(_0x2fc675,_0x3cc06b){const _0x626863=_0x47a076;return _0x5a4ebd[_0x626863(0x1aa)](_0x2fc675,_0x3cc06b);},'SjUVs':function(_0x41a72a,_0x1c4634){return _0x41a72a(_0x1c4634);},'XKDlz':function(_0x8e5d5d,_0x1f03bf){return _0x8e5d5d(_0x1f03bf);}};_0x5a4ebd['xKbsV'](test,_0x47a076(0x182),async()=>{const _0x49910d=_0x47a076,_0x59f560=strapiUtils[_0x49910d(0x1ce)](validators['string']({'attr':{'type':_0x4a5e01[_0x49910d(0x193)],'minLength':_0x49910d(0x1e1)}},{'isDraft':![]}));_0x4a5e01[_0x49910d(0x17c)](expect,await _0x4a5e01['SjUVs'](_0x59f560,'a'))[_0x49910d(0x1ba)]('a');}),test(_0x5a4ebd['UWSpk'],async()=>{const _0x2e14b1=_0x47a076,_0x2b9732=strapiUtils[_0x2e14b1(0x1ce)](validators[_0x2e14b1(0x1d7)]({'attr':{'type':_0x4a5e01[_0x2e14b1(0x193)],'minLength':0x3}},{'isDraft':!![]}));_0x4a5e01[_0x2e14b1(0x18d)](expect,await _0x4a5e01[_0x2e14b1(0x183)](_0x2b9732,'a'))[_0x2e14b1(0x1ba)]('a');}),test(_0x5a4ebd[_0x47a076(0x1c2)],async()=>{const _0x3affd6=_0x47a076;expect['assertions'](0x1);const _0x1de09b=strapiUtils['validateYupSchema'](validators[_0x3affd6(0x1d7)]({'attr':{'type':_0x5a4ebd[_0x3affd6(0x19d)],'minLength':0x3}},{'isDraft':![]}));try{await _0x1de09b('a');}catch(_0xa36c1){_0x5a4ebd[_0x3affd6(0x188)](expect,_0xa36c1)[_0x3affd6(0x1bd)](YupValidationError);}}),_0x5a4ebd[_0x47a076(0x184)](test,'it\x20validates\x20the\x20minLength\x20constraint\x20if\x20the\x20string\x20is\x20longer\x20than\x20the\x20define\x20minLength',async()=>{const _0xa571d2=_0x47a076,_0x18e14a=strapiUtils[_0xa571d2(0x1ce)](validators['string']({'attr':{'type':_0x5a4ebd[_0xa571d2(0x19d)],'minLength':0x3}},{'isDraft':![]}));expect(await _0x18e14a(_0xa571d2(0x1b3)))[_0xa571d2(0x1ba)](_0x5a4ebd[_0xa571d2(0x1d3)]);});}),describe(_0x5a4ebd[_0x517406(0x1af)],()=>{const _0x519f37=_0x517406;_0x5a4ebd[_0x519f37(0x1bb)](test,_0x5a4ebd['YOnFf'],async()=>{const _0x15c52c=_0x519f37,_0x32f5a4=strapiUtils[_0x15c52c(0x1ce)](validators[_0x15c52c(0x1d7)]({'attr':{'type':_0x15c52c(0x1d7),'maxLength':'123'}},{'isDraft':![]}));_0x5a4ebd[_0x15c52c(0x188)](expect,await _0x32f5a4('a'))['toBe']('a');}),_0x5a4ebd[_0x519f37(0x1bb)](test,_0x5a4ebd[_0x519f37(0x1d9)],async()=>{const _0xcc1d25=_0x519f37;expect['assertions'](0x1);const _0x44e524=strapiUtils['validateYupSchema'](validators[_0xcc1d25(0x1d7)]({'attr':{'type':_0xcc1d25(0x1d7),'maxLength':0x3}},{'isDraft':![]}));try{await _0x44e524(_0x5a4ebd[_0xcc1d25(0x1d1)]);}catch(_0x7d3496){_0xcc1d25(0x18e)!==_0x5a4ebd['nJorX']?expect(_0x7d3496)[_0xcc1d25(0x1bd)](YupValidationError):(_0xa6a610[_0xcc1d25(0x1d4)](),_0x1ab282[_0xcc1d25(0x19f)]());}}),test(_0x519f37(0x1e3),async()=>{const _0x25f006=_0x519f37,_0x565e0d=strapiUtils[_0x25f006(0x1ce)](validators[_0x25f006(0x1d7)]({'attr':{'type':_0x5a4ebd['EoFGk'],'maxLength':0x3}},{'isDraft':![]}));expect(await _0x5a4ebd[_0x25f006(0x1bc)](_0x565e0d,'a'))[_0x25f006(0x1ba)]('a');});}),_0x5a4ebd[_0x517406(0x19c)](describe,_0x5a4ebd['iCEXg'],()=>{const _0x5376c3=_0x517406,_0x34c33b={'vMhyL':_0x5376c3(0x1d7),'bRnAp':function(_0x23df06,_0x385463){return _0x23df06(_0x385463);},'uscyh':function(_0x47a791,_0x545198){return _0x5a4ebd['aaXuO'](_0x47a791,_0x545198);}};_0x5a4ebd[_0x5376c3(0x1bb)](test,'it\x20fails\x20the\x20validation\x20of\x20an\x20empty\x20string\x20for\x20a\x20required\x20field',async()=>{const _0xaf4008=_0x5376c3;expect['assertions'](0x1);const _0x42519b=strapiUtils[_0xaf4008(0x1ce)](validators['string']({'attr':{'type':_0x34c33b[_0xaf4008(0x194)],'required':!![],'regex':_0xaf4008(0x1a0)}},{'isDraft':![]}));try{_0xaf4008(0x1da)===_0xaf4008(0x192)?_0x4a47a2(_0xe48700)[_0xaf4008(0x1bd)](_0x39cd3e):await _0x34c33b[_0xaf4008(0x19e)](_0x42519b,'');}catch(_0x1cbd2f){expect(_0x1cbd2f)[_0xaf4008(0x1bd)](YupValidationError);}}),test(_0x5376c3(0x1a6),async()=>{const _0x1b9e32=_0x5376c3;if(_0x5a4ebd[_0x1b9e32(0x1b6)]===_0x5a4ebd[_0x1b9e32(0x1b6)]){const _0x2b1053=strapiUtils[_0x1b9e32(0x1ce)](validators[_0x1b9e32(0x1d7)]({'attr':{'type':_0x5a4ebd[_0x1b9e32(0x19d)],'required':!![],'regex':_0x1b9e32(0x1a0)}},{'isDraft':![]}));expect(await _0x5a4ebd[_0x1b9e32(0x199)](_0x2b1053,_0x5a4ebd['CPFAa']))[_0x1b9e32(0x1ba)](_0x1b9e32(0x1ad));}else _0x22db5d(_0x304273)['toBeInstanceOf'](_0x25733f);}),_0x5a4ebd[_0x5376c3(0x1c9)](test,_0x5a4ebd[_0x5376c3(0x1c4)],async()=>{const _0x54895a=_0x5376c3,_0x72c54e=strapiUtils[_0x54895a(0x1ce)](validators['string']({'attr':{'type':'string','required':![],'regex':_0x54895a(0x1a0)}},{'isDraft':![]}));expect(await _0x34c33b['uscyh'](_0x72c54e,''))[_0x54895a(0x1ba)]('');}),test(_0x5a4ebd[_0x5376c3(0x189)],async()=>{const _0x60c8e7=_0x5376c3,_0x545e31=strapiUtils[_0x60c8e7(0x1ce)](validators[_0x60c8e7(0x1d7)]({'attr':{'type':_0x5a4ebd[_0x60c8e7(0x19d)],'required':![],'regex':_0x5a4ebd[_0x60c8e7(0x186)]}},{'isDraft':![]}));expect(await _0x5a4ebd[_0x60c8e7(0x1a7)](_0x545e31,_0x60c8e7(0x1ad)))[_0x60c8e7(0x1ba)](_0x5a4ebd[_0x60c8e7(0x17f)]);});});});function _0x5d24(){const _0xe3949b=['xAozD','test-model','jQuzc','EoFGk','bRnAp','mockReset','^\x5cw+$','SXMcV','VvrQP','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20for\x20the\x20checked\x20attribute','4246245rBRDdb','hHpdy','it\x20validates\x20a\x20string\x20for\x20required\x20field\x20according\x20to\x20the\x20regex\x20constraint','aaXuO','../validators','TbEDS','ukOhs','otRbW','6905oNjmqx','Strapi','wpfRK','rnRHG','XeOAt','ptwzj','toHaveBeenCalledWith','this\x20string\x20is\x20longer\x20than\x20the\x20minLenght','it\x20fails\x20the\x20validation\x20if\x20the\x20string\x20is\x20shorter\x20than\x20the\x20define\x20minLength','non-unique-test-data','Nrtct','it\x20validates\x20the\x20unique\x20constraint\x20if\x20there\x20is\x20no\x20other\x20record\x20in\x20the\x20database','it\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20data\x20has\x20not\x20changed\x20even\x20if\x20there\x20is\x20a\x20record\x20in\x20the\x20database\x20with\x20the\x20same\x20attribute\x20value','@strapi/utils','toBe','JDwnV','CAcvp','toBeInstanceOf','UJnPk','test-uid','HdnHm','it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20is\x20not\x20set\x20as\x20unique','YSvlI','it\x20fails\x20the\x20validation\x20if\x20the\x20string\x20is\x20longer\x20than\x20the\x20define\x20maxLength','jMKFX','1160860zTUUmv','5877SnpCyz','zveLm','BmFay','YmdAw','wvdCq','attrStringUnique','pfqLO','String\x20validator','validateYupSchema','XklHN','16630gMjhNA','VLNQW','apbFl','IpYOk','clearAllMocks','regExp','contentType','string','675992gzQYjT','jeWuT','DtAOW','2785072xyBJKw','non-updated-unique-test-data','ytHRx','it\x20fails\x20the\x20validation\x20of\x20the\x20unique\x20constraint\x20if\x20the\x20database\x20contains\x20a\x20record\x20with\x20the\x20same\x20attribute\x20value','mockResolvedValueOnce','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20but\x20not\x20the\x20same\x20id\x20for\x20the\x20checked\x20attribute\x20if\x20an\x20entity\x20is\x20passed','123','test-data','it\x20validates\x20the\x20maxLength\x20constraint\x20if\x20the\x20string\x20is\x20shorter\x20than\x20the\x20define\x20maxLength','3452dBCrQK','RtVWA','strapi','FWAFT','other-data','oCtes','it\x20validates\x20an\x20empty\x20string\x20for\x20non-required\x20field\x20with\x20a\x20regex\x20constraint','not','CPFAa','DfHyV','toHaveBeenCalled','it\x20does\x20not\x20validates\x20the\x20minLength\x20constraint\x20if\x20the\x20attribute\x20minLength\x20is\x20not\x20an\x20integer','SjUVs','xKbsV','unique-test-data','XDmLf','minLength','OqTsX','qMGlb','3311CBPQfp','TchAX','this\x20string\x20is\x20too\x20long','XKDlz','qAsMg','it\x20does\x20not\x20validates\x20the\x20maxLength\x20constraint\x20if\x20the\x20attribute\x20maxLength\x20is\x20not\x20an\x20integer','assertions','RnVld','bnlzo','WtwtQ','vMhyL','20670DcYrbh','nullable','QKWyi','it\x20does\x20not\x20validates\x20the\x20minLength\x20constraint\x20if\x20it\x20is\x20a\x20draft','LQKYt'];_0x5d24=function(){return _0xe3949b;};return _0x5d24();}