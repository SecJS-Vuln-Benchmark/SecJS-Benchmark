'use strict';function _0x4504(){const _0x7501d4=['twdgw','test-model','7185546TYfpVy','string','Do\x20not\x20emit\x20event\x20when\x20no\x20deleted\x20entity','ZfotR','hzVMd','emit','entry.create','6381011OPqPhx','430leMAdp','toHaveBeenCalledTimes','RoKXS','toHaveBeenCalledWith','yBGny','oTHQq','mKoEv','748141axXUTj','entity-id','entry.update','uKtRx','Emit\x20event:\x20Delete','delete','api::test.test','singleType','2JIsAkF','Emit\x20event:\x20Delete\x20Many','4UCHQBY','create','value','EJcCo','InQLI','update','svvfb','11077320iUPhcE','1391210VqKUxw','ijTft','mockClear','197199YWlANz','1353669cgBBAA'];_0x4504=function(){return _0x7501d4;};return _0x4504();}function _0x142d(_0x7a2497,_0x38f876){const _0x45047b=_0x4504();return _0x142d=function(_0x142dfe,_0x5d972b){_0x142dfe=_0x142dfe-0x6f;let _0x31f62b=_0x45047b[_0x142dfe];return _0x31f62b;},_0x142d(_0x7a2497,_0x38f876);}(function(_0xbd7567,_0x10ff64){const _0x5783f3=_0x142d,_0xe495c1=_0xbd7567();while(!![]){try{const _0x51d2ba=-parseInt(_0x5783f3(0x70))/0x1*(parseInt(_0x5783f3(0x78))/0x2)+parseInt(_0x5783f3(0x86))/0x3*(parseInt(_0x5783f3(0x7a))/0x4)+parseInt(_0x5783f3(0x82))/0x5+parseInt(_0x5783f3(0x89))/0x6+-parseInt(_0x5783f3(0x90))/0x7+parseInt(_0x5783f3(0x81))/0x8+-parseInt(_0x5783f3(0x85))/0x9*(parseInt(_0x5783f3(0x91))/0xa);if(_0x51d2ba===_0x10ff64)break;else _0xe495c1['push'](_0xe495c1['shift']());}catch(_0x5597d4){_0xe495c1['push'](_0xe495c1['shift']());}}}(_0x4504,0xad4ca));const createEntityService=require('..'),entityValidator=require('../../entity-validator');describe('Entity\x20service\x20triggers\x20webhooks',()=>{const _0x635998=_0x142d,_0x3054f7={'twdgw':'api::test.test','uKtRx':'test-model','ZfotR':function(_0x58470b,_0x586caf){return _0x58470b(_0x586caf);},'InQLI':_0x635998(0x71),'RoKXS':_0x635998(0x72),'EJcCo':function(_0x168e25,_0x163ae3){return _0x168e25(_0x163ae3);},'svvfb':'entry.delete','mKoEv':_0x635998(0x7c),'vdwlI':function(_0x54904d,_0x34ee46){return _0x54904d(_0x34ee46);},'hzVMd':function(_0x4e100e,_0x54d254,_0x1c45cc){return _0x4e100e(_0x54d254,_0x1c45cc);},'ijTft':'Emit\x20event:\x20Create','CBpEX':function(_0x8b3feb,_0x1a7aa0,_0x463b16){return _0x8b3feb(_0x1a7aa0,_0x463b16);},'yBGny':_0x635998(0x74),'oTHQq':_0x635998(0x79),'oopwD':_0x635998(0x8b)};let _0x5d56fd;const _0x337b6c={'emit':jest['fn']()};let _0x4eaede={'attr':_0x3054f7[_0x635998(0x6f)]};_0x3054f7['vdwlI'](beforeAll,()=>{const _0x1a706a=_0x635998,_0x4bfc03={'uid':_0x3054f7[_0x1a706a(0x87)],'kind':_0x1a706a(0x77),'modelName':'test-model','attributes':{'attr':{'type':_0x1a706a(0x8a)}}};_0x5d56fd=createEntityService({'strapi':{'getModel':()=>_0x4bfc03},'db':{'transaction':_0x1299e0=>_0x1299e0(),'query':()=>({'count':()=>0x0,'create':({data:_0x52bdc7})=>_0x52bdc7,'update':({data:_0x393498})=>_0x393498,'findOne':()=>_0x4eaede,'findMany':()=>[_0x4eaede,_0x4eaede],'delete':()=>({}),'deleteMany':()=>({})})},'eventHub':_0x337b6c,'entityValidator':entityValidator}),global['strapi']={'getModel':()=>_0x4bfc03,'config':{'get':()=>[]}};}),_0x3054f7[_0x635998(0x8d)](test,_0x3054f7[_0x635998(0x83)],async()=>{const _0x42b990=_0x635998;await _0x5d56fd[_0x42b990(0x7b)](_0x3054f7[_0x42b990(0x73)],{'data':_0x4eaede}),_0x3054f7[_0x42b990(0x8c)](expect,_0x337b6c[_0x42b990(0x8e)])[_0x42b990(0x94)](_0x42b990(0x8f),{'entry':_0x4eaede,'model':_0x42b990(0x88),'uid':_0x42b990(0x76)}),_0x337b6c[_0x42b990(0x8e)][_0x42b990(0x84)]();}),test('Emit\x20event:\x20Update',async()=>{const _0x178c13=_0x635998;await _0x5d56fd[_0x178c13(0x7f)](_0x3054f7[_0x178c13(0x73)],_0x3054f7[_0x178c13(0x7e)],{'data':_0x4eaede}),_0x3054f7[_0x178c13(0x8c)](expect,_0x337b6c[_0x178c13(0x8e)])[_0x178c13(0x94)](_0x3054f7[_0x178c13(0x93)],{'entry':_0x4eaede,'model':_0x3054f7[_0x178c13(0x73)],'uid':'api::test.test'}),_0x337b6c[_0x178c13(0x8e)][_0x178c13(0x84)]();}),_0x3054f7['CBpEX'](test,_0x3054f7[_0x635998(0x95)],async()=>{const _0x4a77ad=_0x635998;await _0x5d56fd[_0x4a77ad(0x75)](_0x4a77ad(0x88),'entity-id',{}),_0x3054f7[_0x4a77ad(0x7d)](expect,_0x337b6c[_0x4a77ad(0x8e)])[_0x4a77ad(0x94)](_0x3054f7[_0x4a77ad(0x80)],{'entry':_0x4eaede,'model':_0x3054f7['uKtRx'],'uid':'api::test.test'}),_0x337b6c[_0x4a77ad(0x8e)][_0x4a77ad(0x84)]();}),test(_0x3054f7[_0x635998(0x96)],async()=>{const _0x16b2e9=_0x635998;await _0x5d56fd['deleteMany'](_0x3054f7['uKtRx'],{}),expect(_0x337b6c['emit'])['toHaveBeenCalledWith'](_0x3054f7[_0x16b2e9(0x80)],{'entry':_0x4eaede,'model':_0x3054f7[_0x16b2e9(0x73)],'uid':_0x16b2e9(0x76)}),expect(_0x337b6c[_0x16b2e9(0x8e)])[_0x16b2e9(0x92)](0x2),_0x337b6c[_0x16b2e9(0x8e)][_0x16b2e9(0x84)]();}),test(_0x3054f7['oopwD'],async()=>{const _0x217207=_0x635998;_0x4eaede=null,await _0x5d56fd[_0x217207(0x75)](_0x217207(0x88),'entity-id',{}),_0x3054f7[_0x217207(0x8c)](expect,_0x337b6c[_0x217207(0x8e)])['toHaveBeenCalledTimes'](0x0),_0x337b6c[_0x217207(0x8e)][_0x217207(0x84)]();});});