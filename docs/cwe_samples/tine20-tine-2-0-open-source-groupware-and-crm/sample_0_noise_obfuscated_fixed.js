'use strict';function _0x2882(){const _0x38445=['toBeInstanceOf','iafkp','DPlAn','cTSvo','TyNou','it\x20fails\x20the\x20validation\x20if\x20the\x20number\x20is\x20integer\x20than\x20the\x20define\x20max','LRWYg','test-uid','14052220HZatAi','AhoZO','sPeIC','strapi','IRyNL','Integer\x20validator','mockResolvedValueOnce','6wqttIg','nullable','IbcGj','1344125gCnBkg','wbSqz','it\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20data\x20has\x20not\x20changed\x20even\x20if\x20there\x20is\x20a\x20record\x20in\x20the\x20database\x20with\x20the\x20same\x20attribute\x20value','Oymvs','TJZWh','integer','xFHJJ','it\x20validates\x20the\x20unique\x20constraint\x20if\x20there\x20is\x20no\x20other\x20record\x20in\x20the\x20database','toBe','iDzdQ','it\x20does\x20not\x20validates\x20the\x20max\x20constraint\x20if\x20the\x20attribute\x20max\x20is\x20not\x20an\x20integer','SdaoZ','toHaveBeenCalledWith','contentType','TgAyr','LwzES','1223635MPdSKy','40657DglwUS','12724614XTSYNu','oacfx','OBNPS','rvYWP','assertions','min','123','vXyQv','it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20but\x20not\x20the\x20same\x20id\x20for\x20the\x20checked\x20attribute\x20if\x20an\x20entity\x20is\x20passed','unique','obasZ','4ovSiwL','7670072DQypku','attrIntegerUnique','28CazgYX','max','DzWVV','Fwhyx','WWOtc','clAxh','mockReset','5461161uJHqwT','@strapi/utils','xZXVt','validateYupSchema','not','it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20is\x20not\x20set\x20as\x20unique'];_0x2882=function(){return _0x38445;};return _0x2882();}const _0x552aac=_0x3d5e;(function(_0x14d372,_0x15326f){const _0xc89f87=_0x3d5e,_0x24ac46=_0x14d372();while(!![]){try{const _0x50cd8c=parseInt(_0xc89f87(0x1a3))/0x1*(-parseInt(_0xc89f87(0x1b2))/0x2)+parseInt(_0xc89f87(0x1b9))/0x3*(-parseInt(_0xc89f87(0x1af))/0x4)+-parseInt(_0xc89f87(0x192))/0x5+-parseInt(_0xc89f87(0x18f))/0x6*(parseInt(_0xc89f87(0x1a2))/0x7)+parseInt(_0xc89f87(0x1b0))/0x8+parseInt(_0xc89f87(0x1a4))/0x9+parseInt(_0xc89f87(0x188))/0xa;if(_0x50cd8c===_0x15326f)break;else _0x24ac46['push'](_0x24ac46['shift']());}catch(_0x440be4){_0x24ac46['push'](_0x24ac46['shift']());}}}(_0x2882,0xe69e4));const strapiUtils=require(_0x552aac(0x1ba)),{errors:{YupValidationError}}=require(_0x552aac(0x1ba)),validators=require('../validators');function _0x3d5e(_0x5d29e2,_0x50a3a3){const _0x28821e=_0x2882();return _0x3d5e=function(_0x3d5e0a,_0x529b93){_0x3d5e0a=_0x3d5e0a-0x182;let _0x19d04f=_0x28821e[_0x3d5e0a];return _0x19d04f;},_0x3d5e(_0x5d29e2,_0x50a3a3);}describe(_0x552aac(0x18d),()=>{const _0x2895a2=_0x552aac,_0x5b8b35={'Oymvs':_0x2895a2(0x197),'wbSqz':_0x2895a2(0x1b1),'DzWVV':function(_0x14dbec,_0x39def2){return _0x14dbec(_0x39def2);},'IbcGj':function(_0x14f8b8,_0x27a320){return _0x14f8b8(_0x27a320);},'cTSvo':function(_0x453ea6,_0x522a19){return _0x453ea6(_0x522a19);},'IRyNL':function(_0x412d23,_0x33aac7){return _0x412d23(_0x33aac7);},'Fwhyx':function(_0x22bb48,_0x2a7821){return _0x22bb48(_0x2a7821);},'BNWCo':_0x2895a2(0x19f),'iDzdQ':function(_0x28de69,_0x3713b1,_0x16e584){return _0x28de69(_0x3713b1,_0x16e584);},'rvYWP':'it\x20does\x20not\x20validates\x20the\x20unique\x20constraint\x20if\x20the\x20attribute\x20value\x20is\x20`null`','sPeIC':function(_0x162ed7,_0x533294,_0x4c72e1){return _0x162ed7(_0x533294,_0x4c72e1);},'TgAyr':_0x2895a2(0x194),'QzoFx':'it\x20checks\x20the\x20database\x20for\x20records\x20with\x20the\x20same\x20value\x20for\x20the\x20checked\x20attribute','iafkp':_0x2895a2(0x1ac),'CzbxF':function(_0x32d473,_0x3f72aa){return _0x32d473(_0x3f72aa);},'oacfx':function(_0x5ae9ca,_0x2f1cf0){return _0x5ae9ca(_0x2f1cf0);},'LwzES':function(_0x63a010,_0x2eb9af){return _0x63a010(_0x2eb9af);},'xZXVt':'it\x20does\x20not\x20validates\x20the\x20min\x20constraint\x20if\x20the\x20attribute\x20min\x20is\x20not\x20a\x20number','AhoZO':'it\x20fails\x20the\x20validation\x20if\x20the\x20integer\x20is\x20lower\x20than\x20the\x20define\x20min','DYXZE':'it\x20validates\x20the\x20min\x20constraint\x20if\x20the\x20integer\x20is\x20higher\x20than\x20the\x20define\x20min','OBNPS':'123','TJZWh':function(_0x351143,_0x3268f8,_0x4f5972){return _0x351143(_0x3268f8,_0x4f5972);}};describe(_0x2895a2(0x1ad),()=>{const _0x204884=_0x2895a2,_0x57bbea={'uBwsE':_0x204884(0x197),'obasZ':_0x5b8b35[_0x204884(0x193)],'LRWYg':function(_0x4b1bd2,_0x2ba867){return _0x5b8b35['Fwhyx'](_0x4b1bd2,_0x2ba867);},'clAxh':function(_0x36f885,_0x482dc7){return _0x36f885(_0x482dc7);},'SdaoZ':function(_0x38e260,_0x15329a){return _0x38e260(_0x15329a);},'xFHJJ':function(_0x205bfc,_0x4bbb2e){return _0x205bfc(_0x4bbb2e);}},_0x4e22cc=jest['fn']();global[_0x204884(0x18b)]={'db':{'query':jest['fn'](()=>({'findOne':_0x4e22cc}))}},_0x5b8b35['IRyNL'](afterEach,()=>{const _0x274636=_0x204884;jest['clearAllMocks'](),_0x4e22cc[_0x274636(0x1b8)]();});const _0x7b4b50={'kind':_0x5b8b35['BNWCo'],'uid':_0x204884(0x187),'modelName':'test-model','options':{},'attributes':{'attrIntegerUnique':{'type':_0x204884(0x197),'unique':!![]}}};_0x5b8b35[_0x204884(0x19b)](test,_0x204884(0x1be),async()=>{const _0x2dbee6=_0x204884;_0x4e22cc[_0x2dbee6(0x18e)](null);const _0x1dff63=strapiUtils[_0x2dbee6(0x1bc)](validators['integer']({'attr':{'type':_0x5b8b35[_0x2dbee6(0x195)]},'model':_0x7b4b50,'updatedAttribute':{'name':_0x5b8b35[_0x2dbee6(0x193)],'value':0x1},'entity':null},{'isDraft':![]}));await _0x1dff63(0x1),expect(_0x4e22cc)[_0x2dbee6(0x1bd)]['toHaveBeenCalled']();}),test(_0x5b8b35[_0x204884(0x1a7)],async()=>{const _0x2cfd3e=_0x204884;_0x4e22cc['mockResolvedValueOnce'](null);const _0x4ccde5=strapiUtils[_0x2cfd3e(0x1bc)](validators[_0x2cfd3e(0x197)]({'attr':{'type':_0x5b8b35[_0x2cfd3e(0x195)],'unique':!![]},'model':_0x7b4b50,'updatedAttribute':{'name':_0x2cfd3e(0x1b1),'value':null},'entity':null},{'isDraft':![]})[_0x2cfd3e(0x190)]());await _0x5b8b35[_0x2cfd3e(0x1b4)](_0x4ccde5,null),_0x5b8b35[_0x2cfd3e(0x191)](expect,_0x4e22cc)[_0x2cfd3e(0x1bd)]['toHaveBeenCalled']();}),_0x5b8b35[_0x204884(0x18a)](test,_0x204884(0x199),async()=>{const _0x2baf00=_0x204884;_0x4e22cc['mockResolvedValueOnce'](null);const _0x3b5532=strapiUtils[_0x2baf00(0x1bc)](validators[_0x2baf00(0x197)]({'attr':{'type':_0x5b8b35['Oymvs'],'unique':!![]},'model':_0x7b4b50,'updatedAttribute':{'name':_0x5b8b35[_0x2baf00(0x193)],'value':0x2},'entity':null},{'isDraft':![]}));expect(await _0x5b8b35[_0x2baf00(0x183)](_0x3b5532,0x1))[_0x2baf00(0x19a)](0x1);}),test('it\x20fails\x20the\x20validation\x20of\x20the\x20unique\x20constraint\x20if\x20the\x20database\x20contains\x20a\x20record\x20with\x20the\x20same\x20attribute\x20value',async()=>{const _0x1a2250=_0x204884;expect[_0x1a2250(0x1a8)](0x1),_0x4e22cc[_0x1a2250(0x18e)]({'attrIntegerUnique':0x2});const _0x185bcb=strapiUtils['validateYupSchema'](validators[_0x1a2250(0x197)]({'attr':{'type':_0x57bbea['uBwsE'],'unique':!![]},'model':_0x7b4b50,'updatedAttribute':{'name':_0x57bbea[_0x1a2250(0x1ae)],'value':0x2},'entity':null},{'isDraft':![]}));try{await _0x57bbea['LRWYg'](_0x185bcb,0x2);}catch(_0x25cae8){_0x57bbea[_0x1a2250(0x186)](expect,_0x25cae8)['toBeInstanceOf'](YupValidationError);}}),test(_0x5b8b35[_0x204884(0x1a0)],async()=>{const _0x39b823=_0x204884;_0x4e22cc['mockResolvedValueOnce']({'attrIntegerUnique':0x3});const _0x1184f6=strapiUtils[_0x39b823(0x1bc)](validators[_0x39b823(0x197)]({'attr':{'type':_0x39b823(0x197),'unique':!![]},'model':_0x7b4b50,'updatedAttribute':{'name':_0x57bbea[_0x39b823(0x1ae)],'value':0x3},'entity':{'id':0x1,'attrIntegerUnique':0x3}},{'isDraft':![]}));_0x57bbea[_0x39b823(0x1b7)](expect,await _0x57bbea[_0x39b823(0x19d)](_0x1184f6,0x3))['toBe'](0x3);}),test(_0x5b8b35['QzoFx'],async()=>{const _0x48701a=_0x204884;_0x4e22cc['mockResolvedValueOnce'](null);const _0x40953e=strapiUtils[_0x48701a(0x1bc)](validators['integer']({'attr':{'type':_0x48701a(0x197),'unique':!![]},'model':_0x7b4b50,'updatedAttribute':{'name':_0x57bbea[_0x48701a(0x1ae)],'value':0x4},'entity':null},{'isDraft':![]}));await _0x57bbea[_0x48701a(0x19d)](_0x40953e,0x4),_0x57bbea[_0x48701a(0x198)](expect,_0x4e22cc)['toHaveBeenCalledWith']({'select':['id'],'where':{'attrIntegerUnique':0x4}});}),test(_0x5b8b35[_0x204884(0x1c0)],async()=>{const _0x3007cb=_0x204884;_0x4e22cc[_0x3007cb(0x18e)](null);const _0x12e02d=strapiUtils[_0x3007cb(0x1bc)](validators[_0x3007cb(0x197)]({'attr':{'type':_0x5b8b35[_0x3007cb(0x195)],'unique':!![]},'model':_0x7b4b50,'updatedAttribute':{'name':_0x5b8b35[_0x3007cb(0x193)],'value':0x5},'entity':{'id':0x1,'attrIntegerUnique':0x2a}},{'isDraft':![]}));await _0x5b8b35[_0x3007cb(0x18c)](_0x12e02d,0x5),expect(_0x4e22cc)[_0x3007cb(0x19e)]({'select':['id'],'where':{'$and':[{'attrIntegerUnique':0x5},{'$not':{'id':0x1}}]}});});}),_0x5b8b35[_0x2895a2(0x18a)](describe,_0x2895a2(0x1a9),()=>{const _0x4b7dd7=_0x2895a2,_0x2111c7={'WWOtc':_0x5b8b35['Oymvs'],'BRQzC':function(_0xc45875,_0x512de3){const _0x4c604c=_0x3d5e;return _0x5b8b35[_0x4c604c(0x1a5)](_0xc45875,_0x512de3);},'TyNou':function(_0x5c2e36,_0x4c599c){const _0x8555e5=_0x3d5e;return _0x5b8b35[_0x8555e5(0x1a1)](_0x5c2e36,_0x4c599c);}};test(_0x5b8b35[_0x4b7dd7(0x1bb)],async()=>{const _0x26c0b8=_0x4b7dd7,_0x11cc1f=strapiUtils['validateYupSchema'](validators[_0x26c0b8(0x197)]({'attr':{'type':_0x2111c7[_0x26c0b8(0x1b6)],'minLength':_0x26c0b8(0x1aa)}},{'isDraft':![]}));_0x2111c7['BRQzC'](expect,await _0x11cc1f(0x1))[_0x26c0b8(0x19a)](0x1);}),test(_0x5b8b35[_0x4b7dd7(0x189)],async()=>{const _0xf9ce63=_0x4b7dd7;expect['assertions'](0x1);const _0x1bebd2=strapiUtils[_0xf9ce63(0x1bc)](validators[_0xf9ce63(0x197)]({'attr':{'type':'integer','min':0x3}},{'isDraft':![]}));try{await _0x5b8b35['CzbxF'](_0x1bebd2,0x1);}catch(_0x56e0f7){_0x5b8b35[_0xf9ce63(0x1b5)](expect,_0x56e0f7)[_0xf9ce63(0x1bf)](YupValidationError);}}),test(_0x5b8b35['DYXZE'],async()=>{const _0x166425=_0x4b7dd7,_0x5b48c2=strapiUtils['validateYupSchema'](validators[_0x166425(0x197)]({'attr':{'type':_0x166425(0x197),'min':0x3}},{'isDraft':![]}));_0x2111c7['BRQzC'](expect,await _0x2111c7[_0x166425(0x184)](_0x5b48c2,0x4))[_0x166425(0x19a)](0x4);});}),describe(_0x2895a2(0x1b3),()=>{const _0x1f912b=_0x2895a2,_0x4ff19c={'DPlAn':_0x5b8b35[_0x1f912b(0x1a6)],'vXyQv':function(_0x15c7b5,_0x1bb456){const _0x228c16=_0x1f912b;return _0x5b8b35[_0x228c16(0x1a5)](_0x15c7b5,_0x1bb456);}};_0x5b8b35[_0x1f912b(0x196)](test,_0x1f912b(0x19c),async()=>{const _0x20436f=_0x1f912b,_0x16fdca=strapiUtils[_0x20436f(0x1bc)](validators[_0x20436f(0x197)]({'attr':{'type':_0x20436f(0x197),'maxLength':_0x4ff19c[_0x20436f(0x182)]}},{'isDraft':![]}));expect(await _0x4ff19c[_0x20436f(0x1ab)](_0x16fdca,0x1))[_0x20436f(0x19a)](0x1);}),test(_0x1f912b(0x185),async()=>{const _0x296700=_0x1f912b;expect[_0x296700(0x1a8)](0x1);const _0x26bd48=strapiUtils['validateYupSchema'](validators[_0x296700(0x197)]({'attr':{'type':_0x296700(0x197),'max':0x3}},{'isDraft':![]}));try{await _0x4ff19c[_0x296700(0x1ab)](_0x26bd48,0x4);}catch(_0xbd99dd){_0x4ff19c[_0x296700(0x1ab)](expect,_0xbd99dd)['toBeInstanceOf'](YupValidationError);}}),test('it\x20validates\x20the\x20max\x20constraint\x20if\x20the\x20integer\x20is\x20lower\x20than\x20the\x20define\x20max',async()=>{const _0x9fc07b=_0x1f912b,_0x3d18b7=strapiUtils[_0x9fc07b(0x1bc)](validators['integer']({'attr':{'type':_0x5b8b35[_0x9fc07b(0x195)],'max':0x3}},{'isDraft':![]}));expect(await _0x3d18b7(0x2))[_0x9fc07b(0x19a)](0x2);});});});