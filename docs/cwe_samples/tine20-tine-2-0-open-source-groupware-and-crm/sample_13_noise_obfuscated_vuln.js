'use strict';function _0x3c05(_0x2c1f11,_0x317e9f){const _0xd4369e=_0xd436();return _0x3c05=function(_0x3c05e7,_0x262609){_0x3c05e7=_0x3c05e7-0x1cf;let _0x242be3=_0xd4369e[_0x3c05e7];return _0x242be3;},_0x3c05(_0x2c1f11,_0x317e9f);}function _0xd436(){const _0x4d150f=['CdmBt','buildStrapiQuery','aeyVv','Create\x20query\x20from\x20complex\x20object','vUUtm','KReki','Nested\x20OR\x20op','sift','Removable\x20op','AREYl','402HMcAiR','9397336GBNvYv','Pick\x20all\x20fields\x20(output)\x20using\x20default\x20model','LhejL','cBUnZ','Sanitize\x20an\x20array\x20of\x20objects','bar','IIeBQ','owdoo','each','CYJyn','kztgH','Simple\x20op','nwGfy','1483806rQrydz','fFCYg','TnYSS','isAllowed','PJIWk','Yaofc','IpmFN','xfKXW','FxunN','../permission/permissions-manager/query-builers','uTRgB','fcFQL','Op\x20with\x20array','LFGol','OR\x20op\x20with\x20nested\x20AND\x20op','WORmt','ApZRt','tmLqa','mHuPh','foo','$gte','WbDbz','VRjpv','AwQvL','tlomP','toSubject','pickPermittedFieldsOf','Nested\x20property\x20+\x20$elementMatch','WiMDD','filters','JXWVl','It\x20should\x20transform\x20an\x20object\x20to\x20a\x20subject\x20using\x20the\x20given\x20model','article','It\x20should\x20returns\x20a\x20valid\x20query\x20from\x20the\x20ability','UvkLq','vMlwv','NwlGA','niTcm','2800955mMEDnT','ZgUfD','bpQeD','$or','jkiam','__caslSubjectType__','RyjyX','yftVg','@casl/ability','StAPM','WJtAc','Create\x20query\x20from\x20simple\x20object','toBeFalsy','title','read','48652300utpWse','HDeAI','Decoupling\x20of\x20nested\x20properties\x20with/without\x20op','bmhlO','doe','8BqpKqz','../permission/permissions-manager','Pick\x200\x20fields\x20(output)\x20using\x20custom\x20model','$exists','getQuery','Test\x20nÂ°%#:\x20%s','pWIHW','WPcZY','SgdjQ','35BVfQZX','$nin','kai','rab','katEm','get\x20Query','CRoaM','edit','Ievhg','PKfsx','toThrowError','MlrWa','nHHtu','Qnzzc','It\x20should\x20throw\x20if\x20no\x20action\x20is\x20defined','RHHQJ','Permissions\x20Manager','another_subject','toEqual','VAhkV','No\x20transform','sPPHz','mGZyC','ZXeOM','$gt','QifbY','DpQvz','kncVa','OvIIX','createQueryTester','9733905eiptRh','Literal\x20nested\x20property\x20with\x20removable\x20op','SaamA','bbnxP','feFiE','$eq','addPermissionsQueryTo','1451524MJbkvo','crNug','strapi','ykfBD','Combination\x20of\x20removable\x20and\x20basic\x20ops','DJvlk','It\x20should\x20deny\x20access','GBYvb','qbaRq','ybIrf','lETyf','tYWMC','bzLos','vrZjg','toStrictEqual','hortq','fQyMH','OR\x20op\x20with\x20nested\x20properties\x20&\x20ops','krgdo','toBeDefined','VBVOd','It\x20should\x20returns\x20an\x20empty\x20query\x20when\x20no\x20conditions\x20are\x20defined','13419QWxkLe','Nested\x20property','text','return\x20Object.keys({a:1});','cNKuw','jBZjc','evcAp','qovan','hzBed','Ahmfp','get\x20isAllowed','$lt','BPyQY','Yrraq','DLrCY','It\x20should\x20grants\x20access','shKKb','rzgZh','console.log(\x22timer\x22);','wCucP','cHtJB','Nested\x20property\x20+\x20$eq'];_0xd436=function(){return _0x4d150f;};return _0xd436();}const _0x3894c5=_0x3c05;(function(_0x444679,_0x4226ab){const _0x31d491=_0x3c05,_0x447cb3=_0x444679();while(!![]){try{const _0x57a595=parseInt(_0x31d491(0x1fd))/0x1+parseInt(_0x31d491(0x233))/0x2*(-parseInt(_0x31d491(0x213))/0x3)+-parseInt(_0x31d491(0x1cf))/0x4*(parseInt(_0x31d491(0x267))/0x5)+-parseInt(_0x31d491(0x241))/0x6*(parseInt(_0x31d491(0x1d8))/0x7)+-parseInt(_0x31d491(0x234))/0x8+-parseInt(_0x31d491(0x1f6))/0x9+parseInt(_0x31d491(0x276))/0xa;if(_0x57a595===_0x4226ab)break;else _0x447cb3['push'](_0x447cb3['shift']());}catch(_0x363d2e){_0x447cb3['push'](_0x447cb3['shift']());}}}(_0xd436,0xc46e6));const {AbilityBuilder,Ability}=require(_0x3894c5(0x26f)),{pick}=require('lodash/fp'),sift=require(_0x3894c5(0x230)),{buildStrapiQuery}=require(_0x3894c5(0x24a)),createPermissionsManager=require(_0x3894c5(0x1d0)),allowedOperations=[_0x3894c5(0x26a),'$and',_0x3894c5(0x1fb),'$ne','$in',_0x3894c5(0x1d9),_0x3894c5(0x21e),'$lte',_0x3894c5(0x1f0),_0x3894c5(0x255),_0x3894c5(0x1d2),'$elemMatch'],operations=pick(allowedOperations,sift),conditionsMatcher=_0x527436=>{const _0x2c04df=_0x3894c5,_0x99571={'CdmBt':function(_0x43d884,_0x1e6fd5){return _0x43d884(_0x1e6fd5);},'ySABi':_0x2c04df(0x216)};return _0x99571[_0x2c04df(0x229)](Function,_0x99571['ySABi'])(),sift[_0x2c04df(0x1f5)](_0x527436,{'operations':operations});},defineAbility=_0x11609b=>{const _0x54d79d=_0x3894c5,_0x1e2fd1={'cNKuw':function(_0x39e29b,_0x1872f5){return _0x39e29b(_0x1872f5);}},{can:_0x4ebae1,build:_0x23706c}=new AbilityBuilder(Ability);return _0x11609b(_0x4ebae1),_0x1e2fd1[_0x54d79d(0x217)](Function,'return\x20Object.keys({a:1});')(),_0x23706c({'conditionsMatcher':conditionsMatcher});};describe(_0x3894c5(0x1e8),()=>{const _0x77b483=_0x3894c5,_0x934c0e={'QomGQ':_0x77b483(0x27a),'CRoaM':_0x77b483(0x225),'ApZRt':function(_0x5e07bd,_0x2c6d78){return _0x5e07bd!==_0x2c6d78;},'evcAp':function(_0x3c12f0,_0x293311){return _0x3c12f0(_0x293311);},'NwlGA':'foo','tYWMC':function(_0x284e02,_0x38f9d2){return _0x284e02===_0x38f9d2;},'tlomP':_0x77b483(0x204),'fQyMH':'It\x20should\x20returns\x20a\x20valid\x20query\x20from\x20the\x20ability','BPyQY':function(_0x47ee94,_0x5bd845){return _0x47ee94(_0x5bd845);},'bpQeD':function(_0x6d872a,_0x9a7e85){return _0x6d872a(_0x9a7e85);},'GSION':function(_0x4b0c5b,_0x19ebf2){return _0x4b0c5b(_0x19ebf2);},'LFGol':function(_0x325c7a,_0x3392d5){return _0x325c7a(_0x3392d5);},'CPQXG':_0x77b483(0x222),'Ahmfp':function(_0x5a955c,_0x42879d,_0x34c2ff){return _0x5a955c(_0x42879d,_0x34c2ff);},'LhejL':function(_0x1a116e,_0x156b86){return _0x1a116e===_0x156b86;},'EbYev':_0x77b483(0x1e3),'lETyf':_0x77b483(0x239),'crNug':function(_0x10ef75,_0x9327f5){return _0x10ef75(_0x9327f5);},'krgdo':_0x77b483(0x22e),'uTRgB':_0x77b483(0x1e4),'IpmFN':function(_0x14ee26,_0x381953){return _0x14ee26(_0x381953);},'bmhlO':_0x77b483(0x26c),'cHtJB':'read','DLrCY':'It\x20should\x20transform\x20an\x20object\x20to\x20a\x20subject\x20using\x20default\x20model','qbaRq':_0x77b483(0x261),'ykfBD':'QRpzV','VBVOd':function(_0x4dfe40,_0x238623){return _0x4dfe40!==_0x238623;},'AREYl':_0x77b483(0x1ef),'AwQvL':'Sozrp','rzgZh':_0x77b483(0x1da),'NwVCT':function(_0x38d9ae,_0x2c5487,_0x44ca86,_0x532c18,_0x593b36){return _0x38d9ae(_0x2c5487,_0x44ca86,_0x532c18,_0x593b36);},'bzLos':function(_0x22a191,_0x1f9d47){return _0x22a191(_0x1f9d47);},'xfKXW':_0x77b483(0x235),'cBUnZ':_0x77b483(0x238),'Qnzzc':_0x77b483(0x1e7),'Yrraq':function(_0x571e88,_0x3ba1b9){return _0x571e88(_0x3ba1b9);},'QifbY':'Create\x20query\x20from\x20simple\x20object','StAPM':_0x77b483(0x23f),'jBZjc':_0x77b483(0x214),'HDeAI':_0x77b483(0x228),'vToBL':'Deeply\x20nested\x20property','UvkLq':_0x77b483(0x1db),'shKKb':_0x77b483(0x231),'ybIrf':_0x77b483(0x20e),'mHuPh':_0x77b483(0x1f7),'DpQvz':function(_0x22a3ff,_0x15bc24,_0x2f0b2d){return _0x22a3ff(_0x15bc24,_0x2f0b2d);},'TnYSS':_0x77b483(0x21d),'mGZyC':'toSubject','owdoo':'addPermissionsQueryTo','yftVg':_0x77b483(0x22a)};beforeEach(()=>{const _0x564005=_0x77b483,_0x18b5de={'LlssS':_0x934c0e['QomGQ'],'WiMDD':function(_0x2ba5dc,_0x4ac9d9,_0x3bd051){return _0x2ba5dc(_0x4ac9d9,_0x3bd051);},'tmLqa':_0x934c0e[_0x564005(0x1de)]};if(_0x934c0e['ApZRt'](_0x564005(0x23a),_0x564005(0x23a))){const _0x490c4a=_0x1ae11a(_0x28c70e=>_0x28c70e(_0x564005(0x275),'foo',[_0x564005(0x239)],{'kai':_0x564005(0x27a)})),_0x470bf1=_0x5ccd3d({'ability':_0x490c4a,'action':_0x564005(0x275),'model':'foo'}),_0x302d0b={'$or':[{'kai':_0x18b5de['LlssS']}]};_0x103709(_0x470bf1[_0x564005(0x1d3)]())[_0x564005(0x20b)](_0x302d0b);}else global[_0x564005(0x1ff)]={'getModel'(){const _0x91bead=_0x564005;return _0x18b5de[_0x91bead(0x25d)](setTimeout,_0x18b5de[_0x91bead(0x252)],0x3e8),{};}};}),describe(_0x77b483(0x1dd),()=>{const _0x5ee8d0=_0x77b483,_0x2b617b={'fcFQL':function(_0x463e67,_0x393874){const _0x1cf0f1=_0x3c05;return _0x934c0e[_0x1cf0f1(0x219)](_0x463e67,_0x393874);},'SaamA':_0x5ee8d0(0x275),'hzBed':_0x934c0e[_0x5ee8d0(0x265)],'WJtAc':'doe'};if(_0x934c0e[_0x5ee8d0(0x208)]('GBYvb',_0x934c0e[_0x5ee8d0(0x259)]))test(_0x5ee8d0(0x212),async()=>{const _0x3c5573=_0x5ee8d0,_0x5038fb=_0x2b617b[_0x3c5573(0x24c)](defineAbility,_0x2d2218=>_0x2d2218(_0x3c5573(0x275),'foo')),_0x4e2cd2=createPermissionsManager({'ability':_0x5038fb,'action':_0x2b617b[_0x3c5573(0x1f8)],'model':_0x2b617b[_0x3c5573(0x21b)]});expect(_0x4e2cd2[_0x3c5573(0x1d3)]())[_0x3c5573(0x20b)]({});}),test(_0x934c0e[_0x5ee8d0(0x20d)],()=>{const _0x583685=_0x5ee8d0,_0x4649fc=defineAbility(_0x589d97=>_0x589d97('read',_0x583685(0x254),[_0x583685(0x239)],{'kai':'doe'})),_0x102f54=createPermissionsManager({'ability':_0x4649fc,'action':_0x583685(0x275),'model':_0x583685(0x254)}),_0x635d08={'$or':[{'kai':_0x2b617b[_0x583685(0x271)]}]};expect(_0x102f54[_0x583685(0x1d3)]())[_0x583685(0x20b)](_0x635d08);}),test(_0x5ee8d0(0x1e6),()=>{const _0x247cdb=_0x5ee8d0,_0x3fd983=defineAbility(_0x4c4615=>_0x4c4615(_0x247cdb(0x275),_0x247cdb(0x254),[_0x247cdb(0x239)],{'kai':_0x247cdb(0x27a)})),_0x15bafd=createPermissionsManager({'ability':_0x3fd983,'model':_0x247cdb(0x254)});_0x934c0e['evcAp'](expect,()=>_0x15bafd[_0x247cdb(0x1d3)]())['toThrowError']();});else{const _0x9c9e95={'limit':0x64,'filters':{'$and':[{'a':'b'},{'c':'d'}]}},_0x21bf02={'limit':0x64,'filters':{'$and':[_0x9c9e95[_0x5ee8d0(0x25e)],_0x3e662b]}},_0x3251e1=_0x3cdf34[_0x5ee8d0(0x1fc)](_0x9c9e95);_0x275ae3(_0x3251e1)[_0x5ee8d0(0x20b)](_0x21bf02);}}),_0x934c0e[_0x77b483(0x1f2)](describe,_0x934c0e[_0x77b483(0x243)],()=>{const _0x42d091=_0x77b483,_0x11ecad={'WPcZY':function(_0x191103,_0x202306){return _0x934c0e['GSION'](_0x191103,_0x202306);},'qhiSY':_0x934c0e[_0x42d091(0x265)]},_0x238e10=_0x934c0e[_0x42d091(0x24e)](defineAbility,_0x41f3aa=>_0x41f3aa(_0x42d091(0x275),_0x42d091(0x254)));test(_0x934c0e['CPQXG'],()=>{const _0x482e71=_0x42d091,_0x22dd04=_0x11ecad[_0x482e71(0x1d6)](createPermissionsManager,{'ability':_0x238e10,'action':'read','model':_0x11ecad['qhiSY']});expect(_0x22dd04[_0x482e71(0x244)])['toBeTruthy']();}),_0x934c0e[_0x42d091(0x21c)](test,_0x42d091(0x203),()=>{const _0x258e45=_0x42d091,_0x2ac761=_0x934c0e[_0x258e45(0x21f)](createPermissionsManager,{'ability':_0x238e10,'action':_0x258e45(0x275),'model':_0x258e45(0x239)});_0x934c0e[_0x258e45(0x269)](expect,_0x2ac761[_0x258e45(0x244)])[_0x258e45(0x273)]();});}),describe(_0x934c0e[_0x77b483(0x1ee)],()=>{const _0xaf0779=_0x77b483,_0x3f1ed2={'SgdjQ':function(_0xf97296,_0x3f181c){const _0x3ea755=_0x3c05;return _0x934c0e[_0x3ea755(0x269)](_0xf97296,_0x3f181c);},'vrZjg':function(_0x14d54e,_0x2ba5cc){return _0x14d54e!==_0x2ba5cc;},'niTcm':_0x934c0e[_0xaf0779(0x20f)],'czlcA':_0x934c0e[_0xaf0779(0x24b)],'fFCYg':'var\x20x\x20=\x2042;\x20return\x20x;','VRjpv':_0x934c0e['lETyf'],'vMlwv':function(_0x6347fe,_0x3c41cb){return _0x6347fe(_0x3c41cb);},'vUUtm':_0xaf0779(0x254),'OVwYj':function(_0x5ccbc3,_0x1dbc96){const _0x410791=_0xaf0779;return _0x934c0e[_0x410791(0x247)](_0x5ccbc3,_0x1dbc96);}};global[_0xaf0779(0x1ff)]={'getModel'(){const _0x5931b2=_0xaf0779;if(_0x3f1ed2[_0x5931b2(0x20a)](_0x3f1ed2[_0x5931b2(0x266)],_0x3f1ed2['czlcA']))return new Function(_0x3f1ed2[_0x5931b2(0x242)])(),{};else _0x3f1ed2['SgdjQ'](_0x1a45ee,_0x3f1ed2['SgdjQ'](_0xd3b2c8,_0x3c7973))[_0x5931b2(0x20b)](_0x3bb218);}};const _0x2de76b=_0x934c0e[_0xaf0779(0x279)],_0x3f1334=_0x934c0e['GSION'](defineAbility,_0x5a115f=>_0x5a115f(_0xaf0779(0x275),_0xaf0779(0x254))),_0xeca4da=createPermissionsManager({'ability':_0x3f1334,'action':_0x934c0e[_0xaf0779(0x227)],'model':_0xaf0779(0x254)});_0x934c0e[_0xaf0779(0x21c)](test,_0x934c0e[_0xaf0779(0x221)],()=>{const _0x2af769=_0xaf0779,_0x25ce9d={'foo':_0x3f1ed2[_0x2af769(0x257)]},_0x3d65f4=_0xeca4da['toSubject'](_0x25ce9d);_0x3f1ed2[_0x2af769(0x1d7)](expect,_0x3d65f4[_0x2de76b])[_0x2af769(0x210)](),_0x3f1ed2[_0x2af769(0x264)](expect,_0x3d65f4[_0x2de76b])[_0x2af769(0x1ea)](_0x3f1ed2[_0x2af769(0x22d)]),_0x3f1ed2[_0x2af769(0x264)](expect,_0x3d65f4)[_0x2af769(0x20b)](_0x25ce9d);}),test(_0xaf0779(0x260),()=>{const _0x444114=_0xaf0779;if(_0x934c0e[_0x444114(0x236)](_0x444114(0x1e3),_0x934c0e['EbYev'])){const _0xd3ddf6={'foo':_0x934c0e[_0x444114(0x207)]},_0x39ac1f=_0x444114(0x1e9),_0x3bb5c5=_0xeca4da[_0x444114(0x25a)](_0xd3ddf6,_0x39ac1f);_0x934c0e[_0x444114(0x1fe)](expect,_0x3bb5c5[_0x2de76b])[_0x444114(0x210)](),expect(_0x3bb5c5[_0x2de76b])[_0x444114(0x1ea)](_0x39ac1f),expect(_0x3bb5c5)['toStrictEqual'](_0xd3ddf6);}else{const _0x141f2f={'foo':_0x3f1ed2[_0x444114(0x257)]},_0x3de1aa='another_subject',_0x3a6665=_0x314497[_0x444114(0x25a)](_0x141f2f,_0x3de1aa);_0x3f1ed2['OVwYj'](_0x5cfc96,_0x3a6665[_0x56215e])['toBeDefined'](),_0x3f1ed2[_0x444114(0x264)](_0x57ecdd,_0x3a6665[_0xdb0cdc])[_0x444114(0x1ea)](_0x3de1aa),_0x1c8bbf(_0x3a6665)[_0x444114(0x20b)](_0x141f2f);}});}),describe('pickPermittedFieldsOf',()=>{const _0x39a4a4=_0x77b483,_0x47b94c={'PKfsx':function(_0x548947,_0x2257a3,_0xf74cca){return _0x548947(_0x2257a3,_0xf74cca);},'FxunN':_0x39a4a4(0x215),'VAhkV':function(_0x4d6613,_0x12b42b){return _0x934c0e['IpmFN'](_0x4d6613,_0x12b42b);},'jkiam':_0x934c0e[_0x39a4a4(0x227)],'kncVa':_0x39a4a4(0x212),'feFiE':function(_0x56a25c,_0xa1102d){const _0xd2974=_0x39a4a4;return _0x934c0e[_0xd2974(0x251)](_0x56a25c,_0xa1102d);},'bbnxP':_0x39a4a4(0x23d),'OvIIX':'article','RyjyX':'title','WORmt':function(_0x7193c9,_0xc74801,_0x335ab5,_0x4326db,_0xdc118e){return _0x934c0e['NwVCT'](_0x7193c9,_0xc74801,_0x335ab5,_0x4326db,_0xdc118e);},'PJIWk':'edit','aeyVv':function(_0x31ec80,_0x18c669){return _0x31ec80(_0x18c669);},'PTIYv':_0x39a4a4(0x254),'ZgUfD':_0x39a4a4(0x22c)};global[_0x39a4a4(0x1ff)]={'getModel'(){const _0x26114d=_0x39a4a4;return _0x47b94c[_0x26114d(0x1e1)](setTimeout,_0x26114d(0x225),0x3e8),{'attributes':{'title':{'type':_0x47b94c[_0x26114d(0x249)],'private':![]}},'primaryKey':'id','options':{}};},'config':{'get':jest['fn']}};const _0xb557f1=_0x934c0e[_0x39a4a4(0x209)](defineAbility,_0x81f3a2=>{const _0x5a2ed3=_0x39a4a4,_0x505026={'Yaofc':function(_0x398239,_0x39e1e5){const _0x2354dc=_0x3c05;return _0x47b94c[_0x2354dc(0x1eb)](_0x398239,_0x39e1e5);},'kztgH':_0x47b94c[_0x5a2ed3(0x26b)],'RUNMY':function(_0x5984a8,_0x40f0c1){const _0x1b474c=_0x5a2ed3;return _0x47b94c[_0x1b474c(0x1eb)](_0x5984a8,_0x40f0c1);},'DJvlk':_0x5a2ed3(0x27a),'katEm':_0x5a2ed3(0x254),'TQAly':_0x47b94c[_0x5a2ed3(0x1f3)],'sPPHz':function(_0x262883,_0x5b2efb,_0xe5bb4){return _0x262883(_0x5b2efb,_0xe5bb4);}};_0x47b94c[_0x5a2ed3(0x1fa)](_0x47b94c[_0x5a2ed3(0x1f9)],'znOHO')?(_0x81f3a2(_0x47b94c[_0x5a2ed3(0x26b)],_0x47b94c[_0x5a2ed3(0x1f4)],[_0x47b94c[_0x5a2ed3(0x26d)]],{'title':'foo'}),_0x47b94c[_0x5a2ed3(0x250)](_0x81f3a2,_0x47b94c[_0x5a2ed3(0x245)],_0x47b94c[_0x5a2ed3(0x1f4)],[_0x5a2ed3(0x274)],{'title':{'$in':[_0x5a2ed3(0x1da),_0x5a2ed3(0x27a)]}})):(_0x2d7d8b(_0x505026['TQAly'],async()=>{const _0xf3fa10=_0x5a2ed3,_0x2546ea=_0x58ad5f(_0x4c3cd8=>_0x4c3cd8('read',_0xf3fa10(0x254))),_0x40c352=_0x505026[_0xf3fa10(0x246)](_0x3151f0,{'ability':_0x2546ea,'action':_0x505026[_0xf3fa10(0x23e)],'model':_0xf3fa10(0x254)});_0x505026['RUNMY'](_0x2a10f1,_0x40c352[_0xf3fa10(0x1d3)]())[_0xf3fa10(0x20b)]({});}),_0x505026[_0x5a2ed3(0x1ed)](_0x3ec6f6,_0x5a2ed3(0x262),()=>{const _0x3545a6=_0x5a2ed3,_0x39cbce=_0x505026[_0x3545a6(0x246)](_0x45b607,_0x1b84de=>_0x1b84de('read','foo',[_0x3545a6(0x239)],{'kai':_0x3545a6(0x27a)})),_0x348c84=_0x545511({'ability':_0x39cbce,'action':_0x3545a6(0x275),'model':'foo'}),_0x32cf79={'$or':[{'kai':_0x505026[_0x3545a6(0x202)]}]};_0x2852b5(_0x348c84[_0x3545a6(0x1d3)]())[_0x3545a6(0x20b)](_0x32cf79);}),_0xd4b2fc(_0x5a2ed3(0x1e6),()=>{const _0x526cdd=_0x5a2ed3,_0x225af4=_0x29ce2b(_0x40ab1a=>_0x40ab1a('read',_0x526cdd(0x254),[_0x526cdd(0x239)],{'kai':_0x526cdd(0x27a)})),_0x27af11=_0x17de41({'ability':_0x225af4,'model':_0x505026[_0x526cdd(0x1dc)]});_0x505026[_0x526cdd(0x246)](_0x46aefb,()=>_0x27af11[_0x526cdd(0x1d3)]())[_0x526cdd(0x1e2)]();}));}),_0x498d7d=_0x934c0e['GSION'](createPermissionsManager,{'ability':_0xb557f1,'action':_0x934c0e[_0x39a4a4(0x227)],'model':'article'});test(_0x934c0e[_0x39a4a4(0x248)],async()=>{const _0x33b5b0=_0x39a4a4,_0x197cfb={'WPsZT':_0x33b5b0(0x275),'pWIHW':_0x33b5b0(0x274),'wCucP':function(_0x215ad7,_0x5217ad,_0x1d4165,_0xe22a76,_0x253515){return _0x215ad7(_0x5217ad,_0x1d4165,_0xe22a76,_0x253515);},'RCSuL':_0x33b5b0(0x1df),'qovan':_0x934c0e[_0x33b5b0(0x205)],'hortq':_0x934c0e['QomGQ']};if(_0x934c0e['LhejL'](_0x934c0e[_0x33b5b0(0x200)],_0x33b5b0(0x25f)))_0x2bd394(_0x197cfb['WPsZT'],_0x33b5b0(0x261),[_0x197cfb[_0x33b5b0(0x1d5)]],{'title':_0x33b5b0(0x254)}),_0x197cfb[_0x33b5b0(0x226)](_0x50e900,_0x197cfb['RCSuL'],_0x197cfb[_0x33b5b0(0x21a)],['title'],{'title':{'$in':[_0x33b5b0(0x1da),_0x197cfb[_0x33b5b0(0x20c)]]}});else{const _0x59a167={'title':_0x934c0e[_0x33b5b0(0x265)]},_0x3d124e=await _0x498d7d['pickPermittedFieldsOf'](_0x59a167);expect(_0x3d124e)[_0x33b5b0(0x20b)](_0x59a167);}}),test(_0x39a4a4(0x1d1),async()=>{const _0x231c42=_0x39a4a4,_0x497168={'title':_0x934c0e[_0x231c42(0x265)]},_0x2c9045=await _0x498d7d[_0x231c42(0x25b)](_0x497168,{'action':_0x231c42(0x1df)});expect(_0x2c9045)[_0x231c42(0x20b)]({});}),_0x934c0e[_0x39a4a4(0x21c)](test,_0x934c0e[_0x39a4a4(0x237)],async()=>{const _0x7c01a0=_0x39a4a4;if(_0x934c0e[_0x7c01a0(0x211)](_0x934c0e[_0x7c01a0(0x232)],_0x934c0e[_0x7c01a0(0x258)])){const _0x36d6a9=[{'title':'foo'},{'title':_0x934c0e[_0x7c01a0(0x224)]}],_0x4a78d3=[{'title':_0x934c0e['NwlGA']},{}],_0x9e4235=await _0x498d7d['pickPermittedFieldsOf'](_0x36d6a9);expect(_0x9e4235)['toStrictEqual'](_0x4a78d3);}else{const _0x56ce80={'nwGfy':function(_0x46e571,_0x1cdc70){const _0x580592=_0x7c01a0;return _0x47b94c[_0x580592(0x1eb)](_0x46e571,_0x1cdc70);}},_0x5455b6=_0x12ff91(_0x5ec4e5=>_0x5ec4e5(_0x7c01a0(0x275),_0x7c01a0(0x261),[_0x7c01a0(0x274)],{'$and':[{'title':_0x7c01a0(0x254)}]})),_0x2a5c66=_0x47b94c[_0x7c01a0(0x22b)](_0x459ef7,{'ability':_0x5455b6,'action':_0x7c01a0(0x275),'model':_0x47b94c['OvIIX']}),_0x507c71={'$or':[{'$and':[{'title':_0x47b94c['PTIYv']}]}]};_0x47b94c[_0x7c01a0(0x1e1)](_0x217782,_0x7c01a0(0x272),()=>{const _0xac6c2=_0x7c01a0,_0xfed822={'limit':0x64},_0x469a9e={'limit':0x64,'filters':_0x507c71},_0x1ede6b=_0x2a5c66[_0xac6c2(0x1fc)](_0xfed822);_0x48b499(_0x1ede6b)[_0xac6c2(0x20b)](_0x469a9e);}),_0x36e77e(_0x47b94c[_0x7c01a0(0x268)],()=>{const _0x2e379f=_0x7c01a0,_0x53e9f2={'limit':0x64,'filters':{'$and':[{'a':'b'},{'c':'d'}]}},_0x162d7f={'limit':0x64,'filters':{'$and':[_0x53e9f2[_0x2e379f(0x25e)],_0x507c71]}},_0x277a21=_0x2a5c66['addPermissionsQueryTo'](_0x53e9f2);_0x56ce80[_0x2e379f(0x240)](_0x5480f8,_0x277a21)[_0x2e379f(0x20b)](_0x162d7f);});}});}),_0x934c0e['DpQvz'](describe,_0x934c0e[_0x77b483(0x23b)],()=>{const _0x380324=_0x77b483,_0x3cb86c=_0x934c0e[_0x380324(0x220)](defineAbility,_0x2d646f=>_0x2d646f(_0x380324(0x275),_0x380324(0x261),[_0x380324(0x274)],{'$and':[{'title':_0x380324(0x254)}]})),_0x370f6f=_0x934c0e[_0x380324(0x220)](createPermissionsManager,{'ability':_0x3cb86c,'action':_0x380324(0x275),'model':_0x934c0e['qbaRq']}),_0x3e64e3={'$or':[{'$and':[{'title':_0x380324(0x254)}]}]};test(_0x934c0e[_0x380324(0x1f1)],()=>{const _0x4bc4a1=_0x380324,_0x1ed27d={'limit':0x64},_0x5df378={'limit':0x64,'filters':_0x3e64e3},_0x49f4f9=_0x370f6f[_0x4bc4a1(0x1fc)](_0x1ed27d);expect(_0x49f4f9)['toStrictEqual'](_0x5df378);}),test('Create\x20query\x20from\x20complex\x20object',()=>{const _0x248b76=_0x380324,_0x915ff7={'WbDbz':function(_0x1567a9,_0x3293b3){const _0x1d30b8=_0x3c05;return _0x934c0e[_0x1d30b8(0x24e)](_0x1567a9,_0x3293b3);}};if(_0x934c0e[_0x248b76(0x1e5)]===_0x248b76(0x1e0)){const _0x1daf77=_0x20e6f0(_0x2305da=>_0x2305da('read',_0x248b76(0x254))),_0x46832a=_0x4c184d({'ability':_0x1daf77,'action':_0x248b76(0x275),'model':_0x248b76(0x254)});_0x915ff7[_0x248b76(0x256)](_0x31198c,_0x46832a[_0x248b76(0x1d3)]())[_0x248b76(0x20b)]({});}else{const _0x47efe8={'limit':0x64,'filters':{'$and':[{'a':'b'},{'c':'d'}]}},_0x4de3b1={'limit':0x64,'filters':{'$and':[_0x47efe8[_0x248b76(0x25e)],_0x3e64e3]}},_0x2e7dd6=_0x370f6f[_0x248b76(0x1fc)](_0x47efe8);expect(_0x2e7dd6)[_0x248b76(0x20b)](_0x4de3b1);}});}),describe(_0x934c0e[_0x77b483(0x26e)],()=>{const _0x85372f=_0x77b483,_0x109ddb=[[_0x85372f(0x1ec),{'foo':_0x934c0e[_0x85372f(0x207)]},{'foo':_0x85372f(0x239)}],[_0x934c0e[_0x85372f(0x270)],{'foo':{'$eq':_0x934c0e[_0x85372f(0x207)]}},{'foo':{'$eq':_0x934c0e[_0x85372f(0x207)]}}],[_0x934c0e[_0x85372f(0x218)],{'foo.nested':_0x85372f(0x239)},{'foo':{'nested':_0x934c0e[_0x85372f(0x207)]}}],[_0x934c0e[_0x85372f(0x277)],{'foo.nested':{'$eq':_0x85372f(0x239)}},{'foo':{'nested':{'$eq':_0x934c0e[_0x85372f(0x207)]}}}],[_0x85372f(0x25c),{'foo.nested':{'$elemMatch':_0x85372f(0x239)}},{'foo':{'nested':_0x934c0e[_0x85372f(0x207)]}}],[_0x934c0e['vToBL'],{'foo.nested.again':'bar'},{'foo':{'nested':{'again':_0x934c0e[_0x85372f(0x207)]}}}],[_0x85372f(0x24d),{'foo':{'$in':[_0x934c0e['lETyf'],_0x934c0e[_0x85372f(0x263)]]}},{'foo':{'$in':[_0x85372f(0x239),_0x934c0e[_0x85372f(0x263)]]}}],[_0x934c0e[_0x85372f(0x223)],{'foo':{'$elemMatch':{'a':'b'}}},{'foo':{'a':'b'}}],[_0x85372f(0x201),{'foo':{'$elemMatch':{'a':{'$in':[0x1,0x2,0x3]}}}},{'foo':{'a':{'$in':[0x1,0x2,0x3]}}}],[_0x85372f(0x278),{'foo':{'$elemMatch':{'a':{'$in':[0x1,0x2,0x3]},'b':'c'}}},{'foo':{'a':{'$in':[0x1,0x2,0x3]},'b':'c'}}],['OR\x20op\x20and\x20properties\x20decoupling',{'$or':[{'foo':{'a':0x2}},{'foo':{'b':0x3}}]},{'$or':[{'foo':{'a':0x2}},{'foo':{'b':0x3}}]}],[_0x934c0e[_0x85372f(0x206)],{'$or':[{'foo':{'a':0x2}},{'foo':{'b':{'$in':[0x1,0x2,0x3]}}}]},{'$or':[{'foo':{'a':0x2}},{'foo':{'b':{'$in':[0x1,0x2,0x3]}}}]}],[_0x85372f(0x22f),{'$or':[{'$or':[{'a':0x2},{'a':0x3}]}]},{'$or':[{'$or':[{'a':0x2},{'a':0x3}]}]}],[_0x85372f(0x24f),{'$or':[{'a':0x2},[{'a':0x3},{'$or':[{'b':0x1},{'b':0x4}]}]]},{'$or':[{'a':0x2},[{'a':0x3},{'$or':[{'b':0x1},{'b':0x4}]}]]}],['OR\x20op\x20with\x20nested\x20AND\x20op\x20and\x20nested\x20properties',{'$or':[{'a':0x2},[{'a':0x3},{'b':{'c':'foo'}}]]},{'$or':[{'a':0x2},[{'a':0x3},{'b':{'c':_0x934c0e[_0x85372f(0x265)]}}]]}],[_0x934c0e[_0x85372f(0x253)],{'created_by':{'roles':{'$elemMatch':{'id':{'$in':[0x1,0x2,0x3]}}}}},{'created_by':{'roles':{'id':{'$in':[0x1,0x2,0x3]}}}}]];test[_0x85372f(0x23c)](_0x109ddb)(_0x85372f(0x1d4),(_0x49aa02,_0xe2b242,_0x3c7260)=>{const _0x1b6bcd=_0x85372f;_0x934c0e[_0x1b6bcd(0x219)](expect,buildStrapiQuery(_0xe2b242))[_0x1b6bcd(0x20b)](_0x3c7260);});});});