const _0x4c1181=_0x5004;function _0x5004(_0x52ee93,_0xb2bbe){const _0x4471b9=_0x4471();return _0x5004=function(_0x500429,_0x4dfbbc){_0x500429=_0x500429-0xb5;let _0x2453c1=_0x4471b9[_0x500429];return _0x2453c1;},_0x5004(_0x52ee93,_0xb2bbe);}(function(_0xdf85c0,_0x567e9c){const _0x27d4c3=_0x5004,_0x220ee9=_0xdf85c0();while(!![]){try{const _0x3bf104=-parseInt(_0x27d4c3(0xdd))/0x1+-parseInt(_0x27d4c3(0x12f))/0x2*(parseInt(_0x27d4c3(0xda))/0x3)+-parseInt(_0x27d4c3(0xfe))/0x4+parseInt(_0x27d4c3(0x116))/0x5+parseInt(_0x27d4c3(0xf9))/0x6+-parseInt(_0x27d4c3(0x124))/0x7+-parseInt(_0x27d4c3(0xcb))/0x8*(-parseInt(_0x27d4c3(0xe6))/0x9);if(_0x3bf104===_0x567e9c)break;else _0x220ee9['push'](_0x220ee9['shift']());}catch(_0x56601d){_0x220ee9['push'](_0x220ee9['shift']());}}}(_0x4471,0xf0b7b));function _0x4471(){const _0xbf0666=['get','cgHUc','5409TKSrks','DYzKZ','checkProhibitedKeywords','metadataHandler','_tags','../triggers','enableForAuthenticatedUser','delete','Filename\x20not\x20provided.','File\x20upload\x20by\x20authenticated\x20user\x20is\x20disabled.','Addha','code','Types','getFileLocation','some','fileExtensions','isMaster','INVALID_FILE_NAME','ClGvr','5923782sVNcax','LLZKP','json','WuCBq','pMbkf','5357992SJpBjn','expressRouter','deleteFile','/files','ZnFzA','type','TAVZF','_previousSave','GCoTw','Content-type','okiol','pLFKK','config','Location','AnaYp','TTDxF','fileUpload','post','SKbgd','OVprv','enableForAnonymousUser','Router','_source','fileSize','9406735ewOOwz','beforeDelete','Could\x20not\x20store\x20file:\x20','LOMiq','zOUwg','FILE_SAVE_ERROR','isLinked','join','filename','status','Error\x20downloading\x20file\x20from\x20','File\x20upload\x20by\x20public\x20is\x20disabled.','CxZTg','FRkLp','8274336zbtYSU','../Utils','Ehbmx','csOcP','handleFileStream','nYMuZ','cKocR','file','_data','Invalid\x20application\x20ID.','File','1598SmReAS','filesController','rsEDg','function','end','keys','content-type','_requestTask','Content-Length','getType','SbvWh','set','url','/files/:filename','20Mb','getFileData','_url','Content-Type','beforeSave','OpPGu','BatCt','OZhWF','text/plain','Error\x20creating\x20a\x20file:\x20','error','FILE_DELETE_ERROR','_metadata','length','rDMBw','_name','http','INVALID_KEY_NAME',';base64,','catch','headers','pfAqA','LzLOt','NYzKm','ODzYz','params','user','File\x20upload\x20of\x20extension\x20','File\x20not\x20found.','Snrds','auth','WFubE','VgNdR','ekiDk','toString','uri','Invalid\x20file\x20upload.','raw','adapter','AnonymousUtils','includes','qyCWR','format','enforceMasterKeyAccess','MkXJz','createFile','appId','resolveError','EkZJi','fileData','createHandler','Error\x20deleting\x20a\x20file:\x20','Could\x20not\x20delete\x20file.','name','data:','data','Error','43312zwPEoG','setTags','setDefaultEncoding','split','/files/:appId/:filename','OPERATION_FORBIDDEN','test','maybeRunFileTrigger','kOgTe','deleteHandler','File\x20upload\x20by\x20anonymous\x20user\x20is\x20disabled.','base64','message','body','afterDelete','5907CviklM','CXfGP','\x20is\x20disabled.','1041702LIGGgP','byteLength','MbeWr','assign','XrKiu','CKhRB','then'];_0x4471=function(){return _0xbf0666;};return _0x4471();}import _0x1fcce5 from'express';import _0x244c6e from'body-parser';import*as _0x72c275 from'../middlewares';import _0x154994 from'parse/node';import _0x24c0f5 from'../Config';import _0x3bdc96 from'mime';import _0x95257e from'../logger';const triggers=require(_0x4c1181(0xeb)),http=require(_0x4c1181(0x14d)),Utils=require(_0x4c1181(0x125)),downloadFileFromURI=_0x3b92fd=>{const _0x42cbbf=_0x4c1181,_0x5ebbf7={'VgNdR':_0x42cbbf(0x140),'CKhRB':_0x42cbbf(0x135),'BatCt':_0x42cbbf(0x133)};return new Promise((_0x2703d8,_0x3618f3)=>{const _0x20b561=_0x42cbbf,_0x3c0552={'pMbkf':'base64','UWBxR':_0x5ebbf7[_0x20b561(0xe2)],'jmvyV':_0x5ebbf7[_0x20b561(0x143)]};http[_0x20b561(0xe4)](_0x3b92fd,_0xd51dcf=>{const _0x2d1ee2=_0x20b561;_0xd51dcf['setDefaultEncoding'](_0x3c0552[_0x2d1ee2(0xfd)]);let _0x2447e8=_0x2d1ee2(0xc8)+_0xd51dcf[_0x2d1ee2(0x151)][_0x3c0552['UWBxR']]+';base64,';_0xd51dcf['on'](_0x2d1ee2(0xc9),_0x3f4bd2=>_0x2447e8+=_0x3f4bd2),_0xd51dcf['on'](_0x3c0552['jmvyV'],()=>_0x2703d8(_0x2447e8));})['on'](_0x20b561(0x147),_0x401197=>{const _0x26cf02=_0x20b561,_0xb7851={'GCoTw':_0x5ebbf7[_0x26cf02(0x15d)]};_0x26cf02(0x144)===_0x26cf02(0x144)?_0x3618f3(_0x26cf02(0x120)+_0x3b92fd+':\x20'+_0x401197[_0x26cf02(0xd7)]):(_0x467648[_0x26cf02(0x11f)](0x194),_0x3206bf[_0x26cf02(0x13a)](_0xb7851[_0x26cf02(0x106)],_0x26cf02(0x145)),_0x65ec5a['end'](_0x26cf02(0x159)));});});},addFileDataIfNeeded=async _0x500d2b=>{const _0x46fa7a=_0x4c1181,_0x30a8e4={'LOMiq':function(_0x3b5402,_0x1667d9){return _0x3b5402===_0x1667d9;},'CxZTg':_0x46fa7a(0xb5),'csOcP':function(_0x1c0a10,_0x482b72){return _0x1c0a10(_0x482b72);}};if(_0x30a8e4[_0x46fa7a(0x119)](_0x500d2b[_0x46fa7a(0x114)][_0x46fa7a(0xbc)],_0x30a8e4[_0x46fa7a(0x122)])){if(_0x46fa7a(0x10d)===_0x46fa7a(0x123)){_0x5b8c7c[_0x46fa7a(0x147)]('Error\x20creating\x20a\x20file:\x20',_0x357dd8);const _0x1a04e2=_0x2497bb['resolveError'](_0x15a3c6,{'code':_0x19a765['Error'][_0x46fa7a(0x11b)],'message':_0x46fa7a(0x118)+_0x5b23c9[_0x46fa7a(0x12b)]['_name']+'.'});_0x381818(_0x1a04e2);}else{const _0x2d9fed=await _0x30a8e4[_0x46fa7a(0x127)](downloadFileFromURI,_0x500d2b[_0x46fa7a(0x114)][_0x46fa7a(0xb5)]);_0x500d2b[_0x46fa7a(0x105)]=_0x500d2b,_0x500d2b['_data']=_0x2d9fed,_0x500d2b[_0x46fa7a(0x136)]=null;}}return _0x500d2b;};export class FilesRouter{[_0x4c1181(0xff)]({maxUploadSize:maxUploadSize=_0x4c1181(0x13d)}={}){const _0x18362c=_0x4c1181,_0x312e80={'cgHUc':'zdezV','WFubE':function(_0x17f5f5,_0xaf6d5f){return _0x17f5f5(_0xaf6d5f);},'CXfGP':'LzLOt','OpPGu':'/files/:appId/metadata/:filename','KPkqX':'/files/:filename'};var _0x2b81c3=_0x1fcce5[_0x18362c(0x113)]();return _0x2b81c3[_0x18362c(0xe4)](_0x18362c(0xcf),this['getHandler']),_0x2b81c3[_0x18362c(0xe4)](_0x312e80[_0x18362c(0x142)],this['metadataHandler']),_0x2b81c3['post'](_0x18362c(0x101),function(_0x16205a,_0x419f7a,_0x413857){const _0x22713e=_0x18362c;_0x22713e(0x15e)!==_0x312e80[_0x22713e(0xe5)]?_0x312e80[_0x22713e(0x15c)](_0x413857,new _0x154994['Error'](_0x154994['Error'][_0x22713e(0xf7)],_0x22713e(0xee))):(_0x9a6caf[_0x22713e(0x11f)](0xc8),_0x2d16c5['set'](_0x22713e(0x140),_0xedccfe),_0x4ca258['set'](_0x22713e(0x137),_0x25fea1['length']),_0x19cb46[_0x22713e(0x133)](_0x12ebb5));}),_0x2b81c3[_0x18362c(0x10f)](_0x312e80['KPkqX'],_0x244c6e[_0x18362c(0xb7)]({'type':()=>{const _0x12db1f=_0x18362c,_0x54da94={'WuCBq':function(_0x18c963,_0x4f850e){return _0x18c963===_0x4f850e;}};if(_0x12db1f(0x153)===_0x312e80[_0x12db1f(0xdb)])return!![];else{if(_0x54da94[_0x12db1f(0xfc)](_0x5c435a,'*'))return!![];const _0x2cb862=new _0x298853(_0x6aaf5);if(_0x2cb862['test'](_0x2171a8))return!![];}},'limit':maxUploadSize}),_0x72c275['handleParseHeaders'],this[_0x18362c(0xc4)]),_0x2b81c3[_0x18362c(0xed)](_0x18362c(0x13c),_0x72c275['handleParseHeaders'],_0x72c275[_0x18362c(0xbd)],this['deleteHandler']),_0x2b81c3;}['getHandler'](_0x58eb8,_0x1cb44c){const _0xe5a782=_0x4c1181,_0x557d03={'vekcU':_0xe5a782(0x137),'pLFKK':_0xe5a782(0x145),'ClGvr':_0xe5a782(0x159),'Snrds':_0xe5a782(0x12d),'PUCeh':function(_0x275a23,_0x3b7e0c,_0x1ffcd3){return _0x275a23(_0x3b7e0c,_0x1ffcd3);}},_0x1fec7d=_0x24c0f5['get'](_0x58eb8['params']['appId']);if(!_0x1fec7d){_0x1cb44c[_0xe5a782(0x11f)](0x193);const _0x40f6bf=new _0x154994[(_0xe5a782(0xca))](_0x154994[_0xe5a782(0xca)][_0xe5a782(0xd0)],_0x557d03[_0xe5a782(0x15a)]);_0x1cb44c[_0xe5a782(0xfb)]({'code':_0x40f6bf[_0xe5a782(0xf1)],'error':_0x40f6bf[_0xe5a782(0xd7)]});return;}const _0x2da750=_0x1fec7d[_0xe5a782(0x130)],_0x5a76c5=_0x58eb8[_0xe5a782(0x156)][_0xe5a782(0x11e)],_0x4e220c=_0x3bdc96[_0xe5a782(0x138)](_0x5a76c5);_0x557d03['PUCeh'](isFileStreamable,_0x58eb8,_0x2da750)?_0x2da750[_0xe5a782(0x128)](_0x1fec7d,_0x5a76c5,_0x58eb8,_0x1cb44c,_0x4e220c)[_0xe5a782(0x150)](()=>{const _0x4420cc=_0xe5a782;_0x1cb44c[_0x4420cc(0x11f)](0x194),_0x1cb44c[_0x4420cc(0x13a)](_0x4420cc(0x140),_0x4420cc(0x145)),_0x1cb44c[_0x4420cc(0x133)](_0x4420cc(0x159));}):_0x2da750[_0xe5a782(0x13e)](_0x1fec7d,_0x5a76c5)[_0xe5a782(0xe3)](_0x589002=>{const _0x425102=_0xe5a782;_0x1cb44c[_0x425102(0x11f)](0xc8),_0x1cb44c[_0x425102(0x13a)]('Content-Type',_0x4e220c),_0x1cb44c[_0x425102(0x13a)](_0x557d03['vekcU'],_0x589002[_0x425102(0x14a)]),_0x1cb44c[_0x425102(0x133)](_0x589002);})['catch'](()=>{const _0x18ab99=_0xe5a782;_0x1cb44c[_0x18ab99(0x11f)](0x194),_0x1cb44c[_0x18ab99(0x13a)](_0x18ab99(0x140),_0x557d03[_0x18ab99(0x109)]),_0x1cb44c[_0x18ab99(0x133)](_0x557d03[_0x18ab99(0xf8)]);});}async[_0x4c1181(0xc4)](_0x5b2b82,_0x475c48,_0x1ce6dc){const _0x1ccd97=_0x4c1181,_0x535f0a={'XrKiu':function(_0x9ff659,_0x5ad2f2){return _0x9ff659===_0x5ad2f2;},'NYzKm':function(_0x25787f,_0x20f58a){return _0x25787f===_0x20f58a;},'pfAqA':_0x1ccd97(0x129),'SKbgd':_0x1ccd97(0xd6),'zVStf':_0x1ccd97(0xc9),'ZnFzA':function(_0xa18d3a,_0x1f3342){return _0xa18d3a(_0x1f3342);},'AnaYp':_0x1ccd97(0xd5),'DYzKZ':_0x1ccd97(0x111),'okiol':_0x1ccd97(0xef),'rsEDg':'MbeWr','LLZKP':_0x1ccd97(0xb6),'zOUwg':_0x1ccd97(0xc2),'SbvWh':function(_0x5e39f5,_0x3ba26b){return _0x5e39f5 instanceof _0x3ba26b;},'eORGK':_0x1ccd97(0x155),'MkXJz':_0x1ccd97(0xd3)},_0xe42b1c=_0x5b2b82[_0x1ccd97(0x10a)],_0x374554=_0x5b2b82['auth'][_0x1ccd97(0x157)],_0x59e34f=_0x5b2b82['auth'][_0x1ccd97(0xf6)],_0x1fd390=_0x374554&&_0x154994[_0x1ccd97(0xb9)][_0x1ccd97(0x11c)](_0x374554);if(!_0x59e34f&&!_0xe42b1c[_0x1ccd97(0x10e)][_0x1ccd97(0x112)]&&_0x1fd390){_0x535f0a[_0x1ccd97(0x102)](_0x1ce6dc,new _0x154994['Error'](_0x154994['Error'][_0x1ccd97(0x11b)],_0x535f0a[_0x1ccd97(0x10c)]));return;}if(!_0x59e34f&&!_0xe42b1c[_0x1ccd97(0x10e)][_0x1ccd97(0xec)]&&!_0x1fd390&&_0x374554){if(_0x535f0a[_0x1ccd97(0xe7)]===_0x1ccd97(0x111)){_0x1ce6dc(new _0x154994[(_0x1ccd97(0xca))](_0x154994[_0x1ccd97(0xca)][_0x1ccd97(0x11b)],_0x535f0a[_0x1ccd97(0x108)]));return;}else return _0x1a6eff['some'](_0x24ce06=>{const _0x356944=_0x1ccd97;if(_0x535f0a[_0x356944(0xe1)](_0x24ce06,'*'))return!![];const _0x17553a=new _0x3d1991(_0x5bce03);if(_0x17553a[_0x356944(0xd1)](_0x21ed5c))return!![];});}if(!_0x59e34f&&!_0xe42b1c['fileUpload']['enableForPublic']&&!_0x374554){_0x1ce6dc(new _0x154994[(_0x1ccd97(0xca))](_0x154994[_0x1ccd97(0xca)][_0x1ccd97(0x11b)],_0x1ccd97(0x121)));return;}const _0x2e776c=_0xe42b1c['filesController'],{filename:_0x1d687b}=_0x5b2b82[_0x1ccd97(0x156)],_0xbbe2a4=_0x5b2b82[_0x1ccd97(0xe4)](_0x1ccd97(0x107));if(!_0x5b2b82[_0x1ccd97(0xd8)]||!_0x5b2b82[_0x1ccd97(0xd8)]['length']){if(_0x1ccd97(0xdf)===_0x535f0a[_0x1ccd97(0x131)]){_0x535f0a[_0x1ccd97(0x102)](_0x1ce6dc,new _0x154994[(_0x1ccd97(0xca))](_0x154994[_0x1ccd97(0xca)][_0x1ccd97(0x11b)],_0x535f0a[_0x1ccd97(0xfa)]));return;}else{_0x18ef62[_0x1ccd97(0x147)](_0x1ccd97(0xc5),_0x3c711e);const _0x2f47f8=_0x23acd4['resolveError'](_0x5aefc1,{'code':_0x58e8de[_0x1ccd97(0xca)][_0x1ccd97(0x148)],'message':_0x1ccd97(0xc6)});_0x5a5763(_0x2f47f8);}}const _0x2889d9=_0x2e776c['validateFilename'](_0x1d687b);if(_0x2889d9){_0x535f0a[_0x1ccd97(0x102)](_0x1ce6dc,_0x2889d9);return;}const _0x1280e9=_0xe42b1c['fileUpload']?.[_0x1ccd97(0xf5)];if(!_0x59e34f&&_0x1280e9){const _0x335b7c=_0x1cf568=>{const _0x2e4096=_0x1ccd97;return _0x1280e9[_0x2e4096(0xf4)](_0x3cf273=>{const _0x217833=_0x2e4096,_0x27c479={'Addha':function(_0x969c97,_0x1359ad){return _0x969c97(_0x1359ad);}};if(_0x535f0a[_0x217833(0x154)](_0x3cf273,'*'))return!![];const _0x33c8ae=new RegExp(_0x1280e9);if(_0x33c8ae[_0x217833(0xd1)](_0x1cf568)){if(_0x217833(0x129)===_0x535f0a[_0x217833(0x152)])return!![];else{const _0x109ee7={'qhDCM':function(_0x2dad25,_0x1fed90){const _0x5168b2=_0x217833;return _0x27c479[_0x5168b2(0xf0)](_0x2dad25,_0x1fed90);},'FkRlC':_0x217833(0x135),'TAVZF':_0x217833(0x147)};return new _0x52ee((_0x57ac6a,_0x4e5c6e)=>{const _0x263d4a=_0x217833,_0x2600b9={'VScGI':_0x109ee7['FkRlC']};_0x461a0e[_0x263d4a(0xe4)](_0x11487c,_0x142634=>{const _0xa6467=_0x263d4a;_0x142634['setDefaultEncoding']('base64');let _0x4813d6='data:'+_0x142634['headers'][_0x2600b9['VScGI']]+_0xa6467(0x14f);_0x142634['on'](_0xa6467(0xc9),_0x5bafc5=>_0x4813d6+=_0x5bafc5),_0x142634['on'](_0xa6467(0x133),()=>_0x57ac6a(_0x4813d6));})['on'](_0x109ee7[_0x263d4a(0x104)],_0x3b738a=>{const _0x585d52=_0x263d4a;_0x109ee7['qhDCM'](_0x4e5c6e,_0x585d52(0x120)+_0x231e37+':\x20'+_0x3b738a[_0x585d52(0xd7)]);});});}}});};let _0x513440=_0xbbe2a4;if(_0x1d687b&&_0x1d687b[_0x1ccd97(0xba)]('.'))_0x513440=_0x1d687b[_0x1ccd97(0xce)]('.')[0x1];else _0xbbe2a4&&_0xbbe2a4[_0x1ccd97(0xba)]('/')&&(_0x535f0a[_0x1ccd97(0x11a)]===_0x535f0a['zOUwg']?_0x513440=_0xbbe2a4[_0x1ccd97(0xce)]('/')[0x1]:(_0x5be53f['fileSize']=null,_0x471b1b={'url':_0x3a4023[_0x1ccd97(0x13b)](),'name':_0x45f0c3[_0x1ccd97(0x14c)]}));_0x513440=_0x513440[_0x1ccd97(0xce)]('\x20')[_0x1ccd97(0x11d)]('');if(!_0x335b7c(_0x513440)){_0x1ce6dc(new _0x154994[(_0x1ccd97(0xca))](_0x154994[_0x1ccd97(0xca)][_0x1ccd97(0x11b)],_0x1ccd97(0x158)+_0x513440+_0x1ccd97(0xdc)));return;}}const _0x11c94b=_0x5b2b82[_0x1ccd97(0xd8)][_0x1ccd97(0x15f)](_0x1ccd97(0xd6)),_0x1d3d86=new _0x154994['File'](_0x1d687b,{'base64':_0x11c94b},_0xbbe2a4),{metadata:metadata={},tags:tags={}}=_0x5b2b82[_0x1ccd97(0xc3)]||{};try{Utils[_0x1ccd97(0xe8)](_0xe42b1c,metadata),Utils['checkProhibitedKeywords'](_0xe42b1c,tags);}catch(_0x3f1080){_0x1ce6dc(new _0x154994['Error'](_0x154994[_0x1ccd97(0xca)][_0x1ccd97(0x14e)],_0x3f1080));return;}_0x1d3d86[_0x1ccd97(0xcc)](tags),_0x1d3d86['setMetadata'](metadata);const _0x51bad8=Buffer[_0x1ccd97(0xde)](_0x5b2b82['body']),_0x86a726={'file':_0x1d3d86,'fileSize':_0x51bad8};try{const _0x2adad9=await triggers['maybeRunFileTrigger'](triggers[_0x1ccd97(0xf2)][_0x1ccd97(0x141)],_0x86a726,_0xe42b1c,_0x5b2b82[_0x1ccd97(0x15b)]);let _0x311501;_0x535f0a[_0x1ccd97(0x139)](_0x2adad9,_0x154994[_0x1ccd97(0x12e)])&&(_0x86a726['file']=_0x2adad9,_0x2adad9[_0x1ccd97(0x13b)]()&&(_0x86a726[_0x1ccd97(0x115)]=null,_0x311501={'url':_0x2adad9[_0x1ccd97(0x13b)](),'name':_0x2adad9[_0x1ccd97(0x14c)]}));if(!_0x311501){if(_0x535f0a[_0x1ccd97(0x154)](_0x535f0a['eORGK'],_0x535f0a[_0x1ccd97(0xbe)])){_0x28bcef[_0x1ccd97(0xcd)](_0x535f0a[_0x1ccd97(0x110)]);let _0x3a937b='data:'+_0x2c6b0b[_0x1ccd97(0x151)][_0x1ccd97(0x135)]+_0x1ccd97(0x14f);_0x2c629f['on'](_0x535f0a['zVStf'],_0x168941=>_0x3a937b+=_0x168941),_0x38a947['on'](_0x1ccd97(0x133),()=>_0xa3da31(_0x3a937b));}else{await addFileDataIfNeeded(_0x86a726[_0x1ccd97(0x12b)]);const _0x18b44f=Buffer['from'](_0x86a726[_0x1ccd97(0x12b)][_0x1ccd97(0x12c)],_0x1ccd97(0xd6));_0x86a726[_0x1ccd97(0x115)]=Buffer['byteLength'](_0x18b44f);const _0x4d228f={'metadata':_0x86a726[_0x1ccd97(0x12b)][_0x1ccd97(0x149)]},_0x281129=Object[_0x1ccd97(0x134)](_0x86a726[_0x1ccd97(0x12b)][_0x1ccd97(0xea)])[_0x1ccd97(0x14a)]>0x0?{'tags':_0x86a726[_0x1ccd97(0x12b)][_0x1ccd97(0xea)]}:{};Object[_0x1ccd97(0xe0)](_0x4d228f,_0x281129);const _0x263e4c=await _0x2e776c[_0x1ccd97(0xbf)](_0xe42b1c,_0x86a726[_0x1ccd97(0x12b)]['_name'],_0x18b44f,_0x86a726[_0x1ccd97(0x12b)][_0x1ccd97(0x114)][_0x1ccd97(0x103)],_0x4d228f);_0x86a726[_0x1ccd97(0x12b)][_0x1ccd97(0x14c)]=_0x263e4c[_0x1ccd97(0xc7)],_0x86a726[_0x1ccd97(0x12b)][_0x1ccd97(0x13f)]=_0x263e4c[_0x1ccd97(0x13b)],_0x86a726[_0x1ccd97(0x12b)]['_requestTask']=null,_0x86a726['file'][_0x1ccd97(0x105)]=Promise['resolve'](_0x86a726[_0x1ccd97(0x12b)]),_0x311501={'url':_0x263e4c[_0x1ccd97(0x13b)],'name':_0x263e4c[_0x1ccd97(0xc7)]};}}await triggers[_0x1ccd97(0xd2)](triggers['Types']['afterSave'],_0x86a726,_0xe42b1c,_0x5b2b82[_0x1ccd97(0x15b)]),_0x475c48[_0x1ccd97(0x11f)](0xc9),_0x475c48[_0x1ccd97(0x13a)](_0x1ccd97(0x10b),_0x311501[_0x1ccd97(0x13b)]),_0x475c48['json'](_0x311501);}catch(_0x384b83){_0x95257e['error'](_0x1ccd97(0x146),_0x384b83);const _0x2df0fa=triggers[_0x1ccd97(0xc1)](_0x384b83,{'code':_0x154994[_0x1ccd97(0xca)][_0x1ccd97(0x11b)],'message':'Could\x20not\x20store\x20file:\x20'+_0x86a726['file'][_0x1ccd97(0x14c)]+'.'});_0x1ce6dc(_0x2df0fa);}}async[_0x4c1181(0xd4)](_0x3f9429,_0x4579ef,_0x3253d8){const _0x559072=_0x4c1181,_0x25f13a={'NgpTF':_0x559072(0xc5),'cKocR':'Could\x20not\x20delete\x20file.','rDMBw':function(_0x13dcda,_0x569d96){return _0x13dcda(_0x569d96);}};try{const {filesController:_0x43cac2}=_0x3f9429[_0x559072(0x10a)],{filename:_0x4ffe06}=_0x3f9429['params'],_0x30257b=new _0x154994[(_0x559072(0x12e))](_0x4ffe06);_0x30257b[_0x559072(0x13f)]=_0x43cac2[_0x559072(0xb8)][_0x559072(0xf3)](_0x3f9429[_0x559072(0x10a)],_0x4ffe06);const _0x353343={'file':_0x30257b,'fileSize':null};await triggers['maybeRunFileTrigger'](triggers[_0x559072(0xf2)][_0x559072(0x117)],_0x353343,_0x3f9429['config'],_0x3f9429[_0x559072(0x15b)]),await _0x43cac2[_0x559072(0x100)](_0x3f9429[_0x559072(0x10a)],_0x4ffe06),await triggers['maybeRunFileTrigger'](triggers[_0x559072(0xf2)][_0x559072(0xd9)],_0x353343,_0x3f9429['config'],_0x3f9429[_0x559072(0x15b)]),_0x4579ef[_0x559072(0x11f)](0xc8),_0x4579ef[_0x559072(0x133)]();}catch(_0x52b027){_0x95257e['error'](_0x25f13a['NgpTF'],_0x52b027);const _0xde1510=triggers[_0x559072(0xc1)](_0x52b027,{'code':_0x154994[_0x559072(0xca)][_0x559072(0x148)],'message':_0x25f13a[_0x559072(0x12a)]});_0x25f13a[_0x559072(0x14b)](_0x3253d8,_0xde1510);}}async[_0x4c1181(0xe9)](_0x4419f7,_0x24a51a){const _0x4f9c8b=_0x4c1181;try{const _0x25d4e9=_0x24c0f5[_0x4f9c8b(0xe4)](_0x4419f7[_0x4f9c8b(0x156)][_0x4f9c8b(0xc0)]),{filesController:_0x58c965}=_0x25d4e9,{filename:_0x33f67a}=_0x4419f7[_0x4f9c8b(0x156)],_0x29a7b3=await _0x58c965['getMetadata'](_0x33f67a);_0x24a51a[_0x4f9c8b(0x11f)](0xc8),_0x24a51a['json'](_0x29a7b3);}catch(_0x2230fd){_0x24a51a['status'](0xc8),_0x24a51a[_0x4f9c8b(0xfb)]({});}}}function isFileStreamable(_0x1ba072,_0xd2dd05){const _0x3ba91a=_0x4c1181,_0x23d4ce={'ByUiF':function(_0x570194,_0x3e8dbd){return _0x570194(_0x3e8dbd);},'qyCWR':function(_0x598aec,_0x5bc9d9){return _0x598aec(_0x5bc9d9);},'Ehbmx':_0x3ba91a(0x132)},_0x1950b8=(_0x1ba072[_0x3ba91a(0xe4)]('Range')||'/-/')[_0x3ba91a(0xce)]('-'),_0x4c3d9d=Number(_0x1950b8[0x0]),_0x10c36b=_0x23d4ce['ByUiF'](Number,_0x1950b8[0x1]);return(!isNaN(_0x4c3d9d)||!_0x23d4ce[_0x3ba91a(0xbb)](isNaN,_0x10c36b))&&typeof _0xd2dd05[_0x3ba91a(0xb8)][_0x3ba91a(0x128)]===_0x23d4ce[_0x3ba91a(0x126)];}