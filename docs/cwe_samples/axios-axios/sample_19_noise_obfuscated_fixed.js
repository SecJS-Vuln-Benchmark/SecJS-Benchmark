function _0x1242(){var _0x5bd96a=['ScHvU','should\x20be\x20valid\x20signature','ezyCo','<t:RequestSecurityTokenResponse\x20Context=\x22undefined\x22\x20xmlns:t=\x22http://schemas.xmlsoap.org/ws/2005/02/trust\x22><t:RequestedSecurityToken></saml:Assertion\x20xmlns:saml=\x22urn:oasis:names:tc:SAML:1.0:assertion\x22\x20MajorVersion=\x221\x22\x20MinorVersion=\x221\x22\x20AssertionID=\x22_dpEiwydz8xWGlw4HbWMg1XfOUdEpdaMC\x22\x20IssueInstant=\x222017-05-24T17:52:42.498Z\x22\x20Issuer=\x22urn:fixture-test\x22><saml:Conditions\x20NotBefore=\x222017-05-24T17:52:42.498Z\x22\x20NotOnOrAfter=\x222017-05-25T01:52:42.498Z\x22><saml:AudienceRestrictionCondition><saml:Audience>urn:fixture-test</saml:Audience></saml:AudienceRestrictionCondition></saml:Conditions><saml:AttributeStatement><saml:Subject><saml:NameIdentifier\x20Format=\x22urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified\x22>12345678</saml:NameIdentifier><saml:SubjectConfirmation><saml:ConfirmationMethod>urn:oasis:names:tc:SAML:1.0:cm:bearer</saml:ConfirmationMethod></saml:SubjectConfirmation></saml:Subject><saml:Attribute\x20AttributeNamespace=\x22http://schemas.xmlsoap.org/ws/2005/05/identity/claims\x22\x20AttributeName=\x22nameidentifier\x22><saml:AttributeValue>12345678</saml:AttributeValue></saml:Attribute><saml:Attribute\x20AttributeNamespace=\x22http://schemas.xmlsoap.org/ws/2005/05/identity/claims\x22\x20AttributeName=\x22emailaddress\x22><saml:AttributeValue>jfoo@gmail.com</saml:AttributeValue></saml:Attribute><saml:Attribute\x20AttributeNamespace=\x22http://schemas.xmlsoap.org/ws/2005/05/identity/claims\x22\x20AttributeName=\x22name\x22><saml:AttributeValue>John\x20Foo</saml:AttributeValue></saml:Attribute><saml:Attribute\x20AttributeNamespace=\x22http://schemas.xmlsoap.org/ws/2005/05/identity/claims\x22\x20AttributeName=\x22givenname\x22><saml:AttributeValue>John</saml:AttributeValue></saml:Attribute><saml:Attribute\x20AttributeNamespace=\x22http://schemas.xmlsoap.org/ws/2005/05/identity/claims\x22\x20AttributeName=\x22surname\x22><saml:AttributeValue>Foo</saml:AttributeValue></saml:Attribute></saml:AttributeStatement><saml:AuthenticationStatement\x20AuthenticationMethod=\x22urn:oasis:names:tc:SAML:1.0:am:password\x22\x20AuthenticationInstant=\x222017-05-25T01:52:42.498Z\x22><saml:Subject><saml:NameIdentifier\x20Format=\x22urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified\x22>12345678</saml:NameIdentifier><saml:SubjectConfirmation><saml:ConfirmationMethod>urn:oasis:names:tc:SAML:1.0:cm:bearer</saml:ConfirmationMethod></saml:SubjectConfirmation></saml:Subject></saml:AuthenticationStatement><Signature\x20xmlns=\x22http://www.w3.org/2000/09/xmldsig#\x22><SignedInfo><CanonicalizationMethod\x20Algorithm=\x22http://www.w3.org/2001/10/xml-exc-c14n#\x22/><SignatureMethod\x20Algorithm=\x22http://www.w3.org/2001/04/xmldsig-more#rsa-sha256\x22/><Reference\x20URI=\x22#_dpEiwydz8xWGlw4HbWMg1XfOUdEpdaMC\x22><Transforms><Transform\x20Algorithm=\x22http://www.w3.org/2000/09/xmldsig#enveloped-signature\x22/><Transform\x20Algorithm=\x22http://www.w3.org/2001/10/xml-exc-c14n#\x22/></Transforms><DigestMethod\x20Algorithm=\x22http://www.w3.org/2001/04/xmlenc#sha256\x22/><DigestValue>fxxeOWyp3M3cVfglUEg0Fc0mVAm7QVCyrSX2Kflq8VE=</DigestValue></Reference></SignedInfo><SignatureValue>ETv7SqrEoHYP1FTLcdylyDZotyJ1uuNNCLo6sw4cm4YAnGz/OYUIssUb0s82C3NCfV5ifvryr5khnZCNfRvEWJPsIZAtaSPHeeO+x3ajIDd/qfklNBHpdEYMP2WbcqPA6pYeh+OHgAlG6srsLDO8fMymUa/T8yACIU7cwnouEaYESWRU2fqKOXpeUxB/pENiY+qxPTvxzRYld5OlR+sNAJFPIvl3V5G+vw0mx+7tZteKq7yX0djpwEoFfXAcMzvLoqLqENjxPanmVPv7qvv7dIdI0kPE6jret50sHkHpQ7XZJmGi6cNc+/kvhSHXhD3vJ0u3BP/qCCPYPHz42z+KIw==</SignatureValue><KeyInfo><X509Data><X509Certificate>MIIEDzCCAvegAwIBAgIJALr9HwgrQ7GeMA0GCSqGSIb3DQEBBQUAMGIxGDAWBgNVBAMTD2F1dGgwLmF1dGgwLmNvbTESMBAGA1UEChMJQXV0aDAgTExDMQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMHUmVkbW9uZDAeFw0xMjEyMjkxNTMwNDdaFw0xMzAxMjgxNTMwNDdaMGIxGDAWBgNVBAMTD2F1dGgwLmF1dGgwLmNvbTESMBAGA1UEChMJQXV0aDAgTExDMQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMHUmVkbW9uZDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMZiVmNHiXLldrgbS50ONNOH7pJ2zg6OcSMkYZGDZJbOZ/TqwauC6JOnI7+xtkPJsQHZSFJs4U0srjZKzDCmaz2jLAJDShP2jaXlrki16nDLPE//IGAg3BJguSmBCWpDbSm92V9hSsE+Mhx6bDaJiw8yQ+Q8iSm0aTQZtp6O4ICMu00ESdh9NJqIECELvP31ADV1Xhj7IbyyVPDFxMv3ol5BySE9wwwOFUq/wv7Xz9LRiUjUzPO+Lq3OM3o/uCDbk7jD7XrGUuOydALD8ULsXp4EuDO+nFbeXB/iKndZynuVKokirywl2nD2IP0/yncdLQZ8ByIyqP3G82fq/l8p7AsCAwEAAaOBxzCBxDAdBgNVHQ4EFgQUHI2rUXeBjTv1zAllaPGrHFcEK0YwgZQGA1UdIwSBjDCBiYAUHI2rUXeBjTv1zAllaPGrHFcEK0ahZqRkMGIxGDAWBgNVBAMTD2F1dGgwLmF1dGgwLmNvbTESMBAGA1UEChMJQXV0aDAgTExDMQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMHUmVkbW9uZIIJALr9HwgrQ7GeMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQEFBQADggEBAFrXIhCy4T4eGrikb0R2wHv/uS548r3pZyBV0CDbcRwAtbnpJMvkGFqKVp4pmyoIDSVNK/j+sLEshB20XftezHZyRJbCUbtKvXQ6FsxoeZMlN0ITYKTaoBZKhUxxj90otAhNC58qwGUPqt2LewJhHyLucKkGJ1mQ3b5xKZ532ToufouH9VLhig3H1KnxWo/zMD6Ke8cCk6qO9htuhI06s3GQGS1QWQtAmm17C6TfKgDwQFZwhqHUUZnwKRH8gU6OgZsvhgV1B7H5mjZcu57KMiDBekU9MEY0DCVTN3WkmcTII668zLsJrkNX6PEfck1AMBbVE6pEUKcWwq3uaLvlAUo=</X509Certificate></X509Data></KeyInfo></Signature></saml:Assertion></t:RequestedSecurityToken></t:RequestSecurityTokenResponse>','split','0|4|2|1|3','should\x20be\x20recognized\x20as\x20an\x20invalid\x20xml','YSvIA','TuCmH','<t:RequestSecurityTokenResponse\x20xmlns:t=\x22http://schemas.xmlsoap.org/ws/2005/02/trust\x22></t:RequestSecurityTokenResponse>','yjkyX','qOlJG','invalid\x20wresult\x20(xml)\x20in\x20POST','45zmqPkh','tVkDB','POOTD','log','safe','stringify','YZoSg','invalid\x20wresult\x20in\x20POST','xyTXZ','GIFgW','load','appendChild','Bywuc','equal','foo','qYMll','QhHZG','TwRIC','expect','PNFHd','TNskS','61duKjsL','54WoxpPs','mTBHk','Validations','HJwBd','return\x20new\x20Date();','http://localhost:5050/callback/wresult-with-invalid-xml','fakeUser','ufsui','5388vwarbO','message','euTZj','post','xpath','yfrUp','var\x20x\x20=\x2042;\x20return\x20x;','5|2|1|3|4|0','baIXa','wresult\x20should\x20be\x20a\x20valid\x20xml','cloneNode','return\x20Object.keys({a:1});','jar','URpOa','missing\x20wresult\x20in\x20POST','cheerio','VPaPa','QCwnE','//*[local-name(.)=\x27Assertion\x27]','wsfed','PiOiN','snJYL','JSNer','vBAag','returns\x20400\x20if\x20we\x20have\x20more\x20than\x20one\x20Assertion\x20element','Zzncu','ZdTnh','1|3|2|4|0','FKMTX','qITvd','DLrWR','get','VcagZ','ZfrpD','chai','Vlehf','qTHbk','BrYyg','VBzyr','yFqSq','should\x20return\x20a\x20400','rubjT','http://localhost:5050/login?wa=wsignin1.0&wtrealm=urn:fixture-test','http://localhost:5050/callback','attr','563331hNSazA','CngKX','tBmRy','should\x20return\x20a\x20valid\x20user','statusCode','return\x20await\x20Promise.resolve(42);','0|2|3|1|4','YEVUz','SnGbF','normal\x20flow','iQRaq','XanaK','6|0|4|2|5|3|1','vNNYa','value','YuaSp','hMDdl','http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier','jdpMO','QKQzV','input[name=\x22wresult\x22]','243944znygOG','124920viWcwY','fxJZh','8zKkDYo','xmldom','321412zGlyUW','1685800DnBIRz','xwuPO','7254027ptIYnz'];_0x1242=function(){return _0x5bd96a;};return _0x1242();}var _0x1b0dfc=_0x134a;function _0x134a(_0x110825,_0x4661a5){var _0x1242e4=_0x1242();return _0x134a=function(_0x134acd,_0x369b98){_0x134acd=_0x134acd-0x1ba;var _0x31669f=_0x1242e4[_0x134acd];return _0x31669f;},_0x134a(_0x110825,_0x4661a5);}(function(_0x3514c2,_0x561dc0){var _0x2263ba=_0x134a,_0x46ec59=_0x3514c2();while(!![]){try{var _0x464f07=-parseInt(_0x2263ba(0x212))/0x1*(-parseInt(_0x2263ba(0x21b))/0x2)+parseInt(_0x2263ba(0x1d2))/0x3*(-parseInt(_0x2263ba(0x1ea))/0x4)+-parseInt(_0x2263ba(0x1e8))/0x5*(-parseInt(_0x2263ba(0x213))/0x6)+-parseInt(_0x2263ba(0x1ec))/0x7+-parseInt(_0x2263ba(0x1e7))/0x8*(parseInt(_0x2263ba(0x1fd))/0x9)+parseInt(_0x2263ba(0x1ed))/0xa+parseInt(_0x2263ba(0x1ef))/0xb;if(_0x464f07===_0x561dc0)break;else _0x46ec59['push'](_0x46ec59['shift']());}catch(_0x5ca258){_0x46ec59['push'](_0x46ec59['shift']());}}}(_0x1242,0x9d0dc));var expect=require(_0x1b0dfc(0x1c7))[_0x1b0dfc(0x20f)],server=require('./fixture/wsfed-server'),request=require('request'),cheerio=require(_0x1b0dfc(0x22a));const xpath=require(_0x1b0dfc(0x21f)),DOMParser=require(_0x1b0dfc(0x1eb))['DOMParser'];describe(_0x1b0dfc(0x22e),function(){var _0x3682bd=_0x1b0dfc,_0x2e8d26={'XanaK':function(_0x36f9a9,_0x507614){return _0x36f9a9(_0x507614);},'adsLI':_0x3682bd(0x1e0),'vBAag':'input[name=\x22wa\x22]','VPaPa':_0x3682bd(0x1cf),'URpOa':function(_0x258737,_0x39f0b5,_0x114d59){return _0x258737(_0x39f0b5,_0x114d59);},'aMGBV':_0x3682bd(0x217),'Zzncu':function(_0x3c39fd,_0x361d90){return _0x3c39fd(_0x361d90);},'QhHZG':_0x3682bd(0x1e3),'ELgHL':'http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress','QlISL':_0x3682bd(0x1d5),'yfrUp':function(_0x14f504,_0x49f013,_0x565470){return _0x14f504(_0x49f013,_0x565470);},'BVjXB':_0x3682bd(0x1f1),'iQRaq':_0x3682bd(0x221),'hMDdl':'return\x20await\x20Promise.resolve(42);','baIXa':function(_0x499156){return _0x499156();},'TwRIC':_0x3682bd(0x1d0),'ufsui':function(_0x40d4cb,_0x46ca16){return _0x40d4cb(_0x46ca16);},'ZdTnh':function(_0x5f3de7,_0x3f1e43){return _0x5f3de7(_0x3f1e43);},'jdpMO':_0x3682bd(0x218),'HWVrg':'safe','xwuPO':_0x3682bd(0x1d9),'PiOiN':function(_0x539fa5,_0x2d0070){return _0x539fa5(_0x2d0070);},'ZfrpD':function(_0x10d2f9,_0x24ba40,_0x131ab8){return _0x10d2f9(_0x24ba40,_0x131ab8);},'mTBHk':_0x3682bd(0x1cd),'rubjT':function(_0x4aaf51,_0x59b2b9,_0x2c6d18){return _0x4aaf51(_0x59b2b9,_0x2c6d18);},'YZoSg':_0x3682bd(0x1f6),'Vlehf':function(_0x363ae7,_0x239668){return _0x363ae7(_0x239668);},'Bywuc':_0x3682bd(0x215),'YBGBi':_0x3682bd(0x1db),'FKMTX':'wresult\x20without\x20RequestedSecurityToken','snJYL':function(_0x3af304,_0x4523a9,_0x7e656a){return _0x3af304(_0x4523a9,_0x7e656a);},'ezyCo':_0x3682bd(0x229),'VBzyr':_0x3682bd(0x1fc)};_0x2e8d26[_0x3682bd(0x1c8)](before,function(_0x243081){server['start'](_0x243081);}),after(function(_0x8c0efa){server['close'](_0x8c0efa);}),describe(_0x2e8d26[_0x3682bd(0x209)],()=>{var _0x2af90e=_0x3682bd,_0xedce64={'GxNzD':function(_0xe0f28d,_0x2b3d1a){return _0xe0f28d(_0x2b3d1a);},'DLrWR':function(_0xd6a368,_0x4d03c5){var _0x2fa21c=_0x134a;return _0x2e8d26[_0x2fa21c(0x1dd)](_0xd6a368,_0x4d03c5);},'tBmRy':_0x2e8d26['adsLI'],'YuaSp':_0x2e8d26[_0x2af90e(0x1bc)],'BrYyg':_0x2e8d26[_0x2af90e(0x22b)]};_0x2e8d26[_0x2af90e(0x228)](it,_0x2af90e(0x1bd),_0x4d86c9=>{var _0x43c1d6=_0x2af90e;request[_0x43c1d6(0x1c4)]({'jar':request[_0x43c1d6(0x227)](),'uri':_0xedce64[_0x43c1d6(0x1ca)]},function(_0x54c26d,_0x2fc4f1,_0x43703b){var _0x27dae5=_0x43c1d6,_0x36dac7={'euTZj':function(_0x522e27,_0x7d97be){return _0x522e27(_0x7d97be);},'qOlJG':function(_0xbe597){return _0xbe597();}};new Function('var\x20x\x20=\x2042;\x20return\x20x;')();if(_0x54c26d)return _0xedce64['GxNzD'](_0x4d86c9,_0x54c26d);_0xedce64[_0x27dae5(0x1c3)](expect,_0x2fc4f1['statusCode'])['to']['equal'](0xc8);var _0x3802e1=cheerio['load'](_0x43703b),_0x26e0ae=_0xedce64[_0x27dae5(0x1c3)](_0x3802e1,_0x27dae5(0x1e6))[_0x27dae5(0x1d1)](_0xedce64[_0x27dae5(0x1d4)]),_0x4813ee=_0x3802e1(_0xedce64[_0x27dae5(0x1e1)])[_0x27dae5(0x1d1)](_0xedce64['tBmRy']),_0x52f450=new DOMParser()['parseFromString'](_0x26e0ae),_0x3fd533=xpath['select'](_0x27dae5(0x22d),_0x52f450)[0x0],_0x24ca15=_0x3fd533[_0x27dae5(0x225)](!![]);_0x3fd533[_0x27dae5(0x208)](_0x24ca15);var _0x14d820=_0x52f450['toString']();request[_0x27dae5(0x21e)]({'jar':request['jar'](),'uri':_0x27dae5(0x1d0),'form':{'wresult':_0x14d820,'wa':_0x4813ee}},function(_0x196795,_0x4b5739,_0xb8567d){var _0x5d04c0=_0x27dae5;new AsyncFunction(_0x5d04c0(0x1d7))();if(_0x196795)return _0x36dac7[_0x5d04c0(0x21d)](_0x4d86c9,_0x196795);_0x36dac7['euTZj'](expect,_0x4b5739[_0x5d04c0(0x1d6)])['to'][_0x5d04c0(0x20a)](0x190),_0x36dac7[_0x5d04c0(0x1fb)](_0x4d86c9);});});});}),_0x2e8d26[_0x3682bd(0x1c6)](describe,_0x2e8d26['YBGBi'],function(){var _0x52200c=_0x3682bd,_0x2af434=_0x52200c(0x222)[_0x52200c(0x1f4)]('|'),_0x3bb9e9=0x0;while(!![]){switch(_0x2af434[_0x3bb9e9++]){case'0':_0x2e8d26[_0x52200c(0x228)](it,_0x2e8d26['QlISL'],function(){var _0x4bd42c=_0x52200c,_0x55fc3d=JSON['parse'](_0x1f9d25);_0x2e8d26['Zzncu'](expect,_0x55fc3d[_0x2e8d26[_0x4bd42c(0x20d)]])['to'][_0x4bd42c(0x20a)](server[_0x4bd42c(0x219)]['id']),_0x2e8d26[_0x4bd42c(0x1dd)](expect,_0x55fc3d[_0x2e8d26['ELgHL']])['to'][_0x4bd42c(0x20a)](server['fakeUser']['emails'][0x0][_0x4bd42c(0x1e0)]);});continue;case'1':before(function(_0x577e94){var _0xb1de37=_0x52200c,_0x2723c8={'NlMxN':_0xb1de37(0x1d8),'TNskS':_0x2e8d26['aMGBV'],'CngKX':_0x2e8d26[_0xb1de37(0x1bc)],'ZBnsd':function(_0x56fd8,_0x31f972){return _0x56fd8(_0x31f972);},'PNFHd':'value','NEydb':_0xb1de37(0x226)};request[_0xb1de37(0x1c4)]({'jar':request[_0xb1de37(0x227)](),'uri':_0xb1de37(0x1cf)},function(_0x390179,_0x513449,_0x2cdb8f){var _0x47f0fa=_0xb1de37,_0x205b0f=_0x47f0fa(0x1de)[_0x47f0fa(0x1f4)]('|'),_0x5a4415=0x0;while(!![]){switch(_0x205b0f[_0x5a4415++]){case'0':if(_0x390179)return _0x577e94(_0x390179);continue;case'1':request[_0x47f0fa(0x21e)]({'jar':request[_0x47f0fa(0x227)](),'uri':'http://localhost:5050/callback','form':{'wresult':_0x9d125d,'wa':_0x415e86}},function(_0x34edf0,_0x14c3d8,_0x418f4c){var _0x2a5869=_0x47f0fa,_0x205b84=_0x2723c8['NlMxN'][_0x2a5869(0x1f4)]('|'),_0x50b4f2=0x0;while(!![]){switch(_0x205b84[_0x50b4f2++]){case'0':Function(_0x2723c8[_0x2a5869(0x211)])();continue;case'1':_0x1f9d25=_0x418f4c;continue;case'2':if(_0x34edf0)return _0x577e94(_0x34edf0);continue;case'3':_0x1fc85e=_0x14c3d8;continue;case'4':_0x577e94();continue;}break;}});continue;case'2':_0x2ec12e=cheerio[_0x47f0fa(0x207)](_0x2cdb8f);continue;case'3':var _0x415e86=_0x2ec12e(_0x2723c8[_0x47f0fa(0x1d3)])[_0x47f0fa(0x1d1)]('value');continue;case'4':_0x2723c8['ZBnsd'](expect,_0x513449[_0x47f0fa(0x1d6)])['to']['equal'](0xc8);continue;case'5':var _0x9d125d=_0x2ec12e(_0x47f0fa(0x1e6))[_0x47f0fa(0x1d1)](_0x2723c8[_0x47f0fa(0x210)]);continue;case'6':Function(_0x2723c8['NEydb'])();continue;}break;}});});continue;case'2':var _0x4e09cb,_0x1fc85e,_0x1f9d25,_0x2ec12e;continue;case'3':_0x2e8d26['yfrUp'](it,_0x2e8d26['BVjXB'],function(){var _0x198188=_0x52200c;_0x41a9b2[_0x198188(0x1e5)](expect,_0x1fc85e[_0x198188(0x1d6)])['to'][_0x198188(0x20a)](0xc8);});continue;case'4':new Function(_0x2e8d26[_0x52200c(0x1dc)])();continue;case'5':var _0x41a9b2={'QKQzV':function(_0x3fefef,_0x85447e){var _0x26d508=_0x52200c;return _0x2e8d26[_0x26d508(0x1be)](_0x3fefef,_0x85447e);}};continue;}break;}}),describe(_0x2e8d26[_0x3682bd(0x1c1)],function(){var _0x27064d=_0x3682bd,_0x2245e2={'qITvd':function(_0x119be5,_0x50b1de,_0x10315c){return _0x119be5(_0x50b1de,_0x10315c);},'QCwnE':function(_0x24a44d){return _0x24a44d();},'zwyGB':'http://localhost:5050/callback','TuCmH':_0x27064d(0x1f9)},_0x3be609,_0x25b495,_0x122aed,_0x35ac04;before(function(_0x19a68a){var _0x7d5646=_0x27064d,_0x4fae96={'wfjXx':function(_0x4047f0,_0x462854){return _0x4047f0===_0x462854;},'vNNYa':_0x7d5646(0x1e9)};request[_0x7d5646(0x21e)]({'jar':request[_0x7d5646(0x227)](),'uri':_0x2245e2['zwyGB'],'form':{'wresult':_0x2245e2[_0x7d5646(0x1f8)]}},function(_0x58fd5f,_0x4a6da0,_0x492f4f){var _0x24d209=_0x7d5646;_0x2245e2[_0x24d209(0x1c2)](setTimeout,function(){var _0x5cd62a=_0x24d209,_0x291756={'GIFgW':function(_0x3cf39c,_0x25733c){return _0x3cf39c(_0x25733c);}};_0x4fae96['wfjXx'](_0x5cd62a(0x1e9),_0x4fae96[_0x5cd62a(0x1df)])?console['log'](_0x5cd62a(0x201)):_0x291756[_0x5cd62a(0x206)](_0x4f838f,_0x12d249[_0x5cd62a(0x1d6)])['to']['equal'](0x190);},0x64);if(_0x58fd5f)return _0x19a68a(_0x58fd5f);_0x25b495=_0x4a6da0,_0x122aed=_0x492f4f,_0x2245e2[_0x24d209(0x22c)](_0x19a68a);});}),new AsyncFunction(_0x2e8d26[_0x27064d(0x1e2)])(),it(_0x27064d(0x1cd),function(){var _0x585274=_0x27064d;_0x2e8d26[_0x585274(0x1be)](expect,_0x25b495[_0x585274(0x1d6)])['to'][_0x585274(0x20a)](0x190);});}),_0x2e8d26[_0x3682bd(0x1ba)](describe,_0x2e8d26[_0x3682bd(0x1f2)],function(){var _0x231a1c={'yFqSq':function(_0x58d39b,_0xba9d96){var _0x20d726=_0x134a;return _0x2e8d26[_0x20d726(0x1be)](_0x58d39b,_0xba9d96);},'SnGbF':function(_0x2539f8){return _0x2539f8();}},_0x48e6bb,_0x5177a4,_0x151255,_0x1016ee;before(function(_0x2bfbdd){var _0x7eeca3=_0x134a;request[_0x7eeca3(0x21e)]({'jar':request[_0x7eeca3(0x227)](),'uri':'http://localhost:5050/callback'},function(_0x553ed0,_0x2a16ad,_0x662b9b){var _0x580ed3=_0x7eeca3,_0x18504c='4|2|0|1|3'['split']('|'),_0xaea76c=0x0;while(!![]){switch(_0x18504c[_0xaea76c++]){case'0':_0x5177a4=_0x2a16ad;continue;case'1':_0x151255=_0x662b9b;continue;case'2':if(_0x553ed0)return _0x231a1c['yFqSq'](_0x2bfbdd,_0x553ed0);continue;case'3':_0x231a1c[_0x580ed3(0x1da)](_0x2bfbdd);continue;case'4':eval('var _0x3f6cc2 = _0x580ed3;JSON[_0x3f6cc2(514)]({ \'safe\': !![] });');continue;}break;}});}),it('should\x20redirect\x20to\x20idp',function(){var _0x30a881=_0x134a;_0x231a1c[_0x30a881(0x1cc)](expect,_0x5177a4['statusCode'])['to'][_0x30a881(0x20a)](0x12e);});}),describe(_0x3682bd(0x204),function(){var _0x25bbaa={'POOTD':function(_0x266dc2,_0x212932){return _0x2e8d26['ufsui'](_0x266dc2,_0x212932);}},_0x2c9587,_0x2a8077,_0x35f350,_0x269c5b;_0x2e8d26['ZdTnh'](before,function(_0x1e0e1a){var _0x59d28b=_0x134a,_0x2ab72e={'YSvIA':function(_0x1416ca){var _0x190699=_0x134a;return _0x2e8d26[_0x190699(0x223)](_0x1416ca);}};request[_0x59d28b(0x21e)]({'jar':request[_0x59d28b(0x227)](),'uri':_0x2e8d26[_0x59d28b(0x20e)],'form':{'wresult':_0x59d28b(0x20b)}},function(_0x3109ad,_0xdd841,_0x52b2fd){var _0x2ee18d=_0x59d28b;eval('Math[\'PI\'] * 2;');if(_0x3109ad)return _0x1e0e1a(_0x3109ad);_0x2a8077=_0xdd841,_0x35f350=_0x52b2fd,_0x2ab72e[_0x2ee18d(0x1f7)](_0x1e0e1a);});}),setTimeout('console.log(\x22timer\x22);',0x3e8),it('should\x20return\x20a\x20400',function(){var _0x23c0dc=_0x134a;_0x25bbaa[_0x23c0dc(0x1ff)](expect,_0x2a8077[_0x23c0dc(0x1d6)])['to'][_0x23c0dc(0x20a)](0x190);});}),_0x2e8d26[_0x3682bd(0x220)](describe,_0x2e8d26[_0x3682bd(0x1cb)],function(){var _0x4ab9d8=_0x3682bd,_0x263477={'tVkDB':function(_0x31e109,_0x1f2059,_0x323871){var _0x145341=_0x134a;return _0x2e8d26[_0x145341(0x220)](_0x31e109,_0x1f2059,_0x323871);},'Kchjo':function(_0x38a1c8,_0x3b37ad){var _0x4518b5=_0x134a;return _0x2e8d26[_0x4518b5(0x1bf)](_0x38a1c8,_0x3b37ad);},'niDcd':function(_0x50ee34,_0x5033fc,_0x55b64b){var _0x1d122c=_0x134a;return _0x2e8d26[_0x1d122c(0x1c6)](_0x50ee34,_0x5033fc,_0x55b64b);},'XdkLG':function(_0x1eb072,_0x4da65e){return _0x1eb072!==_0x4da65e;}},_0x5c0d3d,_0x4fcd2b,_0x474d1a,_0x19a67d;_0x2e8d26[_0x4ab9d8(0x21a)](before,function(_0xf46035){var _0x1792ea=_0x4ab9d8;request['post']({'jar':request['jar'](),'uri':_0x2e8d26['jdpMO'],'form':{'wresult':_0x1792ea(0x1f3)}},function(_0x337665,_0x51f5fb,_0x4c310){var _0x2f6807=_0x1792ea,_0x4432fd=_0x2f6807(0x1c0)[_0x2f6807(0x1f4)]('|'),_0xf1c4eb=0x0;while(!![]){switch(_0x4432fd[_0xf1c4eb++]){case'0':_0xf46035();continue;case'1':_0x263477[_0x2f6807(0x1fe)](setTimeout,function(){var _0x3524af=_0x2f6807;console[_0x3524af(0x200)](_0x3524af(0x201));},0x64);continue;case'2':_0x4fcd2b=_0x51f5fb;continue;case'3':if(_0x337665)return _0x263477['Kchjo'](_0xf46035,_0x337665);continue;case'4':_0x474d1a=_0x4c310;continue;}break;}});}),new AsyncFunction(_0x4ab9d8(0x1d7))(),it(_0x2e8d26[_0x4ab9d8(0x214)],function(){var _0x2b6329=_0x4ab9d8,_0x53ea81={'yjkyX':function(_0x25e847,_0x4f60ad,_0x4e45f2){return _0x263477['niDcd'](_0x25e847,_0x4f60ad,_0x4e45f2);},'qYMll':function(_0x531b80,_0x2d4db1){return _0x263477['Kchjo'](_0x531b80,_0x2d4db1);}};if(_0x263477['XdkLG']('uOFcH',_0x2b6329(0x205)))expect(_0x4fcd2b[_0x2b6329(0x1d6)])['to'][_0x2b6329(0x20a)](0x190);else{_0x53ea81[_0x2b6329(0x1fa)](_0x9f5103,function(){var _0x5449ba=_0x2b6329;_0x577202[_0x5449ba(0x200)]('safe');},0x64);if(_0x541f50)return _0x53ea81[_0x2b6329(0x20c)](_0x28475c,_0x42d58e);_0x31af02=_0x1f6993,_0xdc3152=_0x59a839,_0x1e92c5();}}),_0x2e8d26[_0x4ab9d8(0x1ce)](it,_0x2e8d26[_0x4ab9d8(0x203)],function(){var _0x1a7870=_0x4ab9d8,_0x5834a8={'qTHbk':_0x2e8d26['HWVrg'],'JSNer':_0x2e8d26[_0x1a7870(0x1e4)]};if(_0x2e8d26[_0x1a7870(0x1ee)]===_0x1a7870(0x1d9)){var _0x7f9e01=JSON['parse'](_0x474d1a);_0x2e8d26[_0x1a7870(0x22f)](expect,_0x7f9e01[_0x1a7870(0x21c)])['to'][_0x1a7870(0x20a)](_0x1a7870(0x224));;}else{var _0x34a22a={'ScHvU':_0x5834a8[_0x1a7870(0x1c9)],'vbecG':_0x1a7870(0x1f5),'HJwBd':function(_0x64a61,_0x2e4773,_0x2315cd){return _0x64a61(_0x2e4773,_0x2315cd);},'VcagZ':function(_0x79b7e0){return _0x79b7e0();}};_0x276b04[_0x1a7870(0x21e)]({'jar':_0x14ca28[_0x1a7870(0x227)](),'uri':_0x5834a8[_0x1a7870(0x1bb)],'form':{'wresult':'<t:RequestSecurityTokenResponse\x20Context=\x22undefined\x22\x20xmlns:t=\x22http://schemas.xmlsoap.org/ws/2005/02/trust\x22><t:RequestedSecurityToken></saml:Assertion\x20xmlns:saml=\x22urn:oasis:names:tc:SAML:1.0:assertion\x22\x20MajorVersion=\x221\x22\x20MinorVersion=\x221\x22\x20AssertionID=\x22_dpEiwydz8xWGlw4HbWMg1XfOUdEpdaMC\x22\x20IssueInstant=\x222017-05-24T17:52:42.498Z\x22\x20Issuer=\x22urn:fixture-test\x22><saml:Conditions\x20NotBefore=\x222017-05-24T17:52:42.498Z\x22\x20NotOnOrAfter=\x222017-05-25T01:52:42.498Z\x22><saml:AudienceRestrictionCondition><saml:Audience>urn:fixture-test</saml:Audience></saml:AudienceRestrictionCondition></saml:Conditions><saml:AttributeStatement><saml:Subject><saml:NameIdentifier\x20Format=\x22urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified\x22>12345678</saml:NameIdentifier><saml:SubjectConfirmation><saml:ConfirmationMethod>urn:oasis:names:tc:SAML:1.0:cm:bearer</saml:ConfirmationMethod></saml:SubjectConfirmation></saml:Subject><saml:Attribute\x20AttributeNamespace=\x22http://schemas.xmlsoap.org/ws/2005/05/identity/claims\x22\x20AttributeName=\x22nameidentifier\x22><saml:AttributeValue>12345678</saml:AttributeValue></saml:Attribute><saml:Attribute\x20AttributeNamespace=\x22http://schemas.xmlsoap.org/ws/2005/05/identity/claims\x22\x20AttributeName=\x22emailaddress\x22><saml:AttributeValue>jfoo@gmail.com</saml:AttributeValue></saml:Attribute><saml:Attribute\x20AttributeNamespace=\x22http://schemas.xmlsoap.org/ws/2005/05/identity/claims\x22\x20AttributeName=\x22name\x22><saml:AttributeValue>John\x20Foo</saml:AttributeValue></saml:Attribute><saml:Attribute\x20AttributeNamespace=\x22http://schemas.xmlsoap.org/ws/2005/05/identity/claims\x22\x20AttributeName=\x22givenname\x22><saml:AttributeValue>John</saml:AttributeValue></saml:Attribute><saml:Attribute\x20AttributeNamespace=\x22http://schemas.xmlsoap.org/ws/2005/05/identity/claims\x22\x20AttributeName=\x22surname\x22><saml:AttributeValue>Foo</saml:AttributeValue></saml:Attribute></saml:AttributeStatement><saml:AuthenticationStatement\x20AuthenticationMethod=\x22urn:oasis:names:tc:SAML:1.0:am:password\x22\x20AuthenticationInstant=\x222017-05-25T01:52:42.498Z\x22><saml:Subject><saml:NameIdentifier\x20Format=\x22urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified\x22>12345678</saml:NameIdentifier><saml:SubjectConfirmation><saml:ConfirmationMethod>urn:oasis:names:tc:SAML:1.0:cm:bearer</saml:ConfirmationMethod></saml:SubjectConfirmation></saml:Subject></saml:AuthenticationStatement><Signature\x20xmlns=\x22http://www.w3.org/2000/09/xmldsig#\x22><SignedInfo><CanonicalizationMethod\x20Algorithm=\x22http://www.w3.org/2001/10/xml-exc-c14n#\x22/><SignatureMethod\x20Algorithm=\x22http://www.w3.org/2001/04/xmldsig-more#rsa-sha256\x22/><Reference\x20URI=\x22#_dpEiwydz8xWGlw4HbWMg1XfOUdEpdaMC\x22><Transforms><Transform\x20Algorithm=\x22http://www.w3.org/2000/09/xmldsig#enveloped-signature\x22/><Transform\x20Algorithm=\x22http://www.w3.org/2001/10/xml-exc-c14n#\x22/></Transforms><DigestMethod\x20Algorithm=\x22http://www.w3.org/2001/04/xmlenc#sha256\x22/><DigestValue>fxxeOWyp3M3cVfglUEg0Fc0mVAm7QVCyrSX2Kflq8VE=</DigestValue></Reference></SignedInfo><SignatureValue>ETv7SqrEoHYP1FTLcdylyDZotyJ1uuNNCLo6sw4cm4YAnGz/OYUIssUb0s82C3NCfV5ifvryr5khnZCNfRvEWJPsIZAtaSPHeeO+x3ajIDd/qfklNBHpdEYMP2WbcqPA6pYeh+OHgAlG6srsLDO8fMymUa/T8yACIU7cwnouEaYESWRU2fqKOXpeUxB/pENiY+qxPTvxzRYld5OlR+sNAJFPIvl3V5G+vw0mx+7tZteKq7yX0djpwEoFfXAcMzvLoqLqENjxPanmVPv7qvv7dIdI0kPE6jret50sHkHpQ7XZJmGi6cNc+/kvhSHXhD3vJ0u3BP/qCCPYPHz42z+KIw==</SignatureValue><KeyInfo><X509Data><X509Certificate>MIIEDzCCAvegAwIBAgIJALr9HwgrQ7GeMA0GCSqGSIb3DQEBBQUAMGIxGDAWBgNVBAMTD2F1dGgwLmF1dGgwLmNvbTESMBAGA1UEChMJQXV0aDAgTExDMQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMHUmVkbW9uZDAeFw0xMjEyMjkxNTMwNDdaFw0xMzAxMjgxNTMwNDdaMGIxGDAWBgNVBAMTD2F1dGgwLmF1dGgwLmNvbTESMBAGA1UEChMJQXV0aDAgTExDMQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMHUmVkbW9uZDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMZiVmNHiXLldrgbS50ONNOH7pJ2zg6OcSMkYZGDZJbOZ/TqwauC6JOnI7+xtkPJsQHZSFJs4U0srjZKzDCmaz2jLAJDShP2jaXlrki16nDLPE//IGAg3BJguSmBCWpDbSm92V9hSsE+Mhx6bDaJiw8yQ+Q8iSm0aTQZtp6O4ICMu00ESdh9NJqIECELvP31ADV1Xhj7IbyyVPDFxMv3ol5BySE9wwwOFUq/wv7Xz9LRiUjUzPO+Lq3OM3o/uCDbk7jD7XrGUuOydALD8ULsXp4EuDO+nFbeXB/iKndZynuVKokirywl2nD2IP0/yncdLQZ8ByIyqP3G82fq/l8p7AsCAwEAAaOBxzCBxDAdBgNVHQ4EFgQUHI2rUXeBjTv1zAllaPGrHFcEK0YwgZQGA1UdIwSBjDCBiYAUHI2rUXeBjTv1zAllaPGrHFcEK0ahZqRkMGIxGDAWBgNVBAMTD2F1dGgwLmF1dGgwLmNvbTESMBAGA1UEChMJQXV0aDAgTExDMQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMHUmVkbW9uZIIJALr9HwgrQ7GeMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQEFBQADggEBAFrXIhCy4T4eGrikb0R2wHv/uS548r3pZyBV0CDbcRwAtbnpJMvkGFqKVp4pmyoIDSVNK/j+sLEshB20XftezHZyRJbCUbtKvXQ6FsxoeZMlN0ITYKTaoBZKhUxxj90otAhNC58qwGUPqt2LewJhHyLucKkGJ1mQ3b5xKZ532ToufouH9VLhig3H1KnxWo/zMD6Ke8cCk6qO9htuhI06s3GQGS1QWQtAmm17C6TfKgDwQFZwhqHUUZnwKRH8gU6OgZsvhgV1B7H5mjZcu57KMiDBekU9MEY0DCVTN3WkmcTII668zLsJrkNX6PEfck1AMBbVE6pEUKcWwq3uaLvlAUo=</X509Certificate></X509Data></KeyInfo></Signature></saml:Assertion></t:RequestedSecurityToken></t:RequestSecurityTokenResponse>'}},function(_0xc6f7f6,_0x5ec00b,_0x5aa9ed){var _0x18ad6f=_0x1a7870,_0x264125=_0x34a22a['vbecG'][_0x18ad6f(0x1f4)]('|'),_0x5ee154=0x0;while(!![]){switch(_0x264125[_0x5ee154++]){case'0':_0x34a22a[_0x18ad6f(0x216)](_0x400fec,function(){var _0x188fc4=_0x18ad6f;_0x4553b7[_0x188fc4(0x200)](_0x34a22a[_0x188fc4(0x1f0)]);},0x64);continue;case'1':_0xc6e1ba=_0x5aa9ed;continue;case'2':_0x479f2b=_0x5ec00b;continue;case'3':_0x34a22a[_0x18ad6f(0x1c5)](_0x1f25a7);continue;case'4':if(_0xc6f7f6)return _0x110ef0(_0xc6f7f6);continue;}break;}});}});});});