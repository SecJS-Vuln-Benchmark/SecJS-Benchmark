'use strict';function _0x144d(){const _0x135849=['PUQmg','LDSCY','eVcIi','fails\x20if\x20the\x20Upgrade\x20header\x20field\x20value\x20is\x20not\x20\x22websocket\x22','ws-','JEZVv','end','headers','eBzYf','resume','XLqXM','hwjlh','response','yTnID','QuNBQ','ZxrWa','SFNhW','pngty','WebSocketServer','eQtBP','Oqiwd','gkMEg','tuvDo','URFxc','xwFjK','nextTick','DyWVL','fRuTD','same\x20socket,\x20possibly\x20due\x20to\x20a\x20misconfiguration','handles\x20unsupported\x20extensions','BmFPh','YbyfJ','rKjnV','DVCct','qDGRa','uAHQS','\x5c\x5c.\x5cpipe\x5cws-pipe-','phYCh','YEhjB','ZTIwU','toString','baz','feoEj','anxwF','#shouldHandle','sJwTZ','2261928vUZDCV','iCVcf','send','foo;\x20bar','concat','doesn\x27t\x20emit\x20the\x20\x27connection\x27\x20event\x20if\x20socket\x20is\x20closed\x20prematurely','fails\x20if\x20the\x20Sec-WebSocket-Key\x20header\x20is\x20invalid\x20(1/2)','iklHu','qyrkw','doesn\x27t\x20close\x20a\x20precreated\x20server','Invalid\x20Sec-WebSocket-Protocol\x20header','eLnYQ','The\x20server\x20is\x20not\x20running','2903624rDMmjt','OFgaj','ALIZT','iJpNH','./duplex-pair','fYAkL','qaYCU','Ebmqk','XjZWV','options','onHWM','DhkMf','sdbup','/foo','Server','xQQrk','sEbZd','XOqNE','createServer','from','IEwId','YhMgt','honors\x20the\x20`WebSocket`\x20option','EqMLz','qYvNE','aPwvY','hPjfi','foo','#completeUpgrade','base64','Unexpected\x20\x27connection\x27\x20event','dlvPE','ZMktg','KdUVG','oTHqY','RHKxq','jRVVv','ODKVr','5652315PoZaop','split','https://example.com','fails\x20if\x20the\x20Sec-WebSocket-Key\x20header\x20is\x20invalid\x20(2/2)','throws\x20an\x20error\x20if\x20mutually\x20exclusive\x20options\x20are\x20specified','url','SiYNB','emrfT','zbCKt','VarTd','emits\x20the\x20\x27close\x27\x20event\x20if\x20client\x20tracking\x20is\x20disabled','kcULf','rgELu','KqGqm','websocket','throws','jFFRu','qdbuM','sXMlD','jCEcE','pop','fwJKH','Uvdfh','can\x20reject\x20client\x20asynchronously\x20w/\x20status\x20code','bugFE','gICOd','exposes\x20options\x20passed\x20to\x20constructor','NXfwn','oKcqD','avZNo','CpXIR','kEXdV','shouldHandle','_extensions','fails\x20if\x20the\x20HTTP\x20method\x20is\x20not\x20GET','cGWQn','GdWsh','allows\x20to\x20select\x20a\x20subprotocol','STATUS_CODES','uses\x20configuration\x20options','IXSLR','calls\x20the\x20callback\x20if\x20the\x20server\x20is\x20already\x20closed','PDUnT','KIqgG','UukGC','listenerCount','YhngF','pKIjL','yKLik','arIjX','listening','FwNhp','RhXYg','message','naaYS','../lib/sender','unexpected-response','FguJm','Invalid\x20or\x20unacceptable\x20Sec-WebSocket-Extensions\x20header','length','OcKMb','/?foo=bar','fails\x20if\x20the\x20WebSocket\x20server\x20is\x20closing\x20or\x20closed','xkFPw','jQrCY','FTfQU','PbegU','pJFQT','woLkF','HdNQO','Tpgjl','DBliM','TtrtY','koECo','CkXUE','closes\x20the\x20connection\x20when\x20path\x20doesn\x27t\x20match','CqPxK','puUvd','IodUa','upgrade','cRFKt','wFEwe','emits\x20the\x20\x27headers\x27\x20event','EerXk','ftvQD','join','once','iJRna','EXHHb','GKWQI','emits\x20the\x20\x27close\x27\x20event\x20if\x20the\x20server\x20is\x20already\x20closed','YgJFS','zimmR','yvmnm','fails\x20if\x20the\x20Sec-WebSocket-Version\x20header\x20is\x20invalid\x20(2/2)','RJDIB','HTCzz','\x22noServer\x22\x20options\x20must\x20be\x20specified$','33LqdCRP','/foo?bar=bar','pwMrZ','TApsG','GJuZs','randomBytes','BALrJ','BZkqI','EDAbc','njpkP','^TypeError:\x20One\x20and\x20only\x20one\x20of\x20the\x20\x22port\x22,\x20\x22server\x22,\x20or\x20','RUVOj','kmzCV','habZi','Sec-WebSocket-Version:\x2013','xZUOw','permessage-deflate;\x20client_max_window_bits','VWNpY','gKleH','return\x20Object.keys({a:1});','JPKdY','rIkgy','wsClientError','Must\x20not\x20close\x20pre-created\x20server','WwWKm','PMZzQ','MYSgf','unshift','nmTIy','jtkYT','handleUpgrade','frame','hDImy','zVwsc','.sock','binds\x20the\x20server\x20on\x20any\x20IPv6\x20address\x20when\x20available','qjFtx','Odecs','kaBAY','nJVmz','BTQLB','_maxPayload','RamMe','MPYEO','push','oCwxh','Qblux','ywABg','TFrbK','deepStrictEqual','DWjrL','eOeBN','xpxvS','ZqqBz','emits\x20an\x20error\x20if\x20http\x20server\x20bind\x20fails','AfqcY','error','ping','bXXtc','TTxcN','strictEqual','rusCz','GCLlD','POST','1|2|0|3|4','completes\x20a\x20WebSocket\x20upgrade\x20over\x20any\x20duplex\x20stream','bSzeZ','6968450jvyKzj','xXpIo','ymhJp','maxHeadersCount','FUXmX','oeXmU','yYXrK','gWpxC','FGvRV','ArFHR','mgpKQ','can\x20reject\x20client\x20synchronously','throws\x20an\x20error\x20if\x20no\x20option\x20object\x20is\x20passed','get','MTJOM','request','SwSVT','jtKnu','WnmAs','#handleUpgrade','JcyZE','RGijB','uzCOM','permessage-deflate','dSGKg','wss://localhost:','CICHo','returns\x20`null`\x20if\x20called\x20after\x20close','returns\x20the\x20address\x20of\x20the\x20server','rlgUu','WYgMM','eZrBq','KmQgG','GKNMh','UDYKa','is\x20updated\x20when\x20client\x20closes\x20the\x20connection','wQeZc','NNrqV','SCVRu','RPNdp','OFEjr','WSutm','zMPwT','Cragf','EtTNj','NmncU','WyxLu','XzbNv','hELBa','xKbQm','RdLxx','`verifyClient`','OZNNj','nzutp','qgmSE','ws://localhost:','write','bqilk','data','Connection:\x20Upgrade','Epfga','Sec-WebSocket-Key:\x20dGhlIHNhbXBsZSBub25jZQ==','/bar','destroy','iBGRW','nOCXu','uEfww','CshRX','DZLyI','hHjjv','HTTP/1.1\x20101\x20Switching\x20Protocols','RVVhi','starts\x20a\x20server\x20on\x20a\x20given\x20port','iLEXF','clients','emits\x20the\x20\x27wsClientError\x27\x20event','HOvnc','KzUKU','zXkZA','RTQby','bApUp','permessage-deflate;\x20client_max_window_bits=8','connection','IRCjU','Hello','mHIab','lNLPZ','gxLdw','ICMmj','QsQbP','CUObc','eyzvB','platform','net','UtiHM','bzBdc','Npjty','accepts\x20the\x20`maxPayload`\x20option','lelGf','120','close','MWVkw','jhYfD','ws+unix:','maUUg','secure','JZQrs','RTMTY','#ctor','hello\x20world','jKJGq','?foo=bar','Tqjtf','fails\x20is\x20the\x20Sec-WebSocket-Protocol\x20header\x20is\x20invalid','QfkmQ','NObcE','LcGgv','win32','invokes\x20the\x20callback\x20in\x20noServer\x20mode','Upgrade','cEHJW','KssMq','tbLEs','QbKpV','readable','etanV','can\x20reject\x20client\x20asynchronously\x20w/\x20custom\x20headers','fails\x20if\x20the\x20Sec-WebSocket-Version\x20header\x20is\x20invalid\x20(1/2)','gqNRg','vFFJV','Missing\x20or\x20invalid\x20Sec-WebSocket-Key\x20header','HbWVE','NoaXv','Jrpkl','retry-after','writable','NCHXa','xBOBk','sec-websocket-extensions','pqcYF','cSJju','MzJaz','osYFl','eSucF','http://localhost:','fylHM','CpZeq','moPst','NLYKU','fails\x20if\x20the\x20Sec-WebSocket-Extensions\x20header\x20is\x20invalid','426s\x20for\x20non-Upgrade\x20requests','wGLEz','path','fGSms','GSNHi','vWSwn','RocUc','yEzmP','ibkwJ','UvatS','crypto','sample','qomJF','LeCFE','2244FCgneA','bar','PrVJc','qZoHf','jniBH','gmklG','axdNw','tmpdir','nOwYP','YKbpG','ULpzG','TrozS','gCNKn','origin','qhalK','sNBeT','ppsvr','WhulJ','QTFWY','HwpXg','hbvbM','hVflI','#close','throws\x20an\x20error\x20if\x20required\x20options\x20are\x20not\x20specified','rzlBL','listen','_state','cpoUk','YBFtb','DWqvg','iQTSv','connect','JRVos','Unexpected\x20callback\x20invocation','http','NdQYe','FTVCG','INkyD','xgrlC','#address','OJKhD','iTUii','nYudO','NyVgE','QauWs','ACBYY','hello','DRecZ','Tgkej','FufTR','uaSlR','Ieqdw','LEYCQ','uoAlU','svkrY','pong','aWPQu','statusCode','dGhlIHNhbXBsZSBub25jZQ==','pipe','zxPst','test/fixtures/key.pem','XHsKh','WebSocket','lsiTY','JybIh','LWsYC','/foo?bar=baz','Upgrade:\x20websocket','ohZhD','CCKSj','open','QwrVO','SrGuL','GHWlm','ajTKG','654381tJWmQU','XLnnr','ZvgUY','`handleProtocols`','581lkmaBU','RlymC','_receiver','ylIOv','vnwFB','XQZCU','wkkPE','woBfR','handles\x20data\x20passed\x20along\x20with\x20the\x20upgrade\x20request','extensions','byUNZ','fails\x20if\x20the\x20Upgrade\x20header\x20is\x20missing','honors\x20the\x20`autoPong`\x20option','cdHYb','ZQWnH','odFOQ','QIBUK','CTVqX','LGEWk','DnVNW','rTnqX','Jjldx','IncomingMessage','4\x20@1\x20\x2046546xW%0l\x201\x205','readFileSync','fCjok','zuvSt','yDQCH','NrNdW','ARELb','yEmxC','../lib/constants','GgzfG','Unexpected\x20\x27pong\x27\x20event','mWzxy','100574AHRPyu','TfFJB','QkfQj','18sTRPrJ','NxCDd','yVyqG','vwlGp','cqZCq','SOQgZ','JfRWB',':/foo?bar=bar','XeIHQ','BtrBT','oinZS','throws\x20an\x20error\x20when\x20operating\x20in\x20\x22noServer\x22\x20mode','YATQN','YJqkq','NpHjx','xazoK','UxyOA','Zjisg','port','Missing\x20or\x20invalid\x20Sec-WebSocket-Version\x20header','ALUYp','uQMTm','iDULm','zBmdn','can\x20be\x20used\x20for\x20a\x20pre-existing\x20server','_server','IhsTg','size','ZGIke','AcSRI','address','BlyIl','Invalid\x20Upgrade\x20header','OYXAb','foo;bar'];_0x144d=function(){return _0x135849;};return _0x144d();}const _0x29fdc3=_0x1950;(function(_0x15bdf9,_0x2d50e0){const _0x1457e0=_0x1950,_0x13b700=_0x15bdf9();while(!![]){try{const _0x2c8341=parseInt(_0x1457e0(0xe0))/0x1*(parseInt(_0x1457e0(0x23a))/0x2)+-parseInt(_0x1457e0(0x213))/0x3+parseInt(_0x1457e0(0x29b))/0x4+-parseInt(_0x1457e0(0x2c1))/0x5+-parseInt(_0x1457e0(0x1c7))/0x6*(parseInt(_0x1457e0(0x217))/0x7)+parseInt(_0x1457e0(0x28e))/0x8*(parseInt(_0x1457e0(0x23d))/0x9)+-parseInt(_0x1457e0(0x123))/0xa;if(_0x2c8341===_0x2d50e0)break;else _0x13b700['push'](_0x13b700['shift']());}catch(_0x188b6d){_0x13b700['push'](_0x13b700['shift']());}}}(_0x144d,0xd578e));function _0x1950(_0x205100,_0x1a0212){const _0x144d87=_0x144d();return _0x1950=function(_0x1950dd,_0x53466c){_0x1950dd=_0x1950dd-0x87;let _0x1bd5c4=_0x144d87[_0x1950dd];return _0x1bd5c4;},_0x1950(_0x205100,_0x1a0212);}const assert=require('assert'),crypto=require(_0x29fdc3(0x1c3)),https=require('https'),http=require(_0x29fdc3(0x1e9)),path=require(_0x29fdc3(0x1bb)),net=require(_0x29fdc3(0x180)),fs=require('fs'),os=require('os'),makeDuplexPair=require(_0x29fdc3(0x29f)),Sender=require(_0x29fdc3(0xb5)),WebSocket=require('..'),{NOOP}=require(_0x29fdc3(0x236));describe(_0x29fdc3(0x272),()=>{const _0x38a51f=_0x29fdc3,_0x48cd2e={'LeCFE':_0x38a51f(0xea),'zuvSt':'permessage-deflate','rKjnV':_0x38a51f(0x20e),'TFrbK':function(_0x2d073a,_0xc80e62,_0x45620b){return _0x2d073a(_0xc80e62,_0x45620b);},'qjFtx':function(_0x1ef0a1,_0x280f46,_0x5adc7a){return _0x1ef0a1(_0x280f46,_0x5adc7a);},'ZMktg':_0x38a51f(0x98),'ZxrWa':function(_0x35475d,_0x2b238d,_0x1c9fc0){return _0x35475d(_0x2b238d,_0x1c9fc0);},'dpQfI':_0x38a51f(0x184),'zbCKt':_0x38a51f(0x2b1),'NpHjx':_0x38a51f(0x223),'ohZhD':_0x38a51f(0x8a),'gCNKn':_0x38a51f(0xdf),'wFEwe':function(_0x10c628,_0x190f32){return _0x10c628(_0x190f32);},'avZNo':'retry-after','NObcE':function(_0x796d5a,_0x170d96){return _0x796d5a===_0x170d96;},'Odecs':_0x38a51f(0x118),'NyVgE':_0x38a51f(0x1c9),'IRCjU':_0x38a51f(0x129),'dqacL':_0x38a51f(0xe1),'FGvRV':function(_0x4c5092,_0x37daea){return _0x4c5092!==_0x37daea;},'NjmIC':_0x38a51f(0x16a),'NdQYe':function(_0x3f0c29,_0x3ce2ce,_0x3787e1){return _0x3f0c29(_0x3ce2ce,_0x3787e1);},'FguJm':_0x38a51f(0x2a4),'uqonj':_0x38a51f(0x116),'XeIHQ':function(_0x1ea815,_0x74b1ba,_0x4544f6){return _0x1ea815(_0x74b1ba,_0x4544f6);},'HwpXg':function(_0x57097b,_0x22aae3,_0x1af32a){return _0x57097b(_0x22aae3,_0x1af32a);},'LGEWk':'uses\x20a\x20precreated\x20http\x20server','RocUc':function(_0x3017c0,_0x4053ba,_0x1e2c1d){return _0x3017c0(_0x4053ba,_0x1e2c1d);},'eBzYf':_0x38a51f(0x1b9),'Epfga':'uses\x20a\x20precreated\x20http\x20server\x20listening\x20on\x20IPC','PDUnT':function(_0x541c36,_0x3aa731){return _0x541c36!==_0x3aa731;},'sJwTZ':'rsVUT','rTnqX':function(_0x1e3cb5,_0x3e562d,_0x2dda19){return _0x1e3cb5(_0x3e562d,_0x2dda19);},'iLEXF':_0x38a51f(0x13f),'HekLl':_0x38a51f(0x248),'UDYKa':_0x38a51f(0x175),'NNrqV':_0x38a51f(0xb0),'MWVkw':_0x38a51f(0x187),'CpXIR':_0x38a51f(0x278),'njpkP':function(_0x266fae,_0x3d5118,_0xa1466d){return _0x266fae(_0x3d5118,_0xa1466d);},'bzBdc':function(_0x11a370,_0x2d6cc5,_0x21ed72){return _0x11a370(_0x2d6cc5,_0x21ed72);},'gKleH':_0x38a51f(0x199),'PbJiN':'cleans\x20event\x20handlers\x20on\x20precreated\x20server','HdNQO':'emits\x20the\x20\x27close\x27\x20event\x20after\x20the\x20server\x20closes','oTHqY':function(_0xbed6bd,_0x42151c,_0x2058d7){return _0xbed6bd(_0x42151c,_0x2058d7);},'hjWEv':_0x38a51f(0x88),'GCLlD':function(_0x439147,_0x3ccb5e,_0x8c3133){return _0x439147(_0x3ccb5e,_0x8c3133);},'yEzmP':_0x38a51f(0xa7),'GdWsh':_0x38a51f(0x1f7),'ZqqBz':'JEZVv','YKbpG':function(_0x137164,_0x3120ed,_0x1c8d24){return _0x137164(_0x3120ed,_0x1c8d24);},'koECo':function(_0x448d88,_0x2969d8,_0xca70a3){return _0x448d88(_0x2969d8,_0xca70a3);},'SwSVT':_0x38a51f(0x146),'BlyIl':_0x38a51f(0x161),'qDGRa':_0x38a51f(0x205),'ZQWnH':_0x38a51f(0x2a8),'XQZCU':'returns\x20false\x20when\x20the\x20path\x20doesn\x27t\x20match','cNlwm':_0x38a51f(0xb3),'TApsG':function(_0x481316,_0x4f5c55){return _0x481316!==_0x4f5c55;},'eSucF':'Upgrade','OZNNj':'JSCRY','JZQrs':'/ws','akyxv':_0x38a51f(0x206),'BmFPh':_0x38a51f(0x22e),'iTUii':_0x38a51f(0x26c),'FwNhp':'CtrAc','jtKnu':_0x38a51f(0x255),'hVflI':'closes\x20the\x20connection\x20when\x20protocol\x20version\x20is\x20Hixie-76','Zjisg':function(_0x4f400f,_0x48aa53,_0x418e1d){return _0x4f400f(_0x48aa53,_0x418e1d);},'QkfQj':'Invalid\x20HTTP\x20method','qYvNE':_0x38a51f(0x15d),'PbegU':_0x38a51f(0x11f),'gICOd':_0x38a51f(0x8c),'tuvDo':function(_0x1dba5f,_0x3d1fed){return _0x1dba5f===_0x3d1fed;},'sNBeT':_0x38a51f(0x226),'iJpNH':'FTDlA','RlymC':_0x38a51f(0x135),'pwMrZ':_0x38a51f(0x1f1),'YJqkq':'yEmxC','qyrkw':_0x38a51f(0x266),'mHIab':_0x38a51f(0x1f4),'ALIZT':_0x38a51f(0xcd),'xKbQm':_0x38a51f(0xf1),'uzCOM':_0x38a51f(0x20d),'cqZCq':function(_0x540334,_0x520ffc){return _0x540334(_0x520ffc);},'qlokg':'Unexpected\x20\x27connection\x27\x20event','rlgUu':_0x38a51f(0x25f),'WlXCl':'chAKJ','nciUd':_0x38a51f(0xb6),'AfqcY':function(_0x422965,_0x40162d){return _0x422965!==_0x40162d;},'YbyfJ':_0x38a51f(0x257),'qomJF':_0x38a51f(0x177),'nzutp':_0x38a51f(0x15e),'CqPxK':'headers','rusCz':function(_0x4b9297,_0x6f08b4,_0x155fcd){return _0x4b9297(_0x6f08b4,_0x155fcd);},'xazoK':function(_0x481f15,_0x525b51,_0x28a2c4){return _0x481f15(_0x525b51,_0x28a2c4);},'LaDKJ':function(_0x2de808,_0x35d89e,_0x4e576c){return _0x2de808(_0x35d89e,_0x4e576c);},'cGWQn':_0x38a51f(0x294),'DnVNW':_0x38a51f(0x2c4),'DBliM':_0x38a51f(0x1a2),'INfwi':_0x38a51f(0x194),'GXMDD':_0x38a51f(0x1b8),'GgzfG':_0x38a51f(0x16e),'QfkmQ':_0x38a51f(0x27d),'LWsYC':_0x38a51f(0x156),'zXkZA':_0x38a51f(0x293),'iBGRW':function(_0x32c2ad,_0x472985,_0x525561){return _0x32c2ad(_0x472985,_0x525561);},'yvmnm':_0x38a51f(0xaa),'RbKOU':_0x38a51f(0x1ad),'UxyOA':_0x38a51f(0xf0),'Ebmqk':function(_0x2e355b,_0x4e7f99,_0xe5cc0d){return _0x2e355b(_0x4e7f99,_0xe5cc0d);},'gqNRg':_0x38a51f(0xa5),'FTVCG':function(_0xaae42f,_0x4f1a6d,_0x20306f){return _0xaae42f(_0x4f1a6d,_0x20306f);},'BALrJ':_0x38a51f(0x1dd),'fwJKH':function(_0x48df62,_0x8a6526,_0x5e3186){return _0x48df62(_0x8a6526,_0x5e3186);},'GKWQI':function(_0x44af0b,_0x5317f3,_0x1b5b90){return _0x44af0b(_0x5317f3,_0x1b5b90);},'RhXYg':_0x38a51f(0x2b7),'hKdhk':function(_0x32182b,_0xf68d0b,_0xd2f0b5){return _0x32182b(_0xf68d0b,_0xd2f0b5);},'xZUOw':function(_0x856b6d,_0x590c1b,_0x1bc47d){return _0x856b6d(_0x590c1b,_0x1bc47d);},'oeXmU':_0x38a51f(0x190),'Qblux':_0x38a51f(0x2b8)};describe(_0x38a51f(0x18f),()=>{const _0xa427ed=_0x38a51f,_0x65bd9e={'DRecZ':_0x48cd2e[_0xa427ed(0x1d3)],'aPwvY':_0xa427ed(0x175),'kcULf':function(_0xdf24b6,_0x253226){const _0x336ce1=_0xa427ed;return _0x48cd2e[_0x336ce1(0xcf)](_0xdf24b6,_0x253226);},'hbvbM':_0x48cd2e[_0xa427ed(0x9b)],'RdWRk':function(_0xcaf1e9,_0x56045d){const _0x2fe9e7=_0xa427ed;return _0x48cd2e[_0x2fe9e7(0x196)](_0xcaf1e9,_0x56045d);},'ftvQD':_0x48cd2e[_0xa427ed(0x105)],'NZQkZ':_0x48cd2e[_0xa427ed(0x1f2)],'npbmn':function(_0x2dace2,_0x2a37cc){return _0x2dace2!==_0x2a37cc;},'gWpxC':_0x48cd2e[_0xa427ed(0x176)],'Jjldx':_0x48cd2e['dqacL'],'woLkF':function(_0x4ed83a,_0x1eb72c){const _0x1deb7b=_0xa427ed;return _0x48cd2e[_0x1deb7b(0x12b)](_0x4ed83a,_0x1eb72c);},'JfRWB':_0x48cd2e['NjmIC'],'oXrnL':_0x48cd2e[_0xa427ed(0x280)]};_0x48cd2e[_0xa427ed(0x1ea)](it,_0xa427ed(0x12f),()=>{const _0x39f8fb=_0xa427ed;assert[_0x39f8fb(0x8d)](()=>new WebSocket[(_0x39f8fb(0x2a9))](),new RegExp('^TypeError:\x20One\x20and\x20only\x20one\x20of\x20the\x20\x22port\x22,\x20\x22server\x22,\x20or\x20'+_0x65bd9e[_0x39f8fb(0x1f6)]));}),describe(_0x48cd2e[_0xa427ed(0xb7)],()=>{const _0x236422=_0xa427ed,_0x43b457={'ppsvr':_0x48cd2e[_0x236422(0x1c6)],'CICHo':_0x236422(0xdf),'KssMq':function(_0x37b3d3,_0x1775fa){return _0x37b3d3!==_0x1775fa;},'jssns':_0x236422(0xcb),'PJepA':_0x48cd2e['zuvSt'],'jCEcE':_0x48cd2e[_0x236422(0x280)],'WyxLu':_0x236422(0x119),'aUFLJ':'close'};_0x48cd2e['TFrbK'](it,_0x236422(0x1de),()=>{const _0x5c8537=_0x236422;assert[_0x5c8537(0x8d)](()=>new WebSocket[(_0x5c8537(0x2a9))]({}),new RegExp(_0x43b457[_0x5c8537(0x1d7)]+_0x43b457[_0x5c8537(0x13d)]));}),_0x48cd2e[_0x236422(0x104)](it,_0x236422(0x2c5),()=>{const _0x283859=_0x236422,_0x578526=http['createServer'](),_0x5bfd18=[{'port':0x0,'noServer':!![],'server':_0x578526},{'port':0x0,'noServer':!![]},{'port':0x0,'server':_0x578526},{'noServer':!![],'server':_0x578526}];for(const _0x753ff2 of _0x5bfd18){assert[_0x283859(0x8d)](()=>new WebSocket['Server'](_0x753ff2),new RegExp(_0x283859(0xea)+_0x283859(0xdf)));}}),_0x48cd2e[_0x236422(0x104)](it,_0x48cd2e[_0x236422(0x2bb)],_0x15151a=>{const _0x34785e=new WebSocket['Server']({'port':0x0},()=>{const _0x282017=_0x1950;assert[_0x282017(0x11c)](_0x34785e[_0x282017(0x2a4)]['port'],0x0),_0x34785e[_0x282017(0x187)](_0x15151a);});}),_0x48cd2e[_0x236422(0x26f)](it,_0x48cd2e['dpQfI'],_0x28e7ff=>{const _0x2aab15=_0x236422,_0x55bdcb=0x5000,_0x2f8cdc=new WebSocket[(_0x2aab15(0x2a9))]({'perMessageDeflate':!![],'maxPayload':_0x55bdcb,'port':0x0},()=>{const _0x21a750=_0x2aab15,_0x413f34=new WebSocket(_0x21a750(0x15a)+_0x2f8cdc[_0x21a750(0x25b)]()[_0x21a750(0x24f)]);_0x413f34['on']('open',_0x413f34[_0x21a750(0x187)]);});_0x2f8cdc['on'](_0x65bd9e[_0x2aab15(0x2b4)],_0x20d790=>{const _0x340fec=_0x2aab15;if(_0x43b457[_0x340fec(0x19c)](_0x43b457['jssns'],_0x340fec(0xcb))){const _0x4df0d4=new _0x11643a(_0x340fec(0x15a)+_0x27278c[_0x340fec(0x25b)]()['port']);_0x4df0d4['on'](_0x340fec(0x20e),()=>_0x4df0d4['close']());}else assert[_0x340fec(0x11c)](_0x20d790[_0x340fec(0x219)][_0x340fec(0x109)],_0x55bdcb),assert[_0x340fec(0x11c)](_0x20d790['_receiver'][_0x340fec(0x9f)][_0x43b457['PJepA']][_0x340fec(0x109)],_0x55bdcb),_0x2f8cdc['close'](_0x28e7ff);});}),_0x48cd2e['TFrbK'](it,_0x48cd2e[_0x236422(0x2c9)],_0x58f970=>{const _0x188096=_0x236422,_0x41e507={'mXvIQ':function(_0x48cf71,_0x2cc036){const _0x366515=_0x1950;return _0x65bd9e[_0x366515(0x89)](_0x48cf71,_0x2cc036);},'Ieqdw':_0x188096(0xf3),'uaSlR':_0x65bd9e[_0x188096(0x1db)],'JRVos':_0x188096(0x186),'cpoUk':function(_0x1e2354,_0xf4f101){return _0x1e2354 instanceof _0xf4f101;}};class _0x155907 extends WebSocket[_0x188096(0x206)]{get['foo'](){const _0x3d3731=_0x188096;return _0x41e507['mXvIQ'](Function,_0x41e507[_0x3d3731(0x1fa)])(),_0x3d3731(0x2b6);}}const _0x28d66e=new WebSocket[(_0x188096(0x2a9))]({'port':0x0,'WebSocket':_0x155907},()=>{const _0x5c92e3=_0x188096;if(_0x5c92e3(0x18b)===_0x5c92e3(0x1cd))_0x52ebcf[_0x5c92e3(0x11c)](_0x2670e2[_0x5c92e3(0x200)],0x1f7),_0x1b37dc['strictEqual'](_0x34679f[_0x5c92e3(0x267)][_0x41e507[_0x5c92e3(0x1f9)]],_0x41e507[_0x5c92e3(0x1e7)]),_0x14ff8b['close'](_0x538c0d);else{const _0x436153=new WebSocket(_0x5c92e3(0x15a)+_0x28d66e[_0x5c92e3(0x25b)]()[_0x5c92e3(0x24f)]);_0x436153['on'](_0x5c92e3(0x20e),_0x436153['close']);}});_0x28d66e['on'](_0x188096(0x175),_0x2e9d25=>{const _0xc4a53e=_0x188096;assert['ok'](_0x41e507[_0xc4a53e(0x1e2)](_0x2e9d25,_0x155907)),assert[_0xc4a53e(0x11c)](_0x2e9d25[_0xc4a53e(0x2b6)],'foo'),_0x28d66e['close'](_0x58f970);});}),_0x48cd2e[_0x236422(0x110)](it,_0x48cd2e[_0x236422(0x24b)],_0x30c0cf=>{const _0x448cd1=_0x236422,_0x2e064b={'eVcIi':function(_0x14906c,_0x5d2c64){return _0x14906c(_0x5d2c64);},'CshRX':_0x43b457[_0x448cd1(0x151)],'zBmdn':_0x43b457['aUFLJ']},_0x34ee26=new WebSocket[(_0x448cd1(0x2a9))]({'autoPong':![],'port':0x0},()=>{const _0x5427f4=_0x448cd1,_0x38a94=new WebSocket(_0x5427f4(0x15a)+_0x34ee26[_0x5427f4(0x25b)]()[_0x5427f4(0x24f)]);_0x38a94['on'](_0x43b457[_0x5427f4(0x91)],()=>{_0x38a94['ping']();}),_0x38a94['on'](_0x5427f4(0x1fe),()=>{const _0x1f8e5d=_0x5427f4;_0x2e064b[_0x1f8e5d(0x262)](_0x30c0cf,new Error(_0x1f8e5d(0x238)));});});_0x34ee26['on'](_0x448cd1(0x175),_0x5660ee=>{const _0x4f1987=_0x448cd1;_0x5660ee['on'](_0x2e064b[_0x4f1987(0x166)],()=>{_0x5660ee['close']();}),_0x5660ee['on'](_0x2e064b[_0x4f1987(0x254)],()=>{const _0x4b3095=_0x4f1987;_0x34ee26[_0x4b3095(0x187)](_0x30c0cf);});});});}),it(_0x48cd2e['uqonj'],_0x4e371e=>{const _0x78f16b=_0xa427ed;if(_0x48cd2e[_0x78f16b(0x20c)]!==_0x48cd2e['ohZhD'])_0x4a1a51[_0x78f16b(0x187)]();else{const _0x4426bc=new WebSocket[(_0x78f16b(0x2a9))]({'port':0x0},()=>{const _0x4253a8=_0x78f16b;if(_0x65bd9e['RdWRk'](_0x4253a8(0xa6),'nUIfA'))_0x480620['strictEqual'](_0x23065c[_0x4253a8(0x256)][_0x4253a8(0x25b)]()[_0x4253a8(0x25b)],'::'),_0x315722[_0x4253a8(0x187)](_0x207fbc);else{const _0x1917b2=new WebSocket['Server']({'port':_0x4426bc[_0x4253a8(0x25b)]()[_0x4253a8(0x24f)]});_0x1917b2['on'](_0x65bd9e[_0x4253a8(0xd2)],()=>_0x4426bc[_0x4253a8(0x187)](_0x4e371e));}});}}),_0x48cd2e[_0xa427ed(0x245)](it,_0xa427ed(0x16b),_0x325806=>{const _0x40ef80=_0xa427ed,_0x3f66c2=0x539,_0x457422=new WebSocket[(_0x40ef80(0x2a9))]({'port':_0x3f66c2},()=>{const _0x21f908=_0x40ef80,_0x40d39d=new WebSocket(_0x21f908(0x15a)+_0x3f66c2);_0x40d39d['on'](_0x21f908(0x20e),_0x40d39d[_0x21f908(0x187)]);});_0x457422['on'](_0x40ef80(0x175),()=>_0x457422[_0x40ef80(0x187)](_0x325806));}),_0x48cd2e[_0xa427ed(0x26f)](it,_0xa427ed(0x103),_0xdbca9b=>{const _0x43041a=new WebSocket['Server']({'port':0x0},()=>{const _0x52e5cc=_0x1950;assert[_0x52e5cc(0x11c)](_0x43041a[_0x52e5cc(0x256)][_0x52e5cc(0x25b)]()[_0x52e5cc(0x25b)],'::'),_0x43041a[_0x52e5cc(0x187)](_0xdbca9b);});}),_0x48cd2e[_0xa427ed(0x1da)](it,_0x48cd2e[_0xa427ed(0x229)],_0xb76c1d=>{const _0x268ef3=_0xa427ed,_0x15435f=http[_0x268ef3(0x2ad)]();_0x15435f['listen'](0x0,()=>{const _0x29f18a=_0x268ef3,_0x35d80e={'QbKpV':_0x65bd9e['NZQkZ'],'vWSwn':_0x29f18a(0x233)},_0x4b2b04=new WebSocket[(_0x29f18a(0x2a9))]({'server':_0x15435f});_0x4b2b04['on'](_0x29f18a(0x175),()=>{const _0x33a32a=_0x29f18a;_0x35d80e[_0x33a32a(0x19e)]!==_0x35d80e[_0x33a32a(0x1be)]?_0x15435f[_0x33a32a(0x187)](_0xb76c1d):_0x436cb8[_0x33a32a(0x187)](_0x2f740c);});const _0x485543=new WebSocket(_0x29f18a(0x15a)+_0x15435f['address']()[_0x29f18a(0x24f)]);_0x485543['on'](_0x29f18a(0x20e),_0x485543[_0x29f18a(0x187)]);});}),_0x48cd2e[_0xa427ed(0x1bf)](it,_0x48cd2e[_0xa427ed(0x268)],_0x30cf10=>{const _0x4fea64=_0xa427ed,_0x1b36f8=new WebSocket[(_0x4fea64(0x2a9))]({'port':0x0},()=>{const _0x499202=_0x4fea64,_0x3041da={'mWzxy':_0x499202(0x187)};_0x65bd9e['npbmn'](_0x65bd9e[_0x499202(0x12a)],_0x499202(0x129))?_0x1fc3a2[_0x499202(0x187)](()=>{const _0x14d2f0=_0x499202;_0x228729['strictEqual'](_0x2fee13[_0x14d2f0(0x1e1)],0x2),_0x3f025d['on'](_0x3041da[_0x14d2f0(0x239)],_0x156a47),_0x324faa[_0x14d2f0(0x187)]();}):http[_0x499202(0x130)](_0x499202(0x1b3)+_0x1b36f8[_0x499202(0x25b)]()['port'],_0x22d8ae=>{const _0x52ed1b=_0x499202;let _0x5160a9='';assert[_0x52ed1b(0x11c)](_0x22d8ae[_0x52ed1b(0x200)],0x1aa),_0x22d8ae['on'](_0x52ed1b(0x15d),_0x53cb6c=>{_0x5160a9+=_0x53cb6c;}),_0x22d8ae['on'](_0x52ed1b(0x266),()=>{const _0x27ff9c=_0x52ed1b;assert[_0x27ff9c(0x11c)](_0x5160a9,http[_0x27ff9c(0xa4)][0x1aa]),_0x1b36f8['close'](_0x30cf10);});});});}),it(_0x48cd2e[_0xa427ed(0x15f)],_0x5bc8ac=>{const _0x37a7d6=_0xa427ed,_0x39d457={'svkrY':_0x37a7d6(0x1a5)},_0x2f78b3=crypto[_0x37a7d6(0xe5)](0x10)[_0x37a7d6(0x288)]('hex'),_0x5979ae=process[_0x37a7d6(0x17f)]===_0x37a7d6(0x198)?_0x37a7d6(0x284)+_0x2f78b3:path[_0x37a7d6(0xd3)](os[_0x37a7d6(0x1ce)](),_0x37a7d6(0x264)+_0x2f78b3+_0x37a7d6(0x102)),_0x2db9cb=http[_0x37a7d6(0x2ad)]();_0x2db9cb[_0x37a7d6(0x1e0)](_0x5979ae,()=>{const _0x157b2b=_0x37a7d6,_0x1485d2={'KqGqm':function(_0x2f509d,_0x3e15c3){return _0x2f509d===_0x3e15c3;},'ymhJp':_0x65bd9e[_0x157b2b(0x22c)]};if(_0x65bd9e[_0x157b2b(0xc2)]('vrxJX',_0x65bd9e[_0x157b2b(0x243)])){const _0x3d827c=new WebSocket[(_0x157b2b(0x2a9))]({'server':_0x2db9cb});_0x3d827c['on'](_0x65bd9e['aPwvY'],(_0x4f1c20,_0x557707)=>{const _0x4eb812=_0x157b2b;if(_0x1485d2[_0x4eb812(0x8b)](_0x3d827c[_0x4eb812(0x16d)]['size'],0x1))assert[_0x4eb812(0x11c)](_0x557707[_0x4eb812(0x2c6)],_0x1485d2[_0x4eb812(0x125)]);else{assert[_0x4eb812(0x11c)](_0x557707[_0x4eb812(0x2c6)],'/');for(const _0x20b111 of _0x3d827c[_0x4eb812(0x16d)]){_0x20b111[_0x4eb812(0x187)]();}_0x2db9cb[_0x4eb812(0x187)](_0x5bc8ac);}});const _0x685915=new WebSocket(_0x157b2b(0x18a)+_0x5979ae+_0x157b2b(0x244));_0x685915['on'](_0x65bd9e['oXrnL'],()=>new WebSocket('ws+unix:'+_0x5979ae));}else{const _0x4b3e07={'JcyZE':_0x39d457[_0x157b2b(0x1fd)]};_0x316ba9[_0x157b2b(0x11c)](_0x31850d['statusCode'],0x190);const _0x3ac44f=[];_0x5d28b1['on'](_0x157b2b(0x15d),_0xae7e06=>{_0x3ac44f['push'](_0xae7e06);}),_0x448d29['on']('end',()=>{const _0x2c8148=_0x157b2b;_0x16409b['strictEqual'](_0x5d3e9e[_0x2c8148(0x292)](_0x3ac44f)['toString'](),_0x4b3e07[_0x2c8148(0x137)]),_0x3735e3['close'](_0x28f1d5);});}});});}),_0x48cd2e[_0x38a51f(0x1eb)](describe,_0x38a51f(0x1ee),()=>{const _0x2218a3=_0x38a51f,_0x2e0de1={'iCVcf':function(_0x46eb14,_0x284149){const _0x3b5c01=_0x1950;return _0x48cd2e[_0x3b5c01(0xa8)](_0x46eb14,_0x284149);},'CkXUE':_0x48cd2e[_0x2218a3(0x28d)]};_0x48cd2e[_0x2218a3(0x22b)](it,_0x48cd2e[_0x2218a3(0x16c)],_0x2100c7=>{const _0x58e324=_0x2218a3;if(_0x2e0de1[_0x58e324(0x28f)](_0x58e324(0x2a5),_0x2e0de1[_0x58e324(0xc8)])){const _0x90248a=new WebSocket[(_0x58e324(0x2a9))]({'port':0x0},()=>{const _0x50344a=_0x58e324,_0x7b3e54=_0x90248a[_0x50344a(0x25b)]();assert[_0x50344a(0x111)](_0x7b3e54,_0x90248a['_server'][_0x50344a(0x25b)]()),_0x90248a[_0x50344a(0x187)](_0x2100c7);});}else{const _0x24bfce=new _0x191888['Server']({'port':0x0},()=>{const _0x13e4c8=_0x58e324;_0x51aa6a[_0x13e4c8(0x11c)](_0x24bfce[_0x13e4c8(0x256)][_0x13e4c8(0x25b)]()[_0x13e4c8(0x25b)],'::'),_0x24bfce['close'](_0x488171);});}}),it(_0x48cd2e['HekLl'],()=>{const _0x328ea7=_0x2218a3,_0x416bea=new WebSocket[(_0x328ea7(0x2a9))]({'noServer':!![]});assert['throws'](()=>{const _0x58affa=_0x328ea7;_0x416bea[_0x58affa(0x25b)]();},/^Error: The server is operating in "noServer" mode$/);}),it(_0x2218a3(0x13e),_0x2f8be5=>{const _0x46440e={'RPNdp':function(_0x2a572b){return _0x2a572b();}},_0x21640f=new WebSocket['Server']({'port':0x0},()=>{const _0x34d35b=_0x1950;_0x21640f[_0x34d35b(0x187)](()=>{const _0x5145ad=_0x34d35b;assert[_0x5145ad(0x11c)](_0x21640f[_0x5145ad(0x25b)](),null),_0x46440e[_0x5145ad(0x14a)](_0x2f8be5);});});});}),_0x48cd2e[_0x38a51f(0x110)](describe,_0x48cd2e[_0x38a51f(0xe6)],()=>{const _0x59fb38=_0x38a51f,_0x484eb7={'NmncU':function(_0x19e7d8,_0x44b01c){return _0x48cd2e['NObcE'](_0x19e7d8,_0x44b01c);},'rKcGR':_0x59fb38(0x21b),'pJFQT':_0x59fb38(0x187),'AuMiX':'websocket','WYgMM':_0x48cd2e[_0x59fb38(0x9c)],'fRuTD':_0x59fb38(0x165)};_0x48cd2e[_0x59fb38(0xe9)](it,'does\x20not\x20throw\x20if\x20called\x20multiple\x20times',_0x44f6e5=>{const _0x49dd77=_0x59fb38,_0x4fa52f=new WebSocket[(_0x49dd77(0x2a9))]({'port':0x0},()=>{const _0x407d82=_0x49dd77;_0x4fa52f['on'](_0x407d82(0x187),_0x44f6e5),_0x4fa52f[_0x407d82(0x187)](),_0x4fa52f[_0x407d82(0x187)](),_0x4fa52f[_0x407d82(0x187)]();});}),_0x48cd2e[_0x59fb38(0x182)](it,_0x59fb38(0x297),_0x11efe0=>{const _0xc2add7=_0x59fb38,_0x54e6a4={'dSGKg':function(_0x1eb017,_0x4891cc){return _0x1eb017(_0x4891cc);}},_0x294421=http['createServer'](),_0x53e9aa=_0x294421[_0xc2add7(0x187)];_0x294421[_0xc2add7(0x187)]=()=>{const _0x2a66a2=_0xc2add7;_0x54e6a4[_0x2a66a2(0x13b)](_0x11efe0,new Error(_0x2a66a2(0xf7)));};const _0x579419=new WebSocket[(_0xc2add7(0x2a9))]({'server':_0x294421});_0x579419['on'](_0x48cd2e[_0xc2add7(0x145)],()=>{const _0x5d2261=_0xc2add7;_0x579419['close'](),_0x294421[_0x5d2261(0x187)]=_0x53e9aa,_0x294421['close'](_0x11efe0);}),_0x294421[_0xc2add7(0x1e0)](0x0,()=>{const _0x5631d3=_0xc2add7,_0x27fa16=new WebSocket(_0x5631d3(0x15a)+_0x294421[_0x5631d3(0x25b)]()[_0x5631d3(0x24f)]);_0x27fa16['on'](_0x5631d3(0x20e),_0x27fa16[_0x5631d3(0x187)]);});}),it(_0x48cd2e[_0x59fb38(0xf2)],_0x17d20c=>{const _0x3e92de=_0x59fb38,_0x463129=new WebSocket[(_0x3e92de(0x2a9))]({'noServer':!![]});_0x463129[_0x3e92de(0x187)](_0x17d20c);}),it(_0x48cd2e['PbJiN'],_0x5d04b3=>{const _0x346d83=_0x59fb38,_0x16eddf={'KmQgG':_0x48cd2e[_0x346d83(0x148)],'wMtnt':_0x346d83(0xcd),'RamMe':'error'},_0x175414=http['createServer'](),_0x3b95c0=_0x175414['listenerCount'](_0x48cd2e[_0x346d83(0x148)]),_0x3fa1e2=new WebSocket[(_0x346d83(0x2a9))]({'server':_0x175414});_0x175414[_0x346d83(0x1e0)](0x0,()=>{_0x3fa1e2['close'](()=>{const _0x12cbfc=_0x1950;assert[_0x12cbfc(0x11c)](_0x175414[_0x12cbfc(0xab)](_0x16eddf[_0x12cbfc(0x143)]),_0x3b95c0),assert[_0x12cbfc(0x11c)](_0x175414['listenerCount'](_0x16eddf['wMtnt']),0x0),assert[_0x12cbfc(0x11c)](_0x175414[_0x12cbfc(0xab)](_0x16eddf[_0x12cbfc(0x10a)]),0x0),_0x175414[_0x12cbfc(0x187)](_0x5d04b3);});});}),it(_0x48cd2e[_0x59fb38(0xc3)],_0x4b0aa8=>{const _0x2fa7b5=_0x59fb38,_0x398a49={'gxLdw':_0x2fa7b5(0x15d)};if(_0x2fa7b5(0xdd)!=='qRbgS'){let _0x5beb09=![];const _0x40294e=new WebSocket[(_0x2fa7b5(0x2a9))]({'port':0x0},()=>{const _0x3a47b5=_0x2fa7b5;net['createConnection']({'port':_0x40294e[_0x3a47b5(0x25b)]()[_0x3a47b5(0x24f)]});});_0x40294e['_server']['on'](_0x48cd2e[_0x2fa7b5(0x145)],_0xfc4fa1=>{const _0x59ece2=_0x2fa7b5;_0x40294e[_0x59ece2(0x187)](),_0x40294e[_0x59ece2(0x187)](),process[_0x59ece2(0x279)](()=>{const _0x5bbeea=_0x59ece2;_0xfc4fa1[_0x5bbeea(0x266)]();});}),_0x40294e[_0x2fa7b5(0x256)]['on'](_0x2fa7b5(0x187),()=>{const _0x4aa71e=_0x2fa7b5;_0x484eb7[_0x4aa71e(0x150)](_0x4aa71e(0x21b),_0x484eb7['rKcGR'])?_0x5beb09=!![]:(_0x3fb044[_0x4aa71e(0x11c)](_0x1fce5e['protocol'],_0x4aa71e(0x1c8)),_0x44d7a1[_0x4aa71e(0x187)](_0xb27ff5));}),_0x40294e['on'](_0x48cd2e[_0x2fa7b5(0x188)],()=>{const _0x596380=_0x2fa7b5,_0x35a585={'hwjlh':_0x596380(0xdf)};_0x596380(0xe8)===_0x596380(0xe8)?(assert['ok'](_0x5beb09),_0x4b0aa8()):_0x3c29f3[_0x596380(0x8d)](()=>new _0x2d626b[(_0x596380(0x2a9))](_0x2fd6f8),new _0x5181fa(_0x596380(0xea)+_0x35a585[_0x596380(0x26b)]));});}else{_0x19968f[_0x2fa7b5(0x11c)](_0x20e9de['statusCode'],0x190);const _0x4a1a98=[];_0x286a70['on'](_0x398a49[_0x2fa7b5(0x17a)],_0x34713d=>{const _0x7a29e7=_0x2fa7b5;_0x4a1a98[_0x7a29e7(0x10c)](_0x34713d);}),_0x125883['on'](_0x2fa7b5(0x266),()=>{const _0x22416b=_0x2fa7b5;_0x4c7baa['strictEqual'](_0x1d2c24[_0x22416b(0x292)](_0x4a1a98)[_0x22416b(0x288)](),_0x22416b(0x25d)),_0x175e04[_0x22416b(0x187)](_0x190842);});}}),_0x48cd2e[_0x59fb38(0x2bd)](it,_0x48cd2e['hjWEv'],_0x2c4053=>{const _0x1dad2f=_0x59fb38,_0xc5aacb=new WebSocket[(_0x1dad2f(0x2a9))]({'noServer':!![],'clientTracking':![]});_0xc5aacb['on'](_0x484eb7[_0x1dad2f(0xc1)],_0x2c4053),_0xc5aacb[_0x1dad2f(0x187)]();}),_0x48cd2e[_0x59fb38(0x11e)](it,_0x48cd2e[_0x59fb38(0x1c0)],_0x28e07c=>{const _0x1539b9=_0x59fb38,_0x5e3c71={'OVpGH':function(_0xec659,_0x5e859d){return _0xec659 instanceof _0x5e859d;},'sXMlD':function(_0x16005b,_0x4c3c91){return _0x16005b!==_0x4c3c91;}},_0x4d44fa=new WebSocket[(_0x1539b9(0x2a9))]({'port':0x0},()=>{const _0x320e6f=_0x1539b9,_0x2e41b8={'hHjjv':_0x320e6f(0x238),'SKYJa':_0x320e6f(0x20e),'LqGVl':_0x320e6f(0x19a),'fYAkL':_0x484eb7['AuMiX'],'OYXAb':_0x320e6f(0x201),'qHviE':'upgrade'};if(_0x484eb7[_0x320e6f(0x141)]!==_0x484eb7[_0x320e6f(0x141)]){const _0x437c1d={'DWjrL':_0x2e41b8[_0x320e6f(0x168)]},_0x1e3ce2=new _0x485a9a(_0x320e6f(0x15a)+_0x3291ca[_0x320e6f(0x25b)]()[_0x320e6f(0x24f)]);_0x1e3ce2['on'](_0x2e41b8['SKYJa'],()=>{const _0x326cdd=_0x320e6f;_0x1e3ce2[_0x326cdd(0x119)]();}),_0x1e3ce2['on']('pong',()=>{const _0x21e458=_0x320e6f;_0x32d8dc(new _0x4e3a6b(_0x437c1d[_0x21e458(0x112)]));});}else _0x4d44fa[_0x320e6f(0x187)](()=>{const _0x11cdd7=_0x320e6f,_0x25e9aa={'LcGgv':function(_0xdd86ac,_0x57ef7c){return _0x5e3c71['OVpGH'](_0xdd86ac,_0x57ef7c);}};if(_0x5e3c71[_0x11cdd7(0x90)](_0x11cdd7(0x14c),_0x11cdd7(0x10f)))assert['strictEqual'](_0x4d44fa[_0x11cdd7(0x1e1)],0x2),_0x4d44fa['close'](_0x13558c=>{const _0x5b4d00=_0x11cdd7;assert['ok'](_0x25e9aa[_0x5b4d00(0x197)](_0x13558c,Error)),assert[_0x5b4d00(0x11c)](_0x13558c[_0x5b4d00(0xb3)],_0x5b4d00(0x29a)),_0x28e07c();});else{const _0x1eac4e={'CTVqX':_0x11cdd7(0x15d)},_0x394f23=_0x10c394[_0x11cdd7(0x130)]({'port':_0x364614['address']()['port'],'headers':{'Connection':_0x2e41b8['LqGVl'],'Upgrade':_0x2e41b8[_0x11cdd7(0x2a0)],'Sec-WebSocket-Key':_0x2e41b8[_0x11cdd7(0x25e)],'Sec-WebSocket-Version':0xd,'Sec-WebSocket-Extensions':_0x11cdd7(0x291)}});_0x394f23['on'](_0x2e41b8['qHviE'],(_0x48913b,_0x19fb68,_0x2f5b45)=>{const _0x52d061=_0x11cdd7;if(_0x2f5b45[_0x52d061(0xb9)])_0x19fb68[_0x52d061(0xfb)](_0x2f5b45);_0x19fb68['once'](_0x1eac4e[_0x52d061(0x228)],_0x1d01fc=>{const _0x4bc430=_0x52d061;_0x56fe86[_0x4bc430(0x11c)](_0x1d01fc[0x0],0x88),_0x19fb68[_0x4bc430(0x162)](),_0x42dc4f[_0x4bc430(0x187)](_0x47f171);});});}});});}),it(_0x59fb38(0xd8),_0x462c7a=>{const _0x1949cb=new WebSocket['Server']({'port':0x0},()=>{const _0x35a003=_0x1950,_0x4ebedc={'jRVVv':_0x484eb7[_0x35a003(0x27b)],'RgSCr':_0x35a003(0x187)};_0x1949cb[_0x35a003(0x187)](()=>{const _0x165510=_0x35a003;_0x4ebedc[_0x165510(0x2bf)]===_0x165510(0x165)?(assert[_0x165510(0x11c)](_0x1949cb[_0x165510(0x1e1)],0x2),_0x1949cb['on'](_0x4ebedc['RgSCr'],_0x462c7a),_0x1949cb[_0x165510(0x187)]()):_0x25d126=!![];});});});}),_0x48cd2e[_0x38a51f(0x93)](describe,'#clients',()=>{const _0xb09dbb=_0x38a51f,_0x328b22={'UkzqL':_0xb09dbb(0x1bd),'ZGIke':_0x48cd2e[_0xb09dbb(0xa2)],'cEHJW':_0x48cd2e['rKjnV'],'QixTv':_0x48cd2e[_0xb09dbb(0x115)]};_0x48cd2e[_0xb09dbb(0x1d0)](it,'returns\x20a\x20list\x20of\x20connected\x20clients',_0x100f17=>{const _0x346b37=_0xb09dbb,_0x5a0ef4=new WebSocket[(_0x346b37(0x2a9))]({'port':0x0},()=>{const _0x27212c=_0x346b37;assert['strictEqual'](_0x5a0ef4['clients'][_0x27212c(0x258)],0x0);const _0x51c3b6=new WebSocket(_0x27212c(0x15a)+_0x5a0ef4['address']()[_0x27212c(0x24f)]);_0x51c3b6['on'](_0x27212c(0x20e),_0x51c3b6[_0x27212c(0x187)]);});_0x5a0ef4['on'](_0x48cd2e[_0x346b37(0x145)],()=>{const _0x473020=_0x346b37;assert[_0x473020(0x11c)](_0x5a0ef4[_0x473020(0x16d)][_0x473020(0x258)],0x1),_0x5a0ef4[_0x473020(0x187)](_0x100f17);});}),it('can\x20be\x20disabled',_0x1477e4=>{const _0x44a875=_0xb09dbb,_0x50ac0b={'oCwxh':'kXArw'},_0x2756fd=new WebSocket[(_0x44a875(0x2a9))]({'port':0x0,'clientTracking':![]},()=>{const _0x4f3841=_0x44a875,_0x8468f={'TrozS':_0x4f3841(0x20e)};if(_0x4f3841(0x1b5)!==_0x50ac0b[_0x4f3841(0x10d)]){assert[_0x4f3841(0x11c)](_0x2756fd[_0x4f3841(0x16d)],undefined);const _0x4df03a=new WebSocket('ws://localhost:'+_0x2756fd[_0x4f3841(0x25b)]()['port']);_0x4df03a['on']('open',()=>_0x4df03a[_0x4f3841(0x187)]());}else{const _0x3b6b12=new _0x282d03('ws://localhost:'+_0x4b88d2['address']()['port']);_0x3b6b12['on'](_0x8468f[_0x4f3841(0x1d2)],_0x3b6b12['close']);}});_0x2756fd['on'](_0x44a875(0x175),_0x6e2a5b=>{const _0x21c64c=_0x44a875;_0x21c64c(0x124)==='SEUta'?_0x22bad5[_0x21c64c(0x10c)](_0x4dbd84):(assert[_0x21c64c(0x11c)](_0x2756fd[_0x21c64c(0x16d)],undefined),_0x6e2a5b['on'](_0x21c64c(0x187),()=>_0x2756fd[_0x21c64c(0x187)](_0x1477e4)));});}),_0x48cd2e[_0xb09dbb(0xc7)](it,'is\x20updated\x20when\x20client\x20terminates\x20the\x20connection',_0x4199c1=>{const _0x23595e=_0xb09dbb,_0x146196=new WebSocket[(_0x23595e(0x2a9))]({'port':0x0},()=>{const _0x2f786a=_0x23595e;if(_0x328b22['UkzqL']!==_0x328b22[_0x2f786a(0x259)]){const _0x46c1b7=new WebSocket('ws://localhost:'+_0x146196[_0x2f786a(0x25b)]()['port']);_0x46c1b7['on'](_0x328b22[_0x2f786a(0x19b)],()=>_0x46c1b7['terminate']());}else{const _0xa404f8=new _0xa74e0a[(_0x2f786a(0x2a9))]({'noServer':!![]});_0xa404f8[_0x2f786a(0x187)](_0x6c6545);}});_0x146196['on'](_0x48cd2e[_0x23595e(0x145)],_0x37af7f=>{const _0x5c5e6d=_0x23595e;_0x37af7f['on'](_0x5c5e6d(0x187),()=>{const _0x28c17b=_0x5c5e6d;assert[_0x28c17b(0x11c)](_0x146196[_0x28c17b(0x16d)][_0x28c17b(0x258)],0x0),_0x146196[_0x28c17b(0x187)](_0x4199c1);});});}),_0x48cd2e[_0xb09dbb(0x110)](it,_0x48cd2e[_0xb09dbb(0x133)],_0x55aec6=>{const _0x14e462=_0xb09dbb,_0x432cdd=new WebSocket[(_0x14e462(0x2a9))]({'port':0x0},()=>{const _0x388a7b=_0x14e462,_0x3b7299=new WebSocket('ws://localhost:'+_0x432cdd[_0x388a7b(0x25b)]()[_0x388a7b(0x24f)]);_0x3b7299['on'](_0x388a7b(0x20e),()=>_0x3b7299['close']());});_0x432cdd['on'](_0x48cd2e[_0x14e462(0x145)],_0x5ec019=>{const _0x2d0861={'JPKdY':function(_0x28d722,_0x4bcaf1){return _0x28d722===_0x4bcaf1;},'HOvnc':_0x328b22['QixTv']};_0x5ec019['on']('close',()=>{const _0x24ad50=_0x1950;if(_0x2d0861[_0x24ad50(0xf4)](_0x2d0861[_0x24ad50(0x16f)],_0x24ad50(0x265)))assert['strictEqual'](_0x432cdd['clients'][_0x24ad50(0x258)],0x0),_0x432cdd[_0x24ad50(0x187)](_0x55aec6);else{const _0x393e6e=new _0xf988d6('ws://localhost:'+_0x2d9c2a[_0x24ad50(0x25b)]()[_0x24ad50(0x24f)]);_0x393e6e['on'](_0x24ad50(0xb6),(_0x48e972,_0x239985)=>{const _0x499de5=_0x24ad50;_0x5f5853[_0x499de5(0x11c)](_0x239985[_0x499de5(0x200)],0x1f7),_0x239985[_0x499de5(0x269)](),_0x3fbed4[_0x499de5(0x187)](_0x11be40);});}});});});}),_0x48cd2e[_0x38a51f(0xd7)](describe,_0x38a51f(0x28c),()=>{const _0x582ebd=_0x38a51f,_0x1f857d={'njcqx':_0x48cd2e[_0x582ebd(0x280)],'YEhjB':'connection','CIjYz':function(_0x4827c0,_0x1ce7f8){return _0x4827c0===_0x1ce7f8;},'sEbZd':_0x48cd2e[_0x582ebd(0x282)],'RdLxx':_0x48cd2e[_0x582ebd(0x225)]};_0x48cd2e[_0x582ebd(0x104)](it,'returns\x20true\x20when\x20the\x20path\x20matches',()=>{const _0xc1174e=_0x582ebd,_0x59788e={'ZvgUY':_0x1f857d['njcqx'],'oKcqD':_0x1f857d[_0xc1174e(0x286)]};if(_0x1f857d['CIjYz'](_0x1f857d[_0xc1174e(0x2ab)],_0x1f857d[_0xc1174e(0x2ab)])){const _0x408571=new WebSocket[(_0xc1174e(0x2a9))]({'noServer':!![],'path':_0x1f857d[_0xc1174e(0x155)]});assert[_0xc1174e(0x11c)](_0x408571[_0xc1174e(0x9e)]({'url':_0xc1174e(0x2a8)}),!![]),assert[_0xc1174e(0x11c)](_0x408571[_0xc1174e(0x9e)]({'url':_0xc1174e(0x20a)}),!![]);}else{const _0x491963=0x539,_0x417b90=new _0x3dafa8[(_0xc1174e(0x2a9))]({'port':_0x491963},()=>{const _0x2896ab=_0xc1174e,_0x3a3245=new _0x560784(_0x2896ab(0x15a)+_0x491963);_0x3a3245['on'](_0x59788e[_0x2896ab(0x215)],_0x3a3245[_0x2896ab(0x187)]);});_0x417b90['on'](_0x59788e[_0xc1174e(0x9a)],()=>_0x417b90[_0xc1174e(0x187)](_0x11f98f));}}),_0x48cd2e[_0x582ebd(0xc7)](it,_0x48cd2e[_0x582ebd(0x21c)],()=>{const _0x5591aa=_0x582ebd,_0x3cd18c=new WebSocket[(_0x5591aa(0x2a9))]({'noServer':!![],'path':_0x5591aa(0x2a8)});assert['strictEqual'](_0x3cd18c['shouldHandle']({'url':_0x48cd2e[_0x5591aa(0x25c)]}),![]);});}),describe(_0x38a51f(0x136),()=>{const _0xc7c2ba=_0x38a51f,_0x532c0d={'AcSRI':_0x48cd2e[_0xc7c2ba(0x1b2)],'xkFPw':_0xc7c2ba(0x201),'BZkqI':function(_0x5cd137,_0x2c1bba){return _0x5cd137===_0x2c1bba;},'EqMLz':_0x48cd2e[_0xc7c2ba(0x157)],'OcKMb':'kgJQM','nmTIy':_0x48cd2e[_0xc7c2ba(0x18d)],'ylIOv':_0xc7c2ba(0x11b),'YgJFS':_0x48cd2e['akyxv'],'XjZWV':_0x48cd2e[_0xc7c2ba(0x27e)],'ULpzG':_0x48cd2e[_0xc7c2ba(0x1f0)],'tbLEs':_0x48cd2e[_0xc7c2ba(0xb1)]};it(_0x48cd2e[_0xc7c2ba(0x134)],_0x82a3a2=>{const _0xe475b4=_0xc7c2ba,_0x521918={'YhMgt':function(_0x2603a2,_0x1896c8){const _0x285c5f=_0x1950;return _0x48cd2e[_0x285c5f(0x196)](_0x2603a2,_0x1896c8);},'RTMTY':_0xe475b4(0x1f3),'zMPwT':_0xe475b4(0x187),'eyzvB':function(_0x23f681,_0x437441){return _0x23f681!==_0x437441;},'KdUVG':_0xe475b4(0x1f5),'UtiHM':_0xe475b4(0xcd),'gDAyW':_0x48cd2e['cNlwm']},_0x3b14b6=http['createServer']();_0x3b14b6[_0xe475b4(0x1e0)](0x0,()=>{const _0x34662=_0xe475b4,_0x51357f={'IEwId':function(_0x26344a,_0x257268){const _0x39bb8a=_0x1950;return _0x521918[_0x39bb8a(0x2b0)](_0x26344a,_0x257268);},'nJVmz':_0x34662(0x114),'ajTKG':_0x34662(0x9d),'hPjfi':_0x521918[_0x34662(0x14d)],'MPYEO':function(_0x4e538a,_0x4d82b1){const _0x3fc1f7=_0x34662;return _0x521918[_0x3fc1f7(0x17e)](_0x4e538a,_0x4d82b1);},'SiYNB':_0x34662(0x152),'ALUYp':_0x34662(0x29c),'XLqXM':_0x521918[_0x34662(0x2bc)]},_0x4f3e22=new WebSocket['Server']({'noServer':!![]});_0x3b14b6['on'](_0x521918[_0x34662(0x181)],(_0xbf13b3,_0x44252b,_0x51a106)=>{const _0x43d2bf=_0x34662;_0x521918[_0x43d2bf(0x2b0)]('cKfut',_0x521918[_0x43d2bf(0x18e)])?(_0x3889cd[_0x43d2bf(0x11c)](_0x59ca51[_0x43d2bf(0x200)],0x191),_0x4bf2d1[_0x43d2bf(0x187)](_0x1092ec)):_0x4f3e22[_0x43d2bf(0xfe)](_0xbf13b3,_0x44252b,_0x51a106,_0x7995f5=>{const _0x53c285=_0x43d2bf;_0x51357f[_0x53c285(0x2af)](_0x51357f[_0x53c285(0x107)],_0x51357f[_0x53c285(0x212)])?_0x2254ce[_0x53c285(0x187)](()=>{_0xbbf070['strictEqual'](_0x1cc95f['address'](),null),_0x3bbd73();}):(_0x7995f5[_0x53c285(0x290)](_0x53c285(0x1f5)),_0x7995f5[_0x53c285(0x187)]());});});const _0xdcfbe5=new WebSocket('ws://localhost:'+_0x3b14b6[_0x34662(0x25b)]()['port']);_0xdcfbe5['on'](_0x521918['gDAyW'],(_0x2a5643,_0x241c33)=>{const _0x20f8da=_0x34662,_0x6a5a19={'LUnzF':_0x51357f[_0x20f8da(0x2b5)]};_0x51357f[_0x20f8da(0x10b)](_0x51357f[_0x20f8da(0x2c7)],_0x51357f[_0x20f8da(0x251)])?(assert[_0x20f8da(0x111)](_0x2a5643,Buffer[_0x20f8da(0x2ae)](_0x51357f[_0x20f8da(0x26a)])),assert['ok'](!_0x241c33),_0x3b14b6['close'](_0x82a3a2)):(_0x52e2a5['on'](_0x6a5a19['LUnzF'],_0x56c649),_0x2ca277['close'](),_0x838a6d[_0x20f8da(0x187)](),_0x1b652d[_0x20f8da(0x187)]());});});}),it(_0xc7c2ba(0xc9),_0x518854=>{const _0x2acbef=_0xc7c2ba,_0x48c118={'yTnID':function(_0xfdb38a,_0x42ddb6){return _0x532c0d['BZkqI'](_0xfdb38a,_0x42ddb6);},'CABte':_0x532c0d[_0x2acbef(0x2b2)],'xYpBe':_0x532c0d[_0x2acbef(0xba)]},_0x3e0d9d=new WebSocket[(_0x2acbef(0x2a9))]({'port':0x0,'path':_0x532c0d[_0x2acbef(0xfc)]},()=>{const _0x54fb97=_0x2acbef,_0x4eec96=http[_0x54fb97(0x130)]({'port':_0x3e0d9d['address']()[_0x54fb97(0x24f)],'headers':{'Connection':_0x532c0d[_0x54fb97(0x25a)],'Upgrade':'websocket','Sec-WebSocket-Key':_0x532c0d[_0x54fb97(0xbd)],'Sec-WebSocket-Version':0xd}});_0x4eec96['on'](_0x54fb97(0x26c),_0x5b78f4=>{const _0x38f29a=_0x54fb97;if(_0x48c118[_0x38f29a(0x26d)](_0x48c118['CABte'],_0x48c118['xYpBe'])){const _0x495678={'lsiTY':_0x38f29a(0x1a5)};_0x5ba99e[_0x38f29a(0x11c)](_0x1d74ee[_0x38f29a(0x200)],0x190);const _0x36b662=[];_0x2efe71['on'](_0x38f29a(0x15d),_0x1438f9=>{const _0x479699=_0x38f29a;_0x36b662[_0x479699(0x10c)](_0x1438f9);}),_0x41d40a['on']('end',()=>{const _0x542af6=_0x38f29a;_0x299068['strictEqual'](_0x383a0a[_0x542af6(0x292)](_0x36b662)['toString'](),_0x495678[_0x542af6(0x207)]),_0x2c6539[_0x542af6(0x187)](_0x1633d3);});}else assert[_0x38f29a(0x11c)](_0x5b78f4[_0x38f29a(0x200)],0x190),_0x3e0d9d['close'](_0x518854);});});}),it(_0x48cd2e[_0xc7c2ba(0x1dc)],_0x1e5f64=>{const _0x11da24=_0xc7c2ba,_0xa27a98={'Npjty':_0x48cd2e[_0x11da24(0x280)]};if(_0x48cd2e[_0x11da24(0xe3)](_0x11da24(0x260),_0x11da24(0x8e))){const _0x1e8ed8=new WebSocket[(_0x11da24(0x2a9))]({'port':0x0},()=>{const _0xe4de36=_0x11da24,_0x30fe7c={'GJuZs':function(_0x4b047a,_0x16c780){const _0x7fd386=_0x1950;return _0x532c0d[_0x7fd386(0xe7)](_0x4b047a,_0x16c780);},'EtTNj':_0x532c0d[_0xe4de36(0x21a)]},_0x47ddcd=http[_0xe4de36(0x130)]({'port':_0x1e8ed8[_0xe4de36(0x25b)]()['port'],'headers':{'Connection':_0x532c0d[_0xe4de36(0x25a)],'Upgrade':_0x532c0d[_0xe4de36(0xd9)],'Sec-WebSocket-Key1':_0x532c0d[_0xe4de36(0x2a3)],'Sec-WebSocket-Key2':'12998\x205\x20Y3\x201\x20\x20.P00','Sec-WebSocket-Protocol':_0xe4de36(0x1c4)}});_0x47ddcd['on'](_0x532c0d[_0xe4de36(0x1d1)],_0x8b94f1=>{const _0x2365aa=_0xe4de36,_0x330dbe={'jQrCY':_0x2365aa(0x1a5)};if(_0x30fe7c[_0x2365aa(0xe4)](_0x30fe7c['EtTNj'],_0x30fe7c[_0x2365aa(0x14f)])){assert[_0x2365aa(0x11c)](_0x8b94f1[_0x2365aa(0x200)],0x190);const _0x408f00=[];_0x8b94f1['on'](_0x2365aa(0x15d),_0xbfb518=>{const _0x1521da=_0x2365aa;_0x408f00[_0x1521da(0x10c)](_0xbfb518);}),_0x8b94f1['on'](_0x2365aa(0x266),()=>{const _0x160869=_0x2365aa;assert[_0x160869(0x11c)](Buffer[_0x160869(0x292)](_0x408f00)[_0x160869(0x288)](),_0x330dbe[_0x160869(0xbe)]),_0x1e8ed8['close'](_0x1e5f64);});}else _0x99caa5[_0x2365aa(0x10c)](_0x5191df);});});}else{_0x49feb['strictEqual'](_0x5e5bfc['clients'],_0x59f294);const _0x368d36=new _0x51fce6(_0x11da24(0x15a)+_0x39c984[_0x11da24(0x25b)]()[_0x11da24(0x24f)]);_0x368d36['on'](_0xa27a98[_0x11da24(0x183)],()=>_0x368d36[_0x11da24(0x187)]());}}),_0x48cd2e[_0xc7c2ba(0x24e)](it,_0xc7c2ba(0x121),_0x53da4c=>{const _0x5edbc9=_0xc7c2ba,_0x3fafaf={'YATQN':_0x532c0d[_0x5edbc9(0x19d)]},_0x8ef993=http[_0x5edbc9(0x2ad)]();_0x8ef993[_0x5edbc9(0x1e0)](0x0,()=>{const _0x4ed119=_0x5edbc9,_0x4e7531=new WebSocket[(_0x4ed119(0x2a9))]({'noServer':!![]});_0x8ef993['on'](_0x4ed119(0xcd),(_0x34da9b,_0x147c35,_0x4d706e)=>{const _0xba655=_0x4ed119,{clientSide:_0x49d4d9,serverSide:_0x4985cf}=makeDuplexPair();_0x147c35[_0xba655(0x202)](_0x49d4d9),_0x49d4d9['pipe'](_0x147c35),_0x4e7531['handleUpgrade'](_0x34da9b,_0x4985cf,_0x4d706e,_0x50b85d=>{const _0x30b593=_0xba655;_0x50b85d[_0x30b593(0x290)](_0x30b593(0x1f5)),_0x50b85d[_0x30b593(0x187)]();});});const _0x27855c=new WebSocket(_0x4ed119(0x15a)+_0x8ef993[_0x4ed119(0x25b)]()[_0x4ed119(0x24f)]);_0x27855c['on'](_0x4ed119(0xb3),(_0x2137e3,_0x5abb02)=>{const _0x50d9ea=_0x4ed119;_0x3fafaf[_0x50d9ea(0x249)]!=='cEYYa'?(assert['deepStrictEqual'](_0x2137e3,Buffer['from'](_0x50d9ea(0x1f5))),assert['ok'](!_0x5abb02),_0x8ef993['close'](_0x53da4c)):_0x81d2bc[_0x50d9ea(0x10c)](_0x19307b);});});});}),_0x48cd2e[_0x38a51f(0x163)](describe,_0x48cd2e[_0x38a51f(0xb2)],()=>{const _0x14824e=_0x38a51f,_0x341c02={'fylHM':_0x48cd2e[_0x14824e(0x29e)],'NxCDd':_0x14824e(0xcd)};if(_0x48cd2e[_0x14824e(0xe3)](_0x48cd2e[_0x14824e(0x218)],_0x48cd2e[_0x14824e(0x218)])){const _0x269f5c={'ZTIwU':_0x48cd2e[_0x14824e(0x23c)],'anxwF':_0x48cd2e[_0x14824e(0x2b3)]},_0xb09a97=_0x1978a1[_0x14824e(0x132)]({'method':_0x48cd2e[_0x14824e(0xc0)],'port':_0x3175f5[_0x14824e(0x25b)]()[_0x14824e(0x24f)],'headers':{'Connection':_0x14824e(0x19a),'Upgrade':_0x48cd2e[_0x14824e(0x97)]}});_0xb09a97['on'](_0x48cd2e[_0x14824e(0x1f0)],_0x3625c0=>{const _0x7e7b0f=_0x14824e,_0x11aa24={'dyToP':_0x269f5c[_0x7e7b0f(0x287)]};_0x8be0a0[_0x7e7b0f(0x11c)](_0x3625c0[_0x7e7b0f(0x200)],0x195);const _0x339fdb=[];_0x3625c0['on'](_0x269f5c[_0x7e7b0f(0x28b)],_0x340563=>{const _0x4bfb49=_0x7e7b0f;_0x339fdb[_0x4bfb49(0x10c)](_0x340563);}),_0x3625c0['on'](_0x7e7b0f(0x266),()=>{const _0x59f020=_0x7e7b0f;_0x169caa[_0x59f020(0x11c)](_0x330af0[_0x59f020(0x292)](_0x339fdb)[_0x59f020(0x288)](),_0x11aa24['dyToP']),_0x4c0660[_0x59f020(0x187)](_0xe6674e);});}),_0xb09a97[_0x14824e(0x266)]();}else _0x48cd2e['rTnqX'](it,'throws\x20an\x20error\x20if\x20called\x20twice\x20with\x20the\x20same\x20socket',_0x2f0e43=>{const _0x3aaf29=_0x14824e,_0xe79a05={'wkkPE':function(_0x36dc13,_0x98849f){const _0x4e61a3=_0x1950;return _0x48cd2e[_0x4e61a3(0x276)](_0x36dc13,_0x98849f);},'ibkwJ':_0x48cd2e[_0x3aaf29(0x1d6)],'EviCT':_0x3aaf29(0x187)},_0x1196d5=http[_0x3aaf29(0x2ad)]();_0x1196d5[_0x3aaf29(0x1e0)](0x0,()=>{const _0xd7c3c7=_0x3aaf29,_0x4a43b2={'nOwYP':_0x341c02[_0xd7c3c7(0x1b4)],'OFEjr':'XLeYr'},_0x24e293=new WebSocket[(_0xd7c3c7(0x2a9))]({'noServer':!![]});_0x1196d5['on'](_0x341c02[_0xd7c3c7(0x23e)],(_0x894a27,_0x2938d5,_0x263dea)=>{const _0x402afc=_0xd7c3c7,_0x598a9d={'Tpgjl':function(_0x4bfaff,_0x504d5b){return _0x4bfaff instanceof _0x504d5b;},'bSzeZ':_0x402afc(0x27c),'RTQby':_0x402afc(0x2b9)};_0xe79a05[_0x402afc(0x21d)](_0x402afc(0x226),_0xe79a05[_0x402afc(0x1c1)])?(_0x24e293[_0x402afc(0xfe)](_0x894a27,_0x2938d5,_0x263dea,_0x34546d=>{const _0x1b31f1=_0x402afc;_0x34546d[_0x1b31f1(0x187)]();}),assert[_0x402afc(0x8d)](()=>_0x24e293[_0x402afc(0xfe)](_0x894a27,_0x2938d5,_0x263dea,NOOP),_0x1fda48=>{const _0xce5b2d=_0x402afc;return assert['ok'](_0x598a9d[_0xce5b2d(0xc4)](_0x1fda48,Error)),assert[_0xce5b2d(0x11c)](_0x1fda48[_0xce5b2d(0xb3)],'server.handleUpgrade()\x20was\x20called\x20more\x20than\x20once\x20with\x20the\x20'+_0x598a9d[_0xce5b2d(0x122)]),Function(_0xce5b2d(0xf3))(),!![];})):_0x5b6685(new _0x163238(_0x598a9d[_0x402afc(0x172)]));});const _0x4c993b=new WebSocket(_0xd7c3c7(0x15a)+_0x1196d5['address']()[_0xd7c3c7(0x24f)]);_0x4c993b['on']('open',()=>{_0x4c993b['on'](_0xe79a05['EviCT'],()=>{const _0x5d7574=_0x1950,_0x3c5054={'yDQCH':_0x5d7574(0x1a5)};_0x4a43b2[_0x5d7574(0x1cf)]!==_0x4a43b2[_0x5d7574(0x14b)]?_0x1196d5[_0x5d7574(0x187)](_0x2f0e43):(_0x3c7ebd[_0x5d7574(0x11c)](_0x44292c['concat'](_0x19117a)[_0x5d7574(0x288)](),_0x3c5054[_0x5d7574(0x232)]),_0x2fa424[_0x5d7574(0x187)](_0x1987d1));});});});});}),_0x48cd2e['hKdhk'](describe,'Connection\x20establishing',()=>{const _0x2917a1=_0x38a51f,_0x3df895={'LEYCQ':_0x2917a1(0x15d),'KzUKU':'response','phYCh':_0x2917a1(0x138),'qdbuM':'bar','hzSiV':_0x48cd2e[_0x2917a1(0x296)],'DhkMf':_0x2917a1(0x201),'QsQbP':function(_0x3200c8,_0x37a502){return _0x3200c8===_0x37a502;},'dlvPE':_0x2917a1(0x179),'zVwsc':function(_0x4f390f,_0x741baf){const _0xfd6141=_0x2917a1;return _0x48cd2e[_0xfd6141(0x241)](_0x4f390f,_0x741baf);},'osYFl':_0x2917a1(0x19a),'BTQLB':_0x2917a1(0x8c),'PMZzQ':_0x48cd2e['qlokg'],'SCVRu':_0x2917a1(0x12d),'Oqiwd':function(_0x5a0e93,_0x1381e0){return _0x5a0e93+_0x1381e0;},'nOCXu':_0x48cd2e[_0x2917a1(0x140)],'DVCct':_0x2917a1(0x175),'RHKxq':_0x48cd2e['WlXCl'],'bApUp':_0x48cd2e['nciUd'],'Cragf':function(_0x5c0591){return _0x5c0591();},'habZi':function(_0x1970df,_0xbd422c){const _0x43c3f=_0x2917a1;return _0x48cd2e[_0x43c3f(0x117)](_0x1970df,_0xbd422c);},'iklHu':_0x2917a1(0x1e5),'shfzB':'test/fixtures/certificate.pem','Tqjtf':function(_0x13a826,_0x504cd2){const _0x58f22e=_0x2917a1;return _0x48cd2e[_0x58f22e(0x196)](_0x13a826,_0x504cd2);},'pngty':_0x2917a1(0x186),'HCHhx':_0x48cd2e[_0x2917a1(0x27f)],'xBOBk':function(_0x3cf755,_0x1e7f45,_0x2452e3){return _0x3cf755(_0x1e7f45,_0x2452e3);},'wBujt':_0x2917a1(0x12e),'uoAlU':function(_0x33993d,_0x50a826){return _0x33993d(_0x50a826);},'OUwWT':_0x2917a1(0x160),'qgmSE':_0x48cd2e[_0x2917a1(0x1c5)],'ArFHR':_0x2917a1(0x1a6),'XLnnr':'MlWGH','yLAuG':function(_0x4b4c79,_0x1b0a6c,_0x121db5){return _0x4b4c79(_0x1b0a6c,_0x121db5);},'LDSCY':_0x48cd2e['rKjnV'],'feoEj':_0x2917a1(0x1c2),'uQtbt':_0x2917a1(0x169),'dyZVI':_0x48cd2e[_0x2917a1(0x158)],'ICMmj':function(_0x275256,_0x42ea7b){return _0x275256 instanceof _0x42ea7b;},'hDImy':_0x48cd2e[_0x2917a1(0xca)]};_0x48cd2e[_0x2917a1(0x11d)](it,_0x2917a1(0xa0),_0x2dcfe3=>{const _0x1d13bf=_0x2917a1,_0x571c11={'DwdCy':_0x3df895[_0x1d13bf(0x1fb)],'cSJju':'POST','kmzCV':_0x3df895[_0x1d13bf(0x170)],'QPxmh':_0x1d13bf(0x1c8),'WVaCd':'Unexpected\x20callback\x20invocation','IRdMp':function(_0xe0457,_0x4dbb68){return _0xe0457===_0x4dbb68;},'SOQgZ':_0x1d13bf(0x221),'ikkGC':function(_0x278d22,_0x44fd48){return _0x278d22(_0x44fd48);}},_0x1b932a=new WebSocket[(_0x1d13bf(0x2a9))]({'port':0x0},()=>{const _0x182fda=_0x1d13bf,_0x42b15a=http[_0x182fda(0x132)]({'method':_0x571c11[_0x182fda(0x1af)],'port':_0x1b932a['address']()[_0x182fda(0x24f)],'headers':{'Connection':_0x182fda(0x19a),'Upgrade':_0x182fda(0x8c)}});_0x42b15a['on'](_0x571c11[_0x182fda(0xec)],_0x48d379=>{const _0x2b0b09=_0x182fda;assert[_0x2b0b09(0x11c)](_0x48d379[_0x2b0b09(0x200)],0x195);const _0x24fe25=[];_0x48d379['on'](_0x571c11['DwdCy'],_0x584e66=>{_0x24fe25['push'](_0x584e66);}),_0x48d379['on'](_0x2b0b09(0x266),()=>{const _0x37d2df=_0x2b0b09;assert[_0x37d2df(0x11c)](Buffer['concat'](_0x24fe25)[_0x37d2df(0x288)](),'Invalid\x20HTTP\x20method'),_0x1b932a[_0x37d2df(0x187)](_0x2dcfe3);});}),_0x42b15a[_0x182fda(0x266)]();});_0x1b932a['on'](_0x1d13bf(0x175),()=>{const _0x41a5a8=_0x1d13bf,_0x2aeb1b={'kaBAY':_0x571c11['WVaCd']};_0x571c11['IRdMp'](_0x571c11[_0x41a5a8(0x242)],_0x571c11['SOQgZ'])?_0x571c11['ikkGC'](_0x2dcfe3,new Error('Unexpected\x20\x27connection\x27\x20event')):(_0xf5f104[_0x41a5a8(0x111)](_0x194fa8[_0x41a5a8(0x267)],{'foo':_0x571c11['QPxmh']}),_0x3d471e[_0x41a5a8(0xfe)](_0x18b054,_0x1f92c2,_0x4efc36,()=>{const _0x2f4e74=_0x41a5a8;_0x1eddd3(new _0x3e860b(_0x2aeb1b[_0x2f4e74(0x106)]));}));});}),it(_0x2917a1(0x222),_0x120797=>{const _0x4804d4=_0x2917a1,_0x6edd82={'tvXOg':_0x48cd2e[_0x4804d4(0xe2)],'SFNhW':'data','zxPst':function(_0x43a5a8,_0x55e670){return _0x43a5a8!==_0x55e670;},'FTfQU':_0x48cd2e[_0x4804d4(0x24a)],'QTFWY':_0x4804d4(0x1c8),'DWqvg':_0x4804d4(0x289),'wGLEz':_0x48cd2e['iTUii']},_0x511eb1=http[_0x4804d4(0x2ad)](),_0x39863f=new WebSocket['Server']({'noServer':!![]});_0x511eb1[_0x4804d4(0x126)]=0x1,_0x511eb1['on'](_0x4804d4(0xcd),(_0x4746be,_0x29fc79,_0x609f41)=>{const _0x2bcc27=_0x4804d4,_0x45e4b8={'QuNBQ':_0x3df895[_0x2bcc27(0x285)]};assert[_0x2bcc27(0x111)](_0x4746be[_0x2bcc27(0x267)],{'foo':_0x3df895[_0x2bcc27(0x8f)]}),_0x39863f[_0x2bcc27(0xfe)](_0x4746be,_0x29fc79,_0x609f41,()=>{const _0x44711d=_0x2bcc27,_0x39d7e4={'sdbup':_0x44711d(0x187)};'RGijB'!==_0x45e4b8[_0x44711d(0x26e)]?_0x25d2b1['on'](_0x39d7e4[_0x44711d(0x2a7)],()=>{_0x131b9a['close'](_0x3cba90);}):_0x120797(new Error(_0x44711d(0x1e8)));});}),_0x511eb1[_0x4804d4(0x1e0)](()=>{const _0x345bda=_0x4804d4,_0x31f187={'plETC':_0x345bda(0xcd),'FUXmX':_0x6edd82['tvXOg'],'uAHQS':_0x6edd82[_0x345bda(0x270)],'dkcoh':'end'};if(_0x6edd82[_0x345bda(0x203)](_0x345bda(0x235),_0x6edd82[_0x345bda(0xbf)]))_0xfbda90[_0x345bda(0x11c)](_0x7ceb3[_0x345bda(0x267)][_0x345bda(0x1ad)],_0x345bda(0x174)),_0x3fced2[_0x345bda(0x187)](_0x4d08d8);else{const _0x5a42b3=http[_0x345bda(0x130)]({'port':_0x511eb1[_0x345bda(0x25b)]()[_0x345bda(0x24f)],'headers':{'foo':_0x6edd82[_0x345bda(0x1d9)],'bar':_0x6edd82[_0x345bda(0x1e4)],'Connection':_0x345bda(0x19a),'Upgrade':_0x345bda(0x8c)}});_0x5a42b3['on'](_0x6edd82[_0x345bda(0x1ba)],_0x2f8d8a=>{const _0x5d86c6=_0x345bda,_0x1d27c5={'gGNwx':_0x5d86c6(0x25d),'WwSQi':function(_0x15a6ed){return _0x15a6ed();},'jniBH':_0x31f187['plETC']};if(_0x31f187[_0x5d86c6(0x127)]===_0x31f187[_0x5d86c6(0x127)]){assert[_0x5d86c6(0x11c)](_0x2f8d8a[_0x5d86c6(0x200)],0x190);const _0x12545e=[];_0x2f8d8a['on'](_0x31f187[_0x5d86c6(0x283)],_0x474b5d=>{const _0x1eb507=_0x5d86c6;_0x12545e[_0x1eb507(0x10c)](_0x474b5d);}),_0x2f8d8a['on'](_0x31f187['dkcoh'],()=>{const _0x4a8981=_0x5d86c6;assert[_0x4a8981(0x11c)](Buffer['concat'](_0x12545e)[_0x4a8981(0x288)](),_0x1d27c5['gGNwx']),_0x511eb1['close'](_0x120797);});}else{const _0x4cff74=new _0x204a6c['Server']({'noServer':!![]});_0x515df7['on'](_0x1d27c5[_0x5d86c6(0x1cb)],(_0x1c4288,_0x24bd0c,_0x3c1a29)=>{const _0x36eab1=_0x5d86c6,{clientSide:_0x3feb19,serverSide:_0x45eb87}=_0x1d27c5['WwSQi'](_0x32628e);_0x24bd0c['pipe'](_0x3feb19),_0x3feb19[_0x36eab1(0x202)](_0x24bd0c),_0x4cff74[_0x36eab1(0xfe)](_0x1c4288,_0x45eb87,_0x3c1a29,_0x2a1445=>{const _0x3fcdef=_0x36eab1;_0x2a1445[_0x3fcdef(0x290)](_0x3fcdef(0x1f5)),_0x2a1445[_0x3fcdef(0x187)]();});});const _0x55a994=new _0x26e80b(_0x5d86c6(0x15a)+_0x4b58ed['address']()[_0x5d86c6(0x24f)]);_0x55a994['on'](_0x5d86c6(0xb3),(_0xa850e8,_0x292f8a)=>{const _0xf3456d=_0x5d86c6;_0xd24ffe[_0xf3456d(0x111)](_0xa850e8,_0x526cea[_0xf3456d(0x2ae)](_0xf3456d(0x1f5))),_0x5f07e7['ok'](!_0x292f8a),_0x565cf4[_0xf3456d(0x187)](_0x2628a4);});}});}});}),_0x48cd2e[_0x2917a1(0x24c)](it,_0x2917a1(0x263),_0x29a292=>{const _0x5dd957=_0x2917a1,_0x15c230={'suMXZ':_0x48cd2e[_0x5dd957(0x296)],'moPst':_0x48cd2e[_0x5dd957(0x178)],'qaYCU':_0x5dd957(0x2b6),'IodUa':function(_0x348439,_0x5d1e4a){return _0x348439(_0x5d1e4a);}},_0x5bc013=new WebSocket[(_0x5dd957(0x2a9))]({'port':0x0},()=>{const _0x4cfc90=_0x5dd957,_0x1c7e0c={'ZaREt':function(_0x36bd78,_0x2a0f89){return _0x36bd78!==_0x2a0f89;},'rvMOt':_0x4cfc90(0x17d),'jhYfD':_0x15c230['suMXZ']};if('ACBYY'===_0x15c230[_0x4cfc90(0x1b6)]){const _0x1324b8=http['get']({'port':_0x5bc013[_0x4cfc90(0x25b)]()['port'],'headers':{'Connection':_0x4cfc90(0x19a),'Upgrade':_0x15c230[_0x4cfc90(0x2a1)]}});_0x1324b8['on'](_0x4cfc90(0x26c),_0x487f23=>{const _0x81c180=_0x4cfc90;assert[_0x81c180(0x11c)](_0x487f23[_0x81c180(0x200)],0x190);const _0x303656=[];_0x487f23['on'](_0x81c180(0x15d),_0x1589ec=>{_0x303656['push'](_0x1589ec);}),_0x487f23['on'](_0x81c180(0x266),()=>{const _0x1a4a60=_0x81c180;_0x1c7e0c['ZaREt'](_0x1a4a60(0x1a8),_0x1c7e0c['rvMOt'])?(assert[_0x1a4a60(0x11c)](Buffer[_0x1a4a60(0x292)](_0x303656)['toString'](),_0x1a4a60(0x25d)),_0x5bc013[_0x1a4a60(0x187)](_0x29a292)):(_0x67e858[_0x1a4a60(0x11c)](_0x45e5fd[_0x1a4a60(0x2a4)]['port'],0x0),_0x3846ee['close'](_0x3a6dc7));});});}else{_0x1a4a52[_0x4cfc90(0x11c)](_0xb78d0['statusCode'],0x190);const _0x4d7e07=[];_0x6c576a['on']('data',_0x44030d=>{_0x4d7e07['push'](_0x44030d);}),_0x17f449['on'](_0x1c7e0c[_0x4cfc90(0x189)],()=>{const _0x8323e4=_0x4cfc90;_0x468ae3['strictEqual'](_0x464b2c['concat'](_0x4d7e07)[_0x8323e4(0x288)](),'Missing\x20or\x20invalid\x20Sec-WebSocket-Key\x20header'),_0x143eb8[_0x8323e4(0x187)](_0x4e05f6);});}});_0x5bc013['on'](_0x5dd957(0x175),()=>{const _0x33ec67=_0x5dd957;_0x15c230[_0x33ec67(0xcc)](_0x29a292,new Error('Unexpected\x20\x27connection\x27\x20event'));});}),_0x48cd2e['LaDKJ'](it,_0x48cd2e[_0x2917a1(0xa1)],_0x243ac5=>{const _0x569628=_0x2917a1,_0x1f0aa1=new WebSocket['Server']({'port':0x0},()=>{const _0x3ce330=_0x1950,_0x156f67={'etanV':_0x3df895['hzSiV']},_0x5e32e7=http[_0x3ce330(0x130)]({'port':_0x1f0aa1[_0x3ce330(0x25b)]()[_0x3ce330(0x24f)],'headers':{'Connection':_0x3ce330(0x19a),'Upgrade':_0x3ce330(0x8c)}});_0x5e32e7['on'](_0x3ce330(0x26c),_0x182c71=>{const _0x1f3d3c=_0x3ce330;assert[_0x1f3d3c(0x11c)](_0x182c71[_0x1f3d3c(0x200)],0x190);const _0x24d56a=[];_0x182c71['on'](_0x1f3d3c(0x15d),_0x49b901=>{const _0x112a86=_0x1f3d3c;_0x24d56a[_0x112a86(0x10c)](_0x49b901);}),_0x182c71['on'](_0x156f67[_0x1f3d3c(0x1a0)],()=>{const _0xe76ec9=_0x1f3d3c;'pKIjL'!==_0xe76ec9(0xad)?(_0x15a6c1[_0xe76ec9(0x11c)](_0x425bc4[_0xe76ec9(0x200)],0x191),_0x2e2a5b[_0xe76ec9(0x187)](_0x3462c7)):(assert['strictEqual'](Buffer['concat'](_0x24d56a)[_0xe76ec9(0x288)](),'Missing\x20or\x20invalid\x20Sec-WebSocket-Key\x20header'),_0x1f0aa1['close'](_0x243ac5));});});});_0x1f0aa1['on'](_0x569628(0x175),()=>{const _0x40621f=_0x569628,_0x53aa67={'naaYS':_0x3df895[_0x40621f(0x2a6)]};if(_0x3df895[_0x40621f(0x17c)](_0x3df895[_0x40621f(0x2ba)],'lNLPZ'))_0x3df895[_0x40621f(0x101)](_0x243ac5,new Error(_0x40621f(0x2b9)));else{const _0x278b7f=_0xfbb2f7[_0x40621f(0x132)]({'port':_0x27f57e[_0x40621f(0x25b)]()[_0x40621f(0x24f)],'headers':{'Connection':'Upgrade','Upgrade':'websocket','Sec-WebSocket-Key':_0x53aa67[_0x40621f(0xb4)],'Sec-WebSocket-Version':0xd}}),_0x2e34dc=_0x10d09a[_0x40621f(0xff)](_0x246f5c[_0x40621f(0x2ae)]('Hello'),{'fin':!![],'rsv1':![],'opcode':0x1,'mask':!![],'readOnly':![]});_0x278b7f[_0x40621f(0x15b)](_0x2a9324['concat'](_0x2e34dc)),_0x278b7f[_0x40621f(0x266)]();}});}),it(_0x48cd2e[_0x2917a1(0x22a)],_0x85b11d=>{const _0x367fae=_0x2917a1,_0x1d2ca1={'eLnYQ':_0x3df895[_0x367fae(0xf9)]};if(_0x367fae(0x12d)===_0x3df895[_0x367fae(0x149)]){const _0x3bb41f=new WebSocket[(_0x367fae(0x2a9))]({'port':0x0},()=>{const _0x36080b=_0x367fae,_0x2669d4=http[_0x36080b(0x130)]({'port':_0x3bb41f[_0x36080b(0x25b)]()[_0x36080b(0x24f)],'headers':{'Connection':_0x3df895[_0x36080b(0x1b1)],'Upgrade':_0x3df895[_0x36080b(0x108)],'Sec-WebSocket-Key':'P5l8BJcZwRc='}});_0x2669d4['on'](_0x36080b(0x26c),_0x473edf=>{const _0x5ef0b1=_0x36080b;assert[_0x5ef0b1(0x11c)](_0x473edf[_0x5ef0b1(0x200)],0x190);const _0x27b55c=[];_0x473edf['on'](_0x5ef0b1(0x15d),_0x48a7cf=>{const _0xe1f92e=_0x5ef0b1;_0x27b55c[_0xe1f92e(0x10c)](_0x48a7cf);}),_0x473edf['on']('end',()=>{const _0x1ca002=_0x5ef0b1;assert[_0x1ca002(0x11c)](Buffer[_0x1ca002(0x292)](_0x27b55c)['toString'](),_0x1ca002(0x1a5)),_0x3bb41f[_0x1ca002(0x187)](_0x85b11d);});});});_0x3bb41f['on'](_0x367fae(0x175),()=>{const _0x830bc8=_0x367fae;_0x85b11d(new Error(_0x1d2ca1[_0x830bc8(0x299)]));});}else _0x74ac10[_0x367fae(0x11c)](_0x284f79['readable'],!![]),_0x24a0b8['strictEqual'](_0x3ada5b['writable'],!![]),_0x3053b2['on'](_0x367fae(0x266),()=>{const _0x20583f=_0x367fae;_0x5581dc[_0x20583f(0x11c)](_0x2edcbe[_0x20583f(0x19f)],![]),_0x92ffd4['strictEqual'](_0x314171[_0x20583f(0x1aa)],!![]),_0xc541ef(!![]);});}),it(_0x48cd2e[_0x2917a1(0xc5)],_0x3e43f2=>{const _0x1a6205=_0x2917a1,_0xa344a9=new WebSocket[(_0x1a6205(0x2a9))]({'port':0x0},()=>{const _0x5a7557=_0x1a6205,_0x131b89={'eQtBP':_0x5a7557(0x250),'oinZS':function(_0xe0e50,_0x52b024){const _0x1e21bc=_0x5a7557;return _0x3df895[_0x1e21bc(0x274)](_0xe0e50,_0x52b024);},'cRFKt':_0x5a7557(0x266)},_0x444a7e=http[_0x5a7557(0x130)]({'port':_0xa344a9[_0x5a7557(0x25b)]()['port'],'headers':{'Connection':_0x3df895[_0x5a7557(0x1b1)],'Upgrade':_0x5a7557(0x8c),'Sec-WebSocket-Key':_0x3df895[_0x5a7557(0x2a6)]}});_0x444a7e['on'](_0x5a7557(0x26c),_0x4f63ac=>{const _0x122006=_0x5a7557,_0x5466f4={'xQQrk':function(_0x5c5871,_0x464f14){const _0x26496a=_0x1950;return _0x131b89[_0x26496a(0x247)](_0x5c5871,_0x464f14);}};assert['strictEqual'](_0x4f63ac[_0x122006(0x200)],0x190);const _0x419a28=[];_0x4f63ac['on']('data',_0x307fa6=>{const _0xc6eb8a=_0x122006;_0x419a28[_0xc6eb8a(0x10c)](_0x307fa6);}),_0x4f63ac['on'](_0x131b89[_0x122006(0xce)],()=>{const _0x240e11=_0x122006;if('xBwtH'===_0x240e11(0x96)){const _0x2fd00d=_0x13ed7e['createServer'](),_0x466137=[{'port':0x0,'noServer':!![],'server':_0x2fd00d},{'port':0x0,'noServer':!![]},{'port':0x0,'server':_0x2fd00d},{'noServer':!![],'server':_0x2fd00d}];for(const _0x1567e2 of _0x466137){_0x1f7ce4[_0x240e11(0x8d)](()=>new _0x5d3e73[(_0x240e11(0x2a9))](_0x1567e2),new _0xb62cfd(_0x5466f4[_0x240e11(0x2aa)]('^TypeError:\x20One\x20and\x20only\x20one\x20of\x20the\x20\x22port\x22,\x20\x22server\x22,\x20or\x20','\x22noServer\x22\x20options\x20must\x20be\x20specified$')));}}else assert[_0x240e11(0x11c)](Buffer[_0x240e11(0x292)](_0x419a28)[_0x240e11(0x288)](),_0x131b89[_0x240e11(0x273)]),_0xa344a9[_0x240e11(0x187)](_0x3e43f2);});});});_0xa344a9['on'](_0x48cd2e['UDYKa'],()=>{const _0xba1264=_0x1a6205;_0x3e43f2(new Error(_0xba1264(0x2b9)));});}),it(_0x2917a1(0xdc),_0x5bc40c=>{const _0x3dcdfe=_0x2917a1,_0x4648a4={'hELBa':function(_0xe2e2be,_0x2b1b4e){return _0xe2e2be(_0x2b1b4e);},'iJRna':_0x3dcdfe(0x2b9)},_0x597a01=new WebSocket[(_0x3dcdfe(0x2a9))]({'port':0x0},()=>{const _0x496484=_0x3dcdfe,_0x4f72cf={'BtrBT':_0x496484(0x250),'bfOKh':_0x496484(0x15d),'fCjok':_0x3df895['hzSiV']},_0x1bd0ce=http[_0x496484(0x130)]({'port':_0x597a01['address']()['port'],'headers':{'Connection':_0x3df895[_0x496484(0x1b1)],'Upgrade':_0x496484(0x8c),'Sec-WebSocket-Key':_0x3df895[_0x496484(0x2a6)],'Sec-WebSocket-Version':0xc}});_0x1bd0ce['on'](_0x496484(0x26c),_0x339546=>{const _0x361fc1=_0x496484,_0x37c34e={'jKJGq':_0x4f72cf[_0x361fc1(0x246)]};assert[_0x361fc1(0x11c)](_0x339546['statusCode'],0x190);const _0x4549ce=[];_0x339546['on'](_0x4f72cf['bfOKh'],_0x26271a=>{const _0x219be5=_0x361fc1;_0x4549ce[_0x219be5(0x10c)](_0x26271a);}),_0x339546['on'](_0x4f72cf[_0x361fc1(0x230)],()=>{const _0x1d5805=_0x361fc1;assert[_0x1d5805(0x11c)](Buffer[_0x1d5805(0x292)](_0x4549ce)[_0x1d5805(0x288)](),_0x37c34e[_0x1d5805(0x191)]),_0x597a01[_0x1d5805(0x187)](_0x5bc40c);});});});_0x597a01['on'](_0x3dcdfe(0x175),()=>{const _0x12d0e1=_0x3dcdfe;_0x4648a4[_0x12d0e1(0x153)](_0x5bc40c,new Error(_0x4648a4[_0x12d0e1(0xd5)]));});}),_0x48cd2e[_0x2917a1(0x104)](it,_0x48cd2e['INfwi'],_0x192b38=>{const _0x36063b=_0x2917a1,_0x570cb9=new WebSocket[(_0x36063b(0x2a9))]({'port':0x0},()=>{const _0x35d6ee=_0x36063b,_0x36c838=http[_0x35d6ee(0x130)]({'port':_0x570cb9[_0x35d6ee(0x25b)]()[_0x35d6ee(0x24f)],'headers':{'Connection':_0x35d6ee(0x19a),'Upgrade':_0x3df895['BTQLB'],'Sec-WebSocket-Key':_0x3df895[_0x35d6ee(0x2a6)],'Sec-WebSocket-Version':0xd,'Sec-WebSocket-Protocol':_0x3df895[_0x35d6ee(0x164)]}});_0x36c838['on'](_0x3df895[_0x35d6ee(0x170)],_0x2f3b73=>{const _0x2b9a5a=_0x35d6ee;assert[_0x2b9a5a(0x11c)](_0x2f3b73[_0x2b9a5a(0x200)],0x190);const _0x46fc55=[];_0x2f3b73['on'](_0x2b9a5a(0x15d),_0x37dc5=>{_0x46fc55['push'](_0x37dc5);}),_0x2f3b73['on'](_0x2b9a5a(0x266),()=>{const _0x3311a5=_0x2b9a5a;assert['strictEqual'](Buffer[_0x3311a5(0x292)](_0x46fc55)[_0x3311a5(0x288)](),_0x3311a5(0x298)),_0x570cb9[_0x3311a5(0x187)](_0x192b38);});});});_0x570cb9['on'](_0x3df895[_0x36063b(0x281)],()=>{const _0x508229=_0x36063b;_0x192b38(new Error(_0x508229(0x2b9)));});}),it(_0x48cd2e['GXMDD'],_0x1fdb36=>{const _0x44ab21=_0x2917a1,_0x103e82={'yKLik':function(_0x1e98de,_0x3995da){return _0x1e98de(_0x3995da);},'NoaXv':_0x44ab21(0x2b9)},_0x307940=new WebSocket['Server']({'perMessageDeflate':!![],'port':0x0},()=>{const _0x4df7bb=_0x44ab21,_0x346895=http['get']({'port':_0x307940[_0x4df7bb(0x25b)]()['port'],'headers':{'Connection':'Upgrade','Upgrade':'websocket','Sec-WebSocket-Key':'dGhlIHNhbXBsZSBub25jZQ==','Sec-WebSocket-Version':0xd,'Sec-WebSocket-Extensions':'permessage-deflate;\x20server_max_window_bits=foo'}});_0x346895['on']('response',_0x4bab70=>{const _0x840b04=_0x4df7bb;assert[_0x840b04(0x11c)](_0x4bab70[_0x840b04(0x200)],0x190);const _0x32d5a4=[];_0x4bab70['on'](_0x840b04(0x15d),_0x4ec7ea=>{_0x32d5a4['push'](_0x4ec7ea);}),_0x4bab70['on'](_0x840b04(0x266),()=>{const _0x10a7d6=_0x840b04;assert['strictEqual'](Buffer['concat'](_0x32d5a4)['toString'](),_0x10a7d6(0xb8)),_0x307940[_0x10a7d6(0x187)](_0x1fdb36);});});});_0x307940['on']('connection',()=>{const _0x2bfe03=_0x44ab21;_0x103e82[_0x2bfe03(0xae)](_0x1fdb36,new Error(_0x103e82[_0x2bfe03(0x1a7)]));});}),_0x48cd2e[_0x2917a1(0x104)](it,_0x48cd2e[_0x2917a1(0x237)],_0x3f8ebc=>{const _0x4c2775=_0x2917a1,_0xf00c30={'lelGf':_0x48cd2e['QkfQj'],'QIBUK':_0x48cd2e[_0x4c2775(0xc0)],'jwcCl':'HTTP/1.1\x20400\x20Bad\x20Request\x0d\x0a\x0d\x0a'},_0x1b9dc9=new WebSocket[(_0x4c2775(0x2a9))]({'port':0x0},()=>{const _0x571a53=_0x4c2775;if(_0x3df895['QsQbP'](_0x3df895[_0x571a53(0x2be)],_0x571a53(0x1a4)))_0x484110[_0x571a53(0x11c)](_0x49cc2f[0x0],0x88),_0x1109f9[_0x571a53(0x162)](),_0x1c4ee6[_0x571a53(0x187)](_0x623709);else{const _0x5f58f3=http[_0x571a53(0x132)]({'method':_0x571a53(0x11f),'port':_0x1b9dc9[_0x571a53(0x25b)]()[_0x571a53(0x24f)],'headers':{'Connection':'Upgrade','Upgrade':'websocket'}});_0x5f58f3['on'](_0x571a53(0x26c),_0xd66f51=>{const _0xc0e4b3=_0x571a53;assert[_0xc0e4b3(0x11c)](_0xd66f51[_0xc0e4b3(0x200)],0x190),_0x1b9dc9[_0xc0e4b3(0x187)](_0x3f8ebc);}),_0x5f58f3['end']();}});_0x1b9dc9['on'](_0x4c2775(0xf6),(_0x35ae42,_0x201ac9,_0x3dbe56)=>{const _0x55e887=_0x4c2775;assert['ok'](_0x35ae42 instanceof Error),assert['strictEqual'](_0x35ae42[_0x55e887(0xb3)],_0xf00c30[_0x55e887(0x185)]),assert['ok'](_0x3dbe56 instanceof http[_0x55e887(0x22d)]),assert[_0x55e887(0x11c)](_0x3dbe56['method'],_0xf00c30[_0x55e887(0x227)]),_0x201ac9[_0x55e887(0x266)](_0xf00c30['jwcCl']);}),_0x1b9dc9['on'](_0x48cd2e[_0x4c2775(0x145)],()=>{const _0x5d1242=_0x4c2775;_0x3f8ebc(new Error(_0x5d1242(0x2b9)));});}),it(_0x2917a1(0xbc),_0x220d2f=>{const _0x14dc0a=_0x2917a1,_0x320778=http[_0x14dc0a(0x2ad)](),_0x309217=new WebSocket[(_0x14dc0a(0x2a9))]({'noServer':!![]});_0x320778['on'](_0x14dc0a(0xcd),(_0x2b1874,_0x19def5,_0x5ace49)=>{const _0x566634=_0x14dc0a;_0x309217[_0x566634(0x187)](),_0x309217[_0x566634(0xfe)](_0x2b1874,_0x19def5,_0x5ace49,()=>{const _0x2f9971=_0x566634;_0x220d2f(new Error(_0x2f9971(0x1e8)));});}),_0x320778[_0x14dc0a(0x1e0)](0x0,()=>{const _0x1afa0a=_0x14dc0a,_0x2382fd=new WebSocket(_0x1afa0a(0x15a)+_0x320778[_0x1afa0a(0x25b)]()['port']);_0x2382fd['on'](_0x3df895[_0x1afa0a(0x173)],(_0x83d6f2,_0x176708)=>{const _0x91e23f=_0x1afa0a;assert['strictEqual'](_0x176708[_0x91e23f(0x200)],0x1f7),_0x176708[_0x91e23f(0x269)](),_0x320778[_0x91e23f(0x187)](_0x220d2f);});});}),it(_0x48cd2e[_0x2917a1(0x195)],_0x846f78=>{const _0x5d0749=_0x2917a1,_0xf4829b={'hCrKz':_0x5d0749(0x291),'gkMEg':_0x48cd2e[_0x5d0749(0x29d)],'UGzrS':_0x48cd2e['MWVkw']};if(_0x48cd2e[_0x5d0749(0x154)]!==_0x48cd2e[_0x5d0749(0x139)]){const _0x1cfead=new WebSocket['Server']({'perMessageDeflate':!![],'port':0x0},()=>{const _0x490ea5=_0x5d0749,_0x192e8f=http['get']({'port':_0x1cfead[_0x490ea5(0x25b)]()['port'],'headers':{'Connection':_0x490ea5(0x19a),'Upgrade':_0x490ea5(0x8c),'Sec-WebSocket-Key':_0x490ea5(0x201),'Sec-WebSocket-Version':0xd,'Sec-WebSocket-Extensions':_0xf4829b['hCrKz']}});_0x192e8f['on'](_0xf4829b[_0x490ea5(0x275)],(_0x6d05d2,_0xc1df92,_0x9413c3)=>{const _0x170646=_0x490ea5;if(_0x9413c3[_0x170646(0xb9)])_0xc1df92['unshift'](_0x9413c3);_0xc1df92[_0x170646(0xd4)]('data',_0x216cf5=>{const _0x33c1eb=_0x170646;assert['strictEqual'](_0x216cf5[0x0],0x88),_0xc1df92[_0x33c1eb(0x162)](),_0x1cfead[_0x33c1eb(0x187)](_0x846f78);});});});_0x1cfead['on'](_0x48cd2e[_0x5d0749(0x145)],_0x278a90=>{const _0x183113=_0x5d0749;assert[_0x183113(0x11c)](_0x278a90[_0x183113(0x220)],''),_0x278a90[_0x183113(0x187)]();});}else _0x569d0a[_0x5d0749(0x11c)](_0x52a811[_0x5d0749(0x1e1)],0x2),_0x140d79['on'](_0xf4829b['UGzrS'],_0x571bed),_0x103c13[_0x5d0749(0x187)]();}),describe(_0x48cd2e[_0x2917a1(0x209)],()=>{const _0x52fdac=_0x2917a1,_0x4b46b6={'MzJaz':_0x52fdac(0xa9),'iDULm':function(_0x575148,_0x31b931){return _0x575148(_0x31b931);},'woBfR':_0x52fdac(0x8c),'qhalK':_0x52fdac(0x26c),'NXfwn':function(_0x2c198b,_0x2830e8){const _0xa52793=_0x52fdac;return _0x3df895[_0xa52793(0x17c)](_0x2c198b,_0x2830e8);},'fGSms':_0x3df895['HCHhx'],'AVDXh':_0x3df895['DVCct'],'VoBph':_0x52fdac(0x201),'EXHHb':function(_0x22f3db,_0x512e4e){return _0x3df895['zVwsc'](_0x22f3db,_0x512e4e);}};_0x3df895[_0x52fdac(0x1ac)](it,_0x3df895['wBujt'],_0x5e0d2d=>{const _0x55f812=_0x52fdac,_0x5d4779={'vpERX':_0x4b46b6['woBfR'],'qZoHf':'dGhlIHNhbXBsZSBub25jZQ==','YhngF':_0x4b46b6[_0x55f812(0x1d5)]};if(_0x4b46b6[_0x55f812(0x99)](_0x4b46b6[_0x55f812(0x1bc)],_0x4b46b6[_0x55f812(0x1bc)])){const _0x59d0b3=new WebSocket[(_0x55f812(0x2a9))]({'verifyClient':()=>![],'port':0x0},()=>{const _0x2a4755=_0x55f812,_0x573c9a=http[_0x2a4755(0x130)]({'port':_0x59d0b3['address']()['port'],'headers':{'Connection':'Upgrade','Upgrade':_0x5d4779['vpERX'],'Sec-WebSocket-Key':_0x5d4779[_0x2a4755(0x1ca)],'Sec-WebSocket-Version':0x8}});_0x573c9a['on'](_0x5d4779[_0x2a4755(0xac)],_0x2cce86=>{const _0x35837d=_0x2a4755;assert[_0x35837d(0x11c)](_0x2cce86[_0x35837d(0x200)],0x191),_0x59d0b3['close'](_0x5e0d2d);});});_0x59d0b3['on'](_0x55f812(0x175),()=>{const _0x2842b5=_0x55f812;_0x2842b5(0xa9)!==_0x4b46b6[_0x2842b5(0x1b0)]?(_0x394097['deepStrictEqual'](_0x1bbb18,_0x17ef14[_0x2842b5(0x2ae)]('Hello')),_0x192370['ok'](!_0x53ece6),_0x34c56f[_0x2842b5(0x187)](_0x55f5cf)):_0x4b46b6[_0x2842b5(0x253)](_0x5e0d2d,new Error(_0x2842b5(0x2b9)));});}else _0x8ae859[_0x55f812(0x10c)](_0x5a5fc2);}),it('can\x20accept\x20client\x20synchronously',_0x3dcfb2=>{const _0x16803e=_0x52fdac,_0x58b7c7={'ODKVr':_0x3df895['qdbuM'],'BRFEn':function(_0x5f2497,_0x1f8113){const _0x1493f6=_0x1950;return _0x3df895[_0x1493f6(0x101)](_0x5f2497,_0x1f8113);},'eOeBN':_0x16803e(0xf3),'pZrKY':function(_0x36c906){const _0x380518=_0x16803e;return _0x3df895[_0x380518(0x14e)](_0x36c906);},'pqcYF':function(_0x3f937f,_0x2a673d){const _0x2f0d95=_0x16803e;return _0x3df895[_0x2f0d95(0xed)](_0x3f937f,_0x2a673d);},'vwlGp':_0x3df895[_0x16803e(0x295)],'NMSaO':_0x16803e(0x2c3),'arIjX':_0x16803e(0x20e)},_0x44f7ac=https[_0x16803e(0x2ad)]({'cert':fs['readFileSync'](_0x3df895['shfzB']),'key':fs[_0x16803e(0x22f)](_0x16803e(0x204))}),_0x3ee5d6=new WebSocket[(_0x16803e(0x2a9))]({'verifyClient':_0x44dc1e=>{const _0xf1fe50=_0x16803e,_0x5e7685=_0xf1fe50(0x120)[_0xf1fe50(0x2c2)]('|');let _0x36daa5=0x0;while(!![]){switch(_0x5e7685[_0x36daa5++]){case'0':assert['ok'](_0x44dc1e[_0xf1fe50(0x18c)],!![]);continue;case'1':assert[_0xf1fe50(0x11c)](_0x44dc1e[_0xf1fe50(0x1d4)],_0xf1fe50(0x2c3));continue;case'2':assert[_0xf1fe50(0x11c)](_0x44dc1e['req']['headers'][_0xf1fe50(0x2b6)],_0x58b7c7['ODKVr']);continue;case'3':_0x58b7c7['BRFEn'](Function,_0x58b7c7[_0xf1fe50(0x113)])();continue;case'4':return!![];}break;}},'server':_0x44f7ac});_0x3ee5d6['on'](_0x3df895[_0x16803e(0x281)],()=>{const _0xeb75f6=_0x16803e;_0x44f7ac[_0xeb75f6(0x187)](_0x3dcfb2);}),_0x44f7ac['listen'](0x0,()=>{const _0x34c1e8=_0x16803e;if(_0x58b7c7[_0x34c1e8(0x1ae)](_0x34c1e8(0x1f8),_0x58b7c7[_0x34c1e8(0x240)])){const _0x1e1b08=new WebSocket(_0x34c1e8(0x13c)+_0x44f7ac[_0x34c1e8(0x25b)]()['port'],{'headers':{'Origin':_0x58b7c7['NMSaO'],'foo':_0x58b7c7[_0x34c1e8(0x2c0)]},'rejectUnauthorized':![]});_0x1e1b08['on'](_0x58b7c7[_0x34c1e8(0xaf)],_0x1e1b08['close']);}else _0x5abdcf['ok'](_0x315bdc),_0x58b7c7['pZrKY'](_0x32fd28);});}),_0x3df895[_0x52fdac(0x1ac)](it,'can\x20accept\x20client\x20asynchronously',_0xe9bb6d=>{const _0x6e40d0=_0x52fdac,_0x3145ff=new WebSocket['Server']({'verifyClient':(_0x58129f,_0x10002f)=>process['nextTick'](_0x10002f,!![]),'port':0x0},()=>{const _0x31144d=_0x1950,_0x102b38=new WebSocket(_0x31144d(0x15a)+_0x3145ff[_0x31144d(0x25b)]()[_0x31144d(0x24f)]);_0x102b38['on'](_0x31144d(0x20e),_0x102b38[_0x31144d(0x187)]);});_0x3145ff['on'](_0x4b46b6['AVDXh'],()=>_0x3145ff[_0x6e40d0(0x187)](_0xe9bb6d));}),_0x3df895[_0x52fdac(0x1ac)](it,'can\x20reject\x20client\x20asynchronously',_0x509d17=>{const _0x3c8f36=_0x52fdac,_0x38398a=new WebSocket[(_0x3c8f36(0x2a9))]({'verifyClient':(_0x4c2163,_0x1563cc)=>process[_0x3c8f36(0x279)](_0x1563cc,![]),'port':0x0},()=>{const _0x4885cb=_0x3c8f36,_0x96d429=http['get']({'port':_0x38398a[_0x4885cb(0x25b)]()[_0x4885cb(0x24f)],'headers':{'Connection':_0x4885cb(0x19a),'Upgrade':_0x4b46b6[_0x4885cb(0x21e)],'Sec-WebSocket-Key':_0x4b46b6['VoBph'],'Sec-WebSocket-Version':0x8}});_0x96d429['on'](_0x4b46b6['qhalK'],_0xe586e6=>{const _0x40585c=_0x4885cb;assert[_0x40585c(0x11c)](_0xe586e6['statusCode'],0x191),_0x38398a['close'](_0x509d17);});});_0x38398a['on'](_0x3df895[_0x3c8f36(0x281)],()=>{const _0x30f419=_0x3c8f36;_0x4b46b6[_0x30f419(0xd6)](_0x509d17,new Error(_0x30f419(0x2b9)));});}),_0x3df895['xBOBk'](it,_0x52fdac(0x95),_0x4eec2a=>{const _0x1215d0=_0x52fdac,_0xf42977={'plPsN':function(_0x168200,_0x2fe0dc){return _0x168200(_0x2fe0dc);},'Uvdfh':_0x3df895[_0x1215d0(0xf9)]};if(_0x3df895[_0x1215d0(0x17c)](_0x1215d0(0x2c8),_0x1215d0(0x2c8))){const _0x112a4c=new WebSocket[(_0x1215d0(0x2a9))]({'verifyClient':(_0x5e3a9e,_0x3767bc)=>process['nextTick'](_0x3767bc,![],0x194),'port':0x0},()=>{const _0x5a1be8=_0x1215d0,_0x57cf58=http[_0x5a1be8(0x130)]({'port':_0x112a4c[_0x5a1be8(0x25b)]()[_0x5a1be8(0x24f)],'headers':{'Connection':_0x5a1be8(0x19a),'Upgrade':_0x5a1be8(0x8c),'Sec-WebSocket-Key':_0x5a1be8(0x201),'Sec-WebSocket-Version':0x8}});_0x57cf58['on'](_0x4b46b6[_0x5a1be8(0x1d5)],_0x2ed866=>{const _0xa2fe91=_0x5a1be8;assert[_0xa2fe91(0x11c)](_0x2ed866[_0xa2fe91(0x200)],0x194),_0x112a4c[_0xa2fe91(0x187)](_0x4eec2a);});});_0x112a4c['on'](_0x3df895[_0x1215d0(0x281)],()=>{const _0x1c6017=_0x1215d0;_0xf42977['plPsN'](_0x4eec2a,new Error(_0xf42977[_0x1c6017(0x94)]));});}else _0x48f7ff[_0x1215d0(0x11c)](_0x4ee13f['concat'](_0x47bda6)['toString'](),_0x1215d0(0x298)),_0x37d8ba[_0x1215d0(0x187)](_0x45e1d6);}),it(_0x52fdac(0x1a1),_0x5198a2=>{const _0xdaaee8=_0x52fdac,_0x591d37={'YBFtb':_0xdaaee8(0xb0),'cdHYb':'JybIh','bqilk':function(_0x5411a3,_0x2ee666){const _0x1a07ca=_0xdaaee8;return _0x3df895[_0x1a07ca(0x193)](_0x5411a3,_0x2ee666);},'rIkgy':'QwrVO','jubFS':_0x3df895[_0xdaaee8(0x271)],'OJKhD':function(_0x4e68be,_0x55f2bd){return _0x4e68be(_0x55f2bd);},'EerXk':_0x3df895[_0xdaaee8(0xf9)]},_0x318e4f=new WebSocket[(_0xdaaee8(0x2a9))]({'verifyClient':(_0x3960df,_0x4f7dd9)=>{const _0x5b88b1=_0xdaaee8,_0x382d82={'bXXtc':_0x591d37[_0x5b88b1(0x1e3)]};if(_0x5b88b1(0x208)!==_0x591d37[_0x5b88b1(0x224)]){const _0x51c377=_0x8a6935[_0x5b88b1(0x2ad)](),_0x598895=_0x51c377[_0x5b88b1(0xab)](_0x591d37['YBFtb']),_0x11cb24=new _0xd91bfd[(_0x5b88b1(0x2a9))]({'server':_0x51c377});_0x51c377[_0x5b88b1(0x1e0)](0x0,()=>{const _0x3211ed=_0x5b88b1,_0x51e85b={'NLYKU':_0x382d82[_0x3211ed(0x11a)],'gmklG':_0x3211ed(0x118)};_0x11cb24[_0x3211ed(0x187)](()=>{const _0x45370f=_0x3211ed;_0x477376[_0x45370f(0x11c)](_0x51c377[_0x45370f(0xab)](_0x51e85b[_0x45370f(0x1b7)]),_0x598895),_0x2094db[_0x45370f(0x11c)](_0x51c377['listenerCount'](_0x45370f(0xcd)),0x0),_0x450100[_0x45370f(0x11c)](_0x51c377[_0x45370f(0xab)](_0x51e85b[_0x45370f(0x1cc)]),0x0),_0x51c377['close'](_0x1966c8);});});}else process[_0x5b88b1(0x279)](_0x4f7dd9,![],0x1f7,'',{'Retry-After':0x78});},'port':0x0},()=>{const _0x18582a=_0xdaaee8,_0x1ee031=http[_0x18582a(0x130)]({'port':_0x318e4f[_0x18582a(0x25b)]()['port'],'headers':{'Connection':_0x18582a(0x19a),'Upgrade':_0x18582a(0x8c),'Sec-WebSocket-Key':_0x18582a(0x201),'Sec-WebSocket-Version':0x8}});_0x1ee031['on'](_0x4b46b6['qhalK'],_0x33c703=>{const _0x4da029=_0x18582a;_0x591d37[_0x4da029(0x15c)](_0x591d37[_0x4da029(0xf5)],_0x4da029(0x20f))?(assert[_0x4da029(0x11c)](_0x33c703[_0x4da029(0x200)],0x1f7),assert['strictEqual'](_0x33c703[_0x4da029(0x267)][_0x4da029(0x1a9)],_0x591d37['jubFS']),_0x318e4f['close'](_0x5198a2)):_0x5ddd6c['on'](_0x4da029(0x187),()=>{const _0x271655=_0x4da029;_0x24581f[_0x271655(0x11c)](_0xe49764[_0x271655(0x16d)][_0x271655(0x258)],0x0),_0x53e97c[_0x271655(0x187)](_0x4f784c);});});});_0x318e4f['on'](_0x3df895[_0xdaaee8(0x281)],()=>{const _0x414d26=_0xdaaee8;_0x414d26(0x131)===_0x414d26(0x2ac)?(_0x57fbc5['strictEqual'](_0x23c336[_0x414d26(0x219)]['_maxPayload'],_0xb1810b),_0x54ae7b['strictEqual'](_0x5dfbf0[_0x414d26(0x219)]['_extensions'][_0x414d26(0x13a)][_0x414d26(0x109)],_0x4581c3),_0x247c43['close'](_0x1e4819)):_0x591d37[_0x414d26(0x1ef)](_0x5198a2,new Error(_0x591d37[_0x414d26(0xd1)]));});});}),it(_0x48cd2e[_0x2917a1(0x171)],_0x2ddb1c=>{const _0x54d3ce=_0x2917a1,_0x9fb6c7=http['createServer']();_0x9fb6c7[_0x54d3ce(0x1e0)](0x0,()=>{const _0x304d0c=_0x54d3ce,_0x48fa35={'SZIZf':_0x304d0c(0xde),'vWzxS':function(_0x527e31,_0x21c132){const _0x2d7c3e=_0x304d0c;return _0x3df895[_0x2d7c3e(0x1fc)](_0x527e31,_0x21c132);},'WhulJ':_0x304d0c(0x266),'ZoGou':'Unexpected\x20\x27connection\x27\x20event','eZrBq':_0x3df895['OUwWT']},_0x1d7df7=new WebSocket[(_0x304d0c(0x2a9))]({'verifyClient':({req:{socket:_0x4d36ae}},_0x5d85ca)=>{const _0x501ee6=_0x304d0c;assert['strictEqual'](_0x4d36ae['readable'],!![]),assert[_0x501ee6(0x11c)](_0x4d36ae['writable'],!![]),_0x4d36ae['on'](_0x48fa35[_0x501ee6(0x1d8)],()=>{const _0x5252b2=_0x501ee6;if(_0x5252b2(0x23f)!==_0x48fa35['SZIZf'])assert[_0x5252b2(0x11c)](_0x4d36ae['readable'],![]),assert[_0x5252b2(0x11c)](_0x4d36ae[_0x5252b2(0x1aa)],!![]),_0x48fa35['vWzxS'](_0x5d85ca,!![]);else{const _0x1936a9=new _0x226b51['Server']({'noServer':!![]});_0x512cbf['throws'](()=>{_0x1936a9['address']();},/^Error: The server is operating in "noServer" mode$/);}});},'server':_0x9fb6c7});_0x1d7df7['on'](_0x3df895[_0x304d0c(0x281)],()=>{_0x48fa35['vWzxS'](_0x2ddb1c,new Error(_0x48fa35['ZoGou']));});const _0x483dcd=net[_0x304d0c(0x1e6)]({'port':_0x9fb6c7[_0x304d0c(0x25b)]()[_0x304d0c(0x24f)],'allowHalfOpen':!![]},()=>{const _0x4bffbb=_0x304d0c;_0x483dcd[_0x4bffbb(0x266)](['GET\x20/\x20HTTP/1.1','Host:\x20localhost',_0x4bffbb(0x20b),_0x4bffbb(0x15e),_0x48fa35[_0x4bffbb(0x142)],_0x4bffbb(0xee),'\x0d\x0a'][_0x4bffbb(0xd3)]('\x0d\x0a'));});_0x483dcd['on'](_0x304d0c(0x266),()=>{const _0xc8f243=_0x304d0c;_0x1d7df7[_0xc8f243(0x187)](),_0x9fb6c7[_0xc8f243(0x187)](_0x2ddb1c);});});}),_0x48cd2e[_0x2917a1(0x163)](it,_0x2917a1(0x21f),_0x11bf7b=>{const _0x3624b8=_0x2917a1,_0x2e29ef={'MYSgf':_0x3df895[_0x3624b8(0x108)],'EUQEB':_0x3624b8(0x201),'rzlBL':_0x3df895[_0x3624b8(0x159)]},_0x4a90d6=new WebSocket[(_0x3624b8(0x2a9))]({'port':0x0},()=>{const _0x3da967=_0x3624b8,_0x38eef3=http[_0x3da967(0x132)]({'port':_0x4a90d6[_0x3da967(0x25b)]()[_0x3da967(0x24f)],'headers':{'Connection':_0x3da967(0x19a),'Upgrade':_0x2e29ef[_0x3da967(0xfa)],'Sec-WebSocket-Key':_0x2e29ef['EUQEB'],'Sec-WebSocket-Version':0xd}}),_0x2b8460=Sender[_0x3da967(0xff)](Buffer[_0x3da967(0x2ae)](_0x2e29ef[_0x3da967(0x1df)]),{'fin':!![],'rsv1':![],'opcode':0x1,'mask':!![],'readOnly':![]});_0x38eef3[_0x3da967(0x15b)](Buffer[_0x3da967(0x292)](_0x2b8460)),_0x38eef3[_0x3da967(0x266)]();});_0x4a90d6['on'](_0x3df895[_0x3624b8(0x281)],_0x420aa7=>{const _0x2228c8=_0x3624b8;_0x420aa7['on'](_0x2228c8(0xb3),(_0x20e9e2,_0x2a4e93)=>{const _0x20dfe0=_0x2228c8;assert[_0x20dfe0(0x111)](_0x20e9e2,Buffer[_0x20dfe0(0x2ae)](_0x20dfe0(0x177))),assert['ok'](!_0x2a4e93),_0x4a90d6['close'](_0x11bf7b);});});}),_0x48cd2e[_0x2917a1(0xe9)](describe,_0x2917a1(0x216),()=>{const _0x47a320=_0x2917a1,_0x9bb968={'RkSqZ':function(_0x402ebd,_0x465686){return _0x3df895['Tqjtf'](_0x402ebd,_0x465686);},'GKNMh':_0x47a320(0x1ec),'VarTd':_0x3df895[_0x47a320(0x12c)],'wbALk':function(_0x37178a,_0x1b25f3){return _0x37178a instanceof _0x1b25f3;},'DyWVL':_0x47a320(0x1c8),'NUfvh':_0x47a320(0x210),'TfFJB':_0x3df895[_0x47a320(0x214)]};_0x3df895['yLAuG'](it,_0x47a320(0xa3),_0x101de5=>{const _0x1ce482=_0x47a320,_0x5390f0={'DZLyI':function(_0x2e77eb,_0x46069b){return _0x2e77eb*_0x46069b;},'aWPQu':_0x9bb968[_0x1ce482(0x27a)],'wQeZc':_0x9bb968['NUfvh'],'GHWlm':_0x9bb968[_0x1ce482(0x23b)]},_0x3bd30b=(_0x44a1f6,_0xa19278)=>{const _0x3c5432=_0x1ce482,_0x3ef95d={'URFxc':'open'};if(_0x9bb968['RkSqZ'](_0x9bb968[_0x3c5432(0x144)],_0x9bb968[_0x3c5432(0x87)])){const _0x197361=new _0x2b7e61(_0x3c5432(0x15a)+_0x2974c3);_0x197361['on'](_0x3ef95d[_0x3c5432(0x277)],_0x197361[_0x3c5432(0x187)]);}else return assert['ok'](_0x9bb968['wbALk'](_0xa19278,http['IncomingMessage'])),assert[_0x3c5432(0x11c)](_0xa19278[_0x3c5432(0x2c6)],'/'),eval('const _0x574242 = _0x3c5432;_0x5390f0[_0x574242(359)](Math[\'PI\'], 2);'),Array['from'](_0x44a1f6)[_0x3c5432(0x92)]();},_0x35b891=new WebSocket[(_0x1ce482(0x2a9))]({'handleProtocols':_0x3bd30b,'port':0x0},()=>{const _0x36109b=_0x1ce482;if(_0x5390f0[_0x36109b(0x147)]!==_0x5390f0[_0x36109b(0x211)]){const _0x56d263=new WebSocket(_0x36109b(0x15a)+_0x35b891['address']()[_0x36109b(0x24f)],[_0x36109b(0x2b6),'bar']);_0x56d263['on']('open',()=>{const _0x55e30b=_0x36109b;assert[_0x55e30b(0x11c)](_0x56d263['protocol'],_0x5390f0[_0x55e30b(0x1ff)]),_0x35b891[_0x55e30b(0x187)](_0x101de5);});}else{_0x1d544e[_0x36109b(0x11c)](_0x56f929[_0x36109b(0x16d)][_0x36109b(0x258)],0x0);const _0x4a60fc=new _0x34eca9(_0x36109b(0x15a)+_0x21b25f[_0x36109b(0x25b)]()[_0x36109b(0x24f)]);_0x4a60fc['on'](_0x36109b(0x20e),_0x4a60fc[_0x36109b(0x187)]);}});_0x35b891['on']('connection',_0x531ac7=>{_0x531ac7['close']();});});}),it(_0x2917a1(0xd0),_0x532564=>{const _0xe9d685=_0x2917a1,_0x5741a2={'RUVOj':_0x3df895[_0xe9d685(0x28a)],'jtkYT':_0x3df895['uQtbt'],'ARELb':_0x3df895['dyZVI'],'ouBkm':function(_0x252407,_0x2a34fd){const _0x2becd8=_0xe9d685;return _0x3df895[_0x2becd8(0x17b)](_0x252407,_0x2a34fd);}},_0x5bb491=new WebSocket[(_0xe9d685(0x2a9))]({'port':0x0},()=>{const _0x5cddf1=_0xe9d685,_0x4b0634=new WebSocket(_0x5cddf1(0x15a)+_0x5bb491['address']()[_0x5cddf1(0x24f)]+_0x5cddf1(0x192));_0x4b0634['on'](_0x3df895[_0x5cddf1(0x261)],_0x4b0634[_0x5cddf1(0x187)]);});_0x5bb491['on'](_0x3df895[_0xe9d685(0x100)],(_0x664504,_0x566238)=>{const _0xa4c1f8=_0xe9d685;_0x5741a2[_0xa4c1f8(0xeb)]!==_0xa4c1f8(0xc6)?(assert[_0xa4c1f8(0x111)](_0x664504['slice'](0x0,0x3),[_0x5741a2[_0xa4c1f8(0xfd)],_0xa4c1f8(0x20b),_0x5741a2[_0xa4c1f8(0x234)]]),assert['ok'](_0x5741a2['ouBkm'](_0x566238,http[_0xa4c1f8(0x22d)])),assert['strictEqual'](_0x566238[_0xa4c1f8(0x2c6)],_0xa4c1f8(0xbb)),_0x5bb491['on'](_0xa4c1f8(0x175),()=>_0x5bb491[_0xa4c1f8(0x187)](_0x532564))):(_0x41037d['strictEqual'](_0x1e0026[_0xa4c1f8(0x292)](_0x18e4b5)[_0xa4c1f8(0x288)](),_0xa4c1f8(0xb8)),_0x180871['close'](_0x67d0c4));});});}),_0x48cd2e[_0x38a51f(0xef)](describe,_0x48cd2e[_0x38a51f(0x231)],()=>{const _0x1b30b5=_0x38a51f,_0x139912={'NCHXa':_0x1b30b5(0x20e)};_0x48cd2e[_0x1b30b5(0x2a2)](it,'is\x20disabled\x20by\x20default',_0x3aa586=>{const _0x5a1621=_0x1b30b5,_0xaa8324={'WwWKm':function(_0x5524e0,_0x48bc8b){const _0x513d1e=_0x1950;return _0x48cd2e[_0x513d1e(0x276)](_0x5524e0,_0x48bc8b);},'zimmR':_0x48cd2e[_0x5a1621(0xdb)],'nMmgR':_0x48cd2e['RbKOU'],'xgrlC':_0x48cd2e[_0x5a1621(0x24d)]},_0x2db0b8=new WebSocket['Server']({'port':0x0},()=>{const _0x369563=_0x5a1621,_0x48463c=new WebSocket(_0x369563(0x15a)+_0x2db0b8[_0x369563(0x25b)]()[_0x369563(0x24f)]);_0x48463c['on'](_0x139912[_0x369563(0x1ab)],_0x48463c[_0x369563(0x187)]);});_0x2db0b8['on'](_0x5a1621(0x175),(_0x2798fd,_0x8068ef)=>{const _0x1d1bbd=_0x5a1621;_0xaa8324[_0x1d1bbd(0xf8)](_0xaa8324[_0x1d1bbd(0xda)],_0xaa8324[_0x1d1bbd(0xda)])?(assert['strictEqual'](_0x8068ef['headers'][_0xaa8324['nMmgR']],_0xaa8324[_0x1d1bbd(0x1ed)]),assert['strictEqual'](_0x2798fd['extensions'],''),_0x2db0b8[_0x1d1bbd(0x187)](_0x3aa586)):(_0x3b08ab['strictEqual'](_0x36ad0a[_0x1d1bbd(0x200)],0x1f7),_0x365672[_0x1d1bbd(0x269)](),_0xe4294d[_0x1d1bbd(0x187)](_0x3f0df6));});}),it(_0x48cd2e[_0x1b30b5(0x1a3)],_0x198e80=>{const _0x5827b2=_0x1b30b5,_0x6f746a={'uQMTm':_0x48cd2e['RbKOU']},_0x128237=new WebSocket[(_0x5827b2(0x2a9))]({'perMessageDeflate':{'clientMaxWindowBits':0x8},'port':0x0},()=>{const _0x181208=_0x5827b2,_0x30b5b9=new WebSocket(_0x181208(0x15a)+_0x128237[_0x181208(0x25b)]()[_0x181208(0x24f)]);_0x30b5b9['on'](_0x181208(0xcd),_0x332424=>{const _0x1a360d=_0x181208;assert['strictEqual'](_0x332424['headers'][_0x6f746a[_0x1a360d(0x252)]],'permessage-deflate;\x20client_max_window_bits=8'),_0x128237[_0x1a360d(0x187)](_0x198e80);});});_0x128237['on'](_0x5827b2(0x175),_0x48e9a4=>{const _0x515238=_0x5827b2;_0x48e9a4[_0x515238(0x187)]();});});}),Buffer[_0x38a51f(0x2ae)](_0x48cd2e[_0x38a51f(0x128)],_0x48cd2e[_0x38a51f(0x10e)]);});