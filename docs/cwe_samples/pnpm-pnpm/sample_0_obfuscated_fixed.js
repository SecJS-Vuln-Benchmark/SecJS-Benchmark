const _0x2404a1=_0x39dd;(function(_0x1bced0,_0x12fd21){const _0x1087ab=_0x39dd,_0x1c3e2e=_0x1bced0();while(!![]){try{const _0x5bce74=parseInt(_0x1087ab(0x185))/0x1+-parseInt(_0x1087ab(0x156))/0x2*(parseInt(_0x1087ab(0x16a))/0x3)+-parseInt(_0x1087ab(0x182))/0x4*(-parseInt(_0x1087ab(0x150))/0x5)+-parseInt(_0x1087ab(0x17b))/0x6*(parseInt(_0x1087ab(0x175))/0x7)+parseInt(_0x1087ab(0x17c))/0x8*(parseInt(_0x1087ab(0x191))/0x9)+-parseInt(_0x1087ab(0x16c))/0xa+parseInt(_0x1087ab(0x170))/0xb;if(_0x5bce74===_0x12fd21)break;else _0x1c3e2e['push'](_0x1c3e2e['shift']());}catch(_0x1bfedd){_0x1c3e2e['push'](_0x1c3e2e['shift']());}}}(_0x24be,0xced2b));import _0x56713a from'../PromiseRouter';import _0x2503f5 from'../Config';function _0x24be(){const _0x36386d=['get','then','invalidRequest','27666iSYMqd','26728yebddL','VVzfn','Password\x20successfully\x20reset','VdFaZ','xhr','choosePasswordURL','2965012glugdE','/apps','invalidVerificationLink','1021704ppoeqJ','?username=','route','kOcVz','Not\x20found.','applicationId','LmGFX','toString','OTHER_CAUSE','OoSBX','jIOHT','CqCcx','1467SUoqWJ','dQdVo','requestResetPassword','updatePassword','readFile','/apps/:appId/request_password_reset','appName','VplcS','YKmYt','use','EmpxG','verifyEmail','stringify','hOnxC','USERNAME_MISSING','GET','NhZwO','err','missingPublicServerURL','OIgZv','publicServerURL','glpAz','passwordResetSuccessURL','PARSE_SERVER_URL','config','JTfpB','LCyWX','../../views','query','LmCtm','Error','string','verifyEmailSuccessURL','appId','dGdph','/apps/:appId/resend_verification_email','success','lfqWh','oDBDJ','/apps/choose_password','choose_password','5ryEofa','params','linkSendSuccessURL','username','POST','userController','122338nenRcr','resendVerificationEmail','unauthorized','invalidVerificationLinkURL','ZPMtk','checkResetTokenValidity','../../public_html','JyZpM','xAmfj','zZQMZ','changePassword','FSytr','expressRouter','setConfig','body','utf-8','Missing\x20username','vZEAS','invalidLink','resetPassword','33BmsXLr','message','8834480KUSpNf','linkSendFailURL','static','mountRoutes','12670163SGlzlr','CaJUB','resolve','replace','PASSWORD_MISSING','1603nLNZuc','Missing\x20token','kUrxA'];_0x24be=function(){return _0x36386d;};return _0x24be();}import _0x554c4f from'express';import _0x3672b7 from'path';import _0x20b61b from'fs';import _0x1e0a55 from'querystring';function _0x39dd(_0x50fe37,_0x2d250b){const _0x24befb=_0x24be();return _0x39dd=function(_0x39dd46,_0x379da0){_0x39dd46=_0x39dd46-0x149;let _0x5a7832=_0x24befb[_0x39dd46];return _0x5a7832;},_0x39dd(_0x50fe37,_0x2d250b);}import{Parse}from'parse/node';const public_html=_0x3672b7[_0x2404a1(0x172)](__dirname,_0x2404a1(0x15c)),views=_0x3672b7[_0x2404a1(0x172)](__dirname,_0x2404a1(0x1ac));export class PublicAPIRouter extends _0x56713a{[_0x2404a1(0x19c)](_0xd28b1b){const _0x4f1fb9=_0x2404a1,_0x53ed62={'VVzfn':_0x4f1fb9(0x1b0),'jIOHT':_0x4f1fb9(0x14c)},{username:_0x5d8b0a,token:_0xb0ef02}=_0xd28b1b[_0x4f1fb9(0x1ad)],_0x1a44e8=_0xb0ef02&&typeof _0xb0ef02!==_0x53ed62[_0x4f1fb9(0x17d)]?_0xb0ef02['toString']():_0xb0ef02,_0x431e8a=_0xd28b1b[_0x4f1fb9(0x151)]['appId'],_0x22eee4=_0x2503f5['get'](_0x431e8a);if(!_0x22eee4){if(_0x53ed62[_0x4f1fb9(0x18f)]!==_0x4f1fb9(0x14c))return this['missingPublicServerURL']();else this[_0x4f1fb9(0x17a)]();}if(!_0x22eee4[_0x4f1fb9(0x1a5)])return this[_0x4f1fb9(0x1a3)]();if(!_0x1a44e8||!_0x5d8b0a)return this[_0x4f1fb9(0x168)](_0xd28b1b);const _0x54db60=_0x22eee4[_0x4f1fb9(0x155)];return _0x54db60[_0x4f1fb9(0x19c)](_0x5d8b0a,_0x1a44e8)[_0x4f1fb9(0x179)](()=>{const _0x92eb73=_0x4f1fb9,_0x37cf67=_0x1e0a55[_0x92eb73(0x19d)]({'username':_0x5d8b0a});return Promise[_0x92eb73(0x172)]({'status':0x12e,'location':_0x22eee4[_0x92eb73(0x1b1)]+'?'+_0x37cf67});},()=>{const _0x2c84c1=_0x4f1fb9;return this[_0x2c84c1(0x184)](_0xd28b1b);});}[_0x2404a1(0x157)](_0x76ac2b){const _0x3ae51f=_0x2404a1,_0x2d6d93={'OoSBX':_0x3ae51f(0x176),'vZEAS':'VSXDK','CqCcx':_0x3ae51f(0x15f)},_0x463e58=_0x76ac2b[_0x3ae51f(0x164)][_0x3ae51f(0x153)],_0x4f27e6=_0x76ac2b[_0x3ae51f(0x151)][_0x3ae51f(0x1b2)],_0x3b4c92=_0x2503f5['get'](_0x4f27e6);if(!_0x3b4c92){if(_0x2d6d93[_0x3ae51f(0x167)]!==_0x2d6d93[_0x3ae51f(0x190)])this['invalidRequest']();else throw new _0x4f5cf0[(_0x3ae51f(0x1af))](_0x26f5b7['Error']['OTHER_CAUSE'],_0x2d6d93[_0x3ae51f(0x18e)]);}if(!_0x3b4c92[_0x3ae51f(0x1a5)])return this[_0x3ae51f(0x1a3)]();if(!_0x463e58)return this['invalidLink'](_0x76ac2b);const _0x213966=_0x3b4c92['userController'];return _0x213966[_0x3ae51f(0x157)](_0x463e58)['then'](()=>{const _0x3db061=_0x3ae51f;return Promise[_0x3db061(0x172)]({'status':0x12e,'location':''+_0x3b4c92[_0x3db061(0x152)]});},()=>{const _0x44654e=_0x3ae51f;return Promise[_0x44654e(0x172)]({'status':0x12e,'location':''+_0x3b4c92['linkSendFailURL']});});}[_0x2404a1(0x160)](_0xb9db45){const _0x4f6f6b=_0x2404a1,_0x3ae6a7={'dQdVo':_0x4f6f6b(0x1a8),'JyZpM':function(_0x54b422,_0x340580){return _0x54b422(_0x340580);},'dGdph':function(_0x58c3ff,_0x10849d){return _0x58c3ff!==_0x10849d;},'FSytr':function(_0x4404c1,_0x2c031c){return _0x4404c1(_0x2c031c);},'LmCtm':_0x4f6f6b(0x14f),'EmpxG':_0x4f6f6b(0x165)};return new Promise((_0x20d2d6,_0x4f7032)=>{const _0x121d89=_0x4f6f6b;if(_0x3ae6a7[_0x121d89(0x149)]('oDBDJ',_0x121d89(0x14d)))return this[_0x121d89(0x168)](_0x5202fb);else{const _0x312167=_0x2503f5[_0x121d89(0x178)](_0xb9db45[_0x121d89(0x1ad)]['id']);!_0x312167&&this[_0x121d89(0x17a)]();if(!_0x312167[_0x121d89(0x1a5)])return _0x3ae6a7[_0x121d89(0x161)](_0x20d2d6,{'status':0x194,'text':_0x121d89(0x189)});_0x20b61b[_0x121d89(0x195)](_0x3672b7[_0x121d89(0x172)](views,_0x3ae6a7[_0x121d89(0x1ae)]),_0x3ae6a7[_0x121d89(0x19b)],(_0x6092b0,_0x14e385)=>{const _0x3cb129=_0x121d89;if(_0x6092b0)return _0x4f7032(_0x6092b0);_0x14e385=_0x14e385[_0x3cb129(0x173)](_0x3ae6a7[_0x3cb129(0x192)],'\x27'+_0x312167[_0x3cb129(0x1a5)]+'\x27'),_0x3ae6a7[_0x3cb129(0x15d)](_0x20d2d6,{'text':_0x14e385});});}});}[_0x2404a1(0x193)](_0x3307b2){const _0x107530=_0x2404a1,_0x1c195d={'glpAz':function(_0x6d18d0,_0x184ed1){return _0x6d18d0!==_0x184ed1;}},_0xa82fb7=_0x3307b2[_0x107530(0x1a9)];!_0xa82fb7&&this[_0x107530(0x17a)]();if(!_0xa82fb7[_0x107530(0x1a5)])return this[_0x107530(0x1a3)]();const {username:_0x478ab1,token:_0xef9d8d}=_0x3307b2[_0x107530(0x1ad)],_0x509641=_0xef9d8d&&_0x1c195d[_0x107530(0x1a6)](typeof _0xef9d8d,'string')?_0xef9d8d['toString']():_0xef9d8d;if(!_0x478ab1||!_0x509641)return this[_0x107530(0x168)](_0x3307b2);return _0xa82fb7['userController'][_0x107530(0x15b)](_0x478ab1,_0x509641)['then'](()=>{const _0x5623e4=_0x107530,_0x39b007=_0x1e0a55['stringify']({'token':_0x509641,'id':_0xa82fb7[_0x5623e4(0x18a)],'username':_0x478ab1,'app':_0xa82fb7['appName']});return Promise[_0x5623e4(0x172)]({'status':0x12e,'location':_0xa82fb7[_0x5623e4(0x181)]+'?'+_0x39b007});},()=>{const _0x5b340b=_0x107530;return this[_0x5b340b(0x168)](_0x3307b2);});}['resetPassword'](_0x58ce8d){const _0x59c9d7=_0x2404a1,_0x304e7c={'xAmfj':_0x59c9d7(0x166),'OIgZv':_0x59c9d7(0x17e),'PJUzu':function(_0x184a93,_0x230b27){return _0x184a93(_0x230b27);},'ZPMtk':_0x59c9d7(0x18b),'NNuES':function(_0x5e6d81,_0x4ec5c1){return _0x5e6d81!==_0x4ec5c1;},'CaJUB':_0x59c9d7(0x1b0),'NhZwO':function(_0x443bbf,_0x550e92){return _0x443bbf===_0x550e92;},'LCyWX':_0x59c9d7(0x176)},_0x308afb=_0x58ce8d[_0x59c9d7(0x1a9)];!_0x308afb&&this[_0x59c9d7(0x17a)]();if(!_0x308afb[_0x59c9d7(0x1a5)]){if(_0x304e7c[_0x59c9d7(0x15a)]===_0x304e7c[_0x59c9d7(0x15a)])return this['missingPublicServerURL']();else throw new _0x290f0e['Error'](_0x286f36[_0x59c9d7(0x1af)][_0x59c9d7(0x19f)],_0x304e7c[_0x59c9d7(0x15e)]);}const {username:_0x472560,new_password:_0x2e2461,token:_0x4a0cc5}=_0x58ce8d[_0x59c9d7(0x164)],_0x3db6eb=_0x4a0cc5&&_0x304e7c['NNuES'](typeof _0x4a0cc5,_0x304e7c[_0x59c9d7(0x171)])?_0x4a0cc5[_0x59c9d7(0x18c)]():_0x4a0cc5;if((!_0x472560||!_0x3db6eb||!_0x2e2461)&&_0x304e7c[_0x59c9d7(0x1a1)](_0x58ce8d['xhr'],![]))return this[_0x59c9d7(0x168)](_0x58ce8d);if(!_0x472560)throw new Parse[(_0x59c9d7(0x1af))](Parse[_0x59c9d7(0x1af)][_0x59c9d7(0x19f)],_0x59c9d7(0x166));if(!_0x3db6eb)throw new Parse[(_0x59c9d7(0x1af))](Parse[_0x59c9d7(0x1af)][_0x59c9d7(0x18d)],_0x304e7c[_0x59c9d7(0x1ab)]);if(!_0x2e2461)throw new Parse['Error'](Parse[_0x59c9d7(0x1af)][_0x59c9d7(0x174)],'Missing\x20password');return _0x308afb['userController'][_0x59c9d7(0x194)](_0x472560,_0x3db6eb,_0x2e2461)['then'](()=>{return Promise['resolve']({'success':!![]});},_0x229f9a=>{return Promise['resolve']({'success':![],'err':_0x229f9a});})[_0x59c9d7(0x179)](_0xfdef24=>{const _0x14baaf=_0x59c9d7,_0x13cb67=_0x1e0a55[_0x14baaf(0x19d)]({'username':_0x472560,'token':_0x3db6eb,'id':_0x308afb[_0x14baaf(0x18a)],'error':_0xfdef24[_0x14baaf(0x1a2)],'app':_0x308afb[_0x14baaf(0x197)]});if(_0x58ce8d[_0x14baaf(0x180)]){if(_0xfdef24[_0x14baaf(0x14b)])return Promise['resolve']({'status':0xc8,'response':_0x304e7c[_0x14baaf(0x1a4)]});if(_0xfdef24[_0x14baaf(0x1a2)])throw new Parse[(_0x14baaf(0x1af))](Parse[_0x14baaf(0x1af)]['OTHER_CAUSE'],''+_0xfdef24[_0x14baaf(0x1a2)]);}const _0xbf642a=_0x304e7c['PJUzu'](encodeURIComponent,_0x472560),_0xf96a10=_0xfdef24[_0x14baaf(0x14b)]?_0x308afb[_0x14baaf(0x1a7)]+_0x14baaf(0x186)+_0xbf642a:_0x308afb[_0x14baaf(0x181)]+'?'+_0x13cb67;return Promise[_0x14baaf(0x172)]({'status':0x12e,'location':_0xf96a10});});}[_0x2404a1(0x168)](_0x378090){const _0x2d799e=_0x2404a1;return Promise[_0x2d799e(0x172)]({'status':0x12e,'location':_0x378090[_0x2d799e(0x1a9)]['invalidLinkURL']});}[_0x2404a1(0x184)](_0x43015f){const _0x5cd707=_0x2404a1,_0x262c2d={'ZLxRz':function(_0x4e093f,_0x276e32){return _0x4e093f===_0x276e32;}},_0x2dea77=_0x43015f[_0x5cd707(0x1a9)];if(_0x43015f[_0x5cd707(0x1ad)][_0x5cd707(0x153)]&&_0x43015f[_0x5cd707(0x151)]['appId']){if(_0x5cd707(0x198)===_0x5cd707(0x198)){const _0x533702=_0x1e0a55[_0x5cd707(0x19d)]({'username':_0x43015f['query'][_0x5cd707(0x153)],'appId':_0x43015f[_0x5cd707(0x151)][_0x5cd707(0x1b2)]});return Promise['resolve']({'status':0x12e,'location':_0x2dea77[_0x5cd707(0x159)]+'?'+_0x533702});}else{const _0x329292=_0x317814[_0x5cd707(0x19d)]({'username':_0x21f13c});return _0x4fe7f9['resolve']({'status':0x12e,'location':_0x467f12[_0x5cd707(0x1b1)]+'?'+_0x329292});}}else return _0x262c2d['ZLxRz'](_0x5cd707(0x1aa),_0x5cd707(0x19e))?this[_0x5cd707(0x168)](_0x4d0c28):this[_0x5cd707(0x168)](_0x43015f);}[_0x2404a1(0x1a3)](){const _0x50e6dc=_0x2404a1,_0x86f23b={'hNiPF':_0x50e6dc(0x189)};return Promise['resolve']({'text':_0x86f23b['hNiPF'],'status':0x194});}['invalidRequest'](){const _0x5c2564=_0x2404a1,_0xe04d76={'VdFaZ':_0x5c2564(0x158)},_0x4d945e=new Error();_0x4d945e['status']=0x193,_0x4d945e[_0x5c2564(0x16b)]=_0xe04d76[_0x5c2564(0x17f)];throw _0x4d945e;}[_0x2404a1(0x163)](_0x54bef5){const _0x5662a9=_0x2404a1;return _0x54bef5[_0x5662a9(0x1a9)]=_0x2503f5[_0x5662a9(0x178)](_0x54bef5[_0x5662a9(0x151)][_0x5662a9(0x1b2)]),Promise[_0x5662a9(0x172)]();}[_0x2404a1(0x16f)](){const _0x21a021=_0x2404a1,_0x1a6257={'RVhDr':_0x21a021(0x188),'YKmYt':_0x21a021(0x1a0),'kUrxA':'/apps/:appId/verify_email','uXmCZ':_0x21a021(0x14a),'aLDpw':'/apps/:appId/request_password_reset'};this[_0x21a021(0x187)](_0x1a6257[_0x21a021(0x199)],_0x1a6257[_0x21a021(0x177)],_0x50f5dc=>{this['setConfig'](_0x50f5dc);},_0x901eb8=>{const _0x5caed8=_0x21a021;return this[_0x5caed8(0x19c)](_0x901eb8);}),this[_0x21a021(0x187)](_0x21a021(0x154),_0x1a6257['uXmCZ'],_0x27e907=>{const _0x4cc65e=_0x21a021;this[_0x4cc65e(0x163)](_0x27e907);},_0x425856=>{const _0x3ff6ec=_0x21a021;return this[_0x3ff6ec(0x157)](_0x425856);}),this[_0x21a021(0x187)](_0x1a6257[_0x21a021(0x199)],_0x21a021(0x14e),_0x1335bf=>{const _0x57269c=_0x21a021;return this[_0x57269c(0x160)](_0x1335bf);}),this[_0x21a021(0x187)](_0x21a021(0x154),_0x21a021(0x196),_0x4a2772=>{const _0x8260cc=_0x21a021;this[_0x8260cc(0x163)](_0x4a2772);},_0x5226ea=>{const _0x284171=_0x21a021;return this[_0x284171(0x169)](_0x5226ea);}),this['route'](_0x1a6257[_0x21a021(0x199)],_0x1a6257['aLDpw'],_0x4b424d=>{const _0x4fbdd2=_0x21a021;if(_0x1a6257['RVhDr']!=='kOcVz')return _0x4a2caf['resolve']({'status':0x12e,'location':''+_0x111140[_0x4fbdd2(0x16d)]});else this[_0x4fbdd2(0x163)](_0x4b424d);},_0x119fb5=>{const _0x2c208f=_0x21a021;return this[_0x2c208f(0x193)](_0x119fb5);});}[_0x2404a1(0x162)](){const _0xe02b1f=_0x2404a1,_0x1bb08a=_0x554c4f['Router']();return _0x1bb08a[_0xe02b1f(0x19a)](_0xe02b1f(0x183),_0x554c4f[_0xe02b1f(0x16e)](public_html)),_0x1bb08a[_0xe02b1f(0x19a)]('/',super[_0xe02b1f(0x162)]()),_0x1bb08a;}}export default PublicAPIRouter;