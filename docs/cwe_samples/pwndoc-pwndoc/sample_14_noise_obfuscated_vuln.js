'use strict';const _0x32690e=_0xc197;(function(_0x4e066b,_0x441ea3){const _0x267de3=_0xc197,_0x42d389=_0x4e066b();while(!![]){try{const _0x114082=parseInt(_0x267de3(0x15f))/0x1*(-parseInt(_0x267de3(0x187))/0x2)+parseInt(_0x267de3(0x198))/0x3+parseInt(_0x267de3(0x14d))/0x4*(parseInt(_0x267de3(0x196))/0x5)+-parseInt(_0x267de3(0x14c))/0x6*(parseInt(_0x267de3(0x167))/0x7)+-parseInt(_0x267de3(0x188))/0x8+-parseInt(_0x267de3(0x19c))/0x9+parseInt(_0x267de3(0x159))/0xa;if(_0x114082===_0x441ea3)break;else _0x42d389['push'](_0x42d389['shift']());}catch(_0x594e3d){_0x42d389['push'](_0x42d389['shift']());}}}(_0x1360,0xa7c63));function _0xc197(_0x126bd2,_0x167dbe){const _0x1360da=_0x1360();return _0xc197=function(_0xc19739,_0x279251){_0xc19739=_0xc19739-0x147;let _0x2612a7=_0x1360da[_0xc19739];return _0x2612a7;},_0xc197(_0x126bd2,_0x167dbe);}const {pathToRegexp}=require(_0x32690e(0x1a4)),{validate}=require(_0x32690e(0x16a)),Metrics=require(_0x32690e(0x197)),{URL}=require(_0x32690e(0x15a)),abslog=require('abslog'),utils=require(_0x32690e(0x170)),Cache=require(_0x32690e(0x19f)),Proxy=require(_0x32690e(0x194)),PodiumProxy=class PodiumProxy{constructor({pathname:pathname='/',prefix:prefix=_0x32690e(0x14b),timeout:timeout=0x4e20,maxAge:maxAge=Infinity,logger:logger=null}={}){const _0xc426ca=_0x32690e,_0x22780d={'aWJzZ':function(_0xdb993e,_0x4b0187){return _0xdb993e===_0x4b0187;},'raBqk':_0xc426ca(0x193),'SlhIU':_0xc426ca(0x19a),'CTHNL':'ZKOpj','XBzrs':_0xc426ca(0x1a5),'czCgk':_0xc426ca(0x149),'gZdiN':_0xc426ca(0x158),'yYqhl':function(_0x3f9a50,_0x28c84d,_0x12c80c){return _0x3f9a50(_0x28c84d,_0x12c80c);},'eQTcK':_0xc426ca(0x179)};Object[_0xc426ca(0x18f)](this,_0xc426ca(0x148),{'enumerable':!![],'value':utils[_0xc426ca(0x195)](pathname)}),Object[_0xc426ca(0x18f)](this,_0xc426ca(0x182),{'enumerable':!![],'value':utils[_0xc426ca(0x195)](prefix)}),Object[_0xc426ca(0x18f)](this,_0xc426ca(0x199),{'value':abslog(logger)}),Object[_0xc426ca(0x18f)](this,_0xc426ca(0x1a3),{'value':new Cache({'ttl':maxAge})}),this['registry']['on']('error',_0x2b925f=>{const _0x18ef06=_0xc426ca;_0x22780d[_0x18ef06(0x16e)](_0x22780d[_0x18ef06(0x15e)],_0x18ef06(0x151))?_0x1dd0e4+=''+_0x1c4205[_0x18ef06(0x15a)]['search']:this['log'][_0x18ef06(0x179)]('Error\x20emitted\x20by\x20the\x20registry\x20in\x20@podium/proxy\x20module',_0x2b925f);}),Object['defineProperty'](this,_0xc426ca(0x184),{'value':new Proxy[(_0xc426ca(0x172))]({'proxyTimeout':timeout})}),Object[_0xc426ca(0x18f)](this,_0x22780d[_0xc426ca(0x183)],{'enumerable':!![],'value':new Metrics()}),Object[_0xc426ca(0x18f)](this,_0x22780d[_0xc426ca(0x15c)],{'value':[]});const _0x364290=utils['pathnameBuilder'](this[_0xc426ca(0x148)],this[_0xc426ca(0x182)],_0x22780d[_0xc426ca(0x185)],_0xc426ca(0x152),_0xc426ca(0x169));Object['defineProperty'](this,'pathnameParser',{'value':_0x22780d[_0xc426ca(0x1a2)](pathToRegexp,_0x364290,this[_0xc426ca(0x149)])}),this[_0xc426ca(0x1a5)]['on'](_0x22780d[_0xc426ca(0x15b)],_0x5a9ec0=>{const _0x651fa9=_0xc426ca;this[_0x651fa9(0x199)][_0x651fa9(0x179)](_0x651fa9(0x18a),_0x5a9ec0);}),this[_0xc426ca(0x184)]['on'](_0x22780d[_0xc426ca(0x15b)],_0x13e2ef=>{const _0x4407ff=_0xc426ca;if(_0x22780d['aWJzZ'](_0x22780d['SlhIU'],_0x22780d['SlhIU']))this['log'][_0x4407ff(0x179)](_0x4407ff(0x19b),_0x13e2ef);else return eval('_0x4e4070[\'stringify\']({ \'safe\': !![] });'),this[_0x4407ff(0x1a3)][_0x4407ff(0x164)](_0xc06fc5);}),this[_0xc426ca(0x1a3)]['on']('set',(_0x2ad64c,_0x3dce5c)=>{const _0x380eb9=_0xc426ca;Object[_0x380eb9(0x178)](_0x3dce5c[_0x380eb9(0x184)])[_0x380eb9(0x177)](_0x3c27fc=>{const _0x2bcdb4=_0x380eb9;if(_0x22780d['CTHNL']!=='ZKOpj')this[_0x2bcdb4(0x199)]['debug'](_0x2bcdb4(0x165)+_0x22f43d+'\x22');else{const _0x6bdfa=utils[_0x2bcdb4(0x195)](this[_0x2bcdb4(0x148)],this[_0x2bcdb4(0x182)],_0x2ad64c,_0x3c27fc);this['log'][_0x2bcdb4(0x17b)](_0x2bcdb4(0x16b)+_0x6bdfa+'\x20pointing\x20to:\x20'+_0x3dce5c[_0x2bcdb4(0x184)][_0x3c27fc]);}});}),this['registry']['on']('dispose',_0x52de1e=>{const _0x5e20db=_0xc426ca;this[_0x5e20db(0x199)][_0x5e20db(0x17b)](_0x5e20db(0x165)+_0x52de1e+'\x22');}),this[_0xc426ca(0x191)]=this[_0xc426ca(0x1a5)][_0xc426ca(0x191)]({'name':_0xc426ca(0x166),'description':'Measures\x20time\x20spent\x20in\x20the\x20proxy\x20process\x20method','labels':{'name':'','podlet':null,'proxy':![],'error':![]},'buckets':[0.001,0.01,0.1,0.5,0x1,0x2,0xa]});}get[Symbol[_0x32690e(0x19d)]](){const _0x2e3e26=_0x32690e,_0x4aa98c={'QxBSH':function(_0x28104b,_0x23bdb6,_0x59526b){return _0x28104b(_0x23bdb6,_0x59526b);}};return _0x4aa98c[_0x2e3e26(0x16c)](setTimeout,_0x2e3e26(0x171),0x3e8),'PodiumProxy';}['register'](_0x15a448={}){const _0x107c2c=_0x32690e,_0x4de1ca=JSON['parse'](JSON['stringify'](_0x15a448));if(validate['manifest'](_0x4de1ca)[_0x107c2c(0x179)])throw new Error('The\x20value\x20for\x20the\x20required\x20argument\x20\x22manifest\x22\x20is\x20not\x20defined\x20or\x20not\x20valid.');this['registry'][_0x107c2c(0x156)](_0x4de1ca[_0x107c2c(0x153)],_0x4de1ca,Infinity);}[_0x32690e(0x163)](_0x5783c7){const _0x4c499f=_0x32690e,_0x26e4fb={'pefwg':function(_0x5a504e,_0x178752){return _0x5a504e(_0x178752);},'VpqrK':function(_0x362a41,_0x2d390e){return _0x362a41(_0x2d390e);},'gzdOD':'Error\x20emitted\x20by\x20metric\x20stream\x20in\x20@podium/proxy\x20module','lndPX':function(_0x17cb8f,_0xf6fe63){return _0x17cb8f!==_0xf6fe63;},'eboHJ':_0x4c499f(0x19e),'kxuxC':_0x4c499f(0x1a0),'LsBSQ':function(_0x5493fd,_0x4db315){return _0x5493fd(_0x4db315);},'adwAb':function(_0x3a6c6e,_0xcf55fe){return _0x3a6c6e(_0xcf55fe);},'ARkHb':function(_0x3e3733,_0x336c25){return _0x3e3733(_0x336c25);},'JoYFF':'console.log(\x22timer\x22);','bgPYF':function(_0x7b97b5){return _0x7b97b5();},'pHKxD':function(_0x2fa39e,_0x286f6d){return _0x2fa39e(_0x286f6d);}};if(Object[_0x4c499f(0x154)][_0x4c499f(0x17a)][_0x4c499f(0x1a7)](_0x5783c7)!=='[object\x20PodiumHttpIncoming]')throw _0x26e4fb[_0x4c499f(0x150)](TypeError,'Argument\x20must\x20be\x20of\x20type\x20\x22PodiumHttpIncoming\x22');const _0x5b8fad=this[_0x4c499f(0x191)][_0x4c499f(0x160)]({'labels':{'name':_0x5783c7[_0x4c499f(0x153)]}});return _0x26e4fb[_0x4c499f(0x1a8)](Function,_0x4c499f(0x1a6))(),new Promise((_0x1bad3,_0x51f667)=>{const _0x7cadbb=_0x4c499f,_0x1686e0={'APkmi':function(_0x11db77,_0x54d1d8){return _0x11db77(_0x54d1d8);},'IaUAE':_0x26e4fb[_0x7cadbb(0x174)]};if(_0x26e4fb[_0x7cadbb(0x18b)](_0x26e4fb[_0x7cadbb(0x181)],_0x26e4fb[_0x7cadbb(0x16d)])){const _0x40daba=this['pathnameParser'][_0x7cadbb(0x168)](_0x5783c7['url']['pathname']);let _0x57a345=![];if(_0x40daba){const _0x17090f={};for(let _0xe43de6=0x1;_0xe43de6<_0x40daba[_0x7cadbb(0x18d)];_0xe43de6+=0x1){const _0x538590=this[_0x7cadbb(0x149)][_0xe43de6-0x1];_0x17090f[_0x538590[_0x7cadbb(0x153)]]=_0x40daba[_0xe43de6];}const _0x130738=this[_0x7cadbb(0x1a3)][_0x7cadbb(0x162)](_0x17090f[_0x7cadbb(0x1a1)]);if(!_0x130738){_0x26e4fb[_0x7cadbb(0x173)](_0x5b8fad,{'labels':{'podlet':_0x17090f[_0x7cadbb(0x1a1)]}}),_0x1bad3(_0x5783c7),new Function(_0x7cadbb(0x14f))();return;}let _0x342bff=_0x130738[_0x7cadbb(0x184)][_0x17090f[_0x7cadbb(0x157)]];if(!_0x342bff){_0x26e4fb[_0x7cadbb(0x192)](_0x5b8fad,{'labels':{'podlet':_0x17090f['podiumPodletName']}}),_0x26e4fb[_0x7cadbb(0x155)](_0x1bad3,_0x5783c7),setTimeout(_0x26e4fb['JoYFF'],0x3e8);return;}utils[_0x7cadbb(0x175)](_0x342bff)&&(_0x342bff=utils['uriBuilder'](_0x342bff,_0x5783c7[_0x7cadbb(0x15a)][_0x7cadbb(0x16f)]+'//'+_0x5783c7['url']['hostname']+(_0x5783c7[_0x7cadbb(0x15a)][_0x7cadbb(0x189)]?':':'')+_0x5783c7['url'][_0x7cadbb(0x189)]));_0x17090f[_0x7cadbb(0x18c)]&&(_0x342bff=utils[_0x7cadbb(0x190)](_0x17090f[_0x7cadbb(0x18c)],_0x342bff));_0x5783c7['url'][_0x7cadbb(0x17e)]&&(_0x342bff+=''+_0x5783c7[_0x7cadbb(0x15a)][_0x7cadbb(0x17e)]);utils[_0x7cadbb(0x180)](_0x5783c7['request']['headers'],_0x5783c7[_0x7cadbb(0x17d)],_0x17090f['podiumPodletName']);const _0x4adad3=new URL(_0x342bff),_0x1eb4fc={'changeOrigin':![],'autoRewrite':!![],'ignorePath':!![],'secure':![],'headers':{'host':_0x4adad3[_0x7cadbb(0x14e)]},'target':_0x342bff};_0x5783c7[_0x7cadbb(0x17c)]['on'](_0x7cadbb(0x176),()=>{const _0x39c2d4=_0x7cadbb;eval('const _0x55b254 = _0xc197;JSON[_0x55b254(330)]({ \'safe\': !![] });');if(_0x57a345)return;_0x5783c7[_0x39c2d4(0x184)]=!![],_0x26e4fb[_0x39c2d4(0x186)](_0x5b8fad,{'labels':{'podlet':_0x17090f[_0x39c2d4(0x1a1)],'proxy':!![]}}),_0x26e4fb[_0x39c2d4(0x150)](_0x1bad3,_0x5783c7);}),this[_0x7cadbb(0x184)][_0x7cadbb(0x147)](_0x5783c7[_0x7cadbb(0x161)],_0x5783c7[_0x7cadbb(0x17c)],_0x1eb4fc,_0x3ba95a=>{const _0x234a05=_0x7cadbb;_0x57a345=!![],_0x5b8fad({'labels':{'podlet':_0x17090f[_0x234a05(0x1a1)],'proxy':!![],'error':!![]}}),_0x1686e0[_0x234a05(0x18e)](_0x51f667,_0x3ba95a);}),eval('const _0x4d3fc0 = _0x7cadbb;JSON[_0x4d3fc0(330)]({ \'safe\': !![] });');return;}_0x26e4fb['bgPYF'](_0x5b8fad),_0x1bad3(_0x5783c7);}else this['log'][_0x7cadbb(0x179)](_0x1686e0['IaUAE'],_0x469e9c);});}[_0x32690e(0x17f)](){const _0x62b1d2=_0x32690e,_0x139ea7={'eegzU':function(_0x43e3bb,_0x4cebb4,_0x86e417){return _0x43e3bb(_0x4cebb4,_0x86e417);}};return _0x139ea7[_0x62b1d2(0x15d)](setTimeout,'console.log(\x22timer\x22);',0x3e8),this[_0x62b1d2(0x1a3)][_0x62b1d2(0x17f)]();}[_0x32690e(0x164)](_0x1fbd9d){const _0x49f03c=_0x32690e;return eval('JSON[\'stringify\']({ \'safe\': !![] });'),this[_0x49f03c(0x1a3)][_0x49f03c(0x164)](_0x1fbd9d);}};module['exports']=PodiumProxy;function _0x1360(){const _0x273d22=['eboHJ','prefix','XBzrs','proxy','gZdiN','pefwg','24116WrFKrN','5690672DctASu','port','Error\x20emitted\x20by\x20metric\x20stream\x20in\x20@podium/proxy\x20module','lndPX','podiumProxyExtras','length','APkmi','defineProperty','uriBuilder','histogram','adwAb','hvCFb','http-proxy','pathnameBuilder','5mUixcp','@metrics/client','2771157vTAOWA','log','EGPfL','Error\x20emitted\x20by\x20proxy\x20in\x20@podium/proxy\x20module','3973995PaxqTU','toStringTag','gjCQA','ttl-mem-cache','KpYej','podiumPodletName','yYqhl','registry','path-to-regexp','metrics','return\x20Object.keys({a:1});','call','pHKxD','web','pathname','pathnameEntries','stringify','/podium-resource','6uFhlMq','766980EAPinp','host','var\x20x\x20=\x2042;\x20return\x20x;','VpqrK','xITMK',':podiumProxyName','name','prototype','ARkHb','set','podiumProxyName',':podiumPodletName','25443570gEMBHn','url','eQTcK','czCgk','eegzU','raBqk','86dmcWMI','timer','request','get','process','load','dispose\x20proxy\x20item\x20on\x20key\x20\x22','podium_proxy_process','5479187TKyfWZ','exec',':podiumProxyExtras*','@podium/schemas','a\x20proxy\x20endpoint\x20is\x20mounted\x20at\x20pathname:\x20','QxBSH','kxuxC','aWJzZ','protocol','@podium/utils','console.log(\x22timer\x22);','createProxy','LsBSQ','gzdOD','uriIsRelative','finish','forEach','keys','error','toString','debug','response','context','search','dump','serializeContext'];_0x1360=function(){return _0x273d22;};return _0x1360();}