const _0x5288c2=_0x206d;(function(_0x30c4d4,_0x36f6e0){const _0x131290=_0x206d,_0x3dcf05=_0x30c4d4();while(!![]){try{const _0x269eca=parseInt(_0x131290(0x1ff))/0x1*(parseInt(_0x131290(0x1dc))/0x2)+parseInt(_0x131290(0x26d))/0x3*(-parseInt(_0x131290(0x2a0))/0x4)+parseInt(_0x131290(0x2a9))/0x5*(parseInt(_0x131290(0x215))/0x6)+parseInt(_0x131290(0x22a))/0x7*(-parseInt(_0x131290(0x20e))/0x8)+parseInt(_0x131290(0x206))/0x9+parseInt(_0x131290(0x1fb))/0xa*(parseInt(_0x131290(0x2bd))/0xb)+-parseInt(_0x131290(0x1fc))/0xc;if(_0x269eca===_0x36f6e0)break;else _0x3dcf05['push'](_0x3dcf05['shift']());}catch(_0x1a4f6b){_0x3dcf05['push'](_0x3dcf05['shift']());}}}(_0x27ab,0xcd2fa));function _0x206d(_0x37a6fb,_0x2d92a1){const _0x27ab2c=_0x27ab();return _0x206d=function(_0x206d2c,_0x4dfece){_0x206d2c=_0x206d2c-0x1d1;let _0x5b5636=_0x27ab2c[_0x206d2c];return _0x5b5636;},_0x206d(_0x37a6fb,_0x2d92a1);}const Sequelize=require(_0x5288c2(0x1ed)),Path=require(_0x5288c2(0x292)),{Request,Response}=require(_0x5288c2(0x2cc)),fs=require(_0x5288c2(0x27b)),Logger=require(_0x5288c2(0x28c)),SocketAuthority=require(_0x5288c2(0x204)),Database=require(_0x5288c2(0x2c7)),Watcher=require(_0x5288c2(0x1e7)),libraryItemFilters=require(_0x5288c2(0x205)),patternValidation=require(_0x5288c2(0x2b8)),{isObject,getTitleIgnorePrefix}=require(_0x5288c2(0x2b3)),{sanitizeFilename}=require(_0x5288c2(0x246)),TaskManager=require(_0x5288c2(0x1d3)),adminStats=require(_0x5288c2(0x25d));class MiscController{constructor(){}async[_0x5288c2(0x2ac)](_0x33d5bb,_0x1516e5){const _0x140e92=_0x5288c2,_0x45a70e={'Byefy':function(_0x5c38ae,_0x4a9186){return _0x5c38ae!==_0x4a9186;},'nZQaA':_0x140e92(0x213),'rcLgQ':'NnwhJ','WRNby':_0x140e92(0x2a3),'cFqSa':_0x140e92(0x258),'xLMRZ':function(_0x1b0ba1,_0x3a261a){return _0x1b0ba1(_0x3a261a);}};if(!_0x33d5bb[_0x140e92(0x20f)][_0x140e92(0x26c)])return Logger[_0x140e92(0x224)](_0x140e92(0x25a)+_0x33d5bb['user'][_0x140e92(0x221)]+'\x22\x20attempted\x20to\x20upload\x20without\x20permission'),_0x1516e5[_0x140e92(0x1ef)](0x193);if(!_0x33d5bb['files'])return _0x45a70e[_0x140e92(0x231)](_0x45a70e['cFqSa'],_0x140e92(0x258))?(_0x2c1217['error'](_0x140e92(0x242)),_0x5c1945[_0x140e92(0x1ef)](0x190)):(Logger['error'](_0x140e92(0x2c1)),_0x1516e5['sendStatus'](0x190));const _0x2458c5=Object['values'](_0x33d5bb[_0x140e92(0x26f)]),{title:_0x421a37,author:_0x349be2,series:_0x277dbb,folder:_0x524335,library:_0x4b9dde}=_0x33d5bb['body'],_0x1c917=await Database[_0x140e92(0x247)][_0x140e92(0x233)](_0x4b9dde);if(!_0x1c917)return _0x1516e5[_0x140e92(0x2c8)](0x194)[_0x140e92(0x27f)](_0x140e92(0x28b)+_0x4b9dde);const _0x27943f=_0x1c917[_0x140e92(0x28d)][_0x140e92(0x2b5)](_0x50371b=>_0x50371b['id']===_0x524335);if(!_0x27943f)return _0x1516e5[_0x140e92(0x2c8)](0x194)[_0x140e92(0x27f)]('Folder\x20not\x20found\x20with\x20id\x20'+_0x524335+_0x140e92(0x2c2)+_0x1c917[_0x140e92(0x29a)]);if(!_0x2458c5['length']||!_0x421a37)return _0x1516e5[_0x140e92(0x2c8)](0x1f4)['send'](_0x140e92(0x229));const _0x4c0875=_0x1c917['isPodcast']?[_0x421a37]:[_0x349be2,_0x277dbb,_0x421a37],_0x3b0ff9=_0x4c0875[_0x140e92(0x275)](Boolean)['map'](_0x50319b=>sanitizeFilename(_0x50319b)),_0x100e0f=Path[_0x140e92(0x20a)](...[_0x27943f['path'],..._0x3b0ff9]);await fs[_0x140e92(0x21e)](_0x100e0f),Logger[_0x140e92(0x1d9)](_0x140e92(0x265)+_0x2458c5[_0x140e92(0x2c3)]+_0x140e92(0x214),_0x100e0f);for(const _0x104098 of _0x2458c5){const _0x2ca1b8=Path[_0x140e92(0x20a)](_0x100e0f,_0x45a70e[_0x140e92(0x293)](sanitizeFilename,_0x104098[_0x140e92(0x29a)]));await _0x104098['mv'](_0x2ca1b8)[_0x140e92(0x29e)](()=>{return!![];})[_0x140e92(0x249)](_0x5b5641=>{const _0x1c2d8f=_0x140e92;if('NnwhJ'!==_0x45a70e['rcLgQ']){if(_0x45a70e[_0x1c2d8f(0x231)](typeof _0x379a31,_0x45a70e[_0x1c2d8f(0x216)]))return![];const _0x46688a=new _0x175231(_0x1c2d8f(0x238),'i');return _0x46688a[_0x1c2d8f(0x250)](_0x383658);}else return Logger[_0x1c2d8f(0x2b2)](_0x45a70e['WRNby'],_0x2ca1b8,_0x5b5641),![];});}_0x1516e5['sendStatus'](0xc8);}[_0x5288c2(0x29b)](_0x5f526f,_0x4287a){const _0x265e6c=_0x5288c2,_0x37445b=(_0x5f526f[_0x265e6c(0x20b)][_0x265e6c(0x276)]||'')[_0x265e6c(0x201)](','),_0x20d9de={'tasks':TaskManager[_0x265e6c(0x237)]['map'](_0x4d8baf=>_0x4d8baf[_0x265e6c(0x232)]())};_0x37445b[_0x265e6c(0x209)](_0x265e6c(0x1f3))&&(_0x20d9de['queuedTaskData']={'embedMetadata':this[_0x265e6c(0x226)][_0x265e6c(0x1ec)]()}),_0x4287a[_0x265e6c(0x24d)](_0x20d9de);}async[_0x5288c2(0x27d)](_0x4f3b26,_0x4769b0){const _0x5e2815=_0x5288c2,_0x21c9f4={'DKCwG':function(_0x49e94a,_0x3a8148){return _0x49e94a(_0x3a8148);},'FgcqM':function(_0x2d7cdf,_0x288771){return _0x2d7cdf===_0x288771;},'haDkG':_0x5e2815(0x22b),'IoDkM':_0x5e2815(0x282),'mPZcq':function(_0x430cc5,_0xe593da){return _0x430cc5!==_0xe593da;},'jwqOP':function(_0x3b17e1,_0x16dd19){return _0x3b17e1!==_0x16dd19;}};if(!_0x4f3b26[_0x5e2815(0x20f)]['isAdminOrUp'])return Logger[_0x5e2815(0x2b2)](_0x5e2815(0x25a)+_0x4f3b26[_0x5e2815(0x20f)]['username']+'\x22\x20other\x20than\x20admin\x20attempting\x20to\x20update\x20server\x20settings'),_0x4769b0[_0x5e2815(0x1ef)](0x193);const _0xdbb600=_0x4f3b26[_0x5e2815(0x288)];if(!_0x21c9f4['DKCwG'](isObject,_0xdbb600))return _0x4769b0[_0x5e2815(0x2c8)](0x190)[_0x5e2815(0x27f)](_0x5e2815(0x273));if(_0xdbb600[_0x5e2815(0x248)]==![]&&_0x21c9f4[_0x5e2815(0x272)](process[_0x5e2815(0x24c)][_0x5e2815(0x2a8)],'1')){if(_0x5e2815(0x22b)===_0x21c9f4[_0x5e2815(0x1f4)])return Logger[_0x5e2815(0x224)](_0x5e2815(0x282)),_0x4769b0['status'](0x190)[_0x5e2815(0x27f)](_0x21c9f4[_0x5e2815(0x23c)]);else _0x37caaa[_0x5e2815(0x1d9)]('[MiscController]\x20Disabling\x20active\x20auth\x20method\x20\x22'+_0x311ef3+'\x22'),this['auth'][_0x5e2815(0x274)](_0xb3873d);}const _0x498432=Database[_0x5e2815(0x21a)][_0x5e2815(0x1f8)](_0xdbb600);if(_0x498432){if(_0x21c9f4['mPZcq'](_0x5e2815(0x2b0),_0x5e2815(0x2b0)))return _0x453c98[_0x5e2815(0x2b2)](_0x5e2815(0x2ba)+_0x1b1521[_0x5e2815(0x20f)][_0x5e2815(0x221)]+_0x5e2815(0x2c0)),_0x253e1a[_0x5e2815(0x1ef)](0x193);else await Database['updateServerSettings'](),_0x21c9f4[_0x5e2815(0x2b4)](_0xdbb600[_0x5e2815(0x286)],undefined)&&this['backupManager'][_0x5e2815(0x2a5)]();}return _0x4769b0['json']({'serverSettings':Database[_0x5e2815(0x21a)][_0x5e2815(0x1d5)]()});}async['updateSortingPrefixes'](_0x13f475,_0x1b517b){const _0x28dfc3=_0x5288c2,_0x5aa691={'YeBJr':function(_0x2b6d2f,_0x2d77de){return _0x2b6d2f(_0x2d77de);},'RoiEU':function(_0x17a6b,_0x47620d){return _0x17a6b!==_0x47620d;},'nKVpw':_0x28dfc3(0x271),'zrMhM':_0x28dfc3(0x262),'Frixd':'QmLSU','GjURm':'name','VRchf':_0x28dfc3(0x21b)};if(!_0x13f475[_0x28dfc3(0x20f)][_0x28dfc3(0x1ea)])return Logger['error'](_0x28dfc3(0x25a)+_0x13f475[_0x28dfc3(0x20f)][_0x28dfc3(0x221)]+_0x28dfc3(0x253)),_0x1b517b[_0x28dfc3(0x1ef)](0x193);let _0x3978f4=_0x13f475['body'][_0x28dfc3(0x1e5)];if(!_0x3978f4?.['length']||!Array[_0x28dfc3(0x217)](_0x3978f4))return _0x1b517b['status'](0x190)[_0x28dfc3(0x27f)](_0x28dfc3(0x241));_0x3978f4=[...new Set(_0x3978f4[_0x28dfc3(0x1e4)](_0x2a1e4c=>_0x2a1e4c?.[_0x28dfc3(0x1d2)]?.()['toLowerCase']())[_0x28dfc3(0x275)](_0x3cc847=>_0x3cc847))];if(!_0x3978f4[_0x28dfc3(0x2c3)])return _0x1b517b[_0x28dfc3(0x2c8)](0x190)[_0x28dfc3(0x27f)](_0x28dfc3(0x203));Logger[_0x28dfc3(0x24e)]('[MiscController]\x20Updating\x20sorting\x20prefixes\x20'+_0x3978f4['join'](',\x20')),Database[_0x28dfc3(0x21a)]['sortingPrefixes']=_0x3978f4,await Database[_0x28dfc3(0x27d)]();let _0xf0c757=0x0;const _0x55ce14=await Database['bookModel'][_0x28dfc3(0x2bf)]({'attributes':['id','title','titleIgnorePrefix']}),_0x1ff621=[];_0x55ce14[_0x28dfc3(0x243)](_0x50ea11=>{const _0xe831f6=_0x28dfc3,_0xff14cb=_0x5aa691['YeBJr'](getTitleIgnorePrefix,_0x50ea11[_0xe831f6(0x1f0)]);_0xff14cb!==_0x50ea11['titleIgnorePrefix']&&_0x1ff621['push']({'id':_0x50ea11['id'],'titleIgnorePrefix':_0xff14cb});});_0x1ff621['length']&&(Logger[_0x28dfc3(0x1d9)](_0x28dfc3(0x23e)+_0x1ff621[_0x28dfc3(0x2c3)]+'\x20books'),_0xf0c757+=_0x1ff621[_0x28dfc3(0x2c3)],await Database[_0x28dfc3(0x230)][_0x28dfc3(0x279)](_0x1ff621,{'updateOnDuplicate':[_0x28dfc3(0x297)]}));const _0x1775a4=await Database[_0x28dfc3(0x28a)][_0x28dfc3(0x2bf)]({'attributes':['id','title',_0x28dfc3(0x297)]}),_0x308275=[];_0x1775a4[_0x28dfc3(0x243)](_0x3168c0=>{const _0x890d3e=_0x28dfc3,_0x38f512=getTitleIgnorePrefix(_0x3168c0['title']);_0x5aa691['RoiEU'](_0x38f512,_0x3168c0[_0x890d3e(0x297)])&&_0x308275[_0x890d3e(0x2b7)]({'id':_0x3168c0['id'],'titleIgnorePrefix':_0x38f512});});if(_0x308275[_0x28dfc3(0x2c3)]){if(_0x5aa691[_0x28dfc3(0x218)](_0x5aa691[_0x28dfc3(0x299)],_0x5aa691[_0x28dfc3(0x296)]))Logger[_0x28dfc3(0x1d9)](_0x28dfc3(0x23e)+_0x308275[_0x28dfc3(0x2c3)]+_0x28dfc3(0x2ca)),_0xf0c757+=_0x308275['length'],await Database[_0x28dfc3(0x28a)][_0x28dfc3(0x279)](_0x308275,{'updateOnDuplicate':[_0x28dfc3(0x297)]});else return _0x24e22e[_0x28dfc3(0x2b2)](_0x28dfc3(0x2ba)+_0x5913e1[_0x28dfc3(0x20f)]['username']+_0x28dfc3(0x254)),_0x2f5a47[_0x28dfc3(0x1ef)](0x193);}const _0x4e2e7a=await Database[_0x28dfc3(0x284)]['findAll']({'attributes':['id',_0x5aa691[_0x28dfc3(0x2c9)],_0x28dfc3(0x21b)]}),_0x4e570d=[];_0x4e2e7a[_0x28dfc3(0x243)](_0x4fadd1=>{const _0x1308b9=_0x28dfc3,_0x163dd8=getTitleIgnorePrefix(_0x4fadd1[_0x1308b9(0x29a)]);if(_0x5aa691['RoiEU'](_0x163dd8,_0x4fadd1[_0x1308b9(0x21b)])){if(_0x1308b9(0x271)===_0x5aa691['nKVpw'])_0x4e570d['push']({'id':_0x4fadd1['id'],'nameIgnorePrefix':_0x163dd8});else return _0x10314e[_0x1308b9(0x2b2)](_0x1308b9(0x2ba)+_0x4f96f9[_0x1308b9(0x20f)][_0x1308b9(0x221)]+_0x1308b9(0x1f5)),_0x4757d1['sendStatus'](0x193);}}),_0x4e570d[_0x28dfc3(0x2c3)]&&(Logger[_0x28dfc3(0x1d9)](_0x28dfc3(0x24b)+_0x4e570d[_0x28dfc3(0x2c3)]+_0x28dfc3(0x2a7)),_0xf0c757+=_0x4e570d['length'],await Database[_0x28dfc3(0x284)]['bulkCreate'](_0x4e570d,{'updateOnDuplicate':[_0x5aa691[_0x28dfc3(0x222)]]})),_0x1b517b[_0x28dfc3(0x24d)]({'rowsUpdated':_0xf0c757,'serverSettings':Database['serverSettings'][_0x28dfc3(0x1d5)]()});}async[_0x5288c2(0x235)](_0x4fd230,_0x1c7731){const _0x257ad0=_0x5288c2,_0x5770cf=await this['auth'][_0x257ad0(0x1e2)](_0x4fd230['user']);_0x1c7731['json'](_0x5770cf);}async['getAllTags'](_0x1d34bd,_0x318890){const _0x5ae336=_0x5288c2,_0x23b6f5={'fvQxx':'tags','hhxeq':'json_array_length','KUCjM':function(_0x956fc2,_0x3d6472){return _0x956fc2!==_0x3d6472;},'VwjDS':'PLDYG'};if(!_0x1d34bd[_0x5ae336(0x20f)][_0x5ae336(0x1ea)])return _0x5ae336(0x263)===_0x5ae336(0x2ab)?(_0x421b95['error'](_0x5ae336(0x2ba)+_0x39f7dc[_0x5ae336(0x20f)]['username']+_0x5ae336(0x1f1)),_0x13d3c5[_0x5ae336(0x1ef)](0x193)):(Logger[_0x5ae336(0x2b2)]('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x1d34bd[_0x5ae336(0x20f)][_0x5ae336(0x221)]+_0x5ae336(0x254)),_0x318890[_0x5ae336(0x1ef)](0x193));const _0x4bdfeb=[],_0x113afe=await Database[_0x5ae336(0x230)][_0x5ae336(0x2bf)]({'attributes':[_0x23b6f5[_0x5ae336(0x268)]],'where':Sequelize[_0x5ae336(0x228)](Sequelize['fn'](_0x23b6f5['hhxeq'],Sequelize[_0x5ae336(0x2bb)](_0x23b6f5['fvQxx'])),{[Sequelize['Op']['gt']]:0x0})});for(const _0x49f855 of _0x113afe){for(const _0x3f336a of _0x49f855[_0x5ae336(0x269)]){if(!_0x4bdfeb[_0x5ae336(0x209)](_0x3f336a))_0x4bdfeb[_0x5ae336(0x2b7)](_0x3f336a);}}const _0x5d3ca0=await Database[_0x5ae336(0x28a)][_0x5ae336(0x2bf)]({'attributes':[_0x5ae336(0x269)],'where':Sequelize[_0x5ae336(0x228)](Sequelize['fn'](_0x23b6f5[_0x5ae336(0x26e)],Sequelize[_0x5ae336(0x2bb)](_0x5ae336(0x269))),{[Sequelize['Op']['gt']]:0x0})});for(const _0x21e92f of _0x5d3ca0){if(_0x23b6f5[_0x5ae336(0x207)](_0x23b6f5[_0x5ae336(0x1d6)],_0x5ae336(0x210)))return _0x39045c[_0x5ae336(0x2b2)]('[MiscController]\x20Invalid\x20request\x20body\x20for\x20updateWatchedPath.\x20oldPath\x20is\x20required\x20for\x20rename.'),_0x3b2b30[_0x5ae336(0x1ef)](0x190);else for(const _0x3a4549 of _0x21e92f['tags']){if(!_0x4bdfeb[_0x5ae336(0x209)](_0x3a4549))_0x4bdfeb[_0x5ae336(0x2b7)](_0x3a4549);}}_0x318890['json']({'tags':_0x4bdfeb[_0x5ae336(0x264)]((_0x504758,_0x36bf9e)=>_0x504758[_0x5ae336(0x23b)]()[_0x5ae336(0x291)](_0x36bf9e['toLowerCase']()))});}async[_0x5288c2(0x208)](_0x54eb54,_0x177567){const _0x379807=_0x5288c2,_0x3e487f={'uukrC':function(_0x776f72,_0x534061){return _0x776f72||_0x534061;},'DnWxG':function(_0x1ae011,_0x16d233){return _0x1ae011!==_0x16d233;},'MoBmA':function(_0x2d58d4,_0xfb232e){return _0x2d58d4===_0xfb232e;},'xacyc':'pADOo','wqONB':_0x379807(0x24a)};if(!_0x54eb54[_0x379807(0x20f)]['isAdminOrUp'])return Logger[_0x379807(0x2b2)](_0x379807(0x2ba)+_0x54eb54[_0x379807(0x20f)]['username']+_0x379807(0x2af)),_0x177567[_0x379807(0x1ef)](0x193);const _0x265240=_0x54eb54['body'][_0x379807(0x236)],_0x53c4fe=_0x54eb54[_0x379807(0x288)]['newTag'];if(_0x3e487f[_0x379807(0x20c)](!_0x265240,!_0x53c4fe)){if(_0x3e487f[_0x379807(0x22c)](_0x379807(0x211),'VmmKX'))return Logger['error']('[MiscController]\x20Invalid\x20request\x20body\x20for\x20renameTag'),_0x177567[_0x379807(0x1ef)](0x190);else _0x16d864[_0x379807(0x2b7)]({'id':_0x18d497['id'],'nameIgnorePrefix':_0x8d70d0});}let _0x36d338=![],_0x10a0d1=0x0;Database['replaceTagInFilterData'](_0x265240,_0x53c4fe);const _0x4374f8=await libraryItemFilters[_0x379807(0x25b)]([_0x265240,_0x53c4fe]);for(const _0x4633bf of _0x4374f8){_0x4633bf[_0x379807(0x1ee)][_0x379807(0x269)][_0x379807(0x209)](_0x53c4fe)&&(_0x36d338=!![]);if(_0x4633bf[_0x379807(0x1ee)][_0x379807(0x269)][_0x379807(0x209)](_0x265240)){_0x4633bf[_0x379807(0x1ee)]['tags']=_0x4633bf[_0x379807(0x1ee)]['tags'][_0x379807(0x275)](_0x4dac3b=>_0x4dac3b!==_0x265240);if(!_0x4633bf[_0x379807(0x1ee)][_0x379807(0x269)][_0x379807(0x209)](_0x53c4fe)){if(_0x3e487f[_0x379807(0x227)](_0x3e487f[_0x379807(0x240)],_0x379807(0x280)))_0x4633bf[_0x379807(0x1ee)]['tags']['push'](_0x53c4fe);else for(const _0x2258f1 of _0x1624ff[_0x379807(0x202)]){if(!_0x237872[_0x379807(0x209)](_0x2258f1))_0x5cf49a['push'](_0x2258f1);}}Logger[_0x379807(0x24e)]('[MiscController]\x20Rename\x20tag\x20\x22'+_0x265240+_0x379807(0x234)+_0x53c4fe+_0x379807(0x219)+_0x4633bf['media'][_0x379807(0x1f0)]+'\x22'),await _0x4633bf[_0x379807(0x1ee)][_0x379807(0x1f8)]({'tags':_0x4633bf['media']['tags']}),await _0x4633bf[_0x379807(0x20d)](),SocketAuthority['libraryItemEmitter'](_0x3e487f['wqONB'],_0x4633bf),_0x10a0d1++;}}_0x177567[_0x379807(0x24d)]({'tagMerged':_0x36d338,'numItemsUpdated':_0x10a0d1});}async['deleteTag'](_0x2bad98,_0x16f256){const _0x31c68c=_0x5288c2,_0xdf9c5a={'XCbxK':_0x31c68c(0x27c),'SUVGO':_0x31c68c(0x24a)};if(!_0x2bad98[_0x31c68c(0x20f)][_0x31c68c(0x1ea)])return Logger['error']('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x2bad98[_0x31c68c(0x20f)]['username']+_0x31c68c(0x294)),_0x16f256[_0x31c68c(0x1ef)](0x193);const _0x45b2a9=Buffer['from'](decodeURIComponent(_0x2bad98[_0x31c68c(0x29f)][_0x31c68c(0x236)]),_0xdf9c5a['XCbxK'])['toString'](),_0x3298be=await libraryItemFilters[_0x31c68c(0x25b)]([_0x45b2a9]);Database['removeTagFromFilterData'](_0x45b2a9);let _0x1220f2=0x0;for(const _0x55315d of _0x3298be){Logger[_0x31c68c(0x24e)](_0x31c68c(0x25e)+_0x45b2a9+_0x31c68c(0x1da)+_0x55315d[_0x31c68c(0x1ee)][_0x31c68c(0x1f0)]+'\x22'),_0x55315d['media']['tags']=_0x55315d[_0x31c68c(0x1ee)]['tags'][_0x31c68c(0x275)](_0x4449ed=>_0x4449ed!==_0x45b2a9),await _0x55315d['media'][_0x31c68c(0x1f8)]({'tags':_0x55315d['media'][_0x31c68c(0x269)]}),await _0x55315d['saveMetadataFile'](),SocketAuthority['libraryItemEmitter'](_0xdf9c5a[_0x31c68c(0x278)],_0x55315d),_0x1220f2++;}_0x16f256[_0x31c68c(0x24d)]({'numItemsUpdated':_0x1220f2});}async['getAllGenres'](_0x441324,_0x50f47e){const _0x1fb4b=_0x5288c2,_0x44fd42={'BSBao':'genres','NSdrG':_0x1fb4b(0x1de)};if(!_0x441324['user'][_0x1fb4b(0x1ea)])return Logger[_0x1fb4b(0x2b2)](_0x1fb4b(0x2ba)+_0x441324['user'][_0x1fb4b(0x221)]+_0x1fb4b(0x1f1)),_0x50f47e['sendStatus'](0x193);const _0x3a5990=[],_0x24193b=await Database[_0x1fb4b(0x230)][_0x1fb4b(0x2bf)]({'attributes':[_0x44fd42[_0x1fb4b(0x21c)]],'where':Sequelize['where'](Sequelize['fn'](_0x1fb4b(0x1de),Sequelize[_0x1fb4b(0x2bb)](_0x44fd42[_0x1fb4b(0x21c)])),{[Sequelize['Op']['gt']]:0x0})});for(const _0x423c0f of _0x24193b){if(_0x1fb4b(0x22d)!=='CuUQi')return _0x6bec41[_0x1fb4b(0x2b2)](_0x1fb4b(0x22e)+_0xebcbe6+'\x22'),_0x58a832['status'](0x190)[_0x1fb4b(0x27f)](_0x1fb4b(0x267));else for(const _0x2997b2 of _0x423c0f[_0x1fb4b(0x202)]){if(!_0x3a5990['includes'](_0x2997b2))_0x3a5990[_0x1fb4b(0x2b7)](_0x2997b2);}}const _0x1211da=await Database[_0x1fb4b(0x28a)][_0x1fb4b(0x2bf)]({'attributes':['genres'],'where':Sequelize['where'](Sequelize['fn'](_0x44fd42[_0x1fb4b(0x277)],Sequelize['col'](_0x1fb4b(0x202))),{[Sequelize['Op']['gt']]:0x0})});for(const _0x1c5a5a of _0x1211da){for(const _0x4e2e30 of _0x1c5a5a['genres']){if(!_0x3a5990['includes'](_0x4e2e30))_0x3a5990[_0x1fb4b(0x2b7)](_0x4e2e30);}}_0x50f47e[_0x1fb4b(0x24d)]({'genres':_0x3a5990});}async[_0x5288c2(0x1fa)](_0x170ead,_0x220c9f){const _0x213b21=_0x5288c2,_0x426bd3={'luMCL':'VhLJD','ivcxB':_0x213b21(0x22f),'KtDaE':function(_0x28d69b,_0x3e293a){return _0x28d69b!==_0x3e293a;},'OTemZ':'bmYlU','TyueI':_0x213b21(0x24a)};if(!_0x170ead[_0x213b21(0x20f)][_0x213b21(0x1ea)])return Logger[_0x213b21(0x2b2)](_0x213b21(0x2ba)+_0x170ead[_0x213b21(0x20f)][_0x213b21(0x221)]+_0x213b21(0x1f5)),_0x220c9f[_0x213b21(0x1ef)](0x193);const _0x221361=_0x170ead[_0x213b21(0x288)][_0x213b21(0x257)],_0x27a3e1=_0x170ead['body']['newGenre'];if(!_0x221361||!_0x27a3e1)return Logger[_0x213b21(0x2b2)]('[MiscController]\x20Invalid\x20request\x20body\x20for\x20renameGenre'),_0x220c9f['sendStatus'](0x190);let _0x3c17b3=![],_0x48dea1=0x0;Database[_0x213b21(0x285)](_0x221361,_0x27a3e1);const _0x93f1a3=await libraryItemFilters[_0x213b21(0x1f2)]([_0x221361,_0x27a3e1]);for(const _0x1d9c93 of _0x93f1a3){_0x1d9c93[_0x213b21(0x1ee)][_0x213b21(0x202)][_0x213b21(0x209)](_0x27a3e1)&&(_0x3c17b3=!![]);if(_0x1d9c93['media'][_0x213b21(0x202)][_0x213b21(0x209)](_0x221361)){if(_0x426bd3[_0x213b21(0x245)]===_0x426bd3[_0x213b21(0x261)])return _0x4876df[_0x213b21(0x2b2)](_0x213b21(0x256)+_0x1d6523+_0x213b21(0x1d7)+_0x318f59+_0x213b21(0x24f)+_0x38c5be+'\x22'),_0x4b9fe7['sendStatus'](0x190);else{_0x1d9c93[_0x213b21(0x1ee)]['genres']=_0x1d9c93[_0x213b21(0x1ee)][_0x213b21(0x202)][_0x213b21(0x275)](_0x1ea75f=>_0x1ea75f!==_0x221361);if(!_0x1d9c93[_0x213b21(0x1ee)][_0x213b21(0x202)]['includes'](_0x27a3e1)){if(_0x426bd3[_0x213b21(0x1fd)](_0x426bd3[_0x213b21(0x1d1)],'bmYlU')){if(_0x1207b9[_0x213b21(0x209)](_0x29403c)&&!_0x5dc446['serverSettings'][_0x213b21(0x23a)][_0x213b21(0x209)](_0x26ce27))_0x20bc37['info']('[MiscController]\x20Disabling\x20active\x20auth\x20method\x20\x22'+_0x2ce423+'\x22'),this[_0x213b21(0x239)][_0x213b21(0x274)](_0xce61c);else!_0x2153f9[_0x213b21(0x209)](_0x2d347a)&&_0x82b7da[_0x213b21(0x21a)][_0x213b21(0x23a)][_0x213b21(0x209)](_0x47ba18)&&(_0x4c3c7[_0x213b21(0x1d9)](_0x213b21(0x29c)+_0x81d2ec+'\x22'),this[_0x213b21(0x239)][_0x213b21(0x290)](_0x17f5c4));}else _0x1d9c93[_0x213b21(0x1ee)][_0x213b21(0x202)][_0x213b21(0x2b7)](_0x27a3e1);}Logger[_0x213b21(0x24e)](_0x213b21(0x26a)+_0x221361+_0x213b21(0x234)+_0x27a3e1+'\x22\x20for\x20item\x20\x22'+_0x1d9c93[_0x213b21(0x1ee)][_0x213b21(0x1f0)]+'\x22'),await _0x1d9c93[_0x213b21(0x1ee)][_0x213b21(0x1f8)]({'genres':_0x1d9c93[_0x213b21(0x1ee)][_0x213b21(0x202)]}),await _0x1d9c93[_0x213b21(0x20d)](),SocketAuthority[_0x213b21(0x2ad)](_0x426bd3[_0x213b21(0x27a)],_0x1d9c93),_0x48dea1++;}}}_0x220c9f['json']({'genreMerged':_0x3c17b3,'numItemsUpdated':_0x48dea1});}async[_0x5288c2(0x29d)](_0x2fb590,_0x2b1ec6){const _0x3f2106=_0x5288c2,_0x2fd083={'oXkjC':'base64'};if(!_0x2fb590[_0x3f2106(0x20f)][_0x3f2106(0x1ea)])return Logger['error'](_0x3f2106(0x2ba)+_0x2fb590[_0x3f2106(0x20f)][_0x3f2106(0x221)]+'\x22\x20attempted\x20to\x20deleteGenre'),_0x2b1ec6[_0x3f2106(0x1ef)](0x193);const _0x4d7ccc=Buffer['from'](decodeURIComponent(_0x2fb590[_0x3f2106(0x29f)][_0x3f2106(0x257)]),_0x2fd083['oXkjC'])[_0x3f2106(0x259)]();Database[_0x3f2106(0x2a1)](_0x4d7ccc);const _0x5ec3b5=await libraryItemFilters[_0x3f2106(0x1f2)]([_0x4d7ccc]);let _0x5092db=0x0;for(const _0x4154e9 of _0x5ec3b5){const _0x38932c=_0x3f2106(0x251)[_0x3f2106(0x201)]('|');let _0x2880fe=0x0;while(!![]){switch(_0x38932c[_0x2880fe++]){case'0':Logger[_0x3f2106(0x24e)](_0x3f2106(0x21f)+_0x4d7ccc+_0x3f2106(0x1da)+_0x4154e9[_0x3f2106(0x1ee)][_0x3f2106(0x1f0)]+'\x22');continue;case'1':await _0x4154e9[_0x3f2106(0x1ee)][_0x3f2106(0x1f8)]({'genres':_0x4154e9[_0x3f2106(0x1ee)][_0x3f2106(0x202)]});continue;case'2':SocketAuthority[_0x3f2106(0x2ad)](_0x3f2106(0x24a),_0x4154e9);continue;case'3':await _0x4154e9['saveMetadataFile']();continue;case'4':_0x4154e9[_0x3f2106(0x1ee)]['genres']=_0x4154e9['media'][_0x3f2106(0x202)][_0x3f2106(0x275)](_0x42d670=>_0x42d670!==_0x4d7ccc);continue;case'5':_0x5092db++;continue;}break;}}_0x2b1ec6[_0x3f2106(0x24d)]({'numItemsUpdated':_0x5092db});}['updateWatchedPath'](_0x124377,_0x423804){const _0x7ecf4c=_0x5288c2,_0x363ad={'LMHCd':'add','PuBtx':_0x7ecf4c(0x1f7)};if(!_0x124377['user'][_0x7ecf4c(0x1ea)])return Logger[_0x7ecf4c(0x2b2)]('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x124377[_0x7ecf4c(0x20f)]['username']+_0x7ecf4c(0x252)),_0x423804[_0x7ecf4c(0x1ef)](0x193);const _0x425c57=_0x124377[_0x7ecf4c(0x288)][_0x7ecf4c(0x283)],_0x50b699=_0x124377[_0x7ecf4c(0x288)]['path'],_0x4ae6cf=_0x124377['body'][_0x7ecf4c(0x1df)];if(!_0x425c57||!_0x50b699||!_0x4ae6cf)return Logger['error'](_0x7ecf4c(0x256)+_0x425c57+_0x7ecf4c(0x1d7)+_0x50b699+_0x7ecf4c(0x24f)+_0x4ae6cf+'\x22'),_0x423804['sendStatus'](0x190);switch(_0x4ae6cf){case _0x363ad[_0x7ecf4c(0x2aa)]:Watcher[_0x7ecf4c(0x2b1)](_0x425c57,_0x50b699);break;case _0x363ad['PuBtx']:Watcher[_0x7ecf4c(0x23f)](_0x425c57,_0x50b699);break;case'rename':const _0x156dfa=_0x124377[_0x7ecf4c(0x288)]['oldPath'];if(!_0x156dfa)return Logger[_0x7ecf4c(0x2b2)](_0x7ecf4c(0x1d8)),_0x423804[_0x7ecf4c(0x1ef)](0x190);Watcher['onFileRename'](_0x425c57,_0x156dfa,_0x50b699);break;default:Logger[_0x7ecf4c(0x2b2)]('[MiscController]\x20Invalid\x20type\x20for\x20updateWatchedPath.\x20type:\x20\x22'+_0x4ae6cf+'\x22');return _0x423804[_0x7ecf4c(0x1ef)](0x190);}_0x423804['sendStatus'](0xc8);}[_0x5288c2(0x225)](_0x16bab1,_0x31692d){const _0x27c93d=_0x5288c2,_0x4ed3ba={'SGmif':_0x27c93d(0x2cb)},_0x602a22=_0x16bab1[_0x27c93d(0x288)][_0x27c93d(0x289)];if(!_0x602a22)return'aomgM'!==_0x4ed3ba[_0x27c93d(0x28f)]?(_0x2ad5c7[_0x27c93d(0x2b2)]('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x3328a0[_0x27c93d(0x20f)]['username']+_0x27c93d(0x1e6)),_0x5688fa[_0x27c93d(0x1ef)](0x193)):_0x31692d[_0x27c93d(0x1ef)](0x190);try{patternValidation(_0x602a22),_0x31692d[_0x27c93d(0x1ef)](0xc8);}catch(_0xebe9e8){Logger[_0x27c93d(0x224)](_0x27c93d(0x1e8)+_0x602a22,_0xebe9e8[_0x27c93d(0x2a2)]),_0x31692d['status'](0x190)['send'](_0xebe9e8[_0x27c93d(0x2a2)]);}}[_0x5288c2(0x2c4)](_0x2da014,_0xffa7f8){const _0x2005da=_0x5288c2;if(!_0x2da014[_0x2005da(0x20f)][_0x2005da(0x1ea)])return Logger[_0x2005da(0x2b2)](_0x2005da(0x2ba)+_0x2da014[_0x2005da(0x20f)]['username']+_0x2005da(0x25c)),_0xffa7f8[_0x2005da(0x1ef)](0x193);return _0xffa7f8[_0x2005da(0x24d)](Database[_0x2005da(0x21a)][_0x2005da(0x1f6)]);}async[_0x5288c2(0x212)](_0x493441,_0x10c2dd){const _0x3395d5=_0x5288c2,_0x422bd9={'QcOqq':_0x3395d5(0x26b),'MNzNm':function(_0x1ea860,_0xd84695){return _0x1ea860===_0xd84695;},'AKaVS':'RsgFy','PTLqA':function(_0x3fd8f8,_0x3369a0){return _0x3fd8f8(_0x3369a0);},'Ccwaz':_0x3395d5(0x1dd),'djMVu':function(_0x3ac0ed,_0xcaa8ff){return _0x3ac0ed===_0xcaa8ff;},'tiDwj':function(_0x843c56,_0x1cd714){return _0x843c56!==_0x1cd714;},'odgSk':_0x3395d5(0x220),'Rrnav':_0x3395d5(0x2b6),'bZBHk':function(_0x55e47e,_0x5680e2){return _0x55e47e===_0x5680e2;},'WsAyq':_0x3395d5(0x266),'AfZtR':_0x3395d5(0x200),'AWRpl':_0x3395d5(0x213),'DsbuJ':'rUYRs','DVaxX':function(_0x359dc4,_0x479249){return _0x359dc4!=_0x479249;},'UQNfj':'authOpenIDSubfolderForRedirectURLs'};if(!_0x493441[_0x3395d5(0x20f)][_0x3395d5(0x1ea)])return Logger[_0x3395d5(0x2b2)]('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x493441[_0x3395d5(0x20f)][_0x3395d5(0x221)]+_0x3395d5(0x1e6)),_0x10c2dd['sendStatus'](0x193);const _0x48c924=_0x493441[_0x3395d5(0x288)];if(!_0x422bd9[_0x3395d5(0x23d)](isObject,_0x48c924))return _0x10c2dd[_0x3395d5(0x2c8)](0x190)['send'](_0x422bd9['Ccwaz']);let _0x52ddef=![];const _0x1afe7d=Database['serverSettings'][_0x3395d5(0x1f6)],_0x1c8ca0=[..._0x1afe7d[_0x3395d5(0x23a)]];for(const _0x46e32 in _0x1afe7d){if(_0x422bd9['djMVu'](_0x48c924[_0x46e32],undefined))continue;if(_0x46e32===_0x3395d5(0x23a)){let _0x5b8011=_0x48c924[_0x46e32]?.[_0x3395d5(0x275)]?.(_0x3fa26c=>Database['serverSettings']['supportedAuthMethods'][_0x3395d5(0x209)](_0x3fa26c));if(Array['isArray'](_0x5b8011)&&_0x5b8011[_0x3395d5(0x2c3)]){if(_0x422bd9[_0x3395d5(0x25f)](_0x3395d5(0x2b9),_0x422bd9[_0x3395d5(0x2c6)]))_0x5b8011[_0x3395d5(0x264)](),_0x1afe7d[_0x46e32][_0x3395d5(0x264)](),_0x422bd9['tiDwj'](_0x5b8011['join'](),_0x1afe7d[_0x46e32][_0x3395d5(0x20a)]())&&(_0x422bd9[_0x3395d5(0x223)]!==_0x3395d5(0x2b6)?_0x3b3569[_0x3395d5(0x2b7)]({'id':_0x35c7e8['id'],'titleIgnorePrefix':_0x3d81ad}):(Logger['debug'](_0x3395d5(0x2a4)+_0x1afe7d[_0x46e32][_0x3395d5(0x20a)]()+_0x3395d5(0x234)+_0x5b8011[_0x3395d5(0x20a)]()+'\x22'),Database[_0x3395d5(0x21a)][_0x46e32]=_0x5b8011,_0x52ddef=!![]));else{if(!_0x1e3c11[_0x3395d5(0x209)](_0x14ad32))_0x39c170[_0x3395d5(0x2b7)](_0x99b318);}}else Logger[_0x3395d5(0x224)](_0x3395d5(0x298));}else{if(_0x422bd9['bZBHk'](_0x46e32,_0x3395d5(0x295))){function _0x3381a3(_0x14d1e7){const _0x53b660=_0x3395d5;if(_0x53b660(0x26b)!==_0x422bd9[_0x53b660(0x1f9)]){const _0x10ef5e=_0x36f580[_0x53b660(0x288)][_0x53b660(0x289)];if(!_0x10ef5e)return _0x54a157['sendStatus'](0x190);try{_0x49259a(_0x10ef5e),_0x49afed[_0x53b660(0x1ef)](0xc8);}catch(_0xa76e5c){_0x1acf77[_0x53b660(0x224)](_0x53b660(0x1e8)+_0x10ef5e,_0xa76e5c['message']),_0x452b3d[_0x53b660(0x2c8)](0x190)['send'](_0xa76e5c[_0x53b660(0x2a2)]);}}else{if(typeof _0x14d1e7!=='string')return![];const _0x25439d=new RegExp(_0x53b660(0x238),'i');return _0x25439d[_0x53b660(0x250)](_0x14d1e7);}}const _0xeb463f=_0x48c924[_0x46e32];if(!Array[_0x3395d5(0x217)](_0xeb463f)||_0xeb463f[_0x3395d5(0x209)]('*')&&_0xeb463f[_0x3395d5(0x2c3)]>0x1||_0xeb463f['some'](_0x52d64f=>_0x52d64f!=='*'&&!_0x3381a3(_0x52d64f))){Logger[_0x3395d5(0x224)](_0x3395d5(0x281));continue;}(Database['serverSettings'][_0x46e32][_0x3395d5(0x21d)](_0x417a2c=>!_0xeb463f[_0x3395d5(0x209)](_0x417a2c))||_0xeb463f[_0x3395d5(0x21d)](_0x500b33=>!Database[_0x3395d5(0x21a)][_0x46e32][_0x3395d5(0x209)](_0x500b33)))&&(Logger[_0x3395d5(0x24e)]('[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22'+_0x46e32+_0x3395d5(0x2be)+Database[_0x3395d5(0x21a)][_0x46e32]+_0x3395d5(0x234)+_0xeb463f+'\x22'),Database[_0x3395d5(0x21a)][_0x46e32]=_0xeb463f,_0x52ddef=!![]);}else{const _0xaafceb=typeof _0x48c924[_0x46e32];if([_0x3395d5(0x1e9),_0x422bd9[_0x3395d5(0x27e)]][_0x3395d5(0x209)](_0x46e32)){if(_0x422bd9[_0x3395d5(0x25f)](_0xaafceb,_0x422bd9['AfZtR'])){Logger['warn'](_0x3395d5(0x1eb)+_0x46e32+_0x3395d5(0x1e3));continue;}}else{if(_0x48c924[_0x46e32]!==null&&_0xaafceb!==_0x422bd9[_0x3395d5(0x270)]){if(_0x422bd9[_0x3395d5(0x25f)](_0x422bd9[_0x3395d5(0x1e0)],_0x422bd9['DsbuJ']))for(const _0xbbf1c7 of _0x47adbf[_0x3395d5(0x269)]){if(!_0x1b15a2[_0x3395d5(0x209)](_0xbbf1c7))_0x4f2614[_0x3395d5(0x2b7)](_0xbbf1c7);}else{Logger[_0x3395d5(0x224)]('[MiscController]\x20Invalid\x20value\x20for\x20'+_0x46e32+_0x3395d5(0x1e1));continue;}}}let _0x21ca10=_0x48c924[_0x46e32];if(_0x422bd9[_0x3395d5(0x28e)](_0x21ca10,'')&&_0x422bd9['DVaxX'](_0x46e32,_0x422bd9[_0x3395d5(0x2bc)]))_0x21ca10=null;let _0x330ff4=_0x1afe7d[_0x46e32];if(_0x330ff4===''&&_0x46e32!=_0x422bd9['UQNfj'])_0x330ff4=null;_0x21ca10!==_0x330ff4&&(Logger[_0x3395d5(0x24e)]('[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22'+_0x46e32+_0x3395d5(0x2be)+_0x330ff4+_0x3395d5(0x234)+_0x21ca10+'\x22'),Database[_0x3395d5(0x21a)][_0x46e32]=_0x21ca10,_0x52ddef=!![]);}}}_0x52ddef&&(await Database['updateServerSettings'](),Database[_0x3395d5(0x21a)][_0x3395d5(0x260)][_0x3395d5(0x243)](_0x1b5bdd=>{const _0x49bbf6=_0x3395d5;if(_0x1c8ca0['includes'](_0x1b5bdd)&&!Database[_0x49bbf6(0x21a)][_0x49bbf6(0x23a)][_0x49bbf6(0x209)](_0x1b5bdd)){if(_0x422bd9[_0x49bbf6(0x28e)](_0x422bd9['AKaVS'],_0x422bd9['AKaVS']))Logger['info']('[MiscController]\x20Disabling\x20active\x20auth\x20method\x20\x22'+_0x1b5bdd+'\x22'),this[_0x49bbf6(0x239)][_0x49bbf6(0x274)](_0x1b5bdd);else return _0x18382f[_0x49bbf6(0x2b2)](_0x49bbf6(0x25a)+_0x459b52['user'][_0x49bbf6(0x221)]+_0x49bbf6(0x253)),_0x587270[_0x49bbf6(0x1ef)](0x193);}else!_0x1c8ca0[_0x49bbf6(0x209)](_0x1b5bdd)&&Database[_0x49bbf6(0x21a)][_0x49bbf6(0x23a)][_0x49bbf6(0x209)](_0x1b5bdd)&&(Logger[_0x49bbf6(0x1d9)]('[MiscController]\x20Enabling\x20active\x20auth\x20method\x20\x22'+_0x1b5bdd+'\x22'),this[_0x49bbf6(0x239)][_0x49bbf6(0x290)](_0x1b5bdd));})),_0x10c2dd[_0x3395d5(0x24d)]({'updated':_0x52ddef,'serverSettings':Database[_0x3395d5(0x21a)][_0x3395d5(0x1d5)]()});}async[_0x5288c2(0x2c5)](_0x42ebca,_0xed30ad){const _0xd62574=_0x5288c2,_0x500f3b={'wFLIt':function(_0x17d76d,_0x206241){return _0x17d76d<_0x206241;},'ybkyS':function(_0x239afc,_0x3caa8d){return _0x239afc!==_0x3caa8d;},'fgWKS':_0xd62574(0x255)};if(!_0x42ebca['user'][_0xd62574(0x1ea)])return Logger[_0xd62574(0x2b2)](_0xd62574(0x2ba)+_0x42ebca[_0xd62574(0x20f)]['username']+_0xd62574(0x1d4)),_0xed30ad['sendStatus'](0x193);const _0x1fde94=Number(_0x42ebca[_0xd62574(0x29f)][_0xd62574(0x244)]);if(isNaN(_0x1fde94)||_0x500f3b[_0xd62574(0x2ae)](_0x1fde94,0x7d0)||_0x1fde94>0x270f){if(_0x500f3b['ybkyS'](_0x500f3b[_0xd62574(0x287)],'VyfQv'))return Logger[_0xd62574(0x2b2)]('[MiscController]\x20Invalid\x20year\x20\x22'+_0x1fde94+'\x22'),_0xed30ad['status'](0x190)['send']('Invalid\x20year');else{if(!_0x5e886f['includes'](_0x5bfc88))_0x2f2e3a[_0xd62574(0x2b7)](_0x526897);}}const _0x4c830c=await adminStats[_0xd62574(0x2a6)](_0x1fde94);_0xed30ad[_0xd62574(0x24d)](_0x4c830c);}async['getLoggerData'](_0x269076,_0x31b5b0){const _0x29fbb5=_0x5288c2;if(!_0x269076['user'][_0x29fbb5(0x1ea)])return Logger['error'](_0x29fbb5(0x2ba)+_0x269076[_0x29fbb5(0x20f)][_0x29fbb5(0x221)]+_0x29fbb5(0x2c0)),_0x31b5b0[_0x29fbb5(0x1ef)](0x193);_0x31b5b0[_0x29fbb5(0x24d)]({'currentDailyLogs':Logger[_0x29fbb5(0x1fe)]['getMostRecentCurrentDailyLogs']()});}}module[_0x5288c2(0x1db)]=new MiscController();function _0x27ab(){const _0x41a731=['titleIgnorePrefix','[MiscController]\x20Invalid\x20value\x20for\x20authActiveAuthMethods','zrMhM','name','getTasks','[MiscController]\x20Enabling\x20active\x20auth\x20method\x20\x22','deleteGenre','then','params','20qpjDPb','removeGenreFromFilterData','message','Failed\x20to\x20move\x20file','[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22authActiveAuthMethods\x22\x20from\x20\x22','updateCronSchedule','getStatsForYear','\x20series','ALLOW_IFRAME','551895NCxphI','LMHCd','pDPVE','handleUpload','libraryItemEmitter','wFLIt','\x22\x20attempted\x20to\x20renameTag','euPJo','onFileAdded','error','../utils/index','jwqOP','find','OTnQX','push','../libs/nodeCron/pattern-validation','jyqSR','[MiscController]\x20Non-admin\x20user\x20\x22','col','UQNfj','66tVnqoc','\x22\x20from\x20\x22','findAll','\x22\x20attempted\x20to\x20get\x20logger\x20data','Invalid\x20request,\x20no\x20files','\x20in\x20library\x20','length','getAuthSettings','getAdminStatsForYear','odgSk','../Database','status','GjURm','\x20podcasts','aomgM','express','OTemZ','trim','../managers/TaskManager','\x22\x20attempted\x20to\x20get\x20admin\x20stats\x20for\x20year','toJSONForBrowser','VwjDS','\x22,\x20path:\x20\x22','[MiscController]\x20Invalid\x20request\x20body\x20for\x20updateWatchedPath.\x20oldPath\x20is\x20required\x20for\x20rename.','info','\x22\x20from\x20item\x20\x22','exports','909464uwSPrW','Invalid\x20auth\x20settings\x20update\x20object','json_array_length','type','DsbuJ','.\x20Expected\x20string\x20or\x20null','getUserLoginResponsePayload','.\x20Expected\x20boolean','map','sortingPrefixes','\x22\x20attempted\x20to\x20update\x20auth\x20settings','../Watcher','[MiscController]\x20Invalid\x20cron\x20expression\x20','authOpenIDAutoLaunch','isAdminOrUp','[MiscController]\x20Invalid\x20value\x20for\x20','getQueuedTaskData','sequelize','media','sendStatus','title','\x22\x20attempted\x20to\x20getAllGenres','getAllLibraryItemsWithGenres','queue','haDkG','\x22\x20attempted\x20to\x20renameGenre','authenticationSettings','unlink','update','QcOqq','renameGenre','2561470VoZlwu','8898588TbWLIv','KtDaE','logManager','2ocvInu','boolean','split','genres','Invalid\x20sortingPrefixes\x20in\x20request\x20body','../SocketAuthority','../utils/queries/libraryItemFilters','3203946xgyjoT','KUCjM','renameTag','includes','join','query','uukrC','saveMetadataFile','16JVCPte','user','PLDYG','zxvLt','updateAuthSettings','string','\x20files\x20to','24XqeiAx','nZQaA','isArray','RoiEU','\x22\x20for\x20item\x20\x22','serverSettings','nameIgnorePrefix','BSBao','some','ensureDir','[MiscController]\x20Remove\x20genre\x20\x22','pisxS','username','VRchf','Rrnav','warn','validateCronExpression','audioMetadataManager','MoBmA','where','Invalid\x20post\x20data','3149615iSSiAt','CyTuG','DnWxG','CuUQi','[MiscController]\x20Invalid\x20year\x20\x22','MKLbP','bookModel','Byefy','toJSON','findByIdWithFolders','\x22\x20to\x20\x22','authorize','tag','tasks','^\x5cw+://[\x5cw\x5c.-]+(/[\x5cw\x5c./-]*)*$','auth','authActiveAuthMethods','toLowerCase','IoDkM','PTLqA','[MiscController]\x20Updating\x20titleIgnorePrefix\x20on\x20','onFileRemoved','xacyc','Invalid\x20request\x20body','[MiscController]\x20Invalid\x20request\x20body\x20for\x20renameTag','forEach','year','luMCL','../utils/fileUtils','libraryModel','allowIframe','catch','item_updated','[MiscController]\x20Updating\x20nameIgnorePrefix\x20on\x20','env','json','debug','\x22,\x20type:\x20\x22','test','0|4|1|3|2|5','\x22\x20attempted\x20to\x20updateWatchedPath','\x22\x20other\x20than\x20admin\x20attempting\x20to\x20update\x20server\x20sorting\x20prefixes','\x22\x20attempted\x20to\x20getAllTags','ePooS','[MiscController]\x20Invalid\x20request\x20body\x20for\x20updateWatchedPath.\x20libraryId:\x20\x22','genre','upfJr','toString','User\x20\x22','getAllLibraryItemsWithTags','\x22\x20attempted\x20to\x20get\x20auth\x20settings','../utils/queries/adminStats','[MiscController]\x20Remove\x20tag\x20\x22','tiDwj','supportedAuthMethods','ivcxB','WHEHx','nYxeE','sort','Uploading\x20','authOpenIDAutoRegister','Invalid\x20year','fvQxx','tags','[MiscController]\x20Rename\x20genre\x20\x22','QsfAW','canUpload','457185fmYjvw','hhxeq','files','AWRpl','ZozyQ','FgcqM','Invalid\x20settings\x20update\x20object','unuseAuthStrategy','filter','include','NSdrG','SUVGO','bulkCreate','TyueI','../libs/fsExtra','base64','updateServerSettings','WsAyq','send','pADOo','[MiscController]\x20Invalid\x20value\x20for\x20authOpenIDMobileRedirectURIs','Cannot\x20disable\x20iframe\x20when\x20ALLOW_IFRAME\x20is\x20enabled\x20in\x20environment','libraryId','seriesModel','replaceGenreInFilterData','backupSchedule','fgWKS','body','expression','podcastModel','Library\x20not\x20found\x20with\x20id\x20','../Logger','libraryFolders','MNzNm','SGmif','useAuthStrategy','localeCompare','path','xLMRZ','\x22\x20attempted\x20to\x20deleteTag','authOpenIDMobileRedirectURIs','Frixd'];_0x27ab=function(){return _0x41a731;};return _0x27ab();}