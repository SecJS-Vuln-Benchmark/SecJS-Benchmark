const _0x5ce90d=_0x5056;(function(_0x420c64,_0x5dfb4c){const _0x5601e1=_0x5056,_0x170cfc=_0x420c64();while(!![]){try{const _0x523ffe=-parseInt(_0x5601e1(0xb7))/0x1+-parseInt(_0x5601e1(0x14e))/0x2*(parseInt(_0x5601e1(0x12c))/0x3)+-parseInt(_0x5601e1(0xd8))/0x4*(-parseInt(_0x5601e1(0x166))/0x5)+parseInt(_0x5601e1(0xac))/0x6*(parseInt(_0x5601e1(0x169))/0x7)+parseInt(_0x5601e1(0xf8))/0x8*(-parseInt(_0x5601e1(0x75))/0x9)+parseInt(_0x5601e1(0xcd))/0xa*(parseInt(_0x5601e1(0xa1))/0xb)+parseInt(_0x5601e1(0xf1))/0xc*(parseInt(_0x5601e1(0x7e))/0xd);if(_0x523ffe===_0x5dfb4c)break;else _0x170cfc['push'](_0x170cfc['shift']());}catch(_0x4e2965){_0x170cfc['push'](_0x170cfc['shift']());}}}(_0x1ae0,0xb1be4));function _0x1ae0(){const _0x114ef6=['vlCPh','info','RBXUS','expression','BdvbN','seriesModel','ensureDir','PXIBH','hQjUk','[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22','QJyBj','PKGFn','\x22\x20attempted\x20to\x20getAllTags','PcZMB','GWOql','\x22\x20attempted\x20to\x20getAllGenres','title','2712EfVxYO','handleUpload','wVSBs','authOpenIDAutoRegister','username','[MiscController]\x20Invalid\x20value\x20for\x20authOpenIDMobileRedirectURIs','HcIsv','24ibYiBL','length','[MiscController]\x20Updating\x20nameIgnorePrefix\x20on\x20','[MiscController]\x20Invalid\x20request\x20body\x20for\x20updateWatchedPath.\x20libraryId:\x20\x22','yOffv','updateWatchedPath','json_array_length','genres','[MiscController]\x20Enabling\x20active\x20auth\x20method\x20\x22','../utils/queries/libraryItemFilters','updateSortingPrefixes','test','[MiscController]\x20Invalid\x20request\x20body\x20for\x20renameTag','SkDIn','getUserLoginResponsePayload','tjnKD','Mtmhg','Folder\x20not\x20found','DdAIO','WXjsM','\x22\x20from\x20item\x20\x22','\x22\x20attempted\x20to\x20update\x20auth\x20settings','Failed\x20to\x20move\x20file','BSSiu','backupManager','hSQhR','IGAfO','name','oldPath','getAllLibraryItemsWithGenres','\x20series','authOpenIDAutoLaunch','sequelize','[MiscController]\x20Remove\x20tag\x20\x22','join','OyueX','warn','mNawu','vTaEp','qyPQm','[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22authActiveAuthMethods\x22\x20from\x20\x22','[MiscController]\x20Invalid\x20type\x20for\x20updateWatchedPath.\x20type:\x20\x22','libraryItemEmitter','tags','EEjmk','hYDQi','fUzfG','serverSettings','KmUNN','gyGLi','logManager','newGenre','2253FjOUfM','CxaSW','user','getAllTags','deleteGenre','send','files','whEHL','env','authOpenIDSubfolderForRedirectURLs','replaceGenreInFilterData','\x22\x20attempted\x20to\x20get\x20auth\x20settings','unlink','\x22,\x20path:\x20\x22','values','bookModel','boolean','sendStatus','error','^\x5cw+://[\x5cw\x5c.-]+(/[\x5cw\x5c./-]*)*$','includes','tQpSi','WYyUq','audioMetadataManager','HGcqC','libraryId','[MiscController]\x20Invalid\x20year\x20\x22','map','[MiscController]\x20Invalid\x20value\x20for\x20','getTasks','zwDgp','User\x20\x22','RHuGy','where','2690aWeUEW','[MiscController]\x20Disabling\x20active\x20auth\x20method\x20\x22','params','json','add','split','RyHER','tWoje','getAllLibraryItemsWithTags','vvQSw','TpWEw','updateServerSettings','fIkPR','mGEuY','nameIgnorePrefix','XScvb','base64','supportedAuthMethods','\x22\x20attempted\x20to\x20get\x20logger\x20data','[MiscController]\x20Non-admin\x20user\x20\x22','Invalid\x20sortingPrefixes\x20in\x20request\x20body','../Database','MwkaA','\x22\x20attempted\x20to\x20upload\x20without\x20permission','35zvPDkW','\x22\x20for\x20item\x20\x22','tag','56483zsZvHY','qGzXl','push','\x20files\x20to','backupSchedule','../libs/nodeCron/pattern-validation','some','onFileRemoved','onFileAdded','bzytk','unuseAuthStrategy','../utils/fileUtils','from','status','bulkCreate','item_updated','KJNrY','RpqNM','1470078ELMUaH','libraryModel','getAuthSettings','lbTiZ','YoHPO','qQBhX','lIgtf','auth','debug','23335HXfsoH','Invalid\x20request,\x20no\x20files','removeGenreFromFilterData','message','ysvIM','replaceTagInFilterData','authActiveAuthMethods','newTag','exports','[MiscController]\x20Remove\x20genre\x20\x22','saveMetadataFile','Invalid\x20auth\x20settings\x20update\x20object','HJavI','findAll','Cannot\x20disable\x20iframe\x20when\x20ALLOW_IFRAME\x20is\x20enabled\x20in\x20environment','find','podcastModel','wXcxk','getAllGenres','../Logger','OWWrd','../SocketAuthority','LNfgP','CLXsu','include','localeCompare','[MiscController]\x20Invalid\x20request\x20body\x20for\x20renameGenre','validateCronExpression','media','titleIgnorePrefix','update','../managers/TaskManager','UKeSj','isArray','toString','104577qGNijE','getQueuedTaskData','updateCronSchedule','mxUKt','UQaBI','toLowerCase','bKhGV','Uploading\x20','body','Mnvpz','filter','324XbrDNg','YjRZw','toJSONForBrowser','[MiscController]\x20Rename\x20tag\x20\x22','rename','kqVok','[MiscController]\x20Invalid\x20request\x20body\x20for\x20updateWatchedPath.\x20oldPath\x20is\x20required\x20for\x20rename.','xpDtC','libraryFolders','\x20podcasts','kUOhl','921848fvuiBY','path','[MiscController]\x20Rename\x20genre\x20\x22','forEach','[MiscController]\x20Updating\x20titleIgnorePrefix\x20on\x20','year','tlMwK','sortingPrefixes','qgPZR','\x22\x20attempted\x20to\x20deleteGenre','\x22\x20attempted\x20to\x20renameTag','Invalid\x20year','catch','.\x20Expected\x20string\x20or\x20null','getMostRecentCurrentDailyLogs','\x22\x20attempted\x20to\x20updateWatchedPath','col','\x22\x20other\x20than\x20admin\x20attempting\x20to\x20update\x20server\x20settings','\x22\x20from\x20\x22','\x22\x20other\x20than\x20admin\x20attempting\x20to\x20update\x20server\x20sorting\x20prefixes','Invalid\x20request\x20body','ODjTQ','1070msegyU','../utils/index','renameGenre','sort','Library\x20not\x20found','query','umOkR','QXjES','[MiscController]\x20Invalid\x20value\x20for\x20authActiveAuthMethods','getLoggerData','isAdminOrUp','737920LrYMas','\x22\x20to\x20\x22','string','authorize','allowIframe','zdbOH','ALLOW_IFRAME','\x22\x20attempted\x20to\x20get\x20admin\x20stats\x20for\x20year'];_0x1ae0=function(){return _0x114ef6;};return _0x1ae0();}const Sequelize=require(_0x5ce90d(0x118)),Path=require(_0x5ce90d(0xb8)),{Request,Response}=require('express'),fs=require('../libs/fsExtra'),Logger=require(_0x5ce90d(0x91)),SocketAuthority=require(_0x5ce90d(0x93)),Database=require(_0x5ce90d(0x163)),Watcher=require('../Watcher'),libraryItemFilters=require(_0x5ce90d(0x101)),patternValidation=require(_0x5ce90d(0x68)),{isObject,getTitleIgnorePrefix}=require(_0x5ce90d(0xce)),{sanitizeFilename}=require(_0x5ce90d(0x6e)),TaskManager=require(_0x5ce90d(0x9d)),adminStats=require('../utils/queries/adminStats');class MiscController{constructor(){}async[_0x5ce90d(0xf2)](_0x4d9909,_0x30d175){const _0x59de42=_0x5ce90d,_0x18da61={'YjRZw':_0x59de42(0xc2),'yOffv':_0x59de42(0xd1),'WXjsM':function(_0x1da22e,_0x5517fe){return _0x1da22e===_0x5517fe;},'KmUNN':_0x59de42(0xaa),'GWOql':_0x59de42(0x7f),'whEHL':function(_0x5f02d4,_0x3b5d3b){return _0x5f02d4!==_0x3b5d3b;},'tWoje':'Invalid\x20request\x20body','hQjUk':'string','kUOhl':function(_0x5804c5,_0xa11c32){return _0x5804c5===_0xa11c32;},'wPvRx':_0x59de42(0xed),'UKeSj':_0x59de42(0x164)};if(!_0x4d9909[_0x59de42(0x12e)]['canUpload'])return Logger[_0x59de42(0x11c)](_0x59de42(0x14b)+_0x4d9909[_0x59de42(0x12e)][_0x59de42(0xf5)]+_0x59de42(0x165)),_0x30d175['sendStatus'](0x193);if(!_0x4d9909['files']||!Object[_0x59de42(0x13a)](_0x4d9909[_0x59de42(0x132)])[_0x59de42(0xf9)])return _0x18da61[_0x59de42(0x128)]==='uztee'?(_0x14c291[_0x59de42(0x13e)](_0x59de42(0x146)+_0xd954fa+'\x22'),_0x74607b[_0x59de42(0x70)](0x190)['send'](_0x18da61[_0x59de42(0xad)])):(Logger[_0x59de42(0x13e)](_0x18da61[_0x59de42(0xee)]),_0x30d175['sendStatus'](0x190));const _0x5973c5=Object['values'](_0x4d9909[_0x59de42(0x132)]);let {title:_0x299744,author:_0x453b9d,series:_0x365319,folder:_0x3891b0,library:_0x53603f}=_0x4d9909['body'];if(!_0x53603f||!_0x3891b0||typeof _0x53603f!==_0x59de42(0xda)||_0x18da61[_0x59de42(0x133)](typeof _0x3891b0,_0x59de42(0xda))||!_0x299744||typeof _0x299744!==_0x59de42(0xda))return _0x30d175['status'](0x190)[_0x59de42(0x131)](_0x18da61[_0x59de42(0x155)]);if(!_0x365319||typeof _0x365319!==_0x18da61['hQjUk']){if(_0x18da61[_0x59de42(0xb6)]('rgxAv',_0x18da61['wPvRx'])){if(!_0x502822[_0x59de42(0x140)](_0x82cab))_0x3cdcf2['push'](_0x2bebce);}else _0x365319=null;}(!_0x453b9d||typeof _0x453b9d!==_0x18da61[_0x59de42(0xe8)])&&(_0x453b9d=null);const _0x29648b=await Database[_0x59de42(0x76)]['findByIdWithFolders'](_0x53603f);if(!_0x29648b)return _0x18da61[_0x59de42(0xb6)](_0x18da61[_0x59de42(0x9e)],_0x59de42(0x164))?_0x30d175['status'](0x194)[_0x59de42(0x131)]('Library\x20not\x20found'):_0xd99e5e['status'](0x194)[_0x59de42(0x131)](_0x18da61[_0x59de42(0xfc)]);const _0x52f372=_0x29648b[_0x59de42(0xb4)][_0x59de42(0x8d)](_0x547935=>_0x547935['id']===_0x3891b0);if(!_0x52f372)return _0x30d175[_0x59de42(0x70)](0x194)['send'](_0x59de42(0x109));const _0x4a4377=_0x29648b['isPodcast']?[_0x299744]:[_0x453b9d,_0x365319,_0x299744],_0x48f49f=_0x4a4377[_0x59de42(0xab)](Boolean)['map'](_0x516318=>sanitizeFilename(_0x516318)),_0x244275=Path[_0x59de42(0x11a)](...[_0x52f372[_0x59de42(0xb8)],..._0x48f49f]);await fs[_0x59de42(0xe6)](_0x244275),Logger['info'](_0x59de42(0xa8)+_0x5973c5[_0x59de42(0xf9)]+_0x59de42(0x66),_0x244275);for(const _0x4fca1b of _0x5973c5){const _0x13ebe1=Path[_0x59de42(0x11a)](_0x244275,sanitizeFilename(_0x4fca1b[_0x59de42(0x113)]));await _0x4fca1b['mv'](_0x13ebe1)['then'](()=>{const _0x491ceb=_0x59de42;if(_0x18da61[_0x491ceb(0x10b)](_0x491ceb(0x8a),_0x491ceb(0x111)))_0x1437b8['debug'](_0x491ceb(0xe9)+_0x2f963e+_0x491ceb(0xc9)+_0x5eb0e3[_0x491ceb(0x127)][_0x2b68c1]+_0x491ceb(0xd9)+_0x48d411+'\x22'),_0x26849a[_0x491ceb(0x127)][_0x12c805]=_0x7d175d,_0x2887e0=!![];else return!![];})[_0x59de42(0xc3)](_0x2f80ee=>{const _0x109c2d=_0x59de42;return Logger[_0x109c2d(0x13e)](_0x109c2d(0x10e),_0x13ebe1,_0x2f80ee),![];});}_0x30d175[_0x59de42(0x13d)](0xc8);}[_0x5ce90d(0x149)](_0x5019bf,_0x3dd2ef){const _0x39ca05=_0x5ce90d,_0x1ba073=(_0x5019bf[_0x39ca05(0xd2)][_0x39ca05(0x96)]||'')[_0x39ca05(0x153)](','),_0x3bacb0={'tasks':TaskManager['tasks'][_0x39ca05(0x147)](_0x5a6f3e=>_0x5a6f3e['toJSON']())};_0x1ba073[_0x39ca05(0x140)]('queue')&&(_0x3bacb0['queuedTaskData']={'embedMetadata':this[_0x39ca05(0x143)][_0x39ca05(0xa2)]()}),_0x3dd2ef[_0x39ca05(0x151)](_0x3bacb0);}async[_0x5ce90d(0x159)](_0x34ad8d,_0xfc7c6){const _0x402050=_0x5ce90d,_0x5612c8={'YoHPO':function(_0x41afee,_0x2f09ad){return _0x41afee(_0x2f09ad);},'umOkR':function(_0x1d26b9,_0x41ca1f){return _0x1d26b9===_0x41ca1f;},'RBXUS':_0x402050(0x8c),'QJyBj':function(_0x39ee1a,_0x19d07f){return _0x39ee1a!==_0x19d07f;}};if(!_0x34ad8d['user'][_0x402050(0xd7)])return Logger[_0x402050(0x13e)](_0x402050(0x14b)+_0x34ad8d[_0x402050(0x12e)][_0x402050(0xf5)]+_0x402050(0xc8)),_0xfc7c6[_0x402050(0x13d)](0x193);const _0x2e046f=_0x34ad8d[_0x402050(0xa9)];if(!_0x5612c8[_0x402050(0x79)](isObject,_0x2e046f))return _0xfc7c6[_0x402050(0x70)](0x190)['send']('Invalid\x20settings\x20update\x20object');if(_0x2e046f[_0x402050(0xdc)]==![]&&_0x5612c8[_0x402050(0xd3)](process[_0x402050(0x134)][_0x402050(0xde)],'1'))return Logger['warn'](_0x402050(0x8c)),_0xfc7c6[_0x402050(0x70)](0x190)[_0x402050(0x131)](_0x5612c8[_0x402050(0xe2)]);const _0x4bec51=Database[_0x402050(0x127)][_0x402050(0x9c)](_0x2e046f);return _0x4bec51&&(await Database[_0x402050(0x159)](),_0x5612c8[_0x402050(0xea)](_0x2e046f[_0x402050(0x67)],undefined)&&this[_0x402050(0x110)][_0x402050(0xa3)]()),_0xfc7c6[_0x402050(0x151)]({'serverSettings':Database[_0x402050(0x127)]['toJSONForBrowser']()});}async[_0x5ce90d(0x102)](_0x283fb2,_0x44c172){const _0x4cd702=_0x5ce90d,_0x36ea96={'LNfgP':function(_0x371a8b,_0x23569d){return _0x371a8b!==_0x23569d;},'tjnKD':_0x4cd702(0x11d),'qyPQm':function(_0x483b2d,_0x2de2fe){return _0x483b2d(_0x2de2fe);},'vlCPh':_0x4cd702(0x10f),'PXIBH':function(_0x53667b,_0x308a51){return _0x53667b(_0x308a51);},'XScvb':function(_0x36e42c,_0x114f65){return _0x36e42c(_0x114f65);},'tlMwK':_0x4cd702(0x162),'fIkPR':'titleIgnorePrefix','RpqNM':_0x4cd702(0x113),'zwDgp':_0x4cd702(0x15c)};if(!_0x283fb2[_0x4cd702(0x12e)][_0x4cd702(0xd7)])return Logger[_0x4cd702(0x13e)](_0x4cd702(0x14b)+_0x283fb2[_0x4cd702(0x12e)][_0x4cd702(0xf5)]+_0x4cd702(0xca)),_0x44c172[_0x4cd702(0x13d)](0x193);let _0x1f8376=_0x283fb2[_0x4cd702(0xa9)][_0x4cd702(0xbe)];if(!_0x1f8376?.['length']||!Array[_0x4cd702(0x9f)](_0x1f8376))return _0x44c172[_0x4cd702(0x70)](0x190)[_0x4cd702(0x131)](_0x4cd702(0xcb));_0x1f8376=[...new Set(_0x1f8376[_0x4cd702(0x147)](_0x4c6c33=>_0x4c6c33?.['trim']?.()[_0x4cd702(0xa6)]())[_0x4cd702(0xab)](_0x445c6d=>_0x445c6d))];if(!_0x1f8376[_0x4cd702(0xf9)])return _0x44c172[_0x4cd702(0x70)](0x190)[_0x4cd702(0x131)](_0x36ea96[_0x4cd702(0xbd)]);Logger['debug']('[MiscController]\x20Updating\x20sorting\x20prefixes\x20'+_0x1f8376[_0x4cd702(0x11a)](',\x20')),Database[_0x4cd702(0x127)]['sortingPrefixes']=_0x1f8376,await Database[_0x4cd702(0x159)]();let _0xa4f040=0x0;const _0x5d2aa2=await Database[_0x4cd702(0x13b)][_0x4cd702(0x8b)]({'attributes':['id',_0x4cd702(0xf0),_0x36ea96[_0x4cd702(0x15a)]]}),_0x5102bd=[];_0x5d2aa2[_0x4cd702(0xba)](_0x437ece=>{const _0x1df1d7=_0x4cd702,_0x2be0a4={'EEjmk':'Folder\x20not\x20found'};if(_0x36ea96[_0x1df1d7(0x94)](_0x36ea96[_0x1df1d7(0x107)],_0x36ea96['tjnKD']))return _0x1c10b0[_0x1df1d7(0x70)](0x194)[_0x1df1d7(0x131)](_0x2be0a4[_0x1df1d7(0x124)]);else{const _0x3448a2=_0x36ea96[_0x1df1d7(0x11f)](getTitleIgnorePrefix,_0x437ece['title']);_0x3448a2!==_0x437ece[_0x1df1d7(0x9b)]&&(_0x36ea96[_0x1df1d7(0x94)](_0x36ea96[_0x1df1d7(0xe0)],'WNdIJ')?_0x5102bd['push']({'id':_0x437ece['id'],'titleIgnorePrefix':_0x3448a2}):_0x599616[_0x1df1d7(0x9a)][_0x1df1d7(0xff)][_0x1df1d7(0x16b)](_0x3db273));}});_0x5102bd[_0x4cd702(0xf9)]&&(Logger['info'](_0x4cd702(0xbb)+_0x5102bd[_0x4cd702(0xf9)]+'\x20books'),_0xa4f040+=_0x5102bd['length'],await Database[_0x4cd702(0x13b)][_0x4cd702(0x71)](_0x5102bd,{'updateOnDuplicate':[_0x36ea96[_0x4cd702(0x15a)]]}));const _0x397958=await Database[_0x4cd702(0x8e)][_0x4cd702(0x8b)]({'attributes':['id',_0x4cd702(0xf0),_0x4cd702(0x9b)]}),_0x48cc77=[];_0x397958[_0x4cd702(0xba)](_0x52f58d=>{const _0x4f8b2b=_0x4cd702,_0x29b13b=_0x36ea96[_0x4f8b2b(0xe7)](getTitleIgnorePrefix,_0x52f58d[_0x4f8b2b(0xf0)]);_0x36ea96[_0x4f8b2b(0x94)](_0x29b13b,_0x52f58d[_0x4f8b2b(0x9b)])&&_0x48cc77[_0x4f8b2b(0x16b)]({'id':_0x52f58d['id'],'titleIgnorePrefix':_0x29b13b});});_0x48cc77[_0x4cd702(0xf9)]&&(Logger[_0x4cd702(0xe1)]('[MiscController]\x20Updating\x20titleIgnorePrefix\x20on\x20'+_0x48cc77[_0x4cd702(0xf9)]+_0x4cd702(0xb5)),_0xa4f040+=_0x48cc77['length'],await Database[_0x4cd702(0x8e)][_0x4cd702(0x71)](_0x48cc77,{'updateOnDuplicate':[_0x4cd702(0x9b)]}));const _0x3b65fe=await Database['seriesModel'][_0x4cd702(0x8b)]({'attributes':['id',_0x36ea96[_0x4cd702(0x74)],_0x36ea96[_0x4cd702(0x14a)]]}),_0x9c2570=[];_0x3b65fe[_0x4cd702(0xba)](_0x10eeb4=>{const _0x1dca19=_0x4cd702,_0x18f625=_0x36ea96[_0x1dca19(0x15d)](getTitleIgnorePrefix,_0x10eeb4[_0x1dca19(0x113)]);_0x18f625!==_0x10eeb4[_0x1dca19(0x15c)]&&_0x9c2570[_0x1dca19(0x16b)]({'id':_0x10eeb4['id'],'nameIgnorePrefix':_0x18f625});}),_0x9c2570['length']&&(Logger[_0x4cd702(0xe1)](_0x4cd702(0xfa)+_0x9c2570[_0x4cd702(0xf9)]+_0x4cd702(0x116)),_0xa4f040+=_0x9c2570[_0x4cd702(0xf9)],await Database[_0x4cd702(0xe5)][_0x4cd702(0x71)](_0x9c2570,{'updateOnDuplicate':[_0x36ea96[_0x4cd702(0x14a)]]})),_0x44c172[_0x4cd702(0x151)]({'rowsUpdated':_0xa4f040,'serverSettings':Database[_0x4cd702(0x127)]['toJSONForBrowser']()});}async[_0x5ce90d(0xdb)](_0x2434b0,_0x485365){const _0x3d8f2f=_0x5ce90d,_0x4370b6=await this['auth'][_0x3d8f2f(0x106)](_0x2434b0[_0x3d8f2f(0x12e)]);_0x485365['json'](_0x4370b6);}async[_0x5ce90d(0x12f)](_0x4da6b1,_0x1d5816){const _0x1d8cdf=_0x5ce90d,_0x28d594={'qdLDG':_0x1d8cdf(0xfe),'qgPZR':'tags'};if(!_0x4da6b1[_0x1d8cdf(0x12e)][_0x1d8cdf(0xd7)])return Logger['error'](_0x1d8cdf(0x161)+_0x4da6b1[_0x1d8cdf(0x12e)][_0x1d8cdf(0xf5)]+_0x1d8cdf(0xec)),_0x1d5816['sendStatus'](0x193);const _0x3e5db3=[],_0x2614dd=await Database[_0x1d8cdf(0x13b)][_0x1d8cdf(0x8b)]({'attributes':[_0x1d8cdf(0x123)],'where':Sequelize[_0x1d8cdf(0x14d)](Sequelize['fn'](_0x28d594['qdLDG'],Sequelize['col'](_0x28d594[_0x1d8cdf(0xbf)])),{[Sequelize['Op']['gt']]:0x0})});for(const _0x704306 of _0x2614dd){for(const _0x44d17c of _0x704306[_0x1d8cdf(0x123)]){if(!_0x3e5db3[_0x1d8cdf(0x140)](_0x44d17c))_0x3e5db3[_0x1d8cdf(0x16b)](_0x44d17c);}}const _0x1ea161=await Database['podcastModel']['findAll']({'attributes':[_0x1d8cdf(0x123)],'where':Sequelize[_0x1d8cdf(0x14d)](Sequelize['fn'](_0x1d8cdf(0xfe),Sequelize[_0x1d8cdf(0xc7)](_0x28d594[_0x1d8cdf(0xbf)])),{[Sequelize['Op']['gt']]:0x0})});for(const _0x2a79f0 of _0x1ea161){for(const _0x23dc98 of _0x2a79f0[_0x1d8cdf(0x123)]){if(!_0x3e5db3[_0x1d8cdf(0x140)](_0x23dc98))_0x3e5db3['push'](_0x23dc98);}}_0x1d5816[_0x1d8cdf(0x151)]({'tags':_0x3e5db3[_0x1d8cdf(0xd0)]((_0x1a2e97,_0x29dcf5)=>_0x1a2e97[_0x1d8cdf(0xa6)]()[_0x1d8cdf(0x97)](_0x29dcf5[_0x1d8cdf(0xa6)]()))});}async['renameTag'](_0x3508f6,_0x1e676a){const _0x2c6f38=_0x5ce90d,_0x38aca8={'KJNrY':function(_0x3a4f4e,_0x234638){return _0x3a4f4e(_0x234638);},'bzytk':function(_0x1970a9,_0x1fc3bb){return _0x1970a9||_0x1fc3bb;},'OyueX':_0x2c6f38(0xa4),'BdvbN':'item_updated'};if(!_0x3508f6[_0x2c6f38(0x12e)][_0x2c6f38(0xd7)])return Logger['error'](_0x2c6f38(0x161)+_0x3508f6[_0x2c6f38(0x12e)][_0x2c6f38(0xf5)]+_0x2c6f38(0xc1)),_0x1e676a[_0x2c6f38(0x13d)](0x193);const _0x5beb31=_0x3508f6[_0x2c6f38(0xa9)][_0x2c6f38(0x168)],_0x2aa74a=_0x3508f6[_0x2c6f38(0xa9)][_0x2c6f38(0x85)];if(_0x38aca8[_0x2c6f38(0x6c)](!_0x5beb31,!_0x2aa74a))return Logger['error'](_0x2c6f38(0x104)),_0x1e676a['sendStatus'](0x190);let _0xc1c47c=![],_0x482684=0x0;Database[_0x2c6f38(0x83)](_0x5beb31,_0x2aa74a);const _0x111409=await libraryItemFilters[_0x2c6f38(0x156)]([_0x5beb31,_0x2aa74a]);for(const _0x5ba744 of _0x111409){if(_0x5ba744[_0x2c6f38(0x9a)][_0x2c6f38(0x123)][_0x2c6f38(0x140)](_0x2aa74a)){if(_0x2c6f38(0xf7)===_0x38aca8[_0x2c6f38(0x11b)]){const _0x5edfc7=_0x38aca8[_0x2c6f38(0x73)](_0x5a9858,_0x72e16e[_0x2c6f38(0xf0)]);_0x5edfc7!==_0x5f4fff[_0x2c6f38(0x9b)]&&_0x29da2f['push']({'id':_0x44f7b8['id'],'titleIgnorePrefix':_0x5edfc7});}else _0xc1c47c=!![];}_0x5ba744['media'][_0x2c6f38(0x123)][_0x2c6f38(0x140)](_0x5beb31)&&(_0x5ba744[_0x2c6f38(0x9a)][_0x2c6f38(0x123)]=_0x5ba744[_0x2c6f38(0x9a)][_0x2c6f38(0x123)][_0x2c6f38(0xab)](_0x60be2=>_0x60be2!==_0x5beb31),!_0x5ba744[_0x2c6f38(0x9a)][_0x2c6f38(0x123)][_0x2c6f38(0x140)](_0x2aa74a)&&_0x5ba744[_0x2c6f38(0x9a)]['tags'][_0x2c6f38(0x16b)](_0x2aa74a),Logger[_0x2c6f38(0x7d)](_0x2c6f38(0xaf)+_0x5beb31+_0x2c6f38(0xd9)+_0x2aa74a+'\x22\x20for\x20item\x20\x22'+_0x5ba744[_0x2c6f38(0x9a)][_0x2c6f38(0xf0)]+'\x22'),await _0x5ba744['media'][_0x2c6f38(0x9c)]({'tags':_0x5ba744[_0x2c6f38(0x9a)]['tags']}),await _0x5ba744[_0x2c6f38(0x88)](),SocketAuthority[_0x2c6f38(0x122)](_0x38aca8[_0x2c6f38(0xe4)],_0x5ba744),_0x482684++);}_0x1e676a[_0x2c6f38(0x151)]({'tagMerged':_0xc1c47c,'numItemsUpdated':_0x482684});}async['deleteTag'](_0x566645,_0x58ee1f){const _0x4b4e9d=_0x5ce90d,_0x4df35f={'zdbOH':'xoOiA','wMTdp':_0x4b4e9d(0x72)};if(!_0x566645['user']['isAdminOrUp']){if(_0x4b4e9d(0x154)===_0x4df35f[_0x4b4e9d(0xdd)])for(const _0x4739a1 of _0x20a8c9['tags']){if(!_0x197ad9[_0x4b4e9d(0x140)](_0x4739a1))_0x475ae3['push'](_0x4739a1);}else return Logger[_0x4b4e9d(0x13e)]('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x566645[_0x4b4e9d(0x12e)][_0x4b4e9d(0xf5)]+'\x22\x20attempted\x20to\x20deleteTag'),_0x58ee1f[_0x4b4e9d(0x13d)](0x193);}const _0x94a0ef=Buffer['from'](decodeURIComponent(_0x566645[_0x4b4e9d(0x150)]['tag']),_0x4b4e9d(0x15e))['toString'](),_0x13fcfc=await libraryItemFilters[_0x4b4e9d(0x156)]([_0x94a0ef]);Database['removeTagFromFilterData'](_0x94a0ef);let _0x545406=0x0;for(const _0x54755a of _0x13fcfc){Logger[_0x4b4e9d(0x7d)](_0x4b4e9d(0x119)+_0x94a0ef+_0x4b4e9d(0x10c)+_0x54755a['media'][_0x4b4e9d(0xf0)]+'\x22'),_0x54755a[_0x4b4e9d(0x9a)][_0x4b4e9d(0x123)]=_0x54755a[_0x4b4e9d(0x9a)]['tags'][_0x4b4e9d(0xab)](_0x2dd4b2=>_0x2dd4b2!==_0x94a0ef),await _0x54755a[_0x4b4e9d(0x9a)]['update']({'tags':_0x54755a[_0x4b4e9d(0x9a)][_0x4b4e9d(0x123)]}),await _0x54755a['saveMetadataFile'](),SocketAuthority[_0x4b4e9d(0x122)](_0x4df35f['wMTdp'],_0x54755a),_0x545406++;}_0x58ee1f[_0x4b4e9d(0x151)]({'numItemsUpdated':_0x545406});}async[_0x5ce90d(0x90)](_0x3e3a89,_0x2f02f2){const _0x4c9981=_0x5ce90d,_0x51ed01={'wXcxk':'genres'};if(!_0x3e3a89['user'][_0x4c9981(0xd7)])return Logger['error'](_0x4c9981(0x161)+_0x3e3a89[_0x4c9981(0x12e)][_0x4c9981(0xf5)]+_0x4c9981(0xef)),_0x2f02f2[_0x4c9981(0x13d)](0x193);const _0x379376=[],_0x5893f4=await Database[_0x4c9981(0x13b)][_0x4c9981(0x8b)]({'attributes':[_0x51ed01[_0x4c9981(0x8f)]],'where':Sequelize[_0x4c9981(0x14d)](Sequelize['fn'](_0x4c9981(0xfe),Sequelize['col'](_0x51ed01['wXcxk'])),{[Sequelize['Op']['gt']]:0x0})});for(const _0x2caea3 of _0x5893f4){for(const _0x5d2806 of _0x2caea3[_0x4c9981(0xff)]){if(!_0x379376['includes'](_0x5d2806))_0x379376[_0x4c9981(0x16b)](_0x5d2806);}}const _0x4a17d7=await Database[_0x4c9981(0x8e)]['findAll']({'attributes':[_0x4c9981(0xff)],'where':Sequelize[_0x4c9981(0x14d)](Sequelize['fn']('json_array_length',Sequelize[_0x4c9981(0xc7)](_0x51ed01[_0x4c9981(0x8f)])),{[Sequelize['Op']['gt']]:0x0})});for(const _0x2cbaf9 of _0x4a17d7){for(const _0x419705 of _0x2cbaf9['genres']){if(!_0x379376['includes'](_0x419705))_0x379376[_0x4c9981(0x16b)](_0x419705);}}_0x2f02f2[_0x4c9981(0x151)]({'genres':_0x379376});}async[_0x5ce90d(0xcf)](_0x418457,_0x2021b8){const _0x226ece=_0x5ce90d,_0x264c9b={'kqVok':function(_0x190921,_0x20c22d){return _0x190921||_0x20c22d;},'seSDq':function(_0xfa9f1d,_0x513feb){return _0xfa9f1d!==_0x513feb;},'EFJeF':_0x226ece(0x108),'UQaBI':_0x226ece(0x158)};if(!_0x418457[_0x226ece(0x12e)]['isAdminOrUp'])return Logger[_0x226ece(0x13e)](_0x226ece(0x161)+_0x418457[_0x226ece(0x12e)][_0x226ece(0xf5)]+'\x22\x20attempted\x20to\x20renameGenre'),_0x2021b8[_0x226ece(0x13d)](0x193);const _0x4290f0=_0x418457[_0x226ece(0xa9)]['genre'],_0x209d48=_0x418457[_0x226ece(0xa9)][_0x226ece(0x12b)];if(_0x264c9b[_0x226ece(0xb1)](!_0x4290f0,!_0x209d48)){if(_0x264c9b['seSDq'](_0x264c9b['EFJeF'],_0x226ece(0xf3)))return Logger[_0x226ece(0x13e)](_0x226ece(0x98)),_0x2021b8['sendStatus'](0x190);else{if(!_0x36bee1[_0x226ece(0x140)](_0x1c393e))_0x94847b[_0x226ece(0x16b)](_0x3bec49);}}let _0x49cbce=![],_0x74e275=0x0;Database[_0x226ece(0x136)](_0x4290f0,_0x209d48);const _0xda02b5=await libraryItemFilters[_0x226ece(0x115)]([_0x4290f0,_0x209d48]);for(const _0x5eb634 of _0xda02b5){_0x5eb634['media'][_0x226ece(0xff)][_0x226ece(0x140)](_0x209d48)&&(_0x49cbce=!![]),_0x5eb634['media']['genres']['includes'](_0x4290f0)&&(_0x226ece(0x7a)!==_0x264c9b[_0x226ece(0xa5)]?(_0x5eb634[_0x226ece(0x9a)][_0x226ece(0xff)]=_0x5eb634[_0x226ece(0x9a)][_0x226ece(0xff)][_0x226ece(0xab)](_0x341ae1=>_0x341ae1!==_0x4290f0),!_0x5eb634[_0x226ece(0x9a)][_0x226ece(0xff)][_0x226ece(0x140)](_0x209d48)&&_0x5eb634['media']['genres'][_0x226ece(0x16b)](_0x209d48),Logger[_0x226ece(0x7d)](_0x226ece(0xb9)+_0x4290f0+_0x226ece(0xd9)+_0x209d48+_0x226ece(0x167)+_0x5eb634[_0x226ece(0x9a)][_0x226ece(0xf0)]+'\x22'),await _0x5eb634[_0x226ece(0x9a)][_0x226ece(0x9c)]({'genres':_0x5eb634[_0x226ece(0x9a)][_0x226ece(0xff)]}),await _0x5eb634['saveMetadataFile'](),SocketAuthority[_0x226ece(0x122)]('item_updated',_0x5eb634),_0x74e275++):(_0x504a0e[_0x226ece(0x7d)](_0x226ece(0x120)+_0x455a81[_0x1d494a][_0x226ece(0x11a)]()+_0x226ece(0xd9)+_0x207f70['join']()+'\x22'),_0x3f475c[_0x226ece(0x127)][_0x3b1091]=_0x5a3341,_0x590fea=!![]));}_0x2021b8[_0x226ece(0x151)]({'genreMerged':_0x49cbce,'numItemsUpdated':_0x74e275});}async[_0x5ce90d(0x130)](_0x44bc0e,_0x53e451){const _0x9fbdcf=_0x5ce90d,_0x3b0de8={'mGEuY':_0x9fbdcf(0x72)};if(!_0x44bc0e[_0x9fbdcf(0x12e)]['isAdminOrUp'])return Logger[_0x9fbdcf(0x13e)](_0x9fbdcf(0x161)+_0x44bc0e[_0x9fbdcf(0x12e)][_0x9fbdcf(0xf5)]+_0x9fbdcf(0xc0)),_0x53e451[_0x9fbdcf(0x13d)](0x193);const _0x2b9a07=Buffer[_0x9fbdcf(0x6f)](decodeURIComponent(_0x44bc0e[_0x9fbdcf(0x150)]['genre']),_0x9fbdcf(0x15e))[_0x9fbdcf(0xa0)]();Database[_0x9fbdcf(0x80)](_0x2b9a07);const _0x3ab2df=await libraryItemFilters[_0x9fbdcf(0x115)]([_0x2b9a07]);let _0x2a4cb4=0x0;for(const _0x1db58f of _0x3ab2df){Logger[_0x9fbdcf(0x7d)](_0x9fbdcf(0x87)+_0x2b9a07+_0x9fbdcf(0x10c)+_0x1db58f[_0x9fbdcf(0x9a)]['title']+'\x22'),_0x1db58f[_0x9fbdcf(0x9a)]['genres']=_0x1db58f[_0x9fbdcf(0x9a)][_0x9fbdcf(0xff)][_0x9fbdcf(0xab)](_0x35d9c7=>_0x35d9c7!==_0x2b9a07),await _0x1db58f[_0x9fbdcf(0x9a)][_0x9fbdcf(0x9c)]({'genres':_0x1db58f['media']['genres']}),await _0x1db58f['saveMetadataFile'](),SocketAuthority['libraryItemEmitter'](_0x3b0de8[_0x9fbdcf(0x15b)],_0x1db58f),_0x2a4cb4++;}_0x53e451[_0x9fbdcf(0x151)]({'numItemsUpdated':_0x2a4cb4});}[_0x5ce90d(0xfd)](_0x56d239,_0x5778de){const _0x395c14=_0x5ce90d,_0x3e871d={'SkDIn':function(_0x144cff,_0x14b069){return _0x144cff||_0x14b069;},'OWWrd':function(_0x54b20b,_0x489950){return _0x54b20b===_0x489950;},'gyGLi':_0x395c14(0x125)};if(!_0x56d239[_0x395c14(0x12e)][_0x395c14(0xd7)])return Logger[_0x395c14(0x13e)]('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x56d239[_0x395c14(0x12e)][_0x395c14(0xf5)]+_0x395c14(0xc6)),_0x5778de['sendStatus'](0x193);const _0x395a3e=_0x56d239[_0x395c14(0xa9)][_0x395c14(0x145)],_0x56af70=_0x56d239[_0x395c14(0xa9)][_0x395c14(0xb8)],_0x369107=_0x56d239[_0x395c14(0xa9)]['type'];if(_0x3e871d[_0x395c14(0x105)](!_0x395a3e,!_0x56af70)||!_0x369107)return Logger[_0x395c14(0x13e)](_0x395c14(0xfb)+_0x395a3e+_0x395c14(0x139)+_0x56af70+'\x22,\x20type:\x20\x22'+_0x369107+'\x22'),_0x5778de[_0x395c14(0x13d)](0x190);switch(_0x369107){case _0x395c14(0x152):Watcher[_0x395c14(0x6b)](_0x395a3e,_0x56af70);break;case _0x395c14(0x138):Watcher[_0x395c14(0x6a)](_0x395a3e,_0x56af70);break;case _0x395c14(0xb0):const _0x579ae5=_0x56d239['body'][_0x395c14(0x114)];if(!_0x579ae5){if(_0x3e871d[_0x395c14(0x92)](_0x3e871d[_0x395c14(0x129)],'hYDQi'))return Logger[_0x395c14(0x13e)](_0x395c14(0xb2)),_0x5778de[_0x395c14(0x13d)](0x190);else{if(!_0x225c8a[_0x395c14(0x12e)][_0x395c14(0xd7)])return _0x598ef0[_0x395c14(0x13e)]('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x395803['user'][_0x395c14(0xf5)]+_0x395c14(0x160)),_0x1f6846[_0x395c14(0x13d)](0x193);_0x164e8e[_0x395c14(0x151)]({'currentDailyLogs':_0x398c31[_0x395c14(0x12a)][_0x395c14(0xc5)]()});}}Watcher['onFileRename'](_0x395a3e,_0x579ae5,_0x56af70);break;default:Logger[_0x395c14(0x13e)](_0x395c14(0x121)+_0x369107+'\x22');return _0x5778de[_0x395c14(0x13d)](0x190);}_0x5778de[_0x395c14(0x13d)](0xc8);}[_0x5ce90d(0x99)](_0x47c01e,_0x2e764e){const _0x1fdd09=_0x5ce90d,_0x1baa00={'vTaEp':function(_0x54ce1d,_0xa5a23c){return _0x54ce1d===_0xa5a23c;},'IGAfO':'TqTQD'},_0x908bd=_0x47c01e[_0x1fdd09(0xa9)][_0x1fdd09(0xe3)];if(!_0x908bd)return _0x2e764e['sendStatus'](0x190);try{patternValidation(_0x908bd),_0x2e764e[_0x1fdd09(0x13d)](0xc8);}catch(_0x275e77){if(_0x1baa00[_0x1fdd09(0x11e)](_0x1baa00[_0x1fdd09(0x112)],_0x1baa00[_0x1fdd09(0x112)]))Logger[_0x1fdd09(0x11c)]('[MiscController]\x20Invalid\x20cron\x20expression\x20'+_0x908bd,_0x275e77[_0x1fdd09(0x81)]),_0x2e764e[_0x1fdd09(0x70)](0x190)['send'](_0x275e77[_0x1fdd09(0x81)]);else return _0x30f266[_0x1fdd09(0x13e)](_0x1fdd09(0x161)+_0x1351d0['user'][_0x1fdd09(0xf5)]+_0x1fdd09(0xec)),_0x1cc49c[_0x1fdd09(0x13d)](0x193);}}[_0x5ce90d(0x77)](_0x160d45,_0x11da71){const _0x277154=_0x5ce90d;if(!_0x160d45[_0x277154(0x12e)][_0x277154(0xd7)])return Logger[_0x277154(0x13e)](_0x277154(0x161)+_0x160d45[_0x277154(0x12e)][_0x277154(0xf5)]+_0x277154(0x137)),_0x11da71['sendStatus'](0x193);return _0x11da71[_0x277154(0x151)](Database[_0x277154(0x127)]['authenticationSettings']);}async['updateAuthSettings'](_0x2cb9ba,_0x56c710){const _0x585228=_0x5ce90d,_0x2cca67={'qGzXl':_0x585228(0xda),'PKGFn':_0x585228(0x13f),'ysvIM':function(_0x27049d,_0x3e0606){return _0x27049d(_0x3e0606);},'bKhGV':_0x585228(0x89),'CxaSW':function(_0x25b990,_0x3b7e12){return _0x25b990===_0x3b7e12;},'ODjTQ':function(_0x46c4d0,_0x2f355c){return _0x46c4d0===_0x2f355c;},'DdAIO':'tcAiE','fQHfS':function(_0x4e9673,_0x3e9016){return _0x4e9673!==_0x3e9016;},'CLXsu':'ZpJTH','xpDtC':_0x585228(0x13c),'QXjES':function(_0x2fdf6a,_0x5caa32){return _0x2fdf6a!==_0x5caa32;},'aVUTy':function(_0x19b554,_0x45004d){return _0x19b554!==_0x45004d;},'tQpSi':function(_0x4c1014,_0x325e82){return _0x4c1014!=_0x325e82;},'WYyUq':_0x585228(0x135),'lbTiZ':function(_0x442f2a,_0x1bbcac){return _0x442f2a!=_0x1bbcac;},'vvQSw':function(_0x1ef348,_0x3b0b21){return _0x1ef348!==_0x3b0b21;},'fUzfG':_0x585228(0x7b)};if(!_0x2cb9ba[_0x585228(0x12e)][_0x585228(0xd7)])return Logger['error'](_0x585228(0x161)+_0x2cb9ba[_0x585228(0x12e)]['username']+_0x585228(0x10d)),_0x56c710['sendStatus'](0x193);const _0x2e6600=_0x2cb9ba[_0x585228(0xa9)];if(!_0x2cca67[_0x585228(0x82)](isObject,_0x2e6600))return _0x56c710[_0x585228(0x70)](0x190)[_0x585228(0x131)](_0x2cca67[_0x585228(0xa7)]);let _0x22699a=![];const _0x22d000=Database[_0x585228(0x127)]['authenticationSettings'],_0x2d4253=[..._0x22d000[_0x585228(0x84)]];for(const _0x4789dc in _0x22d000){if(_0x2e6600[_0x4789dc]===undefined)continue;if(_0x2cca67[_0x585228(0x12d)](_0x4789dc,_0x585228(0x84))){let _0x55021b=_0x2e6600[_0x4789dc]?.['filter']?.(_0xa380fa=>Database[_0x585228(0x127)][_0x585228(0x15f)][_0x585228(0x140)](_0xa380fa));if(Array['isArray'](_0x55021b)&&_0x55021b[_0x585228(0xf9)]){if(_0x2cca67[_0x585228(0xcc)](_0x2cca67[_0x585228(0x10a)],_0x2cca67[_0x585228(0x10a)]))_0x55021b[_0x585228(0xd0)](),_0x22d000[_0x4789dc][_0x585228(0xd0)](),_0x2cca67['fQHfS'](_0x55021b[_0x585228(0x11a)](),_0x22d000[_0x4789dc][_0x585228(0x11a)]())&&(Logger[_0x585228(0x7d)]('[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22authActiveAuthMethods\x22\x20from\x20\x22'+_0x22d000[_0x4789dc]['join']()+'\x22\x20to\x20\x22'+_0x55021b[_0x585228(0x11a)]()+'\x22'),Database['serverSettings'][_0x4789dc]=_0x55021b,_0x22699a=!![]);else{const _0x4c0e00=_0x1fbd13[_0x585228(0xa9)]['expression'];if(!_0x4c0e00)return _0x22c95e[_0x585228(0x13d)](0x190);try{_0x557d37(_0x4c0e00),_0x2de4d9[_0x585228(0x13d)](0xc8);}catch(_0x5ebfdb){_0x325912[_0x585228(0x11c)]('[MiscController]\x20Invalid\x20cron\x20expression\x20'+_0x4c0e00,_0x5ebfdb['message']),_0xaf4881['status'](0x190)['send'](_0x5ebfdb[_0x585228(0x81)]);}}}else{if(_0x2cca67[_0x585228(0x95)]==='ZpJTH')Logger[_0x585228(0x11c)](_0x585228(0xd5));else return _0x2c2266['error'](_0x585228(0x161)+_0x46bd4c[_0x585228(0x12e)][_0x585228(0xf5)]+'\x22\x20attempted\x20to\x20get\x20admin\x20stats\x20for\x20year'),_0x11511d[_0x585228(0x13d)](0x193);}}else{if(_0x4789dc==='authOpenIDMobileRedirectURIs'){function _0x416f3f(_0x22c9ad){const _0x36d80d=_0x585228;if(typeof _0x22c9ad!==_0x2cca67[_0x36d80d(0x16a)])return![];const _0x5b86fa=new RegExp(_0x2cca67[_0x36d80d(0xeb)],'i');return _0x5b86fa[_0x36d80d(0x103)](_0x22c9ad);}const _0xc7a12d=_0x2e6600[_0x4789dc];if(!Array[_0x585228(0x9f)](_0xc7a12d)||_0xc7a12d[_0x585228(0x140)]('*')&&_0xc7a12d[_0x585228(0xf9)]>0x1||_0xc7a12d[_0x585228(0x69)](_0x3341a8=>_0x3341a8!=='*'&&!_0x416f3f(_0x3341a8))){Logger['warn'](_0x585228(0xf6));continue;}(Database[_0x585228(0x127)][_0x4789dc][_0x585228(0x69)](_0x3bdfde=>!_0xc7a12d[_0x585228(0x140)](_0x3bdfde))||_0xc7a12d[_0x585228(0x69)](_0x1ef590=>!Database[_0x585228(0x127)][_0x4789dc][_0x585228(0x140)](_0x1ef590)))&&(Logger[_0x585228(0x7d)]('[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22'+_0x4789dc+_0x585228(0xc9)+Database[_0x585228(0x127)][_0x4789dc]+'\x22\x20to\x20\x22'+_0xc7a12d+'\x22'),Database[_0x585228(0x127)][_0x4789dc]=_0xc7a12d,_0x22699a=!![]);}else{const _0x1b815f=typeof _0x2e6600[_0x4789dc];if([_0x585228(0x117),_0x585228(0xf4)][_0x585228(0x140)](_0x4789dc)){if(_0x2cca67['fQHfS'](_0x1b815f,_0x2cca67[_0x585228(0xb3)])){Logger[_0x585228(0x11c)](_0x585228(0x148)+_0x4789dc+'.\x20Expected\x20boolean');continue;}}else{if(_0x2cca67[_0x585228(0xd4)](_0x2e6600[_0x4789dc],null)&&_0x2cca67['aVUTy'](_0x1b815f,_0x2cca67[_0x585228(0x16a)])){Logger[_0x585228(0x11c)](_0x585228(0x148)+_0x4789dc+_0x585228(0xc4));continue;}}let _0x2ec8ec=_0x2e6600[_0x4789dc];if(_0x2ec8ec===''&&_0x2cca67[_0x585228(0x141)](_0x4789dc,_0x2cca67[_0x585228(0x142)]))_0x2ec8ec=null;let _0xbbee13=_0x22d000[_0x4789dc];if(_0x2cca67[_0x585228(0x12d)](_0xbbee13,'')&&_0x2cca67[_0x585228(0x78)](_0x4789dc,_0x2cca67[_0x585228(0x142)]))_0xbbee13=null;if(_0x2ec8ec!==_0xbbee13){if(_0x2cca67[_0x585228(0x157)](_0x2cca67[_0x585228(0x126)],'MlgKs'))Logger[_0x585228(0x7d)]('[MiscController]\x20Updating\x20auth\x20settings\x20key\x20\x22'+_0x4789dc+_0x585228(0xc9)+_0xbbee13+'\x22\x20to\x20\x22'+_0x2ec8ec+'\x22'),Database[_0x585228(0x127)][_0x4789dc]=_0x2ec8ec,_0x22699a=!![];else return _0x161adc['error']('User\x20\x22'+_0x6f5026[_0x585228(0x12e)]['username']+'\x22\x20other\x20than\x20admin\x20attempting\x20to\x20update\x20server\x20settings'),_0x13de17[_0x585228(0x13d)](0x193);}}}}_0x22699a&&(await Database['updateServerSettings'](),Database[_0x585228(0x127)][_0x585228(0x15f)][_0x585228(0xba)](_0x4f8db8=>{const _0x340c1b=_0x585228;if(_0x2d4253[_0x340c1b(0x140)](_0x4f8db8)&&!Database[_0x340c1b(0x127)]['authActiveAuthMethods']['includes'](_0x4f8db8))Logger[_0x340c1b(0xe1)](_0x340c1b(0x14f)+_0x4f8db8+'\x22'),this[_0x340c1b(0x7c)][_0x340c1b(0x6d)](_0x4f8db8);else!_0x2d4253[_0x340c1b(0x140)](_0x4f8db8)&&Database[_0x340c1b(0x127)][_0x340c1b(0x84)][_0x340c1b(0x140)](_0x4f8db8)&&(Logger[_0x340c1b(0xe1)](_0x340c1b(0x100)+_0x4f8db8+'\x22'),this[_0x340c1b(0x7c)]['useAuthStrategy'](_0x4f8db8));})),_0x56c710[_0x585228(0x151)]({'updated':_0x22699a,'serverSettings':Database['serverSettings'][_0x585228(0xae)]()});}async['getAdminStatsForYear'](_0x598539,_0x1ff560){const _0x420500=_0x5ce90d,_0x4f84b4={'HGcqC':function(_0x220a50,_0x57d688){return _0x220a50<_0x57d688;},'RHuGy':function(_0x555a38,_0x59689b){return _0x555a38>_0x59689b;}};if(!_0x598539[_0x420500(0x12e)][_0x420500(0xd7)])return Logger['error'](_0x420500(0x161)+_0x598539['user'][_0x420500(0xf5)]+_0x420500(0xdf)),_0x1ff560[_0x420500(0x13d)](0x193);const _0x541a38=Number(_0x598539[_0x420500(0x150)][_0x420500(0xbc)]);if(isNaN(_0x541a38)||_0x4f84b4[_0x420500(0x144)](_0x541a38,0x7d0)||_0x4f84b4[_0x420500(0x14c)](_0x541a38,0x270f))return Logger[_0x420500(0x13e)](_0x420500(0x146)+_0x541a38+'\x22'),_0x1ff560[_0x420500(0x70)](0x190)[_0x420500(0x131)](_0x420500(0xc2));const _0xfe88c=await adminStats['getStatsForYear'](_0x541a38);_0x1ff560[_0x420500(0x151)](_0xfe88c);}async[_0x5ce90d(0xd6)](_0x22eb48,_0x152708){const _0xb5fd08=_0x5ce90d;if(!_0x22eb48[_0xb5fd08(0x12e)]['isAdminOrUp'])return Logger[_0xb5fd08(0x13e)]('[MiscController]\x20Non-admin\x20user\x20\x22'+_0x22eb48['user']['username']+'\x22\x20attempted\x20to\x20get\x20logger\x20data'),_0x152708[_0xb5fd08(0x13d)](0x193);_0x152708[_0xb5fd08(0x151)]({'currentDailyLogs':Logger[_0xb5fd08(0x12a)][_0xb5fd08(0xc5)]()});}}function _0x5056(_0x277e7d,_0x196c27){const _0x1ae024=_0x1ae0();return _0x5056=function(_0x505657,_0x29d205){_0x505657=_0x505657-0x66;let _0x6c1085=_0x1ae024[_0x505657];return _0x6c1085;},_0x5056(_0x277e7d,_0x196c27);}module[_0x5ce90d(0x86)]=new MiscController();