const _0x109cb9=_0x3543;(function(_0x402489,_0x3c370e){const _0x3d4e2f=_0x3543,_0x20728b=_0x402489();while(!![]){try{const _0xdf948e=parseInt(_0x3d4e2f(0x10c))/0x1+-parseInt(_0x3d4e2f(0x176))/0x2+-parseInt(_0x3d4e2f(0x14a))/0x3*(parseInt(_0x3d4e2f(0x10a))/0x4)+parseInt(_0x3d4e2f(0x106))/0x5*(-parseInt(_0x3d4e2f(0x181))/0x6)+-parseInt(_0x3d4e2f(0x11b))/0x7+-parseInt(_0x3d4e2f(0x11e))/0x8*(-parseInt(_0x3d4e2f(0x145))/0x9)+parseInt(_0x3d4e2f(0x11a))/0xa*(parseInt(_0x3d4e2f(0x19f))/0xb);if(_0xdf948e===_0x3c370e)break;else _0x20728b['push'](_0x20728b['shift']());}catch(_0xafdbb7){_0x20728b['push'](_0x20728b['shift']());}}}(_0x3433,0xc73a0));function _0x3543(_0x7287f5,_0x4dee11){const _0x3433ae=_0x3433();return _0x3543=function(_0x3543ae,_0x2ce2fc){_0x3543ae=_0x3543ae-0x103;let _0x4beb57=_0x3433ae[_0x3543ae];return _0x4beb57;},_0x3543(_0x7287f5,_0x4dee11);}const Logger=require(_0x109cb9(0x160)),SocketAuthority=require('../SocketAuthority'),Database=require(_0x109cb9(0x154)),fs=require('../libs/fsExtra'),{getPodcastFeed,findMatchingEpisodes}=require(_0x109cb9(0x108)),{getFileTimestampsWithIno,filePathToPOSIX}=require(_0x109cb9(0x123)),{validateUrl}=require(_0x109cb9(0x115)),Scanner=require(_0x109cb9(0x12a)),CoverManager=require(_0x109cb9(0x15a)),LibraryItem=require(_0x109cb9(0x112));function _0x3433(){const _0x4cb6af=['audioFile','207254RMmpPx','checkAndDownloadNewEpisodes','smvdV','\x22\x20attempted\x20to\x20get\x20podcast\x20feed','cJrVA','getEpisodeDownloads','../objects/LibraryItem','FaFPp','params','../utils/index','createLibraryItem','checkNewEpisodes','sendStatus','updateLibraryItem','10VTyLJr','1160306EqdyFV','Podcast\x20does\x20not\x20have\x20an\x20RSS\x20feed\x20URL','Nyfmh','24RyHHZi','metadata','remove','\x22\x20has\x20no\x20more\x20items\x20-\x20removing\x20it','POST','../utils/fileUtils','hQsgX','episodesToDownload','playlist','Ppnag','[PodcastController]\x20Removed\x20','hard','../scanner/Scanner','limit','body','status','user','map','playlist_removed','username','emGEf','userId','uKVSf','PATCH','warn','[PodcastController]\x20Non-admin\x20user\x20attempted\x20to\x20check/download\x20episodes','quickMatchEpisodes','podcastManager','wcCao','episodeId','[PodcastController]\x20User\x20attempted\x20to\x20delete\x20without\x20permission','[PodcastController]\x20findEpisode:\x20Podcast\x20has\x20no\x20feed\x20url','libraryItemModel','error','name','clearEpisodeDownloadQueue','DEsxp','playlistMediaItems','\x20not\x20found\x20for\x20item\x20','574326vvnUMw','DMXkx','Library\x20not\x20found','NiTsu','findEpisode','18gttOqy','feedUrl','catch','[PodcastController]\x20Non-admin\x20user\x20attempted\x20to\x20download\x20episodes','\x22:\x20','isAdminOrUp','downloadEpisodes','DRGYj','\x22\x20attempted\x20to\x20create\x20podcast','count','../Database','title','clientEmitter','getPodcastFeed','coverPath','\x20episode\x20downloads','../managers/CoverManager','MWvTm','[PodcastController]\x20User\x20attempted\x20to\x20update\x20without\x20permission','query','getOldById','folderId','../Logger','[PodcastController]\x20Create:\x20Library\x20not\x20found\x20\x22','updateEpisode','[PodcastController]\x20Podcast\x20created\x20now\x20starting\x20','[PodcastController]\x20Create:\x20Folder\x20not\x20found\x20\x22','xcXty','replace','clearDownloadQueue','[PodcastController]\x20Failed\x20to\x20hard\x20delete\x20episode\x20file\x20at\x20\x22','[PodcastController]\x20getEpisode\x20episode\x20','getOPMLFeeds','downloadPodcastEpisodes','auXIm','chYqQ','checkCanAccessLibraryItem','item_updated','mQvDU','Podcast\x20already\x20exists','playlistModel','podcast','episodes','libraryId','583242qdepPT','mtimeMs','libraryItem','destroy','isPodcast','getEpisode','Episode\x20not\x20found','rssFeed','[PodcastController]\x20checkNewEpisodes\x20no\x20feed\x20url\x20for\x20item\x20','method','fullPath','12ezQBgx','then','[PodcastController]\x20Non-admin\x20user\x20attempting\x20to\x20clear\x20download\x20queue\x20\x22','path','[PodcastController]\x20Hard\x20deleted\x20episode\x20file\x20at\x20\x22','getFeedsFromOPMLText','ctimeMs','ino','emitter','getEpisodeDownloadsInQueue','json','nthAc','ZPDRc','canDelete','media','opmlText','toJSONExpanded','checkHasEpisode','setData','playlistMediaItemModel','find','toJSONForClient','\x20media\x20progress\x20for\x20episode\x20','[PodcastController]\x20Download\x20cover\x20error\x20from\x20\x22','[PodcastController]\x20Failed\x20to\x20ensure\x20podcast\x20dir\x20\x22','removeEpisode','toJSON','Invalid\x20request\x20body.\x20\x22rssFeed\x22\x20must\x20be\x20a\x20valid\x20URL','checkUpdatePodcastCron','Podcast\x20RSS\x20feed\x20request\x20failed\x20or\x20invalid\x20response\x20data','32364497xVByDB','getOldJsonExpanded','[PodcastController]\x20Podcast\x20already\x20exists\x20at\x20path\x20\x22','WRlyK','YkjZe','quickMatchPodcastEpisodes','canUpdate','fKcti','cover','yezSl','cronManager','downloadCoverFromUrl','[PodcastController]\x20Non-admin\x20user\x20\x22','nHtJz','[PodcastController]\x20Playlist\x20\x22','imageUrl','info','DELETE','exports','send','1916345yiXOay','length','../utils/podcastUtils','startsWith','867316tCdcHe'];_0x3433=function(){return _0x4cb6af;};return _0x3433();}class PodcastController{async['create'](_0x20ec2a,_0x28451d){const _0x2b65b0=_0x109cb9,_0x275e0b={'YkjZe':function(_0x3e996f,_0x78b4ee){return _0x3e996f(_0x78b4ee);},'MWvTm':function(_0x2e3f77,_0x5c09d0){return _0x2e3f77(_0x5c09d0);},'uKVSf':_0x2b65b0(0x173)};if(!_0x20ec2a[_0x2b65b0(0x12e)][_0x2b65b0(0x14f)])return Logger[_0x2b65b0(0x13f)]('[PodcastController]\x20Non-admin\x20user\x20\x22'+_0x20ec2a[_0x2b65b0(0x12e)][_0x2b65b0(0x131)]+_0x2b65b0(0x152)),_0x28451d[_0x2b65b0(0x118)](0x193);const _0x1aa6ca=_0x20ec2a[_0x2b65b0(0x12c)],_0x2be53f=await Database['libraryModel'][_0x2b65b0(0x15e)](_0x1aa6ca[_0x2b65b0(0x175)]);if(!_0x2be53f)return Logger[_0x2b65b0(0x13f)](_0x2b65b0(0x161)+_0x1aa6ca[_0x2b65b0(0x175)]+'\x22'),_0x28451d[_0x2b65b0(0x12d)](0x194)['send'](_0x2b65b0(0x147));const _0x3b84e7=_0x2be53f['folders'][_0x2b65b0(0x195)](_0x214e4b=>_0x214e4b['id']===_0x1aa6ca['folderId']);if(!_0x3b84e7)return Logger[_0x2b65b0(0x13f)](_0x2b65b0(0x164)+_0x1aa6ca[_0x2b65b0(0x15f)]+'\x22'),_0x28451d[_0x2b65b0(0x12d)](0x194)[_0x2b65b0(0x105)]('Folder\x20not\x20found');const _0xc03d2a=_0x275e0b[_0x2b65b0(0x1a3)](filePathToPOSIX,_0x1aa6ca[_0x2b65b0(0x184)]),_0x2f393f=await Database[_0x2b65b0(0x13e)][_0x2b65b0(0x153)]({'where':{'path':_0xc03d2a}})>0x0;if(_0x2f393f)return Logger[_0x2b65b0(0x13f)](_0x2b65b0(0x1a1)+_0xc03d2a+'\x22'),_0x28451d[_0x2b65b0(0x12d)](0x190)[_0x2b65b0(0x105)](_0x2b65b0(0x171));const _0x4a0722=await fs['ensureDir'](_0xc03d2a)['then'](()=>!![])['catch'](_0x3690e0=>{const _0x4b030c=_0x2b65b0;return Logger[_0x4b030c(0x13f)](_0x4b030c(0x199)+_0xc03d2a+'\x22',_0x3690e0),![];});if(!_0x4a0722)return _0x28451d[_0x2b65b0(0x12d)](0x190)[_0x2b65b0(0x105)]('Invalid\x20podcast\x20path');const _0x289292=await _0x275e0b[_0x2b65b0(0x15b)](getFileTimestampsWithIno,_0xc03d2a);let _0x47e3de=_0x1aa6ca[_0x2b65b0(0x184)][_0x2b65b0(0x166)](_0x3b84e7[_0x2b65b0(0x180)],'');if(_0x47e3de[_0x2b65b0(0x109)]('/'))_0x47e3de=_0x47e3de['slice'](0x1);const _0x5eeaec={'path':_0xc03d2a,'relPath':_0x47e3de,'folderId':_0x1aa6ca[_0x2b65b0(0x15f)],'libraryId':_0x1aa6ca[_0x2b65b0(0x175)],'ino':_0x289292[_0x2b65b0(0x188)],'mtimeMs':_0x289292[_0x2b65b0(0x177)]||0x0,'ctimeMs':_0x289292[_0x2b65b0(0x187)]||0x0,'birthtimeMs':_0x289292['birthtimeMs']||0x0,'media':_0x1aa6ca[_0x2b65b0(0x18f)]},_0x19a068=new LibraryItem();_0x19a068[_0x2b65b0(0x193)](_0x275e0b[_0x2b65b0(0x134)],_0x5eeaec);if(_0x1aa6ca[_0x2b65b0(0x18f)][_0x2b65b0(0x11f)]['imageUrl']){const _0x3ab1e7=await CoverManager[_0x2b65b0(0x1aa)](_0x19a068,_0x1aa6ca[_0x2b65b0(0x18f)][_0x2b65b0(0x11f)][_0x2b65b0(0x1ae)],!![]);if(_0x3ab1e7){if(_0x3ab1e7[_0x2b65b0(0x13f)])Logger[_0x2b65b0(0x13f)](_0x2b65b0(0x198)+_0x1aa6ca[_0x2b65b0(0x18f)]['metadata'][_0x2b65b0(0x1ae)]+_0x2b65b0(0x14e)+_0x3ab1e7[_0x2b65b0(0x13f)]);else _0x3ab1e7[_0x2b65b0(0x1a7)]&&(_0x19a068[_0x2b65b0(0x18f)][_0x2b65b0(0x158)]=_0x3ab1e7[_0x2b65b0(0x1a7)]);}}await Database[_0x2b65b0(0x116)](_0x19a068),SocketAuthority[_0x2b65b0(0x189)]('item_added',_0x19a068[_0x2b65b0(0x191)]()),_0x28451d['json'](_0x19a068[_0x2b65b0(0x191)]()),_0x1aa6ca[_0x2b65b0(0x125)]?.[_0x2b65b0(0x107)]&&(Logger[_0x2b65b0(0x1af)](_0x2b65b0(0x163)+_0x1aa6ca['episodesToDownload'][_0x2b65b0(0x107)]+_0x2b65b0(0x159)),this[_0x2b65b0(0x139)][_0x2b65b0(0x16b)](_0x19a068,_0x1aa6ca[_0x2b65b0(0x125)])),_0x19a068[_0x2b65b0(0x18f)]['autoDownloadEpisodes']&&this[_0x2b65b0(0x1a9)][_0x2b65b0(0x19d)](_0x19a068);}async[_0x109cb9(0x157)](_0x512ad0,_0x201b56){const _0x90fd9b=_0x109cb9,_0x5f28c1={'ZPDRc':function(_0x86dae1,_0x5ea282){return _0x86dae1(_0x5ea282);},'nGRky':_0x90fd9b(0x19c),'DMXkx':_0x90fd9b(0x19e)};if(!_0x512ad0[_0x90fd9b(0x12e)][_0x90fd9b(0x14f)])return Logger[_0x90fd9b(0x13f)]('[PodcastController]\x20Non-admin\x20user\x20\x22'+_0x512ad0[_0x90fd9b(0x12e)][_0x90fd9b(0x131)]+_0x90fd9b(0x10f)),_0x201b56[_0x90fd9b(0x118)](0x193);const _0x1f1656=_0x5f28c1[_0x90fd9b(0x18d)](validateUrl,_0x512ad0['body'][_0x90fd9b(0x17d)]);if(!_0x1f1656)return _0x201b56['status'](0x190)[_0x90fd9b(0x105)](_0x5f28c1['nGRky']);const _0x411de4=await getPodcastFeed(_0x1f1656);if(!_0x411de4)return _0x201b56['status'](0x194)[_0x90fd9b(0x105)](_0x5f28c1[_0x90fd9b(0x146)]);_0x201b56[_0x90fd9b(0x18b)]({'podcast':_0x411de4});}async[_0x109cb9(0x186)](_0x4c0d42,_0x68b985){const _0x5b6279=_0x109cb9;if(!_0x4c0d42['user'][_0x5b6279(0x14f)])return Logger[_0x5b6279(0x13f)](_0x5b6279(0x1ab)+_0x4c0d42[_0x5b6279(0x12e)]['username']+'\x22\x20attempted\x20to\x20get\x20feeds\x20from\x20opml'),_0x68b985[_0x5b6279(0x118)](0x193);if(!_0x4c0d42[_0x5b6279(0x12c)][_0x5b6279(0x190)])return _0x68b985[_0x5b6279(0x118)](0x190);const _0x5237bf=await this[_0x5b6279(0x139)][_0x5b6279(0x16a)](_0x4c0d42[_0x5b6279(0x12c)][_0x5b6279(0x190)]);_0x68b985['json'](_0x5237bf);}async[_0x109cb9(0x117)](_0x5c470b,_0x125c73){const _0x488cfa=_0x109cb9,_0xa7188c={'DEsxp':function(_0x3a7231,_0x150150){return _0x3a7231(_0x150150);}};if(!_0x5c470b[_0x488cfa(0x12e)][_0x488cfa(0x14f)])return Logger['error'](_0x488cfa(0x137),_0x5c470b['user']),_0x125c73[_0x488cfa(0x118)](0x193);var _0x32eac5=_0x5c470b[_0x488cfa(0x178)];if(!_0x32eac5[_0x488cfa(0x18f)][_0x488cfa(0x11f)][_0x488cfa(0x14b)])return Logger[_0x488cfa(0x13f)](_0x488cfa(0x17e)+_0x32eac5['id']),_0x125c73[_0x488cfa(0x12d)](0x1f4)['send']('Podcast\x20has\x20no\x20rss\x20feed\x20url');const _0x2d0f34=!isNaN(_0x5c470b[_0x488cfa(0x15d)][_0x488cfa(0x12b)])?_0xa7188c[_0x488cfa(0x142)](Number,_0x5c470b[_0x488cfa(0x15d)][_0x488cfa(0x12b)]):0x3;var _0x17d673=await this[_0x488cfa(0x139)][_0x488cfa(0x10d)](_0x32eac5,_0x2d0f34);_0x125c73['json']({'episodes':_0x17d673||[]});}[_0x109cb9(0x141)](_0x2651a0,_0x5b1335){const _0x1c0252=_0x109cb9;if(!_0x2651a0['user'][_0x1c0252(0x14f)])return Logger['error'](_0x1c0252(0x183)+_0x2651a0[_0x1c0252(0x12e)][_0x1c0252(0x131)]+'\x22'),_0x5b1335['sendStatus'](0x193);this[_0x1c0252(0x139)][_0x1c0252(0x167)](_0x2651a0[_0x1c0252(0x114)]['id']),_0x5b1335[_0x1c0252(0x118)](0xc8);}[_0x109cb9(0x111)](_0x5322cf,_0x5a8de7){const _0x5c2a6d=_0x109cb9;var _0x58ab9a=_0x5322cf[_0x5c2a6d(0x178)],_0x40e467=this[_0x5c2a6d(0x139)][_0x5c2a6d(0x18a)](_0x58ab9a['id']);_0x5a8de7[_0x5c2a6d(0x18b)]({'downloads':_0x40e467['map'](_0x31deee=>_0x31deee[_0x5c2a6d(0x196)]())});}async[_0x109cb9(0x149)](_0x3d55ae,_0x5bbe2d){const _0x1215a1=_0x109cb9,_0x17499a=_0x3d55ae[_0x1215a1(0x178)][_0x1215a1(0x18f)][_0x1215a1(0x11f)][_0x1215a1(0x14b)];if(!_0x17499a)return Logger['error'](_0x1215a1(0x13d)),_0x5bbe2d[_0x1215a1(0x12d)](0x1f4)['send'](_0x1215a1(0x11c));var _0x671a94=_0x3d55ae[_0x1215a1(0x15d)][_0x1215a1(0x155)];if(!_0x671a94)return _0x5bbe2d[_0x1215a1(0x118)](0x1f4);const _0x254344=await findMatchingEpisodes(_0x17499a,_0x671a94);_0x5bbe2d[_0x1215a1(0x18b)]({'episodes':_0x254344||[]});}async[_0x109cb9(0x150)](_0x3e2d4e,_0x433a31){const _0x4e73ed=_0x109cb9,_0x4e06e4={'nthAc':_0x4e73ed(0x13a),'nHtJz':_0x4e73ed(0x1a2)};if(!_0x3e2d4e[_0x4e73ed(0x12e)][_0x4e73ed(0x14f)])return _0x4e06e4[_0x4e73ed(0x18c)]!==_0x4e06e4[_0x4e73ed(0x1ac)]?(Logger[_0x4e73ed(0x13f)](_0x4e73ed(0x14d),_0x3e2d4e[_0x4e73ed(0x12e)]),_0x433a31[_0x4e73ed(0x118)](0x193)):(_0x1786e2['error']('[PodcastController]\x20Non-admin\x20user\x20\x22'+_0x559db6[_0x4e73ed(0x12e)]['username']+_0x4e73ed(0x152)),_0x257dee['sendStatus'](0x193));const _0x180965=_0x3e2d4e['libraryItem'],_0xf310ff=_0x3e2d4e[_0x4e73ed(0x12c)];if(!_0xf310ff?.[_0x4e73ed(0x107)])return _0x433a31['sendStatus'](0x190);this['podcastManager']['downloadPodcastEpisodes'](_0x180965,_0xf310ff),_0x433a31[_0x4e73ed(0x118)](0xc8);}async[_0x109cb9(0x138)](_0x5d2d34,_0x1e0e1b){const _0x3c1e7f=_0x109cb9,_0x34cecc={'FaFPp':_0x3c1e7f(0x16f)};if(!_0x5d2d34[_0x3c1e7f(0x12e)][_0x3c1e7f(0x14f)]){if('trlgB'!==_0x3c1e7f(0x127))return Logger[_0x3c1e7f(0x13f)](_0x3c1e7f(0x14d),_0x5d2d34[_0x3c1e7f(0x12e)]),_0x1e0e1b[_0x3c1e7f(0x118)](0x193);else{var _0x171fd3=_0x1e3397[_0x3c1e7f(0x178)],_0x287871=this[_0x3c1e7f(0x139)][_0x3c1e7f(0x18a)](_0x171fd3['id']);_0x34aad0[_0x3c1e7f(0x18b)]({'downloads':_0x287871[_0x3c1e7f(0x12f)](_0x5b37dd=>_0x5b37dd[_0x3c1e7f(0x196)]())});}}const _0x294241=_0x5d2d34[_0x3c1e7f(0x15d)]['override']==='1',_0xbc946f=await Scanner[_0x3c1e7f(0x1a4)](_0x5d2d34[_0x3c1e7f(0x178)],{'overrideDetails':_0x294241});_0xbc946f&&(await Database[_0x3c1e7f(0x119)](_0x5d2d34[_0x3c1e7f(0x178)]),SocketAuthority[_0x3c1e7f(0x189)](_0x34cecc[_0x3c1e7f(0x113)],_0x5d2d34[_0x3c1e7f(0x178)][_0x3c1e7f(0x191)]())),_0x1e0e1b[_0x3c1e7f(0x18b)]({'numEpisodesUpdated':_0xbc946f});}async[_0x109cb9(0x162)](_0x23fd5e,_0x519002){const _0x4cc936=_0x109cb9,_0x576bac={'yezSl':_0x4cc936(0x16f)},_0x1e893e=_0x23fd5e['libraryItem'];var _0x5cb0d1=_0x23fd5e[_0x4cc936(0x114)][_0x4cc936(0x13b)];if(!_0x1e893e[_0x4cc936(0x18f)][_0x4cc936(0x192)](_0x5cb0d1))return _0x519002[_0x4cc936(0x12d)](0x194)[_0x4cc936(0x105)](_0x4cc936(0x17c));_0x1e893e[_0x4cc936(0x18f)][_0x4cc936(0x162)](_0x5cb0d1,_0x23fd5e['body'])&&(await Database['updateLibraryItem'](_0x1e893e),SocketAuthority[_0x4cc936(0x189)](_0x576bac[_0x4cc936(0x1a8)],_0x1e893e[_0x4cc936(0x191)]())),_0x519002[_0x4cc936(0x18b)](_0x1e893e['toJSONExpanded']());}async[_0x109cb9(0x17b)](_0x40afcb,_0x441c72){const _0xcd86e7=_0x109cb9,_0x20e322=_0x40afcb[_0xcd86e7(0x114)][_0xcd86e7(0x13b)],_0x2d97c4=_0x40afcb[_0xcd86e7(0x178)],_0x1aa0fb=_0x2d97c4['media'][_0xcd86e7(0x174)][_0xcd86e7(0x195)](_0x338888=>_0x338888['id']===_0x20e322);if(!_0x1aa0fb)return Logger[_0xcd86e7(0x13f)](_0xcd86e7(0x169)+_0x20e322+_0xcd86e7(0x144)+_0x2d97c4['id']),_0x441c72[_0xcd86e7(0x118)](0x194);_0x441c72[_0xcd86e7(0x18b)](_0x1aa0fb);}async['removeEpisode'](_0x32ef41,_0x1c11aa){const _0x120547=_0x109cb9,_0x560d55={'GDiFR':_0x120547(0x171),'chYqQ':function(_0x43f69c,_0x72a1a0){return _0x43f69c===_0x72a1a0;},'smvdV':_0x120547(0x16c),'mQvDU':function(_0x28b959,_0x439618){return _0x28b959!==_0x439618;},'NiTsu':'wUauK','AxNgi':_0x120547(0x130),'hQsgX':'playlist_updated','emGEf':'item_updated'},_0x28106e=_0x32ef41[_0x120547(0x114)][_0x120547(0x13b)],_0x23b0fc=_0x32ef41['libraryItem'],_0x592516=_0x32ef41['query'][_0x120547(0x129)]==='1',_0x5b55b3=_0x23b0fc[_0x120547(0x18f)][_0x120547(0x174)][_0x120547(0x195)](_0x4fa020=>_0x4fa020['id']===_0x28106e);if(!_0x5b55b3)return _0x560d55[_0x120547(0x170)]('nZlsS',_0x120547(0x1a6))?(Logger['error']('[PodcastController]\x20removeEpisode\x20episode\x20'+_0x28106e+_0x120547(0x144)+_0x23b0fc['id']),_0x1c11aa[_0x120547(0x118)](0x194)):(_0x15f450[_0x120547(0x13f)]('[PodcastController]\x20findEpisode:\x20Podcast\x20has\x20no\x20feed\x20url'),_0x4ee84b['status'](0x1f4)['send'](_0x120547(0x11c)));if(_0x592516){if(_0x120547(0x11d)!==_0x560d55[_0x120547(0x148)]){const _0x1ced89=_0x5b55b3['audioFile'];await fs[_0x120547(0x120)](_0x1ced89['metadata'][_0x120547(0x184)])[_0x120547(0x182)](()=>{const _0x392bcc=_0x120547;Logger['info'](_0x392bcc(0x185)+_0x1ced89[_0x392bcc(0x11f)][_0x392bcc(0x184)]+'\x22');})[_0x120547(0x14c)](_0xd27054=>{const _0x369298=_0x120547,_0x15dee0={'cJrVA':_0x560d55['GDiFR']};if(_0x560d55[_0x369298(0x16d)](_0x560d55[_0x369298(0x10e)],'auXIm'))Logger[_0x369298(0x13f)](_0x369298(0x168)+_0x1ced89['metadata'][_0x369298(0x184)]+'\x22',_0xd27054);else return _0x3115d5[_0x369298(0x13f)]('[PodcastController]\x20Podcast\x20already\x20exists\x20at\x20path\x20\x22'+_0x35402a+'\x22'),_0x4cf63d['status'](0x190)[_0x369298(0x105)](_0x15dee0[_0x369298(0x110)]);});}else{const _0x4e9cba=_0x3b6ccb[_0x120547(0x114)][_0x120547(0x13b)],_0x3becb6=_0x26d231[_0x120547(0x178)],_0x1ba4eb=_0x3becb6[_0x120547(0x18f)][_0x120547(0x174)][_0x120547(0x195)](_0x46d25a=>_0x46d25a['id']===_0x4e9cba);if(!_0x1ba4eb)return _0x4dce04['error'](_0x120547(0x169)+_0x4e9cba+_0x120547(0x144)+_0x3becb6['id']),_0x55e155[_0x120547(0x118)](0x194);_0x448874[_0x120547(0x18b)](_0x1ba4eb);}}const _0x36d806=_0x23b0fc['media'][_0x120547(0x19a)](_0x28106e);_0x36d806?.[_0x120547(0x10b)]&&_0x23b0fc['removeLibraryFile'](_0x36d806[_0x120547(0x10b)][_0x120547(0x188)]);const _0x209892=await Database[_0x120547(0x194)]['findAll']({'where':{'mediaItemId':_0x28106e},'include':{'model':Database[_0x120547(0x172)],'include':Database['playlistMediaItemModel']}});for(const _0x4d4d43 of _0x209892){const _0x3525c1=_0x4d4d43['playlist'][_0x120547(0x143)][_0x120547(0x107)]-0x1;if(!_0x3525c1){Logger[_0x120547(0x1af)](_0x120547(0x1ad)+_0x4d4d43[_0x120547(0x126)][_0x120547(0x140)]+_0x120547(0x121));const _0x5c6a21=await _0x4d4d43[_0x120547(0x126)][_0x120547(0x1a0)]();SocketAuthority[_0x120547(0x156)](_0x4d4d43[_0x120547(0x126)][_0x120547(0x133)],_0x560d55['AxNgi'],_0x5c6a21),await _0x4d4d43[_0x120547(0x126)][_0x120547(0x179)]();}else{await _0x4d4d43['destroy']();const _0xa99b48=await _0x4d4d43[_0x120547(0x126)]['getOldJsonExpanded']();SocketAuthority['clientEmitter'](_0x4d4d43[_0x120547(0x126)]['userId'],_0x560d55[_0x120547(0x124)],_0xa99b48);}}const _0x3c27f4=await Database['mediaProgressModel'][_0x120547(0x179)]({'where':{'mediaItemId':_0x5b55b3['id']}});_0x3c27f4&&Logger[_0x120547(0x1af)](_0x120547(0x128)+_0x3c27f4+_0x120547(0x197)+_0x5b55b3['id']),await Database['updateLibraryItem'](_0x23b0fc),SocketAuthority['emitter'](_0x560d55[_0x120547(0x132)],_0x23b0fc['toJSONExpanded']()),_0x1c11aa[_0x120547(0x18b)](_0x23b0fc[_0x120547(0x19b)]());}async['middleware'](_0x3adcc8,_0x48085c,_0x522475){const _0x29b7ac=_0x109cb9,_0x2ab804={'xcXty':function(_0x20993d,_0x1d8d49){return _0x20993d==_0x1d8d49;},'DRGYj':_0x29b7ac(0x15c)},_0x423c84=await Database[_0x29b7ac(0x13e)][_0x29b7ac(0x15e)](_0x3adcc8[_0x29b7ac(0x114)]['id']);if(!_0x423c84?.['media'])return _0x48085c[_0x29b7ac(0x118)](0x194);if(!_0x423c84[_0x29b7ac(0x17a)])return _0x48085c[_0x29b7ac(0x118)](0x1f4);if(!_0x3adcc8[_0x29b7ac(0x12e)][_0x29b7ac(0x16e)](_0x423c84))return _0x48085c['sendStatus'](0x193);if(_0x2ab804[_0x29b7ac(0x165)](_0x3adcc8['method'],_0x29b7ac(0x103))&&!_0x3adcc8[_0x29b7ac(0x12e)][_0x29b7ac(0x18e)])return Logger[_0x29b7ac(0x136)](_0x29b7ac(0x13c),_0x3adcc8[_0x29b7ac(0x12e)][_0x29b7ac(0x131)]),_0x48085c[_0x29b7ac(0x118)](0x193);else{if((_0x3adcc8[_0x29b7ac(0x17f)]==_0x29b7ac(0x135)||_0x3adcc8[_0x29b7ac(0x17f)]==_0x29b7ac(0x122))&&!_0x3adcc8[_0x29b7ac(0x12e)][_0x29b7ac(0x1a5)])return Logger['warn'](_0x2ab804[_0x29b7ac(0x151)],_0x3adcc8[_0x29b7ac(0x12e)][_0x29b7ac(0x131)]),_0x48085c['sendStatus'](0x193);}_0x3adcc8[_0x29b7ac(0x178)]=_0x423c84,_0x522475();}}module[_0x109cb9(0x104)]=new PodcastController();