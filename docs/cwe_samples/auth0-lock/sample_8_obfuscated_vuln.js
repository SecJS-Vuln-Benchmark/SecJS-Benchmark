const _0x35298b=_0x369a;(function(_0x552b9d,_0x4f7e50){const _0xc66e4e=_0x369a,_0x4e4316=_0x552b9d();while(!![]){try{const _0x35bcf0=parseInt(_0xc66e4e(0x10c))/0x1*(parseInt(_0xc66e4e(0x106))/0x2)+parseInt(_0xc66e4e(0x10b))/0x3*(-parseInt(_0xc66e4e(0xd3))/0x4)+parseInt(_0xc66e4e(0x13b))/0x5*(-parseInt(_0xc66e4e(0x10f))/0x6)+parseInt(_0xc66e4e(0xe8))/0x7*(-parseInt(_0xc66e4e(0xfc))/0x8)+-parseInt(_0xc66e4e(0xde))/0x9+parseInt(_0xc66e4e(0xe6))/0xa*(parseInt(_0xc66e4e(0xf6))/0xb)+-parseInt(_0xc66e4e(0xe3))/0xc*(-parseInt(_0xc66e4e(0xc4))/0xd);if(_0x35bcf0===_0x4f7e50)break;else _0x4e4316['push'](_0x4e4316['shift']());}catch(_0x1c9e9f){_0x4e4316['push'](_0x4e4316['shift']());}}}(_0x565e,0x97e1f));const Logger=require('../Logger'),SocketAuthority=require(_0x35298b(0x111)),Database=require('../Database'),fs=require(_0x35298b(0xda)),{getPodcastFeed,findMatchingEpisodes}=require(_0x35298b(0x138)),{getFileTimestampsWithIno,filePathToPOSIX}=require(_0x35298b(0x114)),Scanner=require('../scanner/Scanner'),CoverManager=require(_0x35298b(0xf2)),LibraryItem=require('../objects/LibraryItem');function _0x369a(_0x280769,_0x158c35){const _0x565e14=_0x565e();return _0x369a=function(_0x369af8,_0x611f89){_0x369af8=_0x369af8-0x92;let _0x37c386=_0x565e14[_0x369af8];return _0x37c386;},_0x369a(_0x280769,_0x158c35);}class PodcastController{async['create'](_0x5b6166,_0x1b4fd3){const _0x5662f7=_0x35298b,_0x46f72a={'bZxWn':_0x5662f7(0xd8),'dPEWt':function(_0x5515c1,_0x4a5ad8){return _0x5515c1===_0x4a5ad8;},'etdyk':_0x5662f7(0x117),'uCnfm':'Folder\x20not\x20found','DFiQx':function(_0x33169b,_0x106632){return _0x33169b(_0x106632);},'LKTEH':function(_0x595122,_0x2b3435){return _0x595122>_0x2b3435;},'MjSYF':_0x5662f7(0x123),'Sgqdb':'Invalid\x20podcast\x20path','thZDi':_0x5662f7(0xf7),'rbXDF':function(_0x5da675,_0x1399d0){return _0x5da675!==_0x1399d0;},'tsoXO':_0x5662f7(0xc9),'ObHDE':'item_added'};if(!_0x5b6166['user'][_0x5662f7(0xd2)])return Logger[_0x5662f7(0xcf)](_0x5662f7(0x12b)+_0x5b6166[_0x5662f7(0xea)][_0x5662f7(0xd0)]+'\x22\x20attempted\x20to\x20create\x20podcast'),_0x1b4fd3[_0x5662f7(0xf4)](0x193);const _0x177af9=_0x5b6166[_0x5662f7(0x139)],_0x3695ce=await Database[_0x5662f7(0x9a)][_0x5662f7(0x104)](_0x177af9[_0x5662f7(0xe5)]);if(!_0x3695ce)return _0x46f72a[_0x5662f7(0xa4)](_0x5662f7(0x122),_0x5662f7(0x122))?(Logger['error']('[PodcastController]\x20Create:\x20Library\x20not\x20found\x20\x22'+_0x177af9[_0x5662f7(0xe5)]+'\x22'),_0x1b4fd3['status'](0x194)['send']('Library\x20not\x20found')):_0x5252ab[_0x5662f7(0xf4)](0x1f4);const _0x495fee=_0x3695ce['folders'][_0x5662f7(0xaf)](_0x55560c=>_0x55560c['id']===_0x177af9[_0x5662f7(0x103)]);if(!_0x495fee){if(_0x5662f7(0x11f)!==_0x46f72a[_0x5662f7(0xb2)])return Logger['error']('[PodcastController]\x20Create:\x20Folder\x20not\x20found\x20\x22'+_0x177af9[_0x5662f7(0x103)]+'\x22'),_0x1b4fd3[_0x5662f7(0x136)](0x194)[_0x5662f7(0x98)](_0x46f72a[_0x5662f7(0xa9)]);else _0x31eb38[_0x5662f7(0xe0)](_0x5662f7(0xfa)+_0x34937e+'\x20media\x20progress\x20for\x20episode\x20'+_0x485546['id']);}const _0x12e835=_0x46f72a['DFiQx'](filePathToPOSIX,_0x177af9[_0x5662f7(0xe1)]),_0x56bec8=_0x46f72a[_0x5662f7(0x129)](await Database[_0x5662f7(0xd6)][_0x5662f7(0xc8)]({'where':{'path':_0x12e835}}),0x0);if(_0x56bec8)return Logger[_0x5662f7(0xcf)](_0x5662f7(0xa6)+_0x12e835+'\x22'),_0x1b4fd3['status'](0x190)[_0x5662f7(0x98)](_0x46f72a[_0x5662f7(0xef)]);const _0x567363=await fs['ensureDir'](_0x12e835)['then'](()=>!![])[_0x5662f7(0xdd)](_0x152a54=>{const _0xe3554f=_0x5662f7;return Logger[_0xe3554f(0xcf)]('[PodcastController]\x20Failed\x20to\x20ensure\x20podcast\x20dir\x20\x22'+_0x12e835+'\x22',_0x152a54),![];});if(!_0x567363)return _0x1b4fd3['status'](0x190)[_0x5662f7(0x98)](_0x46f72a[_0x5662f7(0x94)]);const _0x17aa4b=await getFileTimestampsWithIno(_0x12e835);let _0x174c68=_0x177af9['path']['replace'](_0x495fee[_0x5662f7(0x93)],'');if(_0x174c68[_0x5662f7(0xa0)]('/'))_0x174c68=_0x174c68[_0x5662f7(0xc5)](0x1);const _0x3fdfbc={'path':_0x12e835,'relPath':_0x174c68,'folderId':_0x177af9[_0x5662f7(0x103)],'libraryId':_0x177af9[_0x5662f7(0xe5)],'ino':_0x17aa4b['ino'],'mtimeMs':_0x17aa4b[_0x5662f7(0xee)]||0x0,'ctimeMs':_0x17aa4b['ctimeMs']||0x0,'birthtimeMs':_0x17aa4b[_0x5662f7(0xbd)]||0x0,'media':_0x177af9[_0x5662f7(0xa1)]},_0x520c04=new LibraryItem();_0x520c04['setData'](_0x46f72a[_0x5662f7(0x110)],_0x3fdfbc);if(_0x177af9[_0x5662f7(0xa1)]['metadata'][_0x5662f7(0x96)]){const _0x379ffd=await CoverManager['downloadCoverFromUrl'](_0x520c04,_0x177af9[_0x5662f7(0xa1)][_0x5662f7(0x12e)][_0x5662f7(0x96)],!![]);if(_0x379ffd){if(_0x46f72a[_0x5662f7(0xa5)](_0x5662f7(0xec),_0x5662f7(0xd1))){if(_0x379ffd[_0x5662f7(0xcf)]){if(_0x46f72a[_0x5662f7(0x131)]===_0x46f72a[_0x5662f7(0x131)])Logger[_0x5662f7(0xcf)](_0x5662f7(0xc3)+_0x177af9[_0x5662f7(0xa1)][_0x5662f7(0x12e)][_0x5662f7(0x96)]+_0x5662f7(0x128)+_0x379ffd[_0x5662f7(0xcf)]);else return _0x28757c[_0x5662f7(0xcf)](_0x5662f7(0xc2),_0x4cd8c1[_0x5662f7(0xea)]),_0x208c73[_0x5662f7(0xf4)](0x193);}else _0x379ffd['cover']&&(_0x520c04[_0x5662f7(0xa1)][_0x5662f7(0xfd)]=_0x379ffd[_0x5662f7(0xa2)]);}else return _0x9f0aab['error'](_0x5662f7(0xf5)),_0x376929[_0x5662f7(0x136)](0x1f4)['send'](_0x46f72a[_0x5662f7(0xcd)]);}}await Database[_0x5662f7(0x9c)](_0x520c04),SocketAuthority[_0x5662f7(0x9b)](_0x46f72a[_0x5662f7(0x121)],_0x520c04[_0x5662f7(0xad)]()),_0x1b4fd3[_0x5662f7(0x100)](_0x520c04[_0x5662f7(0xad)]()),_0x177af9[_0x5662f7(0x124)]?.[_0x5662f7(0xa3)]&&(Logger[_0x5662f7(0xe0)]('[PodcastController]\x20Podcast\x20created\x20now\x20starting\x20'+_0x177af9[_0x5662f7(0x124)]['length']+_0x5662f7(0xc1)),this[_0x5662f7(0x13a)][_0x5662f7(0x105)](_0x520c04,_0x177af9[_0x5662f7(0x124)])),_0x520c04[_0x5662f7(0xa1)][_0x5662f7(0x9f)]&&this[_0x5662f7(0xff)][_0x5662f7(0xac)](_0x520c04);}async[_0x35298b(0x112)](_0x4d1e60,_0x51cbab){const _0x4aa2b1=_0x35298b,_0x6972b4={'QTgJP':'Bad\x20request'};if(!_0x4d1e60['user']['isAdminOrUp'])return Logger[_0x4aa2b1(0xcf)](_0x4aa2b1(0x12b)+_0x4d1e60[_0x4aa2b1(0xea)][_0x4aa2b1(0xd0)]+_0x4aa2b1(0xb5)),_0x51cbab['sendStatus'](0x193);var _0x3cf8be=_0x4d1e60[_0x4aa2b1(0x139)][_0x4aa2b1(0x12c)];if(!_0x3cf8be)return _0x51cbab['status'](0x190)[_0x4aa2b1(0x98)](_0x6972b4[_0x4aa2b1(0xfb)]);const _0x265421=await getPodcastFeed(_0x3cf8be);if(!_0x265421)return _0x51cbab[_0x4aa2b1(0x136)](0x194)['send'](_0x4aa2b1(0x102));_0x51cbab['json']({'podcast':_0x265421});}async[_0x35298b(0xd4)](_0x15f5ae,_0x2f04dc){const _0x28dc38=_0x35298b;if(!_0x15f5ae[_0x28dc38(0xea)][_0x28dc38(0xd2)])return Logger[_0x28dc38(0xcf)]('[PodcastController]\x20Non-admin\x20user\x20\x22'+_0x15f5ae['user'][_0x28dc38(0xd0)]+_0x28dc38(0xb0)),_0x2f04dc[_0x28dc38(0xf4)](0x193);if(!_0x15f5ae[_0x28dc38(0x139)][_0x28dc38(0xbb)])return'RnPkH'!=='EEgTa'?_0x2f04dc[_0x28dc38(0xf4)](0x190):_0x387548[_0x28dc38(0xf4)](0x190);const _0x9b4e35=await this[_0x28dc38(0x13a)][_0x28dc38(0xaa)](_0x15f5ae['body'][_0x28dc38(0xbb)]);_0x2f04dc[_0x28dc38(0x100)](_0x9b4e35);}async['checkNewEpisodes'](_0x1ece47,_0x915aa7){const _0x1dcb89=_0x35298b,_0x46228c={'BaJJw':_0x1dcb89(0x13d),'pgeTQ':function(_0x521678,_0x475d52){return _0x521678!==_0x475d52;},'rAtgt':_0x1dcb89(0xce),'qzhVD':'fpqvb','YUuBl':_0x1dcb89(0x120)};if(!_0x1ece47[_0x1dcb89(0xea)][_0x1dcb89(0xd2)])return _0x46228c[_0x1dcb89(0x9e)](_0x46228c[_0x1dcb89(0x115)],_0x46228c['qzhVD'])?(Logger[_0x1dcb89(0xcf)](_0x1dcb89(0x132),_0x1ece47[_0x1dcb89(0xea)]),_0x915aa7[_0x1dcb89(0xf4)](0x193)):(_0x3f7e2d[_0x1dcb89(0xcf)](_0x1dcb89(0x119)+_0x3a0994+'\x22',_0x4f6032),![]);var _0x51b6d7=_0x1ece47['libraryItem'];if(!_0x51b6d7[_0x1dcb89(0xa1)]['metadata']['feedUrl'])return _0x46228c['pgeTQ']('eyNvf',_0x46228c[_0x1dcb89(0x95)])?(_0x22d5cd[_0x1dcb89(0xcf)]('[PodcastController]\x20Create:\x20Library\x20not\x20found\x20\x22'+_0x1652c3[_0x1dcb89(0xe5)]+'\x22'),_0x41d885[_0x1dcb89(0x136)](0x194)[_0x1dcb89(0x98)](_0x46228c[_0x1dcb89(0xb7)])):(Logger[_0x1dcb89(0xcf)](_0x1dcb89(0x11e)+_0x51b6d7['id']),_0x915aa7[_0x1dcb89(0x136)](0x1f4)['send'](_0x1dcb89(0x141)));const _0x4db315=!isNaN(_0x1ece47[_0x1dcb89(0xf8)][_0x1dcb89(0x137)])?Number(_0x1ece47['query'][_0x1dcb89(0x137)]):0x3;var _0x90fa62=await this['podcastManager'][_0x1dcb89(0xb6)](_0x51b6d7,_0x4db315);_0x915aa7['json']({'episodes':_0x90fa62||[]});}[_0x35298b(0x140)](_0x1bcc3e,_0x3fa7cd){const _0x266393=_0x35298b;if(!_0x1bcc3e['user'][_0x266393(0xd2)])return Logger['error']('[PodcastController]\x20Non-admin\x20user\x20attempting\x20to\x20clear\x20download\x20queue\x20\x22'+_0x1bcc3e['user'][_0x266393(0xd0)]+'\x22'),_0x3fa7cd['sendStatus'](0x193);this['podcastManager'][_0x266393(0xd5)](_0x1bcc3e[_0x266393(0xfe)]['id']),_0x3fa7cd[_0x266393(0xf4)](0xc8);}['getEpisodeDownloads'](_0x19104e,_0x25aff1){const _0x342ade=_0x35298b;var _0x2706e7=_0x19104e[_0x342ade(0x130)],_0x3053f7=this[_0x342ade(0x13a)]['getEpisodeDownloadsInQueue'](_0x2706e7['id']);_0x25aff1[_0x342ade(0x100)]({'downloads':_0x3053f7['map'](_0x1a000c=>_0x1a000c['toJSONForClient']())});}async[_0x35298b(0x13c)](_0x49319b,_0x110cfd){const _0x3ee400=_0x35298b,_0xf2e480={'fCXCf':function(_0x218ee2,_0x47c461,_0x3a463a){return _0x218ee2(_0x47c461,_0x3a463a);}},_0x30d8aa=_0x49319b[_0x3ee400(0x130)][_0x3ee400(0xa1)]['metadata']['feedUrl'];if(!_0x30d8aa)return Logger[_0x3ee400(0xcf)](_0x3ee400(0xf5)),_0x110cfd['status'](0x1f4)[_0x3ee400(0x98)](_0x3ee400(0xd8));var _0x2a06d8=_0x49319b[_0x3ee400(0xf8)][_0x3ee400(0xb9)];if(!_0x2a06d8)return _0x110cfd['sendStatus'](0x1f4);const _0x5890b7=await _0xf2e480['fCXCf'](findMatchingEpisodes,_0x30d8aa,_0x2a06d8);_0x110cfd[_0x3ee400(0x100)]({'episodes':_0x5890b7||[]});}async[_0x35298b(0xbe)](_0x42629b,_0xa78600){const _0x6ed32e=_0x35298b,_0x3a72dc={'HybiL':_0x6ed32e(0xcc)};if(!_0x42629b[_0x6ed32e(0xea)][_0x6ed32e(0xd2)])return _0x6ed32e(0xcc)===_0x3a72dc[_0x6ed32e(0xdf)]?(Logger[_0x6ed32e(0xcf)](_0x6ed32e(0xc2),_0x42629b[_0x6ed32e(0xea)]),_0xa78600[_0x6ed32e(0xf4)](0x193)):_0x585391[_0x6ed32e(0xf4)](0x1f4);const _0xd70544=_0x42629b[_0x6ed32e(0x130)],_0x8e89a=_0x42629b[_0x6ed32e(0x139)];if(!_0x8e89a?.[_0x6ed32e(0xa3)])return _0xa78600[_0x6ed32e(0xf4)](0x190);this[_0x6ed32e(0x13a)][_0x6ed32e(0x105)](_0xd70544,_0x8e89a),_0xa78600[_0x6ed32e(0xf4)](0xc8);}async[_0x35298b(0x107)](_0x72b5cc,_0x22f01a){const _0x4bea7e=_0x35298b,_0x52feff={'feyAB':function(_0x56dbbd,_0x56f4a7){return _0x56dbbd===_0x56f4a7;},'WvjIT':'voCOH'};if(!_0x72b5cc[_0x4bea7e(0xea)][_0x4bea7e(0xd2)])return _0x52feff[_0x4bea7e(0x11a)](_0x52feff[_0x4bea7e(0xdc)],_0x52feff[_0x4bea7e(0xdc)])?(Logger['error'](_0x4bea7e(0xc2),_0x72b5cc['user']),_0x22f01a['sendStatus'](0x193)):(_0x55478d['error'](_0x4bea7e(0x97)+_0x5bc5ea[_0x4bea7e(0xea)][_0x4bea7e(0xd0)]+'\x22'),_0x1d2156['sendStatus'](0x193));const _0x2be753=_0x72b5cc['query'][_0x4bea7e(0xf1)]==='1',_0x250087=await Scanner['quickMatchPodcastEpisodes'](_0x72b5cc['libraryItem'],{'overrideDetails':_0x2be753});_0x250087&&(await Database[_0x4bea7e(0xeb)](_0x72b5cc['libraryItem']),SocketAuthority[_0x4bea7e(0x9b)](_0x4bea7e(0xf0),_0x72b5cc['libraryItem'][_0x4bea7e(0xad)]())),_0x22f01a[_0x4bea7e(0x100)]({'numEpisodesUpdated':_0x250087});}async['updateEpisode'](_0x48215d,_0xfb0778){const _0xc6281d=_0x35298b,_0x11de94={'IREUn':_0xc6281d(0x12a),'DfMKW':_0xc6281d(0xf0)},_0x3376bd=_0x48215d['libraryItem'];var _0x2672a1=_0x48215d[_0xc6281d(0xfe)][_0xc6281d(0x10a)];if(!_0x3376bd[_0xc6281d(0xa1)]['checkHasEpisode'](_0x2672a1))return _0xfb0778[_0xc6281d(0x136)](0x194)[_0xc6281d(0x98)]('Episode\x20not\x20found');if(_0x3376bd[_0xc6281d(0xa1)][_0xc6281d(0x12f)](_0x2672a1,_0x48215d[_0xc6281d(0x139)])){if(_0x11de94[_0xc6281d(0xf3)]===_0xc6281d(0xca)){if(_0x16c5af[_0xc6281d(0xcf)])_0x28dea3[_0xc6281d(0xcf)](_0xc6281d(0xc3)+_0x5e73ba[_0xc6281d(0xa1)][_0xc6281d(0x12e)][_0xc6281d(0x96)]+_0xc6281d(0x128)+_0x3d8731[_0xc6281d(0xcf)]);else _0x58c68e[_0xc6281d(0xa2)]&&(_0x3f3635[_0xc6281d(0xa1)]['coverPath']=_0x3cc7b3['cover']);}else await Database[_0xc6281d(0xeb)](_0x3376bd),SocketAuthority[_0xc6281d(0x9b)](_0x11de94['DfMKW'],_0x3376bd[_0xc6281d(0xad)]());}_0xfb0778['json'](_0x3376bd[_0xc6281d(0xad)]());}async[_0x35298b(0x10d)](_0x445822,_0x14f14d){const _0x50667b=_0x35298b,_0x5bc488=_0x445822['params'][_0x50667b(0x10a)],_0x186380=_0x445822[_0x50667b(0x130)],_0x387dbb=_0x186380[_0x50667b(0xa1)][_0x50667b(0xa7)]['find'](_0xce4224=>_0xce4224['id']===_0x5bc488);if(!_0x387dbb)return Logger[_0x50667b(0xcf)](_0x50667b(0x92)+_0x5bc488+'\x20not\x20found\x20for\x20item\x20'+_0x186380['id']),_0x14f14d[_0x50667b(0xf4)](0x194);_0x14f14d[_0x50667b(0x100)](_0x387dbb);}async[_0x35298b(0xdb)](_0x3da8a0,_0x210dc3){const _0x4eb90e=_0x35298b,_0x1138dc={'NSxMo':function(_0x4943ef,_0x456685){return _0x4943ef!==_0x456685;},'iKzWv':'Pbvgc','TQIiY':_0x4eb90e(0x141),'YqcAz':function(_0x4e11d9,_0x5e77){return _0x4e11d9===_0x5e77;},'LzEpo':function(_0x1e94a1,_0x3df01b){return _0x1e94a1!==_0x3df01b;},'fadAq':_0x4eb90e(0x133),'OwGbk':_0x4eb90e(0x135),'YvCjR':function(_0x675d60,_0xe7d43){return _0x675d60-_0xe7d43;},'XAXMz':_0x4eb90e(0x11c)},_0x390736=_0x3da8a0[_0x4eb90e(0xfe)]['episodeId'],_0x5526e8=_0x3da8a0[_0x4eb90e(0x130)],_0x52f5b9=_0x1138dc['YqcAz'](_0x3da8a0[_0x4eb90e(0xf8)][_0x4eb90e(0x126)],'1'),_0x13dc56=_0x5526e8['media'][_0x4eb90e(0xa7)][_0x4eb90e(0xaf)](_0x273066=>_0x273066['id']===_0x390736);if(!_0x13dc56)return Logger[_0x4eb90e(0xcf)]('[PodcastController]\x20removeEpisode\x20episode\x20'+_0x390736+_0x4eb90e(0xbc)+_0x5526e8['id']),_0x210dc3['sendStatus'](0x194);if(_0x52f5b9){const _0x2d4f92=_0x13dc56[_0x4eb90e(0x109)];await fs['remove'](_0x2d4f92[_0x4eb90e(0x12e)][_0x4eb90e(0xe1)])[_0x4eb90e(0x116)](()=>{const _0x4316c4=_0x4eb90e;Logger[_0x4316c4(0xe0)](_0x4316c4(0x11b)+_0x2d4f92['metadata'][_0x4316c4(0xe1)]+'\x22');})[_0x4eb90e(0xdd)](_0x4bd3db=>{const _0xac7d08=_0x4eb90e;if(_0x1138dc[_0xac7d08(0xd9)](_0x1138dc[_0xac7d08(0xe7)],_0x1138dc[_0xac7d08(0xe7)])){var _0x19c48b=_0x1f445c[_0xac7d08(0x130)],_0x4b561d=this[_0xac7d08(0x13a)][_0xac7d08(0x125)](_0x19c48b['id']);_0x349e20['json']({'downloads':_0x4b561d[_0xac7d08(0xed)](_0x387084=>_0x387084[_0xac7d08(0x13e)]())});}else Logger[_0xac7d08(0xcf)](_0xac7d08(0x113)+_0x2d4f92[_0xac7d08(0x12e)][_0xac7d08(0xe1)]+'\x22',_0x4bd3db);});}const _0x5e1dfb=_0x5526e8[_0x4eb90e(0xa1)][_0x4eb90e(0xdb)](_0x390736);_0x5e1dfb?.[_0x4eb90e(0x109)]&&_0x5526e8[_0x4eb90e(0x134)](_0x5e1dfb[_0x4eb90e(0x109)]['ino']);const _0x261afe=await Database[_0x4eb90e(0x11d)]['findAll']({'where':{'mediaItemId':_0x390736},'include':{'model':Database[_0x4eb90e(0xc7)],'include':Database[_0x4eb90e(0x11d)]}});for(const _0x5cd7e2 of _0x261afe){if(_0x1138dc[_0x4eb90e(0x10e)](_0x1138dc[_0x4eb90e(0xab)],_0x1138dc[_0x4eb90e(0xbf)])){const _0x4eedbb=_0x1138dc[_0x4eb90e(0xe9)](_0x5cd7e2[_0x4eb90e(0xb3)]['playlistMediaItems']['length'],0x1);if(!_0x4eedbb){Logger[_0x4eb90e(0xe0)]('[PodcastController]\x20Playlist\x20\x22'+_0x5cd7e2['playlist'][_0x4eb90e(0x101)]+'\x22\x20has\x20no\x20more\x20items\x20-\x20removing\x20it');const _0x261b1f=await _0x5cd7e2[_0x4eb90e(0xb3)][_0x4eb90e(0xb4)]();SocketAuthority[_0x4eb90e(0x12d)](_0x5cd7e2[_0x4eb90e(0xb3)]['userId'],'playlist_removed',_0x261b1f),await _0x5cd7e2[_0x4eb90e(0xb3)][_0x4eb90e(0x118)]();}else{await _0x5cd7e2['destroy']();const _0x37b7f8=await _0x5cd7e2[_0x4eb90e(0xb3)]['getOldJsonExpanded']();SocketAuthority[_0x4eb90e(0x12d)](_0x5cd7e2['playlist']['userId'],_0x1138dc[_0x4eb90e(0xa8)],_0x37b7f8);}}else return _0x3bf041[_0x4eb90e(0xcf)]('[PodcastController]\x20checkNewEpisodes\x20no\x20feed\x20url\x20for\x20item\x20'+_0x3d9749['id']),_0x574ccf[_0x4eb90e(0x136)](0x1f4)[_0x4eb90e(0x98)](_0x1138dc[_0x4eb90e(0xc0)]);}const _0x990deb=await Database[_0x4eb90e(0xae)][_0x4eb90e(0x118)]({'where':{'mediaItemId':_0x13dc56['id']}});_0x990deb&&Logger[_0x4eb90e(0xe0)](_0x4eb90e(0xfa)+_0x990deb+_0x4eb90e(0xd7)+_0x13dc56['id']),await Database[_0x4eb90e(0xeb)](_0x5526e8),SocketAuthority[_0x4eb90e(0x9b)](_0x4eb90e(0xf0),_0x5526e8[_0x4eb90e(0xad)]()),_0x210dc3[_0x4eb90e(0x100)](_0x5526e8[_0x4eb90e(0xba)]());}async['middleware'](_0x3eab5c,_0x18c857,_0x47b8c0){const _0x128d1c=_0x35298b,_0x3bc8e1={'xSIDp':function(_0x269d34,_0x5556b2){return _0x269d34==_0x5556b2;},'BTrIQ':_0x128d1c(0x9d),'beAre':_0x128d1c(0x13f)},_0x2b8999=await Database[_0x128d1c(0xd6)]['getOldById'](_0x3eab5c[_0x128d1c(0xfe)]['id']);if(!_0x2b8999?.[_0x128d1c(0xa1)])return _0x18c857['sendStatus'](0x194);if(!_0x2b8999[_0x128d1c(0xf9)])return _0x18c857['sendStatus'](0x1f4);if(!_0x3eab5c[_0x128d1c(0xea)][_0x128d1c(0xb1)](_0x2b8999))return _0x18c857[_0x128d1c(0xf4)](0x193);if(_0x3bc8e1[_0x128d1c(0xb8)](_0x3eab5c[_0x128d1c(0xe2)],'DELETE')&&!_0x3eab5c[_0x128d1c(0xea)][_0x128d1c(0xc6)])return Logger[_0x128d1c(0xcb)](_0x128d1c(0x127),_0x3eab5c[_0x128d1c(0xea)][_0x128d1c(0xd0)]),_0x18c857[_0x128d1c(0xf4)](0x193);else{if((_0x3eab5c[_0x128d1c(0xe2)]==_0x128d1c(0x108)||_0x3eab5c['method']==_0x3bc8e1[_0x128d1c(0xe4)])&&!_0x3eab5c[_0x128d1c(0xea)]['canUpdate'])return Logger[_0x128d1c(0xcb)](_0x3bc8e1['beAre'],_0x3eab5c['user']['username']),_0x18c857['sendStatus'](0x193);}_0x3eab5c[_0x128d1c(0x130)]=_0x2b8999,_0x47b8c0();}}function _0x565e(){const _0x2b4df3=['FfZVC','error','username','LNiiQ','isAdminOrUp','46584CNYgIc','getFeedsFromOPMLText','clearDownloadQueue','libraryItemModel','\x20media\x20progress\x20for\x20episode\x20','Podcast\x20does\x20not\x20have\x20an\x20RSS\x20feed\x20URL','NSxMo','../libs/fsExtra','removeEpisode','WvjIT','catch','8843427MddYna','HybiL','info','path','method','18927060dsPEcS','BTrIQ','libraryId','290cHLjiS','iKzWv','413PxSfBB','YvCjR','user','updateLibraryItem','UJOhg','map','mtimeMs','MjSYF','item_updated','override','../managers/CoverManager','IREUn','sendStatus','[PodcastController]\x20findEpisode:\x20Podcast\x20has\x20no\x20feed\x20url','145651tpsOQf','podcast','query','isPodcast','[PodcastController]\x20Removed\x20','QTgJP','103072doAwGw','coverPath','params','cronManager','json','name','Podcast\x20RSS\x20feed\x20request\x20failed\x20or\x20invalid\x20response\x20data','folderId','getOldById','downloadPodcastEpisodes','119822TLFUcv','quickMatchEpisodes','PATCH','audioFile','episodeId','183mMsCOG','7LBTnrB','getEpisode','LzEpo','211824nfZvHX','thZDi','../SocketAuthority','getPodcastFeed','[PodcastController]\x20Failed\x20to\x20hard\x20delete\x20episode\x20file\x20at\x20\x22','../utils/fileUtils','rAtgt','then','MJVsz','destroy','[PodcastController]\x20Failed\x20to\x20ensure\x20podcast\x20dir\x20\x22','feyAB','[PodcastController]\x20Hard\x20deleted\x20episode\x20file\x20at\x20\x22','playlist_updated','playlistMediaItemModel','[PodcastController]\x20checkNewEpisodes\x20no\x20feed\x20url\x20for\x20item\x20','jVNim','eyNvf','ObHDE','YhdZE','Podcast\x20already\x20exists','episodesToDownload','getEpisodeDownloadsInQueue','hard','[PodcastController]\x20User\x20attempted\x20to\x20delete\x20without\x20permission','\x22:\x20','LKTEH','yEVcv','[PodcastController]\x20Non-admin\x20user\x20\x22','rssFeed','clientEmitter','metadata','updateEpisode','libraryItem','tsoXO','[PodcastController]\x20Non-admin\x20user\x20attempted\x20to\x20check/download\x20episodes','bxzil','removeLibraryFile','WdMjQ','status','limit','../utils/podcastUtils','body','podcastManager','125mJGzKb','findEpisode','Library\x20not\x20found','toJSONForClient','[PodcastController]\x20User\x20attempted\x20to\x20update\x20without\x20permission','clearEpisodeDownloadQueue','Podcast\x20has\x20no\x20rss\x20feed\x20url','[PodcastController]\x20getEpisode\x20episode\x20','fullPath','Sgqdb','YUuBl','imageUrl','[PodcastController]\x20Non-admin\x20user\x20attempting\x20to\x20clear\x20download\x20queue\x20\x22','send','exports','libraryModel','emitter','createLibraryItem','POST','pgeTQ','autoDownloadEpisodes','startsWith','media','cover','length','dPEWt','rbXDF','[PodcastController]\x20Podcast\x20already\x20exists\x20at\x20path\x20\x22','episodes','XAXMz','uCnfm','getOPMLFeeds','fadAq','checkUpdatePodcastCron','toJSONExpanded','mediaProgressModel','find','\x22\x20attempted\x20to\x20get\x20feeds\x20from\x20opml','checkCanAccessLibraryItem','etdyk','playlist','getOldJsonExpanded','\x22\x20attempted\x20to\x20get\x20podcast\x20feed','checkAndDownloadNewEpisodes','BaJJw','xSIDp','title','toJSON','opmlText','\x20not\x20found\x20for\x20item\x20','birthtimeMs','downloadEpisodes','OwGbk','TQIiY','\x20episode\x20downloads','[PodcastController]\x20Non-admin\x20user\x20attempted\x20to\x20download\x20episodes','[PodcastController]\x20Download\x20cover\x20error\x20from\x20\x22','26vNhMRB','slice','canDelete','playlistModel','count','oSwSw','EMfWO','warn','DAVLb','bZxWn'];_0x565e=function(){return _0x2b4df3;};return _0x565e();}module[_0x35298b(0x99)]=new PodcastController();