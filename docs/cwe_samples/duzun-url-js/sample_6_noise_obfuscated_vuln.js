const _0x42ee6b=_0x3cfc;function _0x24d7(){const _0xd6831a=['http://eviltrout.com/evil/trout','4631679fNopbs','it\x20allows\x20iframe\x20to\x20google\x20maps','<center>hello</center>','<div\x20dir=\x22rtl\x22>RTL\x20text</div>','FdBzb','<h1>Test\x20Heading</h1>','<abbr\x20title=\x22JavaScript\x22>JS</abbr>','<p>[the\x20answer](javascript:alert(42))</p>','pOGEQ','<button>press\x20me!</button>','hHvGX','kyyYH','<h4\x20id=\x22heading--underscored_name\x22>Test\x20Heading</h4>','sanitize','/foo/bar.html','<a\x20href=\x27http://disneyland.disney.go.com/\x27>disney</a>\x20<a\x20href=\x27http://reddit.com\x27>reddit</a>','<h3\x20id=\x22heading--dashed-name\x22>Test\x20Heading</h3>','<sup>high</sup>\x20<sub>low</sub>\x20<big>HUGE</big>','dMYvt','tfhXr','dlpeU','<canvas>draw\x20me!</canvas>','zzQkt','oLKWp','<p>Hey</p><video\x20autoplay\x20muted><source\x20src=\x22http://example.com/music.mp4\x22\x20type=\x22audio/mpeg\x22></video>','<p>1\x20+\x201\x20is\x20<del>3</del>\x20<ins>2</ins></p>','<progress>hello','<h5\x20id=\x22heading--trout\x22>Test\x20Heading</h5>','25314TsLnxN','8mGALrN','it\x20sanitizes\x20while\x20cooking','200gztWgJ','it\x20prevents\x20XSS','<iframe\x20src=\x22http://discourse.org\x22\x20width=\x22100\x22\x20height=\x2242\x22></iframe>','<h3>Test\x20Heading</h3>','&lt;3\x20&lt;3','notOk','PACWz','hxUAK','<i>bug</i>','Unit\x20|\x20Utility\x20|\x20sanitizer','escape\x20single\x20quotes','TcGRh','it\x20doesn\x27t\x20circumvent\x20XSS\x20with\x20comments','qTgum','XRqEq','<h2\x20id=\x22heading--cool\x22>Test\x20Heading</h2>','//eviltrout.com/evil/trout','hello','it\x20allows\x20iframe\x20to\x20OpenStreetMap','urlAllowed','ADdAc','79926RpihYm','NLHsH','BssIV','<iframe\x20width=\x22425\x22\x20height=\x22350\x22\x20frameborder=\x220\x22\x20marginheight=\x220\x22\x20marginwidth=\x220\x22\x20src=\x22https://www.openstreetmap.org/export/embed.html?bbox=22.49454975128174%2C51.220338322410775%2C22.523088455200195%2C51.23345342732931&amp;layer=mapnik\x22></iframe>','LXTIw','43286vNUGXL','mNpCx','press\x20me!','<kbd>Ctrl</kbd>+<kbd>C</kbd>','replace','<p>it\x20has\x20been\x20<strike>1\x20day</strike>\x200\x20days\x20since\x20our\x20last\x20test\x20failure</p>','<h1\x20id=\x22heading--with*char\x22>Test\x20Heading</h1>','it\x20has\x20been\x20<s>1\x20day</s>\x200\x20days\x20since\x20our\x20last\x20test\x20failure','allows\x20relative\x20urls','allows\x20https\x20urls','equal','JIvFG','<3\x20<3','<div><script>alert(\x27hi\x27);</script></div>','Qkagu','it\x20has\x20been\x20<strike>1\x20day</strike>\x200\x20days\x20since\x20our\x20last\x20test\x20failure','<h1\x20id=\x22heading--test\x22>Test\x20Heading</h1>','Urtpn','<span\x20class=\x22-bbcode-s\x20fa\x20fa-spin\x22>a</span>','cLptF','<div></div>','http://google.com/test\x27onmouseover=alert(\x27XSS!\x27);//.swf','<p>Hey</p><video\x20autoplay><source\x20src=\x22http://example.com/music.mp4\x22\x20type=\x22audio/mpeg\x22></video>','<textarea>hullo</textarea>','[the\x20answer](javascript:alert(42))','allows\x20full\x20urls','jiGXN','autoplay\x20videos\x20must\x20be\x20muted','match','we\x20can\x20embed\x20proper\x20links','https://eviltrout.com/evil/trout','<h6\x20id=\x22heading--discourse\x22>Test\x20Heading</h6>','<p><span>a</span></p>','YFTrN','http://google.com/test%27onmouseover=alert(%27XSS!%27);//.swf','GLhqa','DVBmJ','<p><i></i></p>','<blockquote>a\x0a</blockquote>\x0a','LqQMc','TFJjz','ugvai','https://www.google.com/maps/embed?|https://www.openstreetmap.org/export/embed.html?','draw\x20me!','<i\x20class=\x22fa-bug\x20fa-spin\x22>bug</i>','2488311JIxiHH','<p><abbr\x20title=\x22JavaScript\x22>JS</abbr></p>','65728xPWuuY','<h1\x20id=\x22evil-trout\x22>Test\x20Heading</h1>','<h1\x20id=\x22heading--\x22>Test\x20Heading</h1>','it\x20does\x20not\x20double\x20sanitize','<h1\x20id=\x22test-heading--cool\x22>Test\x20Heading</h1>','<span\x20class=\x22fa\x20fa-spin\x20-bbcode-s\x22>a</span>','uxmSF','svDvi','<p>Hey</p><video><source\x20src=\x22http://example.com/music.mp4\x22\x20type=\x22audio/mpeg\x22></video>','1695208qyecrh','<_<','yMthB','<div><p>hello</p></div>','it\x20sanitizes\x20spans','it\x20does\x20not\x20allow\x20most\x20iframes','poorly\x20formed\x20ids\x20on\x20headings','<p>it\x20has\x20been\x20<s>1\x20day</s>\x200\x20days\x20since\x20our\x20last\x20test\x20failure</p>'];_0x24d7=function(){return _0xd6831a;};return _0x24d7();}(function(_0x152c3f,_0x2bac16){const _0x23c82a=_0x3cfc,_0x2272e5=_0x152c3f();while(!![]){try{const _0x16d7f8=parseInt(_0x23c82a(0x1fa))/0x1+-parseInt(_0x23c82a(0x229))/0x2+-parseInt(_0x23c82a(0x1f5))/0x3+parseInt(_0x23c82a(0x232))/0x4+parseInt(_0x23c82a(0x25a))/0x5*(-parseInt(_0x23c82a(0x257))/0x6)+-parseInt(_0x23c82a(0x227))/0x7+parseInt(_0x23c82a(0x258))/0x8*(parseInt(_0x23c82a(0x23b))/0x9);if(_0x16d7f8===_0x2bac16)break;else _0x2272e5['push'](_0x2272e5['shift']());}catch(_0x2f5c01){_0x2272e5['push'](_0x2272e5['shift']());}}}(_0x24d7,0x6129c));function _0x3cfc(_0x59ff78,_0x27525b){const _0x24d784=_0x24d7();return _0x3cfc=function(_0x3cfccc,_0x48dfd5){_0x3cfccc=_0x3cfccc-0x1f1;let _0x32bd7a=_0x24d784[_0x3cfccc];return _0x32bd7a;},_0x3cfc(_0x59ff78,_0x27525b);}import _0x8de7fe,{buildOptions}from'pretty-text/pretty-text';import{module,test}from'qunit';import{hrefAllowed}from'pretty-text/sanitizer';module(_0x42ee6b(0x263),function(){const _0x442994=_0x42ee6b,_0x115d5e={'dMYvt':function(_0x1ac557,_0x387e6d){return _0x1ac557(_0x387e6d);},'zzQkt':_0x442994(0x224),'TcGRh':_0x442994(0x226),'Bdsrv':_0x442994(0x20e),'XRqEq':'<div><p\x20class=\x22funky\x22\x20wrong=\x271\x27>hello</p></div>','vjdRc':_0x442994(0x235),'pOGEQ':_0x442994(0x233),'cLptF':function(_0x4bc2df,_0x55873c,_0x615b7a,_0x46f731){return _0x4bc2df(_0x55873c,_0x615b7a,_0x46f731);},'oLKWp':'<p>hello</p>','fZIOb':_0x442994(0x259),'hxUAK':function(_0x472f83,_0x3bb9d2,_0xb50dfc,_0x295db4){return _0x472f83(_0x3bb9d2,_0xb50dfc,_0x295db4);},'LXTIw':'<p><a\x20href=\x22http://disneyland.disney.go.com/\x22>disney</a>\x20<a\x20href=\x22http://reddit.com\x22>reddit</a></p>','jiGXN':_0x442994(0x23d),'hHvGX':'it\x20does\x20not\x20allow\x20centering','GLhqa':'<blockquote>a\x0a</blockquote>','DVBmJ':function(_0x43bb4f,_0x4d6e75,_0x5b4352,_0x576eba){return _0x43bb4f(_0x4d6e75,_0x5b4352,_0x576eba);},'VODgw':_0x442994(0x25c),'OKvXI':_0x442994(0x237),'TFJjz':_0x442994(0x23c),'toToy':_0x442994(0x1f8),'dlpeU':_0x442994(0x1fc),'BssIV':_0x442994(0x225),'ADdAc':_0x442994(0x212),'mNpCx':_0x442994(0x25b),'bsurH':'<i\x20class=\x22fa\x20fa-bug\x20fa-spin\x22\x20style=\x22font-size:600%\x22></i>\x0a<!--\x20-->','YFTrN':function(_0xd5f7de,_0x151035,_0x27eeee,_0x1024fa){return _0xd5f7de(_0x151035,_0x27eeee,_0x1024fa);},'JIvFG':_0x442994(0x21a),'FdBzb':function(_0x5693e5,_0x388b03,_0x239ba2,_0x2cf62b){return _0x5693e5(_0x388b03,_0x239ba2,_0x2cf62b);},'NLHsH':'<p><kbd>Ctrl</kbd>+<kbd>C</kbd></p>','ugvai':function(_0x2d0127,_0x3c2c6d,_0x6236fa){return _0x2d0127(_0x3c2c6d,_0x6236fa);},'rhluP':_0x442994(0x209),'tfhXr':function(_0x20e140,_0x2a3109,_0x1835dc){return _0x20e140(_0x2a3109,_0x1835dc);},'zJczg':function(_0x1f2884,_0x27aabd,_0x4732c4){return _0x1f2884(_0x27aabd,_0x4732c4);},'PACWz':function(_0x5eee85,_0x1d9e71,_0x2d4043){return _0x5eee85(_0x1d9e71,_0x2d4043);},'LqQMc':_0x442994(0x25d),'kyyYH':function(_0x44dbff,_0x13b557){return _0x44dbff(_0x13b557);},'yMthB':_0x442994(0x249),'PCnZH':_0x442994(0x202),'NjCHc':function(_0x5a887f,_0x1f319f,_0x31af75){return _0x5a887f(_0x1f319f,_0x31af75);},'Qkagu':_0x442994(0x218),'YSUMu':_0x442994(0x203),'svDvi':function(_0x1f255f,_0x1334d0,_0x3ef8b2){return _0x1f255f(_0x1334d0,_0x3ef8b2);},'SvnIc':'allows\x20protocol\x20relative\x20urls','ERVvw':_0x442994(0x20f),'uxmSF':_0x442994(0x264),'qTgum':_0x442994(0x248),'Jcins':'ids\x20on\x20headings','Urtpn':_0x442994(0x215)};_0x115d5e['PACWz'](test,_0x115d5e[_0x442994(0x267)],function(_0x221a82){const _0x429ae4=_0x442994,_0x56f0e4=new _0x8de7fe(_0x115d5e[_0x429ae4(0x24d)](buildOptions,{'siteSettings':{'allowed_iframes':_0x115d5e[_0x429ae4(0x251)]}})),_0x48c41d=(_0x1b360b,_0x19dfac,_0x58fcd5)=>_0x221a82[_0x429ae4(0x204)](_0x56f0e4['cook'](_0x1b360b),_0x19dfac[_0x429ae4(0x1fe)](/\/>/g,'>'),_0x58fcd5);_0x221a82[_0x429ae4(0x204)](_0x56f0e4[_0x429ae4(0x248)](_0x115d5e[_0x429ae4(0x265)]),_0x429ae4(0x262)),_0x221a82[_0x429ae4(0x204)](_0x56f0e4[_0x429ae4(0x248)](_0x429ae4(0x207)),_0x115d5e['Bdsrv']),_0x221a82[_0x429ae4(0x204)](_0x56f0e4[_0x429ae4(0x248)](_0x115d5e[_0x429ae4(0x268)]),_0x115d5e['vjdRc']),_0x221a82['equal'](_0x56f0e4[_0x429ae4(0x248)](_0x429ae4(0x206)),_0x429ae4(0x25e)),_0x221a82[_0x429ae4(0x204)](_0x56f0e4[_0x429ae4(0x248)](_0x115d5e[_0x429ae4(0x243)]),'&lt;_&lt;'),_0x115d5e[_0x429ae4(0x20d)](_0x48c41d,'hello<script>alert(42)</script>',_0x115d5e[_0x429ae4(0x252)],_0x115d5e['fZIOb']),_0x115d5e[_0x429ae4(0x261)](_0x48c41d,_0x429ae4(0x24a),_0x115d5e[_0x429ae4(0x1f9)],_0x429ae4(0x217)),_0x48c41d(_0x115d5e[_0x429ae4(0x214)],'hello',_0x115d5e[_0x429ae4(0x245)]),_0x115d5e[_0x429ae4(0x261)](_0x48c41d,_0x429ae4(0x220),_0x115d5e[_0x429ae4(0x21d)],_0x429ae4(0x22c)),_0x115d5e[_0x429ae4(0x21e)](_0x48c41d,_0x115d5e['VODgw'],'',_0x115d5e['OKvXI']),_0x48c41d('<iframe\x20src=\x22https://www.google.com/maps/embed?pb=!1m10!1m8!1m3!1d2624.9983685732213!2d2.29432085!3d48.85824149999999!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2s!4v1385737436368\x22\x20width=\x22100\x22\x20height=\x2242\x22></iframe>','<iframe\x20src=\x22https://www.google.com/maps/embed?pb=!1m10!1m8!1m3!1d2624.9983685732213!2d2.29432085!3d48.85824149999999!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2s!4v1385737436368\x22\x20width=\x22100\x22\x20height=\x2242\x22></iframe>',_0x115d5e[_0x429ae4(0x222)]),_0x48c41d(_0x115d5e['toToy'],'<iframe\x20width=\x22425\x22\x20height=\x22350\x22\x20frameborder=\x220\x22\x20marginheight=\x220\x22\x20marginwidth=\x220\x22\x20src=\x22https://www.openstreetmap.org/export/embed.html?bbox=22.49454975128174%2C51.220338322410775%2C22.523088455200195%2C51.23345342732931&amp;layer=mapnik\x22></iframe>',_0x429ae4(0x1f2)),_0x221a82[_0x429ae4(0x204)](_0x56f0e4[_0x429ae4(0x248)](_0x429ae4(0x211)),'hullo'),_0x221a82[_0x429ae4(0x204)](_0x56f0e4[_0x429ae4(0x248)](_0x429ae4(0x244)),_0x115d5e[_0x429ae4(0x24f)]),_0x221a82[_0x429ae4(0x204)](_0x56f0e4[_0x429ae4(0x248)](_0x429ae4(0x250)),_0x115d5e[_0x429ae4(0x1f7)]),_0x221a82['equal'](_0x56f0e4[_0x429ae4(0x248)](_0x429ae4(0x255)),_0x429ae4(0x1f1)),_0x48c41d(_0x115d5e[_0x429ae4(0x1f4)],_0x429ae4(0x242),_0x115d5e[_0x429ae4(0x1fb)]),_0x48c41d(_0x115d5e['bsurH'],_0x429ae4(0x21f),_0x429ae4(0x266)),_0x115d5e[_0x429ae4(0x21b)](_0x48c41d,_0x429ae4(0x20c),_0x115d5e[_0x429ae4(0x205)],_0x429ae4(0x236)),_0x115d5e[_0x429ae4(0x261)](_0x48c41d,_0x429ae4(0x22e),_0x115d5e['JIvFG'],_0x429ae4(0x236)),_0x115d5e[_0x429ae4(0x23f)](_0x48c41d,'<span\x20class=\x22bbcode-s\x22>a</span>','<p><span\x20class=\x22bbcode-s\x22>a</span></p>','it\x20sanitizes\x20spans'),_0x48c41d(_0x429ae4(0x1fd),_0x115d5e[_0x429ae4(0x1f6)]),_0x115d5e[_0x429ae4(0x223)](_0x48c41d,_0x115d5e['rhluP'],_0x429ae4(0x1ff)),_0x115d5e[_0x429ae4(0x223)](_0x48c41d,_0x429ae4(0x201),_0x429ae4(0x239)),_0x48c41d('<div\x20align=\x22center\x22>hello</div>','<div\x20align=\x22center\x22>hello</div>'),_0x48c41d('1\x20+\x201\x20is\x20<del>3</del>\x20<ins>2</ins>',_0x429ae4(0x254)),_0x48c41d(_0x429ae4(0x241),_0x429ae4(0x228)),_0x115d5e[_0x429ae4(0x24e)](_0x48c41d,'<dl><dt>Forum</dt><dd>Software</dd></dl>','<dl><dt>Forum</dt><dd>Software</dd></dl>'),_0x115d5e['zJczg'](_0x48c41d,_0x429ae4(0x24c),'<p><sup>high</sup>\x20<sub>low</sub>\x20<big>HUGE</big></p>'),_0x115d5e[_0x429ae4(0x260)](_0x48c41d,_0x429ae4(0x23e),_0x429ae4(0x23e));}),_0x115d5e[_0x442994(0x260)](test,_0x115d5e['Jcins'],function(_0x1d2e57){const _0x52eb2c=_0x442994,_0x561425=new _0x8de7fe(buildOptions({'siteSettings':{}}));_0x1d2e57['equal'](_0x561425[_0x52eb2c(0x248)](_0x52eb2c(0x25d)),_0x115d5e[_0x52eb2c(0x221)]),_0x1d2e57[_0x52eb2c(0x204)](_0x561425[_0x52eb2c(0x248)](_0x52eb2c(0x20a)),_0x52eb2c(0x20a)),_0x1d2e57[_0x52eb2c(0x204)](_0x561425[_0x52eb2c(0x248)](_0x52eb2c(0x269)),_0x52eb2c(0x269)),_0x1d2e57[_0x52eb2c(0x204)](_0x561425[_0x52eb2c(0x248)](_0x52eb2c(0x24b)),_0x52eb2c(0x24b)),_0x1d2e57['equal'](_0x561425['sanitize'](_0x52eb2c(0x247)),'<h4\x20id=\x22heading--underscored_name\x22>Test\x20Heading</h4>'),_0x1d2e57['equal'](_0x561425['sanitize'](_0x52eb2c(0x256)),'<h5\x20id=\x22heading--trout\x22>Test\x20Heading</h5>'),_0x1d2e57[_0x52eb2c(0x204)](_0x561425[_0x52eb2c(0x248)]('<h6\x20id=\x22heading--discourse\x22>Test\x20Heading</h6>'),_0x52eb2c(0x219));}),_0x115d5e[_0x442994(0x24e)](test,_0x115d5e[_0x442994(0x20b)],function(_0x16092c){const _0x14dfdb=_0x442994;let _0x4c7d80=new _0x8de7fe(_0x115d5e[_0x14dfdb(0x246)](buildOptions,{'siteSettings':{}}));_0x16092c['ok'](_0x4c7d80[_0x14dfdb(0x248)]('<p>Hey</p><video\x20autoplay\x20src=\x22http://example.com/music.mp4\x22/>')[_0x14dfdb(0x216)](/muted/)),_0x16092c['ok'](_0x4c7d80[_0x14dfdb(0x248)](_0x14dfdb(0x210))[_0x14dfdb(0x216)](/muted/)),_0x16092c['ok'](_0x4c7d80[_0x14dfdb(0x248)](_0x14dfdb(0x253))[_0x14dfdb(0x216)](/muted/)),_0x16092c[_0x14dfdb(0x25f)](_0x4c7d80['sanitize'](_0x14dfdb(0x231))[_0x14dfdb(0x216)](/muted/));}),test(_0x442994(0x238),function(_0x40dba1){const _0x35f229=_0x442994;let _0x53cd64=new _0x8de7fe(_0x115d5e['dMYvt'](buildOptions,{'siteSettings':{}}));_0x40dba1['equal'](_0x53cd64[_0x35f229(0x248)](_0x35f229(0x22a)),_0x35f229(0x240)),_0x40dba1['equal'](_0x53cd64[_0x35f229(0x248)](_0x35f229(0x22b)),_0x35f229(0x240)),_0x40dba1[_0x35f229(0x204)](_0x53cd64[_0x35f229(0x248)]('<h1\x20id=\x22heading--with\x20space\x22>Test\x20Heading</h1>'),_0x35f229(0x240)),_0x40dba1[_0x35f229(0x204)](_0x53cd64[_0x35f229(0x248)](_0x35f229(0x200)),_0x35f229(0x240)),_0x40dba1[_0x35f229(0x204)](_0x53cd64[_0x35f229(0x248)](_0x35f229(0x22b)),_0x35f229(0x240)),_0x40dba1[_0x35f229(0x204)](_0x53cd64['sanitize'](_0x35f229(0x22d)),'<h1>Test\x20Heading</h1>');}),_0x115d5e[_0x442994(0x223)](test,_0x442994(0x1f3),function(_0x352f25){const _0x36ce52=_0x442994,_0x32cf77=(_0xa0b9fe,_0x5ecf3c)=>_0x352f25[_0x36ce52(0x204)](hrefAllowed(_0xa0b9fe),_0xa0b9fe,_0x5ecf3c);_0x32cf77(_0x115d5e[_0x36ce52(0x234)],_0x115d5e['PCnZH']),_0x32cf77(_0x36ce52(0x23a),_0x36ce52(0x213)),_0x115d5e['NjCHc'](_0x32cf77,_0x115d5e[_0x36ce52(0x208)],_0x115d5e['YSUMu']),_0x115d5e[_0x36ce52(0x230)](_0x32cf77,_0x36ce52(0x26a),_0x115d5e['SvnIc']),_0x352f25['equal'](_0x115d5e[_0x36ce52(0x246)](hrefAllowed,_0x115d5e['ERVvw']),_0x36ce52(0x21c),_0x115d5e[_0x36ce52(0x22f)]);});});