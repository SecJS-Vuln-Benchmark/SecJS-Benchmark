const _0x139610=_0x30fb;function _0x30fb(_0x32ff00,_0xf60777){const _0x20668b=_0x2066();return _0x30fb=function(_0x30fb00,_0x5ba9aa){_0x30fb00=_0x30fb00-0xfa;let _0x5255a3=_0x20668b[_0x30fb00];return _0x5255a3;},_0x30fb(_0x32ff00,_0xf60777);}(function(_0x109ceb,_0x200d02){const _0x2a0e9b=_0x30fb,_0x36ea01=_0x109ceb();while(!![]){try{const _0x36e072=-parseInt(_0x2a0e9b(0x119))/0x1*(parseInt(_0x2a0e9b(0x10d))/0x2)+-parseInt(_0x2a0e9b(0x177))/0x3*(parseInt(_0x2a0e9b(0x103))/0x4)+parseInt(_0x2a0e9b(0xfa))/0x5*(parseInt(_0x2a0e9b(0x141))/0x6)+-parseInt(_0x2a0e9b(0x162))/0x7*(-parseInt(_0x2a0e9b(0x163))/0x8)+-parseInt(_0x2a0e9b(0x113))/0x9+-parseInt(_0x2a0e9b(0x149))/0xa*(-parseInt(_0x2a0e9b(0x134))/0xb)+parseInt(_0x2a0e9b(0x139))/0xc*(parseInt(_0x2a0e9b(0x117))/0xd);if(_0x36e072===_0x200d02)break;else _0x36ea01['push'](_0x36ea01['shift']());}catch(_0x4d5e67){_0x36ea01['push'](_0x36ea01['shift']());}}}(_0x2066,0x1a8b8));function _0x2066(){const _0xf685a4=['Error','OdmQn','url','qshhr','should\x20not\x20be\x20able\x20to\x20remove\x20a\x20require\x20key\x20in\x20a\x20_Product','twNcS','eRvOa','toString','a-product','Should\x20not\x20succeed','jkHZJ','should\x20fail\x20at\x20appstore\x20validation','Mskbl','33KPpzLL','Query','title\x20is\x20required.','WiONx','DjjYT','1452ArYLik','application/json','kxLfM','INVALID_JSON','OBJECT_NOT_FOUND','Bytes','test\x20validate_receipt\x20endpoint','download_file','1494EdtTJb','bwRiT','INCORRECT_TYPE','gZIdr','set','The\x20data\x20in\x20the\x20receipt-data\x20property\x20was\x20malformed\x20or\x20missing.','RLcxz','nYpOc','411650lylSsp','catch','LguVN','VHfXx','should\x20fail\x20for\x20missing\x20receipt','save','Body\x20is\x20not\x20an\x20object','should\x20bypass\x20appstore\x20validation\x20and\x20not\x20find\x20product','error','stringify','name','rest','XVFdn','_Product','mtiqi','gTImJ','FymPZ','POST','message','http://localhost:8378/1/validate_purchase','base64','xNlxi','title','first','unset','469uPnbIM','22432ezRctz','wpnZY','MJSXu','YfxNu','a\x20new\x20title','OMDlG','should\x20bypass\x20appstore\x20validation','status','File','a\x20product','toBe','VjJyt','mbKAU','FlJoS','text','TtZPA','BIDJC','vZAJF','Object','Product\x20should\x20be\x20found','3GQxVFG','SBmTZ','apwGe','4000kgSOru','test','JaGQe','wIUJd','then','another-product','MgtiB','data','toEqual','549272TvNZjy','code','cKzDW','qsjtQ','jpEGU','AHaEg','downloadName','dvkTe','should\x20be\x20able\x20to\x20update\x20a\x20_Product','zCAKx','351734xmjMOz','wkLXk','receipt','erTcy','qaWGm','utf-8','1419669tYSqSk','get','cXMmW','KyxSo','7423juvKcU','Gytzx','1Pditsl','reject','object','UGCid','jFnka','download','LoGtQ','IRkyz','Udhbl','utf8','should\x20not\x20create\x20a\x20_Product','wKdwM','Should\x20not\x20be\x20able\x20to\x20save','WKeAj'];_0x2066=function(){return _0xf685a4;};return _0x2066();}const request=require('../lib/request');function createProduct(){const _0x283749=_0x30fb,_0x44a4f0={'qPyqT':'a\x20product','Yhbvp':_0x283749(0x153),'UpKUR':_0x283749(0x140),'HPtAx':'base64'},_0x2a09bc=new Parse['File'](_0x44a4f0['Yhbvp'],{'base64':new Buffer(_0x44a4f0['UpKUR'],_0x283749(0x112))[_0x283749(0x12e)](_0x44a4f0['HPtAx'])},_0x283749(0x171));return _0x2a09bc['save']()[_0x283749(0xfe)](function(){const _0x56e2a8=_0x283749,_0x5359a1=new Parse[(_0x56e2a8(0x175))](_0x56e2a8(0x156));return _0x5359a1[_0x56e2a8(0x145)]({'download':_0x2a09bc,'icon':_0x2a09bc,'title':_0x56e2a8(0x16c),'subtitle':_0x44a4f0['qPyqT'],'order':0x1,'productIdentifier':'a-product'}),_0x5359a1['save']();});}describe(_0x139610(0x13f),()=>{const _0x20734d=_0x139610,_0xb10c7b={'vZAJF':_0x20734d(0x156),'LguVN':'a\x20product','mtiqi':_0x20734d(0x140),'FymPZ':_0x20734d(0x171),'twNcS':'cMpMa','OdmQn':'a\x20new\x20title','gZIdr':function(_0x5f4bec,_0xfc9f20){return _0x5f4bec(_0xfc9f20);},'WKeAj':_0x20734d(0x15a),'TtZPA':_0x20734d(0x15c),'WPSZW':'a-product','jkHZJ':_0x20734d(0x13e),'SBmTZ':_0x20734d(0x10f),'WiONx':_0x20734d(0x15d),'VjJyt':_0x20734d(0x11b),'mbKAU':_0x20734d(0x14f),'FlJoS':function(_0x4ff735,_0x2ad411){return _0x4ff735===_0x2ad411;},'MgtiB':_0x20734d(0x10c),'qshhr':function(_0x49053f,_0x5259b6){return _0x49053f(_0x5259b6);},'VHfXx':function(_0x2af4ed,_0x8b598){return _0x2af4ed(_0x8b598);},'KyxSo':'application/json','IRkyz':function(_0x505667,_0x36887d){return _0x505667(_0x36887d);},'YfxNu':_0x20734d(0xfb),'AHaEg':_0x20734d(0x154),'Mskbl':_0x20734d(0x112),'dvkTe':function(_0x4aadf5,_0x53c4b4){return _0x4aadf5!=_0x53c4b4;},'UGCid':_0x20734d(0x146),'VAvkW':function(_0x19fc86,_0x84a642){return _0x19fc86===_0x84a642;},'qsjtQ':_0x20734d(0x138),'wIUJd':function(_0x1bd87e,_0x240407){return _0x1bd87e(_0x240407);},'jpEGU':_0x20734d(0x15f),'gTImJ':function(_0x41e7da,_0x1a2b1b){return _0x41e7da===_0x1a2b1b;},'JaGQe':_0x20734d(0x179),'cXMmW':_0x20734d(0x130),'VoJjB':function(_0x2761cb){return _0x2761cb();},'bwRiT':function(_0x53687c,_0x3ac712){return _0x53687c(_0x3ac712);},'nYpOc':_0x20734d(0x169),'Gytzx':function(_0x5c00ea,_0x41e463,_0x18a9d0){return _0x5c00ea(_0x41e463,_0x18a9d0);},'erTcy':_0x20734d(0x132),'xNlxi':_0x20734d(0x10b),'wpnZY':_0x20734d(0x12b)};_0xb10c7b[_0x20734d(0x142)](beforeEach,_0x4a6c3b=>{const _0x1f4c9b=_0x20734d,_0xab59d7={'RLcxz':_0xb10c7b['vZAJF'],'eRvOa':_0xb10c7b[_0x1f4c9b(0x14b)],'wKdwM':_0x1f4c9b(0x12f),'BIDJC':_0xb10c7b[_0x1f4c9b(0x157)],'OMDlG':_0x1f4c9b(0x15d),'MJSXu':_0xb10c7b[_0x1f4c9b(0x159)],'SUIvU':function(_0x2ecc71){return _0x2ecc71();}};if(_0xb10c7b['twNcS']!==_0xb10c7b[_0x1f4c9b(0x12c)]){const _0x52beff=new _0x2c595f['File'](_0x1f4c9b(0x153),{'base64':new _0x5df4ed(_0xab59d7[_0x1f4c9b(0x173)],_0x1f4c9b(0x112))['toString'](_0xab59d7[_0x1f4c9b(0x168)])},_0xab59d7[_0x1f4c9b(0x165)]);return _0x52beff[_0x1f4c9b(0x14e)]()[_0x1f4c9b(0xfe)](function(){const _0x2136e7=_0x1f4c9b,_0x3707d4=new _0x3cb425[(_0x2136e7(0x175))](_0xab59d7[_0x2136e7(0x147)]);return _0x3707d4['set']({'download':_0x52beff,'icon':_0x52beff,'title':_0x2136e7(0x16c),'subtitle':_0xab59d7[_0x2136e7(0x12d)],'order':0x1,'productIdentifier':_0xab59d7[_0x2136e7(0x124)]}),_0x3707d4[_0x2136e7(0x14e)]();});}else createProduct()[_0x1f4c9b(0xfe)](_0x4a6c3b)[_0x1f4c9b(0x14a)](function(_0x2a0382){console['error']({'err':_0x2a0382}),_0xab59d7['SUIvU'](_0x4a6c3b);});}),it(_0xb10c7b[_0x20734d(0x148)],async()=>{const _0x2ef561=_0x20734d,_0x2058d1=await _0xb10c7b[_0x2ef561(0x144)](request,{'headers':{'X-Parse-Application-Id':'test','X-Parse-REST-API-Key':_0x2ef561(0x154),'Content-Type':_0x2ef561(0x13a)},'method':_0xb10c7b[_0x2ef561(0x126)],'url':_0xb10c7b[_0x2ef561(0x172)],'body':{'productIdentifier':_0xb10c7b['WPSZW'],'receipt':{'__type':_0xb10c7b[_0x2ef561(0x131)],'base64':new Buffer(_0xb10c7b[_0x2ef561(0x178)],'utf-8')['toString'](_0xb10c7b[_0x2ef561(0x137)])},'bypassAppStoreValidation':!![]}}),_0x57997f=_0x2058d1[_0x2ef561(0x101)];if(typeof _0x57997f!=_0xb10c7b[_0x2ef561(0x16e)])fail(_0xb10c7b[_0x2ef561(0x16f)]);else{if(_0xb10c7b[_0x2ef561(0x170)](_0xb10c7b[_0x2ef561(0x100)],_0xb10c7b['MgtiB'])){_0xb10c7b[_0x2ef561(0x12a)](expect,_0x57997f['__type'])[_0x2ef561(0x102)](_0x2ef561(0x16b));const _0x8bff16=_0x57997f[_0x2ef561(0x129)],_0x2cb026=await request({'url':_0x8bff16});expect(_0x2cb026[_0x2ef561(0x171)])[_0x2ef561(0x16d)]('download_file');}else{if(!_0x4e15d8)return _0x36f9b2[_0x2ef561(0x11a)](new _0x2c64bb(_0x2ef561(0x176)));return _0x23edf1[_0x2ef561(0x145)](_0x2ef561(0x15f),_0xb10c7b[_0x2ef561(0x128)]),_0x15056d[_0x2ef561(0x14e)]();}}}),it(_0x20734d(0x14d),async()=>{const _0xde175a=_0x20734d,_0x3d816d=await _0xb10c7b[_0xde175a(0x14c)](request,{'headers':{'X-Parse-Application-Id':_0xde175a(0xfb),'X-Parse-REST-API-Key':_0xde175a(0x154),'Content-Type':_0xb10c7b[_0xde175a(0x116)]},'url':_0xb10c7b['TtZPA'],'method':_0xb10c7b[_0xde175a(0x126)],'body':{'productIdentifier':'a-product','bypassAppStoreValidation':!![]}})['then'](fail,_0x51b611=>_0x51b611),_0x4f6971=_0x3d816d[_0xde175a(0x101)];_0xb10c7b[_0xde175a(0x120)](expect,_0x4f6971[_0xde175a(0x104)])[_0xde175a(0x102)](Parse[_0xde175a(0x127)][_0xde175a(0x13c)]);}),_0xb10c7b[_0x20734d(0x118)](it,'should\x20fail\x20for\x20missing\x20product\x20identifier',async()=>{const _0x504bbb=_0x20734d,_0x2df475=await request({'headers':{'X-Parse-Application-Id':_0xb10c7b[_0x504bbb(0x166)],'X-Parse-REST-API-Key':_0xb10c7b[_0x504bbb(0x108)],'Content-Type':_0xb10c7b[_0x504bbb(0x116)]},'url':_0xb10c7b[_0x504bbb(0x172)],'method':_0xb10c7b[_0x504bbb(0x126)],'body':{'receipt':{'__type':'Bytes','base64':new Buffer(_0xb10c7b['SBmTZ'],_0xb10c7b[_0x504bbb(0x133)])[_0x504bbb(0x12e)](_0xb10c7b[_0x504bbb(0x137)])},'bypassAppStoreValidation':!![]}})[_0x504bbb(0xfe)](fail,_0x420332=>_0x420332),_0x539d27=_0x2df475['data'];expect(_0x539d27[_0x504bbb(0x104)])[_0x504bbb(0x102)](Parse[_0x504bbb(0x127)][_0x504bbb(0x13c)]);}),_0xb10c7b[_0x20734d(0x118)](it,_0x20734d(0x150),async()=>{const _0x2d21a5=_0x20734d,_0x37cc2a=await request({'headers':{'X-Parse-Application-Id':_0xb10c7b['YfxNu'],'X-Parse-REST-API-Key':_0xb10c7b['AHaEg'],'Content-Type':_0xb10c7b[_0x2d21a5(0x116)]},'url':_0xb10c7b['TtZPA'],'method':'POST','body':{'productIdentifier':_0x2d21a5(0xff),'receipt':{'__type':_0x2d21a5(0x13e),'base64':new Buffer(_0x2d21a5(0x10f),_0x2d21a5(0x122))['toString'](_0x2d21a5(0x15d))},'bypassAppStoreValidation':!![]}})['catch'](_0x2b490d=>_0x2b490d),_0xed34bd=_0x37cc2a[_0x2d21a5(0x101)];_0xb10c7b[_0x2d21a5(0x10a)](typeof _0xed34bd,_0x2d21a5(0x11b))?fail(_0xb10c7b[_0x2d21a5(0x16f)]):(_0xb10c7b[_0x2d21a5(0x144)](expect,_0xed34bd[_0x2d21a5(0x104)])[_0x2d21a5(0x102)](Parse[_0x2d21a5(0x127)][_0x2d21a5(0x13d)]),expect(_0xed34bd[_0x2d21a5(0x151)])[_0x2d21a5(0x102)]('Object\x20not\x20found.'));}),it(_0xb10c7b[_0x20734d(0x110)],async()=>{const _0x56c36d=_0x20734d,_0x1d2a8c=await request({'headers':{'X-Parse-Application-Id':_0xb10c7b[_0x56c36d(0x166)],'X-Parse-REST-API-Key':_0xb10c7b[_0x56c36d(0x108)],'Content-Type':_0xb10c7b[_0x56c36d(0x116)]},'url':_0x56c36d(0x15c),'method':_0xb10c7b[_0x56c36d(0x126)],'body':{'productIdentifier':_0x56c36d(0x12f),'receipt':{'__type':_0x56c36d(0x13e),'base64':new Buffer(_0x56c36d(0x10f),_0x56c36d(0x112))[_0x56c36d(0x12e)](_0xb10c7b[_0x56c36d(0x137)])}}}),_0x135795=_0x1d2a8c[_0x56c36d(0x101)];typeof _0x135795!=_0xb10c7b[_0x56c36d(0x16e)]?_0xb10c7b[_0x56c36d(0x144)](fail,_0x56c36d(0x14f)):(_0xb10c7b[_0x56c36d(0x120)](expect,_0x135795[_0x56c36d(0x16a)])['toBe'](0x520a),expect(_0x135795[_0x56c36d(0x151)])[_0x56c36d(0x16d)](_0xb10c7b[_0x56c36d(0x11c)]));}),it(_0x20734d(0x123),_0x452914=>{const _0x27fef1=_0x20734d,_0x495ab0=new Parse['Object'](_0xb10c7b[_0x27fef1(0x174)]);_0x495ab0[_0x27fef1(0x14e)]()[_0x27fef1(0xfe)](function(){const _0x29bdf3=_0x27fef1;_0xb10c7b[_0x29bdf3(0x120)](fail,_0x29bdf3(0x125)),_0x452914();},function(_0x5b762c){const _0x3cfcbb=_0x27fef1,_0x380093={'kxLfM':function(_0x123c8f){return _0x123c8f();}};_0xb10c7b['VAvkW'](_0xb10c7b[_0x3cfcbb(0x106)],'DjjYT')?(_0xb10c7b[_0x3cfcbb(0xfd)](expect,_0x5b762c['code'])[_0x3cfcbb(0x102)](Parse[_0x3cfcbb(0x127)]['INCORRECT_TYPE']),_0x452914()):(_0x363b31(_0x2d9bd0[_0x3cfcbb(0x152)](_0x260d5c)),_0x380093[_0x3cfcbb(0x13b)](_0x54dc7a));});}),it(_0xb10c7b[_0x20734d(0x15e)],_0x3efda0=>{const _0x1167e5=_0x20734d,_0x30e0e3={'vcbWn':_0xb10c7b[_0x1167e5(0x107)],'jFnka':_0x1167e5(0x167),'LoGtQ':_0x1167e5(0x125),'wkLXk':_0xb10c7b['vZAJF'],'FNnZa':function(_0xe9d824,_0x86d96c){const _0x22c593=_0x1167e5;return _0xb10c7b[_0x22c593(0x158)](_0xe9d824,_0x86d96c);},'XVFdn':function(_0x352fd0,_0x1c033c){return _0x352fd0(_0x1c033c);},'cKzDW':function(_0x26ad41){return _0x26ad41();}};if('vvnEm'===_0xb10c7b[_0x1167e5(0xfc)])_0xc85183(_0x1167e5(0x14f));else{const _0x1b1086=new Parse[(_0x1167e5(0x135))](_0xb10c7b['vZAJF']);_0x1b1086[_0x1167e5(0x160)]()['then'](function(_0x29f68b){const _0x502198=_0x1167e5;if(!_0x29f68b)return Promise['reject'](new Error(_0x502198(0x176)));return _0x29f68b[_0x502198(0x145)](_0x30e0e3['vcbWn'],_0x30e0e3[_0x502198(0x11d)]),_0x29f68b[_0x502198(0x14e)]();})[_0x1167e5(0xfe)](function(_0x623d15){const _0x199132=_0x1167e5;if(_0x30e0e3['FNnZa']('QjCiz','QjCiz'))expect(_0x623d15['get'](_0x199132(0x109)))['toEqual'](_0x623d15[_0x199132(0x114)](_0x199132(0x11e))['name']()),_0x30e0e3[_0x199132(0x155)](expect,_0x623d15[_0x199132(0x114)](_0x199132(0x15f)))[_0x199132(0x102)](_0x30e0e3[_0x199132(0x11d)]),_0x30e0e3[_0x199132(0x105)](_0x3efda0);else{const _0x2dca76={'Udhbl':_0x30e0e3[_0x199132(0x11f)]},_0x5e502f=new _0x950de0[(_0x199132(0x175))](_0x30e0e3[_0x199132(0x10e)]);_0x5e502f[_0x199132(0x14e)]()[_0x199132(0xfe)](function(){const _0x1ad4a4=_0x199132;_0x5d0126(_0x2dca76[_0x1ad4a4(0x121)]),_0x45bdc5();},function(_0x98b78e){const _0xfc7cc6=_0x199132;_0x38ab7b(_0x98b78e[_0xfc7cc6(0x104)])[_0xfc7cc6(0x102)](_0x3033c1[_0xfc7cc6(0x127)][_0xfc7cc6(0x143)]),_0x1db35e();});}})[_0x1167e5(0x14a)](function(_0x22257c){const _0x46a734=_0x1167e5;fail(JSON['stringify'](_0x22257c)),_0x30e0e3[_0x46a734(0x105)](_0x3efda0);});}}),_0xb10c7b[_0x20734d(0x118)](it,_0xb10c7b[_0x20734d(0x164)],_0x45fbfd=>{const _0x4371f9=_0x20734d,_0x25a53c={'qaWGm':_0xb10c7b['jpEGU']},_0x5b5e90=new Parse[(_0x4371f9(0x135))](_0xb10c7b[_0x4371f9(0x174)]);_0x5b5e90[_0x4371f9(0x160)]()[_0x4371f9(0xfe)](function(_0x107e49){const _0x244f1b=_0x4371f9;if(!_0x107e49)return Promise['reject'](new Error(_0x244f1b(0x176)));return _0x107e49[_0x244f1b(0x161)](_0x25a53c[_0x244f1b(0x111)]),_0x107e49[_0x244f1b(0x14e)]();})[_0x4371f9(0xfe)](function(){const _0x1d1ce9=_0x4371f9;fail(_0xb10c7b[_0x1d1ce9(0x115)]),_0x45fbfd();})[_0x4371f9(0x14a)](function(_0x5a4a20){const _0x4dd241=_0x4371f9;expect(_0x5a4a20[_0x4dd241(0x104)])['toEqual'](Parse[_0x4dd241(0x127)][_0x4dd241(0x143)]),_0xb10c7b[_0x4dd241(0x12a)](expect,_0x5a4a20[_0x4dd241(0x15b)])[_0x4dd241(0x102)](_0x4dd241(0x136)),_0xb10c7b['VoJjB'](_0x45fbfd);});});});